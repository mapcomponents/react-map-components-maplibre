const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.es-CFaNeVWX.js","./iframe-DdvSZNba.js","./preload-helper-D9Z9MdNV.js","./iframe-DG6F43G8.css","./index-DPYK5RoS.js","./index-BJOkD4WZ.js"])))=>i.map(i=>d[i]);
import{j as Z,P as kv,r as Mf}from"./index-DPYK5RoS.js";import{V as k_,r as J,g as tf,R as ft,b as e9,c as Ch,a as Y0}from"./iframe-DdvSZNba.js";import{_ as lS}from"./preload-helper-D9Z9MdNV.js";function qf(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const ld="$$material";function A_(){return A_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A_.apply(null,arguments)}function SW(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function CW(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var EW=(function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(CW(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=SW(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e})(),du="-ms-",M_="-moz-",Ea="-webkit-",t9="comm",uP="rule",cP="decl",TW="@import",r9="@keyframes",PW="@layer",IW=Math.abs,Kx=String.fromCharCode,kW=Object.assign;function AW(e,t){return zl(e,0)^45?(((t<<2^zl(e,0))<<2^zl(e,1))<<2^zl(e,2))<<2^zl(e,3):0}function n9(e){return e.trim()}function MW(e,t){return(e=t.exec(e))?e[0]:e}function Ta(e,t,r){return e.replace(t,r)}function B4(e,t){return e.indexOf(t)}function zl(e,t){return e.charCodeAt(t)|0}function m0(e,t,r){return e.slice(t,r)}function jd(e){return e.length}function dP(e){return e.length}function Y1(e,t){return t.push(e),e}function LW(e,t){return e.map(t).join("")}var Jx=1,Wg=1,i9=0,Wu=0,Hs=0,gy="";function Qx(e,t,r,n,i,o,l){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:Jx,column:Wg,length:l,return:""}}function tv(e,t){return kW(Qx("",null,null,"",null,null,0),e,{length:-e.length},t)}function RW(){return Hs}function DW(){return Hs=Wu>0?zl(gy,--Wu):0,Wg--,Hs===10&&(Wg=1,Jx--),Hs}function hc(){return Hs=Wu<i9?zl(gy,Wu++):0,Wg++,Hs===10&&(Wg=1,Jx++),Hs}function Gd(){return zl(gy,Wu)}function i_(){return Wu}function Z0(e,t){return m0(gy,e,t)}function g0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function a9(e){return Jx=Wg=1,i9=jd(gy=e),Wu=0,[]}function o9(e){return gy="",e}function a_(e){return n9(Z0(Wu-1,z4(e===91?e+2:e===40?e+1:e)))}function NW(e){for(;(Hs=Gd())&&Hs<33;)hc();return g0(e)>2||g0(Hs)>3?"":" "}function OW(e,t){for(;--t&&hc()&&!(Hs<48||Hs>102||Hs>57&&Hs<65||Hs>70&&Hs<97););return Z0(e,i_()+(t<6&&Gd()==32&&hc()==32))}function z4(e){for(;hc();)switch(Hs){case e:return Wu;case 34:case 39:e!==34&&e!==39&&z4(Hs);break;case 40:e===41&&z4(e);break;case 92:hc();break}return Wu}function FW(e,t){for(;hc()&&e+Hs!==57;)if(e+Hs===84&&Gd()===47)break;return"/*"+Z0(t,Wu-1)+"*"+Kx(e===47?e:hc())}function BW(e){for(;!g0(Gd());)hc();return Z0(e,Wu)}function zW(e){return o9(o_("",null,null,null,[""],e=a9(e),0,[0],e))}function o_(e,t,r,n,i,o,l,a,c){for(var h=0,g=0,v=l,x=0,b=0,S=0,I=1,k=1,M=1,O=0,F="",D=i,q=o,z=n,U=F;k;)switch(S=O,O=hc()){case 40:if(S!=108&&zl(U,v-1)==58){B4(U+=Ta(a_(O),"&","&\f"),"&\f")!=-1&&(M=-1);break}case 34:case 39:case 91:U+=a_(O);break;case 9:case 10:case 13:case 32:U+=NW(S);break;case 92:U+=OW(i_()-1,7);continue;case 47:switch(Gd()){case 42:case 47:Y1(jW(FW(hc(),i_()),t,r),c);break;default:U+="/"}break;case 123*I:a[h++]=jd(U)*M;case 125*I:case 59:case 0:switch(O){case 0:case 125:k=0;case 59+g:M==-1&&(U=Ta(U,/\f/g,"")),b>0&&jd(U)-v&&Y1(b>32?QM(U+";",n,r,v-1):QM(Ta(U," ","")+";",n,r,v-2),c);break;case 59:U+=";";default:if(Y1(z=JM(U,t,r,h,g,i,a,F,D=[],q=[],v),o),O===123)if(g===0)o_(U,t,z,z,D,o,v,a,q);else switch(x===99&&zl(U,3)===110?100:x){case 100:case 108:case 109:case 115:o_(e,z,z,n&&Y1(JM(e,z,z,0,0,i,a,F,i,D=[],v),q),i,q,v,a,n?D:q);break;default:o_(U,z,z,z,[""],q,0,a,q)}}h=g=b=0,I=M=1,F=U="",v=l;break;case 58:v=1+jd(U),b=S;default:if(I<1){if(O==123)--I;else if(O==125&&I++==0&&DW()==125)continue}switch(U+=Kx(O),O*I){case 38:M=g>0?1:(U+="\f",-1);break;case 44:a[h++]=(jd(U)-1)*M,M=1;break;case 64:Gd()===45&&(U+=a_(hc())),x=Gd(),g=v=jd(F=U+=BW(i_())),O++;break;case 45:S===45&&jd(U)==2&&(I=0)}}return o}function JM(e,t,r,n,i,o,l,a,c,h,g){for(var v=i-1,x=i===0?o:[""],b=dP(x),S=0,I=0,k=0;S<n;++S)for(var M=0,O=m0(e,v+1,v=IW(I=l[S])),F=e;M<b;++M)(F=n9(I>0?x[M]+" "+O:Ta(O,/&\f/g,x[M])))&&(c[k++]=F);return Qx(e,t,r,i===0?uP:a,c,h,g)}function jW(e,t,r){return Qx(e,t,r,t9,Kx(RW()),m0(e,2,-2),0)}function QM(e,t,r,n){return Qx(e,t,r,cP,m0(e,0,n),m0(e,n+1,-1),n)}function Ng(e,t){for(var r="",n=dP(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function qW(e,t,r,n){switch(e.type){case PW:if(e.children.length)break;case TW:case cP:return e.return=e.return||e.value;case t9:return"";case r9:return e.return=e.value+"{"+Ng(e.children,n)+"}";case uP:e.value=e.props.join(",")}return jd(r=Ng(e.children,n))?e.return=e.value+"{"+r+"}":""}function $W(e){var t=dP(e);return function(r,n,i,o){for(var l="",a=0;a<t;a++)l+=e[a](r,n,i,o)||"";return l}}function VW(e){return function(t){t.root||(t=t.return)&&e(t)}}function s9(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var UW=function(t,r,n){for(var i=0,o=0;i=o,o=Gd(),i===38&&o===12&&(r[n]=1),!g0(o);)hc();return Z0(t,Wu)},GW=function(t,r){var n=-1,i=44;do switch(g0(i)){case 0:i===38&&Gd()===12&&(r[n]=1),t[n]+=UW(Wu-1,r,n);break;case 2:t[n]+=a_(i);break;case 4:if(i===44){t[++n]=Gd()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=Kx(i)}while(i=hc());return t},HW=function(t,r){return o9(GW(a9(t),r))},eL=new WeakMap,WW=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!eL.get(n))&&!i){eL.set(t,!0);for(var o=[],l=HW(r,o),a=n.props,c=0,h=0;c<l.length;c++)for(var g=0;g<a.length;g++,h++)t.props[h]=o[c]?l[c].replace(/&\f/g,a[g]):a[g]+" "+l[c]}}},XW=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function l9(e,t){switch(AW(e,t)){case 5103:return Ea+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ea+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ea+e+M_+e+du+e+e;case 6828:case 4268:return Ea+e+du+e+e;case 6165:return Ea+e+du+"flex-"+e+e;case 5187:return Ea+e+Ta(e,/(\w+).+(:[^]+)/,Ea+"box-$1$2"+du+"flex-$1$2")+e;case 5443:return Ea+e+du+"flex-item-"+Ta(e,/flex-|-self/,"")+e;case 4675:return Ea+e+du+"flex-line-pack"+Ta(e,/align-content|flex-|-self/,"")+e;case 5548:return Ea+e+du+Ta(e,"shrink","negative")+e;case 5292:return Ea+e+du+Ta(e,"basis","preferred-size")+e;case 6060:return Ea+"box-"+Ta(e,"-grow","")+Ea+e+du+Ta(e,"grow","positive")+e;case 4554:return Ea+Ta(e,/([^-])(transform)/g,"$1"+Ea+"$2")+e;case 6187:return Ta(Ta(Ta(e,/(zoom-|grab)/,Ea+"$1"),/(image-set)/,Ea+"$1"),e,"")+e;case 5495:case 3959:return Ta(e,/(image-set\([^]*)/,Ea+"$1$`$1");case 4968:return Ta(Ta(e,/(.+:)(flex-)?(.*)/,Ea+"box-pack:$3"+du+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ea+e+e;case 4095:case 3583:case 4068:case 2532:return Ta(e,/(.+)-inline(.+)/,Ea+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jd(e)-1-t>6)switch(zl(e,t+1)){case 109:if(zl(e,t+4)!==45)break;case 102:return Ta(e,/(.+:)(.+)-([^]+)/,"$1"+Ea+"$2-$3$1"+M_+(zl(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~B4(e,"stretch")?l9(Ta(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(zl(e,t+1)!==115)break;case 6444:switch(zl(e,jd(e)-3-(~B4(e,"!important")&&10))){case 107:return Ta(e,":",":"+Ea)+e;case 101:return Ta(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ea+(zl(e,14)===45?"inline-":"")+"box$3$1"+Ea+"$2$3$1"+du+"$2box$3")+e}break;case 5936:switch(zl(e,t+11)){case 114:return Ea+e+du+Ta(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ea+e+du+Ta(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ea+e+du+Ta(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ea+e+du+e+e}return e}var YW=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case cP:t.return=l9(t.value,t.length);break;case r9:return Ng([tv(t,{value:Ta(t.value,"@","@"+Ea)})],i);case uP:if(t.length)return LW(t.props,function(o){switch(MW(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ng([tv(t,{props:[Ta(o,/:(read-\w+)/,":"+M_+"$1")]})],i);case"::placeholder":return Ng([tv(t,{props:[Ta(o,/:(plac\w+)/,":"+Ea+"input-$1")]}),tv(t,{props:[Ta(o,/:(plac\w+)/,":"+M_+"$1")]}),tv(t,{props:[Ta(o,/:(plac\w+)/,du+"input-$1")]})],i)}return""})}},ZW=[YW],KW=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(I){var k=I.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(I),I.setAttribute("data-s",""))})}var i=t.stylisPlugins||ZW,o={},l,a=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(I){for(var k=I.getAttribute("data-emotion").split(" "),M=1;M<k.length;M++)o[k[M]]=!0;a.push(I)});var c,h=[WW,XW];{var g,v=[qW,VW(function(I){g.insert(I)})],x=$W(h.concat(i,v)),b=function(k){return Ng(zW(k),x)};c=function(k,M,O,F){g=O,b(k?k+"{"+M.styles+"}":M.styles),F&&(S.inserted[M.name]=!0)}}var S={key:r,sheet:new EW({key:r,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:c};return S.sheet.hydrate(a),S},uS={exports:{}},La={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tL;function JW(){if(tL)return La;tL=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,h=e?Symbol.for("react.concurrent_mode"):60111,g=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,x=e?Symbol.for("react.suspense_list"):60120,b=e?Symbol.for("react.memo"):60115,S=e?Symbol.for("react.lazy"):60116,I=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,M=e?Symbol.for("react.responder"):60118,O=e?Symbol.for("react.scope"):60119;function F(q){if(typeof q=="object"&&q!==null){var z=q.$$typeof;switch(z){case t:switch(q=q.type,q){case c:case h:case n:case o:case i:case v:return q;default:switch(q=q&&q.$$typeof,q){case a:case g:case S:case b:case l:return q;default:return z}}case r:return z}}}function D(q){return F(q)===h}return La.AsyncMode=c,La.ConcurrentMode=h,La.ContextConsumer=a,La.ContextProvider=l,La.Element=t,La.ForwardRef=g,La.Fragment=n,La.Lazy=S,La.Memo=b,La.Portal=r,La.Profiler=o,La.StrictMode=i,La.Suspense=v,La.isAsyncMode=function(q){return D(q)||F(q)===c},La.isConcurrentMode=D,La.isContextConsumer=function(q){return F(q)===a},La.isContextProvider=function(q){return F(q)===l},La.isElement=function(q){return typeof q=="object"&&q!==null&&q.$$typeof===t},La.isForwardRef=function(q){return F(q)===g},La.isFragment=function(q){return F(q)===n},La.isLazy=function(q){return F(q)===S},La.isMemo=function(q){return F(q)===b},La.isPortal=function(q){return F(q)===r},La.isProfiler=function(q){return F(q)===o},La.isStrictMode=function(q){return F(q)===i},La.isSuspense=function(q){return F(q)===v},La.isValidElementType=function(q){return typeof q=="string"||typeof q=="function"||q===n||q===h||q===o||q===i||q===v||q===x||typeof q=="object"&&q!==null&&(q.$$typeof===S||q.$$typeof===b||q.$$typeof===l||q.$$typeof===a||q.$$typeof===g||q.$$typeof===k||q.$$typeof===M||q.$$typeof===O||q.$$typeof===I)},La.typeOf=F,La}var rL;function QW(){return rL||(rL=1,uS.exports=JW()),uS.exports}var cS,nL;function eX(){if(nL)return cS;nL=1;var e=QW(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=n,o[e.Memo]=i;function l(S){return e.isMemo(S)?i:o[S.$$typeof]||t}var a=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,x=Object.prototype;function b(S,I,k){if(typeof I!="string"){if(x){var M=v(I);M&&M!==x&&b(S,M,k)}var O=c(I);h&&(O=O.concat(h(I)));for(var F=l(S),D=l(I),q=0;q<O.length;++q){var z=O[q];if(!r[z]&&!(k&&k[z])&&!(D&&D[z])&&!(F&&F[z])){var U=g(I,z);try{a(S,z,U)}catch{}}}}return S}return cS=b,cS}eX();var tX=!0;function u9(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var fP=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||tX===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},hP=function(t,r,n){fP(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function rX(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var nX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},iX=/[A-Z]|^ms/g,aX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c9=function(t){return t.charCodeAt(1)===45},iL=function(t){return t!=null&&typeof t!="boolean"},dS=s9(function(e){return c9(e)?e:e.replace(iX,"-$&").toLowerCase()}),aL=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(aX,function(n,i,o){return qd={name:i,styles:o,next:qd},i})}return nX[t]!==1&&!c9(t)&&typeof r=="number"&&r!==0?r+"px":r};function y0(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return qd={name:i.name,styles:i.styles,next:qd},i.name;var o=r;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)qd={name:l.name,styles:l.styles,next:qd},l=l.next;var a=o.styles+";";return a}return oX(e,t,r)}case"function":{if(e!==void 0){var c=qd,h=r(e);return qd=c,y0(e,t,h)}break}}var g=r;if(t==null)return g;var v=t[g];return v!==void 0?v:g}function oX(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=y0(e,t,r[i])+";";else for(var o in r){var l=r[o];if(typeof l!="object"){var a=l;t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":iL(a)&&(n+=dS(o)+":"+aL(o,a)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var c=0;c<l.length;c++)iL(l[c])&&(n+=dS(o)+":"+aL(o,l[c])+";");else{var h=y0(e,t,l);switch(o){case"animation":case"animationName":{n+=dS(o)+":"+h+";";break}default:n+=o+"{"+h+"}"}}}return n}var oL=/label:\s*([^\s;{]+)\s*(;|$)/g,qd;function K0(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";qd=void 0;var o=e[0];if(o==null||o.raw===void 0)n=!1,i+=y0(r,t,o);else{var l=o;i+=l[0]}for(var a=1;a<e.length;a++)if(i+=y0(r,t,e[a]),n){var c=o;i+=c[a]}oL.lastIndex=0;for(var h="",g;(g=oL.exec(i))!==null;)h+="-"+g[1];var v=rX(i)+h;return{name:v,styles:i,next:qd}}var sX=function(t){return t()},d9=k_.useInsertionEffect?k_.useInsertionEffect:!1,f9=d9||sX,sL=d9||J.useLayoutEffect,h9=J.createContext(typeof HTMLElement<"u"?KW({key:"css"}):null);h9.Provider;var pP=function(t){return J.forwardRef(function(r,n){var i=J.useContext(h9);return t(r,i,n)})},J0=J.createContext({}),mP={}.hasOwnProperty,j4="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",lX=function(t,r){var n={};for(var i in r)mP.call(r,i)&&(n[i]=r[i]);return n[j4]=t,n},uX=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return fP(r,n,i),f9(function(){return hP(r,n,i)}),null},cX=pP(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[j4],o=[n],l="";typeof e.className=="string"?l=u9(t.registered,o,e.className):e.className!=null&&(l=e.className+" ");var a=K0(o,void 0,J.useContext(J0));l+=t.key+"-"+a.name;var c={};for(var h in e)mP.call(e,h)&&h!=="css"&&h!==j4&&(c[h]=e[h]);return c.className=l,r&&(c.ref=r),J.createElement(J.Fragment,null,J.createElement(uX,{cache:t,serialized:a,isStringTag:typeof i=="string"}),J.createElement(i,c))}),dX=cX,lL=function(t,r){var n=arguments;if(r==null||!mP.call(r,"css"))return J.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=dX,o[1]=lX(t,r);for(var l=2;l<i;l++)o[l]=n[l];return J.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(lL||(lL={}));var p9=pP(function(e,t){var r=e.styles,n=K0([r],void 0,J.useContext(J0)),i=J.useRef();return sL(function(){var o=t.key+"-global",l=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,c=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),c!==null&&(a=!0,c.setAttribute("data-emotion",o),l.hydrate([c])),i.current=[l,a],function(){l.flush()}},[t]),sL(function(){var o=i.current,l=o[0],a=o[1];if(a){o[1]=!1;return}if(n.next!==void 0&&hP(t,n.next,!0),l.tags.length){var c=l.tags[l.tags.length-1].nextElementSibling;l.before=c,l.flush()}t.insert("",n,l,!1)},[t,n.name]),null});function gP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return K0(t)}function Q0(){var e=gP.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var fX=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,hX=s9(function(e){return fX.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),pX=hX,mX=function(t){return t!=="theme"},uL=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?pX:mX},cL=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(l){return t.__emotion_forwardProp(l)&&o(l)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},gX=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return fP(r,n,i),f9(function(){return hP(r,n,i)}),null},yX=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,l;r!==void 0&&(o=r.label,l=r.target);var a=cL(t,r,n),c=a||uL(i),h=!c("as");return function(){var g=arguments,v=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)v.push.apply(v,g);else{var x=g[0];v.push(x[0]);for(var b=g.length,S=1;S<b;S++)v.push(g[S],x[S])}var I=pP(function(k,M,O){var F=h&&k.as||i,D="",q=[],z=k;if(k.theme==null){z={};for(var U in k)z[U]=k[U];z.theme=J.useContext(J0)}typeof k.className=="string"?D=u9(M.registered,q,k.className):k.className!=null&&(D=k.className+" ");var H=K0(v.concat(q),M.registered,z);D+=M.key+"-"+H.name,l!==void 0&&(D+=" "+l);var X=h&&a===void 0?uL(F):c,ie={};for(var ee in k)h&&ee==="as"||X(ee)&&(ie[ee]=k[ee]);return ie.className=D,O&&(ie.ref=O),J.createElement(J.Fragment,null,J.createElement(gX,{cache:M,serialized:H,isStringTag:typeof F=="string"}),J.createElement(F,ie))});return I.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",I.defaultProps=t.defaultProps,I.__emotion_real=I,I.__emotion_base=i,I.__emotion_styles=v,I.__emotion_forwardProp=a,Object.defineProperty(I,"toString",{value:function(){return"."+l}}),I.withComponent=function(k,M){var O=e(k,A_({},r,M,{shouldForwardProp:cL(I,M,!0)}));return O.apply(void 0,v)},I}},vX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],q4=yX.bind(null);vX.forEach(function(e){q4[e]=q4(e)});var fS={exports:{}},hS,dL;function bX(){if(dL)return hS;dL=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return hS=e,hS}var pS,fL;function _X(){if(fL)return pS;fL=1;var e=bX();function t(){}function r(){}return r.resetWarningCache=t,pS=function(){function n(l,a,c,h,g,v){if(v!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o},pS}var hL;function xX(){return hL||(hL=1,fS.exports=_X()()),fS.exports}var wX=xX();const Cn=tf(wX);function SX(e){return e==null||Object.keys(e).length===0}function m9(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(SX(i)?r:i):t;return Z.jsx(p9,{styles:n})}function g9(e,t){return q4(e,t)}function CX(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const pL=[];function Ih(e){return pL[0]=e,K0(pL)}var mS={exports:{}},eo={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL;function EX(){if(mL)return eo;mL=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function S(I){if(typeof I=="object"&&I!==null){var k=I.$$typeof;switch(k){case e:switch(I=I.type,I){case r:case i:case n:case c:case h:case x:return I;default:switch(I=I&&I.$$typeof,I){case l:case a:case v:case g:return I;case o:return I;default:return k}}case t:return k}}}return eo.ContextConsumer=o,eo.ContextProvider=l,eo.Element=e,eo.ForwardRef=a,eo.Fragment=r,eo.Lazy=v,eo.Memo=g,eo.Portal=t,eo.Profiler=i,eo.StrictMode=n,eo.Suspense=c,eo.SuspenseList=h,eo.isContextConsumer=function(I){return S(I)===o},eo.isContextProvider=function(I){return S(I)===l},eo.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},eo.isForwardRef=function(I){return S(I)===a},eo.isFragment=function(I){return S(I)===r},eo.isLazy=function(I){return S(I)===v},eo.isMemo=function(I){return S(I)===g},eo.isPortal=function(I){return S(I)===t},eo.isProfiler=function(I){return S(I)===i},eo.isStrictMode=function(I){return S(I)===n},eo.isSuspense=function(I){return S(I)===c},eo.isSuspenseList=function(I){return S(I)===h},eo.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===r||I===i||I===n||I===c||I===h||typeof I=="object"&&I!==null&&(I.$$typeof===v||I.$$typeof===g||I.$$typeof===l||I.$$typeof===o||I.$$typeof===a||I.$$typeof===b||I.getModuleId!==void 0)},eo.typeOf=S,eo}var gL;function TX(){return gL||(gL=1,mS.exports=EX()),mS.exports}var y9=TX();function $d(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function v9(e){if(J.isValidElement(e)||y9.isValidElementType(e)||!$d(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=v9(e[r])}),t}function $l(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return $d(e)&&$d(t)&&Object.keys(t).forEach(i=>{J.isValidElement(t[i])||y9.isValidElementType(t[i])?n[i]=t[i]:$d(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&$d(e[i])?n[i]=$l(e[i],t[i],r):r.clone?n[i]=$d(t[i])?v9(t[i]):t[i]:n[i]=t[i]}),n}const PX=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function IX(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,o=PX(t),l=Object.keys(o);function a(x){return`@media (min-width:${typeof t[x]=="number"?t[x]:x}${r})`}function c(x){return`@media (max-width:${(typeof t[x]=="number"?t[x]:x)-n/100}${r})`}function h(x,b){const S=l.indexOf(b);return`@media (min-width:${typeof t[x]=="number"?t[x]:x}${r}) and (max-width:${(S!==-1&&typeof t[l[S]]=="number"?t[l[S]]:b)-n/100}${r})`}function g(x){return l.indexOf(x)+1<l.length?h(x,l[l.indexOf(x)+1]):a(x)}function v(x){const b=l.indexOf(x);return b===0?a(l[1]):b===l.length-1?c(l[b]):h(x,l[l.indexOf(x)+1]).replace("@media","@media not all and")}return{keys:l,values:o,up:a,down:c,between:h,only:g,not:v,unit:r,...i}}function yL(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(n.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return r.length?r.reduce((n,i)=>{const o=t[i];return delete n[i],n[i]=o,n},{...t}):t}function kX(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function AX(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,o=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(o)}function MX(e){const t=(o,l)=>o.replace("@media",l?`@container ${l}`:"@container");function r(o,l){o.up=(...a)=>t(e.breakpoints.up(...a),l),o.down=(...a)=>t(e.breakpoints.down(...a),l),o.between=(...a)=>t(e.breakpoints.between(...a),l),o.only=(...a)=>t(e.breakpoints.only(...a),l),o.not=(...a)=>{const c=t(e.breakpoints.not(...a),l);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const n={},i=o=>(r(n,o),n);return r(i),{...e,containerQueries:i}}const LX={borderRadius:4};function Jv(e,t){return t?$l(e,t,{clone:!1}):e}const e2={xs:0,sm:600,md:900,lg:1200,xl:1536},vL={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${e2[e]}px)`},RX={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:e2[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function $f(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||vL;return t.reduce((l,a,c)=>(l[o.up(o.keys[c])]=r(t[c]),l),{})}if(typeof t=="object"){const o=n.breakpoints||vL;return Object.keys(t).reduce((l,a)=>{if(kX(o.keys,a)){const c=AX(n.containerQueries?n:RX,a);c&&(l[c]=r(t[a],a))}else if(Object.keys(o.values||e2).includes(a)){const c=o.up(a);l[c]=r(t[a],a)}else{const c=a;l[c]=t[c]}return l},{})}return r(t)}function b9(e={}){return e.keys?.reduce((r,n)=>{const i=e.up(n);return r[i]={},r},{})||{}}function $4(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function C3e(e,...t){const r=b9(e),n=[r,...t].reduce((i,o)=>$l(i,o),{});return $4(Object.keys(r),n)}function DX(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,o)=>{o<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function E3e({values:e,breakpoints:t,base:r}){const n=r||DX(e,t),i=Object.keys(n);if(i.length===0)return e;let o;return i.reduce((l,a,c)=>(Array.isArray(e)?(l[a]=e[c]!=null?e[c]:e[o],o=c):typeof e=="object"?(l[a]=e[a]!=null?e[a]:e[o],o=a):l[a]=e,l),{})}function tn(e){if(typeof e!="string")throw new Error(qf(7));return e.charAt(0).toUpperCase()+e.slice(1)}function t2(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function L_(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=t2(e,r)||n,t&&(i=t(i,n,e)),i}function Cs(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=l=>{if(l[t]==null)return null;const a=l[t],c=l.theme,h=t2(c,n)||{};return $f(l,a,v=>{let x=L_(h,i,v);return v===x&&typeof v=="string"&&(x=L_(h,i,`${t}${v==="default"?"":tn(v)}`,v)),r===!1?x:{[r]:x}})};return o.propTypes={},o.filterProps=[t],o}function NX(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const OX={m:"margin",p:"padding"},FX={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},bL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},BX=NX(e=>{if(e.length>2)if(bL[e])e=bL[e];else return[e];const[t,r]=e.split(""),n=OX[t],i=FX[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),yP=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],vP=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...yP,...vP];function e1(e,t,r,n){const i=t2(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const l=Math.abs(o),a=i[l];return o>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function bP(e){return e1(e,"spacing",8)}function t1(e,t){return typeof t=="string"||t==null?t:e(t)}function zX(e,t){return r=>e.reduce((n,i)=>(n[i]=t1(t,r),n),{})}function jX(e,t,r,n){if(!t.includes(r))return null;const i=BX(r),o=zX(i,n),l=e[r];return $f(e,l,o)}function _9(e,t){const r=bP(e.theme);return Object.keys(e).map(n=>jX(e,t,n,r)).reduce(Jv,{})}function cs(e){return _9(e,yP)}cs.propTypes={};cs.filterProps=yP;function ds(e){return _9(e,vP)}ds.propTypes={};ds.filterProps=vP;function x9(e=8,t=bP({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(o=>{const l=t(o);return typeof l=="number"?`${l}px`:l}).join(" ");return r.mui=!0,r}function r2(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?Jv(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function kc(e){return typeof e!="number"?e:`${e}px solid`}function Uc(e,t){return Cs({prop:e,themeKey:"borders",transform:t})}const qX=Uc("border",kc),$X=Uc("borderTop",kc),VX=Uc("borderRight",kc),UX=Uc("borderBottom",kc),GX=Uc("borderLeft",kc),HX=Uc("borderColor"),WX=Uc("borderTopColor"),XX=Uc("borderRightColor"),YX=Uc("borderBottomColor"),ZX=Uc("borderLeftColor"),KX=Uc("outline",kc),JX=Uc("outlineColor"),n2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=e1(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:t1(t,n)});return $f(e,e.borderRadius,r)}return null};n2.propTypes={};n2.filterProps=["borderRadius"];r2(qX,$X,VX,UX,GX,HX,WX,XX,YX,ZX,n2,KX,JX);const i2=e=>{if(e.gap!==void 0&&e.gap!==null){const t=e1(e.theme,"spacing",8),r=n=>({gap:t1(t,n)});return $f(e,e.gap,r)}return null};i2.propTypes={};i2.filterProps=["gap"];const a2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=e1(e.theme,"spacing",8),r=n=>({columnGap:t1(t,n)});return $f(e,e.columnGap,r)}return null};a2.propTypes={};a2.filterProps=["columnGap"];const o2=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=e1(e.theme,"spacing",8),r=n=>({rowGap:t1(t,n)});return $f(e,e.rowGap,r)}return null};o2.propTypes={};o2.filterProps=["rowGap"];const QX=Cs({prop:"gridColumn"}),eY=Cs({prop:"gridRow"}),tY=Cs({prop:"gridAutoFlow"}),rY=Cs({prop:"gridAutoColumns"}),nY=Cs({prop:"gridAutoRows"}),iY=Cs({prop:"gridTemplateColumns"}),aY=Cs({prop:"gridTemplateRows"}),oY=Cs({prop:"gridTemplateAreas"}),sY=Cs({prop:"gridArea"});r2(i2,a2,o2,QX,eY,tY,rY,nY,iY,aY,oY,sY);function Og(e,t){return t==="grey"?t:e}const lY=Cs({prop:"color",themeKey:"palette",transform:Og}),uY=Cs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Og}),cY=Cs({prop:"backgroundColor",themeKey:"palette",transform:Og});r2(lY,uY,cY);function cc(e){return e<=1&&e!==0?`${e*100}%`:e}const dY=Cs({prop:"width",transform:cc}),_P=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{const n=e.theme?.breakpoints?.values?.[r]||e2[r];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:cc(r)}};return $f(e,e.maxWidth,t)}return null};_P.filterProps=["maxWidth"];const fY=Cs({prop:"minWidth",transform:cc}),hY=Cs({prop:"height",transform:cc}),pY=Cs({prop:"maxHeight",transform:cc}),mY=Cs({prop:"minHeight",transform:cc});Cs({prop:"size",cssProperty:"width",transform:cc});Cs({prop:"size",cssProperty:"height",transform:cc});const gY=Cs({prop:"boxSizing"});r2(dY,_P,fY,hY,pY,mY,gY);const r1={border:{themeKey:"borders",transform:kc},borderTop:{themeKey:"borders",transform:kc},borderRight:{themeKey:"borders",transform:kc},borderBottom:{themeKey:"borders",transform:kc},borderLeft:{themeKey:"borders",transform:kc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:kc},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:n2},color:{themeKey:"palette",transform:Og},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Og},backgroundColor:{themeKey:"palette",transform:Og},p:{style:ds},pt:{style:ds},pr:{style:ds},pb:{style:ds},pl:{style:ds},px:{style:ds},py:{style:ds},padding:{style:ds},paddingTop:{style:ds},paddingRight:{style:ds},paddingBottom:{style:ds},paddingLeft:{style:ds},paddingX:{style:ds},paddingY:{style:ds},paddingInline:{style:ds},paddingInlineStart:{style:ds},paddingInlineEnd:{style:ds},paddingBlock:{style:ds},paddingBlockStart:{style:ds},paddingBlockEnd:{style:ds},m:{style:cs},mt:{style:cs},mr:{style:cs},mb:{style:cs},ml:{style:cs},mx:{style:cs},my:{style:cs},margin:{style:cs},marginTop:{style:cs},marginRight:{style:cs},marginBottom:{style:cs},marginLeft:{style:cs},marginX:{style:cs},marginY:{style:cs},marginInline:{style:cs},marginInlineStart:{style:cs},marginInlineEnd:{style:cs},marginBlock:{style:cs},marginBlockStart:{style:cs},marginBlockEnd:{style:cs},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:i2},rowGap:{style:o2},columnGap:{style:a2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:cc},maxWidth:{style:_P},minWidth:{transform:cc},height:{transform:cc},maxHeight:{transform:cc},minHeight:{transform:cc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function yY(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function vY(e,t){return typeof e=="function"?e(t):e}function bY(){function e(r,n,i,o){const l={[r]:n,theme:i},a=o[r];if(!a)return{[r]:n};const{cssProperty:c=r,themeKey:h,transform:g,style:v}=a;if(n==null)return null;if(h==="typography"&&n==="inherit")return{[r]:n};const x=t2(i,h)||{};return v?v(l):$f(l,n,S=>{let I=L_(x,g,S);return S===I&&typeof S=="string"&&(I=L_(x,g,`${r}${S==="default"?"":tn(S)}`,S)),c===!1?I:{[c]:I}})}function t(r){const{sx:n,theme:i={},nested:o}=r||{};if(!n)return null;const l=i.unstable_sxConfig??r1;function a(c){let h=c;if(typeof c=="function")h=c(i);else if(typeof c!="object")return c;if(!h)return null;const g=b9(i.breakpoints),v=Object.keys(g);let x=g;return Object.keys(h).forEach(b=>{const S=vY(h[b],i);if(S!=null)if(typeof S=="object")if(l[b])x=Jv(x,e(b,S,i,l));else{const I=$f({theme:i},S,k=>({[b]:k}));yY(I,S)?x[b]=t({sx:S,theme:i,nested:!0}):x=Jv(x,I)}else x=Jv(x,e(b,S,i,l))}),!o&&i.modularCssLayers?{"@layer sx":yL(i,$4(v,x))}:yL(i,$4(v,x))}return Array.isArray(n)?n.map(a):a(n)}return t}const Lh=bY();Lh.filterProps=["sx"];function _Y(e,t){const r=this;if(r.vars){if(!r.colorSchemes?.[e]||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return r.palette.mode===e?t:{}}function s2(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={},...l}=e,a=IX(r),c=x9(i);let h=$l({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:c,shape:{...LX,...o}},l);return h=MX(h),h.applyStyles=_Y,h=t.reduce((g,v)=>$l(g,v),h),h.unstable_sxConfig={...r1,...l?.unstable_sxConfig},h.unstable_sx=function(v){return Lh({sx:v,theme:this})},h}function xY(e){return Object.keys(e).length===0}function l2(e=null){const t=J.useContext(J0);return!t||xY(t)?e:t}const wY=s2();function n1(e=wY){return l2(e)}function gS(e){const t=Ih(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function w9({styles:e,themeId:t,defaultTheme:r={}}){const n=n1(r),i=t&&n[t]||n;let o=typeof e=="function"?e(i):e;return i.modularCssLayers&&(Array.isArray(o)?o=o.map(l=>gS(typeof l=="function"?l(i):l)):o=gS(o)),Z.jsx(m9,{styles:o})}const SY=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??r1;return Object.keys(e).forEach(n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function xP(e){const{sx:t,...r}=e,{systemProps:n,otherProps:i}=SY(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...l)=>{const a=t(...l);return $d(a)?{...n,...a}:n}:o={...n,...t},{...i,sx:o}}const _L=e=>e,CY=()=>{let e=_L;return{configure(t){e=t},generate(t){return e(t)},reset(){e=_L}}},wP=CY();function S9(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=S9(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function mn(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=S9(e))&&(n&&(n+=" "),n+=t);return n}function C9(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=g9("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Lh);return J.forwardRef(function(c,h){const g=n1(r),{className:v,component:x="div",...b}=xP(c);return Z.jsx(o,{as:x,ref:h,className:mn(v,i?i(n):n),theme:t&&g[t]||g,...b})})}const EY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Qn(e,t,r="Mui"){const n=EY[t];return n?`${r}-${n}`:`${wP.generate(e)}-${t}`}function Yn(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=Qn(e,i,r)}),n}const TY=Yn("MuiBox",["root"]),rg=C9({defaultClassName:TY.root,generateClassName:wP.generate});function E9(e){const{variants:t,...r}=e,n={variants:t,style:Ih(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=Ih(i.style))}),n}const PY=s2();function yS(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function kp(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function IY(e){return e?(t,r)=>r[e]:null}function kY(e,t,r){e.theme=MY(e.theme)?r:e.theme[t]||e.theme}function s_(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(i=>s_(e,i,r));if(Array.isArray(n?.variants)){let i;if(n.isProcessed)i=r?kp(n.style,r):n.style;else{const{variants:o,...l}=n;i=r?kp(Ih(l),r):l}return T9(e,n.variants,[i],r)}return n?.isProcessed?r?kp(Ih(n.style),r):n.style:r?kp(Ih(n),r):n}function T9(e,t,r=[],n=void 0){let i;e:for(let o=0;o<t.length;o+=1){const l=t[o];if(typeof l.props=="function"){if(i??={...e,...e.ownerState,ownerState:e.ownerState},!l.props(i))continue}else for(const a in l.props)if(e[a]!==l.props[a]&&e.ownerState?.[a]!==l.props[a])continue e;typeof l.style=="function"?(i??={...e,...e.ownerState,ownerState:e.ownerState},r.push(n?kp(Ih(l.style(i)),n):l.style(i))):r.push(n?kp(Ih(l.style),n):l.style)}return r}function P9(e={}){const{themeId:t,defaultTheme:r=PY,rootShouldForwardProp:n=yS,slotShouldForwardProp:i=yS}=e;function o(a){kY(a,t,r)}return(a,c={})=>{CX(a,z=>z.filter(U=>U!==Lh));const{name:h,slot:g,skipVariantsResolver:v,skipSx:x,overridesResolver:b=IY(RY(g)),...S}=c,I=h&&h.startsWith("Mui")||g?"components":"custom",k=v!==void 0?v:g&&g!=="Root"&&g!=="root"||!1,M=x||!1;let O=yS;g==="Root"||g==="root"?O=n:g?O=i:LY(a)&&(O=void 0);const F=g9(a,{shouldForwardProp:O,label:AY(),...S}),D=z=>{if(z.__emotion_real===z)return z;if(typeof z=="function")return function(H){return s_(H,z,H.theme.modularCssLayers?I:void 0)};if($d(z)){const U=E9(z);return function(X){return U.variants?s_(X,U,X.theme.modularCssLayers?I:void 0):X.theme.modularCssLayers?kp(U.style,I):U.style}}return z},q=(...z)=>{const U=[],H=z.map(D),X=[];if(U.push(o),h&&b&&X.push(function(ne){const le=ne.theme.components?.[h]?.styleOverrides;if(!le)return null;const fe={};for(const ke in le)fe[ke]=s_(ne,le[ke],ne.theme.modularCssLayers?"theme":void 0);return b(ne,fe)}),h&&!k&&X.push(function(ne){const le=ne.theme?.components?.[h]?.variants;return le?T9(ne,le,[],ne.theme.modularCssLayers?"theme":void 0):null}),M||X.push(Lh),Array.isArray(H[0])){const G=H.shift(),ne=new Array(U.length).fill(""),ae=new Array(X.length).fill("");let le;le=[...ne,...G,...ae],le.raw=[...ne,...G.raw,...ae],U.unshift(le)}const ie=[...U,...H,...X],ee=F(...ie);return a.muiName&&(ee.muiName=a.muiName),ee};return F.withConfig&&(q.withConfig=F.withConfig),q}}function AY(e,t){return void 0}function MY(e){for(const t in e)return!1;return!0}function LY(e){return typeof e=="string"&&e.charCodeAt(0)>96}function RY(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const rm=P9();function v0(e,t,r=!1){const n={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=i;if(o==="components"||o==="slots")n[o]={...e[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const l=e[o],a=t[o];if(!a)n[o]=l||{};else if(!l)n[o]=a;else{n[o]={...a};for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const h=c;n[o][h]=v0(l[h],a[h],r)}}}else o==="className"&&r&&t.className?n.className=mn(e?.className,t?.className):o==="style"&&r&&t.style?n.style={...e?.style,...t?.style}:n[o]===void 0&&(n[o]=e[o])}return n}function I9(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:v0(t.components[r].defaultProps,n)}function DY({props:e,name:t,defaultTheme:r,themeId:n}){let i=n1(r);return n&&(i=i[n]||i),I9({theme:i,name:t,props:e})}const Vl=typeof window<"u"?J.useLayoutEffect:J.useEffect;function NY(e,t,r,n,i){const[o,l]=J.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return Vl(()=>{if(!r)return;const a=r(e),c=()=>{l(a.matches)};return c(),a.addEventListener("change",c),()=>{a.removeEventListener("change",c)}},[e,r]),o}const OY={...k_},k9=OY.useSyncExternalStore;function FY(e,t,r,n,i){const o=J.useCallback(()=>t,[t]),l=J.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:g}=n(e);return()=>g}return o},[o,e,n,i,r]),[a,c]=J.useMemo(()=>{if(r===null)return[o,()=>()=>{}];const g=r(e);return[()=>g.matches,v=>(g.addEventListener("change",v),()=>{g.removeEventListener("change",v)})]},[o,r,e]);return k9(c,a,l)}function A9(e={}){const{themeId:t}=e;return function(n,i={}){let o=l2();o&&t&&(o=o[t]||o);const l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:c=l?window.matchMedia:null,ssrMatchMedia:h=null,noSsr:g=!1}=I9({name:"MuiUseMediaQuery",props:i,theme:o});let v=typeof n=="function"?n(o):n;return v=v.replace(/^@media( ?)/m,""),v.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(k9!==void 0?FY:NY)(v,a,c,h,g)}}A9();function wp(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function SP(e,t=0,r=1){return wp(e,t,r)}function BY(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Rh(e){if(e.type)return e;if(e.charAt(0)==="#")return Rh(BY(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(qf(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(qf(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const zY=e=>{const t=Rh(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},Av=(e,t)=>{try{return zY(e)}catch{return e}};function u2(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function M9(e){e=Rh(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),l=(h,g=(h+r/30)%12)=>i-o*Math.max(Math.min(g-3,9-g,1),-1);let a="rgb";const c=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(a+="a",c.push(t[3])),u2({type:a,values:c})}function V4(e){e=Rh(e);let t=e.type==="hsl"||e.type==="hsla"?Rh(M9(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function jY(e,t){const r=V4(e),n=V4(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function R_(e,t){return e=Rh(e),t=SP(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,u2(e)}function fp(e,t,r){try{return R_(e,t)}catch{return e}}function c2(e,t){if(e=Rh(e),t=SP(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return u2(e)}function qa(e,t,r){try{return c2(e,t)}catch{return e}}function d2(e,t){if(e=Rh(e),t=SP(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return u2(e)}function $a(e,t,r){try{return d2(e,t)}catch{return e}}function D_(e,t=.15){return V4(e)>.5?c2(e,t):d2(e,t)}function Z1(e,t,r){try{return D_(e,t)}catch{return e}}const L9=J.createContext(null);function CP(){return J.useContext(L9)}const qY=typeof Symbol=="function"&&Symbol.for,$Y=qY?Symbol.for("mui.nested"):"__THEME_NESTED__";function VY(e,t){return typeof t=="function"?t(e):{...e,...t}}function UY(e){const{children:t,theme:r}=e,n=CP(),i=J.useMemo(()=>{const o=n===null?{...r}:VY(n,r);return o!=null&&(o[$Y]=n!==null),o},[r,n]);return Z.jsx(L9.Provider,{value:i,children:t})}const R9=J.createContext();function GY({value:e,...t}){return Z.jsx(R9.Provider,{value:e??!0,...t})}const i1=()=>J.useContext(R9)??!1,D9=J.createContext(void 0);function HY({value:e,children:t}){return Z.jsx(D9.Provider,{value:e,children:t})}function WY(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?v0(i.defaultProps,n,t.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?v0(i,n,t.components.mergeClassNameAndStyle):n}function XY({props:e,name:t}){const r=J.useContext(D9);return WY({props:e,name:t,theme:{components:r}})}let xL=0;function YY(e){const[t,r]=J.useState(e),n=e||t;return J.useEffect(()=>{t==null&&(xL+=1,r(`mui-${xL}`))},[t]),n}const ZY={...k_},wL=ZY.useId;function Vh(e){if(wL!==void 0){const t=wL();return e??t}return YY(e)}function KY(e){const t=l2(),r=Vh()||"",{modularCssLayers:n}=e;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!n||t!==null?i="":typeof n=="string"?i=n.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,Vl(()=>{const o=document.querySelector("head");if(!o)return;const l=o.firstChild;if(i){if(l&&l.hasAttribute?.("data-mui-layer-order")&&l.getAttribute("data-mui-layer-order")===r)return;const a=document.createElement("style");a.setAttribute("data-mui-layer-order",r),a.textContent=i,o.prepend(a)}else o.querySelector(`style[data-mui-layer-order="${r}"]`)?.remove()},[i,r]),i?Z.jsx(w9,{styles:i}):null}const SL={};function CL(e,t,r,n=!1){return J.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),l=e?{...t,[e]:o}:o;return n?()=>l:l}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,n])}function N9(e){const{children:t,theme:r,themeId:n}=e,i=l2(SL),o=CP()||SL,l=CL(n,i,r),a=CL(n,o,r,!0),c=(n?l[n]:l).direction==="rtl",h=KY(l);return Z.jsx(UY,{theme:a,children:Z.jsx(J0.Provider,{value:l,children:Z.jsx(GY,{value:c,children:Z.jsxs(HY,{value:n?l[n].components:l.components,children:[h,t]})})})})}const EL={theme:void 0};function JY(e){let t,r;return function(i){let o=t;return(o===void 0||i.theme!==r)&&(EL.theme=i.theme,o=E9(e(EL)),t=o,r=i.theme),o}}const EP="mode",TP="color-scheme",QY="data-color-scheme";function eZ(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=EP,colorSchemeStorageKey:o=TP,attribute:l=QY,colorSchemeNode:a="document.documentElement",nonce:c}=e||{};let h="",g=l;if(l==="class"&&(g=".%s"),l==="data"&&(g="[data-%s]"),g.startsWith(".")){const x=g.substring(1);h+=`${a}.classList.remove('${x}'.replace('%s', light), '${x}'.replace('%s', dark));
      ${a}.classList.add('${x}'.replace('%s', colorScheme));`}const v=g.match(/\[([^[\]]+)\]/);if(v){const[x,b]=v[1].split("=");b||(h+=`${a}.removeAttribute('${x}'.replace('%s', light));
      ${a}.removeAttribute('${x}'.replace('%s', dark));`),h+=`
      ${a}.setAttribute('${x}'.replace('%s', colorScheme), ${b?`${b}.replace('%s', colorScheme)`:'""'});`}else h+=`${a}.setAttribute('${g}', colorScheme);`;return Z.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${t}';
  const dark = localStorage.getItem('${o}-dark') || '${n}';
  const light = localStorage.getItem('${o}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${h}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function tZ(){}const rZ=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let n;try{n=t.localStorage.getItem(e)}catch{}return n||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return tZ;const n=i=>{const o=i.newValue;i.key===e&&r(o)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function vS(){}function TL(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function O9(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function nZ(e){return O9(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function iZ(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:o=EP,colorSchemeStorageKey:l=TP,storageWindow:a=typeof window>"u"?void 0:window,storageManager:c=rZ,noSsr:h=!1}=e,g=i.join(","),v=i.length>1,x=J.useMemo(()=>c?.({key:o,storageWindow:a}),[c,o,a]),b=J.useMemo(()=>c?.({key:`${l}-light`,storageWindow:a}),[c,l,a]),S=J.useMemo(()=>c?.({key:`${l}-dark`,storageWindow:a}),[c,l,a]),[I,k]=J.useState(()=>{const H=x?.get(t)||t,X=b?.get(r)||r,ie=S?.get(n)||n;return{mode:H,systemMode:TL(H),lightColorScheme:X,darkColorScheme:ie}}),[M,O]=J.useState(h||!v);J.useEffect(()=>{O(!0)},[]);const F=nZ(I),D=J.useCallback(H=>{k(X=>{if(H===X.mode)return X;const ie=H??t;return x?.set(ie),{...X,mode:ie,systemMode:TL(ie)}})},[x,t]),q=J.useCallback(H=>{H?typeof H=="string"?H&&!g.includes(H)?console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`):k(X=>{const ie={...X};return O9(X,ee=>{ee==="light"&&(b?.set(H),ie.lightColorScheme=H),ee==="dark"&&(S?.set(H),ie.darkColorScheme=H)}),ie}):k(X=>{const ie={...X},ee=H.light===null?r:H.light,G=H.dark===null?n:H.dark;return ee&&(g.includes(ee)?(ie.lightColorScheme=ee,b?.set(ee)):console.error(`\`${ee}\` does not exist in \`theme.colorSchemes\`.`)),G&&(g.includes(G)?(ie.darkColorScheme=G,S?.set(G)):console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`)),ie}):k(X=>(b?.set(r),S?.set(n),{...X,lightColorScheme:r,darkColorScheme:n}))},[g,b,S,r,n]),z=J.useCallback(H=>{I.mode==="system"&&k(X=>{const ie=H?.matches?"dark":"light";return X.systemMode===ie?X:{...X,systemMode:ie}})},[I.mode]),U=J.useRef(z);return U.current=z,J.useEffect(()=>{if(typeof window.matchMedia!="function"||!v)return;const H=(...ie)=>U.current(...ie),X=window.matchMedia("(prefers-color-scheme: dark)");return X.addListener(H),H(X),()=>{X.removeListener(H)}},[v]),J.useEffect(()=>{if(v){const H=x?.subscribe(ee=>{(!ee||["light","dark","system"].includes(ee))&&D(ee||t)})||vS,X=b?.subscribe(ee=>{(!ee||g.match(ee))&&q({light:ee})})||vS,ie=S?.subscribe(ee=>{(!ee||g.match(ee))&&q({dark:ee})})||vS;return()=>{H(),X(),ie()}}},[q,D,g,t,a,v,x,b,S]),{...I,mode:M?I.mode:void 0,systemMode:M?I.systemMode:void 0,colorScheme:M?F:void 0,setMode:D,setColorScheme:q}}const aZ="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function oZ(e){const{themeId:t,theme:r={},modeStorageKey:n=EP,colorSchemeStorageKey:i=TP,disableTransitionOnChange:o=!1,defaultColorScheme:l,resolveTheme:a}=e,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},h=J.createContext(void 0),g=()=>J.useContext(h)||c,v={},x={};function b(M){const{children:O,theme:F,modeStorageKey:D=n,colorSchemeStorageKey:q=i,disableTransitionOnChange:z=o,storageManager:U,storageWindow:H=typeof window>"u"?void 0:window,documentNode:X=typeof document>"u"?void 0:document,colorSchemeNode:ie=typeof document>"u"?void 0:document.documentElement,disableNestedContext:ee=!1,disableStyleSheetGeneration:G=!1,defaultMode:ne="system",forceThemeRerender:ae=!1,noSsr:le}=M,fe=J.useRef(!1),ke=CP(),me=J.useContext(h),Se=!!me&&!ee,we=J.useMemo(()=>F||(typeof r=="function"?r():r),[F]),Pe=we[t],ce=Pe||we,{colorSchemes:_e=v,components:be=x,cssVarPrefix:Me}=ce,Le=Object.keys(_e).filter(lr=>!!_e[lr]).join(","),Ue=J.useMemo(()=>Le.split(","),[Le]),Oe=typeof l=="string"?l:l.light,tt=typeof l=="string"?l:l.dark,Ze=_e[Oe]&&_e[tt]?ne:_e[ce.defaultColorScheme]?.palette?.mode||ce.palette?.mode,{mode:Qe,setMode:Ie,systemMode:Mt,lightColorScheme:ot,darkColorScheme:$e,colorScheme:tr,setColorScheme:Wt}=iZ({supportedColorSchemes:Ue,defaultLightColorScheme:Oe,defaultDarkColorScheme:tt,modeStorageKey:D,colorSchemeStorageKey:q,defaultMode:Ze,storageManager:U,storageWindow:H,noSsr:le});let Gt=Qe,at=tr;Se&&(Gt=me.mode,at=me.colorScheme);let dr=at||ce.defaultColorScheme;ce.vars&&!ae&&(dr=ce.defaultColorScheme);const hr=J.useMemo(()=>{const lr=ce.generateThemeVars?.()||ce.vars,Pr={...ce,components:be,colorSchemes:_e,cssVarPrefix:Me,vars:lr};if(typeof Pr.generateSpacing=="function"&&(Pr.spacing=Pr.generateSpacing()),dr){const ar=_e[dr];ar&&typeof ar=="object"&&Object.keys(ar).forEach(kr=>{ar[kr]&&typeof ar[kr]=="object"?Pr[kr]={...Pr[kr],...ar[kr]}:Pr[kr]=ar[kr]})}return a?a(Pr):Pr},[ce,dr,be,_e,Me]),ur=ce.colorSchemeSelector;Vl(()=>{if(at&&ie&&ur&&ur!=="media"){const lr=ur;let Pr=ur;if(lr==="class"&&(Pr=".%s"),lr==="data"&&(Pr="[data-%s]"),lr?.startsWith("data-")&&!lr.includes("%s")&&(Pr=`[${lr}="%s"]`),Pr.startsWith("."))ie.classList.remove(...Ue.map(ar=>Pr.substring(1).replace("%s",ar))),ie.classList.add(Pr.substring(1).replace("%s",at));else{const ar=Pr.replace("%s",at).match(/\[([^\]]+)\]/);if(ar){const[kr,Qt]=ar[1].split("=");Qt||Ue.forEach(Ht=>{ie.removeAttribute(kr.replace(at,Ht))}),ie.setAttribute(kr,Qt?Qt.replace(/"|'/g,""):"")}else ie.setAttribute(Pr,at)}}},[at,ur,ie,Ue]),J.useEffect(()=>{let lr;if(z&&fe.current&&X){const Pr=X.createElement("style");Pr.appendChild(X.createTextNode(aZ)),X.head.appendChild(Pr),window.getComputedStyle(X.body),lr=setTimeout(()=>{X.head.removeChild(Pr)},1)}return()=>{clearTimeout(lr)}},[at,z,X]),J.useEffect(()=>(fe.current=!0,()=>{fe.current=!1}),[]);const Cr=J.useMemo(()=>({allColorSchemes:Ue,colorScheme:at,darkColorScheme:$e,lightColorScheme:ot,mode:Gt,setColorScheme:Wt,setMode:Ie,systemMode:Mt}),[Ue,at,$e,ot,Gt,Wt,Ie,Mt,hr.colorSchemeSelector]);let br=!0;(G||ce.cssVariables===!1||Se&&ke?.cssVarPrefix===Me)&&(br=!1);const nr=Z.jsxs(J.Fragment,{children:[Z.jsx(N9,{themeId:Pe?t:void 0,theme:hr,children:O}),br&&Z.jsx(m9,{styles:hr.generateStyleSheets?.()||[]})]});return Se?nr:Z.jsx(h.Provider,{value:Cr,children:nr})}const S=typeof l=="string"?l:l.light,I=typeof l=="string"?l:l.dark;return{CssVarsProvider:b,useColorScheme:g,getInitColorSchemeScript:M=>eZ({colorSchemeStorageKey:i,defaultLightColorScheme:S,defaultDarkColorScheme:I,modeStorageKey:n,...M})}}function sZ(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const PL=(e,t,r,n=[])=>{let i=e;t.forEach((o,l)=>{l===t.length-1?Array.isArray(i)?i[Number(o)]=r:i&&typeof i=="object"&&(i[o]=r):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},lZ=(e,t,r)=>{function n(i,o=[],l=[]){Object.entries(i).forEach(([a,c])=>{(!r||r&&!r([...o,a]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?n(c,[...o,a],Array.isArray(c)?[...l,a]:l):t([...o,a],c,l))})}n(e)},uZ=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function bS(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},o={},l={};return lZ(e,(a,c,h)=>{if((typeof c=="string"||typeof c=="number")&&(!n||!n(a,c))){const g=`--${r?`${r}-`:""}${a.join("-")}`,v=uZ(a,c);Object.assign(i,{[g]:v}),PL(o,a,`var(${g})`,h),PL(l,a,`var(${g}, ${v})`,h)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:l}}function cZ(e,t={}){const{getSelector:r=M,disableCssColorScheme:n,colorSchemeSelector:i,enableContrastVars:o}=t,{colorSchemes:l={},components:a,defaultColorScheme:c="light",...h}=e,{vars:g,css:v,varsWithDefaults:x}=bS(h,t);let b=x;const S={},{[c]:I,...k}=l;if(Object.entries(k||{}).forEach(([D,q])=>{const{vars:z,css:U,varsWithDefaults:H}=bS(q,t);b=$l(b,H),S[D]={css:U,vars:z}}),I){const{css:D,vars:q,varsWithDefaults:z}=bS(I,t);b=$l(b,z),S[c]={css:D,vars:q}}function M(D,q){let z=i;if(i==="class"&&(z=".%s"),i==="data"&&(z="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(z=`[${i}="%s"]`),D){if(z==="media")return e.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${l[D]?.palette?.mode||D})`]:{":root":q}};if(z)return e.defaultColorScheme===D?`:root, ${z.replace("%s",String(D))}`:z.replace("%s",String(D))}return":root"}return{vars:b,generateThemeVars:()=>{let D={...g};return Object.entries(S).forEach(([,{vars:q}])=>{D=$l(D,q)}),D},generateStyleSheets:()=>{const D=[],q=e.defaultColorScheme||"light";function z(X,ie){Object.keys(ie).length&&D.push(typeof X=="string"?{[X]:{...ie}}:X)}z(r(void 0,{...v}),v);const{[q]:U,...H}=S;if(U){const{css:X}=U,ie=l[q]?.palette?.mode,ee=!n&&ie?{colorScheme:ie,...X}:{...X};z(r(q,{...ee}),ee)}return Object.entries(H).forEach(([X,{css:ie}])=>{const ee=l[X]?.palette?.mode,G=!n&&ee?{colorScheme:ee,...ie}:{...ie};z(r(X,{...G}),G)}),o&&D.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),D}}}function dZ(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function ei(e,t,r=void 0){const n={};for(const i in e){const o=e[i];let l="",a=!0;for(let c=0;c<o.length;c+=1){const h=o[c];h&&(l+=(a===!0?"":" ")+t(h),a=!1,r&&r[h]&&(l+=" "+r[h]))}n[i]=l}return n}function Fg(e,t){return J.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const fZ=(e,t)=>e.filter(r=>t.includes(r)),yy=(e,t,r)=>{const n=e.keys[0];Array.isArray(t)?t.forEach((i,o)=>{r((l,a)=>{o<=e.keys.length-1&&(o===0?Object.assign(l,a):l[e.up(e.keys[o])]=a)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:fZ(e.keys,Object.keys(t))).forEach(o=>{if(e.keys.includes(o)){const l=t[o];l!==void 0&&r((a,c)=>{n===o?Object.assign(a,c):a[e.up(o)]=c},l)}}):(typeof t=="number"||typeof t=="string")&&r((i,o)=>{Object.assign(i,o)},t)};function N_(e){return`--Grid-${e}Spacing`}function f2(e){return`--Grid-parent-${e}Spacing`}const IL="--Grid-columns",Bg="--Grid-parent-columns",hZ=({theme:e,ownerState:t})=>{const r={};return yy(e.breakpoints,t.size,(n,i)=>{let o={};i==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${Bg}) - (var(${Bg}) - ${i}) * (var(${f2("column")}) / var(${Bg})))`}),n(r,o)}),r},pZ=({theme:e,ownerState:t})=>{const r={};return yy(e.breakpoints,t.offset,(n,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${Bg}) + var(${f2("column")}) * ${i} / var(${Bg}))`}),n(r,o)}),r},mZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={[IL]:12};return yy(e.breakpoints,t.columns,(n,i)=>{const o=i??12;n(r,{[IL]:o,"> *":{[Bg]:o}})}),r},gZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return yy(e.breakpoints,t.rowSpacing,(n,i)=>{const o=typeof i=="string"?i:e.spacing?.(i);n(r,{[N_("row")]:o,"> *":{[f2("row")]:o}})}),r},yZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return yy(e.breakpoints,t.columnSpacing,(n,i)=>{const o=typeof i=="string"?i:e.spacing?.(i);n(r,{[N_("column")]:o,"> *":{[f2("column")]:o}})}),r},vZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return yy(e.breakpoints,t.direction,(n,i)=>{n(r,{flexDirection:i})}),r},bZ=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${N_("row")}) var(${N_("column")})`}}),_Z=e=>{const t=[];return Object.entries(e).forEach(([r,n])=>{n!==!1&&n!==void 0&&t.push(`grid-${r}-${String(n)}`)}),t},xZ=(e,t="xs")=>{function r(n){return n===void 0?!1:typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number"&&n>0}if(r(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const n=[];return Object.entries(e).forEach(([i,o])=>{r(o)&&n.push(`spacing-${i}-${String(o)}`)}),n}return[]},wZ=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,r])=>`direction-${t}-${r}`):[`direction-xs-${String(e)}`];function SZ(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(r=>{e[r]!==void 0&&delete e[r]})}const CZ=s2(),EZ=rm("div",{name:"MuiGrid",slot:"Root"});function TZ(e){return DY({props:e,name:"MuiGrid",defaultTheme:CZ})}function PZ(e={}){const{createStyledComponent:t=EZ,useThemeProps:r=TZ,useTheme:n=n1,componentName:i="MuiGrid"}=e,o=(h,g)=>{const{container:v,direction:x,spacing:b,wrap:S,size:I}=h,k={root:["root",v&&"container",S!=="wrap"&&`wrap-xs-${String(S)}`,...wZ(x),..._Z(I),...v?xZ(b,g.breakpoints.keys[0]):[]]};return ei(k,M=>Qn(i,M),{})};function l(h,g,v=()=>!0){const x={};return h===null||(Array.isArray(h)?h.forEach((b,S)=>{b!==null&&v(b)&&g.keys[S]&&(x[g.keys[S]]=b)}):typeof h=="object"?Object.keys(h).forEach(b=>{const S=h[b];S!=null&&v(S)&&(x[b]=S)}):x[g.keys[0]]=h),x}const a=t(mZ,yZ,gZ,hZ,vZ,bZ,pZ),c=J.forwardRef(function(g,v){const x=n(),b=r(g),S=xP(b);SZ(S,x.breakpoints);const{className:I,children:k,columns:M=12,container:O=!1,component:F="div",direction:D="row",wrap:q="wrap",size:z={},offset:U={},spacing:H=0,rowSpacing:X=H,columnSpacing:ie=H,unstable_level:ee=0,...G}=S,ne=l(z,x.breakpoints,Pe=>Pe!==!1),ae=l(U,x.breakpoints),le=g.columns??(ee?void 0:M),fe=g.spacing??(ee?void 0:H),ke=g.rowSpacing??g.spacing??(ee?void 0:X),me=g.columnSpacing??g.spacing??(ee?void 0:ie),Se={...S,level:ee,columns:le,container:O,direction:D,wrap:q,spacing:fe,rowSpacing:ke,columnSpacing:me,size:ne,offset:ae},we=o(Se,x);return Z.jsx(a,{ref:v,as:F,ownerState:Se,className:mn(we.root,I),...G,children:J.Children.map(k,Pe=>J.isValidElement(Pe)&&Fg(Pe,["Grid"])&&O&&Pe.props.container?J.cloneElement(Pe,{unstable_level:Pe.props?.unstable_level??ee+1}):Pe)})});return c.muiName="Grid",c}const b0={black:"#000",white:"#fff"},IZ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Fm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Bm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},rv={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},zm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},jm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},qm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function F9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:b0.white,default:b0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const B9=F9();function z9(){return{text:{primary:b0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:b0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const U4=z9();function kL(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=d2(e.main,i):t==="dark"&&(e.dark=c2(e.main,o)))}function AL(e,t,r,n,i){const o=i.light||i,l=i.dark||i*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(o*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(l*100).toFixed(0)}%)`))}function kZ(e="light"){return e==="dark"?{main:zm[200],light:zm[50],dark:zm[400]}:{main:zm[700],light:zm[400],dark:zm[800]}}function AZ(e="light"){return e==="dark"?{main:Fm[200],light:Fm[50],dark:Fm[400]}:{main:Fm[500],light:Fm[300],dark:Fm[700]}}function MZ(e="light"){return e==="dark"?{main:Bm[500],light:Bm[300],dark:Bm[700]}:{main:Bm[700],light:Bm[400],dark:Bm[800]}}function LZ(e="light"){return e==="dark"?{main:jm[400],light:jm[300],dark:jm[700]}:{main:jm[700],light:jm[500],dark:jm[900]}}function RZ(e="light"){return e==="dark"?{main:qm[400],light:qm[300],dark:qm[700]}:{main:qm[800],light:qm[500],dark:qm[900]}}function DZ(e="light"){return e==="dark"?{main:rv[400],light:rv[300],dark:rv[700]}:{main:"#ed6c02",light:rv[500],dark:rv[900]}}function NZ(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function PP(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:i,...o}=e,l=e.primary||kZ(t),a=e.secondary||AZ(t),c=e.error||MZ(t),h=e.info||LZ(t),g=e.success||RZ(t),v=e.warning||DZ(t);function x(k){return i?NZ(k):jY(k,U4.text.primary)>=r?U4.text.primary:B9.text.primary}const b=({color:k,name:M,mainShade:O=500,lightShade:F=300,darkShade:D=700})=>{if(k={...k},!k.main&&k[O]&&(k.main=k[O]),!k.hasOwnProperty("main"))throw new Error(qf(11,M?` (${M})`:"",O));if(typeof k.main!="string")throw new Error(qf(12,M?` (${M})`:"",JSON.stringify(k.main)));return i?(AL(i,k,"light",F,n),AL(i,k,"dark",D,n)):(kL(k,"light",F,n),kL(k,"dark",D,n)),k.contrastText||(k.contrastText=x(k.main)),k};let S;return t==="light"?S=F9():t==="dark"&&(S=z9()),$l({common:{...b0},mode:t,primary:b({color:l,name:"primary"}),secondary:b({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:c,name:"error"}),warning:b({color:v,name:"warning"}),info:b({color:h,name:"info"}),success:b({color:g,name:"success"}),grey:IZ,contrastThreshold:r,getContrastText:x,augmentColor:b,tonalOffset:n,...S},o)}function OZ(e){const t={};return Object.entries(e).forEach(n=>{const[i,o]=n;typeof o=="object"&&(t[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}function FZ(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function BZ(e){return Math.round(e*1e5)/1e5}const ML={textTransform:"uppercase"},LL='"Roboto", "Helvetica", "Arial", sans-serif';function j9(e,t){const{fontFamily:r=LL,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:l=500,fontWeightBold:a=700,htmlFontSize:c=16,allVariants:h,pxToRem:g,...v}=typeof t=="function"?t(e):t,x=n/14,b=g||(k=>`${k/c*x}rem`),S=(k,M,O,F,D)=>({fontFamily:r,fontWeight:k,fontSize:b(M),lineHeight:O,...r===LL?{letterSpacing:`${BZ(F/M)}em`}:{},...D,...h}),I={h1:S(i,96,1.167,-1.5),h2:S(i,60,1.2,-.5),h3:S(o,48,1.167,0),h4:S(o,34,1.235,.25),h5:S(o,24,1.334,0),h6:S(l,20,1.6,.15),subtitle1:S(o,16,1.75,.15),subtitle2:S(l,14,1.57,.1),body1:S(o,16,1.5,.15),body2:S(o,14,1.43,.15),button:S(l,14,1.75,.4,ML),caption:S(o,12,1.66,.4),overline:S(o,12,2.66,1,ML),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return $l({htmlFontSize:c,pxToRem:b,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:l,fontWeightBold:a,...I},v,{clone:!1})}const zZ=.2,jZ=.14,qZ=.12;function No(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${zZ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${jZ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${qZ})`].join(",")}const $Z=["none",No(0,2,1,-1,0,1,1,0,0,1,3,0),No(0,3,1,-2,0,2,2,0,0,1,5,0),No(0,3,3,-2,0,3,4,0,0,1,8,0),No(0,2,4,-1,0,4,5,0,0,1,10,0),No(0,3,5,-1,0,5,8,0,0,1,14,0),No(0,3,5,-1,0,6,10,0,0,1,18,0),No(0,4,5,-2,0,7,10,1,0,2,16,1),No(0,5,5,-3,0,8,10,1,0,3,14,2),No(0,5,6,-3,0,9,12,1,0,3,16,2),No(0,6,6,-3,0,10,14,1,0,4,18,3),No(0,6,7,-4,0,11,15,1,0,4,20,3),No(0,7,8,-4,0,12,17,2,0,5,22,4),No(0,7,8,-4,0,13,19,2,0,5,24,4),No(0,7,9,-4,0,14,21,2,0,5,26,4),No(0,8,9,-5,0,15,22,2,0,6,28,5),No(0,8,10,-5,0,16,24,2,0,6,30,5),No(0,8,11,-5,0,17,26,2,0,6,32,5),No(0,9,11,-5,0,18,28,2,0,7,34,6),No(0,9,12,-6,0,19,29,2,0,7,36,6),No(0,10,13,-6,0,20,31,3,0,8,38,7),No(0,10,13,-6,0,21,33,3,0,8,40,7),No(0,10,14,-6,0,22,35,3,0,8,42,7),No(0,11,14,-7,0,23,36,3,0,9,44,8),No(0,11,15,-7,0,24,38,3,0,9,46,8)],VZ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},q9={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function RL(e){return`${Math.round(e)}ms`}function UZ(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function GZ(e){const t={...VZ,...e.easing},r={...q9,...e.duration};return{getAutoHeightDuration:UZ,create:(i=["all"],o={})=>{const{duration:l=r.standard,easing:a=t.easeInOut,delay:c=0,...h}=o;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof l=="string"?l:RL(l)} ${a} ${typeof c=="string"?c:RL(c)}`).join(",")},...e,easing:t,duration:r}}const HZ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function WZ(e){return $d(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function $9(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let o=0;o<i.length;o++){const[l,a]=i[o];!WZ(a)||l.startsWith("unstable_")?delete n[l]:$d(a)&&(n[l]={...a},r(n[l]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function DL(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const XZ=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function YZ(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:R_(t,XZ(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${DL(r)})`:d2(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${DL(r)})`:c2(t,r)}})}function G4(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:o={},transitions:l={},typography:a={},shape:c,colorSpace:h,...g}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(qf(20));const v=PP({...o,colorSpace:h}),x=s2(e);let b=$l(x,{mixins:FZ(x.breakpoints,n),palette:v,shadows:$Z.slice(),typography:j9(v,a),transitions:GZ(l),zIndex:{...HZ}});return b=$l(b,g),b=t.reduce((S,I)=>$l(S,I),b),b.unstable_sxConfig={...r1,...g?.unstable_sxConfig},b.unstable_sx=function(I){return Lh({sx:I,theme:this})},b.toRuntimeSource=$9,YZ(b),b}function H4(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const ZZ=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=H4(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function V9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function U9(e){return e==="dark"?ZZ:[]}function KZ(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:i,...o}=e,l=PP({...t,colorSpace:i});return{palette:l,opacity:{...V9(l.mode),...r},overlays:n||U9(l.mode),...o}}function JZ(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const QZ=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],eK=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const l={};return QZ(e.cssVarPrefix).forEach(a=>{l[a]=r[a],delete r[a]}),o==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:l}}:o?{[o.replace("%s",t)]:l,[`${n}, ${o.replace("%s",t)}`]:r}:{[n]:{...r,...l}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(o)return o.replace("%s",String(t))}return n};function tK(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Br(e,t,r){!e[t]&&r&&(e[t]=r)}function Mv(e){return typeof e!="string"||!e.startsWith("hsl")?e:M9(e)}function _f(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Av(Mv(e[t])))}function rK(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Nd=e=>{try{return e()}catch{}},nK=(e="mui")=>sZ(e);function _S(e,t,r,n,i){if(!r)return;r=r===!0?{}:r;const o=i==="dark"?"dark":"light";if(!n){t[i]=KZ({...r,palette:{mode:o,...r?.palette},colorSpace:e});return}const{palette:l,...a}=G4({...n,palette:{mode:o,...r?.palette},colorSpace:e});return t[i]={...r,palette:l,opacity:{...V9(o),...r?.opacity},overlays:r?.overlays||U9(o)},a}function iK(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",nativeColor:l=!1,shouldSkipGeneratingVar:a=JZ,colorSchemeSelector:c=r.light&&r.dark?"media":void 0,rootSelector:h=":root",...g}=e,v=Object.keys(r)[0],x=n||(r.light&&v!=="light"?"light":v),b=nK(o),{[x]:S,light:I,dark:k,...M}=r,O={...M};let F=S;if((x==="dark"&&!("dark"in r)||x==="light"&&!("light"in r))&&(F=!0),!F)throw new Error(qf(21,x));let D;l&&(D="oklch");const q=_S(D,O,F,g,x);I&&!O.light&&_S(D,O,I,void 0,"light"),k&&!O.dark&&_S(D,O,k,void 0,"dark");let z={defaultColorScheme:x,...q,cssVarPrefix:o,colorSchemeSelector:c,rootSelector:h,getCssVar:b,colorSchemes:O,font:{...OZ(q.typography),...q.font},spacing:rK(g.spacing)};Object.keys(z.colorSchemes).forEach(ee=>{const G=z.colorSchemes[ee].palette,ne=le=>{const fe=le.split("-"),ke=fe[1],me=fe[2];return b(le,G[ke][me])};G.mode==="light"&&(Br(G.common,"background","#fff"),Br(G.common,"onBackground","#000")),G.mode==="dark"&&(Br(G.common,"background","#000"),Br(G.common,"onBackground","#fff"));function ae(le,fe,ke){if(D){let me;return le===fp&&(me=`transparent ${((1-ke)*100).toFixed(0)}%`),le===qa&&(me=`#000 ${(ke*100).toFixed(0)}%`),le===$a&&(me=`#fff ${(ke*100).toFixed(0)}%`),`color-mix(in ${D}, ${fe}, ${me})`}return le(fe,ke)}if(tK(G,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),G.mode==="light"){Br(G.Alert,"errorColor",ae(qa,G.error.light,.6)),Br(G.Alert,"infoColor",ae(qa,G.info.light,.6)),Br(G.Alert,"successColor",ae(qa,G.success.light,.6)),Br(G.Alert,"warningColor",ae(qa,G.warning.light,.6)),Br(G.Alert,"errorFilledBg",ne("palette-error-main")),Br(G.Alert,"infoFilledBg",ne("palette-info-main")),Br(G.Alert,"successFilledBg",ne("palette-success-main")),Br(G.Alert,"warningFilledBg",ne("palette-warning-main")),Br(G.Alert,"errorFilledColor",Nd(()=>G.getContrastText(G.error.main))),Br(G.Alert,"infoFilledColor",Nd(()=>G.getContrastText(G.info.main))),Br(G.Alert,"successFilledColor",Nd(()=>G.getContrastText(G.success.main))),Br(G.Alert,"warningFilledColor",Nd(()=>G.getContrastText(G.warning.main))),Br(G.Alert,"errorStandardBg",ae($a,G.error.light,.9)),Br(G.Alert,"infoStandardBg",ae($a,G.info.light,.9)),Br(G.Alert,"successStandardBg",ae($a,G.success.light,.9)),Br(G.Alert,"warningStandardBg",ae($a,G.warning.light,.9)),Br(G.Alert,"errorIconColor",ne("palette-error-main")),Br(G.Alert,"infoIconColor",ne("palette-info-main")),Br(G.Alert,"successIconColor",ne("palette-success-main")),Br(G.Alert,"warningIconColor",ne("palette-warning-main")),Br(G.AppBar,"defaultBg",ne("palette-grey-100")),Br(G.Avatar,"defaultBg",ne("palette-grey-400")),Br(G.Button,"inheritContainedBg",ne("palette-grey-300")),Br(G.Button,"inheritContainedHoverBg",ne("palette-grey-A100")),Br(G.Chip,"defaultBorder",ne("palette-grey-400")),Br(G.Chip,"defaultAvatarColor",ne("palette-grey-700")),Br(G.Chip,"defaultIconColor",ne("palette-grey-700")),Br(G.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Br(G.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Br(G.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Br(G.LinearProgress,"primaryBg",ae($a,G.primary.main,.62)),Br(G.LinearProgress,"secondaryBg",ae($a,G.secondary.main,.62)),Br(G.LinearProgress,"errorBg",ae($a,G.error.main,.62)),Br(G.LinearProgress,"infoBg",ae($a,G.info.main,.62)),Br(G.LinearProgress,"successBg",ae($a,G.success.main,.62)),Br(G.LinearProgress,"warningBg",ae($a,G.warning.main,.62)),Br(G.Skeleton,"bg",D?ae(fp,G.text.primary,.11):`rgba(${ne("palette-text-primaryChannel")} / 0.11)`),Br(G.Slider,"primaryTrack",ae($a,G.primary.main,.62)),Br(G.Slider,"secondaryTrack",ae($a,G.secondary.main,.62)),Br(G.Slider,"errorTrack",ae($a,G.error.main,.62)),Br(G.Slider,"infoTrack",ae($a,G.info.main,.62)),Br(G.Slider,"successTrack",ae($a,G.success.main,.62)),Br(G.Slider,"warningTrack",ae($a,G.warning.main,.62));const le=D?ae(qa,G.background.default,.6825):Z1(G.background.default,.8);Br(G.SnackbarContent,"bg",le),Br(G.SnackbarContent,"color",Nd(()=>D?U4.text.primary:G.getContrastText(le))),Br(G.SpeedDialAction,"fabHoverBg",Z1(G.background.paper,.15)),Br(G.StepConnector,"border",ne("palette-grey-400")),Br(G.StepContent,"border",ne("palette-grey-400")),Br(G.Switch,"defaultColor",ne("palette-common-white")),Br(G.Switch,"defaultDisabledColor",ne("palette-grey-100")),Br(G.Switch,"primaryDisabledColor",ae($a,G.primary.main,.62)),Br(G.Switch,"secondaryDisabledColor",ae($a,G.secondary.main,.62)),Br(G.Switch,"errorDisabledColor",ae($a,G.error.main,.62)),Br(G.Switch,"infoDisabledColor",ae($a,G.info.main,.62)),Br(G.Switch,"successDisabledColor",ae($a,G.success.main,.62)),Br(G.Switch,"warningDisabledColor",ae($a,G.warning.main,.62)),Br(G.TableCell,"border",ae($a,ae(fp,G.divider,1),.88)),Br(G.Tooltip,"bg",ae(fp,G.grey[700],.92))}if(G.mode==="dark"){Br(G.Alert,"errorColor",ae($a,G.error.light,.6)),Br(G.Alert,"infoColor",ae($a,G.info.light,.6)),Br(G.Alert,"successColor",ae($a,G.success.light,.6)),Br(G.Alert,"warningColor",ae($a,G.warning.light,.6)),Br(G.Alert,"errorFilledBg",ne("palette-error-dark")),Br(G.Alert,"infoFilledBg",ne("palette-info-dark")),Br(G.Alert,"successFilledBg",ne("palette-success-dark")),Br(G.Alert,"warningFilledBg",ne("palette-warning-dark")),Br(G.Alert,"errorFilledColor",Nd(()=>G.getContrastText(G.error.dark))),Br(G.Alert,"infoFilledColor",Nd(()=>G.getContrastText(G.info.dark))),Br(G.Alert,"successFilledColor",Nd(()=>G.getContrastText(G.success.dark))),Br(G.Alert,"warningFilledColor",Nd(()=>G.getContrastText(G.warning.dark))),Br(G.Alert,"errorStandardBg",ae(qa,G.error.light,.9)),Br(G.Alert,"infoStandardBg",ae(qa,G.info.light,.9)),Br(G.Alert,"successStandardBg",ae(qa,G.success.light,.9)),Br(G.Alert,"warningStandardBg",ae(qa,G.warning.light,.9)),Br(G.Alert,"errorIconColor",ne("palette-error-main")),Br(G.Alert,"infoIconColor",ne("palette-info-main")),Br(G.Alert,"successIconColor",ne("palette-success-main")),Br(G.Alert,"warningIconColor",ne("palette-warning-main")),Br(G.AppBar,"defaultBg",ne("palette-grey-900")),Br(G.AppBar,"darkBg",ne("palette-background-paper")),Br(G.AppBar,"darkColor",ne("palette-text-primary")),Br(G.Avatar,"defaultBg",ne("palette-grey-600")),Br(G.Button,"inheritContainedBg",ne("palette-grey-800")),Br(G.Button,"inheritContainedHoverBg",ne("palette-grey-700")),Br(G.Chip,"defaultBorder",ne("palette-grey-700")),Br(G.Chip,"defaultAvatarColor",ne("palette-grey-300")),Br(G.Chip,"defaultIconColor",ne("palette-grey-300")),Br(G.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Br(G.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Br(G.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Br(G.LinearProgress,"primaryBg",ae(qa,G.primary.main,.5)),Br(G.LinearProgress,"secondaryBg",ae(qa,G.secondary.main,.5)),Br(G.LinearProgress,"errorBg",ae(qa,G.error.main,.5)),Br(G.LinearProgress,"infoBg",ae(qa,G.info.main,.5)),Br(G.LinearProgress,"successBg",ae(qa,G.success.main,.5)),Br(G.LinearProgress,"warningBg",ae(qa,G.warning.main,.5)),Br(G.Skeleton,"bg",D?ae(fp,G.text.primary,.13):`rgba(${ne("palette-text-primaryChannel")} / 0.13)`),Br(G.Slider,"primaryTrack",ae(qa,G.primary.main,.5)),Br(G.Slider,"secondaryTrack",ae(qa,G.secondary.main,.5)),Br(G.Slider,"errorTrack",ae(qa,G.error.main,.5)),Br(G.Slider,"infoTrack",ae(qa,G.info.main,.5)),Br(G.Slider,"successTrack",ae(qa,G.success.main,.5)),Br(G.Slider,"warningTrack",ae(qa,G.warning.main,.5));const le=D?ae($a,G.background.default,.985):Z1(G.background.default,.98);Br(G.SnackbarContent,"bg",le),Br(G.SnackbarContent,"color",Nd(()=>D?B9.text.primary:G.getContrastText(le))),Br(G.SpeedDialAction,"fabHoverBg",Z1(G.background.paper,.15)),Br(G.StepConnector,"border",ne("palette-grey-600")),Br(G.StepContent,"border",ne("palette-grey-600")),Br(G.Switch,"defaultColor",ne("palette-grey-300")),Br(G.Switch,"defaultDisabledColor",ne("palette-grey-600")),Br(G.Switch,"primaryDisabledColor",ae(qa,G.primary.main,.55)),Br(G.Switch,"secondaryDisabledColor",ae(qa,G.secondary.main,.55)),Br(G.Switch,"errorDisabledColor",ae(qa,G.error.main,.55)),Br(G.Switch,"infoDisabledColor",ae(qa,G.info.main,.55)),Br(G.Switch,"successDisabledColor",ae(qa,G.success.main,.55)),Br(G.Switch,"warningDisabledColor",ae(qa,G.warning.main,.55)),Br(G.TableCell,"border",ae(qa,ae(fp,G.divider,1),.68)),Br(G.Tooltip,"bg",ae(fp,G.grey[700],.92))}_f(G.background,"default"),_f(G.background,"paper"),_f(G.common,"background"),_f(G.common,"onBackground"),_f(G,"divider"),Object.keys(G).forEach(le=>{const fe=G[le];le!=="tonalOffset"&&fe&&typeof fe=="object"&&(fe.main&&Br(G[le],"mainChannel",Av(Mv(fe.main))),fe.light&&Br(G[le],"lightChannel",Av(Mv(fe.light))),fe.dark&&Br(G[le],"darkChannel",Av(Mv(fe.dark))),fe.contrastText&&Br(G[le],"contrastTextChannel",Av(Mv(fe.contrastText))),le==="text"&&(_f(G[le],"primary"),_f(G[le],"secondary")),le==="action"&&(fe.active&&_f(G[le],"active"),fe.selected&&_f(G[le],"selected")))})}),z=t.reduce((ee,G)=>$l(ee,G),z);const U={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:eK(z),enableContrastVars:l},{vars:H,generateThemeVars:X,generateStyleSheets:ie}=cZ(z,U);return z.vars=H,Object.entries(z.colorSchemes[z.defaultColorScheme]).forEach(([ee,G])=>{z[ee]=G}),z.generateThemeVars=X,z.generateStyleSheets=ie,z.generateSpacing=function(){return x9(g.spacing,bP(this))},z.getColorSchemeSelector=dZ(c),z.spacing=z.generateSpacing(),z.shouldSkipGeneratingVar=a,z.unstable_sxConfig={...r1,...g?.unstable_sxConfig},z.unstable_sx=function(G){return Lh({sx:G,theme:this})},z.toRuntimeSource=$9,z}function NL(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:PP({...r===!0?{}:r.palette,mode:t})})}function vy(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:o=r?.mode,...l}=e,a=o||"light",c=i?.[a],h={...i,...r?{[a]:{...typeof c!="boolean"&&c,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return G4(e,...t);let g=r;"palette"in e||h[a]&&(h[a]!==!0?g=h[a].palette:a==="dark"&&(g={mode:"dark"}));const v=G4({...e,palette:g},...t);return v.defaultColorScheme=a,v.colorSchemes=h,v.palette.mode==="light"&&(v.colorSchemes.light={...h.light!==!0&&h.light,palette:v.palette},NL(v,"dark",h.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:v.palette},NL(v,"light",h.light)),v}return!r&&!("light"in h)&&a==="light"&&(h.light=!0),iK({...l,colorSchemes:h,defaultColorScheme:a,...typeof n!="boolean"&&n},...t)}const IP=vy();function mu(){const e=n1(IP);return e[ld]||e}function h2(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Es=e=>h2(e)&&e!=="classes",Ar=P9({themeId:ld,defaultTheme:IP,rootShouldForwardProp:Es});function aK({theme:e,...t}){const r=ld in e?e[ld]:void 0;return Z.jsx(N9,{...t,themeId:r?ld:void 0,theme:r||e})}const K1={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:oK}=oZ({themeId:ld,theme:()=>vy({cssVariables:!0}),colorSchemeStorageKey:K1.colorSchemeStorageKey,modeStorageKey:K1.modeStorageKey,defaultColorScheme:{light:K1.defaultLightColorScheme,dark:K1.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:j9(e.palette,e.typography)};return t.unstable_sx=function(n){return Lh({sx:n,theme:this})},t}}),sK=oK;function lK({theme:e,...t}){const r=J.useMemo(()=>{if(typeof e=="function")return e;const n=ld in e?e[ld]:e;return"colorSchemes"in n?null:"vars"in n?e:{...e,vars:null}},[e]);return r?Z.jsx(aK,{theme:r,...t}):Z.jsx(sK,{theme:e,...t})}const uK=vy({palette:{mode:"light"}}),cK=vy({palette:{mode:"dark"}}),dK=e=>({...e==="light"?uK:cK,palette:{mode:e,...e==="dark"?{primary:{main:"#009EE0"},secondary:{main:"#747577"},background:{paper:"#313131"},text:{primary:"#FFF",contrast:"#000"},topToolbar:{barColor:"#000"},navigation:{buttonColor:"#fff",navColor:"#313131",navHover:"#747577"},GPS:{GPSActiveColor:"#fff",GPSInactiveColor:"#fff",GPSActiveBackgroundColor:"#747577"},compass:{compColor:"#313131",compHover:"#747577",compStroke:"#d3dce1",compNorth:"#cf003f",compSouth:"#d3dcf0"}}:{primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{buttonColor:"#747577",navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#747577",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}}}}),fK=e=>{const t=dK(e&&["light","dark"].includes(e)?e:"light");return vy(t,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:t.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:{minWidth:"20px",minHeight:"20px",fontWeight:600,[t.breakpoints.down("md")]:{width:"50px",height:"50px",fontSize:"1.4em"},[t.breakpoints.up("md")]:{width:"30px",height:"30px",fontSize:"1.2em"},color:t.palette.text.primary,backgroundColor:t.palette.navigation.navColor,borderRadius:"23%",margin:"0.15px",marginTop:"4px",":hover":{backgroundColor:t.palette.navigation.navHover}}}]},MuiListItemText:{styleOverrides:{primary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.9rem"}:{},secondary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.7rem"}:{}}}}})};try{MapcomponentsTheme.displayName="MapcomponentsTheme",MapcomponentsTheme.__docgenInfo={description:"",displayName:"MapcomponentsTheme",props:{}}}catch{}const hu={source_openmaptiles_url:"https://wms.wheregroup.com/tileserver/tile/world-0-14.json",sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},Fl=[];for(let e=0;e<256;++e)Fl.push((e+256).toString(16).slice(1));function hK(e,t=0){return(Fl[e[t+0]]+Fl[e[t+1]]+Fl[e[t+2]]+Fl[e[t+3]]+"-"+Fl[e[t+4]]+Fl[e[t+5]]+"-"+Fl[e[t+6]]+Fl[e[t+7]]+"-"+Fl[e[t+8]]+Fl[e[t+9]]+"-"+Fl[e[t+10]]+Fl[e[t+11]]+Fl[e[t+12]]+Fl[e[t+13]]+Fl[e[t+14]]+Fl[e[t+15]]).toLowerCase()}let xS;const pK=new Uint8Array(16);function mK(){if(!xS){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");xS=crypto.getRandomValues.bind(crypto)}return xS(pK)}const gK=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),OL={randomUUID:gK};function Vu(e,t,r){if(OL.randomUUID&&!e)return OL.randomUUID();e=e||{};const n=e.random??e.rng?.()??mK();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,hK(n)}const kP=ft.createContext({});function W4(e){const[t,r]=ft.useState([]),[n,i]=ft.useState([]),[o,l]=ft.useState([]),[a,c]=ft.useState(hu.sourceOptions_tiles[0]),h=J.useMemo(()=>({layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[a]}}),[a]),g=I=>{if(!I)return;const k=[],M=[];I.layers.forEach((O,F)=>{O.type==="symbol"?M.push(O):(F===0&&(O.id=I.name||"background"),k.push(O))}),i(k),l(M)};J.useEffect(()=>{if(t.filter(I=>!I?.id).length){const I=[...t];I.forEach(k=>{k?.id||(k.id=Vu())}),r(I)}},[t]);const v=J.useCallback((I,k)=>{const M=t?.filter?.(O=>O.id===I);if(M.length>0){const O=[...t],F=M[0],D=t.indexOf(F),q=k(D);q>=0&&q<=t.length-1&&(O.splice(D,1),O.splice(q,0,F),r(O))}},[t]),x=J.useCallback(I=>{v(I,k=>k+1)},[v]),b=J.useCallback(I=>{v(I,k=>k-1)},[v]),S={layers:t,setLayers:r,backgroundLayers:n,setBackgroundLayers:i,symbolLayers:o,setSymbolLayers:l,updateStyle:g,vtLayerConfig:h,tileUrl:a,setTileUrl:c,moveUp:b,moveDown:x,moveLayer:v};return Z.jsx(kP.Provider,{value:S,children:e.children})}try{W4.displayName="LayerContextProvider",W4.__docgenInfo={description:"",displayName:"LayerContextProvider",props:{}}}catch{}const Uh=ft.createContext({}),FL=({children:e})=>{const[t,r]=J.useState(void 0),[n,i]=J.useState([]),o=J.useRef([]),l=J.useRef({}),a=g=>{if(g){typeof l.current[g]<"u"&&delete l.current[g];const v=o.current.indexOf(g);v>-1&&o.current.splice(v,1),i([...o.current]),o.current.length===0&&t&&r(void 0)}else a("anonymous_map")},h={map:t,setMap:g=>{if(r(g),n.length===0){const v="anonymous_map";i([...n,v]),l.current[v]=g}},maps:l.current,mapIds:n,registerMap:(g,v)=>{g&&v&&(l.current[g]=v,o.current.push(g),i([...o.current]),(!t||t?.cancelled===!0)&&r(v))},removeMap:a,mapExists:g=>g&&Object.keys(l.current).indexOf(g)===-1?!1:!(!g&&!t),getMap:g=>g&&n.indexOf(g)!==-1?l.current[g]:!g&&t?t:null};return Z.jsx(Uh.Provider,{value:h,children:Z.jsx(W4,{children:Z.jsx(lK,{theme:fK("light"),children:e})})})};try{FL.displayName="MapComponentsProvider",FL.__docgenInfo={description:`MapComponentsProvider must be imported and wrapped around component where at least one of its child nodes requires access to a MapLibre-gl or openlayers instance that is registered in this mapContext.
MapComponentsProvider must be used one level higher than the first use of MapContext.

MapComponentsProvider requires at least one use of the MapLibreMap component somewhere down the component tree that will create the MapLibre-gl object and set the reference at MapContext.map. For MapLibre maps it is a good idea to provide a mapId attribute to the MapLibreMap Component even if you are only using a single map instance at start. It will make a later transition to using multiple instances within the same project much easier.`,displayName:"MapComponentsProvider",props:{}}}catch{}var l_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */var yK=l_.exports,BL;function vK(){return BL||(BL=1,(function(e,t){(function(r,n){e.exports=n()})(yK,(function(){var r={},n={};function i(l,a,c){if(n[l]=c,l==="index"){var h="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",g={};return n.shared(g),n.index(r,g),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),r}}i("shared",["exports"],(function(l){function a(p,u,f,_){return new(f||(f=Promise))((function(E,R){function N(oe){try{Q(_.next(oe))}catch(de){R(de)}}function V(oe){try{Q(_.throw(oe))}catch(de){R(de)}}function Q(oe){var de;oe.done?E(oe.value):(de=oe.value,de instanceof f?de:new f((function(ve){ve(de)}))).then(N,V)}Q((_=_.apply(p,u||[])).next())}))}function c(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var h,g;function v(){if(g)return h;function p(u,f){this.x=u,this.y=f}return g=1,h=p,p.prototype={clone:function(){return new p(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,f){return this.clone()._rotateAround(u,f)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var f=u.x-this.x,_=u.y-this.y;return f*f+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,f){return Math.atan2(this.x*f-this.y*u,this.x*u+this.y*f)},_matMult:function(u){var f=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=f,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var f=Math.cos(u),_=Math.sin(u),E=_*this.x+f*this.y;return this.x=f*this.x-_*this.y,this.y=E,this},_rotateAround:function(u,f){var _=Math.cos(u),E=Math.sin(u),R=f.y+E*(this.x-f.x)+_*(this.y-f.y);return this.x=f.x+_*(this.x-f.x)-E*(this.y-f.y),this.y=R,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(u){return u instanceof p?u:Array.isArray(u)?new p(u[0],u[1]):u},h}typeof SuppressedError=="function"&&SuppressedError;var x,b,S=c(v()),I=(function(){if(b)return x;function p(u,f,_,E){this.cx=3*u,this.bx=3*(_-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(E-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=f,this.p2x=_,this.p2y=E}return b=1,x=p,p.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,f){if(f===void 0&&(f=1e-6),u<0)return 0;if(u>1)return 1;for(var _=u,E=0;E<8;E++){var R=this.sampleCurveX(_)-u;if(Math.abs(R)<f)return _;var N=this.sampleCurveDerivativeX(_);if(Math.abs(N)<1e-6)break;_-=R/N}var V=0,Q=1;for(_=u,E=0;E<20&&(R=this.sampleCurveX(_),!(Math.abs(R-u)<f));E++)u>R?V=_:Q=_,_=.5*(Q-V)+V;return _},solve:function(u,f){return this.sampleCurveY(this.solveCurveX(u,f))}},x})(),k=c(I);let M,O;function F(){return M==null&&(M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),M}function D(){if(O==null&&(O=!1,F())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let _=0;_<25;_++){const E=4*_;u.fillStyle=`rgb(${E},${E+1},${E+2})`,u.fillRect(_%5,Math.floor(_/5),1,1)}const f=u.getImageData(0,0,5,5).data;for(let _=0;_<100;_++)if(_%4!=3&&f[_]!==_){O=!0;break}}}return O||!1}var q=1e-6,z=typeof Float32Array<"u"?Float32Array:Array;function U(){var p=new z(9);return z!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[5]=0,p[6]=0,p[7]=0),p[0]=1,p[4]=1,p[8]=1,p}function H(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function X(){var p=new z(3);return z!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),p}function ie(p){return Math.hypot(p[0],p[1],p[2])}function ee(p,u,f){var _=new z(3);return _[0]=p,_[1]=u,_[2]=f,_}function G(p,u,f){return p[0]=u[0]+f[0],p[1]=u[1]+f[1],p[2]=u[2]+f[2],p}function ne(p,u,f){return p[0]=u[0]*f,p[1]=u[1]*f,p[2]=u[2]*f,p}function ae(p,u,f){var _=u[0],E=u[1],R=u[2],N=f[0],V=f[1],Q=f[2];return p[0]=E*Q-R*V,p[1]=R*N-_*Q,p[2]=_*V-E*N,p}Math.hypot||(Math.hypot=function(){for(var p=0,u=arguments.length;u--;)p+=arguments[u]*arguments[u];return Math.sqrt(p)});var le,fe=ie;function ke(p,u,f){var _=u[0],E=u[1],R=u[2],N=u[3];return p[0]=f[0]*_+f[4]*E+f[8]*R+f[12]*N,p[1]=f[1]*_+f[5]*E+f[9]*R+f[13]*N,p[2]=f[2]*_+f[6]*E+f[10]*R+f[14]*N,p[3]=f[3]*_+f[7]*E+f[11]*R+f[15]*N,p}function me(){var p=new z(4);return z!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),p[3]=1,p}function Se(p,u,f,_){var E=.5*Math.PI/180;u*=E,f*=E,_*=E;var R=Math.sin(u),N=Math.cos(u),V=Math.sin(f),Q=Math.cos(f),oe=Math.sin(_),de=Math.cos(_);return p[0]=R*Q*de-N*V*oe,p[1]=N*V*de+R*Q*oe,p[2]=N*Q*oe-R*V*de,p[3]=N*Q*de+R*V*oe,p}function we(){var p=new z(2);return z!=Float32Array&&(p[0]=0,p[1]=0),p}function Pe(p,u){var f=new z(2);return f[0]=p,f[1]=u,f}X(),le=new z(4),z!=Float32Array&&(le[0]=0,le[1]=0,le[2]=0,le[3]=0),X(),ee(1,0,0),ee(0,1,0),me(),me(),U(),we();const ce=8192;function _e(p,u,f){return u*(ce/(p.tileSize*Math.pow(2,f-p.tileID.overscaledZ)))}function be(p,u){return(p%u+u)%u}function Me(p,u,f){return p*(1-f)+u*f}function Le(p){if(p<=0)return 0;if(p>=1)return 1;const u=p*p,f=u*p;return 4*(p<.5?f:3*(p-u)+f-.75)}function Ue(p,u,f,_){const E=new k(p,u,f,_);return R=>E.solve(R)}const Oe=Ue(.25,.1,.25,1);function tt(p,u,f){return Math.min(f,Math.max(u,p))}function Ze(p,u,f){const _=f-u,E=((p-u)%_+_)%_+u;return E===u?f:E}function Qe(p,...u){for(const f of u)for(const _ in f)p[_]=f[_];return p}let Ie=1;function Mt(p,u,f){const _={};for(const E in p)_[E]=u.call(this,p[E],E,p);return _}function ot(p,u,f){const _={};for(const E in p)u.call(this,p[E],E,p)&&(_[E]=p[E]);return _}function $e(p){return Array.isArray(p)?p.map($e):typeof p=="object"&&p?Mt(p,$e):p}const tr={};function Wt(p){tr[p]||(typeof console<"u"&&console.warn(p),tr[p]=!0)}function Gt(p,u,f){return(f.y-p.y)*(u.x-p.x)>(u.y-p.y)*(f.x-p.x)}function at(p){return typeof WorkerGlobalScope<"u"&&p!==void 0&&p instanceof WorkerGlobalScope}let dr=null;function hr(p){return typeof ImageBitmap<"u"&&p instanceof ImageBitmap}const ur="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Cr(p,u,f,_,E){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const R=new VideoFrame(p,{timestamp:0});try{const N=R?.format;if(!N||!N.startsWith("BGR")&&!N.startsWith("RGB"))throw new Error(`Unrecognized format ${N}`);const V=N.startsWith("BGR"),Q=new Uint8ClampedArray(_*E*4);if(yield R.copyTo(Q,(function(oe,de,ve,Fe,je){const Ve=4*Math.max(1,0),Xe=(Math.max(0,ve)-ve)*Fe*4+Ve,st=4*Fe,yt=Math.max(0,de),Vt=Math.max(0,ve);return{rect:{x:yt,y:Vt,width:Math.min(oe.width,de+Fe)-yt,height:Math.min(oe.height,ve+je)-Vt},layout:[{offset:Xe,stride:st}]}})(p,u,f,_,E)),V)for(let oe=0;oe<Q.length;oe+=4){const de=Q[oe];Q[oe]=Q[oe+2],Q[oe+2]=de}return Q}finally{R.close()}}))}let br,nr;function lr(p,u,f,_){return p.addEventListener(u,f,_),{unsubscribe:()=>{p.removeEventListener(u,f,_)}}}function Pr(p){return p*Math.PI/180}function ar(p){return p/Math.PI*180}const kr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Qt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ht="AbortError";function Ct(){return new Error(Ht)}const Re={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Be(p){return Re.REGISTERED_PROTOCOLS[p.substring(0,p.indexOf("://"))]}const De="global-dispatcher";class rt extends Error{constructor(u,f,_,E){super(`AJAXError: ${f} (${u}): ${_}`),this.status=u,this.statusText=f,this.url=_,this.body=E}}const mt=()=>at(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,At=function(p,u){if(/:\/\//.test(p.url)&&!/^https?:|^file:/.test(p.url)){const _=Be(p.url);if(_)return _(p,u);if(at(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:p,targetMapId:De},u)}if(!(/^file:/.test(f=p.url)||/^file:/.test(mt())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(_,E){return a(this,void 0,void 0,(function*(){const R=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:mt(),signal:E.signal});let N,V;_.type!=="json"||R.headers.has("Accept")||R.headers.set("Accept","application/json");try{N=yield fetch(R)}catch(oe){throw new rt(0,oe.message,_.url,new Blob)}if(!N.ok){const oe=yield N.blob();throw new rt(N.status,N.statusText,_.url,oe)}V=_.type==="arrayBuffer"||_.type==="image"?N.arrayBuffer():_.type==="json"?N.json():N.text();const Q=yield V;if(E.signal.aborted)throw Ct();return{data:Q,cacheControl:N.headers.get("Cache-Control"),expires:N.headers.get("Expires")}}))})(p,u);if(at(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:p,mustQueue:!0,targetMapId:De},u)}var f;return(function(_,E){return new Promise(((R,N)=>{var V;const Q=new XMLHttpRequest;Q.open(_.method||"GET",_.url,!0),_.type!=="arrayBuffer"&&_.type!=="image"||(Q.responseType="arraybuffer");for(const oe in _.headers)Q.setRequestHeader(oe,_.headers[oe]);_.type==="json"&&(Q.responseType="text",!((V=_.headers)===null||V===void 0)&&V.Accept||Q.setRequestHeader("Accept","application/json")),Q.withCredentials=_.credentials==="include",Q.onerror=()=>{N(new Error(Q.statusText))},Q.onload=()=>{if(!E.signal.aborted)if((Q.status>=200&&Q.status<300||Q.status===0)&&Q.response!==null){let oe=Q.response;if(_.type==="json")try{oe=JSON.parse(Q.response)}catch(de){return void N(de)}R({data:oe,cacheControl:Q.getResponseHeader("Cache-Control"),expires:Q.getResponseHeader("Expires")})}else{const oe=new Blob([Q.response],{type:Q.getResponseHeader("Content-Type")});N(new rt(Q.status,Q.statusText,_.url,oe))}},E.signal.addEventListener("abort",(()=>{Q.abort(),N(Ct())})),Q.send(_.body)}))})(p,u)};function Ot(p){if(!p||p.indexOf("://")<=0||p.indexOf("data:image/")===0||p.indexOf("blob:")===0)return!0;const u=new URL(p),f=window.location;return u.protocol===f.protocol&&u.host===f.host}function Tt(p,u,f){f[p]&&f[p].indexOf(u)!==-1||(f[p]=f[p]||[],f[p].push(u))}function Yt(p,u,f){if(f&&f[p]){const _=f[p].indexOf(u);_!==-1&&f[p].splice(_,1)}}class Bt{constructor(u,f={}){Qe(this,f),this.type=u}}class wt extends Bt{constructor(u,f={}){super("error",Qe({error:u},f))}}class Xt{on(u,f){return this._listeners=this._listeners||{},Tt(u,f,this._listeners),{unsubscribe:()=>{this.off(u,f)}}}off(u,f){return Yt(u,f,this._listeners),Yt(u,f,this._oneTimeListeners),this}once(u,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},Tt(u,f,this._oneTimeListeners),this):new Promise((_=>this.once(u,_)))}fire(u,f){typeof u=="string"&&(u=new Bt(u,f||{}));const _=u.type;if(this.listens(_)){u.target=this;const E=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const V of E)V.call(this,u);const R=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const V of R)Yt(_,V,this._oneTimeListeners),V.call(this,u);const N=this._eventedParent;N&&(Qe(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),N.fire(u))}else u instanceof wt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,f){return this._eventedParent=u,this._eventedParentData=f,this}}var Et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ir=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function $t(p,u){const f={};for(const _ in p)_!=="ref"&&(f[_]=p[_]);return Ir.forEach((_=>{_ in u&&(f[_]=u[_])})),f}function Vr(p,u){if(Array.isArray(p)){if(!Array.isArray(u)||p.length!==u.length)return!1;for(let f=0;f<p.length;f++)if(!Vr(p[f],u[f]))return!1;return!0}if(typeof p=="object"&&p!==null&&u!==null){if(typeof u!="object"||Object.keys(p).length!==Object.keys(u).length)return!1;for(const f in p)if(!Vr(p[f],u[f]))return!1;return!0}return p===u}function Rr(p,u){p.push(u)}function un(p,u,f){Rr(f,{command:"addSource",args:[p,u[p]]})}function Te(p,u,f){Rr(u,{command:"removeSource",args:[p]}),f[p]=!0}function qe(p,u,f,_){Te(p,f,_),un(p,u,f)}function ht(p,u,f){let _;for(_ in p[f])if(Object.prototype.hasOwnProperty.call(p[f],_)&&_!=="data"&&!Vr(p[f][_],u[f][_]))return!1;for(_ in u[f])if(Object.prototype.hasOwnProperty.call(u[f],_)&&_!=="data"&&!Vr(p[f][_],u[f][_]))return!1;return!0}function kt(p,u,f,_,E,R){p=p||{},u=u||{};for(const N in p)Object.prototype.hasOwnProperty.call(p,N)&&(Vr(p[N],u[N])||f.push({command:R,args:[_,N,u[N],E]}));for(const N in u)Object.prototype.hasOwnProperty.call(u,N)&&!Object.prototype.hasOwnProperty.call(p,N)&&(Vr(p[N],u[N])||f.push({command:R,args:[_,N,u[N],E]}))}function gr(p){return p.id}function Ur(p,u){return p[u.id]=u,p}class Er{constructor(u,f,_,E){this.message=(u?`${u}: `:"")+_,E&&(this.identifier=E),f!=null&&f.__line__&&(this.line=f.__line__)}}function si(p,...u){for(const f of u)for(const _ in f)p[_]=f[_];return p}class Hn extends Error{constructor(u,f){super(f),this.message=f,this.key=u}}class di{constructor(u,f=[]){this.parent=u,this.bindings={};for(const[_,E]of f)this.bindings[_]=E}concat(u){return new di(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Mi={kind:"null"},qr={kind:"number"},cn={kind:"string"},Pn={kind:"boolean"},Gi={kind:"color"},pa={kind:"projectionDefinition"},Ki={kind:"object"},wn={kind:"value"},Ua={kind:"collator"},oa={kind:"formatted"},Di={kind:"padding"},Ra={kind:"colorArray"},Ts={kind:"numberArray"},bi={kind:"resolvedImage"},Ys={kind:"variableAnchorOffsetCollection"};function _o(p,u){return{kind:"array",itemType:p,N:u}}function fi(p){if(p.kind==="array"){const u=fi(p.itemType);return typeof p.N=="number"?`array<${u}, ${p.N}>`:p.itemType.kind==="value"?"array":`array<${u}>`}return p.kind}const io=[Mi,qr,cn,Pn,Gi,pa,oa,Ki,_o(wn),Di,Ts,Ra,bi,Ys];function ps(p,u){if(u.kind==="error")return null;if(p.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!ps(p.itemType,u.itemType))&&(typeof p.N!="number"||p.N===u.N))return null}else{if(p.kind===u.kind)return null;if(p.kind==="value"){for(const f of io)if(!ps(f,u))return null}}return`Expected ${fi(p)} but found ${fi(u)} instead.`}function ho(p,u){return u.some((f=>f.kind===p.kind))}function Ga(p,u){return u.some((f=>f==="null"?p===null:f==="array"?Array.isArray(p):f==="object"?p&&!Array.isArray(p)&&typeof p=="object":f===typeof p))}function Zs(p,u){return p.kind==="array"&&u.kind==="array"?p.itemType.kind===u.itemType.kind&&typeof p.N=="number":p.kind===u.kind}const Da=.96422,Qu=.82521,Au=4/29,ko=6/29,ms=3*ko*ko,Na=ko*ko*ko,ao=Math.PI/180,Ia=180/Math.PI;function Ks(p){return(p%=360)<0&&(p+=360),p}function Hl([p,u,f,_]){let E,R;const N=K((.2225045*(p=Wl(p))+.7168786*(u=Wl(u))+.0606169*(f=Wl(f)))/1);p===u&&u===f?E=R=N:(E=K((.4360747*p+.3850649*u+.1430804*f)/Da),R=K((.0139322*p+.0971045*u+.7141733*f)/Qu));const V=116*N-16;return[V<0?0:V,500*(E-N),200*(N-R),_]}function Wl(p){return p<=.04045?p/12.92:Math.pow((p+.055)/1.055,2.4)}function K(p){return p>Na?Math.pow(p,1/3):p/ms+Au}function pe([p,u,f,_]){let E=(p+16)/116,R=isNaN(u)?E:E+u/500,N=isNaN(f)?E:E-f/200;return E=1*St(E),R=Da*St(R),N=Qu*St(N),[Ye(3.1338561*R-1.6168667*E-.4906146*N),Ye(-.9787684*R+1.9161415*E+.033454*N),Ye(.0719453*R-.2289914*E+1.4052427*N),_]}function Ye(p){return(p=p<=.00304?12.92*p:1.055*Math.pow(p,1/2.4)-.055)<0?0:p>1?1:p}function St(p){return p>ko?p*p*p:ms*(p-Au)}const zt=Object.hasOwn||function(p,u){return Object.prototype.hasOwnProperty.call(p,u)};function Rt(p,u){return zt(p,u)?p[u]:void 0}function Jt(p){return parseInt(p.padEnd(2,p),16)/255}function jr(p,u){return Kr(u?p/100:p,0,1)}function Kr(p,u,f){return Math.min(Math.max(u,p),f)}function Wr(p){return!p.some(Number.isNaN)}const nn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Yr(p,u,f){return p+f*(u-p)}function Bn(p,u,f){return p.map(((_,E)=>Yr(_,u[E],f)))}class gn{constructor(u,f,_,E=1,R=!0){this.r=u,this.g=f,this.b=_,this.a=E,R||(this.r*=E,this.g*=E,this.b*=E,E||this.overwriteGetter("rgb",[u,f,_,E]))}static parse(u){if(u instanceof gn)return u;if(typeof u!="string")return;const f=(function(_){if((_=_.toLowerCase().trim())==="transparent")return[0,0,0,0];const E=Rt(nn,_);if(E){const[N,V,Q]=E;return[N/255,V/255,Q/255,1]}if(_.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){const N=_.length<6?1:2;let V=1;return[Jt(_.slice(V,V+=N)),Jt(_.slice(V,V+=N)),Jt(_.slice(V,V+=N)),Jt(_.slice(V,V+N)||"ff")]}if(_.startsWith("rgb")){const N=_.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt,Vt]=N,Lt=[de||" ",je||" ",st].join("");if(Lt==="  "||Lt==="  /"||Lt===",,"||Lt===",,,"){const ze=[oe,Fe,Xe].join(""),nt=ze==="%%%"?100:ze===""?255:0;if(nt){const Nt=[Kr(+Q/nt,0,1),Kr(+ve/nt,0,1),Kr(+Ve/nt,0,1),yt?jr(+yt,Vt):1];if(Wr(Nt))return Nt}}return}}const R=_.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[N,V,Q,oe,de,ve,Fe,je,Ve]=R,Xe=[Q||" ",de||" ",Fe].join("");if(Xe==="  "||Xe==="  /"||Xe===",,"||Xe===",,,"){const st=[+V,Kr(+oe,0,100),Kr(+ve,0,100),je?jr(+je,Ve):1];if(Wr(st))return(function([yt,Vt,Lt,ze]){function nt(Nt){const vr=(Nt+yt/30)%12,Gr=Vt*Math.min(Lt,1-Lt);return Lt-Gr*Math.max(-1,Math.min(vr-3,9-vr,1))}return yt=Ks(yt),Vt/=100,Lt/=100,[nt(0),nt(8),nt(4),ze]})(st)}}})(u);return f?new gn(...f,!1):void 0}get rgb(){const{r:u,g:f,b:_,a:E}=this,R=E||1/0;return this.overwriteGetter("rgb",[u/R,f/R,_/R,E])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[f,_,E,R]=Hl(u),N=Math.sqrt(_*_+E*E);return[Math.round(1e4*N)?Ks(Math.atan2(E,_)*Ia):NaN,N,f,R]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Hl(this.rgb))}overwriteGetter(u,f){return Object.defineProperty(this,u,{value:f}),f}toString(){const[u,f,_,E]=this.rgb;return`rgba(${[u,f,_].map((R=>Math.round(255*R))).join(",")},${E})`}static interpolate(u,f,_,E="rgb"){switch(E){case"rgb":{const[R,N,V,Q]=Bn(u.rgb,f.rgb,_);return new gn(R,N,V,Q,!1)}case"hcl":{const[R,N,V,Q]=u.hcl,[oe,de,ve,Fe]=f.hcl;let je,Ve;if(isNaN(R)||isNaN(oe))isNaN(R)?isNaN(oe)?je=NaN:(je=oe,V!==1&&V!==0||(Ve=de)):(je=R,ve!==1&&ve!==0||(Ve=N));else{let Lt=oe-R;oe>R&&Lt>180?Lt-=360:oe<R&&R-oe>180&&(Lt+=360),je=R+_*Lt}const[Xe,st,yt,Vt]=(function([Lt,ze,nt,Nt]){return Lt=isNaN(Lt)?0:Lt*ao,pe([nt,Math.cos(Lt)*ze,Math.sin(Lt)*ze,Nt])})([je,Ve??Yr(N,de,_),Yr(V,ve,_),Yr(Q,Fe,_)]);return new gn(Xe,st,yt,Vt,!1)}case"lab":{const[R,N,V,Q]=pe(Bn(u.lab,f.lab,_));return new gn(R,N,V,Q,!1)}}}}gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);class Rn{constructor(u,f,_){this.sensitivity=u?f?"variant":"case":f?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,f){return this.collator.compare(u,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Tn=["bottom","center","top"];class Or{constructor(u,f,_,E,R,N){this.text=u,this.image=f,this.scale=_,this.fontStack=E,this.textColor=R,this.verticalAlign=N}}class fn{constructor(u){this.sections=u}static fromString(u){return new fn([new Or(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof fn?u:fn.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class ti{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof ti)return u;if(typeof u=="number")return new ti([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const f of u)if(typeof f!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new ti(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,f,_){return new ti(Bn(u.values,f.values,_))}}class Ci{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Ci)return u;if(typeof u=="number")return new Ci([u]);if(Array.isArray(u)){for(const f of u)if(typeof f!="number")return;return new Ci(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,f,_){return new Ci(Bn(u.values,f.values,_))}}class hi{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof hi)return u;if(typeof u=="string"){const _=gn.parse(u);return _?new hi([_]):void 0}if(!Array.isArray(u))return;const f=[];for(const _ of u){if(typeof _!="string")return;const E=gn.parse(_);if(!E)return;f.push(E)}return new hi(f)}toString(){return JSON.stringify(this.values)}static interpolate(u,f,_,E="rgb"){const R=[];if(u.values.length!=f.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${f.values.length}), cannot interpolate.`);for(let N=0;N<u.values.length;N++)R.push(gn.interpolate(u.values[N],f.values[N],_,E));return new hi(R)}}class Li extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const Ii=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class _n{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof _n)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let f=0;f<u.length;f+=2){const _=u[f],E=u[f+1];if(typeof _!="string"||!Ii.has(_)||!Array.isArray(E)||E.length!==2||typeof E[0]!="number"||typeof E[1]!="number")return}return new _n(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,f,_){const E=u.values,R=f.values;if(E.length!==R.length)throw new Li(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${f.toString()}`);const N=[];for(let V=0;V<E.length;V+=2){if(E[V]!==R[V])throw new Li(`Cannot interpolate values containing mismatched anchors. from[${V}]: ${E[V]}, to[${V}]: ${R[V]}`);N.push(E[V]);const[Q,oe]=E[V+1],[de,ve]=R[V+1];N.push([Yr(Q,de,_),Yr(oe,ve,_)])}return new _n(N)}}class ka{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new ka({name:u,available:!1}):null}}class Zn{constructor(u,f,_){this.from=u,this.to=f,this.transition=_}static interpolate(u,f,_){return new Zn(u,f,_)}static parse(u){return u instanceof Zn?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Zn(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Zn(u.from,u.to,u.transition):typeof u=="string"?new Zn(u,u,1):void 0}}function On(p,u,f,_){return typeof p=="number"&&p>=0&&p<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof f=="number"&&f>=0&&f<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:`Invalid rgba value [${[p,u,f,_].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _=="number"?[p,u,f,_]:[p,u,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ts(p){if(p===null||typeof p=="string"||typeof p=="boolean"||typeof p=="number"||p instanceof Zn||p instanceof gn||p instanceof Rn||p instanceof fn||p instanceof ti||p instanceof Ci||p instanceof hi||p instanceof _n||p instanceof ka)return!0;if(Array.isArray(p)){for(const u of p)if(!ts(u))return!1;return!0}if(typeof p=="object"){for(const u in p)if(!ts(p[u]))return!1;return!0}return!1}function bn(p){if(p===null)return Mi;if(typeof p=="string")return cn;if(typeof p=="boolean")return Pn;if(typeof p=="number")return qr;if(p instanceof gn)return Gi;if(p instanceof Zn)return pa;if(p instanceof Rn)return Ua;if(p instanceof fn)return oa;if(p instanceof ti)return Di;if(p instanceof Ci)return Ts;if(p instanceof hi)return Ra;if(p instanceof _n)return Ys;if(p instanceof ka)return bi;if(Array.isArray(p)){const u=p.length;let f;for(const _ of p){const E=bn(_);if(f){if(f===E)continue;f=wn;break}f=E}return _o(f||wn,u)}return Ki}function Js(p){const u=typeof p;return p===null?"":u==="string"||u==="number"||u==="boolean"?String(p):p instanceof gn||p instanceof Zn||p instanceof fn||p instanceof ti||p instanceof Ci||p instanceof hi||p instanceof _n||p instanceof ka?p.toString():JSON.stringify(p)}class wa{constructor(u,f){this.type=u,this.value=f}static parse(u,f){if(u.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!ts(u[1]))return f.error("invalid value");const _=u[1];let E=bn(_);const R=f.expectedType;return E.kind!=="array"||E.N!==0||!R||R.kind!=="array"||typeof R.N=="number"&&R.N!==0||(E=R),new wa(E,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ps={string:cn,number:qr,boolean:Pn,object:Ki};class Ha{constructor(u,f){this.type=u,this.args=f}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");let _,E=1;const R=u[0];if(R==="array"){let V,Q;if(u.length>2){const oe=u[1];if(typeof oe!="string"||!(oe in Ps)||oe==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);V=Ps[oe],E++}else V=wn;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return f.error('The length argument to "array" must be a positive integer literal',2);Q=u[2],E++}_=_o(V,Q)}else{if(!Ps[R])throw new Error(`Types doesn't contain name = ${R}`);_=Ps[R]}const N=[];for(;E<u.length;E++){const V=f.parse(u[E],E,wn);if(!V)return null;N.push(V)}return new Ha(_,N)}evaluate(u){for(let f=0;f<this.args.length;f++){const _=this.args[f].evaluate(u);if(!ps(this.type,bn(_)))return _;if(f===this.args.length-1)throw new Li(`Expected value to be of type ${fi(this.type)}, but found ${fi(bn(_))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Il={"to-boolean":Pn,"to-color":Gi,"to-number":qr,"to-string":cn};class zo{constructor(u,f){this.type=u,this.args=f}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");const _=u[0];if(!Il[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_==="to-boolean"||_==="to-string")&&u.length!==2)return f.error("Expected one argument.");const E=Il[_],R=[];for(let N=1;N<u.length;N++){const V=f.parse(u[N],N,wn);if(!V)return null;R.push(V)}return new zo(E,R)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let f,_;for(const E of this.args){if(f=E.evaluate(u),_=null,f instanceof gn)return f;if(typeof f=="string"){const R=u.parseColor(f);if(R)return R}else if(Array.isArray(f)&&(_=f.length<3||f.length>4?`Invalid rgba value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:On(f[0],f[1],f[2],f[3]),!_))return new gn(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new Li(_||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const _ of this.args){f=_.evaluate(u);const E=ti.parse(f);if(E)return E}throw new Li(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"numberArray":{let f;for(const _ of this.args){f=_.evaluate(u);const E=Ci.parse(f);if(E)return E}throw new Li(`Could not parse numberArray from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"colorArray":{let f;for(const _ of this.args){f=_.evaluate(u);const E=hi.parse(f);if(E)return E}throw new Li(`Could not parse colorArray from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const _ of this.args){f=_.evaluate(u);const E=_n.parse(f);if(E)return E}throw new Li(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const _ of this.args){if(f=_.evaluate(u),f===null)return 0;const E=Number(f);if(!isNaN(E))return E}throw new Li(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return fn.fromString(Js(this.args[0].evaluate(u)));case"resolvedImage":return ka.fromString(Js(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Js(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const jo=["Unknown","Point","LineString","Polygon"];class cl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?jo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let f=this._parseColorCache.get(u);return f||(f=gn.parse(u),this._parseColorCache.set(u,f)),f}}class Is{constructor(u,f,_=[],E,R=new di,N=[]){this.registry=u,this.path=_,this.key=_.map((V=>`[${V}]`)).join(""),this.scope=R,this.errors=N,this.expectedType=E,this._isConstant=f}parse(u,f,_,E,R={}){return f?this.concat(f,_,E)._parse(u,R):this._parse(u,R)}_parse(u,f){function _(E,R,N){return N==="assert"?new Ha(R,[E]):N==="coerce"?new zo(R,[E]):E}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const E=u[0];if(typeof E!="string")return this.error(`Expression name must be a string, but found ${typeof E} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const R=this.registry[E];if(R){let N=R.parse(u,this);if(!N)return null;if(this.expectedType){const V=this.expectedType,Q=N.type;if(V.kind!=="string"&&V.kind!=="number"&&V.kind!=="boolean"&&V.kind!=="object"&&V.kind!=="array"||Q.kind!=="value"){if(V.kind==="projectionDefinition"&&["string","array"].includes(Q.kind)||["color","formatted","resolvedImage"].includes(V.kind)&&["value","string"].includes(Q.kind)||["padding","numberArray"].includes(V.kind)&&["value","number","array"].includes(Q.kind)||V.kind==="colorArray"&&["value","string","array"].includes(Q.kind)||V.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(Q.kind))N=_(N,V,f.typeAnnotation||"coerce");else if(this.checkSubtype(V,Q))return null}else N=_(N,V,f.typeAnnotation||"assert")}if(!(N instanceof wa)&&N.type.kind!=="resolvedImage"&&this._isConstant(N)){const V=new cl;try{N=new wa(N.type,N.evaluate(V))}catch(Q){return this.error(Q.message),null}}return N}return this.error(`Unknown expression "${E}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,f,_){const E=typeof u=="number"?this.path.concat(u):this.path,R=_?this.scope.concat(_):this.scope;return new Is(this.registry,this._isConstant,E,f||null,R,this.errors)}error(u,...f){const _=`${this.key}${f.map((E=>`[${E}]`)).join("")}`;this.errors.push(new Hn(_,u))}checkSubtype(u,f){const _=ps(u,f);return _&&this.error(_),_}}class Oa{constructor(u,f){this.type=f.type,this.bindings=[].concat(u),this.result=f}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const f of this.bindings)u(f[1]);u(this.result)}static parse(u,f){if(u.length<4)return f.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const _=[];for(let R=1;R<u.length-1;R+=2){const N=u[R];if(typeof N!="string")return f.error(`Expected string, but found ${typeof N} instead.`,R);if(/[^a-zA-Z0-9_]/.test(N))return f.error("Variable names must contain only alphanumeric characters or '_'.",R);const V=f.parse(u[R+1],R+1);if(!V)return null;_.push([N,V])}const E=f.parse(u[u.length-1],u.length-1,f.expectedType,_);return E?new Oa(_,E):null}outputDefined(){return this.result.outputDefined()}}class Wa{constructor(u,f){this.type=f.type,this.name=u,this.boundExpression=f}static parse(u,f){if(u.length!==2||typeof u[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const _=u[1];return f.scope.has(_)?new Wa(_,f.scope.get(_)):f.error(`Unknown variable "${_}". Make sure "${_}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Yi{constructor(u,f,_){this.type=u,this.index=f,this.input=_}static parse(u,f){if(u.length!==3)return f.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=f.parse(u[1],1,qr),E=f.parse(u[2],2,_o(f.expectedType||wn));return _&&E?new Yi(E.type.itemType,_,E):null}evaluate(u){const f=this.index.evaluate(u),_=this.input.evaluate(u);if(f<0)throw new Li(`Array index out of bounds: ${f} < 0.`);if(f>=_.length)throw new Li(`Array index out of bounds: ${f} > ${_.length-1}.`);if(f!==Math.floor(f))throw new Li(`Array index must be an integer, but found ${f} instead.`);return _[f]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Sa{constructor(u,f){this.type=Pn,this.needle=u,this.haystack=f}static parse(u,f){if(u.length!==3)return f.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=f.parse(u[1],1,wn),E=f.parse(u[2],2,wn);return _&&E?ho(_.type,[Pn,cn,qr,Mi,wn])?new Sa(_,E):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(_.type)} instead`):null}evaluate(u){const f=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!_)return!1;if(!Ga(f,["boolean","string","number","null"]))throw new Li(`Expected first argument to be of type boolean, string, number or null, but found ${fi(bn(f))} instead.`);if(!Ga(_,["string","array"]))throw new Li(`Expected second argument to be of type array or string, but found ${fi(bn(_))} instead.`);return _.indexOf(f)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class se{constructor(u,f,_){this.type=qr,this.needle=u,this.haystack=f,this.fromIndex=_}static parse(u,f){if(u.length<=2||u.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=f.parse(u[1],1,wn),E=f.parse(u[2],2,wn);if(!_||!E)return null;if(!ho(_.type,[Pn,cn,qr,Mi,wn]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(_.type)} instead`);if(u.length===4){const R=f.parse(u[3],3,qr);return R?new se(_,E,R):null}return new se(_,E)}evaluate(u){const f=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!Ga(f,["boolean","string","number","null"]))throw new Li(`Expected first argument to be of type boolean, string, number or null, but found ${fi(bn(f))} instead.`);let E;if(this.fromIndex&&(E=this.fromIndex.evaluate(u)),Ga(_,["string"])){const R=_.indexOf(f,E);return R===-1?-1:[..._.slice(0,R)].length}if(Ga(_,["array"]))return _.indexOf(f,E);throw new Li(`Expected second argument to be of type array or string, but found ${fi(bn(_))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class Ge{constructor(u,f,_,E,R,N){this.inputType=u,this.type=f,this.input=_,this.cases=E,this.outputs=R,this.otherwise=N}static parse(u,f){if(u.length<5)return f.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return f.error("Expected an even number of arguments.");let _,E;f.expectedType&&f.expectedType.kind!=="value"&&(E=f.expectedType);const R={},N=[];for(let oe=2;oe<u.length-1;oe+=2){let de=u[oe];const ve=u[oe+1];Array.isArray(de)||(de=[de]);const Fe=f.concat(oe);if(de.length===0)return Fe.error("Expected at least one branch label.");for(const Ve of de){if(typeof Ve!="number"&&typeof Ve!="string")return Fe.error("Branch labels must be numbers or strings.");if(typeof Ve=="number"&&Math.abs(Ve)>Number.MAX_SAFE_INTEGER)return Fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ve=="number"&&Math.floor(Ve)!==Ve)return Fe.error("Numeric branch labels must be integer values.");if(_){if(Fe.checkSubtype(_,bn(Ve)))return null}else _=bn(Ve);if(R[String(Ve)]!==void 0)return Fe.error("Branch labels must be unique.");R[String(Ve)]=N.length}const je=f.parse(ve,oe,E);if(!je)return null;E=E||je.type,N.push(je)}const V=f.parse(u[1],1,wn);if(!V)return null;const Q=f.parse(u[u.length-1],u.length-1,E);return Q?V.type.kind!=="value"&&f.concat(1).checkSubtype(_,V.type)?null:new Ge(_,E,V,R,N,Q):null}evaluate(u){const f=this.input.evaluate(u);return(bn(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class pt{constructor(u,f,_){this.type=u,this.branches=f,this.otherwise=_}static parse(u,f){if(u.length<4)return f.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return f.error("Expected an odd number of arguments.");let _;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);const E=[];for(let N=1;N<u.length-1;N+=2){const V=f.parse(u[N],N,Pn);if(!V)return null;const Q=f.parse(u[N+1],N+1,_);if(!Q)return null;E.push([V,Q]),_=_||Q.type}const R=f.parse(u[u.length-1],u.length-1,_);if(!R)return null;if(!_)throw new Error("Can't infer output type");return new pt(_,E,R)}evaluate(u){for(const[f,_]of this.branches)if(f.evaluate(u))return _.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[f,_]of this.branches)u(f),u(_);u(this.otherwise)}outputDefined(){return this.branches.every((([u,f])=>f.outputDefined()))&&this.otherwise.outputDefined()}}class jt{constructor(u,f,_,E){this.type=u,this.input=f,this.beginIndex=_,this.endIndex=E}static parse(u,f){if(u.length<=2||u.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=f.parse(u[1],1,wn),E=f.parse(u[2],2,qr);if(!_||!E)return null;if(!ho(_.type,[_o(wn),cn,wn]))return f.error(`Expected first argument to be of type array or string, but found ${fi(_.type)} instead`);if(u.length===4){const R=f.parse(u[3],3,qr);return R?new jt(_.type,_,E,R):null}return new jt(_.type,_,E)}evaluate(u){const f=this.input.evaluate(u),_=this.beginIndex.evaluate(u);let E;if(this.endIndex&&(E=this.endIndex.evaluate(u)),Ga(f,["string"]))return[...f].slice(_,E).join("");if(Ga(f,["array"]))return f.slice(_,E);throw new Li(`Expected first argument to be of type array or string, but found ${fi(bn(f))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function or(p,u){const f=p.length-1;let _,E,R=0,N=f,V=0;for(;R<=N;)if(V=Math.floor((R+N)/2),_=p[V],E=p[V+1],_<=u){if(V===f||u<E)return V;R=V+1}else{if(!(_>u))throw new Li("Input is not a number.");N=V-1}return 0}class Nr{constructor(u,f,_){this.type=u,this.input=f,this.labels=[],this.outputs=[];for(const[E,R]of _)this.labels.push(E),this.outputs.push(R)}static parse(u,f){if(u.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return f.error("Expected an even number of arguments.");const _=f.parse(u[1],1,qr);if(!_)return null;const E=[];let R=null;f.expectedType&&f.expectedType.kind!=="value"&&(R=f.expectedType);for(let N=1;N<u.length;N+=2){const V=N===1?-1/0:u[N],Q=u[N+1],oe=N,de=N+1;if(typeof V!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(E.length&&E[E.length-1][0]>=V)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',oe);const ve=f.parse(Q,de,R);if(!ve)return null;R=R||ve.type,E.push([V,ve])}return new Nr(R,_,E)}evaluate(u){const f=this.labels,_=this.outputs;if(f.length===1)return _[0].evaluate(u);const E=this.input.evaluate(u);if(E<=f[0])return _[0].evaluate(u);const R=f.length;return E>=f[R-1]?_[R-1].evaluate(u):_[or(f,E)].evaluate(u)}eachChild(u){u(this.input);for(const f of this.outputs)u(f)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Xr(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var xn,Ln,ni=(function(){if(Ln)return xn;function p(u,f,_,E){this.cx=3*u,this.bx=3*(_-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(E-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=f,this.p2x=_,this.p2y=E}return Ln=1,xn=p,p.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,f){if(f===void 0&&(f=1e-6),u<0)return 0;if(u>1)return 1;for(var _=u,E=0;E<8;E++){var R=this.sampleCurveX(_)-u;if(Math.abs(R)<f)return _;var N=this.sampleCurveDerivativeX(_);if(Math.abs(N)<1e-6)break;_-=R/N}var V=0,Q=1;for(_=u,E=0;E<20&&(R=this.sampleCurveX(_),!(Math.abs(R-u)<f));E++)u>R?V=_:Q=_,_=.5*(Q-V)+V;return _},solve:function(u,f){return this.sampleCurveY(this.solveCurveX(u,f))}},xn})(),mi=Xr(ni);class ri{constructor(u,f,_,E,R){this.type=u,this.operator=f,this.interpolation=_,this.input=E,this.labels=[],this.outputs=[];for(const[N,V]of R)this.labels.push(N),this.outputs.push(V)}static interpolationFactor(u,f,_,E){let R=0;if(u.name==="exponential")R=Ri(f,u.base,_,E);else if(u.name==="linear")R=Ri(f,1,_,E);else if(u.name==="cubic-bezier"){const N=u.controlPoints;R=new mi(N[0],N[1],N[2],N[3]).solve(Ri(f,1,_,E))}return R}static parse(u,f){let[_,E,R,...N]=u;if(!Array.isArray(E)||E.length===0)return f.error("Expected an interpolation type expression.",1);if(E[0]==="linear")E={name:"linear"};else if(E[0]==="exponential"){const oe=E[1];if(typeof oe!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);E={name:"exponential",base:oe}}else{if(E[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(E[0])}`,1,0);{const oe=E.slice(1);if(oe.length!==4||oe.some((de=>typeof de!="number"||de<0||de>1)))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);E={name:"cubic-bezier",controlPoints:oe}}}if(u.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(R=f.parse(R,2,qr),!R)return null;const V=[];let Q=null;_!=="interpolate-hcl"&&_!=="interpolate-lab"||f.expectedType==Ra?f.expectedType&&f.expectedType.kind!=="value"&&(Q=f.expectedType):Q=Gi;for(let oe=0;oe<N.length;oe+=2){const de=N[oe],ve=N[oe+1],Fe=oe+3,je=oe+4;if(typeof de!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Fe);if(V.length&&V[V.length-1][0]>=de)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Fe);const Ve=f.parse(ve,je,Q);if(!Ve)return null;Q=Q||Ve.type,V.push([de,Ve])}return Zs(Q,qr)||Zs(Q,pa)||Zs(Q,Gi)||Zs(Q,Di)||Zs(Q,Ts)||Zs(Q,Ra)||Zs(Q,Ys)||Zs(Q,_o(qr))?new ri(Q,_,E,R,V):f.error(`Type ${fi(Q)} is not interpolatable.`)}evaluate(u){const f=this.labels,_=this.outputs;if(f.length===1)return _[0].evaluate(u);const E=this.input.evaluate(u);if(E<=f[0])return _[0].evaluate(u);const R=f.length;if(E>=f[R-1])return _[R-1].evaluate(u);const N=or(f,E),V=ri.interpolationFactor(this.interpolation,E,f[N],f[N+1]),Q=_[N].evaluate(u),oe=_[N+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Yr(Q,oe,V);case"color":return gn.interpolate(Q,oe,V);case"padding":return ti.interpolate(Q,oe,V);case"colorArray":return hi.interpolate(Q,oe,V);case"numberArray":return Ci.interpolate(Q,oe,V);case"variableAnchorOffsetCollection":return _n.interpolate(Q,oe,V);case"array":return Bn(Q,oe,V);case"projectionDefinition":return Zn.interpolate(Q,oe,V)}case"interpolate-hcl":switch(this.type.kind){case"color":return gn.interpolate(Q,oe,V,"hcl");case"colorArray":return hi.interpolate(Q,oe,V,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return gn.interpolate(Q,oe,V,"lab");case"colorArray":return hi.interpolate(Q,oe,V,"lab")}}}eachChild(u){u(this.input);for(const f of this.outputs)u(f)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Ri(p,u,f,_){const E=_-f,R=p-f;return E===0?0:u===1?R/E:(Math.pow(u,R)-1)/(Math.pow(u,E)-1)}const pi={color:gn.interpolate,number:Yr,padding:ti.interpolate,numberArray:Ci.interpolate,colorArray:hi.interpolate,variableAnchorOffsetCollection:_n.interpolate,array:Bn};class yi{constructor(u,f){this.type=u,this.args=f}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");let _=null;const E=f.expectedType;E&&E.kind!=="value"&&(_=E);const R=[];for(const V of u.slice(1)){const Q=f.parse(V,1+R.length,_,void 0,{typeAnnotation:"omit"});if(!Q)return null;_=_||Q.type,R.push(Q)}if(!_)throw new Error("No output type");const N=E&&R.some((V=>ps(E,V.type)));return new yi(N?wn:_,R)}evaluate(u){let f,_=null,E=0;for(const R of this.args)if(E++,_=R.evaluate(u),_&&_ instanceof ka&&!_.available&&(f||(f=_.name),_=null,E===this.args.length&&(_=f)),_!==null)break;return _}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function ma(p,u){return p==="=="||p==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Ji(p,u,f,_){return _.compare(u,f)===0}function sa(p,u,f){const _=p!=="=="&&p!=="!=";return class G9{constructor(R,N,V){this.type=Pn,this.lhs=R,this.rhs=N,this.collator=V,this.hasUntypedArgument=R.type.kind==="value"||N.type.kind==="value"}static parse(R,N){if(R.length!==3&&R.length!==4)return N.error("Expected two or three arguments.");const V=R[0];let Q=N.parse(R[1],1,wn);if(!Q)return null;if(!ma(V,Q.type))return N.concat(1).error(`"${V}" comparisons are not supported for type '${fi(Q.type)}'.`);let oe=N.parse(R[2],2,wn);if(!oe)return null;if(!ma(V,oe.type))return N.concat(2).error(`"${V}" comparisons are not supported for type '${fi(oe.type)}'.`);if(Q.type.kind!==oe.type.kind&&Q.type.kind!=="value"&&oe.type.kind!=="value")return N.error(`Cannot compare types '${fi(Q.type)}' and '${fi(oe.type)}'.`);_&&(Q.type.kind==="value"&&oe.type.kind!=="value"?Q=new Ha(oe.type,[Q]):Q.type.kind!=="value"&&oe.type.kind==="value"&&(oe=new Ha(Q.type,[oe])));let de=null;if(R.length===4){if(Q.type.kind!=="string"&&oe.type.kind!=="string"&&Q.type.kind!=="value"&&oe.type.kind!=="value")return N.error("Cannot use collator to compare non-string types.");if(de=N.parse(R[3],3,Ua),!de)return null}return new G9(Q,oe,de)}evaluate(R){const N=this.lhs.evaluate(R),V=this.rhs.evaluate(R);if(_&&this.hasUntypedArgument){const Q=bn(N),oe=bn(V);if(Q.kind!==oe.kind||Q.kind!=="string"&&Q.kind!=="number")throw new Li(`Expected arguments for "${p}" to be (string, string) or (number, number), but found (${Q.kind}, ${oe.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){const Q=bn(N),oe=bn(V);if(Q.kind!=="string"||oe.kind!=="string")return u(R,N,V)}return this.collator?f(R,N,V,this.collator.evaluate(R)):u(R,N,V)}eachChild(R){R(this.lhs),R(this.rhs),this.collator&&R(this.collator)}outputDefined(){return!0}}}const rs=sa("==",(function(p,u,f){return u===f}),Ji),ks=sa("!=",(function(p,u,f){return u!==f}),(function(p,u,f,_){return!Ji(0,u,f,_)})),Xl=sa("<",(function(p,u,f){return u<f}),(function(p,u,f,_){return _.compare(u,f)<0})),ns=sa(">",(function(p,u,f){return u>f}),(function(p,u,f,_){return _.compare(u,f)>0})),Yl=sa("<=",(function(p,u,f){return u<=f}),(function(p,u,f,_){return _.compare(u,f)<=0})),la=sa(">=",(function(p,u,f){return u>=f}),(function(p,u,f,_){return _.compare(u,f)>=0}));class As{constructor(u,f,_){this.type=Ua,this.locale=_,this.caseSensitive=u,this.diacriticSensitive=f}static parse(u,f){if(u.length!==2)return f.error("Expected one argument.");const _=u[1];if(typeof _!="object"||Array.isArray(_))return f.error("Collator options argument must be an object.");const E=f.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,Pn);if(!E)return null;const R=f.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,Pn);if(!R)return null;let N=null;return _.locale&&(N=f.parse(_.locale,1,cn),!N)?null:new As(E,R,N)}evaluate(u){return new Rn(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class kl{constructor(u,f,_,E,R){this.type=cn,this.number=u,this.locale=f,this.currency=_,this.minFractionDigits=E,this.maxFractionDigits=R}static parse(u,f){if(u.length!==3)return f.error("Expected two arguments.");const _=f.parse(u[1],1,qr);if(!_)return null;const E=u[2];if(typeof E!="object"||Array.isArray(E))return f.error("NumberFormat options argument must be an object.");let R=null;if(E.locale&&(R=f.parse(E.locale,1,cn),!R))return null;let N=null;if(E.currency&&(N=f.parse(E.currency,1,cn),!N))return null;let V=null;if(E["min-fraction-digits"]&&(V=f.parse(E["min-fraction-digits"],1,qr),!V))return null;let Q=null;return E["max-fraction-digits"]&&(Q=f.parse(E["max-fraction-digits"],1,qr),!Q)?null:new kl(_,R,N,V,Q)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class is{constructor(u){this.type=oa,this.sections=u}static parse(u,f){if(u.length<2)return f.error("Expected at least one argument.");const _=u[1];if(!Array.isArray(_)&&typeof _=="object")return f.error("First argument must be an image or text section.");const E=[];let R=!1;for(let N=1;N<=u.length-1;++N){const V=u[N];if(R&&typeof V=="object"&&!Array.isArray(V)){R=!1;let Q=null;if(V["font-scale"]&&(Q=f.parse(V["font-scale"],1,qr),!Q))return null;let oe=null;if(V["text-font"]&&(oe=f.parse(V["text-font"],1,_o(cn)),!oe))return null;let de=null;if(V["text-color"]&&(de=f.parse(V["text-color"],1,Gi),!de))return null;let ve=null;if(V["vertical-align"]){if(typeof V["vertical-align"]=="string"&&!Tn.includes(V["vertical-align"]))return f.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${V["vertical-align"]}' instead.`);if(ve=f.parse(V["vertical-align"],1,cn),!ve)return null}const Fe=E[E.length-1];Fe.scale=Q,Fe.font=oe,Fe.textColor=de,Fe.verticalAlign=ve}else{const Q=f.parse(u[N],1,wn);if(!Q)return null;const oe=Q.type.kind;if(oe!=="string"&&oe!=="value"&&oe!=="null"&&oe!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");R=!0,E.push({content:Q,scale:null,font:null,textColor:null,verticalAlign:null})}}return new is(E)}evaluate(u){return new fn(this.sections.map((f=>{const _=f.content.evaluate(u);return bn(_)===bi?new Or("",_,null,null,null,f.verticalAlign?f.verticalAlign.evaluate(u):null):new Or(Js(_),null,f.scale?f.scale.evaluate(u):null,f.font?f.font.evaluate(u).join(","):null,f.textColor?f.textColor.evaluate(u):null,f.verticalAlign?f.verticalAlign.evaluate(u):null)})))}eachChild(u){for(const f of this.sections)u(f.content),f.scale&&u(f.scale),f.font&&u(f.font),f.textColor&&u(f.textColor),f.verticalAlign&&u(f.verticalAlign)}outputDefined(){return!1}}class Ca{constructor(u){this.type=bi,this.input=u}static parse(u,f){if(u.length!==2)return f.error("Expected two arguments.");const _=f.parse(u[1],1,cn);return _?new Ca(_):f.error("No image name provided.")}evaluate(u){const f=this.input.evaluate(u),_=ka.fromString(f);return _&&u.availableImages&&(_.available=u.availableImages.indexOf(f)>-1),_}eachChild(u){u(this.input)}outputDefined(){return!1}}class oo{constructor(u){this.type=qr,this.input=u}static parse(u,f){if(u.length!==2)return f.error(`Expected 1 argument, but found ${u.length-1} instead.`);const _=f.parse(u[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${fi(_.type)} instead.`):new oo(_):null}evaluate(u){const f=this.input.evaluate(u);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new Li(`Expected value to be of type string or array, but found ${fi(bn(f))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Qi=8192;function Ms(p,u){const f=(180+p[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p[1]*Math.PI/360)))/360,E=Math.pow(2,u.z);return[Math.round(f*E*Qi),Math.round(_*E*Qi)]}function dl(p,u){const f=Math.pow(2,u.z);return[(E=(p[0]/Qi+u.x)/f,360*E-180),(_=(p[1]/Qi+u.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90)];var _,E}function ua(p,u){p[0]=Math.min(p[0],u[0]),p[1]=Math.min(p[1],u[1]),p[2]=Math.max(p[2],u[0]),p[3]=Math.max(p[3],u[1])}function Zl(p,u){return!(p[0]<=u[0]||p[2]>=u[2]||p[1]<=u[1]||p[3]>=u[3])}function fl(p,u,f){const _=p[0]-u[0],E=p[1]-u[1],R=p[0]-f[0],N=p[1]-f[1];return _*N-R*E==0&&_*R<=0&&E*N<=0}function Ls(p,u,f,_){return(E=[_[0]-f[0],_[1]-f[1]])[0]*(R=[u[0]-p[0],u[1]-p[1]])[1]-E[1]*R[0]!=0&&!(!pl(p,u,f,_)||!pl(f,_,p,u));var E,R}function Fa(p,u,f){for(const _ of f)for(let E=0;E<_.length-1;++E)if(Ls(p,u,_[E],_[E+1]))return!0;return!1}function po(p,u,f=!1){let _=!1;for(const V of u)for(let Q=0;Q<V.length-1;Q++){if(fl(p,V[Q],V[Q+1]))return f;(R=V[Q])[1]>(E=p)[1]!=(N=V[Q+1])[1]>E[1]&&E[0]<(N[0]-R[0])*(E[1]-R[1])/(N[1]-R[1])+R[0]&&(_=!_)}var E,R,N;return _}function Mu(p,u){for(const f of u)if(po(p,f))return!0;return!1}function Lu(p,u){for(const f of p)if(!po(f,u))return!1;for(let f=0;f<p.length-1;++f)if(Fa(p[f],p[f+1],u))return!1;return!0}function hl(p,u){for(const f of u)if(Lu(p,f))return!0;return!1}function pl(p,u,f,_){const E=_[0]-f[0],R=_[1]-f[1],N=(p[0]-f[0])*R-E*(p[1]-f[1]),V=(u[0]-f[0])*R-E*(u[1]-f[1]);return N>0&&V<0||N<0&&V>0}function so(p,u,f){const _=[];for(let E=0;E<p.length;E++){const R=[];for(let N=0;N<p[E].length;N++){const V=Ms(p[E][N],f);ua(u,V),R.push(V)}_.push(R)}return _}function Xa(p,u,f){const _=[];for(let E=0;E<p.length;E++){const R=so(p[E],u,f);_.push(R)}return _}function Kl(p,u,f,_){if(p[0]<f[0]||p[0]>f[2]){const E=.5*_;let R=p[0]-f[0]>E?-_:f[0]-p[0]>E?_:0;R===0&&(R=p[0]-f[2]>E?-_:f[2]-p[0]>E?_:0),p[0]+=R}ua(u,p)}function lo(p,u,f,_){const E=Math.pow(2,_.z)*Qi,R=[_.x*Qi,_.y*Qi],N=[];for(const V of p)for(const Q of V){const oe=[Q.x+R[0],Q.y+R[1]];Kl(oe,u,f,E),N.push(oe)}return N}function ml(p,u,f,_){const E=Math.pow(2,_.z)*Qi,R=[_.x*Qi,_.y*Qi],N=[];for(const Q of p){const oe=[];for(const de of Q){const ve=[de.x+R[0],de.y+R[1]];ua(u,ve),oe.push(ve)}N.push(oe)}if(u[2]-u[0]<=E/2){(V=u)[0]=V[1]=1/0,V[2]=V[3]=-1/0;for(const Q of N)for(const oe of Q)Kl(oe,u,f,E)}var V;return N}class xo{constructor(u,f){this.type=Pn,this.geojson=u,this.geometries=f}static parse(u,f){if(u.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(ts(u[1])){const _=u[1];if(_.type==="FeatureCollection"){const E=[];for(const R of _.features){const{type:N,coordinates:V}=R.geometry;N==="Polygon"&&E.push(V),N==="MultiPolygon"&&E.push(...V)}if(E.length)return new xo(_,{type:"MultiPolygon",coordinates:E})}else if(_.type==="Feature"){const E=_.geometry.type;if(E==="Polygon"||E==="MultiPolygon")return new xo(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new xo(_,_)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(f,_){const E=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],N=f.canonicalID();if(_.type==="Polygon"){const V=so(_.coordinates,R,N),Q=lo(f.geometry(),E,R,N);if(!Zl(E,R))return!1;for(const oe of Q)if(!po(oe,V))return!1}if(_.type==="MultiPolygon"){const V=Xa(_.coordinates,R,N),Q=lo(f.geometry(),E,R,N);if(!Zl(E,R))return!1;for(const oe of Q)if(!Mu(oe,V))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(f,_){const E=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],N=f.canonicalID();if(_.type==="Polygon"){const V=so(_.coordinates,R,N),Q=ml(f.geometry(),E,R,N);if(!Zl(E,R))return!1;for(const oe of Q)if(!Lu(oe,V))return!1}if(_.type==="MultiPolygon"){const V=Xa(_.coordinates,R,N),Q=ml(f.geometry(),E,R,N);if(!Zl(E,R))return!1;for(const oe of Q)if(!hl(oe,V))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Qs=class{constructor(p=[],u=(f,_)=>f<_?-1:f>_?1:0){if(this.data=p,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(p){this.data.push(p),this._up(this.length++)}pop(){if(this.length===0)return;const p=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),p}peek(){return this.data[0]}_up(p){const{data:u,compare:f}=this,_=u[p];for(;p>0;){const E=p-1>>1,R=u[E];if(f(_,R)>=0)break;u[p]=R,p=E}u[p]=_}_down(p){const{data:u,compare:f}=this,_=this.length>>1,E=u[p];for(;p<_;){let R=1+(p<<1);const N=R+1;if(N<this.length&&f(u[N],u[R])<0&&(R=N),f(u[R],E)>=0)break;u[p]=u[R],p=R}u[p]=E}};function ga(p,u,f=0,_=p.length-1,E=Ds){for(;_>f;){if(_-f>600){const Q=_-f+1,oe=u-f+1,de=Math.log(Q),ve=.5*Math.exp(2*de/3),Fe=.5*Math.sqrt(de*ve*(Q-ve)/Q)*(oe-Q/2<0?-1:1);ga(p,u,Math.max(f,Math.floor(u-oe*ve/Q+Fe)),Math.min(_,Math.floor(u+(Q-oe)*ve/Q+Fe)),E)}const R=p[u];let N=f,V=_;for(Rs(p,f,u),E(p[_],R)>0&&Rs(p,f,_);N<V;){for(Rs(p,N,V),N++,V--;E(p[N],R)<0;)N++;for(;E(p[V],R)>0;)V--}E(p[f],R)===0?Rs(p,f,V):(V++,Rs(p,V,_)),V<=u&&(f=V+1),u<=V&&(_=V-1)}}function Rs(p,u,f){const _=p[u];p[u]=p[f],p[f]=_}function Ds(p,u){return p<u?-1:p>u?1:0}function qo(p,u){if(p.length<=1)return[p];const f=[];let _,E;for(const R of p){const N=gu(R);N!==0&&(R.area=Math.abs(N),E===void 0&&(E=N<0),E===N<0?(_&&f.push(_),_=[R]):_.push(R))}if(_&&f.push(_),u>1)for(let R=0;R<f.length;R++)f[R].length<=u||(ga(f[R],u,1,f[R].length-1,Al),f[R]=f[R].slice(0,u));return f}function Al(p,u){return u.area-p.area}function gu(p){let u=0;for(let f,_,E=0,R=p.length,N=R-1;E<R;N=E++)f=p[E],_=p[N],u+=(_.x-f.x)*(f.y+_.y);return u}const Ns=1/298.257223563,Ml=Ns*(2-Ns),Jl=Math.PI/180;class er{constructor(u){const f=6378.137*Jl*1e3,_=Math.cos(u*Jl),E=1/(1-Ml*(1-_*_)),R=Math.sqrt(E);this.kx=f*R*_,this.ky=f*R*E*(1-Ml)}distance(u,f){const _=this.wrap(u[0]-f[0])*this.kx,E=(u[1]-f[1])*this.ky;return Math.sqrt(_*_+E*E)}pointOnLine(u,f){let _,E,R,N,V=1/0;for(let Q=0;Q<u.length-1;Q++){let oe=u[Q][0],de=u[Q][1],ve=this.wrap(u[Q+1][0]-oe)*this.kx,Fe=(u[Q+1][1]-de)*this.ky,je=0;ve===0&&Fe===0||(je=(this.wrap(f[0]-oe)*this.kx*ve+(f[1]-de)*this.ky*Fe)/(ve*ve+Fe*Fe),je>1?(oe=u[Q+1][0],de=u[Q+1][1]):je>0&&(oe+=ve/this.kx*je,de+=Fe/this.ky*je)),ve=this.wrap(f[0]-oe)*this.kx,Fe=(f[1]-de)*this.ky;const Ve=ve*ve+Fe*Fe;Ve<V&&(V=Ve,_=oe,E=de,R=Q,N=je)}return{point:[_,E],index:R,t:Math.max(0,Math.min(1,N))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function sr(p,u){return u[0]-p[0]}function ln(p){return p[1]-p[0]+1}function yn(p,u){return p[1]>=p[0]&&p[1]<u}function ui(p,u){if(p[0]>p[1])return[null,null];const f=ln(p);if(u){if(f===2)return[p,null];const E=Math.floor(f/2);return[[p[0],p[0]+E],[p[0]+E,p[1]]]}if(f===1)return[p,null];const _=Math.floor(f/2)-1;return[[p[0],p[0]+_],[p[0]+_+1,p[1]]]}function Sn(p,u){if(!yn(u,p.length))return[1/0,1/0,-1/0,-1/0];const f=[1/0,1/0,-1/0,-1/0];for(let _=u[0];_<=u[1];++_)ua(f,p[_]);return f}function T(p){const u=[1/0,1/0,-1/0,-1/0];for(const f of p)for(const _ of f)ua(u,_);return u}function m(p){return p[0]!==-1/0&&p[1]!==-1/0&&p[2]!==1/0&&p[3]!==1/0}function y(p,u,f){if(!m(p)||!m(u))return NaN;let _=0,E=0;return p[2]<u[0]&&(_=u[0]-p[2]),p[0]>u[2]&&(_=p[0]-u[2]),p[1]>u[3]&&(E=p[1]-u[3]),p[3]<u[1]&&(E=u[1]-p[3]),f.distance([0,0],[_,E])}function P(p,u,f){const _=f.pointOnLine(u,p);return f.distance(p,_.point)}function j(p,u,f,_,E){const R=Math.min(P(p,[f,_],E),P(u,[f,_],E)),N=Math.min(P(f,[p,u],E),P(_,[p,u],E));return Math.min(R,N)}function re(p,u,f,_,E){if(!yn(u,p.length)||!yn(_,f.length))return 1/0;let R=1/0;for(let N=u[0];N<u[1];++N){const V=p[N],Q=p[N+1];for(let oe=_[0];oe<_[1];++oe){const de=f[oe],ve=f[oe+1];if(Ls(V,Q,de,ve))return 0;R=Math.min(R,j(V,Q,de,ve,E))}}return R}function ye(p,u,f,_,E){if(!yn(u,p.length)||!yn(_,f.length))return NaN;let R=1/0;for(let N=u[0];N<=u[1];++N)for(let V=_[0];V<=_[1];++V)if(R=Math.min(R,E.distance(p[N],f[V])),R===0)return R;return R}function Ae(p,u,f){if(po(p,u,!0))return 0;let _=1/0;for(const E of u){const R=E[0],N=E[E.length-1];if(R!==N&&(_=Math.min(_,P(p,[N,R],f)),_===0))return _;const V=f.pointOnLine(E,p);if(_=Math.min(_,f.distance(p,V.point)),_===0)return _}return _}function Ke(p,u,f,_){if(!yn(u,p.length))return NaN;for(let R=u[0];R<=u[1];++R)if(po(p[R],f,!0))return 0;let E=1/0;for(let R=u[0];R<u[1];++R){const N=p[R],V=p[R+1];for(const Q of f)for(let oe=0,de=Q.length,ve=de-1;oe<de;ve=oe++){const Fe=Q[ve],je=Q[oe];if(Ls(N,V,Fe,je))return 0;E=Math.min(E,j(N,V,Fe,je,_))}}return E}function gt(p,u){for(const f of p)for(const _ of f)if(po(_,u,!0))return!0;return!1}function rr(p,u,f,_=1/0){const E=T(p),R=T(u);if(_!==1/0&&y(E,R,f)>=_)return _;if(Zl(E,R)){if(gt(p,u))return 0}else if(gt(u,p))return 0;let N=1/0;for(const V of p)for(let Q=0,oe=V.length,de=oe-1;Q<oe;de=Q++){const ve=V[de],Fe=V[Q];for(const je of u)for(let Ve=0,Xe=je.length,st=Xe-1;Ve<Xe;st=Ve++){const yt=je[st],Vt=je[Ve];if(Ls(ve,Fe,yt,Vt))return 0;N=Math.min(N,j(ve,Fe,yt,Vt,f))}}return N}function fr(p,u,f,_,E,R){if(!R)return;const N=y(Sn(_,R),E,f);N<u&&p.push([N,R,[0,0]])}function zr(p,u,f,_,E,R,N){if(!R||!N)return;const V=y(Sn(_,R),Sn(E,N),f);V<u&&p.push([V,R,N])}function hn(p,u,f,_,E=1/0){let R=Math.min(_.distance(p[0],f[0][0]),E);if(R===0)return R;const N=new Qs([[0,[0,p.length-1],[0,0]]],sr),V=T(f);for(;N.length>0;){const Q=N.pop();if(Q[0]>=R)continue;const oe=Q[1],de=u?50:100;if(ln(oe)<=de){if(!yn(oe,p.length))return NaN;if(u){const ve=Ke(p,oe,f,_);if(isNaN(ve)||ve===0)return ve;R=Math.min(R,ve)}else for(let ve=oe[0];ve<=oe[1];++ve){const Fe=Ae(p[ve],f,_);if(R=Math.min(R,Fe),R===0)return 0}}else{const ve=ui(oe,u);fr(N,R,_,p,V,ve[0]),fr(N,R,_,p,V,ve[1])}}return R}function Mn(p,u,f,_,E,R=1/0){let N=Math.min(R,E.distance(p[0],f[0]));if(N===0)return N;const V=new Qs([[0,[0,p.length-1],[0,f.length-1]]],sr);for(;V.length>0;){const Q=V.pop();if(Q[0]>=N)continue;const oe=Q[1],de=Q[2],ve=u?50:100,Fe=_?50:100;if(ln(oe)<=ve&&ln(de)<=Fe){if(!yn(oe,p.length)&&yn(de,f.length))return NaN;let je;if(u&&_)je=re(p,oe,f,de,E),N=Math.min(N,je);else if(u&&!_){const Ve=p.slice(oe[0],oe[1]+1);for(let Xe=de[0];Xe<=de[1];++Xe)if(je=P(f[Xe],Ve,E),N=Math.min(N,je),N===0)return N}else if(!u&&_){const Ve=f.slice(de[0],de[1]+1);for(let Xe=oe[0];Xe<=oe[1];++Xe)if(je=P(p[Xe],Ve,E),N=Math.min(N,je),N===0)return N}else je=ye(p,oe,f,de,E),N=Math.min(N,je)}else{const je=ui(oe,u),Ve=ui(de,_);zr(V,N,E,p,f,je[0],Ve[0]),zr(V,N,E,p,f,je[0],Ve[1]),zr(V,N,E,p,f,je[1],Ve[0]),zr(V,N,E,p,f,je[1],Ve[1])}}return N}function $n(p){return p.type==="MultiPolygon"?p.coordinates.map((u=>({type:"Polygon",coordinates:u}))):p.type==="MultiLineString"?p.coordinates.map((u=>({type:"LineString",coordinates:u}))):p.type==="MultiPoint"?p.coordinates.map((u=>({type:"Point",coordinates:u}))):[p]}class An{constructor(u,f){this.type=qr,this.geojson=u,this.geometries=f}static parse(u,f){if(u.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(ts(u[1])){const _=u[1];if(_.type==="FeatureCollection")return new An(_,_.features.map((E=>$n(E.geometry))).flat());if(_.type==="Feature")return new An(_,$n(_.geometry));if("type"in _&&"coordinates"in _)return new An(_,$n(_))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(f,_){const E=f.geometry(),R=E.flat().map((Q=>dl([Q.x,Q.y],f.canonical)));if(E.length===0)return NaN;const N=new er(R[0][1]);let V=1/0;for(const Q of _){switch(Q.type){case"Point":V=Math.min(V,Mn(R,!1,[Q.coordinates],!1,N,V));break;case"LineString":V=Math.min(V,Mn(R,!1,Q.coordinates,!0,N,V));break;case"Polygon":V=Math.min(V,hn(R,!1,Q.coordinates,N,V))}if(V===0)return V}return V})(u,this.geometries);if(u.geometryType()==="LineString")return(function(f,_){const E=f.geometry(),R=E.flat().map((Q=>dl([Q.x,Q.y],f.canonical)));if(E.length===0)return NaN;const N=new er(R[0][1]);let V=1/0;for(const Q of _){switch(Q.type){case"Point":V=Math.min(V,Mn(R,!0,[Q.coordinates],!1,N,V));break;case"LineString":V=Math.min(V,Mn(R,!0,Q.coordinates,!0,N,V));break;case"Polygon":V=Math.min(V,hn(R,!0,Q.coordinates,N,V))}if(V===0)return V}return V})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(f,_){const E=f.geometry();if(E.length===0||E[0].length===0)return NaN;const R=qo(E,0).map((Q=>Q.map((oe=>oe.map((de=>dl([de.x,de.y],f.canonical))))))),N=new er(R[0][0][0][1]);let V=1/0;for(const Q of _)for(const oe of R){switch(Q.type){case"Point":V=Math.min(V,hn([Q.coordinates],!1,oe,N,V));break;case"LineString":V=Math.min(V,hn(Q.coordinates,!0,oe,N,V));break;case"Polygon":V=Math.min(V,rr(oe,Q.coordinates,N,V))}if(V===0)return V}return V})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class In{constructor(u){this.type=wn,this.key=u}static parse(u,f){if(u.length!==2)return f.error(`Expected 1 argument, but found ${u.length-1} instead.`);const _=u[1];return _==null?f.error("Global state property must be defined."):typeof _!="string"?f.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new In(_)}evaluate(u){var f;const _=(f=u.globals)===null||f===void 0?void 0:f.globalState;return _&&Object.keys(_).length!==0?Rt(_,this.key):null}eachChild(){}outputDefined(){return!1}}const ki={"==":rs,"!=":ks,">":ns,"<":Xl,">=":la,"<=":Yl,array:Ha,at:Yi,boolean:Ha,case:pt,coalesce:yi,collator:As,format:is,image:Ca,in:Sa,"index-of":se,interpolate:ri,"interpolate-hcl":ri,"interpolate-lab":ri,length:oo,let:Oa,literal:wa,match:Ge,number:Ha,"number-format":kl,object:Ha,slice:jt,step:Nr,string:Ha,"to-boolean":zo,"to-color":zo,"to-number":zo,"to-string":zo,var:Wa,within:xo,distance:An,"global-state":In};class xi{constructor(u,f,_,E){this.name=u,this.type=f,this._evaluate=_,this.args=E}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,f){const _=u[0],E=xi.definitions[_];if(!E)return f.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0);const R=Array.isArray(E)?E[0]:E.type,N=Array.isArray(E)?[[E[1],E[2]]]:E.overloads,V=N.filter((([oe])=>!Array.isArray(oe)||oe.length===u.length-1));let Q=null;for(const[oe,de]of V){Q=new Is(f.registry,gl,f.path,null,f.scope);const ve=[];let Fe=!1;for(let je=1;je<u.length;je++){const Ve=u[je],Xe=Array.isArray(oe)?oe[je-1]:oe.type,st=Q.parse(Ve,1+ve.length,Xe);if(!st){Fe=!0;break}ve.push(st)}if(!Fe)if(Array.isArray(oe)&&oe.length!==ve.length)Q.error(`Expected ${oe.length} arguments, but found ${ve.length} instead.`);else{for(let je=0;je<ve.length;je++){const Ve=Array.isArray(oe)?oe[je]:oe.type,Xe=ve[je];Q.concat(je+1).checkSubtype(Ve,Xe.type)}if(Q.errors.length===0)return new xi(_,R,de,ve)}}if(V.length===1)f.errors.push(...Q.errors);else{const oe=(V.length?V:N).map((([ve])=>{return Fe=ve,Array.isArray(Fe)?`(${Fe.map(fi).join(", ")})`:`(${fi(Fe.type)}...)`;var Fe})).join(" | "),de=[];for(let ve=1;ve<u.length;ve++){const Fe=f.parse(u[ve],1+de.length);if(!Fe)return null;de.push(fi(Fe.type))}f.error(`Expected arguments of type ${oe}, but found (${de.join(", ")}) instead.`)}return null}static register(u,f){xi.definitions=f;for(const _ in f)u[_]=xi}}function Ya(p,[u,f,_,E]){u=u.evaluate(p),f=f.evaluate(p),_=_.evaluate(p);const R=E?E.evaluate(p):1,N=On(u,f,_,R);if(N)throw new Li(N);return new gn(u/255,f/255,_/255,R,!1)}function Za(p,u){return p in u}function Ao(p,u){const f=u[p];return f===void 0?null:f}function Mo(p){return{type:p}}function gl(p){if(p instanceof Wa)return gl(p.boundExpression);if(p instanceof xi&&p.name==="error"||p instanceof As||p instanceof xo||p instanceof An||p instanceof In)return!1;const u=p instanceof zo||p instanceof Ha;let f=!0;return p.eachChild((_=>{f=u?f&&gl(_):f&&_ instanceof wa})),!!f&&Ll(p)&&as(p,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ll(p){if(p instanceof xi&&(p.name==="get"&&p.args.length===1||p.name==="feature-state"||p.name==="has"&&p.args.length===1||p.name==="properties"||p.name==="geometry-type"||p.name==="id"||/^filter-/.test(p.name))||p instanceof xo||p instanceof An)return!1;let u=!0;return p.eachChild((f=>{u&&!Ll(f)&&(u=!1)})),u}function Os(p){if(p instanceof xi&&p.name==="feature-state")return!1;let u=!0;return p.eachChild((f=>{u&&!Os(f)&&(u=!1)})),u}function as(p,u){if(p instanceof xi&&u.indexOf(p.name)>=0)return!1;let f=!0;return p.eachChild((_=>{f&&!as(_,u)&&(f=!1)})),f}function Ru(p){return{result:"success",value:p}}function os(p){return{result:"error",value:p}}function Aa(p){return p["property-type"]==="data-driven"||p["property-type"]==="cross-faded-data-driven"}function $o(p){return!!p.expression&&p.expression.parameters.indexOf("zoom")>-1}function yu(p){return!!p.expression&&p.expression.interpolated}function gi(p){return p instanceof Number?"number":p instanceof String?"string":p instanceof Boolean?"boolean":Array.isArray(p)?"array":p===null?"null":typeof p}function Rl(p){return typeof p=="object"&&p!==null&&!Array.isArray(p)&&bn(p)===Ki}function Du(p){return p}function lf(p,u){const f=p.stops&&typeof p.stops[0][0]=="object",_=f||!(f||p.property!==void 0),E=p.type||(yu(u)?"exponential":"interval"),R=(function(de){switch(de.type){case"color":return gn.parse;case"padding":return ti.parse;case"numberArray":return Ci.parse;case"colorArray":return hi.parse;default:return null}})(u);if(R&&((p=si({},p)).stops&&(p.stops=p.stops.map((de=>[de[0],R(de[1])]))),p.default=R(p.default?p.default:u.default)),p.colorSpace&&(N=p.colorSpace)!=="rgb"&&N!=="hcl"&&N!=="lab")throw new Error(`Unknown color space: "${p.colorSpace}"`);var N;const V=(function(de){switch(de){case"exponential":return th;case"interval":return Zh;case"categorical":return gm;case"identity":return uf;default:throw new Error(`Unknown function type "${de}"`)}})(E);let Q,oe;if(E==="categorical"){Q=Object.create(null);for(const de of p.stops)Q[de[0]]=de[1];oe=typeof p.stops[0][0]}if(f){const de={},ve=[];for(let Ve=0;Ve<p.stops.length;Ve++){const Xe=p.stops[Ve],st=Xe[0].zoom;de[st]===void 0&&(de[st]={zoom:st,type:p.type,property:p.property,default:p.default,stops:[]},ve.push(st)),de[st].stops.push([Xe[0].value,Xe[1]])}const Fe=[];for(const Ve of ve)Fe.push([de[Ve].zoom,lf(de[Ve],u)]);const je={name:"linear"};return{kind:"composite",interpolationType:je,interpolationFactor:ri.interpolationFactor.bind(void 0,je),zoomStops:Fe.map((Ve=>Ve[0])),evaluate:({zoom:Ve},Xe)=>th({stops:Fe,base:p.base},u,Ve).evaluate(Ve,Xe)}}if(_){const de=E==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:ri.interpolationFactor.bind(void 0,de),zoomStops:p.stops.map((ve=>ve[0])),evaluate:({zoom:ve})=>V(p,u,ve,Q,oe)}}return{kind:"source",evaluate(de,ve){const Fe=ve&&ve.properties?ve.properties[p.property]:void 0;return Fe===void 0?Gc(p.default,u.default):V(p,u,Fe,Q,oe)}}}function Gc(p,u,f){return p!==void 0?p:u!==void 0?u:f!==void 0?f:void 0}function gm(p,u,f,_,E){return Gc(typeof f===E?_[f]:void 0,p.default,u.default)}function Zh(p,u,f){if(gi(f)!=="number")return Gc(p.default,u.default);const _=p.stops.length;if(_===1||f<=p.stops[0][0])return p.stops[0][1];if(f>=p.stops[_-1][0])return p.stops[_-1][1];const E=or(p.stops.map((R=>R[0])),f);return p.stops[E][1]}function th(p,u,f){const _=p.base!==void 0?p.base:1;if(gi(f)!=="number")return Gc(p.default,u.default);const E=p.stops.length;if(E===1||f<=p.stops[0][0])return p.stops[0][1];if(f>=p.stops[E-1][0])return p.stops[E-1][1];const R=or(p.stops.map((de=>de[0])),f),N=(function(de,ve,Fe,je){const Ve=je-Fe,Xe=de-Fe;return Ve===0?0:ve===1?Xe/Ve:(Math.pow(ve,Xe)-1)/(Math.pow(ve,Ve)-1)})(f,_,p.stops[R][0],p.stops[R+1][0]),V=p.stops[R][1],Q=p.stops[R+1][1],oe=pi[u.type]||Du;return typeof V.evaluate=="function"?{evaluate(...de){const ve=V.evaluate.apply(void 0,de),Fe=Q.evaluate.apply(void 0,de);if(ve!==void 0&&Fe!==void 0)return oe(ve,Fe,N,p.colorSpace)}}:oe(V,Q,N,p.colorSpace)}function uf(p,u,f){switch(u.type){case"color":f=gn.parse(f);break;case"formatted":f=fn.fromString(f.toString());break;case"resolvedImage":f=ka.fromString(f.toString());break;case"padding":f=ti.parse(f);break;case"colorArray":f=hi.parse(f);break;case"numberArray":f=Ci.parse(f);break;default:gi(f)===u.type||u.type==="enum"&&u.values[f]||(f=void 0)}return Gc(f,p.default,u.default)}xi.register(ki,{error:[{kind:"error"},[cn],(p,[u])=>{throw new Li(u.evaluate(p))}],typeof:[cn,[wn],(p,[u])=>fi(bn(u.evaluate(p)))],"to-rgba":[_o(qr,4),[Gi],(p,[u])=>{const[f,_,E,R]=u.evaluate(p).rgb;return[255*f,255*_,255*E,R]}],rgb:[Gi,[qr,qr,qr],Ya],rgba:[Gi,[qr,qr,qr,qr],Ya],has:{type:Pn,overloads:[[[cn],(p,[u])=>Za(u.evaluate(p),p.properties())],[[cn,Ki],(p,[u,f])=>Za(u.evaluate(p),f.evaluate(p))]]},get:{type:wn,overloads:[[[cn],(p,[u])=>Ao(u.evaluate(p),p.properties())],[[cn,Ki],(p,[u,f])=>Ao(u.evaluate(p),f.evaluate(p))]]},"feature-state":[wn,[cn],(p,[u])=>Ao(u.evaluate(p),p.featureState||{})],properties:[Ki,[],p=>p.properties()],"geometry-type":[cn,[],p=>p.geometryType()],id:[wn,[],p=>p.id()],zoom:[qr,[],p=>p.globals.zoom],"heatmap-density":[qr,[],p=>p.globals.heatmapDensity||0],elevation:[qr,[],p=>p.globals.elevation||0],"line-progress":[qr,[],p=>p.globals.lineProgress||0],accumulated:[wn,[],p=>p.globals.accumulated===void 0?null:p.globals.accumulated],"+":[qr,Mo(qr),(p,u)=>{let f=0;for(const _ of u)f+=_.evaluate(p);return f}],"*":[qr,Mo(qr),(p,u)=>{let f=1;for(const _ of u)f*=_.evaluate(p);return f}],"-":{type:qr,overloads:[[[qr,qr],(p,[u,f])=>u.evaluate(p)-f.evaluate(p)],[[qr],(p,[u])=>-u.evaluate(p)]]},"/":[qr,[qr,qr],(p,[u,f])=>u.evaluate(p)/f.evaluate(p)],"%":[qr,[qr,qr],(p,[u,f])=>u.evaluate(p)%f.evaluate(p)],ln2:[qr,[],()=>Math.LN2],pi:[qr,[],()=>Math.PI],e:[qr,[],()=>Math.E],"^":[qr,[qr,qr],(p,[u,f])=>Math.pow(u.evaluate(p),f.evaluate(p))],sqrt:[qr,[qr],(p,[u])=>Math.sqrt(u.evaluate(p))],log10:[qr,[qr],(p,[u])=>Math.log(u.evaluate(p))/Math.LN10],ln:[qr,[qr],(p,[u])=>Math.log(u.evaluate(p))],log2:[qr,[qr],(p,[u])=>Math.log(u.evaluate(p))/Math.LN2],sin:[qr,[qr],(p,[u])=>Math.sin(u.evaluate(p))],cos:[qr,[qr],(p,[u])=>Math.cos(u.evaluate(p))],tan:[qr,[qr],(p,[u])=>Math.tan(u.evaluate(p))],asin:[qr,[qr],(p,[u])=>Math.asin(u.evaluate(p))],acos:[qr,[qr],(p,[u])=>Math.acos(u.evaluate(p))],atan:[qr,[qr],(p,[u])=>Math.atan(u.evaluate(p))],min:[qr,Mo(qr),(p,u)=>Math.min(...u.map((f=>f.evaluate(p))))],max:[qr,Mo(qr),(p,u)=>Math.max(...u.map((f=>f.evaluate(p))))],abs:[qr,[qr],(p,[u])=>Math.abs(u.evaluate(p))],round:[qr,[qr],(p,[u])=>{const f=u.evaluate(p);return f<0?-Math.round(-f):Math.round(f)}],floor:[qr,[qr],(p,[u])=>Math.floor(u.evaluate(p))],ceil:[qr,[qr],(p,[u])=>Math.ceil(u.evaluate(p))],"filter-==":[Pn,[cn,wn],(p,[u,f])=>p.properties()[u.value]===f.value],"filter-id-==":[Pn,[wn],(p,[u])=>p.id()===u.value],"filter-type-==":[Pn,[cn],(p,[u])=>p.geometryType()===u.value],"filter-<":[Pn,[cn,wn],(p,[u,f])=>{const _=p.properties()[u.value],E=f.value;return typeof _==typeof E&&_<E}],"filter-id-<":[Pn,[wn],(p,[u])=>{const f=p.id(),_=u.value;return typeof f==typeof _&&f<_}],"filter->":[Pn,[cn,wn],(p,[u,f])=>{const _=p.properties()[u.value],E=f.value;return typeof _==typeof E&&_>E}],"filter-id->":[Pn,[wn],(p,[u])=>{const f=p.id(),_=u.value;return typeof f==typeof _&&f>_}],"filter-<=":[Pn,[cn,wn],(p,[u,f])=>{const _=p.properties()[u.value],E=f.value;return typeof _==typeof E&&_<=E}],"filter-id-<=":[Pn,[wn],(p,[u])=>{const f=p.id(),_=u.value;return typeof f==typeof _&&f<=_}],"filter->=":[Pn,[cn,wn],(p,[u,f])=>{const _=p.properties()[u.value],E=f.value;return typeof _==typeof E&&_>=E}],"filter-id->=":[Pn,[wn],(p,[u])=>{const f=p.id(),_=u.value;return typeof f==typeof _&&f>=_}],"filter-has":[Pn,[wn],(p,[u])=>u.value in p.properties()],"filter-has-id":[Pn,[],p=>p.id()!==null&&p.id()!==void 0],"filter-type-in":[Pn,[_o(cn)],(p,[u])=>u.value.indexOf(p.geometryType())>=0],"filter-id-in":[Pn,[_o(wn)],(p,[u])=>u.value.indexOf(p.id())>=0],"filter-in-small":[Pn,[cn,_o(wn)],(p,[u,f])=>f.value.indexOf(p.properties()[u.value])>=0],"filter-in-large":[Pn,[cn,_o(wn)],(p,[u,f])=>(function(_,E,R,N){for(;R<=N;){const V=R+N>>1;if(E[V]===_)return!0;E[V]>_?N=V-1:R=V+1}return!1})(p.properties()[u.value],f.value,0,f.value.length-1)],all:{type:Pn,overloads:[[[Pn,Pn],(p,[u,f])=>u.evaluate(p)&&f.evaluate(p)],[Mo(Pn),(p,u)=>{for(const f of u)if(!f.evaluate(p))return!1;return!0}]]},any:{type:Pn,overloads:[[[Pn,Pn],(p,[u,f])=>u.evaluate(p)||f.evaluate(p)],[Mo(Pn),(p,u)=>{for(const f of u)if(f.evaluate(p))return!0;return!1}]]},"!":[Pn,[Pn],(p,[u])=>!u.evaluate(p)],"is-supported-script":[Pn,[cn],(p,[u])=>{const f=p.globals&&p.globals.isSupportedScript;return!f||f(u.evaluate(p))}],upcase:[cn,[cn],(p,[u])=>u.evaluate(p).toUpperCase()],downcase:[cn,[cn],(p,[u])=>u.evaluate(p).toLowerCase()],concat:[cn,Mo(wn),(p,u)=>u.map((f=>Js(f.evaluate(p)))).join("")],"resolved-locale":[cn,[Ua],(p,[u])=>u.evaluate(p).resolvedLocale()]});class wd{constructor(u,f){this.expression=u,this._warningHistory={},this._evaluator=new cl,this._defaultValue=f?(function(_){if(_.type==="color"&&Rl(_.default))return new gn(0,0,0,0);switch(_.type){case"color":return gn.parse(_.default)||null;case"padding":return ti.parse(_.default)||null;case"numberArray":return Ci.parse(_.default)||null;case"colorArray":return hi.parse(_.default)||null;case"variableAnchorOffsetCollection":return _n.parse(_.default)||null;case"projectionDefinition":return Zn.parse(_.default)||null;default:return _.default===void 0?null:_.default}})(f):null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(u,f,_,E,R,N){return this._evaluator.globals=u,this._evaluator.feature=f,this._evaluator.featureState=_,this._evaluator.canonical=E,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=N,this.expression.evaluate(this._evaluator)}evaluate(u,f,_,E,R,N){this._evaluator.globals=u,this._evaluator.feature=f||null,this._evaluator.featureState=_||null,this._evaluator.canonical=E,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=N||null;try{const V=this.expression.evaluate(this._evaluator);if(V==null||typeof V=="number"&&V!=V)return this._defaultValue;if(this._enumValues&&!(V in this._enumValues))throw new Li(`Expected value to be one of ${Object.keys(this._enumValues).map((Q=>JSON.stringify(Q))).join(", ")}, but found ${JSON.stringify(V)} instead.`);return V}catch(V){return this._warningHistory[V.message]||(this._warningHistory[V.message]=!0,typeof console<"u"&&console.warn(V.message)),this._defaultValue}}}function rh(p){return Array.isArray(p)&&p.length>0&&typeof p[0]=="string"&&p[0]in ki}function nh(p,u){const f=new Is(ki,gl,[],u?(function(E){const R={color:Gi,string:cn,number:qr,enum:cn,boolean:Pn,formatted:oa,padding:Di,numberArray:Ts,colorArray:Ra,projectionDefinition:pa,resolvedImage:bi,variableAnchorOffsetCollection:Ys};return E.type==="array"?_o(R[E.value]||wn,E.length):R[E.type]})(u):void 0),_=f.parse(p,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Ru(new wd(_,u)):os(f.errors)}class Sd{constructor(u,f){this.kind=u,this._styleExpression=f,this.isStateDependent=u!=="constant"&&!Os(f.expression),this.globalStateRefs=Ed(f.expression)}evaluateWithoutErrorHandling(u,f,_,E,R,N){return this._styleExpression.evaluateWithoutErrorHandling(u,f,_,E,R,N)}evaluate(u,f,_,E,R,N){return this._styleExpression.evaluate(u,f,_,E,R,N)}}class ih{constructor(u,f,_,E){this.kind=u,this.zoomStops=_,this._styleExpression=f,this.isStateDependent=u!=="camera"&&!Os(f.expression),this.globalStateRefs=Ed(f.expression),this.interpolationType=E}evaluateWithoutErrorHandling(u,f,_,E,R,N){return this._styleExpression.evaluateWithoutErrorHandling(u,f,_,E,R,N)}evaluate(u,f,_,E,R,N){return this._styleExpression.evaluate(u,f,_,E,R,N)}interpolationFactor(u,f,_){return this.interpolationType?ri.interpolationFactor(this.interpolationType,u,f,_):0}}function Kh(p,u){const f=nh(p,u);if(f.result==="error")return f;const _=f.value.expression,E=Ll(_);if(!E&&!Aa(u))return os([new Hn("","data expressions not supported")]);const R=as(_,["zoom"]);if(!R&&!$o(u))return os([new Hn("","zoom expressions not supported")]);const N=Cd(_);return N||R?N instanceof Hn?os([N]):N instanceof ri&&!yu(u)?os([new Hn("",'"interpolate" expressions cannot be used with this property')]):Ru(N?new ih(E?"camera":"composite",f.value,N.labels,N instanceof ri?N.interpolation:void 0):new Sd(E?"constant":"source",f.value)):os([new Hn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class cf{constructor(u,f){this._parameters=u,this._specification=f,si(this,lf(this._parameters,this._specification))}static deserialize(u){return new cf(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Cd(p){let u=null;if(p instanceof Oa)u=Cd(p.result);else if(p instanceof yi){for(const f of p.args)if(u=Cd(f),u)break}else(p instanceof Nr||p instanceof ri)&&p.input instanceof xi&&p.input.name==="zoom"&&(u=p);return u instanceof Hn||p.eachChild((f=>{const _=Cd(f);_ instanceof Hn?u=_:!u&&_?u=new Hn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&_&&u!==_&&(u=new Hn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function Ed(p,u=new Set){return p instanceof In&&u.add(p.key),p.eachChild((f=>{Ed(f,u)})),u}function Hc(p){if(p===!0||p===!1)return!0;if(!Array.isArray(p)||p.length===0)return!1;switch(p[0]){case"has":return p.length>=2&&p[1]!=="$id"&&p[1]!=="$type";case"in":return p.length>=3&&(typeof p[1]!="string"||Array.isArray(p[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return p.length!==3||Array.isArray(p[1])||Array.isArray(p[2]);case"any":case"all":for(const u of p.slice(1))if(!Hc(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const df={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ql(p){if(p==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Hc(p)||(p=ff(p));const u=nh(p,df);if(u.result==="error")throw new Error(u.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,_,E)=>u.value.evaluate(f,_,{},E),needGeometry:ym(p),getGlobalStateRefs:()=>Ed(u.value.expression)}}function Dy(p,u){return p<u?-1:p>u?1:0}function ym(p){if(!Array.isArray(p))return!1;if(p[0]==="within"||p[0]==="distance")return!0;for(let u=1;u<p.length;u++)if(ym(p[u]))return!0;return!1}function ff(p){if(!p)return!0;const u=p[0];return p.length<=1?u!=="any":u==="=="?Jh(p[1],p[2],"=="):u==="!="?hf(Jh(p[1],p[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Jh(p[1],p[2],u):u==="any"?(f=p.slice(1),["any"].concat(f.map(ff))):u==="all"?["all"].concat(p.slice(1).map(ff)):u==="none"?["all"].concat(p.slice(1).map(ff).map(hf)):u==="in"?vm(p[1],p.slice(2)):u==="!in"?hf(vm(p[1],p.slice(2))):u==="has"?bm(p[1]):u!=="!has"||hf(bm(p[1]));var f}function Jh(p,u,f){switch(p){case"$type":return[`filter-type-${f}`,u];case"$id":return[`filter-id-${f}`,u];default:return[`filter-${f}`,p,u]}}function vm(p,u){if(u.length===0)return!1;switch(p){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((f=>typeof f!=typeof u[0]))?["filter-in-large",p,["literal",u.sort(Dy)]]:["filter-in-small",p,["literal",u]]}}function bm(p){switch(p){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",p]}}function hf(p){return["!",p]}function vu(p){const u=typeof p;if(u==="number"||u==="boolean"||u==="string"||p==null)return JSON.stringify(p);if(Array.isArray(p)){let E="[";for(const R of p)E+=`${vu(R)},`;return`${E}]`}const f=Object.keys(p).sort();let _="{";for(let E=0;E<f.length;E++)_+=`${JSON.stringify(f[E])}:${vu(p[f[E]])},`;return`${_}}`}function yl(p){let u="";for(const f of Ir)u+=`/${vu(p[f])}`;return u}function Nu(p){const u=p.value;return u?[new Er(p.key,u,"constants have been deprecated as of v8")]:[]}function uo(p){return p instanceof Number||p instanceof String||p instanceof Boolean?p.valueOf():p}function ec(p){if(Array.isArray(p))return p.map(ec);if(p instanceof Object&&!(p instanceof Number||p instanceof String||p instanceof Boolean)){const u={};for(const f in p)u[f]=ec(p[f]);return u}return uo(p)}function Vo(p){const u=p.key,f=p.value,_=p.valueSpec||{},E=p.objectElementValidators||{},R=p.style,N=p.styleSpec,V=p.validateSpec;let Q=[];const oe=gi(f);if(oe!=="object")return[new Er(u,f,`object expected, ${oe} found`)];for(const de in f){const ve=de.split(".")[0],Fe=Rt(_,ve)||_["*"];let je;if(Rt(E,ve))je=E[ve];else if(Rt(_,ve))je=V;else if(E["*"])je=E["*"];else{if(!_["*"]){Q.push(new Er(u,f[de],`unknown property "${de}"`));continue}je=V}Q=Q.concat(je({key:(u&&`${u}.`)+de,value:f[de],valueSpec:Fe,style:R,styleSpec:N,object:f,objectKey:de,validateSpec:V},f))}for(const de in _)E[de]||_[de].required&&_[de].default===void 0&&f[de]===void 0&&Q.push(new Er(u,f,`missing required property "${de}"`));return Q}function el(p){const u=p.value,f=p.valueSpec,_=p.style,E=p.styleSpec,R=p.key,N=p.arrayElementValidator||p.validateSpec;if(gi(u)!=="array")return[new Er(R,u,`array expected, ${gi(u)} found`)];if(f.length&&u.length!==f.length)return[new Er(R,u,`array length ${f.length} expected, length ${u.length} found`)];if(f["min-length"]&&u.length<f["min-length"])return[new Er(R,u,`array length at least ${f["min-length"]} expected, length ${u.length} found`)];let V={type:f.value,values:f.values};E.$version<7&&(V.function=f.function),gi(f.value)==="object"&&(V=f.value);let Q=[];for(let oe=0;oe<u.length;oe++)Q=Q.concat(N({array:u,arrayIndex:oe,value:u[oe],valueSpec:V,validateSpec:p.validateSpec,style:_,styleSpec:E,key:`${R}[${oe}]`}));return Q}function pf(p){const u=p.key,f=p.value,_=p.valueSpec;let E=gi(f);return E==="number"&&f!=f&&(E="NaN"),E!=="number"?[new Er(u,f,`number expected, ${E} found`)]:"minimum"in _&&f<_.minimum?[new Er(u,f,`${f} is less than the minimum value ${_.minimum}`)]:"maximum"in _&&f>_.maximum?[new Er(u,f,`${f} is greater than the maximum value ${_.maximum}`)]:[]}function Td(p){const u=p.valueSpec,f=uo(p.value.type);let _,E,R,N={};const V=f!=="categorical"&&p.value.property===void 0,Q=!V,oe=gi(p.value.stops)==="array"&&gi(p.value.stops[0])==="array"&&gi(p.value.stops[0][0])==="object",de=Vo({key:p.key,value:p.value,valueSpec:p.styleSpec.function,validateSpec:p.validateSpec,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(je){if(f==="identity")return[new Er(je.key,je.value,'identity function may not have a "stops" property')];let Ve=[];const Xe=je.value;return Ve=Ve.concat(el({key:je.key,value:Xe,valueSpec:je.valueSpec,validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec,arrayElementValidator:ve})),gi(Xe)==="array"&&Xe.length===0&&Ve.push(new Er(je.key,Xe,"array must have at least one stop")),Ve},default:function(je){return je.validateSpec({key:je.key,value:je.value,valueSpec:u,validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec})}}});return f==="identity"&&V&&de.push(new Er(p.key,p.value,'missing required property "property"')),f==="identity"||p.value.stops||de.push(new Er(p.key,p.value,'missing required property "stops"')),f==="exponential"&&p.valueSpec.expression&&!yu(p.valueSpec)&&de.push(new Er(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(Q&&!Aa(p.valueSpec)?de.push(new Er(p.key,p.value,"property functions not supported")):V&&!$o(p.valueSpec)&&de.push(new Er(p.key,p.value,"zoom functions not supported"))),f!=="categorical"&&!oe||p.value.property!==void 0||de.push(new Er(p.key,p.value,'"property" property is required')),de;function ve(je){let Ve=[];const Xe=je.value,st=je.key;if(gi(Xe)!=="array")return[new Er(st,Xe,`array expected, ${gi(Xe)} found`)];if(Xe.length!==2)return[new Er(st,Xe,`array length 2 expected, length ${Xe.length} found`)];if(oe){if(gi(Xe[0])!=="object")return[new Er(st,Xe,`object expected, ${gi(Xe[0])} found`)];if(Xe[0].zoom===void 0)return[new Er(st,Xe,"object stop key must have zoom")];if(Xe[0].value===void 0)return[new Er(st,Xe,"object stop key must have value")];if(R&&R>uo(Xe[0].zoom))return[new Er(st,Xe[0].zoom,"stop zoom values must appear in ascending order")];uo(Xe[0].zoom)!==R&&(R=uo(Xe[0].zoom),E=void 0,N={}),Ve=Ve.concat(Vo({key:`${st}[0]`,value:Xe[0],valueSpec:{zoom:{}},validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec,objectElementValidators:{zoom:pf,value:Fe}}))}else Ve=Ve.concat(Fe({key:`${st}[0]`,value:Xe[0],validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec},Xe));return rh(ec(Xe[1]))?Ve.concat([new Er(`${st}[1]`,Xe[1],"expressions are not allowed in function stops.")]):Ve.concat(je.validateSpec({key:`${st}[1]`,value:Xe[1],valueSpec:u,validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec}))}function Fe(je,Ve){const Xe=gi(je.value),st=uo(je.value),yt=je.value!==null?je.value:Ve;if(_){if(Xe!==_)return[new Er(je.key,yt,`${Xe} stop domain type must match previous stop domain type ${_}`)]}else _=Xe;if(Xe!=="number"&&Xe!=="string"&&Xe!=="boolean")return[new Er(je.key,yt,"stop domain value must be a number, string, or boolean")];if(Xe!=="number"&&f!=="categorical"){let Vt=`number expected, ${Xe} found`;return Aa(u)&&f===void 0&&(Vt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Er(je.key,yt,Vt)]}return f!=="categorical"||Xe!=="number"||isFinite(st)&&Math.floor(st)===st?f!=="categorical"&&Xe==="number"&&E!==void 0&&st<E?[new Er(je.key,yt,"stop domain values must appear in ascending order")]:(E=st,f==="categorical"&&st in N?[new Er(je.key,yt,"stop domain values must be unique")]:(N[st]=!0,[])):[new Er(je.key,yt,`integer expected, found ${st}`)]}}function Wc(p){const u=(p.expressionContext==="property"?Kh:nh)(ec(p.value),p.valueSpec);if(u.result==="error")return u.value.map((_=>new Er(`${p.key}${_.key}`,p.value,_.message)));const f=u.value.expression||u.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!f.outputDefined())return[new Er(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!Os(f))return[new Er(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter"&&!Os(f))return[new Er(p.key,p.value,'"feature-state" data expressions are not supported with filters.')];if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!as(f,["zoom","feature-state"]))return[new Er(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!Ll(f))return[new Er(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ah(p){const u=p.key,f=p.value,_=gi(f);return _!=="string"?[new Er(u,f,`color expected, ${_} found`)]:gn.parse(String(f))?[]:[new Er(u,f,`color expected, "${f}" found`)]}function Pd(p){const u=p.key,f=p.value,_=p.valueSpec,E=[];return Array.isArray(_.values)?_.values.indexOf(uo(f))===-1&&E.push(new Er(u,f,`expected one of [${_.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(_.values).indexOf(uo(f))===-1&&E.push(new Er(u,f,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(f)} found`)),E}function oh(p){return Hc(ec(p.value))?Wc(si({},p,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_m(p)}function _m(p){const u=p.value,f=p.key;if(gi(u)!=="array")return[new Er(f,u,`array expected, ${gi(u)} found`)];const _=p.styleSpec;let E,R=[];if(u.length<1)return[new Er(f,u,"filter array must have at least 1 element")];switch(R=R.concat(Pd({key:`${f}[0]`,value:u[0],valueSpec:_.filter_operator,style:p.style,styleSpec:p.styleSpec})),uo(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&uo(u[1])==="$type"&&R.push(new Er(f,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&R.push(new Er(f,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(E=gi(u[1]),E!=="string"&&R.push(new Er(`${f}[1]`,u[1],`string expected, ${E} found`)));for(let N=2;N<u.length;N++)E=gi(u[N]),uo(u[1])==="$type"?R=R.concat(Pd({key:`${f}[${N}]`,value:u[N],valueSpec:_.geometry_type,style:p.style,styleSpec:p.styleSpec})):E!=="string"&&E!=="number"&&E!=="boolean"&&R.push(new Er(`${f}[${N}]`,u[N],`string, number, or boolean expected, ${E} found`));break;case"any":case"all":case"none":for(let N=1;N<u.length;N++)R=R.concat(_m({key:`${f}[${N}]`,value:u[N],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":E=gi(u[1]),u.length!==2?R.push(new Er(f,u,`filter array for "${u[0]}" operator must have 2 elements`)):E!=="string"&&R.push(new Er(`${f}[1]`,u[1],`string expected, ${E} found`))}return R}function mf(p,u){const f=p.key,_=p.validateSpec,E=p.style,R=p.styleSpec,N=p.value,V=p.objectKey,Q=R[`${u}_${p.layerType}`];if(!Q)return[];const oe=V.match(/^(.*)-transition$/);if(u==="paint"&&oe&&Q[oe[1]]&&Q[oe[1]].transition)return _({key:f,value:N,valueSpec:R.transition,style:E,styleSpec:R});const de=p.valueSpec||Q[V];if(!de)return[new Er(f,N,`unknown property "${V}"`)];let ve;if(gi(N)==="string"&&Aa(de)&&!de.tokens&&(ve=/^{([^}]+)}$/.exec(N)))return[new Er(f,N,`"${V}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ve[1])} }\`.`)];const Fe=[];return p.layerType==="symbol"&&(V==="text-field"&&E&&!E.glyphs&&Fe.push(new Er(f,N,'use of "text-field" requires a style "glyphs" property')),V==="text-font"&&Rl(ec(N))&&uo(N.type)==="identity"&&Fe.push(new Er(f,N,'"text-font" does not support identity functions'))),Fe.concat(_({key:p.key,value:N,valueSpec:de,style:E,styleSpec:R,expressionContext:"property",propertyType:u,propertyKey:V}))}function tc(p){return mf(p,"paint")}function Ou(p){return mf(p,"layout")}function Fs(p){let u=[];const f=p.value,_=p.key,E=p.style,R=p.styleSpec;if(gi(f)!=="object")return[new Er(_,f,`object expected, ${gi(f)} found`)];f.type||f.ref||u.push(new Er(_,f,'either "type" or "ref" is required'));let N=uo(f.type);const V=uo(f.ref);if(f.id){const Q=uo(f.id);for(let oe=0;oe<p.arrayIndex;oe++){const de=E.layers[oe];uo(de.id)===Q&&u.push(new Er(_,f.id,`duplicate layer id "${f.id}", previously used at line ${de.id.__line__}`))}}if("ref"in f){let Q;["type","source","source-layer","filter","layout"].forEach((oe=>{oe in f&&u.push(new Er(_,f[oe],`"${oe}" is prohibited for ref layers`))})),E.layers.forEach((oe=>{uo(oe.id)===V&&(Q=oe)})),Q?Q.ref?u.push(new Er(_,f.ref,"ref cannot reference another ref layer")):N=uo(Q.type):u.push(new Er(_,f.ref,`ref layer "${V}" not found`))}else if(N!=="background")if(f.source){const Q=E.sources&&E.sources[f.source],oe=Q&&uo(Q.type);Q?oe==="vector"&&N==="raster"?u.push(new Er(_,f.source,`layer "${f.id}" requires a raster source`)):oe!=="raster-dem"&&N==="hillshade"||oe!=="raster-dem"&&N==="color-relief"?u.push(new Er(_,f.source,`layer "${f.id}" requires a raster-dem source`)):oe==="raster"&&N!=="raster"?u.push(new Er(_,f.source,`layer "${f.id}" requires a vector source`)):oe!=="vector"||f["source-layer"]?oe==="raster-dem"&&N!=="hillshade"&&N!=="color-relief"?u.push(new Er(_,f.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):N!=="line"||!f.paint||!f.paint["line-gradient"]||oe==="geojson"&&Q.lineMetrics||u.push(new Er(_,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new Er(_,f,`layer "${f.id}" must specify a "source-layer"`)):u.push(new Er(_,f.source,`source "${f.source}" not found`))}else u.push(new Er(_,f,'missing required property "source"'));return u=u.concat(Vo({key:_,value:f,valueSpec:R.layer,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*":()=>[],type:()=>p.validateSpec({key:`${_}.type`,value:f.type,valueSpec:R.layer.type,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,object:f,objectKey:"type"}),filter:oh,layout:Q=>Vo({layer:f,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,validateSpec:Q.validateSpec,objectElementValidators:{"*":oe=>Ou(si({layerType:N},oe))}}),paint:Q=>Vo({layer:f,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,validateSpec:Q.validateSpec,objectElementValidators:{"*":oe=>tc(si({layerType:N},oe))}})}})),u}function bu(p){const u=p.value,f=p.key,_=gi(u);return _!=="string"?[new Er(f,u,`string expected, ${_} found`)]:[]}const sh={promoteId:function({key:p,value:u}){if(gi(u)==="string")return bu({key:p,value:u});{const f=[];for(const _ in u)f.push(...bu({key:`${p}.${_}`,value:u[_]}));return f}}};function xm(p){const u=p.value,f=p.key,_=p.styleSpec,E=p.style,R=p.validateSpec;if(!u.type)return[new Er(f,u,'"type" is required')];const N=uo(u.type);let V;switch(N){case"vector":case"raster":return V=Vo({key:f,value:u,valueSpec:_[`source_${N.replace("-","_")}`],style:p.style,styleSpec:_,objectElementValidators:sh,validateSpec:R}),V;case"raster-dem":return V=(function(Q){var oe;const de=(oe=Q.sourceName)!==null&&oe!==void 0?oe:"",ve=Q.value,Fe=Q.styleSpec,je=Fe.source_raster_dem,Ve=Q.style;let Xe=[];const st=gi(ve);if(ve===void 0)return Xe;if(st!=="object")return Xe.push(new Er("source_raster_dem",ve,`object expected, ${st} found`)),Xe;const yt=uo(ve.encoding)==="custom",Vt=["redFactor","greenFactor","blueFactor","baseShift"],Lt=Q.value.encoding?`"${Q.value.encoding}"`:"Default";for(const ze in ve)!yt&&Vt.includes(ze)?Xe.push(new Er(ze,ve[ze],`In "${de}": "${ze}" is only valid when "encoding" is set to "custom". ${Lt} encoding found`)):je[ze]?Xe=Xe.concat(Q.validateSpec({key:ze,value:ve[ze],valueSpec:je[ze],validateSpec:Q.validateSpec,style:Ve,styleSpec:Fe})):Xe.push(new Er(ze,ve[ze],`unknown property "${ze}"`));return Xe})({sourceName:f,value:u,style:p.style,styleSpec:_,validateSpec:R}),V;case"geojson":if(V=Vo({key:f,value:u,valueSpec:_.source_geojson,style:E,styleSpec:_,validateSpec:R,objectElementValidators:sh}),u.cluster)for(const Q in u.clusterProperties){const[oe,de]=u.clusterProperties[Q],ve=typeof oe=="string"?[oe,["accumulated"],["get",Q]]:oe;V.push(...Wc({key:`${f}.${Q}.map`,value:de,expressionContext:"cluster-map"})),V.push(...Wc({key:`${f}.${Q}.reduce`,value:ve,expressionContext:"cluster-reduce"}))}return V;case"video":return Vo({key:f,value:u,valueSpec:_.source_video,style:E,validateSpec:R,styleSpec:_});case"image":return Vo({key:f,value:u,valueSpec:_.source_image,style:E,validateSpec:R,styleSpec:_});case"canvas":return[new Er(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pd({key:`${f}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function wm(p){const u=p.value,f=p.styleSpec,_=f.light,E=p.style;let R=[];const N=gi(u);if(u===void 0)return R;if(N!=="object")return R=R.concat([new Er("light",u,`object expected, ${N} found`)]),R;for(const V in u){const Q=V.match(/^(.*)-transition$/);R=R.concat(Q&&_[Q[1]]&&_[Q[1]].transition?p.validateSpec({key:V,value:u[V],valueSpec:f.transition,validateSpec:p.validateSpec,style:E,styleSpec:f}):_[V]?p.validateSpec({key:V,value:u[V],valueSpec:_[V],validateSpec:p.validateSpec,style:E,styleSpec:f}):[new Er(V,u[V],`unknown property "${V}"`)])}return R}function Id(p){const u=p.value,f=p.styleSpec,_=f.sky,E=p.style,R=gi(u);if(u===void 0)return[];if(R!=="object")return[new Er("sky",u,`object expected, ${R} found`)];let N=[];for(const V in u)N=N.concat(_[V]?p.validateSpec({key:V,value:u[V],valueSpec:_[V],style:E,styleSpec:f}):[new Er(V,u[V],`unknown property "${V}"`)]);return N}function Qh(p){const u=p.value,f=p.styleSpec,_=f.terrain,E=p.style;let R=[];const N=gi(u);if(u===void 0)return R;if(N!=="object")return R=R.concat([new Er("terrain",u,`object expected, ${N} found`)]),R;for(const V in u)R=R.concat(_[V]?p.validateSpec({key:V,value:u[V],valueSpec:_[V],validateSpec:p.validateSpec,style:E,styleSpec:f}):[new Er(V,u[V],`unknown property "${V}"`)]);return R}function lh(p){let u=[];const f=p.value,_=p.key;if(Array.isArray(f)){const E=[],R=[];for(const N in f)f[N].id&&E.includes(f[N].id)&&u.push(new Er(_,f,`all the sprites' ids must be unique, but ${f[N].id} is duplicated`)),E.push(f[N].id),f[N].url&&R.includes(f[N].url)&&u.push(new Er(_,f,`all the sprites' URLs must be unique, but ${f[N].url} is duplicated`)),R.push(f[N].url),u=u.concat(Vo({key:`${_}[${N}]`,value:f[N],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:p.validateSpec}));return u}return bu({key:_,value:f})}function Sm(p){return u=p.value,u&&u.constructor===Object?[]:[new Er(p.key,p.value,`object expected, ${gi(p.value)} found`)];var u}const gf={"*":()=>[],array:el,boolean:function(p){const u=p.value,f=p.key,_=gi(u);return _!=="boolean"?[new Er(f,u,`boolean expected, ${_} found`)]:[]},number:pf,color:ah,constants:Nu,enum:Pd,filter:oh,function:Td,layer:Fs,object:Vo,source:xm,light:wm,sky:Id,terrain:Qh,projection:function(p){const u=p.value,f=p.styleSpec,_=f.projection,E=p.style,R=gi(u);if(u===void 0)return[];if(R!=="object")return[new Er("projection",u,`object expected, ${R} found`)];let N=[];for(const V in u)N=N.concat(_[V]?p.validateSpec({key:V,value:u[V],valueSpec:_[V],style:E,styleSpec:f}):[new Er(V,u[V],`unknown property "${V}"`)]);return N},projectionDefinition:function(p){const u=p.key;let f=p.value;f=f instanceof String?f.valueOf():f;const _=gi(f);return _!=="array"||(function(E){return Array.isArray(E)&&E.length===3&&typeof E[0]=="string"&&typeof E[1]=="string"&&typeof E[2]=="number"})(f)||(function(E){return!!["interpolate","step","literal"].includes(E[0])})(f)?["array","string"].includes(_)?[]:[new Er(u,f,`projection expected, invalid type "${_}" found`)]:[new Er(u,f,`projection expected, invalid array ${JSON.stringify(f)} found`)]},string:bu,formatted:function(p){return bu(p).length===0?[]:Wc(p)},resolvedImage:function(p){return bu(p).length===0?[]:Wc(p)},padding:function(p){const u=p.key,f=p.value;if(gi(f)==="array"){if(f.length<1||f.length>4)return[new Er(u,f,`padding requires 1 to 4 values; ${f.length} values found`)];const _={type:"number"};let E=[];for(let R=0;R<f.length;R++)E=E.concat(p.validateSpec({key:`${u}[${R}]`,value:f[R],validateSpec:p.validateSpec,valueSpec:_}));return E}return pf({key:u,value:f,valueSpec:{}})},numberArray:function(p){const u=p.key,f=p.value;if(gi(f)==="array"){const _={type:"number"};if(f.length<1)return[new Er(u,f,"array length at least 1 expected, length 0 found")];let E=[];for(let R=0;R<f.length;R++)E=E.concat(p.validateSpec({key:`${u}[${R}]`,value:f[R],validateSpec:p.validateSpec,valueSpec:_}));return E}return pf({key:u,value:f,valueSpec:{}})},colorArray:function(p){const u=p.key,f=p.value;if(gi(f)==="array"){if(f.length<1)return[new Er(u,f,"array length at least 1 expected, length 0 found")];let _=[];for(let E=0;E<f.length;E++)_=_.concat(ah({key:`${u}[${E}]`,value:f[E]}));return _}return ah({key:u,value:f})},variableAnchorOffsetCollection:function(p){const u=p.key,f=p.value,_=gi(f),E=p.styleSpec;if(_!=="array"||f.length<1||f.length%2!=0)return[new Er(u,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let R=[];for(let N=0;N<f.length;N+=2)R=R.concat(Pd({key:`${u}[${N}]`,value:f[N],valueSpec:E.layout_symbol["text-anchor"]})),R=R.concat(el({key:`${u}[${N+1}]`,value:f[N+1],valueSpec:{length:2,value:"number"},validateSpec:p.validateSpec,style:p.style,styleSpec:E}));return R},sprite:lh,state:Sm};function Xc(p){const u=p.value,f=p.valueSpec,_=p.styleSpec;return p.validateSpec=Xc,f.expression&&Rl(uo(u))?Td(p):f.expression&&rh(ec(u))?Wc(p):f.type&&gf[f.type]?gf[f.type](p):Vo(si({},p,{valueSpec:f.type?_[f.type]:f}))}function kd(p){const u=p.value,f=p.key,_=bu(p);return _.length||(u.indexOf("{fontstack}")===-1&&_.push(new Er(f,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&_.push(new Er(f,u,'"glyphs" url must include a "{range}" token'))),_}function eu(p,u=Et){let f=[];return f=f.concat(Xc({key:"",value:p,valueSpec:u.$root,styleSpec:u,style:p,validateSpec:Xc,objectElementValidators:{glyphs:kd,"*":()=>[]}})),p.constants&&(f=f.concat(Nu({key:"constants",value:p.constants}))),$(f)}function tu(p){return function(u){return p({...u,validateSpec:Xc})}}function $(p){return[].concat(p).sort(((u,f)=>u.line-f.line))}function Y(p){return function(...u){return $(p.apply(this,u))}}eu.source=Y(tu(xm)),eu.sprite=Y(tu(lh)),eu.glyphs=Y(tu(kd)),eu.light=Y(tu(wm)),eu.sky=Y(tu(Id)),eu.terrain=Y(tu(Qh)),eu.state=Y(tu(Sm)),eu.layer=Y(tu(Fs)),eu.filter=Y(tu(oh)),eu.paintProperty=Y(tu(tc)),eu.layoutProperty=Y(tu(Ou));const he=eu,Ee=he.light,He=he.sky,Je=he.paintProperty,et=he.layoutProperty;function it(p,u){let f=!1;if(u&&u.length)for(const _ of u)p.fire(new wt(new Error(_.message))),f=!0;return f}class dt{constructor(u,f,_){const E=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const N=new Int32Array(this.arrayBuffer);u=N[0],this.d=(f=N[1])+2*(_=N[2]);for(let Q=0;Q<this.d*this.d;Q++){const oe=N[3+Q],de=N[3+Q+1];E.push(oe===de?null:N.subarray(oe,de))}const V=N[3+E.length+1];this.keys=N.subarray(N[3+E.length],V),this.bboxes=N.subarray(V),this.insert=this._insertReadonly}else{this.d=f+2*_;for(let N=0;N<this.d*this.d;N++)E.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=_,this.scale=f/u,this.uid=0;const R=_/f*u;this.min=-R,this.max=u+R}insert(u,f,_,E,R){this._forEachCell(f,_,E,R,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(E),this.bboxes.push(R)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,f,_,E,R,N){this.cells[R].push(N)}query(u,f,_,E,R){const N=this.min,V=this.max;if(u<=N&&f<=N&&V<=_&&V<=E&&!R)return Array.prototype.slice.call(this.keys);{const Q=[];return this._forEachCell(u,f,_,E,this._queryCell,Q,{},R),Q}}_queryCell(u,f,_,E,R,N,V,Q){const oe=this.cells[R];if(oe!==null){const de=this.keys,ve=this.bboxes;for(let Fe=0;Fe<oe.length;Fe++){const je=oe[Fe];if(V[je]===void 0){const Ve=4*je;(Q?Q(ve[Ve+0],ve[Ve+1],ve[Ve+2],ve[Ve+3]):u<=ve[Ve+2]&&f<=ve[Ve+3]&&_>=ve[Ve+0]&&E>=ve[Ve+1])?(V[je]=!0,N.push(de[je])):V[je]=!1}}}}_forEachCell(u,f,_,E,R,N,V,Q){const oe=this._convertToCellCoord(u),de=this._convertToCellCoord(f),ve=this._convertToCellCoord(_),Fe=this._convertToCellCoord(E);for(let je=oe;je<=ve;je++)for(let Ve=de;Ve<=Fe;Ve++){const Xe=this.d*Ve+je;if((!Q||Q(this._convertFromCellCoord(je),this._convertFromCellCoord(Ve),this._convertFromCellCoord(je+1),this._convertFromCellCoord(Ve+1)))&&R.call(this,u,f,_,E,Xe,N,V,Q))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,f=3+this.cells.length+1+1;let _=0;for(let N=0;N<this.cells.length;N++)_+=this.cells[N].length;const E=new Int32Array(f+_+this.keys.length+this.bboxes.length);E[0]=this.extent,E[1]=this.n,E[2]=this.padding;let R=f;for(let N=0;N<u.length;N++){const V=u[N];E[3+N]=R,E.set(V,R),R+=V.length}return E[3+u.length]=R,E.set(this.keys,R),R+=this.keys.length,E[3+u.length+1]=R,E.set(this.bboxes,R),R+=this.bboxes.length,E.buffer}static serialize(u,f){const _=u.toArrayBuffer();return f&&f.push(_),{buffer:_}}static deserialize(u){return new dt(u.buffer)}}const bt={};function _t(p,u,f={}){if(bt[p])throw new Error(`${p} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:p,writeable:!1}),bt[p]={klass:u,omit:f.omit||[],shallow:f.shallow||[]}}_t("Object",Object),_t("Set",Set),_t("TransferableGridIndex",dt),_t("Color",gn),_t("Error",Error),_t("AJAXError",rt),_t("ResolvedImage",ka),_t("StylePropertyFunction",cf),_t("StyleExpression",wd,{omit:["_evaluator"]}),_t("ZoomDependentExpression",ih),_t("ZoomConstantExpression",Sd),_t("CompoundExpression",xi,{omit:["_evaluate"]});for(const p in ki)ki[p]._classRegistryKey||_t(`Expression_${p}`,ki[p]);function Sr(p){return p&&typeof ArrayBuffer<"u"&&(p instanceof ArrayBuffer||p.constructor&&p.constructor.name==="ArrayBuffer")}function xt(p){return p.$name||p.constructor._classRegistryKey}function ir(p){return!(function(u){if(u===null||typeof u!="object")return!1;const f=xt(u);return!(!f||f==="Object")})(p)&&(p==null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob||p instanceof Error||Sr(p)||hr(p)||ArrayBuffer.isView(p)||p instanceof ImageData)}function cr(p,u){if(ir(p))return(Sr(p)||hr(p))&&u&&u.push(p),ArrayBuffer.isView(p)&&u&&u.push(p.buffer),p instanceof ImageData&&u&&u.push(p.data.buffer),p;if(Array.isArray(p)){const R=[];for(const N of p)R.push(cr(N,u));return R}if(typeof p!="object")throw new Error("can't serialize object of type "+typeof p);const f=xt(p);if(!f)throw new Error(`can't serialize object of unregistered class ${p.constructor.name}`);if(!bt[f])throw new Error(`${f} is not registered.`);const{klass:_}=bt[f],E=_.serialize?_.serialize(p,u):{};if(_.serialize){if(u&&E===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const R in p){if(!p.hasOwnProperty(R)||bt[f].omit.indexOf(R)>=0)continue;const N=p[R];E[R]=bt[f].shallow.indexOf(R)>=0?N:cr(N,u)}p instanceof Error&&(E.message=p.message)}if(E.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(E.$name=f),E}function Dr(p){if(ir(p))return p;if(Array.isArray(p))return p.map(Dr);if(typeof p!="object")throw new Error("can't deserialize object of type "+typeof p);const u=xt(p)||"Object";if(!bt[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:f}=bt[u];if(!f)throw new Error(`can't deserialize unregistered class ${u}`);if(f.deserialize)return f.deserialize(p);const _=Object.create(f.prototype);for(const E of Object.keys(p)){if(E==="$name")continue;const R=p[E];_[E]=bt[u].shallow.indexOf(E)>=0?R:Dr(R)}return _}class xr{constructor(){this.first=!0}update(u,f){const _=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=f),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=_,!0))}}const yr={"Latin-1 Supplement":p=>p>=128&&p<=255,"Hangul Jamo":p=>p>=4352&&p<=4607,Khmer:p=>p>=6016&&p<=6143,"General Punctuation":p=>p>=8192&&p<=8303,"Letterlike Symbols":p=>p>=8448&&p<=8527,"Number Forms":p=>p>=8528&&p<=8591,"Miscellaneous Technical":p=>p>=8960&&p<=9215,"Control Pictures":p=>p>=9216&&p<=9279,"Optical Character Recognition":p=>p>=9280&&p<=9311,"Enclosed Alphanumerics":p=>p>=9312&&p<=9471,"Geometric Shapes":p=>p>=9632&&p<=9727,"Miscellaneous Symbols":p=>p>=9728&&p<=9983,"Miscellaneous Symbols and Arrows":p=>p>=11008&&p<=11263,"Ideographic Description Characters":p=>p>=12272&&p<=12287,"CJK Symbols and Punctuation":p=>p>=12288&&p<=12351,Hiragana:p=>p>=12352&&p<=12447,Katakana:p=>p>=12448&&p<=12543,Kanbun:p=>p>=12688&&p<=12703,"CJK Strokes":p=>p>=12736&&p<=12783,"Enclosed CJK Letters and Months":p=>p>=12800&&p<=13055,"CJK Compatibility":p=>p>=13056&&p<=13311,"Yijing Hexagram Symbols":p=>p>=19904&&p<=19967,"CJK Unified Ideographs":p=>p>=19968&&p<=40959,"Hangul Syllables":p=>p>=44032&&p<=55215,"Private Use Area":p=>p>=57344&&p<=63743,"Vertical Forms":p=>p>=65040&&p<=65055,"CJK Compatibility Forms":p=>p>=65072&&p<=65103,"Small Form Variants":p=>p>=65104&&p<=65135,"Halfwidth and Fullwidth Forms":p=>p>=65280&&p<=65519};function Fr(p){for(const u of p)if(zn(u.charCodeAt(0)))return!0;return!1}function an(p){for(const u of p)if(!Fn(u.charCodeAt(0)))return!1;return!0}function Zr(p){const u=p.map((f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch{return null}})).filter((f=>f));return new RegExp(u.join("|"),"u")}const Wn=Zr(["Arab","Dupl","Mong","Ougr","Syrc"]);function Fn(p){return!Wn.test(String.fromCodePoint(p))}const wi=Zr(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function zn(p){return!(p!==746&&p!==747&&(p<4352||!(yr["CJK Compatibility Forms"](p)&&!(p>=65097&&p<=65103)||yr["CJK Compatibility"](p)||yr["CJK Strokes"](p)||!(!yr["CJK Symbols and Punctuation"](p)||p>=12296&&p<=12305||p>=12308&&p<=12319||p===12336)||yr["Enclosed CJK Letters and Months"](p)||yr["Ideographic Description Characters"](p)||yr.Kanbun(p)||yr.Katakana(p)&&p!==12540||!(!yr["Halfwidth and Fullwidth Forms"](p)||p===65288||p===65289||p===65293||p>=65306&&p<=65310||p===65339||p===65341||p===65343||p>=65371&&p<=65503||p===65507||p>=65512&&p<=65519)||!(!yr["Small Form Variants"](p)||p>=65112&&p<=65118||p>=65123&&p<=65126)||yr["Vertical Forms"](p)||yr["Yijing Hexagram Symbols"](p)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(p))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(p))||wi.test(String.fromCodePoint(p)))))}function Bi(p){return!(zn(p)||(function(u){return!!(yr["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||yr["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||yr["Letterlike Symbols"](u)||yr["Number Forms"](u)||yr["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||yr["Control Pictures"](u)&&u!==9251||yr["Optical Character Recognition"](u)||yr["Enclosed Alphanumerics"](u)||yr["Geometric Shapes"](u)||yr["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||yr["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||yr["CJK Symbols and Punctuation"](u)||yr.Katakana(u)||yr["Private Use Area"](u)||yr["CJK Compatibility Forms"](u)||yr["Small Form Variants"](u)||yr["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(p))}const Lo=Zr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function vi(p){return Lo.test(String.fromCodePoint(p))}function Vn(p,u){return!(!u&&vi(p)||p>=2304&&p<=3583||p>=3840&&p<=4255||yr.Khmer(p))}function vn(p){for(const u of p)if(vi(u.charCodeAt(0)))return!0;return!1}const ya=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(p){this.pluginStatus=p.pluginStatus,this.pluginURL=p.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(p){if(ya.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=p.applyArabicShaping,this.processBidirectionalText=p.processBidirectionalText,this.processStyledBidirectionalText=p.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(p,u){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(p.pluginStatus!=="loading")return this.setState(p),p;const f=p.pluginURL,_=new Promise((R=>{this.loadScriptResolve=R}));u(f);const E=new Promise((R=>setTimeout((()=>R()),this.TIMEOUT)));if(yield Promise.race([_,E]),this.isParsed()){const R={pluginStatus:"loaded",pluginURL:f};return this.setState(R),R}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${f}`)}))}};class Dn{constructor(u,f){this.zoom=u,f?(this.now=f.now||0,this.fadeDuration=f.fadeDuration||0,this.zoomHistory=f.zoomHistory||new xr,this.transition=f.transition||{},this.globalState=f.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xr,this.transition={},this.globalState={})}isSupportedScript(u){return(function(f,_){for(const E of f)if(!Vn(E.charCodeAt(0),_))return!1;return!0})(u,ya.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,f=u-Math.floor(u),_=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*f}}}class Ni{constructor(u,f){this.property=u,this.value=f,this.expression=(function(_,E){if(Rl(_))return new cf(_,E);if(rh(_)){const R=Kh(_,E);if(R.result==="error")throw new Error(R.value.map((N=>`${N.key}: ${N.message}`)).join(", "));return R.value}{let R=_;return E.type==="color"&&typeof _=="string"?R=gn.parse(_):E.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?E.type!=="numberArray"||typeof _!="number"&&!Array.isArray(_)?E.type!=="colorArray"||typeof _!="string"&&!Array.isArray(_)?E.type==="variableAnchorOffsetCollection"&&Array.isArray(_)?R=_n.parse(_):E.type==="projectionDefinition"&&typeof _=="string"&&(R=Zn.parse(_)):R=hi.parse(_):R=Ci.parse(_):R=ti.parse(_),{globalStateRefs:new Set,kind:"constant",evaluate:()=>R}}})(f===void 0?u.specification.default:f,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,f,_){return this.property.possiblyEvaluate(this,u,f,_)}}class va{constructor(u){this.property=u,this.value=new Ni(u,void 0)}transitioned(u,f){return new Bs(this.property,this.value,f,Qe({},u.transition,this.transition),u.now)}untransitioned(){return new Bs(this.property,this.value,null,{},0)}}class Uo{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return $e(this._values[u].value.value)}setValue(u,f){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new va(this._values[u].property)),this._values[u].value=new Ni(this._values[u].property,f===null?void 0:$e(f))}getTransition(u){return $e(this._values[u].transition)}setTransition(u,f){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new va(this._values[u].property)),this._values[u].transition=$e(f)||void 0}serialize(){const u={};for(const f of Object.keys(this._values)){const _=this.getValue(f);_!==void 0&&(u[f]=_);const E=this.getTransition(f);E!==void 0&&(u[`${f}-transition`]=E)}return u}transitioned(u,f){const _=new co(this._properties);for(const E of Object.keys(this._values))_._values[E]=this._values[E].transitioned(u,f._values[E]);return _}untransitioned(){const u=new co(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].untransitioned();return u}}class Bs{constructor(u,f,_,E,R){this.property=u,this.value=f,this.begin=R+E.delay||0,this.end=this.begin+E.duration||0,u.specification.transition&&(E.delay||E.duration)&&(this.prior=_)}possiblyEvaluate(u,f,_){const E=u.now||0,R=this.value.possiblyEvaluate(u,f,_),N=this.prior;if(N){if(E>this.end)return this.prior=null,R;if(this.value.isDataDriven())return this.prior=null,R;if(E<this.begin)return N.possiblyEvaluate(u,f,_);{const V=(E-this.begin)/(this.end-this.begin);return this.property.interpolate(N.possiblyEvaluate(u,f,_),R,Le(V))}}return R}}class co{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,f,_){const E=new mo(this._properties);for(const R of Object.keys(this._values))E._values[R]=this._values[R].possiblyEvaluate(u,f,_);return E}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class zs{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return $e(this._values[u].value)}setValue(u,f){this._values[u]=new Ni(this._values[u].property,f===null?void 0:$e(f))}serialize(){const u={};for(const f of Object.keys(this._values)){const _=this.getValue(f);_!==void 0&&(u[f]=_)}return u}possiblyEvaluate(u,f,_){const E=new mo(this._properties);for(const R of Object.keys(this._values))E._values[R]=this._values[R].possiblyEvaluate(u,f,_);return E}}class Ka{constructor(u,f,_){this.property=u,this.value=f,this.parameters=_}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,f,_,E){return this.property.evaluate(this.value,this.parameters,u,f,_,E)}}class mo{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Jr{constructor(u){this.specification=u}possiblyEvaluate(u,f){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(f)}interpolate(u,f,_){const E=pi[this.specification.type];return E?E(u,f,_):u}}class pn{constructor(u,f){this.specification=u,this.overrides=f}possiblyEvaluate(u,f,_,E){return new Ka(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(f,null,{},_,E)}:u.expression,f)}interpolate(u,f,_){if(u.value.kind!=="constant"||f.value.kind!=="constant")return u;if(u.value.value===void 0||f.value.value===void 0)return new Ka(this,{kind:"constant",value:void 0},u.parameters);const E=pi[this.specification.type];if(E){const R=E(u.value.value,f.value.value,_);return new Ka(this,{kind:"constant",value:R},u.parameters)}return u}evaluate(u,f,_,E,R,N){return u.kind==="constant"?u.value:u.evaluate(f,_,E,R,N)}}class Ba extends pn{possiblyEvaluate(u,f,_,E){if(u.value===void 0)return new Ka(this,{kind:"constant",value:void 0},f);if(u.expression.kind==="constant"){const R=u.expression.evaluate(f,null,{},_,E),N=u.property.specification.type==="resolvedImage"&&typeof R!="string"?R.name:R,V=this._calculate(N,N,N,f);return new Ka(this,{kind:"constant",value:V},f)}if(u.expression.kind==="camera"){const R=this._calculate(u.expression.evaluate({zoom:f.zoom-1}),u.expression.evaluate({zoom:f.zoom}),u.expression.evaluate({zoom:f.zoom+1}),f);return new Ka(this,{kind:"constant",value:R},f)}return new Ka(this,u.expression,f)}evaluate(u,f,_,E,R,N){if(u.kind==="source"){const V=u.evaluate(f,_,E,R,N);return this._calculate(V,V,V,f)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(f.zoom)-1},_,E),u.evaluate({zoom:Math.floor(f.zoom)},_,E),u.evaluate({zoom:Math.floor(f.zoom)+1},_,E),f):u.value}_calculate(u,f,_,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:u,to:f}:{from:_,to:f}}interpolate(u){return u}}class ra{constructor(u){this.specification=u}possiblyEvaluate(u,f,_,E){if(u.value!==void 0){if(u.expression.kind==="constant"){const R=u.expression.evaluate(f,null,{},_,E);return this._calculate(R,R,R,f)}return this._calculate(u.expression.evaluate(new Dn(Math.floor(f.zoom-1),f)),u.expression.evaluate(new Dn(Math.floor(f.zoom),f)),u.expression.evaluate(new Dn(Math.floor(f.zoom+1),f)),f)}}_calculate(u,f,_,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:u,to:f}:{from:_,to:f}}interpolate(u){return u}}class wo{constructor(u){this.specification=u}possiblyEvaluate(u,f,_,E){return!!u.expression.evaluate(f,null,{},_,E)}interpolate(){return!1}}class za{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in u){const _=u[f];_.specification.overridable&&this.overridableProperties.push(f);const E=this.defaultPropertyValues[f]=new Ni(_,void 0),R=this.defaultTransitionablePropertyValues[f]=new va(_);this.defaultTransitioningPropertyValues[f]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=E.possiblyEvaluate({})}}}_t("DataDrivenProperty",pn),_t("DataConstantProperty",Jr),_t("CrossFadedDataDrivenProperty",Ba),_t("CrossFadedProperty",ra),_t("ColorRampProperty",wo);const go="-transition";class ca extends Xt{constructor(u,f){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=Ql(u.filter)),f.layout&&(this._unevaluatedLayout=new zs(f.layout)),f.paint)){this._transitionablePaint=new Uo(f.paint);for(const _ in u.paint)this.setPaintProperty(_,u.paint[_],{validate:!1});for(const _ in u.layout)this.setLayoutProperty(_,u.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mo(f.paint)}}setFilter(u){this.filter=u,this._featureFilter=Ql(u)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const f in this._unevaluatedLayout._values){const _=this._unevaluatedLayout._values[f];for(const E of _.getGlobalStateRefs())u.add(E)}for(const f of this._featureFilter.getGlobalStateRefs())u.add(f);return u}setLayoutProperty(u,f,_={}){f!=null&&this._validate(et,`layers.${this.id}.layout.${u}`,u,f,_)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,f):this.visibility=f)}getPaintProperty(u){return u.endsWith(go)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,f,_={}){if(f!=null&&this._validate(Je,`layers.${this.id}.paint.${u}`,u,f,_))return!1;if(u.endsWith(go))return this._transitionablePaint.setTransition(u.slice(0,-11),f||void 0),!1;{const E=this._transitionablePaint._values[u],R=E.property.specification["property-type"]==="cross-faded-data-driven",N=E.value.isDataDriven(),V=E.value;this._transitionablePaint.setValue(u,f),this._handleSpecialPaintPropertyUpdate(u);const Q=this._transitionablePaint._values[u].value;return Q.isDataDriven()||N||R||this._handleOverridablePaintPropertyUpdate(u,V,Q)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,f,_){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,f){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,f)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),ot(u,((f,_)=>!(f===void 0||_==="layout"&&!Object.keys(f).length||_==="paint"&&!Object.keys(f).length)))}_validate(u,f,_,E,R={}){return(!R||R.validate!==!1)&&it(this,u.call(he,{key:f,layerType:this.type,objectKey:_,value:E,styleSpec:Et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const f=this.paint.get(u);if(f instanceof Ka&&Aa(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const ba={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ja{constructor(u,f){this._structArray=u,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Hi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,f){return u._trim(),f&&(u.isTransferred=!0,f.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const f=Object.create(this.prototype);return f.arrayBuffer=u.arrayBuffer,f.length=u.length,f.capacity=u.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function zi(p,u=1){let f=0,_=0;return{members:p.map((E=>{const R=ba[E.type].BYTES_PER_ELEMENT,N=f=vl(f,Math.max(u,R)),V=E.components||1;return _=Math.max(_,R),f+=R*V,{name:E.name,type:E.type,components:V,offset:N}})),size:vl(f,Math.max(_,u)),alignment:u}}function vl(p,u){return Math.ceil(p/u)*u}class Ro extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f){const _=this.length;return this.resize(_+1),this.emplace(_,u,f)}emplace(u,f,_){const E=2*u;return this.int16[E+0]=f,this.int16[E+1]=_,u}}Ro.prototype.bytesPerElement=4,_t("StructArrayLayout2i4",Ro);class So extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,_){const E=this.length;return this.resize(E+1),this.emplace(E,u,f,_)}emplace(u,f,_,E){const R=3*u;return this.int16[R+0]=f,this.int16[R+1]=_,this.int16[R+2]=E,u}}So.prototype.bytesPerElement=6,_t("StructArrayLayout3i6",So);class tl extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,_,E){const R=this.length;return this.resize(R+1),this.emplace(R,u,f,_,E)}emplace(u,f,_,E,R){const N=4*u;return this.int16[N+0]=f,this.int16[N+1]=_,this.int16[N+2]=E,this.int16[N+3]=R,u}}tl.prototype.bytesPerElement=8,_t("StructArrayLayout4i8",tl);class fa extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N){const V=this.length;return this.resize(V+1),this.emplace(V,u,f,_,E,R,N)}emplace(u,f,_,E,R,N,V){const Q=6*u;return this.int16[Q+0]=f,this.int16[Q+1]=_,this.int16[Q+2]=E,this.int16[Q+3]=R,this.int16[Q+4]=N,this.int16[Q+5]=V,u}}fa.prototype.bytesPerElement=12,_t("StructArrayLayout2i4i12",fa);class Go extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N){const V=this.length;return this.resize(V+1),this.emplace(V,u,f,_,E,R,N)}emplace(u,f,_,E,R,N,V){const Q=4*u,oe=8*u;return this.int16[Q+0]=f,this.int16[Q+1]=_,this.uint8[oe+4]=E,this.uint8[oe+5]=R,this.uint8[oe+6]=N,this.uint8[oe+7]=V,u}}Go.prototype.bytesPerElement=8,_t("StructArrayLayout2i4ub8",Go);class rl extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f){const _=this.length;return this.resize(_+1),this.emplace(_,u,f)}emplace(u,f,_){const E=2*u;return this.float32[E+0]=f,this.float32[E+1]=_,u}}rl.prototype.bytesPerElement=8,_t("StructArrayLayout2f8",rl);class rc extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N,V,Q,oe,de){const ve=this.length;return this.resize(ve+1),this.emplace(ve,u,f,_,E,R,N,V,Q,oe,de)}emplace(u,f,_,E,R,N,V,Q,oe,de,ve){const Fe=10*u;return this.uint16[Fe+0]=f,this.uint16[Fe+1]=_,this.uint16[Fe+2]=E,this.uint16[Fe+3]=R,this.uint16[Fe+4]=N,this.uint16[Fe+5]=V,this.uint16[Fe+6]=Q,this.uint16[Fe+7]=oe,this.uint16[Fe+8]=de,this.uint16[Fe+9]=ve,u}}rc.prototype.bytesPerElement=20,_t("StructArrayLayout10ui20",rc);class ru extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N,V,Q,oe,de,ve,Fe){const je=this.length;return this.resize(je+1),this.emplace(je,u,f,_,E,R,N,V,Q,oe,de,ve,Fe)}emplace(u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je){const Ve=12*u;return this.int16[Ve+0]=f,this.int16[Ve+1]=_,this.int16[Ve+2]=E,this.int16[Ve+3]=R,this.uint16[Ve+4]=N,this.uint16[Ve+5]=V,this.uint16[Ve+6]=Q,this.uint16[Ve+7]=oe,this.int16[Ve+8]=de,this.int16[Ve+9]=ve,this.int16[Ve+10]=Fe,this.int16[Ve+11]=je,u}}ru.prototype.bytesPerElement=24,_t("StructArrayLayout4i4ui4i24",ru);class Ho extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,_){const E=this.length;return this.resize(E+1),this.emplace(E,u,f,_)}emplace(u,f,_,E){const R=3*u;return this.float32[R+0]=f,this.float32[R+1]=_,this.float32[R+2]=E,u}}Ho.prototype.bytesPerElement=12,_t("StructArrayLayout3f12",Ho);class A extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const f=this.length;return this.resize(f+1),this.emplace(f,u)}emplace(u,f){return this.uint32[1*u+0]=f,u}}A.prototype.bytesPerElement=4,_t("StructArrayLayout1ul4",A);class s extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N,V,Q,oe){const de=this.length;return this.resize(de+1),this.emplace(de,u,f,_,E,R,N,V,Q,oe)}emplace(u,f,_,E,R,N,V,Q,oe,de){const ve=10*u,Fe=5*u;return this.int16[ve+0]=f,this.int16[ve+1]=_,this.int16[ve+2]=E,this.int16[ve+3]=R,this.int16[ve+4]=N,this.int16[ve+5]=V,this.uint32[Fe+3]=Q,this.uint16[ve+8]=oe,this.uint16[ve+9]=de,u}}s.prototype.bytesPerElement=20,_t("StructArrayLayout6i1ul2ui20",s);class d extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N){const V=this.length;return this.resize(V+1),this.emplace(V,u,f,_,E,R,N)}emplace(u,f,_,E,R,N,V){const Q=6*u;return this.int16[Q+0]=f,this.int16[Q+1]=_,this.int16[Q+2]=E,this.int16[Q+3]=R,this.int16[Q+4]=N,this.int16[Q+5]=V,u}}d.prototype.bytesPerElement=12,_t("StructArrayLayout2i2i2i12",d);class w extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R){const N=this.length;return this.resize(N+1),this.emplace(N,u,f,_,E,R)}emplace(u,f,_,E,R,N){const V=4*u,Q=8*u;return this.float32[V+0]=f,this.float32[V+1]=_,this.float32[V+2]=E,this.int16[Q+6]=R,this.int16[Q+7]=N,u}}w.prototype.bytesPerElement=16,_t("StructArrayLayout2f1f2i16",w);class C extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N){const V=this.length;return this.resize(V+1),this.emplace(V,u,f,_,E,R,N)}emplace(u,f,_,E,R,N,V){const Q=16*u,oe=4*u,de=8*u;return this.uint8[Q+0]=f,this.uint8[Q+1]=_,this.float32[oe+1]=E,this.float32[oe+2]=R,this.int16[de+6]=N,this.int16[de+7]=V,u}}C.prototype.bytesPerElement=16,_t("StructArrayLayout2ub2f2i16",C);class L extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,_){const E=this.length;return this.resize(E+1),this.emplace(E,u,f,_)}emplace(u,f,_,E){const R=3*u;return this.uint16[R+0]=f,this.uint16[R+1]=_,this.uint16[R+2]=E,u}}L.prototype.bytesPerElement=6,_t("StructArrayLayout3ui6",L);class B extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt){const Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt)}emplace(u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt,Vt){const Lt=24*u,ze=12*u,nt=48*u;return this.int16[Lt+0]=f,this.int16[Lt+1]=_,this.uint16[Lt+2]=E,this.uint16[Lt+3]=R,this.uint32[ze+2]=N,this.uint32[ze+3]=V,this.uint32[ze+4]=Q,this.uint16[Lt+10]=oe,this.uint16[Lt+11]=de,this.uint16[Lt+12]=ve,this.float32[ze+7]=Fe,this.float32[ze+8]=je,this.uint8[nt+36]=Ve,this.uint8[nt+37]=Xe,this.uint8[nt+38]=st,this.uint32[ze+10]=yt,this.int16[Lt+22]=Vt,u}}B.prototype.bytesPerElement=48,_t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",B);class W extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt,Vt,Lt,ze,nt,Nt,vr,Gr,Tr,Mr,Qr,Hr){const rn=this.length;return this.resize(rn+1),this.emplace(rn,u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt,Vt,Lt,ze,nt,Nt,vr,Gr,Tr,Mr,Qr,Hr)}emplace(u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt,Vt,Lt,ze,nt,Nt,vr,Gr,Tr,Mr,Qr,Hr,rn){const Lr=32*u,kn=16*u;return this.int16[Lr+0]=f,this.int16[Lr+1]=_,this.int16[Lr+2]=E,this.int16[Lr+3]=R,this.int16[Lr+4]=N,this.int16[Lr+5]=V,this.int16[Lr+6]=Q,this.int16[Lr+7]=oe,this.uint16[Lr+8]=de,this.uint16[Lr+9]=ve,this.uint16[Lr+10]=Fe,this.uint16[Lr+11]=je,this.uint16[Lr+12]=Ve,this.uint16[Lr+13]=Xe,this.uint16[Lr+14]=st,this.uint16[Lr+15]=yt,this.uint16[Lr+16]=Vt,this.uint16[Lr+17]=Lt,this.uint16[Lr+18]=ze,this.uint16[Lr+19]=nt,this.uint16[Lr+20]=Nt,this.uint16[Lr+21]=vr,this.uint16[Lr+22]=Gr,this.uint32[kn+12]=Tr,this.float32[kn+13]=Mr,this.float32[kn+14]=Qr,this.uint16[Lr+30]=Hr,this.uint16[Lr+31]=rn,u}}W.prototype.bytesPerElement=64,_t("StructArrayLayout8i15ui1ul2f2ui64",W);class te extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const f=this.length;return this.resize(f+1),this.emplace(f,u)}emplace(u,f){return this.float32[1*u+0]=f,u}}te.prototype.bytesPerElement=4,_t("StructArrayLayout1f4",te);class ue extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,_){const E=this.length;return this.resize(E+1),this.emplace(E,u,f,_)}emplace(u,f,_,E){const R=3*u;return this.uint16[6*u+0]=f,this.float32[R+1]=_,this.float32[R+2]=E,u}}ue.prototype.bytesPerElement=12,_t("StructArrayLayout1ui2f12",ue);class ge extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f,_){const E=this.length;return this.resize(E+1),this.emplace(E,u,f,_)}emplace(u,f,_,E){const R=4*u;return this.uint32[2*u+0]=f,this.uint16[R+2]=_,this.uint16[R+3]=E,u}}ge.prototype.bytesPerElement=8,_t("StructArrayLayout1ul2ui8",ge);class Ce extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,f){const _=this.length;return this.resize(_+1),this.emplace(_,u,f)}emplace(u,f,_){const E=2*u;return this.uint16[E+0]=f,this.uint16[E+1]=_,u}}Ce.prototype.bytesPerElement=4,_t("StructArrayLayout2ui4",Ce);class xe extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const f=this.length;return this.resize(f+1),this.emplace(f,u)}emplace(u,f){return this.uint16[1*u+0]=f,u}}xe.prototype.bytesPerElement=2,_t("StructArrayLayout1ui2",xe);class Ne extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,f,_,E){const R=this.length;return this.resize(R+1),this.emplace(R,u,f,_,E)}emplace(u,f,_,E,R){const N=4*u;return this.float32[N+0]=f,this.float32[N+1]=_,this.float32[N+2]=E,this.float32[N+3]=R,u}}Ne.prototype.bytesPerElement=16,_t("StructArrayLayout4f16",Ne);class We extends ja{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new S(this.anchorPointX,this.anchorPointY)}}We.prototype.size=20;class ut extends s{get(u){return new We(this,u)}}_t("CollisionBoxArray",ut);class lt extends ja{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}lt.prototype.size=48;class ct extends B{get(u){return new lt(this,u)}}_t("PlacedSymbolArray",ct);class vt extends ja{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}vt.prototype.size=64;class Dt extends W{get(u){return new vt(this,u)}}_t("SymbolInstanceArray",Dt);class It extends te{getoffsetX(u){return this.float32[1*u+0]}}_t("GlyphOffsetArray",It);class Ft extends So{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}_t("SymbolLineVertexArray",Ft);class qt extends ja{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}qt.prototype.size=12;class Pt extends ue{get(u){return new qt(this,u)}}_t("TextAnchorOffsetArray",Pt);class Zt extends ja{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Zt.prototype.size=8;class _r extends ge{get(u){return new Zt(this,u)}}_t("FeatureIndexArray",_r);class pr extends Ro{}class mr extends Ro{}class wr extends Ro{}class sn extends fa{}class on extends Go{}class $r extends rl{}class En extends rc{}class _i extends ru{}class ji extends Ho{}class Ma extends A{}class ea extends d{}class ta extends C{}class Xi extends L{}class Wi extends Ce{}const na=zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Wo}=na;class Oi{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,f,_,E){const R=this.segments[this.segments.length-1];return u>Oi.MAX_VERTEX_ARRAY_LENGTH&&Wt(`Max vertices per segment is ${Oi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Oi.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!R||R.vertexLength+u>Oi.MAX_VERTEX_ARRAY_LENGTH||R.sortKey!==E?this.createNewSegment(f,_,E):R}createNewSegment(u,f,_){const E={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0,vaos:{}};return _!==void 0&&(E.sortKey=_),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(E),E}getOrCreateLatestSegment(u,f,_){return this.prepareSegment(0,u,f,_)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const f in u.vaos)u.vaos[f].destroy()}static simpleSegment(u,f,_,E){return new Oi([{vertexOffset:u,primitiveOffset:f,vertexLength:_,primitiveLength:E,vaos:{},sortKey:0}])}}function ss(p,u){return 256*(p=tt(Math.floor(p),0,255))+tt(Math.floor(u),0,255)}Oi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_t("SegmentVector",Oi);const Xo=zi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Fu,Ad,Md,Sc={exports:{}},ep={exports:{}},tp={exports:{}},uh=(function(){if(Md)return Sc.exports;Md=1;var p=(Fu||(Fu=1,ep.exports=function(f,_){var E,R,N,V,Q,oe,de,ve;for(R=f.length-(E=3&f.length),N=_,Q=3432918353,oe=461845907,ve=0;ve<R;)de=255&f.charCodeAt(ve)|(255&f.charCodeAt(++ve))<<8|(255&f.charCodeAt(++ve))<<16|(255&f.charCodeAt(++ve))<<24,++ve,N=27492+(65535&(V=5*(65535&(N=(N^=de=(65535&(de=(de=(65535&de)*Q+(((de>>>16)*Q&65535)<<16)&4294967295)<<15|de>>>17))*oe+(((de>>>16)*oe&65535)<<16)&4294967295)<<13|N>>>19))+((5*(N>>>16)&65535)<<16)&4294967295))+((58964+(V>>>16)&65535)<<16);switch(de=0,E){case 3:de^=(255&f.charCodeAt(ve+2))<<16;case 2:de^=(255&f.charCodeAt(ve+1))<<8;case 1:N^=de=(65535&(de=(de=(65535&(de^=255&f.charCodeAt(ve)))*Q+(((de>>>16)*Q&65535)<<16)&4294967295)<<15|de>>>17))*oe+(((de>>>16)*oe&65535)<<16)&4294967295}return N^=f.length,N=2246822507*(65535&(N^=N>>>16))+((2246822507*(N>>>16)&65535)<<16)&4294967295,N=3266489909*(65535&(N^=N>>>13))+((3266489909*(N>>>16)&65535)<<16)&4294967295,(N^=N>>>16)>>>0}),ep.exports),u=(Ad||(Ad=1,tp.exports=function(f,_){for(var E,R=f.length,N=_^R,V=0;R>=4;)E=1540483477*(65535&(E=255&f.charCodeAt(V)|(255&f.charCodeAt(++V))<<8|(255&f.charCodeAt(++V))<<16|(255&f.charCodeAt(++V))<<24))+((1540483477*(E>>>16)&65535)<<16),N=1540483477*(65535&N)+((1540483477*(N>>>16)&65535)<<16)^(E=1540483477*(65535&(E^=E>>>24))+((1540483477*(E>>>16)&65535)<<16)),R-=4,++V;switch(R){case 3:N^=(255&f.charCodeAt(V+2))<<16;case 2:N^=(255&f.charCodeAt(V+1))<<8;case 1:N=1540483477*(65535&(N^=255&f.charCodeAt(V)))+((1540483477*(N>>>16)&65535)<<16)}return N=1540483477*(65535&(N^=N>>>13))+((1540483477*(N>>>16)&65535)<<16),(N^=N>>>15)>>>0}),tp.exports);return Sc.exports=p,Sc.exports.murmur3=p,Sc.exports.murmur2=u,Sc.exports})(),nu=c(uh);class nc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,f,_,E){this.ids.push(Ld(u)),this.positions.push(f,_,E)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=Ld(u);let _=0,E=this.ids.length-1;for(;_<E;){const N=_+E>>1;this.ids[N]>=f?E=N:_=N+1}const R=[];for(;this.ids[_]===f;)R.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return R}static serialize(u,f){const _=new Float64Array(u.ids),E=new Uint32Array(u.positions);return yf(_,E,0,_.length-1),f&&f.push(_.buffer,E.buffer),{ids:_,positions:E}}static deserialize(u){const f=new nc;return f.ids=u.ids,f.positions=u.positions,f.indexed=!0,f}}function Ld(p){const u=+p;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:nu(String(p))}function yf(p,u,f,_){for(;f<_;){const E=p[f+_>>1];let R=f-1,N=_+1;for(;;){do R++;while(p[R]<E);do N--;while(p[N]>E);if(R>=N)break;Do(p,R,N),Do(u,3*R,3*N),Do(u,3*R+1,3*N+1),Do(u,3*R+2,3*N+2)}N-f<_-N?(yf(p,u,f,N),f=N+1):(yf(p,u,N+1,_),_=N)}}function Do(p,u,f){const _=p[u];p[u]=p[f],p[f]=_}_t("FeaturePositionMap",nc);class Ja{constructor(u,f){this.gl=u.gl,this.location=f}}class Dl extends Ja{constructor(u,f){super(u,f),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class gs extends Ja{constructor(u,f){super(u,f),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class M1 extends Ja{constructor(u,f){super(u,f),this.current=gn.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const vw=new Float32Array(16);function Ny(p){return[ss(255*p.r,255*p.g),ss(255*p.b,255*p.a)]}class rp{constructor(u,f,_){this.value=u,this.uniformNames=f.map((E=>`u_${E}`)),this.type=_}setUniform(u,f,_){u.set(_.constantOr(this.value))}getBinding(u,f,_){return this.type==="color"?new M1(u,f):new Dl(u,f)}}class ch{constructor(u,f){this.uniformNames=f.map((_=>`u_${_}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=u.tlbr}setUniform(u,f,_,E){const R=E==="u_pattern_to"?this.patternTo:E==="u_pattern_from"?this.patternFrom:E==="u_pixel_ratio_to"?this.pixelRatioTo:E==="u_pixel_ratio_from"?this.pixelRatioFrom:null;R&&u.set(R)}getBinding(u,f,_){return _.substr(0,9)==="u_pattern"?new gs(u,f):new Dl(u,f)}}class Yc{constructor(u,f,_,E){this.expression=u,this.type=_,this.maxValue=0,this.paintVertexAttributes=f.map((R=>({name:`a_${R}`,type:"Float32",components:_==="color"?2:1,offset:0}))),this.paintVertexArray=new E}populatePaintArray(u,f,_,E,R){const N=this.paintVertexArray.length,V=this.expression.evaluate(new Dn(0),f,{},E,[],R);this.paintVertexArray.resize(u),this._setPaintValue(N,u,V)}updatePaintArray(u,f,_,E){const R=this.expression.evaluate({zoom:0},_,E);this._setPaintValue(u,f,R)}_setPaintValue(u,f,_){if(this.type==="color"){const E=Ny(_);for(let R=u;R<f;R++)this.paintVertexArray.emplace(R,E[0],E[1])}else{for(let E=u;E<f;E++)this.paintVertexArray.emplace(E,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class nl{constructor(u,f,_,E,R,N){this.expression=u,this.uniformNames=f.map((V=>`u_${V}_t`)),this.type=_,this.useIntegerZoom=E,this.zoom=R,this.maxValue=0,this.paintVertexAttributes=f.map((V=>({name:`a_${V}`,type:"Float32",components:_==="color"?4:2,offset:0}))),this.paintVertexArray=new N}populatePaintArray(u,f,_,E,R){const N=this.expression.evaluate(new Dn(this.zoom),f,{},E,[],R),V=this.expression.evaluate(new Dn(this.zoom+1),f,{},E,[],R),Q=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(Q,u,N,V)}updatePaintArray(u,f,_,E){const R=this.expression.evaluate({zoom:this.zoom},_,E),N=this.expression.evaluate({zoom:this.zoom+1},_,E);this._setPaintValue(u,f,R,N)}_setPaintValue(u,f,_,E){if(this.type==="color"){const R=Ny(_),N=Ny(E);for(let V=u;V<f;V++)this.paintVertexArray.emplace(V,R[0],R[1],N[0],N[1])}else{for(let R=u;R<f;R++)this.paintVertexArray.emplace(R,_,E);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(E))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,f){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,E=tt(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);u.set(E)}getBinding(u,f,_){return new Dl(u,f)}}class Zc{constructor(u,f,_,E,R,N){this.expression=u,this.type=f,this.useIntegerZoom=_,this.zoom=E,this.layerId=N,this.zoomInPaintVertexArray=new R,this.zoomOutPaintVertexArray=new R}populatePaintArray(u,f,_){const E=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(E,u,f.patterns&&f.patterns[this.layerId],_)}updatePaintArray(u,f,_,E,R){this._setPaintValues(u,f,_.patterns&&_.patterns[this.layerId],R)}_setPaintValues(u,f,_,E){if(!E||!_)return;const{min:R,mid:N,max:V}=_,Q=E[R],oe=E[N],de=E[V];if(Q&&oe&&de)for(let ve=u;ve<f;ve++)this.zoomInPaintVertexArray.emplace(ve,oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],oe.pixelRatio,Q.pixelRatio),this.zoomOutPaintVertexArray.emplace(ve,oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],oe.pixelRatio,de.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Xo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Xo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Oy{constructor(u,f,_){this.binders={},this._buffers=[];const E=[];for(const R in u.paint._values){if(!_(R))continue;const N=u.paint.get(R);if(!(N instanceof Ka&&Aa(N.property.specification)))continue;const V=Fy(R,u.type),Q=N.value,oe=N.property.specification.type,de=N.property.useIntegerZoom,ve=N.property.specification["property-type"],Fe=ve==="cross-faded"||ve==="cross-faded-data-driven";if(Q.kind==="constant")this.binders[R]=Fe?new ch(Q.value,V):new rp(Q.value,V,oe),E.push(`/u_${R}`);else if(Q.kind==="source"||Fe){const je=By(R,oe,"source");this.binders[R]=Fe?new Zc(Q,oe,de,f,je,u.id):new Yc(Q,V,oe,je),E.push(`/a_${R}`)}else{const je=By(R,oe,"composite");this.binders[R]=new nl(Q,V,oe,de,f,je),E.push(`/z_${R}`)}}this.cacheKey=E.sort().join("")}getMaxValue(u){const f=this.binders[u];return f instanceof Yc||f instanceof nl?f.maxValue:0}populatePaintArrays(u,f,_,E,R){for(const N in this.binders){const V=this.binders[N];(V instanceof Yc||V instanceof nl||V instanceof Zc)&&V.populatePaintArray(u,f,_,E,R)}}setConstantPatternPositions(u,f){for(const _ in this.binders){const E=this.binders[_];E instanceof ch&&E.setConstantPatternPositions(u,f)}}updatePaintArrays(u,f,_,E,R){let N=!1;for(const V in u){const Q=f.getPositions(V);for(const oe of Q){const de=_.feature(oe.index);for(const ve in this.binders){const Fe=this.binders[ve];if((Fe instanceof Yc||Fe instanceof nl||Fe instanceof Zc)&&Fe.expression.isStateDependent===!0){const je=E.paint.get(ve);Fe.expression=je.value,Fe.updatePaintArray(oe.start,oe.end,de,u[V],R),N=!0}}}}return N}defines(){const u=[];for(const f in this.binders){const _=this.binders[f];(_ instanceof rp||_ instanceof ch)&&u.push(..._.uniformNames.map((E=>`#define HAS_UNIFORM_${E}`)))}return u}getBinderAttributes(){const u=[];for(const f in this.binders){const _=this.binders[f];if(_ instanceof Yc||_ instanceof nl)for(let E=0;E<_.paintVertexAttributes.length;E++)u.push(_.paintVertexAttributes[E].name);else if(_ instanceof Zc)for(let E=0;E<Xo.members.length;E++)u.push(Xo.members[E].name)}return u}getBinderUniforms(){const u=[];for(const f in this.binders){const _=this.binders[f];if(_ instanceof rp||_ instanceof ch||_ instanceof nl)for(const E of _.uniformNames)u.push(E)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,f){const _=[];for(const E in this.binders){const R=this.binders[E];if(R instanceof rp||R instanceof ch||R instanceof nl){for(const N of R.uniformNames)if(f[N]){const V=R.getBinding(u,f[N],N);_.push({name:N,property:E,binding:V})}}}return _}setUniforms(u,f,_,E){for(const{name:R,property:N,binding:V}of f)this.binders[N].setUniform(V,E,_.get(N),R)}updatePaintBuffers(u){this._buffers=[];for(const f in this.binders){const _=this.binders[f];if(u&&_ instanceof Zc){const E=u.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;E&&this._buffers.push(E)}else(_ instanceof Yc||_ instanceof nl)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(u){for(const f in this.binders){const _=this.binders[f];(_ instanceof Yc||_ instanceof nl||_ instanceof Zc)&&_.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const f=this.binders[u];(f instanceof Yc||f instanceof nl||f instanceof Zc)&&f.destroy()}}}class Rd{constructor(u,f,_=()=>!0){this.programConfigurations={};for(const E of u)this.programConfigurations[E.id]=new Oy(E,f,_);this.needsUpload=!1,this._featureMap=new nc,this._bufferOffset=0}populatePaintArrays(u,f,_,E,R,N){for(const V in this.programConfigurations)this.programConfigurations[V].populatePaintArrays(u,f,E,R,N);f.id!==void 0&&this._featureMap.add(f.id,_,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,f,_,E){for(const R of _)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(u,this._featureMap,f,R,E)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Fy(p,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[p]||[p.replace(`${u}-`,"").replace(/-/g,"_")]}function By(p,u,f){const _={color:{source:rl,composite:Ne},number:{source:te,composite:rl}},E=(function(R){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[R]})(p);return E&&E[f]||_[u][f]}_t("ConstantBinder",rp),_t("CrossFadedConstantBinder",ch),_t("SourceExpressionBinder",Yc),_t("CrossFadedCompositeBinder",Zc),_t("CompositeExpressionBinder",nl),_t("ProgramConfiguration",Oy,{omit:["_buffers"]}),_t("ProgramConfigurationSet",Rd);const np=Math.pow(2,14)-1,fA=-np-1;function ip(p){const u=ce/p.extent,f=p.loadGeometry();for(let _=0;_<f.length;_++){const E=f[_];for(let R=0;R<E.length;R++){const N=E[R],V=Math.round(N.x*u),Q=Math.round(N.y*u);N.x=tt(V,fA,np),N.y=tt(Q,fA,np),(V<N.x||V>N.x+1||Q<N.y||Q>N.y+1)&&Wt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function ap(p,u){return{type:p.type,id:p.id,properties:p.properties,geometry:u?ip(p):[]}}const hA=-32768;function BG(p,u,f,_,E){p.emplaceBack(hA+8*u+_,hA+8*f+E)}class bw{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new mr,this.indexArray=new Xi,this.segments=new Oi,this.programConfigurations=new Rd(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(u,f,_){const E=this.layers[0],R=[];let N=null,V=!1,Q=E.type==="heatmap";if(E.type==="circle"){const de=E;N=de.layout.get("circle-sort-key"),V=!N.isConstant(),Q=Q||de.paint.get("circle-pitch-alignment")==="map"}const oe=Q?f.subdivisionGranularity.circle:1;for(const{feature:de,id:ve,index:Fe,sourceLayerIndex:je}of u){const Ve=this.layers[0]._featureFilter.needGeometry,Xe=ap(de,Ve);if(!this.layers[0]._featureFilter.filter(new Dn(this.zoom,{globalState:this.globalState}),Xe,_))continue;const st=V?N.evaluate(Xe,{},_):void 0,yt={id:ve,properties:de.properties,type:de.type,sourceLayerIndex:je,index:Fe,geometry:Ve?Xe.geometry:ip(de),patterns:{},sortKey:st};R.push(yt)}V&&R.sort(((de,ve)=>de.sortKey-ve.sortKey));for(const de of R){const{geometry:ve,index:Fe,sourceLayerIndex:je}=de,Ve=u[Fe].feature;this.addFeature(de,ve,Fe,_,oe),f.featureIndex.insert(Ve,ve,Fe,je,this.index)}}update(u,f,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Wo),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,f,_,E,R=1){let N;switch(R){case 1:N=[0,7];break;case 3:N=[0,2,5,7];break;case 5:N=[0,1,3,4,6,7];break;case 7:N=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${R}; valid values are 1, 3, 5, 7.`)}const V=N.length;for(const Q of f)for(const oe of Q){const de=oe.x,ve=oe.y;if(de<0||de>=ce||ve<0||ve>=ce)continue;const Fe=this.segments.prepareSegment(V*V,this.layoutVertexArray,this.indexArray,u.sortKey),je=Fe.vertexLength;for(let Ve=0;Ve<V;Ve++)for(let Xe=0;Xe<V;Xe++)BG(this.layoutVertexArray,de,ve,N[Xe],N[Ve]);for(let Ve=0;Ve<V-1;Ve++)for(let Xe=0;Xe<V-1;Xe++){const st=je+Ve*V+Xe,yt=je+(Ve+1)*V+Xe;this.indexArray.emplaceBack(st,yt+1,st+1),this.indexArray.emplaceBack(st,yt,yt+1)}Fe.vertexLength+=V*V,Fe.primitiveLength+=(V-1)*(V-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{},E)}}function pA(p,u){for(let f=0;f<p.length;f++)if(Cm(u,p[f]))return!0;for(let f=0;f<u.length;f++)if(Cm(p,u[f]))return!0;return!!_w(p,u)}function zG(p,u,f){return!!Cm(p,u)||!!xw(u,p,f)}function mA(p,u){if(p.length===1)return yA(u,p[0]);for(let f=0;f<u.length;f++){const _=u[f];for(let E=0;E<_.length;E++)if(Cm(p,_[E]))return!0}for(let f=0;f<p.length;f++)if(yA(u,p[f]))return!0;for(let f=0;f<u.length;f++)if(_w(p,u[f]))return!0;return!1}function jG(p,u,f){if(p.length>1){if(_w(p,u))return!0;for(let _=0;_<u.length;_++)if(xw(u[_],p,f))return!0}for(let _=0;_<p.length;_++)if(xw(p[_],u,f))return!0;return!1}function _w(p,u){if(p.length===0||u.length===0)return!1;for(let f=0;f<p.length-1;f++){const _=p[f],E=p[f+1];for(let R=0;R<u.length-1;R++)if(qG(_,E,u[R],u[R+1]))return!0}return!1}function qG(p,u,f,_){return Gt(p,f,_)!==Gt(u,f,_)&&Gt(p,u,f)!==Gt(p,u,_)}function xw(p,u,f){const _=f*f;if(u.length===1)return p.distSqr(u[0])<_;for(let E=1;E<u.length;E++)if(gA(p,u[E-1],u[E])<_)return!0;return!1}function gA(p,u,f){const _=u.distSqr(f);if(_===0)return p.distSqr(u);const E=((p.x-u.x)*(f.x-u.x)+(p.y-u.y)*(f.y-u.y))/_;return p.distSqr(E<0?u:E>1?f:f.sub(u)._mult(E)._add(u))}function yA(p,u){let f,_,E,R=!1;for(let N=0;N<p.length;N++){f=p[N];for(let V=0,Q=f.length-1;V<f.length;Q=V++)_=f[V],E=f[Q],_.y>u.y!=E.y>u.y&&u.x<(E.x-_.x)*(u.y-_.y)/(E.y-_.y)+_.x&&(R=!R)}return R}function Cm(p,u){let f=!1;for(let _=0,E=p.length-1;_<p.length;E=_++){const R=p[_],N=p[E];R.y>u.y!=N.y>u.y&&u.x<(N.x-R.x)*(u.y-R.y)/(N.y-R.y)+R.x&&(f=!f)}return f}function $G(p,u,f){const _=f[0],E=f[2];if(p.x<_.x&&u.x<_.x||p.x>E.x&&u.x>E.x||p.y<_.y&&u.y<_.y||p.y>E.y&&u.y>E.y)return!1;const R=Gt(p,u,f[0]);return R!==Gt(p,u,f[1])||R!==Gt(p,u,f[2])||R!==Gt(p,u,f[3])}function zy(p,u,f){const _=u.paint.get(p).value;return _.kind==="constant"?_.value:f.programConfigurations.get(u.id).getMaxValue(p)}function L1(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function R1(p,u,f,_,E){if(!u[0]&&!u[1])return p;const R=S.convert(u)._mult(E);f==="viewport"&&R._rotate(-_);const N=[];for(let V=0;V<p.length;V++)N.push(p[V].sub(R));return N}let vA,bA;_t("CircleBucket",bw,{omit:["layers"]});var VG={get paint(){return bA=bA||new za({"circle-radius":new pn(Et.paint_circle["circle-radius"]),"circle-color":new pn(Et.paint_circle["circle-color"]),"circle-blur":new pn(Et.paint_circle["circle-blur"]),"circle-opacity":new pn(Et.paint_circle["circle-opacity"]),"circle-translate":new Jr(Et.paint_circle["circle-translate"]),"circle-translate-anchor":new Jr(Et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Jr(Et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Jr(Et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pn(Et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pn(Et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pn(Et.paint_circle["circle-stroke-opacity"])})},get layout(){return vA=vA||new za({"circle-sort-key":new pn(Et.layout_circle["circle-sort-key"])})}};class UG extends ca{constructor(u){super(u,VG)}createBucket(u){return new bw(u)}queryRadius(u){const f=u;return zy("circle-radius",this,f)+zy("circle-stroke-width",this,f)+L1(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:f,featureState:_,geometry:E,transform:R,pixelsToTileUnits:N,unwrappedTileID:V,getElevation:Q}){const oe=R1(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-R.bearingInRadians,N),de=this.paint.get("circle-radius").evaluate(f,_)+this.paint.get("circle-stroke-width").evaluate(f,_),ve=this.paint.get("circle-pitch-alignment")==="map",Fe=ve?oe:(function(Ve,Xe,st,yt){return Ve.map((Vt=>_A(Vt,Xe,st,yt)))})(oe,R,V,Q),je=ve?de*N:de;for(const Ve of E)for(const Xe of Ve){const st=ve?Xe:_A(Xe,R,V,Q);let yt=je;const Vt=R.projectTileCoordinates(Xe.x,Xe.y,V,Q).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?yt*=Vt/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(yt*=R.cameraToCenterDistance/Vt),zG(Fe,st,yt))return!0}return!1}}function _A(p,u,f,_){const E=u.projectTileCoordinates(p.x,p.y,f,_).point;return new S((.5*E.x+.5)*u.width,(.5*-E.y+.5)*u.height)}class xA extends bw{}let wA;_t("HeatmapBucket",xA,{omit:["layers"]});var GG={get paint(){return wA=wA||new za({"heatmap-radius":new pn(Et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pn(Et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Jr(Et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wo(Et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Jr(Et.paint_heatmap["heatmap-opacity"])})}};function ww(p,{width:u,height:f},_,E){if(E){if(E instanceof Uint8ClampedArray)E=new Uint8Array(E.buffer);else if(E.length!==u*f*_)throw new RangeError(`mismatched image size. expected: ${E.length} but got: ${u*f*_}`)}else E=new Uint8Array(u*f*_);return p.width=u,p.height=f,p.data=E,p}function SA(p,{width:u,height:f},_){if(u===p.width&&f===p.height)return;const E=ww({},{width:u,height:f},_);Sw(p,E,{x:0,y:0},{x:0,y:0},{width:Math.min(p.width,u),height:Math.min(p.height,f)},_),p.width=u,p.height=f,p.data=E.data}function Sw(p,u,f,_,E,R){if(E.width===0||E.height===0)return u;if(E.width>p.width||E.height>p.height||f.x>p.width-E.width||f.y>p.height-E.height)throw new RangeError("out of range source coordinates for image copy");if(E.width>u.width||E.height>u.height||_.x>u.width-E.width||_.y>u.height-E.height)throw new RangeError("out of range destination coordinates for image copy");const N=p.data,V=u.data;if(N===V)throw new Error("srcData equals dstData, so image is already copied");for(let Q=0;Q<E.height;Q++){const oe=((f.y+Q)*p.width+f.x)*R,de=((_.y+Q)*u.width+_.x)*R;for(let ve=0;ve<E.width*R;ve++)V[de+ve]=N[oe+ve]}return u}class jy{constructor(u,f){ww(this,u,1,f)}resize(u){SA(this,u,1)}clone(){return new jy({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,f,_,E,R){Sw(u,f,_,E,R,1)}}class _u{constructor(u,f){ww(this,u,4,f)}resize(u){SA(this,u,4)}replace(u,f){f?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new _u({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,f,_,E,R){Sw(u,f,_,E,R,4)}setPixel(u,f,_){const E=4*(u*this.width+f);this.data[E+0]=Math.round(255*_.r/_.a),this.data[E+1]=Math.round(255*_.g/_.a),this.data[E+2]=Math.round(255*_.b/_.a),this.data[E+3]=Math.round(255*_.a)}}function CA(p){const u={},f=p.resolution||256,_=p.clips?p.clips.length:1,E=p.image||new _u({width:f,height:_});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const R=(N,V,Q)=>{u[p.evaluationKey]=Q;const oe=p.expression.evaluate(u);E.setPixel(N/4/f,V/4,oe)};if(p.clips)for(let N=0,V=0;N<_;++N,V+=4*f)for(let Q=0,oe=0;Q<f;Q++,oe+=4){const de=Q/(f-1),{start:ve,end:Fe}=p.clips[N];R(V,oe,ve*(1-de)+Fe*de)}else for(let N=0,V=0;N<f;N++,V+=4)R(0,V,N/(f-1));return E}_t("AlphaImage",jy),_t("RGBAImage",_u);const Cw="big-fb";class HG extends ca{createBucket(u){return new xA(u)}constructor(u){super(u,GG),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=CA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Cw)&&this.heatmapFbos.delete(Cw)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let EA;var WG={get paint(){return EA=EA||new za({"hillshade-illumination-direction":new Jr(Et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Jr(Et.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Jr(Et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Jr(Et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Jr(Et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Jr(Et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Jr(Et.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Jr(Et.paint_hillshade["hillshade-method"])})}};class XG extends ca{constructor(u){super(u,WG),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,f=this.paint.get("hillshade-illumination-altitude").values,_=this.paint.get("hillshade-highlight-color").values,E=this.paint.get("hillshade-shadow-color").values;const R=Math.max(u.length,f.length,_.length,E.length);u=u.concat(Array(R-u.length).fill(u.at(-1))),f=f.concat(Array(R-f.length).fill(f.at(-1))),_=_.concat(Array(R-_.length).fill(_.at(-1))),E=E.concat(Array(R-E.length).fill(E.at(-1)));const N=f.map(Pr);return{directionRadians:u.map(Pr),altitudeRadians:N,shadowColor:E,highlightColor:_}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let TA;var YG={get paint(){return TA=TA||new za({"color-relief-opacity":new Jr(Et["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new wo(Et["paint_color-relief"]["color-relief-color"])})}};class Ew{constructor(u,f,_,E){this.context=u,this.format=_,this.texture=u.gl.createTexture(),this.update(f,E)}update(u,f,_){const{width:E,height:R}=u,N=!(this.size&&this.size[0]===E&&this.size[1]===R||_),{context:V}=this,{gl:Q}=V;if(this.useMipmap=!!(f&&f.useMipmap),Q.bindTexture(Q.TEXTURE_2D,this.texture),V.pixelStoreUnpackFlipY.set(!1),V.pixelStoreUnpack.set(1),V.pixelStoreUnpackPremultiplyAlpha.set(this.format===Q.RGBA&&(!f||f.premultiply!==!1)),N)this.size=[E,R],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||hr(u)?Q.texImage2D(Q.TEXTURE_2D,0,this.format,this.format,Q.UNSIGNED_BYTE,u):Q.texImage2D(Q.TEXTURE_2D,0,this.format,E,R,0,this.format,Q.UNSIGNED_BYTE,u.data);else{const{x:oe,y:de}=_||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||hr(u)?Q.texSubImage2D(Q.TEXTURE_2D,0,oe,de,Q.RGBA,Q.UNSIGNED_BYTE,u):Q.texSubImage2D(Q.TEXTURE_2D,0,oe,de,E,R,Q.RGBA,Q.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Q.generateMipmap(Q.TEXTURE_2D),V.pixelStoreUnpackFlipY.setDefault(),V.pixelStoreUnpack.setDefault(),V.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,f,_){const{context:E}=this,{gl:R}=E;R.bindTexture(R.TEXTURE_2D,this.texture),_!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=R.LINEAR),u!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,u),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,_||u),this.filter=u),f!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,f),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class PA{constructor(u,f,_,E=1,R=1,N=1,V=0){if(this.uid=u,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(_&&!["mapbox","terrarium","custom"].includes(_))return void Wt(`"${_}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const Q=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),_){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=E,this.greenFactor=R,this.blueFactor=N,this.baseShift=V;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let oe=0;oe<Q;oe++)this.data[this._idx(-1,oe)]=this.data[this._idx(0,oe)],this.data[this._idx(Q,oe)]=this.data[this._idx(Q-1,oe)],this.data[this._idx(oe,-1)]=this.data[this._idx(oe,0)],this.data[this._idx(oe,Q)]=this.data[this._idx(oe,Q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Q,-1)]=this.data[this._idx(Q-1,0)],this.data[this._idx(-1,Q)]=this.data[this._idx(0,Q-1)],this.data[this._idx(Q,Q)]=this.data[this._idx(Q-1,Q-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let oe=0;oe<Q;oe++)for(let de=0;de<Q;de++){const ve=this.get(oe,de);ve>this.max&&(this.max=ve),ve<this.min&&(this.min=ve)}}get(u,f){const _=new Uint8Array(this.data.buffer),E=4*this._idx(u,f);return this.unpack(_[E],_[E+1],_[E+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,f){if(u<-1||u>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(u+1)}unpack(u,f,_){return u*this.redFactor+f*this.greenFactor+_*this.blueFactor-this.baseShift}pack(u){return IA(u,this.getUnpackVector())}getPixels(){return new _u({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,f,_){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let E=f*this.dim,R=f*this.dim+this.dim,N=_*this.dim,V=_*this.dim+this.dim;switch(f){case-1:E=R-1;break;case 1:R=E+1}switch(_){case-1:N=V-1;break;case 1:V=N+1}const Q=-f*this.dim,oe=-_*this.dim;for(let de=N;de<V;de++)for(let ve=E;ve<R;ve++)this.data[this._idx(ve,de)]=u.data[this._idx(ve+Q,de+oe)]}}function IA(p,u){const f=u[0],_=u[1],E=u[2],R=u[3],N=Math.min(f,_,E),V=Math.round((p+R)/N);return{r:Math.floor(V*N/f)%256,g:Math.floor(V*N/_)%256,b:Math.floor(V*N/E)%256}}_t("DEMData",PA);class ZG extends ca{constructor(u){super(u,YG)}_createColorRamp(u){const f={elevationStops:[],colorStops:[]},_=this._transitionablePaint._values["color-relief-color"].value.expression;if(_ instanceof Sd&&_._styleExpression.expression instanceof ri){this.colorRampExpression=_;const N=_._styleExpression.expression;f.elevationStops=N.labels,f.colorStops=[];for(const V of f.elevationStops)f.colorStops.push(N.evaluate({globals:{elevation:V}}))}if(f.elevationStops.length<1&&(f.elevationStops=[0],f.colorStops=[gn.transparent]),f.elevationStops.length<2&&(f.elevationStops.push(f.elevationStops[0]+1),f.colorStops.push(f.colorStops[0])),f.elevationStops.length<=u)return f;const E={elevationStops:[],colorStops:[]},R=(f.elevationStops.length-1)/(u-1);for(let N=0;N<f.elevationStops.length-.5;N+=R)E.elevationStops.push(f.elevationStops[Math.round(N)]),E.colorStops.push(f.colorStops[Math.round(N)]);return Wt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),E}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,f,_){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const E=this._createColorRamp(f),R=new _u({width:E.colorStops.length,height:1}),N=new _u({width:E.colorStops.length,height:1});for(let V=0;V<E.elevationStops.length;V++){const Q=IA(E.elevationStops[V],_);N.setPixel(0,V,new gn(Q.r/255,Q.g/255,Q.b/255,1)),R.setPixel(0,V,E.colorStops[V])}return this.colorRampTextures={elevationTexture:new Ew(u,N,u.gl.RGBA),colorTexture:new Ew(u,R,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const KG=zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:JG}=KG;function Tw(p,u,f){const _=f.patternDependencies;let E=!1;for(const R of u){const N=R.paint.get(`${p}-pattern`);N.isConstant()||(E=!0);const V=N.constantOr(null);V&&(E=!0,_[V.to]=!0,_[V.from]=!0)}return E}function Pw(p,u,f,_,E){const R=E.patternDependencies;for(const N of u){const V=N.paint.get(`${p}-pattern`).value;if(V.kind!=="constant"){let Q=V.evaluate({zoom:_-1},f,{},E.availableImages),oe=V.evaluate({zoom:_},f,{},E.availableImages),de=V.evaluate({zoom:_+1},f,{},E.availableImages);Q=Q&&Q.name?Q.name:Q,oe=oe&&oe.name?oe.name:oe,de=de&&de.name?de.name:de,R[Q]=!0,R[oe]=!0,R[de]=!0,f.patterns[N.id]={min:Q,mid:oe,max:de}}}return f}function kA(p,u,f,_,E){let R;if(E===(function(N,V,Q,oe){let de=0;for(let ve=V,Fe=Q-oe;ve<Q;ve+=oe)de+=(N[Fe]-N[ve])*(N[ve+1]+N[Fe+1]),Fe=ve;return de})(p,u,f,_)>0)for(let N=u;N<f;N+=_)R=RA(N/_|0,p[N],p[N+1],R);else for(let N=f-_;N>=u;N-=_)R=RA(N/_|0,p[N],p[N+1],R);return R&&Em(R,R.next)&&(Uy(R),R=R.next),R}function op(p,u){if(!p)return p;u||(u=p);let f,_=p;do if(f=!1,_.steiner||!Em(_,_.next)&&Yo(_.prev,_,_.next)!==0)_=_.next;else{if(Uy(_),_=u=_.prev,_===_.next)break;f=!0}while(f||_!==u);return u}function qy(p,u,f,_,E,R,N){if(!p)return;!N&&R&&(function(Q,oe,de,ve){let Fe=Q;do Fe.z===0&&(Fe.z=Iw(Fe.x,Fe.y,oe,de,ve)),Fe.prevZ=Fe.prev,Fe.nextZ=Fe.next,Fe=Fe.next;while(Fe!==Q);Fe.prevZ.nextZ=null,Fe.prevZ=null,(function(je){let Ve,Xe=1;do{let st,yt=je;je=null;let Vt=null;for(Ve=0;yt;){Ve++;let Lt=yt,ze=0;for(let Nt=0;Nt<Xe&&(ze++,Lt=Lt.nextZ,Lt);Nt++);let nt=Xe;for(;ze>0||nt>0&&Lt;)ze!==0&&(nt===0||!Lt||yt.z<=Lt.z)?(st=yt,yt=yt.nextZ,ze--):(st=Lt,Lt=Lt.nextZ,nt--),Vt?Vt.nextZ=st:je=st,st.prevZ=Vt,Vt=st;yt=Lt}Vt.nextZ=null,Xe*=2}while(Ve>1)})(Fe)})(p,_,E,R);let V=p;for(;p.prev!==p.next;){const Q=p.prev,oe=p.next;if(R?eH(p,_,E,R):QG(p))u.push(Q.i,p.i,oe.i),Uy(p),p=oe.next,V=oe.next;else if((p=oe)===V){N?N===1?qy(p=tH(op(p),u),u,f,_,E,R,2):N===2&&rH(p,u,f,_,E,R):qy(op(p),u,f,_,E,R,1);break}}}function QG(p){const u=p.prev,f=p,_=p.next;if(Yo(u,f,_)>=0)return!1;const E=u.x,R=f.x,N=_.x,V=u.y,Q=f.y,oe=_.y,de=Math.min(E,R,N),ve=Math.min(V,Q,oe),Fe=Math.max(E,R,N),je=Math.max(V,Q,oe);let Ve=_.next;for(;Ve!==u;){if(Ve.x>=de&&Ve.x<=Fe&&Ve.y>=ve&&Ve.y<=je&&$y(E,V,R,Q,N,oe,Ve.x,Ve.y)&&Yo(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.next}return!0}function eH(p,u,f,_){const E=p.prev,R=p,N=p.next;if(Yo(E,R,N)>=0)return!1;const V=E.x,Q=R.x,oe=N.x,de=E.y,ve=R.y,Fe=N.y,je=Math.min(V,Q,oe),Ve=Math.min(de,ve,Fe),Xe=Math.max(V,Q,oe),st=Math.max(de,ve,Fe),yt=Iw(je,Ve,u,f,_),Vt=Iw(Xe,st,u,f,_);let Lt=p.prevZ,ze=p.nextZ;for(;Lt&&Lt.z>=yt&&ze&&ze.z<=Vt;){if(Lt.x>=je&&Lt.x<=Xe&&Lt.y>=Ve&&Lt.y<=st&&Lt!==E&&Lt!==N&&$y(V,de,Q,ve,oe,Fe,Lt.x,Lt.y)&&Yo(Lt.prev,Lt,Lt.next)>=0||(Lt=Lt.prevZ,ze.x>=je&&ze.x<=Xe&&ze.y>=Ve&&ze.y<=st&&ze!==E&&ze!==N&&$y(V,de,Q,ve,oe,Fe,ze.x,ze.y)&&Yo(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;Lt&&Lt.z>=yt;){if(Lt.x>=je&&Lt.x<=Xe&&Lt.y>=Ve&&Lt.y<=st&&Lt!==E&&Lt!==N&&$y(V,de,Q,ve,oe,Fe,Lt.x,Lt.y)&&Yo(Lt.prev,Lt,Lt.next)>=0)return!1;Lt=Lt.prevZ}for(;ze&&ze.z<=Vt;){if(ze.x>=je&&ze.x<=Xe&&ze.y>=Ve&&ze.y<=st&&ze!==E&&ze!==N&&$y(V,de,Q,ve,oe,Fe,ze.x,ze.y)&&Yo(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function tH(p,u){let f=p;do{const _=f.prev,E=f.next.next;!Em(_,E)&&MA(_,f,f.next,E)&&Vy(_,E)&&Vy(E,_)&&(u.push(_.i,f.i,E.i),Uy(f),Uy(f.next),f=p=E),f=f.next}while(f!==p);return op(f)}function rH(p,u,f,_,E,R){let N=p;do{let V=N.next.next;for(;V!==N.prev;){if(N.i!==V.i&&sH(N,V)){let Q=LA(N,V);return N=op(N,N.next),Q=op(Q,Q.next),qy(N,u,f,_,E,R,0),void qy(Q,u,f,_,E,R,0)}V=V.next}N=N.next}while(N!==p)}function nH(p,u){let f=p.x-u.x;return f===0&&(f=p.y-u.y,f===0)&&(f=(p.next.y-p.y)/(p.next.x-p.x)-(u.next.y-u.y)/(u.next.x-u.x)),f}function iH(p,u){const f=(function(E,R){let N=R;const V=E.x,Q=E.y;let oe,de=-1/0;if(Em(E,N))return N;do{if(Em(E,N.next))return N.next;if(Q<=N.y&&Q>=N.next.y&&N.next.y!==N.y){const Xe=N.x+(Q-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Xe<=V&&Xe>de&&(de=Xe,oe=N.x<N.next.x?N:N.next,Xe===V))return oe}N=N.next}while(N!==R);if(!oe)return null;const ve=oe,Fe=oe.x,je=oe.y;let Ve=1/0;N=oe;do{if(V>=N.x&&N.x>=Fe&&V!==N.x&&AA(Q<je?V:de,Q,Fe,je,Q<je?de:V,Q,N.x,N.y)){const Xe=Math.abs(Q-N.y)/(V-N.x);Vy(N,E)&&(Xe<Ve||Xe===Ve&&(N.x>oe.x||N.x===oe.x&&aH(oe,N)))&&(oe=N,Ve=Xe)}N=N.next}while(N!==ve);return oe})(p,u);if(!f)return u;const _=LA(f,p);return op(_,_.next),op(f,f.next)}function aH(p,u){return Yo(p.prev,p,u.prev)<0&&Yo(u.next,p,p.next)<0}function Iw(p,u,f,_,E){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-f)*E|0)|p<<8))|p<<4))|p<<2))|p<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-_)*E|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function oH(p){let u=p,f=p;do(u.x<f.x||u.x===f.x&&u.y<f.y)&&(f=u),u=u.next;while(u!==p);return f}function AA(p,u,f,_,E,R,N,V){return(E-N)*(u-V)>=(p-N)*(R-V)&&(p-N)*(_-V)>=(f-N)*(u-V)&&(f-N)*(R-V)>=(E-N)*(_-V)}function $y(p,u,f,_,E,R,N,V){return!(p===N&&u===V)&&AA(p,u,f,_,E,R,N,V)}function sH(p,u){return p.next.i!==u.i&&p.prev.i!==u.i&&!(function(f,_){let E=f;do{if(E.i!==f.i&&E.next.i!==f.i&&E.i!==_.i&&E.next.i!==_.i&&MA(E,E.next,f,_))return!0;E=E.next}while(E!==f);return!1})(p,u)&&(Vy(p,u)&&Vy(u,p)&&(function(f,_){let E=f,R=!1;const N=(f.x+_.x)/2,V=(f.y+_.y)/2;do E.y>V!=E.next.y>V&&E.next.y!==E.y&&N<(E.next.x-E.x)*(V-E.y)/(E.next.y-E.y)+E.x&&(R=!R),E=E.next;while(E!==f);return R})(p,u)&&(Yo(p.prev,p,u.prev)||Yo(p,u.prev,u))||Em(p,u)&&Yo(p.prev,p,p.next)>0&&Yo(u.prev,u,u.next)>0)}function Yo(p,u,f){return(u.y-p.y)*(f.x-u.x)-(u.x-p.x)*(f.y-u.y)}function Em(p,u){return p.x===u.x&&p.y===u.y}function MA(p,u,f,_){const E=N1(Yo(p,u,f)),R=N1(Yo(p,u,_)),N=N1(Yo(f,_,p)),V=N1(Yo(f,_,u));return E!==R&&N!==V||!(E!==0||!D1(p,f,u))||!(R!==0||!D1(p,_,u))||!(N!==0||!D1(f,p,_))||!(V!==0||!D1(f,u,_))}function D1(p,u,f){return u.x<=Math.max(p.x,f.x)&&u.x>=Math.min(p.x,f.x)&&u.y<=Math.max(p.y,f.y)&&u.y>=Math.min(p.y,f.y)}function N1(p){return p>0?1:p<0?-1:0}function Vy(p,u){return Yo(p.prev,p,p.next)<0?Yo(p,u,p.next)>=0&&Yo(p,p.prev,u)>=0:Yo(p,u,p.prev)<0||Yo(p,p.next,u)<0}function LA(p,u){const f=kw(p.i,p.x,p.y),_=kw(u.i,u.x,u.y),E=p.next,R=u.prev;return p.next=u,u.prev=p,f.next=E,E.prev=f,_.next=f,f.prev=_,R.next=_,_.prev=R,_}function RA(p,u,f,_){const E=kw(p,u,f);return _?(E.next=_.next,E.prev=_,_.next.prev=E,_.next=E):(E.prev=E,E.next=E),E}function Uy(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function kw(p,u,f){return{i:p,x:u,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Tm{constructor(u,f){if(f>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=f}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class O1{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}O1.noSubdivision=new O1({fill:new Tm(0,0),line:new Tm(0,0),tile:new Tm(0,0),stencil:new Tm(0,0),circle:1}),_t("SubdivisionGranularityExpression",Tm),_t("SubdivisionGranularitySetting",O1);const Pm=-32768,Gy=32767;class lH{constructor(u,f){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=ce/u,this._canonical=f}_getKey(u,f){return(u+=32768)<<16|f+32768}_vertexToIndex(u,f){if(u<-32768||f<-32768||u>32767||f>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const _=0|Math.round(u),E=0|Math.round(f),R=this._getKey(_,E);if(this._vertexDictionary.has(R))return this._vertexDictionary.get(R);const N=this._vertexBuffer.length/2;return this._vertexDictionary.set(R,N),this._vertexBuffer.push(_,E),N}_subdivideTrianglesScanline(u){if(this._granularity<2)return(function(E,R){const N=[];for(let V=0;V<R.length;V+=3){const Q=R[V],oe=R[V+1],de=R[V+2],ve=E[2*Q],Fe=E[2*Q+1];(E[2*oe]-ve)*(E[2*de+1]-Fe)-(E[2*oe+1]-Fe)*(E[2*de]-ve)>0?(N.push(Q),N.push(de),N.push(oe)):(N.push(Q),N.push(oe),N.push(de))}return N})(this._vertexBuffer,u);const f=[],_=u.length;for(let E=0;E<_;E+=3){const R=[u[E+0],u[E+1],u[E+2]],N=[this._vertexBuffer[2*u[E+0]+0],this._vertexBuffer[2*u[E+0]+1],this._vertexBuffer[2*u[E+1]+0],this._vertexBuffer[2*u[E+1]+1],this._vertexBuffer[2*u[E+2]+0],this._vertexBuffer[2*u[E+2]+1]];let V=1/0,Q=1/0,oe=-1/0,de=-1/0;for(let Xe=0;Xe<3;Xe++){const st=N[2*Xe],yt=N[2*Xe+1];V=Math.min(V,st),oe=Math.max(oe,st),Q=Math.min(Q,yt),de=Math.max(de,yt)}if(V===oe||Q===de)continue;const ve=Math.floor(V/this._granularityCellSize),Fe=Math.ceil(oe/this._granularityCellSize),je=Math.floor(Q/this._granularityCellSize),Ve=Math.ceil(de/this._granularityCellSize);if(ve!==Fe||je!==Ve)for(let Xe=je;Xe<Ve;Xe++){const st=this._scanlineGenerateVertexRingForCellRow(Xe,N,R);uH(this._vertexBuffer,st,f)}else f.push(...R)}return f}_scanlineGenerateVertexRingForCellRow(u,f,_){const E=u*this._granularityCellSize,R=E+this._granularityCellSize,N=[];for(let V=0;V<3;V++){const Q=f[2*V],oe=f[2*V+1],de=f[2*(V+1)%6],ve=f[(2*(V+1)+1)%6],Fe=f[2*(V+2)%6],je=f[(2*(V+2)+1)%6],Ve=de-Q,Xe=ve-oe,st=Ve===0,yt=Xe===0,Vt=(E-oe)/Xe,Lt=(R-oe)/Xe,ze=Math.min(Vt,Lt),nt=Math.max(Vt,Lt);if(!yt&&(ze>=1||nt<=0)||yt&&(oe<E||oe>R)){ve>=E&&ve<=R&&N.push(_[(V+1)%3]);continue}!yt&&ze>0&&N.push(this._vertexToIndex(Q+Ve*ze,oe+Xe*ze));const Nt=Q+Ve*Math.max(ze,0),vr=Q+Ve*Math.min(nt,1);st||this._generateIntraEdgeVertices(N,Q,oe,de,ve,Nt,vr),!yt&&nt<1&&N.push(this._vertexToIndex(Q+Ve*nt,oe+Xe*nt)),(yt||ve>=E&&ve<=R)&&N.push(_[(V+1)%3]),!yt&&(ve<=E||ve>=R)&&this._generateInterEdgeVertices(N,Q,oe,de,ve,Fe,je,vr,E,R)}return N}_generateIntraEdgeVertices(u,f,_,E,R,N,V){const Q=E-f,oe=R-_,de=oe===0,ve=de?Math.min(f,E):Math.min(N,V),Fe=de?Math.max(f,E):Math.max(N,V),je=Math.floor(ve/this._granularityCellSize)+1,Ve=Math.ceil(Fe/this._granularityCellSize)-1;if(de?f<E:N<V)for(let Xe=je;Xe<=Ve;Xe++){const st=Xe*this._granularityCellSize;u.push(this._vertexToIndex(st,_+oe*(st-f)/Q))}else for(let Xe=Ve;Xe>=je;Xe--){const st=Xe*this._granularityCellSize;u.push(this._vertexToIndex(st,_+oe*(st-f)/Q))}}_generateInterEdgeVertices(u,f,_,E,R,N,V,Q,oe,de){const ve=R-_,Fe=N-E,je=V-R,Ve=(oe-R)/je,Xe=(de-R)/je,st=Math.min(Ve,Xe),yt=Math.max(Ve,Xe),Vt=E+Fe*st;let Lt=Math.floor(Math.min(Vt,Q)/this._granularityCellSize)+1,ze=Math.ceil(Math.max(Vt,Q)/this._granularityCellSize)-1,nt=Q<Vt;const Nt=je===0;if(Nt&&(V===oe||V===de))return;if(Nt||st>=1||yt<=0){const Gr=_-V,Tr=N+(f-N)*Math.min((oe-V)/Gr,(de-V)/Gr);Lt=Math.floor(Math.min(Tr,Q)/this._granularityCellSize)+1,ze=Math.ceil(Math.max(Tr,Q)/this._granularityCellSize)-1,nt=Q<Tr}const vr=ve>0?de:oe;if(nt)for(let Gr=Lt;Gr<=ze;Gr++)u.push(this._vertexToIndex(Gr*this._granularityCellSize,vr));else for(let Gr=ze;Gr>=Lt;Gr--)u.push(this._vertexToIndex(Gr*this._granularityCellSize,vr))}_generateOutline(u){const f=[];for(const _ of u){const E=sp(_,this._granularity,!0),R=this._pointArrayToIndices(E),N=[];for(let V=1;V<R.length;V++)N.push(R[V-1]),N.push(R[V]);f.push(N)}return f}_handlePoles(u){let f=!1,_=!1;this._canonical&&(this._canonical.y===0&&(f=!0),this._canonical.y===(1<<this._canonical.z)-1&&(_=!0)),(f||_)&&this._fillPoles(u,f,_)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let f=0;f<u.length;f+=2){const _=u[f+1];_===Pm&&(u[f+1]=-32767),_===Gy&&(u[f+1]=32766)}}_generatePoleQuad(u,f,_,E,R,N){E>R!=(N===Pm)?(u.push(f),u.push(_),u.push(this._vertexToIndex(E,N)),u.push(_),u.push(this._vertexToIndex(R,N)),u.push(this._vertexToIndex(E,N))):(u.push(_),u.push(f),u.push(this._vertexToIndex(E,N)),u.push(this._vertexToIndex(R,N)),u.push(_),u.push(this._vertexToIndex(E,N)))}_fillPoles(u,f,_){const E=this._vertexBuffer,R=ce,N=u.length;for(let V=2;V<N;V+=3){const Q=u[V-2],oe=u[V-1],de=u[V],ve=E[2*Q],Fe=E[2*Q+1],je=E[2*oe],Ve=E[2*oe+1],Xe=E[2*de],st=E[2*de+1];f&&(Fe===0&&Ve===0&&this._generatePoleQuad(u,Q,oe,ve,je,Pm),Ve===0&&st===0&&this._generatePoleQuad(u,oe,de,je,Xe,Pm),st===0&&Fe===0&&this._generatePoleQuad(u,de,Q,Xe,ve,Pm)),_&&(Fe===R&&Ve===R&&this._generatePoleQuad(u,Q,oe,ve,je,Gy),Ve===R&&st===R&&this._generatePoleQuad(u,oe,de,je,Xe,Gy),st===R&&Fe===R&&this._generatePoleQuad(u,de,Q,Xe,ve,Gy))}}_initializeVertices(u){for(let f=0;f<u.length;f+=2)this._vertexToIndex(u[f],u[f+1])}subdividePolygonInternal(u,f){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:_,holeIndices:E}=(function(V){const Q=[],oe=[];for(const de of V)if(de.length!==0){de!==V[0]&&Q.push(oe.length/2);for(let ve=0;ve<de.length;ve++)oe.push(de[ve].x),oe.push(de[ve].y)}return{flattened:oe,holeIndices:Q}})(u);let R;this._initializeVertices(_);try{const V=(function(oe,de,ve=2){const Fe=de&&de.length,je=Fe?de[0]*ve:oe.length;let Ve=kA(oe,0,je,ve,!0);const Xe=[];if(!Ve||Ve.next===Ve.prev)return Xe;let st,yt,Vt;if(Fe&&(Ve=(function(Lt,ze,nt,Nt){const vr=[];for(let Gr=0,Tr=ze.length;Gr<Tr;Gr++){const Mr=kA(Lt,ze[Gr]*Nt,Gr<Tr-1?ze[Gr+1]*Nt:Lt.length,Nt,!1);Mr===Mr.next&&(Mr.steiner=!0),vr.push(oH(Mr))}vr.sort(nH);for(let Gr=0;Gr<vr.length;Gr++)nt=iH(vr[Gr],nt);return nt})(oe,de,Ve,ve)),oe.length>80*ve){st=1/0,yt=1/0;let Lt=-1/0,ze=-1/0;for(let nt=ve;nt<je;nt+=ve){const Nt=oe[nt],vr=oe[nt+1];Nt<st&&(st=Nt),vr<yt&&(yt=vr),Nt>Lt&&(Lt=Nt),vr>ze&&(ze=vr)}Vt=Math.max(Lt-st,ze-yt),Vt=Vt!==0?32767/Vt:0}return qy(Ve,Xe,ve,st,yt,Vt,0),Xe})(_,E),Q=this._convertIndices(_,V);R=this._subdivideTrianglesScanline(Q)}catch(V){console.error(V)}let N=[];return f&&(N=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(R),{verticesFlattened:this._vertexBuffer,indicesTriangles:R,indicesLineList:N}}_convertIndices(u,f){const _=[];for(let E=0;E<f.length;E++)_.push(this._vertexToIndex(u[2*f[E]],u[2*f[E]+1]));return _}_pointArrayToIndices(u){const f=[];for(let _=0;_<u.length;_++){const E=u[_];f.push(this._vertexToIndex(E.x,E.y))}return f}}function DA(p,u,f,_=!0){return new lH(f,u).subdividePolygonInternal(p,_)}function sp(p,u,f=!1){if(!p||p.length<1)return[];if(p.length<2)return[];const _=p[0],E=p[p.length-1],R=f&&(_.x!==E.x||_.y!==E.y);if(u<2)return R?[...p,p[0]]:[...p];const N=Math.floor(ce/u),V=[];V.push(new S(p[0].x,p[0].y));const Q=p.length,oe=R?Q:Q-1;for(let de=0;de<oe;de++){const ve=p[de],Fe=de<Q-1?p[de+1]:p[0],je=ve.x,Ve=ve.y,Xe=Fe.x,st=Fe.y,yt=je!==Xe,Vt=Ve!==st;if(!yt&&!Vt)continue;const Lt=Xe-je,ze=st-Ve,nt=Math.abs(Lt),Nt=Math.abs(ze);let vr=je,Gr=Ve;for(;;){const Mr=Lt>0?(Math.floor(vr/N)+1)*N:(Math.ceil(vr/N)-1)*N,Qr=ze>0?(Math.floor(Gr/N)+1)*N:(Math.ceil(Gr/N)-1)*N,Hr=Math.abs(vr-Mr),rn=Math.abs(Gr-Qr),Lr=Math.abs(vr-Xe),kn=Math.abs(Gr-st),Xn=yt?Hr/nt:Number.POSITIVE_INFINITY,Gn=Vt?rn/Nt:Number.POSITIVE_INFINITY;if((Lr<=Hr||!yt)&&(kn<=rn||!Vt))break;if(Xn<Gn&&yt||!Vt){vr=Mr,Gr+=ze*Xn;const Nn=new S(vr,Math.round(Gr));V[V.length-1].x===Nn.x&&V[V.length-1].y===Nn.y||V.push(Nn)}else{vr+=Lt*Gn,Gr=Qr;const Nn=new S(Math.round(vr),Gr);V[V.length-1].x===Nn.x&&V[V.length-1].y===Nn.y||V.push(Nn)}}const Tr=new S(Xe,st);V[V.length-1].x===Tr.x&&V[V.length-1].y===Tr.y||V.push(Tr)}return V}function uH(p,u,f){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let _=0,E=p[2*u[0]];for(let Q=1;Q<u.length;Q++){const oe=p[2*u[Q]];oe<E&&(E=oe,_=Q)}const R=u.length;let N=_,V=(N+1)%R;for(;;){const Q=N-1>=0?N-1:R-1,oe=(V+1)%R,de=p[2*u[Q]],ve=p[2*u[oe]],Fe=p[2*u[N]],je=p[2*u[N]+1],Ve=p[2*u[V]+1];let Xe=!1;if(de<ve)Xe=!0;else if(de>ve)Xe=!1;else{const st=Ve-je,yt=-(p[2*u[V]]-Fe),Vt=je<Ve?1:-1;((de-Fe)*st+(p[2*u[Q]+1]-je)*yt)*Vt>((ve-Fe)*st+(p[2*u[oe]+1]-je)*yt)*Vt&&(Xe=!0)}if(Xe){const st=u[Q],yt=u[N],Vt=u[V];st!==yt&&st!==Vt&&yt!==Vt&&f.push(Vt,yt,st),N--,N<0&&(N=R-1)}else{const st=u[oe],yt=u[N],Vt=u[V];st!==yt&&st!==Vt&&yt!==Vt&&f.push(Vt,yt,st),V++,V>=R&&(V=0)}if(Q===oe)break}}function NA(p,u,f,_,E,R,N,V,Q){const oe=E.length/2,de=N&&V&&Q;if(oe<Oi.MAX_VERTEX_ARRAY_LENGTH){const ve=u.prepareSegment(oe,f,_),Fe=ve.vertexLength;for(let Xe=0;Xe<R.length;Xe+=3)_.emplaceBack(Fe+R[Xe],Fe+R[Xe+1],Fe+R[Xe+2]);let je,Ve;ve.vertexLength+=oe,ve.primitiveLength+=R.length/3,de&&(Ve=N.prepareSegment(oe,f,V),je=Ve.vertexLength,Ve.vertexLength+=oe);for(let Xe=0;Xe<E.length;Xe+=2)p(E[Xe],E[Xe+1]);if(de)for(let Xe=0;Xe<Q.length;Xe++){const st=Q[Xe];for(let yt=1;yt<st.length;yt+=2)V.emplaceBack(je+st[yt-1],je+st[yt]);Ve.primitiveLength+=st.length/2}}else(function(ve,Fe,je,Ve,Xe,st){const yt=[];for(let Nt=0;Nt<Ve.length/2;Nt++)yt.push(-1);const Vt={count:0};let Lt=0,ze=ve.getOrCreateLatestSegment(Fe,je),nt=ze.vertexLength;for(let Nt=2;Nt<Xe.length;Nt+=3){const vr=Xe[Nt-2],Gr=Xe[Nt-1],Tr=Xe[Nt];let Mr=yt[vr]<Lt,Qr=yt[Gr]<Lt,Hr=yt[Tr]<Lt;ze.vertexLength+((Mr?1:0)+(Qr?1:0)+(Hr?1:0))>Oi.MAX_VERTEX_ARRAY_LENGTH&&(ze=ve.createNewSegment(Fe,je),Lt=Vt.count,Mr=!0,Qr=!0,Hr=!0,nt=0);const rn=Hy(yt,Ve,st,Vt,vr,Mr,ze),Lr=Hy(yt,Ve,st,Vt,Gr,Qr,ze),kn=Hy(yt,Ve,st,Vt,Tr,Hr,ze);je.emplaceBack(nt+rn-Lt,nt+Lr-Lt,nt+kn-Lt),ze.primitiveLength++}})(u,f,_,E,R,p),de&&(function(ve,Fe,je,Ve,Xe,st){const yt=[];for(let Nt=0;Nt<Ve.length/2;Nt++)yt.push(-1);const Vt={count:0};let Lt=0,ze=ve.getOrCreateLatestSegment(Fe,je),nt=ze.vertexLength;for(let Nt=0;Nt<Xe.length;Nt++){const vr=Xe[Nt];for(let Gr=1;Gr<Xe[Nt].length;Gr+=2){const Tr=vr[Gr-1],Mr=vr[Gr];let Qr=yt[Tr]<Lt,Hr=yt[Mr]<Lt;ze.vertexLength+((Qr?1:0)+(Hr?1:0))>Oi.MAX_VERTEX_ARRAY_LENGTH&&(ze=ve.createNewSegment(Fe,je),Lt=Vt.count,Qr=!0,Hr=!0,nt=0);const rn=Hy(yt,Ve,st,Vt,Tr,Qr,ze),Lr=Hy(yt,Ve,st,Vt,Mr,Hr,ze);je.emplaceBack(nt+rn-Lt,nt+Lr-Lt),ze.primitiveLength++}}})(N,f,V,E,Q,p),u.forceNewSegmentOnNextPrepare(),N?.forceNewSegmentOnNextPrepare()}function Hy(p,u,f,_,E,R,N){if(R){const V=_.count;return f(u[2*E],u[2*E+1]),p[E]=_.count,_.count++,N.vertexLength++,V}return p[E]}class Aw{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wr,this.indexArray=new Xi,this.indexArray2=new Wi,this.programConfigurations=new Rd(u.layers,u.zoom),this.segments=new Oi,this.segments2=new Oi,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(u,f,_){this.hasPattern=Tw("fill",this.layers,f);const E=this.layers[0].layout.get("fill-sort-key"),R=!E.isConstant(),N=[];for(const{feature:V,id:Q,index:oe,sourceLayerIndex:de}of u){const ve=this.layers[0]._featureFilter.needGeometry,Fe=ap(V,ve);if(!this.layers[0]._featureFilter.filter(new Dn(this.zoom,{globalState:this.globalState}),Fe,_))continue;const je=R?E.evaluate(Fe,{},_,f.availableImages):void 0,Ve={id:Q,properties:V.properties,type:V.type,sourceLayerIndex:de,index:oe,geometry:ve?Fe.geometry:ip(V),patterns:{},sortKey:je};N.push(Ve)}R&&N.sort(((V,Q)=>V.sortKey-Q.sortKey));for(const V of N){const{geometry:Q,index:oe,sourceLayerIndex:de}=V;if(this.hasPattern){const ve=Pw("fill",this.layers,V,this.zoom,f);this.patternFeatures.push(ve)}else this.addFeature(V,Q,oe,_,{},f.subdivisionGranularity);f.featureIndex.insert(u[oe].feature,Q,oe,de,this.index)}}update(u,f,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,_)}addFeatures(u,f,_){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,f,_,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,JG),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,f,_,E,R,N){for(const V of qo(f,500)){const Q=DA(V,E,N.fill.getGranularityForZoomLevel(E.z)),oe=this.layoutVertexArray;NA(((de,ve)=>{oe.emplaceBack(de,ve)}),this.segments,this.layoutVertexArray,this.indexArray,Q.verticesFlattened,Q.indicesTriangles,this.segments2,this.indexArray2,Q.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,R,E)}}let OA,FA;_t("FillBucket",Aw,{omit:["layers","patternFeatures"]});var cH={get paint(){return FA=FA||new za({"fill-antialias":new Jr(Et.paint_fill["fill-antialias"]),"fill-opacity":new pn(Et.paint_fill["fill-opacity"]),"fill-color":new pn(Et.paint_fill["fill-color"]),"fill-outline-color":new pn(Et.paint_fill["fill-outline-color"]),"fill-translate":new Jr(Et.paint_fill["fill-translate"]),"fill-translate-anchor":new Jr(Et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ba(Et.paint_fill["fill-pattern"])})},get layout(){return OA=OA||new za({"fill-sort-key":new pn(Et.layout_fill["fill-sort-key"])})}};class dH extends ca{constructor(u){super(u,cH)}recalculate(u,f){super.recalculate(u,f);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Aw(u)}queryRadius(){return L1(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:f,transform:_,pixelsToTileUnits:E}){return mA(R1(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-_.bearingInRadians,E),f)}isTileClipped(){return!0}}const fH=zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),hH=zi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:pH}=fH;var Mw,BA,Lw,zA,Rw,jA,qA,F1={};function $A(){if(BA)return Mw;BA=1;var p=v();function u(E,R,N,V,Q){this.properties={},this.extent=N,this.type=0,this._pbf=E,this._geometry=-1,this._keys=V,this._values=Q,E.readFields(f,this,R)}function f(E,R,N){E==1?R.id=N.readVarint():E==2?(function(V,Q){for(var oe=V.readVarint()+V.pos;V.pos<oe;){var de=Q._keys[V.readVarint()],ve=Q._values[V.readVarint()];Q.properties[de]=ve}})(N,R):E==3?R.type=N.readVarint():E==4&&(R._geometry=N.pos)}function _(E){for(var R,N,V=0,Q=0,oe=E.length,de=oe-1;Q<oe;de=Q++)V+=((N=E[de]).x-(R=E[Q]).x)*(R.y+N.y);return V}return Mw=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var R,N=E.readVarint()+E.pos,V=1,Q=0,oe=0,de=0,ve=[];E.pos<N;){if(Q<=0){var Fe=E.readVarint();V=7&Fe,Q=Fe>>3}if(Q--,V===1||V===2)oe+=E.readSVarint(),de+=E.readSVarint(),V===1&&(R&&ve.push(R),R=[]),R.push(new p(oe,de));else{if(V!==7)throw new Error("unknown command "+V);R&&R.push(R[0].clone())}}return R&&ve.push(R),ve},u.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var R=E.readVarint()+E.pos,N=1,V=0,Q=0,oe=0,de=1/0,ve=-1/0,Fe=1/0,je=-1/0;E.pos<R;){if(V<=0){var Ve=E.readVarint();N=7&Ve,V=Ve>>3}if(V--,N===1||N===2)(Q+=E.readSVarint())<de&&(de=Q),Q>ve&&(ve=Q),(oe+=E.readSVarint())<Fe&&(Fe=oe),oe>je&&(je=oe);else if(N!==7)throw new Error("unknown command "+N)}return[de,Fe,ve,je]},u.prototype.toGeoJSON=function(E,R,N){var V,Q,oe=this.extent*Math.pow(2,N),de=this.extent*E,ve=this.extent*R,Fe=this.loadGeometry(),je=u.types[this.type];function Ve(yt){for(var Vt=0;Vt<yt.length;Vt++){var Lt=yt[Vt];yt[Vt]=[360*(Lt.x+de)/oe-180,360/Math.PI*Math.atan(Math.exp((180-360*(Lt.y+ve)/oe)*Math.PI/180))-90]}}switch(this.type){case 1:var Xe=[];for(V=0;V<Fe.length;V++)Xe[V]=Fe[V][0];Ve(Fe=Xe);break;case 2:for(V=0;V<Fe.length;V++)Ve(Fe[V]);break;case 3:for(Fe=(function(yt){var Vt=yt.length;if(Vt<=1)return[yt];for(var Lt,ze,nt=[],Nt=0;Nt<Vt;Nt++){var vr=_(yt[Nt]);vr!==0&&(ze===void 0&&(ze=vr<0),ze===vr<0?(Lt&&nt.push(Lt),Lt=[yt[Nt]]):Lt.push(yt[Nt]))}return Lt&&nt.push(Lt),nt})(Fe),V=0;V<Fe.length;V++)for(Q=0;Q<Fe[V].length;Q++)Ve(Fe[V][Q])}Fe.length===1?Fe=Fe[0]:je="Multi"+je;var st={type:"Feature",geometry:{type:je,coordinates:Fe},properties:this.properties};return"id"in this&&(st.id=this.id),st},Mw}function VA(){if(zA)return Lw;zA=1;var p=$A();function u(_,E){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=_,this._keys=[],this._values=[],this._features=[],_.readFields(f,this,E),this.length=this._features.length}function f(_,E,R){_===15?E.version=R.readVarint():_===1?E.name=R.readString():_===5?E.extent=R.readVarint():_===2?E._features.push(R.pos):_===3?E._keys.push(R.readString()):_===4&&E._values.push((function(N){for(var V=null,Q=N.readVarint()+N.pos;N.pos<Q;){var oe=N.readVarint()>>3;V=oe===1?N.readString():oe===2?N.readFloat():oe===3?N.readDouble():oe===4?N.readVarint64():oe===5?N.readVarint():oe===6?N.readSVarint():oe===7?N.readBoolean():null}return V})(R))}return Lw=u,u.prototype.feature=function(_){if(_<0||_>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[_];var E=this._pbf.readVarint()+this._pbf.pos;return new p(this._pbf,E,this.extent,this._keys,this._values)},Lw}function UA(){return qA||(qA=1,F1.VectorTile=(function(){if(jA)return Rw;jA=1;var p=VA();function u(f,_,E){if(f===3){var R=new p(E,E.readVarint()+E.pos);R.length&&(_[R.name]=R)}}return Rw=function(f,_){this.layers=f.readFields(u,{},_)},Rw})(),F1.VectorTileFeature=$A(),F1.VectorTileLayer=VA()),F1}var Wy=c(UA());const mH=Wy.VectorTileFeature.types,Dw=Math.pow(2,13);function Xy(p,u,f,_,E,R,N,V){p.emplaceBack(u,f,2*Math.floor(_*Dw)+N,E*Dw*2,R*Dw*2,Math.round(V))}class Nw{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new sn,this.centroidVertexArray=new pr,this.indexArray=new Xi,this.programConfigurations=new Rd(u.layers,u.zoom),this.segments=new Oi,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(u,f,_){this.features=[],this.hasPattern=Tw("fill-extrusion",this.layers,f);for(const{feature:E,id:R,index:N,sourceLayerIndex:V}of u){const Q=this.layers[0]._featureFilter.needGeometry,oe=ap(E,Q);if(!this.layers[0]._featureFilter.filter(new Dn(this.zoom,{globalState:this.globalState}),oe,_))continue;const de={id:R,sourceLayerIndex:V,index:N,geometry:Q?oe.geometry:ip(E),properties:E.properties,type:E.type,patterns:{}};this.hasPattern?this.features.push(Pw("fill-extrusion",this.layers,de,this.zoom,f)):this.addFeature(de,de.geometry,N,_,{},f.subdivisionGranularity),f.featureIndex.insert(E,de.geometry,N,V,this.index,!0)}}addFeatures(u,f,_){for(const E of this.features){const{geometry:R}=E;this.addFeature(E,R,E.index,f,_,u.subdivisionGranularity)}}update(u,f,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,pH),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,hH.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,f,_,E,R,N){for(const V of qo(f,500)){const Q={x:0,y:0,sampleCount:0},oe=this.layoutVertexArray.length;this.processPolygon(Q,E,u,V,N);const de=this.layoutVertexArray.length-oe,ve=Math.floor(Q.x/Q.sampleCount),Fe=Math.floor(Q.y/Q.sampleCount);for(let je=0;je<de;je++)this.centroidVertexArray.emplaceBack(ve,Fe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,R,E)}processPolygon(u,f,_,E,R){if(E.length<1||GA(E[0]))return;for(const ve of E)ve.length!==0&&gH(u,ve);const N={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},V=R.fill.getGranularityForZoomLevel(f.z),Q=mH[_.type]==="Polygon";for(const ve of E){if(ve.length===0||GA(ve))continue;const Fe=sp(ve,V,Q);this._generateSideFaces(Fe,N)}if(!Q)return;const oe=DA(E,f,V,!1),de=this.layoutVertexArray;NA(((ve,Fe)=>{Xy(de,ve,Fe,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,oe.verticesFlattened,oe.indicesTriangles)}_generateSideFaces(u,f){let _=0;for(let E=1;E<u.length;E++){const R=u[E],N=u[E-1];if(yH(R,N))continue;f.segment.vertexLength+4>Oi.MAX_VERTEX_ARRAY_LENGTH&&(f.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const V=R.sub(N)._perp()._unit(),Q=N.dist(R);_+Q>32768&&(_=0),Xy(this.layoutVertexArray,R.x,R.y,V.x,V.y,0,0,_),Xy(this.layoutVertexArray,R.x,R.y,V.x,V.y,0,1,_),_+=Q,Xy(this.layoutVertexArray,N.x,N.y,V.x,V.y,0,0,_),Xy(this.layoutVertexArray,N.x,N.y,V.x,V.y,0,1,_);const oe=f.segment.vertexLength;this.indexArray.emplaceBack(oe,oe+2,oe+1),this.indexArray.emplaceBack(oe+1,oe+2,oe+3),f.segment.vertexLength+=4,f.segment.primitiveLength+=2}}}function gH(p,u){for(let f=0;f<u.length;f++){const _=u[f];f===u.length-1&&u[0].x===_.x&&u[0].y===_.y||(p.x+=_.x,p.y+=_.y,p.sampleCount++)}}function yH(p,u){return p.x===u.x&&(p.x<0||p.x>ce)||p.y===u.y&&(p.y<0||p.y>ce)}function GA(p){return p.every((u=>u.x<0))||p.every((u=>u.x>ce))||p.every((u=>u.y<0))||p.every((u=>u.y>ce))}let HA;_t("FillExtrusionBucket",Nw,{omit:["layers","features"]});var vH={get paint(){return HA=HA||new za({"fill-extrusion-opacity":new Jr(Et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pn(Et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Jr(Et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Jr(Et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ba(Et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pn(Et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pn(Et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Jr(Et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class bH extends ca{constructor(u){super(u,vH)}createBucket(u){return new Nw(u)}queryRadius(){return L1(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:f,featureState:_,geometry:E,transform:R,pixelsToTileUnits:N,pixelPosMatrix:V}){const Q=R1(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-R.bearingInRadians,N),oe=this.paint.get("fill-extrusion-height").evaluate(f,_),de=this.paint.get("fill-extrusion-base").evaluate(f,_),ve=(function(je,Ve){const Xe=[];for(const st of je){const yt=[st.x,st.y,0,1];ke(yt,yt,Ve),Xe.push(new S(yt[0]/yt[3],yt[1]/yt[3]))}return Xe})(Q,V),Fe=(function(je,Ve,Xe,st){const yt=[],Vt=[],Lt=st[8]*Ve,ze=st[9]*Ve,nt=st[10]*Ve,Nt=st[11]*Ve,vr=st[8]*Xe,Gr=st[9]*Xe,Tr=st[10]*Xe,Mr=st[11]*Xe;for(const Qr of je){const Hr=[],rn=[];for(const Lr of Qr){const kn=Lr.x,Xn=Lr.y,Gn=st[0]*kn+st[4]*Xn+st[12],Nn=st[1]*kn+st[5]*Xn+st[13],qi=st[2]*kn+st[6]*Xn+st[14],Co=st[3]*kn+st[7]*Xn+st[15],ys=qi+nt,_l=Co+Nt,ac=Gn+vr,xu=Nn+Gr,il=qi+Tr,yo=Co+Mr,qs=new S((Gn+Lt)/_l,(Nn+ze)/_l);qs.z=ys/_l,Hr.push(qs);const al=new S(ac/yo,xu/yo);al.z=il/yo,rn.push(al)}yt.push(Hr),Vt.push(rn)}return[yt,Vt]})(E,de,oe,V);return(function(je,Ve,Xe){let st=1/0;mA(Xe,Ve)&&(st=WA(Xe,Ve[0]));for(let yt=0;yt<Ve.length;yt++){const Vt=Ve[yt],Lt=je[yt];for(let ze=0;ze<Vt.length-1;ze++){const nt=Vt[ze],Nt=[nt,Vt[ze+1],Lt[ze+1],Lt[ze],nt];pA(Xe,Nt)&&(st=Math.min(st,WA(Xe,Nt)))}}return st!==1/0&&st})(Fe[0],Fe[1],ve)}}function Yy(p,u){return p.x*u.x+p.y*u.y}function WA(p,u){if(p.length===1){let f=0;const _=u[f++];let E;for(;!E||_.equals(E);)if(E=u[f++],!E)return 1/0;for(;f<u.length;f++){const R=u[f],N=p[0],V=E.sub(_),Q=R.sub(_),oe=N.sub(_),de=Yy(V,V),ve=Yy(V,Q),Fe=Yy(Q,Q),je=Yy(oe,V),Ve=Yy(oe,Q),Xe=de*Fe-ve*ve,st=(Fe*je-ve*Ve)/Xe,yt=(de*Ve-ve*je)/Xe,Vt=_.z*(1-st-yt)+E.z*st+R.z*yt;if(isFinite(Vt))return Vt}return 1/0}{let f=1/0;for(const _ of u)f=Math.min(f,_.z);return f}}const _H=zi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xH}=_H,wH=zi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:SH}=wH,CH=Wy.VectorTileFeature.types,EH=Math.cos(Math.PI/180*37.5),XA=Math.pow(2,14)/.5;class Ow{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((f=>{this.gradients[f.id]={}})),this.layoutVertexArray=new on,this.layoutVertexArray2=new $r,this.indexArray=new Xi,this.programConfigurations=new Rd(u.layers,u.zoom),this.segments=new Oi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(u,f,_){this.hasPattern=Tw("line",this.layers,f);const E=this.layers[0].layout.get("line-sort-key"),R=!E.isConstant(),N=[];for(const{feature:V,id:Q,index:oe,sourceLayerIndex:de}of u){const ve=this.layers[0]._featureFilter.needGeometry,Fe=ap(V,ve);if(!this.layers[0]._featureFilter.filter(new Dn(this.zoom,{globalState:this.globalState}),Fe,_))continue;const je=R?E.evaluate(Fe,{},_):void 0,Ve={id:Q,properties:V.properties,type:V.type,sourceLayerIndex:de,index:oe,geometry:ve?Fe.geometry:ip(V),patterns:{},sortKey:je};N.push(Ve)}R&&N.sort(((V,Q)=>V.sortKey-Q.sortKey));for(const V of N){const{geometry:Q,index:oe,sourceLayerIndex:de}=V;if(this.hasPattern){const ve=Pw("line",this.layers,V,this.zoom,f);this.patternFeatures.push(ve)}else this.addFeature(V,Q,oe,_,{},f.subdivisionGranularity);f.featureIndex.insert(u[oe].feature,Q,oe,de,this.index)}}update(u,f,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,f,this.stateDependentLayers,_)}addFeatures(u,f,_){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,f,_,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,SH)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,xH),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,f,_,E,R,N){const V=this.layers[0].layout,Q=V.get("line-join").evaluate(u,{}),oe=V.get("line-cap"),de=V.get("line-miter-limit"),ve=V.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Fe of f)this.addLine(Fe,u,Q,oe,de,ve,E,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,R,E)}addLine(u,f,_,E,R,N,V,Q){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=sp(u,V?Q.line.getGranularityForZoomLevel(V.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Lt=0;Lt<u.length-1;Lt++)this.totalDistance+=u[Lt].dist(u[Lt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const oe=CH[f.type]==="Polygon";let de=u.length;for(;de>=2&&u[de-1].equals(u[de-2]);)de--;let ve=0;for(;ve<de-1&&u[ve].equals(u[ve+1]);)ve++;if(de<(oe?3:2))return;_==="bevel"&&(R=1.05);const Fe=this.overscaling<=16?122880/(512*this.overscaling):0,je=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let Ve,Xe,st,yt,Vt;this.e1=this.e2=-1,oe&&(Ve=u[de-2],Vt=u[ve].sub(Ve)._unit()._perp());for(let Lt=ve;Lt<de;Lt++){if(st=Lt===de-1?oe?u[ve+1]:void 0:u[Lt+1],st&&u[Lt].equals(st))continue;Vt&&(yt=Vt),Ve&&(Xe=Ve),Ve=u[Lt],Vt=st?st.sub(Ve)._unit()._perp():yt,yt=yt||Vt;let ze=yt.add(Vt);ze.x===0&&ze.y===0||ze._unit();const nt=yt.x*Vt.x+yt.y*Vt.y,Nt=ze.x*Vt.x+ze.y*Vt.y,vr=Nt!==0?1/Nt:1/0,Gr=2*Math.sqrt(2-2*Nt),Tr=Nt<EH&&Xe&&st,Mr=yt.x*Vt.y-yt.y*Vt.x>0;if(Tr&&Lt>ve){const rn=Ve.dist(Xe);if(rn>2*Fe){const Lr=Ve.sub(Ve.sub(Xe)._mult(Fe/rn)._round());this.updateDistance(Xe,Lr),this.addCurrentVertex(Lr,yt,0,0,je),Xe=Lr}}const Qr=Xe&&st;let Hr=Qr?_:oe?"butt":E;if(Qr&&Hr==="round"&&(vr<N?Hr="miter":vr<=2&&(Hr="fakeround")),Hr==="miter"&&vr>R&&(Hr="bevel"),Hr==="bevel"&&(vr>2&&(Hr="flipbevel"),vr<R&&(Hr="miter")),Xe&&this.updateDistance(Xe,Ve),Hr==="miter")ze._mult(vr),this.addCurrentVertex(Ve,ze,0,0,je);else if(Hr==="flipbevel"){if(vr>100)ze=Vt.mult(-1);else{const rn=vr*yt.add(Vt).mag()/yt.sub(Vt).mag();ze._perp()._mult(rn*(Mr?-1:1))}this.addCurrentVertex(Ve,ze,0,0,je),this.addCurrentVertex(Ve,ze.mult(-1),0,0,je)}else if(Hr==="bevel"||Hr==="fakeround"){const rn=-Math.sqrt(vr*vr-1),Lr=Mr?rn:0,kn=Mr?0:rn;if(Xe&&this.addCurrentVertex(Ve,yt,Lr,kn,je),Hr==="fakeround"){const Xn=Math.round(180*Gr/Math.PI/20);for(let Gn=1;Gn<Xn;Gn++){let Nn=Gn/Xn;if(Nn!==.5){const Co=Nn-.5;Nn+=Nn*Co*(Nn-1)*((1.0904+nt*(nt*(3.55645-1.43519*nt)-3.2452))*Co*Co+(.848013+nt*(.215638*nt-1.06021)))}const qi=Vt.sub(yt)._mult(Nn)._add(yt)._unit()._mult(Mr?-1:1);this.addHalfVertex(Ve,qi.x,qi.y,!1,Mr,0,je)}}st&&this.addCurrentVertex(Ve,Vt,-Lr,-kn,je)}else if(Hr==="butt")this.addCurrentVertex(Ve,ze,0,0,je);else if(Hr==="square"){const rn=Xe?1:-1;this.addCurrentVertex(Ve,ze,rn,rn,je)}else Hr==="round"&&(Xe&&(this.addCurrentVertex(Ve,yt,0,0,je),this.addCurrentVertex(Ve,yt,1,1,je,!0)),st&&(this.addCurrentVertex(Ve,Vt,-1,-1,je,!0),this.addCurrentVertex(Ve,Vt,0,0,je)));if(Tr&&Lt<de-1){const rn=Ve.dist(st);if(rn>2*Fe){const Lr=Ve.add(st.sub(Ve)._mult(Fe/rn)._round());this.updateDistance(Ve,Lr),this.addCurrentVertex(Lr,Vt,0,0,je),Ve=Lr}}}}addCurrentVertex(u,f,_,E,R,N=!1){const V=f.y*E-f.x,Q=-f.y-f.x*E;this.addHalfVertex(u,f.x+f.y*_,f.y-f.x*_,N,!1,_,R),this.addHalfVertex(u,V,Q,N,!0,-E,R),this.distance>XA/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,f,_,E,R,N))}addHalfVertex({x:u,y:f},_,E,R,N,V,Q){const oe=.5*(this.lineClips?this.scaledDistance*(XA-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(R?1:0),(f<<1)+(N?1:0),Math.round(63*_)+128,Math.round(63*E)+128,1+(V===0?0:V<0?-1:1)|(63&oe)<<2,oe>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const de=Q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,de,this.e2),Q.primitiveLength++),N?this.e2=de:this.e1=de}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,f){this.distance+=u.dist(f),this.updateScaledDistance()}}let YA,ZA;_t("LineBucket",Ow,{omit:["layers","patternFeatures"]});var KA={get paint(){return ZA=ZA||new za({"line-opacity":new pn(Et.paint_line["line-opacity"]),"line-color":new pn(Et.paint_line["line-color"]),"line-translate":new Jr(Et.paint_line["line-translate"]),"line-translate-anchor":new Jr(Et.paint_line["line-translate-anchor"]),"line-width":new pn(Et.paint_line["line-width"]),"line-gap-width":new pn(Et.paint_line["line-gap-width"]),"line-offset":new pn(Et.paint_line["line-offset"]),"line-blur":new pn(Et.paint_line["line-blur"]),"line-dasharray":new ra(Et.paint_line["line-dasharray"]),"line-pattern":new Ba(Et.paint_line["line-pattern"]),"line-gradient":new wo(Et.paint_line["line-gradient"])})},get layout(){return YA=YA||new za({"line-cap":new Jr(Et.layout_line["line-cap"]),"line-join":new pn(Et.layout_line["line-join"]),"line-miter-limit":new Jr(Et.layout_line["line-miter-limit"]),"line-round-limit":new Jr(Et.layout_line["line-round-limit"]),"line-sort-key":new pn(Et.layout_line["line-sort-key"])})}};class TH extends pn{possiblyEvaluate(u,f){return f=new Dn(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(u,f)}evaluate(u,f,_,E){return f=Qe({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(u,f,_,E)}}let B1;class PH extends ca{constructor(u){super(u,KA),this.gradientVersion=0,B1||(B1=new TH(KA.paint.properties["line-width"].specification),B1.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!(function(_){return _._styleExpression!==void 0})(f)&&f._styleExpression.expression instanceof Nr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,f){super.recalculate(u,f),this.paint._values["line-floorwidth"]=B1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Ow(u)}queryRadius(u){const f=u,_=JA(zy("line-width",this,f),zy("line-gap-width",this,f)),E=zy("line-offset",this,f);return _/2+Math.abs(E)+L1(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:f,featureState:_,geometry:E,transform:R,pixelsToTileUnits:N}){const V=R1(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-R.bearingInRadians,N),Q=N/2*JA(this.paint.get("line-width").evaluate(f,_),this.paint.get("line-gap-width").evaluate(f,_)),oe=this.paint.get("line-offset").evaluate(f,_);return oe&&(E=(function(de,ve){const Fe=[];for(let je=0;je<de.length;je++){const Ve=de[je],Xe=[];for(let st=0;st<Ve.length;st++){const yt=Ve[st-1],Vt=Ve[st],Lt=Ve[st+1],ze=st===0?new S(0,0):Vt.sub(yt)._unit()._perp(),nt=st===Ve.length-1?new S(0,0):Lt.sub(Vt)._unit()._perp(),Nt=ze._add(nt)._unit(),vr=Nt.x*nt.x+Nt.y*nt.y;vr!==0&&Nt._mult(1/vr),Xe.push(Nt._mult(ve)._add(Vt))}Fe.push(Xe)}return Fe})(E,oe*N)),(function(de,ve,Fe){for(let je=0;je<ve.length;je++){const Ve=ve[je];if(de.length>=3){for(let Xe=0;Xe<Ve.length;Xe++)if(Cm(de,Ve[Xe]))return!0}if(jG(de,Ve,Fe))return!0}return!1})(V,E,Q)}isTileClipped(){return!0}}function JA(p,u){return u>0?u+2*p:p}const IH=zi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kH=zi([{name:"a_projected_pos",components:3,type:"Float32"}],4);zi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const AH=zi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);zi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const QA=zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),MH=zi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function LH(p,u,f){return p.sections.forEach((_=>{_.text=(function(E,R,N){const V=R.layout.get("text-transform").evaluate(N,{});return V==="uppercase"?E=E.toLocaleUpperCase():V==="lowercase"&&(E=E.toLocaleLowerCase()),ya.applyArabicShaping&&(E=ya.applyArabicShaping(E)),E})(_.text,u,f)})),p}zi([{name:"triangle",components:3,type:"Uint16"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),zi([{type:"Float32",name:"offsetX"}]),zi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),zi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Zy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var eM,Fw,tM,js=24,Bw={};function RH(){return eM||(eM=1,Bw.read=function(p,u,f,_,E){var R,N,V=8*E-_-1,Q=(1<<V)-1,oe=Q>>1,de=-7,ve=f?E-1:0,Fe=f?-1:1,je=p[u+ve];for(ve+=Fe,R=je&(1<<-de)-1,je>>=-de,de+=V;de>0;R=256*R+p[u+ve],ve+=Fe,de-=8);for(N=R&(1<<-de)-1,R>>=-de,de+=_;de>0;N=256*N+p[u+ve],ve+=Fe,de-=8);if(R===0)R=1-oe;else{if(R===Q)return N?NaN:1/0*(je?-1:1);N+=Math.pow(2,_),R-=oe}return(je?-1:1)*N*Math.pow(2,R-_)},Bw.write=function(p,u,f,_,E,R){var N,V,Q,oe=8*R-E-1,de=(1<<oe)-1,ve=de>>1,Fe=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,je=_?0:R-1,Ve=_?1:-1,Xe=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(V=isNaN(u)?1:0,N=de):(N=Math.floor(Math.log(u)/Math.LN2),u*(Q=Math.pow(2,-N))<1&&(N--,Q*=2),(u+=N+ve>=1?Fe/Q:Fe*Math.pow(2,1-ve))*Q>=2&&(N++,Q/=2),N+ve>=de?(V=0,N=de):N+ve>=1?(V=(u*Q-1)*Math.pow(2,E),N+=ve):(V=u*Math.pow(2,ve-1)*Math.pow(2,E),N=0));E>=8;p[f+je]=255&V,je+=Ve,V/=256,E-=8);for(N=N<<E|V,oe+=E;oe>0;p[f+je]=255&N,je+=Ve,N/=256,oe-=8);p[f+je-Ve]|=128*Xe}),Bw}function rM(){if(tM)return Fw;tM=1,Fw=u;var p=RH();function u(ze){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ze)?ze:new Uint8Array(ze||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var f=4294967296,_=1/f,E=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function R(ze){return ze.type===u.Bytes?ze.readVarint()+ze.pos:ze.pos+1}function N(ze,nt,Nt){return Nt?4294967296*nt+(ze>>>0):4294967296*(nt>>>0)+(ze>>>0)}function V(ze,nt,Nt){var vr=nt<=16383?1:nt<=2097151?2:nt<=268435455?3:Math.floor(Math.log(nt)/(7*Math.LN2));Nt.realloc(vr);for(var Gr=Nt.pos-1;Gr>=ze;Gr--)Nt.buf[Gr+vr]=Nt.buf[Gr]}function Q(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeVarint(ze[Nt])}function oe(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeSVarint(ze[Nt])}function de(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeFloat(ze[Nt])}function ve(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeDouble(ze[Nt])}function Fe(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeBoolean(ze[Nt])}function je(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeFixed32(ze[Nt])}function Ve(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeSFixed32(ze[Nt])}function Xe(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeFixed64(ze[Nt])}function st(ze,nt){for(var Nt=0;Nt<ze.length;Nt++)nt.writeSFixed64(ze[Nt])}function yt(ze,nt){return(ze[nt]|ze[nt+1]<<8|ze[nt+2]<<16)+16777216*ze[nt+3]}function Vt(ze,nt,Nt){ze[Nt]=nt,ze[Nt+1]=nt>>>8,ze[Nt+2]=nt>>>16,ze[Nt+3]=nt>>>24}function Lt(ze,nt){return(ze[nt]|ze[nt+1]<<8|ze[nt+2]<<16)+(ze[nt+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(ze,nt,Nt){for(Nt=Nt||this.length;this.pos<Nt;){var vr=this.readVarint(),Gr=vr>>3,Tr=this.pos;this.type=7&vr,ze(Gr,nt,this),this.pos===Tr&&this.skip(vr)}return nt},readMessage:function(ze,nt){return this.readFields(ze,nt,this.readVarint()+this.pos)},readFixed32:function(){var ze=yt(this.buf,this.pos);return this.pos+=4,ze},readSFixed32:function(){var ze=Lt(this.buf,this.pos);return this.pos+=4,ze},readFixed64:function(){var ze=yt(this.buf,this.pos)+yt(this.buf,this.pos+4)*f;return this.pos+=8,ze},readSFixed64:function(){var ze=yt(this.buf,this.pos)+Lt(this.buf,this.pos+4)*f;return this.pos+=8,ze},readFloat:function(){var ze=p.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ze},readDouble:function(){var ze=p.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ze},readVarint:function(ze){var nt,Nt,vr=this.buf;return nt=127&(Nt=vr[this.pos++]),Nt<128?nt:(nt|=(127&(Nt=vr[this.pos++]))<<7,Nt<128?nt:(nt|=(127&(Nt=vr[this.pos++]))<<14,Nt<128?nt:(nt|=(127&(Nt=vr[this.pos++]))<<21,Nt<128?nt:(function(Gr,Tr,Mr){var Qr,Hr,rn=Mr.buf;if(Qr=(112&(Hr=rn[Mr.pos++]))>>4,Hr<128||(Qr|=(127&(Hr=rn[Mr.pos++]))<<3,Hr<128)||(Qr|=(127&(Hr=rn[Mr.pos++]))<<10,Hr<128)||(Qr|=(127&(Hr=rn[Mr.pos++]))<<17,Hr<128)||(Qr|=(127&(Hr=rn[Mr.pos++]))<<24,Hr<128)||(Qr|=(1&(Hr=rn[Mr.pos++]))<<31,Hr<128))return N(Gr,Qr,Tr);throw new Error("Expected varint not more than 10 bytes")})(nt|=(15&(Nt=vr[this.pos]))<<28,ze,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ze=this.readVarint();return ze%2==1?(ze+1)/-2:ze/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ze=this.readVarint()+this.pos,nt=this.pos;return this.pos=ze,ze-nt>=12&&E?(function(Nt,vr,Gr){return E.decode(Nt.subarray(vr,Gr))})(this.buf,nt,ze):(function(Nt,vr,Gr){for(var Tr="",Mr=vr;Mr<Gr;){var Qr,Hr,rn,Lr=Nt[Mr],kn=null,Xn=Lr>239?4:Lr>223?3:Lr>191?2:1;if(Mr+Xn>Gr)break;Xn===1?Lr<128&&(kn=Lr):Xn===2?(192&(Qr=Nt[Mr+1]))==128&&(kn=(31&Lr)<<6|63&Qr)<=127&&(kn=null):Xn===3?(Hr=Nt[Mr+2],(192&(Qr=Nt[Mr+1]))==128&&(192&Hr)==128&&((kn=(15&Lr)<<12|(63&Qr)<<6|63&Hr)<=2047||kn>=55296&&kn<=57343)&&(kn=null)):Xn===4&&(Hr=Nt[Mr+2],rn=Nt[Mr+3],(192&(Qr=Nt[Mr+1]))==128&&(192&Hr)==128&&(192&rn)==128&&((kn=(15&Lr)<<18|(63&Qr)<<12|(63&Hr)<<6|63&rn)<=65535||kn>=1114112)&&(kn=null)),kn===null?(kn=65533,Xn=1):kn>65535&&(kn-=65536,Tr+=String.fromCharCode(kn>>>10&1023|55296),kn=56320|1023&kn),Tr+=String.fromCharCode(kn),Mr+=Xn}return Tr})(this.buf,nt,ze)},readBytes:function(){var ze=this.readVarint()+this.pos,nt=this.buf.subarray(this.pos,ze);return this.pos=ze,nt},readPackedVarint:function(ze,nt){if(this.type!==u.Bytes)return ze.push(this.readVarint(nt));var Nt=R(this);for(ze=ze||[];this.pos<Nt;)ze.push(this.readVarint(nt));return ze},readPackedSVarint:function(ze){if(this.type!==u.Bytes)return ze.push(this.readSVarint());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readSVarint());return ze},readPackedBoolean:function(ze){if(this.type!==u.Bytes)return ze.push(this.readBoolean());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readBoolean());return ze},readPackedFloat:function(ze){if(this.type!==u.Bytes)return ze.push(this.readFloat());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readFloat());return ze},readPackedDouble:function(ze){if(this.type!==u.Bytes)return ze.push(this.readDouble());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readDouble());return ze},readPackedFixed32:function(ze){if(this.type!==u.Bytes)return ze.push(this.readFixed32());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readFixed32());return ze},readPackedSFixed32:function(ze){if(this.type!==u.Bytes)return ze.push(this.readSFixed32());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readSFixed32());return ze},readPackedFixed64:function(ze){if(this.type!==u.Bytes)return ze.push(this.readFixed64());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readFixed64());return ze},readPackedSFixed64:function(ze){if(this.type!==u.Bytes)return ze.push(this.readSFixed64());var nt=R(this);for(ze=ze||[];this.pos<nt;)ze.push(this.readSFixed64());return ze},skip:function(ze){var nt=7&ze;if(nt===u.Varint)for(;this.buf[this.pos++]>127;);else if(nt===u.Bytes)this.pos=this.readVarint()+this.pos;else if(nt===u.Fixed32)this.pos+=4;else{if(nt!==u.Fixed64)throw new Error("Unimplemented type: "+nt);this.pos+=8}},writeTag:function(ze,nt){this.writeVarint(ze<<3|nt)},realloc:function(ze){for(var nt=this.length||16;nt<this.pos+ze;)nt*=2;if(nt!==this.length){var Nt=new Uint8Array(nt);Nt.set(this.buf),this.buf=Nt,this.length=nt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ze){this.realloc(4),Vt(this.buf,ze,this.pos),this.pos+=4},writeSFixed32:function(ze){this.realloc(4),Vt(this.buf,ze,this.pos),this.pos+=4},writeFixed64:function(ze){this.realloc(8),Vt(this.buf,-1&ze,this.pos),Vt(this.buf,Math.floor(ze*_),this.pos+4),this.pos+=8},writeSFixed64:function(ze){this.realloc(8),Vt(this.buf,-1&ze,this.pos),Vt(this.buf,Math.floor(ze*_),this.pos+4),this.pos+=8},writeVarint:function(ze){(ze=+ze||0)>268435455||ze<0?(function(nt,Nt){var vr,Gr;if(nt>=0?(vr=nt%4294967296|0,Gr=nt/4294967296|0):(Gr=~(-nt/4294967296),4294967295^(vr=~(-nt%4294967296))?vr=vr+1|0:(vr=0,Gr=Gr+1|0)),nt>=18446744073709552e3||nt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Nt.realloc(10),(function(Tr,Mr,Qr){Qr.buf[Qr.pos++]=127&Tr|128,Tr>>>=7,Qr.buf[Qr.pos++]=127&Tr|128,Tr>>>=7,Qr.buf[Qr.pos++]=127&Tr|128,Tr>>>=7,Qr.buf[Qr.pos++]=127&Tr|128,Qr.buf[Qr.pos]=127&(Tr>>>=7)})(vr,0,Nt),(function(Tr,Mr){var Qr=(7&Tr)<<4;Mr.buf[Mr.pos++]|=Qr|((Tr>>>=3)?128:0),Tr&&(Mr.buf[Mr.pos++]=127&Tr|((Tr>>>=7)?128:0),Tr&&(Mr.buf[Mr.pos++]=127&Tr|((Tr>>>=7)?128:0),Tr&&(Mr.buf[Mr.pos++]=127&Tr|((Tr>>>=7)?128:0),Tr&&(Mr.buf[Mr.pos++]=127&Tr|((Tr>>>=7)?128:0),Tr&&(Mr.buf[Mr.pos++]=127&Tr)))))})(Gr,Nt)})(ze,this):(this.realloc(4),this.buf[this.pos++]=127&ze|(ze>127?128:0),ze<=127||(this.buf[this.pos++]=127&(ze>>>=7)|(ze>127?128:0),ze<=127||(this.buf[this.pos++]=127&(ze>>>=7)|(ze>127?128:0),ze<=127||(this.buf[this.pos++]=ze>>>7&127))))},writeSVarint:function(ze){this.writeVarint(ze<0?2*-ze-1:2*ze)},writeBoolean:function(ze){this.writeVarint(!!ze)},writeString:function(ze){ze=String(ze),this.realloc(4*ze.length),this.pos++;var nt=this.pos;this.pos=(function(vr,Gr,Tr){for(var Mr,Qr,Hr=0;Hr<Gr.length;Hr++){if((Mr=Gr.charCodeAt(Hr))>55295&&Mr<57344){if(!Qr){Mr>56319||Hr+1===Gr.length?(vr[Tr++]=239,vr[Tr++]=191,vr[Tr++]=189):Qr=Mr;continue}if(Mr<56320){vr[Tr++]=239,vr[Tr++]=191,vr[Tr++]=189,Qr=Mr;continue}Mr=Qr-55296<<10|Mr-56320|65536,Qr=null}else Qr&&(vr[Tr++]=239,vr[Tr++]=191,vr[Tr++]=189,Qr=null);Mr<128?vr[Tr++]=Mr:(Mr<2048?vr[Tr++]=Mr>>6|192:(Mr<65536?vr[Tr++]=Mr>>12|224:(vr[Tr++]=Mr>>18|240,vr[Tr++]=Mr>>12&63|128),vr[Tr++]=Mr>>6&63|128),vr[Tr++]=63&Mr|128)}return Tr})(this.buf,ze,this.pos);var Nt=this.pos-nt;Nt>=128&&V(nt,Nt,this),this.pos=nt-1,this.writeVarint(Nt),this.pos+=Nt},writeFloat:function(ze){this.realloc(4),p.write(this.buf,ze,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ze){this.realloc(8),p.write(this.buf,ze,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ze){var nt=ze.length;this.writeVarint(nt),this.realloc(nt);for(var Nt=0;Nt<nt;Nt++)this.buf[this.pos++]=ze[Nt]},writeRawMessage:function(ze,nt){this.pos++;var Nt=this.pos;ze(nt,this);var vr=this.pos-Nt;vr>=128&&V(Nt,vr,this),this.pos=Nt-1,this.writeVarint(vr),this.pos+=vr},writeMessage:function(ze,nt,Nt){this.writeTag(ze,u.Bytes),this.writeRawMessage(nt,Nt)},writePackedVarint:function(ze,nt){nt.length&&this.writeMessage(ze,Q,nt)},writePackedSVarint:function(ze,nt){nt.length&&this.writeMessage(ze,oe,nt)},writePackedBoolean:function(ze,nt){nt.length&&this.writeMessage(ze,Fe,nt)},writePackedFloat:function(ze,nt){nt.length&&this.writeMessage(ze,de,nt)},writePackedDouble:function(ze,nt){nt.length&&this.writeMessage(ze,ve,nt)},writePackedFixed32:function(ze,nt){nt.length&&this.writeMessage(ze,je,nt)},writePackedSFixed32:function(ze,nt){nt.length&&this.writeMessage(ze,Ve,nt)},writePackedFixed64:function(ze,nt){nt.length&&this.writeMessage(ze,Xe,nt)},writePackedSFixed64:function(ze,nt){nt.length&&this.writeMessage(ze,st,nt)},writeBytesField:function(ze,nt){this.writeTag(ze,u.Bytes),this.writeBytes(nt)},writeFixed32Field:function(ze,nt){this.writeTag(ze,u.Fixed32),this.writeFixed32(nt)},writeSFixed32Field:function(ze,nt){this.writeTag(ze,u.Fixed32),this.writeSFixed32(nt)},writeFixed64Field:function(ze,nt){this.writeTag(ze,u.Fixed64),this.writeFixed64(nt)},writeSFixed64Field:function(ze,nt){this.writeTag(ze,u.Fixed64),this.writeSFixed64(nt)},writeVarintField:function(ze,nt){this.writeTag(ze,u.Varint),this.writeVarint(nt)},writeSVarintField:function(ze,nt){this.writeTag(ze,u.Varint),this.writeSVarint(nt)},writeStringField:function(ze,nt){this.writeTag(ze,u.Bytes),this.writeString(nt)},writeFloatField:function(ze,nt){this.writeTag(ze,u.Fixed32),this.writeFloat(nt)},writeDoubleField:function(ze,nt){this.writeTag(ze,u.Fixed64),this.writeDouble(nt)},writeBooleanField:function(ze,nt){this.writeVarintField(ze,!!nt)}},Fw}var dh,zw=c(rM());function DH(p,u,f){p===1&&f.readMessage(NH,u)}function NH(p,u,f){if(p===3){const{id:_,bitmap:E,width:R,height:N,left:V,top:Q,advance:oe}=f.readMessage(OH,{});u.push({id:_,bitmap:new jy({width:R+6,height:N+6},E),metrics:{width:R,height:N,left:V,top:Q,advance:oe}})}}function OH(p,u,f){p===1?u.id=f.readVarint():p===2?u.bitmap=f.readBytes():p===3?u.width=f.readVarint():p===4?u.height=f.readVarint():p===5?u.left=f.readSVarint():p===6?u.top=f.readSVarint():p===7&&(u.advance=f.readVarint())}function nM(p){let u=0,f=0;for(const N of p)u+=N.w*N.h,f=Math.max(f,N.w);p.sort(((N,V)=>V.h-N.h));const _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),f),h:1/0}];let E=0,R=0;for(const N of p)for(let V=_.length-1;V>=0;V--){const Q=_[V];if(!(N.w>Q.w||N.h>Q.h)){if(N.x=Q.x,N.y=Q.y,R=Math.max(R,N.y+N.h),E=Math.max(E,N.x+N.w),N.w===Q.w&&N.h===Q.h){const oe=_.pop();V<_.length&&(_[V]=oe)}else N.h===Q.h?(Q.x+=N.w,Q.w-=N.w):N.w===Q.w?(Q.y+=N.h,Q.h-=N.h):(_.push({x:Q.x+N.w,y:Q.y,w:Q.w-N.w,h:N.h}),Q.y+=N.h,Q.h-=N.h);break}}return{w:E,h:R,fill:u/(E*R)||0}}class jw{constructor(u,{pixelRatio:f,version:_,stretchX:E,stretchY:R,content:N,textFitWidth:V,textFitHeight:Q}){this.paddedRect=u,this.pixelRatio=f,this.stretchX=E,this.stretchY=R,this.content=N,this.version=_,this.textFitWidth=V,this.textFitHeight=Q}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class iM{constructor(u,f){const _={},E={};this.haveRenderCallbacks=[];const R=[];this.addImages(u,_,R),this.addImages(f,E,R);const{w:N,h:V}=nM(R),Q=new _u({width:N||1,height:V||1});for(const oe in u){const de=u[oe],ve=_[oe].paddedRect;_u.copy(de.data,Q,{x:0,y:0},{x:ve.x+1,y:ve.y+1},de.data)}for(const oe in f){const de=f[oe],ve=E[oe].paddedRect,Fe=ve.x+1,je=ve.y+1,Ve=de.data.width,Xe=de.data.height;_u.copy(de.data,Q,{x:0,y:0},{x:Fe,y:je},de.data),_u.copy(de.data,Q,{x:0,y:Xe-1},{x:Fe,y:je-1},{width:Ve,height:1}),_u.copy(de.data,Q,{x:0,y:0},{x:Fe,y:je+Xe},{width:Ve,height:1}),_u.copy(de.data,Q,{x:Ve-1,y:0},{x:Fe-1,y:je},{width:1,height:Xe}),_u.copy(de.data,Q,{x:0,y:0},{x:Fe+Ve,y:je},{width:1,height:Xe})}this.image=Q,this.iconPositions=_,this.patternPositions=E}addImages(u,f,_){for(const E in u){const R=u[E],N={x:0,y:0,w:R.data.width+2,h:R.data.height+2};_.push(N),f[E]=new jw(N,R),R.hasRenderCallback&&this.haveRenderCallbacks.push(E)}}patchUpdatedImages(u,f){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const _ in u.updatedImages)this.patchUpdatedImage(this.iconPositions[_],u.getImage(_),f),this.patchUpdatedImage(this.patternPositions[_],u.getImage(_),f)}patchUpdatedImage(u,f,_){if(!u||!f||u.version===f.version)return;u.version=f.version;const[E,R]=u.tl;_.update(f.data,void 0,{x:E,y:R})}}_t("ImagePosition",jw),_t("ImageAtlas",iM),l.an=void 0,(dh=l.an||(l.an={}))[dh.none=0]="none",dh[dh.horizontal=1]="horizontal",dh[dh.vertical=2]="vertical",dh[dh.horizontalOnly=3]="horizontalOnly";class Ky{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,f,_){const E=new Ky;return E.scale=u||1,E.fontStack=f,E.verticalAlign=_||"bottom",E}static forImage(u,f){const _=new Ky;return _.imageName=u,_.verticalAlign=f||"bottom",_}}class Im{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,f){const _=new Im;for(let E=0;E<u.sections.length;E++){const R=u.sections[E];R.image?_.addImageSection(R):_.addTextSection(R,f)}return _}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let f="";for(let _=0;_<u.length;_++){const E=u.charCodeAt(_+1)||null,R=u.charCodeAt(_-1)||null;f+=E&&Bi(E)&&!Zy[u[_+1]]||R&&Bi(R)&&!Zy[u[_-1]]||!Zy[u[_]]?u[_]:Zy[u[_]]}return f})(this.text)}trim(){let u=0;for(let _=0;_<this.text.length&&j1[this.text.charCodeAt(_)];_++)u++;let f=this.text.length;for(let _=this.text.length-1;_>=0&&_>=u&&j1[this.text.charCodeAt(_)];_--)f--;this.text=this.text.substring(u,f),this.sectionIndex=this.sectionIndex.slice(u,f)}substring(u,f){const _=new Im;return _.text=this.text.substring(u,f),_.sectionIndex=this.sectionIndex.slice(u,f),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,f)=>Math.max(u,this.sections[f].scale)),0)}getMaxImageSize(u){let f=0,_=0;for(let E=0;E<this.length();E++){const R=this.getSection(E);if(R.imageName){const N=u[R.imageName];if(!N)continue;const V=N.displaySize;f=Math.max(f,V[0]),_=Math.max(_,V[1])}}return{maxImageWidth:f,maxImageHeight:_}}addTextSection(u,f){this.text+=u.text,this.sections.push(Ky.forText(u.scale,u.fontStack||f,u.verticalAlign));const _=this.sections.length-1;for(let E=0;E<u.text.length;++E)this.sectionIndex.push(_)}addImageSection(u){const f=u.image?u.image.name:"";if(f.length===0)return void Wt("Can't add FormattedSection with an empty image.");const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(Ky.forImage(f,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Wt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function z1(p,u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve){const Xe=Im.fromFeature(p,E);let st;ve===l.an.vertical&&Xe.verticalizePunctuation();const{processBidirectionalText:yt,processStyledBidirectionalText:Vt}=ya;if(yt&&Xe.sections.length===1){st=[];const nt=yt(Xe.toString(),qw(Xe,oe,R,u,_,je));for(const Nt of nt){const vr=new Im;vr.text=Nt,vr.sections=Xe.sections;for(let Gr=0;Gr<Nt.length;Gr++)vr.sectionIndex.push(0);st.push(vr)}}else if(Vt){st=[];const nt=Vt(Xe.text,Xe.sectionIndex,qw(Xe,oe,R,u,_,je));for(const Nt of nt){const vr=new Im;vr.text=Nt[0],vr.sectionIndex=Nt[1],vr.sections=Xe.sections,st.push(vr)}}else st=(function(nt,Nt){const vr=[],Gr=nt.text;let Tr=0;for(const Mr of Nt)vr.push(nt.substring(Tr,Mr)),Tr=Mr;return Tr<Gr.length&&vr.push(nt.substring(Tr,Gr.length)),vr})(Xe,qw(Xe,oe,R,u,_,je));const Lt=[],ze={positionedLines:Lt,text:Xe.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:ve,iconsInText:!1,verticalizable:!1};return(function(nt,Nt,vr,Gr,Tr,Mr,Qr,Hr,rn,Lr,kn,Xn){let Gn=0,Nn=0,qi=0,Co=0;const ys=Hr==="right"?1:Hr==="left"?0:.5,_l=js/Xn;let ac=0;for(const yo of Tr){yo.trim();const qs=yo.getMaxScale(),al={positionedGlyphs:[],lineOffset:0};nt.positionedLines[ac]=al;const ol=al.positionedGlyphs;let iu=0;if(!yo.length()){Nn+=Mr,++ac;continue}const oc=jH(Gr,yo,_l);for(let wu=0;wu<yo.length();wu++){const vs=yo.getSection(wu),Vs=yo.getSectionIndex(wu),Us=yo.getCharCode(wu),ls=qH(rn,kn,Us);let Qa;if(vs.imageName){if(nt.iconsInText=!0,vs.scale=vs.scale*_l,Qa=VH(vs,ls,qs,oc,Gr),!Qa)continue;iu=Math.max(iu,Qa.imageOffset)}else if(Qa=$H(vs,Us,ls,oc,Nt,vr),!Qa)continue;const{rect:Kc,metrics:Lm,baselineOffset:Jc}=Qa;ol.push({glyph:Us,imageName:vs.imageName,x:Gn,y:Nn+Jc+-17,vertical:ls,scale:vs.scale,fontStack:vs.fontStack,sectionIndex:Vs,metrics:Lm,rect:Kc}),ls?(nt.verticalizable=!0,Gn+=(vs.imageName?Lm.advance:js)*vs.scale+Lr):Gn+=Lm.advance*vs.scale+Lr}ol.length!==0&&(qi=Math.max(Gn-Lr,qi),UH(ol,0,ol.length-1,ys)),Gn=0,al.lineOffset=Math.max(iu,(qs-1)*js);const $s=Mr*qs+iu;Nn+=$s,Co=Math.max($s,Co),++ac}const{horizontalAlign:xu,verticalAlign:il}=$w(Qr);(function(yo,qs,al,ol,iu,oc,$s,wu,vs){const Vs=(qs-al)*iu;let Us=0;Us=oc!==$s?-wu*ol- -17:-ol*vs*$s+.5*$s;for(const ls of yo)for(const Qa of ls.positionedGlyphs)Qa.x+=Vs,Qa.y+=Us})(nt.positionedLines,ys,xu,il,qi,Co,Mr,Nn,Tr.length),nt.top+=-il*Nn,nt.bottom=nt.top+Nn,nt.left+=-xu*qi,nt.right=nt.left+qi})(ze,u,f,_,st,N,V,Q,ve,oe,Fe,Ve),!(function(nt){for(const Nt of nt)if(Nt.positionedGlyphs.length!==0)return!1;return!0})(Lt)&&ze}const j1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},FH={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},BH={40:!0};function aM(p,u,f,_,E,R){if(u.imageName){const N=_[u.imageName];return N?N.displaySize[0]*u.scale*js/R+E:0}{const N=f[u.fontStack],V=N&&N[p];return V?V.metrics.advance*u.scale+E:0}}function oM(p,u,f,_){const E=Math.pow(p-u,2);return _?p<u?E/2:2*E:E+Math.abs(f)*f}function zH(p,u,f){let _=0;return p===10&&(_-=1e4),f&&(_+=150),p!==40&&p!==65288||(_+=50),u!==41&&u!==65289||(_+=50),_}function sM(p,u,f,_,E,R){let N=null,V=oM(u,f,E,R);for(const Q of _){const oe=oM(u-Q.x,f,E,R)+Q.badness;oe<=V&&(N=Q,V=oe)}return{index:p,x:u,priorBreak:N,badness:V}}function lM(p){return p?lM(p.priorBreak).concat(p.index):[]}function qw(p,u,f,_,E,R){if(!p)return[];const N=[],V=(function(ve,Fe,je,Ve,Xe,st){let yt=0;for(let Vt=0;Vt<ve.length();Vt++){const Lt=ve.getSection(Vt);yt+=aM(ve.getCharCode(Vt),Lt,Ve,Xe,Fe,st)}return yt/Math.max(1,Math.ceil(yt/je))})(p,u,f,_,E,R),Q=p.text.indexOf("")>=0;let oe=0;for(let ve=0;ve<p.length();ve++){const Fe=p.getSection(ve),je=p.getCharCode(ve);if(j1[je]||(oe+=aM(je,Fe,_,E,u,R)),ve<p.length()-1){const Ve=!((de=je)<11904)&&(!!yr["CJK Compatibility Forms"](de)||!!yr["CJK Compatibility"](de)||!!yr["CJK Strokes"](de)||!!yr["CJK Symbols and Punctuation"](de)||!!yr["Enclosed CJK Letters and Months"](de)||!!yr["Halfwidth and Fullwidth Forms"](de)||!!yr["Ideographic Description Characters"](de)||!!yr["Vertical Forms"](de)||wi.test(String.fromCodePoint(de)));(FH[je]||Ve||Fe.imageName||ve!==p.length()-2&&BH[p.getCharCode(ve+1)])&&N.push(sM(ve+1,oe,V,N,zH(je,p.getCharCode(ve+1),Ve&&Q),!1))}}var de;return lM(sM(p.length(),oe,V,N,0,!0))}function $w(p){let u=.5,f=.5;switch(p){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(p){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:u,verticalAlign:f}}function jH(p,u,f){const _=u.getMaxScale()*js,{maxImageWidth:E,maxImageHeight:R}=u.getMaxImageSize(p),N=Math.max(_,R*f);return{verticalLineContentWidth:Math.max(_,E*f),horizontalLineContentHeight:N}}function uM(p){switch(p){case"top":return 0;case"center":return .5;default:return 1}}function qH(p,u,f){return!(p===l.an.horizontal||!u&&!zn(f)||u&&(j1[f]||(_=f,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(_)))));var _}function $H(p,u,f,_,E,R){const N=R[p.fontStack],V=(function(oe,de,ve,Fe){if(oe&&oe.rect)return oe;const je=de[ve.fontStack],Ve=je&&je[Fe];return Ve?{rect:null,metrics:Ve.metrics}:null})(N&&N[u],E,p,u);if(V===null)return null;let Q;if(f)Q=_.verticalLineContentWidth-p.scale*js;else{const oe=uM(p.verticalAlign);Q=(_.horizontalLineContentHeight-p.scale*js)*oe}return{rect:V.rect,metrics:V.metrics,baselineOffset:Q}}function VH(p,u,f,_,E){const R=E[p.imageName];if(!R)return null;const N=R.paddedRect,V=R.displaySize,Q={width:V[0],height:V[1],left:1,top:-3,advance:u?V[1]:V[0]};let oe;if(u)oe=_.verticalLineContentWidth-V[1]*p.scale;else{const de=uM(p.verticalAlign);oe=(_.horizontalLineContentHeight-V[1]*p.scale)*de}return{rect:N,metrics:Q,baselineOffset:oe,imageOffset:(u?V[0]:V[1])*p.scale-js*f}}function UH(p,u,f,_){if(_===0)return;const E=p[f],R=(p[f].x+E.metrics.advance*E.scale)*_;for(let N=u;N<=f;N++)p[N].x-=R}function GH(p,u,f){const{horizontalAlign:_,verticalAlign:E}=$w(f),R=u[0]-p.displaySize[0]*_,N=u[1]-p.displaySize[1]*E;return{image:p,top:N,bottom:N+p.displaySize[1],left:R,right:R+p.displaySize[0]}}function cM(p){var u,f;let _=p.left,E=p.top,R=p.right-_,N=p.bottom-E;const V=(u=p.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",Q=(f=p.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",oe=(p.image.content[2]-p.image.content[0])/(p.image.content[3]-p.image.content[1]);if(Q==="proportional"){if(V==="stretchOnly"&&R/N<oe||V==="proportional"){const de=Math.ceil(N*oe);_*=de/R,R=de}}else if(V==="proportional"&&Q==="stretchOnly"&&oe!==0&&R/N>oe){const de=Math.ceil(R/oe);E*=de/N,N=de}return{x1:_,y1:E,x2:_+R,y2:E+N}}function dM(p,u,f,_,E,R){const N=p.image;let V;if(N.content){const st=N.content,yt=N.pixelRatio||1;V=[st[0]/yt,st[1]/yt,N.displaySize[0]-st[2]/yt,N.displaySize[1]-st[3]/yt]}const Q=u.left*R,oe=u.right*R;let de,ve,Fe,je;f==="width"||f==="both"?(je=E[0]+Q-_[3],ve=E[0]+oe+_[1]):(je=E[0]+(Q+oe-N.displaySize[0])/2,ve=je+N.displaySize[0]);const Ve=u.top*R,Xe=u.bottom*R;return f==="height"||f==="both"?(de=E[1]+Ve-_[0],Fe=E[1]+Xe+_[2]):(de=E[1]+(Ve+Xe-N.displaySize[1])/2,Fe=de+N.displaySize[1]),{image:N,top:de,right:ve,bottom:Fe,left:je,collisionPadding:V}}const vf=128,fh=32640;function fM(p,u){const{expression:f}=u;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Dn(p+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:_,interpolationType:E}=f;let R=0;for(;R<_.length&&_[R]<=p;)R++;R=Math.max(0,R-1);let N=R;for(;N<_.length&&_[N]<p+1;)N++;N=Math.min(_.length-1,N);const V=_[R],Q=_[N];return f.kind==="composite"?{kind:"composite",minZoom:V,maxZoom:Q,interpolationType:E}:{kind:"camera",minZoom:V,maxZoom:Q,minSize:f.evaluate(new Dn(V)),maxSize:f.evaluate(new Dn(Q)),interpolationType:E}}}function Vw(p,u,f){let _="never";const E=p.get(u);return E?_=E:p.get(f)&&(_="always"),_}const HH=Wy.VectorTileFeature.types,WH=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function q1(p,u,f,_,E,R,N,V,Q,oe,de,ve,Fe){const je=V?Math.min(fh,Math.round(V[0])):0,Ve=V?Math.min(fh,Math.round(V[1])):0;p.emplaceBack(u,f,Math.round(32*_),Math.round(32*E),R,N,(je<<1)+(Q?1:0),Ve,16*oe,16*de,256*ve,256*Fe)}function Uw(p,u,f){p.emplaceBack(u.x,u.y,f),p.emplaceBack(u.x,u.y,f),p.emplaceBack(u.x,u.y,f),p.emplaceBack(u.x,u.y,f)}function XH(p){for(const u of p.sections)if(vn(u.text))return!0;return!1}class Gw{constructor(u){this.layoutVertexArray=new _i,this.indexArray=new Xi,this.programConfigurations=u,this.segments=new Oi,this.dynamicLayoutVertexArray=new ji,this.opacityVertexArray=new Ma,this.hasVisibleVertices=!1,this.placedSymbolArray=new ct}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,f,_,E){this.isEmpty()||(_&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,IH.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,kH.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,WH,!0),this.opacityVertexBuffer.itemSize=1),(_||E)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_t("SymbolBuffers",Gw);class Hw{constructor(u,f,_){this.layoutVertexArray=new u,this.layoutAttributes=f,this.indexArray=new _,this.segments=new Oi,this.collisionVertexArray=new ta}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,AH.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_t("CollisionBuffers",Hw);class km{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((N=>N.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fM(this.zoom,f["text-size"]),this.iconSizeData=fM(this.zoom,f["icon-size"]);const _=this.layers[0].layout,E=_.get("symbol-sort-key"),R=_.get("symbol-z-order");this.canOverlap=Vw(_,"text-overlap","text-allow-overlap")!=="never"||Vw(_,"icon-overlap","icon-allow-overlap")!=="never"||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=R!=="viewport-y"&&!E.isConstant(),this.sortFeaturesByY=(R==="viewport-y"||R==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map((N=>l.an[N]))),this.stateDependentLayerIds=this.layers.filter((N=>N.isStateDependent())).map((N=>N.id)),this.sourceID=u.sourceID}createArrays(){this.text=new Gw(new Rd(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new Gw(new Rd(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new It,this.lineVertexArray=new Ft,this.symbolInstances=new Dt,this.textAnchorOffsets=new Pt}calculateGlyphDependencies(u,f,_,E,R){for(let N=0;N<u.length;N++)if(f[u.charCodeAt(N)]=!0,(_||E)&&R){const V=Zy[u.charAt(N)];V&&(f[V.charCodeAt(0)]=!0)}}populate(u,f,_){const E=this.layers[0],R=E.layout,N=R.get("text-font"),V=R.get("text-field"),Q=R.get("icon-image"),oe=(V.value.kind!=="constant"||V.value.value instanceof fn&&!V.value.value.isEmpty()||V.value.value.toString().length>0)&&(N.value.kind!=="constant"||N.value.value.length>0),de=Q.value.kind!=="constant"||!!Q.value.value||Object.keys(Q.parameters).length>0,ve=R.get("symbol-sort-key");if(this.features=[],!oe&&!de)return;const Fe=f.iconDependencies,je=f.glyphDependencies,Ve=f.availableImages,Xe=new Dn(this.zoom,{globalState:this.globalState});for(const{feature:st,id:yt,index:Vt,sourceLayerIndex:Lt}of u){const ze=E._featureFilter.needGeometry,nt=ap(st,ze);if(!E._featureFilter.filter(Xe,nt,_))continue;let Nt,vr;if(ze||(nt.geometry=ip(st)),oe){const Tr=E.getValueAndResolveTokens("text-field",nt,_,Ve),Mr=fn.factory(Tr),Qr=this.hasRTLText=this.hasRTLText||XH(Mr);(!Qr||ya.getRTLTextPluginStatus()==="unavailable"||Qr&&ya.isParsed())&&(Nt=LH(Mr,E,nt))}if(de){const Tr=E.getValueAndResolveTokens("icon-image",nt,_,Ve);vr=Tr instanceof ka?Tr:ka.fromString(Tr)}if(!Nt&&!vr)continue;const Gr=this.sortFeaturesByKey?ve.evaluate(nt,{},_):void 0;if(this.features.push({id:yt,text:Nt,icon:vr,index:Vt,sourceLayerIndex:Lt,geometry:nt.geometry,properties:st.properties,type:HH[st.type],sortKey:Gr}),vr&&(Fe[vr.name]=!0),Nt){const Tr=N.evaluate(nt,{},_).join(","),Mr=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.an.vertical)>=0;for(const Qr of Nt.sections)if(Qr.image)Fe[Qr.image.name]=!0;else{const Hr=Fr(Nt.toString()),rn=Qr.fontStack||Tr,Lr=je[rn]=je[rn]||{};this.calculateGlyphDependencies(Qr.text,Lr,Mr,this.allowVerticalPlacement,Hr)}}}R.get("symbol-placement")==="line"&&(this.features=(function(st){const yt={},Vt={},Lt=[];let ze=0;function nt(Tr){Lt.push(st[Tr]),ze++}function Nt(Tr,Mr,Qr){const Hr=Vt[Tr];return delete Vt[Tr],Vt[Mr]=Hr,Lt[Hr].geometry[0].pop(),Lt[Hr].geometry[0]=Lt[Hr].geometry[0].concat(Qr[0]),Hr}function vr(Tr,Mr,Qr){const Hr=yt[Mr];return delete yt[Mr],yt[Tr]=Hr,Lt[Hr].geometry[0].shift(),Lt[Hr].geometry[0]=Qr[0].concat(Lt[Hr].geometry[0]),Hr}function Gr(Tr,Mr,Qr){const Hr=Qr?Mr[0][Mr[0].length-1]:Mr[0][0];return`${Tr}:${Hr.x}:${Hr.y}`}for(let Tr=0;Tr<st.length;Tr++){const Mr=st[Tr],Qr=Mr.geometry,Hr=Mr.text?Mr.text.toString():null;if(!Hr){nt(Tr);continue}const rn=Gr(Hr,Qr),Lr=Gr(Hr,Qr,!0);if(rn in Vt&&Lr in yt&&Vt[rn]!==yt[Lr]){const kn=vr(rn,Lr,Qr),Xn=Nt(rn,Lr,Lt[kn].geometry);delete yt[rn],delete Vt[Lr],Vt[Gr(Hr,Lt[Xn].geometry,!0)]=Xn,Lt[kn].geometry=null}else rn in Vt?Nt(rn,Lr,Qr):Lr in yt?vr(rn,Lr,Qr):(nt(Tr),yt[rn]=ze-1,Vt[Lr]=ze-1)}return Lt.filter((Tr=>Tr.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((st,yt)=>st.sortKey-yt.sortKey))}update(u,f,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,f,this.layers,_),this.icon.programConfigurations.updatePaintArrays(u,f,this.layers,_))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,f){const _=this.lineVertexArray.length;if(u.segment!==void 0){let E=u.dist(f[u.segment+1]),R=u.dist(f[u.segment]);const N={};for(let V=u.segment+1;V<f.length;V++)N[V]={x:f[V].x,y:f[V].y,tileUnitDistanceFromAnchor:E},V<f.length-1&&(E+=f[V+1].dist(f[V]));for(let V=u.segment||0;V>=0;V--)N[V]={x:f[V].x,y:f[V].y,tileUnitDistanceFromAnchor:R},V>0&&(R+=f[V-1].dist(f[V]));for(let V=0;V<f.length;V++){const Q=N[V];this.lineVertexArray.emplaceBack(Q.x,Q.y,Q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(u,f,_,E,R,N,V,Q,oe,de,ve,Fe){const je=u.indexArray,Ve=u.layoutVertexArray,Xe=u.segments.prepareSegment(4*f.length,Ve,je,this.canOverlap?N.sortKey:void 0),st=this.glyphOffsetArray.length,yt=Xe.vertexLength,Vt=this.allowVerticalPlacement&&V===l.an.vertical?Math.PI/2:0,Lt=N.text&&N.text.sections;for(let ze=0;ze<f.length;ze++){const{tl:nt,tr:Nt,bl:vr,br:Gr,tex:Tr,pixelOffsetTL:Mr,pixelOffsetBR:Qr,minFontScaleX:Hr,minFontScaleY:rn,glyphOffset:Lr,isSDF:kn,sectionIndex:Xn}=f[ze],Gn=Xe.vertexLength,Nn=Lr[1];q1(Ve,Q.x,Q.y,nt.x,Nn+nt.y,Tr.x,Tr.y,_,kn,Mr.x,Mr.y,Hr,rn),q1(Ve,Q.x,Q.y,Nt.x,Nn+Nt.y,Tr.x+Tr.w,Tr.y,_,kn,Qr.x,Mr.y,Hr,rn),q1(Ve,Q.x,Q.y,vr.x,Nn+vr.y,Tr.x,Tr.y+Tr.h,_,kn,Mr.x,Qr.y,Hr,rn),q1(Ve,Q.x,Q.y,Gr.x,Nn+Gr.y,Tr.x+Tr.w,Tr.y+Tr.h,_,kn,Qr.x,Qr.y,Hr,rn),Uw(u.dynamicLayoutVertexArray,Q,Vt),je.emplaceBack(Gn,Gn+2,Gn+1),je.emplaceBack(Gn+1,Gn+2,Gn+3),Xe.vertexLength+=4,Xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lr[0]),ze!==f.length-1&&Xn===f[ze+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ve.length,N,N.index,{},Fe,Lt&&Lt[Xn])}u.placedSymbolArray.emplaceBack(Q.x,Q.y,st,this.glyphOffsetArray.length-st,yt,oe,de,Q.segment,_?_[0]:0,_?_[1]:0,E[0],E[1],V,0,!1,0,ve)}_addCollisionDebugVertex(u,f,_,E,R,N){return f.emplaceBack(0,0),u.emplaceBack(_.x,_.y,E,R,Math.round(N.x),Math.round(N.y))}addCollisionDebugVertices(u,f,_,E,R,N,V){const Q=R.segments.prepareSegment(4,R.layoutVertexArray,R.indexArray),oe=Q.vertexLength,de=R.layoutVertexArray,ve=R.collisionVertexArray,Fe=V.anchorX,je=V.anchorY;this._addCollisionDebugVertex(de,ve,N,Fe,je,new S(u,f)),this._addCollisionDebugVertex(de,ve,N,Fe,je,new S(_,f)),this._addCollisionDebugVertex(de,ve,N,Fe,je,new S(_,E)),this._addCollisionDebugVertex(de,ve,N,Fe,je,new S(u,E)),Q.vertexLength+=4;const Ve=R.indexArray;Ve.emplaceBack(oe,oe+1),Ve.emplaceBack(oe+1,oe+2),Ve.emplaceBack(oe+2,oe+3),Ve.emplaceBack(oe+3,oe),Q.primitiveLength+=4}addDebugCollisionBoxes(u,f,_,E){for(let R=u;R<f;R++){const N=this.collisionBoxArray.get(R);this.addCollisionDebugVertices(N.x1,N.y1,N.x2,N.y2,E?this.textCollisionBox:this.iconCollisionBox,N.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hw(ea,QA.members,Wi),this.iconCollisionBox=new Hw(ea,QA.members,Wi);for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(u,f,_,E,R,N,V,Q,oe){const de={};for(let ve=f;ve<_;ve++){const Fe=u.get(ve);de.textBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.textFeatureIndex=Fe.featureIndex;break}for(let ve=E;ve<R;ve++){const Fe=u.get(ve);de.verticalTextBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.verticalTextFeatureIndex=Fe.featureIndex;break}for(let ve=N;ve<V;ve++){const Fe=u.get(ve);de.iconBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.iconFeatureIndex=Fe.featureIndex;break}for(let ve=Q;ve<oe;ve++){const Fe=u.get(ve);de.verticalIconBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.verticalIconFeatureIndex=Fe.featureIndex;break}return de}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const _=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,f){const _=u.placedSymbolArray.get(f),E=_.vertexStartIndex+4*_.numGlyphs;for(let R=_.vertexStartIndex;R<E;R+=4)u.indexArray.emplaceBack(R,R+2,R+1),u.indexArray.emplaceBack(R+1,R+2,R+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(u),_=Math.cos(u),E=[],R=[],N=[];for(let V=0;V<this.symbolInstances.length;++V){N.push(V);const Q=this.symbolInstances.get(V);E.push(0|Math.round(f*Q.anchorX+_*Q.anchorY)),R.push(Q.featureIndex)}return N.sort(((V,Q)=>E[V]-E[Q]||R[Q]-R[V])),N}addToSortKeyRanges(u,f){const _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===f?_.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const _=this.symbolInstances.get(f);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach(((E,R,N)=>{E>=0&&N.indexOf(E)===R&&this.addIndicesForPlacedSymbol(this.text,E)})),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let hM,pM;_t("SymbolBucket",km,{omit:["layers","collisionBoxArray","features","compareText"]}),km.MAX_GLYPHS=65535,km.addDynamicAttributes=Uw;var Ww={get paint(){return pM=pM||new za({"icon-opacity":new pn(Et.paint_symbol["icon-opacity"]),"icon-color":new pn(Et.paint_symbol["icon-color"]),"icon-halo-color":new pn(Et.paint_symbol["icon-halo-color"]),"icon-halo-width":new pn(Et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pn(Et.paint_symbol["icon-halo-blur"]),"icon-translate":new Jr(Et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Jr(Et.paint_symbol["icon-translate-anchor"]),"text-opacity":new pn(Et.paint_symbol["text-opacity"]),"text-color":new pn(Et.paint_symbol["text-color"],{runtimeType:Gi,getOverride:p=>p.textColor,hasOverride:p=>!!p.textColor}),"text-halo-color":new pn(Et.paint_symbol["text-halo-color"]),"text-halo-width":new pn(Et.paint_symbol["text-halo-width"]),"text-halo-blur":new pn(Et.paint_symbol["text-halo-blur"]),"text-translate":new Jr(Et.paint_symbol["text-translate"]),"text-translate-anchor":new Jr(Et.paint_symbol["text-translate-anchor"])})},get layout(){return hM=hM||new za({"symbol-placement":new Jr(Et.layout_symbol["symbol-placement"]),"symbol-spacing":new Jr(Et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Jr(Et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pn(Et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Jr(Et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Jr(Et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Jr(Et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Jr(Et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Jr(Et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Jr(Et.layout_symbol["icon-rotation-alignment"]),"icon-size":new pn(Et.layout_symbol["icon-size"]),"icon-text-fit":new Jr(Et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Jr(Et.layout_symbol["icon-text-fit-padding"]),"icon-image":new pn(Et.layout_symbol["icon-image"]),"icon-rotate":new pn(Et.layout_symbol["icon-rotate"]),"icon-padding":new pn(Et.layout_symbol["icon-padding"]),"icon-keep-upright":new Jr(Et.layout_symbol["icon-keep-upright"]),"icon-offset":new pn(Et.layout_symbol["icon-offset"]),"icon-anchor":new pn(Et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Jr(Et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Jr(Et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Jr(Et.layout_symbol["text-rotation-alignment"]),"text-field":new pn(Et.layout_symbol["text-field"]),"text-font":new pn(Et.layout_symbol["text-font"]),"text-size":new pn(Et.layout_symbol["text-size"]),"text-max-width":new pn(Et.layout_symbol["text-max-width"]),"text-line-height":new Jr(Et.layout_symbol["text-line-height"]),"text-letter-spacing":new pn(Et.layout_symbol["text-letter-spacing"]),"text-justify":new pn(Et.layout_symbol["text-justify"]),"text-radial-offset":new pn(Et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Jr(Et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new pn(Et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new pn(Et.layout_symbol["text-anchor"]),"text-max-angle":new Jr(Et.layout_symbol["text-max-angle"]),"text-writing-mode":new Jr(Et.layout_symbol["text-writing-mode"]),"text-rotate":new pn(Et.layout_symbol["text-rotate"]),"text-padding":new Jr(Et.layout_symbol["text-padding"]),"text-keep-upright":new Jr(Et.layout_symbol["text-keep-upright"]),"text-transform":new pn(Et.layout_symbol["text-transform"]),"text-offset":new pn(Et.layout_symbol["text-offset"]),"text-allow-overlap":new Jr(Et.layout_symbol["text-allow-overlap"]),"text-overlap":new Jr(Et.layout_symbol["text-overlap"]),"text-ignore-placement":new Jr(Et.layout_symbol["text-ignore-placement"]),"text-optional":new Jr(Et.layout_symbol["text-optional"])})}};class mM{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Mi,this.defaultValue=u}evaluate(u){if(u.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(u.formattedSection))return f.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_t("FormatSectionOverride",mM,{omit:["defaultValue"]});class $1 extends ca{constructor(u){super(u,Ww)}recalculate(u,f){if(super.recalculate(u,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const _=this.layout.get("text-writing-mode");if(_){const E=[];for(const R of _)E.indexOf(R)<0&&E.push(R);this.layout._values["text-writing-mode"]=E}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,f,_,E){const R=this.layout.get(u).evaluate(f,{},_,E),N=this._unevaluatedLayout._values[u];return N.isDataDriven()||rh(N.value)||!R?R:(function(V,Q){return Q.replace(/{([^{}]+)}/g,((oe,de)=>V&&de in V?String(V[de]):""))})(f.properties,R)}createBucket(u){return new km(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of Ww.paint.overridableProperties){if(!$1.hasPaintOverride(this.layout,u))continue;const f=this.paint.get(u),_=new mM(f),E=new wd(_,f.property.specification);let R=null;R=f.value.kind==="constant"||f.value.kind==="source"?new Sd("source",E):new ih("composite",E,f.value.zoomStops),this.paint._values[u]=new Ka(f.property,R,f.parameters)}}_handleOverridablePaintPropertyUpdate(u,f,_){return!(!this.layout||f.isDataDriven()||_.isDataDriven())&&$1.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,f){const _=u.get("text-field"),E=Ww.paint.properties[f];let R=!1;const N=V=>{for(const Q of V)if(E.overrides&&E.overrides.hasOverride(Q))return void(R=!0)};if(_.value.kind==="constant"&&_.value.value instanceof fn)N(_.value.value.sections);else if(_.value.kind==="source"){const V=oe=>{R||(oe instanceof wa&&bn(oe.value)===oa?N(oe.value.sections):oe instanceof is?N(oe.sections):oe.eachChild(V))},Q=_.value;Q._styleExpression&&V(Q._styleExpression.expression)}return R}}let gM;var YH={get paint(){return gM=gM||new za({"background-color":new Jr(Et.paint_background["background-color"]),"background-pattern":new ra(Et.paint_background["background-pattern"]),"background-opacity":new Jr(Et.paint_background["background-opacity"])})}};class ZH extends ca{constructor(u){super(u,YH)}}let yM;var KH={get paint(){return yM=yM||new za({"raster-opacity":new Jr(Et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Jr(Et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Jr(Et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Jr(Et.paint_raster["raster-brightness-max"]),"raster-saturation":new Jr(Et.paint_raster["raster-saturation"]),"raster-contrast":new Jr(Et.paint_raster["raster-contrast"]),"raster-resampling":new Jr(Et.paint_raster["raster-resampling"]),"raster-fade-duration":new Jr(Et.paint_raster["raster-fade-duration"])})}};class JH extends ca{constructor(u){super(u,KH)}}class QH extends ca{constructor(u){super(u,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class eW{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const tW={once:!0},Xw=63710088e-1;class hh{constructor(u,f){if(isNaN(u)||isNaN(f))throw new Error(`Invalid LngLat object: (${u}, ${f})`);if(this.lng=+u,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new hh(Ze(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const f=Math.PI/180,_=this.lat*f,E=u.lat*f,R=Math.sin(_)*Math.sin(E)+Math.cos(_)*Math.cos(E)*Math.cos((u.lng-this.lng)*f);return Xw*Math.acos(Math.min(R,1))}static convert(u){if(u instanceof hh)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new hh(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new hh(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vM=2*Math.PI*Xw;function bM(p){return vM*Math.cos(p*Math.PI/180)}function _M(p){return(180+p)/360}function xM(p){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p*Math.PI/360)))/360}function wM(p,u){return p/bM(u)}function Yw(p){return 360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90}function SM(p,u){return p*bM(Yw(u))}class Jy{constructor(u,f,_=0){this.x=+u,this.y=+f,this.z=+_}static fromLngLat(u,f=0){const _=hh.convert(u);return new Jy(_M(_.lng),xM(_.lat),wM(f,_.lat))}toLngLat(){return new hh(360*this.x-180,Yw(this.y))}toAltitude(){return SM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vM*(u=Yw(this.y),1/Math.cos(u*Math.PI/180));var u}}function CM(p,u,f){var _=2*Math.PI*6378137/256/Math.pow(2,f);return[p*_-2*Math.PI*6378137/2,u*_-2*Math.PI*6378137/2]}class Zw{constructor(u,f,_){if(!(function(E,R,N){return!(E<0||E>25||N<0||N>=Math.pow(2,E)||R<0||R>=Math.pow(2,E))})(u,f,_))throw new Error(`x=${f}, y=${_}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=f,this.y=_,this.key=Am(0,u,u,f,_)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,f,_){const E=(N=this.y,V=this.z,Q=CM(256*(R=this.x),256*(N=Math.pow(2,V)-N-1),V),oe=CM(256*(R+1),256*(N+1),V),Q[0]+","+Q[1]+","+oe[0]+","+oe[1]);var R,N,V,Q,oe;const de=(function(ve,Fe,je){let Ve,Xe="";for(let st=ve;st>0;st--)Ve=1<<st-1,Xe+=(Fe&Ve?1:0)+(je&Ve?2:0);return Xe})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,de).replace(/{bbox-epsg-3857}/g,E)}isChildOf(u){const f=this.z-u.z;return f>0&&u.x===this.x>>f&&u.y===this.y>>f}getTilePoint(u){const f=Math.pow(2,this.z);return new S((u.x*f-this.x)*ce,(u.y*f-this.y)*ce)}toString(){return`${this.z}/${this.x}/${this.y}`}}class EM{constructor(u,f){this.wrap=u,this.canonical=f,this.key=Am(u,f.z,f.z,f.x,f.y)}}class ic{constructor(u,f,_,E,R){if(this.terrainRttPosMatrix32f=null,u<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${_}`);this.overscaledZ=u,this.wrap=f,this.canonical=new Zw(_,+E,+R),this.key=Am(f,u,_,E,R)}clone(){return new ic(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-u;return u>this.canonical.z?new ic(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ic(u,this.wrap,u,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(u,f){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-u;return u>this.canonical.z?Am(this.wrap*+f,u,this.canonical.z,this.canonical.x,this.canonical.y):Am(this.wrap*+f,u,u,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const f=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>f&&u.canonical.y===this.canonical.y>>f}children(u){if(this.overscaledZ>=u)return[new ic(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,_=2*this.canonical.x,E=2*this.canonical.y;return[new ic(f,this.wrap,f,_,E),new ic(f,this.wrap,f,_+1,E),new ic(f,this.wrap,f,_,E+1),new ic(f,this.wrap,f,_+1,E+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new ic(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new ic(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new EM(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new Jy(u.x-this.wrap,u.y))}}function Am(p,u,f,_,E){(p*=2)<0&&(p=-1*p-1);const R=1<<f;return(R*R*p+R*E+_).toString(36)+f.toString(36)+u.toString(36)}_t("CanonicalTileID",Zw),_t("OverscaledTileID",ic,{omit:["terrainRttPosMatrix32f"]});class lp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const f=new lp;return f.extend(u(new S(this.minX,this.minY))),f.extend(u(new S(this.maxX,this.minY))),f.extend(u(new S(this.minX,this.maxY))),f.extend(u(new S(this.maxX,this.maxY))),f}static fromPoints(u){const f=new lp;for(const _ of u)f.extend(_);return f}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class TM{constructor(u){this._stringToNumber={},this._numberToString=[];for(let f=0;f<u.length;f++){const _=u[f];this._stringToNumber[_]=f,this._numberToString[f]=_}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class PM{constructor(u,f,_,E,R){this.type="Feature",this._vectorTileFeature=u,u._z=f,u._x=_,u._y=E,this.properties=u.properties,this.id=R}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(u[f]=this[f]);return u}}class IM{constructor(u,f){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new dt(ce,16,0),this.grid3D=new dt(ce,16,0),this.featureIndexArray=new _r,this.promoteId=f}insert(u,f,_,E,R,N){const V=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,E,R);const Q=N?this.grid3D:this.grid;for(let oe=0;oe<f.length;oe++){const de=f[oe],ve=[1/0,1/0,-1/0,-1/0];for(let Fe=0;Fe<de.length;Fe++){const je=de[Fe];ve[0]=Math.min(ve[0],je.x),ve[1]=Math.min(ve[1],je.y),ve[2]=Math.max(ve[2],je.x),ve[3]=Math.max(ve[3],je.y)}ve[0]<ce&&ve[1]<ce&&ve[2]>=0&&ve[3]>=0&&Q.insert(V,ve[0],ve[1],ve[2],ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Wy.VectorTile(new zw(this.rawTileData)).layers,this.sourceLayerCoder=new TM(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,f,_,E){this.loadVTLayers();const R=u.params,N=ce/u.tileSize/u.scale,V=Ql(R.filter),Q=u.queryGeometry,oe=u.queryPadding*N,de=lp.fromPoints(Q),ve=this.grid.query(de.minX-oe,de.minY-oe,de.maxX+oe,de.maxY+oe),Fe=lp.fromPoints(u.cameraQueryGeometry).expandBy(oe),je=this.grid3D.query(Fe.minX,Fe.minY,Fe.maxX,Fe.maxY,((st,yt,Vt,Lt)=>(function(ze,nt,Nt,vr,Gr){for(const Mr of ze)if(nt<=Mr.x&&Nt<=Mr.y&&vr>=Mr.x&&Gr>=Mr.y)return!0;const Tr=[new S(nt,Nt),new S(nt,Gr),new S(vr,Gr),new S(vr,Nt)];if(ze.length>2){for(const Mr of Tr)if(Cm(ze,Mr))return!0}for(let Mr=0;Mr<ze.length-1;Mr++)if($G(ze[Mr],ze[Mr+1],Tr))return!0;return!1})(u.cameraQueryGeometry,st-oe,yt-oe,Vt+oe,Lt+oe)));for(const st of je)ve.push(st);ve.sort(rW);const Ve={};let Xe;for(let st=0;st<ve.length;st++){const yt=ve[st];if(yt===Xe)continue;Xe=yt;const Vt=this.featureIndexArray.get(yt);let Lt=null;this.loadMatchingFeature(Ve,Vt.bucketIndex,Vt.sourceLayerIndex,Vt.featureIndex,V,R.layers,R.availableImages,f,_,E,((ze,nt,Nt)=>(Lt||(Lt=ip(ze)),nt.queryIntersectsFeature({queryGeometry:Q,feature:ze,featureState:Nt,geometry:Lt,zoom:this.z,transform:u.transform,pixelsToTileUnits:N,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation}))))}return Ve}loadMatchingFeature(u,f,_,E,R,N,V,Q,oe,de,ve){const Fe=this.bucketLayerIDs[f];if(N&&!Fe.some((st=>N.has(st))))return;const je=this.sourceLayerCoder.decode(_),Ve=this.vtLayers[je].feature(E);if(R.needGeometry){const st=ap(Ve,!0);if(!R.filter(new Dn(this.tileID.overscaledZ),st,this.tileID.canonical))return}else if(!R.filter(new Dn(this.tileID.overscaledZ),Ve))return;const Xe=this.getId(Ve,je);for(let st=0;st<Fe.length;st++){const yt=Fe[st];if(N&&!N.has(yt))continue;const Vt=Q[yt];if(!Vt)continue;let Lt={};Xe&&de&&(Lt=de.getState(Vt.sourceLayer||"_geojsonTileLayer",Xe));const ze=Qe({},oe[yt]);ze.paint=kM(ze.paint,Vt.paint,Ve,Lt,V),ze.layout=kM(ze.layout,Vt.layout,Ve,Lt,V);const nt=!ve||ve(Ve,Vt,Lt);if(!nt)continue;const Nt=new PM(Ve,this.z,this.x,this.y,Xe);Nt.layer=ze;let vr=u[yt];vr===void 0&&(vr=u[yt]=[]),vr.push({featureIndex:E,feature:Nt,intersectionZ:nt})}}lookupSymbolFeatures(u,f,_,E,R,N,V,Q){const oe={};this.loadVTLayers();const de=Ql(R);for(const ve of u)this.loadMatchingFeature(oe,_,E,ve,de,N,V,Q,f);return oe}hasLayer(u){for(const f of this.bucketLayerIDs)for(const _ of f)if(u===_)return!0;return!1}getId(u,f){var _;let E=u.id;return this.promoteId&&(E=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof E=="boolean"&&(E=Number(E)),E===void 0&&(!((_=u.properties)===null||_===void 0)&&_.cluster)&&this.promoteId&&(E=Number(u.properties.cluster_id))),E}}function kM(p,u,f,_,E){return Mt(p,((R,N)=>{const V=u instanceof mo?u.get(N):null;return V&&V.evaluate?V.evaluate(f,_,E):V}))}function rW(p,u){return u-p}function AM(p,u,f,_,E){const R=[];for(let N=0;N<p.length;N++){const V=p[N];let Q;for(let oe=0;oe<V.length-1;oe++){let de=V[oe],ve=V[oe+1];de.x<u&&ve.x<u||(de.x<u?de=new S(u,de.y+(u-de.x)/(ve.x-de.x)*(ve.y-de.y))._round():ve.x<u&&(ve=new S(u,de.y+(u-de.x)/(ve.x-de.x)*(ve.y-de.y))._round()),de.y<f&&ve.y<f||(de.y<f?de=new S(de.x+(f-de.y)/(ve.y-de.y)*(ve.x-de.x),f)._round():ve.y<f&&(ve=new S(de.x+(f-de.y)/(ve.y-de.y)*(ve.x-de.x),f)._round()),de.x>=_&&ve.x>=_||(de.x>=_?de=new S(_,de.y+(_-de.x)/(ve.x-de.x)*(ve.y-de.y))._round():ve.x>=_&&(ve=new S(_,de.y+(_-de.x)/(ve.x-de.x)*(ve.y-de.y))._round()),de.y>=E&&ve.y>=E||(de.y>=E?de=new S(de.x+(E-de.y)/(ve.y-de.y)*(ve.x-de.x),E)._round():ve.y>=E&&(ve=new S(de.x+(E-de.y)/(ve.y-de.y)*(ve.x-de.x),E)._round()),Q&&de.equals(Q[Q.length-1])||(Q=[de],R.push(Q)),Q.push(ve)))))}}return R}_t("FeatureIndex",IM,{omit:["rawTileData","sourceLayerCoder"]});class ph extends S{constructor(u,f,_,E){super(u,f),this.angle=_,E!==void 0&&(this.segment=E)}clone(){return new ph(this.x,this.y,this.angle,this.segment)}}function MM(p,u,f,_,E){if(u.segment===void 0||f===0)return!0;let R=u,N=u.segment+1,V=0;for(;V>-f/2;){if(N--,N<0)return!1;V-=p[N].dist(R),R=p[N]}V+=p[N].dist(p[N+1]),N++;const Q=[];let oe=0;for(;V<f/2;){const de=p[N],ve=p[N+1];if(!ve)return!1;let Fe=p[N-1].angleTo(de)-de.angleTo(ve);for(Fe=Math.abs((Fe+3*Math.PI)%(2*Math.PI)-Math.PI),Q.push({distance:V,angleDelta:Fe}),oe+=Fe;V-Q[0].distance>_;)oe-=Q.shift().angleDelta;if(oe>E)return!1;N++,V+=de.dist(ve)}return!0}function LM(p){let u=0;for(let f=0;f<p.length-1;f++)u+=p[f].dist(p[f+1]);return u}function RM(p,u,f){return p?.6*u*f:0}function DM(p,u){return Math.max(p?p.right-p.left:0,u?u.right-u.left:0)}function nW(p,u,f,_,E,R){const N=RM(f,E,R),V=DM(f,_)*R;let Q=0;const oe=LM(p)/2;for(let de=0;de<p.length-1;de++){const ve=p[de],Fe=p[de+1],je=ve.dist(Fe);if(Q+je>oe){const Ve=(oe-Q)/je,Xe=pi.number(ve.x,Fe.x,Ve),st=pi.number(ve.y,Fe.y,Ve),yt=new ph(Xe,st,Fe.angleTo(ve),de);return yt._round(),!N||MM(p,yt,V,N,u)?yt:void 0}Q+=je}}function iW(p,u,f,_,E,R,N,V,Q){const oe=RM(_,R,N),de=DM(_,E),ve=de*N,Fe=p[0].x===0||p[0].x===Q||p[0].y===0||p[0].y===Q;return u-ve<u/4&&(u=ve+u/4),NM(p,Fe?u/2*V%u:(de/2+2*R)*N*V%u,u,oe,f,ve,Fe,!1,Q)}function NM(p,u,f,_,E,R,N,V,Q){const oe=R/2,de=LM(p);let ve=0,Fe=u-f,je=[];for(let Ve=0;Ve<p.length-1;Ve++){const Xe=p[Ve],st=p[Ve+1],yt=Xe.dist(st),Vt=st.angleTo(Xe);for(;Fe+f<ve+yt;){Fe+=f;const Lt=(Fe-ve)/yt,ze=pi.number(Xe.x,st.x,Lt),nt=pi.number(Xe.y,st.y,Lt);if(ze>=0&&ze<Q&&nt>=0&&nt<Q&&Fe-oe>=0&&Fe+oe<=de){const Nt=new ph(ze,nt,Vt,Ve);Nt._round(),_&&!MM(p,Nt,R,_,E)||je.push(Nt)}}ve+=yt}return V||je.length||N||(je=NM(p,ve/2,f,_,E,R,N,!0,Q)),je}function OM(p,u,f,_){const E=[],R=p.image,N=R.pixelRatio,V=R.paddedRect.w-2,Q=R.paddedRect.h-2;let oe={x1:p.left,y1:p.top,x2:p.right,y2:p.bottom};const de=R.stretchX||[[0,V]],ve=R.stretchY||[[0,Q]],Fe=(Lr,kn)=>Lr+kn[1]-kn[0],je=de.reduce(Fe,0),Ve=ve.reduce(Fe,0),Xe=V-je,st=Q-Ve;let yt=0,Vt=je,Lt=0,ze=Ve,nt=0,Nt=Xe,vr=0,Gr=st;if(R.content&&_){const Lr=R.content,kn=Lr[2]-Lr[0],Xn=Lr[3]-Lr[1];(R.textFitWidth||R.textFitHeight)&&(oe=cM(p)),yt=V1(de,0,Lr[0]),Lt=V1(ve,0,Lr[1]),Vt=V1(de,Lr[0],Lr[2]),ze=V1(ve,Lr[1],Lr[3]),nt=Lr[0]-yt,vr=Lr[1]-Lt,Nt=kn-Vt,Gr=Xn-ze}const Tr=oe.x1,Mr=oe.y1,Qr=oe.x2-Tr,Hr=oe.y2-Mr,rn=(Lr,kn,Xn,Gn)=>{const Nn=U1(Lr.stretch-yt,Vt,Qr,Tr),qi=G1(Lr.fixed-nt,Nt,Lr.stretch,je),Co=U1(kn.stretch-Lt,ze,Hr,Mr),ys=G1(kn.fixed-vr,Gr,kn.stretch,Ve),_l=U1(Xn.stretch-yt,Vt,Qr,Tr),ac=G1(Xn.fixed-nt,Nt,Xn.stretch,je),xu=U1(Gn.stretch-Lt,ze,Hr,Mr),il=G1(Gn.fixed-vr,Gr,Gn.stretch,Ve),yo=new S(Nn,Co),qs=new S(_l,Co),al=new S(_l,xu),ol=new S(Nn,xu),iu=new S(qi/N,ys/N),oc=new S(ac/N,il/N),$s=u*Math.PI/180;if($s){const Vs=Math.sin($s),Us=Math.cos($s),ls=[Us,-Vs,Vs,Us];yo._matMult(ls),qs._matMult(ls),ol._matMult(ls),al._matMult(ls)}const wu=Lr.stretch+Lr.fixed,vs=kn.stretch+kn.fixed;return{tl:yo,tr:qs,bl:ol,br:al,tex:{x:R.paddedRect.x+1+wu,y:R.paddedRect.y+1+vs,w:Xn.stretch+Xn.fixed-wu,h:Gn.stretch+Gn.fixed-vs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:iu,pixelOffsetBR:oc,minFontScaleX:Nt/N/Qr,minFontScaleY:Gr/N/Hr,isSDF:f}};if(_&&(R.stretchX||R.stretchY)){const Lr=FM(de,Xe,je),kn=FM(ve,st,Ve);for(let Xn=0;Xn<Lr.length-1;Xn++){const Gn=Lr[Xn],Nn=Lr[Xn+1];for(let qi=0;qi<kn.length-1;qi++)E.push(rn(Gn,kn[qi],Nn,kn[qi+1]))}}else E.push(rn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:V+1},{fixed:0,stretch:Q+1}));return E}function V1(p,u,f){let _=0;for(const E of p)_+=Math.max(u,Math.min(f,E[1]))-Math.max(u,Math.min(f,E[0]));return _}function FM(p,u,f){const _=[{fixed:-1,stretch:0}];for(const[E,R]of p){const N=_[_.length-1];_.push({fixed:E-N.stretch,stretch:N.stretch}),_.push({fixed:E-N.stretch,stretch:N.stretch+(R-E)})}return _.push({fixed:u+1,stretch:f}),_}function U1(p,u,f,_){return p/u*f+_}function G1(p,u,f,_){return p-u*f/_}_t("Anchor",ph);class H1{constructor(u,f,_,E,R,N,V,Q,oe,de){var ve;if(this.boxStartIndex=u.length,oe){let Fe=N.top,je=N.bottom;const Ve=N.collisionPadding;Ve&&(Fe-=Ve[1],je+=Ve[3]);let Xe=je-Fe;Xe>0&&(Xe=Math.max(10,Xe),this.circleDiameter=Xe)}else{const Fe=!((ve=N.image)===null||ve===void 0)&&ve.content&&(N.image.textFitWidth||N.image.textFitHeight)?cM(N):{x1:N.left,y1:N.top,x2:N.right,y2:N.bottom};Fe.y1=Fe.y1*V-Q[0],Fe.y2=Fe.y2*V+Q[2],Fe.x1=Fe.x1*V-Q[3],Fe.x2=Fe.x2*V+Q[1];const je=N.collisionPadding;if(je&&(Fe.x1-=je[0]*V,Fe.y1-=je[1]*V,Fe.x2+=je[2]*V,Fe.y2+=je[3]*V),de){const Ve=new S(Fe.x1,Fe.y1),Xe=new S(Fe.x2,Fe.y1),st=new S(Fe.x1,Fe.y2),yt=new S(Fe.x2,Fe.y2),Vt=de*Math.PI/180;Ve._rotate(Vt),Xe._rotate(Vt),st._rotate(Vt),yt._rotate(Vt),Fe.x1=Math.min(Ve.x,Xe.x,st.x,yt.x),Fe.x2=Math.max(Ve.x,Xe.x,st.x,yt.x),Fe.y1=Math.min(Ve.y,Xe.y,st.y,yt.y),Fe.y2=Math.max(Ve.y,Xe.y,st.y,yt.y)}u.emplaceBack(f.x,f.y,Fe.x1,Fe.y1,Fe.x2,Fe.y2,_,E,R)}this.boxEndIndex=u.length}}class aW{constructor(u=[],f=(_,E)=>_<E?-1:_>E?1:0){if(this.data=u,this.length=this.data.length,this.compare=f,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:f,compare:_}=this,E=f[u];for(;u>0;){const R=u-1>>1,N=f[R];if(_(E,N)>=0)break;f[u]=N,u=R}f[u]=E}_down(u){const{data:f,compare:_}=this,E=this.length>>1,R=f[u];for(;u<E;){let N=1+(u<<1);const V=N+1;if(V<this.length&&_(f[V],f[N])<0&&(N=V),_(f[N],R)>=0)break;f[u]=f[N],u=N}f[u]=R}}function oW(p,u=1,f=!1){const _=lp.fromPoints(p[0]),E=Math.min(_.width(),_.height());let R=E/2;const N=new aW([],sW),{minX:V,minY:Q,maxX:oe,maxY:de}=_;if(E===0)return new S(V,Q);for(let je=V;je<oe;je+=E)for(let Ve=Q;Ve<de;Ve+=E)N.push(new Mm(je+R,Ve+R,R,p));let ve=(function(je){let Ve=0,Xe=0,st=0;const yt=je[0];for(let Vt=0,Lt=yt.length,ze=Lt-1;Vt<Lt;ze=Vt++){const nt=yt[Vt],Nt=yt[ze],vr=nt.x*Nt.y-Nt.x*nt.y;Xe+=(nt.x+Nt.x)*vr,st+=(nt.y+Nt.y)*vr,Ve+=3*vr}return new Mm(Xe/Ve,st/Ve,0,je)})(p),Fe=N.length;for(;N.length;){const je=N.pop();(je.d>ve.d||!ve.d)&&(ve=je,f&&console.log("found best %d after %d probes",Math.round(1e4*je.d)/1e4,Fe)),je.max-ve.d<=u||(R=je.h/2,N.push(new Mm(je.p.x-R,je.p.y-R,R,p)),N.push(new Mm(je.p.x+R,je.p.y-R,R,p)),N.push(new Mm(je.p.x-R,je.p.y+R,R,p)),N.push(new Mm(je.p.x+R,je.p.y+R,R,p)),Fe+=4)}return f&&(console.log(`num probes: ${Fe}`),console.log(`best distance: ${ve.d}`)),ve.p}function sW(p,u){return u.max-p.max}function Mm(p,u,f,_){this.p=new S(p,u),this.h=f,this.d=(function(E,R){let N=!1,V=1/0;for(let Q=0;Q<R.length;Q++){const oe=R[Q];for(let de=0,ve=oe.length,Fe=ve-1;de<ve;Fe=de++){const je=oe[de],Ve=oe[Fe];je.y>E.y!=Ve.y>E.y&&E.x<(Ve.x-je.x)*(E.y-je.y)/(Ve.y-je.y)+je.x&&(N=!N),V=Math.min(V,gA(E,je,Ve))}}return(N?1:-1)*Math.sqrt(V)})(this.p,_),this.max=this.d+this.h*Math.SQRT2}var bl;l.aD=void 0,(bl=l.aD||(l.aD={}))[bl.center=1]="center",bl[bl.left=2]="left",bl[bl.right=3]="right",bl[bl.top=4]="top",bl[bl.bottom=5]="bottom",bl[bl["top-left"]=6]="top-left",bl[bl["top-right"]=7]="top-right",bl[bl["bottom-left"]=8]="bottom-left",bl[bl["bottom-right"]=9]="bottom-right";const Kw=Number.POSITIVE_INFINITY;function BM(p,u){return u[1]!==Kw?(function(f,_,E){let R=0,N=0;switch(_=Math.abs(_),E=Math.abs(E),f){case"top-right":case"top-left":case"top":N=E-7;break;case"bottom-right":case"bottom-left":case"bottom":N=7-E}switch(f){case"top-right":case"bottom-right":case"right":R=-_;break;case"top-left":case"bottom-left":case"left":R=_}return[R,N]})(p,u[0],u[1]):(function(f,_){let E=0,R=0;_<0&&(_=0);const N=_/Math.SQRT2;switch(f){case"top-right":case"top-left":R=N-7;break;case"bottom-right":case"bottom-left":R=7-N;break;case"bottom":R=7-_;break;case"top":R=_-7}switch(f){case"top-right":case"bottom-right":E=-N;break;case"top-left":case"bottom-left":E=N;break;case"left":E=_;break;case"right":E=-_}return[E,R]})(p,u[0])}function zM(p,u,f){var _;const E=p.layout,R=(_=E.get("text-variable-anchor-offset"))===null||_===void 0?void 0:_.evaluate(u,{},f);if(R){const V=R.values,Q=[];for(let oe=0;oe<V.length;oe+=2){const de=Q[oe]=V[oe],ve=V[oe+1].map((Fe=>Fe*js));de.startsWith("top")?ve[1]-=7:de.startsWith("bottom")&&(ve[1]+=7),Q[oe+1]=ve}return new _n(Q)}const N=E.get("text-variable-anchor");if(N){let V;V=p._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[E.get("text-radial-offset").evaluate(u,{},f)*js,Kw]:E.get("text-offset").evaluate(u,{},f).map((oe=>oe*js));const Q=[];for(const oe of N)Q.push(oe,BM(oe,V));return new _n(Q)}return null}function Jw(p){switch(p){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lW(p,u,f,_,E,R,N,V,Q,oe,de,ve){let Fe=R.textMaxSize.evaluate(u,{});Fe===void 0&&(Fe=N);const je=p.layers[0].layout,Ve=je.get("icon-offset").evaluate(u,{},de),Xe=qM(f.horizontal),st=N/24,yt=p.tilePixelRatio*st,Vt=p.tilePixelRatio*Fe/24,Lt=p.tilePixelRatio*V,ze=p.tilePixelRatio*je.get("symbol-spacing"),nt=je.get("text-padding")*p.tilePixelRatio,Nt=(function(Xn,Gn,Nn,qi=1){const Co=Xn.get("icon-padding").evaluate(Gn,{},Nn),ys=Co&&Co.values;return[ys[0]*qi,ys[1]*qi,ys[2]*qi,ys[3]*qi]})(je,u,de,p.tilePixelRatio),vr=je.get("text-max-angle")/180*Math.PI,Gr=je.get("text-rotation-alignment")!=="viewport"&&je.get("symbol-placement")!=="point",Tr=je.get("icon-rotation-alignment")==="map"&&je.get("symbol-placement")!=="point",Mr=je.get("symbol-placement"),Qr=ze/2,Hr=je.get("icon-text-fit");let rn;_&&Hr!=="none"&&(p.allowVerticalPlacement&&f.vertical&&(rn=dM(_,f.vertical,Hr,je.get("icon-text-fit-padding"),Ve,st)),Xe&&(_=dM(_,Xe,Hr,je.get("icon-text-fit-padding"),Ve,st)));const Lr=de?ve.line.getGranularityForZoomLevel(de.z):1,kn=(Xn,Gn)=>{Gn.x<0||Gn.x>=ce||Gn.y<0||Gn.y>=ce||(function(Nn,qi,Co,ys,_l,ac,xu,il,yo,qs,al,ol,iu,oc,$s,wu,vs,Vs,Us,ls,Qa,Kc,Lm,Jc,dW){const Rm=Nn.addToLineVertexArray(qi,Co);let up,Dm,Nm,Om,GM=0,HM=0,WM=0,XM=0,oS=-1,sS=-1;const bf={};let YM=nu("");if(Nn.allowVerticalPlacement&&ys.vertical){const Nl=il.layout.get("text-rotate").evaluate(Qa,{},Jc)+90;Nm=new H1(yo,qi,qs,al,ol,ys.vertical,iu,oc,$s,Nl),xu&&(Om=new H1(yo,qi,qs,al,ol,xu,vs,Vs,$s,Nl))}if(_l){const Nl=il.layout.get("icon-rotate").evaluate(Qa,{}),sc=il.layout.get("icon-text-fit")!=="none",cp=OM(_l,Nl,Lm,sc),ed=xu?OM(xu,Nl,Lm,sc):void 0;Dm=new H1(yo,qi,qs,al,ol,_l,vs,Vs,!1,Nl),GM=4*cp.length;const dp=Nn.iconSizeData;let Dd=null;dp.kind==="source"?(Dd=[vf*il.layout.get("icon-size").evaluate(Qa,{})],Dd[0]>fh&&Wt(`${Nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):dp.kind==="composite"&&(Dd=[vf*Kc.compositeIconSizes[0].evaluate(Qa,{},Jc),vf*Kc.compositeIconSizes[1].evaluate(Qa,{},Jc)],(Dd[0]>fh||Dd[1]>fh)&&Wt(`${Nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Nn.addSymbols(Nn.icon,cp,Dd,ls,Us,Qa,l.an.none,qi,Rm.lineStartIndex,Rm.lineLength,-1,Jc),oS=Nn.icon.placedSymbolArray.length-1,ed&&(HM=4*ed.length,Nn.addSymbols(Nn.icon,ed,Dd,ls,Us,Qa,l.an.vertical,qi,Rm.lineStartIndex,Rm.lineLength,-1,Jc),sS=Nn.icon.placedSymbolArray.length-1)}const ZM=Object.keys(ys.horizontal);for(const Nl of ZM){const sc=ys.horizontal[Nl];if(!up){YM=nu(sc.text);const ed=il.layout.get("text-rotate").evaluate(Qa,{},Jc);up=new H1(yo,qi,qs,al,ol,sc,iu,oc,$s,ed)}const cp=sc.positionedLines.length===1;if(WM+=jM(Nn,qi,sc,ac,il,$s,Qa,wu,Rm,ys.vertical?l.an.horizontal:l.an.horizontalOnly,cp?ZM:[Nl],bf,oS,Kc,Jc),cp)break}ys.vertical&&(XM+=jM(Nn,qi,ys.vertical,ac,il,$s,Qa,wu,Rm,l.an.vertical,["vertical"],bf,sS,Kc,Jc));const fW=up?up.boxStartIndex:Nn.collisionBoxArray.length,hW=up?up.boxEndIndex:Nn.collisionBoxArray.length,pW=Nm?Nm.boxStartIndex:Nn.collisionBoxArray.length,mW=Nm?Nm.boxEndIndex:Nn.collisionBoxArray.length,gW=Dm?Dm.boxStartIndex:Nn.collisionBoxArray.length,yW=Dm?Dm.boxEndIndex:Nn.collisionBoxArray.length,vW=Om?Om.boxStartIndex:Nn.collisionBoxArray.length,bW=Om?Om.boxEndIndex:Nn.collisionBoxArray.length;let Qc=-1;const X1=(Nl,sc)=>Nl&&Nl.circleDiameter?Math.max(Nl.circleDiameter,sc):sc;Qc=X1(up,Qc),Qc=X1(Nm,Qc),Qc=X1(Dm,Qc),Qc=X1(Om,Qc);const KM=Qc>-1?1:0;KM&&(Qc*=dW/js),Nn.glyphOffsetArray.length>=km.MAX_GLYPHS&&Wt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qa.sortKey!==void 0&&Nn.addToSortKeyRanges(Nn.symbolInstances.length,Qa.sortKey);const _W=zM(il,Qa,Jc),[xW,wW]=(function(Nl,sc){const cp=Nl.length,ed=sc?.values;if(ed?.length>0)for(let dp=0;dp<ed.length;dp+=2){const Dd=ed[dp+1];Nl.emplaceBack(l.aD[ed[dp]],Dd[0],Dd[1])}return[cp,Nl.length]})(Nn.textAnchorOffsets,_W);Nn.symbolInstances.emplaceBack(qi.x,qi.y,bf.right>=0?bf.right:-1,bf.center>=0?bf.center:-1,bf.left>=0?bf.left:-1,bf.vertical||-1,oS,sS,YM,fW,hW,pW,mW,gW,yW,vW,bW,qs,WM,XM,GM,HM,KM,0,iu,Qc,xW,wW)})(p,Gn,Xn,f,_,E,rn,p.layers[0],p.collisionBoxArray,u.index,u.sourceLayerIndex,p.index,yt,[nt,nt,nt,nt],Gr,Q,Lt,Nt,Tr,Ve,u,R,oe,de,N)};if(Mr==="line")for(const Xn of AM(u.geometry,0,0,ce,ce)){const Gn=sp(Xn,Lr),Nn=iW(Gn,ze,vr,f.vertical||Xe,_,24,Vt,p.overscaling,ce);for(const qi of Nn)Xe&&uW(p,Xe.text,Qr,qi)||kn(Gn,qi)}else if(Mr==="line-center"){for(const Xn of u.geometry)if(Xn.length>1){const Gn=sp(Xn,Lr),Nn=nW(Gn,vr,f.vertical||Xe,_,24,Vt);Nn&&kn(Gn,Nn)}}else if(u.type==="Polygon")for(const Xn of qo(u.geometry,0)){const Gn=oW(Xn,16);kn(sp(Xn[0],Lr,!0),new ph(Gn.x,Gn.y,0))}else if(u.type==="LineString")for(const Xn of u.geometry){const Gn=sp(Xn,Lr);kn(Gn,new ph(Gn[0].x,Gn[0].y,0))}else if(u.type==="Point")for(const Xn of u.geometry)for(const Gn of Xn)kn([Gn],new ph(Gn.x,Gn.y,0))}function jM(p,u,f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve){const Xe=(function(Vt,Lt,ze,nt,Nt,vr,Gr,Tr){const Mr=nt.layout.get("text-rotate").evaluate(vr,{})*Math.PI/180,Qr=[];for(const Hr of Lt.positionedLines)for(const rn of Hr.positionedGlyphs){if(!rn.rect)continue;const Lr=rn.rect||{};let kn=4,Xn=!0,Gn=1,Nn=0;const qi=(Nt||Tr)&&rn.vertical,Co=rn.metrics.advance*rn.scale/2;if(Tr&&Lt.verticalizable&&(Nn=Hr.lineOffset/2-(rn.imageName?-(js-rn.metrics.width*rn.scale)/2:(rn.scale-1)*js)),rn.imageName){const Vs=Gr[rn.imageName];Xn=Vs.sdf,Gn=Vs.pixelRatio,kn=1/Gn}const ys=Nt?[rn.x+Co,rn.y]:[0,0];let _l=Nt?[0,0]:[rn.x+Co+ze[0],rn.y+ze[1]-Nn],ac=[0,0];qi&&(ac=_l,_l=[0,0]);const xu=rn.metrics.isDoubleResolution?2:1,il=(rn.metrics.left-kn)*rn.scale-Co+_l[0],yo=(-rn.metrics.top-kn)*rn.scale+_l[1],qs=il+Lr.w/xu*rn.scale/Gn,al=yo+Lr.h/xu*rn.scale/Gn,ol=new S(il,yo),iu=new S(qs,yo),oc=new S(il,al),$s=new S(qs,al);if(qi){const Vs=new S(-Co,Co- -17),Us=-Math.PI/2,ls=12-Co,Qa=new S(22-ls,-(rn.imageName?ls:0)),Kc=new S(...ac);ol._rotateAround(Us,Vs)._add(Qa)._add(Kc),iu._rotateAround(Us,Vs)._add(Qa)._add(Kc),oc._rotateAround(Us,Vs)._add(Qa)._add(Kc),$s._rotateAround(Us,Vs)._add(Qa)._add(Kc)}if(Mr){const Vs=Math.sin(Mr),Us=Math.cos(Mr),ls=[Us,-Vs,Vs,Us];ol._matMult(ls),iu._matMult(ls),oc._matMult(ls),$s._matMult(ls)}const wu=new S(0,0),vs=new S(0,0);Qr.push({tl:ol,tr:iu,bl:oc,br:$s,tex:Lr,writingMode:Lt.writingMode,glyphOffset:ys,sectionIndex:rn.sectionIndex,isSDF:Xn,pixelOffsetTL:wu,pixelOffsetBR:vs,minFontScaleX:0,minFontScaleY:0})}return Qr})(0,f,V,E,R,N,_,p.allowVerticalPlacement),st=p.textSizeData;let yt=null;st.kind==="source"?(yt=[vf*E.layout.get("text-size").evaluate(N,{})],yt[0]>fh&&Wt(`${p.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):st.kind==="composite"&&(yt=[vf*je.compositeTextSizes[0].evaluate(N,{},Ve),vf*je.compositeTextSizes[1].evaluate(N,{},Ve)],(yt[0]>fh||yt[1]>fh)&&Wt(`${p.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),p.addSymbols(p.text,Xe,yt,V,R,N,oe,u,Q.lineStartIndex,Q.lineLength,Fe,Ve);for(const Vt of de)ve[Vt]=p.text.placedSymbolArray.length-1;return 4*Xe.length}function qM(p){for(const u in p)return p[u];return null}function uW(p,u,f,_){const E=p.compareText;if(u in E){const R=E[u];for(let N=R.length-1;N>=0;N--)if(_.dist(R[N])<f)return!0}else E[u]=[];return E[u].push(_),!1}const $M=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qw{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,_]=new Uint8Array(u,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const E=_>>4;if(E!==1)throw new Error(`Got v${E} data when expected v1.`);const R=$M[15&_];if(!R)throw new Error("Unrecognized array type.");const[N]=new Uint16Array(u,2,1),[V]=new Uint32Array(u,4,1);return new Qw(V,N,R,u)}constructor(u,f=64,_=Float64Array,E){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=_,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const R=$M.indexOf(this.ArrayType),N=2*u*this.ArrayType.BYTES_PER_ELEMENT,V=u*this.IndexArrayType.BYTES_PER_ELEMENT,Q=(8-V%8)%8;if(R<0)throw new Error(`Unexpected typed array class: ${_}.`);E&&E instanceof ArrayBuffer?(this.data=E,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+V+Q,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+N+V+Q),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+V+Q,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+R]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=u)}add(u,f){const _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=u,this.coords[this._pos++]=f,_}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return eS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,f,_,E){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:N,nodeSize:V}=this,Q=[0,R.length-1,0],oe=[];for(;Q.length;){const de=Q.pop()||0,ve=Q.pop()||0,Fe=Q.pop()||0;if(ve-Fe<=V){for(let st=Fe;st<=ve;st++){const yt=N[2*st],Vt=N[2*st+1];yt>=u&&yt<=_&&Vt>=f&&Vt<=E&&oe.push(R[st])}continue}const je=Fe+ve>>1,Ve=N[2*je],Xe=N[2*je+1];Ve>=u&&Ve<=_&&Xe>=f&&Xe<=E&&oe.push(R[je]),(de===0?u<=Ve:f<=Xe)&&(Q.push(Fe),Q.push(je-1),Q.push(1-de)),(de===0?_>=Ve:E>=Xe)&&(Q.push(je+1),Q.push(ve),Q.push(1-de))}return oe}within(u,f,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:R,nodeSize:N}=this,V=[0,E.length-1,0],Q=[],oe=_*_;for(;V.length;){const de=V.pop()||0,ve=V.pop()||0,Fe=V.pop()||0;if(ve-Fe<=N){for(let st=Fe;st<=ve;st++)UM(R[2*st],R[2*st+1],u,f)<=oe&&Q.push(E[st]);continue}const je=Fe+ve>>1,Ve=R[2*je],Xe=R[2*je+1];UM(Ve,Xe,u,f)<=oe&&Q.push(E[je]),(de===0?u-_<=Ve:f-_<=Xe)&&(V.push(Fe),V.push(je-1),V.push(1-de)),(de===0?u+_>=Ve:f+_>=Xe)&&(V.push(je+1),V.push(ve),V.push(1-de))}return Q}}function eS(p,u,f,_,E,R){if(E-_<=f)return;const N=_+E>>1;VM(p,u,N,_,E,R),eS(p,u,f,_,N-1,1-R),eS(p,u,f,N+1,E,1-R)}function VM(p,u,f,_,E,R){for(;E>_;){if(E-_>600){const oe=E-_+1,de=f-_+1,ve=Math.log(oe),Fe=.5*Math.exp(2*ve/3),je=.5*Math.sqrt(ve*Fe*(oe-Fe)/oe)*(de-oe/2<0?-1:1);VM(p,u,f,Math.max(_,Math.floor(f-de*Fe/oe+je)),Math.min(E,Math.floor(f+(oe-de)*Fe/oe+je)),R)}const N=u[2*f+R];let V=_,Q=E;for(Qy(p,u,_,f),u[2*E+R]>N&&Qy(p,u,_,E);V<Q;){for(Qy(p,u,V,Q),V++,Q--;u[2*V+R]<N;)V++;for(;u[2*Q+R]>N;)Q--}u[2*_+R]===N?Qy(p,u,_,Q):(Q++,Qy(p,u,Q,E)),Q<=f&&(_=Q+1),f<=Q&&(E=Q-1)}}function Qy(p,u,f,_){tS(p,f,_),tS(u,2*f,2*_),tS(u,2*f+1,2*_+1)}function tS(p,u,f){const _=p[u];p[u]=p[f],p[f]=_}function UM(p,u,f,_){const E=p-f,R=u-_;return E*E+R*R}var rS;l.cw=void 0,(rS=l.cw||(l.cw={})).create="create",rS.load="load",rS.fullLoad="fullLoad";let W1=null,ev=[];const nS=1e3/60,iS="loadTime",aS="fullLoadTime",cW={mark(p){performance.mark(p)},frame(p){const u=p;W1!=null&&ev.push(u-W1),W1=u},clearMetrics(){W1=null,ev=[],performance.clearMeasures(iS),performance.clearMeasures(aS);for(const p in l.cw)performance.clearMarks(l.cw[p])},getPerformanceMetrics(){performance.measure(iS,l.cw.create,l.cw.load),performance.measure(aS,l.cw.create,l.cw.fullLoad);const p=performance.getEntriesByName(iS)[0].duration,u=performance.getEntriesByName(aS)[0].duration,f=ev.length,_=1/(ev.reduce(((R,N)=>R+N),0)/f/1e3),E=ev.filter((R=>R>nS)).reduce(((R,N)=>R+(N-nS)/nS),0);return{loadTime:p,fullLoadTime:u,fps:_,percentDroppedFrames:E/(f+E)*100,totalFrames:f}}};l.$=ce,l.A=z,l.B=function([p,u,f]){return u+=90,u*=Math.PI/180,f*=Math.PI/180,{x:p*Math.cos(u)*Math.sin(f),y:p*Math.sin(u)*Math.sin(f),z:p*Math.cos(f)}},l.C=pi,l.D=Jr,l.E=Xt,l.F=Dn,l.G=He,l.H=function(p){if(dr==null){const u=p.navigator?p.navigator.userAgent:null;dr=!!p.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return dr},l.I=jw,l.J=class{constructor(p,u){this.target=p,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new eW((()=>this.process())),this.subscription=lr(this.target,"message",(f=>this.receive(f)),!1),this.globalScope=at(self)?p:window}registerMessageHandler(p,u){this.messageHandlers[p]=u}sendAsync(p,u){return new Promise(((f,_)=>{const E=Math.round(1e18*Math.random()).toString(36).substring(0,10),R=u?lr(u.signal,"abort",(()=>{R?.unsubscribe(),delete this.resolveRejects[E];const Q={id:E,type:"<cancel>",origin:location.origin,targetMapId:p.targetMapId,sourceMapId:this.mapId};this.target.postMessage(Q)}),tW):null;this.resolveRejects[E]={resolve:Q=>{R?.unsubscribe(),f(Q)},reject:Q=>{R?.unsubscribe(),_(Q)}};const N=[],V=Object.assign(Object.assign({},p),{id:E,sourceMapId:this.mapId,origin:location.origin,data:cr(p.data,N)});this.target.postMessage(V,{transfer:N})}))}receive(p){const u=p.data,f=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[f];const _=this.abortControllers[f];return delete this.abortControllers[f],void(_&&_.abort())}if(at(self)||u.mustQueue)return this.tasks[f]=u,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,u)}}process(){if(this.taskQueue.length===0)return;const p=this.taskQueue.shift(),u=this.tasks[p];delete this.tasks[p],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(p,u)}processTask(p,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const E=this.resolveRejects[p];return delete this.resolveRejects[p],E?void(u.error?E.reject(Dr(u.error)):E.resolve(Dr(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(p,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const f=Dr(u.data),_=new AbortController;this.abortControllers[p]=_;try{const E=yield this.messageHandlers[u.type](u.sourceMapId,f,_);this.completeTask(p,null,E)}catch(E){this.completeTask(p,E)}}))}completeTask(p,u,f){const _=[];delete this.abortControllers[p];const E={id:p,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?cr(u):null,data:cr(f,_)};this.target.postMessage(E,{transfer:_})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.K=De,l.L=function(){var p=new z(16);return z!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0),p[0]=1,p[5]=1,p[10]=1,p[15]=1,p},l.M=function(p,u,f){var _,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe=f[0],st=f[1],yt=f[2];return u===p?(p[12]=u[0]*Xe+u[4]*st+u[8]*yt+u[12],p[13]=u[1]*Xe+u[5]*st+u[9]*yt+u[13],p[14]=u[2]*Xe+u[6]*st+u[10]*yt+u[14],p[15]=u[3]*Xe+u[7]*st+u[11]*yt+u[15]):(E=u[1],R=u[2],N=u[3],V=u[4],Q=u[5],oe=u[6],de=u[7],ve=u[8],Fe=u[9],je=u[10],Ve=u[11],p[0]=_=u[0],p[1]=E,p[2]=R,p[3]=N,p[4]=V,p[5]=Q,p[6]=oe,p[7]=de,p[8]=ve,p[9]=Fe,p[10]=je,p[11]=Ve,p[12]=_*Xe+V*st+ve*yt+u[12],p[13]=E*Xe+Q*st+Fe*yt+u[13],p[14]=R*Xe+oe*st+je*yt+u[14],p[15]=N*Xe+de*st+Ve*yt+u[15]),p},l.N=function(p,u,f){var _=f[0],E=f[1],R=f[2];return p[0]=u[0]*_,p[1]=u[1]*_,p[2]=u[2]*_,p[3]=u[3]*_,p[4]=u[4]*E,p[5]=u[5]*E,p[6]=u[6]*E,p[7]=u[7]*E,p[8]=u[8]*R,p[9]=u[9]*R,p[10]=u[10]*R,p[11]=u[11]*R,p[12]=u[12],p[13]=u[13],p[14]=u[14],p[15]=u[15],p},l.O=function(p,u,f){var _=u[0],E=u[1],R=u[2],N=u[3],V=u[4],Q=u[5],oe=u[6],de=u[7],ve=u[8],Fe=u[9],je=u[10],Ve=u[11],Xe=u[12],st=u[13],yt=u[14],Vt=u[15],Lt=f[0],ze=f[1],nt=f[2],Nt=f[3];return p[0]=Lt*_+ze*V+nt*ve+Nt*Xe,p[1]=Lt*E+ze*Q+nt*Fe+Nt*st,p[2]=Lt*R+ze*oe+nt*je+Nt*yt,p[3]=Lt*N+ze*de+nt*Ve+Nt*Vt,p[4]=(Lt=f[4])*_+(ze=f[5])*V+(nt=f[6])*ve+(Nt=f[7])*Xe,p[5]=Lt*E+ze*Q+nt*Fe+Nt*st,p[6]=Lt*R+ze*oe+nt*je+Nt*yt,p[7]=Lt*N+ze*de+nt*Ve+Nt*Vt,p[8]=(Lt=f[8])*_+(ze=f[9])*V+(nt=f[10])*ve+(Nt=f[11])*Xe,p[9]=Lt*E+ze*Q+nt*Fe+Nt*st,p[10]=Lt*R+ze*oe+nt*je+Nt*yt,p[11]=Lt*N+ze*de+nt*Ve+Nt*Vt,p[12]=(Lt=f[12])*_+(ze=f[13])*V+(nt=f[14])*ve+(Nt=f[15])*Xe,p[13]=Lt*E+ze*Q+nt*Fe+Nt*st,p[14]=Lt*R+ze*oe+nt*je+Nt*yt,p[15]=Lt*N+ze*de+nt*Ve+Nt*Vt,p},l.P=S,l.Q=function(p,u){const f={};for(let _=0;_<u.length;_++){const E=u[_];E in p&&(f[E]=p[E])}return f},l.R=_u,l.S=hh,l.T=Ew,l.U=xM,l.V=_M,l.W=F,l.X=D,l.Y=Cr,l.Z=ic,l._=a,l.a=Re,l.a$=function(p,u,f){return p[0]=u[0]*f,p[1]=u[1]*f,p[2]=u[2]*f,p[3]=u[3]*f,p},l.a0=Jy,l.a1=lp,l.a2=25,l.a3=Zw,l.a4=p=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((f=>{u.onloadstart=()=>{f(u)};for(const _ of p){const E=window.document.createElement("source");Ot(_)||(u.crossOrigin="Anonymous"),E.src=_,u.appendChild(E)}}))},l.a5=Er,l.a6=function(){return Ie++},l.a7=ut,l.a8=km,l.a9=Ql,l.aA=js,l.aB=_e,l.aC=function(p,u,f,_,E=!1){if(!f[0]&&!f[1])return[0,0];const R=E?_==="map"?-p.bearingInRadians:0:_==="viewport"?p.bearingInRadians:0;if(R){const N=Math.sin(R),V=Math.cos(R);f=[f[0]*V-f[1]*N,f[0]*N+f[1]*V]}return[E?f[0]:_e(u,f[0],p.zoom),E?f[1]:_e(u,f[1],p.zoom)]},l.aE=Vw,l.aF=Jw,l.aG=$w,l.aH=Qw,l.aI=zi,l.aJ=O1,l.aK=pr,l.aL=Oi,l.aM=Xi,l.aN=Ze,l.aO=ar,l.aP=SM,l.aQ=ne,l.aR=G,l.aS=function(p){var u=new z(3);return u[0]=p[0],u[1]=p[1],u[2]=p[2],u},l.aT=function(p,u,f){return p[0]=u[0]-f[0],p[1]=u[1]-f[1],p[2]=u[2]-f[2],p},l.aU=function(p,u){var f=u[0],_=u[1],E=u[2],R=f*f+_*_+E*E;return R>0&&(R=1/Math.sqrt(R)),p[0]=u[0]*R,p[1]=u[1]*R,p[2]=u[2]*R,p},l.aV=ae,l.aW=function(p,u){return p[0]*u[0]+p[1]*u[1]+p[2]*u[2]},l.aX=function(p,u,f){return p[0]=u[0]*f[0],p[1]=u[1]*f[1],p[2]=u[2]*f[2],p[3]=u[3]*f[3],p},l.aY=ie,l.aZ=function(p,u,f){const _=u[0]*f[0]+u[1]*f[1]+u[2]*f[2];return _===0?null:(-(p[0]*f[0]+p[1]*f[1]+p[2]*f[2])-f[3])/_},l.a_=fe,l.aa=ap,l.ab=PM,l.ac=function(p){const u={};if(p.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((f,_,E,R)=>{const N=E||R;return u[_]=!N||N.toLowerCase(),""})),u["max-age"]){const f=parseInt(u["max-age"],10);isNaN(f)?delete u["max-age"]:u["max-age"]=f}return u},l.ad=Pr,l.ae=function(p){return Math.pow(2,p)},l.af=H,l.ag=tt,l.ah=85.051129,l.ai=wM,l.aj=function(p){return Math.log(p)/Math.LN2},l.ak=function(p){var u=p[0],f=p[1];return u*u+f*f},l.al=function(p,u){const f=[];for(const _ in p)_ in u||f.push(_);return f},l.am=function(p,u){let f=0,_=0;if(p.kind==="constant")_=p.layoutSize;else if(p.kind!=="source"){const{interpolationType:E,minZoom:R,maxZoom:N}=p,V=E?tt(ri.interpolationFactor(E,u,R,N),0,1):0;p.kind==="camera"?_=pi.number(p.minSize,p.maxSize,V):f=V}return{uSizeT:f,uSize:_}},l.ao=function(p,{uSize:u,uSizeT:f},{lowerSize:_,upperSize:E}){return p.kind==="source"?_/vf:p.kind==="composite"?pi.number(_/vf,E/vf,f):u},l.ap=function(p,u){var f=u[0],_=u[1],E=u[2],R=u[3],N=u[4],V=u[5],Q=u[6],oe=u[7],de=u[8],ve=u[9],Fe=u[10],je=u[11],Ve=u[12],Xe=u[13],st=u[14],yt=u[15],Vt=f*V-_*N,Lt=f*Q-E*N,ze=f*oe-R*N,nt=_*Q-E*V,Nt=_*oe-R*V,vr=E*oe-R*Q,Gr=de*Xe-ve*Ve,Tr=de*st-Fe*Ve,Mr=de*yt-je*Ve,Qr=ve*st-Fe*Xe,Hr=ve*yt-je*Xe,rn=Fe*yt-je*st,Lr=Vt*rn-Lt*Hr+ze*Qr+nt*Mr-Nt*Tr+vr*Gr;return Lr?(p[0]=(V*rn-Q*Hr+oe*Qr)*(Lr=1/Lr),p[1]=(E*Hr-_*rn-R*Qr)*Lr,p[2]=(Xe*vr-st*Nt+yt*nt)*Lr,p[3]=(Fe*Nt-ve*vr-je*nt)*Lr,p[4]=(Q*Mr-N*rn-oe*Tr)*Lr,p[5]=(f*rn-E*Mr+R*Tr)*Lr,p[6]=(st*ze-Ve*vr-yt*Lt)*Lr,p[7]=(de*vr-Fe*ze+je*Lt)*Lr,p[8]=(N*Hr-V*Mr+oe*Gr)*Lr,p[9]=(_*Mr-f*Hr-R*Gr)*Lr,p[10]=(Ve*Nt-Xe*ze+yt*Vt)*Lr,p[11]=(ve*ze-de*Nt-je*Vt)*Lr,p[12]=(V*Tr-N*Qr-Q*Gr)*Lr,p[13]=(f*Qr-_*Tr+E*Gr)*Lr,p[14]=(Xe*Lt-Ve*nt-st*Vt)*Lr,p[15]=(de*nt-ve*Lt+Fe*Vt)*Lr,p):null},l.aq=we,l.ar=function(p){return Math.hypot(p[0],p[1])},l.as=function(p){return p[0]=0,p[1]=0,p},l.at=function(p,u,f){return p[0]=u[0]*f,p[1]=u[1]*f,p},l.au=Uw,l.av=ke,l.aw=function(p,u,f,_){const E=u.y-p.y,R=u.x-p.x,N=_.y-f.y,V=_.x-f.x,Q=N*R-V*E;if(Q===0)return null;const oe=(V*(p.y-f.y)-N*(p.x-f.x))/Q;return new S(p.x+oe*R,p.y+oe*E)},l.ax=AM,l.ay=pA,l.az=function(p){let u=1/0,f=1/0,_=-1/0,E=-1/0;for(const R of p)u=Math.min(u,R.x),f=Math.min(f,R.y),_=Math.max(_,R.x),E=Math.max(E,R.y);return[u,f,_,E]},l.b=hr,l.b$=MH,l.b0=function(p,u){return p[0]*u[0]+p[1]*u[1]+p[2]*u[2]+p[3]},l.b1=EM,l.b2=Am,l.b3=function(p,u,f,_,E){var R,N=1/Math.tan(u/2);return p[0]=N/f,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=N,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=-1,p[12]=0,p[13]=0,p[15]=0,E!=null&&E!==1/0?(p[10]=(E+_)*(R=1/(_-E)),p[14]=2*E*_*R):(p[10]=-1,p[14]=-2*_),p},l.b4=function(p){var u=new z(16);return u[0]=p[0],u[1]=p[1],u[2]=p[2],u[3]=p[3],u[4]=p[4],u[5]=p[5],u[6]=p[6],u[7]=p[7],u[8]=p[8],u[9]=p[9],u[10]=p[10],u[11]=p[11],u[12]=p[12],u[13]=p[13],u[14]=p[14],u[15]=p[15],u},l.b5=function(p,u,f){var _=Math.sin(f),E=Math.cos(f),R=u[0],N=u[1],V=u[2],Q=u[3],oe=u[4],de=u[5],ve=u[6],Fe=u[7];return u!==p&&(p[8]=u[8],p[9]=u[9],p[10]=u[10],p[11]=u[11],p[12]=u[12],p[13]=u[13],p[14]=u[14],p[15]=u[15]),p[0]=R*E+oe*_,p[1]=N*E+de*_,p[2]=V*E+ve*_,p[3]=Q*E+Fe*_,p[4]=oe*E-R*_,p[5]=de*E-N*_,p[6]=ve*E-V*_,p[7]=Fe*E-Q*_,p},l.b6=function(p,u,f){var _=Math.sin(f),E=Math.cos(f),R=u[4],N=u[5],V=u[6],Q=u[7],oe=u[8],de=u[9],ve=u[10],Fe=u[11];return u!==p&&(p[0]=u[0],p[1]=u[1],p[2]=u[2],p[3]=u[3],p[12]=u[12],p[13]=u[13],p[14]=u[14],p[15]=u[15]),p[4]=R*E+oe*_,p[5]=N*E+de*_,p[6]=V*E+ve*_,p[7]=Q*E+Fe*_,p[8]=oe*E-R*_,p[9]=de*E-N*_,p[10]=ve*E-V*_,p[11]=Fe*E-Q*_,p},l.b7=function(){const p=new Float32Array(16);return H(p),p},l.b8=function(){const p=new Float64Array(16);return H(p),p},l.b9=function(){return new Float64Array(16)},l.bA=function(p){return p[0]=0,p[1]=0,p[2]=0,p},l.bB=function(p,u,f,_){const E=Math.sqrt(p*p+u*u),R=Math.sqrt(f*f+_*_);p/=E,u/=E,f/=R,_/=R;const N=Math.acos(p*f+u*_);return-u*f+p*_>0?N:-N},l.bC=function(p,u){const f=be(p,2*Math.PI),_=be(u,2*Math.PI);return Math.min(Math.abs(f-_),Math.abs(f-_+2*Math.PI),Math.abs(f-_-2*Math.PI))},l.bD=function(){const p={},u=Et.$version;for(const f in Et.$root){const _=Et.$root[f];if(_.required){let E=null;E=f==="version"?u:_.type==="array"?[]:{},E!=null&&(p[f]=E)}}return p},l.bE=xr,l.bF=mt,l.bG=function p(u,f){if(Array.isArray(u)){if(!Array.isArray(f)||u.length!==f.length)return!1;for(let _=0;_<u.length;_++)if(!p(u[_],f[_]))return!1;return!0}if(typeof u=="object"&&u!==null&&f!==null){if(typeof f!="object"||Object.keys(u).length!==Object.keys(f).length)return!1;for(const _ in u)if(!p(u[_],f[_]))return!1;return!0}return u===f},l.bH=function(p){p=p.slice();const u=Object.create(null);for(let f=0;f<p.length;f++)u[p[f].id]=p[f];for(let f=0;f<p.length;f++)"ref"in p[f]&&(p[f]=$t(p[f],u[p[f].ref]));return p},l.bI=function(p){if(p.type==="custom")return new QH(p);switch(p.type){case"background":return new ZH(p);case"circle":return new UG(p);case"color-relief":return new ZG(p);case"fill":return new dH(p);case"fill-extrusion":return new bH(p);case"heatmap":return new HG(p);case"hillshade":return new XG(p);case"line":return new PH(p);case"raster":return new JH(p);case"symbol":return new $1(p)}},l.bJ=$e,l.bK=function(p,u){if(!p)return[{command:"setStyle",args:[u]}];let f=[];try{if(!Vr(p.version,u.version))return[{command:"setStyle",args:[u]}];Vr(p.center,u.center)||f.push({command:"setCenter",args:[u.center]}),Vr(p.state,u.state)||f.push({command:"setGlobalState",args:[u.state]}),Vr(p.centerAltitude,u.centerAltitude)||f.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Vr(p.zoom,u.zoom)||f.push({command:"setZoom",args:[u.zoom]}),Vr(p.bearing,u.bearing)||f.push({command:"setBearing",args:[u.bearing]}),Vr(p.pitch,u.pitch)||f.push({command:"setPitch",args:[u.pitch]}),Vr(p.roll,u.roll)||f.push({command:"setRoll",args:[u.roll]}),Vr(p.sprite,u.sprite)||f.push({command:"setSprite",args:[u.sprite]}),Vr(p.glyphs,u.glyphs)||f.push({command:"setGlyphs",args:[u.glyphs]}),Vr(p.transition,u.transition)||f.push({command:"setTransition",args:[u.transition]}),Vr(p.light,u.light)||f.push({command:"setLight",args:[u.light]}),Vr(p.terrain,u.terrain)||f.push({command:"setTerrain",args:[u.terrain]}),Vr(p.sky,u.sky)||f.push({command:"setSky",args:[u.sky]}),Vr(p.projection,u.projection)||f.push({command:"setProjection",args:[u.projection]});const _={},E=[];(function(N,V,Q,oe){let de;for(de in V=V||{},N=N||{})Object.prototype.hasOwnProperty.call(N,de)&&(Object.prototype.hasOwnProperty.call(V,de)||Te(de,Q,oe));for(de in V)Object.prototype.hasOwnProperty.call(V,de)&&(Object.prototype.hasOwnProperty.call(N,de)?Vr(N[de],V[de])||(N[de].type==="geojson"&&V[de].type==="geojson"&&ht(N,V,de)?Rr(Q,{command:"setGeoJSONSourceData",args:[de,V[de].data]}):qe(de,V,Q,oe)):un(de,V,Q))})(p.sources,u.sources,E,_);const R=[];p.layers&&p.layers.forEach((N=>{"source"in N&&_[N.source]?f.push({command:"removeLayer",args:[N.id]}):R.push(N)})),f=f.concat(E),(function(N,V,Q){V=V||[];const oe=(N=N||[]).map(gr),de=V.map(gr),ve=N.reduce(Ur,{}),Fe=V.reduce(Ur,{}),je=oe.slice(),Ve=Object.create(null);let Xe,st,yt,Vt,Lt;for(let ze=0,nt=0;ze<oe.length;ze++)Xe=oe[ze],Object.prototype.hasOwnProperty.call(Fe,Xe)?nt++:(Rr(Q,{command:"removeLayer",args:[Xe]}),je.splice(je.indexOf(Xe,nt),1));for(let ze=0,nt=0;ze<de.length;ze++)Xe=de[de.length-1-ze],je[je.length-1-ze]!==Xe&&(Object.prototype.hasOwnProperty.call(ve,Xe)?(Rr(Q,{command:"removeLayer",args:[Xe]}),je.splice(je.lastIndexOf(Xe,je.length-nt),1)):nt++,Vt=je[je.length-ze],Rr(Q,{command:"addLayer",args:[Fe[Xe],Vt]}),je.splice(je.length-ze,0,Xe),Ve[Xe]=!0);for(let ze=0;ze<de.length;ze++)if(Xe=de[ze],st=ve[Xe],yt=Fe[Xe],!Ve[Xe]&&!Vr(st,yt))if(Vr(st.source,yt.source)&&Vr(st["source-layer"],yt["source-layer"])&&Vr(st.type,yt.type)){for(Lt in kt(st.layout,yt.layout,Q,Xe,null,"setLayoutProperty"),kt(st.paint,yt.paint,Q,Xe,null,"setPaintProperty"),Vr(st.filter,yt.filter)||Rr(Q,{command:"setFilter",args:[Xe,yt.filter]}),Vr(st.minzoom,yt.minzoom)&&Vr(st.maxzoom,yt.maxzoom)||Rr(Q,{command:"setLayerZoomRange",args:[Xe,yt.minzoom,yt.maxzoom]}),st)Object.prototype.hasOwnProperty.call(st,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?kt(st[Lt],yt[Lt],Q,Xe,Lt.slice(6),"setPaintProperty"):Vr(st[Lt],yt[Lt])||Rr(Q,{command:"setLayerProperty",args:[Xe,Lt,yt[Lt]]}));for(Lt in yt)Object.prototype.hasOwnProperty.call(yt,Lt)&&!Object.prototype.hasOwnProperty.call(st,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?kt(st[Lt],yt[Lt],Q,Xe,Lt.slice(6),"setPaintProperty"):Vr(st[Lt],yt[Lt])||Rr(Q,{command:"setLayerProperty",args:[Xe,Lt,yt[Lt]]}))}else Rr(Q,{command:"removeLayer",args:[Xe]}),Vt=je[je.lastIndexOf(Xe)+1],Rr(Q,{command:"addLayer",args:[yt,Vt]})})(R,u.layers,f)}catch(_){console.warn("Unable to compute style diff:",_),f=[{command:"setStyle",args:[u]}]}return f},l.bL=function(p){const u=[],f=p.id;return f===void 0&&u.push({message:`layers.${f}: missing required property "id"`}),p.render===void 0&&u.push({message:`layers.${f}: missing required method "render"`}),p.renderingMode&&p.renderingMode!=="2d"&&p.renderingMode!=="3d"&&u.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),u},l.bM=Mt,l.bN=ot,l.bO=class extends Ja{constructor(p,u){super(p,u),this.current=0}set(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}},l.bP=M1,l.bQ=class extends Ja{constructor(p,u){super(p,u),this.current=vw}set(p){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let u=1;u<16;u++)if(p[u]!==this.current[u]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}},l.bR=gs,l.bS=class extends Ja{constructor(p,u){super(p,u),this.current=[0,0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))}},l.bT=class extends Ja{constructor(p,u){super(p,u),this.current=[0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))}},l.bU=U,l.bV=function(p,u){var f=Math.sin(u),_=Math.cos(u);return p[0]=_,p[1]=f,p[2]=0,p[3]=-f,p[4]=_,p[5]=0,p[6]=0,p[7]=0,p[8]=1,p},l.bW=function(p,u,f){var _=u[0],E=u[1],R=u[2];return p[0]=_*f[0]+E*f[3]+R*f[6],p[1]=_*f[1]+E*f[4]+R*f[7],p[2]=_*f[2]+E*f[5]+R*f[8],p},l.bX=function(p,u,f,_,E,R,N){var V=1/(u-f),Q=1/(_-E),oe=1/(R-N);return p[0]=-2*V,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*Q,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*oe,p[11]=0,p[12]=(u+f)*V,p[13]=(E+_)*Q,p[14]=(N+R)*oe,p[15]=1,p},l.bY=class extends Ja{constructor(p,u){super(p,u),this.current=new Array}set(p){if(p!=this.current){this.current=p;const u=new Float32Array(4*p.length);for(let f=0;f<p.length;f++)u[4*f]=p[f].r,u[4*f+1]=p[f].g,u[4*f+2]=p[f].b,u[4*f+3]=p[f].a;this.gl.uniform4fv(this.location,u)}}},l.bZ=class extends Ja{constructor(p,u){super(p,u),this.current=new Array}set(p){if(p!=this.current){this.current=p;const u=new Float32Array(p);this.gl.uniform1fv(this.location,u)}}},l.b_=class extends w{},l.ba=function(p,u,f){const _=new Float64Array(4);return Se(_,p,u-90,f),_},l.bb=function(p,u,f,_){var E,R,N,V,Q,oe=u[0],de=u[1],ve=u[2],Fe=u[3],je=f[0],Ve=f[1],Xe=f[2],st=f[3];return(R=oe*je+de*Ve+ve*Xe+Fe*st)<0&&(R=-R,je=-je,Ve=-Ve,Xe=-Xe,st=-st),1-R>q?(E=Math.acos(R),N=Math.sin(E),V=Math.sin((1-_)*E)/N,Q=Math.sin(_*E)/N):(V=1-_,Q=_),p[0]=V*oe+Q*je,p[1]=V*de+Q*Ve,p[2]=V*ve+Q*Xe,p[3]=V*Fe+Q*st,p},l.bc=function(p){const u=new Float64Array(9);var f,_,E,R,N,V,Q,oe,de,ve,Fe,je,Ve,Xe,st,yt,Vt,Lt;ve=(E=(_=p)[0])*(Q=E+E),Fe=(R=_[1])*Q,Ve=(N=_[2])*Q,Xe=N*(oe=R+R),yt=(V=_[3])*Q,Vt=V*oe,Lt=V*(de=N+N),(f=u)[0]=1-(je=R*oe)-(st=N*de),f[3]=Fe-Lt,f[6]=Ve+Vt,f[1]=Fe+Lt,f[4]=1-ve-st,f[7]=Xe-yt,f[2]=Ve-Vt,f[5]=Xe+yt,f[8]=1-ve-je;const ze=ar(-Math.asin(tt(u[2],-1,1)));let nt,Nt;return Math.hypot(u[5],u[8])<.001?(nt=0,Nt=-ar(Math.atan2(u[3],u[4]))):(nt=ar(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Nt=ar(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:nt,pitch:ze+90,bearing:Nt}},l.bd=function(p,u){return p.roll==u.roll&&p.pitch==u.pitch&&p.bearing==u.bearing},l.be=gn,l.bf=Dl,l.bg=Pm,l.bh=Gy,l.bi=Tm,l.bj=Me,l.bk=Le,l.bl=Zn,l.bm=function(p,u,f,_,E){return Me(_,E,tt((p-u)/(f-u),0,1))},l.bn=be,l.bo=function(){return new Float64Array(3)},l.bp=function(p,u,f,_){return p[0]=u[0]+f[0]*_,p[1]=u[1]+f[1]*_,p[2]=u[2]+f[2]*_,p},l.bq=Se,l.br=function(p,u,f){var _=f[0],E=f[1],R=f[2],N=u[0],V=u[1],Q=u[2],oe=E*Q-R*V,de=R*N-_*Q,ve=_*V-E*N,Fe=E*ve-R*de,je=R*oe-_*ve,Ve=_*de-E*oe,Xe=2*f[3];return de*=Xe,ve*=Xe,je*=2,Ve*=2,p[0]=N+(oe*=Xe)+(Fe*=2),p[1]=V+de+je,p[2]=Q+ve+Ve,p},l.bs=function(p,u,f){const _=(E=[p[0],p[1],p[2],u[0],u[1],u[2],f[0],f[1],f[2]])[0]*((de=E[8])*(N=E[4])-(V=E[5])*(oe=E[7]))+E[1]*(-de*(R=E[3])+V*(Q=E[6]))+E[2]*(oe*R-N*Q);var E,R,N,V,Q,oe,de;if(_===0)return null;const ve=ae([],[u[0],u[1],u[2]],[f[0],f[1],f[2]]),Fe=ae([],[f[0],f[1],f[2]],[p[0],p[1],p[2]]),je=ae([],[p[0],p[1],p[2]],[u[0],u[1],u[2]]),Ve=ne([],ve,-p[3]);return G(Ve,Ve,ne([],Fe,-u[3])),G(Ve,Ve,ne([],je,-f[3])),ne(Ve,Ve,1/_),Ve},l.bt=Xw,l.bu=function(){return new Float64Array(4)},l.bv=function(p,u,f,_){var E=[],R=[];return E[0]=u[0]-f[0],E[1]=u[1]-f[1],E[2]=u[2]-f[2],R[0]=E[0]*Math.cos(_)-E[1]*Math.sin(_),R[1]=E[0]*Math.sin(_)+E[1]*Math.cos(_),R[2]=E[2],p[0]=R[0]+f[0],p[1]=R[1]+f[1],p[2]=R[2]+f[2],p},l.bw=function(p,u,f,_){var E=[],R=[];return E[0]=u[0]-f[0],E[1]=u[1]-f[1],E[2]=u[2]-f[2],R[0]=E[0],R[1]=E[1]*Math.cos(_)-E[2]*Math.sin(_),R[2]=E[1]*Math.sin(_)+E[2]*Math.cos(_),p[0]=R[0]+f[0],p[1]=R[1]+f[1],p[2]=R[2]+f[2],p},l.bx=function(p,u,f,_){var E=[],R=[];return E[0]=u[0]-f[0],E[1]=u[1]-f[1],E[2]=u[2]-f[2],R[0]=E[2]*Math.sin(_)+E[0]*Math.cos(_),R[1]=E[1],R[2]=E[2]*Math.cos(_)-E[0]*Math.sin(_),p[0]=R[0]+f[0],p[1]=R[1]+f[1],p[2]=R[2]+f[2],p},l.by=function(p,u,f){var _=Math.sin(f),E=Math.cos(f),R=u[0],N=u[1],V=u[2],Q=u[3],oe=u[8],de=u[9],ve=u[10],Fe=u[11];return u!==p&&(p[4]=u[4],p[5]=u[5],p[6]=u[6],p[7]=u[7],p[12]=u[12],p[13]=u[13],p[14]=u[14],p[15]=u[15]),p[0]=R*E-oe*_,p[1]=N*E-de*_,p[2]=V*E-ve*_,p[3]=Q*E-Fe*_,p[8]=R*_+oe*E,p[9]=N*_+de*E,p[10]=V*_+ve*E,p[11]=Q*_+Fe*E,p},l.bz=function(p,u){const f=be(p,360),_=be(u,360),E=_-f,R=_>f?E-360:E+360;return Math.abs(E)<Math.abs(R)?E:R},l.c=Ct,l.c0=class extends L{},l.c1=Cw,l.c2=function(p){return p<=1?1:Math.pow(2,Math.ceil(Math.log(p)/Math.LN2))},l.c3=CA,l.c4=function(p,u,f){var _=u[0],E=u[1],R=u[2],N=f[3]*_+f[7]*E+f[11]*R+f[15];return p[0]=(f[0]*_+f[4]*E+f[8]*R+f[12])/(N=N||1),p[1]=(f[1]*_+f[5]*E+f[9]*R+f[13])/N,p[2]=(f[2]*_+f[6]*E+f[10]*R+f[14])/N,p},l.c5=class extends tl{},l.c6=class extends xe{},l.c7=function(p,u){return p[0]===u[0]&&p[1]===u[1]&&p[2]===u[2]&&p[3]===u[3]&&p[4]===u[4]&&p[5]===u[5]&&p[6]===u[6]&&p[7]===u[7]&&p[8]===u[8]&&p[9]===u[9]&&p[10]===u[10]&&p[11]===u[11]&&p[12]===u[12]&&p[13]===u[13]&&p[14]===u[14]&&p[15]===u[15]},l.c8=function(p,u){var f=p[0],_=p[1],E=p[2],R=p[3],N=p[4],V=p[5],Q=p[6],oe=p[7],de=p[8],ve=p[9],Fe=p[10],je=p[11],Ve=p[12],Xe=p[13],st=p[14],yt=p[15],Vt=u[0],Lt=u[1],ze=u[2],nt=u[3],Nt=u[4],vr=u[5],Gr=u[6],Tr=u[7],Mr=u[8],Qr=u[9],Hr=u[10],rn=u[11],Lr=u[12],kn=u[13],Xn=u[14],Gn=u[15];return Math.abs(f-Vt)<=q*Math.max(1,Math.abs(f),Math.abs(Vt))&&Math.abs(_-Lt)<=q*Math.max(1,Math.abs(_),Math.abs(Lt))&&Math.abs(E-ze)<=q*Math.max(1,Math.abs(E),Math.abs(ze))&&Math.abs(R-nt)<=q*Math.max(1,Math.abs(R),Math.abs(nt))&&Math.abs(N-Nt)<=q*Math.max(1,Math.abs(N),Math.abs(Nt))&&Math.abs(V-vr)<=q*Math.max(1,Math.abs(V),Math.abs(vr))&&Math.abs(Q-Gr)<=q*Math.max(1,Math.abs(Q),Math.abs(Gr))&&Math.abs(oe-Tr)<=q*Math.max(1,Math.abs(oe),Math.abs(Tr))&&Math.abs(de-Mr)<=q*Math.max(1,Math.abs(de),Math.abs(Mr))&&Math.abs(ve-Qr)<=q*Math.max(1,Math.abs(ve),Math.abs(Qr))&&Math.abs(Fe-Hr)<=q*Math.max(1,Math.abs(Fe),Math.abs(Hr))&&Math.abs(je-rn)<=q*Math.max(1,Math.abs(je),Math.abs(rn))&&Math.abs(Ve-Lr)<=q*Math.max(1,Math.abs(Ve),Math.abs(Lr))&&Math.abs(Xe-kn)<=q*Math.max(1,Math.abs(Xe),Math.abs(kn))&&Math.abs(st-Xn)<=q*Math.max(1,Math.abs(st),Math.abs(Xn))&&Math.abs(yt-Gn)<=q*Math.max(1,Math.abs(yt),Math.abs(Gn))},l.c9=function(p,u){return p[0]=u[0],p[1]=u[1],p[2]=u[2],p[3]=u[3],p[4]=u[4],p[5]=u[5],p[6]=u[6],p[7]=u[7],p[8]=u[8],p[9]=u[9],p[10]=u[10],p[11]=u[11],p[12]=u[12],p[13]=u[13],p[14]=u[14],p[15]=u[15],p},l.cA=function(p){delete Re.REGISTERED_PROTOCOLS[p]},l.cB=function(p,u){const f={};for(let E=0;E<p.length;E++){const R=u&&u[p[E].id]||yl(p[E]);u&&(u[p[E].id]=R);let N=f[R];N||(N=f[R]=[]),N.push(p[E])}const _=[];for(const E in f)_.push(f[E]);return _},l.cC=_t,l.cD=TM,l.cE=IM,l.cF=iM,l.cG=function(p){p.bucket.createArrays(),p.bucket.tilePixelRatio=ce/(512*p.bucket.overscaling),p.bucket.compareText={},p.bucket.iconsNeedLinear=!1;const u=p.bucket.layers[0],f=u.layout,_=u._unevaluatedLayout._values,E={layoutIconSize:_["icon-size"].possiblyEvaluate(new Dn(p.bucket.zoom+1),p.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new Dn(p.bucket.zoom+1),p.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new Dn(18))};if(p.bucket.textSizeData.kind==="composite"){const{minZoom:oe,maxZoom:de}=p.bucket.textSizeData;E.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Dn(oe),p.canonical),_["text-size"].possiblyEvaluate(new Dn(de),p.canonical)]}if(p.bucket.iconSizeData.kind==="composite"){const{minZoom:oe,maxZoom:de}=p.bucket.iconSizeData;E.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Dn(oe),p.canonical),_["icon-size"].possiblyEvaluate(new Dn(de),p.canonical)]}const R=f.get("text-line-height")*js,N=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",V=f.get("text-keep-upright"),Q=f.get("text-size");for(const oe of p.bucket.features){const de=f.get("text-font").evaluate(oe,{},p.canonical).join(","),ve=Q.evaluate(oe,{},p.canonical),Fe=E.layoutTextSize.evaluate(oe,{},p.canonical),je=E.layoutIconSize.evaluate(oe,{},p.canonical),Ve={horizontal:{},vertical:void 0},Xe=oe.text;let st,yt=[0,0];if(Xe){const ze=Xe.toString(),nt=f.get("text-letter-spacing").evaluate(oe,{},p.canonical)*js,Nt=an(ze)?nt:0,vr=f.get("text-anchor").evaluate(oe,{},p.canonical),Gr=zM(u,oe,p.canonical);if(!Gr){const Hr=f.get("text-radial-offset").evaluate(oe,{},p.canonical);yt=Hr?BM(vr,[Hr*js,Kw]):f.get("text-offset").evaluate(oe,{},p.canonical).map((rn=>rn*js))}let Tr=N?"center":f.get("text-justify").evaluate(oe,{},p.canonical);const Mr=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(oe,{},p.canonical)*js:1/0,Qr=()=>{p.bucket.allowVerticalPlacement&&Fr(ze)&&(Ve.vertical=z1(Xe,p.glyphMap,p.glyphPositions,p.imagePositions,de,Mr,R,vr,"left",Nt,yt,l.an.vertical,!0,Fe,ve))};if(!N&&Gr){const Hr=new Set;if(Tr==="auto")for(let Lr=0;Lr<Gr.values.length;Lr+=2)Hr.add(Jw(Gr.values[Lr]));else Hr.add(Tr);let rn=!1;for(const Lr of Hr)if(!Ve.horizontal[Lr])if(rn)Ve.horizontal[Lr]=Ve.horizontal[0];else{const kn=z1(Xe,p.glyphMap,p.glyphPositions,p.imagePositions,de,Mr,R,"center",Lr,Nt,yt,l.an.horizontal,!1,Fe,ve);kn&&(Ve.horizontal[Lr]=kn,rn=kn.positionedLines.length===1)}Qr()}else{Tr==="auto"&&(Tr=Jw(vr));const Hr=z1(Xe,p.glyphMap,p.glyphPositions,p.imagePositions,de,Mr,R,vr,Tr,Nt,yt,l.an.horizontal,!1,Fe,ve);Hr&&(Ve.horizontal[Tr]=Hr),Qr(),Fr(ze)&&N&&V&&(Ve.vertical=z1(Xe,p.glyphMap,p.glyphPositions,p.imagePositions,de,Mr,R,vr,Tr,Nt,yt,l.an.vertical,!1,Fe,ve))}}let Vt=!1;if(oe.icon&&oe.icon.name){const ze=p.imageMap[oe.icon.name];ze&&(st=GH(p.imagePositions[oe.icon.name],f.get("icon-offset").evaluate(oe,{},p.canonical),f.get("icon-anchor").evaluate(oe,{},p.canonical)),Vt=!!ze.sdf,p.bucket.sdfIcons===void 0?p.bucket.sdfIcons=Vt:p.bucket.sdfIcons!==Vt&&Wt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ze.pixelRatio!==p.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(p.bucket.iconsNeedLinear=!0))}const Lt=qM(Ve.horizontal)||Ve.vertical;p.bucket.iconsInText=!!Lt&&Lt.iconsInText,(Lt||st)&&lW(p.bucket,oe,Ve,st,p.imageMap,E,Fe,je,yt,Vt,p.canonical,p.subdivisionGranularity)}p.showCollisionBoxes&&p.bucket.generateCollisionDebugBuffers()},l.cH=Ow,l.cI=Aw,l.cJ=Nw,l.cK=Wy,l.cL=zw,l.cM=class{constructor(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let p=performance.getEntriesByName(this._marks.measure);return p.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),p=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),p}},l.cN=function(p,u,f,_,E){return a(this,void 0,void 0,(function*(){if(D())try{return yield Cr(p,u,f,_,E)}catch{}return(function(R,N,V,Q,oe){const de=R.width,ve=R.height;br&&nr||(br=new OffscreenCanvas(de,ve),nr=br.getContext("2d",{willReadFrequently:!0})),br.width=de,br.height=ve,nr.drawImage(R,0,0,de,ve);const Fe=nr.getImageData(N,V,Q,oe);return nr.clearRect(0,0,de,ve),Fe.data})(p,u,f,_,E)}))},l.cO=PA,l.cP=c,l.cQ=v,l.cR=UA,l.cS=rM,l.cT=nh,l.cU=ya,l.ca=p=>p.type==="symbol",l.cb=p=>p.type==="circle",l.cc=p=>p.type==="heatmap",l.cd=p=>p.type==="line",l.ce=p=>p.type==="fill",l.cf=p=>p.type==="fill-extrusion",l.cg=p=>p.type==="hillshade",l.ch=p=>p.type==="color-relief",l.ci=p=>p.type==="raster",l.cj=p=>p.type==="background",l.ck=p=>p.type==="custom",l.cl=Ue,l.cm=function(p,u,f){const _=Pe(u.x-f.x,u.y-f.y),E=Pe(p.x-f.x,p.y-f.y);var R,N;return ar(Math.atan2(_[0]*E[1]-_[1]*E[0],(R=_)[0]*(N=E)[0]+R[1]*N[1]))},l.cn=Oe,l.co=function(p,u){return Qt[u]&&(p instanceof MouseEvent||p instanceof WheelEvent)},l.cp=function(p,u){return kr[u]&&"touches"in p},l.cq=function(p){return kr[p]||Qt[p]},l.cr=function(p,u,f){var _=u[0],E=u[1];return p[0]=f[0]*_+f[4]*E+f[12],p[1]=f[1]*_+f[5]*E+f[13],p},l.cs=function(p,u){const{x:f,y:_}=Jy.fromLngLat(u);return!(p<0||p>25||_<0||_>=1||f<0||f>=1)},l.ct=function(p,u){return p[0]=u[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=u[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=u[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p},l.cu=class extends So{},l.cv=cW,l.cx=function(p){return p.message===Ht},l.cy=rt,l.cz=function(p,u){Re.REGISTERED_PROTOCOLS[p]=u},l.d=Ot,l.e=Qe,l.f=p=>a(void 0,void 0,void 0,(function*(){if(p.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(p)],{type:"image/png"});try{return createImageBitmap(u)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),l.g=Be,l.h=p=>new Promise(((u,f)=>{const _=new Image;_.onload=()=>{u(_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame((()=>{_.src=ur}))},_.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const E=new Blob([new Uint8Array(p)],{type:"image/png"});_.src=p.byteLength?URL.createObjectURL(E):ur})),l.i=at,l.j=(p,u)=>At(Qe(p,{type:"json"}),u),l.k=wt,l.l=Bt,l.m=At,l.n=(p,u)=>At(Qe(p,{type:"arrayBuffer"}),u),l.o=function(p){return new zw(p).readFields(DH,[])},l.p=nM,l.q=jy,l.r=za,l.s=lr,l.t=Uo,l.u=yr,l.v=Et,l.w=Wt,l.x=Ee,l.y=it,l.z=he})),i("worker",["./shared"],(function(l){class a{constructor(Re){this.keyCache={},Re&&this.replace(Re)}replace(Re){this._layerConfigs={},this._layers={},this.update(Re,[])}update(Re,Be){for(const rt of Re){this._layerConfigs[rt.id]=rt;const mt=this._layers[rt.id]=l.bI(rt);mt._featureFilter=l.a9(mt.filter),this.keyCache[rt.id]&&delete this.keyCache[rt.id]}for(const rt of Be)delete this.keyCache[rt],delete this._layerConfigs[rt],delete this._layers[rt];this.familiesBySource={};const De=l.cB(Object.values(this._layerConfigs),this.keyCache);for(const rt of De){const mt=rt.map((wt=>this._layers[wt.id])),At=mt[0];if(At.visibility==="none")continue;const Ot=At.source||"";let Tt=this.familiesBySource[Ot];Tt||(Tt=this.familiesBySource[Ot]={});const Yt=At.sourceLayer||"_geojsonTileLayer";let Bt=Tt[Yt];Bt||(Bt=Tt[Yt]=[]),Bt.push(mt)}}}class c{constructor(Re){const Be={},De=[];for(const Ot in Re){const Tt=Re[Ot],Yt=Be[Ot]={};for(const Bt in Tt){const wt=Tt[+Bt];if(!wt||wt.bitmap.width===0||wt.bitmap.height===0)continue;const Xt={x:0,y:0,w:wt.bitmap.width+2,h:wt.bitmap.height+2};De.push(Xt),Yt[Bt]={rect:Xt,metrics:wt.metrics}}}const{w:rt,h:mt}=l.p(De),At=new l.q({width:rt||1,height:mt||1});for(const Ot in Re){const Tt=Re[Ot];for(const Yt in Tt){const Bt=Tt[+Yt];if(!Bt||Bt.bitmap.width===0||Bt.bitmap.height===0)continue;const wt=Be[Ot][Yt].rect;l.q.copy(Bt.bitmap,At,{x:0,y:0},{x:wt.x+1,y:wt.y+1},Bt.bitmap)}}this.image=At,this.positions=Be}}l.cC("GlyphAtlas",c);class h{constructor(Re){this.tileID=new l.Z(Re.tileID.overscaledZ,Re.tileID.wrap,Re.tileID.canonical.z,Re.tileID.canonical.x,Re.tileID.canonical.y),this.uid=Re.uid,this.zoom=Re.zoom,this.pixelRatio=Re.pixelRatio,this.tileSize=Re.tileSize,this.source=Re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Re.showCollisionBoxes,this.collectResourceTiming=!!Re.collectResourceTiming,this.returnDependencies=!!Re.returnDependencies,this.promoteId=Re.promoteId,this.inFlightDependencies=[],this.globalState=Re.globalState}parse(Re,Be,De,rt,mt){return l._(this,void 0,void 0,(function*(){this.status="parsing",this.data=Re,this.collisionBoxArray=new l.a7;const At=new l.cD(Object.keys(Re.layers).sort()),Ot=new l.cE(this.tileID,this.promoteId);Ot.bucketLayerIDs=[];const Tt={},Yt={featureIndex:Ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:De,subdivisionGranularity:mt},Bt=Be.familiesBySource[this.source];for(const kt in Bt){const gr=Re.layers[kt];if(!gr)continue;gr.version===1&&l.w(`Vector tile source "${this.source}" layer "${kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ur=At.encode(kt),Er=[];for(let si=0;si<gr.length;si++){const Hn=gr.feature(si),di=Ot.getId(Hn,kt);Er.push({feature:Hn,id:di,index:si,sourceLayerIndex:Ur})}for(const si of Bt[kt]){const Hn=si[0];Hn.source!==this.source&&l.w(`layer.source = ${Hn.source} does not equal this.source = ${this.source}`),Hn.minzoom&&this.zoom<Math.floor(Hn.minzoom)||Hn.maxzoom&&this.zoom>=Hn.maxzoom||Hn.visibility!=="none"&&(g(si,this.zoom,De),(Tt[Hn.id]=Hn.createBucket({index:Ot.bucketLayerIDs.length,layers:si,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ur,sourceID:this.source,globalState:this.globalState})).populate(Er,Yt,this.tileID.canonical),Ot.bucketLayerIDs.push(si.map((di=>di.id))))}}const wt=l.bM(Yt.glyphDependencies,(kt=>Object.keys(kt).map(Number)));this.inFlightDependencies.forEach((kt=>kt?.abort())),this.inFlightDependencies=[];let Xt=Promise.resolve({});if(Object.keys(wt).length){const kt=new AbortController;this.inFlightDependencies.push(kt),Xt=rt.sendAsync({type:"GG",data:{stacks:wt,source:this.source,tileID:this.tileID,type:"glyphs"}},kt)}const Et=Object.keys(Yt.iconDependencies);let Ir=Promise.resolve({});if(Et.length){const kt=new AbortController;this.inFlightDependencies.push(kt),Ir=rt.sendAsync({type:"GI",data:{icons:Et,source:this.source,tileID:this.tileID,type:"icons"}},kt)}const $t=Object.keys(Yt.patternDependencies);let Vr=Promise.resolve({});if($t.length){const kt=new AbortController;this.inFlightDependencies.push(kt),Vr=rt.sendAsync({type:"GI",data:{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"}},kt)}const[Rr,un,Te]=yield Promise.all([Xt,Ir,Vr]),qe=new c(Rr),ht=new l.cF(un,Te);for(const kt in Tt){const gr=Tt[kt];gr instanceof l.a8?(g(gr.layers,this.zoom,De),l.cG({bucket:gr,glyphMap:Rr,glyphPositions:qe.positions,imageMap:un,imagePositions:ht.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Yt.subdivisionGranularity})):gr.hasPattern&&(gr instanceof l.cH||gr instanceof l.cI||gr instanceof l.cJ)&&(g(gr.layers,this.zoom,De),gr.addFeatures(Yt,this.tileID.canonical,ht.patternPositions))}return this.status="done",{buckets:Object.values(Tt).filter((kt=>!kt.isEmpty())),featureIndex:Ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qe.image,imageAtlas:ht,glyphMap:this.returnDependencies?Rr:null,iconMap:this.returnDependencies?un:null,glyphPositions:this.returnDependencies?qe.positions:null}}))}}function g(Ct,Re,Be){const De=new l.F(Re);for(const rt of Ct)rt.recalculate(De,Be)}class v{constructor(Re,Be,De){this.actor=Re,this.layerIndex=Be,this.availableImages=De,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Re,Be){return l._(this,void 0,void 0,(function*(){const De=yield l.n(Re.request,Be);try{return{vectorTile:new l.cK.VectorTile(new l.cL(De.data)),rawData:De.data,cacheControl:De.cacheControl,expires:De.expires}}catch(rt){const mt=new Uint8Array(De.data);let At=`Unable to parse the tile at ${Re.request.url}, `;throw At+=mt[0]===31&&mt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${rt.message}`,new Error(At)}}))}loadTile(Re){return l._(this,void 0,void 0,(function*(){const Be=Re.uid,De=!!(Re&&Re.request&&Re.request.collectResourceTiming)&&new l.cM(Re.request),rt=new h(Re);this.loading[Be]=rt;const mt=new AbortController;rt.abort=mt;try{const At=yield this.loadVectorTile(Re,mt);if(delete this.loading[Be],!At)return null;const Ot=At.rawData,Tt={};At.expires&&(Tt.expires=At.expires),At.cacheControl&&(Tt.cacheControl=At.cacheControl);const Yt={};if(De){const wt=De.finish();wt&&(Yt.resourceTiming=JSON.parse(JSON.stringify(wt)))}rt.vectorTile=At.vectorTile;const Bt=rt.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor,Re.subdivisionGranularity);this.loaded[Be]=rt,this.fetching[Be]={rawTileData:Ot,cacheControl:Tt,resourceTiming:Yt};try{const wt=yield Bt;return l.e({rawTileData:Ot.slice(0)},wt,Tt,Yt)}finally{delete this.fetching[Be]}}catch(At){throw delete this.loading[Be],rt.status="done",this.loaded[Be]=rt,At}}))}reloadTile(Re){return l._(this,void 0,void 0,(function*(){const Be=Re.uid;if(!this.loaded||!this.loaded[Be])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const De=this.loaded[Be];if(De.showCollisionBoxes=Re.showCollisionBoxes,De.globalState=Re.globalState,De.status==="parsing"){const rt=yield De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Re.subdivisionGranularity);let mt;if(this.fetching[Be]){const{rawTileData:At,cacheControl:Ot,resourceTiming:Tt}=this.fetching[Be];delete this.fetching[Be],mt=l.e({rawTileData:At.slice(0)},rt,Ot,Tt)}else mt=rt;return mt}if(De.status==="done"&&De.vectorTile)return De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Re.subdivisionGranularity)}))}abortTile(Re){return l._(this,void 0,void 0,(function*(){const Be=this.loading,De=Re.uid;Be&&Be[De]&&Be[De].abort&&(Be[De].abort.abort(),delete Be[De])}))}removeTile(Re){return l._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[Re.uid]&&delete this.loaded[Re.uid]}))}}class x{constructor(){this.loaded={}}loadTile(Re){return l._(this,void 0,void 0,(function*(){const{uid:Be,encoding:De,rawImageData:rt,redFactor:mt,greenFactor:At,blueFactor:Ot,baseShift:Tt}=Re,Yt=rt.width+2,Bt=rt.height+2,wt=l.b(rt)?new l.R({width:Yt,height:Bt},yield l.cN(rt,-1,-1,Yt,Bt)):rt,Xt=new l.cO(Be,wt,De,mt,At,Ot,Tt);return this.loaded=this.loaded||{},this.loaded[Be]=Xt,Xt}))}removeTile(Re){const Be=this.loaded,De=Re.uid;Be&&Be[De]&&delete Be[De]}}var b,S,I=(function(){if(S)return b;function Ct(Be,De){if(Be.length!==0){Re(Be[0],De);for(var rt=1;rt<Be.length;rt++)Re(Be[rt],!De)}}function Re(Be,De){for(var rt=0,mt=0,At=0,Ot=Be.length,Tt=Ot-1;At<Ot;Tt=At++){var Yt=(Be[At][0]-Be[Tt][0])*(Be[Tt][1]+Be[At][1]),Bt=rt+Yt;mt+=Math.abs(rt)>=Math.abs(Yt)?rt-Bt+Yt:Yt-Bt+rt,rt=Bt}rt+mt>=0!=!!De&&Be.reverse()}return S=1,b=function Be(De,rt){var mt,At=De&&De.type;if(At==="FeatureCollection")for(mt=0;mt<De.features.length;mt++)Be(De.features[mt],rt);else if(At==="GeometryCollection")for(mt=0;mt<De.geometries.length;mt++)Be(De.geometries[mt],rt);else if(At==="Feature")Be(De.geometry,rt);else if(At==="Polygon")Ct(De.coordinates,rt);else if(At==="MultiPolygon")for(mt=0;mt<De.coordinates.length;mt++)Ct(De.coordinates[mt],rt);return De}})(),k=l.cP(I);const M=l.cK.VectorTileFeature.prototype.toGeoJSON;class O{constructor(Re){this._feature=Re,this.extent=l.$,this.type=Re.type,this.properties=Re.tags,"id"in Re&&!isNaN(Re.id)&&(this.id=parseInt(Re.id,10))}loadGeometry(){if(this._feature.type===1){const Re=[];for(const Be of this._feature.geometry)Re.push([new l.P(Be[0],Be[1])]);return Re}{const Re=[];for(const Be of this._feature.geometry){const De=[];for(const rt of Be)De.push(new l.P(rt[0],rt[1]));Re.push(De)}return Re}}toGeoJSON(Re,Be,De){return M.call(this,Re,Be,De)}}class F{constructor(Re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.$,this.length=Re.length,this._features=Re}feature(Re){return new O(this._features[Re])}}var D,q,z,U={exports:{}},H=(function(){if(z)return U.exports;z=1;var Ct=l.cS(),Re=(function(){if(q)return D;q=1;var Bt=l.cQ(),wt=l.cR().VectorTileFeature;function Xt(Ir,$t){this.options=$t||{},this.features=Ir,this.length=Ir.length}function Et(Ir,$t){this.id=typeof Ir.id=="number"?Ir.id:void 0,this.type=Ir.type,this.rawGeometry=Ir.type===1?[Ir.geometry]:Ir.geometry,this.properties=Ir.tags,this.extent=$t||4096}return D=Xt,Xt.prototype.feature=function(Ir){return new Et(this.features[Ir],this.options.extent)},Et.prototype.loadGeometry=function(){var Ir=this.rawGeometry;this.geometry=[];for(var $t=0;$t<Ir.length;$t++){for(var Vr=Ir[$t],Rr=[],un=0;un<Vr.length;un++)Rr.push(new Bt(Vr[un][0],Vr[un][1]));this.geometry.push(Rr)}return this.geometry},Et.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ir=this.geometry,$t=1/0,Vr=-1/0,Rr=1/0,un=-1/0,Te=0;Te<Ir.length;Te++)for(var qe=Ir[Te],ht=0;ht<qe.length;ht++){var kt=qe[ht];$t=Math.min($t,kt.x),Vr=Math.max(Vr,kt.x),Rr=Math.min(Rr,kt.y),un=Math.max(un,kt.y)}return[$t,Rr,Vr,un]},Et.prototype.toGeoJSON=wt.prototype.toGeoJSON,D})();function Be(Bt){var wt=new Ct;return(function(Xt,Et){for(var Ir in Xt.layers)Et.writeMessage(3,De,Xt.layers[Ir])})(Bt,wt),wt.finish()}function De(Bt,wt){var Xt;wt.writeVarintField(15,Bt.version||1),wt.writeStringField(1,Bt.name||""),wt.writeVarintField(5,Bt.extent||4096);var Et={keys:[],values:[],keycache:{},valuecache:{}};for(Xt=0;Xt<Bt.length;Xt++)Et.feature=Bt.feature(Xt),wt.writeMessage(2,rt,Et);var Ir=Et.keys;for(Xt=0;Xt<Ir.length;Xt++)wt.writeStringField(3,Ir[Xt]);var $t=Et.values;for(Xt=0;Xt<$t.length;Xt++)wt.writeMessage(4,Yt,$t[Xt])}function rt(Bt,wt){var Xt=Bt.feature;Xt.id!==void 0&&wt.writeVarintField(1,Xt.id),wt.writeMessage(2,mt,Bt),wt.writeVarintField(3,Xt.type),wt.writeMessage(4,Tt,Xt)}function mt(Bt,wt){var Xt=Bt.feature,Et=Bt.keys,Ir=Bt.values,$t=Bt.keycache,Vr=Bt.valuecache;for(var Rr in Xt.properties){var un=Xt.properties[Rr],Te=$t[Rr];if(un!==null){Te===void 0&&(Et.push(Rr),$t[Rr]=Te=Et.length-1),wt.writeVarint(Te);var qe=typeof un;qe!=="string"&&qe!=="boolean"&&qe!=="number"&&(un=JSON.stringify(un));var ht=qe+":"+un,kt=Vr[ht];kt===void 0&&(Ir.push(un),Vr[ht]=kt=Ir.length-1),wt.writeVarint(kt)}}}function At(Bt,wt){return(wt<<3)+(7&Bt)}function Ot(Bt){return Bt<<1^Bt>>31}function Tt(Bt,wt){for(var Xt=Bt.loadGeometry(),Et=Bt.type,Ir=0,$t=0,Vr=Xt.length,Rr=0;Rr<Vr;Rr++){var un=Xt[Rr],Te=1;Et===1&&(Te=un.length),wt.writeVarint(At(1,Te));for(var qe=Et===3?un.length-1:un.length,ht=0;ht<qe;ht++){ht===1&&Et!==1&&wt.writeVarint(At(2,qe-1));var kt=un[ht].x-Ir,gr=un[ht].y-$t;wt.writeVarint(Ot(kt)),wt.writeVarint(Ot(gr)),Ir+=kt,$t+=gr}Et===3&&wt.writeVarint(At(7,1))}}function Yt(Bt,wt){var Xt=typeof Bt;Xt==="string"?wt.writeStringField(1,Bt):Xt==="boolean"?wt.writeBooleanField(7,Bt):Xt==="number"&&(Bt%1!=0?wt.writeDoubleField(3,Bt):Bt<0?wt.writeSVarintField(6,Bt):wt.writeVarintField(5,Bt))}return U.exports=Be,U.exports.fromVectorTileJs=Be,U.exports.fromGeojsonVt=function(Bt,wt){wt=wt||{};var Xt={};for(var Et in Bt)Xt[Et]=new Re(Bt[Et].features,wt),Xt[Et].name=Et,Xt[Et].version=wt.version,Xt[Et].extent=wt.extent;return Be({layers:Xt})},U.exports.GeoJSONWrapper=Re,U.exports})(),X=l.cP(H);const ie={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ct=>Ct},ee=Math.fround||(G=new Float32Array(1),Ct=>(G[0]=+Ct,G[0]));var G;class ne{constructor(Re){this.options=Object.assign(Object.create(ie),Re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Re){const{log:Be,minZoom:De,maxZoom:rt}=this.options;Be&&console.time("total time");const mt=`prepare ${Re.length} points`;Be&&console.time(mt),this.points=Re;const At=[];for(let Tt=0;Tt<Re.length;Tt++){const Yt=Re[Tt];if(!Yt.geometry)continue;const[Bt,wt]=Yt.geometry.coordinates,Xt=ee(fe(Bt)),Et=ee(ke(wt));At.push(Xt,Et,1/0,Tt,-1,1),this.options.reduce&&At.push(0)}let Ot=this.trees[rt+1]=this._createTree(At);Be&&console.timeEnd(mt);for(let Tt=rt;Tt>=De;Tt--){const Yt=+Date.now();Ot=this.trees[Tt]=this._createTree(this._cluster(Ot,Tt)),Be&&console.log("z%d: %d clusters in %dms",Tt,Ot.numItems,+Date.now()-Yt)}return Be&&console.timeEnd("total time"),this}getClusters(Re,Be){let De=((Re[0]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,Re[1]));let mt=Re[2]===180?180:((Re[2]+180)%360+360)%360-180;const At=Math.max(-90,Math.min(90,Re[3]));if(Re[2]-Re[0]>=360)De=-180,mt=180;else if(De>mt){const wt=this.getClusters([De,rt,180,At],Be),Xt=this.getClusters([-180,rt,mt,At],Be);return wt.concat(Xt)}const Ot=this.trees[this._limitZoom(Be)],Tt=Ot.range(fe(De),ke(At),fe(mt),ke(rt)),Yt=Ot.data,Bt=[];for(const wt of Tt){const Xt=this.stride*wt;Bt.push(Yt[Xt+5]>1?ae(Yt,Xt,this.clusterProps):this.points[Yt[Xt+3]])}return Bt}getChildren(Re){const Be=this._getOriginId(Re),De=this._getOriginZoom(Re),rt="No cluster with the specified id.",mt=this.trees[De];if(!mt)throw new Error(rt);const At=mt.data;if(Be*this.stride>=At.length)throw new Error(rt);const Ot=this.options.radius/(this.options.extent*Math.pow(2,De-1)),Tt=mt.within(At[Be*this.stride],At[Be*this.stride+1],Ot),Yt=[];for(const Bt of Tt){const wt=Bt*this.stride;At[wt+4]===Re&&Yt.push(At[wt+5]>1?ae(At,wt,this.clusterProps):this.points[At[wt+3]])}if(Yt.length===0)throw new Error(rt);return Yt}getLeaves(Re,Be,De){const rt=[];return this._appendLeaves(rt,Re,Be=Be||10,De=De||0,0),rt}getTile(Re,Be,De){const rt=this.trees[this._limitZoom(Re)],mt=Math.pow(2,Re),{extent:At,radius:Ot}=this.options,Tt=Ot/At,Yt=(De-Tt)/mt,Bt=(De+1+Tt)/mt,wt={features:[]};return this._addTileFeatures(rt.range((Be-Tt)/mt,Yt,(Be+1+Tt)/mt,Bt),rt.data,Be,De,mt,wt),Be===0&&this._addTileFeatures(rt.range(1-Tt/mt,Yt,1,Bt),rt.data,mt,De,mt,wt),Be===mt-1&&this._addTileFeatures(rt.range(0,Yt,Tt/mt,Bt),rt.data,-1,De,mt,wt),wt.features.length?wt:null}getClusterExpansionZoom(Re){let Be=this._getOriginZoom(Re)-1;for(;Be<=this.options.maxZoom;){const De=this.getChildren(Re);if(Be++,De.length!==1)break;Re=De[0].properties.cluster_id}return Be}_appendLeaves(Re,Be,De,rt,mt){const At=this.getChildren(Be);for(const Ot of At){const Tt=Ot.properties;if(Tt&&Tt.cluster?mt+Tt.point_count<=rt?mt+=Tt.point_count:mt=this._appendLeaves(Re,Tt.cluster_id,De,rt,mt):mt<rt?mt++:Re.push(Ot),Re.length===De)break}return mt}_createTree(Re){const Be=new l.aH(Re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let De=0;De<Re.length;De+=this.stride)Be.add(Re[De],Re[De+1]);return Be.finish(),Be.data=Re,Be}_addTileFeatures(Re,Be,De,rt,mt,At){for(const Ot of Re){const Tt=Ot*this.stride,Yt=Be[Tt+5]>1;let Bt,wt,Xt;if(Yt)Bt=le(Be,Tt,this.clusterProps),wt=Be[Tt],Xt=Be[Tt+1];else{const $t=this.points[Be[Tt+3]];Bt=$t.properties;const[Vr,Rr]=$t.geometry.coordinates;wt=fe(Vr),Xt=ke(Rr)}const Et={type:1,geometry:[[Math.round(this.options.extent*(wt*mt-De)),Math.round(this.options.extent*(Xt*mt-rt))]],tags:Bt};let Ir;Ir=Yt||this.options.generateId?Be[Tt+3]:this.points[Be[Tt+3]].id,Ir!==void 0&&(Et.id=Ir),At.features.push(Et)}}_limitZoom(Re){return Math.max(this.options.minZoom,Math.min(Math.floor(+Re),this.options.maxZoom+1))}_cluster(Re,Be){const{radius:De,extent:rt,reduce:mt,minPoints:At}=this.options,Ot=De/(rt*Math.pow(2,Be)),Tt=Re.data,Yt=[],Bt=this.stride;for(let wt=0;wt<Tt.length;wt+=Bt){if(Tt[wt+2]<=Be)continue;Tt[wt+2]=Be;const Xt=Tt[wt],Et=Tt[wt+1],Ir=Re.within(Tt[wt],Tt[wt+1],Ot),$t=Tt[wt+5];let Vr=$t;for(const Rr of Ir){const un=Rr*Bt;Tt[un+2]>Be&&(Vr+=Tt[un+5])}if(Vr>$t&&Vr>=At){let Rr,un=Xt*$t,Te=Et*$t,qe=-1;const ht=(wt/Bt<<5)+(Be+1)+this.points.length;for(const kt of Ir){const gr=kt*Bt;if(Tt[gr+2]<=Be)continue;Tt[gr+2]=Be;const Ur=Tt[gr+5];un+=Tt[gr]*Ur,Te+=Tt[gr+1]*Ur,Tt[gr+4]=ht,mt&&(Rr||(Rr=this._map(Tt,wt,!0),qe=this.clusterProps.length,this.clusterProps.push(Rr)),mt(Rr,this._map(Tt,gr)))}Tt[wt+4]=ht,Yt.push(un/Vr,Te/Vr,1/0,ht,-1,Vr),mt&&Yt.push(qe)}else{for(let Rr=0;Rr<Bt;Rr++)Yt.push(Tt[wt+Rr]);if(Vr>1)for(const Rr of Ir){const un=Rr*Bt;if(!(Tt[un+2]<=Be)){Tt[un+2]=Be;for(let Te=0;Te<Bt;Te++)Yt.push(Tt[un+Te])}}}}return Yt}_getOriginId(Re){return Re-this.points.length>>5}_getOriginZoom(Re){return(Re-this.points.length)%32}_map(Re,Be,De){if(Re[Be+5]>1){const At=this.clusterProps[Re[Be+6]];return De?Object.assign({},At):At}const rt=this.points[Re[Be+3]].properties,mt=this.options.map(rt);return De&&mt===rt?Object.assign({},mt):mt}}function ae(Ct,Re,Be){return{type:"Feature",id:Ct[Re+3],properties:le(Ct,Re,Be),geometry:{type:"Point",coordinates:[(De=Ct[Re],360*(De-.5)),me(Ct[Re+1])]}};var De}function le(Ct,Re,Be){const De=Ct[Re+5],rt=De>=1e4?`${Math.round(De/1e3)}k`:De>=1e3?Math.round(De/100)/10+"k":De,mt=Ct[Re+6],At=mt===-1?{}:Object.assign({},Be[mt]);return Object.assign(At,{cluster:!0,cluster_id:Ct[Re+3],point_count:De,point_count_abbreviated:rt})}function fe(Ct){return Ct/360+.5}function ke(Ct){const Re=Math.sin(Ct*Math.PI/180),Be=.5-.25*Math.log((1+Re)/(1-Re))/Math.PI;return Be<0?0:Be>1?1:Be}function me(Ct){const Re=(180-360*Ct)*Math.PI/180;return 360*Math.atan(Math.exp(Re))/Math.PI-90}function Se(Ct,Re,Be,De){let rt=De;const mt=Re+(Be-Re>>1);let At,Ot=Be-Re;const Tt=Ct[Re],Yt=Ct[Re+1],Bt=Ct[Be],wt=Ct[Be+1];for(let Xt=Re+3;Xt<Be;Xt+=3){const Et=we(Ct[Xt],Ct[Xt+1],Tt,Yt,Bt,wt);if(Et>rt)At=Xt,rt=Et;else if(Et===rt){const Ir=Math.abs(Xt-mt);Ir<Ot&&(At=Xt,Ot=Ir)}}rt>De&&(At-Re>3&&Se(Ct,Re,At,De),Ct[At+2]=rt,Be-At>3&&Se(Ct,At,Be,De))}function we(Ct,Re,Be,De,rt,mt){let At=rt-Be,Ot=mt-De;if(At!==0||Ot!==0){const Tt=((Ct-Be)*At+(Re-De)*Ot)/(At*At+Ot*Ot);Tt>1?(Be=rt,De=mt):Tt>0&&(Be+=At*Tt,De+=Ot*Tt)}return At=Ct-Be,Ot=Re-De,At*At+Ot*Ot}function Pe(Ct,Re,Be,De){const rt={id:Ct??null,type:Re,geometry:Be,tags:De,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")ce(rt,Be);else if(Re==="Polygon")ce(rt,Be[0]);else if(Re==="MultiLineString")for(const mt of Be)ce(rt,mt);else if(Re==="MultiPolygon")for(const mt of Be)ce(rt,mt[0]);return rt}function ce(Ct,Re){for(let Be=0;Be<Re.length;Be+=3)Ct.minX=Math.min(Ct.minX,Re[Be]),Ct.minY=Math.min(Ct.minY,Re[Be+1]),Ct.maxX=Math.max(Ct.maxX,Re[Be]),Ct.maxY=Math.max(Ct.maxY,Re[Be+1])}function _e(Ct,Re,Be,De){if(!Re.geometry)return;const rt=Re.geometry.coordinates;if(rt&&rt.length===0)return;const mt=Re.geometry.type,At=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2);let Ot=[],Tt=Re.id;if(Be.promoteId?Tt=Re.properties[Be.promoteId]:Be.generateId&&(Tt=De||0),mt==="Point")be(rt,Ot);else if(mt==="MultiPoint")for(const Yt of rt)be(Yt,Ot);else if(mt==="LineString")Me(rt,Ot,At,!1);else if(mt==="MultiLineString"){if(Be.lineMetrics){for(const Yt of rt)Ot=[],Me(Yt,Ot,At,!1),Ct.push(Pe(Tt,"LineString",Ot,Re.properties));return}Le(rt,Ot,At,!1)}else if(mt==="Polygon")Le(rt,Ot,At,!0);else{if(mt!=="MultiPolygon"){if(mt==="GeometryCollection"){for(const Yt of Re.geometry.geometries)_e(Ct,{id:Tt,geometry:Yt,properties:Re.properties},Be,De);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Yt of rt){const Bt=[];Le(Yt,Bt,At,!0),Ot.push(Bt)}}Ct.push(Pe(Tt,mt,Ot,Re.properties))}function be(Ct,Re){Re.push(Ue(Ct[0]),Oe(Ct[1]),0)}function Me(Ct,Re,Be,De){let rt,mt,At=0;for(let Tt=0;Tt<Ct.length;Tt++){const Yt=Ue(Ct[Tt][0]),Bt=Oe(Ct[Tt][1]);Re.push(Yt,Bt,0),Tt>0&&(At+=De?(rt*Bt-Yt*mt)/2:Math.sqrt(Math.pow(Yt-rt,2)+Math.pow(Bt-mt,2))),rt=Yt,mt=Bt}const Ot=Re.length-3;Re[2]=1,Se(Re,0,Ot,Be),Re[Ot+2]=1,Re.size=Math.abs(At),Re.start=0,Re.end=Re.size}function Le(Ct,Re,Be,De){for(let rt=0;rt<Ct.length;rt++){const mt=[];Me(Ct[rt],mt,Be,De),Re.push(mt)}}function Ue(Ct){return Ct/360+.5}function Oe(Ct){const Re=Math.sin(Ct*Math.PI/180),Be=.5-.25*Math.log((1+Re)/(1-Re))/Math.PI;return Be<0?0:Be>1?1:Be}function tt(Ct,Re,Be,De,rt,mt,At,Ot){if(De/=Re,mt>=(Be/=Re)&&At<De)return Ct;if(At<Be||mt>=De)return null;const Tt=[];for(const Yt of Ct){const Bt=Yt.geometry;let wt=Yt.type;const Xt=rt===0?Yt.minX:Yt.minY,Et=rt===0?Yt.maxX:Yt.maxY;if(Xt>=Be&&Et<De){Tt.push(Yt);continue}if(Et<Be||Xt>=De)continue;let Ir=[];if(wt==="Point"||wt==="MultiPoint")Ze(Bt,Ir,Be,De,rt);else if(wt==="LineString")Qe(Bt,Ir,Be,De,rt,!1,Ot.lineMetrics);else if(wt==="MultiLineString")Mt(Bt,Ir,Be,De,rt,!1);else if(wt==="Polygon")Mt(Bt,Ir,Be,De,rt,!0);else if(wt==="MultiPolygon")for(const $t of Bt){const Vr=[];Mt($t,Vr,Be,De,rt,!0),Vr.length&&Ir.push(Vr)}if(Ir.length){if(Ot.lineMetrics&&wt==="LineString"){for(const $t of Ir)Tt.push(Pe(Yt.id,wt,$t,Yt.tags));continue}wt!=="LineString"&&wt!=="MultiLineString"||(Ir.length===1?(wt="LineString",Ir=Ir[0]):wt="MultiLineString"),wt!=="Point"&&wt!=="MultiPoint"||(wt=Ir.length===3?"Point":"MultiPoint"),Tt.push(Pe(Yt.id,wt,Ir,Yt.tags))}}return Tt.length?Tt:null}function Ze(Ct,Re,Be,De,rt){for(let mt=0;mt<Ct.length;mt+=3){const At=Ct[mt+rt];At>=Be&&At<=De&&ot(Re,Ct[mt],Ct[mt+1],Ct[mt+2])}}function Qe(Ct,Re,Be,De,rt,mt,At){let Ot=Ie(Ct);const Tt=rt===0?$e:tr;let Yt,Bt,wt=Ct.start;for(let Vr=0;Vr<Ct.length-3;Vr+=3){const Rr=Ct[Vr],un=Ct[Vr+1],Te=Ct[Vr+2],qe=Ct[Vr+3],ht=Ct[Vr+4],kt=rt===0?Rr:un,gr=rt===0?qe:ht;let Ur=!1;At&&(Yt=Math.sqrt(Math.pow(Rr-qe,2)+Math.pow(un-ht,2))),kt<Be?gr>Be&&(Bt=Tt(Ot,Rr,un,qe,ht,Be),At&&(Ot.start=wt+Yt*Bt)):kt>De?gr<De&&(Bt=Tt(Ot,Rr,un,qe,ht,De),At&&(Ot.start=wt+Yt*Bt)):ot(Ot,Rr,un,Te),gr<Be&&kt>=Be&&(Bt=Tt(Ot,Rr,un,qe,ht,Be),Ur=!0),gr>De&&kt<=De&&(Bt=Tt(Ot,Rr,un,qe,ht,De),Ur=!0),!mt&&Ur&&(At&&(Ot.end=wt+Yt*Bt),Re.push(Ot),Ot=Ie(Ct)),At&&(wt+=Yt)}let Xt=Ct.length-3;const Et=Ct[Xt],Ir=Ct[Xt+1],$t=rt===0?Et:Ir;$t>=Be&&$t<=De&&ot(Ot,Et,Ir,Ct[Xt+2]),Xt=Ot.length-3,mt&&Xt>=3&&(Ot[Xt]!==Ot[0]||Ot[Xt+1]!==Ot[1])&&ot(Ot,Ot[0],Ot[1],Ot[2]),Ot.length&&Re.push(Ot)}function Ie(Ct){const Re=[];return Re.size=Ct.size,Re.start=Ct.start,Re.end=Ct.end,Re}function Mt(Ct,Re,Be,De,rt,mt){for(const At of Ct)Qe(At,Re,Be,De,rt,mt,!1)}function ot(Ct,Re,Be,De){Ct.push(Re,Be,De)}function $e(Ct,Re,Be,De,rt,mt){const At=(mt-Re)/(De-Re);return ot(Ct,mt,Be+(rt-Be)*At,1),At}function tr(Ct,Re,Be,De,rt,mt){const At=(mt-Be)/(rt-Be);return ot(Ct,Re+(De-Re)*At,mt,1),At}function Wt(Ct,Re){const Be=[];for(let De=0;De<Ct.length;De++){const rt=Ct[De],mt=rt.type;let At;if(mt==="Point"||mt==="MultiPoint"||mt==="LineString")At=Gt(rt.geometry,Re);else if(mt==="MultiLineString"||mt==="Polygon"){At=[];for(const Ot of rt.geometry)At.push(Gt(Ot,Re))}else if(mt==="MultiPolygon"){At=[];for(const Ot of rt.geometry){const Tt=[];for(const Yt of Ot)Tt.push(Gt(Yt,Re));At.push(Tt)}}Be.push(Pe(rt.id,mt,At,rt.tags))}return Be}function Gt(Ct,Re){const Be=[];Be.size=Ct.size,Ct.start!==void 0&&(Be.start=Ct.start,Be.end=Ct.end);for(let De=0;De<Ct.length;De+=3)Be.push(Ct[De]+Re,Ct[De+1],Ct[De+2]);return Be}function at(Ct,Re){if(Ct.transformed)return Ct;const Be=1<<Ct.z,De=Ct.x,rt=Ct.y;for(const mt of Ct.features){const At=mt.geometry,Ot=mt.type;if(mt.geometry=[],Ot===1)for(let Tt=0;Tt<At.length;Tt+=2)mt.geometry.push(dr(At[Tt],At[Tt+1],Re,Be,De,rt));else for(let Tt=0;Tt<At.length;Tt++){const Yt=[];for(let Bt=0;Bt<At[Tt].length;Bt+=2)Yt.push(dr(At[Tt][Bt],At[Tt][Bt+1],Re,Be,De,rt));mt.geometry.push(Yt)}}return Ct.transformed=!0,Ct}function dr(Ct,Re,Be,De,rt,mt){return[Math.round(Be*(Ct*De-rt)),Math.round(Be*(Re*De-mt))]}function hr(Ct,Re,Be,De,rt){const mt=Re===rt.maxZoom?0:rt.tolerance/((1<<Re)*rt.extent),At={features:[],numPoints:0,numSimplified:0,numFeatures:Ct.length,source:null,x:Be,y:De,z:Re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ot of Ct)ur(At,Ot,mt,rt);return At}function ur(Ct,Re,Be,De){const rt=Re.geometry,mt=Re.type,At=[];if(Ct.minX=Math.min(Ct.minX,Re.minX),Ct.minY=Math.min(Ct.minY,Re.minY),Ct.maxX=Math.max(Ct.maxX,Re.maxX),Ct.maxY=Math.max(Ct.maxY,Re.maxY),mt==="Point"||mt==="MultiPoint")for(let Ot=0;Ot<rt.length;Ot+=3)At.push(rt[Ot],rt[Ot+1]),Ct.numPoints++,Ct.numSimplified++;else if(mt==="LineString")Cr(At,rt,Ct,Be,!1,!1);else if(mt==="MultiLineString"||mt==="Polygon")for(let Ot=0;Ot<rt.length;Ot++)Cr(At,rt[Ot],Ct,Be,mt==="Polygon",Ot===0);else if(mt==="MultiPolygon")for(let Ot=0;Ot<rt.length;Ot++){const Tt=rt[Ot];for(let Yt=0;Yt<Tt.length;Yt++)Cr(At,Tt[Yt],Ct,Be,!0,Yt===0)}if(At.length){let Ot=Re.tags||null;if(mt==="LineString"&&De.lineMetrics){Ot={};for(const Yt in Re.tags)Ot[Yt]=Re.tags[Yt];Ot.mapbox_clip_start=rt.start/rt.size,Ot.mapbox_clip_end=rt.end/rt.size}const Tt={geometry:At,type:mt==="Polygon"||mt==="MultiPolygon"?3:mt==="LineString"||mt==="MultiLineString"?2:1,tags:Ot};Re.id!==null&&(Tt.id=Re.id),Ct.features.push(Tt)}}function Cr(Ct,Re,Be,De,rt,mt){const At=De*De;if(De>0&&Re.size<(rt?At:De))return void(Be.numPoints+=Re.length/3);const Ot=[];for(let Tt=0;Tt<Re.length;Tt+=3)(De===0||Re[Tt+2]>At)&&(Be.numSimplified++,Ot.push(Re[Tt],Re[Tt+1])),Be.numPoints++;rt&&(function(Tt,Yt){let Bt=0;for(let wt=0,Xt=Tt.length,Et=Xt-2;wt<Xt;Et=wt,wt+=2)Bt+=(Tt[wt]-Tt[Et])*(Tt[wt+1]+Tt[Et+1]);if(Bt>0===Yt)for(let wt=0,Xt=Tt.length;wt<Xt/2;wt+=2){const Et=Tt[wt],Ir=Tt[wt+1];Tt[wt]=Tt[Xt-2-wt],Tt[wt+1]=Tt[Xt-1-wt],Tt[Xt-2-wt]=Et,Tt[Xt-1-wt]=Ir}})(Ot,mt),Ct.push(Ot)}const br={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class nr{constructor(Re,Be){const De=(Be=this.options=(function(mt,At){for(const Ot in At)mt[Ot]=At[Ot];return mt})(Object.create(br),Be)).debug;if(De&&console.time("preprocess data"),Be.maxZoom<0||Be.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Be.promoteId&&Be.generateId)throw new Error("promoteId and generateId cannot be used together.");let rt=(function(mt,At){const Ot=[];if(mt.type==="FeatureCollection")for(let Tt=0;Tt<mt.features.length;Tt++)_e(Ot,mt.features[Tt],At,Tt);else _e(Ot,mt.type==="Feature"?mt:{geometry:mt},At);return Ot})(Re,Be);this.tiles={},this.tileCoords=[],De&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Be.indexMaxZoom,Be.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),rt=(function(mt,At){const Ot=At.buffer/At.extent;let Tt=mt;const Yt=tt(mt,1,-1-Ot,Ot,0,-1,2,At),Bt=tt(mt,1,1-Ot,2+Ot,0,-1,2,At);return(Yt||Bt)&&(Tt=tt(mt,1,-Ot,1+Ot,0,-1,2,At)||[],Yt&&(Tt=Wt(Yt,1).concat(Tt)),Bt&&(Tt=Tt.concat(Wt(Bt,-1)))),Tt})(rt,Be),rt.length&&this.splitTile(rt,0,0,0),De&&(rt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Re,Be,De,rt,mt,At,Ot){const Tt=[Re,Be,De,rt],Yt=this.options,Bt=Yt.debug;for(;Tt.length;){rt=Tt.pop(),De=Tt.pop(),Be=Tt.pop(),Re=Tt.pop();const wt=1<<Be,Xt=lr(Be,De,rt);let Et=this.tiles[Xt];if(!Et&&(Bt>1&&console.time("creation"),Et=this.tiles[Xt]=hr(Re,Be,De,rt,Yt),this.tileCoords.push({z:Be,x:De,y:rt}),Bt)){Bt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Be,De,rt,Et.numFeatures,Et.numPoints,Et.numSimplified),console.timeEnd("creation"));const Ur=`z${Be}`;this.stats[Ur]=(this.stats[Ur]||0)+1,this.total++}if(Et.source=Re,mt==null){if(Be===Yt.indexMaxZoom||Et.numPoints<=Yt.indexMaxPoints)continue}else{if(Be===Yt.maxZoom||Be===mt)continue;if(mt!=null){const Ur=mt-Be;if(De!==At>>Ur||rt!==Ot>>Ur)continue}}if(Et.source=null,Re.length===0)continue;Bt>1&&console.time("clipping");const Ir=.5*Yt.buffer/Yt.extent,$t=.5-Ir,Vr=.5+Ir,Rr=1+Ir;let un=null,Te=null,qe=null,ht=null,kt=tt(Re,wt,De-Ir,De+Vr,0,Et.minX,Et.maxX,Yt),gr=tt(Re,wt,De+$t,De+Rr,0,Et.minX,Et.maxX,Yt);Re=null,kt&&(un=tt(kt,wt,rt-Ir,rt+Vr,1,Et.minY,Et.maxY,Yt),Te=tt(kt,wt,rt+$t,rt+Rr,1,Et.minY,Et.maxY,Yt),kt=null),gr&&(qe=tt(gr,wt,rt-Ir,rt+Vr,1,Et.minY,Et.maxY,Yt),ht=tt(gr,wt,rt+$t,rt+Rr,1,Et.minY,Et.maxY,Yt),gr=null),Bt>1&&console.timeEnd("clipping"),Tt.push(un||[],Be+1,2*De,2*rt),Tt.push(Te||[],Be+1,2*De,2*rt+1),Tt.push(qe||[],Be+1,2*De+1,2*rt),Tt.push(ht||[],Be+1,2*De+1,2*rt+1)}}getTile(Re,Be,De){Re=+Re,Be=+Be,De=+De;const rt=this.options,{extent:mt,debug:At}=rt;if(Re<0||Re>24)return null;const Ot=1<<Re,Tt=lr(Re,Be=Be+Ot&Ot-1,De);if(this.tiles[Tt])return at(this.tiles[Tt],mt);At>1&&console.log("drilling down to z%d-%d-%d",Re,Be,De);let Yt,Bt=Re,wt=Be,Xt=De;for(;!Yt&&Bt>0;)Bt--,wt>>=1,Xt>>=1,Yt=this.tiles[lr(Bt,wt,Xt)];return Yt&&Yt.source?(At>1&&(console.log("found parent tile z%d-%d-%d",Bt,wt,Xt),console.time("drilling down")),this.splitTile(Yt.source,Bt,wt,Xt,Re,Be,De),At>1&&console.timeEnd("drilling down"),this.tiles[Tt]?at(this.tiles[Tt],mt):null):null}}function lr(Ct,Re,Be){return 32*((1<<Ct)*Be+Re)+Ct}function Pr(Ct,Re){return Re?Ct.properties[Re]:Ct.id}function ar(Ct,Re){if(Ct==null)return!0;if(Ct.type==="Feature")return Pr(Ct,Re)!=null;if(Ct.type==="FeatureCollection"){const Be=new Set;for(const De of Ct.features){const rt=Pr(De,Re);if(rt==null||Be.has(rt))return!1;Be.add(rt)}return!0}return!1}function kr(Ct,Re){const Be=new Map;if(Ct!=null)if(Ct.type==="Feature")Be.set(Pr(Ct,Re),Ct);else for(const De of Ct.features)Be.set(Pr(De,Re),De);return Be}class Qt extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Re,Be){return l._(this,void 0,void 0,(function*(){const De=Re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const rt=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!rt)return null;const mt=new F(rt.features);let At=X(mt);return At.byteOffset===0&&At.byteLength===At.buffer.byteLength||(At=new Uint8Array(At)),{vectorTile:mt,rawData:At.buffer}}))}loadData(Re){return l._(this,void 0,void 0,(function*(){var Be;(Be=this._pendingRequest)===null||Be===void 0||Be.abort();const De=!!(Re&&Re.request&&Re.request.collectResourceTiming)&&new l.cM(Re.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Re,this._pendingRequest),this._geoJSONIndex=Re.cluster?new ne((function({superclusterOptions:At,clusterProperties:Ot}){if(!Ot||!At)return At;const Tt={},Yt={},Bt={accumulated:null,zoom:0},wt={properties:null},Xt=Object.keys(Ot);for(const Et of Xt){const[Ir,$t]=Ot[Et],Vr=l.cT($t),Rr=l.cT(typeof Ir=="string"?[Ir,["accumulated"],["get",Et]]:Ir);Tt[Et]=Vr.value,Yt[Et]=Rr.value}return At.map=Et=>{wt.properties=Et;const Ir={};for(const $t of Xt)Ir[$t]=Tt[$t].evaluate(Bt,wt);return Ir},At.reduce=(Et,Ir)=>{wt.properties=Ir;for(const $t of Xt)Bt.accumulated=Et[$t],Et[$t]=Yt[$t].evaluate(Bt,wt)},At})(Re)).load((yield this._pendingData).features):(rt=yield this._pendingData,new nr(rt,Re.geojsonVtOptions)),this.loaded={};const mt={};if(De){const At=De.finish();At&&(mt.resourceTiming={},mt.resourceTiming[Re.source]=JSON.parse(JSON.stringify(At)))}return mt}catch(mt){if(delete this._pendingRequest,l.cx(mt))return{abandoned:!0};throw mt}var rt}))}getData(){return l._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(Re){const Be=this.loaded;return Be&&Be[Re.uid]?super.reloadTile(Re):this.loadTile(Re)}loadAndProcessGeoJSON(Re,Be){return l._(this,void 0,void 0,(function*(){let De=yield this.loadGeoJSON(Re,Be);if(delete this._pendingRequest,typeof De!="object")throw new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`);if(k(De,!0),Re.filter){const rt=l.cT(Re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map((At=>`${At.key}: ${At.message}`)).join(", "));De={type:"FeatureCollection",features:De.features.filter((At=>rt.value.evaluate({zoom:0},At)))}}return De}))}loadGeoJSON(Re,Be){return l._(this,void 0,void 0,(function*(){const{promoteId:De}=Re;if(Re.request){const rt=yield l.j(Re.request,Be);return this._dataUpdateable=ar(rt.data,De)?kr(rt.data,De):void 0,rt.data}if(typeof Re.data=="string")try{const rt=JSON.parse(Re.data);return this._dataUpdateable=ar(rt,De)?kr(rt,De):void 0,rt}catch{throw new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`)}if(!Re.dataDiff)throw new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Re.source}`);return(function(rt,mt,At){var Ot,Tt,Yt,Bt;if(mt.removeAll&&rt.clear(),mt.remove)for(const wt of mt.remove)rt.delete(wt);if(mt.add)for(const wt of mt.add){const Xt=Pr(wt,At);Xt!=null&&rt.set(Xt,wt)}if(mt.update)for(const wt of mt.update){let Xt=rt.get(wt.id);if(Xt==null)continue;const Et=!wt.removeAllProperties&&(((Ot=wt.removeProperties)===null||Ot===void 0?void 0:Ot.length)>0||((Tt=wt.addOrUpdateProperties)===null||Tt===void 0?void 0:Tt.length)>0);if((wt.newGeometry||wt.removeAllProperties||Et)&&(Xt=Object.assign({},Xt),rt.set(wt.id,Xt),Et&&(Xt.properties=Object.assign({},Xt.properties))),wt.newGeometry&&(Xt.geometry=wt.newGeometry),wt.removeAllProperties)Xt.properties={};else if(((Yt=wt.removeProperties)===null||Yt===void 0?void 0:Yt.length)>0)for(const Ir of wt.removeProperties)Object.prototype.hasOwnProperty.call(Xt.properties,Ir)&&delete Xt.properties[Ir];if(((Bt=wt.addOrUpdateProperties)===null||Bt===void 0?void 0:Bt.length)>0)for(const{key:Ir,value:$t}of wt.addOrUpdateProperties)Xt.properties[Ir]=$t}})(this._dataUpdateable,Re.dataDiff,De),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(Re){return l._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(Re){return this._geoJSONIndex.getClusterExpansionZoom(Re.clusterId)}getClusterChildren(Re){return this._geoJSONIndex.getChildren(Re.clusterId)}getClusterLeaves(Re){return this._geoJSONIndex.getLeaves(Re.clusterId,Re.limit,Re.offset)}}class Ht{constructor(Re){this.self=Re,this.actor=new l.J(Re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Be,De)=>{if(this.externalWorkerSourceTypes[Be])throw new Error(`Worker source with name "${Be}" already registered.`);this.externalWorkerSourceTypes[Be]=De},this.self.addProtocol=l.cz,this.self.removeProtocol=l.cA,this.self.registerRTLTextPlugin=Be=>{l.cU.setMethods(Be)},this.actor.registerMessageHandler("LDT",((Be,De)=>this._getDEMWorkerSource(Be,De.source).loadTile(De))),this.actor.registerMessageHandler("RDT",((Be,De)=>l._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Be,De.source).removeTile(De)})))),this.actor.registerMessageHandler("GCEZ",((Be,De)=>l._(this,void 0,void 0,(function*(){return this._getWorkerSource(Be,De.type,De.source).getClusterExpansionZoom(De)})))),this.actor.registerMessageHandler("GCC",((Be,De)=>l._(this,void 0,void 0,(function*(){return this._getWorkerSource(Be,De.type,De.source).getClusterChildren(De)})))),this.actor.registerMessageHandler("GCL",((Be,De)=>l._(this,void 0,void 0,(function*(){return this._getWorkerSource(Be,De.type,De.source).getClusterLeaves(De)})))),this.actor.registerMessageHandler("LD",((Be,De)=>this._getWorkerSource(Be,De.type,De.source).loadData(De))),this.actor.registerMessageHandler("GD",((Be,De)=>this._getWorkerSource(Be,De.type,De.source).getData())),this.actor.registerMessageHandler("LT",((Be,De)=>this._getWorkerSource(Be,De.type,De.source).loadTile(De))),this.actor.registerMessageHandler("RT",((Be,De)=>this._getWorkerSource(Be,De.type,De.source).reloadTile(De))),this.actor.registerMessageHandler("AT",((Be,De)=>this._getWorkerSource(Be,De.type,De.source).abortTile(De))),this.actor.registerMessageHandler("RMT",((Be,De)=>this._getWorkerSource(Be,De.type,De.source).removeTile(De))),this.actor.registerMessageHandler("RS",((Be,De)=>l._(this,void 0,void 0,(function*(){if(!this.workerSources[Be]||!this.workerSources[Be][De.type]||!this.workerSources[Be][De.type][De.source])return;const rt=this.workerSources[Be][De.type][De.source];delete this.workerSources[Be][De.type][De.source],rt.removeSource!==void 0&&rt.removeSource(De)})))),this.actor.registerMessageHandler("RM",(Be=>l._(this,void 0,void 0,(function*(){delete this.layerIndexes[Be],delete this.availableImages[Be],delete this.workerSources[Be],delete this.demWorkerSources[Be]})))),this.actor.registerMessageHandler("SR",((Be,De)=>l._(this,void 0,void 0,(function*(){this.referrer=De})))),this.actor.registerMessageHandler("SRPS",((Be,De)=>this._syncRTLPluginState(Be,De))),this.actor.registerMessageHandler("IS",((Be,De)=>l._(this,void 0,void 0,(function*(){this.self.importScripts(De)})))),this.actor.registerMessageHandler("SI",((Be,De)=>this._setImages(Be,De))),this.actor.registerMessageHandler("UL",((Be,De)=>l._(this,void 0,void 0,(function*(){this._getLayerIndex(Be).update(De.layers,De.removedIds)})))),this.actor.registerMessageHandler("SL",((Be,De)=>l._(this,void 0,void 0,(function*(){this._getLayerIndex(Be).replace(De)}))))}_setImages(Re,Be){return l._(this,void 0,void 0,(function*(){this.availableImages[Re]=Be;for(const De in this.workerSources[Re]){const rt=this.workerSources[Re][De];for(const mt in rt)rt[mt].availableImages=Be}}))}_syncRTLPluginState(Re,Be){return l._(this,void 0,void 0,(function*(){return yield l.cU.syncState(Be,this.self.importScripts)}))}_getAvailableImages(Re){let Be=this.availableImages[Re];return Be||(Be=[]),Be}_getLayerIndex(Re){let Be=this.layerIndexes[Re];return Be||(Be=this.layerIndexes[Re]=new a),Be}_getWorkerSource(Re,Be,De){if(this.workerSources[Re]||(this.workerSources[Re]={}),this.workerSources[Re][Be]||(this.workerSources[Re][Be]={}),!this.workerSources[Re][Be][De]){const rt={sendAsync:(mt,At)=>(mt.targetMapId=Re,this.actor.sendAsync(mt,At))};switch(Be){case"vector":this.workerSources[Re][Be][De]=new v(rt,this._getLayerIndex(Re),this._getAvailableImages(Re));break;case"geojson":this.workerSources[Re][Be][De]=new Qt(rt,this._getLayerIndex(Re),this._getAvailableImages(Re));break;default:this.workerSources[Re][Be][De]=new this.externalWorkerSourceTypes[Be](rt,this._getLayerIndex(Re),this._getAvailableImages(Re))}}return this.workerSources[Re][Be][De]}_getDEMWorkerSource(Re,Be){return this.demWorkerSources[Re]||(this.demWorkerSources[Re]={}),this.demWorkerSources[Re][Be]||(this.demWorkerSources[Re][Be]=new x),this.demWorkerSources[Re][Be]}}return l.i(self)&&(self.worker=new Ht(self)),Ht})),i("index",["exports","./shared"],(function(l,a){var c="5.6.0";function h(){var A=new a.A(4);return a.A!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A}let g,v;const x={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(A,s,d){const w=requestAnimationFrame((L=>{C(),s(L)})),{unsubscribe:C}=a.s(A.signal,"abort",(()=>{C(),cancelAnimationFrame(w),d(a.c())}),!1)},frameAsync(A){return new Promise(((s,d)=>{this.frame(A,s,d)}))},getImageData(A,s=0){return this.getImageCanvasContext(A).getImageData(-s,-s,A.width+2*s,A.height+2*s)},getImageCanvasContext(A){const s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=A.width,s.height=A.height,d.drawImage(A,0,0,A.width,A.height),d},resolveURL:A=>(g||(g=document.createElement("a")),g.href=A,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class b{static testProp(s){if(!b.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in b.docStyle)return s[d];return s[0]}static create(s,d,w){const C=window.document.createElement(s);return d!==void 0&&(C.className=d),w&&w.appendChild(C),C}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(s,d){s.style[b.transformProp]=d}static addEventListener(s,d,w,C={}){s.addEventListener(d,w,"passive"in C?C:C.capture)}static removeEventListener(s,d,w,C={}){s.removeEventListener(d,w,"passive"in C?C:C.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",b.suppressClickInternal,!0)}),0)}static getScale(s){const d=s.getBoundingClientRect();return{x:d.width/s.offsetWidth||1,y:d.height/s.offsetHeight||1,boundingClientRect:d}}static getPoint(s,d,w){const C=d.boundingClientRect;return new a.P((w.clientX-C.left)/d.x-s.clientLeft,(w.clientY-C.top)/d.y-s.clientTop)}static mousePos(s,d){const w=b.getScale(s);return b.getPoint(s,w,d)}static touchPos(s,d){const w=[],C=b.getScale(s);for(let L=0;L<d.length;L++)w.push(b.getPoint(s,C,d[L]));return w}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const d=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),w=d.querySelectorAll("script");for(const C of w)C.remove();return b.clean(d),d.innerHTML}static isPossiblyDangerous(s,d){const w=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!w.includes("javascript:")&&!w.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const d=s.children;for(const w of d)b.removeAttributes(w),b.clean(w)}static removeAttributes(s){for(const{name:d,value:w}of s.attributes)b.isPossiblyDangerous(d,w)&&s.removeAttribute(d)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const S={supported:!1,testSupport:function(A){!M&&k&&(O?F(A):I=A)}};let I,k,M=!1,O=!1;function F(A){const s=A.createTexture();A.bindTexture(A.TEXTURE_2D,s);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,k),A.isContextLost())return;S.supported=!0}catch{}A.deleteTexture(s),M=!0}var D;typeof document<"u"&&(k=document.createElement("img"),k.onload=()=>{I&&F(I),I=null,O=!0},k.onerror=()=>{M=!0,I=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(A){let s,d,w,C;A.resetRequestQueue=()=>{s=[],d=0,w=0,C={}},A.addThrottleControl=te=>{const ue=w++;return C[ue]=te,ue},A.removeThrottleControl=te=>{delete C[te],B()},A.getImage=(te,ue,ge=!0)=>new Promise(((Ce,xe)=>{S.supported&&(te.headers||(te.headers={}),te.headers.accept="image/webp,*/*"),a.e(te,{type:"image"}),s.push({abortController:ue,requestParameters:te,supportImageRefresh:ge,state:"queued",onError:Ne=>{xe(Ne)},onSuccess:Ne=>{Ce(Ne)}}),B()}));const L=te=>a._(this,void 0,void 0,(function*(){te.state="running";const{requestParameters:ue,supportImageRefresh:ge,onError:Ce,onSuccess:xe,abortController:Ne}=te,We=ge===!1&&!a.i(self)&&!a.g(ue.url)&&(!ue.headers||Object.keys(ue.headers).reduce(((ct,vt)=>ct&&vt==="accept"),!0));d++;const ut=We?W(ue,Ne):a.m(ue,Ne);try{const ct=yield ut;delete te.abortController,te.state="completed",ct.data instanceof HTMLImageElement||a.b(ct.data)?xe(ct):ct.data&&xe({data:yield(lt=ct.data,typeof createImageBitmap=="function"?a.f(lt):a.h(lt)),cacheControl:ct.cacheControl,expires:ct.expires})}catch(ct){delete te.abortController,Ce(ct)}finally{d--,B()}var lt})),B=()=>{const te=(()=>{for(const ue of Object.keys(C))if(C[ue]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ue=d;ue<te&&s.length>0;ue++){const ge=s.shift();ge.abortController.signal.aborted?ue--:L(ge)}},W=(te,ue)=>new Promise(((ge,Ce)=>{const xe=new Image,Ne=te.url,We=te.credentials;We&&We==="include"?xe.crossOrigin="use-credentials":(We&&We==="same-origin"||!a.d(Ne))&&(xe.crossOrigin="anonymous"),ue.signal.addEventListener("abort",(()=>{xe.src="",Ce(a.c())})),xe.fetchPriority="high",xe.onload=()=>{xe.onerror=xe.onload=null,ge({data:xe})},xe.onerror=()=>{xe.onerror=xe.onload=null,ue.signal.aborted||Ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},xe.src=Ne}))})(D||(D={})),D.resetRequestQueue();class q{constructor(s){this._transformRequestFn=s}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function z(A){const s=[];if(typeof A=="string")s.push({id:"default",url:A});else if(A&&A.length>0){const d=[];for(const{id:w,url:C}of A){const L=`${w}${C}`;d.indexOf(L)===-1&&(d.push(L),s.push({id:w,url:C}))}}return s}function U(A,s,d){try{const w=new URL(A);return w.pathname+=`${s}${d}`,w.toString()}catch{throw new Error(`Invalid sprite URL "${A}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function H(A){const{userImage:s}=A;return!!(s&&s.render&&s.render())&&(A.data.replace(new Uint8Array(s.data.buffer)),!0)}class X extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,promiseResolve:w}of this.requestors)w(this._getImagesForIds(d));this.requestors=[]}}getImage(s){const d=this.images[s];if(d&&!d.data&&d.spriteData){const w=d.spriteData;d.data=new a.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let w=!0;const C=d.data||d.spriteData;return this._validateStretch(d.stretchX,C&&C.width)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchX" value`))),w=!1),this._validateStretch(d.stretchY,C&&C.height)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchY" value`))),w=!1),this._validateContent(d.content,d)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "content" value`))),w=!1),w}_validateStretch(s,d){if(!s)return!0;let w=0;for(const C of s){if(C[0]<w||C[1]<C[0]||d<C[1])return!1;w=C[1]}return!0}_validateContent(s,d){if(!s)return!0;if(s.length!==4)return!1;const w=d.spriteData,C=w&&w.width||d.data.width,L=w&&w.height||d.data.height;return!(s[0]<0||C<s[0]||s[1]<0||L<s[1]||s[2]<0||C<s[2]||s[3]<0||L<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,w=!0){const C=this.getImage(s);if(w&&(C.data.width!==d.data.width||C.data.height!==d.data.height))throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=C.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise(((d,w)=>{let C=!0;if(!this.isLoaded())for(const L of s)this.images[L]||(C=!1);this.isLoaded()||C?d(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:d})}))}_getImagesForIds(s){const d={};for(const w of s){let C=this.getImage(w);C||(this.fire(new a.l("styleimagemissing",{id:w})),C=this.getImage(w)),C?d[w]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,textFitWidth:C.textFitWidth,textFitHeight:C.textFitHeight,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.w(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],w=this.getImage(s);if(!w)return null;if(d&&d.position.version===w.version)return d.position;if(d)d.position.version=w.version;else{const C={w:w.data.width+2,h:w.data.height+2,x:0,y:0},L=new a.I(C,w);this.patterns[s]={bin:C,position:L}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const L in this.patterns)s.push(this.patterns[L].bin);const{w:d,h:w}=a.p(s),C=this.atlasImage;C.resize({width:d||1,height:w||1});for(const L in this.patterns){const{bin:B}=this.patterns[L],W=B.x+1,te=B.y+1,ue=this.getImage(L).data,ge=ue.width,Ce=ue.height;a.R.copy(ue,C,{x:0,y:0},{x:W,y:te},{width:ge,height:Ce}),a.R.copy(ue,C,{x:0,y:Ce-1},{x:W,y:te-1},{width:ge,height:1}),a.R.copy(ue,C,{x:0,y:0},{x:W,y:te+Ce},{width:ge,height:1}),a.R.copy(ue,C,{x:ge-1,y:0},{x:W-1,y:te},{width:1,height:Ce}),a.R.copy(ue,C,{x:0,y:0},{x:W+ge,y:te},{width:1,height:Ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const w=this.getImage(d);w||a.w(`Image with ID: "${d}" was not found`),H(w)&&this.updateImage(d,w)}}}const ie=1e20;function ee(A,s,d,w,C,L,B,W,te){for(let ue=s;ue<s+w;ue++)G(A,d*L+ue,L,C,B,W,te);for(let ue=d;ue<d+C;ue++)G(A,ue*L+s,1,w,B,W,te)}function G(A,s,d,w,C,L,B){L[0]=0,B[0]=-1e20,B[1]=ie,C[0]=A[s];for(let W=1,te=0,ue=0;W<w;W++){C[W]=A[s+W*d];const ge=W*W;do{const Ce=L[te];ue=(C[W]-C[Ce]+ge-Ce*Ce)/(W-Ce)/2}while(ue<=B[te]&&--te>-1);te++,L[te]=W,B[te]=ue,B[te+1]=ie}for(let W=0,te=0;W<w;W++){for(;B[te+1]<W;)te++;const ue=L[te],ge=W-ue;A[s+W*d]=C[ue]+ge*ge}}class ne{constructor(s,d){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,(function*(){const d=[];for(const L in s)for(const B of s[L])d.push(this._getAndCacheGlyphsPromise(L,B));const w=yield Promise.all(d),C={};for(const{stack:L,id:B,glyph:W}of w)C[L]||(C[L]={}),C[L][B]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics};return C}))}_getAndCacheGlyphsPromise(s,d){return a._(this,void 0,void 0,(function*(){let w=this.entries[s];w||(w=this.entries[s]={glyphs:{},requests:{},ranges:{}});let C=w.glyphs[d];if(C!==void 0)return{stack:s,id:d,glyph:C};if(C=this._tinySDF(w,s,d),C)return w.glyphs[d]=C,{stack:s,id:d,glyph:C};const L=Math.floor(d/256);if(256*L>65535)throw new Error("glyphs > 65535 not supported");if(w.ranges[L])return{stack:s,id:d,glyph:C};if(!this.url)throw new Error("glyphsUrl is not set");if(!w.requests[L]){const W=ne.loadGlyphRange(s,L,this.url,this.requestManager);w.requests[L]=W}const B=yield w.requests[L];for(const W in B)this._doesCharSupportLocalGlyph(+W)||(w.glyphs[+W]=B[+W]);return w.ranges[L]=!0,{stack:s,id:d,glyph:B[d]||null}}))}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||a.u["CJK Unified Ideographs"](s)||a.u["Hangul Syllables"](s)||a.u.Hiragana(s)||a.u.Katakana(s)||a.u["CJK Symbols and Punctuation"](s)||a.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,d,w){const C=this.localIdeographFontFamily;if(!C||!this._doesCharSupportLocalGlyph(w))return;let L=s.tinySDF;if(!L){let W="400";/bold/i.test(d)?W="900":/medium/i.test(d)?W="500":/light/i.test(d)&&(W="200"),L=s.tinySDF=new ne.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:C,fontWeight:W})}const B=L.draw(String.fromCharCode(w));return{id:w,bitmap:new a.q({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}ne.loadGlyphRange=function(A,s,d,w){return a._(this,void 0,void 0,(function*(){const C=256*s,L=C+255,B=w.transformRequest(d.replace("{fontstack}",A).replace("{range}",`${C}-${L}`),"Glyphs"),W=yield a.n(B,new AbortController);if(!W||!W.data)throw new Error(`Could not load glyph range. range: ${s}, ${C}-${L}`);const te={};for(const ue of a.o(W.data))te[ue.id]=ue;return te}))},ne.TinySDF=class{constructor({fontSize:A=24,buffer:s=3,radius:d=8,cutoff:w=.25,fontFamily:C="sans-serif",fontWeight:L="normal",fontStyle:B="normal"}={}){this.buffer=s,this.cutoff=w,this.radius=d;const W=this.size=A+4*s,te=this._createCanvas(W),ue=this.ctx=te.getContext("2d",{willReadFrequently:!0});ue.font=`${B} ${L} ${A}px ${C}`,ue.textBaseline="alphabetic",ue.textAlign="left",ue.fillStyle="black",this.gridOuter=new Float64Array(W*W),this.gridInner=new Float64Array(W*W),this.f=new Float64Array(W),this.z=new Float64Array(W+1),this.v=new Uint16Array(W)}_createCanvas(A){const s=document.createElement("canvas");return s.width=s.height=A,s}draw(A){const{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:w,actualBoundingBoxLeft:C,actualBoundingBoxRight:L}=this.ctx.measureText(A),B=Math.ceil(d),W=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(L-C))),te=Math.min(this.size-this.buffer,B+Math.ceil(w)),ue=W+2*this.buffer,ge=te+2*this.buffer,Ce=Math.max(ue*ge,0),xe=new Uint8ClampedArray(Ce),Ne={data:xe,width:ue,height:ge,glyphWidth:W,glyphHeight:te,glyphTop:B,glyphLeft:0,glyphAdvance:s};if(W===0||te===0)return Ne;const{ctx:We,buffer:ut,gridInner:lt,gridOuter:ct}=this;We.clearRect(ut,ut,W,te),We.fillText(A,ut,ut+B);const vt=We.getImageData(ut,ut,W,te);ct.fill(ie,0,Ce),lt.fill(0,0,Ce);for(let Dt=0;Dt<te;Dt++)for(let It=0;It<W;It++){const Ft=vt.data[4*(Dt*W+It)+3]/255;if(Ft===0)continue;const qt=(Dt+ut)*ue+It+ut;if(Ft===1)ct[qt]=0,lt[qt]=ie;else{const Pt=.5-Ft;ct[qt]=Pt>0?Pt*Pt:0,lt[qt]=Pt<0?Pt*Pt:0}}ee(ct,0,0,ue,ge,ue,this.f,this.v,this.z),ee(lt,ut,ut,W,te,ue,this.f,this.v,this.z);for(let Dt=0;Dt<Ce;Dt++){const It=Math.sqrt(ct[Dt])-Math.sqrt(lt[Dt]);xe[Dt]=Math.round(255-255*(It/this.radius+this.cutoff))}return Ne}};class ae{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,d){return a.B(s.expression.evaluate(d))}interpolate(s,d,w){return{x:a.C.number(s.x,d.x,w),y:a.C.number(s.y,d.y,w),z:a.C.number(s.z,d.z,w)}}}let le;class fe extends a.E{constructor(s){super(),le=le||new a.r({anchor:new a.D(a.v.light.anchor),position:new ae,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(le),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(a.x,s,d))for(const w in s){const C=s[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),C):this._transitionable.setValue(w,C)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,w){return(!w||w.validate!==!1)&&a.y(this,s.call(a.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const ke=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class me extends a.E{constructor(s){super(),this._transitionable=new a.t(ke),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(s,d={}){if(!this._validate(a.G,s,d)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const w in s){const C=s[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),C):this._transitionable.setValue(w,C)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,w={}){return w?.validate!==!1&&a.y(this,s.call(a.z,a.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Se{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){const w=s.join(",")+String(d);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(s,d)),this.dashEntry[w]}getDashRanges(s,d,w){const C=[];let L=s.length%2==1?-s[s.length-1]*w:0,B=s[0]*w,W=!0;C.push({left:L,right:B,isDash:W,zeroLength:s[0]===0});let te=s[0];for(let ue=1;ue<s.length;ue++){W=!W;const ge=s[ue];L=te*w,te+=ge,B=te*w,C.push({left:L,right:B,isDash:W,zeroLength:ge===0})}return C}addRoundDash(s,d,w){const C=d/2;for(let L=-w;L<=w;L++){const B=this.width*(this.nextRow+w+L);let W=0,te=s[W];for(let ue=0;ue<this.width;ue++){ue/te.right>1&&(te=s[++W]);const ge=Math.abs(ue-te.left),Ce=Math.abs(ue-te.right),xe=Math.min(ge,Ce);let Ne;const We=L/w*(C+1);if(te.isDash){const ut=C-Math.abs(We);Ne=Math.sqrt(xe*xe+ut*ut)}else Ne=C-Math.sqrt(xe*xe+We*We);this.data[B+ue]=Math.max(0,Math.min(255,Ne+128))}}}addRegularDash(s){for(let W=s.length-1;W>=0;--W){const te=s[W],ue=s[W+1];te.zeroLength?s.splice(W,1):ue&&ue.isDash===te.isDash&&(ue.left=te.left,s.splice(W,1))}const d=s[0],w=s[s.length-1];d.isDash===w.isDash&&(d.left=w.left-this.width,w.right=d.right+this.width);const C=this.width*this.nextRow;let L=0,B=s[L];for(let W=0;W<this.width;W++){W/B.right>1&&(B=s[++L]);const te=Math.abs(W-B.left),ue=Math.abs(W-B.right),ge=Math.min(te,ue);this.data[C+W]=Math.max(0,Math.min(255,(B.isDash?ge:-ge)+128))}}addDash(s,d){const w=d?7:0,C=2*w+1;if(this.nextRow+C>this.height)return a.w("LineAtlas out of space"),null;let L=0;for(let W=0;W<s.length;W++)L+=s[W];if(L!==0){const W=this.width/L,te=this.getDashRanges(s,this.width,W);d?this.addRoundDash(te,W,w):this.addRegularDash(te)}const B={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:L};return this.nextRow+=C,this.dirty=!0,B}bind(s){const d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const we="maplibre_preloaded_worker_pool";class Pe{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Pe.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach((d=>{d.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[we]}numActive(){return Object.keys(this.active).length}}const ce=Math.floor(x.hardwareConcurrency/2);let _e,be;function Me(){return _e||(_e=new Pe),_e}Pe.workerCount=a.H(globalThis)?Math.max(Math.min(ce,3),1):1;class Le{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=d;const w=this.workerPool.acquire(d);for(let C=0;C<w.length;C++){const L=new a.J(w[C],d);L.name=`Worker ${C}`,this.actors.push(L)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d){const w=[];for(const C of this.actors)w.push(C.sendAsync({type:s,data:d}));return Promise.all(w)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach((d=>{d.remove()})),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,d){for(const w of this.actors)w.registerMessageHandler(s,d)}}function Ue(){return be||(be=new Le(Me(),a.K),be.registerMessageHandler("GR",((A,s,d)=>a.m(s,d)))),be}function Oe(A,s){const d=a.L();return a.M(d,d,[1,1,0]),a.N(d,d,[.5*A.width,.5*A.height,1]),A.calculatePosMatrix?a.O(d,d,A.calculatePosMatrix(s.toUnwrapped())):d}function tt(A,s,d,w,C,L,B){var W;const te=(function(xe,Ne,We){if(xe)for(const ut of xe){const lt=Ne[ut];if(lt&&lt.source===We&&lt.type==="fill-extrusion")return!0}else for(const ut in Ne){const lt=Ne[ut];if(lt.source===We&&lt.type==="fill-extrusion")return!0}return!1})((W=C?.layers)!==null&&W!==void 0?W:null,s,A.id),ue=L.maxPitchScaleFactor(),ge=A.tilesIn(w,ue,te);ge.sort(Ze);const Ce=[];for(const xe of ge)Ce.push({wrappedTileID:xe.tileID.wrapped().key,queryResults:xe.tile.queryRenderedFeatures(s,d,A._state,xe.queryGeometry,xe.cameraQueryGeometry,xe.scale,C,L,ue,Oe(A.transform,xe.tileID),B?(Ne,We)=>B(xe.tileID,Ne,We):void 0)});return(function(xe,Ne){for(const We in xe)for(const ut of xe[We])Qe(ut,Ne);return xe})((function(xe){const Ne={},We={};for(const ut of xe){const lt=ut.queryResults,ct=ut.wrappedTileID,vt=We[ct]=We[ct]||{};for(const Dt in lt){const It=lt[Dt],Ft=vt[Dt]=vt[Dt]||{},qt=Ne[Dt]=Ne[Dt]||[];for(const Pt of It)Ft[Pt.featureIndex]||(Ft[Pt.featureIndex]=!0,qt.push(Pt))}}return Ne})(Ce),A)}function Ze(A,s){const d=A.tileID,w=s.tileID;return d.overscaledZ-w.overscaledZ||d.canonical.y-w.canonical.y||d.wrap-w.wrap||d.canonical.x-w.canonical.x}function Qe(A,s){const d=A.feature,w=s.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=w}function Ie(A,s,d){return a._(this,void 0,void 0,(function*(){let w=A;if(A.url?w=(yield a.j(s.transformRequest(A.url,"Source"),d)).data:yield x.frameAsync(d),!w)return null;const C=a.Q(a.e(w,A),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in w&&w.vector_layers&&(C.vectorLayerIds=w.vector_layers.map((L=>L.id))),C}))}class Mt{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}extend(s){const d=this._sw,w=this._ne;let C,L;if(s instanceof a.S)C=s,L=s;else{if(!(s instanceof Mt))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Mt.convert(s)):this.extend(a.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.S.convert(s)):this;if(C=s._sw,L=s._ne,!C||!L)return this}return d||w?(d.lng=Math.min(C.lng,d.lng),d.lat=Math.min(C.lat,d.lat),w.lng=Math.max(L.lng,w.lng),w.lat=Math.max(L.lat,w.lat)):(this._sw=new a.S(C.lng,C.lat),this._ne=new a.S(L.lng,L.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:d,lat:w}=a.S.convert(s);let C=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&C}static convert(s){return s instanceof Mt?s:s&&new Mt(s)}static fromLngLat(s,d=0){const w=360*d/40075017,C=w/Math.cos(Math.PI/180*s.lat);return new Mt(new a.S(s.lng-C,s.lat-w),new a.S(s.lng+C,s.lat+w))}adjustAntiMeridian(){const s=new a.S(this._sw.lng,this._sw.lat),d=new a.S(this._ne.lng,this._ne.lat);return new Mt(s,s.lng>d.lng?new a.S(d.lng+360,d.lat):d)}}class ot{constructor(s,d,w){this.bounds=Mt.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=w||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),w=Math.floor(a.V(this.bounds.getWest())*d),C=Math.floor(a.U(this.bounds.getNorth())*d),L=Math.ceil(a.V(this.bounds.getEast())*d),B=Math.ceil(a.U(this.bounds.getSouth())*d);return s.x>=w&&s.x<L&&s.y>=C&&s.y<B}}class $e extends a.E{constructor(s,d,w,C){if(super(),this.id=s,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(d,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new ot(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new a.k(s))}}))}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,(function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(d,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};w.request.collectResourceTiming=this._collectResourceTiming;let C="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise(((L,B)=>{s.reloadPromise={resolve:L,reject:B}}))}else s.actor=this.dispatcher.getActor(),C="LT";s.abortController=new AbortController;try{const L=yield s.actor.sendAsync({type:C,data:w},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,L)}catch(L){if(delete s.abortController,s.aborted)return;if(L&&L.status!==404)throw L;this._afterTileLoadWorkerResponse(s,null)}}))}_afterTileLoadWorkerResponse(s,d){if(d&&d.resourceTiming&&(s.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&s.setExpiryData(d),s.loadVectorData(d,this.map.painter),s.reloadPromise){const w=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(w.resolve).catch(w.reject)}}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class tr extends a.E{constructor(s,d,w,C){super(),this.id=s,this.dispatcher=w,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},d),a.e(this,a.Q(d,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(s=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(a.e(this,d),d.bounds&&(this.tileBounds=new ot(d.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(d){this._tileJSONRequest=null,this.fire(new a.k(d))}}))}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,(function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const w=yield D.getImage(this.map._requestManager.transformRequest(d,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(w&&w.data){this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&s.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const C=this.map.painter.context,L=C.gl,B=w.data;s.texture=this.map.painter.getTileTexture(B.width),s.texture?s.texture.update(B,{useMipmap:!0}):(s.texture=new a.T(C,B,L.RGBA,{useMipmap:!0}),s.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(w){if(delete s.abortController,s.aborted)s.state="unloaded";else if(w)throw s.state="errored",w}}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)}))}hasTransition(){return!1}}class Wt extends tr{constructor(s,d,w,C){super(s,d,w,C),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s){return a._(this,void 0,void 0,(function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w=this.map._requestManager.transformRequest(d,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const C=yield D.getImage(w,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(C&&C.data){const L=C.data;this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&s.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const B=a.b(L)&&a.W()?L:yield this.readImageNow(L),W={type:this.type,uid:s.uid,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const te=yield s.actor.sendAsync({type:"LDT",data:W});s.dem=te,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(C){if(delete s.abortController,s.aborted)s.state="unloaded";else if(C)throw s.state="errored",C}}))}readImageNow(s){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const d=s.width+2,w=s.height+2;try{return new a.R({width:d,height:w},yield a.Y(s,-1,-1,d,w))}catch{}}return x.getImageData(s,1)}))}_getNeighboringTiles(s){const d=s.canonical,w=Math.pow(2,d.z),C=(d.x-1+w)%w,L=d.x===0?s.wrap-1:s.wrap,B=(d.x+1+w)%w,W=d.x+1===w?s.wrap+1:s.wrap,te={};return te[new a.Z(s.overscaledZ,L,d.z,C,d.y).key]={backfilled:!1},te[new a.Z(s.overscaledZ,W,d.z,B,d.y).key]={backfilled:!1},d.y>0&&(te[new a.Z(s.overscaledZ,L,d.z,C,d.y-1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,W,d.z,B,d.y-1).key]={backfilled:!1}),d.y+1<w&&(te[new a.Z(s.overscaledZ,L,d.z,C,d.y+1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,W,d.z,B,d.y+1).key]={backfilled:!1}),te}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))}))}}class Gt extends a.E{constructor(s,d,w,C){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(C),this._data=d.data,this._options=a.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(a.$/this.tileSize)}_getClusterMaxZoom(s){const d=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${d}"`),d}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return a._(this,void 0,void 0,(function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})}))}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map((d=>d.coordinates)).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const s=new Mt,d=yield this.getData();let w;switch(d.type){case"FeatureCollection":w=d.features.map((C=>this.getCoordinatesFromGeometry(C.geometry))).flat(1/0);break;case"Feature":w=this.getCoordinatesFromGeometry(d.geometry);break;default:w=this.getCoordinatesFromGeometry(d)}if(w.length==0)return s;for(let C=0;C<w.length-1;C+=2)s.extend([w[C],w[C+1]]);return s}))}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,d,w){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:d,offset:w}})}_updateWorkerData(s){return a._(this,void 0,void 0,(function*(){const d=a.e({type:this.type},this.workerOptions);s?d.dataDiff=s:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(x.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||w.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let C=null;w.resourceTiming&&w.resourceTiming[this.id]&&(C=w.resourceTiming[this.id].slice(0));const L={dataType:"source"};this._collectResourceTiming&&C&&C.length>0&&a.e(L,{resourceTiming:C}),this.fire(new a.l("data",Object.assign(Object.assign({},L),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},L),{sourceDataType:"content"})))}catch(w){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(w))}}))}loaded(){return this._pendingLoads===0}loadTile(s){return a._(this,void 0,void 0,(function*(){const d=s.actor?"RT":"LT";s.actor=this.actor;const w={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;const C=yield this.actor.sendAsync({type:d,data:w},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(C,this.map.painter,d==="RT")}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class at extends a.E{constructor(s,d,w,C){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=w,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=d}load(s){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield D.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,s&&(this.coordinates=s),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new a.k(d))}}))}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const d=s.map(a.a0.fromLngLat);var w;return this.tileID=(function(C){const L=a.a1.fromPoints(C),B=L.width(),W=L.height(),te=Math.max(B,W),ue=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),ge=Math.pow(2,ue);return new a.a3(ue,Math.floor((L.minX+L.maxX)/2*ge),Math.floor((L.minY+L.maxY)/2*ge))})(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map((C=>this.tileID.getTilePoint(C)._round())),this.flippedWindingOrder=((w=this.tileCoords)[1].x-w[0].x)*(w[2].y-w[0].y)-(w[1].y-w[0].y)*(w[2].x-w[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this.texture||(this.texture=new a.T(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let w=!1;for(const C in this.tiles){const L=this.tiles[C];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,w=!0)}w&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:d,minY:w,maxX:C,maxY:L}=a.a1.fromPoints(s),B={};for(let W=0;W<=a.a2;W++){const te=Math.pow(2,W),ue=Math.floor(d*te),ge=Math.floor(w*te),Ce=Math.floor(C*te),xe=Math.floor(L*te);B[W]={minTileX:ue,minTileY:ge,maxTileX:Ce,maxTileY:xe}}return B}}class dr extends at{constructor(s,d,w,C){super(s,d,w,C),this.roundZoom=!0,this.type="video",this.options=d}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield a.a4(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new a.k(d))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new a.k(new a.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,d=s.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let w=!1;for(const C in this.tiles){const L=this.tiles[C];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,w=!0)}w&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class hr extends at{constructor(s,d,w,C){super(s,d,w,C),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some((L=>!Array.isArray(L)||L.length!==2||L.some((B=>typeof B!="number"))))||this.fire(new a.k(new a.a5(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a5(`sources.${s}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.k(new a.a5(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a5(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a5(`sources.${s}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,w=d.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(d,this.canvas,w.RGBA,{premultiply:!0});let C=!1;for(const L in this.tiles){const B=this.tiles[L];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ur={},Cr=A=>{switch(A){case"geojson":return Gt;case"image":return at;case"raster":return tr;case"raster-dem":return Wt;case"vector":return $e;case"video":return dr;case"canvas":return hr}return ur[A]},br="RTLPluginLoaded";class nr extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ue()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch((d=>{throw this.status="error",d}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,(function*(d,w=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!w)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(br))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let lr=null;function Pr(){return lr||(lr=new nr),lr}class ar{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=a.a6(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=(function(C,L){const B={};if(!L)return B;for(const W of C){const te=W.layerIds.map((ue=>L.getLayer(ue))).filter(Boolean);if(te.length!==0){W.layers=te,W.stateDependentLayerIds&&(W.stateDependentLayers=W.stateDependentLayerIds.map((ue=>te.filter((ge=>ge.id===ue))[0])));for(const ue of te)B[ue.id]=W}}return B})(s.buckets,d?.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const L=this.buckets[C];if(L instanceof a.a8){if(this.hasSymbolBuckets=!0,!w)break;L.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const L=this.buckets[C];if(L instanceof a.a8&&L.hasRTLText){this.hasRTLText=!0,Pr().lazyLoad();break}}this.queryPadding=0;for(const C in this.buckets){const L=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(C).queryRadius(L))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new a.a7}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const w in this.buckets){const C=this.buckets[w];C.uploadPending()&&C.upload(s)}const d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,w,C,L,B,W,te,ue,ge,Ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:L,scale:B,tileSize:this.tileSize,pixelPosMatrix:ge,transform:te,params:W,queryPadding:this.queryPadding*ue,getElevation:Ce},s,d,w):{}}querySourceFeatures(s,d){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const C=w.loadVTLayers(),L=d&&d.sourceLayer?d.sourceLayer:"",B=C._geojsonTileLayer||C[L];if(!B)return;const W=a.a9(d&&d.filter),{z:te,x:ue,y:ge}=this.tileID.canonical,Ce={z:te,x:ue,y:ge};for(let xe=0;xe<B.length;xe++){const Ne=B.feature(xe);if(W.needGeometry){const lt=a.aa(Ne,!0);if(!W.filter(new a.F(this.tileID.overscaledZ),lt,this.tileID.canonical))continue}else if(!W.filter(new a.F(this.tileID.overscaledZ),Ne))continue;const We=w.getId(Ne,L),ut=new a.ab(Ne,te,ue,ge,We);ut.tile=Ce,s.push(ut)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const d=this.expirationTime;if(s.cacheControl){const w=a.ac(s.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const w=Date.now();let C=!1;if(this.expirationTime>w)C=!1;else if(d)if(this.expirationTime<d)C=!0;else{const L=this.expirationTime-d;L?this.expirationTime=w+Math.max(L,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!d.style.hasLayer(C))continue;const L=this.buckets[C],B=L.layers[0].sourceLayer||"_geojsonTileLayer",W=w[B],te=s[B];if(!W||!te||Object.keys(te).length===0)continue;L.update(te,W,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ue=d&&d.style&&d.style.getLayer(C);ue&&(this.queryPadding=Math.max(this.queryPadding,ue.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<x.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=x.now()+s}setDependencies(s,d){const w={};for(const C of d)w[C]=!0;this.dependencies[s]=w}hasDependency(s,d){for(const w of s){const C=this.dependencies[w];if(C){for(const L of d)if(C[L])return!0}}return!1}}class kr{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(const s in this.data)for(const d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,w){const C=s.wrapped().key;this.data[C]===void 0&&(this.data[C]=[]);const L={value:d,timeout:void 0};if(w!==void 0&&(L.timeout=setTimeout((()=>{this.remove(s,L)}),w)),this.data[C].push(L),this.order.push(C),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){const d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;const w=s.wrapped().key,C=d===void 0?0:this.data[w].indexOf(d),L=this.data[w][C];return this.data[w].splice(C,1),L.timeout&&clearTimeout(L.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(L.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){const d=[];for(const w in this.data)for(const C of this.data[w])s(C.value)||d.push(C);for(const w of d)this.remove(w.value.tileID,w)}}class Qt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,w){const C=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][C]=this.stateChanges[s][C]||{},a.e(this.stateChanges[s][C],w),this.deletedStates[s]===null){this.deletedStates[s]={};for(const L in this.state[s])L!==C&&(this.deletedStates[s][L]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][C]===null){this.deletedStates[s][C]={};for(const L in this.state[s][C])w[L]||(this.deletedStates[s][C][L]=null)}else for(const L in w)this.deletedStates[s]&&this.deletedStates[s][C]&&this.deletedStates[s][C][L]===null&&delete this.deletedStates[s][C][L]}removeFeatureState(s,d,w){if(this.deletedStates[s]===null)return;const C=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},w&&d!==void 0)this.deletedStates[s][C]!==null&&(this.deletedStates[s][C]=this.deletedStates[s][C]||{},this.deletedStates[s][C][w]=null);else if(d!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][C])for(w in this.deletedStates[s][C]={},this.stateChanges[s][C])this.deletedStates[s][C][w]=null;else this.deletedStates[s][C]=null;else this.deletedStates[s]=null}getState(s,d){const w=String(d),C=a.e({},(this.state[s]||{})[w],(this.stateChanges[s]||{})[w]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const L=this.deletedStates[s][d];if(L===null)return{};for(const B in L)delete C[B]}return C}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){const w={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const L={};for(const B in this.stateChanges[C])this.state[C][B]||(this.state[C][B]={}),a.e(this.state[C][B],this.stateChanges[C][B]),L[B]=this.state[C][B];w[C]=L}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const L={};if(this.deletedStates[C]===null)for(const B in this.state[C])L[B]={},this.state[C][B]={};else for(const B in this.deletedStates[C]){if(this.deletedStates[C][B]===null)this.state[C][B]={};else for(const W of Object.keys(this.deletedStates[C][B]))delete this.state[C][B][W];L[B]=this.state[C][B]}w[C]=w[C]||{},a.e(w[C],L)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const C in s)s[C].setFeatureState(w,d)}}const Ht=89.25;function Ct(A,s){const d=a.ag(s.lat,-85.051129,a.ah);return new a.P(a.V(s.lng)*A,a.U(d)*A)}function Re(A,s){return new a.a0(s.x/A,s.y/A).toLngLat()}function Be(A){return A.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-A.pitch)),Math.tan(a.ad(Ht-A.pitch)))}function De(A,s){const d=A.canonical,w=s/a.ae(d.z),C=d.x+Math.pow(2,d.z)*A.wrap,L=a.af(new Float64Array(16));return a.M(L,L,[C*w,d.y*w,0]),a.N(L,L,[w/a.$,w/a.$,1]),L}function rt(A,s,d,w,C){const L=a.a0.fromLngLat(A,s),B=C*a.ai(1,A.lat),W=B*Math.cos(a.ad(d)),te=Math.sqrt(B*B-W*W),ue=te*Math.sin(a.ad(-w)),ge=te*Math.cos(a.ad(-w));return new a.a0(L.x+ue,L.y+ge,L.z+W)}function mt(A,s,d){const w=s.intersectsFrustum(A);if(!d||w===0)return w;const C=s.intersectsPlane(d);return C===0?0:w===2&&C===2?2:1}function At(A,s,d){let w=0;const C=(d-s)/10;for(let L=0;L<10;L++)w+=C*Math.pow(Math.cos(s+(L+.5)/10*(d-s)),A);return w}function Ot(A,s){return function(d,w,C,L,B){const W=2*((A-1)/a.aj(Math.cos(a.ad(Ht-B))/Math.cos(a.ad(Ht)))-1),te=Math.acos(C/L),ue=2*At(W-1,0,a.ad(B/2)),ge=Math.min(a.ad(Ht),te+a.ad(B/2)),Ce=At(W-1,Math.min(ge,te-a.ad(B/2)),ge),xe=Math.atan(w/C),Ne=Math.hypot(w,C);let We=d;return We+=a.aj(L/Ne/Math.max(.5,Math.cos(a.ad(B/2)))),We+=W*a.aj(Math.cos(xe))/2,We-=a.aj(Math.max(1,Ce/ue/s))/2,We}}const Tt=Ot(9.314,3);function Yt(A,s){const d=(s.roundZoom?Math.round:Math.floor)(A.zoom+a.aj(A.tileSize/s.tileSize));return Math.max(0,d)}function Bt(A,s){const d=A.getCameraFrustum(),w=A.getClippingPlane(),C=A.screenPointToMercatorCoordinate(A.getCameraPoint()),L=a.a0.fromLngLat(A.center,A.elevation);C.z=L.z+Math.cos(A.pitchInRadians)*A.cameraToCenterDistance/A.worldSize;const B=A.getCoveringTilesDetailsProvider(),W=B.allowVariableZoom(A,s),te=Yt(A,s),ue=s.minzoom||0,ge=s.maxzoom!==void 0?s.maxzoom:A.maxZoom,Ce=Math.min(Math.max(0,te),ge),xe=Math.pow(2,Ce),Ne=[xe*C.x,xe*C.y,0],We=[xe*L.x,xe*L.y,0],ut=Math.hypot(L.x-C.x,L.y-C.y),lt=Math.abs(L.z-C.z),ct=Math.hypot(ut,lt),vt=Ft=>({zoom:0,x:0,y:0,wrap:Ft,fullyVisible:!1}),Dt=[],It=[];if(A.renderWorldCopies&&B.allowWorldCopies())for(let Ft=1;Ft<=3;Ft++)Dt.push(vt(-Ft)),Dt.push(vt(Ft));for(Dt.push(vt(0));Dt.length>0;){const Ft=Dt.pop(),qt=Ft.x,Pt=Ft.y;let Zt=Ft.fullyVisible;const _r={x:qt,y:Pt,z:Ft.zoom},pr=B.getTileBoundingVolume(_r,Ft.wrap,A.elevation,s);if(!Zt){const on=mt(d,pr,w);if(on===0)continue;Zt=on===2}const mr=B.distanceToTile2d(C.x,C.y,_r,pr);let wr=te;W&&(wr=(s.calculateTileZoom||Tt)(A.zoom+a.aj(A.tileSize/s.tileSize),mr,lt,ct,A.fov)),wr=(s.roundZoom?Math.round:Math.floor)(wr),wr=Math.max(0,wr);const sn=Math.min(wr,ge);if(Ft.wrap=B.getWrap(L,_r,Ft.wrap),Ft.zoom>=sn){if(Ft.zoom<ue)continue;const on=Ce-Ft.zoom,$r=Ne[0]-.5-(qt<<on),En=Ne[1]-.5-(Pt<<on),_i=s.reparseOverscaled?Math.max(Ft.zoom,wr):Ft.zoom;It.push({tileID:new a.Z(Ft.zoom===ge?_i:Ft.zoom,Ft.wrap,Ft.zoom,qt,Pt),distanceSq:a.ak([We[0]-.5-qt,We[1]-.5-Pt]),tileDistanceToCamera:Math.sqrt($r*$r+En*En)})}else for(let on=0;on<4;on++)Dt.push({zoom:Ft.zoom+1,x:(qt<<1)+on%2,y:(Pt<<1)+(on>>1),wrap:Ft.wrap,fullyVisible:Zt})}return It.sort(((Ft,qt)=>Ft.distanceSq-qt.distanceSq)).map((Ft=>Ft.tileID))}const wt=a.a1.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Xt extends a.E{constructor(s,d,w){super(),this.id=s,this.dispatcher=w,this.on("data",(C=>this._dataHandler(C))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((C,L,B,W)=>{const te=new(Cr(L.type))(C,L,B,W);if(te.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${te.id}`);return te})(s,d,w,this),this._tiles={},this._cache=new kr(0,(C=>this._unloadTile(C))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qt,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d,w){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,d,w)}catch(C){s.state="errored",C.status!==404?this._source.fire(new a.k(C,{tile:s})):this.update(this.transform,this.terrain)}}))}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const w=this._tiles[d];w.upload(s),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((s=>s.tileID)).sort(Et).map((s=>s.key))}getRenderableIds(s){const d=[];for(const w in this._tiles)this._isIdRenderable(w,s)&&d.push(this._tiles[w]);return s?d.sort(((w,C)=>{const L=w.tileID,B=C.tileID,W=new a.P(L.canonical.x,L.canonical.y)._rotate(-this.transform.bearingInRadians),te=new a.P(B.canonical.x,B.canonical.y)._rotate(-this.transform.bearingInRadians);return L.overscaledZ-B.overscaledZ||te.y-W.y||te.x-W.x})).map((w=>w.tileID.key)):d.map((w=>w.tileID)).sort(Et).map((w=>w.key))}hasRenderableParent(s){const d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)s?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(s,d){return a._(this,void 0,void 0,(function*(){const w=this._tiles[s];w&&(w.state!=="loading"&&(w.state=d),yield this._loadTile(w,s,d))}))}_tileLoaded(s,d,w){s.timeAdded=x.now(),w==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const d=this.getRenderableIds();for(let C=0;C<d.length;C++){const L=d[C];if(s.neighboringTiles&&s.neighboringTiles[L]){const B=this.getTileByID(L);w(s,B),w(B,s)}}function w(C,L){C.needsHillshadePrepare=!0,C.needsTerrainPrepare=!0;let B=L.tileID.canonical.x-C.tileID.canonical.x;const W=L.tileID.canonical.y-C.tileID.canonical.y,te=Math.pow(2,C.tileID.canonical.z),ue=L.tileID.key;B===0&&W===0||Math.abs(W)>1||(Math.abs(B)>1&&(Math.abs(B+te)===1?B+=te:Math.abs(B-te)===1&&(B-=te)),L.dem&&C.dem&&(C.dem.backfillBorder(L.dem,B,W),C.neighboringTiles&&C.neighboringTiles[ue]&&(C.neighboringTiles[ue].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,w,C){for(const L in this._tiles){let B=this._tiles[L];if(C[L]||!B.hasData()||B.tileID.overscaledZ<=d||B.tileID.overscaledZ>w)continue;let W=B.tileID;for(;B&&B.tileID.overscaledZ>d+1;){const ue=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[ue.key],B&&B.hasData()&&(W=ue)}let te=W;for(;te.overscaledZ>d;)if(te=te.scaledTo(te.overscaledZ-1),s[te.key]||s[te.canonical.key]){C[W.key]=W;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){const w=this._loadedParentTiles[s.key];return w&&w.tileID.overscaledZ>=d?w:null}for(let w=s.overscaledZ-1;w>=d;w--){const C=s.scaledTo(w),L=this._getLoadedTile(C);if(L)return L}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const d=Math.ceil(s.width/this._source.tileSize)+1,w=Math.ceil(s.height/this._source.tileSize)+1,C=Math.floor(d*w*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(L)}handleWrapJump(s){const d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){const w={};for(const C in this._tiles){const L=this._tiles[C];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+d),w[L.tileID.key]=L}this._tiles=w;for(const C in this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(const C in this._tiles)this._setTileReloadTimer(C,this._tiles[C])}}_updateCoveredAndRetainedTiles(s,d,w,C,L,B){const W={},te={},ue=Object.keys(s),ge=x.now();for(const Ce of ue){const xe=s[Ce],Ne=this._tiles[Ce];if(!Ne||Ne.fadeEndTime!==0&&Ne.fadeEndTime<=ge)continue;const We=this.findLoadedParent(xe,d),ut=this.findLoadedSibling(xe),lt=We||ut||null;lt&&(this._addTile(lt.tileID),W[lt.tileID.key]=lt.tileID),te[Ce]=xe}this._retainLoadedChildren(te,C,w,s);for(const Ce in W)s[Ce]||(this._coveredTiles[Ce]=!0,s[Ce]=W[Ce]);if(B){const Ce={},xe={};for(const Ne of L)this._tiles[Ne.key].hasData()?Ce[Ne.key]=Ne:xe[Ne.key]=Ne;for(const Ne in xe){const We=xe[Ne].children(this._source.maxzoom);this._tiles[We[0].key]&&this._tiles[We[1].key]&&this._tiles[We[2].key]&&this._tiles[We[3].key]&&(Ce[We[0].key]=s[We[0].key]=We[0],Ce[We[1].key]=s[We[1].key]=We[1],Ce[We[2].key]=s[We[2].key]=We[2],Ce[We[3].key]=s[We[3].key]=We[3],delete xe[Ne])}for(const Ne in xe){const We=xe[Ne],ut=this.findLoadedParent(We,this._source.minzoom),lt=this.findLoadedSibling(We),ct=ut||lt||null;if(ct){Ce[ct.tileID.key]=s[ct.tileID.key]=ct.tileID;for(const vt in Ce)Ce[vt].isChildOf(ct.tileID)&&delete Ce[vt]}}for(const Ne in this._tiles)Ce[Ne]||(this._coveredTiles[Ne]=!0)}}update(s,d){if(!this._sourceLoaded||this._paused)return;let w;this.transform=s,this.terrain=d,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=s.getVisibleUnwrappedCoordinates(this._source.tileID).map((ge=>new a.Z(ge.canonical.z,ge.wrap,ge.canonical.z,ge.canonical.x,ge.canonical.y))):(w=Bt(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(w=w.filter((ge=>this._source.hasTile(ge))))):w=[];const C=Yt(s,this._source),L=Math.max(C-Xt.maxOverzooming,this._source.minzoom),B=Math.max(C+Xt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ge={};for(const Ce of w)if(Ce.canonical.z>this._source.minzoom){const xe=Ce.scaledTo(Ce.canonical.z-1);ge[xe.key]=xe;const Ne=Ce.scaledTo(Math.max(this._source.minzoom,Math.min(Ce.canonical.z,5)));ge[Ne.key]=Ne}w=w.concat(Object.values(ge))}const W=w.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,W&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const te=this._updateRetainedTiles(w,C);Ir(this._source.type)&&this._updateCoveredAndRetainedTiles(te,L,B,C,w,d);for(const ge in te)this._tiles[ge].clearFadeHold();const ue=a.al(this._tiles,te);for(const ge of ue){const Ce=this._tiles[ge];Ce.hasSymbolBuckets&&!Ce.holdingForFade()?Ce.setHoldDuration(this.map._fadeDuration):Ce.hasSymbolBuckets&&!Ce.symbolFadeFinished()||this._removeTile(ge)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){var w;const C={},L={},B=Math.max(d-Xt.maxOverzooming,this._source.minzoom),W=Math.max(d+Xt.maxUnderzooming,this._source.minzoom),te={};for(const ue of s){const ge=this._addTile(ue);C[ue.key]=ue,ge.hasData()||d<this._source.maxzoom&&(te[ue.key]=ue)}this._retainLoadedChildren(te,d,W,C);for(const ue of s){let ge=this._tiles[ue.key];if(ge.hasData())continue;if(d+1>this._source.maxzoom){const xe=ue.children(this._source.maxzoom)[0],Ne=this.getTile(xe);if(Ne&&Ne.hasData()){C[xe.key]=xe;continue}}else{const xe=ue.children(this._source.maxzoom);if(C[xe[0].key]&&C[xe[1].key]&&C[xe[2].key]&&C[xe[3].key])continue}let Ce=ge.wasRequested();for(let xe=ue.overscaledZ-1;xe>=B;--xe){const Ne=ue.scaledTo(xe);if(L[Ne.key])break;if(L[Ne.key]=!0,ge=this.getTile(Ne),!ge&&Ce&&(ge=this._addTile(Ne)),ge){const We=ge.hasData();if((We||!(!((w=this.map)===null||w===void 0)&&w.cancelPendingTileRequestsWhileZooming)||Ce)&&(C[Ne.key]=Ne),Ce=ge.wasRequested(),We)break}}}return C}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const d=[];let w,C=this._tiles[s].tileID;for(;C.overscaledZ>0;){if(C.key in this._loadedParentTiles){w=this._loadedParentTiles[C.key];break}d.push(C.key);const L=C.scaledTo(C.overscaledZ-1);if(w=this._getLoadedTile(L),w)break;C=L}for(const L of d)this._loadedParentTiles[L]=w}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const d=this._tiles[s].tileID,w=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=w}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));const w=d;return d||(d=new ar(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,s.key,d.state)),d.uses++,this._tiles[s.key]=d,w||this._source.fire(new a.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const w=d.getExpiryTimeout();w&&(this._timers[s]=setTimeout((()=>{this._reloadTile(s,"expired"),delete this._timers[s]}),w))}refreshTiles(s){for(const d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&s.some((w=>w.equals(this._tiles[d].tileID.canonical)))&&this._reloadTile(d,"expired")}_removeTile(s){const d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(s){const d=s.sourceDataType;s.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&d==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,w){const C=[],L=this.transform;if(!L)return C;const B=L.getCoveringTilesDetailsProvider().allowWorldCopies(),W=w?L.getCameraQueryGeometry(s):s,te=Ne=>L.screenPointToMercatorCoordinate(Ne,this.terrain),ue=this.transformBbox(s,te,!B),ge=this.transformBbox(W,te,!B),Ce=this.getIds(),xe=a.a1.fromPoints(ge);for(let Ne=0;Ne<Ce.length;Ne++){const We=this._tiles[Ce[Ne]];if(We.holdingForFade())continue;const ut=B?[We.tileID]:[We.tileID.unwrapTo(-1),We.tileID.unwrapTo(0)],lt=Math.pow(2,L.zoom-We.tileID.overscaledZ),ct=d*We.queryPadding*a.$/We.tileSize/lt;for(const vt of ut){const Dt=xe.map((It=>vt.getTilePoint(new a.a0(It.x,It.y))));if(Dt.expandBy(ct),Dt.intersects(wt)){const It=ue.map((qt=>vt.getTilePoint(qt))),Ft=ge.map((qt=>vt.getTilePoint(qt)));C.push({tile:We,tileID:B?vt:vt.unwrapTo(0),queryGeometry:It,cameraQueryGeometry:Ft,scale:lt})}}}return C}transformBbox(s,d,w){let C=s.map(d);if(w){const L=a.a1.fromPoints(s);L.shrinkBy(.001*Math.min(L.width(),L.height()));const B=L.map(d);a.a1.fromPoints(C).covers(B)||(C=C.map((W=>W.x>.5?new a.a0(W.x-1,W.y,W.z):W)))}return C}getVisibleCoordinates(s){const d=this.getRenderableIds(s).map((w=>this._tiles[w].tileID));return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(Ir(this._source.type)){const s=x.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,w){this._state.updateState(s=s||"_geojsonTileLayer",d,w)}removeFeatureState(s,d,w){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,w)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,w){const C=this._tiles[s];C&&C.setDependencies(d,w)}reloadTilesForDependencies(s,d){for(const w in this._tiles)this._tiles[w].hasDependency(s,d)&&this._reloadTile(w,"reloading");this._cache.filter((w=>!w.hasDependency(s,d)))}}function Et(A,s){const d=Math.abs(2*A.wrap)-+(A.wrap<0),w=Math.abs(2*s.wrap)-+(s.wrap<0);return A.overscaledZ-s.overscaledZ||w-d||s.canonical.y-A.canonical.y||s.canonical.x-A.canonical.x}function Ir(A){return A==="raster"||A==="image"||A==="video"}Xt.maxOverzooming=10,Xt.maxUnderzooming=3;class $t{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ag(s,0,1);let d=1,w=this._distances[d];const C=s*this.paddedLength+this.padding;for(;w<C&&d<this._distances.length;)w=this._distances[++d];const L=d-1,B=this._distances[L],W=w-B,te=W>0?(C-B)/W:0;return this.points[L].mult(1-te).add(this.points[d].mult(te))}}function Vr(A,s){let d=!0;return A==="always"||A!=="never"&&s!=="never"||(d=!1),d}class Rr{constructor(s,d,w){const C=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(s/w),this.yCellCount=Math.ceil(d/w);for(let B=0;B<this.xCellCount*this.yCellCount;B++)C.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,w,C,L){this._forEachCell(d,w,C,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(w),this.bboxes.push(C),this.bboxes.push(L)}insertCircle(s,d,w,C){this._forEachCell(d-C,w-C,d+C,w+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(w),this.circles.push(C)}_insertBoxCell(s,d,w,C,L,B){this.boxCells[L].push(B)}_insertCircleCell(s,d,w,C,L,B){this.circleCells[L].push(B)}_query(s,d,w,C,L,B,W){if(w<0||s>this.width||C<0||d>this.height)return[];const te=[];if(s<=0&&d<=0&&this.width<=w&&this.height<=C){if(L)return[{key:null,x1:s,y1:d,x2:w,y2:C}];for(let ue=0;ue<this.boxKeys.length;ue++)te.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(let ue=0;ue<this.circleKeys.length;ue++){const ge=this.circles[3*ue],Ce=this.circles[3*ue+1],xe=this.circles[3*ue+2];te.push({key:this.circleKeys[ue],x1:ge-xe,y1:Ce-xe,x2:ge+xe,y2:Ce+xe})}}else this._forEachCell(s,d,w,C,this._queryCell,te,{hitTest:L,overlapMode:B,seenUids:{box:{},circle:{}}},W);return te}query(s,d,w,C){return this._query(s,d,w,C,!1,null)}hitTest(s,d,w,C,L,B){return this._query(s,d,w,C,!0,L,B).length>0}hitTestCircle(s,d,w,C,L){const B=s-w,W=s+w,te=d-w,ue=d+w;if(W<0||B>this.width||ue<0||te>this.height)return!1;const ge=[];return this._forEachCell(B,te,W,ue,this._queryCellCircle,ge,{hitTest:!0,overlapMode:C,circle:{x:s,y:d,radius:w},seenUids:{box:{},circle:{}}},L),ge.length>0}_queryCell(s,d,w,C,L,B,W,te){const{seenUids:ue,hitTest:ge,overlapMode:Ce}=W,xe=this.boxCells[L];if(xe!==null){const We=this.bboxes;for(const ut of xe)if(!ue.box[ut]){ue.box[ut]=!0;const lt=4*ut,ct=this.boxKeys[ut];if(s<=We[lt+2]&&d<=We[lt+3]&&w>=We[lt+0]&&C>=We[lt+1]&&(!te||te(ct))&&(!ge||!Vr(Ce,ct.overlapMode))&&(B.push({key:ct,x1:We[lt],y1:We[lt+1],x2:We[lt+2],y2:We[lt+3]}),ge))return!0}}const Ne=this.circleCells[L];if(Ne!==null){const We=this.circles;for(const ut of Ne)if(!ue.circle[ut]){ue.circle[ut]=!0;const lt=3*ut,ct=this.circleKeys[ut];if(this._circleAndRectCollide(We[lt],We[lt+1],We[lt+2],s,d,w,C)&&(!te||te(ct))&&(!ge||!Vr(Ce,ct.overlapMode))){const vt=We[lt],Dt=We[lt+1],It=We[lt+2];if(B.push({key:ct,x1:vt-It,y1:Dt-It,x2:vt+It,y2:Dt+It}),ge)return!0}}}return!1}_queryCellCircle(s,d,w,C,L,B,W,te){const{circle:ue,seenUids:ge,overlapMode:Ce}=W,xe=this.boxCells[L];if(xe!==null){const We=this.bboxes;for(const ut of xe)if(!ge.box[ut]){ge.box[ut]=!0;const lt=4*ut,ct=this.boxKeys[ut];if(this._circleAndRectCollide(ue.x,ue.y,ue.radius,We[lt+0],We[lt+1],We[lt+2],We[lt+3])&&(!te||te(ct))&&!Vr(Ce,ct.overlapMode))return B.push(!0),!0}}const Ne=this.circleCells[L];if(Ne!==null){const We=this.circles;for(const ut of Ne)if(!ge.circle[ut]){ge.circle[ut]=!0;const lt=3*ut,ct=this.circleKeys[ut];if(this._circlesCollide(We[lt],We[lt+1],We[lt+2],ue.x,ue.y,ue.radius)&&(!te||te(ct))&&!Vr(Ce,ct.overlapMode))return B.push(!0),!0}}}_forEachCell(s,d,w,C,L,B,W,te){const ue=this._convertToXCellCoord(s),ge=this._convertToYCellCoord(d),Ce=this._convertToXCellCoord(w),xe=this._convertToYCellCoord(C);for(let Ne=ue;Ne<=Ce;Ne++)for(let We=ge;We<=xe;We++)if(L.call(this,s,d,w,C,this.xCellCount*We+Ne,B,W,te))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,w,C,L,B){const W=C-s,te=L-d,ue=w+B;return ue*ue>W*W+te*te}_circleAndRectCollide(s,d,w,C,L,B,W){const te=(B-C)/2,ue=Math.abs(s-(C+te));if(ue>te+w)return!1;const ge=(W-L)/2,Ce=Math.abs(d-(L+ge));if(Ce>ge+w)return!1;if(ue<=te||Ce<=ge)return!0;const xe=ue-te,Ne=Ce-ge;return xe*xe+Ne*Ne<=w*w}}function un(A,s,d){const w=a.L();if(!A){const{vecSouth:Ce,vecEast:xe}=qe(s),Ne=h();Ne[0]=xe[0],Ne[1]=xe[1],Ne[2]=Ce[0],Ne[3]=Ce[1],C=Ne,(ge=(B=(L=Ne)[0])*(ue=L[3])-(te=L[2])*(W=L[1]))&&(C[0]=ue*(ge=1/ge),C[1]=-W*ge,C[2]=-te*ge,C[3]=B*ge),w[0]=Ne[0],w[1]=Ne[1],w[4]=Ne[2],w[5]=Ne[3]}var C,L,B,W,te,ue,ge;return a.N(w,w,[1/d,1/d,1]),w}function Te(A,s,d,w){if(A){const C=a.L();if(!s){const{vecSouth:L,vecEast:B}=qe(d);C[0]=B[0],C[1]=B[1],C[4]=L[0],C[5]=L[1]}return a.N(C,C,[w,w,1]),C}return d.pixelsToClipSpaceMatrix}function qe(A){const s=Math.cos(A.rollInRadians),d=Math.sin(A.rollInRadians),w=Math.cos(A.pitchInRadians),C=Math.cos(A.bearingInRadians),L=Math.sin(A.bearingInRadians),B=a.aq();B[0]=-C*w*d-L*s,B[1]=-L*w*d+C*s;const W=a.ar(B);W<1e-9?a.as(B):a.at(B,B,1/W);const te=a.aq();te[0]=C*w*s-L*d,te[1]=L*w*s+C*d;const ue=a.ar(te);return ue<1e-9?a.as(te):a.at(te,te,1/ue),{vecEast:te,vecSouth:B}}function ht(A,s,d,w){let C;w?(C=[A,s,w(A,s),1],a.av(C,C,d)):(C=[A,s,0,1],oa(C,C,d));const L=C[3];return{point:new a.P(C[0]/L,C[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}function kt(A,s){return .5+A/s*.5}function gr(A,s){return A.x>=-s[0]&&A.x<=s[0]&&A.y>=-s[1]&&A.y<=s[1]}function Ur(A,s,d,w,C,L,B,W,te,ue,ge,Ce,xe){const Ne=d?A.textSizeData:A.iconSizeData,We=a.am(Ne,s.transform.zoom),ut=[256/s.width*2+1,256/s.height*2+1],lt=d?A.text.dynamicLayoutVertexArray:A.icon.dynamicLayoutVertexArray;lt.clear();const ct=A.lineVertexArray,vt=d?A.text.placedSymbolArray:A.icon.placedSymbolArray,Dt=s.transform.width/s.transform.height;let It=!1;for(let Ft=0;Ft<vt.length;Ft++){const qt=vt.get(Ft);if(qt.hidden||qt.writingMode===a.an.vertical&&!It){Ua(qt.numGlyphs,lt);continue}It=!1;const Pt=new a.P(qt.anchorX,qt.anchorY),Zt={getElevation:xe,pitchedLabelPlaneMatrix:w,lineVertexArray:ct,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Pt,unwrappedTileID:te,width:ue,height:ge,translation:Ce},_r=Pn(qt.anchorX,qt.anchorY,Zt);if(!gr(_r.point,ut)){Ua(qt.numGlyphs,lt);continue}const pr=kt(s.transform.cameraToCenterDistance,_r.signedDistanceFromCamera),mr=a.ao(Ne,We,qt),wr=L?mr*s.transform.getPitchedTextCorrection(qt.anchorX,qt.anchorY,te)/pr:mr*pr,sn=Hn({projectionContext:Zt,pitchedLabelPlaneMatrixInverse:C,symbol:qt,fontSize:wr,flip:!1,keepUpright:B,glyphOffsetArray:A.glyphOffsetArray,dynamicLayoutVertexArray:lt,aspectRatio:Dt,rotateToLine:W});It=sn.useVertical,(sn.notEnoughRoom||It||sn.needsFlipping&&Hn({projectionContext:Zt,pitchedLabelPlaneMatrixInverse:C,symbol:qt,fontSize:wr,flip:!0,keepUpright:B,glyphOffsetArray:A.glyphOffsetArray,dynamicLayoutVertexArray:lt,aspectRatio:Dt,rotateToLine:W}).notEnoughRoom)&&Ua(qt.numGlyphs,lt)}d?A.text.dynamicLayoutVertexBuffer.updateData(lt):A.icon.dynamicLayoutVertexBuffer.updateData(lt)}function Er(A,s,d,w,C,L,B,W){const te=L.glyphStartIndex+L.numGlyphs,ue=L.lineStartIndex,ge=L.lineStartIndex+L.lineLength,Ce=s.getoffsetX(L.glyphStartIndex),xe=s.getoffsetX(te-1),Ne=Ki(A*Ce,d,w,C,L.segment,ue,ge,W,B);if(!Ne)return null;const We=Ki(A*xe,d,w,C,L.segment,ue,ge,W,B);return We?W.projectionCache.anyProjectionOccluded?null:{first:Ne,last:We}:null}function si(A,s,d,w){return A===a.an.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*w?{useVertical:!0}:(A===a.an.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function Hn(A){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:d,symbol:w,fontSize:C,flip:L,keepUpright:B,glyphOffsetArray:W,dynamicLayoutVertexArray:te,aspectRatio:ue,rotateToLine:ge}=A,Ce=C/24,xe=w.lineOffsetX*Ce,Ne=w.lineOffsetY*Ce;let We;if(w.numGlyphs>1){const ut=w.glyphStartIndex+w.numGlyphs,lt=w.lineStartIndex,ct=w.lineStartIndex+w.lineLength,vt=Er(Ce,W,xe,Ne,L,w,ge,s);if(!vt)return{notEnoughRoom:!0};const Dt=cn(vt.first.point.x,vt.first.point.y,s,d),It=cn(vt.last.point.x,vt.last.point.y,s,d);if(B&&!L){const Ft=si(w.writingMode,Dt,It,ue);if(Ft)return Ft}We=[vt.first];for(let Ft=w.glyphStartIndex+1;Ft<ut-1;Ft++){const qt=Ki(Ce*W.getoffsetX(Ft),xe,Ne,L,w.segment,lt,ct,s,ge);if(!qt)return{notEnoughRoom:!0};We.push(qt)}We.push(vt.last)}else{if(B&&!L){const lt=qr(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,ct=w.lineStartIndex+w.segment+1,vt=new a.P(s.lineVertexArray.getx(ct),s.lineVertexArray.gety(ct)),Dt=qr(vt.x,vt.y,s),It=Dt.signedDistanceFromCamera>0?Dt.point:di(s.tileAnchorPoint,vt,lt,1,s),Ft=cn(lt.x,lt.y,s,d),qt=cn(It.x,It.y,s,d),Pt=si(w.writingMode,Ft,qt,ue);if(Pt)return Pt}const ut=Ki(Ce*W.getoffsetX(w.glyphStartIndex),xe,Ne,L,w.segment,w.lineStartIndex,w.lineStartIndex+w.lineLength,s,ge);if(!ut||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};We=[ut]}for(const ut of We)a.au(te,ut.point,ut.angle);return{}}function di(A,s,d,w,C){const L=A.add(A.sub(s)._unit()),B=qr(L.x,L.y,C).point,W=d.sub(B);return d.add(W._mult(w/W.mag()))}function Mi(A,s,d){const w=s.projectionCache;if(w.projections[A])return w.projections[A];const C=new a.P(s.lineVertexArray.getx(A),s.lineVertexArray.gety(A)),L=qr(C.x,C.y,s);if(L.signedDistanceFromCamera>0)return w.projections[A]=L.point,w.anyProjectionOccluded=w.anyProjectionOccluded||L.isOccluded,L.point;const B=A-d.direction;return di(d.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(B),s.lineVertexArray.gety(B)),C,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,s)}function qr(A,s,d){const w=A+d.translation[0],C=s+d.translation[1];let L;return d.pitchWithMap?(L=ht(w,C,d.pitchedLabelPlaneMatrix,d.getElevation),L.isOccluded=!1):(L=d.transform.projectTileCoordinates(w,C,d.unwrappedTileID,d.getElevation),L.point.x=(.5*L.point.x+.5)*d.width,L.point.y=(.5*-L.point.y+.5)*d.height),L}function cn(A,s,d,w){if(d.pitchWithMap){const C=[A,s,0,1];return a.av(C,C,w),d.transform.projectTileCoordinates(C[0]/C[3],C[1]/C[3],d.unwrappedTileID,d.getElevation).point}return{x:A/d.width*2-1,y:s/d.height*2-1}}function Pn(A,s,d){return d.transform.projectTileCoordinates(A,s,d.unwrappedTileID,d.getElevation)}function Gi(A,s,d){return A._unit()._perp()._mult(s*d)}function pa(A,s,d,w,C,L,B,W,te){if(W.projectionCache.offsets[A])return W.projectionCache.offsets[A];const ue=d.add(s);if(A+te.direction<w||A+te.direction>=C)return W.projectionCache.offsets[A]=ue,ue;const ge=Mi(A+te.direction,W,te),Ce=Gi(ge.sub(d),B,te.direction),xe=d.add(Ce),Ne=ge.add(Ce);return W.projectionCache.offsets[A]=a.aw(L,ue,xe,Ne)||ue,W.projectionCache.offsets[A]}function Ki(A,s,d,w,C,L,B,W,te){const ue=w?A-s:A+s;let ge=ue>0?1:-1,Ce=0;w&&(ge*=-1,Ce=Math.PI),ge<0&&(Ce+=Math.PI);let xe,Ne=ge>0?L+C:L+C+1;W.projectionCache.cachedAnchorPoint?xe=W.projectionCache.cachedAnchorPoint:(xe=qr(W.tileAnchorPoint.x,W.tileAnchorPoint.y,W).point,W.projectionCache.cachedAnchorPoint=xe);let We,ut,lt=xe,ct=xe,vt=0,Dt=0;const It=Math.abs(ue),Ft=[];let qt;for(;vt+Dt<=It;){if(Ne+=ge,Ne<L||Ne>=B)return null;vt+=Dt,ct=lt,ut=We;const _r={absOffsetX:It,direction:ge,distanceFromAnchor:vt,previousVertex:ct};if(lt=Mi(Ne,W,_r),d===0)Ft.push(ct),qt=lt.sub(ct);else{let pr;const mr=lt.sub(ct);pr=mr.mag()===0?Gi(Mi(Ne+ge,W,_r).sub(lt),d,ge):Gi(mr,d,ge),ut||(ut=ct.add(pr)),We=pa(Ne,pr,lt,L,B,ut,d,W,_r),Ft.push(ut),qt=We.sub(ut)}Dt=qt.mag()}const Pt=qt._mult((It-vt)/Dt)._add(ut||ct),Zt=Ce+Math.atan2(lt.y-ct.y,lt.x-ct.x);return Ft.push(Pt),{point:Pt,angle:te?Zt:0,path:Ft}}const wn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ua(A,s){for(let d=0;d<A;d++){const w=s.length;s.resize(w+4),s.float32.set(wn,3*w)}}function oa(A,s,d){const w=s[0],C=s[1];return A[0]=d[0]*w+d[4]*C+d[12],A[1]=d[1]*w+d[5]*C+d[13],A[3]=d[3]*w+d[7]*C+d[15],A}const Di=100;class Ra{constructor(s,d=new Rr(s.width+200,s.height+200,25),w=new Rr(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=w,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Di,this.screenBottomBoundary=s.height+Di,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,w,C,L,B,W,te,ue,ge,Ce,xe){const Ne=this.projectAndGetPerspectiveRatio(s.anchorPointX+te[0],s.anchorPointY+te[1],L,ge,xe),We=w*Ne.perspectiveRatio;let ut;if(B||W)ut=this._projectCollisionBox(s,We,C,L,B,W,te,Ne,ge,Ce,xe);else{const qt=Ne.x+(Ce?Ce.x*We:0),Pt=Ne.y+(Ce?Ce.y*We:0);ut={allPointsOccluded:!1,box:[qt+s.x1*We,Pt+s.y1*We,qt+s.x2*We,Pt+s.y2*We]}}const[lt,ct,vt,Dt]=ut.box,It=B?ut.allPointsOccluded:Ne.isOccluded;let Ft=It;return Ft||(Ft=Ne.perspectiveRatio<this.perspectiveRatioCutoff),Ft||(Ft=!this.isInsideGrid(lt,ct,vt,Dt)),Ft||d!=="always"&&this.grid.hitTest(lt,ct,vt,Dt,d,ue)?{box:[lt,ct,vt,Dt],placeable:!1,offscreen:!1,occluded:It}:{box:[lt,ct,vt,Dt],placeable:!0,offscreen:this.isOffscreen(lt,ct,vt,Dt),occluded:It}}placeCollisionCircles(s,d,w,C,L,B,W,te,ue,ge,Ce,xe,Ne,We){const ut=[],lt=new a.P(d.anchorX,d.anchorY),ct=this.getPerspectiveRatio(lt.x,lt.y,B,We),vt=(ue?L*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,B)/ct:L*ct)/a.aA,Dt={getElevation:We,pitchedLabelPlaneMatrix:W,lineVertexArray:w,pitchWithMap:ue,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:lt,unwrappedTileID:B,width:this.transform.width,height:this.transform.height,translation:Ne},It=Er(vt,C,d.lineOffsetX*vt,d.lineOffsetY*vt,!1,d,!1,Dt);let Ft=!1,qt=!1,Pt=!0;if(It){const Zt=.5*Ce*ct+xe,_r=new a.P(-100,-100),pr=new a.P(this.screenRightBoundary,this.screenBottomBoundary),mr=new $t,wr=It.first,sn=It.last;let on=[];for(let _i=wr.path.length-1;_i>=1;_i--)on.push(wr.path[_i]);for(let _i=1;_i<sn.path.length;_i++)on.push(sn.path[_i]);const $r=2.5*Zt;if(ue){const _i=this.projectPathToScreenSpace(on,Dt);on=_i.some((ji=>ji.signedDistanceFromCamera<=0))?[]:_i.map((ji=>ji.point))}let En=[];if(on.length>0){const _i=on[0].clone(),ji=on[0].clone();for(let Ma=1;Ma<on.length;Ma++)_i.x=Math.min(_i.x,on[Ma].x),_i.y=Math.min(_i.y,on[Ma].y),ji.x=Math.max(ji.x,on[Ma].x),ji.y=Math.max(ji.y,on[Ma].y);En=_i.x>=_r.x&&ji.x<=pr.x&&_i.y>=_r.y&&ji.y<=pr.y?[on]:ji.x<_r.x||_i.x>pr.x||ji.y<_r.y||_i.y>pr.y?[]:a.ax([on],_r.x,_r.y,pr.x,pr.y)}for(const _i of En){mr.reset(_i,.25*Zt);let ji=0;ji=mr.length<=.5*Zt?1:Math.ceil(mr.paddedLength/$r)+1;for(let Ma=0;Ma<ji;Ma++){const ea=Ma/Math.max(ji-1,1),ta=mr.lerp(ea),Xi=ta.x+Di,Wi=ta.y+Di;ut.push(Xi,Wi,Zt,0);const na=Xi-Zt,Wo=Wi-Zt,Oi=Xi+Zt,ss=Wi+Zt;if(Pt=Pt&&this.isOffscreen(na,Wo,Oi,ss),qt=qt||this.isInsideGrid(na,Wo,Oi,ss),s!=="always"&&this.grid.hitTestCircle(Xi,Wi,Zt,s,ge)&&(Ft=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Ft}}}}return{circles:!te&&Ft||!qt||ct<this.perspectiveRatioCutoff?[]:ut,offscreen:Pt,collisionDetected:Ft}}projectPathToScreenSpace(s,d){const w=(function(C,L){const B=a.L();return a.ap(B,L.pitchedLabelPlaneMatrix),C.map((W=>{const te=ht(W.x,W.y,B,L.getElevation),ue=L.transform.projectTileCoordinates(te.point.x,te.point.y,L.unwrappedTileID,L.getElevation);return ue.point.x=(.5*ue.point.x+.5)*L.width,ue.point.y=(.5*-ue.point.y+.5)*L.height,ue}))})(s,d);return(function(C){let L=0,B=0,W=0,te=0;for(let ue=0;ue<C.length;ue++)C[ue].isOccluded?(W=ue+1,te=0):(te++,te>B&&(B=te,L=W));return C.slice(L,L+B)})(w)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[],w=new a.a1;for(const Ce of s){const xe=new a.P(Ce.x+Di,Ce.y+Di);w.extend(xe),d.push(xe)}const{minX:C,minY:L,maxX:B,maxY:W}=w,te=this.grid.query(C,L,B,W).concat(this.ignoredGrid.query(C,L,B,W)),ue={},ge={};for(const Ce of te){const xe=Ce.key;if(ue[xe.bucketInstanceId]===void 0&&(ue[xe.bucketInstanceId]={}),ue[xe.bucketInstanceId][xe.featureIndex])continue;const Ne=[new a.P(Ce.x1,Ce.y1),new a.P(Ce.x2,Ce.y1),new a.P(Ce.x2,Ce.y2),new a.P(Ce.x1,Ce.y2)];a.ay(d,Ne)&&(ue[xe.bucketInstanceId][xe.featureIndex]=!0,ge[xe.bucketInstanceId]===void 0&&(ge[xe.bucketInstanceId]=[]),ge[xe.bucketInstanceId].push(xe.featureIndex))}return ge}insertCollisionBox(s,d,w,C,L,B){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:L,collisionGroupID:B,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,w,C,L,B){const W=w?this.ignoredGrid:this.grid,te={bucketInstanceId:C,featureIndex:L,collisionGroupID:B,overlapMode:d};for(let ue=0;ue<s.length;ue+=4)W.insertCircle(te,s[ue],s[ue+1],s[ue+2])}projectAndGetPerspectiveRatio(s,d,w,C,L){if(L){let B;C?(B=[s,d,C(s,d),1],a.av(B,B,L)):(B=[s,d,0,1],oa(B,B,L));const W=B[3];return{x:(B[0]/W+1)/2*this.transform.width+Di,y:(-B[1]/W+1)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/W*.5,isOccluded:!1,signedDistanceFromCamera:W}}{const B=this.transform.projectTileCoordinates(s,d,w,C);return{x:(B.point.x+1)/2*this.transform.width+Di,y:(1-B.point.y)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/B.signedDistanceFromCamera*.5,isOccluded:B.isOccluded,signedDistanceFromCamera:B.signedDistanceFromCamera}}}getPerspectiveRatio(s,d,w,C){const L=this.transform.projectTileCoordinates(s,d,w,C);return .5+this.transform.cameraToCenterDistance/L.signedDistanceFromCamera*.5}isOffscreen(s,d,w,C){return w<Di||s>=this.screenRightBoundary||C<Di||d>this.screenBottomBoundary}isInsideGrid(s,d,w,C){return w>=0&&s<this.gridRightBoundary&&C>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=a.af([]);return a.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,d,w,C,L,B,W,te,ue,ge,Ce){let xe=1,Ne=0,We=0,ut=1;const lt=s.anchorPointX+W[0],ct=s.anchorPointY+W[1];if(B&&!L){const on=this.projectAndGetPerspectiveRatio(lt+1,ct,C,ue,Ce),$r=on.x-te.x,En=Math.atan((on.y-te.y)/$r)+($r<0?Math.PI:0),_i=Math.sin(En),ji=Math.cos(En);xe=ji,Ne=_i,We=-_i,ut=ji}else if(!B&&L){const on=qe(this.transform);xe=on.vecEast[0],Ne=on.vecEast[1],We=on.vecSouth[0],ut=on.vecSouth[1]}let vt=te.x,Dt=te.y,It=d;L&&(vt=lt,Dt=ct,It=Math.pow(2,-(this.transform.zoom-w.overscaledZ)),It*=this.transform.getPitchedTextCorrection(lt,ct,C),ge||(It*=a.ag(.5+te.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ge&&(vt+=xe*ge.x*It+We*ge.y*It,Dt+=Ne*ge.x*It+ut*ge.y*It);const Ft=s.x1*It,qt=s.x2*It,Pt=(Ft+qt)/2,Zt=s.y1*It,_r=s.y2*It,pr=(Zt+_r)/2,mr=[{offsetX:Ft,offsetY:Zt},{offsetX:Pt,offsetY:Zt},{offsetX:qt,offsetY:Zt},{offsetX:qt,offsetY:pr},{offsetX:qt,offsetY:_r},{offsetX:Pt,offsetY:_r},{offsetX:Ft,offsetY:_r},{offsetX:Ft,offsetY:pr}];let wr=[];for(const{offsetX:on,offsetY:$r}of mr)wr.push(new a.P(vt+xe*on+We*$r,Dt+Ne*on+ut*$r));let sn=!1;if(L){const on=wr.map(($r=>this.projectAndGetPerspectiveRatio($r.x,$r.y,C,ue,Ce)));sn=on.some(($r=>!$r.isOccluded)),wr=on.map(($r=>new a.P($r.x,$r.y)))}else sn=!0;return{box:a.az(wr),allPointsOccluded:!sn}}}class Ts{constructor(s,d,w,C){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):C&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class bi{constructor(s,d,w,C,L){this.text=new Ts(s?s.text:null,d,w,L),this.icon=new Ts(s?s.icon:null,d,C,L)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ys{constructor(s,d,w){this.text=s,this.icon=d,this.skipFade=w}}class _o{constructor(s,d,w,C,L){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=w,this.bucketIndex=C,this.tileID=L}}class fi{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:w=>w.collisionGroupID===d}}return this.collisionGroups[s]}}function io(A,s,d,w,C){const{horizontalAlign:L,verticalAlign:B}=a.aG(A);return new a.P(-(L-.5)*s+w[0]*C,-(B-.5)*d+w[1]*C)}class ps{constructor(s,d,w,C,L){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new Ra(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new fi(C),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const d=this.terrain;return d?(w,C)=>d.getElevation(s,w,C):null}getBucketParts(s,d,w,C){const L=w.getBucket(d),B=w.latestFeatureIndex;if(!L||!B||d.id!==L.layerIds[0])return;const W=w.collisionBoxArray,te=L.layers[0].layout,ue=L.layers[0].paint,ge=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),Ce=w.tileSize/a.$,xe=w.tileID.toUnwrapped(),Ne=te.get("text-rotation-alignment")==="map",We=a.aB(w,1,this.transform.zoom),ut=a.aC(this.collisionIndex.transform,w,ue.get("text-translate"),ue.get("text-translate-anchor")),lt=a.aC(this.collisionIndex.transform,w,ue.get("icon-translate"),ue.get("icon-translate-anchor")),ct=un(Ne,this.transform,We);this.retainedQueryData[L.bucketInstanceId]=new _o(L.bucketInstanceId,B,L.sourceLayerIndex,L.index,w.tileID);const vt={bucket:L,layout:te,translationText:ut,translationIcon:lt,unwrappedTileID:xe,pitchedLabelPlaneMatrix:ct,scale:ge,textPixelRatio:Ce,holdingForFade:w.holdingForFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:a.am(L.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(C)for(const Dt of L.sortKeyRanges){const{sortKey:It,symbolInstanceStart:Ft,symbolInstanceEnd:qt}=Dt;s.push({sortKey:It,symbolInstanceStart:Ft,symbolInstanceEnd:qt,parameters:vt})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:vt})}attemptAnchorPlacement(s,d,w,C,L,B,W,te,ue,ge,Ce,xe,Ne,We,ut,lt,ct,vt,Dt,It){const Ft=a.aD[s.textAnchor],qt=[s.textOffset0,s.textOffset1],Pt=io(Ft,w,C,qt,L),Zt=this.collisionIndex.placeCollisionBox(d,xe,te,ue,ge,W,B,lt,Ce.predicate,Dt,Pt,It);if((!vt||this.collisionIndex.placeCollisionBox(vt,xe,te,ue,ge,W,B,ct,Ce.predicate,Dt,Pt,It).placeable)&&Zt.placeable){let _r;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ne.crossTileID]&&this.prevPlacement.placements[Ne.crossTileID]&&this.prevPlacement.placements[Ne.crossTileID].text&&(_r=this.prevPlacement.variableOffsets[Ne.crossTileID].anchor),Ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ne.crossTileID]={textOffset:qt,width:w,height:C,anchor:Ft,textBoxScale:L,prevAnchor:_r},this.markUsedJustification(We,Ft,Ne,ut),We.allowVerticalPlacement&&(this.markUsedOrientation(We,ut,Ne),this.placedOrientations[Ne.crossTileID]=ut),{shift:Pt,placedGlyphBoxes:Zt}}}placeLayerBucketPart(s,d,w){const{bucket:C,layout:L,translationText:B,translationIcon:W,unwrappedTileID:te,pitchedLabelPlaneMatrix:ue,textPixelRatio:ge,holdingForFade:Ce,collisionBoxArray:xe,partiallyEvaluatedTextSize:Ne,collisionGroup:We}=s.parameters,ut=L.get("text-optional"),lt=L.get("icon-optional"),ct=a.aE(L,"text-overlap","text-allow-overlap"),vt=ct==="always",Dt=a.aE(L,"icon-overlap","icon-allow-overlap"),It=Dt==="always",Ft=L.get("text-rotation-alignment")==="map",qt=L.get("text-pitch-alignment")==="map",Pt=L.get("icon-text-fit")!=="none",Zt=L.get("symbol-z-order")==="viewport-y",_r=vt&&(It||!C.hasIconData()||lt),pr=It&&(vt||!C.hasTextData()||ut);!C.collisionArrays&&xe&&C.deserializeCollisionBoxes(xe);const mr=this.retainedQueryData[C.bucketInstanceId].tileID,wr=this._getTerrainElevationFunc(mr),sn=this.transform.getFastPathSimpleProjectionMatrix(mr),on=($r,En,_i)=>{var ji,Ma;if(d[$r.crossTileID])return;if(Ce)return void(this.placements[$r.crossTileID]=new Ys(!1,!1,!1));let ea=!1,ta=!1,Xi=!0,Wi=null,na={box:null,placeable:!1,offscreen:null,occluded:!1},Wo={placeable:!1},Oi=null,ss=null,Xo=null,Fu=0,Ad=0,Md=0;En.textFeatureIndex?Fu=En.textFeatureIndex:$r.useRuntimeCollisionCircles&&(Fu=$r.featureIndex),En.verticalTextFeatureIndex&&(Ad=En.verticalTextFeatureIndex);const Sc=En.textBox;if(Sc){const nu=Do=>{let Ja=a.an.horizontal;if(C.allowVerticalPlacement&&!Do&&this.prevPlacement){const Dl=this.prevPlacement.placedOrientations[$r.crossTileID];Dl&&(this.placedOrientations[$r.crossTileID]=Dl,Ja=Dl,this.markUsedOrientation(C,Ja,$r))}return Ja},nc=(Do,Ja)=>{if(C.allowVerticalPlacement&&$r.numVerticalGlyphVertices>0&&En.verticalTextBox){for(const Dl of C.writingModes)if(Dl===a.an.vertical?(na=Ja(),Wo=na):na=Do(),na&&na.placeable)break}else na=Do()},Ld=$r.textAnchorOffsetStartIndex,yf=$r.textAnchorOffsetEndIndex;if(yf===Ld){const Do=(Ja,Dl)=>{const gs=this.collisionIndex.placeCollisionBox(Ja,ct,ge,mr,te,qt,Ft,B,We.predicate,wr,void 0,sn);return gs&&gs.placeable&&(this.markUsedOrientation(C,Dl,$r),this.placedOrientations[$r.crossTileID]=Dl),gs};nc((()=>Do(Sc,a.an.horizontal)),(()=>{const Ja=En.verticalTextBox;return C.allowVerticalPlacement&&$r.numVerticalGlyphVertices>0&&Ja?Do(Ja,a.an.vertical):{box:null,offscreen:null}})),nu(na&&na.placeable)}else{let Do=a.aD[(Ma=(ji=this.prevPlacement)===null||ji===void 0?void 0:ji.variableOffsets[$r.crossTileID])===null||Ma===void 0?void 0:Ma.anchor];const Ja=(gs,M1,vw)=>{const Ny=gs.x2-gs.x1,rp=gs.y2-gs.y1,ch=$r.textBoxScale,Yc=Pt&&Dt==="never"?M1:null;let nl=null,Zc=ct==="never"?1:2,Oy="never";Do&&Zc++;for(let Rd=0;Rd<Zc;Rd++){for(let Fy=Ld;Fy<yf;Fy++){const By=C.textAnchorOffsets.get(Fy);if(Do&&By.textAnchor!==Do)continue;const np=this.attemptAnchorPlacement(By,gs,Ny,rp,ch,Ft,qt,ge,mr,te,We,Oy,$r,C,vw,B,W,Yc,wr);if(np&&(nl=np.placedGlyphBoxes,nl&&nl.placeable))return ea=!0,Wi=np.shift,nl}Do?Do=null:Oy=ct}return w&&!nl&&(nl={box:this.collisionIndex.placeCollisionBox(Sc,"always",ge,mr,te,qt,Ft,B,We.predicate,wr,void 0,sn).box,offscreen:!1,placeable:!1,occluded:!1}),nl};nc((()=>Ja(Sc,En.iconBox,a.an.horizontal)),(()=>{const gs=En.verticalTextBox;return C.allowVerticalPlacement&&(!na||!na.placeable)&&$r.numVerticalGlyphVertices>0&&gs?Ja(gs,En.verticalIconBox,a.an.vertical):{box:null,occluded:!0,offscreen:null}})),na&&(ea=na.placeable,Xi=na.offscreen);const Dl=nu(na&&na.placeable);if(!ea&&this.prevPlacement){const gs=this.prevPlacement.variableOffsets[$r.crossTileID];gs&&(this.variableOffsets[$r.crossTileID]=gs,this.markUsedJustification(C,gs.anchor,$r,Dl))}}}if(Oi=na,ea=Oi&&Oi.placeable,Xi=Oi&&Oi.offscreen,$r.useRuntimeCollisionCircles){const nu=C.text.placedSymbolArray.get($r.centerJustifiedTextSymbolIndex),nc=a.ao(C.textSizeData,Ne,nu),Ld=L.get("text-padding");ss=this.collisionIndex.placeCollisionCircles(ct,nu,C.lineVertexArray,C.glyphOffsetArray,nc,te,ue,w,qt,We.predicate,$r.collisionCircleDiameter,Ld,B,wr),ss.circles.length&&ss.collisionDetected&&!w&&a.w("Collisions detected, but collision boxes are not shown"),ea=vt||ss.circles.length>0&&!ss.collisionDetected,Xi=Xi&&ss.offscreen}if(En.iconFeatureIndex&&(Md=En.iconFeatureIndex),En.iconBox){const nu=nc=>this.collisionIndex.placeCollisionBox(nc,Dt,ge,mr,te,qt,Ft,W,We.predicate,wr,Pt&&Wi?Wi:void 0,sn);Wo&&Wo.placeable&&En.verticalIconBox?(Xo=nu(En.verticalIconBox),ta=Xo.placeable):(Xo=nu(En.iconBox),ta=Xo.placeable),Xi=Xi&&Xo.offscreen}const ep=ut||$r.numHorizontalGlyphVertices===0&&$r.numVerticalGlyphVertices===0,tp=lt||$r.numIconVertices===0;ep||tp?tp?ep||(ta=ta&&ea):ea=ta&&ea:ta=ea=ta&&ea;const uh=ta&&Xo.placeable;if(ea&&Oi.placeable&&this.collisionIndex.insertCollisionBox(Oi.box,ct,L.get("text-ignore-placement"),C.bucketInstanceId,Wo&&Wo.placeable&&Ad?Ad:Fu,We.ID),uh&&this.collisionIndex.insertCollisionBox(Xo.box,Dt,L.get("icon-ignore-placement"),C.bucketInstanceId,Md,We.ID),ss&&ea&&this.collisionIndex.insertCollisionCircles(ss.circles,ct,L.get("text-ignore-placement"),C.bucketInstanceId,Fu,We.ID),w&&this.storeCollisionData(C.bucketInstanceId,_i,En,Oi,Xo,ss),$r.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$r.crossTileID]=new Ys((ea||_r)&&!Oi?.occluded,(ta||pr)&&!Xo?.occluded,Xi||C.justReloaded),d[$r.crossTileID]=!0};if(Zt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $r=C.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let En=$r.length-1;En>=0;--En){const _i=$r[En];on(C.symbolInstances.get(_i),C.collisionArrays[_i],_i)}}else for(let $r=s.symbolInstanceStart;$r<s.symbolInstanceEnd;$r++)on(C.symbolInstances.get($r),C.collisionArrays[$r],$r);C.justReloaded=!1}storeCollisionData(s,d,w,C,L,B){if(w.textBox||w.iconBox){let W,te;this.collisionBoxArrays.has(s)?W=this.collisionBoxArrays.get(s):(W=new Map,this.collisionBoxArrays.set(s,W)),W.has(d)?te=W.get(d):(te={text:null,icon:null},W.set(d,te)),w.textBox&&(te.text=C.box),w.iconBox&&(te.icon=L.box)}if(B){let W=this.collisionCircleArrays[s];W===void 0&&(W=this.collisionCircleArrays[s]=[]);for(let te=0;te<B.circles.length;te+=4)W.push(B.circles[te+0]-Di),W.push(B.circles[te+1]-Di),W.push(B.circles[te+2]),W.push(B.collisionDetected?1:0)}}markUsedJustification(s,d,w,C){let L;L=C===a.an.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[a.aF(d)];const B=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const W of B)W>=0&&(s.text.placedSymbolArray.get(W).crossTileID=L>=0&&W!==L?0:w.crossTileID)}markUsedOrientation(s,d,w){const C=d===a.an.horizontal||d===a.an.horizontalOnly?d:0,L=d===a.an.vertical?d:0,B=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const W of B)s.text.placedSymbolArray.get(W).placedOrientation=C;w.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=L)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let w=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const C=d?d.symbolFadeChange(s):1,L=d?d.opacities:{},B=d?d.variableOffsets:{},W=d?d.placedOrientations:{};for(const te in this.placements){const ue=this.placements[te],ge=L[te];ge?(this.opacities[te]=new bi(ge,C,ue.text,ue.icon),w=w||ue.text!==ge.text.placed||ue.icon!==ge.icon.placed):(this.opacities[te]=new bi(null,C,ue.text,ue.icon,ue.skipFade),w=w||ue.text||ue.icon)}for(const te in L){const ue=L[te];if(!this.opacities[te]){const ge=new bi(ue,C,!1,!1);ge.isHidden()||(this.opacities[te]=ge,w=w||ue.text.placed||ue.icon.placed)}}for(const te in B)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=B[te]);for(const te in W)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=W[te]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const w={};for(const C of d){const L=C.getBucket(s);L&&C.latestFeatureIndex&&s.id===L.layerIds[0]&&this.updateBucketOpacities(L,C.tileID,w,C.collisionBoxArray)}}updateBucketOpacities(s,d,w,C){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const L=s.layers[0],B=L.layout,W=new bi(null,0,!1,!1,!0),te=B.get("text-allow-overlap"),ue=B.get("icon-allow-overlap"),ge=L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ce=B.get("text-rotation-alignment")==="map",xe=B.get("text-pitch-alignment")==="map",Ne=B.get("icon-text-fit")!=="none",We=new bi(null,0,te&&(ue||!s.hasIconData()||B.get("icon-optional")),ue&&(te||!s.hasTextData()||B.get("text-optional")),!0);!s.collisionArrays&&C&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(C);const ut=(ct,vt,Dt)=>{for(let It=0;It<vt/4;It++)ct.opacityVertexArray.emplaceBack(Dt);ct.hasVisibleVertices=ct.hasVisibleVertices||Dt!==ao},lt=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ct=0;ct<s.symbolInstances.length;ct++){const vt=s.symbolInstances.get(ct),{numHorizontalGlyphVertices:Dt,numVerticalGlyphVertices:It,crossTileID:Ft}=vt;let qt=this.opacities[Ft];w[Ft]?qt=W:qt||(qt=We,this.opacities[Ft]=qt),w[Ft]=!0;const Pt=vt.numIconVertices>0,Zt=this.placedOrientations[vt.crossTileID],_r=Zt===a.an.vertical,pr=Zt===a.an.horizontal||Zt===a.an.horizontalOnly;if(Dt>0||It>0){const wr=Na(qt.text);ut(s.text,Dt,_r?ao:wr),ut(s.text,It,pr?ao:wr);const sn=qt.text.isHidden();[vt.rightJustifiedTextSymbolIndex,vt.centerJustifiedTextSymbolIndex,vt.leftJustifiedTextSymbolIndex].forEach((En=>{En>=0&&(s.text.placedSymbolArray.get(En).hidden=sn||_r?1:0)})),vt.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(vt.verticalPlacedTextSymbolIndex).hidden=sn||pr?1:0);const on=this.variableOffsets[vt.crossTileID];on&&this.markUsedJustification(s,on.anchor,vt,Zt);const $r=this.placedOrientations[vt.crossTileID];$r&&(this.markUsedJustification(s,"left",vt,$r),this.markUsedOrientation(s,$r,vt))}if(Pt){const wr=Na(qt.icon),sn=!(Ne&&vt.verticalPlacedIconSymbolIndex&&_r);vt.placedIconSymbolIndex>=0&&(ut(s.icon,vt.numIconVertices,sn?wr:ao),s.icon.placedSymbolArray.get(vt.placedIconSymbolIndex).hidden=qt.icon.isHidden()),vt.verticalPlacedIconSymbolIndex>=0&&(ut(s.icon,vt.numVerticalIconVertices,sn?ao:wr),s.icon.placedSymbolArray.get(vt.verticalPlacedIconSymbolIndex).hidden=qt.icon.isHidden())}const mr=lt&&lt.has(ct)?lt.get(ct):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const wr=s.collisionArrays[ct];if(wr){let sn=new a.P(0,0);if(wr.textBox||wr.verticalTextBox){let on=!0;if(ge){const $r=this.variableOffsets[Ft];$r?(sn=io($r.anchor,$r.width,$r.height,$r.textOffset,$r.textBoxScale),Ce&&sn._rotate(xe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):on=!1}if(wr.textBox||wr.verticalTextBox){let $r;wr.textBox&&($r=_r),wr.verticalTextBox&&($r=pr),ho(s.textCollisionBox.collisionVertexArray,qt.text.placed,!on||$r,mr.text,sn.x,sn.y)}}if(wr.iconBox||wr.verticalIconBox){const on=!!(!pr&&wr.verticalIconBox);let $r;wr.iconBox&&($r=on),wr.verticalIconBox&&($r=!on),ho(s.iconCollisionBox.collisionVertexArray,qt.icon.placed,$r,mr.icon,Ne?sn.x:0,Ne?sn.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const w=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*w>s}setStale(){this.stale=!0}}function ho(A,s,d,w,C,L){w&&w.length!==0||(w=[0,0,0,0]);const B=w[0]-Di,W=w[1]-Di,te=w[2]-Di,ue=w[3]-Di;A.emplaceBack(s?1:0,d?1:0,C||0,L||0,B,W),A.emplaceBack(s?1:0,d?1:0,C||0,L||0,te,W),A.emplaceBack(s?1:0,d?1:0,C||0,L||0,te,ue),A.emplaceBack(s?1:0,d?1:0,C||0,L||0,B,ue)}const Ga=Math.pow(2,25),Zs=Math.pow(2,24),Da=Math.pow(2,17),Qu=Math.pow(2,16),Au=Math.pow(2,9),ko=Math.pow(2,8),ms=Math.pow(2,1);function Na(A){if(A.opacity===0&&!A.placed)return 0;if(A.opacity===1&&A.placed)return 4294967295;const s=A.placed?1:0,d=Math.floor(127*A.opacity);return d*Ga+s*Zs+d*Da+s*Qu+d*Au+s*ko+d*ms+s}const ao=0;class Ia{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,w,C,L){const B=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(B,C,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort(((W,te)=>W.sortKey-te.sortKey)));this._currentPartIndex<B.length;)if(d.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,L())return!0;return!1}}class Ks{constructor(s,d,w,C,L,B,W,te){this.placement=new ps(s,d,B,W,te),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=L,this._done=!1}isDone(){return this._done}continuePlacement(s,d,w){const C=x.now(),L=()=>!this._forceFullPlacement&&x.now()-C>2;for(;this._currentPlacementIndex>=0;){const B=d[s[this._currentPlacementIndex]],W=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=W)&&(!B.maxzoom||B.maxzoom>W)){if(this._inProgressLayer||(this._inProgressLayer=new Ia(B)),this._inProgressLayer.continuePlacement(w[B.source],this.placement,this._showCollisionBoxes,B,L))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Hl=512/a.$/2;class Wl{constructor(s,d,w){this.tileID=s,this.bucketInstanceId=w,this._symbolsByKey={};const C=new Map;for(let L=0;L<d.length;L++){const B=d.get(L),W=B.key,te=C.get(W);te?te.push(B):C.set(W,[B])}for(const[L,B]of C){const W={positions:B.map((te=>({x:Math.floor(te.anchorX*Hl),y:Math.floor(te.anchorY*Hl)}))),crossTileIDs:B.map((te=>te.crossTileID))};if(W.positions.length>128){const te=new a.aH(W.positions.length,16,Uint16Array);for(const{x:ue,y:ge}of W.positions)te.add(ue,ge);te.finish(),delete W.positions,W.index=te}this._symbolsByKey[L]=W}}getScaledCoordinates(s,d){const{x:w,y:C,z:L}=this.tileID.canonical,{x:B,y:W,z:te}=d.canonical,ue=Hl/Math.pow(2,te-L),ge=(W*a.$+s.anchorY)*ue,Ce=C*a.$*Hl;return{x:Math.floor((B*a.$+s.anchorX)*ue-w*a.$*Hl),y:Math.floor(ge-Ce)}}findMatches(s,d,w){const C=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let L=0;L<s.length;L++){const B=s.get(L);if(B.crossTileID)continue;const W=this._symbolsByKey[B.key];if(!W)continue;const te=this.getScaledCoordinates(B,d);if(W.index){const ue=W.index.range(te.x-C,te.y-C,te.x+C,te.y+C).sort();for(const ge of ue){const Ce=W.crossTileIDs[ge];if(!w[Ce]){w[Ce]=!0,B.crossTileID=Ce;break}}}else if(W.positions)for(let ue=0;ue<W.positions.length;ue++){const ge=W.positions[ue],Ce=W.crossTileIDs[ue];if(Math.abs(ge.x-te.x)<=C&&Math.abs(ge.y-te.y)<=C&&!w[Ce]){w[Ce]=!0,B.crossTileID=Ce;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:s})=>s))}}class K{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class pe{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const w in this.indexes){const C=this.indexes[w],L={};for(const B in C){const W=C[B];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+d),L[W.tileID.key]=W}this.indexes[w]=L}this.lng=s}addBucket(s,d,w){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let L=0;L<d.symbolInstances.length;L++)d.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const C=this.usedCrossTileIDs[s.overscaledZ];for(const L in this.indexes){const B=this.indexes[L];if(Number(L)>s.overscaledZ)for(const W in B){const te=B[W];te.tileID.isChildOf(s)&&te.findMatches(d.symbolInstances,s,C)}else{const W=B[s.scaledTo(Number(L)).key];W&&W.findMatches(d.symbolInstances,s,C)}}for(let L=0;L<d.symbolInstances.length;L++){const B=d.symbolInstances.get(L);B.crossTileID||(B.crossTileID=w.generate(),C[B.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Wl(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const w of d.getCrossTileIDsLists())for(const C of w)delete this.usedCrossTileIDs[s][C]}removeStaleBuckets(s){let d=!1;for(const w in this.indexes){const C=this.indexes[w];for(const L in C)s[C[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,C[L]),delete C[L],d=!0)}return d}}class Ye{constructor(){this.layerIndexes={},this.crossTileIDs=new K,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,w){let C=this.layerIndexes[s.id];C===void 0&&(C=this.layerIndexes[s.id]=new pe);let L=!1;const B={};C.handleWrapJump(w);for(const W of d){const te=W.getBucket(s);te&&s.id===te.layerIds[0]&&(te.bucketInstanceId||(te.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(W.tileID,te,this.crossTileIDs)&&(L=!0),B[te.bucketInstanceId]=!0)}return C.removeStaleBuckets(B)&&(L=!0),L}pruneUnusedLayers(s){const d={};s.forEach((w=>{d[w]=!0}));for(const w in this.layerIndexes)d[w]||delete this.layerIndexes[w]}}var St="void main() {fragColor=vec4(1.0);}";const zt={prelude:Rt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Rt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Rt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Rt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Rt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Rt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Rt(St,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Rt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Rt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Rt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Rt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Rt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Rt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Rt(St,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Rt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Rt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Rt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Rt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Rt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Rt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Rt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Rt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Rt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Rt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Rt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Rt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Rt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Rt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Rt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Rt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Rt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Rt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Rt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Rt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Rt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Rt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Rt(A,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=s.match(/in ([\w]+) ([\w]+)/g),C=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=L?L.concat(C):C,W={};return{fragmentSource:A=A.replace(d,((te,ue,ge,Ce,xe)=>(W[xe]=!0,ue==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
in ${ge} ${Ce} ${xe};
#else
uniform ${ge} ${Ce} u_${xe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${xe}
    ${ge} ${Ce} ${xe} = u_${xe};
#endif
`))),vertexSource:s=s.replace(d,((te,ue,ge,Ce,xe)=>{const Ne=Ce==="float"?"vec2":"vec4",We=xe.match(/color/)?"color":Ne;return W[xe]?ue==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
uniform lowp float u_${xe}_t;
in ${ge} ${Ne} a_${xe};
out ${ge} ${Ce} ${xe};
#else
uniform ${ge} ${Ce} u_${xe};
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_${xe}
    ${xe} = a_${xe};
#else
    ${ge} ${Ce} ${xe} = u_${xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${xe}
    ${xe} = unpack_mix_${We}(a_${xe}, u_${xe}_t);
#else
    ${ge} ${Ce} ${xe} = u_${xe};
#endif
`:ue==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
uniform lowp float u_${xe}_t;
in ${ge} ${Ne} a_${xe};
#else
uniform ${ge} ${Ce} u_${xe};
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_${xe}
    ${ge} ${Ce} ${xe} = a_${xe};
#else
    ${ge} ${Ce} ${xe} = u_${xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${xe}
    ${ge} ${Ce} ${xe} = unpack_mix_${We}(a_${xe}, u_${xe}_t);
#else
    ${ge} ${Ce} ${xe} = u_${xe};
#endif
`})),staticAttributes:w,staticUniforms:B}}class Jt{constructor(s,d,w){this.vertexBuffer=s,this.indexBuffer=d,this.segments=w}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var jr=a.aI([{name:"a_pos",type:"Int16",components:2}]);const Kr="#define PROJECTION_MERCATOR",Wr="mercator";class nn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Wr}get shaderDefine(){return Kr}get shaderPreludeCode(){return zt.projectionMercator}get vertexShaderPreludeCode(){return zt.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,d,w,C,L){if(this._cachedMesh)return this._cachedMesh;const B=new a.aK;B.emplaceBack(0,0),B.emplaceBack(a.$,0),B.emplaceBack(0,a.$),B.emplaceBack(a.$,a.$);const W=s.createVertexBuffer(B,jr.members),te=a.aL.simpleSegment(0,0,4,2),ue=new a.aM;ue.emplaceBack(1,0,2),ue.emplaceBack(1,2,3);const ge=s.createIndexBuffer(ue);return this._cachedMesh=new Jt(W,ge,te),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class Yr{constructor(s=0,d=0,w=0,C=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(w)||w<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=w,this.right=C}interpolate(s,d,w){return d.top!=null&&s.top!=null&&(this.top=a.C.number(s.top,d.top,w)),d.bottom!=null&&s.bottom!=null&&(this.bottom=a.C.number(s.bottom,d.bottom,w)),d.left!=null&&s.left!=null&&(this.left=a.C.number(s.left,d.left,w)),d.right!=null&&s.right!=null&&(this.right=a.C.number(s.right,d.right,w)),this}getCenter(s,d){const w=a.ag((this.left+s-this.right)/2,0,s),C=a.ag((this.top+d-this.bottom)/2,0,d);return new a.P(w,C)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Yr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Bn(A,s){if(!A.renderWorldCopies||A.lngRange)return;const d=s.lng-A.center.lng;s.lng+=d>180?-360:d<-180?360:0}function gn(A){return Math.max(0,Math.floor(A))}class Rn{constructor(s,d,w,C,L,B){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=B===void 0||!!B,this._minZoom=d||0,this._maxZoom=w||22,this._minPitch=C??0,this._maxPitch=L??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=gn(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Yr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,d,w){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=gn(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new Yr(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!w&&s.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const d=a.aN(s,-180,180)*Math.PI/180;var w,C,L,B,W,te,ue,ge,Ce;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=h(),w=this._rotationMatrix,L=-this._bearingInRadians,B=(C=this._rotationMatrix)[0],W=C[1],te=C[2],ue=C[3],ge=Math.sin(L),Ce=Math.cos(L),w[0]=B*Ce+te*ge,w[1]=W*Ce+ue*ge,w[2]=B*-ge+te*Ce,w[3]=W*-ge+ue*Ce)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const d=a.ag(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const d=s/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aO(this._fovInRadians)}setFov(s){s=a.ag(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=a.ad(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const d=this.getConstrained(this._center,s).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=a.ae(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,d){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,w){this._unmodified=!1,this._edgeInsets.interpolate(s,d,w),this._constrain(),this._calcMatrices()}resize(s,d,w=!0){this._width=s,this._height=d,w&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Mt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.ah])}getConstrained(s,d){return this._callbacks.getConstrained(s,d)}getCameraQueryGeometry(s,d){if(d.length===1)return[d[0],s];{const{minX:w,minY:C,maxX:L,maxY:B}=a.a1.fromPoints(d).extend(s);return[new a.P(w,C),new a.P(L,C),new a.P(L,B),new a.P(w,B),new a.P(w,C)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:d,zoom:w}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(w),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=a.af(new Float64Array(16));a.N(s,s,[this._width/2,-this._height/2,1]),a.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=a.af(new Float64Array(16)),a.N(s,s,[1,-1,1]),a.M(s,s,[-1,-1,0]),a.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,d,w,C){const L=w!==void 0?w:this.bearing,B=C=C!==void 0?C:this.pitch,W=a.a0.fromLngLat(s,d),te=-Math.cos(a.ad(B)),ue=Math.sin(a.ad(B)),ge=ue*Math.sin(a.ad(L)),Ce=-ue*Math.cos(a.ad(L));let xe=this.elevation;const Ne=d-xe;let We;te*Ne>=0||Math.abs(te)<.1?(We=1e4,xe=d+We*te):We=-Ne/te;let ut,lt,ct=a.aP(1,W.y),vt=0;do{if(vt+=1,vt>10)break;lt=We/ct,ut=new a.a0(W.x+ge*lt,W.y+Ce*lt),ct=1/ut.meterInMercatorCoordinateUnits()}while(Math.abs(We-lt*ct)>1e-12);return{center:ut.toLngLat(),elevation:xe,zoom:a.aj(this.height/2/Math.tan(this.fovInRadians/2)/lt/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const d=a.ai(1,this.center.lat)*this.worldSize,w=this.cameraToCenterDistance/d,C=a.a0.fromLngLat(this.center,this.elevation),L=rt(this.center,this.elevation,this.pitch,this.bearing,w);this._elevation=s;const B=this.calculateCenterFromCameraLngLatAlt(L.toLngLat(),a.aP(L.z,C.y),this.bearing,this.pitch);this._elevation=B.elevation,this._center=B.center,this.setZoom(B.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=a.ai(1,this.center.lat)*this.worldSize;return rt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const d=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/d,s.canonical.y/d,1/d/a.$,1/d/a.$]}}class Tn{constructor(s,d){this.min=s,this.max=d,this.center=a.aQ([],a.aR([],this.min,this.max),.5)}quadrant(s){const d=[s%2==0,s<2],w=a.aS(this.min),C=a.aS(this.max);for(let L=0;L<d.length;L++)w[L]=d[L]?this.min[L]:this.center[L],C[L]=d[L]?this.center[L]:this.max[L];return C[2]=this.max[2],new Tn(w,C)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let d=!0;for(let w=0;w<s.planes.length;w++){const C=this.intersectsPlane(s.planes[w]);if(C===0)return 0;C===1&&(d=!1)}return d?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let d=s[3],w=s[3];for(let C=0;C<3;C++)s[C]>0?(d+=s[C]*this.min[C],w+=s[C]*this.max[C]):(w+=s[C]*this.min[C],d+=s[C]*this.max[C]);return d>=0?2:w<0?0:1}}class Or{distanceToTile2d(s,d,w,C){const L=C.distanceX([s,d]),B=C.distanceY([s,d]);return Math.hypot(L,B)}getWrap(s,d,w){return w}getTileBoundingVolume(s,d,w,C){var L,B;let W=w,te=w;if(C?.terrain){const ge=new a.Z(s.z,d,s.z,s.x,s.y),Ce=C.terrain.getMinMaxElevation(ge);W=(L=Ce.minElevation)!==null&&L!==void 0?L:w,te=(B=Ce.maxElevation)!==null&&B!==void 0?B:w}const ue=1<<s.z;return new Tn([d+s.x/ue,s.y/ue,W],[d+(s.x+1)/ue,(s.y+1)/ue,te])}allowVariableZoom(s,d){const w=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,C=a.ag(78.5-w/2,0,60);return!!d.terrain||s.pitch>C}allowWorldCopies(){return!0}prepareNextFrame(){}}class fn{constructor(s,d,w){this.points=s,this.planes=d,this.aabb=w}static fromInvProjectionMatrix(s,d=1,w=0,C,L){const B=L?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],W=Math.pow(2,w),te=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((xe=>(function(Ne,We,ut,lt){const ct=a.av([],Ne,We),vt=1/ct[3]/ut*lt;return a.aX(ct,ct,[vt,vt,1/ct[3],vt])})(xe,s,d,W)));C&&(function(xe,Ne,We,ut){const lt=ut?4:0,ct=ut?0:4;let vt=0;const Dt=[],It=[];for(let Pt=0;Pt<4;Pt++){const Zt=a.aT([],xe[Pt+ct],xe[Pt+lt]),_r=a.aY(Zt);a.aQ(Zt,Zt,1/_r),Dt.push(_r),It.push(Zt)}for(let Pt=0;Pt<4;Pt++){const Zt=a.aZ(xe[Pt+lt],It[Pt],We);vt=Zt!==null&&Zt>=0?Math.max(vt,Zt):Math.max(vt,Dt[Pt])}const Ft=(function(Pt,Zt){const _r=a.aT([],Pt[Zt[0]],Pt[Zt[1]]),pr=a.aT([],Pt[Zt[2]],Pt[Zt[1]]),mr=[0,0,0,0];return a.aU(mr,a.aV([],_r,pr)),mr[3]=-a.aW(mr,Pt[Zt[0]]),mr})(xe,Ne),qt=(function(Pt,Zt){const _r=a.a_(Pt),pr=a.a$([],Pt,1/_r),mr=a.aT([],Zt,a.aQ([],pr,a.aW(Zt,pr))),wr=a.a_(mr);if(wr>0){const sn=Math.sqrt(1-pr[3]*pr[3]),on=a.aQ([],pr,-pr[3]),$r=a.aR([],on,a.aQ([],mr,sn/wr));return a.b0(Zt,$r)}return null})(We,Ft);if(qt!==null){const Pt=qt/a.aW(It[0],Ft);vt=Math.min(vt,Pt)}for(let Pt=0;Pt<4;Pt++){const Zt=Math.min(vt,Dt[Pt]);xe[Pt+ct]=[xe[Pt+lt][0]+It[Pt][0]*Zt,xe[Pt+lt][1]+It[Pt][1]*Zt,xe[Pt+lt][2]+It[Pt][2]*Zt,1]}})(te,B[0],C,L);const ue=B.map((xe=>{const Ne=a.aT([],te[xe[0]],te[xe[1]]),We=a.aT([],te[xe[2]],te[xe[1]]),ut=a.aU([],a.aV([],Ne,We)),lt=-a.aW(ut,te[xe[1]]);return ut.concat(lt)})),ge=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Ce=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const xe of te)for(let Ne=0;Ne<3;Ne++)ge[Ne]=Math.min(ge[Ne],xe[Ne]),Ce[Ne]=Math.max(Ce[Ne],xe[Ne]);return new fn(te,ue,new Tn(ge,Ce))}}class ti{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,w){return this._helper.interpolatePadding(s,d,w)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,w=!0){this._helper.resize(s,d,w)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,d){}constructor(s,d,w,C,L){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(B,W)=>this.getConstrained(B,W)},s,d,w,C,L),this._coveringTilesDetailsProvider=new Or}clone(){const s=new ti;return s.apply(this),s}apply(s,d,w){this._helper.apply(s,d,w)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const d=[new a.b1(0,s)];if(this._helper._renderWorldCopies){const w=this.screenPointToMercatorCoordinate(new a.P(0,0)),C=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),L=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),B=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),W=Math.floor(Math.min(w.x,C.x,L.x,B.x)),te=Math.floor(Math.max(w.x,C.x,L.x,B.x)),ue=1;for(let ge=W-ue;ge<=te+ue;ge++)ge!==0&&d.push(new a.b1(ge,s))}return d}getCameraFrustum(){return fn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const d=this.screenPointToLocation(this.centerPoint,s),w=s?s.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(w)}setLocationAtPoint(s,d){const w=a.ai(this.elevation,this.center.lat),C=this.screenPointToMercatorCoordinateAtZ(d,w),L=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,w),B=a.a0.fromLngLat(s),W=new a.a0(B.x-(C.x-L.x),B.y-(C.y-L.y));this.setCenter(W?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,d){return d?this.coordinatePoint(a.a0.fromLngLat(s),d.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a0.fromLngLat(s))}screenPointToLocation(s,d){var w;return(w=this.screenPointToMercatorCoordinate(s,d))===null||w===void 0?void 0:w.toLngLat()}screenPointToMercatorCoordinate(s,d){if(d){const w=d.pointCoordinate(s);if(w!=null)return w}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,d){const w=d||0,C=[s.x,s.y,0,1],L=[s.x,s.y,1,1];a.av(C,C,this._pixelMatrixInverse),a.av(L,L,this._pixelMatrixInverse);const B=C[3],W=L[3],te=C[1]/B,ue=L[1]/W,ge=C[2]/B,Ce=L[2]/W,xe=ge===Ce?0:(w-ge)/(Ce-ge);return new a.a0(a.C.number(C[0]/B,L[0]/W,xe)/this.worldSize,a.C.number(te,ue,xe)/this.worldSize,w)}coordinatePoint(s,d=0,w=this._pixelMatrix){const C=[s.x*this.worldSize,s.y*this.worldSize,d,1];return a.av(C,C,w),new a.P(C[0]/C[3],C[1]/C[3])}getBounds(){const s=Math.max(0,this._helper._height/2-Be(this));return new Mt().extend(this.screenPointToLocation(new a.P(0,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(s,d){return d?d.pointCoordinate(s)!=null:s.y>this.height/2-Be(this)}calculatePosMatrix(s,d=!1,w){var C;const L=(C=s.key)!==null&&C!==void 0?C:a.b2(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),B=d?this._alignedPosMatrixCache:this._posMatrixCache;if(B.has(L)){const ue=B.get(L);return w?ue.f32:ue.f64}const W=De(s,this.worldSize);a.O(W,d?this._alignedProjMatrix:this._viewProjMatrix,W);const te={f64:W,f32:new Float32Array(W)};return B.set(L,te),w?te.f32:te.f64}calculateFogMatrix(s){const d=s.key,w=this._fogMatrixCacheF32;if(w.has(d))return w.get(d);const C=De(s,this.worldSize);return a.O(C,this._fogMatrix,C),w.set(d,new Float32Array(C)),w.get(d)}getConstrained(s,d){d=a.ag(+d,this.minZoom,this.maxZoom);const w={center:new a.S(s.lng,s.lat),zoom:d};let C=this._helper._lngRange;this._helper._renderWorldCopies||C!==null||(C=[-179.9999999999,180-1e-10]);const L=this.tileSize*a.ae(w.zoom);let B=0,W=L,te=0,ue=L,ge=0,Ce=0;const{x:xe,y:Ne}=this.size;if(this._helper._latRange){const Dt=this._helper._latRange;B=a.U(Dt[1])*L,W=a.U(Dt[0])*L,W-B<Ne&&(ge=Ne/(W-B))}C&&(te=a.aN(a.V(C[0])*L,0,L),ue=a.aN(a.V(C[1])*L,0,L),ue<te&&(ue+=L),ue-te<xe&&(Ce=xe/(ue-te)));const{x:We,y:ut}=Ct(L,s);let lt,ct;const vt=Math.max(Ce||0,ge||0);if(vt){const Dt=new a.P(Ce?(ue+te)/2:We,ge?(W+B)/2:ut);return w.center=Re(L,Dt).wrap(),w.zoom+=a.aj(vt),w}if(this._helper._latRange){const Dt=Ne/2;ut-Dt<B&&(ct=B+Dt),ut+Dt>W&&(ct=W-Dt)}if(C){const Dt=(te+ue)/2;let It=We;this._helper._renderWorldCopies&&(It=a.aN(We,Dt-L/2,Dt+L/2));const Ft=xe/2;It-Ft<te&&(lt=te+Ft),It+Ft>ue&&(lt=ue-Ft)}if(lt!==void 0||ct!==void 0){const Dt=new a.P(lt??We,ct??ut);w.center=Re(L,Dt).wrap()}return w}calculateCenterFromCameraLngLatAlt(s,d,w,C){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,w,C)}_calculateNearFarZIfNeeded(s,d,w){if(!this._helper.autoCalculateNearFarZ)return;const C=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),L=s-C*this._helper._pixelPerMeter/Math.cos(d),B=C<0?L:s,W=Math.PI/2+this.pitchInRadians,te=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+w.y/this.height),ue=Math.sin(te)*B/Math.sin(a.ag(Math.PI-W-te,.01,Math.PI-.01)),ge=Be(this),Ce=Math.atan(ge/this._helper.cameraToCenterDistance),xe=a.ad(.75),Ne=Ce>xe?2*Ce*(.5+w.y/(2*ge)):xe,We=Math.sin(Ne)*B/Math.sin(a.ag(Math.PI-W-Ne,.01,Math.PI-.01)),ut=Math.min(ue,We);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*ut+B),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,d=Ct(this.worldSize,this.center),w=d.x,C=d.y;this._helper._pixelPerMeter=a.ai(1,this.center.lat)*this.worldSize;const L=a.ad(Math.min(this.pitch,Ht)),B=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(L));let W;this._calculateNearFarZIfNeeded(B,L,s),W=new Float64Array(16),a.b3(W,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ap(this._invProjMatrix,W),W[8]=2*-s.x/this._helper._width,W[9]=2*s.y/this._helper._height,this._projectionMatrix=a.b4(W),a.N(W,W,[1,-1,1]),a.M(W,W,[0,0,-this._helper.cameraToCenterDistance]),a.b5(W,W,-this.rollInRadians),a.b6(W,W,this.pitchInRadians),a.b5(W,W,-this.bearingInRadians),a.M(W,W,[-w,-C,0]),this._mercatorMatrix=a.N([],W,[this.worldSize,this.worldSize,this.worldSize]),a.N(W,W,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,W),a.M(W,W,[0,0,-this.elevation]),this._viewProjMatrix=W,this._invViewProjMatrix=a.ap([],W);const te=[0,0,-1,1];a.av(te,te,this._invViewProjMatrix),this._cameraPosition=[te[0]/te[3],te[1]/te[3],te[2]/te[3]],this._fogMatrix=new Float64Array(16),a.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,B,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-w,-C,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,W);const ue=this._helper._width%2/2,ge=this._helper._height%2/2,Ce=Math.cos(this.bearingInRadians),xe=Math.sin(-this.bearingInRadians),Ne=w-Math.round(w)+Ce*ue+xe*ge,We=C-Math.round(C)+Ce*ge+xe*ue,ut=new Float64Array(W);if(a.M(ut,ut,[Ne>.5?Ne-1:Ne,We>.5?We-1:We,0]),this._alignedProjMatrix=ut,W=a.ap(new Float64Array(16),this._pixelMatrix),!W)throw new Error("failed to invert matrix");this._pixelMatrixInverse=W,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new a.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.av(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=a.ai(1,this.center.lat)*this.worldSize;return rt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,d){const w=a.a0.fromLngLat(s),C=[w.x*this.worldSize,w.y*this.worldSize,d,1];return a.av(C,C,this._viewProjMatrix),C[2]/C[3]}getProjectionData(s){const{overscaledTileID:d,aligned:w,applyTerrainMatrix:C}=s,L=this._helper.getMercatorTileCoordinates(d),B=d?this.calculatePosMatrix(d,w,!0):null;let W;return W=d&&d.terrainRttPosMatrix32f&&C?d.terrainRttPosMatrix32f:B||a.b7(),{mainMatrix:W,tileMercatorCoords:L,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:W}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,d,w){return 1}transformLightDirection(s){return a.aS(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,d,w,C){const L=this.calculatePosMatrix(w);let B;C?(B=[s,d,C(s,d),1],a.av(B,B,L)):(B=[s,d,0,1],oa(B,B,L));const W=B[3];return{point:new a.P(B[0]/W,B[1]/W),signedDistanceFromCamera:W,isOccluded:!1}}populateCache(s){for(const d of s)this.calculatePosMatrix(d)}getMatrixForModel(s,d){const w=a.a0.fromLngLat(s,d),C=w.meterInMercatorCoordinateUnits(),L=a.b8();return a.M(L,L,[w.x,w.y,w.z]),a.b5(L,L,Math.PI),a.b6(L,L,Math.PI/2),a.N(L,L,[-C,C,C]),L}getProjectionDataForCustomLayer(s=!0){const d=new a.Z(0,0,0,0,0),w=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:s}),C=De(d,this.worldSize);a.O(C,this._viewProjMatrix,C),w.tileMercatorCoords=[0,0,1,1];const L=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],B=a.b9();return a.N(B,C,L),w.fallbackMatrix=B,w.mainMatrix=B,w}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function Ci(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function hi(A){if(A.useSlerp)if(A.k<1){const s=a.ba(A.startEulerAngles.roll,A.startEulerAngles.pitch,A.startEulerAngles.bearing),d=a.ba(A.endEulerAngles.roll,A.endEulerAngles.pitch,A.endEulerAngles.bearing),w=new Float64Array(4);a.bb(w,s,d,A.k);const C=a.bc(w);A.tr.setRoll(C.roll),A.tr.setPitch(C.pitch),A.tr.setBearing(C.bearing)}else A.tr.setRoll(A.endEulerAngles.roll),A.tr.setPitch(A.endEulerAngles.pitch),A.tr.setBearing(A.endEulerAngles.bearing);else A.tr.setRoll(a.C.number(A.startEulerAngles.roll,A.endEulerAngles.roll,A.k)),A.tr.setPitch(a.C.number(A.startEulerAngles.pitch,A.endEulerAngles.pitch,A.k)),A.tr.setBearing(a.C.number(A.startEulerAngles.bearing,A.endEulerAngles.bearing,A.k))}function Li(A,s,d,w,C){const L=C.padding,B=Ct(C.worldSize,d.getNorthWest()),W=Ct(C.worldSize,d.getNorthEast()),te=Ct(C.worldSize,d.getSouthEast()),ue=Ct(C.worldSize,d.getSouthWest()),ge=a.ad(-w),Ce=B.rotate(ge),xe=W.rotate(ge),Ne=te.rotate(ge),We=ue.rotate(ge),ut=new a.P(Math.max(Ce.x,xe.x,We.x,Ne.x),Math.max(Ce.y,xe.y,We.y,Ne.y)),lt=new a.P(Math.min(Ce.x,xe.x,We.x,Ne.x),Math.min(Ce.y,xe.y,We.y,Ne.y)),ct=ut.sub(lt),vt=(C.width-(L.left+L.right+s.left+s.right))/ct.x,Dt=(C.height-(L.top+L.bottom+s.top+s.bottom))/ct.y;if(Dt<0||vt<0)return void Ci();const It=Math.min(a.aj(C.scale*Math.min(vt,Dt)),A.maxZoom),Ft=a.P.convert(A.offset),qt=new a.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(a.ad(w)),Pt=Ft.add(qt).mult(C.scale/a.ae(It));return{center:Re(C.worldSize,B.add(te).div(2).sub(Pt)),zoom:It,bearing:w}}class Ii{get useGlobeControls(){return!1}handlePanInertia(s,d){return{easingOffset:s,easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(s,d){s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta),s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta)}handleMapControlsPan(s,d,w){s.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(w,s.around)}cameraForBoxAndBearing(s,d,w,C,L){return Li(s,d,w,C,L)}handleJumpToCenterZoom(s,d){s.zoom!==(d.zoom!==void 0?+d.zoom:s.zoom)&&s.setZoom(+d.zoom),d.center!==void 0&&s.setCenter(a.S.convert(d.center))}handleEaseTo(s,d){const w=s.zoom,C=s.padding,L={roll:s.roll,pitch:s.pitch,bearing:s.bearing},B={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},W=d.zoom!==void 0,te=!s.isPaddingEqual(d.padding);let ue=!1;const ge=W?+d.zoom:s.zoom;let Ce=s.centerPoint.add(d.offsetAsPoint);const xe=s.screenPointToLocation(Ce),{center:Ne,zoom:We}=s.getConstrained(a.S.convert(d.center||xe),ge??w);Bn(s,Ne);const ut=Ct(s.worldSize,xe),lt=Ct(s.worldSize,Ne).sub(ut),ct=a.ae(We-w);return ue=We!==w,{easeFunc:vt=>{if(ue&&s.setZoom(a.C.number(w,We,vt)),a.bd(L,B)||hi({startEulerAngles:L,endEulerAngles:B,tr:s,k:vt,useSlerp:L.roll!=B.roll}),te&&(s.interpolatePadding(C,d.padding,vt),Ce=s.centerPoint.add(d.offsetAsPoint)),d.around)s.setLocationAtPoint(d.around,d.aroundPoint);else{const Dt=a.ae(s.zoom-w),It=We>w?Math.min(2,ct):Math.max(.5,ct),Ft=Math.pow(It,1-vt),qt=Re(s.worldSize,ut.add(lt.mult(vt*Ft)).mult(Dt));s.setLocationAtPoint(s.renderWorldCopies?qt.wrap():qt,Ce)}},isZooming:ue,elevationCenter:Ne}}handleFlyTo(s,d){const w=d.zoom!==void 0,C=s.zoom,L=s.getConstrained(a.S.convert(d.center||d.locationAtOffset),w?+d.zoom:C),B=L.center,W=L.zoom;Bn(s,B);const te=Ct(s.worldSize,d.locationAtOffset),ue=Ct(s.worldSize,B).sub(te),ge=ue.mag(),Ce=a.ae(W-C);let xe;if(d.minZoom!==void 0){const Ne=Math.min(+d.minZoom,C,W),We=s.getConstrained(B,Ne).zoom;xe=a.ae(We-C)}return{easeFunc:(Ne,We,ut,lt)=>{s.setZoom(Ne===1?W:C+a.aj(We));const ct=Ne===1?B:Re(s.worldSize,te.add(ue.mult(ut)).mult(We));s.setLocationAtPoint(s.renderWorldCopies?ct.wrap():ct,lt)},scaleOfZoom:Ce,targetCenter:B,scaleOfMinZoom:xe,pixelPathLength:ge}}}class _n{constructor(s,d,w){this.blendFunction=s,this.blendColor=d,this.mask=w}}_n.Replace=[1,0],_n.disabled=new _n(_n.Replace,a.be.transparent,[!1,!1,!1,!1]),_n.unblended=new _n(_n.Replace,a.be.transparent,[!0,!0,!0,!0]),_n.alphaBlended=new _n([1,771],a.be.transparent,[!0,!0,!0,!0]);const ka=2305;class Zn{constructor(s,d,w){this.enable=s,this.mode=d,this.frontFace=w}}Zn.disabled=new Zn(!1,1029,ka),Zn.backCCW=new Zn(!0,1029,ka),Zn.frontCCW=new Zn(!0,1028,ka);class On{constructor(s,d,w){this.func=s,this.mask=d,this.range=w}}On.ReadOnly=!1,On.ReadWrite=!0,On.disabled=new On(519,On.ReadOnly,[0,1]);const ts=7680;class bn{constructor(s,d,w,C,L,B){this.test=s,this.ref=d,this.mask=w,this.fail=C,this.depthFail=L,this.pass=B}}bn.disabled=new bn({func:519,mask:0},0,0,ts,ts,ts);const Js=new WeakMap;function wa(A){var s;if(Js.has(A))return Js.get(A);{const d=(s=A.getParameter(A.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Js.set(A,d),d}}class Ps{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const d=s.context,w=d.gl;this._texFormat=w.RGBA,this._texType=w.UNSIGNED_BYTE;const C=new a.aK;C.emplaceBack(-1,-1),C.emplaceBack(2,-1),C.emplaceBack(-1,2);const L=new a.aM;L.emplaceBack(0,1,2),this._fullscreenTriangle=new Jt(d.createVertexBuffer(C,jr.members),d.createIndexBuffer(L),a.aL.simpleSegment(0,0,C.length,L.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(w.TEXTURE1);const B=w.createTexture();w.bindTexture(w.TEXTURE_2D,B),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texImage2D(w.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(B),wa(w)&&(this._pbo=w.createBuffer(),w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.bufferData(w.PIXEL_PACK_BUFFER,4,w.STREAM_READ),w.bindBuffer(w.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,d){const w=this._updateCount;return this._readbackQueue?w>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():w>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,d=s.gl;s.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,d){const w=this._cachedRenderContext.context,C=w.gl;if(this._bindFramebuffer(),w.viewport.set([0,0,this._texWidth,this._texHeight]),w.clear({color:a.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(w,C.TRIANGLES,On.disabled,bn.disabled,_n.unblended,Zn.disabled,((L,B)=>({u_input:L,u_output_expected:B}))(s,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&wa(C)){C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.readBuffer(C.COLOR_ATTACHMENT0),C.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),C.bindBuffer(C.PIXEL_PACK_BUFFER,null);const L=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:L}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&wa(s)){const d=s.clientWaitSync(this._readbackQueue.sync,0,0);if(d===s.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ps._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let d=0;return d+=s[0]/256,d+=s[1]/65536,d+=s[2]/16777216,s[3]<127&&(d=-d),d/128}}const Ha=a.$/128;function Il(A,s){const d=A.granularity!==void 0?Math.max(A.granularity,1):1,w=d+(A.generateBorders?2:0),C=d+(A.extendToNorthPole||A.generateBorders?1:0)+(A.extendToSouthPole||A.generateBorders?1:0),L=w+1,B=C+1,W=A.generateBorders?-1:0,te=A.generateBorders||A.extendToNorthPole?-1:0,ue=d+(A.generateBorders?1:0),ge=d+(A.generateBorders||A.extendToSouthPole?1:0),Ce=L*B,xe=w*C*6,Ne=L*B>65536;if(Ne&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const We=Ne||s==="32bit",ut=new Int16Array(2*Ce);let lt=0;for(let Dt=te;Dt<=ge;Dt++)for(let It=W;It<=ue;It++){let Ft=It/d*a.$;It===-1&&(Ft=-64),It===d+1&&(Ft=a.$+Ha);let qt=Dt/d*a.$;Dt===-1&&(qt=A.extendToNorthPole?a.bg:-64),Dt===d+1&&(qt=A.extendToSouthPole?a.bh:a.$+Ha),ut[lt++]=Ft,ut[lt++]=qt}const ct=We?new Uint32Array(xe):new Uint16Array(xe);let vt=0;for(let Dt=0;Dt<C;Dt++)for(let It=0;It<w;It++){const Ft=It+1+Dt*L,qt=It+(Dt+1)*L,Pt=It+1+(Dt+1)*L;ct[vt++]=It+Dt*L,ct[vt++]=qt,ct[vt++]=Ft,ct[vt++]=Ft,ct[vt++]=qt,ct[vt++]=Pt}return{vertices:ut.buffer.slice(0),indices:ct.buffer.slice(0),uses32bitIndices:We}}const zo=new a.aJ({fill:new a.bi(128,2),line:new a.bi(512,0),tile:new a.bi(128,32),stencil:new a.bi(128,1),circle:3});class jo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return zt.projectionGlobe}get vertexShaderPreludeCode(){return zt.projectionMercator.vertexSource}get subdivisionGranularity(){return zo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new Ps(s));const d=a.U(this._errorQueryLatitudeDegrees),w=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,C=this._errorMeasurement.updateErrorLoop(d,w),L=x.now();C!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=C,this._errorMeasurementLastChangeTime=L);const B=Math.min(Math.max((L-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bk(B))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,d,w,C,L){const B=(L==="stencil"?zo.stencil:zo.tile).getGranularityForZoomLevel(d.z);return this._getMesh(s,{granularity:B,generateBorders:w,extendToNorthPole:d.y===0&&C,extendToSouthPole:d.y===(1<<d.z)-1&&C})}_getMesh(s,d){const w=this._getMeshKey(d);if(w in this._tileMeshCache)return this._tileMeshCache[w];const C=(function(L,B){const W=Il(B,"16bit"),te=a.aK.deserialize({arrayBuffer:W.vertices,length:W.vertices.byteLength/2/2}),ue=a.aM.deserialize({arrayBuffer:W.indices,length:W.indices.byteLength/2/3});return new Jt(L.createVertexBuffer(te,jr.members),L.createIndexBuffer(ue),a.aL.simpleSegment(0,0,te.length,ue.length))})(s,d);return this._tileMeshCache[w]=C,C}recalculate(s){}hasTransition(){const s=x.now();let d=!1;return d=d||(s-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const cl=new a.r({type:new a.D(a.v.projection.type)});class Is extends a.E{constructor(s){super(),this._transitionable=new a.t(cl),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new nn,this._verticalPerspectiveProjection=new jo}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof a.bl){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,d,w,C,L){return this.currentProjection.getMeshFromTileID(s,d,w,C,L)}setProjection(s){this._transitionable.setValue("type",s?.type||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function Oa(A){const s=Sa(A.worldSize,A.center.lat);return 2*Math.PI*s}function Wa(A,s,d,w,C){const L=1/(1<<C),B=s/a.$*L+w*L,W=a.bn((A/a.$*L+d*L)*Math.PI*2+Math.PI,2*Math.PI),te=2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI,ue=Math.cos(te),ge=new Float64Array(3);return ge[0]=Math.sin(W)*ue,ge[1]=Math.sin(te),ge[2]=Math.cos(W)*ue,ge}function Yi(A){return(function(s,d){const w=Math.cos(d),C=new Float64Array(3);return C[0]=Math.sin(s)*w,C[1]=Math.sin(d),C[2]=Math.cos(s)*w,C})(A.lng*Math.PI/180,A.lat*Math.PI/180)}function Sa(A,s){return A/(2*Math.PI)/Math.cos(s*Math.PI/180)}function se(A){const s=Math.asin(A[1])/Math.PI*180,d=Math.sqrt(A[0]*A[0]+A[2]*A[2]);if(d>1e-6){const w=A[0]/d,C=Math.acos(A[2]/d),L=(w>0?C:-C)/Math.PI*180;return new a.S(a.aN(L,-180,180),s)}return new a.S(0,s)}function Ge(A){return Math.cos(A*Math.PI/180)}function pt(A,s){const d=Ge(A),w=Ge(s);return a.aj(w/d)}function jt(A,s){const d=A.rotate(s.bearingInRadians),w=s.zoom+pt(s.center.lat,0),C=a.bj(1/Ge(s.center.lat),1/Ge(Math.min(Math.abs(s.center.lat),60)),a.bm(w,7,3,0,1)),L=360/Oa({worldSize:s.worldSize,center:{lat:s.center.lat}});return new a.S(s.center.lng-d.x*L*C,a.ag(s.center.lat+d.y*L,-85.051129,a.ah))}function or(A){const s=.5*A,d=Math.sin(s),w=Math.cos(s);return Math.log(d+w)-Math.log(w-d)}function Nr(A,s,d,w){const C=A.lat+d*w;if(Math.abs(d)>1){const L=(Math.sign(A.lat+d)!==Math.sign(A.lat)?-Math.abs(A.lat):Math.abs(A.lat))*Math.PI/180,B=Math.abs(A.lat+d)*Math.PI/180,W=or(L+w*(B-L)),te=or(L),ue=or(B);return new a.S(A.lng+s*((W-te)/(ue-te)),C)}return new a.S(A.lng+s*w,C)}class Xr{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,d,w,C){const L=`${s.z}_${s.x}_${s.y}_${C?.terrain?"t":""}`,B=this._cache.get(L);if(B)return B;const W=this._cachePrevious.get(L);if(W)return this._cache.set(L,W),W;const te=this._boundingVolumeFactory(s,d,w,C);return this._cache.set(L,te),this._hadAnyChanges=!0,te}}class xn{constructor(s,d,w,C){this.min=w,this.max=C,this.points=s,this.planes=d}static fromAabb(s,d){const w=[];for(let C=0;C<8;C++)w.push([1&~C?s[0]:d[0],(C>>1&1)==1?d[1]:s[1],(C>>2&1)==1?d[2]:s[2]]);return new xn(w,[[-1,0,0,d[0]],[1,0,0,-s[0]],[0,-1,0,d[1]],[0,1,0,-s[1]],[0,0,-1,d[2]],[0,0,1,-s[2]]],s,d)}static fromCenterSizeAngles(s,d,w){const C=a.bq([],w[0],w[1],w[2]),L=a.br([],[d[0],0,0],C),B=a.br([],[0,d[1],0],C),W=a.br([],[0,0,d[2]],C),te=[...s],ue=[...s];for(let Ce=0;Ce<8;Ce++)for(let xe=0;xe<3;xe++){const Ne=s[xe]+L[xe]*(1&~Ce?-1:1)+B[xe]*((Ce>>1&1)==1?1:-1)+W[xe]*((Ce>>2&1)==1?1:-1);te[xe]=Math.min(te[xe],Ne),ue[xe]=Math.max(ue[xe],Ne)}const ge=[];for(let Ce=0;Ce<8;Ce++){const xe=[...s];a.aR(xe,xe,a.aQ([],L,1&~Ce?-1:1)),a.aR(xe,xe,a.aQ([],B,(Ce>>1&1)==1?1:-1)),a.aR(xe,xe,a.aQ([],W,(Ce>>2&1)==1?1:-1)),ge.push(xe)}return new xn(ge,[[...L,-a.aW(L,ge[0])],[...B,-a.aW(B,ge[0])],[...W,-a.aW(W,ge[0])],[-L[0],-L[1],-L[2],-a.aW(L,ge[7])],[-B[0],-B[1],-B[2],-a.aW(B,ge[7])],[-W[0],-W[1],-W[2],-a.aW(W,ge[7])]],te,ue)}intersectsFrustum(s){let d=!0;const w=this.points.length,C=this.planes.length,L=s.planes.length,B=s.points.length;for(let W=0;W<L;W++){const te=s.planes[W];let ue=0;for(let ge=0;ge<w;ge++){const Ce=this.points[ge];te[0]*Ce[0]+te[1]*Ce[1]+te[2]*Ce[2]+te[3]>=0&&ue++}if(ue===0)return 0;ue<w&&(d=!1)}if(d)return 2;for(let W=0;W<C;W++){const te=this.planes[W];let ue=0;for(let ge=0;ge<B;ge++){const Ce=s.points[ge];te[0]*Ce[0]+te[1]*Ce[1]+te[2]*Ce[2]+te[3]>=0&&ue++}if(ue===0)return 0}return 1}intersectsPlane(s){const d=this.points.length;let w=0;for(let C=0;C<d;C++){const L=this.points[C];s[0]*L[0]+s[1]*L[1]+s[2]*L[2]+s[3]>=0&&w++}return w===d?2:w===0?0:1}}function Ln(A,s,d){const w=A-s;return w<0?-w:Math.max(0,w-d)}function ni(A,s,d,w,C){const L=A-d;let B;return B=L<0?Math.min(-L,1+L-C):L>1?Math.min(Math.max(L-C,0),1-L):0,Math.max(B,Ln(s,w,C))}class mi{constructor(){this._boundingVolumeCache=new Xr(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,d,w,C){const L=1<<w.z,B=1/L,W=w.x/L,te=w.y/L;let ue=2;return ue=Math.min(ue,ni(s,d,W,te,B)),ue=Math.min(ue,ni(s,d,W+.5,-te-B,B)),ue=Math.min(ue,ni(s,d,W+.5,2-te-B,B)),ue}getWrap(s,d,w){const C=1<<d.z,L=1/C,B=d.x/C,W=Ln(s.x,B,L),te=Ln(s.x,B-1,L),ue=Ln(s.x,B+1,L),ge=Math.min(W,te,ue);return ge===ue?1:ge===te?-1:0}allowVariableZoom(s,d){return Yt(s,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,d,w,C){return this._boundingVolumeCache.getTileBoundingVolume(s,d,w,C)}_computeTileBoundingVolume(s,d,w,C){var L,B;let W=w,te=w;if(C?.terrain){const ue=new a.Z(s.z,d,s.z,s.x,s.y),ge=C.terrain.getMinMaxElevation(ue);W=(L=ge.minElevation)!==null&&L!==void 0?L:w,te=(B=ge.maxElevation)!==null&&B!==void 0?B:w}if(W/=a.bt,te/=a.bt,W+=1,te+=1,s.z<=0)return xn.fromAabb([-te,-te,-te],[te,te,te]);if(s.z===1)return xn.fromAabb([s.x===0?-te:0,s.y===0?0:-te,-te],[s.x===0?0:te,s.y===0?te:0,te]);{const ue=[Wa(0,0,s.x,s.y,s.z),Wa(a.$,0,s.x,s.y,s.z),Wa(a.$,a.$,s.x,s.y,s.z),Wa(0,a.$,s.x,s.y,s.z)],ge=[];for(const mr of ue)ge.push(a.aQ([],mr,te));if(te!==W)for(const mr of ue)ge.push(a.aQ([],mr,W));s.y===0&&ge.push([0,1,0]),s.y===(1<<s.z)-1&&ge.push([0,-1,0]);const Ce=[1,1,1],xe=[-1,-1,-1];for(const mr of ge)for(let wr=0;wr<3;wr++)Ce[wr]=Math.min(Ce[wr],mr[wr]),xe[wr]=Math.max(xe[wr],mr[wr]);const Ne=Wa(a.$/2,a.$/2,s.x,s.y,s.z),We=a.aV([],[0,1,0],Ne);a.aU(We,We);const ut=a.aV([],Ne,We);a.aU(ut,ut);const lt=a.aV([],ue[2],ue[1]);a.aU(lt,lt);const ct=a.aV([],ue[0],ue[3]);a.aU(ct,ct),ge.push(a.aQ([],Ne,te)),s.y>=(1<<s.z)/2&&ge.push(a.aQ([],Wa(a.$/2,0,s.x,s.y,s.z),te)),s.y<(1<<s.z)/2&&ge.push(a.aQ([],Wa(a.$/2,a.$,s.x,s.y,s.z),te));const vt=ri(Ne,ge),Dt=ri(ut,ge),It=[-Ne[0],-Ne[1],-Ne[2],vt.max],Ft=[Ne[0],Ne[1],Ne[2],-vt.min],qt=[-ut[0],-ut[1],-ut[2],Dt.max],Pt=[ut[0],ut[1],ut[2],-Dt.min],Zt=[...lt,0],_r=[...ct,0],pr=[];return s.y===0?pr.push(a.bs(_r,Zt,It),a.bs(_r,Zt,Ft)):pr.push(a.bs(qt,Zt,It),a.bs(qt,Zt,Ft),a.bs(qt,_r,It),a.bs(qt,_r,Ft)),s.y===(1<<s.z)-1?pr.push(a.bs(_r,Zt,It),a.bs(_r,Zt,Ft)):pr.push(a.bs(Pt,Zt,It),a.bs(Pt,Zt,Ft),a.bs(Pt,_r,It),a.bs(Pt,_r,Ft)),new xn(pr,[It,Ft,qt,Pt,Zt,_r],Ce,xe)}}}function ri(A,s){let d=1/0,w=-1/0;for(const C of s){const L=a.aW(A,C);d=Math.min(d,L),w=Math.max(w,L)}return{min:d,max:w}}class Ri{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,w){return this._helper.interpolatePadding(s,d,w)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d){this._helper.resize(s,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=a.bu(),this._projectionMatrix=a.b8(),this._globeViewProjMatrix32f=a.b7(),this._globeViewProjMatrixNoCorrection=a.b8(),this._globeViewProjMatrixNoCorrectionInverted=a.b8(),this._globeProjMatrixInverted=a.b8(),this._cameraPosition=a.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._coveringTilesDetailsProvider=new mi}clone(){const s=new Ri;return s.apply(this),s}apply(s,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=a.bo();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:d,applyGlobeMatrix:w}=s,C=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:C,clippingPlane:this._cachedClippingPlane,projectionTransition:w?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const d=this.pitchInRadians,w=this.cameraToCenterDistance/s,C=Math.sin(d)*w,L=Math.cos(d)*w+1,B=1/Math.sqrt(C*C+L*L)*1;let W=-C,te=L;const ue=Math.sqrt(W*W+te*te);W/=ue,te/=ue;const ge=[0,W,te];a.bv(ge,ge,[0,0,0],-this.bearingInRadians),a.bw(ge,ge,[0,0,0],-1*this.center.lat*Math.PI/180),a.bx(ge,ge,[0,0,0],this.center.lng*Math.PI/180);const Ce=1/a.aY(ge);return a.aQ(ge,ge,Ce),[...ge,-B*Ce]}isLocationOccluded(s){return!this.isSurfacePointVisible(Yi(s))}transformLightDirection(s){const d=this._helper._center.lng*Math.PI/180,w=this._helper._center.lat*Math.PI/180,C=Math.cos(w),L=[Math.sin(d)*C,Math.sin(w),Math.cos(d)*C],B=[L[2],0,-L[0]],W=[0,0,0];a.aV(W,B,L),a.aU(B,B),a.aU(W,W);const te=[0,0,0];return a.aU(te,[B[0]*s[0]+W[0]*s[1]+L[0]*s[2],B[1]*s[0]+W[1]*s[1]+L[1]*s[2],B[2]*s[0]+W[2]*s[1]+L[2]*s[2]]),te}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,d,w){const C=(function(W,te,ue){const ge=1/(1<<ue.z);return new a.a0(W/a.$*ge+ue.x*ge,te/a.$*ge+ue.y*ge)})(s,d,w.canonical),L=(B=C.y,[a.bn(C.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI]);var B;return this.getCircleRadiusCorrection()/Math.cos(L[1])}projectTileCoordinates(s,d,w,C){const L=w.canonical,B=Wa(s,d,L.x,L.y,L.z),W=1+(C?C(s,d):0)/a.bt,te=[B[0]*W,B[1]*W,B[2]*W,1];a.av(te,te,this._globeViewProjMatrixNoCorrection);const ue=this._cachedClippingPlane,ge=ue[0]*B[0]+ue[1]*B[1]+ue[2]*B[2]+ue[3]<0;return{point:new a.P(te[0]/te[3],te[1]/te[3]),signedDistanceFromCamera:te[3],isOccluded:ge}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=Sa(this.worldSize,this.center.lat),d=a.b9(),w=a.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),a.b3(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const C=this.centerOffset;d[8]=2*-C.x/this._helper._width,d[9]=2*C.y/this._helper._height,this._projectionMatrix=a.b4(d),this._globeProjMatrixInverted=a.b9(),a.ap(this._globeProjMatrixInverted,d),a.M(d,d,[0,0,-this.cameraToCenterDistance]),a.b5(d,d,this.rollInRadians),a.b6(d,d,-this.pitchInRadians),a.b5(d,d,this.bearingInRadians),a.M(d,d,[0,0,-s]);const L=a.bo();L[0]=s,L[1]=s,L[2]=s,a.b6(w,d,this.center.lat*Math.PI/180),a.by(w,w,-this.center.lng*Math.PI/180),a.N(w,w,L),this._globeViewProjMatrixNoCorrection=w,a.b6(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.by(d,d,-this.center.lng*Math.PI/180),a.N(d,d,L),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),a.ap(this._globeViewProjMatrixNoCorrectionInverted,w);const B=a.bo();this._cameraPosition=a.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/s,a.bv(this._cameraPosition,this._cameraPosition,B,-this.rollInRadians),a.bw(this._cameraPosition,this._cameraPosition,B,this.pitchInRadians),a.bv(this._cameraPosition,this._cameraPosition,B,-this.bearingInRadians),a.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bw(this._cameraPosition,this._cameraPosition,B,-this.center.lat*Math.PI/180),a.bx(this._cameraPosition,this._cameraPosition,B,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const W=a.b4(this._globeViewProjMatrixNoCorrectionInverted);a.N(W,W,[1,1,-1]),this._cachedFrustum=fn.fromInvProjectionMatrix(W,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){a.w("calculateFogMatrix is not supported on globe projection.");const d=a.b9();return a.af(d),d}getVisibleUnwrappedCoordinates(s){return[new a.b1(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const w=Yi(s);a.aQ(w,w,1+d/a.bt);const C=a.bu();return a.av(C,[w[0],w[1],w[2],1],this._globeViewProjMatrixNoCorrection),C[2]/C[3]}populateCache(s){}getBounds(){const s=.5*this.width,d=.5*this.height,w=[new a.P(0,0),new a.P(s,0),new a.P(this.width,0),new a.P(this.width,d),new a.P(this.width,this.height),new a.P(s,this.height),new a.P(0,this.height),new a.P(0,d)],C=[];for(const Ce of w)C.push(this.unprojectScreenPoint(Ce));let L=0,B=0,W=0,te=0;const ue=this.center;for(const Ce of C){const xe=a.bz(ue.lng,Ce.lng),Ne=a.bz(ue.lat,Ce.lat);xe<B&&(B=xe),xe>L&&(L=xe),Ne<te&&(te=Ne),Ne>W&&(W=Ne)}const ge=[ue.lng+B,ue.lat+te,ue.lng+L,ue.lat+W];return this.isSurfacePointOnScreen([0,1,0])&&(ge[3]=90,ge[0]=-180,ge[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ge[1]=-90,ge[0]=-180,ge[2]=180),new Mt(ge)}getConstrained(s,d){const w=a.ag(s.lat,-85.051129,a.ah),C=a.ag(+d,this.minZoom+pt(0,w),this.maxZoom);return{center:new a.S(s.lng,w),zoom:C}}calculateCenterFromCameraLngLatAlt(s,d,w,C){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,w,C)}setLocationAtPoint(s,d){const w=Yi(this.unprojectScreenPoint(d)),C=Yi(s),L=a.bo();a.bA(L);const B=a.bo();a.bx(B,w,L,-this.center.lng*Math.PI/180),a.bw(B,B,L,this.center.lat*Math.PI/180);const W=C[0]*C[0]+C[2]*C[2],te=B[0]*B[0];if(W<te)return;const ue=Math.sqrt(W-te),ge=-ue,Ce=a.bB(C[0],C[2],B[0],ue),xe=a.bB(C[0],C[2],B[0],ge),Ne=a.bo();a.bx(Ne,C,L,-Ce);const We=a.bB(Ne[1],Ne[2],B[1],B[2]),ut=a.bo();a.bx(ut,C,L,-xe);const lt=a.bB(ut[1],ut[2],B[1],B[2]),ct=.5*Math.PI,vt=We>=-ct&&We<=ct,Dt=lt>=-ct&&lt<=ct;let It,Ft;if(vt&&Dt){const _r=this.center.lng*Math.PI/180,pr=this.center.lat*Math.PI/180;a.bC(Ce,_r)+a.bC(We,pr)<a.bC(xe,_r)+a.bC(lt,pr)?(It=Ce,Ft=We):(It=xe,Ft=lt)}else if(vt)It=Ce,Ft=We;else{if(!Dt)return;It=xe,Ft=lt}const qt=It/Math.PI*180,Pt=Ft/Math.PI*180,Zt=this.center.lat;this.setCenter(new a.S(qt,a.ag(Pt,-90,90))),this.setZoom(this.zoom+pt(Zt,this.center.lat))}locationToScreenPoint(s,d){const w=Yi(s);if(d){const C=d.getElevationForLngLatZoom(s,this._helper._tileZoom);a.aQ(w,w,1+C/a.bt)}return this._projectSurfacePointToScreen(w)}_projectSurfacePointToScreen(s){const d=a.bu();return a.av(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new a.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,d){if(d){const w=d.pointCoordinate(s);if(w)return w}return a.a0.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,d){var w;return(w=this.screenPointToMercatorCoordinate(s,d))===null||w===void 0?void 0:w.toLngLat()}isPointOnMapSurface(s,d){const w=this._cameraPosition,C=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(w,C)}getRayDirectionFromPixel(s){const d=a.bu();d[0]=s.x/this.width*2-1,d[1]=-1*(s.y/this.height*2-1),d[2]=1,d[3]=1,a.av(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const w=a.bo();w[0]=d[0]-this._cameraPosition[0],w[1]=d[1]-this._cameraPosition[1],w[2]=d[2]-this._cameraPosition[2];const C=a.bo();return a.aU(C,w),C}isSurfacePointVisible(s){const d=this._cachedClippingPlane;return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]+d[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const d=a.bu();return a.av(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(s,d){const w=a.aW(s,d),C=a.bo(),L=a.bo();a.aQ(L,d,w),a.aT(C,s,L);const B=1-a.aW(C,C);if(B<0)return null;const W=a.aW(s,s)-1,te=-w+(w<0?1:-1)*Math.sqrt(B),ue=W/te,ge=te;return{tMin:Math.min(ue,ge),tMax:Math.max(ue,ge)}}unprojectScreenPoint(s){const d=this._cameraPosition,w=this.getRayDirectionFromPixel(s),C=this.rayPlanetIntersection(d,w);if(C){const ge=a.bo();a.aR(ge,d,[w[0]*C.tMin,w[1]*C.tMin,w[2]*C.tMin]);const Ce=a.bo();return a.aU(Ce,ge),se(Ce)}const L=this._cachedClippingPlane,B=L[0]*w[0]+L[1]*w[1]+L[2]*w[2],W=-a.b0(L,d)/B,te=a.bo();if(W>0)a.aR(te,d,[w[0]*W,w[1]*W,w[2]*W]);else{const ge=a.bo();a.aR(ge,d,[2*w[0],2*w[1],2*w[2]]);const Ce=a.b0(this._cachedClippingPlane,ge);a.aT(te,ge,[this._cachedClippingPlane[0]*Ce,this._cachedClippingPlane[1]*Ce,this._cachedClippingPlane[2]*Ce])}const ue=(function(ge){const Ce=a.bo();return Ce[0]=ge[0]*-ge[3],Ce[1]=ge[1]*-ge[3],Ce[2]=ge[2]*-ge[3],{center:Ce,radius:Math.sqrt(1-ge[3]*ge[3])}})(L);return se((function(ge,Ce,xe){const Ne=a.bo();a.aT(Ne,xe,ge);const We=a.bo();return a.bp(We,ge,Ne,Ce/a.a_(Ne)),We})(ue.center,ue.radius,te))}getMatrixForModel(s,d){const w=a.S.convert(s),C=1/a.bt,L=a.b8();return a.by(L,L,w.lng/180*Math.PI),a.b6(L,L,-w.lat/180*Math.PI),a.M(L,L,[0,0,1+d/a.bt]),a.b6(L,L,.5*Math.PI),a.N(L,L,[C,C,C]),L}getProjectionDataForCustomLayer(s=!0){const d=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:s});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(s){}}class pi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,w){return this._helper.interpolatePadding(s,d,w)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,w=!0){this._helper.resize(s,d,w)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,d){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._globeness=1,this._mercatorTransform=new ti,this._verticalPerspectiveTransform=new Ri}clone(){const s=new pi;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const d=this._mercatorTransform.getProjectionData(s),w=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?w.mainMatrix:d.mainMatrix,clippingPlane:w.clippingPlane,tileMercatorCoords:w.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return a.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,d,w){const C=this._mercatorTransform.getPitchedTextCorrection(s,d,w),L=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,d,w);return a.bj(C,L,this._globeness)}projectTileCoordinates(s,d,w,C){return this.currentTransform.projectTileCoordinates(s,d,w,C)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){return this.currentTransform.lngLatToCameraDepth(s,d)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,d){return this.currentTransform.getConstrained(s,d)}calculateCenterFromCameraLngLatAlt(s,d,w,C){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,w,C)}setLocationAtPoint(s,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,d){return this.currentTransform.locationToScreenPoint(s,d)}screenPointToMercatorCoordinate(s,d){return this.currentTransform.screenPointToMercatorCoordinate(s,d)}screenPointToLocation(s,d){return this.currentTransform.screenPointToLocation(s,d)}isPointOnMapSurface(s,d){return this.currentTransform.isPointOnMapSurface(s,d)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,d){return this.currentTransform.getMatrixForModel(s,d)}getProjectionDataForCustomLayer(s=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return d;const w=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return w.fallbackMatrix=d.mainMatrix,w}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class yi{get useGlobeControls(){return!0}handlePanInertia(s,d){const w=jt(s,d);return Math.abs(w.lng-d.center.lng)>180&&(w.lng=d.center.lng+179.5*Math.sign(w.lng-d.center.lng)),{easingCenter:w,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,d){const w=s.around,C=d.screenPointToLocation(w);s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta);const L=d.zoom;s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta);const B=d.zoom-L;if(B===0)return;const W=a.bz(d.center.lng,C.lng),te=W/(Math.abs(W/180)+1),ue=a.bz(d.center.lat,C.lat),ge=d.getRayDirectionFromPixel(w),Ce=d.cameraPosition,xe=-1*a.aW(Ce,ge),Ne=a.bo();a.aR(Ne,Ce,[ge[0]*xe,ge[1]*xe,ge[2]*xe]);const We=a.aY(Ne)-1,ut=Math.exp(.5*-Math.max(We-.3,0)),lt=Sa(d.worldSize,d.center.lat)/Math.min(d.width,d.height),ct=a.bm(lt,.9,.5,1,.25),vt=(1-a.ae(-B))*Math.min(ut,ct),Dt=d.center.lat,It=d.zoom,Ft=new a.S(d.center.lng+te*vt,a.ag(d.center.lat+ue*vt,-85.051129,a.ah));d.setLocationAtPoint(C,w);const qt=d.center,Pt=a.bm(Math.abs(W),45,85,0,1),Zt=a.bm(lt,.75,.35,0,1),_r=Math.pow(Math.max(Pt,Zt),.25),pr=a.bz(qt.lng,Ft.lng),mr=a.bz(qt.lat,Ft.lat);d.setCenter(new a.S(qt.lng+pr*_r,qt.lat+mr*_r).wrap()),d.setZoom(It+pt(Dt,d.center.lat))}handleMapControlsPan(s,d,w){if(!s.panDelta)return;const C=d.center.lat,L=d.zoom;d.setCenter(jt(s.panDelta,d).wrap()),d.setZoom(L+pt(C,d.center.lat))}cameraForBoxAndBearing(s,d,w,C,L){const B=Li(s,d,w,C,L),W=d.left/L.width*2-1,te=(L.width-d.right)/L.width*2-1,ue=d.top/L.height*-2+1,ge=(L.height-d.bottom)/L.height*-2+1,Ce=a.bz(w.getWest(),w.getEast())<0,xe=Ce?w.getEast():w.getWest(),Ne=Ce?w.getWest():w.getEast(),We=Math.max(w.getNorth(),w.getSouth()),ut=Math.min(w.getNorth(),w.getSouth()),lt=xe+.5*a.bz(xe,Ne),ct=We+.5*a.bz(We,ut),vt=L.clone();vt.setCenter(B.center),vt.setBearing(B.bearing),vt.setPitch(0),vt.setRoll(0),vt.setZoom(B.zoom);const Dt=vt.modelViewProjectionMatrix,It=[Yi(w.getNorthWest()),Yi(w.getNorthEast()),Yi(w.getSouthWest()),Yi(w.getSouthEast()),Yi(new a.S(Ne,ct)),Yi(new a.S(xe,ct)),Yi(new a.S(lt,We)),Yi(new a.S(lt,ut))],Ft=Yi(B.center);let qt=Number.POSITIVE_INFINITY;for(const Pt of It)W<0&&(qt=yi.getLesserNonNegativeNonNull(qt,yi.solveVectorScale(Pt,Ft,Dt,"x",W))),te>0&&(qt=yi.getLesserNonNegativeNonNull(qt,yi.solveVectorScale(Pt,Ft,Dt,"x",te))),ue>0&&(qt=yi.getLesserNonNegativeNonNull(qt,yi.solveVectorScale(Pt,Ft,Dt,"y",ue))),ge<0&&(qt=yi.getLesserNonNegativeNonNull(qt,yi.solveVectorScale(Pt,Ft,Dt,"y",ge)));if(Number.isFinite(qt)&&qt!==0)return B.zoom=vt.zoom+a.aj(qt),B;Ci()}handleJumpToCenterZoom(s,d){const w=s.center.lat,C=s.getConstrained(d.center?a.S.convert(d.center):s.center,s.zoom).center;s.setCenter(C.wrap());const L=d.zoom!==void 0?+d.zoom:s.zoom+pt(w,C.lat);s.zoom!==L&&s.setZoom(L)}handleEaseTo(s,d){const w=s.zoom,C=s.center,L=s.padding,B={roll:s.roll,pitch:s.pitch,bearing:s.bearing},W={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},te=d.zoom!==void 0,ue=!s.isPaddingEqual(d.padding);let ge=!1;const Ce=d.center?a.S.convert(d.center):C,xe=s.getConstrained(Ce,w).center;Bn(s,xe);const Ne=s.clone();Ne.setCenter(xe),Ne.setZoom(te?+d.zoom:w+pt(C.lat,Ce.lat)),Ne.setBearing(d.bearing);const We=new a.P(a.ag(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),a.ag(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));Ne.setLocationAtPoint(xe,We);const ut=(d.offset&&d.offsetAsPoint.mag())>0?Ne.center:xe,lt=te?+d.zoom:w+pt(C.lat,ut.lat),ct=w+pt(C.lat,0),vt=lt+pt(ut.lat,0),Dt=a.bz(C.lng,ut.lng),It=a.bz(C.lat,ut.lat),Ft=a.ae(vt-ct);return ge=lt!==w,{easeFunc:qt=>{if(a.bd(B,W)||hi({startEulerAngles:B,endEulerAngles:W,tr:s,k:qt,useSlerp:B.roll!=W.roll}),ue&&s.interpolatePadding(L,d.padding,qt),d.around)a.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(d.around,d.aroundPoint);else{const Pt=vt>ct?Math.min(2,Ft):Math.max(.5,Ft),Zt=Math.pow(Pt,1-qt),_r=Nr(C,Dt,It,qt*Zt);s.setCenter(_r.wrap())}if(ge){const Pt=a.C.number(ct,vt,qt)+pt(0,s.center.lat);s.setZoom(Pt)}},isZooming:ge,elevationCenter:ut}}handleFlyTo(s,d){const w=d.zoom!==void 0,C=s.center,L=s.zoom,B=s.padding,W=!s.isPaddingEqual(d.padding),te=s.getConstrained(a.S.convert(d.center||d.locationAtOffset),L).center,ue=w?+d.zoom:s.zoom+pt(s.center.lat,te.lat),ge=s.clone();ge.setCenter(te),ge.setZoom(ue),ge.setBearing(d.bearing);const Ce=new a.P(a.ag(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),a.ag(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));ge.setLocationAtPoint(te,Ce);const xe=ge.center;Bn(s,xe);const Ne=(function(It,Ft,qt){const Pt=Yi(Ft),Zt=Yi(qt),_r=a.aW(Pt,Zt),pr=Math.acos(_r),mr=Oa(It);return pr/(2*Math.PI)*mr})(s,C,xe),We=L+pt(C.lat,0),ut=ue+pt(xe.lat,0),lt=a.ae(ut-We);let ct;if(typeof d.minZoom=="number"){const It=+d.minZoom+pt(xe.lat,0),Ft=Math.min(It,We,ut)+pt(0,xe.lat),qt=s.getConstrained(xe,Ft).zoom+pt(xe.lat,0);ct=a.ae(qt-We)}const vt=a.bz(C.lng,xe.lng),Dt=a.bz(C.lat,xe.lat);return{easeFunc:(It,Ft,qt,Pt)=>{const Zt=Nr(C,vt,Dt,qt);W&&s.interpolatePadding(B,d.padding,It);const _r=It===1?xe:Zt;s.setCenter(_r.wrap());const pr=We+a.aj(Ft);s.setZoom(It===1?ue:pr+pt(0,_r.lat))},scaleOfZoom:lt,targetCenter:xe,scaleOfMinZoom:ct,pixelPathLength:Ne}}static solveVectorScale(s,d,w,C,L){const B=C==="x"?[w[0],w[4],w[8],w[12]]:[w[1],w[5],w[9],w[13]],W=[w[3],w[7],w[11],w[15]],te=s[0]*B[0]+s[1]*B[1]+s[2]*B[2],ue=s[0]*W[0]+s[1]*W[1]+s[2]*W[2],ge=d[0]*B[0]+d[1]*B[1]+d[2]*B[2],Ce=d[0]*W[0]+d[1]*W[1]+d[2]*W[2];return ge+L*ue===te+L*Ce||W[3]*(te-ge)+B[3]*(Ce-ue)+te*Ce==ge*ue?null:(ge+B[3]-L*Ce-L*W[3])/(ge-te-L*Ce+L*ue)}static getLesserNonNegativeNonNull(s,d){return d!==null&&d>=0&&d<s?d:s}}class ma{constructor(s){this._globe=s,this._mercatorCameraHelper=new Ii,this._verticalPerspectiveCameraHelper=new yi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,d){return this.currentHelper.handlePanInertia(s,d)}handleMapControlsRollPitchBearingZoom(s,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,d)}handleMapControlsPan(s,d,w){this.currentHelper.handleMapControlsPan(s,d,w)}cameraForBoxAndBearing(s,d,w,C,L){return this.currentHelper.cameraForBoxAndBearing(s,d,w,C,L)}handleJumpToCenterZoom(s,d){this.currentHelper.handleJumpToCenterZoom(s,d)}handleEaseTo(s,d){return this.currentHelper.handleEaseTo(s,d)}handleFlyTo(s,d){return this.currentHelper.handleFlyTo(s,d)}}const Ji=(A,s)=>a.y(A,s&&s.filter((d=>d.identifier!=="source.canvas"))),sa=a.bD();class rs extends a.E{constructor(s,d={}){super(),this._rtlPluginLoaded=()=>{for(const w in this.sourceCaches){const C=this.sourceCaches[w].getSource().type;C!=="vector"&&C!=="geojson"||this.sourceCaches[w].reload()}},this.map=s,this.dispatcher=new Le(Me(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",((w,C)=>this.getGlyphs(w,C))),this.dispatcher.registerMessageHandler("GI",((w,C)=>this.getImages(w,C))),this.imageManager=new X,this.imageManager.setEventedParent(this),this.glyphManager=new ne(s._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new Ye,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bF()),Pr().on(br,this._rtlPluginLoaded),this.on("data",(w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;const C=this.sourceCaches[w.sourceId];if(!C)return;const L=C.getSource();if(L&&L.vectorLayerIds)for(const B in this._layers){const W=this._layers[B];W.source===L.id&&this._validateLayer(W)}}))}setGlobalStateProperty(s,d){var w,C,L;this._checkLoaded();const B=d===null?(L=(C=(w=this.stylesheet.state)===null||w===void 0?void 0:w[s])===null||C===void 0?void 0:C.default)!==null&&L!==void 0?L:null:d;if(a.bG(B,this._globalState[s]))return this;this._globalState[s]=B;const W=this._findGlobalStateAffectedSources([s]);for(const te in this.sourceCaches)W.has(te)&&(this._reloadSource(te),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const d=[];for(const C in s)!a.bG(this._globalState[C],s[C].default)&&(d.push(C),this._globalState[C]=s[C].default);const w=this._findGlobalStateAffectedSources(d);for(const C in this.sourceCaches)w.has(C)&&(this._reloadSource(C),this._changed=!0)}_findGlobalStateAffectedSources(s){if(s.length===0)return new Set;const d=new Set;for(const w in this._layers){const C=this._layers[w],L=C.getLayoutAffectingGlobalStateRefs();for(const B of s)L.has(B)&&d.add(C.source)}return d}loadURL(s,d={},w){this.fire(new a.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const C=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const L=this._loadStyleRequest;a.j(C,this._loadStyleRequest).then((B=>{this._loadStyleRequest=null,this._load(B.data,d,w)})).catch((B=>{this._loadStyleRequest=null,B&&!L.signal.aborted&&this.fire(new a.k(B))}))}loadJSON(s,d={},w){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(s,d,w)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(sa,{validate:!1})}_load(s,d,w){var C,L,B;const W=d.transformStyle?d.transformStyle(w,s):s;if(!d.validate||!Ji(this,a.z(W))){this._loaded=!0,this.stylesheet=W;for(const te in W.sources)this.addSource(te,W.sources[te],{validate:!1});W.sprite?this._loadSprite(W.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(W.glyphs),this._createLayers(),this.light=new fe(this.stylesheet.light),this._setProjectionInternal(((C=this.stylesheet.projection)===null||C===void 0?void 0:C.type)||"mercator"),this.sky=new me(this.stylesheet.sky),this.map.setTerrain((L=this.stylesheet.terrain)!==null&&L!==void 0?L:null),this.setGlobalState((B=this.stylesheet.state)!==null&&B!==void 0?B:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const s=a.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map((d=>d.id)),this._layers={},this._serializedLayers=null;for(const d of s){const w=a.bI(d);w.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=w}}_loadSprite(s,d=!1,w=void 0){let C;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(L,B,W,te){return a._(this,void 0,void 0,(function*(){const ue=z(L),ge=W>1?"@2x":"",Ce={},xe={};for(const{id:Ne,url:We}of ue){const ut=B.transformRequest(U(We,ge,".json"),"SpriteJSON");Ce[Ne]=a.j(ut,te);const lt=B.transformRequest(U(We,ge,".png"),"SpriteImage");xe[Ne]=D.getImage(lt,te)}return yield Promise.all([...Object.values(Ce),...Object.values(xe)]),(function(Ne,We){return a._(this,void 0,void 0,(function*(){const ut={};for(const lt in Ne){ut[lt]={};const ct=x.getImageCanvasContext((yield We[lt]).data),vt=(yield Ne[lt]).data;for(const Dt in vt){const{width:It,height:Ft,x:qt,y:Pt,sdf:Zt,pixelRatio:_r,stretchX:pr,stretchY:mr,content:wr,textFitWidth:sn,textFitHeight:on}=vt[Dt];ut[lt][Dt]={data:null,pixelRatio:_r,sdf:Zt,stretchX:pr,stretchY:mr,content:wr,textFitWidth:sn,textFitHeight:on,spriteData:{width:It,height:Ft,x:qt,y:Pt,context:ct}}}}return ut}))})(Ce,xe)}))})(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((L=>{if(this._spriteRequest=null,L)for(const B in L){this._spritesImagesIds[B]=[];const W=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter((te=>!(te in L))):[];for(const te of W)this.imageManager.removeImage(te),this._changedImages[te]=!0;for(const te in L[B]){const ue=B==="default"?te:`${B}:${te}`;this._spritesImagesIds[B].push(ue),ue in this.imageManager.images?this.imageManager.updateImage(ue,L[B][te],!1):this.imageManager.addImage(ue,L[B][te]),d&&(this._changedImages[ue]=!0)}}})).catch((L=>{this._spriteRequest=null,C=L,this.fire(new a.k(C))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),w&&w(C)}))}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(s){const d=this.sourceCaches[s.source];if(!d)return;const w=s.sourceLayer;if(!w)return;const C=d.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(w)===-1)&&this.fire(new a.k(new Error(`Source layer "${w}" does not exist on source "${C.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,d=!1){const w=this._serializedAllLayers();if(!s||s.length===0)return Object.values(d?a.bJ(w):w);const C=[];for(const L of s)if(w[L]){const B=d?a.bJ(w[L]):w[L];C.push(B)}return C}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const d=Object.keys(this._layers);for(const w of d){const C=this._layers[w];C.type!=="custom"&&(s[w]=C.serialize())}return s}hasTransitions(){var s,d,w;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((w=this.projection)===null||w===void 0)&&w.hasTransition())return!0;for(const C in this.sourceCaches)if(this.sourceCaches[C].hasTransition())return!0;for(const C in this._layers)if(this._layers[C].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const d=this._changed;if(d){const C=Object.keys(this._updatedLayers),L=Object.keys(this._removedLayers);(C.length||L.length)&&this._updateWorkerLayers(C,L);for(const B in this._updatedSources){const W=this._updatedSources[B];if(W==="reload")this._reloadSource(B);else{if(W!=="clear")throw new Error(`Invalid action ${W}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const w={};for(const C in this.sourceCaches){const L=this.sourceCaches[C];w[C]=L.used,L.used=!1}for(const C of this._order){const L=this._layers[C];L.recalculate(s,this._availableImages),!L.isHidden(s.zoom)&&L.source&&(this.sourceCaches[L.source].used=!0)}for(const C in w){const L=this.sourceCaches[C];!!w[C]!=!!L.used&&L.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,d&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){var w;this._checkLoaded();const C=this.serialize();if(s=d.transformStyle?d.transformStyle(C,s):s,((w=d.validate)===null||w===void 0||w)&&Ji(this,a.z(s)))return!1;(s=a.bJ(s)).layers=a.bH(s.layers);const L=a.bK(C,s),B=this._getOperationsToPerform(L);if(B.unimplemented.length>0)throw new Error(`Unimplemented: ${B.unimplemented.join(", ")}.`);if(B.operations.length===0)return!1;for(const W of B.operations)W();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const d=[],w=[];for(const C of s)switch(C.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push((()=>this.addLayer.apply(this,C.args)));break;case"removeLayer":d.push((()=>this.removeLayer.apply(this,C.args)));break;case"setPaintProperty":d.push((()=>this.setPaintProperty.apply(this,C.args)));break;case"setLayoutProperty":d.push((()=>this.setLayoutProperty.apply(this,C.args)));break;case"setFilter":d.push((()=>this.setFilter.apply(this,C.args)));break;case"addSource":d.push((()=>this.addSource.apply(this,C.args)));break;case"removeSource":d.push((()=>this.removeSource.apply(this,C.args)));break;case"setLayerZoomRange":d.push((()=>this.setLayerZoomRange.apply(this,C.args)));break;case"setLight":d.push((()=>this.setLight.apply(this,C.args)));break;case"setGeoJSONSourceData":d.push((()=>this.setGeoJSONSourceData.apply(this,C.args)));break;case"setGlyphs":d.push((()=>this.setGlyphs.apply(this,C.args)));break;case"setSprite":d.push((()=>this.setSprite.apply(this,C.args)));break;case"setTerrain":d.push((()=>this.map.setTerrain.apply(this,C.args)));break;case"setSky":d.push((()=>this.setSky.apply(this,C.args)));break;case"setProjection":this.setProjection.apply(this,C.args);break;case"setGlobalState":d.push((()=>this.setGlobalState.apply(this,C.args)));break;case"setTransition":d.push((()=>{}));break;default:w.push(C.command)}return{operations:d,unimplemented:w}}addImage(s,d){if(this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,w={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.z.source,`sources.${s}`,d,null,w))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const C=this.sourceCaches[s]=new Xt(s,d,this.dispatcher);C.style=this,C.setEventedParent(this,(()=>({isSourceLoaded:C.loaded(),source:C.serialize(),sourceId:s}))),C.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===s)return this.fire(new a.k(new Error(`Source "${s}" cannot be removed while layer "${w}" is using it.`)));const d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const w=this.sourceCaches[s].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,w={}){this._checkLoaded();const C=s.id;if(this.getLayer(C))return void this.fire(new a.k(new Error(`Layer "${C}" already exists on this map.`)));let L;if(s.type==="custom"){if(Ji(this,a.bL(s)))return;L=a.bI(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(C,s.source),s=a.bJ(s),s=a.e(s,{source:C})),this._validate(a.z.layer,`layers.${C}`,s,{arrayIndex:-1},w))return;L=a.bI(s),this._validateLayer(L),L.setEventedParent(this,{layer:{id:C}})}const B=d?this._order.indexOf(d):this._order.length;if(d&&B===-1)this.fire(new a.k(new Error(`Cannot add layer "${C}" before non-existing layer "${d}".`)));else{if(this._order.splice(B,0,C),this._layerOrderChanged=!0,this._layers[C]=L,this._removedLayers[C]&&L.source&&L.type!=="custom"){const W=this._removedLayers[C];delete this._removedLayers[C],W.type!==L.type?this._updatedSources[L.source]="clear":(this._updatedSources[L.source]="reload",this.sourceCaches[L.source].pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const w=this._order.indexOf(s);this._order.splice(w,1);const C=d?this._order.indexOf(d):this._order.length;d&&C===-1?this.fire(new a.k(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(C,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);const w=this._order.indexOf(s);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,w){this._checkLoaded();const C=this.getLayer(s);C?C.minzoom===d&&C.maxzoom===w||(d!=null&&(C.minzoom=d),w!=null&&(C.maxzoom=w),this._updateLayer(C)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,w={}){this._checkLoaded();const C=this.getLayer(s);if(C){if(!a.bG(C.filter,d))return d==null?(C.setFilter(void 0),void this._updateLayer(C)):void(this._validate(a.z.filter,`layers.${C.id}.filter`,d,null,w)||(C.setFilter(a.bJ(d)),this._updateLayer(C)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.bJ(this.getLayer(s).filter)}setLayoutProperty(s,d,w,C={}){this._checkLoaded();const L=this.getLayer(s);L?a.bG(L.getLayoutProperty(d),w)||(L.setLayoutProperty(d,w,C),this._updateLayer(L)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){const w=this.getLayer(s);if(w)return w.getLayoutProperty(d);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,w,C={}){this._checkLoaded();const L=this.getLayer(s);L?a.bG(L.getPaintProperty(d),w)||(L.setPaintProperty(d,w,C)&&this._updateLayer(L),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const w=s.source,C=s.sourceLayer,L=this.sourceCaches[w];if(L===void 0)return void this.fire(new a.k(new Error(`The source '${w}' does not exist in the map's style.`)));const B=L.getSource().type;B==="geojson"&&C?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||C?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),L.setFeatureState(C,s.id,d)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();const w=s.source,C=this.sourceCaches[w];if(C===void 0)return void this.fire(new a.k(new Error(`The source '${w}' does not exist in the map's style.`)));const L=C.getSource().type,B=L==="vector"?s.sourceLayer:void 0;L!=="vector"||B?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(B,s.id,d):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const d=s.source,w=s.sourceLayer,C=this.sourceCaches[d];if(C!==void 0)return C.getSource().type!=="vector"||w?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),C.getFeatureState(w,s.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.bM(this.sourceCaches,(L=>L.serialize())),d=this._serializeByIds(this._order,!0),w=this.map.getTerrain()||void 0,C=this.stylesheet;return a.bN({version:C.version,name:C.name,metadata:C.metadata,light:C.light,sky:C.sky,center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,sprite:C.sprite,glyphs:C.glyphs,transition:C.transition,projection:C.projection,sources:s,layers:d,terrain:w},(L=>L!==void 0))}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const d=B=>this._layers[B].type==="fill-extrusion",w={},C=[];for(let B=this._order.length-1;B>=0;B--){const W=this._order[B];if(d(W)){w[W]=B;for(const te of s){const ue=te[W];if(ue)for(const ge of ue)C.push(ge)}}}C.sort(((B,W)=>W.intersectionZ-B.intersectionZ));const L=[];for(let B=this._order.length-1;B>=0;B--){const W=this._order[B];if(d(W))for(let te=C.length-1;te>=0;te--){const ue=C[te].feature;if(w[ue.layer.id]<B)break;L.push(ue),C.pop()}else for(const te of s){const ue=te[W];if(ue)for(const ge of ue)L.push(ge.feature)}}return L}queryRenderedFeatures(s,d,w){d&&d.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);const C={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ue of d.layers){const ge=this._layers[ue];if(!ge)return this.fire(new a.k(new Error(`The layer '${ue}' does not exist in the map's style and cannot be queried for features.`))),[];C[ge.source]=!0}}const L=[];d.availableImages=this._availableImages;const B=this._serializedAllLayers(),W=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,te=Object.assign(Object.assign({},d),{layers:W});for(const ue in this.sourceCaches)d.layers&&!C[ue]||L.push(tt(this.sourceCaches[ue],this._layers,B,s,te,w,this.map.terrain?(ge,Ce,xe)=>this.map.terrain.getElevation(ge,Ce,xe):void 0));return this.placement&&L.push((function(ue,ge,Ce,xe,Ne,We,ut){const lt={},ct=We.queryRenderedSymbols(xe),vt=[];for(const Dt of Object.keys(ct).map(Number))vt.push(ut[Dt]);vt.sort(Ze);for(const Dt of vt){const It=Dt.featureIndex.lookupSymbolFeatures(ct[Dt.bucketInstanceId],ge,Dt.bucketIndex,Dt.sourceLayerIndex,Ne.filter,Ne.layers,Ne.availableImages,ue);for(const Ft in It){const qt=lt[Ft]=lt[Ft]||[],Pt=It[Ft];Pt.sort(((Zt,_r)=>{const pr=Dt.featureSortOrder;if(pr){const mr=pr.indexOf(Zt.featureIndex);return pr.indexOf(_r.featureIndex)-mr}return _r.featureIndex-Zt.featureIndex}));for(const Zt of Pt)qt.push(Zt)}}return(function(Dt,It,Ft){for(const qt in Dt)for(const Pt of Dt[qt])Qe(Pt,Ft[It[qt].source]);return Dt})(lt,ue,Ce)})(this._layers,B,this.sourceCaches,s,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)}querySourceFeatures(s,d){d&&d.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",d.filter,null,d);const w=this.sourceCaches[s];return w?(function(C,L){const B=C.getRenderableIds().map((ue=>C.getTileByID(ue))),W=[],te={};for(let ue=0;ue<B.length;ue++){const ge=B[ue],Ce=ge.tileID.canonical.key;te[Ce]||(te[Ce]=!0,ge.querySourceFeatures(W,L))}return W})(w,d):[]}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const w=this.light.getLight();let C=!1;for(const B in s)if(!a.bG(s[B],w[B])){C=!0;break}if(!C)return;const L={now:x.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(L)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,d={}){this._checkLoaded();const w=this.getSky();let C=!1;if(!s&&!w)return;if(s&&!w)C=!0;else if(!s&&w)C=!0;else for(const B in s)if(!a.bG(s[B],w[B])){C=!0;break}if(!C)return;const L={now:x.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,d),this.sky.updateTransitions(L)}_setProjectionInternal(s){const d=(function(w){if(Array.isArray(w)){const C=new Is({type:w});return{projection:C,transform:new pi,cameraHelper:new ma(C)}}switch(w){case"mercator":return{projection:new nn,transform:new ti,cameraHelper:new Ii};case"globe":{const C=new Is({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:C,transform:new pi,cameraHelper:new ma(C)}}case"vertical-perspective":return{projection:new jo,transform:new Ri,cameraHelper:new yi};default:return a.w(`Unknown projection name: ${w}. Falling back to mercator projection.`),{projection:new nn,transform:new ti,cameraHelper:new Ii}}})(s);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const w in this.sourceCaches)this.sourceCaches[w].reload()}_validate(s,d,w,C,L={}){return(!L||L.validate!==!1)&&Ji(this,s.call(a.z,a.e({key:d,style:this.serialize(),value:w,styleSpec:a.v},C)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Pr().off(br,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const w=this.sourceCaches[d];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,w,C,L=!1){let B=!1,W=!1;const te={};for(const ue of this._order){const ge=this._layers[ue];if(ge.type!=="symbol")continue;if(!te[ge.source]){const xe=this.sourceCaches[ge.source];te[ge.source]=xe.getRenderableIds(!0).map((Ne=>xe.getTileByID(Ne))).sort(((Ne,We)=>We.tileID.overscaledZ-Ne.tileID.overscaledZ||(Ne.tileID.isLessThan(We.tileID)?-1:1)))}const Ce=this.crossTileSymbolIndex.addLayer(ge,te[ge.source],s.center.lng);B=B||Ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((L=L||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(x.now(),s.zoom))&&(this.pauseablePlacement=new Ks(s,this.map.terrain,this._order,L,d,w,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(x.now()),W=!0),B&&this.pauseablePlacement.placement.setStale()),W||B)for(const ue of this._order){const ge=this._layers[ue];ge.type==="symbol"&&this.placement.updateLayerOpacities(ge,te[ge.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(x.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d){return a._(this,void 0,void 0,(function*(){const w=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const C=this.sourceCaches[d.source];return C&&C.setDependencies(d.tileID.key,d.type,d.icons),w}))}getGlyphs(s,d){return a._(this,void 0,void 0,(function*(){const w=yield this.glyphManager.getGlyphs(d.stacks),C=this.sourceCaches[d.source];return C&&C.setDependencies(d.tileID.key,d.type,[""]),w}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(a.z.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,w={},C){this._checkLoaded();const L=[{id:s,url:d}],B=[...z(this.stylesheet.sprite),...L];this._validate(a.z.sprite,"sprite",B,null,w)||(this.stylesheet.sprite=B,this._loadSprite(L,!0,C))}removeSprite(s){this._checkLoaded();const d=z(this.stylesheet.sprite);if(d.find((w=>w.id===s))){if(this._spritesImagesIds[s])for(const w of this._spritesImagesIds[s])this.imageManager.removeImage(w),this._changedImages[w]=!0;d.splice(d.findIndex((w=>w.id===s)),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return z(this.stylesheet.sprite)}setSprite(s,d={},w){this._checkLoaded(),s&&this._validate(a.z.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,w):(this._unloadSprite(),w&&w(null)))}}var ks=a.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Xl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,w,C,L,B,W,te,ue){this.context=s;let ge=this.boundPaintVertexBuffers.length!==C.length;for(let Ce=0;!ge&&Ce<C.length;Ce++)this.boundPaintVertexBuffers[Ce]!==C[Ce]&&(ge=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==w||ge||this.boundIndexBuffer!==L||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==W||this.boundDynamicVertexBuffer2!==te||this.boundDynamicVertexBuffer3!==ue?this.freshBind(d,w,C,L,B,W,te,ue):(s.bindVertexArray.set(this.vao),W&&W.bind(),L&&L.dynamicDraw&&L.bind(),te&&te.bind(),ue&&ue.bind())}freshBind(s,d,w,C,L,B,W,te){const ue=s.numAttributes,ge=this.context,Ce=ge.gl;this.vao&&this.destroy(),this.vao=ge.createVertexArray(),ge.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=C,this.boundVertexOffset=L,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=W,this.boundDynamicVertexBuffer3=te,d.enableAttributes(Ce,s);for(const xe of w)xe.enableAttributes(Ce,s);B&&B.enableAttributes(Ce,s),W&&W.enableAttributes(Ce,s),te&&te.enableAttributes(Ce,s),d.bind(),d.setVertexAttribPointers(Ce,s,L);for(const xe of w)xe.bind(),xe.setVertexAttribPointers(Ce,s,L);B&&(B.bind(),B.setVertexAttribPointers(Ce,s,L)),C&&C.bind(),W&&(W.bind(),W.setVertexAttribPointers(Ce,s,L)),te&&(te.bind(),te.setVertexAttribPointers(Ce,s,L)),ge.currentNumAttributes=ue}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ns=(A,s,d,w,C)=>({u_texture:0,u_ele_delta:A,u_fog_matrix:s,u_fog_color:d?d.properties.get("fog-color"):a.be.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:C?0:d?d.calculateFogBlendOpacity(w):0,u_horizon_color:d?d.properties.get("horizon-color"):a.be.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:C?1:0}),Yl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function la(A){const s=[];for(let d=0;d<A.length;d++){if(A[d]===null)continue;const w=A[d].split(" ");s.push(w.pop())}return s}class As{constructor(s,d,w,C,L,B,W,te,ue=[]){const ge=s.gl;this.program=ge.createProgram();const Ce=la(d.staticAttributes),xe=w?w.getBinderAttributes():[],Ne=Ce.concat(xe),We=zt.prelude.staticUniforms?la(zt.prelude.staticUniforms):[],ut=W.staticUniforms?la(W.staticUniforms):[],lt=d.staticUniforms?la(d.staticUniforms):[],ct=w?w.getBinderUniforms():[],vt=We.concat(ut).concat(lt).concat(ct),Dt=[];for(const pr of vt)Dt.indexOf(pr)<0&&Dt.push(pr);const It=w?w.defines():[];wa(ge)&&It.unshift("#version 300 es"),L&&It.push("#define OVERDRAW_INSPECTOR;"),B&&It.push("#define TERRAIN3D;"),te&&It.push(te),ue&&It.push(...ue);let Ft=It.concat(zt.prelude.fragmentSource,W.fragmentSource,d.fragmentSource).join(`
`),qt=It.concat(zt.prelude.vertexSource,W.vertexSource,d.vertexSource).join(`
`);wa(ge)||(Ft=(function(pr){return pr.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Ft),qt=(function(pr){return pr.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(qt));const Pt=ge.createShader(ge.FRAGMENT_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);if(ge.shaderSource(Pt,Ft),ge.compileShader(Pt),!ge.getShaderParameter(Pt,ge.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ge.getShaderInfoLog(Pt)}`);ge.attachShader(this.program,Pt);const Zt=ge.createShader(ge.VERTEX_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);if(ge.shaderSource(Zt,qt),ge.compileShader(Zt),!ge.getShaderParameter(Zt,ge.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ge.getShaderInfoLog(Zt)}`);ge.attachShader(this.program,Zt),this.attributes={};const _r={};this.numAttributes=Ne.length;for(let pr=0;pr<this.numAttributes;pr++)Ne[pr]&&(ge.bindAttribLocation(this.program,pr,Ne[pr]),this.attributes[Ne[pr]]=pr);if(ge.linkProgram(this.program),!ge.getProgramParameter(this.program,ge.LINK_STATUS))throw new Error(`Program failed to link: ${ge.getProgramInfoLog(this.program)}`);ge.deleteShader(Zt),ge.deleteShader(Pt);for(let pr=0;pr<Dt.length;pr++){const mr=Dt[pr];if(mr&&!_r[mr]){const wr=ge.getUniformLocation(this.program,mr);wr&&(_r[mr]=wr)}}this.fixedUniforms=C(s,_r),this.terrainUniforms=((pr,mr)=>({u_depth:new a.bO(pr,mr.u_depth),u_terrain:new a.bO(pr,mr.u_terrain),u_terrain_dim:new a.bf(pr,mr.u_terrain_dim),u_terrain_matrix:new a.bQ(pr,mr.u_terrain_matrix),u_terrain_unpack:new a.bR(pr,mr.u_terrain_unpack),u_terrain_exaggeration:new a.bf(pr,mr.u_terrain_exaggeration)}))(s,_r),this.projectionUniforms=((pr,mr)=>({u_projection_matrix:new a.bQ(pr,mr.u_projection_matrix),u_projection_tile_mercator_coords:new a.bR(pr,mr.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bR(pr,mr.u_projection_clipping_plane),u_projection_transition:new a.bf(pr,mr.u_projection_transition),u_projection_fallback_matrix:new a.bQ(pr,mr.u_projection_fallback_matrix)}))(s,_r),this.binderUniforms=w?w.getUniforms(s,_r):[]}draw(s,d,w,C,L,B,W,te,ue,ge,Ce,xe,Ne,We,ut,lt,ct,vt,Dt){const It=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(w),s.setStencilMode(C),s.setColorMode(L),s.setCullFace(B),te){s.activeTexture.set(It.TEXTURE2),It.bindTexture(It.TEXTURE_2D,te.depthTexture),s.activeTexture.set(It.TEXTURE3),It.bindTexture(It.TEXTURE_2D,te.texture);for(const qt in this.terrainUniforms)this.terrainUniforms[qt].set(te[qt])}if(ue)for(const qt in ue)this.projectionUniforms[Yl[qt]].set(ue[qt]);if(W)for(const qt in this.fixedUniforms)this.fixedUniforms[qt].set(W[qt]);lt&&lt.setUniforms(s,this.binderUniforms,We,{zoom:ut});let Ft=0;switch(d){case It.LINES:Ft=2;break;case It.TRIANGLES:Ft=3;break;case It.LINE_STRIP:Ft=1}for(const qt of Ne.get()){const Pt=qt.vaos||(qt.vaos={});(Pt[ge]||(Pt[ge]=new Xl)).bind(s,this,Ce,lt?lt.getPaintVertexBuffers():[],xe,qt.vertexOffset,ct,vt,Dt),It.drawElements(d,qt.primitiveLength*Ft,It.UNSIGNED_SHORT,qt.primitiveOffset*Ft*2)}}}function kl(A,s,d){const w=1/a.aB(d,1,s.transform.tileZoom),C=Math.pow(2,d.tileID.overscaledZ),L=d.tileSize*Math.pow(2,s.transform.tileZoom)/C,B=L*(d.tileID.canonical.x+d.tileID.wrap*C),W=L*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[w,A.fromScale,A.toScale],u_fade:A.t,u_pixel_coord_upper:[B>>16,W>>16],u_pixel_coord_lower:[65535&B,65535&W]}}const is=(A,s,d,w)=>{const C=A.style.light,L=C.properties.get("position"),B=[L.x,L.y,L.z],W=a.bU();C.properties.get("anchor")==="viewport"&&a.bV(W,A.transform.bearingInRadians),a.bW(B,B,W);const te=A.transform.transformLightDirection(B),ue=C.properties.get("color");return{u_lightpos:B,u_lightpos_globe:te,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[ue.r,ue.g,ue.b],u_vertical_gradient:+s,u_opacity:d,u_fill_translate:w}},Ca=(A,s,d,w,C,L,B)=>a.e(is(A,s,d,w),kl(L,A,B),{u_height_factor:-Math.pow(2,C.overscaledZ)/B.tileSize/8}),oo=(A,s,d,w)=>a.e(kl(s,A,d),{u_fill_translate:w}),Qi=(A,s)=>({u_world:A,u_fill_translate:s}),Ms=(A,s,d,w,C)=>a.e(oo(A,s,d,C),{u_world:w}),dl=(A,s,d,w,C)=>{const L=A.transform;let B,W,te=0;if(d.paint.get("circle-pitch-alignment")==="map"){const ue=a.aB(s,1,L.zoom);B=!0,W=[ue,ue],te=ue/(a.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*C}else B=!1,W=L.pixelsToGLUnits;return{u_camera_to_center_distance:L.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+B,u_device_pixel_ratio:A.pixelRatio,u_extrude_scale:W,u_globe_extrude_scale:te,u_translate:w}},ua=A=>({u_pixel_extrude_scale:[1/A.width,1/A.height]}),Zl=A=>({u_viewport_size:[A.width,A.height]}),fl=(A,s=1)=>({u_color:A,u_overlay:0,u_overlay_scale:s}),Ls=(A,s,d,w)=>{const C=a.aB(A,1,s)/(a.$*Math.pow(2,A.tileID.overscaledZ))*2*Math.PI*w;return{u_extrude_scale:a.aB(A,1,s),u_intensity:d,u_globe_extrude_scale:C}},Fa=(A,s,d,w)=>{const C=a.L();a.bX(C,0,A.width,A.height,0,0,1);const L=A.context.gl;return{u_matrix:C,u_world:[L.drawingBufferWidth,L.drawingBufferHeight],u_image:d,u_color_ramp:w,u_opacity:s.paint.get("heatmap-opacity")}},po=(A,s,d)=>{const w=d.paint.get("hillshade-accent-color");let C;switch(d.paint.get("hillshade-method")){case"basic":C=4;break;case"combined":C=1;break;case"igor":C=2;break;case"multidirectional":C=3;break;default:C=0}const L=d.getIlluminationProperties();for(let B=0;B<L.directionRadians.length;B++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(L.directionRadians[B]+=A.transform.bearingInRadians);return{u_image:0,u_latrange:Lu(0,s.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:L.altitudeRadians,u_azimuths:L.directionRadians,u_accent:w,u_method:C,u_highlights:L.highlightColor,u_shadows:L.shadowColor}},Mu=(A,s)=>{const d=s.stride,w=a.L();return a.bX(w,0,a.$,-8192,0,0,1),a.M(w,w,[0,-8192,0]),{u_matrix:w,u_image:1,u_dimension:[d,d],u_zoom:A.overscaledZ,u_unpack:s.getUnpackVector()}};function Lu(A,s){const d=Math.pow(2,s.canonical.z),w=s.canonical.y;return[new a.a0(0,w/d).toLngLat().lat,new a.a0(0,(w+1)/d).toLngLat().lat]}const hl=(A,s)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:A.paint.get("color-relief-opacity")}),pl=(A,s,d,w)=>{const C=A.transform;return{u_translation:ml(A,s,d),u_ratio:w/a.aB(s,1,C.zoom),u_device_pixel_ratio:A.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},so=(A,s,d,w,C)=>a.e(pl(A,s,d,w),{u_image:0,u_image_height:C}),Xa=(A,s,d,w,C)=>{const L=A.transform,B=lo(s,L);return{u_translation:ml(A,s,d),u_texsize:s.imageAtlasTexture.size,u_ratio:w/a.aB(s,1,L.zoom),u_device_pixel_ratio:A.pixelRatio,u_image:0,u_scale:[B,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},Kl=(A,s,d,w,C,L)=>{const B=A.lineAtlas,W=lo(s,A.transform),te=d.layout.get("line-cap")==="round",ue=B.getDash(C.from,te),ge=B.getDash(C.to,te),Ce=ue.width*L.fromScale,xe=ge.width*L.toScale;return a.e(pl(A,s,d,w),{u_patternscale_a:[W/Ce,-ue.height/2],u_patternscale_b:[W/xe,-ge.height/2],u_sdfgamma:B.width/(256*Math.min(Ce,xe)*A.pixelRatio)/2,u_image:0,u_tex_y_a:ue.y,u_tex_y_b:ge.y,u_mix:L.t})};function lo(A,s){return 1/a.aB(A,1,s.tileZoom)}function ml(A,s,d){return a.aC(A.transform,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const xo=(A,s,d,w,C)=>{return{u_tl_parent:A,u_scale_parent:s,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(B=w.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(L=w.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:Qs(w.paint.get("raster-hue-rotate")),u_coords_top:[C[0].x,C[0].y,C[1].x,C[1].y],u_coords_bottom:[C[3].x,C[3].y,C[2].x,C[2].y]};var L,B};function Qs(A){A*=Math.PI/180;const s=Math.sin(A),d=Math.cos(A);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const ga=(A,s,d,w,C,L,B,W,te,ue,ge,Ce,xe)=>{const Ne=B.transform;return{u_is_size_zoom_constant:+(A==="constant"||A==="source"),u_is_size_feature_constant:+(A==="constant"||A==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Ne.cameraToCenterDistance,u_pitch:Ne.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:B.options.fadeDuration?B.symbolFadeChange:1,u_label_plane_matrix:W,u_coord_matrix:te,u_is_text:+ge,u_pitch_with_map:+w,u_is_along_line:C,u_is_variable_anchor:L,u_texsize:Ce,u_texture:0,u_translation:ue,u_pitched_scale:xe}},Rs=(A,s,d,w,C,L,B,W,te,ue,ge,Ce,xe,Ne)=>{const We=B.transform;return a.e(ga(A,s,d,w,C,L,B,W,te,ue,ge,Ce,Ne),{u_gamma_scale:w?Math.cos(We.pitch*Math.PI/180)*We.cameraToCenterDistance:1,u_device_pixel_ratio:B.pixelRatio,u_is_halo:1})},Ds=(A,s,d,w,C,L,B,W,te,ue,ge,Ce,xe)=>a.e(Rs(A,s,d,w,C,L,B,W,te,ue,!0,ge,0,xe),{u_texsize_icon:Ce,u_texture_icon:1}),qo=(A,s)=>({u_opacity:A,u_color:s}),Al=(A,s,d,w,C)=>a.e((function(L,B,W,te){const ue=W.imageManager.getPattern(L.from.toString()),ge=W.imageManager.getPattern(L.to.toString()),{width:Ce,height:xe}=W.imageManager.getPixelSize(),Ne=Math.pow(2,te.tileID.overscaledZ),We=te.tileSize*Math.pow(2,W.transform.tileZoom)/Ne,ut=We*(te.tileID.canonical.x+te.tileID.wrap*Ne),lt=We*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ue.tl,u_pattern_br_a:ue.br,u_pattern_tl_b:ge.tl,u_pattern_br_b:ge.br,u_texsize:[Ce,xe],u_mix:B.t,u_pattern_size_a:ue.displaySize,u_pattern_size_b:ge.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/a.aB(te,1,W.transform.tileZoom),u_pixel_coord_upper:[ut>>16,lt>>16],u_pixel_coord_lower:[65535&ut,65535&lt]}})(d,C,s,w),{u_opacity:A}),gu=(A,s)=>{},Ns={fillExtrusion:(A,s)=>({u_lightpos:new a.bS(A,s.u_lightpos),u_lightpos_globe:new a.bS(A,s.u_lightpos_globe),u_lightintensity:new a.bf(A,s.u_lightintensity),u_lightcolor:new a.bS(A,s.u_lightcolor),u_vertical_gradient:new a.bf(A,s.u_vertical_gradient),u_opacity:new a.bf(A,s.u_opacity),u_fill_translate:new a.bT(A,s.u_fill_translate)}),fillExtrusionPattern:(A,s)=>({u_lightpos:new a.bS(A,s.u_lightpos),u_lightpos_globe:new a.bS(A,s.u_lightpos_globe),u_lightintensity:new a.bf(A,s.u_lightintensity),u_lightcolor:new a.bS(A,s.u_lightcolor),u_vertical_gradient:new a.bf(A,s.u_vertical_gradient),u_height_factor:new a.bf(A,s.u_height_factor),u_opacity:new a.bf(A,s.u_opacity),u_fill_translate:new a.bT(A,s.u_fill_translate),u_image:new a.bO(A,s.u_image),u_texsize:new a.bT(A,s.u_texsize),u_pixel_coord_upper:new a.bT(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(A,s.u_pixel_coord_lower),u_scale:new a.bS(A,s.u_scale),u_fade:new a.bf(A,s.u_fade)}),fill:(A,s)=>({u_fill_translate:new a.bT(A,s.u_fill_translate)}),fillPattern:(A,s)=>({u_image:new a.bO(A,s.u_image),u_texsize:new a.bT(A,s.u_texsize),u_pixel_coord_upper:new a.bT(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(A,s.u_pixel_coord_lower),u_scale:new a.bS(A,s.u_scale),u_fade:new a.bf(A,s.u_fade),u_fill_translate:new a.bT(A,s.u_fill_translate)}),fillOutline:(A,s)=>({u_world:new a.bT(A,s.u_world),u_fill_translate:new a.bT(A,s.u_fill_translate)}),fillOutlinePattern:(A,s)=>({u_world:new a.bT(A,s.u_world),u_image:new a.bO(A,s.u_image),u_texsize:new a.bT(A,s.u_texsize),u_pixel_coord_upper:new a.bT(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(A,s.u_pixel_coord_lower),u_scale:new a.bS(A,s.u_scale),u_fade:new a.bf(A,s.u_fade),u_fill_translate:new a.bT(A,s.u_fill_translate)}),circle:(A,s)=>({u_camera_to_center_distance:new a.bf(A,s.u_camera_to_center_distance),u_scale_with_map:new a.bO(A,s.u_scale_with_map),u_pitch_with_map:new a.bO(A,s.u_pitch_with_map),u_extrude_scale:new a.bT(A,s.u_extrude_scale),u_device_pixel_ratio:new a.bf(A,s.u_device_pixel_ratio),u_globe_extrude_scale:new a.bf(A,s.u_globe_extrude_scale),u_translate:new a.bT(A,s.u_translate)}),collisionBox:(A,s)=>({u_pixel_extrude_scale:new a.bT(A,s.u_pixel_extrude_scale)}),collisionCircle:(A,s)=>({u_viewport_size:new a.bT(A,s.u_viewport_size)}),debug:(A,s)=>({u_color:new a.bP(A,s.u_color),u_overlay:new a.bO(A,s.u_overlay),u_overlay_scale:new a.bf(A,s.u_overlay_scale)}),depth:gu,clippingMask:gu,heatmap:(A,s)=>({u_extrude_scale:new a.bf(A,s.u_extrude_scale),u_intensity:new a.bf(A,s.u_intensity),u_globe_extrude_scale:new a.bf(A,s.u_globe_extrude_scale)}),heatmapTexture:(A,s)=>({u_matrix:new a.bQ(A,s.u_matrix),u_world:new a.bT(A,s.u_world),u_image:new a.bO(A,s.u_image),u_color_ramp:new a.bO(A,s.u_color_ramp),u_opacity:new a.bf(A,s.u_opacity)}),hillshade:(A,s)=>({u_image:new a.bO(A,s.u_image),u_latrange:new a.bT(A,s.u_latrange),u_exaggeration:new a.bf(A,s.u_exaggeration),u_altitudes:new a.bZ(A,s.u_altitudes),u_azimuths:new a.bZ(A,s.u_azimuths),u_accent:new a.bP(A,s.u_accent),u_method:new a.bO(A,s.u_method),u_shadows:new a.bY(A,s.u_shadows),u_highlights:new a.bY(A,s.u_highlights)}),hillshadePrepare:(A,s)=>({u_matrix:new a.bQ(A,s.u_matrix),u_image:new a.bO(A,s.u_image),u_dimension:new a.bT(A,s.u_dimension),u_zoom:new a.bf(A,s.u_zoom),u_unpack:new a.bR(A,s.u_unpack)}),colorRelief:(A,s)=>({u_image:new a.bO(A,s.u_image),u_unpack:new a.bR(A,s.u_unpack),u_dimension:new a.bT(A,s.u_dimension),u_elevation_stops:new a.bO(A,s.u_elevation_stops),u_color_stops:new a.bO(A,s.u_color_stops),u_opacity:new a.bf(A,s.u_opacity)}),line:(A,s)=>({u_translation:new a.bT(A,s.u_translation),u_ratio:new a.bf(A,s.u_ratio),u_device_pixel_ratio:new a.bf(A,s.u_device_pixel_ratio),u_units_to_pixels:new a.bT(A,s.u_units_to_pixels)}),lineGradient:(A,s)=>({u_translation:new a.bT(A,s.u_translation),u_ratio:new a.bf(A,s.u_ratio),u_device_pixel_ratio:new a.bf(A,s.u_device_pixel_ratio),u_units_to_pixels:new a.bT(A,s.u_units_to_pixels),u_image:new a.bO(A,s.u_image),u_image_height:new a.bf(A,s.u_image_height)}),linePattern:(A,s)=>({u_translation:new a.bT(A,s.u_translation),u_texsize:new a.bT(A,s.u_texsize),u_ratio:new a.bf(A,s.u_ratio),u_device_pixel_ratio:new a.bf(A,s.u_device_pixel_ratio),u_image:new a.bO(A,s.u_image),u_units_to_pixels:new a.bT(A,s.u_units_to_pixels),u_scale:new a.bS(A,s.u_scale),u_fade:new a.bf(A,s.u_fade)}),lineSDF:(A,s)=>({u_translation:new a.bT(A,s.u_translation),u_ratio:new a.bf(A,s.u_ratio),u_device_pixel_ratio:new a.bf(A,s.u_device_pixel_ratio),u_units_to_pixels:new a.bT(A,s.u_units_to_pixels),u_patternscale_a:new a.bT(A,s.u_patternscale_a),u_patternscale_b:new a.bT(A,s.u_patternscale_b),u_sdfgamma:new a.bf(A,s.u_sdfgamma),u_image:new a.bO(A,s.u_image),u_tex_y_a:new a.bf(A,s.u_tex_y_a),u_tex_y_b:new a.bf(A,s.u_tex_y_b),u_mix:new a.bf(A,s.u_mix)}),raster:(A,s)=>({u_tl_parent:new a.bT(A,s.u_tl_parent),u_scale_parent:new a.bf(A,s.u_scale_parent),u_buffer_scale:new a.bf(A,s.u_buffer_scale),u_fade_t:new a.bf(A,s.u_fade_t),u_opacity:new a.bf(A,s.u_opacity),u_image0:new a.bO(A,s.u_image0),u_image1:new a.bO(A,s.u_image1),u_brightness_low:new a.bf(A,s.u_brightness_low),u_brightness_high:new a.bf(A,s.u_brightness_high),u_saturation_factor:new a.bf(A,s.u_saturation_factor),u_contrast_factor:new a.bf(A,s.u_contrast_factor),u_spin_weights:new a.bS(A,s.u_spin_weights),u_coords_top:new a.bR(A,s.u_coords_top),u_coords_bottom:new a.bR(A,s.u_coords_bottom)}),symbolIcon:(A,s)=>({u_is_size_zoom_constant:new a.bO(A,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(A,s.u_is_size_feature_constant),u_size_t:new a.bf(A,s.u_size_t),u_size:new a.bf(A,s.u_size),u_camera_to_center_distance:new a.bf(A,s.u_camera_to_center_distance),u_pitch:new a.bf(A,s.u_pitch),u_rotate_symbol:new a.bO(A,s.u_rotate_symbol),u_aspect_ratio:new a.bf(A,s.u_aspect_ratio),u_fade_change:new a.bf(A,s.u_fade_change),u_label_plane_matrix:new a.bQ(A,s.u_label_plane_matrix),u_coord_matrix:new a.bQ(A,s.u_coord_matrix),u_is_text:new a.bO(A,s.u_is_text),u_pitch_with_map:new a.bO(A,s.u_pitch_with_map),u_is_along_line:new a.bO(A,s.u_is_along_line),u_is_variable_anchor:new a.bO(A,s.u_is_variable_anchor),u_texsize:new a.bT(A,s.u_texsize),u_texture:new a.bO(A,s.u_texture),u_translation:new a.bT(A,s.u_translation),u_pitched_scale:new a.bf(A,s.u_pitched_scale)}),symbolSDF:(A,s)=>({u_is_size_zoom_constant:new a.bO(A,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(A,s.u_is_size_feature_constant),u_size_t:new a.bf(A,s.u_size_t),u_size:new a.bf(A,s.u_size),u_camera_to_center_distance:new a.bf(A,s.u_camera_to_center_distance),u_pitch:new a.bf(A,s.u_pitch),u_rotate_symbol:new a.bO(A,s.u_rotate_symbol),u_aspect_ratio:new a.bf(A,s.u_aspect_ratio),u_fade_change:new a.bf(A,s.u_fade_change),u_label_plane_matrix:new a.bQ(A,s.u_label_plane_matrix),u_coord_matrix:new a.bQ(A,s.u_coord_matrix),u_is_text:new a.bO(A,s.u_is_text),u_pitch_with_map:new a.bO(A,s.u_pitch_with_map),u_is_along_line:new a.bO(A,s.u_is_along_line),u_is_variable_anchor:new a.bO(A,s.u_is_variable_anchor),u_texsize:new a.bT(A,s.u_texsize),u_texture:new a.bO(A,s.u_texture),u_gamma_scale:new a.bf(A,s.u_gamma_scale),u_device_pixel_ratio:new a.bf(A,s.u_device_pixel_ratio),u_is_halo:new a.bO(A,s.u_is_halo),u_translation:new a.bT(A,s.u_translation),u_pitched_scale:new a.bf(A,s.u_pitched_scale)}),symbolTextAndIcon:(A,s)=>({u_is_size_zoom_constant:new a.bO(A,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(A,s.u_is_size_feature_constant),u_size_t:new a.bf(A,s.u_size_t),u_size:new a.bf(A,s.u_size),u_camera_to_center_distance:new a.bf(A,s.u_camera_to_center_distance),u_pitch:new a.bf(A,s.u_pitch),u_rotate_symbol:new a.bO(A,s.u_rotate_symbol),u_aspect_ratio:new a.bf(A,s.u_aspect_ratio),u_fade_change:new a.bf(A,s.u_fade_change),u_label_plane_matrix:new a.bQ(A,s.u_label_plane_matrix),u_coord_matrix:new a.bQ(A,s.u_coord_matrix),u_is_text:new a.bO(A,s.u_is_text),u_pitch_with_map:new a.bO(A,s.u_pitch_with_map),u_is_along_line:new a.bO(A,s.u_is_along_line),u_is_variable_anchor:new a.bO(A,s.u_is_variable_anchor),u_texsize:new a.bT(A,s.u_texsize),u_texsize_icon:new a.bT(A,s.u_texsize_icon),u_texture:new a.bO(A,s.u_texture),u_texture_icon:new a.bO(A,s.u_texture_icon),u_gamma_scale:new a.bf(A,s.u_gamma_scale),u_device_pixel_ratio:new a.bf(A,s.u_device_pixel_ratio),u_is_halo:new a.bO(A,s.u_is_halo),u_translation:new a.bT(A,s.u_translation),u_pitched_scale:new a.bf(A,s.u_pitched_scale)}),background:(A,s)=>({u_opacity:new a.bf(A,s.u_opacity),u_color:new a.bP(A,s.u_color)}),backgroundPattern:(A,s)=>({u_opacity:new a.bf(A,s.u_opacity),u_image:new a.bO(A,s.u_image),u_pattern_tl_a:new a.bT(A,s.u_pattern_tl_a),u_pattern_br_a:new a.bT(A,s.u_pattern_br_a),u_pattern_tl_b:new a.bT(A,s.u_pattern_tl_b),u_pattern_br_b:new a.bT(A,s.u_pattern_br_b),u_texsize:new a.bT(A,s.u_texsize),u_mix:new a.bf(A,s.u_mix),u_pattern_size_a:new a.bT(A,s.u_pattern_size_a),u_pattern_size_b:new a.bT(A,s.u_pattern_size_b),u_scale_a:new a.bf(A,s.u_scale_a),u_scale_b:new a.bf(A,s.u_scale_b),u_pixel_coord_upper:new a.bT(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(A,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bf(A,s.u_tile_units_to_pixels)}),terrain:(A,s)=>({u_texture:new a.bO(A,s.u_texture),u_ele_delta:new a.bf(A,s.u_ele_delta),u_fog_matrix:new a.bQ(A,s.u_fog_matrix),u_fog_color:new a.bP(A,s.u_fog_color),u_fog_ground_blend:new a.bf(A,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bf(A,s.u_fog_ground_blend_opacity),u_horizon_color:new a.bP(A,s.u_horizon_color),u_horizon_fog_blend:new a.bf(A,s.u_horizon_fog_blend),u_is_globe_mode:new a.bf(A,s.u_is_globe_mode)}),terrainDepth:(A,s)=>({u_ele_delta:new a.bf(A,s.u_ele_delta)}),terrainCoords:(A,s)=>({u_texture:new a.bO(A,s.u_texture),u_terrain_coords_id:new a.bf(A,s.u_terrain_coords_id),u_ele_delta:new a.bf(A,s.u_ele_delta)}),projectionErrorMeasurement:(A,s)=>({u_input:new a.bf(A,s.u_input),u_output_expected:new a.bf(A,s.u_output_expected)}),atmosphere:(A,s)=>({u_sun_pos:new a.bS(A,s.u_sun_pos),u_atmosphere_blend:new a.bf(A,s.u_atmosphere_blend),u_globe_position:new a.bS(A,s.u_globe_position),u_globe_radius:new a.bf(A,s.u_globe_radius),u_inv_proj_matrix:new a.bQ(A,s.u_inv_proj_matrix)}),sky:(A,s)=>({u_sky_color:new a.bP(A,s.u_sky_color),u_horizon_color:new a.bP(A,s.u_horizon_color),u_horizon:new a.bT(A,s.u_horizon),u_horizon_normal:new a.bT(A,s.u_horizon_normal),u_sky_horizon_blend:new a.bf(A,s.u_sky_horizon_blend),u_sky_blend:new a.bf(A,s.u_sky_blend)})};class Ml{constructor(s,d,w){this.context=s;const C=s.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class er{constructor(s,d,w,C){this.length=d.length,this.attributes=w,this.itemSize=d.bytesPerElement,this.dynamicDraw=C,this.context=s;const L=s.gl;this.buffer=L.createBuffer(),s.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let w=0;w<this.attributes.length;w++){const C=d.attributes[this.attributes[w].name];C!==void 0&&s.enableVertexAttribArray(C)}}setVertexAttribPointers(s,d,w){for(let C=0;C<this.attributes.length;C++){const L=this.attributes[C],B=d.attributes[L.name];B!==void 0&&s.vertexAttribPointer(B,L.components,s[Jl[L.type]],!1,this.itemSize,L.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class sr{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ln extends sr{getDefault(){return a.be.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class yn extends sr{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class ui extends sr{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Sn extends sr{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class T extends sr{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class m extends sr{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class y extends sr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class P extends sr{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class j extends sr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class re extends sr{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class ye extends sr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class Ae extends sr{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Ke extends sr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class gt extends sr{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class rr extends sr{getDefault(){return a.be.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class fr extends sr{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class zr extends sr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class hn extends sr{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Mn extends sr{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class $n extends sr{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class An extends sr{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class In extends sr{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class ki extends sr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class xi extends sr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Ya extends sr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Za extends sr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Ao extends sr{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Mo extends sr{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;const w=this.gl;wa(w)?w.bindVertexArray(s):(d=w.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class gl extends sr{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Ll extends sr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Os extends sr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class as extends sr{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Ru extends as{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class os extends as{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Aa extends as{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const $o="Framebuffer is not complete";class yu{constructor(s,d,w,C,L){this.context=s,this.width=d,this.height=w;const B=s.gl,W=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new Ru(s,W),C)this.depthAttachment=L?new Aa(s,W):new os(s,W);else if(L)throw new Error("Stencil cannot be set without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error($o)}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const w=this.depthAttachment.get();w&&s.deleteRenderbuffer(w)}s.deleteFramebuffer(this.framebuffer)}}class gi{constructor(s){var d,w;if(this.gl=s,this.clearColor=new ln(this),this.clearDepth=new yn(this),this.clearStencil=new ui(this),this.colorMask=new Sn(this),this.depthMask=new T(this),this.stencilMask=new m(this),this.stencilFunc=new y(this),this.stencilOp=new P(this),this.stencilTest=new j(this),this.depthRange=new re(this),this.depthTest=new ye(this),this.depthFunc=new Ae(this),this.blend=new Ke(this),this.blendFunc=new gt(this),this.blendColor=new rr(this),this.blendEquation=new fr(this),this.cullFace=new zr(this),this.cullFaceSide=new hn(this),this.frontFace=new Mn(this),this.program=new $n(this),this.activeTexture=new An(this),this.viewport=new In(this),this.bindFramebuffer=new ki(this),this.bindRenderbuffer=new xi(this),this.bindTexture=new Ya(this),this.bindVertexBuffer=new Za(this),this.bindElementBuffer=new Ao(this),this.bindVertexArray=new Mo(this),this.pixelStoreUnpack=new gl(this),this.pixelStoreUnpackPremultiplyAlpha=new Ll(this),this.pixelStoreUnpackFlipY=new Os(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),wa(s)){this.HALF_FLOAT=s.HALF_FLOAT;const C=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=s.RGBA16F)!==null&&d!==void 0?d:C?.RGBA16F_EXT,this.RGB16F=(w=s.RGB16F)!==null&&w!==void 0?w:C?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const C=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=C?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new Ml(this,s,d)}createVertexBuffer(s,d,w){return new er(this,s,d,w)}createRenderbuffer(s,d,w){const C=this.gl,L=C.createRenderbuffer();return this.bindRenderbuffer.set(L),C.renderbufferStorage(C.RENDERBUFFER,s,d,w),this.bindRenderbuffer.set(null),L}createFramebuffer(s,d,w,C){return new yu(this,s,d,w,C)}clear({color:s,depth:d,stencil:w}){const C=this.gl;let L=0;s&&(L|=C.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(L|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),w!==void 0&&(L|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),C.clear(L)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.bG(s.blendFunction,_n.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return wa(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return wa(this.gl)?this.gl.deleteVertexArray(s):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let Rl;function Du(A,s,d,w,C){const L=A.context,B=A.transform,W=L.gl,te=A.useProgram("collisionBox"),ue=[];let ge=0,Ce=0;for(let ct=0;ct<w.length;ct++){const vt=w[ct],Dt=s.getTile(vt).getBucket(d);if(!Dt)continue;const It=C?Dt.textCollisionBox:Dt.iconCollisionBox,Ft=Dt.collisionCircleArray;Ft.length>0&&(ue.push({circleArray:Ft,circleOffset:Ce,coord:vt}),ge+=Ft.length/4,Ce=ge),It&&te.draw(L,W.LINES,On.disabled,bn.disabled,A.colorModeForRenderPass(),Zn.disabled,ua(A.transform),A.style.map.terrain&&A.style.map.terrain.getTerrainData(vt),B.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,null,A.transform.zoom,null,null,It.collisionVertexBuffer)}if(!C||!ue.length)return;const xe=A.useProgram("collisionCircle"),Ne=new a.b_;Ne.resize(4*ge),Ne._trim();let We=0;for(const ct of ue)for(let vt=0;vt<ct.circleArray.length/4;vt++){const Dt=4*vt,It=ct.circleArray[Dt+0],Ft=ct.circleArray[Dt+1],qt=ct.circleArray[Dt+2],Pt=ct.circleArray[Dt+3];Ne.emplace(We++,It,Ft,qt,Pt,0),Ne.emplace(We++,It,Ft,qt,Pt,1),Ne.emplace(We++,It,Ft,qt,Pt,2),Ne.emplace(We++,It,Ft,qt,Pt,3)}(!Rl||Rl.length<2*ge)&&(Rl=(function(ct){const vt=2*ct,Dt=new a.c0;Dt.resize(vt),Dt._trim();for(let It=0;It<vt;It++){const Ft=6*It;Dt.uint16[Ft+0]=4*It+0,Dt.uint16[Ft+1]=4*It+1,Dt.uint16[Ft+2]=4*It+2,Dt.uint16[Ft+3]=4*It+2,Dt.uint16[Ft+4]=4*It+3,Dt.uint16[Ft+5]=4*It+0}return Dt})(ge));const ut=L.createIndexBuffer(Rl,!0),lt=L.createVertexBuffer(Ne,a.b$.members,!0);for(const ct of ue){const vt=Zl(A.transform);xe.draw(L,W.TRIANGLES,On.disabled,bn.disabled,A.colorModeForRenderPass(),Zn.disabled,vt,A.style.map.terrain&&A.style.map.terrain.getTerrainData(ct.coord),null,d.id,lt,ut,a.aL.simpleSegment(0,2*ct.circleOffset,ct.circleArray.length,ct.circleArray.length/2),null,A.transform.zoom,null,null,null)}lt.destroy(),ut.destroy()}const lf=a.af(new Float32Array(16));function Gc(A,s,d,w,C,L){const{horizontalAlign:B,verticalAlign:W}=a.aG(A);return new a.P((-(B-.5)*s/C+w[0])*L,(-(W-.5)*d/C+w[1])*L)}function gm(A,s,d,w,C,L){const B=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let W=w.mult(L);d||(W=W.rotate(-C));const te=B.add(W);return ht(te.x,te.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(d){const W=qr(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(A),te=Math.atan(W.y/W.x)+(W.x<0?Math.PI:0);return A.add(w.rotate(te))}return A.add(w)}function Zh(A,s,d,w,C,L,B,W,te,ue,ge,Ce){const xe=A.text.placedSymbolArray,Ne=A.text.dynamicLayoutVertexArray,We=A.icon.dynamicLayoutVertexArray,ut={};Ne.clear();for(let lt=0;lt<xe.length;lt++){const ct=xe.get(lt),vt=ct.hidden||!ct.crossTileID||A.allowVerticalPlacement&&!ct.placedOrientation?null:w[ct.crossTileID];if(vt){const Dt=new a.P(ct.anchorX,ct.anchorY),It={getElevation:Ce,width:C.width,height:C.height,pitchedLabelPlaneMatrix:L,pitchWithMap:d,transform:C,tileAnchorPoint:Dt,translation:ue,unwrappedTileID:ge},Ft=d?Pn(Dt.x,Dt.y,It):qr(Dt.x,Dt.y,It),qt=kt(C.cameraToCenterDistance,Ft.signedDistanceFromCamera);let Pt=a.ao(A.textSizeData,W,ct)*qt/a.aA;d&&(Pt*=A.tilePixelRatio/B);const{width:Zt,height:_r,anchor:pr,textOffset:mr,textBoxScale:wr}=vt,sn=Gc(pr,Zt,_r,mr,wr,Pt),on=C.getPitchedTextCorrection(Dt.x+ue[0],Dt.y+ue[1],ge),$r=gm(Ft.point,It,s,sn,-C.bearingInRadians,on),En=A.allowVerticalPlacement&&ct.placedOrientation===a.an.vertical?Math.PI/2:0;for(let _i=0;_i<ct.numGlyphs;_i++)a.au(Ne,$r,En);te&&ct.associatedIconIndex>=0&&(ut[ct.associatedIconIndex]={shiftedAnchor:$r,angle:En})}else Ua(ct.numGlyphs,Ne)}if(te){We.clear();const lt=A.icon.placedSymbolArray;for(let ct=0;ct<lt.length;ct++){const vt=lt.get(ct);if(vt.hidden)Ua(vt.numGlyphs,We);else{const Dt=ut[ct];if(Dt)for(let It=0;It<vt.numGlyphs;It++)a.au(We,Dt.shiftedAnchor,Dt.angle);else Ua(vt.numGlyphs,We)}}A.icon.dynamicLayoutVertexBuffer.updateData(We)}A.text.dynamicLayoutVertexBuffer.updateData(Ne)}function th(A,s,d){return d.iconsInText&&s?"symbolTextAndIcon":A?"symbolSDF":"symbolIcon"}function uf(A,s,d,w,C,L,B,W,te,ue,ge,Ce,xe){const Ne=A.context,We=Ne.gl,ut=A.transform,lt=W==="map",ct=te==="map",vt=W!=="viewport"&&d.layout.get("symbol-placement")!=="point",Dt=lt&&!ct&&!vt,It=!d.layout.get("symbol-sort-key").isConstant();let Ft=!1;const qt=A.getDepthModeForSublayer(0,On.ReadOnly),Pt=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Zt=[],_r=ut.getCircleRadiusCorrection();for(const pr of w){const mr=s.getTile(pr),wr=mr.getBucket(d);if(!wr)continue;const sn=C?wr.text:wr.icon;if(!sn||!sn.segments.get().length||!sn.hasVisibleVertices)continue;const on=sn.programConfigurations.get(d.id),$r=C||wr.sdfIcons,En=C?wr.textSizeData:wr.iconSizeData,_i=ct||ut.pitch!==0,ji=A.useProgram(th($r,C,wr),on),Ma=a.am(En,ut.zoom),ea=A.style.map.terrain&&A.style.map.terrain.getTerrainData(pr);let ta,Xi,Wi,na,Wo=[0,0],Oi=null;if(C)Xi=mr.glyphAtlasTexture,Wi=We.LINEAR,ta=mr.glyphAtlasTexture.size,wr.iconsInText&&(Wo=mr.imageAtlasTexture.size,Oi=mr.imageAtlasTexture,na=_i||A.options.rotating||A.options.zooming||En.kind==="composite"||En.kind==="camera"?We.LINEAR:We.NEAREST);else{const Do=d.layout.get("icon-size").constantOr(0)!==1||wr.iconsNeedLinear;Xi=mr.imageAtlasTexture,Wi=$r||A.options.rotating||A.options.zooming||Do||_i?We.LINEAR:We.NEAREST,ta=mr.imageAtlasTexture.size}const ss=a.aB(mr,1,A.transform.zoom),Xo=un(lt,A.transform,ss),Fu=a.L();a.ap(Fu,Xo);const Ad=Te(ct,lt,A.transform,ss),Md=a.aC(ut,mr,L,B),Sc=ut.getProjectionData({overscaledTileID:pr,applyGlobeMatrix:!xe,applyTerrainMatrix:!0}),ep=Pt&&wr.hasTextData(),tp=d.layout.get("icon-text-fit")!=="none"&&ep&&wr.hasIconData();if(vt){const Do=A.style.map.terrain?(Dl,gs)=>A.style.map.terrain.getElevation(pr,Dl,gs):null,Ja=d.layout.get("text-rotation-alignment")==="map";Ur(wr,A,C,Xo,Fu,ct,ue,Ja,pr.toUnwrapped(),ut.width,ut.height,Md,Do)}const uh=C&&Pt||tp,nu=vt||uh?lf:ct?Xo:A.transform.clipSpaceToPixelsMatrix,nc=$r&&d.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ld;Ld=$r?wr.iconsInText?Ds(En.kind,Ma,Dt,ct,vt,uh,A,nu,Ad,Md,ta,Wo,_r):Rs(En.kind,Ma,Dt,ct,vt,uh,A,nu,Ad,Md,C,ta,0,_r):ga(En.kind,Ma,Dt,ct,vt,uh,A,nu,Ad,Md,C,ta,_r);const yf={program:ji,buffers:sn,uniformValues:Ld,projectionData:Sc,atlasTexture:Xi,atlasTextureIcon:Oi,atlasInterpolation:Wi,atlasInterpolationIcon:na,isSDF:$r,hasHalo:nc};if(It&&wr.canOverlap){Ft=!0;const Do=sn.segments.get();for(const Ja of Do)Zt.push({segments:new a.aL([Ja]),sortKey:Ja.sortKey,state:yf,terrainData:ea})}else Zt.push({segments:sn.segments,sortKey:0,state:yf,terrainData:ea})}Ft&&Zt.sort(((pr,mr)=>pr.sortKey-mr.sortKey));for(const pr of Zt){const mr=pr.state;if(Ne.activeTexture.set(We.TEXTURE0),mr.atlasTexture.bind(mr.atlasInterpolation,We.CLAMP_TO_EDGE),mr.atlasTextureIcon&&(Ne.activeTexture.set(We.TEXTURE1),mr.atlasTextureIcon&&mr.atlasTextureIcon.bind(mr.atlasInterpolationIcon,We.CLAMP_TO_EDGE)),mr.isSDF){const wr=mr.uniformValues;mr.hasHalo&&(wr.u_is_halo=1,wd(mr.buffers,pr.segments,d,A,mr.program,qt,ge,Ce,wr,mr.projectionData,pr.terrainData)),wr.u_is_halo=0}wd(mr.buffers,pr.segments,d,A,mr.program,qt,ge,Ce,mr.uniformValues,mr.projectionData,pr.terrainData)}}function wd(A,s,d,w,C,L,B,W,te,ue,ge){const Ce=w.context;C.draw(Ce,Ce.gl.TRIANGLES,L,B,W,Zn.backCCW,te,ge,ue,d.id,A.layoutVertexBuffer,A.indexBuffer,s,d.paint,w.transform.zoom,A.programConfigurations.get(d.id),A.dynamicLayoutVertexBuffer,A.opacityVertexBuffer)}function rh(A,s,d,w,C){const L=A.context,B=L.gl,W=bn.disabled,te=new _n([B.ONE,B.ONE],a.be.transparent,[!0,!0,!0,!0]),ue=s.getBucket(d);if(!ue)return;const ge=w.key;let Ce=d.heatmapFbos.get(ge);Ce||(Ce=Sd(L,s.tileSize,s.tileSize),d.heatmapFbos.set(ge,Ce)),L.bindFramebuffer.set(Ce.framebuffer),L.viewport.set([0,0,s.tileSize,s.tileSize]),L.clear({color:a.be.transparent});const xe=ue.programConfigurations.get(d.id),Ne=A.useProgram("heatmap",xe,!C),We=A.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ut=A.style.map.terrain.getTerrainData(w);Ne.draw(L,B.TRIANGLES,On.disabled,W,te,Zn.disabled,Ls(s,A.transform.zoom,d.paint.get("heatmap-intensity"),1),ut,We,d.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,d.paint,A.transform.zoom,xe)}function nh(A,s,d,w,C){const L=A.context,B=L.gl,W=A.transform;L.setColorMode(A.colorModeForRenderPass());const te=ih(L,s),ue=d.key,ge=s.heatmapFbos.get(ue);if(!ge)return;L.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,ge.colorAttachment.get()),L.activeTexture.set(B.TEXTURE1),te.bind(B.LINEAR,B.CLAMP_TO_EDGE);const Ce=W.getProjectionData({overscaledTileID:d,applyTerrainMatrix:C,applyGlobeMatrix:!w});A.useProgram("heatmapTexture").draw(L,B.TRIANGLES,On.disabled,bn.disabled,A.colorModeForRenderPass(),Zn.disabled,Fa(A,s,0,1),null,Ce,s.id,A.rasterBoundsBuffer,A.quadTriangleIndexBuffer,A.rasterBoundsSegments,s.paint,W.zoom),ge.destroy(),s.heatmapFbos.delete(ue)}function Sd(A,s,d){var w,C;const L=A.gl,B=L.createTexture();L.bindTexture(L.TEXTURE_2D,B),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR);const W=(w=A.HALF_FLOAT)!==null&&w!==void 0?w:L.UNSIGNED_BYTE,te=(C=A.RGBA16F)!==null&&C!==void 0?C:L.RGBA;L.texImage2D(L.TEXTURE_2D,0,te,s,d,0,L.RGBA,W,null);const ue=A.createFramebuffer(s,d,!1,!1);return ue.colorAttachment.set(B),ue}function ih(A,s){return s.colorRampTexture||(s.colorRampTexture=new a.T(A,s.colorRamp,A.gl.RGBA)),s.colorRampTexture}function Kh(A,s,d,w,C){if(!d||!w||!w.imageAtlas)return;const L=w.imageAtlas.patternPositions;let B=L[d.to.toString()],W=L[d.from.toString()];if(!B&&W&&(B=W),!W&&B&&(W=B),!B||!W){const te=C.getPaintProperty(s);B=L[te],W=L[te]}B&&W&&A.setConstantPatternPositions(B,W)}function cf(A,s,d,w,C,L,B,W){const te=A.context.gl,ue="fill-pattern",ge=d.paint.get(ue),Ce=ge&&ge.constantOr(1),xe=d.getCrossfadeParameters();let Ne,We,ut,lt,ct;const vt=A.transform,Dt=d.paint.get("fill-translate"),It=d.paint.get("fill-translate-anchor");B?(We=Ce&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ne=te.LINES):(We=Ce?"fillPattern":"fill",Ne=te.TRIANGLES);const Ft=ge.constantOr(null);for(const qt of w){const Pt=s.getTile(qt);if(Ce&&!Pt.patternsLoaded())continue;const Zt=Pt.getBucket(d);if(!Zt)continue;const _r=Zt.programConfigurations.get(d.id),pr=A.useProgram(We,_r),mr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(qt);Ce&&(A.context.activeTexture.set(te.TEXTURE0),Pt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),_r.updatePaintBuffers(xe)),Kh(_r,ue,Ft,Pt,d);const wr=vt.getProjectionData({overscaledTileID:qt,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),sn=a.aC(vt,Pt,Dt,It);if(B){lt=Zt.indexBuffer2,ct=Zt.segments2;const $r=[te.drawingBufferWidth,te.drawingBufferHeight];ut=We==="fillOutlinePattern"&&Ce?Ms(A,xe,Pt,$r,sn):Qi($r,sn)}else lt=Zt.indexBuffer,ct=Zt.segments,ut=Ce?oo(A,xe,Pt,sn):{u_fill_translate:sn};const on=A.stencilModeForClipping(qt);pr.draw(A.context,Ne,C,on,L,Zn.backCCW,ut,mr,wr,d.id,Zt.layoutVertexBuffer,lt,ct,d.paint,A.transform.zoom,_r)}}function Cd(A,s,d,w,C,L,B,W){const te=A.context,ue=te.gl,ge="fill-extrusion-pattern",Ce=d.paint.get(ge),xe=Ce.constantOr(1),Ne=d.getCrossfadeParameters(),We=d.paint.get("fill-extrusion-opacity"),ut=Ce.constantOr(null),lt=A.transform;for(const ct of w){const vt=s.getTile(ct),Dt=vt.getBucket(d);if(!Dt)continue;const It=A.style.map.terrain&&A.style.map.terrain.getTerrainData(ct),Ft=Dt.programConfigurations.get(d.id),qt=A.useProgram(xe?"fillExtrusionPattern":"fillExtrusion",Ft);xe&&(A.context.activeTexture.set(ue.TEXTURE0),vt.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Ft.updatePaintBuffers(Ne));const Pt=lt.getProjectionData({overscaledTileID:ct,applyGlobeMatrix:!W,applyTerrainMatrix:!0});Kh(Ft,ge,ut,vt,d);const Zt=a.aC(lt,vt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),_r=d.paint.get("fill-extrusion-vertical-gradient"),pr=xe?Ca(A,_r,We,Zt,ct,Ne,vt):is(A,_r,We,Zt);qt.draw(te,te.gl.TRIANGLES,C,L,B,Zn.backCCW,pr,It,Pt,d.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,d.paint,A.transform.zoom,Ft,A.style.map.terrain&&Dt.centroidVertexBuffer)}}function Ed(A,s,d,w,C,L,B,W,te){var ue;const ge=A.style.projection,Ce=A.context,xe=A.transform,Ne=Ce.gl,We=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],ut=A.useProgram("hillshade",null,!1,We),lt=!A.options.moving;for(const ct of w){const vt=s.getTile(ct),Dt=vt.fbo;if(!Dt)continue;const It=ge.getMeshFromTileID(Ce,ct.canonical,W,!0,"raster"),Ft=(ue=A.style.map.terrain)===null||ue===void 0?void 0:ue.getTerrainData(ct);Ce.activeTexture.set(Ne.TEXTURE0),Ne.bindTexture(Ne.TEXTURE_2D,Dt.colorAttachment.get());const qt=xe.getProjectionData({overscaledTileID:ct,aligned:lt,applyGlobeMatrix:!te,applyTerrainMatrix:!0});ut.draw(Ce,Ne.TRIANGLES,L,C[ct.overscaledZ],B,Zn.backCCW,po(A,vt,d),Ft,qt,d.id,It.vertexBuffer,It.indexBuffer,It.segments)}}function Hc(A,s,d,w,C,L,B,W,te){var ue;const ge=A.style.projection,Ce=A.context,xe=A.transform,Ne=Ce.gl,We=A.useProgram("colorRelief"),ut=!A.options.moving;let lt=!0;for(const ct of w){const vt=s.getTile(ct),Dt=vt.dem;if(lt){const _r=Ne.getParameter(Ne.MAX_TEXTURE_SIZE),{elevationTexture:pr,colorTexture:mr}=d.getColorRampTextures(Ce,_r,Dt.getUnpackVector());Ce.activeTexture.set(Ne.TEXTURE1),pr.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE),Ce.activeTexture.set(Ne.TEXTURE4),mr.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),lt=!1}if(!Dt||!Dt.data)continue;const It=Dt.stride,Ft=Dt.getPixels();if(Ce.activeTexture.set(Ne.TEXTURE0),Ce.pixelStoreUnpackPremultiplyAlpha.set(!1),vt.demTexture=vt.demTexture||A.getTileTexture(It),vt.demTexture){const _r=vt.demTexture;_r.update(Ft,{premultiply:!1}),_r.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE)}else vt.demTexture=new a.T(Ce,Ft,Ne.RGBA,{premultiply:!1}),vt.demTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE);const qt=ge.getMeshFromTileID(Ce,ct.canonical,W,!0,"raster"),Pt=(ue=A.style.map.terrain)===null||ue===void 0?void 0:ue.getTerrainData(ct),Zt=xe.getProjectionData({overscaledTileID:ct,aligned:ut,applyGlobeMatrix:!te,applyTerrainMatrix:!0});We.draw(Ce,Ne.TRIANGLES,L,C[ct.overscaledZ],B,Zn.backCCW,hl(d,vt.dem),Pt,Zt,d.id,qt.vertexBuffer,qt.indexBuffer,qt.segments)}}const df=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Ql(A,s,d,w,C,L,B,W,te=!1,ue=!1){const ge=w[w.length-1].overscaledZ,Ce=A.context,xe=Ce.gl,Ne=A.useProgram("raster"),We=A.transform,ut=A.style.projection,lt=A.colorModeForRenderPass(),ct=!A.options.moving;for(const vt of w){const Dt=A.getDepthModeForSublayer(vt.overscaledZ-ge,d.paint.get("raster-opacity")===1?On.ReadWrite:On.ReadOnly,xe.LESS),It=s.getTile(vt);It.registerFadeDuration(d.paint.get("raster-fade-duration"));const Ft=s.findLoadedParent(vt,0),qt=s.findLoadedSibling(vt),Pt=Dy(It,Ft||qt||null,s,d,A.transform,A.style.map.terrain);let Zt,_r;const pr=d.paint.get("raster-resampling")==="nearest"?xe.NEAREST:xe.LINEAR;Ce.activeTexture.set(xe.TEXTURE0),It.texture.bind(pr,xe.CLAMP_TO_EDGE,xe.LINEAR_MIPMAP_NEAREST),Ce.activeTexture.set(xe.TEXTURE1),Ft?(Ft.texture.bind(pr,xe.CLAMP_TO_EDGE,xe.LINEAR_MIPMAP_NEAREST),Zt=Math.pow(2,Ft.tileID.overscaledZ-It.tileID.overscaledZ),_r=[It.tileID.canonical.x*Zt%1,It.tileID.canonical.y*Zt%1]):It.texture.bind(pr,xe.CLAMP_TO_EDGE,xe.LINEAR_MIPMAP_NEAREST),It.texture.useMipmap&&Ce.extTextureFilterAnisotropic&&A.transform.pitch>20&&xe.texParameterf(xe.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax);const mr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(vt),wr=We.getProjectionData({overscaledTileID:vt,aligned:ct,applyGlobeMatrix:!ue,applyTerrainMatrix:!0}),sn=xo(_r||[0,0],Zt||1,Pt,d,W),on=ut.getMeshFromTileID(Ce,vt.canonical,L,B,"raster");Ne.draw(Ce,xe.TRIANGLES,Dt,C?C[vt.overscaledZ]:bn.disabled,lt,te?Zn.frontCCW:Zn.backCCW,sn,mr,wr,d.id,on.vertexBuffer,on.indexBuffer,on.segments)}}function Dy(A,s,d,w,C,L){const B=w.paint.get("raster-fade-duration");if(!L&&B>0){const W=x.now(),te=(W-A.timeAdded)/B,ue=s?(W-s.timeAdded)/B:-1,ge=d.getSource(),Ce=Yt(C,{tileSize:ge.tileSize,roundZoom:ge.roundZoom}),xe=!s||Math.abs(s.tileID.overscaledZ-Ce)>Math.abs(A.tileID.overscaledZ-Ce),Ne=xe&&A.refreshedUponExpiration?1:a.ag(xe?te:1-ue,0,1);return A.refreshedUponExpiration&&te>=1&&(A.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Ne}:{opacity:Ne,mix:0}}return{opacity:1,mix:0}}const ym=new a.be(1,0,0,1),ff=new a.be(0,1,0,1),Jh=new a.be(0,0,1,1),vm=new a.be(1,0,1,1),bm=new a.be(0,1,1,1);function hf(A,s,d,w){yl(A,0,s+d/2,A.transform.width,d,w)}function vu(A,s,d,w){yl(A,s-d/2,0,d,A.transform.height,w)}function yl(A,s,d,w,C,L){const B=A.context,W=B.gl;W.enable(W.SCISSOR_TEST),W.scissor(s*A.pixelRatio,d*A.pixelRatio,w*A.pixelRatio,C*A.pixelRatio),B.clear({color:L}),W.disable(W.SCISSOR_TEST)}function Nu(A,s,d){const w=A.context,C=w.gl,L=A.useProgram("debug"),B=On.disabled,W=bn.disabled,te=A.colorModeForRenderPass(),ue="$debug",ge=A.style.map.terrain&&A.style.map.terrain.getTerrainData(d);w.activeTexture.set(C.TEXTURE0);const Ce=s.getTileByID(d.key).latestRawTileData,xe=Math.floor((Ce&&Ce.byteLength||0)/1024),Ne=s.getTile(d).tileSize,We=512/Math.min(Ne,512)*(d.overscaledZ/A.transform.zoom)*.5;let ut=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ut+=` => ${d.overscaledZ}`),(function(ct,vt){ct.initDebugOverlayCanvas();const Dt=ct.debugOverlayCanvas,It=ct.context.gl,Ft=ct.debugOverlayCanvas.getContext("2d");Ft.clearRect(0,0,Dt.width,Dt.height),Ft.shadowColor="white",Ft.shadowBlur=2,Ft.lineWidth=1.5,Ft.strokeStyle="white",Ft.textBaseline="top",Ft.font="bold 36px Open Sans, sans-serif",Ft.fillText(vt,5,5),Ft.strokeText(vt,5,5),ct.debugOverlayTexture.update(Dt),ct.debugOverlayTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE)})(A,`${ut} ${xe}kB`);const lt=A.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});L.draw(w,C.TRIANGLES,B,W,_n.alphaBlended,Zn.disabled,fl(a.be.transparent,We),null,lt,ue,A.debugBuffer,A.quadTriangleIndexBuffer,A.debugSegments),L.draw(w,C.LINE_STRIP,B,W,te,Zn.disabled,fl(a.be.red),ge,lt,ue,A.debugBuffer,A.tileBorderIndexBuffer,A.debugSegments)}function uo(A,s,d,w){const{isRenderingGlobe:C}=w,L=A.context,B=L.gl,W=A.transform,te=A.colorModeForRenderPass(),ue=A.getDepthModeFor3D(),ge=A.useProgram("terrain");L.bindFramebuffer.set(null),L.viewport.set([0,0,A.width,A.height]);for(const Ce of d){const xe=s.getTerrainMesh(Ce.tileID),Ne=A.renderToTexture.getTexture(Ce),We=s.getTerrainData(Ce.tileID);L.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,Ne.texture);const ut=s.getMeshFrameDelta(W.zoom),lt=W.calculateFogMatrix(Ce.tileID.toUnwrapped()),ct=ns(ut,lt,A.style.sky,W.pitch,C),vt=W.getProjectionData({overscaledTileID:Ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ge.draw(L,B.TRIANGLES,ue,bn.disabled,te,Zn.backCCW,ct,We,vt,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments)}}function ec(A,s){if(!s.mesh){const d=new a.aK;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const w=new a.aM;w.emplaceBack(0,1,2),w.emplaceBack(0,2,3),s.mesh=new Jt(A.createVertexBuffer(d,jr.members),A.createIndexBuffer(w),a.aL.simpleSegment(0,0,d.length,w.length))}return s.mesh}class Vo{constructor(s,d){this.context=new gi(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Xt.maxUnderzooming+Xt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ye}resize(s,d,w){if(this.width=Math.floor(s*w),this.height=Math.floor(d*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const s=this.context,d=new a.aK;d.emplaceBack(0,0),d.emplaceBack(a.$,0),d.emplaceBack(0,a.$),d.emplaceBack(a.$,a.$),this.tileExtentBuffer=s.createVertexBuffer(d,jr.members),this.tileExtentSegments=a.aL.simpleSegment(0,0,4,2);const w=new a.aK;w.emplaceBack(0,0),w.emplaceBack(a.$,0),w.emplaceBack(0,a.$),w.emplaceBack(a.$,a.$),this.debugBuffer=s.createVertexBuffer(w,jr.members),this.debugSegments=a.aL.simpleSegment(0,0,4,5);const C=new a.c5;C.emplaceBack(0,0,0,0),C.emplaceBack(a.$,0,a.$,0),C.emplaceBack(0,a.$,0,a.$),C.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=s.createVertexBuffer(C,ks.members),this.rasterBoundsSegments=a.aL.simpleSegment(0,0,4,2);const L=new a.aK;L.emplaceBack(0,0),L.emplaceBack(a.$,0),L.emplaceBack(0,a.$),L.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(L,jr.members),this.rasterBoundsSegmentsPosOnly=a.aL.simpleSegment(0,0,4,5);const B=new a.aK;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(B,jr.members),this.viewportSegments=a.aL.simpleSegment(0,0,4,2);const W=new a.c6;W.emplaceBack(0),W.emplaceBack(1),W.emplaceBack(3),W.emplaceBack(2),W.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(W);const te=new a.aM;te.emplaceBack(1,0,2),te.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(te);const ue=this.context.gl;this.stencilClearMode=new bn({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO),this.tileExtentMesh=new Jt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=a.L();a.bX(w,0,this.width,this.height,0,0,1),a.N(w,w,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const C={mainMatrix:w,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:w};this.useProgram("clippingMask",null,!0).draw(s,d.TRIANGLES,On.disabled,this.stencilClearMode,_n.disabled,Zn.disabled,null,null,C,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d,w){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source,this.nextStencilID+d.length>256&&this.clearStencil();const C=this.context;C.setColorMode(_n.disabled),C.setDepthMode(On.disabled);const L={};for(const B of d)L[B.key]=this.nextStencilID++;this._renderTileMasks(L,d,w,!0),this._renderTileMasks(L,d,w,!1),this._tileClippingMaskIDs=L}_renderTileMasks(s,d,w,C){const L=this.context,B=L.gl,W=this.style.projection,te=this.transform,ue=this.useProgram("clippingMask");for(const ge of d){const Ce=s[ge.key],xe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ge),Ne=W.getMeshFromTileID(this.context,ge.canonical,C,!0,"stencil"),We=te.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!w,applyTerrainMatrix:!0});ue.draw(L,B.TRIANGLES,On.disabled,new bn({func:B.ALWAYS,mask:0},Ce,255,B.KEEP,B.KEEP,B.REPLACE),_n.disabled,w?Zn.disabled:Zn.backCCW,null,xe,We,"$clipping",Ne.vertexBuffer,Ne.indexBuffer,Ne.segments)}}_renderTilesDepthBuffer(){const s=this.context,d=s.gl,w=this.style.projection,C=this.transform,L=this.useProgram("depth"),B=this.getDepthModeFor3D(),W=Bt(C,{tileSize:C.tileSize});for(const te of W){const ue=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),ge=w.getMeshFromTileID(this.context,te.canonical,!0,!0,"raster"),Ce=C.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!0,applyTerrainMatrix:!0});L.draw(s,d.TRIANGLES,B,bn.disabled,_n.disabled,Zn.backCCW,null,ue,Ce,"$clipping",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new bn({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){const d=this.context.gl;return new bn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const d=this.context.gl,w=s.sort(((B,W)=>W.overscaledZ-B.overscaledZ)),C=w[w.length-1].overscaledZ,L=w[0].overscaledZ-C+1;if(L>1){this.currentStencilSource=void 0,this.nextStencilID+L>256&&this.clearStencil();const B={};for(let W=0;W<L;W++)B[W+C]=new bn({func:d.GEQUAL,mask:255},W+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=L,[B,w]}return[{[C]:bn.disabled},w]}stencilConfigForOverlapTwoPass(s){const d=this.context.gl,w=s.sort(((B,W)=>W.overscaledZ-B.overscaledZ)),C=w[w.length-1].overscaledZ,L=w[0].overscaledZ-C+1;if(this.clearStencil(),L>1){const B={},W={};for(let te=0;te<L;te++)B[te+C]=new bn({func:d.GREATER,mask:255},L+1+te,255,d.KEEP,d.KEEP,d.REPLACE),W[te+C]=new bn({func:d.GREATER,mask:255},1+te,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*L+1,[B,W,w]}return this.nextStencilID=3,[{[C]:new bn({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[C]:new bn({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},w]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new _n([s.CONSTANT_COLOR,s.ONE],new a.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?_n.unblended:_n.alphaBlended}getDepthModeForSublayer(s,d,w){if(!this.opaquePassEnabledForLayer())return On.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new On(w||this.context.gl.LEQUAL,d,[C,C])}getDepthModeFor3D(){return new On(this.context.gl.LEQUAL,On.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){var w,C;this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(x.now()),this.imageManager.beginFrame();const L=this.style._order,B=this.style.sourceCaches,W={},te={},ue={},ge={isRenderingToTexture:!1,isRenderingGlobe:((w=s.projection)===null||w===void 0?void 0:w.transitionState)>0};for(const xe in B){const Ne=B[xe];Ne.used&&Ne.prepare(this.context),W[xe]=Ne.getVisibleCoordinates(!1),te[xe]=W[xe].slice().reverse(),ue[xe]=Ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let xe=0;xe<L.length;xe++)if(this.style._layers[L[xe]].is3D()){this.opaquePassCutoff=xe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const xe of L){const Ne=this.style._layers[xe];if(!Ne.hasOffscreenPass()||Ne.isHidden(this.transform.zoom))continue;const We=te[Ne.source];(Ne.type==="custom"||We.length)&&this.renderLayer(this,B[Ne.source],Ne,We,ge)}if((C=this.style.projection)===null||C===void 0||C.updateGPUdependent({context:this.context,useProgram:xe=>this.useProgram(xe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?a.be.black:a.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(xe,Ne){const We=xe.context,ut=We.gl,lt=((qt,Pt,Zt)=>{const _r=Math.cos(Pt.rollInRadians),pr=Math.sin(Pt.rollInRadians),mr=Be(Pt),wr=Pt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:qt.properties.get("sky-color"),u_horizon_color:qt.properties.get("horizon-color"),u_horizon:[(Pt.width/2-mr*pr)*Zt,(Pt.height/2+mr*_r)*Zt],u_horizon_normal:[-pr,_r],u_sky_horizon_blend:qt.properties.get("sky-horizon-blend")*Pt.height/2*Zt,u_sky_blend:wr}})(Ne,xe.style.map.transform,xe.pixelRatio),ct=new On(ut.LEQUAL,On.ReadWrite,[0,1]),vt=bn.disabled,Dt=xe.colorModeForRenderPass(),It=xe.useProgram("sky"),Ft=ec(We,Ne);It.draw(We,ut.TRIANGLES,ct,vt,Dt,Zn.disabled,lt,null,void 0,"sky",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments)})(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const xe=this.style._layers[L[this.currentLayer]],Ne=B[xe.source],We=W[xe.source];this._renderTileClippingMasks(xe,We,!1),this.renderLayer(this,Ne,xe,We,ge)}this.renderPass="translucent";let Ce=!1;for(this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const xe=this.style._layers[L[this.currentLayer]],Ne=B[xe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(xe,ge))continue;this.opaquePassEnabledForLayer()||Ce||(Ce=!0,ge.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const We=(xe.type==="symbol"?ue:te)[xe.source];this._renderTileClippingMasks(xe,W[xe.source],!!this.renderToTexture),this.renderLayer(this,Ne,xe,We,ge)}if(ge.isRenderingGlobe&&(function(xe,Ne,We){const ut=xe.context,lt=ut.gl,ct=xe.useProgram("atmosphere"),vt=new On(lt.LEQUAL,On.ReadOnly,[0,1]),Dt=xe.transform,It=(function(wr,sn){const on=wr.properties.get("position"),$r=[-on.x,-on.y,-on.z],En=a.af(new Float64Array(16));return wr.properties.get("anchor")==="map"&&(a.b5(En,En,sn.rollInRadians),a.b6(En,En,-sn.pitchInRadians),a.b5(En,En,sn.bearingInRadians),a.b6(En,En,sn.center.lat*Math.PI/180),a.by(En,En,-sn.center.lng*Math.PI/180)),a.c4($r,$r,En),$r})(We,xe.transform),Ft=Dt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),qt=Ne.properties.get("atmosphere-blend")*Ft.projectionTransition;if(qt===0)return;const Pt=Sa(Dt.worldSize,Dt.center.lat),Zt=Dt.inverseProjectionMatrix,_r=new Float64Array(4);_r[3]=1,a.av(_r,_r,Dt.modelViewProjectionMatrix),_r[0]/=_r[3],_r[1]/=_r[3],_r[2]/=_r[3],_r[3]=1,a.av(_r,_r,Zt),_r[0]/=_r[3],_r[1]/=_r[3],_r[2]/=_r[3],_r[3]=1;const pr=((wr,sn,on,$r,En)=>({u_sun_pos:wr,u_atmosphere_blend:sn,u_globe_position:on,u_globe_radius:$r,u_inv_proj_matrix:En}))(It,qt,[_r[0],_r[1],_r[2]],Pt,Zt),mr=ec(ut,Ne);ct.draw(ut,lt.TRIANGLES,vt,bn.disabled,_n.alphaBlended,Zn.disabled,pr,null,null,"atmosphere",mr.vertexBuffer,mr.indexBuffer,mr.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const xe=(function(Ne,We){let ut=null;const lt=Object.values(Ne._layers).flatMap((It=>It.source&&!It.isHidden(We)?[Ne.sourceCaches[It.source]]:[])),ct=lt.filter((It=>It.getSource().type==="vector")),vt=lt.filter((It=>It.getSource().type!=="vector")),Dt=It=>{(!ut||ut.getSource().maxzoom<It.getSource().maxzoom)&&(ut=It)};return ct.forEach((It=>Dt(It))),ut||vt.forEach((It=>Dt(It))),ut})(this.style,this.transform.zoom);xe&&(function(Ne,We,ut){for(let lt=0;lt<ut.length;lt++)Nu(Ne,We,ut[lt])})(this,xe,xe.getVisibleCoordinates())}this.options.showPadding&&(function(xe){const Ne=xe.transform.padding;hf(xe,xe.transform.height-(Ne.top||0),3,ym),hf(xe,Ne.bottom||0,3,ff),vu(xe,Ne.left||0,3,Jh),vu(xe,xe.transform.width-(Ne.right||0),3,vm);const We=xe.transform.centerPoint;(function(ut,lt,ct,vt){yl(ut,lt-1,ct-10,2,20,vt),yl(ut,lt-10,ct-1,20,2,vt)})(xe,We.x,xe.transform.height-We.y,bm)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,w=this.transform.modelViewProjectionMatrix;let C=this.terrainFacilitator.dirty;C||(C=s?!a.c7(d,w):!a.c8(d,w)),C||(C=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),C&&(a.c9(d,w),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(L,B){const W=L.context,te=W.gl,ue=L.transform,ge=_n.unblended,Ce=new On(te.LEQUAL,On.ReadWrite,[0,1]),xe=B.sourceCache.getRenderableTiles(),Ne=L.useProgram("terrainDepth");W.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),W.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),W.clear({color:a.be.transparent,depth:1});for(const We of xe){const ut=B.getTerrainMesh(We.tileID),lt=B.getTerrainData(We.tileID),ct=ue.getProjectionData({overscaledTileID:We.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),vt={u_ele_delta:B.getMeshFrameDelta(ue.zoom)};Ne.draw(W,te.TRIANGLES,Ce,bn.disabled,ge,Zn.backCCW,vt,lt,ct,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments)}W.bindFramebuffer.set(null),W.viewport.set([0,0,L.width,L.height])})(this,this.style.map.terrain),(function(L,B){const W=L.context,te=W.gl,ue=L.transform,ge=_n.unblended,Ce=new On(te.LEQUAL,On.ReadWrite,[0,1]),xe=B.getCoordsTexture(),Ne=B.sourceCache.getRenderableTiles(),We=L.useProgram("terrainCoords");W.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),W.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),W.clear({color:a.be.transparent,depth:1}),B.coordsIndex=[];for(const ut of Ne){const lt=B.getTerrainMesh(ut.tileID),ct=B.getTerrainData(ut.tileID);W.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,xe.texture);const vt={u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(ue.zoom)},Dt=ue.getProjectionData({overscaledTileID:ut.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});We.draw(W,te.TRIANGLES,Ce,bn.disabled,ge,Zn.backCCW,vt,ct,Dt,"terrain",lt.vertexBuffer,lt.indexBuffer,lt.segments),B.coordsIndex.push(ut.tileID.key)}W.bindFramebuffer.set(null),W.viewport.set([0,0,L.width,L.height])})(this,this.style.map.terrain))}renderLayer(s,d,w,C,L){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||(C||[]).length)&&(this.id=w.id,a.ca(w)?(function(B,W,te,ue,ge,Ce){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:xe}=Ce,Ne=bn.disabled,We=B.colorModeForRenderPass();(te._unevaluatedLayout.hasValue("text-variable-anchor")||te._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ut,lt,ct,vt,Dt,It,Ft,qt,Pt){const Zt=lt.transform,_r=lt.style.map.terrain,pr=Dt==="map",mr=It==="map";for(const wr of ut){const sn=vt.getTile(wr),on=sn.getBucket(ct);if(!on||!on.text||!on.text.segments.get().length)continue;const $r=a.am(on.textSizeData,Zt.zoom),En=a.aB(sn,1,lt.transform.zoom),_i=un(pr,lt.transform,En),ji=ct.layout.get("icon-text-fit")!=="none"&&on.hasIconData();if($r){const Ma=Math.pow(2,Zt.zoom-sn.tileID.overscaledZ),ea=_r?(ta,Xi)=>_r.getElevation(wr,ta,Xi):null;Zh(on,pr,mr,Pt,Zt,_i,Ma,$r,ji,a.aC(Zt,sn,Ft,qt),wr.toUnwrapped(),ea)}}})(ue,B,te,W,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),ge),te.paint.get("icon-opacity").constantOr(1)!==0&&uf(B,W,te,ue,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),Ne,We,xe),te.paint.get("text-opacity").constantOr(1)!==0&&uf(B,W,te,ue,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),Ne,We,xe),W.map.showCollisionBoxes&&(Du(B,W,te,ue,!0),Du(B,W,te,ue,!1))})(s,d,w,C,this.style.placement.variableOffsets,L):a.cb(w)?(function(B,W,te,ue,ge){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ge,xe=te.paint.get("circle-opacity"),Ne=te.paint.get("circle-stroke-width"),We=te.paint.get("circle-stroke-opacity"),ut=!te.layout.get("circle-sort-key").isConstant();if(xe.constantOr(1)===0&&(Ne.constantOr(1)===0||We.constantOr(1)===0))return;const lt=B.context,ct=lt.gl,vt=B.transform,Dt=B.getDepthModeForSublayer(0,On.ReadOnly),It=bn.disabled,Ft=B.colorModeForRenderPass(),qt=[],Pt=vt.getCircleRadiusCorrection();for(let Zt=0;Zt<ue.length;Zt++){const _r=ue[Zt],pr=W.getTile(_r),mr=pr.getBucket(te);if(!mr)continue;const wr=te.paint.get("circle-translate"),sn=te.paint.get("circle-translate-anchor"),on=a.aC(vt,pr,wr,sn),$r=mr.programConfigurations.get(te.id),En=B.useProgram("circle",$r),_i=mr.layoutVertexBuffer,ji=mr.indexBuffer,Ma=B.style.map.terrain&&B.style.map.terrain.getTerrainData(_r),ea={programConfiguration:$r,program:En,layoutVertexBuffer:_i,indexBuffer:ji,uniformValues:dl(B,pr,te,on,Pt),terrainData:Ma,projectionData:vt.getProjectionData({overscaledTileID:_r,applyGlobeMatrix:!Ce,applyTerrainMatrix:!0})};if(ut){const ta=mr.segments.get();for(const Xi of ta)qt.push({segments:new a.aL([Xi]),sortKey:Xi.sortKey,state:ea})}else qt.push({segments:mr.segments,sortKey:0,state:ea})}ut&&qt.sort(((Zt,_r)=>Zt.sortKey-_r.sortKey));for(const Zt of qt){const{programConfiguration:_r,program:pr,layoutVertexBuffer:mr,indexBuffer:wr,uniformValues:sn,terrainData:on,projectionData:$r}=Zt.state;pr.draw(lt,ct.TRIANGLES,Dt,It,Ft,Zn.backCCW,sn,on,$r,te.id,mr,wr,Zt.segments,te.paint,B.transform.zoom,_r)}})(s,d,w,C,L):a.cc(w)?(function(B,W,te,ue,ge){if(te.paint.get("heatmap-opacity")===0)return;const Ce=B.context,{isRenderingToTexture:xe,isRenderingGlobe:Ne}=ge;if(B.style.map.terrain){for(const We of ue){const ut=W.getTile(We);W.hasRenderableParent(We)||(B.renderPass==="offscreen"?rh(B,ut,te,We,Ne):B.renderPass==="translucent"&&nh(B,te,We,xe,Ne))}Ce.viewport.set([0,0,B.width,B.height])}else B.renderPass==="offscreen"?(function(We,ut,lt,ct){const vt=We.context,Dt=vt.gl,It=We.transform,Ft=bn.disabled,qt=new _n([Dt.ONE,Dt.ONE],a.be.transparent,[!0,!0,!0,!0]);(function(Pt,Zt,_r){const pr=Pt.gl;Pt.activeTexture.set(pr.TEXTURE1),Pt.viewport.set([0,0,Zt.width/4,Zt.height/4]);let mr=_r.heatmapFbos.get(a.c1);mr?(pr.bindTexture(pr.TEXTURE_2D,mr.colorAttachment.get()),Pt.bindFramebuffer.set(mr.framebuffer)):(mr=Sd(Pt,Zt.width/4,Zt.height/4),_r.heatmapFbos.set(a.c1,mr))})(vt,We,lt),vt.clear({color:a.be.transparent});for(let Pt=0;Pt<ct.length;Pt++){const Zt=ct[Pt];if(ut.hasRenderableParent(Zt))continue;const _r=ut.getTile(Zt),pr=_r.getBucket(lt);if(!pr)continue;const mr=pr.programConfigurations.get(lt.id),wr=We.useProgram("heatmap",mr),sn=It.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),on=It.getCircleRadiusCorrection();wr.draw(vt,Dt.TRIANGLES,On.disabled,Ft,qt,Zn.backCCW,Ls(_r,It.zoom,lt.paint.get("heatmap-intensity"),on),null,sn,lt.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,lt.paint,It.zoom,mr)}vt.viewport.set([0,0,We.width,We.height])})(B,W,te,ue):B.renderPass==="translucent"&&(function(We,ut){const lt=We.context,ct=lt.gl;lt.setColorMode(We.colorModeForRenderPass());const vt=ut.heatmapFbos.get(a.c1);vt&&(lt.activeTexture.set(ct.TEXTURE0),ct.bindTexture(ct.TEXTURE_2D,vt.colorAttachment.get()),lt.activeTexture.set(ct.TEXTURE1),ih(lt,ut).bind(ct.LINEAR,ct.CLAMP_TO_EDGE),We.useProgram("heatmapTexture").draw(lt,ct.TRIANGLES,On.disabled,bn.disabled,We.colorModeForRenderPass(),Zn.disabled,Fa(We,ut,0,1),null,null,ut.id,We.viewportBuffer,We.quadTriangleIndexBuffer,We.viewportSegments,ut.paint,We.transform.zoom))})(B,te)})(s,d,w,C,L):a.cd(w)?(function(B,W,te,ue,ge){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ge,xe=te.paint.get("line-opacity"),Ne=te.paint.get("line-width");if(xe.constantOr(1)===0||Ne.constantOr(1)===0)return;const We=B.getDepthModeForSublayer(0,On.ReadOnly),ut=B.colorModeForRenderPass(),lt=te.paint.get("line-dasharray"),ct=te.paint.get("line-pattern"),vt=ct.constantOr(1),Dt=te.paint.get("line-gradient"),It=te.getCrossfadeParameters(),Ft=vt?"linePattern":lt?"lineSDF":Dt?"lineGradient":"line",qt=B.context,Pt=qt.gl,Zt=B.transform;let _r=!0;for(const pr of ue){const mr=W.getTile(pr);if(vt&&!mr.patternsLoaded())continue;const wr=mr.getBucket(te);if(!wr)continue;const sn=wr.programConfigurations.get(te.id),on=B.context.program.get(),$r=B.useProgram(Ft,sn),En=_r||$r.program!==on,_i=B.style.map.terrain&&B.style.map.terrain.getTerrainData(pr),ji=ct.constantOr(null);if(ji&&mr.imageAtlas){const Wi=mr.imageAtlas,na=Wi.patternPositions[ji.to.toString()],Wo=Wi.patternPositions[ji.from.toString()];na&&Wo&&sn.setConstantPatternPositions(na,Wo)}const Ma=Zt.getProjectionData({overscaledTileID:pr,applyGlobeMatrix:!Ce,applyTerrainMatrix:!0}),ea=Zt.getPixelScale(),ta=vt?Xa(B,mr,te,ea,It):lt?Kl(B,mr,te,ea,lt,It):Dt?so(B,mr,te,ea,wr.lineClipsArray.length):pl(B,mr,te,ea);if(vt)qt.activeTexture.set(Pt.TEXTURE0),mr.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),sn.updatePaintBuffers(It);else if(lt&&(En||B.lineAtlas.dirty))qt.activeTexture.set(Pt.TEXTURE0),B.lineAtlas.bind(qt);else if(Dt){const Wi=wr.gradients[te.id];let na=Wi.texture;if(te.gradientVersion!==Wi.version){let Wo=256;if(te.stepInterpolant){const Oi=W.getSource().maxzoom,ss=pr.canonical.z===Oi?Math.ceil(1<<B.transform.maxZoom-pr.canonical.z):1;Wo=a.ag(a.c2(wr.maxLineLength/a.$*1024*ss),256,qt.maxTextureSize)}Wi.gradient=a.c3({expression:te.gradientExpression(),evaluationKey:"lineProgress",resolution:Wo,image:Wi.gradient||void 0,clips:wr.lineClipsArray}),Wi.texture?Wi.texture.update(Wi.gradient):Wi.texture=new a.T(qt,Wi.gradient,Pt.RGBA),Wi.version=te.gradientVersion,na=Wi.texture}qt.activeTexture.set(Pt.TEXTURE0),na.bind(te.stepInterpolant?Pt.NEAREST:Pt.LINEAR,Pt.CLAMP_TO_EDGE)}const Xi=B.stencilModeForClipping(pr);$r.draw(qt,Pt.TRIANGLES,We,Xi,ut,Zn.disabled,ta,_i,Ma,te.id,wr.layoutVertexBuffer,wr.indexBuffer,wr.segments,te.paint,B.transform.zoom,sn,wr.layoutVertexBuffer2),_r=!1}})(s,d,w,C,L):a.ce(w)?(function(B,W,te,ue,ge){const Ce=te.paint.get("fill-color"),xe=te.paint.get("fill-opacity");if(xe.constantOr(1)===0)return;const{isRenderingToTexture:Ne}=ge,We=B.colorModeForRenderPass(),ut=te.paint.get("fill-pattern"),lt=B.opaquePassEnabledForLayer()&&!ut.constantOr(1)&&Ce.constantOr(a.be.transparent).a===1&&xe.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===lt){const ct=B.getDepthModeForSublayer(1,B.renderPass==="opaque"?On.ReadWrite:On.ReadOnly);cf(B,W,te,ue,ct,We,!1,Ne)}if(B.renderPass==="translucent"&&te.paint.get("fill-antialias")){const ct=B.getDepthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,On.ReadOnly);cf(B,W,te,ue,ct,We,!0,Ne)}})(s,d,w,C,L):a.cf(w)?(function(B,W,te,ue,ge){const Ce=te.paint.get("fill-extrusion-opacity");if(Ce===0)return;const{isRenderingToTexture:xe}=ge;if(B.renderPass==="translucent"){const Ne=new On(B.context.gl.LEQUAL,On.ReadWrite,B.depthRangeFor3D);if(Ce!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))Cd(B,W,te,ue,Ne,bn.disabled,_n.disabled,xe),Cd(B,W,te,ue,Ne,B.stencilModeFor3D(),B.colorModeForRenderPass(),xe);else{const We=B.colorModeForRenderPass();Cd(B,W,te,ue,Ne,bn.disabled,We,xe)}}})(s,d,w,C,L):a.cg(w)?(function(B,W,te,ue,ge){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ge,xe=B.context,Ne=B.style.projection.useSubdivision,We=B.getDepthModeForSublayer(0,On.ReadOnly),ut=B.colorModeForRenderPass();if(B.renderPass==="offscreen")(function(lt,ct,vt,Dt,It,Ft,qt){const Pt=lt.context,Zt=Pt.gl;for(const _r of vt){const pr=ct.getTile(_r),mr=pr.dem;if(!mr||!mr.data||!pr.needsHillshadePrepare)continue;const wr=mr.dim,sn=mr.stride,on=mr.getPixels();if(Pt.activeTexture.set(Zt.TEXTURE1),Pt.pixelStoreUnpackPremultiplyAlpha.set(!1),pr.demTexture=pr.demTexture||lt.getTileTexture(sn),pr.demTexture){const En=pr.demTexture;En.update(on,{premultiply:!1}),En.bind(Zt.NEAREST,Zt.CLAMP_TO_EDGE)}else pr.demTexture=new a.T(Pt,on,Zt.RGBA,{premultiply:!1}),pr.demTexture.bind(Zt.NEAREST,Zt.CLAMP_TO_EDGE);Pt.activeTexture.set(Zt.TEXTURE0);let $r=pr.fbo;if(!$r){const En=new a.T(Pt,{width:wr,height:wr,data:null},Zt.RGBA);En.bind(Zt.LINEAR,Zt.CLAMP_TO_EDGE),$r=pr.fbo=Pt.createFramebuffer(wr,wr,!0,!1),$r.colorAttachment.set(En.texture)}Pt.bindFramebuffer.set($r.framebuffer),Pt.viewport.set([0,0,wr,wr]),lt.useProgram("hillshadePrepare").draw(Pt,Zt.TRIANGLES,It,Ft,qt,Zn.disabled,Mu(pr.tileID,mr),null,null,Dt.id,lt.rasterBoundsBuffer,lt.quadTriangleIndexBuffer,lt.rasterBoundsSegments),pr.needsHillshadePrepare=!1}})(B,W,ue,te,We,bn.disabled,ut),xe.viewport.set([0,0,B.width,B.height]);else if(B.renderPass==="translucent")if(Ne){const[lt,ct,vt]=B.stencilConfigForOverlapTwoPass(ue);Ed(B,W,te,vt,lt,We,ut,!1,Ce),Ed(B,W,te,vt,ct,We,ut,!0,Ce)}else{const[lt,ct]=B.getStencilConfigForOverlapAndUpdateStencilID(ue);Ed(B,W,te,ct,lt,We,ut,!1,Ce)}})(s,d,w,C,L):a.ch(w)?(function(B,W,te,ue,ge){if(B.renderPass!=="translucent"||!ue.length)return;const{isRenderingToTexture:Ce}=ge,xe=B.style.projection.useSubdivision,Ne=B.getDepthModeForSublayer(0,On.ReadOnly),We=B.colorModeForRenderPass();if(xe){const[ut,lt,ct]=B.stencilConfigForOverlapTwoPass(ue);Hc(B,W,te,ct,ut,Ne,We,!1,Ce),Hc(B,W,te,ct,lt,Ne,We,!0,Ce)}else{const[ut,lt]=B.getStencilConfigForOverlapAndUpdateStencilID(ue);Hc(B,W,te,lt,ut,Ne,We,!1,Ce)}})(s,d,w,C,L):a.ci(w)?(function(B,W,te,ue,ge){if(B.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!ue.length)return;const{isRenderingToTexture:Ce}=ge,xe=W.getSource(),Ne=B.style.projection.useSubdivision;if(xe instanceof at)Ql(B,W,te,ue,null,!1,!1,xe.tileCoords,xe.flippedWindingOrder,Ce);else if(Ne){const[We,ut,lt]=B.stencilConfigForOverlapTwoPass(ue);Ql(B,W,te,lt,We,!1,!0,df,!1,Ce),Ql(B,W,te,lt,ut,!0,!0,df,!1,Ce)}else{const[We,ut]=B.getStencilConfigForOverlapAndUpdateStencilID(ue);Ql(B,W,te,ut,We,!1,!0,df,!1,Ce)}})(s,d,w,C,L):a.cj(w)?(function(B,W,te,ue,ge){const Ce=te.paint.get("background-color"),xe=te.paint.get("background-opacity");if(xe===0)return;const{isRenderingToTexture:Ne}=ge,We=B.context,ut=We.gl,lt=B.style.projection,ct=B.transform,vt=ct.tileSize,Dt=te.paint.get("background-pattern");if(B.isPatternMissing(Dt))return;const It=!Dt&&Ce.a===1&&xe===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==It)return;const Ft=bn.disabled,qt=B.getDepthModeForSublayer(0,It==="opaque"?On.ReadWrite:On.ReadOnly),Pt=B.colorModeForRenderPass(),Zt=B.useProgram(Dt?"backgroundPattern":"background"),_r=ue||Bt(ct,{tileSize:vt,terrain:B.style.map.terrain});Dt&&(We.activeTexture.set(ut.TEXTURE0),B.imageManager.bind(B.context));const pr=te.getCrossfadeParameters();for(const mr of _r){const wr=ct.getProjectionData({overscaledTileID:mr,applyGlobeMatrix:!Ne,applyTerrainMatrix:!0}),sn=Dt?Al(xe,B,Dt,{tileID:mr,tileSize:vt},pr):qo(xe,Ce),on=B.style.map.terrain&&B.style.map.terrain.getTerrainData(mr),$r=lt.getMeshFromTileID(We,mr.canonical,!1,!0,"raster");Zt.draw(We,ut.TRIANGLES,qt,Ft,Pt,Zn.backCCW,sn,on,wr,te.id,$r.vertexBuffer,$r.indexBuffer,$r.segments)}})(s,0,w,C,L):a.ck(w)&&(function(B,W,te,ue){const{isRenderingGlobe:ge}=ue,Ce=B.context,xe=te.implementation,Ne=B.style.projection,We=B.transform,ut=We.getProjectionDataForCustomLayer(ge),lt={farZ:We.farZ,nearZ:We.nearZ,fov:We.fov*Math.PI/180,modelViewProjectionMatrix:We.modelViewProjectionMatrix,projectionMatrix:We.projectionMatrix,shaderData:{variantName:Ne.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ne.shaderPreludeCode.vertexSource}`,define:Ne.shaderDefine},defaultProjectionData:ut},ct=xe.renderingMode?xe.renderingMode:"2d";if(B.renderPass==="offscreen"){const vt=xe.prerender;vt&&(B.setCustomLayerDefaults(),Ce.setColorMode(B.colorModeForRenderPass()),vt.call(xe,Ce.gl,lt),Ce.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),Ce.setColorMode(B.colorModeForRenderPass()),Ce.setStencilMode(bn.disabled);const vt=ct==="3d"?B.getDepthModeFor3D():B.getDepthModeForSublayer(0,On.ReadOnly);Ce.setDepthMode(vt),xe.render(Ce.gl,lt),Ce.setDirty(),B.setBaseState(),Ce.bindFramebuffer.set(null)}})(s,0,w,L))}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const d=this.imageManager.getPattern(s.from.toString()),w=this.imageManager.getPattern(s.to.toString());return!d||!w}useProgram(s,d,w=!1,C=[]){this.cache=this.cache||{};const L=!!this.style.map.terrain,B=this.style.projection,W=w?zt.projectionMercator:B.shaderPreludeCode,te=w?Kr:B.shaderDefine,ue=s+(d?d.cacheKey:"")+`/${w?Wr:B.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(L?"/terrain":"")+(C?`/${C.join("/")}`:"");return this.cache[ue]||(this.cache[ue]=new As(this.context,zt[s],d,Ns[s],this._showOverdrawInspector,L,W,te,C)),this.cache[ue]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}function el(A,s){let d,w=!1,C=null,L=null;const B=()=>{C=null,w&&(A.apply(L,d),C=setTimeout(B,s),w=!1)};return(...W)=>(w=!0,L=this,d=W,C||B(),C)}class pf{constructor(s){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let w;return d.split("&").map((C=>C.split("="))).forEach((C=>{C[0]===this._hashName&&(w=C)})),(w&&w[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:w,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const w=d.join("/");let C=w;C.split("&").length>0&&(C=C.split("&")[0]),this._hashName&&(C=`${this._hashName}=${w}`);let L=window.location.hash.replace(C,"");L.startsWith("#&")?L=L.slice(0,1)+L.slice(2):L==="#"&&(L="");let B=window.location.href.replace(/(#.+)?$/,L);B=B.replace("&&","&"),window.history.replaceState(window.history.state,null,B)},this._updateHash=el(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const d=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,C=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,C),B=Math.round(d.lng*L)/L,W=Math.round(d.lat*L)/L,te=this._map.getBearing(),ue=this._map.getPitch();let ge="";if(ge+=s?`/${B}/${W}/${w}`:`${w}/${W}/${B}`,(te||ue)&&(ge+="/"+Math.round(10*te)/10),ue&&(ge+=`/${Math.round(ue)}`),this._hashName){const Ce=this._hashName;let xe=!1;const Ne=window.location.hash.slice(1).split("&").map((We=>{const ut=We.split("=")[0];return ut===Ce?(xe=!0,`${ut}=${ge}`):We})).filter((We=>We));return xe||Ne.push(`${Ce}=${ge}`),`#${Ne.join("&")}`}return`#${ge}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new a.S(+s[2],+s[1])}catch{return!1}const d=+s[0],w=+(s[3]||0),C=+(s[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&w>=-180&&w<=180&&C>=this._map.getMinPitch()&&C<=this._map.getMaxPitch()}}const Td={linearity:.3,easing:a.cl(0,0,.3,1)},Wc=a.e({deceleration:2500,maxSpeed:1400},Td),ah=a.e({deceleration:20,maxSpeed:1400},Td),Pd=a.e({deceleration:1e3,maxSpeed:360},Td),oh=a.e({deceleration:1e3,maxSpeed:90},Td),_m=a.e({deceleration:1e3,maxSpeed:360},Td);class mf{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:x.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=x.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:L}of this._inertiaBuffer)d.zoom+=L.zoomDelta||0,d.bearing+=L.bearingDelta||0,d.pitch+=L.pitchDelta||0,d.roll+=L.rollDelta||0,L.panDelta&&d.pan._add(L.panDelta),L.around&&(d.around=L.around),L.pinchAround&&(d.pinchAround=L.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(d.pan.mag()){const L=Ou(d.pan.mag(),w,a.e({},Wc,s||{})),B=d.pan.mult(L.amount/d.pan.mag()),W=this._map.cameraHelper.handlePanInertia(B,this._map.transform);C.center=W.easingCenter,C.offset=W.easingOffset,tc(C,L)}if(d.zoom){const L=Ou(d.zoom,w,ah);C.zoom=this._map.transform.zoom+L.amount,tc(C,L)}if(d.bearing){const L=Ou(d.bearing,w,Pd);C.bearing=this._map.transform.bearing+a.ag(L.amount,-179,179),tc(C,L)}if(d.pitch){const L=Ou(d.pitch,w,oh);C.pitch=this._map.transform.pitch+L.amount,tc(C,L)}if(d.roll){const L=Ou(d.roll,w,_m);C.roll=this._map.transform.roll+a.ag(L.amount,-179,179),tc(C,L)}if(C.zoom||C.bearing){const L=d.pinchAround===void 0?d.around:d.pinchAround;C.around=L?this._map.unproject(L):this._map.getCenter()}return this.clear(),a.e(C,{noMoveStart:!0})}}function tc(A,s){(!A.duration||A.duration<s.duration)&&(A.duration=s.duration,A.easing=s.easing)}function Ou(A,s,d){const{maxSpeed:w,linearity:C,deceleration:L}=d,B=a.ag(A*C/(s/1e3),-w,w),W=Math.abs(B)/(L*C);return{easing:d.easing,duration:1e3*W,amount:B*(W/2)}}class Fs extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,w,C={}){w=w instanceof MouseEvent?w:new MouseEvent(s,w);const L=b.mousePos(d.getCanvas(),w),B=d.unproject(L);super(s,a.e({point:L,lngLat:B,originalEvent:w},C)),this._defaultPrevented=!1,this.target=d}}class bu extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,w){const C=s==="touchend"?w.changedTouches:w.touches,L=b.touchPos(d.getCanvasContainer(),C),B=L.map((te=>d.unproject(te))),W=L.reduce(((te,ue,ge,Ce)=>te.add(ue.div(Ce.length))),new a.P(0,0));super(s,{points:L,point:W,lngLats:B,lngLat:d.unproject(W),originalEvent:w}),this._defaultPrevented=!1}}class sh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,w){super(s,{originalEvent:w}),this._defaultPrevented=!1}}class xm{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new sh(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Fs(s.type,this._map,s))}mouseup(s){this._map.fire(new Fs(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Fs(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Fs(s.type,this._map,s))}mouseover(s){this._map.fire(new Fs(s.type,this._map,s))}mouseout(s){this._map.fire(new Fs(s.type,this._map,s))}touchstart(s){return this._firePreventable(new bu(s.type,this._map,s))}touchmove(s){this._map.fire(new bu(s.type,this._map,s))}touchend(s){this._map.fire(new bu(s.type,this._map,s))}touchcancel(s){this._map.fire(new bu(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wm{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Fs(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Fs(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Id{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(a.P.convert(s),this._map.terrain)}}class Qh{constructor(s,d){this._map=s,this._tr=new Id(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(b.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const w=d;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=w,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const L=Math.min(C.x,w.x),B=Math.max(C.x,w.x),W=Math.min(C.y,w.y),te=Math.max(C.y,w.y);b.setTransform(this._box,`translate(${L}px,${W}px)`),this._box.style.width=B-L+"px",this._box.style.height=te-W+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;const w=this._startPos,C=d;if(this.reset(),b.suppressClick(),w.x!==C.x||w.y!==C.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:s})),{cameraAnimation:L=>L.fitScreenCoordinates(w,C,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new a.l(s,{originalEvent:d}))}}function lh(A,s){if(A.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${A.length}, points ${s.length}`);const d={};for(let w=0;w<A.length;w++)d[A[w].identifier]=s[w];return d}class Sm{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),w.length===this.numTouches&&(this.centroid=(function(C){const L=new a.P(0,0);for(const B of C)L._add(B);return L.div(C.length)})(d),this.touches=lh(w,d)))}touchmove(s,d,w){if(this.aborted||!this.centroid)return;const C=lh(w,d);for(const L in this.touches){const B=C[L];(!B||B.dist(this.touches[L])>30)&&(this.aborted=!0)}}touchend(s,d,w){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class gf{constructor(s){this.singleTap=new Sm(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,w){this.singleTap.touchstart(s,d,w)}touchmove(s,d,w){this.singleTap.touchmove(s,d,w)}touchend(s,d,w){const C=this.singleTap.touchend(s,d,w);if(C){const L=s.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(C)<30;if(L&&B||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class Xc{constructor(s){this._tr=new Id(s),this._zoomIn=new gf({numTouches:1,numTaps:2}),this._zoomOut=new gf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,w){this._zoomIn.touchstart(s,d,w),this._zoomOut.touchstart(s,d,w)}touchmove(s,d,w){this._zoomIn.touchmove(s,d,w),this._zoomOut.touchmove(s,d,w)}touchend(s,d,w){const C=this._zoomIn.touchend(s,d,w),L=this._zoomOut.touchend(s,d,w),B=this._tr;return C?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(C)},{originalEvent:s})}):L?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(L)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kd{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const C=Array.isArray(d)?d[0]:d;return!this._moved&&C.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=C,this._move(w,C))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&b.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const eu=0,tu=2,$={[eu]:1,[tu]:2};class Y{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const d=b.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!(function(d,w){const C=$[w];return d.buttons===void 0||(d.buttons&C)!==C})(s,this._eventButton)}isValidEndEvent(s){return b.mouseButton(s)===this._eventButton}}class he{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class Ee{constructor(s=new Y({checkCorrectEvent:()=>!0}),d=new he){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(s,d,w){return s instanceof MouseEvent?d(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?w(s):void 0}startMove(s){this._executeRelevantHandler(s,(d=>this.mouseMoveStateManager.startMove(d)),(d=>this.oneFingerTouchMoveStateManager.startMove(d)))}endMove(s){this._executeRelevantHandler(s,(d=>this.mouseMoveStateManager.endMove(d)),(d=>this.oneFingerTouchMoveStateManager.endMove(d)))}isValidStartEvent(s){return this._executeRelevantHandler(s,(d=>this.mouseMoveStateManager.isValidStartEvent(d)),(d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d)))}isValidMoveEvent(s){return this._executeRelevantHandler(s,(d=>this.mouseMoveStateManager.isValidMoveEvent(d)),(d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d)))}isValidEndEvent(s){return this._executeRelevantHandler(s,(d=>this.mouseMoveStateManager.isValidEndEvent(d)),(d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d)))}}const He=A=>{A.mousedown=A.dragStart,A.mousemoveWindow=A.dragMove,A.mouseup=A.dragEnd,A.contextmenu=s=>{s.preventDefault()}};class Je{constructor(s,d){this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,d,w){return this._calculateTransform(s,d,w)}touchmove(s,d,w){if(this._active){if(!this._shouldBePrevented(w.length))return s.preventDefault(),this._calculateTransform(s,d,w);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,d,w){this._calculateTransform(s,d,w),this._active&&this._shouldBePrevented(w.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,w){w.length>0&&(this._active=!0);const C=lh(w,d),L=new a.P(0,0),B=new a.P(0,0);let W=0;for(const ue in C){const ge=C[ue],Ce=this._touches[ue];Ce&&(L._add(ge),B._add(ge.sub(Ce)),W++,C[ue]=ge)}if(this._touches=C,this._shouldBePrevented(W)||!B.mag())return;const te=B.div(W);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:L.div(W),panDelta:te}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class et{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,w){if(!this._firstTwoTouches)return;s.preventDefault();const[C,L]=this._firstTwoTouches,B=it(w,d,C),W=it(w,d,L);if(!B||!W)return;const te=this._aroundCenter?null:B.add(W).div(2);return this._move([B,W],te,s)}touchend(s,d,w){if(!this._firstTwoTouches)return;const[C,L]=this._firstTwoTouches,B=it(w,d,C),W=it(w,d,L);B&&W||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function it(A,s,d){for(let w=0;w<A.length;w++)if(A[w].identifier===d)return s[w]}function dt(A,s){return Math.log(A/s)/Math.LN2}class bt extends et{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const w=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(dt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:dt(this._distance,w),pinchAround:d}}}function _t(A,s){return 180*A.angleWith(s)/Math.PI}class Sr extends et{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d,w){const C=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:_t(this._vector,C),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,w=_t(s,this._startVector);return Math.abs(w)<d}}function xt(A){return Math.abs(A.y)>Math.abs(A.x)}class ir extends et{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,w){super.touchstart(s,d,w),this._currentTouchCount=w.length}_start(s){this._lastPoints=s,xt(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,w){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const C=s[0].sub(this._lastPoints[0]),L=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,L,w.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(C.y+L.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,w){if(this._valid!==void 0)return this._valid;const C=s.mag()>=2,L=d.mag()>=2;if(!C&&!L)return;if(!C||!L)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const B=s.y>0==d.y>0;return xt(s)&&xt(d)&&B}}const cr={panStep:100,bearingStep:15,pitchStep:10};class Dr{constructor(s){this._tr=new Id(s);const d=cr;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,w=0,C=0,L=0,B=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?w=-1:(s.preventDefault(),L=-1);break;case 39:s.shiftKey?w=1:(s.preventDefault(),L=1);break;case 38:s.shiftKey?C=1:(s.preventDefault(),B=-1);break;case 40:s.shiftKey?C=-1:(s.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(w=0,C=0),{cameraAnimation:W=>{const te=this._tr;W.easeTo({duration:300,easeId:"keyboardHandler",easing:xr,zoom:d?Math.round(te.zoom)+d*(s.shiftKey?2:1):te.zoom,bearing:te.bearing+w*this._bearingStep,pitch:te.pitch+C*this._pitchStep,offset:[-L*this._panStep,-B*this._panStep],center:te.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function xr(A){return A*(2-A)}const yr=4.000244140625,Fr=1/450;class an{constructor(s,d){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=s,this._tr=new Id(s),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Fr}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const w=x.now(),C=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,d!==0&&d%yr==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(C*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=b.mousePos(this._map.getCanvas(),s),w=this._tr;this._aroundPoint=this._aroundCenter?w.transform.locationToScreenPoint(a.S.convert(w.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const W=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=W),typeof this._targetZoom=="number"&&(this._targetZoom+=W)}if(this._delta!==0){const W=this._type==="wheel"&&Math.abs(this._delta)>yr?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*W)));this._delta<0&&te!==0&&(te=1/te);const ue=typeof this._targetZoom!="number"?s.scale:a.ae(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),a.aj(ue*te)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,w=this._startZoom,C=this._easing;let L,B=!1;if(this._type==="wheel"&&w&&C){const W=x.now()-this._lastWheelEventTime,te=Math.min((W+5)/200,1),ue=C(te);L=a.C.number(w,d,ue),te<1?this._frameId||(this._frameId=!0):B=!0}else L=d,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=L,{noInertia:!0,needsRenderFrame:!B,zoomDelta:L-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=a.cn;if(this._prevEase){const w=this._prevEase,C=(x.now()-w.start)/w.duration,L=w.easing(C+.01)-w.easing(C),B=.27/Math.sqrt(L*L+1e-4)*.01,W=Math.sqrt(.0729-B*B);d=a.cl(B,W,.25,1)}return this._prevEase={start:x.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Zr{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Wn{constructor(s){this._tr=new Id(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fn{constructor(){this._tap=new gf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,w){if(!this._swipePoint)if(this._tapTime){const C=d[0],L=s.timeStamp-this._tapTime<500,B=this._tapPoint.dist(C)<30;L&&B?w.length>0&&(this._swipePoint=C,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(s,d,w)}touchmove(s,d,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const C=d[0],L=C.y-this._swipePoint.y;return this._swipePoint=C,s.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(s,d,w)}touchend(s,d,w){if(this._tapTime)this._swipePoint&&w.length===0&&this.reset();else{const C=this._tap.touchend(s,d,w);C&&(this._tapTime=s.timeStamp,this._tapPoint=C)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wi{constructor(s,d,w){this._el=s,this._mousePan=d,this._touchPan=w}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zn{constructor(s,d,w,C){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=d,this._mousePitch=w,this._mouseRoll=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Bi{constructor(s,d,w,C){this._el=s,this._touchZoom=d,this._touchRotate=w,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Lo{constructor(s,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",s);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const w=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),C=document.createElement("div");C.className="maplibregl-desktop-message",C.textContent=d,this._container.appendChild(C);const L=document.createElement("div");L.className="maplibregl-mobile-message",L.textContent=w,this._container.appendChild(L),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,d){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:s,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const vi=A=>A.zoom||A.drag||A.roll||A.pitch||A.rotate;class Vn extends a.l{}function vn(A){return A.panDelta&&A.panDelta.mag()||A.zoomDelta||A.bearingDelta||A.pitchDelta||A.rollDelta}class ya{constructor(s,d){this.handleWindowEvent=C=>{this.handleEvent(C,`${C.type}Window`)},this.handleEvent=(C,L)=>{if(C.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=C.type==="renderFrame"?void 0:C,W={needsRenderFrame:!1},te={},ue={};for(const{handlerName:xe,handler:Ne,allowed:We}of this._handlers){if(!Ne.isEnabled())continue;let ut;if(this._blockedByActive(ue,We,xe))Ne.reset();else if(Ne[L||C.type]){if(a.co(C,L||C.type)){const lt=b.mousePos(this._map.getCanvas(),C);ut=Ne[L||C.type](C,lt)}else if(a.cp(C,L||C.type)){const lt=this._getMapTouches(C.touches),ct=b.touchPos(this._map.getCanvas(),lt);ut=Ne[L||C.type](C,ct,lt)}else a.cq(L||C.type)||(ut=Ne[L||C.type](C));this.mergeHandlerResult(W,te,ut,xe,B),ut&&ut.needsRenderFrame&&this._triggerRenderFrame()}(ut||Ne.isActive())&&(ue[xe]=Ne)}const ge={};for(const xe in this._previousActiveHandlers)ue[xe]||(ge[xe]=B);this._previousActiveHandlers=ue,(Object.keys(ge).length||vn(W))&&(this._changes.push([W,te,ge]),this._triggerRenderFrame()),(Object.keys(ue).length||vn(W))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ce}=W;Ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ce(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mf(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,L,B]of this._listeners)b.addEventListener(C,L,C===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[s,d,w]of this._listeners)b.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(s){const d=this._map,w=d.getCanvasContainer();this._add("mapEvent",new xm(d,s));const C=d.boxZoom=new Qh(d,s);this._add("boxZoom",C),s.interactive&&s.boxZoom&&C.enable();const L=d.cooperativeGestures=new Lo(d,s.cooperativeGestures);this._add("cooperativeGestures",L),s.cooperativeGestures&&L.enable();const B=new Xc(d),W=new Wn(d);d.doubleClickZoom=new Zr(W,B),this._add("tapZoom",B),this._add("clickZoom",W),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();const te=new Fn;this._add("tapDragZoom",te);const ue=d.touchPitch=new ir(d);this._add("touchPitch",ue),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);const ge=()=>d.project(d.getCenter()),Ce=(function({enable:It,clickTolerance:Ft,aroundCenter:qt=!0,minPixelCenterThreshold:Pt=100,rotateDegreesPerPixelMoved:Zt=.8},_r){const pr=new Y({checkCorrectEvent:mr=>b.mouseButton(mr)===0&&mr.ctrlKey||b.mouseButton(mr)===2&&!mr.ctrlKey});return new kd({clickTolerance:Ft,move:(mr,wr)=>{const sn=_r();if(qt&&Math.abs(sn.y-mr.y)>Pt)return{bearingDelta:a.cm(new a.P(mr.x,wr.y),wr,sn)};let on=(wr.x-mr.x)*Zt;return qt&&wr.y<sn.y&&(on=-on),{bearingDelta:on}},moveStateManager:pr,enable:It,assignEvents:He})})(s,ge),xe=(function({enable:It,clickTolerance:Ft,pitchDegreesPerPixelMoved:qt=-.5}){const Pt=new Y({checkCorrectEvent:Zt=>b.mouseButton(Zt)===0&&Zt.ctrlKey||b.mouseButton(Zt)===2});return new kd({clickTolerance:Ft,move:(Zt,_r)=>({pitchDelta:(_r.y-Zt.y)*qt}),moveStateManager:Pt,enable:It,assignEvents:He})})(s),Ne=(function({enable:It,clickTolerance:Ft,rollDegreesPerPixelMoved:qt=.3},Pt){const Zt=new Y({checkCorrectEvent:_r=>b.mouseButton(_r)===2&&_r.ctrlKey});return new kd({clickTolerance:Ft,move:(_r,pr)=>{const mr=Pt();let wr=(pr.x-_r.x)*qt;return pr.y<mr.y&&(wr=-wr),{rollDelta:wr}},moveStateManager:Zt,enable:It,assignEvents:He})})(s,ge);d.dragRotate=new zn(s,Ce,xe,Ne),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",xe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ne,["mousePitch"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();const We=(function({enable:It,clickTolerance:Ft}){const qt=new Y({checkCorrectEvent:Pt=>b.mouseButton(Pt)===0&&!Pt.ctrlKey});return new kd({clickTolerance:Ft,move:(Pt,Zt)=>({around:Zt,panDelta:Zt.sub(Pt)}),activateOnStart:!0,moveStateManager:qt,enable:It,assignEvents:He})})(s),ut=new Je(s,d);d.dragPan=new wi(w,We,ut),this._add("mousePan",We),this._add("touchPan",ut,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);const lt=new Sr,ct=new bt;d.touchZoomRotate=new Bi(w,ct,lt,te),this._add("touchRotate",lt,["touchPan","touchZoom"]),this._add("touchZoom",ct,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);const vt=d.scrollZoom=new an(d,(()=>this._triggerRenderFrame()));this._add("scrollZoom",vt,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);const Dt=d.keyboard=new Dr(d);this._add("keyboard",Dt),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new wm(d))}_add(s,d,w){this._handlers.push({handlerName:s,handler:d,allowed:w}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vi(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,w){for(const C in s)if(C!==w&&(!d||d.indexOf(C)<0))return!0;return!1}_getMapTouches(s){const d=[];for(const w of s)this._el.contains(w.target)&&d.push(w);return d}mergeHandlerResult(s,d,w,C,L){if(!w)return;a.e(s,w);const B={handlerName:C,originalEvent:w.originalEvent||L};w.zoomDelta!==void 0&&(d.zoom=B),w.panDelta!==void 0&&(d.drag=B),w.rollDelta!==void 0&&(d.roll=B),w.pitchDelta!==void 0&&(d.pitch=B),w.bearingDelta!==void 0&&(d.rotate=B)}_applyChanges(){const s={},d={},w={};for(const[C,L,B]of this._changes)C.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(C.panDelta)),C.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+C.pitchDelta),C.rollDelta&&(s.rollDelta=(s.rollDelta||0)+C.rollDelta),C.around!==void 0&&(s.around=C.around),C.pinchAround!==void 0&&(s.pinchAround=C.pinchAround),C.noInertia&&(s.noInertia=C.noInertia),a.e(d,L),a.e(w,B);this._updateMapTransform(s,d,w),this._changes=[]}_updateMapTransform(s,d,w){const C=this._map,L=C._getTransformForUpdate(),B=C.terrain;if(!(vn(s)||B&&this._terrainMovement))return this._fireEvents(d,w,!0);C._stop(!0);let{panDelta:W,zoomDelta:te,bearingDelta:ue,pitchDelta:ge,rollDelta:Ce,around:xe,pinchAround:Ne}=s;Ne!==void 0&&(xe=Ne),xe=xe||C.transform.centerPoint,B&&!L.isPointOnMapSurface(xe)&&(xe=L.centerPoint);const We={panDelta:W,zoomDelta:te,rollDelta:Ce,pitchDelta:ge,bearingDelta:ue,around:xe};this._map.cameraHelper.useGlobeControls&&!L.isPointOnMapSurface(xe)&&(xe=L.centerPoint);const ut=xe.distSqr(L.centerPoint)<.01?L.center:L.screenPointToLocation(W?xe.sub(W):xe);B?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(We,L),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?L.setCenter(L.screenPointToLocation(L.centerPoint.sub(W))):this._map.cameraHelper.handleMapControlsPan(We,L,ut):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(We,L,ut))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(We,L),this._map.cameraHelper.handleMapControlsPan(We,L,ut)),C._applyUpdatedTransform(L),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,w,!0)}_fireEvents(s,d,w){const C=vi(this._eventsInProgress),L=vi(s),B={};for(const Ce in s){const{originalEvent:xe}=s[Ce];this._eventsInProgress[Ce]||(B[`${Ce}start`]=xe),this._eventsInProgress[Ce]=s[Ce]}!C&&L&&this._fireEvent("movestart",L.originalEvent);for(const Ce in B)this._fireEvent(Ce,B[Ce]);L&&this._fireEvent("move",L.originalEvent);for(const Ce in s){const{originalEvent:xe}=s[Ce];this._fireEvent(Ce,xe)}const W={};let te;for(const Ce in this._eventsInProgress){const{handlerName:xe,originalEvent:Ne}=this._eventsInProgress[Ce];this._handlersById[xe].isActive()||(delete this._eventsInProgress[Ce],te=d[xe]||Ne,W[`${Ce}end`]=te)}for(const Ce in W)this._fireEvent(Ce,W[Ce]);const ue=vi(this._eventsInProgress),ge=(C||L)&&!ue;if(ge&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ce=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ce.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ce)}if(w&&ge){this._updatingCamera=!0;const Ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xe=Ne=>Ne!==0&&-this._bearingSnap<Ne&&Ne<this._bearingSnap;!Ce||!Ce.essential&&x.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:te})),xe(this._map.getBearing())&&this._map.resetNorth()):(xe(Ce.bearing||this._map.getBearing())&&(Ce.bearing=0),Ce.freezeElevation=!0,this._map.easeTo(Ce,{originalEvent:te})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new a.l(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((s=>{delete this._frameId,this.handleEvent(new Vn("renderFrame",{timeStamp:s})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Dn extends a.E{constructor(s,d,w){super(),this._renderFrameCallback=()=>{const C=Math.min((x.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=w.bearingSnap,this.cameraHelper=d,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(s,d){s.apply(this.transform),this.transform=s,this.cameraHelper=d}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,d){return this.jumpTo({elevation:s},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,d,w){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},d),w)}panTo(s,d,w){return this.easeTo(a.e({center:s},d),w)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,w){return this.easeTo(a.e({zoom:s},d),w)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,d){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)).fire(new a.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,w){return this.easeTo(a.e({bearing:s},d),w)}resetNorth(s,d){return this.rotateTo(0,a.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}getRoll(){return this.transform.roll}setRoll(s,d){return this.jumpTo({roll:s},d),this}cameraForBounds(s,d){s=Mt.convert(s).adjustAntiMeridian();const w=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),w,d)}_cameraForBoxAndBearing(s,d,w,C){const L={top:0,bottom:0,right:0,left:0};if(typeof(C=a.e({padding:L,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const ue=C.padding;C.padding={top:ue,bottom:ue,right:ue,left:ue}}const B=a.e(L,C.padding);C.padding=B;const W=this.transform,te=new Mt(s,d);return this.cameraHelper.cameraForBoxAndBearing(C,B,te,w,W)}fitBounds(s,d,w){return this._fitInternal(this.cameraForBounds(s,d),d,w)}fitScreenCoordinates(s,d,w,C,L){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(s)),this.transform.screenPointToLocation(a.P.convert(d)),w,C),C,L)}_fitInternal(s,d,w){return s?(delete(d=a.e(s,d)).padding,d.linear?this.easeTo(d,w):this.flyTo(d,w)):this}jumpTo(s,d){this.stop();const w=this._getTransformForUpdate();let C=!1,L=!1,B=!1;const W=w.zoom;this.cameraHelper.handleJumpToCenterZoom(w,s);const te=w.zoom!==W;return"elevation"in s&&w.elevation!==+s.elevation&&w.setElevation(+s.elevation),"bearing"in s&&w.bearing!==+s.bearing&&(C=!0,w.setBearing(+s.bearing)),"pitch"in s&&w.pitch!==+s.pitch&&(L=!0,w.setPitch(+s.pitch)),"roll"in s&&w.roll!==+s.roll&&(B=!0,w.setRoll(+s.roll)),s.padding==null||w.isPaddingEqual(s.padding)||w.setPadding(s.padding),this._applyUpdatedTransform(w),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)),te&&this.fire(new a.l("zoomstart",d)).fire(new a.l("zoom",d)).fire(new a.l("zoomend",d)),C&&this.fire(new a.l("rotatestart",d)).fire(new a.l("rotate",d)).fire(new a.l("rotateend",d)),L&&this.fire(new a.l("pitchstart",d)).fire(new a.l("pitch",d)).fire(new a.l("pitchend",d)),B&&this.fire(new a.l("rollstart",d)).fire(new a.l("roll",d)).fire(new a.l("rollend",d)),this.fire(new a.l("moveend",d))}calculateCameraOptionsFromTo(s,d,w,C=0){const L=a.a0.fromLngLat(s,d),B=a.a0.fromLngLat(w,C),W=B.x-L.x,te=B.y-L.y,ue=B.z-L.z,ge=Math.hypot(W,te,ue);if(ge===0)throw new Error("Can't calculate camera options with same From and To");const Ce=Math.hypot(W,te),xe=a.aj(this.transform.cameraToCenterDistance/ge/this.transform.tileSize),Ne=180*Math.atan2(W,-te)/Math.PI;let We=180*Math.acos(Ce/ge)/Math.PI;return We=ue<0?90-We:90+We,{center:B.toLngLat(),elevation:C,zoom:xe,pitch:We,bearing:Ne}}calculateCameraOptionsFromCameraLngLatAltRotation(s,d,w,C,L){const B=this.transform.calculateCenterFromCameraLngLatAlt(s,d,w,C);return{center:B.center,elevation:B.elevation,zoom:B.zoom,bearing:w,pitch:C,roll:L}}easeTo(s,d){this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.cn},s)).animate===!1||!s.essential&&x.prefersReducedMotion)&&(s.duration=0);const w=this._getTransformForUpdate(),C=this.getBearing(),L=w.pitch,B=w.roll,W="bearing"in s?this._normalizeBearing(s.bearing,C):C,te="pitch"in s?+s.pitch:L,ue="roll"in s?this._normalizeBearing(s.roll,B):B,ge="padding"in s?s.padding:w.padding,Ce=a.P.convert(s.offset);let xe,Ne;s.around&&(xe=a.S.convert(s.around),Ne=w.locationToScreenPoint(xe));const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ut=this.cameraHelper.handleEaseTo(w,{bearing:W,pitch:te,roll:ue,padding:ge,around:xe,aroundPoint:Ne,offsetAsPoint:Ce,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||C!==W,this._pitching=this._pitching||te!==L,this._rolling=this._rolling||ue!==B,this._padding=!w.isPaddingEqual(ge),this._zooming=this._zooming||ut.isZooming,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,We),this.terrain&&this._prepareElevation(ut.elevationCenter),this._ease((lt=>{ut.easeFunc(lt),this.terrain&&!s.freezeElevation&&this._updateElevation(lt),this._applyUpdatedTransform(w),this._fireMoveEvents(d)}),(lt=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d,lt)}),s),this}_prepareEase(s,d,w={}){this._moving=!0,d||w.moving||this.fire(new a.l("movestart",s)),this._zooming&&!w.zooming&&this.fire(new a.l("zoomstart",s)),this._rotating&&!w.rotating&&this.fire(new a.l("rotatestart",s)),this._pitching&&!w.pitching&&this.fire(new a.l("pitchstart",s)),this._rolling&&!w.rolling&&this.fire(new a.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(w-(d-(w*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const d=s.getCameraLngLat(),w=s.getCameraAltitude(),C=this.terrain?this.terrain.getElevationForLngLatZoom(d,s.zoom):0;if(w<C){const L=this.calculateCameraOptionsFromTo(d,C,s.center,s.elevation);return{pitch:L.pitch,zoom:L.zoom}}return{}}_applyUpdatedTransform(s){const d=[];if(d.push((C=>this._elevateCameraIfInsideTerrain(C))),this.transformCameraUpdate&&d.push((C=>this.transformCameraUpdate(C))),!d.length)return;const w=s.clone();for(const C of d){const L=w.clone(),{center:B,zoom:W,roll:te,pitch:ue,bearing:ge,elevation:Ce}=C(L);B&&L.setCenter(B),Ce!==void 0&&L.setElevation(Ce),W!==void 0&&L.setZoom(W),te!==void 0&&L.setRoll(te),ue!==void 0&&L.setPitch(ue),ge!==void 0&&L.setBearing(ge),w.apply(L)}this.transform.apply(w)}_fireMoveEvents(s){this.fire(new a.l("move",s)),this._zooming&&this.fire(new a.l("zoom",s)),this._rotating&&this.fire(new a.l("rotate",s)),this._pitching&&this.fire(new a.l("pitch",s)),this._rolling&&this.fire(new a.l("roll",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const w=this._zooming,C=this._rotating,L=this._pitching,B=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,w&&this.fire(new a.l("zoomend",s)),C&&this.fire(new a.l("rotateend",s)),L&&this.fire(new a.l("pitchend",s)),B&&this.fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}flyTo(s,d){if(!s.essential&&x.prefersReducedMotion){const wr=a.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(wr,d)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cn},s);const w=this._getTransformForUpdate(),C=w.bearing,L=w.pitch,B=w.roll,W=w.padding,te="bearing"in s?this._normalizeBearing(s.bearing,C):C,ue="pitch"in s?+s.pitch:L,ge="roll"in s?this._normalizeBearing(s.roll,B):B,Ce="padding"in s?s.padding:w.padding,xe=a.P.convert(s.offset);let Ne=w.centerPoint.add(xe);const We=w.screenPointToLocation(Ne),ut=this.cameraHelper.handleFlyTo(w,{bearing:te,pitch:ue,roll:ge,padding:Ce,locationAtOffset:We,offsetAsPoint:xe,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let lt=s.curve;const ct=Math.max(w.width,w.height),vt=ct/ut.scaleOfZoom,Dt=ut.pixelPathLength;typeof ut.scaleOfMinZoom=="number"&&(lt=Math.sqrt(ct/ut.scaleOfMinZoom/Dt*2));const It=lt*lt;function Ft(wr){const sn=(vt*vt-ct*ct+(wr?-1:1)*It*It*Dt*Dt)/(2*(wr?vt:ct)*It*Dt);return Math.log(Math.sqrt(sn*sn+1)-sn)}function qt(wr){return(Math.exp(wr)-Math.exp(-wr))/2}function Pt(wr){return(Math.exp(wr)+Math.exp(-wr))/2}const Zt=Ft(!1);let _r=function(wr){return Pt(Zt)/Pt(Zt+lt*wr)},pr=function(wr){return ct*((Pt(Zt)*(qt(sn=Zt+lt*wr)/Pt(sn))-qt(Zt))/It)/Dt;var sn},mr=(Ft(!0)-Zt)/lt;if(Math.abs(Dt)<2e-6||!isFinite(mr)){if(Math.abs(ct-vt)<1e-6)return this.easeTo(s,d);const wr=vt<ct?-1:1;mr=Math.abs(Math.log(vt/ct))/lt,pr=()=>0,_r=sn=>Math.exp(wr*lt*sn)}return s.duration="duration"in s?+s.duration:1e3*mr/("screenSpeed"in s?+s.screenSpeed/lt:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=C!==te,this._pitching=ue!==L,this._rolling=ge!==B,this._padding=!w.isPaddingEqual(Ce),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(ut.targetCenter),this._ease((wr=>{const sn=wr*mr,on=1/_r(sn),$r=pr(sn);this._rotating&&w.setBearing(a.C.number(C,te,wr)),this._pitching&&w.setPitch(a.C.number(L,ue,wr)),this._rolling&&w.setRoll(a.C.number(B,ge,wr)),this._padding&&(w.interpolatePadding(W,Ce,wr),Ne=w.centerPoint.add(xe)),ut.easeFunc(wr,on,$r,Ne),this.terrain&&!s.freezeElevation&&this._updateElevation(wr),this._applyUpdatedTransform(w),this._fireMoveEvents(d)}),(()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d)}),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){var w;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,d)}return s||(w=this.handlers)===null||w===void 0||w.stop(!1),this}_ease(s,d,w){w.animate===!1||w.duration===0?(s(1),d()):(this._easeStart=x.now(),this._easeOptions=w,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=a.aN(s,-180,180);const w=Math.abs(s-d);return Math.abs(s-360-d)<w&&(s-=360),Math.abs(s+360-d)<w&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(s),this.transform.tileZoom):null}}const Ni={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class va{constructor(s=Ni){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const w=this._map._getUIString(`AttributionControl.${d}`);s.title=w,s.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map((C=>typeof C!="string"?"":C))):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const d=this._map.style.sourceCaches;for(const C in d){const L=d[C];if(L.used||L.usedForTerrain){const B=L.getSource();B.attribution&&s.indexOf(B.attribution)<0&&s.push(B.attribution)}}s=s.filter((C=>String(C).trim())),s.sort(((C,L)=>C.length-L.length)),s=s.filter(((C,L)=>{for(let B=L+1;B<s.length;B++)if(s[B].indexOf(C)>=0)return!1;return!0}));const w=s.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,s.length?(this._innerContainer.innerHTML=b.sanitize(w),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Uo{constructor(s={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const w=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const d=b.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Bs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,w=d?this._queue.concat(d):this._queue;for(const C of w)if(C.id===s)return void(C.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const w of d)if(!w.cancelled&&(w.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var co=a.aI([{name:"a_pos3d",type:"Int16",components:3}]);class zs extends a.E{constructor(s){super(),this._lastTilesetChange=x.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];const w={};for(const C of Bt(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))w[C.key]=!0,this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.terrainRttPosMatrix32f=new Float64Array(16),a.bX(C.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[C.key]=new ar(C,this.tileSize),this._lastTilesetChange=x.now());for(const C in this._tiles)w[C]||delete this._tiles[C]}freeRtt(s){for(const d in this._tiles){const w=this._tiles[d];(!s||w.tileID.equals(s)||w.tileID.isChildOf(s)||s.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((s=>this.getTileByID(s)))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,d){return d?this._getTerrainCoordsForTileRanges(s,d):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const d={};for(const w of this._renderableTilesKeys){const C=this._tiles[w].tileID,L=s.clone(),B=a.b9();if(C.canonical.equals(s.canonical))a.bX(B,0,a.$,a.$,0,0,1);else if(C.canonical.isChildOf(s.canonical)){const W=C.canonical.z-s.canonical.z,te=C.canonical.x-(C.canonical.x>>W<<W),ue=C.canonical.y-(C.canonical.y>>W<<W),ge=a.$>>W;a.bX(B,0,ge,ge,0,0,1),a.M(B,B,[-te*ge,-ue*ge,0])}else{if(!s.canonical.isChildOf(C.canonical))continue;{const W=s.canonical.z-C.canonical.z,te=s.canonical.x-(s.canonical.x>>W<<W),ue=s.canonical.y-(s.canonical.y>>W<<W),ge=a.$>>W;a.bX(B,0,a.$,a.$,0,0,1),a.M(B,B,[te*ge,ue*ge,0]),a.N(B,B,[1/2**W,1/2**W,0])}}L.terrainRttPosMatrix32f=new Float32Array(B),d[w]=L}return d}_getTerrainCoordsForTileRanges(s,d){const w={};for(const C of this._renderableTilesKeys){const L=this._tiles[C].tileID;if(!this._isWithinTileRanges(L,d))continue;const B=s.clone(),W=a.b9();if(L.canonical.z===s.canonical.z){const te=s.canonical.x-L.canonical.x,ue=s.canonical.y-L.canonical.y;a.bX(W,0,a.$,a.$,0,0,1),a.M(W,W,[te*a.$,ue*a.$,0])}else if(L.canonical.z>s.canonical.z){const te=L.canonical.z-s.canonical.z,ue=L.canonical.x-(L.canonical.x>>te<<te),ge=L.canonical.y-(L.canonical.y>>te<<te),Ce=s.canonical.x-(L.canonical.x>>te),xe=s.canonical.y-(L.canonical.y>>te),Ne=a.$>>te;a.bX(W,0,Ne,Ne,0,0,1),a.M(W,W,[-ue*Ne+Ce*a.$,-ge*Ne+xe*a.$,0])}else{const te=s.canonical.z-L.canonical.z,ue=s.canonical.x-(s.canonical.x>>te<<te),ge=s.canonical.y-(s.canonical.y>>te<<te),Ce=(s.canonical.x>>te)-L.canonical.x,xe=(s.canonical.y>>te)-L.canonical.y,Ne=a.$<<te;a.bX(W,0,Ne,Ne,0,0,1),a.M(W,W,[ue*a.$+Ce*Ne,ge*a.$+xe*Ne,0])}B.terrainRttPosMatrix32f=new Float32Array(W),w[C]=B}return w}getSourceTile(s,d){const w=this.sourceCache._source;let C=s.overscaledZ-this.deltaZoom;if(C>w.maxzoom&&(C=w.maxzoom),C<w.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(C).key);let L=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!L||!L.dem)&&d)for(;C>=w.minzoom&&(!L||!L.dem);)L=this.sourceCache.getTileByID(s.scaledTo(C--).key);return L}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,d){return d[s.canonical.z]&&s.canonical.x>=d[s.canonical.z].minTileX&&s.canonical.x<=d[s.canonical.z].maxTileX&&s.canonical.y>=d[s.canonical.z].minTileY&&s.canonical.y<=d[s.canonical.z].maxTileY}}class Ka{constructor(s,d,w){this._meshCache={},this.painter=s,this.sourceCache=new zs(d),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,w,C=a.$){var L;if(!(d>=0&&d<C&&w>=0&&w<C))return 0;const B=this.getTerrainData(s),W=(L=B.tile)===null||L===void 0?void 0:L.dem;if(!W)return 0;const te=a.cr([],[d/C*a.$,w/C*a.$],B.u_terrain_matrix),ue=[te[0]*W.dim,te[1]*W.dim],ge=Math.floor(ue[0]),Ce=Math.floor(ue[1]),xe=ue[0]-ge,Ne=ue[1]-Ce;return W.get(ge,Ce)*(1-xe)*(1-Ne)+W.get(ge+1,Ce)*xe*(1-Ne)+W.get(ge,Ce+1)*(1-xe)*Ne+W.get(ge+1,Ce+1)*xe*Ne}getElevationForLngLatZoom(s,d){if(!a.cs(d,s.wrap()))return 0;const{tileID:w,mercatorX:C,mercatorY:L}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(w,C%a.$,L%a.$,a.$)}getElevation(s,d,w,C=a.$){return this.getDEMElevation(s,d,w,C)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const C=this.painter.context,L=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(C,L,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(C,new a.R({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.af([])}const d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const C=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new a.T(C,d.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),d.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const w=d&&d+d.tileID.key+s.key;if(w&&!this._demMatrixCache[w]){const C=this.sourceCache.sourceCache._source.maxzoom;let L=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=C?L=s.canonical.z-C:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=s.canonical.x-(s.canonical.x>>L<<L),W=s.canonical.y-(s.canonical.y>>L<<L),te=a.ct(new Float64Array(16),[1/(a.$<<L),1/(a.$<<L),0]);a.M(te,te,[B*a.$,W*a.$,0]),this._demMatrixCache[s.key]={matrix:te,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){const d=this.painter,w=d.width/devicePixelRatio,C=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(d.context,{width:w,height:C,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(d.context,{width:w,height:C,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(w,C,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,w,C))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let L=0,B=0;L<this._coordsTextureSize;L++)for(let W=0;W<this._coordsTextureSize;W++,B+=4)d[B+0]=255&W,d[B+1]=255&L,d[B+2]=W>>8<<4|L>>8,d[B+3]=0;const w=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),C=new a.T(s,w,s.gl.RGBA,{premultiply:!1});return C.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),w=this.painter.context,C=w.gl,L=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),B=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),W=Math.round(this.painter.height/devicePixelRatio);w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(L,W-B-1,1,1,C.RGBA,C.UNSIGNED_BYTE,d),w.bindFramebuffer.set(null);const te=d[0]+(d[2]>>4<<8),ue=d[1]+((15&d[2])<<8),ge=this.coordsIndex[255-d[3]],Ce=ge&&this.sourceCache.getTileByID(ge);if(!Ce)return null;const xe=this._coordsTextureSize,Ne=(1<<Ce.tileID.canonical.z)*xe;return new a.a0((Ce.tileID.canonical.x*xe+te)/Ne+Ce.tileID.wrap,(Ce.tileID.canonical.y*xe+ue)/Ne,this.getElevation(Ce.tileID,te,ue,xe))}depthAtPoint(s){const d=new Uint8Array(4),w=this.painter.context,C=w.gl;return w.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),C.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,d),w.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(s){var d;const w=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,C=w&&s.canonical.y===0,L=w&&s.canonical.y===(1<<s.canonical.z)-1,B=`m_${C?"n":""}_${L?"s":""}`;if(this._meshCache[B])return this._meshCache[B];const W=this.painter.context,te=new a.cu,ue=new a.aM,ge=this.meshSize,Ce=a.$/ge,xe=ge*ge;for(let Pt=0;Pt<=ge;Pt++)for(let Zt=0;Zt<=ge;Zt++)te.emplaceBack(Zt*Ce,Pt*Ce,0);for(let Pt=0;Pt<xe;Pt+=ge+1)for(let Zt=0;Zt<ge;Zt++)ue.emplaceBack(Zt+Pt,ge+Zt+Pt+1,ge+Zt+Pt+2),ue.emplaceBack(Zt+Pt,ge+Zt+Pt+2,Zt+Pt+1);const Ne=te.length,We=Ne+(ge+1),ut=(ge+1)*ge,lt=C?a.bg:0,ct=C?0:1,vt=L?a.bh:a.$,Dt=L?0:1;for(let Pt=0;Pt<=ge;Pt++)te.emplaceBack(Pt*Ce,lt,ct);for(let Pt=0;Pt<=ge;Pt++)te.emplaceBack(Pt*Ce,vt,Dt);for(let Pt=0;Pt<ge;Pt++)ue.emplaceBack(ut+Pt,We+Pt,We+Pt+1),ue.emplaceBack(ut+Pt,We+Pt+1,ut+Pt+1),ue.emplaceBack(0+Pt,Ne+Pt+1,Ne+Pt),ue.emplaceBack(0+Pt,0+Pt+1,Ne+Pt+1);const It=te.length,Ft=It+2*(ge+1);for(const Pt of[0,1])for(let Zt=0;Zt<=ge;Zt++)for(const _r of[0,1])te.emplaceBack(Pt*a.$,Zt*Ce,_r);for(let Pt=0;Pt<2*ge;Pt+=2)ue.emplaceBack(It+Pt,It+Pt+1,It+Pt+3),ue.emplaceBack(It+Pt,It+Pt+3,It+Pt+2),ue.emplaceBack(Ft+Pt,Ft+Pt+3,Ft+Pt+1),ue.emplaceBack(Ft+Pt,Ft+Pt+2,Ft+Pt+3);const qt=new Jt(W.createVertexBuffer(te,co.members),W.createIndexBuffer(ue),a.aL.simpleSegment(0,0,te.length,ue.length));return this._meshCache[B]=qt,qt}getMeshFrameDelta(s){return 2*Math.PI*a.bt/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,d){var w;const{tileID:C}=this._getOverscaledTileIDFromLngLatZoom(s,d);return(w=this.getMinMaxElevation(C).minElevation)!==null&&w!==void 0?w:0}getMinMaxElevation(s){const d=this.getTerrainData(s).tile,w={minElevation:null,maxElevation:null};return d&&d.dem&&(w.minElevation=d.dem.min*this.exaggeration,w.maxElevation=d.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(s,d){const w=a.a0.fromLngLat(s.wrap()),C=(1<<d)*a.$,L=w.x*C,B=w.y*C,W=Math.floor(L/a.$),te=Math.floor(B/a.$);return{tileID:new a.Z(d,0,d,W,te),mercatorX:L,mercatorY:B}}}class mo{constructor(s,d,w){this._context=s,this._size=d,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(w.texture),{id:s,fbo:d,texture:w,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((d=>s.id!==d)),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((s=>!s.inUse))===!1}}const Jr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class pn{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new mo(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter((w=>!s._layers[w].isHidden(d))),this._coordsAscending={};for(const w in s.sourceCaches){this._coordsAscending[w]={};const C=s.sourceCaches[w].getVisibleCoordinates(),L=s.sourceCaches[w].getSource(),B=L instanceof at?L.terrainTileRanges:null;for(const W of C){const te=this.terrain.sourceCache.getTerrainCoords(W,B);for(const ue in te)this._coordsAscending[w][ue]||(this._coordsAscending[w][ue]=[]),this._coordsAscending[w][ue].push(te[ue])}}this._coordsAscendingStr={};for(const w of s._order){const C=s._layers[w],L=C.source;if(Jr[C.type]&&!this._coordsAscendingStr[L]){this._coordsAscendingStr[L]={};for(const B in this._coordsAscending[L])this._coordsAscendingStr[L][B]=this._coordsAscending[L][B].map((W=>W.key)).sort().join()}}for(const w of this._renderableTiles)for(const C in this._coordsAscendingStr){const L=this._coordsAscendingStr[C][w.tileID.key];L&&L!==w.rttCoords[C]&&(w.rtt=[])}}renderLayer(s,d){if(s.isHidden(this.painter.transform.zoom))return!1;const w=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),C=s.type,L=this.painter,B=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Jr[C]&&(this._prevType&&Jr[this._prevType]||this._stacks.push([]),this._prevType=C,this._stacks[this._stacks.length-1].push(s.id),!B))return!0;if(Jr[this._prevType]||Jr[C]&&B){this._prevType=C;const W=this._stacks.length-1,te=this._stacks[W]||[];for(const ue of this._renderableTiles){if(this.pool.isFull()&&(uo(this.painter,this.terrain,this._rttTiles,w),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ue),ue.rtt[W]){const Ce=this.pool.getObjectForId(ue.rtt[W].id);if(Ce.stamp===ue.rtt[W].stamp){this.pool.useObject(Ce);continue}}const ge=this.pool.getOrCreateFreeObject();this.pool.useObject(ge),this.pool.stampObject(ge),ue.rtt[W]={id:ge.id,stamp:ge.stamp},L.context.bindFramebuffer.set(ge.fbo.framebuffer),L.context.clear({color:a.be.transparent,stencil:0}),L.currentStencilSource=void 0;for(let Ce=0;Ce<te.length;Ce++){const xe=L.style._layers[te[Ce]],Ne=xe.source?this._coordsAscending[xe.source][ue.tileID.key]:[ue.tileID];L.context.viewport.set([0,0,ge.fbo.width,ge.fbo.height]),L._renderTileClippingMasks(xe,Ne,!0),L.renderLayer(L,L.style.sourceCaches[xe.source],xe,Ne,w),xe.source&&(ue.rttCoords[xe.source]=this._coordsAscendingStr[xe.source][ue.tileID.key])}}return uo(this.painter,this.terrain,this._rttTiles,w),this._rttTiles=[],this.pool.freeAllObjects(),Jr[C]}return!1}}const Ba={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ra=c,wo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ni,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},za={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class go{constructor(s,d,w=!1){this.mousedown=L=>{this.startMove(L,b.mousePos(this.element,L)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=L=>{this.move(L,b.mousePos(this.element,L))},this.mouseup=L=>{this._rotatePitchHanlder.dragEnd(L),this.offTemp()},this.touchstart=L=>{L.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,L.targetTouches)[0],this.startMove(L,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=L=>{L.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,L.targetTouches)[0],this.move(L,this._lastPos))},this.touchend=L=>{L.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const C=new Ee;this._rotatePitchHanlder=new kd({clickTolerance:3,move:(L,B)=>{const W=d.getBoundingClientRect(),te=new a.P((W.bottom-W.top)/2,(W.right-W.left)/2);return{bearingDelta:a.cm(new a.P(L.x,B.y),B,te),pitchDelta:w?-.5*(B.y-L.y):void 0}},moveStateManager:C,enable:!0,assignEvents:()=>{}}),this.map=s,b.addEventListener(d,"mousedown",this.mousedown),b.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(d,"touchcancel",this.reset)}startMove(s,d){this._rotatePitchHanlder.dragStart(s,d),b.disableDrag()}move(s,d){const w=this.map,{bearingDelta:C,pitchDelta:L}=this._rotatePitchHanlder.dragMove(s,d)||{};C&&w.setBearing(w.getBearing()+C),L&&w.setPitch(w.getPitch()+L)}off(){const s=this.element;b.removeEventListener(s,"mousedown",this.mousedown),b.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let ca;function ba(A,s,d,w=!1){if(w||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return A?.wrap();const C=new a.S(A.lng,A.lat);if(A=new a.S(A.lng,A.lat),s){const L=new a.S(A.lng-360,A.lat),B=new a.S(A.lng+360,A.lat),W=d.locationToScreenPoint(A).distSqr(s);d.locationToScreenPoint(L).distSqr(s)<W?A=L:d.locationToScreenPoint(B).distSqr(s)<W&&(A=B)}for(;Math.abs(A.lng-d.center.lng)>180;){const L=d.locationToScreenPoint(A);if(L.x>=0&&L.y>=0&&L.x<=d.width&&L.y<=d.height)break;A.lng>d.center.lng?A.lng-=360:A.lng+=360}return A.lng!==C.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(A))?A:C}const ja={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hi(A,s,d){const w=A.classList;for(const C in ja)w.remove(`maplibregl-${d}-anchor-${C}`);w.add(`maplibregl-${d}-anchor-${s}`)}class zi extends a.E{constructor(s){if(super(),this._onKeyPress=d=>{const w=d.code,C=d.charCode||d.keyCode;w!=="Space"&&w!=="Enter"&&C!==32&&C!==13||this.togglePopup()},this._onMapClick=d=>{const w=d.originalEvent.target,C=this._element;this._popup&&(w===C||C.contains(w))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();(d?.type==="terrain"||d?.type==="render"&&!w)&&this._map.once("render",this._update),this._lngLat=ba(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let L="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?L="rotateX(0deg)":this._pitchAlignment==="map"&&(L=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${ja[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${L} ${C}`),x.frameAsync(new AbortController).then((()=>{this._updateOpacity(d&&d.type==="moveend")})).catch((()=>{}))},this._onMove=d=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s?.opacity,s?.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");const d=b.createNS("http://www.w3.org/2000/svg","svg"),w=41,C=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${w}px`),d.setAttributeNS(null,"width",`${C}px`),d.setAttributeNS(null,"viewBox",`0 0 ${C} ${w}`);const L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"stroke","none"),L.setAttributeNS(null,"stroke-width","1"),L.setAttributeNS(null,"fill","none"),L.setAttributeNS(null,"fill-rule","evenodd");const B=b.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const W=b.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(3.0, 29.0)"),W.setAttributeNS(null,"fill","#000000");const te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ct of te){const vt=b.createNS("http://www.w3.org/2000/svg","ellipse");vt.setAttributeNS(null,"opacity","0.04"),vt.setAttributeNS(null,"cx","10.5"),vt.setAttributeNS(null,"cy","5.80029008"),vt.setAttributeNS(null,"rx",ct.rx),vt.setAttributeNS(null,"ry",ct.ry),W.appendChild(vt)}const ue=b.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"fill",this._color);const ge=b.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ue.appendChild(ge);const Ce=b.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"opacity","0.25"),Ce.setAttributeNS(null,"fill","#000000");const xe=b.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ce.appendChild(xe);const Ne=b.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ne.setAttributeNS(null,"fill","#FFFFFF");const We=b.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ut=b.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#000000"),ut.setAttributeNS(null,"opacity","0.25"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962");const lt=b.createNS("http://www.w3.org/2000/svg","circle");lt.setAttributeNS(null,"fill","#FFFFFF"),lt.setAttributeNS(null,"cx","5.5"),lt.setAttributeNS(null,"cy","5.5"),lt.setAttributeNS(null,"r","5.4999962"),We.appendChild(ut),We.appendChild(lt),B.appendChild(W),B.appendChild(ue),B.appendChild(Ce),B.appendChild(Ne),B.appendChild(We),d.appendChild(B),d.setAttributeNS(null,"height",w*this._scale+"px"),d.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(d),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(d=>{d.preventDefault()})),this._element.addEventListener("mousedown",(d=>{d.preventDefault()})),Hi(this._element,this._anchor,"marker"),s&&s.className)for(const d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const C=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var d,w;const C=(d=this._map)===null||d===void 0?void 0:d.terrain,L=this._map.transform.isLocationOccluded(this._lngLat);if(!C||L){const Ne=L?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ne&&(this._element.style.opacity=Ne))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const B=this._map,W=B.terrain.depthAtPoint(this._pos),te=B.terrain.getElevationForLngLatZoom(this._lngLat,B.transform.tileZoom);if(B.transform.lngLatToCameraDepth(this._lngLat,te)-W<.006)return void(this._element.style.opacity=this._opacity);const ue=-this._offset.y/B.transform.pixelsPerMeter,ge=Math.sin(B.getPitch()*Math.PI/180)*ue,Ce=B.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),xe=B.transform.lngLatToCameraDepth(this._lngLat,te+ge)-Ce>.006;!((w=this._popup)===null||w===void 0)&&w.isOpen()&&xe&&this._popup.remove(),this._element.style.opacity=xe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,d){return(this._opacity===void 0||s===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const vl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ro=0,So=!1;const tl={maxWidth:100,unit:"metric"};function fa(A,s,d){const w=d&&d.maxWidth||100,C=A._container.clientHeight/2,L=A._container.clientWidth/2,B=A.unproject([L-w/2,C]),W=A.unproject([L+w/2,C]),te=Math.round(A.project(W).x-A.project(B).x),ue=Math.min(w,te,A._container.clientWidth),ge=B.distanceTo(W);if(d&&d.unit==="imperial"){const Ce=3.2808*ge;Ce>5280?Go(s,ue,Ce/5280,A._getUIString("ScaleControl.Miles")):Go(s,ue,Ce,A._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Go(s,ue,ge/1852,A._getUIString("ScaleControl.NauticalMiles")):ge>=1e3?Go(s,ue,ge/1e3,A._getUIString("ScaleControl.Kilometers")):Go(s,ue,ge,A._getUIString("ScaleControl.Meters"))}function Go(A,s,d,w){const C=(function(L){const B=Math.pow(10,`${Math.floor(L)}`.length-1);let W=L/B;return W=W>=10?10:W>=5?5:W>=3?3:W>=2?2:W>=1?1:(function(te){const ue=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*ue)/ue})(W),B*W})(d);A.style.width=s*(C/d)+"px",A.innerHTML=`${C}&nbsp;${w}`}const rl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},rc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ru(A){if(A){if(typeof A=="number"){const s=Math.round(Math.abs(A)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,A),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-A),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(A,0),right:new a.P(-A,0)}}if(A instanceof a.P||Array.isArray(A)){const s=a.P.convert(A);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(A.center||[0,0]),top:a.P.convert(A.top||[0,0]),"top-left":a.P.convert(A["top-left"]||[0,0]),"top-right":a.P.convert(A["top-right"]||[0,0]),bottom:a.P.convert(A.bottom||[0,0]),"bottom-left":a.P.convert(A["bottom-left"]||[0,0]),"bottom-right":a.P.convert(A["bottom-right"]||[0,0]),left:a.P.convert(A.left||[0,0]),right:a.P.convert(A.right||[0,0])}}return ru(new a.P(0,0))}const Ho=c;l.AJAXError=a.cy,l.Event=a.l,l.Evented=a.E,l.LngLat=a.S,l.MercatorCoordinate=a.a0,l.Point=a.P,l.addProtocol=a.cz,l.config=a.a,l.removeProtocol=a.cA,l.AttributionControl=va,l.BoxZoomHandler=Qh,l.CanvasSource=hr,l.CooperativeGesturesHandler=Lo,l.DoubleClickZoomHandler=Zr,l.DragPanHandler=wi,l.DragRotateHandler=zn,l.EdgeInsets=Yr,l.FullscreenControl=class extends a.E{constructor(A={}){super(),this._onFullscreenChange=()=>{var s;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=d?.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,A&&A.container&&(A.container instanceof HTMLElement?this._container=A.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(A){return this._map=A,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const A=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",A).setAttribute("aria-hidden","true"),A.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const A=this._getTitle();this._fullscreenButton.setAttribute("aria-label",A),this._fullscreenButton.title=A}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Gt,l.GeolocateControl=class extends a.E{constructor(A){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const d=new a.S(s.coords.longitude,s.coords.latitude),w=s.coords.accuracy,C=this._map.getBearing(),L=a.e({bearing:C},this.options.fitBoundsOptions),B=Mt.fromLngLat(d,w);this._map.fitBounds(B,L,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const d=new a.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&So)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zi({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},vl,A)}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(s=!1){if(ca!==void 0&&!s)return ca;if(window.navigator.permissions===void 0)return ca=!!window.navigator.geolocation,ca;try{ca=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ca=!!window.navigator.geolocation}return ca}))})().then((s=>this._finishSetupUI(s))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ro=0,So=!1}_isOutOfMapMaxBounds(A){const s=this._map.getMaxBounds(),d=A.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const A=this._map.getBounds(),s=A.getSouthEast(),d=A.getNorthEast(),w=s.distanceTo(d),C=Math.ceil(this._accuracy/(w/this._map._container.clientHeight)*2);this._circleElement.style.width=`${C}px`,this._circleElement.style.height=`${C}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ro--,So=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let A;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ro++,Ro>1?(A={maximumAge:6e5,timeout:0},So=!0):(A=this.options.positionOptions,So=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,A)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var A;const s=(A=this._map.getProjection())===null||A===void 0?void 0:A.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var A;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((A=this._map.getProjection())===null||A===void 0?void 0:A.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=pf,l.ImageSource=at,l.KeyboardHandler=Dr,l.LngLatBounds=Mt,l.LogoControl=Uo,l.Map=class extends Dn{constructor(A){var s,d;a.cv.mark(a.cw.create);const w=Object.assign(Object.assign(Object.assign({},wo),A),{canvasContextAttributes:Object.assign(Object.assign({},wo.canvasContextAttributes),A.canvasContextAttributes)});if(w.minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const C=new ti,L=new Ii;if(w.minZoom!==void 0&&C.setMinZoom(w.minZoom),w.maxZoom!==void 0&&C.setMaxZoom(w.maxZoom),w.minPitch!==void 0&&C.setMinPitch(w.minPitch),w.maxPitch!==void 0&&C.setMaxPitch(w.maxPitch),w.renderWorldCopies!==void 0&&C.setRenderWorldCopies(w.renderWorldCopies),super(C,L,{bearingSnap:w.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Bs,this._controls=[],this._mapId=a.a6(),this._contextLost=W=>{W.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:W}))},this._contextRestored=W=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:W}))},this._onMapScroll=W=>{if(W.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=w.interactive,this._maxTileCacheSize=w.maxTileCacheSize,this._maxTileCacheZoomLevels=w.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},w.canvasContextAttributes),this._trackResize=w.trackResize===!0,this._bearingSnap=w.bearingSnap,this._centerClampedToGround=w.centerClampedToGround,this._refreshExpiredTiles=w.refreshExpiredTiles===!0,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions===!0,this._collectResourceTiming=w.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ba),w.locale),this._clickTolerance=w.clickTolerance,this._overridePixelRatio=w.pixelRatio,this._maxCanvasSize=w.maxCanvasSize,this.transformCameraUpdate=w.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=w.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=D.addThrottleControl((()=>this.isMoving())),this._requestManager=new q(w.transformRequest),typeof w.container=="string"){if(this._container=document.getElementById(w.container),!this._container)throw new Error(`Container '${w.container}' not found.`)}else{if(!(w.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let W=!1;const te=el((ue=>{this._trackResize&&!this._removed&&(this.resize(ue),this.redraw())}),50);this._resizeObserver=new ResizeObserver((ue=>{W?te(ue):W=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ya(this,w),this._hash=w.hash&&new pf(typeof w.hash=="string"&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,roll:w.roll}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,a.e({},w.fitBoundsOptions,{duration:0}))));const B=typeof w.style=="string"||((d=(s=w.style)===null||s===void 0?void 0:s.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,B),this._localIdeographFontFamily=w.localIdeographFontFamily,this._validateStyle=w.validateStyle,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new va(typeof w.attributionControl=="boolean"?void 0:w.attributionControl)),w.maplibreLogo&&this.addControl(new Uo,w.logoPosition),this.on("style.load",(()=>{if(B||this._resizeTransform(),this.transform.unmodified){const W=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(W)}})),this.on("data",(W=>{this._update(W.dataType==="style"),this.fire(new a.l(`${W.dataType}data`,W))})),this.on("dataloading",(W=>{this.fire(new a.l(`${W.dataType}dataloading`,W))})),this.on("dataabort",(W=>{this.fire(new a.l("sourcedataabort",W))}))}_getMapId(){return this._mapId}setGlobalStateProperty(A,s){return this.style.setGlobalStateProperty(A,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(A,s){if(s===void 0&&(s=A.getDefaultPosition?A.getDefaultPosition():"top-right"),!A||!A.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=A.onAdd(this);this._controls.push(A);const w=this._controlPositions[s];return s.indexOf("bottom")!==-1?w.insertBefore(d,w.firstChild):w.appendChild(d),this}removeControl(A){if(!A||!A.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(A);return s>-1&&this._controls.splice(s,1),A.onRemove(this),this}hasControl(A){return this._controls.indexOf(A)>-1}calculateCameraOptionsFromTo(A,s,d,w){return w==null&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(A,s,d,w)}resize(A,s=!0){const[d,w]=this._containerDimensions(),C=this._getClampedPixelRatio(d,w);if(this._resizeCanvas(d,w,C),this.painter.resize(d,w,C),this.painter.overLimit()){const B=this.painter.context.gl;this._maxCanvasSize=[B.drawingBufferWidth,B.drawingBufferHeight];const W=this._getClampedPixelRatio(d,w);this._resizeCanvas(d,w,W),this.painter.resize(d,w,W)}this._resizeTransform(s);const L=!this._moving;return L&&(this.stop(),this.fire(new a.l("movestart",A)).fire(new a.l("move",A))),this.fire(new a.l("resize",A)),L&&this.fire(new a.l("moveend",A)),this}_resizeTransform(A=!0){var s;const[d,w]=this._containerDimensions();this.transform.resize(d,w,A),(s=this._requestedCameraState)===null||s===void 0||s.resize(d,w,A)}_getClampedPixelRatio(A,s){const{0:d,1:w}=this._maxCanvasSize,C=this.getPixelRatio(),L=A*C,B=s*C;return Math.min(L>d?d/L:1,B>w?w/B:1)*C}getPixelRatio(){var A;return(A=this._overridePixelRatio)!==null&&A!==void 0?A:devicePixelRatio}setPixelRatio(A){this._overridePixelRatio=A,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(A){return this.transform.setMaxBounds(Mt.convert(A)),this._update()}setMinZoom(A){if((A=A??-2)>=-2&&A<=this.transform.maxZoom)return this.transform.setMinZoom(A),this._update(),this.getZoom()<A&&this.setZoom(A),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(A){if((A=A??22)>=this.transform.minZoom)return this.transform.setMaxZoom(A),this._update(),this.getZoom()>A&&this.setZoom(A),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(A){if((A=A??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(A>=0&&A<=this.transform.maxPitch)return this.transform.setMinPitch(A),this._update(),this.getPitch()<A&&this.setPitch(A),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(A){if((A=A??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(A>=this.transform.minPitch)return this.transform.setMaxPitch(A),this._update(),this.getPitch()>A&&this.setPitch(A),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(A){return this.transform.setRenderWorldCopies(A),this._update()}project(A){return this.transform.locationToScreenPoint(a.S.convert(A),this.style&&this.terrain)}unproject(A){return this.transform.screenPointToLocation(a.P.convert(A),this.terrain)}isMoving(){var A;return this._moving||((A=this.handlers)===null||A===void 0?void 0:A.isMoving())}isZooming(){var A;return this._zooming||((A=this.handlers)===null||A===void 0?void 0:A.isZooming())}isRotating(){var A;return this._rotating||((A=this.handlers)===null||A===void 0?void 0:A.isRotating())}_createDelegatedListener(A,s,d){if(A==="mouseenter"||A==="mouseover"){let w=!1;return{layers:s,listener:d,delegates:{mousemove:L=>{const B=s.filter((te=>this.getLayer(te))),W=B.length!==0?this.queryRenderedFeatures(L.point,{layers:B}):[];W.length?w||(w=!0,d.call(this,new Fs(A,this,L.originalEvent,{features:W}))):w=!1},mouseout:()=>{w=!1}}}}if(A==="mouseleave"||A==="mouseout"){let w=!1;return{layers:s,listener:d,delegates:{mousemove:B=>{const W=s.filter((te=>this.getLayer(te)));(W.length!==0?this.queryRenderedFeatures(B.point,{layers:W}):[]).length?w=!0:w&&(w=!1,d.call(this,new Fs(A,this,B.originalEvent)))},mouseout:B=>{w&&(w=!1,d.call(this,new Fs(A,this,B.originalEvent)))}}}}{const w=C=>{const L=s.filter((W=>this.getLayer(W))),B=L.length!==0?this.queryRenderedFeatures(C.point,{layers:L}):[];B.length&&(C.features=B,d.call(this,C),delete C.features)};return{layers:s,listener:d,delegates:{[A]:w}}}}_saveDelegatedListener(A,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[A]=this._delegatedListeners[A]||[],this._delegatedListeners[A].push(s)}_removeDelegatedListener(A,s,d){if(!this._delegatedListeners||!this._delegatedListeners[A])return;const w=this._delegatedListeners[A];for(let C=0;C<w.length;C++){const L=w[C];if(L.listener===d&&L.layers.length===s.length&&L.layers.every((B=>s.includes(B)))){for(const B in L.delegates)this.off(B,L.delegates[B]);return void w.splice(C,1)}}}on(A,s,d){if(d===void 0)return super.on(A,s);const w=typeof s=="string"?[s]:s,C=this._createDelegatedListener(A,w,d);this._saveDelegatedListener(A,C);for(const L in C.delegates)this.on(L,C.delegates[L]);return{unsubscribe:()=>{this._removeDelegatedListener(A,w,d)}}}once(A,s,d){if(d===void 0)return super.once(A,s);const w=typeof s=="string"?[s]:s,C=this._createDelegatedListener(A,w,d);for(const L in C.delegates){const B=C.delegates[L];C.delegates[L]=(...W)=>{this._removeDelegatedListener(A,w,d),B(...W)}}this._saveDelegatedListener(A,C);for(const L in C.delegates)this.once(L,C.delegates[L]);return this}off(A,s,d){return d===void 0?super.off(A,s):(this._removeDelegatedListener(A,typeof s=="string"?[s]:s,d),this)}queryRenderedFeatures(A,s){if(!this.style)return[];let d;const w=A instanceof a.P||Array.isArray(A),C=w?A:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(w?{}:A)||{},C instanceof a.P||typeof C[0]=="number")d=[a.P.convert(C)];else{const L=a.P.convert(C[0]),B=a.P.convert(C[1]);d=[L,new a.P(B.x,L.y),B,new a.P(L.x,B.y),L]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(A,s){return this.style.querySourceFeatures(A,s)}setStyle(A,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&A?(this._diffStyle(A,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(A,s))}setTransformRequest(A){return this._requestManager.setTransformRequest(A),this}_getUIString(A){const s=this._locale[A];if(s==null)throw new Error(`Missing UI string '${A}'`);return s}_updateStyle(A,s){var d,w;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(A,s)));const C=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!A)),A?(this.style=new rs(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof A=="string"?this.style.loadURL(A,s,C):this.style.loadJSON(A,s,C),this):((w=(d=this.style)===null||d===void 0?void 0:d.projection)===null||w===void 0||w.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new rs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(A,s){if(typeof A=="string"){const d=this._requestManager.transformRequest(A,"Style");a.j(d,new AbortController).then((w=>{this._updateDiff(w.data,s)})).catch((w=>{w&&this.fire(new a.k(w))}))}else typeof A=="object"&&this._updateDiff(A,s)}_updateDiff(A,s){try{this.style.setState(A,s)&&this._update(!0)}catch(d){a.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(A,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(A,s){return this._lazyInitEmptyStyle(),this.style.addSource(A,s),this._update(!0)}isSourceLoaded(A){const s=this.style&&this.style.sourceCaches[A];if(s!==void 0)return s.loaded();this.fire(new a.k(new Error(`There is no source with ID '${A}'`)))}setTerrain(A){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),A){const s=this.style.sourceCaches[A.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${A.source}`);this.terrain===null&&s.reload();for(const d in this.style._layers){const w=this.style._layers[d];w.type==="hillshade"&&w.source===A.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),w.type==="color-relief"&&w.source===A.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ka(this.painter,s,A),this.painter.renderToTexture=new pn(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var w;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==A.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((w=d.source)===null||w===void 0?void 0:w.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:A})),this}getTerrain(){var A,s;return(s=(A=this.terrain)===null||A===void 0?void 0:A.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const A=this.style&&this.style.sourceCaches;for(const s in A){const d=A[s]._tiles;for(const w in d){const C=d[w];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}removeSource(A){return this.style.removeSource(A),this._update(!0)}getSource(A){return this.style.getSource(A)}setSourceTileLodParams(A,s,d){if(d){const w=this.getSource(d);if(!w)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);w.calculateTileZoom=Ot(Math.max(1,A),Math.max(1,s))}else for(const w in this.style.sourceCaches)this.style.sourceCaches[w].getSource().calculateTileZoom=Ot(Math.max(1,A),Math.max(1,s));return this._update(!0),this}refreshTiles(A,s){const d=this.style.sourceCaches[A];if(!d)throw new Error(`There is no source cache with ID "${A}", cannot refresh tile`);s===void 0?d.reload(!0):d.refreshTiles(s.map((w=>new a.a3(w.z,w.x,w.y))))}addImage(A,s,d={}){const{pixelRatio:w=1,sdf:C=!1,stretchX:L,stretchY:B,content:W,textFitWidth:te,textFitHeight:ue}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ge,height:Ce,data:xe}=s,Ne=s;return this.style.addImage(A,{data:new a.R({width:ge,height:Ce},new Uint8Array(xe)),pixelRatio:w,stretchX:L,stretchY:B,content:W,textFitWidth:te,textFitHeight:ue,sdf:C,version:0,userImage:Ne}),Ne.onAdd&&Ne.onAdd(this,A),this}}{const{width:ge,height:Ce,data:xe}=x.getImageData(s);this.style.addImage(A,{data:new a.R({width:ge,height:Ce},xe),pixelRatio:w,stretchX:L,stretchY:B,content:W,textFitWidth:te,textFitHeight:ue,sdf:C,version:0})}}updateImage(A,s){const d=this.style.getImage(A);if(!d)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=s instanceof HTMLImageElement||a.b(s)?x.getImageData(s):s,{width:C,height:L,data:B}=w;if(C===void 0||L===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==d.data.width||L!==d.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const W=!(s instanceof HTMLImageElement||a.b(s));return d.data.replace(B,W),this.style.updateImage(A,d),this}getImage(A){return this.style.getImage(A)}hasImage(A){return A?!!this.style.getImage(A):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(A){this.style.removeImage(A)}loadImage(A){return D.getImage(this._requestManager.transformRequest(A,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(A,s){return this._lazyInitEmptyStyle(),this.style.addLayer(A,s),this._update(!0)}moveLayer(A,s){return this.style.moveLayer(A,s),this._update(!0)}removeLayer(A){return this.style.removeLayer(A),this._update(!0)}getLayer(A){return this.style.getLayer(A)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(A,s,d){return this.style.setLayerZoomRange(A,s,d),this._update(!0)}setFilter(A,s,d={}){return this.style.setFilter(A,s,d),this._update(!0)}getFilter(A){return this.style.getFilter(A)}setPaintProperty(A,s,d,w={}){return this.style.setPaintProperty(A,s,d,w),this._update(!0)}getPaintProperty(A,s){return this.style.getPaintProperty(A,s)}setLayoutProperty(A,s,d,w={}){return this.style.setLayoutProperty(A,s,d,w),this._update(!0)}getLayoutProperty(A,s){return this.style.getLayoutProperty(A,s)}setGlyphs(A,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(A,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(A,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(A,s,d,(w=>{w||this._update(!0)})),this}removeSprite(A){return this._lazyInitEmptyStyle(),this.style.removeSprite(A),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(A,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(A,s,(d=>{d||this._update(!0)})),this}setLight(A,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(A,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(A,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(A,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(A,s){return this.style.setFeatureState(A,s),this._update()}removeFeatureState(A,s){return this.style.removeFeatureState(A,s),this._update()}getFeatureState(A){return this.style.getFeatureState(A)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let A=0,s=0;return this._container&&(A=this._container.clientWidth||400,s=this._container.clientHeight||300),[A,s]}_setupContainer(){const A=this._container;A.classList.add("maplibregl-map");const s=this._canvasContainer=b.create("div","maplibregl-canvas-container",A);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),w=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],w);const C=this._controlContainer=b.create("div","maplibregl-control-container",A),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((B=>{L[B]=b.create("div",`maplibregl-ctrl-${B} `,C)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(A,s,d){this._canvas.width=Math.floor(d*A),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${A}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const A=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",(w=>{s={requestedAttributes:A},w&&(s.statusMessage=w.statusMessage,s.type=w.type)}),{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,A):this._canvas.getContext("webgl2",A)||this._canvas.getContext("webgl",A),!d){const w="Failed to initialize WebGL";throw s?(s.message=w,new Error(JSON.stringify(s))):new Error(w)}this.painter=new Vo(d,this.transform),S.testSupport(d)}migrateProjection(A,s){super.migrateProjection(A,s),this.painter.transform=A,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(A){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||A,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(A){return this._update(),this._renderTaskQueue.add(A)}_cancelRenderFrame(A){this._renderTaskQueue.remove(A)}_render(A){var s,d,w,C,L;const B=this._idleTriggered?this._fadeDuration:0,W=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(A),this._removed)return;let te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ce=this.transform.zoom,xe=x.now();this.style.zoomHistory.update(Ce,xe);const Ne=new a.F(Ce,{now:xe,fadeDuration:B,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),We=Ne.crossFadingFactor();We===1&&We===this._crossFadingFactor||(te=!0,this._crossFadingFactor=We),this.style.update(Ne)}const ue=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==W;(w=this.style.projection)===null||w===void 0||w.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((C=this.style.projection)===null||C===void 0?void 0:C.transitionState,(L=this.style.projection)===null||L===void 0?void 0:L.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ue)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,B,this._crossSourceCollisions,ue),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:B,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cv.mark(a.cw.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ge=this._sourcesDirty||this._styleDirty||this._placementDirty;return ge||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ge||(this._fullyLoaded=!0,a.cv.mark(a.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var A;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),D.removeThrottleControl(this._imageQueueHandle),(A=this._resizeObserver)===null||A===void 0||A.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s?.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cv.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frame(this._frameRequest,(A=>{a.cv.frame(A),this._frameRequest=null;try{this._render(A)}catch(s){if(!a.cx(s)&&!(function(d){return d.message===$o})(s))throw s}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(A){this._showTileBoundaries!==A&&(this._showTileBoundaries=A,this._update())}get showPadding(){return!!this._showPadding}set showPadding(A){this._showPadding!==A&&(this._showPadding=A,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(A){this._showCollisionBoxes!==A&&(this._showCollisionBoxes=A,A?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(A){this._showOverdrawInspector!==A&&(this._showOverdrawInspector=A,this._update())}get repaint(){return!!this._repaint}set repaint(A){this._repaint!==A&&(this._repaint=A,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(A){this._vertices=A,this._update()}get version(){return ra}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(A){return this._lazyInitEmptyStyle(),this.style.setProjection(A),this._update(!0)}},l.MapMouseEvent=Fs,l.MapTouchEvent=bu,l.MapWheelEvent=sh,l.Marker=zi,l.NavigationControl=class{constructor(A){this._updateZoomButtons=()=>{const s=this._map.getZoom(),d=s===this._map.getMaxZoom(),w=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,d)=>{const w=this._map._getUIString(`NavigationControl.${d}`);s.title=w,s.setAttribute("aria-label",w)},this.options=a.e({},za,A),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(s=>this._map.zoomIn({},{originalEvent:s}))),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(s=>this._map.zoomOut({},{originalEvent:s}))),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})})),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(A){return this._map=A,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new go(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(A,s){const d=b.create("button",A,this._container);return d.type="button",d.addEventListener("click",s),d}},l.Popup=class extends a.E{constructor(A){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const B of this.options.className.split(" "))this._container.classList.add(B);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ba(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const d=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let w=this.options.anchor;const C=ru(this.options.offset);if(!w){const B=this._container.offsetWidth,W=this._container.offsetHeight;let te;te=d.y+C.bottom.y<W?["top"]:d.y>this._map.transform.height-W?["bottom"]:[],d.x<B/2?te.push("left"):d.x>this._map.transform.width-B/2&&te.push("right"),w=te.length===0?"bottom":te.join("-")}let L=d.add(C[w]);this.options.subpixelPositioning||(L=L.round()),b.setTransform(this._container,`${ja[w]} translate(${L.x}px,${L.y}px)`),Hi(this._container,w,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(rl),A)}addTo(A){return this._map&&this.remove(),this._map=A,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(A){return this._lngLat=a.S.convert(A),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(A){return this.setDOMContent(document.createTextNode(A))}setHTML(A){const s=document.createDocumentFragment(),d=document.createElement("body");let w;for(d.innerHTML=A;w=d.firstChild,w;)s.appendChild(w);return this.setDOMContent(s)}getMaxWidth(){var A;return(A=this._container)===null||A===void 0?void 0:A.style.maxWidth}setMaxWidth(A){return this.options.maxWidth=A,this._update(),this}setDOMContent(A){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(A),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(A){return this._container&&this._container.classList.add(A),this}removeClassName(A){return this._container&&this._container.classList.remove(A),this}setOffset(A){return this.options.offset=A,this._update(),this}toggleClassName(A){if(this._container)return this._container.classList.toggle(A)}setSubpixelPositioning(A){this.options.subpixelPositioning=A}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const A=this._container.querySelector(rc);A&&A.focus()}},l.RasterDEMTileSource=Wt,l.RasterTileSource=tr,l.ScaleControl=class{constructor(A){this._onMove=()=>{fa(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,fa(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},tl),A)}getDefaultPosition(){return"bottom-left"}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",A.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=an,l.Style=rs,l.TerrainControl=class{constructor(A){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=A}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=ir,l.TwoFingersTouchRotateHandler=Sr,l.TwoFingersTouchZoomHandler=bt,l.TwoFingersTouchZoomRotateHandler=Bi,l.VectorTileSource=$e,l.VideoSource=dr,l.addSourceType=(A,s)=>a._(void 0,void 0,void 0,(function*(){if(Cr(A))throw new Error(`A source type called "${A}" already exists.`);((d,w)=>{ur[d]=w})(A,s)})),l.clearPrewarmedResources=function(){const A=_e;A&&(A.isPreloaded()&&A.numActive()===1?(A.release(we),_e=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=Il,l.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return Pr().getRTLTextPluginStatus()},l.getVersion=function(){return Ho},l.getWorkerCount=function(){return Pe.workerCount},l.getWorkerUrl=function(){return a.a.WORKER_URL},l.importScriptInWorkers=function(A){return Ue().broadcast("IS",A)},l.prewarm=function(){Me().acquire(we)},l.setMaxParallelImageRequests=function(A){a.a.MAX_PARALLEL_IMAGE_REQUESTS=A},l.setRTLTextPlugin=function(A,s){return Pr().setRTLTextPlugin(A,s)},l.setWorkerCount=function(A){Pe.workerCount=A},l.setWorkerUrl=function(A){a.a.WORKER_URL=A}}));var o=r;return o}))})(l_)),l_.exports}var p2=vK();const X4=tf(p2);class bK{registeredElements;baseLayers;firstSymbolLayer;eventHandlers;wrapper;initRegisteredElements;addNativeMaplibreFunctionsAndProps;map;style;styleJson;addSource;addControl;on;cleanup;constructor(t){const r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:(a,c,h,g)=>{if(!r.eventHandlers[a])return;typeof h=="string"&&(g=h,h={}),r.eventHandlers[a].push({handler:c,options:h});const v=[a,c];g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].wrapperEvents.push(v))},off:(a,c)=>{r.eventHandlers[a]&&(r.eventHandlers[a]=r.eventHandlers[a].filter(h=>Object.is(h.handler,c)?!1:h))},fire:(a,c)=>{if(!r.eventHandlers[a])return;const h=c||window,g=new Event(a);r.eventHandlers[a].forEach(function(v){v.handler.call(h,g,r,c)})},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:a=>{if(a)return{id:a.id,type:a.type,visible:a.visibility!=="none",baseLayer:r.baseLayers.indexOf(a.id)!==-1}},buildLayerObjects:()=>r.map.style._order.map(a=>r.wrapper.buildLayerObject(r.map.style._layers[a])).filter(a=>typeof a<"u"),refreshLayerState:()=>{r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:()=>typeof r.map.getCenter=="function"?{center:(({lng:a,lat:c})=>({lng:a,lat:c}))(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},refreshViewport:()=>{r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=(a,c)=>{(typeof r.registeredElements[a]>"u"||typeof c<"u"&&c)&&(r.registeredElements[a]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=(a,c,h)=>r.map.style?(h&&typeof h=="string"&&typeof a.id<"u"&&(r.initRegisteredElements(h),r.registeredElements[h].layers.push(a.id),a?.source&&typeof a?.source!="string"&&r.registeredElements[h].sources.push(a.id)),r.map.addLayer(a,c),r.wrapper.fire("addlayer",{layer_id:a.id}),this):this,this.addSource=(a,c,h)=>r.map.style?(h&&typeof h=="string"&&typeof a<"u"&&(r.initRegisteredElements(h),r.registeredElements[h].sources.push(a)),r.map.addSource(a,c),r.wrapper.fire("addsource",{source_id:a}),this):this,this.addImage=(a,c,h,g)=>r.map.style?typeof h=="string"&&typeof g>"u"?r.addImage(a,c,void 0,h):(g&&typeof g=="string"&&typeof a<"u"&&(r.initRegisteredElements(g),r.registeredElements[g].images.push(a)),r.map.addImage(a,c,h),this):this,this.on=(a,c,h,g)=>{if(typeof h=="string"&&typeof c=="function")return r.on.call(r,a,void 0,c,h);let v=[a,c,h];return c||(v=[a,h]),g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].events.push(v)),r.map.on(...v),this},this.addControl=(a,c,h)=>(h&&typeof h=="string"&&(r.initRegisteredElements(h),r.registeredElements[h].controls.push(a)),r.map.addControl(a,c),this),this.cleanup=a=>{r.map.style&&typeof r.registeredElements[a]<"u"&&(r.registeredElements[a].layers.forEach(c=>{r.map.style.getLayer(c)&&r.map.style.removeLayer(c)}),r.registeredElements[a].sources.forEach(c=>{r.map.style.getSource(c)&&r.map.style.removeSource(c)}),r.registeredElements[a].images.forEach(c=>{r.map.hasImage(c)&&r.map.style.removeImage(c)}),r.registeredElements[a].events.forEach(c=>{r.map.off(...c)}),r.registeredElements[a].controls.forEach(c=>{r.map.removeControl(c)}),r.registeredElements[a].wrapperEvents.forEach(c=>{r.wrapper.off(...c)}),r.initRegisteredElements(a,!0))},["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach(a=>{this[a]=(...c)=>(r.map&&r.map.style&&typeof r.map.style[a]=="function"&&r.map.style[a](...c),r.map._update?r.map._update(!0):void 0)}),["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach(a=>{this[a]=(...c)=>r.map&&r.map.style?r.map.style[a](...c):!1}),this.addNativeMaplibreFunctionsAndProps=()=>{Object.getOwnPropertyNames(Object.getPrototypeOf(this.map)).forEach(a=>{typeof this[a]>"u"&&(this[a]=(...c)=>r.map[a](...c))}),Object.keys(this.map).forEach(a=>{typeof this[a]>"u"&&(this[a]=r.map[a])})},["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach(a=>{this[a]=(...c)=>{if(typeof r.map[a]=="function")return r.map[a].call(r.map,...c)}}),(async()=>{typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1&&await fetch(t.mapOptions.style).then(a=>{if(a.ok)return a.json();throw new Error("error loading map style.json")}).then(a=>{a.layers.forEach(c=>{r.baseLayers.push(c.id),!r.firstSymbolLayer&&c.type==="symbol"&&(r.firstSymbolLayer=c.id)}),r.styleJson=a,t.mapOptions.style=a}).catch(a=>{console.log(a)}),r.map=new p2.Map(t.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",()=>{r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",()=>{r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",()=>{r.wrapper.refreshLayerState()}),r.map.on("data",()=>{r.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(r.map,r)})()}}const H9={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},_K=e=>{const t=J.useRef(null),r=J.useRef(null),n=J.useContext(Uh),i=J.useRef(e.mapId),o=J.useRef(!1),l=J.useRef(e.options?.style);return J.useEffect(()=>{const a=i.current;return()=>{o.current=!1,n.removeMap(a),t.current&&(t.current.map?.remove?.(),t.current.cancelled=!0,t.current=null)}},[]),J.useEffect(()=>{o.current||r.current&&(o.current=!0,e?.options?.style&&(l.current=JSON.stringify(e.options.style)),t.current=new bK({mapOptions:{style:"",...e.options,...e?.options?.style?{}:{style:H9?.options?.style},container:r.current},onReady:(a,c)=>{a.once("load",()=>{c?.cancelled?a.remove():(window._map=a,e.mapId?n.registerMap(e.mapId,c):n.setMap(c))})}}))},[e.options,e.mapId]),J.useEffect(()=>{if(t.current?.map&&e?.options?.style){const a=JSON.stringify(e.options.style);l.current!==a&&(l.current=a,t.current.map.setStyle(e.options.style))}},[e?.options?.style]),Z.jsx("div",{ref:r,className:"mapContainer",style:e.style})};_K.defaultProps=H9;function m2(e){const t=J.useContext(Uh),r=J.useRef(!1),n=J.useRef(null),[i,o]=J.useState(),l=J.useRef(void 0),[a,c]=J.useState([]),h=J.useRef(""),g=J.useRef(Vu()),v=J.useCallback(b=>!e?.filter?.includeBaseLayers&&b?.baseLayer?!1:typeof e.filter?.matchLayerIds<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(b.id):b.id.includes(e.filter.matchLayerIds):!0,[e.filter]),x=J.useCallback(()=>{if(!n.current)return;const b=n.current.wrapper.layerState.filter(v),S=JSON.stringify(b);h.current!==S&&(h.current=S,c(b))},[v]);return J.useEffect(()=>{const b=g.current;return()=>{n.current&&(n.current.cleanup(b),n.current=null),r.current=!1}},[]),J.useEffect(()=>{if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}e?.watch?.viewport&&(o(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",()=>{l.current!==n.current?.wrapper.viewportStateString&&o(n.current?.wrapper.viewportState)},g.current)),e?.watch?.layers&&(x(),n.current.wrapper.on("layerchange",x,{includeBaseLayers:e?.filter?.includeBaseLayers,matchLayerIds:e?.filter?.matchLayerIds},g.current))}},[t.mapIds,t,e.mapId,x,e]),{layers:a,viewport:i}}m2.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function da(e){const t=J.useContext(Uh),[r,n]=J.useState({map:void 0,ready:!1}),i=m2({mapId:e?.mapId,watch:{viewport:!1,layers:!!e?.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),o=J.useRef(null),l=J.useRef(Vu()),a=()=>{o.current&&o.current.cleanup(l.current)};return J.useEffect(()=>()=>{a(),o.current=null},[]),J.useEffect(()=>{if(o.current&&o.current.cancelled===!0&&(o.current=null,n({map:void 0,ready:!1})),!(o.current||!t.mapExists(e?.mapId))){if(e?.waitForLayer){let c=!1;if(i?.layers?.forEach(h=>{h.id===e?.waitForLayer&&(c=!0)}),!c)return}o.current=t.getMap(e?.mapId),n({map:o.current,ready:!0})}},[t.mapIds,i.layers,t,e]),{map:r.map,mapIsReady:r.ready,componentId:l.current,layers:i.layers,cleanup:a}}const zL=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function xK(e){return typeof e.options.source=="string"?{source:e.options.source}:e.geojson&&(!e.options?.source||typeof e?.options?.source!="string"&&e.options?.source?.attribution&&!e.options?.source?.type)?{source:{type:"geojson",data:e.geojson||"",attribution:typeof e?.options?.source!="string"&&e.options.source?.attribution?e.options.source?.attribution:""}}:{}}function wK(e,t){if(e?.insertBeforeLayer)return e.insertBeforeLayer;if(e?.insertBeforeFirstSymbolLayer)return t?.map?.firstSymbolLayer}function Vf(e){const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=J.useRef(""),n=J.useRef(""),i=J.useRef(""),[o,l]=J.useState(),a=J.useRef(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+t.componentId),c=J.useCallback(()=>{if(!t.map||t?.map.cancelled||(t.map.map.getLayer(a.current)&&t.cleanup(),typeof e?.options?.source!="string"&&t.map.map.getSource(a.current)&&t.map.map.removeSource(a.current),typeof e.options.source=="string"&&(e.options.source===""||!t.map.map.getSource(e.options.source)))||typeof e?.options?.source!="string"&&!e.geojson&&!e?.options?.source?.data&&e?.options?.type!=="background"||typeof e.options.type>"u")return;try{t.map.addLayer({...e.options,...xK(e),id:a.current},wK(e,t),t.componentId)}catch(v){console.error("Failed to add layer:",v)}l(()=>t.map?.map.getLayer(a.current));const h=()=>{t.map?.map.getLayer(a.current)||c()};t.map.on("styledata",h,t.componentId);const g=(v,x,{source_id:b})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===b&&c()};t.map.wrapper.on("addsource",g,t.componentId),n.current=JSON.stringify(e.options?.paint),i.current=JSON.stringify(e.options?.layout),r.current=e.options.type},[e,t]);return J.useEffect(()=>{t.map&&(!e.geojson&&!e.options.source&&e?.options?.type!=="background"||t.map?.cancelled===!1&&t?.map?.map?.getLayer?.(a.current)&&(zL.indexOf(e.options.type)===-1||zL.indexOf(e.options.type)!==-1&&e.options.type===r.current)||c())},[t.map,t.mapIsReady,e,c]),J.useEffect(()=>{t.map?.cancelled===!0||!t.map?.map?.getSource?.(a.current)||t.map.map.getSource(a.current)?.setData?.(e.geojson)},[e.geojson,t.map,e.options.type]),J.useEffect(()=>{if(t.map?.cancelled===!0||!t.map||!t.map?.map?.getLayer?.(a.current)||e.options.type!==r.current)return;let h;const g=JSON.stringify(e.options.layout);if(e.options.layout&&g!==i.current){const x=JSON.parse(i.current);for(h in e.options.layout)e.options.layout?.[h]&&e.options.layout[h]!==x[h]&&t.map.map.setLayoutProperty(a.current,h,e.options.layout[h]);i.current=g}const v=JSON.stringify(e.options.paint);if(v!==n.current){const x=JSON.parse(n.current);for(h in e.options.paint)e.options.paint?.[h]&&e.options.paint[h]!==x[h]&&t.map.map.setPaintProperty(a.current,h,e.options.paint[h]);n.current=v}},[e.options,t.map]),J.useEffect(()=>{!e.insertBeforeLayer||!t.map||!t.map.getLayer(e.insertBeforeLayer)||!t.map.getLayer(a.current)||t.map.moveLayer(a.current,e.insertBeforeLayer)},[t.map,e.insertBeforeLayer]),J.useEffect(()=>()=>{t.cleanup()},[]),J.useEffect(()=>{if(typeof e?.options?.source!="string"||!t.map)return;const h=()=>{typeof e?.options?.source=="string"&&t?.map?.getSource?.(e.options.source)&&!t.map.getLayer(a.current)&&c()};t.map.on("sourcedataloading",h);const g=(v,x,{source_id:b})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===b&&c()};return t.map.wrapper.on("addsource",g),()=>{t?.map&&(t.map.off("sourcedataloading",h),t.map.wrapper.off("addsource",g))}},[t.map,e.options?.source]),J.useEffect(()=>{if(!e.onClick||!t?.map||!t?.map?.getLayer?.(a.current))return;const h=e.onClick;return t.map?.on("click",a.current,h),()=>{h&&t?.map&&t.map?.off("click",a.current,h)}},[t.map,e.onClick]),J.useEffect(()=>{if(!e.onHover||!t?.map||!t?.map?.getLayer?.(a.current))return;const h=e.onHover;return t.map?.on("mousemove",a.current,h),()=>{h&&t?.map&&t.map?.off("mousemove",a.current,h)}},[t.map,e.onHover]),J.useEffect(()=>{if(!e.onLeave||!t?.map||!t?.map?.getLayer?.(a.current))return;const h=e.onLeave;return t.map?.on("mouseleave",a.current,h),()=>{h&&t?.map&&t.map?.off("mouseleave",a.current,h)}},[t.map,e.onLeave]),{map:t.map,layer:o,layerId:a.current,componentId:t.componentId,mapHook:t}}Vf.defaultProps={};const W9=(e,t)=>{switch(e){case"fill":return t?.fill?t.fill:{"fill-color":"#009EE0","fill-outline-color":"#009EE0"};case"line":return t?.line?(console.log(t.line),t.line):{"line-color":"#009EE0","line-width":4,"line-blur":0};case"circle":return t?.circle?t.circle:{"circle-color":"#009EE0","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-radius":5};default:return{}}},jL={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},O_=e=>e?.type==="Feature"?jL?.[e?.geometry?.type]?jL[e.geometry.type]:"circle":e?.type==="FeatureCollection"?e.features.length?O_(e.features[0]):"circle":"fill";function AP(e){const t=da({mapId:e.mapId}),[r,n]=J.useState(),i=J.useRef(e.sourceId||(e.idPrefix?e.idPrefix:"Source-")+t.componentId),o=J.useCallback(()=>{if(t.map&&t.map?.style?._layers){for(const[a,c]of Object.entries(t.map.style._layers))c.source===i.current&&t.map.removeLayer(a);t.map.getSource(i.current)&&t.map.removeSource(i.current)}},[t.map]),l=J.useCallback(()=>{t.map&&(e.source.type==="geojson"&&!e.source.data||(t.map.map.getSource(i.current)&&o(),t.map?.addSource(i.current,{...e.source}),n(t.map.map.getSource(i.current))))},[e,t,o]);return J.useEffect(()=>{t.map?.map?.getSource(i.current)&&t.map.map.getSource(i.current)?.setData?.(e.source.data)},[e.source?.data]),J.useEffect(()=>{t?.map?.map?.getSource?.(e.sourceId)&&e.sourceId===i.current||(i.current=e.sourceId,l())},[t.map,e,l]),J.useEffect(()=>{if(!t.map)return;const a=()=>{t?.map?.getSource?.(e.sourceId)||l()};return t.map.on("styledata",a),()=>{t?.map&&t.map.off("styledata",a)}},[t.map,l]),J.useEffect(()=>()=>{o()},[o]),{map:t.map,source:r,componentId:t.componentId,mapHook:t}}const Uu=e=>{const t=e.type||O_(e.geojson),r=J.useRef(e.layerId||"MlGeoJsonLayer-"+Vu()),n=`label-${r.current}`;return J.useEffect(()=>{e.layerId?r.current=e.layerId:r.current="MlGeoJsonLayer-"+Vu()},[e.layerId]),AP({mapId:e.mapId,sourceId:"source-"+r.current,source:{type:"geojson",data:e.geojson,...typeof e?.options?.source<"u"&&typeof e?.options?.source!="string"?e.options.source:{}}}),Vf({mapId:e.mapId,layerId:r.current,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},paint:{...e.paint||W9(t,e.defaultPaintOverrides),...e?.options?.paint},layout:{...e?.layout||{},...e?.options?.layout},type:t},insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),Vf({mapId:e.mapId,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},id:n,type:"symbol",maxzoom:24,minzoom:1,...e?.labelOptions?e.labelOptions:{},...e?.options?.filter?{filter:e.options.filter}:{},layout:{"text-font":["Open Sans Regular"],"text-field":`{${e.labelProp}}`,"text-size":12,"text-anchor":"top",...e?.labelOptions?.layout?e.labelOptions.layout:{},visibility:e?.layout?.visibility??e?.options?.layout?.visibility??"visible"},paint:{"text-halo-width":1,"text-halo-color":"#fefefe","text-color":"#121212",...e?.labelOptions?.paint?e.labelOptions.paint:{}}}}),Z.jsx(Z.Fragment,{})};try{Uu.displayName="MlGeoJsonLayer",Uu.__docgenInfo={description:"Adds source and layer to display GeoJSON data on the map.",displayName:"MlGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the new layer and source that are added to the MapLibre instance",name:"layerId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}},type:{defaultValue:null,description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"symbol"'},{value:'"fill"'},{value:'"line"'},{value:'"circle"'},{value:'"heatmap"'},{value:'"fill-extrusion"'},{value:'"hillshade"'},{value:'"color-relief"'},{value:'"background"'}]}},paint:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | ... 8 more ... | undefined'}},layout:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`,name:"layout",required:!1,type:{name:'{ "fill-sort-key"?: DataDrivenPropertyValueSpecification<number> | undefined; visibility?: "visible" | "none" | undefined; } | { "line-cap"?: PropertyValueSpecification<...> | undefined; ... 4 more ...; visibility?: "visible" | ... 1 more ... | undefined; } | ... 8 more ... | undefined'}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!1,type:{name:'{ circle?: { "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-color"?: DataDrivenPropertyValueSpecification<string> | undefined; ... 8 more ...; "circle-stroke-opacity"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined; fill?: { ...; } | undefined; line?: { ......'}},labelProp:{defaultValue:null,description:"Property name in the GeoJSON object to be used as a label.",name:"labelProp",required:!1,type:{name:"string | undefined"}},labelOptions:{defaultValue:null,description:"Label configuration options.",name:"labelOptions",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}}}}}catch{}function Y4(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function SK(e){return Z.jsx(w9,{...e,defaultTheme:IP,themeId:ld})}function CK(e){return function(r){return Z.jsx(SK,{styles:typeof e=="function"?n=>e({theme:n,...r}):e})}}function EK(){return xP}const qn=JY;function oi(e){return XY(e)}function TK(e){return Qn("MuiSvgIcon",e)}Yn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const PK=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${tn(t)}`,`fontSize${tn(r)}`]};return ei(i,TK,n)},IK=Ar("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${tn(r.color)}`],t[`fontSize${tn(r.fontSize)}`]]}})(qn(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),Z4=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:l="inherit",component:a="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:g=!1,titleAccess:v,viewBox:x="0 0 24 24",...b}=n,S=J.isValidElement(i)&&i.type==="svg",I={...n,color:l,component:a,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:g,viewBox:x,hasSvgAsChild:S},k={};g||(k.viewBox=x);const M=PK(I);return Z.jsxs(IK,{as:a,className:mn(M.root,o),focusable:"false",color:h,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:r,...k,...b,...S&&i.props,ownerState:I,children:[S?i.props.children:i,v?Z.jsx("title",{children:v}):null]})});Z4.muiName="SvgIcon";function Ei(e,t){function r(n,i){return Z.jsx(Z4,{"data-testid":void 0,ref:i,...n,children:e})}return r.muiName=Z4.muiName,J.memo(J.forwardRef(r))}function MP(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function Bo(e){return e&&e.ownerDocument||document}function Iu(e){return Bo(e).defaultView||window}function qL(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Dh(e){const{controlled:t,default:r,name:n,state:i="value"}=e,{current:o}=J.useRef(t!==void 0),[l,a]=J.useState(r),c=o?t:l,h=J.useCallback(g=>{o||a(g)},[]);return[c,h]}function El(e){const t=J.useRef(e);return Vl(()=>{t.current=e}),J.useRef((...r)=>(0,t.current)(...r)).current}function no(...e){const t=J.useRef(void 0),r=J.useCallback(n=>{const i=e.map(o=>{if(o==null)return null;if(typeof o=="function"){const l=o,a=l(n);return typeof a=="function"?a:()=>{l(null)}}return o.current=n,()=>{o.current=null}});return()=>{i.forEach(o=>o?.())}},e);return J.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function kK(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function Xg(e,t){if(!e)return t;function r(l,a){const c={};return Object.keys(a).forEach(h=>{kK(h,a[h])&&typeof l[h]=="function"&&(c[h]=(...g)=>{l[h](...g),a[h](...g)})}),c}if(typeof e=="function"||typeof t=="function")return l=>{const a=typeof t=="function"?t(l):t,c=typeof e=="function"?e({...l,...a}):e,h=mn(l?.className,a?.className,c?.className),g=r(c,a);return{...a,...c,...g,...!!h&&{className:h},...a?.style&&c?.style&&{style:{...a.style,...c.style}},...a?.sx&&c?.sx&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const n=t,i=r(e,n),o=mn(n?.className,e?.className);return{...t,...e,...i,...!!o&&{className:o},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function X9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function K4(e,t){return K4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},K4(e,t)}function Y9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,K4(e,t)}const $L={disabled:!1},F_=ft.createContext(null);var AK=function(t){return t.scrollTop},Lv="unmounted",vp="exited",bp="entering",ng="entered",J4="exiting",wc=(function(e){Y9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var l=i,a=l&&!l.isMounting?n.enter:n.appear,c;return o.appearStatus=null,n.in?a?(c=vp,o.appearStatus=bp):c=ng:n.unmountOnExit||n.mountOnEnter?c=Lv:c=vp,o.state={status:c},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var l=i.in;return l&&o.status===Lv?{status:vp}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==bp&&l!==ng&&(o=bp):(l===bp||l===ng)&&(o=J4)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,l,a;return o=l=a=i,i!=null&&typeof i!="number"&&(o=i.exit,l=i.enter,a=i.appear!==void 0?i.appear:l),{exit:o,enter:l,appear:a}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===bp){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:kv.findDOMNode(this);l&&AK(l)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vp&&this.setState({status:Lv})},r.performEnter=function(i){var o=this,l=this.props.enter,a=this.context?this.context.isMounting:i,c=this.props.nodeRef?[a]:[kv.findDOMNode(this),a],h=c[0],g=c[1],v=this.getTimeouts(),x=a?v.appear:v.enter;if(!i&&!l||$L.disabled){this.safeSetState({status:ng},function(){o.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:bp},function(){o.props.onEntering(h,g),o.onTransitionEnd(x,function(){o.safeSetState({status:ng},function(){o.props.onEntered(h,g)})})})},r.performExit=function(){var i=this,o=this.props.exit,l=this.getTimeouts(),a=this.props.nodeRef?void 0:kv.findDOMNode(this);if(!o||$L.disabled){this.safeSetState({status:vp},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:J4},function(){i.props.onExiting(a),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:vp},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,l=!0;return this.nextCallback=function(a){l&&(l=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:kv.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!l||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=c[0],g=c[1];this.props.addEndListener(h,g)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===Lv)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=X9(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ft.createElement(F_.Provider,{value:null},typeof l=="function"?l(i,a):ft.cloneElement(ft.Children.only(l),a))},t})(ft.Component);wc.contextType=F_;wc.propTypes={};function $m(){}wc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:$m,onEntering:$m,onEntered:$m,onExit:$m,onExiting:$m,onExited:$m};wc.UNMOUNTED=Lv;wc.EXITED=vp;wc.ENTERING=bp;wc.ENTERED=ng;wc.EXITING=J4;function MK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LP(e,t){var r=function(o){return t&&J.isValidElement(o)?t(o):o},n=Object.create(null);return e&&J.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function LK(e,t){e=e||{},t=t||{};function r(g){return g in t?t[g]:e[g]}var n=Object.create(null),i=[];for(var o in e)o in t?i.length&&(n[o]=i,i=[]):i.push(o);var l,a={};for(var c in t){if(n[c])for(l=0;l<n[c].length;l++){var h=n[c][l];a[n[c][l]]=r(h)}a[c]=r(c)}for(l=0;l<i.length;l++)a[i[l]]=r(i[l]);return a}function Ap(e,t,r){return r[t]!=null?r[t]:e.props[t]}function RK(e,t){return LP(e.children,function(r){return J.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:Ap(r,"appear",e),enter:Ap(r,"enter",e),exit:Ap(r,"exit",e)})})}function DK(e,t,r){var n=LP(e.children),i=LK(t,n);return Object.keys(i).forEach(function(o){var l=i[o];if(J.isValidElement(l)){var a=o in t,c=o in n,h=t[o],g=J.isValidElement(h)&&!h.props.in;c&&(!a||g)?i[o]=J.cloneElement(l,{onExited:r.bind(null,l),in:!0,exit:Ap(l,"exit",e),enter:Ap(l,"enter",e)}):!c&&a&&!g?i[o]=J.cloneElement(l,{in:!1}):c&&a&&J.isValidElement(h)&&(i[o]=J.cloneElement(l,{onExited:r.bind(null,l),in:h.props.in,exit:Ap(l,"exit",e),enter:Ap(l,"enter",e)}))}}),i}var NK=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},OK={component:"div",childFactory:function(t){return t}},RP=(function(e){Y9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var l=o.handleExited.bind(MK(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var l=o.children,a=o.handleExited,c=o.firstRender;return{children:c?RK(i,a):DK(i,l,a),firstRender:!1}},r.handleExited=function(i,o){var l=LP(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var c=A_({},a.children);return delete c[i.key],{children:c}}))},r.render=function(){var i=this.props,o=i.component,l=i.childFactory,a=X9(i,["component","childFactory"]),c=this.state.contextValue,h=NK(this.state.children).map(l);return delete a.appear,delete a.enter,delete a.exit,o===null?ft.createElement(F_.Provider,{value:c},h):ft.createElement(F_.Provider,{value:c},ft.createElement(o,a,h))},t})(ft.Component);RP.propTypes={};RP.defaultProps=OK;const VL={};function Z9(e,t){const r=J.useRef(VL);return r.current===VL&&(r.current=e(t)),r}const FK=[];function BK(e){J.useEffect(e,FK)}class g2{static create(){return new g2}currentId=null;start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Lf(){const e=Z9(g2.create).current;return BK(e.disposeEffect),e}const y2=e=>e.scrollTop;function cd(e,t){const{timeout:r,easing:n,style:i={}}=e;return{duration:i.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:i.transitionDelay}}function zK(e){return Qn("MuiCollapse",e)}Yn("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const jK=e=>{const{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return ei(n,zK,r)},qK=Ar("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(qn(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),$K=Ar("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),VK=Ar("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Q4=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiCollapse"}),{addEndListener:i,children:o,className:l,collapsedSize:a="0px",component:c,easing:h,in:g,onEnter:v,onEntered:x,onEntering:b,onExit:S,onExited:I,onExiting:k,orientation:M="vertical",style:O,timeout:F=q9.standard,TransitionComponent:D=wc,...q}=n,z={...n,orientation:M,collapsedSize:a},U=jK(z),H=mu(),X=Lf(),ie=J.useRef(null),ee=J.useRef(),G=typeof a=="number"?`${a}px`:a,ne=M==="horizontal",ae=ne?"width":"height",le=J.useRef(null),fe=no(r,le),ke=Le=>Ue=>{if(Le){const Oe=le.current;Ue===void 0?Le(Oe):Le(Oe,Ue)}},me=()=>ie.current?ie.current[ne?"clientWidth":"clientHeight"]:0,Se=ke((Le,Ue)=>{ie.current&&ne&&(ie.current.style.position="absolute"),Le.style[ae]=G,v&&v(Le,Ue)}),we=ke((Le,Ue)=>{const Oe=me();ie.current&&ne&&(ie.current.style.position="");const{duration:tt,easing:Ze}=cd({style:O,timeout:F,easing:h},{mode:"enter"});if(F==="auto"){const Qe=H.transitions.getAutoHeightDuration(Oe);Le.style.transitionDuration=`${Qe}ms`,ee.current=Qe}else Le.style.transitionDuration=typeof tt=="string"?tt:`${tt}ms`;Le.style[ae]=`${Oe}px`,Le.style.transitionTimingFunction=Ze,b&&b(Le,Ue)}),Pe=ke((Le,Ue)=>{Le.style[ae]="auto",x&&x(Le,Ue)}),ce=ke(Le=>{Le.style[ae]=`${me()}px`,S&&S(Le)}),_e=ke(I),be=ke(Le=>{const Ue=me(),{duration:Oe,easing:tt}=cd({style:O,timeout:F,easing:h},{mode:"exit"});if(F==="auto"){const Ze=H.transitions.getAutoHeightDuration(Ue);Le.style.transitionDuration=`${Ze}ms`,ee.current=Ze}else Le.style.transitionDuration=typeof Oe=="string"?Oe:`${Oe}ms`;Le.style[ae]=G,Le.style.transitionTimingFunction=tt,k&&k(Le)}),Me=Le=>{F==="auto"&&X.start(ee.current||0,Le),i&&i(le.current,Le)};return Z.jsx(D,{in:g,onEnter:Se,onEntered:Pe,onEntering:we,onExit:ce,onExited:_e,onExiting:be,addEndListener:Me,nodeRef:le,timeout:F==="auto"?null:F,...q,children:(Le,{ownerState:Ue,...Oe})=>Z.jsx(qK,{as:c,className:mn(U.root,l,{entered:U.entered,exited:!g&&G==="0px"&&U.hidden}[Le]),style:{[ne?"minWidth":"minHeight"]:G,...O},ref:fe,ownerState:{...z,state:Le},...Oe,children:Z.jsx($K,{ownerState:{...z,state:Le},className:U.wrapper,ref:ie,children:Z.jsx(VK,{ownerState:{...z,state:Le},className:U.wrapperInner,children:o})})})})});Q4&&(Q4.muiSupportAuto=!0);function UK(e){return Qn("MuiPaper",e)}Yn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const GK=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return ei(o,UK,i)},HK=Ar("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(qn(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Nc=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiPaper"}),i=mu(),{className:o,component:l="div",elevation:a=1,square:c=!1,variant:h="elevation",...g}=n,v={...n,component:l,elevation:a,square:c,variant:h},x=GK(v);return Z.jsx(HK,{as:l,ownerState:v,className:mn(x.root,o),ref:r,...g,style:{...h==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${R_("#fff",H4(a))}, ${R_("#fff",H4(a))})`}},...g.style}})}),K9=J.createContext({});function Hd(e){return typeof e=="string"}function J9(e,t,r){return e===void 0||Hd(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function Q9(e,t,r){return typeof e=="function"?e(t,r):e}function Rp(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function UL(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function e7(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const b=mn(r?.className,o,i?.className,n?.className),S={...r?.style,...i?.style,...n?.style},I={...r,...i,...n};return b.length>0&&(I.className=b),Object.keys(S).length>0&&(I.style=S),{props:I,internalRef:void 0}}const l=Rp({...i,...n}),a=UL(n),c=UL(i),h=t(l),g=mn(h?.className,r?.className,o,i?.className,n?.className),v={...h?.style,...r?.style,...i?.style,...n?.style},x={...h,...r,...c,...a};return g.length>0&&(x.className=g),Object.keys(v).length>0&&(x.style=v),{props:x,internalRef:h.ref}}function ai(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:o,internalForwardedProps:l,shouldForwardComponentProp:a=!1,...c}=t,{component:h,slots:g={[e]:void 0},slotProps:v={[e]:void 0},...x}=o,b=g[e]||n,S=Q9(v[e],i),{props:{component:I,...k},internalRef:M}=e7({className:r,...c,externalForwardedProps:e==="root"?x:void 0,externalSlotProps:S}),O=no(M,S?.ref,t.ref),F=e==="root"?I||h:I,D=J9(b,{...e==="root"&&!h&&!g[e]&&l,...e!=="root"&&!g[e]&&l,...k,...F&&!a&&{as:F},...F&&a&&{component:F},ref:O},i);return[b,D]}function WK(e){return Qn("MuiAccordion",e)}const J1=Yn("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),XK=e=>{const{classes:t,square:r,expanded:n,disabled:i,disableGutters:o}=e;return ei({root:["root",!r&&"rounded",n&&"expanded",i&&"disabled",!o&&"gutters"],heading:["heading"],region:["region"]},WK,t)},YK=Ar(Nc,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${J1.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(qn(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${J1.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${J1.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),qn(({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${J1.expanded}`]:{margin:"16px 0"}}}]}))),ZK=Ar("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),KK=Ar("div",{name:"MuiAccordion",slot:"Region"})({}),JK=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:l=!1,disabled:a=!1,disableGutters:c=!1,expanded:h,onChange:g,square:v=!1,slots:x={},slotProps:b={},TransitionComponent:S,TransitionProps:I,...k}=n,[M,O]=Dh({controlled:h,default:l,name:"Accordion",state:"expanded"}),F=J.useCallback(we=>{O(!M),g&&g(we,!M)},[M,g,O]),[D,...q]=J.Children.toArray(i),z=J.useMemo(()=>({expanded:M,disabled:a,disableGutters:c,toggle:F}),[M,a,c,F]),U={...n,square:v,disabled:a,disableGutters:c,expanded:M},H=XK(U),X={transition:S,...x},ie={transition:I,...b},ee={slots:X,slotProps:ie},[G,ne]=ai("root",{elementType:YK,externalForwardedProps:{...ee,...k},className:mn(H.root,o),shouldForwardComponentProp:!0,ownerState:U,ref:r,additionalProps:{square:v}}),[ae,le]=ai("heading",{elementType:ZK,externalForwardedProps:ee,className:H.heading,ownerState:U}),[fe,ke]=ai("transition",{elementType:Q4,externalForwardedProps:ee,ownerState:U}),[me,Se]=ai("region",{elementType:KK,externalForwardedProps:ee,ownerState:U,className:H.region,additionalProps:{"aria-labelledby":D.props.id,id:D.props["aria-controls"],role:"region"}});return Z.jsxs(G,{...ne,children:[Z.jsx(ae,{...le,children:Z.jsx(K9.Provider,{value:z,children:D})}),Z.jsx(fe,{in:M,timeout:"auto",...ke,children:Z.jsx(me,{...Se,children:q})})]})});function Yg(e){try{return e.matches(":focus-visible")}catch{}return!1}class B_{static create(){return new B_}static use(){const t=Z9(B_.create).current,[r,n]=J.useState(!1);return t.shouldMount=r,t.setShouldMount=n,J.useEffect(t.mountEffect,[r]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=eJ(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function QK(){return B_.use()}function eJ(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function tJ(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:l,in:a,onExited:c,timeout:h}=e,[g,v]=J.useState(!1),x=mn(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),b={width:l,height:l,top:-(l/2)+o,left:-(l/2)+i},S=mn(r.child,g&&r.childLeaving,n&&r.childPulsate);return!a&&!g&&v(!0),J.useEffect(()=>{if(!a&&c!=null){const I=setTimeout(c,h);return()=>{clearTimeout(I)}}},[c,a,h]),Z.jsx("span",{className:x,style:b,children:Z.jsx("span",{className:S})})}const Pc=Yn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),eT=550,rJ=80,nJ=Q0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,iJ=Q0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,aJ=Q0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,oJ=Ar("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),sJ=Ar(tJ,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Pc.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${nJ};
    animation-duration: ${eT}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Pc.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Pc.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Pc.childLeaving} {
    opacity: 0;
    animation-name: ${iJ};
    animation-duration: ${eT}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Pc.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${aJ};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,lJ=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:l,...a}=n,[c,h]=J.useState([]),g=J.useRef(0),v=J.useRef(null);J.useEffect(()=>{v.current&&(v.current(),v.current=null)},[c]);const x=J.useRef(!1),b=Lf(),S=J.useRef(null),I=J.useRef(null),k=J.useCallback(D=>{const{pulsate:q,rippleX:z,rippleY:U,rippleSize:H,cb:X}=D;h(ie=>[...ie,Z.jsx(sJ,{classes:{ripple:mn(o.ripple,Pc.ripple),rippleVisible:mn(o.rippleVisible,Pc.rippleVisible),ripplePulsate:mn(o.ripplePulsate,Pc.ripplePulsate),child:mn(o.child,Pc.child),childLeaving:mn(o.childLeaving,Pc.childLeaving),childPulsate:mn(o.childPulsate,Pc.childPulsate)},timeout:eT,pulsate:q,rippleX:z,rippleY:U,rippleSize:H},g.current)]),g.current+=1,v.current=X},[o]),M=J.useCallback((D={},q={},z=()=>{})=>{const{pulsate:U=!1,center:H=i||q.pulsate,fakeElement:X=!1}=q;if(D?.type==="mousedown"&&x.current){x.current=!1;return}D?.type==="touchstart"&&(x.current=!0);const ie=X?null:I.current,ee=ie?ie.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,ne,ae;if(H||D===void 0||D.clientX===0&&D.clientY===0||!D.clientX&&!D.touches)G=Math.round(ee.width/2),ne=Math.round(ee.height/2);else{const{clientX:le,clientY:fe}=D.touches&&D.touches.length>0?D.touches[0]:D;G=Math.round(le-ee.left),ne=Math.round(fe-ee.top)}if(H)ae=Math.sqrt((2*ee.width**2+ee.height**2)/3),ae%2===0&&(ae+=1);else{const le=Math.max(Math.abs((ie?ie.clientWidth:0)-G),G)*2+2,fe=Math.max(Math.abs((ie?ie.clientHeight:0)-ne),ne)*2+2;ae=Math.sqrt(le**2+fe**2)}D?.touches?S.current===null&&(S.current=()=>{k({pulsate:U,rippleX:G,rippleY:ne,rippleSize:ae,cb:z})},b.start(rJ,()=>{S.current&&(S.current(),S.current=null)})):k({pulsate:U,rippleX:G,rippleY:ne,rippleSize:ae,cb:z})},[i,k,b]),O=J.useCallback(()=>{M({},{pulsate:!0})},[M]),F=J.useCallback((D,q)=>{if(b.clear(),D?.type==="touchend"&&S.current){S.current(),S.current=null,b.start(0,()=>{F(D,q)});return}S.current=null,h(z=>z.length>0?z.slice(1):z),v.current=q},[b]);return J.useImperativeHandle(r,()=>({pulsate:O,start:M,stop:F}),[O,M,F]),Z.jsx(oJ,{className:mn(Pc.root,o.root,l),ref:I,...a,children:Z.jsx(RP,{component:null,exit:!0,children:c})})});function uJ(e){return Qn("MuiButtonBase",e)}const cJ=Yn("MuiButtonBase",["root","disabled","focusVisible"]),dJ=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,l=ei({root:["root",t&&"disabled",r&&"focusVisible"]},uJ,i);return r&&n&&(l.root+=` ${n}`),l},fJ=Ar("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${cJ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),nm=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:l,className:a,component:c="button",disabled:h=!1,disableRipple:g=!1,disableTouchRipple:v=!1,focusRipple:x=!1,focusVisibleClassName:b,LinkComponent:S="a",onBlur:I,onClick:k,onContextMenu:M,onDragLeave:O,onFocus:F,onFocusVisible:D,onKeyDown:q,onKeyUp:z,onMouseDown:U,onMouseLeave:H,onMouseUp:X,onTouchEnd:ie,onTouchMove:ee,onTouchStart:G,tabIndex:ne=0,TouchRippleProps:ae,touchRippleRef:le,type:fe,...ke}=n,me=J.useRef(null),Se=QK(),we=no(Se.ref,le),[Pe,ce]=J.useState(!1);h&&Pe&&ce(!1),J.useImperativeHandle(i,()=>({focusVisible:()=>{ce(!0),me.current.focus()}}),[]);const _e=Se.shouldMount&&!g&&!h;J.useEffect(()=>{Pe&&x&&!g&&Se.pulsate()},[g,x,Pe,Se]);const be=xf(Se,"start",U,v),Me=xf(Se,"stop",M,v),Le=xf(Se,"stop",O,v),Ue=xf(Se,"stop",X,v),Oe=xf(Se,"stop",ur=>{Pe&&ur.preventDefault(),H&&H(ur)},v),tt=xf(Se,"start",G,v),Ze=xf(Se,"stop",ie,v),Qe=xf(Se,"stop",ee,v),Ie=xf(Se,"stop",ur=>{Yg(ur.target)||ce(!1),I&&I(ur)},!1),Mt=El(ur=>{me.current||(me.current=ur.currentTarget),Yg(ur.target)&&(ce(!0),D&&D(ur)),F&&F(ur)}),ot=()=>{const ur=me.current;return c&&c!=="button"&&!(ur.tagName==="A"&&ur.href)},$e=El(ur=>{x&&!ur.repeat&&Pe&&ur.key===" "&&Se.stop(ur,()=>{Se.start(ur)}),ur.target===ur.currentTarget&&ot()&&ur.key===" "&&ur.preventDefault(),q&&q(ur),ur.target===ur.currentTarget&&ot()&&ur.key==="Enter"&&!h&&(ur.preventDefault(),k&&k(ur))}),tr=El(ur=>{x&&ur.key===" "&&Pe&&!ur.defaultPrevented&&Se.stop(ur,()=>{Se.pulsate(ur)}),z&&z(ur),k&&ur.target===ur.currentTarget&&ot()&&ur.key===" "&&!ur.defaultPrevented&&k(ur)});let Wt=c;Wt==="button"&&(ke.href||ke.to)&&(Wt=S);const Gt={};Wt==="button"?(Gt.type=fe===void 0?"button":fe,Gt.disabled=h):(!ke.href&&!ke.to&&(Gt.role="button"),h&&(Gt["aria-disabled"]=h));const at=no(r,me),dr={...n,centerRipple:o,component:c,disabled:h,disableRipple:g,disableTouchRipple:v,focusRipple:x,tabIndex:ne,focusVisible:Pe},hr=dJ(dr);return Z.jsxs(fJ,{as:Wt,className:mn(hr.root,a),ownerState:dr,onBlur:Ie,onClick:k,onContextMenu:Me,onFocus:Mt,onKeyDown:$e,onKeyUp:tr,onMouseDown:be,onMouseLeave:Oe,onMouseUp:Ue,onDragLeave:Le,onTouchEnd:Ze,onTouchMove:Qe,onTouchStart:tt,ref:at,tabIndex:h?-1:ne,type:fe,...Gt,...ke,children:[l,_e?Z.jsx(lJ,{ref:we,center:o,...ae}):null]})});function xf(e,t,r,n=!1){return El(i=>(r&&r(i),n||e[t](i),!0))}function hJ(e){return Qn("MuiAccordionSummary",e)}const Eg=Yn("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),pJ=e=>{const{classes:t,expanded:r,disabled:n,disableGutters:i}=e;return ei({root:["root",r&&"expanded",n&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},hJ,t)},mJ=Ar(nm,{name:"MuiAccordionSummary",slot:"Root"})(qn(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${Eg.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Eg.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${Eg.disabled})`]:{cursor:"pointer"},variants:[{props:r=>!r.disableGutters,style:{[`&.${Eg.expanded}`]:{minHeight:64}}}]}})),gJ=Ar("span",{name:"MuiAccordionSummary",slot:"Content"})(qn(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${Eg.expanded}`]:{margin:"20px 0"}}}]}))),yJ=Ar("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(qn(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${Eg.expanded}`]:{transform:"rotate(180deg)"}}))),vJ=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:l,focusVisibleClassName:a,onClick:c,slots:h,slotProps:g,...v}=n,{disabled:x=!1,disableGutters:b,expanded:S,toggle:I}=J.useContext(K9),k=ie=>{I&&I(ie),c&&c(ie)},M={...n,expanded:S,disabled:x,disableGutters:b},O=pJ(M),F={slots:h,slotProps:g},[D,q]=ai("root",{ref:r,shouldForwardComponentProp:!0,className:mn(O.root,o),elementType:mJ,externalForwardedProps:{...F,...v},ownerState:M,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:x,"aria-expanded":S,focusVisibleClassName:mn(O.focusVisible,a)},getSlotProps:ie=>({...ie,onClick:ee=>{ie.onClick?.(ee),k(ee)}})}),[z,U]=ai("content",{className:O.content,elementType:gJ,externalForwardedProps:F,ownerState:M}),[H,X]=ai("expandIconWrapper",{className:O.expandIconWrapper,elementType:yJ,externalForwardedProps:F,ownerState:M});return Z.jsxs(D,{...q,children:[Z.jsx(z,{...U,children:i}),l&&Z.jsx(H,{...X,children:l})]})});function bJ(e){return typeof e.main=="string"}function _J(e,t=[]){if(!bJ(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Xs(e=[]){return([,t])=>t&&_J(t,e)}function xJ(e){return Qn("MuiCircularProgress",e)}Yn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const mh=44,tT=Q0`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,rT=Q0`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,wJ=typeof tT!="string"?gP`
        animation: ${tT} 1.4s linear infinite;
      `:null,SJ=typeof rT!="string"?gP`
        animation: ${rT} 1.4s ease-in-out infinite;
      `:null,CJ=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${tn(n)}`],svg:["svg"],circle:["circle",`circle${tn(r)}`,i&&"circleDisableShrink"]};return ei(o,xJ,t)},EJ=Ar("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${tn(r.color)}`]]}})(qn(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:wJ||{animation:`${tT} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),TJ=Ar("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),PJ=Ar("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${tn(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(qn(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:SJ||{animation:`${rT} 1.4s ease-in-out infinite`}}]}))),v2=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:l=!1,size:a=40,style:c,thickness:h=3.6,value:g=0,variant:v="indeterminate",...x}=n,b={...n,color:o,disableShrink:l,size:a,thickness:h,value:g,variant:v},S=CJ(b),I={},k={},M={};if(v==="determinate"){const O=2*Math.PI*((mh-h)/2);I.strokeDasharray=O.toFixed(3),M["aria-valuenow"]=Math.round(g),I.strokeDashoffset=`${((100-g)/100*O).toFixed(3)}px`,k.transform="rotate(-90deg)"}return Z.jsx(EJ,{className:mn(S.root,i),style:{width:a,height:a,...k,...c},ownerState:b,ref:r,role:"progressbar",...M,...x,children:Z.jsx(TJ,{className:S.svg,ownerState:b,viewBox:`${mh/2} ${mh/2} ${mh} ${mh}`,children:Z.jsx(PJ,{className:S.circle,style:I,ownerState:b,cx:mh,cy:mh,r:(mh-h)/2,fill:"none",strokeWidth:h})})})});function IJ(e){return Qn("MuiIconButton",e)}const GL=Yn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),kJ=e=>{const{classes:t,disabled:r,color:n,edge:i,size:o,loading:l}=e,a={root:["root",l&&"loading",r&&"disabled",n!=="default"&&`color${tn(n)}`,i&&`edge${tn(i)}`,`size${tn(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return ei(a,IJ,t)},AJ=Ar(nm,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${tn(r.color)}`],r.edge&&t[`edge${tn(r.edge)}`],t[`size${tn(r.size)}`]]}})(qn(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),qn(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${GL.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${GL.loading}`]:{color:"transparent"}}))),MJ=Ar("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),pc=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:l,color:a="default",disabled:c=!1,disableFocusRipple:h=!1,size:g="medium",id:v,loading:x=null,loadingIndicator:b,...S}=n,I=Vh(v),k=b??Z.jsx(v2,{"aria-labelledby":I,color:"inherit",size:16}),M={...n,edge:i,color:a,disabled:c,disableFocusRipple:h,loading:x,loadingIndicator:k,size:g},O=kJ(M);return Z.jsxs(AJ,{id:x?I:v,className:mn(O.root,l),centerRipple:!0,focusRipple:!h,disabled:c||x,ref:r,...S,ownerState:M,children:[typeof x=="boolean"&&Z.jsx("span",{className:O.loadingWrapper,style:{display:"contents"},children:Z.jsx(MJ,{className:O.loadingIndicator,ownerState:M,children:x&&k})}),o]})});function LJ(e){return Qn("MuiTypography",e)}const HL=Yn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),RJ={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},DJ=EK(),NJ=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:l}=e,a={root:["root",o,e.align!=="inherit"&&`align${tn(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return ei(a,LJ,l)},OJ=Ar("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${tn(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(qn(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${tn(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),WL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Qo=J.forwardRef(function(t,r){const{color:n,...i}=oi({props:t,name:"MuiTypography"}),o=!RJ[n],l=DJ({...i,...o&&{color:n}}),{align:a="inherit",className:c,component:h,gutterBottom:g=!1,noWrap:v=!1,paragraph:x=!1,variant:b="body1",variantMapping:S=WL,...I}=l,k={...l,align:a,color:n,className:c,component:h,gutterBottom:g,noWrap:v,paragraph:x,variant:b,variantMapping:S},M=h||(x?"p":S[b]||WL[b])||"span",O=NJ(k);return Z.jsx(OJ,{as:M,ref:r,className:mn(O.root,c),...I,ownerState:k,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...I.style}})});function FJ(e){return Qn("MuiAppBar",e)}Yn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const BJ=e=>{const{color:t,position:r,classes:n}=e,i={root:["root",`color${tn(t)}`,`position${tn(r)}`]};return ei(i,FJ,n)},XL=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,zJ=Ar(Nc,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${tn(r.position)}`],t[`color${tn(r.color)}`]]}})(qn(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Xs(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?XL(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?XL(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),jJ=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:l=!1,position:a="fixed",...c}=n,h={...n,color:o,position:a,enableColorOnDark:l},g=BJ(h);return Z.jsx(zJ,{square:!0,component:"header",ownerState:h,elevation:4,className:mn(g.root,i,a==="fixed"&&"mui-fixed"),ref:r,...c})});var Gu="top",Oc="bottom",Fc="right",Hu="left",DP="auto",a1=[Gu,Oc,Fc,Hu],Zg="start",_0="end",qJ="clippingParents",t7="viewport",nv="popper",$J="reference",YL=a1.reduce(function(e,t){return e.concat([t+"-"+Zg,t+"-"+_0])},[]),r7=[].concat(a1,[DP]).reduce(function(e,t){return e.concat([t,t+"-"+Zg,t+"-"+_0])},[]),VJ="beforeRead",UJ="read",GJ="afterRead",HJ="beforeMain",WJ="main",XJ="afterMain",YJ="beforeWrite",ZJ="write",KJ="afterWrite",JJ=[VJ,UJ,GJ,HJ,WJ,XJ,YJ,ZJ,KJ];function Kd(e){return e?(e.nodeName||"").toLowerCase():null}function mc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function qp(e){var t=mc(e).Element;return e instanceof t||e instanceof Element}function Lc(e){var t=mc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function NP(e){if(typeof ShadowRoot>"u")return!1;var t=mc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function QJ(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!Lc(o)||!Kd(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(l){var a=i[l];a===!1?o.removeAttribute(l):o.setAttribute(l,a===!0?"":a)}))})}function eQ(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},l=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=l.reduce(function(c,h){return c[h]="",c},{});!Lc(i)||!Kd(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}}const tQ={name:"applyStyles",enabled:!0,phase:"write",fn:QJ,effect:eQ,requires:["computeStyles"]};function Wd(e){return e.split("-")[0]}var Dp=Math.max,z_=Math.min,Kg=Math.round;function nT(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function n7(){return!/^((?!chrome|android).)*safari/i.test(nT())}function Jg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&Lc(e)&&(i=e.offsetWidth>0&&Kg(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Kg(n.height)/e.offsetHeight||1);var l=qp(e)?mc(e):window,a=l.visualViewport,c=!n7()&&r,h=(n.left+(c&&a?a.offsetLeft:0))/i,g=(n.top+(c&&a?a.offsetTop:0))/o,v=n.width/i,x=n.height/o;return{width:v,height:x,top:g,right:h+v,bottom:g+x,left:h,x:h,y:g}}function OP(e){var t=Jg(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function i7(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&NP(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Uf(e){return mc(e).getComputedStyle(e)}function rQ(e){return["table","td","th"].indexOf(Kd(e))>=0}function Gh(e){return((qp(e)?e.ownerDocument:e.document)||window.document).documentElement}function b2(e){return Kd(e)==="html"?e:e.assignedSlot||e.parentNode||(NP(e)?e.host:null)||Gh(e)}function ZL(e){return!Lc(e)||Uf(e).position==="fixed"?null:e.offsetParent}function nQ(e){var t=/firefox/i.test(nT()),r=/Trident/i.test(nT());if(r&&Lc(e)){var n=Uf(e);if(n.position==="fixed")return null}var i=b2(e);for(NP(i)&&(i=i.host);Lc(i)&&["html","body"].indexOf(Kd(i))<0;){var o=Uf(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function o1(e){for(var t=mc(e),r=ZL(e);r&&rQ(r)&&Uf(r).position==="static";)r=ZL(r);return r&&(Kd(r)==="html"||Kd(r)==="body"&&Uf(r).position==="static")?t:r||nQ(e)||t}function FP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qv(e,t,r){return Dp(e,z_(t,r))}function iQ(e,t,r){var n=Qv(e,t,r);return n>r?r:n}function a7(){return{top:0,right:0,bottom:0,left:0}}function o7(e){return Object.assign({},a7(),e)}function s7(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var aQ=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,o7(typeof t!="number"?t:s7(t,a1))};function oQ(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,l=r.modifiersData.popperOffsets,a=Wd(r.placement),c=FP(a),h=[Hu,Fc].indexOf(a)>=0,g=h?"height":"width";if(!(!o||!l)){var v=aQ(i.padding,r),x=OP(o),b=c==="y"?Gu:Hu,S=c==="y"?Oc:Fc,I=r.rects.reference[g]+r.rects.reference[c]-l[c]-r.rects.popper[g],k=l[c]-r.rects.reference[c],M=o1(o),O=M?c==="y"?M.clientHeight||0:M.clientWidth||0:0,F=I/2-k/2,D=v[b],q=O-x[g]-v[S],z=O/2-x[g]/2+F,U=Qv(D,z,q),H=c;r.modifiersData[n]=(t={},t[H]=U,t.centerOffset=U-z,t)}}function sQ(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||i7(t.elements.popper,i)&&(t.elements.arrow=i))}const lQ={name:"arrow",enabled:!0,phase:"main",fn:oQ,effect:sQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qg(e){return e.split("-")[1]}var uQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cQ(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Kg(r*i)/i||0,y:Kg(n*i)/i||0}}function KL(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,l=e.offsets,a=e.position,c=e.gpuAcceleration,h=e.adaptive,g=e.roundOffsets,v=e.isFixed,x=l.x,b=x===void 0?0:x,S=l.y,I=S===void 0?0:S,k=typeof g=="function"?g({x:b,y:I}):{x:b,y:I};b=k.x,I=k.y;var M=l.hasOwnProperty("x"),O=l.hasOwnProperty("y"),F=Hu,D=Gu,q=window;if(h){var z=o1(r),U="clientHeight",H="clientWidth";if(z===mc(r)&&(z=Gh(r),Uf(z).position!=="static"&&a==="absolute"&&(U="scrollHeight",H="scrollWidth")),z=z,i===Gu||(i===Hu||i===Fc)&&o===_0){D=Oc;var X=v&&z===q&&q.visualViewport?q.visualViewport.height:z[U];I-=X-n.height,I*=c?1:-1}if(i===Hu||(i===Gu||i===Oc)&&o===_0){F=Fc;var ie=v&&z===q&&q.visualViewport?q.visualViewport.width:z[H];b-=ie-n.width,b*=c?1:-1}}var ee=Object.assign({position:a},h&&uQ),G=g===!0?cQ({x:b,y:I},mc(r)):{x:b,y:I};if(b=G.x,I=G.y,c){var ne;return Object.assign({},ee,(ne={},ne[D]=O?"0":"",ne[F]=M?"0":"",ne.transform=(q.devicePixelRatio||1)<=1?"translate("+b+"px, "+I+"px)":"translate3d("+b+"px, "+I+"px, 0)",ne))}return Object.assign({},ee,(t={},t[D]=O?I+"px":"",t[F]=M?b+"px":"",t.transform="",t))}function dQ(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,l=o===void 0?!0:o,a=r.roundOffsets,c=a===void 0?!0:a,h={placement:Wd(t.placement),variation:Qg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,KL(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,KL(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const fQ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dQ,data:{}};var Q1={passive:!0};function hQ(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,l=n.resize,a=l===void 0?!0:l,c=mc(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach(function(g){g.addEventListener("scroll",r.update,Q1)}),a&&c.addEventListener("resize",r.update,Q1),function(){o&&h.forEach(function(g){g.removeEventListener("scroll",r.update,Q1)}),a&&c.removeEventListener("resize",r.update,Q1)}}const pQ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hQ,data:{}};var mQ={left:"right",right:"left",bottom:"top",top:"bottom"};function u_(e){return e.replace(/left|right|bottom|top/g,function(t){return mQ[t]})}var gQ={start:"end",end:"start"};function JL(e){return e.replace(/start|end/g,function(t){return gQ[t]})}function BP(e){var t=mc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function zP(e){return Jg(Gh(e)).left+BP(e).scrollLeft}function yQ(e,t){var r=mc(e),n=Gh(e),i=r.visualViewport,o=n.clientWidth,l=n.clientHeight,a=0,c=0;if(i){o=i.width,l=i.height;var h=n7();(h||!h&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:l,x:a+zP(e),y:c}}function vQ(e){var t,r=Gh(e),n=BP(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Dp(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=Dp(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+zP(e),c=-n.scrollTop;return Uf(i||r).direction==="rtl"&&(a+=Dp(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:l,x:a,y:c}}function jP(e){var t=Uf(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function l7(e){return["html","body","#document"].indexOf(Kd(e))>=0?e.ownerDocument.body:Lc(e)&&jP(e)?e:l7(b2(e))}function e0(e,t){var r;t===void 0&&(t=[]);var n=l7(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=mc(n),l=i?[o].concat(o.visualViewport||[],jP(n)?n:[]):n,a=t.concat(l);return i?a:a.concat(e0(b2(l)))}function iT(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function bQ(e,t){var r=Jg(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function QL(e,t,r){return t===t7?iT(yQ(e,r)):qp(t)?bQ(t,r):iT(vQ(Gh(e)))}function _Q(e){var t=e0(b2(e)),r=["absolute","fixed"].indexOf(Uf(e).position)>=0,n=r&&Lc(e)?o1(e):e;return qp(n)?t.filter(function(i){return qp(i)&&i7(i,n)&&Kd(i)!=="body"}):[]}function xQ(e,t,r,n){var i=t==="clippingParents"?_Q(e):[].concat(t),o=[].concat(i,[r]),l=o[0],a=o.reduce(function(c,h){var g=QL(e,h,n);return c.top=Dp(g.top,c.top),c.right=z_(g.right,c.right),c.bottom=z_(g.bottom,c.bottom),c.left=Dp(g.left,c.left),c},QL(e,l,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function u7(e){var t=e.reference,r=e.element,n=e.placement,i=n?Wd(n):null,o=n?Qg(n):null,l=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,c;switch(i){case Gu:c={x:l,y:t.y-r.height};break;case Oc:c={x:l,y:t.y+t.height};break;case Fc:c={x:t.x+t.width,y:a};break;case Hu:c={x:t.x-r.width,y:a};break;default:c={x:t.x,y:t.y}}var h=i?FP(i):null;if(h!=null){var g=h==="y"?"height":"width";switch(o){case Zg:c[h]=c[h]-(t[g]/2-r[g]/2);break;case _0:c[h]=c[h]+(t[g]/2-r[g]/2);break}}return c}function x0(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,l=o===void 0?e.strategy:o,a=r.boundary,c=a===void 0?qJ:a,h=r.rootBoundary,g=h===void 0?t7:h,v=r.elementContext,x=v===void 0?nv:v,b=r.altBoundary,S=b===void 0?!1:b,I=r.padding,k=I===void 0?0:I,M=o7(typeof k!="number"?k:s7(k,a1)),O=x===nv?$J:nv,F=e.rects.popper,D=e.elements[S?O:x],q=xQ(qp(D)?D:D.contextElement||Gh(e.elements.popper),c,g,l),z=Jg(e.elements.reference),U=u7({reference:z,element:F,placement:i}),H=iT(Object.assign({},F,U)),X=x===nv?H:z,ie={top:q.top-X.top+M.top,bottom:X.bottom-q.bottom+M.bottom,left:q.left-X.left+M.left,right:X.right-q.right+M.right},ee=e.modifiersData.offset;if(x===nv&&ee){var G=ee[i];Object.keys(ie).forEach(function(ne){var ae=[Fc,Oc].indexOf(ne)>=0?1:-1,le=[Gu,Oc].indexOf(ne)>=0?"y":"x";ie[ne]+=G[le]*ae})}return ie}function wQ(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,l=r.padding,a=r.flipVariations,c=r.allowedAutoPlacements,h=c===void 0?r7:c,g=Qg(n),v=g?a?YL:YL.filter(function(S){return Qg(S)===g}):a1,x=v.filter(function(S){return h.indexOf(S)>=0});x.length===0&&(x=v);var b=x.reduce(function(S,I){return S[I]=x0(e,{placement:I,boundary:i,rootBoundary:o,padding:l})[Wd(I)],S},{});return Object.keys(b).sort(function(S,I){return b[S]-b[I]})}function SQ(e){if(Wd(e)===DP)return[];var t=u_(e);return[JL(e),t,JL(t)]}function CQ(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,l=r.altAxis,a=l===void 0?!0:l,c=r.fallbackPlacements,h=r.padding,g=r.boundary,v=r.rootBoundary,x=r.altBoundary,b=r.flipVariations,S=b===void 0?!0:b,I=r.allowedAutoPlacements,k=t.options.placement,M=Wd(k),O=M===k,F=c||(O||!S?[u_(k)]:SQ(k)),D=[k].concat(F).reduce(function(be,Me){return be.concat(Wd(Me)===DP?wQ(t,{placement:Me,boundary:g,rootBoundary:v,padding:h,flipVariations:S,allowedAutoPlacements:I}):Me)},[]),q=t.rects.reference,z=t.rects.popper,U=new Map,H=!0,X=D[0],ie=0;ie<D.length;ie++){var ee=D[ie],G=Wd(ee),ne=Qg(ee)===Zg,ae=[Gu,Oc].indexOf(G)>=0,le=ae?"width":"height",fe=x0(t,{placement:ee,boundary:g,rootBoundary:v,altBoundary:x,padding:h}),ke=ae?ne?Fc:Hu:ne?Oc:Gu;q[le]>z[le]&&(ke=u_(ke));var me=u_(ke),Se=[];if(o&&Se.push(fe[G]<=0),a&&Se.push(fe[ke]<=0,fe[me]<=0),Se.every(function(be){return be})){X=ee,H=!1;break}U.set(ee,Se)}if(H)for(var we=S?3:1,Pe=function(Me){var Le=D.find(function(Ue){var Oe=U.get(Ue);if(Oe)return Oe.slice(0,Me).every(function(tt){return tt})});if(Le)return X=Le,"break"},ce=we;ce>0;ce--){var _e=Pe(ce);if(_e==="break")break}t.placement!==X&&(t.modifiersData[n]._skip=!0,t.placement=X,t.reset=!0)}}const EQ={name:"flip",enabled:!0,phase:"main",fn:CQ,requiresIfExists:["offset"],data:{_skip:!1}};function eR(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function tR(e){return[Gu,Fc,Oc,Hu].some(function(t){return e[t]>=0})}function TQ(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,l=x0(t,{elementContext:"reference"}),a=x0(t,{altBoundary:!0}),c=eR(l,n),h=eR(a,i,o),g=tR(c),v=tR(h);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:g,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":v})}const PQ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:TQ};function IQ(e,t,r){var n=Wd(e),i=[Hu,Gu].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=o[0],a=o[1];return l=l||0,a=(a||0)*i,[Hu,Fc].indexOf(n)>=0?{x:a,y:l}:{x:l,y:a}}function kQ(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,l=r7.reduce(function(g,v){return g[v]=IQ(v,t.rects,o),g},{}),a=l[t.placement],c=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=h),t.modifiersData[n]=l}const AQ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kQ};function MQ(e){var t=e.state,r=e.name;t.modifiersData[r]=u7({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const LQ={name:"popperOffsets",enabled:!0,phase:"read",fn:MQ,data:{}};function RQ(e){return e==="x"?"y":"x"}function DQ(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,l=r.altAxis,a=l===void 0?!1:l,c=r.boundary,h=r.rootBoundary,g=r.altBoundary,v=r.padding,x=r.tether,b=x===void 0?!0:x,S=r.tetherOffset,I=S===void 0?0:S,k=x0(t,{boundary:c,rootBoundary:h,padding:v,altBoundary:g}),M=Wd(t.placement),O=Qg(t.placement),F=!O,D=FP(M),q=RQ(D),z=t.modifiersData.popperOffsets,U=t.rects.reference,H=t.rects.popper,X=typeof I=="function"?I(Object.assign({},t.rects,{placement:t.placement})):I,ie=typeof X=="number"?{mainAxis:X,altAxis:X}:Object.assign({mainAxis:0,altAxis:0},X),ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(z){if(o){var ne,ae=D==="y"?Gu:Hu,le=D==="y"?Oc:Fc,fe=D==="y"?"height":"width",ke=z[D],me=ke+k[ae],Se=ke-k[le],we=b?-H[fe]/2:0,Pe=O===Zg?U[fe]:H[fe],ce=O===Zg?-H[fe]:-U[fe],_e=t.elements.arrow,be=b&&_e?OP(_e):{width:0,height:0},Me=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:a7(),Le=Me[ae],Ue=Me[le],Oe=Qv(0,U[fe],be[fe]),tt=F?U[fe]/2-we-Oe-Le-ie.mainAxis:Pe-Oe-Le-ie.mainAxis,Ze=F?-U[fe]/2+we+Oe+Ue+ie.mainAxis:ce+Oe+Ue+ie.mainAxis,Qe=t.elements.arrow&&o1(t.elements.arrow),Ie=Qe?D==="y"?Qe.clientTop||0:Qe.clientLeft||0:0,Mt=(ne=ee?.[D])!=null?ne:0,ot=ke+tt-Mt-Ie,$e=ke+Ze-Mt,tr=Qv(b?z_(me,ot):me,ke,b?Dp(Se,$e):Se);z[D]=tr,G[D]=tr-ke}if(a){var Wt,Gt=D==="x"?Gu:Hu,at=D==="x"?Oc:Fc,dr=z[q],hr=q==="y"?"height":"width",ur=dr+k[Gt],Cr=dr-k[at],br=[Gu,Hu].indexOf(M)!==-1,nr=(Wt=ee?.[q])!=null?Wt:0,lr=br?ur:dr-U[hr]-H[hr]-nr+ie.altAxis,Pr=br?dr+U[hr]+H[hr]-nr-ie.altAxis:Cr,ar=b&&br?iQ(lr,dr,Pr):Qv(b?lr:ur,dr,b?Pr:Cr);z[q]=ar,G[q]=ar-dr}t.modifiersData[n]=G}}const NQ={name:"preventOverflow",enabled:!0,phase:"main",fn:DQ,requiresIfExists:["offset"]};function OQ(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function FQ(e){return e===mc(e)||!Lc(e)?BP(e):OQ(e)}function BQ(e){var t=e.getBoundingClientRect(),r=Kg(t.width)/e.offsetWidth||1,n=Kg(t.height)/e.offsetHeight||1;return r!==1||n!==1}function zQ(e,t,r){r===void 0&&(r=!1);var n=Lc(t),i=Lc(t)&&BQ(t),o=Gh(t),l=Jg(e,i,r),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Kd(t)!=="body"||jP(o))&&(a=FQ(t)),Lc(t)?(c=Jg(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=zP(o))),{x:l.left+a.scrollLeft-c.x,y:l.top+a.scrollTop-c.y,width:l.width,height:l.height}}function jQ(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(a){if(!r.has(a)){var c=t.get(a);c&&i(c)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function qQ(e){var t=jQ(e);return JJ.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function $Q(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function VQ(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var rR={placement:"bottom",modifiers:[],strategy:"absolute"};function nR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function UQ(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?rR:i;return function(a,c,h){h===void 0&&(h=o);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},rR,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},v=[],x=!1,b={state:g,setOptions:function(M){var O=typeof M=="function"?M(g.options):M;I(),g.options=Object.assign({},o,g.options,O),g.scrollParents={reference:qp(a)?e0(a):a.contextElement?e0(a.contextElement):[],popper:e0(c)};var F=qQ(VQ([].concat(n,g.options.modifiers)));return g.orderedModifiers=F.filter(function(D){return D.enabled}),S(),b.update()},forceUpdate:function(){if(!x){var M=g.elements,O=M.reference,F=M.popper;if(nR(O,F)){g.rects={reference:zQ(O,o1(F),g.options.strategy==="fixed"),popper:OP(F)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(ie){return g.modifiersData[ie.name]=Object.assign({},ie.data)});for(var D=0;D<g.orderedModifiers.length;D++){if(g.reset===!0){g.reset=!1,D=-1;continue}var q=g.orderedModifiers[D],z=q.fn,U=q.options,H=U===void 0?{}:U,X=q.name;typeof z=="function"&&(g=z({state:g,options:H,name:X,instance:b})||g)}}}},update:$Q(function(){return new Promise(function(k){b.forceUpdate(),k(g)})}),destroy:function(){I(),x=!0}};if(!nR(a,c))return b;b.setOptions(h).then(function(k){!x&&h.onFirstUpdate&&h.onFirstUpdate(k)});function S(){g.orderedModifiers.forEach(function(k){var M=k.name,O=k.options,F=O===void 0?{}:O,D=k.effect;if(typeof D=="function"){var q=D({state:g,name:M,instance:b,options:F}),z=function(){};v.push(q||z)}})}function I(){v.forEach(function(k){return k()}),v=[]}return b}}var GQ=[pQ,LQ,fQ,tQ,AQ,EQ,NQ,lQ,PQ],HQ=UQ({defaultModifiers:GQ});function zd(e){const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...o}=e,l=i?{}:Q9(r,n),{props:a,internalRef:c}=e7({...o,externalSlotProps:l}),h=no(c,l?.ref,e.additionalProps?.ref);return J9(t,{...a,ref:h},n)}function Zf(e){return parseInt(J.version,10)>=19?e?.props?.ref||null:e?.ref||null}function WQ(e){return typeof e=="function"?e():e}const c7=J.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[l,a]=J.useState(null),c=no(J.isValidElement(n)?Zf(n):null,r);if(Vl(()=>{o||a(WQ(i)||document.body)},[i,o]),Vl(()=>{if(l&&!o)return qL(r,l),()=>{qL(r,null)}},[r,l,o]),o){if(J.isValidElement(n)){const h={ref:c};return J.cloneElement(n,h)}return n}return l&&Mf.createPortal(n,l)});function XQ(e){return Qn("MuiPopper",e)}Yn("MuiPopper",["root"]);function YQ(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function aT(e){return typeof e=="function"?e():e}function ZQ(e){return e.nodeType!==void 0}const KQ=e=>{const{classes:t}=e;return ei({root:["root"]},XQ,t)},JQ={},QQ=J.forwardRef(function(t,r){const{anchorEl:n,children:i,direction:o,disablePortal:l,modifiers:a,open:c,placement:h,popperOptions:g,popperRef:v,slotProps:x={},slots:b={},TransitionProps:S,ownerState:I,...k}=t,M=J.useRef(null),O=no(M,r),F=J.useRef(null),D=no(F,v),q=J.useRef(D);Vl(()=>{q.current=D},[D]),J.useImperativeHandle(v,()=>F.current,[]);const z=YQ(h,o),[U,H]=J.useState(z),[X,ie]=J.useState(aT(n));J.useEffect(()=>{F.current&&F.current.forceUpdate()}),J.useEffect(()=>{n&&ie(aT(n))},[n]),Vl(()=>{if(!X||!c)return;const le=me=>{H(me.placement)};let fe=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:me})=>{le(me)}}];a!=null&&(fe=fe.concat(a)),g&&g.modifiers!=null&&(fe=fe.concat(g.modifiers));const ke=HQ(X,M.current,{placement:z,...g,modifiers:fe});return q.current(ke),()=>{ke.destroy(),q.current(null)}},[X,l,a,c,g,z]);const ee={placement:U};S!==null&&(ee.TransitionProps=S);const G=KQ(t),ne=b.root??"div",ae=zd({elementType:ne,externalSlotProps:x.root,externalForwardedProps:k,additionalProps:{role:"tooltip",ref:O},ownerState:t,className:G.root});return Z.jsx(ne,{...ae,children:typeof i=="function"?i(ee):i})}),eee=J.forwardRef(function(t,r){const{anchorEl:n,children:i,container:o,direction:l="ltr",disablePortal:a=!1,keepMounted:c=!1,modifiers:h,open:g,placement:v="bottom",popperOptions:x=JQ,popperRef:b,style:S,transition:I=!1,slotProps:k={},slots:M={},...O}=t,[F,D]=J.useState(!0),q=()=>{D(!1)},z=()=>{D(!0)};if(!c&&!g&&(!I||F))return null;let U;if(o)U=o;else if(n){const ie=aT(n);U=ie&&ZQ(ie)?Bo(ie).body:Bo(null).body}const H=!g&&c&&(!I||F)?"none":void 0,X=I?{in:g,onEnter:q,onExited:z}:void 0;return Z.jsx(c7,{disablePortal:a,container:U,children:Z.jsx(QQ,{anchorEl:n,direction:l,disablePortal:a,modifiers:h,ref:r,open:I?!F:g,placement:v,popperOptions:x,popperRef:b,slotProps:k,slots:M,...O,style:{position:"fixed",top:0,left:0,display:H,...S},TransitionProps:X,children:i})})}),tee=Ar(eee,{name:"MuiPopper",slot:"Root"})({}),d7=J.forwardRef(function(t,r){const n=i1(),i=oi({props:t,name:"MuiPopper"}),{anchorEl:o,component:l,components:a,componentsProps:c,container:h,disablePortal:g,keepMounted:v,modifiers:x,open:b,placement:S,popperOptions:I,popperRef:k,transition:M,slots:O,slotProps:F,...D}=i,q=O?.root??a?.Root,z={anchorEl:o,container:h,disablePortal:g,keepMounted:v,modifiers:x,open:b,placement:S,popperOptions:I,popperRef:k,transition:M,...D};return Z.jsx(tee,{as:l,direction:n?"rtl":"ltr",slots:{root:q},slotProps:F??c,...z,ref:r})});function eb(e){return parseInt(e,10)||0}const ree={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function nee(e){for(const t in e)return!1;return!0}function iR(e){return nee(e)||e.outerHeightStyle===0&&!e.overflowing}const iee=J.forwardRef(function(t,r){const{onChange:n,maxRows:i,minRows:o=1,style:l,value:a,...c}=t,{current:h}=J.useRef(a!=null),g=J.useRef(null),v=no(r,g),x=J.useRef(null),b=J.useRef(null),S=J.useCallback(()=>{const F=g.current,D=b.current;if(!F||!D)return;const z=Iu(F).getComputedStyle(F);if(z.width==="0px")return{outerHeightStyle:0,overflowing:!1};D.style.width=z.width,D.value=F.value||t.placeholder||"x",D.value.slice(-1)===`
`&&(D.value+=" ");const U=z.boxSizing,H=eb(z.paddingBottom)+eb(z.paddingTop),X=eb(z.borderBottomWidth)+eb(z.borderTopWidth),ie=D.scrollHeight;D.value="x";const ee=D.scrollHeight;let G=ie;o&&(G=Math.max(Number(o)*ee,G)),i&&(G=Math.min(Number(i)*ee,G)),G=Math.max(G,ee);const ne=G+(U==="border-box"?H+X:0),ae=Math.abs(G-ie)<=1;return{outerHeightStyle:ne,overflowing:ae}},[i,o,t.placeholder]),I=El(()=>{const F=g.current,D=S();if(!F||!D||iR(D))return!1;const q=D.outerHeightStyle;return x.current!=null&&x.current!==q}),k=J.useCallback(()=>{const F=g.current,D=S();if(!F||!D||iR(D))return;const q=D.outerHeightStyle;x.current!==q&&(x.current=q,F.style.height=`${q}px`),F.style.overflow=D.overflowing?"hidden":""},[S]),M=J.useRef(-1);Vl(()=>{const F=MP(k),D=g?.current;if(!D)return;const q=Iu(D);q.addEventListener("resize",F);let z;return typeof ResizeObserver<"u"&&(z=new ResizeObserver(()=>{I()&&(z.unobserve(D),cancelAnimationFrame(M.current),k(),M.current=requestAnimationFrame(()=>{z.observe(D)}))}),z.observe(D)),()=>{F.clear(),cancelAnimationFrame(M.current),q.removeEventListener("resize",F),z&&z.disconnect()}},[S,k,I]),Vl(()=>{k()});const O=F=>{h||k();const D=F.target,q=D.value.length,z=D.value.endsWith(`
`),U=D.selectionStart===q;z&&U&&D.setSelectionRange(q,q),n&&n(F)};return Z.jsxs(J.Fragment,{children:[Z.jsx("textarea",{value:a,onChange:O,ref:v,rows:o,style:l,...c}),Z.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:b,tabIndex:-1,style:{...ree.shadow,...l,paddingTop:0,paddingBottom:0}})]})});function Hh({props:e,states:t,muiFormControl:r}){return t.reduce((n,i)=>(n[i]=e[i],r&&typeof e[i]>"u"&&(n[i]=r[i]),n),{})}const qP=J.createContext(void 0);function rf(){return J.useContext(qP)}function aR(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function j_(e,t=!1){return e&&(aR(e.value)&&e.value!==""||t&&aR(e.defaultValue)&&e.defaultValue!=="")}function aee(e){return e.startAdornment}function oee(e){return Qn("MuiInputBase",e)}const ey=Yn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var oR;const _2=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${tn(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},x2=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},see=e=>{const{classes:t,color:r,disabled:n,error:i,endAdornment:o,focused:l,formControl:a,fullWidth:c,hiddenLabel:h,multiline:g,readOnly:v,size:x,startAdornment:b,type:S}=e,I={root:["root",`color${tn(r)}`,n&&"disabled",i&&"error",c&&"fullWidth",l&&"focused",a&&"formControl",x&&x!=="medium"&&`size${tn(x)}`,g&&"multiline",b&&"adornedStart",o&&"adornedEnd",h&&"hiddenLabel",v&&"readOnly"],input:["input",n&&"disabled",S==="search"&&"inputTypeSearch",g&&"inputMultiline",x==="small"&&"inputSizeSmall",h&&"inputHiddenLabel",b&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return ei(I,oee,t)},w2=Ar("div",{name:"MuiInputBase",slot:"Root",overridesResolver:_2})(qn(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ey.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),S2=Ar("input",{name:"MuiInputBase",slot:"Input",overridesResolver:x2})(qn(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ey.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${ey.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),sR=CK({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),$P=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:l,className:a,color:c,components:h={},componentsProps:g={},defaultValue:v,disabled:x,disableInjectingGlobalStyles:b,endAdornment:S,error:I,fullWidth:k=!1,id:M,inputComponent:O="input",inputProps:F={},inputRef:D,margin:q,maxRows:z,minRows:U,multiline:H=!1,name:X,onBlur:ie,onChange:ee,onClick:G,onFocus:ne,onKeyDown:ae,onKeyUp:le,placeholder:fe,readOnly:ke,renderSuffix:me,rows:Se,size:we,slotProps:Pe={},slots:ce={},startAdornment:_e,type:be="text",value:Me,...Le}=n,Ue=F.value!=null?F.value:Me,{current:Oe}=J.useRef(Ue!=null),tt=J.useRef(),Ze=J.useCallback(Ht=>{},[]),Qe=no(tt,D,F.ref,Ze),[Ie,Mt]=J.useState(!1),ot=rf(),$e=Hh({props:n,muiFormControl:ot,states:["color","disabled","error","hiddenLabel","size","required","filled"]});$e.focused=ot?ot.focused:Ie,J.useEffect(()=>{!ot&&x&&Ie&&(Mt(!1),ie&&ie())},[ot,x,Ie,ie]);const tr=ot&&ot.onFilled,Wt=ot&&ot.onEmpty,Gt=J.useCallback(Ht=>{j_(Ht)?tr&&tr():Wt&&Wt()},[tr,Wt]);Vl(()=>{Oe&&Gt({value:Ue})},[Ue,Gt,Oe]);const at=Ht=>{ne&&ne(Ht),F.onFocus&&F.onFocus(Ht),ot&&ot.onFocus?ot.onFocus(Ht):Mt(!0)},dr=Ht=>{ie&&ie(Ht),F.onBlur&&F.onBlur(Ht),ot&&ot.onBlur?ot.onBlur(Ht):Mt(!1)},hr=(Ht,...Ct)=>{if(!Oe){const Re=Ht.target||tt.current;if(Re==null)throw new Error(qf(1));Gt({value:Re.value})}F.onChange&&F.onChange(Ht,...Ct),ee&&ee(Ht,...Ct)};J.useEffect(()=>{Gt(tt.current)},[]);const ur=Ht=>{tt.current&&Ht.currentTarget===Ht.target&&tt.current.focus(),G&&G(Ht)};let Cr=O,br=F;H&&Cr==="input"&&(Se?br={type:void 0,minRows:Se,maxRows:Se,...br}:br={type:void 0,maxRows:z,minRows:U,...br},Cr=iee);const nr=Ht=>{Gt(Ht.animationName==="mui-auto-fill-cancel"?tt.current:{value:"x"})};J.useEffect(()=>{ot&&ot.setAdornedStart(!!_e)},[ot,_e]);const lr={...n,color:$e.color||"primary",disabled:$e.disabled,endAdornment:S,error:$e.error,focused:$e.focused,formControl:ot,fullWidth:k,hiddenLabel:$e.hiddenLabel,multiline:H,size:$e.size,startAdornment:_e,type:be},Pr=see(lr),ar=ce.root||h.Root||w2,kr=Pe.root||g.root||{},Qt=ce.input||h.Input||S2;return br={...br,...Pe.input??g.input},Z.jsxs(J.Fragment,{children:[!b&&typeof sR=="function"&&(oR||(oR=Z.jsx(sR,{}))),Z.jsxs(ar,{...kr,ref:r,onClick:ur,...Le,...!Hd(ar)&&{ownerState:{...lr,...kr.ownerState}},className:mn(Pr.root,kr.className,a,ke&&"MuiInputBase-readOnly"),children:[_e,Z.jsx(qP.Provider,{value:null,children:Z.jsx(Qt,{"aria-invalid":$e.error,"aria-describedby":i,autoComplete:o,autoFocus:l,defaultValue:v,disabled:$e.disabled,id:M,onAnimationStart:nr,name:X,placeholder:fe,readOnly:ke,required:$e.required,rows:Se,value:Ue,onKeyDown:ae,onKeyUp:le,type:be,...br,...!Hd(Qt)&&{as:Cr,ownerState:{...lr,...br.ownerState}},ref:Qe,className:mn(Pr.input,br.className,ke&&"MuiInputBase-readOnly"),onBlur:dr,onChange:hr,onFocus:at})}),S,me?me({...$e,startAdornment:_e}):null]})]})});function lee(e){return Qn("MuiInput",e)}const iv={...ey,...Yn("MuiInput",["root","underline","input"])};function uee(e){return Qn("MuiOutlinedInput",e)}const Od={...ey,...Yn("MuiOutlinedInput",["root","notchedOutline","input"])};function cee(e){return Qn("MuiFilledInput",e)}const hp={...ey,...Yn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},dee=Ei(Z.jsx("path",{d:"M7 10l5 5 5-5z"})),fee=Ei(Z.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function hee(e){return Qn("MuiAvatar",e)}Yn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const pee=e=>{const{classes:t,variant:r,colorDefault:n}=e;return ei({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},hee,t)},mee=Ar("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(qn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),gee=Ar("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),yee=Ar(fee,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function vee({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[i,o]=J.useState(!1);return J.useEffect(()=>{if(!r&&!n)return;o(!1);let l=!0;const a=new Image;return a.onload=()=>{l&&o("loaded")},a.onerror=()=>{l&&o("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=r,n&&(a.srcset=n),()=>{l=!1}},[e,t,r,n]),i}const f7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiAvatar"}),{alt:i,children:o,className:l,component:a="div",slots:c={},slotProps:h={},imgProps:g,sizes:v,src:x,srcSet:b,variant:S="circular",...I}=n;let k=null;const M={...n,component:a,variant:S},O=vee({...g,...typeof h.img=="function"?h.img(M):h.img,src:x,srcSet:b}),F=x||b,D=F&&O!=="error";M.colorDefault=!D,delete M.ownerState;const q=pee(M),[z,U]=ai("root",{ref:r,className:mn(q.root,l),elementType:mee,externalForwardedProps:{slots:c,slotProps:h,component:a,...I},ownerState:M}),[H,X]=ai("img",{className:q.img,elementType:gee,externalForwardedProps:{slots:c,slotProps:{img:{...g,...h.img}}},additionalProps:{alt:i,src:x,srcSet:b,sizes:v},ownerState:M}),[ie,ee]=ai("fallback",{className:q.fallback,elementType:yee,externalForwardedProps:{slots:c,slotProps:h},shouldForwardComponentProp:!0,ownerState:M});return D?k=Z.jsx(H,{...X}):o||o===0?k=o:F&&i?k=i[0]:k=Z.jsx(ie,{...ee}),Z.jsx(z,{...U,children:k})}),bee={entering:{opacity:1},entered:{opacity:1}},oT=J.forwardRef(function(t,r){const n=mu(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:a,easing:c,in:h,onEnter:g,onEntered:v,onEntering:x,onExit:b,onExited:S,onExiting:I,style:k,timeout:M=i,TransitionComponent:O=wc,...F}=t,D=J.useRef(null),q=no(D,Zf(a),r),z=ae=>le=>{if(ae){const fe=D.current;le===void 0?ae(fe):ae(fe,le)}},U=z(x),H=z((ae,le)=>{y2(ae);const fe=cd({style:k,timeout:M,easing:c},{mode:"enter"});ae.style.webkitTransition=n.transitions.create("opacity",fe),ae.style.transition=n.transitions.create("opacity",fe),g&&g(ae,le)}),X=z(v),ie=z(I),ee=z(ae=>{const le=cd({style:k,timeout:M,easing:c},{mode:"exit"});ae.style.webkitTransition=n.transitions.create("opacity",le),ae.style.transition=n.transitions.create("opacity",le),b&&b(ae)}),G=z(S),ne=ae=>{o&&o(D.current,ae)};return Z.jsx(O,{appear:l,in:h,nodeRef:D,onEnter:H,onEntered:X,onEntering:U,onExit:ee,onExited:G,onExiting:ie,addEndListener:ne,timeout:M,...F,children:(ae,{ownerState:le,...fe})=>J.cloneElement(a,{style:{opacity:0,visibility:ae==="exited"&&!h?"hidden":void 0,...bee[ae],...k,...a.props.style},ref:q,...fe})})});function _ee(e){return Qn("MuiBackdrop",e)}Yn("MuiBackdrop",["root","invisible"]);const xee=e=>{const{classes:t,invisible:r}=e;return ei({root:["root",r&&"invisible"]},_ee,t)},wee=Ar("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),h7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiBackdrop"}),{children:i,className:o,component:l="div",invisible:a=!1,open:c,components:h={},componentsProps:g={},slotProps:v={},slots:x={},TransitionComponent:b,transitionDuration:S,...I}=n,k={...n,component:l,invisible:a},M=xee(k),O={transition:b,root:h.Root,...x},F={...g,...v},D={component:l,slots:O,slotProps:F},[q,z]=ai("root",{elementType:wee,externalForwardedProps:D,className:mn(M.root,o),ownerState:k}),[U,H]=ai("transition",{elementType:oT,externalForwardedProps:D,ownerState:k});return Z.jsx(U,{in:c,timeout:S,...I,...H,children:Z.jsx(q,{"aria-hidden":!0,...z,classes:M,ref:r,children:i})})}),See=Yn("MuiBox",["root"]),Cee=vy(),vo=C9({themeId:ld,defaultTheme:Cee,defaultClassName:See.root,generateClassName:wP.generate});function Eee(e){return Qn("MuiButton",e)}const pp=Yn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),p7=J.createContext({}),m7=J.createContext(void 0),Tee=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,loading:l,loadingPosition:a,classes:c}=e,h={root:["root",l&&"loading",o,`${o}${tn(t)}`,`size${tn(i)}`,`${o}Size${tn(i)}`,`color${tn(t)}`,r&&"disableElevation",n&&"fullWidth",l&&`loadingPosition${tn(a)}`],startIcon:["icon","startIcon",`iconSize${tn(i)}`],endIcon:["icon","endIcon",`iconSize${tn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},g=ei(h,Eee,c);return{...c,...g}},g7=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Pee=Ar(nm,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${tn(r.color)}`],t[`size${tn(r.size)}`],t[`${r.variant}Size${tn(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(qn(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${pp.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${pp.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${pp.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${pp.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Xs()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${pp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${pp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${pp.loading}`]:{color:"transparent"}}}]}})),Iee=Ar("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${tn(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...g7]})),kee=Ar("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${tn(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...g7]})),Aee=Ar("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),lR=Ar("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Ui=J.forwardRef(function(t,r){const n=J.useContext(p7),i=J.useContext(m7),o=v0(n,t),l=oi({props:o,name:"MuiButton"}),{children:a,color:c="primary",component:h="button",className:g,disabled:v=!1,disableElevation:x=!1,disableFocusRipple:b=!1,endIcon:S,focusVisibleClassName:I,fullWidth:k=!1,id:M,loading:O=null,loadingIndicator:F,loadingPosition:D="center",size:q="medium",startIcon:z,type:U,variant:H="text",...X}=l,ie=Vh(M),ee=F??Z.jsx(v2,{"aria-labelledby":ie,color:"inherit",size:16}),G={...l,color:c,component:h,disabled:v,disableElevation:x,disableFocusRipple:b,fullWidth:k,loading:O,loadingIndicator:ee,loadingPosition:D,size:q,type:U,variant:H},ne=Tee(G),ae=(z||O&&D==="start")&&Z.jsx(Iee,{className:ne.startIcon,ownerState:G,children:z||Z.jsx(lR,{className:ne.loadingIconPlaceholder,ownerState:G})}),le=(S||O&&D==="end")&&Z.jsx(kee,{className:ne.endIcon,ownerState:G,children:S||Z.jsx(lR,{className:ne.loadingIconPlaceholder,ownerState:G})}),fe=i||"",ke=typeof O=="boolean"?Z.jsx("span",{className:ne.loadingWrapper,style:{display:"contents"},children:O&&Z.jsx(Aee,{className:ne.loadingIndicator,ownerState:G,children:ee})}):null;return Z.jsxs(Pee,{ownerState:G,className:mn(n.className,ne.root,g,fe),component:h,disabled:v||O,focusRipple:!b,focusVisibleClassName:mn(ne.focusVisible,I),ref:r,type:U,id:O?ie:M,...X,classes:ne,children:[ae,D!=="end"&&ke,a,D==="end"&&ke,le]})});function Mee(e){return J.Children.toArray(e).filter(t=>J.isValidElement(t))}function Lee(e){return Qn("MuiButtonGroup",e)}const Vi=Yn("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Ree=(e,t)=>{const{ownerState:r}=e;return[{[`& .${Vi.grouped}`]:t.grouped},{[`& .${Vi.grouped}`]:t[`grouped${tn(r.orientation)}`]},{[`& .${Vi.grouped}`]:t[`grouped${tn(r.variant)}`]},{[`& .${Vi.grouped}`]:t[`grouped${tn(r.variant)}${tn(r.orientation)}`]},{[`& .${Vi.grouped}`]:t[`grouped${tn(r.variant)}${tn(r.color)}`]},{[`& .${Vi.firstButton}`]:t.firstButton},{[`& .${Vi.lastButton}`]:t.lastButton},{[`& .${Vi.middleButton}`]:t.middleButton},t.root,t[r.variant],r.disableElevation===!0&&t.disableElevation,r.fullWidth&&t.fullWidth,r.orientation==="vertical"&&t.vertical]},Dee=e=>{const{classes:t,color:r,disabled:n,disableElevation:i,fullWidth:o,orientation:l,variant:a}=e,c={root:["root",a,l,o&&"fullWidth",i&&"disableElevation",`color${tn(r)}`],grouped:["grouped",`grouped${tn(l)}`,`grouped${tn(a)}`,`grouped${tn(a)}${tn(l)}`,`grouped${tn(a)}${tn(r)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ei(c,Lee,t)},Nee=Ar("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Ree})(qn(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Vi.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Vi.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Xs()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Vi.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Vi.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Xs(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${Vi.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),sT=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiButtonGroup"}),{children:i,className:o,color:l="primary",component:a="div",disabled:c=!1,disableElevation:h=!1,disableFocusRipple:g=!1,disableRipple:v=!1,fullWidth:x=!1,orientation:b="horizontal",size:S="medium",variant:I="outlined",...k}=n,M={...n,color:l,component:a,disabled:c,disableElevation:h,disableFocusRipple:g,disableRipple:v,fullWidth:x,orientation:b,size:S,variant:I},O=Dee(M),F=J.useMemo(()=>({className:O.grouped,color:l,disabled:c,disableElevation:h,disableFocusRipple:g,disableRipple:v,fullWidth:x,size:S,variant:I}),[l,c,h,g,v,x,S,I,O.grouped]),D=Mee(i),q=D.length,z=U=>{const H=U===0,X=U===q-1;return H&&X?"":H?O.firstButton:X?O.lastButton:O.middleButton};return Z.jsx(Nee,{as:a,role:"group",className:mn(O.root,o),ref:r,ownerState:M,...k,children:Z.jsx(p7.Provider,{value:F,children:D.map((U,H)=>Z.jsx(m7.Provider,{value:z(H),children:U},H))})})});function Oee(e){return Qn("PrivateSwitchBase",e)}Yn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Fee=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${tn(i)}`],input:["input"]};return ei(o,Oee,t)},Bee=Ar(nm,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),zee=Ar("input",{name:"MuiSwitchBase",shouldForwardProp:Es})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y7=J.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,defaultChecked:l,disabled:a,disableFocusRipple:c=!1,edge:h=!1,icon:g,id:v,inputProps:x,inputRef:b,name:S,onBlur:I,onChange:k,onFocus:M,readOnly:O,required:F=!1,tabIndex:D,type:q,value:z,slots:U={},slotProps:H={},...X}=t,[ie,ee]=Dh({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),G=rf(),ne=Me=>{M&&M(Me),G&&G.onFocus&&G.onFocus(Me)},ae=Me=>{I&&I(Me),G&&G.onBlur&&G.onBlur(Me)},le=Me=>{if(Me.nativeEvent.defaultPrevented)return;const Le=Me.target.checked;ee(Le),k&&k(Me,Le)};let fe=a;G&&typeof fe>"u"&&(fe=G.disabled);const ke=q==="checkbox"||q==="radio",me={...t,checked:ie,disabled:fe,disableFocusRipple:c,edge:h},Se=Fee(me),we={slots:U,slotProps:{input:x,...H}},[Pe,ce]=ai("root",{ref:r,elementType:Bee,className:Se.root,shouldForwardComponentProp:!0,externalForwardedProps:{...we,component:"span",...X},getSlotProps:Me=>({...Me,onFocus:Le=>{Me.onFocus?.(Le),ne(Le)},onBlur:Le=>{Me.onBlur?.(Le),ae(Le)}}),ownerState:me,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:fe,role:void 0,tabIndex:null}}),[_e,be]=ai("input",{ref:b,elementType:zee,className:Se.input,externalForwardedProps:we,getSlotProps:Me=>({...Me,onChange:Le=>{Me.onChange?.(Le),le(Le)}}),ownerState:me,additionalProps:{autoFocus:n,checked:i,defaultChecked:l,disabled:fe,id:ke?v:void 0,name:S,readOnly:O,required:F,tabIndex:D,type:q,...q==="checkbox"&&z===void 0?{}:{value:z}}});return Z.jsxs(Pe,{...ce,children:[Z.jsx(_e,{...be}),ie?o:g]})}),jee=Ei(Z.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),qee=Ei(Z.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),$ee=Ei(Z.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Vee(e){return Qn("MuiCheckbox",e)}const wS=Yn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Uee=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,o={root:["root",r&&"indeterminate",`color${tn(n)}`,`size${tn(i)}`]},l=ei(o,Vee,t);return{...t,...l}},Gee=Ar(y7,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${tn(r.size)}`],r.color!=="default"&&t[`color${tn(r.color)}`]]}})(qn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{[`&.${wS.checked}, &.${wS.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${wS.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Hee=Z.jsx(qee,{}),Wee=Z.jsx(jee,{}),Xee=Z.jsx($ee,{}),ty=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiCheckbox"}),{checkedIcon:i=Hee,color:o="primary",icon:l=Wee,indeterminate:a=!1,indeterminateIcon:c=Xee,inputProps:h,size:g="medium",disableRipple:v=!1,className:x,slots:b={},slotProps:S={},...I}=n,k=a?c:l,M=a?c:i,O={...n,disableRipple:v,color:o,indeterminate:a,size:g},F=Uee(O),D=S.input??h,[q,z]=ai("root",{ref:r,elementType:Gee,className:mn(F.root,x),shouldForwardComponentProp:!0,externalForwardedProps:{slots:b,slotProps:S,...I},ownerState:O,additionalProps:{type:"checkbox",icon:J.cloneElement(k,{fontSize:k.props.fontSize??g}),checkedIcon:J.cloneElement(M,{fontSize:M.props.fontSize??g}),disableRipple:v,slots:b,slotProps:{input:Xg(typeof D=="function"?D(O):D,{"data-indeterminate":a})}}});return Z.jsx(q,{...z,classes:F})});function uR(e){return e.substring(2).toLowerCase()}function Yee(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Zee(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,l=J.useRef(!1),a=J.useRef(null),c=J.useRef(!1),h=J.useRef(!1);J.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const g=no(Zf(t),a),v=El(S=>{const I=h.current;h.current=!1;const k=Bo(a.current);if(!c.current||!a.current||"clientX"in S&&Yee(S,k))return;if(l.current){l.current=!1;return}let M;S.composedPath?M=S.composedPath().includes(a.current):M=!k.documentElement.contains(S.target)||a.current.contains(S.target),!M&&(r||!I)&&i(S)}),x=S=>I=>{h.current=!0;const k=t.props[S];k&&k(I)},b={ref:g};return o!==!1&&(b[o]=x(o)),J.useEffect(()=>{if(o!==!1){const S=uR(o),I=Bo(a.current),k=()=>{l.current=!0};return I.addEventListener(S,v),I.addEventListener("touchmove",k),()=>{I.removeEventListener(S,v),I.removeEventListener("touchmove",k)}}},[v,o]),n!==!1&&(b[n]=x(n)),J.useEffect(()=>{if(n!==!1){const S=uR(n),I=Bo(a.current);return I.addEventListener(S,v),()=>{I.removeEventListener(S,v)}}},[v,n]),J.cloneElement(t,b)}function v7(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Kee(e){const t=Bo(e);return t.body===e?Iu(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function t0(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function cR(e){return parseInt(Iu(e).getComputedStyle(e).paddingRight,10)||0}function Jee(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function dR(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,l=>{const a=!o.includes(l),c=!Jee(l);a&&c&&t0(l,i)})}function SS(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function Qee(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(Kee(n)){const l=v7(Iu(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${cR(n)+l}px`;const a=Bo(n).querySelectorAll(".mui-fixed");[].forEach.call(a,c=>{r.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${cR(c)+l}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=Bo(n).body;else{const l=n.parentElement,a=Iu(n);o=l?.nodeName==="HTML"&&a.getComputedStyle(l).overflowY==="scroll"?l:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:l,property:a})=>{o?l.style.setProperty(a,o):l.style.removeProperty(a)})}}function ete(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class tte{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&t0(t.modalRef,!1);const i=ete(r);dR(r,t.mount,t.modalRef,i,!0);const o=SS(this.containers,l=>l.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=SS(this.containers,o=>o.modals.includes(t)),i=this.containers[n];i.restore||(i.restore=Qee(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=SS(this.containers,l=>l.modals.includes(t)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&t0(t.modalRef,r),dR(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&t0(l.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const rte=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function nte(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function ite(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function ate(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||ite(e))}function ote(e){const t=[],r=[];return Array.from(e.querySelectorAll(rte)).forEach((n,i)=>{const o=nte(n);o===-1||!ate(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function ste(){return!0}function lte(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=ote,isEnabled:l=ste,open:a}=e,c=J.useRef(!1),h=J.useRef(null),g=J.useRef(null),v=J.useRef(null),x=J.useRef(null),b=J.useRef(!1),S=J.useRef(null),I=no(Zf(t),S),k=J.useRef(null);J.useEffect(()=>{!a||!S.current||(b.current=!r)},[r,a]),J.useEffect(()=>{if(!a||!S.current)return;const F=Bo(S.current);return S.current.contains(F.activeElement)||(S.current.hasAttribute("tabIndex")||S.current.setAttribute("tabIndex","-1"),b.current&&S.current.focus()),()=>{i||(v.current&&v.current.focus&&(c.current=!0,v.current.focus()),v.current=null)}},[a]),J.useEffect(()=>{if(!a||!S.current)return;const F=Bo(S.current),D=U=>{k.current=U,!(n||!l()||U.key!=="Tab")&&F.activeElement===S.current&&U.shiftKey&&(c.current=!0,g.current&&g.current.focus())},q=()=>{const U=S.current;if(U===null)return;if(!F.hasFocus()||!l()||c.current){c.current=!1;return}if(U.contains(F.activeElement)||n&&F.activeElement!==h.current&&F.activeElement!==g.current)return;if(F.activeElement!==x.current)x.current=null;else if(x.current!==null)return;if(!b.current)return;let H=[];if((F.activeElement===h.current||F.activeElement===g.current)&&(H=o(S.current)),H.length>0){const X=!!(k.current?.shiftKey&&k.current?.key==="Tab"),ie=H[0],ee=H[H.length-1];typeof ie!="string"&&typeof ee!="string"&&(X?ee.focus():ie.focus())}else U.focus()};F.addEventListener("focusin",q),F.addEventListener("keydown",D,!0);const z=setInterval(()=>{F.activeElement&&F.activeElement.tagName==="BODY"&&q()},50);return()=>{clearInterval(z),F.removeEventListener("focusin",q),F.removeEventListener("keydown",D,!0)}},[r,n,i,l,a,o]);const M=F=>{v.current===null&&(v.current=F.relatedTarget),b.current=!0,x.current=F.target;const D=t.props.onFocus;D&&D(F)},O=F=>{v.current===null&&(v.current=F.relatedTarget),b.current=!0};return Z.jsxs(J.Fragment,{children:[Z.jsx("div",{tabIndex:a?0:-1,onFocus:O,ref:h,"data-testid":"sentinelStart"}),J.cloneElement(t,{ref:I,onFocus:M}),Z.jsx("div",{tabIndex:a?0:-1,onFocus:O,ref:g,"data-testid":"sentinelEnd"})]})}function ute(e){return typeof e=="function"?e():e}function cte(e){return e?e.props.hasOwnProperty("in"):!1}const fR=()=>{},tb=new tte;function dte(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:l,children:a,onClose:c,open:h,rootRef:g}=e,v=J.useRef({}),x=J.useRef(null),b=J.useRef(null),S=no(b,g),[I,k]=J.useState(!h),M=cte(a);let O=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(O=!1);const F=()=>Bo(x.current),D=()=>(v.current.modalRef=b.current,v.current.mount=x.current,v.current),q=()=>{tb.mount(D(),{disableScrollLock:n}),b.current&&(b.current.scrollTop=0)},z=El(()=>{const le=ute(t)||F().body;tb.add(D(),le),b.current&&q()}),U=()=>tb.isTopModal(D()),H=El(le=>{x.current=le,le&&(h&&U()?q():b.current&&t0(b.current,O))}),X=J.useCallback(()=>{tb.remove(D(),O)},[O]);J.useEffect(()=>()=>{X()},[X]),J.useEffect(()=>{h?z():(!M||!i)&&X()},[h,X,M,i,z]);const ie=le=>fe=>{le.onKeyDown?.(fe),!(fe.key!=="Escape"||fe.which===229||!U())&&(r||(fe.stopPropagation(),c&&c(fe,"escapeKeyDown")))},ee=le=>fe=>{le.onClick?.(fe),fe.target===fe.currentTarget&&c&&c(fe,"backdropClick")};return{getRootProps:(le={})=>{const fe=Rp(e);delete fe.onTransitionEnter,delete fe.onTransitionExited;const ke={...fe,...le};return{role:"presentation",...ke,onKeyDown:ie(ke),ref:S}},getBackdropProps:(le={})=>{const fe=le;return{"aria-hidden":!0,...fe,onClick:ee(fe),open:h}},getTransitionProps:()=>{const le=()=>{k(!1),o&&o()},fe=()=>{k(!0),l&&l(),i&&X()};return{onEnter:Y4(le,a?.props.onEnter??fR),onExited:Y4(fe,a?.props.onExited??fR)}},rootRef:S,portalRef:H,isTopModal:U,exited:I,hasTransition:M}}function fte(e){return Qn("MuiModal",e)}Yn("MuiModal",["root","hidden","backdrop"]);const hte=e=>{const{open:t,exited:r,classes:n}=e;return ei({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},fte,n)},pte=Ar("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(qn(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),mte=Ar(h7,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),VP=J.forwardRef(function(t,r){const n=oi({name:"MuiModal",props:t}),{BackdropComponent:i=mte,BackdropProps:o,classes:l,className:a,closeAfterTransition:c=!1,children:h,container:g,component:v,components:x={},componentsProps:b={},disableAutoFocus:S=!1,disableEnforceFocus:I=!1,disableEscapeKeyDown:k=!1,disablePortal:M=!1,disableRestoreFocus:O=!1,disableScrollLock:F=!1,hideBackdrop:D=!1,keepMounted:q=!1,onClose:z,onTransitionEnter:U,onTransitionExited:H,open:X,slotProps:ie={},slots:ee={},theme:G,...ne}=n,ae={...n,closeAfterTransition:c,disableAutoFocus:S,disableEnforceFocus:I,disableEscapeKeyDown:k,disablePortal:M,disableRestoreFocus:O,disableScrollLock:F,hideBackdrop:D,keepMounted:q},{getRootProps:le,getBackdropProps:fe,getTransitionProps:ke,portalRef:me,isTopModal:Se,exited:we,hasTransition:Pe}=dte({...ae,rootRef:r}),ce={...ae,exited:we},_e=hte(ce),be={};if(h.props.tabIndex===void 0&&(be.tabIndex="-1"),Pe){const{onEnter:Ze,onExited:Qe}=ke();be.onEnter=Ze,be.onExited=Qe}const Me={slots:{root:x.Root,backdrop:x.Backdrop,...ee},slotProps:{...b,...ie}},[Le,Ue]=ai("root",{ref:r,elementType:pte,externalForwardedProps:{...Me,...ne,component:v},getSlotProps:le,ownerState:ce,className:mn(a,_e?.root,!ce.open&&ce.exited&&_e?.hidden)}),[Oe,tt]=ai("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:Me,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:Ze=>fe({...Ze,onClick:Qe=>{Ze?.onClick&&Ze.onClick(Qe)}}),className:mn(o?.className,_e?.backdrop),ownerState:ce});return!q&&!X&&(!Pe||we)?null:Z.jsx(c7,{ref:me,container:g,disablePortal:M,children:Z.jsxs(Le,{...Ue,children:[!D&&i?Z.jsx(Oe,{...tt}):null,Z.jsx(lte,{disableEnforceFocus:I,disableAutoFocus:S,disableRestoreFocus:O,isEnabled:Se,open:X,children:J.cloneElement(h,be)})]})})});function gte(e){return Qn("MuiDialog",e)}const CS=Yn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),b7=J.createContext({}),yte=Ar(h7,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),vte=e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:i,fullScreen:o}=e,l={root:["root"],container:["container",`scroll${tn(r)}`],paper:["paper",`paperScroll${tn(r)}`,`paperWidth${tn(String(n))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return ei(l,gte,t)},bte=Ar(VP,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),_te=Ar("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${tn(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),xte=Ar(Nc,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${tn(r.scroll)}`],t[`paperWidth${tn(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(qn(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${CS.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${CS.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${CS.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),UP=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiDialog"}),i=mu(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":a,"aria-modal":c=!0,BackdropComponent:h,BackdropProps:g,children:v,className:x,disableEscapeKeyDown:b=!1,fullScreen:S=!1,fullWidth:I=!1,maxWidth:k="sm",onClick:M,onClose:O,open:F,PaperComponent:D=Nc,PaperProps:q={},scroll:z="paper",slots:U={},slotProps:H={},TransitionComponent:X=oT,transitionDuration:ie=o,TransitionProps:ee,...G}=n,ne={...n,disableEscapeKeyDown:b,fullScreen:S,fullWidth:I,maxWidth:k,scroll:z},ae=vte(ne),le=J.useRef(),fe=Mt=>{le.current=Mt.target===Mt.currentTarget},ke=Mt=>{M&&M(Mt),le.current&&(le.current=null,O&&O(Mt,"backdropClick"))},me=Vh(a),Se=J.useMemo(()=>({titleId:me}),[me]),we={transition:X,...U},Pe={transition:ee,paper:q,backdrop:g,...H},ce={slots:we,slotProps:Pe},[_e,be]=ai("root",{elementType:bte,shouldForwardComponentProp:!0,externalForwardedProps:ce,ownerState:ne,className:mn(ae.root,x),ref:r}),[Me,Le]=ai("backdrop",{elementType:yte,shouldForwardComponentProp:!0,externalForwardedProps:ce,ownerState:ne}),[Ue,Oe]=ai("paper",{elementType:xte,shouldForwardComponentProp:!0,externalForwardedProps:ce,ownerState:ne,className:mn(ae.paper,q.className)}),[tt,Ze]=ai("container",{elementType:_te,externalForwardedProps:ce,ownerState:ne,className:ae.container}),[Qe,Ie]=ai("transition",{elementType:oT,externalForwardedProps:ce,ownerState:ne,additionalProps:{appear:!0,in:F,timeout:ie,role:"presentation"}});return Z.jsx(_e,{closeAfterTransition:!0,slots:{backdrop:Me},slotProps:{backdrop:{transitionDuration:ie,as:h,...Le}},disableEscapeKeyDown:b,onClose:O,open:F,onClick:ke,...be,...G,children:Z.jsx(Qe,{...Ie,children:Z.jsx(tt,{onMouseDown:fe,...Ze,children:Z.jsx(Ue,{as:D,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":me,"aria-modal":c,...Oe,children:Z.jsx(b7.Provider,{value:Se,children:v})})})})})});function wte(e){return Qn("MuiDialogActions",e)}Yn("MuiDialogActions",["root","spacing"]);const Ste=e=>{const{classes:t,disableSpacing:r}=e;return ei({root:["root",!r&&"spacing"]},wte,t)},Cte=Ar("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),s1=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...l}=n,a={...n,disableSpacing:o},c=Ste(a);return Z.jsx(Cte,{className:mn(c.root,i),ownerState:a,ref:r,...l})});function Ete(e){return Qn("MuiDialogContent",e)}Yn("MuiDialogContent",["root","dividers"]);function Tte(e){return Qn("MuiDialogTitle",e)}const Pte=Yn("MuiDialogTitle",["root"]),Ite=e=>{const{classes:t,dividers:r}=e;return ei({root:["root",r&&"dividers"]},Ete,t)},kte=Ar("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(qn(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${Pte.root} + &`]:{paddingTop:0}}}]}))),GP=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...l}=n,a={...n,dividers:o},c=Ite(a);return Z.jsx(kte,{className:mn(c.root,i),ownerState:a,ref:r,...l})});function Ate(e){return Qn("MuiDialogContentText",e)}Yn("MuiDialogContentText",["root"]);const Mte=e=>{const{classes:t}=e,n=ei({root:["root"]},Ate,t);return{...t,...n}},Lte=Ar(Qo,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Rte=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiDialogContentText"}),{children:i,className:o,...l}=n,a=Mte(l);return Z.jsx(Lte,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:l,className:mn(a.root,o),...n,classes:a})}),Dte=e=>{const{classes:t}=e;return ei({root:["root"]},Tte,t)},Nte=Ar(Qo,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),im=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiDialogTitle"}),{className:i,id:o,...l}=n,a=n,c=Dte(a),{titleId:h=o}=J.useContext(b7);return Z.jsx(Nte,{component:"h2",className:mn(c.root,i),ownerState:a,ref:r,variant:"h6",id:o??h,...l})});function Ote(e){return Qn("MuiDivider",e)}const hR=Yn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Fte=e=>{const{absolute:t,children:r,classes:n,flexItem:i,light:o,orientation:l,textAlign:a,variant:c}=e;return ei({root:["root",t&&"absolute",c,o&&"light",l==="vertical"&&"vertical",i&&"flexItem",r&&"withChildren",r&&l==="vertical"&&"withChildrenVertical",a==="right"&&l!=="vertical"&&"textAlignRight",a==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},Ote,n)},Bte=Ar("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(qn(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),zte=Ar("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(qn(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),lT=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiDivider"}),{absolute:i=!1,children:o,className:l,orientation:a="horizontal",component:c=o||a==="vertical"?"div":"hr",flexItem:h=!1,light:g=!1,role:v=c!=="hr"?"separator":void 0,textAlign:x="center",variant:b="fullWidth",...S}=n,I={...n,absolute:i,component:c,flexItem:h,light:g,orientation:a,role:v,textAlign:x,variant:b},k=Fte(I);return Z.jsx(Bte,{as:c,className:mn(k.root,l),role:v,ref:r,ownerState:I,"aria-orientation":v==="separator"&&(c!=="hr"||a==="vertical")?a:void 0,...S,children:o?Z.jsx(zte,{className:k.wrapper,ownerState:I,children:o}):null})});lT&&(lT.muiSkipListHighlight=!0);function jte(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),o=Iu(t);let l;if(t.fakeTransform)l=t.fakeTransform;else{const h=o.getComputedStyle(t);l=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("transform")}let a=0,c=0;if(l&&l!=="none"&&typeof l=="string"){const h=l.split("(")[1].split(")")[0].split(",");a=parseInt(h[4],10),c=parseInt(h[5],10)}return e==="left"?i?`translateX(${i.right+a-n.left}px)`:`translateX(${o.innerWidth+a-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:e==="up"?i?`translateY(${i.bottom+c-n.top}px)`:`translateY(${o.innerHeight+c-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-c}px)`:`translateY(-${n.top+n.height-c}px)`}function qte(e){return typeof e=="function"?e():e}function rb(e,t,r){const n=qte(r),i=jte(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const $te=J.forwardRef(function(t,r){const n=mu(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:l,appear:a=!0,children:c,container:h,direction:g="down",easing:v=i,in:x,onEnter:b,onEntered:S,onEntering:I,onExit:k,onExited:M,onExiting:O,style:F,timeout:D=o,TransitionComponent:q=wc,...z}=t,U=J.useRef(null),H=no(Zf(c),U,r),X=me=>Se=>{me&&(Se===void 0?me(U.current):me(U.current,Se))},ie=X((me,Se)=>{rb(g,me,h),y2(me),b&&b(me,Se)}),ee=X((me,Se)=>{const we=cd({timeout:D,style:F,easing:v},{mode:"enter"});me.style.webkitTransition=n.transitions.create("-webkit-transform",{...we}),me.style.transition=n.transitions.create("transform",{...we}),me.style.webkitTransform="none",me.style.transform="none",I&&I(me,Se)}),G=X(S),ne=X(O),ae=X(me=>{const Se=cd({timeout:D,style:F,easing:v},{mode:"exit"});me.style.webkitTransition=n.transitions.create("-webkit-transform",Se),me.style.transition=n.transitions.create("transform",Se),rb(g,me,h),k&&k(me)}),le=X(me=>{me.style.webkitTransition="",me.style.transition="",M&&M(me)}),fe=me=>{l&&l(U.current,me)},ke=J.useCallback(()=>{U.current&&rb(g,U.current,h)},[g,h]);return J.useEffect(()=>{if(x||g==="down"||g==="right")return;const me=MP(()=>{U.current&&rb(g,U.current,h)}),Se=Iu(U.current);return Se.addEventListener("resize",me),()=>{me.clear(),Se.removeEventListener("resize",me)}},[g,x,h]),J.useEffect(()=>{x||ke()},[x,ke]),Z.jsx(q,{nodeRef:U,onEnter:ie,onEntered:G,onEntering:ee,onExit:ae,onExited:le,onExiting:ne,addEndListener:fe,appear:a,in:x,timeout:D,...z,children:(me,{ownerState:Se,...we})=>J.cloneElement(c,{ref:H,style:{visibility:me==="exited"&&!x?"hidden":void 0,...F,...c.props.style},...we})})});function Vte(e){return Qn("MuiDrawer",e)}Yn("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const _7=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},Ute=e=>{const{classes:t,anchor:r,variant:n}=e,i={root:["root",`anchor${tn(r)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${tn(r)}`,n!=="temporary"&&`paperAnchorDocked${tn(r)}`]};return ei(i,Vte,t)},Gte=Ar(VP,{name:"MuiDrawer",slot:"Root",overridesResolver:_7})(qn(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),Hte=Ar("div",{shouldForwardProp:Es,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:_7})({flex:"0 0 auto"}),Wte=Ar(Nc,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${tn(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${tn(r.anchor)}`]]}})(qn(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),x7={left:"right",right:"left",top:"down",bottom:"up"};function Sp(e){return["left","right"].includes(e)}function Rv({direction:e},t){return e==="rtl"&&Sp(t)?x7[t]:t}const HP=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiDrawer"}),i=mu(),o=i1(),l={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:c,children:h,className:g,elevation:v=16,hideBackdrop:x=!1,ModalProps:{BackdropProps:b,...S}={},onClose:I,open:k=!1,PaperProps:M={},SlideProps:O,TransitionComponent:F,transitionDuration:D=l,variant:q="temporary",slots:z={},slotProps:U={},...H}=n,X=J.useRef(!1);J.useEffect(()=>{X.current=!0},[]);const ie=Rv({direction:o?"rtl":"ltr"},a),G={...n,anchor:a,elevation:v,open:k,variant:q,...H},ne=Ute(G),ae={slots:{transition:F,...z},slotProps:{paper:M,transition:O,...U,backdrop:Xg(U.backdrop||{...c,...b},{transitionDuration:D})}},[le,fe]=ai("root",{ref:r,elementType:Gte,className:mn(ne.root,ne.modal,g),shouldForwardComponentProp:!0,ownerState:G,externalForwardedProps:{...ae,...H,...S},additionalProps:{open:k,onClose:I,hideBackdrop:x,slots:{backdrop:ae.slots.backdrop},slotProps:{backdrop:ae.slotProps.backdrop}}}),[ke,me]=ai("paper",{elementType:Wte,shouldForwardComponentProp:!0,className:mn(ne.paper,M.className),ownerState:G,externalForwardedProps:ae,additionalProps:{elevation:q==="temporary"?v:0,square:!0,...q==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Se,we]=ai("docked",{elementType:Hte,ref:r,className:mn(ne.root,ne.docked,g),ownerState:G,externalForwardedProps:ae,additionalProps:H}),[Pe,ce]=ai("transition",{elementType:$te,ownerState:G,externalForwardedProps:ae,additionalProps:{in:k,direction:x7[ie],timeout:D,appear:X.current}}),_e=Z.jsx(ke,{...me,children:h});if(q==="permanent")return Z.jsx(Se,{...we,children:_e});const be=Z.jsx(Pe,{...ce,children:_e});return q==="persistent"?Z.jsx(Se,{...we,children:be}):Z.jsx(le,{...fe,children:be})});function Xte(e){return Qn("MuiFab",e)}const pR=Yn("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Yte=e=>{const{color:t,variant:r,classes:n,size:i}=e,o={root:["root",r,`size${tn(i)}`,t==="inherit"?"colorInherit":t]},l=ei(o,Xte,n);return{...n,...l}},Zte=Ar(nm,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Es(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${tn(r.size)}`],r.color==="inherit"&&t.colorInherit,t[tn(r.size)],t[r.color]]}})(qn(({theme:e})=>({...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:e.palette.getContrastText?.(e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${pR.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})),qn(({theme:e})=>({variants:[...Object.entries(e.palette).filter(Xs(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),qn(({theme:e})=>({[`&.${pR.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),w7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiFab"}),{children:i,className:o,color:l="default",component:a="button",disabled:c=!1,disableFocusRipple:h=!1,focusVisibleClassName:g,size:v="large",variant:x="circular",...b}=n,S={...n,color:l,component:a,disabled:c,disableFocusRipple:h,size:v,variant:x},I=Yte(S);return Z.jsx(Zte,{className:mn(I.root,o),component:a,disabled:c,focusRipple:!h,focusVisibleClassName:mn(I.focusVisible,g),ownerState:S,ref:r,...b,classes:I,children:i})}),Kte=e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:i,size:o,hiddenLabel:l,multiline:a}=e,c={root:["root",!r&&"underline",n&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${tn(o)}`,l&&"hiddenLabel",a&&"multiline"],input:["input"]},h=ei(c,cee,t);return{...t,...h}},Jte=Ar(w2,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[..._2(e,t),!r.disableUnderline&&t.underline]}})(qn(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${hp.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${hp.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hp.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hp.disabled}, .${hp.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${hp.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Xs()).map(([l])=>({props:{disableUnderline:!1,color:l},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[l]?.main}`}}})),{props:({ownerState:l})=>l.startAdornment,style:{paddingLeft:12}},{props:({ownerState:l})=>l.endAdornment,style:{paddingRight:12}},{props:({ownerState:l})=>l.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:l,size:a})=>l.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel&&l.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Qte=Ar(S2,{name:"MuiFilledInput",slot:"Input",overridesResolver:x2})(qn(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),WP=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:l,fullWidth:a=!1,hiddenLabel:c,inputComponent:h="input",multiline:g=!1,slotProps:v,slots:x={},type:b="text",...S}=n,I={...n,disableUnderline:i,fullWidth:a,inputComponent:h,multiline:g,type:b},k=Kte(n),M={root:{ownerState:I},input:{ownerState:I}},O=v??l?$l(M,v??l):M,F=x.root??o.Root??Jte,D=x.input??o.Input??Qte;return Z.jsx($P,{slots:{root:F,input:D},slotProps:O,fullWidth:a,inputComponent:h,multiline:g,ref:r,type:b,...S,classes:k})});WP.muiName="Input";function ere(e){return Qn("MuiFormControl",e)}Yn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const tre=e=>{const{classes:t,margin:r,fullWidth:n}=e,i={root:["root",r!=="none"&&`margin${tn(r)}`,n&&"fullWidth"]};return ei(i,ere,t)},rre=Ar("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${tn(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),dc=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiFormControl"}),{children:i,className:o,color:l="primary",component:a="div",disabled:c=!1,error:h=!1,focused:g,fullWidth:v=!1,hiddenLabel:x=!1,margin:b="none",required:S=!1,size:I="medium",variant:k="outlined",...M}=n,O={...n,color:l,component:a,disabled:c,error:h,fullWidth:v,hiddenLabel:x,margin:b,required:S,size:I,variant:k},F=tre(O),[D,q]=J.useState(()=>{let le=!1;return i&&J.Children.forEach(i,fe=>{if(!Fg(fe,["Input","Select"]))return;const ke=Fg(fe,["Select"])?fe.props.input:fe;ke&&aee(ke.props)&&(le=!0)}),le}),[z,U]=J.useState(()=>{let le=!1;return i&&J.Children.forEach(i,fe=>{Fg(fe,["Input","Select"])&&(j_(fe.props,!0)||j_(fe.props.inputProps,!0))&&(le=!0)}),le}),[H,X]=J.useState(!1);c&&H&&X(!1);const ie=g!==void 0&&!c?g:H;let ee;J.useRef(!1);const G=J.useCallback(()=>{U(!0)},[]),ne=J.useCallback(()=>{U(!1)},[]),ae=J.useMemo(()=>({adornedStart:D,setAdornedStart:q,color:l,disabled:c,error:h,filled:z,focused:ie,fullWidth:v,hiddenLabel:x,size:I,onBlur:()=>{X(!1)},onFocus:()=>{X(!0)},onEmpty:ne,onFilled:G,registerEffect:ee,required:S,variant:k}),[D,l,c,h,z,ie,v,x,ee,ne,G,S,I,k]);return Z.jsx(qP.Provider,{value:ae,children:Z.jsx(rre,{as:a,ownerState:O,className:mn(F.root,o),ref:r,...M,children:i})})});function nre(e){return Qn("MuiFormControlLabel",e)}const Dv=Yn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ire=e=>{const{classes:t,disabled:r,labelPlacement:n,error:i,required:o}=e,l={root:["root",r&&"disabled",`labelPlacement${tn(n)}`,i&&"error",o&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",i&&"error"]};return ei(l,nre,t)},are=Ar("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Dv.label}`]:t.label},t.root,t[`labelPlacement${tn(r.labelPlacement)}`]]}})(qn(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Dv.disabled}`]:{cursor:"default"},[`& .${Dv.label}`]:{[`&.${Dv.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),ore=Ar("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(qn(({theme:e})=>({[`&.${Dv.error}`]:{color:(e.vars||e).palette.error.main}}))),uT=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiFormControlLabel"}),{checked:i,className:o,componentsProps:l={},control:a,disabled:c,disableTypography:h,inputRef:g,label:v,labelPlacement:x="end",name:b,onChange:S,required:I,slots:k={},slotProps:M={},value:O,...F}=n,D=rf(),q=c??a.props.disabled??D?.disabled,z=I??a.props.required,U={disabled:q,required:z};["checked","name","onChange","value","inputRef"].forEach(le=>{typeof a.props[le]>"u"&&typeof n[le]<"u"&&(U[le]=n[le])});const H=Hh({props:n,muiFormControl:D,states:["error"]}),X={...n,disabled:q,labelPlacement:x,required:z,error:H.error},ie=ire(X),ee={slots:k,slotProps:{...l,...M}},[G,ne]=ai("typography",{elementType:Qo,externalForwardedProps:ee,ownerState:X});let ae=v;return ae!=null&&ae.type!==Qo&&!h&&(ae=Z.jsx(G,{component:"span",...ne,className:mn(ie.label,ne?.className),children:ae})),Z.jsxs(are,{className:mn(ie.root,o),ownerState:X,ref:r,...F,children:[J.cloneElement(a,U),z?Z.jsxs("div",{children:[ae,Z.jsxs(ore,{ownerState:X,"aria-hidden":!0,className:ie.asterisk,children:["","*"]})]}):ae]})});function sre(e){return Qn("MuiFormGroup",e)}Yn("MuiFormGroup",["root","row","error"]);const lre=e=>{const{classes:t,row:r,error:n}=e;return ei({root:["root",r&&"row",n&&"error"]},sre,t)},ure=Ar("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),S7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiFormGroup"}),{className:i,row:o=!1,...l}=n,a=rf(),c=Hh({props:n,muiFormControl:a,states:["error"]}),h={...n,row:o,error:c.error},g=lre(h);return Z.jsx(ure,{className:mn(g.root,i),ownerState:h,ref:r,...l})});function cre(e){return Qn("MuiFormHelperText",e)}const mR=Yn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var gR;const dre=e=>{const{classes:t,contained:r,size:n,disabled:i,error:o,filled:l,focused:a,required:c}=e,h={root:["root",i&&"disabled",o&&"error",n&&`size${tn(n)}`,r&&"contained",a&&"focused",l&&"filled",c&&"required"]};return ei(h,cre,t)},fre=Ar("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${tn(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(qn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${mR.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${mR.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),hre=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:l="p",disabled:a,error:c,filled:h,focused:g,margin:v,required:x,variant:b,...S}=n,I=rf(),k=Hh({props:n,muiFormControl:I,states:["variant","size","disabled","error","filled","focused","required"]}),M={...n,component:l,contained:k.variant==="filled"||k.variant==="outlined",variant:k.variant,size:k.size,disabled:k.disabled,error:k.error,filled:k.filled,focused:k.focused,required:k.required};delete M.ownerState;const O=dre(M);return Z.jsx(fre,{as:l,className:mn(O.root,o),ref:r,...S,ownerState:M,children:i===" "?gR||(gR=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function pre(e){return Qn("MuiFormLabel",e)}const r0=Yn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),mre=e=>{const{classes:t,color:r,focused:n,disabled:i,error:o,filled:l,required:a}=e,c={root:["root",`color${tn(r)}`,i&&"disabled",o&&"error",l&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return ei(c,pre,t)},gre=Ar("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(qn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{[`&.${r0.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${r0.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${r0.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),yre=Ar("span",{name:"MuiFormLabel",slot:"Asterisk"})(qn(({theme:e})=>({[`&.${r0.error}`]:{color:(e.vars||e).palette.error.main}}))),C7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiFormLabel"}),{children:i,className:o,color:l,component:a="label",disabled:c,error:h,filled:g,focused:v,required:x,...b}=n,S=rf(),I=Hh({props:n,muiFormControl:S,states:["color","required","focused","disabled","error","filled"]}),k={...n,color:I.color||"primary",component:a,disabled:I.disabled,error:I.error,filled:I.filled,focused:I.focused,required:I.required},M=mre(k);return Z.jsxs(gre,{as:a,ownerState:k,className:mn(M.root,o),ref:r,...b,children:[i,I.required&&Z.jsxs(yre,{ownerState:k,"aria-hidden":!0,className:M.asterisk,children:["","*"]})]})}),Rf=PZ({createStyledComponent:Ar("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>oi({props:e,name:"MuiGrid"}),useTheme:mu});function cT(e){return`scale(${e}, ${e**2})`}const vre={entering:{opacity:1,transform:cT(1)},entered:{opacity:1,transform:"none"}},ES=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),w0=J.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:o,easing:l,in:a,onEnter:c,onEntered:h,onEntering:g,onExit:v,onExited:x,onExiting:b,style:S,timeout:I="auto",TransitionComponent:k=wc,...M}=t,O=Lf(),F=J.useRef(),D=mu(),q=J.useRef(null),z=no(q,Zf(o),r),U=le=>fe=>{if(le){const ke=q.current;fe===void 0?le(ke):le(ke,fe)}},H=U(g),X=U((le,fe)=>{y2(le);const{duration:ke,delay:me,easing:Se}=cd({style:S,timeout:I,easing:l},{mode:"enter"});let we;I==="auto"?(we=D.transitions.getAutoHeightDuration(le.clientHeight),F.current=we):we=ke,le.style.transition=[D.transitions.create("opacity",{duration:we,delay:me}),D.transitions.create("transform",{duration:ES?we:we*.666,delay:me,easing:Se})].join(","),c&&c(le,fe)}),ie=U(h),ee=U(b),G=U(le=>{const{duration:fe,delay:ke,easing:me}=cd({style:S,timeout:I,easing:l},{mode:"exit"});let Se;I==="auto"?(Se=D.transitions.getAutoHeightDuration(le.clientHeight),F.current=Se):Se=fe,le.style.transition=[D.transitions.create("opacity",{duration:Se,delay:ke}),D.transitions.create("transform",{duration:ES?Se:Se*.666,delay:ES?ke:ke||Se*.333,easing:me})].join(","),le.style.opacity=0,le.style.transform=cT(.75),v&&v(le)}),ne=U(x),ae=le=>{I==="auto"&&O.start(F.current||0,le),n&&n(q.current,le)};return Z.jsx(k,{appear:i,in:a,nodeRef:q,onEnter:X,onEntered:ie,onEntering:H,onExit:G,onExited:ne,onExiting:ee,addEndListener:ae,timeout:I==="auto"?null:I,...M,children:(le,{ownerState:fe,...ke})=>J.cloneElement(o,{style:{opacity:0,transform:cT(.75),visibility:le==="exited"&&!a?"hidden":void 0,...vre[le],...S,...o.props.style},ref:z,...ke})})});w0&&(w0.muiSupportAuto=!0);const bre=e=>{const{classes:t,disableUnderline:r}=e,i=ei({root:["root",!r&&"underline"],input:["input"]},lee,t);return{...t,...i}},_re=Ar(w2,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[..._2(e,t),!r.disableUnderline&&t.underline]}})(qn(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${iv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${iv.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${iv.disabled}, .${iv.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${iv.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Xs()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),xre=Ar(S2,{name:"MuiInput",slot:"Input",overridesResolver:x2})({}),XP=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:l,fullWidth:a=!1,inputComponent:c="input",multiline:h=!1,slotProps:g,slots:v={},type:x="text",...b}=n,S=bre(n),k={root:{ownerState:{disableUnderline:i}}},M=g??l?$l(g??l,k):k,O=v.root??o.Root??_re,F=v.input??o.Input??xre;return Z.jsx($P,{slots:{root:O,input:F},slotProps:M,fullWidth:a,inputComponent:c,multiline:h,ref:r,type:x,...b,classes:S})});XP.muiName="Input";function wre(e){return Qn("MuiInputLabel",e)}Yn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Sre=e=>{const{classes:t,formControl:r,size:n,shrink:i,disableAnimation:o,variant:l,required:a}=e,c={root:["root",r&&"formControl",!o&&"animated",i&&"shrink",n&&n!=="medium"&&`size${tn(n)}`,l],asterisk:[a&&"asterisk"]},h=ei(c,wre,t);return{...t,...h}},Cre=Ar(C7,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${r0.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(qn(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:n})=>t==="filled"&&r.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),kh=J.forwardRef(function(t,r){const n=oi({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:o,shrink:l,variant:a,className:c,...h}=n,g=rf();let v=l;typeof v>"u"&&g&&(v=g.filled||g.focused||g.adornedStart);const x=Hh({props:n,muiFormControl:g,states:["size","variant","required","focused"]}),b={...n,disableAnimation:i,formControl:g,shrink:v,size:x.size,variant:x.variant,required:x.required,focused:x.focused},S=Sre(b);return Z.jsx(Cre,{"data-shrink":v,ref:r,className:mn(S.root,c),...h,ownerState:b,classes:S})}),Rc=J.createContext({});function Ere(e){return Qn("MuiList",e)}Yn("MuiList",["root","padding","dense","subheader"]);const Tre=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return ei({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},Ere,t)},Pre=Ar("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),gd=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiList"}),{children:i,className:o,component:l="ul",dense:a=!1,disablePadding:c=!1,subheader:h,...g}=n,v=J.useMemo(()=>({dense:a}),[a]),x={...n,component:l,dense:a,disablePadding:c},b=Tre(x);return Z.jsx(Rc.Provider,{value:v,children:Z.jsxs(Pre,{as:l,className:mn(b.root,o),ref:r,ownerState:x,...g,children:[h,i]})})});function Ire(e){return Qn("MuiListItem",e)}Yn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function kre(e){return Qn("MuiListItemButton",e)}const ig=Yn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Are=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]},Mre=e=>{const{alignItems:t,classes:r,dense:n,disabled:i,disableGutters:o,divider:l,selected:a}=e,h=ei({root:["root",n&&"dense",!o&&"gutters",l&&"divider",i&&"disabled",t==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},kre,r);return{...r,...h}},Lre=Ar(nm,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Are})(qn(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ig.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${ig.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${ig.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${ig.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ig.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),E7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:l="div",children:a,dense:c=!1,disableGutters:h=!1,divider:g=!1,focusVisibleClassName:v,selected:x=!1,className:b,...S}=n,I=J.useContext(Rc),k=J.useMemo(()=>({dense:c||I.dense||!1,alignItems:i,disableGutters:h}),[i,I.dense,c,h]),M=J.useRef(null);Vl(()=>{o&&M.current&&M.current.focus()},[o]);const O={...n,alignItems:i,dense:k.dense,disableGutters:h,divider:g,selected:x},F=Mre(O),D=no(M,r);return Z.jsx(Rc.Provider,{value:k,children:Z.jsx(Lre,{ref:D,href:S.href||S.to,component:(S.href||S.to)&&l==="div"?"button":l,focusVisibleClassName:mn(F.focusVisible,v),ownerState:O,className:mn(F.root,b),...S,classes:F,children:a})})});function Rre(e){return Qn("MuiListItemSecondaryAction",e)}Yn("MuiListItemSecondaryAction",["root","disableGutters"]);const Dre=e=>{const{disableGutters:t,classes:r}=e;return ei({root:["root",t&&"disableGutters"]},Rre,r)},Nre=Ar("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),T7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...o}=n,l=J.useContext(Rc),a={...n,disableGutters:l.disableGutters},c=Dre(a);return Z.jsx(Nre,{className:mn(c.root,i),ownerState:a,ref:r,...o})});T7.muiName="ListItemSecondaryAction";const Ore=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},Fre=e=>{const{alignItems:t,classes:r,dense:n,disableGutters:i,disablePadding:o,divider:l,hasSecondaryAction:a}=e;return ei({root:["root",n&&"dense",!i&&"gutters",!o&&"padding",l&&"divider",t==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},Ire,r)},Bre=Ar("div",{name:"MuiListItem",slot:"Root",overridesResolver:Ore})(qn(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${ig.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),zre=Ar("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Bc=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiListItem"}),{alignItems:i="center",children:o,className:l,component:a,components:c={},componentsProps:h={},ContainerComponent:g="li",ContainerProps:{className:v,...x}={},dense:b=!1,disableGutters:S=!1,disablePadding:I=!1,divider:k=!1,secondaryAction:M,slotProps:O={},slots:F={},...D}=n,q=J.useContext(Rc),z=J.useMemo(()=>({dense:b||q.dense||!1,alignItems:i,disableGutters:S}),[i,q.dense,b,S]),U=J.useRef(null),H=J.Children.toArray(o),X=H.length&&Fg(H[H.length-1],["ListItemSecondaryAction"]),ie={...n,alignItems:i,dense:z.dense,disableGutters:S,disablePadding:I,divider:k,hasSecondaryAction:X},ee=Fre(ie),G=no(U,r),ne=F.root||c.Root||Bre,ae=O.root||h.root||{},le={className:mn(ee.root,ae.className,l),...D};let fe=a||"li";return X?(fe=!le.component&&!a?"div":fe,g==="li"&&(fe==="li"?fe="div":le.component==="li"&&(le.component="div")),Z.jsx(Rc.Provider,{value:z,children:Z.jsxs(zre,{as:g,className:mn(ee.container,v),ref:G,ownerState:ie,...x,children:[Z.jsx(ne,{...ae,...!Hd(ne)&&{as:fe,ownerState:{...ie,...ae.ownerState}},...le,children:H}),H.pop()]})})):Z.jsx(Rc.Provider,{value:z,children:Z.jsxs(ne,{...ae,as:fe,ref:G,...!Hd(ne)&&{ownerState:{...ie,...ae.ownerState}},...le,children:[H,M&&Z.jsx(T7,{children:M})]})})});function jre(e){return Qn("MuiListItemAvatar",e)}Yn("MuiListItemAvatar",["root","alignItemsFlexStart"]);const qre=e=>{const{alignItems:t,classes:r}=e;return ei({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},jre,r)},$re=Ar("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),P7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiListItemAvatar"}),{className:i,...o}=n,l=J.useContext(Rc),a={...n,alignItems:l.alignItems},c=qre(a);return Z.jsx($re,{className:mn(c.root,i),ownerState:a,ref:r,...o})});function Vre(e){return Qn("MuiListItemIcon",e)}const yR=Yn("MuiListItemIcon",["root","alignItemsFlexStart"]),Ure=e=>{const{alignItems:t,classes:r}=e;return ei({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Vre,r)},Gre=Ar("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(qn(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),S0=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiListItemIcon"}),{className:i,...o}=n,l=J.useContext(Rc),a={...n,alignItems:l.alignItems},c=Ure(a);return Z.jsx(Gre,{className:mn(c.root,i),ownerState:a,ref:r,...o})});function Hre(e){return Qn("MuiListItemText",e)}const Tg=Yn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Wre=e=>{const{classes:t,inset:r,primary:n,secondary:i,dense:o}=e;return ei({root:["root",r&&"inset",o&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Hre,t)},Xre=Ar("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Tg.primary}`]:t.primary},{[`& .${Tg.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${HL.root}:where(& .${Tg.primary})`]:{display:"block"},[`.${HL.root}:where(& .${Tg.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Ac=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:l=!1,inset:a=!1,primary:c,primaryTypographyProps:h,secondary:g,secondaryTypographyProps:v,slots:x={},slotProps:b={},...S}=n,{dense:I}=J.useContext(Rc);let k=c??i,M=g;const O={...n,disableTypography:l,inset:a,primary:!!k,secondary:!!M,dense:I},F=Wre(O),D={slots:x,slotProps:{primary:h,secondary:v,...b}},[q,z]=ai("root",{className:mn(F.root,o),elementType:Xre,externalForwardedProps:{...D,...S},ownerState:O,ref:r}),[U,H]=ai("primary",{className:F.primary,elementType:Qo,externalForwardedProps:D,ownerState:O}),[X,ie]=ai("secondary",{className:F.secondary,elementType:Qo,externalForwardedProps:D,ownerState:O});return k!=null&&k.type!==Qo&&!l&&(k=Z.jsx(U,{variant:I?"body2":"body1",component:H?.variant?void 0:"span",...H,children:k})),M!=null&&M.type!==Qo&&!l&&(M=Z.jsx(X,{variant:"body2",color:"textSecondary",...ie,children:M})),Z.jsxs(q,{...z,children:[k,M]})});function TS(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function vR(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function I7(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function av(e,t,r,n,i,o){let l=!1,a=i(e,t,t?r:!1);for(;a;){if(a===e.firstChild){if(l)return!1;l=!0}const c=n?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!I7(a,o)||c)a=i(e,a,r);else return a.focus(),!0}return!1}const Yre=J.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:l,className:a,disabledItemsFocusable:c=!1,disableListWrap:h=!1,onKeyDown:g,variant:v="selectedMenu",...x}=t,b=J.useRef(null),S=J.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Vl(()=>{i&&b.current.focus()},[i]),J.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(F,{direction:D})=>{const q=!b.current.style.width;if(F.clientHeight<b.current.clientHeight&&q){const z=`${v7(Iu(F))}px`;b.current.style[D==="rtl"?"paddingLeft":"paddingRight"]=z,b.current.style.width=`calc(100% + ${z})`}return b.current}}),[]);const I=F=>{const D=b.current,q=F.key;if(F.ctrlKey||F.metaKey||F.altKey){g&&g(F);return}const U=Bo(D).activeElement;if(q==="ArrowDown")F.preventDefault(),av(D,U,h,c,TS);else if(q==="ArrowUp")F.preventDefault(),av(D,U,h,c,vR);else if(q==="Home")F.preventDefault(),av(D,null,h,c,TS);else if(q==="End")F.preventDefault(),av(D,null,h,c,vR);else if(q.length===1){const H=S.current,X=q.toLowerCase(),ie=performance.now();H.keys.length>0&&(ie-H.lastTime>500?(H.keys=[],H.repeating=!0,H.previousKeyMatched=!0):H.repeating&&X!==H.keys[0]&&(H.repeating=!1)),H.lastTime=ie,H.keys.push(X);const ee=U&&!H.repeating&&I7(U,H);H.previousKeyMatched&&(ee||av(D,U,!1,c,TS,H))?F.preventDefault():H.previousKeyMatched=!1}g&&g(F)},k=no(b,r);let M=-1;J.Children.forEach(l,(F,D)=>{if(!J.isValidElement(F)){M===D&&(M+=1,M>=l.length&&(M=-1));return}F.props.disabled||(v==="selectedMenu"&&F.props.selected||M===-1)&&(M=D),M===D&&(F.props.disabled||F.props.muiSkipListHighlight||F.type.muiSkipListHighlight)&&(M+=1,M>=l.length&&(M=-1))});const O=J.Children.map(l,(F,D)=>{if(D===M){const q={};return o&&(q.autoFocus=!0),F.props.tabIndex===void 0&&v==="selectedMenu"&&(q.tabIndex=0),J.cloneElement(F,q)}return F});return Z.jsx(gd,{role:"menu",ref:k,className:a,onKeyDown:I,tabIndex:i?0:-1,...x,children:O})});function Zre(e){return Qn("MuiPopover",e)}Yn("MuiPopover",["root","paper"]);function bR(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function _R(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function xR(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function nb(e){return typeof e=="function"?e():e}const Kre=e=>{const{classes:t}=e;return ei({root:["root"],paper:["paper"]},Zre,t)},Jre=Ar(VP,{name:"MuiPopover",slot:"Root"})({}),k7=Ar(Nc,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Qre=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:c="anchorEl",children:h,className:g,container:v,elevation:x=8,marginThreshold:b=16,open:S,PaperProps:I={},slots:k={},slotProps:M={},transformOrigin:O={vertical:"top",horizontal:"left"},TransitionComponent:F,transitionDuration:D="auto",TransitionProps:q={},disableScrollLock:z=!1,...U}=n,H=J.useRef(),X={...n,anchorOrigin:l,anchorReference:c,elevation:x,marginThreshold:b,transformOrigin:O,TransitionComponent:F,transitionDuration:D,TransitionProps:q},ie=Kre(X),ee=J.useCallback(()=>{if(c==="anchorPosition")return a;const Ze=nb(o),Ie=(Ze&&Ze.nodeType===1?Ze:Bo(H.current).body).getBoundingClientRect();return{top:Ie.top+bR(Ie,l.vertical),left:Ie.left+_R(Ie,l.horizontal)}},[o,l.horizontal,l.vertical,a,c]),G=J.useCallback(Ze=>({vertical:bR(Ze,O.vertical),horizontal:_R(Ze,O.horizontal)}),[O.horizontal,O.vertical]),ne=J.useCallback(Ze=>{const Qe={width:Ze.offsetWidth,height:Ze.offsetHeight},Ie=G(Qe);if(c==="none")return{top:null,left:null,transformOrigin:xR(Ie)};const Mt=ee();let ot=Mt.top-Ie.vertical,$e=Mt.left-Ie.horizontal;const tr=ot+Qe.height,Wt=$e+Qe.width,Gt=Iu(nb(o)),at=Gt.innerHeight-b,dr=Gt.innerWidth-b;if(b!==null&&ot<b){const hr=ot-b;ot-=hr,Ie.vertical+=hr}else if(b!==null&&tr>at){const hr=tr-at;ot-=hr,Ie.vertical+=hr}if(b!==null&&$e<b){const hr=$e-b;$e-=hr,Ie.horizontal+=hr}else if(Wt>dr){const hr=Wt-dr;$e-=hr,Ie.horizontal+=hr}return{top:`${Math.round(ot)}px`,left:`${Math.round($e)}px`,transformOrigin:xR(Ie)}},[o,c,ee,G,b]),[ae,le]=J.useState(S),fe=J.useCallback(()=>{const Ze=H.current;if(!Ze)return;const Qe=ne(Ze);Qe.top!==null&&Ze.style.setProperty("top",Qe.top),Qe.left!==null&&(Ze.style.left=Qe.left),Ze.style.transformOrigin=Qe.transformOrigin,le(!0)},[ne]);J.useEffect(()=>(z&&window.addEventListener("scroll",fe),()=>window.removeEventListener("scroll",fe)),[o,z,fe]);const ke=()=>{fe()},me=()=>{le(!1)};J.useEffect(()=>{S&&fe()}),J.useImperativeHandle(i,()=>S?{updatePosition:()=>{fe()}}:null,[S,fe]),J.useEffect(()=>{if(!S)return;const Ze=MP(()=>{fe()}),Qe=Iu(nb(o));return Qe.addEventListener("resize",Ze),()=>{Ze.clear(),Qe.removeEventListener("resize",Ze)}},[o,S,fe]);let Se=D;const we={slots:{transition:F,...k},slotProps:{transition:q,paper:I,...M}},[Pe,ce]=ai("transition",{elementType:w0,externalForwardedProps:we,ownerState:X,getSlotProps:Ze=>({...Ze,onEntering:(Qe,Ie)=>{Ze.onEntering?.(Qe,Ie),ke()},onExited:Qe=>{Ze.onExited?.(Qe),me()}}),additionalProps:{appear:!0,in:S}});D==="auto"&&!Pe.muiSupportAuto&&(Se=void 0);const _e=v||(o?Bo(nb(o)).body:void 0),[be,{slots:Me,slotProps:Le,...Ue}]=ai("root",{ref:r,elementType:Jre,externalForwardedProps:{...we,...U},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:k.backdrop},slotProps:{backdrop:Xg(typeof M.backdrop=="function"?M.backdrop(X):M.backdrop,{invisible:!0})},container:_e,open:S},ownerState:X,className:mn(ie.root,g)}),[Oe,tt]=ai("paper",{ref:H,className:ie.paper,elementType:k7,externalForwardedProps:we,shouldForwardComponentProp:!0,additionalProps:{elevation:x,style:ae?void 0:{opacity:0}},ownerState:X});return Z.jsx(be,{...Ue,...!Hd(be)&&{slots:Me,slotProps:Le,disableScrollLock:z},children:Z.jsx(Pe,{...ce,timeout:Se,children:Z.jsx(Oe,{...tt,children:h})})})});function ene(e){return Qn("MuiMenu",e)}Yn("MuiMenu",["root","paper","list"]);const tne={vertical:"top",horizontal:"right"},rne={vertical:"top",horizontal:"left"},nne=e=>{const{classes:t}=e;return ei({root:["root"],paper:["paper"],list:["list"]},ene,t)},ine=Ar(Qre,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),ane=Ar(k7,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),one=Ar(Yre,{name:"MuiMenu",slot:"List"})({outline:0}),A7=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:l,disableAutoFocusItem:a=!1,MenuListProps:c={},onClose:h,open:g,PaperProps:v={},PopoverClasses:x,transitionDuration:b="auto",TransitionProps:{onEntering:S,...I}={},variant:k="selectedMenu",slots:M={},slotProps:O={},...F}=n,D=i1(),q={...n,autoFocus:i,disableAutoFocusItem:a,MenuListProps:c,onEntering:S,PaperProps:v,transitionDuration:b,TransitionProps:I,variant:k},z=nne(q),U=i&&!a&&g,H=J.useRef(null),X=(Se,we)=>{H.current&&H.current.adjustStyleForScrollbar(Se,{direction:D?"rtl":"ltr"}),S&&S(Se,we)},ie=Se=>{Se.key==="Tab"&&(Se.preventDefault(),h&&h(Se,"tabKeyDown"))};let ee=-1;J.Children.map(o,(Se,we)=>{J.isValidElement(Se)&&(Se.props.disabled||(k==="selectedMenu"&&Se.props.selected||ee===-1)&&(ee=we))});const G={slots:M,slotProps:{list:c,transition:I,paper:v,...O}},ne=zd({elementType:M.root,externalSlotProps:O.root,ownerState:q,className:[z.root,l]}),[ae,le]=ai("paper",{className:z.paper,elementType:ane,externalForwardedProps:G,shouldForwardComponentProp:!0,ownerState:q}),[fe,ke]=ai("list",{className:mn(z.list,c.className),elementType:one,shouldForwardComponentProp:!0,externalForwardedProps:G,getSlotProps:Se=>({...Se,onKeyDown:we=>{ie(we),Se.onKeyDown?.(we)}}),ownerState:q}),me=typeof G.slotProps.transition=="function"?G.slotProps.transition(q):G.slotProps.transition;return Z.jsx(ine,{onClose:h,anchorOrigin:{vertical:"bottom",horizontal:D?"right":"left"},transformOrigin:D?tne:rne,slots:{root:M.root,paper:ae,backdrop:M.backdrop,...M.transition&&{transition:M.transition}},slotProps:{root:ne,paper:le,backdrop:typeof O.backdrop=="function"?O.backdrop(q):O.backdrop,transition:{...me,onEntering:(...Se)=>{X(...Se),me?.onEntering?.(...Se)}}},open:g,ref:r,transitionDuration:b,ownerState:q,...F,classes:x,children:Z.jsx(fe,{actions:H,autoFocus:i&&(ee===-1||a),autoFocusItem:U,variant:k,...ke,children:o})})});function sne(e){return Qn("MuiMenuItem",e)}const ov=Yn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),lne=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},une=e=>{const{disabled:t,dense:r,divider:n,disableGutters:i,selected:o,classes:l}=e,c=ei({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",o&&"selected"]},sne,l);return{...l,...c}},cne=Ar(nm,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:lne})(qn(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ov.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${ov.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${ov.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${ov.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ov.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${hR.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${hR.inset}`]:{marginLeft:52},[`& .${Tg.root}`]:{marginTop:0,marginBottom:0},[`& .${Tg.inset}`]:{paddingLeft:36},[`& .${yR.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${yR.root} svg`]:{fontSize:"1.25rem"}}}]}))),Np=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:l=!1,divider:a=!1,disableGutters:c=!1,focusVisibleClassName:h,role:g="menuitem",tabIndex:v,className:x,...b}=n,S=J.useContext(Rc),I=J.useMemo(()=>({dense:l||S.dense||!1,disableGutters:c}),[S.dense,l,c]),k=J.useRef(null);Vl(()=>{i&&k.current&&k.current.focus()},[i]);const M={...n,dense:I.dense,divider:a,disableGutters:c},O=une(n),F=no(k,r);let D;return n.disabled||(D=v!==void 0?v:-1),Z.jsx(Rc.Provider,{value:I,children:Z.jsx(cne,{ref:F,role:g,tabIndex:D,component:o,focusVisibleClassName:mn(O.focusVisible,h),className:mn(O.root,x),...b,ownerState:M,classes:O})})});function dne(e){return Qn("MuiNativeSelect",e)}const YP=Yn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),fne=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:l}=e,a={select:["select",r,n&&"disabled",i&&"multiple",l&&"error"],icon:["icon",`icon${tn(r)}`,o&&"iconOpen",n&&"disabled"]};return ei(a,dne,t)},M7=Ar("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${YP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),hne=Ar(M7,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Es,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${YP.multiple}`]:t.multiple}]}})({}),L7=Ar("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${YP.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),pne=Ar(L7,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${tn(r.variant)}`],r.open&&t.iconOpen]}})({}),mne=J.forwardRef(function(t,r){const{className:n,disabled:i,error:o,IconComponent:l,inputRef:a,variant:c="standard",...h}=t,g={...t,disabled:i,variant:c,error:o},v=fne(g);return Z.jsxs(J.Fragment,{children:[Z.jsx(hne,{ownerState:g,className:mn(v.select,n),disabled:i,ref:a||r,...h}),t.multiple?null:Z.jsx(pne,{as:l,ownerState:g,className:v.icon})]})});function gne(e){const{children:t,defer:r=!1,fallback:n=null}=e,[i,o]=J.useState(!1);return Vl(()=>{r||o(!0)},[r]),J.useEffect(()=>{r&&o(!0)},[r]),i?t:n}var wR;const yne=Ar("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Es})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),vne=Ar("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Es})(qn(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function bne(e){const{children:t,classes:r,className:n,label:i,notched:o,...l}=e,a=i!=null&&i!=="",c={...e,notched:o,withLabel:a};return Z.jsx(yne,{"aria-hidden":!0,className:n,ownerState:c,...l,children:Z.jsx(vne,{ownerState:c,children:a?Z.jsx("span",{children:i}):wR||(wR=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const _ne=e=>{const{classes:t}=e,n=ei({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},uee,t);return{...t,...n}},xne=Ar(w2,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:_2})(qn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Od.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Od.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${Od.focused} .${Od.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Xs()).map(([r])=>({props:{color:r},style:{[`&.${Od.focused} .${Od.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${Od.error} .${Od.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Od.disabled} .${Od.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:n})=>r.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),wne=Ar(bne,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(qn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),Sne=Ar(S2,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:x2})(qn(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),C2=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:l="input",label:a,multiline:c=!1,notched:h,slots:g={},slotProps:v={},type:x="text",...b}=n,S=_ne(n),I=rf(),k=Hh({props:n,muiFormControl:I,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),M={...n,color:k.color||"primary",disabled:k.disabled,error:k.error,focused:k.focused,formControl:I,fullWidth:o,hiddenLabel:k.hiddenLabel,multiline:c,size:k.size,type:x},O=g.root??i.Root??xne,F=g.input??i.Input??Sne,[D,q]=ai("notchedOutline",{elementType:wne,className:S.notchedOutline,shouldForwardComponentProp:!0,ownerState:M,externalForwardedProps:{slots:g,slotProps:v},additionalProps:{label:a!=null&&a!==""&&k.required?Z.jsxs(J.Fragment,{children:[a,"","*"]}):a}});return Z.jsx($P,{slots:{root:O,input:F},slotProps:v,renderSuffix:z=>Z.jsx(D,{...q,notched:typeof h<"u"?h:!!(z.startAdornment||z.filled||z.focused)}),fullWidth:o,inputComponent:l,multiline:c,ref:r,type:x,...b,classes:{...S,notchedOutline:null}})});C2.muiName="Input";const Cne=Ei(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Ene=Ei(Z.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Tne=Ar("span",{name:"MuiRadioButtonIcon",shouldForwardProp:Es})({position:"relative",display:"flex"}),Pne=Ar(Cne,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Ine=Ar(Ene,{name:"MuiRadioButtonIcon"})(qn(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function R7(e){const{checked:t=!1,classes:r={},fontSize:n}=e,i={...e,checked:t};return Z.jsxs(Tne,{className:r.root,ownerState:i,children:[Z.jsx(Pne,{fontSize:n,className:r.background,ownerState:i}),Z.jsx(Ine,{fontSize:n,className:r.dot,ownerState:i})]})}const D7=J.createContext(void 0);function kne(){return J.useContext(D7)}function Ane(e){return Qn("MuiRadio",e)}const SR=Yn("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Mne=e=>{const{classes:t,color:r,size:n}=e,i={root:["root",`color${tn(r)}`,n!=="medium"&&`size${tn(n)}`]};return{...t,...ei(i,Ane,t)}},Lne=Ar(y7,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size!=="medium"&&t[`size${tn(r.size)}`],t[`color${tn(r.color)}`]]}})(qn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${SR.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${SR.checked}`]:{color:(e.vars||e).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Rne(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const Dne=Z.jsx(R7,{checked:!0}),Nne=Z.jsx(R7,{}),CR=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiRadio"}),{checked:i,checkedIcon:o=Dne,color:l="primary",icon:a=Nne,name:c,onChange:h,size:g="medium",className:v,disabled:x,disableRipple:b=!1,slots:S={},slotProps:I={},inputProps:k,...M}=n,O=rf();let F=x;O&&typeof F>"u"&&(F=O.disabled),F??=!1;const D={...n,disabled:F,disableRipple:b,color:l,size:g},q=Mne(D),z=kne();let U=i;const H=Y4(h,z&&z.onChange);let X=c;z&&(typeof U>"u"&&(U=Rne(z.value,n.value)),typeof X>"u"&&(X=z.name));const ie=I.input??k,[ee,G]=ai("root",{ref:r,elementType:Lne,className:mn(q.root,v),shouldForwardComponentProp:!0,externalForwardedProps:{slots:S,slotProps:I,...M},getSlotProps:ne=>({...ne,onChange:(ae,...le)=>{ne.onChange?.(ae,...le),H(ae,...le)}}),ownerState:D,additionalProps:{type:"radio",icon:J.cloneElement(a,{fontSize:a.props.fontSize??g}),checkedIcon:J.cloneElement(o,{fontSize:o.props.fontSize??g}),disabled:F,name:X,checked:U,slots:S,slotProps:{input:typeof ie=="function"?ie(D):ie}}});return Z.jsx(ee,{...G,classes:q})});function One(e){return Qn("MuiRadioGroup",e)}Yn("MuiRadioGroup",["root","row","error"]);const Fne=e=>{const{classes:t,row:r,error:n}=e;return ei({root:["root",r&&"row",n&&"error"]},One,t)},Bne=J.forwardRef(function(t,r){const{actions:n,children:i,className:o,defaultValue:l,name:a,onChange:c,value:h,...g}=t,v=J.useRef(null),x=Fne(t),[b,S]=Dh({controlled:h,default:l,name:"RadioGroup"});J.useImperativeHandle(n,()=>({focus:()=>{let O=v.current.querySelector("input:not(:disabled):checked");O||(O=v.current.querySelector("input:not(:disabled)")),O&&O.focus()}}),[]);const I=no(r,v),k=Vh(a),M=J.useMemo(()=>({name:k,onChange(O){S(O.target.value),c&&c(O,O.target.value)},value:b}),[k,c,S,b]);return Z.jsx(D7.Provider,{value:M,children:Z.jsx(S7,{role:"radiogroup",ref:I,className:mn(x.root,o),...g,children:i})})}),zne={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function N7(e){return Qn("MuiSelect",e)}const sv=Yn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var ER;const jne=Ar(M7,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${sv.select}`]:t.select},{[`&.${sv.select}`]:t[r.variant]},{[`&.${sv.error}`]:t.error},{[`&.${sv.multiple}`]:t.multiple}]}})({[`&.${sv.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),qne=Ar(L7,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${tn(r.variant)}`],r.open&&t.iconOpen]}})({}),$ne=Ar("input",{shouldForwardProp:e=>h2(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function TR(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Vne(e){return e==null||typeof e=="string"&&!e.trim()}const Une=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:l}=e,a={select:["select",r,n&&"disabled",i&&"multiple",l&&"error"],icon:["icon",`icon${tn(r)}`,o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return ei(a,N7,t)},Gne=J.forwardRef(function(t,r){const{"aria-describedby":n,"aria-label":i,autoFocus:o,autoWidth:l,children:a,className:c,defaultOpen:h,defaultValue:g,disabled:v,displayEmpty:x,error:b=!1,IconComponent:S,inputRef:I,labelId:k,MenuProps:M={},multiple:O,name:F,onBlur:D,onChange:q,onClose:z,onFocus:U,onOpen:H,open:X,readOnly:ie,renderValue:ee,required:G,SelectDisplayProps:ne={},tabIndex:ae,type:le,value:fe,variant:ke="standard",...me}=t,[Se,we]=Dh({controlled:fe,default:g,name:"Select"}),[Pe,ce]=Dh({controlled:X,default:h,name:"Select"}),_e=J.useRef(null),be=J.useRef(null),[Me,Le]=J.useState(null),{current:Ue}=J.useRef(X!=null),[Oe,tt]=J.useState(),Ze=no(r,I),Qe=J.useCallback(De=>{be.current=De,De&&Le(De)},[]),Ie=Me?.parentNode;J.useImperativeHandle(Ze,()=>({focus:()=>{be.current.focus()},node:_e.current,value:Se}),[Se]),J.useEffect(()=>{h&&Pe&&Me&&!Ue&&(tt(l?null:Ie.clientWidth),be.current.focus())},[Me,l]),J.useEffect(()=>{o&&be.current.focus()},[o]),J.useEffect(()=>{if(!k)return;const De=Bo(be.current).getElementById(k);if(De){const rt=()=>{getSelection().isCollapsed&&be.current.focus()};return De.addEventListener("click",rt),()=>{De.removeEventListener("click",rt)}}},[k]);const Mt=(De,rt)=>{De?H&&H(rt):z&&z(rt),Ue||(tt(l?null:Ie.clientWidth),ce(De))},ot=De=>{De.button===0&&(De.preventDefault(),be.current.focus(),Mt(!0,De))},$e=De=>{Mt(!1,De)},tr=J.Children.toArray(a),Wt=De=>{const rt=tr.find(mt=>mt.props.value===De.target.value);rt!==void 0&&(we(rt.props.value),q&&q(De,rt))},Gt=De=>rt=>{let mt;if(rt.currentTarget.hasAttribute("tabindex")){if(O){mt=Array.isArray(Se)?Se.slice():[];const At=Se.indexOf(De.props.value);At===-1?mt.push(De.props.value):mt.splice(At,1)}else mt=De.props.value;if(De.props.onClick&&De.props.onClick(rt),Se!==mt&&(we(mt),q)){const At=rt.nativeEvent||rt,Ot=new At.constructor(At.type,At);Object.defineProperty(Ot,"target",{writable:!0,value:{value:mt,name:F}}),q(Ot,De)}O||Mt(!1,rt)}},at=De=>{ie||[" ","ArrowUp","ArrowDown","Enter"].includes(De.key)&&(De.preventDefault(),Mt(!0,De))},dr=Me!==null&&Pe,hr=De=>{!dr&&D&&(Object.defineProperty(De,"target",{writable:!0,value:{value:Se,name:F}}),D(De))};delete me["aria-invalid"];let ur,Cr;const br=[];let nr=!1;(j_({value:Se})||x)&&(ee?ur=ee(Se):nr=!0);const lr=tr.map(De=>{if(!J.isValidElement(De))return null;let rt;if(O){if(!Array.isArray(Se))throw new Error(qf(2));rt=Se.some(mt=>TR(mt,De.props.value)),rt&&nr&&br.push(De.props.children)}else rt=TR(Se,De.props.value),rt&&nr&&(Cr=De.props.children);return J.cloneElement(De,{"aria-selected":rt?"true":"false",onClick:Gt(De),onKeyUp:mt=>{mt.key===" "&&mt.preventDefault(),De.props.onKeyUp&&De.props.onKeyUp(mt)},role:"option",selected:rt,value:void 0,"data-value":De.props.value})});nr&&(O?br.length===0?ur=null:ur=br.reduce((De,rt,mt)=>(De.push(rt),mt<br.length-1&&De.push(", "),De),[]):ur=Cr);let Pr=Oe;!l&&Ue&&Me&&(Pr=Ie.clientWidth);let ar;typeof ae<"u"?ar=ae:ar=v?null:0;const kr=ne.id||(F?`mui-component-select-${F}`:void 0),Qt={...t,variant:ke,value:Se,open:dr,error:b},Ht=Une(Qt),Ct={...M.PaperProps,...typeof M.slotProps?.paper=="function"?M.slotProps.paper(Qt):M.slotProps?.paper},Re={...M.MenuListProps,...typeof M.slotProps?.list=="function"?M.slotProps.list(Qt):M.slotProps?.list},Be=Vh();return Z.jsxs(J.Fragment,{children:[Z.jsx(jne,{as:"div",ref:Qe,tabIndex:ar,role:"combobox","aria-controls":dr?Be:void 0,"aria-disabled":v?"true":void 0,"aria-expanded":dr?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[k,kr].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":G?"true":void 0,"aria-invalid":b?"true":void 0,onKeyDown:at,onMouseDown:v||ie?null:ot,onBlur:hr,onFocus:U,...ne,ownerState:Qt,className:mn(ne.className,Ht.select,c),id:kr,children:Vne(ur)?ER||(ER=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ur}),Z.jsx($ne,{"aria-invalid":b,value:Array.isArray(Se)?Se.join(","):Se,name:F,ref:_e,"aria-hidden":!0,onChange:Wt,tabIndex:-1,disabled:v,className:Ht.nativeInput,autoFocus:o,required:G,...me,ownerState:Qt}),Z.jsx(qne,{as:S,className:Ht.icon,ownerState:Qt}),Z.jsx(A7,{id:`menu-${F||""}`,anchorEl:Ie,open:dr,onClose:$e,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...M,slotProps:{...M.slotProps,list:{"aria-labelledby":k,role:"listbox","aria-multiselectable":O?"true":void 0,disableListWrap:!0,id:Be,...Re},paper:{...Ct,style:{minWidth:Pr,...Ct!=null?Ct.style:null}}},children:lr})]})}),Hne=e=>{const{classes:t}=e,n=ei({root:["root"]},N7,t);return{...t,...n}},ZP={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>Es(e)&&e!=="variant"},Wne=Ar(XP,ZP)(""),Xne=Ar(C2,ZP)(""),Yne=Ar(WP,ZP)(""),Ah=J.forwardRef(function(t,r){const n=oi({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:l={},className:a,defaultOpen:c=!1,displayEmpty:h=!1,IconComponent:g=dee,id:v,input:x,inputProps:b,label:S,labelId:I,MenuProps:k,multiple:M=!1,native:O=!1,onClose:F,onOpen:D,open:q,renderValue:z,SelectDisplayProps:U,variant:H="outlined",...X}=n,ie=O?mne:Gne,ee=rf(),G=Hh({props:n,muiFormControl:ee,states:["variant","error"]}),ne=G.variant||H,ae={...n,variant:ne,classes:l},le=Hne(ae),{root:fe,...ke}=le,me=x||{standard:Z.jsx(Wne,{ownerState:ae}),outlined:Z.jsx(Xne,{label:S,ownerState:ae}),filled:Z.jsx(Yne,{ownerState:ae})}[ne],Se=no(r,Zf(me));return Z.jsx(J.Fragment,{children:J.cloneElement(me,{inputComponent:ie,inputProps:{children:o,error:G.error,IconComponent:g,variant:ne,type:void 0,multiple:M,...O?{id:v}:{autoWidth:i,defaultOpen:c,displayEmpty:h,labelId:I,MenuProps:k,onClose:F,onOpen:D,open:q,renderValue:z,SelectDisplayProps:{id:v,...U}},...b,classes:b?$l(ke,b.classes):ke,...x?x.props.inputProps:{}},...(M&&O||h)&&ne==="outlined"?{notched:!0}:{},ref:Se,className:mn(me.props.className,a,le.root),...!x&&{variant:ne},...X})})});Ah.muiName="Select";function Zne(e,t,r=(n,i)=>n===i){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}const Kne=2;function Vm(e,t,r,n,i){return r===1?Math.min(e+t,i):Math.max(e-t,n)}function O7(e,t){return e-t}function PR(e,t){const{index:r}=e.reduce((n,i,o)=>{const l=Math.abs(t-i);return n===null||l<n.distance||l===n.distance?{distance:l,index:o}:n},null)??{};return r}function ib(e,t){if(t.current!==void 0&&e.changedTouches){const r=e;for(let n=0;n<r.changedTouches.length;n+=1){const i=r.changedTouches[n];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function q_(e,t,r){return(e-t)*100/(r-t)}function Jne(e,t,r){return(r-t)*e+t}function Qne(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),n=r[0].split(".")[1];return(n?n.length:0)+parseInt(r[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function eie(e,t,r){const n=Math.round((e-r)/t)*t+r;return Number(n.toFixed(Qne(t)))}function IR({values:e,newValue:t,index:r}){const n=e.slice();return n[r]=t,n.sort(O7)}function ab({sliderRef:e,activeIndex:t,setActive:r}){const n=Bo(e.current);(!e.current?.contains(n.activeElement)||Number(n?.activeElement?.getAttribute("data-index"))!==t)&&e.current?.querySelector(`[type="range"][data-index="${t}"]`).focus(),r&&r(t)}function ob(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?Zne(e,t):!1}const tie={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},rie=e=>e;let sb;function kR(){return sb===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?sb=CSS.supports("touch-action","none"):sb=!0),sb}function nie(e){const{"aria-labelledby":t,defaultValue:r,disabled:n=!1,disableSwap:i=!1,isRtl:o=!1,marks:l=!1,max:a=100,min:c=0,name:h,onChange:g,onChangeCommitted:v,orientation:x="horizontal",rootRef:b,scale:S=rie,step:I=1,shiftStep:k=10,tabIndex:M,value:O}=e,F=J.useRef(void 0),[D,q]=J.useState(-1),[z,U]=J.useState(-1),[H,X]=J.useState(!1),ie=J.useRef(0),ee=J.useRef(null),[G,ne]=Dh({controlled:O,default:r??c,name:"Slider"}),ae=g&&((nr,lr,Pr)=>{const ar=nr.nativeEvent||nr,kr=new ar.constructor(ar.type,ar);Object.defineProperty(kr,"target",{writable:!0,value:{value:lr,name:h}}),ee.current=lr,g(kr,lr,Pr)}),le=Array.isArray(G);let fe=le?G.slice().sort(O7):[G];fe=fe.map(nr=>nr==null?c:wp(nr,c,a));const ke=l===!0&&I!==null?[...Array(Math.floor((a-c)/I)+1)].map((nr,lr)=>({value:c+I*lr})):l||[],me=ke.map(nr=>nr.value),[Se,we]=J.useState(-1),Pe=J.useRef(null),ce=no(b,Pe),_e=nr=>lr=>{const Pr=Number(lr.currentTarget.getAttribute("data-index"));Yg(lr.target)&&we(Pr),U(Pr),nr?.onFocus?.(lr)},be=nr=>lr=>{Yg(lr.target)||we(-1),U(-1),nr?.onBlur?.(lr)},Me=(nr,lr)=>{const Pr=Number(nr.currentTarget.getAttribute("data-index")),ar=fe[Pr],kr=me.indexOf(ar);let Qt=lr;if(ke&&I==null){const Ht=me[me.length-1];Qt>=Ht?Qt=Ht:Qt<=me[0]?Qt=me[0]:Qt=Qt<ar?me[kr-1]:me[kr+1]}if(Qt=wp(Qt,c,a),le){i&&(Qt=wp(Qt,fe[Pr-1]||-1/0,fe[Pr+1]||1/0));const Ht=Qt;Qt=IR({values:fe,newValue:Qt,index:Pr});let Ct=Pr;i||(Ct=Qt.indexOf(Ht)),ab({sliderRef:Pe,activeIndex:Ct})}ne(Qt),we(Pr),ae&&!ob(Qt,G)&&ae(nr,Qt,Pr),v&&v(nr,ee.current??Qt)},Le=nr=>lr=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(lr.key)){lr.preventDefault();const Pr=Number(lr.currentTarget.getAttribute("data-index")),ar=fe[Pr];let kr=null;if(I!=null){const Qt=lr.shiftKey?k:I;switch(lr.key){case"ArrowUp":kr=Vm(ar,Qt,1,c,a);break;case"ArrowRight":kr=Vm(ar,Qt,o?-1:1,c,a);break;case"ArrowDown":kr=Vm(ar,Qt,-1,c,a);break;case"ArrowLeft":kr=Vm(ar,Qt,o?1:-1,c,a);break;case"PageUp":kr=Vm(ar,k,1,c,a);break;case"PageDown":kr=Vm(ar,k,-1,c,a);break;case"Home":kr=c;break;case"End":kr=a;break}}else if(ke){const Qt=me[me.length-1],Ht=me.indexOf(ar),Ct=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Re=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Ct.includes(lr.key)?Ht===0?kr=me[0]:kr=me[Ht-1]:Re.includes(lr.key)&&(Ht===me.length-1?kr=Qt:kr=me[Ht+1])}kr!=null&&Me(lr,kr)}nr?.onKeyDown?.(lr)};Vl(()=>{n&&Pe.current.contains(document.activeElement)&&document.activeElement?.blur()},[n]),n&&D!==-1&&q(-1),n&&Se!==-1&&we(-1);const Ue=nr=>lr=>{nr.onChange?.(lr),Me(lr,lr.target.valueAsNumber)},Oe=J.useRef(void 0);let tt=x;o&&x==="horizontal"&&(tt+="-reverse");const Ze=({finger:nr,move:lr=!1})=>{const{current:Pr}=Pe,{width:ar,height:kr,bottom:Qt,left:Ht}=Pr.getBoundingClientRect();let Ct;tt.startsWith("vertical")?Ct=(Qt-nr.y)/kr:Ct=(nr.x-Ht)/ar,tt.includes("-reverse")&&(Ct=1-Ct);let Re;if(Re=Jne(Ct,c,a),I)Re=eie(Re,I,c);else{const De=PR(me,Re);Re=me[De]}Re=wp(Re,c,a);let Be=0;if(le){lr?Be=Oe.current:Be=PR(fe,Re),i&&(Re=wp(Re,fe[Be-1]||-1/0,fe[Be+1]||1/0));const De=Re;Re=IR({values:fe,newValue:Re,index:Be}),i&&lr||(Be=Re.indexOf(De),Oe.current=Be)}return{newValue:Re,activeIndex:Be}},Qe=El(nr=>{const lr=ib(nr,F);if(!lr)return;if(ie.current+=1,nr.type==="mousemove"&&nr.buttons===0){Ie(nr);return}const{newValue:Pr,activeIndex:ar}=Ze({finger:lr,move:!0});ab({sliderRef:Pe,activeIndex:ar,setActive:q}),ne(Pr),!H&&ie.current>Kne&&X(!0),ae&&!ob(Pr,G)&&ae(nr,Pr,ar)}),Ie=El(nr=>{const lr=ib(nr,F);if(X(!1),!lr)return;const{newValue:Pr}=Ze({finger:lr,move:!0});q(-1),nr.type==="touchend"&&U(-1),v&&v(nr,ee.current??Pr),F.current=void 0,ot()}),Mt=El(nr=>{if(n)return;kR()||nr.preventDefault();const lr=nr.changedTouches[0];lr!=null&&(F.current=lr.identifier);const Pr=ib(nr,F);if(Pr!==!1){const{newValue:kr,activeIndex:Qt}=Ze({finger:Pr});ab({sliderRef:Pe,activeIndex:Qt,setActive:q}),ne(kr),ae&&!ob(kr,G)&&ae(nr,kr,Qt)}ie.current=0;const ar=Bo(Pe.current);ar.addEventListener("touchmove",Qe,{passive:!0}),ar.addEventListener("touchend",Ie,{passive:!0})}),ot=J.useCallback(()=>{const nr=Bo(Pe.current);nr.removeEventListener("mousemove",Qe),nr.removeEventListener("mouseup",Ie),nr.removeEventListener("touchmove",Qe),nr.removeEventListener("touchend",Ie)},[Ie,Qe]);J.useEffect(()=>{const{current:nr}=Pe;return nr.addEventListener("touchstart",Mt,{passive:kR()}),()=>{nr.removeEventListener("touchstart",Mt),ot()}},[ot,Mt]),J.useEffect(()=>{n&&ot()},[n,ot]);const $e=nr=>lr=>{if(nr.onMouseDown?.(lr),n||lr.defaultPrevented||lr.button!==0)return;lr.preventDefault();const Pr=ib(lr,F);if(Pr!==!1){const{newValue:kr,activeIndex:Qt}=Ze({finger:Pr});ab({sliderRef:Pe,activeIndex:Qt,setActive:q}),ne(kr),ae&&!ob(kr,G)&&ae(lr,kr,Qt)}ie.current=0;const ar=Bo(Pe.current);ar.addEventListener("mousemove",Qe,{passive:!0}),ar.addEventListener("mouseup",Ie)},tr=q_(le?fe[0]:c,c,a),Wt=q_(fe[fe.length-1],c,a)-tr,Gt=(nr={})=>{const lr=Rp(nr),Pr={onMouseDown:$e(lr||{})},ar={...lr,...Pr};return{...nr,ref:ce,...ar}},at=nr=>lr=>{nr.onMouseOver?.(lr);const Pr=Number(lr.currentTarget.getAttribute("data-index"));U(Pr)},dr=nr=>lr=>{nr.onMouseLeave?.(lr),U(-1)},hr=(nr={})=>{const lr=Rp(nr),Pr={onMouseOver:at(lr||{}),onMouseLeave:dr(lr||{})};return{...nr,...lr,...Pr}},ur=nr=>({pointerEvents:D!==-1&&D!==nr?"none":void 0});let Cr;return x==="vertical"&&(Cr=o?"vertical-rl":"vertical-lr"),{active:D,axis:tt,axisProps:tie,dragging:H,focusedThumbIndex:Se,getHiddenInputProps:(nr={})=>{const lr=Rp(nr),Pr={onChange:Ue(lr||{}),onFocus:_e(lr||{}),onBlur:be(lr||{}),onKeyDown:Le(lr||{})},ar={...lr,...Pr};return{tabIndex:M,"aria-labelledby":t,"aria-orientation":x,"aria-valuemax":S(a),"aria-valuemin":S(c),name:h,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:n,...nr,...ar,style:{...zne,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:Cr}}},getRootProps:Gt,getThumbProps:hr,marks:ke,open:z,range:le,rootRef:ce,trackLeap:Wt,trackOffset:tr,values:fe,getThumbStyle:ur}}const iie=e=>!e||!Hd(e);function aie(e){return Qn("MuiSlider",e)}const Mc=Yn("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),oie=e=>{const{open:t}=e;return{offset:mn(t&&Mc.valueLabelOpen),circle:Mc.valueLabelCircle,label:Mc.valueLabelLabel}};function sie(e){const{children:t,className:r,value:n}=e,i=oie(e);return t?J.cloneElement(t,{className:t.props.className},Z.jsxs(J.Fragment,{children:[t.props.children,Z.jsx("span",{className:mn(i.offset,r),"aria-hidden":!0,children:Z.jsx("span",{className:i.circle,children:Z.jsx("span",{className:i.label,children:n})})})]})):null}function AR(e){return e}const lie=Ar("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${tn(r.color)}`],r.size!=="medium"&&t[`size${tn(r.size)}`],r.marked&&t.marked,r.orientation==="vertical"&&t.vertical,r.track==="inverted"&&t.trackInverted,r.track===!1&&t.trackFalse]}})(qn(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Mc.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Mc.dragging}`]:{[`& .${Mc.thumb}, & .${Mc.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),uie=Ar("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),cie=Ar("span",{name:"MuiSlider",slot:"Track"})(qn(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),die=Ar("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.thumb,t[`thumbColor${tn(r.color)}`],r.size!=="medium"&&t[`thumbSize${tn(r.size)}`]]}})(qn(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Mc.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Xs()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${Mc.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Mc.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]}))),fie=Ar(sie,{name:"MuiSlider",slot:"ValueLabel"})(qn(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Mc.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Mc.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),hie=Ar("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>h2(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:r}=e;return[t.mark,r&&t.markActive]}})(qn(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),pie=Ar("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>h2(e)&&e!=="markLabelActive"})(qn(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),mie=e=>{const{disabled:t,dragging:r,marked:n,orientation:i,track:o,classes:l,color:a,size:c}=e,h={root:["root",t&&"disabled",r&&"dragging",n&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",a&&`color${tn(a)}`,c&&`size${tn(c)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",c&&`thumbSize${tn(c)}`,a&&`thumbColor${tn(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ei(h,aie,l)},gie=({children:e})=>e,KP=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiSlider"}),i=i1(),{"aria-label":o,"aria-valuetext":l,"aria-labelledby":a,component:c="span",components:h={},componentsProps:g={},color:v="primary",classes:x,className:b,disableSwap:S=!1,disabled:I=!1,getAriaLabel:k,getAriaValueText:M,marks:O=!1,max:F=100,min:D=0,name:q,onChange:z,onChangeCommitted:U,orientation:H="horizontal",shiftStep:X=10,size:ie="medium",step:ee=1,scale:G=AR,slotProps:ne,slots:ae,tabIndex:le,track:fe="normal",value:ke,valueLabelDisplay:me="off",valueLabelFormat:Se=AR,...we}=n,Pe={...n,isRtl:i,max:F,min:D,classes:x,disabled:I,disableSwap:S,orientation:H,marks:O,color:v,size:ie,step:ee,shiftStep:X,scale:G,track:fe,valueLabelDisplay:me,valueLabelFormat:Se},{axisProps:ce,getRootProps:_e,getHiddenInputProps:be,getThumbProps:Me,open:Le,active:Ue,axis:Oe,focusedThumbIndex:tt,range:Ze,dragging:Qe,marks:Ie,values:Mt,trackOffset:ot,trackLeap:$e,getThumbStyle:tr}=nie({...Pe,rootRef:r});Pe.marked=Ie.length>0&&Ie.some(Bt=>Bt.label),Pe.dragging=Qe,Pe.focusedThumbIndex=tt;const Wt=mie(Pe),Gt=ae?.root??h.Root??lie,at=ae?.rail??h.Rail??uie,dr=ae?.track??h.Track??cie,hr=ae?.thumb??h.Thumb??die,ur=ae?.valueLabel??h.ValueLabel??fie,Cr=ae?.mark??h.Mark??hie,br=ae?.markLabel??h.MarkLabel??pie,nr=ae?.input??h.Input??"input",lr=ne?.root??g.root,Pr=ne?.rail??g.rail,ar=ne?.track??g.track,kr=ne?.thumb??g.thumb,Qt=ne?.valueLabel??g.valueLabel,Ht=ne?.mark??g.mark,Ct=ne?.markLabel??g.markLabel,Re=ne?.input??g.input,Be=zd({elementType:Gt,getSlotProps:_e,externalSlotProps:lr,externalForwardedProps:we,additionalProps:{...iie(Gt)&&{as:c}},ownerState:{...Pe,...lr?.ownerState},className:[Wt.root,b]}),De=zd({elementType:at,externalSlotProps:Pr,ownerState:Pe,className:Wt.rail}),rt=zd({elementType:dr,externalSlotProps:ar,additionalProps:{style:{...ce[Oe].offset(ot),...ce[Oe].leap($e)}},ownerState:{...Pe,...ar?.ownerState},className:Wt.track}),mt=zd({elementType:hr,getSlotProps:Me,externalSlotProps:kr,ownerState:{...Pe,...kr?.ownerState},className:Wt.thumb}),At=zd({elementType:ur,externalSlotProps:Qt,ownerState:{...Pe,...Qt?.ownerState},className:Wt.valueLabel}),Ot=zd({elementType:Cr,externalSlotProps:Ht,ownerState:Pe,className:Wt.mark}),Tt=zd({elementType:br,externalSlotProps:Ct,ownerState:Pe,className:Wt.markLabel}),Yt=zd({elementType:nr,getSlotProps:be,externalSlotProps:Re,ownerState:Pe});return Z.jsxs(Gt,{...Be,children:[Z.jsx(at,{...De}),Z.jsx(dr,{...rt}),Ie.filter(Bt=>Bt.value>=D&&Bt.value<=F).map((Bt,wt)=>{const Xt=q_(Bt.value,D,F),Et=ce[Oe].offset(Xt);let Ir;return fe===!1?Ir=Mt.includes(Bt.value):Ir=fe==="normal"&&(Ze?Bt.value>=Mt[0]&&Bt.value<=Mt[Mt.length-1]:Bt.value<=Mt[0])||fe==="inverted"&&(Ze?Bt.value<=Mt[0]||Bt.value>=Mt[Mt.length-1]:Bt.value>=Mt[0]),Z.jsxs(J.Fragment,{children:[Z.jsx(Cr,{"data-index":wt,...Ot,...!Hd(Cr)&&{markActive:Ir},style:{...Et,...Ot.style},className:mn(Ot.className,Ir&&Wt.markActive)}),Bt.label!=null?Z.jsx(br,{"aria-hidden":!0,"data-index":wt,...Tt,...!Hd(br)&&{markLabelActive:Ir},style:{...Et,...Tt.style},className:mn(Wt.markLabel,Tt.className,Ir&&Wt.markLabelActive),children:Bt.label}):null]},wt)}),Mt.map((Bt,wt)=>{const Xt=q_(Bt,D,F),Et=ce[Oe].offset(Xt),Ir=me==="off"?gie:ur;return Z.jsx(Ir,{...!Hd(Ir)&&{valueLabelFormat:Se,valueLabelDisplay:me,value:typeof Se=="function"?Se(G(Bt),wt):Se,index:wt,open:Le===wt||Ue===wt||me==="on",disabled:I},...At,children:Z.jsx(hr,{"data-index":wt,...mt,className:mn(Wt.thumb,mt.className,Ue===wt&&Wt.active,tt===wt&&Wt.focusVisible),style:{...Et,...tr(wt),...mt.style},children:Z.jsx(nr,{"data-index":wt,"aria-label":k?k(wt):o,"aria-valuenow":G(Bt),"aria-labelledby":a,"aria-valuetext":M?M(G(Bt),wt):l,value:Mt[wt],...Yt})})},wt)})]})});function yie(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:i,resumeHideDuration:o}=e,l=Lf();J.useEffect(()=>{if(!i)return;function M(O){O.defaultPrevented||O.key==="Escape"&&n?.(O,"escapeKeyDown")}return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[i,n]);const a=El((M,O)=>{n?.(M,O)}),c=El(M=>{!n||M==null||l.start(M,()=>{a(null,"timeout")})});J.useEffect(()=>(i&&c(t),l.clear),[i,t,c,l]);const h=M=>{n?.(M,"clickaway")},g=l.clear,v=J.useCallback(()=>{t!=null&&c(o??t*.5)},[t,o,c]),x=M=>O=>{const F=M.onBlur;F?.(O),v()},b=M=>O=>{const F=M.onFocus;F?.(O),g()},S=M=>O=>{const F=M.onMouseEnter;F?.(O),g()},I=M=>O=>{const F=M.onMouseLeave;F?.(O),v()};return J.useEffect(()=>{if(!r&&i)return window.addEventListener("focus",v),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",v),window.removeEventListener("blur",g)}},[r,i,v,g]),{getRootProps:(M={})=>{const O={...Rp(e),...Rp(M)};return{role:"presentation",...M,...O,onBlur:x(O),onFocus:b(O),onMouseEnter:S(O),onMouseLeave:I(O)}},onClickAway:h}}function vie(e){return Qn("MuiSnackbarContent",e)}Yn("MuiSnackbarContent",["root","message","action"]);const bie=e=>{const{classes:t}=e;return ei({root:["root"],action:["action"],message:["message"]},vie,t)},_ie=Ar(Nc,{name:"MuiSnackbarContent",slot:"Root"})(qn(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(D_(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:D_(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),xie=Ar("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),wie=Ar("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Sie=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiSnackbarContent"}),{action:i,className:o,message:l,role:a="alert",...c}=n,h=n,g=bie(h);return Z.jsxs(_ie,{role:a,elevation:6,className:mn(g.root,o),ownerState:h,ref:r,...c,children:[Z.jsx(xie,{className:g.message,ownerState:h,children:l}),i?Z.jsx(wie,{className:g.action,ownerState:h,children:i}):null]})});function Cie(e){return Qn("MuiSnackbar",e)}Yn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Eie=e=>{const{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${tn(r.vertical)}${tn(r.horizontal)}`]};return ei(n,Cie,t)},Tie=Ar("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${tn(r.anchorOrigin.vertical)}${tn(r.anchorOrigin.horizontal)}`]]}})(qn(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Pie=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiSnackbar"}),i=mu(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:l,anchorOrigin:{vertical:a,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:h=null,children:g,className:v,ClickAwayListenerProps:x,ContentProps:b,disableWindowBlurListener:S=!1,message:I,onBlur:k,onClose:M,onFocus:O,onMouseEnter:F,onMouseLeave:D,open:q,resumeHideDuration:z,slots:U={},slotProps:H={},TransitionComponent:X,transitionDuration:ie=o,TransitionProps:{onEnter:ee,onExited:G,...ne}={},...ae}=n,le={...n,anchorOrigin:{vertical:a,horizontal:c},autoHideDuration:h,disableWindowBlurListener:S,TransitionComponent:X,transitionDuration:ie},fe=Eie(le),{getRootProps:ke,onClickAway:me}=yie({...le}),[Se,we]=J.useState(!0),Pe=Mt=>{we(!0),G&&G(Mt)},ce=(Mt,ot)=>{we(!1),ee&&ee(Mt,ot)},_e={slots:{transition:X,...U},slotProps:{content:b,clickAwayListener:x,transition:ne,...H}},[be,Me]=ai("root",{ref:r,className:[fe.root,v],elementType:Tie,getSlotProps:ke,externalForwardedProps:{..._e,...ae},ownerState:le}),[Le,{ownerState:Ue,...Oe}]=ai("clickAwayListener",{elementType:Zee,externalForwardedProps:_e,getSlotProps:Mt=>({onClickAway:(...ot)=>{const $e=ot[0];Mt.onClickAway?.(...ot),!$e?.defaultMuiPrevented&&me(...ot)}}),ownerState:le}),[tt,Ze]=ai("content",{elementType:Sie,shouldForwardComponentProp:!0,externalForwardedProps:_e,additionalProps:{message:I,action:l},ownerState:le}),[Qe,Ie]=ai("transition",{elementType:w0,externalForwardedProps:_e,getSlotProps:Mt=>({onEnter:(...ot)=>{Mt.onEnter?.(...ot),ce(...ot)},onExited:(...ot)=>{Mt.onExited?.(...ot),Pe(...ot)}}),additionalProps:{appear:!0,in:q,timeout:ie,direction:a==="top"?"down":"up"},ownerState:le});return!q&&Se?null:Z.jsx(Le,{...Oe,...U.clickAwayListener&&{ownerState:Ue},children:Z.jsx(be,{...Me,children:Z.jsx(Qe,{...Ie,children:g||Z.jsx(tt,{...Ze})})})})}),Iie={entering:{transform:"none"},entered:{transform:"none"}},kie=J.forwardRef(function(t,r){const n=mu(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:a,easing:c,in:h,onEnter:g,onEntered:v,onEntering:x,onExit:b,onExited:S,onExiting:I,style:k,timeout:M=i,TransitionComponent:O=wc,...F}=t,D=J.useRef(null),q=no(D,Zf(a),r),z=ae=>le=>{if(ae){const fe=D.current;le===void 0?ae(fe):ae(fe,le)}},U=z(x),H=z((ae,le)=>{y2(ae);const fe=cd({style:k,timeout:M,easing:c},{mode:"enter"});ae.style.webkitTransition=n.transitions.create("transform",fe),ae.style.transition=n.transitions.create("transform",fe),g&&g(ae,le)}),X=z(v),ie=z(I),ee=z(ae=>{const le=cd({style:k,timeout:M,easing:c},{mode:"exit"});ae.style.webkitTransition=n.transitions.create("transform",le),ae.style.transition=n.transitions.create("transform",le),b&&b(ae)}),G=z(S),ne=ae=>{o&&o(D.current,ae)};return Z.jsx(O,{appear:l,in:h,nodeRef:D,onEnter:H,onEntered:X,onEntering:U,onExit:ee,onExited:G,onExiting:ie,addEndListener:ne,timeout:M,...F,children:(ae,{ownerState:le,...fe})=>J.cloneElement(a,{style:{transform:"scale(0)",visibility:ae==="exited"&&!h?"hidden":void 0,...Iie[ae],...k,...a.props.style},ref:q,...fe})})});function Aie(e){return Qn("MuiSpeedDial",e)}const lb=Yn("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),Mie=e=>{const{classes:t,open:r,direction:n}=e,i={root:["root",`direction${tn(n)}`],fab:["fab"],actions:["actions",!r&&"actionsClosed"]};return ei(i,Aie,t)};function lv(e){if(e==="up"||e==="down")return"vertical";if(e==="right"||e==="left")return"horizontal"}const gh=32,ub=16,Lie=Ar("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`direction${tn(r.direction)}`]]}})(qn(({theme:e})=>({zIndex:(e.vars||e).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none",variants:[{props:{direction:"up"},style:{flexDirection:"column-reverse",[`& .${lb.actions}`]:{flexDirection:"column-reverse",marginBottom:-gh,paddingBottom:ub+gh}}},{props:{direction:"down"},style:{flexDirection:"column",[`& .${lb.actions}`]:{flexDirection:"column",marginTop:-gh,paddingTop:ub+gh}}},{props:{direction:"left"},style:{flexDirection:"row-reverse",[`& .${lb.actions}`]:{flexDirection:"row-reverse",marginRight:-gh,paddingRight:ub+gh}}},{props:{direction:"right"},style:{flexDirection:"row",[`& .${lb.actions}`]:{flexDirection:"row",marginLeft:-gh,paddingLeft:ub+gh}}}]}))),Rie=Ar(w7,{name:"MuiSpeedDial",slot:"Fab"})({pointerEvents:"auto"}),Die=Ar("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.actions,!r.open&&t.actionsClosed]}})({display:"flex",pointerEvents:"auto",variants:[{props:({ownerState:e})=>!e.open,style:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}]}),Nie=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiSpeedDial"}),i=mu(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:l,FabProps:{ref:a,...c}={},children:h,className:g,direction:v="up",hidden:x=!1,icon:b,onBlur:S,onClose:I,onFocus:k,onKeyDown:M,onMouseEnter:O,onMouseLeave:F,onOpen:D,open:q,openIcon:z,slots:U={},slotProps:H={},TransitionComponent:X,TransitionProps:ie,transitionDuration:ee=o,...G}=n,[ne,ae]=Dh({controlled:q,default:!1,name:"SpeedDial",state:"open"}),le={...n,open:ne,direction:v},fe=Mie(le),ke=Lf(),me=J.useRef(0),Se=J.useRef(),we=J.useRef([]);we.current=[we.current[0]];const Pe=J.useCallback(Gt=>{we.current[0]=Gt},[]),ce=no(a,Pe),_e=(Gt,at,dr)=>hr=>{we.current[Gt+1]=hr,at&&at(hr),dr&&dr(hr)},be=Gt=>{M&&M(Gt);const at=Gt.key.replace("Arrow","").toLowerCase(),{current:dr=at}=Se;if(Gt.key==="Escape"){ae(!1),we.current[0].focus(),I&&I(Gt,"escapeKeyDown");return}if(lv(at)===lv(dr)&&lv(at)!==void 0){Gt.preventDefault();const hr=at===dr?1:-1,ur=wp(me.current+hr,0,we.current.length-1);we.current[ur].focus(),me.current=ur,Se.current=dr}};J.useEffect(()=>{ne||(me.current=0,Se.current=void 0)},[ne]);const Me=Gt=>{Gt.type==="mouseleave"&&F&&F(Gt),Gt.type==="blur"&&S&&S(Gt),ke.clear(),Gt.type==="blur"?ke.start(0,()=>{ae(!1),I&&I(Gt,"blur")}):(ae(!1),I&&I(Gt,"mouseLeave"))},Le=Gt=>{c.onClick&&c.onClick(Gt),ke.clear(),ne?(ae(!1),I&&I(Gt,"toggle")):(ae(!0),D&&D(Gt,"toggle"))},Ue=Gt=>{Gt.type==="mouseenter"&&O&&O(Gt),Gt.type==="focus"&&k&&k(Gt),ke.clear(),ne||ke.start(0,()=>{ae(!0),D&&D(Gt,{focus:"focus",mouseenter:"mouseEnter"}[Gt.type])})},Oe=l.replace(/^[^a-z]+|[^\w:.-]+/gi,""),tt=J.Children.toArray(h).filter(Gt=>J.isValidElement(Gt)),Ze=tt.map((Gt,at)=>{const{FabProps:{ref:dr}={},slotProps:hr={},tooltipPlacement:ur}=Gt.props,{fab:{ref:Cr,...br}={},...nr}=hr,lr=ur||(lv(v)==="vertical"?"left":"top");return J.cloneElement(Gt,{slotProps:{fab:{...br,ref:_e(at,dr,Cr)},...nr},delay:30*(ne?at:tt.length-at),open:ne,tooltipPlacement:lr,id:`${Oe}-action-${at}`})}),Qe={transition:X,...U},Ie={transition:ie,...H},Mt={slots:Qe,slotProps:Ie},[ot,$e]=ai("root",{elementType:Lie,externalForwardedProps:{...Mt,...G},ownerState:le,ref:r,className:mn(fe.root,g),additionalProps:{role:"presentation"},getSlotProps:Gt=>({...Gt,onKeyDown:at=>{Gt.onKeyDown?.(at),be(at)},onBlur:at=>{Gt.onBlur?.(at),Me(at)},onFocus:at=>{Gt.onFocus?.(at),Ue(at)},onMouseEnter:at=>{Gt.onMouseEnter?.(at),Ue(at)},onMouseLeave:at=>{Gt.onMouseLeave?.(at),Me(at)}})}),[tr,Wt]=ai("transition",{elementType:kie,externalForwardedProps:Mt,ownerState:le});return Z.jsxs(ot,{...$e,children:[Z.jsx(tr,{in:!x,timeout:ee,unmountOnExit:!0,...Wt,children:Z.jsx(Rie,{color:"primary","aria-label":l,"aria-haspopup":"true","aria-expanded":ne,"aria-controls":`${Oe}-actions`,...c,onClick:Le,className:mn(fe.fab,c.className),ref:ce,ownerState:le,children:J.isValidElement(b)&&Fg(b,["SpeedDialIcon"])?J.cloneElement(b,{open:ne}):b})}),Z.jsx(Die,{id:`${Oe}-actions`,role:"menu","aria-orientation":lv(v),className:mn(fe.actions,!ne&&fe.actionsClosed),ownerState:le,children:Ze})]})});function Oie(e){return Qn("MuiTooltip",e)}const fs=Yn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Fie(e){return Math.round(e*1e5)/1e5}const Bie=e=>{const{classes:t,disableInteractive:r,arrow:n,touch:i,placement:o}=e,l={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${tn(o.split("-")[0])}`],arrow:["arrow"]};return ei(l,Oie,t)},zie=Ar(d7,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(qn(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${fs.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${fs.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${fs.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${fs.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${fs.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${fs.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${fs.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${fs.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),jie=Ar("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${tn(r.placement.split("-")[0])}`]]}})(qn(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${fs.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${fs.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${fs.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Fie(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${fs.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${fs.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),qie=Ar("span",{name:"MuiTooltip",slot:"Arrow"})(qn(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let cb=!1;const MR=new g2;let uv={x:0,y:0};function db(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const Df=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiTooltip"}),{arrow:i=!1,children:o,classes:l,components:a={},componentsProps:c={},describeChild:h=!1,disableFocusListener:g=!1,disableHoverListener:v=!1,disableInteractive:x=!1,disableTouchListener:b=!1,enterDelay:S=100,enterNextDelay:I=0,enterTouchDelay:k=700,followCursor:M=!1,id:O,leaveDelay:F=0,leaveTouchDelay:D=1500,onClose:q,onOpen:z,open:U,placement:H="bottom",PopperComponent:X,PopperProps:ie={},slotProps:ee={},slots:G={},title:ne,TransitionComponent:ae,TransitionProps:le,...fe}=n,ke=J.isValidElement(o)?o:Z.jsx("span",{children:o}),me=mu(),Se=i1(),[we,Pe]=J.useState(),[ce,_e]=J.useState(null),be=J.useRef(!1),Me=x||M,Le=Lf(),Ue=Lf(),Oe=Lf(),tt=Lf(),[Ze,Qe]=Dh({controlled:U,default:!1,name:"Tooltip",state:"open"});let Ie=Ze;const Mt=Vh(O),ot=J.useRef(),$e=El(()=>{ot.current!==void 0&&(document.body.style.WebkitUserSelect=ot.current,ot.current=void 0),tt.clear()});J.useEffect(()=>$e,[$e]);const tr=$t=>{MR.clear(),cb=!0,Qe(!0),z&&!Ie&&z($t)},Wt=El($t=>{MR.start(800+F,()=>{cb=!1}),Qe(!1),q&&Ie&&q($t),Le.start(me.transitions.duration.shortest,()=>{be.current=!1})}),Gt=$t=>{be.current&&$t.type!=="touchstart"||(we&&we.removeAttribute("title"),Ue.clear(),Oe.clear(),S||cb&&I?Ue.start(cb?I:S,()=>{tr($t)}):tr($t))},at=$t=>{Ue.clear(),Oe.start(F,()=>{Wt($t)})},[,dr]=J.useState(!1),hr=$t=>{Yg($t.target)||(dr(!1),at($t))},ur=$t=>{we||Pe($t.currentTarget),Yg($t.target)&&(dr(!0),Gt($t))},Cr=$t=>{be.current=!0;const Vr=ke.props;Vr.onTouchStart&&Vr.onTouchStart($t)},br=$t=>{Cr($t),Oe.clear(),Le.clear(),$e(),ot.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",tt.start(k,()=>{document.body.style.WebkitUserSelect=ot.current,Gt($t)})},nr=$t=>{ke.props.onTouchEnd&&ke.props.onTouchEnd($t),$e(),Oe.start(D,()=>{Wt($t)})};J.useEffect(()=>{if(!Ie)return;function $t(Vr){Vr.key==="Escape"&&Wt(Vr)}return document.addEventListener("keydown",$t),()=>{document.removeEventListener("keydown",$t)}},[Wt,Ie]);const lr=no(Zf(ke),Pe,r);!ne&&ne!==0&&(Ie=!1);const Pr=J.useRef(),ar=$t=>{const Vr=ke.props;Vr.onMouseMove&&Vr.onMouseMove($t),uv={x:$t.clientX,y:$t.clientY},Pr.current&&Pr.current.update()},kr={},Qt=typeof ne=="string";h?(kr.title=!Ie&&Qt&&!v?ne:null,kr["aria-describedby"]=Ie?Mt:null):(kr["aria-label"]=Qt?ne:null,kr["aria-labelledby"]=Ie&&!Qt?Mt:null);const Ht={...kr,...fe,...ke.props,className:mn(fe.className,ke.props.className),onTouchStart:Cr,ref:lr,...M?{onMouseMove:ar}:{}},Ct={};b||(Ht.onTouchStart=br,Ht.onTouchEnd=nr),v||(Ht.onMouseOver=db(Gt,Ht.onMouseOver),Ht.onMouseLeave=db(at,Ht.onMouseLeave),Me||(Ct.onMouseOver=Gt,Ct.onMouseLeave=at)),g||(Ht.onFocus=db(ur,Ht.onFocus),Ht.onBlur=db(hr,Ht.onBlur),Me||(Ct.onFocus=ur,Ct.onBlur=hr));const Re={...n,isRtl:Se,arrow:i,disableInteractive:Me,placement:H,PopperComponentProp:X,touch:be.current},Be=typeof ee.popper=="function"?ee.popper(Re):ee.popper,De=J.useMemo(()=>{let $t=[{name:"arrow",enabled:!!ce,options:{element:ce,padding:4}}];return ie.popperOptions?.modifiers&&($t=$t.concat(ie.popperOptions.modifiers)),Be?.popperOptions?.modifiers&&($t=$t.concat(Be.popperOptions.modifiers)),{...ie.popperOptions,...Be?.popperOptions,modifiers:$t}},[ce,ie.popperOptions,Be?.popperOptions]),rt=Bie(Re),mt=typeof ee.transition=="function"?ee.transition(Re):ee.transition,At={slots:{popper:a.Popper,transition:a.Transition??ae,tooltip:a.Tooltip,arrow:a.Arrow,...G},slotProps:{arrow:ee.arrow??c.arrow,popper:{...ie,...Be??c.popper},tooltip:ee.tooltip??c.tooltip,transition:{...le,...mt??c.transition}}},[Ot,Tt]=ai("popper",{elementType:zie,externalForwardedProps:At,ownerState:Re,className:mn(rt.popper,ie?.className)}),[Yt,Bt]=ai("transition",{elementType:w0,externalForwardedProps:At,ownerState:Re}),[wt,Xt]=ai("tooltip",{elementType:jie,className:rt.tooltip,externalForwardedProps:At,ownerState:Re}),[Et,Ir]=ai("arrow",{elementType:qie,className:rt.arrow,externalForwardedProps:At,ownerState:Re,ref:_e});return Z.jsxs(J.Fragment,{children:[J.cloneElement(ke,Ht),Z.jsx(Ot,{as:X??d7,placement:H,anchorEl:M?{getBoundingClientRect:()=>({top:uv.y,left:uv.x,right:uv.x,bottom:uv.y,width:0,height:0})}:we,popperRef:Pr,open:we?Ie:!1,id:Mt,transition:!0,...Ct,...Tt,popperOptions:De,children:({TransitionProps:$t})=>Z.jsx(Yt,{timeout:me.transitions.duration.shorter,...$t,...Bt,children:Z.jsxs(wt,{...Xt,children:[ne,i?Z.jsx(Et,{...Ir}):null]})})})]})});function $ie(e){return Qn("MuiSpeedDialAction",e)}const fb=Yn("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),Vie=e=>{const{open:t,tooltipPlacement:r,classes:n}=e,i={fab:["fab",!t&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${tn(r)}`,!t&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return ei(i,$ie,n)},Uie=Ar(w7,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.fab,!r.open&&t.fabClosed]}})(qn(({theme:e})=>({margin:8,color:(e.vars||e).palette.text.secondary,backgroundColor:(e.vars||e).palette.background.paper,"&:hover":{backgroundColor:e.vars?e.vars.palette.SpeedDialAction.fabHoverBg:D_(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1,variants:[{props:({ownerState:t})=>!t.open,style:{opacity:0,transform:"scale(0)"}}]}))),Gie=Ar("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.staticTooltip,!r.open&&t.staticTooltipClosed,t[`tooltipPlacement${tn(r.tooltipPlacement)}`]]}})(qn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",[`& .${fb.staticTooltipLabel}`]:{transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},variants:[{props:({ownerState:t})=>!t.open,style:{[`& .${fb.staticTooltipLabel}`]:{opacity:0,transform:"scale(0.5)"}}},{props:{tooltipPlacement:"left"},style:{[`& .${fb.staticTooltipLabel}`]:{transformOrigin:"100% 50%",right:"100%",marginRight:8}}},{props:{tooltipPlacement:"right"},style:{[`& .${fb.staticTooltipLabel}`]:{transformOrigin:"0% 50%",left:"100%",marginLeft:8}}}]}))),Hie=Ar("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel"})(qn(({theme:e})=>({position:"absolute",...e.typography.body1,backgroundColor:(e.vars||e).palette.background.paper,borderRadius:(e.vars||e).shape.borderRadius,boxShadow:(e.vars||e).shadows[1],color:(e.vars||e).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"}))),Wie=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiSpeedDialAction"}),{className:i,delay:o=0,FabProps:l={},icon:a,id:c,open:h,TooltipClasses:g,tooltipOpen:v=!1,tooltipPlacement:x="left",tooltipTitle:b,slots:S={},slotProps:I={},...k}=n,M={...n,tooltipPlacement:x},O=Vie(M),F={slots:S,slotProps:{fab:l,...I,tooltip:Xg(typeof I.tooltip=="function"?I.tooltip(M):I.tooltip,{title:b,open:v,placement:x,classes:g})}},[D,q]=J.useState(F.slotProps.tooltip?.open),z=()=>{q(!1)},U=()=>{q(!0)},H={transitionDelay:`${o}ms`},[X,ie]=ai("fab",{elementType:Uie,externalForwardedProps:F,ownerState:M,shouldForwardComponentProp:!0,className:mn(O.fab,i),additionalProps:{style:H,tabIndex:-1,role:"menuitem",size:"small"}}),[ee,G]=ai("tooltip",{elementType:Df,externalForwardedProps:F,shouldForwardComponentProp:!0,ref:r,additionalProps:{id:c},ownerState:M,getSlotProps:me=>({...me,onClose:Se=>{me.onClose?.(Se),z()},onOpen:Se=>{me.onOpen?.(Se),U()}})}),[ne,ae]=ai("staticTooltip",{elementType:Gie,externalForwardedProps:F,ownerState:M,ref:r,className:O.staticTooltip,additionalProps:{id:c}}),[le,fe]=ai("staticTooltipLabel",{elementType:Hie,externalForwardedProps:F,ownerState:M,className:O.staticTooltipLabel,additionalProps:{style:H,id:`${c}-label`}}),ke=Z.jsx(X,{...ie,children:a});return G.open?Z.jsxs(ne,{...ae,...k,children:[Z.jsx(le,{...fe,children:G.title}),J.cloneElement(ke,{"aria-labelledby":`${c}-label`})]}):(!h&&D&&q(!1),Z.jsx(ee,{...G,title:G.title,open:h&&D,placement:G.placement,classes:G.classes,...k,children:ke}))}),Xie=Ar("div",{name:"MuiSwipeArea",shouldForwardProp:Es})(qn(({theme:e})=>({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1,variants:[{props:{anchor:"left"},style:{right:"auto"}},{props:{anchor:"right"},style:{left:"auto",right:0}},{props:{anchor:"top"},style:{bottom:"auto",right:0}},{props:{anchor:"bottom"},style:{top:"auto",bottom:0,right:0}}]}))),Yie=J.forwardRef(function(t,r){const{anchor:n,classes:i={},className:o,width:l,style:a,...c}=t,h=t;return Z.jsx(Xie,{className:mn("PrivateSwipeArea-root",i.root,i[`anchor${tn(n)}`],o),ref:r,style:{[Sp(n)?"width":"height"]:l,...a},ownerState:h,...c})}),hb=3,PS=20;let wf=null;function IS(e,t,r){return e==="right"?r.body.offsetWidth-t[0].pageX:t[0].pageX}function kS(e,t,r){return e==="bottom"?r.innerHeight-t[0].clientY:t[0].clientY}function cv(e,t){return e?t.clientWidth:t.clientHeight}function LR(e,t,r,n){return Math.min(Math.max(r?t-e:n+t-e,0),n)}function Zie(e,t){const r=[];for(;e&&e!==t.parentElement;){const n=Iu(t).getComputedStyle(e);n.getPropertyValue("position")==="absolute"||n.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&r.push(e),e=e.parentElement}return r}function Kie({domTreeShapes:e,start:t,current:r,anchor:n}){const i={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(o=>{let l=r>=t;(n==="top"||n==="left")&&(l=!l);const a=n==="left"||n==="right"?"x":"y",c=Math.round(o[i.scrollPosition[a]]),h=c>0,g=c+o[i.clientLength[a]]<o[i.scrollLength[a]];return!!(l&&g||!l&&h)})}const Jie=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Qie=J.forwardRef(function(t,r){const n=oi({name:"MuiSwipeableDrawer",props:t}),i=mu(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:l="left",disableBackdropTransition:a=!1,disableDiscovery:c=!1,disableSwipeToOpen:h=Jie,hideBackdrop:g,hysteresis:v=.52,allowSwipeInChildren:x=!1,minFlingVelocity:b=450,ModalProps:{BackdropProps:S,...I}={},onClose:k,onOpen:M,open:O=!1,PaperProps:F={},SwipeAreaProps:D,swipeAreaWidth:q=20,transitionDuration:z=o,variant:U="temporary",slots:H={},slotProps:X={},...ie}=n,[ee,G]=J.useState(!1),ne=J.useRef({isSwiping:null}),ae=J.useRef(),le=J.useRef(),fe=J.useRef(),ke=no(F.ref,fe),me=J.useRef(!1),Se=J.useRef();Vl(()=>{Se.current=null},[O]);const we=J.useCallback((Ue,Oe={})=>{const{mode:tt=null,changeTransition:Ze=!0}=Oe,Qe=Rv(i,l),Ie=["right","bottom"].includes(Qe)?1:-1,Mt=Sp(l),ot=Mt?`translate(${Ie*Ue}px, 0)`:`translate(0, ${Ie*Ue}px)`,$e=fe.current.style;$e.webkitTransform=ot,$e.transform=ot;let tr="";if(tt&&(tr=i.transitions.create("all",cd({easing:void 0,style:void 0,timeout:z},{mode:tt}))),Ze&&($e.webkitTransition=tr,$e.transition=tr),!a&&!g){const Wt=le.current.style;Wt.opacity=1-Ue/cv(Mt,fe.current),Ze&&(Wt.webkitTransition=tr,Wt.transition=tr)}},[l,a,g,i,z]),Pe=El(Ue=>{if(!me.current)return;if(wf=null,me.current=!1,Mf.flushSync(()=>{G(!1)}),!ne.current.isSwiping){ne.current.isSwiping=null;return}ne.current.isSwiping=null;const Oe=Rv(i,l),tt=Sp(l);let Ze;tt?Ze=IS(Oe,Ue.changedTouches,Bo(Ue.currentTarget)):Ze=kS(Oe,Ue.changedTouches,Iu(Ue.currentTarget));const Qe=tt?ne.current.startX:ne.current.startY,Ie=cv(tt,fe.current),Mt=LR(Ze,Qe,O,Ie),ot=Mt/Ie;if(Math.abs(ne.current.velocity)>b&&(Se.current=Math.abs((Ie-Mt)/ne.current.velocity)*1e3),O){ne.current.velocity>b||ot>v?k():we(0,{mode:"exit"});return}ne.current.velocity<-b||1-ot>v?M():we(cv(tt,fe.current),{mode:"enter"})}),ce=(Ue=!1)=>{if(!ee){(Ue||!(c&&x))&&Mf.flushSync(()=>{G(!0)});const Oe=Sp(l);!O&&fe.current&&we(cv(Oe,fe.current)+(c?15:-PS),{changeTransition:!1}),ne.current.velocity=0,ne.current.lastTime=null,ne.current.lastTranslate=null,ne.current.paperHit=!1,me.current=!0}},_e=El(Ue=>{if(!fe.current||!me.current||wf!==null&&wf!==ne.current)return;ce(!0);const Oe=Rv(i,l),tt=Sp(l),Ze=IS(Oe,Ue.touches,Bo(Ue.currentTarget)),Qe=kS(Oe,Ue.touches,Iu(Ue.currentTarget));if(O&&fe.current.contains(Ue.target)&&wf===null){const tr=Zie(Ue.target,fe.current);if(Kie({domTreeShapes:tr,start:tt?ne.current.startX:ne.current.startY,current:tt?Ze:Qe,anchor:l})){wf=!0;return}wf=ne.current}if(ne.current.isSwiping==null){const tr=Math.abs(Ze-ne.current.startX),Wt=Math.abs(Qe-ne.current.startY),Gt=tt?tr>Wt&&tr>hb:Wt>tr&&Wt>hb;if(Gt&&Ue.cancelable&&Ue.preventDefault(),Gt===!0||(tt?Wt>hb:tr>hb)){if(ne.current.isSwiping=Gt,!Gt){Pe(Ue);return}ne.current.startX=Ze,ne.current.startY=Qe,!c&&!O&&(tt?ne.current.startX-=PS:ne.current.startY-=PS)}}if(!ne.current.isSwiping)return;const Ie=cv(tt,fe.current);let Mt=tt?ne.current.startX:ne.current.startY;O&&!ne.current.paperHit&&(Mt=Math.min(Mt,Ie));const ot=LR(tt?Ze:Qe,Mt,O,Ie);if(O)if(ne.current.paperHit)ot===0&&(ne.current.startX=Ze,ne.current.startY=Qe);else if(tt?Ze<Ie:Qe<Ie)ne.current.paperHit=!0,ne.current.startX=Ze,ne.current.startY=Qe;else return;ne.current.lastTranslate===null&&(ne.current.lastTranslate=ot,ne.current.lastTime=performance.now()+1);const $e=(ot-ne.current.lastTranslate)/(performance.now()-ne.current.lastTime)*1e3;ne.current.velocity=ne.current.velocity*.4+$e*.6,ne.current.lastTranslate=ot,ne.current.lastTime=performance.now(),Ue.cancelable&&Ue.preventDefault(),we(ot)}),be=El(Ue=>{if(Ue.defaultPrevented||Ue.defaultMuiPrevented||O&&(g||!le.current.contains(Ue.target))&&!fe.current.contains(Ue.target))return;const Oe=Rv(i,l),tt=Sp(l),Ze=IS(Oe,Ue.touches,Bo(Ue.currentTarget)),Qe=kS(Oe,Ue.touches,Iu(Ue.currentTarget));if(!O){if(h||!(Ue.target===ae.current||fe.current?.contains(Ue.target)&&(typeof x=="function"?x(Ue,ae.current,fe.current):x)))return;if(tt){if(Ze>q)return}else if(Qe>q)return}Ue.defaultMuiPrevented=!0,wf=null,ne.current.startX=Ze,ne.current.startY=Qe,ce()});J.useEffect(()=>{if(U==="temporary"){const Ue=Bo(fe.current);return Ue.addEventListener("touchstart",be),Ue.addEventListener("touchmove",_e,{passive:!O}),Ue.addEventListener("touchend",Pe),()=>{Ue.removeEventListener("touchstart",be),Ue.removeEventListener("touchmove",_e,{passive:!O}),Ue.removeEventListener("touchend",Pe)}}},[U,O,be,_e,Pe]),J.useEffect(()=>()=>{wf===ne.current&&(wf=null)},[]),J.useEffect(()=>{O||G(!1)},[O]);const[Me,Le]=ai("swipeArea",{ref:ae,elementType:Yie,ownerState:n,externalForwardedProps:{slots:H,slotProps:{swipeArea:D,...X}},additionalProps:{width:q,anchor:l}});return Z.jsxs(J.Fragment,{children:[Z.jsx(HP,{open:U==="temporary"&&ee?!0:O,variant:U,ModalProps:{BackdropProps:{...S,ref:le},...U==="temporary"&&{keepMounted:!0},...I},hideBackdrop:g,anchor:l,transitionDuration:Se.current||z,onClose:k,ref:r,slots:H,slotProps:{...X,backdrop:Xg(X.backdrop??S,{ref:le}),paper:Xg(X.paper??F,{style:{pointerEvents:U==="temporary"&&!O&&!x?"none":""},ref:ke})},...ie}),!h&&U==="temporary"&&Z.jsx(gne,{children:Z.jsx(Me,{...Le})})]})});function eae(e){return Qn("MuiToolbar",e)}Yn("MuiToolbar",["root","gutters","regular","dense"]);const tae=e=>{const{classes:t,disableGutters:r,variant:n}=e;return ei({root:["root",!r&&"gutters",n]},eae,t)},rae=Ar("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(qn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),nae=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:l=!1,variant:a="regular",...c}=n,h={...n,component:o,disableGutters:l,variant:a},g=tae(h);return Z.jsx(rae,{as:o,className:mn(g.root,i),ref:r,ownerState:h,...c})});function iae(e){return Qn("MuiTextField",e)}Yn("MuiTextField",["root"]);const aae={standard:XP,filled:WP,outlined:C2},oae=e=>{const{classes:t}=e;return ei({root:["root"]},iae,t)},sae=Ar(dc,{name:"MuiTextField",slot:"Root"})({}),E2=J.forwardRef(function(t,r){const n=oi({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:l,className:a,color:c="primary",defaultValue:h,disabled:g=!1,error:v=!1,FormHelperTextProps:x,fullWidth:b=!1,helperText:S,id:I,InputLabelProps:k,inputProps:M,InputProps:O,inputRef:F,label:D,maxRows:q,minRows:z,multiline:U=!1,name:H,onBlur:X,onChange:ie,onFocus:ee,placeholder:G,required:ne=!1,rows:ae,select:le=!1,SelectProps:fe,slots:ke={},slotProps:me={},type:Se,value:we,variant:Pe="outlined",...ce}=n,_e={...n,autoFocus:o,color:c,disabled:g,error:v,fullWidth:b,multiline:U,required:ne,select:le,variant:Pe},be=oae(_e),Me=Vh(I),Le=S&&Me?`${Me}-helper-text`:void 0,Ue=D&&Me?`${Me}-label`:void 0,Oe=aae[Pe],tt={slots:ke,slotProps:{input:O,inputLabel:k,htmlInput:M,formHelperText:x,select:fe,...me}},Ze={},Qe=tt.slotProps.inputLabel;Pe==="outlined"&&(Qe&&typeof Qe.shrink<"u"&&(Ze.notched=Qe.shrink),Ze.label=D),le&&((!fe||!fe.native)&&(Ze.id=void 0),Ze["aria-describedby"]=void 0);const[Ie,Mt]=ai("root",{elementType:sae,shouldForwardComponentProp:!0,externalForwardedProps:{...tt,...ce},ownerState:_e,className:mn(be.root,a),ref:r,additionalProps:{disabled:g,error:v,fullWidth:b,required:ne,color:c,variant:Pe}}),[ot,$e]=ai("input",{elementType:Oe,externalForwardedProps:tt,additionalProps:Ze,ownerState:_e}),[tr,Wt]=ai("inputLabel",{elementType:kh,externalForwardedProps:tt,ownerState:_e}),[Gt,at]=ai("htmlInput",{elementType:"input",externalForwardedProps:tt,ownerState:_e}),[dr,hr]=ai("formHelperText",{elementType:hre,externalForwardedProps:tt,ownerState:_e}),[ur,Cr]=ai("select",{elementType:Ah,externalForwardedProps:tt,ownerState:_e}),br=Z.jsx(ot,{"aria-describedby":Le,autoComplete:i,autoFocus:o,defaultValue:h,fullWidth:b,multiline:U,name:H,rows:ae,maxRows:q,minRows:z,type:Se,value:we,id:Me,inputRef:F,onBlur:X,onChange:ie,onFocus:ee,placeholder:G,inputProps:at,slots:{input:ke.htmlInput?Gt:void 0},...$e});return Z.jsxs(Ie,{...Mt,children:[D!=null&&D!==""&&Z.jsx(tr,{htmlFor:Me,id:Ue,...Wt,children:D}),le?Z.jsx(ur,{"aria-describedby":Le,id:Me,labelId:Ue,value:we,input:br,...Cr,children:l}):br,S&&Z.jsx(dr,{id:Le,...hr,children:S})]})}),l1=A9({themeId:ld}),lae=Ei(Z.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),JP="https://mapcomponents.github.io/react-map-components-maplibre/react-maplibre/",uae=JP+"assets/WG-MapComponents-Logo_rgb.svg",cae=JP+"assets/WG-MapComponents-Logo_rgb-weisse-schrift.svg",dae=JP+"assets/mapcomponents_logo.png";function RR(e){const t=mu(),[r,n]=J.useState(null),i=l=>{n(l.currentTarget)},o=()=>{n(null)};return Z.jsx(jJ,{sx:{minHeight:"62px",position:"absolute",zIndex:1300,top:0},children:Z.jsxs(nae,{disableGutters:!0,children:[e.logo||Z.jsxs(Z.Fragment,{children:[Z.jsx(vo,{sx:{marginLeft:"25px",display:{xs:"none",md:"flex"},flexGrow:{md:"30"}},children:Z.jsx("img",{src:t.palette.mode==="dark"?cae:uae,style:{width:"100%",maxWidth:"250px"}})}),Z.jsx(vo,{sx:{marginLeft:"25px",display:{xs:"flex",sm:"flex",md:"none"},flexGrow:{xs:"500"},mr:{sm:"0px"}},children:Z.jsx("img",{src:dae,width:"50px",height:"50px"})})]}),Z.jsx(vo,{sx:{flexGrow:1,display:{xs:"flex"}},children:e.unmovableButtons}),e.buttons?Z.jsxs(vo,{sx:{flexGrow:22,display:{xs:"flex",sm:"none"}},children:[Z.jsx(pc,{onClick:i,children:Z.jsx(lae,{})}),Z.jsx(A7,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!r,onClose:o,PaperProps:{elevation:24,sx:{overflow:"visible",mt:"15px"}},sx:{display:{xs:"block",sm:"none"}},children:Z.jsx(vo,{sx:{paddingLeft:"10px",paddingRight:"10px"},onClick:o,children:e.buttons})})]}):"",Z.jsx(vo,{sx:{marginRight:"25px",display:{xs:"none",sm:"flex"}},children:e.buttons})]})})}try{RR.displayName="TopToolbar",RR.__docgenInfo={description:"",displayName:"TopToolbar",props:{unmovableButtons:{defaultValue:null,description:"",name:"unmovableButtons",required:!1,type:{name:"ReactNode"}},buttons:{defaultValue:null,description:"",name:"buttons",required:!1,type:{name:"ReactNode"}},logo:{defaultValue:null,description:"",name:"logo",required:!1,type:{name:"ReactNode"}}}}}catch{}const fae=Ei(Z.jsx("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),dT=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=J.useState(!1),i=()=>{navigator.geolocation.getCurrentPosition(o,l)},o=J.useCallback(a=>{t.map?.map.setCenter?.([a.coords.longitude,a.coords.latitude])},[t.map]),l=()=>{console.log("Access of user location denied"),n(!0)};return Z.jsx(Z.Fragment,{children:Z.jsx(Ui,{variant:"navtools",sx:a=>({zIndex:1002,color:r?e.offColor??a.palette.navigation.buttonColor:e.onColor??a.palette.navigation.buttonColor}),onClick:i,disabled:r,children:Z.jsx(fae,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})})};try{dT.displayName="MlCenterPosition",dT.__docgenInfo={description:"Component template",displayName:"MlCenterPosition",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},onColor:{defaultValue:null,description:"Active button font color",name:"onColor",required:!1,type:{name:"string | undefined"}},offColor:{defaultValue:null,description:"Inactive button font color",name:"offColor",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"CSS style object that is applied to the button component",name:"style",required:!1,type:{name:"SxProps<Theme> | undefined"}}}}}catch{}const DR=e=>{const t=da({mapId:e.mapId});return console.log(t.componentId+" remove this log"),Z.jsx(Z.Fragment,{})};try{DR.displayName="MlComponentTemplate",DR.__docgenInfo={description:"Component description",displayName:"MlComponentTemplate",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const hae=Ei(Z.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}));function Va(e){"@babel/helpers - typeof";return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(e)}var dd=Uint8Array,fc=Uint16Array,QP=Int32Array,eI=new dd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tI=new dd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),NR=new dd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F7=function(e,t){for(var r=new fc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new QP(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},B7=F7(eI,2),pae=B7.b,fT=B7.r;pae[28]=258,fT[258]=28;var mae=F7(tI,0),OR=mae.r,hT=new fc(32768);for(var Po=0;Po<32768;++Po){var yh=(Po&43690)>>1|(Po&21845)<<1;yh=(yh&52428)>>2|(yh&13107)<<2,yh=(yh&61680)>>4|(yh&3855)<<4,hT[Po]=((yh&65280)>>8|(yh&255)<<8)>>1}var n0=(function(e,t,r){for(var n=e.length,i=0,o=new fc(t);i<n;++i)e[i]&&++o[e[i]-1];var l=new fc(t);for(i=1;i<t;++i)l[i]=l[i-1]+o[i-1]<<1;var a;if(r){a=new fc(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var h=i<<4|e[i],g=t-e[i],v=l[e[i]-1]++<<g,x=v|(1<<g)-1;v<=x;++v)a[hT[v]>>c]=h}else for(a=new fc(n),i=0;i<n;++i)e[i]&&(a[i]=hT[l[e[i]-1]++]>>15-e[i]);return a}),$p=new dd(288);for(var Po=0;Po<144;++Po)$p[Po]=8;for(var Po=144;Po<256;++Po)$p[Po]=9;for(var Po=256;Po<280;++Po)$p[Po]=7;for(var Po=280;Po<288;++Po)$p[Po]=8;var $_=new dd(32);for(var Po=0;Po<32;++Po)$_[Po]=5;var gae=n0($p,9,0),yae=n0($_,5,0),z7=function(e){return(e+7)/8|0},vae=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new dd(e.subarray(t,r))},Sf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},dv=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},AS=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return{t:q7,l:0};if(i==1){var l=new dd(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(q,z){return q.f-z.f}),r.push({s:-1,f:25001});var a=r[0],c=r[1],h=0,g=1,v=2;for(r[0]={s:-1,f:a.f+c.f,l:a,r:c};g!=i-1;)a=r[r[h].f<r[v].f?h++:v++],c=r[h!=g&&r[h].f<r[v].f?h++:v++],r[g++]={s:-1,f:a.f+c.f,l:a,r:c};for(var x=o[0].s,n=1;n<i;++n)o[n].s>x&&(x=o[n].s);var b=new fc(x+1),S=pT(r[g-1],b,0);if(S>t){var n=0,I=0,k=S-t,M=1<<k;for(o.sort(function(z,U){return b[U.s]-b[z.s]||z.f-U.f});n<i;++n){var O=o[n].s;if(b[O]>t)I+=M-(1<<S-b[O]),b[O]=t;else break}for(I>>=k;I>0;){var F=o[n].s;b[F]<t?I-=1<<t-b[F]++-1:++n}for(;n>=0&&I;--n){var D=o[n].s;b[D]==t&&(--b[D],++I)}S=t}return{t:new dd(b),l:S}},pT=function(e,t,r){return e.s==-1?Math.max(pT(e.l,t,r+1),pT(e.r,t,r+1)):t[e.s]=r},FR=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new fc(++t),n=0,i=e[0],o=1,l=function(c){r[n++]=c},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=e[a]}return{c:r.subarray(0,n),n:t}},fv=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},j7=function(e,t,r){var n=r.length,i=z7(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},BR=function(e,t,r,n,i,o,l,a,c,h,g){Sf(t,g++,r),++i[256];for(var v=AS(i,15),x=v.t,b=v.l,S=AS(o,15),I=S.t,k=S.l,M=FR(x),O=M.c,F=M.n,D=FR(I),q=D.c,z=D.n,U=new fc(19),H=0;H<O.length;++H)++U[O[H]&31];for(var H=0;H<q.length;++H)++U[q[H]&31];for(var X=AS(U,7),ie=X.t,ee=X.l,G=19;G>4&&!ie[NR[G-1]];--G);var ne=h+5<<3,ae=fv(i,$p)+fv(o,$_)+l,le=fv(i,x)+fv(o,I)+l+14+3*G+fv(U,ie)+2*U[16]+3*U[17]+7*U[18];if(c>=0&&ne<=ae&&ne<=le)return j7(t,g,e.subarray(c,c+h));var fe,ke,me,Se;if(Sf(t,g,1+(le<ae)),g+=2,le<ae){fe=n0(x,b,0),ke=x,me=n0(I,k,0),Se=I;var we=n0(ie,ee,0);Sf(t,g,F-257),Sf(t,g+5,z-1),Sf(t,g+10,G-4),g+=14;for(var H=0;H<G;++H)Sf(t,g+3*H,ie[NR[H]]);g+=3*G;for(var Pe=[O,q],ce=0;ce<2;++ce)for(var _e=Pe[ce],H=0;H<_e.length;++H){var be=_e[H]&31;Sf(t,g,we[be]),g+=ie[be],be>15&&(Sf(t,g,_e[H]>>5&127),g+=_e[H]>>12)}}else fe=gae,ke=$p,me=yae,Se=$_;for(var H=0;H<a;++H){var Me=n[H];if(Me>255){var be=Me>>18&31;dv(t,g,fe[be+257]),g+=ke[be+257],be>7&&(Sf(t,g,Me>>23&31),g+=eI[be]);var Le=Me&31;dv(t,g,me[Le]),g+=Se[Le],Le>3&&(dv(t,g,Me>>5&8191),g+=tI[Le])}else dv(t,g,fe[Me]),g+=ke[Me]}return dv(t,g,fe[256]),g+ke[256]},bae=new QP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q7=new dd(0),_ae=function(e,t,r,n,i,o){var l=o.z||e.length,a=new dd(n+l+5*(1+Math.ceil(l/7e3))+i),c=a.subarray(n,a.length-i),h=o.l,g=(o.r||0)&7;if(t){g&&(c[0]=o.r>>3);for(var v=bae[t-1],x=v>>13,b=v&8191,S=(1<<r)-1,I=o.p||new fc(32768),k=o.h||new fc(S+1),M=Math.ceil(r/3),O=2*M,F=function(ot){return(e[ot]^e[ot+1]<<M^e[ot+2]<<O)&S},D=new QP(25e3),q=new fc(288),z=new fc(32),U=0,H=0,X=o.i||0,ie=0,ee=o.w||0,G=0;X+2<l;++X){var ne=F(X),ae=X&32767,le=k[ne];if(I[ae]=le,k[ne]=ae,ee<=X){var fe=l-X;if((U>7e3||ie>24576)&&(fe>423||!h)){g=BR(e,c,0,D,q,z,H,ie,G,X-G,g),ie=U=H=0,G=X;for(var ke=0;ke<286;++ke)q[ke]=0;for(var ke=0;ke<30;++ke)z[ke]=0}var me=2,Se=0,we=b,Pe=ae-le&32767;if(fe>2&&ne==F(X-Pe))for(var ce=Math.min(x,fe)-1,_e=Math.min(32767,X),be=Math.min(258,fe);Pe<=_e&&--we&&ae!=le;){if(e[X+me]==e[X+me-Pe]){for(var Me=0;Me<be&&e[X+Me]==e[X+Me-Pe];++Me);if(Me>me){if(me=Me,Se=Pe,Me>ce)break;for(var Le=Math.min(Pe,Me-2),Ue=0,ke=0;ke<Le;++ke){var Oe=X-Pe+ke&32767,tt=I[Oe],Ze=Oe-tt&32767;Ze>Ue&&(Ue=Ze,le=Oe)}}}ae=le,le=I[ae],Pe+=ae-le&32767}if(Se){D[ie++]=268435456|fT[me]<<18|OR[Se];var Qe=fT[me]&31,Ie=OR[Se]&31;H+=eI[Qe]+tI[Ie],++q[257+Qe],++z[Ie],ee=X+me,++U}else D[ie++]=e[X],++q[e[X]]}}for(X=Math.max(X,ee);X<l;++X)D[ie++]=e[X],++q[e[X]];g=BR(e,c,h,D,q,z,H,ie,G,X-G,g),h||(o.r=g&7|c[g/8|0]<<3,g-=7,o.h=k,o.p=I,o.i=X,o.w=ee)}else{for(var X=o.w||0;X<l+h;X+=65535){var Mt=X+65535;Mt>=l&&(c[g/8|0]=h,Mt=l),g=j7(c,g+1,e.subarray(X,Mt))}o.i=l}return vae(a,0,n+z7(g)+i)},$7=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length|0,l=0;l!=o;){for(var a=Math.min(l+2655,o);l<a;++l)i+=n+=r[l];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},xae=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),l=new dd(o.length+e.length);l.set(o),l.set(e,o.length),e=l,i.w=o.length}return _ae(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},V7=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},wae=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=$7();i.p(t.dictionary),V7(e,2,i.d())}};function mT(e,t){t||(t={});var r=$7();r.p(e);var n=xae(e,t,t.dictionary?6:2,4);return wae(n,t),V7(n,n.length-4,r.d()),n}var Sae=typeof TextDecoder<"u"&&new TextDecoder,Cae=0;try{Sae.decode(q7,{stream:!0}),Cae=1}catch{}function Eae(e){if(Array.isArray(e))return e}function Tae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,l,a=[],c=!0,h=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(g){h=!0,i=g}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(h)throw i}}return a}}function zR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Pae(e,t){if(e){if(typeof e=="string")return zR(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zR(e,t):void 0}}function Iae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jR(e,t){return Eae(e)||Tae(e,t)||Pae(e,t)||Iae()}function qR(e,t="utf8"){return new TextDecoder(t).decode(e)}const kae=new TextEncoder;function Aae(e){return kae.encode(e)}const Mae=1024*8,Lae=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),MS={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class rI{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=Mae,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,o=t.byteLength-i;let l=i;(ArrayBuffer.isView(t)||t instanceof rI)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=MS[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===Lae&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+n));a.reverse();const c=new MS[r](a.buffer);return this.offset+=n,c.reverse(),c}const l=new MS[r](o);return this.offset+=n,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return qR(this.readBytes(t))}decodeText(t=1,r="utf8"){return qR(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Aae(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function by(e){let t=e.length;for(;--t>=0;)e[t]=0}const Rae=3,Dae=258,U7=29,Nae=256,Oae=Nae+1+U7,G7=30,Fae=512,Bae=new Array((Oae+2)*2);by(Bae);const zae=new Array(G7*2);by(zae);const jae=new Array(Fae);by(jae);const qae=new Array(Dae-Rae+1);by(qae);const $ae=new Array(U7);by($ae);const Vae=new Array(G7);by(Vae);const Uae=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do i=i+t[n++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0};var gT=Uae;const Gae=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Hae=new Uint32Array(Gae()),Wae=(e,t,r,n)=>{const i=Hae,o=n+r;e^=-1;for(let l=n;l<o;l++)e=e>>>8^i[(e^t[l])&255];return e^-1};var Fd=Wae,yT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H7={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Xae=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Yae=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Xae(r,n)&&(e[n]=r[n])}}return e},Zae=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let l=e[n];r.set(l,i),i+=l.length}return r},W7={assign:Yae,flattenChunks:Zae};let X7=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{X7=!1}const C0=new Uint8Array(256);for(let e=0;e<256;e++)C0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;C0[254]=C0[254]=1;var Kae=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,l=e.length,a=0;for(i=0;i<l;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<l&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<l&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const Jae=(e,t)=>{if(t<65534&&e.subarray&&X7)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var Qae=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let l=e[n++];if(l<128){o[i++]=l;continue}let a=C0[l];if(a>4){o[i++]=65533,n+=a-1;continue}for(l&=a===2?31:a===3?15:7;a>1&&n<r;)l=l<<6|e[n++]&63,a--;if(a>1){o[i++]=65533;continue}l<65536?o[i++]=l:(l-=65536,o[i++]=55296|l>>10&1023,o[i++]=56320|l&1023)}return Jae(o,i)},eoe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+C0[e[r]]>t?r:t},vT={string2buf:Kae,buf2string:Qae,utf8border:eoe};function toe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var roe=toe;const pb=16209,noe=16191;var ioe=function(t,r){let n,i,o,l,a,c,h,g,v,x,b,S,I,k,M,O,F,D,q,z,U,H,X,ie;const ee=t.state;n=t.next_in,X=t.input,i=n+(t.avail_in-5),o=t.next_out,ie=t.output,l=o-(r-t.avail_out),a=o+(t.avail_out-257),c=ee.dmax,h=ee.wsize,g=ee.whave,v=ee.wnext,x=ee.window,b=ee.hold,S=ee.bits,I=ee.lencode,k=ee.distcode,M=(1<<ee.lenbits)-1,O=(1<<ee.distbits)-1;e:do{S<15&&(b+=X[n++]<<S,S+=8,b+=X[n++]<<S,S+=8),F=I[b&M];t:for(;;){if(D=F>>>24,b>>>=D,S-=D,D=F>>>16&255,D===0)ie[o++]=F&65535;else if(D&16){q=F&65535,D&=15,D&&(S<D&&(b+=X[n++]<<S,S+=8),q+=b&(1<<D)-1,b>>>=D,S-=D),S<15&&(b+=X[n++]<<S,S+=8,b+=X[n++]<<S,S+=8),F=k[b&O];r:for(;;){if(D=F>>>24,b>>>=D,S-=D,D=F>>>16&255,D&16){if(z=F&65535,D&=15,S<D&&(b+=X[n++]<<S,S+=8,S<D&&(b+=X[n++]<<S,S+=8)),z+=b&(1<<D)-1,z>c){t.msg="invalid distance too far back",ee.mode=pb;break e}if(b>>>=D,S-=D,D=o-l,z>D){if(D=z-D,D>g&&ee.sane){t.msg="invalid distance too far back",ee.mode=pb;break e}if(U=0,H=x,v===0){if(U+=h-D,D<q){q-=D;do ie[o++]=x[U++];while(--D);U=o-z,H=ie}}else if(v<D){if(U+=h+v-D,D-=v,D<q){q-=D;do ie[o++]=x[U++];while(--D);if(U=0,v<q){D=v,q-=D;do ie[o++]=x[U++];while(--D);U=o-z,H=ie}}}else if(U+=v-D,D<q){q-=D;do ie[o++]=x[U++];while(--D);U=o-z,H=ie}for(;q>2;)ie[o++]=H[U++],ie[o++]=H[U++],ie[o++]=H[U++],q-=3;q&&(ie[o++]=H[U++],q>1&&(ie[o++]=H[U++]))}else{U=o-z;do ie[o++]=ie[U++],ie[o++]=ie[U++],ie[o++]=ie[U++],q-=3;while(q>2);q&&(ie[o++]=ie[U++],q>1&&(ie[o++]=ie[U++]))}}else if((D&64)===0){F=k[(F&65535)+(b&(1<<D)-1)];continue r}else{t.msg="invalid distance code",ee.mode=pb;break e}break}}else if((D&64)===0){F=I[(F&65535)+(b&(1<<D)-1)];continue t}else if(D&32){ee.mode=noe;break e}else{t.msg="invalid literal/length code",ee.mode=pb;break e}break}}while(n<i&&o<a);q=S>>3,n-=q,S-=q<<3,b&=(1<<S)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),ee.hold=b,ee.bits=S};const Um=15,$R=852,VR=592,UR=0,LS=1,GR=2,aoe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ooe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),soe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),loe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uoe=(e,t,r,n,i,o,l,a)=>{const c=a.bits;let h=0,g=0,v=0,x=0,b=0,S=0,I=0,k=0,M=0,O=0,F,D,q,z,U,H=null,X;const ie=new Uint16Array(Um+1),ee=new Uint16Array(Um+1);let G=null,ne,ae,le;for(h=0;h<=Um;h++)ie[h]=0;for(g=0;g<n;g++)ie[t[r+g]]++;for(b=c,x=Um;x>=1&&ie[x]===0;x--);if(b>x&&(b=x),x===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(v=1;v<x&&ie[v]===0;v++);for(b<v&&(b=v),k=1,h=1;h<=Um;h++)if(k<<=1,k-=ie[h],k<0)return-1;if(k>0&&(e===UR||x!==1))return-1;for(ee[1]=0,h=1;h<Um;h++)ee[h+1]=ee[h]+ie[h];for(g=0;g<n;g++)t[r+g]!==0&&(l[ee[t[r+g]]++]=g);if(e===UR?(H=G=l,X=20):e===LS?(H=aoe,G=ooe,X=257):(H=soe,G=loe,X=0),O=0,g=0,h=v,U=o,S=b,I=0,q=-1,M=1<<b,z=M-1,e===LS&&M>$R||e===GR&&M>VR)return 1;for(;;){ne=h-I,l[g]+1<X?(ae=0,le=l[g]):l[g]>=X?(ae=G[l[g]-X],le=H[l[g]-X]):(ae=96,le=0),F=1<<h-I,D=1<<S,v=D;do D-=F,i[U+(O>>I)+D]=ne<<24|ae<<16|le|0;while(D!==0);for(F=1<<h-1;O&F;)F>>=1;if(F!==0?(O&=F-1,O+=F):O=0,g++,--ie[h]===0){if(h===x)break;h=t[r+l[g]]}if(h>b&&(O&z)!==q){for(I===0&&(I=b),U+=v,S=h-I,k=1<<S;S+I<x&&(k-=ie[S+I],!(k<=0));)S++,k<<=1;if(M+=1<<S,e===LS&&M>$R||e===GR&&M>VR)return 1;q=O&z,i[q]=b<<24|S<<16|U-o|0}}return O!==0&&(i[U+O]=h-I<<24|64<<16|0),a.bits=b,0};var i0=uoe;const coe=0,Y7=1,Z7=2,{Z_FINISH:HR,Z_BLOCK:doe,Z_TREES:mb,Z_OK:Vp,Z_STREAM_END:foe,Z_NEED_DICT:hoe,Z_STREAM_ERROR:zc,Z_DATA_ERROR:K7,Z_MEM_ERROR:J7,Z_BUF_ERROR:poe,Z_DEFLATED:WR}=H7,T2=16180,XR=16181,YR=16182,ZR=16183,KR=16184,JR=16185,QR=16186,eD=16187,tD=16188,rD=16189,V_=16190,Cf=16191,RS=16192,nD=16193,DS=16194,iD=16195,aD=16196,oD=16197,sD=16198,gb=16199,yb=16200,lD=16201,uD=16202,cD=16203,dD=16204,fD=16205,NS=16206,hD=16207,pD=16208,Oo=16209,Q7=16210,ej=16211,moe=852,goe=592,yoe=15,voe=yoe,mD=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function boe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const am=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<T2||t.mode>ej?1:0},tj=e=>{if(am(e))return zc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=T2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(moe),t.distcode=t.distdyn=new Int32Array(goe),t.sane=1,t.back=-1,Vp},rj=e=>{if(am(e))return zc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,tj(e)},nj=(e,t)=>{let r;if(am(e))return zc;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?zc:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,rj(e))},ij=(e,t)=>{if(!e)return zc;const r=new boe;e.state=r,r.strm=e,r.window=null,r.mode=T2;const n=nj(e,t);return n!==Vp&&(e.state=null),n},_oe=e=>ij(e,voe);let gD=!0,OS,FS;const xoe=e=>{if(gD){OS=new Int32Array(512),FS=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(i0(Y7,e.lens,0,288,OS,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;i0(Z7,e.lens,0,32,FS,0,e.work,{bits:5}),gD=!1}e.lencode=OS,e.lenbits=9,e.distcode=FS,e.distbits=5},aj=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},woe=(e,t)=>{let r,n,i,o,l,a,c,h,g,v,x,b,S,I,k=0,M,O,F,D,q,z,U,H;const X=new Uint8Array(4);let ie,ee;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(am(e)||!e.output||!e.input&&e.avail_in!==0)return zc;r=e.state,r.mode===Cf&&(r.mode=RS),l=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,h=r.hold,g=r.bits,v=a,x=c,H=Vp;e:for(;;)switch(r.mode){case T2:if(r.wrap===0){r.mode=RS;break}for(;g<16;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(r.wrap&2&&h===35615){r.wbits===0&&(r.wbits=15),r.check=0,X[0]=h&255,X[1]=h>>>8&255,r.check=Fd(r.check,X,2,0),h=0,g=0,r.mode=XR;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((h&255)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=Oo;break}if((h&15)!==WR){e.msg="unknown compression method",r.mode=Oo;break}if(h>>>=4,g-=4,U=(h&15)+8,r.wbits===0&&(r.wbits=U),U>15||U>r.wbits){e.msg="invalid window size",r.mode=Oo;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=h&512?rD:Cf,h=0,g=0;break;case XR:for(;g<16;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(r.flags=h,(r.flags&255)!==WR){e.msg="unknown compression method",r.mode=Oo;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Oo;break}r.head&&(r.head.text=h>>8&1),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,r.check=Fd(r.check,X,2,0)),h=0,g=0,r.mode=YR;case YR:for(;g<32;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}r.head&&(r.head.time=h),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,X[2]=h>>>16&255,X[3]=h>>>24&255,r.check=Fd(r.check,X,4,0)),h=0,g=0,r.mode=ZR;case ZR:for(;g<16;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}r.head&&(r.head.xflags=h&255,r.head.os=h>>8),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,r.check=Fd(r.check,X,2,0)),h=0,g=0,r.mode=KR;case KR:if(r.flags&1024){for(;g<16;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}r.length=h,r.head&&(r.head.extra_len=h),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,r.check=Fd(r.check,X,2,0)),h=0,g=0}else r.head&&(r.head.extra=null);r.mode=JR;case JR:if(r.flags&1024&&(b=r.length,b>a&&(b=a),b&&(r.head&&(U=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+b),U)),r.flags&512&&r.wrap&4&&(r.check=Fd(r.check,n,b,o)),a-=b,o+=b,r.length-=b),r.length))break e;r.length=0,r.mode=QR;case QR:if(r.flags&2048){if(a===0)break e;b=0;do U=n[o+b++],r.head&&U&&r.length<65536&&(r.head.name+=String.fromCharCode(U));while(U&&b<a);if(r.flags&512&&r.wrap&4&&(r.check=Fd(r.check,n,b,o)),a-=b,o+=b,U)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=eD;case eD:if(r.flags&4096){if(a===0)break e;b=0;do U=n[o+b++],r.head&&U&&r.length<65536&&(r.head.comment+=String.fromCharCode(U));while(U&&b<a);if(r.flags&512&&r.wrap&4&&(r.check=Fd(r.check,n,b,o)),a-=b,o+=b,U)break e}else r.head&&(r.head.comment=null);r.mode=tD;case tD:if(r.flags&512){for(;g<16;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(r.wrap&4&&h!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Oo;break}h=0,g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Cf;break;case rD:for(;g<32;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}e.adler=r.check=mD(h),h=0,g=0,r.mode=V_;case V_:if(r.havedict===0)return e.next_out=l,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=h,r.bits=g,hoe;e.adler=r.check=1,r.mode=Cf;case Cf:if(t===doe||t===mb)break e;case RS:if(r.last){h>>>=g&7,g-=g&7,r.mode=NS;break}for(;g<3;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}switch(r.last=h&1,h>>>=1,g-=1,h&3){case 0:r.mode=nD;break;case 1:if(xoe(r),r.mode=gb,t===mb){h>>>=2,g-=2;break e}break;case 2:r.mode=aD;break;case 3:e.msg="invalid block type",r.mode=Oo}h>>>=2,g-=2;break;case nD:for(h>>>=g&7,g-=g&7;g<32;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if((h&65535)!==(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Oo;break}if(r.length=h&65535,h=0,g=0,r.mode=DS,t===mb)break e;case DS:r.mode=iD;case iD:if(b=r.length,b){if(b>a&&(b=a),b>c&&(b=c),b===0)break e;i.set(n.subarray(o,o+b),l),a-=b,o+=b,c-=b,l+=b,r.length-=b;break}r.mode=Cf;break;case aD:for(;g<14;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(r.nlen=(h&31)+257,h>>>=5,g-=5,r.ndist=(h&31)+1,h>>>=5,g-=5,r.ncode=(h&15)+4,h>>>=4,g-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Oo;break}r.have=0,r.mode=oD;case oD:for(;r.have<r.ncode;){for(;g<3;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}r.lens[G[r.have++]]=h&7,h>>>=3,g-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ie={bits:r.lenbits},H=i0(coe,r.lens,0,19,r.lencode,0,r.work,ie),r.lenbits=ie.bits,H){e.msg="invalid code lengths set",r.mode=Oo;break}r.have=0,r.mode=sD;case sD:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[h&(1<<r.lenbits)-1],M=k>>>24,O=k>>>16&255,F=k&65535,!(M<=g);){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(F<16)h>>>=M,g-=M,r.lens[r.have++]=F;else{if(F===16){for(ee=M+2;g<ee;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(h>>>=M,g-=M,r.have===0){e.msg="invalid bit length repeat",r.mode=Oo;break}U=r.lens[r.have-1],b=3+(h&3),h>>>=2,g-=2}else if(F===17){for(ee=M+3;g<ee;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}h>>>=M,g-=M,U=0,b=3+(h&7),h>>>=3,g-=3}else{for(ee=M+7;g<ee;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}h>>>=M,g-=M,U=0,b=11+(h&127),h>>>=7,g-=7}if(r.have+b>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Oo;break}for(;b--;)r.lens[r.have++]=U}}if(r.mode===Oo)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Oo;break}if(r.lenbits=9,ie={bits:r.lenbits},H=i0(Y7,r.lens,0,r.nlen,r.lencode,0,r.work,ie),r.lenbits=ie.bits,H){e.msg="invalid literal/lengths set",r.mode=Oo;break}if(r.distbits=6,r.distcode=r.distdyn,ie={bits:r.distbits},H=i0(Z7,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ie),r.distbits=ie.bits,H){e.msg="invalid distances set",r.mode=Oo;break}if(r.mode=gb,t===mb)break e;case gb:r.mode=yb;case yb:if(a>=6&&c>=258){e.next_out=l,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=h,r.bits=g,ioe(e,x),l=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,h=r.hold,g=r.bits,r.mode===Cf&&(r.back=-1);break}for(r.back=0;k=r.lencode[h&(1<<r.lenbits)-1],M=k>>>24,O=k>>>16&255,F=k&65535,!(M<=g);){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(O&&(O&240)===0){for(D=M,q=O,z=F;k=r.lencode[z+((h&(1<<D+q)-1)>>D)],M=k>>>24,O=k>>>16&255,F=k&65535,!(D+M<=g);){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}h>>>=D,g-=D,r.back+=D}if(h>>>=M,g-=M,r.back+=M,r.length=F,O===0){r.mode=fD;break}if(O&32){r.back=-1,r.mode=Cf;break}if(O&64){e.msg="invalid literal/length code",r.mode=Oo;break}r.extra=O&15,r.mode=lD;case lD:if(r.extra){for(ee=r.extra;g<ee;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=uD;case uD:for(;k=r.distcode[h&(1<<r.distbits)-1],M=k>>>24,O=k>>>16&255,F=k&65535,!(M<=g);){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if((O&240)===0){for(D=M,q=O,z=F;k=r.distcode[z+((h&(1<<D+q)-1)>>D)],M=k>>>24,O=k>>>16&255,F=k&65535,!(D+M<=g);){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}h>>>=D,g-=D,r.back+=D}if(h>>>=M,g-=M,r.back+=M,O&64){e.msg="invalid distance code",r.mode=Oo;break}r.offset=F,r.extra=O&15,r.mode=cD;case cD:if(r.extra){for(ee=r.extra;g<ee;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Oo;break}r.mode=dD;case dD:if(c===0)break e;if(b=x-c,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Oo;break}b>r.wnext?(b-=r.wnext,S=r.wsize-b):S=r.wnext-b,b>r.length&&(b=r.length),I=r.window}else I=i,S=l-r.offset,b=r.length;b>c&&(b=c),c-=b,r.length-=b;do i[l++]=I[S++];while(--b);r.length===0&&(r.mode=yb);break;case fD:if(c===0)break e;i[l++]=r.length,c--,r.mode=yb;break;case NS:if(r.wrap){for(;g<32;){if(a===0)break e;a--,h|=n[o++]<<g,g+=8}if(x-=c,e.total_out+=x,r.total+=x,r.wrap&4&&x&&(e.adler=r.check=r.flags?Fd(r.check,i,x,l-x):gT(r.check,i,x,l-x)),x=c,r.wrap&4&&(r.flags?h:mD(h))!==r.check){e.msg="incorrect data check",r.mode=Oo;break}h=0,g=0}r.mode=hD;case hD:if(r.wrap&&r.flags){for(;g<32;){if(a===0)break e;a--,h+=n[o++]<<g,g+=8}if(r.wrap&4&&h!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Oo;break}h=0,g=0}r.mode=pD;case pD:H=foe;break e;case Oo:H=K7;break e;case Q7:return J7;case ej:default:return zc}return e.next_out=l,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=h,r.bits=g,(r.wsize||x!==e.avail_out&&r.mode<Oo&&(r.mode<NS||t!==HR))&&aj(e,e.output,e.next_out,x-e.avail_out),v-=e.avail_in,x-=e.avail_out,e.total_in+=v,e.total_out+=x,r.total+=x,r.wrap&4&&x&&(e.adler=r.check=r.flags?Fd(r.check,i,x,e.next_out-x):gT(r.check,i,x,e.next_out-x)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Cf?128:0)+(r.mode===gb||r.mode===DS?256:0),(v===0&&x===0||t===HR)&&H===Vp&&(H=poe),H},Soe=e=>{if(am(e))return zc;let t=e.state;return t.window&&(t.window=null),e.state=null,Vp},Coe=(e,t)=>{if(am(e))return zc;const r=e.state;return(r.wrap&2)===0?zc:(r.head=t,t.done=!1,Vp)},Eoe=(e,t)=>{const r=t.length;let n,i,o;return am(e)||(n=e.state,n.wrap!==0&&n.mode!==V_)?zc:n.mode===V_&&(i=1,i=gT(i,t,r,0),i!==n.check)?K7:(o=aj(e,t,r,r),o?(n.mode=Q7,J7):(n.havedict=1,Vp))};var Toe=rj,Poe=nj,Ioe=tj,koe=_oe,Aoe=ij,Moe=woe,Loe=Soe,Roe=Coe,Doe=Eoe,Noe="pako inflate (from Nodeca project)",If={inflateReset:Toe,inflateReset2:Poe,inflateResetKeep:Ioe,inflateInit:koe,inflateInit2:Aoe,inflate:Moe,inflateEnd:Loe,inflateGetHeader:Roe,inflateSetDictionary:Doe,inflateInfo:Noe};function Ooe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Foe=Ooe;const oj=Object.prototype.toString,{Z_NO_FLUSH:Boe,Z_FINISH:zoe,Z_OK:E0,Z_STREAM_END:BS,Z_NEED_DICT:zS,Z_STREAM_ERROR:joe,Z_DATA_ERROR:yD,Z_MEM_ERROR:qoe}=H7;function u1(e){this.options=W7.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new roe,this.strm.avail_out=0;let r=If.inflateInit2(this.strm,t.windowBits);if(r!==E0)throw new Error(yT[r]);if(this.header=new Foe,If.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=vT.string2buf(t.dictionary):oj.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=If.inflateSetDictionary(this.strm,t.dictionary),r!==E0)))throw new Error(yT[r])}u1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,l,a;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?zoe:Boe,oj.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=If.inflate(r,l),o===zS&&i&&(o=If.inflateSetDictionary(r,i),o===E0?o=If.inflate(r,l):o===yD&&(o=zS));r.avail_in>0&&o===BS&&r.state.wrap>0&&e[r.next_in]!==0;)If.inflateReset(r),o=If.inflate(r,l);switch(o){case joe:case yD:case zS:case qoe:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===BS))if(this.options.to==="string"){let c=vT.utf8border(r.output,r.next_out),h=r.next_out-c,g=vT.buf2string(r.output,c);r.next_out=h,r.avail_out=n-h,h&&r.output.set(r.output.subarray(c,c+h),0),this.onData(g)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===E0&&a===0)){if(o===BS)return o=If.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};u1.prototype.onData=function(e){this.chunks.push(e)};u1.prototype.onEnd=function(e){e===E0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=W7.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function $oe(e,t){const r=new u1(t);if(r.push(e),r.err)throw r.msg||yT[r.err];return r.result}var Voe=u1,Uoe=$oe,Goe={Inflate:Voe,inflate:Uoe};const{Inflate:Hoe,inflate:Woe}=Goe;var vD=Hoe,Xoe=Woe;const sj=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;sj[e]=t}const bD=4294967295;function Yoe(e,t,r){let n=e;for(let i=0;i<r;i++)n=sj[(n^t[i])&255]^n>>>8;return n}function Zoe(e,t){return(Yoe(bD,e,t)^bD)>>>0}function _D(e,t,r){const n=e.readUint32(),i=Zoe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function lj(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function uj(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function cj(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function dj(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=e[o]+(r[o]>>1)&255;for(;o<n;o++)t[o]=e[o]+(t[o-i]+r[o]>>1)&255}}function fj(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=e[o]+r[o]&255;for(;o<n;o++)t[o]=e[o]+Koe(t[o-i],r[o],r[o-i])&255}}function Koe(e,t,r){const n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),l=Math.abs(n-r);return i<=o&&i<=l?e:o<=l?t:r}function Joe(e,t,r,n,i,o){switch(e){case 0:lj(t,r,i);break;case 1:uj(t,r,i,o);break;case 2:cj(t,r,n,i);break;case 3:dj(t,r,n,i,o);break;case 4:fj(t,r,n,i,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Qoe=new Uint16Array([255]),ese=new Uint8Array(Qoe.buffer),tse=ese[0]===255;function rse(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(n*r*a);let h=0;for(let g=0;g<7;g++){const v=l[g],x=Math.ceil((r-v.x)/v.xStep),b=Math.ceil((n-v.y)/v.yStep);if(x<=0||b<=0)continue;const S=x*a,I=new Uint8Array(S);for(let k=0;k<b;k++){const M=t[h++],O=t.subarray(h,h+S);h+=S;const F=new Uint8Array(S);Joe(M,O,F,I,S,a),I.set(F);for(let D=0;D<x;D++){const q=v.x+D*v.xStep,z=v.y+k*v.yStep;if(!(q>=r||z>=n))for(let U=0;U<a;U++)c[(z*r+q)*a+U]=F[D*a+U]}}}if(o===16){const g=new Uint16Array(c.buffer);if(tse)for(let v=0;v<g.length;v++)g[v]=nse(g[v]);return g}else return c}function nse(e){return(e&255)<<8|e>>8&255}const ise=new Uint16Array([255]),ase=new Uint8Array(ise.buffer),ose=ase[0]===255,sse=new Uint8Array(0);function xD(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,l=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*r),c=new Uint8Array(n*a);let h=sse,g=0,v,x;for(let b=0;b<n;b++){switch(v=t.subarray(g+1,g+1+a),x=c.subarray(b*a,(b+1)*a),t[g]){case 0:lj(v,x,a);break;case 1:uj(v,x,a,l);break;case 2:cj(v,x,h,a);break;case 3:dj(v,x,h,a,l);break;case 4:fj(v,x,h,a,l);break;default:throw new Error(`Unsupported filter: ${t[g]}`)}h=x,g+=a+1}if(o===16){const b=new Uint16Array(c.buffer);if(ose)for(let S=0;S<b.length;S++)b[S]=lse(b[S]);return b}else return c}function lse(e){return(e&255)<<8|e>>8&255}const c_=Uint8Array.of(137,80,78,71,13,10,26,10);function wD(e){if(!use(e.readBytes(c_.length)))throw new Error("wrong PNG signature")}function use(e){if(e.length<c_.length)return!1;for(let t=0;t<c_.length;t++)if(e[t]!==c_[t])return!1;return!0}const cse="tEXt",dse=0,hj=new TextDecoder("latin1");function fse(e){if(pse(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const hse=/^[\u0000-\u00FF]*$/;function pse(e){if(!hse.test(e))throw new Error("invalid latin1 text")}function mse(e,t,r){const n=pj(t);e[n]=gse(t,r-n.length-1)}function pj(e){for(e.mark();e.readByte()!==dse;);const t=e.offset;e.reset();const r=hj.decode(e.readBytes(t-e.offset-1));return e.skip(1),fse(r),r}function gse(e,t){return hj.decode(e.readBytes(t))}const lc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},jS={UNKNOWN:-1,DEFLATE:0},SD={UNKNOWN:-1,ADAPTIVE:0},qS={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},vb={NONE:0,BACKGROUND:1,PREVIOUS:2},$S={SOURCE:0,OVER:1};class yse extends rI{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new vD,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=jS.UNKNOWN,this._filterMethod=SD.UNKNOWN,this._interlaceMethod=qS.UNKNOWN,this._colorType=lc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(wD(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(wD(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case cse:mse(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?_D(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?_D(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=vse(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case lc.GREYSCALE:n=1;break;case lc.TRUECOLOUR:n=3;break;case lc.INDEXED_COLOUR:n=1;break;case lc.GREYSCALE_ALPHA:n=2;break;case lc.TRUECOLOUR_ALPHA:n=4;break;case lc.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==jS.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case lc.GREYSCALE:case lc.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case lc.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case lc.UNKNOWN:case lc.GREYSCALE_ALPHA:case lc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=pj(this),n=this.readUint8();if(n!==jS.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Xoe(i)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=xD({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case vb.NONE:break;case vb.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*t.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)n.data[l+a]=0}break;case vb.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,i=(o,l)=>{const a=((o+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,c=(o*r.width+l)*this._png.channels;return{index:a,frameIndex:c}};switch(r.blendOp){case $S.SOURCE:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:a,frameIndex:c}=i(o,l);for(let h=0;h<this._png.channels;h++)t.data[a+h]=r.data[c+h]}break;case $S.OVER:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:a,frameIndex:c}=i(o,l);for(let h=0;h<this._png.channels;h++){const g=r.data[c+this._png.channels-1]/n,v=h%(this._png.channels-1)===0?1:r.data[c+h],x=Math.floor(g*v+(1-g)*t.data[a+h]);t.data[a+h]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==SD.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===qS.NO_INTERLACE)this._png.data=xD({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===qS.ADAM7)this._png.data=rse({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:vb.NONE,blendOp:$S.SOURCE,data:t}),this._inflator=new vD,this._writingDataChunks=!1}}function vse(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var CD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(CD||(CD={}));function bse(e,t){return new yse(e,t).decode()}var Si=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function VS(){Si.console&&typeof Si.console.log=="function"&&Si.console.log.apply(Si.console,arguments)}var fo={log:VS,warn:function(e){Si.console&&(typeof Si.console.warn=="function"?Si.console.warn.apply(Si.console,arguments):VS.call(null,arguments))},error:function(e){Si.console&&(typeof Si.console.error=="function"?Si.console.error.apply(Si.console,arguments):VS(e))}};function US(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){_p(n.response,t,r)},n.onerror=function(){fo.error("could not download file")},n.send()}function ED(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function bb(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var _p=Si.saveAs||((typeof window>"u"?"undefined":Va(window))!=="object"||window!==Si?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Si.URL||Si.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?ED(i.href)?US(e,t,r):bb(i,i.target="_blank"):bb(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){bb(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(ED(e))US(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){bb(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Va(o)!=="object"&&(fo.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return US(e,t,r);var i=e.type==="application/octet-stream",o=/constructor/i.test(Si.HTMLElement)||Si.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":Va(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var g=a.result;g=l?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},a.readAsDataURL(e)}else{var c=Si.URL||Si.webkitURL,h=c.createObjectURL(e);n?n.location=h:location.href=h,n=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function mj(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,l=i.exec(e);l&&(t=o(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+a+c+h}}var d_=Si.atob.bind(Si),TD=Si.btoa.bind(Si);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function GS(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r=au(r,n,i,o,t[0],7,-680876936),o=au(o,r,n,i,t[1],12,-389564586),i=au(i,o,r,n,t[2],17,606105819),n=au(n,i,o,r,t[3],22,-1044525330),r=au(r,n,i,o,t[4],7,-176418897),o=au(o,r,n,i,t[5],12,1200080426),i=au(i,o,r,n,t[6],17,-1473231341),n=au(n,i,o,r,t[7],22,-45705983),r=au(r,n,i,o,t[8],7,1770035416),o=au(o,r,n,i,t[9],12,-1958414417),i=au(i,o,r,n,t[10],17,-42063),n=au(n,i,o,r,t[11],22,-1990404162),r=au(r,n,i,o,t[12],7,1804603682),o=au(o,r,n,i,t[13],12,-40341101),i=au(i,o,r,n,t[14],17,-1502002290),r=ou(r,n=au(n,i,o,r,t[15],22,1236535329),i,o,t[1],5,-165796510),o=ou(o,r,n,i,t[6],9,-1069501632),i=ou(i,o,r,n,t[11],14,643717713),n=ou(n,i,o,r,t[0],20,-373897302),r=ou(r,n,i,o,t[5],5,-701558691),o=ou(o,r,n,i,t[10],9,38016083),i=ou(i,o,r,n,t[15],14,-660478335),n=ou(n,i,o,r,t[4],20,-405537848),r=ou(r,n,i,o,t[9],5,568446438),o=ou(o,r,n,i,t[14],9,-1019803690),i=ou(i,o,r,n,t[3],14,-187363961),n=ou(n,i,o,r,t[8],20,1163531501),r=ou(r,n,i,o,t[13],5,-1444681467),o=ou(o,r,n,i,t[2],9,-51403784),i=ou(i,o,r,n,t[7],14,1735328473),r=su(r,n=ou(n,i,o,r,t[12],20,-1926607734),i,o,t[5],4,-378558),o=su(o,r,n,i,t[8],11,-2022574463),i=su(i,o,r,n,t[11],16,1839030562),n=su(n,i,o,r,t[14],23,-35309556),r=su(r,n,i,o,t[1],4,-1530992060),o=su(o,r,n,i,t[4],11,1272893353),i=su(i,o,r,n,t[7],16,-155497632),n=su(n,i,o,r,t[10],23,-1094730640),r=su(r,n,i,o,t[13],4,681279174),o=su(o,r,n,i,t[0],11,-358537222),i=su(i,o,r,n,t[3],16,-722521979),n=su(n,i,o,r,t[6],23,76029189),r=su(r,n,i,o,t[9],4,-640364487),o=su(o,r,n,i,t[12],11,-421815835),i=su(i,o,r,n,t[15],16,530742520),r=lu(r,n=su(n,i,o,r,t[2],23,-995338651),i,o,t[0],6,-198630844),o=lu(o,r,n,i,t[7],10,1126891415),i=lu(i,o,r,n,t[14],15,-1416354905),n=lu(n,i,o,r,t[5],21,-57434055),r=lu(r,n,i,o,t[12],6,1700485571),o=lu(o,r,n,i,t[3],10,-1894986606),i=lu(i,o,r,n,t[10],15,-1051523),n=lu(n,i,o,r,t[1],21,-2054922799),r=lu(r,n,i,o,t[8],6,1873313359),o=lu(o,r,n,i,t[15],10,-30611744),i=lu(i,o,r,n,t[6],15,-1560198380),n=lu(n,i,o,r,t[13],21,1309151649),r=lu(r,n,i,o,t[4],6,-145523070),o=lu(o,r,n,i,t[11],10,-1120210379),i=lu(i,o,r,n,t[2],15,718787259),n=lu(n,i,o,r,t[9],21,-343485551),e[0]=Eh(r,e[0]),e[1]=Eh(n,e[1]),e[2]=Eh(i,e[2]),e[3]=Eh(o,e[3])}function P2(e,t,r,n,i,o){return t=Eh(Eh(t,e),Eh(n,o)),Eh(t<<i|t>>>32-i,r)}function au(e,t,r,n,i,o,l){return P2(t&r|~t&n,e,t,i,o,l)}function ou(e,t,r,n,i,o,l){return P2(t&n|r&~n,e,t,i,o,l)}function su(e,t,r,n,i,o,l){return P2(t^r^n,e,t,i,o,l)}function lu(e,t,r,n,i,o,l){return P2(r^(t|~n),e,t,i,o,l)}function gj(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)GS(n,_se(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(GS(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,GS(n,i),n}function _se(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var PD="0123456789abcdef".split("");function xse(e){for(var t="",r=0;r<4;r++)t+=PD[e>>8*r+4&15]+PD[e>>8*r&15];return t}function wse(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function bT(e){return gj(e).map(wse).join("")}var Sse=(function(e){for(var t=0;t<e.length;t++)e[t]=xse(e[t]);return e.join("")})(gj("hello"))!="5d41402abc4b2a76b9719d911017c592";function Eh(e,t){if(Sse){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _T(e,t){var r,n,i,o;if(e!==r){for(var l=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var h=0;for(c=0;c<256;c++){var g=a[c];h=(h+g+l.charCodeAt(c))%256,a[c]=a[h],a[h]=g}r=e,n=a}else a=n;var v=t.length,x=0,b=0,S="";for(c=0;c<v;c++)b=(b+(g=a[x=(x+1)%256]))%256,a[x]=a[b],a[b]=g,l=a[(a[x]+a[b])%256],S+=String.fromCharCode(t.charCodeAt(c)^l);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ID={print:4,modify:8,copy:16,"annot-forms":32};function ag(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(ID.perm!==void 0)throw new Error("Invalid permission: "+a);i+=ID[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=bT(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=_T(this.encryptionKey,this.padding)}function og(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function kD(e){if(Va(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var o=Math.random().toString(35);return t[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[r]){var l=t[r][o];try{l[0].apply(e,n)}catch(a){Si.console&&fo.error("jsPDF PubSub Error",a.message,a)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function U_(e){if(!(this instanceof U_))return new U_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function yj(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Cp(e,t,r,n,i){if(!(this instanceof Cp))return new Cp(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,yj.call(this,n,i)}function Pg(e,t,r,n,i){if(!(this instanceof Pg))return new Pg(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,yj.call(this,n,i)}function ii(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],l=[],a=1,c=16,h="S",g=null;Va(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,o=e.compress||e.compressPdf||o,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),h=e.defaultPathOperation||"S"),l=e.filters||(o===!0?["FlateEncode"]:l),n=n||"mm",r=(""+(r||"P")).toLowerCase();var v=e.putOnlyUsedFonts||!1,x={},b={internal:{},__private__:{}};b.__private__.PubSub=kD;var S="1.3",I=b.__private__.getPdfVersion=function(){return S};b.__private__.setPdfVersion=function(se){S=se};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var M=b.__private__.getPageFormat=function(se){return k[se]};i=i||"a4";var O="compat",F="advanced",D=O;function q(){this.saveGraphicsState(),$e(new Rr(Qt,0,0,-Qt,0,Yi()*Qt).toString()+" cm"),this.setFontSize(this.getFontSize()/Qt),h="n",D=F}function z(){this.restoreGraphicsState(),h="S",D=O}var U=b.__private__.combineFontStyleAndFontWeight=function(se,Ge){if(se=="bold"&&Ge=="normal"||se=="bold"&&Ge==400||se=="normal"&&Ge=="italic"||se=="bold"&&Ge=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ge&&(se=Ge==400||Ge==="normal"?se==="italic"?"italic":"normal":Ge!=700&&Ge!=="bold"||se!=="normal"?(Ge==700?"bold":Ge)+""+se:"bold"),se};b.advancedAPI=function(se){var Ge=D===O;return Ge&&q.call(this),typeof se!="function"||(se(this),Ge&&z.call(this)),this},b.compatAPI=function(se){var Ge=D===F;return Ge&&z.call(this),typeof se!="function"||(se(this),Ge&&q.call(this)),this},b.isAdvancedAPI=function(){return D===F};var H,X=function(se){if(D!==F)throw new Error(se+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ie=b.roundToPrecision=b.__private__.roundToPrecision=function(se,Ge){var pt=t||Ge;if(isNaN(se)||isNaN(pt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return se.toFixed(pt).replace(/0+$/,"")};H=b.hpf=b.__private__.hpf=typeof c=="number"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(se,c)}:c==="smart"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(se,se>-1&&se<1?16:5)}:function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(se,16)};var ee=b.f2=b.__private__.f2=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f2");return ie(se,2)},G=b.__private__.f3=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f3");return ie(se,3)},ne=b.scale=b.__private__.scale=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.scale");return D===O?se*Qt:D===F?se:void 0},ae=function(se){return ne((function(Ge){return D===O?Yi()-Ge:D===F?Ge:void 0})(se))};b.__private__.setPrecision=b.setPrecision=function(se){typeof parseInt(se,10)=="number"&&(t=parseInt(se,10))};var le,fe="00000000000000000000000000000000",ke=b.__private__.getFileId=function(){return fe},me=b.__private__.setFileId=function(se){return fe=se!==void 0&&/^[a-fA-F0-9]{32}$/.test(se)?se.toUpperCase():fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Ia=new ag(g.userPermissions,g.userPassword,g.ownerPassword,fe)),fe};b.setFileId=function(se){return me(se),this},b.getFileId=function(){return ke()};var Se=b.__private__.convertDateToPDFDate=function(se){var Ge=se.getTimezoneOffset(),pt=Ge<0?"+":"-",jt=Math.floor(Math.abs(Ge/60)),or=Math.abs(Ge%60),Nr=[pt,be(jt),"'",be(or),"'"].join("");return["D:",se.getFullYear(),be(se.getMonth()+1),be(se.getDate()),be(se.getHours()),be(se.getMinutes()),be(se.getSeconds()),Nr].join("")},we=b.__private__.convertPDFDateToDate=function(se){var Ge=parseInt(se.substr(2,4),10),pt=parseInt(se.substr(6,2),10)-1,jt=parseInt(se.substr(8,2),10),or=parseInt(se.substr(10,2),10),Nr=parseInt(se.substr(12,2),10),Xr=parseInt(se.substr(14,2),10);return new Date(Ge,pt,jt,or,Nr,Xr,0)},Pe=b.__private__.setCreationDate=function(se){var Ge;if(se===void 0&&(se=new Date),se instanceof Date)Ge=Se(se);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(se))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ge=se}return le=Ge},ce=b.__private__.getCreationDate=function(se){var Ge=le;return se==="jsDate"&&(Ge=we(le)),Ge};b.setCreationDate=function(se){return Pe(se),this},b.getCreationDate=function(se){return ce(se)};var _e,be=b.__private__.padd2=function(se){return("0"+parseInt(se)).slice(-2)},Me=b.__private__.padd2Hex=function(se){return("00"+(se=se.toString())).substr(se.length)},Le=0,Ue=[],Oe=[],tt=0,Ze=[],Qe=[],Ie=!1,Mt=Oe;b.__private__.setCustomOutputDestination=function(se){Ie=!0,Mt=se};var ot=function(se){Ie||(Mt=se)};b.__private__.resetCustomOutputDestination=function(){Ie=!1,Mt=Oe};var $e=b.__private__.out=function(se){return se=se.toString(),tt+=se.length+1,Mt.push(se),Mt},tr=b.__private__.write=function(se){return $e(arguments.length===1?se.toString():Array.prototype.join.call(arguments," "))},Wt=b.__private__.getArrayBuffer=function(se){for(var Ge=se.length,pt=new ArrayBuffer(Ge),jt=new Uint8Array(pt);Ge--;)jt[Ge]=se.charCodeAt(Ge);return pt},Gt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Gt};var at=e.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(se){return at=D===F?se/Qt:se,this};var dr,hr=b.__private__.getFontSize=b.getFontSize=function(){return D===O?at:at*Qt},ur=e.R2L||!1;b.__private__.setR2L=b.setR2L=function(se){return ur=se,this},b.__private__.getR2L=b.getR2L=function(){return ur};var Cr,br=b.__private__.setZoomMode=function(se){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(se))dr=se;else if(isNaN(se)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(se)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+se+'" is not recognized.');dr=se}else dr=parseInt(se,10)};b.__private__.getZoomMode=function(){return dr};var nr,lr=b.__private__.setPageMode=function(se){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(se)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+se+'" is not recognized.');Cr=se};b.__private__.getPageMode=function(){return Cr};var Pr=b.__private__.setLayoutMode=function(se){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(se)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+se+'" is not recognized.');nr=se};b.__private__.getLayoutMode=function(){return nr},b.__private__.setDisplayMode=b.setDisplayMode=function(se,Ge,pt){return br(se),Pr(Ge),lr(pt),this};var ar={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(se){if(Object.keys(ar).indexOf(se)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ar[se]},b.__private__.getDocumentProperties=function(){return ar},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(se){for(var Ge in ar)ar.hasOwnProperty(Ge)&&se[Ge]&&(ar[Ge]=se[Ge]);return this},b.__private__.setDocumentProperty=function(se,Ge){if(Object.keys(ar).indexOf(se)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ar[se]=Ge};var kr,Qt,Ht,Ct,Re,Be={},De={},rt=[],mt={},At={},Ot={},Tt={},Yt=null,Bt=0,wt=[],Xt=new kD(b),Et=e.hotfixes||[],Ir={},$t={},Vr=[],Rr=function se(Ge,pt,jt,or,Nr,Xr){if(!(this instanceof se))return new se(Ge,pt,jt,or,Nr,Xr);isNaN(Ge)&&(Ge=1),isNaN(pt)&&(pt=0),isNaN(jt)&&(jt=0),isNaN(or)&&(or=1),isNaN(Nr)&&(Nr=0),isNaN(Xr)&&(Xr=0),this._matrix=[Ge,pt,jt,or,Nr,Xr]};Object.defineProperty(Rr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(Rr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(Rr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(Rr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(Rr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(Rr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(Rr.prototype,"a",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(Rr.prototype,"b",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(Rr.prototype,"c",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(Rr.prototype,"d",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(Rr.prototype,"e",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(Rr.prototype,"f",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(Rr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rr.prototype.join=function(se){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(H).join(se)},Rr.prototype.multiply=function(se){var Ge=se.sx*this.sx+se.shy*this.shx,pt=se.sx*this.shy+se.shy*this.sy,jt=se.shx*this.sx+se.sy*this.shx,or=se.shx*this.shy+se.sy*this.sy,Nr=se.tx*this.sx+se.ty*this.shx+this.tx,Xr=se.tx*this.shy+se.ty*this.sy+this.ty;return new Rr(Ge,pt,jt,or,Nr,Xr)},Rr.prototype.decompose=function(){var se=this.sx,Ge=this.shy,pt=this.shx,jt=this.sy,or=this.tx,Nr=this.ty,Xr=Math.sqrt(se*se+Ge*Ge),xn=(se/=Xr)*pt+(Ge/=Xr)*jt;pt-=se*xn,jt-=Ge*xn;var Ln=Math.sqrt(pt*pt+jt*jt);return xn/=Ln,se*(jt/=Ln)<Ge*(pt/=Ln)&&(se=-se,Ge=-Ge,xn=-xn,Xr=-Xr),{scale:new Rr(Xr,0,0,Ln,0,0),translate:new Rr(1,0,0,1,or,Nr),rotate:new Rr(se,Ge,-Ge,se,0,0),skew:new Rr(1,0,xn,1,0,0)}},Rr.prototype.toString=function(se){return this.join(" ")},Rr.prototype.inversed=function(){var se=this.sx,Ge=this.shy,pt=this.shx,jt=this.sy,or=this.tx,Nr=this.ty,Xr=1/(se*jt-Ge*pt),xn=jt*Xr,Ln=-Ge*Xr,ni=-pt*Xr,mi=se*Xr;return new Rr(xn,Ln,ni,mi,-xn*or-ni*Nr,-Ln*or-mi*Nr)},Rr.prototype.applyToPoint=function(se){var Ge=se.x*this.sx+se.y*this.shx+this.tx,pt=se.x*this.shy+se.y*this.sy+this.ty;return new Il(Ge,pt)},Rr.prototype.applyToRectangle=function(se){var Ge=this.applyToPoint(se),pt=this.applyToPoint(new Il(se.x+se.w,se.y+se.h));return new zo(Ge.x,Ge.y,pt.x-Ge.x,pt.y-Ge.y)},Rr.prototype.clone=function(){var se=this.sx,Ge=this.shy,pt=this.shx,jt=this.sy,or=this.tx,Nr=this.ty;return new Rr(se,Ge,pt,jt,or,Nr)},b.Matrix=Rr;var un=b.matrixMult=function(se,Ge){return Ge.multiply(se)},Te=new Rr(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Te;var qe=function(se,Ge){if(!At[se]){var pt=(Ge instanceof Cp?"Sh":"P")+(Object.keys(mt).length+1).toString(10);Ge.id=pt,At[se]=pt,mt[pt]=Ge,Xt.publish("addPattern",Ge)}};b.ShadingPattern=Cp,b.TilingPattern=Pg,b.addShadingPattern=function(se,Ge){return X("addShadingPattern()"),qe(se,Ge),this},b.beginTilingPattern=function(se){X("beginTilingPattern()"),cl(se.boundingBox[0],se.boundingBox[1],se.boundingBox[2]-se.boundingBox[0],se.boundingBox[3]-se.boundingBox[1],se.matrix)},b.endTilingPattern=function(se,Ge){X("endTilingPattern()"),Ge.stream=Qe[_e].join(`
`),qe(se,Ge),Xt.publish("endTilingPattern",Ge),Vr.pop().restore()};var ht,kt=b.__private__.newObject=function(){var se=gr();return Ur(se,!0),se},gr=b.__private__.newObjectDeferred=function(){return Le++,Ue[Le]=function(){return tt},Le},Ur=function(se,Ge){return Ge=typeof Ge=="boolean"&&Ge,Ue[se]=tt,Ge&&$e(se+" 0 obj"),se},Er=b.__private__.newAdditionalObject=function(){var se={objId:gr(),content:""};return Ze.push(se),se},si=gr(),Hn=gr(),di=b.__private__.decodeColorString=function(se){var Ge=se.split(" ");if(Ge.length!==2||Ge[1]!=="g"&&Ge[1]!=="G")Ge.length!==5||Ge[4]!=="k"&&Ge[4]!=="K"||(Ge=[(1-Ge[0])*(1-Ge[3]),(1-Ge[1])*(1-Ge[3]),(1-Ge[2])*(1-Ge[3]),"r"]);else{var pt=parseFloat(Ge[0]);Ge=[pt,pt,pt,"r"]}for(var jt="#",or=0;or<3;or++)jt+=("0"+Math.floor(255*parseFloat(Ge[or])).toString(16)).slice(-2);return jt},Mi=b.__private__.encodeColorString=function(se){var Ge;typeof se=="string"&&(se={ch1:se});var pt=se.ch1,jt=se.ch2,or=se.ch3,Nr=se.ch4,Xr=se.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pt=="string"&&pt.charAt(0)!=="#"){var xn=new mj(pt);if(xn.ok)pt=xn.toHex();else if(!/^\d*\.?\d*$/.test(pt))throw new Error('Invalid color "'+pt+'" passed to jsPDF.encodeColorString.')}if(typeof pt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pt)&&(pt="#"+pt[1]+pt[1]+pt[2]+pt[2]+pt[3]+pt[3]),typeof pt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pt)){var Ln=parseInt(pt.substr(1),16);pt=Ln>>16&255,jt=Ln>>8&255,or=255&Ln}if(jt===void 0||Nr===void 0&&pt===jt&&jt===or)Ge=typeof pt=="string"?pt+" "+Xr[0]:se.precision===2?ee(pt/255)+" "+Xr[0]:G(pt/255)+" "+Xr[0];else if(Nr===void 0||Va(Nr)==="object"){if(Nr&&!isNaN(Nr.a)&&Nr.a===0)return["1.","1.","1.",Xr[1]].join(" ");Ge=typeof pt=="string"?[pt,jt,or,Xr[1]].join(" "):se.precision===2?[ee(pt/255),ee(jt/255),ee(or/255),Xr[1]].join(" "):[G(pt/255),G(jt/255),G(or/255),Xr[1]].join(" ")}else Ge=typeof pt=="string"?[pt,jt,or,Nr,Xr[2]].join(" "):se.precision===2?[ee(pt),ee(jt),ee(or),ee(Nr),Xr[2]].join(" "):[G(pt),G(jt),G(or),G(Nr),Xr[2]].join(" ");return Ge},qr=b.__private__.getFilters=function(){return l},cn=b.__private__.putStream=function(se){var Ge=(se=se||{}).data||"",pt=se.filters||qr(),jt=se.alreadyAppliedFilters||[],or=se.addLength1||!1,Nr=Ge.length,Xr=se.objectId,xn=function(ma){return ma};if(g!==null&&Xr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(xn=Ia.encryptor(Xr,0));var Ln={};pt===!0&&(pt=["FlateEncode"]);var ni=se.additionalKeyValues||[],mi=(Ln=ii.API.processDataByFilters!==void 0?ii.API.processDataByFilters(Ge,pt):{data:Ge,reverseChain:[]}).reverseChain+(Array.isArray(jt)?jt.join(" "):jt.toString());if(Ln.data.length!==0&&(ni.push({key:"Length",value:Ln.data.length}),or===!0&&ni.push({key:"Length1",value:Nr})),mi.length!=0)if(mi.split("/").length-1==1)ni.push({key:"Filter",value:mi});else{ni.push({key:"Filter",value:"["+mi+"]"});for(var ri=0;ri<ni.length;ri+=1)if(ni[ri].key==="DecodeParms"){for(var Ri=[],pi=0;pi<Ln.reverseChain.split("/").length-1;pi+=1)Ri.push("null");Ri.push(ni[ri].value),ni[ri].value="["+Ri.join(" ")+"]"}}$e("<<");for(var yi=0;yi<ni.length;yi++)$e("/"+ni[yi].key+" "+ni[yi].value);$e(">>"),Ln.data.length!==0&&($e("stream"),$e(xn(Ln.data)),$e("endstream"))},Pn=b.__private__.putPage=function(se){var Ge=se.number,pt=se.data,jt=se.objId,or=se.contentsObjId;Ur(jt,!0),$e("<</Type /Page"),$e("/Parent "+se.rootDictionaryObjId+" 0 R"),$e("/Resources "+se.resourceDictionaryObjId+" 0 R"),$e("/MediaBox ["+parseFloat(H(se.mediaBox.bottomLeftX))+" "+parseFloat(H(se.mediaBox.bottomLeftY))+" "+H(se.mediaBox.topRightX)+" "+H(se.mediaBox.topRightY)+"]"),se.cropBox!==null&&$e("/CropBox ["+H(se.cropBox.bottomLeftX)+" "+H(se.cropBox.bottomLeftY)+" "+H(se.cropBox.topRightX)+" "+H(se.cropBox.topRightY)+"]"),se.bleedBox!==null&&$e("/BleedBox ["+H(se.bleedBox.bottomLeftX)+" "+H(se.bleedBox.bottomLeftY)+" "+H(se.bleedBox.topRightX)+" "+H(se.bleedBox.topRightY)+"]"),se.trimBox!==null&&$e("/TrimBox ["+H(se.trimBox.bottomLeftX)+" "+H(se.trimBox.bottomLeftY)+" "+H(se.trimBox.topRightX)+" "+H(se.trimBox.topRightY)+"]"),se.artBox!==null&&$e("/ArtBox ["+H(se.artBox.bottomLeftX)+" "+H(se.artBox.bottomLeftY)+" "+H(se.artBox.topRightX)+" "+H(se.artBox.topRightY)+"]"),typeof se.userUnit=="number"&&se.userUnit!==1&&$e("/UserUnit "+se.userUnit),Xt.publish("putPage",{objId:jt,pageContext:wt[Ge],pageNumber:Ge,page:pt}),$e("/Contents "+or+" 0 R"),$e(">>"),$e("endobj");var Nr=pt.join(`
`);return D===F&&(Nr+=`
Q`),Ur(or,!0),cn({data:Nr,filters:qr(),objectId:or}),$e("endobj"),jt},Gi=b.__private__.putPages=function(){var se,Ge,pt=[];for(se=1;se<=Bt;se++)wt[se].objId=gr(),wt[se].contentsObjId=gr();for(se=1;se<=Bt;se++)pt.push(Pn({number:se,data:Qe[se],objId:wt[se].objId,contentsObjId:wt[se].contentsObjId,mediaBox:wt[se].mediaBox,cropBox:wt[se].cropBox,bleedBox:wt[se].bleedBox,trimBox:wt[se].trimBox,artBox:wt[se].artBox,userUnit:wt[se].userUnit,rootDictionaryObjId:si,resourceDictionaryObjId:Hn}));Ur(si,!0),$e("<</Type /Pages");var jt="/Kids [";for(Ge=0;Ge<Bt;Ge++)jt+=pt[Ge]+" 0 R ";$e(jt+"]"),$e("/Count "+Bt),$e(">>"),$e("endobj"),Xt.publish("postPutPages")},pa=function(se){Xt.publish("putFont",{font:se,out:$e,newObject:kt,putStream:cn}),se.isAlreadyPutted!==!0&&(se.objectNumber=kt(),$e("<<"),$e("/Type /Font"),$e("/BaseFont /"+og(se.postScriptName)),$e("/Subtype /Type1"),typeof se.encoding=="string"&&$e("/Encoding /"+se.encoding),$e("/FirstChar 32"),$e("/LastChar 255"),$e(">>"),$e("endobj"))},Ki=function(se){se.objectNumber=kt();var Ge=[];Ge.push({key:"Type",value:"/XObject"}),Ge.push({key:"Subtype",value:"/Form"}),Ge.push({key:"BBox",value:"["+[H(se.x),H(se.y),H(se.x+se.width),H(se.y+se.height)].join(" ")+"]"}),Ge.push({key:"Matrix",value:"["+se.matrix.toString()+"]"});var pt=se.pages[1].join(`
`);cn({data:pt,additionalKeyValues:Ge,objectId:se.objectNumber}),$e("endobj")},wn=function(se,Ge){Ge||(Ge=21);var pt=kt(),jt=(function(Xr,xn){var Ln,ni=[],mi=1/(xn-1);for(Ln=0;Ln<1;Ln+=mi)ni.push(Ln);if(ni.push(1),Xr[0].offset!=0){var ri={offset:0,color:Xr[0].color};Xr.unshift(ri)}if(Xr[Xr.length-1].offset!=1){var Ri={offset:1,color:Xr[Xr.length-1].color};Xr.push(Ri)}for(var pi="",yi=0,ma=0;ma<ni.length;ma++){for(Ln=ni[ma];Ln>Xr[yi+1].offset;)yi++;var Ji=Xr[yi].offset,sa=(Ln-Ji)/(Xr[yi+1].offset-Ji),rs=Xr[yi].color,ks=Xr[yi+1].color;pi+=Me(Math.round((1-sa)*rs[0]+sa*ks[0]).toString(16))+Me(Math.round((1-sa)*rs[1]+sa*ks[1]).toString(16))+Me(Math.round((1-sa)*rs[2]+sa*ks[2]).toString(16))}return pi.trim()})(se.colors,Ge),or=[];or.push({key:"FunctionType",value:"0"}),or.push({key:"Domain",value:"[0.0 1.0]"}),or.push({key:"Size",value:"["+Ge+"]"}),or.push({key:"BitsPerSample",value:"8"}),or.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),or.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),cn({data:jt,additionalKeyValues:or,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pt}),$e("endobj"),se.objectNumber=kt(),$e("<< /ShadingType "+se.type),$e("/ColorSpace /DeviceRGB");var Nr="/Coords ["+H(parseFloat(se.coords[0]))+" "+H(parseFloat(se.coords[1]))+" ";se.type===2?Nr+=H(parseFloat(se.coords[2]))+" "+H(parseFloat(se.coords[3])):Nr+=H(parseFloat(se.coords[2]))+" "+H(parseFloat(se.coords[3]))+" "+H(parseFloat(se.coords[4]))+" "+H(parseFloat(se.coords[5])),$e(Nr+="]"),se.matrix&&$e("/Matrix ["+se.matrix.toString()+"]"),$e("/Function "+pt+" 0 R"),$e("/Extend [true true]"),$e(">>"),$e("endobj")},Ua=function(se,Ge){var pt=gr(),jt=kt();Ge.push({resourcesOid:pt,objectOid:jt}),se.objectNumber=jt;var or=[];or.push({key:"Type",value:"/Pattern"}),or.push({key:"PatternType",value:"1"}),or.push({key:"PaintType",value:"1"}),or.push({key:"TilingType",value:"1"}),or.push({key:"BBox",value:"["+se.boundingBox.map(H).join(" ")+"]"}),or.push({key:"XStep",value:H(se.xStep)}),or.push({key:"YStep",value:H(se.yStep)}),or.push({key:"Resources",value:pt+" 0 R"}),se.matrix&&or.push({key:"Matrix",value:"["+se.matrix.toString()+"]"}),cn({data:se.stream,additionalKeyValues:or,objectId:se.objectNumber}),$e("endobj")},oa=function(se){for(var Ge in se.objectNumber=kt(),$e("<<"),se)switch(Ge){case"opacity":$e("/ca "+ee(se[Ge]));break;case"stroke-opacity":$e("/CA "+ee(se[Ge]))}$e(">>"),$e("endobj")},Di=function(se){Ur(se.resourcesOid,!0),$e("<<"),$e("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Ge in $e("/Font <<"),Be)Be.hasOwnProperty(Ge)&&(v===!1||v===!0&&x.hasOwnProperty(Ge))&&$e("/"+Ge+" "+Be[Ge].objectNumber+" 0 R");$e(">>")})(),(function(){if(Object.keys(mt).length>0){for(var Ge in $e("/Shading <<"),mt)mt.hasOwnProperty(Ge)&&mt[Ge]instanceof Cp&&mt[Ge].objectNumber>=0&&$e("/"+Ge+" "+mt[Ge].objectNumber+" 0 R");Xt.publish("putShadingPatternDict"),$e(">>")}})(),(function(Ge){if(Object.keys(mt).length>0){for(var pt in $e("/Pattern <<"),mt)mt.hasOwnProperty(pt)&&mt[pt]instanceof b.TilingPattern&&mt[pt].objectNumber>=0&&mt[pt].objectNumber<Ge&&$e("/"+pt+" "+mt[pt].objectNumber+" 0 R");Xt.publish("putTilingPatternDict"),$e(">>")}})(se.objectOid),(function(){if(Object.keys(Ot).length>0){var Ge;for(Ge in $e("/ExtGState <<"),Ot)Ot.hasOwnProperty(Ge)&&Ot[Ge].objectNumber>=0&&$e("/"+Ge+" "+Ot[Ge].objectNumber+" 0 R");Xt.publish("putGStateDict"),$e(">>")}})(),(function(){for(var Ge in $e("/XObject <<"),Ir)Ir.hasOwnProperty(Ge)&&Ir[Ge].objectNumber>=0&&$e("/"+Ge+" "+Ir[Ge].objectNumber+" 0 R");Xt.publish("putXobjectDict"),$e(">>")})(),$e(">>"),$e("endobj")},Ra=function(se){De[se.fontName]=De[se.fontName]||{},De[se.fontName][se.fontStyle]=se.id},Ts=function(se,Ge,pt,jt,or){var Nr={id:"F"+(Object.keys(Be).length+1).toString(10),postScriptName:se,fontName:Ge,fontStyle:pt,encoding:jt,isStandardFont:or||!1,metadata:{}};return Xt.publish("addFont",{font:Nr,instance:this}),Be[Nr.id]=Nr,Ra(Nr),Nr.id},bi=b.__private__.pdfEscape=b.pdfEscape=function(se,Ge){return(function(pt,jt){var or,Nr,Xr,xn,Ln,ni,mi,ri,Ri;if(Xr=(jt=jt||{}).sourceEncoding||"Unicode",Ln=jt.outputEncoding,(jt.autoencode||Ln)&&Be[kr].metadata&&Be[kr].metadata[Xr]&&Be[kr].metadata[Xr].encoding&&(xn=Be[kr].metadata[Xr].encoding,!Ln&&Be[kr].encoding&&(Ln=Be[kr].encoding),!Ln&&xn.codePages&&(Ln=xn.codePages[0]),typeof Ln=="string"&&(Ln=xn[Ln]),Ln)){for(mi=!1,ni=[],or=0,Nr=pt.length;or<Nr;or++)(ri=Ln[pt.charCodeAt(or)])?ni.push(String.fromCharCode(ri)):ni.push(pt[or]),ni[or].charCodeAt(0)>>8&&(mi=!0);pt=ni.join("")}for(or=pt.length;mi===void 0&&or!==0;)pt.charCodeAt(or-1)>>8&&(mi=!0),or--;if(!mi)return pt;for(ni=jt.noBOM?[]:[254,255],or=0,Nr=pt.length;or<Nr;or++){if((Ri=(ri=pt.charCodeAt(or))>>8)>>8)throw new Error("Character at position "+or+" of string '"+pt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ni.push(Ri),ni.push(ri-(Ri<<8))}return String.fromCharCode.apply(void 0,ni)})(se,Ge).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ys=b.__private__.beginPage=function(se){Qe[++Bt]=[],wt[Bt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(se[0]),topRightY:Number(se[1])}},io(Bt),ot(Qe[_e])},_o=function(se,Ge){var pt,jt,or;switch(r=Ge||r,typeof se=="string"&&(pt=M(se.toLowerCase()),Array.isArray(pt)&&(jt=pt[0],or=pt[1])),Array.isArray(se)&&(jt=se[0]*Qt,or=se[1]*Qt),isNaN(jt)&&(jt=i[0],or=i[1]),(jt>14400||or>14400)&&(fo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),jt=Math.min(14400,jt),or=Math.min(14400,or)),i=[jt,or],r.substr(0,1)){case"l":or>jt&&(i=[or,jt]);break;case"p":jt>or&&(i=[or,jt])}Ys(i),Or(Rn),$e(ka),wa!==0&&$e(wa+" J"),Ps!==0&&$e(Ps+" j"),Xt.publish("addPage",{pageNumber:Bt})},fi=function(se){se>0&&se<=Bt&&(Qe.splice(se,1),wt.splice(se,1),Bt--,_e>Bt&&(_e=Bt),this.setPage(_e))},io=function(se){se>0&&se<=Bt&&(_e=se)},ps=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Qe.length-1},ho=function(se,Ge,pt){var jt,or=void 0;return pt=pt||{},se=se!==void 0?se:Be[kr].fontName,Ge=Ge!==void 0?Ge:Be[kr].fontStyle,jt=se.toLowerCase(),De[jt]!==void 0&&De[jt][Ge]!==void 0?or=De[jt][Ge]:De[se]!==void 0&&De[se][Ge]!==void 0?or=De[se][Ge]:pt.disableWarning===!1&&fo.warn("Unable to look up font label for font '"+se+"', '"+Ge+"'. Refer to getFontList() for available fonts."),or||pt.noFallback||(or=De.times[Ge])==null&&(or=De.times.normal),or},Ga=b.__private__.putInfo=function(){var se=kt(),Ge=function(jt){return jt};for(var pt in g!==null&&(Ge=Ia.encryptor(se,0)),$e("<<"),$e("/Producer ("+bi(Ge("jsPDF "+ii.version))+")"),ar)ar.hasOwnProperty(pt)&&ar[pt]&&$e("/"+pt.substr(0,1).toUpperCase()+pt.substr(1)+" ("+bi(Ge(ar[pt]))+")");$e("/CreationDate ("+bi(Ge(le))+")"),$e(">>"),$e("endobj")},Zs=b.__private__.putCatalog=function(se){var Ge=(se=se||{}).rootDictionaryObjId||si;switch(kt(),$e("<<"),$e("/Type /Catalog"),$e("/Pages "+Ge+" 0 R"),dr||(dr="fullwidth"),dr){case"fullwidth":$e("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$e("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$e("/OpenAction [3 0 R /Fit]");break;case"original":$e("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pt=""+dr;pt.substr(pt.length-1)==="%"&&(dr=parseInt(dr)/100),typeof dr=="number"&&$e("/OpenAction [3 0 R /XYZ null null "+ee(dr)+"]")}switch(nr||(nr="continuous"),nr){case"continuous":$e("/PageLayout /OneColumn");break;case"single":$e("/PageLayout /SinglePage");break;case"two":case"twoleft":$e("/PageLayout /TwoColumnLeft");break;case"tworight":$e("/PageLayout /TwoColumnRight")}Cr&&$e("/PageMode /"+Cr),Xt.publish("putCatalog"),$e(">>"),$e("endobj")},Da=b.__private__.putTrailer=function(){$e("trailer"),$e("<<"),$e("/Size "+(Le+1)),$e("/Root "+Le+" 0 R"),$e("/Info "+(Le-1)+" 0 R"),g!==null&&$e("/Encrypt "+Ia.oid+" 0 R"),$e("/ID [ <"+fe+"> <"+fe+"> ]"),$e(">>")},Qu=b.__private__.putHeader=function(){$e("%PDF-"+S),$e("%")},Au=b.__private__.putXRef=function(){var se="0000000000";$e("xref"),$e("0 "+(Le+1)),$e("0000000000 65535 f ");for(var Ge=1;Ge<=Le;Ge++)typeof Ue[Ge]=="function"?$e((se+Ue[Ge]()).slice(-10)+" 00000 n "):Ue[Ge]!==void 0?$e((se+Ue[Ge]).slice(-10)+" 00000 n "):$e("0000000000 00000 n ")},ko=b.__private__.buildDocument=function(){var se;Le=0,tt=0,Oe=[],Ue=[],Ze=[],si=gr(),Hn=gr(),ot(Oe),Xt.publish("buildDocument"),Qu(),Gi(),(function(){Xt.publish("putAdditionalObjects");for(var pt=0;pt<Ze.length;pt++){var jt=Ze[pt];Ur(jt.objId,!0),$e(jt.content),$e("endobj")}Xt.publish("postPutAdditionalObjects")})(),se=[],(function(){for(var pt in Be)Be.hasOwnProperty(pt)&&(v===!1||v===!0&&x.hasOwnProperty(pt))&&pa(Be[pt])})(),(function(){var pt;for(pt in Ot)Ot.hasOwnProperty(pt)&&oa(Ot[pt])})(),(function(){for(var pt in Ir)Ir.hasOwnProperty(pt)&&Ki(Ir[pt])})(),(function(pt){var jt;for(jt in mt)mt.hasOwnProperty(jt)&&(mt[jt]instanceof Cp?wn(mt[jt]):mt[jt]instanceof Pg&&Ua(mt[jt],pt))})(se),Xt.publish("putResources"),se.forEach(Di),Di({resourcesOid:Hn,objectOid:Number.MAX_SAFE_INTEGER}),Xt.publish("postPutResources"),g!==null&&(Ia.oid=kt(),$e("<<"),$e("/Filter /Standard"),$e("/V "+Ia.v),$e("/R "+Ia.r),$e("/U <"+Ia.toHexString(Ia.U)+">"),$e("/O <"+Ia.toHexString(Ia.O)+">"),$e("/P "+Ia.P),$e(">>"),$e("endobj")),Ga(),Zs();var Ge=tt;return Au(),Da(),$e("startxref"),$e(""+Ge),$e("%%EOF"),ot(Qe[_e]),Oe.join(`
`)},ms=b.__private__.getBlob=function(se){return new Blob([Wt(se)],{type:"application/pdf"})},Na=b.output=b.__private__.output=(ht=function(se,Ge){switch(typeof(Ge=Ge||{})=="string"?Ge={filename:Ge}:Ge.filename=Ge.filename||"generated.pdf",se){case void 0:return ko();case"save":b.save(Ge.filename);break;case"arraybuffer":return Wt(ko());case"blob":return ms(ko());case"bloburi":case"bloburl":if(Si.URL!==void 0&&typeof Si.URL.createObjectURL=="function")return Si.URL&&Si.URL.createObjectURL(ms(ko()))||void 0;fo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pt="",jt=ko();try{pt=TD(jt)}catch{pt=TD(unescape(encodeURIComponent(jt)))}return"data:application/pdf;filename="+Ge.filename+";base64,"+pt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Si)==="[object Window]"){var or="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ge.pdfObjectUrl&&(or=Ge.pdfObjectUrl,Nr="");var Xr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+or+'"'+Nr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ge)+");<\/script></body></html>",xn=Si.open();return xn!==null&&xn.document.write(Xr),xn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Si)==="[object Window]"){var Ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ge.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ge.filename+'" width="500px" height="400px" /></body></html>',ni=Si.open();if(ni!==null){ni.document.write(Ln);var mi=this;ni.document.documentElement.querySelector("#pdfViewer").onload=function(){ni.document.title=Ge.filename,ni.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mi.output("bloburl"))}}return ni}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Si)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ri='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ge)+'"></iframe></body></html>',Ri=Si.open();if(Ri!==null&&(Ri.document.write(ri),Ri.document.title=Ge.filename),Ri||typeof safari>"u")return Ri;break;case"datauri":case"dataurl":return Si.document.location.href=this.output("datauristring",Ge);default:return null}},ht.foo=function(){try{return ht.apply(this,arguments)}catch(pt){var se=pt.stack||"";~se.indexOf(" at ")&&(se=se.split(" at ")[1]);var Ge="Error in function "+se.split(`
`)[0].split("<")[0]+": "+pt.message;if(!Si.console)throw new Error(Ge);Si.console.error(Ge,pt),Si.alert&&alert(Ge)}},ht.foo.bar=ht,ht.foo),ao=function(se){return Array.isArray(Et)===!0&&Et.indexOf(se)>-1};switch(n){case"pt":Qt=1;break;case"mm":Qt=72/25.4;break;case"cm":Qt=72/2.54;break;case"in":Qt=72;break;case"px":Qt=ao("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qt=12;break;case"ex":Qt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Qt=n}var Ia=null;Pe(),me();var Ks=b.__private__.getPageInfo=b.getPageInfo=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[se].objId,pageNumber:se,pageContext:wt[se]}},Hl=b.__private__.getPageInfoByObjId=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ge in wt)if(wt[Ge].objId===se)break;return Ks(Ge)},Wl=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:wt[_e].objId,pageNumber:_e,pageContext:wt[_e]}};b.addPage=function(){return _o.apply(this,arguments),this},b.setPage=function(){return io.apply(this,arguments),ot.call(this,Qe[_e]),this},b.insertPage=function(se){return this.addPage(),this.movePage(_e,se),this},b.movePage=function(se,Ge){var pt,jt;if(se>Ge){pt=Qe[se],jt=wt[se];for(var or=se;or>Ge;or--)Qe[or]=Qe[or-1],wt[or]=wt[or-1];Qe[Ge]=pt,wt[Ge]=jt,this.setPage(Ge)}else if(se<Ge){pt=Qe[se],jt=wt[se];for(var Nr=se;Nr<Ge;Nr++)Qe[Nr]=Qe[Nr+1],wt[Nr]=wt[Nr+1];Qe[Ge]=pt,wt[Ge]=jt,this.setPage(Ge)}return this},b.deletePage=function(){return fi.apply(this,arguments),this},b.__private__.text=b.text=function(se,Ge,pt,jt,or){var Nr,Xr,xn,Ln,ni,mi,ri,Ri,pi,yi=(jt=jt||{}).scope||this;if(typeof se=="number"&&typeof Ge=="number"&&(typeof pt=="string"||Array.isArray(pt))){var ma=pt;pt=Ge,Ge=se,se=ma}if(arguments[3]instanceof Rr==0?(xn=arguments[4],Ln=arguments[5],Va(ri=arguments[3])==="object"&&ri!==null||(typeof xn=="string"&&(Ln=xn,xn=null),typeof ri=="string"&&(Ln=ri,ri=null),typeof ri=="number"&&(xn=ri,ri=null),jt={flags:ri,angle:xn,align:Ln})):(X("The transform parameter of text() with a Matrix value"),pi=or),isNaN(Ge)||isNaN(pt)||se==null)throw new Error("Invalid arguments passed to jsPDF.text");if(se.length===0)return yi;var Ji,sa="",rs=typeof jt.lineHeightFactor=="number"?jt.lineHeightFactor:gn,ks=yi.internal.scaleFactor;function Xl(Sn){return Sn=Sn.split("	").join(Array(jt.TabLen||9).join(" ")),bi(Sn,ri)}function ns(Sn){for(var T,m=Sn.concat(),y=[],P=m.length;P--;)typeof(T=m.shift())=="string"?y.push(T):Array.isArray(Sn)&&(T.length===1||T[1]===void 0&&T[2]===void 0)?y.push(T[0]):y.push([T[0],T[1],T[2]]);return y}function Yl(Sn,T){var m;if(typeof Sn=="string")m=T(Sn)[0];else if(Array.isArray(Sn)){for(var y,P,j=Sn.concat(),re=[],ye=j.length;ye--;)typeof(y=j.shift())=="string"?re.push(T(y)[0]):Array.isArray(y)&&typeof y[0]=="string"&&(P=T(y[0],y[1],y[2]),re.push([P[0],P[1],P[2]]));m=re}return m}var la=!1,As=!0;if(typeof se=="string")la=!0;else if(Array.isArray(se)){var kl=se.concat();Xr=[];for(var is,Ca=kl.length;Ca--;)(typeof(is=kl.shift())!="string"||Array.isArray(is)&&typeof is[0]!="string")&&(As=!1);la=As}if(la===!1)throw new Error('Type of text must be string or Array. "'+se+'" is not recognized.');typeof se=="string"&&(se=se.match(/[\r?\n]/)?se.split(/\r\n|\r|\n/g):[se]);var oo=at/yi.internal.scaleFactor,Qi=oo*(rs-1);switch(jt.baseline){case"bottom":pt-=Qi;break;case"top":pt+=oo-Qi;break;case"hanging":pt+=oo-2*Qi;break;case"middle":pt+=oo/2-Qi}if((mi=jt.maxWidth||0)>0&&(typeof se=="string"?se=yi.splitTextToSize(se,mi):Object.prototype.toString.call(se)==="[object Array]"&&(se=se.reduce(function(Sn,T){return Sn.concat(yi.splitTextToSize(T,mi))},[]))),Nr={text:se,x:Ge,y:pt,options:jt,mutex:{pdfEscape:bi,activeFontKey:kr,fonts:Be,activeFontSize:at}},Xt.publish("preProcessText",Nr),se=Nr.text,xn=(jt=Nr.options).angle,pi instanceof Rr==0&&xn&&typeof xn=="number"){xn*=Math.PI/180,jt.rotationDirection===0&&(xn=-xn),D===F&&(xn=-xn);var Ms=Math.cos(xn),dl=Math.sin(xn);pi=new Rr(Ms,dl,-dl,Ms,0,0)}else xn&&xn instanceof Rr&&(pi=xn);D!==F||pi||(pi=Te),(ni=jt.charSpace||bn)!==void 0&&(sa+=H(ne(ni))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ri=jt.horizontalScale)!==void 0&&(sa+=H(100*Ri)+` Tz
`),jt.lang;var ua=-1,Zl=jt.renderingMode!==void 0?jt.renderingMode:jt.stroke,fl=yi.internal.getCurrentPageInfo().pageContext;switch(Zl){case 0:case!1:case"fill":ua=0;break;case 1:case!0:case"stroke":ua=1;break;case 2:case"fillThenStroke":ua=2;break;case 3:case"invisible":ua=3;break;case 4:case"fillAndAddForClipping":ua=4;break;case 5:case"strokeAndAddPathForClipping":ua=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ua=6;break;case 7:case"addToPathForClipping":ua=7}var Ls=fl.usedRenderingMode!==void 0?fl.usedRenderingMode:-1;ua!==-1?sa+=ua+` Tr
`:Ls!==-1&&(sa+=`0 Tr
`),ua!==-1&&(fl.usedRenderingMode=ua),Ln=jt.align||"left";var Fa,po=at*rs,Mu=yi.internal.pageSize.getWidth(),Lu=Be[kr];ni=jt.charSpace||bn,mi=jt.maxWidth||0,ri=Object.assign({autoencode:!0,noBOM:!0},jt.flags);var hl=[],pl=function(Sn){return yi.getStringUnitWidth(Sn,{font:Lu,charSpace:ni,fontSize:at,doKerning:!1})*at/ks};if(Object.prototype.toString.call(se)==="[object Array]"){var so;Xr=ns(se),Ln!=="left"&&(Fa=Xr.map(pl));var Xa,Kl=0;if(Ln==="right"){Ge-=Fa[0],se=[],Ca=Xr.length;for(var lo=0;lo<Ca;lo++)lo===0?(Xa=hi(Ge),so=Li(pt)):(Xa=ne(Kl-Fa[lo]),so=-po),se.push([Xr[lo],Xa,so]),Kl=Fa[lo]}else if(Ln==="center"){Ge-=Fa[0]/2,se=[],Ca=Xr.length;for(var ml=0;ml<Ca;ml++)ml===0?(Xa=hi(Ge),so=Li(pt)):(Xa=ne((Kl-Fa[ml])/2),so=-po),se.push([Xr[ml],Xa,so]),Kl=Fa[ml]}else if(Ln==="left"){se=[],Ca=Xr.length;for(var xo=0;xo<Ca;xo++)se.push(Xr[xo])}else if(Ln==="justify"&&Lu.encoding==="Identity-H"){se=[],Ca=Xr.length,mi=mi!==0?mi:Mu;for(var Qs=0,ga=0;ga<Ca;ga++)if(so=ga===0?Li(pt):-po,Xa=ga===0?hi(Ge):Qs,ga<Ca-1){var Rs=ne((mi-Fa[ga])/(Xr[ga].split(" ").length-1)),Ds=Xr[ga].split(" ");se.push([Ds[0]+" ",Xa,so]),Qs=0;for(var qo=1;qo<Ds.length;qo++){var Al=(pl(Ds[qo-1]+" "+Ds[qo])-pl(Ds[qo]))*ks+Rs;qo==Ds.length-1?se.push([Ds[qo],Al,0]):se.push([Ds[qo]+" ",Al,0]),Qs-=Al}}else se.push([Xr[ga],Xa,so]);se.push(["",Qs,0])}else{if(Ln!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(se=[],Ca=Xr.length,mi=mi!==0?mi:Mu,ga=0;ga<Ca;ga++)so=ga===0?Li(pt):-po,Xa=ga===0?hi(Ge):0,ga<Ca-1?hl.push(H(ne((mi-Fa[ga])/(Xr[ga].split(" ").length-1)))):hl.push(0),se.push([Xr[ga],Xa,so])}}(typeof jt.R2L=="boolean"?jt.R2L:ur)===!0&&(se=Yl(se,function(Sn,T,m){return[Sn.split("").reverse().join(""),T,m]})),Nr={text:se,x:Ge,y:pt,options:jt,mutex:{pdfEscape:bi,activeFontKey:kr,fonts:Be,activeFontSize:at}},Xt.publish("postProcessText",Nr),se=Nr.text,Ji=Nr.mutex.isHex||!1;var gu=Be[kr].encoding;gu!=="WinAnsiEncoding"&&gu!=="StandardEncoding"||(se=Yl(se,function(Sn,T,m){return[Xl(Sn),T,m]})),Xr=ns(se),se=[];for(var Ns,Ml,Jl,er=Array.isArray(Xr[0])?1:0,sr="",ln=function(Sn,T,m){var y="";return m instanceof Rr?(m=typeof jt.angle=="number"?un(m,new Rr(1,0,0,1,Sn,T)):un(new Rr(1,0,0,1,Sn,T),m),D===F&&(m=un(new Rr(1,0,0,-1,0,0),m)),y=m.join(" ")+` Tm
`):y=H(Sn)+" "+H(T)+` Td
`,y},yn=0;yn<Xr.length;yn++){switch(sr="",er){case 1:Jl=(Ji?"<":"(")+Xr[yn][0]+(Ji?">":")"),Ns=parseFloat(Xr[yn][1]),Ml=parseFloat(Xr[yn][2]);break;case 0:Jl=(Ji?"<":"(")+Xr[yn]+(Ji?">":")"),Ns=hi(Ge),Ml=Li(pt)}hl!==void 0&&hl[yn]!==void 0&&(sr=hl[yn]+` Tw
`),yn===0?se.push(sr+ln(Ns,Ml,pi)+Jl):er===0?se.push(sr+Jl):er===1&&se.push(sr+ln(Ns,Ml,pi)+Jl)}se=er===0?se.join(` Tj
T* `):se.join(` Tj
`),se+=` Tj
`;var ui=`BT
/`;return ui+=kr+" "+at+` Tf
`,ui+=H(at*rs)+` TL
`,ui+=On+`
`,ui+=sa,ui+=se,$e(ui+="ET"),x[kr]=!0,yi};var K=b.__private__.clip=b.clip=function(se){return $e(se==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return K("evenodd")},b.__private__.discardPath=b.discardPath=function(){return $e("n"),this};var pe=b.__private__.isValidStyle=function(se){var Ge=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(se)!==-1&&(Ge=!0),Ge};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(se){return pe(se)&&(h=se),this};var Ye=b.__private__.getStyle=b.getStyle=function(se){var Ge=h;switch(se){case"D":case"S":Ge="S";break;case"F":Ge="f";break;case"FD":case"DF":Ge="B";break;case"f":case"f*":case"B":case"B*":Ge=se}return Ge},St=b.close=function(){return $e("h"),this};b.stroke=function(){return $e("S"),this},b.fill=function(se){return zt("f",se),this},b.fillEvenOdd=function(se){return zt("f*",se),this},b.fillStroke=function(se){return zt("B",se),this},b.fillStrokeEvenOdd=function(se){return zt("B*",se),this};var zt=function(se,Ge){Va(Ge)==="object"?jr(Ge,se):$e(se)},Rt=function(se){se===null||D===F&&se===void 0||(se=Ye(se),$e(se))};function Jt(se,Ge,pt,jt,or){var Nr=new Pg(Ge||this.boundingBox,pt||this.xStep,jt||this.yStep,this.gState,or||this.matrix);Nr.stream=this.stream;var Xr=se+"$$"+this.cloneIndex+++"$$";return qe(Xr,Nr),Nr}var jr=function(se,Ge){var pt=At[se.key],jt=mt[pt];if(jt instanceof Cp)$e("q"),$e(Kr(Ge)),jt.gState&&b.setGState(jt.gState),$e(se.matrix.toString()+" cm"),$e("/"+pt+" sh"),$e("Q");else if(jt instanceof Pg){var or=new Rr(1,0,0,-1,0,Yi());se.matrix&&(or=or.multiply(se.matrix||Te),pt=Jt.call(jt,se.key,se.boundingBox,se.xStep,se.yStep,or).id),$e("q"),$e("/Pattern cs"),$e("/"+pt+" scn"),jt.gState&&b.setGState(jt.gState),$e(Ge),$e("Q")}},Kr=function(se){switch(se){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Wr=b.moveTo=function(se,Ge){return $e(H(ne(se))+" "+H(ae(Ge))+" m"),this},nn=b.lineTo=function(se,Ge){return $e(H(ne(se))+" "+H(ae(Ge))+" l"),this},Yr=b.curveTo=function(se,Ge,pt,jt,or,Nr){return $e([H(ne(se)),H(ae(Ge)),H(ne(pt)),H(ae(jt)),H(ne(or)),H(ae(Nr)),"c"].join(" ")),this};b.__private__.line=b.line=function(se,Ge,pt,jt,or){if(isNaN(se)||isNaN(Ge)||isNaN(pt)||isNaN(jt)||!pe(or))throw new Error("Invalid arguments passed to jsPDF.line");return D===O?this.lines([[pt-se,jt-Ge]],se,Ge,[1,1],or||"S"):this.lines([[pt-se,jt-Ge]],se,Ge,[1,1]).stroke()},b.__private__.lines=b.lines=function(se,Ge,pt,jt,or,Nr){var Xr,xn,Ln,ni,mi,ri,Ri,pi,yi,ma,Ji,sa;if(typeof se=="number"&&(sa=pt,pt=Ge,Ge=se,se=sa),jt=jt||[1,1],Nr=Nr||!1,isNaN(Ge)||isNaN(pt)||!Array.isArray(se)||!Array.isArray(jt)||!pe(or)||typeof Nr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wr(Ge,pt),Xr=jt[0],xn=jt[1],ni=se.length,ma=Ge,Ji=pt,Ln=0;Ln<ni;Ln++)(mi=se[Ln]).length===2?(ma=mi[0]*Xr+ma,Ji=mi[1]*xn+Ji,nn(ma,Ji)):(ri=mi[0]*Xr+ma,Ri=mi[1]*xn+Ji,pi=mi[2]*Xr+ma,yi=mi[3]*xn+Ji,ma=mi[4]*Xr+ma,Ji=mi[5]*xn+Ji,Yr(ri,Ri,pi,yi,ma,Ji));return Nr&&St(),Rt(or),this},b.path=function(se){for(var Ge=0;Ge<se.length;Ge++){var pt=se[Ge],jt=pt.c;switch(pt.op){case"m":Wr(jt[0],jt[1]);break;case"l":nn(jt[0],jt[1]);break;case"c":Yr.apply(this,jt);break;case"h":St()}}return this},b.__private__.rect=b.rect=function(se,Ge,pt,jt,or){if(isNaN(se)||isNaN(Ge)||isNaN(pt)||isNaN(jt)||!pe(or))throw new Error("Invalid arguments passed to jsPDF.rect");return D===O&&(jt=-jt),$e([H(ne(se)),H(ae(Ge)),H(ne(pt)),H(ne(jt)),"re"].join(" ")),Rt(or),this},b.__private__.triangle=b.triangle=function(se,Ge,pt,jt,or,Nr,Xr){if(isNaN(se)||isNaN(Ge)||isNaN(pt)||isNaN(jt)||isNaN(or)||isNaN(Nr)||!pe(Xr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pt-se,jt-Ge],[or-pt,Nr-jt],[se-or,Ge-Nr]],se,Ge,[1,1],Xr,!0),this},b.__private__.roundedRect=b.roundedRect=function(se,Ge,pt,jt,or,Nr,Xr){if(isNaN(se)||isNaN(Ge)||isNaN(pt)||isNaN(jt)||isNaN(or)||isNaN(Nr)||!pe(Xr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xn=4/3*(Math.SQRT2-1);return or=Math.min(or,.5*pt),Nr=Math.min(Nr,.5*jt),this.lines([[pt-2*or,0],[or*xn,0,or,Nr-Nr*xn,or,Nr],[0,jt-2*Nr],[0,Nr*xn,-or*xn,Nr,-or,Nr],[2*or-pt,0],[-or*xn,0,-or,-Nr*xn,-or,-Nr],[0,2*Nr-jt],[0,-Nr*xn,or*xn,-Nr,or,-Nr]],se+or,Ge,[1,1],Xr,!0),this},b.__private__.ellipse=b.ellipse=function(se,Ge,pt,jt,or){if(isNaN(se)||isNaN(Ge)||isNaN(pt)||isNaN(jt)||!pe(or))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nr=4/3*(Math.SQRT2-1)*pt,Xr=4/3*(Math.SQRT2-1)*jt;return Wr(se+pt,Ge),Yr(se+pt,Ge-Xr,se+Nr,Ge-jt,se,Ge-jt),Yr(se-Nr,Ge-jt,se-pt,Ge-Xr,se-pt,Ge),Yr(se-pt,Ge+Xr,se-Nr,Ge+jt,se,Ge+jt),Yr(se+Nr,Ge+jt,se+pt,Ge+Xr,se+pt,Ge),Rt(or),this},b.__private__.circle=b.circle=function(se,Ge,pt,jt){if(isNaN(se)||isNaN(Ge)||isNaN(pt)||!pe(jt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(se,Ge,pt,pt,jt)},b.setFont=function(se,Ge,pt){return pt&&(Ge=U(Ge,pt)),kr=ho(se,Ge,{disableWarning:!1}),this};var Bn=b.__private__.getFont=b.getFont=function(){return Be[ho.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var se,Ge,pt={};for(se in De)if(De.hasOwnProperty(se))for(Ge in pt[se]=[],De[se])De[se].hasOwnProperty(Ge)&&pt[se].push(Ge);return pt},b.addFont=function(se,Ge,pt,jt,or){var Nr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nr.indexOf(arguments[3])!==-1?or=arguments[3]:arguments[3]&&Nr.indexOf(arguments[3])==-1&&(pt=U(pt,jt)),Ts.call(this,se,Ge,pt,or=or||"Identity-H")};var gn,Rn=e.lineWidth||.200025,Tn=b.__private__.getLineWidth=b.getLineWidth=function(){return Rn},Or=b.__private__.setLineWidth=b.setLineWidth=function(se){return Rn=se,$e(H(ne(se))+" w"),this};b.__private__.setLineDash=ii.API.setLineDash=ii.API.setLineDashPattern=function(se,Ge){if(se=se||[],Ge=Ge||0,isNaN(Ge)||!Array.isArray(se))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return se=se.map(function(pt){return H(ne(pt))}).join(" "),Ge=H(ne(Ge)),$e("["+se+"] "+Ge+" d"),this};var fn=b.__private__.getLineHeight=b.getLineHeight=function(){return at*gn};b.__private__.getLineHeight=b.getLineHeight=function(){return at*gn};var ti=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(se){return typeof(se=se||1.15)=="number"&&(gn=se),this},Ci=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return gn};ti(e.lineHeight);var hi=b.__private__.getHorizontalCoordinate=function(se){return ne(se)},Li=b.__private__.getVerticalCoordinate=function(se){return D===F?se:wt[_e].mediaBox.topRightY-wt[_e].mediaBox.bottomLeftY-ne(se)},Ii=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(se){return H(hi(se))},_n=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(se){return H(Li(se))},ka=e.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return di(ka)},b.__private__.setStrokeColor=b.setDrawColor=function(se,Ge,pt,jt){return ka=Mi({ch1:se,ch2:Ge,ch3:pt,ch4:jt,pdfColorType:"draw",precision:2}),$e(ka),this};var Zn=e.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return di(Zn)},b.__private__.setFillColor=b.setFillColor=function(se,Ge,pt,jt){return Zn=Mi({ch1:se,ch2:Ge,ch3:pt,ch4:jt,pdfColorType:"fill",precision:2}),$e(Zn),this};var On=e.textColor||"0 g",ts=b.__private__.getTextColor=b.getTextColor=function(){return di(On)};b.__private__.setTextColor=b.setTextColor=function(se,Ge,pt,jt){return On=Mi({ch1:se,ch2:Ge,ch3:pt,ch4:jt,pdfColorType:"text",precision:3}),this};var bn=e.charSpace,Js=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(bn||0)};b.__private__.setCharSpace=b.setCharSpace=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bn=se,this};var wa=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(se){var Ge=b.CapJoinStyles[se];if(Ge===void 0)throw new Error("Line cap style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wa=Ge,$e(Ge+" J"),this};var Ps=0;b.__private__.setLineJoin=b.setLineJoin=function(se){var Ge=b.CapJoinStyles[se];if(Ge===void 0)throw new Error("Line join style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ps=Ge,$e(Ge+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(se){if(se=se||0,isNaN(se))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $e(H(ne(se))+" M"),this},b.GState=U_,b.setGState=function(se){(se=typeof se=="string"?Ot[Tt[se]]:Ha(null,se)).equals(Yt)||($e("/"+se.id+" gs"),Yt=se)};var Ha=function(se,Ge){if(!se||!Tt[se]){var pt=!1;for(var jt in Ot)if(Ot.hasOwnProperty(jt)&&Ot[jt].equals(Ge)){pt=!0;break}if(pt)Ge=Ot[jt];else{var or="GS"+(Object.keys(Ot).length+1).toString(10);Ot[or]=Ge,Ge.id=or}return se&&(Tt[se]=Ge.id),Xt.publish("addGState",Ge),Ge}};b.addGState=function(se,Ge){return Ha(se,Ge),this},b.saveGraphicsState=function(){return $e("q"),rt.push({key:kr,size:at,color:On}),this},b.restoreGraphicsState=function(){$e("Q");var se=rt.pop();return kr=se.key,at=se.size,On=se.color,Yt=null,this},b.setCurrentTransformationMatrix=function(se){return $e(se.toString()+" cm"),this},b.comment=function(se){return $e("#"+se),this};var Il=function(se,Ge){var pt=se||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pt},set:function(Nr){isNaN(Nr)||(pt=parseFloat(Nr))}});var jt=Ge||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return jt},set:function(Nr){isNaN(Nr)||(jt=parseFloat(Nr))}});var or="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return or},set:function(Nr){or=Nr.toString()}}),this},zo=function(se,Ge,pt,jt){Il.call(this,se,Ge),this.type="rect";var or=pt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return or},set:function(Xr){isNaN(Xr)||(or=parseFloat(Xr))}});var Nr=jt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nr},set:function(Xr){isNaN(Xr)||(Nr=parseFloat(Xr))}}),this},jo=function(){this.page=Bt,this.currentPage=_e,this.pages=Qe.slice(0),this.pagesContext=wt.slice(0),this.x=Ht,this.y=Ct,this.matrix=Re,this.width=Oa(_e),this.height=Yi(_e),this.outputDestination=Mt,this.id="",this.objectNumber=-1};jo.prototype.restore=function(){Bt=this.page,_e=this.currentPage,wt=this.pagesContext,Qe=this.pages,Ht=this.x,Ct=this.y,Re=this.matrix,Wa(_e,this.width),Sa(_e,this.height),Mt=this.outputDestination};var cl=function(se,Ge,pt,jt,or){Vr.push(new jo),Bt=_e=0,Qe=[],Ht=se,Ct=Ge,Re=or,Ys([pt,jt])};for(var Is in b.beginFormObject=function(se,Ge,pt,jt,or){return cl(se,Ge,pt,jt,or),this},b.endFormObject=function(se){return(function(Ge){if($t[Ge])Vr.pop().restore();else{var pt=new jo,jt="Xo"+(Object.keys(Ir).length+1).toString(10);pt.id=jt,$t[Ge]=jt,Ir[jt]=pt,Xt.publish("addFormObject",pt),Vr.pop().restore()}})(se),this},b.doFormObject=function(se,Ge){var pt=Ir[$t[se]];return $e("q"),$e(Ge.toString()+" cm"),$e("/"+pt.id+" Do"),$e("Q"),this},b.getFormObject=function(se){var Ge=Ir[$t[se]];return{x:Ge.x,y:Ge.y,width:Ge.width,height:Ge.height,matrix:Ge.matrix}},b.save=function(se,Ge){return se=se||"generated.pdf",(Ge=Ge||{}).returnPromise=Ge.returnPromise||!1,Ge.returnPromise===!1?(_p(ms(ko()),se),typeof _p.unload=="function"&&Si.setTimeout&&setTimeout(_p.unload,911),this):new Promise(function(pt,jt){try{var or=_p(ms(ko()),se);typeof _p.unload=="function"&&Si.setTimeout&&setTimeout(_p.unload,911),pt(or)}catch(Nr){jt(Nr.message)}})},ii.API)ii.API.hasOwnProperty(Is)&&(Is==="events"&&ii.API.events.length?(function(se,Ge){var pt,jt,or;for(or=Ge.length-1;or!==-1;or--)pt=Ge[or][0],jt=Ge[or][1],se.subscribe.apply(se,[pt].concat(typeof jt=="function"?[jt]:jt))})(Xt,ii.API.events):b[Is]=ii.API[Is]);var Oa=b.getPageWidth=function(se){return(wt[se=se||_e].mediaBox.topRightX-wt[se].mediaBox.bottomLeftX)/Qt},Wa=b.setPageWidth=function(se,Ge){wt[se].mediaBox.topRightX=Ge*Qt+wt[se].mediaBox.bottomLeftX},Yi=b.getPageHeight=function(se){return(wt[se=se||_e].mediaBox.topRightY-wt[se].mediaBox.bottomLeftY)/Qt},Sa=b.setPageHeight=function(se,Ge){wt[se].mediaBox.topRightY=Ge*Qt+wt[se].mediaBox.bottomLeftY};return b.internal={pdfEscape:bi,getStyle:Ye,getFont:Bn,getFontSize:hr,getCharSpace:Js,getTextColor:ts,getLineHeight:fn,getLineHeightFactor:Ci,getLineWidth:Tn,write:tr,getHorizontalCoordinate:hi,getVerticalCoordinate:Li,getCoordinateString:Ii,getVerticalCoordinateString:_n,collections:{},newObject:kt,newAdditionalObject:Er,newObjectDeferred:gr,newObjectDeferredBegin:Ur,getFilters:qr,putStream:cn,events:Xt,scaleFactor:Qt,pageSize:{getWidth:function(){return Oa(_e)},setWidth:function(se){Wa(_e,se)},getHeight:function(){return Yi(_e)},setHeight:function(se){Sa(_e,se)}},encryptionOptions:g,encryption:Ia,getEncryptor:function(se){return g!==null?Ia.encryptor(se,0):function(Ge){return Ge}},output:Na,getNumberOfPages:ps,pages:Qe,out:$e,f2:ee,f3:G,getPageInfo:Ks,getPageInfoByObjId:Hl,getCurrentPageInfo:Wl,getPDFVersion:I,Point:Il,Rectangle:zo,Matrix:Rr,hasHotfix:ao},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Oa(_e)},set:function(se){Wa(_e,se)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Yi(_e)},set:function(se){Sa(_e,se)},enumerable:!0,configurable:!0}),(function(se){for(var Ge=0,pt=Gt.length;Ge<pt;Ge++){var jt=Ts.call(this,se[Ge][0],se[Ge][1],se[Ge][2],Gt[Ge][3],!0);v===!1&&(x[jt]=!0);var or=se[Ge][0].split("-");Ra({id:jt,fontName:or[0],fontStyle:or[1]||""})}Xt.publish("addFonts",{fonts:Be,dictionary:De})}).call(b,Gt),kr="F1",_o(i,r),Xt.publish("initialized"),b}ag.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},ag.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ag.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},ag.prototype.processOwnerPassword=function(e,t){return _T(bT(t).substr(0,5),e)},ag.prototype.encryptor=function(e,t){var r=bT(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return _T(r,n)}},U_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Va(e)!==Va(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},ii.API={events:[]},ii.version="3.0.2";var hs=ii.API,nI=1,om=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ai=function(e){return e.toFixed(2)},vh=function(e){return e.toFixed(5)};hs.__acroform__={};var Yu=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},AD=function(e){return e*nI},Bd=function(e){var t=new bj,r=Un.internal.getHeight(e)||0,n=Un.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ai(n)),Number(Ai(r))],t},Cse=hs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Ese=hs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Tse=hs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},bs=hs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Tse(e,t-1)},_s=hs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Cse(e,t-1)},xs=hs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ese(e,t-1)},Pse=hs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],o=e[1],l=e[2],a=e[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(o+a)||0,c.upperRight_X=r(i+l)||0,c.upperRight_Y=n(o)||0,[Number(Ai(c.lowerLeft_X)),Number(Ai(c.lowerLeft_Y)),Number(Ai(c.upperRight_X)),Number(Ai(c.upperRight_Y))]},Ise=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=xT(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Ai(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Bd(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},xT=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(ee){return ee.split(`
`)}):i.map(function(ee){return[ee]});var o=r,l=Un.internal.getHeight(e)||0;l=l<0?-l:l;var a=Un.internal.getWidth(e)||0;a=a<0?-a:a;var c=function(ee,G,ne){if(ee+1<i.length){var ae=G+" "+i[ee+1][0];return _b(ae,e,ne).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var h,g,v=_b("3",e,o).height,x=e.multiline?l-o:(l-v)/2,b=x+=2,S=0,I=0,k=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+_b(t,e,o=12).width+", FieldWidth:"+a+`
`;break}for(var M="",O=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var D=!1;if(i[F].length!==1&&k!==i[F].length-1){if((v+2)*(O+2)+2>l)continue e;M+=i[F][k],D=!0,I=F,F--}else{M=(M+=i[F][k]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var q=parseInt(F),z=c(q,M,o),U=F>=i.length-1;if(z&&!U){M+=" ",k=0;continue}if(z||U){if(U)I=q;else if(e.multiline&&(v+2)*(O+2)+2>l)continue e}else{if(!e.multiline||(v+2)*(O+2)+2>l)continue e;I=q}}for(var H="",X=S;X<=I;X++){var ie=i[X];if(e.multiline){if(X===I){H+=ie[k]+" ",k=(k+1)%ie.length;continue}if(X===S){H+=ie[ie.length-1]+" ";continue}}H+=ie[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,g=_b(H,e,o).width,e.textAlign){case"right":h=a-g-2;break;case"center":h=(a-g)/2;break;default:h=2}t+=Ai(h)+" "+Ai(b)+` Td
`,t+="("+om(H)+`) Tj
`,t+=-Ai(h)+` 0 Td
`,b=-(o+2),g=0,S=D?I:I+1,O++,M=""}break}return n.text=t,n.fontSize=o,n},_b=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},kse={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Ase=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Mse=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(yd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(kse)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");nI=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new _j,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&Ase(o,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var a=n[l],c=[],h=a.Rect;if(a.Rect&&(a.Rect=Pse(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Un.createDefaultAppearanceStream(a),Va(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=h,a.hasAppearanceStream&&!a.appearanceStreamContent){var g=Ise(a);c.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(a.appearanceStreamContent){var v="";for(var x in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(x)){var b=a.appearanceStreamContent[x];if(v+="/"+x+" ",v+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var l in b)if(b.hasOwnProperty(l)){var S=b[l];typeof S=="function"&&(S=S.call(i,a)),v+="/"+l+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=b)=="function"&&(S=S.call(i,a)),v+="/"+l+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);v+=">>"}c.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(I,k){for(var M in I)if(I.hasOwnProperty(M)){var O=M,F=I[M];k.internal.newObjectDeferredBegin(F.objId,!0),Va(F)==="object"&&typeof F.putStream=="function"&&F.putStream(),delete I[O]}})(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},vj=hs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(l){return l};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),Va(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+om(n(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},HS=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+om(n(e))+")"},Vd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Vd.prototype.toString=function(){return this.objId+" 0 R"},Vd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Vd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:vj(i,this.objId,this.scope)}):i instanceof Vd?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var bj=function(){Vd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Yu(bj,Vd);var _j=function(){Vd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+om(r(e))+")"}},set:function(r){e=r}})};Yu(_j,Vd);var yd=function e(){Vd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');t=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bs(t,3)},set:function(M){M?this.F=_s(t,3):this.F=xs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');r=M}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(M){n=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(M){n[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(M){n[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(M){n[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(M){n[3]=M}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof G_)return;o="FieldObject"+e.FieldNum++}var M=function(O){return O};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+om(M(o))+")"},set:function(M){o=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(M){o=M}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(M){l=M}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(M){a=M}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(M){c=M}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/nI:h},set:function(M){h=M}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(M){g=M}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof G_||this instanceof Op))return HS(v,this.objId,this.scope)},set:function(M){M=M.toString(),v=M}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof wl==0?HS(x,this.objId,this.scope):x},set:function(M){M=M.toString(),x=this instanceof wl==0?M.substr(0,1)==="("?Gm(M.substr(1,M.length-2)):Gm(M):M}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof wl==1?Gm(x.substr(1,x.length-1)):x},set:function(M){M=M.toString(),x=this instanceof wl==1?"/"+M:M}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof wl==0?HS(b,this.objId,this.scope):b},set:function(M){M=M.toString(),b=this instanceof wl==0?M.substr(0,1)==="("?Gm(M.substr(1,M.length-2)):Gm(M):M}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof wl==1?Gm(b.substr(1,b.length-1)):b},set:function(M){M=M.toString(),b=this instanceof wl==1?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(M){M=!!M,I=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(M){S=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,1)},set:function(M){M?this.Ff=_s(this.Ff,1):this.Ff=xs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,2)},set:function(M){M?this.Ff=_s(this.Ff,2):this.Ff=xs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,3)},set:function(M){M?this.Ff=_s(this.Ff,3):this.Ff=xs(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');k=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(k){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Yu(yd,Vd);var zg=function(){yd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vj(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(o,l,a){a||(a=1);for(var c,h=[];c=l.exec(o);)h.push(c[a]);return h})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,18)},set:function(r){r?this.Ff=_s(this.Ff,18):this.Ff=xs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=_s(this.Ff,19):this.Ff=xs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,20)},set:function(r){r?(this.Ff=_s(this.Ff,20),t.sort()):this.Ff=xs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,22)},set:function(r){r?this.Ff=_s(this.Ff,22):this.Ff=xs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(r){r?this.Ff=_s(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,27)},set:function(r){r?this.Ff=_s(this.Ff,27):this.Ff=xs(this.Ff,27)}}),this.hasAppearanceStream=!1};Yu(zg,yd);var jg=function(){zg.call(this),this.fontName="helvetica",this.combo=!1};Yu(jg,zg);var qg=function(){jg.call(this),this.combo=!0};Yu(qg,jg);var f_=function(){qg.call(this),this.edit=!0};Yu(f_,qg);var wl=function(){yd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,15)},set:function(r){r?this.Ff=_s(this.Ff,15):this.Ff=xs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,16)},set:function(r){r?this.Ff=_s(this.Ff,16):this.Ff=xs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,17)},set:function(r){r?this.Ff=_s(this.Ff,17):this.Ff=xs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(r){r?this.Ff=_s(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+om(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Va(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Yu(wl,yd);var h_=function(){wl.call(this),this.pushButton=!0};Yu(h_,wl);var $g=function(){wl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Yu($g,wl);var G_=function(){var e,t;yd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),n)l.push("/"+o+" ("+om(i(n[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Va(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Un.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yu(G_,yd),$g.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},$g.prototype.createOption=function(e){var t=new G_;return t.Parent=this,t.optionName=e,this.Kids.push(t),Lse.call(this.scope,t),t};var p_=function(){wl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Un.CheckBox.createAppearanceStream()};Yu(p_,wl);var Op=function(){yd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,13)},set:function(t){t?this.Ff=_s(this.Ff,13):this.Ff=xs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,21)},set:function(t){t?this.Ff=_s(this.Ff,21):this.Ff=xs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(t){t?this.Ff=_s(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,24)},set:function(t){t?this.Ff=_s(this.Ff,24):this.Ff=xs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,25)},set:function(t){t?this.Ff=_s(this.Ff,25):this.Ff=xs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(t){t?this.Ff=_s(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yu(Op,yd);var m_=function(){Op.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,14)},set:function(e){e?this.Ff=_s(this.Ff,14):this.Ff=xs(this.Ff,14)}}),this.password=!0};Yu(m_,Op);var Un={CheckBox:{createAppearanceStream:function(){return{N:{On:Un.CheckBox.YesNormal},D:{On:Un.CheckBox.YesPushDown,Off:Un.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Bd(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=xT(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Ai(Un.internal.getWidth(e))+" "+Ai(Un.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ai(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Bd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],o=Un.internal.getHeight(e),l=Un.internal.getWidth(e),a=xT(e,e.caption);return i.push("1 g"),i.push("0 0 "+Ai(l)+" "+Ai(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ai(l-1)+" "+Ai(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Ai(a.fontSize)+" Tf "+n),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Bd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ai(Un.internal.getWidth(e))+" "+Ai(Un.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Un.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Un.RadioButton.Circle.YesNormal,t.D[e]=Un.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Bd(e);t.scope=e.scope;var r=[],n=Un.internal.getWidth(e)<=Un.internal.getHeight(e)?Un.internal.getWidth(e)/4:Un.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Un.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+vh(Un.internal.getWidth(e)/2)+" "+vh(Un.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Bd(e);t.scope=e.scope;var r=[],n=Un.internal.getWidth(e)<=Un.internal.getHeight(e)?Un.internal.getWidth(e)/4:Un.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Un.internal.Bezier_C).toFixed(5)),l=Number((n*Un.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+vh(Un.internal.getWidth(e)/2)+" "+vh(Un.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+vh(Un.internal.getWidth(e)/2)+" "+vh(Un.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Bd(e);t.scope=e.scope;var r=[],n=Un.internal.getWidth(e)<=Un.internal.getHeight(e)?Un.internal.getWidth(e)/4:Un.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Un.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+vh(Un.internal.getWidth(e)/2)+" "+vh(Un.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Un.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Un.RadioButton.Cross.YesNormal,t.D[e]=Un.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Bd(e);t.scope=e.scope;var r=[],n=Un.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Ai(Un.internal.getWidth(e)-2)+" "+Ai(Un.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ai(n.x1.x)+" "+Ai(n.x1.y)+" m"),r.push(Ai(n.x2.x)+" "+Ai(n.x2.y)+" l"),r.push(Ai(n.x4.x)+" "+Ai(n.x4.y)+" m"),r.push(Ai(n.x3.x)+" "+Ai(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Bd(e);t.scope=e.scope;var r=Un.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ai(Un.internal.getWidth(e))+" "+Ai(Un.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ai(Un.internal.getWidth(e)-2)+" "+Ai(Un.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ai(r.x1.x)+" "+Ai(r.x1.y)+" m"),n.push(Ai(r.x2.x)+" "+Ai(r.x2.y)+" l"),n.push(Ai(r.x4.x)+" "+Ai(r.x4.y)+" m"),n.push(Ai(r.x3.x)+" "+Ai(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Bd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ai(Un.internal.getWidth(e))+" "+Ai(Un.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Un.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Un.internal.getWidth(e),r=Un.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Un.internal.getWidth=function(e){var t=0;return Va(e)==="object"&&(t=AD(e.Rect[2])),t},Un.internal.getHeight=function(e){var t=0;return Va(e)==="object"&&(t=AD(e.Rect[3])),t};var Lse=hs.addField=function(e){if(Mse(this,e),!(e instanceof yd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};hs.AcroFormChoiceField=zg,hs.AcroFormListBox=jg,hs.AcroFormComboBox=qg,hs.AcroFormEditBox=f_,hs.AcroFormButton=wl,hs.AcroFormPushButton=h_,hs.AcroFormRadioButton=$g,hs.AcroFormCheckBox=p_,hs.AcroFormTextField=Op,hs.AcroFormPasswordField=m_,hs.AcroFormAppearance=Un,hs.AcroForm={ChoiceField:zg,ListBox:jg,ComboBox:qg,EditBox:f_,Button:wl,PushButton:h_,RadioButton:$g,CheckBox:p_,TextField:Op,PasswordField:m_,Appearance:Un},ii.AcroForm={ChoiceField:zg,ListBox:jg,ComboBox:qg,EditBox:f_,Button:wl,PushButton:h_,RadioButton:$g,CheckBox:p_,TextField:Op,PasswordField:m_,Appearance:Un};ii.AcroForm;function xj(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(ee,G){var ne,ae,le,fe,ke,me=r;if((G=G||r)==="RGBA"||ee.data!==void 0&&ee.data instanceof Uint8ClampedArray&&"height"in ee&&"width"in ee)return"RGBA";if(z(ee))for(ke in n)for(le=n[ke],ne=0;ne<le.length;ne+=1){for(fe=!0,ae=0;ae<le[ne].length;ae+=1)if(le[ne][ae]!==void 0&&le[ne][ae]!==ee[ae]){fe=!1;break}if(fe===!0){me=ke;break}}else for(ke in n)for(le=n[ke],ne=0;ne<le.length;ne+=1){for(fe=!0,ae=0;ae<le[ne].length;ae+=1)if(le[ne][ae]!==void 0&&le[ne][ae]!==ee.charCodeAt(ae)){fe=!1;break}if(fe===!0){me=ke;break}}return me===r&&G!==r&&(me=G),me},o=function ee(G){for(var ne=this.internal.write,ae=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var fe=[];if(fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Image"}),fe.push({key:"Width",value:G.width}),fe.push({key:"Height",value:G.height}),G.colorSpace===M.INDEXED?fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(fe.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===M.DEVICE_CMYK&&fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),fe.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&fe.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var ke="",me=0,Se=G.transparency.length;me<Se;me++)ke+=G.transparency[me]+" "+G.transparency[me]+" ";fe.push({key:"Mask",value:"["+ke+"]"})}G.sMask!==void 0&&fe.push({key:"SMask",value:G.objectId+1+" 0 R"});var we=G.filter!==void 0?["/"+G.filter]:void 0;if(ae({data:G.data,additionalKeyValues:fe,alreadyAppliedFilters:we,objectId:G.objectId}),ne("endobj"),"sMask"in G&&G.sMask!==void 0){var Pe=(G.predictor!=null?"/Predictor "+G.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+G.width,ce={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:Pe,data:G.sMask};"filter"in G&&(ce.filter=G.filter),ee.call(this,ce)}if(G.colorSpace===M.INDEXED){var _e=this.internal.newObject();ae({data:H(new Uint8Array(G.palette)),objectId:_e}),ne("endobj")}},l=function(){var ee=this.internal.collections[t+"images"];for(var G in ee)o.call(this,ee[G])},a=function(){var ee,G=this.internal.collections[t+"images"],ne=this.internal.write;for(var ae in G)ne("/I"+(ee=G[ae]).index,ee.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",a))},h=function(){var ee=this.internal.collections[t+"images"];return c.call(this),ee},g=function(){return Object.keys(this.internal.collections[t+"images"]).length},v=function(ee){return typeof e["process"+ee.toUpperCase()]=="function"},x=function(ee){return Va(ee)==="object"&&ee.nodeType===1},b=function(ee,G){if(ee.nodeName==="IMG"&&ee.hasAttribute("src")){var ne=""+ee.getAttribute("src");if(ne.indexOf("data:image/")===0)return d_(unescape(ne).split("base64,").pop());var ae=e.loadFile(ne,!0);if(ae!==void 0)return ae}if(ee.nodeName==="CANVAS"){if(ee.width===0||ee.height===0)throw new Error("Given canvas must have data. Canvas width: "+ee.width+", height: "+ee.height);var le;switch(G){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;default:le="image/jpeg"}return d_(ee.toDataURL(le,1).split("base64,").pop())}},S=function(ee){var G=this.internal.collections[t+"images"];if(G){for(var ne in G)if(ee===G[ne].alias)return G[ne]}},I=function(ee,G,ne){return ee||G||(ee=-96,G=-96),ee<0&&(ee=-1*ne.width*72/ee/this.internal.scaleFactor),G<0&&(G=-1*ne.height*72/G/this.internal.scaleFactor),ee===0&&(ee=G*ne.width/ne.height),G===0&&(G=ee*ne.height/ne.width),[ee,G]},k=function(ee,G,ne,ae,le,fe){var ke=I.call(this,ne,ae,le),me=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,we=h.call(this);if(ne=ke[0],ae=ke[1],we[le.index]=le,fe){fe*=Math.PI/180;var Pe=Math.cos(fe),ce=Math.sin(fe),_e=function(Me){return Me.toFixed(4)},be=[_e(Pe),_e(ce),_e(-1*ce),_e(Pe),0,0,"cm"]}this.internal.write("q"),fe?(this.internal.write([1,"0","0",1,me(ee),Se(G+ae),"cm"].join(" ")),this.internal.write(be.join(" ")),this.internal.write([me(ne),"0","0",me(ae),"0","0","cm"].join(" "))):this.internal.write([me(ne),"0","0",me(ae),me(ee),Se(G+ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},M=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=e.__addimage__.sHashCode=function(ee){var G,ne,ae=0;if(typeof ee=="string")for(ne=ee.length,G=0;G<ne;G++)ae=(ae<<5)-ae+ee.charCodeAt(G),ae|=0;else if(z(ee))for(ne=ee.byteLength/2,G=0;G<ne;G++)ae=(ae<<5)-ae+ee[G],ae|=0;return ae},D=e.__addimage__.validateStringAsBase64=function(ee){(ee=ee||"").toString().trim();var G=!0;return ee.length===0&&(G=!1),ee.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(ee.substr(0,ee.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ee.substr(-2))===!1&&(G=!1),G},q=e.__addimage__.extractImageFromDataUrl=function(ee){if(ee==null||!(ee=ee.trim()).startsWith("data:"))return null;var G=ee.indexOf(",");return G<0?null:ee.substring(0,G).trim().endsWith("base64")?ee.substring(G+1):null};e.__addimage__.isArrayBuffer=function(ee){return ee instanceof ArrayBuffer};var z=e.__addimage__.isArrayBufferView=function(ee){return ee instanceof Int8Array||ee instanceof Uint8Array||ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array},U=e.__addimage__.binaryStringToUint8Array=function(ee){for(var G=ee.length,ne=new Uint8Array(G),ae=0;ae<G;ae++)ne[ae]=ee.charCodeAt(ae);return ne},H=e.__addimage__.arrayBufferToBinaryString=function(ee){for(var G="",ne=z(ee)?ee:new Uint8Array(ee),ae=0;ae<ne.length;ae+=8192)G+=String.fromCharCode.apply(null,ne.subarray(ae,ae+8192));return G};e.addImage=function(){var ee,G,ne,ae,le,fe,ke,me,Se;if(typeof arguments[1]=="number"?(G=r,ne=arguments[1],ae=arguments[2],le=arguments[3],fe=arguments[4],ke=arguments[5],me=arguments[6],Se=arguments[7]):(G=arguments[1],ne=arguments[2],ae=arguments[3],le=arguments[4],fe=arguments[5],ke=arguments[6],me=arguments[7],Se=arguments[8]),Va(ee=arguments[0])==="object"&&!x(ee)&&"imageData"in ee){var we=ee;ee=we.imageData,G=we.format||G||r,ne=we.x||ne||0,ae=we.y||ae||0,le=we.w||we.width||le,fe=we.h||we.height||fe,ke=we.alias||ke,me=we.compression||me,Se=we.rotation||we.angle||Se}var Pe=this.internal.getFilters();if(me===void 0&&Pe.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(ne)||isNaN(ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var ce=X.call(this,ee,G,ke,me);return k.call(this,ne,ae,le,fe,ce,Se),this};var X=function(ee,G,ne,ae){var le,fe,ke;if(typeof ee=="string"&&i(ee)===r){ee=unescape(ee);var me=ie(ee,!1);(me!==""||(me=e.loadFile(ee,!0))!==void 0)&&(ee=me)}if(x(ee)&&(ee=b(ee,G)),G=i(ee,G),!v(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((ke=ne)==null||ke.length===0)&&(ne=(function(Se){return typeof Se=="string"||z(Se)?F(Se):z(Se.data)?F(Se.data):null})(ee)),(le=S.call(this,ne))||(ee instanceof Uint8Array||G==="RGBA"||(fe=ee,ee=U(ee)),le=this["process"+G.toUpperCase()](ee,g.call(this),ne,(function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in e.image_compression?Se:O.NONE})(ae),fe)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},ie=e.__addimage__.convertBase64ToBinaryString=function(ee,G){G=typeof G!="boolean"||G;var ne,ae="";if(typeof ee=="string"){var le;ne=(le=q(ee))!==null&&le!==void 0?le:ee;try{ae=d_(ne)}catch(fe){if(G)throw D(ne)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ae};e.getImageProperties=function(ee){var G,ne,ae="";if(x(ee)&&(ee=b(ee)),typeof ee=="string"&&i(ee)===r&&((ae=ie(ee,!1))===""&&(ae=e.loadFile(ee)||""),ee=ae),ne=i(ee),!v(ne))throw new Error("addImage does not support files of type '"+ne+"', please ensure that a plugin for '"+ne+"' support is added.");if(ee instanceof Uint8Array||(ee=U(ee)),!(G=this["process"+ne.toUpperCase()](ee)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=ne,G}})(ii.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ii.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,o,l=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),h=r.pageContext.annotations,g=!1,v=0;v<h.length&&!g;v++)switch((n=h[v]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var x=0;x<h.length;x++){n=h[x];var b=this.internal.pdfEscape,S=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(I.objId),O=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+b(M(n.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+b(M(O))+") >>",I.content=o;var F=I.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(I.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+a(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(S(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(S(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var z=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+z+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,o,l){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(r),y:h(n),w:c(r+i),h:h(n+o)},options:l,type:"link"})},e.textWithLink=function(r,n,i,o){var l,a,c=this.getTextWidth(r),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var g=this.splitTextToSize(r,a).length;l=Math.ceil(h*g)}else a=c,l=h;return this.text(r,n,i,o),i+=.2*h,o.align==="center"&&(n-=c/2),o.align==="right"&&(n-=c),this.link(n,i-h,a,l,o),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(ii.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(I){return t[I.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},a=e.__arabicParser__.isArabicEndLetter=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(I){return l(I)&&i.indexOf(I.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length>=1};var h=e.__arabicParser__.arabicLetterHasFinalForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length==4},v=e.__arabicParser__.resolveLigatures=function(I){var k=0,M=r,O="",F=0;for(k=0;k<I.length;k+=1)M[I.charCodeAt(k)]!==void 0?(F++,typeof(M=M[I.charCodeAt(k)])=="number"&&(O+=String.fromCharCode(M),M=r,F=0),k===I.length-1&&(M=r,O+=I.charAt(k-(F-1)),k-=F-1,F=0)):(M=r,O+=I.charAt(k-F),k-=F,F=0);return O};e.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&n[I.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(I,k,M){return l(I)?o(I)===!1?-1:!h(I)||!l(k)&&!l(M)||!l(M)&&a(k)||a(I)&&!l(k)||a(I)&&c(k)||a(I)&&a(k)?0:g(I)&&l(k)&&!a(k)&&l(M)&&h(M)?3:a(I)||!l(M)?1:2:-1},b=function(I){var k=0,M=0,O=0,F="",D="",q="",z=(I=I||"").split("\\s+"),U=[];for(k=0;k<z.length;k+=1){for(U.push(""),M=0;M<z[k].length;M+=1)F=z[k][M],D=z[k][M-1],q=z[k][M+1],l(F)?(O=x(F,D,q),U[k]+=O!==-1?String.fromCharCode(t[F.charCodeAt(0)][O]):F):U[k]+=F;U[k]=v(U[k])}return U.join(" ")},S=e.__arabicParser__.processArabic=e.processArabic=function(){var I,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(k)){var O=0;for(M=[],O=0;O<k.length;O+=1)Array.isArray(k[O])?M.push([b(k[O][0]),k[O][1],k[O][2]]):M.push([b(k[O])]);I=M}else I=b(k);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};e.events.push(["preProcessText",S])})(ii.API),ii.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(a){l=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(ii.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(I){c=I}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(I){h=I}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(I){g=I}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(I){v=I}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(I){x=I}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(I){b=I}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(I){S=I}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,h){n.call(this);var g=(h=h||{}).fontSize||this.getFontSize(),v=h.font||this.getFont(),x=h.scaleFactor||this.internal.scaleFactor,b=0,S=0,I=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var M=h.maxWidth;M>0?typeof c=="string"?c=this.splitTextToSize(c,M):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(F,D){return F.concat(k.splitTextToSize(D,M))},[])):c=Array.isArray(c)?c:[c];for(var O=0;O<c.length;O++)b<(I=this.getStringUnitWidth(c[O],{font:v})*g)&&(b=I);return b!==0&&(S=c.length),{w:b/=x,h:Math.max((S*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var h=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=v.top,b&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-g,c.y+g,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+g,{align:"center",baseline:"top",maxWidth:c.width-g-g}):this.text(c.text,c.x+g,c.y+g,{align:"left",baseline:"top",maxWidth:c.width-g-g})),this.internal.__cell__.lastCell=c,this};e.table=function(c,h,g,v,x){if(n.call(this),!g)throw new Error("No data for PDF table.");var b,S,I,k,M=[],O=[],F=[],D={},q={},z=[],U=[],H=(x=x||{}).autoSize||!1,X=x.printHeaders!==!1,ie=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,ee=x.margins||Object.assign({width:this.getPageWidth()},t),G=typeof x.padding=="number"?x.padding:3,ne=x.headerBackgroundColor||"#c8c8c8",ae=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=ee,this.internal.__cell__.table_font_size=ie,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=ne,this.internal.__cell__.headerTextColor=ae,this.setFontSize(ie),v==null)O=M=Object.keys(g[0]),F=M.map(function(){return"left"});else if(Array.isArray(v)&&Va(v[0])==="object")for(M=v.map(function(we){return we.name}),O=v.map(function(we){return we.prompt||we.name||""}),F=v.map(function(we){return we.align||"left"}),b=0;b<v.length;b+=1)q[v[b].name]=.7499990551181103*v[b].width;else Array.isArray(v)&&typeof v[0]=="string"&&(O=M=v,F=M.map(function(){return"left"}));if(H||Array.isArray(v)&&typeof v[0]=="string")for(b=0;b<M.length;b+=1){for(D[k=M[b]]=g.map(function(we){return we[k]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(O[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=D[k],this.setFont(void 0,"normal"),I=0;I<S.length;I+=1)z.push(this.getTextDimensions(S[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[k]=Math.max.apply(null,z)+G+G,z=[]}if(X){var le={};for(b=0;b<M.length;b+=1)le[M[b]]={},le[M[b]].text=O[b],le[M[b]].align=F[b];var fe=a.call(this,le,q);U=M.map(function(we){return new o(c,h,q[we],fe,le[we].text,void 0,le[we].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ke=v.reduce(function(we,Pe){return we[Pe.name]=Pe.align,we},{});for(b=0;b<g.length;b+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:b,data:g[b]},this);var me=a.call(this,g[b],q);for(I=0;I<M.length;I+=1){var Se=g[b][M[I]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:b,col:I,data:Se},this),l.call(this,new o(c,h,q[M[I]],me,Se,b+2,ke[M[I]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var a=function(c,h){var g=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(b){var S=c[b];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,h[b]-g-g)},this).map(function(b){return this.getLineHeightFactor()*b.length*v/x+g+g},this).reduce(function(b,S){return Math.max(b,S)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,h){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){g=this.internal.__cell__.tableHeaderRow[b].clone(),h&&(g.y=this.internal.__cell__.margins.top||0,x.push(g)),g.lineNumber=c;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,g),this.setTextColor(S)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),r=!1}})(ii.API);var wj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Sj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],wT=xj(Sj),Cj=[100,200,300,400,500,600,700,800,900],Rse=xj(Cj);function WS(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(o){return wj[o=o||"normal"]?o:"normal"})(e.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(e.weight),i=(function(o){return typeof wT[o=o||"normal"]=="number"?o:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function MD(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var Dse={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},LD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function RD(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function DD(e){return e.trimLeft()}function Nse(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Ose(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var xb,ND,OD,Hm,wb,FD,BD,zD,XS=["times"];function jD(e,t,r,n){var i=4,o=$D;switch(n){case ii.API.image_compression.FAST:i=1,o=qD;break;case ii.API.image_compression.MEDIUM:i=6,o=VD;break;case ii.API.image_compression.SLOW:i=9,o=UD}e=(function(a,c,h,g){for(var v,x=a.length/c,b=new Uint8Array(a.length+x),S=[Fse,qD,$D,VD,UD],I=0;I<x;I+=1){var k=I*c,M=a.subarray(k,k+c);if(g)b.set(g(M,h,v),k+I);else{for(var O=S.length,F=[],D=0;D<O;D+=1)F[D]=S[D](M,h,v);var q=zse(F.concat());b.set(F[q],k+I)}v=M}return b})(e,t,r,o);var l=mT(e,{level:i});return ii.API.__addimage__.arrayBufferToBinaryString(l)}function Fse(e){var t=Array.apply([],e);return t.unshift(0),t}function qD(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var o=e[i-t]||0;n[i+1]=e[i]-o+256&255}return n}function $D(e,t,r){var n=e.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var l=r&&r[o]||0;i[o+1]=e[o]-l+256&255}return i}function VD(e,t,r){var n=e.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var l=e[o-t]||0,a=r&&r[o]||0;i[o+1]=e[o]+256-(l+a>>>1)&255}return i}function UD(e,t,r){var n=e.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var l=Bse(e[o-t]||0,r&&r[o]||0,r&&r[o-t]||0);i[o+1]=e[o]-l+256&255}return i}function Bse(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),o=Math.abs(e+t-r-r);return n<=i&&n<=o?e:i<=o?t:r}function zse(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function YS(e,t,r){var n=t*r,i=Math.floor(n/8),o=16-(n-8*i+r),l=(1<<r)-1;return Ej(e,i)>>o&l}function GD(e,t,r,n){var i=r*n,o=Math.floor(i/8),l=16-(i-8*o+n),a=(1<<n)-1,c=(t&a)<<l;(function(h,g,v){if(g+1<h.byteLength)h.setUint16(g,v,!1);else{var x=v>>8&255;h.setUint8(g,x)}})(e,o,Ej(e,o)&~(a<<l)&65535|c)}function Ej(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function jse(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,l=1<<1+(7&i);e[t++],e[t++];var a=null,c=null;o&&(a=t,c=l,t+=3*l);var h=!0,g=[],v=0,x=null,b=0,S=null;for(this.width=r,this.height=n;h&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,S=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var I=e[t++];v=e[t++]|e[t++]<<8,x=e[t++],1&I||(x=null),b=I>>2&7,t++;break;case 254:for(;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,M=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,D=e[t++],q=D>>6&1,z=1<<1+(7&D),U=a,H=c,X=!1;D>>7&&(X=!0,U=t,H=z,t+=3*z);var ie=t;for(t++;;){var ee;if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}g.push({x:k,y:M,width:O,height:F,has_local_palette:X,palette_offset:U,palette_size:H,data_offset:ie,data_length:t-ie,transparent_index:x,interlaced:!!q,delay:v,disposal:b});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return S},this.frameInfo=function(G){if(G<0||G>=g.length)throw new Error("Frame index out of range.");return g[G]},this.decodeAndBlitFrameBGRA=function(G,ne){var ae=this.frameInfo(G),le=ae.width*ae.height,fe=new Uint8Array(le);HD(e,ae.data_offset,fe,le);var ke=ae.palette_offset,me=ae.transparent_index;me===null&&(me=256);var Se=ae.width,we=r-Se,Pe=Se,ce=4*(ae.y*r+ae.x),_e=4*((ae.y+ae.height)*r+ae.x),be=ce,Me=4*we;ae.interlaced===!0&&(Me+=4*r*7);for(var Le=8,Ue=0,Oe=fe.length;Ue<Oe;++Ue){var tt=fe[Ue];if(Pe===0&&(Pe=Se,(be+=Me)>=_e&&(Me=4*we+4*r*(Le-1),be=ce+(Se+we)*(Le<<1),Le>>=1)),tt===me)be+=4;else{var Ze=e[ke+3*tt],Qe=e[ke+3*tt+1],Ie=e[ke+3*tt+2];ne[be++]=Ie,ne[be++]=Qe,ne[be++]=Ze,ne[be++]=255}--Pe}},this.decodeAndBlitFrameRGBA=function(G,ne){var ae=this.frameInfo(G),le=ae.width*ae.height,fe=new Uint8Array(le);HD(e,ae.data_offset,fe,le);var ke=ae.palette_offset,me=ae.transparent_index;me===null&&(me=256);var Se=ae.width,we=r-Se,Pe=Se,ce=4*(ae.y*r+ae.x),_e=4*((ae.y+ae.height)*r+ae.x),be=ce,Me=4*we;ae.interlaced===!0&&(Me+=4*r*7);for(var Le=8,Ue=0,Oe=fe.length;Ue<Oe;++Ue){var tt=fe[Ue];if(Pe===0&&(Pe=Se,(be+=Me)>=_e&&(Me=4*we+4*r*(Le-1),be=ce+(Se+we)*(Le<<1),Le>>=1)),tt===me)be+=4;else{var Ze=e[ke+3*tt],Qe=e[ke+3*tt+1],Ie=e[ke+3*tt+2];ne[be++]=Ze,ne[be++]=Qe,ne[be++]=Ie,ne[be++]=255}--Pe}}}function HD(e,t,r,n){for(var i=e[t++],o=1<<i,l=o+1,a=l+1,c=i+1,h=(1<<c)-1,g=0,v=0,x=0,b=e[t++],S=new Int32Array(4096),I=null;;){for(;g<16&&b!==0;)v|=e[t++]<<g,g+=8,b===1?b=e[t++]:--b;if(g<c)break;var k=v&h;if(v>>=c,g-=c,k!==o){if(k===l)break;for(var M=k<a?k:I,O=0,F=M;F>o;)F=S[F]>>8,++O;var D=F;if(x+O+(M!==k?1:0)>n)return void fo.log("Warning, gif stream longer than expected.");r[x++]=D;var q=x+=O;for(M!==k&&(r[x++]=D),F=M;O--;)F=S[F],r[--q]=255&F,F>>=8;I!==null&&a<4096&&(S[a++]=I<<8|D,a>=h+1&&c<12&&(++c,h=h<<1|1)),I=k}else a=l+1,h=(1<<(c=i+1))-1,I=null}return x!==n&&fo.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ZS(e){var t,r,n,i,o,l=Math.floor,a=new Array(64),c=new Array(64),h=new Array(64),g=new Array(64),v=new Array(65535),x=new Array(65535),b=new Array(64),S=new Array(64),I=[],k=0,M=7,O=new Array(64),F=new Array(64),D=new Array(64),q=new Array(256),z=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ee=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ne=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function fe(ce,_e){for(var be=0,Me=0,Le=new Array,Ue=1;Ue<=16;Ue++){for(var Oe=1;Oe<=ce[Ue];Oe++)Le[_e[Me]]=[],Le[_e[Me]][0]=be,Le[_e[Me]][1]=Ue,Me++,be++;be*=2}return Le}function ke(ce){for(var _e=ce[0],be=ce[1]-1;be>=0;)_e&1<<be&&(k|=1<<M),be--,--M<0&&(k==255?(me(255),me(0)):me(k),M=7,k=0)}function me(ce){I.push(ce)}function Se(ce){me(ce>>8&255),me(255&ce)}function we(ce,_e,be,Me,Le){for(var Ue,Oe=Le[0],tt=Le[240],Ze=(function(at,dr){var hr,ur,Cr,br,nr,lr,Pr,ar,kr,Qt,Ht=0;for(kr=0;kr<8;++kr){hr=at[Ht],ur=at[Ht+1],Cr=at[Ht+2],br=at[Ht+3],nr=at[Ht+4],lr=at[Ht+5],Pr=at[Ht+6];var Ct=hr+(ar=at[Ht+7]),Re=hr-ar,Be=ur+Pr,De=ur-Pr,rt=Cr+lr,mt=Cr-lr,At=br+nr,Ot=br-nr,Tt=Ct+At,Yt=Ct-At,Bt=Be+rt,wt=Be-rt;at[Ht]=Tt+Bt,at[Ht+4]=Tt-Bt;var Xt=.707106781*(wt+Yt);at[Ht+2]=Yt+Xt,at[Ht+6]=Yt-Xt;var Et=.382683433*((Tt=Ot+mt)-(wt=De+Re)),Ir=.5411961*Tt+Et,$t=1.306562965*wt+Et,Vr=.707106781*(Bt=mt+De),Rr=Re+Vr,un=Re-Vr;at[Ht+5]=un+Ir,at[Ht+3]=un-Ir,at[Ht+1]=Rr+$t,at[Ht+7]=Rr-$t,Ht+=8}for(Ht=0,kr=0;kr<8;++kr){hr=at[Ht],ur=at[Ht+8],Cr=at[Ht+16],br=at[Ht+24],nr=at[Ht+32],lr=at[Ht+40],Pr=at[Ht+48];var Te=hr+(ar=at[Ht+56]),qe=hr-ar,ht=ur+Pr,kt=ur-Pr,gr=Cr+lr,Ur=Cr-lr,Er=br+nr,si=br-nr,Hn=Te+Er,di=Te-Er,Mi=ht+gr,qr=ht-gr;at[Ht]=Hn+Mi,at[Ht+32]=Hn-Mi;var cn=.707106781*(qr+di);at[Ht+16]=di+cn,at[Ht+48]=di-cn;var Pn=.382683433*((Hn=si+Ur)-(qr=kt+qe)),Gi=.5411961*Hn+Pn,pa=1.306562965*qr+Pn,Ki=.707106781*(Mi=Ur+kt),wn=qe+Ki,Ua=qe-Ki;at[Ht+40]=Ua+Gi,at[Ht+24]=Ua-Gi,at[Ht+8]=wn+pa,at[Ht+56]=wn-pa,Ht++}for(kr=0;kr<64;++kr)Qt=at[kr]*dr[kr],b[kr]=Qt>0?Qt+.5|0:Qt-.5|0;return b})(ce,_e),Qe=0;Qe<64;++Qe)S[U[Qe]]=Ze[Qe];var Ie=S[0]-be;be=S[0],Ie==0?ke(Me[0]):(ke(Me[x[Ue=32767+Ie]]),ke(v[Ue]));for(var Mt=63;Mt>0&&S[Mt]==0;)Mt--;if(Mt==0)return ke(Oe),be;for(var ot,$e=1;$e<=Mt;){for(var tr=$e;S[$e]==0&&$e<=Mt;)++$e;var Wt=$e-tr;if(Wt>=16){ot=Wt>>4;for(var Gt=1;Gt<=ot;++Gt)ke(tt);Wt&=15}Ue=32767+S[$e],ke(Le[(Wt<<4)+x[Ue]]),ke(v[Ue]),$e++}return Mt!=63&&ke(Oe),be}function Pe(ce){ce=Math.min(Math.max(ce,1),100),o!=ce&&((function(_e){for(var be=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Me=0;Me<64;Me++){var Le=l((be[Me]*_e+50)/100);Le=Math.min(Math.max(Le,1),255),a[U[Me]]=Le}for(var Ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Oe=0;Oe<64;Oe++){var tt=l((Ue[Oe]*_e+50)/100);tt=Math.min(Math.max(tt,1),255),c[U[Oe]]=tt}for(var Ze=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qe=0,Ie=0;Ie<8;Ie++)for(var Mt=0;Mt<8;Mt++)h[Qe]=1/(a[U[Qe]]*Ze[Ie]*Ze[Mt]*8),g[Qe]=1/(c[U[Qe]]*Ze[Ie]*Ze[Mt]*8),Qe++})(ce<50?Math.floor(5e3/ce):Math.floor(200-2*ce)),o=ce)}this.encode=function(ce,_e){_e&&Pe(_e),I=new Array,k=0,M=7,Se(65496),Se(65504),Se(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Se(1),Se(1),me(0),me(0),(function(){Se(65499),Se(132),me(0);for(var ur=0;ur<64;ur++)me(a[ur]);me(1);for(var Cr=0;Cr<64;Cr++)me(c[Cr])})(),(function(ur,Cr){Se(65472),Se(17),me(8),Se(Cr),Se(ur),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(ce.width,ce.height),(function(){Se(65476),Se(418),me(0);for(var ur=0;ur<16;ur++)me(H[ur+1]);for(var Cr=0;Cr<=11;Cr++)me(X[Cr]);me(16);for(var br=0;br<16;br++)me(ie[br+1]);for(var nr=0;nr<=161;nr++)me(ee[nr]);me(1);for(var lr=0;lr<16;lr++)me(G[lr+1]);for(var Pr=0;Pr<=11;Pr++)me(ne[Pr]);me(17);for(var ar=0;ar<16;ar++)me(ae[ar+1]);for(var kr=0;kr<=161;kr++)me(le[kr])})(),Se(65498),Se(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var be=0,Me=0,Le=0;k=0,M=7,this.encode.displayName="_encode_";for(var Ue,Oe,tt,Ze,Qe,Ie,Mt,ot,$e,tr=ce.data,Wt=ce.width,Gt=ce.height,at=4*Wt,dr=0;dr<Gt;){for(Ue=0;Ue<at;){for(Qe=at*dr+Ue,Mt=-1,ot=0,$e=0;$e<64;$e++)Ie=Qe+(ot=$e>>3)*at+(Mt=4*(7&$e)),dr+ot>=Gt&&(Ie-=at*(dr+1+ot-Gt)),Ue+Mt>=at&&(Ie-=Ue+Mt-at+4),Oe=tr[Ie++],tt=tr[Ie++],Ze=tr[Ie++],O[$e]=(z[Oe]+z[tt+256|0]+z[Ze+512|0]>>16)-128,F[$e]=(z[Oe+768|0]+z[tt+1024|0]+z[Ze+1280|0]>>16)-128,D[$e]=(z[Oe+1280|0]+z[tt+1536|0]+z[Ze+1792|0]>>16)-128;be=we(O,h,be,t,n),Me=we(F,g,Me,r,i),Le=we(D,g,Le,r,i),Ue+=32}dr+=8}if(M>=0){var hr=[];hr[1]=M+1,hr[0]=(1<<M+1)-1,ke(hr)}return Se(65497),new Uint8Array(I)},e=e||50,(function(){for(var ce=String.fromCharCode,_e=0;_e<256;_e++)q[_e]=ce(_e)})(),t=fe(H,X),r=fe(G,ne),n=fe(ie,ee),i=fe(ae,le),(function(){for(var ce=1,_e=2,be=1;be<=15;be++){for(var Me=ce;Me<_e;Me++)x[32767+Me]=be,v[32767+Me]=[],v[32767+Me][1]=be,v[32767+Me][0]=Me;for(var Le=-(_e-1);Le<=-ce;Le++)x[32767+Le]=be,v[32767+Le]=[],v[32767+Le][1]=be,v[32767+Le][0]=_e-1+Le;ce<<=1,_e<<=1}})(),(function(){for(var ce=0;ce<256;ce++)z[ce]=19595*ce,z[ce+256|0]=38470*ce,z[ce+512|0]=7471*ce+32768,z[ce+768|0]=-11059*ce,z[ce+1024|0]=-21709*ce,z[ce+1280|0]=32768*ce+8421375,z[ce+1536|0]=-27439*ce,z[ce+1792|0]=-5329*ce})(),Pe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function td(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function WD(e){function t(X){if(!X)throw Error("assert :P")}function r(X,ie,ee){for(var G=0;4>G;G++)if(X[ie+G]!=ee.charCodeAt(G))return!0;return!1}function n(X,ie,ee,G,ne){for(var ae=0;ae<ne;ae++)X[ie+ae]=ee[G+ae]}function i(X,ie,ee,G){for(var ne=0;ne<G;ne++)X[ie+ne]=ee}function o(X){return new Int32Array(X)}function l(X,ie){for(var ee=[],G=0;G<X;G++)ee.push(new ie);return ee}function a(X,ie){var ee=[];return(function G(ne,ae,le){for(var fe=le[ae],ke=0;ke<fe&&(ne.push(le.length>ae+1?[]:new ie),!(le.length<ae+1));ke++)G(ne[ke],ae+1,le)})(ee,0,X),ee}var c=function(){var X=this;function ie($,Y){for(var he=1<<Y-1>>>0;$&he;)he>>>=1;return he?($&he-1)+he:$}function ee($,Y,he,Ee,He){t(!(Ee%he));do $[Y+(Ee-=he)]=He;while(0<Ee)}function G($,Y,he,Ee,He){if(t(2328>=He),512>=He)var Je=o(512);else if((Je=o(He))==null)return 0;return(function(et,it,dt,bt,_t,Sr){var xt,ir,cr=it,Dr=1<<dt,xr=o(16),yr=o(16);for(t(_t!=0),t(bt!=null),t(et!=null),t(0<dt),ir=0;ir<_t;++ir){if(15<bt[ir])return 0;++xr[bt[ir]]}if(xr[0]==_t)return 0;for(yr[1]=0,xt=1;15>xt;++xt){if(xr[xt]>1<<xt)return 0;yr[xt+1]=yr[xt]+xr[xt]}for(ir=0;ir<_t;++ir)xt=bt[ir],0<bt[ir]&&(Sr[yr[xt]++]=ir);if(yr[15]==1)return(bt=new ne).g=0,bt.value=Sr[0],ee(et,cr,1,Dr,bt),Dr;var Fr,an=-1,Zr=Dr-1,Wn=0,Fn=1,wi=1,zn=1<<dt;for(ir=0,xt=1,_t=2;xt<=dt;++xt,_t<<=1){if(Fn+=wi<<=1,0>(wi-=xr[xt]))return 0;for(;0<xr[xt];--xr[xt])(bt=new ne).g=xt,bt.value=Sr[ir++],ee(et,cr+Wn,_t,zn,bt),Wn=ie(Wn,xt)}for(xt=dt+1,_t=2;15>=xt;++xt,_t<<=1){if(Fn+=wi<<=1,0>(wi-=xr[xt]))return 0;for(;0<xr[xt];--xr[xt]){if(bt=new ne,(Wn&Zr)!=an){for(cr+=zn,Fr=1<<(an=xt)-dt;15>an&&!(0>=(Fr-=xr[an]));)++an,Fr<<=1;Dr+=zn=1<<(Fr=an-dt),et[it+(an=Wn&Zr)].g=Fr+dt,et[it+an].value=cr-it-an}bt.g=xt-dt,bt.value=Sr[ir++],ee(et,cr+(Wn>>dt),_t,zn,bt),Wn=ie(Wn,xt)}}return Fn!=2*yr[15]-1?0:Dr})($,Y,he,Ee,He,Je)}function ne(){this.value=this.g=0}function ae(){this.value=this.g=0}function le(){this.G=l(5,ne),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(lo,ae)}function fe($,Y,he,Ee){t($!=null),t(Y!=null),t(2147483648>Ee),$.Ca=254,$.I=0,$.b=-8,$.Ka=0,$.oa=Y,$.pa=he,$.Jd=Y,$.Yc=he+Ee,$.Zc=4<=Ee?he+Ee-4+1:he,Oe($)}function ke($,Y){for(var he=0;0<Y--;)he|=Ze($,128)<<Y;return he}function me($,Y){var he=ke($,Y);return tt($)?-he:he}function Se($,Y,he,Ee){var He,Je=0;for(t($!=null),t(Y!=null),t(4294967288>Ee),$.Sb=Ee,$.Ra=0,$.u=0,$.h=0,4<Ee&&(Ee=4),He=0;He<Ee;++He)Je+=Y[he+He]<<8*He;$.Ra=Je,$.bb=Ee,$.oa=Y,$.pa=he}function we($){for(;8<=$.u&&$.bb<$.Sb;)$.Ra>>>=8,$.Ra+=$.oa[$.pa+$.bb]<<Qs-8>>>0,++$.bb,$.u-=8;Me($)&&($.h=1,$.u=0)}function Pe($,Y){if(t(0<=Y),!$.h&&Y<=xo){var he=be($)&ml[Y];return $.u+=Y,we($),he}return $.h=1,$.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _e(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function be($){return $.Ra>>>($.u&Qs-1)>>>0}function Me($){return t($.bb<=$.Sb),$.h||$.bb==$.Sb&&$.u>Qs}function Le($,Y){$.u=Y,$.h=Me($)}function Ue($){$.u>=ga&&(t($.u>=ga),we($))}function Oe($){t($!=null&&$.oa!=null),$.pa<$.Zc?($.I=($.oa[$.pa++]|$.I<<8)>>>0,$.b+=8):(t($!=null&&$.oa!=null),$.pa<$.Yc?($.b+=8,$.I=$.oa[$.pa++]|$.I<<8):$.Ka?$.b=0:($.I<<=8,$.b+=8,$.Ka=1))}function tt($){return ke($,1)}function Ze($,Y){var he=$.Ca;0>$.b&&Oe($);var Ee=$.b,He=he*Y>>>8,Je=($.I>>>Ee>He)+0;for(Je?(he-=He,$.I-=He+1<<Ee>>>0):he=He+1,Ee=he,He=0;256<=Ee;)He+=8,Ee>>=8;return Ee=7^He+Rs[Ee],$.b-=Ee,$.Ca=(he<<Ee)-1,Je}function Qe($,Y,he){$[Y+0]=he>>24&255,$[Y+1]=he>>16&255,$[Y+2]=he>>8&255,$[Y+3]=255&he}function Ie($,Y){return $[Y+0]|$[Y+1]<<8}function Mt($,Y){return Ie($,Y)|$[Y+2]<<16}function ot($,Y){return Ie($,Y)|Ie($,Y+2)<<16}function $e($,Y){var he=1<<Y;return t($!=null),t(0<Y),$.X=o(he),$.X==null?0:($.Mb=32-Y,$.Xa=Y,1)}function tr($,Y){t($!=null),t(Y!=null),t($.Xa==Y.Xa),n(Y.X,0,$.X,0,1<<Y.Xa)}function Wt(){this.X=[],this.Xa=this.Mb=0}function Gt($,Y,he,Ee){t(he!=null),t(Ee!=null);var He=he[0],Je=Ee[0];return He==0&&(He=($*Je+Y/2)/Y),Je==0&&(Je=(Y*He+$/2)/$),0>=He||0>=Je?0:(he[0]=He,Ee[0]=Je,1)}function at($,Y){return $+(1<<Y)-1>>>Y}function dr($,Y){return((4278255360&$)+(4278255360&Y)>>>0&4278255360)+((16711935&$)+(16711935&Y)>>>0&16711935)>>>0}function hr($,Y){X[Y]=function(he,Ee,He,Je,et,it,dt){var bt;for(bt=0;bt<et;++bt){var _t=X[$](it[dt+bt-1],He,Je+bt);it[dt+bt]=dr(he[Ee+bt],_t)}}}function ur(){this.ud=this.hd=this.jd=0}function Cr($,Y){return((4278124286&($^Y))>>>1)+($&Y)>>>0}function br($){return 0<=$&&256>$?$:0>$?0:255<$?255:void 0}function nr($,Y){return br($+($-Y+.5>>1))}function lr($,Y,he){return Math.abs(Y-he)-Math.abs($-he)}function Pr($,Y,he,Ee,He,Je,et){for(Ee=Je[et-1],he=0;he<He;++he)Je[et+he]=Ee=dr($[Y+he],Ee)}function ar($,Y,he,Ee,He){var Je;for(Je=0;Je<he;++Je){var et=$[Y+Je],it=et>>8&255,dt=16711935&(dt=(dt=16711935&et)+((it<<16)+it));Ee[He+Je]=(4278255360&et)+dt>>>0}}function kr($,Y){Y.jd=255&$,Y.hd=$>>8&255,Y.ud=$>>16&255}function Qt($,Y,he,Ee,He,Je){var et;for(et=0;et<Ee;++et){var it=Y[he+et],dt=it>>>8,bt=it,_t=255&(_t=(_t=it>>>16)+(($.jd<<24>>24)*(dt<<24>>24)>>>5));bt=255&(bt=(bt+=($.hd<<24>>24)*(dt<<24>>24)>>>5)+(($.ud<<24>>24)*(_t<<24>>24)>>>5)),He[Je+et]=(4278255360&it)+(_t<<16)+bt}}function Ht($,Y,he,Ee,He){X[Y]=function(Je,et,it,dt,bt,_t,Sr,xt,ir){for(dt=Sr;dt<xt;++dt)for(Sr=0;Sr<ir;++Sr)bt[_t++]=He(it[Ee(Je[et++])])},X[$]=function(Je,et,it,dt,bt,_t,Sr){var xt=8>>Je.b,ir=Je.Ea,cr=Je.K[0],Dr=Je.w;if(8>xt)for(Je=(1<<Je.b)-1,Dr=(1<<xt)-1;et<it;++et){var xr,yr=0;for(xr=0;xr<ir;++xr)xr&Je||(yr=Ee(dt[bt++])),_t[Sr++]=He(cr[yr&Dr]),yr>>=xt}else X["VP8LMapColor"+he](dt,bt,cr,Dr,_t,Sr,et,it,ir)}}function Ct($,Y,he,Ee,He){for(he=Y+he;Y<he;){var Je=$[Y++];Ee[He++]=Je>>16&255,Ee[He++]=Je>>8&255,Ee[He++]=255&Je}}function Re($,Y,he,Ee,He){for(he=Y+he;Y<he;){var Je=$[Y++];Ee[He++]=Je>>16&255,Ee[He++]=Je>>8&255,Ee[He++]=255&Je,Ee[He++]=Je>>24&255}}function Be($,Y,he,Ee,He){for(he=Y+he;Y<he;){var Je=(et=$[Y++])>>16&240|et>>12&15,et=240&et|et>>28&15;Ee[He++]=Je,Ee[He++]=et}}function De($,Y,he,Ee,He){for(he=Y+he;Y<he;){var Je=(et=$[Y++])>>16&248|et>>13&7,et=et>>5&224|et>>3&31;Ee[He++]=Je,Ee[He++]=et}}function rt($,Y,he,Ee,He){for(he=Y+he;Y<he;){var Je=$[Y++];Ee[He++]=255&Je,Ee[He++]=Je>>8&255,Ee[He++]=Je>>16&255}}function mt($,Y,he,Ee,He,Je){if(Je==0)for(he=Y+he;Y<he;)Qe(Ee,((Je=$[Y++])[0]>>24|Je[1]>>8&65280|Je[2]<<8&16711680|Je[3]<<24)>>>0),He+=32;else n(Ee,He,$,Y,he)}function At($,Y){X[Y][0]=X[$+"0"],X[Y][1]=X[$+"1"],X[Y][2]=X[$+"2"],X[Y][3]=X[$+"3"],X[Y][4]=X[$+"4"],X[Y][5]=X[$+"5"],X[Y][6]=X[$+"6"],X[Y][7]=X[$+"7"],X[Y][8]=X[$+"8"],X[Y][9]=X[$+"9"],X[Y][10]=X[$+"10"],X[Y][11]=X[$+"11"],X[Y][12]=X[$+"12"],X[Y][13]=X[$+"13"],X[Y][14]=X[$+"0"],X[Y][15]=X[$+"0"]}function Ot($){return $==Zh||$==th||$==uf||$==wd}function Tt(){this.eb=[],this.size=this.A=this.fb=0}function Yt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Tt,this.f.kb=new Yt,this.sd=null}function wt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Et($){return alert("todo:WebPSamplerProcessPlane"),$.T}function Ir($,Y){var he=$.T,Ee=Y.ba.f.RGBA,He=Ee.eb,Je=Ee.fb+$.ka*Ee.A,et=el[Y.ba.S],it=$.y,dt=$.O,bt=$.f,_t=$.N,Sr=$.ea,xt=$.W,ir=Y.cc,cr=Y.dc,Dr=Y.Mc,xr=Y.Nc,yr=$.ka,Fr=$.ka+$.T,an=$.U,Zr=an+1>>1;for(yr==0?et(it,dt,null,null,bt,_t,Sr,xt,bt,_t,Sr,xt,He,Je,null,null,an):(et(Y.ec,Y.fc,it,dt,ir,cr,Dr,xr,bt,_t,Sr,xt,He,Je-Ee.A,He,Je,an),++he);yr+2<Fr;yr+=2)ir=bt,cr=_t,Dr=Sr,xr=xt,_t+=$.Rc,xt+=$.Rc,Je+=2*Ee.A,et(it,(dt+=2*$.fa)-$.fa,it,dt,ir,cr,Dr,xr,bt,_t,Sr,xt,He,Je-Ee.A,He,Je,an);return dt+=$.fa,$.j+Fr<$.o?(n(Y.ec,Y.fc,it,dt,an),n(Y.cc,Y.dc,bt,_t,Zr),n(Y.Mc,Y.Nc,Sr,xt,Zr),he--):1&Fr||et(it,dt,null,null,bt,_t,Sr,xt,bt,_t,Sr,xt,He,Je+Ee.A,null,null,an),he}function $t($,Y,he){var Ee=$.F,He=[$.J];if(Ee!=null){var Je=$.U,et=Y.ba.S,it=et==lf||et==uf;Y=Y.ba.f.RGBA;var dt=[0],bt=$.ka;dt[0]=$.T,$.Kb&&(bt==0?--dt[0]:(--bt,He[0]-=$.width),$.j+$.ka+$.T==$.o&&(dt[0]=$.o-$.j-bt));var _t=Y.eb;bt=Y.fb+bt*Y.A,$=Za(Ee,He[0],$.width,Je,dt,_t,bt+(it?0:3),Y.A),t(he==dt),$&&Ot(et)&&xi(_t,bt,it,Je,dt,Y.A)}return 0}function Vr($){var Y=$.ma,he=Y.ba.S,Ee=11>he,He=he==gi||he==Du||he==lf||he==Gc||he==12||Ot(he);if(Y.memory=null,Y.Ib=null,Y.Jb=null,Y.Nd=null,!so(Y.Oa,$,He?11:12))return 0;if(He&&Ot(he)&&As(),$.da)alert("todo:use_scaling");else{if(Ee){if(Y.Ib=Et,$.Kb){if(he=$.U+1>>1,Y.memory=o($.U+2*he),Y.memory==null)return 0;Y.ec=Y.memory,Y.fc=0,Y.cc=Y.ec,Y.dc=Y.fc+$.U,Y.Mc=Y.cc,Y.Nc=Y.dc+he,Y.Ib=Ir,As()}}else alert("todo:EmitYUV");He&&(Y.Jb=$t,Ee&&Yl())}if(Ee&&!sh){for($=0;256>$;++$)xm[$]=89858*($-128)+tc>>mf,Qh[$]=-22014*($-128)+tc,Id[$]=-45773*($-128),wm[$]=113618*($-128)+tc>>mf;for($=Ou;$<Fs;++$)Y=76283*($-16)+tc>>mf,lh[$-Ou]=Fa(Y,255),Sm[$-Ou]=Fa(Y+8>>4,15);sh=1}return 1}function Rr($){var Y=$.ma,he=$.U,Ee=$.T;return t(!(1&$.ka)),0>=he||0>=Ee?0:(he=Y.Ib($,Y),Y.Jb!=null&&Y.Jb($,Y,he),Y.Dc+=he,1)}function un($){$.ma.memory=null}function Te($,Y,he,Ee){return Pe($,8)!=47?0:(Y[0]=Pe($,14)+1,he[0]=Pe($,14)+1,Ee[0]=Pe($,1),Pe($,3)!=0?0:!$.h)}function qe($,Y){if(4>$)return $+1;var he=$-2>>1;return(2+(1&$)<<he)+Pe(Y,he)+1}function ht($,Y){return 120<Y?Y-120:1<=(he=((he=cf[Y-1])>>4)*$+(8-(15&he)))?he:1;var he}function kt($,Y,he){var Ee=be(he),He=$[Y+=255&Ee].g-8;return 0<He&&(Le(he,he.u+8),Ee=be(he),Y+=$[Y].value,Y+=Ee&(1<<He)-1),Le(he,he.u+$[Y].g),$[Y].value}function gr($,Y,he){return he.g+=$.g,he.value+=$.value<<Y>>>0,t(8>=he.g),$.g}function Ur($,Y,he){var Ee=$.xc;return t((Y=Ee==0?0:$.vc[$.md*(he>>Ee)+(Y>>Ee)])<$.Wb),$.Ya[Y]}function Er($,Y,he,Ee){var He=$.ab,Je=$.c*Y,et=$.C;Y=et+Y;var it=he,dt=Ee;for(Ee=$.Ta,he=$.Ua;0<He--;){var bt=$.gc[He],_t=et,Sr=Y,xt=it,ir=dt,cr=(dt=Ee,it=he,bt.Ea);switch(t(_t<Sr),t(Sr<=bt.nc),bt.hc){case 2:Al(xt,ir,(Sr-_t)*cr,dt,it);break;case 0:var Dr=_t,xr=Sr,yr=dt,Fr=it,an=(zn=bt).Ea;Dr==0&&(Ds(xt,ir,null,null,1,yr,Fr),Pr(xt,ir+1,0,0,an-1,yr,Fr+1),ir+=an,Fr+=an,++Dr);for(var Zr=1<<zn.b,Wn=Zr-1,Fn=at(an,zn.b),wi=zn.K,zn=zn.w+(Dr>>zn.b)*Fn;Dr<xr;){var Bi=wi,Lo=zn,vi=1;for(qo(xt,ir,yr,Fr-an,1,yr,Fr);vi<an;){var Vn=(vi&~Wn)+Zr;Vn>an&&(Vn=an),(0,er[Bi[Lo++]>>8&15])(xt,ir+ +vi,yr,Fr+vi-an,Vn-vi,yr,Fr+vi),vi=Vn}ir+=an,Fr+=an,++Dr&Wn||(zn+=Fn)}Sr!=bt.nc&&n(dt,it-cr,dt,it+(Sr-_t-1)*cr,cr);break;case 1:for(cr=xt,xr=ir,an=(xt=bt.Ea)-(Fr=xt&~(yr=(ir=1<<bt.b)-1)),Dr=at(xt,bt.b),Zr=bt.K,bt=bt.w+(_t>>bt.b)*Dr;_t<Sr;){for(Wn=Zr,Fn=bt,wi=new ur,zn=xr+Fr,Bi=xr+xt;xr<zn;)kr(Wn[Fn++],wi),sr(wi,cr,xr,ir,dt,it),xr+=ir,it+=ir;xr<Bi&&(kr(Wn[Fn++],wi),sr(wi,cr,xr,an,dt,it),xr+=an,it+=an),++_t&yr||(bt+=Dr)}break;case 3:if(xt==dt&&ir==it&&0<bt.b){for(xr=dt,xt=cr=it+(Sr-_t)*cr-(Fr=(Sr-_t)*at(bt.Ea,bt.b)),ir=dt,yr=it,Dr=[],Fr=(an=Fr)-1;0<=Fr;--Fr)Dr[Fr]=ir[yr+Fr];for(Fr=an-1;0<=Fr;--Fr)xr[xt+Fr]=Dr[Fr];gu(bt,_t,Sr,dt,cr,dt,it)}else gu(bt,_t,Sr,xt,ir,dt,it)}it=Ee,dt=he}dt!=he&&n(Ee,he,it,dt,Je)}function si($,Y){var he=$.V,Ee=$.Ba+$.c*$.C,He=Y-$.C;if(t(Y<=$.l.o),t(16>=He),0<He){var Je=$.l,et=$.Ta,it=$.Ua,dt=Je.width;if(Er($,He,he,Ee),He=it=[it],t((he=$.C)<(Ee=Y)),t(Je.v<Je.va),Ee>Je.o&&(Ee=Je.o),he<Je.j){var bt=Je.j-he;he=Je.j,He[0]+=bt*dt}if(he>=Ee?he=0:(He[0]+=4*Je.v,Je.ka=he-Je.j,Je.U=Je.va-Je.v,Je.T=Ee-he,he=1),he){if(it=it[0],11>(he=$.ca).S){var _t=he.f.RGBA,Sr=(Ee=he.S,He=Je.U,Je=Je.T,bt=_t.eb,_t.A),xt=Je;for(_t=_t.fb+$.Ma*_t.A;0<xt--;){var ir=et,cr=it,Dr=He,xr=bt,yr=_t;switch(Ee){case yu:ln(ir,cr,Dr,xr,yr);break;case gi:yn(ir,cr,Dr,xr,yr);break;case Zh:yn(ir,cr,Dr,xr,yr),xi(xr,yr,0,Dr,1,0);break;case Rl:T(ir,cr,Dr,xr,yr);break;case Du:mt(ir,cr,Dr,xr,yr,1);break;case th:mt(ir,cr,Dr,xr,yr,1),xi(xr,yr,0,Dr,1,0);break;case lf:mt(ir,cr,Dr,xr,yr,0);break;case uf:mt(ir,cr,Dr,xr,yr,0),xi(xr,yr,1,Dr,1,0);break;case Gc:ui(ir,cr,Dr,xr,yr);break;case wd:ui(ir,cr,Dr,xr,yr),Ya(xr,yr,Dr,1,0);break;case gm:Sn(ir,cr,Dr,xr,yr);break;default:t(0)}it+=dt,_t+=Sr}$.Ma+=Je}else alert("todo:EmitRescaledRowsYUVA");t($.Ma<=he.height)}}$.C=Y,t($.C<=$.i)}function Hn($){var Y;if(0<$.ua)return 0;for(Y=0;Y<$.Wb;++Y){var he=$.Ya[Y].G,Ee=$.Ya[Y].H;if(0<he[1][Ee[1]+0].g||0<he[2][Ee[2]+0].g||0<he[3][Ee[3]+0].g)return 0}return 1}function di($,Y,he,Ee,He,Je){if($.Z!=0){var et=$.qd,it=$.rd;for(t(Vo[$.Z]!=null);Y<he;++Y)Vo[$.Z](et,it,Ee,He,Ee,He,Je),et=Ee,it=He,He+=Je;$.qd=et,$.rd=it}}function Mi($,Y){var he=$.l.ma,Ee=he.Z==0||he.Z==1?$.l.j:$.C;if(Ee=$.C<Ee?Ee:$.C,t(Y<=$.l.o),Y>Ee){var He=$.l.width,Je=he.ca,et=he.tb+He*Ee,it=$.V,dt=$.Ba+$.c*Ee,bt=$.gc;t($.ab==1),t(bt[0].hc==3),Ml(bt[0],Ee,Y,it,dt,Je,et),di(he,Ee,Y,Je,et,He)}$.C=$.Ma=Y}function qr($,Y,he,Ee,He,Je,et){var it=$.$/Ee,dt=$.$%Ee,bt=$.m,_t=$.s,Sr=he+$.$,xt=Sr;He=he+Ee*He;var ir=he+Ee*Je,cr=280+_t.ua,Dr=$.Pb?it:16777216,xr=0<_t.ua?_t.Wa:null,yr=_t.wc,Fr=Sr<ir?Ur(_t,dt,it):null;t($.C<Je),t(ir<=He);var an=!1;e:for(;;){for(;an||Sr<ir;){var Zr=0;if(it>=Dr){var Wn=Sr-he;t((Dr=$).Pb),Dr.wd=Dr.m,Dr.xd=Wn,0<Dr.s.ua&&tr(Dr.s.Wa,Dr.s.vb),Dr=it+Ed}if(dt&yr||(Fr=Ur(_t,dt,it)),t(Fr!=null),Fr.Qb&&(Y[Sr]=Fr.qb,an=!0),!an)if(Ue(bt),Fr.jc){Zr=bt,Wn=Y;var Fn=Sr,wi=Fr.pd[be(Zr)&lo-1];t(Fr.jc),256>wi.g?(Le(Zr,Zr.u+wi.g),Wn[Fn]=wi.value,Zr=0):(Le(Zr,Zr.u+wi.g-256),t(256<=wi.value),Zr=wi.value),Zr==0&&(an=!0)}else Zr=kt(Fr.G[0],Fr.H[0],bt);if(bt.h)break;if(an||256>Zr){if(!an)if(Fr.nd)Y[Sr]=(Fr.qb|Zr<<8)>>>0;else{if(Ue(bt),an=kt(Fr.G[1],Fr.H[1],bt),Ue(bt),Wn=kt(Fr.G[2],Fr.H[2],bt),Fn=kt(Fr.G[3],Fr.H[3],bt),bt.h)break;Y[Sr]=(Fn<<24|an<<16|Zr<<8|Wn)>>>0}if(an=!1,++Sr,++dt>=Ee&&(dt=0,++it,et!=null&&it<=Je&&!(it%16)&&et($,it),xr!=null))for(;xt<Sr;)Zr=Y[xt++],xr.X[(506832829*Zr&4294967295)>>>xr.Mb]=Zr}else if(280>Zr){if(Zr=qe(Zr-256,bt),Wn=kt(Fr.G[4],Fr.H[4],bt),Ue(bt),Wn=ht(Ee,Wn=qe(Wn,bt)),bt.h)break;if(Sr-he<Wn||He-Sr<Zr)break e;for(Fn=0;Fn<Zr;++Fn)Y[Sr+Fn]=Y[Sr+Fn-Wn];for(Sr+=Zr,dt+=Zr;dt>=Ee;)dt-=Ee,++it,et!=null&&it<=Je&&!(it%16)&&et($,it);if(t(Sr<=He),dt&yr&&(Fr=Ur(_t,dt,it)),xr!=null)for(;xt<Sr;)Zr=Y[xt++],xr.X[(506832829*Zr&4294967295)>>>xr.Mb]=Zr}else{if(!(Zr<cr))break e;for(an=Zr-280,t(xr!=null);xt<Sr;)Zr=Y[xt++],xr.X[(506832829*Zr&4294967295)>>>xr.Mb]=Zr;Zr=Sr,t(!(an>>>(Wn=xr).Xa)),Y[Zr]=Wn.X[an],an=!0}an||t(bt.h==Me(bt))}if($.Pb&&bt.h&&Sr<He)t($.m.h),$.a=5,$.m=$.wd,$.$=$.xd,0<$.s.ua&&tr($.s.vb,$.s.Wa);else{if(bt.h)break e;et?.($,it>Je?Je:it),$.a=0,$.$=Sr-he}return 1}return $.a=3,0}function cn($){t($!=null),$.vc=null,$.yc=null,$.Ya=null;var Y=$.Wa;Y!=null&&(Y.X=null),$.vb=null,t($!=null)}function Pn(){var $=new Ri;return $==null?null:($.a=0,$.xb=ec,At("Predictor","VP8LPredictors"),At("Predictor","VP8LPredictors_C"),At("PredictorAdd","VP8LPredictorsAdd"),At("PredictorAdd","VP8LPredictorsAdd_C"),Al=ar,sr=Qt,ln=Ct,yn=Re,ui=Be,Sn=De,T=rt,X.VP8LMapColor32b=Ns,X.VP8LMapColor8b=Jl,$)}function Gi($,Y,he,Ee,He){var Je=1,et=[$],it=[Y],dt=Ee.m,bt=Ee.s,_t=null,Sr=0;e:for(;;){if(he)for(;Je&&Pe(dt,1);){var xt=et,ir=it,cr=Ee,Dr=1,xr=cr.m,yr=cr.gc[cr.ab],Fr=Pe(xr,2);if(cr.Oc&1<<Fr)Je=0;else{switch(cr.Oc|=1<<Fr,yr.hc=Fr,yr.Ea=xt[0],yr.nc=ir[0],yr.K=[null],++cr.ab,t(4>=cr.ab),Fr){case 0:case 1:yr.b=Pe(xr,3)+2,Dr=Gi(at(yr.Ea,yr.b),at(yr.nc,yr.b),0,cr,yr.K),yr.K=yr.K[0];break;case 3:var an,Zr=Pe(xr,8)+1,Wn=16<Zr?0:4<Zr?1:2<Zr?2:3;if(xt[0]=at(yr.Ea,Wn),yr.b=Wn,an=Dr=Gi(Zr,1,0,cr,yr.K)){var Fn,wi=Zr,zn=yr,Bi=1<<(8>>zn.b),Lo=o(Bi);if(Lo==null)an=0;else{var vi=zn.K[0],Vn=zn.w;for(Lo[0]=zn.K[0][0],Fn=1;Fn<1*wi;++Fn)Lo[Fn]=dr(vi[Vn+Fn],Lo[Fn-1]);for(;Fn<4*Bi;++Fn)Lo[Fn]=0;zn.K[0]=null,zn.K[0]=Lo,an=1}}Dr=an;break;case 2:break;default:t(0)}Je=Dr}}if(et=et[0],it=it[0],Je&&Pe(dt,1)&&!(Je=1<=(Sr=Pe(dt,4))&&11>=Sr)){Ee.a=3;break e}var vn;if(vn=Je)t:{var ya,Dn,Ni,va=Ee,Uo=et,Bs=it,co=Sr,zs=he,Ka=va.m,mo=va.s,Jr=[null],pn=1,Ba=0,ra=Cd[co];r:for(;;){if(zs&&Pe(Ka,1)){var wo=Pe(Ka,3)+2,za=at(Uo,wo),go=at(Bs,wo),ca=za*go;if(!Gi(za,go,0,va,Jr))break r;for(Jr=Jr[0],mo.xc=wo,ya=0;ya<ca;++ya){var ba=Jr[ya]>>8&65535;Jr[ya]=ba,ba>=pn&&(pn=ba+1)}}if(Ka.h)break r;for(Dn=0;5>Dn;++Dn){var ja=Sd[Dn];!Dn&&0<co&&(ja+=1<<co),Ba<ja&&(Ba=ja)}var Hi=l(pn*ra,ne),zi=pn,vl=l(zi,le);if(vl==null)var Ro=null;else t(65536>=zi),Ro=vl;var So=o(Ba);if(Ro==null||So==null||Hi==null){va.a=1;break r}var tl=Hi;for(ya=Ni=0;ya<pn;++ya){var fa=Ro[ya],Go=fa.G,rl=fa.H,rc=0,ru=1,Ho=0;for(Dn=0;5>Dn;++Dn){ja=Sd[Dn],Go[Dn]=tl,rl[Dn]=Ni,!Dn&&0<co&&(ja+=1<<co);i:{var A,s=ja,d=va,w=So,C=tl,L=Ni,B=0,W=d.m,te=Pe(W,1);if(i(w,0,0,s),te){var ue=Pe(W,1)+1,ge=Pe(W,1),Ce=Pe(W,ge==0?1:8);w[Ce]=1,ue==2&&(w[Ce=Pe(W,8)]=1);var xe=1}else{var Ne=o(19),We=Pe(W,4)+4;if(19<We){d.a=3;var ut=0;break i}for(A=0;A<We;++A)Ne[Kh[A]]=Pe(W,3);var lt=void 0,ct=void 0,vt=d,Dt=Ne,It=s,Ft=w,qt=0,Pt=vt.m,Zt=8,_r=l(128,ne);n:for(;G(_r,0,7,Dt,19);){if(Pe(Pt,1)){var pr=2+2*Pe(Pt,3);if((lt=2+Pe(Pt,pr))>It)break n}else lt=It;for(ct=0;ct<It&&lt--;){Ue(Pt);var mr=_r[0+(127&be(Pt))];Le(Pt,Pt.u+mr.g);var wr=mr.value;if(16>wr)Ft[ct++]=wr,wr!=0&&(Zt=wr);else{var sn=wr==16,on=wr-16,$r=nh[on],En=Pe(Pt,rh[on])+$r;if(ct+En>It)break n;for(var _i=sn?Zt:0;0<En--;)Ft[ct++]=_i}}qt=1;break n}qt||(vt.a=3),xe=qt}(xe=xe&&!W.h)&&(B=G(C,L,8,w,s)),xe&&B!=0?ut=B:(d.a=3,ut=0)}if(ut==0)break r;if(ru&&ih[Dn]==1&&(ru=tl[Ni].g==0),rc+=tl[Ni].g,Ni+=ut,3>=Dn){var ji,Ma=So[0];for(ji=1;ji<ja;++ji)So[ji]>Ma&&(Ma=So[ji]);Ho+=Ma}}if(fa.nd=ru,fa.Qb=0,ru&&(fa.qb=(Go[3][rl[3]+0].value<<24|Go[1][rl[1]+0].value<<16|Go[2][rl[2]+0].value)>>>0,rc==0&&256>Go[0][rl[0]+0].value&&(fa.Qb=1,fa.qb+=Go[0][rl[0]+0].value<<8)),fa.jc=!fa.Qb&&6>Ho,fa.jc){var ea,ta=fa;for(ea=0;ea<lo;++ea){var Xi=ea,Wi=ta.pd[Xi],na=ta.G[0][ta.H[0]+Xi];256<=na.value?(Wi.g=na.g+256,Wi.value=na.value):(Wi.g=0,Wi.value=0,Xi>>=gr(na,8,Wi),Xi>>=gr(ta.G[1][ta.H[1]+Xi],16,Wi),Xi>>=gr(ta.G[2][ta.H[2]+Xi],0,Wi),gr(ta.G[3][ta.H[3]+Xi],24,Wi))}}}mo.vc=Jr,mo.Wb=pn,mo.Ya=Ro,mo.yc=Hi,vn=1;break t}vn=0}if(!(Je=vn)){Ee.a=3;break e}if(0<Sr){if(bt.ua=1<<Sr,!$e(bt.Wa,Sr)){Ee.a=1,Je=0;break e}}else bt.ua=0;var Wo=Ee,Oi=et,ss=it,Xo=Wo.s,Fu=Xo.xc;if(Wo.c=Oi,Wo.i=ss,Xo.md=at(Oi,Fu),Xo.wc=Fu==0?-1:(1<<Fu)-1,he){Ee.xb=uo;break e}if((_t=o(et*it))==null){Ee.a=1,Je=0;break e}Je=(Je=qr(Ee,_t,0,et,it,it,null))&&!dt.h;break e}return Je?(He!=null?He[0]=_t:(t(_t==null),t(he)),Ee.$=0,he||cn(bt)):cn(bt),Je}function pa($,Y){var he=$.c*$.i,Ee=he+Y+16*Y;return t($.c<=Y),$.V=o(Ee),$.V==null?($.Ta=null,$.Ua=0,$.a=1,0):($.Ta=$.V,$.Ua=$.Ba+he+Y,1)}function Ki($,Y){var he=$.C,Ee=Y-he,He=$.V,Je=$.Ba+$.c*he;for(t(Y<=$.l.o);0<Ee;){var et=16<Ee?16:Ee,it=$.l.ma,dt=$.l.width,bt=dt*et,_t=it.ca,Sr=it.tb+dt*he,xt=$.Ta,ir=$.Ua;Er($,et,He,Je),Ao(xt,ir,_t,Sr,bt),di(it,he,he+et,_t,Sr,dt),Ee-=et,He+=et*$.c,he+=et}t(he==Y),$.C=$.Ma=Y}function wn(){this.ub=this.yd=this.td=this.Rb=0}function Ua(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oa(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Di(){this.Yb=(function(){var $=[];return(function Y(he,Ee,He){for(var Je=He[Ee],et=0;et<Je&&(he.push(He.length>Ee+1?[]:0),!(He.length<Ee+1));et++)Y(he[et],Ee+1,He)})($,0,[3,11]),$})()}function Ra(){this.jb=o(3),this.Wc=a([4,8],Di),this.Xc=a([4,17],Di)}function Ts(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function bi(){this.ld=this.La=this.dd=this.tc=0}function Ys(){this.Na=this.la=0}function _o(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function fi(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function io(){this.uc=this.M=this.Nb=0,this.wa=Array(new bi),this.Y=0,this.ya=Array(new fi),this.aa=0,this.l=new Ga}function ps(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ho(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new wn,this.Kc=new Ua,this.ed=new Ts,this.Qa=new oa,this.Ic=this.$c=this.Aa=0,this.D=new io,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,ce),this.ia=0,this.pb=l(4,_o),this.Pa=new Ra,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ps),this.Hd=0,this.rb=Array(new Ys),this.sb=0,this.wa=Array(new bi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new fi),this.L=this.aa=0,this.gd=a([4,2],bi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ga(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Zs(){var $=new ho;return $!=null&&($.a=0,$.sc="OK",$.cb=0,$.Xb=0,Ql||(Ql=ko)),$}function Da($,Y,he){return $.a==0&&($.a=Y,$.sc=he,$.cb=0),0}function Qu($,Y,he){return 3<=he&&$[Y+0]==157&&$[Y+1]==1&&$[Y+2]==42}function Au($,Y){if($==null)return 0;if($.a=0,$.sc="OK",Y==null)return Da($,2,"null VP8Io passed to VP8GetHeaders()");var he=Y.data,Ee=Y.w,He=Y.ha;if(4>He)return Da($,7,"Truncated header.");var Je=he[Ee+0]|he[Ee+1]<<8|he[Ee+2]<<16,et=$.Od;if(et.Rb=!(1&Je),et.td=Je>>1&7,et.yd=Je>>4&1,et.ub=Je>>5,3<et.td)return Da($,3,"Incorrect keyframe parameters.");if(!et.yd)return Da($,4,"Frame not displayable.");Ee+=3,He-=3;var it=$.Kc;if(et.Rb){if(7>He)return Da($,7,"cannot parse picture header");if(!Qu(he,Ee,He))return Da($,3,"Bad code word");it.c=16383&(he[Ee+4]<<8|he[Ee+3]),it.Td=he[Ee+4]>>6,it.i=16383&(he[Ee+6]<<8|he[Ee+5]),it.Ud=he[Ee+6]>>6,Ee+=7,He-=7,$.za=it.c+15>>4,$.Ub=it.i+15>>4,Y.width=it.c,Y.height=it.i,Y.Da=0,Y.j=0,Y.v=0,Y.va=Y.width,Y.o=Y.height,Y.da=0,Y.ib=Y.width,Y.hb=Y.height,Y.U=Y.width,Y.T=Y.height,i((Je=$.Pa).jb,0,255,Je.jb.length),t((Je=$.Qa)!=null),Je.Cb=0,Je.Bb=0,Je.Fb=1,i(Je.Zb,0,0,Je.Zb.length),i(Je.Lb,0,0,Je.Lb)}if(et.ub>He)return Da($,7,"bad partition length");fe(Je=$.m,he,Ee,et.ub),Ee+=et.ub,He-=et.ub,et.Rb&&(it.Ld=tt(Je),it.Kd=tt(Je)),it=$.Qa;var dt,bt=$.Pa;if(t(Je!=null),t(it!=null),it.Cb=tt(Je),it.Cb){if(it.Bb=tt(Je),tt(Je)){for(it.Fb=tt(Je),dt=0;4>dt;++dt)it.Zb[dt]=tt(Je)?me(Je,7):0;for(dt=0;4>dt;++dt)it.Lb[dt]=tt(Je)?me(Je,6):0}if(it.Bb)for(dt=0;3>dt;++dt)bt.jb[dt]=tt(Je)?ke(Je,8):255}else it.Bb=0;if(Je.Ka)return Da($,3,"cannot parse segment header");if((it=$.ed).zd=tt(Je),it.Tb=ke(Je,6),it.wb=ke(Je,3),it.Pc=tt(Je),it.Pc&&tt(Je)){for(bt=0;4>bt;++bt)tt(Je)&&(it.vd[bt]=me(Je,6));for(bt=0;4>bt;++bt)tt(Je)&&(it.od[bt]=me(Je,6))}if($.L=it.Tb==0?0:it.zd?1:2,Je.Ka)return Da($,3,"cannot parse filter header");var _t=He;if(He=dt=Ee,Ee=dt+_t,it=_t,$.Xb=(1<<ke($.m,2))-1,_t<3*(bt=$.Xb))he=7;else{for(dt+=3*bt,it-=3*bt,_t=0;_t<bt;++_t){var Sr=he[He+0]|he[He+1]<<8|he[He+2]<<16;Sr>it&&(Sr=it),fe($.Jc[+_t],he,dt,Sr),dt+=Sr,it-=Sr,He+=3}fe($.Jc[+bt],he,dt,it),he=dt<Ee?0:5}if(he!=0)return Da($,he,"cannot parse partitions");for(he=ke(dt=$.m,7),He=tt(dt)?me(dt,4):0,Ee=tt(dt)?me(dt,4):0,it=tt(dt)?me(dt,4):0,bt=tt(dt)?me(dt,4):0,dt=tt(dt)?me(dt,4):0,_t=$.Qa,Sr=0;4>Sr;++Sr){if(_t.Cb){var xt=_t.Zb[Sr];_t.Fb||(xt+=he)}else{if(0<Sr){$.pb[Sr]=$.pb[0];continue}xt=he}var ir=$.pb[Sr];ir.Sc[0]=Hc[Fa(xt+He,127)],ir.Sc[1]=df[Fa(xt+0,127)],ir.Eb[0]=2*Hc[Fa(xt+Ee,127)],ir.Eb[1]=101581*df[Fa(xt+it,127)]>>16,8>ir.Eb[1]&&(ir.Eb[1]=8),ir.Qc[0]=Hc[Fa(xt+bt,117)],ir.Qc[1]=df[Fa(xt+dt,127)],ir.lc=xt+dt}if(!et.Rb)return Da($,4,"Not a key frame.");for(tt(Je),et=$.Pa,he=0;4>he;++he){for(He=0;8>He;++He)for(Ee=0;3>Ee;++Ee)for(it=0;11>it;++it)bt=Ze(Je,bm[he][He][Ee][it])?ke(Je,8):Jh[he][He][Ee][it],et.Wc[he][He].Yb[Ee][it]=bt;for(He=0;17>He;++He)et.Xc[he][He]=et.Wc[he][hf[He]]}return $.kc=tt(Je),$.kc&&($.Bd=ke(Je,8)),$.cb=1}function ko($,Y,he,Ee,He,Je,et){var it=Y[He].Yb[he];for(he=0;16>He;++He){if(!Ze($,it[he+0]))return He;for(;!Ze($,it[he+1]);)if(it=Y[++He].Yb[0],he=0,He==16)return 16;var dt=Y[He+1].Yb;if(Ze($,it[he+2])){var bt=$,_t=0;if(Ze(bt,(xt=it)[(Sr=he)+3]))if(Ze(bt,xt[Sr+6])){for(it=0,Sr=2*(_t=Ze(bt,xt[Sr+8]))+(xt=Ze(bt,xt[Sr+9+_t])),_t=0,xt=Dy[Sr];xt[it];++it)_t+=_t+Ze(bt,xt[it]);_t+=3+(8<<Sr)}else Ze(bt,xt[Sr+7])?(_t=7+2*Ze(bt,165),_t+=Ze(bt,145)):_t=5+Ze(bt,159);else _t=Ze(bt,xt[Sr+4])?3+Ze(bt,xt[Sr+5]):2;it=dt[2]}else _t=1,it=dt[1];dt=et+ym[He],0>(bt=$).b&&Oe(bt);var Sr,xt=bt.b,ir=(Sr=bt.Ca>>1)-(bt.I>>xt)>>31;--bt.b,bt.Ca+=ir,bt.Ca|=1,bt.I-=(Sr+1&ir)<<xt,Je[dt]=((_t^ir)-ir)*Ee[(0<He)+0]}return 16}function ms($){var Y=$.rb[$.sb-1];Y.la=0,Y.Na=0,i($.zc,0,0,$.zc.length),$.ja=0}function Na($,Y,he,Ee,He){He=$[Y+he+32*Ee]+(He>>3),$[Y+he+32*Ee]=-256&He?0>He?0:255:He}function ao($,Y,he,Ee,He,Je){Na($,Y,0,he,Ee+He),Na($,Y,1,he,Ee+Je),Na($,Y,2,he,Ee-Je),Na($,Y,3,he,Ee-He)}function Ia($){return(20091*$>>16)+$}function Ks($,Y,he,Ee){var He,Je=0,et=o(16);for(He=0;4>He;++He){var it=$[Y+0]+$[Y+8],dt=$[Y+0]-$[Y+8],bt=(35468*$[Y+4]>>16)-Ia($[Y+12]),_t=Ia($[Y+4])+(35468*$[Y+12]>>16);et[Je+0]=it+_t,et[Je+1]=dt+bt,et[Je+2]=dt-bt,et[Je+3]=it-_t,Je+=4,Y++}for(He=Je=0;4>He;++He)it=($=et[Je+0]+4)+et[Je+8],dt=$-et[Je+8],bt=(35468*et[Je+4]>>16)-Ia(et[Je+12]),Na(he,Ee,0,0,it+(_t=Ia(et[Je+4])+(35468*et[Je+12]>>16))),Na(he,Ee,1,0,dt+bt),Na(he,Ee,2,0,dt-bt),Na(he,Ee,3,0,it-_t),Je++,Ee+=32}function Hl($,Y,he,Ee){var He=$[Y+0]+4,Je=35468*$[Y+4]>>16,et=Ia($[Y+4]),it=35468*$[Y+1]>>16;ao(he,Ee,0,He+et,$=Ia($[Y+1]),it),ao(he,Ee,1,He+Je,$,it),ao(he,Ee,2,He-Je,$,it),ao(he,Ee,3,He-et,$,it)}function Wl($,Y,he,Ee,He){Ks($,Y,he,Ee),He&&Ks($,Y+16,he,Ee+4)}function K($,Y,he,Ee){y($,Y+0,he,Ee,1),y($,Y+32,he,Ee+128,1)}function pe($,Y,he,Ee){var He;for($=$[Y+0]+4,He=0;4>He;++He)for(Y=0;4>Y;++Y)Na(he,Ee,Y,He,$)}function Ye($,Y,he,Ee){$[Y+0]&&re($,Y+0,he,Ee),$[Y+16]&&re($,Y+16,he,Ee+4),$[Y+32]&&re($,Y+32,he,Ee+128),$[Y+48]&&re($,Y+48,he,Ee+128+4)}function St($,Y,he,Ee){var He,Je=o(16);for(He=0;4>He;++He){var et=$[Y+0+He]+$[Y+12+He],it=$[Y+4+He]+$[Y+8+He],dt=$[Y+4+He]-$[Y+8+He],bt=$[Y+0+He]-$[Y+12+He];Je[0+He]=et+it,Je[8+He]=et-it,Je[4+He]=bt+dt,Je[12+He]=bt-dt}for(He=0;4>He;++He)et=($=Je[0+4*He]+3)+Je[3+4*He],it=Je[1+4*He]+Je[2+4*He],dt=Je[1+4*He]-Je[2+4*He],bt=$-Je[3+4*He],he[Ee+0]=et+it>>3,he[Ee+16]=bt+dt>>3,he[Ee+32]=et-it>>3,he[Ee+48]=bt-dt>>3,Ee+=64}function zt($,Y,he){var Ee,He=Y-32,Je=Aa,et=255-$[He-1];for(Ee=0;Ee<he;++Ee){var it,dt=Je,bt=et+$[Y-1];for(it=0;it<he;++it)$[Y+it]=dt[bt+$[He+it]];Y+=32}}function Rt($,Y){zt($,Y,4)}function Jt($,Y){zt($,Y,8)}function jr($,Y){zt($,Y,16)}function Kr($,Y){var he;for(he=0;16>he;++he)n($,Y+32*he,$,Y-32,16)}function Wr($,Y){var he;for(he=16;0<he;--he)i($,Y,$[Y-1],16),Y+=32}function nn($,Y,he){var Ee;for(Ee=0;16>Ee;++Ee)i(Y,he+32*Ee,$,16)}function Yr($,Y){var he,Ee=16;for(he=0;16>he;++he)Ee+=$[Y-1+32*he]+$[Y+he-32];nn(Ee>>5,$,Y)}function Bn($,Y){var he,Ee=8;for(he=0;16>he;++he)Ee+=$[Y-1+32*he];nn(Ee>>4,$,Y)}function gn($,Y){var he,Ee=8;for(he=0;16>he;++he)Ee+=$[Y+he-32];nn(Ee>>4,$,Y)}function Rn($,Y){nn(128,$,Y)}function Tn($,Y,he){return $+2*Y+he+2>>2}function Or($,Y){var he,Ee=Y-32;for(Ee=new Uint8Array([Tn($[Ee-1],$[Ee+0],$[Ee+1]),Tn($[Ee+0],$[Ee+1],$[Ee+2]),Tn($[Ee+1],$[Ee+2],$[Ee+3]),Tn($[Ee+2],$[Ee+3],$[Ee+4])]),he=0;4>he;++he)n($,Y+32*he,Ee,0,Ee.length)}function fn($,Y){var he=$[Y-1],Ee=$[Y-1+32],He=$[Y-1+64],Je=$[Y-1+96];Qe($,Y+0,16843009*Tn($[Y-1-32],he,Ee)),Qe($,Y+32,16843009*Tn(he,Ee,He)),Qe($,Y+64,16843009*Tn(Ee,He,Je)),Qe($,Y+96,16843009*Tn(He,Je,Je))}function ti($,Y){var he,Ee=4;for(he=0;4>he;++he)Ee+=$[Y+he-32]+$[Y-1+32*he];for(Ee>>=3,he=0;4>he;++he)i($,Y+32*he,Ee,4)}function Ci($,Y){var he=$[Y-1+0],Ee=$[Y-1+32],He=$[Y-1+64],Je=$[Y-1-32],et=$[Y+0-32],it=$[Y+1-32],dt=$[Y+2-32],bt=$[Y+3-32];$[Y+0+96]=Tn(Ee,He,$[Y-1+96]),$[Y+1+96]=$[Y+0+64]=Tn(he,Ee,He),$[Y+2+96]=$[Y+1+64]=$[Y+0+32]=Tn(Je,he,Ee),$[Y+3+96]=$[Y+2+64]=$[Y+1+32]=$[Y+0+0]=Tn(et,Je,he),$[Y+3+64]=$[Y+2+32]=$[Y+1+0]=Tn(it,et,Je),$[Y+3+32]=$[Y+2+0]=Tn(dt,it,et),$[Y+3+0]=Tn(bt,dt,it)}function hi($,Y){var he=$[Y+1-32],Ee=$[Y+2-32],He=$[Y+3-32],Je=$[Y+4-32],et=$[Y+5-32],it=$[Y+6-32],dt=$[Y+7-32];$[Y+0+0]=Tn($[Y+0-32],he,Ee),$[Y+1+0]=$[Y+0+32]=Tn(he,Ee,He),$[Y+2+0]=$[Y+1+32]=$[Y+0+64]=Tn(Ee,He,Je),$[Y+3+0]=$[Y+2+32]=$[Y+1+64]=$[Y+0+96]=Tn(He,Je,et),$[Y+3+32]=$[Y+2+64]=$[Y+1+96]=Tn(Je,et,it),$[Y+3+64]=$[Y+2+96]=Tn(et,it,dt),$[Y+3+96]=Tn(it,dt,dt)}function Li($,Y){var he=$[Y-1+0],Ee=$[Y-1+32],He=$[Y-1+64],Je=$[Y-1-32],et=$[Y+0-32],it=$[Y+1-32],dt=$[Y+2-32],bt=$[Y+3-32];$[Y+0+0]=$[Y+1+64]=Je+et+1>>1,$[Y+1+0]=$[Y+2+64]=et+it+1>>1,$[Y+2+0]=$[Y+3+64]=it+dt+1>>1,$[Y+3+0]=dt+bt+1>>1,$[Y+0+96]=Tn(He,Ee,he),$[Y+0+64]=Tn(Ee,he,Je),$[Y+0+32]=$[Y+1+96]=Tn(he,Je,et),$[Y+1+32]=$[Y+2+96]=Tn(Je,et,it),$[Y+2+32]=$[Y+3+96]=Tn(et,it,dt),$[Y+3+32]=Tn(it,dt,bt)}function Ii($,Y){var he=$[Y+0-32],Ee=$[Y+1-32],He=$[Y+2-32],Je=$[Y+3-32],et=$[Y+4-32],it=$[Y+5-32],dt=$[Y+6-32],bt=$[Y+7-32];$[Y+0+0]=he+Ee+1>>1,$[Y+1+0]=$[Y+0+64]=Ee+He+1>>1,$[Y+2+0]=$[Y+1+64]=He+Je+1>>1,$[Y+3+0]=$[Y+2+64]=Je+et+1>>1,$[Y+0+32]=Tn(he,Ee,He),$[Y+1+32]=$[Y+0+96]=Tn(Ee,He,Je),$[Y+2+32]=$[Y+1+96]=Tn(He,Je,et),$[Y+3+32]=$[Y+2+96]=Tn(Je,et,it),$[Y+3+64]=Tn(et,it,dt),$[Y+3+96]=Tn(it,dt,bt)}function _n($,Y){var he=$[Y-1+0],Ee=$[Y-1+32],He=$[Y-1+64],Je=$[Y-1+96];$[Y+0+0]=he+Ee+1>>1,$[Y+2+0]=$[Y+0+32]=Ee+He+1>>1,$[Y+2+32]=$[Y+0+64]=He+Je+1>>1,$[Y+1+0]=Tn(he,Ee,He),$[Y+3+0]=$[Y+1+32]=Tn(Ee,He,Je),$[Y+3+32]=$[Y+1+64]=Tn(He,Je,Je),$[Y+3+64]=$[Y+2+64]=$[Y+0+96]=$[Y+1+96]=$[Y+2+96]=$[Y+3+96]=Je}function ka($,Y){var he=$[Y-1+0],Ee=$[Y-1+32],He=$[Y-1+64],Je=$[Y-1+96],et=$[Y-1-32],it=$[Y+0-32],dt=$[Y+1-32],bt=$[Y+2-32];$[Y+0+0]=$[Y+2+32]=he+et+1>>1,$[Y+0+32]=$[Y+2+64]=Ee+he+1>>1,$[Y+0+64]=$[Y+2+96]=He+Ee+1>>1,$[Y+0+96]=Je+He+1>>1,$[Y+3+0]=Tn(it,dt,bt),$[Y+2+0]=Tn(et,it,dt),$[Y+1+0]=$[Y+3+32]=Tn(he,et,it),$[Y+1+32]=$[Y+3+64]=Tn(Ee,he,et),$[Y+1+64]=$[Y+3+96]=Tn(He,Ee,he),$[Y+1+96]=Tn(Je,He,Ee)}function Zn($,Y){var he;for(he=0;8>he;++he)n($,Y+32*he,$,Y-32,8)}function On($,Y){var he;for(he=0;8>he;++he)i($,Y,$[Y-1],8),Y+=32}function ts($,Y,he){var Ee;for(Ee=0;8>Ee;++Ee)i(Y,he+32*Ee,$,8)}function bn($,Y){var he,Ee=8;for(he=0;8>he;++he)Ee+=$[Y+he-32]+$[Y-1+32*he];ts(Ee>>4,$,Y)}function Js($,Y){var he,Ee=4;for(he=0;8>he;++he)Ee+=$[Y+he-32];ts(Ee>>3,$,Y)}function wa($,Y){var he,Ee=4;for(he=0;8>he;++he)Ee+=$[Y-1+32*he];ts(Ee>>3,$,Y)}function Ps($,Y){ts(128,$,Y)}function Ha($,Y,he){var Ee=$[Y-he],He=$[Y+0],Je=3*(He-Ee)+Ru[1020+$[Y-2*he]-$[Y+he]],et=os[112+(Je+4>>3)];$[Y-he]=Aa[255+Ee+os[112+(Je+3>>3)]],$[Y+0]=Aa[255+He-et]}function Il($,Y,he,Ee){var He=$[Y+0],Je=$[Y+he];return $o[255+$[Y-2*he]-$[Y-he]]>Ee||$o[255+Je-He]>Ee}function zo($,Y,he,Ee){return 4*$o[255+$[Y-he]-$[Y+0]]+$o[255+$[Y-2*he]-$[Y+he]]<=Ee}function jo($,Y,he,Ee,He){var Je=$[Y-3*he],et=$[Y-2*he],it=$[Y-he],dt=$[Y+0],bt=$[Y+he],_t=$[Y+2*he],Sr=$[Y+3*he];return 4*$o[255+it-dt]+$o[255+et-bt]>Ee?0:$o[255+$[Y-4*he]-Je]<=He&&$o[255+Je-et]<=He&&$o[255+et-it]<=He&&$o[255+Sr-_t]<=He&&$o[255+_t-bt]<=He&&$o[255+bt-dt]<=He}function cl($,Y,he,Ee){var He=2*Ee+1;for(Ee=0;16>Ee;++Ee)zo($,Y+Ee,he,He)&&Ha($,Y+Ee,he)}function Is($,Y,he,Ee){var He=2*Ee+1;for(Ee=0;16>Ee;++Ee)zo($,Y+Ee*he,1,He)&&Ha($,Y+Ee*he,1)}function Oa($,Y,he,Ee){var He;for(He=3;0<He;--He)cl($,Y+=4*he,he,Ee)}function Wa($,Y,he,Ee){var He;for(He=3;0<He;--He)Is($,Y+=4,he,Ee)}function Yi($,Y,he,Ee,He,Je,et,it){for(Je=2*Je+1;0<He--;){if(jo($,Y,he,Je,et))if(Il($,Y,he,it))Ha($,Y,he);else{var dt=$,bt=Y,_t=he,Sr=dt[bt-2*_t],xt=dt[bt-_t],ir=dt[bt+0],cr=dt[bt+_t],Dr=dt[bt+2*_t],xr=27*(Fr=Ru[1020+3*(ir-xt)+Ru[1020+Sr-cr]])+63>>7,yr=18*Fr+63>>7,Fr=9*Fr+63>>7;dt[bt-3*_t]=Aa[255+dt[bt-3*_t]+Fr],dt[bt-2*_t]=Aa[255+Sr+yr],dt[bt-_t]=Aa[255+xt+xr],dt[bt+0]=Aa[255+ir-xr],dt[bt+_t]=Aa[255+cr-yr],dt[bt+2*_t]=Aa[255+Dr-Fr]}Y+=Ee}}function Sa($,Y,he,Ee,He,Je,et,it){for(Je=2*Je+1;0<He--;){if(jo($,Y,he,Je,et))if(Il($,Y,he,it))Ha($,Y,he);else{var dt=$,bt=Y,_t=he,Sr=dt[bt-_t],xt=dt[bt+0],ir=dt[bt+_t],cr=os[112+(4+(Dr=3*(xt-Sr))>>3)],Dr=os[112+(Dr+3>>3)],xr=cr+1>>1;dt[bt-2*_t]=Aa[255+dt[bt-2*_t]+xr],dt[bt-_t]=Aa[255+Sr+Dr],dt[bt+0]=Aa[255+xt-cr],dt[bt+_t]=Aa[255+ir-xr]}Y+=Ee}}function se($,Y,he,Ee,He,Je){Yi($,Y,he,1,16,Ee,He,Je)}function Ge($,Y,he,Ee,He,Je){Yi($,Y,1,he,16,Ee,He,Je)}function pt($,Y,he,Ee,He,Je){var et;for(et=3;0<et;--et)Sa($,Y+=4*he,he,1,16,Ee,He,Je)}function jt($,Y,he,Ee,He,Je){var et;for(et=3;0<et;--et)Sa($,Y+=4,1,he,16,Ee,He,Je)}function or($,Y,he,Ee,He,Je,et,it){Yi($,Y,He,1,8,Je,et,it),Yi(he,Ee,He,1,8,Je,et,it)}function Nr($,Y,he,Ee,He,Je,et,it){Yi($,Y,1,He,8,Je,et,it),Yi(he,Ee,1,He,8,Je,et,it)}function Xr($,Y,he,Ee,He,Je,et,it){Sa($,Y+4*He,He,1,8,Je,et,it),Sa(he,Ee+4*He,He,1,8,Je,et,it)}function xn($,Y,he,Ee,He,Je,et,it){Sa($,Y+4,1,He,8,Je,et,it),Sa(he,Ee+4,1,He,8,Je,et,it)}function Ln(){this.ba=new Bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ni(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function mi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ri(){this.ua=0,this.Wa=new Wt,this.vb=new Wt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new le,this.yc=new ne}function Ri(){this.xb=this.a=0,this.l=new Ga,this.ca=new Bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _e,this.Pb=0,this.wd=new _e,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ri,this.ab=0,this.gc=l(4,mi),this.Oc=0}function pi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ga,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yi($,Y,he,Ee,He,Je,et){for($=$==null?0:$[Y+0],Y=0;Y<et;++Y)He[Je+Y]=$+he[Ee+Y]&255,$=He[Je+Y]}function ma($,Y,he,Ee,He,Je,et){var it;if($==null)yi(null,null,he,Ee,He,Je,et);else for(it=0;it<et;++it)He[Je+it]=$[Y+it]+he[Ee+it]&255}function Ji($,Y,he,Ee,He,Je,et){if($==null)yi(null,null,he,Ee,He,Je,et);else{var it,dt=$[Y+0],bt=dt,_t=dt;for(it=0;it<et;++it)bt=_t+(dt=$[Y+it])-bt,_t=he[Ee+it]+(-256&bt?0>bt?0:255:bt)&255,bt=dt,He[Je+it]=_t}}function sa($,Y,he,Ee){var He=Y.width,Je=Y.o;if(t($!=null&&Y!=null),0>he||0>=Ee||he+Ee>Je)return null;if(!$.Cc){if($.ga==null){var et;if($.ga=new pi,(et=$.ga==null)||(et=Y.width*Y.o,t($.Gb.length==0),$.Gb=o(et),$.Uc=0,$.Gb==null?et=0:($.mb=$.Gb,$.nb=$.Uc,$.rc=null,et=1),et=!et),!et){et=$.ga;var it=$.Fa,dt=$.P,bt=$.qc,_t=$.mb,Sr=$.nb,xt=dt+1,ir=bt-1,cr=et.l;if(t(it!=null&&_t!=null&&Y!=null),Vo[0]=null,Vo[1]=yi,Vo[2]=ma,Vo[3]=Ji,et.ca=_t,et.tb=Sr,et.c=Y.width,et.i=Y.height,t(0<et.c&&0<et.i),1>=bt)Y=0;else if(et.$a=3&it[dt+0],et.Z=it[dt+0]>>2&3,et.Lc=it[dt+0]>>4&3,dt=it[dt+0]>>6&3,0>et.$a||1<et.$a||4<=et.Z||1<et.Lc||dt)Y=0;else if(cr.put=Rr,cr.ac=Vr,cr.bc=un,cr.ma=et,cr.width=Y.width,cr.height=Y.height,cr.Da=Y.Da,cr.v=Y.v,cr.va=Y.va,cr.j=Y.j,cr.o=Y.o,et.$a)e:{t(et.$a==1),Y=Pn();t:for(;;){if(Y==null){Y=0;break e}if(t(et!=null),et.mc=Y,Y.c=et.c,Y.i=et.i,Y.l=et.l,Y.l.ma=et,Y.l.width=et.c,Y.l.height=et.i,Y.a=0,Se(Y.m,it,xt,ir),!Gi(et.c,et.i,1,Y,null)||(Y.ab==1&&Y.gc[0].hc==3&&Hn(Y.s)?(et.ic=1,it=Y.c*Y.i,Y.Ta=null,Y.Ua=0,Y.V=o(it),Y.Ba=0,Y.V==null?(Y.a=1,Y=0):Y=1):(et.ic=0,Y=pa(Y,et.c)),!Y))break t;Y=1;break e}et.mc=null,Y=0}else Y=ir>=et.c*et.i;et=!Y}if(et)return null;$.ga.Lc!=1?$.Ga=0:Ee=Je-he}t($.ga!=null),t(he+Ee<=Je);e:{if(Y=(it=$.ga).c,Je=it.l.o,it.$a==0){if(xt=$.rc,ir=$.Vc,cr=$.Fa,dt=$.P+1+he*Y,bt=$.mb,_t=$.nb+he*Y,t(dt<=$.P+$.qc),it.Z!=0)for(t(Vo[it.Z]!=null),et=0;et<Ee;++et)Vo[it.Z](xt,ir,cr,dt,bt,_t,Y),xt=bt,ir=_t,_t+=Y,dt+=Y;else for(et=0;et<Ee;++et)n(bt,_t,cr,dt,Y),xt=bt,ir=_t,_t+=Y,dt+=Y;$.rc=xt,$.Vc=ir}else{if(t(it.mc!=null),Y=he+Ee,t((et=it.mc)!=null),t(Y<=et.i),et.C>=Y)Y=1;else if(it.ic||Yl(),it.ic){it=et.V,xt=et.Ba,ir=et.c;var Dr=et.i,xr=(cr=1,dt=et.$/ir,bt=et.$%ir,_t=et.m,Sr=et.s,et.$),yr=ir*Dr,Fr=ir*Y,an=Sr.wc,Zr=xr<Fr?Ur(Sr,bt,dt):null;t(xr<=yr),t(Y<=Dr),t(Hn(Sr));t:for(;;){for(;!_t.h&&xr<Fr;){if(bt&an||(Zr=Ur(Sr,bt,dt)),t(Zr!=null),Ue(_t),256>(Dr=kt(Zr.G[0],Zr.H[0],_t)))it[xt+xr]=Dr,++xr,++bt>=ir&&(bt=0,++dt<=Y&&!(dt%16)&&Mi(et,dt));else{if(!(280>Dr)){cr=0;break t}Dr=qe(Dr-256,_t);var Wn,Fn=kt(Zr.G[4],Zr.H[4],_t);if(Ue(_t),!(xr>=(Fn=ht(ir,Fn=qe(Fn,_t)))&&yr-xr>=Dr)){cr=0;break t}for(Wn=0;Wn<Dr;++Wn)it[xt+xr+Wn]=it[xt+xr+Wn-Fn];for(xr+=Dr,bt+=Dr;bt>=ir;)bt-=ir,++dt<=Y&&!(dt%16)&&Mi(et,dt);xr<Fr&&bt&an&&(Zr=Ur(Sr,bt,dt))}t(_t.h==Me(_t))}Mi(et,dt>Y?Y:dt);break t}!cr||_t.h&&xr<yr?(cr=0,et.a=_t.h?5:3):et.$=xr,Y=cr}else Y=qr(et,et.V,et.Ba,et.c,et.i,Y,Ki);if(!Y){Ee=0;break e}}he+Ee>=Je&&($.Cc=1),Ee=1}if(!Ee)return null;if($.Cc&&((Ee=$.ga)!=null&&(Ee.mc=null),$.ga=null,0<$.Ga))return alert("todo:WebPDequantizeLevels"),null}return $.nb+he*He}function rs($,Y,he,Ee,He,Je){for(;0<He--;){var et,it=$,dt=Y+(he?1:0),bt=$,_t=Y+(he?0:3);for(et=0;et<Ee;++et){var Sr=bt[_t+4*et];Sr!=255&&(Sr*=32897,it[dt+4*et+0]=it[dt+4*et+0]*Sr>>23,it[dt+4*et+1]=it[dt+4*et+1]*Sr>>23,it[dt+4*et+2]=it[dt+4*et+2]*Sr>>23)}Y+=Je}}function ks($,Y,he,Ee,He){for(;0<Ee--;){var Je;for(Je=0;Je<he;++Je){var et=$[Y+2*Je+0],it=15&(bt=$[Y+2*Je+1]),dt=4369*it,bt=(240&bt|bt>>4)*dt>>16;$[Y+2*Je+0]=(240&et|et>>4)*dt>>16&240|(15&et|et<<4)*dt>>16>>4&15,$[Y+2*Je+1]=240&bt|it}Y+=He}}function Xl($,Y,he,Ee,He,Je,et,it){var dt,bt,_t=255;for(bt=0;bt<He;++bt){for(dt=0;dt<Ee;++dt){var Sr=$[Y+dt];Je[et+4*dt]=Sr,_t&=Sr}Y+=he,et+=it}return _t!=255}function ns($,Y,he,Ee,He){var Je;for(Je=0;Je<He;++Je)he[Ee+Je]=$[Y+Je]>>8}function Yl(){xi=rs,Ya=ks,Za=Xl,Ao=ns}function la($,Y,he){X[$]=function(Ee,He,Je,et,it,dt,bt,_t,Sr,xt,ir,cr,Dr,xr,yr,Fr,an){var Zr,Wn=an-1>>1,Fn=it[dt+0]|bt[_t+0]<<16,wi=Sr[xt+0]|ir[cr+0]<<16;t(Ee!=null);var zn=3*Fn+wi+131074>>2;for(Y(Ee[He+0],255&zn,zn>>16,Dr,xr),Je!=null&&(zn=3*wi+Fn+131074>>2,Y(Je[et+0],255&zn,zn>>16,yr,Fr)),Zr=1;Zr<=Wn;++Zr){var Bi=it[dt+Zr]|bt[_t+Zr]<<16,Lo=Sr[xt+Zr]|ir[cr+Zr]<<16,vi=Fn+Bi+wi+Lo+524296,Vn=vi+2*(Bi+wi)>>3;zn=Vn+Fn>>1,Fn=(vi=vi+2*(Fn+Lo)>>3)+Bi>>1,Y(Ee[He+2*Zr-1],255&zn,zn>>16,Dr,xr+(2*Zr-1)*he),Y(Ee[He+2*Zr-0],255&Fn,Fn>>16,Dr,xr+(2*Zr-0)*he),Je!=null&&(zn=vi+wi>>1,Fn=Vn+Lo>>1,Y(Je[et+2*Zr-1],255&zn,zn>>16,yr,Fr+(2*Zr-1)*he),Y(Je[et+2*Zr+0],255&Fn,Fn>>16,yr,Fr+(2*Zr+0)*he)),Fn=Bi,wi=Lo}1&an||(zn=3*Fn+wi+131074>>2,Y(Ee[He+an-1],255&zn,zn>>16,Dr,xr+(an-1)*he),Je!=null&&(zn=3*wi+Fn+131074>>2,Y(Je[et+an-1],255&zn,zn>>16,yr,Fr+(an-1)*he)))}}function As(){el[yu]=pf,el[gi]=Wc,el[Rl]=Td,el[Du]=ah,el[lf]=Pd,el[Gc]=oh,el[gm]=_m,el[Zh]=Wc,el[th]=ah,el[uf]=Pd,el[wd]=oh}function kl($){return $&-16384?0>$?0:255:$>>bu}function is($,Y){return kl((19077*$>>8)+(26149*Y>>8)-14234)}function Ca($,Y,he){return kl((19077*$>>8)-(6419*Y>>8)-(13320*he>>8)+8708)}function oo($,Y){return kl((19077*$>>8)+(33050*Y>>8)-17685)}function Qi($,Y,he,Ee,He){Ee[He+0]=is($,he),Ee[He+1]=Ca($,Y,he),Ee[He+2]=oo($,Y)}function Ms($,Y,he,Ee,He){Ee[He+0]=oo($,Y),Ee[He+1]=Ca($,Y,he),Ee[He+2]=is($,he)}function dl($,Y,he,Ee,He){var Je=Ca($,Y,he);Y=Je<<3&224|oo($,Y)>>3,Ee[He+0]=248&is($,he)|Je>>5,Ee[He+1]=Y}function ua($,Y,he,Ee,He){var Je=240&oo($,Y)|15;Ee[He+0]=240&is($,he)|Ca($,Y,he)>>4,Ee[He+1]=Je}function Zl($,Y,he,Ee,He){Ee[He+0]=255,Qi($,Y,he,Ee,He+1)}function fl($,Y,he,Ee,He){Ms($,Y,he,Ee,He),Ee[He+3]=255}function Ls($,Y,he,Ee,He){Qi($,Y,he,Ee,He),Ee[He+3]=255}function Fa($,Y){return 0>$?0:$>Y?Y:$}function po($,Y,he){X[$]=function(Ee,He,Je,et,it,dt,bt,_t,Sr){for(var xt=_t+(-2&Sr)*he;_t!=xt;)Y(Ee[He+0],Je[et+0],it[dt+0],bt,_t),Y(Ee[He+1],Je[et+0],it[dt+0],bt,_t+he),He+=2,++et,++dt,_t+=2*he;1&Sr&&Y(Ee[He+0],Je[et+0],it[dt+0],bt,_t)}}function Mu($,Y,he){return he==0?$==0?Y==0?6:5:Y==0?4:0:he}function Lu($,Y,he,Ee,He){switch($>>>30){case 3:y(Y,he,Ee,He,0);break;case 2:P(Y,he,Ee,He);break;case 1:re(Y,he,Ee,He)}}function hl($,Y){var he,Ee,He=Y.M,Je=Y.Nb,et=$.oc,it=$.pc+40,dt=$.oc,bt=$.pc+584,_t=$.oc,Sr=$.pc+600;for(he=0;16>he;++he)et[it+32*he-1]=129;for(he=0;8>he;++he)dt[bt+32*he-1]=129,_t[Sr+32*he-1]=129;for(0<He?et[it-1-32]=dt[bt-1-32]=_t[Sr-1-32]=129:(i(et,it-32-1,127,21),i(dt,bt-32-1,127,9),i(_t,Sr-32-1,127,9)),Ee=0;Ee<$.za;++Ee){var xt=Y.ya[Y.aa+Ee];if(0<Ee){for(he=-1;16>he;++he)n(et,it+32*he-4,et,it+32*he+12,4);for(he=-1;8>he;++he)n(dt,bt+32*he-4,dt,bt+32*he+4,4),n(_t,Sr+32*he-4,_t,Sr+32*he+4,4)}var ir=$.Gd,cr=$.Hd+Ee,Dr=xt.ad,xr=xt.Hc;if(0<He&&(n(et,it-32,ir[cr].y,0,16),n(dt,bt-32,ir[cr].f,0,8),n(_t,Sr-32,ir[cr].ea,0,8)),xt.Za){var yr=et,Fr=it-32+16;for(0<He&&(Ee>=$.za-1?i(yr,Fr,ir[cr].y[15],4):n(yr,Fr,ir[cr+1].y,0,4)),he=0;4>he;he++)yr[Fr+128+he]=yr[Fr+256+he]=yr[Fr+384+he]=yr[Fr+0+he];for(he=0;16>he;++he,xr<<=2)yr=et,Fr=it+gf[he],yl[xt.Ob[he]](yr,Fr),Lu(xr,Dr,16*+he,yr,Fr)}else if(yr=Mu(Ee,He,xt.Ob[0]),vu[yr](et,it),xr!=0)for(he=0;16>he;++he,xr<<=2)Lu(xr,Dr,16*+he,et,it+gf[he]);for(he=xt.Gc,yr=Mu(Ee,He,xt.Dd),Nu[yr](dt,bt),Nu[yr](_t,Sr),xr=Dr,yr=dt,Fr=bt,255&(xt=0|he)&&(170&xt?j(xr,256,yr,Fr):ye(xr,256,yr,Fr)),xt=_t,xr=Sr,255&(he>>=8)&&(170&he?j(Dr,320,xt,xr):ye(Dr,320,xt,xr)),He<$.Ub-1&&(n(ir[cr].y,0,et,it+480,16),n(ir[cr].f,0,dt,bt+224,8),n(ir[cr].ea,0,_t,Sr+224,8)),he=8*Je*$.B,ir=$.sa,cr=$.ta+16*Ee+16*Je*$.R,Dr=$.qa,xt=$.ra+8*Ee+he,xr=$.Ha,yr=$.Ia+8*Ee+he,he=0;16>he;++he)n(ir,cr+he*$.R,et,it+32*he,16);for(he=0;8>he;++he)n(Dr,xt+he*$.B,dt,bt+32*he,8),n(xr,yr+he*$.B,_t,Sr+32*he,8)}}function pl($,Y,he,Ee,He,Je,et,it,dt){var bt=[0],_t=[0],Sr=0,xt=dt!=null?dt.kd:0,ir=dt??new ni;if($==null||12>he)return 7;ir.data=$,ir.w=Y,ir.ha=he,Y=[Y],he=[he],ir.gb=[ir.gb];e:{var cr=Y,Dr=he,xr=ir.gb;if(t($!=null),t(Dr!=null),t(xr!=null),xr[0]=0,12<=Dr[0]&&!r($,cr[0],"RIFF")){if(r($,cr[0]+8,"WEBP")){xr=3;break e}var yr=ot($,cr[0]+4);if(12>yr||4294967286<yr){xr=3;break e}if(xt&&yr>Dr[0]-8){xr=7;break e}xr[0]=yr,cr[0]+=12,Dr[0]-=12}xr=0}if(xr!=0)return xr;for(yr=0<ir.gb[0],he=he[0];;){e:{var Fr=$;Dr=Y,xr=he;var an=bt,Zr=_t,Wn=cr=[0];if((zn=Sr=[Sr])[0]=0,8>xr[0])xr=7;else{if(!r(Fr,Dr[0],"VP8X")){if(ot(Fr,Dr[0]+4)!=10){xr=3;break e}if(18>xr[0]){xr=7;break e}var Fn=ot(Fr,Dr[0]+8),wi=1+Mt(Fr,Dr[0]+12);if(2147483648<=wi*(Fr=1+Mt(Fr,Dr[0]+15))){xr=3;break e}Wn!=null&&(Wn[0]=Fn),an!=null&&(an[0]=wi),Zr!=null&&(Zr[0]=Fr),Dr[0]+=18,xr[0]-=18,zn[0]=1}xr=0}}if(Sr=Sr[0],cr=cr[0],xr!=0)return xr;if(Dr=!!(2&cr),!yr&&Sr)return 3;if(Je!=null&&(Je[0]=!!(16&cr)),et!=null&&(et[0]=Dr),it!=null&&(it[0]=0),et=bt[0],cr=_t[0],Sr&&Dr&&dt==null){xr=0;break}if(4>he){xr=7;break}if(yr&&Sr||!yr&&!Sr&&!r($,Y[0],"ALPH")){he=[he],ir.na=[ir.na],ir.P=[ir.P],ir.Sa=[ir.Sa];e:{Fn=$,xr=Y,yr=he;var zn=ir.gb;an=ir.na,Zr=ir.P,Wn=ir.Sa,wi=22,t(Fn!=null),t(yr!=null),Fr=xr[0];var Bi=yr[0];for(t(an!=null),t(Wn!=null),an[0]=null,Zr[0]=null,Wn[0]=0;;){if(xr[0]=Fr,yr[0]=Bi,8>Bi){xr=7;break e}var Lo=ot(Fn,Fr+4);if(4294967286<Lo){xr=3;break e}var vi=8+Lo+1&-2;if(wi+=vi,0<zn&&wi>zn){xr=3;break e}if(!r(Fn,Fr,"VP8 ")||!r(Fn,Fr,"VP8L")){xr=0;break e}if(Bi[0]<vi){xr=7;break e}r(Fn,Fr,"ALPH")||(an[0]=Fn,Zr[0]=Fr+8,Wn[0]=Lo),Fr+=vi,Bi-=vi}}if(he=he[0],ir.na=ir.na[0],ir.P=ir.P[0],ir.Sa=ir.Sa[0],xr!=0)break}he=[he],ir.Ja=[ir.Ja],ir.xa=[ir.xa];e:if(zn=$,xr=Y,yr=he,an=ir.gb[0],Zr=ir.Ja,Wn=ir.xa,Fn=xr[0],Fr=!r(zn,Fn,"VP8 "),wi=!r(zn,Fn,"VP8L"),t(zn!=null),t(yr!=null),t(Zr!=null),t(Wn!=null),8>yr[0])xr=7;else{if(Fr||wi){if(zn=ot(zn,Fn+4),12<=an&&zn>an-12){xr=3;break e}if(xt&&zn>yr[0]-8){xr=7;break e}Zr[0]=zn,xr[0]+=8,yr[0]-=8,Wn[0]=wi}else Wn[0]=5<=yr[0]&&zn[Fn+0]==47&&!(zn[Fn+4]>>5),Zr[0]=yr[0];xr=0}if(he=he[0],ir.Ja=ir.Ja[0],ir.xa=ir.xa[0],Y=Y[0],xr!=0)break;if(4294967286<ir.Ja)return 3;if(it==null||Dr||(it[0]=ir.xa?2:1),et=[et],cr=[cr],ir.xa){if(5>he){xr=7;break}it=et,xt=cr,Dr=Je,$==null||5>he?$=0:5<=he&&$[Y+0]==47&&!($[Y+4]>>5)?(yr=[0],zn=[0],an=[0],Se(Zr=new _e,$,Y,he),Te(Zr,yr,zn,an)?(it!=null&&(it[0]=yr[0]),xt!=null&&(xt[0]=zn[0]),Dr!=null&&(Dr[0]=an[0]),$=1):$=0):$=0}else{if(10>he){xr=7;break}it=cr,$==null||10>he||!Qu($,Y+3,he-3)?$=0:(xt=$[Y+0]|$[Y+1]<<8|$[Y+2]<<16,Dr=16383&($[Y+7]<<8|$[Y+6]),$=16383&($[Y+9]<<8|$[Y+8]),1&xt||3<(xt>>1&7)||!(xt>>4&1)||xt>>5>=ir.Ja||!Dr||!$?$=0:(et&&(et[0]=Dr),it&&(it[0]=$),$=1))}if(!$||(et=et[0],cr=cr[0],Sr&&(bt[0]!=et||_t[0]!=cr)))return 3;dt!=null&&(dt[0]=ir,dt.offset=Y-dt.w,t(4294967286>Y-dt.w),t(dt.offset==dt.ha-he));break}return xr==0||xr==7&&Sr&&dt==null?(Je!=null&&(Je[0]|=ir.na!=null&&0<ir.na.length),Ee!=null&&(Ee[0]=et),He!=null&&(He[0]=cr),0):xr}function so($,Y,he){var Ee=Y.width,He=Y.height,Je=0,et=0,it=Ee,dt=He;if(Y.Da=$!=null&&0<$.Da,Y.Da&&(it=$.cd,dt=$.bd,Je=$.v,et=$.j,11>he||(Je&=-2,et&=-2),0>Je||0>et||0>=it||0>=dt||Je+it>Ee||et+dt>He))return 0;if(Y.v=Je,Y.j=et,Y.va=Je+it,Y.o=et+dt,Y.U=it,Y.T=dt,Y.da=$!=null&&0<$.da,Y.da){if(!Gt(it,dt,he=[$.ib],Je=[$.hb]))return 0;Y.ib=he[0],Y.hb=Je[0]}return Y.ob=$!=null&&$.ob,Y.Kb=$==null||!$.Sd,Y.da&&(Y.ob=Y.ib<3*Ee/4&&Y.hb<3*He/4,Y.Kb=0),1}function Xa($){if($==null)return 2;if(11>$.S){var Y=$.f.RGBA;Y.fb+=($.height-1)*Y.A,Y.A=-Y.A}else Y=$.f.kb,$=$.height,Y.O+=($-1)*Y.fa,Y.fa=-Y.fa,Y.N+=($-1>>1)*Y.Ab,Y.Ab=-Y.Ab,Y.W+=($-1>>1)*Y.Db,Y.Db=-Y.Db,Y.F!=null&&(Y.J+=($-1)*Y.lb,Y.lb=-Y.lb);return 0}function Kl($,Y,he,Ee){if(Ee==null||0>=$||0>=Y)return 2;if(he!=null){if(he.Da){var He=he.cd,Je=he.bd,et=-2&he.v,it=-2&he.j;if(0>et||0>it||0>=He||0>=Je||et+He>$||it+Je>Y)return 2;$=He,Y=Je}if(he.da){if(!Gt($,Y,He=[he.ib],Je=[he.hb]))return 2;$=He[0],Y=Je[0]}}Ee.width=$,Ee.height=Y;e:{var dt=Ee.width,bt=Ee.height;if($=Ee.S,0>=dt||0>=bt||!($>=yu&&13>$))$=2;else{if(0>=Ee.Rd&&Ee.sd==null){et=Je=He=Y=0;var _t=(it=dt*tu[$])*bt;if(11>$||(Je=(bt+1)/2*(Y=(dt+1)/2),$==12&&(et=(He=dt)*bt)),(bt=o(_t+2*Je+et))==null){$=1;break e}Ee.sd=bt,11>$?((dt=Ee.f.RGBA).eb=bt,dt.fb=0,dt.A=it,dt.size=_t):((dt=Ee.f.kb).y=bt,dt.O=0,dt.fa=it,dt.Fd=_t,dt.f=bt,dt.N=0+_t,dt.Ab=Y,dt.Cd=Je,dt.ea=bt,dt.W=0+_t+Je,dt.Db=Y,dt.Ed=Je,$==12&&(dt.F=bt,dt.J=0+_t+2*Je),dt.Tc=et,dt.lb=He)}if(Y=1,He=Ee.S,Je=Ee.width,et=Ee.height,He>=yu&&13>He)if(11>He)$=Ee.f.RGBA,Y&=(it=Math.abs($.A))*(et-1)+Je<=$.size,Y&=it>=Je*tu[He],Y&=$.eb!=null;else{$=Ee.f.kb,it=(Je+1)/2,_t=(et+1)/2,dt=Math.abs($.fa),bt=Math.abs($.Ab);var Sr=Math.abs($.Db),xt=Math.abs($.lb),ir=xt*(et-1)+Je;Y&=dt*(et-1)+Je<=$.Fd,Y&=bt*(_t-1)+it<=$.Cd,Y=(Y&=Sr*(_t-1)+it<=$.Ed)&dt>=Je&bt>=it&Sr>=it,Y&=$.y!=null,Y&=$.f!=null,Y&=$.ea!=null,He==12&&(Y&=xt>=Je,Y&=ir<=$.Tc,Y&=$.F!=null)}else Y=0;$=Y?0:2}}return $!=0||he!=null&&he.fd&&($=Xa(Ee)),$}var lo=64,ml=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xo=24,Qs=32,ga=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];hr("Predictor0","PredictorAdd0"),X.Predictor0=function(){return 4278190080},X.Predictor1=function($){return $},X.Predictor2=function($,Y,he){return Y[he+0]},X.Predictor3=function($,Y,he){return Y[he+1]},X.Predictor4=function($,Y,he){return Y[he-1]},X.Predictor5=function($,Y,he){return Cr(Cr($,Y[he+1]),Y[he+0])},X.Predictor6=function($,Y,he){return Cr($,Y[he-1])},X.Predictor7=function($,Y,he){return Cr($,Y[he+0])},X.Predictor8=function($,Y,he){return Cr(Y[he-1],Y[he+0])},X.Predictor9=function($,Y,he){return Cr(Y[he+0],Y[he+1])},X.Predictor10=function($,Y,he){return Cr(Cr($,Y[he-1]),Cr(Y[he+0],Y[he+1]))},X.Predictor11=function($,Y,he){var Ee=Y[he+0];return 0>=lr(Ee>>24&255,$>>24&255,(Y=Y[he-1])>>24&255)+lr(Ee>>16&255,$>>16&255,Y>>16&255)+lr(Ee>>8&255,$>>8&255,Y>>8&255)+lr(255&Ee,255&$,255&Y)?Ee:$},X.Predictor12=function($,Y,he){var Ee=Y[he+0];return(br(($>>24&255)+(Ee>>24&255)-((Y=Y[he-1])>>24&255))<<24|br(($>>16&255)+(Ee>>16&255)-(Y>>16&255))<<16|br(($>>8&255)+(Ee>>8&255)-(Y>>8&255))<<8|br((255&$)+(255&Ee)-(255&Y)))>>>0},X.Predictor13=function($,Y,he){var Ee=Y[he-1];return(nr(($=Cr($,Y[he+0]))>>24&255,Ee>>24&255)<<24|nr($>>16&255,Ee>>16&255)<<16|nr($>>8&255,Ee>>8&255)<<8|nr(255&$,255&Ee))>>>0};var Ds=X.PredictorAdd0;X.PredictorAdd1=Pr,hr("Predictor2","PredictorAdd2"),hr("Predictor3","PredictorAdd3"),hr("Predictor4","PredictorAdd4"),hr("Predictor5","PredictorAdd5"),hr("Predictor6","PredictorAdd6"),hr("Predictor7","PredictorAdd7"),hr("Predictor8","PredictorAdd8"),hr("Predictor9","PredictorAdd9"),hr("Predictor10","PredictorAdd10"),hr("Predictor11","PredictorAdd11"),hr("Predictor12","PredictorAdd12"),hr("Predictor13","PredictorAdd13");var qo=X.PredictorAdd2;Ht("ColorIndexInverseTransform","MapARGB","32b",function($){return $>>8&255},function($){return $}),Ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function($){return $},function($){return $>>8&255});var Al,gu=X.ColorIndexInverseTransform,Ns=X.MapARGB,Ml=X.VP8LColorIndexInverseTransformAlpha,Jl=X.MapAlpha,er=X.VP8LPredictorsAdd=[];er.length=16,(X.VP8LPredictors=[]).length=16,(X.VP8LPredictorsAdd_C=[]).length=16,(X.VP8LPredictors_C=[]).length=16;var sr,ln,yn,ui,Sn,T,m,y,P,j,re,ye,Ae,Ke,gt,rr,fr,zr,hn,Mn,$n,An,In,ki,xi,Ya,Za,Ao,Mo=o(511),gl=o(2041),Ll=o(225),Os=o(767),as=0,Ru=gl,os=Ll,Aa=Os,$o=Mo,yu=0,gi=1,Rl=2,Du=3,lf=4,Gc=5,gm=6,Zh=7,th=8,uf=9,wd=10,rh=[2,3,7],nh=[3,3,11],Sd=[280,256,256,256,40],ih=[0,1,1,1,0],Kh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],cf=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Cd=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ed=8,Hc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],df=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ql=null,Dy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ym=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ff=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],vm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vu=[],yl=[],Nu=[],uo=1,ec=2,Vo=[],el=[];la("UpsampleRgbLinePair",Qi,3),la("UpsampleBgrLinePair",Ms,3),la("UpsampleRgbaLinePair",Ls,4),la("UpsampleBgraLinePair",fl,4),la("UpsampleArgbLinePair",Zl,4),la("UpsampleRgba4444LinePair",ua,2),la("UpsampleRgb565LinePair",dl,2);var pf=X.UpsampleRgbLinePair,Td=X.UpsampleBgrLinePair,Wc=X.UpsampleRgbaLinePair,ah=X.UpsampleBgraLinePair,Pd=X.UpsampleArgbLinePair,oh=X.UpsampleRgba4444LinePair,_m=X.UpsampleRgb565LinePair,mf=16,tc=1<<mf-1,Ou=-227,Fs=482,bu=6,sh=0,xm=o(256),wm=o(256),Id=o(256),Qh=o(256),lh=o(Fs-Ou),Sm=o(Fs-Ou);po("YuvToRgbRow",Qi,3),po("YuvToBgrRow",Ms,3),po("YuvToRgbaRow",Ls,4),po("YuvToBgraRow",fl,4),po("YuvToArgbRow",Zl,4),po("YuvToRgba4444Row",ua,2),po("YuvToRgb565Row",dl,2);var gf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xc=[0,2,8],kd=[8,7,6,4,4,2,2,2,1,1,1,1],eu=1;this.WebPDecodeRGBA=function($,Y,he,Ee,He){var Je=gi,et=new Ln,it=new Bt;et.ba=it,it.S=Je,it.width=[it.width],it.height=[it.height];var dt=it.width,bt=it.height,_t=new wt;if(_t==null||$==null)var Sr=2;else t(_t!=null),Sr=pl($,Y,he,_t.width,_t.height,_t.Pd,_t.Qd,_t.format,null);if(Sr!=0?dt=0:(dt!=null&&(dt[0]=_t.width[0]),bt!=null&&(bt[0]=_t.height[0]),dt=1),dt){it.width=it.width[0],it.height=it.height[0],Ee!=null&&(Ee[0]=it.width),He!=null&&(He[0]=it.height);e:{if(Ee=new Ga,(He=new ni).data=$,He.w=Y,He.ha=he,He.kd=1,Y=[0],t(He!=null),(($=pl(He.data,He.w,He.ha,null,null,null,Y,null,He))==0||$==7)&&Y[0]&&($=4),(Y=$)==0){if(t(et!=null),Ee.data=He.data,Ee.w=He.w+He.offset,Ee.ha=He.ha-He.offset,Ee.put=Rr,Ee.ac=Vr,Ee.bc=un,Ee.ma=et,He.xa){if(($=Pn())==null){et=1;break e}if((function(xt,ir){var cr=[0],Dr=[0],xr=[0];t:for(;;){if(xt==null)return 0;if(ir==null)return xt.a=2,0;if(xt.l=ir,xt.a=0,Se(xt.m,ir.data,ir.w,ir.ha),!Te(xt.m,cr,Dr,xr)){xt.a=3;break t}if(xt.xb=ec,ir.width=cr[0],ir.height=Dr[0],!Gi(cr[0],Dr[0],1,xt,null))break t;return 1}return t(xt.a!=0),0})($,Ee)){if(Ee=(Y=Kl(Ee.width,Ee.height,et.Oa,et.ba))==0){t:{Ee=$;r:for(;;){if(Ee==null){Ee=0;break t}if(t(Ee.s.yc!=null),t(Ee.s.Ya!=null),t(0<Ee.s.Wb),t((he=Ee.l)!=null),t((He=he.ma)!=null),Ee.xb!=0){if(Ee.ca=He.ba,Ee.tb=He.tb,t(Ee.ca!=null),!so(He.Oa,he,Du)){Ee.a=2;break r}if(!pa(Ee,he.width)||he.da)break r;if((he.da||Ot(Ee.ca.S))&&Yl(),11>Ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ee.ca.f.kb.F!=null&&Yl()),Ee.Pb&&0<Ee.s.ua&&Ee.s.vb.X==null&&!$e(Ee.s.vb,Ee.s.Wa.Xa)){Ee.a=1;break r}Ee.xb=0}if(!qr(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,he.o,si))break r;He.Dc=Ee.Ma,Ee=1;break t}t(Ee.a!=0),Ee=0}Ee=!Ee}Ee&&(Y=$.a)}else Y=$.a}else{if(($=new Zs)==null){et=1;break e}if($.Fa=He.na,$.P=He.P,$.qc=He.Sa,Au($,Ee)){if((Y=Kl(Ee.width,Ee.height,et.Oa,et.ba))==0){if($.Aa=0,he=et.Oa,t((He=$)!=null),he!=null){if(0<(dt=0>(dt=he.Md)?0:100<dt?255:255*dt/100)){for(bt=_t=0;4>bt;++bt)12>(Sr=He.pb[bt]).lc&&(Sr.ia=dt*kd[0>Sr.lc?0:Sr.lc]>>3),_t|=Sr.ia;_t&&(alert("todo:VP8InitRandom"),He.ia=1)}He.Ga=he.Id,100<He.Ga?He.Ga=100:0>He.Ga&&(He.Ga=0)}(function(xt,ir){if(xt==null)return 0;if(ir==null)return Da(xt,2,"NULL VP8Io parameter in VP8Decode().");if(!xt.cb&&!Au(xt,ir))return 0;if(t(xt.cb),ir.ac==null||ir.ac(ir)){ir.ob&&(xt.L=0);var cr=Xc[xt.L];if(xt.L==2?(xt.yb=0,xt.zb=0):(xt.yb=ir.v-cr>>4,xt.zb=ir.j-cr>>4,0>xt.yb&&(xt.yb=0),0>xt.zb&&(xt.zb=0)),xt.Va=ir.o+15+cr>>4,xt.Hb=ir.va+15+cr>>4,xt.Hb>xt.za&&(xt.Hb=xt.za),xt.Va>xt.Ub&&(xt.Va=xt.Ub),0<xt.L){var Dr=xt.ed;for(cr=0;4>cr;++cr){var xr;if(xt.Qa.Cb){var yr=xt.Qa.Lb[cr];xt.Qa.Fb||(yr+=Dr.Tb)}else yr=Dr.Tb;for(xr=0;1>=xr;++xr){var Fr=xt.gd[cr][xr],an=yr;if(Dr.Pc&&(an+=Dr.vd[0],xr&&(an+=Dr.od[0])),0<(an=0>an?0:63<an?63:an)){var Zr=an;0<Dr.wb&&(Zr=4<Dr.wb?Zr>>2:Zr>>1)>9-Dr.wb&&(Zr=9-Dr.wb),1>Zr&&(Zr=1),Fr.dd=Zr,Fr.tc=2*an+Zr,Fr.ld=40<=an?2:15<=an?1:0}else Fr.tc=0;Fr.La=xr}}}cr=0}else Da(xt,6,"Frame setup failed"),cr=xt.a;if(cr=cr==0){if(cr){xt.$c=0,0<xt.Aa||(xt.Ic=eu);t:{cr=xt.Ic,Dr=4*(Zr=xt.za);var Wn=32*Zr,Fn=Zr+1,wi=0<xt.L?Zr*(0<xt.Aa?2:1):0,zn=(xt.Aa==2?2:1)*Zr;if((Fr=Dr+832+(xr=3*(16*cr+Xc[xt.L])/2*Wn)+(yr=xt.Fa!=null&&0<xt.Fa.length?xt.Kc.c*xt.Kc.i:0))!=Fr)cr=0;else{if(Fr>xt.Vb){if(xt.Vb=0,xt.Ec=o(Fr),xt.Fc=0,xt.Ec==null){cr=Da(xt,1,"no memory during frame initialization.");break t}xt.Vb=Fr}Fr=xt.Ec,an=xt.Fc,xt.Ac=Fr,xt.Bc=an,an+=Dr,xt.Gd=l(Wn,ps),xt.Hd=0,xt.rb=l(Fn+1,Ys),xt.sb=1,xt.wa=wi?l(wi,bi):null,xt.Y=0,xt.D.Nb=0,xt.D.wa=xt.wa,xt.D.Y=xt.Y,0<xt.Aa&&(xt.D.Y+=Zr),t(!0),xt.oc=Fr,xt.pc=an,an+=832,xt.ya=l(zn,fi),xt.aa=0,xt.D.ya=xt.ya,xt.D.aa=xt.aa,xt.Aa==2&&(xt.D.aa+=Zr),xt.R=16*Zr,xt.B=8*Zr,Zr=(Wn=Xc[xt.L])*xt.R,Wn=Wn/2*xt.B,xt.sa=Fr,xt.ta=an+Zr,xt.qa=xt.sa,xt.ra=xt.ta+16*cr*xt.R+Wn,xt.Ha=xt.qa,xt.Ia=xt.ra+8*cr*xt.B+Wn,xt.$c=0,an+=xr,xt.mb=yr?Fr:null,xt.nb=yr?an:null,t(an+yr<=xt.Fc+xt.Vb),ms(xt),i(xt.Ac,xt.Bc,0,Dr),cr=1}}if(cr){if(ir.ka=0,ir.y=xt.sa,ir.O=xt.ta,ir.f=xt.qa,ir.N=xt.ra,ir.ea=xt.Ha,ir.Vd=xt.Ia,ir.fa=xt.R,ir.Rc=xt.B,ir.F=null,ir.J=0,!as){for(cr=-255;255>=cr;++cr)Mo[255+cr]=0>cr?-cr:cr;for(cr=-1020;1020>=cr;++cr)gl[1020+cr]=-128>cr?-128:127<cr?127:cr;for(cr=-112;112>=cr;++cr)Ll[112+cr]=-16>cr?-16:15<cr?15:cr;for(cr=-255;510>=cr;++cr)Os[255+cr]=0>cr?0:255<cr?255:cr;as=1}m=St,y=Wl,j=K,re=pe,ye=Ye,P=Hl,Ae=se,Ke=Ge,gt=or,rr=Nr,fr=pt,zr=jt,hn=Xr,Mn=xn,$n=cl,An=Is,In=Oa,ki=Wa,yl[0]=ti,yl[1]=Rt,yl[2]=Or,yl[3]=fn,yl[4]=Ci,yl[5]=Li,yl[6]=hi,yl[7]=Ii,yl[8]=ka,yl[9]=_n,vu[0]=Yr,vu[1]=jr,vu[2]=Kr,vu[3]=Wr,vu[4]=Bn,vu[5]=gn,vu[6]=Rn,Nu[0]=bn,Nu[1]=Jt,Nu[2]=Zn,Nu[3]=On,Nu[4]=wa,Nu[5]=Js,Nu[6]=Ps,cr=1}else cr=0}cr&&(cr=(function(Bi,Lo){for(Bi.M=0;Bi.M<Bi.Va;++Bi.M){var vi,Vn=Bi.Jc[Bi.M&Bi.Xb],vn=Bi.m,ya=Bi;for(vi=0;vi<ya.za;++vi){var Dn=vn,Ni=ya,va=Ni.Ac,Uo=Ni.Bc+4*vi,Bs=Ni.zc,co=Ni.ya[Ni.aa+vi];if(Ni.Qa.Bb?co.$b=Ze(Dn,Ni.Pa.jb[0])?2+Ze(Dn,Ni.Pa.jb[2]):Ze(Dn,Ni.Pa.jb[1]):co.$b=0,Ni.kc&&(co.Ad=Ze(Dn,Ni.Bd)),co.Za=!Ze(Dn,145)+0,co.Za){var zs=co.Ob,Ka=0;for(Ni=0;4>Ni;++Ni){var mo,Jr=Bs[0+Ni];for(mo=0;4>mo;++mo){Jr=vm[va[Uo+mo]][Jr];for(var pn=ff[Ze(Dn,Jr[0])];0<pn;)pn=ff[2*pn+Ze(Dn,Jr[pn])];Jr=-pn,va[Uo+mo]=Jr}n(zs,Ka,va,Uo,4),Ka+=4,Bs[0+Ni]=Jr}}else Jr=Ze(Dn,156)?Ze(Dn,128)?1:3:Ze(Dn,163)?2:0,co.Ob[0]=Jr,i(va,Uo,Jr,4),i(Bs,0,Jr,4);co.Dd=Ze(Dn,142)?Ze(Dn,114)?Ze(Dn,183)?1:3:2:0}if(ya.m.Ka)return Da(Bi,7,"Premature end-of-partition0 encountered.");for(;Bi.ja<Bi.za;++Bi.ja){if(ya=Vn,Dn=(vn=Bi).rb[vn.sb-1],va=vn.rb[vn.sb+vn.ja],vi=vn.ya[vn.aa+vn.ja],Uo=vn.kc?vi.Ad:0)Dn.la=va.la=0,vi.Za||(Dn.Na=va.Na=0),vi.Hc=0,vi.Gc=0,vi.ia=0;else{var Ba,ra;if(Dn=va,va=ya,Uo=vn.Pa.Xc,Bs=vn.ya[vn.aa+vn.ja],co=vn.pb[Bs.$b],Ni=Bs.ad,zs=0,Ka=vn.rb[vn.sb-1],Jr=mo=0,i(Ni,zs,0,384),Bs.Za)var wo=0,za=Uo[3];else{pn=o(16);var go=Dn.Na+Ka.Na;if(go=Ql(va,Uo[1],go,co.Eb,0,pn,0),Dn.Na=Ka.Na=(0<go)+0,1<go)m(pn,0,Ni,zs);else{var ca=pn[0]+3>>3;for(pn=0;256>pn;pn+=16)Ni[zs+pn]=ca}wo=1,za=Uo[0]}var ba=15&Dn.la,ja=15&Ka.la;for(pn=0;4>pn;++pn){var Hi=1&ja;for(ca=ra=0;4>ca;++ca)ba=ba>>1|(Hi=(go=Ql(va,za,go=Hi+(1&ba),co.Sc,wo,Ni,zs))>wo)<<7,ra=ra<<2|(3<go?3:1<go?2:Ni[zs+0]!=0),zs+=16;ba>>=4,ja=ja>>1|Hi<<7,mo=(mo<<8|ra)>>>0}for(za=ba,wo=ja>>4,Ba=0;4>Ba;Ba+=2){for(ra=0,ba=Dn.la>>4+Ba,ja=Ka.la>>4+Ba,pn=0;2>pn;++pn){for(Hi=1&ja,ca=0;2>ca;++ca)go=Hi+(1&ba),ba=ba>>1|(Hi=0<(go=Ql(va,Uo[2],go,co.Qc,0,Ni,zs)))<<3,ra=ra<<2|(3<go?3:1<go?2:Ni[zs+0]!=0),zs+=16;ba>>=2,ja=ja>>1|Hi<<5}Jr|=ra<<4*Ba,za|=ba<<4<<Ba,wo|=(240&ja)<<Ba}Dn.la=za,Ka.la=wo,Bs.Hc=mo,Bs.Gc=Jr,Bs.ia=43690&Jr?0:co.ia,Uo=!(mo|Jr)}if(0<vn.L&&(vn.wa[vn.Y+vn.ja]=vn.gd[vi.$b][vi.Za],vn.wa[vn.Y+vn.ja].La|=!Uo),ya.Ka)return Da(Bi,7,"Premature end-of-file encountered.")}if(ms(Bi),vn=Lo,ya=1,vi=(Vn=Bi).D,Dn=0<Vn.L&&Vn.M>=Vn.zb&&Vn.M<=Vn.Va,Vn.Aa==0)t:{if(vi.M=Vn.M,vi.uc=Dn,hl(Vn,vi),ya=1,vi=(ra=Vn.D).Nb,Dn=(Jr=Xc[Vn.L])*Vn.R,va=Jr/2*Vn.B,pn=16*vi*Vn.R,ca=8*vi*Vn.B,Uo=Vn.sa,Bs=Vn.ta-Dn+pn,co=Vn.qa,Ni=Vn.ra-va+ca,zs=Vn.Ha,Ka=Vn.Ia-va+ca,ja=(ba=ra.M)==0,mo=ba>=Vn.Va-1,Vn.Aa==2&&hl(Vn,ra),ra.uc)for(Hi=(go=Vn).D.M,t(go.D.uc),ra=go.yb;ra<go.Hb;++ra){wo=ra,za=Hi;var zi=(vl=(Ho=go).D).Nb;Ba=Ho.R;var vl=vl.wa[vl.Y+wo],Ro=Ho.sa,So=Ho.ta+16*zi*Ba+16*wo,tl=vl.dd,fa=vl.tc;if(fa!=0)if(t(3<=fa),Ho.L==1)0<wo&&An(Ro,So,Ba,fa+4),vl.La&&ki(Ro,So,Ba,fa),0<za&&$n(Ro,So,Ba,fa+4),vl.La&&In(Ro,So,Ba,fa);else{var Go=Ho.B,rl=Ho.qa,rc=Ho.ra+8*zi*Go+8*wo,ru=Ho.Ha,Ho=Ho.Ia+8*zi*Go+8*wo;zi=vl.ld,0<wo&&(Ke(Ro,So,Ba,fa+4,tl,zi),rr(rl,rc,ru,Ho,Go,fa+4,tl,zi)),vl.La&&(zr(Ro,So,Ba,fa,tl,zi),Mn(rl,rc,ru,Ho,Go,fa,tl,zi)),0<za&&(Ae(Ro,So,Ba,fa+4,tl,zi),gt(rl,rc,ru,Ho,Go,fa+4,tl,zi)),vl.La&&(fr(Ro,So,Ba,fa,tl,zi),hn(rl,rc,ru,Ho,Go,fa,tl,zi))}}if(Vn.ia&&alert("todo:DitherRow"),vn.put!=null){if(ra=16*ba,ba=16*(ba+1),ja?(vn.y=Vn.sa,vn.O=Vn.ta+pn,vn.f=Vn.qa,vn.N=Vn.ra+ca,vn.ea=Vn.Ha,vn.W=Vn.Ia+ca):(ra-=Jr,vn.y=Uo,vn.O=Bs,vn.f=co,vn.N=Ni,vn.ea=zs,vn.W=Ka),mo||(ba-=Jr),ba>vn.o&&(ba=vn.o),vn.F=null,vn.J=null,Vn.Fa!=null&&0<Vn.Fa.length&&ra<ba&&(vn.J=sa(Vn,vn,ra,ba-ra),vn.F=Vn.mb,vn.F==null&&vn.F.length==0)){ya=Da(Vn,3,"Could not decode alpha data.");break t}ra<vn.j&&(Jr=vn.j-ra,ra=vn.j,t(!(1&Jr)),vn.O+=Vn.R*Jr,vn.N+=Vn.B*(Jr>>1),vn.W+=Vn.B*(Jr>>1),vn.F!=null&&(vn.J+=vn.width*Jr)),ra<ba&&(vn.O+=vn.v,vn.N+=vn.v>>1,vn.W+=vn.v>>1,vn.F!=null&&(vn.J+=vn.v),vn.ka=ra-vn.j,vn.U=vn.va-vn.v,vn.T=ba-ra,ya=vn.put(vn))}vi+1!=Vn.Ic||mo||(n(Vn.sa,Vn.ta-Dn,Uo,Bs+16*Vn.R,Dn),n(Vn.qa,Vn.ra-va,co,Ni+8*Vn.B,va),n(Vn.Ha,Vn.Ia-va,zs,Ka+8*Vn.B,va))}if(!ya)return Da(Bi,6,"Output aborted.")}return 1})(xt,ir)),ir.bc!=null&&ir.bc(ir),cr&=1}return cr?(xt.cb=0,cr):0})($,Ee)||(Y=$.a)}}else Y=$.a}Y==0&&et.Oa!=null&&et.Oa.fd&&(Y=Xa(et.ba))}et=Y}Je=et!=0?null:11>Je?it.f.RGBA.eb:it.f.kb.y}else Je=null;return Je};var tu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(X,ie){for(var ee="",G=0;G<4;G++)ee+=String.fromCharCode(X[ie++]);return ee}function g(X,ie){return X[ie+0]|X[ie+1]<<8}function v(X,ie){return(X[ie+0]|X[ie+1]<<8|X[ie+2]<<16)>>>0}function x(X,ie){return(X[ie+0]|X[ie+1]<<8|X[ie+2]<<16|X[ie+3]<<24)>>>0}new c;var b=[0],S=[0],I=[],k=new c,M=e,O=(function(X,ie){var ee={},G=0,ne=!1,ae=0,le=0;if(ee.frames=[],!(function(ce,_e){for(var be=0;be<4;be++)if(ce[_e+be]!="RIFF".charCodeAt(be))return!0;return!1})(X,ie)){for(x(X,ie+=4),ie+=8;ie<X.length;){var fe=h(X,ie),ke=x(X,ie+=4);ie+=4;var me=ke+(1&ke);switch(fe){case"VP8 ":case"VP8L":ee.frames[G]===void 0&&(ee.frames[G]={}),(Pe=ee.frames[G]).src_off=ne?le:ie-8,Pe.src_size=ae+ke+8,G++,ne&&(ne=!1,ae=0,le=0);break;case"VP8X":(Pe=ee.header={}).feature_flags=X[ie];var Se=ie+4;Pe.canvas_width=1+v(X,Se),Se+=3,Pe.canvas_height=1+v(X,Se),Se+=3;break;case"ALPH":ne=!0,ae=me+8,le=ie-8;break;case"ANIM":(Pe=ee.header).bgcolor=x(X,ie),Se=ie+4,Pe.loop_count=g(X,Se),Se+=2;break;case"ANMF":var we,Pe;(Pe=ee.frames[G]={}).offset_x=2*v(X,ie),ie+=3,Pe.offset_y=2*v(X,ie),ie+=3,Pe.width=1+v(X,ie),ie+=3,Pe.height=1+v(X,ie),ie+=3,Pe.duration=v(X,ie),ie+=3,we=X[ie++],Pe.dispose=1&we,Pe.blend=we>>1&1}fe!="ANMF"&&(ie+=me)}return ee}})(M,0);O.response=M,O.rgbaoutput=!0,O.dataurl=!1;var F=O.header?O.header:null,D=O.frames?O.frames:null;if(F){F.loop_counter=F.loop_count,b=[F.canvas_height],S=[F.canvas_width];for(var q=0;q<D.length&&D[q].blend!=0;q++);}var z=D[0],U=k.WebPDecodeRGBA(M,z.src_off,z.src_size,S,b);z.rgba=U,z.imgwidth=S[0],z.imgheight=b[0];for(var H=0;H<S[0]*b[0]*4;H++)I[H]=U[H];return this.width=S,this.height=b,this.data=I,this}(function(e){var t,r,n,i,o,l,a,c,h,g=function(ce){return ce=ce||{},this.isStrokeTransparent=ce.isStrokeTransparent||!1,this.strokeOpacity=ce.strokeOpacity||1,this.strokeStyle=ce.strokeStyle||"#000000",this.fillStyle=ce.fillStyle||"#000000",this.isFillTransparent=ce.isFillTransparent||!1,this.fillOpacity=ce.fillOpacity||1,this.font=ce.font||"10px sans-serif",this.textBaseline=ce.textBaseline||"alphabetic",this.textAlign=ce.textAlign||"left",this.lineWidth=ce.lineWidth||1,this.lineJoin=ce.lineJoin||"miter",this.lineCap=ce.lineCap||"butt",this.path=ce.path||[],this.transform=ce.transform!==void 0?ce.transform.clone():new c,this.globalCompositeOperation=ce.globalCompositeOperation||"normal",this.globalAlpha=ce.globalAlpha||1,this.clip_path=ce.clip_path||[],this.currentPoint=ce.currentPoint||new l,this.miterLimit=ce.miterLimit||10,this.lastPoint=ce.lastPoint||new l,this.lineDashOffset=ce.lineDashOffset||0,this.lineDash=ce.lineDash||[],this.margin=ce.margin||[0,0,0,0],this.prevPageLastElemOffset=ce.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ce.ignoreClearRect!="boolean"||ce.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,h=new g}]);var v=function(ce){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var _e=ce;Object.defineProperty(this,"pdf",{get:function(){return _e}});var be=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return be},set:function(ot){be=!!ot}});var Me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Me},set:function(ot){Me=!!ot}});var Le=0;Object.defineProperty(this,"posX",{get:function(){return Le},set:function(ot){isNaN(ot)||(Le=ot)}});var Ue=0;Object.defineProperty(this,"posY",{get:function(){return Ue},set:function(ot){isNaN(ot)||(Ue=ot)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(ot){var $e;typeof ot=="number"?$e=[ot,ot,ot,ot]:(($e=new Array(4))[0]=ot[0],$e[1]=ot.length>=2?ot[1]:$e[0],$e[2]=ot.length>=3?ot[2]:$e[0],$e[3]=ot.length>=4?ot[3]:$e[1]),h.margin=$e}});var Oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Oe},set:function(ot){Oe=ot}});var tt=0;Object.defineProperty(this,"lastBreak",{get:function(){return tt},set:function(ot){tt=ot}});var Ze=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ze},set:function(ot){Ze=ot}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(ot){ot instanceof g&&(h=ot)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(ot){h.path=ot}});var Qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qe},set:function(ot){Qe=ot}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ot){var $e;$e=x(ot),this.ctx.fillStyle=$e.style,this.ctx.isFillTransparent=$e.a===0,this.ctx.fillOpacity=$e.a,this.pdf.setFillColor($e.r,$e.g,$e.b,{a:$e.a}),this.pdf.setTextColor($e.r,$e.g,$e.b,{a:$e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ot){var $e=x(ot);this.ctx.strokeStyle=$e.style,this.ctx.isStrokeTransparent=$e.a===0,this.ctx.strokeOpacity=$e.a,$e.a===0?this.pdf.setDrawColor(255,255,255):($e.a,this.pdf.setDrawColor($e.r,$e.g,$e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ot){["butt","round","square"].indexOf(ot)!==-1&&(this.ctx.lineCap=ot,this.pdf.setLineCap(ot))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ot){isNaN(ot)||(this.ctx.lineWidth=ot,this.pdf.setLineWidth(ot))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ot){["bevel","round","miter"].indexOf(ot)!==-1&&(this.ctx.lineJoin=ot,this.pdf.setLineJoin(ot))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ot){isNaN(ot)||(this.ctx.miterLimit=ot,this.pdf.setMiterLimit(ot))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ot){this.ctx.textBaseline=ot}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ot){["right","end","center","left","start"].indexOf(ot)!==-1&&(this.ctx.textAlign=ot)}});var Ie=null,Mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Mt},set:function(ot){Ie=null,Mt=ot}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ot){var $e;if(this.ctx.font=ot,($e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ot))!==null){var tr=$e[1];$e[2];var Wt=$e[3],Gt=$e[4];$e[5];var at=$e[6],dr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Gt)[2];Gt=Math.floor(dr==="px"?parseFloat(Gt)*this.pdf.internal.scaleFactor:dr==="em"?parseFloat(Gt)*this.pdf.getFontSize():parseFloat(Gt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Gt);var hr=(function(Qt){var Ht,Ct,Re=[],Be=Qt.trim();if(Be==="")return XS;if(Be in LD)return[LD[Be]];for(;Be!=="";){switch(Ct=null,Ht=(Be=DD(Be)).charAt(0)){case'"':case"'":Ct=Nse(Be.substring(1),Ht);break;default:Ct=Ose(Be)}if(Ct===null||(Re.push(Ct[0]),(Be=DD(Ct[1]))!==""&&Be.charAt(0)!==","))return XS;Be=Be.replace(/^,/,"")}return Re})(at);if(this.fontFaces){var ur=(function(Qt,Ht){if(Ie===null){var Ct=(function(Re){var Be=[];return Object.keys(Re).forEach(function(De){Re[De].forEach(function(rt){var mt=null;switch(rt){case"bold":mt={family:De,weight:"bold"};break;case"italic":mt={family:De,style:"italic"};break;case"bolditalic":mt={family:De,weight:"bold",style:"italic"};break;case"":case"normal":mt={family:De}}mt!==null&&(mt.ref={name:De,style:rt},Be.push(mt))})}),Be})(Qt.getFontList());Ie=(function(Re){for(var Be={},De=0;De<Re.length;++De){var rt=WS(Re[De]),mt=rt.family,At=rt.stretch,Ot=rt.style,Tt=rt.weight;Be[mt]=Be[mt]||{},Be[mt][At]=Be[mt][At]||{},Be[mt][At][Ot]=Be[mt][At][Ot]||{},Be[mt][At][Ot][Tt]=rt}return Be})(Ct.concat(Ht))}return Ie})(this.pdf,this.fontFaces),Cr=hr.map(function(Qt){return{family:Qt,stretch:"normal",weight:Wt,style:tr}}),br=(function(Qt,Ht,Ct){for(var Re=(Ct=Ct||{}).defaultFontFamily||"times",Be=Object.assign({},Dse,Ct.genericFontFamilies||{}),De=null,rt=null,mt=0;mt<Ht.length;++mt)if(Be[(De=WS(Ht[mt])).family]&&(De.family=Be[De.family]),Qt.hasOwnProperty(De.family)){rt=Qt[De.family];break}if(!(rt=rt||Qt[Re]))throw new Error("Could not find a font-family for the rule '"+RD(De)+"' and default family '"+Re+"'.");if(rt=(function(At,Ot){if(Ot[At])return Ot[At];var Tt=wT[At],Yt=Tt<=wT.normal?-1:1,Bt=MD(Ot,Sj,Tt,Yt);if(!Bt)throw new Error("Could not find a matching font-stretch value for "+At);return Bt})(De.stretch,rt),rt=(function(At,Ot){if(Ot[At])return Ot[At];for(var Tt=wj[At],Yt=0;Yt<Tt.length;++Yt)if(Ot[Tt[Yt]])return Ot[Tt[Yt]];throw new Error("Could not find a matching font-style for "+At)})(De.style,rt),!(rt=(function(At,Ot){if(Ot[At])return Ot[At];if(At===400&&Ot[500])return Ot[500];if(At===500&&Ot[400])return Ot[400];var Tt=Rse[At],Yt=MD(Ot,Cj,Tt,At<400?-1:1);if(!Yt)throw new Error("Could not find a matching font-weight for value "+At);return Yt})(De.weight,rt)))throw new Error("Failed to resolve a font for the rule '"+RD(De)+"'.");return rt})(ur,Cr);this.pdf.setFont(br.ref.name,br.ref.style)}else{var nr="";(Wt==="bold"||parseInt(Wt,10)>=700||tr==="bold")&&(nr="bold"),tr==="italic"&&(nr+="italic"),nr.length===0&&(nr="normal");for(var lr="",Pr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ar=0;ar<hr.length;ar++){if(this.pdf.internal.getFont(hr[ar],nr,{noFallback:!0,disableWarning:!0})!==void 0){lr=hr[ar];break}if(nr==="bolditalic"&&this.pdf.internal.getFont(hr[ar],"bold",{noFallback:!0,disableWarning:!0})!==void 0)lr=hr[ar],nr="bold";else if(this.pdf.internal.getFont(hr[ar],"normal",{noFallback:!0,disableWarning:!0})!==void 0){lr=hr[ar],nr="normal";break}}if(lr===""){for(var kr=0;kr<hr.length;kr++)if(Pr[hr[kr]]){lr=Pr[hr[kr]];break}}lr=lr===""?"Times":lr,this.pdf.setFont(lr,nr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ot){this.ctx.globalCompositeOperation=ot}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ot){this.ctx.globalAlpha=ot}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ot){this.ctx.lineDashOffset=ot,Pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ot){this.ctx.lineDash=ot,Pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ot){this.ctx.ignoreClearRect=!!ot}})};v.prototype.setLineDash=function(ce){this.lineDash=ce},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){D.call(this,"fill",!1)},v.prototype.stroke=function(){D.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(ce,_e){if(isNaN(ce)||isNaN(_e))throw fo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var be=this.ctx.transform.applyToPoint(new l(ce,_e));this.path.push({type:"mt",x:be.x,y:be.y}),this.ctx.lastPoint=new l(ce,_e)},v.prototype.closePath=function(){var ce=new l(0,0),_e=0;for(_e=this.path.length-1;_e!==-1;_e--)if(this.path[_e].type==="begin"&&Va(this.path[_e+1])==="object"&&typeof this.path[_e+1].x=="number"){ce=new l(this.path[_e+1].x,this.path[_e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(ce.x,ce.y)},v.prototype.lineTo=function(ce,_e){if(isNaN(ce)||isNaN(_e))throw fo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var be=this.ctx.transform.applyToPoint(new l(ce,_e));this.path.push({type:"lt",x:be.x,y:be.y}),this.ctx.lastPoint=new l(be.x,be.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},v.prototype.quadraticCurveTo=function(ce,_e,be,Me){if(isNaN(be)||isNaN(Me)||isNaN(ce)||isNaN(_e))throw fo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Le=this.ctx.transform.applyToPoint(new l(be,Me)),Ue=this.ctx.transform.applyToPoint(new l(ce,_e));this.path.push({type:"qct",x1:Ue.x,y1:Ue.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new l(Le.x,Le.y)},v.prototype.bezierCurveTo=function(ce,_e,be,Me,Le,Ue){if(isNaN(Le)||isNaN(Ue)||isNaN(ce)||isNaN(_e)||isNaN(be)||isNaN(Me))throw fo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Oe=this.ctx.transform.applyToPoint(new l(Le,Ue)),tt=this.ctx.transform.applyToPoint(new l(ce,_e)),Ze=this.ctx.transform.applyToPoint(new l(be,Me));this.path.push({type:"bct",x1:tt.x,y1:tt.y,x2:Ze.x,y2:Ze.y,x:Oe.x,y:Oe.y}),this.ctx.lastPoint=new l(Oe.x,Oe.y)},v.prototype.arc=function(ce,_e,be,Me,Le,Ue){if(isNaN(ce)||isNaN(_e)||isNaN(be)||isNaN(Me)||isNaN(Le))throw fo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ue=!!Ue,!this.ctx.transform.isIdentity){var Oe=this.ctx.transform.applyToPoint(new l(ce,_e));ce=Oe.x,_e=Oe.y;var tt=this.ctx.transform.applyToPoint(new l(0,be)),Ze=this.ctx.transform.applyToPoint(new l(0,0));be=Math.sqrt(Math.pow(tt.x-Ze.x,2)+Math.pow(tt.y-Ze.y,2))}Math.abs(Le-Me)>=2*Math.PI&&(Me=0,Le=2*Math.PI),this.path.push({type:"arc",x:ce,y:_e,radius:be,startAngle:Me,endAngle:Le,counterclockwise:Ue})},v.prototype.arcTo=function(ce,_e,be,Me,Le){throw new Error("arcTo not implemented.")},v.prototype.rect=function(ce,_e,be,Me){if(isNaN(ce)||isNaN(_e)||isNaN(be)||isNaN(Me))throw fo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ce,_e),this.lineTo(ce+be,_e),this.lineTo(ce+be,_e+Me),this.lineTo(ce,_e+Me),this.lineTo(ce,_e),this.lineTo(ce+be,_e),this.lineTo(ce,_e)},v.prototype.fillRect=function(ce,_e,be,Me){if(isNaN(ce)||isNaN(_e)||isNaN(be)||isNaN(Me))throw fo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var Le={};this.lineCap!=="butt"&&(Le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ce,_e,be,Me),this.fill(),Le.hasOwnProperty("lineCap")&&(this.lineCap=Le.lineCap),Le.hasOwnProperty("lineJoin")&&(this.lineJoin=Le.lineJoin)}},v.prototype.strokeRect=function(ce,_e,be,Me){if(isNaN(ce)||isNaN(_e)||isNaN(be)||isNaN(Me))throw fo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(ce,_e,be,Me),this.stroke())},v.prototype.clearRect=function(ce,_e,be,Me){if(isNaN(ce)||isNaN(_e)||isNaN(be)||isNaN(Me))throw fo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ce,_e,be,Me))},v.prototype.save=function(ce){ce=typeof ce!="boolean"||ce;for(var _e=this.pdf.internal.getCurrentPageInfo().pageNumber,be=0;be<this.pdf.internal.getNumberOfPages();be++)this.pdf.setPage(be+1),this.pdf.internal.out("q");if(this.pdf.setPage(_e),ce){this.ctx.fontSize=this.pdf.internal.getFontSize();var Me=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Me}},v.prototype.restore=function(ce){ce=typeof ce!="boolean"||ce;for(var _e=this.pdf.internal.getCurrentPageInfo().pageNumber,be=0;be<this.pdf.internal.getNumberOfPages();be++)this.pdf.setPage(be+1),this.pdf.internal.out("Q");this.pdf.setPage(_e),ce&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(ce){var _e,be,Me,Le;if(ce.isCanvasGradient===!0&&(ce=ce.getColor()),!ce)return{r:0,g:0,b:0,a:0,style:ce};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ce))_e=0,be=0,Me=0,Le=0;else{var Ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ce);if(Ue!==null)_e=parseInt(Ue[1]),be=parseInt(Ue[2]),Me=parseInt(Ue[3]),Le=1;else if((Ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ce))!==null)_e=parseInt(Ue[1]),be=parseInt(Ue[2]),Me=parseInt(Ue[3]),Le=parseFloat(Ue[4]);else{if(Le=1,typeof ce=="string"&&ce.charAt(0)!=="#"){var Oe=new mj(ce);ce=Oe.ok?Oe.toHex():"#000000"}ce.length===4?(_e=ce.substring(1,2),_e+=_e,be=ce.substring(2,3),be+=be,Me=ce.substring(3,4),Me+=Me):(_e=ce.substring(1,3),be=ce.substring(3,5),Me=ce.substring(5,7)),_e=parseInt(_e,16),be=parseInt(be,16),Me=parseInt(Me,16)}}return{r:_e,g:be,b:Me,a:Le,style:ce}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(ce,_e,be,Me){if(isNaN(_e)||isNaN(be)||typeof ce!="string")throw fo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Me=isNaN(Me)?void 0:Me,!b.call(this)){var Le=me(this.ctx.transform.rotation),Ue=this.ctx.transform.scaleX;G.call(this,{text:ce,x:_e,y:be,scale:Ue,angle:Le,align:this.textAlign,maxWidth:Me})}},v.prototype.strokeText=function(ce,_e,be,Me){if(isNaN(_e)||isNaN(be)||typeof ce!="string")throw fo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){Me=isNaN(Me)?void 0:Me;var Le=me(this.ctx.transform.rotation),Ue=this.ctx.transform.scaleX;G.call(this,{text:ce,x:_e,y:be,scale:Ue,renderingMode:"stroke",angle:Le,align:this.textAlign,maxWidth:Me})}},v.prototype.measureText=function(ce){if(typeof ce!="string")throw fo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var _e=this.pdf,be=this.pdf.internal.scaleFactor,Me=_e.internal.getFontSize(),Le=_e.getStringUnitWidth(ce)*Me/_e.internal.scaleFactor;return new function(Ue){var Oe=(Ue=Ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Oe}}),this}({width:Le*=Math.round(96*be/72*1e4)/1e4})},v.prototype.scale=function(ce,_e){if(isNaN(ce)||isNaN(_e))throw fo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var be=new c(ce,0,0,_e,0,0);this.ctx.transform=this.ctx.transform.multiply(be)},v.prototype.rotate=function(ce){if(isNaN(ce))throw fo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var _e=new c(Math.cos(ce),Math.sin(ce),-Math.sin(ce),Math.cos(ce),0,0);this.ctx.transform=this.ctx.transform.multiply(_e)},v.prototype.translate=function(ce,_e){if(isNaN(ce)||isNaN(_e))throw fo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var be=new c(1,0,0,1,ce,_e);this.ctx.transform=this.ctx.transform.multiply(be)},v.prototype.transform=function(ce,_e,be,Me,Le,Ue){if(isNaN(ce)||isNaN(_e)||isNaN(be)||isNaN(Me)||isNaN(Le)||isNaN(Ue))throw fo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Oe=new c(ce,_e,be,Me,Le,Ue);this.ctx.transform=this.ctx.transform.multiply(Oe)},v.prototype.setTransform=function(ce,_e,be,Me,Le,Ue){ce=isNaN(ce)?1:ce,_e=isNaN(_e)?0:_e,be=isNaN(be)?0:be,Me=isNaN(Me)?1:Me,Le=isNaN(Le)?0:Le,Ue=isNaN(Ue)?0:Ue,this.ctx.transform=new c(ce,_e,be,Me,Le,Ue)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(ce,_e,be,Me,Le,Ue,Oe,tt,Ze){var Qe=this.pdf.getImageProperties(ce),Ie=1,Mt=1,ot=1,$e=1;Me!==void 0&&tt!==void 0&&(ot=tt/Me,$e=Ze/Le,Ie=Qe.width/Me*tt/Me,Mt=Qe.height/Le*Ze/Le),Ue===void 0&&(Ue=_e,Oe=be,_e=0,be=0),Me!==void 0&&tt===void 0&&(tt=Me,Ze=Le),Me===void 0&&tt===void 0&&(tt=Qe.width,Ze=Qe.height);for(var tr,Wt=this.ctx.transform.decompose(),Gt=me(Wt.rotate.shx),at=new c,dr=(at=(at=(at=at.multiply(Wt.translate)).multiply(Wt.skew)).multiply(Wt.scale)).applyToRectangle(new a(Ue-_e*ot,Oe-be*$e,Me*Ie,Le*Mt)),hr=k.call(this,dr),ur=[],Cr=0;Cr<hr.length;Cr+=1)ur.indexOf(hr[Cr])===-1&&ur.push(hr[Cr]);if(F(ur),this.autoPaging)for(var br=ur[0],nr=ur[ur.length-1],lr=br;lr<nr+1;lr++){this.pdf.setPage(lr);var Pr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ar=lr===1?this.posY+this.margin[0]:this.margin[0],kr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ht=lr===1?0:kr+(lr-2)*Qt;if(this.ctx.clip_path.length!==0){var Ct=this.path;tr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(tr,this.posX+this.margin[3],-Ht+ar+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=Ct}var Re=JSON.parse(JSON.stringify(dr));Re=O([Re],this.posX+this.margin[3],-Ht+ar+this.ctx.prevPageLastElemOffset)[0];var Be=(lr>br||lr<nr)&&I.call(this);Be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pr,Qt,null).clip().discardPath()),this.pdf.addImage(ce,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,Gt),Be&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ce,"JPEG",dr.x,dr.y,dr.w,dr.h,null,null,Gt)};var k=function(ce,_e,be){var Me=[];_e=_e||this.pdf.internal.pageSize.width,be=be||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Le=this.posY+this.ctx.prevPageLastElemOffset;switch(ce.type){default:case"mt":case"lt":Me.push(Math.floor((ce.y+Le)/be)+1);break;case"arc":Me.push(Math.floor((ce.y+Le-ce.radius)/be)+1),Me.push(Math.floor((ce.y+Le+ce.radius)/be)+1);break;case"qct":var Ue=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ce.x1,ce.y1,ce.x,ce.y);Me.push(Math.floor((Ue.y+Le)/be)+1),Me.push(Math.floor((Ue.y+Ue.h+Le)/be)+1);break;case"bct":var Oe=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ce.x1,ce.y1,ce.x2,ce.y2,ce.x,ce.y);Me.push(Math.floor((Oe.y+Le)/be)+1),Me.push(Math.floor((Oe.y+Oe.h+Le)/be)+1);break;case"rect":Me.push(Math.floor((ce.y+Le)/be)+1),Me.push(Math.floor((ce.y+ce.h+Le)/be)+1)}for(var tt=0;tt<Me.length;tt+=1)for(;this.pdf.internal.getNumberOfPages()<Me[tt];)M.call(this);return Me},M=function(){var ce=this.fillStyle,_e=this.strokeStyle,be=this.font,Me=this.lineCap,Le=this.lineWidth,Ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=ce,this.strokeStyle=_e,this.font=be,this.lineCap=Me,this.lineWidth=Le,this.lineJoin=Ue},O=function(ce,_e,be){for(var Me=0;Me<ce.length;Me++)switch(ce[Me].type){case"bct":ce[Me].x2+=_e,ce[Me].y2+=be;case"qct":ce[Me].x1+=_e,ce[Me].y1+=be;default:ce[Me].x+=_e,ce[Me].y+=be}return ce},F=function(ce){return ce.sort(function(_e,be){return _e-be})},D=function(ce,_e){for(var be,Me,Le=this.fillStyle,Ue=this.strokeStyle,Oe=this.lineCap,tt=this.lineWidth,Ze=Math.abs(tt*this.ctx.transform.scaleX),Qe=this.lineJoin,Ie=JSON.parse(JSON.stringify(this.path)),Mt=JSON.parse(JSON.stringify(this.path)),ot=[],$e=0;$e<Mt.length;$e++)if(Mt[$e].x!==void 0)for(var tr=k.call(this,Mt[$e]),Wt=0;Wt<tr.length;Wt+=1)ot.indexOf(tr[Wt])===-1&&ot.push(tr[Wt]);for(var Gt=0;Gt<ot.length;Gt++)for(;this.pdf.internal.getNumberOfPages()<ot[Gt];)M.call(this);if(F(ot),this.autoPaging)for(var at=ot[0],dr=ot[ot.length-1],hr=at;hr<dr+1;hr++){this.pdf.setPage(hr),this.fillStyle=Le,this.strokeStyle=Ue,this.lineCap=Oe,this.lineWidth=Ze,this.lineJoin=Qe;var ur=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Cr=hr===1?this.posY+this.margin[0]:this.margin[0],br=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lr=hr===1?0:br+(hr-2)*nr;if(this.ctx.clip_path.length!==0){var Pr=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(be,this.posX+this.margin[3],-lr+Cr+this.ctx.prevPageLastElemOffset),q.call(this,ce,!0),this.path=Pr}if(Me=JSON.parse(JSON.stringify(Ie)),this.path=O(Me,this.posX+this.margin[3],-lr+Cr+this.ctx.prevPageLastElemOffset),_e===!1||hr===0){var ar=(hr>at||hr<dr)&&I.call(this);ar&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ur,nr,null).clip().discardPath()),q.call(this,ce,_e),ar&&this.pdf.restoreGraphicsState()}this.lineWidth=tt}else this.lineWidth=Ze,q.call(this,ce,_e),this.lineWidth=tt;this.path=Ie},q=function(ce,_e){if((ce!=="stroke"||_e||!S.call(this))&&(ce==="stroke"||_e||!b.call(this))){for(var be,Me,Le=[],Ue=this.path,Oe=0;Oe<Ue.length;Oe++){var tt=Ue[Oe];switch(tt.type){case"begin":Le.push({begin:!0});break;case"close":Le.push({close:!0});break;case"mt":Le.push({start:tt,deltas:[],abs:[]});break;case"lt":var Ze=Le.length;if(Ue[Oe-1]&&!isNaN(Ue[Oe-1].x)&&(be=[tt.x-Ue[Oe-1].x,tt.y-Ue[Oe-1].y],Ze>0)){for(;Ze>=0;Ze--)if(Le[Ze-1].close!==!0&&Le[Ze-1].begin!==!0){Le[Ze-1].deltas.push(be),Le[Ze-1].abs.push(tt);break}}break;case"bct":be=[tt.x1-Ue[Oe-1].x,tt.y1-Ue[Oe-1].y,tt.x2-Ue[Oe-1].x,tt.y2-Ue[Oe-1].y,tt.x-Ue[Oe-1].x,tt.y-Ue[Oe-1].y],Le[Le.length-1].deltas.push(be);break;case"qct":var Qe=Ue[Oe-1].x+2/3*(tt.x1-Ue[Oe-1].x),Ie=Ue[Oe-1].y+2/3*(tt.y1-Ue[Oe-1].y),Mt=tt.x+2/3*(tt.x1-tt.x),ot=tt.y+2/3*(tt.y1-tt.y),$e=tt.x,tr=tt.y;be=[Qe-Ue[Oe-1].x,Ie-Ue[Oe-1].y,Mt-Ue[Oe-1].x,ot-Ue[Oe-1].y,$e-Ue[Oe-1].x,tr-Ue[Oe-1].y],Le[Le.length-1].deltas.push(be);break;case"arc":Le.push({deltas:[],abs:[],arc:!0}),Array.isArray(Le[Le.length-1].abs)&&Le[Le.length-1].abs.push(tt)}}Me=_e?null:ce==="stroke"?"stroke":"fill";for(var Wt=!1,Gt=0;Gt<Le.length;Gt++)if(Le[Gt].arc)for(var at=Le[Gt].abs,dr=0;dr<at.length;dr++){var hr=at[dr];hr.type==="arc"?H.call(this,hr.x,hr.y,hr.radius,hr.startAngle,hr.endAngle,hr.counterclockwise,void 0,_e,!Wt):ne.call(this,hr.x,hr.y),Wt=!0}else if(Le[Gt].close===!0)this.pdf.internal.out("h"),Wt=!1;else if(Le[Gt].begin!==!0){var ur=Le[Gt].start.x,Cr=Le[Gt].start.y;ae.call(this,Le[Gt].deltas,ur,Cr),Wt=!0}Me&&X.call(this,Me),_e&&ie.call(this)}},z=function(ce){var _e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,be=_e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ce-be;case"top":return ce+_e-be;case"hanging":return ce+_e-2*be;case"middle":return ce+_e/2-be;default:return ce}},U=function(ce){return ce+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var ce=function(){};return ce.colorStops=[],ce.addColorStop=function(_e,be){this.colorStops.push([_e,be])},ce.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ce.isCanvasGradient=!0,ce},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(ce,_e,be,Me,Le,Ue,Oe,tt,Ze){for(var Qe=fe.call(this,be,Me,Le,Ue),Ie=0;Ie<Qe.length;Ie++){var Mt=Qe[Ie];Ie===0&&(Ze?ee.call(this,Mt.x1+ce,Mt.y1+_e):ne.call(this,Mt.x1+ce,Mt.y1+_e)),le.call(this,ce,_e,Mt.x2,Mt.y2,Mt.x3,Mt.y3,Mt.x4,Mt.y4)}tt?ie.call(this):X.call(this,Oe)},X=function(ce){switch(ce){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ie=function(){this.pdf.clip(),this.pdf.discardPath()},ee=function(ce,_e){this.pdf.internal.out(r(ce)+" "+n(_e)+" m")},G=function(ce){var _e;switch(ce.align){case"right":case"end":_e="right";break;case"center":_e="center";break;default:_e="left"}var be=this.pdf.getTextDimensions(ce.text),Me=z.call(this,ce.y),Le=U.call(this,Me)-be.h,Ue=this.ctx.transform.applyToPoint(new l(ce.x,Me)),Oe=this.ctx.transform.decompose(),tt=new c;tt=(tt=(tt=tt.multiply(Oe.translate)).multiply(Oe.skew)).multiply(Oe.scale);for(var Ze,Qe,Ie,Mt=this.ctx.transform.applyToRectangle(new a(ce.x,Me,be.w,be.h)),ot=tt.applyToRectangle(new a(ce.x,Le,be.w,be.h)),$e=k.call(this,ot),tr=[],Wt=0;Wt<$e.length;Wt+=1)tr.indexOf($e[Wt])===-1&&tr.push($e[Wt]);if(F(tr),this.autoPaging)for(var Gt=tr[0],at=tr[tr.length-1],dr=Gt;dr<at+1;dr++){this.pdf.setPage(dr);var hr=dr===1?this.posY+this.margin[0]:this.margin[0],ur=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Cr=this.pdf.internal.pageSize.height-this.margin[2],br=Cr-this.margin[0],nr=this.pdf.internal.pageSize.width-this.margin[1],lr=nr-this.margin[3],Pr=dr===1?0:ur+(dr-2)*br;if(this.ctx.clip_path.length!==0){var ar=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Ze,this.posX+this.margin[3],-1*Pr+hr),q.call(this,"fill",!0),this.path=ar}var kr=O([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Pr+hr+this.ctx.prevPageLastElemOffset)[0];ce.scale>=.01&&(Qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qe*ce.scale),Ie=this.lineWidth,this.lineWidth=Ie*ce.scale);var Qt=this.autoPaging!=="text";if(Qt||kr.y+kr.h<=Cr){if(Qt||kr.y>=hr&&kr.x<=nr){var Ht=Qt?ce.text:this.pdf.splitTextToSize(ce.text,ce.maxWidth||nr-kr.x)[0],Ct=O([JSON.parse(JSON.stringify(Mt))],this.posX+this.margin[3],-Pr+hr+this.ctx.prevPageLastElemOffset)[0],Re=Qt&&(dr>Gt||dr<at)&&I.call(this);Re&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lr,br,null).clip().discardPath()),this.pdf.text(Ht,Ct.x,Ct.y,{angle:ce.angle,align:_e,renderingMode:ce.renderingMode}),Re&&this.pdf.restoreGraphicsState()}}else kr.y<Cr&&(this.ctx.prevPageLastElemOffset+=Cr-kr.y);ce.scale>=.01&&(this.pdf.setFontSize(Qe),this.lineWidth=Ie)}else ce.scale>=.01&&(Qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qe*ce.scale),Ie=this.lineWidth,this.lineWidth=Ie*ce.scale),this.pdf.text(ce.text,Ue.x+this.posX,Ue.y+this.posY,{angle:ce.angle,align:_e,renderingMode:ce.renderingMode,maxWidth:ce.maxWidth}),ce.scale>=.01&&(this.pdf.setFontSize(Qe),this.lineWidth=Ie)},ne=function(ce,_e,be,Me){be=be||0,Me=Me||0,this.pdf.internal.out(r(ce+be)+" "+n(_e+Me)+" l")},ae=function(ce,_e,be){return this.pdf.lines(ce,_e,be,null,null)},le=function(ce,_e,be,Me,Le,Ue,Oe,tt){this.pdf.internal.out([t(i(be+ce)),t(o(Me+_e)),t(i(Le+ce)),t(o(Ue+_e)),t(i(Oe+ce)),t(o(tt+_e)),"c"].join(" "))},fe=function(ce,_e,be,Me){for(var Le=2*Math.PI,Ue=Math.PI/2;_e>be;)_e-=Le;var Oe=Math.abs(be-_e);Oe<Le&&Me&&(Oe=Le-Oe);for(var tt=[],Ze=Me?-1:1,Qe=_e;Oe>1e-5;){var Ie=Qe+Ze*Math.min(Oe,Ue);tt.push(ke.call(this,ce,Qe,Ie)),Oe-=Math.abs(Ie-Qe),Qe=Ie}return tt},ke=function(ce,_e,be){var Me=(be-_e)/2,Le=ce*Math.cos(Me),Ue=ce*Math.sin(Me),Oe=Le,tt=-Ue,Ze=Oe*Oe+tt*tt,Qe=Ze+Oe*Le+tt*Ue,Ie=4/3*(Math.sqrt(2*Ze*Qe)-Qe)/(Oe*Ue-tt*Le),Mt=Oe-Ie*tt,ot=tt+Ie*Oe,$e=Mt,tr=-ot,Wt=Me+_e,Gt=Math.cos(Wt),at=Math.sin(Wt);return{x1:ce*Math.cos(_e),y1:ce*Math.sin(_e),x2:Mt*Gt-ot*at,y2:Mt*at+ot*Gt,x3:$e*Gt-tr*at,y3:$e*at+tr*Gt,x4:ce*Math.cos(be),y4:ce*Math.sin(be)}},me=function(ce){return 180*ce/Math.PI},Se=function(ce,_e,be,Me,Le,Ue){var Oe=ce+.5*(be-ce),tt=_e+.5*(Me-_e),Ze=Le+.5*(be-Le),Qe=Ue+.5*(Me-Ue),Ie=Math.min(ce,Le,Oe,Ze),Mt=Math.max(ce,Le,Oe,Ze),ot=Math.min(_e,Ue,tt,Qe),$e=Math.max(_e,Ue,tt,Qe);return new a(Ie,ot,Mt-Ie,$e-ot)},we=function(ce,_e,be,Me,Le,Ue,Oe,tt){var Ze,Qe,Ie,Mt,ot,$e,tr,Wt,Gt,at,dr,hr,ur,Cr,br=be-ce,nr=Me-_e,lr=Le-be,Pr=Ue-Me,ar=Oe-Le,kr=tt-Ue;for(Qe=0;Qe<41;Qe++)Gt=(tr=(Ie=ce+(Ze=Qe/40)*br)+Ze*((ot=be+Ze*lr)-Ie))+Ze*(ot+Ze*(Le+Ze*ar-ot)-tr),at=(Wt=(Mt=_e+Ze*nr)+Ze*(($e=Me+Ze*Pr)-Mt))+Ze*($e+Ze*(Ue+Ze*kr-$e)-Wt),Qe==0?(dr=Gt,hr=at,ur=Gt,Cr=at):(dr=Math.min(dr,Gt),hr=Math.min(hr,at),ur=Math.max(ur,Gt),Cr=Math.max(Cr,at));return new a(Math.round(dr),Math.round(hr),Math.round(ur-dr),Math.round(Cr-hr))},Pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ce,_e,be=(ce=this.ctx.lineDash,_e=this.ctx.lineDashOffset,JSON.stringify({lineDash:ce,lineDashOffset:_e}));this.prevLineDash!==be&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=be)}}})(ii.API),(function(e){var t=function(l){var a,c,h,g,v,x,b,S,I,k;for(c=[],h=0,g=(l+=a="\0\0\0\0".slice(l.length%4||4)).length;g>h;h+=4)(v=(l.charCodeAt(h)<<24)+(l.charCodeAt(h+1)<<16)+(l.charCodeAt(h+2)<<8)+l.charCodeAt(h+3))!==0?(x=(v=((v=((v=((v=(v-(k=v%85))/85)-(I=v%85))/85)-(S=v%85))/85)-(b=v%85))/85)%85,c.push(x+33,b+33,S+33,I+33,k+33)):c.push(122);return(function(M,O){for(var F=O;F>0;F--)M.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},r=function(l){var a,c,h,g,v,x=String,b="length",S=255,I="charCodeAt",k="slice",M="replace";for(l[k](-2),l=l[k](0,-2)[M](/\s/g,"")[M]("z","!!!!!"),h=[],g=0,v=(l+=a="uuuuu"[k](l[b]%5||5))[b];v>g;g+=5)c=52200625*(l[I](g)-33)+614125*(l[I](g+1)-33)+7225*(l[I](g+2)-33)+85*(l[I](g+3)-33)+(l[I](g+4)-33),h.push(S&c>>24,S&c>>16,S&c>>8,S&c);return(function(O,F){for(var D=F;D>0;D--)O.pop()})(h,a[b]),x.fromCharCode.apply(x,h)},n=function(l){return l.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),a.test(l)===!1)return"";for(var c="",h=0;h<l.length;h+=2)c+=String.fromCharCode("0x"+(l[h]+l[h+1]));return c},o=function(l){for(var a=new Uint8Array(l.length),c=l.length;c--;)a[c]=l.charCodeAt(c);return(a=mT(a)).reduce(function(h,g){return h+String.fromCharCode(g)},"")};e.processDataByFilters=function(l,a){var c=0,h=l||"",g=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":h=r(h),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=n(h),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=o(h),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:h,reverseChain:g.reverse().join(" ")}}})(ii.API),(function(e){e.loadFile=function(t,r,n){return(function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var a=void 0;try{a=(function(c,h,g){var v=new XMLHttpRequest,x=0,b=function(S){var I=S.length,k=[],M=String.fromCharCode;for(x=0;x<I;x+=1)k.push(M(255&S.charCodeAt(x)));return k.join("")};if(v.open("GET",c,!h),v.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(v.onload=function(){v.status===200?g(b(this.responseText)):g(void 0)}),v.send(null),h&&v.status===200)return b(v.responseText)})(i,o,l)}catch{}return a})(t,r,n)},e.loadImageFile=e.loadFile})(ii.API),(function(e){function t(){return(Si.html2canvas?Promise.resolve(Si.html2canvas):lS(()=>import("./html2canvas.esm-B0tyYwQk.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(Si.DOMPurify?Promise.resolve(Si.DOMPurify):lS(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var c=Va(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var h=document.createElement(a);for(var g in c.className&&(h.className=c.className),c.innerHTML&&c.dompurify&&(h.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)h.style[g]=c.style[g];return h},o=function a(c,h){for(var g=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||g.appendChild(a(v,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(g.width=c.width,g.height=c.height,g.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(g.value=c.value),g.addEventListener("load",function(){g.scrollTop=c.scrollTop,g.scrollLeft=c.scrollLeft},!0)),g},l=function a(c){var h=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),g=a.convert(Promise.resolve(),h);return(g=g.setProgress(1,a,1,[a])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(a,c){return a.__proto__=c||l.prototype,a},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(r).then(function(h){return this.set({src:i("div",{innerHTML:a,dompurify:h})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},l.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(c){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,c(this.prop.container,h)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(c){var h=this.opt.jsPDF,g=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=g,g)for(var b=0;b<g.length;++b){var S=g[b],I=S.src.find(function(k){return k.format==="truetype"});I&&h.addFont(I.url,S.ref.name,S.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,h.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(a,c,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},l.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},l.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},l.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(a){if(n(a)!=="object")return this;var c=Object.keys(a||{}).map(function(h){if(h in l.template.prop)return function(){this.prop[h]=a[h]};switch(h){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[h]=a[h]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(a,c){return this.then(function(){var h=a in l.template.prop?this.prop[a]:this.opt[a];return c?c(h):h})},l.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},l.prototype.setPageSize=function(a){function c(h,g){return Math.floor(h*g/72*96)}return this.then(function(){(a=a||ii.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},l.prototype.setProgress=function(a,c,h,g){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),h!=null&&(this.progress.n=h),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(a,c,h,g){return this.setProgress(a?this.progress.val+a:null,c||null,h?this.progress.n+h:null,g?this.progress.stack.concat(g):null)},l.prototype.then=function(a,c){var h=this;return this.thenCore(a,c,function(g,v){return h.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(x){return h.updateProgress(null,g),x}).then(g,v).then(function(x){return h.updateProgress(1),x})})},l.prototype.thenCore=function(a,c,h){h=h||Promise.prototype.then;var g=this;a&&(a=a.bind(g)),c&&(c=c.bind(g));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:l.convert(Object.assign({},g),Promise.prototype),x=h.call(v,a,c);return l.convert(x,g.__proto__)},l.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},l.prototype.thenList=function(a){var c=this;return a.forEach(function(h){c=c.thenCore(h)}),c},l.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return l.convert(c,this)},l.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},l.prototype.error=function(a){return this.then(function(){throw new Error(a)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,ii.getPageSize=function(a,c,h){if(Va(a)==="object"){var g=a;a=g.orientation,c=g.unit||c,h=g.format||h}c=c||"mm",h=h||"a4",a=(""+(a||"P")).toLowerCase();var v,x=(""+h).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+c}var S,I=0,k=0;if(b.hasOwnProperty(x))I=b[x][1]/v,k=b[x][0]/v;else try{I=h[1],k=h[0]}catch{throw new Error("Invalid format: "+h)}if(a==="p"||a==="portrait")a="p",k>I&&(S=k,k=I,I=S);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",I>k&&(S=k,k=I,I=S)}return{width:k,height:I,unit:c,k:v,orientation:a}},e.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(WS):null;var h=new l(c);return c.worker?h:h.from(a).doCallback()}})(ii.API),ii.API.addJS=function(e){return OD=e,this.internal.events.subscribe("postPutResources",function(){xb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ND=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+OD+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xb!==void 0&&ND!==void 0&&this.internal.out("/Names <</JavaScript "+xb+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],a=n.exec(l);if(a!=null){var c=a[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,g=[];for(o=0;o<h;o++){var v=r.internal.newObject();g.push(v);var x=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var b=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<g.length;o++)r.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+b+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var l={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var l=n.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var a=this.count=this.count_r({count:0},l);if(a>0&&this.line("/Count "+a),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<n.children.length;h++)this.renderItems(n.children[h])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(ii.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,o,l,a){var c,h=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=(function(v){for(var x,b=256*v.charCodeAt(4)+v.charCodeAt(5),S=v.length,I={width:0,height:0,numcomponents:1},k=4;k<S;k+=2){if(k+=b,t.indexOf(v.charCodeAt(k+1))!==-1){x=256*v.charCodeAt(k+5)+v.charCodeAt(k+6),I={width:256*v.charCodeAt(k+7)+v.charCodeAt(k+8),height:x,numcomponents:v.charCodeAt(k+9)};break}b=256*v.charCodeAt(k+2)+v.charCodeAt(k+3)}return I})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}g={data:r,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:h,index:n,alias:i}}return g}})(ii.API),ii.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,o=bse(e,{checkCrc:!0}),l=o.width,a=o.height,c=o.channels,h=o.palette,g=o.depth;i=h&&c===1?(function(U){for(var H=U.width,X=U.height,ie=U.data,ee=U.palette,G=U.depth,ne=!1,ae=[],le=[],fe=void 0,ke=!1,me=0,Se=0;Se<ee.length;Se++){var we=jR(ee[Se],4),Pe=we[0],ce=we[1],_e=we[2],be=we[3];ae.push(Pe,ce,_e),be!=null&&(be===0?(me++,le.length<1&&le.push(Se)):be<255&&(ke=!0))}if(ke||me>1){ne=!0,le=void 0;var Me=H*X;fe=new Uint8Array(Me);for(var Le=new DataView(ie.buffer),Ue=0;Ue<Me;Ue++){var Oe=YS(Le,Ue,G),tt=jR(ee[Oe],4)[3];fe[Ue]=tt}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:ie,alphaBytes:fe,needSMask:ne,palette:ae,mask:le}})(o):c===2||c===4?(function(U){for(var H=U.data,X=U.width,ie=U.height,ee=U.channels,G=U.depth,ne=ee===2?"DeviceGray":"DeviceRGB",ae=ee-1,le=X*ie,fe=ae,ke=le*fe,me=1*le,Se=Math.ceil(ke*G/8),we=Math.ceil(me*G/8),Pe=new Uint8Array(Se),ce=new Uint8Array(we),_e=new DataView(H.buffer),be=new DataView(Pe.buffer),Me=new DataView(ce.buffer),Le=!1,Ue=0;Ue<le;Ue++){for(var Oe=Ue*ee,tt=0;tt<fe;tt++)GD(be,YS(_e,Oe+tt,G),Ue*fe+tt,G);var Ze=YS(_e,Oe+fe,G);Ze<(1<<G)-1&&(Le=!0),GD(Me,Ze,1*Ue,G)}return{colorSpace:ne,colorsPerPixel:ae,colorBytes:Pe,alphaBytes:ce,needSMask:Le}})(o):(function(U){var H=U.data,X=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:X,colorsPerPixel:X==="DeviceGray"?1:3,colorBytes:H instanceof Uint8Array?H:new Uint8Array(H.buffer),needSMask:!1}})(o);var v,x,b,S=i,I=S.colorSpace,k=S.colorsPerPixel,M=S.colorBytes,O=S.alphaBytes,F=S.needSMask,D=S.palette,q=S.mask,z=null;return n!==ii.API.image_compression.NONE&&typeof mT=="function"?(z=(function(U){var H;switch(U){case ii.API.image_compression.FAST:H=11;break;case ii.API.image_compression.MEDIUM:H=13;break;case ii.API.image_compression.SLOW:H=14;break;default:H=12}return H})(n),v=this.decode.FLATE_DECODE,x="/Predictor ".concat(z," "),e=jD(M,l*k,k,n),F&&(b=jD(O,l,1,n))):(v=void 0,x="",e=M,F&&(b=O)),x+="/Colors ".concat(k," /BitsPerComponent ").concat(g," /Columns ").concat(l),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:r,data:e,index:t,filter:v,decodeParameters:x,transparency:q,palette:D,sMask:b,predictor:z,width:l,height:a,bitsPerComponent:g,colorSpace:I}}},(function(e){e.processGIF89A=function(t,r,n,i){var o=new jse(t),l=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:l,height:a},g=new ZS(100).encode(h,100);return e.processJPEG.call(this,g,r,n,i)},e.processGIF87A=e.processGIF89A})(ii.API),td.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},td.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){fo.log("bit decode error:"+r)}},td.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[l+4*a]=c.blue,this.data[l+4*a+1]=c.green,this.data[l+4*a+2]=c.red,this.data[l+4*a+3]=255}r!==0&&(this.pos+=4-r)}},td.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,a=o>>4,c=15&o,h=this.palette[a];if(this.data[l]=h.blue,this.data[l+1]=h.green,this.data[l+2]=h.red,this.data[l+3]=255,2*i+1>=this.width)break;h=this.palette[c],this.data[l+4]=h.blue,this.data[l+4+1]=h.green,this.data[l+4+2]=h.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},td.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},td.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,c=(o>>10&t)/t*255|0,h=o>>15?255:0,g=n*this.width*4+4*i;this.data[g]=c,this.data[g+1]=a,this.data[g+2]=l,this.data[g+3]=h}this.pos+=e}},td.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(l&t)/t*255|0,c=(l>>5&r)/r*255|0,h=(l>>11)/t*255|0,g=i*this.width*4+4*o;this.data[g]=h,this.data[g+1]=c,this.data[g+2]=a,this.data[g+3]=255}this.pos+=e}},td.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},td.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=l}},td.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,i){var o=new td(t,!1),l=o.width,a=o.height,c={data:o.getData(),width:l,height:a},h=new ZS(100).encode(c,100);return e.processJPEG.call(this,h,r,n,i)}})(ii.API),WD.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,i){var o=new WD(t),l=o.width,a=o.height,c={data:o.getData(),width:l,height:a},h=new ZS(100).encode(c,100);return e.processJPEG.call(this,h,r,n,i)}})(ii.API),ii.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),a=0,c=0,h=0;h<i;h+=4){var g=n[h],v=n[h+1],x=n[h+2],b=n[h+3];o[a++]=g,o[a++]=v,o[a++]=x,l[c++]=b}var S=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:S,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ii.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hm=ii.API,wb=Hm.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,h=t.kerning?t.kerning:i.metadata.Unicode.kerning,g=h.fof?h.fof:1,v=t.doKerning!==!1,x=0,b=e.length,S=0,I=a[0]||c,k=[];for(r=0;r<b;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/o)||0)/1e3):(x=v&&Va(h[n])==="object"&&!isNaN(parseInt(h[n][S],10))?h[n][S]/g:0,k.push((a[n]||I)/c+x)),S=n;return k},FD=Hm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Hm.processArabic&&(e=Hm.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:wb.apply(this,arguments).reduce(function(o,l){return o+l},0)},BD=function(e,t,r,n){for(var i=[],o=0,l=e.length,a=0;o!==l&&a+t[o]<r;)a+=t[o],o++;i.push(e.slice(0,o));var c=o;for(a=0;o!==l;)a+t[o]>n&&(i.push(e.slice(c,o)),a=0,c=o),a+=t[o],o++;return c!==o&&i.push(e.slice(c,o)),i},zD=function(e,t,r){r||(r={});var n,i,o,l,a,c,h,g=[],v=[g],x=r.textIndent||0,b=0,S=0,I=e.split(" "),k=wb.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?I[0].length+2:r.lineIndent||0){var M=Array(c).join(" "),O=[];I.map(function(D){(D=D.split(/\s*\n/)).length>1?O=O.concat(D.map(function(q,z){return(z&&q.length?`
`:"")+q})):O.push(D[0])}),I=O,c=FD.apply(this,[M,r])}for(o=0,l=I.length;o<l;o++){var F=0;if(n=I[o],c&&n[0]==`
`&&(n=n.substr(1),F=1),x+b+(S=(i=wb.apply(this,[n,r])).reduce(function(D,q){return D+q},0))>t||F){if(S>t){for(a=BD.apply(this,[n,i,t-(x+b),t]),g.push(a.shift()),g=[a.pop()];a.length;)v.push([a.shift()]);S=i.slice(n.length-(g[0]?g[0].length:0)).reduce(function(D,q){return D+q},0)}else g=[n];v.push(g),x=S+c,b=k}else g.push(n),x+=b+S,b=k}return h=c?function(D,q){return(q?M:"")+D.join(" ")}:function(D){return D.join(" ")},v.map(h)},Hm.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var v=this.internal.getFont(g.fontName,g.fontStyle),x="Unicode";return v.metadata[x]?{widths:v.metadata[x].widths||{0:1},kerning:v.metadata[x].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var a,c,h=[];for(a=0,c=n.length;a<c;a++)h=h.concat(zD.apply(this,[n[a],l,o]));return h},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[r[o]]=t[o],i[t[o]]=r[o];var l=function(x){return"0x"+parseInt(x,10).toString(16)},a=e.__fontmetrics__.compress=function(x){var b,S,I,k,M=["{"];for(var O in x){if(b=x[O],isNaN(parseInt(O,10))?S="'"+O+"'":(O=parseInt(O,10),S=(S=l(O).slice(2)).slice(0,-1)+i[S.slice(-1)]),typeof b=="number")b<0?(I=l(b).slice(3),k="-"):(I=l(b).slice(2),k=""),I=k+I.slice(0,-1)+i[I.slice(-1)];else{if(Va(b)!=="object")throw new Error("Don't know what to do with value type "+Va(b)+".");I=a(b)}M.push(S+I)}return M.push("}"),M.join("")},c=e.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,S,I,k,M={},O=1,F=M,D=[],q="",z="",U=x.length-1,H=1;H<U;H+=1)(k=x[H])=="'"?b?(I=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(D.push([F,I]),F={},I=void 0):k=="}"?((S=D.pop())[0][S[1]]=F,I=void 0,F=S[0]):k=="-"?O=-1:I===void 0?n.hasOwnProperty(k)?(q+=n[k],I=parseInt(q,16)*O,O=1,q=""):q+=k:n.hasOwnProperty(k)?(z+=n[k],F[I]=parseInt(z,16)*O,O=1,I=void 0,z=""):z+=k;return M},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},v={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(x){var b=x.font,S=v.Unicode[b.postScriptName];S&&(b.metadata.Unicode={},b.metadata.Unicode.widths=S.widths,b.metadata.Unicode.kerning=S.kerning);var I=g.Unicode[b.postScriptName];I&&(b.metadata.Unicode.encoding=I,b.encoding=I.codePages[0])}])})(ii.API),(function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(d_(a)),l.metadata=e.API.TTFFont.open(a),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])})(ii),ii.API.addSvgAsImage=function(e,t,r,n,i,o,l,a){if(isNaN(t)||isNaN(r))throw fo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw fo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(Si.canvg?Promise.resolve(Si.canvg):lS(()=>import("./index.es-CFaNeVWX.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(h,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){v.addImage(c.toDataURL("image/jpeg",1),t,r,n,i,l,a)})},ii.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},ii.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(l),c=[],h=0,g=0,v=0;function x(S,I){var k,M=!1;for(k=0;k<S.length;k+=1)S[k]===I&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var b=a.length;for(v=0;v<b;v+=1)r[a[v]].value=r[a[v]].defaultValue,r[a[v]].explicitSet=!1}if(Va(e)==="object"){for(i in e)if(o=e[i],x(a,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&x(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(h=0;h<o.length;h+=1)if(n=!0,o[h].length===1&&typeof o[h][0]=="number")c.push(String(o[h]-1));else if(o[h].length>1){for(g=0;g<o[h].length;g+=1)typeof o[h][g]!="number"&&(n=!1);n===!0&&c.push([o[h][0]-1,o[h][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,I=[];for(S in r)r[S].explicitSet===!0&&(r[S].type==="name"?I.push("/"+S+" /"+r[S].value):I.push("/"+S+" "+r[S].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=o.length+l.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+a+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(ii.API),(function(e){var t=e.API,r=t.pdfEscape16=function(o,l){for(var a,c=l.metadata.Unicode.widths,h=["","0","00","000","0000"],g=[""],v=0,x=o.length;v<x;++v){if(a=l.metadata.characterToGlyph(o.charCodeAt(v)),l.metadata.glyIdsUsed.push(a),l.metadata.toUnicode[a]=o.charCodeAt(v),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(l.metadata.widthOfGlyph(a),10)])),a=="0")return g.join("");a=a.toString(16),g.push(h[4-a.length],a)}return g.join("")},n=function(o){var l,a,c,h,g,v,x;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],v=0,x=(a=Object.keys(o).sort(function(b,S){return b-S})).length;v<x;v++)l=a[v],c.length>=100&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(h=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+h+">"));return c.length&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(l){var a=l.font,c=l.out,h=l.newObject,g=l.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var v=a.metadata.Unicode.widths,x=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),b="",S=0;S<x.length;S++)b+=String.fromCharCode(x[S]);var I=h();g({data:b,addLength1:!0,objectId:I}),c("endobj");var k=h();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var M=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+og(a.fontName)),c("/FontFile2 "+I+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var O=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+og(a.fontName)),c("/FontDescriptor "+M+" 0 R"),c("/W "+e.API.PDFObject.convert(v)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+og(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+O+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(l){var a=l.font,c=l.out,h=l.newObject,g=l.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var v=a.metadata.rawData,x="",b=0;b<v.length;b++)x+=String.fromCharCode(v[b]);var S=h();g({data:x,addLength1:!0,objectId:S}),c("endobj");var I=h();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var k=h();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+S+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+og(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=h();for(var M=0;M<a.metadata.hmtx.widths.length;M++)a.metadata.hmtx.widths[M]=parseInt(a.metadata.hmtx.widths[M]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+og(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,a=o.text||"",c=o.x,h=o.y,g=o.options||{},v=o.mutex||{},x=v.pdfEscape,b=v.activeFontKey,S=v.fonts,I=b,k="",M=0,O="",F=S[I].encoding;if(S[I].encoding!=="Identity-H")return{text:a,x:c,y:h,options:g,mutex:v};for(O=a,I=b,Array.isArray(a)&&(O=a[0]),M=0;M<O.length;M+=1)S[I].metadata.hasOwnProperty("cmap")&&(l=S[I].metadata.cmap.unicode.codeMap[O[M].charCodeAt(0)]),l||O[M].charCodeAt(0)<256&&S[I].metadata.hasOwnProperty("Unicode")?k+=O[M]:k+="";var D="";return parseInt(I.slice(1))<14||F==="WinAnsiEncoding"?D=x(k,I).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(D=r(k,S[I])),v.isHex=!0,{text:D,x:c,y:h,options:g,mutex:v}};t.events.push(["postProcessText",function(o){var l=o.text||"",a=[],c={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var h=0;for(h=0;h<l.length;h+=1)Array.isArray(l[h])&&l[h].length===3?a.push([i(Object.assign({},c,{text:l[h][0]})).text,l[h][1],l[h][2]]):a.push(i(Object.assign({},c,{text:l[h]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:l})).text}])})(ii),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(ii.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,o,l,a,c,h,g,v=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,F=0;this.__bidiEngine__={};var D=function(ee){var G=ee.charCodeAt(),ne=G>>8,ae=I[ne];return ae!==void 0?v[256*ae+(255&G)]:ne===252||ne===253?"AL":M.test(ne)?"L":ne===8?"R":"N"},q=function(ee){for(var G,ne=0;ne<ee.length;ne++){if((G=D(ee.charAt(ne)))==="L")return!1;if(G==="R")return!0}return!1},z=function(ee,G,ne,ae){var le,fe,ke,me,Se=G[ae];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(Se="AN");break;case"AL":O=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":ae<1||ae+1>=G.length||(le=ne[ae-1])!=="EN"&&le!=="AN"||(fe=G[ae+1])!=="EN"&&fe!=="AN"?Se="N":O&&(fe="AN"),Se=fe===le?fe:"N";break;case"ES":Se=(le=ae>0?ne[ae-1]:"B")==="EN"&&ae+1<G.length&&G[ae+1]==="EN"?"EN":"N";break;case"ET":if(ae>0&&ne[ae-1]==="EN"){Se="EN";break}if(O){Se="N";break}for(ke=ae+1,me=G.length;ke<me&&G[ke]==="ET";)ke++;Se=ke<me&&G[ke]==="EN"?"EN":"N";break;case"NSM":if(l&&!a){for(me=G.length,ke=ae+1;ke<me&&G[ke]==="NSM";)ke++;if(ke<me){var we=ee[ae],Pe=we>=1425&&we<=2303||we===64286;if(le=G[ke],Pe&&(le==="R"||le==="AL")){Se="R";break}}}Se=ae<1||(le=G[ae-1])==="B"?"N":ne[ae-1];break;case"B":O=!1,i=!0,Se=F;break;case"S":o=!0,Se="N"}return Se},U=function(ee,G,ne){var ae=ee.split("");return ne&&H(ae,ne,{hiLevel:F}),ae.reverse(),G&&G.reverse(),ae.join("")},H=function(ee,G,ne){var ae,le,fe,ke,me,Se=-1,we=ee.length,Pe=0,ce=[],_e=F?b:x,be=[];for(O=!1,i=!1,o=!1,le=0;le<we;le++)be[le]=D(ee[le]);for(fe=0;fe<we;fe++){if(me=Pe,ce[fe]=z(ee,be,ce,fe),ae=240&(Pe=_e[me][S[ce[fe]]]),Pe&=15,G[fe]=ke=_e[Pe][5],ae>0)if(ae===16){for(le=Se;le<fe;le++)G[le]=1;Se=-1}else Se=-1;if(_e[Pe][6])Se===-1&&(Se=fe);else if(Se>-1){for(le=Se;le<fe;le++)G[le]=ke;Se=-1}be[fe]==="B"&&(G[fe]=0),ne.hiLevel|=ke}o&&(function(Me,Le,Ue){for(var Oe=0;Oe<Ue;Oe++)if(Me[Oe]==="S"){Le[Oe]=F;for(var tt=Oe-1;tt>=0&&Me[tt]==="WS";tt--)Le[tt]=F}})(be,G,we)},X=function(ee,G,ne,ae,le){if(!(le.hiLevel<ee)){if(ee===1&&F===1&&!i)return G.reverse(),void(ne&&ne.reverse());for(var fe,ke,me,Se,we=G.length,Pe=0;Pe<we;){if(ae[Pe]>=ee){for(me=Pe+1;me<we&&ae[me]>=ee;)me++;for(Se=Pe,ke=me-1;Se<ke;Se++,ke--)fe=G[Se],G[Se]=G[ke],G[ke]=fe,ne&&(fe=ne[Se],ne[Se]=ne[ke],ne[ke]=fe);Pe=me}Pe++}}},ie=function(ee,G,ne){var ae=ee.split(""),le={hiLevel:F};return ne||(ne=[]),H(ae,ne,le),(function(fe,ke,me){if(me.hiLevel!==0&&g)for(var Se,we=0;we<fe.length;we++)ke[we]===1&&(Se=k.indexOf(fe[we]))>=0&&(fe[we]=k[Se+1])})(ae,ne,le),X(2,ae,G,ne,le),X(1,ae,G,ne,le),ae.join("")};return this.__bidiEngine__.doBidiReorder=function(ee,G,ne){if((function(le,fe){if(fe)for(var ke=0;ke<le.length;ke++)fe[ke]=ke;a===void 0&&(a=q(le)),h===void 0&&(h=q(le))})(ee,G),l||!c||h)if(l&&c&&a^h)F=a?1:0,ee=U(ee,G,ne);else if(!l&&c&&h)F=a?1:0,ee=ie(ee,G,ne),ee=U(ee,G);else if(!l||a||c||h){if(l&&!c&&a^h)ee=U(ee,G),a?(F=0,ee=ie(ee,G,ne)):(F=1,ee=ie(ee,G,ne),ee=U(ee,G));else if(l&&a&&!c&&h)F=1,ee=ie(ee,G,ne),ee=U(ee,G);else if(!l&&!c&&a^h){var ae=g;a?(F=1,ee=ie(ee,G,ne),F=0,g=!1,ee=ie(ee,G,ne),g=ae):(F=0,ee=ie(ee,G,ne),ee=U(ee,G),F=1,g=!1,ee=ie(ee,G,ne),g=ae,ee=U(ee,G))}}else F=0,ee=ie(ee,G,ne);else F=a?1:0,ee=ie(ee,G,ne);return ee},this.__bidiEngine__.setOptions=function(ee){ee&&(l=ee.isInputVisual,c=ee.isOutputVisual,a=ee.isInputRtl,h=ee.isOutputRtl,g=ee.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(l=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?l.push([r.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):l.push([r.doBidiReorder(i[a])]);n.text=l}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(ii),ii.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Nh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new tle(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new qse(this.contents),this.head=new Vse(this),this.name=new Xse(this),this.cmap=new Tj(this),this.toUnicode={},this.hhea=new Use(this),this.maxp=new Yse(this),this.hmtx=new Zse(this),this.post=new Hse(this),this.os2=new Gse(this),this.loca=new ele(this),this.glyf=new Kse(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,a,c,h;for(h=[],l=0,a=(c=this.bbox).length;l<a;l++)t=c[l],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,o,l,a;for(l=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=t.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var vd,Nh=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,o,l,a,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),a=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^a)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*l+256*a+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(this.writeByte(r));return o},e})(),qse=(function(){var e;function t(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,o,l,a,c,h,g,v,x,b,S,I;for(I in b=Object.keys(r).length,c=Math.log(2),v=16*Math.floor(Math.log(b)/c),l=Math.floor(v/c),g=16*b-v,(i=new Nh).writeInt(this.scalarType),i.writeShort(b),i.writeShort(v),i.writeShort(l),i.writeShort(g),o=16*b,h=i.pos+o,a=null,S=[],r)for(x=r[I],i.writeString(I),i.writeInt(e(x)),i.writeInt(h),i.writeInt(x.length),S=S.concat(x),I==="head"&&(a=h),h+=x.length;h%4;)S.push(0),h++;return i.write(S),n=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(n),i.data},e=function(r){var n,i,o,l;for(r=Pj.call(r);r.length%4;)r.push(0);for(o=new Nh(r),i=0,n=0,l=r.length;n<l;n=n+=4)i+=o.readUInt32();return 4294967295&i},t})(),$se={}.hasOwnProperty,nf=function(e,t){for(var r in t)$se.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};vd=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Vse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Nh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),XD=(function(){function e(t,r){var n,i,o,l,a,c,h,g,v,x,b,S,I,k,M,O,F;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(b=t.readUInt16(),x=b/2,t.pos+=6,o=(function(){var D,q;for(q=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)q.push(t.readUInt16());return q})(),t.pos+=2,I=(function(){var D,q;for(q=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)q.push(t.readUInt16());return q})(),h=(function(){var D,q;for(q=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)q.push(t.readUInt16());return q})(),g=(function(){var D,q;for(q=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)q.push(t.readUInt16());return q})(),i=(this.length-t.pos+this.offset)/2,a=(function(){var D,q;for(q=[],c=D=0;0<=i?D<i:D>i;c=0<=i?++D:--D)q.push(t.readUInt16());return q})(),c=M=0,F=o.length;M<F;c=++M)for(k=o[c],n=O=S=I[c];S<=k?O<=k:O>=k;n=S<=k?++O:--O)g[c]===0?l=n+h[c]:(l=a[g[c]/2+(n-S)-(x-c)]||0)!==0&&(l+=h[c]),this.codeMap[n]=65535&l}t.pos=v}return e.encode=function(t,r){var n,i,o,l,a,c,h,g,v,x,b,S,I,k,M,O,F,D,q,z,U,H,X,ie,ee,G,ne,ae,le,fe,ke,me,Se,we,Pe,ce,_e,be,Me,Le,Ue,Oe,tt,Ze,Qe,Ie;switch(ae=new Nh,l=Object.keys(t).sort(function(Mt,ot){return Mt-ot}),r){case"macroman":for(I=0,k=(function(){var Mt=[];for(S=0;S<256;++S)Mt.push(0);return Mt})(),O={0:0},o={},le=0,Se=l.length;le<Se;le++)O[tt=t[i=l[le]]]==null&&(O[tt]=++I),o[i]={old:t[i],new:O[t[i]]},k[i]=O[t[i]];return ae.writeUInt16(1),ae.writeUInt16(0),ae.writeUInt32(12),ae.writeUInt16(0),ae.writeUInt16(262),ae.writeUInt16(0),ae.write(k),{charMap:o,subtable:ae.data,maxGlyphID:I+1};case"unicode":for(G=[],v=[],F=0,O={},n={},M=h=null,fe=0,we=l.length;fe<we;fe++)O[q=t[i=l[fe]]]==null&&(O[q]=++F),n[i]={old:q,new:O[q]},a=O[q]-i,M!=null&&a===h||(M&&v.push(M),G.push(i),h=a),M=i;for(M&&v.push(M),v.push(65535),G.push(65535),ie=2*(X=G.length),H=2*Math.pow(Math.log(X)/Math.LN2,2),x=Math.log(H/2)/Math.LN2,U=2*X-H,c=[],z=[],b=[],S=ke=0,Pe=G.length;ke<Pe;S=++ke){if(ee=G[S],g=v[S],ee===65535){c.push(0),z.push(0);break}if(ee-(ne=n[ee].new)>=32768)for(c.push(0),z.push(2*(b.length+X-S)),i=me=ee;ee<=g?me<=g:me>=g;i=ee<=g?++me:--me)b.push(n[i].new);else c.push(ne-ee),z.push(0)}for(ae.writeUInt16(3),ae.writeUInt16(1),ae.writeUInt32(12),ae.writeUInt16(4),ae.writeUInt16(16+8*X+2*b.length),ae.writeUInt16(0),ae.writeUInt16(ie),ae.writeUInt16(H),ae.writeUInt16(x),ae.writeUInt16(U),Ue=0,ce=v.length;Ue<ce;Ue++)i=v[Ue],ae.writeUInt16(i);for(ae.writeUInt16(0),Oe=0,_e=G.length;Oe<_e;Oe++)i=G[Oe],ae.writeUInt16(i);for(Ze=0,be=c.length;Ze<be;Ze++)a=c[Ze],ae.writeUInt16(a);for(Qe=0,Me=z.length;Qe<Me;Qe++)D=z[Qe],ae.writeUInt16(D);for(Ie=0,Le=b.length;Ie<Le;Ie++)I=b[Ie],ae.writeUInt16(I);return{charMap:n,subtable:ae.data,maxGlyphID:F+1}}},e})(),Tj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new XD(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=XD.encode(t,r),(i=new Nh).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e})(),Use=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),Gse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Hse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var l,a,c;for(c=[],o=l=0,a=this.file.maxp.numGlyphs;0<=a?l<a:l>a;o=0<=a?++l:--l)c.push(t.readUInt32());return c}).call(this)}},e})(),Wse=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Xse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,o,l,a,c,h,g,v,x;for(t.pos=this.offset,t.readShort(),r=t.readShort(),a=t.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(c={},o=g=0,v=n.length;g<v;o=++g)i=n[o],t.pos=i.offset,h=t.readString(i.length),l=new Wse(h,i),c[x=i.nameID]==null&&(c[x]=[]),c[i.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),Yse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),Zse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,o,l,a,c;for(t.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,g;for(g=[],r=h=0;0<=i?h<i:h>i;r=0<=i?++h:--h)g.push(t.readInt16());return g})(),this.widths=(function(){var h,g,v,x;for(x=[],h=0,g=(v=this.metrics).length;h<g;h++)o=v[h],x.push(o.advance);return x}).call(this),n=this.widths[this.widths.length-1],c=[],r=l=0;0<=i?l<i:l>i;r=0<=i?++l:--l)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),Pj=[].slice,Kse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,o,l,a,c,h,g,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,l=(a=new Nh(r.read(i))).readShort(),h=a.readShort(),v=a.readShort(),c=a.readShort(),g=a.readShort(),this.cache[t]=l===-1?new Qse(a,h,v,c,g):new Jse(a,l,h,v,c,g),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,o,l,a,c;for(l=[],o=[],a=0,c=r.length;a<c;a++)i=t[r[a]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},e})(),Jse=(function(){function e(t,r,n,i,o,l){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Qse=(function(){function e(t,r,n,i,o){var l,a;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;a=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&a;)l.pos+=1&a?4:2,128&a?l.pos+=8:64&a?l.pos+=4:8&a&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Nh(Pj.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),ele=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nf(e,vd),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<r.length&&r[o]==l){++o,n[l]=i;var a=this.offsets[l],c=this.offsets[l+1]-a;c>0&&(i+=c)}for(var h=new Array(4*n.length),g=0;g<n.length;++g)h[4*g+3]=255&n[g],h[4*g+2]=(65280&n[g])>>8,h[4*g+1]=(16711680&n[g])>>16,h[4*g]=(4278190080&n[g])>>24;return h},e})(),tle=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)n=o[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,o,l,a,c;for(i={},l=0,a=t.length;l<a;l++)i[o=t[l]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in c=this.glyphsFor(r))n=c[o],i[o]=n;return i},e.prototype.encode=function(t,r){var n,i,o,l,a,c,h,g,v,x,b,S,I,k,M;for(i in n=Tj.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),b={0:0},M=n.charMap)b[(c=M[i]).old]=c.new;for(S in x=n.maxGlyphID,l)S in b||(b[S]=x++);return g=(function(O){var F,D;for(F in D={},O)D[O[F]]=F;return D})(b),v=Object.keys(g).sort(function(O,F){return O-F}),I=(function(){var O,F,D;for(D=[],O=0,F=v.length;O<F;O++)a=v[O],D.push(g[a]);return D})(),o=this.font.glyf.encode(l,I,b),h=this.font.loca.encode(o.offsets,I),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e})();ii.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,o,l;if(Array.isArray(r))return"["+(function(){var a,c,h;for(h=[],a=0,c=r.length;a<c;a++)n=r[a],h.push(t.convert(n));return h})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)l=r[i],o.push("/"+i+" "+t.convert(l));return o.push(">>"),o.join(`
`)}return""+r},t})();const rle=e=>{const t=e.width,r=e.height,n=document.createElement("div");n.className="hidden-map",n.style.width="0px",n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n);const i=document.createElement("div");i.style.width=t+"px",i.style.height=r+"px",n.appendChild(i);const o=e.map.map.getStyle();for(const c in o.sources){const h=o.sources[c];Object.keys(h).forEach(g=>{h[g]||delete h[g]})}const l=new p2.Map({container:i,center:e.map.map.getCenter(),zoom:e.map.map.getZoom(),bearing:0,pitch:0,interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,style:o}),a=l._cameraForBoxAndBearing([e.bboxUnrotated[0],e.bboxUnrotated[1]],[e.bboxUnrotated[2],e.bboxUnrotated[3]],e.bearing+e.map.map.getBearing());return l._fitInternal(a),new Promise(c=>{console.log("before idle"),l.once("idle",function(){const h={...e,renderMap:l,hiddenContainer:n,createPdf:g=>nle({...e,renderMap:l,hiddenContainer:n,...g}),createPng:g=>ale({...e,renderMap:l,hiddenContainer:n,...g})};c(h)})})};function nle(e){const t=new ii({orientation:e?.orientation==="portrait"?"p":"l",unit:"mm",compress:!0,format:e.format});return Object.defineProperty(window,"devicePixelRatio",{get:function(){return 300/96}}),new Promise(r=>{t.addImage(e.renderMap.getCanvas().toDataURL("image/png"),"png",0,0,t.internal.pageSize.getWidth(),t.internal.pageSize.getHeight(),void 0,"FAST"),e.renderMap.remove(),e.hiddenContainer.parentNode?.removeChild(e.hiddenContainer);const n={...e,pdf:t,downloadPdf:i=>ile({...n,...i}),formData:new FormData};r(n)})}function ile(e){return e.pdf.save("Map.pdf"),new Promise(function(t){t({...e})})}function ale(e){return new Promise(t=>{const r=e.renderMap.getCanvas().toDataURL("image/png"),n={...e,png:r,downloadPng:i=>ole({...n,...i})};t(n)})}function ole(e){const t=document.createElement("a");return t.download=e?.name?e.name+".png":"map.png",t.href=e.png,document.body.appendChild(t),t.click(),document.body.removeChild(t),new Promise(function(r){r({...e})})}function Ij(e){const t=da({mapId:e.mapId});return{createExport:J.useMemo(()=>{if(t.map)return n=>rle({map:t.map,...n})},[t.map])}}const YD=e=>{const t=da({mapId:e.mapId}),r=Ij({mapId:e.mapId}),[n,i]=ft.useState(!1);return Z.jsx(Z.Fragment,{children:Z.jsx(Ui,{color:"primary",variant:"contained",onClick:()=>{if(t.map&&r?.createExport){i(!0);const o=t.map.getBounds(),l=[o.getWest(),o.getSouth(),o.getEast(),o.getNorth()];r.createExport({width:595*1.4,height:842*1.4,bbox:l,bboxUnrotated:l,bearing:t.map.getBearing(),format:"a4",orientation:"portrait",...e.exportOptions}).then(a=>a.createPdf()).then(a=>(i(!1),a.downloadPdf())).catch(a=>{console.log(a),i(!1)})}},children:n?Z.jsx(v2,{size:24,sx:{color:"#fff"}}):Z.jsx(hae,{})})})};try{YD.displayName="MlCreatePdfButton",YD.__docgenInfo={description:"Renders a button that will create a PDF version of the current map view (dimensions adjusted to fit Din A4 Paper).",displayName:"MlCreatePdfButton",props:{mapId:{defaultValue:null,description:"ID of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},exportOptions:{defaultValue:null,description:"Option overrides for the createExport function",name:"exportOptions",required:!1,type:{name:"createExportOptions | undefined"}}}}}catch{}const Ig={A4:{"300dpi":{width:2480,height:3508},"150dpi":{width:1240,height:1754},"72dpi":{width:595,height:842}},A3:{"300dpi":{width:3505,height:4961},"150dpi":{width:1754,height:2480},"72dpi":{width:842,height:1191}},A2:{"300dpi":{width:4961,height:7016},"150dpi":{width:2480,height:3508},"72dpi":{width:1191,height:1684}},A1:{"300dpi":{width:7016,height:9933},"150dpi":{width:3508,height:4967},"72dpi":{width:1684,height:2384}},A0:{"300dpi":{width:9933,height:14043},"150dpi":{width:4967,height:7022},"72dpi":{width:2384,height:3370}}},kj=ft.createContext({}),sle=Ig.A4["72dpi"],ST=({children:e})=>{const[t,r]=J.useState("A4"),[n,i]=J.useState("72dpi"),[o,l]=J.useState({center:void 0,scale:void 0,rotate:0,width:210,height:297,orientation:"portrait",fixedScale:0}),a=J.useRef(null),c=J.useMemo(()=>typeof Ig[t][n]<"u"?o.orientation==="portrait"?Ig[t][n]:{width:Ig[t][n].height,height:Ig[t][n].width}:sle,[t,n,o.orientation]),h={options:o,setOptions:l,format:t,setFormat:r,quality:n,setQuality:i,geojsonRef:a,template:c};return Z.jsx(kj.Provider,{value:h,children:e})};try{ST.displayName="PdfContextProvider",ST.__docgenInfo={description:"",displayName:"PdfContextProvider",props:{}}}catch{}function iI(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function Aj(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function Mj(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function aI(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function lle(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function ule(e,t){var r=aI("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function CT(e){return e.replace(/_/g,".")}function Nv(e,t){var r=null,n="-1";return iI(e,function(i){var o=aI("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!o||i.brand?!1:(r=i,n=o[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=ule(i.versionTest.toLowerCase(),t)||n),n=CT(n),!0)}),{preset:r,version:n}}function Sb(e,t){var r={brand:"",version:"-1"};return iI(e,function(n){var i=Lj(t,n);return i?(r.brand=n.id,r.version=n.versionAlias||i.version,r.version!=="-1"):!1}),r}function Lj(e,t){return Aj(e,function(r){var n=r.brand;return aI(""+t.test,n.toLowerCase())})}var Rj=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Dj=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ET=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Nj=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Oj=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Fj(e){return!!Nv(Nj,e).preset}function cle(e){var t=Mj(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:Fj(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=Nv(Rj,t),l=o.preset,a=o.version,c=Nv(Oj,t),h=c.preset,g=c.version,v=Nv(Dj,t);if(n.chromium=!!v.preset,n.chromiumVersion=v.version,!n.chromium){var x=Nv(ET,t);n.webkit=!!x.preset,n.webkitVersion=x.version}return h&&(i.name=h.id,i.version=g,i.majorVersion=parseInt(g,10)),l&&(n.name=l.id,n.version=a,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}function dle(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=t.mobile||!1,i=r[0],o=(t.platform||navigator.platform).toLowerCase(),l={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Sb(Nj,r).brand||Fj(Mj())},a={name:"unknown",version:"-1",majorVersion:-1};l.webkit=!l.chromium&&iI(ET,function(x){return Lj(r,x)});var c=Sb(Dj,r);if(l.chromium=!!c.brand,l.chromiumVersion=c.version||"-1",!l.chromium){var h=Sb(ET,r);l.webkit=!!h.brand,l.webkitVersion=h.version||"-1"}var g=Aj(Oj,function(x){return new RegExp(""+x.test,"g").exec(o)});a.name=g?g.id:"";{var v=Sb(Rj,r);l.name=v.brand||l.name,l.version=v.brand&&e?e.uaFullVersion:v.version}return l.webkit&&(a.name=n?"ios":"mac"),a.name==="ios"&&l.webview&&(l.version="-1"),a.version=CT(a.version),l.version=CT(l.version),a.majorVersion=parseInt(a.version,10),l.majorVersion=parseInt(l.version,10),{browser:l,os:a,isMobile:n,isHints:!0}}function fle(e){return lle()?dle():cle(e)}function hle(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(i){return i?""+e+i:""}).join(" ")}).join(" ")}function ple(e,t){return t.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function Fp(e,t){return function(r){r&&(e[t]=r)}}function Bj(e,t,r){return function(n){n&&(e[t][r]=n)}}function mle(e,t){return t===void 0&&(t={}),function(r,n){e.forEach(function(i){var o=t[i]||i;o in r||(r[o]=function(){for(var l,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var h=(l=this[n])[i].apply(l,a);return h===this[n]?this:h})})}}var gle="function",yle="object",vle="string",ble="number",oI="undefined",zj=typeof window!==oI,_le=typeof document!==oI&&document,xle=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ws=1e-7,Cb={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wle(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],l=0,a=o.length;l<a;l++,i++)n[i]=o[l];return n}function H_(e,t,r,n){return(e*n+t*r)/(r+n)}function sI(e){return typeof e===oI}function fd(e){return e&&typeof e===yle}function Tl(e){return Array.isArray(e)}function Kf(e){return typeof e===vle}function T0(e){return typeof e===ble}function lI(e){return typeof e===gle}function Sle(e,t){var r=e===""||e==" ",n=t===""||t==" ";return n&&r||e===t}function jj(e,t,r,n,i){var o=uI(e,t,r);return o?r:Cle(e,t,r+1,n,i)}function uI(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function Cle(e,t,r,n,i){for(var o=function(h){var g=t[h].trim();if(g===e.close&&!uI(e,t,h))return{value:h};var v=h,x=gc(i,function(b){var S=b.open;return S===g});if(x&&(v=jj(x,t,h,n,i)),v===-1)return l=h,"break";h=v,l=h},l,a=r;a<n;++a){var c=o(a);if(a=l,typeof c=="object")return c.value;if(c==="break")break}return-1}function cI(e,t){var r=Kf(t)?{separator:t}:t,n=r.separator,i=n===void 0?",":n,o=r.isSeparateFirst,l=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,c=a===void 0?l:a,h=r.openCloseCharacters,g=h===void 0?xle:h,v=g.map(function(U){var H=U.open,X=U.close;return H===X?H:H+"|"+X}).join("|"),x="(\\s*"+i+"\\s*|"+v+"|\\s+)",b=new RegExp(x,"g"),S=e.split(b).filter(function(U){return U&&U!=="undefined"}),I=S.length,k=[],M=[];function O(){return M.length?(k.push(M.join("")),M=[],!0):!1}for(var F=function(U){var H=S[U].trim(),X=U,ie=gc(g,function(ne){var ae=ne.open;return ae===H}),ee=gc(g,function(ne){var ae=ne.close;return ae===H});if(ie){if(X=jj(ie,S,U,I,g),X!==-1&&c)return O()&&o||(k.push(S.slice(U,X+1).join("")),U=X,o)?(D=U,"break"):(D=U,"continue")}else if(ee&&!uI(ee,S,U)){var G=wle(g);return G.splice(g.indexOf(ee),1),{value:cI(e,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:l,isSeparateOpenClose:c,openCloseCharacters:G})}}else if(Sle(H,i)&&!l)return O(),o?(D=U,"break"):(D=U,"continue");X===-1&&(X=I-1),M.push(S.slice(U,X+1).join("")),U=X,D=U},D,q=0;q<I;++q){var z=F(q);if(q=D,typeof z=="object")return z.value;if(z==="break")break}return M.length&&k.push(M.join("")),k}function Oh(e){return cI(e,"")}function Mp(e){return cI(e,",")}function qj(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function c1(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2],i=t[3];return{prefix:r,unit:i,value:parseFloat(n)}}function Ele(e,t){return e.replace(/([a-z])([A-Z])/g,function(r,n,i){return""+n+t+i.toLowerCase()})}function P0(){return Date.now?Date.now():new Date().getTime()}function Gf(e,t,r){r===void 0&&(r=-1);for(var n=e.length,i=0;i<n;++i)if(t(e[i],i,e))return i;return r}function gc(e,t,r){var n=Gf(e,t);return n>-1?e[n]:r}var $j=(function(){var e=P0(),t=zj&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=P0(),i=setTimeout(function(){r(n-e)},1e3/60);return i}})(),Tle=(function(){var e=zj&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}})();function _y(e){return Object.keys(e)}function to(e,t){var r=c1(e),n=r.value,i=r.unit;if(fd(t)){var o=t[i];if(o){if(lI(o))return o(n);if(Cb[i])return Cb[i](n,o)}}else if(i==="%")return n*t/100;return Cb[i]?Cb[i](n):n}function TT(e,t,r){return Math.max(t,Math.min(e,r))}function ZD(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[Pi(t[0],Ws),Pi(t[0]/n,Ws)],[Pi(t[1]*n,Ws),Pi(t[1],Ws)]].filter(function(i){return i.every(function(o,l){var a=t[l],c=Pi(a,Ws);return r?o<=a||o<=c:o>=a||o>=c})})[0]||e}function Vj(e,t,r,n){if(!n)return e.map(function(b,S){return TT(b,t[S],r[S])});var i=e[0],o=e[1],l=n===!0?i/o:n,a=ZD(e,t,!1,l),c=a[0],h=a[1],g=ZD(e,r,!0,l),v=g[0],x=g[1];return i<c||o<h?(i=c,o=h):(i>v||o>x)&&(i=v,o=x),[i,o]}function Ple(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return r}function PT(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function Ss(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function Ile(e){return[0,1].map(function(t){return PT(e.map(function(r){return r[t]}))})}function KD(e){var t=Ile(e),r=Ss(t,e[0]),n=Ss(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function Ff(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function Pi(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function JD(e,t){return e.forEach(function(r,n){e[n]=Pi(e[n],t)}),e}function kle(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function Ale(e){return e.reduce(function(t,r){return t.concat(r)},[])}function ll(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Uj(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function Gj(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function uu(e,t,r,n){e.addEventListener(t,r,n)}function Ol(e,t,r,n){e.removeEventListener(t,r,n)}function dI(e){return e?.ownerDocument||_le}function fI(e){return dI(e).documentElement}function Wh(e){return dI(e).body}function Mh(e){var t;return((t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function Hj(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function hI(e){return fd(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}function Mle(e,t,r,n,i,o){for(var l=0;l<i;++l){var a=r+l*i,c=n+l*i;e[a]+=e[c]*o,t[a]+=t[c]*o}}function Lle(e,t,r,n,i){for(var o=0;o<i;++o){var l=r+o*i,a=n+o*i,c=e[l],h=t[l];e[l]=e[a],e[a]=c,t[l]=t[a],t[a]=h}}function Rle(e,t,r,n,i){for(var o=0;o<n;++o){var l=r+o*n;e[l]/=i,t[l]/=i}}function Wj(e,t,r){for(var n=e.slice(),i=0;i<r;++i)n[i*r+t-1]=0,n[(t-1)*r+i]=0;return n[(t-1)*(r+1)]=1,n}function Jd(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=To(t),i=0;i<t;++i){var o=t*i+i;if(!Pi(r[o],Ws)){for(var l=i+1;l<t;++l)if(r[t*i+l]){Lle(r,n,i,l,t);break}}if(!Pi(r[o],Ws))return[];Rle(r,n,i,t,r[o]);for(var l=0;l<t;++l){var a=l,c=l+i*t,h=r[c];!Pi(h,Ws)||i===l||Mle(r,n,a,i,t,-h)}}return n}function Dle(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=0;n<t;++n)for(var i=0;i<t;++i)r[i*t+n]=e[t*n+i];return r}function Xj(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=e[t*t-1],i=0;i<t-1;++i)r[i]=e[t*(t-1)+i]/n;return r[t-1]=0,r}function Nle(e,t){for(var r=To(t),n=0;n<t-1;++n)r[t*(t-1)+n]=e[n]||0;return r}function Up(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function hd(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=To(r),i=Math.min(t,r),o=0;o<i-1;++o){for(var l=0;l<i-1;++l)n[o*r+l]=e[o*t+l];n[(o+1)*r-1]=e[(o+1)*t-1],n[(r-1)*r+o]=e[(t-1)*t+o]}return n[r*r-1]=e[t*t-1],n}function W_(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=To(e);return t.forEach(function(i){n=ro(n,i,e)}),n}function ro(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],i=e.length/r,o=t.length/i;if(i){if(!o)return e}else return t;for(var l=0;l<r;++l)for(var a=0;a<o;++a){n[a*r+l]=0;for(var c=0;c<i;++c)n[a*r+l]+=e[c*r+l]*t[a*i+c]}return n}function ha(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]+t[i];return n}function ci(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]-t[i];return n}function Ole(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function Yj(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function pu(e,t,r){r===void 0&&(r=t.length);var n=ro(e,t,r),i=n[r-1];return n.map(function(o){return o/i})}function Fle(e,t){return ro(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function Ble(e,t){return ro(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function zle(e,t){return ro(e,f1(t,4))}function Eb(e,t){var r=t[0],n=r===void 0?1:r,i=t[1],o=i===void 0?1:i,l=t[2],a=l===void 0?1:l;return ro(e,[n,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function d1(e,t){return pu(f1(t,3),Up(e,3))}function KS(e,t){var r=t[0],n=r===void 0?0:r,i=t[1],o=i===void 0?0:i,l=t[2],a=l===void 0?0:l;return ro(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,o,a,1],4)}function QD(e,t){return ro(e,t,4)}function f1(e,t){var r=Math.cos(e),n=Math.sin(e),i=To(t);return i[0]=r,i[1]=n,i[t]=-n,i[t+1]=r,i}function To(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function pI(e,t){for(var r=To(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[(t+1)*i]=e[i];return r}function Gp(e,t){for(var r=To(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[t*(t-1)+i]=e[i];return r}function mI(e,t,r,n,i,o,l,a){var c=e[0],h=e[1],g=t[0],v=t[1],x=r[0],b=r[1],S=n[0],I=n[1],k=i[0],M=i[1],O=o[0],F=o[1],D=l[0],q=l[1],z=a[0],U=a[1],H=[c,0,g,0,x,0,S,0,h,0,v,0,b,0,I,0,1,0,1,0,1,0,1,0,0,c,0,g,0,x,0,S,0,h,0,v,0,b,0,I,0,1,0,1,0,1,0,1,-k*c,-M*c,-O*g,-F*g,-D*x,-q*x,-z*S,-U*S,-k*h,-M*h,-O*v,-F*v,-D*b,-q*b,-z*I,-U*I],X=Jd(H,8);if(!X.length)return[];var ie=ro(X,[k,M,O,F,D,q,z,U],8);return ie[8]=1,hd(Dle(ie),3,4)}var a0=function(){return a0=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},a0.apply(this,arguments)};function jle(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function I0(e,t){return t===void 0&&(t=0),sg(ry(e,t))}function qle(e,t){var r=pu(e,[t[0],t[1]||0,t[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function sg(e){var t=jle();return e.forEach(function(r){var n=r.matrixFunction,i=r.functionValue;n&&(t=n(t,i))}),t}function ry(e,t){t===void 0&&(t=0);var r=Tl(e)?e:Oh(e);return r.map(function(n){var i=qj(n),o=i.prefix,l=i.value,a=null,c=o,h="";if(o==="translate"||o==="translateX"||o==="translate3d"){var g=fd(t)?a0(a0({},t),{"o%":t["%"]}):{"%":t,"o%":t},v=Mp(l).map(function(ne,ae){return ae===0&&"x%"in g?g["%"]=t["x%"]:ae===1&&"y%"in g?g["%"]=t["y%"]:g["%"]=t["o%"],to(ne,g)}),x=v[0],b=v[1],S=b===void 0?0:b,I=v[2],k=I===void 0?0:I;a=KS,h=[x,S,k]}else if(o==="translateY"){var M=fd(t)?a0({"%":t["y%"]},t):{"%":t},S=to(l,M);a=KS,h=[0,S,0]}else if(o==="translateZ"){var k=parseFloat(l);a=KS,h=[0,0,k]}else if(o==="scale"||o==="scale3d"){var O=Mp(l).map(function(ne){return parseFloat(ne)}),F=O[0],D=O[1],q=D===void 0?F:D,z=O[2],U=z===void 0?1:z;a=Eb,h=[F,q,U]}else if(o==="scaleX"){var F=parseFloat(l);a=Eb,h=[F,1,1]}else if(o==="scaleY"){var q=parseFloat(l);a=Eb,h=[1,q,1]}else if(o==="scaleZ"){var U=parseFloat(l);a=Eb,h=[1,1,U]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var H=c1(l),X=H.unit,ie=H.value,ee=X==="rad"?ie:ie*Math.PI/180;o==="rotate"||o==="rotateZ"?(c="rotateZ",a=zle):o==="rotateX"?a=Fle:o==="rotateY"&&(a=Ble),h=ee}else if(o==="matrix3d")a=QD,h=Mp(l).map(function(ne){return parseFloat(ne)});else if(o==="matrix"){var G=Mp(l).map(function(ne){return parseFloat(ne)});a=QD,h=[G[0],G[1],0,0,G[2],G[3],0,0,0,0,1,0,G[4],G[5],0,1]}else c="";return{name:o,functionName:c,value:l,matrixFunction:a,functionValue:h}})}var $le=(function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var i=this.keys,o=this.values,l=i.indexOf(r),a=l===-1?i.length:l;i[a]=r,o[a]=n},e})(),Vle=(function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e})(),Ule=typeof Map=="function",Gle=(function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e})();function Hle(e,t){var r=[],n=[];return e.forEach(function(i){var o=i[0],l=i[1],a=new Gle;r[o]=a,n[l]=a}),r.forEach(function(i,o){i.connect(r[o-1])}),e.filter(function(i,o){return!t[o]}).map(function(i,o){var l=i[0],a=i[1];if(l===a)return[0,0];var c=r[l],h=n[a-1],g=c.getIndex();c.disconnect(),h?c.connect(h,h.next):c.connect(void 0,r[0]);var v=c.getIndex();return[g,v]})}var Wle=(function(){function e(r,n,i,o,l,a,c,h){this.prevList=r,this.list=n,this.added=i,this.removed=o,this.changed=l,this.maintained=a,this.changedBeforeAdded=c,this.fixed=h}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=Hle(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(o,l){var a=o[0],c=o[1],h=n[l],g=h[0],v=h[1];if(a!==c)return i.push([g,v]),!0}),this.cachePureChanged=i},e})();function gI(e,t,r){var n=Ule?Map:r?Vle:$le,i=r||function(O){return O},o=[],l=[],a=[],c=e.map(i),h=t.map(i),g=new n,v=new n,x=[],b=[],S={},I=[],k=0,M=0;return c.forEach(function(O,F){g.set(O,F)}),h.forEach(function(O,F){v.set(O,F)}),c.forEach(function(O,F){var D=v.get(O);typeof D>"u"?(++M,l.push(F)):S[D]=M}),h.forEach(function(O,F){var D=g.get(O);typeof D>"u"?(o.push(F),++k):(a.push([D,F]),M=S[F]||0,x.push([D-M,F-k]),b.push(F===D),D!==F&&I.push([D,F]))}),l.reverse(),new Wle(e,t,o,l,I,a,x,b)}var Xle=(function(){function e(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var n=[].slice.call(r),i=gI(this.list,n,this.findKeyCallback);return this.list=n,i},e})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var IT=function(e,t){return IT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},IT(e,t)};function Yle(e,t){IT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zj=typeof Map=="function"?void 0:(function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}})(),Kj=(function(e){Yle(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,Zj)||this}return t})(Xle);function Zle(e,t){return gI(e,t,Zj)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kT=function(){return kT=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},kT.apply(this,arguments)};function Kle(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],l=0,a=o.length;l<a;l++,i++)n[i]=o[l];return n}var yI=(function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(fd(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(!r)this._events={};else if(fd(r))for(var i in r)this.off(i);else if(!n)this._events[r]=[];else{var o=this._events[r];if(o){var l=Gf(o,function(a){return a.listener===n});l>-1&&o.splice(l,1)}}return this},t.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(o){i._addEvent(r,o,{once:!0})})},t.emit=function(r,n){var i=this;n===void 0&&(n={});var o=this._events[r];if(!r||!o)return!0;var l=!1;return n.eventType=r,n.stop=function(){l=!0},n.currentTarget=this,Kle(o).forEach(function(a){a.listener(n),a.once&&i.off(r,a.listener)}),!l},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,i){var o=this._events;o[r]=o[r]||[];var l=o[r];l.push(kT({listener:n},i))},e})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var AT=function(e,t){return AT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},AT(e,t)};function Jle(e,t){AT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var kg=function(){return kg=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},kg.apply(this,arguments)};function Qle(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function eN(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function Tb(e){if(e){if(Kf(e))return document.querySelector(e)}else return null;if(lI(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var eue=(function(e){Jle(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(o){n.checkScroll({container:i.container,inputEvent:o})}})},n}var r=t.prototype;return r.dragStart=function(n,i){var o=Tb(i.container);if(!o){this._flag=!1;return}var l=0,a=0,c=0,h=0;if(o===document.body)c=window.innerWidth,h=window.innerHeight;else{var g=o.getBoundingClientRect();l=g.top,a=g.left,c=g.width,h=g.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:l,left:a,width:c,height:h},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},r.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var o=n.clientX,l=n.clientY,a=i.threshold,c=a===void 0?0:a,h=this,g=h._startRect,v=h._startPos;this._currentOptions=i;var x=[0,0];return g.top>l-c?(v[1]>g.top||l<v[1])&&(x[1]=-1):g.top+g.height<l+c&&(v[1]<g.top+g.height||l>v[1])&&(x[1]=1),g.left>o-c?(v[0]>g.left||o<v[0])&&(x[0]=-1):g.left+g.width<o+c&&(v[0]<g.left+g.width||o>v[0])&&(x[0]=1),!x[0]&&!x[1]?!1:this._continueDrag(kg(kg({},i),{direction:x,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var i=this;if(this._isWait)return!1;var o=n.prevScrollPos,l=o===void 0?this._prevScrollPos:o,a=n.direction,c=n.throttleTime,h=c===void 0?0:c,g=n.inputEvent,v=n.isDrag,x=this._getScrollPosition(a||[0,0],n),b=x[0]-l[0],S=x[1]-l[1],I=a||[b?Math.abs(b)/b:0,S?Math.abs(S)/S:0];return this._prevScrollPos=x,this._lock=!1,!b&&!S?!1:(this.emit("move",{offsetX:I[0]?b:0,offsetY:I[1]?S:0,inputEvent:g}),h&&v&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},h)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,i){var o=i.container,l=i.getScrollPosition,a=l===void 0?Qle:l;return a({container:Tb(o),direction:n})},r._continueDrag=function(n){var i=this,o,l=n.container,a=n.direction,c=n.throttleTime,h=n.useScroll,g=n.isDrag,v=n.inputEvent;if(!(!this._flag||g&&this._isWait)){var x=P0(),b=Math.max(c+this._prevTime-x,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},b),!1;this._prevTime=x;var S=this._getScrollPosition(a,n);this._prevScrollPos=S,g&&(this._isWait=!0),h||(this._lock=!0);var I={container:Tb(l),direction:a,inputEvent:v};return(o=n.requestScroll)===null||o===void 0||o.call(n,I),this.emit("scroll",I),this._isWait=!1,h||this.checkScroll(kg(kg({},n),{prevScrollPos:S,direction:a,inputEvent:v}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var o=i===!0?eN:i,l=Tb(n.container);i===!0&&(l===document.body||l===document.documentElement)?this._unregister=eN(window,this._onScroll):this._unregister=o(l,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t})(yI);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function tue(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],l=0,a=o.length;l<a;l++,i++)n[i]=o[l];return n}function qu(e){return Pi(e,Ws)}function rue(e,t){return e.every(function(r,n){return qu(r-t[n])===0})}function nue(e,t){return!qu(e[0]-t[0])&&!qu(e[1]-t[1])}function Jj(e){return e.length<3?0:Math.abs(Ple(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function tN(e,t){var r=t.width,n=t.height,i=t.left,o=t.top,l=Hp(e),a=l.minX,c=l.minY,h=l.maxX,g=l.maxY,v=r/(h-a),x=n/(g-c);return e.map(function(b){return[i+(b[0]-a)*v,o+(b[1]-c)*x]})}function Hp(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function MT(e,t,r){var n=e[0],i=e[1],o=Hp(t),l=o.minX,a=o.maxX,c=[[l,i],[a,i]],h=X_(c[0],c[1]),g=LT(t),v=[];if(g.forEach(function(S){var I=X_(S[0],S[1]),k=S[0];if(rue(h,I))v.push({pos:e,line:S,type:"line"});else{var M=Qj(vI(h,I),[c,S]);M.forEach(function(O){S.some(function(F){return nue(F,O)})?v.push({pos:O,line:S,type:"point"}):qu(k[1]-i)!==0&&v.push({pos:O,line:S,type:"intersection"})})}}),gc(v,function(S){return S[0]===n}))return!0;var x=0,b={};return v.forEach(function(S){var I=S.pos,k=S.type,M=S.line;if(!(I[0]>n))if(k==="intersection")++x;else{if(k==="line")return;if(k==="point"){var O=gc(M,function(q){return q[1]!==i}),F=b[I[0]],D=O[1]>i?1:-1;F?F!==D&&++x:b[I[0]]=D}}}),x%2===1}function X_(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],l=i-r,a=o-n;Math.abs(l)<Ws&&(l=0),Math.abs(a)<Ws&&(a=0);var c=0,h=0,g=0;return l?a?(c=-a/l,h=1,g=-c*r-n):(h=1,g=-n):a&&(c=-1,g=r),[c,h,g]}function vI(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],l=t[1],a=t[2],c=r===0&&o===0,h=n===0&&l===0,g=[];if(c&&h)return[];if(c){var v=-i/n,x=-a/l;return v!==x?[]:[[-1/0,v],[1/0,v]]}else if(h){var b=-i/r,S=-a/o;return b!==S?[]:[[b,-1/0],[b,1/0]]}else if(r===0){var I=-i/n,k=-(l*I+a)/o;g=[[k,I]]}else if(o===0){var I=-a/l,k=-(n*I+i)/r;g=[[k,I]]}else if(n===0){var k=-i/r,I=-(o*k+a)/l;g=[[k,I]]}else if(l===0){var k=-a/o,I=-(r*k+i)/n;g=[[k,I]]}else{var k=(n*a-l*i)/(l*r-n*o),I=-(r*k+i)/n;g=[[k,I]]}return g.map(function(M){return[M[0],M[1]]})}function Qj(e,t){var r=t.map(function(v){return[0,1].map(function(x){return[Math.min(v[0][x],v[1][x]),Math.max(v[0][x],v[1][x])]})}),n=[];if(e.length===2){var i=e[0],o=i[0],l=i[1];if(qu(o-e[1][0])){if(!qu(l-e[1][1])){var h=Math.max.apply(Math,r.map(function(v){return v[0][0]})),g=Math.min.apply(Math,r.map(function(v){return v[0][1]}));if(qu(h-g)>0)return[];n=[[h,l],[g,l]]}}else{var a=Math.max.apply(Math,r.map(function(v){return v[1][0]})),c=Math.min.apply(Math,r.map(function(v){return v[1][1]}));if(qu(a-c)>0)return[];n=[[o,a],[o,c]]}}return n.length||(n=e.filter(function(v){var x=v[0],b=v[1];return r.every(function(S){return 0<=qu(x-S[0][0])&&0<=qu(S[0][1]-x)&&0<=qu(b-S[1][0])&&0<=qu(S[1][1]-b)})})),n.map(function(v){return[qu(v[0]),qu(v[1])]})}function LT(e){return tue(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function iue(e,t){var r=e.slice(),n=t.slice();KD(r)===-1&&r.reverse(),KD(n)===-1&&n.reverse();var i=LT(r),o=LT(n),l=i.map(function(g){return X_(g[0],g[1])}),a=o.map(function(g){return X_(g[0],g[1])}),c=[];l.forEach(function(g,v){var x=i[v],b=[];a.forEach(function(S,I){var k=vI(g,S),M=Qj(k,[x,o[I]]);b.push.apply(b,M.map(function(O){return{index1:v,index2:I,pos:O,type:"intersection"}}))}),b.sort(function(S,I){return Ff(x[0],S.pos)-Ff(x[0],I.pos)}),c.push.apply(c,b),MT(x[1],n)&&c.push({index1:v,index2:-1,pos:x[1],type:"inside"})}),o.forEach(function(g,v){if(MT(g[1],r)){var x=!1,b=Gf(c,function(S){var I=S.index2;return I===v?(x=!0,!1):!!x});b===-1&&(x=!1,b=Gf(c,function(S){var I=S.index1,k=S.index2;return I===-1&&k+1===v?(x=!0,!1):!!x})),b===-1?c.push({index1:-1,index2:v,pos:g[1],type:"inside"}):c.splice(b,0,{index1:-1,index2:v,pos:g[1],type:"inside"})}});var h={};return c.filter(function(g){var v=g.pos,x=v[0]+"x"+v[1];return h[x]?!1:(h[x]=!0,!0)})}function aue(e,t){var r=iue(e,t);return r.map(function(n){var i=n.pos;return i})}function oue(e,t){var r=aue(e,t);return Jj(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var RT=function(e,t){return RT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},RT(e,t)};function sue(e,t){RT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Gs=function(){return Gs=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Gs.apply(this,arguments)};function lue(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function JS(e){return lue([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function uue(e){return e.touches&&e.touches.length>=2}function Pb(e){return e?e.touches?due(e.touches):[eq(e)]:[]}function cue(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function rN(e,t,r){var n=r.length,i=o0(e,n),o=i.clientX,l=i.clientY,a=i.originalClientX,c=i.originalClientY,h=o0(t,n),g=h.clientX,v=h.clientY,x=o0(r,n),b=x.clientX,S=x.clientY,I=o-g,k=l-v,M=o-b,O=l-S;return{clientX:a,clientY:c,deltaX:I,deltaY:k,distX:M,distY:O}}function QS(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function due(e){for(var t=Math.min(e.length,2),r=[],n=0;n<t;++n)r.push(eq(e[n]));return r}function eq(e){return{clientX:e.clientX,clientY:e.clientY}}function o0(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),i=0;i<n;++i){var o=e[i];r.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,r.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,r.clientX+=o.clientX,r.clientY+=o.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var e5=(function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),JS(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),JS(t)-JS(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=rN(t||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,o=n.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,i=Math.min(this.length,r.length),o=[],l=0;l<i;++l)o[l]=rN([t[l]],[r[l]],[n[l]]);return o},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=o0(t,this.length),i=o0(this.prevClients,this.length),o=n.clientX-i.clientX,l=n.clientY-i.clientY;return Math.sqrt(o*o+l*l)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),QS(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),QS(t)/QS(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e})(),nN=["textarea","input"],fue=(function(e){sue(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(x,b){if(b===void 0&&(b=!0),!(!i.flag&&x.cancelable===!1)){var S=x.type.indexOf("drag")>=-1;if(!(i.flag&&S)){i._isDragAPI=!0;var I=i.options,k=I.container,M=I.pinchOutside,O=I.preventWheelClick,F=I.preventRightClick,D=I.preventDefault,q=I.checkInput,z=I.dragFocusedInput,U=I.preventClickEventOnDragStart,H=I.preventClickEventOnDrag,X=I.preventClickEventByCondition,ie=i._useTouch,ee=!i.flag;if(i._isSecondaryButton=x.which===3||x.button===2,O&&(x.which===2||x.button===1)||F&&(x.which===3||x.button===2))return i.stop(),!1;if(ee){var G=i._window.document.activeElement,ne=x.target;if(ne){var ae=ne.tagName.toLowerCase(),le=nN.indexOf(ae)>-1,fe=ne.isContentEditable;if(le||fe){if(q||!z&&G===ne)return!1;if(G&&(G===ne||fe&&G.isContentEditable&&G.contains(ne)))if(z)ne.blur();else return!1}else if((D||x.type==="touchstart")&&G){var ke=G.tagName.toLowerCase();(G.isContentEditable||nN.indexOf(ke)>-1)&&G.blur()}(U||H||X)&&uu(i._window,"click",i._onClick,!0)}i.clientStores=[new e5(Pb(x))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=x,i.data={},i.doubleFlag=P0()-i.prevTime<200,i._isMouseEvent=cue(x),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var me=i._preventMouseEvent||i.emit("dragStart",Gs(Gs({data:i.data,datas:i.data,inputEvent:x,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){x.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));me===!1&&i.stop(),i._isMouseEvent&&i.flag&&D&&x.preventDefault()}if(!i.flag)return!1;var Se=0;if(ee?(i._attchDragEvent(),ie&&M&&(Se=setTimeout(function(){uu(k,"touchstart",i.onDragStart,{passive:!1})}))):ie&&M&&Ol(k,"touchstart",i.onDragStart),i.flag&&uue(x)){if(clearTimeout(Se),ee&&x.touches.length!==x.changedTouches.length)return;i.pinchFlag||i.onPinchStart(x)}}}},i.onDrag=function(x,b){if(i.flag){var S=i.options.preventDefault;!i._isMouseEvent&&S&&x.preventDefault(),i._prevInputEvent=x;var I=Pb(x),k=i.moveClients(I,x,!1);if(i._dragFlag){if(i.pinchFlag||k.deltaX||k.deltaY){var M=i._preventMouseEvent||i.emit("drag",Gs(Gs({},k),{isScroll:!!b,inputEvent:x}));if(M===!1){i.stop();return}}i.pinchFlag&&i.onPinch(x,I)}i.getCurrentStore().getPosition(I,!0)}},i.onDragEnd=function(x){if(i.flag){var b=i.options,S=b.pinchOutside,I=b.container,k=b.preventClickEventOnDrag,M=b.preventClickEventOnDragStart,O=b.preventClickEventByCondition,F=i.isDrag;(k||M||O)&&requestAnimationFrame(function(){i._allowClickEvent()}),!O&&!M&&k&&!F&&i._allowClickEvent(),i._useTouch&&S&&Ol(I,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(x);var D=x?.touches?Pb(x):[],q=D.length;q===0||!i.options.keepDragging?i.flag=!1:i._addStore(new e5(D));var z=i._getPosition(),U=P0(),H=!F&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=F||H?0:U,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Gs({data:i.data,datas:i.data,isDouble:H,isDrag:F,isClick:!F,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:x,isTrusted:i._isTrusted},z)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Ol(i._window,"click",i._onClick,!0)},i._onClick=function(x){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(x)||(x.stopPropagation(),x.preventDefault())},i._onContextMenu=function(x){var b=i.options;b.preventRightClick?i.onDragEnd(x):x.preventDefault()},i._passCallback=function(){};var o=[].concat(r),l=o[0];i._window=Hj(l)?l:Mh(l),i.options=Gs({checkInput:!1,container:l&&!("document"in l)?Mh(l):l,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var a=i.options,c=a.container,h=a.events,g=a.checkWindowBlur;if(i._useDrag=h.indexOf("drag")>-1,i._useTouch=h.indexOf("touch")>-1,i._useMouse=h.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach(function(x){uu(x,"dragstart",i.onDragStart)}),i._useMouse&&(o.forEach(function(x){uu(x,"mousedown",i.onDragStart),uu(x,"mousemove",i._passCallback)}),uu(c,"contextmenu",i._onContextMenu)),g&&uu(Mh(),"blur",i.onBlur),i._useTouch){var v={passive:!1};o.forEach(function(x){uu(x,"touchstart",i.onDragStart,v),uu(x,"touchmove",i._passCallback,v)})}return i}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(r,n),o&&this.onDrag(i,!0))},t.prototype.move=function(r,n){var i=r[0],o=r[1],l=this.getCurrentStore(),a=l.prevClients;return this.moveClients(a.map(function(c){var h=c.clientX,g=c.clientY;return{clientX:h+i,clientY:g+o,originalClientX:h,originalClientY:g}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var i in r)n[i]=r[i];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Gs(Gs({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,i=this.options.container;this.off(),Ol(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(o){Ol(o,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(o){Ol(o,"mousedown",r.onDragStart)}),Ol(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(o){Ol(o,"touchstart",r.onDragStart)}),Ol(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var o=new e5(Pb(r));this.pinchFlag=!0,this._addStore(o);var l=this.emit("pinchStart",Gs(Gs({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));l===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Gs(Gs({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Gs(Gs({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,i){var o=this._getPosition(r,i),l=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!l&&this.isDrag&&(a=!0),Gs(Gs({data:this.data,datas:this.data},o),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:a})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var i=this.getCurrentStore(),o=i.getPosition(r,n),l=this.clientStores.slice(1).reduce(function(h,g){var v=g.getPosition();return h.distX+=v.distX,h.distY+=v.distY,h},o),a=l.distX,c=l.distY;return Gs(Gs({},o),{distX:a,distY:c})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(uu(n,"dragover",this.onDrag,i),uu(r,"dragend",this.onDragEnd)),this._useMouse&&(uu(n,"mousemove",this.onDrag),uu(r,"mouseup",this.onDragEnd)),this._useTouch&&(uu(n,"touchmove",this.onDrag,i),uu(r,"touchend",this.onDragEnd,i),uu(r,"touchcancel",this.onDragEnd,i))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(Ol(n,"dragover",this.onDrag),Ol(r,"dragend",this.onDragEnd)),this._useMouse&&(Ol(n,"mousemove",this.onDrag),Ol(r,"mouseup",this.onDragEnd)),this._useTouch&&(Ol(n,"touchstart",this.onDragStart),Ol(n,"touchmove",this.onDrag),Ol(r,"touchend",this.onDragEnd),Ol(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t})(yI);function hue(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var pue=hue;function mue(e){return pue(e).toString(36)}function gue(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function yue(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var o=i.trim();return(o?Mp(o):[""]).map(function(l){var a=l.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(e))):a?".".concat(e," ").concat(a):".".concat(e)}).join(", ")+" {"})}function vue(e,t,r,n,i){var o=dI(n),l=o.createElement("style");return l.setAttribute("type","text/css"),l.setAttribute("data-styled-id",e),l.setAttribute("data-styled-count","1"),r.nonce&&l.setAttribute("nonce",r.nonce),l.innerHTML=yue(e,t,r),(i||o.head||o.body).appendChild(l),l}function bue(e){var t="rCS"+mue(e);return{className:t,inject:function(r,n){n===void 0&&(n={});var i=gue(r),o=(i||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!o)o=vue(t,e,n,r,i);else{var l=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(l+1))}return{destroy:function(){var a,c=parseFloat(o.getAttribute("data-styled-count"))||0;c<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(c-1))}}}}}var DT=function(){return DT=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},DT.apply(this,arguments)};function _ue(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function tq(e,t){var r=bue(t),n=r.className;return J.forwardRef(function(i,o){var l=i.className,a=l===void 0?"":l;i.cspNonce;var c=_ue(i,["className","cspNonce"]),h=J.useRef();return J.useImperativeHandle(o,function(){return h.current},[]),J.useEffect(function(){var g=r.inject(h.current,{nonce:i.cspNonce});return function(){g.destroy()}},[]),J.createElement(e,DT({ref:h,"data-styled-id":n,className:"".concat(a," ").concat(n)},c))})}var NT=function(e,t){return NT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},NT(e,t)};function h1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");NT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ut=function(){return Ut=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ut.apply(this,arguments)};function xue(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function wue(e,t,r,n){var i=arguments.length,o=i<3?t:n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(o=(i<3?l(o):i>3?l(t,r,o):l(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function Sue(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],l;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){l={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return o}function dn(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function p1(e,t){return Ut({events:[],props:[],name:e},t)}var Cue=["n","w","s","e"],bI=["n","w","s","e","nw","ne","sw","se"];function Eue(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function Tue(e){var t=Eue(1,e),r=Math.round(e/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var xy=fle(),rq=xy.browser.webkit,nq=rq&&(function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1})(),iq=xy.browser.name,aq=parseInt(xy.browser.version,10),Pue=iq==="chrome",Iue=xy.browser.chromium,kue=parseInt(xy.browser.chromiumVersion,10)||0,Aue=Pue&&aq>=109||Iue&&kue>=109,Mue=iq==="firefox",Lue=parseInt(xy.browser.webkitVersion,10)>=612||aq>=15,_I="moveable-",Rue=bI.map(function(e){var t="",r="",n="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(o,";"),i="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",i="top"),e.indexOf("w")>-1&&(r="left: ".concat(o,";"),n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),Due=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Rue,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(Tue(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(nq?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Nue=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],OT=1e-4,ku=1e-7,Ib=1e-9,FT=Math.pow(10,10),iN=-FT,Oue={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},xI={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},oq={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Fue=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function m1(e,t,r,n,i,o){var l,a;o===void 0&&(o="draggable");var c=(a=(l=t.gestos[o])===null||l===void 0?void 0:l.move(r,e.inputEvent))!==null&&a!==void 0?a:{},h=c.originalDatas||c.datas,g=h[o]||(h[o]={});return Ut(Ut({},c),{isPinch:!!n,parentEvent:!0,datas:g,originalDatas:e.originalDatas})}var ny=(function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),Ut(Ut({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var n,i,o=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0;else{var l=this.isDrag;n=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!l&&this.isDrag&&(o=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:r,isFirstDrag:o,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e})();function Vg(e,t,r,n){var i=e.length===16,o=i?4:3,l=lm(e,r,n,o),a=Kt(l,4),c=Kt(a[0],2),h=c[0],g=c[1],v=Kt(a[1],2),x=v[0],b=v[1],S=Kt(a[2],2),I=S[0],k=S[1],M=Kt(a[3],2),O=M[0],F=M[1],D=Kt(Zo(e,t,o),2),q=D[0],z=D[1],U=Math.min(h,x,I,O),H=Math.min(g,b,k,F),X=Math.max(h,x,I,O),ie=Math.max(g,b,k,F);h=h-U||0,x=x-U||0,I=I-U||0,O=O-U||0,g=g-H||0,b=b-H||0,k=k-H||0,F=F-H||0,q=q-U||0,z=z-H||0;var ee=e[0],G=e[o+1],ne=Tu(ee*G);return{left:U,top:H,right:X,bottom:ie,origin:[q,z],pos1:[h,g],pos2:[x,b],pos3:[I,k],pos4:[O,F],direction:ne}}function sq(e,t){var r=t.clientX,n=t.clientY,i=t.datas,o=e.state,l=o.moveableClientRect,a=o.rootMatrix,c=o.is3d,h=o.pos1,g=l.left,v=l.top,x=c?4:3,b=Kt(ci(oy(a,[r-g,n-v],x),h),2),S=b[0],I=b[1],k=Kt(af({datas:i,distX:S,distY:I}),2),M=k[0],O=k[1];return[M,O]}function sm(e,t){var r=t.datas,n=e.state,i=n.allMatrix,o=n.beforeMatrix,l=n.is3d,a=n.left,c=n.top,h=n.origin,g=n.offsetMatrix,v=n.targetMatrix,x=n.transformOrigin,b=l?4:3;r.is3d=l,r.matrix=i,r.targetMatrix=v,r.beforeMatrix=o,r.offsetMatrix=g,r.transformOrigin=x,r.inverseMatrix=Jd(i,b),r.inverseBeforeMatrix=Jd(o,b),r.absoluteOrigin=Up(ha([a,c],h),b),r.startDragBeforeDist=pu(r.inverseBeforeMatrix,r.absoluteOrigin,b),r.startDragDist=pu(r.inverseMatrix,r.absoluteOrigin,b)}function Bue(e){return Vg(e.datas.beforeTransform,[50,50],100,100).direction}function I2(e,t,r){var n=t.datas,i=t.originalDatas.beforeRenderable,o=n.transformIndex,l=i.nextTransforms,a=l.length,c=i.nextTransformAppendedIndexes,h=-1;o===-1?(r==="translate"?h=0:r==="rotate"&&(h=Gf(l,function(b){return b.match(/scale\(/g)})),h===-1&&(h=l.length),n.transformIndex=h):gc(c,function(b){return b.index===o&&b.functionName===r})?h=o:h=o+c.filter(function(b){return b.index<o}).length;var g=cde(l,e.state,h),v=g.targetFunction,x=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=g.beforeFunctionTexts,n.afterFunctionTexts=g.afterFunctionTexts,n.beforeTransform=g.beforeFunctionMatrix,n.beforeTransform2=g.beforeFunctionMatrix2,n.targetTansform=g.targetFunctionMatrix,n.afterTransform=g.afterFunctionMatrix,n.afterTransform2=g.afterFunctionMatrix2,n.targetAllTransform=g.allFunctionMatrix,v.functionName===x?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):a>h&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=dn(dn([],Kt(c),!1),[{functionName:r,index:h,isAppend:!0}],!1))}function k2(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function zue(e){var t=e.datas,r=e.distX,n=e.distY,i=Kt(uq({datas:t,distX:r,distY:n}),2),o=i[0],l=i[1],a=lq(t,Nle([o,l],4));return pu(a,Up([0,0,0],4),4)}function lq(e,t,r){var n=e.beforeTransform,i=e.afterTransform,o=e.beforeTransform2,l=e.afterTransform2,a=e.targetAllTransform,c=r?ro(a,t,4):ro(t,a,4),h=ro(Jd(r?o:n,4),c,4),g=ro(h,Jd(r?l:i,4),4);return g}function uq(e){var t=e.datas,r=e.distX,n=e.distY,i=t.inverseBeforeMatrix,o=t.is3d,l=t.startDragBeforeDist,a=t.absoluteOrigin,c=o?4:3;return ci(pu(i,ha(a,[r,n]),c),l)}function af(e,t){var r=e.datas,n=e.distX,i=e.distY,o=r.inverseBeforeMatrix,l=r.inverseMatrix,a=r.is3d,c=r.startDragBeforeDist,h=r.startDragDist,g=r.absoluteOrigin,v=a?4:3;return ci(pu(t?o:l,ha(g,[n,i]),v),t?c:h)}function jue(e,t){var r=e.datas,n=e.distX,i=e.distY;r.beforeMatrix;var o=r.matrix,l=r.is3d;r.startDragBeforeDist;var a=r.startDragDist,c=r.absoluteOrigin,h=l?4:3;return ci(pu(o,ha(a,[n,i]),h),c)}function que(e,t,r,n,i,o){return n===void 0&&(n=t),i===void 0&&(i=r),o===void 0&&(o=[0,0]),e?e.map(function(l,a){var c=c1(l),h=c.value,g=c.unit,v=a?i:n,x=a?r:t;if(l==="%"||isNaN(h)){var b=v?o[a]/v:0;return x*b}else if(g!=="%")return h;return x*h/100}):o}function cq(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function $ue(e,t){return cq(t).map(function(r){return e[r]})}function t5(e,t){var r=(t+1)/2;return[H_(e[0][0],e[1][0],r,1-r),H_(e[0][1],e[1][1],r,1-r)]}function ul(e,t){var r=t5([e[0],e[1]],t[0]),n=t5([e[2],e[3]],t[0]);return t5([r,n],t[1])}function Vue(e,t,r,n,i,o){var l=lm(t,r,n,i),a=ul(l,o),c=e[0]-a[0],h=e[1]-a[1];return[c,h]}function g1(e,t,r,n){return ro(e,l0(t,n,r),n)}function Uue(e,t,r,n){var i=e.transformOrigin,o=e.offsetMatrix,l=e.is3d,a=l?4:3,c;if(Kf(r)){var h=t.beforeTransform,g=t.afterTransform;n?c=hd(I0(r),4,a):c=hd(ro(ro(h,I0([r]),4),g,4),4,a)}else c=r;return g1(o,c,i,a)}function Gue(e,t){var r=e.transformOrigin,n=e.offsetMatrix,i=e.is3d,o=e.targetMatrix,l=e.targetAllTransform,a=i?4:3;return g1(n,ro(l||o,pI(t,a),a),r,a)}function A2(e,t){var r=wy(t);return{setTransform:function(n,i){i===void 0&&(i=-1),r.startTransforms=Tl(n)?n:Oh(n),BT(e,t,i)},setTransformIndex:function(n){BT(e,t,n)}}}function M2(e,t,r){var n=wy(t),i=n.startTransforms;BT(e,t,Gf(i,function(o){return o.indexOf("".concat(r,"("))===0}))}function BT(e,t,r){var n=wy(t),i=t.datas;if(i.transformIndex=r,r!==-1){var o=n.startTransforms[r];if(o){var l=e.state,a=ry([o],{"x%":function(c){return c/100*l.offsetWidth},"y%":function(c){return c/100*l.offsetHeight}});i.startValue=a[0].functionValue}}}function wI(e,t){var r=wy(e);r.nextTransforms=Oh(t)}function wy(e){return e.originalDatas.beforeRenderable}function Y_(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function kb(e){return(Y_(e)||[]).join(" ")}function Ab(e){return wy(e).nextStyle}function dq(e,t,r,n,i){wI(i,t);var o=Eu.drag(e,m1(i,e.state,r,n)),l=o?o.transform:t;return Ut(Ut({transform:t,drag:o},Pu({transform:l},i)),{afterTransform:l})}function SI(e,t,r,n,i,o){var l=Uue(e.state,i,t,o),a=Xue(e,r,n,l);return a}function fq(e,t,r,n,i,o,l){var a=SI(e,t,r,i,o,l),c=e.state,h=c.left,g=c.top,v=e.props.groupable,x=v?h:0,b=v?g:0,S=ci(n,a);return ci(S,[x,b])}function Hue(e,t,r,n,i,o,l){var a=fq(e,t,r,n,i,o,l);return a}function Wue(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function Xue(e,t,r,n){n===void 0&&(n=e.state.allMatrix);var i=e.state,o=i.width,l=i.height,a=i.is3d,c=a?4:3,h=[o/2*(1+t[0])+r[0],l/2*(1+t[1])+r[1]];return Zo(n,h,c)}function Yue(e,t,r){var n=r.fixedDirection,i=r.fixedPosition,o=r.fixedOffset;return fq(e,"rotate(".concat(t,"deg)"),n,i,o,r)}function Zue(e,t,r,n,i,o){var l=e.props.groupable,a=e.state,c=a.transformOrigin,h=a.offsetMatrix,g=a.is3d,v=a.width,x=a.height,b=a.left,S=a.top,I=o.fixedDirection,k=o.nextTargetMatrix||a.targetMatrix,M=g?4:3,O=que(i,t,r,v,x,c),F=l?b:0,D=l?S:0,q=g1(h,k,O,M),z=Vue(n,q,t,r,M,I);return ci(z,[F,D])}function Kue(e,t){return ul(qc(e.state),t)}function Jue(e,t){var r=e.targetGesto,n=e.controlGesto,i;return r?.isFlag()&&(i=r.getEventData()[t]),!i&&n?.isFlag()&&(i=n.getEventData()[t]),i||{}}function Que(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function ece(e){var t=e("scale"),r=e("rotate"),n=e("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&i.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&i.push("scale(".concat(t.split(/\s+/).join(","),")")),i}function hq(e,t,r){for(var n=e,i=[],o=fI(e)||Wh(e),l=!r&&e===t||e===o,a=l,c=!1,h=3,g,v,x,b=!1,S=A0(t,t,!0).offsetParent,I=1;n&&!a;){a=l;var k=Xu(n),M=k("position"),O=Fq(n),F=M==="fixed",D=ece(k),q=Ole(Kce(O)),z=void 0,U=!1,H=!1,X=0,ie=0,ee=0,G=0,ne={hasTransform:!1,fixedContainer:null};F&&(b=!0,ne=rde(n),S=ne.fixedContainer);var ae=q.length;!c&&(ae===16||D.length)&&(c=!0,h=4,UT(i),x&&(x=hd(x,3,4))),c&&ae===9&&(q=hd(q,3,4));var le=tde(n,e),fe=le.tagName,ke=le.hasOffset,me=le.isSVG,Se=le.origin,we=le.targetOrigin,Pe=le.offset,ce=Kt(Pe,2),_e=ce[0],be=ce[1];fe==="svg"&&!n.ownerSVGElement&&x&&(i.push({type:"target",target:n,matrix:nde(n,h)}),i.push({type:"offset",target:n,matrix:To(h)}));var Me=parseFloat(k("zoom"))||1;if(F)z=ne.fixedContainer,U=!0;else{var Le=A0(n,t,!1,!0,k),Ue=Le.offsetZoom;if(z=Le.offsetParent,U=Le.isEnd,H=Le.isStatic,I*=Ue,(Le.isCustomElement||Ue!==1)&&H)_e-=z.offsetLeft,be-=z.offsetTop;else if(Mue||Aue){var Oe=Le.parentSlotElement;if(Oe){for(var tt=z,Ze=0,Qe=0;tt&&Que(tt);)Ze+=tt.offsetLeft,Qe+=tt.offsetTop,tt=tt.offsetParent;_e-=Ze,be-=Qe}}}if(rq&&!Lue&&ke&&!me&&H&&(M==="relative"||M==="static")&&(_e-=z.offsetLeft,be-=z.offsetTop,l=l||U),F)ke&&ne.hasTransform&&(ee=z.clientLeft,G=z.clientTop);else if(ke&&S!==z&&(X=z.clientLeft,ie=z.clientTop),ke&&z===o){var Ie=Bq(n,!1);_e+=Ie[0],be+=Ie[1]}if(i.push({type:"target",target:n,matrix:l0(q,h,Se)}),D.length&&(i.push({type:"offset",target:n,matrix:To(h)}),i.push({type:"target",target:n,matrix:l0(I0(D),h,Se)})),ke){var Mt=n===e,ot=Mt?0:n.scrollLeft,$e=Mt?0:n.scrollTop;i.push({type:"offset",target:n,matrix:Gp([_e-ot+X-ee,be-$e+ie-G],h)})}else i.push({type:"offset",target:n,origin:Se});if(Me!==1&&i.push({type:"zoom",target:n,matrix:l0(pI([Me,Me],h),h,[0,0])}),x||(x=q),g||(g=Se),v||(v=we),a||F)break;n=z,l=U,(!r||n===o)&&(a=l)}return x||(x=To(h)),g||(g=[0,0]),v||(v=[0,0]),{zoom:I,offsetContainer:S,matrixes:i,targetMatrix:x,transformOrigin:g,targetOrigin:v,is3d:c,hasFixed:b}}var Ep=null,Tp=null,Ag=null;function iy(e){e?(window.Map&&(Ep=new Map,Tp=new Map),Ag=[]):(Ep=null,Ag=null,Tp=null)}function tce(e){var t=Tp?.get(e);if(t)return t;var r=u0(e,!0);return Tp&&Tp.set(e,r),r}function rce(e,t){if(Ag){var r=gc(Ag,function(i){return i[0][0]==e&&i[0][1]==t});if(r)return r[1]}var n=hq(e,t,!0);return Ag&&Ag.push([[e,t],n]),n}function Xu(e){var t=Ep?.get(e);if(!t){var r=Mh(e).getComputedStyle(e);if(!Ep)return function(o){return r[o]};t={style:r,cached:{}},Ep.set(e,t)}var n=t.cached,i=t.style;return function(o){return o in n||(n[o]=i[o]),n[o]}}function ud(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return e.moveables.map(function(l,a){return o[a]=o[a]||{},o[a][t]=o[a][t]||{},Ut(Ut({},r),{isRequestChild:!0,datas:o[a][t],originalDatas:o[a]})})}function r5(e,t,r,n,i,o,l){var a=!!r.match(/Start$/g),c=!!r.match(/End$/g),h=i.isPinch,g=i.datas,v=ud(e,t.name,i),x=e.moveables,b=[],S=v.map(function(I,k){var M=x[k],O=M.state,F=O.gestos,D=I;if(a)D=new ny(l).dragStart(n,I),b.push(D);else{if(F[l]||(F[l]=g.childGestos[k]),!F[l])return;D=m1(I,O,n,h,o,l),b.push(D)}var q=t[r](M,Ut(Ut({},D),{parentFlag:!0}));return c&&(F[l]=null),q});return a&&(g.childGestos=x.map(function(I){return I.state.gestos[l]})),{eventParams:S,childEvents:b}}function Bf(e,t,r,n,i,o){i===void 0&&(i=function(g,v){return v});var l=!!r.match(/End$/g),a=ud(e,t.name,n),c=e.moveables,h=a.map(function(g,v){var x=c[v],b=g;b=i(x,g);var S=t[r](x,Ut(Ut({},b),{parentFlag:!0}));return l&&(x.state.gestos={}),S});return h}function Z_(e,t,r,n){var i=r.fixedDirection,o=r.fixedPosition,l=n.datas.startPositions||qc(t.state),a=ul(l,i),c=Kt(pu(f1(-e.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),h=c[0],g=c[1];return n.datas.originalX=h,n.datas.originalY=g,n}function pq(e,t,r,n){var i=e.getState(),o=i.renderPoses,l=i.rotation,a=i.direction,c=Wp(e.props,t).zoom,h=s0(l/Math.PI*180),g={},v=e.renderState;v.renderDirectionMap||(v.renderDirectionMap={});var x=v.renderDirectionMap;r.forEach(function(S){var I=S.dir;g[I]=!0});var b=Tu(a);return r.map(function(S){var I=S.data,k=S.classNames,M=S.dir,O=xI[M];if(!O||!g[M])return null;x[M]=!0;var F=(Pi(h,15)+b*oq[M]+720)%180,D={};return _y(I).forEach(function(q){D["data-".concat(q)]=I[q]}),n.createElement("div",Ut({className:li.apply(void 0,dn(["control","direction",M,t],Kt(k),!1)),"data-rotation":F,"data-direction":M},D,{key:"direction-".concat(M),style:ex.apply(void 0,dn([l,c],Kt(O.map(function(q){return o[q]})),!1))}))})}function mq(e,t,r,n){var i=Wp(e.props,r),o=i.renderDirections,l=o===void 0?t:o,a=i.displayAroundControls;if(!l)return[];var c=l===!0?bI:l;return dn(dn([],Kt(a?bq(e,n,r,c):[]),!1),Kt(pq(e,r,c.map(function(h){return{data:{},classNames:[],dir:h}}),n)),!1)}function k0(e,t,r,n,i,o){for(var l=[],a=6;a<arguments.length;a++)l[a-6]=arguments[a];var c=Ss(r,n),h=t?Pi(c/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(o),className:li.apply(void 0,dn(["line","direction",t?"edge":"",t],Kt(l),!1)),"data-rotation":h,"data-line-key":o,"data-direction":t,style:Fv(r,n,i,c)})}function gq(e,t,r,n,i){var o=r===!0?Cue:r;return o.map(function(l,a){var c=Kt(xI[l],2),h=c[0],g=c[1];if(g!=null)return k0(e,l,n[h],n[g],i,"".concat(t,"Edge").concat(a),t)}).filter(Boolean)}function yq(e){return function(t,r){var n=Wp(t.props,e).edge;return n&&(n===!0||n.length)?dn(dn([],Kt(gq(r,e,n,t.getState().renderPoses,t.props.zoom)),!1),Kt(nce(t,e,r)),!1):vq(t,e,r)}}function vq(e,t,r){return mq(e,bI,t,r)}function nce(e,t,r){return mq(e,["nw","ne","sw","se"],t,r)}function bq(e,t,r,n){var i=e.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=e.getState(),l=o.renderPoses,a=o.rotation,c=o.direction,h=i.renderDirectionMap,g=e.props.zoom,v=Tu(c),x=a/Math.PI*180;return(n||_y(h)).map(function(b){var S=xI[b];if(!S)return null;var I=(Pi(x,15)+v*oq[b]+720)%180,k=["around-control"];return r&&k.push("direction",r),t.createElement("div",{className:li.apply(void 0,dn([],Kt(k),!1)),"data-rotation":I,"data-direction":b,key:"direction-around-".concat(b),style:ex.apply(void 0,dn([a,g],Kt(S.map(function(M){return l[M]})),!1))})})}function CI(e,t,r){var n=e||{},i=n.position,o=i===void 0?"client":i,l=n.left,a=l===void 0?-1/0:l,c=n.top,h=c===void 0?-1/0:c,g=n.right,v=g===void 0?1/0:g,x=n.bottom,b=x===void 0?1/0:x,S={position:o,left:a,top:h,right:v,bottom:b};return{vertical:aN(S,t,!0),horizontal:aN(S,r,!1)}}function L2(e,t){var r=e.state,n=r.containerClientRect,i=n.clientHeight,o=n.clientWidth,l=n.clientLeft,a=n.clientTop,c=r.snapOffset,h=c.left,g=c.top,v=c.right,x=c.bottom,b=t||e.props.bounds||{},S=b.position||"client",I=S==="css",k=b.left,M=k===void 0?-1/0:k,O=b.top,F=O===void 0?-1/0:O,D=b.right,q=D===void 0?I?-1/0:1/0:D,z=b.bottom,U=z===void 0?I?-1/0:1/0:z;return I&&(q=o+v-h-q,U=i+x-g-U),{left:M+h-l,right:q+h-l,top:F+g-a,bottom:U+g-a}}function ice(e,t,r){var n=L2(e),i=n.left,o=n.top,l=n.right,a=n.bottom,c=Kt(r,2),h=c[0],g=c[1],v=Kt(ci(r,t),2),x=v[0],b=v[1];en(x)<ku&&(x=0),en(b)<ku&&(b=0);var S=b>0,I=x>0,k={isBound:!1,offset:0,pos:0},M={isBound:!1,offset:0,pos:0};if(x===0&&b===0)return{vertical:k,horizontal:M};if(x===0)S?a<g&&(M.pos=a,M.offset=g-a):o>g&&(M.pos=o,M.offset=g-o);else if(b===0)I?l<h&&(k.pos=l,k.offset=h-l):i>h&&(k.pos=i,k.offset=h-i);else{var O=b/x,F=r[1]-O*h,D=0,q=0,z=!1;I&&l<=h?(D=O*l+F,q=l,z=!0):!I&&h<=i&&(D=O*i+F,q=i,z=!0),z&&(D<o||D>a)&&(z=!1),z||(S&&a<=g?(D=a,q=(D-F)/O,z=!0):!S&&g<=o&&(D=o,q=(D-F)/O,z=!0)),z&&(k.isBound=!0,k.pos=q,k.offset=h-q,M.isBound=!0,M.pos=D,M.offset=g-D)}return{vertical:k,horizontal:M}}function aN(e,t,r){var n=e[r?"left":"top"],i=e[r?"right":"bottom"],o=Math.min.apply(Math,dn([],Kt(t),!1)),l=Math.max.apply(Math,dn([],Kt(t),!1)),a=[];return n+1>o&&a.push({direction:"start",isBound:!0,offset:o-n,pos:n}),i-1<l&&a.push({direction:"end",isBound:!0,offset:l-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(c,h){return en(h.offset)-en(c.offset)})}function oN(e,t,r){var n=r?e.map(function(i){return d1(i,r)}):e;return n.some(function(i){return i[0]<t.left&&en(i[0]-t.left)>.1||i[0]>t.right&&en(i[0]-t.right)>.1||i[1]<t.top&&en(i[1]-t.top)>.1||i[1]>t.bottom&&en(i[1]-t.bottom)>.1})}function ace(e,t,r){var n=jc(e),i=Math.sqrt(n*n-t*t)||0;return[i,-i].sort(function(o,l){return en(o-e[r?0:1])-en(l-e[r?0:1])}).map(function(o){return Ss([0,0],r?[o,t]:[t,o])})}function oce(e,t,r,n,i){if(!e.props.bounds)return[];var o=i*Math.PI/180,l=L2(e),a=l.left,c=l.top,h=l.right,g=l.bottom,v=a-n[0],x=h-n[0],b=c-n[1],S=g-n[1],I={left:v,top:b,right:x,bottom:S};if(!oN(r,I,0))return[];var k=[];return[[v,0],[x,0],[b,1],[S,1]].forEach(function(M){var O=Kt(M,2),F=O[0],D=O[1];r.forEach(function(q){var z=Ss([0,0],q);k.push.apply(k,dn([],Kt(ace(q,F,D).map(function(U){return o+U-z}).filter(function(U){return!oN(t,I,U)}).map(function(U){return Pi(U*180/Math.PI,ku)})),!1))})}),k}var sce=["left","right","center"],lce=["top","bottom","middle"],sN={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Fh={start:"left",end:"right",center:"center"},Bh={start:"top",end:"bottom",center:"middle"};function Mg(){return{left:!1,top:!1,right:!1,bottom:!1}}function Sy(e,t){var r=e.props,n=r.snappable,i=r.bounds,o=r.innerBounds,l=r.verticalGuidelines,a=r.horizontalGuidelines,c=r.snapGridWidth,h=r.snapGridHeight,g=e.state,v=g.guidelines,x=g.enableSnap;return!n||!x||t&&n!==!0&&n.indexOf(t)<0?!1:!!(c||h||i||o||v&&v.length||l&&l.length||a&&a.length)}function EI(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function uce(e,t){var r=EI(e),n={};for(var i in r)i in t&&r[i]&&(n[i]=t[i]);return n}function TI(e,t){var r=uce(e,t),n=lce.filter(function(o){return o in r}),i=sce.filter(function(o){return o in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(o){return r[o]}),vertical:i.map(function(o){return r[o]})}}function cce(e,t,r){var n=Zo(e,[t.clientLeft,t.clientTop],r);return[t.left+n[0],t.top+n[1]]}function dce(e){var t=Kt(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];Math.abs(i)<Ws&&(i=0),Math.abs(o)<Ws&&(o=0);var l=0,a=0,c=0;return i?o?(l=-o/i,a=1,c=l*r[0]-r[1]):(a=1,c=-r[1]):(l=-1,c=r[0]),[l,a,c].map(function(h){return Pi(h,Ws)})}var _q="snapRotationThreshold",xq="snapRotationDegrees",wq="snapHorizontalThreshold",Sq="snapVerticalThreshold";function R2(e,t,r,n,i,o,l){var a;n===void 0&&(n=[]),i===void 0&&(i=[]);var c=e.props,h=((a=e.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],g=wN(l,c[wq],5),v=wN(o,c[Sq],5);return Cq(e.state.guidelines,t,r,n,i,g,v,h)}function Cq(e,t,r,n,i,o,l,a){return{vertical:uN(e,"vertical",t,l*a[0],n),horizontal:uN(e,"horizontal",r,o*a[1],i)}}function fce(e,t,r){var n=Kt(r,2),i=n[0],o=n[1],l=Kt(t,2),a=l[0],c=l[1],h=Kt(ci(r,t),2),g=h[0],v=h[1],x=v>0,b=g>0;g=tx(g),v=tx(v);var S={isSnap:!1,offset:0,pos:0},I={isSnap:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:S,horizontal:I};var k=R2(e,g?[i]:[],v?[o]:[],[],[],void 0,void 0),M=k.vertical,O=k.horizontal;M.posInfos.filter(function(fe){var ke=fe.pos;return b?ke>=a:ke<=a}),O.posInfos.filter(function(fe){var ke=fe.pos;return x?ke>=c:ke<=c}),M.isSnap=M.posInfos.length>0,O.isSnap=O.posInfos.length>0;var F=zT(M),D=F.isSnap,q=F.guideline,z=zT(O),U=z.isSnap,H=z.guideline,X=U?H.pos[1]:0,ie=D?q.pos[0]:0;if(g===0)U&&(I.isSnap=!0,I.pos=H.pos[1],I.offset=o-I.pos);else if(v===0)D&&(S.isSnap=!0,S.pos=ie,S.offset=i-ie);else{var ee=v/g,G=r[1]-ee*i,ne=0,ae=0,le=!1;D?(ae=ie,ne=ee*ae+G,le=!0):U&&(ne=X,ae=(ne-G)/ee,le=!0),le&&(S.isSnap=!0,S.pos=ae,S.offset=i-ae,I.isSnap=!0,I.pos=ne,I.offset=o-ne)}return{vertical:S,horizontal:I}}function Th(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function lN(e,t,r,n){var i=TI(e.props.snapDirections,t),o=R2(e,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Th(c)}),i.horizontalNames.map(function(c){return Th(c)}),r,n),l=Th(i.horizontalNames[o.horizontal.index]),a=Th(i.verticalNames[o.vertical.index]);return{vertical:Ut(Ut({},o.vertical),{direction:a}),horizontal:Ut(Ut({},o.horizontal),{direction:l})}}function zT(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,l=n.guideline;return{isSnap:t,offset:i,dist:o,pos:r.pos,guideline:l}}function uN(e,t,r,n,i){var o,l;if(i===void 0&&(i=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=t==="vertical",c=a?0:1,h=r.map(function(v,x){var b=i[x]||"",S=e.map(function(I){var k=I.pos,M=v-k[c];return{offset:M,dist:en(M),guideline:I,direction:b}}).filter(function(I){var k=I.guideline,M=I.dist,O=k.type;return!(O!==t||M>n)}).sort(function(I,k){return I.dist-k.dist});return{pos:v,index:x,guidelineInfos:S,direction:b}}).filter(function(v){return v.guidelineInfos.length>0}).sort(function(v,x){return v.guidelineInfos[0].dist-x.guidelineInfos[0].dist}),g=h.length>0;return{isSnap:g,index:g?h[0].index:-1,direction:(l=(o=h[0])===null||o===void 0?void 0:o.direction)!==null&&l!==void 0?l:"",posInfos:h}}function hce(e,t,r,n,i){var o=[];r[0]&&r[1]?o=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(x,b,S){var I=S[b+1]||S[0];o.push(x),o.push([(x[0]+I[0])/2,(x[1]+I[1])/2])}):e.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],r):(o.push.apply(o,dn([],Kt($ue([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var l=o.map(function(x){return ul(t,x)}),a=l.map(function(x){return x[0]}),c=l.map(function(x){return x[1]}),h=R2(e,a,c,o.map(function(x){return Th(x[0])}),o.map(function(x){return Th(x[1])}),n,i),g=Th(o.map(function(x){return x[0]})[h.vertical.index]),v=Th(o.map(function(x){return x[1]})[h.horizontal.index]);return{vertical:Ut(Ut({},h.vertical),{direction:g}),horizontal:Ut(Ut({},h.horizontal),{direction:v})}}function Eq(e,t){var r=en(e.offset),n=en(t.offset);return e.isBound&&t.isBound?n-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?n-r:e.isSnap?-1:t.isSnap||r<ku?1:n<ku?-1:r-n}function K_(e,t){return e.slice().sort(function(r,n){var i=r.sign[t],o=n.sign[t],l=r.offset[t],a=n.offset[t];if(i){if(!o)return-1}else return 1;return Eq({isBound:r.isBound,isSnap:r.isSnap,offset:l},{isBound:n.isBound,isSnap:n.isSnap,offset:a})})[0]}function pce(e,t,r){var n=[];if(r)en(t[0])!==1||en(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),n.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var i=e[0]?e:[1,1];[1,-1].forEach(function(l){[1,-1].forEach(function(a){var c=[l*i[0],a*i[1]];t[0]===c[0]&&t[1]===c[1]||n.push([t,c])})})}else if(e[0]){var o=en(t[0])===1?[1]:[1,-1];o.forEach(function(l){n.push([[t[0],-1],[l*e[0],-1]],[[t[0],0],[l*e[0],0]],[[t[0],1],[l*e[0],1]])})}else if(e[1]){var o=en(t[1])===1?[1]:[1,-1];o.forEach(function(a){n.push([[-1,t[1]],[-1,a*e[1]]],[[0,t[1]],[0,a*e[1]]],[[1,t[1]],[1,a*e[1]]])})}return n}function Tq(e,t){var r=PT([t[0][0],t[1][0]]),n=PT([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:n<=e[1]}}function PI(e,t){var r=Kt(t,2),n=r[0],i=r[1],o=i[0]-n[0],l=i[1]-n[1];en(o)<ku&&(o=0),en(l)<ku&&(l=0);var a,c;if(!o)a=n[0],c=e[0];else if(!l)a=n[1],c=e[1];else{var h=l/o;a=h*(e[0]-n[0])+n[1],c=e[1]}return a-c}function Pq(e,t,r,n){return n===void 0&&(n=ku),e.every(function(i){var o=PI(i,t),l=o<=0;return l===r||en(o)<=n})}function cN(e,t,r,n,i){return i===void 0&&(i=0),n&&t-i<=e||!n&&e<=r+i?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function mce(e,t){var r=t.line,n=t.centerSign,i=t.verticalSign,o=t.horizontalSign,l=t.lineConstants,a=e.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=a.left,h=a.top,g=a.width,v=a.height,x=[[c,h],[c,h+v]],b=[[c,h],[c+g,h]],S=[[c+g,h],[c+g,h+v]],I=[[c,h+v],[c+g,h+v]];if(Pq([[c,h],[c+g,h],[c,h+v],[c+g,h+v]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var k=Ph(r,l,b,i),M=Ph(r,l,I,i),O=Ph(r,l,x,o),F=Ph(r,l,S,o),D=k.isBound&&M.isBound,q=k.isBound||M.isBound,z=O.isBound&&F.isBound,U=O.isBound||F.isBound,H=ay(k.offset,M.offset),X=ay(O.offset,F.offset),ie=[0,0],ee=!1,G=!1;return en(X)<en(H)?(ie=[H,0],ee=q,G=D):(ie=[0,X],ee=U,G=z),{isAllBound:G,isVerticalBound:q,isHorizontalBound:U,isBound:ee,offset:ie}}function Ph(e,t,r,n,i,o){var l=Kt(t,2),a=l[0],c=l[1],h=e[0],g=r[0],v=r[1],x=tx(v[1]-g[1]),b=tx(v[0]-g[0]),S=c,I=a,k=-a/c;if(b){if(!x){if(o&&!S)return{isBound:!1,offset:0};if(I){var D=(g[1]-h[1])/k+h[0];return cN(D,g[0],v[0],n,i)}else{var O=g[1]-h[1],F=en(O)<=(i||0);return{isBound:F,offset:F?O:0}}}}else{if(o&&!I)return{isBound:!1,offset:0};if(S){var M=k*(g[0]-h[0])+h[1];return cN(M,g[1],v[1],n,i)}else{var O=g[0]-h[0],F=en(O)<=(i||0);return{isBound:F,offset:F?O:0}}}return{isBound:!1,offset:0}}function Iq(e,t,r){return t.map(function(n){var i=mce(e,n),o=i.isBound,l=i.offset,a=i.isVerticalBound,c=i.isHorizontalBound,h=n.multiple,g=af({datas:r,distX:l[0],distY:l[1]}).map(function(v,x){return v*(h[x]?2/h[x]:0)});return{sign:h,isBound:o,isVerticalBound:a,isHorizontalBound:c,isSnap:!1,offset:g}})}function gce(e,t,r){var n,i=II(e,t,[0,0],!1).map(function(x){return Ut(Ut({},x),{multiple:x.multiple.map(function(b){return en(b)*2})})}),o=Iq(e,i,r),l=K_(o,0),a=K_(o,1),c=0,h=0,g=l.isVerticalBound||a.isVerticalBound,v=l.isHorizontalBound||a.isHorizontalBound;return(g||v)&&(n=Kt(jue({datas:r,distX:-l.offset[0],distY:-a.offset[1]}),2),c=n[0],h=n[1]),{vertical:{isBound:g,offset:c},horizontal:{isBound:v,offset:h}}}function yce(e,t){var r=[],n=e[0],i=e[1];return n&&i?r.push([[0,i*2],e,[-n,i]],[[n*2,0],e,[n,-i]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),t&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,i*2],[1,i],[-1,i]]),t&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function II(e,t,r,n){var i=e.state,o=i.allMatrix,l=i.is3d,a=lm(o,100,100,l?4:3),c=ul(a,[0,0]);return yce(r,n).map(function(h){var g=Kt(h,3),v=g[0],x=g[1],b=g[2],S=[ul(a,x),ul(a,b)],I=dce(S),k=Tq(c,S),M=k.vertical,O=k.horizontal,F=PI(c,S)<=0;return{multiple:v,centerSign:F,verticalSign:M,horizontalSign:O,lineConstants:I,line:[ul(t,x),ul(t,b)]}})}function dN(e,t,r,n){var i=n?e.map(function(o){return d1(o,n)}):e;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(o){var l=PI(r,o)<=0;return!Pq(t,o,l)})}function vce(e){var t=Kt(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return en(r[0]);if(!o)return en(r[1]);var l=o/i;return en((-l*r[0]+r[1])/Math.sqrt(Math.pow(l,2)+1))}function bce(e){var t=Kt(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return[r[0],0];if(!o)return[0,r[1]];var l=o/i,a=-l*r[0]+r[1];return[-a/(l+1/l),a/(l*l+1)]}function _ce(e,t,r,n,i){var o=e.props.innerBounds,l=i*Math.PI/180;if(!o)return[];var a=o.left,c=o.top,h=o.width,g=o.height,v=a-n[0],x=a+h-n[0],b=c-n[1],S=c+g-n[1],I=[[v,b],[x,b],[v,S],[x,S]],k=ul(r,[0,0]);if(!dN(r,I,k,0))return[];var M=[],O=I.map(function(F){return[jc(F),Ss([0,0],F)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(F){var D=Ss([0,0],bce(F)),q=vce(F);M.push.apply(M,dn([],Kt(O.filter(function(z){var U=Kt(z,1),H=U[0];return H&&q<=H}).map(function(z){var U=Kt(z,2),H=U[0],X=U[1],ie=Math.acos(H?q/H:0),ee=X+ie,G=X-ie;return[l+ee-D,l+G-D]}).reduce(function(z,U){return z.push.apply(z,dn([],Kt(U),!1)),z},[]).filter(function(z){return!dN(t,I,k,z)}).map(function(z){return Pi(z*180/Math.PI,ku)})),!1))}),M}function xce(e){var t=e.props.innerBounds,r=Mg();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var n=e.getRect(),i=n.pos1,o=n.pos2,l=n.pos3,a=n.pos4,c=[i,o,l,a],h=ul(c,[0,0]),g=t.left,v=t.top,x=t.width,b=t.height,S=[[g,v],[g,v+b]],I=[[g,v],[g+x,v]],k=[[g+x,v],[g+x,v+b]],M=[[g,v+b],[g+x,v+b]],O=II(e,c,[0,0],!1),F=[],D=[];return O.forEach(function(q){var z=q.line,U=q.lineConstants,H=Tq(h,z),X=H.horizontal,ie=H.vertical,ee=Ph(z,U,I,ie,1,!0),G=Ph(z,U,M,ie,1,!0),ne=Ph(z,U,S,X,1,!0),ae=Ph(z,U,k,X,1,!0);ee.isBound&&!r.top&&(F.push(v),r.top=!0),G.isBound&&!r.bottom&&(F.push(v+b),r.bottom=!0),ne.isBound&&!r.left&&(D.push(g),r.left=!0),ae.isBound&&!r.right&&(D.push(g+x),r.right=!0)}),{boundMap:r,horizontal:F,vertical:D}}function wce(e,t,r,n){var i=t[0]-e[0],o=t[1]-e[1];if(en(i)<Ws&&(i=0),en(o)<Ws&&(o=0),!i)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var l=o/i,a=e[1]-l*e[0];if(n){var c=l*(t[0]+r)+a;return[r,c-t[1]]}else{var h=(t[1]+r-a)/l;return[h-t[0],r]}}function jT(e,t,r,n,i){var o=wce(e,t,r,n);if(!o)return{isOutside:!1,offset:[0,0]};var l=Ff(e,t),a=Ff(o,e),c=Ff(o,t),h=a>l||c>l,g=Kt(af({datas:i,distX:o[0],distY:o[1]}),2),v=g[0],x=g[1];return{offset:[v,x],isOutside:h}}function J_(e,t){return e.isBound?e.offset:t.isSnap?zT(t).offset:0}function Sce(e,t,r,n,i){var o=Kt(t,2),l=o[0],a=o[1],c=Kt(r,2),h=c[0],g=c[1],v=Kt(n,2),x=v[0],b=v[1],S=Kt(i,2),I=S[0],k=S[1],M=-I,O=-k;if(e&&l&&a){M=0,O=0;var F=[];if(h&&g?F.push([0,k],[I,0]):h?F.push([I,0]):g?F.push([0,k]):x&&b?F.push([0,k],[I,0]):x?F.push([I,0]):b&&F.push([0,k]),F.length){F.sort(function(U,H){return jc(ci([l,a],U))-jc(ci([l,a],H))});var D=F[0];if(D[0]&&en(l)>Ws)M=-D[0],O=a*en(l+M)/en(l)-a;else if(D[1]&&en(a)>Ws){var q=a;O=-D[1],M=l*en(a+O)/en(q)-l}if(e&&g&&h)if(en(M)>Ws&&en(M)<en(I)){var z=en(I)/en(M);M*=z,O*=z}else if(en(O)>Ws&&en(O)<en(k)){var z=en(k)/en(O);M*=z,O*=z}else M=ay(-I,M),O=ay(-k,O)}}else M=l||h?-I:0,O=a||g?-k:0;return[M,O]}function Cce(e,t,r,n,i,o){if(!Sy(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var l=MI(o.absolutePoses,[t,r]),a=Dc(l),c=a.left,h=a.right,g=a.top,v=a.bottom,x={horizontal:l.map(function(ae){return ae[1]}),vertical:l.map(function(ae){return ae[0]})},b=EI(e.props.snapDirections),S=TI(b,{left:c,right:h,top:g,bottom:v,center:(c+h)/2,middle:(g+v)/2}),I=D2(e,i,S,x),k=I.vertical,M=I.horizontal,O=gce(e,l,o),F=O.vertical,D=O.horizontal,q=k.isSnap,z=M.isSnap,U=k.isBound||F.isBound,H=M.isBound||D.isBound,X=ay(k.offset,F.offset),ie=ay(M.offset,D.offset),ee=Kt(Sce(n,[t,r],[U,H],[q,z],[X,ie]),2),G=ee[0],ne=ee[1];return[{isBound:U,isSnap:q,offset:G},{isBound:H,isSnap:z,offset:ne}]}function D2(e,t,r,n){n===void 0&&(n=r);var i=CI(L2(e),n.vertical,n.horizontal),o=i.horizontal,l=i.vertical,a=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:R2(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),c=a.horizontal,h=a.vertical,g=J_(o[0],c),v=J_(l[0],h),x=en(g),b=en(v);return{horizontal:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:g,dist:x,bounds:o,snap:c},vertical:{isBound:l[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:b,bounds:l,snap:h}}}function fN(e,t,r,n,i,o,l){l===void 0&&(l=[1,1]);var a=CI(t,r,n),c=a.horizontal,h=a.vertical,g=Cq(e,r,n,[],[],i,o,l),v=g.horizontal,x=g.vertical,b=J_(c[0],v),S=J_(h[0],x),I=en(b),k=en(S);return{horizontal:{isBound:c[0].isBound,isSnap:v.isSnap,snapIndex:v.index,offset:b,dist:I,bounds:c,snap:v},vertical:{isBound:h[0].isBound,isSnap:x.isSnap,snapIndex:x.index,offset:S,dist:k,bounds:h,snap:x}}}function Ece(e,t,r,n){var i=Ss(e,t)/Math.PI*180,o=r.vertical,l=o.isBound,a=o.isSnap,c=o.dist,h=r.horizontal,g=h.isBound,v=h.isSnap,x=h.dist,b=i%180,S=b<3||b>177,I=b>87&&b<93;return x<c&&(l||a&&!I&&(!n||!S))?"vertical":g||v&&!S&&(!n||!I)?"horizontal":""}function Tce(e,t,r,n,i,o){return r.map(function(l){var a=Kt(l,2),c=a[0],h=a[1],g=ul(t,c),v=ul(t,h),x=n?Pce(e,g,v,i):D2(e,i,{vertical:[v[0]],horizontal:[v[1]]}),b=x.horizontal,S=b.offset,I=b.isBound,k=b.isSnap,M=x.vertical,O=M.offset,F=M.isBound,D=M.isSnap,q=ci(h,c);if(!O&&!S)return{isBound:F||I,isSnap:D||k,sign:q,offset:[0,0]};var z=Ece(g,v,x,n);if(!z)return{sign:q,isBound:!1,isSnap:!1,offset:[0,0]};var U=z==="vertical",H=[0,0];return!n&&en(h[0])===1&&en(h[1])===1&&c[0]!==h[0]&&c[1]!==h[1]?H=af({datas:o,distX:-O,distY:-S}):H=jT(g,v,-(U?O:S),U,o).offset,H=H.map(function(X,ie){return X*(q[ie]?2/q[ie]:0)}),{sign:q,isBound:U?F:I,isSnap:U?D:k,offset:H}})}function hN(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function Pce(e,t,r,n){var i=ice(e,t,r),o=i.horizontal,l=i.vertical,a=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:fce(e,t,r),c=a.horizontal,h=a.vertical,g=hN(o,c),v=hN(l,h),x=en(g),b=en(v);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:g,dist:x},vertical:{isBound:l.isBound,isSnap:h.isSnap,offset:v,dist:b}}}function Ice(e,t,r,n,i){var o=[-r[0],-r[1]],l=e.state,a=l.width,c=l.height,h=e.props.bounds,g=1/0,v=1/0;if(h){var x=[[r[0],-r[1]],[-r[0],r[1]]],b=h.left,S=b===void 0?-1/0:b,I=h.top,k=I===void 0?-1/0:I,M=h.right,O=M===void 0?1/0:M,F=h.bottom,D=F===void 0?1/0:F;x.forEach(function(q){var z=q[0]!==o[0],U=q[1]!==o[1],H=ul(t,q),X=Ss(n,H)*360/Math.PI;if(U){var ie=H.slice();(en(X-360)<2||en(X-180)<2)&&(ie[1]=n[1]);var ee=jT(n,ie,(n[1]<H[1]?D:k)-H[1],!1,i),G=Kt(ee.offset,2),ne=G[1],ae=ee.isOutside;isNaN(ne)||(v=c+(ae?1:-1)*en(ne))}if(z){var ie=H.slice();(en(X-90)<2||en(X-270)<2)&&(ie[0]=n[0]);var le=jT(n,ie,(n[0]<H[0]?O:S)-H[0],!0,i),fe=Kt(le.offset,1),ke=fe[0],me=le.isOutside;isNaN(ke)||(g=a+(me?1:-1)*en(ke))}})}return{maxWidth:g,maxHeight:v}}var Eu={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,o=r.zoom,l=e.getState(),a=l.dragInfo,c=l.beforeOrigin;if(n||!i||!a)return[];var h=a.dist;if(!h[0]&&!h[1])return[];var g=jc(h),v=Ss(h,[0,0]);return[t.createElement("div",{className:li("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(g,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(v,"rad) scaleY(").concat(o,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,i=t.parentGesto,o=e.state,l=o.gestos,a=o.style;if(l.draggable)return!1;l.draggable=i||e.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],sm(e,t),M2(e,t,"translate"),Wce(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var c=Fi(e,t,Ut({set:function(g){r.startValue=g}},A2(e,t))),h=n||jn(e,"onDragStart",c);return h!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(l.draggable=null,r.isPinch=!1),r.isDrag?c:!1},drag:function(e,t){if(t){I2(e,t,"translate");var r=t.datas,n=t.parentEvent,i=t.parentFlag,o=t.isPinch,l=t.deltaOffset,a=t.useSnap,c=t.isRequest,h=t.isGroup,g=t.parentThrottleDrag,v=t.distX,x=t.distY,b=r.isDrag,S=r.prevDist,I=r.prevBeforeDist,k=r.startValue;if(b){l&&(v+=l[0],x+=l[1]);var M=e.props,O=M.parentMoveable,F=h?0:M.throttleDrag||g||0,D=n?0:M.throttleDragRotate||0,q=0,z=!1,U=!1,H=!1,X=!1;if(!n&&D>0&&(v||x)){var ie=M.startDragRotate||0,ee=Pi(ie+Ss([0,0],[v,x])*180/Math.PI,D)-ie,G=x*Math.abs(Math.cos((ee-90)/180*Math.PI)),ne=v*Math.abs(Math.cos(ee/180*Math.PI)),ae=jc([ne,G]);q=ee*Math.PI/180,v=ae*Math.cos(q),x=ae*Math.sin(q)}if(!o&&!n&&!i){var le=Kt(Cce(e,v,x,D,!a&&c||l,r),2),fe=le[0],ke=le[1];z=fe.isSnap,U=fe.isBound,H=ke.isSnap,X=ke.isBound;var me=fe.offset,Se=ke.offset;v+=me,x+=Se}var we=ha(uq({datas:r,distX:v,distY:x}),k),Pe=ha(zue({datas:r,distX:v,distY:x}),k);JD(Pe,ku),JD(we,ku),D||(!z&&!U&&(Pe[0]=Pi(Pe[0],F),we[0]=Pi(we[0],F)),!H&&!X&&(Pe[1]=Pi(Pe[1],F),we[1]=Pi(we[1],F)));var ce=ci(we,k),_e=ci(Pe,k),be=ci(_e,S),Me=ci(ce,I);r.prevDist=_e,r.prevBeforeDist=ce,r.passDelta=be,r.passDist=_e;var Le=r.left+ce[0],Ue=r.top+ce[1],Oe=r.right-ce[0],tt=r.bottom-ce[1],Ze=k2(r,"translate(".concat(Pe[0],"px, ").concat(Pe[1],"px)"),"translate(".concat(_e[0],"px, ").concat(_e[1],"px)"));if(wI(t,Ze),e.state.dragInfo.dist=n?[0,0]:_e,!(!n&&!O&&be.every(function($e){return!$e})&&Me.some(function($e){return!$e}))){var Qe=e.state,Ie=Qe.width,Mt=Qe.height,ot=Fi(e,t,Ut({transform:Ze,dist:_e,delta:be,translate:Pe,beforeDist:ce,beforeDelta:Me,beforeTranslate:we,left:Le,top:Ue,right:Oe,bottom:tt,width:Ie,height:Mt,isPinch:o},Pu({transform:Ze},t)));return!n&&jn(e,"onDrag",ot),ot}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(e,Ut(Ut({},t),{deltaOffset:n}))):!1},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=yc(e,t,{});return!r&&jn(e,"onDragEnd",i),i}},dragGroupStart:function(e,t){var r,n,i=t.datas,o=t.clientX,l=t.clientY,a=this.dragStart(e,t);if(!a)return!1;var c=r5(e,this,"dragStart",[o||0,l||0],t,!1,"draggable"),h=c.childEvents,g=c.eventParams,v=Ut(Ut({},a),{targets:e.props.targets,events:g}),x=jn(e,"onDragGroupStart",v);i.isDrag=x!==!1;var b=(n=(r=h[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?a:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var n=this.drag(e,Ut(Ut({},t),{parentThrottleDrag:e.props.throttleDrag})),i=t.datas.passDelta,o=r5(e,this,"drag",i,t,!1,"draggable").eventParams;if(n){var l=Ut({targets:e.props.targets,events:o},n);return jn(e,"onDragGroup",l),l}}},dragGroupEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(e,t);var i=r5(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return jn(e,"onDragGroupEnd",yc(e,t,{targets:e.props.targets,events:i})),r}},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=!1;return{isControl:!1,requestStart:function(l){return o=l.useSnap,{datas:t,useSnap:o}},request:function(l){return"x"in l?n=l.x-r.left:"deltaX"in l&&(n+=l.deltaX),"y"in l?i=l.y-r.top:"deltaY"in l&&(i+=l.deltaY),{datas:t,distX:n,distY:i,useSnap:o}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:o}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function kq(e,t){var r=ul(e,t),n=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:n}}function kce(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,l=n?4:3,a=[i/2*(1+t[0]),o/2*(1+t[1])],c=Zo(r,a,l),h=[0,0];return{fixedPosition:c,fixedDirection:t,fixedOffset:h}}function Aq(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,l=n?4:3,a=Wue(t,i,o),c=Zo(r,t,l),h=[i?0:t[0],o?0:t[1]];return{fixedPosition:c,fixedDirection:a,fixedOffset:h}}var pN=DI("resizable"),qT={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:yq("resizable"),dragControlCondition:pN,viewClassName:RI("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,i=t.isPinch,o=t.isGroup,l=t.parentDirection,a=t.parentGesto,c=t.datas,h=t.parentFixedDirection,g=t.parentEvent,v=Vq(l,i,n,c),x=e.state,b=x.target,S=x.width,I=x.height,k=x.gestos;if(!v||!b||k.resizable)return!1;k.resizable=a||e.controlGesto,!i&&sm(e,t),c.datas={},c.direction=v,c.startOffsetWidth=S,c.startOffsetHeight=I,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=x.inlineCSSWidth||x.cssWidth,c.startHeight=x.inlineCSSHeight||x.cssHeight,c.maxSize=[1/0,1/0],o||(c.minSize=[x.minOffsetWidth,x.minOffsetHeight],c.maxSize=[x.maxOffsetWidth,x.maxOffsetHeight]);var M=e.props.transformOrigin||"% %";c.transformOrigin=Kf(M)?M.split(" "):M,c.startOffsetMatrix=x.offsetMatrix,c.startTransformOrigin=x.transformOrigin,c.isWidth=(r=t?.parentIsWidth)!==null&&r!==void 0?r:!v[0]&&!v[1]||v[0]||!v[1];function O(X){c.ratio=X&&isFinite(X)?X:0}c.startPositions=qc(e.state);function F(X){var ie=kq(c.startPositions,X);c.fixedDirection=ie.fixedDirection,c.fixedPosition=ie.fixedPosition,c.fixedOffset=ie.fixedOffset}function D(X){var ie=Aq(e.state,X);c.fixedDirection=ie.fixedDirection,c.fixedPosition=ie.fixedPosition,c.fixedOffset=ie.fixedOffset}function q(X){c.minSize=[to("".concat(X[0]),0)||0,to("".concat(X[1]),0)||0]}function z(X){var ie=[X[0]||1/0,X[1]||1/0];(!T0(ie[0])||isFinite(ie[0]))&&(ie[0]=to("".concat(ie[0]),0)||1/0),(!T0(ie[1])||isFinite(ie[1]))&&(ie[1]=to("".concat(ie[1]),0)||1/0),c.maxSize=ie}O(S/I),F(h||[-v[0],-v[1]]),c.setFixedDirection=F,c.setFixedPosition=D,c.setMin=q,c.setMax=z;var U=Fi(e,t,{direction:v,startRatio:c.ratio,set:function(X){var ie=Kt(X,2),ee=ie[0],G=ie[1];c.startWidth=ee,c.startHeight=G},setMin:q,setMax:z,setRatio:O,setFixedDirection:F,setFixedPosition:D,setOrigin:function(X){c.transformOrigin=X},dragStart:Eu.dragStart(e,new ny().dragStart([0,0],t))}),H=g||jn(e,"onResizeStart",U);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,H!==!1&&(c.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:v}),c.isResize?U:!1},dragControl:function(e,t){var r,n=t.datas,i=t.parentFlag,o=t.isPinch,l=t.parentKeepRatio,a=t.dragClient,c=t.parentDist,h=t.useSnap,g=t.isRequest,v=t.isGroup,x=t.parentEvent,b=t.resolveMatrix,S=n.isResize,I=n.transformOrigin,k=n.startWidth,M=n.startHeight,O=n.prevWidth,F=n.prevHeight,D=n.minSize,q=n.maxSize,z=n.ratio,U=n.startOffsetWidth,H=n.startOffsetHeight,X=n.isWidth;if(!S)return;if(b){var ie=e.state.is3d,ee=n.startOffsetMatrix,G=n.startTransformOrigin,ne=ie?4:3,ae=I0(Y_(t)),le=Math.sqrt(ae.length);ne!==le&&(ae=hd(ae,le,ne));var fe=g1(ee,ae,G,ne),ke=lm(fe,U,H,ne);n.startPositions=ke,n.nextTargetMatrix=ae,n.nextAllMatrix=fe}var me=Wp(e.props,"resizable"),Se=me.resizeFormat,we=me.throttleResize,Pe=we===void 0?i?0:1:we,ce=me.parentMoveable,_e=me.keepRatioFinally,be=n.direction,Me=be,Le=0,Ue=0;!be[0]&&!be[1]&&(Me=[1,1]);var Oe=z&&(l??me.keepRatio)||!1;function tt(){var br=n.fixedDirection,nr=Yq(Me,Oe,n,t);Le=nr.distWidth,Ue=nr.distHeight;var lr=Me[0]-br[0]||Oe?Math.max(U+Le,ku):U,Pr=Me[1]-br[1]||Oe?Math.max(H+Ue,ku):H;return Oe&&U&&H&&(X?Pr=lr/z:lr=Pr*z),[lr,Pr]}var Ze=Kt(tt(),2),Qe=Ze[0],Ie=Ze[1];x||(n.setFixedDirection(n.fixedDirection),jn(e,"onBeforeResize",Fi(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(br){var nr;return n.setFixedDirection(br),nr=Kt(tt(),2),Qe=nr[0],Ie=nr[1],[Qe,Ie]},setFixedPosition:function(br){var nr;return n.setFixedPosition(br),nr=Kt(tt(),2),Qe=nr[0],Ie=nr[1],[Qe,Ie]},boundingWidth:Qe,boundingHeight:Ie,setSize:function(br){var nr;nr=Kt(br,2),Qe=nr[0],Ie=nr[1]}},!0)));var Mt=a;a||(!i&&o?Mt=Kue(e,[0,0]):Mt=n.fixedPosition);var ot=[0,0];o||(ot=Gce(e,Qe,Ie,be,Mt,!h&&g,n)),c&&(!c[0]&&(ot[0]=0),!c[1]&&(ot[1]=0));function $e(){var br;Se&&(br=Kt(Se([Qe,Ie]),2),Qe=br[0],Ie=br[1]),Qe=Pi(Qe,Pe),Ie=Pi(Ie,Pe)}if(Oe){Me[0]&&Me[1]&&ot[0]&&ot[1]&&(en(ot[0])>en(ot[1])?ot[1]=0:ot[0]=0);var tr=!ot[0]&&!ot[1];tr&&$e(),Me[0]&&!Me[1]||ot[0]&&!ot[1]||tr&&X?(Qe+=ot[0],Ie=Qe/z):(!Me[0]&&Me[1]||!ot[0]&&ot[1]||tr&&!X)&&(Ie+=ot[1],Qe=Ie*z)}else Qe+=ot[0],Ie+=ot[1],Qe=Math.max(0,Qe),Ie=Math.max(0,Ie);r=Kt(Vj([Qe,Ie],D,q,Oe?z:!1),2),Qe=r[0],Ie=r[1],$e(),Oe&&(v||_e)&&(X?Ie=Qe/z:Qe=Ie*z),Le=Qe-U,Ue=Ie-H;var Wt=[Le-O,Ue-F];n.prevWidth=Le,n.prevHeight=Ue;var Gt=Zue(e,Qe,Ie,Mt,I,n);if(!(!ce&&Wt.every(function(br){return!br})&&Gt.every(function(br){return!br}))){var at=Eu.drag(e,m1(t,e.state,Gt,!!o,!1,"draggable")),dr=at.transform,hr=k+Le,ur=M+Ue,Cr=Fi(e,t,Ut({width:hr,height:ur,offsetWidth:Math.round(Qe),offsetHeight:Math.round(Ie),startRatio:z,boundingWidth:Qe,boundingHeight:Ie,direction:be,dist:[Le,Ue],delta:Wt,isPinch:!!o,drag:at},Gq({style:{width:"".concat(hr,"px"),height:"".concat(ur,"px")},transform:dr},at,t)));return!x&&jn(e,"onResize",Cr),Cr}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,l=r.prevWidth,a=r.prevHeight;if(!(!n||e.props.checkResizableError===!1)){var c=e.state,h=c.width,g=c.height,v=h-(i+l),x=g-(o+a),b=en(v)>3,S=en(x)>3;if(b&&(r.startWidth+=v,r.startOffsetWidth+=v,r.prevWidth+=v),S&&(r.startHeight+=x,r.startOffsetHeight+=x,r.prevHeight+=x),b||S)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var i=yc(e,t,{});return!n&&jn(e,"onResizeEnd",i),i}},dragGroupControlCondition:pN,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,Ut(Ut({},t),{isGroup:!0}));if(!n)return!1;var i=ud(e,"resizable",t),o=r.startOffsetWidth,l=r.startOffsetHeight;function a(){var b=r.minSize;i.forEach(function(S){var I=S.datas,k=I.minSize,M=I.startOffsetWidth,O=I.startOffsetHeight,F=o*(M?k[0]/M:0),D=l*(O?k[1]/O:0);b[0]=Math.max(b[0],F),b[1]=Math.max(b[1],D)})}function c(){var b=r.maxSize;i.forEach(function(S){var I=S.datas,k=I.maxSize,M=I.startOffsetWidth,O=I.startOffsetHeight,F=o*(M?k[0]/M:0),D=l*(O?k[1]/O:0);b[0]=Math.min(b[0],F),b[1]=Math.min(b[1],D)})}var h=Bf(e,this,"dragControlStart",t,function(b,S){return Z_(e,b,r,S)});a(),c();var g=function(b){n.setFixedDirection(b),h.forEach(function(S,I){S.setFixedDirection(b),Z_(e,S.moveable,r,i[I])})};r.setFixedDirection=g;var v=Ut(Ut({},n),{targets:e.props.targets,events:h.map(function(b){return Ut(Ut({},b),{setMin:function(S){b.setMin(S),a()},setMax:function(S){b.setMax(S),c()}})}),setFixedDirection:g,setMin:function(b){n.setMin(b),a()},setMax:function(b){n.setMax(b),c()}}),x=jn(e,"onResizeGroupStart",v);return r.isResize=x!==!1,r.isResize?n:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=Wp(e.props,"resizable");O2(e,"onBeforeResize",function(b){jn(e,"onBeforeResizeGroup",Fi(e,t,Ut(Ut({},b),{targets:n.targets}),!0))});var i=this.dragControl(e,Ut(Ut({},t),{isGroup:!0}));if(i){var o=i.boundingWidth,l=i.boundingHeight,a=i.dist,c=n.keepRatio,h=[o/(o-a[0]),l/(l-a[1])],g=r.fixedPosition,v=Bf(e,this,"dragControl",t,function(b,S){var I=Kt(pu(f1(e.rotation/180*Math.PI,3),[S.datas.originalX*h[0],S.datas.originalY*h[1],1],3),2),k=I[0],M=I[1];return Ut(Ut({},S),{parentDist:null,parentScale:h,dragClient:ha(g,[k,M]),parentKeepRatio:c})}),x=Ut({targets:n.targets,events:v},i);return jn(e,"onResizeGroup",x),x}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(e,t);var i=Bf(e,this,"dragControlEnd",t),o=yc(e,t,{targets:e.props.targets,events:i});return jn(e,"onResizeGroupEnd",o),r}},request:function(e){var t={},r=0,n=0,i=!1,o=e.getRect();return{isControl:!0,requestStart:function(l){var a;return i=l.useSnap,{datas:t,parentDirection:l.direction||[1,1],parentIsWidth:(a=l?.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(l){return"offsetWidth"in l?r=l.offsetWidth-o.offsetWidth:"deltaWidth"in l&&(r+=l.deltaWidth),"offsetHeight"in l?n=l.offsetHeight-o.offsetHeight:"deltaHeight"in l&&(n+=l.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:l.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.resizable=null}};function n5(e,t,r,n,i){var o=e.props.groupable,l=e.state,a=l.is3d?4:3,c=t.origin,h=Zo(e.state.rootMatrix,ci([c[0],c[1]],o?[0,0]:[l.left,l.top]),a),g=ha([i.left,i.top],h);t.startAbsoluteOrigin=g,t.prevDeg=Ss(g,[r,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=Ff(g,[r,n])}function g_(e,t,r){var n=r.defaultDeg,i=r.prevDeg,o=i%360,l=Math.floor(i/360);o<0&&(o+=360),o>e&&o>270&&e<90?++l:o<e&&o<90&&e>270&&--l;var a=t*(l*360+e-n);return r.prevDeg=n+a,a}function i5(e,t,r,n){return g_(Ss(n.startAbsoluteOrigin,[e,t])/Math.PI*180,r,n)}function a5(e,t,r,n,i,o){var l=e.props.throttleRotate,a=l===void 0?0:l,c=r.prevSnapDeg,h=0,g=!1;if(o){var v=Uce(e,t,n,i+n);g=v.isSnap,h=i+v.dist}g||(h=Pi(i+n,a));var x=h-i;return r.prevSnapDeg=x,[x-c,x,h]}function Mq(e,t,r){var n=Kt(t,4),i=n[0],o=n[1],l=n[2],a=n[3];if(e==="none")return[];if(Tl(e))return e.map(function(k){return Mq(k,[i,o,l,a],r)[0]});var c=Kt((e||"top").split("-"),2),h=c[0],g=c[1],v=[i,o];h==="left"?v=[l,i]:h==="right"?v=[o,a]:h==="bottom"&&(v=[a,l]);var x=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2],b=qq(v,r);if(g){var S=g==="top"||g==="left",I=h==="bottom"||h==="left";x=v[S&&!I||!S&&I?0:1]}return[[x,b]]}function $T(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(ll(r,li("rotation-control"))||e.props.rotateAroundControls&&ll(r,li("around-control"))||ll(r,li("control"))&&ll(r,li("rotatable")))return!0;var n=e.props.rotationTarget;return n?NI(n,!0).some(function(i){return i?r===i||r.contains(i):!1}):!1}var Ace=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Mce={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Ace],viewClassName:function(e){return e.isDragging("rotatable")?li("view-rotation-dragging"):""},render:function(e,t){var r=Wp(e.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,o=r.zoom,l=r.renderDirections,a=r.rotateAroundControls,c=r.resolveAblesWithRotatable,h=e.getState(),g=h.renderPoses,v=h.direction;if(!n)return null;var x=Mq(i,g,v),b=[];if(x.forEach(function(M,O){var F=Kt(M,2),D=F[0],q=F[1];b.push(t.createElement("div",{key:"rotation".concat(O),className:li("rotation"),style:{transform:"translate(-50%) translate(".concat(D[0],"px, ").concat(D[1],"px) rotate(").concat(q,"rad)")}},t.createElement("div",{className:li("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),t.createElement("div",{className:li("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),l){var S=_y(c||{}),I={};S.forEach(function(M){c[M].forEach(function(O){I[O]=M})});var k=[];Tl(l)&&(k=l.map(function(M){var O=I[M];return{data:O?{resolve:O}:{},classNames:O?["move"]:[],dir:M}})),b.push.apply(b,dn([],Kt(pq(e,"rotatable",k,t)),!1))}return a&&b.push.apply(b,dn([],Kt(bq(e,t)),!1)),b},dragControlCondition:$T,dragControlStart:function(e,t){var r,n,i=t.datas,o=t.clientX,l=t.clientY,a=t.parentRotate,c=t.parentFlag,h=t.isPinch,g=t.isRequest,v=e.state,x=v.target,b=v.left,S=v.top,I=v.direction,k=v.beforeDirection,M=v.targetTransform,O=v.moveableClientRect,F=v.offsetMatrix,D=v.targetMatrix,q=v.allMatrix,z=v.width,U=v.height;if(!g&&!x)return!1;var H=e.getRect();i.rect=H,i.transform=M,i.left=b,i.top=S;var X=function(Me){var Le=Aq(e.state,Me);i.fixedDirection=Le.fixedDirection,i.fixedOffset=Le.fixedOffset,i.fixedPosition=Le.fixedPosition,Pe&&Pe.setFixedPosition(Me)},ie=function(Me){var Le=kce(e.state,Me);i.fixedDirection=Le.fixedDirection,i.fixedOffset=Le.fixedOffset,i.fixedPosition=Le.fixedPosition,Pe&&Pe.setFixedDirection(Me)},ee=o,G=l;if(g||h||c){var ne=a||0;i.beforeInfo={origin:H.beforeOrigin,prevDeg:ne,defaultDeg:ne,prevSnapDeg:0,startDist:0},i.afterInfo=Ut(Ut({},i.beforeInfo),{origin:H.origin}),i.absoluteInfo=Ut(Ut({},i.beforeInfo),{origin:H.origin,startValue:ne})}else{var ae=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(ae){var le=ae.getAttribute("data-direction")||"",fe=Oue[le];if(fe){i.isControl=!0,i.isAroundControl=ll(ae,li("around-control")),i.controlDirection=fe;var ke=ae.getAttribute("data-resolve");ke&&(i.resolveAble=ke);var me=ode(v.rootMatrix,v.renderPoses,O);r=Kt(ul(me,fe),2),ee=r[0],G=r[1]}}i.beforeInfo={origin:H.beforeOrigin},i.afterInfo={origin:H.origin},i.absoluteInfo={origin:H.origin,startValue:H.rotation};var Se=X;X=function(Me){var Le=v.is3d?4:3,Ue=Kt(ha(Xj(D,Le),Me),2),Oe=Ue[0],tt=Ue[1],Ze=pu(F,Up([Oe,tt],Le)),Qe=pu(q,Up([Me[0],Me[1]],Le));Se(Me);var Ie=v.posDelta;i.beforeInfo.origin=ci(Ze,Ie),i.afterInfo.origin=ci(Qe,Ie),i.absoluteInfo.origin=ci(Qe,Ie),n5(e,i.beforeInfo,ee,G,O),n5(e,i.afterInfo,ee,G,O),n5(e,i.absoluteInfo,ee,G,O)},ie=function(Me){var Le=ul([[0,0],[z,0],[0,U],[z,U]],Me);X(Le)}}i.startClientX=ee,i.startClientY=G,i.direction=I,i.beforeDirection=k,i.startValue=0,i.datas={},M2(e,t,"rotate");var we=!1,Pe=!1;if(i.isControl&&i.resolveAble){var ce=i.resolveAble;ce==="resizable"&&(Pe=qT.dragControlStart(e,Ut(Ut({},new ny("resizable").dragStart([0,0],t)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}Pe||(we=Eu.dragStart(e,new ny().dragStart([0,0],t))),X(sde(e));var _e=Fi(e,t,Ut(Ut({set:function(Me){i.startValue=Me*Math.PI/180},setFixedDirection:ie,setFixedPosition:X},A2(e,t)),{dragStart:we,resizeStart:Pe})),be=jn(e,"onRotateStart",_e);return i.isRotate=be!==!1,v.snapRenderInfo={request:t.isRequest},i.isRotate?_e:!1},dragControl:function(e,t){var r,n,i,o=t.datas,l=t.clientDistX,a=t.clientDistY,c=t.parentRotate,h=t.parentFlag,g=t.isPinch,v=t.groupDelta,x=t.resolveMatrix,b=o.beforeDirection,S=o.beforeInfo,I=o.afterInfo,k=o.absoluteInfo,M=o.isRotate,O=o.startValue,F=o.rect,D=o.startClientX,q=o.startClientY;if(M){I2(e,t,"rotate");var z=Bue(t),U=b*z,H=e.props.parentMoveable,X=0,ie,ee,G=0,ne,ae,le=0,fe,ke,me=180/Math.PI*O,Se=k.startValue,we=!1,Pe=D+l,ce=q+a;if(!h&&"parentDist"in t){var _e=t.parentDist;ie=_e,ne=_e,fe=_e}else g||h?(ie=g_(c,b,S),ne=g_(c,U,I),fe=g_(c,U,k)):(ie=i5(Pe,ce,b,S),ne=i5(Pe,ce,U,I),fe=i5(Pe,ce,U,k),we=!0);if(ee=me+ie,ae=me+ne,ke=Se+fe,jn(e,"onBeforeRotate",Fi(e,t,{beforeRotation:ee,rotation:ae,absoluteRotation:ke,setRotation:function(Mt){ne=Mt-me,ie=ne,fe=ne}},!0)),r=Kt(a5(e,F,S,ie,me,we),3),X=r[0],ie=r[1],ee=r[2],n=Kt(a5(e,F,I,ne,me,we),3),G=n[0],ne=n[1],ae=n[2],i=Kt(a5(e,F,k,fe,Se,we),3),le=i[0],fe=i[1],ke=i[2],!(!le&&!G&&!X&&!H&&!x)){var be=k2(o,"rotate(".concat(ae,"deg)"),"rotate(".concat(ne,"deg)"));x&&(o.fixedPosition=SI(e,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var Me=Yue(e,ne,o),Le=ci(ha(v||[0,0],Me),o.prevInverseDist||[0,0]);o.prevInverseDist=Me,o.requestValue=null;var Ue=dq(e,be,Le,g,t),Oe=Ue,tt=Ff([Pe,ce],k.startAbsoluteOrigin)-k.startDist,Ze=void 0;if(o.resolveAble==="resizable"){var Qe=qT.dragControl(e,Ut(Ut({},m1(t,e.state,[t.deltaX,t.deltaY],!!g,!1,"resizable")),{resolveMatrix:!0,parentDistance:tt}));Qe&&(Ze=Qe,Oe=Gq(Oe,Qe,t))}var Ie=Fi(e,t,Ut(Ut({delta:G,dist:ne,rotate:ae,rotation:ae,beforeDist:ie,beforeDelta:X,beforeRotate:ee,beforeRotation:ee,absoluteDist:fe,absoluteDelta:le,absoluteRotate:ke,absoluteRotation:ke,isPinch:!!g,resize:Ze},Ue),Oe));return jn(e,"onRotate",Ie),Ie}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var n=yc(e,t,{});return jn(e,"onRotateEnd",n),n}},dragGroupControlCondition:$T,dragGroupControlStart:function(e,t){var r=t.datas,n=e.state,i=n.left,o=n.top,l=n.beforeOrigin,a=this.dragControlStart(e,t);if(!a)return!1;a.set(r.beforeDirection*e.rotation);var c=Bf(e,this,"dragControlStart",t,function(v,x){var b=v.state,S=b.left,I=b.top,k=b.beforeOrigin,M=ha(ci([S,I],[i,o]),ci(k,l));return x.datas.startGroupClient=M,x.datas.groupClient=M,Ut(Ut({},x),{parentRotate:0})}),h=Ut(Ut({},a),{targets:e.props.targets,events:c}),g=jn(e,"onRotateGroupStart",h);return r.isRotate=g!==!1,r.isRotate?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){O2(e,"onBeforeRotate",function(h){jn(e,"onBeforeRotateGroup",Fi(e,t,Ut(Ut({},h),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=r.beforeDirection,o=n.beforeDist,l=o/180*Math.PI,a=Bf(e,this,"dragControl",t,function(h,g){var v=g.datas.startGroupClient,x=Kt(g.datas.groupClient,2),b=x[0],S=x[1],I=Kt(d1(v,l*i),2),k=I[0],M=I[1],O=[k-b,M-S];return g.datas.groupClient=[k,M],Ut(Ut({},g),{parentRotate:o,groupDelta:O})});e.rotation=i*n.beforeRotation;var c=Ut({targets:e.props.targets,events:a,set:function(h){e.rotation=h},setGroupRotation:function(h){e.rotation=h}},n);return jn(e,"onRotateGroup",c),c}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(e,t);var i=Bf(e,this,"dragControlEnd",t),o=yc(e,t,{targets:e.props.targets,events:i});return jn(e,"onRotateGroupEnd",o),r}},request:function(e){var t={},r=0,n=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(i){return"deltaRotate"in i?r+=i.deltaRotate:"rotate"in i&&(r=i.rotate-n),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Lce(e,t){var r,n=e.direction,i=e.classNames,o=e.size,l=e.pos,a=e.zoom,c=e.key,h=n==="horizontal",g=h?"Y":"X";return t.createElement("div",{key:c,className:i.join(" "),style:(r={},r[h?"width":"height"]="".concat(o),r.transform="translate(".concat(l[0],", ").concat(l[1],") translate").concat(g,"(-50%) scale").concat(g,"(").concat(a,")"),r)})}function kI(e,t){return Lce(Ut(Ut({},e),{classNames:dn([li("line","guideline",e.direction)],Kt(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(Pi(r,.1),"px")})}),t)}function mN(e,t,r,n,i,o,l,a){var c=e.props.zoom;return r.map(function(h,g){var v=h.type,x=h.pos,b=[0,0];return b[l]=n,b[l?0:1]=-i+x,kI({key:"".concat(t,"TargetGuideline").concat(g),classNames:[li("target","bold",v)],posValue:b,sizeValue:o,zoom:c,direction:t},a)})}function gN(e,t,r,n,i,o){var l=e.props,a=l.zoom,c=l.isDisplayInnerSnapDigit,h=t==="horizontal"?Fh:Bh,g=i[h.start],v=i[h.end];return r.filter(function(x){var b=x.hide,S=x.elementRect;if(b)return!1;if(c&&S){var I=S.rect;if(I[h.start]<=g&&v<=I[h.end])return!1}return!0}).map(function(x,b){var S=x.pos,I=x.size,k=x.element,M=x.className,O=[-n[0]+S[0],-n[1]+S[1]];return kI({key:"".concat(t,"-default-guideline-").concat(b),classNames:k?[li("bold"),M]:[li("normal"),M],direction:t,posValue:O,sizeValue:I,zoom:a},o)})}function Ov(e,t,r,n,i,o,l,a){var c,h=e.props,g=h.snapDigit,v=g===void 0?0:g,x=h.isDisplaySnapDigit,b=x===void 0?!0:x,S=h.snapDistFormat,I=S===void 0?function(q,z){return q}:S,k=h.zoom,M=t==="horizontal"?"X":"Y",O=t==="vertical"?"height":"width",F=Math.abs(i),D=b?parseFloat(F.toFixed(v)):0;return a.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(n),className:li("guideline-group",t),style:(c={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},c[O]="".concat(F,"px"),c)},kI({direction:t,classNames:[li(r),l],size:"100%",posValue:[0,0],sizeValue:F,zoom:k},a),a.createElement("div",{className:li("size-value","gap"),style:{transform:"translate".concat(M,"(-50%) scale(").concat(k,")")}},D>0?I(D,t):""))}function Rce(e,t,r,n){var i=e==="vertical"?0:1,o=e==="vertical"?1:0,l=i?Fh:Bh,a=r[l.start],c=r[l.end];return Hq(t,function(h){return h.pos[i]}).map(function(h){var g=[],v=[],x=[];return h.forEach(function(b){var S,I,k=b.element,M=b.elementRect.rect;if(M[l.end]<a)g.push(b);else if(c<M[l.start])v.push(b);else if(M[l.start]<=a&&c<=M[l.end]&&n){var O=b.pos,F={element:k,rect:Ut(Ut({},M),(S={},S[l.end]=M[l.start],S))},D={element:k,rect:Ut(Ut({},M),(I={},I[l.start]=M[l.end],I))},q=[0,0],z=[0,0];q[i]=O[i],q[o]=O[o],z[i]=O[i],z[o]=O[o]+b.size,g.push({type:e,pos:q,size:0,elementRect:F,direction:"",elementDirection:"end"}),v.push({type:e,pos:z,size:0,elementRect:D,direction:"",elementDirection:"start"})}}),g.sort(function(b,S){return S.pos[o]-b.pos[o]}),v.sort(function(b,S){return b.pos[o]-S.pos[o]}),{total:h,start:g,end:v,inner:x}})}function Dce(e,t,r,n,i){var o=e.props.isDisplayInnerSnapDigit,l=[];return["vertical","horizontal"].forEach(function(a){var c=t.filter(function(k){return k.type===a}),h=a==="vertical"?1:0,g=h?0:1,v=Rce(a,c,n,o),x=h?Bh:Fh,b=h?Fh:Bh,S=n[x.start],I=n[x.end];v.forEach(function(k){var M=k.total,O=k.start,F=k.end,D=k.inner,q=r[g]+M[0].pos[g]-n[b.start],z=n;O.forEach(function(U){var H=U.elementRect.rect,X=z[x.start]-H[x.end];if(X>0){var ie=[0,0];ie[h]=r[h]+z[x.start]-S-X,ie[g]=q,l.push(Ov(e,a,"dashed",l.length,X,ie,U.className,i))}z=H}),z=n,F.forEach(function(U){var H=U.elementRect.rect,X=H[x.start]-z[x.end];if(X>0){var ie=[0,0];ie[h]=r[h]+z[x.end]-S,ie[g]=q,l.push(Ov(e,a,"dashed",l.length,X,ie,U.className,i))}z=H}),D.forEach(function(U){var H=U.elementRect.rect,X=S-H[x.start],ie=H[x.end]-I,ee=[0,0],G=[0,0];ee[h]=r[h]-X,ee[g]=q,G[h]=r[h]+I-S,G[g]=q,l.push(Ov(e,a,"dashed",l.length,X,ee,U.className,i)),l.push(Ov(e,a,"dashed",l.length,ie,G,U.className,i))})})}),l}function Nce(e,t,r,n,i){var o=[];return["horizontal","vertical"].forEach(function(l){var a=t.filter(function(k){return k.type===l}).slice(0,1),c=l==="vertical"?0:1,h=c?0:1,g=c?Bh:Fh,v=c?Fh:Bh,x=n[g.start],b=n[g.end],S=n[v.start],I=n[v.end];a.forEach(function(k){var M=k.gap,O=k.gapRects,F=Math.max.apply(Math,dn([S],Kt(O.map(function(z){var U=z.rect;return U[v.start]})),!1)),D=Math.min.apply(Math,dn([I],Kt(O.map(function(z){var U=z.rect;return U[v.end]})),!1)),q=(F+D)/2;F===D||q===(S+I)/2||O.forEach(function(z){var U=z.rect,H=z.className,X=[r[0],r[1]];if(U[g.end]<x)X[c]+=U[g.end]-x;else if(b<U[g.start])X[c]+=U[g.start]-x-M;else return;X[h]+=q-S,o.push(Ov(e,c?"vertical":"horizontal","gap",o.length,M,X,H,i))})})}),o}function VT(e){var t,r,n=e.state,i=n.containerClientRect,o=n.hasFixed,l=i.overflow,a=i.scrollHeight,c=i.scrollWidth,h=i.clientHeight,g=i.clientWidth,v=i.clientLeft,x=i.clientTop,b=e.props,S=b.snapGap,I=S===void 0?!0:S,k=b.verticalGuidelines,M=b.horizontalGuidelines,O=b.snapThreshold,F=O===void 0?5:O,D=b.maxSnapElementGuidelineDistance,q=D===void 0?1/0:D,z=b.isDisplayGridGuidelines,U=Dc(qc(e.state)),H=U.top,X=U.left,ie=U.bottom,ee=U.right,G={top:H,left:X,bottom:ie,right:ee,center:(X+ee)/2,middle:(H+ie)/2},ne=zce(e),ae=dn([],Kt(ne),!1),le=((r=(t=n.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(Se){return Se*F});I&&ae.push.apply(ae,dn([],Kt(Oce(e,G,le)),!1));var fe=Ut({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(ae.push.apply(ae,dn([],Kt(Bce(e,l?c:g,l?a:h,v,x,fe,z)),!1)),o){var ke=i.left,me=i.top;fe.left+=ke,fe.top+=me,fe.right+=ke,fe.bottom+=me}return ae.push.apply(ae,dn([],Kt(Rq(M||!1,k||!1,l?c:g,l?a:h,v,x,fe)),!1)),ae=ae.filter(function(Se){var we=Se.element,Pe=Se.elementRect,ce=Se.type;if(!we||!Pe)return!0;var _e=Pe.rect;return Lq(G,_e,ce,q)}),ae}function Oce(e,t,r){var n=e.props,i=n.maxSnapElementGuidelineDistance,o=i===void 0?1/0:i,l=n.maxSnapElementGapDistance,a=l===void 0?1/0:l,c=e.state.elementRects,h=[];return[["vertical",Fh,Bh],["horizontal",Bh,Fh]].forEach(function(g){var v=Kt(g,3),x=v[0],b=v[1],S=v[2],I=t[b.start],k=t[b.end],M=t[b.center],O=t[S.start],F=t[S.end],D={left:r[0],top:r[1]};function q(H){var X=H.rect,ie=D[b.start];return X[b.end]<I+ie?I-X[b.end]:k-ie<X[b.start]?X[b.start]-k:-1}var z=c.filter(function(H){var X=H.rect;return X[S.start]>F||X[S.end]<O?!1:q(H)>0}).sort(function(H,X){return q(H)-q(X)}),U=[];z.forEach(function(H){z.forEach(function(X){if(H!==X){var ie=H.rect,ee=X.rect,G=ie[S.start],ne=ie[S.end],ae=ee[S.start],le=ee[S.end];G>le||ae>ne||U.push([H,X])}})}),U.forEach(function(H){var X=Kt(H,2),ie=X[0],ee=X[1],G=ie.rect,ne=ee.rect,ae=G[b.start],le=G[b.end],fe=ne[b.start],ke=ne[b.end],me=D[b.start],Se=0,we=0,Pe=!1,ce=!1,_e=!1;if(le<=I&&k<=fe){if(ce=!0,Se=(fe-le-(k-I))/2,we=le+Se+(k-I)/2,en(we-M)>me)return}else if(le<fe&&ke<I+me){if(Pe=!0,Se=fe-le,we=ke+Se,en(we-I)>me)return}else if(le<fe&&k-me<ae){if(_e=!0,Se=fe-le,we=ae-Se,en(we-k)>me)return}else return;Se&&Lq(t,ne,x,o)&&(Se>a||h.push({type:x,pos:x==="vertical"?[we,0]:[0,we],element:ee.element,size:0,className:ee.className,isStart:Pe,isCenter:ce,isEnd:_e,gap:Se,hide:!0,gapRects:[ie,ee],direction:"",elementDirection:""}))})}),h}function Fce(e,t,r,n){var i,o,l=e.props,a=e.state,c=l.snapGridAll,h=l.snapGridWidth,g=h===void 0?0:h,v=l.snapGridHeight,x=v===void 0?0:v,b=a.snapRenderInfo,S=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((o=b.direction)===null||o===void 0?void 0:o[1])),I=e.moveables;if(c&&I&&S&&(g||x)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var k=e.getRect(),M=k.children,O=b.direction;if(M){var F=O.map(function(q,z){var U=z===0?{snapSize:g,posName:"left",sizeName:"width",clientOffset:n.left-t}:{snapSize:x,posName:"top",sizeName:"height",clientOffset:n.top-r},H=U.snapSize,X=U.posName,ie=U.sizeName,ee=U.clientOffset;if(!H)return{dir:q,multiple:1,snapSize:H,snapOffset:0};var G=k[ie],ne=k[X],ae=Ale(M.map(function(Pe){return[Pe[X]-ne,Pe[ie],G-Pe[ie]-Pe[X]+ne]})).filter(function(Pe){return Pe}).sort(function(Pe,ce){return Pe-ce}),le=ae[0],fe=ae.map(function(Pe){return Pi(Pe/le,.1)*H}),ke=1,me=Pi(G/le,.1);for(ke=1;ke<=10&&!fe.every(function(Pe){return Pe*ke%1===0});++ke);var Se=(-q+1)/2,we=H_(ne-ee,ne-ee+G,Se,1-Se);return{multiple:me*ke,dir:q,snapSize:H,snapOffset:Math.round(we/H)}}),D=F.map(function(q){return q.multiple||1});a.snapThresholdInfo.multiples=D,a.snapThresholdInfo.offset=F.map(function(q){return q.snapOffset}),F.forEach(function(q,z){q.snapSize})}}else a.snapThresholdInfo=null}function Bce(e,t,r,n,i,o,l){n===void 0&&(n=0),i===void 0&&(i=0);var a=e.props,c=e.state,h=a.snapGridWidth,g=h===void 0?0:h,v=a.snapGridHeight,x=v===void 0?0:v,b=[],S=o.left,I=o.top,k=[0,0];Fce(e,n,i,o);var M=c.snapThresholdInfo,O=g,F=x;if(M&&(g*=M.multiples[0]||1,x*=M.multiples[1]||1,k=M.offset),x){for(var D=function(z){b.push({type:"horizontal",pos:[S,Pi(k[1]*F+z-i+I,.1)],className:li("grid-guideline"),size:t,hide:!l,direction:"",grid:!0})},q=0;q<=r*2;q+=x)D(q);for(var q=-x;q>=-r;q-=x)D(q)}if(g){for(var D=function(U){b.push({type:"vertical",pos:[Pi(k[0]*O+U-n+S,.1),I],className:li("grid-guideline"),size:r,hide:!l,direction:"",grid:!0})},q=0;q<=t*2;q+=g)D(q);for(var q=-g;q>=-t;q-=g)D(q)}return b}function Lq(e,t,r,n){return r==="horizontal"?en(e.right-t.left)<=n||en(e.left-t.right)<=n||e.left<=t.right&&t.left<=e.right:r==="vertical"?en(e.bottom-t.top)<=n||en(e.top-t.bottom)<=n||e.top<=t.bottom&&t.top<=e.bottom:!0}function zce(e){var t=e.state,r=e.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return t.elementRects=[],[];var i=(t.elementRects||[]).filter(function(x){return!x.refresh}),o=n.map(function(x){return fd(x)&&"element"in x?Ut(Ut({},x),{element:Xd(x.element,!0)}):{element:Xd(x,!0)}}).filter(function(x){return x.element}),l=Zle(i.map(function(x){return x.element}),o.map(function(x){return x.element})),a=l.maintained,c=l.added,h=[];a.forEach(function(x){var b=Kt(x,2),S=b[0],I=b[1];h[I]=i[S]}),jce(e,c.map(function(x){return o[x]})).map(function(x,b){h[c[b]]=x}),t.elementRects=h;var g=EI(e.props.elementSnapDirections),v=[];return h.forEach(function(x){var b=x.element,S=x.top,I=S===void 0?g.top:S,k=x.left,M=k===void 0?g.left:k,O=x.right,F=O===void 0?g.right:O,D=x.bottom,q=D===void 0?g.bottom:D,z=x.center,U=z===void 0?g.center:z,H=x.middle,X=H===void 0?g.middle:H,ie=x.className,ee=x.rect,G=TI({top:I,right:F,left:M,bottom:q,center:U,middle:X},ee),ne=G.horizontal,ae=G.vertical,le=G.horizontalNames,fe=G.verticalNames,ke=ee.top,me=ee.left,Se=ee.right-me,we=ee.bottom-ke,Pe=[Se,we];ae.forEach(function(ce,_e){v.push({type:"vertical",element:b,pos:[Pi(ce,.1),ke],size:we,sizes:Pe,className:ie,elementRect:x,elementDirection:sN[fe[_e]]||fe[_e],direction:""})}),ne.forEach(function(ce,_e){v.push({type:"horizontal",element:b,pos:[me,Pi(ce,.1)],size:Se,sizes:Pe,className:ie,elementRect:x,elementDirection:sN[le[_e]]||le[_e],direction:""})})}),v}function yN(e,t){return e?e.map(function(r){var n=fd(r)?r:{pos:r},i=n.pos;return T0(i)?n:Ut(Ut({},n),{pos:to(i,t)})}):[]}function Rq(e,t,r,n,i,o,l){i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l={left:0,top:0,right:0,bottom:0});var a=[],c=l.left,h=l.top,g=l.bottom,v=l.right,x=r+v-c,b=n+g-h;return yN(e,b).forEach(function(S){a.push({type:"horizontal",pos:[c,Pi(S.pos-o+h,.1)],size:x,className:S.className,direction:""})}),yN(t,x).forEach(function(S){a.push({type:"vertical",pos:[Pi(S.pos-i+c,.1),h],size:b,className:S.className,direction:""})}),a}function jce(e,t){if(!t.length)return[];var r=e.props.groupable,n=e.state,i=n.containerClientRect,o=n.rootMatrix,l=n.is3d,a=n.offsetDelta,c=l?4:3,h=Kt(cce(o,i,c),2),g=h[0],v=h[1],x=r?0:a[0],b=r?0:a[1];return t.map(function(S){var I=S.element.getBoundingClientRect(),k=I.left-g-x,M=I.top-v-b,O=M+I.height,F=k+I.width,D=Kt(oy(o,[k,M],c),2),q=D[0],z=D[1],U=Kt(oy(o,[F,O],c),2),H=U[0],X=U[1];return Ut(Ut({},S),{rect:{left:q,right:H,top:z,bottom:X,center:(q+H)/2,middle:(z+X)/2}})})}function Mb(e){var t=e.state,r=t.container,n=e.props.snapContainer||r;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var i=t.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==n){var l=Xd(n,!0);if(l){var a=u0(l),c=SN(t,[a.left-i.left,a.top-i.top]),h=SN(t,[a.right-i.right,a.bottom-i.bottom]);o.left=Pi(c[0],1e-5),o.top=Pi(c[1],1e-5),o.right=Pi(h[0],1e-5),o.bottom=Pi(h[1],1e-5)}}return t.snapContainer=n,t.snapOffset=o,t.guidelines=VT(e),t.enableSnap=!0,!0}function Dq(e,t,r,n,i,o){var l=lm(e,t,r,o?4:3),a=ul(l,n);return MI(l,ci(i,a))}function vN(e){return e?e/en(e):0}function qce(e,t,r,n,i,o){var l=o.fixedDirection,a=pce(r,l,n),c=II(e,t,r,n),h=dn(dn([],Kt(Tce(e,t,a,n,i,o)),!1),Kt(Iq(e,c,o)),!1),g=K_(h,0),v=K_(h,1);return{width:{isBound:g.isBound,offset:g.offset[0]},height:{isBound:v.isBound,offset:v.offset[1]}}}function $ce(e,t,r,n,i,o,l,a,c){var h=ul(t,l),g=D2(e,a,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal.offset,x=g.vertical.offset;if(Pi(x,OT)||Pi(v,OT)){var b=Kt(af({datas:c,distX:-x,distY:-v}),2),S=b[0],I=b[1],k=Math.min(i||1/0,r+l[0]*S),M=Math.min(o||1/0,n+l[1]*I);return[k-r,M-n]}return[0,0]}function Nq(e,t,r,n,i,o,l,a){for(var c=qc(e.state),h=e.props.keepRatio,g=0,v=0,x=0;x<2;++x){var b=t(g,v),S=qce(e,b,i,h,l,a),I=S.width,k=S.height,M=I.isBound,O=k.isBound,F=I.offset,D=k.offset;if(x===1&&(M||(F=0),O||(D=0)),x===0&&l&&!M&&!O)return[0,0];if(h){var q=en(F)*(r?1/r:1),z=en(D)*(n?1/n:1),U=M&&O?q<z:O||!M&&q<z;U?F=r*D/n:D=n*F/r}g+=F,v+=D}if(!h&&i[0]&&i[1]){var H=Ice(e,c,i,o,a),X=H.maxWidth,ie=H.maxHeight,ee=Kt($ce(e,t(g,v).map(function(ae){return ae.map(function(le){return Pi(le,OT)})}),r+g,n+v,X,ie,i,l,a),2),F=ee[0],D=ee[1];g+=F,v+=D}return[g,v]}function s0(e){return e<0&&(e=e%360+360),e%=360,e}function Vce(e,t){t=s0(t);var r=Math.floor(e/360),n=r*360+360-t,i=r*360+t;return en(e-n)<en(e-i)?n:i}function o5(e,t){e=s0(e),t=s0(t);var r=s0(e-t);return Math.min(r,360-r)}function Uce(e,t,r,n){var i,o=e.props,l=(i=o[_q])!==null&&i!==void 0?i:5,a=o[xq];if(Sy(e,"rotatable")){var c=t.pos1,h=t.pos2,g=t.pos3,v=t.pos4,x=t.origin,b=r*Math.PI/180,S=[c,h,g,v].map(function(D){return ci(D,x)}),I=S.map(function(D){return d1(D,b)}),k=dn(dn([],Kt(oce(e,S,I,x,r)),!1),Kt(_ce(e,S,I,x,r)),!1);k.sort(function(D,q){return en(D-r)-en(q-r)});var M=k.length>0;if(M)return{isSnap:M,dist:M?k[0]:r}}if(a?.length&&l){var O=a.slice().sort(function(D,q){return o5(D,n)-o5(q,n)}),F=O[0];if(o5(F,n)<=l)return{isSnap:!0,dist:r+Vce(n,F)-n}}return{isSnap:!1,dist:r}}function Gce(e,t,r,n,i,o,l){if(!Sy(e,"resizable"))return[0,0];var a=l.fixedDirection,c=l.nextAllMatrix,h=e.state,g=h.allMatrix,v=h.is3d;return Nq(e,function(x,b){return Dq(c||g,t+x,r+b,a,i,v)},t,r,n,i,o,l)}function Hce(e,t,r,n,i){if(!Sy(e,"scalable"))return[0,0];var o=i.startOffsetWidth,l=i.startOffsetHeight,a=i.fixedPosition,c=i.fixedDirection,h=i.is3d,g=Nq(e,function(v,x){return Dq(Gue(i,ha(t,[v/o,x/l])),o,l,c,a,h)},o,l,r,a,n,i);return[g[0]/o,g[1]/l]}function Wce(e,t){t.absolutePoses=qc(e.state)}function bN(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(n){var i=n.guideline;gc(t,function(o){return o.guideline===i})||(i.direction="",t.push({guideline:i,posInfo:r}))})}),t.map(function(r){var n=r.guideline,i=r.posInfo;return Ut(Ut({},n),{direction:i.direction})})}function _N(e,t,r,n,i,o){var l=CI(L2(e,o),t,r),a=l.vertical,c=l.horizontal,h=Mg();a.forEach(function(S){S.isBound&&(S.direction==="start"&&(h.left=!0),S.direction==="end"&&(h.right=!0),n.push({type:"bounds",pos:S.pos}))}),c.forEach(function(S){S.isBound&&(S.direction==="start"&&(h.top=!0),S.direction==="end"&&(h.bottom=!0),i.push({type:"bounds",pos:S.pos}))});var g=xce(e),v=g.boundMap,x=g.vertical,b=g.horizontal;return x.forEach(function(S){Gf(n,function(I){var k=I.type,M=I.pos;return k==="bounds"&&M===S})>=0||n.push({type:"bounds",pos:S})}),b.forEach(function(S){Gf(i,function(I){var k=I.type,M=I.pos;return k==="bounds"&&M===S})>=0||i.push({type:"bounds",pos:S})}),{boundMap:h,innerBoundMap:v}}var Xce=DI("",["resizable","scalable"]),Yce={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",_q,xq,wq,Sq,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,n=r.top,i=r.left,o=r.pos1,l=r.pos2,a=r.pos3,c=r.pos4,h=r.snapRenderInfo,g=e.props.snapRenderThreshold,v=g===void 0?1:g;if(!h||!h.render||!Sy(e,""))return Rg(e,"boundMap",Mg(),function(be){return JSON.stringify(be)}),Rg(e,"innerBoundMap",Mg(),function(be){return JSON.stringify(be)}),[];r.guidelines=VT(e);var x=Math.min(o[0],l[0],a[0],c[0]),b=Math.min(o[1],l[1],a[1],c[1]),S=h.externalPoses||[],I=qc(e.state),k=[],M=[],O=[],F=[],D=[],q=Dc(I),z=q.width,U=q.height,H=q.top,X=q.left,ie=q.bottom,ee=q.right,G={left:X,right:ee,top:H,bottom:ie,center:(X+ee)/2,middle:(H+ie)/2},ne=S.length>0,ae=ne?Dc(S):{};if(!h.request){if(h.direction&&D.push(hce(e,I,h.direction,v,v)),h.snap){var le=Dc(I);h.center&&(le.middle=(le.top+le.bottom)/2,le.center=(le.left+le.right)/2),D.push(lN(e,le,v,v))}ne&&(h.center&&(ae.middle=(ae.top+ae.bottom)/2,ae.center=(ae.left+ae.right)/2),D.push(lN(e,ae,v,v))),D.forEach(function(be){var Me=be.vertical.posInfos,Le=be.horizontal.posInfos;k.push.apply(k,dn([],Kt(Me.filter(function(Ue){var Oe=Ue.guidelineInfos;return Oe.some(function(tt){var Ze=tt.guideline;return!Ze.hide})}).map(function(Ue){return{type:"snap",pos:Ue.pos}})),!1)),M.push.apply(M,dn([],Kt(Le.filter(function(Ue){var Oe=Ue.guidelineInfos;return Oe.some(function(tt){var Ze=tt.guideline;return!Ze.hide})}).map(function(Ue){return{type:"snap",pos:Ue.pos}})),!1)),O.push.apply(O,dn([],Kt(bN(Me)),!1)),F.push.apply(F,dn([],Kt(bN(Le)),!1))})}var fe=_N(e,[X,ee],[H,ie],k,M),ke=fe.boundMap,me=fe.innerBoundMap;ne&&_N(e,[ae.left,ae.right],[ae.top,ae.bottom],k,M,h.externalBounds);var Se=dn(dn([],Kt(O),!1),Kt(F),!1),we=Se.filter(function(be){return be.element&&!be.gapRects}),Pe=Se.filter(function(be){return be.gapRects}).sort(function(be,Me){return be.gap-Me.gap});jn(e,"onSnap",{guidelines:Se.filter(function(be){var Me=be.element;return!Me}),elements:we,gaps:Pe},!0);var ce=Rg(e,"boundMap",ke,function(be){return JSON.stringify(be)},Mg()),_e=Rg(e,"innerBoundMap",me,function(be){return JSON.stringify(be)},Mg());return(ke===ce||me===_e)&&jn(e,"onBound",{bounds:ke,innerBounds:me},!0),dn(dn(dn(dn(dn(dn([],Kt(Dce(e,we,[x,b],G,t)),!1),Kt(Nce(e,Pe,[x,b],G,t)),!1),Kt(gN(e,"horizontal",F,[i,n],G,t)),!1),Kt(gN(e,"vertical",O,[i,n],G,t)),!1),Kt(mN(e,"horizontal",M,x,n,z,0,t)),!1),Kt(mN(e,"vertical",k,b,i,U,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},Mb(e)},drag:function(e){var t=e.state;Mb(e)||(t.guidelines=VT(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(Xce(e,t)||$T(e,t))return!0;if(!t.isRequest&&t.inputEvent)return ll(t.inputEvent.target,li("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,Mb(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,Mb(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function Zce(e,t){return[e[0]*t[0],e[1]*t[1]]}function li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return hle.apply(void 0,dn([_I],Kt(e),!1))}function Oq(e){e()}function Kce(e){return!e||e==="none"?[1,0,0,1,0,0]:fd(e)?e:I0(e)}function l0(e,t,r){return W_(t,Gp(r,t),e,Gp(r.map(function(n){return-n}),t))}function Jce(e,t,r){if(t==="%"){var n=AI(e.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function Qce(e){var t=ede(LI(e,":before"));return t.map(function(r,n){var i=c1(r),o=i.value,l=i.unit;return o*Jce(e,l,n===0)})}function Q_(e){return e?e.split(" "):["0","0"]}function ede(e){return Q_(e.transformOrigin)}function Fq(e){var t=Xu(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var n=e.transform,i=n.baseVal;if(!i)return"";var o=i.length;if(!o)return"";for(var l=[],a=function(h){var g=i[h].matrix;l.push("matrix(".concat(["a","b","c","d","e","f"].map(function(v){return g[v]}).join(", "),")"))},c=0;c<o;++c)a(c);return l.join(" ")}return""}function A0(e,t,r,n,i){var o,l,a=fI(e)||Wh(e),c=!1,h,g;if(!e||r)h=e;else{var v=(o=e?.assignedSlot)===null||o===void 0?void 0:o.parentElement,x=e.parentElement;v?(c=!0,g=x,h=v):h=x}for(var b=!1,S=e===t||h===t,I="relative",k=1,M=parseFloat(i?.("zoom"))||1,O=i?.("position");h&&h!==a;){t===h&&(S=!0);var F=Xu(h),D=h.tagName.toLowerCase(),q=Fq(h),z=F("willChange"),U=parseFloat(F("zoom"))||1;if(I=F("position"),n&&U!==1){k=U;break}if(!r&&n&&M!==1&&O&&O!=="absolute"||D==="svg"||D==="foreignobject"||I!=="static"||q&&q!=="none"||z==="transform")break;var H=(l=e?.assignedSlot)===null||l===void 0?void 0:l.parentNode,X=h.parentNode;H&&(c=!0,g=X);var ie=X;if(ie&&ie.nodeType===11){h=ie.host,b=!0,I=Xu(h)("position");break}h=ie,I="relative"}return{offsetZoom:k,hasSlot:c,parentSlotElement:g,isCustomElement:b,isStatic:I==="static",isEnd:S||!h||h===a,offsetParent:h||a}}function tde(e,t){var r,n=e.tagName.toLowerCase(),i=e.offsetLeft,o=e.offsetTop,l=Xu(e),a=sI(i),c=!a,h,g;return!c&&(n!=="svg"||e.ownerSVGElement)?(h=nq?Qce(e):Q_(l("transformOrigin")).map(function(v){return parseFloat(v)}),g=h.slice(),c=!0,n==="svg"?(i=0,o=0):(r=Kt(ide(e,h,e===t&&t.tagName.toLowerCase()==="g"),4),i=r[0],o=r[1],h[0]=r[2],h[1]=r[3])):(h=Q_(l("transformOrigin")).map(function(v){return parseFloat(v)}),g=h.slice()),{tagName:n,isSVG:a,hasOffset:c,offset:[i||0,o||0],origin:h,targetOrigin:g}}function Bq(e,t){var r=Xu(e),n=Xu(Wh(e)),i=n("position");if(!t&&(!i||i==="static"))return[0,0];var o=parseInt(n("marginLeft"),10),l=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(l=0),(r("left")!=="auto"||r("right")!=="auto")&&(o=0)),[o,l]}function UT(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=hd(r,3,4))})}function rde(e){for(var t=e.parentElement,r=!1,n=Wh(e);t;){var i=LI(t).transform;if(i&&i!=="none"){r=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:r}}function N2(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(Yj(e,!t).join(","),")")}function AI(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||r,clientWidth:t,clientHeight:r}}function nde(e,t){var r,n=AI(e),i=n.width,o=n.height,l=n.clientWidth,a=n.clientHeight,c=l/i,h=a/o,g=e.preserveAspectRatio.baseVal,v=g.align,x=g.meetOrSlice,b=[0,0],S=[c,h],I=[0,0];if(v!==1){var k=(v-2)%3,M=Math.floor((v-2)/3);b[0]=i*k/2,b[1]=o*M/2;var O=x===2?Math.max(h,c):Math.min(c,h);S[0]=O,S[1]=O,I[0]=(l-i)/2*k,I[1]=(a-o)/2*M}var F=pI(S,t);return r=Kt(I,2),F[t*(t-1)]=r[0],F[t*(t-1)+1]=r[1],l0(F,t,b)}function ide(e,t,r){var n=e.tagName.toLowerCase();if(!e.getBBox||!r&&n==="g")return[0,0,0,0];var i=Xu(e),o=i("transform-box")==="fill-box",l=e.getBBox(),a=AI(e.ownerSVGElement),c=l.x,h=l.y;n==="foreignobject"&&!c&&!h&&(c=parseFloat(e.getAttribute("x"))||0,h=parseFloat(e.getAttribute("y"))||0);var g=c-a.x,v=h-a.y,x=o?t[0]:t[0]-g,b=o?t[1]:t[1]-v;return[g,v,x,b]}function Zo(e,t,r){return pu(e,Up(t,r),r)}function lm(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(i){return Zo(e,i,n)})}function Dc(e){var t=e.map(function(h){return h[0]}),r=e.map(function(h){return h[1]}),n=Math.min.apply(Math,dn([],Kt(t),!1)),i=Math.min.apply(Math,dn([],Kt(r),!1)),o=Math.max.apply(Math,dn([],Kt(t),!1)),l=Math.max.apply(Math,dn([],Kt(r),!1)),a=o-n,c=l-i;return{left:n,top:i,right:o,bottom:l,width:a,height:c}}function xN(e,t,r,n){var i=lm(e,t,r,n);return Dc(i)}function ade(e,t,r,n,i){var o,l=e.target,a=e.origin,c=t.matrix,h=jq(l),g=h.offsetWidth,v=h.offsetHeight,x=r.getBoundingClientRect(),b=[0,0];r===Wh(r)&&(b=Bq(l,!0));for(var S=l.getBoundingClientRect(),I=S.left-x.left+r.scrollLeft-(r.clientLeft||0)+b[0],k=S.top-x.top+r.scrollTop-(r.clientTop||0)+b[1],M=S.width,O=S.height,F=W_(n,i,c),D=xN(F,g,v,n),q=D.left,z=D.top,U=D.width,H=D.height,X=Zo(F,a,n),ie=ci(X,[q,z]),ee=[I+ie[0]*M/U,k+ie[1]*O/H],G=[0,0],ne=0;++ne<10;){var ae=Jd(i,n);o=Kt(ci(Zo(ae,ee,n),Zo(ae,X,n)),2),G[0]=o[0],G[1]=o[1];var le=W_(n,i,Gp(G,n),c),fe=xN(le,g,v,n),ke=fe.left,me=fe.top,Se=ke-I,we=me-k;if(en(Se)<2&&en(we)<2)break;ee[0]-=Se,ee[1]-=we}return G.map(function(Pe){return Math.round(Pe)})}function ode(e,t,r){var n=e.length===16,i=n?4:3,o=t.map(function(c){return Zo(e,c,i)}),l=r.left,a=r.top;return o.map(function(c){return[c[0]+l,c[1]+a]})}function jc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function zq(e,t){return jc([t[0]-e[0],t[1]-e[1]])}function Fv(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=Ss(e,t));var i=zq(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function ex(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,o=r.reduce(function(a,c){return a+c[0]},0)/i,l=r.reduce(function(a,c){return a+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(l,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function Wp(e,t){var r=e[t];return fd(r)?Ut(Ut({},e),r):e}function jq(e){var t=e&&!sI(e.offsetWidth),r=0,n=0,i=0,o=0,l=0,a=0,c=0,h=0,g=0,v=0,x=0,b=0,S=1/0,I=1/0,k=1/0,M=1/0,O=0,F=0,D=!1;if(e)if(!t&&e.ownerSVGElement){var q=e.getBBox();D=!0,r=q.width,n=q.height,l=r,a=n,c=r,h=n,i=r,o=n}else{var z=Xu(e),U=e.style,H=z("boxSizing")==="border-box",X=parseFloat(z("borderLeftWidth"))||0,ie=parseFloat(z("borderRightWidth"))||0,ee=parseFloat(z("borderTopWidth"))||0,G=parseFloat(z("borderBottomWidth"))||0,ne=parseFloat(z("paddingLeft"))||0,ae=parseFloat(z("paddingRight"))||0,le=parseFloat(z("paddingTop"))||0,fe=parseFloat(z("paddingBottom"))||0,ke=ne+ae,me=le+fe,Se=X+ie,we=ee+G,Pe=ke+Se,ce=me+we,_e=z("position"),be=0,Me=0;if("clientLeft"in e){var Le=null;if(_e==="absolute"){var Ue=A0(e,Wh(e));Le=Ue.offsetParent}else Le=e.parentElement;if(Le){var Oe=Xu(Le);be=parseFloat(Oe("width")),Me=parseFloat(Oe("height"))}}g=Math.max(ke,to(z("minWidth"),be)||0),v=Math.max(me,to(z("minHeight"),Me)||0),S=to(z("maxWidth"),be),I=to(z("maxHeight"),Me),isNaN(S)&&(S=1/0),isNaN(I)&&(I=1/0),O=to(U.width,0)||0,F=to(U.height,0)||0,l=parseFloat(z("width"))||0,a=parseFloat(z("height"))||0,c=en(l-O)<1?TT(g,O||l,S):l,h=en(a-F)<1?TT(v,F||a,I):a,r=c,n=h,i=c,o=h,H?(k=S,M=I,x=g,b=v,c=r-Pe,h=n-ce):(k=S+Pe,M=I+ce,x=g+Pe,b=v+ce,r=c+Pe,n=h+ce),i=c+ke,o=h+me}return{svg:D,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:o,contentWidth:c,contentHeight:h,inlineCSSWidth:O,inlineCSSHeight:F,cssWidth:l,cssHeight:a,minWidth:g,minHeight:v,maxWidth:S,maxHeight:I,minOffsetWidth:x,minOffsetHeight:b,maxOffsetWidth:k,maxOffsetHeight:M}}function qq(e,t){return Ss(t>0?e[0]:e[1],t>0?e[1]:e[0])}function Lb(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function $q(e,t){var r=e===Wh(e)||e===fI(e),n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=Xu(e)("overflow")!=="visible",Ut(Ut({},t),n)}function s5(e,t,r,n){var i=e.left,o=e.right,l=e.top,a=e.bottom,c=t.top,h=t.left,g={left:h+i,top:c+l,right:h+o,bottom:c+a,width:o-i,height:a-l};return r&&n?$q(r,g):g}function u0(e,t){var r=0,n=0,i=0,o=0;if(e){var l=e.getBoundingClientRect();r=l.left,n=l.top,i=l.width,o=l.height}var a={left:r,top:n,width:i,height:o,right:r+i,bottom:n+o};return e&&t?$q(e,a):a}function sde(e){var t=e.props,r=t.groupable,n=t.svgOrigin,i=e.getState(),o=i.offsetWidth,l=i.offsetHeight,a=i.svg,c=i.transformOrigin;return!r&&a&&n?OI(n,o,l):c}function Vq(e,t,r,n){var i;if(e)i=e;else if(t)i=[0,0];else{var o=r.target;i=Uq(o,n)}return i}function Uq(e,t){if(e){var r=e.getAttribute("data-rotation")||"",n=e.getAttribute("data-direction");if(t.deg=r,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function MI(e,t){return[ha(t,e[0]),ha(t,e[1]),ha(t,e[2]),ha(t,e[3])]}function qc(e){var t=e.left,r=e.top,n=e.pos1,i=e.pos2,o=e.pos3,l=e.pos4;return MI([n,i,o,l],[t,r])}function GT(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function Lg(e,t){var r=t?"controlGesto":"targetGesto",n=e[r];n?.isIdle()===!1&&GT(e,t),n?.unset(),e[r]=null}function Pu(e,t){if(t){var r=wy(t);r.nextStyle=Ut(Ut({},r.nextStyle),e)}return{style:e,cssText:_y(e).map(function(n){return"".concat(Ele(n,"-"),": ").concat(e[n],";")}).join("")}}function Gq(e,t,r){var n=t.afterTransform||t.transform;return Ut(Ut({},Pu(Ut(Ut(Ut({},e.style),t.style),{transform:n}),r)),{afterTransform:n,transform:e.transform})}function Fi(e,t,r,n){var i=t.datas;i.datas||(i.datas={});var o=Ut(Ut({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:i.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var l;(l=t.stop)===null||l===void 0||l.call(t)}});return i.isStartEvent?n||(i.lastEvent=o):i.isStartEvent=!0,o}function yc(e,t,r){var n=t.datas,i="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),Ut(Ut({isDrag:i},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function O2(e,t,r){e._emitter.on(t,r)}function jn(e,t,r,n,i){return e.triggerEvent(t,r,n,i)}function LI(e,t){return Mh(e).getComputedStyle(e,t)}function Rb(e,t,r){var n={},i={};return e.filter(function(o){var l=o.name;if(n[l]||!t.some(function(a){return o[a]}))return!1;if(!r&&o.ableGroup){if(i[o.ableGroup])return!1;i[o.ableGroup]=!0}return n[l]=!0,!0})}function HT(e,t){return e===t||e==null&&t==null}function wN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var i=e[n];if(!sI(i))return i}return e[r]}function Hq(e,t){var r=[],n=[];return e.forEach(function(i,o){var l=t(i,o,e),a=n.indexOf(l),c=r[a]||[];a===-1&&(n.push(l),r.push(c)),c.push(i)}),r}function lde(e,t){var r=[],n={};return e.forEach(function(i,o){var l=t(i,o,e),a=n[l];a||(a=[],n[l]=a,r.push(a)),a.push(i)}),r}function Wq(e){return e.reduce(function(t,r){return t.concat(r)},[])}function ay(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return en(n)-en(r)}),e[0]}function oy(e,t,r){return pu(Jd(e,r),Up(t,r),r)}function ude(e,t){var r,n=e.is3d,i=e.rootMatrix,o=n?4:3;return r=Kt(oy(i,[t.distX,t.distY],o),2),t.distX=r[0],t.distY=r[1],t}function Cc(e,t,r,n){if(!r[0]&&!r[1])return t;var i=Zo(e,[vN(r[0]||1),0],n),o=Zo(e,[0,vN(r[1]||1)],n),l=Zo(e,[r[0]/jc(i),r[1]/jc(o)],n);return ha(t,l)}function nd(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function tx(e){return en(e)<=ku?0:e}function RI(e){return function(t){if(!t.isDragging(e))return"";var r=Jue(t,e),n=r.deg;return n?li("view-control-rotation".concat(n)):""}}function DI(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return t.some(function(o){return n.requestAble===o})?n.parentDirection:!1;var i=n.inputEvent.target;return ll(i,li("direction"))&&(!e||ll(i,li(e)))}}function cde(e,t,r){var n,i=ry(e,{"x%":function(q){return q/100*t.offsetWidth},"y%":function(q){return q/100*t.offsetHeight}}),o=e.slice(0,r<0?void 0:r),l=e.slice(0,r<0?void 0:r+1),a=e[r]||"",c=r<0?[]:e.slice(r),h=r<0?[]:e.slice(r+1),g=i.slice(0,r<0?void 0:r),v=i.slice(0,r<0?void 0:r+1),x=(n=i[r])!==null&&n!==void 0?n:ry([""])[0],b=r<0?[]:i.slice(r),S=r<0?[]:i.slice(r+1),I=x?[x]:[],k=sg(g),M=sg(v),O=sg(b),F=sg(S),D=ro(k,O,4);return{transforms:e,beforeFunctionMatrix:k,beforeFunctionMatrix2:M,targetFunctionMatrix:sg(I),afterFunctionMatrix:O,afterFunctionMatrix2:F,allFunctionMatrix:D,beforeFunctions:g,beforeFunctions2:v,targetFunction:I[0],afterFunctions:b,afterFunctions2:S,beforeFunctionTexts:o,beforeFunctionTexts2:l,targetFunctionText:a,afterFunctionTexts:c,afterFunctionTexts2:h}}function dde(e){return!e||!fd(e)||hI(e)?!1:Tl(e)||"length"in e}function Xd(e,t){return e?hI(e)?e:Kf(e)?t?document.querySelector(e):e:lI(e)?e():Hj(e)?e:"current"in e?e.current:e:null}function NI(e,t){if(!e)return[];var r=dde(e)?[].slice.call(e):[e];return r.reduce(function(n,i){return Kf(i)&&t?dn(dn([],Kt(n),!1),Kt([].slice.call(document.querySelectorAll(i))),!1):(Tl(i)?n.push(NI(i,t)):n.push(Xd(i,t)),n)},[])}function fde(e,t,r){var n=Ss(e,t)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function SN(e,t){var r=e.rootMatrix,n=e.is3d,i=n?4:3,o=Jd(r,i);return n||(o=hd(o,3,4)),o[12]=0,o[13]=0,o[14]=0,qle(o,t)}function Xq(e,t,r,n,i){var o=Kt(e,2),l=o[0],a=o[1],c=0,h=0;if(i&&l&&a){var g=Ss([0,0],t),v=Ss([0,0],n),x=jc(t),b=Math.cos(g-v)*x;if(!n[0])h=b,c=h*r;else if(!n[1])c=b,h=c/r;else{var S=n[0]*l,I=n[1]*a,k=Math.atan2(S+t[0],I+t[1]),M=Math.atan2(S,I);k<0&&(k+=Math.PI*2),M<0&&(M+=Math.PI*2);var O=0;en(k-M)<Math.PI/2||en(k-M)>Math.PI/2*3||(M+=Math.PI),O=k-M,O>Math.PI*2?O-=Math.PI*2:O>Math.PI?O=2*Math.PI-O:O<-Math.PI&&(O=-2*Math.PI-O);var F=jc([S+t[0],I+t[1]])*Math.cos(O);c=F*Math.sin(M)-S,h=F*Math.cos(M)-I,n[0]<0&&(c*=-1),n[1]<0&&(h*=-1)}}else c=n[0]*t[0],h=n[1]*t[1];return[c,h]}function Yq(e,t,r,n){var i,o=r.ratio,l=r.startOffsetWidth,a=r.startOffsetHeight,c=0,h=0,g=n.distX,v=n.distY,x=n.pinchScale,b=n.parentDistance,S=n.parentDist,I=n.parentScale,k=r.fixedDirection,M=[0,1].map(function(U){return en(e[U]-k[U])}),O=[0,1].map(function(U){var H=M[U];return H!==0&&(H=2/H),H});if(S)c=S[0],h=S[1],t&&(c?h||(h=c/o):c=h*o);else if(T0(x))c=(x-1)*l,h=(x-1)*a;else if(I)c=(I[0]-1)*l,h=(I[1]-1)*a;else if(b){var F=l*M[0],D=a*M[1],q=jc([F,D]);c=b/q*F*O[0],h=b/q*D*O[1]}else{var z=af({datas:r,distX:g,distY:v});z=O.map(function(U,H){return z[H]*U}),i=Kt(Xq([l,a],z,o,e,t),2),c=i[0],h=i[1]}return{distWidth:c,distHeight:h}}function WT(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=Kt(e.split(" "),2),n=r[0],i=r[1],o=WT(n||""),l=WT(i||""),a=Ut(Ut({},o),l),c={x:"50%",y:"50%"};return a.x&&(c.x=a.x),a.y&&(c.y=a.y),a.value&&(a.x&&!a.y&&(c.y=a.value),!a.x&&a.y&&(c.x=a.value)),c}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function OI(e,t,r){var n=WT(e,!0),i=n.x,o=n.y;return[to(i,t)||0,to(o,r)||0]}function hde(e,t,r){var n=e.map(function(o){return ci(o,t)}),i=n.map(function(o){return d1(o,r)});return{prev:n,next:i,result:i.map(function(o){return ha(o,t)})}}function Zq(e,t){return e.length===t.length&&e.every(function(r,n){var i=t[n],o=Tl(r),l=Tl(i);return o&&l?Zq(r,i):!o&&!l?r===i:!1})}function Rg(e,t,r,n,i){var o=e._store,l=o[t];if(!(t in o))if(i!=null)o[t]=i,l=i;else return o[t]=r,r;return l===r||n(l)===n(r)?l:(o[t]=r,r)}function Tu(e){return e>=0?1:-1}function en(e){return Math.abs(e)}function l5(e,t){return kle(e).map(function(r){return t(r)})}function Kq(e){return T0(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var pde=p1("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,i=t.angle,o=t.originalDatas,l=e.props,a=l.pinchable,c=l.ables;if(!a)return!1;var h="onPinch".concat(n?"Group":"","Start"),g="drag".concat(n?"Group":"","ControlStart"),v=(a===!0?e.controlAbles:c.filter(function(I){return a.indexOf(I.name)>-1})).filter(function(I){return I.canPinch&&I[g]}),x=Fi(e,t,{});n&&(x.targets=n);var b=jn(e,h,x);r.isPinch=b!==!1,r.ables=v;var S=r.isPinch;return S?(v.forEach(function(I){if(o[I.name]=o[I.name]||{},!!I[g]){var k=Ut(Ut({},t),{datas:o[I.name],parentRotate:i,isPinch:!0});I[g](e,k)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},S):!1},pinch:function(e,t){var r=t.datas,n=t.scale,i=t.distance,o=t.originalDatas,l=t.inputEvent,a=t.targets,c=t.angle;if(r.isPinch){var h=i*(1-1/n),g=Fi(e,t,{});a&&(g.targets=a);var v="onPinch".concat(a?"Group":"");jn(e,v,g);var x=r.ables,b="drag".concat(a?"Group":"","Control");return x.forEach(function(S){S[b]&&S[b](e,Ut(Ut({},t),{datas:o[S.name],inputEvent:l,resolveMatrix:!0,pinchScale:n,parentDistance:h,parentRotate:c,isPinch:!0}))}),g}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.targets,l=t.originalDatas;if(r.isPinch){var a="onPinch".concat(o?"Group":"","End"),c=yc(e,t,{isDrag:n});o&&(c.targets=o),jn(e,a,c);var h=r.ables,g="drag".concat(o?"Group":"","ControlEnd");return h.forEach(function(v){v[g]&&v[g](e,Ut(Ut({},t),{isDrag:n,datas:l[v.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,Ut(Ut({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,Ut(Ut({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,Ut(Ut({},t),{targets:e.props.targets}))}}),CN=DI("scalable"),mde={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:yq("scalable"),dragControlCondition:CN,viewClassName:RI("scalable"),dragControlStart:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.parentDirection,l=Vq(o,n,i,r),a=e.state,c=a.width,h=a.height,g=a.targetTransform,v=a.target,x=a.pos1,b=a.pos2,S=a.pos4;if(!l||!v)return!1;n||sm(e,t),r.datas={},r.transform=g,r.prevDist=[1,1],r.direction=l,r.startOffsetWidth=c,r.startOffsetHeight=h,r.startValue=[1,1];var I=!l[0]&&!l[1]||l[0]||!l[1];M2(e,t,"scale"),r.isWidth=I;function k(z){r.ratio=z&&isFinite(z)?z:0}r.startPositions=qc(e.state);function M(z){var U=kq(r.startPositions,z);r.fixedDirection=U.fixedDirection,r.fixedPosition=U.fixedPosition,r.fixedOffset=U.fixedOffset}r.setFixedDirection=M,k(Ff(x,b)/Ff(b,S)),M([-l[0],-l[1]]);var O=function(z){r.minScaleSize=z},F=function(z){r.maxScaleSize=z};O([-1/0,-1/0]),F([1/0,1/0]);var D=Fi(e,t,Ut(Ut({direction:l,set:function(z){r.startValue=z},setRatio:k,setFixedDirection:M,setMinScaleSize:O,setMaxScaleSize:F},A2(e,t)),{dragStart:Eu.dragStart(e,new ny().dragStart([0,0],t))})),q=jn(e,"onScaleStart",D);return r.startFixedDirection=r.fixedDirection,q!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:l}),r.isScale?D:!1},dragControl:function(e,t){I2(e,t,"scale");var r=t.datas,n=t.parentKeepRatio,i=t.parentFlag,o=t.isPinch,l=t.dragClient,a=t.isRequest,c=t.useSnap,h=t.resolveMatrix,g=r.prevDist,v=r.direction,x=r.startOffsetWidth,b=r.startOffsetHeight,S=r.isScale,I=r.startValue,k=r.isWidth,M=r.ratio;if(!S)return!1;var O=e.props,F=O.throttleScale,D=O.parentMoveable,q=v;!v[0]&&!v[1]&&(q=[1,1]);var z=M&&(n??O.keepRatio)||!1,U=e.state,H=[I[0],I[1]];function X(){var Qe=Yq(q,z,r,t),Ie=Qe.distWidth,Mt=Qe.distHeight,ot=x?(x+Ie)/x:1,$e=b?(b+Mt)/b:1;I[0]||(H[0]=Ie/x),I[1]||(H[1]=Mt/b);var tr=(q[0]||z?ot:1)*H[0],Wt=(q[1]||z?$e:1)*H[1];return tr===0&&(tr=Tu(g[0])*Ib),Wt===0&&(Wt=Tu(g[1])*Ib),[tr,Wt]}var ie=X();if(!o&&e.props.groupable){var ee=U.snapRenderInfo||{},G=ee.direction;Tl(G)&&(G[0]||G[1])&&(U.snapRenderInfo={direction:v,request:t.isRequest})}jn(e,"onBeforeScale",Fi(e,t,{scale:ie,setFixedDirection:function(Qe){return r.setFixedDirection(Qe),ie=X(),ie},startFixedDirection:r.startFixedDirection,setScale:function(Qe){ie=Qe}},!0));var ne=[ie[0]/H[0],ie[1]/H[1]],ae=l,le=[0,0],fe=Tu(ne[0]*ne[1]),ke=!l&&!i&&o;if(ke||h?ae=SI(e,r.targetAllTransform,[0,0],[0,0],r):l||(ae=r.fixedPosition),o||(le=Hce(e,ne,v,!c&&a,r)),z){q[0]&&q[1]&&le[0]&&le[1]&&(Math.abs(le[0]*x)>Math.abs(le[1]*b)?le[1]=0:le[0]=0);var me=!le[0]&&!le[1];if(me&&(k?ne[0]=Pi(ne[0]*H[0],F)/H[0]:ne[1]=Pi(ne[1]*H[1],F)/H[1]),q[0]&&!q[1]||le[0]&&!le[1]||me&&k){ne[0]+=le[0];var Se=x*ne[0]*H[0]/M;ne[1]=Tu(fe*ne[0])*en(Se/b/H[1])}else if(!q[0]&&q[1]||!le[0]&&le[1]||me&&!k){ne[1]+=le[1];var we=b*ne[1]*H[1]*M;ne[0]=Tu(fe*ne[1])*en(we/x/H[0])}}else ne[0]+=le[0],ne[1]+=le[1],le[0]||(ne[0]=Pi(ne[0]*H[0],F)/H[0]),le[1]||(ne[1]=Pi(ne[1]*H[1],F)/H[1]);ne[0]===0&&(ne[0]=Tu(g[0])*Ib),ne[1]===0&&(ne[1]=Tu(g[1])*Ib),ie=Zce(ne,[H[0],H[1]]);var Pe=[x,b],ce=[x*ie[0],b*ie[1]];ce=Vj(ce,r.minScaleSize,r.maxScaleSize,z?M:!1),ie=l5(2,function(Qe){return Pe[Qe]?ce[Qe]/Pe[Qe]:ce[Qe]}),ne=l5(2,function(Qe){return ie[Qe]/H[Qe]});var _e=l5(2,function(Qe){return g[Qe]?ne[Qe]/g[Qe]:ne[Qe]}),be="scale(".concat(ne.join(", "),")"),Me="scale(".concat(ie.join(", "),")"),Le=k2(r,Me,be),Ue=!I[0]||!I[1],Oe=Hue(e,Ue?Me:be,r.fixedDirection,ae,r.fixedOffset,r,Ue),tt=ke?Oe:ci(Oe,r.prevInverseDist||[0,0]);if(r.prevDist=ne,r.prevInverseDist=Oe,ie[0]===g[0]&&ie[1]===g[1]&&tt.every(function(Qe){return!Qe})&&!D&&!ke)return!1;var Ze=Fi(e,t,Ut({offsetWidth:x,offsetHeight:b,direction:v,scale:ie,dist:ne,delta:_e,isPinch:!!o},dq(e,Le,tt,o,t)));return jn(e,"onScale",Ze),Ze},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var n=yc(e,t,{});return jn(e,"onScaleEnd",n),n},dragGroupControlCondition:CN,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,t);if(!n)return!1;var i=ud(e,"resizable",t);r.moveableScale=e.scale;var o=Bf(e,this,"dragControlStart",t,function(h,g){return Z_(e,h,r,g)}),l=function(h){n.setFixedDirection(h),o.forEach(function(g,v){g.setFixedDirection(h),Z_(e,g.moveable,r,i[v])})};r.setFixedDirection=l;var a=Ut(Ut({},n),{targets:e.props.targets,events:o,setFixedDirection:l}),c=jn(e,"onScaleGroupStart",a);return r.isScale=c!==!1,r.isScale?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){O2(e,"onBeforeScale",function(g){jn(e,"onBeforeScaleGroup",Fi(e,t,Ut(Ut({},g),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=n.dist,o=r.moveableScale;e.scale=[i[0]*o[0],i[1]*o[1]];var l=e.props.keepRatio,a=r.fixedPosition,c=Bf(e,this,"dragControl",t,function(g,v){var x=Kt(pu(f1(e.rotation/180*Math.PI,3),[v.datas.originalX*i[0],v.datas.originalY*i[1],1],3),2),b=x[0],S=x[1];return Ut(Ut({},v),{parentDist:null,parentScale:i,parentKeepRatio:l,dragClient:ha(a,[b,S])})}),h=Ut({targets:e.props.targets,events:c},n);return jn(e,"onScaleGroup",h),h}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(e,t);var i=Bf(e,this,"dragControlEnd",t),o=yc(e,t,{targets:e.props.targets,events:i});return jn(e,"onScaleGroupEnd",o),r}},request:function(){var e={},t=0,r=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:e,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return t+=i.deltaWidth,r+=i.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}}};function bh(e,t){return e.map(function(r,n){return H_(r,t[n],1,2)})}function EN(e,t,r){var n=Ss(e,t),i=Ss(e,r),o=i-n;return o>=0?o:o+2*Math.PI}function gde(e,t){var r=EN(e[0],e[1],e[2]),n=EN(t[0],t[1],t[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}var yde={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:RI("warpable"),render:function(e,t){var r=e.props,n=r.resizable,i=r.scalable,o=r.warpable,l=r.zoom;if(n||i||!o)return[];var a=e.state,c=a.pos1,h=a.pos2,g=a.pos3,v=a.pos4,x=bh(c,h),b=bh(h,c),S=bh(c,g),I=bh(g,c),k=bh(g,v),M=bh(v,g),O=bh(h,v),F=bh(v,h);return dn([t.createElement("div",{className:li("line"),key:"middeLine1",style:Fv(x,k,l)}),t.createElement("div",{className:li("line"),key:"middeLine2",style:Fv(b,M,l)}),t.createElement("div",{className:li("line"),key:"middeLine3",style:Fv(S,O,l)}),t.createElement("div",{className:li("line"),key:"middeLine4",style:Fv(I,F,l)})],Kt(vq(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return ll(r,li("direction"))&&ll(r,li("warpable"))},dragControlStart:function(e,t){var r=t.datas,n=t.inputEvent,i=e.props.target,o=n.target,l=Uq(o,r);if(!l||!i)return!1;var a=e.state,c=a.transformOrigin,h=a.is3d,g=a.targetTransform,v=a.targetMatrix,x=a.width,b=a.height,S=a.left,I=a.top;r.datas={},r.targetTransform=g,r.warpTargetMatrix=h?v:hd(v,3,4),r.targetInverseMatrix=Wj(Jd(r.warpTargetMatrix,4),3,4),r.direction=l,r.left=S,r.top=I,r.poses=[[0,0],[x,0],[0,b],[x,b]].map(function(O){return ci(O,c)}),r.nextPoses=r.poses.map(function(O){var F=Kt(O,2),D=F[0],q=F[1];return pu(r.warpTargetMatrix,[D,q,0,1],4)}),r.startValue=To(4),r.prevMatrix=To(4),r.absolutePoses=qc(a),r.posIndexes=cq(l),sm(e,t),M2(e,t,"matrix3d"),a.snapRenderInfo={request:t.isRequest,direction:l};var k=Fi(e,t,Ut({set:function(O){r.startValue=O}},A2(e,t))),M=jn(e,"onWarpStart",k);return M!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,n=t.isRequest,i=t.distX,o=t.distY,l=r.targetInverseMatrix,a=r.prevMatrix,c=r.isWarp,h=r.startValue,g=r.poses,v=r.posIndexes,x=r.absolutePoses;if(!c)return!1;if(I2(e,t,"matrix3d"),Sy(e,"warpable")){var b=v.map(function(X){return x[X]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var S=D2(e,n,{horizontal:b.map(function(X){return X[1]+o}),vertical:b.map(function(X){return X[0]+i})}),I=S.horizontal,k=S.vertical;o-=I.offset,i-=k.offset}var M=af({datas:r,distX:i,distY:o},!0),O=r.nextPoses.slice();if(v.forEach(function(X){O[X]=ha(O[X],M)}),!Nue.every(function(X){return gde(X.map(function(ie){return g[ie]}),X.map(function(ie){return O[ie]}))}))return!1;var F=mI(g[0],g[2],g[1],g[3],O[0],O[2],O[1],O[3]);if(!F.length)return!1;var D=ro(l,F,4),q=lq(r,D,!0),z=ro(Jd(a,4),q,4);r.prevMatrix=q;var U=ro(h,q,4),H=k2(r,"matrix3d(".concat(U.join(", "),")"),"matrix3d(".concat(q.join(", "),")"));return wI(t,H),jn(e,"onWarp",Fi(e,t,Ut({delta:z,matrix:U,dist:q,multiply:ro,transform:H},Pu({transform:H},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,n=t.isDrag;return r.isWarp?(r.isWarp=!1,jn(e,"onWarpEnd",yc(e,t,{})),n):!1}},vde=li("area-pieces"),Db=li("area-piece"),Jq=li("avoid"),bde=li("view-dragging");function u5(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,i=r.height;Gj(t,Jq),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function TN(e){return e.createElement("div",{key:"area_pieces",className:vde},e.createElement("div",{className:Db}),e.createElement("div",{className:Db}),e.createElement("div",{className:Db}),e.createElement("div",{className:Db}))}var Qq={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,n=r.target,i=r.dragArea,o=r.groupable,l=r.passDragArea,a=e.getState(),c=a.width,h=a.height,g=a.renderPoses,v=l?li("area","pass"):li("area");if(o)return[t.createElement("div",{key:"area",ref:Fp(e,"areaElement"),className:v}),TN(t)];if(!n||!i)return[];var x=mI([0,0],[c,0],[0,h],[c,h],g[0],g[1],g[2],g[3]),b=x.length?N2(x,!0):"none";return[t.createElement("div",{key:"area",ref:Fp(e,"areaElement"),className:v,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(h,"px"),transformOrigin:"0 0",transform:b}}),TN(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,i=t.clientY,o=t.inputEvent;if(!o)return!1;r.isDragArea=!1;var l=e.areaElement,a=e.state,c=a.moveableClientRect,h=a.renderPoses,g=a.rootMatrix,v=a.is3d,x=c.left,b=c.top,S=Dc(h),I=S.left,k=S.top,M=S.width,O=S.height,F=v?4:3,D=Kt(oy(g,[n-x,i-b],F),2),q=D[0],z=D[1];q-=I,z-=k;var U=[{left:I,top:k,width:M,height:z-10},{left:I,top:k,width:q-10,height:O},{left:I,top:k+z+10,width:M,height:O-z-10},{left:I+q+10,top:k,width:M-q-10,height:O}],H=[].slice.call(l.nextElementSibling.children);U.forEach(function(X,ie){H[ie].style.cssText="left: ".concat(X.left,"px;top: ").concat(X.top,"px; width: ").concat(X.width,"px; height: ").concat(X.height,"px;")}),Uj(l,Jq),a.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,u5(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||u5(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){u5(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&$j(function(){t.disableNativeEvent=!1})}},_de=p1("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,n=r.zoom,i=r.svgOrigin,o=r.groupable,l=e.getState(),a=l.beforeOrigin,c=l.rotation,h=l.svg,g=l.allMatrix,v=l.is3d,x=l.left,b=l.top,S=l.offsetWidth,I=l.offsetHeight,k;if(!o&&h&&i){var M=Kt(OI(i,S,I),2),O=M[0],F=M[1],D=v?4:3,q=Zo(g,[O,F],D);k=ex(c,n,ci(q,[x,b]))}else k=ex(c,n,a);return[t.createElement("div",{className:li("control","origin"),style:k,key:"beforeOrigin"})]}});function xde(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var wde={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,n=r.scrollContainer,i=n===void 0?e.getContainer():n,o=r.scrollOptions,l=new eue,a=Xd(i,!0);t.datas.dragScroll=l,e.state.dragScroll=l;var c=t.isControl?"controlGesto":"targetGesto",h=t.targets;l.on("scroll",function(g){var v=g.container,x=g.direction,b=Fi(e,t,{scrollContainer:v,direction:x}),S=h?"onScrollGroup":"onScroll";h&&(b.targets=h),jn(e,S,b)}).on("move",function(g){var v=g.offsetX,x=g.offsetY,b=g.inputEvent;e[c].scrollBy(v,x,b.inputEvent,!1)}).on("scrollDrag",function(g){var v=g.next;v(e[c].getCurrentEvent())}),l.dragStart(t,Ut({container:a},o))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var n=e.props,i=n.scrollContainer,o=i===void 0?e.getContainer():i,l=n.scrollThreshold,a=l===void 0?0:l,c=n.scrollThrottleTime,h=c===void 0?0:c,g=n.getScrollPosition,v=g===void 0?xde:g,x=n.scrollOptions;return r.drag(t,Ut({container:o,threshold:a,throttleTime:h,getScrollPosition:function(b){return v({scrollContainer:b.container,direction:b.direction})}},x)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,Ut(Ut({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,Ut(Ut({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,Ut(Ut({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},e$={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Sde=p1("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=Kq(r.padding||{}),i=n.left,o=n.top,l=n.right,a=n.bottom,c=e.getState(),h=c.renderPoses,g=c.pos1,v=c.pos2,x=c.pos3,b=c.pos4,S=[g,v,x,b],I=[];return i>0&&I.push([0,2]),o>0&&I.push([0,1]),l>0&&I.push([1,3]),a>0&&I.push([2,3]),I.map(function(k,M){var O=Kt(k,2),F=O[0],D=O[1],q=S[F],z=S[D],U=h[F],H=h[D],X=mI([0,0],[100,0],[0,100],[100,100],q,z,U,H);if(X.length)return t.createElement("div",{key:"padding".concat(M),className:li("padding"),style:{transform:N2(X,!0)}})})}}),PN=["nw","ne","se","sw"];function Nb(e,t){var r=e[0]+e[1],n=r>t?t/r:1;return e[0]*=n,e[1]=t-e[1]*n,e}var Cde=[1,2,5,6],Ede=[0,3,4,7],Pp=[1,-1,-1,1],Ip=[1,1,-1,-1];function FI(e,t,r,n,i,o,l,a){i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=r),a===void 0&&(a=n);var c=[],h=!1,g=e.filter(function(x){return!x.virtual}),v=g.map(function(x){var b=x.horizontal,S=x.vertical,I=x.pos;if(S&&!h&&(h=!0,c.push("/")),h){var k=Math.max(0,S===1?I[1]-o:a-I[1]);return c.push(nd(k,n,t)),k}else{var k=Math.max(0,b===1?I[0]-i:l-I[0]);return c.push(nd(k,r,t)),k}});return{radiusPoses:g,styles:c,raws:v}}function t$(e){for(var t=[0,0],r=[0,0],n=e.length,i=0;i<n;++i){var o=e[i];o.sub&&(o.horizontal&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1,r[0]=i+1),o.vertical&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function r$(e,t,r,n,i,o,l){var a,c,h,g;o===void 0&&(o=[0,0]),l===void 0&&(l=!1);var v=e.indexOf("/"),x=(v>-1?e.slice(0,v):e).length,b=e.slice(0,x),S=e.slice(x+1),I=b.length,k=S.length,M=k>0,O=Kt(b,4),F=O[0],D=F===void 0?"0px":F,q=O[1],z=q===void 0?D:q,U=O[2],H=U===void 0?D:U,X=O[3],ie=X===void 0?z:X,ee=Kt(S,4),G=ee[0],ne=G===void 0?D:G,ae=ee[1],le=ae===void 0?M?ne:z:ae,fe=ee[2],ke=fe===void 0?M?ne:H:fe,me=ee[3],Se=me===void 0?M?le:ie:me,we=[D,z,H,ie].map(function(Le){return to(Le,t)}),Pe=[ne,le,ke,Se].map(function(Le){return to(Le,r)}),ce=we.slice(),_e=Pe.slice();a=Kt(Nb([ce[0],ce[1]],t),2),ce[0]=a[0],ce[1]=a[1],c=Kt(Nb([ce[3],ce[2]],t),2),ce[3]=c[0],ce[2]=c[1],h=Kt(Nb([_e[0],_e[3]],r),2),_e[0]=h[0],_e[3]=h[1],g=Kt(Nb([_e[1],_e[2]],r),2),_e[1]=g[0],_e[2]=g[1];var be=l?ce:ce.slice(0,Math.max(o[0],I)),Me=l?_e:_e.slice(0,Math.max(o[1],k));return dn(dn([],Kt(be.map(function(Le,Ue){var Oe=PN[Ue];return{virtual:Ue>=I,horizontal:Pp[Ue],vertical:0,pos:[n+Le,i+(Ip[Ue]===-1?r:0)],sub:!0,raw:we[Ue],direction:Oe}})),!1),Kt(Me.map(function(Le,Ue){var Oe=PN[Ue];return{virtual:Ue>=k,horizontal:0,vertical:Ip[Ue],pos:[n+(Pp[Ue]===-1?t:0),i+Le],sub:!0,raw:Pe[Ue],direction:Oe}})),!1)}function Tde(e,t,r,n,i){i===void 0&&(i=t.length);var o=t$(e.slice(n)),l=o.horizontalRange,a=o.verticalRange,c=r-n,h=0;if(c===0)h=i;else if(c>0&&c<l[1])h=l[1]-c;else if(c>=a[0])h=a[0]+a[1]-c;else return;e.splice(r,h),t.splice(r,h)}function Pde(e,t,r,n,i,o,l,a,c,h,g){h===void 0&&(h=0),g===void 0&&(g=0);var v=t$(e.slice(r)),x=v.horizontalRange,b=v.verticalRange;if(n>-1)for(var S=Pp[n]===1?o-h:a-o,I=x[1];I<=n;++I){var k=Ip[I]===1?g:c,M=0;if(n===I?M=o:I===0?M=h+S:Pp[I]===-1&&(M=a-(t[r][0]-h)),e.splice(r+I,0,{horizontal:Pp[I],vertical:0,pos:[M,k]}),t.splice(r+I,0,[M,k]),I===0)break}else if(i>-1){var O=Ip[i]===1?l-g:c-l;if(x[1]===0&&b[1]===0){var F=[h+O,g];e.push({horizontal:Pp[0],vertical:0,pos:F}),t.push(F)}for(var D=b[0],I=b[1];I<=i;++I){var M=Pp[I]===1?h:a,k=0;if(i===I?k=l:I===0?k=g+O:Ip[I]===1?k=t[r+D][1]:Ip[I]===-1&&(k=c-(t[r+D][1]-g)),e.push({horizontal:0,vertical:Ip[I],pos:[M,k]}),t.push([M,k]),I===0)break}}}function Ide(e,t){t===void 0&&(t=e.map(function(i){return i.raw}));var r=e.map(function(i,o){return i.horizontal?t[o]:null}).filter(function(i){return i!=null}),n=e.map(function(i,o){return i.vertical?t[o]:null}).filter(function(i){return i!=null});return{horizontals:r,verticals:n}}var kde=[[0,-1,"n"],[1,0,"e"]],Ade=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function BI(e,t,r){var n=e.props.clipRelative,i=e.state,o=i.width,l=i.height,a=t,c=a.type,h=a.poses,g=c==="rect",v=c==="circle";if(c==="polygon")return r.map(function(z){return"".concat(nd(z[0],o,n)," ").concat(nd(z[1],l,n))});if(g||c==="inset"){var x=r[1][1],b=r[3][0],S=r[7][0],I=r[5][1];if(g)return[x,b,I,S].map(function(z){return"".concat(z,"px")});var k=[x,o-b,l-I,S].map(function(z,U){return nd(z,U%2?o:l,n)});if(r.length>8){var M=Kt(ci(r[4],r[0]),2),O=M[0],F=M[1];k.push.apply(k,dn(["round"],Kt(FI(h.slice(8).map(function(z,U){return Ut(Ut({},z),{pos:r[U]})}),n,O,F,S,x,b,I).styles),!1))}return k}else if(v||c==="ellipse"){var D=r[0],q=nd(en(r[1][1]-D[1]),v?Math.sqrt((o*o+l*l)/2):l,n),k=v?[q]:[nd(en(r[2][0]-D[0]),o,n),q];return k.push("at",nd(D[0],o,n),nd(D[1],l,n)),k}}function rx(e,t,r,n){var i=[n,(n+t)/2,t],o=[e,(e+r)/2,r];return Ade.map(function(l){var a=Kt(l,3),c=a[0],h=a[1],g=a[2],v=i[c+1],x=o[h+1];return{vertical:en(h),horizontal:en(c),direction:g,pos:[v,x]}})}function n$(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(n){var i=n.pos;t[0]=Math.min(t[0],i[0]),t[1]=Math.max(t[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])}),[en(t[1]-t[0]),en(r[1]-r[0])]}function IN(e,t,r,n,i){var o,l,a,c,h,g,v,x,b;if(e){var S=i;if(!S){var I=Xu(e),k=I("clipPath");S=k!=="none"?k:I("clip")}if(!((!S||S==="none"||S==="auto")&&(S=n,!S))){var M=qj(S),O=M.prefix,F=O===void 0?S:O,D=M.value,q=D===void 0?"":D,z=F==="circle",U=" ";if(F==="polygon"){var H=Mp(q||"0% 0%, 100% 0%, 100% 100%, 0% 100%");U=",";var X=H.map(function(hr){var ur=Kt(hr.split(" "),2),Cr=ur[0],br=ur[1];return{vertical:1,horizontal:1,pos:[to(Cr,t),to(br,r)]}}),ie=Hp(X.map(function(hr){return hr.pos}));return{type:F,clipText:S,poses:X,splitter:U,left:ie.minX,right:ie.maxX,top:ie.minY,bottom:ie.maxY}}else if(z||F==="ellipse"){var ee="",G="",ne=0,ae=0,H=Oh(q);if(z){var le="";o=Kt(H,4),l=o[0],le=l===void 0?"50%":l,a=o[2],ee=a===void 0?"50%":a,c=o[3],G=c===void 0?"50%":c,ne=to(le,Math.sqrt((t*t+r*r)/2)),ae=ne}else{var fe="",ke="";h=Kt(H,5),g=h[0],fe=g===void 0?"50%":g,v=h[1],ke=v===void 0?"50%":v,x=h[3],ee=x===void 0?"50%":x,b=h[4],G=b===void 0?"50%":b,ne=to(fe,t),ae=to(ke,r)}var me=[to(ee,t),to(G,r)],X=dn([{vertical:1,horizontal:1,pos:me,direction:"nesw"}],Kt(kde.slice(0,z?1:2).map(function(Cr){return{vertical:en(Cr[1]),horizontal:Cr[0],direction:Cr[2],sub:!0,pos:[me[0]+Cr[0]*ne,me[1]+Cr[1]*ae]}})),!1);return{type:F,clipText:S,radiusX:ne,radiusY:ae,left:me[0]-ne,top:me[1]-ae,right:me[0]+ne,bottom:me[1]+ae,poses:X,splitter:U}}else if(F==="inset"){var H=Oh(q||"0 0 0 0"),Se=H.indexOf("round"),we=(Se>-1?H.slice(0,Se):H).length,Pe=H.slice(we+1),ce=Kt(H.slice(0,we),4),_e=ce[0],be=ce[1],Me=be===void 0?_e:be,Le=ce[2],Ue=Le===void 0?_e:Le,Oe=ce[3],tt=Oe===void 0?Me:Oe,Ze=Kt([_e,Ue].map(function(Cr){return to(Cr,r)}),2),Qe=Ze[0],Ie=Ze[1],Mt=Kt([tt,Me].map(function(Cr){return to(Cr,t)}),2),ot=Mt[0],$e=Mt[1],tr=t-$e,Wt=r-Ie,Gt=r$(Pe,tr-ot,Wt-Qe,ot,Qe),X=dn(dn([],Kt(rx(Qe,tr,Wt,ot)),!1),Kt(Gt),!1);return{type:"inset",clipText:S,poses:X,top:Qe,left:ot,right:tr,bottom:Wt,radius:Pe,splitter:U}}else if(F==="rect"){var H=Mp(q||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));U=",";var at=Kt(H.map(function(lr){var Pr=c1(lr).value;return Pr}),4),dr=at[0],$e=at[1],Ie=at[2],ot=at[3],X=rx(dr,$e,Ie,ot);return{type:"rect",clipText:S,poses:X,top:dr,right:$e,bottom:Ie,left:ot,values:H,splitter:U}}}}}function Mde(e,t,r,n,i){var o=e[t],l=o.direction,a=o.sub,c=e.map(function(){return[0,0]}),h=l?l.split(""):[];if(n&&t<8){var g=h.filter(function(ne){return ne==="w"||ne==="e"}),v=h.filter(function(ne){return ne==="n"||ne==="s"}),x=g[0],b=v[0];c[t]=r;var S=Kt(n$(e),2),I=S[0],k=S[1],M=I&&k?I/k:0;if(M&&i){var O=(t+4)%8,F=e[O].pos,D=[0,0];l.indexOf("w")>-1?D[0]=-1:l.indexOf("e")>-1&&(D[0]=1),l.indexOf("n")>-1?D[1]=-1:l.indexOf("s")>-1&&(D[1]=1);var q=Xq([I,k],r,M,D,!0),z=I+q[0],U=k+q[1],H=F[1],X=F[1],ie=F[0],ee=F[0];D[0]===-1?ie=ee-z:D[0]===1?ee=ie+z:(ie=ie-z/2,ee=ee+z/2),D[1]===-1?H=X-U:(D[1]===1||(H=X-U/2),X=H+U);var G=rx(H,ee,X,ie);e.forEach(function(ne,ae){c[ae][0]=G[ae].pos[0]-ne.pos[0],c[ae][1]=G[ae].pos[1]-ne.pos[1]})}else e.forEach(function(ne,ae){var le=ne.direction;le&&(le.indexOf(x)>-1&&(c[ae][0]=r[0]),le.indexOf(b)>-1&&(c[ae][1]=r[1]))}),x&&(c[1][0]=r[0]/2,c[5][0]=r[0]/2),b&&(c[3][1]=r[1]/2,c[7][1]=r[1]/2)}else l&&!a?h.forEach(function(ne){var ae=ne==="n"||ne==="s";e.forEach(function(le,fe){var ke=le.direction,me=le.horizontal,Se=le.vertical;!ke||ke.indexOf(ne)===-1||(c[fe]=[ae||!me?0:r[0],!ae||!Se?0:r[1]])})}):c[t]=r;return c}function Lde(e,t){var r=Kt(sq(e,t),2),n=r[0],i=r[1],o=t.datas,l=o.clipPath,a=o.clipIndex,c=l,h=c.type,g=c.poses,v=c.splitter,x=g.map(function(O){return O.pos});if(h==="polygon")x.splice(a,0,[n,i]);else if(h==="inset"){var b=Cde.indexOf(a),S=Ede.indexOf(a),I=g.length;if(Pde(g,x,8,b,S,n,i,x[4][0],x[4][1],x[0][0],x[0][1]),I===g.length)return}else return;var k=BI(e,l,x),M="".concat(h,"(").concat(k.join(v),")");jn(e,"onClip",Fi(e,t,Ut({clipEventType:"added",clipType:h,poses:x,clipStyles:k,clipStyle:M,distX:0,distY:0},Pu({clipPath:M},t))))}function Rde(e,t){var r=t.datas,n=r.clipPath,i=r.clipIndex,o=n,l=o.type,a=o.poses,c=o.splitter,h=a.map(function(b){return b.pos}),g=h.length;if(l==="polygon")a.splice(i,1),h.splice(i,1);else if(l==="inset"){if(i<8||(Tde(a,h,i,8,g),g===a.length))return}else return;var v=BI(e,n,h),x="".concat(l,"(").concat(v.join(c),")");jn(e,"onClip",Fi(e,t,Ut({clipEventType:"removed",clipType:l,poses:h,clipStyles:v,clipStyle:x,distX:0,distY:0},Pu({clipPath:x},t))))}var Dde={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,n=r.customClipPath,i=r.defaultClipPath,o=r.clipArea,l=r.zoom,a=r.groupable,c=e.getState(),h=c.target,g=c.width,v=c.height,x=c.allMatrix,b=c.is3d,S=c.left,I=c.top,k=c.pos1,M=c.pos2,O=c.pos3,F=c.pos4,D=c.clipPathState,q=c.snapBoundInfos,z=c.rotation;if(!h||a)return[];var U=IN(h,g,v,i||"inset",D||n);if(!U)return[];var H=b?4:3,X=U.type,ie=U.poses,ee=ie.map(function($e){var tr=Zo(x,$e.pos,H);return[tr[0]-S,tr[1]-I]}),G=[],ne=[],ae=X==="rect",le=X==="inset",fe=X==="polygon";if(ae||le||fe){var ke=le?ee.slice(0,8):ee;ne=ke.map(function($e,tr){var Wt=tr===0?ke[ke.length-1]:ke[tr-1],Gt=Ss(Wt,$e),at=zq(Wt,$e);return t.createElement("div",{key:"clipLine".concat(tr),className:li("line","clip-line","snap-control"),"data-clip-index":tr,style:{width:"".concat(at,"px"),transform:"translate(".concat(Wt[0],"px, ").concat(Wt[1],"px) rotate(").concat(Gt,"rad) scaleY(").concat(l,")")}})})}if(G=ee.map(function($e,tr){return t.createElement("div",{key:"clipControl".concat(tr),className:li("control","clip-control","snap-control"),"data-clip-index":tr,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(z,"rad) scale(").concat(l,")")}})}),le&&G.push.apply(G,dn([],Kt(ee.slice(8).map(function($e,tr){return t.createElement("div",{key:"clipRadiusControl".concat(tr),className:li("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+tr,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(z,"rad) scale(").concat(l,")")}})})),!1)),X==="circle"||X==="ellipse"){var me=U.left,Se=U.top,we=U.radiusX,Pe=U.radiusY,ce=Kt(ci(Zo(x,[me,Se],H),Zo(x,[0,0],H)),2),_e=ce[0],be=ce[1],Me="none";if(!o){for(var Le=Math.max(10,we/5,Pe/5),Ue=[],Oe=0;Oe<=Le;++Oe){var tt=Math.PI*2/Le*Oe;Ue.push([we+(we-l)*Math.cos(tt),Pe+(Pe-l)*Math.sin(tt)])}Ue.push([we,-2]),Ue.push([-2,-2]),Ue.push([-2,Pe*2+2]),Ue.push([we*2+2,Pe*2+2]),Ue.push([we*2+2,-2]),Ue.push([we,-2]),Me="polygon(".concat(Ue.map(function($e){return"".concat($e[0],"px ").concat($e[1],"px")}).join(", "),")")}G.push(t.createElement("div",{key:"clipEllipse",className:li("clip-ellipse","snap-control"),style:{width:"".concat(we*2,"px"),height:"".concat(Pe*2,"px"),clipPath:Me,transform:"translate(".concat(-S+_e,"px, ").concat(-I+be,"px) ").concat(N2(x))}}))}if(o){var Ze=Dc(dn([k,M,O,F],Kt(ee),!1)),Qe=Ze.width,Ie=Ze.height,Mt=Ze.left,ot=Ze.top;if(fe||ae||le){var Ue=le?ee.slice(0,8):ee;G.push(t.createElement("div",{key:"clipArea",className:li("clip-area","snap-control"),style:{width:"".concat(Qe,"px"),height:"".concat(Ie,"px"),transform:"translate(".concat(Mt,"px, ").concat(ot,"px)"),clipPath:"polygon(".concat(Ue.map(function(tr){return"".concat(tr[0]-Mt,"px ").concat(tr[1]-ot,"px")}).join(", "),")")}}))}}return q&&["vertical","horizontal"].forEach(function($e){var tr=q[$e],Wt=$e==="horizontal";tr.isSnap&&ne.push.apply(ne,dn([],Kt(tr.snap.posInfos.map(function(Gt,at){var dr=Gt.pos,hr=ci(Zo(x,Wt?[0,dr]:[dr,0],H),[S,I]),ur=ci(Zo(x,Wt?[g,dr]:[dr,v],H),[S,I]);return k0(t,"",hr,ur,l,"clip".concat($e,"snap").concat(at),"guideline")})),!1)),tr.isBound&&ne.push.apply(ne,dn([],Kt(tr.bounds.map(function(Gt,at){var dr=Gt.pos,hr=ci(Zo(x,Wt?[0,dr]:[dr,0],H),[S,I]),ur=ci(Zo(x,Wt?[g,dr]:[dr,v],H),[S,I]);return k0(t,"",hr,ur,l,"clip".concat($e,"bounds").concat(at),"guideline","bounds","bold")})),!1))}),dn(dn([],Kt(G),!1),Kt(ne),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,n=r.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,Ut(Ut({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,n=e.props,i=n.defaultClipPath,o=n.customClipPath,l=r.target,a=r.width,c=r.height,h=t.inputEvent?t.inputEvent.target:null,g=h&&h.getAttribute("class")||"",v=t.datas,x=IN(l,a,c,i||"inset",o);if(!x)return!1;var b=x.clipText,S=x.type,I=x.poses,k=jn(e,"onClipStart",Fi(e,t,{clipType:S,clipStyle:b,poses:I.map(function(M){return M.pos})}));return k===!1?(v.isClipStart=!1,!1):(v.isControl=g&&g.indexOf("clip-control")>-1,v.isLine=g.indexOf("clip-line")>-1,v.isArea=g.indexOf("clip-area")>-1||g.indexOf("clip-ellipse")>-1,v.clipIndex=h?parseInt(h.getAttribute("data-clip-index"),10):-1,v.clipPath=x,v.isClipStart=!0,r.clipPathState=b,sm(e,t),!0)},dragControl:function(e,t){var r,n,i,o=t.datas,l=t.originalDatas,a=t.isDragTarget;if(!o.isClipStart)return!1;var c=o,h=c.isControl,g=c.isLine,v=c.isArea,x=c.clipIndex,b=c.clipPath;if(!b)return!1;var S=Wp(e.props,"clippable"),I=S.keepRatio,k=0,M=0,O=l.draggable,F=af(t);a&&O?(r=Kt(O.prevBeforeDist,2),k=r[0],M=r[1]):(n=Kt(F,2),k=n[0],M=n[1]);var D=[k,M],q=e.state,z=q.width,U=q.height,H=!v&&!h&&!g,X=b.type,ie=b.poses,ee=b.splitter,G=ie.map(function(Tt){return Tt.pos});H&&(k=-k,M=-M);var ne=!h||ie[x].direction==="nesw",ae=X==="inset"||X==="rect",le=ie.map(function(){return[0,0]});if(h&&!ne){var fe=ie[x],ke=fe.horizontal,me=fe.vertical,Se=[k*en(ke),M*en(me)];le=Mde(ie,x,Se,ae,I)}else ne&&(le=G.map(function(){return[k,M]}));var we=G.map(function(Tt,Yt){return ha(Tt,le[Yt])}),Pe=dn([],Kt(we),!1);q.snapBoundInfos=null;var ce=b.type==="circle",_e=b.type==="ellipse";if(ce||_e){var be=Dc(we),Me=en(be.bottom-be.top),Le=en(_e?be.right-be.left:Me),Ue=we[0][1]+Me,Oe=we[0][0]-Le,tt=we[0][0]+Le;ce&&(Pe.push([tt,be.bottom]),le.push([1,0])),Pe.push([be.left,Ue]),le.push([0,1]),Pe.push([Oe,be.bottom]),le.push([1,0])}var Ze=Rq((S.clipHorizontalGuidelines||[]).map(function(Tt){return to("".concat(Tt),U)}),(S.clipVerticalGuidelines||[]).map(function(Tt){return to("".concat(Tt),z)}),z,U),Qe=[],Ie=[];if(ce||_e)Qe=[Pe[4][0],Pe[2][0]],Ie=[Pe[1][1],Pe[3][1]];else if(ae){var Mt=[Pe[0],Pe[2],Pe[4],Pe[6]],ot=[le[0],le[2],le[4],le[6]];Qe=Mt.filter(function(Tt,Yt){return ot[Yt][0]}).map(function(Tt){return Tt[0]}),Ie=Mt.filter(function(Tt,Yt){return ot[Yt][1]}).map(function(Tt){return Tt[1]})}else Qe=Pe.filter(function(Tt,Yt){return le[Yt][0]}).map(function(Tt){return Tt[0]}),Ie=Pe.filter(function(Tt,Yt){return le[Yt][1]}).map(function(Tt){return Tt[1]});var $e=[0,0],tr=fN(Ze,S.clipTargetBounds&&{left:0,top:0,right:z,bottom:U},Qe,Ie,5,5),Wt=tr.horizontal,Gt=tr.vertical,at=Wt.offset,dr=Gt.offset;if(Wt.isBound&&($e[1]+=at),Gt.isBound&&($e[0]+=dr),(_e||ce)&&le[0][0]===0&&le[0][1]===0){var be=Dc(we),hr=be.bottom-be.top,ur=_e?be.right-be.left:hr,Cr=Gt.isBound?en(dr):Gt.snapIndex===0?-dr:dr,br=Wt.isBound?en(at):Wt.snapIndex===0?-at:at;ur-=Cr,hr-=br,ce&&(hr=Eq(Gt,Wt)>0?hr:ur,ur=hr);var nr=Pe[0];Pe[1][1]=nr[1]-hr,Pe[2][0]=nr[0]+ur,Pe[3][1]=nr[1]+hr,Pe[4][0]=nr[0]-ur}else if(ae&&I&&h){var lr=Kt(n$(ie),2),Pr=lr[0],ar=lr[1],kr=Pr&&ar?Pr/ar:0,Qt=ie[x],Ht=Qt.direction||"",Ct=Pe[1][1],Ue=Pe[5][1],Oe=Pe[7][0],tt=Pe[3][0];en(at)<=en(dr)?at=Tu(at)*en(dr)/kr:dr=Tu(dr)*en(at)*kr,Ht.indexOf("w")>-1?Oe-=dr:Ht.indexOf("e")>-1?tt-=dr:(Oe+=dr/2,tt-=dr/2),Ht.indexOf("n")>-1?Ct-=at:Ht.indexOf("s")>-1?Ue-=at:(Ct+=at/2,Ue-=at/2);var Re=rx(Ct,tt,Ue,Oe);Pe.forEach(function(wt,Xt){var Et;Et=Kt(Re[Xt].pos,2),wt[0]=Et[0],wt[1]=Et[1]})}else Pe.forEach(function(Tt,Yt){var Bt=le[Yt];Bt[0]&&(Tt[0]-=dr),Bt[1]&&(Tt[1]-=at)});var Be=BI(e,b,we),De="".concat(X,"(").concat(Be.join(ee),")");if(q.clipPathState=De,ce||_e)Qe=[Pe[4][0],Pe[2][0]],Ie=[Pe[1][1],Pe[3][1]];else if(ae){var Mt=[Pe[0],Pe[2],Pe[4],Pe[6]];Qe=Mt.map(function(Yt){return Yt[0]}),Ie=Mt.map(function(Yt){return Yt[1]})}else Qe=Pe.map(function(Tt){return Tt[0]}),Ie=Pe.map(function(Tt){return Tt[1]});if(q.snapBoundInfos=fN(Ze,S.clipTargetBounds&&{left:0,top:0,right:z,bottom:U},Qe,Ie,1,1),O){var rt=q.is3d,mt=q.allMatrix,At=rt?4:3,Ot=$e;a&&(Ot=[D[0]+$e[0]-F[0],D[1]+$e[1]-F[1]]),O.deltaOffset=ro(mt,[Ot[0],Ot[1],0,0],At)}return jn(e,"onClip",Fi(e,t,Ut({clipEventType:"changed",clipType:X,poses:we,clipStyle:De,clipStyles:Be,distX:k,distY:M},Pu((i={},i[X==="rect"?"clip":"clipPath"]=De,i),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,n=t.datas,i=t.isDouble,o=n.isLine,l=n.isClipStart,a=n.isControl;return l?(jn(e,"onClipEnd",yc(e,t,{})),i&&(a?Rde(e,t):o&&Lde(e,t)),i||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},Nde={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":ll(t.inputEvent.target,li("origin"))},dragControlStart:function(e,t){var r=t.datas;sm(e,t);var n=Fi(e,t,{dragStart:Eu.dragStart(e,new ny().dragStart([0,0],t))}),i=jn(e,"onDragOriginStart",n);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,i===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(e,t){var r=t.datas,n=t.isPinch,i=t.isRequest;if(!r.isDragOrigin)return!1;var o=Kt(af(t),2),l=o[0],a=o[1],c=e.state,h=c.width,g=c.height,v=c.offsetMatrix,x=c.targetMatrix,b=c.is3d,S=e.props.originRelative,I=S===void 0?!0:S,k=b?4:3,M=[l,a];if(i){var O=t.distOrigin;(O[0]||O[1])&&(M=O)}var F=ha(r.startOrigin,M),D=ha(r.startTargetOrigin,M),q=ci(M,r.prevOrigin),z=g1(v,x,F,k),U=e.getRect(),H=Dc(lm(z,h,g,k)),X=[U.left-H.left,U.top-H.top];r.prevOrigin=M;var ie=[nd(D[0],h,I),nd(D[1],g,I)].join(" "),ee=Eu.drag(e,m1(t,e.state,X,!!n)),G=Fi(e,t,Ut(Ut({width:h,height:g,origin:F,dist:M,delta:q,transformOrigin:ie,drag:ee},Pu({transformOrigin:ie,transform:ee.transform},t)),{afterTransform:ee.transform}));return jn(e,"onDragOrigin",G),G},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(jn(e,"onDragOriginEnd",yc(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=r.transformOrigin,l=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(a){return"deltaOrigin"in a?(l[0]+=a.deltaOrigin[0],l[1]+=a.deltaOrigin[1]):"origin"in a?(l[0]=a.origin[0]-o[0],l[1]=a.origin[1]-o[1]):("x"in a?n=a.x-r.left:"deltaX"in a&&(n+=a.deltaX),"y"in a?i=a.y-r.top:"deltaY"in a&&(i+=a.deltaY)),{datas:t,distX:n,distY:i,distOrigin:l}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ode(e,t,r,n){var i=e.filter(function(c){var h=c.virtual,g=c.horizontal;return g&&!h}).length,o=e.filter(function(c){var h=c.virtual,g=c.vertical;return g&&!h}).length,l=-1;if(t===0&&(i===0?l=0:i===1&&(l=1)),t===2&&(i<=2?l=2:i<=3&&(l=3)),t===3&&(o===0?l=4:o<4&&(l=7)),t===1&&(o<=1?l=5:o<=2&&(l=6)),!(l===-1||!e[l].virtual)){var a=e[l];Fde(e,l),l<4?a.pos[0]=r:a.pos[1]=n}}function Fde(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function Bde(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function kN(e,t,r,n,i){n===void 0&&(n=[0,0]);var o=[];return!e||e==="0px"?o=[]:o=Oh(e),r$(o,t,r,0,0,n,i)}function AN(e,t,r,n,i){var o=e.state,l=o.width,a=o.height,c=FI(i,e.props.roundRelative,l,a),h=c.raws,g=c.styles,v=c.radiusPoses,x=Ide(v,h),b=x.horizontals,S=x.verticals,I=g.join(" ");o.borderRadiusState=I;var k=Fi(e,t,Ut({horizontals:b,verticals:S,borderRadius:I,width:l,height:a,delta:n,dist:r},Pu({borderRadius:I},t)));return jn(e,"onRound",k),k}function MN(e){var t,r,n=e.getState().style,i=n.borderRadius||"";if(!i&&e.props.groupable){var o=e.moveables[0],l=e.getTargets()[0];l&&(o?.props.target===l?(i=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=i):(i=LI(l).borderRadius,n.borderRadius=i))}return i}var zde={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?li("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),n=r.target,i=r.width,o=r.height,l=r.allMatrix,a=r.is3d,c=r.left,h=r.top,g=r.borderRadiusState,v=e.props,x=v.minRoundControls,b=x===void 0?[0,0]:x,S=v.maxRoundControls,I=S===void 0?[4,4]:S,k=v.zoom,M=v.roundPadding,O=M===void 0?0:M,F=v.isDisplayShadowRoundControls,D=v.groupable;if(!n)return null;var q=g||MN(e),z=a?4:3,U=kN(q,i,o,b,!0);if(!U)return null;var H=0,X=0,ie=D?[0,0]:[c,h];return U.map(function(ee,G){var ne=ee.horizontal,ae=ee.vertical,le=ee.direction||"",fe=dn([],Kt(ee.pos),!1);X+=Math.abs(ne),H+=Math.abs(ae),ne&&le.indexOf("n")>-1&&(fe[1]-=O),ae&&le.indexOf("w")>-1&&(fe[0]-=O),ne&&le.indexOf("s")>-1&&(fe[1]+=O),ae&&le.indexOf("e")>-1&&(fe[0]+=O);var ke=ci(Zo(l,fe,z),ie),me=F&&F!=="horizontal",Se=ee.vertical?H<=I[1]&&(me||!ee.virtual):X<=I[0]&&(F||!ee.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(G),className:li("control","border-radius",ee.vertical?"vertical":"",ee.virtual?"virtual":""),"data-radius-index":G,style:{display:Se?"block":"none",transform:"translate(".concat(ke[0],"px, ").concat(ke[1],"px) scale(").concat(k,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,n=t.datas,i=r.target,o=i.getAttribute("class")||"",l=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,c=l?parseInt(i.getAttribute("data-radius-index"),10):-1,h=-1;if(a){var g=i.getAttribute("data-line-key")||"";g&&(h=parseInt(g.replace(/render-line-/g,""),10),isNaN(h)&&(h=-1))}if(!l&&!a)return!1;var v=Fi(e,t,{}),x=jn(e,"onRoundStart",v);if(x===!1)return!1;n.lineIndex=h,n.controlIndex=c,n.isControl=l,n.isLine=a,sm(e,t);var b=e.props,S=b.roundRelative,I=b.minRoundControls,k=I===void 0?[0,0]:I,M=e.state,O=M.width,F=M.height;n.isRound=!0,n.prevDist=[0,0];var D=MN(e),q=kN(D||"",O,F,k,!0)||[];return n.controlPoses=q,M.borderRadiusState=FI(q,S,O,F).styles.join(" "),v},dragControl:function(e,t){var r=t.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,o=Kt(af(t),2),l=o[0],a=o[1],c=[l,a],h=ci(c,r.prevDist),g=e.props.maxRoundControls,v=g===void 0?[4,4]:g,x=e.state,b=x.width,S=x.height,I=n[i],k=I.vertical,M=I.horizontal,O=n.map(function(D){var q=D.horizontal,z=D.vertical,U=[q*M*c[0],z*k*c[1]];if(q){if(v[0]===1)return U;if(v[0]<4&&q!==M)return U}else{if(v[1]===0)return U[1]=z*M*c[0]/b*S,U;if(k){if(v[1]===1)return U;if(v[1]<4&&z!==k)return U}}return[0,0]});O[i]=c;var F=n.map(function(D,q){return Ut(Ut({},D),{pos:ha(D.pos,O[q])})});return i<4?F.slice(0,i+1).forEach(function(D){D.virtual=!1}):F.slice(4,i+1).forEach(function(D){D.virtual=!1}),r.prevDist=[l,a],AN(e,t,c,h,F)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var n=t.datas,i=t.isDouble;if(!n.isRound)return!1;var o=n.isControl,l=n.controlIndex,a=n.isLine,c=n.lineIndex,h=n.controlPoses,g=h.filter(function(M){var O=M.virtual;return O}).length,v=e.props.roundClickable,x=v===void 0?!0:v;if(i&&x){if(o&&(x===!0||x==="control"))Bde(h,l);else if(a&&(x===!0||x==="line")){var b=Kt(sq(e,t),2),S=b[0],I=b[1];Ode(h,c,S,I)}g!==h.filter(function(M){var O=M.virtual;return O}).length&&AN(e,t,[0,0],[0,0],h)}var k=yc(e,t,{});return jn(e,"onRoundEnd",k),r.borderRadiusState="",k},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=ud(e,"roundable",t),l=Ut({targets:e.props.targets,events:o.map(function(a,c){return Ut(Ut({},a),{target:i[c],moveable:n[c],currentTarget:n[c]})})},r);return jn(e,"onRoundGroupStart",l),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=ud(e,"roundable",t),l=Ut({targets:e.props.targets,events:o.map(function(a,c){return Ut(Ut(Ut({},a),{target:i[c],moveable:n[c],currentTarget:n[c]}),Pu({borderRadius:r.borderRadius},a))})},r);return jn(e,"onRoundGroup",l),l},dragGroupControlEnd:function(e,t){var r=e.moveables,n=e.props.targets,i=ud(e,"roundable",t);O2(e,"onRound",function(a){var c=Ut({targets:e.props.targets,events:i.map(function(h,g){return Ut(Ut(Ut({},h),{target:n[g],moveable:r[g],currentTarget:r[g]}),Pu({borderRadius:a.borderRadius},h))})},a);jn(e,"onRoundGroup",c)});var o=this.dragControlEnd(e,t);if(!o)return!1;var l=Ut({targets:e.props.targets,events:i.map(function(a,c){var h;return Ut(Ut({},a),{target:n[c],moveable:r[c],currentTarget:r[c],lastEvent:(h=a.datas)===null||h===void 0?void 0:h.lastEvent})})},o);return jn(e,"onRoundGroupEnd",l),l},unset:function(e){e.state.borderRadiusState=""}};function jde(e,t){var r=t?4:3,n=To(r),i="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return e===i||e==="matrix(1,0,0,1,0,0)"}var i$={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,i=r.targetMatrix,o=r.inlineTransform,l=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Yj(i,!0),")"),a=!o||o==="none"?l:o;t.datas.startTransforms=jde(a,n)?[]:Oh(a)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return Fi(e,t,{setTransform:function(r){t.datas.startTransforms=Tl(r)?r:Oh(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return Fi(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),jn(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),jn(e,"onBeforeRender",Fi(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),jn(e,"onBeforeRenderEnd",Fi(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.setTransform(c,l),r.resetStyle(l),r.fillDragStartParams(c,l)});jn(e,"onBeforeRenderGroupStart",Fi(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:o}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.resetStyle(l),r.fillDragParams(c,l)});jn(e,"onBeforeRenderGroup",Fi(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:o}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),jn(e,"onBeforeRenderGroupEnd",Fi(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},a$={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){jn(e,"onRenderStart",Fi(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){jn(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){jn(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){jn(e,"onRenderGroupStart",Fi(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.fillDragParams(c,l)});jn(e,"onRenderGroup",Fi(e,t,Ut(Ut({isPinch:!!t.isPinch,targets:e.props.targets,transform:kb(t),transformObject:{}},Pu(Ab(t))),{events:o})))},dragGroupEnd:function(e,t){var r=this,n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.fillDragEndParams(c,l)});jn(e,"onRenderGroupEnd",Fi(e,t,Ut({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:o,transformObject:{},transform:kb(t)},Pu(Ab(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return ry(Y_(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Fi(e,t,Ut({isPinch:!!t.isPinch,transformObject:r,transform:kb(t)},Pu(Ab(t))))},fillDragEndParams:function(e,t){var r={};return ry(Y_(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Fi(e,t,Ut({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:kb(t)},Pu(Ab(t))))}};function c0(e,t,r,n,i,o,l){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=i==="Start",c=i==="End",h=i==="After",g=e.state.target,v=o.isRequest,x=n.indexOf("Control")>-1;if(!g||a&&x&&!v&&e.areaElement===o.inputEvent.target)return!1;var b=dn([],Kt(t),!1);if(v){var S=o.requestAble;b.some(function(G){return G.name===S})||b.push.apply(b,dn([],Kt(e.props.ables.filter(function(G){return G.name===S})),!1))}if(!b.length||b.every(function(G){return G.dragRelation}))return!1;var I=o.inputEvent,k;c&&I&&(k=document.elementFromPoint(o.clientX,o.clientY)||I.target);var M=!1,O=function(){var G;M=!0,(G=o.stop)===null||G===void 0||G.call(o)},F=a&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());F&&e.updateRect(i,!0,!1);var D=o.datas,q=x?"controlGesto":"targetGesto",z=e[q],U=function(G,ne,ae){if(!(ne in G)||z!==e[q])return!1;var le=G.name,fe=D[le]||(D[le]={});if(a&&(fe.isEventStart=!ae||!G[ae]||G[ae](e,o)),!fe.isEventStart)return!1;var ke=G[ne](e,Ut(Ut({},o),{stop:O,datas:fe,originalDatas:D,inputTarget:k}));return e._emitter.off(),a&&ke===!1&&(fe.isEventStart=!1),ke};F&&b.forEach(function(G){G.unset&&G.unset(e)}),U(i$,"drag".concat(n).concat(i));var H=0,X=0;r.forEach(function(G){if(M)return!1;var ne="".concat(G).concat(n).concat(i),ae="".concat(G).concat(n,"Condition");i===""&&!v&&ude(e.state,o);var le=b.filter(function(me){return me[ne]});le=le.filter(function(me,Se){return me.name&&le.indexOf(me)===Se});var fe=le.filter(function(me){return U(me,ne,ae)}),ke=fe.length;M&&++H,ke&&++X,!M&&a&&le.length&&!ke&&(H+=le.filter(function(me){var Se=me.name,we=D[Se];return we.isEventStart?me.dragRelation!=="strong":!1}).length?1:0)}),(!h||X)&&U(a$,"drag".concat(n).concat(i));var ie=z!==e[q]||H===r.length;if((c||M||ie)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(G){G.state.gestos={}}),b.forEach(function(G){G.unset&&G.unset(e)})),a&&!ie&&!v&&X&&e.props.preventDefault&&o?.preventDefault(),e.isUnmounted||ie)return!1;if(!a&&X&&!l||c){var ee=e.props.flushSync||Oq;ee(function(){e.updateRect(c?i:"",!0,!1),e.forceUpdate()})}return!a&&!c&&!h&&X&&!l&&c0(e,t,r,n,i+"After",o),!0}function zI(e,t){return function(r,n){var i;n===void 0&&(n=r.inputEvent.target);var o=n,l=e.areaElement,a=e._dragTarget;return!a||!t&&(!((i=e.controlGesto)===null||i===void 0)&&i.isFlag())?!1:o===a||a.contains(o)||o===l||!e.isMoveableElement(o)&&!e.controlBox.contains(o)||ll(o,"moveable-area")||ll(o,"moveable-padding")||ll(o,"moveable-edgeDraggable")}}function o$(e,t,r){var n=e.controlBox,i=[],o=e.props,l=o.dragArea,a=e.state.target,c=o.dragTarget;i.push(n),(!l||c)&&i.push(t),!l&&c&&a&&t!==a&&o.dragTargetSelf&&i.push(a);var h=zI(e);return l$(e,i,"targetAbles",r,{dragStart:h,pinchStart:h})}function s$(e,t){var r=e.controlBox,n=[];n.push(r);var i=zI(e,!0),o=function(l,a){if(a===void 0&&(a=l.inputEvent.target),a===r)return!0;var c=i(l,a);return!c};return l$(e,n,"controlAbles",t,{dragStart:o,pinchStart:o})}function l$(e,t,r,n,i){i===void 0&&(i={});var o=r==="targetAbles",l=e.props,a=l.pinchOutside,c=l.pinchThreshold,h=l.preventClickEventOnDrag,g=l.preventClickDefault,v=l.checkInput,x=l.dragFocusedInput,b=l.preventDefault,S=b===void 0?!0:b,I=l.preventRightClick,k=I===void 0?!0:I,M=l.preventWheelClick,O=M===void 0?!0:M,F=l.dragContainer,D=Xd(F,!0),q={preventDefault:S,preventRightClick:k,preventWheelClick:O,container:D||Mh(e.getControlBoxElement()),pinchThreshold:c,pinchOutside:a,preventClickEventOnDrag:o?h:!1,preventClickEventOnDragStart:o?g:!1,preventClickEventByCondition:o?null:function(H){return e.controlBox.contains(H.target)},checkInput:o?v:!1,dragFocusedInput:x},z=new fue(t,q),U=n==="Control";return["drag","pinch"].forEach(function(H){["Start","","End"].forEach(function(X){z.on("".concat(H).concat(X),function(ie){var ee,G=ie.eventType,ne=H==="drag"&&ie.isPinch;if(i[G]&&!i[G](ie)){ie.stop();return}if(!ne){var ae=H==="drag"?[H]:["drag",H],le=dn([],Kt(e[r]),!1),fe=c0(e,le,ae,n,X,ie);fe?(e.props.stopPropagation||X==="Start"&&U)&&((ee=ie?.inputEvent)===null||ee===void 0||ee.stopPropagation()):ie.stop()}})})}),z}var qde=(function(){function e(t,r,n){var i=this;this.target=t,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(o){var l=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(c){c[l](a,{inputEvent:o})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e})();function $de(e,t,r,n){var i;r===void 0&&(r=t);var o=hq(e,t),l=o.matrixes,a=o.is3d,c=o.targetMatrix,h=o.transformOrigin,g=o.targetOrigin,v=o.offsetContainer,x=o.hasFixed,b=o.zoom,S=rce(v,r),I=S.matrixes,k=S.is3d,M=S.offsetContainer,O=S.zoom,F=n,D=4,q=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,z=c,U=To(D),H=To(D),X=To(D),ie=To(D),ee=l.length,G=I.map(function(Se){return Ut(Ut({},Se),{matrix:Se.matrix?dn([],Kt(Se.matrix),!1):void 0})}).reverse();l.reverse(),!a&&F&&(z=hd(z,3,4),UT(l)),!k&&F&&UT(G),G.forEach(function(Se){H=ro(H,Se.matrix,D)});var ne=r||Wh(e),ae=((i=G[0])===null||i===void 0?void 0:i.target)||A0(ne,ne,!0).offsetParent,le=G.slice(1).reduce(function(Se,we){return ro(Se,we.matrix,D)},To(D));l.forEach(function(Se,we){if(ee-2===we&&(X=U.slice()),ee-1===we&&(ie=U.slice()),!Se.matrix){var Pe=l[we+1],ce=ade(Se,Pe,ae,D,ro(le,U,D));Se.matrix=Gp(ce,D)}U=ro(U,Se.matrix,D)});var fe=!q&&a;z||(z=To(fe?4:3));var ke=N2(q&&z.length===16?hd(z,4,3):z,fe),me=H;return H=Wj(H,D,D),{hasZoom:b!==1||O!==1,hasFixed:x,matrixes:l,rootMatrix:H,originalRootMatrix:me,beforeMatrix:X,offsetMatrix:ie,allMatrix:U,targetMatrix:z,targetTransform:ke,inlineTransform:e.style.transform,transformOrigin:h,targetOrigin:g,is3d:F,offsetContainer:v,offsetRootContainer:M}}function Vde(e,t,r,n){r===void 0&&(r=t);var i=0,o=0,l=0,a={},c=jq(e);if(e&&(i=c.offsetWidth,o=c.offsetHeight),e){var h=$de(e,t,r,n),g=Vg(h.allMatrix,h.transformOrigin,i,o);a=Ut(Ut({},h),g);var v=Vg(h.allMatrix,[50,50],100,100);l=qq([v.pos1,v.pos2],v.direction)}var x=4;return Ut(Ut(Ut({hasZoom:!1,width:i,height:o,rotation:l},c),{originalRootMatrix:To(x),rootMatrix:To(x),beforeMatrix:To(x),offsetMatrix:To(x),allMatrix:To(x),targetMatrix:To(x),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function XT(e,t,r,n,i,o){o===void 0&&(o=[]);var l=1,a=[0,0],c=Lb(),h=Lb(),g=Lb(),v=Lb(),x=[0,0],b={},S=Vde(t,r,i,!0);if(t){var I=Xu(t);o.forEach(function(G){b[G]=I(G)});var k=S.is3d?4:3,M=Vg(S.offsetMatrix,ha(S.transformOrigin,Xj(S.targetMatrix,k)),S.width,S.height);l=M.direction,a=ha(M.origin,[M.left-S.left,M.top-S.top]),v=u0(S.offsetRootContainer);var O=A0(n,n,!0).offsetParent||S.offsetRootContainer;if(S.hasZoom){var F=Vg(ro(S.originalRootMatrix,S.allMatrix),S.transformOrigin,S.width,S.height),D=Vg(S.originalRootMatrix,Q_(Xu(O)("transformOrigin")).map(function(G){return parseFloat(G)}),O.offsetWidth,O.offsetHeight);if(c=s5(F,v),g=s5(D,v,O,!0),e){var q=F.left,z=F.top;h=s5({left:q,top:z,bottom:z,right:z},v)}}else{c=u0(t),g=tce(O),e&&(h=u0(e));var U=g.left,H=g.top,X=g.clientLeft,ie=g.clientTop,ee=[c.left-U,c.top-H];x=ci(oy(S.rootMatrix,ee,4),[X+S.left,ie+S.top])}}return Ut({targetClientRect:c,containerClientRect:g,moveableClientRect:h,rootContainerClientRect:v,beforeDirection:l,beforeOrigin:a,originalBeforeOrigin:a,target:t,style:b,offsetDelta:x},S)}function LN(e){var t=e.pos1,r=e.pos2,n=e.pos3,i=e.pos4;if(!t||!r||!n||!i)return null;var o=Hp([t,r,n,i]),l=[o.minX,o.minY],a=ci(e.origin,l);return t=ci(t,l),r=ci(r,l),n=ci(n,l),i=ci(i,l),Ut(Ut({},e),{left:e.left,top:e.top,posDelta:l,pos1:t,pos2:r,pos3:n,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var sy=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=Ut({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},XT(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new yI,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}Tle(r._observerId),r._observerId=$j(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return t.prototype.render=function(){var r=this.props,n=this.getState(),i=r.parentPosition,o=r.className,l=r.target,a=r.zoom,c=r.cspNonce,h=r.translateZ,g=r.cssStyled,v=r.groupable,x=r.linePadding,b=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var S=Kt(i||[0,0],2),I=S[0],k=S[1],M=n.left,O=n.top,F=n.target,D=n.direction,q=n.hasFixed,z=n.offsetDelta,U=r.targets,H=this.isDragging(),X={};this.getEnabledAbles().forEach(function(le){X["data-able-".concat(le.name.toLowerCase())]=!0});var ie=this._getAbleClassName(),ee=U&&U.length&&(F||v)||l||!this._hasFirstTarget&&this.state.isPersisted,G=this.controlBox||this.props.firstRenderState||this.props.persistData,ne=[M-I,O-k];!v&&r.useAccuratePosition&&(ne[0]+=z[0],ne[1]+=z[1]);var ae={position:q?"fixed":"absolute",display:ee?"block":"none",visibility:G?"visible":"hidden",transform:"translate3d(".concat(ne[0],"px, ").concat(ne[1],"px, ").concat(h,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return x&&(ae["--moveable-line-padding"]=x),b&&(ae["--moveable-control-padding"]=b),J.createElement(g,Ut({cspNonce:c,ref:Fp(this,"controlBox"),className:"".concat(li("control-box",D===-1?"reverse":"",H?"dragging":"")," ").concat(ie," ").concat(o)},X,{onClick:this._onPreventClick,style:ae}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,i=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Lg(this,!1),Lg(this,!0);var o=this.events;for(var l in o){var a=o[l];a&&a.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var n=this.props.ables||[];return gc(n,function(i){return i.name===r})},t.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,i=r.wrapperMoveable,o=r.container;return o||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(_I)>-1},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=this.targetGesto,o=this.controlGesto;return i&&zI(this)({inputEvent:r},n)?i.isFlag()||i.triggerDragStart(r):o&&this.isMoveableElement(n)&&(o.isFlag()||o.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var n=this.state,i=n.target,o=n.pos1,l=n.pos2,a=n.pos3,c=n.pos4,h=n.targetClientRect;if(!i)return 0;var g;if(hI(r)){var v=r.getBoundingClientRect();g={left:v.left,top:v.top,width:v.width,height:v.height}}else g=Ut({width:0,height:0},r);var x=g.left,b=g.top,S=g.width,I=g.height,k=tN([o,l,c,a],h),M=oue(k,[[x,b],[x+S,b],[x+S,b+I],[x,b+I]]),O=Jj(k);return!M||!O?0:Math.min(100,M/O*100)},t.prototype.isInside=function(r,n){var i=this.state,o=i.target,l=i.pos1,a=i.pos2,c=i.pos3,h=i.pos4,g=i.targetClientRect;return o?MT([r,n],tN([l,a,h,c],g)):!1},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0);var o=this.props,l=!o.parentPosition&&!o.wrapperMoveable;l&&iy(!0);var a=o.parentMoveable,c=this.state,h=c.target||o.target,g=this.getContainer(),v=a?a._rootContainer:this._rootContainer,x=XT(this.controlBox,h,g,g,v||g,this._getRequestStyles());if(!h&&this._hasFirstTarget&&o.persistData){var b=LN(o.persistData);for(var S in b)x[S]=b[S]}l&&iy(),this.updateState(x,a?!1:i)},t.prototype.isDragging=function(r){var n,i,o=this.targetGesto,l=this.controlGesto;if(o?.isFlag()){if(!r)return!0;var a=o.getEventData();return!!(!((n=a[r])===null||n===void 0)&&n.isEventStart)}if(l?.isFlag()){if(!r)return!0;var a=l.getEventData();return!!(!((i=a[r])===null||i===void 0)&&i.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,n=qc(this.state),i=Kt(n,4),o=i[0],l=i[1],a=i[2],c=i[3],h=Dc(n),g=r.width,v=r.height,x=h.width,b=h.height,S=h.left,I=h.top,k=[r.left,r.top],M=ha(k,r.origin),O=ha(k,r.beforeOrigin),F=r.transformOrigin;return{width:x,height:b,left:S,top:I,pos1:o,pos2:l,pos3:a,pos4:c,offsetWidth:g,offsetHeight:v,beforeOrigin:O,origin:M,transformOrigin:F,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;n?.isIdle()===!1&&GT(this,!1),n?.stop()}if(!r||r==="control"){var n=this.controlGesto;n?.isIdle()===!1&&GT(this,!0),n?.stop()}},t.prototype.getRotation=function(){var r=this.state,n=r.pos1,i=r.pos2,o=r.direction;return fde(n,i,o)},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this,l=o.props,a=l.parentMoveable||l.wrapperMoveable||o,c=a.props.ables,h=l.groupable,g=gc(c,function(M){return M.name===r});if(this.isDragging()||!g||!g.request)return{request:function(){return this},requestEnd:function(){return this}};var v=g.request(o),x=i||n.isInstant,b=v.isControl?"controlAbles":"targetAbles",S="".concat(h?"Group":"").concat(v.isControl?"Control":""),I=dn([],Kt(a[b]),!1),k={request:function(M){return c0(o,I,["drag"],S,"",Ut(Ut({},v.request(M)),{requestAble:r,isRequest:!0}),x),k},requestEnd:function(){return c0(o,I,["drag"],S,"End",Ut(Ut({},v.requestEnd()),{requestAble:r,isRequest:!0}),x),k}};return c0(o,I,["drag"],S,"Start",Ut(Ut({},v.requestStart(n)),{requestAble:r,isRequest:!0}),x),x?k.request(n).requestEnd():k},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,i=n.padding,o=r.originalBeforeOrigin,l=r.transformOrigin,a=r.allMatrix,c=r.is3d,h=r.pos1,g=r.pos2,v=r.pos3,x=r.pos4,b=r.left,S=r.top,I=r.isPersisted,k=n.zoom||1;if(!i&&k<=1){r.renderPoses=[h,g,v,x],r.renderLines=[[h,g],[g,x],[x,v],[v,h]];return}var M=Kq(i||{}),O=M.left,F=M.top,D=M.bottom,q=M.right,z=c?4:3,U=[];I?U=l:this.controlBox&&n.groupable?U=o:U=ha(o,[b,S]);var H=W_(z,Gp(U.map(function(ae){return-ae}),z),a,Gp(l,z)),X=Cc(H,h,[-O,-F],z),ie=Cc(H,g,[q,-F],z),ee=Cc(H,v,[-O,D],z),G=Cc(H,x,[q,D],z);r.renderPoses=[X,ie,ee,G],r.renderLines=[[X,ie],[ie,G],[G,ee],[ee,X]];{var ne=k/2;r.renderLines=[[Cc(H,h,[-O-ne,-F],z),Cc(H,g,[q+ne,-F],z)],[Cc(H,g,[q,-F-ne],z),Cc(H,x,[q,D+ne],z)],[Cc(H,x,[q+ne,D],z),Cc(H,v,[-O-ne,D],z)],[Cc(H,v,[-O,D+ne],z),Cc(H,h,[-O,-F-ne],z)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,i=r.container,o=r.parentMoveable,l=this.state,a=l.target,c=l.container;if(!(!a&&!n)){this.updateAbles();var h=!HT(a,n),g=h||!HT(c,i);if(g){var v=i||this.controlBox;v&&this.unsetAbles(),this.updateState({target:n,container:i}),!o&&v&&this.updateRect("End",!1,!1),this._isPropTargetChanged=h}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,n){var i=this.props;if(this._emitter.trigger(r,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(r,n,!0);var o=i[r];return o&&o(n)},t.prototype.useCSS=function(r,n){var i=this.props.customStyledMap,o=r+n;return i[o]||(i[o]=tq(r,n)),i[o]},t.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=n.persistData,l=n.firstRenderState;if(l&&!i)return l;if(!this._hasFirstTarget&&o){var a=LN(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},t.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var i=this.props,o=i.triggerAblesSimultaneously,l=this.getEnabledAbles(r),a="drag".concat(n,"Start"),c="pinch".concat(n,"Start"),h="drag".concat(n,"ControlStart"),g=Rb(l,[a,c],o),v=Rb(l,[h],o);this.enabledAbles=l,this.targetAbles=g,this.controlAbles=v},t.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var o in r)i[o]=r[o]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},t.prototype.renderAbles=function(){var r=this,n=this.props,i=n.triggerAblesSimultaneously,o={createElement:J.createElement};return this.renderState={},lde(Wq(Rb(this.getEnabledAbles(),["render"],i).map(function(l){var a=l.render;return a(r,o)||[]})).filter(function(l){return l}),function(l){var a=l.key;return a}).map(function(l){return l[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,l,a=(l=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&l!==void 0?l:[];return dn(dn([],Kt(n),!1),Kt(a),!1)},dn([],Kt(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,i=this._dragTarget,o=!r&&this.targetGesto||this._isTargetChanged(!0);o&&(Lg(this,!1),this.updateState({gestos:{}})),n||Lg(this,!0),i&&r&&!this.targetGesto&&(this.targetGesto=o$(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=s$(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=Xd(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,n=r,i=n.zoom,o=n.hideDefaultLines,l=n.hideChildMoveableDefaultLines,a=n.parentMoveable;if(o||a&&l)return[];var c=this.getState(),h={createElement:J.createElement};return c.renderLines.map(function(g,v){return k0(h,"",g[0],g[1],i,"render-line-".concat(v))})},t.prototype._isTargetChanged=function(r){var n=this.props,i=n.dragTarget||n.target,o=this._prevOriginalDragTarget,l=this._prevDragArea,a=n.dragArea,c=!a&&o!==i,h=(r||a)&&l!==a;return c||h||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,o=this.events,l=_y(o);if(this._isTargetChanged())for(var a in o){var c=o[a];c&&c.destroy(),o[a]=null}if(i){var h=this.enabledAbles;l.forEach(function(g){var v=Rb(h,[g]),x=v.length>0,b=o[g];if(!x){b&&(b.destroy(),o[g]=null);return}b||(b=new qde(i,r,g),o[g]=b),b.setAbles(v)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Xd(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Xd(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(dn(dn([],Kt(this._getAbleViewClassNames()),!1),[this.isDragging()?bde:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,i=Hq(r.filter(Boolean),function(h){return h}).map(function(h){var g=Kt(h,1),v=g[0];return v}),o=this._viewClassNames,l=gI(o,i),a=l.removed,c=l.added;a.forEach(function(h){Gj(n,o[h])}),c.forEach(function(h){Uj(n,i[h])}),this._viewClassNames=i},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var i=this.getEnabledAbles(),o=this.targetGesto,l=this.controlGesto,a=o?.isFlag()?o.getEventData():{},c=l?.isFlag()?l.getEventData():{};return i.map(function(h){var g,v,x,b=h.name,S=((g=h.className)===null||g===void 0?void 0:g.call(h,n))||"";return(!((v=a[b])===null||v===void 0)&&v.isEventStart||!((x=c[b])===null||x===void 0)&&x.isEventStart)&&(S+=" ".concat(li("".concat(b).concat(r,"-dragging")))),S.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var n,i=this.props,o=i.target,l=Mh(this.getControlBoxElement());if(!l.ResizeObserver||!o||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===o&&this._reiszeObserver)){var a=new l.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},t.prototype._updateMutationObserver=function(r){var n=this,i,o=this.props,l=o.target,a=Mh(this.getControlBoxElement());if(!a.MutationObserver||!l||!o.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===l&&this._mutationObserver)){var c=new a.MutationObserver(function(h){var g,v;try{for(var x=Sue(h),b=x.next();!b.done;b=x.next()){var S=b.value;S.type==="attributes"&&S.attributeName==="style"&&n.checkUpdateRect()}}catch(I){g={error:I}}finally{try{b&&!b.done&&(v=x.return)&&v.call(x)}finally{if(g)throw g.error}}});c.observe(l,{attributes:!0}),this._mutationObserver=c}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Oq,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t})(J.PureComponent),jI={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,n=e.props,i=n.targets||[],o=e.getState(),l=o.left,a=o.top,c=o.isPersisted,h=n.zoom||1,g=e.renderGroupRects,v=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];c?i=v.map(function(){return null}):v=[];var x=Rg(e,"parentPosition",[l,a],function(S){return S.join(",")}),b=Rg(e,"requestStyles",e.getRequestChildStyles(),function(S){return S.join(",")});return e.moveables=e.moveables.slice(0,i.length),dn(dn([],Kt(i.map(function(S,I){return t.createElement(sy,{key:"moveable"+I,ref:Bj(e,"moveables",I),target:S,origin:!1,requestStyles:b,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[l,a],persistData:v[I],zoom:h})})),!1),Kt(Wq(g.map(function(S,I){var k=S.pos1,M=S.pos2,O=S.pos3,F=S.pos4,D=[k,M,O,F];return[[0,1],[1,3],[3,2],[2,0]].map(function(q,z){var U=Kt(q,2),H=U[0],X=U[1];return k0(t,"",ci(D[H],x),ci(D[X],x),h,"group-rect-".concat(I,"-").concat(z))})}))),!1)}},Ude=p1("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,i=t.inputTarget,o=e.isMoveableElement(i),l=!o&&e.controlBox.contains(i);if(!(!n||!i||t.isDrag||e.isMoveableElement(i)||l)){var a=r.contains(i);jn(e,"onClick",Fi(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:e.props.target,containsTarget:a}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(!(!r||!n||t.isDrag||e.isMoveableElement(n)||t.datas.inputTarget===n)){var i=e.props.targets,o=i.indexOf(n),l=o>-1,a=!1;o===-1&&(o=Gf(i,function(c){return c.contains(n)}),a=o>-1),jn(e,"onClickGroup",Fi(e,t,{isDouble:t.isDouble,targets:i,inputTarget:n,targetIndex:o,isTarget:l,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function Wm(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),Ut(Ut({},e),{datas:t})}var Gde=p1("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?gq(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&ll(i,li("direction"))&&ll(i,li("edge"))&&ll(i,li("edgeDraggable"))},dragStart:function(e,t){return Eu.dragStart(e,Wm(t))},drag:function(e,t){return Eu.drag(e,Wm(t))},dragEnd:function(e,t){return Eu.dragEnd(e,Wm(t))},dragGroupCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&ll(i,li("direction"))&&ll(i,li("line"))},dragGroupStart:function(e,t){return Eu.dragGroupStart(e,Wm(t))},dragGroup:function(e,t){return Eu.dragGroup(e,Wm(t))},dragGroupEnd:function(e,t){return Eu.dragGroupEnd(e,Wm(t))},unset:function(e){return Eu.unset(e)}}),u$={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Hde=[i$,e$,Yce,pde,Eu,Gde,qT,mde,yde,Mce,wde,Sde,_de,Nde,Dde,zde,jI,u$,Ude,Qq,a$];function RN(e,t){var r=Kt(e,3),n=r[0],i=r[1],o=r[2];return(n*t[0]+i*t[1]+o)/Math.sqrt(n*n+i*i)}function Ob(e,t){var r=Kt(e,2),n=r[0],i=r[1];return-n*t[0]-i*t[1]}function DN(e,t){return Math.max.apply(Math,dn([],Kt(e.map(function(r){var n=Kt(r,4),i=n[0],o=n[1],l=n[2],a=n[3];return Math.max(i[t],o[t],l[t],a[t])})),!1))}function NN(e,t){return Math.min.apply(Math,dn([],Kt(e.map(function(r){var n=Kt(r,4),i=n[0],o=n[1],l=n[2],a=n[3];return Math.min(i[t],o[t],l[t],a[t])})),!1))}function Wde(e,t){var r,n,i,o=[0,0],l=[0,0],a=[0,0],c=[0,0],h=0,g=0;if(!e.length)return{pos1:o,pos2:l,pos3:a,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:h,height:g,rotation:t};var v=Pi(t,ku);if(v%90){var x=v/180*Math.PI,b=Math.tan(x),S=-1/b,I=[FT,iN],k=[[0,0],[0,0]],M=[FT,iN],O=[[0,0],[0,0]];e.forEach(function(_e){_e.forEach(function(be){var Me=RN([-b,1,0],be),Le=RN([-S,1,0],be);I[0]>Me&&(k[0]=be,I[0]=Me),I[1]<Me&&(k[1]=be,I[1]=Me),M[0]>Le&&(O[0]=be,M[0]=Le),M[1]<Le&&(O[1]=be,M[1]=Le)})});var F=Kt(k,2),D=F[0],q=F[1],z=Kt(O,2),U=z[0],H=z[1],X=[-b,1,Ob([-b,1],D)],ie=[-b,1,Ob([-b,1],q)],ee=[-S,1,Ob([-S,1],U)],G=[-S,1,Ob([-S,1],H)];r=Kt([[X,ee],[X,G],[ie,ee],[ie,G]].map(function(_e){var be=Kt(_e,2),Me=be[0],Le=be[1];return vI(Me,Le)[0]}),4),o=r[0],l=r[1],a=r[2],c=r[3],h=M[1]-M[0],g=I[1]-I[0]}else{var ne=NN(e,0),ae=NN(e,1),le=DN(e,0),fe=DN(e,1);if(o=[ne,ae],l=[le,ae],a=[ne,fe],c=[le,fe],h=le-ne,g=fe-ae,v%180){var ke=[a,o,c,l];n=Kt(ke,4),o=n[0],l=n[1],a=n[2],c=n[3],h=fe-ae,g=le-ne}}if(v%360>180){var ke=[c,a,l,o];i=Kt(ke,4),o=i[0],l=i[1],a=i[2],c=i[3]}var me=Hp([o,l,a,c]),Se=me.minX,we=me.minY,Pe=me.maxX,ce=me.maxY;return{pos1:o,pos2:l,pos3:a,pos4:c,width:h,height:g,minX:Se,minY:we,maxX:Pe,maxY:ce,rotation:t}}function c$(e,t){var r=t.map(function(n){if(Tl(n)){var i=c$(e,n),o=i.length;return o>1?i:o===1?i[0]:null}else{var l=gc(e,function(a){var c=a.manager;return c.props.target===n});return l?(l.finded=!0,l.manager):null}}).filter(Boolean);return r.length===1&&Tl(r[0])?r[0]:r}var Xde=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new Kj,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){var o;i===void 0&&(i=!0);var l=this.state;if(!this.controlBox||l.isPersisted)return;iy(!0),this.moveables.forEach(function(Oe){Oe.updateRect(r,!1,!1)});var a=this.props,c=this.moveables,h=l.target||a.target,g=c.map(function(Oe){return{finded:!1,manager:Oe}}),v=this.props.targetGroups||[],x=c$(g,v),b=a.useDefaultGroupRotate;x.push.apply(x,dn([],Kt(g.filter(function(Oe){var tt=Oe.finded;return!tt}).map(function(Oe){var tt=Oe.manager;return tt})),!1));var S=[],I=!n||r!==""&&a.updateGroup,k=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var M=(o=a.persistData)===null||o===void 0?void 0:o.rotation;M!=null&&(k=M)}function O(Oe,tt,Ze){var Qe=Oe.map(function(Gt){if(Tl(Gt)){var at=O(Gt,tt),dr=[at.pos1,at.pos2,at.pos3,at.pos4];return S.push(at),{poses:dr,rotation:at.rotation}}else return{poses:qc(Gt.state),rotation:Gt.getRotation()}}),Ie=Qe.map(function(Gt){var at=Gt.rotation;return at}),Mt=0,ot=Ie[0],$e=Ie.every(function(Gt){return Math.abs(ot-Gt)<.1});I?Mt=!b&&$e?ot:k:Mt=!b&&!Ze&&$e?ot:tt;var tr=Qe.map(function(Gt){var at=Gt.poses;return at}),Wt=Wde(tr,Mt);return Wt}var F=O(x,this.rotation,!0);I&&(this.rotation=F.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=v,this.renderGroupRects=S;var D=this.transformOrigin,q=this.rotation,z=this.scale,U=F.width,H=F.height,X=F.minX,ie=F.minY,ee=hde([[0,0],[U,0],[0,H],[U,H]],OI(D,U,H),this.rotation/180*Math.PI),G=Hp(ee.result),ne=G.minX,ae=G.minY,le=" rotate(".concat(q,"deg)")+" scale(".concat(Tu(z[0]),", ").concat(Tu(z[1]),")"),fe="translate(".concat(-ne,"px, ").concat(-ae,"px)").concat(le);this.controlBox.style.transform="translate3d(".concat(X,"px, ").concat(ie,"px, ").concat(this.props.translateZ||0,")"),h.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(D,";")+"width:".concat(U,"px;height:").concat(H,"px;")+"transform: ".concat(fe),l.width=U,l.height=H;var ke=this.getContainer(),me=XT(this.controlBox,h,this.controlBox,this.getContainer(),this._rootContainer||ke,[]),Se=[me.left,me.top],we=Kt(qc(me),4),Pe=we[0],ce=we[1],_e=we[2],be=we[3],Me=Hp([Pe,ce,_e,be]),Le=[Me.minX,Me.minY],Ue=Tu(z[0]*z[1]);me.pos1=ci(Pe,Le),me.pos2=ci(ce,Le),me.pos3=ci(_e,Le),me.pos4=ci(be,Le),me.left=X-me.left+Le[0],me.top=ie-me.top+Le[1],me.origin=ci(ha(Se,me.origin),Le),me.beforeOrigin=ci(ha(Se,me.beforeOrigin),Le),me.originalBeforeOrigin=ha(Se,me.originalBeforeOrigin),me.transformOrigin=ci(ha(Se,me.transformOrigin),Le),h.style.transform="translate(".concat(-ne-Le[0],"px, ").concat(-ae-Le[1],"px)")+le,iy(),this.updateState(Ut(Ut({},me),{posDelta:Le,direction:Ue,beforeDirection:Ue}),i)},t.prototype.getRect=function(){return Ut(Ut({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,n,i){if(i||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,l,a=(l=(o=i.requestChildStyle)===null||o===void 0?void 0:o.call(i))!==null&&l!==void 0?l:[];return dn(dn([],Kt(n),!1),Kt(a),!1)},[]);return r},t.prototype.getMoveables=function(){return dn([],Kt(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,dn(dn([],Kt(this.props.ables),!1),[jI],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Xd(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,n=this.props,i=this._prevDragTarget,o=n.dragTarget||this.areaElement,l=n.targets,a=this.differ.update(l),c=a.added,h=a.changed,g=a.removed,v=c.length||g.length;(v||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Lg(this,!1),Lg(this,!0),this.updateState({gestos:{}})),i!==o&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=o$(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=s$(this,"GroupControl")));var x=!HT(r.container,n.container);x&&(r.container=n.container),(x||v||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||h.length||l.length&&!Zq(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},t.prototype._updateObserver=function(){},t.defaultProps=Ut(Ut({},sy.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t})(sy),Yde=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,n,i=this.props,o=i.cspNonce,l=i.cssStyled,a=i.persistData,c=i.targets||[],h=c.length,g=this.isUnmounted||!h,v=(n=a?.children)!==null&&n!==void 0?n:[];return g&&!h&&v.length?c=v.map(function(){return null}):g||(v=[]),J.createElement(l,{cspNonce:o,ref:Fp(this,"controlBox"),className:li("control-box")},c.map(function(x,b){var S,I,k=(I=(S=i.individualGroupableProps)===null||S===void 0?void 0:S.call(i,x,b))!==null&&I!==void 0?I:{};return J.createElement(sy,Ut({key:"moveable"+b,ref:Bj(r,"moveables",b)},i,k,{target:x,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:v[b]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0),iy(!0),this.moveables.forEach(function(o){o.updateRect(r,n,i)}),iy()},t.prototype.getRect=function(){return Ut(Ut({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this.moveables.map(function(c){return c.request(r,Ut(Ut({},n),{isInstant:!1}),!1)}),l=i||n.isInstant,a={request:function(c){return o.forEach(function(h){return h.request(c)}),this},requestEnd:function(){return o.forEach(function(c){return c.requestEnd()}),this}};return l?a.request(n).requestEnd():a},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=n,o=gc(this.moveables,function(l){var a=l.getTargets()[0],c=l.getControlBoxElement(),h=l.getDragElement();return!a||!h?!1:h===i||h.contains(i)||h!==a&&a===i||a.contains(i)||c===i||c.contains(i)});return o&&o.dragStart(r,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return dn([],Kt(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t})(sy);function d$(e,t){var r=[];return e.forEach(function(n){if(n){if(Kf(n)){t[n]&&r.push.apply(r,dn([],Kt(t[n]),!1));return}Tl(n)?r.push.apply(r,dn([],Kt(d$(n,t)),!1)):r.push(n)}}),r}function f$(e,t){var r=[];return e.forEach(function(n){if(n){if(Kf(n)){t[n]&&r.push.apply(r,dn([],Kt(t[n]),!1));return}Tl(n)?r.push(f$(n,t)):r.push(n)}}),r}function h$(e,t){return e.length!==t.length||e.some(function(r,n){var i=t[n];return!r&&!i?!1:r!=i?Tl(r)&&Tl(i)?h$(r,i):!0:!1})}var Zde=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Kj,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(o){var l=o.css;l&&l.forEach(function(a){r[a]=!0})});var i=_y(r).join(`
`);this.defaultStyled=tq("div",ple(_I,Due+i))},t.getTotalAbles=function(){return dn([e$,jI,u$,Qq],Kt(this.defaultAbles),!1)},t.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,o=i.ables,l=i.props,a=xue(i,["ables","props"]),c=Kt(this._updateRefs(!0),2),h=c[0],g=c[1],v=d$(h,g),x=v.length>1,b=n.getTotalAbles(),S=dn(dn([],Kt(b),!1),Kt(o||[]),!1),I=Ut(Ut(Ut({},a),l||{}),{ables:S,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=v;var k=null,M=this.moveable,O=a.persistData;if(O?.children&&(x=!0),a.individualGroupable)return J.createElement(Yde,Ut({key:"individual-group",ref:Fp(this,"moveable")},I,{target:null,targets:v}));if(x){var F=f$(h,g);if(M&&!M.props.groupable&&!M.props.individualGroupable){var D=M.props.target;D&&v.indexOf(D)>-1&&(k=Ut({},M.state))}return J.createElement(Xde,Ut({key:"group",ref:Fp(this,"moveable")},I,(r=a.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:v,targetGroups:F,firstRenderState:k}))}else{var q=v[0];if(M&&(M.props.groupable||M.props.individualGroupable)){var z=M.moveables||[],U=gc(z,function(H){return H.props.target===q});U&&(k=Ut({},U.state))}return J.createElement(sy,Ut({key:"single",ref:Fp(this,"moveable")},I,{target:q,firstRenderState:k}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(i){n=i})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var n=this.refTargets,i=NI(this.props.target||this.props.targets),o=typeof document<"u",l=h$(n,i),a=this.selectorMap,c={};return this.refTargets.forEach(function h(g){if(Kf(g)){var v=a[g];v?c[g]=a[g]:o&&(l=!0,c[g]=[].slice.call(document.querySelectorAll(g)))}else Tl(g)&&g.forEach(h)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!r&&l]},t.prototype._checkChangeTargets=function(){var r,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),l=o.added,a=o.removed,c=l.length||a.length;c&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var h=Kt(this._updateRefs(),3),g=h[0],v=h[1],x=h[2];this.refTargets=g,this.selectorMap=v,x&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,wue([mle(Fue)],t.prototype,"moveable",void 0),t})(J.PureComponent),Kde=(function(e){h1(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=Hde,t})(Zde),fu=63710088e-1,p$={centimeters:fu*100,centimetres:fu*100,degrees:360/(2*Math.PI),feet:fu*3.28084,inches:fu*39.37,kilometers:fu/1e3,kilometres:fu/1e3,meters:fu,metres:fu,miles:fu/1609.344,millimeters:fu*1e3,millimetres:fu*1e3,nauticalmiles:fu/1852,radians:1,yards:fu*1.0936};function Xp(e,t,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function $c(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ON(e[0])||!ON(e[1]))throw new Error("coordinates must contain numbers");return Xp({type:"Point",coordinates:e},t,r)}function F2(e,t,r={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return Xp({type:"Polygon",coordinates:e},t,r)}function jl(e,t,r={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Xp({type:"LineString",coordinates:e},t,r)}function Hf(e,t={}){const r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function Jde(e,t,r={}){return Xp({type:"MultiLineString",coordinates:e},t,r)}function m$(e,t="kilometers"){const r=p$[t];if(!r)throw new Error(t+" units is invalid");return e*r}function qI(e,t="kilometers"){const r=p$[t];if(!r)throw new Error(t+" units is invalid");return e/r}function Qde(e,t){return nx(qI(e,t))}function nx(e){return e%(2*Math.PI)*180/Math.PI}function od(e){return e%360*Math.PI/180}function ON(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function $I(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function zh(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function g$(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function M0(e){return e.type==="Feature"?e.geometry:e}function y$(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function L0(e,t,r={}){if(r.final===!0)return efe(e,t);const n=zh(e),i=zh(t),o=od(n[0]),l=od(i[0]),a=od(n[1]),c=od(i[1]),h=Math.sin(l-o)*Math.cos(c),g=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(l-o);return nx(Math.atan2(h,g))}function efe(e,t){let r=L0(t,e);return r=(r+180)%360,r}function ly(e,t,r,n={}){const i=zh(e),o=od(i[0]),l=od(i[1]),a=od(r),c=qI(t,n.units),h=Math.asin(Math.sin(l)*Math.cos(c)+Math.cos(l)*Math.sin(c)*Math.cos(a)),g=o+Math.atan2(Math.sin(a)*Math.sin(c)*Math.cos(l),Math.cos(c)-Math.sin(l)*Math.sin(h)),v=nx(g),x=nx(h);return $c([v,x],n.properties)}function B2(e,t,r={}){var n=zh(e),i=zh(t),o=od(i[1]-n[1]),l=od(i[0]-n[0]),a=od(n[1]),c=od(i[1]),h=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(a)*Math.cos(c);return m$(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),r.units)}function tfe(e,t,r={}){const i=M0(e).coordinates;let o=0;for(let l=0;l<i.length&&!(t>=o&&l===i.length-1);l++)if(o>=t){const a=t-o;if(a){const c=L0(i[l],i[l-1])-180;return ly(i[l],a,c,r)}else return $c(i[l])}else o+=B2(i[l],i[l+1],r);return $c(i[i.length-1])}function Cy(e,t,r){if(e!==null)for(var n,i,o,l,a,c,h,g=0,v=0,x,b=e.type,S=b==="FeatureCollection",I=b==="Feature",k=S?e.features.length:1,M=0;M<k;M++){h=S?e.features[M].geometry:I?e.geometry:e,x=h?h.type==="GeometryCollection":!1,a=x?h.geometries.length:1;for(var O=0;O<a;O++){var F=0,D=0;if(l=x?h.geometries[O]:h,l!==null){c=l.coordinates;var q=l.type;switch(g=r&&(q==="Polygon"||q==="MultiPolygon")?1:0,q){case null:break;case"Point":if(t(c,v,M,F,D)===!1)return!1;v++,F++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(t(c[n],v,M,F,D)===!1)return!1;v++,q==="MultiPoint"&&F++}q==="LineString"&&F++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-g;i++){if(t(c[n][i],v,M,F,D)===!1)return!1;v++}q==="MultiLineString"&&F++,q==="Polygon"&&D++}q==="Polygon"&&F++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(D=0,i=0;i<c[n].length;i++){for(o=0;o<c[n][i].length-g;o++){if(t(c[n][i][o],v,M,F,D)===!1)return!1;v++}D++}F++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(Cy(l.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function FN(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function z2(e,t){var r,n,i,o,l,a,c,h,g,v,x=0,b=e.type==="FeatureCollection",S=e.type==="Feature",I=b?e.features.length:1;for(r=0;r<I;r++){for(a=b?e.features[r].geometry:S?e.geometry:e,h=b?e.features[r].properties:S?e.properties:{},g=b?e.features[r].bbox:S?e.bbox:void 0,v=b?e.features[r].id:S?e.id:void 0,c=a?a.type==="GeometryCollection":!1,l=c?a.geometries.length:1,i=0;i<l;i++){if(o=c?a.geometries[i]:a,o===null){if(t(null,x,h,g,v)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,x,h,g,v)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],x,h,g,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function rfe(e,t,r){var n=r;return z2(e,function(i,o,l,a,c){n=t(n,i,o,l,a,c)}),n}function VI(e,t){z2(e,function(r,n,i,o,l){var a=r===null?null:r.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Xp(r,i,{bbox:o,id:l}),n,0)===!1?!1:void 0}var c;switch(a){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var h=0;h<r.coordinates.length;h++){var g=r.coordinates[h],v={type:c,coordinates:g};if(t(Xp(v,i),n,h)===!1)return!1}})}function nfe(e,t){VI(e,function(r,n,i){var o=0;if(r.geometry){var l=r.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var a,c=0,h=0,g=0;if(Cy(r,function(v,x,b,S,I){if(a===void 0||n>c||S>h||I>g){a=v,c=n,h=S,g=I,o=0;return}var k=jl([a,v],r.properties);if(t(k,n,i,I,o)===!1)return!1;o++,a=v})===!1)return!1}}})}function ife(e,t,r){var n=r,i=!1;return nfe(e,function(o,l,a,c,h){i===!1&&r===void 0?n=o:n=t(n,o,l,a,c,h),i=!0}),n}function afe(e){return rfe(e,(t,r)=>t+ofe(r),0)}function ofe(e){let t=0,r;switch(e.type){case"Polygon":return BN(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=BN(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function BN(e){let t=0;if(e&&e.length>0){t+=Math.abs(zN(e[0]));for(let r=1;r<e.length;r++)t-=Math.abs(zN(e[r]))}return t}var sfe=fu*fu/2,c5=Math.PI/180;function zN(e){const t=e.length-1;if(t<=2)return 0;let r=0,n=0;for(;n<t;){const i=e[n],o=e[n+1===t?0:n+1],l=e[n+2>=t?(n+2)%t:n+2],a=i[0]*c5,c=o[1]*c5,h=l[0]*c5;r+=(h-a)*Math.sin(c),n++}return r*sfe}function vc(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const r=[1/0,1/0,-1/0,-1/0];return Cy(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}function jN(e,t={}){const r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const l=[r,n];return F2([[l,[i,n],[i,o],[r,o],l]],t.properties,{bbox:e,id:t.id})}const zf=11102230246251565e-32,cu=134217729,lfe=(3+8*zf)*zf;function d5(e,t,r,n,i){let o,l,a,c,h=t[0],g=n[0],v=0,x=0;g>h==g>-h?(o=h,h=t[++v]):(o=g,g=n[++x]);let b=0;if(v<e&&x<r)for(g>h==g>-h?(l=h+o,a=o-(l-h),h=t[++v]):(l=g+o,a=o-(l-g),g=n[++x]),o=l,a!==0&&(i[b++]=a);v<e&&x<r;)g>h==g>-h?(l=o+h,c=l-o,a=o-(l-c)+(h-c),h=t[++v]):(l=o+g,c=l-o,a=o-(l-c)+(g-c),g=n[++x]),o=l,a!==0&&(i[b++]=a);for(;v<e;)l=o+h,c=l-o,a=o-(l-c)+(h-c),h=t[++v],o=l,a!==0&&(i[b++]=a);for(;x<r;)l=o+g,c=l-o,a=o-(l-c)+(g-c),g=n[++x],o=l,a!==0&&(i[b++]=a);return(o!==0||b===0)&&(i[b++]=o),b}function ufe(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function y1(e){return new Float64Array(e)}const cfe=(3+16*zf)*zf,dfe=(2+12*zf)*zf,ffe=(9+64*zf)*zf*zf,Xm=y1(4),qN=y1(8),$N=y1(12),VN=y1(16),Su=y1(4);function hfe(e,t,r,n,i,o,l){let a,c,h,g,v,x,b,S,I,k,M,O,F,D,q,z,U,H;const X=e-i,ie=r-i,ee=t-o,G=n-o;D=X*G,x=cu*X,b=x-(x-X),S=X-b,x=cu*G,I=x-(x-G),k=G-I,q=S*k-(D-b*I-S*I-b*k),z=ee*ie,x=cu*ee,b=x-(x-ee),S=ee-b,x=cu*ie,I=x-(x-ie),k=ie-I,U=S*k-(z-b*I-S*I-b*k),M=q-U,v=q-M,Xm[0]=q-(M+v)+(v-U),O=D+M,v=O-D,F=D-(O-v)+(M-v),M=F-z,v=F-M,Xm[1]=F-(M+v)+(v-z),H=O+M,v=H-O,Xm[2]=O-(H-v)+(M-v),Xm[3]=H;let ne=ufe(4,Xm),ae=dfe*l;if(ne>=ae||-ne>=ae||(v=e-X,a=e-(X+v)+(v-i),v=r-ie,h=r-(ie+v)+(v-i),v=t-ee,c=t-(ee+v)+(v-o),v=n-G,g=n-(G+v)+(v-o),a===0&&c===0&&h===0&&g===0)||(ae=ffe*l+lfe*Math.abs(ne),ne+=X*g+G*a-(ee*h+ie*c),ne>=ae||-ne>=ae))return ne;D=a*G,x=cu*a,b=x-(x-a),S=a-b,x=cu*G,I=x-(x-G),k=G-I,q=S*k-(D-b*I-S*I-b*k),z=c*ie,x=cu*c,b=x-(x-c),S=c-b,x=cu*ie,I=x-(x-ie),k=ie-I,U=S*k-(z-b*I-S*I-b*k),M=q-U,v=q-M,Su[0]=q-(M+v)+(v-U),O=D+M,v=O-D,F=D-(O-v)+(M-v),M=F-z,v=F-M,Su[1]=F-(M+v)+(v-z),H=O+M,v=H-O,Su[2]=O-(H-v)+(M-v),Su[3]=H;const le=d5(4,Xm,4,Su,qN);D=X*g,x=cu*X,b=x-(x-X),S=X-b,x=cu*g,I=x-(x-g),k=g-I,q=S*k-(D-b*I-S*I-b*k),z=ee*h,x=cu*ee,b=x-(x-ee),S=ee-b,x=cu*h,I=x-(x-h),k=h-I,U=S*k-(z-b*I-S*I-b*k),M=q-U,v=q-M,Su[0]=q-(M+v)+(v-U),O=D+M,v=O-D,F=D-(O-v)+(M-v),M=F-z,v=F-M,Su[1]=F-(M+v)+(v-z),H=O+M,v=H-O,Su[2]=O-(H-v)+(M-v),Su[3]=H;const fe=d5(le,qN,4,Su,$N);D=a*g,x=cu*a,b=x-(x-a),S=a-b,x=cu*g,I=x-(x-g),k=g-I,q=S*k-(D-b*I-S*I-b*k),z=c*h,x=cu*c,b=x-(x-c),S=c-b,x=cu*h,I=x-(x-h),k=h-I,U=S*k-(z-b*I-S*I-b*k),M=q-U,v=q-M,Su[0]=q-(M+v)+(v-U),O=D+M,v=O-D,F=D-(O-v)+(M-v),M=F-z,v=F-M,Su[1]=F-(M+v)+(v-z),H=O+M,v=H-O,Su[2]=O-(H-v)+(M-v),Su[3]=H;const ke=d5(fe,$N,4,Su,VN);return VN[ke-1]}function pfe(e,t,r,n,i,o){const l=(t-o)*(r-i),a=(e-i)*(n-o),c=l-a,h=Math.abs(l+a);return Math.abs(c)>=cfe*h?c:-hfe(e,t,r,n,i,o,h)}function mfe(e,t){var r,n,i=0,o,l,a,c,h,g,v,x=e[0],b=e[1],S=t.length;for(r=0;r<S;r++){n=0;var I=t[r],k=I.length-1;if(g=I[0],g[0]!==I[k][0]&&g[1]!==I[k][1])throw new Error("First and last coordinates in a ring must be the same");for(l=g[0]-x,a=g[1]-b,n;n<k;n++){if(v=I[n+1],c=v[0]-x,h=v[1]-b,a===0&&h===0){if(c<=0&&l>=0||l<=0&&c>=0)return 0}else if(h>=0&&a<=0||h<=0&&a>=0){if(o=pfe(l,c,a,h,0,0),o===0)return 0;(o>0&&h>0&&a<=0||o<0&&h<=0&&a>0)&&i++}g=v,a=h,l=c}}return i%2!==0}function j2(e,t,r={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const n=zh(e),i=M0(t),o=i.type,l=t.bbox;let a=i.coordinates;if(l&&gfe(n,l)===!1)return!1;o==="Polygon"&&(a=[a]);let c=!1;for(var h=0;h<a.length;++h){const g=mfe(n,a[h]);if(g===0)return!r.ignoreBoundary;g&&(c=!0)}return c}function gfe(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function R0(e,t,r={}){const n=zh(e),i=g$(t);for(let o=0;o<i.length-1;o++){let l=!1;if(r.ignoreEndVertices&&(o===0&&(l="start"),o===i.length-2&&(l="end"),o===0&&o+1===i.length-1&&(l="both")),yfe(i[o],i[o+1],n,l,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function yfe(e,t,r,n,i){const o=r[0],l=r[1],a=e[0],c=e[1],h=t[0],g=t[1],v=r[0]-a,x=r[1]-c,b=h-a,S=g-c,I=v*S-x*b;if(i!==null){if(Math.abs(I)>i)return!1}else if(I!==0)return!1;if(Math.abs(b)===Math.abs(S)&&Math.abs(b)===0)return n?!1:r[0]===e[0]&&r[1]===e[1];if(n){if(n==="start")return Math.abs(b)>=Math.abs(S)?b>0?a<o&&o<=h:h<=o&&o<a:S>0?c<l&&l<=g:g<=l&&l<c;if(n==="end")return Math.abs(b)>=Math.abs(S)?b>0?a<=o&&o<h:h<o&&o<=a:S>0?c<=l&&l<g:g<l&&l<=c;if(n==="both")return Math.abs(b)>=Math.abs(S)?b>0?a<o&&o<h:h<o&&o<a:S>0?c<l&&l<g:g<l&&l<c}else return Math.abs(b)>=Math.abs(S)?b>0?a<=o&&o<=h:h<=o&&o<=a:S>0?c<=l&&l<=g:g<=l&&l<=c;return!1}function vfe(e,t){const r=M0(e),n=M0(t),i=r.type,o=n.type,l=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return UI(l,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return _fe(r,n);case"MultiPoint":return xfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return R0(n,r,{ignoreEndVertices:!0});case"LineString":return Cfe(r,n);case"MultiPoint":return wfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return j2(n,r,{ignoreBoundary:!0});case"LineString":return Efe(r,n);case"Polygon":return v$(r,n);case"MultiPoint":return Sfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Polygon":return bfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function bfe(e,t){return e.coordinates.some(r=>v$({type:"Polygon",coordinates:r},t))}function _fe(e,t){let r,n=!1;for(r=0;r<e.coordinates.length;r++)if(UI(e.coordinates[r],t.coordinates)){n=!0;break}return n}function xfe(e,t){for(const r of t.coordinates){let n=!1;for(const i of e.coordinates)if(UI(r,i)){n=!0;break}if(!n)return!1}return!0}function wfe(e,t){let r=!1;for(const n of t.coordinates)if(R0(n,e,{ignoreEndVertices:!0})&&(r=!0),!R0(n,e))return!1;return!!r}function Sfe(e,t){for(const r of t.coordinates)if(!j2(r,e,{ignoreBoundary:!0}))return!1;return!0}function Cfe(e,t){let r=!1;for(const n of t.coordinates)if(R0({type:"Point",coordinates:n},e,{ignoreEndVertices:!0})&&(r=!0),!R0({type:"Point",coordinates:n},e,{ignoreEndVertices:!1}))return!1;return r}function Efe(e,t){let r=!1,n=0;const i=vc(e),o=vc(t);if(!b$(i,o))return!1;for(n;n<t.coordinates.length-1;n++){const l=Tfe(t.coordinates[n],t.coordinates[n+1]);if(j2({type:"Point",coordinates:l},e,{ignoreBoundary:!0})){r=!0;break}}return r}function v$(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;const r=vc(e),n=vc(t);if(!b$(r,n))return!1;const i=M0(t).coordinates;for(const o of i)for(const l of o)if(!j2(l,e))return!1;return!0}function b$(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function UI(e,t){return e[0]===t[0]&&e[1]===t[1]}function Tfe(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function Pfe(e,t={}){const r=vc(e),n=(r[0]+r[2])/2,i=(r[1]+r[3])/2;return $c([n,i],t.properties,t)}var y_={exports:{}},Ife=y_.exports,UN;function kfe(){return UN||(UN=1,(function(e,t){(function(r,n){e.exports=n()})(Ife,(function(){function r(T,m){(m==null||m>T.length)&&(m=T.length);for(var y=0,P=Array(m);y<m;y++)P[y]=T[y];return P}function n(T,m,y){return m=g(m),(function(P,j){if(j&&(typeof j=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re})(P)})(T,x()?Reflect.construct(m,y||[],g(T).constructor):m.apply(T,y))}function i(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")}function o(T,m,y){if(x())return Reflect.construct.apply(null,arguments);var P=[null];P.push.apply(P,m);var j=new(T.bind.apply(T,P));return y&&b(j,y.prototype),j}function l(T,m){for(var y=0;y<m.length;y++){var P=m[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(T,k(P.key),P)}}function a(T,m,y){return m&&l(T.prototype,m),y&&l(T,y),Object.defineProperty(T,"prototype",{writable:!1}),T}function c(T,m){var y=typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(!y){if(Array.isArray(T)||(y=M(T))||m){y&&(T=y);var P=0,j=function(){};return{s:j,n:function(){return P>=T.length?{done:!0}:{done:!1,value:T[P++]}},e:function(Ke){throw Ke},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re,ye=!0,Ae=!1;return{s:function(){y=y.call(T)},n:function(){var Ke=y.next();return ye=Ke.done,Ke},e:function(Ke){Ae=!0,re=Ke},f:function(){try{ye||y.return==null||y.return()}finally{if(Ae)throw re}}}}function h(){return h=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(T,m,y){var P=(function(re,ye){for(;!{}.hasOwnProperty.call(re,ye)&&(re=g(re))!==null;);return re})(T,m);if(P){var j=Object.getOwnPropertyDescriptor(P,m);return j.get?j.get.call(arguments.length<3?T:y):j.value}},h.apply(null,arguments)}function g(T){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},g(T)}function v(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),m&&b(T,m)}function x(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(x=function(){return!!T})()}function b(T,m){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,P){return y.__proto__=P,y},b(T,m)}function S(T,m,y,P){var j=h(g(1&P?T.prototype:T),m,y);return 2&P&&typeof j=="function"?function(re){return j.apply(y,re)}:j}function I(T){return(function(m){if(Array.isArray(m))return r(m)})(T)||(function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)})(T)||M(T)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function k(T){var m=(function(y,P){if(typeof y!="object"||!y)return y;var j=y[Symbol.toPrimitive];if(j!==void 0){var re=j.call(y,P);if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)})(T,"string");return typeof m=="symbol"?m:m+""}function M(T,m){if(T){if(typeof T=="string")return r(T,m);var y={}.toString.call(T).slice(8,-1);return y==="Object"&&T.constructor&&(y=T.constructor.name),y==="Map"||y==="Set"?Array.from(T):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?r(T,m):void 0}}function O(T){var m=typeof Map=="function"?new Map:void 0;return O=function(y){if(y===null||!(function(j){try{return Function.toString.call(j).indexOf("[native code]")!==-1}catch{return typeof j=="function"}})(y))return y;if(typeof y!="function")throw new TypeError("Super expression must either be null or a function");if(m!==void 0){if(m.has(y))return m.get(y);m.set(y,P)}function P(){return o(y,arguments,g(this).constructor)}return P.prototype=Object.create(y.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),b(P,y)},O(T)}var F=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(m){this._quadrantSegments=m,this._quadrantSegments===0&&(this._joinStyle=T.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=T.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),m<=0&&(this._quadrantSegments=1),this._joinStyle!==T.JOIN_ROUND&&(this._quadrantSegments=T.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(m){this._joinStyle=m}},{key:"setSimplifyFactor",value:function(m){this._simplifyFactor=m<0?0:m}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(m){this._endCapStyle=m}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(m){this._mitreLimit=m}},{key:"setSingleSided",value:function(m){this._isSingleSided=m}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=T.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=T.CAP_ROUND,this._joinStyle=T.JOIN_ROUND,this._mitreLimit=T.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=T.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this.setQuadrantSegments(m)}else if(arguments.length===2){var y=arguments[0],P=arguments[1];this.setQuadrantSegments(y),this.setEndCapStyle(P)}else if(arguments.length===4){var j=arguments[0],re=arguments[1],ye=arguments[2],Ae=arguments[3];this.setQuadrantSegments(j),this.setEndCapStyle(re),this.setJoinStyle(ye),this.setMitreLimit(Ae)}}}},{key:"bufferDistanceError",value:function(m){var y=Math.PI/2/m;return 1-Math.cos(y/2)}}])})();F.CAP_ROUND=1,F.CAP_FLAT=2,F.CAP_SQUARE=3,F.JOIN_ROUND=1,F.JOIN_MITRE=2,F.JOIN_BEVEL=3,F.DEFAULT_QUADRANT_SEGMENTS=8,F.DEFAULT_MITRE_LIMIT=5,F.DEFAULT_SIMPLIFY_FACTOR=.01;var D=(function(T){function m(y){var P;return i(this,m),(P=n(this,m,[y])).name=Object.keys({Exception:m})[0],P}return v(m,T),a(m,[{key:"toString",value:function(){return this.message}}])})(O(Error)),q=(function(T){function m(y){var P;return i(this,m),(P=n(this,m,[y])).name=Object.keys({IllegalArgumentException:m})[0],P}return v(m,T),a(m)})(D),z=(function(){return a((function T(){i(this,T)}),[{key:"filter",value:function(T){}}])})();function U(){}function H(){}function X(){}var ie,ee,G,ne,ae,le,fe,ke,me=(function(){return a((function T(){i(this,T)}),null,[{key:"equalsWithTolerance",value:function(T,m,y){return Math.abs(T-m)<=y}}])})(),Se=(function(){return a((function T(m,y){i(this,T),this.low=y||0,this.high=m||0}),null,[{key:"toBinaryString",value:function(T){var m,y="";for(m=2147483648;m>0;m>>>=1)y+=(T.high&m)===m?"1":"0";for(m=2147483648;m>0;m>>>=1)y+=(T.low&m)===m?"1":"0";return y}}])})();function we(){}function Pe(){}we.NaN=NaN,we.isNaN=function(T){return Number.isNaN(T)},we.isInfinite=function(T){return!Number.isFinite(T)},we.MAX_VALUE=Number.MAX_VALUE,we.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,we.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(le=2146435072,fe=new Float64Array(1),ke=new Int32Array(fe.buffer),we.doubleToLongBits=function(T){fe[0]=T;var m=0|ke[0],y=0|ke[1];return(y&le)===le&&1048575&y&&m!==0&&(m=0,y=2146959360),new Se(y,m)},we.longBitsToDouble=function(T){return ke[0]=T.low,ke[1]=T.high,fe[0]}):(ie=1023,ee=Math.log2,G=Math.floor,ne=Math.pow,ae=(function(){for(var T=53;T>0;T--){var m=ne(2,T)-1;if(G(ee(m))+1===T)return m}return 0})(),we.doubleToLongBits=function(T){var m,y,P,j,re,ye,Ae,Ke,gt;if(T<0||1/T===Number.NEGATIVE_INFINITY?(ye=1<<31,T=-T):ye=0,T===0)return new Se(Ke=ye,gt=0);if(T===1/0)return new Se(Ke=2146435072|ye,gt=0);if(T!=T)return new Se(Ke=2146959360,gt=0);if(j=0,gt=0,(m=G(T))>1)if(m<=ae)(j=G(ee(m)))<=20?(gt=0,Ke=m<<20-j&1048575):(gt=m%(y=ne(2,P=j-20))<<32-P,Ke=m/y&1048575);else for(P=m,gt=0;(P=G(y=P/2))!==0;)j++,gt>>>=1,gt|=(1&Ke)<<31,Ke>>>=1,y!==P&&(Ke|=524288);if(Ae=j+ie,re=m===0,m=T-m,j<52&&m!==0)for(P=0;;){if((y=2*m)>=1?(m=y-1,re?(Ae--,re=!1):(P<<=1,P|=1,j++)):(m=y,re?--Ae==0&&(j++,re=!1):(P<<=1,j++)),j===20)Ke|=P,P=0;else if(j===52){gt|=P;break}if(y===1){j<20?Ke|=P<<20-j:j<52&&(gt|=P<<52-j);break}}return Ke|=Ae<<20,new Se(Ke|=ye,gt)},we.longBitsToDouble=function(T){var m,y,P,j,re=T.high,ye=T.low,Ae=re&1<<31?-1:1;for(P=((2146435072&re)>>20)-ie,j=0,y=1<<19,m=1;m<=20;m++)re&y&&(j+=ne(2,-m)),y>>>=1;for(y=1<<31,m=21;m<=52;m++)ye&y&&(j+=ne(2,-m)),y>>>=1;if(P===-1023){if(j===0)return 0*Ae;P=-1022}else{if(P===1024)return j===0?Ae/0:NaN;j+=1}return Ae*j*ne(2,P)});var ce=(function(T){function m(y){var P;return i(this,m),(P=n(this,m,[y])).name=Object.keys({RuntimeException:m})[0],P}return v(m,T),a(m)})(D),_e=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,null,[{key:"constructor_",value:function(){if(arguments.length===0)ce.constructor_.call(this);else if(arguments.length===1){var y=arguments[0];ce.constructor_.call(this,y)}}}])})(ce),be=(function(){function T(){i(this,T)}return a(T,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)T.shouldNeverReachHere(null);else if(arguments.length===1){var m=arguments[0];throw new _e("Should never reach here"+(m!==null?": "+m:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var m=arguments[0];T.isTrue(m,null)}else if(arguments.length===2){var y=arguments[1];if(!arguments[0])throw y===null?new _e:new _e(y)}}},{key:"equals",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];T.equals(m,y,null)}else if(arguments.length===3){var P=arguments[0],j=arguments[1],re=arguments[2];if(!j.equals(P))throw new _e("Expected "+P+" but encountered "+j+(re!==null?": "+re:""))}}}])})(),Me=new ArrayBuffer(8),Le=new Float64Array(Me),Ue=new Int32Array(Me),Oe=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getM",value:function(){return we.NaN}},{key:"setOrdinate",value:function(m,y){switch(m){case T.X:this.x=y;break;case T.Y:this.y=y;break;case T.Z:this.setZ(y);break;default:throw new q("Invalid ordinate index: "+m)}}},{key:"equals2D",value:function(){if(arguments.length===1){var m=arguments[0];return this.x===m.x&&this.y===m.y}if(arguments.length===2){var y=arguments[0],P=arguments[1];return!!me.equalsWithTolerance(this.x,y.x,P)&&!!me.equalsWithTolerance(this.y,y.y,P)}}},{key:"setM",value:function(m){throw new q("Invalid ordinate index: "+T.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(m){switch(m){case T.X:return this.x;case T.Y:return this.y;case T.Z:return this.getZ()}throw new q("Invalid ordinate index: "+m)}},{key:"equals3D",value:function(m){return this.x===m.x&&this.y===m.y&&(this.getZ()===m.getZ()||we.isNaN(this.getZ())&&we.isNaN(m.getZ()))}},{key:"equals",value:function(m){return m instanceof T&&this.equals2D(m)}},{key:"equalInZ",value:function(m,y){return me.equalsWithTolerance(this.getZ(),m.getZ(),y)}},{key:"setX",value:function(m){this.x=m}},{key:"compareTo",value:function(m){var y=m;return this.x<y.x?-1:this.x>y.x?1:this.y<y.y?-1:this.y>y.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(m){this.z=m}},{key:"clone",value:function(){try{return null}catch(m){if(m instanceof CloneNotSupportedException)return be.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw m}}},{key:"copy",value:function(){return new T(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(m){var y=this.x-m.x,P=this.y-m.y,j=this.getZ()-m.getZ();return Math.sqrt(y*y+P*P+j*j)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(m){this.y=m}},{key:"distance",value:function(m){var y=this.x-m.x,P=this.y-m.y;return Math.sqrt(y*y+P*P)}},{key:"hashCode",value:function(){var m=17;return m=37*(m=37*m+T.hashCode(this.x))+T.hashCode(this.y)}},{key:"setCoordinate",value:function(m){this.x=m.x,this.y=m.y,this.z=m.getZ()}},{key:"interfaces_",get:function(){return[U,H,X]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)T.constructor_.call(this,0,0);else if(arguments.length===1){var m=arguments[0];T.constructor_.call(this,m.x,m.y,m.getZ())}else if(arguments.length===2){var y=arguments[0],P=arguments[1];T.constructor_.call(this,y,P,T.NULL_ORDINATE)}else if(arguments.length===3){var j=arguments[0],re=arguments[1],ye=arguments[2];this.x=j,this.y=re,this.z=ye}}},{key:"hashCode",value:function(m){return Le[0]=m,Ue[0]^Ue[1]}}])})(),tt=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"compare",value:function(m,y){var P=T.compare(m.x,y.x);if(P!==0)return P;var j=T.compare(m.y,y.y);return j!==0?j:this._dimensionsToTest<=2?0:T.compare(m.getZ(),y.getZ())}},{key:"interfaces_",get:function(){return[Pe]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)T.constructor_.call(this,2);else if(arguments.length===1){var m=arguments[0];if(m!==2&&m!==3)throw new q("only 2 or 3 dimensions may be specified");this._dimensionsToTest=m}}},{key:"compare",value:function(m,y){return m<y?-1:m>y?1:we.isNaN(m)?we.isNaN(y)?0:-1:we.isNaN(y)?1:0}}])})();Oe.DimensionalComparator=tt,Oe.NULL_ORDINATE=we.NaN,Oe.X=0,Oe.Y=1,Oe.Z=2,Oe.M=3;var Ze=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(m){if(!(m instanceof T))return!1;var y=m;return this.isNull()?y.isNull():this._maxx===y.getMaxX()&&this._maxy===y.getMaxY()&&this._minx===y.getMinX()&&this._miny===y.getMinY()}},{key:"intersection",value:function(m){if(this.isNull()||m.isNull()||!this.intersects(m))return new T;var y=this._minx>m._minx?this._minx:m._minx,P=this._miny>m._miny?this._miny:m._miny;return new T(y,this._maxx<m._maxx?this._maxx:m._maxx,P,this._maxy<m._maxy?this._maxy:m._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];return this.covers(m.x,m.y)}if(arguments[0]instanceof T){var y=arguments[0];return!this.isNull()&&!y.isNull()&&y.getMinX()>=this._minx&&y.getMaxX()<=this._maxx&&y.getMinY()>=this._miny&&y.getMaxY()<=this._maxy}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];return!this.isNull()&&P>=this._minx&&P<=this._maxx&&j>=this._miny&&j<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var m=arguments[0];return!this.isNull()&&!m.isNull()&&!(m._minx>this._maxx||m._maxx<this._minx||m._miny>this._maxy||m._maxy<this._miny)}if(arguments[0]instanceof Oe){var y=arguments[0];return this.intersects(y.x,y.y)}}else if(arguments.length===2){if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var P=arguments[0],j=arguments[1];return!this.isNull()&&!((P.x<j.x?P.x:j.x)>this._maxx)&&!((P.x>j.x?P.x:j.x)<this._minx)&&!((P.y<j.y?P.y:j.y)>this._maxy)&&!((P.y>j.y?P.y:j.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var re=arguments[0],ye=arguments[1];return!this.isNull()&&!(re>this._maxx||re<this._minx||ye>this._maxy||ye<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var m=this.getWidth(),y=this.getHeight();return Math.sqrt(m*m+y*y)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];this.expandToInclude(m.x,m.y)}else if(arguments[0]instanceof T){var y=arguments[0];if(y.isNull())return null;this.isNull()?(this._minx=y.getMinX(),this._maxx=y.getMaxX(),this._miny=y.getMinY(),this._maxy=y.getMaxY()):(y._minx<this._minx&&(this._minx=y._minx),y._maxx>this._maxx&&(this._maxx=y._maxx),y._miny<this._miny&&(this._miny=y._miny),y._maxy>this._maxy&&(this._maxy=y._maxy))}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];this.isNull()?(this._minx=P,this._maxx=P,this._miny=j,this._maxy=j):(P<this._minx&&(this._minx=P),P>this._maxx&&(this._maxx=P),j<this._miny&&(this._miny=j),j>this._maxy&&(this._maxy=j))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var m=this.getWidth(),y=this.getHeight();return m<y?m:y}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(m){var y=m;return this.isNull()?y.isNull()?0:-1:y.isNull()?1:this._minx<y._minx?-1:this._minx>y._minx?1:this._miny<y._miny?-1:this._miny>y._miny?1:this._maxx<y._maxx?-1:this._maxx>y._maxx?1:this._maxy<y._maxy?-1:this._maxy>y._maxy?1:0}},{key:"translate",value:function(m,y){if(this.isNull())return null;this.init(this.getMinX()+m,this.getMaxX()+m,this.getMinY()+y,this.getMaxY()+y)}},{key:"copy",value:function(){return new T(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(m){return!(!this.isNull()&&!m.isNull())||m._minx>this._maxx||m._maxx<this._minx||m._miny>this._maxy||m._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var m=this.getWidth(),y=this.getHeight();return m>y?m:y}},{key:"expandBy",value:function(){if(arguments.length===1){var m=arguments[0];this.expandBy(m,m)}else if(arguments.length===2){var y=arguments[0],P=arguments[1];if(this.isNull())return null;this._minx-=y,this._maxx+=y,this._miny-=P,this._maxy+=P,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var m=arguments[0];return this.covers(m)}if(arguments[0]instanceof Oe){var y=arguments[0];return this.covers(y)}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];return this.covers(P,j)}}},{key:"centre",value:function(){return this.isNull()?null:new Oe((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];this.init(m.x,m.x,m.y,m.y)}else if(arguments[0]instanceof T){var y=arguments[0];this._minx=y._minx,this._maxx=y._maxx,this._miny=y._miny,this._maxy=y._maxy}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];this.init(P.x,j.x,P.y,j.y)}else if(arguments.length===4){var re=arguments[0],ye=arguments[1],Ae=arguments[2],Ke=arguments[3];re<ye?(this._minx=re,this._maxx=ye):(this._minx=ye,this._maxx=re),Ae<Ke?(this._miny=Ae,this._maxy=Ke):(this._miny=Ke,this._maxy=Ae)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(m){if(this.intersects(m))return 0;var y=0;this._maxx<m._minx?y=m._minx-this._maxx:this._minx>m._maxx&&(y=this._minx-m._maxx);var P=0;return this._maxy<m._miny?P=m._miny-this._maxy:this._miny>m._maxy&&(P=this._miny-m._maxy),y===0?P:P===0?y:Math.sqrt(y*y+P*P)}},{key:"hashCode",value:function(){var m=17;return m=37*(m=37*(m=37*(m=37*m+Oe.hashCode(this._minx))+Oe.hashCode(this._maxx))+Oe.hashCode(this._miny))+Oe.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[U,X]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];this.init(m.x,m.x,m.y,m.y)}else if(arguments[0]instanceof T){var y=arguments[0];this.init(y)}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];this.init(P.x,j.x,P.y,j.y)}else if(arguments.length===4){var re=arguments[0],ye=arguments[1],Ae=arguments[2],Ke=arguments[3];this.init(re,ye,Ae,Ke)}}},{key:"intersects",value:function(){if(arguments.length===3){var m=arguments[0],y=arguments[1],P=arguments[2];return P.x>=(m.x<y.x?m.x:y.x)&&P.x<=(m.x>y.x?m.x:y.x)&&P.y>=(m.y<y.y?m.y:y.y)&&P.y<=(m.y>y.y?m.y:y.y)}if(arguments.length===4){var j=arguments[0],re=arguments[1],ye=arguments[2],Ae=arguments[3],Ke=Math.min(ye.x,Ae.x),gt=Math.max(ye.x,Ae.x),rr=Math.min(j.x,re.x),fr=Math.max(j.x,re.x);return!(rr>gt)&&!(fr<Ke)&&(Ke=Math.min(ye.y,Ae.y),gt=Math.max(ye.y,Ae.y),rr=Math.min(j.y,re.y),fr=Math.max(j.y,re.y),!(rr>gt)&&!(fr<Ke))}}}])})(),Qe=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===T.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(m){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(m){return this===m||this.equalsExact(m,0)}},{key:"geometryChanged",value:function(){this.apply(T.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(m){return m!==null&&this.norm().equalsExact(m.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var m;if(arguments.length===1){var y=arguments[0];return m=y,this.getTypeCode()!==m.getTypeCode()?this.getTypeCode()-m.getTypeCode():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(y)}if(arguments.length===2){var P=arguments[0],j=arguments[1];return m=P,this.getTypeCode()!==m.getTypeCode()?this.getTypeCode()-m.getTypeCode():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(P,j)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(m){if(m.getTypeCode()===T.TYPECODE_GEOMETRYCOLLECTION)throw new q("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(m,y,P){return P===0?m.equals(y):m.distance(y)<=P}},{key:"norm",value:function(){var m=this.copy();return m.normalize(),m}},{key:"reverse",value:function(){var m=this.reverseInternal();return this.envelope!=null&&(m.envelope=this.envelope.copy()),m.setSRID(this.getSRID()),m}},{key:"copy",value:function(){var m=this.copyInternal();return m.envelope=this._envelope==null?null:this._envelope.copy(),m._SRID=this._SRID,m._userData=this._userData,m}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Ze(this._envelope)}},{key:"setSRID",value:function(m){this._SRID=m}},{key:"setUserData",value:function(m){this._userData=m}},{key:"compare",value:function(m,y){for(var P=m.iterator(),j=y.iterator();P.hasNext()&&j.hasNext();){var re=P.next(),ye=j.next(),Ae=re.compareTo(ye);if(Ae!==0)return Ae}return P.hasNext()?1:j.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(m){return this.getClass()===m.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===T.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===T.TYPECODE_MULTIPOINT||this.getTypeCode()===T.TYPECODE_MULTILINESTRING||this.getTypeCode()===T.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[H,U,X]}},{key:"getClass",value:function(){return T}}],[{key:"hasNonEmptyElements",value:function(m){for(var y=0;y<m.length;y++)if(!m[y].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(m){for(var y=0;y<m.length;y++)if(m[y]===null)return!0;return!1}}])})();Qe.constructor_=function(T){T&&(this._envelope=null,this._userData=null,this._factory=T,this._SRID=T.getSRID())},Qe.TYPECODE_POINT=0,Qe.TYPECODE_MULTIPOINT=1,Qe.TYPECODE_LINESTRING=2,Qe.TYPECODE_LINEARRING=3,Qe.TYPECODE_MULTILINESTRING=4,Qe.TYPECODE_POLYGON=5,Qe.TYPECODE_MULTIPOLYGON=6,Qe.TYPECODE_GEOMETRYCOLLECTION=7,Qe.TYPENAME_POINT="Point",Qe.TYPENAME_MULTIPOINT="MultiPoint",Qe.TYPENAME_LINESTRING="LineString",Qe.TYPENAME_LINEARRING="LinearRing",Qe.TYPENAME_MULTILINESTRING="MultiLineString",Qe.TYPENAME_POLYGON="Polygon",Qe.TYPENAME_MULTIPOLYGON="MultiPolygon",Qe.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Qe.geometryChangedFilter={get interfaces_(){return[z]},filter:function(T){T.geometryChangedAction()}};var Ie=(function(){function T(){i(this,T)}return a(T,null,[{key:"toLocationSymbol",value:function(m){switch(m){case T.EXTERIOR:return"e";case T.BOUNDARY:return"b";case T.INTERIOR:return"i";case T.NONE:return"-"}throw new q("Unknown location value: "+m)}}])})();Ie.INTERIOR=0,Ie.BOUNDARY=1,Ie.EXTERIOR=2,Ie.NONE=-1;var Mt=(function(){return a((function T(){i(this,T)}),[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])})(),ot=(function(T){function m(y){var P;return i(this,m),(P=n(this,m,[y])).name=Object.keys({NoSuchElementException:m})[0],P}return v(m,T),a(m)})(D),$e=(function(T){function m(y){var P;return i(this,m),(P=n(this,m,[y])).name=Object.keys({UnsupportedOperationException:m})[0],P}return v(m,T),a(m)})(D),tr=(function(T){function m(){return i(this,m),n(this,m,arguments)}return v(m,T),a(m,[{key:"contains",value:function(){}}])})(Mt),Wt=(function(T){function m(y){var P;return i(this,m),(P=n(this,m)).map=new Map,y instanceof Mt&&P.addAll(y),P}return v(m,T),a(m,[{key:"contains",value:function(y){var P=y.hashCode?y.hashCode():y;return!!this.map.has(P)}},{key:"add",value:function(y){var P=y.hashCode?y.hashCode():y;return!this.map.has(P)&&!!this.map.set(P,y)}},{key:"addAll",value:function(y){var P,j=c(y);try{for(j.s();!(P=j.n()).done;){var re=P.value;this.add(re)}}catch(ye){j.e(ye)}finally{j.f()}return!0}},{key:"remove",value:function(){throw new $e}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Gt(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])})(tr),Gt=(function(){return a((function T(m){i(this,T),this.iterator=m.values();var y=this.iterator.next(),P=y.done,j=y.value;this.done=P,this.value=j}),[{key:"next",value:function(){if(this.done)throw new ot;var T=this.value,m=this.iterator.next(),y=m.done,P=m.value;return this.done=y,this.value=P,T}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new $e}}])})(),at=(function(){function T(){i(this,T)}return a(T,null,[{key:"opposite",value:function(m){return m===T.LEFT?T.RIGHT:m===T.RIGHT?T.LEFT:m}}])})();at.ON=0,at.LEFT=1,at.RIGHT=2;var dr=(function(T){function m(y){var P;return i(this,m),(P=n(this,m,[y])).name=Object.keys({EmptyStackException:m})[0],P}return v(m,T),a(m)})(D),hr=(function(T){function m(y){var P;return i(this,m),(P=n(this,m,[y])).name=Object.keys({IndexOutOfBoundsException:m})[0],P}return v(m,T),a(m)})(D),ur=(function(T){function m(){return i(this,m),n(this,m,arguments)}return v(m,T),a(m,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])})(Mt),Cr=(function(T){function m(){var y;return i(this,m),(y=n(this,m)).array=[],y}return v(m,T),a(m,[{key:"add",value:function(y){return this.array.push(y),!0}},{key:"get",value:function(y){if(y<0||y>=this.size())throw new hr;return this.array[y]}},{key:"push",value:function(y){return this.array.push(y),y}},{key:"pop",value:function(){if(this.array.length===0)throw new dr;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new dr;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(y){return this.array.indexOf(y)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])})(ur);function br(T,m){return T.interfaces_&&T.interfaces_.indexOf(m)>-1}var nr=(function(){return a((function T(m){i(this,T),this.str=m}),[{key:"append",value:function(T){this.str+=T}},{key:"setCharAt",value:function(T,m){this.str=this.str.substr(0,T)+m+this.str.substr(T+1)}},{key:"toString",value:function(){return this.str}}])})(),lr=(function(){function T(m){i(this,T),this.value=m}return a(T,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(m){return this.value<m?-1:this.value>m?1:0}}],[{key:"compare",value:function(m,y){return m<y?-1:m>y?1:0}},{key:"isNan",value:function(m){return Number.isNaN(m)}},{key:"valueOf",value:function(m){return new T(m)}}])})(),Pr=(function(){return a((function T(){i(this,T)}),null,[{key:"isWhitespace",value:function(T){return T<=32&&T>=0||T===127}},{key:"toUpperCase",value:function(T){return T.toUpperCase()}}])})(),ar=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"le",value:function(m){return this._hi<m._hi||this._hi===m._hi&&this._lo<=m._lo}},{key:"extractSignificantDigits",value:function(m,y){var P=this.abs(),j=T.magnitude(P._hi),re=T.TEN.pow(j);(P=P.divide(re)).gt(T.TEN)?(P=P.divide(T.TEN),j+=1):P.lt(T.ONE)&&(P=P.multiply(T.TEN),j-=1);for(var ye=j+1,Ae=new nr,Ke=T.MAX_PRINT_DIGITS-1,gt=0;gt<=Ke;gt++){m&&gt===ye&&Ae.append(".");var rr=Math.trunc(P._hi);if(rr<0)break;var fr=!1,zr=0;rr>9?(fr=!0,zr="9"):zr="0"+rr,Ae.append(zr),P=P.subtract(T.valueOf(rr)).multiply(T.TEN),fr&&P.selfAdd(T.TEN);var hn=!0,Mn=T.magnitude(P._hi);if(Mn<0&&Math.abs(Mn)>=Ke-gt&&(hn=!1),!hn)break}return y[0]=j,Ae.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof T){var m=arguments[0];return this.add(m.negate())}if(typeof arguments[0]=="number"){var y=arguments[0];return this.add(-y)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof T){var m=arguments[0];return this._hi===m._hi&&this._lo===m._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof T){var m=arguments[0];return this.isNaN()?this:this.selfAdd(-m._hi,-m._lo)}if(typeof arguments[0]=="number"){var y=arguments[0];return this.isNaN()?this:this.selfAdd(-y,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(m){return this.le(m)?this:m}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var m=arguments[0];return this.selfDivide(m._hi,m._lo)}if(typeof arguments[0]=="number"){var y=arguments[0];return this.selfDivide(y,0)}}else if(arguments.length===2){var P,j,re,ye,Ae=arguments[0],Ke=arguments[1],gt=null,rr=null,fr=null,zr=null;return re=this._hi/Ae,zr=(gt=(fr=T.SPLIT*re)-(gt=fr-re))*(rr=(zr=T.SPLIT*Ae)-(rr=zr-Ae))-(ye=re*Ae)+gt*(j=Ae-rr)+(P=re-gt)*rr+P*j,zr=re+(fr=(this._hi-ye-zr+this._lo-re*Ke)/Ae),this._hi=zr,this._lo=re-zr+fr,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof T){var m,y,P,j,re=arguments[0],ye=null,Ae=null,Ke=null,gt=null;return m=(P=this._hi/re._hi)-(ye=(Ke=T.SPLIT*P)-(ye=Ke-P)),gt=ye*(Ae=(gt=T.SPLIT*re._hi)-(Ae=gt-re._hi))-(j=P*re._hi)+ye*(y=re._hi-Ae)+m*Ae+m*y,new T(gt=P+(Ke=(this._hi-j-gt+this._lo-P*re._lo)/re._hi),P-gt+Ke)}if(typeof arguments[0]=="number"){var rr=arguments[0];return we.isNaN(rr)?T.createNaN():T.copy(this).selfDivide(rr,0)}}},{key:"ge",value:function(m){return this._hi>m._hi||this._hi===m._hi&&this._lo>=m._lo}},{key:"pow",value:function(m){if(m===0)return T.valueOf(1);var y=new T(this),P=T.valueOf(1),j=Math.abs(m);if(j>1)for(;j>0;)j%2==1&&P.selfMultiply(y),(j/=2)>0&&(y=y.sqr());else P=y;return m<0?P.reciprocal():P}},{key:"ceil",value:function(){if(this.isNaN())return T.NaN;var m=Math.ceil(this._hi),y=0;return m===this._hi&&(y=Math.ceil(this._lo)),new T(m,y)}},{key:"compareTo",value:function(m){var y=m;return this._hi<y._hi?-1:this._hi>y._hi?1:this._lo<y._lo?-1:this._lo>y._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof T){var m=arguments[0];return this.init(m),this}if(typeof arguments[0]=="number"){var y=arguments[0];return this.init(y),this}}},{key:"max",value:function(m){return this.ge(m)?this:m}},{key:"sqrt",value:function(){if(this.isZero())return T.valueOf(0);if(this.isNegative())return T.NaN;var m=1/Math.sqrt(this._hi),y=this._hi*m,P=T.valueOf(y),j=this.subtract(P.sqr())._hi*(.5*m);return P.add(j)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var m=arguments[0];return this.selfAdd(m._hi,m._lo)}if(typeof arguments[0]=="number"){var y,P,j,re,ye,Ae=arguments[0],Ke=null;return Ke=(j=this._hi+Ae)-(re=j-this._hi),P=(ye=(Ke=Ae-re+(this._hi-Ke))+this._lo)+(j-(y=j+ye)),this._hi=y+P,this._lo=P+(y-this._hi),this}}else if(arguments.length===2){var gt,rr,fr,zr,hn=arguments[0],Mn=arguments[1],$n=null,An=null,In=null;fr=this._hi+hn,rr=this._lo+Mn,An=fr-(In=fr-this._hi),$n=rr-(zr=rr-this._lo);var ki=(gt=fr+(In=(An=hn-In+(this._hi-An))+rr))+(In=($n=Mn-zr+(this._lo-$n))+(In+(fr-gt))),xi=In+(gt-ki);return this._hi=ki,this._lo=xi,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var m=arguments[0];return this.selfMultiply(m._hi,m._lo)}if(typeof arguments[0]=="number"){var y=arguments[0];return this.selfMultiply(y,0)}}else if(arguments.length===2){var P,j,re=arguments[0],ye=arguments[1],Ae=null,Ke=null,gt=null,rr=null;Ae=(gt=T.SPLIT*this._hi)-this._hi,rr=T.SPLIT*re,Ae=gt-Ae,P=this._hi-Ae,Ke=rr-re;var fr=(gt=this._hi*re)+(rr=Ae*(Ke=rr-Ke)-gt+Ae*(j=re-Ke)+P*Ke+P*j+(this._hi*ye+this._lo*re)),zr=rr+(Ae=gt-fr);return this._hi=fr,this._lo=zr,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return T.NaN;var m=Math.floor(this._hi),y=0;return m===this._hi&&(y=Math.floor(this._lo)),new T(m,y)}},{key:"negate",value:function(){return this.isNaN()?this:new T(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(m){if(m instanceof CloneNotSupportedException)return null;throw m}}},{key:"multiply",value:function(){if(arguments[0]instanceof T){var m=arguments[0];return m.isNaN()?T.createNaN():T.copy(this).selfMultiply(m)}if(typeof arguments[0]=="number"){var y=arguments[0];return we.isNaN(y)?T.createNaN():T.copy(this).selfMultiply(y,0)}}},{key:"isNaN",value:function(){return we.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var m=T.magnitude(this._hi);return m>=-3&&m<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var m=this.getSpecialNumberString();if(m!==null)return m;var y=new Array(1).fill(null),P=this.extractSignificantDigits(!0,y),j=y[0]+1,re=P;if(P.charAt(0)===".")re="0"+P;else if(j<0)re="0."+T.stringOfChar("0",-j)+P;else if(P.indexOf(".")===-1){var ye=j-P.length;re=P+T.stringOfChar("0",ye)+".0"}return this.isNegative()?"-"+re:re}},{key:"reciprocal",value:function(){var m,y,P,j,re=null,ye=null,Ae=null,Ke=null;m=(P=1/this._hi)-(re=(Ae=T.SPLIT*P)-(re=Ae-P)),ye=(Ke=T.SPLIT*this._hi)-this._hi;var gt=P+(Ae=(1-(j=P*this._hi)-(Ke=re*(ye=Ke-ye)-j+re*(y=this._hi-ye)+m*ye+m*y)-P*this._lo)/this._hi);return new T(gt,P-gt+Ae)}},{key:"toSciNotation",value:function(){if(this.isZero())return T.SCI_NOT_ZERO;var m=this.getSpecialNumberString();if(m!==null)return m;var y=new Array(1).fill(null),P=this.extractSignificantDigits(!1,y),j=T.SCI_NOT_EXPONENT_CHAR+y[0];if(P.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+P);var re="";P.length>1&&(re=P.substring(1));var ye=P.charAt(0)+"."+re;return this.isNegative()?"-"+ye+j:ye+j}},{key:"abs",value:function(){return this.isNaN()?T.NaN:this.isNegative()?this.negate():new T(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(m){return this._hi<m._hi||this._hi===m._hi&&this._lo<m._lo}},{key:"add",value:function(){if(arguments[0]instanceof T){var m=arguments[0];return T.copy(this).selfAdd(m)}if(typeof arguments[0]=="number"){var y=arguments[0];return T.copy(this).selfAdd(y)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var m=arguments[0];this._hi=m,this._lo=0}else if(arguments[0]instanceof T){var y=arguments[0];this._hi=y._hi,this._lo=y._lo}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];this._hi=P,this._lo=j}}},{key:"gt",value:function(m){return this._hi>m._hi||this._hi===m._hi&&this._lo>m._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?T.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[X,U,H]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var m=arguments[0];this.init(m)}else if(arguments[0]instanceof T){var y=arguments[0];this.init(y)}else if(typeof arguments[0]=="string"){var P=arguments[0];T.constructor_.call(this,T.parse(P))}}else if(arguments.length===2){var j=arguments[0],re=arguments[1];this.init(j,re)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1],P=arguments[2],j=arguments[3];return T.determinant(T.valueOf(m),T.valueOf(y),T.valueOf(P),T.valueOf(j))}if(arguments[3]instanceof T&&arguments[2]instanceof T&&arguments[0]instanceof T&&arguments[1]instanceof T){var re=arguments[1],ye=arguments[2],Ae=arguments[3];return arguments[0].multiply(Ae).selfSubtract(re.multiply(ye))}}},{key:"sqr",value:function(m){return T.valueOf(m).selfMultiply(m)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var m=arguments[0];return T.parse(m)}if(typeof arguments[0]=="number")return new T(arguments[0])}},{key:"sqrt",value:function(m){return T.valueOf(m).sqrt()}},{key:"parse",value:function(m){for(var y=0,P=m.length;Pr.isWhitespace(m.charAt(y));)y++;var j=!1;if(y<P){var re=m.charAt(y);re!=="-"&&re!=="+"||(y++,re==="-"&&(j=!0))}for(var ye=new T,Ae=0,Ke=0,gt=0,rr=!1;!(y>=P);){var fr=m.charAt(y);if(y++,Pr.isDigit(fr)){var zr=fr-"0";ye.selfMultiply(T.TEN),ye.selfAdd(zr),Ae++}else{if(fr!=="."){if(fr==="e"||fr==="E"){var hn=m.substring(y);try{gt=lr.parseInt(hn)}catch(ki){throw ki instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+hn+" in string "+m):ki}break}throw new NumberFormatException("Unexpected character '"+fr+"' at position "+y+" in string "+m)}Ke=Ae,rr=!0}}var Mn=ye;rr||(Ke=Ae);var $n=Ae-Ke-gt;if($n===0)Mn=ye;else if($n>0){var An=T.TEN.pow($n);Mn=ye.divide(An)}else if($n<0){var In=T.TEN.pow(-$n);Mn=ye.multiply(In)}return j?Mn.negate():Mn}},{key:"createNaN",value:function(){return new T(we.NaN,we.NaN)}},{key:"copy",value:function(m){return new T(m)}},{key:"magnitude",value:function(m){var y=Math.abs(m),P=Math.log(y)/Math.log(10),j=Math.trunc(Math.floor(P));return 10*Math.pow(10,j)<=y&&(j+=1),j}},{key:"stringOfChar",value:function(m,y){for(var P=new nr,j=0;j<y;j++)P.append(m);return P.toString()}}])})();ar.PI=new ar(3.141592653589793,12246467991473532e-32),ar.TWO_PI=new ar(6.283185307179586,24492935982947064e-32),ar.PI_2=new ar(1.5707963267948966,6123233995736766e-32),ar.E=new ar(2.718281828459045,14456468917292502e-32),ar.NaN=new ar(we.NaN,we.NaN),ar.EPS=123259516440783e-46,ar.SPLIT=134217729,ar.MAX_PRINT_DIGITS=32,ar.TEN=ar.valueOf(10),ar.ONE=ar.valueOf(1),ar.SCI_NOT_EXPONENT_CHAR="E",ar.SCI_NOT_ZERO="0.0E0";var kr=(function(){function T(){i(this,T)}return a(T,null,[{key:"orientationIndex",value:function(m,y,P){var j=T.orientationIndexFilter(m,y,P);if(j<=1)return j;var re=ar.valueOf(y.x).selfAdd(-m.x),ye=ar.valueOf(y.y).selfAdd(-m.y),Ae=ar.valueOf(P.x).selfAdd(-y.x),Ke=ar.valueOf(P.y).selfAdd(-y.y);return re.selfMultiply(Ke).selfSubtract(ye.selfMultiply(Ae)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof ar&&arguments[2]instanceof ar&&arguments[0]instanceof ar&&arguments[1]instanceof ar){var m=arguments[1],y=arguments[2],P=arguments[3];return arguments[0].multiply(P).selfSubtract(m.multiply(y)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var j=arguments[0],re=arguments[1],ye=arguments[2],Ae=arguments[3],Ke=ar.valueOf(j),gt=ar.valueOf(re),rr=ar.valueOf(ye),fr=ar.valueOf(Ae);return Ke.multiply(fr).selfSubtract(gt.multiply(rr)).signum()}}},{key:"intersection",value:function(m,y,P,j){var re=new ar(m.y).selfSubtract(y.y),ye=new ar(y.x).selfSubtract(m.x),Ae=new ar(m.x).selfMultiply(y.y).selfSubtract(new ar(y.x).selfMultiply(m.y)),Ke=new ar(P.y).selfSubtract(j.y),gt=new ar(j.x).selfSubtract(P.x),rr=new ar(P.x).selfMultiply(j.y).selfSubtract(new ar(j.x).selfMultiply(P.y)),fr=ye.multiply(rr).selfSubtract(gt.multiply(Ae)),zr=Ke.multiply(Ae).selfSubtract(re.multiply(rr)),hn=re.multiply(gt).selfSubtract(Ke.multiply(ye)),Mn=fr.selfDivide(hn).doubleValue(),$n=zr.selfDivide(hn).doubleValue();return we.isNaN(Mn)||we.isInfinite(Mn)||we.isNaN($n)||we.isInfinite($n)?null:new Oe(Mn,$n)}},{key:"orientationIndexFilter",value:function(m,y,P){var j=null,re=(m.x-P.x)*(y.y-P.y),ye=(m.y-P.y)*(y.x-P.x),Ae=re-ye;if(re>0){if(ye<=0)return T.signum(Ae);j=re+ye}else{if(!(re<0)||ye>=0)return T.signum(Ae);j=-re-ye}var Ke=T.DP_SAFE_EPSILON*j;return Ae>=Ke||-Ae>=Ke?T.signum(Ae):2}},{key:"signum",value:function(m){return m>0?1:m<0?-1:0}}])})();kr.DP_SAFE_EPSILON=1e-15;var Qt=(function(){return a((function T(){i(this,T)}),[{key:"getM",value:function(T){if(this.hasM()){var m=this.getDimension()-this.getMeasures();return this.getOrdinate(T,m)}return we.NaN}},{key:"setOrdinate",value:function(T,m,y){}},{key:"getZ",value:function(T){return this.hasZ()?this.getOrdinate(T,2):we.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(T,m){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(T){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(T){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(T){}},{key:"copy",value:function(){}},{key:"getY",value:function(T){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[H]}}])})();Qt.X=0,Qt.Y=1,Qt.Z=2,Qt.M=3;var Ht=(function(){function T(){i(this,T)}return a(T,null,[{key:"index",value:function(m,y,P){return kr.orientationIndex(m,y,P)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var m=arguments[0],y=m.length-1;if(y<3)throw new q("Ring has fewer than 4 points, so orientation cannot be determined");for(var P=m[0],j=0,re=1;re<=y;re++){var ye=m[re];ye.y>P.y&&(P=ye,j=re)}var Ae=j;do(Ae-=1)<0&&(Ae=y);while(m[Ae].equals2D(P)&&Ae!==j);var Ke=j;do Ke=(Ke+1)%y;while(m[Ke].equals2D(P)&&Ke!==j);var gt=m[Ae],rr=m[Ke];if(gt.equals2D(P)||rr.equals2D(P)||gt.equals2D(rr))return!1;var fr=T.index(gt,P,rr);return fr===0?gt.x>rr.x:fr>0}if(br(arguments[0],Qt)){var zr=arguments[0],hn=zr.size()-1;if(hn<3)throw new q("Ring has fewer than 4 points, so orientation cannot be determined");for(var Mn=zr.getCoordinate(0),$n=0,An=1;An<=hn;An++){var In=zr.getCoordinate(An);In.y>Mn.y&&(Mn=In,$n=An)}var ki=null,xi=$n;do(xi-=1)<0&&(xi=hn),ki=zr.getCoordinate(xi);while(ki.equals2D(Mn)&&xi!==$n);var Ya=null,Za=$n;do Za=(Za+1)%hn,Ya=zr.getCoordinate(Za);while(Ya.equals2D(Mn)&&Za!==$n);if(ki.equals2D(Mn)||Ya.equals2D(Mn)||ki.equals2D(Ya))return!1;var Ao=T.index(ki,Mn,Ya);return Ao===0?ki.x>Ya.x:Ao>0}}}])})();Ht.CLOCKWISE=-1,Ht.RIGHT=Ht.CLOCKWISE,Ht.COUNTERCLOCKWISE=1,Ht.LEFT=Ht.COUNTERCLOCKWISE,Ht.COLLINEAR=0,Ht.STRAIGHT=Ht.COLLINEAR;var Ct=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(T,m){var y=this.getRightmostSideOfSegment(T,m);return y<0&&(y=this.getRightmostSideOfSegment(T,m-1)),y<0&&(this._minCoord=null,this.checkForRightmostCoordinate(T)),y}},{key:"findRightmostEdgeAtVertex",value:function(){var T=this._minDe.getEdge().getCoordinates();be.isTrue(this._minIndex>0&&this._minIndex<T.length,"rightmost point expected to be interior vertex of edge");var m=T[this._minIndex-1],y=T[this._minIndex+1],P=Ht.index(this._minCoord,y,m),j=!1;(m.y<this._minCoord.y&&y.y<this._minCoord.y&&P===Ht.COUNTERCLOCKWISE||m.y>this._minCoord.y&&y.y>this._minCoord.y&&P===Ht.CLOCKWISE)&&(j=!0),j&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(T,m){var y=T.getEdge().getCoordinates();if(m<0||m+1>=y.length||y[m].y===y[m+1].y)return-1;var P=at.LEFT;return y[m].y<y[m+1].y&&(P=at.RIGHT),P}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(T){for(var m=T.getEdge().getCoordinates(),y=0;y<m.length-1;y++)(this._minCoord===null||m[y].x>this._minCoord.x)&&(this._minDe=T,this._minIndex=y,this._minCoord=m[y])}},{key:"findRightmostEdgeAtNode",value:function(){var T=this._minDe.getNode().getEdges();this._minDe=T.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(T){for(var m=T.iterator();m.hasNext();){var y=m.next();y.isForward()&&this.checkForRightmostCoordinate(y)}be.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===at.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])})(),Re=(function(T){function m(y,P){var j;return i(this,m),(j=n(this,m,[P?y+" [ "+P+" ]":y])).pt=P?new Oe(P):void 0,j.name=Object.keys({TopologyException:m})[0],j}return v(m,T),a(m,[{key:"getCoordinate",value:function(){return this.pt}}])})(ce),Be=(function(){return a((function T(){i(this,T),this.array=[]}),[{key:"addLast",value:function(T){this.array.push(T)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])})(),De=(function(T){function m(y){var P;return i(this,m),(P=n(this,m)).array=[],y instanceof Mt&&P.addAll(y),P}return v(m,T),a(m,[{key:"interfaces_",get:function(){return[ur,Mt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(y){return arguments.length===1?this.array.push(y):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(y){var P,j=c(y);try{for(j.s();!(P=j.n()).done;){var re=P.value;this.array.push(re)}}catch(ye){j.e(ye)}finally{j.f()}}},{key:"set",value:function(y,P){var j=this.array[y];return this.array[y]=P,j}},{key:"iterator",value:function(){return new rt(this)}},{key:"get",value:function(y){if(y<0||y>=this.size())throw new hr;return this.array[y]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(y){y?this.array.sort((function(P,j){return y.compare(P,j)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(y){for(var P=0,j=this.array.length;P<j;P++)if(this.array[P]===y)return!!this.array.splice(P,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])})(ur),rt=(function(){return a((function T(m){i(this,T),this.arrayList=m,this.position=0}),[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new ot;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(T){return this.arrayList.set(this.position-1,T)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])})(),mt=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"clearVisitedEdges",value:function(){for(var T=this._dirEdgeList.iterator();T.hasNext();)T.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(T){for(var m=null,y=T.getEdges().iterator();y.hasNext();){var P=y.next();if(P.isVisited()||P.getSym().isVisited()){m=P;break}}if(m===null)throw new Re("unable to find edge to compute depths at "+T.getCoordinate());T.getEdges().computeDepths(m);for(var j=T.getEdges().iterator();j.hasNext();){var re=j.next();re.setVisited(!0),this.copySymDepths(re)}}},{key:"computeDepth",value:function(T){this.clearVisitedEdges();var m=this._finder.getEdge();m.getNode(),m.getLabel(),m.setEdgeDepths(at.RIGHT,T),this.copySymDepths(m),this.computeDepths(m)}},{key:"create",value:function(T){this.addReachable(T),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var T=this._dirEdgeList.iterator();T.hasNext();){var m=T.next();m.getDepth(at.RIGHT)>=1&&m.getDepth(at.LEFT)<=0&&!m.isInteriorAreaEdge()&&m.setInResult(!0)}}},{key:"computeDepths",value:function(T){var m=new Wt,y=new Be,P=T.getNode();for(y.addLast(P),m.add(P),T.setVisited(!0);!y.isEmpty();){var j=y.removeFirst();m.add(j),this.computeNodeDepth(j);for(var re=j.getEdges().iterator();re.hasNext();){var ye=re.next().getSym();if(!ye.isVisited()){var Ae=ye.getNode();m.contains(Ae)||(y.addLast(Ae),m.add(Ae))}}}}},{key:"compareTo",value:function(T){var m=T;return this._rightMostCoord.x<m._rightMostCoord.x?-1:this._rightMostCoord.x>m._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var T=new Ze,m=this._dirEdgeList.iterator();m.hasNext();)for(var y=m.next().getEdge().getCoordinates(),P=0;P<y.length-1;P++)T.expandToInclude(y[P]);this._env=T}return this._env}},{key:"addReachable",value:function(T){var m=new Cr;for(m.add(T);!m.empty();){var y=m.pop();this.add(y,m)}}},{key:"copySymDepths",value:function(T){var m=T.getSym();m.setDepth(at.LEFT,T.getDepth(at.RIGHT)),m.setDepth(at.RIGHT,T.getDepth(at.LEFT))}},{key:"add",value:function(T,m){T.setVisited(!0),this._nodes.add(T);for(var y=T.getEdges().iterator();y.hasNext();){var P=y.next();this._dirEdgeList.add(P);var j=P.getSym().getNode();j.isVisited()||m.push(j)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new De,this._nodes=new De,this._rightMostCoord=null,this._env=null,this._finder=new Ct}}])})(),At=(function(){return a((function T(){i(this,T)}),null,[{key:"intersection",value:function(T,m,y,P){var j=T.x<m.x?T.x:m.x,re=T.y<m.y?T.y:m.y,ye=T.x>m.x?T.x:m.x,Ae=T.y>m.y?T.y:m.y,Ke=y.x<P.x?y.x:P.x,gt=y.y<P.y?y.y:P.y,rr=y.x>P.x?y.x:P.x,fr=y.y>P.y?y.y:P.y,zr=((j>Ke?j:Ke)+(ye<rr?ye:rr))/2,hn=((re>gt?re:gt)+(Ae<fr?Ae:fr))/2,Mn=T.x-zr,$n=T.y-hn,An=m.x-zr,In=m.y-hn,ki=y.x-zr,xi=y.y-hn,Ya=P.x-zr,Za=P.y-hn,Ao=$n-In,Mo=An-Mn,gl=Mn*In-An*$n,Ll=xi-Za,Os=Ya-ki,as=ki*Za-Ya*xi,Ru=Ao*Os-Ll*Mo,os=(Mo*as-Os*gl)/Ru,Aa=(Ll*gl-Ao*as)/Ru;return we.isNaN(os)||we.isInfinite(os)||we.isNaN(Aa)||we.isInfinite(Aa)?null:new Oe(os+zr,Aa+hn)}}])})(),Ot=(function(){return a((function T(){i(this,T)}),null,[{key:"arraycopy",value:function(T,m,y,P,j){for(var re=0,ye=m;ye<m+j;ye++)y[P+re]=T[ye],re++}},{key:"getProperty",value:function(T){return{"line.separator":`
`}[T]}}])})(),Tt=(function(){function T(){i(this,T)}return a(T,null,[{key:"log10",value:function(m){var y=Math.log(m);return we.isInfinite(y)||we.isNaN(y)?y:y/T.LOG_10}},{key:"min",value:function(m,y,P,j){var re=m;return y<re&&(re=y),P<re&&(re=P),j<re&&(re=j),re}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1],P=arguments[2];return m<y?y:m>P?P:m}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var j=arguments[0],re=arguments[1],ye=arguments[2];return j<re?re:j>ye?ye:j}}},{key:"wrap",value:function(m,y){return m<0?y- -m%y:m%y}},{key:"max",value:function(){if(arguments.length===3){var m=arguments[1],y=arguments[2],P=arguments[0];return m>P&&(P=m),y>P&&(P=y),P}if(arguments.length===4){var j=arguments[1],re=arguments[2],ye=arguments[3],Ae=arguments[0];return j>Ae&&(Ae=j),re>Ae&&(Ae=re),ye>Ae&&(Ae=ye),Ae}}},{key:"average",value:function(m,y){return(m+y)/2}}])})();Tt.LOG_10=Math.log(10);var Yt=(function(){function T(){i(this,T)}return a(T,null,[{key:"segmentToSegment",value:function(m,y,P,j){if(m.equals(y))return T.pointToSegment(m,P,j);if(P.equals(j))return T.pointToSegment(j,m,y);var re=!1;if(Ze.intersects(m,y,P,j)){var ye=(y.x-m.x)*(j.y-P.y)-(y.y-m.y)*(j.x-P.x);if(ye===0)re=!0;else{var Ae=(m.y-P.y)*(j.x-P.x)-(m.x-P.x)*(j.y-P.y),Ke=((m.y-P.y)*(y.x-m.x)-(m.x-P.x)*(y.y-m.y))/ye,gt=Ae/ye;(gt<0||gt>1||Ke<0||Ke>1)&&(re=!0)}}else re=!0;return re?Tt.min(T.pointToSegment(m,P,j),T.pointToSegment(y,P,j),T.pointToSegment(P,m,y),T.pointToSegment(j,m,y)):0}},{key:"pointToSegment",value:function(m,y,P){if(y.x===P.x&&y.y===P.y)return m.distance(y);var j=(P.x-y.x)*(P.x-y.x)+(P.y-y.y)*(P.y-y.y),re=((m.x-y.x)*(P.x-y.x)+(m.y-y.y)*(P.y-y.y))/j;if(re<=0)return m.distance(y);if(re>=1)return m.distance(P);var ye=((y.y-m.y)*(P.x-y.x)-(y.x-m.x)*(P.y-y.y))/j;return Math.abs(ye)*Math.sqrt(j)}},{key:"pointToLinePerpendicular",value:function(m,y,P){var j=(P.x-y.x)*(P.x-y.x)+(P.y-y.y)*(P.y-y.y),re=((y.y-m.y)*(P.x-y.x)-(y.x-m.x)*(P.y-y.y))/j;return Math.abs(re)*Math.sqrt(j)}},{key:"pointToSegmentString",value:function(m,y){if(y.length===0)throw new q("Line array must contain at least one vertex");for(var P=m.distance(y[0]),j=0;j<y.length-1;j++){var re=T.pointToSegment(m,y[j],y[j+1]);re<P&&(P=re)}return P}}])})(),Bt=(function(){return a((function T(){i(this,T)}),[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||br(arguments[0],Qt);else if(arguments.length!==2){if(arguments.length===3){var T=arguments[0],m=arguments[1];return this.create(T,m)}}}}])})(),wt=(function(){return a((function T(){i(this,T)}),[{key:"filter",value:function(T){}}])})(),Xt=(function(){return a((function T(){i(this,T)}),null,[{key:"ofLine",value:function(T){var m=T.size();if(m<=1)return 0;var y=0,P=new Oe;T.getCoordinate(0,P);for(var j=P.x,re=P.y,ye=1;ye<m;ye++){T.getCoordinate(ye,P);var Ae=P.x,Ke=P.y,gt=Ae-j,rr=Ke-re;y+=Math.sqrt(gt*gt+rr*rr),j=Ae,re=Ke}return y}}])})(),Et=a((function T(){i(this,T)})),Ir=(function(){function T(){i(this,T)}return a(T,null,[{key:"copyCoord",value:function(m,y,P,j){for(var re=Math.min(m.getDimension(),P.getDimension()),ye=0;ye<re;ye++)P.setOrdinate(j,ye,m.getOrdinate(y,ye))}},{key:"isRing",value:function(m){var y=m.size();return y===0||!(y<=3)&&m.getOrdinate(0,Qt.X)===m.getOrdinate(y-1,Qt.X)&&m.getOrdinate(0,Qt.Y)===m.getOrdinate(y-1,Qt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(br(arguments[0],Qt)&&Number.isInteger(arguments[1])){var m=arguments[0],y=arguments[1];T.scroll(m,y,T.isRing(m))}else if(br(arguments[0],Qt)&&arguments[1]instanceof Oe){var P=arguments[0],j=arguments[1],re=T.indexOf(j,P);if(re<=0)return null;T.scroll(P,re)}}else if(arguments.length===3){var ye=arguments[0],Ae=arguments[1],Ke=arguments[2];if(Ae<=0)return null;for(var gt=ye.copy(),rr=Ke?ye.size()-1:ye.size(),fr=0;fr<rr;fr++)for(var zr=0;zr<ye.getDimension();zr++)ye.setOrdinate(fr,zr,gt.getOrdinate((Ae+fr)%rr,zr));if(Ke)for(var hn=0;hn<ye.getDimension();hn++)ye.setOrdinate(rr,hn,ye.getOrdinate(0,hn))}}},{key:"isEqual",value:function(m,y){var P=m.size();if(P!==y.size())return!1;for(var j=Math.min(m.getDimension(),y.getDimension()),re=0;re<P;re++)for(var ye=0;ye<j;ye++){var Ae=m.getOrdinate(re,ye),Ke=y.getOrdinate(re,ye);if(m.getOrdinate(re,ye)!==y.getOrdinate(re,ye)&&(!we.isNaN(Ae)||!we.isNaN(Ke)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var m=arguments[0];return T.minCoordinateIndex(m,0,m.size()-1)}if(arguments.length===3){for(var y=arguments[0],P=arguments[2],j=-1,re=null,ye=arguments[1];ye<=P;ye++){var Ae=y.getCoordinate(ye);(re===null||re.compareTo(Ae)>0)&&(re=Ae,j=ye)}return j}}},{key:"extend",value:function(m,y,P){var j=m.create(P,y.getDimension()),re=y.size();if(T.copy(y,0,j,0,re),re>0)for(var ye=re;ye<P;ye++)T.copy(y,re-1,j,ye,1);return j}},{key:"reverse",value:function(m){for(var y=m.size()-1,P=Math.trunc(y/2),j=0;j<=P;j++)T.swap(m,j,y-j)}},{key:"swap",value:function(m,y,P){if(y===P)return null;for(var j=0;j<m.getDimension();j++){var re=m.getOrdinate(y,j);m.setOrdinate(y,j,m.getOrdinate(P,j)),m.setOrdinate(P,j,re)}}},{key:"copy",value:function(m,y,P,j,re){for(var ye=0;ye<re;ye++)T.copyCoord(m,y+ye,P,j+ye)}},{key:"ensureValidRing",value:function(m,y){var P=y.size();return P===0?y:P<=3?T.createClosedRing(m,y,4):y.getOrdinate(0,Qt.X)===y.getOrdinate(P-1,Qt.X)&&y.getOrdinate(0,Qt.Y)===y.getOrdinate(P-1,Qt.Y)?y:T.createClosedRing(m,y,P+1)}},{key:"indexOf",value:function(m,y){for(var P=0;P<y.size();P++)if(m.x===y.getOrdinate(P,Qt.X)&&m.y===y.getOrdinate(P,Qt.Y))return P;return-1}},{key:"createClosedRing",value:function(m,y,P){var j=m.create(P,y.getDimension()),re=y.size();T.copy(y,0,j,0,re);for(var ye=re;ye<P;ye++)T.copy(y,0,j,ye,1);return j}},{key:"minCoordinate",value:function(m){for(var y=null,P=0;P<m.size();P++){var j=m.getCoordinate(P);(y===null||y.compareTo(j)>0)&&(y=j)}return y}}])})(),$t=(function(){function T(){i(this,T)}return a(T,null,[{key:"toDimensionSymbol",value:function(m){switch(m){case T.FALSE:return T.SYM_FALSE;case T.TRUE:return T.SYM_TRUE;case T.DONTCARE:return T.SYM_DONTCARE;case T.P:return T.SYM_P;case T.L:return T.SYM_L;case T.A:return T.SYM_A}throw new q("Unknown dimension value: "+m)}},{key:"toDimensionValue",value:function(m){switch(Pr.toUpperCase(m)){case T.SYM_FALSE:return T.FALSE;case T.SYM_TRUE:return T.TRUE;case T.SYM_DONTCARE:return T.DONTCARE;case T.SYM_P:return T.P;case T.SYM_L:return T.L;case T.SYM_A:return T.A}throw new q("Unknown dimension symbol: "+m)}}])})();$t.P=0,$t.L=1,$t.A=2,$t.FALSE=-1,$t.TRUE=-2,$t.DONTCARE=-3,$t.SYM_FALSE="F",$t.SYM_TRUE="T",$t.SYM_DONTCARE="*",$t.SYM_P="0",$t.SYM_L="1",$t.SYM_A="2";var Vr=(function(){return a((function T(){i(this,T)}),[{key:"filter",value:function(T){}}])})(),Rr=(function(){return a((function T(){i(this,T)}),[{key:"filter",value:function(T,m){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])})(),un=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Ze:this._points.expandEnvelope(new Ze)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new m(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Qe){var y=arguments[0],P=arguments[1];if(!this.isEquivalentClass(y))return!1;var j=y;if(this._points.size()!==j._points.size())return!1;for(var re=0;re<this._points.size();re++)if(!this.equal(this._points.getCoordinate(re),j._points.getCoordinate(re),P))return!1;return!0}return S(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var y=0;y<Math.trunc(this._points.size()/2);y++){var P=this._points.size()-1-y;if(!this._points.getCoordinate(y).equals(this._points.getCoordinate(P))){if(this._points.getCoordinate(y).compareTo(this._points.getCoordinate(P))>0){var j=this._points.copy();Ir.reverse(j),this._points=j}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?$t.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var y=this._points.copy();return Ir.reverse(y),this.getFactory().createLineString(y)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Xt.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var y=arguments[0],P=0,j=0;P<this._points.size()&&j<y._points.size();){var re=this._points.getCoordinate(P).compareTo(y._points.getCoordinate(j));if(re!==0)return re;P++,j++}return P<this._points.size()?1:j<y._points.size()?-1:0}if(arguments.length===2){var ye=arguments[0];return arguments[1].compare(this._points,ye._points)}}},{key:"apply",value:function(){if(br(arguments[0],wt))for(var y=arguments[0],P=0;P<this._points.size();P++)y.filter(this._points.getCoordinate(P));else if(br(arguments[0],Rr)){var j=arguments[0];if(this._points.size()===0)return null;for(var re=0;re<this._points.size()&&(j.filter(this._points,re),!j.isDone());re++);j.isGeometryChanged()&&this.geometryChanged()}else br(arguments[0],Vr)?arguments[0].filter(this):br(arguments[0],z)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new $e}},{key:"isEquivalentClass",value:function(y){return y instanceof m}},{key:"getCoordinateN",value:function(y){return this._points.getCoordinate(y)}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(y){if(y===null&&(y=this.getFactory().getCoordinateSequenceFactory().create([])),y.size()===1)throw new q("Invalid number of points in LineString (found "+y.size()+" - must be 0 or >= 2)");this._points=y}},{key:"isCoordinate",value:function(y){for(var P=0;P<this._points.size();P++)if(this._points.getCoordinate(P).equals(y))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(y){return this.getFactory().createPoint(this._points.getCoordinate(y))}},{key:"interfaces_",get:function(){return[Et]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var y=arguments[0],P=arguments[1];Qe.constructor_.call(this,P),this.init(y)}}}}])})(Qe),Te=a((function T(){i(this,T)})),qe=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Ze;var y=new Ze;return y.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),y}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new m(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Qe){var y=arguments[0],P=arguments[1];return!!this.isEquivalentClass(y)&&(!(!this.isEmpty()||!y.isEmpty())||this.isEmpty()===y.isEmpty()&&this.equal(y.getCoordinate(),this.getCoordinate(),P))}return S(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return $t.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var y=arguments[0];return this.getCoordinate().compareTo(y.getCoordinate())}if(arguments.length===2){var P=arguments[0];return arguments[1].compare(this._coordinates,P._coordinates)}}},{key:"apply",value:function(){if(br(arguments[0],wt)){var y=arguments[0];if(this.isEmpty())return null;y.filter(this.getCoordinate())}else if(br(arguments[0],Rr)){var P=arguments[0];if(this.isEmpty())return null;P.filter(this._coordinates,0),P.isGeometryChanged()&&this.geometryChanged()}else br(arguments[0],Vr)?arguments[0].filter(this):br(arguments[0],z)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(y){y===null&&(y=this.getFactory().getCoordinateSequenceFactory().create([])),be.isTrue(y.size()<=1),this._coordinates=y}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Te]}}],[{key:"constructor_",value:function(){this._coordinates=null;var y=arguments[0],P=arguments[1];Qe.constructor_.call(this,P),this.init(y)}}])})(Qe),ht=(function(){function T(){i(this,T)}return a(T,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var m=arguments[0];return Math.abs(T.ofRingSigned(m))}if(br(arguments[0],Qt)){var y=arguments[0];return Math.abs(T.ofRingSigned(y))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var m=arguments[0];if(m.length<3)return 0;for(var y=0,P=m[0].x,j=1;j<m.length-1;j++){var re=m[j].x-P,ye=m[j+1].y;y+=re*(m[j-1].y-ye)}return y/2}if(br(arguments[0],Qt)){var Ae=arguments[0],Ke=Ae.size();if(Ke<3)return 0;var gt=new Oe,rr=new Oe,fr=new Oe;Ae.getCoordinate(0,rr),Ae.getCoordinate(1,fr);var zr=rr.x;fr.x-=zr;for(var hn=0,Mn=1;Mn<Ke-1;Mn++)gt.y=rr.y,rr.x=fr.x,rr.y=fr.y,Ae.getCoordinate(Mn+1,fr),fr.x-=zr,hn+=rr.x*(gt.y-fr.y);return hn/2}}}])})(),kt=(function(){return a((function T(){i(this,T)}),null,[{key:"sort",value:function(){var T=arguments,m=arguments[0];if(arguments.length===1)m.sort((function(zr,hn){return zr.compareTo(hn)}));else if(arguments.length===2)m.sort((function(zr,hn){return T[1].compare(zr,hn)}));else if(arguments.length===3){var y=m.slice(arguments[1],arguments[2]);y.sort();var P=m.slice(0,arguments[1]).concat(y,m.slice(arguments[2],m.length));m.splice(0,m.length);var j,re=c(P);try{for(re.s();!(j=re.n()).done;){var ye=j.value;m.push(ye)}}catch(zr){re.e(zr)}finally{re.f()}}else if(arguments.length===4){var Ae=m.slice(arguments[1],arguments[2]);Ae.sort((function(zr,hn){return T[3].compare(zr,hn)}));var Ke=m.slice(0,arguments[1]).concat(Ae,m.slice(arguments[2],m.length));m.splice(0,m.length);var gt,rr=c(Ke);try{for(rr.s();!(gt=rr.n()).done;){var fr=gt.value;m.push(fr)}}catch(zr){rr.e(zr)}finally{rr.f()}}}},{key:"asList",value:function(T){var m,y=new De,P=c(T);try{for(P.s();!(m=P.n()).done;){var j=m.value;y.add(j)}}catch(re){P.e(re)}finally{P.f()}return y}},{key:"copyOf",value:function(T,m){return T.slice(0,m)}}])})(),gr=a((function T(){i(this,T)})),Ur=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var y=new Array(this.getNumPoints()).fill(null),P=-1,j=this._shell.getCoordinates(),re=0;re<j.length;re++)y[++P]=j[re];for(var ye=0;ye<this._holes.length;ye++)for(var Ae=this._holes[ye].getCoordinates(),Ke=0;Ke<Ae.length;Ke++)y[++P]=Ae[Ke];return y}},{key:"getArea",value:function(){var y=0;y+=ht.ofRing(this._shell.getCoordinateSequence());for(var P=0;P<this._holes.length;P++)y-=ht.ofRing(this._holes[P].getCoordinateSequence());return y}},{key:"copyInternal",value:function(){for(var y=this._shell.copy(),P=new Array(this._holes.length).fill(null),j=0;j<this._holes.length;j++)P[j]=this._holes[j].copy();return new m(y,P,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var y=this._shell.getCoordinateSequence(),P=this.getEnvelopeInternal(),j=0;j<5;j++){var re=y.getX(j);if(re!==P.getMinX()&&re!==P.getMaxX())return!1;var ye=y.getY(j);if(ye!==P.getMinY()&&ye!==P.getMaxY())return!1}for(var Ae=y.getX(0),Ke=y.getY(0),gt=1;gt<=4;gt++){var rr=y.getX(gt),fr=y.getY(gt);if(rr!==Ae==(fr!==Ke))return!1;Ae=rr,Ke=fr}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Qe){var y=arguments[0],P=arguments[1];if(!this.isEquivalentClass(y))return!1;var j=y,re=this._shell,ye=j._shell;if(!re.equalsExact(ye,P)||this._holes.length!==j._holes.length)return!1;for(var Ae=0;Ae<this._holes.length;Ae++)if(!this._holes[Ae].equalsExact(j._holes[Ae],P))return!1;return!0}return S(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var y=0;y<this._holes.length;y++)this._holes[y]=this.normalized(this._holes[y],!1);kt.sort(this._holes)}else if(arguments.length===2){var P=arguments[0],j=arguments[1];if(P.isEmpty())return null;var re=P.getCoordinateSequence(),ye=Ir.minCoordinateIndex(re,0,re.size()-2);Ir.scroll(re,ye,!0),Ht.isCCW(re)===j&&Ir.reverse(re)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var y=this.getExteriorRing().reverse(),P=new Array(this.getNumInteriorRing()).fill(null),j=0;j<P.length;j++)P[j]=this.getInteriorRingN(j).reverse();return this.getFactory().createPolygon(y,P)}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var y=0;y+=this._shell.getLength();for(var P=0;P<this._holes.length;P++)y+=this._holes[P].getLength();return y}},{key:"getNumPoints",value:function(){for(var y=this._shell.getNumPoints(),P=0;P<this._holes.length;P++)y+=this._holes[P].getNumPoints();return y}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(y,P){var j=y.copy();return this.normalize(j,P),j}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var y=arguments[0],P=this._shell,j=y._shell;return P.compareToSameClass(j)}if(arguments.length===2){var re=arguments[1],ye=arguments[0],Ae=this._shell,Ke=ye._shell,gt=Ae.compareToSameClass(Ke,re);if(gt!==0)return gt;for(var rr=this.getNumInteriorRing(),fr=ye.getNumInteriorRing(),zr=0;zr<rr&&zr<fr;){var hn=this.getInteriorRingN(zr),Mn=ye.getInteriorRingN(zr),$n=hn.compareToSameClass(Mn,re);if($n!==0)return $n;zr++}return zr<rr?1:zr<fr?-1:0}}},{key:"apply",value:function(){if(br(arguments[0],wt)){var y=arguments[0];this._shell.apply(y);for(var P=0;P<this._holes.length;P++)this._holes[P].apply(y)}else if(br(arguments[0],Rr)){var j=arguments[0];if(this._shell.apply(j),!j.isDone())for(var re=0;re<this._holes.length&&(this._holes[re].apply(j),!j.isDone());re++);j.isGeometryChanged()&&this.geometryChanged()}else if(br(arguments[0],Vr))arguments[0].filter(this);else if(br(arguments[0],z)){var ye=arguments[0];ye.filter(this),this._shell.apply(ye);for(var Ae=0;Ae<this._holes.length;Ae++)this._holes[Ae].apply(ye)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var y=new Array(this._holes.length+1).fill(null);y[0]=this._shell;for(var P=0;P<this._holes.length;P++)y[P+1]=this._holes[P];return y.length<=1?this.getFactory().createLinearRing(y[0].getCoordinateSequence()):this.getFactory().createMultiLineString(y)}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(y){return this._holes[y]}},{key:"interfaces_",get:function(){return[gr]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var y=arguments[0],P=arguments[1],j=arguments[2];if(Qe.constructor_.call(this,j),y===null&&(y=this.getFactory().createLinearRing()),P===null&&(P=[]),Qe.hasNullElements(P))throw new q("holes must not contain null elements");if(y.isEmpty()&&Qe.hasNonEmptyElements(P))throw new q("shell is empty but holes are not");this._shell=y,this._holes=P}}])})(Qe),Er=(function(T){function m(){return i(this,m),n(this,m,arguments)}return v(m,T),a(m)})(tr),si=(function(T){function m(y){var P;return i(this,m),(P=n(this,m)).array=[],y instanceof Mt&&P.addAll(y),P}return v(m,T),a(m,[{key:"contains",value:function(y){var P,j=c(this.array);try{for(j.s();!(P=j.n()).done;)if(P.value.compareTo(y)===0)return!0}catch(re){j.e(re)}finally{j.f()}return!1}},{key:"add",value:function(y){if(this.contains(y))return!1;for(var P=0,j=this.array.length;P<j;P++)if(this.array[P].compareTo(y)===1)return!!this.array.splice(P,0,y);return this.array.push(y),!0}},{key:"addAll",value:function(y){var P,j=c(y);try{for(j.s();!(P=j.n()).done;){var re=P.value;this.add(re)}}catch(ye){j.e(ye)}finally{j.f()}return!0}},{key:"remove",value:function(){throw new $e}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Hn(this.array)}}])})(Er),Hn=(function(){return a((function T(m){i(this,T),this.array=m,this.position=0}),[{key:"next",value:function(){if(this.position===this.array.length)throw new ot;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new $e}}])})(),di=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"computeEnvelopeInternal",value:function(){for(var y=new Ze,P=0;P<this._geometries.length;P++)y.expandToInclude(this._geometries[P].getEnvelopeInternal());return y}},{key:"getGeometryN",value:function(y){return this._geometries[y]}},{key:"getCoordinates",value:function(){for(var y=new Array(this.getNumPoints()).fill(null),P=-1,j=0;j<this._geometries.length;j++)for(var re=this._geometries[j].getCoordinates(),ye=0;ye<re.length;ye++)y[++P]=re[ye];return y}},{key:"getArea",value:function(){for(var y=0,P=0;P<this._geometries.length;P++)y+=this._geometries[P].getArea();return y}},{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),P=0;P<y.length;P++)y[P]=this._geometries[P].copy();return new m(y,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Qe){var y=arguments[0],P=arguments[1];if(!this.isEquivalentClass(y))return!1;var j=y;if(this._geometries.length!==j._geometries.length)return!1;for(var re=0;re<this._geometries.length;re++)if(!this._geometries[re].equalsExact(j._geometries[re],P))return!1;return!0}return S(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var y=0;y<this._geometries.length;y++)this._geometries[y].normalize();kt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var y=$t.FALSE,P=0;P<this._geometries.length;P++)y=Math.max(y,this._geometries[P].getBoundaryDimension());return y}},{key:"reverseInternal",value:function(){for(var y=this._geometries.length,P=new De(y),j=0;j<y;j++)P.add(this._geometries[j].reverse());return this.getFactory().buildGeometry(P)}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var y=$t.FALSE,P=0;P<this._geometries.length;P++)y=Math.max(y,this._geometries[P].getDimension());return y}},{key:"getLength",value:function(){for(var y=0,P=0;P<this._geometries.length;P++)y+=this._geometries[P].getLength();return y}},{key:"getNumPoints",value:function(){for(var y=0,P=0;P<this._geometries.length;P++)y+=this._geometries[P].getNumPoints();return y}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var y=arguments[0],P=new si(kt.asList(this._geometries)),j=new si(kt.asList(y._geometries));return this.compare(P,j)}if(arguments.length===2){for(var re=arguments[1],ye=arguments[0],Ae=this.getNumGeometries(),Ke=ye.getNumGeometries(),gt=0;gt<Ae&&gt<Ke;){var rr=this.getGeometryN(gt),fr=ye.getGeometryN(gt),zr=rr.compareToSameClass(fr,re);if(zr!==0)return zr;gt++}return gt<Ae?1:gt<Ke?-1:0}}},{key:"apply",value:function(){if(br(arguments[0],wt))for(var y=arguments[0],P=0;P<this._geometries.length;P++)this._geometries[P].apply(y);else if(br(arguments[0],Rr)){var j=arguments[0];if(this._geometries.length===0)return null;for(var re=0;re<this._geometries.length&&(this._geometries[re].apply(j),!j.isDone());re++);j.isGeometryChanged()&&this.geometryChanged()}else if(br(arguments[0],Vr)){var ye=arguments[0];ye.filter(this);for(var Ae=0;Ae<this._geometries.length;Ae++)this._geometries[Ae].apply(ye)}else if(br(arguments[0],z)){var Ke=arguments[0];Ke.filter(this);for(var gt=0;gt<this._geometries.length;gt++)this._geometries[gt].apply(Ke)}}},{key:"getBoundary",value:function(){return Qe.checkNotGeometryCollection(this),be.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var y=arguments[0],P=arguments[1];if(Qe.constructor_.call(this,P),y===null&&(y=[]),Qe.hasNullElements(y))throw new q("geometries must not contain null elements");this._geometries=y}}}}])})(Qe),Mi=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),P=0;P<y.length;P++)y[P]=this._geometries[P].copy();return new m(y,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Qe){var y=arguments[0],P=arguments[1];return!!this.isEquivalentClass(y)&&S(m,"equalsExact",this,1).call(this,y,P)}return S(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var y=arguments[0];return this._geometries[y].getCoordinate()}return S(m,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return $t.FALSE}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Te]}}],[{key:"constructor_",value:function(){var y=arguments[0],P=arguments[1];di.constructor_.call(this,y,P)}}])})(di),qr=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"copyInternal",value:function(){return new m(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return $t.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||S(m,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var y=this._points.copy();return Ir.reverse(y),this.getFactory().createLinearRing(y)}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!S(m,"isClosed",this,1).call(this))throw new q("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<m.MINIMUM_VALID_SIZE)throw new q("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var y=arguments[0],P=arguments[1];un.constructor_.call(this,y,P),this.validateConstruction()}}])})(un);qr.MINIMUM_VALID_SIZE=4;var cn=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"setOrdinate",value:function(y,P){switch(y){case m.X:this.x=P;break;case m.Y:this.y=P;break;default:throw new q("Invalid ordinate index: "+y)}}},{key:"getZ",value:function(){return Oe.NULL_ORDINATE}},{key:"getOrdinate",value:function(y){switch(y){case m.X:return this.x;case m.Y:return this.y}throw new q("Invalid ordinate index: "+y)}},{key:"setZ",value:function(y){throw new q("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(y){this.x=y.x,this.y=y.y,this.z=y.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)Oe.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof m){var y=arguments[0];Oe.constructor_.call(this,y.x,y.y)}else if(arguments[0]instanceof Oe){var P=arguments[0];Oe.constructor_.call(this,P.x,P.y)}}else if(arguments.length===2){var j=arguments[0],re=arguments[1];Oe.constructor_.call(this,j,re,Oe.NULL_ORDINATE)}}}])})(Oe);cn.X=0,cn.Y=1,cn.Z=-1,cn.M=-1;var Pn=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(y,P){switch(y){case m.X:this.x=P;break;case m.Y:this.y=P;break;case m.M:this._m=P;break;default:throw new q("Invalid ordinate index: "+y)}}},{key:"setM",value:function(y){this._m=y}},{key:"getZ",value:function(){return Oe.NULL_ORDINATE}},{key:"getOrdinate",value:function(y){switch(y){case m.X:return this.x;case m.Y:return this.y;case m.M:return this._m}throw new q("Invalid ordinate index: "+y)}},{key:"setZ",value:function(y){throw new q("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(y){this.x=y.x,this.y=y.y,this.z=y.getZ(),this._m=y.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Oe.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof m){var y=arguments[0];Oe.constructor_.call(this,y.x,y.y),this._m=y._m}else if(arguments[0]instanceof Oe){var P=arguments[0];Oe.constructor_.call(this,P.x,P.y),this._m=this.getM()}}else if(arguments.length===3){var j=arguments[0],re=arguments[1],ye=arguments[2];Oe.constructor_.call(this,j,re,Oe.NULL_ORDINATE),this._m=ye}}}])})(Oe);Pn.X=0,Pn.Y=1,Pn.Z=-1,Pn.M=2;var Gi=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(y,P){switch(y){case Oe.X:this.x=P;break;case Oe.Y:this.y=P;break;case Oe.Z:this.z=P;break;case Oe.M:this._m=P;break;default:throw new q("Invalid ordinate index: "+y)}}},{key:"setM",value:function(y){this._m=y}},{key:"getOrdinate",value:function(y){switch(y){case Oe.X:return this.x;case Oe.Y:return this.y;case Oe.Z:return this.getZ();case Oe.M:return this.getM()}throw new q("Invalid ordinate index: "+y)}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(y){this.x=y.x,this.y=y.y,this.z=y.getZ(),this._m=y.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Oe.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof m){var y=arguments[0];Oe.constructor_.call(this,y),this._m=y._m}else if(arguments[0]instanceof Oe){var P=arguments[0];Oe.constructor_.call(this,P),this._m=this.getM()}}else if(arguments.length===4){var j=arguments[0],re=arguments[1],ye=arguments[2],Ae=arguments[3];Oe.constructor_.call(this,j,re,ye),this._m=Ae}}}])})(Oe),pa=(function(){function T(){i(this,T)}return a(T,null,[{key:"measures",value:function(m){return m instanceof cn?0:m instanceof Pn||m instanceof Gi?1:0}},{key:"dimension",value:function(m){return m instanceof cn?2:m instanceof Pn?3:m instanceof Gi?4:3}},{key:"create",value:function(){if(arguments.length===1){var m=arguments[0];return T.create(m,0)}if(arguments.length===2){var y=arguments[0],P=arguments[1];return y===2?new cn:y===3&&P===0?new Oe:y===3&&P===1?new Pn:y===4&&P===1?new Gi:new Oe}}}])})(),Ki=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"getCoordinate",value:function(y){return this.get(y)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&br(arguments[0],Mt)){for(var y=arguments[1],P=!1,j=arguments[0].iterator();j.hasNext();)this.add(j.next(),y),P=!0;return P}return S(m,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var y=S(m,"clone",this,1).call(this),P=0;P<this.size();P++)y.add(P,this.get(P).clone());return y}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(m.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(m.coordArrayType);for(var y=this.size(),P=new Array(y).fill(null),j=0;j<y;j++)P[j]=this.get(y-j-1);return P}}},{key:"add",value:function(){if(arguments.length===1){var y=arguments[0];return S(m,"add",this,1).call(this,y)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var P=arguments[0],j=arguments[1];return this.add(P,j,!0),!0}if(arguments[0]instanceof Oe&&typeof arguments[1]=="boolean"){var re=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(re))return null;S(m,"add",this,1).call(this,re)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var ye=arguments[0],Ae=arguments[1];return this.add(ye,Ae),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Ke=arguments[0],gt=arguments[1];if(arguments[2])for(var rr=0;rr<Ke.length;rr++)this.add(Ke[rr],gt);else for(var fr=Ke.length-1;fr>=0;fr--)this.add(Ke[fr],gt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Oe){var zr=arguments[0],hn=arguments[1];if(!arguments[2]){var Mn=this.size();if(Mn>0&&(zr>0&&this.get(zr-1).equals2D(hn)||zr<Mn&&this.get(zr).equals2D(hn)))return null}S(m,"add",this,1).call(this,zr,hn)}}else if(arguments.length===4){var $n=arguments[0],An=arguments[1],In=arguments[2],ki=arguments[3],xi=1;In>ki&&(xi=-1);for(var Ya=In;Ya!==ki;Ya+=xi)this.add($n[Ya],An);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var y=this.get(0).copy();this.add(y,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var y=arguments[0];this.ensureCapacity(y.length),this.add(y,!0)}else if(arguments.length===2){var P=arguments[0],j=arguments[1];this.ensureCapacity(P.length),this.add(P,j)}}}}])})(De);Ki.coordArrayType=new Array(0).fill(null);var wn=(function(){function T(){i(this,T)}return a(T,null,[{key:"isRing",value:function(m){return!(m.length<4)&&!!m[0].equals2D(m[m.length-1])}},{key:"ptNotInList",value:function(m,y){for(var P=0;P<m.length;P++){var j=m[P];if(T.indexOf(j,y)<0)return j}return null}},{key:"scroll",value:function(m,y){var P=T.indexOf(y,m);if(P<0)return null;var j=new Array(m.length).fill(null);Ot.arraycopy(m,P,j,0,m.length-P),Ot.arraycopy(m,0,j,m.length-P,P),Ot.arraycopy(j,0,m,0,m.length)}},{key:"equals",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];if(m===y)return!0;if(m===null||y===null||m.length!==y.length)return!1;for(var P=0;P<m.length;P++)if(!m[P].equals(y[P]))return!1;return!0}if(arguments.length===3){var j=arguments[0],re=arguments[1],ye=arguments[2];if(j===re)return!0;if(j===null||re===null||j.length!==re.length)return!1;for(var Ae=0;Ae<j.length;Ae++)if(ye.compare(j[Ae],re[Ae])!==0)return!1;return!0}}},{key:"intersection",value:function(m,y){for(var P=new Ki,j=0;j<m.length;j++)y.intersects(m[j])&&P.add(m[j],!0);return P.toCoordinateArray()}},{key:"measures",value:function(m){if(m===null||m.length===0)return 0;var y,P=0,j=c(m);try{for(j.s();!(y=j.n()).done;){var re=y.value;P=Math.max(P,pa.measures(re))}}catch(ye){j.e(ye)}finally{j.f()}return P}},{key:"hasRepeatedPoints",value:function(m){for(var y=1;y<m.length;y++)if(m[y-1].equals(m[y]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(m){return T.hasRepeatedPoints(m)?new Ki(m,!1).toCoordinateArray():m}},{key:"reverse",value:function(m){for(var y=m.length-1,P=Math.trunc(y/2),j=0;j<=P;j++){var re=m[j];m[j]=m[y-j],m[y-j]=re}}},{key:"removeNull",value:function(m){for(var y=0,P=0;P<m.length;P++)m[P]!==null&&y++;var j=new Array(y).fill(null);if(y===0)return j;for(var re=0,ye=0;ye<m.length;ye++)m[ye]!==null&&(j[re++]=m[ye]);return j}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var m=arguments[0],y=new Array(m.length).fill(null),P=0;P<m.length;P++)y[P]=m[P].copy();return y}if(arguments.length===5)for(var j=arguments[0],re=arguments[1],ye=arguments[2],Ae=arguments[3],Ke=arguments[4],gt=0;gt<Ke;gt++)ye[Ae+gt]=j[re+gt].copy()}},{key:"isEqualReversed",value:function(m,y){for(var P=0;P<m.length;P++){var j=m[P],re=y[m.length-P-1];if(j.compareTo(re)!==0)return!1}return!0}},{key:"envelope",value:function(m){for(var y=new Ze,P=0;P<m.length;P++)y.expandToInclude(m[P]);return y}},{key:"toCoordinateArray",value:function(m){return m.toArray(T.coordArrayType)}},{key:"dimension",value:function(m){if(m===null||m.length===0)return 3;var y,P=0,j=c(m);try{for(j.s();!(y=j.n()).done;){var re=y.value;P=Math.max(P,pa.dimension(re))}}catch(ye){j.e(ye)}finally{j.f()}return P}},{key:"atLeastNCoordinatesOrNothing",value:function(m,y){return y.length>=m?y:[]}},{key:"indexOf",value:function(m,y){for(var P=0;P<y.length;P++)if(m.equals(y[P]))return P;return-1}},{key:"increasingDirection",value:function(m){for(var y=0;y<Math.trunc(m.length/2);y++){var P=m.length-1-y,j=m[y].compareTo(m[P]);if(j!==0)return j}return 1}},{key:"compare",value:function(m,y){for(var P=0;P<m.length&&P<y.length;){var j=m[P].compareTo(y[P]);if(j!==0)return j;P++}return P<y.length?-1:P<m.length?1:0}},{key:"minCoordinate",value:function(m){for(var y=null,P=0;P<m.length;P++)(y===null||y.compareTo(m[P])>0)&&(y=m[P]);return y}},{key:"extract",value:function(m,y,P){y=Tt.clamp(y,0,m.length);var j=(P=Tt.clamp(P,-1,m.length))-y+1;P<0&&(j=0),y>=m.length&&(j=0),P<y&&(j=0);var re=new Array(j).fill(null);if(j===0)return re;for(var ye=0,Ae=y;Ae<=P;Ae++)re[ye++]=m[Ae];return re}}])})(),Ua=(function(){return a((function T(){i(this,T)}),[{key:"compare",value:function(T,m){var y=T,P=m;return wn.compare(y,P)}},{key:"interfaces_",get:function(){return[Pe]}}])})(),oa=(function(){return a((function T(){i(this,T)}),[{key:"compare",value:function(T,m){var y=T,P=m;if(y.length<P.length)return-1;if(y.length>P.length)return 1;if(y.length===0)return 0;var j=wn.compare(y,P);return wn.isEqualReversed(y,P)?0:j}},{key:"OLDcompare",value:function(T,m){var y=T,P=m;if(y.length<P.length)return-1;if(y.length>P.length)return 1;if(y.length===0)return 0;for(var j=wn.increasingDirection(y),re=wn.increasingDirection(P),ye=j>0?0:y.length-1,Ae=re>0?0:y.length-1,Ke=0;Ke<y.length;Ke++){var gt=y[ye].compareTo(P[Ae]);if(gt!==0)return gt;ye+=j,Ae+=re}return 0}},{key:"interfaces_",get:function(){return[Pe]}}])})();wn.ForwardComparator=Ua,wn.BidirectionalComparator=oa,wn.coordArrayType=new Array(0).fill(null);var Di=(function(){return a((function T(m){i(this,T),this.str=m}),[{key:"append",value:function(T){this.str+=T}},{key:"setCharAt",value:function(T,m){this.str=this.str.substr(0,T)+m+this.str.substr(T+1)}},{key:"toString",value:function(){return this.str}}])})(),Ra=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getM",value:function(m){return this.hasM()?this._coordinates[m].getM():we.NaN}},{key:"setOrdinate",value:function(m,y,P){switch(y){case Qt.X:this._coordinates[m].x=P;break;case Qt.Y:this._coordinates[m].y=P;break;default:this._coordinates[m].setOrdinate(y,P)}}},{key:"getZ",value:function(m){return this.hasZ()?this._coordinates[m].getZ():we.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(m,y){switch(y){case Qt.X:return this._coordinates[m].x;case Qt.Y:return this._coordinates[m].y;default:return this._coordinates[m].getOrdinate(y)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var m=arguments[0];return this._coordinates[m]}if(arguments.length===2){var y=arguments[0];arguments[1].setCoordinate(this._coordinates[y])}}},{key:"getCoordinateCopy",value:function(m){var y=this.createCoordinate();return y.setCoordinate(this._coordinates[m]),y}},{key:"createCoordinate",value:function(){return pa.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(m){return this._coordinates[m].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(m){for(var y=0;y<this._coordinates.length;y++)m.expandToInclude(this._coordinates[y]);return m}},{key:"copy",value:function(){for(var m=new Array(this.size()).fill(null),y=0;y<this._coordinates.length;y++){var P=this.createCoordinate();P.setCoordinate(this._coordinates[y]),m[y]=P}return new T(m,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var m=new Di(17*this._coordinates.length);m.append("("),m.append(this._coordinates[0]);for(var y=1;y<this._coordinates.length;y++)m.append(", "),m.append(this._coordinates[y]);return m.append(")"),m.toString()}return"()"}},{key:"getY",value:function(m){return this._coordinates[m].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[Qt,X]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];T.constructor_.call(this,m,wn.dimension(m),wn.measures(m))}else if(Number.isInteger(arguments[0])){var y=arguments[0];this._coordinates=new Array(y).fill(null);for(var P=0;P<y;P++)this._coordinates[P]=new Oe}else if(br(arguments[0],Qt)){var j=arguments[0];if(j===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=j.getDimension(),this._measures=j.getMeasures(),this._coordinates=new Array(j.size()).fill(null);for(var re=0;re<this._coordinates.length;re++)this._coordinates[re]=j.getCoordinateCopy(re)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ye=arguments[0],Ae=arguments[1];T.constructor_.call(this,ye,Ae,wn.measures(ye))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Ke=arguments[0],gt=arguments[1];this._coordinates=new Array(Ke).fill(null),this._dimension=gt;for(var rr=0;rr<Ke;rr++)this._coordinates[rr]=pa.create(gt)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var fr=arguments[0],zr=arguments[1],hn=arguments[2];this._dimension=zr,this._measures=hn,this._coordinates=fr===null?new Array(0).fill(null):fr}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Mn=arguments[0],$n=arguments[1],An=arguments[2];this._coordinates=new Array(Mn).fill(null),this._dimension=$n,this._measures=An;for(var In=0;In<Mn;In++)this._coordinates[In]=this.createCoordinate()}}}}])})(),Ts=(function(){function T(){i(this,T)}return a(T,[{key:"readResolve",value:function(){return T.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Ra(arguments[0]);if(br(arguments[0],Qt))return new Ra(arguments[0])}else{if(arguments.length===2){var m=arguments[1];return m>3&&(m=3),m<2&&(m=2),new Ra(arguments[0],m)}if(arguments.length===3){var y=arguments[2],P=arguments[1]-y;return y>1&&(y=1),P>3&&(P=3),P<2&&(P=2),new Ra(arguments[0],P+y,y)}}}},{key:"interfaces_",get:function(){return[Bt,X]}}],[{key:"instance",value:function(){return T.instanceObject}}])})();Ts.instanceObject=new Ts;var bi=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),P=0;P<y.length;P++)y[P]=this._geometries[P].copy();return new m(y,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Qe){var y=arguments[0],P=arguments[1];return!!this.isEquivalentClass(y)&&S(m,"equalsExact",this,1).call(this,y,P)}return S(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var y=new De,P=0;P<this._geometries.length;P++)for(var j=this._geometries[P].getBoundary(),re=0;re<j.getNumGeometries();re++)y.add(j.getGeometryN(re));var ye=new Array(y.size()).fill(null);return this.getFactory().createMultiLineString(y.toArray(ye))}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[gr]}}],[{key:"constructor_",value:function(){var y=arguments[0],P=arguments[1];di.constructor_.call(this,y,P)}}])})(di),Ys=(function(){return a((function T(){i(this,T)}),[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])})(),_o=(function(T){function m(){var y;return i(this,m),(y=n(this,m)).map=new Map,y}return v(m,T),a(m,[{key:"get",value:function(y){return this.map.get(y)||null}},{key:"put",value:function(y,P){return this.map.set(y,P),P}},{key:"values",value:function(){for(var y=new De,P=this.map.values(),j=P.next();!j.done;)y.add(j.value),j=P.next();return y}},{key:"entrySet",value:function(){var y=new Wt;return this.map.entries().forEach((function(P){return y.add(P)})),y}},{key:"size",value:function(){return this.map.size()}}])})(Ys),fi=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"equals",value:function(m){if(!(m instanceof T))return!1;var y=m;return this._modelType===y._modelType&&this._scale===y._scale}},{key:"compareTo",value:function(m){var y=m,P=this.getMaximumSignificantDigits(),j=y.getMaximumSignificantDigits();return lr.compare(P,j)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===T.FLOATING||this._modelType===T.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var m="UNKNOWN";return this._modelType===T.FLOATING?m="Floating":this._modelType===T.FLOATING_SINGLE?m="Floating-Single":this._modelType===T.FIXED&&(m="Fixed (Scale="+this.getScale()+")"),m}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var m=arguments[0];return we.isNaN(m)||this._modelType===T.FLOATING_SINGLE?m:this._modelType===T.FIXED?Math.round(m*this._scale)/this._scale:m}if(arguments[0]instanceof Oe){var y=arguments[0];if(this._modelType===T.FLOATING)return null;y.x=this.makePrecise(y.x),y.y=this.makePrecise(y.y)}}},{key:"getMaximumSignificantDigits",value:function(){var m=16;return this._modelType===T.FLOATING?m=16:this._modelType===T.FLOATING_SINGLE?m=6:this._modelType===T.FIXED&&(m=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),m}},{key:"setScale",value:function(m){this._scale=Math.abs(m)}},{key:"interfaces_",get:function(){return[X,U]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=T.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof io){var m=arguments[0];this._modelType=m,m===T.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var y=arguments[0];this._modelType=T.FIXED,this.setScale(y)}else if(arguments[0]instanceof T){var P=arguments[0];this._modelType=P._modelType,this._scale=P._scale}}}},{key:"mostPrecise",value:function(m,y){return m.compareTo(y)>=0?m:y}}])})(),io=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"readResolve",value:function(){return T.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){this._name=null;var m=arguments[0];this._name=m,T.nameToTypeMap.put(m,this)}}])})();io.nameToTypeMap=new _o,fi.Type=io,fi.FIXED=new io("FIXED"),fi.FLOATING=new io("FLOATING"),fi.FLOATING_SINGLE=new io("FLOATING SINGLE"),fi.maximumPreciseValue=9007199254740992;var ps=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),P=0;P<y.length;P++)y[P]=this._geometries[P].copy();return new m(y,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Qe){var y=arguments[0],P=arguments[1];return!!this.isEquivalentClass(y)&&S(m,"equalsExact",this,1).call(this,y,P)}return S(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?$t.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Qe.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new $e}},{key:"getGeometryType",value:function(){return Qe.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Et]}}],[{key:"constructor_",value:function(){var y=arguments[0],P=arguments[1];di.constructor_.call(this,y,P)}}])})(di),ho=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"createEmpty",value:function(m){switch(m){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new q("Invalid dimension: "+m)}}},{key:"toGeometry",value:function(m){return m.isNull()?this.createPoint():m.getMinX()===m.getMaxX()&&m.getMinY()===m.getMaxY()?this.createPoint(new Oe(m.getMinX(),m.getMinY())):m.getMinX()===m.getMaxX()||m.getMinY()===m.getMaxY()?this.createLineString([new Oe(m.getMinX(),m.getMinY()),new Oe(m.getMaxX(),m.getMaxY())]):this.createPolygon(this.createLinearRing([new Oe(m.getMinX(),m.getMinY()),new Oe(m.getMinX(),m.getMaxY()),new Oe(m.getMaxX(),m.getMaxY()),new Oe(m.getMaxX(),m.getMinY()),new Oe(m.getMinX(),m.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];return this.createLineString(m!==null?this.getCoordinateSequenceFactory().create(m):null)}if(br(arguments[0],Qt))return new un(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new ps(null,this):arguments.length===1?new ps(arguments[0],this):void 0}},{key:"buildGeometry",value:function(m){for(var y=null,P=!1,j=!1,re=m.iterator();re.hasNext();){var ye=re.next(),Ae=ye.getTypeCode();y===null&&(y=Ae),Ae!==y&&(P=!0),ye instanceof di&&(j=!0)}if(y===null)return this.createGeometryCollection();if(P||j)return this.createGeometryCollection(T.toGeometryArray(m));var Ke=m.iterator().next();if(m.size()>1){if(Ke instanceof Ur)return this.createMultiPolygon(T.toPolygonArray(m));if(Ke instanceof un)return this.createMultiLineString(T.toLineStringArray(m));if(Ke instanceof qe)return this.createMultiPoint(T.toPointArray(m));be.shouldNeverReachHere("Unhandled geometry type: "+Ke.getGeometryType())}return Ke}},{key:"createMultiPointFromCoords",value:function(m){return this.createMultiPoint(m!==null?this.getCoordinateSequenceFactory().create(m):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];return this.createPoint(m!==null?this.getCoordinateSequenceFactory().create([m]):null)}if(br(arguments[0],Qt))return new qe(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(br(arguments[0],Qt)){var m=arguments[0];return this.createPolygon(this.createLinearRing(m))}if(arguments[0]instanceof Array){var y=arguments[0];return this.createPolygon(this.createLinearRing(y))}if(arguments[0]instanceof qr){var P=arguments[0];return this.createPolygon(P,null)}}else if(arguments.length===2)return new Ur(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new di(null,this):arguments.length===1?new di(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];return this.createLinearRing(m!==null?this.getCoordinateSequenceFactory().create(m):null)}if(br(arguments[0],Qt))return new qr(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new bi(null,this):arguments.length===1?new bi(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Mi(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Mi(arguments[0],this);if(br(arguments[0],Qt)){var m=arguments[0];if(m===null)return this.createMultiPoint(new Array(0).fill(null));for(var y=new Array(m.size()).fill(null),P=0;P<m.size();P++){var j=this.getCoordinateSequenceFactory().create(1,m.getDimension(),m.getMeasures());Ir.copy(m,P,j,0,1),y[P]=this.createPoint(j)}return this.createMultiPoint(y)}}}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)T.constructor_.call(this,new fi,0);else if(arguments.length===1){if(br(arguments[0],Bt)){var m=arguments[0];T.constructor_.call(this,new fi,0,m)}else if(arguments[0]instanceof fi){var y=arguments[0];T.constructor_.call(this,y,0,T.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];T.constructor_.call(this,P,j,T.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Ae=arguments[2];this._precisionModel=re,this._coordinateSequenceFactory=Ae,this._SRID=ye}}},{key:"toMultiPolygonArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toGeometryArray",value:function(m){if(m===null)return null;var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Ts.instance()}},{key:"toMultiLineStringArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toLineStringArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toMultiPointArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toLinearRingArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toPointArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toPolygonArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"createPointFromInternalCoord",value:function(m,y){return y.getPrecisionModel().makePrecise(m),y.getFactory().createPoint(m)}}])})(),Ga="XY",Zs="XYZ",Da="XYM",Qu="XYZM",Au={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},ko="EMPTY",ms=1,Na=2,ao=3,Ia=4,Ks=5,Hl=6;for(var Wl in Au)Au[Wl].toUpperCase();var K=(function(){return a((function T(m){i(this,T),this.wkt=m,this.index_=-1}),[{key:"isAlpha_",value:function(T){return T>="a"&&T<="z"||T>="A"&&T<="Z"}},{key:"isNumeric_",value:function(T,m){return T>="0"&&T<="9"||T=="."&&!(m!==void 0&&m)}},{key:"isWhiteSpace_",value:function(T){return T==" "||T=="	"||T=="\r"||T==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var T,m=this.nextChar_(),y=this.index_,P=m;if(m=="(")T=Na;else if(m==",")T=Ks;else if(m==")")T=ao;else if(this.isNumeric_(m)||m=="-")T=Ia,P=this.readNumber_();else if(this.isAlpha_(m))T=ms,P=this.readText_();else{if(this.isWhiteSpace_(m))return this.nextToken();if(m!=="")throw new Error("Unexpected character: "+m);T=Hl}return{position:y,value:P,type:T}}},{key:"readNumber_",value:function(){var T,m=this.index_,y=!1,P=!1;do T=="."?y=!0:T!="e"&&T!="E"||(P=!0),T=this.nextChar_();while(this.isNumeric_(T,y)||!P&&(T=="e"||T=="E")||P&&(T=="-"||T=="+"));return parseFloat(this.wkt.substring(m,this.index_--))}},{key:"readText_",value:function(){var T,m=this.index_;do T=this.nextChar_();while(this.isAlpha_(T));return this.wkt.substring(m,this.index_--).toUpperCase()}}])})(),pe=(function(){return a((function T(m,y){i(this,T),this.lexer_=m,this.token_,this.layout_=Ga,this.factory=y}),[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(T){return this.token_.type==T}},{key:"match",value:function(T){var m=this.isTokenType(T);return m&&this.consume_(),m}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var T=Ga,m=this.token_;if(this.isTokenType(ms)){var y=m.value;y==="Z"?T=Zs:y==="M"?T=Da:y==="ZM"&&(T=Qu),T!==Ga&&this.consume_()}return T}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Na)){var T=[];do T.push(this.parseGeometry_());while(this.match(Ks));if(this.match(ao))return T}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Na)){var T=this.parsePoint_();if(this.match(ao))return T}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Na)){var T=this.parsePointList_();if(this.match(ao))return T}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Na)){var T=this.parseLineStringTextList_();if(this.match(ao))return T}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var T;if(this.match(Na)){if(T=this.token_.type==Na?this.parsePointTextList_():this.parsePointList_(),this.match(ao))return T}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Na)){var T=this.parseLineStringTextList_();if(this.match(ao))return T}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Na)){var T=this.parsePolygonTextList_();if(this.match(ao))return T}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var T=[],m=this.layout_.length,y=0;y<m;++y){var P=this.token_;if(!this.match(Ia))break;T.push(P.value)}if(T.length==m)return T;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var T=[this.parsePoint_()];this.match(Ks);)T.push(this.parsePoint_());return T}},{key:"parsePointTextList_",value:function(){for(var T=[this.parsePointText_()];this.match(Ks);)T.push(this.parsePointText_());return T}},{key:"parseLineStringTextList_",value:function(){for(var T=[this.parseLineStringText_()];this.match(Ks);)T.push(this.parseLineStringText_());return T}},{key:"parsePolygonTextList_",value:function(){for(var T=[this.parsePolygonText_()];this.match(Ks);)T.push(this.parsePolygonText_());return T}},{key:"isEmptyGeometry_",value:function(){var T=this.isTokenType(ms)&&this.token_.value==ko;return T&&this.consume_(),T}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var T=this.factory,m=function($n){return o(Oe,I($n))},y=function($n){var An=$n.map((function(In){return T.createLinearRing(In.map(m))}));return An.length>1?T.createPolygon(An[0],An.slice(1)):T.createPolygon(An[0])},P=this.token_;if(this.match(ms)){var j=P.value;if(this.layout_=this.parseGeometryLayout_(),j=="GEOMETRYCOLLECTION"){var re=this.parseGeometryCollectionText_();return T.createGeometryCollection(re)}switch(j){case"POINT":var ye=this.parsePointText_();return ye?T.createPoint(o(Oe,I(ye))):T.createPoint();case"LINESTRING":var Ae=this.parseLineStringText_().map(m);return T.createLineString(Ae);case"LINEARRING":var Ke=this.parseLineStringText_().map(m);return T.createLinearRing(Ke);case"POLYGON":var gt=this.parsePolygonText_();return gt&&gt.length!==0?y(gt):T.createPolygon();case"MULTIPOINT":var rr=this.parseMultiPointText_();if(!rr||rr.length===0)return T.createMultiPoint();var fr=rr.map(m).map((function($n){return T.createPoint($n)}));return T.createMultiPoint(fr);case"MULTILINESTRING":var zr=this.parseMultiLineStringText_().map((function($n){return T.createLineString($n.map(m))}));return T.createMultiLineString(zr);case"MULTIPOLYGON":var hn=this.parseMultiPolygonText_();if(!hn||hn.length===0)return T.createMultiPolygon();var Mn=hn.map(y);return T.createMultiPolygon(Mn);default:throw new Error("Invalid geometry type: "+j)}}throw new Error(this.formatErrorMessage_())}}])})();function Ye(T){if(T.isEmpty())return"";var m=T.getCoordinate(),y=[m.x,m.y];return m.z===void 0||Number.isNaN(m.z)||y.push(m.z),m.m===void 0||Number.isNaN(m.m)||y.push(m.m),y.join(" ")}function St(T){for(var m=T.getCoordinates().map((function(re){var ye=[re.x,re.y];return re.z===void 0||Number.isNaN(re.z)||ye.push(re.z),re.m===void 0||Number.isNaN(re.m)||ye.push(re.m),ye})),y=[],P=0,j=m.length;P<j;++P)y.push(m[P].join(" "));return y.join(", ")}function zt(T){var m=[];m.push("("+St(T.getExteriorRing())+")");for(var y=0,P=T.getNumInteriorRing();y<P;++y)m.push("("+St(T.getInteriorRingN(y))+")");return m.join(", ")}var Rt={Point:Ye,LineString:St,LinearRing:St,Polygon:zt,MultiPoint:function(T){for(var m=[],y=0,P=T.getNumGeometries();y<P;++y)m.push("("+Ye(T.getGeometryN(y))+")");return m.join(", ")},MultiLineString:function(T){for(var m=[],y=0,P=T.getNumGeometries();y<P;++y)m.push("("+St(T.getGeometryN(y))+")");return m.join(", ")},MultiPolygon:function(T){for(var m=[],y=0,P=T.getNumGeometries();y<P;++y)m.push("("+zt(T.getGeometryN(y))+")");return m.join(", ")},GeometryCollection:function(T){for(var m=[],y=0,P=T.getNumGeometries();y<P;++y)m.push(Jt(T.getGeometryN(y)));return m.join(", ")}};function Jt(T){var m=T.getGeometryType(),y=Rt[m];m=m.toUpperCase();var P=(function(j){var re="";if(j.isEmpty())return re;var ye=j.getCoordinate();return ye.z===void 0||Number.isNaN(ye.z)||(re+="Z"),ye.m===void 0||Number.isNaN(ye.m)||(re+="M"),re})(T);return P.length>0&&(m+=" "+P),T.isEmpty()?m+" "+ko:m+" ("+y(T)+")"}var jr=(function(){return a((function T(m){i(this,T),this.geometryFactory=m||new ho,this.precisionModel=this.geometryFactory.getPrecisionModel()}),[{key:"read",value:function(T){var m=new K(T);return new pe(m,this.geometryFactory).parse()}},{key:"write",value:function(T){return Jt(T)}}])})(),Kr=(function(){return a((function T(m){i(this,T),this.parser=new jr(m)}),[{key:"write",value:function(T){return this.parser.write(T)}}],[{key:"toLineString",value:function(T,m){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+T.x+" "+T.y+", "+m.x+" "+m.y+" )"}}])})(),Wr=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getIndexAlongSegment",value:function(m,y){return this.computeIntLineIndex(),this._intLineIndex[m][y]}},{key:"getTopologySummary",value:function(){var m=new Di;return this.isEndPoint()&&m.append(" endpoint"),this._isProper&&m.append(" proper"),this.isCollinear()&&m.append(" collinear"),m.toString()}},{key:"computeIntersection",value:function(m,y,P,j){this._inputLines[0][0]=m,this._inputLines[0][1]=y,this._inputLines[1][0]=P,this._inputLines[1][1]=j,this._result=this.computeIntersect(m,y,P,j)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var m=arguments[0];this.getEdgeDistance(m,0)>this.getEdgeDistance(m,1)?(this._intLineIndex[m][0]=0,this._intLineIndex[m][1]=1):(this._intLineIndex[m][0]=1,this._intLineIndex[m][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(m){this._precisionModel=m}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var m=arguments[0],y=0;y<this._result;y++)if(!this._intPt[y].equals2D(this._inputLines[m][0])&&!this._intPt[y].equals2D(this._inputLines[m][1]))return!0;return!1}}},{key:"getIntersection",value:function(m){return this._intPt[m]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==T.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(m,y){return T.computeEdgeDistance(this._intPt[y],this._inputLines[m][0],this._inputLines[m][1])}},{key:"isCollinear",value:function(){return this._result===T.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Kr.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Kr.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(m,y){return this._inputLines[m][y]}},{key:"isIntersection",value:function(m){for(var y=0;y<this._result;y++)if(this._intPt[y].equals2D(m))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(m,y){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[m][y]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Oe,this._intPt[1]=new Oe,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(m,y,P){var j=Math.abs(P.x-y.x),re=Math.abs(P.y-y.y),ye=-1;if(m.equals(y))ye=0;else if(m.equals(P))ye=j>re?j:re;else{var Ae=Math.abs(m.x-y.x),Ke=Math.abs(m.y-y.y);(ye=j>re?Ae:Ke)!==0||m.equals(y)||(ye=Math.max(Ae,Ke))}return be.isTrue(!(ye===0&&!m.equals(y)),"Bad distance calculation"),ye}},{key:"nonRobustComputeEdgeDistance",value:function(m,y,P){var j=m.x-y.x,re=m.y-y.y,ye=Math.sqrt(j*j+re*re);return be.isTrue(!(ye===0&&!m.equals(y)),"Invalid distance calculation"),ye}}])})();Wr.DONT_INTERSECT=0,Wr.DO_INTERSECT=1,Wr.COLLINEAR=2,Wr.NO_INTERSECTION=0,Wr.POINT_INTERSECTION=1,Wr.COLLINEAR_INTERSECTION=2;var nn=(function(T){function m(){return i(this,m),n(this,m)}return v(m,T),a(m,[{key:"isInSegmentEnvelopes",value:function(y){var P=new Ze(this._inputLines[0][0],this._inputLines[0][1]),j=new Ze(this._inputLines[1][0],this._inputLines[1][1]);return P.contains(y)&&j.contains(y)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return S(m,"computeIntersection",this,1).apply(this,arguments);var y=arguments[0],P=arguments[1],j=arguments[2];if(this._isProper=!1,Ze.intersects(P,j,y)&&Ht.index(P,j,y)===0&&Ht.index(j,P,y)===0)return this._isProper=!0,(y.equals(P)||y.equals(j))&&(this._isProper=!1),this._result=Wr.POINT_INTERSECTION,null;this._result=Wr.NO_INTERSECTION}},{key:"intersection",value:function(y,P,j,re){var ye=this.intersectionSafe(y,P,j,re);return this.isInSegmentEnvelopes(ye)||(ye=new Oe(m.nearestEndpoint(y,P,j,re))),this._precisionModel!==null&&this._precisionModel.makePrecise(ye),ye}},{key:"checkDD",value:function(y,P,j,re,ye){var Ae=kr.intersection(y,P,j,re),Ke=this.isInSegmentEnvelopes(Ae);Ot.out.println("DD in env = "+Ke+"  --------------------- "+Ae),ye.distance(Ae)>1e-4&&Ot.out.println("Distance = "+ye.distance(Ae))}},{key:"intersectionSafe",value:function(y,P,j,re){var ye=At.intersection(y,P,j,re);return ye===null&&(ye=m.nearestEndpoint(y,P,j,re)),ye}},{key:"computeCollinearIntersection",value:function(y,P,j,re){var ye=Ze.intersects(y,P,j),Ae=Ze.intersects(y,P,re),Ke=Ze.intersects(j,re,y),gt=Ze.intersects(j,re,P);return ye&&Ae?(this._intPt[0]=j,this._intPt[1]=re,Wr.COLLINEAR_INTERSECTION):Ke&&gt?(this._intPt[0]=y,this._intPt[1]=P,Wr.COLLINEAR_INTERSECTION):ye&&Ke?(this._intPt[0]=j,this._intPt[1]=y,!j.equals(y)||Ae||gt?Wr.COLLINEAR_INTERSECTION:Wr.POINT_INTERSECTION):ye&&gt?(this._intPt[0]=j,this._intPt[1]=P,!j.equals(P)||Ae||Ke?Wr.COLLINEAR_INTERSECTION:Wr.POINT_INTERSECTION):Ae&&Ke?(this._intPt[0]=re,this._intPt[1]=y,!re.equals(y)||ye||gt?Wr.COLLINEAR_INTERSECTION:Wr.POINT_INTERSECTION):Ae&&gt?(this._intPt[0]=re,this._intPt[1]=P,!re.equals(P)||ye||Ke?Wr.COLLINEAR_INTERSECTION:Wr.POINT_INTERSECTION):Wr.NO_INTERSECTION}},{key:"computeIntersect",value:function(y,P,j,re){if(this._isProper=!1,!Ze.intersects(y,P,j,re))return Wr.NO_INTERSECTION;var ye=Ht.index(y,P,j),Ae=Ht.index(y,P,re);if(ye>0&&Ae>0||ye<0&&Ae<0)return Wr.NO_INTERSECTION;var Ke=Ht.index(j,re,y),gt=Ht.index(j,re,P);return Ke>0&&gt>0||Ke<0&&gt<0?Wr.NO_INTERSECTION:ye===0&&Ae===0&&Ke===0&&gt===0?this.computeCollinearIntersection(y,P,j,re):(ye===0||Ae===0||Ke===0||gt===0?(this._isProper=!1,y.equals2D(j)||y.equals2D(re)?this._intPt[0]=y:P.equals2D(j)||P.equals2D(re)?this._intPt[0]=P:ye===0?this._intPt[0]=new Oe(j):Ae===0?this._intPt[0]=new Oe(re):Ke===0?this._intPt[0]=new Oe(y):gt===0&&(this._intPt[0]=new Oe(P))):(this._isProper=!0,this._intPt[0]=this.intersection(y,P,j,re)),Wr.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(y,P,j,re){var ye=y,Ae=Yt.pointToSegment(y,j,re),Ke=Yt.pointToSegment(P,j,re);return Ke<Ae&&(Ae=Ke,ye=P),(Ke=Yt.pointToSegment(j,y,P))<Ae&&(Ae=Ke,ye=j),(Ke=Yt.pointToSegment(re,y,P))<Ae&&(Ae=Ke,ye=re),ye}}])})(Wr),Yr=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"countSegment",value:function(m,y){if(m.x<this._p.x&&y.x<this._p.x)return null;if(this._p.x===y.x&&this._p.y===y.y)return this._isPointOnSegment=!0,null;if(m.y===this._p.y&&y.y===this._p.y){var P=m.x,j=y.x;return P>j&&(P=y.x,j=m.x),this._p.x>=P&&this._p.x<=j&&(this._isPointOnSegment=!0),null}if(m.y>this._p.y&&y.y<=this._p.y||y.y>this._p.y&&m.y<=this._p.y){var re=Ht.index(m,y,this._p);if(re===Ht.COLLINEAR)return this._isPointOnSegment=!0,null;y.y<m.y&&(re=-re),re===Ht.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Ie.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?Ie.BOUNDARY:this._crossingCount%2==1?Ie.INTERIOR:Ie.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var m=arguments[0];this._p=m}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Oe&&br(arguments[1],Qt)){for(var m=arguments[1],y=new T(arguments[0]),P=new Oe,j=new Oe,re=1;re<m.size();re++)if(m.getCoordinate(re,P),m.getCoordinate(re-1,j),y.countSegment(P,j),y.isOnSegment())return y.getLocation();return y.getLocation()}if(arguments[0]instanceof Oe&&arguments[1]instanceof Array){for(var ye=arguments[1],Ae=new T(arguments[0]),Ke=1;Ke<ye.length;Ke++){var gt=ye[Ke],rr=ye[Ke-1];if(Ae.countSegment(gt,rr),Ae.isOnSegment())return Ae.getLocation()}return Ae.getLocation()}}}])})(),Bn=(function(){function T(){i(this,T)}return a(T,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Oe&&br(arguments[1],Qt)){for(var m=arguments[0],y=arguments[1],P=new nn,j=new Oe,re=new Oe,ye=y.size(),Ae=1;Ae<ye;Ae++)if(y.getCoordinate(Ae-1,j),y.getCoordinate(Ae,re),P.computeIntersection(m,j,re),P.hasIntersection())return!0;return!1}if(arguments[0]instanceof Oe&&arguments[1]instanceof Array){for(var Ke=arguments[0],gt=arguments[1],rr=new nn,fr=1;fr<gt.length;fr++){var zr=gt[fr-1],hn=gt[fr];if(rr.computeIntersection(Ke,zr,hn),rr.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(m,y){return Yr.locatePointInRing(m,y)}},{key:"isInRing",value:function(m,y){return T.locateInRing(m,y)!==Ie.EXTERIOR}}])})(),gn=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"setAllLocations",value:function(m){for(var y=0;y<this.location.length;y++)this.location[y]=m}},{key:"isNull",value:function(){for(var m=0;m<this.location.length;m++)if(this.location[m]!==Ie.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(m){for(var y=0;y<this.location.length;y++)this.location[y]===Ie.NONE&&(this.location[y]=m)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(m){if(m.location.length>this.location.length){var y=new Array(3).fill(null);y[at.ON]=this.location[at.ON],y[at.LEFT]=Ie.NONE,y[at.RIGHT]=Ie.NONE,this.location=y}for(var P=0;P<this.location.length;P++)this.location[P]===Ie.NONE&&P<m.location.length&&(this.location[P]=m.location[P])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var m=this.location[at.LEFT];this.location[at.LEFT]=this.location[at.RIGHT],this.location[at.RIGHT]=m}},{key:"toString",value:function(){var m=new nr;return this.location.length>1&&m.append(Ie.toLocationSymbol(this.location[at.LEFT])),m.append(Ie.toLocationSymbol(this.location[at.ON])),this.location.length>1&&m.append(Ie.toLocationSymbol(this.location[at.RIGHT])),m.toString()}},{key:"setLocations",value:function(m,y,P){this.location[at.ON]=m,this.location[at.LEFT]=y,this.location[at.RIGHT]=P}},{key:"get",value:function(m){return m<this.location.length?this.location[m]:Ie.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var m=0;m<this.location.length;m++)if(this.location[m]===Ie.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var m=arguments[0];this.setLocation(at.ON,m)}else if(arguments.length===2){var y=arguments[0],P=arguments[1];this.location[y]=P}}},{key:"init",value:function(m){this.location=new Array(m).fill(null),this.setAllLocations(Ie.NONE)}},{key:"isEqualOnSide",value:function(m,y){return this.location[y]===m.location[y]}},{key:"allPositionsEqual",value:function(m){for(var y=0;y<this.location.length;y++)if(this.location[y]!==m)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];this.init(m.length)}else if(Number.isInteger(arguments[0])){var y=arguments[0];this.init(1),this.location[at.ON]=y}else if(arguments[0]instanceof T){var P=arguments[0];if(this.init(P.location.length),P!==null)for(var j=0;j<this.location.length;j++)this.location[j]=P.location[j]}}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Ae=arguments[2];this.init(3),this.location[at.ON]=re,this.location[at.LEFT]=ye,this.location[at.RIGHT]=Ae}}}])})(),Rn=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getGeometryCount",value:function(){var m=0;return this.elt[0].isNull()||m++,this.elt[1].isNull()||m++,m}},{key:"setAllLocations",value:function(m,y){this.elt[m].setAllLocations(y)}},{key:"isNull",value:function(m){return this.elt[m].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var m=arguments[0];this.setAllLocationsIfNull(0,m),this.setAllLocationsIfNull(1,m)}else if(arguments.length===2){var y=arguments[0],P=arguments[1];this.elt[y].setAllLocationsIfNull(P)}}},{key:"isLine",value:function(m){return this.elt[m].isLine()}},{key:"merge",value:function(m){for(var y=0;y<2;y++)this.elt[y]===null&&m.elt[y]!==null?this.elt[y]=new gn(m.elt[y]):this.elt[y].merge(m.elt[y])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var m=arguments[0];return this.elt[m].get(at.ON)}if(arguments.length===2){var y=arguments[0],P=arguments[1];return this.elt[y].get(P)}}},{key:"toString",value:function(){var m=new nr;return this.elt[0]!==null&&(m.append("A:"),m.append(this.elt[0].toString())),this.elt[1]!==null&&(m.append(" B:"),m.append(this.elt[1].toString())),m.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var m=arguments[0];return this.elt[m].isArea()}}},{key:"isAnyNull",value:function(m){return this.elt[m].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];this.elt[m].setLocation(at.ON,y)}else if(arguments.length===3){var P=arguments[0],j=arguments[1],re=arguments[2];this.elt[P].setLocation(j,re)}}},{key:"isEqualOnSide",value:function(m,y){return this.elt[0].isEqualOnSide(m.elt[0],y)&&this.elt[1].isEqualOnSide(m.elt[1],y)}},{key:"allPositionsEqual",value:function(m,y){return this.elt[m].allPositionsEqual(y)}},{key:"toLine",value:function(m){this.elt[m].isArea()&&(this.elt[m]=new gn(this.elt[m].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var m=arguments[0];this.elt[0]=new gn(m),this.elt[1]=new gn(m)}else if(arguments[0]instanceof T){var y=arguments[0];this.elt[0]=new gn(y.elt[0]),this.elt[1]=new gn(y.elt[1])}}else if(arguments.length===2){var P=arguments[0],j=arguments[1];this.elt[0]=new gn(Ie.NONE),this.elt[1]=new gn(Ie.NONE),this.elt[P].setLocation(j)}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Ae=arguments[2];this.elt[0]=new gn(re,ye,Ae),this.elt[1]=new gn(re,ye,Ae)}else if(arguments.length===4){var Ke=arguments[0],gt=arguments[1],rr=arguments[2],fr=arguments[3];this.elt[0]=new gn(Ie.NONE,Ie.NONE,Ie.NONE),this.elt[1]=new gn(Ie.NONE,Ie.NONE,Ie.NONE),this.elt[Ke].setLocations(gt,rr,fr)}}},{key:"toLineLabel",value:function(m){for(var y=new T(Ie.NONE),P=0;P<2;P++)y.setLocation(P,m.getLocation(P));return y}}])})(),Tn=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var T=new Array(this._pts.size()).fill(null),m=0;m<this._pts.size();m++)T[m]=this._pts.get(m);this._ring=this._geometryFactory.createLinearRing(T),this._isHole=Ht.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(T){this._startDe=T;var m=T,y=!0;do{if(m===null)throw new Re("Found null DirectedEdge");if(m.getEdgeRing()===this)throw new Re("Directed Edge visited twice during ring-building at "+m.getCoordinate());this._edges.add(m);var P=m.getLabel();be.isTrue(P.isArea()),this.mergeLabel(P),this.addPoints(m.getEdge(),m.isForward(),y),y=!1,this.setEdgeRing(m,this),m=this.getNext(m)}while(m!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(T){return this._pts.get(T)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var T=this._startDe;do{var m=T.getNode().getEdges().getOutgoingDegree(this);m>this._maxNodeDegree&&(this._maxNodeDegree=m),T=this.getNext(T)}while(T!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(T,m,y){var P=T.getCoordinates();if(m){var j=1;y&&(j=0);for(var re=j;re<P.length;re++)this._pts.add(P[re])}else{var ye=P.length-2;y&&(ye=P.length-1);for(var Ae=ye;Ae>=0;Ae--)this._pts.add(P[Ae])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var T=this._startDe;do T.getEdge().setInResult(!0),T=T.getNext();while(T!==this._startDe)}},{key:"containsPoint",value:function(T){var m=this.getLinearRing();if(!m.getEnvelopeInternal().contains(T)||!Bn.isInRing(T,m.getCoordinates()))return!1;for(var y=this._holes.iterator();y.hasNext();)if(y.next().containsPoint(T))return!1;return!0}},{key:"addHole",value:function(T){this._holes.add(T)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var T=arguments[0];this.mergeLabel(T,0),this.mergeLabel(T,1)}else if(arguments.length===2){var m=arguments[1],y=arguments[0].getLocation(m,at.RIGHT);if(y===Ie.NONE)return null;if(this._label.getLocation(m)===Ie.NONE)return this._label.setLocation(m,y),null}}},{key:"setShell",value:function(T){this._shell=T,T!==null&&T.addHole(this)}},{key:"toPolygon",value:function(T){for(var m=new Array(this._holes.size()).fill(null),y=0;y<this._holes.size();y++)m[y]=this._holes.get(y).getLinearRing();return T.createPolygon(this.getLinearRing(),m)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new De,this._pts=new De,this._label=new Rn(Ie.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new De,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var T=arguments[0],m=arguments[1];this._geometryFactory=m,this.computePoints(T),this.computeRing()}}}}])})(),Or=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"setEdgeRing",value:function(y,P){y.setMinEdgeRing(P)}},{key:"getNext",value:function(y){return y.getNextMin()}}],[{key:"constructor_",value:function(){var y=arguments[0],P=arguments[1];Tn.constructor_.call(this,y,P)}}])})(Tn),fn=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"buildMinimalRings",value:function(){var y=new De,P=this._startDe;do{if(P.getMinEdgeRing()===null){var j=new Or(P,this._geometryFactory);y.add(j)}P=P.getNext()}while(P!==this._startDe);return y}},{key:"setEdgeRing",value:function(y,P){y.setEdgeRing(P)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var y=this._startDe;do y.getNode().getEdges().linkMinimalDirectedEdges(this),y=y.getNext();while(y!==this._startDe)}},{key:"getNext",value:function(y){return y.getNext()}}],[{key:"constructor_",value:function(){var y=arguments[0],P=arguments[1];Tn.constructor_.call(this,y,P)}}])})(Tn),ti=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"setVisited",value:function(T){this._isVisited=T}},{key:"setInResult",value:function(T){this._isInResult=T}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(T){this._label=T}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(T){this._isCovered=T,this._isCoveredSet=!0}},{key:"updateIM",value:function(T){be.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(T)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var T=arguments[0];this._label=T}}}}])})(),Ci=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"isIncidentEdgeInResult",value:function(){for(var y=this.getEdges().getEdges().iterator();y.hasNext();)if(y.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(y){y.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(y){}},{key:"computeMergedLocation",value:function(y,P){var j=Ie.NONE;if(j=this._label.getLocation(P),!y.isNull(P)){var re=y.getLocation(P);j!==Ie.BOUNDARY&&(j=re)}return j}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return S(m,"setLabel",this,1).apply(this,arguments);var y=arguments[0],P=arguments[1];this._label===null?this._label=new Rn(y,P):this._label.setLocation(y,P)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof m){var y=arguments[0];this.mergeLabel(y._label)}else if(arguments[0]instanceof Rn)for(var P=arguments[0],j=0;j<2;j++){var re=this.computeMergedLocation(P,j);this._label.getLocation(j)===Ie.NONE&&this._label.setLocation(j,re)}}},{key:"add",value:function(y){this._edges.insert(y),y.setNode(this)}},{key:"setLabelBoundary",value:function(y){if(this._label===null)return null;var P=Ie.NONE;this._label!==null&&(P=this._label.getLocation(y));var j=null;switch(P){case Ie.BOUNDARY:j=Ie.INTERIOR;break;case Ie.INTERIOR:default:j=Ie.BOUNDARY}this._label.setLocation(y,j)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var y=arguments[0],P=arguments[1];this._coord=y,this._edges=P,this._label=new Rn(0,Ie.NONE)}}])})(ti),hi=(function(T){function m(){return i(this,m),n(this,m,arguments)}return v(m,T),a(m)})(Ys);function Li(T){return T==null?0:T.color}function Ii(T){return T==null?null:T.parent}function _n(T,m){T!==null&&(T.color=m)}function ka(T){return T==null?null:T.left}function Zn(T){return T==null?null:T.right}var On=(function(T){function m(){var y;return i(this,m),(y=n(this,m)).root_=null,y.size_=0,y}return v(m,T),a(m,[{key:"get",value:function(y){for(var P=this.root_;P!==null;){var j=y.compareTo(P.key);if(j<0)P=P.left;else{if(!(j>0))return P.value;P=P.right}}return null}},{key:"put",value:function(y,P){if(this.root_===null)return this.root_={key:y,value:P,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var j,re,ye=this.root_;do if(j=ye,(re=y.compareTo(ye.key))<0)ye=ye.left;else{if(!(re>0)){var Ae=ye.value;return ye.value=P,Ae}ye=ye.right}while(ye!==null);var Ke={key:y,left:null,right:null,value:P,parent:j,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return re<0?j.left=Ke:j.right=Ke,this.fixAfterInsertion(Ke),this.size_++,null}},{key:"fixAfterInsertion",value:function(y){var P;for(y.color=1;y!=null&&y!==this.root_&&y.parent.color===1;)Ii(y)===ka(Ii(Ii(y)))?Li(P=Zn(Ii(Ii(y))))===1?(_n(Ii(y),0),_n(P,0),_n(Ii(Ii(y)),1),y=Ii(Ii(y))):(y===Zn(Ii(y))&&(y=Ii(y),this.rotateLeft(y)),_n(Ii(y),0),_n(Ii(Ii(y)),1),this.rotateRight(Ii(Ii(y)))):Li(P=ka(Ii(Ii(y))))===1?(_n(Ii(y),0),_n(P,0),_n(Ii(Ii(y)),1),y=Ii(Ii(y))):(y===ka(Ii(y))&&(y=Ii(y),this.rotateRight(y)),_n(Ii(y),0),_n(Ii(Ii(y)),1),this.rotateLeft(Ii(Ii(y))));this.root_.color=0}},{key:"values",value:function(){var y=new De,P=this.getFirstEntry();if(P!==null)for(y.add(P.value);(P=m.successor(P))!==null;)y.add(P.value);return y}},{key:"entrySet",value:function(){var y=new Wt,P=this.getFirstEntry();if(P!==null)for(y.add(P);(P=m.successor(P))!==null;)y.add(P);return y}},{key:"rotateLeft",value:function(y){if(y!=null){var P=y.right;y.right=P.left,P.left!=null&&(P.left.parent=y),P.parent=y.parent,y.parent==null?this.root_=P:y.parent.left===y?y.parent.left=P:y.parent.right=P,P.left=y,y.parent=P}}},{key:"rotateRight",value:function(y){if(y!=null){var P=y.left;y.left=P.right,P.right!=null&&(P.right.parent=y),P.parent=y.parent,y.parent==null?this.root_=P:y.parent.right===y?y.parent.right=P:y.parent.left=P,P.right=y,y.parent=P}}},{key:"getFirstEntry",value:function(){var y=this.root_;if(y!=null)for(;y.left!=null;)y=y.left;return y}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(y){for(var P=this.root_;P!==null;){var j=y.compareTo(P.key);if(j<0)P=P.left;else{if(!(j>0))return!0;P=P.right}}return!1}}],[{key:"successor",value:function(y){var P;if(y===null)return null;if(y.right!==null){for(P=y.right;P.left!==null;)P=P.left;return P}P=y.parent;for(var j=y;P!==null&&j===P.right;)j=P,P=P.parent;return P}}])})(hi),ts=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"find",value:function(T){return this.nodeMap.get(T)}},{key:"addNode",value:function(){if(arguments[0]instanceof Oe){var T=arguments[0],m=this.nodeMap.get(T);return m===null&&(m=this.nodeFact.createNode(T),this.nodeMap.put(T,m)),m}if(arguments[0]instanceof Ci){var y=arguments[0],P=this.nodeMap.get(y.getCoordinate());return P===null?(this.nodeMap.put(y.getCoordinate(),y),y):(P.mergeLabel(y),P)}}},{key:"print",value:function(T){for(var m=this.iterator();m.hasNext();)m.next().print(T)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(T){for(var m=new De,y=this.iterator();y.hasNext();){var P=y.next();P.getLabel().getLocation(T)===Ie.BOUNDARY&&m.add(P)}return m}},{key:"add",value:function(T){var m=T.getCoordinate();this.addNode(m).add(T)}}],[{key:"constructor_",value:function(){this.nodeMap=new On,this.nodeFact=null;var T=arguments[0];this.nodeFact=T}}])})(),bn=(function(){function T(){i(this,T)}return a(T,null,[{key:"isNorthern",value:function(m){return m===T.NE||m===T.NW}},{key:"isOpposite",value:function(m,y){return m!==y&&(m-y+4)%4===2}},{key:"commonHalfPlane",value:function(m,y){if(m===y)return m;if((m-y+4)%4===2)return-1;var P=m<y?m:y;return P===0&&(m>y?m:y)===3?3:P}},{key:"isInHalfPlane",value:function(m,y){return y===T.SE?m===T.SE||m===T.SW:m===y||m===y+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1];if(m===0&&y===0)throw new q("Cannot compute the quadrant for point ( "+m+", "+y+" )");return m>=0?y>=0?T.NE:T.SE:y>=0?T.NW:T.SW}if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var P=arguments[0],j=arguments[1];if(j.x===P.x&&j.y===P.y)throw new q("Cannot compute the quadrant for two identical points "+P);return j.x>=P.x?j.y>=P.y?T.NE:T.SE:j.y>=P.y?T.NW:T.SW}}}])})();bn.NE=0,bn.NW=1,bn.SW=2,bn.SE=3;var Js=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"compareDirection",value:function(m){return this._dx===m._dx&&this._dy===m._dy?0:this._quadrant>m._quadrant?1:this._quadrant<m._quadrant?-1:Ht.index(m._p0,m._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(m){this._node=m}},{key:"print",value:function(m){var y=Math.atan2(this._dy,this._dx),P=this.getClass().getName(),j=P.lastIndexOf("."),re=P.substring(j+1);m.print("  "+re+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+y+"   "+this._label)}},{key:"compareTo",value:function(m){var y=m;return this.compareDirection(y)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var m=Math.atan2(this._dy,this._dx),y=this.getClass().getName(),P=y.lastIndexOf(".");return"  "+y.substring(P+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+m+"   "+this._label}},{key:"computeLabel",value:function(m){}},{key:"init",value:function(m,y){this._p0=m,this._p1=y,this._dx=y.x-m.x,this._dy=y.y-m.y,this._quadrant=bn.quadrant(this._dx,this._dy),be.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var m=arguments[0];this._edge=m}else if(arguments.length===3){var y=arguments[0],P=arguments[1],j=arguments[2];T.constructor_.call(this,y,P,j,null)}else if(arguments.length===4){var re=arguments[0],ye=arguments[1],Ae=arguments[2],Ke=arguments[3];T.constructor_.call(this,re),this.init(ye,Ae),this._label=Ke}}}])})(),wa=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(y){return this._depth[y]}},{key:"setVisited",value:function(y){this._isVisited=y}},{key:"computeDirectedLabel",value:function(){this._label=new Rn(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(y,P){if(this._depth[y]!==-999&&this._depth[y]!==P)throw new Re("assigned depths do not match",this.getCoordinate());this._depth[y]=P}},{key:"isInteriorAreaEdge",value:function(){for(var y=!0,P=0;P<2;P++)this._label.isArea(P)&&this._label.getLocation(P,at.LEFT)===Ie.INTERIOR&&this._label.getLocation(P,at.RIGHT)===Ie.INTERIOR||(y=!1);return y}},{key:"setNextMin",value:function(y){this._nextMin=y}},{key:"print",value:function(y){S(m,"print",this,1).call(this,y),y.print(" "+this._depth[at.LEFT]+"/"+this._depth[at.RIGHT]),y.print(" ("+this.getDepthDelta()+")"),this._isInResult&&y.print(" inResult")}},{key:"setMinEdgeRing",value:function(y){this._minEdgeRing=y}},{key:"isLineEdge",value:function(){var y=this._label.isLine(0)||this._label.isLine(1),P=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ie.EXTERIOR),j=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ie.EXTERIOR);return y&&P&&j}},{key:"setEdgeRing",value:function(y){this._edgeRing=y}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var y=this._edge.getDepthDelta();return this._isForward||(y=-y),y}},{key:"setInResult",value:function(y){this._isInResult=y}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(y){this.print(y),y.print(" "),this._isForward?this._edge.print(y):this._edge.printReverse(y)}},{key:"setSym",value:function(y){this._sym=y}},{key:"setVisitedEdge",value:function(y){this.setVisited(y),this._sym.setVisited(y)}},{key:"setEdgeDepths",value:function(y,P){var j=this.getEdge().getDepthDelta();this._isForward||(j=-j);var re=1;y===at.LEFT&&(re=-1);var ye=at.opposite(y),Ae=P+j*re;this.setDepth(y,P),this.setDepth(ye,Ae)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(y){this._next=y}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var y=arguments[0],P=arguments[1];if(Js.constructor_.call(this,y),this._isForward=P,P)this.init(y.getCoordinate(0),y.getCoordinate(1));else{var j=y.getNumPoints()-1;this.init(y.getCoordinate(j),y.getCoordinate(j-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(y,P){return y===Ie.EXTERIOR&&P===Ie.INTERIOR?1:y===Ie.INTERIOR&&P===Ie.EXTERIOR?-1:0}}])})(Js),Ps=(function(){return a((function T(){i(this,T)}),[{key:"createNode",value:function(T){return new Ci(T,null)}}])})(),Ha=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"printEdges",value:function(T){T.println("Edges:");for(var m=0;m<this._edges.size();m++){T.println("edge "+m+":");var y=this._edges.get(m);y.print(T),y.eiList.print(T)}}},{key:"find",value:function(T){return this._nodes.find(T)}},{key:"addNode",value:function(){if(arguments[0]instanceof Ci){var T=arguments[0];return this._nodes.addNode(T)}if(arguments[0]instanceof Oe){var m=arguments[0];return this._nodes.addNode(m)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var T=this._nodes.iterator();T.hasNext();)T.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(T){Ot.out.println(T)}},{key:"isBoundaryNode",value:function(T,m){var y=this._nodes.find(m);if(y===null)return!1;var P=y.getLabel();return P!==null&&P.getLocation(T)===Ie.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var T=this._nodes.iterator();T.hasNext();)T.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(T,m,y,P){return!!T.equals(y)&&Ht.index(T,m,P)===Ht.COLLINEAR&&bn.quadrant(T,m)===bn.quadrant(y,P)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(T){Ot.out.print(T)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(T,m){for(var y=0;y<this._edges.size();y++){var P=this._edges.get(y),j=P.getCoordinates();if(this.matchInSameDirection(T,m,j[0],j[1])||this.matchInSameDirection(T,m,j[j.length-1],j[j.length-2]))return P}return null}},{key:"insertEdge",value:function(T){this._edges.add(T)}},{key:"findEdgeEnd",value:function(T){for(var m=this.getEdgeEnds().iterator();m.hasNext();){var y=m.next();if(y.getEdge()===T)return y}return null}},{key:"addEdges",value:function(T){for(var m=T.iterator();m.hasNext();){var y=m.next();this._edges.add(y);var P=new wa(y,!0),j=new wa(y,!1);P.setSym(j),j.setSym(P),this.add(P),this.add(j)}}},{key:"add",value:function(T){this._nodes.add(T),this._edgeEndList.add(T)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(T,m){for(var y=0;y<this._edges.size();y++){var P=this._edges.get(y),j=P.getCoordinates();if(T.equals(j[0])&&m.equals(j[1]))return P}return null}}],[{key:"constructor_",value:function(){if(this._edges=new De,this._nodes=null,this._edgeEndList=new De,arguments.length===0)this._nodes=new ts(new Ps);else if(arguments.length===1){var T=arguments[0];this._nodes=new ts(T)}}},{key:"linkResultDirectedEdges",value:function(T){for(var m=T.iterator();m.hasNext();)m.next().getEdges().linkResultDirectedEdges()}}])})(),Il=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"sortShellsAndHoles",value:function(m,y,P){for(var j=m.iterator();j.hasNext();){var re=j.next();re.isHole()?P.add(re):y.add(re)}}},{key:"computePolygons",value:function(m){for(var y=new De,P=m.iterator();P.hasNext();){var j=P.next().toPolygon(this._geometryFactory);y.add(j)}return y}},{key:"placeFreeHoles",value:function(m,y){for(var P=y.iterator();P.hasNext();){var j=P.next();if(j.getShell()===null){var re=T.findEdgeRingContaining(j,m);if(re===null)throw new Re("unable to assign hole to a shell",j.getCoordinate(0));j.setShell(re)}}}},{key:"buildMinimalEdgeRings",value:function(m,y,P){for(var j=new De,re=m.iterator();re.hasNext();){var ye=re.next();if(ye.getMaxNodeDegree()>2){ye.linkDirectedEdgesForMinimalEdgeRings();var Ae=ye.buildMinimalRings(),Ke=this.findShell(Ae);Ke!==null?(this.placePolygonHoles(Ke,Ae),y.add(Ke)):P.addAll(Ae)}else j.add(ye)}return j}},{key:"buildMaximalEdgeRings",value:function(m){for(var y=new De,P=m.iterator();P.hasNext();){var j=P.next();if(j.isInResult()&&j.getLabel().isArea()&&j.getEdgeRing()===null){var re=new fn(j,this._geometryFactory);y.add(re),re.setInResult()}}return y}},{key:"placePolygonHoles",value:function(m,y){for(var P=y.iterator();P.hasNext();){var j=P.next();j.isHole()&&j.setShell(m)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(m){for(var y=0,P=null,j=m.iterator();j.hasNext();){var re=j.next();re.isHole()||(P=re,y++)}return be.isTrue(y<=1,"found two shells in MinimalEdgeRing list"),P}},{key:"add",value:function(){if(arguments.length===1){var m=arguments[0];this.add(m.getEdgeEnds(),m.getNodes())}else if(arguments.length===2){var y=arguments[0],P=arguments[1];Ha.linkResultDirectedEdges(P);var j=this.buildMaximalEdgeRings(y),re=new De,ye=this.buildMinimalEdgeRings(j,this._shellList,re);this.sortShellsAndHoles(ye,this._shellList,re),this.placeFreeHoles(this._shellList,re)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new De;var m=arguments[0];this._geometryFactory=m}},{key:"findEdgeRingContaining",value:function(m,y){for(var P=m.getLinearRing(),j=P.getEnvelopeInternal(),re=P.getCoordinateN(0),ye=null,Ae=null,Ke=y.iterator();Ke.hasNext();){var gt=Ke.next(),rr=gt.getLinearRing(),fr=rr.getEnvelopeInternal();if(!fr.equals(j)&&fr.contains(j)){re=wn.ptNotInList(P.getCoordinates(),rr.getCoordinates());var zr=!1;Bn.isInRing(re,rr.getCoordinates())&&(zr=!0),zr&&(ye===null||Ae.contains(fr))&&(Ae=(ye=gt).getLinearRing().getEnvelopeInternal())}}return ye}}])})(),zo=(function(){return a((function T(){i(this,T)}),[{key:"getBounds",value:function(){}}])})(),jo=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[zo,X]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var T=arguments[0],m=arguments[1];this._bounds=T,this._item=m}}])})(),cl=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"poll",value:function(){if(this.isEmpty())return null;var T=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),T}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(T){for(var m=null,y=this._items.get(T);2*T<=this._size&&((m=2*T)!==this._size&&this._items.get(m+1).compareTo(this._items.get(m))<0&&m++,this._items.get(m).compareTo(y)<0);T=m)this._items.set(T,this._items.get(m));this._items.set(T,y)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(T){this._items.add(null),this._size+=1;var m=this._size;for(this._items.set(0,T);T.compareTo(this._items.get(Math.trunc(m/2)))<0;m/=2)this._items.set(m,this._items.get(Math.trunc(m/2)));this._items.set(m,T)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new De,this._items.add(null)}}])})(),Is=(function(){return a((function T(){i(this,T)}),[{key:"insert",value:function(T,m){}},{key:"remove",value:function(T,m){}},{key:"query",value:function(){}}])})(),Oa=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(T){be.isTrue(this._bounds===null),this._childBoundables.add(T)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[zo,X]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new De,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var T=arguments[0];this._level=T}}}}])})(),Wa={reverseOrder:function(){return{compare:function(T,m){return m.compareTo(T)}}},min:function(T){return Wa.sort(T),T.get(0)},sort:function(T,m){var y=T.toArray();m?kt.sort(y,m):kt.sort(y);for(var P=T.iterator(),j=0,re=y.length;j<re;j++)P.next(),P.set(y[j])},singletonList:function(T){var m=new De;return m.add(T),m}},Yi=(function(){function T(){i(this,T)}return a(T,null,[{key:"maxDistance",value:function(m,y,P,j,re,ye,Ae,Ke){var gt=T.distance(m,y,re,ye);return gt=Math.max(gt,T.distance(m,y,Ae,Ke)),gt=Math.max(gt,T.distance(P,j,re,ye)),gt=Math.max(gt,T.distance(P,j,Ae,Ke))}},{key:"distance",value:function(m,y,P,j){var re=P-m,ye=j-y;return Math.sqrt(re*re+ye*ye)}},{key:"maximumDistance",value:function(m,y){var P=Math.min(m.getMinX(),y.getMinX()),j=Math.min(m.getMinY(),y.getMinY()),re=Math.max(m.getMaxX(),y.getMaxX()),ye=Math.max(m.getMaxY(),y.getMaxY());return T.distance(P,j,re,ye)}},{key:"minMaxDistance",value:function(m,y){var P=m.getMinX(),j=m.getMinY(),re=m.getMaxX(),ye=m.getMaxY(),Ae=y.getMinX(),Ke=y.getMinY(),gt=y.getMaxX(),rr=y.getMaxY(),fr=T.maxDistance(P,j,P,ye,Ae,Ke,Ae,rr);return fr=Math.min(fr,T.maxDistance(P,j,P,ye,Ae,Ke,gt,Ke)),fr=Math.min(fr,T.maxDistance(P,j,P,ye,gt,rr,Ae,rr)),fr=Math.min(fr,T.maxDistance(P,j,P,ye,gt,rr,gt,Ke)),fr=Math.min(fr,T.maxDistance(P,j,re,j,Ae,Ke,Ae,rr)),fr=Math.min(fr,T.maxDistance(P,j,re,j,Ae,Ke,gt,Ke)),fr=Math.min(fr,T.maxDistance(P,j,re,j,gt,rr,Ae,rr)),fr=Math.min(fr,T.maxDistance(P,j,re,j,gt,rr,gt,Ke)),fr=Math.min(fr,T.maxDistance(re,ye,P,ye,Ae,Ke,Ae,rr)),fr=Math.min(fr,T.maxDistance(re,ye,P,ye,Ae,Ke,gt,Ke)),fr=Math.min(fr,T.maxDistance(re,ye,P,ye,gt,rr,Ae,rr)),fr=Math.min(fr,T.maxDistance(re,ye,P,ye,gt,rr,gt,Ke)),fr=Math.min(fr,T.maxDistance(re,ye,re,j,Ae,Ke,Ae,rr)),fr=Math.min(fr,T.maxDistance(re,ye,re,j,Ae,Ke,gt,Ke)),fr=Math.min(fr,T.maxDistance(re,ye,re,j,gt,rr,Ae,rr)),fr=Math.min(fr,T.maxDistance(re,ye,re,j,gt,rr,gt,Ke))}}])})(),Sa=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"maximumDistance",value:function(){return Yi.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(m,y){var P=T.isComposite(this._boundable1),j=T.isComposite(this._boundable2);if(P&&j)return T.area(this._boundable1)>T.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,m,y),null):(this.expand(this._boundable2,this._boundable1,!0,m,y),null);if(P)return this.expand(this._boundable1,this._boundable2,!1,m,y),null;if(j)return this.expand(this._boundable2,this._boundable1,!0,m,y),null;throw new q("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(T.isComposite(this._boundable1)||T.isComposite(this._boundable2))}},{key:"compareTo",value:function(m){var y=m;return this._distance<y._distance?-1:this._distance>y._distance?1:0}},{key:"expand",value:function(m,y,P,j,re){for(var ye=m.getChildBoundables().iterator();ye.hasNext();){var Ae=ye.next(),Ke=null;(Ke=P?new T(y,Ae,this._itemDistance):new T(Ae,y,this._itemDistance)).getDistance()<re&&j.add(Ke)}}},{key:"getBoundable",value:function(m){return m===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var m=arguments[0],y=arguments[1],P=arguments[2];this._boundable1=m,this._boundable2=y,this._itemDistance=P,this._distance=this.distance()}},{key:"area",value:function(m){return m.getBounds().getArea()}},{key:"isComposite",value:function(m){return m instanceof Oa}}])})(),se=(function(){return a((function T(){i(this,T)}),[{key:"visitItem",value:function(T){}}])})(),Ge=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"queryInternal",value:function(){if(br(arguments[2],se)&&arguments[0]instanceof Object&&arguments[1]instanceof Oa)for(var m=arguments[0],y=arguments[2],P=arguments[1].getChildBoundables(),j=0;j<P.size();j++){var re=P.get(j);this.getIntersectsOp().intersects(re.getBounds(),m)&&(re instanceof Oa?this.queryInternal(m,re,y):re instanceof jo?y.visitItem(re.getItem()):be.shouldNeverReachHere())}else if(br(arguments[2],ur)&&arguments[0]instanceof Object&&arguments[1]instanceof Oa)for(var ye=arguments[0],Ae=arguments[2],Ke=arguments[1].getChildBoundables(),gt=0;gt<Ke.size();gt++){var rr=Ke.get(gt);this.getIntersectsOp().intersects(rr.getBounds(),ye)&&(rr instanceof Oa?this.queryInternal(ye,rr,Ae):rr instanceof jo?Ae.add(rr.getItem()):be.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(m){return m.get(m.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var m=0,y=arguments[0].getChildBoundables().iterator();y.hasNext();){var P=y.next();P instanceof Oa?m+=this.size(P):P instanceof jo&&(m+=1)}return m}}},{key:"removeItem",value:function(m,y){for(var P=null,j=m.getChildBoundables().iterator();j.hasNext();){var re=j.next();re instanceof jo&&re.getItem()===y&&(P=re)}return P!==null&&(m.getChildBoundables().remove(P),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var m=this.itemsTree(this._root);return m===null?new De:m}if(arguments.length===1){for(var y=arguments[0],P=new De,j=y.getChildBoundables().iterator();j.hasNext();){var re=j.next();if(re instanceof Oa){var ye=this.itemsTree(re);ye!==null&&P.add(ye)}else re instanceof jo?P.add(re.getItem()):be.shouldNeverReachHere()}return P.size()<=0?null:P}}},{key:"insert",value:function(m,y){be.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new jo(m,y))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var m=arguments[0],y=new De;return this.boundablesAtLevel(m,this._root,y),y}if(arguments.length===3){var P=arguments[0],j=arguments[1],re=arguments[2];if(be.isTrue(P>-2),j.getLevel()===P)return re.add(j),null;for(var ye=j.getChildBoundables().iterator();ye.hasNext();){var Ae=ye.next();Ae instanceof Oa?this.boundablesAtLevel(P,Ae,re):(be.isTrue(Ae instanceof jo),P===-1&&re.add(Ae))}return null}}},{key:"query",value:function(){if(arguments.length===1){var m=arguments[0];this.build();var y=new De;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.queryInternal(m,this._root,y),y}if(arguments.length===2){var P=arguments[0],j=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),P)&&this.queryInternal(P,this._root,j)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.remove(m,this._root,y)}if(arguments.length===3){var P=arguments[0],j=arguments[1],re=arguments[2],ye=this.removeItem(j,re);if(ye)return!0;for(var Ae=null,Ke=j.getChildBoundables().iterator();Ke.hasNext();){var gt=Ke.next();if(this.getIntersectsOp().intersects(gt.getBounds(),P)&&gt instanceof Oa&&(ye=this.remove(P,gt,re))){Ae=gt;break}}return Ae!==null&&Ae.getChildBoundables().isEmpty()&&j.getChildBoundables().remove(Ae),ye}}},{key:"createHigherLevels",value:function(m,y){be.isTrue(!m.isEmpty());var P=this.createParentBoundables(m,y+1);return P.size()===1?P.get(0):this.createHigherLevels(P,y+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var m=0,y=arguments[0].getChildBoundables().iterator();y.hasNext();){var P=y.next();if(P instanceof Oa){var j=this.depth(P);j>m&&(m=j)}}return m+1}}},{key:"createParentBoundables",value:function(m,y){be.isTrue(!m.isEmpty());var P=new De;P.add(this.createNode(y));var j=new De(m);Wa.sort(j,this.getComparator());for(var re=j.iterator();re.hasNext();){var ye=re.next();this.lastNode(P).getChildBoundables().size()===this.getNodeCapacity()&&P.add(this.createNode(y)),this.lastNode(P).addChildBoundable(ye)}return P}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new De,this._nodeCapacity=null,arguments.length===0)T.constructor_.call(this,T.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var m=arguments[0];be.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}}},{key:"compareDoubles",value:function(m,y){return m>y?1:m<y?-1:0}}])})();Ge.IntersectsOp=function(){},Ge.DEFAULT_NODE_CAPACITY=10;var pt=(function(){return a((function T(){i(this,T)}),[{key:"distance",value:function(T,m){}}])})(),jt=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"createParentBoundablesFromVerticalSlices",value:function(y,P){be.isTrue(y.length>0);for(var j=new De,re=0;re<y.length;re++)j.addAll(this.createParentBoundablesFromVerticalSlice(y[re],P));return j}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var y=arguments[0],P=arguments[1];return this.nearestNeighbourK(y,we.POSITIVE_INFINITY,P)}if(arguments.length===3){var j=arguments[0],re=arguments[2],ye=arguments[1],Ae=new cl;Ae.add(j);for(var Ke=new cl;!Ae.isEmpty()&&ye>=0;){var gt=Ae.poll(),rr=gt.getDistance();if(rr>=ye)break;gt.isLeaves()?Ke.size()<re?Ke.add(gt):(Ke.peek().getDistance()>rr&&(Ke.poll(),Ke.add(gt)),ye=Ke.peek().getDistance()):gt.expandToQueue(Ae,ye)}return m.getItems(Ke)}}},{key:"createNode",value:function(y){return new or(y)}},{key:"size",value:function(){return arguments.length===0?S(m,"size",this,1).call(this):S(m,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ze))return S(m,"insert",this,1).apply(this,arguments);var y=arguments[0],P=arguments[1];if(y.isNull())return null;S(m,"insert",this,1).call(this,y,P)}},{key:"getIntersectsOp",value:function(){return m.intersectsOp}},{key:"verticalSlices",value:function(y,P){for(var j=Math.trunc(Math.ceil(y.size()/P)),re=new Array(P).fill(null),ye=y.iterator(),Ae=0;Ae<P;Ae++){re[Ae]=new De;for(var Ke=0;ye.hasNext()&&Ke<j;){var gt=ye.next();re[Ae].add(gt),Ke++}}return re}},{key:"query",value:function(){if(arguments.length===1){var y=arguments[0];return S(m,"query",this,1).call(this,y)}if(arguments.length===2){var P=arguments[0],j=arguments[1];S(m,"query",this,1).call(this,P,j)}}},{key:"getComparator",value:function(){return m.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(y,P){return S(m,"createParentBoundables",this,1).call(this,y,P)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ze){var y=arguments[0],P=arguments[1];return S(m,"remove",this,1).call(this,y,P)}return S(m,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?S(m,"depth",this,1).call(this):S(m,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(y,P){be.isTrue(!y.isEmpty());var j=Math.trunc(Math.ceil(y.size()/this.getNodeCapacity())),re=new De(y);Wa.sort(re,m.xComparator);var ye=this.verticalSlices(re,Math.trunc(Math.ceil(Math.sqrt(j))));return this.createParentBoundablesFromVerticalSlices(ye,P)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(br(arguments[0],pt)){var y=arguments[0];if(this.isEmpty())return null;var P=new Sa(this.getRoot(),this.getRoot(),y);return this.nearestNeighbour(P)}if(arguments[0]instanceof Sa){var j=arguments[0],re=we.POSITIVE_INFINITY,ye=null,Ae=new cl;for(Ae.add(j);!Ae.isEmpty()&&re>0;){var Ke=Ae.poll(),gt=Ke.getDistance();if(gt>=re)break;Ke.isLeaves()?(re=gt,ye=Ke):Ke.expandToQueue(Ae,re)}return ye===null?null:[ye.getBoundable(0).getItem(),ye.getBoundable(1).getItem()]}}else{if(arguments.length===2){var rr=arguments[0],fr=arguments[1];if(this.isEmpty()||rr.isEmpty())return null;var zr=new Sa(this.getRoot(),rr.getRoot(),fr);return this.nearestNeighbour(zr)}if(arguments.length===3){var hn=arguments[2],Mn=new jo(arguments[0],arguments[1]),$n=new Sa(this.getRoot(),Mn,hn);return this.nearestNeighbour($n)[0]}if(arguments.length===4){var An=arguments[2],In=arguments[3],ki=new jo(arguments[0],arguments[1]),xi=new Sa(this.getRoot(),ki,An);return this.nearestNeighbourK(xi,In)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var y=arguments[0],P=arguments[1],j=we.POSITIVE_INFINITY,re=new cl;for(re.add(y);!re.isEmpty();){var ye=re.poll(),Ae=ye.getDistance();if(Ae>P)return!1;if(ye.maximumDistance()<=P)return!0;if(ye.isLeaves()){if((j=Ae)<=P)return!0}else ye.expandToQueue(re,j)}return!1}if(arguments.length===3){var Ke=arguments[0],gt=arguments[1],rr=arguments[2],fr=new Sa(this.getRoot(),Ke.getRoot(),gt);return this.isWithinDistance(fr,rr)}}},{key:"interfaces_",get:function(){return[Is,X]}}],[{key:"constructor_",value:function(){if(arguments.length===0)m.constructor_.call(this,m.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var y=arguments[0];Ge.constructor_.call(this,y)}}},{key:"centreX",value:function(y){return m.avg(y.getMinX(),y.getMaxX())}},{key:"avg",value:function(y,P){return(y+P)/2}},{key:"getItems",value:function(y){for(var P=new Array(y.size()).fill(null),j=0;!y.isEmpty();){var re=y.poll();P[j]=re.getBoundable(0).getItem(),j++}return P}},{key:"centreY",value:function(y){return m.avg(y.getMinY(),y.getMaxY())}}])})(Ge),or=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"computeBounds",value:function(){for(var y=null,P=this.getChildBoundables().iterator();P.hasNext();){var j=P.next();y===null?y=new Ze(j.getBounds()):y.expandToInclude(j.getBounds())}return y}}],[{key:"constructor_",value:function(){var y=arguments[0];Oa.constructor_.call(this,y)}}])})(Oa);jt.STRtreeNode=or,jt.xComparator=new((function(){return a((function T(){i(this,T)}),[{key:"interfaces_",get:function(){return[Pe]}},{key:"compare",value:function(T,m){return Ge.compareDoubles(jt.centreX(T.getBounds()),jt.centreX(m.getBounds()))}}])})()),jt.yComparator=new((function(){return a((function T(){i(this,T)}),[{key:"interfaces_",get:function(){return[Pe]}},{key:"compare",value:function(T,m){return Ge.compareDoubles(jt.centreY(T.getBounds()),jt.centreY(m.getBounds()))}}])})()),jt.intersectsOp=new((function(){return a((function T(){i(this,T)}),[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(T,m){return T.intersects(m)}}])})()),jt.DEFAULT_NODE_CAPACITY=10;var Nr=(function(){function T(){i(this,T)}return a(T,null,[{key:"relativeSign",value:function(m,y){return m<y?-1:m>y?1:0}},{key:"compare",value:function(m,y,P){if(y.equals2D(P))return 0;var j=T.relativeSign(y.x,P.x),re=T.relativeSign(y.y,P.y);switch(m){case 0:return T.compareValue(j,re);case 1:return T.compareValue(re,j);case 2:return T.compareValue(re,-j);case 3:return T.compareValue(-j,re);case 4:return T.compareValue(-j,-re);case 5:return T.compareValue(-re,-j);case 6:return T.compareValue(-re,j);case 7:return T.compareValue(j,-re)}return be.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(m,y){return m<0?-1:m>0?1:y<0?-1:y>0?1:0}}])})(),Xr=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(T){T.print(this.coord),T.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(T){var m=T;return this.segmentIndex<m.segmentIndex?-1:this.segmentIndex>m.segmentIndex?1:this.coord.equals2D(m.coord)?0:this._isInterior?m._isInterior?Nr.compare(this._segmentOctant,this.coord,m.coord):1:-1}},{key:"isEndPoint",value:function(T){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===T}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var T=arguments[0],m=arguments[1],y=arguments[2],P=arguments[3];this._segString=T,this.coord=new Oe(m),this.segmentIndex=y,this._segmentOctant=P,this._isInterior=!m.equals2D(T.getCoordinate(y))}}])})(),xn=(function(){return a((function T(){i(this,T)}),[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])})(),Ln=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getSplitCoordinates",value:function(){var T=new Ki;this.addEndpoints();for(var m=this.iterator(),y=m.next();m.hasNext();){var P=m.next();this.addEdgeCoordinates(y,P,T),y=P}return T.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var T=new De;this.findCollapsesFromInsertedNodes(T),this.findCollapsesFromExistingVertices(T);for(var m=T.iterator();m.hasNext();){var y=m.next().intValue();this.add(this._edge.getCoordinate(y),y)}}},{key:"createSplitEdgePts",value:function(T,m){var y=m.segmentIndex-T.segmentIndex+2;if(y===2)return[new Oe(T.coord),new Oe(m.coord)];var P=this._edge.getCoordinate(m.segmentIndex),j=m.isInterior()||!m.coord.equals2D(P);j||y--;var re=new Array(y).fill(null),ye=0;re[ye++]=new Oe(T.coord);for(var Ae=T.segmentIndex+1;Ae<=m.segmentIndex;Ae++)re[ye++]=this._edge.getCoordinate(Ae);return j&&(re[ye]=new Oe(m.coord)),re}},{key:"print",value:function(T){T.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(T)}},{key:"findCollapsesFromExistingVertices",value:function(T){for(var m=0;m<this._edge.size()-2;m++){var y=this._edge.getCoordinate(m);this._edge.getCoordinate(m+1);var P=this._edge.getCoordinate(m+2);y.equals2D(P)&&T.add(lr.valueOf(m+1))}}},{key:"addEdgeCoordinates",value:function(T,m,y){var P=this.createSplitEdgePts(T,m);y.add(P,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(T){this.addEndpoints(),this.addCollapsedNodes();for(var m=this.iterator(),y=m.next();m.hasNext();){var P=m.next(),j=this.createSplitEdge(y,P);T.add(j),y=P}}},{key:"findCollapseIndex",value:function(T,m,y){if(!T.coord.equals2D(m.coord))return!1;var P=m.segmentIndex-T.segmentIndex;return m.isInterior()||P--,P===1&&(y[0]=T.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(T){for(var m=new Array(1).fill(null),y=this.iterator(),P=y.next();y.hasNext();){var j=y.next();this.findCollapseIndex(P,j,m)&&T.add(lr.valueOf(m[0])),P=j}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var T=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(T),T)}},{key:"createSplitEdge",value:function(T,m){var y=this.createSplitEdgePts(T,m);return new Ri(y,this._edge.getData())}},{key:"add",value:function(T,m){var y=new Xr(this._edge,T,m,this._edge.getSegmentOctant(m)),P=this._nodeMap.get(y);return P!==null?(be.isTrue(P.coord.equals2D(T),"Found equal nodes with different coordinates"),P):(this._nodeMap.put(y,y),y)}},{key:"checkSplitEdgesCorrectness",value:function(T){var m=this._edge.getCoordinates(),y=T.get(0).getCoordinate(0);if(!y.equals2D(m[0]))throw new ce("bad split edge start point at "+y);var P=T.get(T.size()-1).getCoordinates(),j=P[P.length-1];if(!j.equals2D(m[m.length-1]))throw new ce("bad split edge end point at "+j)}}],[{key:"constructor_",value:function(){this._nodeMap=new On,this._edge=null;var T=arguments[0];this._edge=T}}])})(),ni=(function(){function T(){i(this,T)}return a(T,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1];if(m===0&&y===0)throw new q("Cannot compute the octant for point ( "+m+", "+y+" )");var P=Math.abs(m),j=Math.abs(y);return m>=0?y>=0?P>=j?0:1:P>=j?7:6:y>=0?P>=j?3:2:P>=j?4:5}if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var re=arguments[0],ye=arguments[1],Ae=ye.x-re.x,Ke=ye.y-re.y;if(Ae===0&&Ke===0)throw new q("Cannot compute the octant for two identical points "+re);return T.octant(Ae,Ke)}}}])})(),mi=(function(){return a((function T(){i(this,T)}),[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(T){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(T){}},{key:"getData",value:function(){}}])})(),ri=(function(){return a((function T(){i(this,T)}),[{key:"addIntersection",value:function(T,m){}},{key:"interfaces_",get:function(){return[mi]}}])})(),Ri=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(m){return this._pts[m]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(m){return m===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(m),this.getCoordinate(m+1))}},{key:"setData",value:function(m){this._data=m}},{key:"safeOctant",value:function(m,y){return m.equals2D(y)?0:ni.octant(m,y)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];this.addIntersectionNode(m,y)}else if(arguments.length===4){var P=arguments[1],j=arguments[3],re=new Oe(arguments[0].getIntersection(j));this.addIntersection(re,P)}}},{key:"toString",value:function(){return Kr.toLineString(new Ra(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(m,y){var P=y,j=P+1;if(j<this._pts.length){var re=this._pts[j];m.equals2D(re)&&(P=j)}return this._nodeList.add(m,P)}},{key:"addIntersections",value:function(m,y,P){for(var j=0;j<m.getIntersectionNum();j++)this.addIntersection(m,y,P,j)}},{key:"interfaces_",get:function(){return[ri]}}],[{key:"constructor_",value:function(){this._nodeList=new Ln(this),this._pts=null,this._data=null;var m=arguments[0],y=arguments[1];this._pts=m,this._data=y}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var m=arguments[0],y=new De;return T.getNodedSubstrings(m,y),y}if(arguments.length===2)for(var P=arguments[1],j=arguments[0].iterator();j.hasNext();)j.next().getNodeList().addSplitEdges(P)}}])})(),pi=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof T){var m=arguments[0],y=Ht.index(this.p0,this.p1,m.p0),P=Ht.index(this.p0,this.p1,m.p1);return y>=0&&P>=0||y<=0&&P<=0?Math.max(y,P):0}if(arguments[0]instanceof Oe){var j=arguments[0];return Ht.index(this.p0,this.p1,j)}}},{key:"toGeometry",value:function(m){return m.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(m){if(!(m instanceof T))return!1;var y=m;return this.p0.equals(y.p0)&&this.p1.equals(y.p1)}},{key:"intersection",value:function(m){var y=new nn;return y.computeIntersection(this.p0,this.p1,m.p0,m.p1),y.hasIntersection()?y.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Oe){var m=arguments[0];if(m.equals(this.p0)||m.equals(this.p1))return new Oe(m);var y=this.projectionFactor(m),P=new Oe;return P.x=this.p0.x+y*(this.p1.x-this.p0.x),P.y=this.p0.y+y*(this.p1.y-this.p0.y),P}if(arguments[0]instanceof T){var j=arguments[0],re=this.projectionFactor(j.p0),ye=this.projectionFactor(j.p1);if(re>=1&&ye>=1||re<=0&&ye<=0)return null;var Ae=this.project(j.p0);re<0&&(Ae=this.p0),re>1&&(Ae=this.p1);var Ke=this.project(j.p1);return ye<0&&(Ke=this.p0),ye>1&&(Ke=this.p1),new T(Ae,Ke)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(m){return m===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(m){return Yt.pointToLinePerpendicular(m,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return T.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(m){if(m.equals(this.p0))return 0;if(m.equals(this.p1))return 1;var y=this.p1.x-this.p0.x,P=this.p1.y-this.p0.y,j=y*y+P*P;return j<=0?we.NaN:((m.x-this.p0.x)*y+(m.y-this.p0.y)*P)/j}},{key:"closestPoints",value:function(m){var y=this.intersection(m);if(y!==null)return[y,y];var P=new Array(2).fill(null),j=we.MAX_VALUE,re=null,ye=this.closestPoint(m.p0);j=ye.distance(m.p0),P[0]=ye,P[1]=m.p0;var Ae=this.closestPoint(m.p1);(re=Ae.distance(m.p1))<j&&(j=re,P[0]=Ae,P[1]=m.p1);var Ke=m.closestPoint(this.p0);(re=Ke.distance(this.p0))<j&&(j=re,P[0]=this.p0,P[1]=Ke);var gt=m.closestPoint(this.p1);return(re=gt.distance(this.p1))<j&&(j=re,P[0]=this.p1,P[1]=gt),P}},{key:"closestPoint",value:function(m){var y=this.projectionFactor(m);return y>0&&y<1?this.project(m):this.p0.distance(m)<this.p1.distance(m)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(m){var y=m,P=this.p0.compareTo(y.p0);return P!==0?P:this.p1.compareTo(y.p1)}},{key:"reverse",value:function(){var m=this.p0;this.p0=this.p1,this.p1=m}},{key:"equalsTopo",value:function(m){return this.p0.equals(m.p0)&&this.p1.equals(m.p1)||this.p0.equals(m.p1)&&this.p1.equals(m.p0)}},{key:"lineIntersection",value:function(m){return At.intersection(this.p0,this.p1,m.p0,m.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(m,y){var P=this.p0.x+m*(this.p1.x-this.p0.x),j=this.p0.y+m*(this.p1.y-this.p0.y),re=this.p1.x-this.p0.x,ye=this.p1.y-this.p0.y,Ae=Math.sqrt(re*re+ye*ye),Ke=0,gt=0;if(y!==0){if(Ae<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");Ke=y*re/Ae,gt=y*ye/Ae}return new Oe(P-gt,j+Ke)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var m=arguments[0];this.setCoordinates(m.p0,m.p1)}else if(arguments.length===2){var y=arguments[0],P=arguments[1];this.p0.x=y.x,this.p0.y=y.y,this.p1.x=P.x,this.p1.y=P.y}}},{key:"segmentFraction",value:function(m){var y=this.projectionFactor(m);return y<0?y=0:(y>1||we.isNaN(y))&&(y=1),y}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(m){var y=this.p1.getY()-this.p0.getY(),P=this.p0.getX()-this.p1.getX(),j=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),re=y*y+P*P,ye=y*y-P*P,Ae=m.getX(),Ke=m.getY();return new Oe((-ye*Ae-2*y*P*Ke-2*y*j)/re,(ye*Ke-2*y*P*Ae-2*P*j)/re)}},{key:"distance",value:function(){if(arguments[0]instanceof T){var m=arguments[0];return Yt.segmentToSegment(this.p0,this.p1,m.p0,m.p1)}if(arguments[0]instanceof Oe){var y=arguments[0];return Yt.pointToSegment(y,this.p0,this.p1)}}},{key:"pointAlong",value:function(m){var y=new Oe;return y.x=this.p0.x+m*(this.p1.x-this.p0.x),y.y=this.p0.y+m*(this.p1.y-this.p0.y),y}},{key:"hashCode",value:function(){var m=we.doubleToLongBits(this.p0.x);m^=31*we.doubleToLongBits(this.p0.y);var y=Math.trunc(m)^Math.trunc(m>>32),P=we.doubleToLongBits(this.p1.x);return P^=31*we.doubleToLongBits(this.p1.y),y^(Math.trunc(P)^Math.trunc(P>>32))}},{key:"interfaces_",get:function(){return[U,X]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)T.constructor_.call(this,new Oe,new Oe);else if(arguments.length===1){var m=arguments[0];T.constructor_.call(this,m.p0,m.p1)}else if(arguments.length===2){var y=arguments[0],P=arguments[1];this.p0=y,this.p1=P}else if(arguments.length===4){var j=arguments[0],re=arguments[1],ye=arguments[2],Ae=arguments[3];T.constructor_.call(this,new Oe(j,re),new Oe(ye,Ae))}}},{key:"midPoint",value:function(m,y){return new Oe((m.x+y.x)/2,(m.y+y.y)/2)}}])})(),yi=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var T=arguments[1],m=arguments[2],y=arguments[3];arguments[0].getLineSegment(T,this._overlapSeg1),m.getLineSegment(y,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new pi,this._overlapSeg2=new pi}}])})(),ma=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getLineSegment",value:function(T,m){m.p0=this._pts[T],m.p1=this._pts[T+1]}},{key:"computeSelect",value:function(T,m,y,P){var j=this._pts[m],re=this._pts[y];if(y-m==1)return P.select(this,m),null;if(!T.intersects(j,re))return null;var ye=Math.trunc((m+y)/2);m<ye&&this.computeSelect(T,m,ye,P),ye<y&&this.computeSelect(T,ye,y,P)}},{key:"getCoordinates",value:function(){for(var T=new Array(this._end-this._start+1).fill(null),m=0,y=this._start;y<=this._end;y++)T[m++]=this._pts[y];return T}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var T=arguments[0],m=arguments[1];this.computeOverlaps(this._start,this._end,T,T._start,T._end,m)}else if(arguments.length===6){var y=arguments[0],P=arguments[1],j=arguments[2],re=arguments[3],ye=arguments[4],Ae=arguments[5];if(P-y==1&&ye-re==1)return Ae.overlap(this,y,j,re),null;if(!this.overlaps(y,P,j,re,ye))return null;var Ke=Math.trunc((y+P)/2),gt=Math.trunc((re+ye)/2);y<Ke&&(re<gt&&this.computeOverlaps(y,Ke,j,re,gt,Ae),gt<ye&&this.computeOverlaps(y,Ke,j,gt,ye,Ae)),Ke<P&&(re<gt&&this.computeOverlaps(Ke,P,j,re,gt,Ae),gt<ye&&this.computeOverlaps(Ke,P,j,gt,ye,Ae))}}},{key:"setId",value:function(T){this._id=T}},{key:"select",value:function(T,m){this.computeSelect(T,this._start,this._end,m)}},{key:"getEnvelope",value:function(){if(this._env===null){var T=this._pts[this._start],m=this._pts[this._end];this._env=new Ze(T,m)}return this._env}},{key:"overlaps",value:function(T,m,y,P,j){return Ze.intersects(this._pts[T],this._pts[m],y._pts[P],y._pts[j])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var T=arguments[0],m=arguments[1],y=arguments[2],P=arguments[3];this._pts=T,this._start=m,this._end=y,this._context=P}}])})(),Ji=(function(){function T(){i(this,T)}return a(T,null,[{key:"findChainEnd",value:function(m,y){for(var P=y;P<m.length-1&&m[P].equals2D(m[P+1]);)P++;if(P>=m.length-1)return m.length-1;for(var j=bn.quadrant(m[P],m[P+1]),re=y+1;re<m.length&&!(!m[re-1].equals2D(m[re])&&bn.quadrant(m[re-1],m[re])!==j);)re++;return re-1}},{key:"getChains",value:function(){if(arguments.length===1){var m=arguments[0];return T.getChains(m,null)}if(arguments.length===2){var y=arguments[0],P=arguments[1],j=new De,re=0;do{var ye=T.findChainEnd(y,re),Ae=new ma(y,re,ye,P);j.add(Ae),re=ye}while(re<y.length-1);return j}}}])})(),sa=(function(){return a((function T(){i(this,T)}),[{key:"computeNodes",value:function(T){}},{key:"getNodedSubstrings",value:function(){}}])})(),rs=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"setSegmentIntersector",value:function(T){this._segInt=T}},{key:"interfaces_",get:function(){return[sa]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var T=arguments[0];this.setSegmentIntersector(T)}}}}])})(),ks=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Ri.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(y){for(var P=Ji.getChains(y.getCoordinates(),y).iterator();P.hasNext();){var j=P.next();j.setId(this._idCounter++),this._index.insert(j.getEnvelope(),j),this._monoChains.add(j)}}},{key:"computeNodes",value:function(y){this._nodedSegStrings=y;for(var P=y.iterator();P.hasNext();)this.add(P.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var y=new Xl(this._segInt),P=this._monoChains.iterator();P.hasNext();)for(var j=P.next(),re=this._index.query(j.getEnvelope()).iterator();re.hasNext();){var ye=re.next();if(ye.getId()>j.getId()&&(j.computeOverlaps(ye,y),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new De,this._index=new jt,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var y=arguments[0];rs.constructor_.call(this,y)}}}}])})(rs),Xl=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"overlap",value:function(){if(arguments.length!==4)return S(m,"overlap",this,1).apply(this,arguments);var y=arguments[1],P=arguments[2],j=arguments[3],re=arguments[0].getContext(),ye=P.getContext();this._si.processIntersections(re,y,ye,j)}}],[{key:"constructor_",value:function(){this._si=null;var y=arguments[0];this._si=y}}])})(yi);ks.SegmentOverlapAction=Xl;var ns=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"isDeletable",value:function(m,y,P,j){var re=this._inputLine[m],ye=this._inputLine[y],Ae=this._inputLine[P];return!!this.isConcave(re,ye,Ae)&&!!this.isShallow(re,ye,Ae,j)&&this.isShallowSampled(re,ye,m,P,j)}},{key:"deleteShallowConcavities",value:function(){for(var m=1,y=this.findNextNonDeletedIndex(m),P=this.findNextNonDeletedIndex(y),j=!1;P<this._inputLine.length;){var re=!1;this.isDeletable(m,y,P,this._distanceTol)&&(this._isDeleted[y]=T.DELETE,re=!0,j=!0),m=re?P:y,y=this.findNextNonDeletedIndex(m),P=this.findNextNonDeletedIndex(y)}return j}},{key:"isShallowConcavity",value:function(m,y,P,j){return Ht.index(m,y,P)===this._angleOrientation&&Yt.pointToSegment(y,m,P)<j}},{key:"isShallowSampled",value:function(m,y,P,j,re){var ye=Math.trunc((j-P)/T.NUM_PTS_TO_CHECK);ye<=0&&(ye=1);for(var Ae=P;Ae<j;Ae+=ye)if(!this.isShallow(m,y,this._inputLine[Ae],re))return!1;return!0}},{key:"isConcave",value:function(m,y,P){var j=Ht.index(m,y,P)===this._angleOrientation;return j}},{key:"simplify",value:function(m){this._distanceTol=Math.abs(m),m<0&&(this._angleOrientation=Ht.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var y=!1;do y=this.deleteShallowConcavities();while(y);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(m){for(var y=m+1;y<this._inputLine.length&&this._isDeleted[y]===T.DELETE;)y++;return y}},{key:"isShallow",value:function(m,y,P,j){return Yt.pointToSegment(y,m,P)<j}},{key:"collapseLine",value:function(){for(var m=new Ki,y=0;y<this._inputLine.length;y++)this._isDeleted[y]!==T.DELETE&&m.add(this._inputLine[y]);return m.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Ht.COUNTERCLOCKWISE;var m=arguments[0];this._inputLine=m}},{key:"simplify",value:function(m,y){return new T(m).simplify(y)}}])})();ns.INIT=0,ns.DELETE=1,ns.KEEP=1,ns.NUM_PTS_TO_CHECK=10;var Yl=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getCoordinates",value:function(){return this._ptList.toArray(T.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(m){this._precisionModel=m}},{key:"addPt",value:function(m){var y=new Oe(m);if(this._precisionModel.makePrecise(y),this.isRedundant(y))return null;this._ptList.add(y)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(m,y){if(y)for(var P=0;P<m.length;P++)this.addPt(m[P]);else for(var j=m.length-1;j>=0;j--)this.addPt(m[j])}},{key:"isRedundant",value:function(m){if(this._ptList.size()<1)return!1;var y=this._ptList.get(this._ptList.size()-1);return m.distance(y)<this._minimimVertexDistance}},{key:"toString",value:function(){return new ho().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var m=new Oe(this._ptList.get(0)),y=this._ptList.get(this._ptList.size()-1);if(m.equals(y))return null;this._ptList.add(m)}},{key:"setMinimumVertexDistance",value:function(m){this._minimimVertexDistance=m}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new De}}])})();Yl.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var la=(function(){function T(){i(this,T)}return a(T,null,[{key:"toDegrees",value:function(m){return 180*m/Math.PI}},{key:"normalize",value:function(m){for(;m>Math.PI;)m-=T.PI_TIMES_2;for(;m<=-Math.PI;)m+=T.PI_TIMES_2;return m}},{key:"angle",value:function(){if(arguments.length===1){var m=arguments[0];return Math.atan2(m.y,m.x)}if(arguments.length===2){var y=arguments[0],P=arguments[1],j=P.x-y.x,re=P.y-y.y;return Math.atan2(re,j)}}},{key:"isAcute",value:function(m,y,P){var j=m.x-y.x,re=m.y-y.y;return j*(P.x-y.x)+re*(P.y-y.y)>0}},{key:"isObtuse",value:function(m,y,P){var j=m.x-y.x,re=m.y-y.y;return j*(P.x-y.x)+re*(P.y-y.y)<0}},{key:"interiorAngle",value:function(m,y,P){var j=T.angle(y,m),re=T.angle(y,P);return Math.abs(re-j)}},{key:"normalizePositive",value:function(m){if(m<0){for(;m<0;)m+=T.PI_TIMES_2;m>=T.PI_TIMES_2&&(m=0)}else{for(;m>=T.PI_TIMES_2;)m-=T.PI_TIMES_2;m<0&&(m=0)}return m}},{key:"angleBetween",value:function(m,y,P){var j=T.angle(y,m),re=T.angle(y,P);return T.diff(j,re)}},{key:"diff",value:function(m,y){var P=null;return(P=m<y?y-m:m-y)>Math.PI&&(P=2*Math.PI-P),P}},{key:"toRadians",value:function(m){return m*Math.PI/180}},{key:"getTurn",value:function(m,y){var P=Math.sin(y-m);return P>0?T.COUNTERCLOCKWISE:P<0?T.CLOCKWISE:T.NONE}},{key:"angleBetweenOriented",value:function(m,y,P){var j=T.angle(y,m),re=T.angle(y,P)-j;return re<=-Math.PI?re+T.PI_TIMES_2:re>Math.PI?re-T.PI_TIMES_2:re}}])})();la.PI_TIMES_2=2*Math.PI,la.PI_OVER_2=Math.PI/2,la.PI_OVER_4=Math.PI/4,la.COUNTERCLOCKWISE=Ht.COUNTERCLOCKWISE,la.CLOCKWISE=Ht.CLOCKWISE,la.NONE=Ht.COLLINEAR;var As=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"addNextSegment",value:function(m,y){if(this._s0=this._s1,this._s1=this._s2,this._s2=m,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var P=Ht.index(this._s0,this._s1,this._s2),j=P===Ht.CLOCKWISE&&this._side===at.LEFT||P===Ht.COUNTERCLOCKWISE&&this._side===at.RIGHT;P===0?this.addCollinear(y):j?this.addOutsideTurn(P,y):this.addInsideTurn(P,y)}},{key:"addLineEndCap",value:function(m,y){var P=new pi(m,y),j=new pi;this.computeOffsetSegment(P,at.LEFT,this._distance,j);var re=new pi;this.computeOffsetSegment(P,at.RIGHT,this._distance,re);var ye=y.x-m.x,Ae=y.y-m.y,Ke=Math.atan2(Ae,ye);switch(this._bufParams.getEndCapStyle()){case F.CAP_ROUND:this._segList.addPt(j.p1),this.addDirectedFillet(y,Ke+Math.PI/2,Ke-Math.PI/2,Ht.CLOCKWISE,this._distance),this._segList.addPt(re.p1);break;case F.CAP_FLAT:this._segList.addPt(j.p1),this._segList.addPt(re.p1);break;case F.CAP_SQUARE:var gt=new Oe;gt.x=Math.abs(this._distance)*Math.cos(Ke),gt.y=Math.abs(this._distance)*Math.sin(Ke);var rr=new Oe(j.p1.x+gt.x,j.p1.y+gt.y),fr=new Oe(re.p1.x+gt.x,re.p1.y+gt.y);this._segList.addPt(rr),this._segList.addPt(fr)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(m,y,P,j){var re=At.intersection(y.p0,y.p1,P.p0,P.p1);if(re!==null&&(j<=0?1:re.distance(m)/Math.abs(j))<=this._bufParams.getMitreLimit())return this._segList.addPt(re),null;this.addLimitedMitreJoin(y,P,j,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(m,y){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*T.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===F.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===F.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(y&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,m,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(m){this._segList.addPt(new Oe(m.x+this._distance,m.y+this._distance)),this._segList.addPt(new Oe(m.x+this._distance,m.y-this._distance)),this._segList.addPt(new Oe(m.x-this._distance,m.y-this._distance)),this._segList.addPt(new Oe(m.x-this._distance,m.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(m,y){this._segList.addPts(m,y)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(m,y,P,j,re){var ye=y.x-m.x,Ae=y.y-m.y,Ke=Math.atan2(Ae,ye),gt=P.x-m.x,rr=P.y-m.y,fr=Math.atan2(rr,gt);j===Ht.CLOCKWISE?Ke<=fr&&(Ke+=2*Math.PI):Ke>=fr&&(Ke-=2*Math.PI),this._segList.addPt(y),this.addDirectedFillet(m,Ke,fr,j,re),this._segList.addPt(P)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(m,y,P){this._s1=m,this._s2=y,this._side=P,this._seg1.setCoordinates(m,y),this.computeOffsetSegment(this._seg1,P,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(m,y,P,j){var re=this._seg0.p1,ye=la.angle(re,this._seg0.p0),Ae=la.angleBetweenOriented(this._seg0.p0,re,this._seg1.p1)/2,Ke=la.normalize(ye+Ae),gt=la.normalize(Ke+Math.PI),rr=j*P,fr=P-rr*Math.abs(Math.sin(Ae)),zr=re.x+rr*Math.cos(gt),hn=re.y+rr*Math.sin(gt),Mn=new Oe(zr,hn),$n=new pi(re,Mn),An=$n.pointAlongOffset(1,fr),In=$n.pointAlongOffset(1,-fr);this._side===at.LEFT?(this._segList.addPt(An),this._segList.addPt(In)):(this._segList.addPt(In),this._segList.addPt(An))}},{key:"addDirectedFillet",value:function(m,y,P,j,re){var ye=j===Ht.CLOCKWISE?-1:1,Ae=Math.abs(y-P),Ke=Math.trunc(Ae/this._filletAngleQuantum+.5);if(Ke<1)return null;for(var gt=Ae/Ke,rr=new Oe,fr=0;fr<Ke;fr++){var zr=y+ye*fr*gt;rr.x=m.x+re*Math.cos(zr),rr.y=m.y+re*Math.sin(zr),this._segList.addPt(rr)}}},{key:"computeOffsetSegment",value:function(m,y,P,j){var re=y===at.LEFT?1:-1,ye=m.p1.x-m.p0.x,Ae=m.p1.y-m.p0.y,Ke=Math.sqrt(ye*ye+Ae*Ae),gt=re*P*ye/Ke,rr=re*P*Ae/Ke;j.p0.x=m.p0.x-rr,j.p0.y=m.p0.y+gt,j.p1.x=m.p1.x-rr,j.p1.y=m.p1.y+gt}},{key:"addInsideTurn",value:function(m,y){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*T.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var P=new Oe((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(P);var j=new Oe((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(j)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(m){var y=new Oe(m.x+this._distance,m.y);this._segList.addPt(y),this.addDirectedFillet(m,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(m,y){this._segList.addPt(m.p1),this._segList.addPt(y.p0)}},{key:"init",value:function(m){this._distance=m,this._maxCurveSegmentError=m*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Yl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(m*T.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(m){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===F.JOIN_BEVEL||this._bufParams.getJoinStyle()===F.JOIN_MITRE?(m&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Ht.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new pi,this._seg1=new pi,this._offset0=new pi,this._offset1=new pi,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[0],y=arguments[1],P=arguments[2];this._precisionModel=m,this._bufParams=y,this._li=new nn,this._filletAngleQuantum=Math.PI/2/y.getQuadrantSegments(),y.getQuadrantSegments()>=8&&y.getJoinStyle()===F.JOIN_ROUND&&(this._closingSegLengthFactor=T.MAX_CLOSING_SEG_LEN_FACTOR),this.init(P)}}])})();As.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,As.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,As.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,As.MAX_CLOSING_SEG_LEN_FACTOR=80;var kl=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getOffsetCurve",value:function(m,y){if(this._distance=y,y===0)return null;var P=y<0,j=Math.abs(y),re=this.getSegGen(j);m.length<=1?this.computePointCurve(m[0],re):this.computeOffsetCurve(m,P,re);var ye=re.getCoordinates();return P&&wn.reverse(ye),ye}},{key:"computeSingleSidedBufferCurve",value:function(m,y,P){var j=this.simplifyTolerance(this._distance);if(y){P.addSegments(m,!0);var re=ns.simplify(m,-j),ye=re.length-1;P.initSideSegments(re[ye],re[ye-1],at.LEFT),P.addFirstSegment();for(var Ae=ye-2;Ae>=0;Ae--)P.addNextSegment(re[Ae],!0)}else{P.addSegments(m,!1);var Ke=ns.simplify(m,j),gt=Ke.length-1;P.initSideSegments(Ke[0],Ke[1],at.LEFT),P.addFirstSegment();for(var rr=2;rr<=gt;rr++)P.addNextSegment(Ke[rr],!0)}P.addLastSegment(),P.closeRing()}},{key:"computeRingBufferCurve",value:function(m,y,P){var j=this.simplifyTolerance(this._distance);y===at.RIGHT&&(j=-j);var re=ns.simplify(m,j),ye=re.length-1;P.initSideSegments(re[ye-1],re[0],y);for(var Ae=1;Ae<=ye;Ae++){var Ke=Ae!==1;P.addNextSegment(re[Ae],Ke)}P.closeRing()}},{key:"computeLineBufferCurve",value:function(m,y){var P=this.simplifyTolerance(this._distance),j=ns.simplify(m,P),re=j.length-1;y.initSideSegments(j[0],j[1],at.LEFT);for(var ye=2;ye<=re;ye++)y.addNextSegment(j[ye],!0);y.addLastSegment(),y.addLineEndCap(j[re-1],j[re]);var Ae=ns.simplify(m,-P),Ke=Ae.length-1;y.initSideSegments(Ae[Ke],Ae[Ke-1],at.LEFT);for(var gt=Ke-2;gt>=0;gt--)y.addNextSegment(Ae[gt],!0);y.addLastSegment(),y.addLineEndCap(Ae[1],Ae[0]),y.closeRing()}},{key:"computePointCurve",value:function(m,y){switch(this._bufParams.getEndCapStyle()){case F.CAP_ROUND:y.createCircle(m);break;case F.CAP_SQUARE:y.createSquare(m)}}},{key:"getLineCurve",value:function(m,y){if(this._distance=y,this.isLineOffsetEmpty(y))return null;var P=Math.abs(y),j=this.getSegGen(P);if(m.length<=1)this.computePointCurve(m[0],j);else if(this._bufParams.isSingleSided()){var re=y<0;this.computeSingleSidedBufferCurve(m,re,j)}else this.computeLineBufferCurve(m,j);return j.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(m){return m*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(m,y,P){if(this._distance=P,m.length<=2)return this.getLineCurve(m,P);if(P===0)return T.copyCoordinates(m);var j=this.getSegGen(P);return this.computeRingBufferCurve(m,y,j),j.getCoordinates()}},{key:"computeOffsetCurve",value:function(m,y,P){var j=this.simplifyTolerance(this._distance);if(y){var re=ns.simplify(m,-j),ye=re.length-1;P.initSideSegments(re[ye],re[ye-1],at.LEFT),P.addFirstSegment();for(var Ae=ye-2;Ae>=0;Ae--)P.addNextSegment(re[Ae],!0)}else{var Ke=ns.simplify(m,j),gt=Ke.length-1;P.initSideSegments(Ke[0],Ke[1],at.LEFT),P.addFirstSegment();for(var rr=2;rr<=gt;rr++)P.addNextSegment(Ke[rr],!0)}P.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(m){return m===0||m<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(m){return new As(this._precisionModel,this._bufParams,m)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var m=arguments[0],y=arguments[1];this._precisionModel=m,this._bufParams=y}},{key:"copyCoordinates",value:function(m){for(var y=new Array(m.length).fill(null),P=0;P<y.length;P++)y[P]=new Oe(m[P]);return y}}])})(),is=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var T=arguments[0],m=new De,y=this._subgraphs.iterator();y.hasNext();){var P=y.next(),j=P.getEnvelope();T.y<j.getMinY()||T.y>j.getMaxY()||this.findStabbedSegments(T,P.getDirectedEdges(),m)}return m}if(arguments.length===3){if(br(arguments[2],ur)&&arguments[0]instanceof Oe&&arguments[1]instanceof wa){for(var re=arguments[0],ye=arguments[1],Ae=arguments[2],Ke=ye.getEdge().getCoordinates(),gt=0;gt<Ke.length-1;gt++)if(this._seg.p0=Ke[gt],this._seg.p1=Ke[gt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<re.x||this._seg.isHorizontal()||re.y<this._seg.p0.y||re.y>this._seg.p1.y||Ht.index(this._seg.p0,this._seg.p1,re)===Ht.RIGHT)){var rr=ye.getDepth(at.LEFT);this._seg.p0.equals(Ke[gt])||(rr=ye.getDepth(at.RIGHT));var fr=new Ca(this._seg,rr);Ae.add(fr)}}else if(br(arguments[2],ur)&&arguments[0]instanceof Oe&&br(arguments[1],ur))for(var zr=arguments[0],hn=arguments[2],Mn=arguments[1].iterator();Mn.hasNext();){var $n=Mn.next();$n.isForward()&&this.findStabbedSegments(zr,$n,hn)}}}},{key:"getDepth",value:function(T){var m=this.findStabbedSegments(T);return m.size()===0?0:Wa.min(m)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new pi;var T=arguments[0];this._subgraphs=T}}])})(),Ca=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"compareTo",value:function(T){var m=T;if(this._upwardSeg.minX()>=m._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=m._upwardSeg.minX())return-1;var y=this._upwardSeg.orientationIndex(m._upwardSeg);return y!==0||(y=-1*m._upwardSeg.orientationIndex(this._upwardSeg))!==0?y:this._upwardSeg.compareTo(m._upwardSeg)}},{key:"compareX",value:function(T,m){var y=T.p0.compareTo(m.p0);return y!==0?y:T.p1.compareTo(m.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var T=arguments[0],m=arguments[1];this._upwardSeg=new pi(T),this._leftDepth=m}}])})();is.DepthSegment=Ca;var oo=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,null,[{key:"constructor_",value:function(){D.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])})(D),Qi=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getY",value:function(){var m=this.y/this.w;if(we.isNaN(m)||we.isInfinite(m))throw new oo;return m}},{key:"getX",value:function(){var m=this.x/this.w;if(we.isNaN(m)||we.isInfinite(m))throw new oo;return m}},{key:"getCoordinate",value:function(){var m=new Oe;return m.x=this.getX(),m.y=this.getY(),m}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var m=arguments[0];this.x=m.x,this.y=m.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],P=arguments[1];this.x=y,this.y=P,this.w=1}else if(arguments[0]instanceof T&&arguments[1]instanceof T){var j=arguments[0],re=arguments[1];this.x=j.y*re.w-re.y*j.w,this.y=re.x*j.w-j.x*re.w,this.w=j.x*re.y-re.x*j.y}else if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var ye=arguments[0],Ae=arguments[1];this.x=ye.y-Ae.y,this.y=Ae.x-ye.x,this.w=ye.x*Ae.y-Ae.x*ye.y}}else if(arguments.length===3){var Ke=arguments[0],gt=arguments[1],rr=arguments[2];this.x=Ke,this.y=gt,this.w=rr}else if(arguments.length===4){var fr=arguments[0],zr=arguments[1],hn=arguments[2],Mn=arguments[3],$n=fr.y-zr.y,An=zr.x-fr.x,In=fr.x*zr.y-zr.x*fr.y,ki=hn.y-Mn.y,xi=Mn.x-hn.x,Ya=hn.x*Mn.y-Mn.x*hn.y;this.x=An*Ya-xi*In,this.y=ki*In-$n*Ya,this.w=$n*xi-ki*An}}}])})(),Ms=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"area",value:function(){return T.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return T.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(m){if(m===null)throw new q("Supplied point is null.");return T.interpolateZ(m,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return T.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return T.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return T.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return T.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return T.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return T.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var m=arguments[0],y=arguments[1],P=arguments[2];this.p0=m,this.p1=y,this.p2=P}},{key:"area",value:function(m,y,P){return Math.abs(((P.x-m.x)*(y.y-m.y)-(y.x-m.x)*(P.y-m.y))/2)}},{key:"signedArea",value:function(m,y,P){return((P.x-m.x)*(y.y-m.y)-(y.x-m.x)*(P.y-m.y))/2}},{key:"det",value:function(m,y,P,j){return m*j-y*P}},{key:"interpolateZ",value:function(m,y,P,j){var re=y.x,ye=y.y,Ae=P.x-re,Ke=j.x-re,gt=P.y-ye,rr=j.y-ye,fr=Ae*rr-Ke*gt,zr=m.x-re,hn=m.y-ye,Mn=(rr*zr-Ke*hn)/fr,$n=(-gt*zr+Ae*hn)/fr;return y.getZ()+Mn*(P.getZ()-y.getZ())+$n*(j.getZ()-y.getZ())}},{key:"longestSideLength",value:function(m,y,P){var j=m.distance(y),re=y.distance(P),ye=P.distance(m),Ae=j;return re>Ae&&(Ae=re),ye>Ae&&(Ae=ye),Ae}},{key:"circumcentreDD",value:function(m,y,P){var j=ar.valueOf(m.x).subtract(P.x),re=ar.valueOf(m.y).subtract(P.y),ye=ar.valueOf(y.x).subtract(P.x),Ae=ar.valueOf(y.y).subtract(P.y),Ke=ar.determinant(j,re,ye,Ae).multiply(2),gt=j.sqr().add(re.sqr()),rr=ye.sqr().add(Ae.sqr()),fr=ar.determinant(re,gt,Ae,rr),zr=ar.determinant(j,gt,ye,rr),hn=ar.valueOf(P.x).subtract(fr.divide(Ke)).doubleValue(),Mn=ar.valueOf(P.y).add(zr.divide(Ke)).doubleValue();return new Oe(hn,Mn)}},{key:"isAcute",value:function(m,y,P){return!!la.isAcute(m,y,P)&&!!la.isAcute(y,P,m)&&!!la.isAcute(P,m,y)}},{key:"circumcentre",value:function(m,y,P){var j=P.x,re=P.y,ye=m.x-j,Ae=m.y-re,Ke=y.x-j,gt=y.y-re,rr=2*T.det(ye,Ae,Ke,gt),fr=T.det(Ae,ye*ye+Ae*Ae,gt,Ke*Ke+gt*gt),zr=T.det(ye,ye*ye+Ae*Ae,Ke,Ke*Ke+gt*gt);return new Oe(j-fr/rr,re+zr/rr)}},{key:"perpendicularBisector",value:function(m,y){var P=y.x-m.x,j=y.y-m.y,re=new Qi(m.x+P/2,m.y+j/2,1),ye=new Qi(m.x-j+P/2,m.y+P+j/2,1);return new Qi(re,ye)}},{key:"angleBisector",value:function(m,y,P){var j=y.distance(m),re=j/(j+y.distance(P)),ye=P.x-m.x,Ae=P.y-m.y;return new Oe(m.x+re*ye,m.y+re*Ae)}},{key:"area3D",value:function(m,y,P){var j=y.x-m.x,re=y.y-m.y,ye=y.getZ()-m.getZ(),Ae=P.x-m.x,Ke=P.y-m.y,gt=P.getZ()-m.getZ(),rr=re*gt-ye*Ke,fr=ye*Ae-j*gt,zr=j*Ke-re*Ae,hn=rr*rr+fr*fr+zr*zr,Mn=Math.sqrt(hn)/2;return Mn}},{key:"centroid",value:function(m,y,P){var j=(m.x+y.x+P.x)/3,re=(m.y+y.y+P.y)/3;return new Oe(j,re)}},{key:"inCentre",value:function(m,y,P){var j=y.distance(P),re=m.distance(P),ye=m.distance(y),Ae=j+re+ye,Ke=(j*m.x+re*y.x+ye*P.x)/Ae,gt=(j*m.y+re*y.y+ye*P.y)/Ae;return new Oe(Ke,gt)}}])})(),dl=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"addRingSide",value:function(T,m,y,P,j){if(m===0&&T.length<qr.MINIMUM_VALID_SIZE)return null;var re=P,ye=j;T.length>=qr.MINIMUM_VALID_SIZE&&Ht.isCCW(T)&&(re=j,ye=P,y=at.opposite(y));var Ae=this._curveBuilder.getRingCurve(T,y,m);this.addCurve(Ae,re,ye)}},{key:"addRingBothSides",value:function(T,m){this.addRingSide(T,m,at.LEFT,Ie.EXTERIOR,Ie.INTERIOR),this.addRingSide(T,m,at.RIGHT,Ie.INTERIOR,Ie.EXTERIOR)}},{key:"addPoint",value:function(T){if(this._distance<=0)return null;var m=T.getCoordinates(),y=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(y,Ie.EXTERIOR,Ie.INTERIOR)}},{key:"addPolygon",value:function(T){var m=this._distance,y=at.LEFT;this._distance<0&&(m=-this._distance,y=at.RIGHT);var P=T.getExteriorRing(),j=wn.removeRepeatedPoints(P.getCoordinates());if(this._distance<0&&this.isErodedCompletely(P,this._distance)||this._distance<=0&&j.length<3)return null;this.addRingSide(j,m,y,Ie.EXTERIOR,Ie.INTERIOR);for(var re=0;re<T.getNumInteriorRing();re++){var ye=T.getInteriorRingN(re),Ae=wn.removeRepeatedPoints(ye.getCoordinates());this._distance>0&&this.isErodedCompletely(ye,-this._distance)||this.addRingSide(Ae,m,at.opposite(y),Ie.INTERIOR,Ie.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(T,m){var y=new Ms(T[0],T[1],T[2]),P=y.inCentre();return Yt.pointToSegment(P,y.p0,y.p1)<Math.abs(m)}},{key:"addLineString",value:function(T){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var m=wn.removeRepeatedPoints(T.getCoordinates());if(wn.isRing(m)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(m,this._distance);else{var y=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(y,Ie.EXTERIOR,Ie.INTERIOR)}}},{key:"addCurve",value:function(T,m,y){if(T===null||T.length<2)return null;var P=new Ri(T,new Rn(0,Ie.BOUNDARY,m,y));this._curveList.add(P)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(T){if(T.isEmpty())return null;if(T instanceof Ur)this.addPolygon(T);else if(T instanceof un)this.addLineString(T);else if(T instanceof qe)this.addPoint(T);else if(T instanceof Mi)this.addCollection(T);else if(T instanceof ps)this.addCollection(T);else if(T instanceof bi)this.addCollection(T);else{if(!(T instanceof di))throw new $e(T.getGeometryType());this.addCollection(T)}}},{key:"isErodedCompletely",value:function(T,m){var y=T.getCoordinates();if(y.length<4)return m<0;if(y.length===4)return this.isTriangleErodedCompletely(y,m);var P=T.getEnvelopeInternal(),j=Math.min(P.getHeight(),P.getWidth());return m<0&&2*Math.abs(m)>j}},{key:"addCollection",value:function(T){for(var m=0;m<T.getNumGeometries();m++){var y=T.getGeometryN(m);this.add(y)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new De;var T=arguments[0],m=arguments[1],y=arguments[2];this._inputGeom=T,this._distance=m,this._curveBuilder=y}}])})(),ua=(function(){return a((function T(){i(this,T)}),[{key:"locate",value:function(T){}}])})(),Zl=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,T.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ot;var m=this._parent.getGeometryN(this._index++);return m instanceof di?(this._subcollectionIterator=new T(m),this._subcollectionIterator.next()):m}},{key:"remove",value:function(){throw new $e(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[xn]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var m=arguments[0];this._parent=m,this._atStart=!0,this._index=0,this._max=m.getNumGeometries()}},{key:"isAtomic",value:function(m){return!(m instanceof di)}}])})(),fl=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"locate",value:function(m){return T.locate(m,this._geom)}},{key:"interfaces_",get:function(){return[ua]}}],[{key:"constructor_",value:function(){this._geom=null;var m=arguments[0];this._geom=m}},{key:"locatePointInPolygon",value:function(m,y){if(y.isEmpty())return Ie.EXTERIOR;var P=y.getExteriorRing(),j=T.locatePointInRing(m,P);if(j!==Ie.INTERIOR)return j;for(var re=0;re<y.getNumInteriorRing();re++){var ye=y.getInteriorRingN(re),Ae=T.locatePointInRing(m,ye);if(Ae===Ie.BOUNDARY)return Ie.BOUNDARY;if(Ae===Ie.INTERIOR)return Ie.EXTERIOR}return Ie.INTERIOR}},{key:"locatePointInRing",value:function(m,y){return y.getEnvelopeInternal().intersects(m)?Bn.locateInRing(m,y.getCoordinates()):Ie.EXTERIOR}},{key:"containsPointInPolygon",value:function(m,y){return Ie.EXTERIOR!==T.locatePointInPolygon(m,y)}},{key:"locateInGeometry",value:function(m,y){if(y instanceof Ur)return T.locatePointInPolygon(m,y);if(y instanceof di)for(var P=new Zl(y);P.hasNext();){var j=P.next();if(j!==y){var re=T.locateInGeometry(m,j);if(re!==Ie.EXTERIOR)return re}}return Ie.EXTERIOR}},{key:"isContained",value:function(m,y){return Ie.EXTERIOR!==T.locate(m,y)}},{key:"locate",value:function(m,y){return y.isEmpty()?Ie.EXTERIOR:y.getEnvelopeInternal().intersects(m)?T.locateInGeometry(m,y):Ie.EXTERIOR}}])})(),Ls=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getNextCW",value:function(T){this.getEdges();var m=this._edgeList.indexOf(T),y=m-1;return m===0&&(y=this._edgeList.size()-1),this._edgeList.get(y)}},{key:"propagateSideLabels",value:function(T){for(var m=Ie.NONE,y=this.iterator();y.hasNext();){var P=y.next().getLabel();P.isArea(T)&&P.getLocation(T,at.LEFT)!==Ie.NONE&&(m=P.getLocation(T,at.LEFT))}if(m===Ie.NONE)return null;for(var j=m,re=this.iterator();re.hasNext();){var ye=re.next(),Ae=ye.getLabel();if(Ae.getLocation(T,at.ON)===Ie.NONE&&Ae.setLocation(T,at.ON,j),Ae.isArea(T)){var Ke=Ae.getLocation(T,at.LEFT),gt=Ae.getLocation(T,at.RIGHT);if(gt!==Ie.NONE){if(gt!==j)throw new Re("side location conflict",ye.getCoordinate());Ke===Ie.NONE&&be.shouldNeverReachHere("found single null side (at "+ye.getCoordinate()+")"),j=Ke}else be.isTrue(Ae.getLocation(T,at.LEFT)===Ie.NONE,"found single null side"),Ae.setLocation(T,at.RIGHT,j),Ae.setLocation(T,at.LEFT,j)}}}},{key:"getCoordinate",value:function(){var T=this.iterator();return T.hasNext()?T.next().getCoordinate():null}},{key:"print",value:function(T){Ot.out.println("EdgeEndStar:   "+this.getCoordinate());for(var m=this.iterator();m.hasNext();)m.next().print(T)}},{key:"isAreaLabelsConsistent",value:function(T){return this.computeEdgeEndLabels(T.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(T){var m=this.getEdges();if(m.size()<=0)return!0;var y=m.size()-1,P=m.get(y).getLabel().getLocation(T,at.LEFT);be.isTrue(P!==Ie.NONE,"Found unlabelled area edge");for(var j=P,re=this.iterator();re.hasNext();){var ye=re.next().getLabel();be.isTrue(ye.isArea(T),"Found non-area edge");var Ae=ye.getLocation(T,at.LEFT),Ke=ye.getLocation(T,at.RIGHT);if(Ae===Ke||Ke!==j)return!1;j=Ae}return!0}},{key:"findIndex",value:function(T){this.iterator();for(var m=0;m<this._edgeList.size();m++)if(this._edgeList.get(m)===T)return m;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new De(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(T,m,y){return this._ptInAreaLocation[T]===Ie.NONE&&(this._ptInAreaLocation[T]=fl.locate(m,y[T].getGeometry())),this._ptInAreaLocation[T]}},{key:"toString",value:function(){var T=new nr;T.append("EdgeEndStar:   "+this.getCoordinate()),T.append(`
`);for(var m=this.iterator();m.hasNext();){var y=m.next();T.append(y),T.append(`
`)}return T.toString()}},{key:"computeEdgeEndLabels",value:function(T){for(var m=this.iterator();m.hasNext();)m.next().computeLabel(T)}},{key:"computeLabelling",value:function(T){this.computeEdgeEndLabels(T[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var m=[!1,!1],y=this.iterator();y.hasNext();)for(var P=y.next().getLabel(),j=0;j<2;j++)P.isLine(j)&&P.getLocation(j)===Ie.BOUNDARY&&(m[j]=!0);for(var re=this.iterator();re.hasNext();)for(var ye=re.next(),Ae=ye.getLabel(),Ke=0;Ke<2;Ke++)if(Ae.isAnyNull(Ke)){var gt=Ie.NONE;if(m[Ke])gt=Ie.EXTERIOR;else{var rr=ye.getCoordinate();gt=this.getLocation(Ke,rr,T)}Ae.setAllLocationsIfNull(Ke,gt)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(T,m){this._edgeMap.put(T,m),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new On,this._edgeList=null,this._ptInAreaLocation=[Ie.NONE,Ie.NONE]}}])})(),Fa=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var y=null,P=null,j=this._SCANNING_FOR_INCOMING,re=0;re<this._resultAreaEdgeList.size();re++){var ye=this._resultAreaEdgeList.get(re),Ae=ye.getSym();if(ye.getLabel().isArea())switch(y===null&&ye.isInResult()&&(y=ye),j){case this._SCANNING_FOR_INCOMING:if(!Ae.isInResult())continue;P=Ae,j=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!ye.isInResult())continue;P.setNext(ye),j=this._SCANNING_FOR_INCOMING}}if(j===this._LINKING_TO_OUTGOING){if(y===null)throw new Re("no outgoing dirEdge found",this.getCoordinate());be.isTrue(y.isInResult(),"unable to link last incoming dirEdge"),P.setNext(y)}}},{key:"insert",value:function(y){var P=y;this.insertEdgeEnd(P,P)}},{key:"getRightmostEdge",value:function(){var y=this.getEdges(),P=y.size();if(P<1)return null;var j=y.get(0);if(P===1)return j;var re=y.get(P-1),ye=j.getQuadrant(),Ae=re.getQuadrant();return bn.isNorthern(ye)&&bn.isNorthern(Ae)?j:bn.isNorthern(ye)||bn.isNorthern(Ae)?j.getDy()!==0?j:re.getDy()!==0?re:(be.shouldNeverReachHere("found two horizontal edges incident on node"),null):re}},{key:"print",value:function(y){Ot.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var P=this.iterator();P.hasNext();){var j=P.next();y.print("out "),j.print(y),y.println(),y.print("in "),j.getSym().print(y),y.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new De;for(var y=this.iterator();y.hasNext();){var P=y.next();(P.isInResult()||P.getSym().isInResult())&&this._resultAreaEdgeList.add(P)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(y){for(var P=this.iterator();P.hasNext();){var j=P.next().getLabel();j.setAllLocationsIfNull(0,y.getLocation(0)),j.setAllLocationsIfNull(1,y.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var y=null,P=null,j=this._edgeList.size()-1;j>=0;j--){var re=this._edgeList.get(j),ye=re.getSym();P===null&&(P=ye),y!==null&&ye.setNext(y),y=re}P.setNext(y)}},{key:"computeDepths",value:function(){if(arguments.length===1){var y=arguments[0],P=this.findIndex(y),j=y.getDepth(at.LEFT),re=y.getDepth(at.RIGHT),ye=this.computeDepths(P+1,this._edgeList.size(),j);if(this.computeDepths(0,P,ye)!==re)throw new Re("depth mismatch at "+y.getCoordinate())}else if(arguments.length===3){for(var Ae=arguments[1],Ke=arguments[2],gt=arguments[0];gt<Ae;gt++){var rr=this._edgeList.get(gt);rr.setEdgeDepths(at.RIGHT,Ke),Ke=rr.getDepth(at.LEFT)}return Ke}}},{key:"mergeSymLabels",value:function(){for(var y=this.iterator();y.hasNext();){var P=y.next();P.getLabel().merge(P.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(y){for(var P=null,j=null,re=this._SCANNING_FOR_INCOMING,ye=this._resultAreaEdgeList.size()-1;ye>=0;ye--){var Ae=this._resultAreaEdgeList.get(ye),Ke=Ae.getSym();switch(P===null&&Ae.getEdgeRing()===y&&(P=Ae),re){case this._SCANNING_FOR_INCOMING:if(Ke.getEdgeRing()!==y)continue;j=Ke,re=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(Ae.getEdgeRing()!==y)continue;j.setNextMin(Ae),re=this._SCANNING_FOR_INCOMING}}re===this._LINKING_TO_OUTGOING&&(be.isTrue(P!==null,"found null for first outgoing dirEdge"),be.isTrue(P.getEdgeRing()===y,"unable to link last incoming dirEdge"),j.setNextMin(P))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var y=0,P=this.iterator();P.hasNext();)P.next().isInResult()&&y++;return y}if(arguments.length===1){for(var j=arguments[0],re=0,ye=this.iterator();ye.hasNext();)ye.next().getEdgeRing()===j&&re++;return re}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var y=Ie.NONE,P=this.iterator();P.hasNext();){var j=P.next(),re=j.getSym();if(!j.isLineEdge()){if(j.isInResult()){y=Ie.INTERIOR;break}if(re.isInResult()){y=Ie.EXTERIOR;break}}}if(y===Ie.NONE)return null;for(var ye=y,Ae=this.iterator();Ae.hasNext();){var Ke=Ae.next(),gt=Ke.getSym();Ke.isLineEdge()?Ke.getEdge().setCovered(ye===Ie.INTERIOR):(Ke.isInResult()&&(ye=Ie.EXTERIOR),gt.isInResult()&&(ye=Ie.INTERIOR))}}},{key:"computeLabelling",value:function(y){S(m,"computeLabelling",this,1).call(this,y),this._label=new Rn(Ie.NONE);for(var P=this.iterator();P.hasNext();)for(var j=P.next().getEdge().getLabel(),re=0;re<2;re++){var ye=j.getLocation(re);ye!==Ie.INTERIOR&&ye!==Ie.BOUNDARY||this._label.setLocation(re,Ie.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])})(Ls),po=(function(T){function m(){return i(this,m),n(this,m)}return v(m,T),a(m,[{key:"createNode",value:function(y){return new Ci(y,new Fa)}}])})(Ps),Mu=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"compareTo",value:function(m){var y=m;return T.compareOriented(this._pts,this._orientation,y._pts,y._orientation)}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var m=arguments[0];this._pts=m,this._orientation=T.orientation(m)}},{key:"orientation",value:function(m){return wn.increasingDirection(m)===1}},{key:"compareOriented",value:function(m,y,P,j){for(var re=y?1:-1,ye=j?1:-1,Ae=y?m.length:-1,Ke=j?P.length:-1,gt=y?0:m.length-1,rr=j?0:P.length-1;;){var fr=m[gt].compareTo(P[rr]);if(fr!==0)return fr;var zr=(gt+=re)===Ae,hn=(rr+=ye)===Ke;if(zr&&!hn)return-1;if(!zr&&hn)return 1;if(zr&&hn)return 0}}}])})(),Lu=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"print",value:function(T){T.print("MULTILINESTRING ( ");for(var m=0;m<this._edges.size();m++){var y=this._edges.get(m);m>0&&T.print(","),T.print("(");for(var P=y.getCoordinates(),j=0;j<P.length;j++)j>0&&T.print(","),T.print(P[j].x+" "+P[j].y);T.println(")")}T.print(")  ")}},{key:"addAll",value:function(T){for(var m=T.iterator();m.hasNext();)this.add(m.next())}},{key:"findEdgeIndex",value:function(T){for(var m=0;m<this._edges.size();m++)if(this._edges.get(m).equals(T))return m;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(T){return this._edges.get(T)}},{key:"findEqualEdge",value:function(T){var m=new Mu(T.getCoordinates());return this._ocaMap.get(m)}},{key:"add",value:function(T){this._edges.add(T);var m=new Mu(T.getCoordinates());this._ocaMap.put(m,T)}}],[{key:"constructor_",value:function(){this._edges=new De,this._ocaMap=new On}}])})(),hl=(function(){return a((function T(){i(this,T)}),[{key:"processIntersections",value:function(T,m,y,P){}},{key:"isDone",value:function(){}}])})(),pl=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"isTrivialIntersection",value:function(m,y,P,j){if(m===P&&this._li.getIntersectionNum()===1){if(T.isAdjacentSegments(y,j))return!0;if(m.isClosed()){var re=m.size()-1;if(y===0&&j===re||j===0&&y===re)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(m,y,P,j){if(m===P&&y===j)return null;this.numTests++;var re=m.getCoordinates()[y],ye=m.getCoordinates()[y+1],Ae=P.getCoordinates()[j],Ke=P.getCoordinates()[j+1];this._li.computeIntersection(re,ye,Ae,Ke),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(m,y,P,j)||(this._hasIntersection=!0,m.addIntersections(this._li,y,0),P.addIntersections(this._li,j,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[hl]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var m=arguments[0];this._li=m}},{key:"isAdjacentSegments",value:function(m,y){return Math.abs(m-y)===1}}])})(),so=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(T){T.print(this.coord),T.print(" seg # = "+this.segmentIndex),T.println(" dist = "+this.dist)}},{key:"compareTo",value:function(T){var m=T;return this.compare(m.segmentIndex,m.dist)}},{key:"isEndPoint",value:function(T){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===T}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(T,m){return this.segmentIndex<T?-1:this.segmentIndex>T?1:this.dist<m?-1:this.dist>m?1:0}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var T=arguments[0],m=arguments[1],y=arguments[2];this.coord=new Oe(T),this.segmentIndex=m,this.dist=y}}])})(),Xa=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"print",value:function(T){T.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(T)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(T){this.addEndpoints();for(var m=this.iterator(),y=m.next();m.hasNext();){var P=m.next(),j=this.createSplitEdge(y,P);T.add(j),y=P}}},{key:"addEndpoints",value:function(){var T=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[T],T,0)}},{key:"createSplitEdge",value:function(T,m){var y=m.segmentIndex-T.segmentIndex+2,P=this.edge.pts[m.segmentIndex],j=m.dist>0||!m.coord.equals2D(P);j||y--;var re=new Array(y).fill(null),ye=0;re[ye++]=new Oe(T.coord);for(var Ae=T.segmentIndex+1;Ae<=m.segmentIndex;Ae++)re[ye++]=this.edge.pts[Ae];return j&&(re[ye]=m.coord),new ga(re,new Rn(this.edge._label))}},{key:"add",value:function(T,m,y){var P=new so(T,m,y),j=this._nodeMap.get(P);return j!==null?j:(this._nodeMap.put(P,P),P)}},{key:"isIntersection",value:function(T){for(var m=this.iterator();m.hasNext();)if(m.next().coord.equals(T))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new On,this.edge=null;var T=arguments[0];this.edge=T}}])})(),Kl=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])||T.isTrue(this._matrix[Ie.INTERIOR][Ie.BOUNDARY])||T.isTrue(this._matrix[Ie.BOUNDARY][Ie.INTERIOR])||T.isTrue(this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]))&&this._matrix[Ie.EXTERIOR][Ie.INTERIOR]===$t.FALSE&&this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]===$t.FALSE}},{key:"isCoveredBy",value:function(){return(T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])||T.isTrue(this._matrix[Ie.INTERIOR][Ie.BOUNDARY])||T.isTrue(this._matrix[Ie.BOUNDARY][Ie.INTERIOR])||T.isTrue(this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]))&&this._matrix[Ie.INTERIOR][Ie.EXTERIOR]===$t.FALSE&&this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]===$t.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var m=arguments[0],y=0;y<m.length;y++){var P=Math.trunc(y/3),j=y%3;this._matrix[P][j]=$t.toDimensionValue(m.charAt(y))}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Ae=arguments[2];this._matrix[re][ye]=Ae}}},{key:"isContains",value:function(){return T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&this._matrix[Ie.EXTERIOR][Ie.INTERIOR]===$t.FALSE&&this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]===$t.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var m=arguments[0],y=0;y<m.length;y++){var P=Math.trunc(y/3),j=y%3;this.setAtLeast(P,j,$t.toDimensionValue(m.charAt(y)))}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Ae=arguments[2];this._matrix[re][ye]<Ae&&(this._matrix[re][ye]=Ae)}}},{key:"setAtLeastIfValid",value:function(m,y,P){m>=0&&y>=0&&this.setAtLeast(m,y,P)}},{key:"isWithin",value:function(){return T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&this._matrix[Ie.INTERIOR][Ie.EXTERIOR]===$t.FALSE&&this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]===$t.FALSE}},{key:"isTouches",value:function(m,y){return m>y?this.isTouches(y,m):(m===$t.A&&y===$t.A||m===$t.L&&y===$t.L||m===$t.L&&y===$t.A||m===$t.P&&y===$t.A||m===$t.P&&y===$t.L)&&this._matrix[Ie.INTERIOR][Ie.INTERIOR]===$t.FALSE&&(T.isTrue(this._matrix[Ie.INTERIOR][Ie.BOUNDARY])||T.isTrue(this._matrix[Ie.BOUNDARY][Ie.INTERIOR])||T.isTrue(this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]))}},{key:"isOverlaps",value:function(m,y){return m===$t.P&&y===$t.P||m===$t.A&&y===$t.A?T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&T.isTrue(this._matrix[Ie.INTERIOR][Ie.EXTERIOR])&&T.isTrue(this._matrix[Ie.EXTERIOR][Ie.INTERIOR]):m===$t.L&&y===$t.L&&this._matrix[Ie.INTERIOR][Ie.INTERIOR]===1&&T.isTrue(this._matrix[Ie.INTERIOR][Ie.EXTERIOR])&&T.isTrue(this._matrix[Ie.EXTERIOR][Ie.INTERIOR])}},{key:"isEquals",value:function(m,y){return m===y&&T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&this._matrix[Ie.INTERIOR][Ie.EXTERIOR]===$t.FALSE&&this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]===$t.FALSE&&this._matrix[Ie.EXTERIOR][Ie.INTERIOR]===$t.FALSE&&this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]===$t.FALSE}},{key:"toString",value:function(){for(var m=new Di("123456789"),y=0;y<3;y++)for(var P=0;P<3;P++)m.setCharAt(3*y+P,$t.toDimensionSymbol(this._matrix[y][P]));return m.toString()}},{key:"setAll",value:function(m){for(var y=0;y<3;y++)for(var P=0;P<3;P++)this._matrix[y][P]=m}},{key:"get",value:function(m,y){return this._matrix[m][y]}},{key:"transpose",value:function(){var m=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=m,m=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=m,m=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=m,this}},{key:"matches",value:function(m){if(m.length!==9)throw new q("Should be length 9: "+m);for(var y=0;y<3;y++)for(var P=0;P<3;P++)if(!T.matches(this._matrix[y][P],m.charAt(3*y+P)))return!1;return!0}},{key:"add",value:function(m){for(var y=0;y<3;y++)for(var P=0;P<3;P++)this.setAtLeast(y,P,m.get(y,P))}},{key:"isDisjoint",value:function(){return this._matrix[Ie.INTERIOR][Ie.INTERIOR]===$t.FALSE&&this._matrix[Ie.INTERIOR][Ie.BOUNDARY]===$t.FALSE&&this._matrix[Ie.BOUNDARY][Ie.INTERIOR]===$t.FALSE&&this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]===$t.FALSE}},{key:"isCrosses",value:function(m,y){return m===$t.P&&y===$t.L||m===$t.P&&y===$t.A||m===$t.L&&y===$t.A?T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&T.isTrue(this._matrix[Ie.INTERIOR][Ie.EXTERIOR]):m===$t.L&&y===$t.P||m===$t.A&&y===$t.P||m===$t.A&&y===$t.L?T.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&T.isTrue(this._matrix[Ie.EXTERIOR][Ie.INTERIOR]):m===$t.L&&y===$t.L&&this._matrix[Ie.INTERIOR][Ie.INTERIOR]===0}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll($t.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var m=arguments[0];T.constructor_.call(this),this.set(m)}else if(arguments[0]instanceof T){var y=arguments[0];T.constructor_.call(this),this._matrix[Ie.INTERIOR][Ie.INTERIOR]=y._matrix[Ie.INTERIOR][Ie.INTERIOR],this._matrix[Ie.INTERIOR][Ie.BOUNDARY]=y._matrix[Ie.INTERIOR][Ie.BOUNDARY],this._matrix[Ie.INTERIOR][Ie.EXTERIOR]=y._matrix[Ie.INTERIOR][Ie.EXTERIOR],this._matrix[Ie.BOUNDARY][Ie.INTERIOR]=y._matrix[Ie.BOUNDARY][Ie.INTERIOR],this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]=y._matrix[Ie.BOUNDARY][Ie.BOUNDARY],this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]=y._matrix[Ie.BOUNDARY][Ie.EXTERIOR],this._matrix[Ie.EXTERIOR][Ie.INTERIOR]=y._matrix[Ie.EXTERIOR][Ie.INTERIOR],this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]=y._matrix[Ie.EXTERIOR][Ie.BOUNDARY],this._matrix[Ie.EXTERIOR][Ie.EXTERIOR]=y._matrix[Ie.EXTERIOR][Ie.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var m=arguments[0],y=arguments[1];return y===$t.SYM_DONTCARE||y===$t.SYM_TRUE&&(m>=0||m===$t.TRUE)||y===$t.SYM_FALSE&&m===$t.FALSE||y===$t.SYM_P&&m===$t.P||y===$t.SYM_L&&m===$t.L||y===$t.SYM_A&&m===$t.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var P=arguments[1];return new T(arguments[0]).matches(P)}}},{key:"isTrue",value:function(m){return m>=0||m===$t.TRUE}}])})(),lo=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(m){return m===null||m.length===0?null:(this.ensureCapacity(this._size+m.length),Ot.arraycopy(m,0,this._data,this._size,m.length),void(this._size+=m.length))}},{key:"ensureCapacity",value:function(m){if(m<=this._data.length)return null;var y=Math.max(m,2*this._data.length);this._data=kt.copyOf(this._data,y)}},{key:"toArray",value:function(){var m=new Array(this._size).fill(null);return Ot.arraycopy(this._data,0,m,0,this._size),m}},{key:"add",value:function(m){this.ensureCapacity(this._size+1),this._data[this._size]=m,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)T.constructor_.call(this,10);else if(arguments.length===1){var m=arguments[0];this._data=new Array(m).fill(null)}}}])})(),ml=(function(){function T(){i(this,T)}return a(T,[{key:"getChainStartIndices",value:function(m){var y=0,P=new lo(Math.trunc(m.length/2));P.add(y);do{var j=this.findChainEnd(m,y);P.add(j),y=j}while(y<m.length-1);return P.toArray()}},{key:"findChainEnd",value:function(m,y){for(var P=bn.quadrant(m[y],m[y+1]),j=y+1;j<m.length&&bn.quadrant(m[j-1],m[j])===P;)j++;return j-1}},{key:"OLDgetChainStartIndices",value:function(m){var y=0,P=new De;P.add(y);do{var j=this.findChainEnd(m,y);P.add(j),y=j}while(y<m.length-1);return T.toIntArray(P)}}],[{key:"toIntArray",value:function(m){for(var y=new Array(m.size()).fill(null),P=0;P<y.length;P++)y[P]=m.get(P).intValue();return y}}])})(),xo=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(T){var m=this.pts[this.startIndex[T]].x,y=this.pts[this.startIndex[T+1]].x;return m>y?m:y}},{key:"getMinX",value:function(T){var m=this.pts[this.startIndex[T]].x,y=this.pts[this.startIndex[T+1]].x;return m<y?m:y}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var T=arguments[0],m=arguments[1],y=arguments[2],P=arguments[3];this.computeIntersectsForChain(this.startIndex[T],this.startIndex[T+1],m,m.startIndex[y],m.startIndex[y+1],P)}else if(arguments.length===6){var j=arguments[0],re=arguments[1],ye=arguments[2],Ae=arguments[3],Ke=arguments[4],gt=arguments[5];if(re-j==1&&Ke-Ae==1)return gt.addIntersections(this.e,j,ye.e,Ae),null;if(!this.overlaps(j,re,ye,Ae,Ke))return null;var rr=Math.trunc((j+re)/2),fr=Math.trunc((Ae+Ke)/2);j<rr&&(Ae<fr&&this.computeIntersectsForChain(j,rr,ye,Ae,fr,gt),fr<Ke&&this.computeIntersectsForChain(j,rr,ye,fr,Ke,gt)),rr<re&&(Ae<fr&&this.computeIntersectsForChain(rr,re,ye,Ae,fr,gt),fr<Ke&&this.computeIntersectsForChain(rr,re,ye,fr,Ke,gt))}}},{key:"overlaps",value:function(T,m,y,P,j){return Ze.intersects(this.pts[T],this.pts[m],y.pts[P],y.pts[j])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(T,m){for(var y=0;y<this.startIndex.length-1;y++)for(var P=0;P<T.startIndex.length-1;P++)this.computeIntersectsForChain(y,T,P,m)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var T=arguments[0];this.e=T,this.pts=T.getCoordinates();var m=new ml;this.startIndex=m.getChainStartIndices(this.pts)}}])})(),Qs=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"getDepth",value:function(m,y){return this._depth[m][y]}},{key:"setDepth",value:function(m,y,P){this._depth[m][y]=P}},{key:"isNull",value:function(){if(arguments.length===0){for(var m=0;m<2;m++)for(var y=0;y<3;y++)if(this._depth[m][y]!==T.NULL_VALUE)return!1;return!0}if(arguments.length===1){var P=arguments[0];return this._depth[P][1]===T.NULL_VALUE}if(arguments.length===2){var j=arguments[0],re=arguments[1];return this._depth[j][re]===T.NULL_VALUE}}},{key:"normalize",value:function(){for(var m=0;m<2;m++)if(!this.isNull(m)){var y=this._depth[m][1];this._depth[m][2]<y&&(y=this._depth[m][2]),y<0&&(y=0);for(var P=1;P<3;P++){var j=0;this._depth[m][P]>y&&(j=1),this._depth[m][P]=j}}}},{key:"getDelta",value:function(m){return this._depth[m][at.RIGHT]-this._depth[m][at.LEFT]}},{key:"getLocation",value:function(m,y){return this._depth[m][y]<=0?Ie.EXTERIOR:Ie.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var m=arguments[0],y=0;y<2;y++)for(var P=1;P<3;P++){var j=m.getLocation(y,P);j!==Ie.EXTERIOR&&j!==Ie.INTERIOR||(this.isNull(y,P)?this._depth[y][P]=T.depthAtLocation(j):this._depth[y][P]+=T.depthAtLocation(j))}else if(arguments.length===3){var re=arguments[0],ye=arguments[1];arguments[2]===Ie.INTERIOR&&this._depth[re][ye]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var m=0;m<2;m++)for(var y=0;y<3;y++)this._depth[m][y]=T.NULL_VALUE}},{key:"depthAtLocation",value:function(m){return m===Ie.EXTERIOR?0:m===Ie.INTERIOR?1:T.NULL_VALUE}}])})();Qs.NULL_VALUE=-1;var ga=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var y=new Array(2).fill(null);return y[0]=this.pts[0],y[1]=this.pts[1],new m(y,Rn.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(y){this._isIsolated=y}},{key:"setName",value:function(y){this._name=y}},{key:"equals",value:function(y){if(!(y instanceof m))return!1;var P=y;if(this.pts.length!==P.pts.length)return!1;for(var j=!0,re=!0,ye=this.pts.length,Ae=0;Ae<this.pts.length;Ae++)if(this.pts[Ae].equals2D(P.pts[Ae])||(j=!1),this.pts[Ae].equals2D(P.pts[--ye])||(re=!1),!j&&!re)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var y=arguments[0];return this.pts[y]}}},{key:"print",value:function(y){y.print("edge "+this._name+": "),y.print("LINESTRING (");for(var P=0;P<this.pts.length;P++)P>0&&y.print(","),y.print(this.pts[P].x+" "+this.pts[P].y);y.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(y){m.updateIM(this._label,y)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(y){y.print("edge "+this._name+": ");for(var P=this.pts.length-1;P>=0;P--)y.print(this.pts[P]+" ");y.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new xo(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Ze;for(var y=0;y<this.pts.length;y++)this._env.expandToInclude(this.pts[y])}return this._env}},{key:"addIntersection",value:function(y,P,j,re){var ye=new Oe(y.getIntersection(re)),Ae=P,Ke=y.getEdgeDistance(j,re),gt=Ae+1;if(gt<this.pts.length){var rr=this.pts[gt];ye.equals2D(rr)&&(Ae=gt,Ke=0)}this.eiList.add(ye,Ae,Ke)}},{key:"toString",value:function(){var y=new Di;y.append("edge "+this._name+": "),y.append("LINESTRING (");for(var P=0;P<this.pts.length;P++)P>0&&y.append(","),y.append(this.pts[P].x+" "+this.pts[P].y);return y.append(")  "+this._label+" "+this._depthDelta),y.toString()}},{key:"isPointwiseEqual",value:function(y){if(this.pts.length!==y.pts.length)return!1;for(var P=0;P<this.pts.length;P++)if(!this.pts[P].equals2D(y.pts[P]))return!1;return!0}},{key:"setDepthDelta",value:function(y){this._depthDelta=y}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(y,P,j){for(var re=0;re<y.getIntersectionNum();re++)this.addIntersection(y,P,j,re)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Xa(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Qs,this._depthDelta=0,arguments.length===1){var y=arguments[0];m.constructor_.call(this,y,null)}else if(arguments.length===2){var P=arguments[0],j=arguments[1];this.pts=P,this._label=j}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Kl&&arguments[0]instanceof Rn))return S(m,"updateIM",this).apply(this,arguments);var y=arguments[0],P=arguments[1];P.setAtLeastIfValid(y.getLocation(0,at.ON),y.getLocation(1,at.ON),1),y.isArea()&&(P.setAtLeastIfValid(y.getLocation(0,at.LEFT),y.getLocation(1,at.LEFT),2),P.setAtLeastIfValid(y.getLocation(0,at.RIGHT),y.getLocation(1,at.RIGHT),2))}}])})(ti),Rs=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"setWorkingPrecisionModel",value:function(m){this._workingPrecisionModel=m}},{key:"insertUniqueEdge",value:function(m){var y=this._edgeList.findEqualEdge(m);if(y!==null){var P=y.getLabel(),j=m.getLabel();y.isPointwiseEqual(m)||(j=new Rn(m.getLabel())).flip(),P.merge(j);var re=T.depthDelta(j),ye=y.getDepthDelta()+re;y.setDepthDelta(ye)}else this._edgeList.add(m),m.setDepthDelta(T.depthDelta(m.getLabel()))}},{key:"buildSubgraphs",value:function(m,y){for(var P=new De,j=m.iterator();j.hasNext();){var re=j.next(),ye=re.getRightmostCoordinate(),Ae=new is(P).getDepth(ye);re.computeDepth(Ae),re.findResultEdges(),P.add(re),y.add(re.getDirectedEdges(),re.getNodes())}}},{key:"createSubgraphs",value:function(m){for(var y=new De,P=m.getNodes().iterator();P.hasNext();){var j=P.next();if(!j.isVisited()){var re=new mt;re.create(j),y.add(re)}}return Wa.sort(y,Wa.reverseOrder()),y}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(m){if(this._workingNoder!==null)return this._workingNoder;var y=new ks,P=new nn;return P.setPrecisionModel(m),y.setSegmentIntersector(new pl(P)),y}},{key:"buffer",value:function(m,y){var P=this._workingPrecisionModel;P===null&&(P=m.getPrecisionModel()),this._geomFact=m.getFactory();var j=new kl(P,this._bufParams),re=new dl(m,y,j).getCurves();if(re.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(re,P),this._graph=new Ha(new po),this._graph.addEdges(this._edgeList.getEdges());var ye=this.createSubgraphs(this._graph),Ae=new Il(this._geomFact);this.buildSubgraphs(ye,Ae);var Ke=Ae.getPolygons();return Ke.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Ke)}},{key:"computeNodedEdges",value:function(m,y){var P=this.getNoder(y);P.computeNodes(m);for(var j=P.getNodedSubstrings().iterator();j.hasNext();){var re=j.next(),ye=re.getCoordinates();if(ye.length!==2||!ye[0].equals2D(ye[1])){var Ae=re.getData(),Ke=new ga(re.getCoordinates(),new Rn(Ae));this.insertUniqueEdge(Ke)}}}},{key:"setNoder",value:function(m){this._workingNoder=m}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Lu;var m=arguments[0];this._bufParams=m}},{key:"depthDelta",value:function(m){var y=m.getLocation(0,at.LEFT),P=m.getLocation(0,at.RIGHT);return y===Ie.INTERIOR&&P===Ie.EXTERIOR?1:y===Ie.EXTERIOR&&P===Ie.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(m){for(var y=new ho,P=new De;m.hasNext();){var j=m.next(),re=y.createLineString(j.getCoordinates());P.add(re)}return y.buildGeometry(P)}}])})(),Ds=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"rescale",value:function(){if(br(arguments[0],Mt))for(var m=arguments[0].iterator();m.hasNext();){var y=m.next();this.rescale(y.getCoordinates())}else if(arguments[0]instanceof Array){for(var P=arguments[0],j=0;j<P.length;j++)P[j].x=P[j].x/this._scaleFactor+this._offsetX,P[j].y=P[j].y/this._scaleFactor+this._offsetY;P.length===2&&P[0].equals2D(P[1])&&Ot.out.println(P)}}},{key:"scale",value:function(){if(br(arguments[0],Mt)){for(var m=arguments[0],y=new De(m.size()),P=m.iterator();P.hasNext();){var j=P.next();y.add(new Ri(this.scale(j.getCoordinates()),j.getData()))}return y}if(arguments[0]instanceof Array){for(var re=arguments[0],ye=new Array(re.length).fill(null),Ae=0;Ae<re.length;Ae++)ye[Ae]=new Oe(Math.round((re[Ae].x-this._offsetX)*this._scaleFactor),Math.round((re[Ae].y-this._offsetY)*this._scaleFactor),re[Ae].getZ());return wn.removeRepeatedPoints(ye)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var m=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(m),m}},{key:"computeNodes",value:function(m){var y=m;this._isScaled&&(y=this.scale(m)),this._noder.computeNodes(y)}},{key:"interfaces_",get:function(){return[sa]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var m=arguments[0],y=arguments[1];T.constructor_.call(this,m,y,0,0)}else if(arguments.length===4){var P=arguments[0],j=arguments[1];this._noder=P,this._scaleFactor=j,this._isScaled=!this.isIntegerPrecision()}}}])})(),qo=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();){var y=m.next().getCoordinates();this.checkEndPtVertexIntersections(y[0],this._segStrings),this.checkEndPtVertexIntersections(y[y.length-1],this._segStrings)}else if(arguments.length===2){for(var P=arguments[0],j=arguments[1].iterator();j.hasNext();)for(var re=j.next().getCoordinates(),ye=1;ye<re.length-1;ye++)if(re[ye].equals(P))throw new ce("found endpt/interior pt intersection at index "+ye+" :pt "+P)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();)for(var y=m.next(),P=this._segStrings.iterator();P.hasNext();){var j=P.next();this.checkInteriorIntersections(y,j)}else if(arguments.length===2)for(var re=arguments[0],ye=arguments[1],Ae=re.getCoordinates(),Ke=ye.getCoordinates(),gt=0;gt<Ae.length-1;gt++)for(var rr=0;rr<Ke.length-1;rr++)this.checkInteriorIntersections(re,gt,ye,rr);else if(arguments.length===4){var fr=arguments[0],zr=arguments[1],hn=arguments[2],Mn=arguments[3];if(fr===hn&&zr===Mn)return null;var $n=fr.getCoordinates()[zr],An=fr.getCoordinates()[zr+1],In=hn.getCoordinates()[Mn],ki=hn.getCoordinates()[Mn+1];if(this._li.computeIntersection($n,An,In,ki),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,$n,An)||this.hasInteriorIntersection(this._li,In,ki)))throw new ce("found non-noded intersection at "+$n+"-"+An+" and "+In+"-"+ki)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();){var y=m.next();this.checkCollapses(y)}else if(arguments.length===1)for(var P=arguments[0].getCoordinates(),j=0;j<P.length-2;j++)this.checkCollapse(P[j],P[j+1],P[j+2])}},{key:"hasInteriorIntersection",value:function(m,y,P){for(var j=0;j<m.getIntersectionNum();j++){var re=m.getIntersection(j);if(!re.equals(y)&&!re.equals(P))return!0}return!1}},{key:"checkCollapse",value:function(m,y,P){if(m.equals(P))throw new ce("found non-noded collapse at "+T.fact.createLineString([m,y,P]))}}],[{key:"constructor_",value:function(){this._li=new nn,this._segStrings=null;var m=arguments[0];this._segStrings=m}}])})();qo.fact=new ho;var Al=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"intersectsScaled",value:function(m,y){var P=Math.min(m.x,y.x),j=Math.max(m.x,y.x),re=Math.min(m.y,y.y),ye=Math.max(m.y,y.y),Ae=this._maxx<P||this._minx>j||this._maxy<re||this._miny>ye;if(Ae)return!1;var Ke=this.intersectsToleranceSquare(m,y);return be.isTrue(!(Ae&&Ke),"Found bad envelope test"),Ke}},{key:"initCorners",value:function(m){var y=.5;this._minx=m.x-y,this._maxx=m.x+y,this._miny=m.y-y,this._maxy=m.y+y,this._corner[0]=new Oe(this._maxx,this._maxy),this._corner[1]=new Oe(this._minx,this._maxy),this._corner[2]=new Oe(this._minx,this._miny),this._corner[3]=new Oe(this._maxx,this._miny)}},{key:"intersects",value:function(m,y){return this._scaleFactor===1?this.intersectsScaled(m,y):(this.copyScaled(m,this._p0Scaled),this.copyScaled(y,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(m){return Math.round(m*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(m,y){y.x=this.scale(m.x),y.y=this.scale(m.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var m=T.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ze(this._originalPt.x-m,this._originalPt.x+m,this._originalPt.y-m,this._originalPt.y+m)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(m,y){return this._li.computeIntersection(m,y,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,y,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,y,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,y,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(m,y){var P=!1,j=!1;return this._li.computeIntersection(m,y,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(m,y,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(P=!0),this._li.computeIntersection(m,y,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(j=!0),this._li.computeIntersection(m,y,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!P||!j)||!!m.equals(this._pt)||!!y.equals(this._pt))))}},{key:"addSnappedNode",value:function(m,y){var P=m.getCoordinate(y),j=m.getCoordinate(y+1);return!!this.intersects(P,j)&&(m.addIntersection(this.getCoordinate(),y),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var m=arguments[0],y=arguments[1],P=arguments[2];if(this._originalPt=m,this._pt=m,this._scaleFactor=y,this._li=P,y<=0)throw new q("Scale factor must be non-zero");y!==1&&(this._pt=new Oe(this.scale(m.x),this.scale(m.y)),this._p0Scaled=new Oe,this._p1Scaled=new Oe),this.initCorners(this._pt)}}])})();Al.SAFE_ENV_EXPANSION_FACTOR=.75;var gu=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var T=arguments[1];arguments[0].getLineSegment(T,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new pi}}])})(),Ns=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"snap",value:function(){if(arguments.length===1){var T=arguments[0];return this.snap(T,null,-1)}if(arguments.length===3){var m=arguments[0],y=arguments[1],P=arguments[2],j=m.getSafeEnvelope(),re=new Ml(m,y,P);return this._index.query(j,new((function(){return a((function ye(){i(this,ye)}),[{key:"interfaces_",get:function(){return[se]}},{key:"visitItem",value:function(ye){ye.select(j,re)}}])})())),re.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var T=arguments[0];this._index=T}}])})(),Ml=(function(T){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,T),a(m,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof ma))return S(m,"select",this,1).apply(this,arguments);var y=arguments[1],P=arguments[0].getContext();if(this._parentEdge===P&&(y===this._hotPixelVertexIndex||y+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(P,y)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var y=arguments[0],P=arguments[1],j=arguments[2];this._hotPixel=y,this._parentEdge=P,this._hotPixelVertexIndex=j}}])})(gu);Ns.HotPixelSnapAction=Ml;var Jl=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"processIntersections",value:function(T,m,y,P){if(T===y&&m===P)return null;var j=T.getCoordinates()[m],re=T.getCoordinates()[m+1],ye=y.getCoordinates()[P],Ae=y.getCoordinates()[P+1];if(this._li.computeIntersection(j,re,ye,Ae),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Ke=0;Ke<this._li.getIntersectionNum();Ke++)this._interiorIntersections.add(this._li.getIntersection(Ke));T.addIntersections(this._li,m,0),y.addIntersections(this._li,P,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[hl]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var T=arguments[0];this._li=T,this._interiorIntersections=new De}}])})(),er=(function(){return a((function T(){i(this,T),T.constructor_.apply(this,arguments)}),[{key:"checkCorrectness",value:function(T){var m=Ri.getNodedSubstrings(T),y=new qo(m);try{y.checkValid()}catch(P){if(!(P instanceof D))throw P;P.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Ri.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(T,m){var y=this.findInteriorIntersections(T,m);this.computeIntersectionSnaps(y),this.computeVertexSnaps(T)}},{key:"findInteriorIntersections",value:function(T,m){var y=new Jl(m);return this._noder.setSegmentIntersector(y),this._noder.computeNodes(T),y.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(br(arguments[0],Mt))for(var T=arguments[0].iterator();T.hasNext();){var m=T.next();this.computeVertexSnaps(m)}else if(arguments[0]instanceof Ri)for(var y=arguments[0],P=y.getCoordinates(),j=0;j<P.length;j++){var re=new Al(P[j],this._scaleFactor,this._li);this._pointSnapper.snap(re,y,j)&&y.addIntersection(P[j],j)}}},{key:"computeNodes",value:function(T){this._nodedSegStrings=T,this._noder=new ks,this._pointSnapper=new Ns(this._noder.getIndex()),this.snapRound(T,this._li)}},{key:"computeIntersectionSnaps",value:function(T){for(var m=T.iterator();m.hasNext();){var y=m.next(),P=new Al(y,this._scaleFactor,this._li);this._pointSnapper.snap(P)}}},{key:"interfaces_",get:function(){return[sa]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var T=arguments[0];this._pm=T,this._li=new nn,this._li.setPrecisionModel(T),this._scaleFactor=T.getScale()}}])})(),sr=(function(){function T(){i(this,T),T.constructor_.apply(this,arguments)}return a(T,[{key:"bufferFixedPrecision",value:function(m){var y=new Ds(new er(new fi(1)),m.getScale()),P=new Rs(this._bufParams);P.setWorkingPrecisionModel(m),P.setNoder(y),this._resultGeometry=P.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var m=T.MAX_PRECISION_DIGITS;m>=0;m--){try{this.bufferReducedPrecision(m)}catch(re){if(!(re instanceof Re))throw re;this._saveException=re}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var y=arguments[0],P=T.precisionScaleFactor(this._argGeom,this._distance,y),j=new fi(P);this.bufferFixedPrecision(j)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var m=this._argGeom.getFactory().getPrecisionModel();m.getType()===fi.FIXED?this.bufferFixedPrecision(m):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(m){this._bufParams.setQuadrantSegments(m)}},{key:"bufferOriginalPrecision",value:function(){try{var m=new Rs(this._bufParams);this._resultGeometry=m.buffer(this._argGeom,this._distance)}catch(y){if(!(y instanceof ce))throw y;this._saveException=y}}},{key:"getResultGeometry",value:function(m){return this._distance=m,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(m){this._bufParams.setEndCapStyle(m)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new F,this._resultGeometry=null,this._saveException=null,arguments.length===1){var m=arguments[0];this._argGeom=m}else if(arguments.length===2){var y=arguments[0],P=arguments[1];this._argGeom=y,this._bufParams=P}}},{key:"bufferOp",value:function(){if(arguments.length===2){var m=arguments[1];return new T(arguments[0]).getResultGeometry(m)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Qe&&typeof arguments[1]=="number"){var y=arguments[1],P=arguments[2],j=new T(arguments[0]);return j.setQuadrantSegments(P),j.getResultGeometry(y)}if(arguments[2]instanceof F&&arguments[0]instanceof Qe&&typeof arguments[1]=="number"){var re=arguments[1];return new T(arguments[0],arguments[2]).getResultGeometry(re)}}else if(arguments.length===4){var ye=arguments[1],Ae=arguments[2],Ke=arguments[3],gt=new T(arguments[0]);return gt.setQuadrantSegments(Ae),gt.setEndCapStyle(Ke),gt.getResultGeometry(ye)}}},{key:"precisionScaleFactor",value:function(m,y,P){var j=m.getEnvelopeInternal(),re=Tt.max(Math.abs(j.getMaxX()),Math.abs(j.getMaxY()),Math.abs(j.getMinX()),Math.abs(j.getMinY()))+2*(y>0?y:0),ye=P-Math.trunc(Math.log(re)/Math.log(10)+1);return Math.pow(10,ye)}}])})();sr.CAP_ROUND=F.CAP_ROUND,sr.CAP_BUTT=F.CAP_FLAT,sr.CAP_FLAT=F.CAP_FLAT,sr.CAP_SQUARE=F.CAP_SQUARE,sr.MAX_PRECISION_DIGITS=12;var ln=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],yn=(function(){return a((function T(m){i(this,T),this.geometryFactory=m||new ho}),[{key:"read",value:function(T){var m,y=(m=typeof T=="string"?JSON.parse(T):T).type;if(!ui[y])throw new Error("Unknown GeoJSON type: "+m.type);return ln.indexOf(y)!==-1?ui[y].call(this,m.coordinates):y==="GeometryCollection"?ui[y].call(this,m.geometries):ui[y].call(this,m)}},{key:"write",value:function(T){var m=T.getGeometryType();if(!Sn[m])throw new Error("Geometry is not supported");return Sn[m].call(this,T)}}])})(),ui={Feature:function(T){var m={};for(var y in T)m[y]=T[y];if(T.geometry){var P=T.geometry.type;if(!ui[P])throw new Error("Unknown GeoJSON type: "+T.type);m.geometry=this.read(T.geometry)}return T.bbox&&(m.bbox=ui.bbox.call(this,T.bbox)),m},FeatureCollection:function(T){var m={};if(T.features){m.features=[];for(var y=0;y<T.features.length;++y)m.features.push(this.read(T.features[y]))}return T.bbox&&(m.bbox=this.parse.bbox.call(this,T.bbox)),m},coordinates:function(T){for(var m=[],y=0;y<T.length;++y){var P=T[y];m.push(o(Oe,I(P)))}return m},bbox:function(T){return this.geometryFactory.createLinearRing([new Oe(T[0],T[1]),new Oe(T[2],T[1]),new Oe(T[2],T[3]),new Oe(T[0],T[3]),new Oe(T[0],T[1])])},Point:function(T){var m=o(Oe,I(T));return this.geometryFactory.createPoint(m)},MultiPoint:function(T){for(var m=[],y=0;y<T.length;++y)m.push(ui.Point.call(this,T[y]));return this.geometryFactory.createMultiPoint(m)},LineString:function(T){var m=ui.coordinates.call(this,T);return this.geometryFactory.createLineString(m)},MultiLineString:function(T){for(var m=[],y=0;y<T.length;++y)m.push(ui.LineString.call(this,T[y]));return this.geometryFactory.createMultiLineString(m)},Polygon:function(T){for(var m=ui.coordinates.call(this,T[0]),y=this.geometryFactory.createLinearRing(m),P=[],j=1;j<T.length;++j){var re=T[j],ye=ui.coordinates.call(this,re),Ae=this.geometryFactory.createLinearRing(ye);P.push(Ae)}return this.geometryFactory.createPolygon(y,P)},MultiPolygon:function(T){for(var m=[],y=0;y<T.length;++y){var P=T[y];m.push(ui.Polygon.call(this,P))}return this.geometryFactory.createMultiPolygon(m)},GeometryCollection:function(T){for(var m=[],y=0;y<T.length;++y){var P=T[y];m.push(this.read(P))}return this.geometryFactory.createGeometryCollection(m)}},Sn={coordinate:function(T){var m=[T.x,T.y];return T.z&&m.push(T.z),T.m&&m.push(T.m),m},Point:function(T){return{type:"Point",coordinates:Sn.coordinate.call(this,T.getCoordinate())}},MultiPoint:function(T){for(var m=[],y=0;y<T._geometries.length;++y){var P=T._geometries[y],j=Sn.Point.call(this,P);m.push(j.coordinates)}return{type:"MultiPoint",coordinates:m}},LineString:function(T){for(var m=[],y=T.getCoordinates(),P=0;P<y.length;++P){var j=y[P];m.push(Sn.coordinate.call(this,j))}return{type:"LineString",coordinates:m}},MultiLineString:function(T){for(var m=[],y=0;y<T._geometries.length;++y){var P=T._geometries[y],j=Sn.LineString.call(this,P);m.push(j.coordinates)}return{type:"MultiLineString",coordinates:m}},Polygon:function(T){var m=[],y=Sn.LineString.call(this,T._shell);m.push(y.coordinates);for(var P=0;P<T._holes.length;++P){var j=T._holes[P],re=Sn.LineString.call(this,j);m.push(re.coordinates)}return{type:"Polygon",coordinates:m}},MultiPolygon:function(T){for(var m=[],y=0;y<T._geometries.length;++y){var P=T._geometries[y],j=Sn.Polygon.call(this,P);m.push(j.coordinates)}return{type:"MultiPolygon",coordinates:m}},GeometryCollection:function(T){for(var m=[],y=0;y<T._geometries.length;++y){var P=T._geometries[y],j=P.getGeometryType();m.push(Sn[j].call(this,P))}return{type:"GeometryCollection",geometries:m}}};return{BufferOp:sr,GeoJSONReader:(function(){return a((function T(m){i(this,T),this.parser=new yn(m||new ho)}),[{key:"read",value:function(T){return this.parser.read(T)}}])})(),GeoJSONWriter:(function(){return a((function T(){i(this,T),this.parser=new yn(this.geometryFactory)}),[{key:"write",value:function(T){return this.parser.write(T)}}])})()}}))})(y_)),y_.exports}var Afe=kfe();const Mfe=tf(Afe);function Xh(){return new ix}function ix(){this.reset()}ix.prototype={constructor:ix,reset:function(){this.s=this.t=0},add:function(e){GN(Fb,e,this.t),GN(this,Fb.s,this.s),this.s?this.t+=Fb.t:this.s=Fb.t},valueOf:function(){return this.s}};var Fb=new ix;function GN(e,t,r){var n=e.s=t+r,i=n-t,o=n-i;e.t=t-o+(r-i)}var bo=1e-6,_a=Math.PI,Ud=_a/2,HN=_a/4,Qd=_a*2,_h=180/_a,Tc=_a/180,Cl=Math.abs,Lfe=Math.atan,uy=Math.atan2,Ko=Math.cos,Jo=Math.sin,Ey=Math.sqrt;function _$(e){return e>1?0:e<-1?_a:Math.acos(e)}function Yp(e){return e>1?Ud:e<-1?-Ud:Math.asin(e)}function Bv(){}function ax(e,t){e&&XN.hasOwnProperty(e.type)&&XN[e.type](e,t)}var WN={Feature:function(e,t){ax(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)ax(r[n].geometry,t)}},XN={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){YT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)YT(r[n],t,0)},Polygon:function(e,t){YN(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)YN(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)ax(r[n],t)}};function YT(e,t,r){var n=-1,i=e.length-r,o;for(t.lineStart();++n<i;)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function YN(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)YT(e[r],t,1);t.polygonEnd()}function Rfe(e,t){e&&WN.hasOwnProperty(e.type)?WN[e.type](e,t):ax(e,t)}Xh();Xh();function ZT(e){return[uy(e[1],e[0]),Yp(e[2])]}function cy(e){var t=e[0],r=e[1],n=Ko(r);return[n*Ko(t),n*Jo(t),Jo(r)]}function Bb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ox(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function f5(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function zb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function KT(e){var t=Ey(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Xh();function x$(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function JT(e,t){return[e>_a?e-Qd:e<-_a?e+Qd:e,t]}JT.invert=JT;function Dfe(e,t,r){return(e%=Qd)?t||r?x$(KN(e),JN(t,r)):KN(e):t||r?JN(t,r):JT}function ZN(e){return function(t,r){return t+=e,[t>_a?t-Qd:t<-_a?t+Qd:t,r]}}function KN(e){var t=ZN(e);return t.invert=ZN(-e),t}function JN(e,t){var r=Ko(e),n=Jo(e),i=Ko(t),o=Jo(t);function l(a,c){var h=Ko(c),g=Ko(a)*h,v=Jo(a)*h,x=Jo(c),b=x*r+g*n;return[uy(v*i-b*o,g*r-x*n),Yp(b*i+v*o)]}return l.invert=function(a,c){var h=Ko(c),g=Ko(a)*h,v=Jo(a)*h,x=Jo(c),b=x*i-v*o;return[uy(v*i+x*o,g*r+b*n),Yp(b*r-g*n)]},l}function Nfe(e,t,r,n,i,o){if(r){var l=Ko(t),a=Jo(t),c=n*r;i==null?(i=t+n*Qd,o=t-c/2):(i=QN(l,i),o=QN(l,o),(n>0?i<o:i>o)&&(i+=n*Qd));for(var h,g=i;n>0?g>o:g<o;g-=c)h=ZT([l,-a*Ko(g),-a*Jo(g)]),e.point(h[0],h[1])}}function QN(e,t){t=cy(t),t[0]-=e,KT(t);var r=_$(-t[1]);return((-t[2]<0?-r:r)+Qd-bo)%Qd}function w$(){var e=[],t;return{point:function(r,n){t.push([r,n])},lineStart:function(){e.push(t=[])},lineEnd:Bv,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Ofe(e,t,r,n,i,o){var l=e[0],a=e[1],c=t[0],h=t[1],g=0,v=1,x=c-l,b=h-a,S;if(S=r-l,!(!x&&S>0)){if(S/=x,x<0){if(S<g)return;S<v&&(v=S)}else if(x>0){if(S>v)return;S>g&&(g=S)}if(S=i-l,!(!x&&S<0)){if(S/=x,x<0){if(S>v)return;S>g&&(g=S)}else if(x>0){if(S<g)return;S<v&&(v=S)}if(S=n-a,!(!b&&S>0)){if(S/=b,b<0){if(S<g)return;S<v&&(v=S)}else if(b>0){if(S>v)return;S>g&&(g=S)}if(S=o-a,!(!b&&S<0)){if(S/=b,b<0){if(S>v)return;S>g&&(g=S)}else if(b>0){if(S<g)return;S<v&&(v=S)}return g>0&&(e[0]=l+g*x,e[1]=a+g*b),v<1&&(t[0]=l+v*x,t[1]=a+v*b),!0}}}}}function v_(e,t){return Cl(e[0]-t[0])<bo&&Cl(e[1]-t[1])<bo}function jb(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function S$(e,t,r,n,i){var o=[],l=[],a,c;if(e.forEach(function(S){if(!((I=S.length-1)<=0)){var I,k=S[0],M=S[I],O;if(v_(k,M)){for(i.lineStart(),a=0;a<I;++a)i.point((k=S[a])[0],k[1]);i.lineEnd();return}o.push(O=new jb(k,S,null,!0)),l.push(O.o=new jb(k,null,O,!1)),o.push(O=new jb(M,S,null,!1)),l.push(O.o=new jb(M,null,O,!0))}}),!!o.length){for(l.sort(t),eO(o),eO(l),a=0,c=l.length;a<c;++a)l[a].e=r=!r;for(var h=o[0],g,v;;){for(var x=h,b=!0;x.v;)if((x=x.n)===h)return;g=x.z,i.lineStart();do{if(x.v=x.o.v=!0,x.e){if(b)for(a=0,c=g.length;a<c;++a)i.point((v=g[a])[0],v[1]);else n(x.x,x.n.x,1,i);x=x.n}else{if(b)for(g=x.p.z,a=g.length-1;a>=0;--a)i.point((v=g[a])[0],v[1]);else n(x.x,x.p.x,-1,i);x=x.p}x=x.o,g=x.z,b=!b}while(!x.v);i.lineEnd()}}}function eO(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function C$(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ffe(e){return e.length===1&&(e=Bfe(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)<0?n=o+1:i=o}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)>0?i=o:n=o+1}return n}}}function Bfe(e){return function(t,r){return C$(e(t),r)}}Ffe(C$);function E$(e){for(var t=e.length,r,n=-1,i=0,o,l;++n<t;)i+=e[n].length;for(o=new Array(i);--t>=0;)for(l=e[t],r=l.length;--r>=0;)o[--i]=l[r];return o}var zv=1e9,qb=-zv;function zfe(e,t,r,n){function i(h,g){return e<=h&&h<=r&&t<=g&&g<=n}function o(h,g,v,x){var b=0,S=0;if(h==null||(b=l(h,v))!==(S=l(g,v))||c(h,g)<0^v>0)do x.point(b===0||b===3?e:r,b>1?n:t);while((b=(b+v+4)%4)!==S);else x.point(g[0],g[1])}function l(h,g){return Cl(h[0]-e)<bo?g>0?0:3:Cl(h[0]-r)<bo?g>0?2:1:Cl(h[1]-t)<bo?g>0?1:0:g>0?3:2}function a(h,g){return c(h.x,g.x)}function c(h,g){var v=l(h,1),x=l(g,1);return v!==x?v-x:v===0?g[1]-h[1]:v===1?h[0]-g[0]:v===2?h[1]-g[1]:g[0]-h[0]}return function(h){var g=h,v=w$(),x,b,S,I,k,M,O,F,D,q,z,U={point:H,lineStart:G,lineEnd:ne,polygonStart:ie,polygonEnd:ee};function H(le,fe){i(le,fe)&&g.point(le,fe)}function X(){for(var le=0,fe=0,ke=b.length;fe<ke;++fe)for(var me=b[fe],Se=1,we=me.length,Pe=me[0],ce,_e,be=Pe[0],Me=Pe[1];Se<we;++Se)ce=be,_e=Me,Pe=me[Se],be=Pe[0],Me=Pe[1],_e<=n?Me>n&&(be-ce)*(n-_e)>(Me-_e)*(e-ce)&&++le:Me<=n&&(be-ce)*(n-_e)<(Me-_e)*(e-ce)&&--le;return le}function ie(){g=v,x=[],b=[],z=!0}function ee(){var le=X(),fe=z&&le,ke=(x=E$(x)).length;(fe||ke)&&(h.polygonStart(),fe&&(h.lineStart(),o(null,null,1,h),h.lineEnd()),ke&&S$(x,a,le,o,h),h.polygonEnd()),g=h,x=b=S=null}function G(){U.point=ae,b&&b.push(S=[]),q=!0,D=!1,O=F=NaN}function ne(){x&&(ae(I,k),M&&D&&v.rejoin(),x.push(v.result())),U.point=H,D&&g.lineEnd()}function ae(le,fe){var ke=i(le,fe);if(b&&S.push([le,fe]),q)I=le,k=fe,M=ke,q=!1,ke&&(g.lineStart(),g.point(le,fe));else if(ke&&D)g.point(le,fe);else{var me=[O=Math.max(qb,Math.min(zv,O)),F=Math.max(qb,Math.min(zv,F))],Se=[le=Math.max(qb,Math.min(zv,le)),fe=Math.max(qb,Math.min(zv,fe))];Ofe(me,Se,e,t,r,n)?(D||(g.lineStart(),g.point(me[0],me[1])),g.point(Se[0],Se[1]),ke||g.lineEnd(),z=!1):ke&&(g.lineStart(),g.point(le,fe),z=!1)}O=le,F=fe,D=ke}return U}}var h5=Xh();function jfe(e,t){var r=t[0],n=t[1],i=[Jo(r),-Ko(r),0],o=0,l=0;h5.reset();for(var a=0,c=e.length;a<c;++a)if(g=(h=e[a]).length)for(var h,g,v=h[g-1],x=v[0],b=v[1]/2+HN,S=Jo(b),I=Ko(b),k=0;k<g;++k,x=O,S=D,I=q,v=M){var M=h[k],O=M[0],F=M[1]/2+HN,D=Jo(F),q=Ko(F),z=O-x,U=z>=0?1:-1,H=U*z,X=H>_a,ie=S*D;if(h5.add(uy(ie*U*Jo(H),I*q+ie*Ko(H))),o+=X?z+U*Qd:z,X^x>=r^O>=r){var ee=ox(cy(v),cy(M));KT(ee);var G=ox(i,ee);KT(G);var ne=(X^z>=0?-1:1)*Yp(G[2]);(n>ne||n===ne&&(ee[0]||ee[1]))&&(l+=X^z>=0?1:-1)}}return(o<-bo||o<bo&&h5<-bo)^l&1}Xh();function tO(e){return e}Xh();Xh();var dy=1/0,sx=dy,D0=-dy,lx=D0,rO={point:qfe,lineStart:Bv,lineEnd:Bv,polygonStart:Bv,polygonEnd:Bv,result:function(){var e=[[dy,sx],[D0,lx]];return D0=lx=-(sx=dy=1/0),e}};function qfe(e,t){e<dy&&(dy=e),e>D0&&(D0=e),t<sx&&(sx=t),t>lx&&(lx=t)}Xh();function T$(e,t,r,n){return function(i,o){var l=t(o),a=i.invert(n[0],n[1]),c=w$(),h=t(c),g=!1,v,x,b,S={point:I,lineStart:M,lineEnd:O,polygonStart:function(){S.point=F,S.lineStart=D,S.lineEnd=q,x=[],v=[]},polygonEnd:function(){S.point=I,S.lineStart=M,S.lineEnd=O,x=E$(x);var z=jfe(v,a);x.length?(g||(o.polygonStart(),g=!0),S$(x,Vfe,z,r,o)):z&&(g||(o.polygonStart(),g=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),x=v=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function I(z,U){var H=i(z,U);e(z=H[0],U=H[1])&&o.point(z,U)}function k(z,U){var H=i(z,U);l.point(H[0],H[1])}function M(){S.point=k,l.lineStart()}function O(){S.point=I,l.lineEnd()}function F(z,U){b.push([z,U]);var H=i(z,U);h.point(H[0],H[1])}function D(){h.lineStart(),b=[]}function q(){F(b[0][0],b[0][1]),h.lineEnd();var z=h.clean(),U=c.result(),H,X=U.length,ie,ee,G;if(b.pop(),v.push(b),b=null,!!X){if(z&1){if(ee=U[0],(ie=ee.length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),H=0;H<ie;++H)o.point((G=ee[H])[0],G[1]);o.lineEnd()}return}X>1&&z&2&&U.push(U.pop().concat(U.shift())),x.push(U.filter($fe))}}return S}}function $fe(e){return e.length>1}function Vfe(e,t){return((e=e.x)[0]<0?e[1]-Ud-bo:Ud-e[1])-((t=t.x)[0]<0?t[1]-Ud-bo:Ud-t[1])}const nO=T$(function(){return!0},Ufe,Hfe,[-_a,-Ud]);function Ufe(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,l){var a=o>0?_a:-_a,c=Cl(o-t);Cl(c-_a)<bo?(e.point(t,r=(r+l)/2>0?Ud:-Ud),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),i=0):n!==a&&c>=_a&&(Cl(t-n)<bo&&(t-=n*bo),Cl(o-a)<bo&&(o-=a*bo),r=Gfe(t,r,o,l),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=o,r=l),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function Gfe(e,t,r,n){var i,o,l=Jo(e-r);return Cl(l)>bo?Lfe((Jo(t)*(o=Ko(n))*Jo(r)-Jo(n)*(i=Ko(t))*Jo(e))/(i*o*l)):(t+n)/2}function Hfe(e,t,r,n){var i;if(e==null)i=r*Ud,n.point(-_a,i),n.point(0,i),n.point(_a,i),n.point(_a,0),n.point(_a,-i),n.point(0,-i),n.point(-_a,-i),n.point(-_a,0),n.point(-_a,i);else if(Cl(e[0]-t[0])>bo){var o=e[0]<t[0]?_a:-_a;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])}function Wfe(e,t){var r=Ko(e),n=r>0,i=Cl(r)>bo;function o(g,v,x,b){Nfe(b,e,t,x,g,v)}function l(g,v){return Ko(g)*Ko(v)>r}function a(g){var v,x,b,S,I;return{lineStart:function(){S=b=!1,I=1},point:function(k,M){var O=[k,M],F,D=l(k,M),q=n?D?0:h(k,M):D?h(k+(k<0?_a:-_a),M):0;if(!v&&(S=b=D)&&g.lineStart(),D!==b&&(F=c(v,O),(!F||v_(v,F)||v_(O,F))&&(O[0]+=bo,O[1]+=bo,D=l(O[0],O[1]))),D!==b)I=0,D?(g.lineStart(),F=c(O,v),g.point(F[0],F[1])):(F=c(v,O),g.point(F[0],F[1]),g.lineEnd()),v=F;else if(i&&v&&n^D){var z;!(q&x)&&(z=c(O,v,!0))&&(I=0,n?(g.lineStart(),g.point(z[0][0],z[0][1]),g.point(z[1][0],z[1][1]),g.lineEnd()):(g.point(z[1][0],z[1][1]),g.lineEnd(),g.lineStart(),g.point(z[0][0],z[0][1])))}D&&(!v||!v_(v,O))&&g.point(O[0],O[1]),v=O,b=D,x=q},lineEnd:function(){b&&g.lineEnd(),v=null},clean:function(){return I|(S&&b)<<1}}}function c(g,v,x){var b=cy(g),S=cy(v),I=[1,0,0],k=ox(b,S),M=Bb(k,k),O=k[0],F=M-O*O;if(!F)return!x&&g;var D=r*M/F,q=-r*O/F,z=ox(I,k),U=zb(I,D),H=zb(k,q);f5(U,H);var X=z,ie=Bb(U,X),ee=Bb(X,X),G=ie*ie-ee*(Bb(U,U)-1);if(!(G<0)){var ne=Ey(G),ae=zb(X,(-ie-ne)/ee);if(f5(ae,U),ae=ZT(ae),!x)return ae;var le=g[0],fe=v[0],ke=g[1],me=v[1],Se;fe<le&&(Se=le,le=fe,fe=Se);var we=fe-le,Pe=Cl(we-_a)<bo,ce=Pe||we<bo;if(!Pe&&me<ke&&(Se=ke,ke=me,me=Se),ce?Pe?ke+me>0^ae[1]<(Cl(ae[0]-le)<bo?ke:me):ke<=ae[1]&&ae[1]<=me:we>_a^(le<=ae[0]&&ae[0]<=fe)){var _e=zb(X,(-ie+ne)/ee);return f5(_e,U),[ae,ZT(_e)]}}}function h(g,v){var x=n?e:_a-e,b=0;return g<-x?b|=1:g>x&&(b|=2),v<-x?b|=4:v>x&&(b|=8),b}return T$(l,a,o,n?[0,-e]:[-_a,e-_a])}function P$(e){return function(t){var r=new QT;for(var n in e)r[n]=e[n];return r.stream=t,r}}function QT(){}QT.prototype={constructor:QT,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function I$(e,t,r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),Rfe(r,e.stream(rO));var l=rO.result(),a=Math.min(n/(l[1][0]-l[0][0]),i/(l[1][1]-l[0][1])),c=+t[0][0]+(n-a*(l[1][0]+l[0][0]))/2,h=+t[0][1]+(i-a*(l[1][1]+l[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([c,h])}function Xfe(e,t,r){return I$(e,[[0,0],t],r)}var iO=16,Yfe=Ko(30*Tc);function aO(e,t){return+t?Kfe(e,t):Zfe(e)}function Zfe(e){return P$({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function Kfe(e,t){function r(n,i,o,l,a,c,h,g,v,x,b,S,I,k){var M=h-n,O=g-i,F=M*M+O*O;if(F>4*t&&I--){var D=l+x,q=a+b,z=c+S,U=Ey(D*D+q*q+z*z),H=Yp(z/=U),X=Cl(Cl(z)-1)<bo||Cl(o-v)<bo?(o+v)/2:uy(q,D),ie=e(X,H),ee=ie[0],G=ie[1],ne=ee-n,ae=G-i,le=O*ne-M*ae;(le*le/F>t||Cl((M*ne+O*ae)/F-.5)>.3||l*x+a*b+c*S<Yfe)&&(r(n,i,o,l,a,c,ee,G,X,D/=U,q/=U,z,I,k),k.point(ee,G),r(ee,G,X,D,q,z,h,g,v,x,b,S,I,k))}}return function(n){var i,o,l,a,c,h,g,v,x,b,S,I,k={point:M,lineStart:O,lineEnd:D,polygonStart:function(){n.polygonStart(),k.lineStart=q},polygonEnd:function(){n.polygonEnd(),k.lineStart=O}};function M(H,X){H=e(H,X),n.point(H[0],H[1])}function O(){v=NaN,k.point=F,n.lineStart()}function F(H,X){var ie=cy([H,X]),ee=e(H,X);r(v,x,g,b,S,I,v=ee[0],x=ee[1],g=H,b=ie[0],S=ie[1],I=ie[2],iO,n),n.point(v,x)}function D(){k.point=M,n.lineEnd()}function q(){O(),k.point=z,k.lineEnd=U}function z(H,X){F(i=H,X),o=v,l=x,a=b,c=S,h=I,k.point=F}function U(){r(v,x,g,b,S,I,o,l,i,a,c,h,iO,n),k.lineEnd=D,D()}return k}}var Jfe=P$({point:function(e,t){this.stream.point(e*Tc,t*Tc)}});function Qfe(e){return ehe(function(){return e})()}function ehe(e){var t,r=150,n=480,i=250,o,l,a=0,c=0,h=0,g=0,v=0,x,b,S=null,I=nO,k=null,M,O,F,D=tO,q=.5,z=aO(ee,q),U,H;function X(ae){return ae=b(ae[0]*Tc,ae[1]*Tc),[ae[0]*r+o,l-ae[1]*r]}function ie(ae){return ae=b.invert((ae[0]-o)/r,(l-ae[1])/r),ae&&[ae[0]*_h,ae[1]*_h]}function ee(ae,le){return ae=t(ae,le),[ae[0]*r+o,l-ae[1]*r]}X.stream=function(ae){return U&&H===ae?U:U=Jfe(I(x,z(D(H=ae))))},X.clipAngle=function(ae){return arguments.length?(I=+ae?Wfe(S=ae*Tc,6*Tc):(S=null,nO),ne()):S*_h},X.clipExtent=function(ae){return arguments.length?(D=ae==null?(k=M=O=F=null,tO):zfe(k=+ae[0][0],M=+ae[0][1],O=+ae[1][0],F=+ae[1][1]),ne()):k==null?null:[[k,M],[O,F]]},X.scale=function(ae){return arguments.length?(r=+ae,G()):r},X.translate=function(ae){return arguments.length?(n=+ae[0],i=+ae[1],G()):[n,i]},X.center=function(ae){return arguments.length?(a=ae[0]%360*Tc,c=ae[1]%360*Tc,G()):[a*_h,c*_h]},X.rotate=function(ae){return arguments.length?(h=ae[0]%360*Tc,g=ae[1]%360*Tc,v=ae.length>2?ae[2]%360*Tc:0,G()):[h*_h,g*_h,v*_h]},X.precision=function(ae){return arguments.length?(z=aO(ee,q=ae*ae),ne()):Ey(q)},X.fitExtent=function(ae,le){return I$(X,ae,le)},X.fitSize=function(ae,le){return Xfe(X,ae,le)};function G(){b=x$(x=Dfe(h,g,v),t);var ae=t(a,c);return o=n-ae[0]*r,l=i+ae[1]*r,ne()}function ne(){return U=H=null,X}return function(){return t=e.apply(this,arguments),X.invert=t.invert&&ie,G()}}function k$(e){return function(t,r){var n=Ko(t),i=Ko(r),o=e(n*i);return[o*i*Jo(t),o*Jo(r)]}}function A$(e){return function(t,r){var n=Ey(t*t+r*r),i=e(n),o=Jo(i),l=Ko(i);return[uy(t*o,n*l),Yp(n&&r*o/n)]}}var the=k$(function(e){return Ey(2/(1+e))});the.invert=A$(function(e){return 2*Yp(e/2)});var M$=k$(function(e){return(e=_$(e))&&e/Jo(e)});M$.invert=A$(function(e){return e});function rhe(){return Qfe(M$).scale(79.4188).clipAngle(180-.001)}function oO(e,t){return[e,t]}oO.invert=oO;var{BufferOp:nhe,GeoJSONReader:ihe,GeoJSONWriter:ahe}=Mfe;function ohe(e,t,r){r=r||{};var n=r.units||"kilometers",i=r.steps||8;if(!e)throw new Error("geojson is required");if(typeof r!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return z2(e,function(l){var a=b_(l,t,n,i);a&&o.push(a)}),Hf(o);case"FeatureCollection":return FN(e,function(l){var a=b_(l,t,n,i);a&&FN(a,function(c){c&&o.push(c)})}),Hf(o)}return b_(e,t,n,i)}function b_(e,t,r,n){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var l=[];return z2(e,function(I){var k=b_(I,t,r,n);k&&l.push(k)}),Hf(l)}var a=she(o),c={type:o.type,coordinates:R$(o.coordinates,a)},h=new ihe,g=h.read(c),v=m$(qI(t,r),"meters"),x=nhe.bufferOp(g,v,n),b=new ahe;if(x=b.write(x),!L$(x.coordinates)){var S={type:x.type,coordinates:D$(x.coordinates,a)};return Xp(S,i)}}function L$(e){return Array.isArray(e[0])?L$(e[0]):isNaN(e[0])}function R$(e,t){return typeof e[0]!="object"?t(e):e.map(function(r){return R$(r,t)})}function D$(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(r){return D$(r,t)})}function she(e){var t=Pfe(e).geometry.coordinates,r=[-t[0],-t[1]];return rhe().rotate(r).scale(fu)}function sO(e,t={}){let r=0,n=0,i=0;return Cy(e,function(o){r+=o[0],n+=o[1],i++},!0),$c([r/i,n/i],t.properties)}var $b={exports:{}},__={exports:{}},lhe=__.exports,lO;function uhe(){return lO||(lO=1,(function(e,t){(function(r,n){e.exports=n()})(lhe,function(){function r(O,F,D,q,z){(function U(H,X,ie,ee,G){for(;ee>ie;){if(ee-ie>600){var ne=ee-ie+1,ae=X-ie+1,le=Math.log(ne),fe=.5*Math.exp(2*le/3),ke=.5*Math.sqrt(le*fe*(ne-fe)/ne)*(ae-ne/2<0?-1:1),me=Math.max(ie,Math.floor(X-ae*fe/ne+ke)),Se=Math.min(ee,Math.floor(X+(ne-ae)*fe/ne+ke));U(H,X,me,Se,G)}var we=H[X],Pe=ie,ce=ee;for(n(H,ie,X),G(H[ee],we)>0&&n(H,ie,ee);Pe<ce;){for(n(H,Pe,ce),Pe++,ce--;G(H[Pe],we)<0;)Pe++;for(;G(H[ce],we)>0;)ce--}G(H[ie],we)===0?n(H,ie,ce):n(H,++ce,ee),ce<=X&&(ie=ce+1),X<=ce&&(ee=ce-1)}})(O,F,D||0,q||O.length-1,z||i)}function n(O,F,D){var q=O[F];O[F]=O[D],O[D]=q}function i(O,F){return O<F?-1:O>F?1:0}var o=function(O){O===void 0&&(O=9),this._maxEntries=Math.max(4,O),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(O,F,D){if(!D)return F.indexOf(O);for(var q=0;q<F.length;q++)if(D(O,F[q]))return q;return-1}function a(O,F){c(O,0,O.children.length,F,O)}function c(O,F,D,q,z){z||(z=k(null)),z.minX=1/0,z.minY=1/0,z.maxX=-1/0,z.maxY=-1/0;for(var U=F;U<D;U++){var H=O.children[U];h(z,O.leaf?q(H):H)}return z}function h(O,F){return O.minX=Math.min(O.minX,F.minX),O.minY=Math.min(O.minY,F.minY),O.maxX=Math.max(O.maxX,F.maxX),O.maxY=Math.max(O.maxY,F.maxY),O}function g(O,F){return O.minX-F.minX}function v(O,F){return O.minY-F.minY}function x(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function b(O){return O.maxX-O.minX+(O.maxY-O.minY)}function S(O,F){return O.minX<=F.minX&&O.minY<=F.minY&&F.maxX<=O.maxX&&F.maxY<=O.maxY}function I(O,F){return F.minX<=O.maxX&&F.minY<=O.maxY&&F.maxX>=O.minX&&F.maxY>=O.minY}function k(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M(O,F,D,q,z){for(var U=[F,D];U.length;)if(!((D=U.pop())-(F=U.pop())<=q)){var H=F+Math.ceil((D-F)/q/2)*q;r(O,H,F,D,z),U.push(F,H,H,D)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(O){var F=this.data,D=[];if(!I(O,F))return D;for(var q=this.toBBox,z=[];F;){for(var U=0;U<F.children.length;U++){var H=F.children[U],X=F.leaf?q(H):H;I(O,X)&&(F.leaf?D.push(H):S(O,X)?this._all(H,D):z.push(H))}F=z.pop()}return D},o.prototype.collides=function(O){var F=this.data;if(!I(O,F))return!1;for(var D=[];F;){for(var q=0;q<F.children.length;q++){var z=F.children[q],U=F.leaf?this.toBBox(z):z;if(I(O,U)){if(F.leaf||S(O,U))return!0;D.push(z)}}F=D.pop()}return!1},o.prototype.load=function(O){if(!O||!O.length)return this;if(O.length<this._minEntries){for(var F=0;F<O.length;F++)this.insert(O[F]);return this}var D=this._build(O.slice(),0,O.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<D.height){var q=this.data;this.data=D,D=q}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this},o.prototype.insert=function(O){return O&&this._insert(O,this.data.height-1),this},o.prototype.clear=function(){return this.data=k([]),this},o.prototype.remove=function(O,F){if(!O)return this;for(var D,q,z,U=this.data,H=this.toBBox(O),X=[],ie=[];U||X.length;){if(U||(U=X.pop(),q=X[X.length-1],D=ie.pop(),z=!0),U.leaf){var ee=l(O,U.children,F);if(ee!==-1)return U.children.splice(ee,1),X.push(U),this._condense(X),this}z||U.leaf||!S(U,H)?q?(D++,U=q.children[D],z=!1):U=null:(X.push(U),ie.push(D),D=0,q=U,U=U.children[0])}return this},o.prototype.toBBox=function(O){return O},o.prototype.compareMinX=function(O,F){return O.minX-F.minX},o.prototype.compareMinY=function(O,F){return O.minY-F.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(O){return this.data=O,this},o.prototype._all=function(O,F){for(var D=[];O;)O.leaf?F.push.apply(F,O.children):D.push.apply(D,O.children),O=D.pop();return F},o.prototype._build=function(O,F,D,q){var z,U=D-F+1,H=this._maxEntries;if(U<=H)return a(z=k(O.slice(F,D+1)),this.toBBox),z;q||(q=Math.ceil(Math.log(U)/Math.log(H)),H=Math.ceil(U/Math.pow(H,q-1))),(z=k([])).leaf=!1,z.height=q;var X=Math.ceil(U/H),ie=X*Math.ceil(Math.sqrt(H));M(O,F,D,ie,this.compareMinX);for(var ee=F;ee<=D;ee+=ie){var G=Math.min(ee+ie-1,D);M(O,ee,G,X,this.compareMinY);for(var ne=ee;ne<=G;ne+=X){var ae=Math.min(ne+X-1,G);z.children.push(this._build(O,ne,ae,q-1))}}return a(z,this.toBBox),z},o.prototype._chooseSubtree=function(O,F,D,q){for(;q.push(F),!F.leaf&&q.length-1!==D;){for(var z=1/0,U=1/0,H=void 0,X=0;X<F.children.length;X++){var ie=F.children[X],ee=x(ie),G=(ne=O,ae=ie,(Math.max(ae.maxX,ne.maxX)-Math.min(ae.minX,ne.minX))*(Math.max(ae.maxY,ne.maxY)-Math.min(ae.minY,ne.minY))-ee);G<U?(U=G,z=ee<z?ee:z,H=ie):G===U&&ee<z&&(z=ee,H=ie)}F=H||F.children[0]}var ne,ae;return F},o.prototype._insert=function(O,F,D){var q=D?O:this.toBBox(O),z=[],U=this._chooseSubtree(q,this.data,F,z);for(U.children.push(O),h(U,q);F>=0&&z[F].children.length>this._maxEntries;)this._split(z,F),F--;this._adjustParentBBoxes(q,z,F)},o.prototype._split=function(O,F){var D=O[F],q=D.children.length,z=this._minEntries;this._chooseSplitAxis(D,z,q);var U=this._chooseSplitIndex(D,z,q),H=k(D.children.splice(U,D.children.length-U));H.height=D.height,H.leaf=D.leaf,a(D,this.toBBox),a(H,this.toBBox),F?O[F-1].children.push(H):this._splitRoot(D,H)},o.prototype._splitRoot=function(O,F){this.data=k([O,F]),this.data.height=O.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(O,F,D){for(var q,z,U,H,X,ie,ee,G=1/0,ne=1/0,ae=F;ae<=D-F;ae++){var le=c(O,0,ae,this.toBBox),fe=c(O,ae,D,this.toBBox),ke=(z=le,U=fe,H=void 0,X=void 0,ie=void 0,ee=void 0,H=Math.max(z.minX,U.minX),X=Math.max(z.minY,U.minY),ie=Math.min(z.maxX,U.maxX),ee=Math.min(z.maxY,U.maxY),Math.max(0,ie-H)*Math.max(0,ee-X)),me=x(le)+x(fe);ke<G?(G=ke,q=ae,ne=me<ne?me:ne):ke===G&&me<ne&&(ne=me,q=ae)}return q||D-F},o.prototype._chooseSplitAxis=function(O,F,D){var q=O.leaf?this.compareMinX:g,z=O.leaf?this.compareMinY:v;this._allDistMargin(O,F,D,q)<this._allDistMargin(O,F,D,z)&&O.children.sort(q)},o.prototype._allDistMargin=function(O,F,D,q){O.children.sort(q);for(var z=this.toBBox,U=c(O,0,F,z),H=c(O,D-F,D,z),X=b(U)+b(H),ie=F;ie<D-F;ie++){var ee=O.children[ie];h(U,O.leaf?z(ee):ee),X+=b(U)}for(var G=D-F-1;G>=F;G--){var ne=O.children[G];h(H,O.leaf?z(ne):ne),X+=b(H)}return X},o.prototype._adjustParentBBoxes=function(O,F,D){for(var q=D;q>=0;q--)h(F[q],O)},o.prototype._condense=function(O){for(var F=O.length-1,D=void 0;F>=0;F--)O[F].children.length===0?F>0?(D=O[F-1].children).splice(D.indexOf(O[F]),1):this.clear():a(O[F],this.toBBox)},o})})(__)),__.exports}class che{constructor(t=[],r=dhe){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:n}=this,i=r[t];for(;t>0;){const o=t-1>>1,l=r[o];if(n(i,l)>=0)break;r[t]=l,t=o}r[t]=i}_down(t){const{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let l=(t<<1)+1,a=r[l];const c=l+1;if(c<this.length&&n(r[c],a)<0&&(l=c,a=r[c]),n(a,o)>=0)break;r[t]=a,t=l}r[t]=o}}function dhe(e,t){return e<t?-1:e>t?1:0}const fhe=Object.freeze(Object.defineProperty({__proto__:null,default:che},Symbol.toStringTag,{value:"Module"})),hhe=e9(fhe);var hv={exports:{}},p5,uO;function phe(){return uO||(uO=1,p5=function(t,r,n,i){var o=t[0],l=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var c=(i-n)/2,h=0,g=c-1;h<c;g=h++){var v=r[n+h*2+0],x=r[n+h*2+1],b=r[n+g*2+0],S=r[n+g*2+1],I=x>l!=S>l&&o<(b-v)*(l-x)/(S-x)+v;I&&(a=!a)}return a}),p5}var m5,cO;function mhe(){return cO||(cO=1,m5=function(t,r,n,i){var o=t[0],l=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var c=i-n,h=0,g=c-1;h<c;g=h++){var v=r[h+n][0],x=r[h+n][1],b=r[g+n][0],S=r[g+n][1],I=x>l!=S>l&&o<(b-v)*(l-x)/(S-x)+v;I&&(a=!a)}return a}),m5}var dO;function ghe(){if(dO)return hv.exports;dO=1;var e=phe(),t=mhe();return hv.exports=function(n,i,o,l){return i.length>0&&Array.isArray(i[0])?t(n,i,o,l):e(n,i,o,l)},hv.exports.nested=t,hv.exports.flat=e,hv.exports}var jv={exports:{}},yhe=jv.exports,fO;function vhe(){return fO||(fO=1,(function(e,t){(function(r,n){n(t)})(yhe,function(r){const i=33306690738754706e-32;function o(I,k,M,O,F){let D,q,z,U,H=k[0],X=O[0],ie=0,ee=0;X>H==X>-H?(D=H,H=k[++ie]):(D=X,X=O[++ee]);let G=0;if(ie<I&&ee<M)for(X>H==X>-H?(z=D-((q=H+D)-H),H=k[++ie]):(z=D-((q=X+D)-X),X=O[++ee]),D=q,z!==0&&(F[G++]=z);ie<I&&ee<M;)X>H==X>-H?(z=D-((q=D+H)-(U=q-D))+(H-U),H=k[++ie]):(z=D-((q=D+X)-(U=q-D))+(X-U),X=O[++ee]),D=q,z!==0&&(F[G++]=z);for(;ie<I;)z=D-((q=D+H)-(U=q-D))+(H-U),H=k[++ie],D=q,z!==0&&(F[G++]=z);for(;ee<M;)z=D-((q=D+X)-(U=q-D))+(X-U),X=O[++ee],D=q,z!==0&&(F[G++]=z);return D===0&&G!==0||(F[G++]=D),G}function l(I){return new Float64Array(I)}const a=33306690738754716e-32,c=22204460492503146e-32,h=11093356479670487e-47,g=l(4),v=l(8),x=l(12),b=l(16),S=l(4);r.orient2d=function(I,k,M,O,F,D){const q=(k-D)*(M-F),z=(I-F)*(O-D),U=q-z;if(q===0||z===0||q>0!=z>0)return U;const H=Math.abs(q+z);return Math.abs(U)>=a*H?U:-(function(X,ie,ee,G,ne,ae,le){let fe,ke,me,Se,we,Pe,ce,_e,be,Me,Le,Ue,Oe,tt,Ze,Qe,Ie,Mt;const ot=X-ne,$e=ee-ne,tr=ie-ae,Wt=G-ae;we=(Ze=(_e=ot-(ce=(Pe=134217729*ot)-(Pe-ot)))*(Me=Wt-(be=(Pe=134217729*Wt)-(Pe-Wt)))-((tt=ot*Wt)-ce*be-_e*be-ce*Me))-(Le=Ze-(Ie=(_e=tr-(ce=(Pe=134217729*tr)-(Pe-tr)))*(Me=$e-(be=(Pe=134217729*$e)-(Pe-$e)))-((Qe=tr*$e)-ce*be-_e*be-ce*Me))),g[0]=Ze-(Le+we)+(we-Ie),we=(Oe=tt-((Ue=tt+Le)-(we=Ue-tt))+(Le-we))-(Le=Oe-Qe),g[1]=Oe-(Le+we)+(we-Qe),we=(Mt=Ue+Le)-Ue,g[2]=Ue-(Mt-we)+(Le-we),g[3]=Mt;let Gt=(function(Cr,br){let nr=br[0];for(let lr=1;lr<Cr;lr++)nr+=br[lr];return nr})(4,g),at=c*le;if(Gt>=at||-Gt>=at||(fe=X-(ot+(we=X-ot))+(we-ne),me=ee-($e+(we=ee-$e))+(we-ne),ke=ie-(tr+(we=ie-tr))+(we-ae),Se=G-(Wt+(we=G-Wt))+(we-ae),fe===0&&ke===0&&me===0&&Se===0)||(at=h*le+i*Math.abs(Gt),(Gt+=ot*Se+Wt*fe-(tr*me+$e*ke))>=at||-Gt>=at))return Gt;we=(Ze=(_e=fe-(ce=(Pe=134217729*fe)-(Pe-fe)))*(Me=Wt-(be=(Pe=134217729*Wt)-(Pe-Wt)))-((tt=fe*Wt)-ce*be-_e*be-ce*Me))-(Le=Ze-(Ie=(_e=ke-(ce=(Pe=134217729*ke)-(Pe-ke)))*(Me=$e-(be=(Pe=134217729*$e)-(Pe-$e)))-((Qe=ke*$e)-ce*be-_e*be-ce*Me))),S[0]=Ze-(Le+we)+(we-Ie),we=(Oe=tt-((Ue=tt+Le)-(we=Ue-tt))+(Le-we))-(Le=Oe-Qe),S[1]=Oe-(Le+we)+(we-Qe),we=(Mt=Ue+Le)-Ue,S[2]=Ue-(Mt-we)+(Le-we),S[3]=Mt;const dr=o(4,g,4,S,v);we=(Ze=(_e=ot-(ce=(Pe=134217729*ot)-(Pe-ot)))*(Me=Se-(be=(Pe=134217729*Se)-(Pe-Se)))-((tt=ot*Se)-ce*be-_e*be-ce*Me))-(Le=Ze-(Ie=(_e=tr-(ce=(Pe=134217729*tr)-(Pe-tr)))*(Me=me-(be=(Pe=134217729*me)-(Pe-me)))-((Qe=tr*me)-ce*be-_e*be-ce*Me))),S[0]=Ze-(Le+we)+(we-Ie),we=(Oe=tt-((Ue=tt+Le)-(we=Ue-tt))+(Le-we))-(Le=Oe-Qe),S[1]=Oe-(Le+we)+(we-Qe),we=(Mt=Ue+Le)-Ue,S[2]=Ue-(Mt-we)+(Le-we),S[3]=Mt;const hr=o(dr,v,4,S,x);we=(Ze=(_e=fe-(ce=(Pe=134217729*fe)-(Pe-fe)))*(Me=Se-(be=(Pe=134217729*Se)-(Pe-Se)))-((tt=fe*Se)-ce*be-_e*be-ce*Me))-(Le=Ze-(Ie=(_e=ke-(ce=(Pe=134217729*ke)-(Pe-ke)))*(Me=me-(be=(Pe=134217729*me)-(Pe-me)))-((Qe=ke*me)-ce*be-_e*be-ce*Me))),S[0]=Ze-(Le+we)+(we-Ie),we=(Oe=tt-((Ue=tt+Le)-(we=Ue-tt))+(Le-we))-(Le=Oe-Qe),S[1]=Oe-(Le+we)+(we-Qe),we=(Mt=Ue+Le)-Ue,S[2]=Ue-(Mt-we)+(Le-we),S[3]=Mt;const ur=o(hr,x,4,S,b);return b[ur-1]})(I,k,M,O,F,D,H)},r.orient2dfast=function(I,k,M,O,F,D){return(k-D)*(M-F)-(I-F)*(O-D)},Object.defineProperty(r,"__esModule",{value:!0})})})(jv,jv.exports)),jv.exports}var hO;function bhe(){if(hO)return $b.exports;hO=1;var e=uhe(),t=hhe,r=ghe(),n=vhe().orient2d;t.default&&(t=t.default),$b.exports=i,$b.exports.default=i;function i(D,q,z){q=Math.max(0,q===void 0?2:q),z=z||0;var U=b(D),H=new e(16);H.toBBox=function(ce){return{minX:ce[0],minY:ce[1],maxX:ce[0],maxY:ce[1]}},H.compareMinX=function(ce,_e){return ce[0]-_e[0]},H.compareMinY=function(ce,_e){return ce[1]-_e[1]},H.load(D);for(var X=[],ie=0,ee;ie<U.length;ie++){var G=U[ie];H.remove(G),ee=S(G,ee),X.push(ee)}var ne=new e(16);for(ie=0;ie<X.length;ie++)ne.insert(x(X[ie]));for(var ae=q*q,le=z*z;X.length;){var fe=X.shift(),ke=fe.p,me=fe.next.p,Se=I(ke,me);if(!(Se<le)){var we=Se/ae;G=o(H,fe.prev.p,ke,me,fe.next.next.p,we,ne),G&&Math.min(I(G,ke),I(G,me))<=we&&(X.push(fe),X.push(S(G,fe)),H.remove(G),ne.remove(fe),ne.insert(x(fe)),ne.insert(x(fe.next)))}}fe=ee;var Pe=[];do Pe.push(fe.p),fe=fe.next;while(fe!==ee);return Pe.push(fe.p),Pe}function o(D,q,z,U,H,X,ie){for(var ee=new t([],l),G=D.data;G;){for(var ne=0;ne<G.children.length;ne++){var ae=G.children[ne],le=G.leaf?k(ae,z,U):a(z,U,ae);le>X||ee.push({node:ae,dist:le})}for(;ee.length&&!ee.peek().node.children;){var fe=ee.pop(),ke=fe.node,me=k(ke,q,z),Se=k(ke,U,H);if(fe.dist<me&&fe.dist<Se&&h(z,ke,ie)&&h(U,ke,ie))return ke}G=ee.pop(),G&&(G=G.node)}return null}function l(D,q){return D.dist-q.dist}function a(D,q,z){if(c(D,z)||c(q,z))return 0;var U=M(D[0],D[1],q[0],q[1],z.minX,z.minY,z.maxX,z.minY);if(U===0)return 0;var H=M(D[0],D[1],q[0],q[1],z.minX,z.minY,z.minX,z.maxY);if(H===0)return 0;var X=M(D[0],D[1],q[0],q[1],z.maxX,z.minY,z.maxX,z.maxY);if(X===0)return 0;var ie=M(D[0],D[1],q[0],q[1],z.minX,z.maxY,z.maxX,z.maxY);return ie===0?0:Math.min(U,H,X,ie)}function c(D,q){return D[0]>=q.minX&&D[0]<=q.maxX&&D[1]>=q.minY&&D[1]<=q.maxY}function h(D,q,z){for(var U=Math.min(D[0],q[0]),H=Math.min(D[1],q[1]),X=Math.max(D[0],q[0]),ie=Math.max(D[1],q[1]),ee=z.search({minX:U,minY:H,maxX:X,maxY:ie}),G=0;G<ee.length;G++)if(v(ee[G].p,ee[G].next.p,D,q))return!1;return!0}function g(D,q,z){return n(D[0],D[1],q[0],q[1],z[0],z[1])}function v(D,q,z,U){return D!==U&&q!==z&&g(D,q,z)>0!=g(D,q,U)>0&&g(z,U,D)>0!=g(z,U,q)>0}function x(D){var q=D.p,z=D.next.p;return D.minX=Math.min(q[0],z[0]),D.minY=Math.min(q[1],z[1]),D.maxX=Math.max(q[0],z[0]),D.maxY=Math.max(q[1],z[1]),D}function b(D){for(var q=D[0],z=D[0],U=D[0],H=D[0],X=0;X<D.length;X++){var ie=D[X];ie[0]<q[0]&&(q=ie),ie[0]>U[0]&&(U=ie),ie[1]<z[1]&&(z=ie),ie[1]>H[1]&&(H=ie)}var ee=[q,z,U,H],G=ee.slice();for(X=0;X<D.length;X++)r(D[X],ee)||G.push(D[X]);return F(G)}function S(D,q){var z={p:D,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return q?(z.next=q.next,z.prev=q,q.next.prev=z,q.next=z):(z.prev=z,z.next=z),z}function I(D,q){var z=D[0]-q[0],U=D[1]-q[1];return z*z+U*U}function k(D,q,z){var U=q[0],H=q[1],X=z[0]-U,ie=z[1]-H;if(X!==0||ie!==0){var ee=((D[0]-U)*X+(D[1]-H)*ie)/(X*X+ie*ie);ee>1?(U=z[0],H=z[1]):ee>0&&(U+=X*ee,H+=ie*ee)}return X=D[0]-U,ie=D[1]-H,X*X+ie*ie}function M(D,q,z,U,H,X,ie,ee){var G=z-D,ne=U-q,ae=ie-H,le=ee-X,fe=D-H,ke=q-X,me=G*G+ne*ne,Se=G*ae+ne*le,we=ae*ae+le*le,Pe=G*fe+ne*ke,ce=ae*fe+le*ke,_e=me*we-Se*Se,be,Me,Le,Ue,Oe=_e,tt=_e;_e===0?(Me=0,Oe=1,Ue=ce,tt=we):(Me=Se*ce-we*Pe,Ue=me*ce-Se*Pe,Me<0?(Me=0,Ue=ce,tt=we):Me>Oe&&(Me=Oe,Ue=ce+Se,tt=we)),Ue<0?(Ue=0,-Pe<0?Me=0:-Pe>me?Me=Oe:(Me=-Pe,Oe=me)):Ue>tt&&(Ue=tt,-Pe+Se<0?Me=0:-Pe+Se>me?Me=Oe:(Me=-Pe+Se,Oe=me)),be=Me===0?0:Me/Oe,Le=Ue===0?0:Ue/tt;var Ze=(1-be)*D+be*z,Qe=(1-be)*q+be*U,Ie=(1-Le)*H+Le*ie,Mt=(1-Le)*X+Le*ee,ot=Ie-Ze,$e=Mt-Qe;return ot*ot+$e*$e}function O(D,q){return D[0]===q[0]?D[1]-q[1]:D[0]-q[0]}function F(D){D.sort(O);for(var q=[],z=0;z<D.length;z++){for(;q.length>=2&&g(q[q.length-2],q[q.length-1],D[z])<=0;)q.pop();q.push(D[z])}for(var U=[],H=D.length-1;H>=0;H--){for(;U.length>=2&&g(U[U.length-2],U[U.length-1],D[H])<=0;)U.pop();U.push(D[H])}return U.pop(),q.pop(),q.concat(U)}return $b.exports}var _he=bhe();const xhe=tf(_he);function whe(e,t={}){t.concavity=t.concavity||1/0;const r=[];if(Cy(e,i=>{r.push([i[0],i[1]])}),!r.length)return null;const n=xhe(r,t.concavity);return n.length>3?F2([n]):null}function GI(e,t={}){switch(y$(e)){case"Point":return $c(zh(e),t.properties);case"Polygon":var r=[];Cy(e,function(D){r.push(D)});var n=sO(e,{properties:t.properties}),i=n.geometry.coordinates,o=0,l=0,a=0,c,h,g,v,x,b,S,I,k=r.map(function(D){return[D[0]-i[0],D[1]-i[1]]});for(c=0;c<r.length-1;c++)h=k[c],v=h[0],b=h[1],g=k[c+1],x=g[0],S=g[1],I=v*S-x*b,a+=I,o+=(v+x)*I,l+=(b+S)*I;if(a===0)return n;var M=a*.5,O=1/(6*M);return $c([i[0]+O*o,i[1]+O*l],t.properties);default:var F=whe(e);return F?GI(F,{properties:t.properties}):sO(e,{properties:t.properties})}}function N$(e,t,r={}){const n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[];for(let l=0;l<n;l++)o.push(ly(e,t,l*-360/n,r).geometry.coordinates);return o.push(o[0]),F2([o],i)}function She(e){return e}function Che(e){if(e==null)return She;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],l=e.translate[1];return function(a,c){c||(t=r=0);var h=2,g=a.length,v=new Array(g);for(v[0]=(t+=a[0])*n+o,v[1]=(r+=a[1])*i+l;h<g;)v[h]=a[h],++h;return v}}function Ehe(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}function The(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return pO(e,r)})}:pO(e,t)}function pO(e,t){var r=t.id,n=t.bbox,i=t.properties==null?{}:t.properties,o=Phe(e,t);return r==null&&n==null?{type:"Feature",properties:i,geometry:o}:n==null?{type:"Feature",id:r,properties:i,geometry:o}:{type:"Feature",id:r,bbox:n,properties:i,geometry:o}}function Phe(e,t){var r=Che(e.transform),n=e.arcs;function i(g,v){v.length&&v.pop();for(var x=n[g<0?~g:g],b=0,S=x.length;b<S;++b)v.push(r(x[b],b));g<0&&Ehe(v,S)}function o(g){return r(g)}function l(g){for(var v=[],x=0,b=g.length;x<b;++x)i(g[x],v);return v.length<2&&v.push(v[0]),v}function a(g){for(var v=l(g);v.length<4;)v.push(v[0]);return v}function c(g){return g.map(a)}function h(g){var v=g.type,x;switch(v){case"GeometryCollection":return{type:v,geometries:g.geometries.map(h)};case"Point":x=o(g.coordinates);break;case"MultiPoint":x=g.coordinates.map(o);break;case"LineString":x=l(g.arcs);break;case"MultiLineString":x=g.arcs.map(l);break;case"Polygon":x=c(g.arcs);break;case"MultiPolygon":x=g.arcs.map(c);break;default:return null}return{type:v,coordinates:x}}return h(t)}function N0(e,t={}){return ife(e,(r,n)=>{const i=n.geometry.coordinates;return r+B2(i[0],i[1],t)},0)}function Ihe(e,t,r,n,i={}){const o=i.steps||64,l=mO(r),a=mO(n),c=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(l===a)return jl(N$(e,t,i).geometry.coordinates[0],c);const h=l,g=l<a?a:a+360;let v=h;const x=[];let b=0;const S=(g-h)/o;for(;v<=g;)x.push(ly(e,t,v,i).geometry.coordinates),b++,v=h+b*S;return jl(x,c)}function mO(e){let t=e%360;return t<0&&(t+=360),t}function khe(e,t,r,n){if(n=n||{},!$I(n))throw new Error("options is invalid");var i,o=[];if(e.type==="Feature")i=e.geometry.coordinates;else if(e.type==="LineString")i=e.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var l=i.length,a=0,c,h,g,v=0;v<i.length&&!(t>=a&&v===i.length-1);v++){if(a>t&&o.length===0){if(c=t-a,!c)return o.push(i[v]),jl(o);h=L0(i[v],i[v-1])-180,g=ly(i[v],c,h,n),o.push(g.geometry.coordinates)}if(a>=r)return c=r-a,c?(h=L0(i[v],i[v-1])-180,g=ly(i[v],c,h,n),o.push(g.geometry.coordinates),jl(o)):(o.push(i[v]),jl(o));if(a>=t&&o.push(i[v]),v===i.length-1)return jl(o);a+=B2(i[v],i[v+1],n)}if(a<t&&i.length===l)throw new Error("Start position is beyond line");var x=i[i.length-1];return jl([x,x])}function Ahe(e,t,r){if(r=r||{},!$I(r))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return VI(e,function(l){i&&(l.geometry.coordinates=l.geometry.coordinates.reverse()),Mhe(l,t,n,function(a){o.push(a)})}),Hf(o)}function Mhe(e,t,r,n){var i=N0(e,{units:r});if(i<=t)return n(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var l=0;l<o;l++){var a=khe(e,t*l,t*(l+1),{units:r});n(a,l)}}function ux(e){var t=e[0],r=e[1];return[r[0]-t[0],r[1]-t[1]]}function e3(e,t){return e[0]*t[1]-t[0]*e[1]}function Lhe(e,t){return[e[0]+t[0],e[1]+t[1]]}function Rhe(e,t){return[e[0]-t[0],e[1]-t[1]]}function Dhe(e,t){return[e*t[0],e*t[1]]}function Nhe(e,t){var r=e[0],n=ux(e),i=t[0],o=ux(t),l=e3(n,o),a=Rhe(i,r),c=e3(a,o),h=c/l,g=Lhe(r,Dhe(h,n));return g}function Ohe(e,t){var r=ux(e),n=ux(t);return e3(r,n)===0}function Fhe(e,t){return Ohe(e,t)?!1:Nhe(e,t)}function Bhe(e,t,r){if(r=r||{},!$I(r))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");var i=y$(e),o=e.properties;switch(i){case"LineString":return gO(e,t,n);case"MultiLineString":var l=[];return VI(e,function(a){l.push(gO(a,t,n).geometry.coordinates)}),Jde(l,o);default:throw new Error("geometry "+i+" is not supported")}}function gO(e,t,r){var n=[],i=Qde(t,r),o=g$(e),l=[];return o.forEach(function(a,c){if(c!==o.length-1){var h=zhe(a,o[c+1],i);if(n.push(h),c>0){var g=n[c-1],v=Fhe(h,g);v!==!1&&(g[1]=v,h[0]=v),l.push(g[0]),c===o.length-2&&(l.push(h[0]),l.push(h[1]))}o.length===2&&(l.push(h[0]),l.push(h[1]))}}),jl(l,e.properties)}function zhe(e,t,r){var n=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=e[0]+r*(t[1]-e[1])/n,o=t[0]+r*(t[1]-e[1])/n,l=e[1]+r*(e[0]-t[0])/n,a=t[1]+r*(e[0]-t[0])/n;return[[i,l],[o,a]]}function jhe(e){const r=window.getComputedStyle(e,null).getPropertyValue("transform");let n=0;if(r!=="none"){const i=r.split("(")[1].split(")")[0].split(","),o=parseFloat(i[0]),l=parseFloat(i[1]);n=Math.round(Math.atan2(l,o)*(180/Math.PI))}return n<0?n+360:n}function Vb(e,t,r){const n=getComputedStyle(e),i=[t[0]-r[0],t[1]-r[1]],o=new DOMMatrixReadOnly(n.transform);return[i[0]*o.a+i[1]*o.c+o.e+r[0],i[0]*o.b+i[1]*o.d+o.f+r[1]]}const yO=10;function Ub(e,t){const r=t.unproject(e),n=t.unproject([e[0]+yO,e[1]]),i=r.distanceTo(n);return yO/i}function t3(e){const t=m2({mapId:e.mapId,watch:{layers:!1,viewport:!0}}),r=J.useRef(null),n=J.useRef(null),i=J.useRef(null),o=J.useRef(document.querySelector(".mapContainer")),l=da({mapId:e.mapId});J.useEffect(()=>{if(!t?.viewport?.zoom||!l.map)return;const h=Math.round(l.map.map._container.clientWidth/2),g=Math.round(l.map.map._container.clientHeight/2);if(!e.options.scale){const v=1/Ub([h,g],l.map.map);e.setOptions(x=>({...x,scale:[v,v]}))}if(!e.options.center){const v=l.map.map.unproject([h,g]);e.setOptions(x=>({...x,center:[v.lng,v.lat]}))}},[l.map,t.viewport?.zoom]),J.useEffect(()=>{if(!l.map)return;l.map.map.setPitch(0);const h=l.map.map.getMaxPitch();return l.map.map.setMaxPitch(0),()=>{l.map?.map.setMaxPitch(h)}},[l.map]);const a=J.useMemo(()=>e.options.orientation==="portrait"?[e.options.width/2,e.options.height/2]:[e.options.height/2,e.options.width/2],[e.options.orientation,e.options.width,e.options.height]),c=J.useMemo(()=>{if(!l.map||!e.options.scale)return"none";const h=l.map.map.project(e.options.center),g=h.x,v=h.y,x=e.options.scale[0]*Ub([g,v],l.map.map),b=t?.viewport?.bearing?t.viewport?.bearing:0,S=`translate(${Math.floor(h.x-a[0])}px,${Math.floor(h.y-a[1])}px) rotate(${e.options.rotate-b}deg) scale(${x},${x})`;return r.current&&(r.current.style.transform=S),S},[l.map,t.viewport,e.options.scale,e.options.rotate,e.options.center,a]);return J.useEffect(()=>{i.current?.updateTarget()},[c]),J.useEffect(()=>{if(!l.map||!e.options.center||!e.options.fixedScale||typeof e.options.fixedScale<"u"&&n.current===e.options.fixedScale)return;n.current=e.options.fixedScale;const h=$c(e.options.center),g=e.options.fixedScale*(e.options.width/1e3),b=ly(h,g,90,{units:"meters"}),S=l.map.map.project(h.geometry.coordinates),I=l.map.map.project(b.geometry.coordinates),k=Math.round(I.x-S.x)/e.options.width*(1/Ub([S.x,S.y],l.map.map));e.setOptions(M=>({...M,scale:[k,k]}))},[l.map,e.options.width,e.options.center,e.options.fixedScale]),J.useEffect(()=>{if(r.current&&l.map){let h=e.options.width,g=e.options.height;e.options.orientation==="portrait"?(r.current.style.width=e.options.width+"px",r.current.style.height=e.options.height+"px"):(r.current.style.width=e.options.height+"px",r.current.style.height=e.options.width+"px",h=e.options.height,g=e.options.width),i.current?.updateTarget();const v=l.map.map.unproject(Vb(r.current,[0,0],a)),x=l.map.map.unproject(Vb(r.current,[h,0],a)),b=l.map.map.unproject(Vb(r.current,[0,g],a)),S=l.map.map.unproject(Vb(r.current,[h,g],a)),I={type:"Feature",bbox:[v.lng,v.lat,S.lng,S.lat],geometry:{type:"Polygon",coordinates:[[[v.lng,v.lat],[x.lng,x.lat],[S.lng,S.lat],[b.lng,b.lat],[v.lng,v.lat]]]},properties:{bearing:jhe(r.current)}};e.geojsonRef.current=I}},[l,c,e.options.orientation,e.geojsonRef,t,r.current,a]),o.current?kv.createPortal(Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"target",ref:r,style:{transform:c,transformOrigin:"center center"}}),Z.jsx(Kde,{ref:i,target:r,container:null,origin:!0,keepRatio:!0,draggable:!0,onDrag:h=>{if(l.map){let g=h.transform.split("translate(");g=g[1].split("px)")[0].split("px, ");const v=l.map?.map.unproject([parseInt(g[0])+a[0],parseInt(g[1])+a[1]]);e.setOptions(x=>({...x,center:[v.lng,v.lat]}))}},scalable:!e.options.fixedScale,onScale:h=>{if(l.map){let g=h.drag.transform.split("scale(");g=g[1].split(")")[0].split(", ");const v=l.map.map.project(e.options.center),x=v.x,b=v.y,S=parseFloat(g[0])*(1/Ub([x,b],l.map.map));e.setOptions(I=>({...I,scale:[S,S]}))}},rotatable:!0,onRotate:h=>{if(l.map&&t.viewport){const v=h.drag.transform.split("rotate(")[1].split("deg)")[0],x=t?.viewport?.bearing?t.viewport.bearing:0;e.setOptions(b=>({...b,rotate:parseFloat(v)+x}))}}})]}),o.current):Z.jsx(Z.Fragment,{})}try{t3.displayName="PdfPreview",t3.__docgenInfo={description:"PdfPreview component renders a transformable (drag, scale, rotate) preview of the desired export or print content",displayName:"PdfPreview",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},geojsonRef:{defaultValue:null,description:"Polygon GeoJson Feature representing the printing area",name:"geojsonRef",required:!0,type:{name:"MutableRefObject<Feature<Geometry, GeoJsonProperties> | undefined>"}},options:{defaultValue:null,description:"a state variable containing the PDF previews current state",name:"options",required:!0,type:{name:"PdfPreviewOptions"}},setOptions:{defaultValue:null,description:"setter function to update the current PDF preview state",name:"setOptions",required:!0,type:{name:"(arg1: (val: PdfPreviewOptions) => PdfPreviewOptions) => void"}}}}}catch{}const qhe=[{value:0,label:"free scale"},{value:250,label:"1/250"},{value:500,label:"1/500"},{value:750,label:"1/750"},{value:1e3,label:"1/1000"},{value:1500,label:"1/1500"},{value:2e3,label:"1/2000"},{value:1e4,label:"1/10000"},{value:1e5,label:"1/100000"}],$he=[{value:"72dpi",label:"Draft (72dpi)"},{value:"150dpi",label:"Medium (150dpi)"},{value:"300dpi",label:"High (300dpi)"}];function r3(e){const[t,r]=J.useState(!1),n=J.useContext(kj),i=da({mapId:e.mapId}),o=Ij({mapId:e.mapId}),l=J.useCallback(()=>{if(i.map&&o.createExport&&n.template&&n.format&&n.options?.orientation&&n.geojsonRef?.current?.bbox&&n.geojsonRef?.current){r(!0);const h=vc(n.geojsonRef.current);o.createExport({width:n.template.width,height:n.template.height,bbox:h,bboxUnrotated:n.geojsonRef.current.bbox,bearing:n.geojsonRef.current?.properties?.bearing||0,format:n.format.toLowerCase(),orientation:n.options.orientation}).then(g=>g.createPdf()).then(g=>(typeof e.onCreatePdf=="function"&&(g.formData=new FormData(document.getElementById("createPdfFormID")),e.onCreatePdf(g)),r(!1),g.downloadPdf())).catch(g=>{console.log(g),r(!1)})}},[i.map,n]),a=l1("(max-width: 950px)"),c=J.useMemo(()=>({margin:a?"1px 0 8px 0 ":"5px 0 15px 0 ",...e?.formControlStyles?{...e.formControlStyles}:{}}),[a,e.formControlStyles]);return Z.jsx(Z.Fragment,{children:Z.jsxs("form",{id:"createPdfFormID",children:[Z.jsxs(dc,{fullWidth:!0,sx:c,children:[Z.jsx(Ui,{variant:"contained",className:"createPdfButton",onClick:l,disabled:t,sx:{marginBottom:"16px"},children:"create PDF"}),t&&Z.jsx(v2,{size:24,sx:{color:"primary.main",position:"absolute",top:"25%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),Z.jsxs(dc,{fullWidth:!0,sx:c,children:[Z.jsx(kh,{sx:{marginTop:"3px"},id:"format-select-label",children:"Format"}),Z.jsx(Ah,{labelId:"format-select-label",id:"format-select",label:"Format",value:n.format,onChange:h=>{n.setFormat?.(h.target.value)},children:Object.keys(Ig).map(h=>Z.jsx(Np,{value:h,children:h},h))})]}),Z.jsxs(dc,{fullWidth:!0,sx:c,children:[Z.jsx(C7,{id:"orientation-radio-buttons-group-label",children:"Orientation"}),Z.jsxs(Bne,{row:!0,"aria-labelledby":"orientation-radio-buttons-group-label",name:"orientation-radio-buttons-group",value:n.options?.orientation,onChange:h=>{n.setOptions&&n.setOptions(g=>({...g,orientation:h.target.value}))},children:[Z.jsx(uT,{value:"portrait",control:Z.jsx(CR,{}),label:"Portrait"}),Z.jsx(uT,{value:"landscape",control:Z.jsx(CR,{}),label:"Landscape"})]})]}),Z.jsxs(dc,{fullWidth:!0,sx:c,children:[Z.jsx(kh,{id:"quality-select-label",children:"Quality"}),Z.jsx(Ah,{labelId:"quality-select-label",id:"quality-select",label:"Quality",value:n.quality,onChange:h=>{n.setQuality?.(h.target.value)},children:$he.map(h=>Z.jsx(Np,{value:h.value,children:h.label},h.value))})]}),Z.jsxs(dc,{fullWidth:!0,sx:c,children:[Z.jsx(kh,{id:"scale-select-label",children:"Scale"}),Z.jsx(Ah,{labelId:"scale-select-label",id:"scale-select",label:"Scale",value:n?.options?.fixedScale,onChange:h=>{n.setOptions?.(g=>({...g,fixedScale:h.target.value}))},children:qhe.map((h,g)=>Z.jsx(Np,{value:h.value,children:h.label},g))})]}),e?.additionalFields,n.options&&n.setOptions&&Z.jsx(t3,{options:n.options,setOptions:n.setOptions,geojsonRef:n.geojsonRef})]})})}try{r3.displayName="PdfForm",r3.__docgenInfo={description:"",displayName:"PdfForm",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},onCreatePdf:{defaultValue:null,description:`Function that will be called before the PDF is created.
Allowing to access and manipulate the jspdf instance before the PDF is created.`,name:"onCreatePdf",required:!1,type:{name:"((options: createPdfResolverParams) => createPdfResolverParams) | undefined"}},formControlStyles:{defaultValue:null,description:"sx props that will be applied to the form control components",name:"formControlStyles",required:!1,type:{name:"SxProps | undefined"}},additionalFields:{defaultValue:null,description:`Define additional form fields that will be added to the bottom of the create-PDF form.
Values of form elements added this way are accessible inside the function passed to the onCreatePdf property using options.formData.get('{form_el_name}').
Make sure all form elements added this way have a name property defined to be able to access the value when rendering the PDF.`,name:"additionalFields",required:!1,type:{name:"ReactNode"}}}}}catch{}const vO=e=>Z.jsx(Z.Fragment,{children:Z.jsx(ST,{children:Z.jsx(r3,{...e})})});try{vO.displayName="MlCreatePdfForm",vO.__docgenInfo={description:"Create PDF Form Component",displayName:"MlCreatePdfForm",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},onCreatePdf:{defaultValue:null,description:`Function that will be called before the PDF is created.
Allowing to access and manipulate the jspdf instance before the PDF is created.`,name:"onCreatePdf",required:!1,type:{name:"((options: createPdfResolverParams) => createPdfResolverParams) | undefined"}},formControlStyles:{defaultValue:null,description:"sx props that will be applied to the form control components",name:"formControlStyles",required:!1,type:{name:"SxProps | undefined"}},additionalFields:{defaultValue:null,description:`Define additional form fields that will be added to the bottom of the create-PDF form.
Values of form elements added this way are accessible inside the function passed to the onCreatePdf property using options.formData.get('{form_el_name}').
Make sure all form elements added this way have a name property defined to be able to access the value when rendering the PDF.`,name:"additionalFields",required:!1,type:{name:"ReactNode"}}}}}catch{}var x_={exports:{}},Vhe=x_.exports,bO;function Uhe(){return bO||(bO=1,(function(e,t){(function(r,n){e.exports=n()})(Vhe,(function(){var r=function(K,pe){var Ye={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},St={on:function(Rt,Jt,jr){if(Ye[Rt]===void 0)throw new Error("Invalid event type: "+Rt);Ye[Rt].push({selector:Jt,fn:jr})},render:function(Rt){pe.store.featureChanged(Rt)}},zt=function(Rt,Jt){for(var jr=Ye[Rt],Kr=jr.length;Kr--;){var Wr=jr[Kr];if(Wr.selector(Jt)){Wr.fn.call(St,Jt)||pe.store.render(),pe.ui.updateMapClasses();break}}};return K.start.call(St),{render:K.render,stop:function(){K.stop&&K.stop()},trash:function(){K.trash&&(K.trash(),pe.store.render())},combineFeatures:function(){K.combineFeatures&&K.combineFeatures()},uncombineFeatures:function(){K.uncombineFeatures&&K.uncombineFeatures()},drag:function(Rt){zt("drag",Rt)},click:function(Rt){zt("click",Rt)},mousemove:function(Rt){zt("mousemove",Rt)},mousedown:function(Rt){zt("mousedown",Rt)},mouseup:function(Rt){zt("mouseup",Rt)},mouseout:function(Rt){zt("mouseout",Rt)},keydown:function(Rt){zt("keydown",Rt)},keyup:function(Rt){zt("keyup",Rt)},touchstart:function(Rt){zt("touchstart",Rt)},touchmove:function(Rt){zt("touchmove",Rt)},touchend:function(Rt){zt("touchend",Rt)},tap:function(Rt){zt("tap",Rt)}}};function n(K){return K&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K}function i(K){if(K.__esModule)return K;var pe=K.default;if(typeof pe=="function"){var Ye=function St(){if(this instanceof St){var zt=[null];zt.push.apply(zt,arguments);var Rt=Function.bind.apply(pe,zt);return new Rt}return pe.apply(this,arguments)};Ye.prototype=pe.prototype}else Ye={};return Object.defineProperty(Ye,"__esModule",{value:!0}),Object.keys(K).forEach((function(St){var zt=Object.getOwnPropertyDescriptor(K,St);Object.defineProperty(Ye,St,zt.get?zt:{enumerable:!0,get:function(){return K[St]}})})),Ye}var o={},l={RADIUS:6378137},a=l;function c(K){var pe=0;if(K&&K.length>0){pe+=Math.abs(h(K[0]));for(var Ye=1;Ye<K.length;Ye++)pe-=Math.abs(h(K[Ye]))}return pe}function h(K){var pe,Ye,St,zt,Rt,Jt,jr=0,Kr=K.length;if(Kr>2){for(Jt=0;Jt<Kr;Jt++)Jt===Kr-2?(St=Kr-2,zt=Kr-1,Rt=0):Jt===Kr-1?(St=Kr-1,zt=0,Rt=1):(St=Jt,zt=Jt+1,Rt=Jt+2),pe=K[St],Ye=K[zt],jr+=(g(K[Rt][0])-g(pe[0]))*Math.sin(g(Ye[1]));jr=jr*a.RADIUS*a.RADIUS/2}return jr}function g(K){return K*Math.PI/180}o.geometry=function K(pe){var Ye,St=0;switch(pe.type){case"Polygon":return c(pe.coordinates);case"MultiPolygon":for(Ye=0;Ye<pe.coordinates.length;Ye++)St+=c(pe.coordinates[Ye]);return St;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Ye=0;Ye<pe.geometries.length;Ye++)St+=K(pe.geometries[Ye]);return St}},o.ring=h;var v={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},x={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},b={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},S={POLYGON:"polygon",LINE:"line_string",POINT:"point"},I={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},k={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},M={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},O={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},F={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},D={ACTIVE:"true",INACTIVE:"false"},q=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],z=-85,U=Object.freeze({__proto__:null,classes:v,sources:x,cursors:b,types:S,geojsonTypes:I,modes:k,events:M,updateActions:O,meta:F,activeStates:D,interactions:q,LAT_MIN:-90,LAT_RENDERED_MIN:z,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),H={Point:0,LineString:1,MultiLineString:1,Polygon:2};function X(K,pe){var Ye=H[K.geometry.type]-H[pe.geometry.type];return Ye===0&&K.geometry.type===I.POLYGON?K.area-pe.area:Ye}function ie(K){return K.map((function(pe){return pe.geometry.type===I.POLYGON&&(pe.area=o.geometry({type:I.FEATURE,property:{},geometry:pe.geometry})),pe})).sort(X).map((function(pe){return delete pe.area,pe}))}function ee(K,pe){return pe===void 0&&(pe=0),[[K.point.x-pe,K.point.y-pe],[K.point.x+pe,K.point.y+pe]]}function G(K){if(this._items={},this._nums={},this._length=K?K.length:0,K)for(var pe=0,Ye=K.length;pe<Ye;pe++)this.add(K[pe]),K[pe]!==void 0&&(typeof K[pe]=="string"?this._items[K[pe]]=pe:this._nums[K[pe]]=pe)}G.prototype.add=function(K){return this.has(K)||(this._length++,typeof K=="string"?this._items[K]=this._length:this._nums[K]=this._length),this},G.prototype.delete=function(K){return this.has(K)===!1||(this._length--,delete this._items[K],delete this._nums[K]),this},G.prototype.has=function(K){return(typeof K=="string"||typeof K=="number")&&(this._items[K]!==void 0||this._nums[K]!==void 0)},G.prototype.values=function(){var K=this,pe=[];return Object.keys(this._items).forEach((function(Ye){pe.push({k:Ye,v:K._items[Ye]})})),Object.keys(this._nums).forEach((function(Ye){pe.push({k:JSON.parse(Ye),v:K._nums[Ye]})})),pe.sort((function(Ye,St){return Ye.v-St.v})).map((function(Ye){return Ye.k}))},G.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ne=[F.FEATURE,F.MIDPOINT,F.VERTEX],ae={click:function(K,pe,Ye){return le(K,pe,Ye,Ye.options.clickBuffer)},touch:function(K,pe,Ye){return le(K,pe,Ye,Ye.options.touchBuffer)}};function le(K,pe,Ye,St){if(Ye.map===null)return[];var zt=K?ee(K,St):pe,Rt={};Ye.options.styles&&(Rt.layers=Ye.options.styles.map((function(Wr){return Wr.id})).filter((function(Wr){return Ye.map.getLayer(Wr)!=null})));var Jt=Ye.map.queryRenderedFeatures(zt,Rt).filter((function(Wr){return ne.indexOf(Wr.properties.meta)!==-1})),jr=new G,Kr=[];return Jt.forEach((function(Wr){var nn=Wr.properties.id;jr.has(nn)||(jr.add(nn),Kr.push(Wr))})),ie(Kr)}function fe(K,pe){var Ye=ae.click(K,null,pe),St={mouse:b.NONE};return Ye[0]&&(St.mouse=Ye[0].properties.active===D.ACTIVE?b.MOVE:b.POINTER,St.feature=Ye[0].properties.meta),pe.events.currentModeName().indexOf("draw")!==-1&&(St.mouse=b.ADD),pe.ui.queueMapClasses(St),pe.ui.updateMapClasses(),Ye[0]}function ke(K,pe){var Ye=K.x-pe.x,St=K.y-pe.y;return Math.sqrt(Ye*Ye+St*St)}function me(K,pe,Ye){Ye===void 0&&(Ye={});var St=Ye.fineTolerance!=null?Ye.fineTolerance:4,zt=Ye.grossTolerance!=null?Ye.grossTolerance:12,Rt=Ye.interval!=null?Ye.interval:500;K.point=K.point||pe.point,K.time=K.time||pe.time;var Jt=ke(K.point,pe.point);return Jt<St||Jt<zt&&pe.time-K.time<Rt}function Se(K,pe,Ye){Ye===void 0&&(Ye={});var St=Ye.tolerance!=null?Ye.tolerance:25,zt=Ye.interval!=null?Ye.interval:250;return K.point=K.point||pe.point,K.time=K.time||pe.time,ke(K.point,pe.point)<St&&pe.time-K.time<zt}var we={exports:{}},Pe=we.exports=function(K,pe){if(pe||(pe=16),K===void 0&&(K=128),K<=0)return"0";for(var Ye=Math.log(Math.pow(2,K))/Math.log(pe),St=2;Ye===1/0;St*=2)Ye=Math.log(Math.pow(2,K/St))/Math.log(pe)*St;var zt=Ye-Math.floor(Ye),Rt="";for(St=0;St<Math.floor(Ye);St++)Rt=Math.floor(Math.random()*pe).toString(pe)+Rt;if(zt){var Jt=Math.pow(pe,zt);Rt=Math.floor(Math.random()*Jt).toString(pe)+Rt}var jr=parseInt(Rt,pe);return jr!==1/0&&jr>=Math.pow(2,K)?Pe(K,pe):Rt};Pe.rack=function(K,pe,Ye){var St=function(Rt){var Jt=0;do{if(Jt++>10){if(!Ye)throw new Error("too many ID collisions, use more bits");K+=Ye}var jr=Pe(K,pe)}while(Object.hasOwnProperty.call(zt,jr));return zt[jr]=Rt,jr},zt=St.hats={};return St.get=function(Rt){return St.hats[Rt]},St.set=function(Rt,Jt){return St.hats[Rt]=Jt,St},St.bits=K||128,St.base=pe||16,St};var ce=n(we.exports),_e=function(K,pe){this.ctx=K,this.properties=pe.properties||{},this.coordinates=pe.geometry.coordinates,this.id=pe.id||ce(),this.type=pe.geometry.type};_e.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},_e.prototype.incomingCoords=function(K){this.setCoordinates(K)},_e.prototype.setCoordinates=function(K){this.coordinates=K,this.changed()},_e.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},_e.prototype.setProperty=function(K,pe){this.properties[K]=pe},_e.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:I.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},_e.prototype.internal=function(K){var pe={id:this.id,meta:F.FEATURE,"meta:type":this.type,active:D.INACTIVE,mode:K};if(this.ctx.options.userProperties)for(var Ye in this.properties)pe["user_"+Ye]=this.properties[Ye];return{type:I.FEATURE,properties:pe,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var be=function(K,pe){_e.call(this,K,pe)};(be.prototype=Object.create(_e.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},be.prototype.updateCoordinate=function(K,pe,Ye){this.coordinates=arguments.length===3?[pe,Ye]:[K,pe],this.changed()},be.prototype.getCoordinate=function(){return this.getCoordinates()};var Me=function(K,pe){_e.call(this,K,pe)};(Me.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length>1},Me.prototype.addCoordinate=function(K,pe,Ye){this.changed();var St=parseInt(K,10);this.coordinates.splice(St,0,[pe,Ye])},Me.prototype.getCoordinate=function(K){var pe=parseInt(K,10);return JSON.parse(JSON.stringify(this.coordinates[pe]))},Me.prototype.removeCoordinate=function(K){this.changed(),this.coordinates.splice(parseInt(K,10),1)},Me.prototype.updateCoordinate=function(K,pe,Ye){var St=parseInt(K,10);this.coordinates[St]=[pe,Ye],this.changed()};var Le=function(K,pe){_e.call(this,K,pe),this.coordinates=this.coordinates.map((function(Ye){return Ye.slice(0,-1)}))};(Le.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every((function(K){return K.length>2}))},Le.prototype.incomingCoords=function(K){this.coordinates=K.map((function(pe){return pe.slice(0,-1)})),this.changed()},Le.prototype.setCoordinates=function(K){this.coordinates=K,this.changed()},Le.prototype.addCoordinate=function(K,pe,Ye){this.changed();var St=K.split(".").map((function(zt){return parseInt(zt,10)}));this.coordinates[St[0]].splice(St[1],0,[pe,Ye])},Le.prototype.removeCoordinate=function(K){this.changed();var pe=K.split(".").map((function(St){return parseInt(St,10)})),Ye=this.coordinates[pe[0]];Ye&&(Ye.splice(pe[1],1),Ye.length<3&&this.coordinates.splice(pe[0],1))},Le.prototype.getCoordinate=function(K){var pe=K.split(".").map((function(St){return parseInt(St,10)})),Ye=this.coordinates[pe[0]];return JSON.parse(JSON.stringify(Ye[pe[1]]))},Le.prototype.getCoordinates=function(){return this.coordinates.map((function(K){return K.concat([K[0]])}))},Le.prototype.updateCoordinate=function(K,pe,Ye){this.changed();var St=K.split("."),zt=parseInt(St[0],10),Rt=parseInt(St[1],10);this.coordinates[zt]===void 0&&(this.coordinates[zt]=[]),this.coordinates[zt][Rt]=[pe,Ye]};var Ue={MultiPoint:be,MultiLineString:Me,MultiPolygon:Le},Oe=function(K,pe,Ye,St,zt){var Rt=Ye.split("."),Jt=parseInt(Rt[0],10),jr=Rt[1]?Rt.slice(1).join("."):null;return K[Jt][pe](jr,St,zt)},tt=function(K,pe){if(_e.call(this,K,pe),delete this.coordinates,this.model=Ue[pe.geometry.type],this.model===void 0)throw new TypeError(pe.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(pe.geometry.coordinates)};function Ze(K){this.map=K.map,this.drawConfig=JSON.parse(JSON.stringify(K.options||{})),this._ctx=K}(tt.prototype=Object.create(_e.prototype))._coordinatesToFeatures=function(K){var pe=this,Ye=this.model.bind(this);return K.map((function(St){return new Ye(pe.ctx,{id:ce(),type:I.FEATURE,properties:{},geometry:{coordinates:St,type:pe.type.replace("Multi","")}})}))},tt.prototype.isValid=function(){return this.features.every((function(K){return K.isValid()}))},tt.prototype.setCoordinates=function(K){this.features=this._coordinatesToFeatures(K),this.changed()},tt.prototype.getCoordinate=function(K){return Oe(this.features,"getCoordinate",K)},tt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(K){return K.type===I.POLYGON?K.getCoordinates():K.coordinates}))))},tt.prototype.updateCoordinate=function(K,pe,Ye){Oe(this.features,"updateCoordinate",K,pe,Ye),this.changed()},tt.prototype.addCoordinate=function(K,pe,Ye){Oe(this.features,"addCoordinate",K,pe,Ye),this.changed()},tt.prototype.removeCoordinate=function(K){Oe(this.features,"removeCoordinate",K),this.changed()},tt.prototype.getFeatures=function(){return this.features},Ze.prototype.setSelected=function(K){return this._ctx.store.setSelected(K)},Ze.prototype.setSelectedCoordinates=function(K){var pe=this;this._ctx.store.setSelectedCoordinates(K),K.reduce((function(Ye,St){return Ye[St.feature_id]===void 0&&(Ye[St.feature_id]=!0,pe._ctx.store.get(St.feature_id).changed()),Ye}),{})},Ze.prototype.getSelected=function(){return this._ctx.store.getSelected()},Ze.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Ze.prototype.isSelected=function(K){return this._ctx.store.isSelected(K)},Ze.prototype.getFeature=function(K){return this._ctx.store.get(K)},Ze.prototype.select=function(K){return this._ctx.store.select(K)},Ze.prototype.deselect=function(K){return this._ctx.store.deselect(K)},Ze.prototype.deleteFeature=function(K,pe){return pe===void 0&&(pe={}),this._ctx.store.delete(K,pe)},Ze.prototype.addFeature=function(K){return this._ctx.store.add(K)},Ze.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Ze.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Ze.prototype.setActionableState=function(K){K===void 0&&(K={});var pe={trash:K.trash||!1,combineFeatures:K.combineFeatures||!1,uncombineFeatures:K.uncombineFeatures||!1};return this._ctx.events.actionable(pe)},Ze.prototype.changeMode=function(K,pe,Ye){return pe===void 0&&(pe={}),Ye===void 0&&(Ye={}),this._ctx.events.changeMode(K,pe,Ye)},Ze.prototype.updateUIClasses=function(K){return this._ctx.ui.queueMapClasses(K)},Ze.prototype.activateUIButton=function(K){return this._ctx.ui.setActiveButton(K)},Ze.prototype.featuresAt=function(K,pe,Ye){if(Ye===void 0&&(Ye="click"),Ye!=="click"&&Ye!=="touch")throw new Error("invalid buffer type");return ae[Ye](K,pe,this._ctx)},Ze.prototype.newFeature=function(K){var pe=K.geometry.type;return pe===I.POINT?new be(this._ctx,K):pe===I.LINE_STRING?new Me(this._ctx,K):pe===I.POLYGON?new Le(this._ctx,K):new tt(this._ctx,K)},Ze.prototype.isInstanceOf=function(K,pe){if(K===I.POINT)return pe instanceof be;if(K===I.LINE_STRING)return pe instanceof Me;if(K===I.POLYGON)return pe instanceof Le;if(K==="MultiFeature")return pe instanceof tt;throw new Error("Unknown feature class: "+K)},Ze.prototype.doRender=function(K){return this._ctx.store.featureChanged(K)},Ze.prototype.onSetup=function(){},Ze.prototype.onDrag=function(){},Ze.prototype.onClick=function(){},Ze.prototype.onMouseMove=function(){},Ze.prototype.onMouseDown=function(){},Ze.prototype.onMouseUp=function(){},Ze.prototype.onMouseOut=function(){},Ze.prototype.onKeyUp=function(){},Ze.prototype.onKeyDown=function(){},Ze.prototype.onTouchStart=function(){},Ze.prototype.onTouchMove=function(){},Ze.prototype.onTouchEnd=function(){},Ze.prototype.onTap=function(){},Ze.prototype.onStop=function(){},Ze.prototype.onTrash=function(){},Ze.prototype.onCombineFeature=function(){},Ze.prototype.onUncombineFeature=function(){},Ze.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Qe={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ie=Object.keys(Qe);function Mt(K){var pe=Object.keys(K);return function(Ye,St){St===void 0&&(St={});var zt={},Rt=pe.reduce((function(Jt,jr){return Jt[jr]=K[jr],Jt}),new Ze(Ye));return{start:function(){var Jt=this;zt=Rt.onSetup(St),Ie.forEach((function(jr){var Kr,Wr=Qe[jr],nn=function(){return!1};K[Wr]&&(nn=function(){return!0}),Jt.on(jr,nn,(Kr=Wr,function(Yr){return Rt[Kr](zt,Yr)}))}))},stop:function(){Rt.onStop(zt)},trash:function(){Rt.onTrash(zt)},combineFeatures:function(){Rt.onCombineFeatures(zt)},uncombineFeatures:function(){Rt.onUncombineFeatures(zt)},render:function(Jt,jr){Rt.toDisplayFeatures(zt,Jt,jr)}}}}function ot(K){return[].concat(K).filter((function(pe){return pe!==void 0}))}function $e(){var K=this;if(!(K.ctx.map&&K.ctx.map.getSource(x.HOT)!==void 0))return Kr();var pe=K.ctx.events.currentModeName();K.ctx.ui.queueMapClasses({mode:pe});var Ye=[],St=[];K.isDirty?St=K.getAllIds():(Ye=K.getChangedIds().filter((function(Wr){return K.get(Wr)!==void 0})),St=K.sources.hot.filter((function(Wr){return Wr.properties.id&&Ye.indexOf(Wr.properties.id)===-1&&K.get(Wr.properties.id)!==void 0})).map((function(Wr){return Wr.properties.id}))),K.sources.hot=[];var zt=K.sources.cold.length;K.sources.cold=K.isDirty?[]:K.sources.cold.filter((function(Wr){var nn=Wr.properties.id||Wr.properties.parent;return Ye.indexOf(nn)===-1}));var Rt=zt!==K.sources.cold.length||St.length>0;function Jt(Wr,nn){var Yr=K.get(Wr).internal(pe);K.ctx.events.currentModeRender(Yr,(function(Bn){K.sources[nn].push(Bn)}))}if(Ye.forEach((function(Wr){return Jt(Wr,"hot")})),St.forEach((function(Wr){return Jt(Wr,"cold")})),Rt&&K.ctx.map.getSource(x.COLD).setData({type:I.FEATURE_COLLECTION,features:K.sources.cold}),K.ctx.map.getSource(x.HOT).setData({type:I.FEATURE_COLLECTION,features:K.sources.hot}),K._emitSelectionChange&&(K.ctx.map.fire(M.SELECTION_CHANGE,{features:K.getSelected().map((function(Wr){return Wr.toGeoJSON()})),points:K.getSelectedCoordinates().map((function(Wr){return{type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:Wr.coordinates}}}))}),K._emitSelectionChange=!1),K._deletedFeaturesToEmit.length){var jr=K._deletedFeaturesToEmit.map((function(Wr){return Wr.toGeoJSON()}));K._deletedFeaturesToEmit=[],K.ctx.map.fire(M.DELETE,{features:jr})}function Kr(){K.isDirty=!1,K.clearChangedIds()}Kr(),K.ctx.map.fire(M.RENDER,{})}function tr(K){var pe,Ye=this;this._features={},this._featureIds=new G,this._selectedFeatureIds=new G,this._selectedCoordinates=[],this._changedFeatureIds=new G,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=K,this.sources={hot:[],cold:[]},this.render=function(){pe||(pe=requestAnimationFrame((function(){pe=null,$e.call(Ye)})))},this.isDirty=!1}function Wt(K,pe){var Ye=K._selectedCoordinates.filter((function(St){return K._selectedFeatureIds.has(St.feature_id)}));K._selectedCoordinates.length===Ye.length||pe.silent||(K._emitSelectionChange=!0),K._selectedCoordinates=Ye}tr.prototype.createRenderBatch=function(){var K=this,pe=this.render,Ye=0;return this.render=function(){Ye++},function(){K.render=pe,Ye>0&&K.render()}},tr.prototype.setDirty=function(){return this.isDirty=!0,this},tr.prototype.featureChanged=function(K){return this._changedFeatureIds.add(K),this},tr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},tr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},tr.prototype.getAllIds=function(){return this._featureIds.values()},tr.prototype.add=function(K){return this.featureChanged(K.id),this._features[K.id]=K,this._featureIds.add(K.id),this},tr.prototype.delete=function(K,pe){var Ye=this;return pe===void 0&&(pe={}),ot(K).forEach((function(St){Ye._featureIds.has(St)&&(Ye._featureIds.delete(St),Ye._selectedFeatureIds.delete(St),pe.silent||Ye._deletedFeaturesToEmit.indexOf(Ye._features[St])===-1&&Ye._deletedFeaturesToEmit.push(Ye._features[St]),delete Ye._features[St],Ye.isDirty=!0)})),Wt(this,pe),this},tr.prototype.get=function(K){return this._features[K]},tr.prototype.getAll=function(){var K=this;return Object.keys(this._features).map((function(pe){return K._features[pe]}))},tr.prototype.select=function(K,pe){var Ye=this;return pe===void 0&&(pe={}),ot(K).forEach((function(St){Ye._selectedFeatureIds.has(St)||(Ye._selectedFeatureIds.add(St),Ye._changedFeatureIds.add(St),pe.silent||(Ye._emitSelectionChange=!0))})),this},tr.prototype.deselect=function(K,pe){var Ye=this;return pe===void 0&&(pe={}),ot(K).forEach((function(St){Ye._selectedFeatureIds.has(St)&&(Ye._selectedFeatureIds.delete(St),Ye._changedFeatureIds.add(St),pe.silent||(Ye._emitSelectionChange=!0))})),Wt(this,pe),this},tr.prototype.clearSelected=function(K){return K===void 0&&(K={}),this.deselect(this._selectedFeatureIds.values(),{silent:K.silent}),this},tr.prototype.setSelected=function(K,pe){var Ye=this;return pe===void 0&&(pe={}),K=ot(K),this.deselect(this._selectedFeatureIds.values().filter((function(St){return K.indexOf(St)===-1})),{silent:pe.silent}),this.select(K.filter((function(St){return!Ye._selectedFeatureIds.has(St)})),{silent:pe.silent}),this},tr.prototype.setSelectedCoordinates=function(K){return this._selectedCoordinates=K,this._emitSelectionChange=!0,this},tr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},tr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},tr.prototype.getSelected=function(){var K=this;return this._selectedFeatureIds.values().map((function(pe){return K.get(pe)}))},tr.prototype.getSelectedCoordinates=function(){var K=this;return this._selectedCoordinates.map((function(pe){return{coordinates:K.get(pe.feature_id).getCoordinate(pe.coord_path)}}))},tr.prototype.isSelected=function(K){return this._selectedFeatureIds.has(K)},tr.prototype.setFeatureProperty=function(K,pe,Ye){this.get(K).setProperty(pe,Ye),this.featureChanged(K)},tr.prototype.storeMapConfig=function(){var K=this;q.forEach((function(pe){K.ctx.map[pe]&&(K._mapInitialConfig[pe]=K.ctx.map[pe].isEnabled())}))},tr.prototype.restoreMapConfig=function(){var K=this;Object.keys(this._mapInitialConfig).forEach((function(pe){K._mapInitialConfig[pe]?K.ctx.map[pe].enable():K.ctx.map[pe].disable()}))},tr.prototype.getInitialConfigValue=function(K){return this._mapInitialConfig[K]===void 0||this._mapInitialConfig[K]};var Gt=function(){for(var K=arguments,pe={},Ye=0;Ye<arguments.length;Ye++){var St=K[Ye];for(var zt in St)at.call(St,zt)&&(pe[zt]=St[zt])}return pe},at=Object.prototype.hasOwnProperty,dr=n(Gt),hr=["mode","feature","mouse"];function ur(K){var pe=null,Ye=null,St={onRemove:function(){return K.map.off("load",St.connect),clearInterval(Ye),St.removeLayers(),K.store.restoreMapConfig(),K.ui.removeButtons(),K.events.removeEventListeners(),K.ui.clearMapClasses(),K.boxZoomInitial&&K.map.boxZoom.enable(),K.map=null,K.container=null,K.store=null,pe&&pe.parentNode&&pe.parentNode.removeChild(pe),pe=null,this},connect:function(){K.map.off("load",St.connect),clearInterval(Ye),St.addLayers(),K.store.storeMapConfig(),K.events.addEventListeners()},onAdd:function(zt){var Rt=zt.fire;return zt.fire=function(Jt,jr){var Kr=arguments;return Rt.length===1&&arguments.length!==1&&(Kr=[dr({},{type:Jt},jr)]),Rt.apply(zt,Kr)},K.map=zt,K.events=(function(Jt){var jr=Object.keys(Jt.options.modes).reduce((function(Or,fn){return Or[fn]=Mt(Jt.options.modes[fn]),Or}),{}),Kr={},Wr={},nn={},Yr=null,Bn=null;nn.drag=function(Or,fn){fn({point:Or.point,time:new Date().getTime()})?(Jt.ui.queueMapClasses({mouse:b.DRAG}),Bn.drag(Or)):Or.originalEvent.stopPropagation()},nn.mousedrag=function(Or){nn.drag(Or,(function(fn){return!me(Kr,fn)}))},nn.touchdrag=function(Or){nn.drag(Or,(function(fn){return!Se(Wr,fn)}))},nn.mousemove=function(Or){if((Or.originalEvent.buttons!==void 0?Or.originalEvent.buttons:Or.originalEvent.which)===1)return nn.mousedrag(Or);var fn=fe(Or,Jt);Or.featureTarget=fn,Bn.mousemove(Or)},nn.mousedown=function(Or){Kr={time:new Date().getTime(),point:Or.point};var fn=fe(Or,Jt);Or.featureTarget=fn,Bn.mousedown(Or)},nn.mouseup=function(Or){var fn=fe(Or,Jt);Or.featureTarget=fn,me(Kr,{point:Or.point,time:new Date().getTime()})?Bn.click(Or):Bn.mouseup(Or)},nn.mouseout=function(Or){Bn.mouseout(Or)},nn.touchstart=function(Or){if(Jt.options.touchEnabled){Wr={time:new Date().getTime(),point:Or.point};var fn=ae.touch(Or,null,Jt)[0];Or.featureTarget=fn,Bn.touchstart(Or)}},nn.touchmove=function(Or){if(Jt.options.touchEnabled)return Bn.touchmove(Or),nn.touchdrag(Or)},nn.touchend=function(Or){if(Or.originalEvent.preventDefault(),Jt.options.touchEnabled){var fn=ae.touch(Or,null,Jt)[0];Or.featureTarget=fn,Se(Wr,{time:new Date().getTime(),point:Or.point})?Bn.tap(Or):Bn.touchend(Or)}};var gn=function(Or){return!(Or===8||Or===46||Or>=48&&Or<=57)};function Rn(Or,fn,ti){ti===void 0&&(ti={}),Bn.stop();var Ci=jr[Or];if(Ci===void 0)throw new Error(Or+" is not valid");Yr=Or;var hi=Ci(Jt,fn);Bn=r(hi,Jt),ti.silent||Jt.map.fire(M.MODE_CHANGE,{mode:Or}),Jt.store.setDirty(),Jt.store.render()}nn.keydown=function(Or){(Or.srcElement||Or.target).classList.contains("mapboxgl-canvas")&&(Or.keyCode!==8&&Or.keyCode!==46||!Jt.options.controls.trash?gn(Or.keyCode)?Bn.keydown(Or):Or.keyCode===49&&Jt.options.controls.point?Rn(k.DRAW_POINT):Or.keyCode===50&&Jt.options.controls.line_string?Rn(k.DRAW_LINE_STRING):Or.keyCode===51&&Jt.options.controls.polygon&&Rn(k.DRAW_POLYGON):(Or.preventDefault(),Bn.trash()))},nn.keyup=function(Or){gn(Or.keyCode)&&Bn.keyup(Or)},nn.zoomend=function(){Jt.store.changeZoom()},nn.data=function(Or){if(Or.dataType==="style"){var fn=Jt.setup,ti=Jt.map,Ci=Jt.options,hi=Jt.store;Ci.styles.some((function(Li){return ti.getLayer(Li.id)}))||(fn.addLayers(),hi.setDirty(),hi.render())}};var Tn={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Yr=Jt.options.defaultMode,Bn=r(jr[Yr](Jt),Jt)},changeMode:Rn,actionable:function(Or){var fn=!1;Object.keys(Or).forEach((function(ti){if(Tn[ti]===void 0)throw new Error("Invalid action type");Tn[ti]!==Or[ti]&&(fn=!0),Tn[ti]=Or[ti]})),fn&&Jt.map.fire(M.ACTIONABLE,{actions:Tn})},currentModeName:function(){return Yr},currentModeRender:function(Or,fn){return Bn.render(Or,fn)},fire:function(Or,fn){nn[Or]&&nn[Or](fn)},addEventListeners:function(){Jt.map.on("mousemove",nn.mousemove),Jt.map.on("mousedown",nn.mousedown),Jt.map.on("mouseup",nn.mouseup),Jt.map.on("data",nn.data),Jt.map.on("touchmove",nn.touchmove),Jt.map.on("touchstart",nn.touchstart),Jt.map.on("touchend",nn.touchend),Jt.container.addEventListener("mouseout",nn.mouseout),Jt.options.keybindings&&(Jt.container.addEventListener("keydown",nn.keydown),Jt.container.addEventListener("keyup",nn.keyup))},removeEventListeners:function(){Jt.map.off("mousemove",nn.mousemove),Jt.map.off("mousedown",nn.mousedown),Jt.map.off("mouseup",nn.mouseup),Jt.map.off("data",nn.data),Jt.map.off("touchmove",nn.touchmove),Jt.map.off("touchstart",nn.touchstart),Jt.map.off("touchend",nn.touchend),Jt.container.removeEventListener("mouseout",nn.mouseout),Jt.options.keybindings&&(Jt.container.removeEventListener("keydown",nn.keydown),Jt.container.removeEventListener("keyup",nn.keyup))},trash:function(Or){Bn.trash(Or)},combineFeatures:function(){Bn.combineFeatures()},uncombineFeatures:function(){Bn.uncombineFeatures()},getMode:function(){return Yr}}})(K),K.ui=(function(Jt){var jr={},Kr=null,Wr={mode:null,feature:null,mouse:null},nn={mode:null,feature:null,mouse:null};function Yr(Or){nn=dr(nn,Or)}function Bn(){var Or,fn;if(Jt.container){var ti=[],Ci=[];hr.forEach((function(hi){nn[hi]!==Wr[hi]&&(ti.push(hi+"-"+Wr[hi]),nn[hi]!==null&&Ci.push(hi+"-"+nn[hi]))})),ti.length>0&&(Or=Jt.container.classList).remove.apply(Or,ti),Ci.length>0&&(fn=Jt.container.classList).add.apply(fn,Ci),Wr=dr(Wr,nn)}}function gn(Or,fn){fn===void 0&&(fn={});var ti=document.createElement("button");return ti.className=v.CONTROL_BUTTON+" "+fn.className,ti.setAttribute("title",fn.title),fn.container.appendChild(ti),ti.addEventListener("click",(function(Ci){if(Ci.preventDefault(),Ci.stopPropagation(),Ci.target===Kr)return Rn(),void fn.onDeactivate();Tn(Or),fn.onActivate()}),!0),ti}function Rn(){Kr&&(Kr.classList.remove(v.ACTIVE_BUTTON),Kr=null)}function Tn(Or){Rn();var fn=jr[Or];fn&&fn&&Or!=="trash"&&(fn.classList.add(v.ACTIVE_BUTTON),Kr=fn)}return{setActiveButton:Tn,queueMapClasses:Yr,updateMapClasses:Bn,clearMapClasses:function(){Yr({mode:null,feature:null,mouse:null}),Bn()},addButtons:function(){var Or=Jt.options.controls,fn=document.createElement("div");return fn.className=v.CONTROL_GROUP+" "+v.CONTROL_BASE,Or&&(Or[S.LINE]&&(jr[S.LINE]=gn(S.LINE,{container:fn,className:v.CONTROL_BUTTON_LINE,title:"LineString tool "+(Jt.options.keybindings?"(l)":""),onActivate:function(){return Jt.events.changeMode(k.DRAW_LINE_STRING)},onDeactivate:function(){return Jt.events.trash()}})),Or[S.POLYGON]&&(jr[S.POLYGON]=gn(S.POLYGON,{container:fn,className:v.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Jt.options.keybindings?"(p)":""),onActivate:function(){return Jt.events.changeMode(k.DRAW_POLYGON)},onDeactivate:function(){return Jt.events.trash()}})),Or[S.POINT]&&(jr[S.POINT]=gn(S.POINT,{container:fn,className:v.CONTROL_BUTTON_POINT,title:"Marker tool "+(Jt.options.keybindings?"(m)":""),onActivate:function(){return Jt.events.changeMode(k.DRAW_POINT)},onDeactivate:function(){return Jt.events.trash()}})),Or.trash&&(jr.trash=gn("trash",{container:fn,className:v.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Jt.events.trash()}})),Or.combine_features&&(jr.combine_features=gn("combineFeatures",{container:fn,className:v.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Jt.events.combineFeatures()}})),Or.uncombine_features&&(jr.uncombine_features=gn("uncombineFeatures",{container:fn,className:v.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Jt.events.uncombineFeatures()}}))),fn},removeButtons:function(){Object.keys(jr).forEach((function(Or){var fn=jr[Or];fn.parentNode&&fn.parentNode.removeChild(fn),delete jr[Or]}))}}})(K),K.container=zt.getContainer(),K.store=new tr(K),pe=K.ui.addButtons(),K.options.boxSelect&&(K.boxZoomInitial=zt.boxZoom.isEnabled(),zt.boxZoom.disable(),zt.dragPan.disable(),zt.dragPan.enable()),zt.loaded()?St.connect():(zt.on("load",St.connect),Ye=setInterval((function(){zt.loaded()&&St.connect()}),16)),K.events.start(),pe},addLayers:function(){K.map.addSource(x.COLD,{data:{type:I.FEATURE_COLLECTION,features:[]},type:"geojson"}),K.map.addSource(x.HOT,{data:{type:I.FEATURE_COLLECTION,features:[]},type:"geojson"}),K.options.styles.forEach((function(zt){K.map.addLayer(zt)})),K.store.setDirty(!0),K.store.render()},removeLayers:function(){K.options.styles.forEach((function(zt){K.map.getLayer(zt.id)&&K.map.removeLayer(zt.id)})),K.map.getSource(x.COLD)&&K.map.removeSource(x.COLD),K.map.getSource(x.HOT)&&K.map.removeSource(x.HOT)}};return K.setup=St,St}var Cr=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function br(K){return function(pe){var Ye=pe.featureTarget;return!!Ye&&!!Ye.properties&&Ye.properties.meta===K}}function nr(K){return!!K.originalEvent&&!!K.originalEvent.shiftKey&&K.originalEvent.button===0}function lr(K){return!!K.featureTarget&&!!K.featureTarget.properties&&K.featureTarget.properties.active===D.ACTIVE&&K.featureTarget.properties.meta===F.FEATURE}function Pr(K){return!!K.featureTarget&&!!K.featureTarget.properties&&K.featureTarget.properties.active===D.INACTIVE&&K.featureTarget.properties.meta===F.FEATURE}function ar(K){return K.featureTarget===void 0}function kr(K){return!!K.featureTarget&&!!K.featureTarget.properties&&K.featureTarget.properties.meta===F.FEATURE}function Qt(K){var pe=K.featureTarget;return!!pe&&!!pe.properties&&pe.properties.meta===F.VERTEX}function Ht(K){return!!K.originalEvent&&K.originalEvent.shiftKey===!0}function Ct(K){return K.keyCode===27}function Re(K){return K.keyCode===13}var Be=Object.freeze({__proto__:null,isOfMetaType:br,isShiftMousedown:nr,isActiveFeature:lr,isInactiveFeature:Pr,noTarget:ar,isFeature:kr,isVertex:Qt,isShiftDown:Ht,isEscapeKey:Ct,isEnterKey:Re,isTrue:function(){return!0}}),De=rt;function rt(K,pe){this.x=K,this.y=pe}rt.prototype={clone:function(){return new rt(this.x,this.y)},add:function(K){return this.clone()._add(K)},sub:function(K){return this.clone()._sub(K)},multByPoint:function(K){return this.clone()._multByPoint(K)},divByPoint:function(K){return this.clone()._divByPoint(K)},mult:function(K){return this.clone()._mult(K)},div:function(K){return this.clone()._div(K)},rotate:function(K){return this.clone()._rotate(K)},rotateAround:function(K,pe){return this.clone()._rotateAround(K,pe)},matMult:function(K){return this.clone()._matMult(K)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(K){return this.x===K.x&&this.y===K.y},dist:function(K){return Math.sqrt(this.distSqr(K))},distSqr:function(K){var pe=K.x-this.x,Ye=K.y-this.y;return pe*pe+Ye*Ye},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(K){return Math.atan2(this.y-K.y,this.x-K.x)},angleWith:function(K){return this.angleWithSep(K.x,K.y)},angleWithSep:function(K,pe){return Math.atan2(this.x*pe-this.y*K,this.x*K+this.y*pe)},_matMult:function(K){var pe=K[0]*this.x+K[1]*this.y,Ye=K[2]*this.x+K[3]*this.y;return this.x=pe,this.y=Ye,this},_add:function(K){return this.x+=K.x,this.y+=K.y,this},_sub:function(K){return this.x-=K.x,this.y-=K.y,this},_mult:function(K){return this.x*=K,this.y*=K,this},_div:function(K){return this.x/=K,this.y/=K,this},_multByPoint:function(K){return this.x*=K.x,this.y*=K.y,this},_divByPoint:function(K){return this.x/=K.x,this.y/=K.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var K=this.y;return this.y=this.x,this.x=-K,this},_rotate:function(K){var pe=Math.cos(K),Ye=Math.sin(K),St=pe*this.x-Ye*this.y,zt=Ye*this.x+pe*this.y;return this.x=St,this.y=zt,this},_rotateAround:function(K,pe){var Ye=Math.cos(K),St=Math.sin(K),zt=pe.x+Ye*(this.x-pe.x)-St*(this.y-pe.y),Rt=pe.y+St*(this.x-pe.x)+Ye*(this.y-pe.y);return this.x=zt,this.y=Rt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},rt.convert=function(K){return K instanceof rt?K:Array.isArray(K)?new rt(K[0],K[1]):K};var mt=n(De);function At(K,pe){var Ye=pe.getBoundingClientRect();return new mt(K.clientX-Ye.left-(pe.clientLeft||0),K.clientY-Ye.top-(pe.clientTop||0))}function Ot(K,pe,Ye,St){return{type:I.FEATURE,properties:{meta:F.VERTEX,parent:K,coord_path:Ye,active:St?D.ACTIVE:D.INACTIVE},geometry:{type:I.POINT,coordinates:pe}}}function Tt(K,pe,Ye){var St=pe.geometry.coordinates,zt=Ye.geometry.coordinates;if(St[1]>85||St[1]<z||zt[1]>85||zt[1]<z)return null;var Rt={lng:(St[0]+zt[0])/2,lat:(St[1]+zt[1])/2};return{type:I.FEATURE,properties:{meta:F.MIDPOINT,parent:K,lng:Rt.lng,lat:Rt.lat,coord_path:Ye.properties.coord_path},geometry:{type:I.POINT,coordinates:[Rt.lng,Rt.lat]}}}function Yt(K,pe,Ye){pe===void 0&&(pe={}),Ye===void 0&&(Ye=null);var St,zt=K.geometry,Rt=zt.type,Jt=zt.coordinates,jr=K.properties&&K.properties.id,Kr=[];function Wr(Yr,Bn){var gn="",Rn=null;Yr.forEach((function(Tn,Or){var fn=Bn!=null?Bn+"."+Or:String(Or),ti=Ot(jr,Tn,fn,nn(fn));if(pe.midpoints&&Rn){var Ci=Tt(jr,Rn,ti);Ci&&Kr.push(Ci)}Rn=ti;var hi=JSON.stringify(Tn);gn!==hi&&Kr.push(ti),Or===0&&(gn=hi)}))}function nn(Yr){return!!pe.selectedPaths&&pe.selectedPaths.indexOf(Yr)!==-1}return Rt===I.POINT?Kr.push(Ot(jr,Jt,Ye,nn(Ye))):Rt===I.POLYGON?Jt.forEach((function(Yr,Bn){Wr(Yr,Ye!==null?Ye+"."+Bn:String(Bn))})):Rt===I.LINE_STRING?Wr(Jt,Ye):Rt.indexOf(I.MULTI_PREFIX)===0&&(St=Rt.replace(I.MULTI_PREFIX,""),Jt.forEach((function(Yr,Bn){var gn={type:I.FEATURE,properties:K.properties,geometry:{type:St,coordinates:Yr}};Kr=Kr.concat(Yt(gn,pe,Bn))}))),Kr}var Bt={enable:function(K){setTimeout((function(){K.map&&K.map.doubleClickZoom&&K._ctx&&K._ctx.store&&K._ctx.store.getInitialConfigValue&&K._ctx.store.getInitialConfigValue("doubleClickZoom")&&K.map.doubleClickZoom.enable()}),0)},disable:function(K){setTimeout((function(){K.map&&K.map.doubleClickZoom&&K.map.doubleClickZoom.disable()}),0)}},wt={exports:{}},Xt=function(K){if(!K||!K.type)return null;var pe=Et[K.type];if(!pe)return null;if(pe==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:K}]};if(pe==="feature")return{type:"FeatureCollection",features:[K]};if(pe==="featurecollection")return K},Et={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Ir=n(Xt),$t=Object.freeze({__proto__:null,default:function K(pe){switch(pe&&pe.type||null){case"FeatureCollection":return pe.features=pe.features.reduce((function(Ye,St){return Ye.concat(K(St))}),[]),pe;case"Feature":return pe.geometry?K(pe.geometry).map((function(Ye){var St={type:"Feature",properties:JSON.parse(JSON.stringify(pe.properties)),geometry:Ye};return pe.id!==void 0&&(St.id=pe.id),St})):[pe];case"MultiPoint":return pe.coordinates.map((function(Ye){return{type:"Point",coordinates:Ye}}));case"MultiPolygon":return pe.coordinates.map((function(Ye){return{type:"Polygon",coordinates:Ye}}));case"MultiLineString":return pe.coordinates.map((function(Ye){return{type:"LineString",coordinates:Ye}}));case"GeometryCollection":return pe.geometries.map(K).reduce((function(Ye,St){return Ye.concat(St)}),[]);case"Point":case"Polygon":case"LineString":return[pe]}}}),Vr=Xt,Rr=i($t),un=function(K){return(function pe(Ye){return Array.isArray(Ye)&&Ye.length&&typeof Ye[0]=="number"?[Ye]:Ye.reduce((function(St,zt){return Array.isArray(zt)&&Array.isArray(zt[0])?St.concat(pe(zt)):(St.push(zt),St)}),[])})(K)};Rr instanceof Function||(Rr=Rr.default);var Te={exports:{}},qe=Te.exports=function(K){return new ht(K)};function ht(K){this.value=K}function kt(K,pe,Ye){var St=[],zt=[],Rt=!0;return(function Jt(jr){var Kr=Ye?gr(jr):jr,Wr={},nn=!0,Yr={node:Kr,node_:jr,path:[].concat(St),parent:zt[zt.length-1],parents:zt,key:St.slice(-1)[0],isRoot:St.length===0,level:St.length,circular:null,update:function(Rn,Tn){Yr.isRoot||(Yr.parent.node[Yr.key]=Rn),Yr.node=Rn,Tn&&(nn=!1)},delete:function(Rn){delete Yr.parent.node[Yr.key],Rn&&(nn=!1)},remove:function(Rn){si(Yr.parent.node)?Yr.parent.node.splice(Yr.key,1):delete Yr.parent.node[Yr.key],Rn&&(nn=!1)},keys:null,before:function(Rn){Wr.before=Rn},after:function(Rn){Wr.after=Rn},pre:function(Rn){Wr.pre=Rn},post:function(Rn){Wr.post=Rn},stop:function(){Rt=!1},block:function(){nn=!1}};if(!Rt)return Yr;function Bn(){if(typeof Yr.node=="object"&&Yr.node!==null){Yr.keys&&Yr.node_===Yr.node||(Yr.keys=Ur(Yr.node)),Yr.isLeaf=Yr.keys.length==0;for(var Rn=0;Rn<zt.length;Rn++)if(zt[Rn].node_===jr){Yr.circular=zt[Rn];break}}else Yr.isLeaf=!0,Yr.keys=null;Yr.notLeaf=!Yr.isLeaf,Yr.notRoot=!Yr.isRoot}Bn();var gn=pe.call(Yr,Yr.node);return gn!==void 0&&Yr.update&&Yr.update(gn),Wr.before&&Wr.before.call(Yr,Yr.node),nn&&(typeof Yr.node!="object"||Yr.node===null||Yr.circular||(zt.push(Yr),Bn(),Hn(Yr.keys,(function(Rn,Tn){St.push(Rn),Wr.pre&&Wr.pre.call(Yr,Yr.node[Rn],Rn);var Or=Jt(Yr.node[Rn]);Ye&&di.call(Yr.node,Rn)&&(Yr.node[Rn]=Or.node),Or.isLast=Tn==Yr.keys.length-1,Or.isFirst=Tn==0,Wr.post&&Wr.post.call(Yr,Or),St.pop()})),zt.pop()),Wr.after&&Wr.after.call(Yr,Yr.node)),Yr})(K).node}function gr(K){if(typeof K=="object"&&K!==null){var pe;if(si(K))pe=[];else if(Er(K)==="[object Date]")pe=new Date(K.getTime?K.getTime():K);else if((function(zt){return Er(zt)==="[object RegExp]"})(K))pe=new RegExp(K);else if((function(zt){return Er(zt)==="[object Error]"})(K))pe={message:K.message};else if((function(zt){return Er(zt)==="[object Boolean]"})(K))pe=new Boolean(K);else if((function(zt){return Er(zt)==="[object Number]"})(K))pe=new Number(K);else if((function(zt){return Er(zt)==="[object String]"})(K))pe=new String(K);else if(Object.create&&Object.getPrototypeOf)pe=Object.create(Object.getPrototypeOf(K));else if(K.constructor===Object)pe={};else{var Ye=K.constructor&&K.constructor.prototype||K.__proto__||{},St=function(){};St.prototype=Ye,pe=new St}return Hn(Ur(K),(function(zt){pe[zt]=K[zt]})),pe}return K}ht.prototype.get=function(K){for(var pe=this.value,Ye=0;Ye<K.length;Ye++){var St=K[Ye];if(!pe||!di.call(pe,St)){pe=void 0;break}pe=pe[St]}return pe},ht.prototype.has=function(K){for(var pe=this.value,Ye=0;Ye<K.length;Ye++){var St=K[Ye];if(!pe||!di.call(pe,St))return!1;pe=pe[St]}return!0},ht.prototype.set=function(K,pe){for(var Ye=this.value,St=0;St<K.length-1;St++){var zt=K[St];di.call(Ye,zt)||(Ye[zt]={}),Ye=Ye[zt]}return Ye[K[St]]=pe,pe},ht.prototype.map=function(K){return kt(this.value,K,!0)},ht.prototype.forEach=function(K){return this.value=kt(this.value,K,!1),this.value},ht.prototype.reduce=function(K,pe){var Ye=arguments.length===1,St=Ye?this.value:pe;return this.forEach((function(zt){this.isRoot&&Ye||(St=K.call(this,St,zt))})),St},ht.prototype.paths=function(){var K=[];return this.forEach((function(pe){K.push(this.path)})),K},ht.prototype.nodes=function(){var K=[];return this.forEach((function(pe){K.push(this.node)})),K},ht.prototype.clone=function(){var K=[],pe=[];return(function Ye(St){for(var zt=0;zt<K.length;zt++)if(K[zt]===St)return pe[zt];if(typeof St=="object"&&St!==null){var Rt=gr(St);return K.push(St),pe.push(Rt),Hn(Ur(St),(function(Jt){Rt[Jt]=Ye(St[Jt])})),K.pop(),pe.pop(),Rt}return St})(this.value)};var Ur=Object.keys||function(K){var pe=[];for(var Ye in K)pe.push(Ye);return pe};function Er(K){return Object.prototype.toString.call(K)}var si=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},Hn=function(K,pe){if(K.forEach)return K.forEach(pe);for(var Ye=0;Ye<K.length;Ye++)pe(K[Ye],Ye,K)};Hn(Ur(ht.prototype),(function(K){qe[K]=function(pe){var Ye=[].slice.call(arguments,1),St=new ht(pe);return St[K].apply(St,Ye)}}));var di=Object.hasOwnProperty||function(K,pe){return pe in K},Mi=Te.exports,qr=cn;function cn(K){if(!(this instanceof cn))return new cn(K);this._bbox=K||[1/0,1/0,-1/0,-1/0],this._valid=!!K}cn.prototype.include=function(K){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],K[0]),this._bbox[1]=Math.min(this._bbox[1],K[1]),this._bbox[2]=Math.max(this._bbox[2],K[0]),this._bbox[3]=Math.max(this._bbox[3],K[1]),this},cn.prototype.equals=function(K){var pe;return pe=K instanceof cn?K.bbox():K,this._bbox[0]==pe[0]&&this._bbox[1]==pe[1]&&this._bbox[2]==pe[2]&&this._bbox[3]==pe[3]},cn.prototype.center=function(K){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},cn.prototype.union=function(K){var pe;return this._valid=!0,pe=K instanceof cn?K.bbox():K,this._bbox[0]=Math.min(this._bbox[0],pe[0]),this._bbox[1]=Math.min(this._bbox[1],pe[1]),this._bbox[2]=Math.max(this._bbox[2],pe[2]),this._bbox[3]=Math.max(this._bbox[3],pe[3]),this},cn.prototype.bbox=function(){return this._valid?this._bbox:null},cn.prototype.contains=function(K){if(!K)return this._fastContains();if(!this._valid)return null;var pe=K[0],Ye=K[1];return this._bbox[0]<=pe&&this._bbox[1]<=Ye&&this._bbox[2]>=pe&&this._bbox[3]>=Ye},cn.prototype.intersect=function(K){return this._valid?(pe=K instanceof cn?K.bbox():K,!(this._bbox[0]>pe[2]||this._bbox[2]<pe[0]||this._bbox[3]<pe[1]||this._bbox[1]>pe[3])):null;var pe},cn.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var K="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",K)},cn.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Pn=function(K){if(!K)return[];var pe=Rr(Vr(K)),Ye=[];return pe.features.forEach((function(St){St.geometry&&(Ye=Ye.concat(un(St.geometry.coordinates)))})),Ye},Gi=Mi,pa=qr,Ki={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},wn=Object.keys(Ki);function Ua(K){for(var pe=pa(),Ye=Pn(K),St=0;St<Ye.length;St++)pe.include(Ye[St]);return pe}wt.exports=function(K){return Ua(K).bbox()},wt.exports.polygon=function(K){return Ua(K).polygon()},wt.exports.bboxify=function(K){return Gi(K).map((function(pe){pe&&wn.some((function(Ye){return!!pe[Ye]&&Ki[Ye].indexOf(pe.type)!==-1}))&&(pe.bbox=Ua(pe).bbox(),this.update(pe))}))};var oa=n(wt.exports),Di=-90;function Ra(K,pe){var Ye=Di,St=90,zt=Di,Rt=90,Jt=270,jr=-270;K.forEach((function(Wr){var nn=oa(Wr),Yr=nn[1],Bn=nn[3],gn=nn[0],Rn=nn[2];Yr>Ye&&(Ye=Yr),Bn<St&&(St=Bn),Bn>zt&&(zt=Bn),Yr<Rt&&(Rt=Yr),gn<Jt&&(Jt=gn),Rn>jr&&(jr=Rn)}));var Kr=pe;return Ye+Kr.lat>85&&(Kr.lat=85-Ye),zt+Kr.lat>90&&(Kr.lat=90-zt),St+Kr.lat<-85&&(Kr.lat=-85-St),Rt+Kr.lat<Di&&(Kr.lat=Di-Rt),Jt+Kr.lng<=-270&&(Kr.lng+=360*Math.ceil(Math.abs(Kr.lng)/360)),jr+Kr.lng>=270&&(Kr.lng-=360*Math.ceil(Math.abs(Kr.lng)/360)),Kr}function Ts(K,pe){var Ye=Ra(K.map((function(St){return St.toGeoJSON()})),pe);K.forEach((function(St){var zt,Rt=St.getCoordinates(),Jt=function(Kr){var Wr={lng:Kr[0]+Ye.lng,lat:Kr[1]+Ye.lat};return[Wr.lng,Wr.lat]},jr=function(Kr){return Kr.map((function(Wr){return Jt(Wr)}))};St.type===I.POINT?zt=Jt(Rt):St.type===I.LINE_STRING||St.type===I.MULTI_POINT?zt=Rt.map(Jt):St.type===I.POLYGON||St.type===I.MULTI_LINE_STRING?zt=Rt.map(jr):St.type===I.MULTI_POLYGON&&(zt=Rt.map((function(Kr){return Kr.map((function(Wr){return jr(Wr)}))}))),St.incomingCoords(zt)}))}var bi={onSetup:function(K){var pe=this,Ye={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:K.featureIds||[]};return this.setSelected(Ye.initiallySelectedFeatureIds.filter((function(St){return pe.getFeature(St)!==void 0}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Ye},fireUpdate:function(){this.map.fire(M.UPDATE,{action:O.MOVE,features:this.getSelected().map((function(K){return K.toGeoJSON()}))})},fireActionable:function(){var K=this,pe=this.getSelected(),Ye=pe.filter((function(jr){return K.isInstanceOf("MultiFeature",jr)})),St=!1;if(pe.length>1){St=!0;var zt=pe[0].type.replace("Multi","");pe.forEach((function(jr){jr.type.replace("Multi","")!==zt&&(St=!1)}))}var Rt=Ye.length>0,Jt=pe.length>0;this.setActionableState({combineFeatures:St,uncombineFeatures:Rt,trash:Jt})},getUniqueIds:function(K){return K.length?K.map((function(pe){return pe.properties.id})).filter((function(pe){return pe!==void 0})).reduce((function(pe,Ye){return pe.add(Ye),pe}),new G).values():[]},stopExtendedInteractions:function(K){K.boxSelectElement&&(K.boxSelectElement.parentNode&&K.boxSelectElement.parentNode.removeChild(K.boxSelectElement),K.boxSelectElement=null),this.map.dragPan.enable(),K.boxSelecting=!1,K.canBoxSelect=!1,K.dragMoving=!1,K.canDragMove=!1},onStop:function(){Bt.enable(this)},onMouseMove:function(K,pe){return kr(pe)&&K.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(K),!0},onMouseOut:function(K){return!K.dragMoving||this.fireUpdate()}};bi.onTap=bi.onClick=function(K,pe){return ar(pe)?this.clickAnywhere(K,pe):br(F.VERTEX)(pe)?this.clickOnVertex(K,pe):kr(pe)?this.clickOnFeature(K,pe):void 0},bi.clickAnywhere=function(K){var pe=this,Ye=this.getSelectedIds();Ye.length&&(this.clearSelectedFeatures(),Ye.forEach((function(St){return pe.doRender(St)}))),Bt.enable(this),this.stopExtendedInteractions(K)},bi.clickOnVertex=function(K,pe){this.changeMode(k.DIRECT_SELECT,{featureId:pe.featureTarget.properties.parent,coordPath:pe.featureTarget.properties.coord_path,startPos:pe.lngLat}),this.updateUIClasses({mouse:b.MOVE})},bi.startOnActiveFeature=function(K,pe){this.stopExtendedInteractions(K),this.map.dragPan.disable(),this.doRender(pe.featureTarget.properties.id),K.canDragMove=!0,K.dragMoveLocation=pe.lngLat},bi.clickOnFeature=function(K,pe){var Ye=this;Bt.disable(this),this.stopExtendedInteractions(K);var St=Ht(pe),zt=this.getSelectedIds(),Rt=pe.featureTarget.properties.id,Jt=this.isSelected(Rt);if(!St&&Jt&&this.getFeature(Rt).type!==I.POINT)return this.changeMode(k.DIRECT_SELECT,{featureId:Rt});Jt&&St?(this.deselect(Rt),this.updateUIClasses({mouse:b.POINTER}),zt.length===1&&Bt.enable(this)):!Jt&&St?(this.select(Rt),this.updateUIClasses({mouse:b.MOVE})):Jt||St||(zt.forEach((function(jr){return Ye.doRender(jr)})),this.setSelected(Rt),this.updateUIClasses({mouse:b.MOVE})),this.doRender(Rt)},bi.onMouseDown=function(K,pe){return lr(pe)?this.startOnActiveFeature(K,pe):this.drawConfig.boxSelect&&nr(pe)?this.startBoxSelect(K,pe):void 0},bi.startBoxSelect=function(K,pe){this.stopExtendedInteractions(K),this.map.dragPan.disable(),K.boxSelectStartLocation=At(pe.originalEvent,this.map.getContainer()),K.canBoxSelect=!0},bi.onTouchStart=function(K,pe){if(lr(pe))return this.startOnActiveFeature(K,pe)},bi.onDrag=function(K,pe){return K.canDragMove?this.dragMove(K,pe):this.drawConfig.boxSelect&&K.canBoxSelect?this.whileBoxSelect(K,pe):void 0},bi.whileBoxSelect=function(K,pe){K.boxSelecting=!0,this.updateUIClasses({mouse:b.ADD}),K.boxSelectElement||(K.boxSelectElement=document.createElement("div"),K.boxSelectElement.classList.add(v.BOX_SELECT),this.map.getContainer().appendChild(K.boxSelectElement));var Ye=At(pe.originalEvent,this.map.getContainer()),St=Math.min(K.boxSelectStartLocation.x,Ye.x),zt=Math.max(K.boxSelectStartLocation.x,Ye.x),Rt=Math.min(K.boxSelectStartLocation.y,Ye.y),Jt=Math.max(K.boxSelectStartLocation.y,Ye.y),jr="translate("+St+"px, "+Rt+"px)";K.boxSelectElement.style.transform=jr,K.boxSelectElement.style.WebkitTransform=jr,K.boxSelectElement.style.width=zt-St+"px",K.boxSelectElement.style.height=Jt-Rt+"px"},bi.dragMove=function(K,pe){K.dragMoving=!0,pe.originalEvent.stopPropagation();var Ye={lng:pe.lngLat.lng-K.dragMoveLocation.lng,lat:pe.lngLat.lat-K.dragMoveLocation.lat};Ts(this.getSelected(),Ye),K.dragMoveLocation=pe.lngLat},bi.onTouchEnd=bi.onMouseUp=function(K,pe){var Ye=this;if(K.dragMoving)this.fireUpdate();else if(K.boxSelecting){var St=[K.boxSelectStartLocation,At(pe.originalEvent,this.map.getContainer())],zt=this.featuresAt(null,St,"click"),Rt=this.getUniqueIds(zt).filter((function(Jt){return!Ye.isSelected(Jt)}));Rt.length&&(this.select(Rt),Rt.forEach((function(Jt){return Ye.doRender(Jt)})),this.updateUIClasses({mouse:b.MOVE}))}this.stopExtendedInteractions(K)},bi.toDisplayFeatures=function(K,pe,Ye){pe.properties.active=this.isSelected(pe.properties.id)?D.ACTIVE:D.INACTIVE,Ye(pe),this.fireActionable(),pe.properties.active===D.ACTIVE&&pe.geometry.type!==I.POINT&&Yt(pe).forEach(Ye)},bi.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},bi.onCombineFeatures=function(){var K=this.getSelected();if(!(K.length===0||K.length<2)){for(var pe=[],Ye=[],St=K[0].type.replace("Multi",""),zt=0;zt<K.length;zt++){var Rt=K[zt];if(Rt.type.replace("Multi","")!==St)return;Rt.type.includes("Multi")?Rt.getCoordinates().forEach((function(jr){pe.push(jr)})):pe.push(Rt.getCoordinates()),Ye.push(Rt.toGeoJSON())}if(Ye.length>1){var Jt=this.newFeature({type:I.FEATURE,properties:Ye[0].properties,geometry:{type:"Multi"+St,coordinates:pe}});this.addFeature(Jt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Jt.id]),this.map.fire(M.COMBINE_FEATURES,{createdFeatures:[Jt.toGeoJSON()],deletedFeatures:Ye})}this.fireActionable()}},bi.onUncombineFeatures=function(){var K=this,pe=this.getSelected();if(pe.length!==0){for(var Ye=[],St=[],zt=function(Jt){var jr=pe[Jt];K.isInstanceOf("MultiFeature",jr)&&(jr.getFeatures().forEach((function(Kr){K.addFeature(Kr),Kr.properties=jr.properties,Ye.push(Kr.toGeoJSON()),K.select([Kr.id])})),K.deleteFeature(jr.id,{silent:!0}),St.push(jr.toGeoJSON()))},Rt=0;Rt<pe.length;Rt++)zt(Rt);Ye.length>1&&this.map.fire(M.UNCOMBINE_FEATURES,{createdFeatures:Ye,deletedFeatures:St}),this.fireActionable()}};var Ys=br(F.VERTEX),_o=br(F.MIDPOINT),fi={fireUpdate:function(){this.map.fire(M.UPDATE,{action:O.CHANGE_COORDINATES,features:this.getSelected().map((function(K){return K.toGeoJSON()}))})},fireActionable:function(K){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:K.selectedCoordPaths.length>0})},startDragging:function(K,pe){this.map.dragPan.disable(),K.canDragMove=!0,K.dragMoveLocation=pe.lngLat},stopDragging:function(K){this.map.dragPan.enable(),K.dragMoving=!1,K.canDragMove=!1,K.dragMoveLocation=null},onVertex:function(K,pe){this.startDragging(K,pe);var Ye=pe.featureTarget.properties,St=K.selectedCoordPaths.indexOf(Ye.coord_path);Ht(pe)||St!==-1?Ht(pe)&&St===-1&&K.selectedCoordPaths.push(Ye.coord_path):K.selectedCoordPaths=[Ye.coord_path];var zt=this.pathsToCoordinates(K.featureId,K.selectedCoordPaths);this.setSelectedCoordinates(zt)},onMidpoint:function(K,pe){this.startDragging(K,pe);var Ye=pe.featureTarget.properties;K.feature.addCoordinate(Ye.coord_path,Ye.lng,Ye.lat),this.fireUpdate(),K.selectedCoordPaths=[Ye.coord_path]},pathsToCoordinates:function(K,pe){return pe.map((function(Ye){return{feature_id:K,coord_path:Ye}}))},onFeature:function(K,pe){K.selectedCoordPaths.length===0?this.startDragging(K,pe):this.stopDragging(K)},dragFeature:function(K,pe,Ye){Ts(this.getSelected(),Ye),K.dragMoveLocation=pe.lngLat},dragVertex:function(K,pe,Ye){for(var St=K.selectedCoordPaths.map((function(jr){return K.feature.getCoordinate(jr)})),zt=Ra(St.map((function(jr){return{type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:jr}}})),Ye),Rt=0;Rt<St.length;Rt++){var Jt=St[Rt];K.feature.updateCoordinate(K.selectedCoordPaths[Rt],Jt[0]+zt.lng,Jt[1]+zt.lat)}},clickNoTarget:function(){this.changeMode(k.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(k.SIMPLE_SELECT)},clickActiveFeature:function(K){K.selectedCoordPaths=[],this.clearSelectedCoordinates(),K.feature.changed()},onSetup:function(K){var pe=K.featureId,Ye=this.getFeature(pe);if(!Ye)throw new Error("You must provide a featureId to enter direct_select mode");if(Ye.type===I.POINT)throw new TypeError("direct_select mode doesn't handle point features");var St={featureId:pe,feature:Ye,dragMoveLocation:K.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:K.coordPath?[K.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(pe,St.selectedCoordPaths)),this.setSelected(pe),Bt.disable(this),this.setActionableState({trash:!0}),St},onStop:function(){Bt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(K,pe,Ye){K.featureId===pe.properties.id?(pe.properties.active=D.ACTIVE,Ye(pe),Yt(pe,{map:this.map,midpoints:!0,selectedPaths:K.selectedCoordPaths}).forEach(Ye)):(pe.properties.active=D.INACTIVE,Ye(pe)),this.fireActionable(K)},onTrash:function(K){K.selectedCoordPaths.sort((function(pe,Ye){return Ye.localeCompare(pe,"en",{numeric:!0})})).forEach((function(pe){return K.feature.removeCoordinate(pe)})),this.fireUpdate(),K.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(K),K.feature.isValid()===!1&&(this.deleteFeature([K.featureId]),this.changeMode(k.SIMPLE_SELECT,{}))},onMouseMove:function(K,pe){var Ye=lr(pe),St=Ys(pe),zt=_o(pe),Rt=K.selectedCoordPaths.length===0;return Ye&&Rt||St&&!Rt?this.updateUIClasses({mouse:b.MOVE}):this.updateUIClasses({mouse:b.NONE}),(St||Ye||zt)&&K.dragMoving&&this.fireUpdate(),this.stopDragging(K),!0},onMouseOut:function(K){return K.dragMoving&&this.fireUpdate(),!0}};fi.onTouchStart=fi.onMouseDown=function(K,pe){return Ys(pe)?this.onVertex(K,pe):lr(pe)?this.onFeature(K,pe):_o(pe)?this.onMidpoint(K,pe):void 0},fi.onDrag=function(K,pe){if(K.canDragMove===!0){K.dragMoving=!0,pe.originalEvent.stopPropagation();var Ye={lng:pe.lngLat.lng-K.dragMoveLocation.lng,lat:pe.lngLat.lat-K.dragMoveLocation.lat};K.selectedCoordPaths.length>0?this.dragVertex(K,pe,Ye):this.dragFeature(K,pe,Ye),K.dragMoveLocation=pe.lngLat}},fi.onClick=function(K,pe){return ar(pe)?this.clickNoTarget(K,pe):lr(pe)?this.clickActiveFeature(K,pe):Pr(pe)?this.clickInactive(K,pe):void this.stopDragging(K)},fi.onTap=function(K,pe){return ar(pe)?this.clickNoTarget(K,pe):lr(pe)?this.clickActiveFeature(K,pe):Pr(pe)?this.clickInactive(K,pe):void 0},fi.onTouchEnd=fi.onMouseUp=function(K){K.dragMoving&&this.fireUpdate(),this.stopDragging(K)};var io={};function ps(K,pe){return!!K.lngLat&&K.lngLat.lng===pe[0]&&K.lngLat.lat===pe[1]}io.onSetup=function(){var K=this.newFeature({type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:[]}});return this.addFeature(K),this.clearSelectedFeatures(),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(S.POINT),this.setActionableState({trash:!0}),{point:K}},io.stopDrawingAndRemove=function(K){this.deleteFeature([K.point.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)},io.onTap=io.onClick=function(K,pe){this.updateUIClasses({mouse:b.MOVE}),K.point.updateCoordinate("",pe.lngLat.lng,pe.lngLat.lat),this.map.fire(M.CREATE,{features:[K.point.toGeoJSON()]}),this.changeMode(k.SIMPLE_SELECT,{featureIds:[K.point.id]})},io.onStop=function(K){this.activateUIButton(),K.point.getCoordinate().length||this.deleteFeature([K.point.id],{silent:!0})},io.toDisplayFeatures=function(K,pe,Ye){var St=pe.properties.id===K.point.id;if(pe.properties.active=St?D.ACTIVE:D.INACTIVE,!St)return Ye(pe)},io.onTrash=io.stopDrawingAndRemove,io.onKeyUp=function(K,pe){if(Ct(pe)||Re(pe))return this.stopDrawingAndRemove(K,pe)};var ho={onSetup:function(){var K=this.newFeature({type:I.FEATURE,properties:{},geometry:{type:I.POLYGON,coordinates:[[]]}});return this.addFeature(K),this.clearSelectedFeatures(),Bt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(S.POLYGON),this.setActionableState({trash:!0}),{polygon:K,currentVertexPosition:0}},clickAnywhere:function(K,pe){if(K.currentVertexPosition>0&&ps(pe,K.polygon.coordinates[0][K.currentVertexPosition-1]))return this.changeMode(k.SIMPLE_SELECT,{featureIds:[K.polygon.id]});this.updateUIClasses({mouse:b.ADD}),K.polygon.updateCoordinate("0."+K.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),K.currentVertexPosition++,K.polygon.updateCoordinate("0."+K.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat)},clickOnVertex:function(K){return this.changeMode(k.SIMPLE_SELECT,{featureIds:[K.polygon.id]})},onMouseMove:function(K,pe){K.polygon.updateCoordinate("0."+K.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),Qt(pe)&&this.updateUIClasses({mouse:b.POINTER})}};ho.onTap=ho.onClick=function(K,pe){return Qt(pe)?this.clickOnVertex(K,pe):this.clickAnywhere(K,pe)},ho.onKeyUp=function(K,pe){Ct(pe)?(this.deleteFeature([K.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)):Re(pe)&&this.changeMode(k.SIMPLE_SELECT,{featureIds:[K.polygon.id]})},ho.onStop=function(K){this.updateUIClasses({mouse:b.NONE}),Bt.enable(this),this.activateUIButton(),this.getFeature(K.polygon.id)!==void 0&&(K.polygon.removeCoordinate("0."+K.currentVertexPosition),K.polygon.isValid()?this.map.fire(M.CREATE,{features:[K.polygon.toGeoJSON()]}):(this.deleteFeature([K.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT,{},{silent:!0})))},ho.toDisplayFeatures=function(K,pe,Ye){var St=pe.properties.id===K.polygon.id;if(pe.properties.active=St?D.ACTIVE:D.INACTIVE,!St)return Ye(pe);if(pe.geometry.coordinates.length!==0){var zt=pe.geometry.coordinates[0].length;if(!(zt<3)){if(pe.properties.meta=F.FEATURE,Ye(Ot(K.polygon.id,pe.geometry.coordinates[0][0],"0.0",!1)),zt>3){var Rt=pe.geometry.coordinates[0].length-3;Ye(Ot(K.polygon.id,pe.geometry.coordinates[0][Rt],"0."+Rt,!1))}if(zt<=4){var Jt=[[pe.geometry.coordinates[0][0][0],pe.geometry.coordinates[0][0][1]],[pe.geometry.coordinates[0][1][0],pe.geometry.coordinates[0][1][1]]];if(Ye({type:I.FEATURE,properties:pe.properties,geometry:{coordinates:Jt,type:I.LINE_STRING}}),zt===3)return}return Ye(pe)}}},ho.onTrash=function(K){this.deleteFeature([K.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)};var Ga={onSetup:function(K){var pe,Ye,St=(K=K||{}).featureId,zt="forward";if(St){if(!(pe=this.getFeature(St)))throw new Error("Could not find a feature with the provided featureId");var Rt=K.from;if(Rt&&Rt.type==="Feature"&&Rt.geometry&&Rt.geometry.type==="Point"&&(Rt=Rt.geometry),Rt&&Rt.type==="Point"&&Rt.coordinates&&Rt.coordinates.length===2&&(Rt=Rt.coordinates),!Rt||!Array.isArray(Rt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Jt=pe.coordinates.length-1;if(pe.coordinates[Jt][0]===Rt[0]&&pe.coordinates[Jt][1]===Rt[1])Ye=Jt+1,pe.addCoordinate.apply(pe,[Ye].concat(pe.coordinates[Jt]));else{if(pe.coordinates[0][0]!==Rt[0]||pe.coordinates[0][1]!==Rt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");zt="backwards",Ye=0,pe.addCoordinate.apply(pe,[Ye].concat(pe.coordinates[0]))}}else pe=this.newFeature({type:I.FEATURE,properties:{},geometry:{type:I.LINE_STRING,coordinates:[]}}),Ye=0,this.addFeature(pe);return this.clearSelectedFeatures(),Bt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(S.LINE),this.setActionableState({trash:!0}),{line:pe,currentVertexPosition:Ye,direction:zt}},clickAnywhere:function(K,pe){if(K.currentVertexPosition>0&&ps(pe,K.line.coordinates[K.currentVertexPosition-1])||K.direction==="backwards"&&ps(pe,K.line.coordinates[K.currentVertexPosition+1]))return this.changeMode(k.SIMPLE_SELECT,{featureIds:[K.line.id]});this.updateUIClasses({mouse:b.ADD}),K.line.updateCoordinate(K.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),K.direction==="forward"?(K.currentVertexPosition++,K.line.updateCoordinate(K.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat)):K.line.addCoordinate(0,pe.lngLat.lng,pe.lngLat.lat)},clickOnVertex:function(K){return this.changeMode(k.SIMPLE_SELECT,{featureIds:[K.line.id]})},onMouseMove:function(K,pe){K.line.updateCoordinate(K.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),Qt(pe)&&this.updateUIClasses({mouse:b.POINTER})}};Ga.onTap=Ga.onClick=function(K,pe){if(Qt(pe))return this.clickOnVertex(K,pe);this.clickAnywhere(K,pe)},Ga.onKeyUp=function(K,pe){Re(pe)?this.changeMode(k.SIMPLE_SELECT,{featureIds:[K.line.id]}):Ct(pe)&&(this.deleteFeature([K.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT))},Ga.onStop=function(K){Bt.enable(this),this.activateUIButton(),this.getFeature(K.line.id)!==void 0&&(K.line.removeCoordinate(""+K.currentVertexPosition),K.line.isValid()?this.map.fire(M.CREATE,{features:[K.line.toGeoJSON()]}):(this.deleteFeature([K.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT,{},{silent:!0})))},Ga.onTrash=function(K){this.deleteFeature([K.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)},Ga.toDisplayFeatures=function(K,pe,Ye){var St=pe.properties.id===K.line.id;if(pe.properties.active=St?D.ACTIVE:D.INACTIVE,!St)return Ye(pe);pe.geometry.coordinates.length<2||(pe.properties.meta=F.FEATURE,Ye(Ot(K.line.id,pe.geometry.coordinates[K.direction==="forward"?pe.geometry.coordinates.length-2:1],""+(K.direction==="forward"?pe.geometry.coordinates.length-2:1),!1)),Ye(pe))};var Zs={simple_select:bi,direct_select:fi,draw_point:io,draw_polygon:ho,draw_line_string:Ga},Da={defaultMode:k.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Cr,modes:Zs,controls:{},userProperties:!1},Qu={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Au={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ko(K,pe){return K.map((function(Ye){return Ye.source?Ye:dr(Ye,{id:Ye.id+"."+pe,source:pe==="hot"?x.HOT:x.COLD})}))}var ms={exports:{}};(function(K,pe){var Ye="__lodash_hash_undefined__",St=9007199254740991,zt="[object Arguments]",Rt="[object Array]",Jt="[object Boolean]",jr="[object Date]",Kr="[object Error]",Wr="[object Function]",nn="[object Map]",Yr="[object Number]",Bn="[object Object]",gn="[object Promise]",Rn="[object RegExp]",Tn="[object Set]",Or="[object String]",fn="[object Symbol]",ti="[object WeakMap]",Ci="[object ArrayBuffer]",hi="[object DataView]",Li=/^\[object .+?Constructor\]$/,Ii=/^(?:0|[1-9]\d*)$/,_n={};_n["[object Float32Array]"]=_n["[object Float64Array]"]=_n["[object Int8Array]"]=_n["[object Int16Array]"]=_n["[object Int32Array]"]=_n["[object Uint8Array]"]=_n["[object Uint8ClampedArray]"]=_n["[object Uint16Array]"]=_n["[object Uint32Array]"]=!0,_n[zt]=_n[Rt]=_n[Ci]=_n[Jt]=_n[hi]=_n[jr]=_n[Kr]=_n[Wr]=_n[nn]=_n[Yr]=_n[Bn]=_n[Rn]=_n[Tn]=_n[Or]=_n[ti]=!1;var ka=typeof Ch=="object"&&Ch&&Ch.Object===Object&&Ch,Zn=typeof self=="object"&&self&&self.Object===Object&&self,On=ka||Zn||Function("return this")(),ts=pe&&!pe.nodeType&&pe,bn=ts&&K&&!K.nodeType&&K,Js=bn&&bn.exports===ts,wa=Js&&ka.process,Ps=(function(){try{return wa&&wa.binding&&wa.binding("util")}catch{}})(),Ha=Ps&&Ps.isTypedArray;function Il(er,sr){for(var ln=-1,yn=er==null?0:er.length;++ln<yn;)if(sr(er[ln],ln,er))return!0;return!1}function zo(er){var sr=-1,ln=Array(er.size);return er.forEach((function(yn,ui){ln[++sr]=[ui,yn]})),ln}function jo(er){var sr=-1,ln=Array(er.size);return er.forEach((function(yn){ln[++sr]=yn})),ln}var cl,Is,Oa,Wa=Array.prototype,Yi=Function.prototype,Sa=Object.prototype,se=On["__core-js_shared__"],Ge=Yi.toString,pt=Sa.hasOwnProperty,jt=(cl=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||""))?"Symbol(src)_1."+cl:"",or=Sa.toString,Nr=RegExp("^"+Ge.call(pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xr=Js?On.Buffer:void 0,xn=On.Symbol,Ln=On.Uint8Array,ni=Sa.propertyIsEnumerable,mi=Wa.splice,ri=xn?xn.toStringTag:void 0,Ri=Object.getOwnPropertySymbols,pi=Xr?Xr.isBuffer:void 0,yi=(Is=Object.keys,Oa=Object,function(er){return Is(Oa(er))}),ma=Xa(On,"DataView"),Ji=Xa(On,"Map"),sa=Xa(On,"Promise"),rs=Xa(On,"Set"),ks=Xa(On,"WeakMap"),Xl=Xa(Object,"create"),ns=xo(ma),Yl=xo(Ji),la=xo(sa),As=xo(rs),kl=xo(ks),is=xn?xn.prototype:void 0,Ca=is?is.valueOf:void 0;function oo(er){var sr=-1,ln=er==null?0:er.length;for(this.clear();++sr<ln;){var yn=er[sr];this.set(yn[0],yn[1])}}function Qi(er){var sr=-1,ln=er==null?0:er.length;for(this.clear();++sr<ln;){var yn=er[sr];this.set(yn[0],yn[1])}}function Ms(er){var sr=-1,ln=er==null?0:er.length;for(this.clear();++sr<ln;){var yn=er[sr];this.set(yn[0],yn[1])}}function dl(er){var sr=-1,ln=er==null?0:er.length;for(this.__data__=new Ms;++sr<ln;)this.add(er[sr])}function ua(er){var sr=this.__data__=new Qi(er);this.size=sr.size}function Zl(er,sr){var ln=Rs(er),yn=!ln&&ga(er),ui=!ln&&!yn&&Ds(er),Sn=!ln&&!yn&&!ui&&Ml(er),T=ln||yn||ui||Sn,m=T?(function(j,re){for(var ye=-1,Ae=Array(j);++ye<j;)Ae[ye]=re(ye);return Ae})(er.length,String):[],y=m.length;for(var P in er)!pt.call(er,P)||T&&(P=="length"||ui&&(P=="offset"||P=="parent")||Sn&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||ml(P,y))||m.push(P);return m}function fl(er,sr){for(var ln=er.length;ln--;)if(Qs(er[ln][0],sr))return ln;return-1}function Ls(er){return er==null?er===void 0?"[object Undefined]":"[object Null]":ri&&ri in Object(er)?(function(sr){var ln=pt.call(sr,ri),yn=sr[ri];try{sr[ri]=void 0;var ui=!0}catch{}var Sn=or.call(sr);return ui&&(ln?sr[ri]=yn:delete sr[ri]),Sn})(er):(function(sr){return or.call(sr)})(er)}function Fa(er){return Ns(er)&&Ls(er)==zt}function po(er,sr,ln,yn,ui){return er===sr||(er==null||sr==null||!Ns(er)&&!Ns(sr)?er!=er&&sr!=sr:(function(Sn,T,m,y,P,j){var re=Rs(Sn),ye=Rs(T),Ae=re?Rt:lo(Sn),Ke=ye?Rt:lo(T),gt=(Ae=Ae==zt?Bn:Ae)==Bn,rr=(Ke=Ke==zt?Bn:Ke)==Bn,fr=Ae==Ke;if(fr&&Ds(Sn)){if(!Ds(T))return!1;re=!0,gt=!1}if(fr&&!gt)return j||(j=new ua),re||Ml(Sn)?hl(Sn,T,m,y,P,j):(function(An,In,ki,xi,Ya,Za,Ao){switch(ki){case hi:if(An.byteLength!=In.byteLength||An.byteOffset!=In.byteOffset)return!1;An=An.buffer,In=In.buffer;case Ci:return!(An.byteLength!=In.byteLength||!Za(new Ln(An),new Ln(In)));case Jt:case jr:case Yr:return Qs(+An,+In);case Kr:return An.name==In.name&&An.message==In.message;case Rn:case Or:return An==In+"";case nn:var Mo=zo;case Tn:var gl=1&xi;if(Mo||(Mo=jo),An.size!=In.size&&!gl)return!1;var Ll=Ao.get(An);if(Ll)return Ll==In;xi|=2,Ao.set(An,In);var Os=hl(Mo(An),Mo(In),xi,Ya,Za,Ao);return Ao.delete(An),Os;case fn:if(Ca)return Ca.call(An)==Ca.call(In)}return!1})(Sn,T,Ae,m,y,P,j);if(!(1&m)){var zr=gt&&pt.call(Sn,"__wrapped__"),hn=rr&&pt.call(T,"__wrapped__");if(zr||hn){var Mn=zr?Sn.value():Sn,$n=hn?T.value():T;return j||(j=new ua),P(Mn,$n,m,y,j)}}return fr?(j||(j=new ua),(function(An,In,ki,xi,Ya,Za){var Ao=1&ki,Mo=pl(An),gl=Mo.length,Ll=pl(In).length;if(gl!=Ll&&!Ao)return!1;for(var Os=gl;Os--;){var as=Mo[Os];if(!(Ao?as in In:pt.call(In,as)))return!1}var Ru=Za.get(An);if(Ru&&Za.get(In))return Ru==In;var os=!0;Za.set(An,In),Za.set(In,An);for(var Aa=Ao;++Os<gl;){var $o=An[as=Mo[Os]],yu=In[as];if(xi)var gi=Ao?xi(yu,$o,as,In,An,Za):xi($o,yu,as,An,In,Za);if(!(gi===void 0?$o===yu||Ya($o,yu,ki,xi,Za):gi)){os=!1;break}Aa||(Aa=as=="constructor")}if(os&&!Aa){var Rl=An.constructor,Du=In.constructor;Rl==Du||!("constructor"in An)||!("constructor"in In)||typeof Rl=="function"&&Rl instanceof Rl&&typeof Du=="function"&&Du instanceof Du||(os=!1)}return Za.delete(An),Za.delete(In),os})(Sn,T,m,y,P,j)):!1})(er,sr,ln,yn,po,ui))}function Mu(er){return!(!gu(er)||(function(sr){return!!jt&&jt in sr})(er))&&(qo(er)?Nr:Li).test(xo(er))}function Lu(er){if(ln=(sr=er)&&sr.constructor,yn=typeof ln=="function"&&ln.prototype||Sa,sr!==yn)return yi(er);var sr,ln,yn,ui=[];for(var Sn in Object(er))pt.call(er,Sn)&&Sn!="constructor"&&ui.push(Sn);return ui}function hl(er,sr,ln,yn,ui,Sn){var T=1&ln,m=er.length,y=sr.length;if(m!=y&&!(T&&y>m))return!1;var P=Sn.get(er);if(P&&Sn.get(sr))return P==sr;var j=-1,re=!0,ye=2&ln?new dl:void 0;for(Sn.set(er,sr),Sn.set(sr,er);++j<m;){var Ae=er[j],Ke=sr[j];if(yn)var gt=T?yn(Ke,Ae,j,sr,er,Sn):yn(Ae,Ke,j,er,sr,Sn);if(gt!==void 0){if(gt)continue;re=!1;break}if(ye){if(!Il(sr,(function(rr,fr){if(zr=fr,!ye.has(zr)&&(Ae===rr||ui(Ae,rr,ln,yn,Sn)))return ye.push(fr);var zr}))){re=!1;break}}else if(Ae!==Ke&&!ui(Ae,Ke,ln,yn,Sn)){re=!1;break}}return Sn.delete(er),Sn.delete(sr),re}function pl(er){return(function(sr,ln,yn){var ui=ln(sr);return Rs(sr)?ui:(function(Sn,T){for(var m=-1,y=T.length,P=Sn.length;++m<y;)Sn[P+m]=T[m];return Sn})(ui,yn(sr))})(er,Jl,Kl)}function so(er,sr){var ln,yn,ui=er.__data__;return((yn=typeof(ln=sr))=="string"||yn=="number"||yn=="symbol"||yn=="boolean"?ln!=="__proto__":ln===null)?ui[typeof sr=="string"?"string":"hash"]:ui.map}function Xa(er,sr){var ln=(function(yn,ui){return yn?.[ui]})(er,sr);return Mu(ln)?ln:void 0}oo.prototype.clear=function(){this.__data__=Xl?Xl(null):{},this.size=0},oo.prototype.delete=function(er){var sr=this.has(er)&&delete this.__data__[er];return this.size-=sr?1:0,sr},oo.prototype.get=function(er){var sr=this.__data__;if(Xl){var ln=sr[er];return ln===Ye?void 0:ln}return pt.call(sr,er)?sr[er]:void 0},oo.prototype.has=function(er){var sr=this.__data__;return Xl?sr[er]!==void 0:pt.call(sr,er)},oo.prototype.set=function(er,sr){var ln=this.__data__;return this.size+=this.has(er)?0:1,ln[er]=Xl&&sr===void 0?Ye:sr,this},Qi.prototype.clear=function(){this.__data__=[],this.size=0},Qi.prototype.delete=function(er){var sr=this.__data__,ln=fl(sr,er);return!(ln<0)&&(ln==sr.length-1?sr.pop():mi.call(sr,ln,1),--this.size,!0)},Qi.prototype.get=function(er){var sr=this.__data__,ln=fl(sr,er);return ln<0?void 0:sr[ln][1]},Qi.prototype.has=function(er){return fl(this.__data__,er)>-1},Qi.prototype.set=function(er,sr){var ln=this.__data__,yn=fl(ln,er);return yn<0?(++this.size,ln.push([er,sr])):ln[yn][1]=sr,this},Ms.prototype.clear=function(){this.size=0,this.__data__={hash:new oo,map:new(Ji||Qi),string:new oo}},Ms.prototype.delete=function(er){var sr=so(this,er).delete(er);return this.size-=sr?1:0,sr},Ms.prototype.get=function(er){return so(this,er).get(er)},Ms.prototype.has=function(er){return so(this,er).has(er)},Ms.prototype.set=function(er,sr){var ln=so(this,er),yn=ln.size;return ln.set(er,sr),this.size+=ln.size==yn?0:1,this},dl.prototype.add=dl.prototype.push=function(er){return this.__data__.set(er,Ye),this},dl.prototype.has=function(er){return this.__data__.has(er)},ua.prototype.clear=function(){this.__data__=new Qi,this.size=0},ua.prototype.delete=function(er){var sr=this.__data__,ln=sr.delete(er);return this.size=sr.size,ln},ua.prototype.get=function(er){return this.__data__.get(er)},ua.prototype.has=function(er){return this.__data__.has(er)},ua.prototype.set=function(er,sr){var ln=this.__data__;if(ln instanceof Qi){var yn=ln.__data__;if(!Ji||yn.length<199)return yn.push([er,sr]),this.size=++ln.size,this;ln=this.__data__=new Ms(yn)}return ln.set(er,sr),this.size=ln.size,this};var Kl=Ri?function(er){return er==null?[]:(er=Object(er),(function(sr,ln){for(var yn=-1,ui=sr==null?0:sr.length,Sn=0,T=[];++yn<ui;){var m=sr[yn];ln(m,yn,sr)&&(T[Sn++]=m)}return T})(Ri(er),(function(sr){return ni.call(er,sr)})))}:function(){return[]},lo=Ls;function ml(er,sr){return!!(sr=sr??St)&&(typeof er=="number"||Ii.test(er))&&er>-1&&er%1==0&&er<sr}function xo(er){if(er!=null){try{return Ge.call(er)}catch{}try{return er+""}catch{}}return""}function Qs(er,sr){return er===sr||er!=er&&sr!=sr}(ma&&lo(new ma(new ArrayBuffer(1)))!=hi||Ji&&lo(new Ji)!=nn||sa&&lo(sa.resolve())!=gn||rs&&lo(new rs)!=Tn||ks&&lo(new ks)!=ti)&&(lo=function(er){var sr=Ls(er),ln=sr==Bn?er.constructor:void 0,yn=ln?xo(ln):"";if(yn)switch(yn){case ns:return hi;case Yl:return nn;case la:return gn;case As:return Tn;case kl:return ti}return sr});var ga=Fa((function(){return arguments})())?Fa:function(er){return Ns(er)&&pt.call(er,"callee")&&!ni.call(er,"callee")},Rs=Array.isArray,Ds=pi||function(){return!1};function qo(er){if(!gu(er))return!1;var sr=Ls(er);return sr==Wr||sr=="[object GeneratorFunction]"||sr=="[object AsyncFunction]"||sr=="[object Proxy]"}function Al(er){return typeof er=="number"&&er>-1&&er%1==0&&er<=St}function gu(er){var sr=typeof er;return er!=null&&(sr=="object"||sr=="function")}function Ns(er){return er!=null&&typeof er=="object"}var Ml=Ha?(function(er){return function(sr){return er(sr)}})(Ha):function(er){return Ns(er)&&Al(er.length)&&!!_n[Ls(er)]};function Jl(er){return(sr=er)!=null&&Al(sr.length)&&!qo(sr)?Zl(er):Lu(er);var sr}K.exports=function(er,sr){return po(er,sr)}})(ms,ms.exports);var Na=n(ms.exports);function ao(K,pe){return K.length===pe.length&&JSON.stringify(K.map((function(Ye){return Ye})).sort())===JSON.stringify(pe.map((function(Ye){return Ye})).sort())}var Ia={Polygon:Le,LineString:Me,Point:be,MultiPolygon:tt,MultiLineString:tt,MultiPoint:tt},Ks=Object.freeze({__proto__:null,CommonSelectors:Be,constrainFeatureMovement:Ra,createMidPoint:Tt,createSupplementaryPoints:Yt,createVertex:Ot,doubleClickZoom:Bt,euclideanDistance:ke,featuresAt:ae,getFeatureAtAndSetCursors:fe,isClick:me,isEventAtCoordinates:ps,isTap:Se,mapEventToBoundingBox:ee,ModeHandler:r,moveFeatures:Ts,sortFeatures:ie,stringSetsAreEqual:ao,StringSet:G,theme:Cr,toDenseArray:ot}),Hl=function(K,pe){var Ye={options:K=(function(zt){zt===void 0&&(zt={});var Rt=dr(zt);return zt.controls||(Rt.controls={}),zt.displayControlsDefault===!1?Rt.controls=dr(Au,zt.controls):Rt.controls=dr(Qu,zt.controls),(Rt=dr(Da,Rt)).styles=ko(Rt.styles,"cold").concat(ko(Rt.styles,"hot")),Rt})(K)};pe=(function(zt,Rt){return Rt.modes=k,Rt.getFeatureIdsAt=function(Jt){return ae.click({point:Jt},null,zt).map((function(jr){return jr.properties.id}))},Rt.getSelectedIds=function(){return zt.store.getSelectedIds()},Rt.getSelected=function(){return{type:I.FEATURE_COLLECTION,features:zt.store.getSelectedIds().map((function(Jt){return zt.store.get(Jt)})).map((function(Jt){return Jt.toGeoJSON()}))}},Rt.getSelectedPoints=function(){return{type:I.FEATURE_COLLECTION,features:zt.store.getSelectedCoordinates().map((function(Jt){return{type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:Jt.coordinates}}}))}},Rt.set=function(Jt){if(Jt.type===void 0||Jt.type!==I.FEATURE_COLLECTION||!Array.isArray(Jt.features))throw new Error("Invalid FeatureCollection");var jr=zt.store.createRenderBatch(),Kr=zt.store.getAllIds().slice(),Wr=Rt.add(Jt),nn=new G(Wr);return(Kr=Kr.filter((function(Yr){return!nn.has(Yr)}))).length&&Rt.delete(Kr),jr(),Wr},Rt.add=function(Jt){var jr=JSON.parse(JSON.stringify(Ir(Jt))).features.map((function(Kr){if(Kr.id=Kr.id||ce(),Kr.geometry===null)throw new Error("Invalid geometry: null");if(zt.store.get(Kr.id)===void 0||zt.store.get(Kr.id).type!==Kr.geometry.type){var Wr=Ia[Kr.geometry.type];if(Wr===void 0)throw new Error("Invalid geometry type: "+Kr.geometry.type+".");var nn=new Wr(zt,Kr);zt.store.add(nn)}else{var Yr=zt.store.get(Kr.id);Yr.properties=Kr.properties,Na(Yr.properties,Kr.properties)||zt.store.featureChanged(Yr.id),Na(Yr.getCoordinates(),Kr.geometry.coordinates)||Yr.incomingCoords(Kr.geometry.coordinates)}return Kr.id}));return zt.store.render(),jr},Rt.get=function(Jt){var jr=zt.store.get(Jt);if(jr)return jr.toGeoJSON()},Rt.getAll=function(){return{type:I.FEATURE_COLLECTION,features:zt.store.getAll().map((function(Jt){return Jt.toGeoJSON()}))}},Rt.delete=function(Jt){return zt.store.delete(Jt,{silent:!0}),Rt.getMode()!==k.DIRECT_SELECT||zt.store.getSelectedIds().length?zt.store.render():zt.events.changeMode(k.SIMPLE_SELECT,void 0,{silent:!0}),Rt},Rt.deleteAll=function(){return zt.store.delete(zt.store.getAllIds(),{silent:!0}),Rt.getMode()===k.DIRECT_SELECT?zt.events.changeMode(k.SIMPLE_SELECT,void 0,{silent:!0}):zt.store.render(),Rt},Rt.changeMode=function(Jt,jr){return jr===void 0&&(jr={}),Jt===k.SIMPLE_SELECT&&Rt.getMode()===k.SIMPLE_SELECT?(ao(jr.featureIds||[],zt.store.getSelectedIds())||(zt.store.setSelected(jr.featureIds,{silent:!0}),zt.store.render()),Rt):(Jt===k.DIRECT_SELECT&&Rt.getMode()===k.DIRECT_SELECT&&jr.featureId===zt.store.getSelectedIds()[0]||zt.events.changeMode(Jt,jr,{silent:!0}),Rt)},Rt.getMode=function(){return zt.events.getMode()},Rt.trash=function(){return zt.events.trash({silent:!0}),Rt},Rt.combineFeatures=function(){return zt.events.combineFeatures({silent:!0}),Rt},Rt.uncombineFeatures=function(){return zt.events.uncombineFeatures({silent:!0}),Rt},Rt.setFeatureProperty=function(Jt,jr,Kr){return zt.store.setFeatureProperty(Jt,jr,Kr),Rt},Rt})(Ye,pe),Ye.api=pe;var St=ur(Ye);return pe.onAdd=St.onAdd,pe.onRemove=St.onRemove,pe.types=S,pe.options=K,pe};function Wl(K){Hl(K,this)}return Wl.modes=Zs,Wl.constants=U,Wl.lib=Ks,Wl}))})(x_)),x_.exports}var Ghe=Uhe();const _O=tf(Ghe);function Hhe(){const e=l1(r=>r.breakpoints.down("md"));return[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.3}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":3}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":4}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":e?5:4,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?7:5,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?10:9,"circle-opacity":1,"circle-color":"#009EE0"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?7.5:6.5,"circle-color":"#009EE0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":e?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":e?8.5:7.5,"circle-color":"#009EE0"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":e?8.5:6.5,"circle-color":"#404040"}}]}const n3=e=>{const t=J.useRef(null),r=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=J.useRef(!1),[i,o]=J.useState(!1),[l,a]=J.useState(),c=Hhe(),h=J.useCallback(g=>{console.log("MlFeatureEditor mode change to "+g.mode),typeof e.onFinish=="function"&&g.mode==="simple_select"&&e.onFinish()},[e.onFinish]);return J.useEffect(()=>{r.map&&!n.current&&(n.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&t.current&&t.current?.remove(),t.current=new _O({displayControlsDefault:!1,defaultMode:e.mode||"simple_select",modes:Object.assign({},_O.modes),userProperties:!0,styles:c}),r.map.addControl(t.current,"top-left",r.componentId),r.map.on("draw.modechange",h,r.componentId),o(!0))},[r.map,e,n,h]),J.useEffect(()=>{if(!r.map||!i)return;const g=()=>{if(t.current){const v=t.current.getAll?.();a(v?.features),typeof e.onChange=="function"&&e.onChange(v?.features)}};return r.map.on("mouseup",g),r.map.on("touchend",g),()=>{r.map&&(r.map.map.off("mouseup",g),r.map.map.off("touchend",g))}},[i,r.map]),J.useEffect(()=>{t.current&&e.geojson?.geometry&&t.current.set({type:"FeatureCollection",features:[e.geojson]})},[e.geojson,i]),J.useEffect(()=>{e.mode&&t.current&&t.current?.getMode?.()!==e.mode&&(t.current?.changeMode?.(e.mode),e.mode!=="simple_select"&&e.mode!=="direct_select"&&t.current.set({type:"FeatureCollection",features:[]}))},[e.mode,r.map]),{feature:l,drawToolsReady:i,draw:t.current}};try{n3.displayName="useFeatureEditor",n3.__docgenInfo={description:"GeoJson Feature editor that allows to create or manipulate GeoJson data",displayName:"useFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | undefined"}},onChange:{defaultValue:null,description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((para: Feature<Geometry, GeoJsonProperties>[]) => void) | undefined"}},onFinish:{defaultValue:null,description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`,name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}}}catch{}const cx=e=>(n3({mode:e.mode,geojson:e.geojson,onChange:e.onChange,onFinish:e.onFinish,mapId:e.mapId}),Z.jsx(Z.Fragment,{}));try{cx.displayName="MlFeatureEditor",cx.__docgenInfo={description:"",displayName:"MlFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | undefined"}},onChange:{defaultValue:null,description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((para: Feature<Geometry, GeoJsonProperties>[]) => void) | undefined"}},onFinish:{defaultValue:null,description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`,name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}}}catch{}const i3=e=>(Vf({mapId:e.mapId,layerId:e.layerId||"MlFillExtrusionLayer-"+Vu(),options:{id:"",type:"fill-extrusion",source:e.sourceId||"openmaptiles","source-layer":e.sourceLayer||"building",minzoom:e.minZoom||6,paint:{...e.paint}},insertBeforeFirstSymbolLayer:!0}),Z.jsx(Z.Fragment,{}));i3.defaultProps={mapId:void 0,paint:{"fill-extrusion-color":"hsl(196, 61%, 83%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":1}};try{i3.displayName="MlFillExtrusionLayer",i3.__docgenInfo={description:"Adds a fill extrusion layer to the MapLibre instance reference by props.mapId",displayName:"MlFillExtrusionLayer",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component",name:"layerId",required:!1,type:{name:"string | undefined"}},paint:{defaultValue:{value:`{
		'fill-extrusion-color': 'hsl(196, 61%, 83%)',
		'fill-extrusion-height': {
			property: 'render_height',
			type: 'identity',
		},
		'fill-extrusion-base': {
			property: 'render_min_height',
			type: 'identity',
		},
		'fill-extrusion-opacity': 1,
	}`},description:`Paint properties of the config object that is passed to the MapLibreGl.addLayer call. All
available properties are documented in the MapLibreGl documentation
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill-extrusion`,name:"paint",required:!1,type:{name:"object | undefined"}},sourceId:{defaultValue:null,description:`Source id of a vector tile source containing the geometries to use for this fill-extrusion
layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer`,name:"sourceId",required:!1,type:{name:"string | undefined"}},sourceLayer:{defaultValue:null,description:`Layer id from a vector tile source containing the geometries to use for this fill-extrusion
layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer`,name:"sourceLayer",required:!1,type:{name:"string | undefined"}},minZoom:{defaultValue:null,description:`This layer will be hidden for zoom levels lower than defined on this property
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#minzoom`,name:"minZoom",required:!1,type:{name:"number | undefined"}}}}}catch{}const HI=Ei(Z.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"})),a3=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=J.useState(!1),[i,o]=J.useState(),[l,a]=J.useState(!1),[c,h]=J.useState(),[g,v]=J.useState(0),x=J.useRef(!1),b=J.useCallback(M=>{if(!t.map||((!e.centerUserPosition&&!x.current||e.centerUserPosition)&&(e.useFlyTo?t.map.map.flyTo({center:[M.coords.longitude,M.coords.latitude],zoom:18,speed:1,curve:1}):t.map.map.setCenter([M.coords.longitude,M.coords.latitude]),x.current=!0),e.showUserLocation!==void 0&&!e.showUserLocation))return;const O=$c([M.coords.longitude,M.coords.latitude]);o(O),h(N$(O,M.coords.accuracy/1e3))},[t.map,e]),S=()=>{console.log("Access of user location denied"),a(!0)},I=J.useMemo(()=>{if(!i)return;const M=.02,O=g-15,F=g+15,z=Ihe(i,M,O,F,{steps:65});return z.geometry.coordinates.push(i.geometry.coordinates),z.geometry.coordinates.slice(0,0),z},[g,i]),k=M=>{M?.alpha&&v(-M.alpha)};return J.useEffect(()=>{if(r){const M=k;return window.addEventListener("deviceorientation",M),()=>{window.removeEventListener("deviceorientation",M)}}else x.current=!1},[r]),J.useEffect(()=>{if(t.map&&r){const M=navigator.geolocation.watchPosition(b,S);return()=>{navigator.geolocation.clearWatch(M)}}},[t.map,r,b]),J.useEffect(()=>{if(c?.type){const M=t.map?.getBounds(),O=[M?._ne.lng,M?._ne.lat,M?._sw.lng,M?._sw.lat],F=vc(c);vfe(jN(O),jN(F))||t.map?.fitBounds(F,{padding:{top:25,bottom:25}})}},[c]),Z.jsxs(Z.Fragment,{children:[r&&i&&Z.jsx(Uu,{geojson:c,type:"fill",paint:{"fill-color":"#cbd300","fill-opacity":.3,...e.accuracyPaint},insertBeforeLayer:e.insertBeforeLayer}),r&&I&&Z.jsx(Uu,{geojson:I,type:"fill",paint:{"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3,...e.orientationConePaint},insertBeforeLayer:e.insertBeforeLayer}),r&&i&&Z.jsx(Uu,{geojson:i,type:"circle",paint:{"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1,...e.circlePaint},insertBeforeLayer:e.insertBeforeLayer}),Z.jsx(Ui,{variant:"navtools","data-testid":"mlFollowGpsBtn",sx:{zIndex:1002,color:r?M=>M.palette.GPS.GPSActiveColor:M=>M.palette.GPS.GPSInactiveColor,backgroundColor:r?M=>M.palette.GPS.GPSActiveBackgroundColor:M=>M.palette.navigation.navColor},disabled:l,onClick:()=>{n(!r)},children:Z.jsx(HI,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})]})};try{a3.displayName="MlFollowGps",a3.__docgenInfo={description:`Adds a button that makes the map follow the users GPS position using
navigator.geolocation.watchPosition if activated`,displayName:"MlFollowGps",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},showUserLocation:{defaultValue:null,description:"By default a dot will be shown on the map at the user's location. Set to false to disable.",name:"showUserLocation",required:!1,type:{name:"boolean | undefined"}},showOrientation:{defaultValue:null,description:`By default a cone will be shown on the map at the user's location to indicate the device's orientation.
Set to false to disable.`,name:"showOrientation",required:!1,type:{name:"boolean | undefined"}},showAccuracyCircle:{defaultValue:null,description:`By default, if showUserLocation is true, a transparent circle will be drawn around the user location
indicating the accuracy (95% confidence level) of the user's location. Set to false to disable.`,name:"showAccuracyCircle",required:!1,type:{name:"boolean | undefined"}},useFlyTo:{defaultValue:null,description:`Use the MapLibre.flyTo function to center the map to the current users position if true.
Otherwise the MapLibre.setCenter function is used.`,name:"useFlyTo",required:!1,type:{name:"boolean | undefined"}},centerUserPosition:{defaultValue:null,description:`Center map to current position once updated location data is recieved.
"false" will center the map once on component activation and then display the updated user location on the map.`,name:"centerUserPosition",required:!1,type:{name:"boolean | undefined"}},orientationConePaint:{defaultValue:null,description:`Orientation cone paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the orientation cone polygon.
Use any available paint prop from layer type "fill".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"orientationConePaint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined'}},circlePaint:{defaultValue:null,description:`Position circle paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the position circle.
Use any available paint prop from layer type "circle".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle`,name:"circlePaint",required:!1,type:{name:'{ "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-color"?: DataDrivenPropertyValueSpecification<string> | undefined; ... 8 more ...; "circle-stroke-opacity"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined'}},onColor:{defaultValue:null,description:"Active button font color",name:"onColor",required:!1,type:{name:"string | undefined"}},offColor:{defaultValue:null,description:"Inactive button font color",name:"offColor",required:!1,type:{name:"string | undefined"}},accuracyPaint:{defaultValue:null,description:`Accuracy paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the accuracy polygon.
Use any available paint prop from layer type "fill".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"accuracyPaint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined'}}}}}catch{}const xO=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=J.useState(),i=J.useRef(e.imageId||"img_"+Vu()),o=J.useRef(e.layerId||"MlImageMarkerLayer-"+t.componentId);Vf({geojson:e.options?.source?.data,layerId:o.current,options:{type:"symbol",layout:{...e.options?.layout,"icon-image":r||i.current},paint:{...e.options?.paint}}});const l=(a,c)=>{a.map&&c.imgSrc&&!a.map.map.hasImage(i.current)&&a.map.map.loadImage(c.imgSrc).then(function(h){if(!h?.data){console.log("image "+c.imgSrc+"could not be loaded");return}!a.map||a.map.map.hasImage(i.current)||(a.map.addImage(i.current,h.data,a.componentId),n(i.current))})};return J.useEffect(()=>{t.map&&e.imgSrc&&l(t,e)},[e,t]),Z.jsx(Z.Fragment,{})};try{xO.displayName="MlImageMarkerLayer",xO.__docgenInfo={description:"",displayName:"MlImageMarkerLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},imageId:{defaultValue:null,description:"Id of the image that will be added by this component to the maplibre-gl instance",name:"imageId",required:!1,type:{name:"string | undefined"}},imgSrc:{defaultValue:null,description:"Path or URL to a supported raster image",name:"imgSrc",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"{ source?: { type?: string | undefined; data: Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined; } | undefined; layout?: { ...; } | undefined; paint?: { ...; } | undefined; } | undefined"}}}}}catch{}function Whe(e){switch(e){case"meters":return 1;case"millimeters":return 1e3;case"centimeters":return 100;case"kilometers":return .001;case"miles":return 1/1609.344;case"nauticalmiles":return 1/1852;case"inches":return 39.3701;case"yards":return 1.09361;case"feet":return 3.28084;default:return 1}}function wO(e){switch(e){case"miles":return"mi";case"acres":return"ac";case"kilometers":return"km";case"meters":return"m";case"millimeters":return"mm";case"centimeters":return"cm";case"nauticalmiles":return"nm";case"inches":return"in";case"yards":return"yd";case"feet":return"ft";case"hectares":return"ha";default:return"m"}}const o3=e=>{const[t,r]=J.useState({value:0,label:""}),[n,i]=J.useState([]);return J.useEffect(()=>{if(n[0]){let o=0;if(e.measureType==="polygon"){if(o=afe(n[0]),e.unit){const l=e.unit;l==="acres"?o=o/4046.8564224:l==="hectares"?o=o/1e4:o=o*Whe(e.unit)**2}}else o=N0(n[0],{units:e.unit});typeof e.onChange=="function"&&e.onChange({value:o,unit:e.unit,geojson:n[0]}),o>=.1&&r({value:o,label:wO(e.unit)})}},[e.unit,n]),Z.jsxs(Z.Fragment,{children:[Z.jsx(cx,{onChange:o=>{o&&i(o)},mode:e.measureType==="polygon"?"draw_polygon":"draw_line_string",onFinish:e.onFinish}),t.value.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})," ",wO(e.unit),t.label&&e.measureType==="polygon"&&!["hectares","acres"].includes(e.unit||"")?" ":""]})};try{o3.displayName="MlMeasureTool",o3.__docgenInfo={description:"",displayName:"MlMeasureTool",props:{measureType:{defaultValue:null,description:'String that specify if the Tool measures an area ("polygon") or length ("line")',name:"measureType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"line"'},{value:'"polygon"'}]}},unit:{defaultValue:null,description:"String that dictates which unit of measurement is used",name:"unit",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"meters"'},{value:'"metres"'},{value:'"millimeters"'},{value:'"millimetres"'},{value:'"centimeters"'},{value:'"centimetres"'},{value:'"kilometers"'},{value:'"kilometres"'},{value:'"miles"'},{value:'"nauticalmiles"'},{value:'"inches"'},{value:'"yards"'},{value:'"feet"'},{value:'"radians"'},{value:'"degrees"'}]}},onChange:{defaultValue:null,description:`Callback function that is called each time measurment geometry within has changed within MlMeasureTool.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((options: MlMeasureToolOnChangeOptions) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called by the end of drawing geometries.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}const O$=Ei(Z.jsx("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"})),F$=Ei(Z.jsx("path",{d:"m2 9 4 12h12l4-12-10-7z"})),Xhe=Ar(gd)({marginTop:"15px"});function s3(e){return Z.jsx(Xhe,{children:e?.children})}try{s3.displayName="LayerList",s3.__docgenInfo={description:"",displayName:"LayerList",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const v1=Ei(Z.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),WI=Ei(Z.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),B$=Ei(Z.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),dx=Ei(Z.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),Yhe=rm(Bc)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}),Zhe=rm(S0)({minWidth:"30px"}),Khe=rm(pc)({marginRight:"0px",padding:"0px"}),Jhe=rm(ty)({padding:0,marginRight:"5px"}),Qhe=rm(rg)(({open:e})=>({display:e?"block":"none"})),epe=rm(gd)({marginLeft:"50px"});function l3({visible:e=!0,name:t,children:r,setVisible:n}){const[i,o]=J.useState(!1),[l,a]=J.useState(!0),c=J.useMemo(()=>e?l:!1,[e,l]),h=J.useMemo(()=>r?Array.isArray(r)?r.map(g=>ft.cloneElement(g,{visible:c})):ft.cloneElement(r,{visible:c}):Z.jsx(Z.Fragment,{}),[c]);return Z.jsxs(Z.Fragment,{children:[Z.jsxs(Yhe,{children:[Z.jsxs(Zhe,{children:[Z.jsx(Khe,{edge:"end","aria-label":"open",onClick:()=>o(!i),children:i?Z.jsx(dx,{}):Z.jsx(B$,{})}),Z.jsx(Jhe,{disabled:n?!1:!e,checked:n?e:l,onClick:()=>{n?n(g=>!g):a(g=>!g)}})]}),Z.jsx(Ac,{primary:t,variant:"layerlist"})]}),Z.jsx(Qhe,{open:i,children:Z.jsx(epe,{disablePadding:!0,children:h})})]})}try{l3.displayName="LayerListFolder",l3.__docgenInfo={description:"",displayName:"LayerListFolder",props:{visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"ReactNode"}},setVisible:{defaultValue:null,description:"",name:"setVisible",required:!1,type:{name:"((visible: boolean | ((val: unknown) => boolean)) => void) | undefined"}}}}}catch{}var Bu={},Ym={},g5,SO;function z$(){if(SO)return g5;SO=1;var e=typeof Ch=="object"&&Ch&&Ch.Object===Object&&Ch;return g5=e,g5}var y5,CO;function of(){if(CO)return y5;CO=1;var e=z$(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return y5=r,y5}var v5,EO;function b1(){if(EO)return v5;EO=1;var e=of(),t=e.Symbol;return v5=t,v5}var b5,TO;function tpe(){if(TO)return b5;TO=1;var e=b1(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function o(l){var a=r.call(l,i),c=l[i];try{l[i]=void 0;var h=!0}catch{}var g=n.call(l);return h&&(a?l[i]=c:delete l[i]),g}return b5=o,b5}var _5,PO;function rpe(){if(PO)return _5;PO=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return _5=r,_5}var x5,IO;function um(){if(IO)return x5;IO=1;var e=b1(),t=tpe(),r=rpe(),n="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function l(a){return a==null?a===void 0?i:n:o&&o in Object(a)?t(a):r(a)}return x5=l,x5}var w5,kO;function bd(){if(kO)return w5;kO=1;var e=Array.isArray;return w5=e,w5}var S5,AO;function Jf(){if(AO)return S5;AO=1;function e(t){return t!=null&&typeof t=="object"}return S5=e,S5}var C5,MO;function npe(){if(MO)return C5;MO=1;var e=um(),t=bd(),r=Jf(),n="[object String]";function i(o){return typeof o=="string"||!t(o)&&r(o)&&e(o)==n}return C5=i,C5}var E5,LO;function ipe(){if(LO)return E5;LO=1;function e(t){return function(r,n,i){for(var o=-1,l=Object(r),a=i(r),c=a.length;c--;){var h=a[t?c:++o];if(n(l[h],h,l)===!1)break}return r}}return E5=e,E5}var T5,RO;function ape(){if(RO)return T5;RO=1;var e=ipe(),t=e();return T5=t,T5}var P5,DO;function ope(){if(DO)return P5;DO=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return P5=e,P5}var I5,NO;function spe(){if(NO)return I5;NO=1;var e=um(),t=Jf(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return I5=n,I5}var k5,OO;function j$(){if(OO)return k5;OO=1;var e=spe(),t=Jf(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(l){return t(l)&&n.call(l,"callee")&&!i.call(l,"callee")};return k5=o,k5}var qv={exports:{}},A5,FO;function lpe(){if(FO)return A5;FO=1;function e(){return!1}return A5=e,A5}qv.exports;var BO;function XI(){return BO||(BO=1,(function(e,t){var r=of(),n=lpe(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===i,a=l?r.Buffer:void 0,c=a?a.isBuffer:void 0,h=c||n;e.exports=h})(qv,qv.exports)),qv.exports}var M5,zO;function q$(){if(zO)return M5;zO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var o=typeof n;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return M5=r,M5}var L5,jO;function YI(){if(jO)return L5;jO=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return L5=t,L5}var R5,qO;function upe(){if(qO)return R5;qO=1;var e=um(),t=YI(),r=Jf(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",l="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",g="[object Number]",v="[object Object]",x="[object RegExp]",b="[object Set]",S="[object String]",I="[object WeakMap]",k="[object ArrayBuffer]",M="[object DataView]",O="[object Float32Array]",F="[object Float64Array]",D="[object Int8Array]",q="[object Int16Array]",z="[object Int32Array]",U="[object Uint8Array]",H="[object Uint8ClampedArray]",X="[object Uint16Array]",ie="[object Uint32Array]",ee={};ee[O]=ee[F]=ee[D]=ee[q]=ee[z]=ee[U]=ee[H]=ee[X]=ee[ie]=!0,ee[n]=ee[i]=ee[k]=ee[o]=ee[M]=ee[l]=ee[a]=ee[c]=ee[h]=ee[g]=ee[v]=ee[x]=ee[b]=ee[S]=ee[I]=!1;function G(ne){return r(ne)&&t(ne.length)&&!!ee[e(ne)]}return R5=G,R5}var D5,$O;function ZI(){if($O)return D5;$O=1;function e(t){return function(r){return t(r)}}return D5=e,D5}var $v={exports:{}};$v.exports;var VO;function KI(){return VO||(VO=1,(function(e,t){var r=z$(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o&&r.process,a=(function(){try{var c=i&&i.require&&i.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}})();e.exports=a})($v,$v.exports)),$v.exports}var N5,UO;function $$(){if(UO)return N5;UO=1;var e=upe(),t=ZI(),r=KI(),n=r&&r.isTypedArray,i=n?t(n):e;return N5=i,N5}var O5,GO;function V$(){if(GO)return O5;GO=1;var e=ope(),t=j$(),r=bd(),n=XI(),i=q$(),o=$$(),l=Object.prototype,a=l.hasOwnProperty;function c(h,g){var v=r(h),x=!v&&t(h),b=!v&&!x&&n(h),S=!v&&!x&&!b&&o(h),I=v||x||b||S,k=I?e(h.length,String):[],M=k.length;for(var O in h)(g||a.call(h,O))&&!(I&&(O=="length"||b&&(O=="offset"||O=="parent")||S&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||i(O,M)))&&k.push(O);return k}return O5=c,O5}var F5,HO;function JI(){if(HO)return F5;HO=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return F5=t,F5}var B5,WO;function U$(){if(WO)return B5;WO=1;function e(t,r){return function(n){return t(r(n))}}return B5=e,B5}var z5,XO;function cpe(){if(XO)return z5;XO=1;var e=U$(),t=e(Object.keys,Object);return z5=t,z5}var j5,YO;function dpe(){if(YO)return j5;YO=1;var e=JI(),t=cpe(),r=Object.prototype,n=r.hasOwnProperty;function i(o){if(!e(o))return t(o);var l=[];for(var a in Object(o))n.call(o,a)&&a!="constructor"&&l.push(a);return l}return j5=i,j5}var q5,ZO;function Ty(){if(ZO)return q5;ZO=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return q5=e,q5}var $5,KO;function G$(){if(KO)return $5;KO=1;var e=um(),t=Ty(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function l(a){if(!t(a))return!1;var c=e(a);return c==n||c==i||c==r||c==o}return $5=l,$5}var V5,JO;function q2(){if(JO)return V5;JO=1;var e=G$(),t=YI();function r(n){return n!=null&&t(n.length)&&!e(n)}return V5=r,V5}var U5,QO;function _1(){if(QO)return U5;QO=1;var e=V$(),t=dpe(),r=q2();function n(i){return r(i)?e(i):t(i)}return U5=n,U5}var G5,e6;function H$(){if(e6)return G5;e6=1;var e=ape(),t=_1();function r(n,i){return n&&e(n,i,t)}return G5=r,G5}var H5,t6;function W$(){if(t6)return H5;t6=1;function e(t){return t}return H5=e,H5}var W5,r6;function fpe(){if(r6)return W5;r6=1;var e=W$();function t(r){return typeof r=="function"?r:e}return W5=t,W5}var X5,n6;function QI(){if(n6)return X5;n6=1;var e=H$(),t=fpe();function r(n,i){return n&&e(n,t(i))}return X5=r,X5}var Y5,i6;function ek(){if(i6)return Y5;i6=1;var e=U$(),t=e(Object.getPrototypeOf,Object);return Y5=t,Y5}var Z5,a6;function hpe(){if(a6)return Z5;a6=1;var e=um(),t=ek(),r=Jf(),n="[object Object]",i=Function.prototype,o=Object.prototype,l=i.toString,a=o.hasOwnProperty,c=l.call(Object);function h(g){if(!r(g)||e(g)!=n)return!1;var v=t(g);if(v===null)return!0;var x=a.call(v,"constructor")&&v.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==c}return Z5=h,Z5}var K5,o6;function X$(){if(o6)return K5;o6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=r(t[n],n,t);return o}return K5=e,K5}var J5,s6;function ppe(){if(s6)return J5;s6=1;function e(){this.__data__=[],this.size=0}return J5=e,J5}var Q5,l6;function tk(){if(l6)return Q5;l6=1;function e(t,r){return t===r||t!==t&&r!==r}return Q5=e,Q5}var eC,u6;function $2(){if(u6)return eC;u6=1;var e=tk();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return eC=t,eC}var tC,c6;function mpe(){if(c6)return tC;c6=1;var e=$2(),t=Array.prototype,r=t.splice;function n(i){var o=this.__data__,l=e(o,i);if(l<0)return!1;var a=o.length-1;return l==a?o.pop():r.call(o,l,1),--this.size,!0}return tC=n,tC}var rC,d6;function gpe(){if(d6)return rC;d6=1;var e=$2();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return rC=t,rC}var nC,f6;function ype(){if(f6)return nC;f6=1;var e=$2();function t(r){return e(this.__data__,r)>-1}return nC=t,nC}var iC,h6;function vpe(){if(h6)return iC;h6=1;var e=$2();function t(r,n){var i=this.__data__,o=e(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this}return iC=t,iC}var aC,p6;function V2(){if(p6)return aC;p6=1;var e=ppe(),t=mpe(),r=gpe(),n=ype(),i=vpe();function o(l){var a=-1,c=l==null?0:l.length;for(this.clear();++a<c;){var h=l[a];this.set(h[0],h[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,aC=o,aC}var oC,m6;function bpe(){if(m6)return oC;m6=1;var e=V2();function t(){this.__data__=new e,this.size=0}return oC=t,oC}var sC,g6;function _pe(){if(g6)return sC;g6=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return sC=e,sC}var lC,y6;function xpe(){if(y6)return lC;y6=1;function e(t){return this.__data__.get(t)}return lC=e,lC}var uC,v6;function wpe(){if(v6)return uC;v6=1;function e(t){return this.__data__.has(t)}return uC=e,uC}var cC,b6;function Spe(){if(b6)return cC;b6=1;var e=of(),t=e["__core-js_shared__"];return cC=t,cC}var dC,_6;function Cpe(){if(_6)return dC;_6=1;var e=Spe(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return dC=r,dC}var fC,x6;function Y$(){if(x6)return fC;x6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return fC=r,fC}var hC,w6;function Epe(){if(w6)return hC;w6=1;var e=G$(),t=Cpe(),r=Ty(),n=Y$(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,a=Object.prototype,c=l.toString,h=a.hasOwnProperty,g=RegExp("^"+c.call(h).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(x){if(!r(x)||t(x))return!1;var b=e(x)?g:o;return b.test(n(x))}return hC=v,hC}var pC,S6;function Tpe(){if(S6)return pC;S6=1;function e(t,r){return t?.[r]}return pC=e,pC}var mC,C6;function cm(){if(C6)return mC;C6=1;var e=Epe(),t=Tpe();function r(n,i){var o=t(n,i);return e(o)?o:void 0}return mC=r,mC}var gC,E6;function rk(){if(E6)return gC;E6=1;var e=cm(),t=of(),r=e(t,"Map");return gC=r,gC}var yC,T6;function U2(){if(T6)return yC;T6=1;var e=cm(),t=e(Object,"create");return yC=t,yC}var vC,P6;function Ppe(){if(P6)return vC;P6=1;var e=U2();function t(){this.__data__=e?e(null):{},this.size=0}return vC=t,vC}var bC,I6;function Ipe(){if(I6)return bC;I6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return bC=e,bC}var _C,k6;function kpe(){if(k6)return _C;k6=1;var e=U2(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(o){var l=this.__data__;if(e){var a=l[o];return a===t?void 0:a}return n.call(l,o)?l[o]:void 0}return _C=i,_C}var xC,A6;function Ape(){if(A6)return xC;A6=1;var e=U2(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var o=this.__data__;return e?o[i]!==void 0:r.call(o,i)}return xC=n,xC}var wC,M6;function Mpe(){if(M6)return wC;M6=1;var e=U2(),t="__lodash_hash_undefined__";function r(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=e&&i===void 0?t:i,this}return wC=r,wC}var SC,L6;function Lpe(){if(L6)return SC;L6=1;var e=Ppe(),t=Ipe(),r=kpe(),n=Ape(),i=Mpe();function o(l){var a=-1,c=l==null?0:l.length;for(this.clear();++a<c;){var h=l[a];this.set(h[0],h[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,SC=o,SC}var CC,R6;function Rpe(){if(R6)return CC;R6=1;var e=Lpe(),t=V2(),r=rk();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return CC=n,CC}var EC,D6;function Dpe(){if(D6)return EC;D6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return EC=e,EC}var TC,N6;function G2(){if(N6)return TC;N6=1;var e=Dpe();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return TC=t,TC}var PC,O6;function Npe(){if(O6)return PC;O6=1;var e=G2();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return PC=t,PC}var IC,F6;function Ope(){if(F6)return IC;F6=1;var e=G2();function t(r){return e(this,r).get(r)}return IC=t,IC}var kC,B6;function Fpe(){if(B6)return kC;B6=1;var e=G2();function t(r){return e(this,r).has(r)}return kC=t,kC}var AC,z6;function Bpe(){if(z6)return AC;z6=1;var e=G2();function t(r,n){var i=e(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this}return AC=t,AC}var MC,j6;function nk(){if(j6)return MC;j6=1;var e=Rpe(),t=Npe(),r=Ope(),n=Fpe(),i=Bpe();function o(l){var a=-1,c=l==null?0:l.length;for(this.clear();++a<c;){var h=l[a];this.set(h[0],h[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,MC=o,MC}var LC,q6;function zpe(){if(q6)return LC;q6=1;var e=V2(),t=rk(),r=nk(),n=200;function i(o,l){var a=this.__data__;if(a instanceof e){var c=a.__data__;if(!t||c.length<n-1)return c.push([o,l]),this.size=++a.size,this;a=this.__data__=new r(c)}return a.set(o,l),this.size=a.size,this}return LC=i,LC}var RC,$6;function ik(){if($6)return RC;$6=1;var e=V2(),t=bpe(),r=_pe(),n=xpe(),i=wpe(),o=zpe();function l(a){var c=this.__data__=new e(a);this.size=c.size}return l.prototype.clear=t,l.prototype.delete=r,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,RC=l,RC}var DC,V6;function jpe(){if(V6)return DC;V6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return DC=t,DC}var NC,U6;function qpe(){if(U6)return NC;U6=1;function e(t){return this.__data__.has(t)}return NC=e,NC}var OC,G6;function $pe(){if(G6)return OC;G6=1;var e=nk(),t=jpe(),r=qpe();function n(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new e;++o<l;)this.add(i[o])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,OC=n,OC}var FC,H6;function Vpe(){if(H6)return FC;H6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return FC=e,FC}var BC,W6;function Upe(){if(W6)return BC;W6=1;function e(t,r){return t.has(r)}return BC=e,BC}var zC,X6;function Z$(){if(X6)return zC;X6=1;var e=$pe(),t=Vpe(),r=Upe(),n=1,i=2;function o(l,a,c,h,g,v){var x=c&n,b=l.length,S=a.length;if(b!=S&&!(x&&S>b))return!1;var I=v.get(l),k=v.get(a);if(I&&k)return I==a&&k==l;var M=-1,O=!0,F=c&i?new e:void 0;for(v.set(l,a),v.set(a,l);++M<b;){var D=l[M],q=a[M];if(h)var z=x?h(q,D,M,a,l,v):h(D,q,M,l,a,v);if(z!==void 0){if(z)continue;O=!1;break}if(F){if(!t(a,function(U,H){if(!r(F,H)&&(D===U||g(D,U,c,h,v)))return F.push(H)})){O=!1;break}}else if(!(D===q||g(D,q,c,h,v))){O=!1;break}}return v.delete(l),v.delete(a),O}return zC=o,zC}var jC,Y6;function K$(){if(Y6)return jC;Y6=1;var e=of(),t=e.Uint8Array;return jC=t,jC}var qC,Z6;function Gpe(){if(Z6)return qC;Z6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,o){n[++r]=[o,i]}),n}return qC=e,qC}var $C,K6;function Hpe(){if(K6)return $C;K6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return $C=e,$C}var VC,J6;function Wpe(){if(J6)return VC;J6=1;var e=b1(),t=K$(),r=tk(),n=Z$(),i=Gpe(),o=Hpe(),l=1,a=2,c="[object Boolean]",h="[object Date]",g="[object Error]",v="[object Map]",x="[object Number]",b="[object RegExp]",S="[object Set]",I="[object String]",k="[object Symbol]",M="[object ArrayBuffer]",O="[object DataView]",F=e?e.prototype:void 0,D=F?F.valueOf:void 0;function q(z,U,H,X,ie,ee,G){switch(H){case O:if(z.byteLength!=U.byteLength||z.byteOffset!=U.byteOffset)return!1;z=z.buffer,U=U.buffer;case M:return!(z.byteLength!=U.byteLength||!ee(new t(z),new t(U)));case c:case h:case x:return r(+z,+U);case g:return z.name==U.name&&z.message==U.message;case b:case I:return z==U+"";case v:var ne=i;case S:var ae=X&l;if(ne||(ne=o),z.size!=U.size&&!ae)return!1;var le=G.get(z);if(le)return le==U;X|=a,G.set(z,U);var fe=n(ne(z),ne(U),X,ie,ee,G);return G.delete(z),fe;case k:if(D)return D.call(z)==D.call(U)}return!1}return VC=q,VC}var UC,Q6;function J$(){if(Q6)return UC;Q6=1;function e(t,r){for(var n=-1,i=r.length,o=t.length;++n<i;)t[o+n]=r[n];return t}return UC=e,UC}var GC,e8;function Q$(){if(e8)return GC;e8=1;var e=J$(),t=bd();function r(n,i,o){var l=i(n);return t(n)?l:e(l,o(n))}return GC=r,GC}var HC,t8;function Xpe(){if(t8)return HC;t8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=0,l=[];++n<i;){var a=t[n];r(a,n,t)&&(l[o++]=a)}return l}return HC=e,HC}var WC,r8;function eV(){if(r8)return WC;r8=1;function e(){return[]}return WC=e,WC}var XC,n8;function ak(){if(n8)return XC;n8=1;var e=Xpe(),t=eV(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(l){return l==null?[]:(l=Object(l),e(i(l),function(a){return n.call(l,a)}))}:t;return XC=o,XC}var YC,i8;function tV(){if(i8)return YC;i8=1;var e=Q$(),t=ak(),r=_1();function n(i){return e(i,r,t)}return YC=n,YC}var ZC,a8;function Ype(){if(a8)return ZC;a8=1;var e=tV(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(o,l,a,c,h,g){var v=a&t,x=e(o),b=x.length,S=e(l),I=S.length;if(b!=I&&!v)return!1;for(var k=b;k--;){var M=x[k];if(!(v?M in l:n.call(l,M)))return!1}var O=g.get(o),F=g.get(l);if(O&&F)return O==l&&F==o;var D=!0;g.set(o,l),g.set(l,o);for(var q=v;++k<b;){M=x[k];var z=o[M],U=l[M];if(c)var H=v?c(U,z,M,l,o,g):c(z,U,M,o,l,g);if(!(H===void 0?z===U||h(z,U,a,c,g):H)){D=!1;break}q||(q=M=="constructor")}if(D&&!q){var X=o.constructor,ie=l.constructor;X!=ie&&"constructor"in o&&"constructor"in l&&!(typeof X=="function"&&X instanceof X&&typeof ie=="function"&&ie instanceof ie)&&(D=!1)}return g.delete(o),g.delete(l),D}return ZC=i,ZC}var KC,o8;function Zpe(){if(o8)return KC;o8=1;var e=cm(),t=of(),r=e(t,"DataView");return KC=r,KC}var JC,s8;function Kpe(){if(s8)return JC;s8=1;var e=cm(),t=of(),r=e(t,"Promise");return JC=r,JC}var QC,l8;function Jpe(){if(l8)return QC;l8=1;var e=cm(),t=of(),r=e(t,"Set");return QC=r,QC}var eE,u8;function Qpe(){if(u8)return eE;u8=1;var e=cm(),t=of(),r=e(t,"WeakMap");return eE=r,eE}var tE,c8;function H2(){if(c8)return tE;c8=1;var e=Zpe(),t=rk(),r=Kpe(),n=Jpe(),i=Qpe(),o=um(),l=Y$(),a="[object Map]",c="[object Object]",h="[object Promise]",g="[object Set]",v="[object WeakMap]",x="[object DataView]",b=l(e),S=l(t),I=l(r),k=l(n),M=l(i),O=o;return(e&&O(new e(new ArrayBuffer(1)))!=x||t&&O(new t)!=a||r&&O(r.resolve())!=h||n&&O(new n)!=g||i&&O(new i)!=v)&&(O=function(F){var D=o(F),q=D==c?F.constructor:void 0,z=q?l(q):"";if(z)switch(z){case b:return x;case S:return a;case I:return h;case k:return g;case M:return v}return D}),tE=O,tE}var rE,d8;function eme(){if(d8)return rE;d8=1;var e=ik(),t=Z$(),r=Wpe(),n=Ype(),i=H2(),o=bd(),l=XI(),a=$$(),c=1,h="[object Arguments]",g="[object Array]",v="[object Object]",x=Object.prototype,b=x.hasOwnProperty;function S(I,k,M,O,F,D){var q=o(I),z=o(k),U=q?g:i(I),H=z?g:i(k);U=U==h?v:U,H=H==h?v:H;var X=U==v,ie=H==v,ee=U==H;if(ee&&l(I)){if(!l(k))return!1;q=!0,X=!1}if(ee&&!X)return D||(D=new e),q||a(I)?t(I,k,M,O,F,D):r(I,k,U,M,O,F,D);if(!(M&c)){var G=X&&b.call(I,"__wrapped__"),ne=ie&&b.call(k,"__wrapped__");if(G||ne){var ae=G?I.value():I,le=ne?k.value():k;return D||(D=new e),F(ae,le,M,O,D)}}return ee?(D||(D=new e),n(I,k,M,O,F,D)):!1}return rE=S,rE}var nE,f8;function rV(){if(f8)return nE;f8=1;var e=eme(),t=Jf();function r(n,i,o,l,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,o,l,r,a)}return nE=r,nE}var iE,h8;function tme(){if(h8)return iE;h8=1;var e=ik(),t=rV(),r=1,n=2;function i(o,l,a,c){var h=a.length,g=h,v=!c;if(o==null)return!g;for(o=Object(o);h--;){var x=a[h];if(v&&x[2]?x[1]!==o[x[0]]:!(x[0]in o))return!1}for(;++h<g;){x=a[h];var b=x[0],S=o[b],I=x[1];if(v&&x[2]){if(S===void 0&&!(b in o))return!1}else{var k=new e;if(c)var M=c(S,I,b,o,l,k);if(!(M===void 0?t(I,S,r|n,c,k):M))return!1}}return!0}return iE=i,iE}var aE,p8;function nV(){if(p8)return aE;p8=1;var e=Ty();function t(r){return r===r&&!e(r)}return aE=t,aE}var oE,m8;function rme(){if(m8)return oE;m8=1;var e=nV(),t=_1();function r(n){for(var i=t(n),o=i.length;o--;){var l=i[o],a=n[l];i[o]=[l,a,e(a)]}return i}return oE=r,oE}var sE,g8;function iV(){if(g8)return sE;g8=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return sE=e,sE}var lE,y8;function nme(){if(y8)return lE;y8=1;var e=tme(),t=rme(),r=iV();function n(i){var o=t(i);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(l){return l===i||e(l,i,o)}}return lE=n,lE}var uE,v8;function ok(){if(v8)return uE;v8=1;var e=um(),t=Jf(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return uE=n,uE}var cE,b8;function sk(){if(b8)return cE;b8=1;var e=bd(),t=ok(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,l){if(e(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||t(o)?!0:n.test(o)||!r.test(o)||l!=null&&o in Object(l)}return cE=i,cE}var dE,_8;function ime(){if(_8)return dE;_8=1;var e=nk(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var l=arguments,a=i?i.apply(this,l):l[0],c=o.cache;if(c.has(a))return c.get(a);var h=n.apply(this,l);return o.cache=c.set(a,h)||c,h};return o.cache=new(r.Cache||e),o}return r.Cache=e,dE=r,dE}var fE,x8;function ame(){if(x8)return fE;x8=1;var e=ime(),t=500;function r(n){var i=e(n,function(l){return o.size===t&&o.clear(),l}),o=i.cache;return i}return fE=r,fE}var hE,w8;function ome(){if(w8)return hE;w8=1;var e=ame(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(l,a,c,h){o.push(c?h.replace(r,"$1"):a||l)}),o});return hE=n,hE}var pE,S8;function sme(){if(S8)return pE;S8=1;var e=b1(),t=X$(),r=bd(),n=ok(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function l(a){if(typeof a=="string")return a;if(r(a))return t(a,l)+"";if(n(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return pE=l,pE}var mE,C8;function lme(){if(C8)return mE;C8=1;var e=sme();function t(r){return r==null?"":e(r)}return mE=t,mE}var gE,E8;function aV(){if(E8)return gE;E8=1;var e=bd(),t=sk(),r=ome(),n=lme();function i(o,l){return e(o)?o:t(o,l)?[o]:r(n(o))}return gE=i,gE}var yE,T8;function W2(){if(T8)return yE;T8=1;var e=ok();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return yE=t,yE}var vE,P8;function oV(){if(P8)return vE;P8=1;var e=aV(),t=W2();function r(n,i){i=e(i,n);for(var o=0,l=i.length;n!=null&&o<l;)n=n[t(i[o++])];return o&&o==l?n:void 0}return vE=r,vE}var bE,I8;function ume(){if(I8)return bE;I8=1;var e=oV();function t(r,n,i){var o=r==null?void 0:e(r,n);return o===void 0?i:o}return bE=t,bE}var _E,k8;function cme(){if(k8)return _E;k8=1;function e(t,r){return t!=null&&r in Object(t)}return _E=e,_E}var xE,A8;function dme(){if(A8)return xE;A8=1;var e=aV(),t=j$(),r=bd(),n=q$(),i=YI(),o=W2();function l(a,c,h){c=e(c,a);for(var g=-1,v=c.length,x=!1;++g<v;){var b=o(c[g]);if(!(x=a!=null&&h(a,b)))break;a=a[b]}return x||++g!=v?x:(v=a==null?0:a.length,!!v&&i(v)&&n(b,v)&&(r(a)||t(a)))}return xE=l,xE}var wE,M8;function fme(){if(M8)return wE;M8=1;var e=cme(),t=dme();function r(n,i){return n!=null&&t(n,i,e)}return wE=r,wE}var SE,L8;function hme(){if(L8)return SE;L8=1;var e=rV(),t=ume(),r=fme(),n=sk(),i=nV(),o=iV(),l=W2(),a=1,c=2;function h(g,v){return n(g)&&i(v)?o(l(g),v):function(x){var b=t(x,g);return b===void 0&&b===v?r(x,g):e(v,b,a|c)}}return SE=h,SE}var CE,R8;function pme(){if(R8)return CE;R8=1;function e(t){return function(r){return r?.[t]}}return CE=e,CE}var EE,D8;function mme(){if(D8)return EE;D8=1;var e=oV();function t(r){return function(n){return e(n,r)}}return EE=t,EE}var TE,N8;function gme(){if(N8)return TE;N8=1;var e=pme(),t=mme(),r=sk(),n=W2();function i(o){return r(o)?e(n(o)):t(o)}return TE=i,TE}var PE,O8;function yme(){if(O8)return PE;O8=1;var e=nme(),t=hme(),r=W$(),n=bd(),i=gme();function o(l){return typeof l=="function"?l:l==null?r:typeof l=="object"?n(l)?t(l[0],l[1]):e(l):i(l)}return PE=o,PE}var IE,F8;function vme(){if(F8)return IE;F8=1;var e=q2();function t(r,n){return function(i,o){if(i==null)return i;if(!e(i))return r(i,o);for(var l=i.length,a=n?l:-1,c=Object(i);(n?a--:++a<l)&&o(c[a],a,c)!==!1;);return i}}return IE=t,IE}var kE,B8;function bme(){if(B8)return kE;B8=1;var e=H$(),t=vme(),r=t(e);return kE=r,kE}var AE,z8;function _me(){if(z8)return AE;z8=1;var e=bme(),t=q2();function r(n,i){var o=-1,l=t(n)?Array(n.length):[];return e(n,function(a,c,h){l[++o]=i(a,c,h)}),l}return AE=r,AE}var ME,j8;function xme(){if(j8)return ME;j8=1;var e=X$(),t=yme(),r=_me(),n=bd();function i(o,l){var a=n(o)?e:r;return a(o,t(l,3))}return ME=i,ME}var q8;function wme(){if(q8)return Ym;q8=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.flattenNames=void 0;var e=npe(),t=c(e),r=QI(),n=c(r),i=hpe(),o=c(i),l=xme(),a=c(l);function c(g){return g&&g.__esModule?g:{default:g}}var h=Ym.flattenNames=function g(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=[];return(0,a.default)(v,function(b){Array.isArray(b)?g(b).map(function(S){return x.push(S)}):(0,o.default)(b)?(0,n.default)(b,function(S,I){S===!0&&x.push(I),x.push(I+"-"+S)}):(0,t.default)(b)&&x.push(b)}),x};return Ym.default=h,Ym}var Zm={},LE,$8;function Sme(){if($8)return LE;$8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return LE=e,LE}var RE,V8;function Cme(){if(V8)return RE;V8=1;var e=cm(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return RE=t,RE}var DE,U8;function sV(){if(U8)return DE;U8=1;var e=Cme();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return DE=t,DE}var NE,G8;function lV(){if(G8)return NE;G8=1;var e=sV(),t=tk(),r=Object.prototype,n=r.hasOwnProperty;function i(o,l,a){var c=o[l];(!(n.call(o,l)&&t(c,a))||a===void 0&&!(l in o))&&e(o,l,a)}return NE=i,NE}var OE,H8;function X2(){if(H8)return OE;H8=1;var e=lV(),t=sV();function r(n,i,o,l){var a=!o;o||(o={});for(var c=-1,h=i.length;++c<h;){var g=i[c],v=l?l(o[g],n[g],g,o,n):void 0;v===void 0&&(v=n[g]),a?t(o,g,v):e(o,g,v)}return o}return OE=r,OE}var FE,W8;function Eme(){if(W8)return FE;W8=1;var e=X2(),t=_1();function r(n,i){return n&&e(i,t(i),n)}return FE=r,FE}var BE,X8;function Tme(){if(X8)return BE;X8=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return BE=e,BE}var zE,Y8;function Pme(){if(Y8)return zE;Y8=1;var e=Ty(),t=JI(),r=Tme(),n=Object.prototype,i=n.hasOwnProperty;function o(l){if(!e(l))return r(l);var a=t(l),c=[];for(var h in l)h=="constructor"&&(a||!i.call(l,h))||c.push(h);return c}return zE=o,zE}var jE,Z8;function lk(){if(Z8)return jE;Z8=1;var e=V$(),t=Pme(),r=q2();function n(i){return r(i)?e(i,!0):t(i)}return jE=n,jE}var qE,K8;function Ime(){if(K8)return qE;K8=1;var e=X2(),t=lk();function r(n,i){return n&&e(i,t(i),n)}return qE=r,qE}var Vv={exports:{}};Vv.exports;var J8;function kme(){return J8||(J8=1,(function(e,t){var r=of(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o?r.Buffer:void 0,a=l?l.allocUnsafe:void 0;function c(h,g){if(g)return h.slice();var v=h.length,x=a?a(v):new h.constructor(v);return h.copy(x),x}e.exports=c})(Vv,Vv.exports)),Vv.exports}var $E,Q8;function Ame(){if(Q8)return $E;Q8=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return $E=e,$E}var VE,eF;function Mme(){if(eF)return VE;eF=1;var e=X2(),t=ak();function r(n,i){return e(n,t(n),i)}return VE=r,VE}var UE,tF;function uV(){if(tF)return UE;tF=1;var e=J$(),t=ek(),r=ak(),n=eV(),i=Object.getOwnPropertySymbols,o=i?function(l){for(var a=[];l;)e(a,r(l)),l=t(l);return a}:n;return UE=o,UE}var GE,rF;function Lme(){if(rF)return GE;rF=1;var e=X2(),t=uV();function r(n,i){return e(n,t(n),i)}return GE=r,GE}var HE,nF;function Rme(){if(nF)return HE;nF=1;var e=Q$(),t=uV(),r=lk();function n(i){return e(i,r,t)}return HE=n,HE}var WE,iF;function Dme(){if(iF)return WE;iF=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return WE=r,WE}var XE,aF;function uk(){if(aF)return XE;aF=1;var e=K$();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return XE=t,XE}var YE,oF;function Nme(){if(oF)return YE;oF=1;var e=uk();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return YE=t,YE}var ZE,sF;function Ome(){if(sF)return ZE;sF=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return ZE=t,ZE}var KE,lF;function Fme(){if(lF)return KE;lF=1;var e=b1(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return KE=n,KE}var JE,uF;function Bme(){if(uF)return JE;uF=1;var e=uk();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return JE=t,JE}var QE,cF;function zme(){if(cF)return QE;cF=1;var e=uk(),t=Nme(),r=Ome(),n=Fme(),i=Bme(),o="[object Boolean]",l="[object Date]",a="[object Map]",c="[object Number]",h="[object RegExp]",g="[object Set]",v="[object String]",x="[object Symbol]",b="[object ArrayBuffer]",S="[object DataView]",I="[object Float32Array]",k="[object Float64Array]",M="[object Int8Array]",O="[object Int16Array]",F="[object Int32Array]",D="[object Uint8Array]",q="[object Uint8ClampedArray]",z="[object Uint16Array]",U="[object Uint32Array]";function H(X,ie,ee){var G=X.constructor;switch(ie){case b:return e(X);case o:case l:return new G(+X);case S:return t(X,ee);case I:case k:case M:case O:case F:case D:case q:case z:case U:return i(X,ee);case a:return new G;case c:case v:return new G(X);case h:return r(X);case g:return new G;case x:return n(X)}}return QE=H,QE}var e4,dF;function jme(){if(dF)return e4;dF=1;var e=Ty(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return e4=r,e4}var t4,fF;function qme(){if(fF)return t4;fF=1;var e=jme(),t=ek(),r=JI();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return t4=n,t4}var r4,hF;function $me(){if(hF)return r4;hF=1;var e=H2(),t=Jf(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return r4=n,r4}var n4,pF;function Vme(){if(pF)return n4;pF=1;var e=$me(),t=ZI(),r=KI(),n=r&&r.isMap,i=n?t(n):e;return n4=i,n4}var i4,mF;function Ume(){if(mF)return i4;mF=1;var e=H2(),t=Jf(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return i4=n,i4}var a4,gF;function Gme(){if(gF)return a4;gF=1;var e=Ume(),t=ZI(),r=KI(),n=r&&r.isSet,i=n?t(n):e;return a4=i,a4}var o4,yF;function Hme(){if(yF)return o4;yF=1;var e=ik(),t=Sme(),r=lV(),n=Eme(),i=Ime(),o=kme(),l=Ame(),a=Mme(),c=Lme(),h=tV(),g=Rme(),v=H2(),x=Dme(),b=zme(),S=qme(),I=bd(),k=XI(),M=Vme(),O=Ty(),F=Gme(),D=_1(),q=lk(),z=1,U=2,H=4,X="[object Arguments]",ie="[object Array]",ee="[object Boolean]",G="[object Date]",ne="[object Error]",ae="[object Function]",le="[object GeneratorFunction]",fe="[object Map]",ke="[object Number]",me="[object Object]",Se="[object RegExp]",we="[object Set]",Pe="[object String]",ce="[object Symbol]",_e="[object WeakMap]",be="[object ArrayBuffer]",Me="[object DataView]",Le="[object Float32Array]",Ue="[object Float64Array]",Oe="[object Int8Array]",tt="[object Int16Array]",Ze="[object Int32Array]",Qe="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Mt="[object Uint16Array]",ot="[object Uint32Array]",$e={};$e[X]=$e[ie]=$e[be]=$e[Me]=$e[ee]=$e[G]=$e[Le]=$e[Ue]=$e[Oe]=$e[tt]=$e[Ze]=$e[fe]=$e[ke]=$e[me]=$e[Se]=$e[we]=$e[Pe]=$e[ce]=$e[Qe]=$e[Ie]=$e[Mt]=$e[ot]=!0,$e[ne]=$e[ae]=$e[_e]=!1;function tr(Wt,Gt,at,dr,hr,ur){var Cr,br=Gt&z,nr=Gt&U,lr=Gt&H;if(at&&(Cr=hr?at(Wt,dr,hr,ur):at(Wt)),Cr!==void 0)return Cr;if(!O(Wt))return Wt;var Pr=I(Wt);if(Pr){if(Cr=x(Wt),!br)return l(Wt,Cr)}else{var ar=v(Wt),kr=ar==ae||ar==le;if(k(Wt))return o(Wt,br);if(ar==me||ar==X||kr&&!hr){if(Cr=nr||kr?{}:S(Wt),!br)return nr?c(Wt,i(Cr,Wt)):a(Wt,n(Cr,Wt))}else{if(!$e[ar])return hr?Wt:{};Cr=b(Wt,ar,br)}}ur||(ur=new e);var Qt=ur.get(Wt);if(Qt)return Qt;ur.set(Wt,Cr),F(Wt)?Wt.forEach(function(Re){Cr.add(tr(Re,Gt,at,Re,Wt,ur))}):M(Wt)&&Wt.forEach(function(Re,Be){Cr.set(Be,tr(Re,Gt,at,Be,Wt,ur))});var Ht=lr?nr?g:h:nr?q:D,Ct=Pr?void 0:Ht(Wt);return t(Ct||Wt,function(Re,Be){Ct&&(Be=Re,Re=Wt[Be]),r(Cr,Be,tr(Re,Gt,at,Be,Wt,ur))}),Cr}return o4=tr,o4}var s4,vF;function Wme(){if(vF)return s4;vF=1;var e=Hme(),t=1,r=4;function n(i){return e(i,t|r)}return s4=n,s4}var bF;function Xme(){if(bF)return Zm;bF=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.mergeClasses=void 0;var e=QI(),t=o(e),r=Wme(),n=o(r),i=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(a[g]=h[g])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var l=Zm.mergeClasses=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],g=c.default&&(0,n.default)(c.default)||{};return h.map(function(v){var x=c[v];return x&&(0,t.default)(x,function(b,S){g[S]||(g[S]={}),g[S]=i({},g[S],x[S])}),v}),g};return Zm.default=l,Zm}var Km={},_F;function Yme(){if(_F)return Km;_F=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.autoprefix=void 0;var e=QI(),t=n(e),r=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])}return l};function n(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var h=c[a];return h||{extend:a}}},o=Km.autoprefix=function(a){var c={};return(0,t.default)(a,function(h,g){var v={};(0,t.default)(h,function(x,b){var S=i[b];S?v=r({},v,S(x)):v[b]=x}),c[g]=v}),c};return Km.default=o,Km}var Jm={},xF;function Zme(){if(xF)return Jm;xF=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.hover=void 0;var e=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var g=arguments[h];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(c[v]=g[v])}return c},t=Y0(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function i(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function l(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=Jm.hover=function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){l(x,v);function x(){var b,S,I,k;i(this,x);for(var M=arguments.length,O=Array(M),F=0;F<M;F++)O[F]=arguments[F];return k=(S=(I=o(this,(b=x.__proto__||Object.getPrototypeOf(x)).call.apply(b,[this].concat(O))),I),I.state={hover:!1},I.handleMouseOver=function(){return I.setState({hover:!0})},I.handleMouseOut=function(){return I.setState({hover:!1})},I.render=function(){return r.default.createElement(g,{onMouseOver:I.handleMouseOver,onMouseOut:I.handleMouseOut},r.default.createElement(h,e({},I.props,I.state)))},S),o(I,k)}return x})(r.default.Component)};return Jm.default=a,Jm}var Qm={},wF;function Kme(){if(wF)return Qm;wF=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.active=void 0;var e=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var g=arguments[h];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(c[v]=g[v])}return c},t=Y0(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function i(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function l(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=Qm.active=function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){l(x,v);function x(){var b,S,I,k;i(this,x);for(var M=arguments.length,O=Array(M),F=0;F<M;F++)O[F]=arguments[F];return k=(S=(I=o(this,(b=x.__proto__||Object.getPrototypeOf(x)).call.apply(b,[this].concat(O))),I),I.state={active:!1},I.handleMouseDown=function(){return I.setState({active:!0})},I.handleMouseUp=function(){return I.setState({active:!1})},I.render=function(){return r.default.createElement(g,{onMouseDown:I.handleMouseDown,onMouseUp:I.handleMouseUp},r.default.createElement(h,e({},I.props,I.state)))},S),o(I,k)}return x})(r.default.Component)};return Qm.default=a,Qm}var Gb={},SF;function Jme(){if(SF)return Gb;SF=1,Object.defineProperty(Gb,"__esModule",{value:!0});var e=function(r,n){var i={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=c};return r===0&&o("first-child"),r===n-1&&o("last-child"),(r===0||r%2===0)&&o("even"),Math.abs(r%2)===1&&o("odd"),o("nth-child",r),i};return Gb.default=e,Gb}var CF;function Qme(){if(CF)return Bu;CF=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.ReactCSS=Bu.loop=Bu.handleActive=Bu.handleHover=Bu.hover=void 0;var e=wme(),t=x(e),r=Xme(),n=x(r),i=Yme(),o=x(i),l=Zme(),a=x(l),c=Kme(),h=x(c),g=Jme(),v=x(g);function x(S){return S&&S.__esModule?S:{default:S}}Bu.hover=a.default,Bu.handleHover=a.default,Bu.handleActive=h.default,Bu.loop=v.default;var b=Bu.ReactCSS=function(I){for(var k=arguments.length,M=Array(k>1?k-1:0),O=1;O<k;O++)M[O-1]=arguments[O];var F=(0,t.default)(M),D=(0,n.default)(I,F);return(0,o.default)(D)};return Bu.default=b,Bu}var ck=Qme();const Ti=tf(ck);var ege=function(t,r,n,i,o){var l=o.clientWidth,a=o.clientHeight,c=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,h=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,g=c-(o.getBoundingClientRect().left+window.pageXOffset),v=h-(o.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var x=void 0;if(v<0?x=0:v>a?x=1:x=Math.round(v*100/a)/100,r.a!==x)return{h:r.h,s:r.s,l:r.l,a:x,source:"rgb"}}else{var b=void 0;if(g<0?b=0:g>l?b=1:b=Math.round(g*100/l)/100,i!==b)return{h:r.h,s:r.s,l:r.l,a:b,source:"rgb"}}return null},l4={},tge=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=n*2,o.height=n*2;var l=o.getContext("2d");return l?(l.fillStyle=t,l.fillRect(0,0,o.width,o.height),l.fillStyle=r,l.fillRect(0,0,n,n),l.translate(n,n),l.fillRect(0,0,n,n),o.toDataURL()):null},rge=function(t,r,n,i){var o=t+"-"+r+"-"+n+(i?"-server":"");if(l4[o])return l4[o];var l=tge(t,r,n,i);return l4[o]=l,l},EF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Py=function(t){var r=t.white,n=t.grey,i=t.size,o=t.renderers,l=t.borderRadius,a=t.boxShadow,c=t.children,h=Ti({default:{grid:{borderRadius:l,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+rge(r,n,i,o.canvas)+") center left"}}});return J.isValidElement(c)?ft.cloneElement(c,EF({},c.props,{style:EF({},c.props.style,h.grid)})):ft.createElement("div",{style:h.grid})};Py.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var nge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ige=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function age(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function oge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var dk=(function(e){oge(t,e);function t(){var r,n,i,o;age(this,t);for(var l=arguments.length,a=Array(l),c=0;c<l;c++)a[c]=arguments[c];return o=(n=(i=TF(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(h){var g=ege(h,i.props.hsl,i.props.direction,i.props.a,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),TF(i,o)}return ige(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,o=Ti({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:nge({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return ft.createElement("div",{style:o.alpha},ft.createElement("div",{style:o.checkboard},ft.createElement(Py,{renderers:this.props.renderers})),ft.createElement("div",{style:o.gradient}),ft.createElement("div",{style:o.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ft.createElement("div",{style:o.pointer},this.props.pointer?ft.createElement(this.props.pointer,this.props):ft.createElement("div",{style:o.slider}))))}}]),t})(J.PureComponent||J.Component),sge=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function lge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function dge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fge=1,cV=38,hge=40,pge=[cV,hge],mge=function(t){return pge.indexOf(t)>-1},gge=function(t){return Number(String(t).replace(/%/g,""))},yge=1,aa=(function(e){dge(t,e);function t(r){uge(this,t);var n=cge(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var o=gge(i.target.value);if(!isNaN(o)&&mge(i.keyCode)){var l=n.getArrowOffset(),a=i.keyCode===cV?o+l:o-l;n.setUpdatedValue(a,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var o=Math.round(n.props.value+i.movementX);o>=0&&o<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(o),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+yge++,n}return sge(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return lge({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||fge}},{key:"setUpdatedValue",value:function(n,i){var o=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(o,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=Ti({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return ft.createElement("div",{style:i.wrap},ft.createElement("input",{id:this.inputId,style:i.input,ref:function(l){return n.input=l},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?ft.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t})(J.PureComponent||J.Component),vge=function(t,r,n,i){var o=i.clientWidth,l=i.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),g=c-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var v=void 0;if(g<0)v=359;else if(g>l)v=0;else{var x=-(g*100/l)+100;v=360*x/100}if(n.h!==v)return{h:v,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var b=void 0;if(h<0)b=0;else if(h>o)b=359;else{var S=h*100/o;b=360*S/100}if(n.h!==b)return{h:b,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},bge=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function _ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function xge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Iy=(function(e){xge(t,e);function t(){var r,n,i,o;_ge(this,t);for(var l=arguments.length,a=Array(l),c=0;c<l;c++)a[c]=arguments[c];return o=(n=(i=PF(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(h){var g=vge(h,i.props.direction,i.props.hsl,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),PF(i,o)}return bge(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,o=i===void 0?"horizontal":i,l=Ti({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return ft.createElement("div",{style:l.hue},ft.createElement("div",{className:"hue-"+o,style:l.container,ref:function(c){return n.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ft.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),ft.createElement("div",{style:l.pointer},this.props.pointer?ft.createElement(this.props.pointer,this.props):ft.createElement("div",{style:l.slider}))))}}]),t})(J.PureComponent||J.Component);function wge(){this.__data__=[],this.size=0}function x1(e,t){return e===t||e!==e&&t!==t}function Y2(e,t){for(var r=e.length;r--;)if(x1(e[r][0],t))return r;return-1}var Sge=Array.prototype,Cge=Sge.splice;function Ege(e){var t=this.__data__,r=Y2(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Cge.call(t,r,1),--this.size,!0}function Tge(e){var t=this.__data__,r=Y2(t,e);return r<0?void 0:t[r][1]}function Pge(e){return Y2(this.__data__,e)>-1}function Ige(e,t){var r=this.__data__,n=Y2(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Qf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qf.prototype.clear=wge;Qf.prototype.delete=Ege;Qf.prototype.get=Tge;Qf.prototype.has=Pge;Qf.prototype.set=Ige;function kge(){this.__data__=new Qf,this.size=0}function Age(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Mge(e){return this.__data__.get(e)}function Lge(e){return this.__data__.has(e)}var dV=typeof global=="object"&&global&&global.Object===Object&&global,Rge=typeof self=="object"&&self&&self.Object===Object&&self,_d=dV||Rge||Function("return this")(),jh=_d.Symbol,fV=Object.prototype,Dge=fV.hasOwnProperty,Nge=fV.toString,pv=jh?jh.toStringTag:void 0;function Oge(e){var t=Dge.call(e,pv),r=e[pv];try{e[pv]=void 0;var n=!0}catch{}var i=Nge.call(e);return n&&(t?e[pv]=r:delete e[pv]),i}var Fge=Object.prototype,Bge=Fge.toString;function zge(e){return Bge.call(e)}var jge="[object Null]",qge="[object Undefined]",IF=jh?jh.toStringTag:void 0;function dm(e){return e==null?e===void 0?qge:jge:IF&&IF in Object(e)?Oge(e):zge(e)}function Vc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $ge="[object AsyncFunction]",Vge="[object Function]",Uge="[object GeneratorFunction]",Gge="[object Proxy]";function fk(e){if(!Vc(e))return!1;var t=dm(e);return t==Vge||t==Uge||t==$ge||t==Gge}var u4=_d["__core-js_shared__"],kF=(function(){var e=/[^.]+$/.exec(u4&&u4.keys&&u4.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Hge(e){return!!kF&&kF in e}var Wge=Function.prototype,Xge=Wge.toString;function fm(e){if(e!=null){try{return Xge.call(e)}catch{}try{return e+""}catch{}}return""}var Yge=/[\\^$.*+?()[\]{}|]/g,Zge=/^\[object .+?Constructor\]$/,Kge=Function.prototype,Jge=Object.prototype,Qge=Kge.toString,eye=Jge.hasOwnProperty,tye=RegExp("^"+Qge.call(eye).replace(Yge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rye(e){if(!Vc(e)||Hge(e))return!1;var t=fk(e)?tye:Zge;return t.test(fm(e))}function nye(e,t){return e?.[t]}function hm(e,t){var r=nye(e,t);return rye(r)?r:void 0}var O0=hm(_d,"Map"),F0=hm(Object,"create");function iye(){this.__data__=F0?F0(null):{},this.size=0}function aye(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var oye="__lodash_hash_undefined__",sye=Object.prototype,lye=sye.hasOwnProperty;function uye(e){var t=this.__data__;if(F0){var r=t[e];return r===oye?void 0:r}return lye.call(t,e)?t[e]:void 0}var cye=Object.prototype,dye=cye.hasOwnProperty;function fye(e){var t=this.__data__;return F0?t[e]!==void 0:dye.call(t,e)}var hye="__lodash_hash_undefined__";function pye(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=F0&&t===void 0?hye:t,this}function Zp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zp.prototype.clear=iye;Zp.prototype.delete=aye;Zp.prototype.get=uye;Zp.prototype.has=fye;Zp.prototype.set=pye;function mye(){this.size=0,this.__data__={hash:new Zp,map:new(O0||Qf),string:new Zp}}function gye(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Z2(e,t){var r=e.__data__;return gye(t)?r[typeof t=="string"?"string":"hash"]:r.map}function yye(e){var t=Z2(this,e).delete(e);return this.size-=t?1:0,t}function vye(e){return Z2(this,e).get(e)}function bye(e){return Z2(this,e).has(e)}function _ye(e,t){var r=Z2(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function eh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}eh.prototype.clear=mye;eh.prototype.delete=yye;eh.prototype.get=vye;eh.prototype.has=bye;eh.prototype.set=_ye;var xye=200;function wye(e,t){var r=this.__data__;if(r instanceof Qf){var n=r.__data__;if(!O0||n.length<xye-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new eh(n)}return r.set(e,t),this.size=r.size,this}function Yd(e){var t=this.__data__=new Qf(e);this.size=t.size}Yd.prototype.clear=kge;Yd.prototype.delete=Age;Yd.prototype.get=Mge;Yd.prototype.has=Lge;Yd.prototype.set=wye;var fx=(function(){try{var e=hm(Object,"defineProperty");return e({},"",{}),e}catch{}})();function hk(e,t,r){t=="__proto__"&&fx?fx(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function u3(e,t,r){(r!==void 0&&!x1(e[t],r)||r===void 0&&!(t in e))&&hk(e,t,r)}function Sye(e){return function(t,r,n){for(var i=-1,o=Object(t),l=n(t),a=l.length;a--;){var c=l[++i];if(r(o[c],c,o)===!1)break}return t}}var hV=Sye(),pV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,AF=pV&&typeof module=="object"&&module&&!module.nodeType&&module,Cye=AF&&AF.exports===pV,MF=Cye?_d.Buffer:void 0;MF&&MF.allocUnsafe;function Eye(e,t){return e.slice()}var hx=_d.Uint8Array;function Tye(e){var t=new e.constructor(e.byteLength);return new hx(t).set(new hx(e)),t}function Pye(e,t){var r=Tye(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function Iye(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var LF=Object.create,kye=(function(){function e(){}return function(t){if(!Vc(t))return{};if(LF)return LF(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function mV(e,t){return function(r){return e(t(r))}}var gV=mV(Object.getPrototypeOf,Object),Aye=Object.prototype;function pk(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Aye;return e===r}function Mye(e){return typeof e.constructor=="function"&&!pk(e)?kye(gV(e)):{}}function qh(e){return e!=null&&typeof e=="object"}var Lye="[object Arguments]";function RF(e){return qh(e)&&dm(e)==Lye}var yV=Object.prototype,Rye=yV.hasOwnProperty,Dye=yV.propertyIsEnumerable,px=RF((function(){return arguments})())?RF:function(e){return qh(e)&&Rye.call(e,"callee")&&!Dye.call(e,"callee")},bc=Array.isArray,Nye=9007199254740991;function mk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nye}function ky(e){return e!=null&&mk(e.length)&&!fk(e)}function Oye(e){return qh(e)&&ky(e)}function Fye(){return!1}var vV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,DF=vV&&typeof module=="object"&&module&&!module.nodeType&&module,Bye=DF&&DF.exports===vV,NF=Bye?_d.Buffer:void 0,zye=NF?NF.isBuffer:void 0,mx=zye||Fye,jye="[object Object]",qye=Function.prototype,$ye=Object.prototype,bV=qye.toString,Vye=$ye.hasOwnProperty,Uye=bV.call(Object);function Gye(e){if(!qh(e)||dm(e)!=jye)return!1;var t=gV(e);if(t===null)return!0;var r=Vye.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&bV.call(r)==Uye}var Hye="[object Arguments]",Wye="[object Array]",Xye="[object Boolean]",Yye="[object Date]",Zye="[object Error]",Kye="[object Function]",Jye="[object Map]",Qye="[object Number]",eve="[object Object]",tve="[object RegExp]",rve="[object Set]",nve="[object String]",ive="[object WeakMap]",ave="[object ArrayBuffer]",ove="[object DataView]",sve="[object Float32Array]",lve="[object Float64Array]",uve="[object Int8Array]",cve="[object Int16Array]",dve="[object Int32Array]",fve="[object Uint8Array]",hve="[object Uint8ClampedArray]",pve="[object Uint16Array]",mve="[object Uint32Array]",Eo={};Eo[sve]=Eo[lve]=Eo[uve]=Eo[cve]=Eo[dve]=Eo[fve]=Eo[hve]=Eo[pve]=Eo[mve]=!0;Eo[Hye]=Eo[Wye]=Eo[ave]=Eo[Xye]=Eo[ove]=Eo[Yye]=Eo[Zye]=Eo[Kye]=Eo[Jye]=Eo[Qye]=Eo[eve]=Eo[tve]=Eo[rve]=Eo[nve]=Eo[ive]=!1;function gve(e){return qh(e)&&mk(e.length)&&!!Eo[dm(e)]}function yve(e){return function(t){return e(t)}}var _V=typeof exports=="object"&&exports&&!exports.nodeType&&exports,d0=_V&&typeof module=="object"&&module&&!module.nodeType&&module,vve=d0&&d0.exports===_V,c4=vve&&dV.process,OF=(function(){try{var e=d0&&d0.require&&d0.require("util").types;return e||c4&&c4.binding&&c4.binding("util")}catch{}})(),FF=OF&&OF.isTypedArray,gk=FF?yve(FF):gve;function c3(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var bve=Object.prototype,_ve=bve.hasOwnProperty;function xve(e,t,r){var n=e[t];(!(_ve.call(e,t)&&x1(n,r))||r===void 0&&!(t in e))&&hk(e,t,r)}function wve(e,t,r,n){var i=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var a=t[o],c=void 0;c===void 0&&(c=e[a]),i?hk(r,a,c):xve(r,a,c)}return r}function Sve(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Cve=9007199254740991,Eve=/^(?:0|[1-9]\d*)$/;function yk(e,t){var r=typeof e;return t=t??Cve,!!t&&(r=="number"||r!="symbol"&&Eve.test(e))&&e>-1&&e%1==0&&e<t}var Tve=Object.prototype,Pve=Tve.hasOwnProperty;function xV(e,t){var r=bc(e),n=!r&&px(e),i=!r&&!n&&mx(e),o=!r&&!n&&!i&&gk(e),l=r||n||i||o,a=l?Sve(e.length,String):[],c=a.length;for(var h in e)(t||Pve.call(e,h))&&!(l&&(h=="length"||i&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||yk(h,c)))&&a.push(h);return a}function Ive(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var kve=Object.prototype,Ave=kve.hasOwnProperty;function Mve(e){if(!Vc(e))return Ive(e);var t=pk(e),r=[];for(var n in e)n=="constructor"&&(t||!Ave.call(e,n))||r.push(n);return r}function wV(e){return ky(e)?xV(e,!0):Mve(e)}function Lve(e){return wve(e,wV(e))}function Rve(e,t,r,n,i,o,l){var a=c3(e,r),c=c3(t,r),h=l.get(c);if(h){u3(e,r,h);return}var g=o?o(a,c,r+"",e,t,l):void 0,v=g===void 0;if(v){var x=bc(c),b=!x&&mx(c),S=!x&&!b&&gk(c);g=c,x||b||S?bc(a)?g=a:Oye(a)?g=Iye(a):b?(v=!1,g=Eye(c)):S?(v=!1,g=Pye(c)):g=[]:Gye(c)||px(c)?(g=a,px(a)?g=Lve(a):(!Vc(a)||fk(a))&&(g=Mye(c))):v=!1}v&&(l.set(c,g),i(g,c,n,o,l),l.delete(c)),u3(e,r,g)}function SV(e,t,r,n,i){e!==t&&hV(t,function(o,l){if(i||(i=new Yd),Vc(o))Rve(e,t,l,r,SV,n,i);else{var a=n?n(c3(e,l),o,l+"",e,t,i):void 0;a===void 0&&(a=o),u3(e,l,a)}},wV)}function K2(e){return e}function Dve(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var BF=Math.max;function Nve(e,t,r){return t=BF(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=BF(n.length-t,0),l=Array(o);++i<o;)l[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(l),Dve(e,this,a)}}function Ove(e){return function(){return e}}var Fve=fx?function(e,t){return fx(e,"toString",{configurable:!0,enumerable:!1,value:Ove(t),writable:!0})}:K2,Bve=800,zve=16,jve=Date.now;function qve(e){var t=0,r=0;return function(){var n=jve(),i=zve-(n-r);if(r=n,i>0){if(++t>=Bve)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var $ve=qve(Fve);function Vve(e,t){return $ve(Nve(e,t,K2),e+"")}function Uve(e,t,r){if(!Vc(r))return!1;var n=typeof t;return(n=="number"?ky(r)&&yk(t,r.length):n=="string"&&t in r)?x1(r[t],e):!1}function Gve(e){return Vve(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,l=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,l&&Uve(r[0],r[1],l)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}var Zu=Gve(function(e,t,r){SV(e,t,r)}),w1=function(t){var r=t.zDepth,n=t.radius,i=t.background,o=t.children,l=t.styles,a=l===void 0?{}:l,c=Ti(Zu({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return ft.createElement("div",{style:c.wrap},ft.createElement("div",{style:c.bg}),ft.createElement("div",{style:c.content},o))};w1.propTypes={background:Cn.string,zDepth:Cn.oneOf([0,1,2,3,4,5]),radius:Cn.number,styles:Cn.object};w1.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var d4=function(){return _d.Date.now()},Hve=/\s/;function Wve(e){for(var t=e.length;t--&&Hve.test(e.charAt(t)););return t}var Xve=/^\s+/;function Yve(e){return e&&e.slice(0,Wve(e)+1).replace(Xve,"")}var Zve="[object Symbol]";function J2(e){return typeof e=="symbol"||qh(e)&&dm(e)==Zve}var zF=NaN,Kve=/^[-+]0x[0-9a-f]+$/i,Jve=/^0b[01]+$/i,Qve=/^0o[0-7]+$/i,e0e=parseInt;function jF(e){if(typeof e=="number")return e;if(J2(e))return zF;if(Vc(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Vc(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Yve(e);var r=Jve.test(e);return r||Qve.test(e)?e0e(e.slice(2),r?2:8):Kve.test(e)?zF:+e}var t0e="Expected a function",r0e=Math.max,n0e=Math.min;function CV(e,t,r){var n,i,o,l,a,c,h=0,g=!1,v=!1,x=!0;if(typeof e!="function")throw new TypeError(t0e);t=jF(t)||0,Vc(r)&&(g=!!r.leading,v="maxWait"in r,o=v?r0e(jF(r.maxWait)||0,t):o,x="trailing"in r?!!r.trailing:x);function b(z){var U=n,H=i;return n=i=void 0,h=z,l=e.apply(H,U),l}function S(z){return h=z,a=setTimeout(M,t),g?b(z):l}function I(z){var U=z-c,H=z-h,X=t-U;return v?n0e(X,o-H):X}function k(z){var U=z-c,H=z-h;return c===void 0||U>=t||U<0||v&&H>=o}function M(){var z=d4();if(k(z))return O(z);a=setTimeout(M,I(z))}function O(z){return a=void 0,x&&n?b(z):(n=i=void 0,l)}function F(){a!==void 0&&clearTimeout(a),h=0,n=c=i=a=void 0}function D(){return a===void 0?l:O(d4())}function q(){var z=d4(),U=k(z);if(n=arguments,i=this,c=z,U){if(a===void 0)return S(c);if(v)return clearTimeout(a),a=setTimeout(M,t),b(c)}return a===void 0&&(a=setTimeout(M,t)),l}return q.cancel=F,q.flush=D,q}var i0e="Expected a function";function a0e(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(i0e);return Vc(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),CV(e,t,{leading:n,maxWait:t,trailing:i})}var o0e=function(t,r,n){var i=n.getBoundingClientRect(),o=i.width,l=i.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=a-(n.getBoundingClientRect().left+window.pageXOffset),g=c-(n.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),g<0?g=0:g>l&&(g=l);var v=h/o,x=1-g/l;return{h:r.h,s:v,v:x,a:r.a,source:"hsv"}},s0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function l0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function c0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Q2=(function(e){c0e(t,e);function t(r){l0e(this,t);var n=u0e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,o0e(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var o=n.getContainerRenderWindow();o.addEventListener("mousemove",n.handleChange),o.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=a0e(function(i,o,l){i(o,l)},50),n}return s0e(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},o=i.color,l=i.white,a=i.black,c=i.pointer,h=i.circle,g=Ti({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:l,black:a,pointer:c,circle:h}},{custom:!!this.props.style});return ft.createElement("div",{style:g.color,ref:function(x){return n.container=x},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ft.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),ft.createElement("div",{style:g.white,className:"saturation-white"},ft.createElement("div",{style:g.black,className:"saturation-black"}),ft.createElement("div",{style:g.pointer},this.props.pointer?ft.createElement(this.props.pointer,this.props):ft.createElement("div",{style:g.circle}))))}}]),t})(J.PureComponent||J.Component);function d0e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var f0e=mV(Object.keys,Object),h0e=Object.prototype,p0e=h0e.hasOwnProperty;function m0e(e){if(!pk(e))return f0e(e);var t=[];for(var r in Object(e))p0e.call(e,r)&&r!="constructor"&&t.push(r);return t}function vk(e){return ky(e)?xV(e):m0e(e)}function g0e(e,t){return e&&hV(e,t,vk)}function y0e(e,t){return function(r,n){if(r==null)return r;if(!ky(r))return e(r,n);for(var i=r.length,o=-1,l=Object(r);++o<i&&n(l[o],o,l)!==!1;);return r}}var EV=y0e(g0e);function v0e(e){return typeof e=="function"?e:K2}function b0e(e,t){var r=bc(e)?d0e:EV;return r(e,v0e(t))}function gx(e){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gx(e)}var _0e=/^\s+/,x0e=/\s+$/;function Jn(e,t){if(e=e||"",t=t||{},e instanceof Jn)return e;if(!(this instanceof Jn))return new Jn(e,t);var r=w0e(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Jn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,o,l,a;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?l=n/12.92:l=Math.pow((n+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*a},setAlpha:function(t){return this._a=TV(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=$F(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=$F(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=qF(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=qF(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return VF(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return T0e(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Fo(this._r,255)*100)+"%",g:Math.round(Fo(this._g,255)*100)+"%",b:Math.round(Fo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Fo(this._r,255)*100)+"%, "+Math.round(Fo(this._g,255)*100)+"%, "+Math.round(Fo(this._b,255)*100)+"%)":"rgba("+Math.round(Fo(this._r,255)*100)+"%, "+Math.round(Fo(this._g,255)*100)+"%, "+Math.round(Fo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:B0e[VF(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+UF(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=Jn(t);n="#"+UF(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Jn(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(A0e,arguments)},brighten:function(){return this._applyModification(M0e,arguments)},darken:function(){return this._applyModification(L0e,arguments)},desaturate:function(){return this._applyModification(P0e,arguments)},saturate:function(){return this._applyModification(I0e,arguments)},greyscale:function(){return this._applyModification(k0e,arguments)},spin:function(){return this._applyModification(R0e,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(O0e,arguments)},complement:function(){return this._applyCombination(D0e,arguments)},monochromatic:function(){return this._applyCombination(F0e,arguments)},splitcomplement:function(){return this._applyCombination(N0e,arguments)},triad:function(){return this._applyCombination(GF,[3])},tetrad:function(){return this._applyCombination(GF,[4])}};Jn.fromRatio=function(e,t){if(gx(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=Uv(e[n]));e=r}return Jn(e,t)};function w0e(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,o=null,l=!1,a=!1;return typeof e=="string"&&(e=$0e(e)),gx(e)=="object"&&(Ef(e.r)&&Ef(e.g)&&Ef(e.b)?(t=S0e(e.r,e.g,e.b),l=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Ef(e.h)&&Ef(e.s)&&Ef(e.v)?(n=Uv(e.s),i=Uv(e.v),t=E0e(e.h,n,i),l=!0,a="hsv"):Ef(e.h)&&Ef(e.s)&&Ef(e.l)&&(n=Uv(e.s),o=Uv(e.l),t=C0e(e.h,n,o),l=!0,a="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=TV(r),{ok:l,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function S0e(e,t,r){return{r:Fo(e,255)*255,g:Fo(t,255)*255,b:Fo(r,255)*255}}function qF(e,t,r){e=Fo(e,255),t=Fo(t,255),r=Fo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,l,a=(n+i)/2;if(n==i)o=l=0;else{var c=n-i;switch(l=a>.5?c/(2-n-i):c/(n+i),n){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4;break}o/=6}return{h:o,s:l,l:a}}function C0e(e,t,r){var n,i,o;e=Fo(e,360),t=Fo(t,100),r=Fo(r,100);function l(h,g,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?h+(g-h)*6*v:v<1/2?g:v<2/3?h+(g-h)*(2/3-v)*6:h}if(t===0)n=i=o=r;else{var a=r<.5?r*(1+t):r+t-r*t,c=2*r-a;n=l(c,a,e+1/3),i=l(c,a,e),o=l(c,a,e-1/3)}return{r:n*255,g:i*255,b:o*255}}function $F(e,t,r){e=Fo(e,255),t=Fo(t,255),r=Fo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,l,a=n,c=n-i;if(l=n===0?0:c/n,n==i)o=0;else{switch(n){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4;break}o/=6}return{h:o,s:l,v:a}}function E0e(e,t,r){e=Fo(e,360)*6,t=Fo(t,100),r=Fo(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),l=r*(1-i*t),a=r*(1-(1-i)*t),c=n%6,h=[r,l,o,o,a,r][c],g=[a,r,r,l,o,o][c],v=[o,o,a,r,r,l][c];return{r:h*255,g:g*255,b:v*255}}function VF(e,t,r,n){var i=[sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16)),sd(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function T0e(e,t,r,n,i){var o=[sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16)),sd(Math.round(r).toString(16)),sd(PV(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function UF(e,t,r,n){var i=[sd(PV(n)),sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16)),sd(Math.round(r).toString(16))];return i.join("")}Jn.equals=function(e,t){return!e||!t?!1:Jn(e).toRgbString()==Jn(t).toRgbString()};Jn.random=function(){return Jn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function P0e(e,t){t=t===0?0:t||10;var r=Jn(e).toHsl();return r.s-=t/100,r.s=ew(r.s),Jn(r)}function I0e(e,t){t=t===0?0:t||10;var r=Jn(e).toHsl();return r.s+=t/100,r.s=ew(r.s),Jn(r)}function k0e(e){return Jn(e).desaturate(100)}function A0e(e,t){t=t===0?0:t||10;var r=Jn(e).toHsl();return r.l+=t/100,r.l=ew(r.l),Jn(r)}function M0e(e,t){t=t===0?0:t||10;var r=Jn(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),Jn(r)}function L0e(e,t){t=t===0?0:t||10;var r=Jn(e).toHsl();return r.l-=t/100,r.l=ew(r.l),Jn(r)}function R0e(e,t){var r=Jn(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,Jn(r)}function D0e(e){var t=Jn(e).toHsl();return t.h=(t.h+180)%360,Jn(t)}function GF(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Jn(e).toHsl(),n=[Jn(e)],i=360/t,o=1;o<t;o++)n.push(Jn({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function N0e(e){var t=Jn(e).toHsl(),r=t.h;return[Jn(e),Jn({h:(r+72)%360,s:t.s,l:t.l}),Jn({h:(r+216)%360,s:t.s,l:t.l})]}function O0e(e,t,r){t=t||6,r=r||30;var n=Jn(e).toHsl(),i=360/r,o=[Jn(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(Jn(n));return o}function F0e(e,t){t=t||6;for(var r=Jn(e).toHsv(),n=r.h,i=r.s,o=r.v,l=[],a=1/t;t--;)l.push(Jn({h:n,s:i,v:o})),o=(o+a)%1;return l}Jn.mix=function(e,t,r){r=r===0?0:r||50;var n=Jn(e).toRgb(),i=Jn(t).toRgb(),o=r/100,l={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return Jn(l)};Jn.readability=function(e,t){var r=Jn(e),n=Jn(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};Jn.isReadable=function(e,t,r){var n=Jn.readability(e,t),i,o;switch(o=!1,i=V0e(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};Jn.mostReadable=function(e,t,r){var n=null,i=0,o,l,a,c;r=r||{},l=r.includeFallbackColors,a=r.level,c=r.size;for(var h=0;h<t.length;h++)o=Jn.readability(e,t[h]),o>i&&(i=o,n=Jn(t[h]));return Jn.isReadable(e,n,{level:a,size:c})||!l?n:(r.includeFallbackColors=!1,Jn.mostReadable(e,["#fff","#000"],r))};var d3=Jn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B0e=Jn.hexNames=z0e(d3);function z0e(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function TV(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Fo(e,t){j0e(e)&&(e="100%");var r=q0e(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function ew(e){return Math.min(1,Math.max(0,e))}function uc(e){return parseInt(e,16)}function j0e(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function q0e(e){return typeof e=="string"&&e.indexOf("%")!=-1}function sd(e){return e.length==1?"0"+e:""+e}function Uv(e){return e<=1&&(e=e*100+"%"),e}function PV(e){return Math.round(parseFloat(e)*255).toString(16)}function HF(e){return uc(e)/255}var rd=(function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Ef(e){return!!rd.CSS_UNIT.exec(e)}function $0e(e){e=e.replace(_0e,"").replace(x0e,"").toLowerCase();var t=!1;if(d3[e])e=d3[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=rd.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=rd.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=rd.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=rd.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=rd.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=rd.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=rd.hex8.exec(e))?{r:uc(r[1]),g:uc(r[2]),b:uc(r[3]),a:HF(r[4]),format:t?"name":"hex8"}:(r=rd.hex6.exec(e))?{r:uc(r[1]),g:uc(r[2]),b:uc(r[3]),format:t?"name":"hex"}:(r=rd.hex4.exec(e))?{r:uc(r[1]+""+r[1]),g:uc(r[2]+""+r[2]),b:uc(r[3]+""+r[3]),a:HF(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=rd.hex3.exec(e))?{r:uc(r[1]+""+r[1]),g:uc(r[2]+""+r[2]),b:uc(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function V0e(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var WF=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return b0e(r,function(o){if(t[o]&&(n+=1,isNaN(t[o])||(i+=1),o==="s"||o==="l")){var l=/^\d+%$/;l.test(t[o])&&(i+=1)}}),n===i?t:!1},Gv=function(t,r){var n=t.hex?Jn(t.hex):Jn(t),i=n.toHsl(),o=n.toHsv(),l=n.toRgb(),a=n.toHex();i.s===0&&(i.h=r||0,o.h=r||0);var c=a==="000000"&&l.a===0;return{hsl:i,hex:c?"transparent":"#"+a,rgb:l,hsv:o,oldHue:t.h||r||i.h,source:t.source}},Yh=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&Jn(t).isValid()},bk=function(t){if(!t)return"#fff";var r=Gv(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},f4=function(t,r){var n=t.replace("","");return Jn(r+" ("+n+")")._ok},mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function G0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function W0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ku=function(t){var r=(function(n){W0e(i,n);function i(o){G0e(this,i);var l=H0e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return l.handleChange=function(a,c){var h=WF(a);if(h){var g=Gv(a,a.h||l.state.oldHue);l.setState(g),l.props.onChangeComplete&&l.debounce(l.props.onChangeComplete,g,c),l.props.onChange&&l.props.onChange(g,c)}},l.handleSwatchHover=function(a,c){var h=WF(a);if(h){var g=Gv(a,a.h||l.state.oldHue);l.props.onSwatchHover&&l.props.onSwatchHover(g,c)}},l.state=mv({},Gv(o.color,0)),l.debounce=CV(function(a,c,h){a(c,h)},100),l}return U0e(i,[{key:"render",value:function(){var l={};return this.props.onSwatchHover&&(l.onSwatchHover=this.handleSwatchHover),ft.createElement(t,mv({},this.props,this.state,{onChange:this.handleChange},l))}}],[{key:"getDerivedStateFromProps",value:function(l,a){return mv({},Gv(l.color,a.oldHue))}}]),i})(J.PureComponent||J.Component);return r.propTypes=mv({},t.propTypes),r.defaultProps=mv({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},X0e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Z0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function K0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var J0e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(n){K0e(i,n);function i(){var o,l,a,c;Z0e(this,i);for(var h=arguments.length,g=Array(h),v=0;v<h;v++)g[v]=arguments[v];return c=(l=(a=XF(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(g))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},l),XF(a,c)}return Y0e(i,[{key:"render",value:function(){return ft.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},ft.createElement(t,X0e({},this.props,this.state)))}}]),i})(ft.Component)},YF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q0e=13,e1e=function(t){var r=t.color,n=t.style,i=t.onClick,o=i===void 0?function(){}:i,l=t.onHover,a=t.title,c=a===void 0?r:a,h=t.children,g=t.focus,v=t.focusStyle,x=v===void 0?{}:v,b=r==="transparent",S=Ti({default:{swatch:YF({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,g?x:{})}}),I=function(D){return o(r,D)},k=function(D){return D.keyCode===Q0e&&o(r,D)},M=function(D){return l(r,D)},O={};return l&&(O.onMouseOver=M),ft.createElement("div",YF({style:S.swatch,onClick:I,title:c,tabIndex:0,onKeyDown:k},O),h,b&&ft.createElement(Py,{borderRadius:S.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const pm=J0e(e1e);var t1e=function(t){var r=t.direction,n=Ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return ft.createElement("div",{style:n.picker})},r1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IV=function(t){var r=t.rgb,n=t.hsl,i=t.width,o=t.height,l=t.onChange,a=t.direction,c=t.style,h=t.renderers,g=t.pointer,v=t.className,x=v===void 0?"":v,b=Ti({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:c}}});return ft.createElement("div",{style:b.picker,className:"alpha-picker "+x},ft.createElement(dk,r1e({},b.alpha,{rgb:r,hsl:n,pointer:g,renderers:h,onChange:l,direction:a})))};IV.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:t1e};Ku(IV);function kV(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var n1e="__lodash_hash_undefined__";function i1e(e){return this.__data__.set(e,n1e),this}function a1e(e){return this.__data__.has(e)}function yx(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new eh;++t<r;)this.add(e[t])}yx.prototype.add=yx.prototype.push=i1e;yx.prototype.has=a1e;function o1e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function s1e(e,t){return e.has(t)}var l1e=1,u1e=2;function AV(e,t,r,n,i,o){var l=r&l1e,a=e.length,c=t.length;if(a!=c&&!(l&&c>a))return!1;var h=o.get(e),g=o.get(t);if(h&&g)return h==t&&g==e;var v=-1,x=!0,b=r&u1e?new yx:void 0;for(o.set(e,t),o.set(t,e);++v<a;){var S=e[v],I=t[v];if(n)var k=l?n(I,S,v,t,e,o):n(S,I,v,e,t,o);if(k!==void 0){if(k)continue;x=!1;break}if(b){if(!o1e(t,function(M,O){if(!s1e(b,O)&&(S===M||i(S,M,r,n,o)))return b.push(O)})){x=!1;break}}else if(!(S===I||i(S,I,r,n,o))){x=!1;break}}return o.delete(e),o.delete(t),x}function c1e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function d1e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var f1e=1,h1e=2,p1e="[object Boolean]",m1e="[object Date]",g1e="[object Error]",y1e="[object Map]",v1e="[object Number]",b1e="[object RegExp]",_1e="[object Set]",x1e="[object String]",w1e="[object Symbol]",S1e="[object ArrayBuffer]",C1e="[object DataView]",ZF=jh?jh.prototype:void 0,h4=ZF?ZF.valueOf:void 0;function E1e(e,t,r,n,i,o,l){switch(r){case C1e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S1e:return!(e.byteLength!=t.byteLength||!o(new hx(e),new hx(t)));case p1e:case m1e:case v1e:return x1(+e,+t);case g1e:return e.name==t.name&&e.message==t.message;case b1e:case x1e:return e==t+"";case y1e:var a=c1e;case _1e:var c=n&f1e;if(a||(a=d1e),e.size!=t.size&&!c)return!1;var h=l.get(e);if(h)return h==t;n|=h1e,l.set(e,t);var g=AV(a(e),a(t),n,i,o,l);return l.delete(e),g;case w1e:if(h4)return h4.call(e)==h4.call(t)}return!1}function T1e(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function P1e(e,t,r){var n=t(e);return bc(e)?n:T1e(n,r(e))}function I1e(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var l=e[r];t(l,r,e)&&(o[i++]=l)}return o}function k1e(){return[]}var A1e=Object.prototype,M1e=A1e.propertyIsEnumerable,KF=Object.getOwnPropertySymbols,L1e=KF?function(e){return e==null?[]:(e=Object(e),I1e(KF(e),function(t){return M1e.call(e,t)}))}:k1e;function JF(e){return P1e(e,vk,L1e)}var R1e=1,D1e=Object.prototype,N1e=D1e.hasOwnProperty;function O1e(e,t,r,n,i,o){var l=r&R1e,a=JF(e),c=a.length,h=JF(t),g=h.length;if(c!=g&&!l)return!1;for(var v=c;v--;){var x=a[v];if(!(l?x in t:N1e.call(t,x)))return!1}var b=o.get(e),S=o.get(t);if(b&&S)return b==t&&S==e;var I=!0;o.set(e,t),o.set(t,e);for(var k=l;++v<c;){x=a[v];var M=e[x],O=t[x];if(n)var F=l?n(O,M,x,t,e,o):n(M,O,x,e,t,o);if(!(F===void 0?M===O||i(M,O,r,n,o):F)){I=!1;break}k||(k=x=="constructor")}if(I&&!k){var D=e.constructor,q=t.constructor;D!=q&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof q=="function"&&q instanceof q)&&(I=!1)}return o.delete(e),o.delete(t),I}var f3=hm(_d,"DataView"),h3=hm(_d,"Promise"),p3=hm(_d,"Set"),m3=hm(_d,"WeakMap"),QF="[object Map]",F1e="[object Object]",eB="[object Promise]",tB="[object Set]",rB="[object WeakMap]",nB="[object DataView]",B1e=fm(f3),z1e=fm(O0),j1e=fm(h3),q1e=fm(p3),$1e=fm(m3),xh=dm;(f3&&xh(new f3(new ArrayBuffer(1)))!=nB||O0&&xh(new O0)!=QF||h3&&xh(h3.resolve())!=eB||p3&&xh(new p3)!=tB||m3&&xh(new m3)!=rB)&&(xh=function(e){var t=dm(e),r=t==F1e?e.constructor:void 0,n=r?fm(r):"";if(n)switch(n){case B1e:return nB;case z1e:return QF;case j1e:return eB;case q1e:return tB;case $1e:return rB}return t});var V1e=1,iB="[object Arguments]",aB="[object Array]",Hb="[object Object]",U1e=Object.prototype,oB=U1e.hasOwnProperty;function G1e(e,t,r,n,i,o){var l=bc(e),a=bc(t),c=l?aB:xh(e),h=a?aB:xh(t);c=c==iB?Hb:c,h=h==iB?Hb:h;var g=c==Hb,v=h==Hb,x=c==h;if(x&&mx(e)){if(!mx(t))return!1;l=!0,g=!1}if(x&&!g)return o||(o=new Yd),l||gk(e)?AV(e,t,r,n,i,o):E1e(e,t,c,r,n,i,o);if(!(r&V1e)){var b=g&&oB.call(e,"__wrapped__"),S=v&&oB.call(t,"__wrapped__");if(b||S){var I=b?e.value():e,k=S?t.value():t;return o||(o=new Yd),i(I,k,r,n,o)}}return x?(o||(o=new Yd),O1e(e,t,r,n,i,o)):!1}function _k(e,t,r,n,i){return e===t?!0:e==null||t==null||!qh(e)&&!qh(t)?e!==e&&t!==t:G1e(e,t,r,n,_k,i)}var H1e=1,W1e=2;function X1e(e,t,r,n){var i=r.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var l=r[i];if(l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){l=r[i];var a=l[0],c=e[a],h=l[1];if(l[2]){if(c===void 0&&!(a in e))return!1}else{var g=new Yd,v;if(!(v===void 0?_k(h,c,H1e|W1e,n,g):v))return!1}}return!0}function MV(e){return e===e&&!Vc(e)}function Y1e(e){for(var t=vk(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,MV(i)]}return t}function LV(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Z1e(e){var t=Y1e(e);return t.length==1&&t[0][2]?LV(t[0][0],t[0][1]):function(r){return r===e||X1e(r,e,t)}}var K1e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J1e=/^\w*$/;function xk(e,t){if(bc(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||J2(e)?!0:J1e.test(e)||!K1e.test(e)||t!=null&&e in Object(t)}var Q1e="Expected a function";function wk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Q1e);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var l=e.apply(this,n);return r.cache=o.set(i,l)||o,l};return r.cache=new(wk.Cache||eh),r}wk.Cache=eh;var ebe=500;function tbe(e){var t=wk(e,function(n){return r.size===ebe&&r.clear(),n}),r=t.cache;return t}var rbe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nbe=/\\(\\)?/g,ibe=tbe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(rbe,function(r,n,i,o){t.push(i?o.replace(nbe,"$1"):n||r)}),t}),sB=jh?jh.prototype:void 0,lB=sB?sB.toString:void 0;function RV(e){if(typeof e=="string")return e;if(bc(e))return kV(e,RV)+"";if(J2(e))return lB?lB.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function abe(e){return e==null?"":RV(e)}function DV(e,t){return bc(e)?e:xk(e,t)?[e]:ibe(abe(e))}function tw(e){if(typeof e=="string"||J2(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function NV(e,t){t=DV(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[tw(t[r++])];return r&&r==n?e:void 0}function obe(e,t,r){var n=e==null?void 0:NV(e,t);return n===void 0?r:n}function sbe(e,t){return e!=null&&t in Object(e)}function lbe(e,t,r){t=DV(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var l=tw(t[n]);if(!(o=e!=null&&r(e,l)))break;e=e[l]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&mk(i)&&yk(l,i)&&(bc(e)||px(e)))}function ube(e,t){return e!=null&&lbe(e,t,sbe)}var cbe=1,dbe=2;function fbe(e,t){return xk(e)&&MV(t)?LV(tw(e),t):function(r){var n=obe(r,e);return n===void 0&&n===t?ube(r,e):_k(t,n,cbe|dbe)}}function hbe(e){return function(t){return t?.[e]}}function pbe(e){return function(t){return NV(t,e)}}function mbe(e){return xk(e)?hbe(tw(e)):pbe(e)}function gbe(e){return typeof e=="function"?e:e==null?K2:typeof e=="object"?bc(e)?fbe(e[0],e[1]):Z1e(e):mbe(e)}function ybe(e,t){var r=-1,n=ky(e)?Array(e.length):[];return EV(e,function(i,o,l){n[++r]=t(i,o,l)}),n}function mm(e,t){var r=bc(e)?kV:ybe;return r(e,gbe(t))}var vbe=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,o=Ti({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return ft.createElement("div",{style:o.swatches},mm(r,function(l){return ft.createElement(pm,{key:l,color:l,style:o.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+l}})}),ft.createElement("div",{style:o.clear}))},Sk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,l=t.width,a=t.triangle,c=t.styles,h=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=i==="transparent",b=function(k,M){Yh(k)&&r({hex:k,source:"hex"},M)},S=Ti(Zu({default:{card:{width:l,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:bk(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},h),{"hide-triangle":a==="hide"});return ft.createElement("div",{style:S.card,className:"block-picker "+v},ft.createElement("div",{style:S.triangle}),ft.createElement("div",{style:S.head},x&&ft.createElement(Py,{borderRadius:"6px 6px 0 0"}),ft.createElement("div",{style:S.label},i)),ft.createElement("div",{style:S.body},ft.createElement(vbe,{colors:o,onClick:b,onSwatchHover:n}),ft.createElement(aa,{style:{input:S.input},value:i,onChange:b})))};Sk.propTypes={width:Cn.oneOfType([Cn.string,Cn.number]),colors:Cn.arrayOf(Cn.string),triangle:Cn.oneOf(["top","hide"]),styles:Cn.object};Sk.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Ku(Sk);var lg={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},ug={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},cg={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},dg={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},fg={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},hg={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},pg={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},mg={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},gg={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},Hv={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},yg={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},vg={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},bg={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},_g={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},xg={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},wg={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},Sg={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Cg={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},OV=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,o=t.hover,l=t.active,a=t.circleSize,c=t.circleSpacing,h=Ti({default:{swatch:{width:a,height:a,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:o,active:l});return ft.createElement("div",{style:h.swatch},ft.createElement(pm,{style:h.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:h.Swatch.boxShadow+", 0 0 5px "+r}}))};OV.defaultProps={circleSize:28,circleSpacing:14};const bbe=ck.handleHover(OV);var Ck=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,o=t.colors,l=t.hex,a=t.circleSize,c=t.styles,h=c===void 0?{}:c,g=t.circleSpacing,v=t.className,x=v===void 0?"":v,b=Ti(Zu({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-g,marginBottom:-g}}},h)),S=function(k,M){return n({hex:k,source:"hex"},M)};return ft.createElement("div",{style:b.card,className:"circle-picker "+x},mm(o,function(I){return ft.createElement(bbe,{key:I,color:I,onClick:S,onSwatchHover:i,active:l===I.toLowerCase(),circleSize:a,circleSpacing:g})}))};Ck.propTypes={width:Cn.oneOfType([Cn.string,Cn.number]),circleSize:Cn.number,circleSpacing:Cn.number,styles:Cn.object};Ck.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[lg[500],ug[500],cg[500],dg[500],fg[500],hg[500],pg[500],mg[500],gg[500],Hv[500],yg[500],vg[500],bg[500],_g[500],xg[500],wg[500],Sg[500],Cg[500]],styles:{}};Ku(Ck);function uB(e){return e===void 0}var Wb={},cB;function _be(){if(cB)return Wb;cB=1,Object.defineProperty(Wb,"__esModule",{value:!0});var e=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])}return l},t=Y0(),r=n(t);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,a){var c={};for(var h in l)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(l,h)&&(c[h]=l[h]);return c}var o=24;return Wb.default=function(l){var a=l.fill,c=a===void 0?"currentColor":a,h=l.width,g=h===void 0?o:h,v=l.height,x=v===void 0?o:v,b=l.style,S=b===void 0?{}:b,I=i(l,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:c,width:g,height:x},S)},I),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Wb}var xbe=_be();const wbe=tf(xbe);var Sbe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Cbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ebe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Tbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var FV=(function(e){Tbe(t,e);function t(r){Cbe(this,t);var n=Ebe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,o){i.hex?Yh(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(uB(i.s)?n.props.hsl.s:i.s),l:Number(uB(i.l)?n.props.hsl.l:i.l),source:"hsl"},o))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return Sbe(t,[{key:"render",value:function(){var n=this,i=Ti({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=ft.createElement("div",{style:i.fields,className:"flexbox-fix"},ft.createElement("div",{style:i.field},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=ft.createElement("div",{style:i.fields,className:"flexbox-fix"},ft.createElement("div",{style:i.field},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),ft.createElement("div",{style:i.alpha},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=ft.createElement("div",{style:i.fields,className:"flexbox-fix"},ft.createElement("div",{style:i.field},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),ft.createElement("div",{style:i.alpha},ft.createElement(aa,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),ft.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,ft.createElement("div",{style:i.toggle},ft.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},ft.createElement(wbe,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t})(ft.Component);FV.defaultProps={view:"hex"};var dB=function(){var t=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return ft.createElement("div",{style:t.picker})},Pbe=function(){var t=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return ft.createElement("div",{style:t.picker})},Ek=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,o=t.rgb,l=t.hsl,a=t.hsv,c=t.hex,h=t.renderers,g=t.styles,v=g===void 0?{}:g,x=t.className,b=x===void 0?"":x,S=t.defaultView,I=Ti(Zu({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},v),{disableAlpha:i});return ft.createElement("div",{style:I.picker,className:"chrome-picker "+b},ft.createElement("div",{style:I.saturation},ft.createElement(Q2,{style:I.Saturation,hsl:l,hsv:a,pointer:Pbe,onChange:n})),ft.createElement("div",{style:I.body},ft.createElement("div",{style:I.controls,className:"flexbox-fix"},ft.createElement("div",{style:I.color},ft.createElement("div",{style:I.swatch},ft.createElement("div",{style:I.active}),ft.createElement(Py,{renderers:h}))),ft.createElement("div",{style:I.toggles},ft.createElement("div",{style:I.hue},ft.createElement(Iy,{style:I.Hue,hsl:l,pointer:dB,onChange:n})),ft.createElement("div",{style:I.alpha},ft.createElement(dk,{style:I.Alpha,rgb:o,hsl:l,pointer:dB,renderers:h,onChange:n})))),ft.createElement(FV,{rgb:o,hsl:l,hex:c,view:S,onChange:n,disableAlpha:i})))};Ek.propTypes={width:Cn.oneOfType([Cn.string,Cn.number]),disableAlpha:Cn.bool,styles:Cn.object,defaultView:Cn.oneOf(["hex","rgb","hsl"])};Ek.defaultProps={width:225,disableAlpha:!1,styles:{}};const Ibe=Ku(Ek);var kbe=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=t.active,a=Ti({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:bk(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:l,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return ft.createElement(pm,{style:a.color,color:r,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},ft.createElement("div",{style:a.dot}))},Abe=function(t){var r=t.hex,n=t.rgb,i=t.onChange,o=Ti({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(c,h){c.r||c.g||c.b?i({r:c.r||n.r,g:c.g||n.g,b:c.b||n.b,source:"rgb"},h):i({hex:c.hex,source:"hex"},h)};return ft.createElement("div",{style:o.fields,className:"flexbox-fix"},ft.createElement("div",{style:o.active}),ft.createElement(aa,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:r,onChange:l}),ft.createElement(aa,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:l}),ft.createElement(aa,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:l}),ft.createElement(aa,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:l}))},Tk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,o=t.hex,l=t.rgb,a=t.styles,c=a===void 0?{}:a,h=t.className,g=h===void 0?"":h,v=Ti(Zu({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},c)),x=function(S,I){S.hex?Yh(S.hex)&&r({hex:S.hex,source:"hex"},I):r(S,I)};return ft.createElement(w1,{style:v.Compact,styles:c},ft.createElement("div",{style:v.compact,className:"compact-picker "+g},ft.createElement("div",null,mm(i,function(b){return ft.createElement(kbe,{key:b,color:b,active:b.toLowerCase()===o,onClick:x,onSwatchHover:n})}),ft.createElement("div",{style:v.clear})),ft.createElement(Abe,{hex:o,rgb:l,onChange:x})))};Tk.propTypes={colors:Cn.arrayOf(Cn.string),styles:Cn.object};Tk.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Ku(Tk);var Mbe=function(t){var r=t.hover,n=t.color,i=t.onClick,o=t.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=Ti({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:r});return ft.createElement("div",{style:a.swatch},ft.createElement(pm,{color:n,onClick:i,onHover:o,focusStyle:l}))};const Lbe=ck.handleHover(Mbe);var Pk=function(t){var r=t.width,n=t.colors,i=t.onChange,o=t.onSwatchHover,l=t.triangle,a=t.styles,c=a===void 0?{}:a,h=t.className,g=h===void 0?"":h,v=Ti(Zu({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},c),{"hide-triangle":l==="hide","top-left-triangle":l==="top-left","top-right-triangle":l==="top-right","bottom-left-triangle":l==="bottom-left","bottom-right-triangle":l==="bottom-right"}),x=function(S,I){return i({hex:S,source:"hex"},I)};return ft.createElement("div",{style:v.card,className:"github-picker "+g},ft.createElement("div",{style:v.triangleShadow}),ft.createElement("div",{style:v.triangle}),mm(n,function(b){return ft.createElement(Lbe,{color:b,key:b,onClick:x,onSwatchHover:o})}))};Pk.propTypes={width:Cn.oneOfType([Cn.string,Cn.number]),colors:Cn.arrayOf(Cn.string),triangle:Cn.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Cn.object};Pk.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Ku(Pk);var Rbe=function(t){var r=t.direction,n=Ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return ft.createElement("div",{style:n.picker})},Dbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ik=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.hsl,l=t.direction,a=t.pointer,c=t.styles,h=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=Ti(Zu({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},h)),b=function(I){return i({a:1,h:I.h,l:.5,s:1})};return ft.createElement("div",{style:x.picker,className:"hue-picker "+v},ft.createElement(Iy,Dbe({},x.hue,{hsl:o,pointer:a,onChange:b,direction:l})))};Ik.propTypes={styles:Cn.object};Ik.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Rbe,styles:{}};Ku(Ik);var Nbe=function(t){var r=t.onChange,n=t.hex,i=t.rgb,o=t.styles,l=o===void 0?{}:o,a=t.className,c=a===void 0?"":a,h=Ti(Zu({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},l)),g=function(x,b){x.hex?Yh(x.hex)&&r({hex:x.hex,source:"hex"},b):(x.r||x.g||x.b)&&r({r:x.r||i.r,g:x.g||i.g,b:x.b||i.b,source:"rgb"},b)};return ft.createElement(w1,{styles:l},ft.createElement("div",{style:h.material,className:"material-picker "+c},ft.createElement(aa,{style:{wrap:h.HEXwrap,input:h.HEXinput,label:h.HEXlabel},label:"hex",value:n,onChange:g}),ft.createElement("div",{style:h.split,className:"flexbox-fix"},ft.createElement("div",{style:h.third},ft.createElement(aa,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"r",value:i.r,onChange:g})),ft.createElement("div",{style:h.third},ft.createElement(aa,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"g",value:i.g,onChange:g})),ft.createElement("div",{style:h.third},ft.createElement(aa,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"b",value:i.b,onChange:g})))))};Ku(Nbe);var Obe=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,o=t.hex,l=Ti({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(h,g){h["#"]?Yh(h["#"])&&r({hex:h["#"],source:"hex"},g):h.r||h.g||h.b?r({r:h.r||n.r,g:h.g||n.g,b:h.b||n.b,source:"rgb"},g):(h.h||h.s||h.v)&&r({h:h.h||i.h,s:h.s||i.s,v:h.v||i.v,source:"hsv"},g)};return ft.createElement("div",{style:l.fields},ft.createElement(aa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),ft.createElement(aa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),ft.createElement(aa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),ft.createElement("div",{style:l.divider}),ft.createElement(aa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:a}),ft.createElement(aa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:a}),ft.createElement(aa,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:a}),ft.createElement("div",{style:l.divider}),ft.createElement(aa,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),ft.createElement("div",{style:l.fieldSymbols},ft.createElement("div",{style:l.symbol},""),ft.createElement("div",{style:l.symbol},"%"),ft.createElement("div",{style:l.symbol},"%")))},Fbe=function(t){var r=t.hsl,n=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return ft.createElement("div",{style:n.picker})},Bbe=function(){var t=Ti({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return ft.createElement("div",{style:t.pointer},ft.createElement("div",{style:t.left},ft.createElement("div",{style:t.leftInside})),ft.createElement("div",{style:t.right},ft.createElement("div",{style:t.rightInside})))},fB=function(t){var r=t.onClick,n=t.label,i=t.children,o=t.active,l=Ti({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return ft.createElement("div",{style:l.button,onClick:r},n||i)},zbe=function(t){var r=t.rgb,n=t.currentColor,i=Ti({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return ft.createElement("div",null,ft.createElement("div",{style:i.label},"new"),ft.createElement("div",{style:i.swatches},ft.createElement("div",{style:i.new}),ft.createElement("div",{style:i.current})),ft.createElement("div",{style:i.label},"current"))},jbe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function qbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $be(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Vbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var kk=(function(e){Vbe(t,e);function t(r){qbe(this,t);var n=$be(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return jbe(t,[{key:"render",value:function(){var n=this.props,i=n.styles,o=i===void 0?{}:i,l=n.className,a=l===void 0?"":l,c=Ti(Zu({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return ft.createElement("div",{style:c.picker,className:"photoshop-picker "+a},ft.createElement("div",{style:c.head},this.props.header),ft.createElement("div",{style:c.body,className:"flexbox-fix"},ft.createElement("div",{style:c.saturation},ft.createElement(Q2,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Fbe,onChange:this.props.onChange})),ft.createElement("div",{style:c.hue},ft.createElement(Iy,{direction:"vertical",hsl:this.props.hsl,pointer:Bbe,onChange:this.props.onChange})),ft.createElement("div",{style:c.controls},ft.createElement("div",{style:c.top,className:"flexbox-fix"},ft.createElement("div",{style:c.previews},ft.createElement(zbe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),ft.createElement("div",{style:c.actions},ft.createElement(fB,{label:"OK",onClick:this.props.onAccept,active:!0}),ft.createElement(fB,{label:"Cancel",onClick:this.props.onCancel}),ft.createElement(Obe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t})(ft.Component);kk.propTypes={header:Cn.string,styles:Cn.object};kk.defaultProps={header:"Color Picker",styles:{}};Ku(kk);var Ube=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,l=t.disableAlpha,a=Ti({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:l}),c=function(g,v){g.hex?Yh(g.hex)&&r({hex:g.hex,source:"hex"},v):g.r||g.g||g.b?r({r:g.r||n.r,g:g.g||n.g,b:g.b||n.b,a:n.a,source:"rgb"},v):g.a&&(g.a<0?g.a=0:g.a>100&&(g.a=100),g.a/=100,r({h:i.h,s:i.s,l:i.l,a:g.a,source:"rgb"},v))};return ft.createElement("div",{style:a.fields,className:"flexbox-fix"},ft.createElement("div",{style:a.double},ft.createElement(aa,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:c})),ft.createElement("div",{style:a.single},ft.createElement(aa,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:c,dragLabel:"true",dragMax:"255"})),ft.createElement("div",{style:a.single},ft.createElement(aa,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:c,dragLabel:"true",dragMax:"255"})),ft.createElement("div",{style:a.single},ft.createElement(aa,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:c,dragLabel:"true",dragMax:"255"})),ft.createElement("div",{style:a.alpha},ft.createElement(aa,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:c,dragLabel:"true",dragMax:"100"})))},Gbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BV=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=Ti({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),a=function(h,g){i({hex:h,source:"hex"},g)};return ft.createElement("div",{style:l.colors,className:"flexbox-fix"},r.map(function(c){var h=typeof c=="string"?{color:c}:c,g=""+h.color+(h.title||"");return ft.createElement("div",{key:g,style:l.swatchWrap},ft.createElement(pm,Gbe({},h,{style:l.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+h.color}})))}))};BV.propTypes={colors:Cn.arrayOf(Cn.oneOfType([Cn.string,Cn.shape({color:Cn.string,title:Cn.string})])).isRequired};var Hbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ak=function(t){var r=t.width,n=t.rgb,i=t.hex,o=t.hsv,l=t.hsl,a=t.onChange,c=t.onSwatchHover,h=t.disableAlpha,g=t.presetColors,v=t.renderers,x=t.styles,b=x===void 0?{}:x,S=t.className,I=S===void 0?"":S,k=Ti(Zu({default:Hbe({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},b),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},b),{disableAlpha:h});return ft.createElement("div",{style:k.picker,className:"sketch-picker "+I},ft.createElement("div",{style:k.saturation},ft.createElement(Q2,{style:k.Saturation,hsl:l,hsv:o,onChange:a})),ft.createElement("div",{style:k.controls,className:"flexbox-fix"},ft.createElement("div",{style:k.sliders},ft.createElement("div",{style:k.hue},ft.createElement(Iy,{style:k.Hue,hsl:l,onChange:a})),ft.createElement("div",{style:k.alpha},ft.createElement(dk,{style:k.Alpha,rgb:n,hsl:l,renderers:v,onChange:a}))),ft.createElement("div",{style:k.color},ft.createElement(Py,null),ft.createElement("div",{style:k.activeColor}))),ft.createElement(Ube,{rgb:n,hsl:l,hex:i,onChange:a,disableAlpha:h}),ft.createElement(BV,{colors:g,onClick:a,onSwatchHover:c}))};Ak.propTypes={disableAlpha:Cn.bool,width:Cn.oneOfType([Cn.string,Cn.number]),styles:Cn.object};Ak.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Ku(Ak);var gv=function(t){var r=t.hsl,n=t.offset,i=t.onClick,o=i===void 0?function(){}:i,l=t.active,a=t.first,c=t.last,h=Ti({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:l,first:a,last:c}),g=function(x){return o({h:r.h,s:.5,l:n,source:"hsl"},x)};return ft.createElement("div",{style:h.swatch,onClick:g})},Wbe=function(t){var r=t.onClick,n=t.hsl,i=Ti({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return ft.createElement("div",{style:i.swatches},ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:r,first:!0})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:r})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:r})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:r})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:r,last:!0})),ft.createElement("div",{style:i.clear}))},Xbe=function(){var t=Ti({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return ft.createElement("div",{style:t.picker})},Mk=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,o=t.styles,l=o===void 0?{}:o,a=t.className,c=a===void 0?"":a,h=Ti(Zu({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},l));return ft.createElement("div",{style:h.wrap||{},className:"slider-picker "+c},ft.createElement("div",{style:h.hue},ft.createElement(Iy,{style:h.Hue,hsl:r,pointer:i,onChange:n})),ft.createElement("div",{style:h.swatches},ft.createElement(Wbe,{hsl:r,onClick:n})))};Mk.propTypes={styles:Cn.object};Mk.defaultProps={pointer:Xbe,styles:{}};Ku(Mk);var Xb={},hB;function Ybe(){if(hB)return Xb;hB=1,Object.defineProperty(Xb,"__esModule",{value:!0});var e=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])}return l},t=Y0(),r=n(t);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,a){var c={};for(var h in l)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(l,h)&&(c[h]=l[h]);return c}var o=24;return Xb.default=function(l){var a=l.fill,c=a===void 0?"currentColor":a,h=l.width,g=h===void 0?o:h,v=l.height,x=v===void 0?o:v,b=l.style,S=b===void 0?{}:b,I=i(l,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:c,width:g,height:x},S)},I),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Xb}var Zbe=Ybe();const Kbe=tf(Zbe);var Jbe=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=t.first,a=t.last,c=t.active,h=Ti({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:bk(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:l,last:a,active:c,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return ft.createElement(pm,{color:r,style:h.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},ft.createElement("div",{style:h.check},ft.createElement(Kbe,null)))},Qbe=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,o=t.active,l=Ti({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return ft.createElement("div",{style:l.group},mm(i,function(a,c){return ft.createElement(Jbe,{key:a,color:a,active:a.toLowerCase()===o,first:c===0,last:c===i.length-1,onClick:r,onSwatchHover:n})}))},Lk=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.onSwatchHover,l=t.colors,a=t.hex,c=t.styles,h=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=Ti(Zu({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},h)),b=function(I,k){return i({hex:I,source:"hex"},k)};return ft.createElement("div",{style:x.picker,className:"swatches-picker "+v},ft.createElement(w1,null,ft.createElement("div",{style:x.overflow},ft.createElement("div",{style:x.body},mm(l,function(S){return ft.createElement(Qbe,{key:S.toString(),group:S,active:a,onClick:b,onSwatchHover:o})}),ft.createElement("div",{style:x.clear})))))};Lk.propTypes={width:Cn.oneOfType([Cn.string,Cn.number]),height:Cn.oneOfType([Cn.string,Cn.number]),colors:Cn.arrayOf(Cn.arrayOf(Cn.string)),styles:Cn.object};Lk.defaultProps={width:320,height:240,colors:[[lg[900],lg[700],lg[500],lg[300],lg[100]],[ug[900],ug[700],ug[500],ug[300],ug[100]],[cg[900],cg[700],cg[500],cg[300],cg[100]],[dg[900],dg[700],dg[500],dg[300],dg[100]],[fg[900],fg[700],fg[500],fg[300],fg[100]],[hg[900],hg[700],hg[500],hg[300],hg[100]],[pg[900],pg[700],pg[500],pg[300],pg[100]],[mg[900],mg[700],mg[500],mg[300],mg[100]],[gg[900],gg[700],gg[500],gg[300],gg[100]],["#194D33",Hv[700],Hv[500],Hv[300],Hv[100]],[yg[900],yg[700],yg[500],yg[300],yg[100]],[vg[900],vg[700],vg[500],vg[300],vg[100]],[bg[900],bg[700],bg[500],bg[300],bg[100]],[_g[900],_g[700],_g[500],_g[300],_g[100]],[xg[900],xg[700],xg[500],xg[300],xg[100]],[wg[900],wg[700],wg[500],wg[300],wg[100]],[Sg[900],Sg[700],Sg[500],Sg[300],Sg[100]],[Cg[900],Cg[700],Cg[500],Cg[300],Cg[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Ku(Lk);var Rk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,l=t.width,a=t.triangle,c=t.styles,h=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=Ti(Zu({default:{card:{width:l,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},h),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),b=function(I,k){Yh(I)&&r({hex:I,source:"hex"},k)};return ft.createElement("div",{style:x.card,className:"twitter-picker "+v},ft.createElement("div",{style:x.triangleShadow}),ft.createElement("div",{style:x.triangle}),ft.createElement("div",{style:x.body},mm(o,function(S,I){return ft.createElement(pm,{key:I,color:S,hex:S,style:x.swatch,onClick:b,onHover:n,focusStyle:{boxShadow:"0 0 4px "+S}})}),ft.createElement("div",{style:x.hash},"#"),ft.createElement(aa,{label:null,style:{input:x.input},value:i.replace("#",""),onChange:b}),ft.createElement("div",{style:x.clear})))};Rk.propTypes={width:Cn.oneOfType([Cn.string,Cn.number]),triangle:Cn.oneOf(["hide","top-left","top-right"]),colors:Cn.arrayOf(Cn.string),styles:Cn.object};Rk.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Ku(Rk);var Dk=function(t){var r=Ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return ft.createElement("div",{style:r.picker})};Dk.propTypes={hsl:Cn.shape({h:Cn.number,s:Cn.number,l:Cn.number,a:Cn.number})};Dk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Nk=function(t){var r=Ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return ft.createElement("div",{style:r.picker})};Nk.propTypes={hsl:Cn.shape({h:Cn.number,s:Cn.number,l:Cn.number,a:Cn.number})};Nk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var e_e=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,l=t.hsv,a=function(b,S){if(b.hex)Yh(b.hex)&&r({hex:b.hex,source:"hex"},S);else if(b.rgb){var I=b.rgb.split(",");f4(b.rgb,"rgb")&&r({r:I[0],g:I[1],b:I[2],a:1,source:"rgb"},S)}else if(b.hsv){var k=b.hsv.split(",");f4(b.hsv,"hsv")&&(k[2]=k[2].replace("%",""),k[1]=k[1].replace("%",""),k[0]=k[0].replace("",""),k[1]==1?k[1]=.01:k[2]==1&&(k[2]=.01),r({h:Number(k[0]),s:Number(k[1]),v:Number(k[2]),source:"hsv"},S))}else if(b.hsl){var M=b.hsl.split(",");f4(b.hsl,"hsl")&&(M[2]=M[2].replace("%",""),M[1]=M[1].replace("%",""),M[0]=M[0].replace("",""),v[1]==1?v[1]=.01:v[2]==1&&(v[2]=.01),r({h:Number(M[0]),s:Number(M[1]),v:Number(M[2]),source:"hsl"},S))}},c=Ti({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),h=n.r+", "+n.g+", "+n.b,g=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",v=Math.round(l.h)+", "+Math.round(l.s*100)+"%, "+Math.round(l.v*100)+"%";return ft.createElement("div",{style:c.wrap,className:"flexbox-fix"},ft.createElement("div",{style:c.fields},ft.createElement("div",{style:c.double},ft.createElement(aa,{style:{input:c.input,label:c.label},label:"hex",value:o,onChange:a})),ft.createElement("div",{style:c.column},ft.createElement("div",{style:c.single},ft.createElement(aa,{style:{input:c.input2,label:c.label2},label:"rgb",value:h,onChange:a})),ft.createElement("div",{style:c.single},ft.createElement(aa,{style:{input:c.input2,label:c.label2},label:"hsv",value:v,onChange:a})),ft.createElement("div",{style:c.single},ft.createElement(aa,{style:{input:c.input2,label:c.label2},label:"hsl",value:g,onChange:a})))))},Ok=function(t){var r=t.width,n=t.onChange,i=t.rgb,o=t.hsl,l=t.hsv,a=t.hex,c=t.header,h=t.styles,g=h===void 0?{}:h,v=t.className,x=v===void 0?"":v,b=Ti(Zu({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},g));return ft.createElement("div",{style:b.picker,className:"google-picker "+x},ft.createElement("div",{style:b.head},c),ft.createElement("div",{style:b.swatch}),ft.createElement("div",{style:b.saturation},ft.createElement(Q2,{hsl:o,hsv:l,pointer:Dk,onChange:n})),ft.createElement("div",{style:b.body},ft.createElement("div",{style:b.controls,className:"flexbox-fix"},ft.createElement("div",{style:b.hue},ft.createElement(Iy,{style:b.Hue,hsl:o,radius:"4px",pointer:Nk,onChange:n}))),ft.createElement(e_e,{rgb:i,hsl:o,hex:a,hsv:l,onChange:n})))};Ok.propTypes={width:Cn.oneOfType([Cn.string,Cn.number]),styles:Cn.object,header:Cn.string};Ok.defaultProps={width:652,styles:{},header:"Color picker"};Ku(Ok);const Wv={rgba:e=>`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`,rgb:e=>`rgb(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b})`,hex:e=>e.hex,rgba_rgb:e=>e.rgb.a===1?Wv.rgb(e):Wv.rgba(e),rgba_hex:e=>e.rgb.a===1?Wv.hex(e):Wv.rgba(e)},B0=({convert:e,...t})=>{const[r,n]=J.useState(!1),i=t?.value||"";return Z.jsxs(Z.Fragment,{children:[Z.jsx(Rf,{container:!0,sx:{flexWrap:"nowrap"},children:Z.jsx(Rf,{size:12,children:Z.jsxs(Ui,{variant:"outlined",onClick:()=>n(!0),sx:{minWidth:"100%",padding:"5px",marginBottom:"10px",justifyContent:"flex-start",borderColor:o=>o.palette.text.primary,color:o=>o.palette.text.primary},children:[Z.jsx("div",{style:{width:"25px",height:"25px",marginRight:"10px",backgroundColor:i}}),i]})})}),r&&Z.jsx("div",{style:{position:"relative",marginTop:0},children:Z.jsxs("div",{style:{position:"absolute",zIndex:1e3},children:[Z.jsx("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:()=>{n(!1)}}),Z.jsx(Ibe,{color:i,onChange:o=>{const l=Wv[e](o);t?.onChange?.(l)}})]})})]})};B0.defaultProps={convert:"rgba_hex",label:"Color",name:"color"};try{B0.displayName="ColorPicker",B0.__docgenInfo={description:"",displayName:"ColorPicker",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void) | undefined"}},convert:{defaultValue:{value:"rgba_hex"},description:"",name:"convert",required:!1,type:{name:"enum",value:[{value:'"rgb"'},{value:'"rgba"'},{value:'"rgba_hex"'},{value:'"hex"'},{value:'"rgba_rgb"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | undefined"}}}}}catch{}function g3({propKey:e,value:t,setPaintProps:r}){return Z.jsx(B0,{value:t,label:"Color",onChange:n=>{r(i=>({...i,[e]:n}))}})}try{g3.displayName="PaintPropsColorPicker",g3.__docgenInfo={description:"",displayName:"PaintPropsColorPicker",props:{key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},propKey:{defaultValue:null,description:"",name:"propKey",required:!0,type:{name:"string"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}}}}}catch{}const t_e=Ar(Nc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"}),r_e=Ar(vo)({marginLeft:"61px"}),zV={"circle-color":"colorpicker","circle-radius":"slider","circle-stroke-color":"colorpicker","circle-stroke-width":"slider","fill-color":"colorpicker","fill-outline-color":"colorpicker","line-color":"colorpicker","line-width":"slider","line-blur":"slider"},n_e=Object.keys(zV),i_e={"circle-stroke-width":{step:1,min:1,max:20},"circle-radius":{step:1,min:1,max:100},"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function vx({paintProps:e={},setPaintProps:t}){const r=J.useRef(Math.round(Math.random()*1e10)),n=J.useCallback(i=>{if(n_e.indexOf(i)!==-1&&(typeof e[i]=="number"||typeof e[i]=="string")){const o=Z.jsx(Qo,{id:i+"_label",gutterBottom:!0,children:i});switch(zV[i]){case"slider":return Z.jsxs(ft.Fragment,{children:[o,Z.jsx(KP,{...i_e[i],value:e[i],valueLabelDisplay:"auto",onChange:(l,a)=>{a&&t(c=>({...c,[i]:a}))}})]},i);case"numberfield":return Z.jsxs(ft.Fragment,{children:[o,Z.jsx(E2,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:e[i],onChange:l=>{l?.target?.value&&t(a=>({...a,[i]:parseInt(l.target.value)}))}})]},i);case"colorpicker":return Z.jsxs(ft.Fragment,{children:[o,Z.jsx(vo,{sx:{"& > div":{width:"initial !important"}},children:Z.jsx(g3,{value:e[i],propKey:i,setPaintProps:t},i)})]},i)}}return null},[e]);return Z.jsx(Z.Fragment,{children:Z.jsx(t_e,{children:Z.jsx(Bc,{children:Z.jsx(r_e,{children:Object.keys(e).map(i=>n(i))})},r+"_paintPropForm")})})}try{vx.displayName="LayerPropertyForm",vx.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{paintProps:{defaultValue:{value:"{}"},description:"",name:"paintProps",required:!1,type:{name:"paintPropsType"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}},layerType:{defaultValue:null,description:"",name:"layerType",required:!0,type:{name:"string"}}}}}catch{}const bx=Ar(Bc)(e=>({paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"})),a_e=Ar(pc)({padding:"4px",marginTop:"-3px"}),kf=Ar(S0)({minWidth:"30px"}),Af=Ar(ty)({padding:0});function _x({configurable:e,vtProps:t,setVtProps:r,id:n,...i}){const[o,l]=J.useState(!1),[a,c]=J.useState(!0),[h,g]=J.useState(t.layers[n].paint);return J.useEffect(()=>{if(!r||typeof t.layers[n]?.layout?.visibility>"u"&&a||!a&&t.layers[n]?.layout?.visibility==="none"||a&&t.layers[n]?.layout?.visibility==="visible")return;const v=[...t.layers];v[n].layout?v[n].layout.visibility=a?"visible":"none":v[n].layout={visibility:a?"visible":"none"},r({...t,layers:v})},[a,n,r,t]),J.useEffect(()=>{c(!!i.visibleMaster)},[i.visibleMaster]),J.useEffect(()=>{if(r&&JSON.stringify(h)!==JSON.stringify(t.layers[n].paint)){const v={...h},x=[...t.layers];x[n].paint=v,r({...t,layers:x})}},[h,n,r,t]),Z.jsxs(Z.Fragment,{children:[Z.jsxs(bx,{secondaryAction:e?Z.jsx(a_e,{edge:"end","aria-label":"comments",onClick:()=>{l(v=>!v)},children:Z.jsx(WI,{})}):void 0,children:[Z.jsx(kf,{children:Z.jsx(Af,{checked:a,onClick:()=>{c(v=>!v)}})}),Z.jsx(Ac,{primary:t.layers[n].id,variant:"layerlist"})]},n),e&&o&&Z.jsx(vx,{paintProps:h,setPaintProps:g,layerType:t.layers[n].type})]})}_x.defaultProps={configurable:!0};try{bx.displayName="ListItemStyled",bx.__docgenInfo={description:"",displayName:"ListItemStyled",props:{}}}catch{}try{kf.displayName="CheckboxListItemIcon",kf.__docgenInfo={description:"",displayName:"CheckboxListItemIcon",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<unknown> | undefined"}}}}}catch{}try{Af.displayName="CheckboxStyled",Af.__docgenInfo={description:"",displayName:"CheckboxStyled",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | undefined"}},slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<CheckboxSlots> | undefined"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<SwitchBaseProps, keyof IntrinsicElements>, CheckboxRootSlotPropsOverrides, CheckboxOwnerState> | undefined; input?: SlotProps<...> | undefined; } | undefined"}}}}}catch{}try{_x.displayName="LayerListItemVectorLayer",_x.__docgenInfo={description:"",displayName:"LayerListItemVectorLayer",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},configurable:{defaultValue:{value:"true"},description:"",name:"configurable",required:!1,type:{name:"boolean | undefined"}},vtProps:{defaultValue:null,description:"",name:"vtProps",required:!0,type:{name:"MlVectorTileLayerProps"}},setVtProps:{defaultValue:null,description:"",name:"setVtProps",required:!0,type:{name:"((state: unknown) => void) | undefined"}},visibleMaster:{defaultValue:null,description:"",name:"visibleMaster",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function fy(e){return Z.jsx(Z.Fragment,{children:Z.jsxs(UP,{open:e.open,onClose:e.onCancel,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Z.jsx(im,{id:"alert-dialog-title",children:e.title}),Z.jsx(GP,{children:Z.jsx(Rte,{id:"alert-dialog-description",children:e.text})}),Z.jsxs(s1,{children:[Z.jsx(Ui,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(Ui,{onClick:e.onConfirm,autoFocus:!0,children:"Confirm"})]})]})})}fy.defaultProps={title:"Confirm",text:"Are you sure?"};try{fy.displayName="ConfirmDialog",fy.__docgenInfo={description:"",displayName:"ConfirmDialog",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},title:{defaultValue:{value:"Confirm"},description:"",name:"title",required:!1,type:{name:"string"}},text:{defaultValue:{value:"Are you sure?"},description:"",name:"text",required:!1,type:{name:"string"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}function o_e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return J.useMemo(()=>n=>{t.forEach(i=>i(n))},t)}const rw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ay(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Fk(e){return"nodeType"in e}function Ju(e){var t,r;return e?Ay(e)?e:Fk(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Bk(e){const{Document:t}=Ju(e);return e instanceof t}function S1(e){return Ay(e)?!1:e instanceof Ju(e).HTMLElement}function jV(e){return e instanceof Ju(e).SVGElement}function My(e){return e?Ay(e)?e.document:Fk(e)?Bk(e)?e:S1(e)||jV(e)?e.ownerDocument:document:document:document}const ef=rw?J.useLayoutEffect:J.useEffect;function zk(e){const t=J.useRef(e);return ef(()=>{t.current=e}),J.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}function s_e(){const e=J.useRef(null),t=J.useCallback((n,i)=>{e.current=setInterval(n,i)},[]),r=J.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function z0(e,t){t===void 0&&(t=[e]);const r=J.useRef(e);return ef(()=>{r.current!==e&&(r.current=e)},t),r}function C1(e,t){const r=J.useRef();return J.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function xx(e){const t=zk(e),r=J.useRef(null),n=J.useCallback(i=>{i!==r.current&&t?.(i,r.current),r.current=i},[]);return[r,n]}function y3(e){const t=J.useRef();return J.useEffect(()=>{t.current=e},[e]),t.current}let p4={};function E1(e,t){return J.useMemo(()=>{if(t)return t;const r=p4[e]==null?0:p4[e]+1;return p4[e]=r,e+"-"+r},[e,t])}function qV(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((o,l)=>{const a=Object.entries(l);for(const[c,h]of a){const g=o[c];g!=null&&(o[c]=g+e*h)}return o},{...t})}}const Ug=qV(1),wx=qV(-1);function l_e(e){return"clientX"in e&&"clientY"in e}function jk(e){if(!e)return!1;const{KeyboardEvent:t}=Ju(e.target);return t&&e instanceof t}function u_e(e){if(!e)return!1;const{TouchEvent:t}=Ju(e.target);return t&&e instanceof t}function v3(e){if(u_e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return l_e(e)?{x:e.clientX,y:e.clientY}:null}const j0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[j0.Translate.toString(e),j0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),pB="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function c_e(e){return e.matches(pB)?e:e.querySelector(pB)}const d_e={display:"none"};function f_e(e){let{id:t,value:r}=e;return ft.createElement("div",{id:t,style:d_e},r)}function h_e(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ft.createElement("div",{id:t,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function p_e(){const[e,t]=J.useState("");return{announce:J.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const $V=J.createContext(null);function m_e(e){const t=J.useContext($V);J.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function g_e(){const[e]=J.useState(()=>new Set),t=J.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[J.useCallback(n=>{let{type:i,event:o}=n;e.forEach(l=>{var a;return(a=l[i])==null?void 0:a.call(l,o)})},[e]),t]}const y_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},v_e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function b_e(e){let{announcements:t=v_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=y_e}=e;const{announce:o,announcement:l}=p_e(),a=E1("DndLiveRegion"),[c,h]=J.useState(!1);if(J.useEffect(()=>{h(!0)},[]),m_e(J.useMemo(()=>({onDragStart(v){let{active:x}=v;o(t.onDragStart({active:x}))},onDragMove(v){let{active:x,over:b}=v;t.onDragMove&&o(t.onDragMove({active:x,over:b}))},onDragOver(v){let{active:x,over:b}=v;o(t.onDragOver({active:x,over:b}))},onDragEnd(v){let{active:x,over:b}=v;o(t.onDragEnd({active:x,over:b}))},onDragCancel(v){let{active:x,over:b}=v;o(t.onDragCancel({active:x,over:b}))}}),[o,t])),!c)return null;const g=ft.createElement(ft.Fragment,null,ft.createElement(f_e,{id:n,value:i.draggable}),ft.createElement(h_e,{id:a,announcement:l}));return r?Mf.createPortal(g,r):g}var sl;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(sl||(sl={}));function Sx(){}function mB(e,t){return J.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function __e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return J.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const pd=Object.freeze({x:0,y:0});function x_e(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function w_e(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function S_e(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function C_e(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function gB(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const E_e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=gB(t,t.left,t.top),o=[];for(const l of n){const{id:a}=l,c=r.get(a);if(c){const h=x_e(gB(c),i);o.push({id:a,data:{droppableContainer:l,value:h}})}}return o.sort(w_e)};function T_e(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-n,a=o-r;if(n<i&&r<o){const c=t.width*t.height,h=e.width*e.height,g=l*a,v=g/(c+h-g);return Number(v.toFixed(4))}return 0}const P_e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=[];for(const o of n){const{id:l}=o,a=r.get(l);if(a){const c=T_e(a,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(S_e)};function I_e(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function VV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:pd}function k_e(e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.reduce((l,a)=>({...l,top:l.top+e*a.y,bottom:l.bottom+e*a.y,left:l.left+e*a.x,right:l.right+e*a.x}),{...r})}}const A_e=k_e(1);function M_e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function L_e(e,t,r){const n=M_e(t);if(!n)return e;const{scaleX:i,scaleY:o,x:l,y:a}=n,c=e.left-l-(1-i)*parseFloat(r),h=e.top-a-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),g=i?e.width/i:e.width,v=o?e.height/o:e.height;return{width:g,height:v,top:h,right:c+g,bottom:h+v,left:c}}const R_e={ignoreTransform:!1};function Ly(e,t){t===void 0&&(t=R_e);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:g}=Ju(e).getComputedStyle(e);h&&(r=L_e(r,h,g))}const{top:n,left:i,width:o,height:l,bottom:a,right:c}=r;return{top:n,left:i,width:o,height:l,bottom:a,right:c}}function yB(e){return Ly(e,{ignoreTransform:!0})}function D_e(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function N_e(e,t){return t===void 0&&(t=Ju(e).getComputedStyle(e)),t.position==="fixed"}function O_e(e,t){t===void 0&&(t=Ju(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?r.test(o):!1})}function qk(e,t){const r=[];function n(i){if(t!=null&&r.length>=t||!i)return r;if(Bk(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!S1(i)||jV(i)||r.includes(i))return r;const o=Ju(e).getComputedStyle(i);return i!==e&&O_e(i,o)&&r.push(i),N_e(i,o)?r:n(i.parentNode)}return e?n(e):r}function UV(e){const[t]=qk(e,1);return t??null}function m4(e){return!rw||!e?null:Ay(e)?e:Fk(e)?Bk(e)||e===My(e).scrollingElement?window:S1(e)?e:null:null}function GV(e){return Ay(e)?e.scrollX:e.scrollLeft}function HV(e){return Ay(e)?e.scrollY:e.scrollTop}function b3(e){return{x:GV(e),y:HV(e)}}var Sl;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Sl||(Sl={}));function WV(e){return!rw||!e?!1:e===document.scrollingElement}function XV(e){const t={x:0,y:0},r=WV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=n.y,a=e.scrollLeft>=n.x;return{isTop:i,isLeft:o,isBottom:l,isRight:a,maxScroll:n,minScroll:t}}const F_e={x:.2,y:.2};function B_e(e,t,r,n,i){let{top:o,left:l,right:a,bottom:c}=r;n===void 0&&(n=10),i===void 0&&(i=F_e);const{isTop:h,isBottom:g,isLeft:v,isRight:x}=XV(e),b={x:0,y:0},S={x:0,y:0},I={height:t.height*i.y,width:t.width*i.x};return!h&&o<=t.top+I.height?(b.y=Sl.Backward,S.y=n*Math.abs((t.top+I.height-o)/I.height)):!g&&c>=t.bottom-I.height&&(b.y=Sl.Forward,S.y=n*Math.abs((t.bottom-I.height-c)/I.height)),!x&&a>=t.right-I.width?(b.x=Sl.Forward,S.x=n*Math.abs((t.right-I.width-a)/I.width)):!v&&l<=t.left+I.width&&(b.x=Sl.Backward,S.x=n*Math.abs((t.left+I.width-l)/I.width)),{direction:b,speed:S}}function z_e(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:r,right:n,bottom:i}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:i,width:e.clientWidth,height:e.clientHeight}}function YV(e){return e.reduce((t,r)=>Ug(t,b3(r)),pd)}function j_e(e){return e.reduce((t,r)=>t+GV(r),0)}function q_e(e){return e.reduce((t,r)=>t+HV(r),0)}function $_e(e,t){if(t===void 0&&(t=Ly),!e)return;const{top:r,left:n,bottom:i,right:o}=t(e);UV(e)&&(i<=0||o<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const V_e=[["x",["left","right"],j_e],["y",["top","bottom"],q_e]];class $k{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=qk(r),i=YV(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,a]of V_e)for(const c of l)Object.defineProperty(this,c,{get:()=>{const h=a(n),g=i[o]-h;return this.rect[c]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class f0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var i;(i=this.target)==null||i.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function U_e(e){const{EventTarget:t}=Ju(e);return e instanceof t?e:My(e)}function g4(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Ic;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ic||(Ic={}));function vB(e){e.preventDefault()}function G_e(e){e.stopPropagation()}var Pa;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Pa||(Pa={}));const ZV={start:[Pa.Space,Pa.Enter],cancel:[Pa.Esc],end:[Pa.Space,Pa.Enter,Pa.Tab]},H_e=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Pa.Right:return{...r,x:r.x+25};case Pa.Left:return{...r,x:r.x-25};case Pa.Down:return{...r,y:r.y+25};case Pa.Up:return{...r,y:r.y-25}}};class KV{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new f0(My(r)),this.windowListeners=new f0(Ju(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ic.Resize,this.handleCancel),this.windowListeners.add(Ic.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ic.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&$_e(n),r(pd)}handleKeyDown(t){if(jk(t)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:o=ZV,coordinateGetter:l=H_e,scrollBehavior:a="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:h}=n.current,g=h?{x:h.left,y:h.top}:pd;this.referenceCoordinates||(this.referenceCoordinates=g);const v=l(t,{active:r,context:n.current,currentCoordinates:g});if(v){const x=wx(v,g),b={x:0,y:0},{scrollableAncestors:S}=n.current;for(const I of S){const k=t.code,{isTop:M,isRight:O,isLeft:F,isBottom:D,maxScroll:q,minScroll:z}=XV(I),U=z_e(I),H={x:Math.min(k===Pa.Right?U.right-U.width/2:U.right,Math.max(k===Pa.Right?U.left:U.left+U.width/2,v.x)),y:Math.min(k===Pa.Down?U.bottom-U.height/2:U.bottom,Math.max(k===Pa.Down?U.top:U.top+U.height/2,v.y))},X=k===Pa.Right&&!O||k===Pa.Left&&!F,ie=k===Pa.Down&&!D||k===Pa.Up&&!M;if(X&&H.x!==v.x){const ee=I.scrollLeft+x.x,G=k===Pa.Right&&ee<=q.x||k===Pa.Left&&ee>=z.x;if(G&&!x.y){I.scrollTo({left:ee,behavior:a});return}G?b.x=I.scrollLeft-ee:b.x=k===Pa.Right?I.scrollLeft-q.x:I.scrollLeft-z.x,b.x&&I.scrollBy({left:-b.x,behavior:a});break}else if(ie&&H.y!==v.y){const ee=I.scrollTop+x.y,G=k===Pa.Down&&ee<=q.y||k===Pa.Up&&ee>=z.y;if(G&&!x.x){I.scrollTo({top:ee,behavior:a});return}G?b.y=I.scrollTop-ee:b.y=k===Pa.Down?I.scrollTop-q.y:I.scrollTop-z.y,b.y&&I.scrollBy({top:-b.y,behavior:a});break}}this.handleMove(t,Ug(wx(v,this.referenceCoordinates),b))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KV.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=ZV,onActivation:i}=t,{active:o}=r;const{code:l}=e.nativeEvent;if(n.start.includes(l)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function bB(e){return!!(e&&"distance"in e)}function _B(e){return!!(e&&"delay"in e)}class Vk{constructor(t,r,n){var i;n===void 0&&(n=U_e(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:l}=o;this.props=t,this.events=r,this.document=My(l),this.documentListeners=new f0(this.document),this.listeners=new f0(n),this.windowListeners=new f0(Ju(l)),this.initialCoordinates=(i=v3(o))!=null?i:pd,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ic.Resize,this.handleCancel),this.windowListeners.add(Ic.DragStart,vB),this.windowListeners.add(Ic.VisibilityChange,this.handleCancel),this.windowListeners.add(Ic.ContextMenu,vB),this.documentListeners.add(Ic.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(_B(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(bB(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:i}=this.props;i(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ic.Click,G_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ic.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:a}}=o;if(!i)return;const c=(r=v3(t))!=null?r:pd,h=wx(i,c);if(!n&&a){if(bB(a)){if(a.tolerance!=null&&g4(h,a.tolerance))return this.handleCancel();if(g4(h,a.distance))return this.handleStart()}if(_B(a)&&g4(h,a.tolerance))return this.handleCancel();this.handlePending(a,h);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Pa.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const W_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Uk extends Vk{constructor(t){const{event:r}=t,n=My(r.target);super(t,W_e,n)}}Uk.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];const X_e={move:{name:"mousemove"},end:{name:"mouseup"}};var _3;(function(e){e[e.RightClick=2]="RightClick"})(_3||(_3={}));class JV extends Vk{constructor(t){super(t,X_e,My(t.event.target))}}JV.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===_3.RightClick?!1:(n?.({event:r}),!0)}}];const y4={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Y_e extends Vk{constructor(t){super(t,y4)}static setup(){return window.addEventListener(y4.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(y4.move.name,t)};function t(){}}}Y_e.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:i}=r;return i.length>1?!1:(n?.({event:r}),!0)}}];var h0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(h0||(h0={}));var Cx;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Cx||(Cx={}));function Z_e(e){let{acceleration:t,activator:r=h0.Pointer,canScroll:n,draggingRect:i,enabled:o,interval:l=5,order:a=Cx.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:g,delta:v,threshold:x}=e;const b=J_e({delta:v,disabled:!o}),[S,I]=s_e(),k=J.useRef({x:0,y:0}),M=J.useRef({x:0,y:0}),O=J.useMemo(()=>{switch(r){case h0.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case h0.DraggableRect:return i}},[r,i,c]),F=J.useRef(null),D=J.useCallback(()=>{const z=F.current;if(!z)return;const U=k.current.x*M.current.x,H=k.current.y*M.current.y;z.scrollBy(U,H)},[]),q=J.useMemo(()=>a===Cx.TreeOrder?[...h].reverse():h,[a,h]);J.useEffect(()=>{if(!o||!h.length||!O){I();return}for(const z of q){if(n?.(z)===!1)continue;const U=h.indexOf(z),H=g[U];if(!H)continue;const{direction:X,speed:ie}=B_e(z,H,O,t,x);for(const ee of["x","y"])b[ee][X[ee]]||(ie[ee]=0,X[ee]=0);if(ie.x>0||ie.y>0){I(),F.current=z,S(D,l),k.current=ie,M.current=X;return}}k.current={x:0,y:0},M.current={x:0,y:0},I()},[t,D,n,I,o,l,JSON.stringify(O),JSON.stringify(b),S,h,q,g,JSON.stringify(x)])}const K_e={x:{[Sl.Backward]:!1,[Sl.Forward]:!1},y:{[Sl.Backward]:!1,[Sl.Forward]:!1}};function J_e(e){let{delta:t,disabled:r}=e;const n=y3(t);return C1(i=>{if(r||!n||!i)return K_e;const o={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Sl.Backward]:i.x[Sl.Backward]||o.x===-1,[Sl.Forward]:i.x[Sl.Forward]||o.x===1},y:{[Sl.Backward]:i.y[Sl.Backward]||o.y===-1,[Sl.Forward]:i.y[Sl.Forward]||o.y===1}}},[r,t,n])}function Q_e(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return C1(i=>{var o;return t==null?null:(o=n??i)!=null?o:null},[n,t])}function exe(e,t){return J.useMemo(()=>e.reduce((r,n)=>{const{sensor:i}=n,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,n)}));return[...r,...o]},[]),[e,t])}var q0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(q0||(q0={}));var x3;(function(e){e.Optimized="optimized"})(x3||(x3={}));const xB=new Map;function txe(e,t){let{dragging:r,dependencies:n,config:i}=t;const[o,l]=J.useState(null),{frequency:a,measure:c,strategy:h}=i,g=J.useRef(e),v=k(),x=z0(v),b=J.useCallback(function(M){M===void 0&&(M=[]),!x.current&&l(O=>O===null?M:O.concat(M.filter(F=>!O.includes(F))))},[x]),S=J.useRef(null),I=C1(M=>{if(v&&!r)return xB;if(!M||M===xB||g.current!==e||o!=null){const O=new Map;for(let F of e){if(!F)continue;if(o&&o.length>0&&!o.includes(F.id)&&F.rect.current){O.set(F.id,F.rect.current);continue}const D=F.node.current,q=D?new $k(c(D),D):null;F.rect.current=q,q&&O.set(F.id,q)}return O}return M},[e,o,r,v,c]);return J.useEffect(()=>{g.current=e},[e]),J.useEffect(()=>{v||b()},[r,v]),J.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),J.useEffect(()=>{v||typeof a!="number"||S.current!==null||(S.current=setTimeout(()=>{b(),S.current=null},a))},[a,v,b,...n]),{droppableRects:I,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(h){case q0.Always:return!1;case q0.BeforeDragging:return r;default:return!r}}}function QV(e,t){return C1(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function rxe(e,t){return QV(e,t)}function nxe(e){let{callback:t,disabled:r}=e;const n=zk(t),i=J.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(n)},[n,r]);return J.useEffect(()=>()=>i?.disconnect(),[i]),i}function nw(e){let{callback:t,disabled:r}=e;const n=zk(t),i=J.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(n)},[r]);return J.useEffect(()=>()=>i?.disconnect(),[i]),i}function ixe(e){return new $k(Ly(e),e)}function wB(e,t,r){t===void 0&&(t=ixe);const[n,i]=J.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=c??r)!=null?h:null}const g=t(e);return JSON.stringify(c)===JSON.stringify(g)?c:g})}const l=nxe({callback(c){if(e)for(const h of c){const{type:g,target:v}=h;if(g==="childList"&&v instanceof HTMLElement&&v.contains(e)){o();break}}}}),a=nw({callback:o});return ef(()=>{o(),e?(a?.observe(e),l?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),l?.disconnect())},[e]),n}function axe(e){const t=QV(e);return VV(e,t)}const SB=[];function oxe(e){const t=J.useRef(e),r=C1(n=>e?n&&n!==SB&&e&&t.current&&e.parentNode===t.current.parentNode?n:qk(e):SB,[e]);return J.useEffect(()=>{t.current=e},[e]),r}function sxe(e){const[t,r]=J.useState(null),n=J.useRef(e),i=J.useCallback(o=>{const l=m4(o.target);l&&r(a=>a?(a.set(l,b3(l)),new Map(a)):null)},[]);return J.useEffect(()=>{const o=n.current;if(e!==o){l(o);const a=e.map(c=>{const h=m4(c);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,b3(h)]):null}).filter(c=>c!=null);r(a.length?new Map(a):null),n.current=e}return()=>{l(e),l(o)};function l(a){a.forEach(c=>{const h=m4(c);h?.removeEventListener("scroll",i)})}},[i,e]),J.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>Ug(o,l),pd):YV(e):pd,[e,t])}function CB(e,t){t===void 0&&(t=[]);const r=J.useRef(null);return J.useEffect(()=>{r.current=null},t),J.useEffect(()=>{const n=e!==pd;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?wx(e,r.current):pd}function lxe(e){J.useEffect(()=>{if(!rw)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function uxe(e,t){return J.useMemo(()=>e.reduce((r,n)=>{let{eventName:i,handler:o}=n;return r[i]=l=>{o(l,t)},r},{}),[e,t])}function eU(e){return J.useMemo(()=>e?D_e(e):null,[e])}const EB=[];function cxe(e,t){t===void 0&&(t=Ly);const[r]=e,n=eU(r?Ju(r):null),[i,o]=J.useState(EB);function l(){o(()=>e.length?e.map(c=>WV(c)?n:new $k(t(c),c)):EB)}const a=nw({callback:l});return ef(()=>{a?.disconnect(),l(),e.forEach(c=>a?.observe(c))},[e]),i}function dxe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return S1(t)?t:e}function fxe(e){let{measure:t}=e;const[r,n]=J.useState(null),i=J.useCallback(h=>{for(const{target:g}of h)if(S1(g)){n(v=>{const x=t(g);return v?{...v,width:x.width,height:x.height}:x});break}},[t]),o=nw({callback:i}),l=J.useCallback(h=>{const g=dxe(h);o?.disconnect(),g&&o?.observe(g),n(g?t(g):null)},[t,o]),[a,c]=xx(l);return J.useMemo(()=>({nodeRef:a,rect:r,setRef:c}),[r,a,c])}const hxe=[{sensor:Uk,options:{}},{sensor:KV,options:{}}],pxe={current:{}},w_={draggable:{measure:yB},droppable:{measure:yB,strategy:q0.WhileDragging,frequency:x3.Optimized},dragOverlay:{measure:Ly}};class p0 extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const mxe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new p0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Sx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:w_,measureDroppableContainers:Sx,windowRect:null,measuringScheduled:!1},gxe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Sx,draggableNodes:new Map,over:null,measureDroppableContainers:Sx},iw=J.createContext(gxe),tU=J.createContext(mxe);function yxe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new p0}}}function vxe(e,t){switch(t.type){case sl.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case sl.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case sl.DragEnd:case sl.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case sl.RegisterDroppable:{const{element:r}=t,{id:n}=r,i=new p0(e.droppable.containers);return i.set(n,r),{...e,droppable:{...e.droppable,containers:i}}}case sl.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;const l=new p0(e.droppable.containers);return l.set(r,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case sl.UnregisterDroppable:{const{id:r,key:n}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new p0(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function bxe(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:i}=J.useContext(iw),o=y3(n),l=y3(r?.id);return J.useEffect(()=>{if(!t&&!n&&o&&l!=null){if(!jk(o)||document.activeElement===o.target)return;const a=i.get(l);if(!a)return;const{activatorNode:c,node:h}=a;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const g of[c.current,h.current]){if(!g)continue;const v=c_e(g);if(v){v.focus();break}}})}},[n,t,i,l,o]),null}function _xe(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...n}),r):r}function xxe(e){return J.useMemo(()=>({draggable:{...w_.draggable,...e?.draggable},droppable:{...w_.droppable,...e?.droppable},dragOverlay:{...w_.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function wxe(e){let{activeNode:t,measure:r,initialRect:n,config:i=!0}=e;const o=J.useRef(!1),{x:l,y:a}=typeof i=="boolean"?{x:i,y:i}:i;ef(()=>{if(!l&&!a||!t){o.current=!1;return}if(o.current||!n)return;const h=t?.node.current;if(!h||h.isConnected===!1)return;const g=r(h),v=VV(g,n);if(l||(v.x=0),a||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=UV(h);x&&x.scrollBy({top:v.y,left:v.x})}},[t,l,a,n,r])}const rU=J.createContext({...pd,scaleX:1,scaleY:1});var wh;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(wh||(wh={}));const Sxe=J.memo(function(t){var r,n,i,o;let{id:l,accessibility:a,autoScroll:c=!0,children:h,sensors:g=hxe,collisionDetection:v=P_e,measuring:x,modifiers:b,...S}=t;const I=J.useReducer(vxe,void 0,yxe),[k,M]=I,[O,F]=g_e(),[D,q]=J.useState(wh.Uninitialized),z=D===wh.Initialized,{draggable:{active:U,nodes:H,translate:X},droppable:{containers:ie}}=k,ee=U!=null?H.get(U):null,G=J.useRef({initial:null,translated:null}),ne=J.useMemo(()=>{var Bt;return U!=null?{id:U,data:(Bt=ee?.data)!=null?Bt:pxe,rect:G}:null},[U,ee]),ae=J.useRef(null),[le,fe]=J.useState(null),[ke,me]=J.useState(null),Se=z0(S,Object.values(S)),we=E1("DndDescribedBy",l),Pe=J.useMemo(()=>ie.getEnabled(),[ie]),ce=xxe(x),{droppableRects:_e,measureDroppableContainers:be,measuringScheduled:Me}=txe(Pe,{dragging:z,dependencies:[X.x,X.y],config:ce.droppable}),Le=Q_e(H,U),Ue=J.useMemo(()=>ke?v3(ke):null,[ke]),Oe=Yt(),tt=rxe(Le,ce.draggable.measure);wxe({activeNode:U!=null?H.get(U):null,config:Oe.layoutShiftCompensation,initialRect:tt,measure:ce.draggable.measure});const Ze=wB(Le,ce.draggable.measure,tt),Qe=wB(Le?Le.parentElement:null),Ie=J.useRef({activatorEvent:null,active:null,activeNode:Le,collisionRect:null,collisions:null,droppableRects:_e,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:ie,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Mt=ie.getNodeFor((r=Ie.current.over)==null?void 0:r.id),ot=fxe({measure:ce.dragOverlay.measure}),$e=(n=ot.nodeRef.current)!=null?n:Le,tr=z?(i=ot.rect)!=null?i:Ze:null,Wt=!!(ot.nodeRef.current&&ot.rect),Gt=axe(Wt?null:Ze),at=eU($e?Ju($e):null),dr=oxe(z?Mt??Le:null),hr=cxe(dr),ur=_xe(b,{transform:{x:X.x-Gt.x,y:X.y-Gt.y,scaleX:1,scaleY:1},activatorEvent:ke,active:ne,activeNodeRect:Ze,containerNodeRect:Qe,draggingNodeRect:tr,over:Ie.current.over,overlayNodeRect:ot.rect,scrollableAncestors:dr,scrollableAncestorRects:hr,windowRect:at}),Cr=Ue?Ug(Ue,X):null,br=sxe(dr),nr=CB(br),lr=CB(br,[Ze]),Pr=Ug(ur,nr),ar=tr?A_e(tr,ur):null,kr=ne&&ar?v({active:ne,collisionRect:ar,droppableRects:_e,droppableContainers:Pe,pointerCoordinates:Cr}):null,Qt=C_e(kr,"id"),[Ht,Ct]=J.useState(null),Re=Wt?ur:Ug(ur,lr),Be=I_e(Re,(o=Ht?.rect)!=null?o:null,Ze),De=J.useRef(null),rt=J.useCallback((Bt,wt)=>{let{sensor:Xt,options:Et}=wt;if(ae.current==null)return;const Ir=H.get(ae.current);if(!Ir)return;const $t=Bt.nativeEvent,Vr=new Xt({active:ae.current,activeNode:Ir,event:$t,options:Et,context:Ie,onAbort(un){if(!H.get(un))return;const{onDragAbort:qe}=Se.current,ht={id:un};qe?.(ht),O({type:"onDragAbort",event:ht})},onPending(un,Te,qe,ht){if(!H.get(un))return;const{onDragPending:gr}=Se.current,Ur={id:un,constraint:Te,initialCoordinates:qe,offset:ht};gr?.(Ur),O({type:"onDragPending",event:Ur})},onStart(un){const Te=ae.current;if(Te==null)return;const qe=H.get(Te);if(!qe)return;const{onDragStart:ht}=Se.current,kt={activatorEvent:$t,active:{id:Te,data:qe.data,rect:G}};Mf.unstable_batchedUpdates(()=>{ht?.(kt),q(wh.Initializing),M({type:sl.DragStart,initialCoordinates:un,active:Te}),O({type:"onDragStart",event:kt}),fe(De.current),me($t)})},onMove(un){M({type:sl.DragMove,coordinates:un})},onEnd:Rr(sl.DragEnd),onCancel:Rr(sl.DragCancel)});De.current=Vr;function Rr(un){return async function(){const{active:qe,collisions:ht,over:kt,scrollAdjustedTranslate:gr}=Ie.current;let Ur=null;if(qe&&gr){const{cancelDrop:Er}=Se.current;Ur={activatorEvent:$t,active:qe,collisions:ht,delta:gr,over:kt},un===sl.DragEnd&&typeof Er=="function"&&await Promise.resolve(Er(Ur))&&(un=sl.DragCancel)}ae.current=null,Mf.unstable_batchedUpdates(()=>{M({type:un}),q(wh.Uninitialized),Ct(null),fe(null),me(null),De.current=null;const Er=un===sl.DragEnd?"onDragEnd":"onDragCancel";if(Ur){const si=Se.current[Er];si?.(Ur),O({type:Er,event:Ur})}})}}},[H]),mt=J.useCallback((Bt,wt)=>(Xt,Et)=>{const Ir=Xt.nativeEvent,$t=H.get(Et);if(ae.current!==null||!$t||Ir.dndKit||Ir.defaultPrevented)return;const Vr={active:$t};Bt(Xt,wt.options,Vr)===!0&&(Ir.dndKit={capturedBy:wt.sensor},ae.current=Et,rt(Xt,wt))},[H,rt]),At=exe(g,mt);lxe(g),ef(()=>{Ze&&D===wh.Initializing&&q(wh.Initialized)},[Ze,D]),J.useEffect(()=>{const{onDragMove:Bt}=Se.current,{active:wt,activatorEvent:Xt,collisions:Et,over:Ir}=Ie.current;if(!wt||!Xt)return;const $t={active:wt,activatorEvent:Xt,collisions:Et,delta:{x:Pr.x,y:Pr.y},over:Ir};Mf.unstable_batchedUpdates(()=>{Bt?.($t),O({type:"onDragMove",event:$t})})},[Pr.x,Pr.y]),J.useEffect(()=>{const{active:Bt,activatorEvent:wt,collisions:Xt,droppableContainers:Et,scrollAdjustedTranslate:Ir}=Ie.current;if(!Bt||ae.current==null||!wt||!Ir)return;const{onDragOver:$t}=Se.current,Vr=Et.get(Qt),Rr=Vr&&Vr.rect.current?{id:Vr.id,rect:Vr.rect.current,data:Vr.data,disabled:Vr.disabled}:null,un={active:Bt,activatorEvent:wt,collisions:Xt,delta:{x:Ir.x,y:Ir.y},over:Rr};Mf.unstable_batchedUpdates(()=>{Ct(Rr),$t?.(un),O({type:"onDragOver",event:un})})},[Qt]),ef(()=>{Ie.current={activatorEvent:ke,active:ne,activeNode:Le,collisionRect:ar,collisions:kr,droppableRects:_e,draggableNodes:H,draggingNode:$e,draggingNodeRect:tr,droppableContainers:ie,over:Ht,scrollableAncestors:dr,scrollAdjustedTranslate:Pr},G.current={initial:tr,translated:ar}},[ne,Le,kr,ar,H,$e,tr,_e,ie,Ht,dr,Pr]),Z_e({...Oe,delta:X,draggingRect:ar,pointerCoordinates:Cr,scrollableAncestors:dr,scrollableAncestorRects:hr});const Ot=J.useMemo(()=>({active:ne,activeNode:Le,activeNodeRect:Ze,activatorEvent:ke,collisions:kr,containerNodeRect:Qe,dragOverlay:ot,draggableNodes:H,droppableContainers:ie,droppableRects:_e,over:Ht,measureDroppableContainers:be,scrollableAncestors:dr,scrollableAncestorRects:hr,measuringConfiguration:ce,measuringScheduled:Me,windowRect:at}),[ne,Le,Ze,ke,kr,Qe,ot,H,ie,_e,Ht,be,dr,hr,ce,Me,at]),Tt=J.useMemo(()=>({activatorEvent:ke,activators:At,active:ne,activeNodeRect:Ze,ariaDescribedById:{draggable:we},dispatch:M,draggableNodes:H,over:Ht,measureDroppableContainers:be}),[ke,At,ne,Ze,M,we,H,Ht,be]);return ft.createElement($V.Provider,{value:F},ft.createElement(iw.Provider,{value:Tt},ft.createElement(tU.Provider,{value:Ot},ft.createElement(rU.Provider,{value:Be},h)),ft.createElement(bxe,{disabled:a?.restoreFocus===!1})),ft.createElement(b_e,{...a,hiddenTextDescribedById:we}));function Yt(){const Bt=le?.autoScrollEnabled===!1,wt=typeof c=="object"?c.enabled===!1:c===!1,Xt=z&&!Bt&&!wt;return typeof c=="object"?{...c,enabled:Xt}:{enabled:Xt}}}),Cxe=J.createContext(null),TB="button",Exe="Draggable";function Txe(e){let{id:t,data:r,disabled:n=!1,attributes:i}=e;const o=E1(Exe),{activators:l,activatorEvent:a,active:c,activeNodeRect:h,ariaDescribedById:g,draggableNodes:v,over:x}=J.useContext(iw),{role:b=TB,roleDescription:S="draggable",tabIndex:I=0}=i??{},k=c?.id===t,M=J.useContext(k?rU:Cxe),[O,F]=xx(),[D,q]=xx(),z=uxe(l,t),U=z0(r);ef(()=>(v.set(t,{id:t,key:o,node:O,activatorNode:D,data:U}),()=>{const X=v.get(t);X&&X.key===o&&v.delete(t)}),[v,t]);const H=J.useMemo(()=>({role:b,tabIndex:I,"aria-disabled":n,"aria-pressed":k&&b===TB?!0:void 0,"aria-roledescription":S,"aria-describedby":g.draggable}),[n,b,I,k,S,g.draggable]);return{active:c,activatorEvent:a,activeNodeRect:h,attributes:H,isDragging:k,listeners:n?void 0:z,node:O,over:x,setNodeRef:F,setActivatorNodeRef:q,transform:M}}function Pxe(){return J.useContext(tU)}const Ixe="Droppable",kxe={timeout:25};function Axe(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:i}=e;const o=E1(Ixe),{active:l,dispatch:a,over:c,measureDroppableContainers:h}=J.useContext(iw),g=J.useRef({disabled:r}),v=J.useRef(!1),x=J.useRef(null),b=J.useRef(null),{disabled:S,updateMeasurementsFor:I,timeout:k}={...kxe,...i},M=z0(I??n),O=J.useCallback(()=>{if(!v.current){v.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{h(Array.isArray(M.current)?M.current:[M.current]),b.current=null},k)},[k]),F=nw({callback:O,disabled:S||!l}),D=J.useCallback((H,X)=>{F&&(X&&(F.unobserve(X),v.current=!1),H&&F.observe(H))},[F]),[q,z]=xx(D),U=z0(t);return J.useEffect(()=>{!F||!q.current||(F.disconnect(),v.current=!1,F.observe(q.current))},[q,F]),J.useEffect(()=>(a({type:sl.RegisterDroppable,element:{id:n,key:o,disabled:r,node:q,rect:x,data:U}}),()=>a({type:sl.UnregisterDroppable,key:o,id:n})),[n]),J.useEffect(()=>{r!==g.current.disabled&&(a({type:sl.SetDroppableDisabled,id:n,key:o,disabled:r}),g.current.disabled=r)},[n,o,r,a]),{active:l,rect:x,isOver:c?.id===n,node:q,over:c,setNodeRef:z}}function nU(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Mxe(e,t){return e.reduce((r,n,i)=>{const o=t.get(n);return o&&(r[i]=o),r},Array(e.length))}function Yb(e){return e!==null&&e>=0}function Lxe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Rxe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const iU=e=>{let{rects:t,activeIndex:r,overIndex:n,index:i}=e;const o=nU(t,n,r),l=t[i],a=o[i];return!a||!l?null:{x:a.left-l.left,y:a.top-l.top,scaleX:a.width/l.width,scaleY:a.height/l.height}},Zb={scaleX:1,scaleY:1},Dxe=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:i,rects:o,overIndex:l}=e;const a=(t=o[r])!=null?t:n;if(!a)return null;if(i===r){const h=o[l];return h?{x:0,y:r<l?h.top+h.height-(a.top+a.height):h.top-a.top,...Zb}:null}const c=Nxe(o,i,r);return i>r&&i<=l?{x:0,y:-a.height-c,...Zb}:i<r&&i>=l?{x:0,y:a.height+c,...Zb}:{x:0,y:0,...Zb}};function Nxe(e,t,r){const n=e[t],i=e[t-1],o=e[t+1];return n?r<t?i?n.top-(i.top+i.height):o?o.top-(n.top+n.height):0:o?o.top-(n.top+n.height):i?n.top-(i.top+i.height):0:0}const aU="Sortable",oU=ft.createContext({activeIndex:-1,containerId:aU,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:iU,disabled:{draggable:!1,droppable:!1}});function Oxe(e){let{children:t,id:r,items:n,strategy:i=iU,disabled:o=!1}=e;const{active:l,dragOverlay:a,droppableRects:c,over:h,measureDroppableContainers:g}=Pxe(),v=E1(aU,r),x=a.rect!==null,b=J.useMemo(()=>n.map(z=>typeof z=="object"&&"id"in z?z.id:z),[n]),S=l!=null,I=l?b.indexOf(l.id):-1,k=h?b.indexOf(h.id):-1,M=J.useRef(b),O=!Lxe(b,M.current),F=k!==-1&&I===-1||O,D=Rxe(o);ef(()=>{O&&S&&g(b)},[O,b,S,g]),J.useEffect(()=>{M.current=b},[b]);const q=J.useMemo(()=>({activeIndex:I,containerId:v,disabled:D,disableTransforms:F,items:b,overIndex:k,useDragOverlay:x,sortedRects:Mxe(b,c),strategy:i}),[I,v,D.draggable,D.droppable,F,b,k,c,x,i]);return ft.createElement(oU.Provider,{value:q},t)}const Fxe=e=>{let{id:t,items:r,activeIndex:n,overIndex:i}=e;return nU(r,n,i).indexOf(t)},Bxe=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:i,items:o,newIndex:l,previousItems:a,previousContainerId:c,transition:h}=e;return!h||!n||a!==o&&i===l?!1:r?!0:l!==i&&t===c},zxe={duration:200,easing:"ease"},sU="transform",jxe=j0.Transition.toString({property:sU,duration:0,easing:"linear"}),qxe={roleDescription:"sortable"};function $xe(e){let{disabled:t,index:r,node:n,rect:i}=e;const[o,l]=J.useState(null),a=J.useRef(r);return ef(()=>{if(!t&&r!==a.current&&n.current){const c=i.current;if(c){const h=Ly(n.current,{ignoreTransform:!0}),g={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(g.x||g.y)&&l(g)}}r!==a.current&&(a.current=r)},[t,r,n,i]),J.useEffect(()=>{o&&l(null)},[o]),o}function Vxe(e){let{animateLayoutChanges:t=Bxe,attributes:r,disabled:n,data:i,getNewIndex:o=Fxe,id:l,strategy:a,resizeObserverConfig:c,transition:h=zxe}=e;const{items:g,containerId:v,activeIndex:x,disabled:b,disableTransforms:S,sortedRects:I,overIndex:k,useDragOverlay:M,strategy:O}=J.useContext(oU),F=Uxe(n,b),D=g.indexOf(l),q=J.useMemo(()=>({sortable:{containerId:v,index:D,items:g},...i}),[v,i,D,g]),z=J.useMemo(()=>g.slice(g.indexOf(l)),[g,l]),{rect:U,node:H,isOver:X,setNodeRef:ie}=Axe({id:l,data:q,disabled:F.droppable,resizeObserverConfig:{updateMeasurementsFor:z,...c}}),{active:ee,activatorEvent:G,activeNodeRect:ne,attributes:ae,setNodeRef:le,listeners:fe,isDragging:ke,over:me,setActivatorNodeRef:Se,transform:we}=Txe({id:l,data:q,attributes:{...qxe,...r},disabled:F.draggable}),Pe=o_e(ie,le),ce=!!ee,_e=ce&&!S&&Yb(x)&&Yb(k),be=!M&&ke,Me=be&&_e?we:null,Ue=_e?Me??(a??O)({rects:I,activeNodeRect:ne,activeIndex:x,overIndex:k,index:D}):null,Oe=Yb(x)&&Yb(k)?o({id:l,items:g,activeIndex:x,overIndex:k}):D,tt=ee?.id,Ze=J.useRef({activeId:tt,items:g,newIndex:Oe,containerId:v}),Qe=g!==Ze.current.items,Ie=t({active:ee,containerId:v,isDragging:ke,isSorting:ce,id:l,index:D,items:g,newIndex:Ze.current.newIndex,previousItems:Ze.current.items,previousContainerId:Ze.current.containerId,transition:h,wasDragging:Ze.current.activeId!=null}),Mt=$xe({disabled:!Ie,index:D,node:H,rect:U});return J.useEffect(()=>{ce&&Ze.current.newIndex!==Oe&&(Ze.current.newIndex=Oe),v!==Ze.current.containerId&&(Ze.current.containerId=v),g!==Ze.current.items&&(Ze.current.items=g)},[ce,Oe,v,g]),J.useEffect(()=>{if(tt===Ze.current.activeId)return;if(tt!=null&&Ze.current.activeId==null){Ze.current.activeId=tt;return}const $e=setTimeout(()=>{Ze.current.activeId=tt},50);return()=>clearTimeout($e)},[tt]),{active:ee,activeIndex:x,attributes:ae,data:q,rect:U,index:D,newIndex:Oe,items:g,isOver:X,isSorting:ce,isDragging:ke,listeners:fe,node:H,overIndex:k,over:me,setNodeRef:Pe,setActivatorNodeRef:Se,setDroppableNodeRef:ie,setDraggableNodeRef:le,transform:Mt??Ue,transition:ot()};function ot(){if(Mt||Qe&&Ze.current.newIndex===D)return jxe;if(!(be&&!jk(G)||!h)&&(ce||Ie))return j0.Transition.toString({...h,property:sU})}}function Uxe(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(n=e?.droppable)!=null?n:t.droppable}}Pa.Down,Pa.Right,Pa.Up,Pa.Left;function Ex({children:e,layerId:t}){const{attributes:r,listeners:n,setNodeRef:i,transform:o}=Vxe({id:t}),l={transform:j0.Transform.toString(o)};return Z.jsx("li",{ref:i,style:l,...r,...n,children:e})}try{Ex.displayName="SortableContainer",Ex.__docgenInfo={description:"",displayName:"SortableContainer",props:{layerId:{defaultValue:null,description:"",name:"layerId",required:!0,type:{name:"string"}}}}}catch{}const Gxe=Ar(pc)({padding:"4px",marginTop:"-3px"}),Hxe=Ar(pc)({marginLeft:"20px"});function Nf({layerComponent:e,visible:t,type:r,name:n,description:i,configurable:o,setLayerState:l,...a}){const[c,h]=J.useState(!0),[g,v]=J.useState(!1),[x,b]=J.useState(!1),S=J.useRef(!1),I=J.useRef(t),[k,M]=J.useState(e?.props?.paint||e?.props?.options?.paint||W9(e?.props?.type||O_(e.props.geojson))),O=J.useMemo(()=>t?c:!1,[t,c]);J.useEffect(()=>{if(!l||!e?.props?.layers||O===I.current)return;I.current=O;const z={...e?.props};switch(e.type.name){case"MlWmsLayer":break;case"MlVectorTileLayer":e?.props?.layers&&!S.current&&(z.layers=e?.props?.layers.map(U=>(U.layout?U.layout.visibility=O?"visible":"none":U.layout={visibility:O?"visible":"none"},U)),console.log("setLayerState",z.layers),l(z));break}},[O,l,e]),J.useEffect(()=>{!l||S.current||!k||e?.props?.layers||JSON.stringify(k)!==JSON.stringify(e.props?.paint)&&l({...e.props,paint:k})},[k,l,e.props?.paint]);const F=J.useMemo(()=>{if(e&&r==="layer")switch(e.type.displayName){case"MlWmsLayer":return ft.cloneElement(e,{...e?.props,visible:O});case"MlVectorTileLayer":return ft.cloneElement(e,{...e?.props});default:case"MlGeoJsonLayer":return ft.cloneElement(e,{layout:{visibility:O?"visible":"none"},options:{...e?.props?.options,...l?{}:{paint:k}}})}return Z.jsx(Z.Fragment,{})},[r,e,k,O,e?.props?.layers,l]),D=J.useMemo(()=>{if(e&&r==="layer"){if(e.props.type)return e.props.type;if(e.props.geojson)return O_(e.props.geojson)}},[e]),q=Z.jsxs(bx,{sx:{...a.listItemSx},secondaryAction:o&&Object.keys(k)?.length>0?Z.jsxs(Z.Fragment,{children:[a?.buttons,Z.jsx(Gxe,{edge:"end","aria-label":"settings",onClick:()=>{v(z=>!z)},children:Z.jsx(WI,{})})]}):void 0,children:[Z.jsx(kf,{children:Z.jsx(Af,{disabled:!t,checked:c,onClick:()=>{h(z=>!z)}})}),Z.jsx(Ac,{variant:"layerlist",primary:n,secondary:i,primaryTypographyProps:{overflow:"hidden"}})]});return Z.jsxs(Z.Fragment,{children:[a.sortable&&a.layerId&&!e?.props?.layers&&Z.jsx(Ex,{layerId:a.layerId,children:q}),!a.sortable&&!e?.props?.layers&&q,F,!e?.props?.layers&&Object.keys(k).length>0&&o&&g&&Z.jsxs(Z.Fragment,{children:[a.showDeleteButton&&Z.jsxs(Z.Fragment,{children:[Z.jsx(Hxe,{edge:"end","aria-label":"delete",onClick:()=>{typeof l=="function"&&b(!0)},children:Z.jsx(v1,{})}),x&&Z.jsx(fy,{open:x,onConfirm:()=>{typeof l=="function"&&(S.current=!0,l(!1),b(!1))},onCancel:()=>{b(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]}),Z.jsx(vx,{paintProps:k,setPaintProps:M,layerType:D})]}),e?.props?.layers&&Z.jsx(l3,{visible:c,setVisible:h,name:n,children:e?.props?.layers?.map?.((z,U)=>Z.jsx(_x,{vtProps:e?.props,setVtProps:l,id:""+U,visibleMaster:O},""+U))})]})}Nf.defaultProps={type:"layer",visible:!0,showDeleteButton:!1,buttons:Z.jsx(Z.Fragment,{})};try{Nf.displayName="LayerListItem",Nf.__docgenInfo={description:"",displayName:"LayerListItem",props:{layerComponent:{defaultValue:null,description:"",name:"layerComponent",required:!0,type:{name:"Element"}},visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!0,type:{name:"boolean"}},type:{defaultValue:{value:"layer"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},setLayerState:{defaultValue:null,description:"",name:"setLayerState",required:!1,type:{name:"Dispatch<any> | undefined"}},showDeleteButton:{defaultValue:{value:"false"},description:"",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},listItemSx:{defaultValue:null,description:"",name:"listItemSx",required:!1,type:{name:"SxProps | undefined"}},buttons:{defaultValue:{value:"<></>"},description:"",name:"buttons",required:!1,type:{name:"Element | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const lU=Ei(Z.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Wxe=Ar("div")(()=>({display:"flex",alignItems:"center"})),Xxe=56,Yxe=Ar(vo)(({theme:e})=>({width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}));function w3({drawerPaperProps:e,drawerHeaderProps:t,setOpen:r,...n}){const i=l1(c=>c.breakpoints.down("sm")),[o,l]=J.useState(!1),a=n.drawerBleeding?n.drawerBleeding:Xxe;return Z.jsxs(Z.Fragment,{children:[i?Z.jsxs(vo,{sx:{display:{xs:"flex",sm:"none"}},children:[Z.jsx(p9,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:`calc(50% - ${a}px)`,overflow:"visible"}}}),Z.jsxs(Qie,{anchor:"bottom",open:typeof n.open>"u"?o:n.open,onClose:r?()=>{r?.(!1)}:()=>{l(!1)},onOpen:r?()=>{r?.(!0)}:()=>{l(!0)},swipeAreaWidth:a,disableSwipeToOpen:!1,hideBackdrop:!0,ModalProps:{keepMounted:!0,sx:{top:"calc(90%)"}},children:[Z.jsxs(Nc,{sx:{position:"absolute",top:-a,borderTopLeftRadius:8,borderTopRightRadius:8,visibility:"visible",right:0,left:0},children:[Z.jsx(Yxe,{}),Z.jsx(Qo,{variant:"h6",sx:{p:"13px"},children:n.name})]}),Z.jsx(Nc,{sx:{px:"15px",pb:"15px",height:"100%",overflow:"auto",paddingTop:"20px"},children:n.children})]})]}):Z.jsx(vo,{sx:{display:{xs:"none",sm:"flex"},mr:1},children:Z.jsxs(HP,{transitionDuration:0,variant:"persistent",anchor:"left",open:typeof n.open>"u"?o:n.open,PaperProps:{...e,sx:{maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"},padding:{sm:"84px 20px 20px 20px",xs:"74px 10px 10px 10px"},width:{xs:"80%",sm:"60%",md:"350px",lg:"350px"},boxSizing:"border-box",...e?.sx}},sx:{flexGrow:1,zIndex:105,position:"absolute",bottom:0,display:"flex",flexDirection:"column",maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"},...o?{}:{left:i?"-90vw":"-20vw"}},...n,children:[Z.jsxs(Wxe,{...t,children:[Z.jsx(Qo,{variant:"h6",children:n.name}),Z.jsx(pc,{onClick:r?()=>{r?.(!1)}:()=>{l(!1)},sx:{position:"absolute",right:"20px"},children:Z.jsx(lU,{})})]}),Z.jsx(vo,{children:n.children})]})}),";"]})}try{w3.displayName="Sidebar",w3.__docgenInfo={description:"",displayName:"Sidebar",props:{drawerPaperProps:{defaultValue:null,description:"",name:"drawerPaperProps",required:!1,type:{name:"PaperProps | undefined"}},drawerHeaderProps:{defaultValue:null,description:"",name:"drawerHeaderProps",required:!1,type:{name:"Headers | undefined"}},children:{defaultValue:null,description:"The content of the component.",name:"children",required:!1,type:{name:"ReactNode"}},open:{defaultValue:{value:"false"},description:"If `true`, the component is shown.",name:"open",required:!1,type:{name:"boolean | undefined"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!1,type:{name:"((val: boolean) => void) | undefined"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string | undefined"}},drawerBleeding:{defaultValue:null,description:"",name:"drawerBleeding",required:!1,type:{name:"number | undefined"}},component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | undefined"}},slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<DrawerSlots> | undefined"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<ModalProps, keyof IntrinsicElements>, DrawerRootSlotPropsOverrides, DrawerOwnerState> | undefined; backdrop?: SlotProps<...> | undefined; docked?: SlotProps<...> | undefined; paper?: SlotProps<...> | undefined; transition?: SlotProps<...> | undefined; } | undefined"}}}}}catch{}const PB=e=>{const[t,r]=J.useState(!0),[n,i]=J.useState(e.measureType),[o,l]=J.useState(),a=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[c,h]=J.useState(),[g,v]=J.useState("kilometers"),[x,b]=J.useState([]),[S,I]=J.useState(!1),k=()=>{g==="kilometers"&&v("miles"),g==="miles"&&v("kilometers")},M=F=>{b(D=>{const q=[...D];return q.splice(F,1),l(void 0),q})},O=F=>{h({measure:F.value,unit:F.unit,geojson:F.geojson})};return J.useEffect(()=>{S&&(I(!1),c&&b(F=>{const D=[...F];return D.push(c),D}))},[S]),J.useEffect(()=>{h(void 0)},[g]),Z.jsx(Z.Fragment,{children:Z.jsxs(w3,{open:t,setOpen:r,name:"Multi Measure Tool",children:[Z.jsxs(vo,{sx:{flexGrow:1},children:[Z.jsx("br",{}),Z.jsxs(Rf,{container:!0,spacing:4,justifyContent:"flex-start",children:[Z.jsx(Rf,{size:3,children:Z.jsx(Df,{title:"Measure Area",children:Z.jsx(Ui,{variant:"outlined",sx:{backgroundColor:n==="polygon"?F=>F.palette.GPS.GPSActiveColor:F=>F.palette.GPS.GPSActiveBackgroundColor,color:n==="polygon"?F=>F.palette.GPS.GPSActiveBackgroundColor:F=>F.palette.GPS.GPSActiveColor},onClick:()=>{i("polygon"),h(void 0),I(!0)},children:Z.jsx(F$,{})})})}),Z.jsx(Rf,{size:3,children:Z.jsx(Df,{title:"Measure Distance",children:Z.jsx(Ui,{variant:"outlined",sx:{backgroundColor:n==="line"?F=>F.palette.GPS.GPSActiveColor:F=>F.palette.GPS.GPSActiveBackgroundColor,color:n==="line"?F=>F.palette.GPS.GPSActiveBackgroundColor:F=>F.palette.GPS.GPSActiveColor},onClick:()=>{i("line"),h(void 0),I(!0)},children:Z.jsx(O$,{})})})})]})]}),Z.jsx("br",{}),Z.jsx(Rf,{size:4,children:Z.jsxs(dc,{children:[Z.jsx(kh,{id:"unit-select-label",children:"Unit"}),Z.jsxs(Ah,{labelId:"unit-select-label",id:"unit-select",value:g,label:"Unit",onChange:F=>{v(F.target.value),h(void 0),I(!0)},children:[Z.jsx(Np,{value:"kilometers",children:"Kilometers"}),Z.jsx(Np,{value:"miles",children:"Miles"})]})]})}),Z.jsx("br",{}),!S&&Z.jsx(o3,{measureType:n,unit:g,onChange:O,...k,onFinish:()=>{I(!0)}}),Z.jsxs(s3,{children:[x?.map((F,D)=>Z.jsx(Z.Fragment,{children:Z.jsxs(vo,{sx:{display:"flex",flexDirection:"column"},children:[Z.jsx("br",{}),Z.jsx(vo,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"},marginTop:"25px"},onMouseOver:()=>{l(F.geojson)},onMouseLeave:()=>{l(void 0)},children:Z.jsxs(J.Fragment,{children:[Z.jsx(Nf,{layerComponent:Z.jsx(Uu,{mapId:e.mapId,geojson:F.geojson}),visible:!0,configurable:!0,type:"layer",name:F.geojson.geometry?.type==="LineString"?F.measure.toFixed(3).toString()+" "+F.unit:F.measure.toFixed(3).toString()+" "+F.unit+""},F.measure),Z.jsx(Df,{title:"Delete",children:Z.jsxs(Ui,{onClick:()=>M(D),children:[" ",Z.jsx(v1,{})," "]})}),Z.jsx(Df,{title:"Center Location",children:Z.jsx(Ui,{onClick:()=>{a?.map?.map.setCenter(F.geojson.geometry.type==="Point"?F.geojson.geometry.coordinates:GI(F.geojson).geometry.coordinates)},children:Z.jsx(HI,{})})})]},F.measure+"-"+D)})]},F.measure)})),o&&Z.jsx(Uu,{mapId:e.mapId,geojson:{type:"FeatureCollection",features:[o]},layerId:"highlightBorder",defaultPaintOverrides:{circle:{"circle-color":"#dd9900","circle-opacity":.4,"circle-radius":10},line:{"line-color":"#dd9900","line-opacity":.4,"line-width":10},fill:{"fill-color":"#dd9900","fill-opacity":.4}}})]})]})})};try{PB.displayName="MlMultiMeasureTool",PB.__docgenInfo={description:"",displayName:"MlMultiMeasureTool",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:null,description:`Style attribute for the button-style
https://mui.com/system/getting-started/the-sx-prop/`,name:"buttonStyleOverride",required:!1,type:{name:"SxProps | undefined"}},measureType:{defaultValue:null,description:'String that specify if the Tool measures an area ("polygon") or length ("line")',name:"measureType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"line"'},{value:'"polygon"'}]}},multiType:{defaultValue:null,description:"Boolean which decides if the user can switch between measure modes",name:"multiType",required:!1,type:{name:"boolean | undefined"}},unit:{defaultValue:null,description:"String that dictates which unit of measurement is used",name:"unit",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"meters"'},{value:'"metres"'},{value:'"millimeters"'},{value:'"millimetres"'},{value:'"centimeters"'},{value:'"centimetres"'},{value:'"kilometers"'},{value:'"kilometres"'},{value:'"miles"'},{value:'"nauticalmiles"'},{value:'"inches"'},{value:'"yards"'},{value:'"feet"'},{value:'"radians"'},{value:'"degrees"'}]}},onChange:{defaultValue:null,description:`Callback function that is called each time measurment geometry within has changed within MlMeasureTool.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((options: { value: number; unit?: string | undefined; geojson: Feature<Geometry, GeoJsonProperties>; geometries?: [] | undefined; }) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called by the end of drawing geometries.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}const Zxe=Ei(Z.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Kxe=Ei(Z.jsx("path",{d:"M19 13H5v-2h14z"})),S3=({className:e="",title:t,onClick:r,style:n})=>Z.jsxs("svg",{width:"52",height:"53",viewBox:"0 0 52 53",fill:"none",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,children:[t&&Z.jsx("title",{children:t}),Z.jsx("circle",{cx:"26.0001",cy:"26.1843",r:"24",fill:"white",stroke:"#009EE0",strokeWidth:"2"}),Z.jsx("path",{d:"M26.4915 7.59161C26.3524 8.07338 25.6698 8.07338 25.5307 7.59161L24.2998 3.3276C24.2075 3.0079 24.4474 2.68893 24.7802 2.68893H27.242C27.5748 2.68893 27.8147 3.0079 27.7224 3.3276L26.4915 7.59161Z",fill:"#009EE0"}),Z.jsx("path",{d:"M25.5085 44.7598C25.6476 44.278 26.3302 44.278 26.4693 44.7598L27.7002 49.0238C27.7925 49.3435 27.5526 49.6625 27.2198 49.6625H24.758C24.4252 49.6625 24.1853 49.3435 24.2776 49.0238L25.5085 44.7598Z",fill:"#009EE0"}),Z.jsx("path",{d:"M44.6641 26.4915C44.1823 26.3524 44.1823 25.6698 44.6641 25.5307L48.9281 24.2998C49.2478 24.2075 49.5668 24.4474 49.5668 24.7802V27.242C49.5668 27.5747 49.2478 27.8147 48.9281 27.7224L44.6641 26.4915Z",fill:"#009EE0"}),Z.jsx("path",{d:"M7.3959 25.6085C7.87766 25.7476 7.87766 26.4302 7.3959 26.5693L3.13189 27.8002C2.81218 27.8925 2.49321 27.6526 2.49321 27.3198L2.49321 24.858C2.49321 24.5253 2.81218 24.2853 3.13189 24.3776L7.3959 25.6085Z",fill:"#009EE0"})]});try{S3.displayName="CompassBackground",S3.__docgenInfo={description:"",displayName:"CompassBackground",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const C3=({className:e="",title:t,onClick:r,style:n})=>Z.jsxs("svg",{width:"10",height:"40",viewBox:"0 0 10 40",fill:"none",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,children:[t&&Z.jsx("title",{children:t}),Z.jsxs("g",{transform:"translate(0.67544,-1.25e-5)",children:[Z.jsx("path",{d:"m 3.34715,4.52028 c 0.22737,-1.05154 1.72745,-1.05154 1.95482,0 L 8.64912,20 H 0 Z",fill:"#cf003d"}),Z.jsx("path",{d:"m 3.34715,35.4797 c 0.22737,1.0516 1.72745,1.0516 1.95482,0 L 8.64912,20 H 0 Z",fill:"#d3dcf0"})]})]});try{C3.displayName="CompassNeedle",C3.__docgenInfo={description:"",displayName:"CompassNeedle",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const Jxe=Ar(vo)(({theme:e})=>({zIndex:1e3,cursor:"pointer",transform:"scale(1)",[e.breakpoints.down("md")]:{transform:"scale(1.6)"}})),Qxe=Ar(vo)(({theme:e})=>({position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",[e.breakpoints.down("md")]:{right:"0px",top:"-52px"},circle:{fill:e.palette.compass.compColor,stroke:e.palette.compass.compStroke},path:{fill:e.palette.compass.compStroke},"&:hover circle":{fill:e.palette.compass.compHover}})),e2e=Ar(vo)(({theme:e})=>({display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}})),E3=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=J.useState(0),i=()=>{t.map?.map?.getBearing&&n(Math.round(t.map.map.getBearing()))};J.useEffect(()=>{if(t.map)return t.map.on("rotate",i,t.componentId),i(),()=>{t.map?.map.off("rotate",i)}},[t.map,e.mapId]);const o=()=>{r==0?t.map?.map.setBearing(-90):r==-90?t.map?.map.setBearing(180):r==180?t.map?.map.setBearing(90):t.map?.map.setBearing(0)};return Z.jsx(Z.Fragment,{children:Z.jsx(Jxe,{sx:{...e.style},children:Z.jsxs(Qxe,{onClick:o,sx:{...e.backgroundStyle},children:[Z.jsx(S3,{style:{position:"absolute",top:0,left:0}}),Z.jsx(e2e,{onClick:o,sx:{...e.needleStyle},children:Z.jsx(C3,{style:{transform:"rotate("+(r>0?"-"+r:-1*r)+"deg)"}})})]})})})};try{E3.displayName="MlNavigationCompass",E3.__docgenInfo={description:`Navigation component that displays a compass component which indicates the current oriantation of the map it is registered for and offers controls to turn the bearing 90 left/right or reset north to point up.

All style props are applied using`,displayName:"MlNavigationCompass",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapHook",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"Style object to adjust css definitions of the component.",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},backgroundStyle:{defaultValue:null,description:"Style object to adjust css definitions of the background.",name:"backgroundStyle",required:!1,type:{name:"CSSProperties | undefined"}},needleStyle:{defaultValue:null,description:"Style object to adjust css definitions of the compass needle.",name:"needleStyle",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const t2e=Ei(Z.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),r2e=Ei(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),n2e=Ar(Ui)(({theme:e})=>({zIndex:1e3,color:e.palette.navigation.buttonColor,transform:"scale(1)"})),T3=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=J.useState(e.mode||"mercator");J.useEffect(()=>{t.map?.map.getProjection?.()?.type!==r&&t.map?.setProjection({type:r})},[t.map]);const i=()=>{if(!t.map)return;const o=r==="globe"?"mercator":"globe";t.map.setProjection({type:o}),n(o)};return Z.jsx(Z.Fragment,{children:Z.jsx(n2e,{variant:"navtools",onClick:i,style:e.style,children:r==="globe"?Z.jsx(r2e,{"data-testid":"PublicIcon",sx:{fontSize:{xs:"1.4em",md:"1em"}}}):Z.jsx(t2e,{"data-testid":"MapIcon",sx:{fontSize:{xs:"1.4em",md:"1em"}}})})})};try{T3.displayName="MlGlobeButton",T3.__docgenInfo={description:"",displayName:"MlGlobeButton",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"Style object to adjust css definitions of the component.",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},mode:{defaultValue:null,description:"Initial projection mode of the map.",name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"globe"'},{value:'"mercator"'}]}}}}}catch{}const IB=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=J.useState(0),i=l1(h=>h.breakpoints.down("md")),o=mu();J.useEffect(()=>{t.map&&(t.map.on("pitchend",()=>{t.map&&n(t.map.getPitch())},t.componentId),n(t.map.getPitch()))},[t.map,e.mapId]);const l=J.useCallback(()=>{t.map&&t.map.easeTo({zoom:t.map.getZoom()+.5})},[t.map]),a=J.useCallback(()=>{t.map&&t.map.easeTo({zoom:t.map.getZoom()-.5})},[t.map]),c=J.useCallback(()=>{if(!t.map)return;n(t.map.getPitch());const h=t.map.getPitch()!==0?0:60;t.map.easeTo({pitch:h})},[t.map]);return Z.jsxs(vo,{sx:{zIndex:501,position:"absolute",display:"flex",flexDirection:"column",right:i?"15px":"25px",bottom:i?"20px":"40px",...i?{margin:"80px 10px 50px 10px"}:{marginTop:"50px"},...e.sx},children:[Z.jsx(E3,{}),e.show3DButton&&Z.jsx(Ui,{variant:"navtools",onClick:c,sx:{color:h=>h.palette.navigation.buttonColor},children:r<29?"2D":"3D"}),e.showGlobeButton&&Z.jsx(T3,{}),e.showFollowGpsButton&&Z.jsx(a3,{}),e.showCenterLocationButton&&Z.jsx(dT,{}),Z.jsx(sT,{orientation:"vertical",sx:{border:"none",Button:{minWidth:"20px !important",color:o.palette.navigation.buttonColor},"Button:hover":{border:"none"}},children:e.showZoomButtons&&Z.jsxs(Z.Fragment,{children:[Z.jsx(Ui,{variant:"navtools",onClick:l,sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0,position:"relative"},children:Z.jsx(Zxe,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})}),Z.jsx(Nc,{sx:{backgroundColor:"#fff"},children:Z.jsx(lT,{sx:{marginLeft:"6px",marginRight:"6px"}})}),Z.jsx(Ui,{variant:"navtools",onClick:a,sx:{margin:0,borderTopLeftRadius:0,borderTopRightRadius:0},children:Z.jsx(Kxe,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})]})}),e.children&&ft.cloneElement(e.children,{})]})};try{IB.displayName="MlNavigationTools",IB.__docgenInfo={description:"",displayName:"MlNavigationTools",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},show3DButton:{defaultValue:null,description:"Show 3D button",name:"show3DButton",required:!1,type:{name:"boolean | undefined"}},showGlobeButton:{defaultValue:null,description:"Show global button",name:"showGlobeButton",required:!1,type:{name:"boolean | undefined"}},showZoomButtons:{defaultValue:null,description:"Show zoom button",name:"showZoomButtons",required:!1,type:{name:"boolean | undefined"}},showFollowGpsButton:{defaultValue:null,description:"Show follow GPS button",name:"showFollowGpsButton",required:!1,type:{name:"boolean | undefined"}},showCenterLocationButton:{defaultValue:null,description:"Show center on current position button",name:"showCenterLocationButton",required:!1,type:{name:"boolean | undefined"}},children:{defaultValue:null,description:"Additional JSX Elements to be rendered below MlNavigationTools buttons",name:"children",required:!1,type:{name:"Element | undefined"}},sx:{defaultValue:null,description:"Style attribute for NavigationTools container",name:"sx",required:!1,type:{name:"SxProps | undefined"}},mediaIsMobile:{defaultValue:null,description:"Style attribute for NavigationTools container",name:"mediaIsMobile",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const Tx=e=>(Vf({idPrefix:"MlLayer-",layerId:e.layerId,mapId:e.mapId,geojson:e.geojson||void 0,options:{type:"background",paint:{...e?.options?.type&&e.options.type!=="background"?{}:{"background-color":"rgba(0,0,0,0)"}},...e.options},insertBeforeLayer:e.insertBeforeLayer}),Z.jsx(Z.Fragment,{}));try{Tx.displayName="MlLayer",Tx.__docgenInfo={description:"Basic layer component that create a layer in a MapLibre-gl instance and keeps it updated according to it attribute configuration.",displayName:"MlLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}}}}}catch{}const kB=e=>{const t=J.useRef(0),r=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[n,i]=J.useState(0),[o,l]=J.useState(""),a=J.useCallback(()=>{if(!r.map||r.map?.map.getZoom()===t.current)return;t.current=r.map?.map.getZoom();const v=e.maxWidth||100,x=r.map.map._container.clientHeight/2,b=r.map.map.unproject([0,x]),S=r.map.map.unproject([v,x]),I=b.distanceTo(S);if(e.unit==="imperial"){const k=3.2808*I;if(k>5280){const M=k/5280;c(v,M,r.map.map._getUIString("ScaleControl.Miles"))}else c(v,k,r.map.map._getUIString("ScaleControl.Feet"))}else if(e.unit==="nautical"){const k=I/1852;c(v,k,r.map.map._getUIString("ScaleControl.NauticalMiles"))}else I>=1e3?c(v,I/1e3,r.map.map._getUIString("ScaleControl.Kilometers")):c(v,I,r.map.map._getUIString("ScaleControl.Meters"))},[r.map,e.unit,e.maxWidth]);J.useEffect(()=>{if(!r.map)return;const v=a;return r.map.on("move",v,r.componentId),a(),()=>{r.map?.map.off("move",v)}},[r.map,a]);const c=(v,x,b)=>{const S=g(x),I=S/x;i(v*I),l(S+"&nbsp;"+b)},h=v=>{const x=Math.pow(10,Math.ceil(-Math.log(v)/Math.LN10));return Math.round(v*x)/x},g=v=>{const x=Math.pow(10,`${Math.floor(v)}`.length-1);let b=v/x;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:h(b),x*b};return Z.jsx(Z.Fragment,{children:Z.jsx("div",{style:{backgroundColor:"hsla(0,0%,100%,.75)",fontSize:"10px",border:"2px solid #333",borderTop:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box",width:n+"px",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:o}})})};try{kB.displayName="MlScaleReference",kB.__docgenInfo={description:"",displayName:"MlScaleReference",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number | undefined"}},unit:{defaultValue:null,description:"",name:"unit",required:!1,type:{name:"string | undefined"}}}}}catch{}var v4,AB;function i2e(){if(AB)return v4;AB=1;function e(r,n){var i=r.getCenter(),o=r.getZoom(),l=r.getBearing(),a=r.getPitch();n.forEach(function(c){c.jumpTo({center:i,zoom:o,bearing:l,pitch:a})})}function t(){var r,n=arguments.length;if(n===1)r=arguments[0];else{r=[];for(var i=0;i<n;i++)r.push(arguments[i])}var o=[];r.forEach(function(h,g){o[g]=c.bind(null,h,r.filter(function(v,x){return x!==g}))});function l(){r.forEach(function(h,g){h.on("move",o[g])})}function a(){r.forEach(function(h,g){h.off("move",o[g])})}function c(h,g){a(),e(h,g),l()}return l(),function(){a(),o=[],r=[]}}return v4=t,v4}var a2e=i2e();const uU=tf(a2e),MB=e=>{const t=J.useContext(Uh),r=J.useRef(!1),n=J.useRef(()=>{}),[i,o]=J.useState(50),l=J.useRef(50),[a,c]=J.useState(50),h=J.useRef(50),g=J.useMemo(()=>e.magnifierRadius||200,[e.magnifierRadius]),v=J.useCallback(()=>!(!e.map1Id||!e.map2Id||!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[e,t]),x=J.useRef(()=>{v()&&S({clientX:l.current,clientY:h.current})});J.useEffect(()=>{window.addEventListener("resize",x.current);const F=x.current;return()=>{window.removeEventListener("resize",F),n.current()}},[]);const b=J.useCallback(F=>{if(!v())return;const D=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let q=typeof F.touches<"u"&&typeof F.touches[0]<"u"?F.touches[0].clientX:0,z=typeof F.touches<"u"&&typeof F.touches[0]<"u"?F.touches[0].clientY:0;q-=D.x,z-=D.y;const U=parseFloat((q/D.width*100).toFixed(2)),H=parseFloat((z/D.height*100).toFixed(2));(l.current!==U||h.current!==H)&&(o(U),l.current=U,c(H),h.current=H,t.maps[e.map2Id].getContainer().style.clipPath=`circle(${g}px at `+l.current*D.width/100+"px "+h.current*D.height/100+"px)")},[t,v,e,g]),S=J.useCallback(F=>{if(!v())return;const D=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let q=F.clientX,z=F.clientY;q-=D.x,z-=D.y;const U=parseFloat((q/D.width*100).toFixed(2)),H=parseFloat((z/D.height*100).toFixed(2));(l.current!==U||h.current!==H)&&(o(U),l.current=U,c(H),h.current=H,t.maps[e.map2Id].getContainer().style.clipPath=`circle(${g}px at `+l.current*D.width/100+"px "+h.current*D.height/100+"px)")},[t,v,e,g]);J.useEffect(()=>{!v()||r.current||(r.current=!0,n.current=uU(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),S({clientX:l.current,clientY:h.current}),S({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2,clientY:t.maps[e.map1Id].getCanvas().clientHeight/2}))},[t.mapIds,t,v,e,S]);const I=F=>{F.nativeEvent instanceof TouchEvent?(document.addEventListener("touchmove",b),document.addEventListener("touchend",k)):(document.addEventListener("mousemove",S),document.addEventListener("mouseup",M))},k=()=>{document.removeEventListener("touchmove",b),document.removeEventListener("touchend",k)},M=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",M)},O=F=>{const D=new WheelEvent(F.type,F);t.map?.map.getCanvas().dispatchEvent(D)};return Z.jsx("div",{style:{position:"absolute",left:i+"%",top:a+"%",borderRadius:"50%",width:g*2-2+"px",height:g*2-2+"px",background:"rgba(0,0,0,0)",border:"2px solid #fafafa",boxShadow:"1px 2px 2px rgba(19, 19, 19, .5), inset 1px 1px 1px rgba(19, 19, 19, .2)",cursor:"pointer",zIndex:"110",marginLeft:g*-1-1+"px",marginTop:g*-1-1+"px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none",...e.magnifierStyle},onTouchStart:I,onMouseDown:I,onWheel:O})};try{MB.displayName="MlLayerMagnify",MB.__docgenInfo={description:`
Hides the MapLibreMap referenced by props.map2Id except for the "magnifier"-circle that reveals
the map and can be dragged around on top of the MapLibreMap referenced by props.map1Id`,displayName:"MlLayerMagnify",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance",name:"map2Id",required:!0,type:{name:"string"}},magnifierRadius:{defaultValue:null,description:'Size of the "magnifier"-circle',name:"magnifierRadius",required:!1,type:{name:"number | undefined"}},magnifierStyle:{defaultValue:null,description:"object (React.CSSProperties) that is added to the magnifier default style",name:"magnifierStyle",required:!0,type:{name:"CSSProperties | undefined"}}}}}catch{}const P3=({className:e="",title:t,onClick:r,style:n,color:i})=>Z.jsxs("svg",{viewBox:"0 0 47 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,color:i,children:[Z.jsx("path",{d:"M29.5 21.25L35.75 15L29.5 8.75V21.25Z",fill:"#009EE0"}),Z.jsx("path",{d:"M17.5 8.75L11.25 15L17.5 21.25V8.75Z",fill:"#009EE0"})]});try{P3.displayName="SwipeIcon",P3.__docgenInfo={description:"",displayName:"SwipeIcon",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}}}}}catch{}const LB=e=>{const t=J.useContext(Uh),r=J.useRef(!1),[n,i]=J.useState(50),o=J.useRef(0),l=J.useRef(()=>{}),a=J.useCallback(()=>!(!e.map1Id||!e.map2Id||!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[t,e.map1Id,e.map2Id]),c=()=>{l.current()},h=J.useCallback(I=>{if(!a())return;const k=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let M=typeof I.touches<"u"&&typeof I.touches[0]<"u"?I.touches[0].clientX:0;M-=k.x;const O=parseFloat((M/k.width*100).toFixed(2));if(o.current!==O){i(O),o.current=O;const F="rect(0, "+o.current*k.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=F}},[t,a,e.map1Id,e.map2Id]),g=J.useCallback(I=>{if(!a())return;const k=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let M=I.clientX;M-=k.x;const O=parseFloat((M/k.width*100).toFixed(2));if(o.current!==O){i(O),o.current=O;const F="rect(0, "+o.current*k.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=F}},[t,a,e.map1Id,e.map2Id]);J.useEffect(()=>c,[]),J.useEffect(()=>{!a()||r.current||(r.current=!0,l.current=uU(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),g({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2}))},[t.mapIds,t,e,g,a]);const v=I=>{window?.TouchEvent&&I.nativeEvent instanceof window.TouchEvent?(document.addEventListener("touchmove",h),document.addEventListener("touchend",x)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",b))},x=()=>{document.removeEventListener("touchmove",h),document.removeEventListener("touchend",x)},b=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)};function S(){const I=parseFloat(t.maps[e.map2Id].getContainer().style.clip.split(",")[1].replace("px","")),k=t.maps[e.map1Id].getCanvas().getBoundingClientRect().width;if(I<k){const M=parseFloat((I/k*100).toFixed(2));i(M)}else{const M="rect(0, "+k/2+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=M,i(50)}}return J.useEffect(()=>(window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}),[t]),Z.jsx("div",{style:{position:"absolute",left:n+"%",top:"50%",borderRadius:"50%",width:"65px",height:"65px",background:"rgba(234, 235, 241, 0.75)",border:"2px solid rgba(0, 158, 224, 0.75)",cursor:"pointer",zIndex:"110",marginLeft:"-35px",marginTop:"-50px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none",...e.buttonStyle},onTouchStart:v,onMouseDown:v,children:Z.jsx(P3,{color:"#0066ff",style:{width:"65px",height:"65px",justifyContent:"center",zIndex:1100}})})};try{LB.displayName="MlLayerSwipe",LB.__docgenInfo={description:"creates a split view of 2 synchronised maplibre instances",displayName:"MlLayerSwipe",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance.",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance.",name:"map2Id",required:!0,type:{name:"string"}},buttonStyle:{defaultValue:null,description:"object (React.CSSProperties) that is added to the button default style",name:"buttonStyle",required:!0,type:{name:"CSSProperties | undefined"}}}}}catch{}const cU=function(e,t,r,n,i,o,l,a,c){if(typeof n.current[o.current]<"u"){const h=o.current+1===n.current.length?e.geojson:jl([...i.current,...n.current[o.current].geometry.coordinates]);c(h),typeof e.onTransitionFrame=="function"&&e.onTransitionFrame(h),o.current++,r.current&&o.current<n.current.length?a.current=setTimeout(()=>cU(...arguments),l):(typeof e.onTransitionEnd=="function"&&e.onTransitionEnd(e.geojson),r.current=!1)}},o2e=(e,t,r,n,i,o,l,a,c,h)=>{const g=[],v=[];let x=[],b=[];t.current=[];const S=i.current||{geometry:{type:"LineString",coordinates:[]},properties:{},type:"Feature"},I=e.geojson;let k=I,M=S,O=!1;if(typeof k.geometry>"u"&&typeof M.geometry<"u"&&M.geometry.coordinates.length>1)k=jl(M.geometry.coordinates.slice(0,2));else if(typeof M.geometry>"u"&&typeof k.geometry<"u"&&k.geometry.coordinates.length>1)M=jl(k.geometry.coordinates.slice(0,2));else if(typeof M.geometry>"u"&&typeof k.geometry>"u")return;if(k.geometry.coordinates.length<M.geometry.coordinates.length&&(k=S,M=I,O=!0),k&&M)for(let ae=0,le=k.geometry.coordinates.length;ae<le;ae++)typeof M.geometry.coordinates[ae]<"u"&&k.geometry.coordinates[ae][0]===M.geometry.coordinates[ae][0]&&k.geometry.coordinates[ae][1]===M.geometry.coordinates[ae][1]?t.current.push(k.geometry.coordinates[ae]):(typeof k.geometry.coordinates[ae]<"u"&&v.push(k.geometry.coordinates[ae]),typeof M.geometry.coordinates[ae]<"u"&&g.push(M.geometry.coordinates[ae]));if(O?(x=g,b=v):(x=v,b=g),x.length<2&&b<2)return;const F=e.transitionTime/o,D=b.length>1?Math.round(N0(jl(b))):0,q=x.length>1?Math.round(N0(jl(x))):0,z=q+D,U=D/z,H=Math.round(F*U),X=Math.round(D/H*100)/100,ie=q/z,ee=Math.round(F*ie),G=Math.round(q/ee*100)/100;let ne;ne=[...RB(b,X,H)],ne.reverse(),ne=[...ne,...RB(x,G,ee)],ne.push(I),r.current=ne,l.current=1,n.current=!0,c.current=setTimeout(()=>cU(e,a,n,r,t,l,o,c,h),o)},RB=(e,t,r)=>{const n=[];if(e.length>1){const i=Ahe(jl(e),t);let o=i.features[0];for(let l=0;l<r&&(n.push(o),typeof i.features[l]<"u");l++)o=jl([...o.geometry.coordinates,...i.features[l].geometry.coordinates])}return n},s2e=50,DB=e=>{const{geojson:t,...r}=e,n=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),i=J.useRef(!1),o=J.useRef(null),l=J.useRef(!1),a=J.useRef(void 0),c=J.useRef(!1),h=J.useRef([]),g=J.useRef([]),[v,x]=J.useState(Hf([]));J.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]);const b=J.useCallback(()=>{o2e(e,g,h,l,o,s2e,c,n.map,a,x)},[e,n.map]);J.useEffect(()=>{!n.map||!i.current||(typeof e.transitionTime<"u"&&e.type==="line"&&o.current&&(l.current=!1,c.current=!1,h.current=[],g.current=[],b()),e.geojson&&(o.current=e.geojson))},[n.map,b,e]);const S=J.useCallback(()=>{e.type==="line"&&typeof e.transitionTime<"u"&&e.transitionTime&&typeof e.geojson<"u"&&JSON.stringify(o.current)!==JSON.stringify(e.geojson)&&(b(),o.current=e.geojson)},[e,b]);return J.useEffect(()=>{!n.mapIsReady||!e.geojson||(i.current=!0,S())},[n.mapIsReady,S,e]),Z.jsx(Z.Fragment,{children:Z.jsx(Uu,{...r,geojson:v})})};try{DB.displayName="MlTransitionGeoJsonLayer",DB.__docgenInfo={description:'Adds source and layer of types "line", "fill" or "circle" to display GeoJSON data on the map.',displayName:"MlTransitionGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the new layer and source that are added to the MapLibre instance",name:"layerId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}},type:{defaultValue:null,description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"symbol"'},{value:'"fill"'},{value:'"line"'},{value:'"circle"'},{value:'"heatmap"'},{value:'"fill-extrusion"'},{value:'"hillshade"'},{value:'"color-relief"'},{value:'"background"'}]}},paint:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | ... 8 more ... | undefined'}},layout:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`,name:"layout",required:!1,type:{name:'{ "fill-sort-key"?: DataDrivenPropertyValueSpecification<number> | undefined; visibility?: "visible" | "none" | undefined; } | { "line-cap"?: PropertyValueSpecification<...> | undefined; ... 4 more ...; visibility?: "visible" | ... 1 more ... | undefined; } | ... 8 more ... | undefined'}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!1,type:{name:'{ circle?: { "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-color"?: DataDrivenPropertyValueSpecification<string> | undefined; ... 8 more ...; "circle-stroke-opacity"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined; fill?: { ...; } | undefined; line?: { ......'}},labelProp:{defaultValue:null,description:"Property name in the GeoJSON object to be used as a label.",name:"labelProp",required:!1,type:{name:"string | undefined"}},labelOptions:{defaultValue:null,description:"Label configuration options.",name:"labelOptions",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},transitionTime:{defaultValue:null,description:"",name:"transitionTime",required:!1,type:{name:"number | undefined"}}}}}catch{}const l2e=(e="top")=>{switch(e){case"bottom":return"translate(-50%, 0%)";case"left":return"translate(-100%, -50%)";case"right":return"translate(0%, -50%)";case"top-left":return"translate(-100%, -100%)";case"top-right":return"translate(0%, -100%)";case"bottom-left":return"translate(-100%, 0%)";case"bottom-right":return"translate(0%, 0%)";default:case"top":return"translate(-50%, -100%)"}};function u2e(e,t,r){const n=parseInt(String(r?.width||14),10),i=parseInt(String(r?.height||14),10),o={};switch(e){case"bottom":o.marginTop=`${t}px`;break;case"left":o.marginLeft=`-${t}px`;break;case"right":o.marginLeft=`${n+t}px`;break;case"top-left":o.marginTop=`-${i+t}px`,o.marginLeft=`-${t}px`;break;case"top-right":o.marginTop=`-${i+t}px`,o.marginLeft=`${n+t}px`;break;case"bottom-left":o.marginTop=`${t}px`,o.marginLeft=`-${t}px`;break;case"bottom-right":o.marginTop=`${t}px`,o.marginLeft=`${n+t}px`;break;case"top":default:o.marginTop=`-${i+t}px`;break}return o}const I3=({passEventsThrough:e=!0,contentOffset:t=5,...r})=>{const n=da({mapId:r.mapId,waitForLayer:r.insertBeforeLayer}),[i,o]=J.useState(null),l=J.useRef(null),a=J.useRef(null);J.useEffect(()=>{if(!n.map)return;l.current=document.createElement("div");const g={...{width:"12px",height:"12px",background:"linear-gradient(135deg, rgb(186, 208, 218) 0%, rgb(96, 209, 253) 100%)",border:"1px solid rgba(255, 255, 255, 0.7)",boxShadow:"0 2px 6px rgba(90, 0, 0, 0.2), 0 0 0 2px rgba(240, 147, 251, 0.2)",borderRadius:"50%"},...r.markerStyle},v=new X4.Marker({element:l.current,anchor:"center"}).setLngLat([r.lng,r.lat]).addTo(n.map.map);o(v);const x=document.createElement("div");return Object.entries(g).forEach(([b,S])=>{x.style.setProperty(b.replace(/([A-Z])/g,"-$1").toLowerCase(),String(S))}),l.current.appendChild(x),()=>{x.remove(),v.remove(),l.current?.remove()}},[n.map,r.lng,r.lat,r.markerStyle,r.anchor]),J.useEffect(()=>{i&&i.setLngLat([r.lng,r.lat])},[i,r.lng,r.lat]);function c(){const h=a.current?.contentWindow?.document;if(h&&a.current?.parentElement){const g=h.documentElement.scrollHeight;a.current.parentElement.style.height=`${g}px`}}return l.current&&Mf.createPortal(Z.jsx(vo,{sx:{position:"absolute",display:"flex",width:"300px",maxHeight:"500px",opacity:e?1:.7,zIndex:-1,transform:l2e(r.anchor),...u2e(r.anchor,t,r.markerStyle),pointerEvents:e?"none":"auto","&:hover":{opacity:1},...r.containerStyle},children:Z.jsx("iframe",{ref:a,onLoad:c,style:{width:"100%",borderStyle:"none",...r.iframeStyle},srcDoc:`<div>
	<style>
		body {
			${Object.entries(r.iframeBodyStyle||{}).map(([h,g])=>`${h.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${g};`).join(" ")}
		}
	</style>
	${r.content||""}
</div>`,sandbox:"allow-same-origin allow-popups-to-escape-sandbox allow-scripts",title:n.componentId})}),l.current)};try{I3.displayName="MlMarker",I3.__docgenInfo={description:"",displayName:"MlMarker",props:{mapId:{defaultValue:null,description:"ID of the map to add the marker to",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"Layer ID before which to insert the marker",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},lng:{defaultValue:null,description:"Longitude of the marker position",name:"lng",required:!0,type:{name:"number"}},lat:{defaultValue:null,description:"Latitude of the marker position",name:"lat",required:!0,type:{name:"number"}},content:{defaultValue:null,description:"HTML content for the marker popup",name:"content",required:!1,type:{name:"string | undefined"}},markerStyle:{defaultValue:null,description:"CSS properties to apply to the marker dot",name:"markerStyle",required:!1,type:{name:"CSSProperties | undefined"}},containerStyle:{defaultValue:null,description:"CSS properties to apply to the content container",name:"containerStyle",required:!1,type:{name:"CSSProperties | undefined"}},iframeStyle:{defaultValue:null,description:"CSS properties to apply to the iframe element",name:"iframeStyle",required:!1,type:{name:"CSSProperties | undefined"}},iframeBodyStyle:{defaultValue:null,description:"CSS properties to apply to the body of the iframe",name:"iframeBodyStyle",required:!1,type:{name:"CSSProperties | undefined"}},contentOffset:{defaultValue:{value:"5"},description:"Offset in pixels between the marker and its content",name:"contentOffset",required:!1,type:{name:"number | undefined"}},passEventsThrough:{defaultValue:{value:"true"},description:"Whether mouse events pass through the marker content",name:"passEventsThrough",required:!1,type:{name:"boolean | undefined"}},anchor:{defaultValue:null,description:"Anchor position of the marker relative to its coordinates",name:"anchor",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"top-left"'},{value:'"top-right"'},{value:'"bottom-left"'},{value:'"bottom-right"'}]}}}}}catch{}var ia={},xl={},NB;function Ry(){if(NB)return xl;NB=1;function e(M,O,F){if(F===void 0&&(F=Array.prototype),M&&typeof F.find=="function")return F.find.call(M,O);for(var D=0;D<M.length;D++)if(r(M,D)){var q=M[D];if(O.call(void 0,q,D,M))return q}}function t(M,O){return O===void 0&&(O=Object),O&&typeof O.getOwnPropertyDescriptors=="function"&&(M=O.create(null,O.getOwnPropertyDescriptors(M))),O&&typeof O.freeze=="function"?O.freeze(M):M}function r(M,O){return Object.prototype.hasOwnProperty.call(M,O)}function n(M,O){if(M===null||typeof M!="object")throw new TypeError("target is not an object");for(var F in O)r(O,F)&&(M[F]=O[F]);return M}var i=t({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function o(M){return r(i,M.toLowerCase())}var l=t({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(M){return r(l,M.toLowerCase())}var c=t({script:!1,style:!1,textarea:!0,title:!0});function h(M){var O=M.toLowerCase();return r(c,O)&&!c[O]}function g(M){var O=M.toLowerCase();return r(c,O)&&c[O]}function v(M){return M===b.HTML}function x(M){return v(M)||M===b.XML_XHTML_APPLICATION}var b=t({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),S=Object.keys(b).map(function(M){return b[M]});function I(M){return S.indexOf(M)>-1}var k=t({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return xl.assign=n,xl.find=e,xl.freeze=t,xl.HTML_BOOLEAN_ATTRIBUTES=i,xl.HTML_RAW_TEXT_ELEMENTS=c,xl.HTML_VOID_ELEMENTS=l,xl.hasDefaultHTMLNamespace=x,xl.hasOwn=r,xl.isHTMLBooleanAttribute=o,xl.isHTMLRawTextElement=h,xl.isHTMLEscapableRawTextElement=g,xl.isHTMLMimeType=v,xl.isHTMLVoidElement=a,xl.isValidMimeType=I,xl.MIME_TYPE=b,xl.NAMESPACE=k,xl}var eg={},OB;function aw(){if(OB)return eg;OB=1;var e=Ry();function t(x,b){x.prototype=Object.create(Error.prototype,{constructor:{value:x},name:{value:x.name,enumerable:!0,writable:b}})}var r=e.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(r);function i(x){return typeof x=="number"&&x>=1&&x<=25}function o(x){return typeof x=="string"&&x.substring(x.length-r.Error.length)===r.Error}function l(x,b){i(x)?(this.name=n[x],this.message=b||""):(this.message=x,this.name=o(b)?b:r.Error),Error.captureStackTrace&&Error.captureStackTrace(this,l)}t(l,!0),Object.defineProperties(l.prototype,{code:{enumerable:!0,get:function(){var x=n.indexOf(this.name);return i(x)?x:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},c=Object.entries(a),h=0;h<c.length;h++){var g=c[h][0];l[g]=c[h][1]}function v(x,b){this.message=x,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,v)}return t(v),eg.DOMException=l,eg.DOMExceptionName=r,eg.ExceptionCode=a,eg.ParseError=v,eg}var us={},$i={},FB;function dU(){if(FB)return $i;FB=1;function e(Xt){try{typeof Xt!="function"&&(Xt=RegExp);var Et=new Xt("","u").exec("");return!!Et&&Et[0].length===2}catch{}return!1}var t=e();function r(Xt){if(Xt.source[0]!=="[")throw new Error(Xt+" can not be used with chars");return Xt.source.slice(1,Xt.source.lastIndexOf("]"))}function n(Xt,Et){if(Xt.source[0]!=="[")throw new Error("/"+Xt.source+"/ can not be used with chars_without");if(!Et||typeof Et!="string")throw new Error(JSON.stringify(Et)+" is not a valid search");if(Xt.source.indexOf(Et)===-1)throw new Error('"'+Et+'" is not is /'+Xt.source+"/");if(Et==="-"&&Xt.source.indexOf(Et)!==1)throw new Error('"'+Et+'" is not at the first postion of /'+Xt.source+"/");return new RegExp(Xt.source.replace(Et,""),t?"u":"")}function i(Xt){var Et=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(Ir){var $t=typeof Ir=="string";if($t&&Et===void 0&&Ir==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return $t?Ir:Ir.source}).join(""),t?"mu":"m")}function o(Xt){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var l="",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;t&&(a=i("[",r(a),"\\u{10000}-\\u{10FFFF}","]"));var c=/[\x20\x09\x0D\x0A]/,h=r(c),g=i(c,"+"),v=i(c,"*"),x=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;t&&(x=i("[",r(x),"\\u{10000}-\\u{10FFFF}","]"));var b=r(x),S=i("[",b,r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]"),I=i(x,S,"*"),k=i(S,"+"),M=i("&",I,";"),O=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),F=o(M,"|",O),D=i("%",I,";"),q=o(i('"',o(/[^%&"]/,"|",D,"|",F),"*",'"'),"|",i("'",o(/[^%&']/,"|",D,"|",F),"*","'")),z=o('"',o(/[^<&"]/,"|",F),"*",'"',"|","'",o(/[^<&']/,"|",F),"*","'"),U=n(x,":"),H=n(S,":"),X=i(U,H,"*"),ie=i(X,o(":",X),"?"),ee=i("^",ie,"$"),G=i("(",ie,")"),ne=o(/"[^"]*"|'[^']*'/),ae=i(/^<\?/,"(",I,")",o(g,"(",a,"*?)"),"?",/\?>/),le=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,fe=o('"',le,'*"',"|","'",n(le,"'"),"*'"),ke="<!--",me="-->",Se=i(ke,o(n(a,"-"),"|",i("-",n(a,"-"))),"*",me),we="#PCDATA",Pe=o(i(/\(/,v,we,o(v,/\|/,v,ie),"*",v,/\)\*/),"|",i(/\(/,v,we,v,/\)/)),ce=/[?*+]?/,_e=i(/\([^>]+\)/,ce),be=o("EMPTY","|","ANY","|",Pe,"|",_e),Me="<!ELEMENT",Le=i(Me,g,o(ie,"|",D),g,o(be,"|",D),v,">"),Ue=i("NOTATION",g,/\(/,v,I,o(v,/\|/,v,I),"*",v,/\)/),Oe=i(/\(/,v,k,o(v,/\|/,v,k),"*",v,/\)/),tt=o(Ue,"|",Oe),Ze=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",tt),Qe=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",g),"?",z)),Ie=o(g,I,g,Ze,g,Qe),Mt="<!ATTLIST",ot=i(Mt,g,I,Ie,"*",v,">"),$e="about:legacy-compat",tr=o('"'+$e+'"',"|","'"+$e+"'"),Wt="SYSTEM",Gt="PUBLIC",at=o(o(Wt,g,ne),"|",o(Gt,g,fe,g,ne)),dr=i("^",o(o(Wt,g,"(?<SystemLiteralOnly>",ne,")"),"|",o(Gt,g,"(?<PubidLiteral>",fe,")",g,"(?<SystemLiteral>",ne,")"))),hr=o(g,"NDATA",g,I),ur=o(q,"|",o(at,hr,"?")),Cr="<!ENTITY",br=i(Cr,g,I,g,ur,v,">"),nr=o(q,"|",at),lr=i(Cr,g,"%",g,I,g,nr,v,">"),Pr=o(br,"|",lr),ar=i(Gt,g,fe),kr=i("<!NOTATION",g,I,g,o(at,"|",ar),v,">"),Qt=i(v,"=",v),Ht=/1[.]\d+/,Ct=i(g,"version",Qt,o("'",Ht,"'","|",'"',Ht,'"')),Re=/[A-Za-z][-A-Za-z0-9._]*/,Be=o(g,"encoding",Qt,o('"',Re,'"',"|","'",Re,"'")),De=o(g,"standalone",Qt,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),rt=i(/^<\?xml/,Ct,Be,"?",De,"?",v,/\?>/),mt="<!DOCTYPE",At="<![CDATA[",Ot="]]>",Tt=/<!\[CDATA\[/,Yt=/\]\]>/,Bt=i(a,"*?",Yt),wt=i(Tt,Bt);return $i.chars=r,$i.chars_without=n,$i.detectUnicodeSupport=e,$i.reg=i,$i.regg=o,$i.ABOUT_LEGACY_COMPAT=$e,$i.ABOUT_LEGACY_COMPAT_SystemLiteral=tr,$i.AttlistDecl=ot,$i.CDATA_START=At,$i.CDATA_END=Ot,$i.CDSect=wt,$i.Char=a,$i.Comment=Se,$i.COMMENT_START=ke,$i.COMMENT_END=me,$i.DOCTYPE_DECL_START=mt,$i.elementdecl=Le,$i.EntityDecl=Pr,$i.EntityValue=q,$i.ExternalID=at,$i.ExternalID_match=dr,$i.Name=I,$i.NotationDecl=kr,$i.Reference=F,$i.PEReference=D,$i.PI=ae,$i.PUBLIC=Gt,$i.PubidLiteral=fe,$i.QName=ie,$i.QName_exact=ee,$i.QName_group=G,$i.S=g,$i.SChar_s=h,$i.S_OPT=v,$i.SYSTEM=Wt,$i.SystemLiteral=ne,$i.UNICODE_REPLACEMENT_CHARACTER=l,$i.UNICODE_SUPPORT=t,$i.XMLDecl=rt,$i}var BB;function fU(){if(BB)return us;BB=1;var e=Ry(),t=e.find,r=e.hasDefaultHTMLNamespace,n=e.hasOwn,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,l=e.isHTMLVoidElement,a=e.MIME_TYPE,c=e.NAMESPACE,h=Symbol(),g=aw(),v=g.DOMException,x=g.DOMExceptionName,b=dU();function S(Te){if(Te!==h)throw new TypeError("Illegal constructor")}function I(Te){return Te!==""}function k(Te){return Te?Te.split(/[\t\n\f\r ]+/).filter(I):[]}function M(Te,qe){return n(Te,qe)||(Te[qe]=!0),Te}function O(Te){if(!Te)return[];var qe=k(Te);return Object.keys(qe.reduce(M,{}))}function F(Te){return function(qe){return Te&&Te.indexOf(qe)!==-1}}function D(Te){if(!b.QName_exact.test(Te))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+Te+'"')}function q(Te,qe){D(qe),Te=Te||null;var ht=null,kt=qe;if(qe.indexOf(":")>=0){var gr=qe.split(":");ht=gr[0],kt=gr[1]}if(ht!==null&&Te===null)throw new v(v.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(ht==="xml"&&Te!==e.NAMESPACE.XML)throw new v(v.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((ht==="xmlns"||qe==="xmlns")&&Te!==e.NAMESPACE.XMLNS)throw new v(v.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(Te===e.NAMESPACE.XMLNS&&ht!=="xmlns"&&qe!=="xmlns")throw new v(v.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[Te,ht,kt]}function z(Te,qe){for(var ht in Te)n(Te,ht)&&(qe[ht]=Te[ht])}function U(Te,qe){var ht=Te.prototype;if(!(ht instanceof qe)){let kt=function(){};kt.prototype=qe.prototype,kt=new kt,z(ht,kt),Te.prototype=ht=kt}ht.constructor!=Te&&(typeof Te!="function"&&console.error("unknown Class:"+Te),ht.constructor=Te)}var H={},X=H.ELEMENT_NODE=1,ie=H.ATTRIBUTE_NODE=2,ee=H.TEXT_NODE=3,G=H.CDATA_SECTION_NODE=4,ne=H.ENTITY_REFERENCE_NODE=5,ae=H.ENTITY_NODE=6,le=H.PROCESSING_INSTRUCTION_NODE=7,fe=H.COMMENT_NODE=8,ke=H.DOCUMENT_NODE=9,me=H.DOCUMENT_TYPE_NODE=10,Se=H.DOCUMENT_FRAGMENT_NODE=11,we=H.NOTATION_NODE=12,Pe=e.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function ce(Te,qe){if(qe.length<Te.length)return ce(qe,Te);var ht=null;for(var kt in Te){if(Te[kt]!==qe[kt])return ht;ht=Te[kt]}return ht}function _e(Te){return Te.guid||(Te.guid=Math.random()),Te.guid}function be(){}be.prototype={length:0,item:function(Te){return Te>=0&&Te<this.length?this[Te]:null},toString:function(Te){for(var qe=[],ht=0;ht<this.length;ht++)$t(this[ht],qe,Te);return qe.join("")},filter:function(Te){return Array.prototype.filter.call(this,Te)},indexOf:function(Te){return Array.prototype.indexOf.call(this,Te)}},be.prototype[Symbol.iterator]=function(){var Te=this,qe=0;return{next:function(){return qe<Te.length?{value:Te[qe++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Me(Te,qe){this._node=Te,this._refresh=qe,Le(this)}function Le(Te){var qe=Te._node._inc||Te._node.ownerDocument._inc;if(Te._inc!==qe){var ht=Te._refresh(Te._node);if(un(Te,"length",ht.length),!Te.$$length||ht.length<Te.$$length)for(var kt=ht.length;kt in Te;kt++)n(Te,kt)&&delete Te[kt];z(ht,Te),Te._inc=qe}}Me.prototype.item=function(Te){return Le(this),this[Te]||null},U(Me,be);function Ue(){}function Oe(Te,qe){for(var ht=0;ht<Te.length;){if(Te[ht]===qe)return ht;ht++}}function tt(Te,qe,ht,kt){if(kt?qe[Oe(qe,kt)]=ht:(qe[qe.length]=ht,qe.length++),Te){ht.ownerElement=Te;var gr=Te.ownerDocument;gr&&(kt&&Wt(gr,Te,kt),tr(gr,Te,ht))}}function Ze(Te,qe,ht){var kt=Oe(qe,ht);if(kt>=0){for(var gr=qe.length-1;kt<=gr;)qe[kt]=qe[++kt];if(qe.length=gr,Te){var Ur=Te.ownerDocument;Ur&&Wt(Ur,Te,ht),ht.ownerElement=null}}}Ue.prototype={length:0,item:be.prototype.item,getNamedItem:function(Te){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(Te=Te.toLowerCase());for(var qe=0;qe<this.length;){var ht=this[qe];if(ht.nodeName===Te)return ht;qe++}return null},setNamedItem:function(Te){var qe=Te.ownerElement;if(qe&&qe!==this._ownerElement)throw new v(v.INUSE_ATTRIBUTE_ERR);var ht=this.getNamedItemNS(Te.namespaceURI,Te.localName);return ht===Te?Te:(tt(this._ownerElement,this,Te,ht),ht)},setNamedItemNS:function(Te){return this.setNamedItem(Te)},removeNamedItem:function(Te){var qe=this.getNamedItem(Te);if(!qe)throw new v(v.NOT_FOUND_ERR,Te);return Ze(this._ownerElement,this,qe),qe},removeNamedItemNS:function(Te,qe){var ht=this.getNamedItemNS(Te,qe);if(!ht)throw new v(v.NOT_FOUND_ERR,Te?Te+" : "+qe:qe);return Ze(this._ownerElement,this,ht),ht},getNamedItemNS:function(Te,qe){Te||(Te=null);for(var ht=0;ht<this.length;){var kt=this[ht];if(kt.localName===qe&&kt.namespaceURI===Te)return kt;ht++}return null}},Ue.prototype[Symbol.iterator]=function(){var Te=this,qe=0;return{next:function(){return qe<Te.length?{value:Te[qe++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Qe(){}Qe.prototype={hasFeature:function(Te,qe){return!0},createDocument:function(Te,qe,ht){var kt=a.XML_APPLICATION;Te===c.HTML?kt=a.XML_XHTML_APPLICATION:Te===c.SVG&&(kt=a.XML_SVG_IMAGE);var gr=new $e(h,{contentType:kt});if(gr.implementation=this,gr.childNodes=new be,gr.doctype=ht||null,ht&&gr.appendChild(ht),qe){var Ur=gr.createElementNS(Te,qe);gr.appendChild(Ur)}return gr},createDocumentType:function(Te,qe,ht,kt){D(Te);var gr=new mt(h);return gr.name=Te,gr.nodeName=Te,gr.publicId=qe||"",gr.systemId=ht||"",gr.internalSubset=kt||"",gr.childNodes=new be,gr},createHTMLDocument:function(Te){var qe=new $e(h,{contentType:a.HTML});if(qe.implementation=this,qe.childNodes=new be,Te!==!1){qe.doctype=this.createDocumentType("html"),qe.doctype.ownerDocument=qe,qe.appendChild(qe.doctype);var ht=qe.createElement("html");qe.appendChild(ht);var kt=qe.createElement("head");if(ht.appendChild(kt),typeof Te=="string"){var gr=qe.createElement("title");gr.appendChild(qe.createTextNode(Te)),kt.appendChild(gr)}ht.appendChild(qe.createElement("body"))}return qe}};function Ie(Te){S(Te)}Ie.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var Te=this.getRootNode();return Te&&Te.nodeType===Te.DOCUMENT_NODE},contains:function(Te){if(!Te)return!1;var qe=Te;do{if(this===qe)return!0;qe=Te.parentNode}while(qe);return!1},getRootNode:function(Te){var qe=this;do{if(!qe.parentNode)return qe;qe=qe.parentNode}while(qe)},isEqualNode:function(Te){if(!Te||this.nodeType!==Te.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==Te.name||this.publicId!==Te.publicId||this.systemId!==Te.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==Te.namespaceURI||this.prefix!==Te.prefix||this.localName!==Te.localName||this.attributes.length!==Te.attributes.length)return!1;for(var qe=0;qe<this.attributes.length;qe++){var ht=this.attributes.item(qe);if(!ht.isEqualNode(Te.getAttributeNodeNS(ht.namespaceURI,ht.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==Te.namespaceURI||this.localName!==Te.localName||this.value!==Te.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==Te.target||this.data!==Te.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==Te.data)return!1;break}if(this.childNodes.length!==Te.childNodes.length)return!1;for(var qe=0;qe<this.childNodes.length;qe++)if(!this.childNodes[qe].isEqualNode(Te.childNodes[qe]))return!1;return!0},isSameNode:function(Te){return this===Te},insertBefore:function(Te,qe){return Qt(this,Te,qe)},replaceChild:function(Te,qe){Qt(this,Te,qe,kr),qe&&this.removeChild(qe)},removeChild:function(Te){return at(this,Te)},appendChild:function(Te){return this.insertBefore(Te,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Te){return Rr(this.ownerDocument||this,this,Te)},normalize:function(){for(var Te=this.firstChild;Te;){var qe=Te.nextSibling;qe&&qe.nodeType==ee&&Te.nodeType==ee?(this.removeChild(qe),Te.appendData(qe.data)):(Te.normalize(),Te=qe)}},isSupported:function(Te,qe){return this.ownerDocument.implementation.hasFeature(Te,qe)},lookupPrefix:function(Te){for(var qe=this;qe;){var ht=qe._nsMap;if(ht){for(var kt in ht)if(n(ht,kt)&&ht[kt]===Te)return kt}qe=qe.nodeType==ie?qe.ownerDocument:qe.parentNode}return null},lookupNamespaceURI:function(Te){for(var qe=this;qe;){var ht=qe._nsMap;if(ht&&n(ht,Te))return ht[Te];qe=qe.nodeType==ie?qe.ownerDocument:qe.parentNode}return null},isDefaultNamespace:function(Te){var qe=this.lookupPrefix(Te);return qe==null},compareDocumentPosition:function(Te){if(this===Te)return 0;var qe=Te,ht=this,kt=null,gr=null;if(qe instanceof Ct&&(kt=qe,qe=kt.ownerElement),ht instanceof Ct&&(gr=ht,ht=gr.ownerElement,kt&&qe&&ht===qe))for(var Ur=0,Er;Er=ht.attributes[Ur];Ur++){if(Er===kt)return Pe.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Pe.DOCUMENT_POSITION_PRECEDING;if(Er===gr)return Pe.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Pe.DOCUMENT_POSITION_FOLLOWING}if(!qe||!ht||ht.ownerDocument!==qe.ownerDocument)return Pe.DOCUMENT_POSITION_DISCONNECTED+Pe.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(_e(ht.ownerDocument)>_e(qe.ownerDocument)?Pe.DOCUMENT_POSITION_FOLLOWING:Pe.DOCUMENT_POSITION_PRECEDING);if(gr&&qe===ht)return Pe.DOCUMENT_POSITION_CONTAINS+Pe.DOCUMENT_POSITION_PRECEDING;if(kt&&qe===ht)return Pe.DOCUMENT_POSITION_CONTAINED_BY+Pe.DOCUMENT_POSITION_FOLLOWING;for(var si=[],Hn=qe.parentNode;Hn;){if(!gr&&Hn===ht)return Pe.DOCUMENT_POSITION_CONTAINED_BY+Pe.DOCUMENT_POSITION_FOLLOWING;si.push(Hn),Hn=Hn.parentNode}si.reverse();for(var di=[],Mi=ht.parentNode;Mi;){if(!kt&&Mi===qe)return Pe.DOCUMENT_POSITION_CONTAINS+Pe.DOCUMENT_POSITION_PRECEDING;di.push(Mi),Mi=Mi.parentNode}di.reverse();var qr=ce(si,di);for(var cn in qr.childNodes){var Pn=qr.childNodes[cn];if(Pn===ht)return Pe.DOCUMENT_POSITION_FOLLOWING;if(Pn===qe)return Pe.DOCUMENT_POSITION_PRECEDING;if(di.indexOf(Pn)>=0)return Pe.DOCUMENT_POSITION_FOLLOWING;if(si.indexOf(Pn)>=0)return Pe.DOCUMENT_POSITION_PRECEDING}return 0}};function Mt(Te){return Te=="<"&&"&lt;"||Te==">"&&"&gt;"||Te=="&"&&"&amp;"||Te=='"'&&"&quot;"||"&#"+Te.charCodeAt()+";"}z(H,Ie),z(H,Ie.prototype),z(Pe,Ie),z(Pe,Ie.prototype);function ot(Te,qe){if(qe(Te))return!0;if(Te=Te.firstChild)do if(ot(Te,qe))return!0;while(Te=Te.nextSibling)}function $e(Te,qe){S(Te);var ht=qe||{};this.ownerDocument=this,this.contentType=ht.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function tr(Te,qe,ht){Te&&Te._inc++;var kt=ht.namespaceURI;kt===c.XMLNS&&(qe._nsMap[ht.prefix?ht.localName:""]=ht.value)}function Wt(Te,qe,ht,kt){Te&&Te._inc++;var gr=ht.namespaceURI;gr===c.XMLNS&&delete qe._nsMap[ht.prefix?ht.localName:""]}function Gt(Te,qe,ht){if(Te&&Te._inc){Te._inc++;var kt=qe.childNodes;if(ht&&!ht.nextSibling)kt[kt.length++]=ht;else{for(var gr=qe.firstChild,Ur=0;gr;)kt[Ur++]=gr,gr=gr.nextSibling;kt.length=Ur,delete kt[kt.length]}}}function at(Te,qe){if(Te!==qe.parentNode)throw new v(v.NOT_FOUND_ERR,"child's parent is not parent");var ht=qe.previousSibling,kt=qe.nextSibling;return ht?ht.nextSibling=kt:Te.firstChild=kt,kt?kt.previousSibling=ht:Te.lastChild=ht,Gt(Te.ownerDocument,Te),qe.parentNode=null,qe.previousSibling=null,qe.nextSibling=null,qe}function dr(Te){return Te&&(Te.nodeType===Ie.DOCUMENT_NODE||Te.nodeType===Ie.DOCUMENT_FRAGMENT_NODE||Te.nodeType===Ie.ELEMENT_NODE)}function hr(Te){return Te&&(Te.nodeType===Ie.CDATA_SECTION_NODE||Te.nodeType===Ie.COMMENT_NODE||Te.nodeType===Ie.DOCUMENT_FRAGMENT_NODE||Te.nodeType===Ie.DOCUMENT_TYPE_NODE||Te.nodeType===Ie.ELEMENT_NODE||Te.nodeType===Ie.PROCESSING_INSTRUCTION_NODE||Te.nodeType===Ie.TEXT_NODE)}function ur(Te){return Te&&Te.nodeType===Ie.DOCUMENT_TYPE_NODE}function Cr(Te){return Te&&Te.nodeType===Ie.ELEMENT_NODE}function br(Te){return Te&&Te.nodeType===Ie.TEXT_NODE}function nr(Te,qe){var ht=Te.childNodes||[];if(t(ht,Cr)||ur(qe))return!1;var kt=t(ht,ur);return!(qe&&kt&&ht.indexOf(kt)>ht.indexOf(qe))}function lr(Te,qe){var ht=Te.childNodes||[];function kt(Ur){return Cr(Ur)&&Ur!==qe}if(t(ht,kt))return!1;var gr=t(ht,ur);return!(qe&&gr&&ht.indexOf(gr)>ht.indexOf(qe))}function Pr(Te,qe,ht){if(!dr(Te))throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+Te.nodeType);if(ht&&ht.parentNode!==Te)throw new v(v.NOT_FOUND_ERR,"child not in parent");if(!hr(qe)||ur(qe)&&Te.nodeType!==Ie.DOCUMENT_NODE)throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected node type "+qe.nodeType+" for parent node type "+Te.nodeType)}function ar(Te,qe,ht){var kt=Te.childNodes||[],gr=qe.childNodes||[];if(qe.nodeType===Ie.DOCUMENT_FRAGMENT_NODE){var Ur=gr.filter(Cr);if(Ur.length>1||t(gr,br))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Ur.length===1&&!nr(Te,ht))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Cr(qe)&&!nr(Te,ht))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ur(qe)){if(t(kt,ur))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Er=t(kt,Cr);if(ht&&kt.indexOf(Er)<kt.indexOf(ht))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!ht&&Er)throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function kr(Te,qe,ht){var kt=Te.childNodes||[],gr=qe.childNodes||[];if(qe.nodeType===Ie.DOCUMENT_FRAGMENT_NODE){var Ur=gr.filter(Cr);if(Ur.length>1||t(gr,br))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Ur.length===1&&!lr(Te,ht))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Cr(qe)&&!lr(Te,ht))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ur(qe)){if(t(kt,function(Hn){return ur(Hn)&&Hn!==ht}))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Er=t(kt,Cr);if(ht&&kt.indexOf(Er)<kt.indexOf(ht))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function Qt(Te,qe,ht,kt){Pr(Te,qe,ht),Te.nodeType===Ie.DOCUMENT_NODE&&(kt||ar)(Te,qe,ht);var gr=qe.parentNode;if(gr&&gr.removeChild(qe),qe.nodeType===Se){var Ur=qe.firstChild;if(Ur==null)return qe;var Er=qe.lastChild}else Ur=Er=qe;var si=ht?ht.previousSibling:Te.lastChild;Ur.previousSibling=si,Er.nextSibling=ht,si?si.nextSibling=Ur:Te.firstChild=Ur,ht==null?Te.lastChild=Er:ht.previousSibling=Er;do Ur.parentNode=Te;while(Ur!==Er&&(Ur=Ur.nextSibling));return Gt(Te.ownerDocument||Te,Te,qe),qe.nodeType==Se&&(qe.firstChild=qe.lastChild=null),qe}$e.prototype={implementation:null,nodeName:"#document",nodeType:ke,doctype:null,documentElement:null,_inc:1,insertBefore:function(Te,qe){if(Te.nodeType===Se){for(var ht=Te.firstChild;ht;){var kt=ht.nextSibling;this.insertBefore(ht,qe),ht=kt}return Te}return Qt(this,Te,qe),Te.ownerDocument=this,this.documentElement===null&&Te.nodeType===X&&(this.documentElement=Te),Te},removeChild:function(Te){var qe=at(this,Te);return qe===this.documentElement&&(this.documentElement=null),qe},replaceChild:function(Te,qe){Qt(this,Te,qe,kr),Te.ownerDocument=this,qe&&this.removeChild(qe),Cr(Te)&&(this.documentElement=Te)},importNode:function(Te,qe){return Vr(this,Te,qe)},getElementById:function(Te){var qe=null;return ot(this.documentElement,function(ht){if(ht.nodeType==X&&ht.getAttribute("id")==Te)return qe=ht,!0}),qe},createElement:function(Te){var qe=new Ht(h);qe.ownerDocument=this,this.type==="html"&&(Te=Te.toLowerCase()),r(this.contentType)&&(qe.namespaceURI=c.HTML),qe.nodeName=Te,qe.tagName=Te,qe.localName=Te,qe.childNodes=new be;var ht=qe.attributes=new Ue;return ht._ownerElement=qe,qe},createDocumentFragment:function(){var Te=new Yt(h);return Te.ownerDocument=this,Te.childNodes=new be,Te},createTextNode:function(Te){var qe=new Be(h);return qe.ownerDocument=this,qe.childNodes=new be,qe.appendData(Te),qe},createComment:function(Te){var qe=new De(h);return qe.ownerDocument=this,qe.childNodes=new be,qe.appendData(Te),qe},createCDATASection:function(Te){var qe=new rt(h);return qe.ownerDocument=this,qe.childNodes=new be,qe.appendData(Te),qe},createProcessingInstruction:function(Te,qe){var ht=new Bt(h);return ht.ownerDocument=this,ht.childNodes=new be,ht.nodeName=ht.target=Te,ht.nodeValue=ht.data=qe,ht},createAttribute:function(Te){if(!b.QName_exact.test(Te))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in name "'+Te+'"');return this.type==="html"&&(Te=Te.toLowerCase()),this._createAttribute(Te)},_createAttribute:function(Te){var qe=new Ct(h);return qe.ownerDocument=this,qe.childNodes=new be,qe.name=Te,qe.nodeName=Te,qe.localName=Te,qe.specified=!0,qe},createEntityReference:function(Te){if(!b.Name.test(Te))throw new v(v.INVALID_CHARACTER_ERR,'not a valid xml name "'+Te+'"');if(this.type==="html")throw new v("document is an html document",x.NotSupportedError);var qe=new Tt(h);return qe.ownerDocument=this,qe.childNodes=new be,qe.nodeName=Te,qe},createElementNS:function(Te,qe){var ht=q(Te,qe),kt=new Ht(h),gr=kt.attributes=new Ue;return kt.childNodes=new be,kt.ownerDocument=this,kt.nodeName=qe,kt.tagName=qe,kt.namespaceURI=ht[0],kt.prefix=ht[1],kt.localName=ht[2],gr._ownerElement=kt,kt},createAttributeNS:function(Te,qe){var ht=q(Te,qe),kt=new Ct(h);return kt.ownerDocument=this,kt.childNodes=new be,kt.nodeName=qe,kt.name=qe,kt.specified=!0,kt.namespaceURI=ht[0],kt.prefix=ht[1],kt.localName=ht[2],kt}},U($e,Ie);function Ht(Te){S(Te),this._nsMap=Object.create(null)}Ht.prototype={nodeType:X,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===c.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(Te){return!!this.getAttributeNode(Te)},getAttribute:function(Te){var qe=this.getAttributeNode(Te);return qe?qe.value:null},getAttributeNode:function(Te){return this._isInHTMLDocumentAndNamespace()&&(Te=Te.toLowerCase()),this.attributes.getNamedItem(Te)},setAttribute:function(Te,qe){this._isInHTMLDocumentAndNamespace()&&(Te=Te.toLowerCase());var ht=this.getAttributeNode(Te);ht?ht.value=ht.nodeValue=""+qe:(ht=this.ownerDocument._createAttribute(Te),ht.value=ht.nodeValue=""+qe,this.setAttributeNode(ht))},removeAttribute:function(Te){var qe=this.getAttributeNode(Te);qe&&this.removeAttributeNode(qe)},setAttributeNode:function(Te){return this.attributes.setNamedItem(Te)},setAttributeNodeNS:function(Te){return this.attributes.setNamedItemNS(Te)},removeAttributeNode:function(Te){return this.attributes.removeNamedItem(Te.nodeName)},removeAttributeNS:function(Te,qe){var ht=this.getAttributeNodeNS(Te,qe);ht&&this.removeAttributeNode(ht)},hasAttributeNS:function(Te,qe){return this.getAttributeNodeNS(Te,qe)!=null},getAttributeNS:function(Te,qe){var ht=this.getAttributeNodeNS(Te,qe);return ht?ht.value:null},setAttributeNS:function(Te,qe,ht){var kt=q(Te,qe),gr=kt[2],Ur=this.getAttributeNodeNS(Te,gr);Ur?Ur.value=Ur.nodeValue=""+ht:(Ur=this.ownerDocument.createAttributeNS(Te,qe),Ur.value=Ur.nodeValue=""+ht,this.setAttributeNode(Ur))},getAttributeNodeNS:function(Te,qe){return this.attributes.getNamedItemNS(Te,qe)},getElementsByClassName:function(Te){var qe=O(Te);return new Me(this,function(ht){var kt=[];return qe.length>0&&ot(ht,function(gr){if(gr!==ht&&gr.nodeType===X){var Ur=gr.getAttribute("class");if(Ur){var Er=Te===Ur;if(!Er){var si=O(Ur);Er=qe.every(F(si))}Er&&kt.push(gr)}}}),kt})},getElementsByTagName:function(Te){var qe=(this.nodeType===ke?this:this.ownerDocument).type==="html",ht=Te.toLowerCase();return new Me(this,function(kt){var gr=[];return ot(kt,function(Ur){if(!(Ur===kt||Ur.nodeType!==X))if(Te==="*")gr.push(Ur);else{var Er=Ur.getQualifiedName(),si=qe&&Ur.namespaceURI===c.HTML?ht:Te;Er===si&&gr.push(Ur)}}),gr})},getElementsByTagNameNS:function(Te,qe){return new Me(this,function(ht){var kt=[];return ot(ht,function(gr){gr!==ht&&gr.nodeType===X&&(Te==="*"||gr.namespaceURI===Te)&&(qe==="*"||gr.localName==qe)&&kt.push(gr)}),kt})}},$e.prototype.getElementsByClassName=Ht.prototype.getElementsByClassName,$e.prototype.getElementsByTagName=Ht.prototype.getElementsByTagName,$e.prototype.getElementsByTagNameNS=Ht.prototype.getElementsByTagNameNS,U(Ht,Ie);function Ct(Te){S(Te),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}Ct.prototype.nodeType=ie,U(Ct,Ie);function Re(Te){S(Te)}Re.prototype={data:"",substringData:function(Te,qe){return this.data.substring(Te,Te+qe)},appendData:function(Te){Te=this.data+Te,this.nodeValue=this.data=Te,this.length=Te.length},insertData:function(Te,qe){this.replaceData(Te,0,qe)},deleteData:function(Te,qe){this.replaceData(Te,qe,"")},replaceData:function(Te,qe,ht){var kt=this.data.substring(0,Te),gr=this.data.substring(Te+qe);ht=kt+ht+gr,this.nodeValue=this.data=ht,this.length=ht.length}},U(Re,Ie);function Be(Te){S(Te)}Be.prototype={nodeName:"#text",nodeType:ee,splitText:function(Te){var qe=this.data,ht=qe.substring(Te);qe=qe.substring(0,Te),this.data=this.nodeValue=qe,this.length=qe.length;var kt=this.ownerDocument.createTextNode(ht);return this.parentNode&&this.parentNode.insertBefore(kt,this.nextSibling),kt}},U(Be,Re);function De(Te){S(Te)}De.prototype={nodeName:"#comment",nodeType:fe},U(De,Re);function rt(Te){S(Te)}rt.prototype={nodeName:"#cdata-section",nodeType:G},U(rt,Be);function mt(Te){S(Te)}mt.prototype.nodeType=me,U(mt,Ie);function At(Te){S(Te)}At.prototype.nodeType=we,U(At,Ie);function Ot(Te){S(Te)}Ot.prototype.nodeType=ae,U(Ot,Ie);function Tt(Te){S(Te)}Tt.prototype.nodeType=ne,U(Tt,Ie);function Yt(Te){S(Te)}Yt.prototype.nodeName="#document-fragment",Yt.prototype.nodeType=Se,U(Yt,Ie);function Bt(Te){S(Te)}Bt.prototype.nodeType=le,U(Bt,Re);function wt(){}wt.prototype.serializeToString=function(Te,qe){return Xt.call(Te,qe)},Ie.prototype.toString=Xt;function Xt(Te){var qe=[],ht=this.nodeType===ke&&this.documentElement||this,kt=ht.prefix,gr=ht.namespaceURI;if(gr&&kt==null){var kt=ht.lookupPrefix(gr);if(kt==null)var Ur=[{namespace:gr,prefix:null}]}return $t(this,qe,Te,Ur),qe.join("")}function Et(Te,qe,ht){var kt=Te.prefix||"",gr=Te.namespaceURI;if(!gr||kt==="xml"&&gr===c.XML||gr===c.XMLNS)return!1;for(var Ur=ht.length;Ur--;){var Er=ht[Ur];if(Er.prefix===kt)return Er.namespace!==gr}return!0}function Ir(Te,qe,ht){Te.push(" ",qe,'="',ht.replace(/[<>&"\t\n\r]/g,Mt),'"')}function $t(Te,qe,ht,kt){kt||(kt=[]);var gr=Te.nodeType===ke?Te:Te.ownerDocument,Ur=gr.type==="html";if(ht)if(Te=ht(Te),Te){if(typeof Te=="string"){qe.push(Te);return}}else return;switch(Te.nodeType){case X:var Er=Te.attributes,si=Er.length,oa=Te.firstChild,Hn=Te.tagName,di=Hn;if(!Ur&&!Te.prefix&&Te.namespaceURI){for(var Mi,qr=0;qr<Er.length;qr++)if(Er.item(qr).name==="xmlns"){Mi=Er.item(qr).value;break}if(!Mi)for(var cn=kt.length-1;cn>=0;cn--){var Pn=kt[cn];if(Pn.prefix===""&&Pn.namespace===Te.namespaceURI){Mi=Pn.namespace;break}}if(Mi!==Te.namespaceURI)for(var cn=kt.length-1;cn>=0;cn--){var Pn=kt[cn];if(Pn.namespace===Te.namespaceURI){Pn.prefix&&(di=Pn.prefix+":"+Hn);break}}}qe.push("<",di);for(var Gi=0;Gi<si;Gi++){var pa=Er.item(Gi);pa.prefix=="xmlns"?kt.push({prefix:pa.localName,namespace:pa.value}):pa.nodeName=="xmlns"&&kt.push({prefix:"",namespace:pa.value})}for(var Gi=0;Gi<si;Gi++){var pa=Er.item(Gi);if(Et(pa,Ur,kt)){var Ki=pa.prefix||"",wn=pa.namespaceURI;Ir(qe,Ki?"xmlns:"+Ki:"xmlns",wn),kt.push({prefix:Ki,namespace:wn})}$t(pa,qe,ht,kt)}if(Hn===di&&Et(Te,Ur,kt)){var Ki=Te.prefix||"",wn=Te.namespaceURI;Ir(qe,Ki?"xmlns:"+Ki:"xmlns",wn),kt.push({prefix:Ki,namespace:wn})}var Ua=!oa;if(Ua&&(Ur||Te.namespaceURI===c.HTML)&&(Ua=l(Hn)),Ua)qe.push("/>");else{if(qe.push(">"),Ur&&o(Hn))for(;oa;)oa.data?qe.push(oa.data):$t(oa,qe,ht,kt.slice()),oa=oa.nextSibling;else for(;oa;)$t(oa,qe,ht,kt.slice()),oa=oa.nextSibling;qe.push("</",di,">")}return;case ke:case Se:for(var oa=Te.firstChild;oa;)$t(oa,qe,ht,kt.slice()),oa=oa.nextSibling;return;case ie:return Ir(qe,Te.name,Te.value);case ee:return qe.push(Te.data.replace(/[<&>]/g,Mt));case G:return qe.push(b.CDATA_START,Te.data,b.CDATA_END);case fe:return qe.push(b.COMMENT_START,Te.data,b.COMMENT_END);case me:var Di=Te.publicId,Ra=Te.systemId;qe.push(b.DOCTYPE_DECL_START," ",Te.name),Di?(qe.push(" ",b.PUBLIC," ",Di),Ra&&Ra!=="."&&qe.push(" ",Ra)):Ra&&Ra!=="."&&qe.push(" ",b.SYSTEM," ",Ra),Te.internalSubset&&qe.push(" [",Te.internalSubset,"]"),qe.push(">");return;case le:return qe.push("<?",Te.target," ",Te.data,"?>");case ne:return qe.push("&",Te.nodeName,";");default:qe.push("??",Te.nodeName)}}function Vr(Te,qe,ht){var kt;switch(qe.nodeType){case X:kt=qe.cloneNode(!1),kt.ownerDocument=Te;case Se:break;case ie:ht=!0;break}if(kt||(kt=qe.cloneNode(!1)),kt.ownerDocument=Te,kt.parentNode=null,ht)for(var gr=qe.firstChild;gr;)kt.appendChild(Vr(Te,gr,ht)),gr=gr.nextSibling;return kt}function Rr(Te,qe,ht){var kt=new qe.constructor(h);for(var gr in qe)if(n(qe,gr)){var Ur=qe[gr];typeof Ur!="object"&&Ur!=kt[gr]&&(kt[gr]=Ur)}switch(qe.childNodes&&(kt.childNodes=new be),kt.ownerDocument=Te,kt.nodeType){case X:var Er=qe.attributes,si=kt.attributes=new Ue,Hn=Er.length;si._ownerElement=kt;for(var di=0;di<Hn;di++)kt.setAttributeNode(Rr(Te,Er.item(di),!0));break;case ie:ht=!0}if(ht)for(var Mi=qe.firstChild;Mi;)kt.appendChild(Rr(Te,Mi,ht)),Mi=Mi.nextSibling;return kt}function un(Te,qe,ht){Te[qe]=ht}try{if(Object.defineProperty){let Te=function(qe){switch(qe.nodeType){case X:case Se:var ht=[];for(qe=qe.firstChild;qe;)qe.nodeType!==7&&qe.nodeType!==8&&ht.push(Te(qe)),qe=qe.nextSibling;return ht.join("");default:return qe.nodeValue}};Object.defineProperty(Me.prototype,"length",{get:function(){return Le(this),this.$$length}}),Object.defineProperty(Ie.prototype,"textContent",{get:function(){return Te(this)},set:function(qe){switch(this.nodeType){case X:case Se:for(;this.firstChild;)this.removeChild(this.firstChild);(qe||String(qe))&&this.appendChild(this.ownerDocument.createTextNode(qe));break;default:this.data=qe,this.value=qe,this.nodeValue=qe}}}),un=function(qe,ht,kt){qe["$$"+ht]=kt}}}catch{}return us._updateLiveList=Le,us.Attr=Ct,us.CDATASection=rt,us.CharacterData=Re,us.Comment=De,us.Document=$e,us.DocumentFragment=Yt,us.DocumentType=mt,us.DOMImplementation=Qe,us.Element=Ht,us.Entity=Ot,us.EntityReference=Tt,us.LiveNodeList=Me,us.NamedNodeMap=Ue,us.Node=Ie,us.NodeList=be,us.Notation=At,us.Text=Be,us.ProcessingInstruction=Bt,us.XMLSerializer=wt,us}var mp={},b4={},zB;function c2e(){return zB||(zB=1,(function(e){var t=Ry().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(b4)),b4}var yv={},jB;function d2e(){if(jB)return yv;jB=1;var e=Ry(),t=dU(),r=aw(),n=e.isHTMLEscapableRawTextElement,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,l=e.hasOwn,a=e.NAMESPACE,c=r.ParseError,h=r.DOMException,g=0,v=1,x=2,b=3,S=4,I=5,k=6,M=7;function O(){}O.prototype={parse:function(le,fe,ke){var me=this.domBuilder;me.startDocument(),X(fe,fe=Object.create(null)),D(le,fe,ke,me,this.errorHandler),me.endDocument()}};var F=/&#?\w+;?/g;function D(le,fe,ke,me,Se){var we=i(me.mimeType);le.indexOf(t.UNICODE_REPLACEMENT_CHARACTER)>=0&&Se.warning("Unicode replacement character detected, source encoding issues?");function Pe(Qt){if(Qt>65535){Qt-=65536;var Ht=55296+(Qt>>10),Ct=56320+(Qt&1023);return String.fromCharCode(Ht,Ct)}else return String.fromCharCode(Qt)}function ce(Qt){var Ht=Qt[Qt.length-1]===";"?Qt:Qt+";";if(!we&&Ht!==Qt)return Se.error("EntityRef: expecting ;"),Qt;var Ct=t.Reference.exec(Ht);if(!Ct||Ct[0].length!==Ht.length)return Se.error("entity not matching Reference production: "+Qt),Qt;var Re=Ht.slice(1,-1);return l(ke,Re)?ke[Re]:Re.charAt(0)==="#"?Pe(parseInt(Re.substring(1).replace("x","0x"))):(Se.error("entity not found:"+Qt),Qt)}function _e(Qt){if(Qt>Qe){var Ht=le.substring(Qe,Qt).replace(F,ce);Ue&&Oe(Qe),me.characters(Ht,0,Qt-Qe),Qe=Qt}}var be=0,Me=0,Le=/\r\n?|\n|$/g,Ue=me.locator;function Oe(Qt,Ht){for(;Qt>=Me&&(Ht=Le.exec(le));)be=Me,Me=Ht.index+Ht[0].length,Ue.lineNumber++;Ue.columnNumber=Qt-be+1}for(var tt=[{currentNSMap:fe}],Ze=[],Qe=0;;){try{var Ie=le.indexOf("<",Qe);if(Ie<0){if(!we&&Ze.length>0)return Se.fatalError("unclosed xml tag(s): "+Ze.join(", "));if(!le.substring(Qe).match(/^\s*$/)){var Mt=me.doc,ot=Mt.createTextNode(le.substring(Qe));if(Mt.documentElement)return Se.error("Extra content at the end of the document");Mt.appendChild(ot),me.currentElement=ot}return}if(Ie>Qe){var $e=le.substring(Qe,Ie);!we&&Ze.length===0&&($e=$e.replace(new RegExp(t.S_OPT.source,"g"),""),$e&&Se.error("Unexpected content outside root element: '"+$e+"'")),_e(Ie)}switch(le.charAt(Ie+1)){case"/":var nr=le.indexOf(">",Ie+2),tr=le.substring(Ie+2,nr>0?nr:void 0);if(!tr)return Se.fatalError("end tag name missing");var Wt=nr>0&&t.reg("^",t.QName_group,t.S_OPT,"$").exec(tr);if(!Wt)return Se.fatalError('end tag name contains invalid characters: "'+tr+'"');if(!me.currentElement&&!me.doc.documentElement)return;var Gt=Ze[Ze.length-1]||me.currentElement.tagName||me.doc.documentElement.tagName||"";if(Gt!==Wt[1]){var at=Wt[1].toLowerCase();if(!we||Gt.toLowerCase()!==at)return Se.fatalError('Opening and ending tag mismatch: "'+Gt+'" != "'+tr+'"')}var dr=tt.pop();Ze.pop();var hr=dr.localNSMap;if(me.endElement(dr.uri,dr.localName,Gt),hr)for(var ur in hr)l(hr,ur)&&me.endPrefixMapping(ur);nr++;break;case"?":Ue&&Oe(Ie),nr=ne(le,Ie,me,Se);break;case"!":Ue&&Oe(Ie),nr=G(le,Ie,me,Se,we);break;default:Ue&&Oe(Ie);var Cr=new ae,br=tt[tt.length-1].currentNSMap,nr=z(le,Ie,Cr,br,ce,Se,we),lr=Cr.length;if(Cr.closed||(we&&e.isHTMLVoidElement(Cr.tagName)?Cr.closed=!0:Ze.push(Cr.tagName)),Ue&&lr){for(var Pr=q(Ue,{}),ar=0;ar<lr;ar++){var kr=Cr[ar];Oe(kr.offset),kr.locator=q(Ue,{})}me.locator=Pr,U(Cr,me,br)&&tt.push(Cr),me.locator=Ue}else U(Cr,me,br)&&tt.push(Cr);we&&!Cr.closed?nr=H(le,nr,Cr.tagName,ce,me):nr++}}catch(Qt){if(Qt instanceof c)throw Qt;if(Qt instanceof h)throw new c(Qt.name+": "+Qt.message,me.locator,Qt);Se.error("element parse error: "+Qt),nr=-1}nr>Qe?Qe=nr:_e(Math.max(Ie,Qe)+1)}}function q(le,fe){return fe.lineNumber=le.lineNumber,fe.columnNumber=le.columnNumber,fe}function z(le,fe,ke,me,Se,we,Pe){function ce(Oe,tt,Ze){if(l(ke.attributeNames,Oe))return we.fatalError("Attribute "+Oe+" redefined");if(!Pe&&tt.indexOf("<")>=0)return we.fatalError("Unescaped '<' not allowed in attributes values");ke.addValue(Oe,tt.replace(/[\t\n\r]/g," ").replace(F,Se),Ze)}for(var _e,be,Me=++fe,Le=g;;){var Ue=le.charAt(Me);switch(Ue){case"=":if(Le===v)_e=le.slice(fe,Me),Le=b;else if(Le===x)Le=b;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Le===b||Le===v)if(Le===v&&(we.warning('attribute value must after "="'),_e=le.slice(fe,Me)),fe=Me+1,Me=le.indexOf(Ue,fe),Me>0)be=le.slice(fe,Me),ce(_e,be,fe-1),Le=I;else throw new Error("attribute value no end '"+Ue+"' match");else if(Le==S)be=le.slice(fe,Me),ce(_e,be,fe),we.warning('attribute "'+_e+'" missed start quot('+Ue+")!!"),fe=Me+1,Le=I;else throw new Error('attribute value must after "="');break;case"/":switch(Le){case g:ke.setTagName(le.slice(fe,Me));case I:case k:case M:Le=M,ke.closed=!0;case S:case v:break;case x:ke.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return we.error("unexpected end of input"),Le==g&&ke.setTagName(le.slice(fe,Me)),Me;case">":switch(Le){case g:ke.setTagName(le.slice(fe,Me));case I:case k:case M:break;case S:case v:be=le.slice(fe,Me),be.slice(-1)==="/"&&(ke.closed=!0,be=be.slice(0,-1));case x:Le===x&&(be=_e),Le==S?(we.warning('attribute "'+be+'" missed quot(")!'),ce(_e,be,fe)):(Pe||we.warning('attribute "'+be+'" missed value!! "'+be+'" instead!!'),ce(be,be,fe));break;case b:if(!Pe)return we.fatalError(`AttValue: ' or " expected`)}return Me;case"":Ue=" ";default:if(Ue<=" ")switch(Le){case g:ke.setTagName(le.slice(fe,Me)),Le=k;break;case v:_e=le.slice(fe,Me),Le=x;break;case S:var be=le.slice(fe,Me);we.warning('attribute "'+be+'" missed quot(")!!'),ce(_e,be,fe);case I:Le=k;break}else switch(Le){case x:Pe||we.warning('attribute "'+_e+'" missed value!! "'+_e+'" instead2!!'),ce(_e,_e,fe),fe=Me,Le=v;break;case I:we.warning('attribute space is required"'+_e+'"!!');case k:Le=v,fe=Me;break;case b:Le=S,fe=Me;break;case M:throw new Error("elements closed character '/' and '>' must be connected to")}}Me++}}function U(le,fe,ke){for(var me=le.tagName,Se=null,Le=le.length;Le--;){var we=le[Le],Pe=we.qName,ce=we.value,Ue=Pe.indexOf(":");if(Ue>0)var _e=we.prefix=Pe.slice(0,Ue),be=Pe.slice(Ue+1),Me=_e==="xmlns"&&be;else be=Pe,_e=null,Me=Pe==="xmlns"&&"";we.localName=be,Me!==!1&&(Se==null&&(Se=Object.create(null),X(ke,ke=Object.create(null))),ke[Me]=Se[Me]=ce,we.uri=a.XMLNS,fe.startPrefixMapping(Me,ce))}for(var Le=le.length;Le--;)we=le[Le],we.prefix&&(we.prefix==="xml"&&(we.uri=a.XML),we.prefix!=="xmlns"&&(we.uri=ke[we.prefix]));var Ue=me.indexOf(":");Ue>0?(_e=le.prefix=me.slice(0,Ue),be=le.localName=me.slice(Ue+1)):(_e=null,be=le.localName=me);var Oe=le.uri=ke[_e||""];if(fe.startElement(Oe,be,me,le),le.closed){if(fe.endElement(Oe,be,me),Se)for(_e in Se)l(Se,_e)&&fe.endPrefixMapping(_e)}else return le.currentNSMap=ke,le.localNSMap=Se,!0}function H(le,fe,ke,me,Se){var we=n(ke);if(we||o(ke)){var Pe=le.indexOf("</"+ke+">",fe),ce=le.substring(fe+1,Pe);return we&&(ce=ce.replace(F,me)),Se.characters(ce,0,ce.length),Pe}return fe+1}function X(le,fe){for(var ke in le)l(le,ke)&&(fe[ke]=le[ke])}function ie(le,fe){var ke=fe;function me(Me){return Me=Me||0,le.charAt(ke+Me)}function Se(Me){Me=Me||1,ke+=Me}function we(){for(var Me=0;ke<le.length;){var Le=me();if(Le!==" "&&Le!==`
`&&Le!=="	"&&Le!=="\r")return Me;Me++,Se()}return-1}function Pe(){return le.substring(ke)}function ce(Me){return le.substring(ke,ke+Me.length)===Me}function _e(Me){return le.substring(ke,ke+Me.length).toUpperCase()===Me.toUpperCase()}function be(Me){var Le=t.reg("^",Me),Ue=Le.exec(Pe());return Ue?(Se(Ue[0].length),Ue[0]):null}return{char:me,getIndex:function(){return ke},getMatch:be,getSource:function(){return le},skip:Se,skipBlanks:we,substringFromIndex:Pe,substringStartsWith:ce,substringStartsWithCaseInsensitive:_e}}function ee(le,fe){function ke(ce,_e){var be=t.PI.exec(ce.substringFromIndex());return be?be[1].toLowerCase()==="xml"?_e.fatalError("xml declaration is only allowed at the start of the document, but found at position "+ce.getIndex()):(ce.skip(be[0].length),be[0]):_e.fatalError("processing instruction is not well-formed at position "+ce.getIndex())}var me=le.getSource();if(le.char()==="["){le.skip(1);for(var Se=le.getIndex();le.getIndex()<me.length;){if(le.skipBlanks(),le.char()==="]"){var we=me.substring(Se,le.getIndex());return le.skip(1),we}var Pe=null;if(le.char()==="<"&&le.char(1)==="!")switch(le.char(2)){case"E":le.char(3)==="L"?Pe=le.getMatch(t.elementdecl):le.char(3)==="N"&&(Pe=le.getMatch(t.EntityDecl));break;case"A":Pe=le.getMatch(t.AttlistDecl);break;case"N":Pe=le.getMatch(t.NotationDecl);break;case"-":Pe=le.getMatch(t.Comment);break}else if(le.char()==="<"&&le.char(1)==="?")Pe=ke(le,fe);else if(le.char()==="%")Pe=le.getMatch(t.PEReference);else return fe.fatalError("Error detected in Markup declaration");if(!Pe)return fe.fatalError("Error in internal subset at position "+le.getIndex())}return fe.fatalError("doctype internal subset is not well-formed, missing ]")}}function G(le,fe,ke,me,Se){var we=ie(le,fe);switch(Se?we.char(2).toUpperCase():we.char(2)){case"-":var Pe=we.getMatch(t.Comment);return Pe?(ke.comment(Pe,t.COMMENT_START.length,Pe.length-t.COMMENT_START.length-t.COMMENT_END.length),we.getIndex()):me.fatalError("comment is not well-formed at position "+we.getIndex());case"[":var ce=we.getMatch(t.CDSect);return ce?!Se&&!ke.currentElement?me.fatalError("CDATA outside of element"):(ke.startCDATA(),ke.characters(ce,t.CDATA_START.length,ce.length-t.CDATA_START.length-t.CDATA_END.length),ke.endCDATA(),we.getIndex()):me.fatalError("Invalid CDATA starting at position "+fe);case"D":{if(ke.doc&&ke.doc.documentElement)return me.fatalError("Doctype not allowed inside or after documentElement at position "+we.getIndex());if(Se?!we.substringStartsWithCaseInsensitive(t.DOCTYPE_DECL_START):!we.substringStartsWith(t.DOCTYPE_DECL_START))return me.fatalError("Expected "+t.DOCTYPE_DECL_START+" at position "+we.getIndex());if(we.skip(t.DOCTYPE_DECL_START.length),we.skipBlanks()<1)return me.fatalError("Expected whitespace after "+t.DOCTYPE_DECL_START+" at position "+we.getIndex());var _e={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(_e.name=we.getMatch(t.Name),!_e.name)return me.fatalError("doctype name missing or contains unexpected characters at position "+we.getIndex());if(Se&&_e.name.toLowerCase()!=="html"&&me.warning("Unexpected DOCTYPE in HTML document at position "+we.getIndex()),we.skipBlanks(),we.substringStartsWith(t.PUBLIC)||we.substringStartsWith(t.SYSTEM)){var be=t.ExternalID_match.exec(we.substringFromIndex());if(!be)return me.fatalError("doctype external id is not well-formed at position "+we.getIndex());be.groups.SystemLiteralOnly!==void 0?_e.systemId=be.groups.SystemLiteralOnly:(_e.systemId=be.groups.SystemLiteral,_e.publicId=be.groups.PubidLiteral),we.skip(be[0].length)}else if(Se&&we.substringStartsWithCaseInsensitive(t.SYSTEM)){if(we.skip(t.SYSTEM.length),we.skipBlanks()<1)return me.fatalError("Expected whitespace after "+t.SYSTEM+" at position "+we.getIndex());if(_e.systemId=we.getMatch(t.ABOUT_LEGACY_COMPAT_SystemLiteral),!_e.systemId)return me.fatalError("Expected "+t.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+t.SYSTEM+" at position "+we.getIndex())}return Se&&_e.systemId&&!t.ABOUT_LEGACY_COMPAT_SystemLiteral.test(_e.systemId)&&me.warning("Unexpected doctype.systemId in HTML document at position "+we.getIndex()),Se||(we.skipBlanks(),_e.internalSubset=ee(we,me)),we.skipBlanks(),we.char()!==">"?me.fatalError("doctype not terminated with > at position "+we.getIndex()):(we.skip(1),ke.startDTD(_e.name,_e.publicId,_e.systemId,_e.internalSubset),ke.endDTD(),we.getIndex())}default:return me.fatalError('Not well-formed XML starting with "<!" at position '+fe)}}function ne(le,fe,ke,me){var Se=le.substring(fe).match(t.PI);if(!Se)return me.fatalError("Invalid processing instruction starting at position "+fe);if(Se[1].toLowerCase()==="xml"){if(fe>0)return me.fatalError("processing instruction at position "+fe+" is an xml declaration which is only at the start of the document");if(!t.XMLDecl.test(le.substring(fe)))return me.fatalError("xml declaration is not well-formed")}return ke.processingInstruction(Se[1],Se[2]),fe+Se[0].length}function ae(){this.attributeNames=Object.create(null)}return ae.prototype={setTagName:function(le){if(!t.QName_exact.test(le))throw new Error("invalid tagName:"+le);this.tagName=le},addValue:function(le,fe,ke){if(!t.QName_exact.test(le))throw new Error("invalid attribute:"+le);this.attributeNames[le]=this.length,this[this.length++]={qName:le,value:fe,offset:ke}},length:0,getLocalName:function(le){return this[le].localName},getLocator:function(le){return this[le].locator},getQName:function(le){return this[le].qName},getURI:function(le){return this[le].uri},getValue:function(le){return this[le].value}},yv.XMLReader=O,yv.parseUtils=ie,yv.parseDoctypeCommentOrCData=G,yv}var qB;function f2e(){if(qB)return mp;qB=1;var e=Ry(),t=fU(),r=aw(),n=c2e(),i=d2e(),o=t.DOMImplementation,l=e.hasDefaultHTMLNamespace,a=e.isHTMLMimeType,c=e.isValidMimeType,h=e.MIME_TYPE,g=e.NAMESPACE,v=r.ParseError,x=i.XMLReader;function b(z){return z.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function S(z){if(z=z||{},z.locator===void 0&&(z.locator=!0),this.assign=z.assign||e.assign,this.domHandler=z.domHandler||I,this.onError=z.onError||z.errorHandler,z.errorHandler&&typeof z.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");z.errorHandler&&z.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=z.normalizeLineEndings||b,this.locator=!!z.locator,this.xmlns=this.assign(Object.create(null),z.xmlns)}S.prototype.parseFromString=function(z,U){if(!c(U))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+U+'" is not valid.');var H=this.assign(Object.create(null),this.xmlns),X=n.XML_ENTITIES,ie=H[""]||null;l(U)?(X=n.HTML_ENTITIES,ie=g.HTML):U===h.XML_SVG_IMAGE&&(ie=g.SVG),H[""]=ie,H.xml=H.xml||g.XML;var ee=new this.domHandler({mimeType:U,defaultNamespace:ie,onError:this.onError}),G=this.locator?{}:void 0;this.locator&&ee.setDocumentLocator(G);var ne=new x;ne.errorHandler=ee,ne.domBuilder=ee;var ae=!e.isHTMLMimeType(U);return ae&&typeof z!="string"&&ne.errorHandler.fatalError("source is not a string"),ne.parse(this.normalizeLineEndings(String(z)),H,X),ee.doc.documentElement||ne.errorHandler.fatalError("missing root element"),ee.doc};function I(z){var U=z||{};this.mimeType=U.mimeType||h.XML_APPLICATION,this.defaultNamespace=U.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=U.onError}function k(z,U){U.lineNumber=z.lineNumber,U.columnNumber=z.columnNumber}I.prototype={startDocument:function(){var z=new o;this.doc=a(this.mimeType)?z.createHTMLDocument(!1):z.createDocument(this.defaultNamespace,"")},startElement:function(z,U,H,X){var ie=this.doc,ee=ie.createElementNS(z,H||U),G=X.length;F(this,ee),this.currentElement=ee,this.locator&&k(this.locator,ee);for(var ne=0;ne<G;ne++){var z=X.getURI(ne),ae=X.getValue(ne),H=X.getQName(ne),le=ie.createAttributeNS(z,H);this.locator&&k(X.getLocator(ne),le),le.value=le.nodeValue=ae,ee.setAttributeNode(le)}},endElement:function(z,U,H){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(z,U){},endPrefixMapping:function(z){},processingInstruction:function(z,U){var H=this.doc.createProcessingInstruction(z,U);this.locator&&k(this.locator,H),F(this,H)},ignorableWhitespace:function(z,U,H){},characters:function(z,U,H){if(z=O.apply(this,arguments),z){if(this.cdata)var X=this.doc.createCDATASection(z);else var X=this.doc.createTextNode(z);this.currentElement?this.currentElement.appendChild(X):/^\s*$/.test(z)&&this.doc.appendChild(X),this.locator&&k(this.locator,X)}},skippedEntity:function(z){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(z){z&&(z.lineNumber=0),this.locator=z},comment:function(z,U,H){z=O.apply(this,arguments);var X=this.doc.createComment(z);this.locator&&k(this.locator,X),F(this,X)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(z,U,H,X){var ie=this.doc.implementation;if(ie&&ie.createDocumentType){var ee=ie.createDocumentType(z,U,H,X);this.locator&&k(this.locator,ee),F(this,ee),this.doc.doctype=ee}},reportError:function(z,U){if(typeof this.onError=="function")try{this.onError(z,U,this)}catch(H){throw new v("Reporting "+z+' "'+U+'" caused '+H,this.locator)}else console.error("[xmldom "+z+"]	"+U,M(this.locator))},warning:function(z){this.reportError("warning",z)},error:function(z){this.reportError("error",z)},fatalError:function(z){throw this.reportError("fatalError",z),new v(z,this.locator)}};function M(z){if(z)return`
@#[line:`+z.lineNumber+",col:"+z.columnNumber+"]"}function O(z,U,H){return typeof z=="string"?z.substr(U,H):z.length>=U+H||U?new java.lang.String(z,U,H)+"":z}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(z){I.prototype[z]=function(){return null}});function F(z,U){z.currentElement?z.currentElement.appendChild(U):z.doc.appendChild(U)}function D(z){if(z==="error")throw"onErrorStopParsing"}function q(){throw"onWarningStopParsing"}return mp.__DOMHandler=I,mp.DOMParser=S,mp.normalizeLineEndings=b,mp.onErrorStopParsing=D,mp.onWarningStopParsing=q,mp}var $B;function h2e(){if($B)return ia;$B=1;var e=Ry();ia.assign=e.assign,ia.hasDefaultHTMLNamespace=e.hasDefaultHTMLNamespace,ia.isHTMLMimeType=e.isHTMLMimeType,ia.isValidMimeType=e.isValidMimeType,ia.MIME_TYPE=e.MIME_TYPE,ia.NAMESPACE=e.NAMESPACE;var t=aw();ia.DOMException=t.DOMException,ia.DOMExceptionName=t.DOMExceptionName,ia.ExceptionCode=t.ExceptionCode,ia.ParseError=t.ParseError;var r=fU();ia.Attr=r.Attr,ia.CDATASection=r.CDATASection,ia.CharacterData=r.CharacterData,ia.Comment=r.Comment,ia.Document=r.Document,ia.DocumentFragment=r.DocumentFragment,ia.DocumentType=r.DocumentType,ia.DOMImplementation=r.DOMImplementation,ia.Element=r.Element,ia.Entity=r.Entity,ia.EntityReference=r.EntityReference,ia.LiveNodeList=r.LiveNodeList,ia.NamedNodeMap=r.NamedNodeMap,ia.Node=r.Node,ia.NodeList=r.NodeList,ia.Notation=r.Notation,ia.ProcessingInstruction=r.ProcessingInstruction,ia.Text=r.Text,ia.XMLSerializer=r.XMLSerializer;var n=f2e();return ia.DOMParser=n.DOMParser,ia.normalizeLineEndings=n.normalizeLineEndings,ia.onErrorStopParsing=n.onErrorStopParsing,ia.onWarningStopParsing=n.onWarningStopParsing,ia}var p2e=h2e();const hU=(function(){const e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(D){if(!D||!D.length)return 0;for(var q=0,z=0;q<D.length;q++)z=(z<<5)-z+D.charCodeAt(q)|0;return z}function i(D,q){return D.getElementsByTagName(q)}function o(D,q){return D.getAttribute(q)}function l(D,q){return parseFloat(o(D,q))}function a(D,q){const z=i(D,q);return z.length?z[0]:null}function c(D){return D.normalize&&D.normalize(),D}function h(D){for(var q=0,z=[];q<D.length;q++)z[q]=parseFloat(D[q]);return z}function g(D){return D&&c(D),D&&D.textContent||""}function v(D,q){let z={},U,H;for(H=0;H<q.length;H++)U=a(D,q[H]),U&&(z[q[H]]=g(U));return z}function x(D,q){for(const z in q)D[z]=q[z]}function b(D){return h(D.replace(e,"").split(","))}function S(D){const q=D.replace(t,"").split(r),z=[];for(let U=0;U<q.length;U++)z.push(b(q[U]));return z}function I(D){let q=[l(D,"lon"),l(D,"lat")],z=a(D,"ele"),U=a(D,"gpxtpx:hr")||a(D,"hr"),H=a(D,"time"),X;return z&&(X=parseFloat(g(z)),isNaN(X)||q.push(X)),{coordinates:q,time:H?g(H):null,heartRate:U?parseFloat(g(U)):null}}function k(){return{type:"FeatureCollection",features:[]}}let M;if(typeof XMLSerializer<"u")M=new XMLSerializer;else{const D=typeof process=="object"&&!process.browser,q=typeof Titanium=="object";if(typeof exports=="object"&&(D||q))M=p2e.XMLSerializer;else throw new Error("Unable to initialize serializer")}function O(D){return D.xml!==void 0?D.xml:M.serializeToString(D)}return{kml:function(D){const q=k(),z={},U={},H={},X=["Polygon","LineString","Point","Track","gx:Track"],ie=i(D,"Placemark"),ee=i(D,"Style"),G=i(D,"StyleMap");for(let me=0;me<ee.length;me++){const Se=n(O(ee[me])).toString(16);z["#"+o(ee[me],"id")]=Se,U[Se]=ee[me]}for(let me=0;me<G.length;me++){z["#"+o(G[me],"id")]=n(O(G[me])).toString(16);const Se=i(G[me],"Pair"),we={};for(let Pe=0;Pe<Se.length;Pe++)we[g(a(Se[Pe],"key"))]=g(a(Se[Pe],"styleUrl"));H["#"+o(G[me],"id")]=we}for(let me=0;me<ie.length;me++)q.features=q.features.concat(ke(ie[me]));function ne(me){let Se,we;return me=me||"",me.substr(0,1)==="#"&&(me=me.substr(1)),(me.length===6||me.length===3)&&(Se=me),me.length===8&&(we=parseInt(me.substr(0,2),16)/255,Se="#"+me.substr(6,2)+me.substr(4,2)+me.substr(2,2)),[Se,isNaN(we)?void 0:we]}function ae(me){return h(me.split(" "))}function le(me){let Se=i(me,"coord"),we=[],Pe=[];Se.length===0&&(Se=i(me,"gx:coord"));for(let _e=0;_e<Se.length;_e++)we.push(ae(g(Se[_e])));const ce=i(me,"when");for(let _e=0;_e<ce.length;_e++)Pe.push(g(ce[_e]));return{coords:we,times:Pe}}function fe(me){let Se,we,Pe,ce,_e,be=[],Me=[];if(a(me,"MultiGeometry"))return fe(a(me,"MultiGeometry"));if(a(me,"MultiTrack"))return fe(a(me,"MultiTrack"));if(a(me,"gx:MultiTrack"))return fe(a(me,"gx:MultiTrack"));for(Pe=0;Pe<X.length;Pe++)if(we=i(me,X[Pe]),we){for(ce=0;ce<we.length;ce++)if(Se=we[ce],X[Pe]==="Point")be.push({type:"Point",coordinates:b(g(a(Se,"coordinates")))});else if(X[Pe]==="LineString")be.push({type:"LineString",coordinates:S(g(a(Se,"coordinates")))});else if(X[Pe]==="Polygon"){const Le=i(Se,"LinearRing"),Ue=[];for(_e=0;_e<Le.length;_e++)Ue.push(S(g(a(Le[_e],"coordinates"))));be.push({type:"Polygon",coordinates:Ue})}else if(X[Pe]==="Track"||X[Pe]==="gx:Track"){const Le=le(Se);be.push({type:"LineString",coordinates:Le.coords}),Le.times.length&&Me.push(Le.times)}}return{geoms:be,coordTimes:Me}}function ke(me){let Se=fe(me),we,Pe={},ce=g(a(me,"name")),_e=g(a(me,"address")),be=g(a(me,"styleUrl")),Me=g(a(me,"description")),Le=a(me,"TimeSpan"),Ue=a(me,"TimeStamp"),Oe=a(me,"ExtendedData"),tt=a(me,"LineStyle"),Ze=a(me,"PolyStyle"),Qe=a(me,"visibility");if(!Se.geoms.length)return[];if(ce&&(Pe.name=ce),_e&&(Pe.address=_e),be){be[0]!=="#"&&(be="#"+be),Pe.styleUrl=be,z[be]&&(Pe.styleHash=z[be]),H[be]&&(Pe.styleMapHash=H[be],Pe.styleHash=z[H[be].normal]);const Mt=U[Pe.styleHash];if(Mt){tt||(tt=a(Mt,"LineStyle")),Ze||(Ze=a(Mt,"PolyStyle"));const ot=a(Mt,"IconStyle");if(ot){const $e=a(ot,"Icon");if($e){const tr=g(a($e,"href"));tr&&(Pe.icon=tr)}}}}if(Me&&(Pe.description=Me),Le){const Mt=g(a(Le,"begin")),ot=g(a(Le,"end"));Pe.timespan={begin:Mt,end:ot}}if(Ue&&(Pe.timestamp=g(a(Ue,"when"))),tt){const Mt=ne(g(a(tt,"color"))),ot=Mt[0],$e=Mt[1],tr=parseFloat(g(a(tt,"width")));ot&&(Pe.stroke=ot),isNaN($e)||(Pe["stroke-opacity"]=$e),isNaN(tr)||(Pe["stroke-width"]=tr)}if(Ze){const Mt=ne(g(a(Ze,"color"))),ot=Mt[0],$e=Mt[1],tr=g(a(Ze,"fill")),Wt=g(a(Ze,"outline"));ot&&(Pe.fill=ot),isNaN($e)||(Pe["fill-opacity"]=$e),tr&&(Pe["fill-opacity"]=tr==="1"?Pe["fill-opacity"]||1:0),Wt&&(Pe["stroke-opacity"]=Wt==="1"?Pe["stroke-opacity"]||1:0)}if(Oe){const Mt=i(Oe,"Data"),ot=i(Oe,"SimpleData");for(we=0;we<Mt.length;we++)Pe[Mt[we].getAttribute("name")]=g(a(Mt[we],"value"));for(we=0;we<ot.length;we++)Pe[ot[we].getAttribute("name")]=g(ot[we])}Qe&&(Pe.visibility=g(Qe)),Se.coordTimes.length&&(Pe.coordTimes=Se.coordTimes.length===1?Se.coordTimes[0]:Se.coordTimes);const Ie={type:"Feature",geometry:Se.geoms.length===1?Se.geoms[0]:{type:"GeometryCollection",geometries:Se.geoms},properties:Pe};return o(me,"id")&&(Ie.id=o(me,"id")),[Ie]}return q},gpx:function(D){let q,z=i(D,"trk"),U=i(D,"rte"),H=i(D,"wpt"),X=k(),ie;for(q=0;q<z.length;q++)ie=ne(z[q]),ie&&X.features.push(ie);for(q=0;q<U.length;q++)ie=ae(U[q]),ie&&X.features.push(ie);for(q=0;q<H.length;q++)X.features.push(le(H[q]));function ee(me,Se){for(let we=0;we<Se;we++)me.push(null);return me}function G(me,Se){const we=i(me,Se),Pe=[],ce=[],_e=[],be=we.length;if(be<2)return{};for(let Me=0;Me<be;Me++){const Le=I(we[Me]);Pe.push(Le.coordinates),Le.time&&ce.push(Le.time),(Le.heartRate||_e.length)&&(_e.length||ee(_e,Me),_e.push(Le.heartRate||null))}return{line:Pe,times:ce,heartRates:_e}}function ne(me){let Se=i(me,"trkseg"),we=[],Pe=[],ce=[],_e;for(let Me=0;Me<Se.length;Me++)if(_e=G(Se[Me],"trkpt"),_e&&(_e.line&&we.push(_e.line),_e.times&&_e.times.length&&Pe.push(_e.times),ce.length||_e.heartRates&&_e.heartRates.length)){if(!ce.length)for(let Le=0;Le<Me;Le++)ce.push(ee([],we[Le].length));_e.heartRates&&_e.heartRates.length?ce.push(_e.heartRates):ce.push(ee([],_e.line.length||0))}if(we.length===0)return;const be=ke(me);return x(be,fe(a(me,"extensions"))),Pe.length&&(be.coordTimes=we.length===1?Pe[0]:Pe),ce.length&&(be.heartRates=we.length===1?ce[0]:ce),{type:"Feature",properties:be,geometry:{type:we.length===1?"LineString":"MultiLineString",coordinates:we.length===1?we[0]:we}}}function ae(me){const Se=G(me,"rtept");if(!Se.line)return;const we=ke(me);return x(we,fe(a(me,"extensions"))),{type:"Feature",properties:we,geometry:{type:"LineString",coordinates:Se.line}}}function le(me){const Se=ke(me);return x(Se,v(me,["sym"])),{type:"Feature",properties:Se,geometry:{type:"Point",coordinates:I(me).coordinates}}}function fe(me){const Se={};if(me){const we=a(me,"line");if(we){const Pe=g(a(we,"color")),ce=parseFloat(g(a(we,"opacity"))),_e=parseFloat(g(a(we,"width")));Pe&&(Se.stroke=Pe),isNaN(ce)||(Se["stroke-opacity"]=ce),isNaN(_e)||(Se["stroke-width"]=_e*96/25.4)}}return Se}function ke(me){const Se=v(me,["name","cmt","desc","type","time","keywords"]),we=i(me,"link");we.length&&(Se.links=[]);for(let Pe=0,ce;Pe<we.length;Pe++)ce={href:o(we[Pe],"href")},x(ce,v(we[Pe],["text","type"])),Se.links.push(ce);return Se}return X}}})(),Px=e=>{const[t,r]=J.useState(),[n,i]=J.useState([]),o=l=>{try{i([]);const c=new DOMParser().parseFromString(l,"application/xml");c.querySelector("metadata")?.childNodes.forEach(v=>{let x=v.textContent;const b=v.nodeName;if(v.nodeName==="link"&&(x=v.getAttribute("href")??""),x?.trim().length){const S={title:b,value:x,id:new Date().getTime()};i(I=>[...I,S])}});const g=hU.gpx(c);r(g)}catch(a){console.log(a)}};return J.useEffect(()=>{e.data&&o(e.data)},[e.data]),{geojson:t,metadata:n}};Px.defaultProps={data:void 0};try{Px.displayName="useGpx",Px.__docgenInfo={description:"useGpx hook converts GPX data to GeoJSON",displayName:"useGpx",props:{data:{defaultValue:{value:"undefined"},description:"a string containing GPX data that is supposed to be parsed and converted to GeoJSON by this hook",name:"data",required:!1,type:{name:"string | undefined"}}}}}catch{}const Ix=e=>{const t=da({mapId:e.mapId,waitForLayer:e.layerId}),r=J.useRef(new p2.Popup({closeButton:!1,closeOnClick:!0}));return J.useEffect(()=>{!t.map||!e.layerId||t.map.on("mouseenter",e.layerId,n=>{if(!t.map)return;const i=n?.features?.[0].geometry.coordinates.slice();let o="";if(n?.features?.[0]&&typeof e.getPopupContent=="function"&&(o=e.getPopupContent(n.features[0])),i?.[0]){for(;Math.abs(n.lngLat.lng-i[0])>180;)i[0]+=n.lngLat.lng>i[0]?360:-360;r.current.setLngLat(i).setHTML(o).addTo(t.map.map)}},t.componentId)},[t.map]),Z.jsx(Z.Fragment,{})};Ix.defaultProps={mapId:void 0};try{Ix.displayName="LayerHoverPopup",Ix.__docgenInfo={description:"useLayerHoverPopup hook registers a mouseenter event to display feature properties in a MapLibre popup if a feature on the configured layer is hovered",displayName:"LayerHoverPopup",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of an existing layer in the mapLibre instance this event will be registered to",name:"layerId",required:!1,type:{name:"string | undefined"}},getPopupContent:{defaultValue:null,description:"",name:"getPopupContent",required:!0,type:{name:"(feature: Feature<Geometry, GeoJsonProperties>) => string"}}}}}catch{}const VB=e=>{const t=Px({data:e.gpxData}),r=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=J.useRef("gpx-viewer-source-"+Vu()),i=J.useRef("importer-layer-lines-"+Vu()),o=J.useRef("importer-layer-points-"+Vu());return Ix({layerId:o.current,getPopupContent:l=>l?.properties?.name}),AP({mapId:e.mapId,sourceId:n.current,source:{type:"geojson",data:t.geojson||Hf([])}}),Vf({layerId:i.current,options:{type:"line",paint:{"line-width":4,"line-color":"rgba(212, 55, 23,0.5)"},source:n.current},insertBeforeLayer:e.insertBeforeLayer}),Vf({layerId:o.current,options:{type:"circle",paint:{"circle-color":"rgba(72, 77, 99,0.5)","circle-radius":7},filter:["==","$type","Point"],source:n.current},insertBeforeLayer:e.insertBeforeLayer}),J.useEffect(()=>{if(!r.map||!t.geojson)return;typeof e.onParseGpxData=="function"&&e.onParseGpxData(t);const l=vc(t.geojson);r.map.map.fitBounds(l)},[t]),Z.jsx(Z.Fragment,{})};try{VB.displayName="MlGpxViewer",VB.__docgenInfo={description:"MlGpxViewer visualizes a given GPX Track on the map",displayName:"MlGpxViewer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapHook",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance",name:"idPrefix",required:!1,type:{name:"string | undefined"}},gpxData:{defaultValue:null,description:"",name:"gpxData",required:!0,type:{name:"string | undefined"}},onParseGpxData:{defaultValue:null,description:"",name:"onParseGpxData",required:!0,type:{name:"(arg0: { geojson: FeatureCollection<Geometry, GeoJsonProperties> | undefined; metadata: MetadataType[]; }) => void"}}}}}catch{}const m2e=ft.createContext({}),g2e=m2e.Provider,UB=({children:e})=>{const[t,r]=J.useState({type:"FeatureCollection",features:[]}),i={data:t,setData:r,getEmptyFeatureCollection:()=>({type:"FeatureCollection",features:[]})};return Z.jsx(g2e,{value:i,children:e})};try{UB.displayName="GeoJsonProvider",UB.__docgenInfo={description:"",displayName:"GeoJsonProvider",props:{}}}catch{}const k3=()=>{const e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e?.layers?e.layers:"[]"),e},_4=k3(),GB=e=>{const t=J.useContext(Uh),r=J.useRef(!1),n=J.useRef(null),[i,o]=J.useState(void 0),l=J.useRef({}),a=J.useRef((e.idPrefix?e.idPrefix:"MlShareMapState-")+Vu()),c=m2({watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),h=J.useRef(!1),g=J.useRef(null),v=J.useRef({viewport:{center:!1,bearing:!1,pitch:!1,zoom:!1},layers:{...l}}),x=J.useRef({}),b=J.useCallback(()=>{if(!e.active)return;const k=[];for(const F in c.layers)k.push({id:c.layers[F]?.id,type:c.layers[F]?.type,visible:c.layers[F]?.visible});S();const M=new URLSearchParams({...k3(),...x.current,layers:JSON.stringify(k)});JSON.parse(Object.fromEntries(M).layers).forEach(F=>{l.current[F.id]=!1});const O=new URLSearchParams(window.location.search);M.toString()!==O.toString()&&window.history.pushState({...x.current},document.title,"?"+M.toString())},[c.layers,e.active]);J.useEffect(()=>{const k=a.current;return x.current=k3(),()=>{n.current&&(n.current.cleanup(k),n.current=null),r.current=!1}},[]),J.useEffect(()=>{n.current&&b()},[b]),J.useEffect(()=>{if(!n.current)return;const k=b;return n.current.on("moveend",k,a.current),()=>{n.current?.map.off("moveend",k)}},[b,i]),J.useEffect(()=>{!t?.mapExists?.(e.mapId)||r.current||(r.current=!0,n.current=t.getMap(e.mapId),o(n.current),x.current.lat&&x.current.lng&&I())},[t.mapIds,t,e.mapId,e.active]),J.useEffect(()=>{if(c?.layers?.length){typeof g.current>"u"&&(g.current=null,_4?.layers?.forEach(k=>{g.current?.[k.id]&&(g.current[k.id]=!1)}));for(const k in g.current){let M=!0;if(g.current[k]===!1&&(M=!1),M)return}_4.layers&&_4.layers.forEach(k=>{n.current?.map.getLayer(k.id)&&g.current?.[k.id]===!1&&(g.current[k.id]=!0,n.current.map?.getLayer(k.id)?.setLayoutProperty("visibility",k.visible?"visible":"none"))})}},[c.layers,e.mapId,e.active]),J.useEffect(()=>{i&&c.layers&&(e.active||i.cleanup(a.current))},[e.active,i,c.layers]);const S=()=>{x.current.lat=n.current?.map.getCenter().lat,x.current.lng=n.current?.map.getCenter().lng,x.current.zoom=n.current?.map.getZoom(),x.current.bearing=n.current?.map.getBearing(),x.current.pitch=n.current?.map.getPitch()},I=()=>{v.current.viewport.center||(v.current.viewport.center=!0,x.current.lng&&x.current.lat&&n.current?.map.setCenter([x.current.lng,x.current.lat]),x.current.zoom&&n.current?.map.setZoom(x.current.zoom),x.current.bearing&&n.current?.map.setBearing(x.current.bearing),x.current.pitch&&n.current?.map.setPitch(x.current.pitch)),h.current=!0};return window.onpopstate=k=>{k.state&&k.state.lng&&k.state.lat&&k.state.zoom&&n.current?.map.easeTo({zoom:k.state.zoom,center:[k.state.lng,k.state.lat]})},Z.jsx(Z.Fragment,{})};try{GB.displayName="MlShareMapState",GB.__docgenInfo={description:"",displayName:"MlShareMapState",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"",name:"idPrefix",required:!1,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function y2e(e,t){const r=(l,a,c,h,g)=>{const v=jl([[l,a],[h,g]]),x=Bhe(v,5,{units:"meters"}),b=x.geometry.coordinates[0][0],S=x.geometry.coordinates[0][1],I=x.geometry.coordinates[1][0],k=x.geometry.coordinates[1][1];return F2([[[l,a],[h,g],[I,k],[b,S],[l,a]]],{height:c*t})},n=(l,a,c)=>l*(1-c)+a*c,i=[];return e.line.geometry.coordinates.forEach((l,a)=>{if(e.line.geometry.coordinates[a+1]&&Array.isArray(l)){let h=~~(B2([l[0],l[1]],[e.line.geometry.coordinates[a+1][0],e.line.geometry.coordinates[a+1][1]],{units:"kilometers"})*1e3/10);h=h<1?1:h;for(let g=0;g<h;g++){const v=n(e.line.geometry.coordinates[a][0],e.line.geometry.coordinates[a+1][0],g/h),x=n(e.line.geometry.coordinates[a][1],e.line.geometry.coordinates[a+1][1],g/h),b=n(e.line.geometry.coordinates[a][2]-e.min,e.line.geometry.coordinates[a+1][2]-e.min,g/h),S=n(e.line.geometry.coordinates[a][0],e.line.geometry.coordinates[a+1][0],(g+1)/h),I=n(e.line.geometry.coordinates[a][1],e.line.geometry.coordinates[a+1][1],(g+1)/h),k=r(v,x,b,S,I);i.push(k)}}}),Hf(i)}const HB=["interpolate",["linear"],["get","height"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"yellow"],WB=e=>{const t=J.useRef("elevationprofile-"+Vu()),r=J.useRef("elevationprofile-layer-"+Vu()),n=e.elevationFactor||1,i=J.useMemo(()=>{if(!e?.geojson?.features)return;const a=e.geojson.features?.find(v=>v.geometry.type==="LineString");if(!a||!a.geometry)return;const c=a.geometry.coordinates.map(v=>v[2]),h=Math.min(...c);let g=Math.max(...c)-h;return g=g===0?1:g,{max:g,min:h,line:a}},[e.geojson]),o=J.useMemo(()=>i?["interpolate",["linear"],["get","height"],0,"rgb(0,255,55)",i.max*n,"rgb(255,0,0)"]:HB,[i,e.elevationFactor]),l=J.useMemo(()=>!e.geojson?.features||!i?void 0:y2e(i,n),[i,n]);return AP({mapId:e.mapId,sourceId:t.current,source:{type:"geojson",data:l||Hf([])}}),Vf({layerId:r.current,options:{source:t.current,type:"fill-extrusion",paint:{"fill-extrusion-height":["get","height"],"fill-extrusion-opacity":.9,"fill-extrusion-color":o||HB}},insertBeforeLayer:e.insertBeforeLayer}),Z.jsx(Z.Fragment,{})};try{WB.displayName="MlSpatialElevationProfile",WB.__docgenInfo={description:"",displayName:"MlSpatialElevationProfile",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties> | geojson | undefined"}},idPrefix:{defaultValue:null,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance",name:"idPrefix",required:!1,type:{name:"string | undefined"}},elevationFactor:{defaultValue:null,description:"Number describes the factor of the height of the elevation",name:"elevationFactor",required:!1,type:{name:"number | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}}}catch{}const Gg=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=J.useRef(e.layerId||"MlVectorTileLayer-"+t.componentId),n=J.useRef({}),i=J.useRef({}),o=J.useRef(!1),l=J.useCallback(()=>{t.map&&(o.current=!0,t.map.map.getSource(r.current)&&t.cleanup(),t.map.map.getSource(r.current)||t.map.addSource(r.current,{type:"vector",tiles:[e.url||""],attribution:"",minzoom:0,maxzoom:14,...e.sourceOptions},t.componentId),e.layers.forEach(c=>{t.map&&(t.map.addLayer({source:r.current,minzoom:0,maxzoom:22,layout:{},paint:{"line-opacity":.5,"line-color":"rgb(80, 80, 80)","line-width":2},...c},e.insertBeforeLayer,t.componentId),n.current[c.id]=JSON.stringify(c.paint),i.current[c.id]=JSON.stringify(c.layout),t.map.on("styledata",()=>{o.current&&!t.map?.map.getSource(r.current)&&(console.log("Recreate Layer "+r.current),l())},t.componentId))}))},[t.map,e]),a=J.useCallback(()=>{o.current&&e.layers.forEach(c=>{if(t.map&&t.map.map.getLayer(c.id)){const h=JSON.stringify(c.paint);if(h!==n.current[c.id])for(const v in c.paint)t.map.setPaintProperty(c.id,v,c.paint[v]);n.current[c.id]=h;const g=JSON.stringify(c.layout);if(g!==i.current[c.id])for(const v in c.layout)t.map.setLayoutProperty(c.id,v,c.layout[v]);i.current[c.id]=g}})},[t.map,e.layers]);return J.useEffect(()=>{o.current||l()},[l]),J.useEffect(()=>{!t.map||!o.current||l()},[e.layers.length,t.map]),J.useEffect(()=>{!t.map||!o.current||a()},[e.layers,t.map]),Z.jsx(Z.Fragment,{})};try{Gg.displayName="MlVectorTileLayer",Gg.__docgenInfo={description:`Adds a vector-tile source and 0...n vector-tile-layers to the MapLibre instance referenced by
props.mapId`,displayName:"MlVectorTileLayer",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"VectorSourceSpecification | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | undefined"}},layers:{defaultValue:null,description:"",name:"layers",required:!0,type:{name:"ExtendedLayerSpecification[]"}}}}}catch{}const XB=e=>{const[t,r]=J.useState(),n=da({mapId:e.mapId}),i=J.useRef(e.mlGeoJsonLayerProps?.layerId||"MlOgcApiFeature-"+n.componentId),o=()=>{const l=new URL(e.ogcApiUrl);if(e.ogcApiFeatureParams&&Object.entries(e.ogcApiFeatureParams).forEach(([a,c])=>{c!=null&&l.searchParams.append(a,c.toString())}),e.reloadFeaturesOnMapMove){const a=n?.map?.getBounds().getSouthWest(),c=n?.map?.getBounds().getNorthEast(),h=`${a?.lng},${a?.lat},${c?.lng},${c?.lat}`;l.searchParams.append("bbox",h)}return l.toString()};return J.useEffect(()=>{if(!n.map)return;const l=()=>{const a=o();fetch(a).then(c=>{if(!c.ok)throw new Error("Error fetching OGC features");return c.json()}).then(c=>{r(c)}).catch(c=>{console.log(c),r(void 0)})};return l(),e.reloadFeaturesOnMapMove&&n.map.on("moveend",l),()=>{n?.map?.off&&n.map.off("moveend",l)}},[n.map,e.ogcApiFeatureParams,e.ogcApiUrl]),J.useEffect(()=>{!n.map||!n.map.map.style.getLayer(i.current)||(e.visible?n.map.map.setLayoutProperty(i.current,"visibility","visible"):n.map.map.setLayoutProperty(i.current,"visibility","none"))},[e.visible,n.map]),Z.jsx(Z.Fragment,{children:t&&Z.jsx(Uu,{geojson:t,layerId:i.current,...e.mlGeoJsonLayerProps})})};try{XB.displayName="MlOgcApiFeatures",XB.__docgenInfo={description:"",displayName:"MlOgcApiFeatures",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},ogcApiUrl:{defaultValue:null,description:"The url of OGC API",name:"ogcApiUrl",required:!0,type:{name:"URL"}},ogcApiFeatureParams:{defaultValue:null,description:"The additional query parameters of OGC API",name:"ogcApiFeatureParams",required:!1,type:{name:"OgcApiFeaturesParamsTypes | undefined"}},reloadFeaturesOnMapMove:{defaultValue:null,description:"Fetches the features everytime (based on the current bbox) when the map gets moved",name:"reloadFeaturesOnMapMove",required:!1,type:{name:"boolean | undefined"}},mlGeoJsonLayerProps:{defaultValue:null,description:"Geojson Layer props. But omit 'geojson' because it gets set from the OGC API Feature call",name:"mlGeoJsonLayerProps",required:!1,type:{name:'Omit<MlGeoJsonLayerProps, "geojson"> | undefined'}}}}}catch{}const YB=e=>{const t=J.useContext(Uh),r=J.useRef(!1),n=J.useRef(void 0),i=J.useRef("MlWmsFeatureInfoPopup-"+Vu());return J.useEffect(()=>{const o=i.current;return()=>{n.current&&(n.current.cleanup(o),n.current=void 0),r.current=!1}},[]),J.useEffect(()=>{!t.mapExists(e.mapId)||r.current||(r.current=!0,n.current=t.getMap(e.mapId),n.current.setCenter([7.132122000552613,50.716405378037706]))},[t.mapIds,t,e.mapId]),Z.jsx(Z.Fragment,{})};try{YB.displayName="MlWmsFeatureInfoPopup",YB.__docgenInfo={description:"TODO: Add short & useful description",displayName:"MlWmsFeatureInfoPopup",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const v2e={urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:"256",height:"256",styles:""}},kx=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=J.useRef(!1),n=J.useRef(e.layerId||"MlWmsLayer-"+t.componentId),i=J.useMemo(()=>{let l,a=e.url;e.url.indexOf("?")!==-1&&(l=e.url.split("?"),a=l[0]);const c=new URLSearchParams(l?.[1]),h={...v2e.urlParameters,...Object.fromEntries(c),...e.urlParameters},g=new URLSearchParams(h),v=decodeURIComponent(g.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");return a+"?"+v},[e.urlParameters,e.url]),o=J.useCallback(()=>{t.map&&(r.current=!0,t.map.map.getLayer(n.current)&&t.cleanup(),t.map.addSource(n.current,{type:"raster",tiles:[i],tileSize:256,attribution:e.attribution??"",...e.sourceOptions},t.componentId),t.map.addLayer({id:n.current,type:"raster",source:n.current,...e.layerOptions},e.insertBeforeLayer,t.componentId),t.map.on("styledata",()=>{r.current&&!t.map?.map.getLayer(n.current)&&(console.log("Recreate Layer "+n.current),o())},t.componentId),e.visible===!1&&t.map.map.setLayoutProperty(n.current,"visibility","none"))},[t.map,e,i]);return J.useEffect(()=>{r.current||o()},[o]),J.useEffect(()=>{if(!t.map||!t.map?.map?.style?.sourceCaches?.[n.current]||!r.current)return;const l=t.map.map.getSource(n.current);l.tiles=[i],t.map.map.style.sourceCaches[n.current].clearTiles(),t.map.map.style.sourceCaches[n.current].update(t.map.map.transform),t.map.map.triggerRepaint()},[t.map,i]),J.useEffect(()=>{!t.map||!r.current||(e.visible===void 0||e.visible?t.map.map.setLayoutProperty(n.current,"visibility","visible"):t.map.map.setLayoutProperty(n.current,"visibility","none"))},[e.visible,t.map]),Z.jsx(Z.Fragment,{})};try{kx.displayName="MlWmsLayer",kx.__docgenInfo={description:"Adds a WMS raster source & layer to the maplibre-gl instance",displayName:"MlWmsLayer",props:{urlParameters:{defaultValue:null,description:"",name:"urlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:null,description:"",name:"attribution",required:!1,type:{name:"string | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"RasterSourceSpecification | undefined"}},layerOptions:{defaultValue:null,description:"",name:"layerOptions",required:!1,type:{name:"RasterLayerSpecification | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}}}}}catch{}/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Zi=e=>e!==void 0,pU=(e,t,r)=>t in e?e[t]:e[t]=r;const $0={ELEMENT:1,TEXT:3,CDATA_SECTION:4};class b2e{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return ow(t,r).join("")}}function ow(e,t){return mU(e,t,[]).join("")}function mU(e,t,r){if(e.nodeType===$0.CDATA_SECTION||e.nodeType===$0.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)mU(n,t,r)}return r}function _2e(e,t,r,n){for(var i=x2e(t);i;i=w2e(i)){var o=i.namespaceURI||null,l=e[o];if(Zi(l)){var a=l[i.localName];Zi(a)&&a.call(n,i,r)}}}function x2e(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==$0.ELEMENT;)t=t.nextSibling;return t}function w2e(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==$0.ELEMENT;)t=t.nextSibling;return t}function Ul(e,t,r){return S2e(e,t,r)}function S2e(e,t,r){var n=Zi(r)?r:{},i,o;for(i=0,o=e.length;i<o;++i)n[e[i]]=t;return n}function gU(e,t){return(function(r,n){var i=e.call(Zi(t)?t:this,r,n);if(Zi(i)){var o=n[n.length-1];o.push(i)}})}function Pl(e,t,r,n,i){return n.push(e),_2e(t,r,n,i),n.pop()}function Kn(e,t,r){return(function(n,i){let o=e.call(Zi(r)?r:this,n,i);if(Zi(o)){var l=i[i.length-1],a=Zi(t)?t:n.localName;l[a]=o}})}function zu(e,t,r){return(function(n,i){var o=e.call(Zi(r)?r:this,n,i);if(Zi(o)){var l=i[i.length-1],a=Zi(t)?t:n.localName,c=pU(l,a,[]);c.push(o)}})}const C2e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function E2e(e){return e.replace(C2e,"")}function Bp(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Zi(t[1])||!1}function Dg(e){return Of(ow(e,!1))}function Of(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function x4(e){return Ax(ow(e,!1))}function Ax(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function xa(e){return E2e(ow(e,!1))}const T2e="http://www.w3.org/1999/xlink";function Gk(e){return e.getAttributeNS(T2e,"href")}function P2e(e,t){return Pl({},ewe,e,t)}function yU(e){return[Of(e.getAttribute("minx")),Of(e.getAttribute("miny")),Of(e.getAttribute("maxx")),Of(e.getAttribute("maxy"))]}function I2e(e,t){const r=yU(e),n=[Of(e.getAttribute("resx")),Of(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function k2e(e,t){const r=yU(e);if(!(!Zi(r[0])||!Zi(r[1])||!Zi(r[2])||!Zi(r[3])))return r}function A2e(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function M2e(e,t){const r=Pl({},twe,e,t);if(!Zi(r))return;const n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,l=r.northBoundLatitude;if(!(!Zi(n)||!Zi(i)||!Zi(o)||!Zi(l)))return[n,i,o,l]}function L2e(e,t){return Pl({},X2e,e,t)}function R2e(e,t){return Pl({},Y2e,e,t)}function D2e(e,t){return Pl({},Z2e,e,t)}function N2e(e,t){return Pl({},K2e,e,t)}function O2e(e,t){return Pl({},J2e,e,t)}function F2e(e,t){return Pl([],Q2e,e,t)}function B2e(e,t){const r=Bp(e.getAttribute("queryable"));return Pl({queryable:Zi(r)?r:!1},_U,e,t)}function z2e(e,t){var r=t[t.length-1];const n=Pl({},_U,e,t);if(!Zi(n))return;let i=Bp(e.getAttribute("queryable"));Zi(i)||(i=r.queryable),n.queryable=Zi(i)?i:!1;let o=Ax(e.getAttribute("cascaded"));Zi(o)||(o=r.cascaded),n.cascaded=o;let l=Bp(e.getAttribute("opaque"));Zi(l)||(l=r.opaque),n.opaque=Zi(l)?l:!1;let a=Bp(e.getAttribute("noSubsets"));Zi(a)||(a=r.noSubsets),n.noSubsets=Zi(a)?a:!1;let c=Of(e.getAttribute("fixedWidth"));Zi(c)||(c=r.fixedWidth),n.fixedWidth=c;let h=Of(e.getAttribute("fixedHeight"));Zi(h)||(h=r.fixedHeight),n.fixedHeight=h;const g=["Style","CRS","AuthorityURL"];for(let x=0,b=g.length;x<b;x++){const S=g[x],I=r[S];if(Zi(I)){let k=pU(n,S,[]);k=k.concat(I),n[S]=k}}const v=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let x=0,b=v.length;x<b;x++){const S=v[x],I=n[S];if(!Zi(I)){const k=r[S];n[S]=k}}return n}function j2e(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Bp(e.getAttribute("multipleValues")),nearestValue:Bp(e.getAttribute("nearestValue")),current:Bp(e.getAttribute("current")),values:xa(e)}}function Wf(e,t){return Pl({},swe,e,t)}function q2e(e,t){return Pl({},rwe,e,t)}function $2e(e,t){return Pl({},iwe,e,t)}function V2e(e,t){return Pl({},awe,e,t)}function w4(e,t){return Pl({},nwe,e,t)}function vU(e,t){var r=Wf(e,t);if(Zi(r)){const n=[Ax(e.getAttribute("width")),Ax(e.getAttribute("height"))];return r.size=n,r}}function U2e(e,t){var r=Wf(e,t);if(Zi(r))return r.name=e.getAttribute("name"),r}function G2e(e,t){var r=Wf(e,t);if(Zi(r))return r.type=e.getAttribute("type"),r}function H2e(e,t){return Pl({},owe,e,t)}function bU(e,t){return Pl([],lwe,e,t)}const Gl=[null,"http://www.opengis.net/wms"],W2e=Ul(Gl,{Service:Kn(R2e),Capability:Kn(L2e)}),X2e=Ul(Gl,{Request:Kn(q2e),Exception:Kn(F2e),Layer:Kn(B2e)}),Y2e=Ul(Gl,{Name:Kn(xa),Title:Kn(xa),Abstract:Kn(xa),KeywordList:Kn(bU),OnlineResource:Kn(Gk),ContactInformation:Kn(D2e),Fees:Kn(xa),AccessConstraints:Kn(xa),LayerLimit:Kn(x4),MaxWidth:Kn(x4),MaxHeight:Kn(x4)}),Z2e=Ul(Gl,{ContactPersonPrimary:Kn(N2e),ContactPosition:Kn(xa),ContactAddress:Kn(O2e),ContactVoiceTelephone:Kn(xa),ContactFacsimileTelephone:Kn(xa),ContactElectronicMailAddress:Kn(xa)}),K2e=Ul(Gl,{ContactPerson:Kn(xa),ContactOrganization:Kn(xa)}),J2e=Ul(Gl,{AddressType:Kn(xa),Address:Kn(xa),City:Kn(xa),StateOrProvince:Kn(xa),PostCode:Kn(xa),Country:Kn(xa)}),Q2e=Ul(Gl,{Format:gU(xa)}),_U=Ul(Gl,{Name:Kn(xa),Title:Kn(xa),Abstract:Kn(xa),KeywordList:Kn(bU),CRS:zu(xa),SRS:zu(xa),EX_GeographicBoundingBox:Kn(M2e),LatLonBoundingBox:Kn(k2e),BoundingBox:zu(I2e),Dimension:zu(j2e),Attribution:Kn(P2e),AuthorityURL:zu(U2e),Identifier:zu(xa),MetadataURL:zu(G2e),DataURL:zu(Wf),FeatureListURL:zu(Wf),Style:zu(H2e),MinScaleDenominator:Kn(Dg),MaxScaleDenominator:Kn(Dg),ScaleHint:Kn(A2e),Layer:zu(z2e)}),ewe=Ul(Gl,{Title:Kn(xa),OnlineResource:Kn(Gk),LogoURL:Kn(vU)}),twe=Ul(Gl,{westBoundLongitude:Kn(Dg),eastBoundLongitude:Kn(Dg),southBoundLatitude:Kn(Dg),northBoundLatitude:Kn(Dg)}),rwe=Ul(Gl,{GetCapabilities:Kn(w4),GetMap:Kn(w4),GetFeatureInfo:Kn(w4)}),nwe=Ul(Gl,{Format:zu(xa),DCPType:zu($2e)}),iwe=Ul(Gl,{HTTP:Kn(V2e)}),awe=Ul(Gl,{Get:Kn(Wf),Post:Kn(Wf)}),owe=Ul(Gl,{Name:Kn(xa),Title:Kn(xa),Abstract:Kn(xa),LegendURL:zu(vU),StyleSheetURL:Kn(Wf),StyleURL:Kn(Wf)}),swe=Ul(Gl,{Format:Kn(xa),OnlineResource:Kn(Gk)}),lwe=Ul(Gl,{Keyword:gU(xa)});class uwe{constructor(t,r){!r&&typeof window<"u"&&(r=window.DOMParser),this.version=void 0,this._parser=new b2e(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==$0.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),Pl({version:this.version},W2e,t,[])||null}}function xU(e){const[t,r]=J.useState(),[n,i]=J.useState(e.url),[o,l]=J.useState(""),[a,c]=J.useState(),[h,g]=J.useState(),v=()=>{r(void 0),c(void 0),l("")};return J.useEffect(()=>{if(v(),g(void 0),!n)return;let x,b=n;n.indexOf("?")!==-1&&(x=n.split("?"),b=x[0]);const S=new URLSearchParams(x?.[1]),I={...Object.fromEntries(S),...e.urlParameters},k=new URLSearchParams(I),M=decodeURIComponent(k.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(b+"?"+M).then(O=>{if(O.ok)return O.text();throw Error(O.statusText+" ("+O.status+" - "+O.type+")")}).then(O=>{c(new uwe(O,window.DOMParser).toJSON())}).catch(O=>{v(),console.log(O),g(O.message)})},[n,e.urlParameters]),J.useEffect(()=>{a?.Service&&(l(a.Capability?.Request?.GetMap?.DCPType?.[0]?.HTTP?.Get?.OnlineResource),r(a.Capability?.Request?.GetFeatureInfo?.DCPType?.[0]?.HTTP?.Get?.OnlineResource))},[a]),{capabilities:a,getFeatureInfoUrl:t,wmsUrl:o,error:h,setUrl:i}}xU.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"}};const ZB=Ei(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),KB=2*Math.PI*6378137/2,JB=function(e,t={enable:!0,decimal:1}){const r=e.lng,n=e.lat;let i=r*KB/180,o=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return o=o*KB/180,t.enable&&(i=Number(i.toFixed(t.decimal)),o=Number(o.toFixed(t.decimal))),[i,o]},Mx=e=>{const{capabilities:t,error:r,setUrl:n,getFeatureInfoUrl:i,wmsUrl:o}=xU({urlParameters:e.urlParameters}),[l,a]=J.useState(e?.config?.open||!1),[c,h]=J.useState(e?.config?.visible||!0),[g,v]=J.useState(!1),x=da({mapId:e?.mapId}),[b,S]=J.useState(e?.config?.layers||[]),[I,k]=J.useState(!1),[M,O]=J.useState(),[F,D]=J.useState(void 0);J.useEffect(()=>{e.config||n(e.url)},[e.url]);const q=J.useMemo(()=>e?.config?.wmsUrl||o,[e?.config?.wmsUrl,o]),z=J.useMemo(()=>e?.config?.getFeatureInfoUrl||i,[e?.config?.getFeatureInfoUrl,i]),U=J.useMemo(()=>t,[t]),H=J.useMemo(()=>e?.name||e?.config?.name||U?.Service?.Title,[e?.name,e?.config?.name,U?.Service?.Title]),X=J.useMemo(()=>e?.setLayers&&e?.config?.layers||b,[e?.config?.layers,b]),ie=J.useMemo(()=>e?.setLayers||S,[e?.setLayers,S]);J.useEffect(()=>{e?.onConfigChange?.({layers:X,getFeatureInfoUrl:z,wmsUrl:q,visible:c,open:l,name:H})},[X,U,z,q,c,l,H]);const ee=J.useMemo(()=>X.filter(fe=>fe.visible&&fe?.Attribution?.Title).map(fe=>fe?.Attribution?.Title).filter((fe,ke,me)=>me.indexOf(fe)===ke).join(" "),[X]),G=function(){O(void 0),D(void 0)},ne=J.useCallback(fe=>{if(!x.map)return;G();const ke=x.map.unproject([fe.point.x,fe.point.y]),me=$c([ke.lng,ke.lat]),Se=ohe(me,50,{units:"meters"}),we=Se&&vc(Se),Pe=we&&JB({lng:we[0],lat:we[1]}),ce=we&&JB({lng:we[2],lat:we[3]}),be={REQUEST:"GetFeatureInfo",BBOX:(Pe&&ce&&[Pe[0],Pe[1],ce[0],ce[1]])?.join(","),SERVICE:"WMS",INFO_FORMAT:U?.Capability?.Request?.GetFeatureInfo.Format.indexOf("text/html")!==-1?"text/html":"text/plain",FEATURE_COUNT:"10",LAYERS:X.map(Ze=>Ze.visible&&Ze.queryable?Ze.Name:void 0).filter(Ze=>Ze),QUERY_LAYERS:X.map(Ze=>Ze.visible&&Ze.queryable?Ze.Name:void 0).filter(Ze=>Ze),WIDTH:100,HEIGHT:100,srs:"EPSG:3857",CRS:"EPSG:3857",version:"1.3.0",X:50,Y:50,I:50,J:50,buffer:"50"};let Me=z,Le;Me?.indexOf?.("?")!==-1&&(Le=e.url.split("?"),Me=Le[0]);const Ue=new URLSearchParams(Le?.[1]),Oe={...Object.fromEntries(Ue),...be},tt=new URLSearchParams(Oe);fetch(e.url+"?"+tt.toString()).then(Ze=>{if(!Ze.ok)throw new Error("FeatureInfo could not be fetched");return Ze.text()}).then(Ze=>{O(fe.lngLat),D(Ze)}).catch(Ze=>console.log(Ze))},[U,z,e,x,X]),ae=J.useMemo(()=>(typeof e?.featureInfoActive<"u"&&e.featureInfoActive||I)&&X?.some(fe=>fe.visible&&fe.queryable)&&!!x.map,[e?.featureInfoActive,I,X,x.map]);J.useEffect(()=>{if(!ae){G();return}const fe=ne;return x.map.map.on("click",fe),()=>{x.map?.map.off?.("click",fe)}},[ae,ne,x.map]),J.useEffect(()=>{if(U?.Service)if(U?.Capability?.Layer?.CRS?.indexOf?.("EPSG:3857")===-1&&U?.Capability?.Layer?.CRS?.indexOf?.("CRS:84")===-1)console.log("MlWmsLoader ("+U.Service.Title+"): No WGS 84/Pseudo-Mercator support");else{console.log("MlWmsLoader ("+U.Service.Title+"): WGS 84/Pseudo-Mercator supported");let fe=[],ke=U?.Capability?.Layer?.Layer.filter(me=>!me.Layer?.length).map((me,Se)=>(Se===0&&(fe=me.EX_GeographicBoundingBox),{visible:U?.Capability?.Layer?.Layer?.length>2?Se>1:!0,Attribution:{Title:""},...(({CRS:we,...Pe})=>Pe)(me)}));U?.Capability?.Layer?.Layer.forEach(me=>{const Se=me?.Layer?.filter(we=>we.CRS.length).map((we,Pe)=>(Pe===0&&(fe=we.EX_GeographicBoundingBox),{visible:!1,Attribution:{Title:""},...(({CRS:ce,..._e})=>_e)(we)}));Se&&(ke=[...ke,...Se])}),ie(ke),e.zoomToExtent&&x?.map&&fe.length>3&&x?.map.fitBounds([[fe[0],fe[1]],[fe[2],fe[3]]])}},[U,x.map]);const le=Z.jsxs(Bc,{secondaryAction:Z.jsxs(Z.Fragment,{children:[e.buttons,e.featureInfoEnabled&&Z.jsx(pc,{sx:{padding:"4px",marginTop:"-3px",marginRight:"4px",background:fe=>X?.some(ke=>ke.visible&&ke.queryable)?ae?fe.palette.info.light:fe.palette.grey[300]:"initial"},"aria-label":"featureinfo",onClick:()=>{typeof e?.setFeatureInfoActive=="function"?e.setFeatureInfoActive(fe=>!fe):k(fe=>!fe)},disabled:!X?.some(fe=>fe.visible&&fe.queryable),children:Z.jsx(ZB,{})}),Z.jsx(pc,{edge:e.showDeleteButton?!1:"end",sx:{padding:"4px",marginTop:"-3px",...e.showDeleteButton?{marginRight:"4px"}:{}},"aria-label":"open",onClick:()=>a(fe=>!fe),children:l?Z.jsx(B$,{}):Z.jsx(dx,{})}),e.showDeleteButton&&Z.jsxs(Z.Fragment,{children:[Z.jsx(pc,{"aria-label":"delete",edge:"end",onClick:()=>{typeof e.onConfigChange=="function"&&v(!0)},sx:{padding:"4px",marginTop:"-3px"},children:Z.jsx(v1,{})}),g&&Z.jsx(fy,{open:g,onConfirm:()=>{typeof e.onConfigChange=="function"&&e.onConfigChange(!1)},onCancel:()=>{v(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]})]}),sx:{paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"},children:[Z.jsx(S0,{sx:{minWidth:"30px"},children:Z.jsx(ty,{sx:{padding:0},checked:c,onClick:()=>{h(fe=>!fe)}})}),Z.jsx(Ac,{primary:H,variant:"layerlist"})]});return Z.jsxs(Z.Fragment,{children:[r&&Z.jsx(Pie,{children:Z.jsx(vo,{children:r})}),q&&Z.jsxs(Z.Fragment,{children:[e.layerId&&e.sortable&&Z.jsx(Ex,{layerId:e.layerId,children:le}),e.layerId&&!e.sortable&&le,Z.jsxs(vo,{sx:{display:l?"block":"none"},children:[Z.jsx(gd,{dense:!0,component:"div",disablePadding:!0,sx:{paddingLeft:"18px"},children:q&&X?.map?.((fe,ke)=>fe?.Name?Z.jsxs(Bc,{secondaryAction:Z.jsx(Z.Fragment,{children:fe?.queryable&&Z.jsx(ZB,{})}),children:[Z.jsx(S0,{sx:{minWidth:"30px"},children:Z.jsx(ty,{checked:fe.visible,sx:{padding:0},onClick:()=>{const me=[...X];me[ke].visible=!me[ke].visible,ie([...me])}})}),Z.jsx(Ac,{primary:fe?.Title,variant:"layerlist"})]},fe.Name+ke):Z.jsx(Z.Fragment,{}))}),q&&X?.length&&Z.jsx(kx,{url:q,attribution:ee,visible:c,urlParameters:{...e.wmsUrlParameters,layers:X?.filter?.(fe=>fe.visible).map(fe=>fe.Name).reverse().join(",")},insertBeforeLayer:e?.insertBeforeLayer},x.componentId)]}),e.featureInfoEnabled&&M&&Z.jsx(I3,{...M,content:F})]})]})};Mx.defaultProps={mapId:void 0,url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"},wmsUrlParameters:{TRANSPARENT:"TRUE"},featureInfoEnabled:!0,zoomToExtent:!1,showDeleteButton:!1};try{Mx.displayName="MlWmsLoader",Mx.__docgenInfo={description:`Loads a WMS getCapabilities xml document and adds a MlWmsLayer component for each layer that is
offered by the WMS.`,displayName:"MlWmsLoader",props:{url:{defaultValue:{value:""},description:"WMS URL",name:"url",required:!1,type:{name:"string"}},mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},urlParameters:{defaultValue:{value:`{
		SERVICE: 'WMS',
		VERSION: '1.3.0',
		REQUEST: 'GetCapabilities',
	}`},description:"URL parameters that will be used in the getCapabilities request",name:"urlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},wmsUrlParameters:{defaultValue:{value:`{
		TRANSPARENT: 'TRUE',
	}`},description:"URL parameters that will be added when requesting WMS capabilities",name:"wmsUrlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},zoomToExtent:{defaultValue:{value:"false"},description:"If true, zooms to the extent of the WMS layer after loading the getCapabilities response",name:"zoomToExtent",required:!1,type:{name:"boolean | undefined"}},name:{defaultValue:null,description:"The name of the ListItem element representing the WmsLoader",name:"name",required:!1,type:{name:"string | undefined"}},featureInfoEnabled:{defaultValue:{value:"true"},description:"If true, enables the feature info functionality",name:"featureInfoEnabled",required:!1,type:{name:"boolean | undefined"}},featureInfoActive:{defaultValue:null,description:"If true, the feature info functionality is active",name:"featureInfoActive",required:!1,type:{name:"boolean | undefined"}},setFeatureInfoActive:{defaultValue:null,description:"A function to set the feature info active state",name:"setFeatureInfoActive",required:!1,type:{name:"((val: boolean | ((current: boolean) => boolean)) => void) | undefined"}},config:{defaultValue:null,description:"The WMS configuration object",name:"config",required:!1,type:{name:"WmsConfig | undefined"}},onConfigChange:{defaultValue:null,description:"A function to handle changes to the WMS configuration",name:"onConfigChange",required:!1,type:{name:"((config: false | WmsConfig) => void) | undefined"}},setLayers:{defaultValue:null,description:"A function to update a LayerType config array that is passed to this component at props.config.layers",name:"setLayers",required:!1,type:{name:"((layers: LayerType[]) => void) | undefined"}},showDeleteButton:{defaultValue:{value:"false"},description:"If true, shows the delete button for the WMSLoader",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},buttons:{defaultValue:null,description:"Custom buttons to display for the WMSLoader",name:"buttons",required:!1,type:{name:"Element | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function A3(e){const t={"circle-color":"rgba(0,0,0,0)"},r={"fill-color":"rgba(0,0,0,0)","fill-outline-color":"rgba(0,0,0,0)"},n={"line-color":"rgba(0,0,0,0)"},i=["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,0,e.currentVal,1,e.currentVal+e.fadeOut*e.step,0],o=["interpolate",["linear"],["get",e.timeField],e.currentVal,1,e.currentVal+e.fadeOut*e.step,0],l={"fill-color":e.featuresColor,"fill-opacity":i,"fill-outline-color":["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,"rgba(255, 0, 0, 0)",e.currentVal,"rgb(0,0,0)",e.currentVal+e.fadeIn*e.step,"rgba(255, 0, 0, 0)"]},a={"circle-color":e.featuresColor,"circle-radius":["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,1,e.currentVal,20,e.currentVal+e.fadeOut*e.step,1],"circle-opacity":i},c={"line-color":e.featuresColor,"line-width":3,"line-opacity":i},h={"circle-color":e.featuresColor,"circle-radius":["interpolate",["linear"],["get",e.timeField],e.currentVal,20,e.currentVal+e.fadeOut*e.step,1],"circle-opacity":o},g={"fill-color":e.featuresColor,"fill-opacity":o,"fill-outline-color":["interpolate",["linear"],["get",e.timeField],e.currentVal,"rgb(0,0,0)",e.currentVal+e.fadeIn*e.step,"rgba(255, 0, 0, 0)"]},v={"line-color":e.featuresColor,"line-width":3,"line-opacity":o};if(e.userPaint!==void 0)return e.userPaint;switch(e.type){case"circle":return e.currentVal===e.minVal&&!e.isPlaying?t:e.accumulate?h:a;case"fill":return e.currentVal===e.minVal&&!e.isPlaying?r:e.accumulate?g:l;case"line":return e.currentVal===e.minVal&&!e.isPlaying?n:e.accumulate?v:c;case void 0:return e.currentVal===e.minVal&&!e.isPlaying?t:e.accumulate?h:a}}try{A3.displayName="paintPicker",A3.__docgenInfo={description:"",displayName:"paintPicker",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"fill"'},{value:'"line"'},{value:'"circle"'}]}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},featuresColor:{defaultValue:null,description:"",name:"featuresColor",required:!0,type:{name:"string"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},userPaint:{defaultValue:null,description:"",name:"userPaint",required:!0,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | { ...; } | { ...; } | undefined'}}}}}catch{}function M3(e){const t=e.currentVal-e.fadeIn*e.step,r=e.currentVal+e.fadeIn*e.step,n={"text-color":"rgba(0,0,0,0)"},i={"text-color":e.labelColor,"text-opacity":["interpolate",["linear"],["get",e.timeField],t,0,e.currentVal,1,r,0]},o={"text-color":e.labelColor,"text-opacity":["interpolate",["linear"],["get",e.timeField],e.currentVal,1,r,0]},l=()=>e.currentVal===e.minVal&&!e.isPlaying?n:e.accumulate?o:i,a={"text-field":["get",e.labelField],"text-font":["Metropolis Regular"]};return Z.jsx(Tx,{options:{type:"symbol",layout:e.labelLayout||a,paint:e.labelPaint||l()},geojson:e.data,layerId:"timeControllerLabels"})}try{M3.displayName="MlTemporalControllerLabels",M3.__docgenInfo={description:"",displayName:"MlTemporalControllerLabels",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},labelField:{defaultValue:null,description:"",name:"labelField",required:!0,type:{name:"string"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!0,type:{name:"string"}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},labelLayout:{defaultValue:null,description:"",name:"labelLayout",required:!1,type:{name:"SymbolLayoutProps | undefined"}},labelPaint:{defaultValue:null,description:"",name:"labelPaint",required:!1,type:{name:"SymbolLayerSpecification | undefined"}}}}}catch{}const cwe=Ei(Z.jsx("path",{d:"M8 5v14l11-7z"})),dwe=Ei(Z.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"})),fwe=Ei(Z.jsx("path",{d:"M6 6h12v12H6z"})),hwe=Ei(Z.jsx("path",{d:"m4 18 8.5-6L4 6zm9-12v12l8.5-6z"})),pwe=Ei(Z.jsx("path",{d:"M11 18V6l-8.5 6zm.5-6 8.5 6V6z"})),mwe={marginLeft:"15%",marginBottom:"3%",width:"70%",height:"90px",alignItems:"center"},gwe={top:"10%",height:"100px",alignItems:"center"};function L3(e){const[t,r]=J.useState(e.currentVal),[n,i]=J.useState(e.isPlaying),o=e.maxVal-e.minVal,l=J.useRef(null),a=l1(S=>S.breakpoints.down("md"));J.useEffect(()=>()=>{l.current&&clearInterval(l.current)},[]),J.useEffect(()=>{e.returnCurrent(t),e.returnPlaying(n)},[t,n]);const c=ft.useCallback(()=>{let S=t-e.minVal;l.current&&clearInterval(l.current),l.current=setInterval(function(){S>=o?(l.current&&clearInterval(l.current),i(!1)):r(I=>I+e.step),S=S+e.step},e.interval)},[e.step,e.maxVal,t]),h=()=>{n?(i(!1),n&&l.current&&clearInterval(l.current)):(i(!0),c())},g=()=>{l.current&&clearInterval(l.current),r(e.minVal),i(!1)},v=()=>{n?(l.current&&clearInterval(l.current),r(t-o/10),c()):r(t-o/10)},x=()=>{n?(l.current&&clearInterval(l.current),r(t+o/10),c()):r(t+o/10)},b=(S,I)=>{n?S&&(l.current&&clearInterval(l.current),r(I),c()):r(I)};return Z.jsx(Z.Fragment,{children:Z.jsxs(HP,{anchor:"bottom",open:e.open||!0,variant:"persistent",sx:{flexShrink:0,"& .MuiDrawer-paper":a?gwe:mwe},children:[Z.jsxs(Rf,{container:!0,alignItems:"center",justifyContent:"space-between",children:[Z.jsxs(Rf,{item:!0,xs:12,sm:10,textAlign:"center",children:[Z.jsx(Ui,{onClick:v,children:Z.jsx(pwe,{})}),Z.jsx(Ui,{onClick:g,children:Z.jsx(fwe,{})}),Z.jsx(Ui,{onClick:h,children:n?Z.jsx(dwe,{}):Z.jsx(cwe,{})}),Z.jsx(Ui,{onClick:x,children:Z.jsx(hwe,{})})]}),e.display&&!a&&Z.jsx(Rf,{item:!0,xs:12,sm:5,textAlign:"right",children:Z.jsx(Qo,{variant:"h5",sx:{paddingRight:"25px"},children:Math.floor(t)})})]}),Z.jsx(KP,{sx:{position:"flex",width:"95%",paddingTop:"10px",alignSelf:"center"},"aria-label":"Custom marks",defaultValue:e.minVal,value:t,step:e.step,onChange:b,min:e.minVal,max:e.maxVal}),a&&e.display&&Z.jsx(Qo,{variant:"body1",textAlign:"right",children:Math.floor(t)})]})})}try{L3.displayName="TemporalControllerPlayer",L3.__docgenInfo={description:"",displayName:"TemporalControllerPlayer",props:{currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},interval:{defaultValue:null,description:"",name:"interval",required:!0,type:{name:"number"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},maxVal:{defaultValue:null,description:"",name:"maxVal",required:!0,type:{name:"number"}},returnCurrent:{defaultValue:null,description:"",name:"returnCurrent",required:!0,type:{name:"Dispatch<SetStateAction<number>>"}},returnPlaying:{defaultValue:null,description:"",name:"returnPlaying",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},featuresColor:{defaultValue:null,description:"",name:"featuresColor",required:!0,type:{name:"string"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"boolean"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!0,type:{name:"string"}},labelFadeIn:{defaultValue:null,description:"",name:"labelFadeIn",required:!0,type:{name:"number"}},labelFadeOut:{defaultValue:null,description:"",name:"labelFadeOut",required:!0,type:{name:"number"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"boolean"}}}}}catch{}function ywe(e,t){if(e?.features){const r=[...e.features?e.features:[]];return r.sort((n,i)=>n.properties?.[t]<i.properties?.[t]?1:-1),r[r.length-1]?.properties?.[t]||0}return 0}function vwe(e,t){if(e?.features){const r=[...e?.features?e.features:[]];return r.sort((n,i)=>n.properties?.[t]<i.properties?.[t]?-1:1),r[r.length-1]?.properties?.[t]||0}return 0}function R3(e){const t=da({mapId:e.mapId}),r=J.useMemo(()=>e.minVal?e.minVal:ywe(e.geojson,e.timeField),[e.minVal,e.geojson,e.timeField]),n=J.useMemo(()=>e.maxVal?e.maxVal:vwe(e.geojson,e.timeField),[e.maxVal,e.geojson,e.timeField]);return{filteredData:J.useMemo(()=>{if(e.geojson!==void 0&&t.map&&r&&n)return Hf(e.geojson.features.filter(o=>o.properties?.[e.timeField]>=r&&o.properties?.[e.timeField]<=n))},[e.geojson,t.map,e.timeField]),minVal:r,maxVal:n}}try{R3.displayName="useFilterData",R3.__docgenInfo={description:"",displayName:"useFilterData",props:{geojson:{defaultValue:null,description:"",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},initialVal:{defaultValue:null,description:"",name:"initialVal",required:!1,type:{name:"number | undefined"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!1,type:{name:"number | undefined"}},maxVal:{defaultValue:null,description:"",name:"maxVal",required:!1,type:{name:"number | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!0,type:{name:"string | undefined"}}}}}catch{}const QB=({mapId:e=void 0,insertBeforeLayer:t,geojson:r,ownLayer:n=!0,attribution:i="",type:o="circle",timeField:l,minVal:a,maxVal:c,initialVal:h,accumulate:g=!1,fitBounds:v=!0,paint:x,featuresColor:b,step:S=1,interval:I=200,fadeIn:k=5,fadeOut:M=5,label:O=!0,labelColor:F,labelField:D=[],labelFadeIn:q=5,labelFadeOut:z=5,displayCurrentValue:U=!1,onClick:H,onHover:X,onLeave:ie,onStateChange:ee})=>{const G=da({mapId:e,waitForLayer:t}),{filteredData:ne,minVal:ae,maxVal:le}=R3({geojson:r,timeField:l,minVal:a,maxVal:c,mapId:e}),fe=mu(),[ke,me]=J.useState(h||ae),Se=b||fe.palette.primary.main,we=F||fe.palette.text.primary,[Pe,ce]=J.useState(!1),_e=A3({type:o,timeField:l,currentVal:ke,minVal:ae,isPlaying:Pe,fadeIn:k,fadeOut:M,step:S,featuresColor:Se,accumulate:g,userPaint:x});return J.useEffect(()=>{!h&&ae?me(ae):h&&me(h)},[]),J.useEffect(()=>{typeof ee=="function"&&ee({current:ke,paint:_e})},[ee]),J.useEffect(()=>{if(v&&typeof ne<"u"){const be=vc(ne);G.map?.map.fitBounds(be)}},[ne]),J.useEffect(()=>{if(!G.map)return;let be,Me,Le;return H&&(be=H,G.map?.on("click","timeController",be)),X&&(Me=X,G.map?.on("mouseenter","timeController",Me)),ie&&(Le=ie,G.map?.on("mouseleave","timeController",Le)),()=>{be&&G.map?.off("click","timeController",be),Me&&G.map?.off("mouseenter","timeController",Me),Le&&G.map?.off("mouseleave","timeController",Le)}},[G.map,H,X,ie]),Z.jsxs(Z.Fragment,{children:[ne&&n&&Z.jsx(Uu,{type:o,mapId:e,options:{source:{type:"geojson",attribution:i,data:ne},paint:{...x||_e},layout:{visibility:"visible"}}}),ne&&O&&Z.jsx(M3,{data:ne,currentVal:ke,fadeIn:q,fadeOut:z,step:S,labelField:D,labelColor:we,timeField:l,minVal:ae,accumulate:g,isPlaying:Pe}),Z.jsx(L3,{currentVal:ke,isPlaying:Pe,step:S,interval:I,minVal:ae,maxVal:le,returnCurrent:me,returnPlaying:ce,open:!1,fadeIn:k,fadeOut:M,featuresColor:Se,labels:O,labelColor:we,labelFadeIn:q,labelFadeOut:z,accumulate:g,display:U})]})};try{QB.displayName="MlTemporalController",QB.__docgenInfo={description:"",displayName:"MlTemporalController",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order.
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},ownLayer:{defaultValue:{value:"true"},description:"If true,the component creates and loads a MlGeoJsonLayer to show the data.",name:"ownLayer",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:{value:""},description:"MapLibre attribution shown in the bottom right of the map, if this layer is visible",name:"attribution",required:!1,type:{name:"string | undefined"}},type:{defaultValue:{value:"circle"},description:`Type of the layer that will be added to the MapLibre instance.
Possible values: "line", "circle", "fill"`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"fill"'},{value:'"line"'},{value:'"circle"'}]}},timeField:{defaultValue:null,description:"Property field where the time informations is available.",name:"timeField",required:!0,type:{name:"string"}},minVal:{defaultValue:null,description:`Lowest time value to be shown in the time line.
By default, it is set to the lowest value in the time field.`,name:"minVal",required:!1,type:{name:"number | undefined"}},label:{defaultValue:{value:"true"},description:'When true, a label layer will be added by the component. In that case, the "labelField" propertie is mandatory.',name:"label",required:!1,type:{name:"boolean | undefined"}},labelField:{defaultValue:{value:"[]"},description:"Property field where the label information is available.",name:"labelField",required:!1,type:{name:"string | undefined"}},maxVal:{defaultValue:null,description:`Highest time value to be shown in the time line.
By default, it is set to the highest value in the time field.`,name:"maxVal",required:!1,type:{name:"number | undefined"}},initialVal:{defaultValue:null,description:`the value at which the component is to be loaded.
If not specified, the component starts at the minimum value.`,name:"initialVal",required:!1,type:{name:"number | undefined"}},accumulate:{defaultValue:{value:"false"},description:`When true, the features will be accumulated in the map.
This option ist by default false.`,name:"accumulate",required:!1,type:{name:"boolean | undefined"}},fitBounds:{defaultValue:{value:"true"},description:`When true, the component will fit the map bounds to the shown features.
This option ist by default true.`,name:"fitBounds",required:!1,type:{name:"boolean | undefined"}},showControls:{defaultValue:null,description:"Boolean value that disables and enables the controls drawer.",name:"showControls",required:!1,type:{name:"boolean | undefined"}},paint:{defaultValue:null,description:`Paint property object for the features layer.
Possible props depend on the layer type.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | { ...; } | { ...; } | undefined'}},featuresColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"featuresColor",required:!1,type:{name:"string | undefined"}},step:{defaultValue:{value:"1"},description:`How many units the timeline runs through at each step.
By default it is set to 1.`,name:"step",required:!1,type:{name:"number | undefined"}},interval:{defaultValue:{value:"200"},description:`The time between each addition to the counter, expressed in milliseconds.
By default, 200 ms.`,name:"interval",required:!1,type:{name:"number | undefined"}},fadeIn:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps before the feature starts to appear.
By default it is set to 5 steps.`,name:"fadeIn",required:!1,type:{name:"number | undefined"}},fadeOut:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps the feature fades out after it proper time value.
By default it is set to 5 steps.`,name:"fadeOut",required:!1,type:{name:"number | undefined"}},labelColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"labelColor",required:!1,type:{name:"string | undefined"}},labelLayout:{defaultValue:null,description:`Layout property object, that is passed to the labels layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol`,name:"labelLayout",required:!1,type:{name:"SymbolLayoutProps | undefined"}},labelPaint:{defaultValue:null,description:`Paint property object for the features layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol`,name:"labelPaint",required:!1,type:{name:"SymbolPaintProps | undefined"}},labelFadeIn:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps before the labels start to appear.
By default it is set to 5 steps.`,name:"labelFadeIn",required:!1,type:{name:"number | undefined"}},labelFadeOut:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps the labels fade out after their proper time value.
By default it is set to 5 steps.`,name:"labelFadeOut",required:!1,type:{name:"number | undefined"}},displayCurrentValue:{defaultValue:{value:"false"},description:"If true, the current time value will be displayed in the controlls panel.",name:"displayCurrentValue",required:!1,type:{name:"boolean | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onHover:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onStateChange:{defaultValue:null,description:"Callback function defined by the user to recive the current time value and paint property in the parent component.",name:"onStateChange",required:!1,type:{name:"Dispatch<SetStateAction<TemporalControllerValues | undefined>> | undefined"}}}}}catch{}const Lx=e=>{const t=e?.layerIds.toReversed();return Z.jsx(Z.Fragment,{children:t&&t.map((r,n)=>{const i=n>0?t[n-1]:e.insertBeforeLayer;return Z.jsx(Tx,{layerId:r,insertBeforeLayer:i},r)})})};try{Lx.displayName="MlOrderLayers",Lx.__docgenInfo={description:"Creates an invisible layer for each entry in props.layerIds with the id `order-{entry}` and a reliable order",displayName:"MlOrderLayers",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerIds:{defaultValue:null,description:"",name:"layerIds",required:!0,type:{name:"string[]"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}}}catch{}const ez=e=>{const t=da({mapId:"map_1"});return J.useEffect(()=>{if(t.map)return t.map.map.getSource("terrain")||t.map.map.addSource("terrain",{type:"raster-dem",encoding:"mapbox",maxzoom:12,minzoom:4,...e.sourceOptions}),t.map.map.setTerrain({source:"terrain",exaggeration:1,...e.terrainOptions}),t.map.addLayer({id:"hills",type:"hillshade",source:"terrain",layout:{visibility:"visible"},paint:{"hillshade-shadow-color":"rgba(71,59,36,0.4)"}}),()=>{t.map?.map.setTerrain(null),t.map?.map.getSource("terrain")&&(t.map.map.removeLayer("hills"),t.map.map.removeSource("terrain"))}},[t.map,e.sourceOptions,e.terrainOptions]),Z.jsx(Z.Fragment,{})};try{ez.displayName="MlTerrainLayer",ez.__docgenInfo={description:"Create Terrain Layer Component",displayName:"MlTerrainLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"Source of tiles with possibles options",name:"sourceOptions",required:!1,type:{name:"object | undefined"}},terrainOptions:{defaultValue:null,description:"Options for new exaggeration value",name:"terrainOptions",required:!1,type:{name:"TerrainSpecification | undefined"}}}}}catch{}const bwe=Ei(Z.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),_we=Ei([Z.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),Z.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),Z.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")]),xwe=[{name:"Point",mode:"draw_point",icon:Z.jsx(_we,{})},{name:"LineString",mode:"draw_line_string",icon:Z.jsx(O$,{})},{name:"Polygon",mode:"draw_polygon",icon:Z.jsx(F$,{})}],tz=e=>{const t=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=J.useState(),[i,o]=J.useState({activeGeometryIndex:void 0,selectedGeoJson:void 0,geometries:[],drawMode:void 0});console.log(i),J.useEffect(()=>{typeof e.onChange=="function"&&e.onChange(i)},[i,e.onChange]);const l={...e.buttonStyleOverride},a=v=>{let x;o(b=>(x=b.drawMode,{...b,drawMode:void 0,activeGeometryIndex:void 0,selectedGeoJson:void 0})),requestAnimationFrame(()=>{o(b=>(x==="draw_polygon"||x==="draw_line_string")&&v==="draw_point"?{...b,drawMode:void 0}:{...b,drawMode:v})})},c=v=>{o(x=>{const b=[...x.geometries];return b.splice(b.indexOf(v),1),{...x,drawMode:void 0,geometries:b,activeGeometryIndex:x.activeGeometryIndex?x.activeGeometryIndex-1:void 0}})},h=v=>{e.onShowInstructionChange?.(v.target.checked)},g=()=>Z.jsx(Z.Fragment,{children:xwe.map(v=>{const x=S=>i.drawMode===v.mode?S.palette.primary.main:S.palette.navigation.navColor,b=S=>i.drawMode!==v.mode?S.palette.primary.main:S.palette.navigation.navColor;return Z.jsx(Z.Fragment,{children:Z.jsx(Df,{title:v.name,children:Z.jsx(Ui,{sx:{color:b,backgroundColor:x,"&:hover":{backgroundColor:x},...l},onClick:()=>a(v.mode),children:v.icon},v.name)})})})});return Z.jsxs(Z.Fragment,{children:[Z.jsx(rg,{sx:{zIndex:104},children:Z.jsx(sT,{children:Z.jsx(g,{})})}),Z.jsx(rg,{sx:{marginTop:"10px"},children:Z.jsx(S7,{children:Z.jsx(uT,{control:Z.jsx(ty,{size:"small",checked:e.showInstruction,onChange:h}),label:"Show instructions"})})}),i.drawMode&&Z.jsx(cx,{mode:i.drawMode,geojson:i.selectedGeoJson,onChange:v=>{console.log("Features: ",v),v?.[0]&&o(x=>{const b=[...i.geometries];if(typeof x.activeGeometryIndex>"u"){const I=v[0];I&&I.properties?I.properties.id=I.id:console.error("tempFeature or tempFeature.properties is null or undefined"),x.activeGeometryIndex=b.length,b.push(I)}else b[x.activeGeometryIndex]=v[0];return(()=>{if(x.selectedGeoJson&&typeof x.activeGeometryIndex<"u"&&x.geometries[x.activeGeometryIndex]&&x.geometries[x.activeGeometryIndex].geometry.type==="Point"){const I=x.selectedGeoJson?.geometry?.coordinates,k=x.geometries[x.activeGeometryIndex]?.geometry?.coordinates;return JSON.stringify(I)!==JSON.stringify(k)}return!1})()&&(x.drawMode=void 0),{...x,geometries:b}})},onFinish:()=>{o(v=>({...v,drawMode:void 0,activeGeometryIndex:void 0,selectedGeoJson:void 0}))}}),Z.jsxs(gd,{sx:{zIndex:105,marginBottom:"-10px"},children:[i.geometries.map((v,x)=>Z.jsxs(rg,{sx:{display:"flex",flexDirection:"column"},children:[Z.jsx("br",{}),Z.jsxs(rg,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"},marginTop:"25px"},onMouseOver:()=>{n(v)},onMouseLeave:()=>{n(void 0)},children:[!v.properties?.customName&&Z.jsx("input",{type:"text",value:v.properties?.name||"",placeholder:"Assign name",onChange:b=>{const S=b.target.value;o(I=>{const k=[...I.geometries];return k[x].properties||(k[x].properties={}),k[x].properties.name=S,{...I,geometries:k}})},style:{padding:"5px",border:"1px solid #ccc",borderRadius:"4px",outline:"none"},onFocus:b=>b.target.style.borderColor="#009ee0",onBlur:b=>{b.target.style.borderColor="#ccc",o(S=>{const I=[...S.geometries];return I[x].properties||(I[x].properties={}),I[x].properties.customName=!0,{...S,geometries:I}})}}),Z.jsx(Nf,{listItemSx:l,configurable:!0,visible:!0,layerComponent:Z.jsx(Uu,{mapId:e.mapId,geojson:v,layerId:String(v.id),defaultPaintOverrides:{fill:{"fill-opacity":.5}}}),type:"layer",name:Z.jsx(Qo,{onClick:()=>{o(b=>{const S=[...b.geometries];return S[x].properties||(S[x].properties={}),S[x].properties.customName=!1,{...b,geometries:S}})},sx:{cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap"},children:v.properties?.name||String(v.id)}),description:v.geometry.type}),Z.jsx(rg,{sx:{padding:"3px 30px"},children:Z.jsxs(sT,{size:"small",children:[Z.jsx(Df,{title:"Center",children:Z.jsx(Ui,{sx:{color:b=>b.palette.primary.main,backgroundColor:b=>b.palette.navigation.navColor,...l},onClick:()=>{t?.map?.map.setCenter(v.geometry.type==="Point"?v.geometry.coordinates:GI(v).geometry.coordinates)},children:Z.jsx(HI,{})})}),Z.jsx(Df,{title:"Edit",children:Z.jsx(Ui,{sx:{color:b=>i.drawMode==="simple_select"&&i.selectedGeoJson?.id===v.id?b.palette.navigation.navColor:b.palette.primary.main,backgroundColor:b=>i.drawMode==="simple_select"&&i.selectedGeoJson?.id===v.id?b.palette.primary.main:b.palette.navigation.navColor,...l},onClick:()=>{o(b=>{const S=b.drawMode==="simple_select"&&b.selectedGeoJson?.id===v.id?void 0:"simple_select";return{...b,selectedGeoJson:v,activeGeometryIndex:b.geometries.indexOf(v),drawMode:S}})},children:Z.jsx(bwe,{})})}),Z.jsx(Df,{title:"Delete",children:Z.jsx(Ui,{sx:{color:b=>b.palette.primary.main,backgroundColor:b=>b.palette.navigation.navColor,...l},onClick:()=>{c(v),n(void 0)},children:Z.jsx(v1,{})})})]})})]})]},v.id)),r&&Z.jsx(Uu,{mapId:e.mapId,geojson:{type:"FeatureCollection",features:[r]},layerId:"highlightBorder",defaultPaintOverrides:{circle:{"circle-color":"#000000","circle-opacity":.2,"circle-radius":10},line:{"line-color":"#000000","line-opacity":.2,"line-width":10},fill:{"fill-color":"#000000","fill-opacity":.2}}})]})]})};try{tz.displayName="MlSketchTool",tz.__docgenInfo={description:"Component template",displayName:"MlSketchTool",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:null,description:`Style attribute for the button-style
https://mui.com/system/getting-started/the-sx-prop/`,name:"buttonStyleOverride",required:!1,type:{name:"SxProps | undefined"}},onChange:{defaultValue:null,description:"Callback function that is called each time GeoJson data has changed within MlSketchTool.\nFirst parameter contains all geometries in the `geometries` prop.",name:"onChange",required:!1,type:{name:"((para: SketchStateType) => void) | undefined"}},showInstruction:{defaultValue:null,description:"Determines whether the instruction text should be shown.",name:"showInstruction",required:!1,type:{name:"boolean | undefined"}},onShowInstructionChange:{defaultValue:null,description:'Callback function triggered when the "Show instructions" checkbox is toggled.',name:"onShowInstructionChange",required:!1,type:{name:"((value: boolean) => void) | undefined"}}}}}catch{}const D3=e=>{const t=J.useRef(!1),r=J.useRef(e.pause),n=J.useRef(e.zoom),i=J.useRef(e.pitch),o=J.useRef(1),l=J.useRef(e.speed),a=J.useRef(null),c=e.kmPerStep||.01,h=N0(e.route),g=e.stepDuration||70,v=da({mapId:e.mapId,waitForLayer:e.insertBeforeLayer});J.useEffect(()=>{r.current=e.pause,r.current||I()},[e.pause]),J.useEffect(()=>{v.map&&(n.current=e.zoom,typeof n.current<"u"&&v.map.map.getZoom()!==n.current&&v.map.map.setZoom(n.current))},[v.map,e.zoom]),J.useEffect(()=>{v.map&&(i.current=e.pitch,typeof i.current<"u"&&i.current!==v.map.map.getPitch()&&v.map.map.setPitch(i.current))},[v.map,e.pitch]),J.useEffect(()=>{l.current=e.speed},[e.speed]);const x=J.useCallback(()=>{v.map&&(v.map.map.scrollZoom.disable(),v.map.map.boxZoom.disable(),v.map.map.dragRotate.disable(),v.map.map.dragPan.disable(),v.map.map.keyboard.disable(),v.map.map.doubleClickZoom.disable(),v.map.map.touchZoomRotate.disable())},[v.map]),b=J.useCallback(()=>{v.map&&(v.map.map.scrollZoom.enable(),v.map.map.boxZoom.enable(),v.map.map.dragRotate.enable(),v.map.map.dragPan.enable(),v.map.map.keyboard.enable(),v.map.map.doubleClickZoom.enable(),v.map.map.touchZoomRotate.enable())},[v.map]);function S(){if(!v.map||!e.route)return;const M=vc(e.route);let O;M&&M.length>3&&(O=[[M[0],M[1]],[M[2],M[3]]],v.map.map.fitBounds(O,{padding:100}))}function I(){if(v.map)if(r.current)b();else{x(),typeof n.current<"u"&&v.map.map.getZoom()!==n.current&&v.map.map.setZoom(n.current);const M=tfe(e.route,o.current*c).geometry.coordinates;o.current*c<h?(v.map.map.easeTo({center:M,bearing:L0($c([v.map.map.getCenter().lng,v.map.map.getCenter().lat]),$c(M)),duration:g,essential:!0}),typeof l.current<"u"?o.current=o.current+l.current:o.current++,console.log("PAN MOVE"),setTimeout(()=>{I()},100)):(v.map.map.setPitch(0),S(),b(),console.log("ENABLE CONTROLS"),o.current=1)}}function k(){v.map&&(S(),b(),o.current=1)}return J.useEffect(()=>{!v.map||t.current||(t.current=!0,S())},[v.map]),J.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),{play:I,reset:k}};D3.defaultProps={mapId:void 0,zoom:18};try{D3.displayName="useCameraFollowPath",D3.__docgenInfo={description:"Component template",displayName:"useCameraFollowPath",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},pause:{defaultValue:null,description:"",name:"pause",required:!1,type:{name:"boolean | undefined"}},zoom:{defaultValue:{value:"18"},description:"",name:"zoom",required:!1,type:{name:"number | undefined"}},pitch:{defaultValue:null,description:"",name:"pitch",required:!1,type:{name:"number | undefined"}},speed:{defaultValue:null,description:"",name:"speed",required:!1,type:{name:"number | undefined"}},kmPerStep:{defaultValue:null,description:"",name:"kmPerStep",required:!1,type:{name:"number | undefined"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"any"}},stepDuration:{defaultValue:null,description:"",name:"stepDuration",required:!1,type:{name:"number | undefined"}},timeoutId:{defaultValue:null,description:"",name:"timeoutId",required:!1,type:{name:"number | undefined"}}}}}catch{}const wwe=()=>J.useContext(kP),Rx=e=>(J.useEffect(()=>{if(!(!e.protocol||typeof e.handler!="function"))return X4.addProtocol(e.protocol,e.handler),()=>{X4.removeProtocol(e.protocol)}},[e]),{});Rx.defaultProps={mapId:void 0};try{Rx.displayName="useAddProtocol",Rx.__docgenInfo={description:"Enables the use of custom protocols (basically custom tile load functions) in the maplibre-gl-js library.",displayName:"useAddProtocol",props:{protocol:{defaultValue:null,description:"the protocol string, for example `mbtiles`\nIn this example the handler function is called for all tile requests that start with the string `mbtiles://`",name:"protocol",required:!0,type:{name:"string"}},handler:{defaultValue:null,description:"Custom load tile function that will be called when using a source that starts with a custom url schema.",name:"handler",required:!0,type:{name:"AddProtocolAction"}}}}}catch{}function wU(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function Swe(e,t){var r=wU(e);return function(n,i){return t(r(n),i,e)}}function Cwe(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function Hk(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(h,g){var v,x,b=i(h,function(S,I){if(v)return v(S,I-1);x=S,v=g?Swe(S,g):wU(S)});return b.columns=x,b}function i(h,g){var v={},x={},b=[],S=h.length,I=0,k=0,M,O;function F(){if(I>=S)return x;if(O)return O=!1,v;var q=I,z;if(h.charCodeAt(q)===34){for(var U=q;U++<S;)if(h.charCodeAt(U)===34){if(h.charCodeAt(U+1)!==34)break;++U}return I=U+2,z=h.charCodeAt(U+1),z===13?(O=!0,h.charCodeAt(U+2)===10&&++I):z===10&&(O=!0),h.slice(q+1,U).replace(/""/g,'"')}for(;I<S;){var H=1;if(z=h.charCodeAt(I++),z===10)O=!0;else if(z===13)O=!0,h.charCodeAt(I)===10&&(++I,++H);else if(z!==r)continue;return h.slice(q,I-H)}return h.slice(q)}for(;(M=F())!==x;){for(var D=[];M!==v&&M!==x;)D.push(M),M=F();g&&(D=g(D,k++))==null||b.push(D)}return b}function o(h,g){return g==null&&(g=Cwe(h)),[g.map(c).join(e)].concat(h.map(function(v){return g.map(function(x){return c(v[x])}).join(e)})).join(`
`)}function l(h){return h.map(a).join(`
`)}function a(h){return h.map(c).join(e)}function c(h){return h==null?"":t.test(h+="")?'"'+h.replace(/\"/g,'""')+'"':h}return{parse:n,parseRows:i,format:o,formatRows:l}}var sw=Hk(","),Ewe=sw.parse,Twe=sw.parseRows,Pwe=sw.format,Iwe=sw.formatRows,lw=Hk("	"),kwe=lw.parse,Awe=lw.parseRows,Mwe=lw.format,Lwe=lw.formatRows;const Rwe=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Pwe,csvFormatRows:Iwe,csvParse:Ewe,csvParseRows:Twe,dsvFormat:Hk,tsvFormat:Mwe,tsvFormatRows:Lwe,tsvParse:kwe,tsvParseRows:Awe},Symbol.toStringTag,{value:"Module"})),Dwe=e9(Rwe);var gp={exports:{}},rz;function Nwe(){if(rz)return gp.exports;rz=1,gp.exports=e,gp.exports.pair=o,gp.exports.format=r,gp.exports.formatPair=t,gp.exports.coordToDMS=n;function e(a,c){var h=i(a,c);return h===null?null:h.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,c){var h=n(a,c);return h.whole+" "+(h.minutes?h.minutes+"' ":"")+(h.seconds?h.seconds+'" ':"")+h.dir}function n(a,c){var h={lat:["N","S"],lon:["E","W"]}[c]||"",g=h[a>=0?0:1],v=Math.abs(a),x=Math.floor(v),b=v-x,S=b*60,I=Math.floor(S),k=Math.floor((S-I)*60);return{whole:x,minutes:I,seconds:k,dir:g}}function i(a,c){if(c||(c="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var h=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,g=a.match(h);if(!g)return null;var v=g[0],x;if(g[1]&&g[5]?(x=g[1],v=v.slice(0,-1)):x=g[1]||g[5],x&&c.indexOf(x)===-1)return null;var b=g[2]?parseFloat(g[2]):0,S=g[3]?parseFloat(g[3])/60:0,I=g[4]?parseFloat(g[4])/3600:0,k=b<0?-1:1;return(x==="S"||x==="W")&&(k*=-1),{val:(Math.abs(b)+S+I)*k,dim:x,matched:v,remain:a.slice(v.length)}}function o(a,c){a=a.trim();var h=i(a,c);if(!h)return null;a=h.remain.trim();var g=i(a,c);return!g||g.remain?null:h.dim?l(h.val,g.val,h.dim):[h.val,g.val]}function l(a,c,h){if(h==="N"||h==="S")return[a,c];if(h==="W"||h==="E")return[c,a]}return gp.exports}var S4,nz;function Owe(){if(nz)return S4;nz=1;var e=Dwe,t=Nwe(),r=/(Lat)(itude)?/gi,n=/(L)(on|ng)(gitude)?/i;function i(k,M){var O,F,D;for(var q in k)F=q.match(M),F&&(!O||F[0].length/q.length>D)&&(D=F[0].length/q.length,O=q);return O}function o(k){return i(k,r)}function l(k){return i(k,n)}function a(k){return!!k.match(r)}function c(k){return!!k.match(n)}function h(k){return typeof k=="object"?Object.keys(k).length:0}function g(k){var M=[",",";","	","|"],O=[];return M.forEach(function(F){var D=e.dsvFormat(F).parse(k);if(D.length>=1){for(var q=h(D[0]),z=0;z<D.length;z++)if(h(D[z])!==q)return;O.push({delimiter:F,arity:Object.keys(D[0]).length})}}),O.length?O.sort(function(F,D){return D.arity-F.arity})[0].delimiter:null}function v(k){return delete k.columns,k}function x(k){var M=g(k);return M?v(e.dsvFormat(M).parse(k)):null}function b(k,M,O){O||(O=M,M={}),M.delimiter=M.delimiter||",";var F=M.latfield||"",D=M.lonfield||"",q=M.crs||"",z=[],U={type:"FeatureCollection",features:z};if(q!==""&&(U.crs={type:"name",properties:{name:q}}),M.delimiter==="auto"&&typeof k=="string"&&(M.delimiter=g(k),!M.delimiter)){O({type:"Error",message:"Could not autodetect delimiter"});return}var H=M.numericFields?M.numericFields.split(","):null,X=typeof k=="string"?e.dsvFormat(M.delimiter).parse(k,function(me){if(H)for(var Se in me)H.includes(Se)&&(me[Se]=+me[Se]);return me}):k;if(!X.length){O(null,U);return}var ie=[],ee;F||(F=o(X[0])),D||(D=l(X[0]));var G=!F||!D;if(G){for(ee=0;ee<X.length;ee++)z.push({type:"Feature",properties:X[ee],geometry:null});O(ie.length?ie:null,U);return}for(ee=0;ee<X.length;ee++)if(X[ee][D]!==void 0&&X[ee][F]!==void 0){var ne=X[ee][D],ae=X[ee][F],le,fe,ke;ke=t(ne,"EW"),ke&&(ne=ke),ke=t(ae,"NS"),ke&&(ae=ke),le=parseFloat(ne),fe=parseFloat(ae),isNaN(le)||isNaN(fe)?ie.push({message:"A row contained an invalid value for latitude or longitude",row:X[ee],index:ee}):(M.includeLatLon||(delete X[ee][D],delete X[ee][F]),z.push({type:"Feature",properties:X[ee],geometry:{type:"Point",coordinates:[parseFloat(le),parseFloat(fe)]}}))}O(ie.length?ie:null,U)}function S(k){for(var M=k.features,O={type:"Feature",geometry:{type:"LineString",coordinates:[]}},F=0;F<M.length;F++)O.geometry.coordinates.push(M[F].geometry.coordinates);return O.properties=M.reduce(function(D,q){for(var z in q.properties)D[z]||(D[z]=[]),D[z].push(q.properties[z]);return D},{}),{type:"FeatureCollection",features:[O]}}function I(k){for(var M=k.features,O={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},F=0;F<M.length;F++)O.geometry.coordinates[0].push(M[F].geometry.coordinates);return O.properties=M.reduce(function(D,q){for(var z in q.properties)D[z]||(D[z]=[]),D[z].push(q.properties[z]);return D},{}),{type:"FeatureCollection",features:[O]}}return S4={isLon:c,isLat:a,guessLatHeader:o,guessLonHeader:l,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:x,csv2geojson:b,toLine:S,toPolygon:I},S4}var Fwe=Owe();function uw(e){const t=e.split("?"),r=t[0].split("://"),n=r[0],l=(r.length>2?r[1]+"://"+r[2]:r[1]).split("/").join("/"),a=decodeURI(t[1]),c=Object.fromEntries(new URLSearchParams(a));return{protocolId:n,filename:l,options:c}}async function cw(e){try{return await(await fetch(e)).text()}catch(t){return console.error("File could not be loaded: ",t),t}}async function Bwe(e,t){return await new Promise((n,i)=>{const o=t||{};e.substring(e.length-3)==="tsv"&&(t.delimiter="	"),cw(e).then(a=>{Fwe.csv2geojson(a,o,(c,h)=>{c?i(c):n(h)})})})}const zwe=async e=>{const t=uw(e.url),r=await Bwe(t.filename,t.options);if(r!==void 0)return{data:r};throw new Error("CSV not found "+t.filename)};var Cu={},iz;function T1(){if(iz)return Cu;iz=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.purgeProps=e,Cu.first=t,Cu.last=r,Cu.coordsToKey=n,Cu.addToMap=i,Cu.removeFromMap=o,Cu.getFirstFromMap=l,Cu.isRing=a,Cu.ringDirection=c,Cu.pointInsidePolygon=h,Cu.strArrayArrayToFloat=g,Cu.strArrayToFloat=v;function e(x,b){if(x){const S=Object.assign({},x);if(b)for(const I of b)delete S[I];return S}return{}}function t(x){return x[0]}function r(x){return x[x.length-1]}function n(x){return x.join(",")}function i(x,b,S){const I=x[b];I?I.push(S):x[b]=[S]}function o(x,b,S){const I=x[b];let k=-1;I&&(k=I.indexOf(S)),k>=0&&I.splice(k,1)}function l(x,b){const S=x[b];return S&&S.length>0?S[0]:null}function a(x){return x.length>3&&n(t(x))===n(r(x))}function c(x,b,S){b=b||0,S=S||1;const I=x.reduce((X,ie,ee)=>x[X][b||0]>ie[b||0]?X:ee,0),k=I<=0?x.length-2:I-1,M=I>=x.length-1?1:I+1,O=x[k][b],F=x[I][b],D=x[M][b],q=x[k][S],z=x[I][S],U=x[M][S];return(F-O)*(U-q)-(D-O)*(z-q)<0?"clockwise":"counterclockwise"}function h(x,b,S,I){S=S||0,I=I||1;let k=!1;for(let M=0,O=b.length-1;M<b.length;O=M++)(b[M][S]<=x[S]&&x[S]<b[O][S]||b[O][S]<=x[S]&&x[S]<b[M][S])&&x[I]<(b[O][I]-b[M][I])*(x[S]-b[M][S])/(b[O][S]-b[M][S])+b[M][I]&&(k=!k);return k}function g(x){return x.map(v)}function v(x){return x.map(parseFloat)}return Cu}var vv={},az;function jwe(){if(az)return vv;az=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.XmlParser=void 0;function e(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function t(i){const o=/^(.+?)\[(.+?)\]>$/g.exec(i);return o?{evt:o[1]+">",exp:o[2]}:{evt:i}}function r(i){const o="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",o)}class n{constructor(o){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,o&&(this.queryParent=!!o.queryParent,this.progressive=o.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(o,l,a){a=a?a+".":"";const c=/<([^ >\/]+)(.*?)>/mg,h=[];let g=c.exec(o);for(;g;){const v=g[1],x={$tag:v},b=a+v,S=g[2].trim();let I=!1;(S.endsWith("/")||v.startsWith("?")||v.startsWith("!"))&&(I=!0);const k=/([^ ]+?)="(.+?)"/g,M=/([^ ]+?)='(.+?)'/g;let O=k.exec(S),F=!1;for(;O;)F=!0,x[O[1]]=O[2],O=k.exec(S);if(!F)for(O=M.exec(S);O;)F=!0,x[O[1]]=O[2],O=M.exec(S);if(!F&&S!==""&&(x.text=S),this.progressive&&this.emit(`<${b}>`,x,l),!I){const D=new RegExp(`([^]+?)</${v}>`,"g");D.lastIndex=c.lastIndex;const q=D.exec(o);if(q&&q[1]){c.lastIndex=D.lastIndex;const z=this.parse(q[1],x,b);z.length>0?x.$innerNodes=z:x.$innerText=q[1]}}this.queryParent&&l&&this.parentMap.set(x,l),this.progressive&&this.emit(`</${b}>`,x,l),h.push(x),g=c.exec(o)}return h}getParent(o){return this.queryParent?this.parentMap.get(o):null}addListener(o,l){if(e(o)){const a=t(o);a.exp&&(l.condition=r(a.exp)),o=a.evt}this.$addListener(o,l)}removeListener(o,l){e(o)&&(o=t(o).evt),this.$removeListener(o,l)}on(o,l){this.addListener(o,l)}off(o,l){this.removeListener(o,l)}$addListener(o,l){const a=this.evtListeners[o];a?a.push(l):this.evtListeners[o]=[l]}$removeListener(o,l){const a=this.evtListeners[o];let c=-1;a&&(c=a.indexOf(l)),c>=0&&a.splice(c,1)}emit(o,...l){const a=this.evtListeners[o];if(a)for(const c of a)c.condition?c.condition.apply(null,l)===!0&&c.apply(null,l):c.apply(null,l)}}return vv.XmlParser=n,vv}var bv={},_v={},oz;function Wk(){if(oz)return _v;oz=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.OsmObject=void 0;class e{constructor(r,n,i){this.type=r,this.id=n,this.refElems=i,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,i&&i.add(this.getCompositeId(),this)}addTags(r){this.tags=Object.assign(this.tags,r),this.hasTag=!0}addTag(r,n){this.tags[r]=n,this.hasTag=!0}addProp(r,n){this.props[r]=n}addProps(r){this.props=Object.assign(this.props,r)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}}return _v.OsmObject=e,_v}var sz;function SU(){if(sz)return bv;sz=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.Node=void 0;const e=Wk(),t=T1();class r extends e.OsmObject{constructor(i,o){super("node",i,o)}setLatLng(i){this.latLng=i}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,t.strArrayToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}return bv.Node=r,bv}var yp={},xv={},lz;function CU(){if(lz)return xv;lz=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.LateBinder=void 0;class e{constructor(r,n,i,o){this.container=r,this.valueFunc=n,this.ctx=i,this.args=o}bind(){const r=this.valueFunc.apply(this.ctx,this.args),n=this.container.indexOf(this);if(n<0)return;const i=[n,1];r&&i.push(r),Array.prototype.splice.apply(this.container,i)}}return xv.LateBinder=e,xv}const qwe={},$we={whitelist:["services","rest_area","escape","elevator"]},Vwe={blacklist:["coastline","cliff","ridge","arete","tree_row"]},Uwe={},Gwe={whitelist:["riverbank","dock","boatyard","dam"]},Hwe={},Wwe={},Xwe={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},Ywe={whitelist:["station","turntable","roundhouse","platform"]},Zwe={},Kwe={},Jwe={blacklist:["cutline","embankment","pipeline"]},Qwe={whitelist:["plant","substation","generator","transformer"]},eSe={},tSe={},rSe={blacklist:["taxiway"]},nSe={},iSe={},aSe={},oSe={},sSe={},lSe={},uSe={},cSe={},dSe={},fSe={building:qwe,highway:$we,natural:Vwe,landuse:Uwe,waterway:Gwe,amenity:Hwe,leisure:Wwe,barrier:Xwe,railway:Ywe,area:Zwe,boundary:Kwe,man_made:Jwe,power:Qwe,place:eSe,shop:tSe,aeroway:rSe,tourism:nSe,historic:iSe,public_transport:aSe,office:oSe,"building:part":{},military:sSe,ruins:lSe,"area:highway":{},craft:uSe,golf:cSe,indoor:dSe};var uz;function EU(){if(uz)return yp;uz=1;var e=yp&&yp.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(yp,"__esModule",{value:!0}),yp.Way=void 0;const t=Wk(),r=CU(),n=T1(),i=e(fSe);class o extends t.OsmObject{constructor(a,c){super("way",a,c),this.latLngArray=[],this.isPolygon=!1}addLatLng(a){this.latLngArray.push(a)}setLatLngArray(a){this.latLngArray=a}addNodeRef(a){const c=new r.LateBinder(this.latLngArray,h=>{const g=this.refElems.get(`node/${h}`);if(g)return g.refCount++,g.getLatLng()},this,[a]);this.latLngArray.push(c),this.refElems.addBinder(c)}addTags(a){super.addTags(a);for(const[c,h]of Object.entries(a))this.analyzeTag(c,h)}addTag(a,c){super.addTag(a,c),this.analyzeTag(a,c)}toCoordsArray(){return this.latLngArray.map(a=>[a.lon,a.lat])}toFeatureArray(){let a=this.toCoordsArray();if(a.length>1){const c=(0,n.strArrayArrayToFloat)(a),h={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:c}};return this.isPolygon&&(0,n.isRing)(c)?((0,n.ringDirection)(c)!=="counterclockwise"&&c.reverse(),h.geometry={type:"Polygon",coordinates:[c]},[h]):[h]}return[]}analyzeTag(a,c){const h=i.default[a];h&&(this.isPolygon=!0,h.whitelist?this.isPolygon=h.whitelist.indexOf(c)>=0:h.blacklist&&(this.isPolygon=!(h.blacklist.indexOf(c)>=0)))}}return yp.Way=o,yp}var wv={},Sv={},cz;function hSe(){if(cz)return Sv;cz=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.WayCollection=void 0;const e=T1();class t extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(n){const i=n.toCoordsArray();i.length>0&&(this.push(i),(0,e.addToMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.addToMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i))}mergeWays(){const n=[];let i=this.shift();for(;i;){(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i);let o=i,l;do{let a=this.getNextWay(o);l=a.next;let c=a.mergeType;if(l)switch(this.splice(this.indexOf(l),1),(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(l)),l),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(l)),l),c){case 0:o=o.concat(l.slice(1));break;case 1:l.reverse(),o=o.concat(l.slice(1));break;case 2:o.reverse(),o=o.concat(l.slice(1));break;case 3:o=l.concat(o.slice(1));break}}while(l);n.push((0,e.strArrayArrayToFloat)(o)),i=this.shift()}return n}getNextWay(n){const i=(0,e.coordsToKey)((0,e.last)(n)),o=(0,e.coordsToKey)((0,e.first)(n));let l=this.length>0?this[0]:null;if(l){const a=(0,e.coordsToKey)((0,e.first)(l)),c=(0,e.coordsToKey)((0,e.last)(l));if(i===a)return{next:l,mergeType:0};if(i===c)return{next:l,mergeType:1};if(o===a)return{next:l,mergeType:2};if(o===c)return{next:l,mergeType:3}}return l=(0,e.getFirstFromMap)(this.firstMap,i),l?{next:l,mergeType:0}:(l=(0,e.getFirstFromMap)(this.lastMap,i),{next:l,mergeType:1})}toRings(n){const i=this.mergeWays(),o=[];let l=i.shift();for(;l;)(0,e.isRing)(l)&&((0,e.ringDirection)(l)!==n&&l.reverse(),o.push(l)),l=i.shift();return o}}return Sv.WayCollection=t,Sv}var dz;function pSe(){if(dz)return wv;dz=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.Relation=void 0;const e=Wk(),t=EU(),r=SU(),n=hSe(),i=CU(),o=T1();class l extends e.OsmObject{constructor(c,h){super("relation",c,h),this.relations=[],this.nodes=[],this.bounds=void 0,this.ways=[],this.roles=[]}setBounds(c){this.bounds=c}addMember(c){switch(c.type){case"relation":let h=new i.LateBinder(this.relations,v=>{const x=this.refElems.get(`relation/${v}`);if(x)return x.refCount++,x},this,[c.ref]);this.relations.push(h),this.refElems.addBinder(h);break;case"way":if(c.role||(c.role=""),c.geometry){const v=new t.Way(c.ref,this.refElems);v.setLatLngArray(c.geometry),v.refCount++,this.ways.push(v),this.roles.push(c.role)}else if(c.nodes){const v=new t.Way(c.ref,this.refElems);for(const x of c.nodes)v.addNodeRef(x);v.refCount++,this.ways.push(v),this.roles.push(c.role)}else{let v=new i.LateBinder(this.ways,x=>{const b=this.refElems.get(`way/${x}`);if(b)return b.refCount++,b},this,[c.ref]);this.ways.push(v),this.roles.push(c.role),this.refElems.addBinder(v)}break;case"node":let g=null;if(c.lat&&c.lon){g=new r.Node(c.ref,this.refElems),g.setLatLng({lon:c.lon,lat:c.lat}),c.tags&&g.addTags(c.tags);for(const[v,x]of Object.entries(c))["id","type","lat","lon"].indexOf(v)<0&&g.addProp(v,x);g.refCount++,this.nodes.push(g)}else{let v=new i.LateBinder(this.nodes,x=>{const b=this.refElems.get(`node/${x}`);if(b)return b.refCount++,b},this,[c.ref]);this.nodes.push(v),this.refElems.addBinder(v)}break}}constructStringGeometry(c){const h=c?c.mergeWays():[];return h.length===0?null:{type:"MultiLineString",coordinates:h}}constructPolygonGeometry(c,h){const g=c?c.toRings("counterclockwise"):[],v=h?h.toRings("clockwise"):[];if(g.length>0){const x=[];let b;for(b of g)x.push([b]);for(b=v.shift();b;){for(const S in g)if((0,o.pointInsidePolygon)((0,o.first)(b),g[S])){x[S].push(b);break}b=v.shift()}return x.length===1?{type:"Polygon",coordinates:x[0]}:{type:"MultiPolygon",coordinates:x}}return null}toFeatureArray(){const c=[],h=[];let g=[];for(const x of this.relations)if(x)for(let b=0;b<x.ways.length;b++){const S=x.ways[b];this.ways.push(S),this.roles.push(x.roles[b])}let v={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete v.bbox,this.roles.some(x=>x==="outer")){const x=new n.WayCollection,b=new n.WayCollection;for(let k=0;k<this.ways.length;k++){const M=this.ways[k],O=this.roles[k];O==="outer"?x.addWay(M):O==="inner"&&b.addWay(M)}let S=Object.assign({},v),I=this.constructPolygonGeometry(x,b);I&&(S.geometry=I,c.push(S))}else{const x=new n.WayCollection;for(let S of this.ways)x.addWay(S);let b=this.constructStringGeometry(x);if(b){let S=Object.assign({},v);S.geometry=b,h.push(S)}}for(let x of this.nodes)g=g.concat(x.toFeatureArray());return[...c,...h,...g]}}return wv.Relation=l,wv}var Cv={},fz;function mSe(){if(fz)return Cv;fz=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.RefElements=void 0;class e extends Map{constructor(){super(),this.binders=[]}add(r,n){this.set(r,n)}addBinder(r){this.binders.push(r)}bindAll(){this.binders.forEach(r=>r.bind())}}return Cv.RefElements=e,Cv}var C4,hz;function gSe(){if(hz)return C4;hz=1;const e=T1(),t=jwe(),r=SU(),n=EU(),i=pSe(),o=mSe();function l(v){if(!v)return{completeFeature:!1,renderTagged:!1,excludeWay:!0};let x=v.excludeWay===void 0||v.excludeWay,b=!!v.completeFeature,S=!!v.renderTagged;return{completeFeature:b,renderTagged:S,excludeWay:x}}function a(v){return v.elements?"json":v.indexOf("<osm")>=0?"xml":v.trim().startsWith("{")?"json-raw":"invalid"}function c(v,x){for(const b of v.elements)switch(b.type){case"node":const S=new r.Node(b.id,x);b.tags&&S.addTags(b.tags),S.addProps((0,e.purgeProps)(b,["id","type","tags","lat","lon"])),S.setLatLng(b);break;case"way":const I=new n.Way(b.id,x);if(b.tags&&I.addTags(b.tags),I.addProps((0,e.purgeProps)(b,["id","type","tags","nodes","geometry"])),b.geometry)I.setLatLngArray(b.geometry);else if(b.nodes)for(const M of b.nodes)I.addNodeRef(M);break;case"relation":const k=new i.Relation(b.id,x);if(b.bounds&&k.setBounds([parseFloat(b.bounds.minlon),parseFloat(b.bounds.minlat),parseFloat(b.bounds.maxlon),parseFloat(b.bounds.maxlat)]),b.tags&&k.addTags(b.tags),k.addProps((0,e.purgeProps)(b,["id","type","tags","bounds","members"])),b.members)for(const M of b.members)k.addMember(M)}}function h(v,x){const b=new t.XmlParser({progressive:!0});b.on("</osm.node>",S=>{const I=new r.Node(S.id,x);for(const[k,M]of Object.entries(S))!k.startsWith("$")&&["id","lon","lat"].indexOf(k)<0&&I.addProp(k,M);if(I.setLatLng(S),S.$innerNodes)for(const k of S.$innerNodes)k.$tag==="tag"&&I.addTag(k.k,k.v)}),b.on("</osm.way>",S=>{const I=new n.Way(S.id,x);for(const[k,M]of Object.entries(S))!k.startsWith("$")&&["id"].indexOf(k)<0&&I.addProp(k,M);if(S.$innerNodes)for(const k of S.$innerNodes)k.$tag==="nd"?k.lon&&k.lat?I.addLatLng(k):k.ref&&I.addNodeRef(k.ref):k.$tag==="tag"&&I.addTag(k.k,k.v)}),b.on("<osm.relation>",S=>new i.Relation(S.id,x)),b.on("</osm.relation.member>",(S,I)=>{const k=x.get(`relation/${I?.id}`),M={type:S.type,role:S.role?S.role:"",ref:S.ref};if(S.lat&&S.lon){M.lat=S.lat,M.lon=S.lon,M.tags={};for(const[O,F]of Object.entries(S))!O.startsWith("$")&&["type","lat","lon"].indexOf(O)<0&&(M[O]=F)}if(S.$innerNodes){const O=[],F=[];for(const D of S.$innerNodes)D.lat&&D.lon?O.push(D):D.ref&&F.push(D.ref);O.length>0?M.geometry=O:F.length>0&&(M.nodes=F)}k.addMember(M)}),b.on("</osm.relation.bounds>",(S,I)=>{x.get(`relation/${I?.id}`).setBounds([parseFloat(S.minlon),parseFloat(S.minlat),parseFloat(S.maxlon),parseFloat(S.maxlat)])}),b.on("</osm.relation.tag>",(S,I)=>{x.get(`relation/${I?.id}`).addTag(S.k,S.v)}),b.parse(v)}function g(v,x){let{completeFeature:b,renderTagged:S,excludeWay:I}=l(x),k=a(v);const M=new o.RefElements;let O=[];k==="json-raw"&&(v=JSON.parse(v),v.elements?k="json":k="invalid"),k==="json"?c(v,M):k==="xml"&&h(v,M),M.bindAll();for(const F of M.values()){if(F.refCount>0&&(!F.hasTag||!S||F instanceof n.Way&&I))continue;const D=F.toFeatureArray();if(F instanceof i.Relation&&!b&&D.length>0)return D[0].geometry;O=O.concat(D)}return{type:"FeatureCollection",features:O}}return C4=g,C4}var ySe=gSe();const vSe=tf(ySe);async function bSe(e){const t=e.options||{};return await new Promise((n,i)=>{cw(e.filename).then(o=>{const l=vSe(o,t);l?n(l):i("Conversion failed")})})}const _Se=async e=>{const t=uw(e.url),r=await bSe(t);if(r!==void 0)return{data:r};throw new Error("OSM File not found "+t.filename)};function xSe(e){const t=[];return e.features.forEach(r=>{r.features?r.features.forEach(n=>{t.push({type:n.type,geometry:n.geometry,properties:n.properties})}):t.push({type:r.type,geometry:r.geometry,properties:r.properties})}),t}async function wSe(e){return await new Promise(r=>{let n={type:"Topology",objects:{key:""},arcs:[]};cw(e.filename).then(i=>{try{n=JSON.parse(i)}catch(l){throw console.error("Error converting topojson",l),"Invalid TopoJson"}let o={type:"FeatureCollection",features:[]};if(n.type==="Topology"&&n.objects!==void 0){const l=n.objects;Object.keys(n.objects).map(a=>{l?.[a].type==="GeometryCollection"?l?.[a].geometries?.forEach(c=>c.properties={fromObject:a,...c.properties}):l?.[a]&&l?.[a]?.type!=="GeometryCollection"&&(l[a].properties={fromObject:a,...l?.[a].properties})}),o={type:"FeatureCollection",features:Object.keys(n.objects).map(a=>The(n,a))},o.features=xSe(o)}r(o)})})}const SSe=async e=>{const t=uw(e.url),r=await wSe(t);if(r!==void 0)return{data:r};throw new Error("Topojson not found "+t.filename)};function ws(e,t){return Array.from(e.getElementsByTagName(t))}function Dx(e){return e[0]==="#"?e:`#${e}`}function CSe(e,t,r){return Array.from(e.getElementsByTagNameNS(r,t))}function es(e){return e?.normalize(),e?.textContent||""}function Io(e,t,r){const n=e.getElementsByTagName(t),i=n.length?n[0]:null;return i&&r&&r(i),i}function _c(e,t,r){const n={};if(!e)return n;const i=e.getElementsByTagName(t),o=i.length?i[0]:null;return o&&r?r(o,n):n}function Kp(e,t,r){const n=es(Io(e,t));return n&&r?r(n)||{}:{}}function pz(e,t,r){const n=Number.parseFloat(es(Io(e,t)));if(!Number.isNaN(n))return n&&r?r(n)||{}:{}}function ql(e,t,r){const n=Number.parseFloat(es(Io(e,t)));if(!Number.isNaN(n))return r&&r(n),n}function Jp(e,t){const r={};for(const n of t)Kp(e,n,i=>{r[n]=i});return r}function P1(e){return e?.nodeType===1}function TU(e){let t=[];if(e===null)return t;for(const r of Array.from(e.childNodes)){if(!P1(r))continue;const n=ESe(r.nodeName);if(n==="gpxtpx:TrackPointExtension")t=t.concat(TU(r));else{const i=es(r);t.push([n,TSe(i)])}}return t}function ESe(e){return["heart","gpxtpx:hr","hr"].includes(e)?"heart":e}function TSe(e){const t=Number.parseFloat(e);return Number.isNaN(t)?e:t}function PU(e){const t=[Number.parseFloat(e.getAttribute("lon")||""),Number.parseFloat(e.getAttribute("lat")||"")];if(Number.isNaN(t[0])||Number.isNaN(t[1]))return null;ql(e,"ele",n=>{t.push(n)});const r=Io(e,"time");return{coordinates:t,time:r?es(r):null,extendedValues:TU(Io(e,"extensions"))}}function IU(e){return _c(e,"line",t=>Object.assign({},Kp(t,"color",n=>({stroke:`#${n}`})),pz(t,"opacity",n=>({"stroke-opacity":n})),pz(t,"width",n=>({"stroke-width":n*96/25.4}))))}function Xk(e,t){const r=Jp(t,["name","cmt","desc","type","time","keywords"]);for(const[i,o]of e)for(const l of Array.from(t.getElementsByTagNameNS(o,"*")))r[l.tagName.replace(":","_")]=es(l)?.trim();const n=ws(t,"link");return n.length&&(r.links=n.map(i=>Object.assign({href:i.getAttribute("href")},Jp(i,["text","type"])))),r}function kU(e,t){const r=ws(e,t),n=[],i=[],o={};for(let l=0;l<r.length;l++){const a=PU(r[l]);if(a){n.push(a.coordinates),a.time&&i.push(a.time);for(const[c,h]of a.extendedValues){const g=c==="heart"?c:`${c.replace("gpxtpx:","")}s`;o[g]||(o[g]=Array(r.length).fill(null)),o[g][l]=h}}}if(!(n.length<2))return{line:n,times:i,extendedValues:o}}function PSe(e,t){const r=kU(t,"rtept");if(r)return{type:"Feature",properties:Object.assign({_gpxType:"rte"},Xk(e,t),IU(Io(t,"extensions"))),geometry:{type:"LineString",coordinates:r.line}}}function ISe(e,t){const r=ws(t,"trkseg"),n=[],i=[],o=[];for(const c of r){const h=kU(c,"trkpt");h&&(o.push(h),h.times?.length&&i.push(h.times))}if(o.length===0)return null;const l=o.length>1,a=Object.assign({_gpxType:"trk"},Xk(e,t),IU(Io(t,"extensions")),i.length?{coordinateProperties:{times:l?i:i[0]}}:{});for(let c=0;c<o.length;c++){const h=o[c];n.push(h.line),a.coordinateProperties||(a.coordinateProperties={});const g=a.coordinateProperties;for(const[v,x]of Object.entries(h.extendedValues))l?(g[v]||(g[v]=o.map(b=>new Array(b.line.length).fill(null))),g[v][c]=x):g[v]=x}return{type:"Feature",properties:a,geometry:l?{type:"MultiLineString",coordinates:n}:{type:"LineString",coordinates:n[0]}}}function kSe(e,t){const r=Object.assign(Xk(e,t),Jp(t,["sym"])),n=PU(t);return n?{type:"Feature",properties:r,geometry:{type:"Point",coordinates:n.coordinates}}:null}function*AU(e){const t=e,r="gpxx",n="http://www.garmin.com/xmlschemas/GpxExtensions/v3",i=[[r,n]],o=t.getElementsByTagName("gpx")[0]?.attributes;if(o)for(const l of Array.from(o))l.name?.startsWith("xmlns:")&&l.value!==n&&i.push([l.name,l.value]);for(const l of ws(t,"trk")){const a=ISe(i,l);a&&(yield a)}for(const l of ws(t,"rte")){const a=PSe(i,l);a&&(yield a)}for(const l of ws(t,"wpt")){const a=kSe(i,l);a&&(yield a)}}function ASe(e){return{type:"FeatureCollection",features:Array.from(AU(e))}}const MSe="http://www.garmin.com/xmlschemas/ActivityExtension/v2",LSe=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],RSe=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]];function MU(e,t){const r=[];for(const[n,i]of t){let o=Io(e,n);if(!o){const a=e.getElementsByTagNameNS(MSe,n);a.length&&(o=a[0])}const l=Number.parseFloat(es(o));Number.isNaN(l)||r.push([i,l])}return r}function DSe(e){const t=[ql(e,"LongitudeDegrees"),ql(e,"LatitudeDegrees")];if(t[0]===void 0||Number.isNaN(t[0])||t[1]===void 0||Number.isNaN(t[1]))return null;const r=Io(e,"HeartRateBpm"),n=es(Io(e,"Time"));return Io(e,"AltitudeMeters",i=>{const o=Number.parseFloat(es(i));Number.isNaN(o)||t.push(o)}),{coordinates:t,time:n||null,heartRate:r?Number.parseFloat(es(r)):null,extensions:MU(e,LSe)}}function NSe(e){const t=ws(e,"Trackpoint"),r=[],n=[],i=[];if(t.length<2)return null;const o={},l={extendedProperties:o};for(let a=0;a<t.length;a++){const c=DSe(t[a]);if(c===null)continue;r.push(c.coordinates);const{time:h,heartRate:g,extensions:v}=c;h&&n.push(h),g&&i.push(g);for(const[x,b]of v)o[x]||(o[x]=Array(t.length).fill(null)),o[x][a]=b}return r.length<2?null:Object.assign(l,{line:r,times:n,heartRates:i})}function mz(e){const t=ws(e,"Track"),r=[],n=[],i=[],o=[];let l;const a=Object.assign(Object.fromEntries(MU(e,RSe)),_c(e,"Name",c=>({name:es(c)})));for(const c of t)l=NSe(c),l&&(r.push(l.line),l.times.length&&n.push(l.times),l.heartRates.length&&i.push(l.heartRates),o.push(l.extendedProperties));for(let c=0;c<o.length;c++){const h=o[c];for(const g in h)t.length===1?l&&(a[g]=l.extendedProperties[g]):(a[g]||(a[g]=r.map(v=>Array(v.length).fill(null))),a[g][c]=h[g])}return r.length===0?null:((n.length||i.length)&&(a.coordinateProperties=Object.assign(n.length?{times:r.length===1?n[0]:n}:{},i.length?{heart:r.length===1?i[0]:i}:{})),{type:"Feature",properties:a,geometry:r.length===1?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}})}function*LU(e){for(const t of ws(e,"Lap")){const r=mz(t);r&&(yield r)}for(const t of ws(e,"Courses")){const r=mz(t);r&&(yield r)}}function OSe(e){return{type:"FeatureCollection",features:Array.from(LU(e))}}function RU(e,t){const r={},n=t==="stroke"||t==="fill"?t:`${t}-color`;return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?r[n]=`#${e}`:e.length===8&&(r[`${t}-opacity`]=Number.parseInt(e.substring(0,2),16)/255,r[n]=`#${e.substring(6,8)}${e.substring(4,6)}${e.substring(2,4)}`),r}function Nx(e,t,r){const n={};return ql(e,t,i=>{n[r]=i}),n}function Yk(e,t){return _c(e,"color",r=>RU(es(r),t))}function Zk(e){return _c(e,"Icon",(t,r)=>(Kp(t,"href",n=>{r.icon=n}),r))}function FSe(e){return _c(e,"IconStyle",t=>Object.assign(Yk(t,"icon"),Nx(t,"scale","icon-scale"),Nx(t,"heading","icon-heading"),_c(t,"hotSpot",r=>{const n=Number.parseFloat(r.getAttribute("x")||""),i=Number.parseFloat(r.getAttribute("y")||""),o=r.getAttribute("xunits")||"",l=r.getAttribute("yunits")||"";return!Number.isNaN(n)&&!Number.isNaN(i)?{"icon-offset":[n,i],"icon-offset-units":[o,l]}:{}}),Zk(t)))}function BSe(e){return _c(e,"LabelStyle",t=>Object.assign(Yk(t,"label"),Nx(t,"scale","label-scale")))}function zSe(e){return _c(e,"LineStyle",t=>Object.assign(Yk(t,"stroke"),Nx(t,"width","stroke-width")))}function jSe(e){return _c(e,"PolyStyle",(t,r)=>Object.assign(r,_c(t,"color",n=>RU(es(n),"fill")),Kp(t,"fill",n=>{if(n==="0")return{"fill-opacity":0}}),Kp(t,"outline",n=>{if(n==="0")return{"stroke-opacity":0}})))}function dw(e){return Object.assign({},jSe(e),zSe(e),BSe(e),FSe(e))}const qSe=/\s*/g,$Se=/^\s*|\s*$/g,VSe=/\s+/;function DU(e){return e.replace(qSe,"").split(",").map(Number.parseFloat).filter(t=>!Number.isNaN(t)).slice(0,3)}function N3(e){return e.replace($Se,"").split(VSe).map(DU).filter(t=>t.length>=2)}function USe(e){let t=ws(e,"coord");t.length===0&&(t=CSe(e,"coord","*"));const r=t.map(n=>es(n).split(" ").map(Number.parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:ws(e,"when").map(n=>es(n))}}function NU(e){if(e.length===0)return e;const t=e[0],r=e[e.length-1];let n=!0;for(let i=0;i<Math.max(t.length,r.length);i++)if(t[i]!==r[i]){n=!1;break}return n?e:e.concat([e[0]])}function S_(e){return es(Io(e,"coordinates"))}function OU(e){let t=[],r=[];for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes.item(n);if(P1(i))switch(i.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const o=OU(i);t=t.concat(o.geometries),r=r.concat(o.coordTimes);break}case"Point":{const o=DU(S_(i));o.length>=2&&t.push({type:"Point",coordinates:o});break}case"LinearRing":case"LineString":{const o=N3(S_(i));o.length>=2&&t.push({type:"LineString",coordinates:o});break}case"Polygon":{const o=[];for(const l of ws(i,"LinearRing")){const a=NU(N3(S_(l)));a.length>=4&&o.push(a)}o.length&&t.push({type:"Polygon",coordinates:o});break}case"Track":case"gx:Track":{const o=USe(i);if(!o)break;const{times:l,geometry:a}=o;t.push(a),l.length&&r.push(l);break}}}return{geometries:t,coordTimes:r}}const tg=e=>Number(e),O3={string:e=>e,int:tg,uint:tg,short:tg,ushort:tg,float:tg,double:tg,bool:e=>!!e};function Kk(e,t){return _c(e,"ExtendedData",(r,n)=>{for(const i of ws(r,"Data"))n[i.getAttribute("name")||""]=es(Io(i,"value"));for(const i of ws(r,"SimpleData")){const o=i.getAttribute("name")||"",l=t[o]||O3.string;n[o]=l(es(i))}return n})}function Jk(e){const t=Io(e,"description");for(const r of Array.from(t?.childNodes||[]))if(r.nodeType===4)return{description:{"@type":"html",value:es(r)}};return{}}function Qk(e){return _c(e,"TimeSpan",t=>({timespan:{begin:es(Io(t,"begin")),end:es(Io(t,"end"))}}))}function eA(e){return _c(e,"TimeStamp",t=>({timestamp:es(Io(t,"when"))}))}function tA(e,t){return Kp(e,"styleUrl",r=>(r=Dx(r),t[r]?Object.assign({styleUrl:r},t[r]):{styleUrl:r}))}var Ec;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(Ec||(Ec={}));function GSe(e){switch(e?.textContent){case Ec.ABSOLUTE:return Ec.ABSOLUTE;case Ec.CLAMP_TO_GROUND:return Ec.CLAMP_TO_GROUND;case Ec.CLAMP_TO_SEAFLOOR:return Ec.CLAMP_TO_SEAFLOOR;case Ec.RELATIVE_TO_GROUND:return Ec.RELATIVE_TO_GROUND;case Ec.RELATIVE_TO_SEAFLOOR:return Ec.RELATIVE_TO_SEAFLOOR}return null}function HSe(e){return Io(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[NU(N3(S_(e)))]}}:YSe(e)}const WSe=Math.PI/180;function XSe(e,t,r){const n=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[t[0].map(i=>{const o=i[1]-n[1],l=i[0]-n[0],a=Math.sqrt(o**2+l**2),c=Math.atan2(o,l)+r*WSe;return[n[0]+Math.cos(c)*a,n[1]+Math.sin(c)*a]})]}function YSe(e){const t=Io(e,"LatLonBox");if(t){const r=ql(t,"north"),n=ql(t,"west"),i=ql(t,"east"),o=ql(t,"south"),l=ql(t,"rotation");if(typeof r=="number"&&typeof o=="number"&&typeof n=="number"&&typeof i=="number"){const a=[n,o,i,r];let c=[[[n,r],[i,r],[i,o],[n,o],[n,r]]];return typeof l=="number"&&(c=XSe(a,c,l)),{bbox:a,geometry:{type:"Polygon",coordinates:c}}}}return null}function FU(e,t,r,n){const i=HSe(e),o=i?.geometry||null;if(!o&&n.skipNullGeometry)return null;const l={type:"Feature",geometry:o,properties:Object.assign({"@geometry-type":"groundoverlay"},Jp(e,["name","address","visibility","open","phoneNumber","description"]),Jk(e),tA(e,t),dw(e),Zk(e),Kk(e,r),Qk(e),eA(e))};i?.bbox&&(l.bbox=i.bbox),l.properties?.visibility!==void 0&&(l.properties.visibility=l.properties.visibility!=="0");const a=e.getAttribute("id");return a!==null&&a!==""&&(l.id=a),l}function ZSe(e){const t=Io(e,"Region");return t?{coordinateBox:JSe(t),lod:KSe(e)}:null}function KSe(e){const t=Io(e,"Lod");return t?[ql(t,"minLodPixels")??-1,ql(t,"maxLodPixels")??-1,ql(t,"minFadeExtent")??null,ql(t,"maxFadeExtent")??null]:null}function JSe(e){const t=Io(e,"LatLonAltBox");if(t){const r=ql(t,"north"),n=ql(t,"west"),i=ql(t,"east"),o=ql(t,"south");if(GSe(Io(t,"altitudeMode")||Io(t,"gx:altitudeMode"))&&console.debug("Encountered an unsupported feature of KML for togeojson: please contact developers for support of altitude mode."),typeof r=="number"&&typeof o=="number"&&typeof n=="number"&&typeof i=="number")return{bbox:[n,o,i,r],geometry:{type:"Polygon",coordinates:[[[n,r],[i,r],[i,o],[n,o],[n,r]]]}}}return null}function QSe(e){const t=Io(e,"Link");return t?Jp(t,["href","refreshMode","refreshInterval","viewRefreshMode","viewRefreshTime","viewBoundScale","viewFormat","httpQuery"]):{}}function BU(e,t,r,n){const i=ZSe(e),o=i?.coordinateBox?.geometry||null;if(!o&&n.skipNullGeometry)return null;const l={type:"Feature",geometry:o,properties:Object.assign({"@geometry-type":"networklink"},Jp(e,["name","address","visibility","open","phoneNumber","styleUrl","refreshVisibility","flyToView","description"]),Jk(e),tA(e,t),dw(e),Zk(e),Kk(e,r),Qk(e),eA(e),QSe(e),i?.lod?{lod:i.lod}:{})};i?.coordinateBox?.bbox&&(l.bbox=i.coordinateBox.bbox),l.properties?.visibility!==void 0&&(l.properties.visibility=l.properties.visibility!=="0");const a=e.getAttribute("id");return a!==null&&a!==""&&(l.id=a),l}function e5e(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function zU(e,t,r,n){const{coordTimes:i,geometries:o}=OU(e),l=e5e(o);if(!l&&n.skipNullGeometry)return null;const a={type:"Feature",geometry:l,properties:Object.assign(Jp(e,["name","address","visibility","open","phoneNumber","description"]),Jk(e),tA(e,t),dw(e),Kk(e,r),Qk(e),eA(e),i.length?{coordinateProperties:{times:i.length===1?i[0]:i}}:{})};a.properties?.visibility!==void 0&&(a.properties.visibility=a.properties.visibility!=="0");const c=e.getAttribute("id");return c!==null&&c!==""&&(a.id=c),a}function t5e(e){let t=e.getAttribute("id");const r=e.parentNode;return!t&&P1(r)&&r.localName==="CascadingStyle"&&(t=r.getAttribute("kml:id")||r.getAttribute("id")),Dx(t||"")}function jU(e){const t={};for(const r of ws(e,"Style"))t[t5e(r)]=dw(r);for(const r of ws(e,"StyleMap")){const n=Dx(r.getAttribute("id")||"");Kp(r,"styleUrl",i=>{i=Dx(i),t[i]&&(t[n]=t[i])})}return t}function qU(e){const t={};for(const r of ws(e,"SimpleField"))t[r.getAttribute("name")||""]=O3[r.getAttribute("type")||""]||O3.string;return t}const r5e=["name","visibility","open","address","description","phoneNumber","visibility"];function n5e(e){const t={};for(const r of Array.from(e.childNodes))P1(r)&&r5e.includes(r.tagName)&&(t[r.tagName]=es(r));return{type:"folder",meta:t,children:[]}}function i5e(e,t={skipNullGeometry:!1}){const r=e,n=jU(r),i=qU(r),o={type:"root",children:[]};function l(a,c,h){if(P1(a))switch(a.tagName){case"GroundOverlay":{const g=FU(a,n,i,h);g&&c.children.push(g);break}case"Placemark":{const g=zU(a,n,i,h);g&&c.children.push(g);break}case"Folder":{const g=n5e(a);c.children.push(g),c=g;break}case"NetworkLink":{const g=BU(a,n,i,h);g&&c.children.push(g);break}}if(a.childNodes)for(let g=0;g<a.childNodes.length;g++)l(a.childNodes[g],c,h)}return l(r,o,t),o}function*$U(e,t={skipNullGeometry:!1}){const r=e,n=jU(r),i=qU(r);for(const o of ws(r,"Placemark")){const l=zU(o,n,i,t);l&&(yield l)}for(const o of ws(r,"GroundOverlay")){const l=FU(o,n,i,t);l&&(yield l)}for(const o of ws(r,"NetworkLink")){const l=BU(o,n,i,t);l&&(yield l)}}function a5e(e,t={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from($U(e,t))}}const o5e=Object.freeze(Object.defineProperty({__proto__:null,gpx:ASe,gpxGen:AU,kml:a5e,kmlGen:$U,kmlWithFolders:i5e,tcx:OSe,tcxGen:LU},Symbol.toStringTag,{value:"Module"}));async function s5e(e){return await new Promise((r,n)=>{cw(e.filename).then(i=>{const o=()=>e.protocolId==="tcx"?o5e[e.protocolId](new DOMParser().parseFromString(i,"text/xml")):hU[e.protocolId](new DOMParser().parseFromString(i,"text/xml"));o()?r(o()):n("Conversion failed")})})}const E4=async e=>{const t=uw(e.url),r=await s5e(t);if(r!==void 0)return{data:r};throw new Error("XML not found "+t.filename)},F3=e=>{const t=da({mapId:void 0}),r=J.useRef(!1);J.useEffect(()=>{if(!(!t.map||r.current))return t.map?.loadImage(e.imagePath).then(function(n){if(!n?.data){console.log("image "+e.imagePath+"could not be loaded");return}t.map?.addImage(e.imageId,n.data)}),()=>{t.map?.removeImage(e.imageId)}},[t.map,e])};F3.defaultProps={mapId:void 0};try{F3.displayName="useAddImage",F3.__docgenInfo={description:"",displayName:"useAddImage",props:{imageId:{defaultValue:null,description:"",name:"imageId",required:!0,type:{name:"string"}},imagePath:{defaultValue:null,description:"",name:"imagePath",required:!0,type:{name:"string"}}}}}catch{}const l5e=ft.createContext({}),B3=l5e.Provider;try{B3.displayName="SimpleDataContextProvider",B3.__docgenInfo={description:"",displayName:"SimpleDataContextProvider",props:{}}}catch{}var u5e={value:()=>{}};function VU(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new C_(r)}function C_(e){this._=e}function c5e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}C_.prototype=VU.prototype={constructor:C_,on:function(e,t){var r=this._,n=c5e(e+"",r),i,o=-1,l=n.length;if(arguments.length<2){for(;++o<l;)if((i=(e=n[o]).type)&&(i=d5e(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=n[o]).type)r[i]=gz(r[i],e.name,t);else if(t==null)for(i in r)r[i]=gz(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new C_(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function d5e(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function gz(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=u5e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var z3="http://www.w3.org/1999/xhtml";const yz={svg:"http://www.w3.org/2000/svg",xhtml:z3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fw(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),yz.hasOwnProperty(t)?{space:yz[t],local:e}:e}function f5e(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===z3&&t.documentElement.namespaceURI===z3?t.createElement(e):t.createElementNS(r,e)}}function h5e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function UU(e){var t=fw(e);return(t.local?h5e:f5e)(t)}function p5e(){}function rA(e){return e==null?p5e:function(){return this.querySelector(e)}}function m5e(e){typeof e!="function"&&(e=rA(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,a=n[i]=new Array(l),c,h,g=0;g<l;++g)(c=o[g])&&(h=e.call(c,c.__data__,g,o))&&("__data__"in c&&(h.__data__=c.__data__),a[g]=h);return new md(n,this._parents)}function g5e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function y5e(){return[]}function GU(e){return e==null?y5e:function(){return this.querySelectorAll(e)}}function v5e(e){return function(){return g5e(e.apply(this,arguments))}}function b5e(e){typeof e=="function"?e=v5e(e):e=GU(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var l=t[o],a=l.length,c,h=0;h<a;++h)(c=l[h])&&(n.push(e.call(c,c.__data__,h,l)),i.push(c));return new md(n,i)}function HU(e){return function(){return this.matches(e)}}function WU(e){return function(t){return t.matches(e)}}var _5e=Array.prototype.find;function x5e(e){return function(){return _5e.call(this.children,e)}}function w5e(){return this.firstElementChild}function S5e(e){return this.select(e==null?w5e:x5e(typeof e=="function"?e:WU(e)))}var C5e=Array.prototype.filter;function E5e(){return Array.from(this.children)}function T5e(e){return function(){return C5e.call(this.children,e)}}function P5e(e){return this.selectAll(e==null?E5e:T5e(typeof e=="function"?e:WU(e)))}function I5e(e){typeof e!="function"&&(e=HU(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,a=n[i]=[],c,h=0;h<l;++h)(c=o[h])&&e.call(c,c.__data__,h,o)&&a.push(c);return new md(n,this._parents)}function XU(e){return new Array(e.length)}function k5e(){return new md(this._enter||this._groups.map(XU),this._parents)}function Ox(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ox.prototype={constructor:Ox,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function A5e(e){return function(){return e}}function M5e(e,t,r,n,i,o){for(var l=0,a,c=t.length,h=o.length;l<h;++l)(a=t[l])?(a.__data__=o[l],n[l]=a):r[l]=new Ox(e,o[l]);for(;l<c;++l)(a=t[l])&&(i[l]=a)}function L5e(e,t,r,n,i,o,l){var a,c,h=new Map,g=t.length,v=o.length,x=new Array(g),b;for(a=0;a<g;++a)(c=t[a])&&(x[a]=b=l.call(c,c.__data__,a,t)+"",h.has(b)?i[a]=c:h.set(b,c));for(a=0;a<v;++a)b=l.call(e,o[a],a,o)+"",(c=h.get(b))?(n[a]=c,c.__data__=o[a],h.delete(b)):r[a]=new Ox(e,o[a]);for(a=0;a<g;++a)(c=t[a])&&h.get(x[a])===c&&(i[a]=c)}function R5e(e){return e.__data__}function D5e(e,t){if(!arguments.length)return Array.from(this,R5e);var r=t?L5e:M5e,n=this._parents,i=this._groups;typeof e!="function"&&(e=A5e(e));for(var o=i.length,l=new Array(o),a=new Array(o),c=new Array(o),h=0;h<o;++h){var g=n[h],v=i[h],x=v.length,b=N5e(e.call(g,g&&g.__data__,h,n)),S=b.length,I=a[h]=new Array(S),k=l[h]=new Array(S),M=c[h]=new Array(x);r(g,v,I,k,M,b,t);for(var O=0,F=0,D,q;O<S;++O)if(D=I[O]){for(O>=F&&(F=O+1);!(q=k[F])&&++F<S;);D._next=q||null}}return l=new md(l,n),l._enter=a,l._exit=c,l}function N5e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function O5e(){return new md(this._exit||this._groups.map(XU),this._parents)}function F5e(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function B5e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,l=Math.min(i,o),a=new Array(i),c=0;c<l;++c)for(var h=r[c],g=n[c],v=h.length,x=a[c]=new Array(v),b,S=0;S<v;++S)(b=h[S]||g[S])&&(x[S]=b);for(;c<i;++c)a[c]=r[c];return new md(a,this._parents)}function z5e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],l;--i>=0;)(l=n[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function j5e(e){e||(e=q5e);function t(v,x){return v&&x?e(v.__data__,x.__data__):!v-!x}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var l=r[o],a=l.length,c=i[o]=new Array(a),h,g=0;g<a;++g)(h=l[g])&&(c[g]=h);c.sort(t)}return new md(i,this._parents).order()}function q5e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $5e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function V5e(){return Array.from(this)}function U5e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var l=n[i];if(l)return l}return null}function G5e(){let e=0;for(const t of this)++e;return e}function H5e(){return!this.node()}function W5e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,l=i.length,a;o<l;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function X5e(e){return function(){this.removeAttribute(e)}}function Y5e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Z5e(e,t){return function(){this.setAttribute(e,t)}}function K5e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function J5e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Q5e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function eCe(e,t){var r=fw(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Y5e:X5e:typeof t=="function"?r.local?Q5e:J5e:r.local?K5e:Z5e)(r,t))}function YU(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tCe(e){return function(){this.style.removeProperty(e)}}function rCe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function nCe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function iCe(e,t,r){return arguments.length>1?this.each((t==null?tCe:typeof t=="function"?nCe:rCe)(e,t,r??"")):hy(this.node(),e)}function hy(e,t){return e.style.getPropertyValue(t)||YU(e).getComputedStyle(e,null).getPropertyValue(t)}function aCe(e){return function(){delete this[e]}}function oCe(e,t){return function(){this[e]=t}}function sCe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function lCe(e,t){return arguments.length>1?this.each((t==null?aCe:typeof t=="function"?sCe:oCe)(e,t)):this.node()[e]}function ZU(e){return e.trim().split(/^|\s+/)}function nA(e){return e.classList||new KU(e)}function KU(e){this._node=e,this._names=ZU(e.getAttribute("class")||"")}KU.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function JU(e,t){for(var r=nA(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function QU(e,t){for(var r=nA(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function uCe(e){return function(){JU(this,e)}}function cCe(e){return function(){QU(this,e)}}function dCe(e,t){return function(){(t.apply(this,arguments)?JU:QU)(this,e)}}function fCe(e,t){var r=ZU(e+"");if(arguments.length<2){for(var n=nA(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?dCe:t?uCe:cCe)(r,t))}function hCe(){this.textContent=""}function pCe(e){return function(){this.textContent=e}}function mCe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gCe(e){return arguments.length?this.each(e==null?hCe:(typeof e=="function"?mCe:pCe)(e)):this.node().textContent}function yCe(){this.innerHTML=""}function vCe(e){return function(){this.innerHTML=e}}function bCe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function _Ce(e){return arguments.length?this.each(e==null?yCe:(typeof e=="function"?bCe:vCe)(e)):this.node().innerHTML}function xCe(){this.nextSibling&&this.parentNode.appendChild(this)}function wCe(){return this.each(xCe)}function SCe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function CCe(){return this.each(SCe)}function ECe(e){var t=typeof e=="function"?e:UU(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function TCe(){return null}function PCe(e,t){var r=typeof e=="function"?e:UU(e),n=t==null?TCe:typeof t=="function"?t:rA(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function ICe(){var e=this.parentNode;e&&e.removeChild(this)}function kCe(){return this.each(ICe)}function ACe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MCe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function LCe(e){return this.select(e?MCe:ACe)}function RCe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function DCe(e){return function(t){e.call(this,t,this.__data__)}}function NCe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function OCe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function FCe(e,t,r){return function(){var n=this.__on,i,o=DCe(t);if(n){for(var l=0,a=n.length;l<a;++l)if((i=n[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function BCe(e,t,r){var n=NCe(e+""),i,o=n.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,h=a.length,g;c<h;++c)for(i=0,g=a[c];i<o;++i)if((l=n[i]).type===g.type&&l.name===g.name)return g.value}return}for(a=t?FCe:OCe,i=0;i<o;++i)this.each(a(n[i],t,r));return this}function eG(e,t,r){var n=YU(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function zCe(e,t){return function(){return eG(this,e,t)}}function jCe(e,t){return function(){return eG(this,e,t.apply(this,arguments))}}function qCe(e,t){return this.each((typeof t=="function"?jCe:zCe)(e,t))}function*$Ce(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,l;i<o;++i)(l=n[i])&&(yield l)}var VCe=[null];function md(e,t){this._groups=e,this._parents=t}function I1(){return new md([[document.documentElement]],VCe)}function UCe(){return this}md.prototype=I1.prototype={constructor:md,select:m5e,selectAll:b5e,selectChild:S5e,selectChildren:P5e,filter:I5e,data:D5e,enter:k5e,exit:O5e,join:F5e,merge:B5e,selection:UCe,order:z5e,sort:j5e,call:$5e,nodes:V5e,node:U5e,size:G5e,empty:H5e,each:W5e,attr:eCe,style:iCe,property:lCe,classed:fCe,text:gCe,html:_Ce,raise:wCe,lower:CCe,append:ECe,insert:PCe,remove:kCe,clone:LCe,datum:RCe,on:BCe,dispatch:qCe,[Symbol.iterator]:$Ce};function iA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tG(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function k1(){}var V0=.7,Fx=1/V0,Hg="\\s*([+-]?\\d+)\\s*",U0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GCe=/^#([0-9a-f]{3,8})$/,HCe=new RegExp(`^rgb\\(${Hg},${Hg},${Hg}\\)$`),WCe=new RegExp(`^rgb\\(${Zd},${Zd},${Zd}\\)$`),XCe=new RegExp(`^rgba\\(${Hg},${Hg},${Hg},${U0}\\)$`),YCe=new RegExp(`^rgba\\(${Zd},${Zd},${Zd},${U0}\\)$`),ZCe=new RegExp(`^hsl\\(${U0},${Zd},${Zd}\\)$`),KCe=new RegExp(`^hsla\\(${U0},${Zd},${Zd},${U0}\\)$`),vz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iA(k1,G0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bz,formatHex:bz,formatHex8:JCe,formatHsl:QCe,formatRgb:_z,toString:_z});function bz(){return this.rgb().formatHex()}function JCe(){return this.rgb().formatHex8()}function QCe(){return rG(this).formatHsl()}function _z(){return this.rgb().formatRgb()}function G0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=GCe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?xz(t):r===3?new $u(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Kb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Kb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=HCe.exec(e))?new $u(t[1],t[2],t[3],1):(t=WCe.exec(e))?new $u(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=XCe.exec(e))?Kb(t[1],t[2],t[3],t[4]):(t=YCe.exec(e))?Kb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ZCe.exec(e))?Cz(t[1],t[2]/100,t[3]/100,1):(t=KCe.exec(e))?Cz(t[1],t[2]/100,t[3]/100,t[4]):vz.hasOwnProperty(e)?xz(vz[e]):e==="transparent"?new $u(NaN,NaN,NaN,0):null}function xz(e){return new $u(e>>16&255,e>>8&255,e&255,1)}function Kb(e,t,r,n){return n<=0&&(e=t=r=NaN),new $u(e,t,r,n)}function eEe(e){return e instanceof k1||(e=G0(e)),e?(e=e.rgb(),new $u(e.r,e.g,e.b,e.opacity)):new $u}function j3(e,t,r,n){return arguments.length===1?eEe(e):new $u(e,t,r,n??1)}function $u(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}iA($u,j3,tG(k1,{brighter(e){return e=e==null?Fx:Math.pow(Fx,e),new $u(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?V0:Math.pow(V0,e),new $u(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $u(zp(this.r),zp(this.g),zp(this.b),Bx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wz,formatHex:wz,formatHex8:tEe,formatRgb:Sz,toString:Sz}));function wz(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}`}function tEe(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}${Lp((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sz(){const e=Bx(this.opacity);return`${e===1?"rgb(":"rgba("}${zp(this.r)}, ${zp(this.g)}, ${zp(this.b)}${e===1?")":`, ${e})`}`}function Bx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lp(e){return e=zp(e),(e<16?"0":"")+e.toString(16)}function Cz(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new id(e,t,r,n)}function rG(e){if(e instanceof id)return new id(e.h,e.s,e.l,e.opacity);if(e instanceof k1||(e=G0(e)),!e)return new id;if(e instanceof id)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),l=NaN,a=o-i,c=(o+i)/2;return a?(t===o?l=(r-n)/a+(r<n)*6:r===o?l=(n-t)/a+2:l=(t-r)/a+4,a/=c<.5?o+i:2-o-i,l*=60):a=c>0&&c<1?0:l,new id(l,a,c,e.opacity)}function rEe(e,t,r,n){return arguments.length===1?rG(e):new id(e,t,r,n??1)}function id(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}iA(id,rEe,tG(k1,{brighter(e){return e=e==null?Fx:Math.pow(Fx,e),new id(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?V0:Math.pow(V0,e),new id(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new $u(T4(e>=240?e-240:e+120,i,n),T4(e,i,n),T4(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new id(Ez(this.h),Jb(this.s),Jb(this.l),Bx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bx(this.opacity);return`${e===1?"hsl(":"hsla("}${Ez(this.h)}, ${Jb(this.s)*100}%, ${Jb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ez(e){return e=(e||0)%360,e<0?e+360:e}function Jb(e){return Math.max(0,Math.min(1,e||0))}function T4(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const nG=e=>()=>e;function nEe(e,t){return function(r){return e+r*t}}function iEe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function aEe(e){return(e=+e)==1?iG:function(t,r){return r-t?iEe(t,r,e):nG(isNaN(t)?r:t)}}function iG(e,t){var r=t-e;return r?nEe(e,r):nG(isNaN(e)?t:e)}const Tz=(function e(t){var r=aEe(t);function n(i,o){var l=r((i=j3(i)).r,(o=j3(o)).r),a=r(i.g,o.g),c=r(i.b,o.b),h=iG(i.opacity,o.opacity);return function(g){return i.r=l(g),i.g=a(g),i.b=c(g),i.opacity=h(g),i+""}}return n.gamma=e,n})(1);function Sh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var q3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,P4=new RegExp(q3.source,"g");function oEe(e){return function(){return e}}function sEe(e){return function(t){return e(t)+""}}function lEe(e,t){var r=q3.lastIndex=P4.lastIndex=0,n,i,o,l=-1,a=[],c=[];for(e=e+"",t=t+"";(n=q3.exec(e))&&(i=P4.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[l]?a[l]+=o:a[++l]=o),(n=n[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,c.push({i:l,x:Sh(n,i)})),r=P4.lastIndex;return r<t.length&&(o=t.slice(r),a[l]?a[l]+=o:a[++l]=o),a.length<2?c[0]?sEe(c[0].x):oEe(t):(t=c.length,function(h){for(var g=0,v;g<t;++g)a[(v=c[g]).i]=v.x(h);return a.join("")})}var Pz=180/Math.PI,$3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aG(e,t,r,n,i,o){var l,a,c;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,c/=a),e*n<t*r&&(e=-e,t=-t,c=-c,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Pz,skewX:Math.atan(c)*Pz,scaleX:l,scaleY:a}}var Qb;function uEe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$3:aG(t.a,t.b,t.c,t.d,t.e,t.f)}function cEe(e){return e==null||(Qb||(Qb=document.createElementNS("http://www.w3.org/2000/svg","g")),Qb.setAttribute("transform",e),!(e=Qb.transform.baseVal.consolidate()))?$3:(e=e.matrix,aG(e.a,e.b,e.c,e.d,e.e,e.f))}function oG(e,t,r,n){function i(h){return h.length?h.pop()+" ":""}function o(h,g,v,x,b,S){if(h!==v||g!==x){var I=b.push("translate(",null,t,null,r);S.push({i:I-4,x:Sh(h,v)},{i:I-2,x:Sh(g,x)})}else(v||x)&&b.push("translate("+v+t+x+r)}function l(h,g,v,x){h!==g?(h-g>180?g+=360:g-h>180&&(h+=360),x.push({i:v.push(i(v)+"rotate(",null,n)-2,x:Sh(h,g)})):g&&v.push(i(v)+"rotate("+g+n)}function a(h,g,v,x){h!==g?x.push({i:v.push(i(v)+"skewX(",null,n)-2,x:Sh(h,g)}):g&&v.push(i(v)+"skewX("+g+n)}function c(h,g,v,x,b,S){if(h!==v||g!==x){var I=b.push(i(b)+"scale(",null,",",null,")");S.push({i:I-4,x:Sh(h,v)},{i:I-2,x:Sh(g,x)})}else(v!==1||x!==1)&&b.push(i(b)+"scale("+v+","+x+")")}return function(h,g){var v=[],x=[];return h=e(h),g=e(g),o(h.translateX,h.translateY,g.translateX,g.translateY,v,x),l(h.rotate,g.rotate,v,x),a(h.skewX,g.skewX,v,x),c(h.scaleX,h.scaleY,g.scaleX,g.scaleY,v,x),h=g=null,function(b){for(var S=-1,I=x.length,k;++S<I;)v[(k=x[S]).i]=k.x(b);return v.join("")}}}var dEe=oG(uEe,"px, ","px)","deg)"),fEe=oG(cEe,", ",")",")"),py=0,Xv=0,Ev=0,sG=1e3,zx,Yv,jx=0,Qp=0,hw=0,H0=typeof performance=="object"&&performance.now?performance:Date,lG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function aA(){return Qp||(lG(hEe),Qp=H0.now()+hw)}function hEe(){Qp=0}function qx(){this._call=this._time=this._next=null}qx.prototype=uG.prototype={constructor:qx,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?aA():+r)+(t==null?0:+t),!this._next&&Yv!==this&&(Yv?Yv._next=this:zx=this,Yv=this),this._call=e,this._time=r,V3()},stop:function(){this._call&&(this._call=null,this._time=1/0,V3())}};function uG(e,t,r){var n=new qx;return n.restart(e,t,r),n}function pEe(){aA(),++py;for(var e=zx,t;e;)(t=Qp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--py}function Iz(){Qp=(jx=H0.now())+hw,py=Xv=0;try{pEe()}finally{py=0,gEe(),Qp=0}}function mEe(){var e=H0.now(),t=e-jx;t>sG&&(hw-=t,jx=e)}function gEe(){for(var e,t=zx,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:zx=r);Yv=e,V3(n)}function V3(e){if(!py){Xv&&(Xv=clearTimeout(Xv));var t=e-Qp;t>24?(e<1/0&&(Xv=setTimeout(Iz,e-H0.now()-hw)),Ev&&(Ev=clearInterval(Ev))):(Ev||(jx=H0.now(),Ev=setInterval(mEe,sG)),py=1,lG(Iz))}}function kz(e,t,r){var n=new qx;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var yEe=VU("start","end","cancel","interrupt"),vEe=[],cG=0,Az=1,U3=2,E_=3,Mz=4,G3=5,T_=6;function pw(e,t,r,n,i,o){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;bEe(e,r,{name:t,index:n,group:i,on:yEe,tween:vEe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:cG})}function oA(e,t){var r=xd(e,t);if(r.state>cG)throw new Error("too late; already scheduled");return r}function sf(e,t){var r=xd(e,t);if(r.state>E_)throw new Error("too late; already running");return r}function xd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function bEe(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=uG(o,0,r.time);function o(h){r.state=Az,r.timer.restart(l,r.delay,r.time),r.delay<=h&&l(h-r.delay)}function l(h){var g,v,x,b;if(r.state!==Az)return c();for(g in n)if(b=n[g],b.name===r.name){if(b.state===E_)return kz(l);b.state===Mz?(b.state=T_,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete n[g]):+g<t&&(b.state=T_,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete n[g])}if(kz(function(){r.state===E_&&(r.state=Mz,r.timer.restart(a,r.delay,r.time),a(h))}),r.state=U3,r.on.call("start",e,e.__data__,r.index,r.group),r.state===U3){for(r.state=E_,i=new Array(x=r.tween.length),g=0,v=-1;g<x;++g)(b=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(i[++v]=b);i.length=v+1}}function a(h){for(var g=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(c),r.state=G3,1),v=-1,x=i.length;++v<x;)i[v].call(e,g);r.state===G3&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=T_,r.timer.stop(),delete n[t];for(var h in n)return;delete e.__transition}}function _Ee(e,t){var r=e.__transition,n,i,o=!0,l;if(r){t=t==null?null:t+"";for(l in r){if((n=r[l]).name!==t){o=!1;continue}i=n.state>U3&&n.state<G3,n.state=T_,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[l]}o&&delete e.__transition}}function xEe(e){return this.each(function(){_Ee(this,e)})}function wEe(e,t){var r,n;return function(){var i=sf(this,e),o=i.tween;if(o!==r){n=r=o;for(var l=0,a=n.length;l<a;++l)if(n[l].name===t){n=n.slice(),n.splice(l,1);break}}i.tween=n}}function SEe(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=sf(this,e),l=o.tween;if(l!==n){i=(n=l).slice();for(var a={name:t,value:r},c=0,h=i.length;c<h;++c)if(i[c].name===t){i[c]=a;break}c===h&&i.push(a)}o.tween=i}}function CEe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=xd(this.node(),r).tween,i=0,o=n.length,l;i<o;++i)if((l=n[i]).name===e)return l.value;return null}return this.each((t==null?wEe:SEe)(r,e,t))}function sA(e,t,r){var n=e._id;return e.each(function(){var i=sf(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return xd(i,n).value[t]}}function dG(e,t){var r;return(typeof t=="number"?Sh:t instanceof G0?Tz:(r=G0(t))?(t=r,Tz):lEe)(e,t)}function EEe(e){return function(){this.removeAttribute(e)}}function TEe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function PEe(e,t,r){var n,i=r+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===n?o:o=t(n=l,r)}}function IEe(e,t,r){var n,i=r+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===n?o:o=t(n=l,r)}}function kEe(e,t,r){var n,i,o;return function(){var l,a=r(this),c;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),c=a+"",l===c?null:l===n&&c===i?o:(i=c,o=t(n=l,a)))}}function AEe(e,t,r){var n,i,o;return function(){var l,a=r(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),c=a+"",l===c?null:l===n&&c===i?o:(i=c,o=t(n=l,a)))}}function MEe(e,t){var r=fw(e),n=r==="transform"?fEe:dG;return this.attrTween(e,typeof t=="function"?(r.local?AEe:kEe)(r,n,sA(this,"attr."+e,t)):t==null?(r.local?TEe:EEe)(r):(r.local?IEe:PEe)(r,n,t))}function LEe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function REe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function DEe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&REe(e,o)),r}return i._value=t,i}function NEe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&LEe(e,o)),r}return i._value=t,i}function OEe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=fw(e);return this.tween(r,(n.local?DEe:NEe)(n,t))}function FEe(e,t){return function(){oA(this,e).delay=+t.apply(this,arguments)}}function BEe(e,t){return t=+t,function(){oA(this,e).delay=t}}function zEe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?FEe:BEe)(t,e)):xd(this.node(),t).delay}function jEe(e,t){return function(){sf(this,e).duration=+t.apply(this,arguments)}}function qEe(e,t){return t=+t,function(){sf(this,e).duration=t}}function $Ee(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jEe:qEe)(t,e)):xd(this.node(),t).duration}function VEe(e,t){if(typeof t!="function")throw new Error;return function(){sf(this,e).ease=t}}function UEe(e){var t=this._id;return arguments.length?this.each(VEe(t,e)):xd(this.node(),t).ease}function GEe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;sf(this,e).ease=r}}function HEe(e){if(typeof e!="function")throw new Error;return this.each(GEe(this._id,e))}function WEe(e){typeof e!="function"&&(e=HU(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,a=n[i]=[],c,h=0;h<l;++h)(c=o[h])&&e.call(c,c.__data__,h,o)&&a.push(c);return new Xf(n,this._parents,this._name,this._id)}function XEe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),l=new Array(n),a=0;a<o;++a)for(var c=t[a],h=r[a],g=c.length,v=l[a]=new Array(g),x,b=0;b<g;++b)(x=c[b]||h[b])&&(v[b]=x);for(;a<n;++a)l[a]=t[a];return new Xf(l,this._parents,this._name,this._id)}function YEe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function ZEe(e,t,r){var n,i,o=YEe(t)?oA:sf;return function(){var l=o(this,e),a=l.on;a!==n&&(i=(n=a).copy()).on(t,r),l.on=i}}function KEe(e,t){var r=this._id;return arguments.length<2?xd(this.node(),r).on.on(e):this.each(ZEe(r,e,t))}function JEe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function QEe(){return this.on("end.remove",JEe(this._id))}function e4e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=rA(e));for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l)for(var a=n[l],c=a.length,h=o[l]=new Array(c),g,v,x=0;x<c;++x)(g=a[x])&&(v=e.call(g,g.__data__,x,a))&&("__data__"in g&&(v.__data__=g.__data__),h[x]=v,pw(h[x],t,r,x,h,xd(g,r)));return new Xf(o,this._parents,t,r)}function t4e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=GU(e));for(var n=this._groups,i=n.length,o=[],l=[],a=0;a<i;++a)for(var c=n[a],h=c.length,g,v=0;v<h;++v)if(g=c[v]){for(var x=e.call(g,g.__data__,v,c),b,S=xd(g,r),I=0,k=x.length;I<k;++I)(b=x[I])&&pw(b,t,r,I,x,S);o.push(x),l.push(g)}return new Xf(o,l,t,r)}var r4e=I1.prototype.constructor;function n4e(){return new r4e(this._groups,this._parents)}function i4e(e,t){var r,n,i;return function(){var o=hy(this,e),l=(this.style.removeProperty(e),hy(this,e));return o===l?null:o===r&&l===n?i:i=t(r=o,n=l)}}function fG(e){return function(){this.style.removeProperty(e)}}function a4e(e,t,r){var n,i=r+"",o;return function(){var l=hy(this,e);return l===i?null:l===n?o:o=t(n=l,r)}}function o4e(e,t,r){var n,i,o;return function(){var l=hy(this,e),a=r(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),hy(this,e))),l===c?null:l===n&&c===i?o:(i=c,o=t(n=l,a))}}function s4e(e,t){var r,n,i,o="style."+t,l="end."+o,a;return function(){var c=sf(this,e),h=c.on,g=c.value[o]==null?a||(a=fG(t)):void 0;(h!==r||i!==g)&&(n=(r=h).copy()).on(l,i=g),c.on=n}}function l4e(e,t,r){var n=(e+="")=="transform"?dEe:dG;return t==null?this.styleTween(e,i4e(e,n)).on("end.style."+e,fG(e)):typeof t=="function"?this.styleTween(e,o4e(e,n,sA(this,"style."+e,t))).each(s4e(this._id,e)):this.styleTween(e,a4e(e,n,t),r).on("end.style."+e,null)}function u4e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function c4e(e,t,r){var n,i;function o(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&u4e(e,l,r)),n}return o._value=t,o}function d4e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,c4e(e,t,r??""))}function f4e(e){return function(){this.textContent=e}}function h4e(e){return function(){var t=e(this);this.textContent=t??""}}function p4e(e){return this.tween("text",typeof e=="function"?h4e(sA(this,"text",e)):f4e(e==null?"":e+""))}function m4e(e){return function(t){this.textContent=e.call(this,t)}}function g4e(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&m4e(i)),t}return n._value=e,n}function y4e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,g4e(e))}function v4e(){for(var e=this._name,t=this._id,r=hG(),n=this._groups,i=n.length,o=0;o<i;++o)for(var l=n[o],a=l.length,c,h=0;h<a;++h)if(c=l[h]){var g=xd(c,t);pw(c,e,r,h,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Xf(n,this._parents,e,r)}function b4e(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,l){var a={value:l},c={value:function(){--i===0&&o()}};r.each(function(){var h=sf(this,n),g=h.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),h.on=t}),i===0&&o()})}var _4e=0;function Xf(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function hG(){return++_4e}var Tf=I1.prototype;Xf.prototype={constructor:Xf,select:e4e,selectAll:t4e,selectChild:Tf.selectChild,selectChildren:Tf.selectChildren,filter:WEe,merge:XEe,selection:n4e,transition:v4e,call:Tf.call,nodes:Tf.nodes,node:Tf.node,size:Tf.size,empty:Tf.empty,each:Tf.each,on:KEe,attr:MEe,attrTween:OEe,style:l4e,styleTween:d4e,text:p4e,textTween:y4e,remove:QEe,tween:CEe,delay:zEe,duration:$Ee,ease:UEe,easeVarying:HEe,end:b4e,[Symbol.iterator]:Tf[Symbol.iterator]};function x4e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var w4e={time:null,delay:0,duration:250,ease:x4e};function S4e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function C4e(e){var t,r;e instanceof Xf?(t=e._id,e=e._name):(t=hG(),(r=w4e).time=aA(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var l=n[o],a=l.length,c,h=0;h<a;++h)(c=l[h])&&pw(c,e,t,h,l,r||S4e(c,t));return new Xf(n,this._parents,e,t)}I1.prototype.interrupt=xEe;I1.prototype.transition=C4e;var Lz={},I4={},k4=34,Tv=10,A4=13;function pG(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function E4e(e,t){var r=pG(e);return function(n,i){return t(r(n),i,e)}}function Rz(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function ju(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function T4e(e){return e<0?"-"+ju(-e,6):e>9999?"+"+ju(e,6):ju(e,4)}function P4e(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":T4e(e.getUTCFullYear())+"-"+ju(e.getUTCMonth()+1,2)+"-"+ju(e.getUTCDate(),2)+(i?"T"+ju(t,2)+":"+ju(r,2)+":"+ju(n,2)+"."+ju(i,3)+"Z":n?"T"+ju(t,2)+":"+ju(r,2)+":"+ju(n,2)+"Z":r||t?"T"+ju(t,2)+":"+ju(r,2)+"Z":"")}function I4e(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function n(v,x){var b,S,I=i(v,function(k,M){if(b)return b(k,M-1);S=k,b=x?E4e(k,x):pG(k)});return I.columns=S||[],I}function i(v,x){var b=[],S=v.length,I=0,k=0,M,O=S<=0,F=!1;v.charCodeAt(S-1)===Tv&&--S,v.charCodeAt(S-1)===A4&&--S;function D(){if(O)return I4;if(F)return F=!1,Lz;var z,U=I,H;if(v.charCodeAt(U)===k4){for(;I++<S&&v.charCodeAt(I)!==k4||v.charCodeAt(++I)===k4;);return(z=I)>=S?O=!0:(H=v.charCodeAt(I++))===Tv?F=!0:H===A4&&(F=!0,v.charCodeAt(I)===Tv&&++I),v.slice(U+1,z-1).replace(/""/g,'"')}for(;I<S;){if((H=v.charCodeAt(z=I++))===Tv)F=!0;else if(H===A4)F=!0,v.charCodeAt(I)===Tv&&++I;else if(H!==r)continue;return v.slice(U,z)}return O=!0,v.slice(U,S)}for(;(M=D())!==I4;){for(var q=[];M!==Lz&&M!==I4;)q.push(M),M=D();x&&(q=x(q,k++))==null||b.push(q)}return b}function o(v,x){return v.map(function(b){return x.map(function(S){return g(b[S])}).join(e)})}function l(v,x){return x==null&&(x=Rz(v)),[x.map(g).join(e)].concat(o(v,x)).join(`
`)}function a(v,x){return x==null&&(x=Rz(v)),o(v,x).join(`
`)}function c(v){return v.map(h).join(`
`)}function h(v){return v.map(g).join(e)}function g(v){return v==null?"":v instanceof Date?P4e(v):t.test(v+="")?'"'+v.replace(/"/g,'""')+'"':v}return{parse:n,parseRows:i,format:l,formatBody:a,formatRows:c,formatRow:h,formatValue:g}}var k4e=I4e(","),A4e=k4e.parse;function M4e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function mG(e,t){return fetch(e,t).then(M4e)}function L4e(e){return function(t,r,n){return arguments.length===2&&typeof r=="function"&&(n=r,r=void 0),mG(t,r).then(function(i){return e(i,n)})}}var R4e=L4e(A4e);function D4e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function N4e(e,t){return fetch(e,t).then(D4e)}function O4e(e){return(t,r)=>mG(t,r).then(n=>new DOMParser().parseFromString(n,e))}const F4e=O4e("application/xml");function Zv(e,t,r){this.k=e,this.x=t,this.y=r}Zv.prototype={constructor:Zv,scale:function(e){return e===1?this:new Zv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zv.prototype;const Dz=e=>{const[t,r]=J.useState();J.useEffect(()=>{if(!e.url)return;let i=null;e.format==="json"?i=N4e(e.url):e.format==="csv"?i=R4e(e.url):e.format==="xml"&&(i=F4e(e.url)),i&&i.then(o=>{if(e.format==="xml"){if(e.nodeType){const l=[];o.querySelectorAll(e.nodeType).forEach(a=>{typeof e.formatData=="function"&&l.push(e.formatData(a))}),r(l)}}else{let l=o;e.data_property&&(l=o[e.data_property]),typeof e.formatData=="function"?r(l.map(e.formatData)):r(l)}typeof e.onData=="function"&&e.onData()})},[e.url,e]);const n={data:t,setData:r};return Z.jsx(B3,{value:n,children:e.children})};try{Dz.displayName="SimpleDataProvider",Dz.__docgenInfo={description:"",displayName:"SimpleDataProvider",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"json"'},{value:'"csv"'},{value:'"xml"'}]}},nodeType:{defaultValue:null,description:"",name:"nodeType",required:!0,type:{name:"string"}},data_property:{defaultValue:null,description:"",name:"data_property",required:!0,type:{name:"string"}},formatData:{defaultValue:null,description:"",name:"formatData",required:!1,type:{name:"((data: any) => any) | undefined"}},onData:{defaultValue:null,description:"",name:"onData",required:!0,type:{name:"() => void"}}}}}catch{}const P_=Ei(Z.jsx("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 10V8h-2v4H8l4 4 4-4z"})),I_=Ei(Z.jsx("path",{d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0 2c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10m-1-10v4h2v-4h3l-4-4-4 4z"})),M4=Ei(Z.jsx("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),B4e=e=>{let{transform:t}=e;return{...t,x:0}},Pf=Ar(pc)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});function H3(e){const t=wwe(),r=da({mapId:void 0});function n(v){const x=v.id&&r.map?.getLayer(v.id)?.source?r.map?.getLayer(v.id)?.source:void 0;let b=null;switch(v.type){case"geojson":if(v.config?.geojson)r.map?.fitBounds(vc(v.config?.geojson),e.fitBoundsOptions);else{if(!x)return;const S={type:"FeatureCollection",features:r.map?.querySourceFeatures(x)};S.features.length===0&&(r.map?.zoomTo(1),S.features=r.map?.querySourceFeatures(x)),b=vc(S)}break;case"vt":console.log("vt");break;case"wms":b=v?.config?.config?.layers?.[0]?.EX_GeographicBoundingBox;break;default:return}b&&r.map?.fitBounds(b,e.fitBoundsOptions)}const i=J.useMemo(()=>["order-background",...[...t.layers].map((x,b)=>"content_order_"+b),"order-labels"],[t.layers]),o=J.useMemo(()=>e.layers?e.layers:t?.layers?t.layers:[],[e.layers,t.layers]),l=J.useMemo(()=>e.setLayers?e.setLayers:t.setLayers,[e.setLayers,t.setLayers]),a=mB(Uk,{activationConstraint:{distance:5}}),c=mB(JV,{activationConstraint:{distance:5}}),h=__e(c,a);function g(v){const x=v.active.id,b=v.over?.data?.current?.sortable.index;t.moveLayer(String(x),()=>b)}return Z.jsxs(Z.Fragment,{children:[Z.jsx(Lx,{layerIds:i,insertBeforeLayer:"_background"}),t?.symbolLayers?.length>0&&Z.jsx(Nf,{layerComponent:Z.jsx(Gg,{...t.vtLayerConfig,layers:t.symbolLayers,mapId:e?.mapId,insertBeforeLayer:"order-labels"}),setLayerState:v=>t.setSymbolLayers(v?.layers),visible:!0,configurable:!0,type:"layer",name:"Labels"},"background_labels"),Z.jsx(Sxe,{collisionDetection:E_e,sensors:h,onDragEnd:v=>g(v),modifiers:[B4e],children:Z.jsxs(Oxe,{items:o,strategy:Dxe,children:[[...o].map((v,x)=>{if(!v?.id)return null;switch(v.type){case"geojson":return Z.jsx(Nf,{layerId:v.id,sortable:e.sortable,name:v?.name||v?.config?.type+" layer"||"unnamed layer",layerComponent:Z.jsx(Uu,{...v.config,mapId:e?.mapId,layerId:v.id,insertBeforeLayer:"content_order_"+(o.length-1-x)}),buttons:Z.jsxs(Z.Fragment,{children:[Z.jsx(Pf,{disabled:x===o.length-1,onClick:()=>{t.moveDown(v.id||"")},children:Z.jsx(P_,{})}),Z.jsx(Pf,{disabled:x===0,onClick:()=>{t.moveUp(v.id||"")},children:Z.jsx(I_,{})}),Z.jsx(Pf,{onClick:()=>n(v),children:Z.jsx(M4,{})})]}),setLayerState:b=>l?.(S=>{const I=[...S];return b===!1?I.splice(x,1):I[x].config=b,I}),configurable:!0,showDeleteButton:!0},v.id);case"wms":return Z.jsx(Z.Fragment,{children:J.createElement(Mx,{...v.config,key:v.id,layerId:v.id,sortable:e.sortable,mapId:e?.mapId,insertBeforeLayer:"content_order_"+(o.length-1-x),onConfigChange:b=>{l?.(S=>{const I=[...S];return b===!1?I.splice(x,1):I[x].config.config=b,I})},featureInfoActive:v?.config?.featureInfoActive||!1,setFeatureInfoActive:b=>{l?.(S=>{const I=[...S];return typeof b=="function"&&(I[x].config.featureInfoActive=b(I[x].config?.featureInfoActive||!1)),I})},showDeleteButton:!0,buttons:Z.jsxs(Z.Fragment,{children:[Z.jsx(Pf,{disabled:x===o.length-1,onClick:()=>{t.moveDown(v.id||"")},children:Z.jsx(P_,{})}),Z.jsx(Pf,{disabled:x===0,onClick:()=>{t.moveUp(v.id||"")},children:Z.jsx(I_,{})}),Z.jsx(Pf,{onClick:()=>n(v),children:Z.jsx(M4,{})})]})})});case"vt":return Z.jsx(ft.Fragment,{children:Z.jsx(Nf,{name:v?.name||v?.type+" layer"||"unnamed layer",layerComponent:Z.jsx(Gg,{layers:v?.config?.layers||[],mapId:v?.config.mapId,sourceOptions:v?.config?.sourceOptions,layerId:v.id,url:v?.config?.url},v.id),buttons:Z.jsxs(Z.Fragment,{children:[Z.jsx(Pf,{disabled:x===o.length-1,onClick:()=>{t.moveDown(v.id||"")},children:Z.jsx(P_,{})},v.id+"_button1"),Z.jsx(Pf,{disabled:x===0,onClick:()=>{t.moveUp(v.id||"")},children:Z.jsx(I_,{})},v.id+"_button2"),Z.jsx(Pf,{onClick:()=>n(v),children:Z.jsx(M4,{})})]}),setLayerState:b=>l?.(S=>{const I=[...S];return b===!1?I.splice(x,1):I[x].config=b,I}),configurable:!0,showDeleteButton:!0},v.id)},v?.id+"_listItem");default:return null}}),t?.backgroundLayers?.length>0&&Z.jsx(Nf,{layerComponent:Z.jsx(Gg,{...t.vtLayerConfig,layers:t.backgroundLayers,mapId:e?.mapId,insertBeforeLayer:"order-background"}),setLayerState:v=>{t.setBackgroundLayers(v?.layers)},visible:!0,configurable:!0,type:"layer",name:"Background"},"background_geometry")]})})]})}H3.defaultProps={mapId:void 0};try{H3.displayName="LayerListItemFactory",H3.__docgenInfo={description:"",displayName:"LayerListItemFactory",props:{mapId:{defaultValue:{value:"undefined"},description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},layers:{defaultValue:null,description:"",name:"layers",required:!0,type:{name:"LayerConfig[]"}},setLayers:{defaultValue:null,description:"",name:"setLayers",required:!1,type:{name:"((layers: LayerConfig[] | ((state: LayerConfig[]) => LayerConfig[])) => void) | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}},fitBoundsOptions:{defaultValue:null,description:"",name:"fitBoundsOptions",required:!1,type:{name:"FitBoundsOptions | undefined"}}}}}catch{}const z4e=Ei(Z.jsx("path",{d:"M14 10H3v2h11zm0-4H3v2h11zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2zM3 16h7v-2H3z"})),j4e=["fill","line","circle"];function W3(e){const[t,r]=ft.useState({type:"circle"}),n=J.useMemo(()=>!(!t?.type||!t?.geojson),[t]);return Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:"GeoJSON layer"}),Z.jsxs(dc,{fullWidth:!0,children:[Z.jsx(kh,{id:"type-label",children:"Type"}),Z.jsx(Ah,{labelId:"type-label",value:t.type,label:"Type",onChange:i=>r(o=>({...o,type:i.target.value})),children:j4e.map(i=>Z.jsx(Np,{value:i,children:i},i))})]}),Z.jsx(dc,{fullWidth:!0,children:Z.jsxs(Ui,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Upload File",Z.jsx("input",{type:"file",hidden:!0,onChange:i=>{i.target.files?.[0].text().then(o=>r(l=>({...l,geojson:JSON.parse(o)})))}})]})}),Z.jsxs(s1,{children:[Z.jsx(Ui,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(Ui,{disabled:!n,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{W3.displayName="GeoJsonLayerForm",W3.__docgenInfo={description:"",displayName:"GeoJsonLayerForm",props:{config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"MlGeoJsonLayerProps | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlGeoJsonLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const q4e=Ei([Z.jsx("path",{d:"M8 8H6v7c0 1.1.9 2 2 2h9v-2H8z"},"0"),Z.jsx("path",{d:"M20 3h-8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 8h-8V7h8zM4 12H2v7c0 1.1.9 2 2 2h9v-2H4z"},"1")]),$x=e=>Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:e.layerTypes.length>1?"Select a layer type":"Load new layer"}),Z.jsx(gd,{children:e.layerTypes.map((t,r)=>Z.jsx(Bc,{disableGutters:!0,children:Z.jsxs(E7,{autoFocus:!0,onClick:()=>{e.onSelect(t)},children:[Z.jsx(P7,{children:Z.jsx(f7,{children:Z.jsx(q4e,{})})}),Z.jsx(Ac,{primary:t})]})},r))})]});$x.defaultProps={};try{$x.displayName="LayerTypeForm",$x.__docgenInfo={description:"",displayName:"LayerTypeForm",props:{onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(type: string) => void"}},layerTypes:{defaultValue:null,description:"",name:"layerTypes",required:!0,type:{name:"string[]"}}}}}catch{}function X3(e){const[t,r]=ft.useState({url:""}),n=J.useMemo(()=>!!t?.url,[t]);return Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:"WMS layer"}),Z.jsx(GP,{children:Z.jsxs(dc,{fullWidth:!0,sx:{marginTop:"10px"},children:[Z.jsx(kh,{htmlFor:"wms-url-input",children:"WMS URL"}),Z.jsx(C2,{id:"wms-url-input",label:"WMS URL",value:t.url,onChange:i=>r({...t,url:i.target.value})})]})}),Z.jsxs(s1,{children:[Z.jsx(Ui,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(Ui,{disabled:!n,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{X3.displayName="WmsLayerForm",X3.__docgenInfo={description:"",displayName:"WmsLayerForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: wmsConfig) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const gG=Ei(Z.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),yG=Ei(Z.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),$4e=["latfield","lonfield","delimiter"];function Y3(e){const[t,r]=J.useState(!1);return Z.jsxs(Z.Fragment,{children:[Z.jsx(Qo,{children:" Options "}),Z.jsx(Ui,{onClick:()=>r(!t),children:t?Z.jsx(yG,{}):Z.jsx(gG,{})}),Z.jsx(gd,{children:t&&$4e?.map(n=>Z.jsxs(Z.Fragment,{children:[Z.jsx(Bc,{children:Z.jsxs(Qo,{children:[" ",n," "]})}),Z.jsx(Bc,{children:Z.jsx(E2,{size:"small",onChange:i=>{const o={};o[n]=i.target.value,e.setter(o)}})})]}))})]})}try{Y3.displayName="CSVOptionsFormular",Y3.__docgenInfo={description:"",displayName:"CSVOptionsFormular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"any"}}}}}catch{}const V4e=["completeFeature","allFeatures","renderTagged","excludeWay","suppressWay"];function Z3(e){const[t,r]=J.useState(!1);return Z.jsxs(Z.Fragment,{children:[Z.jsx(Qo,{children:" Options "}),Z.jsx(Ui,{onClick:()=>r(!t),children:t?Z.jsx(yG,{}):Z.jsx(gG,{})}),Z.jsx(gd,{children:t&&V4e?.map(n=>Z.jsx(Z.Fragment,{children:Z.jsxs(Bc,{children:[Z.jsxs(Qo,{children:[" ",n," "]}),Z.jsx(ty,{onChange:i=>{const o={};o[n]=i.target.value==="on",e.setter(o)}})]})}))})]})}try{Z3.displayName="OsmOptionsFomular",Z3.__docgenInfo={description:"",displayName:"OsmOptionsFomular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"any"}}}}}catch{}const U4e={csv:zwe,topojson:SSe,osm:_Se,gpx:E4,kml:E4,tcx:E4},G4e=["fill","line","circle"];function K3(e){const[t,r]=J.useState({type:"circle"}),[n,i]=J.useState(),[o,l]=J.useState(),[a,c]=J.useState({}),h=da({mapId:e.mapId}),g="?"+new URLSearchParams(a).toString();Rx({protocol:e.originType,handler:U4e[e.originType]});const v=J.useMemo(()=>t?.type?!!(o&&n):!1,[t,o,n]);J.useEffect(()=>(typeof n<"u"&&typeof o<"u"&&(h.map?.getSource(n)||h.map?.addSource(n,{type:"geojson",data:a?e.originType+"://"+o+g:e.originType+"://"+o}),t.options={source:n}),()=>{}),[n,h.map,o]),J.useEffect(()=>{o&&n&&h.map?.getLayer(n)&&URL.revokeObjectURL(o)},[n,o,h.map]);function x(b){const S={...a,...b};return c(S)}return Z.jsxs(Z.Fragment,{children:[Z.jsxs(im,{children:["Layer from ",e.originType]}),Z.jsxs(dc,{fullWidth:!0,children:[Z.jsx(kh,{id:"type-label",children:"Type"}),Z.jsx(Ah,{labelId:"type-label",value:t.type,label:"Type",onChange:b=>r(S=>({...S,type:b.target.value})),children:G4e.map(b=>Z.jsx(Np,{value:b,children:b},b))})]}),Z.jsxs(dc,{fullWidth:!0,children:[Z.jsxs(Ui,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Select origin file",Z.jsx("input",{type:"file",hidden:!0,accept:e.originType,onChange:b=>{if(i(b.target.files?.[0].name),b.target.files?.[0]){const S=URL.createObjectURL(b.target.files?.[0]);l(S)}}})]}),e.originType==="csv"&&Z.jsx(Y3,{setter:x}),e.originType==="osm"&&Z.jsx(Z3,{setter:x})]}),Z.jsxs(s1,{children:[Z.jsx(Ui,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(Ui,{disabled:!v,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{K3.displayName="ProtocolHandlerLayerForm",K3.__docgenInfo={description:"",displayName:"ProtocolHandlerLayerForm",props:{originType:{defaultValue:null,description:"",name:"originType",required:!0,type:{name:"string"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"MlGeoJsonLayerProps | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlGeoJsonLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const H4e=["id","type","metadata","source","source-layer","layout","paint","options"];function J3(e){const[t,r]=J.useState([]),n={},i=["paint","layout","options","metadata"];J.useEffect(()=>{e.setter(t)},[t]);const o=()=>Z.jsx(Z.Fragment,{children:H4e.map(a=>Z.jsx(ft.Fragment,{children:Z.jsx(E2,{label:a,onChange:c=>n[a]=c.target.value})},a+"_fragment"))});function l(){i.map(a=>{if(typeof n[a]<"u")try{n[a]=JSON.parse(n[a])}catch{alert("Invalid JSON format, try again")}}),r(a=>a.length>0?[n,...a]:[n])}return Z.jsxs(Z.Fragment,{children:[Z.jsx(dc,{fullWidth:!0,children:Z.jsx(o,{})}),Z.jsx(Ui,{onClick:l,children:" Add"})]})}try{J3.displayName="MbtilesLayerPropFormular",J3.__docgenInfo={description:"",displayName:"MbtilesLayerPropFormular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"Dispatch<SetStateAction<LayerSpecification[]>>"}}}}}catch{}const W4e=Ei(Z.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),X4e=Ei(Z.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}));function Q3(e){const[t,r]=ft.useState(e.config),[n,i]=J.useState(),[o,l]=J.useState(),[a,c]=J.useState([]),h=da({mapId:e.mapId}),[g,v]=J.useState(!1);console.log(a);const x=()=>Z.jsx(Z.Fragment,{children:a.map((S,I)=>Z.jsxs(Qo,{variant:"body2",children:[I+1,": ",JSON.stringify(S)]},I))}),b=J.useMemo(()=>!!n,[n]);return J.useEffect(()=>{typeof n<"u"&&typeof o<"u"&&r({url:"mbtiles://"+o+"/{z}/{x}/{y}",layers:a,layerId:n,sourceOptions:{type:"vector",minzoom:0,maxzoom:1}})},[n,h.map,o,a]),Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:" Layer from mbtiles file"}),Z.jsxs(GP,{children:[Z.jsxs(Ui,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Select origin file",Z.jsx("input",{type:"file",hidden:!0,accept:e.originType,onChange:S=>{if(i(S.target.files?.[0].name),S.target.files?.[0]){const I=URL.createObjectURL(S.target.files?.[0]);l(I)}}})]}),Z.jsxs(JK,{expanded:g,children:[Z.jsxs(vJ,{"aria-controls":"panel1d-content",id:"panel1d-header",children:[Z.jsx(Qo,{children:"MB-Tile Layer properties"}),Z.jsx(Ui,{onClick:()=>v(!g),children:g?Z.jsx(X4e,{}):Z.jsx(W4e,{})})]}),Z.jsx(Qo,{variant:"body1",children:" Layers"}),a.length>0?Z.jsx(x,{}):Z.jsx(Qo,{variant:"body2",children:" 0 "}),Z.jsx(J3,{setter:c})]})]}),Z.jsxs(s1,{children:[Z.jsx(Ui,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(Ui,{disabled:!b,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{Q3.displayName="MbtilesLayerForm",Q3.__docgenInfo={description:"",displayName:"MbtilesLayerForm",props:{originType:{defaultValue:null,description:"",name:"originType",required:!0,type:{name:"string"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"MlVectorTileLayerProps"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlVectorTileLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const Vx=e=>{const[t,r]=J.useState(e?.config),[n,i]=J.useState(),o=e.layerTypes,l=o.filter(v=>v!=="wms"&&v!=="geojson"&&v!=="mbtiles"),a=["wms","geojson","vt","csv","mbtiles","topojson","osm","gpx","kml","tcx"],c=v=>{i(v),l.includes(v)?r({type:"geojson",config:{}}):r(v==="mbtiles"?{type:"vt",config:{layers:[]}}:{type:v,config:{}})},h=()=>{e.setOpen(!1),r(void 0)},g=()=>Z.jsx(Z.Fragment,{children:l.map((v,x)=>Z.jsx(Z.Fragment,{children:t?.type==="geojson"&&n===v&&Z.jsx(K3,{originType:v,onSubmit:b=>{e?.onComplete?.({...t,config:b,type:"geojson"}),h()},onCancel:h},x)}))});return Z.jsxs(UP,{open:e.open,onClose:h,children:[!t?.type&&Z.jsx($x,{onSelect:v=>{a.includes(v)&&c(v)},layerTypes:o}),t?.type==="geojson"&&n==="geojson"&&Z.jsx(W3,{onSubmit:v=>{e?.onComplete?.({...t,config:v}),h()},onCancel:h}),t?.type==="wms"&&Z.jsx(X3,{onSubmit:v=>{e?.onComplete?.({...t,config:v}),h()},onCancel:h}),t?.type==="vt"&&n!==void 0&&Z.jsx(Q3,{config:t,originType:n,onSubmit:v=>{t&&(e?.onComplete?.({...t,config:v}),h())},onCancel:h}),Z.jsx(g,{},"protocol")]})};Vx.defaultProps={};try{Vx.displayName="AddLayerPopup",Vx.__docgenInfo={description:"",displayName:"AddLayerPopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"LayerConfig | undefined"}},layerTypes:{defaultValue:null,description:"",name:"layerTypes",required:!0,type:{name:"string[]"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(open: boolean) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}}}}}catch{}const eP=e=>{const[t,r]=ft.useState(!1),n=e.layerTypes||["geojson","wms","csv","topojson","osm","gpx","kml","tcx"];return Z.jsxs(Z.Fragment,{children:[Z.jsx(Ui,{variant:"contained",sx:{marginTop:"10px",...e.sx},onClick:()=>r(!0),children:Z.jsx(z4e,{})}),Z.jsx(Vx,{open:t,setOpen:r,onComplete:e?.onComplete,layerTypes:n})]})};eP.defaultProps={};try{eP.displayName="AddLayerButton",eP.__docgenInfo={description:"",displayName:"AddLayerButton",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},layerTypes:{defaultValue:null,description:`An string array, to filter the supported file types that would be shown to the user
Default is: ['geojson', 'wms', 'csv', 'topojson', 'osm', 'gpx', 'kml', 'tcx']`,name:"layerTypes",required:!1,type:{name:"string[] | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}}}}}catch{}const Y4e=Ei(Z.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}));function Nz(e){const t=J.useRef(null),r=()=>{if(!t.current)return!1;const i=t.current?.files?.[0];if(!i)return!1;const o=new FileReader;o.onload=l=>{l&&typeof e.setData=="function"&&e.setData(l.currentTarget?.result)},o.readAsText(i)},n=()=>{t.current&&t.current.click()};return Z.jsxs(Z.Fragment,{children:[e.buttonComponent?ft.cloneElement(e.buttonComponent,{onClick:n}):Z.jsx(Ui,{onClick:n,children:Z.jsx(Y4e,{})}),Z.jsx("input",{ref:t,onChange:r,type:"file",accept:e.accept,id:"input",multiple:!0,style:{display:"none"}})]})}try{Nz.displayName="UploadButton",Nz.__docgenInfo={description:"",displayName:"UploadButton",props:{setData:{defaultValue:null,description:"",name:"setData",required:!0,type:{name:"(data: string) => void"}},buttonComponent:{defaultValue:null,description:"",name:"buttonComponent",required:!0,type:{name:"any"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string | undefined"}}}}}catch{}const Ux=e=>{const t=()=>{e.setOpen(!1)};return Z.jsxs(UP,{open:e.open,onClose:t,PaperProps:{sx:{padding:"20px"}},children:[Z.jsx(im,{children:"Select a style"}),Z.jsx(gd,{children:e?.styles?.map(r=>Z.jsx(Bc,{disableGutters:!0,children:Z.jsxs(E7,{autoFocus:!0,onClick:()=>{e?.onSelect?.(r)},children:[Z.jsx(P7,{children:Z.jsx(f7,{sx:{width:"50px",height:"50px"},alt:r.name,src:r?.name&&e?.styleThumbnailPaths?.[r.name]})}),Z.jsx(Ac,{primary:r.name})]})},r.name))})]})};Ux.defaultProps={styleThumbnailPaths:{}};try{Ux.displayName="SelectStylePopup",Ux.__docgenInfo={description:"",displayName:"SelectStylePopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(open: boolean) => void"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"StyleSpecification[] | undefined"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((style: StyleSpecification) => void) | undefined"}},styleThumbnailPaths:{defaultValue:{value:"{}"},description:"",name:"styleThumbnailPaths",required:!1,type:{name:"{ [key: string]: string; } | undefined"}}}}}catch{}const vG=Ei(Z.jsx("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"})),Z4e={version:8,name:"Monokai",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:hu.source_openmaptiles_url}},sprite:hu.sprite,glyphs:hu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#AE81FF","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#75715E"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#837f6e"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#918d7e"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#A6C22E","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(166,194,46,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#e0ebad"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#FD971F"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(253,151,31,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(18,5,68,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#A6E22E","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#A6C22E","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#A6C22E","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#66D9EF","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#21c8e8"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#AE81FF","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#E6DB74","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#eee69f","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#fa5892","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#fa5892","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#fa5892","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#fb70a2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(249,38,114,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#b40544","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#b40544","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(249,38,114,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fb70a2","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fb70a2","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#e60657","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(249,38,114,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#F8F8F2","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fc89b2","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(18,5,68,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(18,5,68,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#b40544","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#fa5892","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#F8F8F2","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#b40544","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#E69F66","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E69F66","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},K4e={version:8,name:"Solarized",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:hu.source_openmaptiles_url}},sprite:hu.sprite,glyphs:hu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#073642"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#2aa198","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#657b83"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#74888f"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#84959c"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#859900","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(133,153,0,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#f2ff99"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#d30102"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(211,1,2,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(58,63,144,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#2aa198","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#859900","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#859900","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#268bd2","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#1a6091"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#2aa198","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#eee8d5","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#fdfcf9","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#9094d3","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#9094d3","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#9094d3","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#a3a6da","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(108,113,196,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#3a3f90","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#3a3f90","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(108,113,196,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#a3a6da","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#a3a6da","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#484fb5","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(108,113,196,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#cb4b16","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e58ab6","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(58,63,144,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(58,63,144,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#3a3f90","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#9094d3","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#cb4b16","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#268bd2","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#268bd2","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#268bd2","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},J4e={version:8,name:"Oceanic Next",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:hu.source_openmaptiles_url}},sprite:hu.sprite,glyphs:hu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#81a1c1","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#a3be8c"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#acc598"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#b5cba3"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#a3be8c","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(163,19,14,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#cbdabe"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#b48ead"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(18,142,173,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(118,51,8,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#81a1c1","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#a3be8c","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#a3be8c","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#8fbcbb","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#5f9f9e"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#81a1c1","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#65737e","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#7e8d98","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#f17626","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#f2853e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(235,219,178,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(214,93,14,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#a6480b","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(214,93,14,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#b48ead","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f49456","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(118,51,8,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(118,51,8,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#b48ead","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#8fbcbb","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},Q4e={version:8,name:"Medieval Kingdom",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:hu.source_openmaptiles_url}},sprite:hu.sprite,glyphs:hu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#ffd1a8"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#228B22","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#bfa677"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#c5af85"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#ccb892"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#556B2F","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(85,107,47,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#d1e0b8"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#FFC0CB"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(255,192,203,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(149,46,46,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#228B22","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#556B2F","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#556B2F","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#1E90FF","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#006ad1"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#228B22","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#f9e9cb","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#fefcf9","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#d98383","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d98383","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#d98383","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#df9797","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(139,94,6,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#952e2e","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#952e2e","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(205,92,92,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#df9797","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#df9797","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#bc3a3a","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(205,92,92,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#FFC0CB","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e5aaaa","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(149,46,46,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(149,46,46,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#952e2e","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#d98383","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#FFC0CB","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#A0522D","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#A0522D","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},eTe={version:8,name:"Gruvbox",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:hu.source_openmaptiles_url}},sprite:hu.sprite,glyphs:hu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#83a598","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#b8bb26"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#bfc23c"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#c6c951"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#b8bb26","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(184,187,38,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#eceeaa"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#fe8019"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(254,128,25,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(118,51,8,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#83a598","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#b8bb26","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#b8bb26","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#83a598","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#5c7f72"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#83a598","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#928374","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#a89c91","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#f17626","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#f2853e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(235,219,178,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(214,93,14,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#a6480b","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(214,93,14,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#fe8019","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f49456","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(118,51,8,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(118,51,8,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#fe8019","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#fb4934","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fb4934","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#83a598","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},Pv="https://mapcomponents.github.io/react-map-components-maplibre/assets/style_thumbnails/",Oz=({sx:e,styles:t=[],defaultStyles:r=!0,styleThumbnailPaths:n})=>{const i=ft.useContext(kP),[o,l]=ft.useState(!1);return Z.jsxs(Z.Fragment,{children:[Z.jsx(Ui,{variant:"contained",sx:{marginTop:"10px",...e},onClick:()=>l(!0),children:Z.jsx(vG,{})}),Z.jsx(Ux,{styles:[...r?[Z4e,K4e,J4e,Q4e,eTe]:[],...t||[]],styleThumbnailPaths:{...n,...r?{Monokai:Pv+"monokai.png",Gruvbox:Pv+"gruvbox.png","Oceanic Next":Pv+"oceanic_next.png",Solarized:Pv+"solarized.png","Medieval Kingdom":Pv+"medieval_kingdom.png"}:{}},open:o,setOpen:l,onSelect:a=>{i.setBackgroundLayers([]),setTimeout(()=>{i.updateStyle(a)},100),l(!1)}})]})};try{Oz.displayName="SelectStyleButton",Oz.__docgenInfo={description:"",displayName:"SelectStyleButton",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: StyleSpecification[]) => void) | undefined"}},styles:{defaultValue:{value:"[]"},description:"",name:"styles",required:!1,type:{name:"StyleSpecification[] | undefined"}},defaultStyles:{defaultValue:{value:"true"},description:"",name:"defaultStyles",required:!1,type:{name:"boolean | undefined"}},styleThumbnailPaths:{defaultValue:null,description:"",name:"styleThumbnailPaths",required:!1,type:{name:"{ [key: string]: string; } | undefined"}}}}}catch{}const tTe=Ei(Z.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),rTe=Ei(Z.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"})),nTe=Ei(Z.jsx("path",{d:"m16.24 11.51 1.57-1.57-3.75-3.75-1.57 1.57-4.14-4.13c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l4.13 4.13L3 17.25V21h3.75l4.76-4.76 4.13 4.13c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83zm-7.06-.44L5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.45 1.45zm7.88 7.89-4.13-4.13 1.9-1.9 1.45 1.45-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27zm3.65-11.92c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.47-.47-1.12-.29-1.41 0l-1.83 1.83 3.75 3.75z"})),iTe=Ei(Z.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"})),aTe=[{icon:Z.jsx(iTe,{}),name:"Create PDF"},{icon:Z.jsx(nTe,{}),name:"Sketch"},{icon:Z.jsx(rTe,{}),name:"Layers"},{icon:Z.jsx(vG,{}),name:"Background"}],oTe=()=>{const[e,t]=J.useState(!1),r=(i,o)=>{o==="toggle"&&t(!0)},n=()=>t(!1);return Z.jsx(vo,{sx:{height:330,transform:"translateZ(0px)",flexGrow:1,position:"absolute",bottom:0,right:0,width:"100px",zIndex:"1000"},children:Z.jsx(Nie,{ariaLabel:"SpeedDial tooltip example",sx:{position:"absolute",bottom:16,right:16},icon:e?Z.jsx(lU,{fontSize:"large"}):Z.jsx(tTe,{fontSize:"large"}),onClick:e?n:r,onOpen:r,open:e,children:aTe.map(i=>Z.jsx(Wie,{icon:i.icon,tooltipTitle:i.name,tooltipOpen:!0,onClick:n,FabProps:{sx:{color:"text.primary"}}},i.name))})})};oTe.defaultProps={mapId:void 0};var L4={exports:{}},R4={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fz;function sTe(){if(Fz)return R4;Fz=1;var e=Y0();function t(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,a=e.useDebugValue;return R4.useSyncExternalStoreWithSelector=function(c,h,g,v,x){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function k(q){if(!M){if(M=!0,O=q,q=v(q),x!==void 0&&S.hasValue){var z=S.value;if(x(z,q))return F=z}return F=q}if(z=F,r(O,q))return z;var U=v(q);return x!==void 0&&x(z,U)?(O=q,z):(O=q,F=U)}var M=!1,O,F,D=g===void 0?null:g;return[function(){return k(h())},D===null?void 0:function(){return k(D())}]},[h,g,v,x]);var I=n(c,b[0],b[1]);return o(function(){S.hasValue=!0,S.value=I},[I]),a(I),I},R4}var Bz;function lTe(){return Bz||(Bz=1,L4.exports=sTe()),L4.exports}var uTe=lTe();function cTe(e){e()}function dTe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){cTe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var zz={notify(){},get:()=>[]};function fTe(e,t){let r,n=zz,i=0,o=!1;function l(I){g();const k=n.subscribe(I);let M=!1;return()=>{M||(M=!0,k(),v())}}function a(){n.notify()}function c(){S.onStateChange&&S.onStateChange()}function h(){return o}function g(){i++,r||(r=e.subscribe(c),n=dTe())}function v(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=zz)}function x(){o||(o=!0,g())}function b(){o&&(o=!1,v())}const S={addNestedSub:l,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:h,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>n};return S}var hTe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pTe=hTe(),mTe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",gTe=mTe(),yTe=()=>pTe||gTe?J.useLayoutEffect:J.useEffect,vTe=yTe(),bTe=Symbol.for("react-redux-context"),_Te=typeof globalThis<"u"?globalThis:{};function xTe(){if(!J.createContext)return{};const e=_Te[bTe]??=new Map;let t=e.get(J.createContext);return t||(t=J.createContext(null),e.set(J.createContext,t)),t}var $h=xTe();function wTe(e){const{children:t,context:r,serverState:n,store:i}=e,o=J.useMemo(()=>{const c=fTe(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),l=J.useMemo(()=>i.getState(),[i]);vTe(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,l]);const a=r||$h;return J.createElement(a.Provider,{value:o},t)}var T3e=wTe;function lA(e=$h){return function(){return J.useContext(e)}}var bG=lA();function _G(e=$h){const t=e===$h?bG:lA(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var STe=_G();function CTe(e=$h){const t=e===$h?STe:_G(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var xG=CTe(),ETe=(e,t)=>e===t;function TTe(e=$h){const t=e===$h?bG:lA(e),r=(n,i={})=>{const{equalityFn:o=ETe}=typeof i=="function"?{equalityFn:i}:i,l=t(),{store:a,subscription:c,getServerState:h}=l;J.useRef(!0);const g=J.useCallback({[n.name](x){return n(x)}}[n.name],[n]),v=uTe.useSyncExternalStoreWithSelector(c.addNestedSub,a.getState,h||a.getState,g,o);return J.useDebugValue(v),v};return Object.assign(r,{withTypes:()=>r}),r}var jp=TTe();function Bl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var PTe=typeof Symbol=="function"&&Symbol.observable||"@@observable",jz=PTe,D4=()=>Math.random().toString(36).substring(7).split("").join("."),ITe={INIT:`@@redux/INIT${D4()}`,REPLACE:`@@redux/REPLACE${D4()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${D4()}`},Gx=ITe;function uA(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wG(e,t,r){if(typeof e!="function")throw new Error(Bl(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Bl(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Bl(1));return r(wG)(e,t)}let n=e,i=t,o=new Map,l=o,a=0,c=!1;function h(){l===o&&(l=new Map,o.forEach((k,M)=>{l.set(M,k)}))}function g(){if(c)throw new Error(Bl(3));return i}function v(k){if(typeof k!="function")throw new Error(Bl(4));if(c)throw new Error(Bl(5));let M=!0;h();const O=a++;return l.set(O,k),function(){if(M){if(c)throw new Error(Bl(6));M=!1,h(),l.delete(O),o=null}}}function x(k){if(!uA(k))throw new Error(Bl(7));if(typeof k.type>"u")throw new Error(Bl(8));if(typeof k.type!="string")throw new Error(Bl(17));if(c)throw new Error(Bl(9));try{c=!0,i=n(i,k)}finally{c=!1}return(o=l).forEach(O=>{O()}),k}function b(k){if(typeof k!="function")throw new Error(Bl(10));n=k,x({type:Gx.REPLACE})}function S(){const k=v;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Bl(11));function O(){const D=M;D.next&&D.next(g())}return O(),{unsubscribe:k(O)}},[jz](){return this}}}return x({type:Gx.INIT}),{dispatch:x,subscribe:v,getState:g,replaceReducer:b,[jz]:S}}function kTe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Gx.INIT})>"u")throw new Error(Bl(12));if(typeof r(void 0,{type:Gx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bl(13))})}function ATe(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let i;try{kTe(r)}catch(o){i=o}return function(l={},a){if(i)throw i;let c=!1;const h={};for(let g=0;g<n.length;g++){const v=n[g],x=r[v],b=l[v],S=x(b,a);if(typeof S>"u")throw a&&a.type,new Error(Bl(14));h[v]=S,c=c||S!==b}return c=c||n.length!==Object.keys(l).length,c?h:l}}function Hx(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function MTe(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Bl(15))};const l={getState:i.getState,dispatch:(c,...h)=>o(c,...h)},a=e.map(c=>c(l));return o=Hx(...a)(i.dispatch),{...i,dispatch:o}}}function LTe(e){return uA(e)&&"type"in e&&typeof e.type=="string"}var SG=Symbol.for("immer-nothing"),qz=Symbol.for("immer-draftable"),xc=Symbol.for("immer-state");function ad(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var my=Object.getPrototypeOf;function em(e){return!!e&&!!e[xc]}function Yf(e){return e?CG(e)||Array.isArray(e)||!!e[qz]||!!e.constructor?.[qz]||A1(e)||gw(e):!1}var RTe=Object.prototype.constructor.toString();function CG(e){if(!e||typeof e!="object")return!1;const t=my(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===RTe}function Wx(e,t){mw(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function mw(e){const t=e[xc];return t?t.type_:Array.isArray(e)?1:A1(e)?2:gw(e)?3:0}function tP(e,t){return mw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function EG(e,t,r){const n=mw(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function DTe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function A1(e){return e instanceof Map}function gw(e){return e instanceof Set}function xp(e){return e.copy_||e.base_}function rP(e,t){if(A1(e))return new Map(e);if(gw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=CG(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[xc];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const l=i[o],a=n[l];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[l]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[l]})}return Object.create(my(e),n)}else{const n=my(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function cA(e,t=!1){return yw(e)||em(e)||!Yf(e)||(mw(e)>1&&Object.defineProperties(e,{set:{value:e_},add:{value:e_},clear:{value:e_},delete:{value:e_}}),Object.freeze(e),t&&Object.values(e).forEach(r=>cA(r,!0))),e}function e_(){ad(2)}function yw(e){return Object.isFrozen(e)}var NTe={};function tm(e){const t=NTe[e];return t||ad(0,e),t}var W0;function TG(){return W0}function OTe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $z(e,t){t&&(tm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function nP(e){iP(e),e.drafts_.forEach(FTe),e.drafts_=null}function iP(e){e===W0&&(W0=e.parent_)}function Vz(e){return W0=OTe(W0,e)}function FTe(e){const t=e[xc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Uz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[xc].modified_&&(nP(t),ad(4)),Yf(e)&&(e=Xx(t,e),t.parent_||Yx(t,e)),t.patches_&&tm("Patches").generateReplacementPatches_(r[xc].base_,e,t.patches_,t.inversePatches_)):e=Xx(t,r,[]),nP(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SG?e:void 0}function Xx(e,t,r){if(yw(t))return t;const n=t[xc];if(!n)return Wx(t,(i,o)=>Gz(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Yx(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,l=!1;n.type_===3&&(o=new Set(i),i.clear(),l=!0),Wx(o,(a,c)=>Gz(e,n,i,a,c,r,l)),Yx(e,i,!1),r&&e.patches_&&tm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Gz(e,t,r,n,i,o,l){if(em(i)){const a=o&&t&&t.type_!==3&&!tP(t.assigned_,n)?o.concat(n):void 0,c=Xx(e,i,a);if(EG(r,n,c),em(c))e.canAutoFreeze_=!1;else return}else l&&r.add(i);if(Yf(i)&&!yw(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Xx(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(A1(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Yx(e,i)}}function Yx(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&cA(t,r)}function BTe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:TG(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=dA;r&&(i=[n],o=X0);const{revoke:l,proxy:a}=Proxy.revocable(i,o);return n.draft_=a,n.revoke_=l,a}var dA={get(e,t){if(t===xc)return e;const r=xp(e);if(!tP(r,t))return zTe(e,r,t);const n=r[t];return e.finalized_||!Yf(n)?n:n===N4(e.base_,t)?(O4(e),e.copy_[t]=oP(n,e)):n},has(e,t){return t in xp(e)},ownKeys(e){return Reflect.ownKeys(xp(e))},set(e,t,r){const n=PG(xp(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=N4(xp(e),t),o=i?.[xc];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(DTe(r,i)&&(r!==void 0||tP(e.base_,t)))return!0;O4(e),aP(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return N4(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,O4(e),aP(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=xp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ad(11)},getPrototypeOf(e){return my(e.base_)},setPrototypeOf(){ad(12)}},X0={};Wx(dA,(e,t)=>{X0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});X0.deleteProperty=function(e,t){return X0.set.call(this,e,t,void 0)};X0.set=function(e,t,r){return dA.set.call(this,e[0],t,r,e[0])};function N4(e,t){const r=e[xc];return(r?xp(r):e)[t]}function zTe(e,t,r){const n=PG(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function PG(e,t){if(!(t in e))return;let r=my(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=my(r)}}function aP(e){e.modified_||(e.modified_=!0,e.parent_&&aP(e.parent_))}function O4(e){e.copy_||(e.copy_=rP(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var jTe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const l=this;return function(c=o,...h){return l.produce(c,g=>r.call(this,g,...h))}}typeof r!="function"&&ad(6),n!==void 0&&typeof n!="function"&&ad(7);let i;if(Yf(t)){const o=Vz(this),l=oP(t,void 0);let a=!0;try{i=r(l),a=!1}finally{a?nP(o):iP(o)}return $z(o,n),Uz(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===SG&&(i=void 0),this.autoFreeze_&&cA(i,!0),n){const o=[],l=[];tm("Patches").generateReplacementPatches_(t,i,o,l),n(o,l)}return i}else ad(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...a)=>this.produceWithPatches(l,c=>t(c,...a));let n,i;return[this.produce(t,r,(l,a)=>{n=l,i=a}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Yf(e)||ad(8),em(e)&&(e=qTe(e));const t=Vz(this),r=oP(e,void 0);return r[xc].isManual_=!0,iP(t),r}finishDraft(e,t){const r=e&&e[xc];(!r||!r.isManual_)&&ad(9);const{scope_:n}=r;return $z(n,t),Uz(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=tm("Patches").applyPatches_;return em(e)?n(e,t):this.produce(e,i=>n(i,t))}};function oP(e,t){const r=A1(e)?tm("MapSet").proxyMap_(e,t):gw(e)?tm("MapSet").proxySet_(e,t):BTe(e,t);return(t?t.scope_:TG()).drafts_.push(r),r}function qTe(e){return em(e)||ad(10,e),IG(e)}function IG(e){if(!Yf(e)||yw(e))return e;const t=e[xc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=rP(e,t.scope_.immer_.useStrictShallowCopy_)}else r=rP(e,!0);return Wx(r,(n,i)=>{EG(r,n,IG(i))}),t&&(t.finalized_=!1),r}var $Te=new jTe,kG=$Te.produce;function AG(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var VTe=AG(),UTe=AG,GTe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hx:Hx.apply(null,arguments)};function Hz(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(jf(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>LTe(n)&&n.type===e,r}var MG=class Kv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Kv.prototype)}static get[Symbol.species](){return Kv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Kv(...t[0].concat(this)):new Kv(...t.concat(this))}};function Wz(e){return Yf(e)?kG(e,()=>{}):e}function t_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function HTe(e){return typeof e=="boolean"}var WTe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let l=new MG;return r&&(HTe(r)?l.push(VTe):l.push(UTe(r.extraArgument))),l},XTe="RTK_autoBatch",Xz=e=>t=>{setTimeout(t,e)},YTe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,l=!1;const a=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Xz(10):e.type==="callback"?e.queueNotification:Xz(e.timeout),h=()=>{l=!1,o&&(o=!1,a.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const v=()=>i&&g(),x=n.subscribe(v);return a.add(g),()=>{x(),a.delete(g)}},dispatch(g){try{return i=!g?.meta?.[XTe],o=!i,o&&(l||(l=!0,c(h))),n.dispatch(g)}finally{i=!0}}})},ZTe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new MG(e);return n&&i.push(YTe(typeof n=="object"?n:void 0)),i};function KTe(e){const t=WTe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(uA(r))a=ATe(r);else throw new Error(jf(1));let c;typeof n=="function"?c=n(t):c=t();let h=Hx;i&&(h=GTe({trace:!1,...typeof i=="object"&&i}));const g=MTe(...c),v=ZTe(g);let x=typeof l=="function"?l(v):v();const b=h(...x);return wG(a,o,b)}function LG(e){const t={},r=[];let n;const i={addCase(o,l){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(jf(28));if(a in t)throw new Error(jf(29));return t[a]=l,i},addAsyncThunk(o,l){return l.pending&&(t[o.pending.type]=l.pending),l.rejected&&(t[o.rejected.type]=l.rejected),l.fulfilled&&(t[o.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:o.settled,reducer:l.settled}),i},addMatcher(o,l){return r.push({matcher:o,reducer:l}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function JTe(e){return typeof e=="function"}function QTe(e,t){let[r,n,i]=LG(t),o;if(JTe(e))o=()=>Wz(e());else{const a=Wz(e);o=()=>a}function l(a=o(),c){let h=[r[c.type],...n.filter(({matcher:g})=>g(c)).map(({reducer:g})=>g)];return h.filter(g=>!!g).length===0&&(h=[i]),h.reduce((g,v)=>{if(v)if(em(g)){const b=v(g,c);return b===void 0?g:b}else{if(Yf(g))return kG(g,x=>v(x,c));{const x=v(g,c);if(x===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return g},a)}return l.getInitialState=o,l}var e3e=Symbol.for("rtk-slice-createasyncthunk");function t3e(e,t){return`${e}/${t}`}function r3e({creators:e}={}){const t=e?.asyncThunk?.[e3e];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(jf(11));const l=(typeof n.reducers=="function"?n.reducers(a3e()):n.reducers)||{},a=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(F,D){const q=typeof F=="string"?F:F.type;if(!q)throw new Error(jf(12));if(q in c.sliceCaseReducersByType)throw new Error(jf(13));return c.sliceCaseReducersByType[q]=D,h},addMatcher(F,D){return c.sliceMatchers.push({matcher:F,reducer:D}),h},exposeAction(F,D){return c.actionCreators[F]=D,h},exposeCaseReducer(F,D){return c.sliceCaseReducersByName[F]=D,h}};a.forEach(F=>{const D=l[F],q={reducerName:F,type:t3e(i,F),createNotation:typeof n.reducers=="function"};s3e(D)?u3e(q,D,h,t):o3e(q,D,h)});function g(){const[F={},D=[],q=void 0]=typeof n.extraReducers=="function"?LG(n.extraReducers):[n.extraReducers],z={...F,...c.sliceCaseReducersByType};return QTe(n.initialState,U=>{for(let H in z)U.addCase(H,z[H]);for(let H of c.sliceMatchers)U.addMatcher(H.matcher,H.reducer);for(let H of D)U.addMatcher(H.matcher,H.reducer);q&&U.addDefaultCase(q)})}const v=F=>F,x=new Map,b=new WeakMap;let S;function I(F,D){return S||(S=g()),S(F,D)}function k(){return S||(S=g()),S.getInitialState()}function M(F,D=!1){function q(U){let H=U[F];return typeof H>"u"&&D&&(H=t_(b,q,k)),H}function z(U=v){const H=t_(x,D,()=>new WeakMap);return t_(H,U,()=>{const X={};for(const[ie,ee]of Object.entries(n.selectors??{}))X[ie]=n3e(ee,U,()=>t_(b,U,k),D);return X})}return{reducerPath:F,getSelectors:z,get selectors(){return z(q)},selectSlice:q}}const O={name:i,reducer:I,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:k,...M(o),injectInto(F,{reducerPath:D,...q}={}){const z=D??o;return F.inject({reducerPath:z,reducer:I},q),{...O,...M(z,!0)}}};return O}}function n3e(e,t,r,n){function i(o,...l){let a=t(o);return typeof a>"u"&&n&&(a=r()),e(a,...l)}return i.unwrapped=e,i}var i3e=r3e();function a3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function o3e({type:e,reducerName:t,createNotation:r},n,i){let o,l;if("reducer"in n){if(r&&!l3e(n))throw new Error(jf(17));o=n.reducer,l=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?Hz(e,l):Hz(e))}function s3e(e){return e._reducerDefinitionType==="asyncThunk"}function l3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function u3e({type:e,reducerName:t},r,n,i){if(!i)throw new Error(jf(18));const{payloadCreator:o,fulfilled:l,pending:a,rejected:c,settled:h,options:g}=r,v=i(e,o,g);n.exposeAction(t,v),l&&n.addCase(v.fulfilled,l),a&&n.addCase(v.pending,a),c&&n.addCase(v.rejected,c),h&&n.addMatcher(v.settled,h),n.exposeCaseReducer(t,{fulfilled:l||r_,pending:a||r_,rejected:c||r_,settled:h||r_})}function r_(){}function jf(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function RG(e,t,r){t.forEach(n=>{e(n,r),n.layers&&n.layers.length>0&&RG(e,n.layers,n)})}const c3e={mapConfigs:{}},DG=i3e({name:"mapConfig",initialState:c3e,reducers:{setMapConfig:(e,t)=>{const r=t.payload.mapConfig,n=t.payload.key;e.mapConfigs[n]=r},removeMapConfig:(e,t)=>{delete e.mapConfigs[t.payload.key]},setLayerInMapConfig:(e,t)=>{const{mapConfigKey:r,layer:n}=t.payload,i=e.mapConfigs[r];if(i){for(let o=0;o<i.layers.length;o++)if(i.layers[o].uuid===n.uuid){i.layers[o]=n;break}}},removeLayerFromMapConfig:(e,t)=>{const{mapConfigKey:r,layerUuid:n}=t.payload,i=e.mapConfigs[r];if(i){const o=i.layers.findIndex(l=>l.uuid===n);o!==-1&&(delete i.layers[o],RG(function(l,a){a&&a.layers&&(a.layers=a.layers.filter(c=>c.uuid!==n))},i.layerOrder))}},updateLayerOrder:(e,t)=>{const{mapConfigKey:r,newOrder:n}=t.payload,i=e.mapConfigs[r];i&&(i.layerOrder=n)},setMasterVisible(e,t){const{mapConfigKey:r,layerId:n,masterVisible:i}=t.payload,o=e.mapConfigs[r];if(o){const l=o.layers.findIndex(a=>a.uuid===n);if(l!==-1){const a=o.layers[l];if(a){const c=[...o.layers];a.type==="folder"&&o.layerOrder.forEach(h=>{h.uuid===n&&h.layers?.forEach(g=>{const v=o.layers.findIndex(b=>b.uuid===g.uuid),x=c[v];c[v]={...x,masterVisible:i},x?.type==="vt"&&x?.config?.layers&&(x.config.layers=x.config.layers.map(b=>({...b,masterVisible:i})))})}),a.type==="vt"&&a?.config?.layers&&(a.config.layers=a.config.layers.map(h=>({...h,masterVisible:i}))),e.mapConfigs[r].layers=c}}}}}}),NG=(e,t)=>{const r=e.mapConfigs;for(const n in r){const i=r[n],o=i.layers.findIndex(a=>a.uuid===t),l=i.layers[o];if(l)return l}return null},d3e=(e,t)=>{const r=e.mapConfig.mapConfigs[t];if(!r)return[];const n=r.layerOrder,i=[];function o(l){l.forEach(a=>{i.push(a.uuid),a.layers&&a.layers.length>0&&o(a.layers)})}return o(n),i},P3e=KTe({reducer:{mapConfig:DG.reducer}}),{setMapConfig:I3e,removeMapConfig:k3e,setLayerInMapConfig:OG,removeLayerFromMapConfig:A3e,updateLayerOrder:f3e,setMasterVisible:h3e}=DG.actions,Yz=Ei(Z.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}));function sP(e){return Z.jsx(B0,{value:e.value,label:"Color",onChange:t=>{typeof e.onChange=="function"&&e.onChange(t)}})}try{sP.displayName="PaintPropsColorPicker",sP.__docgenInfo={description:"",displayName:"PaintPropsColorPicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}}}catch{}const p3e=Ar(Nc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"}),m3e=Ar(vo)({marginLeft:"61px"}),FG={"circle-color":"colorpicker","circle-radius":"slider","circle-stroke-color":"colorpicker","circle-stroke-width":"slider","fill-color":"colorpicker","fill-outline-color":"colorpicker","line-color":"colorpicker","line-width":"slider","line-blur":"slider"},g3e=Object.keys(FG),y3e={"circle-stroke-width":{step:1,min:1,max:20},"circle-radius":{step:1,min:1,max:100},"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function lP(e){const t=J.useRef(Math.round(Math.random()*1e10)),r=NG(jp(a=>a.mapConfig),e.layerUuid),n=xG(),i=J.useMemo(()=>r?.config?.options?.paint?r?.config?.options?.paint:{},[r?.config?.options?.paint]),o=(a,c)=>{const h={...r,config:{...r?.config,options:{...r?.config?.options,paint:{...r?.config?.options?.paint,[a]:c}}}};n(OG({mapConfigKey:e.mapConfigKey,layer:h}))},l=J.useCallback(a=>{if(i?.[a]&&g3e.indexOf(a)!==-1&&(typeof i[a]=="number"||typeof i[a]=="string")){const c=Z.jsx(Qo,{id:a+"_label",gutterBottom:!0,children:a});switch(FG[a]){case"slider":return Z.jsxs(ft.Fragment,{children:[c,Z.jsx(KP,{...y3e[a],value:i[a],valueLabelDisplay:"auto",onChange:(h,g)=>{g&&typeof g=="number"&&o(a,g)}})]},a);case"numberfield":return Z.jsxs(ft.Fragment,{children:[c,Z.jsx(E2,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:i[a],onChange:h=>{h?.target?.value&&o(a,parseInt(h.target.value))}})]},a);case"colorpicker":return Z.jsxs(ft.Fragment,{children:[c,Z.jsx(vo,{sx:{"& > div":{width:"initial !important"}},children:Z.jsx(sP,{value:i[a],onChange:h=>{o(a,h)}},a)})]},a)}}return null},[i]);return Z.jsx(Z.Fragment,{children:Z.jsx(p3e,{children:Z.jsx(Bc,{children:Z.jsx(m3e,{children:i&&Object.keys(i).map(a=>l(a))})},t.current+"_paintPropForm")})})}try{lP.displayName="LayerPropertyForm",lP.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{layerUuid:{defaultValue:null,description:"",name:"layerUuid",required:!0,type:{name:"string"}},mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}}}}}catch{}const v3e=Ar(pc)({padding:"4px",marginTop:"-3px"}),b3e=Ar(pc)({marginLeft:"20px"}),Iv=Ar(Bc)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}),F4=Ar(S0)({minWidth:"30px"}),n_=Ar(pc)({marginRight:"0px",padding:"0px"}),Zz=Ar(vo)(({open:e})=>({display:e?"block":"none"})),Kz=Ar(gd)({marginLeft:"50px"});function Zx(e){const[t,r]=J.useState(!1),[n,i]=J.useState(!1),o=NG(jp(k=>k.mapConfig),e.layerOrderConfig.uuid),[l,a]=J.useState(!1),c=xG(),h=jp(k=>k.mapConfig.mapConfigs[e.mapConfigKey]);function g(k,M){const O=JSON.parse(JSON.stringify(h.layerOrder)),F=D=>{let q=!1;return D.forEach((z,U)=>{if(!q)if(z.uuid===k){const H=M(U);if(H<0||H>=D.length)throw new Error("New position is out of bounds");const[X]=D.splice(U,1);D.splice(H,0,X),q=!0}else z.layers&&F(z.layers)&&(q=!0)}),q};F(O),c(f3e({mapConfigKey:e.mapConfigKey,newOrder:O}))}const v=k=>{g(k,M=>M+1)},x=k=>{g(k,M=>M-1)};function b(k,M=""){const O=!k;o&&(S(o,O,M),(o.type==="folder"||o.type==="vt"&&M==="")&&c(h3e({mapConfigKey:e.mapConfigKey,layerId:o.uuid,masterVisible:O})))}function S(k,M,O){let F={...k};if(k?.type==="folder")F={...k,visible:!k.visible};else switch(k?.type){case"geojson":{F={...k,config:{...k.config,options:{...k?.config?.options,layout:{...k?.config?.options?.layout,visibility:M?"visible":"none"}}}};break}case"vt":{let D=!1;const q=k.config.layers.map(z=>z.id===O?(D=!0,{...z,layout:{...z.layout,visibility:M?"visible":"none"}}):z);D?F={...k,config:{...k.config,layers:q}}:F={...k,visible:M,config:{...k.config,layers:q}};break}case"wms":{F={...k,visible:M,config:{...k.config,visible:M}};break}}return c(OG({mapConfigKey:e.mapConfigKey,layer:F})),F}function I(k){let M=!0;if(k?.type==="geojson")return M=k?.config?.options?.layout?.visibility!=="none",Z.jsxs(Z.Fragment,{children:[Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:Z.jsxs(Z.Fragment,{children:[e?.buttons,Z.jsx(n_,{disabled:!1,onClick:()=>{v(k.uuid)},children:Z.jsx(P_,{})}),Z.jsx(n_,{disabled:!1,onClick:()=>{x(k.uuid)},children:Z.jsx(I_,{})}),k.configurable&&Z.jsx(Z.Fragment,{children:Z.jsx(v3e,{edge:"end","aria-label":"settings",onClick:()=>{r(O=>!O)},children:Z.jsx(WI,{})})})]}),children:[Z.jsx(kf,{children:Z.jsx(Af,{checked:M,disabled:k.masterVisible===!1,onClick:()=>b(M)})}),Z.jsx(Ac,{variant:"layerlist",primary:k.name||"",secondary:e.description,primaryTypographyProps:{overflow:"hidden"}}),e.buttons]},k.uuid),k.configurable&&t&&Z.jsxs(Z.Fragment,{children:[e.showDeleteButton&&Z.jsxs(Z.Fragment,{children:[Z.jsx(b3e,{edge:"end","aria-label":"delete",onClick:()=>{},children:Z.jsx(v1,{})}),n&&Z.jsx(fy,{open:n,onConfirm:()=>{i(!1)},onCancel:()=>{i(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]}),Z.jsx(lP,{layerUuid:k.uuid,mapConfigKey:e.mapConfigKey})]})]});if(k?.type==="vt")return Z.jsxs(Z.Fragment,{children:[Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:void 0,children:[Z.jsxs(F4,{children:[Z.jsx(n_,{edge:"end","aria-label":"open",onClick:()=>a(!l),children:l?Z.jsx(dx,{}):Z.jsx(Yz,{})}),Z.jsx(kf,{children:Z.jsx(Af,{checked:k.visible,disabled:k.masterVisible===!1,onClick:()=>b(k.visible??!1)})})]}),Z.jsx(Ac,{primary:k.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},k.uuid),Z.jsx(Zz,{open:l,children:Z.jsx(Kz,{disablePadding:!0,children:k.config?.layers?.map(O=>Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:void 0,children:[" ",Z.jsx(F4,{children:Z.jsx(kf,{children:Z.jsx(Af,{checked:(O?.layout?.visibility??"visible")==="visible",disabled:O?.masterVisible===!1,onClick:()=>b(O?.layout?.visibility==="visible",O.id)})})}),Z.jsx(Ac,{variant:"layerlist",primary:O["source-layer"],primaryTypographyProps:{overflow:"hidden"}},O.id)]},O.id))})},k.uuid+"_list")]});if(k?.type==="wms"){const O=k.config?.visible??!0;return Z.jsx(Z.Fragment,{children:Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:void 0,children:[Z.jsx(kf,{children:Z.jsx(Af,{checked:O,disabled:k.masterVisible===!1,onClick:()=>b(O)})}),Z.jsx(Ac,{primary:k.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},k.uuid)})}return k.type==="folder"?Z.jsxs(Z.Fragment,{children:[Z.jsxs(Iv,{sx:{...e.listItemSx},children:[Z.jsxs(F4,{children:[Z.jsx(n_,{edge:"end","aria-label":"open",onClick:()=>a(!l),children:l?Z.jsx(dx,{}):Z.jsx(Yz,{})}),Z.jsx(kf,{children:Z.jsx(Af,{checked:k.visible,disabled:k.masterVisible,onClick:()=>b(k.visible?k.visible:!1)})})]}),Z.jsx(Ac,{primary:k.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},k.uuid),Z.jsx(Zz,{open:l,children:Z.jsx(Kz,{disablePadding:!0,children:e?.layerOrderConfig?.layers?.map(O=>Z.jsx(Zx,{layerOrderConfig:O,mapConfigKey:e.mapConfigKey},O.uuid))})},k.uuid+"_list")]}):Z.jsx(Z.Fragment,{})}return Z.jsx(Z.Fragment,{children:o&&I(o)})}try{Zx.displayName="LayerTreeListItem",Zx.__docgenInfo={description:"",displayName:"LayerTreeListItem",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string | undefined"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},setLayerState:{defaultValue:null,description:"",name:"setLayerState",required:!1,type:{name:"((state: unknown) => void) | undefined"}},showDeleteButton:{defaultValue:null,description:"",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},listItemSx:{defaultValue:null,description:"",name:"listItemSx",required:!1,type:{name:"SxProps | undefined"}},buttons:{defaultValue:null,description:"",name:"buttons",required:!1,type:{name:"Element | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}},mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}},layerOrderConfig:{defaultValue:null,description:"",name:"layerOrderConfig",required:!0,type:{name:"LayerOrderItem"}}}}}catch{}const _3e=Ar(gd)({marginTop:"15px"});function Jz(e){const t=jp(r=>r.mapConfig.mapConfigs?.[e.mapConfigKey]?.layerOrder);return Z.jsx(_3e,{children:t?.map?.(r=>Z.jsx(Zx,{layerOrderConfig:r,mapConfigKey:e.mapConfigKey},r.uuid))})}try{Jz.displayName="LayerTree",Jz.__docgenInfo={description:"",displayName:"LayerTree",props:{mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}}}}}catch{}function Qz(e){const t=jp(c=>c.mapConfig.mapConfigs?.[e.mapConfigKey]?.layers),r=jp(c=>c.mapConfig.mapConfigs?.[e.mapConfigKey]?.layerOrder),n=da({mapId:e?.mapId}),i=jp(c=>d3e(c,e.mapConfigKey)),o=J.useRef([]);J.useEffect(()=>{if(!n.map||!r)return;const c=(g,v,x)=>{for(let b=0;b<g.length;b++){const S=g[b],I=v?v[b]:null;if(S.uuid!==I?.uuid&&x.getLayer(S.uuid)){const k=b>0?g[b-1].uuid:void 0;x.moveLayer(S.uuid,k)}if(S.layers&&S.layers.length>0){const k=I?.layers||[];c(S.layers,k,x)}}},h=o.current;c(r,h,n.map),o.current=r},[r,n.map]);const l=J.useMemo(()=>["order-background",...i.map(h=>"layer_id_"+h),"order-labels"],[i]);function a(c){const h=t.findIndex(v=>v.uuid===c.uuid),g=t[h];switch(g?.type){case"geojson":return Z.jsx(Uu,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,...g.config,options:{...g.config.options,layout:{...g?.config?.options?.layout,visibility:g.masterVisible===!1?"none":g?.config?.options?.layout?.visibility?g?.config?.options?.layout?.visibility:"visible"}}},g.uuid);case"vt":{const v=g.config.layers.map(x=>{const b={...x};return b.layout&&(b.layout={...b.layout,visibility:b.masterVisible===!1?"none":b.layout.visibility??"visible"}),b});return Z.jsx(Gg,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,url:g.config.url,layers:v},g.uuid)}case"wms":{const v=g.masterVisible===!1?!1:g.config?.visible;return Z.jsx(kx,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,url:g.config?.url||"",urlParameters:g.config?.urlParameters,visible:v},g.uuid)}case"folder":return c?.layers?c.layers.map(v=>a(v)):Z.jsx(Z.Fragment,{});default:return null}}return Z.jsxs(Z.Fragment,{children:[Z.jsx(Lx,{layerIds:l}),r?.map?.(c=>a(c))]})}try{Qz.displayName="LayerOnMap",Qz.__docgenInfo={description:"",displayName:"LayerOnMap",props:{mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}export{T3 as $,$f as A,Ui as B,v2 as C,UP as D,E3e as E,bP as F,$l as G,C3e as H,ei as I,Qn as J,s2 as K,t1 as L,FL as M,Ar as N,oi as O,Nc as P,dc as Q,Ah as R,w3 as S,lK as T,ty as U,Ac as V,B0 as W,KP as X,IB as Y,Rx as Z,_Se as _,_K as a,Tx as a$,VB as a0,Nz as a1,xO as a2,MB as a3,kx as a4,LB as a5,KW as a6,u9 as a7,K0 as a8,hP as a9,GB as aA,gd as aB,Bc as aC,pc as aD,tz as aE,WB as aF,Px as aG,oT as aH,Rf as aI,lU as aJ,E7 as aK,QB as aL,ez as aM,X4 as aN,AP as aO,Vf as aP,DB as aQ,Gg as aR,YB as aS,JK as aT,vJ as aU,dx as aV,Mx as aW,F3 as aX,Xoe as aY,hu as aZ,zwe as a_,rg as aa,m2 as ab,Uh as ac,lT as ad,I3 as ae,o3 as af,mu as ag,Bne as ah,uT as ai,CR as aj,kh as ak,C2 as al,PB as am,E3 as an,Yn as ao,ai as ap,tn as aq,qn as ar,y7 as as,Xs as at,S7 as au,XB as av,Lx as aw,kB as ax,v0 as ay,nm as az,RR as b,E4 as b0,SSe as b1,kP as b2,Df as b3,eP as b4,s3 as b5,H3 as b6,D3 as b7,Ix as b8,Oz as b9,eTe as ba,l3 as bb,Nf as bc,Z4e as bd,T3e as be,P3e as bf,Jz as bg,xG as bh,I3e as bi,Qz as bj,oTe as bk,Va as bl,Uu as c,dT as d,YD as e,vO as f,fK as g,im as h,GP as i,E2 as j,Ei as k,da as l,Ij as m,cx as n,vo as o,Qo as p,A7 as q,xX as r,Np as s,i3 as t,l1 as u,a3 as v,rm as w,xP as x,mn as y,DY as z};
