const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.es-CDtkQyjk.js","./iframe-DNf3k_ah.js","./preload-helper-D9Z9MdNV.js","./iframe-DG6F43G8.css","./index-DtQ6Ei6g.js","./index-B8Aem304.js"])))=>i.map(i=>d[i]);
import{j as Z,P as kv,r as kf}from"./index-DtQ6Ei6g.js";import{V as k_,r as Q,g as rf,R as ft,b as Vz,c as Sh,a as Y0}from"./iframe-DNf3k_ah.js";import{_ as rS}from"./preload-helper-D9Z9MdNV.js";function zf(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const ld="$$material";function A_(){return A_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A_.apply(null,arguments)}function xW(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function wW(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var SW=(function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(wW(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=xW(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e})(),su="-ms-",M_="-moz-",Ia="-webkit-",Uz="comm",iP="rule",aP="decl",CW="@import",Gz="@keyframes",EW="@layer",TW=Math.abs,Zx=String.fromCharCode,PW=Object.assign;function IW(e,t){return Bl(e,0)^45?(((t<<2^Bl(e,0))<<2^Bl(e,1))<<2^Bl(e,2))<<2^Bl(e,3):0}function Hz(e){return e.trim()}function kW(e,t){return(e=t.exec(e))?e[0]:e}function ka(e,t,r){return e.replace(t,r)}function L4(e,t){return e.indexOf(t)}function Bl(e,t){return e.charCodeAt(t)|0}function m0(e,t,r){return e.slice(t,r)}function qd(e){return e.length}function oP(e){return e.length}function Y1(e,t){return t.push(e),e}function AW(e,t){return e.map(t).join("")}var Kx=1,Zg=1,Wz=0,$u=0,Us=0,by="";function Jx(e,t,r,n,i,o,l){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:Kx,column:Zg,length:l,return:""}}function tv(e,t){return PW(Jx("",null,null,"",null,null,0),e,{length:-e.length},t)}function MW(){return Us}function LW(){return Us=$u>0?Bl(by,--$u):0,Zg--,Us===10&&(Zg=1,Kx--),Us}function fc(){return Us=$u<Wz?Bl(by,$u++):0,Zg++,Us===10&&(Zg=1,Kx++),Us}function Hd(){return Bl(by,$u)}function i_(){return $u}function Z0(e,t){return m0(by,e,t)}function g0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Xz(e){return Kx=Zg=1,Wz=qd(by=e),$u=0,[]}function Yz(e){return by="",e}function a_(e){return Hz(Z0($u-1,R4(e===91?e+2:e===40?e+1:e)))}function RW(e){for(;(Us=Hd())&&Us<33;)fc();return g0(e)>2||g0(Us)>3?"":" "}function DW(e,t){for(;--t&&fc()&&!(Us<48||Us>102||Us>57&&Us<65||Us>70&&Us<97););return Z0(e,i_()+(t<6&&Hd()==32&&fc()==32))}function R4(e){for(;fc();)switch(Us){case e:return $u;case 34:case 39:e!==34&&e!==39&&R4(Us);break;case 40:e===41&&R4(e);break;case 92:fc();break}return $u}function NW(e,t){for(;fc()&&e+Us!==57;)if(e+Us===84&&Hd()===47)break;return"/*"+Z0(t,$u-1)+"*"+Zx(e===47?e:fc())}function OW(e){for(;!g0(Hd());)fc();return Z0(e,$u)}function FW(e){return Yz(o_("",null,null,null,[""],e=Xz(e),0,[0],e))}function o_(e,t,r,n,i,o,l,a,c){for(var p=0,g=0,v=l,x=0,b=0,P=0,I=1,k=1,M=1,O=0,F="",N=i,$=o,j=n,U=F;k;)switch(P=O,O=fc()){case 40:if(P!=108&&Bl(U,v-1)==58){L4(U+=ka(a_(O),"&","&\f"),"&\f")!=-1&&(M=-1);break}case 34:case 39:case 91:U+=a_(O);break;case 9:case 10:case 13:case 32:U+=RW(P);break;case 92:U+=DW(i_()-1,7);continue;case 47:switch(Hd()){case 42:case 47:Y1(BW(NW(fc(),i_()),t,r),c);break;default:U+="/"}break;case 123*I:a[p++]=qd(U)*M;case 125*I:case 59:case 0:switch(O){case 0:case 125:k=0;case 59+g:M==-1&&(U=ka(U,/\f/g,"")),b>0&&qd(U)-v&&Y1(b>32?$M(U+";",n,r,v-1):$M(ka(U," ","")+";",n,r,v-2),c);break;case 59:U+=";";default:if(Y1(j=qM(U,t,r,p,g,i,a,F,N=[],$=[],v),o),O===123)if(g===0)o_(U,t,j,j,N,o,v,a,$);else switch(x===99&&Bl(U,3)===110?100:x){case 100:case 108:case 109:case 115:o_(e,j,j,n&&Y1(qM(e,j,j,0,0,i,a,F,i,N=[],v),$),i,$,v,a,n?N:$);break;default:o_(U,j,j,j,[""],$,0,a,$)}}p=g=b=0,I=M=1,F=U="",v=l;break;case 58:v=1+qd(U),b=P;default:if(I<1){if(O==123)--I;else if(O==125&&I++==0&&LW()==125)continue}switch(U+=Zx(O),O*I){case 38:M=g>0?1:(U+="\f",-1);break;case 44:a[p++]=(qd(U)-1)*M,M=1;break;case 64:Hd()===45&&(U+=a_(fc())),x=Hd(),g=v=qd(F=U+=OW(i_())),O++;break;case 45:P===45&&qd(U)==2&&(I=0)}}return o}function qM(e,t,r,n,i,o,l,a,c,p,g){for(var v=i-1,x=i===0?o:[""],b=oP(x),P=0,I=0,k=0;P<n;++P)for(var M=0,O=m0(e,v+1,v=TW(I=l[P])),F=e;M<b;++M)(F=Hz(I>0?x[M]+" "+O:ka(O,/&\f/g,x[M])))&&(c[k++]=F);return Jx(e,t,r,i===0?iP:a,c,p,g)}function BW(e,t,r){return Jx(e,t,r,Uz,Zx(MW()),m0(e,2,-2),0)}function $M(e,t,r,n){return Jx(e,t,r,aP,m0(e,0,n),m0(e,n+1,-1),n)}function Bg(e,t){for(var r="",n=oP(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function zW(e,t,r,n){switch(e.type){case EW:if(e.children.length)break;case CW:case aP:return e.return=e.return||e.value;case Uz:return"";case Gz:return e.return=e.value+"{"+Bg(e.children,n)+"}";case iP:e.value=e.props.join(",")}return qd(r=Bg(e.children,n))?e.return=e.value+"{"+r+"}":""}function jW(e){var t=oP(e);return function(r,n,i,o){for(var l="",a=0;a<t;a++)l+=e[a](r,n,i,o)||"";return l}}function qW(e){return function(t){t.root||(t=t.return)&&e(t)}}function Zz(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var $W=function(t,r,n){for(var i=0,o=0;i=o,o=Hd(),i===38&&o===12&&(r[n]=1),!g0(o);)fc();return Z0(t,$u)},VW=function(t,r){var n=-1,i=44;do switch(g0(i)){case 0:i===38&&Hd()===12&&(r[n]=1),t[n]+=$W($u-1,r,n);break;case 2:t[n]+=a_(i);break;case 4:if(i===44){t[++n]=Hd()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=Zx(i)}while(i=fc());return t},UW=function(t,r){return Yz(VW(Xz(t),r))},VM=new WeakMap,GW=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!VM.get(n))&&!i){VM.set(t,!0);for(var o=[],l=UW(r,o),a=n.props,c=0,p=0;c<l.length;c++)for(var g=0;g<a.length;g++,p++)t.props[p]=o[c]?l[c].replace(/&\f/g,a[g]):a[g]+" "+l[c]}}},HW=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Kz(e,t){switch(IW(e,t)){case 5103:return Ia+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ia+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ia+e+M_+e+su+e+e;case 6828:case 4268:return Ia+e+su+e+e;case 6165:return Ia+e+su+"flex-"+e+e;case 5187:return Ia+e+ka(e,/(\w+).+(:[^]+)/,Ia+"box-$1$2"+su+"flex-$1$2")+e;case 5443:return Ia+e+su+"flex-item-"+ka(e,/flex-|-self/,"")+e;case 4675:return Ia+e+su+"flex-line-pack"+ka(e,/align-content|flex-|-self/,"")+e;case 5548:return Ia+e+su+ka(e,"shrink","negative")+e;case 5292:return Ia+e+su+ka(e,"basis","preferred-size")+e;case 6060:return Ia+"box-"+ka(e,"-grow","")+Ia+e+su+ka(e,"grow","positive")+e;case 4554:return Ia+ka(e,/([^-])(transform)/g,"$1"+Ia+"$2")+e;case 6187:return ka(ka(ka(e,/(zoom-|grab)/,Ia+"$1"),/(image-set)/,Ia+"$1"),e,"")+e;case 5495:case 3959:return ka(e,/(image-set\([^]*)/,Ia+"$1$`$1");case 4968:return ka(ka(e,/(.+:)(flex-)?(.*)/,Ia+"box-pack:$3"+su+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ia+e+e;case 4095:case 3583:case 4068:case 2532:return ka(e,/(.+)-inline(.+)/,Ia+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qd(e)-1-t>6)switch(Bl(e,t+1)){case 109:if(Bl(e,t+4)!==45)break;case 102:return ka(e,/(.+:)(.+)-([^]+)/,"$1"+Ia+"$2-$3$1"+M_+(Bl(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~L4(e,"stretch")?Kz(ka(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Bl(e,t+1)!==115)break;case 6444:switch(Bl(e,qd(e)-3-(~L4(e,"!important")&&10))){case 107:return ka(e,":",":"+Ia)+e;case 101:return ka(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ia+(Bl(e,14)===45?"inline-":"")+"box$3$1"+Ia+"$2$3$1"+su+"$2box$3")+e}break;case 5936:switch(Bl(e,t+11)){case 114:return Ia+e+su+ka(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ia+e+su+ka(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ia+e+su+ka(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ia+e+su+e+e}return e}var WW=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case aP:t.return=Kz(t.value,t.length);break;case Gz:return Bg([tv(t,{value:ka(t.value,"@","@"+Ia)})],i);case iP:if(t.length)return AW(t.props,function(o){switch(kW(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Bg([tv(t,{props:[ka(o,/:(read-\w+)/,":"+M_+"$1")]})],i);case"::placeholder":return Bg([tv(t,{props:[ka(o,/:(plac\w+)/,":"+Ia+"input-$1")]}),tv(t,{props:[ka(o,/:(plac\w+)/,":"+M_+"$1")]}),tv(t,{props:[ka(o,/:(plac\w+)/,su+"input-$1")]})],i)}return""})}},XW=[WW],YW=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(I){var k=I.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(I),I.setAttribute("data-s",""))})}var i=t.stylisPlugins||XW,o={},l,a=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(I){for(var k=I.getAttribute("data-emotion").split(" "),M=1;M<k.length;M++)o[k[M]]=!0;a.push(I)});var c,p=[GW,HW];{var g,v=[zW,qW(function(I){g.insert(I)})],x=jW(p.concat(i,v)),b=function(k){return Bg(FW(k),x)};c=function(k,M,O,F){g=O,b(k?k+"{"+M.styles+"}":M.styles),F&&(P.inserted[M.name]=!0)}}var P={key:r,sheet:new SW({key:r,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:c};return P.sheet.hydrate(a),P},nS={exports:{}},Da={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UM;function ZW(){if(UM)return Da;UM=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,g=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,x=e?Symbol.for("react.suspense_list"):60120,b=e?Symbol.for("react.memo"):60115,P=e?Symbol.for("react.lazy"):60116,I=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,M=e?Symbol.for("react.responder"):60118,O=e?Symbol.for("react.scope"):60119;function F($){if(typeof $=="object"&&$!==null){var j=$.$$typeof;switch(j){case t:switch($=$.type,$){case c:case p:case n:case o:case i:case v:return $;default:switch($=$&&$.$$typeof,$){case a:case g:case P:case b:case l:return $;default:return j}}case r:return j}}}function N($){return F($)===p}return Da.AsyncMode=c,Da.ConcurrentMode=p,Da.ContextConsumer=a,Da.ContextProvider=l,Da.Element=t,Da.ForwardRef=g,Da.Fragment=n,Da.Lazy=P,Da.Memo=b,Da.Portal=r,Da.Profiler=o,Da.StrictMode=i,Da.Suspense=v,Da.isAsyncMode=function($){return N($)||F($)===c},Da.isConcurrentMode=N,Da.isContextConsumer=function($){return F($)===a},Da.isContextProvider=function($){return F($)===l},Da.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===t},Da.isForwardRef=function($){return F($)===g},Da.isFragment=function($){return F($)===n},Da.isLazy=function($){return F($)===P},Da.isMemo=function($){return F($)===b},Da.isPortal=function($){return F($)===r},Da.isProfiler=function($){return F($)===o},Da.isStrictMode=function($){return F($)===i},Da.isSuspense=function($){return F($)===v},Da.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===n||$===p||$===o||$===i||$===v||$===x||typeof $=="object"&&$!==null&&($.$$typeof===P||$.$$typeof===b||$.$$typeof===l||$.$$typeof===a||$.$$typeof===g||$.$$typeof===k||$.$$typeof===M||$.$$typeof===O||$.$$typeof===I)},Da.typeOf=F,Da}var GM;function KW(){return GM||(GM=1,nS.exports=ZW()),nS.exports}var iS,HM;function JW(){if(HM)return iS;HM=1;var e=KW(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=n,o[e.Memo]=i;function l(P){return e.isMemo(P)?i:o[P.$$typeof]||t}var a=Object.defineProperty,c=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,x=Object.prototype;function b(P,I,k){if(typeof I!="string"){if(x){var M=v(I);M&&M!==x&&b(P,M,k)}var O=c(I);p&&(O=O.concat(p(I)));for(var F=l(P),N=l(I),$=0;$<O.length;++$){var j=O[$];if(!r[j]&&!(k&&k[j])&&!(N&&N[j])&&!(F&&F[j])){var U=g(I,j);try{a(P,j,U)}catch{}}}}return P}return iS=b,iS}JW();var QW=!0;function Jz(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var sP=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||QW===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},lP=function(t,r,n){sP(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function eX(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var tX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rX=/[A-Z]|^ms/g,nX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Qz=function(t){return t.charCodeAt(1)===45},WM=function(t){return t!=null&&typeof t!="boolean"},aS=Zz(function(e){return Qz(e)?e:e.replace(rX,"-$&").toLowerCase()}),XM=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(nX,function(n,i,o){return $d={name:i,styles:o,next:$d},i})}return tX[t]!==1&&!Qz(t)&&typeof r=="number"&&r!==0?r+"px":r};function y0(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return $d={name:i.name,styles:i.styles,next:$d},i.name;var o=r;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)$d={name:l.name,styles:l.styles,next:$d},l=l.next;var a=o.styles+";";return a}return iX(e,t,r)}case"function":{if(e!==void 0){var c=$d,p=r(e);return $d=c,y0(e,t,p)}break}}var g=r;if(t==null)return g;var v=t[g];return v!==void 0?v:g}function iX(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=y0(e,t,r[i])+";";else for(var o in r){var l=r[o];if(typeof l!="object"){var a=l;t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":WM(a)&&(n+=aS(o)+":"+XM(o,a)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var c=0;c<l.length;c++)WM(l[c])&&(n+=aS(o)+":"+XM(o,l[c])+";");else{var p=y0(e,t,l);switch(o){case"animation":case"animationName":{n+=aS(o)+":"+p+";";break}default:n+=o+"{"+p+"}"}}}return n}var YM=/label:\s*([^\s;{]+)\s*(;|$)/g,$d;function K0(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";$d=void 0;var o=e[0];if(o==null||o.raw===void 0)n=!1,i+=y0(r,t,o);else{var l=o;i+=l[0]}for(var a=1;a<e.length;a++)if(i+=y0(r,t,e[a]),n){var c=o;i+=c[a]}YM.lastIndex=0;for(var p="",g;(g=YM.exec(i))!==null;)p+="-"+g[1];var v=eX(i)+p;return{name:v,styles:i,next:$d}}var aX=function(t){return t()},e9=k_.useInsertionEffect?k_.useInsertionEffect:!1,t9=e9||aX,ZM=e9||Q.useLayoutEffect,r9=Q.createContext(typeof HTMLElement<"u"?YW({key:"css"}):null);r9.Provider;var uP=function(t){return Q.forwardRef(function(r,n){var i=Q.useContext(r9);return t(r,i,n)})},J0=Q.createContext({}),cP={}.hasOwnProperty,D4="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",oX=function(t,r){var n={};for(var i in r)cP.call(r,i)&&(n[i]=r[i]);return n[D4]=t,n},sX=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return sP(r,n,i),t9(function(){return lP(r,n,i)}),null},lX=uP(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[D4],o=[n],l="";typeof e.className=="string"?l=Jz(t.registered,o,e.className):e.className!=null&&(l=e.className+" ");var a=K0(o,void 0,Q.useContext(J0));l+=t.key+"-"+a.name;var c={};for(var p in e)cP.call(e,p)&&p!=="css"&&p!==D4&&(c[p]=e[p]);return c.className=l,r&&(c.ref=r),Q.createElement(Q.Fragment,null,Q.createElement(sX,{cache:t,serialized:a,isStringTag:typeof i=="string"}),Q.createElement(i,c))}),uX=lX,KM=function(t,r){var n=arguments;if(r==null||!cP.call(r,"css"))return Q.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=uX,o[1]=oX(t,r);for(var l=2;l<i;l++)o[l]=n[l];return Q.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(KM||(KM={}));var n9=uP(function(e,t){var r=e.styles,n=K0([r],void 0,Q.useContext(J0)),i=Q.useRef();return ZM(function(){var o=t.key+"-global",l=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,c=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),c!==null&&(a=!0,c.setAttribute("data-emotion",o),l.hydrate([c])),i.current=[l,a],function(){l.flush()}},[t]),ZM(function(){var o=i.current,l=o[0],a=o[1];if(a){o[1]=!1;return}if(n.next!==void 0&&lP(t,n.next,!0),l.tags.length){var c=l.tags[l.tags.length-1].nextElementSibling;l.before=c,l.flush()}t.insert("",n,l,!1)},[t,n.name]),null});function dP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return K0(t)}function Q0(){var e=dP.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var cX=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dX=Zz(function(e){return cX.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),fX=dX,hX=function(t){return t!=="theme"},JM=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?fX:hX},QM=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(l){return t.__emotion_forwardProp(l)&&o(l)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},pX=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return sP(r,n,i),t9(function(){return lP(r,n,i)}),null},mX=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,l;r!==void 0&&(o=r.label,l=r.target);var a=QM(t,r,n),c=a||JM(i),p=!c("as");return function(){var g=arguments,v=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)v.push.apply(v,g);else{var x=g[0];v.push(x[0]);for(var b=g.length,P=1;P<b;P++)v.push(g[P],x[P])}var I=uP(function(k,M,O){var F=p&&k.as||i,N="",$=[],j=k;if(k.theme==null){j={};for(var U in k)j[U]=k[U];j.theme=Q.useContext(J0)}typeof k.className=="string"?N=Jz(M.registered,$,k.className):k.className!=null&&(N=k.className+" ");var H=K0(v.concat($),M.registered,j);N+=M.key+"-"+H.name,l!==void 0&&(N+=" "+l);var Y=p&&a===void 0?JM(F):c,ae={};for(var ee in k)p&&ee==="as"||Y(ee)&&(ae[ee]=k[ee]);return ae.className=N,O&&(ae.ref=O),Q.createElement(Q.Fragment,null,Q.createElement(pX,{cache:M,serialized:H,isStringTag:typeof F=="string"}),Q.createElement(F,ae))});return I.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",I.defaultProps=t.defaultProps,I.__emotion_real=I,I.__emotion_base=i,I.__emotion_styles=v,I.__emotion_forwardProp=a,Object.defineProperty(I,"toString",{value:function(){return"."+l}}),I.withComponent=function(k,M){var O=e(k,A_({},r,M,{shouldForwardProp:QM(I,M,!0)}));return O.apply(void 0,v)},I}},gX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],N4=mX.bind(null);gX.forEach(function(e){N4[e]=N4(e)});var oS={exports:{}},sS,eL;function yX(){if(eL)return sS;eL=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sS=e,sS}var lS,tL;function vX(){if(tL)return lS;tL=1;var e=yX();function t(){}function r(){}return r.resetWarningCache=t,lS=function(){function n(l,a,c,p,g,v){if(v!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o},lS}var rL;function bX(){return rL||(rL=1,oS.exports=vX()()),oS.exports}var _X=bX();const _n=rf(_X);function xX(e){return e==null||Object.keys(e).length===0}function i9(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(xX(i)?r:i):t;return Z.jsx(n9,{styles:n})}function a9(e,t){return N4(e,t)}function wX(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const nL=[];function Ph(e){return nL[0]=e,K0(nL)}var uS={exports:{}},Ja={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iL;function SX(){if(iL)return Ja;iL=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function P(I){if(typeof I=="object"&&I!==null){var k=I.$$typeof;switch(k){case e:switch(I=I.type,I){case r:case i:case n:case c:case p:case x:return I;default:switch(I=I&&I.$$typeof,I){case l:case a:case v:case g:return I;case o:return I;default:return k}}case t:return k}}}return Ja.ContextConsumer=o,Ja.ContextProvider=l,Ja.Element=e,Ja.ForwardRef=a,Ja.Fragment=r,Ja.Lazy=v,Ja.Memo=g,Ja.Portal=t,Ja.Profiler=i,Ja.StrictMode=n,Ja.Suspense=c,Ja.SuspenseList=p,Ja.isContextConsumer=function(I){return P(I)===o},Ja.isContextProvider=function(I){return P(I)===l},Ja.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},Ja.isForwardRef=function(I){return P(I)===a},Ja.isFragment=function(I){return P(I)===r},Ja.isLazy=function(I){return P(I)===v},Ja.isMemo=function(I){return P(I)===g},Ja.isPortal=function(I){return P(I)===t},Ja.isProfiler=function(I){return P(I)===i},Ja.isStrictMode=function(I){return P(I)===n},Ja.isSuspense=function(I){return P(I)===c},Ja.isSuspenseList=function(I){return P(I)===p},Ja.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===r||I===i||I===n||I===c||I===p||typeof I=="object"&&I!==null&&(I.$$typeof===v||I.$$typeof===g||I.$$typeof===l||I.$$typeof===o||I.$$typeof===a||I.$$typeof===b||I.getModuleId!==void 0)},Ja.typeOf=P,Ja}var aL;function CX(){return aL||(aL=1,uS.exports=SX()),uS.exports}var o9=CX();function Vd(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s9(e){if(Q.isValidElement(e)||o9.isValidElementType(e)||!Vd(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=s9(e[r])}),t}function ql(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return Vd(e)&&Vd(t)&&Object.keys(t).forEach(i=>{Q.isValidElement(t[i])||o9.isValidElementType(t[i])?n[i]=t[i]:Vd(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&Vd(e[i])?n[i]=ql(e[i],t[i],r):r.clone?n[i]=Vd(t[i])?s9(t[i]):t[i]:n[i]=t[i]}),n}const EX=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function TX(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,o=EX(t),l=Object.keys(o);function a(x){return`@media (min-width:${typeof t[x]=="number"?t[x]:x}${r})`}function c(x){return`@media (max-width:${(typeof t[x]=="number"?t[x]:x)-n/100}${r})`}function p(x,b){const P=l.indexOf(b);return`@media (min-width:${typeof t[x]=="number"?t[x]:x}${r}) and (max-width:${(P!==-1&&typeof t[l[P]]=="number"?t[l[P]]:b)-n/100}${r})`}function g(x){return l.indexOf(x)+1<l.length?p(x,l[l.indexOf(x)+1]):a(x)}function v(x){const b=l.indexOf(x);return b===0?a(l[1]):b===l.length-1?c(l[b]):p(x,l[l.indexOf(x)+1]).replace("@media","@media not all and")}return{keys:l,values:o,up:a,down:c,between:p,only:g,not:v,unit:r,...i}}function oL(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(n.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return r.length?r.reduce((n,i)=>{const o=t[i];return delete n[i],n[i]=o,n},{...t}):t}function PX(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function IX(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,o=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(o)}function kX(e){const t=(o,l)=>o.replace("@media",l?`@container ${l}`:"@container");function r(o,l){o.up=(...a)=>t(e.breakpoints.up(...a),l),o.down=(...a)=>t(e.breakpoints.down(...a),l),o.between=(...a)=>t(e.breakpoints.between(...a),l),o.only=(...a)=>t(e.breakpoints.only(...a),l),o.not=(...a)=>{const c=t(e.breakpoints.not(...a),l);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const n={},i=o=>(r(n,o),n);return r(i),{...e,containerQueries:i}}const AX={borderRadius:4};function Jv(e,t){return t?ql(e,t,{clone:!1}):e}const Qx={xs:0,sm:600,md:900,lg:1200,xl:1536},sL={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Qx[e]}px)`},MX={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:Qx[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function jf(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||sL;return t.reduce((l,a,c)=>(l[o.up(o.keys[c])]=r(t[c]),l),{})}if(typeof t=="object"){const o=n.breakpoints||sL;return Object.keys(t).reduce((l,a)=>{if(PX(o.keys,a)){const c=IX(n.containerQueries?n:MX,a);c&&(l[c]=r(t[a],a))}else if(Object.keys(o.values||Qx).includes(a)){const c=o.up(a);l[c]=r(t[a],a)}else{const c=a;l[c]=t[c]}return l},{})}return r(t)}function l9(e={}){return e.keys?.reduce((r,n)=>{const i=e.up(n);return r[i]={},r},{})||{}}function O4(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function S3e(e,...t){const r=l9(e),n=[r,...t].reduce((i,o)=>ql(i,o),{});return O4(Object.keys(r),n)}function LX(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,o)=>{o<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function C3e({values:e,breakpoints:t,base:r}){const n=r||LX(e,t),i=Object.keys(n);if(i.length===0)return e;let o;return i.reduce((l,a,c)=>(Array.isArray(e)?(l[a]=e[c]!=null?e[c]:e[o],o=c):typeof e=="object"?(l[a]=e[a]!=null?e[a]:e[o],o=a):l[a]=e,l),{})}function Wr(e){if(typeof e!="string")throw new Error(zf(7));return e.charAt(0).toUpperCase()+e.slice(1)}function e2(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function L_(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=e2(e,r)||n,t&&(i=t(i,n,e)),i}function ks(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=l=>{if(l[t]==null)return null;const a=l[t],c=l.theme,p=e2(c,n)||{};return jf(l,a,v=>{let x=L_(p,i,v);return v===x&&typeof v=="string"&&(x=L_(p,i,`${t}${v==="default"?"":Wr(v)}`,v)),r===!1?x:{[r]:x}})};return o.propTypes={},o.filterProps=[t],o}function RX(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const DX={m:"margin",p:"padding"},NX={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},lL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},OX=RX(e=>{if(e.length>2)if(lL[e])e=lL[e];else return[e];const[t,r]=e.split(""),n=DX[t],i=NX[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),fP=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],hP=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...fP,...hP];function e1(e,t,r,n){const i=e2(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const l=Math.abs(o),a=i[l];return o>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function pP(e){return e1(e,"spacing",8)}function t1(e,t){return typeof t=="string"||t==null?t:e(t)}function FX(e,t){return r=>e.reduce((n,i)=>(n[i]=t1(t,r),n),{})}function BX(e,t,r,n){if(!t.includes(r))return null;const i=OX(r),o=FX(i,n),l=e[r];return jf(e,l,o)}function u9(e,t){const r=pP(e.theme);return Object.keys(e).map(n=>BX(e,t,n,r)).reduce(Jv,{})}function cs(e){return u9(e,fP)}cs.propTypes={};cs.filterProps=fP;function ds(e){return u9(e,hP)}ds.propTypes={};ds.filterProps=hP;function c9(e=8,t=pP({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(o=>{const l=t(o);return typeof l=="number"?`${l}px`:l}).join(" ");return r.mui=!0,r}function t2(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?Jv(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function Ac(e){return typeof e!="number"?e:`${e}px solid`}function Gc(e,t){return ks({prop:e,themeKey:"borders",transform:t})}const zX=Gc("border",Ac),jX=Gc("borderTop",Ac),qX=Gc("borderRight",Ac),$X=Gc("borderBottom",Ac),VX=Gc("borderLeft",Ac),UX=Gc("borderColor"),GX=Gc("borderTopColor"),HX=Gc("borderRightColor"),WX=Gc("borderBottomColor"),XX=Gc("borderLeftColor"),YX=Gc("outline",Ac),ZX=Gc("outlineColor"),r2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=e1(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:t1(t,n)});return jf(e,e.borderRadius,r)}return null};r2.propTypes={};r2.filterProps=["borderRadius"];t2(zX,jX,qX,$X,VX,UX,GX,HX,WX,XX,r2,YX,ZX);const n2=e=>{if(e.gap!==void 0&&e.gap!==null){const t=e1(e.theme,"spacing",8),r=n=>({gap:t1(t,n)});return jf(e,e.gap,r)}return null};n2.propTypes={};n2.filterProps=["gap"];const i2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=e1(e.theme,"spacing",8),r=n=>({columnGap:t1(t,n)});return jf(e,e.columnGap,r)}return null};i2.propTypes={};i2.filterProps=["columnGap"];const a2=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=e1(e.theme,"spacing",8),r=n=>({rowGap:t1(t,n)});return jf(e,e.rowGap,r)}return null};a2.propTypes={};a2.filterProps=["rowGap"];const KX=ks({prop:"gridColumn"}),JX=ks({prop:"gridRow"}),QX=ks({prop:"gridAutoFlow"}),eY=ks({prop:"gridAutoColumns"}),tY=ks({prop:"gridAutoRows"}),rY=ks({prop:"gridTemplateColumns"}),nY=ks({prop:"gridTemplateRows"}),iY=ks({prop:"gridTemplateAreas"}),aY=ks({prop:"gridArea"});t2(n2,i2,a2,KX,JX,QX,eY,tY,rY,nY,iY,aY);function zg(e,t){return t==="grey"?t:e}const oY=ks({prop:"color",themeKey:"palette",transform:zg}),sY=ks({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:zg}),lY=ks({prop:"backgroundColor",themeKey:"palette",transform:zg});t2(oY,sY,lY);function uc(e){return e<=1&&e!==0?`${e*100}%`:e}const uY=ks({prop:"width",transform:uc}),mP=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{const n=e.theme?.breakpoints?.values?.[r]||Qx[r];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:uc(r)}};return jf(e,e.maxWidth,t)}return null};mP.filterProps=["maxWidth"];const cY=ks({prop:"minWidth",transform:uc}),dY=ks({prop:"height",transform:uc}),fY=ks({prop:"maxHeight",transform:uc}),hY=ks({prop:"minHeight",transform:uc});ks({prop:"size",cssProperty:"width",transform:uc});ks({prop:"size",cssProperty:"height",transform:uc});const pY=ks({prop:"boxSizing"});t2(uY,mP,cY,dY,fY,hY,pY);const r1={border:{themeKey:"borders",transform:Ac},borderTop:{themeKey:"borders",transform:Ac},borderRight:{themeKey:"borders",transform:Ac},borderBottom:{themeKey:"borders",transform:Ac},borderLeft:{themeKey:"borders",transform:Ac},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ac},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:r2},color:{themeKey:"palette",transform:zg},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:zg},backgroundColor:{themeKey:"palette",transform:zg},p:{style:ds},pt:{style:ds},pr:{style:ds},pb:{style:ds},pl:{style:ds},px:{style:ds},py:{style:ds},padding:{style:ds},paddingTop:{style:ds},paddingRight:{style:ds},paddingBottom:{style:ds},paddingLeft:{style:ds},paddingX:{style:ds},paddingY:{style:ds},paddingInline:{style:ds},paddingInlineStart:{style:ds},paddingInlineEnd:{style:ds},paddingBlock:{style:ds},paddingBlockStart:{style:ds},paddingBlockEnd:{style:ds},m:{style:cs},mt:{style:cs},mr:{style:cs},mb:{style:cs},ml:{style:cs},mx:{style:cs},my:{style:cs},margin:{style:cs},marginTop:{style:cs},marginRight:{style:cs},marginBottom:{style:cs},marginLeft:{style:cs},marginX:{style:cs},marginY:{style:cs},marginInline:{style:cs},marginInlineStart:{style:cs},marginInlineEnd:{style:cs},marginBlock:{style:cs},marginBlockStart:{style:cs},marginBlockEnd:{style:cs},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:n2},rowGap:{style:a2},columnGap:{style:i2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:uc},maxWidth:{style:mP},minWidth:{transform:uc},height:{transform:uc},maxHeight:{transform:uc},minHeight:{transform:uc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function mY(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function gY(e,t){return typeof e=="function"?e(t):e}function yY(){function e(r,n,i,o){const l={[r]:n,theme:i},a=o[r];if(!a)return{[r]:n};const{cssProperty:c=r,themeKey:p,transform:g,style:v}=a;if(n==null)return null;if(p==="typography"&&n==="inherit")return{[r]:n};const x=e2(i,p)||{};return v?v(l):jf(l,n,P=>{let I=L_(x,g,P);return P===I&&typeof P=="string"&&(I=L_(x,g,`${r}${P==="default"?"":Wr(P)}`,P)),c===!1?I:{[c]:I}})}function t(r){const{sx:n,theme:i={},nested:o}=r||{};if(!n)return null;const l=i.unstable_sxConfig??r1;function a(c){let p=c;if(typeof c=="function")p=c(i);else if(typeof c!="object")return c;if(!p)return null;const g=l9(i.breakpoints),v=Object.keys(g);let x=g;return Object.keys(p).forEach(b=>{const P=gY(p[b],i);if(P!=null)if(typeof P=="object")if(l[b])x=Jv(x,e(b,P,i,l));else{const I=jf({theme:i},P,k=>({[b]:k}));mY(I,P)?x[b]=t({sx:P,theme:i,nested:!0}):x=Jv(x,I)}else x=Jv(x,e(b,P,i,l))}),!o&&i.modularCssLayers?{"@layer sx":oL(i,O4(v,x))}:oL(i,O4(v,x))}return Array.isArray(n)?n.map(a):a(n)}return t}const Mh=yY();Mh.filterProps=["sx"];function vY(e,t){const r=this;if(r.vars){if(!r.colorSchemes?.[e]||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return r.palette.mode===e?t:{}}function o2(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={},...l}=e,a=TX(r),c=c9(i);let p=ql({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:c,shape:{...AX,...o}},l);return p=kX(p),p.applyStyles=vY,p=t.reduce((g,v)=>ql(g,v),p),p.unstable_sxConfig={...r1,...l?.unstable_sxConfig},p.unstable_sx=function(v){return Mh({sx:v,theme:this})},p}function bY(e){return Object.keys(e).length===0}function s2(e=null){const t=Q.useContext(J0);return!t||bY(t)?e:t}const _Y=o2();function n1(e=_Y){return s2(e)}function cS(e){const t=Ph(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function d9({styles:e,themeId:t,defaultTheme:r={}}){const n=n1(r),i=t&&n[t]||n;let o=typeof e=="function"?e(i):e;return i.modularCssLayers&&(Array.isArray(o)?o=o.map(l=>cS(typeof l=="function"?l(i):l)):o=cS(o)),Z.jsx(i9,{styles:o})}const xY=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??r1;return Object.keys(e).forEach(n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function gP(e){const{sx:t,...r}=e,{systemProps:n,otherProps:i}=xY(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...l)=>{const a=t(...l);return Vd(a)?{...n,...a}:n}:o={...n,...t},{...i,sx:o}}const uL=e=>e,wY=()=>{let e=uL;return{configure(t){e=t},generate(t){return e(t)},reset(){e=uL}}},yP=wY();function f9(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=f9(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cn(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=f9(e))&&(n&&(n+=" "),n+=t);return n}function h9(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=a9("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Mh);return Q.forwardRef(function(c,p){const g=n1(r),{className:v,component:x="div",...b}=gP(c);return Z.jsx(o,{as:x,ref:p,className:cn(v,i?i(n):n),theme:t&&g[t]||g,...b})})}const SY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Jn(e,t,r="Mui"){const n=SY[t];return n?`${r}-${n}`:`${yP.generate(e)}-${t}`}function Xn(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=Jn(e,i,r)}),n}const CY=Xn("MuiBox",["root"]),ag=h9({defaultClassName:CY.root,generateClassName:yP.generate});function p9(e){const{variants:t,...r}=e,n={variants:t,style:Ph(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=Ph(i.style))}),n}const EY=o2();function dS(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function kp(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function TY(e){return e?(t,r)=>r[e]:null}function PY(e,t,r){e.theme=kY(e.theme)?r:e.theme[t]||e.theme}function s_(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(i=>s_(e,i,r));if(Array.isArray(n?.variants)){let i;if(n.isProcessed)i=r?kp(n.style,r):n.style;else{const{variants:o,...l}=n;i=r?kp(Ph(l),r):l}return m9(e,n.variants,[i],r)}return n?.isProcessed?r?kp(Ph(n.style),r):n.style:r?kp(Ph(n),r):n}function m9(e,t,r=[],n=void 0){let i;e:for(let o=0;o<t.length;o+=1){const l=t[o];if(typeof l.props=="function"){if(i??={...e,...e.ownerState,ownerState:e.ownerState},!l.props(i))continue}else for(const a in l.props)if(e[a]!==l.props[a]&&e.ownerState?.[a]!==l.props[a])continue e;typeof l.style=="function"?(i??={...e,...e.ownerState,ownerState:e.ownerState},r.push(n?kp(Ph(l.style(i)),n):l.style(i))):r.push(n?kp(Ph(l.style),n):l.style)}return r}function g9(e={}){const{themeId:t,defaultTheme:r=EY,rootShouldForwardProp:n=dS,slotShouldForwardProp:i=dS}=e;function o(a){PY(a,t,r)}return(a,c={})=>{wX(a,j=>j.filter(U=>U!==Mh));const{name:p,slot:g,skipVariantsResolver:v,skipSx:x,overridesResolver:b=TY(MY(g)),...P}=c,I=p&&p.startsWith("Mui")||g?"components":"custom",k=v!==void 0?v:g&&g!=="Root"&&g!=="root"||!1,M=x||!1;let O=dS;g==="Root"||g==="root"?O=n:g?O=i:AY(a)&&(O=void 0);const F=a9(a,{shouldForwardProp:O,label:IY(),...P}),N=j=>{if(j.__emotion_real===j)return j;if(typeof j=="function")return function(H){return s_(H,j,H.theme.modularCssLayers?I:void 0)};if(Vd(j)){const U=p9(j);return function(Y){return U.variants?s_(Y,U,Y.theme.modularCssLayers?I:void 0):Y.theme.modularCssLayers?kp(U.style,I):U.style}}return j},$=(...j)=>{const U=[],H=j.map(N),Y=[];if(U.push(o),p&&b&&Y.push(function(ie){const ue=ie.theme.components?.[p]?.styleOverrides;if(!ue)return null;const de={};for(const Me in ue)de[Me]=s_(ie,ue[Me],ie.theme.modularCssLayers?"theme":void 0);return b(ie,de)}),p&&!k&&Y.push(function(ie){const ue=ie.theme?.components?.[p]?.variants;return ue?m9(ie,ue,[],ie.theme.modularCssLayers?"theme":void 0):null}),M||Y.push(Mh),Array.isArray(H[0])){const G=H.shift(),ie=new Array(U.length).fill(""),oe=new Array(Y.length).fill("");let ue;ue=[...ie,...G,...oe],ue.raw=[...ie,...G.raw,...oe],U.unshift(ue)}const ae=[...U,...H,...Y],ee=F(...ae);return a.muiName&&(ee.muiName=a.muiName),ee};return F.withConfig&&($.withConfig=F.withConfig),$}}function IY(e,t){return void 0}function kY(e){for(const t in e)return!1;return!0}function AY(e){return typeof e=="string"&&e.charCodeAt(0)>96}function MY(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const rm=g9();function v0(e,t,r=!1){const n={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=i;if(o==="components"||o==="slots")n[o]={...e[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const l=e[o],a=t[o];if(!a)n[o]=l||{};else if(!l)n[o]=a;else{n[o]={...a};for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const p=c;n[o][p]=v0(l[p],a[p],r)}}}else o==="className"&&r&&t.className?n.className=cn(e?.className,t?.className):o==="style"&&r&&t.style?n.style={...e?.style,...t?.style}:n[o]===void 0&&(n[o]=e[o])}return n}function y9(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:v0(t.components[r].defaultProps,n)}function LY({props:e,name:t,defaultTheme:r,themeId:n}){let i=n1(r);return n&&(i=i[n]||i),y9({theme:i,name:t,props:e})}const $l=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function RY(e,t,r,n,i){const[o,l]=Q.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return $l(()=>{if(!r)return;const a=r(e),c=()=>{l(a.matches)};return c(),a.addEventListener("change",c),()=>{a.removeEventListener("change",c)}},[e,r]),o}const DY={...k_},v9=DY.useSyncExternalStore;function NY(e,t,r,n,i){const o=Q.useCallback(()=>t,[t]),l=Q.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:g}=n(e);return()=>g}return o},[o,e,n,i,r]),[a,c]=Q.useMemo(()=>{if(r===null)return[o,()=>()=>{}];const g=r(e);return[()=>g.matches,v=>(g.addEventListener("change",v),()=>{g.removeEventListener("change",v)})]},[o,r,e]);return v9(c,a,l)}function b9(e={}){const{themeId:t}=e;return function(n,i={}){let o=s2();o&&t&&(o=o[t]||o);const l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:c=l?window.matchMedia:null,ssrMatchMedia:p=null,noSsr:g=!1}=y9({name:"MuiUseMediaQuery",props:i,theme:o});let v=typeof n=="function"?n(o):n;return v=v.replace(/^@media( ?)/m,""),v.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(v9!==void 0?NY:RY)(v,a,c,p,g)}}b9();function wp(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function vP(e,t=0,r=1){return wp(e,t,r)}function OY(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Lh(e){if(e.type)return e;if(e.charAt(0)==="#")return Lh(OY(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(zf(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(zf(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const FY=e=>{const t=Lh(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},Av=(e,t)=>{try{return FY(e)}catch{return e}};function l2(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function _9(e){e=Lh(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),l=(p,g=(p+r/30)%12)=>i-o*Math.max(Math.min(g-3,9-g,1),-1);let a="rgb";const c=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(a+="a",c.push(t[3])),l2({type:a,values:c})}function F4(e){e=Lh(e);let t=e.type==="hsl"||e.type==="hsla"?Lh(_9(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function BY(e,t){const r=F4(e),n=F4(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function R_(e,t){return e=Lh(e),t=vP(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,l2(e)}function fp(e,t,r){try{return R_(e,t)}catch{return e}}function u2(e,t){if(e=Lh(e),t=vP(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return l2(e)}function qa(e,t,r){try{return u2(e,t)}catch{return e}}function c2(e,t){if(e=Lh(e),t=vP(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return l2(e)}function $a(e,t,r){try{return c2(e,t)}catch{return e}}function D_(e,t=.15){return F4(e)>.5?u2(e,t):c2(e,t)}function Z1(e,t,r){try{return D_(e,t)}catch{return e}}const x9=Q.createContext(null);function bP(){return Q.useContext(x9)}const zY=typeof Symbol=="function"&&Symbol.for,jY=zY?Symbol.for("mui.nested"):"__THEME_NESTED__";function qY(e,t){return typeof t=="function"?t(e):{...e,...t}}function $Y(e){const{children:t,theme:r}=e,n=bP(),i=Q.useMemo(()=>{const o=n===null?{...r}:qY(n,r);return o!=null&&(o[jY]=n!==null),o},[r,n]);return Z.jsx(x9.Provider,{value:i,children:t})}const w9=Q.createContext();function VY({value:e,...t}){return Z.jsx(w9.Provider,{value:e??!0,...t})}const i1=()=>Q.useContext(w9)??!1,S9=Q.createContext(void 0);function UY({value:e,children:t}){return Z.jsx(S9.Provider,{value:e,children:t})}function GY(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?v0(i.defaultProps,n,t.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?v0(i,n,t.components.mergeClassNameAndStyle):n}function HY({props:e,name:t}){const r=Q.useContext(S9);return GY({props:e,name:t,theme:{components:r}})}let cL=0;function WY(e){const[t,r]=Q.useState(e),n=e||t;return Q.useEffect(()=>{t==null&&(cL+=1,r(`mui-${cL}`))},[t]),n}const XY={...k_},dL=XY.useId;function $h(e){if(dL!==void 0){const t=dL();return e??t}return WY(e)}function YY(e){const t=s2(),r=$h()||"",{modularCssLayers:n}=e;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!n||t!==null?i="":typeof n=="string"?i=n.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,$l(()=>{const o=document.querySelector("head");if(!o)return;const l=o.firstChild;if(i){if(l&&l.hasAttribute?.("data-mui-layer-order")&&l.getAttribute("data-mui-layer-order")===r)return;const a=document.createElement("style");a.setAttribute("data-mui-layer-order",r),a.textContent=i,o.prepend(a)}else o.querySelector(`style[data-mui-layer-order="${r}"]`)?.remove()},[i,r]),i?Z.jsx(d9,{styles:i}):null}const fL={};function hL(e,t,r,n=!1){return Q.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),l=e?{...t,[e]:o}:o;return n?()=>l:l}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,n])}function C9(e){const{children:t,theme:r,themeId:n}=e,i=s2(fL),o=bP()||fL,l=hL(n,i,r),a=hL(n,o,r,!0),c=(n?l[n]:l).direction==="rtl",p=YY(l);return Z.jsx($Y,{theme:a,children:Z.jsx(J0.Provider,{value:l,children:Z.jsx(VY,{value:c,children:Z.jsxs(UY,{value:n?l[n].components:l.components,children:[p,t]})})})})}const pL={theme:void 0};function ZY(e){let t,r;return function(i){let o=t;return(o===void 0||i.theme!==r)&&(pL.theme=i.theme,o=p9(e(pL)),t=o,r=i.theme),o}}const _P="mode",xP="color-scheme",KY="data-color-scheme";function JY(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=_P,colorSchemeStorageKey:o=xP,attribute:l=KY,colorSchemeNode:a="document.documentElement",nonce:c}=e||{};let p="",g=l;if(l==="class"&&(g=".%s"),l==="data"&&(g="[data-%s]"),g.startsWith(".")){const x=g.substring(1);p+=`${a}.classList.remove('${x}'.replace('%s', light), '${x}'.replace('%s', dark));
      ${a}.classList.add('${x}'.replace('%s', colorScheme));`}const v=g.match(/\[([^[\]]+)\]/);if(v){const[x,b]=v[1].split("=");b||(p+=`${a}.removeAttribute('${x}'.replace('%s', light));
      ${a}.removeAttribute('${x}'.replace('%s', dark));`),p+=`
      ${a}.setAttribute('${x}'.replace('%s', colorScheme), ${b?`${b}.replace('%s', colorScheme)`:'""'});`}else p+=`${a}.setAttribute('${g}', colorScheme);`;return Z.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${t}';
  const dark = localStorage.getItem('${o}-dark') || '${n}';
  const light = localStorage.getItem('${o}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${p}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function QY(){}const eZ=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let n;try{n=t.localStorage.getItem(e)}catch{}return n||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return QY;const n=i=>{const o=i.newValue;i.key===e&&r(o)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function fS(){}function mL(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function E9(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function tZ(e){return E9(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function rZ(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:o=_P,colorSchemeStorageKey:l=xP,storageWindow:a=typeof window>"u"?void 0:window,storageManager:c=eZ,noSsr:p=!1}=e,g=i.join(","),v=i.length>1,x=Q.useMemo(()=>c?.({key:o,storageWindow:a}),[c,o,a]),b=Q.useMemo(()=>c?.({key:`${l}-light`,storageWindow:a}),[c,l,a]),P=Q.useMemo(()=>c?.({key:`${l}-dark`,storageWindow:a}),[c,l,a]),[I,k]=Q.useState(()=>{const H=x?.get(t)||t,Y=b?.get(r)||r,ae=P?.get(n)||n;return{mode:H,systemMode:mL(H),lightColorScheme:Y,darkColorScheme:ae}}),[M,O]=Q.useState(p||!v);Q.useEffect(()=>{O(!0)},[]);const F=tZ(I),N=Q.useCallback(H=>{k(Y=>{if(H===Y.mode)return Y;const ae=H??t;return x?.set(ae),{...Y,mode:ae,systemMode:mL(ae)}})},[x,t]),$=Q.useCallback(H=>{H?typeof H=="string"?H&&!g.includes(H)?console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`):k(Y=>{const ae={...Y};return E9(Y,ee=>{ee==="light"&&(b?.set(H),ae.lightColorScheme=H),ee==="dark"&&(P?.set(H),ae.darkColorScheme=H)}),ae}):k(Y=>{const ae={...Y},ee=H.light===null?r:H.light,G=H.dark===null?n:H.dark;return ee&&(g.includes(ee)?(ae.lightColorScheme=ee,b?.set(ee)):console.error(`\`${ee}\` does not exist in \`theme.colorSchemes\`.`)),G&&(g.includes(G)?(ae.darkColorScheme=G,P?.set(G)):console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`)),ae}):k(Y=>(b?.set(r),P?.set(n),{...Y,lightColorScheme:r,darkColorScheme:n}))},[g,b,P,r,n]),j=Q.useCallback(H=>{I.mode==="system"&&k(Y=>{const ae=H?.matches?"dark":"light";return Y.systemMode===ae?Y:{...Y,systemMode:ae}})},[I.mode]),U=Q.useRef(j);return U.current=j,Q.useEffect(()=>{if(typeof window.matchMedia!="function"||!v)return;const H=(...ae)=>U.current(...ae),Y=window.matchMedia("(prefers-color-scheme: dark)");return Y.addListener(H),H(Y),()=>{Y.removeListener(H)}},[v]),Q.useEffect(()=>{if(v){const H=x?.subscribe(ee=>{(!ee||["light","dark","system"].includes(ee))&&N(ee||t)})||fS,Y=b?.subscribe(ee=>{(!ee||g.match(ee))&&$({light:ee})})||fS,ae=P?.subscribe(ee=>{(!ee||g.match(ee))&&$({dark:ee})})||fS;return()=>{H(),Y(),ae()}}},[$,N,g,t,a,v,x,b,P]),{...I,mode:M?I.mode:void 0,systemMode:M?I.systemMode:void 0,colorScheme:M?F:void 0,setMode:N,setColorScheme:$}}const nZ="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function iZ(e){const{themeId:t,theme:r={},modeStorageKey:n=_P,colorSchemeStorageKey:i=xP,disableTransitionOnChange:o=!1,defaultColorScheme:l,resolveTheme:a}=e,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},p=Q.createContext(void 0),g=()=>Q.useContext(p)||c,v={},x={};function b(M){const{children:O,theme:F,modeStorageKey:N=n,colorSchemeStorageKey:$=i,disableTransitionOnChange:j=o,storageManager:U,storageWindow:H=typeof window>"u"?void 0:window,documentNode:Y=typeof document>"u"?void 0:document,colorSchemeNode:ae=typeof document>"u"?void 0:document.documentElement,disableNestedContext:ee=!1,disableStyleSheetGeneration:G=!1,defaultMode:ie="system",forceThemeRerender:oe=!1,noSsr:ue}=M,de=Q.useRef(!1),Me=bP(),ge=Q.useContext(p),xe=!!ge&&!ee,Ee=Q.useMemo(()=>F||(typeof r=="function"?r():r),[F]),Ae=Ee[t],fe=Ae||Ee,{colorSchemes:Se=v,components:we=x,cssVarPrefix:De}=fe,Re=Object.keys(Se).filter(ir=>!!Se[ir]).join(","),$e=Q.useMemo(()=>Re.split(","),[Re]),Oe=typeof l=="string"?l:l.light,it=typeof l=="string"?l:l.dark,Ye=Se[Oe]&&Se[it]?ie:Se[fe.defaultColorScheme]?.palette?.mode||fe.palette?.mode,{mode:rt,setMode:Ie,systemMode:It,lightColorScheme:at,darkColorScheme:je,colorScheme:Ht,setColorScheme:Wt}=rZ({supportedColorSchemes:$e,defaultLightColorScheme:Oe,defaultDarkColorScheme:it,modeStorageKey:N,colorSchemeStorageKey:$,defaultMode:Ye,storageManager:U,storageWindow:H,noSsr:ue});let zt=rt,st=Ht;xe&&(zt=ge.mode,st=ge.colorScheme);let sr=st||fe.defaultColorScheme;fe.vars&&!oe&&(sr=fe.defaultColorScheme);const ur=Q.useMemo(()=>{const ir=fe.generateThemeVars?.()||fe.vars,xr={...fe,components:we,colorSchemes:Se,cssVarPrefix:De,vars:ir};if(typeof xr.generateSpacing=="function"&&(xr.spacing=xr.generateSpacing()),sr){const rr=Se[sr];rr&&typeof rr=="object"&&Object.keys(rr).forEach(nt=>{rr[nt]&&typeof rr[nt]=="object"?xr[nt]={...xr[nt],...rr[nt]}:xr[nt]=rr[nt]})}return a?a(xr):xr},[fe,sr,we,Se,De]),ar=fe.colorSchemeSelector;$l(()=>{if(st&&ae&&ar&&ar!=="media"){const ir=ar;let xr=ar;if(ir==="class"&&(xr=".%s"),ir==="data"&&(xr="[data-%s]"),ir?.startsWith("data-")&&!ir.includes("%s")&&(xr=`[${ir}="%s"]`),xr.startsWith("."))ae.classList.remove(...$e.map(rr=>xr.substring(1).replace("%s",rr))),ae.classList.add(xr.substring(1).replace("%s",st));else{const rr=xr.replace("%s",st).match(/\[([^\]]+)\]/);if(rr){const[nt,be]=rr[1].split("=");be||$e.forEach(_e=>{ae.removeAttribute(nt.replace(st,_e))}),ae.setAttribute(nt,be?be.replace(/"|'/g,""):"")}else ae.setAttribute(xr,st)}}},[st,ar,ae,$e]),Q.useEffect(()=>{let ir;if(j&&de.current&&Y){const xr=Y.createElement("style");xr.appendChild(Y.createTextNode(nZ)),Y.head.appendChild(xr),window.getComputedStyle(Y.body),ir=setTimeout(()=>{Y.head.removeChild(xr)},1)}return()=>{clearTimeout(ir)}},[st,j,Y]),Q.useEffect(()=>(de.current=!0,()=>{de.current=!1}),[]);const yr=Q.useMemo(()=>({allColorSchemes:$e,colorScheme:st,darkColorScheme:je,lightColorScheme:at,mode:zt,setColorScheme:Wt,setMode:Ie,systemMode:It}),[$e,st,je,at,zt,Wt,Ie,It,ur.colorSchemeSelector]);let pr=!0;(G||fe.cssVariables===!1||xe&&Me?.cssVarPrefix===De)&&(pr=!1);const Jt=Z.jsxs(Q.Fragment,{children:[Z.jsx(C9,{themeId:Ae?t:void 0,theme:ur,children:O}),pr&&Z.jsx(i9,{styles:ur.generateStyleSheets?.()||[]})]});return xe?Jt:Z.jsx(p.Provider,{value:yr,children:Jt})}const P=typeof l=="string"?l:l.light,I=typeof l=="string"?l:l.dark;return{CssVarsProvider:b,useColorScheme:g,getInitColorSchemeScript:M=>JY({colorSchemeStorageKey:i,defaultLightColorScheme:P,defaultDarkColorScheme:I,modeStorageKey:n,...M})}}function aZ(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const gL=(e,t,r,n=[])=>{let i=e;t.forEach((o,l)=>{l===t.length-1?Array.isArray(i)?i[Number(o)]=r:i&&typeof i=="object"&&(i[o]=r):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},oZ=(e,t,r)=>{function n(i,o=[],l=[]){Object.entries(i).forEach(([a,c])=>{(!r||r&&!r([...o,a]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?n(c,[...o,a],Array.isArray(c)?[...l,a]:l):t([...o,a],c,l))})}n(e)},sZ=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function hS(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},o={},l={};return oZ(e,(a,c,p)=>{if((typeof c=="string"||typeof c=="number")&&(!n||!n(a,c))){const g=`--${r?`${r}-`:""}${a.join("-")}`,v=sZ(a,c);Object.assign(i,{[g]:v}),gL(o,a,`var(${g})`,p),gL(l,a,`var(${g}, ${v})`,p)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:l}}function lZ(e,t={}){const{getSelector:r=M,disableCssColorScheme:n,colorSchemeSelector:i,enableContrastVars:o}=t,{colorSchemes:l={},components:a,defaultColorScheme:c="light",...p}=e,{vars:g,css:v,varsWithDefaults:x}=hS(p,t);let b=x;const P={},{[c]:I,...k}=l;if(Object.entries(k||{}).forEach(([N,$])=>{const{vars:j,css:U,varsWithDefaults:H}=hS($,t);b=ql(b,H),P[N]={css:U,vars:j}}),I){const{css:N,vars:$,varsWithDefaults:j}=hS(I,t);b=ql(b,j),P[c]={css:N,vars:$}}function M(N,$){let j=i;if(i==="class"&&(j=".%s"),i==="data"&&(j="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(j=`[${i}="%s"]`),N){if(j==="media")return e.defaultColorScheme===N?":root":{[`@media (prefers-color-scheme: ${l[N]?.palette?.mode||N})`]:{":root":$}};if(j)return e.defaultColorScheme===N?`:root, ${j.replace("%s",String(N))}`:j.replace("%s",String(N))}return":root"}return{vars:b,generateThemeVars:()=>{let N={...g};return Object.entries(P).forEach(([,{vars:$}])=>{N=ql(N,$)}),N},generateStyleSheets:()=>{const N=[],$=e.defaultColorScheme||"light";function j(Y,ae){Object.keys(ae).length&&N.push(typeof Y=="string"?{[Y]:{...ae}}:Y)}j(r(void 0,{...v}),v);const{[$]:U,...H}=P;if(U){const{css:Y}=U,ae=l[$]?.palette?.mode,ee=!n&&ae?{colorScheme:ae,...Y}:{...Y};j(r($,{...ee}),ee)}return Object.entries(H).forEach(([Y,{css:ae}])=>{const ee=l[Y]?.palette?.mode,G=!n&&ee?{colorScheme:ee,...ae}:{...ae};j(r(Y,{...G}),G)}),o&&N.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),N}}}function uZ(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function Qn(e,t,r=void 0){const n={};for(const i in e){const o=e[i];let l="",a=!0;for(let c=0;c<o.length;c+=1){const p=o[c];p&&(l+=(a===!0?"":" ")+t(p),a=!1,r&&r[p]&&(l+=" "+r[p]))}n[i]=l}return n}function jg(e,t){return Q.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const cZ=(e,t)=>e.filter(r=>t.includes(r)),_y=(e,t,r)=>{const n=e.keys[0];Array.isArray(t)?t.forEach((i,o)=>{r((l,a)=>{o<=e.keys.length-1&&(o===0?Object.assign(l,a):l[e.up(e.keys[o])]=a)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:cZ(e.keys,Object.keys(t))).forEach(o=>{if(e.keys.includes(o)){const l=t[o];l!==void 0&&r((a,c)=>{n===o?Object.assign(a,c):a[e.up(o)]=c},l)}}):(typeof t=="number"||typeof t=="string")&&r((i,o)=>{Object.assign(i,o)},t)};function N_(e){return`--Grid-${e}Spacing`}function d2(e){return`--Grid-parent-${e}Spacing`}const yL="--Grid-columns",qg="--Grid-parent-columns",dZ=({theme:e,ownerState:t})=>{const r={};return _y(e.breakpoints,t.size,(n,i)=>{let o={};i==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${qg}) - (var(${qg}) - ${i}) * (var(${d2("column")}) / var(${qg})))`}),n(r,o)}),r},fZ=({theme:e,ownerState:t})=>{const r={};return _y(e.breakpoints,t.offset,(n,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${qg}) + var(${d2("column")}) * ${i} / var(${qg}))`}),n(r,o)}),r},hZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={[yL]:12};return _y(e.breakpoints,t.columns,(n,i)=>{const o=i??12;n(r,{[yL]:o,"> *":{[qg]:o}})}),r},pZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return _y(e.breakpoints,t.rowSpacing,(n,i)=>{const o=typeof i=="string"?i:e.spacing?.(i);n(r,{[N_("row")]:o,"> *":{[d2("row")]:o}})}),r},mZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return _y(e.breakpoints,t.columnSpacing,(n,i)=>{const o=typeof i=="string"?i:e.spacing?.(i);n(r,{[N_("column")]:o,"> *":{[d2("column")]:o}})}),r},gZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return _y(e.breakpoints,t.direction,(n,i)=>{n(r,{flexDirection:i})}),r},yZ=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${N_("row")}) var(${N_("column")})`}}),vZ=e=>{const t=[];return Object.entries(e).forEach(([r,n])=>{n!==!1&&n!==void 0&&t.push(`grid-${r}-${String(n)}`)}),t},bZ=(e,t="xs")=>{function r(n){return n===void 0?!1:typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number"&&n>0}if(r(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const n=[];return Object.entries(e).forEach(([i,o])=>{r(o)&&n.push(`spacing-${i}-${String(o)}`)}),n}return[]},_Z=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,r])=>`direction-${t}-${r}`):[`direction-xs-${String(e)}`];function xZ(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(r=>{e[r]!==void 0&&delete e[r]})}const wZ=o2(),SZ=rm("div",{name:"MuiGrid",slot:"Root"});function CZ(e){return LY({props:e,name:"MuiGrid",defaultTheme:wZ})}function EZ(e={}){const{createStyledComponent:t=SZ,useThemeProps:r=CZ,useTheme:n=n1,componentName:i="MuiGrid"}=e,o=(p,g)=>{const{container:v,direction:x,spacing:b,wrap:P,size:I}=p,k={root:["root",v&&"container",P!=="wrap"&&`wrap-xs-${String(P)}`,..._Z(x),...vZ(I),...v?bZ(b,g.breakpoints.keys[0]):[]]};return Qn(k,M=>Jn(i,M),{})};function l(p,g,v=()=>!0){const x={};return p===null||(Array.isArray(p)?p.forEach((b,P)=>{b!==null&&v(b)&&g.keys[P]&&(x[g.keys[P]]=b)}):typeof p=="object"?Object.keys(p).forEach(b=>{const P=p[b];P!=null&&v(P)&&(x[b]=P)}):x[g.keys[0]]=p),x}const a=t(hZ,mZ,pZ,dZ,gZ,yZ,fZ),c=Q.forwardRef(function(g,v){const x=n(),b=r(g),P=gP(b);xZ(P,x.breakpoints);const{className:I,children:k,columns:M=12,container:O=!1,component:F="div",direction:N="row",wrap:$="wrap",size:j={},offset:U={},spacing:H=0,rowSpacing:Y=H,columnSpacing:ae=H,unstable_level:ee=0,...G}=P,ie=l(j,x.breakpoints,Ae=>Ae!==!1),oe=l(U,x.breakpoints),ue=g.columns??(ee?void 0:M),de=g.spacing??(ee?void 0:H),Me=g.rowSpacing??g.spacing??(ee?void 0:Y),ge=g.columnSpacing??g.spacing??(ee?void 0:ae),xe={...P,level:ee,columns:ue,container:O,direction:N,wrap:$,spacing:de,rowSpacing:Me,columnSpacing:ge,size:ie,offset:oe},Ee=o(xe,x);return Z.jsx(a,{ref:v,as:F,ownerState:xe,className:cn(Ee.root,I),...G,children:Q.Children.map(k,Ae=>Q.isValidElement(Ae)&&jg(Ae,["Grid"])&&O&&Ae.props.container?Q.cloneElement(Ae,{unstable_level:Ae.props?.unstable_level??ee+1}):Ae)})});return c.muiName="Grid",c}const b0={black:"#000",white:"#fff"},TZ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},jm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},qm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},rv={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},$m={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Vm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Um={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function T9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:b0.white,default:b0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const P9=T9();function I9(){return{text:{primary:b0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:b0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const B4=I9();function vL(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=c2(e.main,i):t==="dark"&&(e.dark=u2(e.main,o)))}function bL(e,t,r,n,i){const o=i.light||i,l=i.dark||i*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(o*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(l*100).toFixed(0)}%)`))}function PZ(e="light"){return e==="dark"?{main:$m[200],light:$m[50],dark:$m[400]}:{main:$m[700],light:$m[400],dark:$m[800]}}function IZ(e="light"){return e==="dark"?{main:jm[200],light:jm[50],dark:jm[400]}:{main:jm[500],light:jm[300],dark:jm[700]}}function kZ(e="light"){return e==="dark"?{main:qm[500],light:qm[300],dark:qm[700]}:{main:qm[700],light:qm[400],dark:qm[800]}}function AZ(e="light"){return e==="dark"?{main:Vm[400],light:Vm[300],dark:Vm[700]}:{main:Vm[700],light:Vm[500],dark:Vm[900]}}function MZ(e="light"){return e==="dark"?{main:Um[400],light:Um[300],dark:Um[700]}:{main:Um[800],light:Um[500],dark:Um[900]}}function LZ(e="light"){return e==="dark"?{main:rv[400],light:rv[300],dark:rv[700]}:{main:"#ed6c02",light:rv[500],dark:rv[900]}}function RZ(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function wP(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:i,...o}=e,l=e.primary||PZ(t),a=e.secondary||IZ(t),c=e.error||kZ(t),p=e.info||AZ(t),g=e.success||MZ(t),v=e.warning||LZ(t);function x(k){return i?RZ(k):BY(k,B4.text.primary)>=r?B4.text.primary:P9.text.primary}const b=({color:k,name:M,mainShade:O=500,lightShade:F=300,darkShade:N=700})=>{if(k={...k},!k.main&&k[O]&&(k.main=k[O]),!k.hasOwnProperty("main"))throw new Error(zf(11,M?` (${M})`:"",O));if(typeof k.main!="string")throw new Error(zf(12,M?` (${M})`:"",JSON.stringify(k.main)));return i?(bL(i,k,"light",F,n),bL(i,k,"dark",N,n)):(vL(k,"light",F,n),vL(k,"dark",N,n)),k.contrastText||(k.contrastText=x(k.main)),k};let P;return t==="light"?P=T9():t==="dark"&&(P=I9()),ql({common:{...b0},mode:t,primary:b({color:l,name:"primary"}),secondary:b({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:c,name:"error"}),warning:b({color:v,name:"warning"}),info:b({color:p,name:"info"}),success:b({color:g,name:"success"}),grey:TZ,contrastThreshold:r,getContrastText:x,augmentColor:b,tonalOffset:n,...P},o)}function DZ(e){const t={};return Object.entries(e).forEach(n=>{const[i,o]=n;typeof o=="object"&&(t[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}function NZ(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function OZ(e){return Math.round(e*1e5)/1e5}const _L={textTransform:"uppercase"},xL='"Roboto", "Helvetica", "Arial", sans-serif';function k9(e,t){const{fontFamily:r=xL,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:l=500,fontWeightBold:a=700,htmlFontSize:c=16,allVariants:p,pxToRem:g,...v}=typeof t=="function"?t(e):t,x=n/14,b=g||(k=>`${k/c*x}rem`),P=(k,M,O,F,N)=>({fontFamily:r,fontWeight:k,fontSize:b(M),lineHeight:O,...r===xL?{letterSpacing:`${OZ(F/M)}em`}:{},...N,...p}),I={h1:P(i,96,1.167,-1.5),h2:P(i,60,1.2,-.5),h3:P(o,48,1.167,0),h4:P(o,34,1.235,.25),h5:P(o,24,1.334,0),h6:P(l,20,1.6,.15),subtitle1:P(o,16,1.75,.15),subtitle2:P(l,14,1.57,.1),body1:P(o,16,1.5,.15),body2:P(o,14,1.43,.15),button:P(l,14,1.75,.4,_L),caption:P(o,12,1.66,.4),overline:P(o,12,2.66,1,_L),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ql({htmlFontSize:c,pxToRem:b,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:l,fontWeightBold:a,...I},v,{clone:!1})}const FZ=.2,BZ=.14,zZ=.12;function Fo(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${FZ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${BZ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${zZ})`].join(",")}const jZ=["none",Fo(0,2,1,-1,0,1,1,0,0,1,3,0),Fo(0,3,1,-2,0,2,2,0,0,1,5,0),Fo(0,3,3,-2,0,3,4,0,0,1,8,0),Fo(0,2,4,-1,0,4,5,0,0,1,10,0),Fo(0,3,5,-1,0,5,8,0,0,1,14,0),Fo(0,3,5,-1,0,6,10,0,0,1,18,0),Fo(0,4,5,-2,0,7,10,1,0,2,16,1),Fo(0,5,5,-3,0,8,10,1,0,3,14,2),Fo(0,5,6,-3,0,9,12,1,0,3,16,2),Fo(0,6,6,-3,0,10,14,1,0,4,18,3),Fo(0,6,7,-4,0,11,15,1,0,4,20,3),Fo(0,7,8,-4,0,12,17,2,0,5,22,4),Fo(0,7,8,-4,0,13,19,2,0,5,24,4),Fo(0,7,9,-4,0,14,21,2,0,5,26,4),Fo(0,8,9,-5,0,15,22,2,0,6,28,5),Fo(0,8,10,-5,0,16,24,2,0,6,30,5),Fo(0,8,11,-5,0,17,26,2,0,6,32,5),Fo(0,9,11,-5,0,18,28,2,0,7,34,6),Fo(0,9,12,-6,0,19,29,2,0,7,36,6),Fo(0,10,13,-6,0,20,31,3,0,8,38,7),Fo(0,10,13,-6,0,21,33,3,0,8,40,7),Fo(0,10,14,-6,0,22,35,3,0,8,42,7),Fo(0,11,14,-7,0,23,36,3,0,9,44,8),Fo(0,11,15,-7,0,24,38,3,0,9,46,8)],qZ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},A9={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function wL(e){return`${Math.round(e)}ms`}function $Z(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function VZ(e){const t={...qZ,...e.easing},r={...A9,...e.duration};return{getAutoHeightDuration:$Z,create:(i=["all"],o={})=>{const{duration:l=r.standard,easing:a=t.easeInOut,delay:c=0,...p}=o;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof l=="string"?l:wL(l)} ${a} ${typeof c=="string"?c:wL(c)}`).join(",")},...e,easing:t,duration:r}}const UZ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function GZ(e){return Vd(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function M9(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let o=0;o<i.length;o++){const[l,a]=i[o];!GZ(a)||l.startsWith("unstable_")?delete n[l]:Vd(a)&&(n[l]={...a},r(n[l]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function SL(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const HZ=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function WZ(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:R_(t,HZ(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${SL(r)})`:c2(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${SL(r)})`:u2(t,r)}})}function z4(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:o={},transitions:l={},typography:a={},shape:c,colorSpace:p,...g}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(zf(20));const v=wP({...o,colorSpace:p}),x=o2(e);let b=ql(x,{mixins:NZ(x.breakpoints,n),palette:v,shadows:jZ.slice(),typography:k9(v,a),transitions:VZ(l),zIndex:{...UZ}});return b=ql(b,g),b=t.reduce((P,I)=>ql(P,I),b),b.unstable_sxConfig={...r1,...g?.unstable_sxConfig},b.unstable_sx=function(I){return Mh({sx:I,theme:this})},b.toRuntimeSource=M9,WZ(b),b}function j4(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const XZ=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=j4(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function L9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function R9(e){return e==="dark"?XZ:[]}function YZ(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:i,...o}=e,l=wP({...t,colorSpace:i});return{palette:l,opacity:{...L9(l.mode),...r},overlays:n||R9(l.mode),...o}}function ZZ(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const KZ=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],JZ=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const l={};return KZ(e.cssVarPrefix).forEach(a=>{l[a]=r[a],delete r[a]}),o==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:l}}:o?{[o.replace("%s",t)]:l,[`${n}, ${o.replace("%s",t)}`]:r}:{[n]:{...r,...l}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(o)return o.replace("%s",String(t))}return n};function QZ(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Mr(e,t,r){!e[t]&&r&&(e[t]=r)}function Mv(e){return typeof e!="string"||!e.startsWith("hsl")?e:_9(e)}function vf(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Av(Mv(e[t])))}function eK(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Od=e=>{try{return e()}catch{}},tK=(e="mui")=>aZ(e);function pS(e,t,r,n,i){if(!r)return;r=r===!0?{}:r;const o=i==="dark"?"dark":"light";if(!n){t[i]=YZ({...r,palette:{mode:o,...r?.palette},colorSpace:e});return}const{palette:l,...a}=z4({...n,palette:{mode:o,...r?.palette},colorSpace:e});return t[i]={...r,palette:l,opacity:{...L9(o),...r?.opacity},overlays:r?.overlays||R9(o)},a}function rK(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",nativeColor:l=!1,shouldSkipGeneratingVar:a=ZZ,colorSchemeSelector:c=r.light&&r.dark?"media":void 0,rootSelector:p=":root",...g}=e,v=Object.keys(r)[0],x=n||(r.light&&v!=="light"?"light":v),b=tK(o),{[x]:P,light:I,dark:k,...M}=r,O={...M};let F=P;if((x==="dark"&&!("dark"in r)||x==="light"&&!("light"in r))&&(F=!0),!F)throw new Error(zf(21,x));let N;l&&(N="oklch");const $=pS(N,O,F,g,x);I&&!O.light&&pS(N,O,I,void 0,"light"),k&&!O.dark&&pS(N,O,k,void 0,"dark");let j={defaultColorScheme:x,...$,cssVarPrefix:o,colorSchemeSelector:c,rootSelector:p,getCssVar:b,colorSchemes:O,font:{...DZ($.typography),...$.font},spacing:eK(g.spacing)};Object.keys(j.colorSchemes).forEach(ee=>{const G=j.colorSchemes[ee].palette,ie=ue=>{const de=ue.split("-"),Me=de[1],ge=de[2];return b(ue,G[Me][ge])};G.mode==="light"&&(Mr(G.common,"background","#fff"),Mr(G.common,"onBackground","#000")),G.mode==="dark"&&(Mr(G.common,"background","#000"),Mr(G.common,"onBackground","#fff"));function oe(ue,de,Me){if(N){let ge;return ue===fp&&(ge=`transparent ${((1-Me)*100).toFixed(0)}%`),ue===qa&&(ge=`#000 ${(Me*100).toFixed(0)}%`),ue===$a&&(ge=`#fff ${(Me*100).toFixed(0)}%`),`color-mix(in ${N}, ${de}, ${ge})`}return ue(de,Me)}if(QZ(G,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),G.mode==="light"){Mr(G.Alert,"errorColor",oe(qa,G.error.light,.6)),Mr(G.Alert,"infoColor",oe(qa,G.info.light,.6)),Mr(G.Alert,"successColor",oe(qa,G.success.light,.6)),Mr(G.Alert,"warningColor",oe(qa,G.warning.light,.6)),Mr(G.Alert,"errorFilledBg",ie("palette-error-main")),Mr(G.Alert,"infoFilledBg",ie("palette-info-main")),Mr(G.Alert,"successFilledBg",ie("palette-success-main")),Mr(G.Alert,"warningFilledBg",ie("palette-warning-main")),Mr(G.Alert,"errorFilledColor",Od(()=>G.getContrastText(G.error.main))),Mr(G.Alert,"infoFilledColor",Od(()=>G.getContrastText(G.info.main))),Mr(G.Alert,"successFilledColor",Od(()=>G.getContrastText(G.success.main))),Mr(G.Alert,"warningFilledColor",Od(()=>G.getContrastText(G.warning.main))),Mr(G.Alert,"errorStandardBg",oe($a,G.error.light,.9)),Mr(G.Alert,"infoStandardBg",oe($a,G.info.light,.9)),Mr(G.Alert,"successStandardBg",oe($a,G.success.light,.9)),Mr(G.Alert,"warningStandardBg",oe($a,G.warning.light,.9)),Mr(G.Alert,"errorIconColor",ie("palette-error-main")),Mr(G.Alert,"infoIconColor",ie("palette-info-main")),Mr(G.Alert,"successIconColor",ie("palette-success-main")),Mr(G.Alert,"warningIconColor",ie("palette-warning-main")),Mr(G.AppBar,"defaultBg",ie("palette-grey-100")),Mr(G.Avatar,"defaultBg",ie("palette-grey-400")),Mr(G.Button,"inheritContainedBg",ie("palette-grey-300")),Mr(G.Button,"inheritContainedHoverBg",ie("palette-grey-A100")),Mr(G.Chip,"defaultBorder",ie("palette-grey-400")),Mr(G.Chip,"defaultAvatarColor",ie("palette-grey-700")),Mr(G.Chip,"defaultIconColor",ie("palette-grey-700")),Mr(G.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Mr(G.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Mr(G.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Mr(G.LinearProgress,"primaryBg",oe($a,G.primary.main,.62)),Mr(G.LinearProgress,"secondaryBg",oe($a,G.secondary.main,.62)),Mr(G.LinearProgress,"errorBg",oe($a,G.error.main,.62)),Mr(G.LinearProgress,"infoBg",oe($a,G.info.main,.62)),Mr(G.LinearProgress,"successBg",oe($a,G.success.main,.62)),Mr(G.LinearProgress,"warningBg",oe($a,G.warning.main,.62)),Mr(G.Skeleton,"bg",N?oe(fp,G.text.primary,.11):`rgba(${ie("palette-text-primaryChannel")} / 0.11)`),Mr(G.Slider,"primaryTrack",oe($a,G.primary.main,.62)),Mr(G.Slider,"secondaryTrack",oe($a,G.secondary.main,.62)),Mr(G.Slider,"errorTrack",oe($a,G.error.main,.62)),Mr(G.Slider,"infoTrack",oe($a,G.info.main,.62)),Mr(G.Slider,"successTrack",oe($a,G.success.main,.62)),Mr(G.Slider,"warningTrack",oe($a,G.warning.main,.62));const ue=N?oe(qa,G.background.default,.6825):Z1(G.background.default,.8);Mr(G.SnackbarContent,"bg",ue),Mr(G.SnackbarContent,"color",Od(()=>N?B4.text.primary:G.getContrastText(ue))),Mr(G.SpeedDialAction,"fabHoverBg",Z1(G.background.paper,.15)),Mr(G.StepConnector,"border",ie("palette-grey-400")),Mr(G.StepContent,"border",ie("palette-grey-400")),Mr(G.Switch,"defaultColor",ie("palette-common-white")),Mr(G.Switch,"defaultDisabledColor",ie("palette-grey-100")),Mr(G.Switch,"primaryDisabledColor",oe($a,G.primary.main,.62)),Mr(G.Switch,"secondaryDisabledColor",oe($a,G.secondary.main,.62)),Mr(G.Switch,"errorDisabledColor",oe($a,G.error.main,.62)),Mr(G.Switch,"infoDisabledColor",oe($a,G.info.main,.62)),Mr(G.Switch,"successDisabledColor",oe($a,G.success.main,.62)),Mr(G.Switch,"warningDisabledColor",oe($a,G.warning.main,.62)),Mr(G.TableCell,"border",oe($a,oe(fp,G.divider,1),.88)),Mr(G.Tooltip,"bg",oe(fp,G.grey[700],.92))}if(G.mode==="dark"){Mr(G.Alert,"errorColor",oe($a,G.error.light,.6)),Mr(G.Alert,"infoColor",oe($a,G.info.light,.6)),Mr(G.Alert,"successColor",oe($a,G.success.light,.6)),Mr(G.Alert,"warningColor",oe($a,G.warning.light,.6)),Mr(G.Alert,"errorFilledBg",ie("palette-error-dark")),Mr(G.Alert,"infoFilledBg",ie("palette-info-dark")),Mr(G.Alert,"successFilledBg",ie("palette-success-dark")),Mr(G.Alert,"warningFilledBg",ie("palette-warning-dark")),Mr(G.Alert,"errorFilledColor",Od(()=>G.getContrastText(G.error.dark))),Mr(G.Alert,"infoFilledColor",Od(()=>G.getContrastText(G.info.dark))),Mr(G.Alert,"successFilledColor",Od(()=>G.getContrastText(G.success.dark))),Mr(G.Alert,"warningFilledColor",Od(()=>G.getContrastText(G.warning.dark))),Mr(G.Alert,"errorStandardBg",oe(qa,G.error.light,.9)),Mr(G.Alert,"infoStandardBg",oe(qa,G.info.light,.9)),Mr(G.Alert,"successStandardBg",oe(qa,G.success.light,.9)),Mr(G.Alert,"warningStandardBg",oe(qa,G.warning.light,.9)),Mr(G.Alert,"errorIconColor",ie("palette-error-main")),Mr(G.Alert,"infoIconColor",ie("palette-info-main")),Mr(G.Alert,"successIconColor",ie("palette-success-main")),Mr(G.Alert,"warningIconColor",ie("palette-warning-main")),Mr(G.AppBar,"defaultBg",ie("palette-grey-900")),Mr(G.AppBar,"darkBg",ie("palette-background-paper")),Mr(G.AppBar,"darkColor",ie("palette-text-primary")),Mr(G.Avatar,"defaultBg",ie("palette-grey-600")),Mr(G.Button,"inheritContainedBg",ie("palette-grey-800")),Mr(G.Button,"inheritContainedHoverBg",ie("palette-grey-700")),Mr(G.Chip,"defaultBorder",ie("palette-grey-700")),Mr(G.Chip,"defaultAvatarColor",ie("palette-grey-300")),Mr(G.Chip,"defaultIconColor",ie("palette-grey-300")),Mr(G.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Mr(G.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Mr(G.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Mr(G.LinearProgress,"primaryBg",oe(qa,G.primary.main,.5)),Mr(G.LinearProgress,"secondaryBg",oe(qa,G.secondary.main,.5)),Mr(G.LinearProgress,"errorBg",oe(qa,G.error.main,.5)),Mr(G.LinearProgress,"infoBg",oe(qa,G.info.main,.5)),Mr(G.LinearProgress,"successBg",oe(qa,G.success.main,.5)),Mr(G.LinearProgress,"warningBg",oe(qa,G.warning.main,.5)),Mr(G.Skeleton,"bg",N?oe(fp,G.text.primary,.13):`rgba(${ie("palette-text-primaryChannel")} / 0.13)`),Mr(G.Slider,"primaryTrack",oe(qa,G.primary.main,.5)),Mr(G.Slider,"secondaryTrack",oe(qa,G.secondary.main,.5)),Mr(G.Slider,"errorTrack",oe(qa,G.error.main,.5)),Mr(G.Slider,"infoTrack",oe(qa,G.info.main,.5)),Mr(G.Slider,"successTrack",oe(qa,G.success.main,.5)),Mr(G.Slider,"warningTrack",oe(qa,G.warning.main,.5));const ue=N?oe($a,G.background.default,.985):Z1(G.background.default,.98);Mr(G.SnackbarContent,"bg",ue),Mr(G.SnackbarContent,"color",Od(()=>N?P9.text.primary:G.getContrastText(ue))),Mr(G.SpeedDialAction,"fabHoverBg",Z1(G.background.paper,.15)),Mr(G.StepConnector,"border",ie("palette-grey-600")),Mr(G.StepContent,"border",ie("palette-grey-600")),Mr(G.Switch,"defaultColor",ie("palette-grey-300")),Mr(G.Switch,"defaultDisabledColor",ie("palette-grey-600")),Mr(G.Switch,"primaryDisabledColor",oe(qa,G.primary.main,.55)),Mr(G.Switch,"secondaryDisabledColor",oe(qa,G.secondary.main,.55)),Mr(G.Switch,"errorDisabledColor",oe(qa,G.error.main,.55)),Mr(G.Switch,"infoDisabledColor",oe(qa,G.info.main,.55)),Mr(G.Switch,"successDisabledColor",oe(qa,G.success.main,.55)),Mr(G.Switch,"warningDisabledColor",oe(qa,G.warning.main,.55)),Mr(G.TableCell,"border",oe(qa,oe(fp,G.divider,1),.68)),Mr(G.Tooltip,"bg",oe(fp,G.grey[700],.92))}vf(G.background,"default"),vf(G.background,"paper"),vf(G.common,"background"),vf(G.common,"onBackground"),vf(G,"divider"),Object.keys(G).forEach(ue=>{const de=G[ue];ue!=="tonalOffset"&&de&&typeof de=="object"&&(de.main&&Mr(G[ue],"mainChannel",Av(Mv(de.main))),de.light&&Mr(G[ue],"lightChannel",Av(Mv(de.light))),de.dark&&Mr(G[ue],"darkChannel",Av(Mv(de.dark))),de.contrastText&&Mr(G[ue],"contrastTextChannel",Av(Mv(de.contrastText))),ue==="text"&&(vf(G[ue],"primary"),vf(G[ue],"secondary")),ue==="action"&&(de.active&&vf(G[ue],"active"),de.selected&&vf(G[ue],"selected")))})}),j=t.reduce((ee,G)=>ql(ee,G),j);const U={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:JZ(j),enableContrastVars:l},{vars:H,generateThemeVars:Y,generateStyleSheets:ae}=lZ(j,U);return j.vars=H,Object.entries(j.colorSchemes[j.defaultColorScheme]).forEach(([ee,G])=>{j[ee]=G}),j.generateThemeVars=Y,j.generateStyleSheets=ae,j.generateSpacing=function(){return c9(g.spacing,pP(this))},j.getColorSchemeSelector=uZ(c),j.spacing=j.generateSpacing(),j.shouldSkipGeneratingVar=a,j.unstable_sxConfig={...r1,...g?.unstable_sxConfig},j.unstable_sx=function(G){return Mh({sx:G,theme:this})},j.toRuntimeSource=M9,j}function CL(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:wP({...r===!0?{}:r.palette,mode:t})})}function xy(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:o=r?.mode,...l}=e,a=o||"light",c=i?.[a],p={...i,...r?{[a]:{...typeof c!="boolean"&&c,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return z4(e,...t);let g=r;"palette"in e||p[a]&&(p[a]!==!0?g=p[a].palette:a==="dark"&&(g={mode:"dark"}));const v=z4({...e,palette:g},...t);return v.defaultColorScheme=a,v.colorSchemes=p,v.palette.mode==="light"&&(v.colorSchemes.light={...p.light!==!0&&p.light,palette:v.palette},CL(v,"dark",p.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...p.dark!==!0&&p.dark,palette:v.palette},CL(v,"light",p.light)),v}return!r&&!("light"in p)&&a==="light"&&(p.light=!0),rK({...l,colorSchemes:p,defaultColorScheme:a,...typeof n!="boolean"&&n},...t)}const SP=xy();function du(){const e=n1(SP);return e[ld]||e}function f2(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const As=e=>f2(e)&&e!=="classes",_r=g9({themeId:ld,defaultTheme:SP,rootShouldForwardProp:As});function nK({theme:e,...t}){const r=ld in e?e[ld]:void 0;return Z.jsx(C9,{...t,themeId:r?ld:void 0,theme:r||e})}const K1={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:iK}=iZ({themeId:ld,theme:()=>xy({cssVariables:!0}),colorSchemeStorageKey:K1.colorSchemeStorageKey,modeStorageKey:K1.modeStorageKey,defaultColorScheme:{light:K1.defaultLightColorScheme,dark:K1.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:k9(e.palette,e.typography)};return t.unstable_sx=function(n){return Mh({sx:n,theme:this})},t}}),aK=iK;function oK({theme:e,...t}){const r=Q.useMemo(()=>{if(typeof e=="function")return e;const n=ld in e?e[ld]:e;return"colorSchemes"in n?null:"vars"in n?e:{...e,vars:null}},[e]);return r?Z.jsx(nK,{theme:r,...t}):Z.jsx(aK,{theme:e,...t})}const sK=xy({palette:{mode:"light"}}),lK=xy({palette:{mode:"dark"}}),uK=e=>({...e==="light"?sK:lK,palette:{mode:e,...e==="dark"?{primary:{main:"#009EE0"},secondary:{main:"#747577"},background:{paper:"#313131"},text:{primary:"#FFF",contrast:"#000"},topToolbar:{barColor:"#000"},navigation:{buttonColor:"#fff",navColor:"#313131",navHover:"#747577"},GPS:{GPSActiveColor:"#fff",GPSInactiveColor:"#fff",GPSActiveBackgroundColor:"#747577"},compass:{compColor:"#313131",compHover:"#747577",compStroke:"#d3dce1",compNorth:"#cf003f",compSouth:"#d3dcf0"}}:{primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{buttonColor:"#747577",navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#747577",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}}}}),cK=e=>{const t=uK(e&&["light","dark"].includes(e)?e:"light");return xy(t,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:t.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:{minWidth:"20px",minHeight:"20px",fontWeight:600,[t.breakpoints.down("md")]:{width:"50px",height:"50px",fontSize:"1.4em"},[t.breakpoints.up("md")]:{width:"30px",height:"30px",fontSize:"1.2em"},color:t.palette.text.primary,backgroundColor:t.palette.navigation.navColor,borderRadius:"23%",margin:"0.15px",marginTop:"4px",":hover":{backgroundColor:t.palette.navigation.navHover}}}]},MuiListItemText:{styleOverrides:{primary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.9rem"}:{},secondary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.7rem"}:{}}}}})};try{MapcomponentsTheme.displayName="MapcomponentsTheme",MapcomponentsTheme.__docgenInfo={description:"",displayName:"MapcomponentsTheme",props:{}}}catch{}const uu={source_openmaptiles_url:"https://wms.wheregroup.com/tileserver/tile/world-0-14.json",sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},Ol=[];for(let e=0;e<256;++e)Ol.push((e+256).toString(16).slice(1));function dK(e,t=0){return(Ol[e[t+0]]+Ol[e[t+1]]+Ol[e[t+2]]+Ol[e[t+3]]+"-"+Ol[e[t+4]]+Ol[e[t+5]]+"-"+Ol[e[t+6]]+Ol[e[t+7]]+"-"+Ol[e[t+8]]+Ol[e[t+9]]+"-"+Ol[e[t+10]]+Ol[e[t+11]]+Ol[e[t+12]]+Ol[e[t+13]]+Ol[e[t+14]]+Ol[e[t+15]]).toLowerCase()}let mS;const fK=new Uint8Array(16);function hK(){if(!mS){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mS=crypto.getRandomValues.bind(crypto)}return mS(fK)}const pK=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),EL={randomUUID:pK};function Bu(e,t,r){if(EL.randomUUID&&!e)return EL.randomUUID();e=e||{};const n=e.random??e.rng?.()??hK();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,dK(n)}const CP=ft.createContext({});function q4(e){const[t,r]=ft.useState([]),[n,i]=ft.useState([]),[o,l]=ft.useState([]),[a,c]=ft.useState(uu.sourceOptions_tiles[0]),p=Q.useMemo(()=>({layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[a]}}),[a]),g=I=>{if(!I)return;const k=[],M=[];I.layers.forEach((O,F)=>{O.type==="symbol"?M.push(O):(F===0&&(O.id=I.name||"background"),k.push(O))}),i(k),l(M)};Q.useEffect(()=>{if(t.filter(I=>!I?.id).length){const I=[...t];I.forEach(k=>{k?.id||(k.id=Bu())}),r(I)}},[t]);const v=Q.useCallback((I,k)=>{const M=t?.filter?.(O=>O.id===I);if(M.length>0){const O=[...t],F=M[0],N=t.indexOf(F),$=k(N);$>=0&&$<=t.length-1&&(O.splice(N,1),O.splice($,0,F),r(O))}},[t]),x=Q.useCallback(I=>{v(I,k=>k+1)},[v]),b=Q.useCallback(I=>{v(I,k=>k-1)},[v]),P={layers:t,setLayers:r,backgroundLayers:n,setBackgroundLayers:i,symbolLayers:o,setSymbolLayers:l,updateStyle:g,vtLayerConfig:p,tileUrl:a,setTileUrl:c,moveUp:b,moveDown:x,moveLayer:v};return Z.jsx(CP.Provider,{value:P,children:e.children})}try{q4.displayName="LayerContextProvider",q4.__docgenInfo={description:"",displayName:"LayerContextProvider",props:{}}}catch{}const Vh=ft.createContext({}),TL=({children:e})=>{const[t,r]=Q.useState(void 0),[n,i]=Q.useState([]),o=Q.useRef([]),l=Q.useRef({}),a=g=>{if(g){typeof l.current[g]<"u"&&delete l.current[g];const v=o.current.indexOf(g);v>-1&&o.current.splice(v,1),i([...o.current]),o.current.length===0&&t&&r(void 0)}else a("anonymous_map")},p={map:t,setMap:g=>{if(r(g),n.length===0){const v="anonymous_map";i([...n,v]),l.current[v]=g}},maps:l.current,mapIds:n,registerMap:(g,v)=>{g&&v&&(l.current[g]=v,o.current.push(g),i([...o.current]),(!t||t?.cancelled===!0)&&r(v))},removeMap:a,mapExists:g=>g&&Object.keys(l.current).indexOf(g)===-1?!1:!(!g&&!t),getMap:g=>g&&n.indexOf(g)!==-1?l.current[g]:!g&&t?t:null};return Z.jsx(Vh.Provider,{value:p,children:Z.jsx(q4,{children:Z.jsx(oK,{theme:cK("light"),children:e})})})};try{TL.displayName="MapComponentsProvider",TL.__docgenInfo={description:`MapComponentsProvider must be imported and wrapped around component where at least one of its child nodes requires access to a MapLibre-gl or openlayers instance that is registered in this mapContext.
MapComponentsProvider must be used one level higher than the first use of MapContext.

MapComponentsProvider requires at least one use of the MapLibreMap component somewhere down the component tree that will create the MapLibre-gl object and set the reference at MapContext.map. For MapLibre maps it is a good idea to provide a mapId attribute to the MapLibreMap Component even if you are only using a single map instance at start. It will make a later transition to using multiple instances within the same project much easier.`,displayName:"MapComponentsProvider",props:{}}}catch{}var l_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
 */var mK=l_.exports,PL;function gK(){return PL||(PL=1,(function(e,t){(function(r,n){e.exports=n()})(mK,(function(){var r={},n={};function i(l,a,c){if(n[l]=c,l==="index"){var p="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",g={};return n.shared(g),n.index(r,g),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),r}}i("shared",["exports"],(function(l){function a(f,u,d,_){return new(d||(d=Promise))((function(S,R){function D(ne){try{W(_.next(ne))}catch(se){R(se)}}function q(ne){try{W(_.throw(ne))}catch(se){R(se)}}function W(ne){var se;ne.done?S(ne.value):(se=ne.value,se instanceof d?se:new d((function(ve){ve(se)}))).then(D,q)}W((_=_.apply(f,u||[])).next())}))}function c(f,u){this.x=f,this.y=u}function p(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g,v;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,u){return this.clone()._rotateAround(f,u)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const u=f.x-this.x,d=f.y-this.y;return u*u+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult(f){const u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const u=Math.cos(f),d=Math.sin(f),_=d*this.x+u*this.y;return this.x=u*this.x-d*this.y,this.y=_,this},_rotateAround(f,u){const d=Math.cos(f),_=Math.sin(f),S=u.y+_*(this.x-u.x)+d*(this.y-u.y);return this.x=u.x+d*(this.x-u.x)-_*(this.y-u.y),this.y=S,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(f){if(f instanceof c)return f;if(Array.isArray(f))return new c(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new c(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var x=(function(){if(v)return g;function f(u,d,_,S){this.cx=3*u,this.bx=3*(_-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(S-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=_,this.p2y=S}return v=1,g=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var _=u,S=0;S<8;S++){var R=this.sampleCurveX(_)-u;if(Math.abs(R)<d)return _;var D=this.sampleCurveDerivativeX(_);if(Math.abs(D)<1e-6)break;_-=R/D}var q=0,W=1;for(_=u,S=0;S<20&&(R=this.sampleCurveX(_),!(Math.abs(R-u)<d));S++)u>R?q=_:W=_,_=.5*(W-q)+q;return _},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},g})(),b=p(x);let P,I;function k(){return P==null&&(P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),P}function M(){if(I==null&&(I=!1,k())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let _=0;_<25;_++){const S=4*_;u.fillStyle=`rgb(${S},${S+1},${S+2})`,u.fillRect(_%5,Math.floor(_/5),1,1)}const d=u.getImageData(0,0,5,5).data;for(let _=0;_<100;_++)if(_%4!=3&&d[_]!==_){I=!0;break}}}return I||!1}var O=1e-6,F=typeof Float32Array<"u"?Float32Array:Array;function N(){var f=new F(9);return F!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function $(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function j(){var f=new F(3);return F!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function U(f){var u=f[0],d=f[1],_=f[2];return Math.sqrt(u*u+d*d+_*_)}function H(f,u,d){var _=new F(3);return _[0]=f,_[1]=u,_[2]=d,_}function Y(f,u,d){return f[0]=u[0]+d[0],f[1]=u[1]+d[1],f[2]=u[2]+d[2],f}function ae(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f}function ee(f,u,d){var _=u[0],S=u[1],R=u[2],D=d[0],q=d[1],W=d[2];return f[0]=S*W-R*q,f[1]=R*D-_*W,f[2]=_*q-S*D,f}var G,ie=U;function oe(f,u,d){var _=u[0],S=u[1],R=u[2],D=u[3];return f[0]=d[0]*_+d[4]*S+d[8]*R+d[12]*D,f[1]=d[1]*_+d[5]*S+d[9]*R+d[13]*D,f[2]=d[2]*_+d[6]*S+d[10]*R+d[14]*D,f[3]=d[3]*_+d[7]*S+d[11]*R+d[15]*D,f}function ue(){var f=new F(4);return F!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function de(f,u,d,_){var S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",R=Math.PI/360;u*=R,_*=R,d*=R;var D=Math.sin(u),q=Math.cos(u),W=Math.sin(d),ne=Math.cos(d),se=Math.sin(_),ve=Math.cos(_);switch(S){case"xyz":f[0]=D*ne*ve+q*W*se,f[1]=q*W*ve-D*ne*se,f[2]=q*ne*se+D*W*ve,f[3]=q*ne*ve-D*W*se;break;case"xzy":f[0]=D*ne*ve-q*W*se,f[1]=q*W*ve-D*ne*se,f[2]=q*ne*se+D*W*ve,f[3]=q*ne*ve+D*W*se;break;case"yxz":f[0]=D*ne*ve+q*W*se,f[1]=q*W*ve-D*ne*se,f[2]=q*ne*se-D*W*ve,f[3]=q*ne*ve+D*W*se;break;case"yzx":f[0]=D*ne*ve+q*W*se,f[1]=q*W*ve+D*ne*se,f[2]=q*ne*se-D*W*ve,f[3]=q*ne*ve-D*W*se;break;case"zxy":f[0]=D*ne*ve-q*W*se,f[1]=q*W*ve+D*ne*se,f[2]=q*ne*se+D*W*ve,f[3]=q*ne*ve-D*W*se;break;case"zyx":f[0]=D*ne*ve-q*W*se,f[1]=q*W*ve+D*ne*se,f[2]=q*ne*se-D*W*ve,f[3]=q*ne*ve+D*W*se;break;default:throw new Error("Unknown angle order "+S)}return f}function Me(){var f=new F(2);return F!=Float32Array&&(f[0]=0,f[1]=0),f}function ge(f,u){var d=new F(2);return d[0]=f,d[1]=u,d}j(),G=new F(4),F!=Float32Array&&(G[0]=0,G[1]=0,G[2]=0,G[3]=0),j(),H(1,0,0),H(0,1,0),ue(),ue(),N(),Me();const xe=8192;function Ee(f,u,d){return u*(xe/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function Ae(f,u){return(f%u+u)%u}function fe(f,u,d){return f*(1-d)+u*d}function Se(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,d=u*f;return 4*(f<.5?d:3*(f-u)+d-.75)}function we(f,u,d,_){const S=new b(f,u,d,_);return R=>S.solve(R)}const De=we(.25,.1,.25,1);function Re(f,u,d){return Math.min(d,Math.max(u,f))}function $e(f,u,d){const _=d-u,S=((f-u)%_+_)%_+u;return S===u?d:S}function Oe(f,...u){for(const d of u)for(const _ in d)f[_]=d[_];return f}let it=1;function Ye(f,u,d){const _={};for(const S in f)_[S]=u.call(this,f[S],S,f);return _}function rt(f,u,d){const _={};for(const S in f)u.call(this,f[S],S,f)&&(_[S]=f[S]);return _}function Ie(f){return Array.isArray(f)?f.map(Ie):typeof f=="object"&&f?Ye(f,Ie):f}const It={};function at(f){It[f]||(typeof console<"u"&&console.warn(f),It[f]=!0)}function je(f,u,d){return(d.y-f.y)*(u.x-f.x)>(u.y-f.y)*(d.x-f.x)}function Ht(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let Wt=null;function zt(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const st="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function sr(f,u,d,_,S){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const R=new VideoFrame(f,{timestamp:0});try{const D=R?.format;if(!D||!D.startsWith("BGR")&&!D.startsWith("RGB"))throw new Error(`Unrecognized format ${D}`);const q=D.startsWith("BGR"),W=new Uint8ClampedArray(_*S*4);if(yield R.copyTo(W,(function(ne,se,ve,Ne,ze){const qe=4*Math.max(-se,0),Ze=(Math.max(0,ve)-ve)*Ne*4+qe,lt=4*Ne,xt=Math.max(0,se),Gt=Math.max(0,ve);return{rect:{x:xt,y:Gt,width:Math.min(ne.width,se+Ne)-xt,height:Math.min(ne.height,ve+ze)-Gt},layout:[{offset:Ze,stride:lt}]}})(f,u,d,_,S)),q)for(let ne=0;ne<W.length;ne+=4){const se=W[ne];W[ne]=W[ne+2],W[ne+2]=se}return W}finally{R.close()}}))}let ur,ar;function yr(f,u,d,_){return f.addEventListener(u,d,_),{unsubscribe:()=>{f.removeEventListener(u,d,_)}}}function pr(f){return f*Math.PI/180}function Jt(f){return f/Math.PI*180}const ir={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},xr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},rr="AbortError";function nt(){return new Error(rr)}const be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function _e(f){return be.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Ue="global-dispatcher";class Qe extends Error{constructor(u,d,_,S){super(`AJAXError: ${d} (${u}): ${_}`),this.status=u,this.statusText=d,this.url=_,this.body=S}}const ot=()=>Ht(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,et=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const _=_e(f.url);if(_)return _(f,u);if(Ht(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Ue},u)}if(!(/^file:/.test(d=f.url)||/^file:/.test(ot())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(_,S){return a(this,void 0,void 0,(function*(){const R=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:ot(),signal:S.signal});let D,q;_.type!=="json"||R.headers.has("Accept")||R.headers.set("Accept","application/json");try{D=yield fetch(R)}catch(ne){throw new Qe(0,ne.message,_.url,new Blob)}if(!D.ok){const ne=yield D.blob();throw new Qe(D.status,D.statusText,_.url,ne)}q=_.type==="arrayBuffer"||_.type==="image"?D.arrayBuffer():_.type==="json"?D.json():D.text();const W=yield q;if(S.signal.aborted)throw nt();return{data:W,cacheControl:D.headers.get("Cache-Control"),expires:D.headers.get("Expires")}}))})(f,u);if(Ht(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Ue},u)}var d;return(function(_,S){return new Promise(((R,D)=>{var q;const W=new XMLHttpRequest;W.open(_.method||"GET",_.url,!0),_.type!=="arrayBuffer"&&_.type!=="image"||(W.responseType="arraybuffer");for(const ne in _.headers)W.setRequestHeader(ne,_.headers[ne]);_.type==="json"&&(W.responseType="text",!((q=_.headers)===null||q===void 0)&&q.Accept||W.setRequestHeader("Accept","application/json")),W.withCredentials=_.credentials==="include",W.onerror=()=>{D(new Error(W.statusText))},W.onload=()=>{if(!S.signal.aborted)if((W.status>=200&&W.status<300||W.status===0)&&W.response!==null){let ne=W.response;if(_.type==="json")try{ne=JSON.parse(W.response)}catch(se){return void D(se)}R({data:ne,cacheControl:W.getResponseHeader("Cache-Control"),expires:W.getResponseHeader("Expires")})}else{const ne=new Blob([W.response],{type:W.getResponseHeader("Content-Type")});D(new Qe(W.status,W.statusText,_.url,ne))}},S.signal.addEventListener("abort",(()=>{W.abort(),D(nt())})),W.send(_.body)}))})(f,u)};function Lt(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),d=window.location;return u.protocol===d.protocol&&u.host===d.host}function vt(f,u,d){d[f]&&d[f].indexOf(u)!==-1||(d[f]=d[f]||[],d[f].push(u))}function Bt(f,u,d){if(d&&d[f]){const _=d[f].indexOf(u);_!==-1&&d[f].splice(_,1)}}class Kt{constructor(u,d={}){Oe(this,d),this.type=u}}class Zt extends Kt{constructor(u,d={}){super("error",Oe({error:u},d))}}class Er{on(u,d){return this._listeners=this._listeners||{},vt(u,d,this._listeners),{unsubscribe:()=>{this.off(u,d)}}}off(u,d){return Bt(u,d,this._listeners),Bt(u,d,this._oneTimeListeners),this}once(u,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},vt(u,d,this._oneTimeListeners),this):new Promise((_=>this.once(u,_)))}fire(u,d){typeof u=="string"&&(u=new Kt(u,d||{}));const _=u.type;if(this.listens(_)){u.target=this;const S=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const q of S)q.call(this,u);const R=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const q of R)Bt(_,q,this._oneTimeListeners),q.call(this,u);const D=this._eventedParent;D&&(Oe(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(u))}else u instanceof Zt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,d){return this._eventedParent=u,this._eventedParentData=d,this}}var bt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const vr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Dr(f,u){const d={};for(const _ in f)_!=="ref"&&(d[_]=f[_]);return vr.forEach((_=>{_ in u&&(d[_]=u[_])})),d}function jr(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let d=0;d<f.length;d++)if(!jr(f[d],u[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const d in f)if(!jr(f[d],u[d]))return!1;return!0}return f===u}function Ur(f,u){f.push(u)}function nr(f,u,d){Ur(d,{command:"addSource",args:[f,u[f]]})}function Hn(f,u,d){Ur(u,{command:"removeSource",args:[f]}),d[f]=!0}function en(f,u,d,_){Hn(f,d,_),nr(f,u,d)}function Wn(f,u,d){let _;for(_ in f[d])if(Object.prototype.hasOwnProperty.call(f[d],_)&&_!=="data"&&!jr(f[d][_],u[d][_]))return!1;for(_ in u[d])if(Object.prototype.hasOwnProperty.call(u[d],_)&&_!=="data"&&!jr(f[d][_],u[d][_]))return!1;return!0}function Pe(f,u,d,_,S,R){f=f||{},u=u||{};for(const D in f)Object.prototype.hasOwnProperty.call(f,D)&&(jr(f[D],u[D])||d.push({command:R,args:[_,D,u[D],S]}));for(const D in u)Object.prototype.hasOwnProperty.call(u,D)&&!Object.prototype.hasOwnProperty.call(f,D)&&(jr(f[D],u[D])||d.push({command:R,args:[_,D,u[D],S]}))}function Be(f){return f.id}function gt(f,u){return f[u.id]=u,f}class mt{constructor(u,d,_,S){this.message=(u?`${u}: `:"")+_,S&&(this.identifier=S),d!=null&&d.__line__&&(this.line=d.__line__)}}function wr(f,...u){for(const d of u)for(const _ in d)f[_]=d[_];return f}class Ar extends Error{constructor(u,d){super(d),this.message=d,this.key=u}}class Dn{constructor(u,d=[]){this.parent=u,this.bindings={};for(const[_,S]of d)this.bindings[_]=S}concat(u){return new Dn(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const wi={kind:"null"},Lr={kind:"number"},fn={kind:"string"},gn={kind:"boolean"},_i={kind:"color"},oi={kind:"projectionDefinition"},Di={kind:"object"},Pn={kind:"value"},ga={kind:"collator"},na={kind:"formatted"},Ni={kind:"padding"},Na={kind:"colorArray"},ua={kind:"numberArray"},Mi={kind:"resolvedImage"},Ua={kind:"variableAnchorOffsetCollection"};function Oa(f,u){return{kind:"array",itemType:f,N:u}}function Nn(f){if(f.kind==="array"){const u=Nn(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Gl=[wi,Lr,fn,gn,_i,oi,na,Di,Oa(Pn),Ni,ua,Na,Mi,Ua];function Tl(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Tl(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const d of Gl)if(!Tl(d,u))return null}}return`Expected ${Nn(f)} but found ${Nn(u)} instead.`}function ya(f,u){return u.some((d=>d.kind===f.kind))}function ca(f,u){return u.some((d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f))}function To(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const go=.96422,qo=.82521,Xu=4/29,da=6/29,Yu=3*da*da,Zu=da*da*da,Ws=Math.PI/180,Ms=180/Math.PI;function Ma(f){return(f%=360)<0&&(f+=360),f}function Ga([f,u,d,_]){let S,R;const D=Ls((.2225045*(f=va(f))+.7168786*(u=va(u))+.0606169*(d=va(d)))/1);f===u&&u===d?S=R=D:(S=Ls((.4360747*f+.3850649*u+.1430804*d)/go),R=Ls((.0139322*f+.0971045*u+.7141733*d)/qo));const q=116*D-16;return[q<0?0:q,500*(S-D),200*(D-R),_]}function va(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Ls(f){return f>Zu?Math.pow(f,1/3):f/Yu+Xu}function Hl([f,u,d,_]){let S=(f+16)/116,R=isNaN(u)?S:S+u/500,D=isNaN(d)?S:S-d/200;return S=1*J(S),R=go*J(R),D=qo*J(D),[Wl(3.1338561*R-1.6168667*S-.4906146*D),Wl(-.9787684*R+1.9161415*S+.033454*D),Wl(.0719453*R-.2289914*S+1.4052427*D),_]}function Wl(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function J(f){return f>da?f*f*f:Yu*(f-Xu)}const pe=Object.hasOwn||function(f,u){return Object.prototype.hasOwnProperty.call(f,u)};function Xe(f,u){return pe(f,u)?f[u]:void 0}function Ct(f){return parseInt(f.padEnd(2,f),16)/255}function Rt(f,u){return kt(u?f/100:f,0,1)}function kt(f,u,d){return Math.min(Math.max(u,f),d)}function Xt(f){return!f.some(Number.isNaN)}const Or={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function qr(f,u,d){return f+d*(u-f)}function Br(f,u,d){return f.map(((_,S)=>qr(_,u[S],d)))}class Sr{constructor(u,d,_,S=1,R=!0){this.r=u,this.g=d,this.b=_,this.a=S,R||(this.r*=S,this.g*=S,this.b*=S,S||this.overwriteGetter("rgb",[u,d,_,S]))}static parse(u){if(u instanceof Sr)return u;if(typeof u!="string")return;const d=(function(_){if((_=_.toLowerCase().trim())==="transparent")return[0,0,0,0];const S=Xe(Or,_);if(S){const[D,q,W]=S;return[D/255,q/255,W/255,1]}if(_.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){const D=_.length<6?1:2;let q=1;return[Ct(_.slice(q,q+=D)),Ct(_.slice(q,q+=D)),Ct(_.slice(q,q+=D)),Ct(_.slice(q,q+D)||"ff")]}if(_.startsWith("rgb")){const D=_.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt,Gt]=D,At=[se||" ",ze||" ",lt].join("");if(At==="  "||At==="  /"||At===",,"||At===",,,"){const Nt=[ne,Ne,Ze].join(""),dr=Nt==="%%%"?100:Nt===""?255:0;if(dr){const br=[kt(+W/dr,0,1),kt(+ve/dr,0,1),kt(+qe/dr,0,1),xt?Rt(+xt,Gt):1];if(Xt(br))return br}}return}}const R=_.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[D,q,W,ne,se,ve,Ne,ze,qe]=R,Ze=[W||" ",se||" ",Ne].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const lt=[+q,kt(+ne,0,100),kt(+ve,0,100),ze?Rt(+ze,qe):1];if(Xt(lt))return(function([xt,Gt,At,Nt]){function dr(br){const zr=(br+xt/30)%12,ln=Gt*Math.min(At,1-At);return At-ln*Math.max(-1,Math.min(zr-3,9-zr,1))}return xt=Ma(xt),Gt/=100,At/=100,[dr(0),dr(8),dr(4),Nt]})(lt)}}})(u);return d?new Sr(...d,!1):void 0}get rgb(){const{r:u,g:d,b:_,a:S}=this,R=S||1/0;return this.overwriteGetter("rgb",[u/R,d/R,_/R,S])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[d,_,S,R]=Ga(u),D=Math.sqrt(_*_+S*S);return[Math.round(1e4*D)?Ma(Math.atan2(S,_)*Ms):NaN,D,d,R]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Ga(this.rgb))}overwriteGetter(u,d){return Object.defineProperty(this,u,{value:d}),d}toString(){const[u,d,_,S]=this.rgb;return`rgba(${[u,d,_].map((R=>Math.round(255*R))).join(",")},${S})`}static interpolate(u,d,_,S="rgb"){switch(S){case"rgb":{const[R,D,q,W]=Br(u.rgb,d.rgb,_);return new Sr(R,D,q,W,!1)}case"hcl":{const[R,D,q,W]=u.hcl,[ne,se,ve,Ne]=d.hcl;let ze,qe;if(isNaN(R)||isNaN(ne))isNaN(R)?isNaN(ne)?ze=NaN:(ze=ne,q!==1&&q!==0||(qe=se)):(ze=R,ve!==1&&ve!==0||(qe=D));else{let At=ne-R;ne>R&&At>180?At-=360:ne<R&&R-ne>180&&(At+=360),ze=R+_*At}const[Ze,lt,xt,Gt]=(function([At,Nt,dr,br]){return At=isNaN(At)?0:At*Ws,Hl([dr,Math.cos(At)*Nt,Math.sin(At)*Nt,br])})([ze,qe??qr(D,se,_),qr(q,ve,_),qr(W,Ne,_)]);return new Sr(Ze,lt,xt,Gt,!1)}case"lab":{const[R,D,q,W]=Hl(Br(u.lab,d.lab,_));return new Sr(R,D,q,W,!1)}}}}Sr.black=new Sr(0,0,0,1),Sr.white=new Sr(1,1,1,1),Sr.transparent=new Sr(0,0,0,0),Sr.red=new Sr(1,0,0,1);class Gr{constructor(u,d,_){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,d){return this.collator.compare(u,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Un=["bottom","center","top"];class pi{constructor(u,d,_,S,R,D){this.text=u,this.image=d,this.scale=_,this.fontStack=S,this.textColor=R,this.verticalAlign=D}}class mn{constructor(u){this.sections=u}static fromString(u){return new mn([new pi(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof mn?u:mn.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class an{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof an)return u;if(typeof u=="number")return new an([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const d of u)if(typeof d!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new an(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,_){return new an(Br(u.values,d.values,_))}}class Cr{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Cr)return u;if(typeof u=="number")return new Cr([u]);if(Array.isArray(u)){for(const d of u)if(typeof d!="number")return;return new Cr(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,_){return new Cr(Br(u.values,d.values,_))}}class tn{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof tn)return u;if(typeof u=="string"){const _=Sr.parse(u);return _?new tn([_]):void 0}if(!Array.isArray(u))return;const d=[];for(const _ of u){if(typeof _!="string")return;const S=Sr.parse(_);if(!S)return;d.push(S)}return new tn(d)}toString(){return JSON.stringify(this.values)}static interpolate(u,d,_,S="rgb"){const R=[];if(u.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let D=0;D<u.values.length;D++)R.push(Sr.interpolate(u.values[D],d.values[D],_,S));return new tn(R)}}class On extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const ba=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class gi{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof gi)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let d=0;d<u.length;d+=2){const _=u[d],S=u[d+1];if(typeof _!="string"||!ba.has(_)||!Array.isArray(S)||S.length!==2||typeof S[0]!="number"||typeof S[1]!="number")return}return new gi(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,_){const S=u.values,R=d.values;if(S.length!==R.length)throw new On(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${d.toString()}`);const D=[];for(let q=0;q<S.length;q+=2){if(S[q]!==R[q])throw new On(`Cannot interpolate values containing mismatched anchors. from[${q}]: ${S[q]}, to[${q}]: ${R[q]}`);D.push(S[q]);const[W,ne]=S[q+1],[se,ve]=R[q+1];D.push([qr(W,se,_),qr(ne,ve,_)])}return new gi(D)}}class _a{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new _a({name:u,available:!1}):null}}class si{constructor(u,d,_){this.from=u,this.to=d,this.transition=_}static interpolate(u,d,_){return new si(u,d,_)}static parse(u){return u instanceof si?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new si(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new si(u.from,u.to,u.transition):typeof u=="string"?new si(u,u,1):void 0}}function An(f,u,d,_){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:`Invalid rgba value [${[f,u,d,_].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _=="number"?[f,u,d,_]:[f,u,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $o(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof si||f instanceof Sr||f instanceof Gr||f instanceof mn||f instanceof an||f instanceof Cr||f instanceof tn||f instanceof gi||f instanceof _a)return!0;if(Array.isArray(f)){for(const u of f)if(!$o(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!$o(f[u]))return!1;return!0}return!1}function Mn(f){if(f===null)return wi;if(typeof f=="string")return fn;if(typeof f=="boolean")return gn;if(typeof f=="number")return Lr;if(f instanceof Sr)return _i;if(f instanceof si)return oi;if(f instanceof Gr)return ga;if(f instanceof mn)return na;if(f instanceof an)return Ni;if(f instanceof Cr)return ua;if(f instanceof tn)return Na;if(f instanceof gi)return Ua;if(f instanceof _a)return Mi;if(Array.isArray(f)){const u=f.length;let d;for(const _ of f){const S=Mn(_);if(d){if(d===S)continue;d=Pn;break}d=S}return Oa(d||Pn,u)}return Di}function En(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof Sr||f instanceof si||f instanceof mn||f instanceof an||f instanceof Cr||f instanceof tn||f instanceof gi||f instanceof _a?f.toString():JSON.stringify(f)}class Po{constructor(u,d){this.type=u,this.value=d}static parse(u,d){if(u.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!$o(u[1]))return d.error("invalid value");const _=u[1];let S=Mn(_);const R=d.expectedType;return S.kind!=="array"||S.N!==0||!R||R.kind!=="array"||typeof R.N=="number"&&R.N!==0||(S=R),new Po(S,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const jn={string:fn,number:Lr,boolean:gn,object:Di};class yo{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let _,S=1;const R=u[0];if(R==="array"){let q,W;if(u.length>2){const ne=u[1];if(typeof ne!="string"||!(ne in jn)||ne==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);q=jn[ne],S++}else q=Pn;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);W=u[2],S++}_=Oa(q,W)}else{if(!jn[R])throw new Error(`Types doesn't contain name = ${R}`);_=jn[R]}const D=[];for(;S<u.length;S++){const q=d.parse(u[S],S,Pn);if(!q)return null;D.push(q)}return new yo(_,D)}evaluate(u){for(let d=0;d<this.args.length;d++){const _=this.args[d].evaluate(u);if(!Tl(this.type,Mn(_)))return _;if(d===this.args.length-1)throw new On(`Expected value to be of type ${Nn(this.type)}, but found ${Nn(Mn(_))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const oo={"to-boolean":gn,"to-color":_i,"to-number":Lr,"to-string":fn};class Io{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const _=u[0];if(!oo[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_==="to-boolean"||_==="to-string")&&u.length!==2)return d.error("Expected one argument.");const S=oo[_],R=[];for(let D=1;D<u.length;D++){const q=d.parse(u[D],D,Pn);if(!q)return null;R.push(q)}return new Io(S,R)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let d,_;for(const S of this.args){if(d=S.evaluate(u),_=null,d instanceof Sr)return d;if(typeof d=="string"){const R=u.parseColor(d);if(R)return R}else if(Array.isArray(d)&&(_=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:An(d[0],d[1],d[2],d[3]),!_))return new Sr(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new On(_||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const _ of this.args){d=_.evaluate(u);const S=an.parse(d);if(S)return S}throw new On(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const _ of this.args){d=_.evaluate(u);const S=Cr.parse(d);if(S)return S}throw new On(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const _ of this.args){d=_.evaluate(u);const S=tn.parse(d);if(S)return S}throw new On(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const _ of this.args){d=_.evaluate(u);const S=gi.parse(d);if(S)return S}throw new On(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const _ of this.args){if(d=_.evaluate(u),d===null)return 0;const S=Number(d);if(!isNaN(S))return S}throw new On(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return mn.fromString(En(this.args[0].evaluate(u)));case"resolvedImage":return _a.fromString(En(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return En(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Rs=["Unknown","Point","LineString","Polygon"];class Pl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Rs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let d=this._parseColorCache.get(u);return d||(d=Sr.parse(u),this._parseColorCache.set(u,d)),d}}class Xs{constructor(u,d,_=[],S,R=new Dn,D=[]){this.registry=u,this.path=_,this.key=_.map((q=>`[${q}]`)).join(""),this.scope=R,this.errors=D,this.expectedType=S,this._isConstant=d}parse(u,d,_,S,R={}){return d?this.concat(d,_,S)._parse(u,R):this._parse(u,R)}_parse(u,d){function _(S,R,D){return D==="assert"?new yo(R,[S]):D==="coerce"?new Io(R,[S]):S}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const S=u[0];if(typeof S!="string")return this.error(`Expression name must be a string, but found ${typeof S} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const R=this.registry[S];if(R){let D=R.parse(u,this);if(!D)return null;if(this.expectedType){const q=this.expectedType,W=D.type;if(q.kind!=="string"&&q.kind!=="number"&&q.kind!=="boolean"&&q.kind!=="object"&&q.kind!=="array"||W.kind!=="value"){if(q.kind==="projectionDefinition"&&["string","array"].includes(W.kind)||["color","formatted","resolvedImage"].includes(q.kind)&&["value","string"].includes(W.kind)||["padding","numberArray"].includes(q.kind)&&["value","number","array"].includes(W.kind)||q.kind==="colorArray"&&["value","string","array"].includes(W.kind)||q.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(W.kind))D=_(D,q,d.typeAnnotation||"coerce");else if(this.checkSubtype(q,W))return null}else D=_(D,q,d.typeAnnotation||"assert")}if(!(D instanceof Po)&&D.type.kind!=="resolvedImage"&&this._isConstant(D)){const q=new Pl;try{D=new Po(D.type,D.evaluate(q))}catch(W){return this.error(W.message),null}}return D}return this.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,d,_){const S=typeof u=="number"?this.path.concat(u):this.path,R=_?this.scope.concat(_):this.scope;return new Xs(this.registry,this._isConstant,S,d||null,R,this.errors)}error(u,...d){const _=`${this.key}${d.map((S=>`[${S}]`)).join("")}`;this.errors.push(new Ar(_,u))}checkSubtype(u,d){const _=Tl(u,d);return _&&this.error(_),_}}class so{constructor(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const d of this.bindings)u(d[1]);u(this.result)}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const _=[];for(let R=1;R<u.length-1;R+=2){const D=u[R];if(typeof D!="string")return d.error(`Expected string, but found ${typeof D} instead.`,R);if(/[^a-zA-Z0-9_]/.test(D))return d.error("Variable names must contain only alphanumeric characters or '_'.",R);const q=d.parse(u[R+1],R+1);if(!q)return null;_.push([D,q])}const S=d.parse(u[u.length-1],u.length-1,d.expectedType,_);return S?new so(_,S):null}outputDefined(){return this.result.outputDefined()}}class Ds{constructor(u,d){this.type=d.type,this.name=u,this.boundExpression=d}static parse(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const _=u[1];return d.scope.has(_)?new Ds(_,d.scope.get(_)):d.error(`Unknown variable "${_}". Make sure "${_}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Ys{constructor(u,d,_){this.type=u,this.index=d,this.input=_}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=d.parse(u[1],1,Lr),S=d.parse(u[2],2,Oa(d.expectedType||Pn));return _&&S?new Ys(S.type.itemType,_,S):null}evaluate(u){const d=this.index.evaluate(u),_=this.input.evaluate(u);if(d<0)throw new On(`Array index out of bounds: ${d} < 0.`);if(d>=_.length)throw new On(`Array index out of bounds: ${d} > ${_.length-1}.`);if(d!==Math.floor(d))throw new On(`Array index must be an integer, but found ${d} instead.`);return _[d]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Ha{constructor(u,d){this.type=gn,this.needle=u,this.haystack=d}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=d.parse(u[1],1,Pn),S=d.parse(u[2],2,Pn);return _&&S?ya(_.type,[gn,fn,Lr,wi,Pn])?new Ha(_,S):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Nn(_.type)} instead`):null}evaluate(u){const d=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!_)return!1;if(!ca(d,["boolean","string","number","null"]))throw new On(`Expected first argument to be of type boolean, string, number or null, but found ${Nn(Mn(d))} instead.`);if(!ca(_,["string","array"]))throw new On(`Expected second argument to be of type array or string, but found ${Nn(Mn(_))} instead.`);return _.indexOf(d)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Wa{constructor(u,d,_){this.type=Lr,this.needle=u,this.haystack=d,this.fromIndex=_}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=d.parse(u[1],1,Pn),S=d.parse(u[2],2,Pn);if(!_||!S)return null;if(!ya(_.type,[gn,fn,Lr,wi,Pn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Nn(_.type)} instead`);if(u.length===4){const R=d.parse(u[3],3,Lr);return R?new Wa(_,S,R):null}return new Wa(_,S)}evaluate(u){const d=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!ca(d,["boolean","string","number","null"]))throw new On(`Expected first argument to be of type boolean, string, number or null, but found ${Nn(Mn(d))} instead.`);let S;if(this.fromIndex&&(S=this.fromIndex.evaluate(u)),ca(_,["string"])){const R=_.indexOf(d,S);return R===-1?-1:[..._.slice(0,R)].length}if(ca(_,["array"]))return _.indexOf(d,S);throw new On(`Expected second argument to be of type array or string, but found ${Nn(Mn(_))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class Gi{constructor(u,d,_,S,R,D){this.inputType=u,this.type=d,this.input=_,this.cases=S,this.outputs=R,this.otherwise=D}static parse(u,d){if(u.length<5)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return d.error("Expected an even number of arguments.");let _,S;d.expectedType&&d.expectedType.kind!=="value"&&(S=d.expectedType);const R={},D=[];for(let ne=2;ne<u.length-1;ne+=2){let se=u[ne];const ve=u[ne+1];Array.isArray(se)||(se=[se]);const Ne=d.concat(ne);if(se.length===0)return Ne.error("Expected at least one branch label.");for(const qe of se){if(typeof qe!="number"&&typeof qe!="string")return Ne.error("Branch labels must be numbers or strings.");if(typeof qe=="number"&&Math.abs(qe)>Number.MAX_SAFE_INTEGER)return Ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof qe=="number"&&Math.floor(qe)!==qe)return Ne.error("Numeric branch labels must be integer values.");if(_){if(Ne.checkSubtype(_,Mn(qe)))return null}else _=Mn(qe);if(R[String(qe)]!==void 0)return Ne.error("Branch labels must be unique.");R[String(qe)]=D.length}const ze=d.parse(ve,ne,S);if(!ze)return null;S=S||ze.type,D.push(ze)}const q=d.parse(u[1],1,Pn);if(!q)return null;const W=d.parse(u[u.length-1],u.length-1,S);return W?q.type.kind!=="value"&&d.concat(1).checkSubtype(_,q.type)?null:new Gi(_,S,q,R,D,W):null}evaluate(u){const d=this.input.evaluate(u);return(Mn(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class Ca{constructor(u,d,_){this.type=u,this.branches=d,this.otherwise=_}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return d.error("Expected an odd number of arguments.");let _;d.expectedType&&d.expectedType.kind!=="value"&&(_=d.expectedType);const S=[];for(let D=1;D<u.length-1;D+=2){const q=d.parse(u[D],D,gn);if(!q)return null;const W=d.parse(u[D+1],D+1,_);if(!W)return null;S.push([q,W]),_=_||W.type}const R=d.parse(u[u.length-1],u.length-1,_);if(!R)return null;if(!_)throw new Error("Can't infer output type");return new Ca(_,S,R)}evaluate(u){for(const[d,_]of this.branches)if(d.evaluate(u))return _.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[d,_]of this.branches)u(d),u(_);u(this.otherwise)}outputDefined(){return this.branches.every((([u,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class le{constructor(u,d,_,S){this.type=u,this.input=d,this.beginIndex=_,this.endIndex=S}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=d.parse(u[1],1,Pn),S=d.parse(u[2],2,Lr);if(!_||!S)return null;if(!ya(_.type,[Oa(Pn),fn,Pn]))return d.error(`Expected first argument to be of type array or string, but found ${Nn(_.type)} instead`);if(u.length===4){const R=d.parse(u[3],3,Lr);return R?new le(_.type,_,S,R):null}return new le(_.type,_,S)}evaluate(u){const d=this.input.evaluate(u),_=this.beginIndex.evaluate(u);let S;if(this.endIndex&&(S=this.endIndex.evaluate(u)),ca(d,["string"]))return[...d].slice(_,S).join("");if(ca(d,["array"]))return d.slice(_,S);throw new On(`Expected first argument to be of type array or string, but found ${Nn(Mn(d))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Ve(f,u){const d=f.length-1;let _,S,R=0,D=d,q=0;for(;R<=D;)if(q=Math.floor((R+D)/2),_=f[q],S=f[q+1],_<=u){if(q===d||u<S)return q;R=q+1}else{if(!(_>u))throw new On("Input is not a number.");D=q-1}return 0}class pt{constructor(u,d,_){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(const[S,R]of _)this.labels.push(S),this.outputs.push(R)}static parse(u,d){if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");const _=d.parse(u[1],1,Lr);if(!_)return null;const S=[];let R=null;d.expectedType&&d.expectedType.kind!=="value"&&(R=d.expectedType);for(let D=1;D<u.length;D+=2){const q=D===1?-1/0:u[D],W=u[D+1],ne=D,se=D+1;if(typeof q!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(S.length&&S[S.length-1][0]>=q)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ne);const ve=d.parse(W,se,R);if(!ve)return null;R=R||ve.type,S.push([q,ve])}return new pt(R,_,S)}evaluate(u){const d=this.labels,_=this.outputs;if(d.length===1)return _[0].evaluate(u);const S=this.input.evaluate(u);if(S<=d[0])return _[0].evaluate(u);const R=d.length;return S>=d[R-1]?_[R-1].evaluate(u):_[Ve(d,S)].evaluate(u)}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Dt(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var tr,Pr,$r=(function(){if(Pr)return tr;function f(u,d,_,S){this.cx=3*u,this.bx=3*(_-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(S-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=_,this.p2y=S}return Pr=1,tr=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var _=u,S=0;S<8;S++){var R=this.sampleCurveX(_)-u;if(Math.abs(R)<d)return _;var D=this.sampleCurveDerivativeX(_);if(Math.abs(D)<1e-6)break;_-=R/D}var q=0,W=1;for(_=u,S=0;S<20&&(R=this.sampleCurveX(_),!(Math.abs(R-u)<d));S++)u>R?q=_:W=_,_=.5*(W-q)+q;return _},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},tr})(),xn=Dt($r);class pn{constructor(u,d,_,S,R){this.type=u,this.operator=d,this.interpolation=_,this.input=S,this.labels=[],this.outputs=[];for(const[D,q]of R)this.labels.push(D),this.outputs.push(q)}static interpolationFactor(u,d,_,S){let R=0;if(u.name==="exponential")R=Yn(d,u.base,_,S);else if(u.name==="linear")R=Yn(d,1,_,S);else if(u.name==="cubic-bezier"){const D=u.controlPoints;R=new xn(D[0],D[1],D[2],D[3]).solve(Yn(d,1,_,S))}return R}static parse(u,d){let[_,S,R,...D]=u;if(!Array.isArray(S)||S.length===0)return d.error("Expected an interpolation type expression.",1);if(S[0]==="linear")S={name:"linear"};else if(S[0]==="exponential"){const ne=S[1];if(typeof ne!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);S={name:"exponential",base:ne}}else{if(S[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(S[0])}`,1,0);{const ne=S.slice(1);if(ne.length!==4||ne.some((se=>typeof se!="number"||se<0||se>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);S={name:"cubic-bezier",controlPoints:ne}}}if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(R=d.parse(R,2,Lr),!R)return null;const q=[];let W=null;_!=="interpolate-hcl"&&_!=="interpolate-lab"||d.expectedType==Na?d.expectedType&&d.expectedType.kind!=="value"&&(W=d.expectedType):W=_i;for(let ne=0;ne<D.length;ne+=2){const se=D[ne],ve=D[ne+1],Ne=ne+3,ze=ne+4;if(typeof se!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ne);if(q.length&&q[q.length-1][0]>=se)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ne);const qe=d.parse(ve,ze,W);if(!qe)return null;W=W||qe.type,q.push([se,qe])}return To(W,Lr)||To(W,oi)||To(W,_i)||To(W,Ni)||To(W,ua)||To(W,Na)||To(W,Ua)||To(W,Oa(Lr))?new pn(W,_,S,R,q):d.error(`Type ${Nn(W)} is not interpolatable.`)}evaluate(u){const d=this.labels,_=this.outputs;if(d.length===1)return _[0].evaluate(u);const S=this.input.evaluate(u);if(S<=d[0])return _[0].evaluate(u);const R=d.length;if(S>=d[R-1])return _[R-1].evaluate(u);const D=Ve(d,S),q=pn.interpolationFactor(this.interpolation,S,d[D],d[D+1]),W=_[D].evaluate(u),ne=_[D+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return qr(W,ne,q);case"color":return Sr.interpolate(W,ne,q);case"padding":return an.interpolate(W,ne,q);case"colorArray":return tn.interpolate(W,ne,q);case"numberArray":return Cr.interpolate(W,ne,q);case"variableAnchorOffsetCollection":return gi.interpolate(W,ne,q);case"array":return Br(W,ne,q);case"projectionDefinition":return si.interpolate(W,ne,q)}case"interpolate-hcl":switch(this.type.kind){case"color":return Sr.interpolate(W,ne,q,"hcl");case"colorArray":return tn.interpolate(W,ne,q,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Sr.interpolate(W,ne,q,"lab");case"colorArray":return tn.interpolate(W,ne,q,"lab")}}}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Yn(f,u,d,_){const S=_-d,R=f-d;return S===0?0:u===1?R/S:(Math.pow(u,R)-1)/(Math.pow(u,S)-1)}const ei={color:Sr.interpolate,number:qr,padding:an.interpolate,numberArray:Cr.interpolate,colorArray:tn.interpolate,variableAnchorOffsetCollection:gi.interpolate,array:Br};class yi{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let _=null;const S=d.expectedType;S&&S.kind!=="value"&&(_=S);const R=[];for(const q of u.slice(1)){const W=d.parse(q,1+R.length,_,void 0,{typeAnnotation:"omit"});if(!W)return null;_=_||W.type,R.push(W)}if(!_)throw new Error("No output type");const D=S&&R.some((q=>Tl(S,q.type)));return new yi(D?Pn:_,R)}evaluate(u){let d,_=null,S=0;for(const R of this.args)if(S++,_=R.evaluate(u),_&&_ instanceof _a&&!_.available&&(d||(d=_.name),_=null,S===this.args.length&&(_=d)),_!==null)break;return _}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function Li(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Ii(f,u,d,_){return _.compare(u,d)===0}function mi(f,u,d){const _=f!=="=="&&f!=="!=";return class D9{constructor(R,D,q){this.type=gn,this.lhs=R,this.rhs=D,this.collator=q,this.hasUntypedArgument=R.type.kind==="value"||D.type.kind==="value"}static parse(R,D){if(R.length!==3&&R.length!==4)return D.error("Expected two or three arguments.");const q=R[0];let W=D.parse(R[1],1,Pn);if(!W)return null;if(!Li(q,W.type))return D.concat(1).error(`"${q}" comparisons are not supported for type '${Nn(W.type)}'.`);let ne=D.parse(R[2],2,Pn);if(!ne)return null;if(!Li(q,ne.type))return D.concat(2).error(`"${q}" comparisons are not supported for type '${Nn(ne.type)}'.`);if(W.type.kind!==ne.type.kind&&W.type.kind!=="value"&&ne.type.kind!=="value")return D.error(`Cannot compare types '${Nn(W.type)}' and '${Nn(ne.type)}'.`);_&&(W.type.kind==="value"&&ne.type.kind!=="value"?W=new yo(ne.type,[W]):W.type.kind!=="value"&&ne.type.kind==="value"&&(ne=new yo(W.type,[ne])));let se=null;if(R.length===4){if(W.type.kind!=="string"&&ne.type.kind!=="string"&&W.type.kind!=="value"&&ne.type.kind!=="value")return D.error("Cannot use collator to compare non-string types.");if(se=D.parse(R[3],3,ga),!se)return null}return new D9(W,ne,se)}evaluate(R){const D=this.lhs.evaluate(R),q=this.rhs.evaluate(R);if(_&&this.hasUntypedArgument){const W=Mn(D),ne=Mn(q);if(W.kind!==ne.kind||W.kind!=="string"&&W.kind!=="number")throw new On(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${W.kind}, ${ne.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){const W=Mn(D),ne=Mn(q);if(W.kind!=="string"||ne.kind!=="string")return u(R,D,q)}return this.collator?d(R,D,q,this.collator.evaluate(R)):u(R,D,q)}eachChild(R){R(this.lhs),R(this.rhs),this.collator&&R(this.collator)}outputDefined(){return!0}}}const Ea=mi("==",(function(f,u,d){return u===d}),Ii),Qi=mi("!=",(function(f,u,d){return u!==d}),(function(f,u,d,_){return!Ii(0,u,d,_)})),Fa=mi("<",(function(f,u,d){return u<d}),(function(f,u,d,_){return _.compare(u,d)<0})),Qo=mi(">",(function(f,u,d){return u>d}),(function(f,u,d,_){return _.compare(u,d)>0})),Ns=mi("<=",(function(f,u,d){return u<=d}),(function(f,u,d,_){return _.compare(u,d)<=0})),Xl=mi(">=",(function(f,u,d){return u>=d}),(function(f,u,d,_){return _.compare(u,d)>=0}));class vo{constructor(u,d,_){this.type=ga,this.locale=_,this.caseSensitive=u,this.diacriticSensitive=d}static parse(u,d){if(u.length!==2)return d.error("Expected one argument.");const _=u[1];if(typeof _!="object"||Array.isArray(_))return d.error("Collator options argument must be an object.");const S=d.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,gn);if(!S)return null;const R=d.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,gn);if(!R)return null;let D=null;return _.locale&&(D=d.parse(_.locale,1,fn),!D)?null:new vo(S,R,D)}evaluate(u){return new Gr(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class sl{constructor(u,d,_,S,R){this.type=fn,this.number=u,this.locale=d,this.currency=_,this.minFractionDigits=S,this.maxFractionDigits=R}static parse(u,d){if(u.length!==3)return d.error("Expected two arguments.");const _=d.parse(u[1],1,Lr);if(!_)return null;const S=u[2];if(typeof S!="object"||Array.isArray(S))return d.error("NumberFormat options argument must be an object.");let R=null;if(S.locale&&(R=d.parse(S.locale,1,fn),!R))return null;let D=null;if(S.currency&&(D=d.parse(S.currency,1,fn),!D))return null;let q=null;if(S["min-fraction-digits"]&&(q=d.parse(S["min-fraction-digits"],1,Lr),!q))return null;let W=null;return S["max-fraction-digits"]&&(W=d.parse(S["max-fraction-digits"],1,Lr),!W)?null:new sl(_,R,D,q,W)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Wi{constructor(u){this.type=na,this.sections=u}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const _=u[1];if(!Array.isArray(_)&&typeof _=="object")return d.error("First argument must be an image or text section.");const S=[];let R=!1;for(let D=1;D<=u.length-1;++D){const q=u[D];if(R&&typeof q=="object"&&!Array.isArray(q)){R=!1;let W=null;if(q["font-scale"]&&(W=d.parse(q["font-scale"],1,Lr),!W))return null;let ne=null;if(q["text-font"]&&(ne=d.parse(q["text-font"],1,Oa(fn)),!ne))return null;let se=null;if(q["text-color"]&&(se=d.parse(q["text-color"],1,_i),!se))return null;let ve=null;if(q["vertical-align"]){if(typeof q["vertical-align"]=="string"&&!Un.includes(q["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${q["vertical-align"]}' instead.`);if(ve=d.parse(q["vertical-align"],1,fn),!ve)return null}const Ne=S[S.length-1];Ne.scale=W,Ne.font=ne,Ne.textColor=se,Ne.verticalAlign=ve}else{const W=d.parse(u[D],1,Pn);if(!W)return null;const ne=W.type.kind;if(ne!=="string"&&ne!=="value"&&ne!=="null"&&ne!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");R=!0,S.push({content:W,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Wi(S)}evaluate(u){return new mn(this.sections.map((d=>{const _=d.content.evaluate(u);return Mn(_)===Mi?new pi("",_,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(u):null):new pi(En(_),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null,d.verticalAlign?d.verticalAlign.evaluate(u):null)})))}eachChild(u){for(const d of this.sections)u(d.content),d.scale&&u(d.scale),d.font&&u(d.font),d.textColor&&u(d.textColor),d.verticalAlign&&u(d.verticalAlign)}outputDefined(){return!1}}class Zs{constructor(u){this.type=Mi,this.input=u}static parse(u,d){if(u.length!==2)return d.error("Expected two arguments.");const _=d.parse(u[1],1,fn);return _?new Zs(_):d.error("No image name provided.")}evaluate(u){const d=this.input.evaluate(u),_=_a.fromString(d);return _&&u.availableImages&&(_.available=u.availableImages.indexOf(d)>-1),_}eachChild(u){u(this.input)}outputDefined(){return!1}}class Il{constructor(u){this.type=Lr,this.input=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const _=d.parse(u[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Nn(_.type)} instead.`):new Il(_):null}evaluate(u){const d=this.input.evaluate(u);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new On(`Expected value to be of type string or array, but found ${Nn(Mn(d))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Xa=8192;function Ba(f,u){const d=(180+f[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,S=Math.pow(2,u.z);return[Math.round(d*S*Xa),Math.round(_*S*Xa)]}function ro(f,u){const d=Math.pow(2,u.z);return[(S=(f[0]/Xa+u.x)/d,360*S-180),(_=(f[1]/Xa+u.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90)];var _,S}function Ta(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function ko(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function Yl(f,u,d){const _=f[0]-u[0],S=f[1]-u[1],R=f[0]-d[0],D=f[1]-d[1];return _*D-R*S==0&&_*R<=0&&S*D<=0}function fa(f,u,d,_){return(S=[_[0]-d[0],_[1]-d[1]])[0]*(R=[u[0]-f[0],u[1]-f[1]])[1]-S[1]*R[0]!=0&&!(!fu(f,u,d,_)||!fu(d,_,f,u));var S,R}function wc(f,u,d){for(const _ of d)for(let S=0;S<_.length-1;++S)if(fa(f,u,_[S],_[S+1]))return!0;return!1}function Vo(f,u,d=!1){let _=!1;for(const q of u)for(let W=0;W<q.length-1;W++){if(Yl(f,q[W],q[W+1]))return d;(R=q[W])[1]>(S=f)[1]!=(D=q[W+1])[1]>S[1]&&S[0]<(D[0]-R[0])*(S[1]-R[1])/(D[1]-R[1])+R[0]&&(_=!_)}var S,R,D;return _}function kl(f,u){for(const d of u)if(Vo(f,d))return!0;return!1}function La(f,u){for(const d of f)if(!Vo(d,u))return!1;for(let d=0;d<f.length-1;++d)if(wc(f[d],f[d+1],u))return!1;return!0}function ps(f,u){for(const d of u)if(La(f,d))return!0;return!1}function fu(f,u,d,_){const S=_[0]-d[0],R=_[1]-d[1],D=(f[0]-d[0])*R-S*(f[1]-d[1]),q=(u[0]-d[0])*R-S*(u[1]-d[1]);return D>0&&q<0||D<0&&q>0}function hu(f,u,d){const _=[];for(let S=0;S<f.length;S++){const R=[];for(let D=0;D<f[S].length;D++){const q=Ba(f[S][D],d);Ta(u,q),R.push(q)}_.push(R)}return _}function Ks(f,u,d){const _=[];for(let S=0;S<f.length;S++){const R=hu(f[S],u,d);_.push(R)}return _}function ll(f,u,d,_){if(f[0]<d[0]||f[0]>d[2]){const S=.5*_;let R=f[0]-d[0]>S?-_:d[0]-f[0]>S?_:0;R===0&&(R=f[0]-d[2]>S?-_:d[2]-f[0]>S?_:0),f[0]+=R}Ta(u,f)}function lo(f,u,d,_){const S=Math.pow(2,_.z)*Xa,R=[_.x*Xa,_.y*Xa],D=[];for(const q of f)for(const W of q){const ne=[W.x+R[0],W.y+R[1]];ll(ne,u,d,S),D.push(ne)}return D}function Ya(f,u,d,_){const S=Math.pow(2,_.z)*Xa,R=[_.x*Xa,_.y*Xa],D=[];for(const W of f){const ne=[];for(const se of W){const ve=[se.x+R[0],se.y+R[1]];Ta(u,ve),ne.push(ve)}D.push(ne)}if(u[2]-u[0]<=S/2){(q=u)[0]=q[1]=1/0,q[2]=q[3]=-1/0;for(const W of D)for(const ne of W)ll(ne,u,d,S)}var q;return D}class ms{constructor(u,d){this.type=gn,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if($o(u[1])){const _=u[1];if(_.type==="FeatureCollection"){const S=[];for(const R of _.features){const{type:D,coordinates:q}=R.geometry;D==="Polygon"&&S.push(q),D==="MultiPolygon"&&S.push(...q)}if(S.length)return new ms(_,{type:"MultiPolygon",coordinates:S})}else if(_.type==="Feature"){const S=_.geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new ms(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new ms(_,_)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,_){const S=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(_.type==="Polygon"){const q=hu(_.coordinates,R,D),W=lo(d.geometry(),S,R,D);if(!ko(S,R))return!1;for(const ne of W)if(!Vo(ne,q))return!1}if(_.type==="MultiPolygon"){const q=Ks(_.coordinates,R,D),W=lo(d.geometry(),S,R,D);if(!ko(S,R))return!1;for(const ne of W)if(!kl(ne,q))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,_){const S=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(_.type==="Polygon"){const q=hu(_.coordinates,R,D),W=Ya(d.geometry(),S,R,D);if(!ko(S,R))return!1;for(const ne of W)if(!La(ne,q))return!1}if(_.type==="MultiPolygon"){const q=Ks(_.coordinates,R,D),W=Ya(d.geometry(),S,R,D);if(!ko(S,R))return!1;for(const ne of W)if(!ps(ne,q))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let no=class{constructor(f=[],u=(d,_)=>d<_?-1:d>_?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:d}=this,_=u[f];for(;f>0;){const S=f-1>>1,R=u[S];if(d(_,R)>=0)break;u[f]=R,f=S}u[f]=_}_down(f){const{data:u,compare:d}=this,_=this.length>>1,S=u[f];for(;f<_;){let R=1+(f<<1);const D=R+1;if(D<this.length&&d(u[D],u[R])<0&&(R=D),d(u[R],S)>=0)break;u[f]=u[R],f=R}u[f]=S}};function ul(f,u,d=0,_=f.length-1,S=cl){for(;_>d;){if(_-d>600){const W=_-d+1,ne=u-d+1,se=Math.log(W),ve=.5*Math.exp(2*se/3),Ne=.5*Math.sqrt(se*ve*(W-ve)/W)*(ne-W/2<0?-1:1);ul(f,u,Math.max(d,Math.floor(u-ne*ve/W+Ne)),Math.min(_,Math.floor(u+(W-ne)*ve/W+Ne)),S)}const R=f[u];let D=d,q=_;for(Uo(f,d,u),S(f[_],R)>0&&Uo(f,d,_);D<q;){for(Uo(f,D,q),D++,q--;S(f[D],R)<0;)D++;for(;S(f[q],R)>0;)q--}S(f[d],R)===0?Uo(f,d,q):(q++,Uo(f,q,_)),q<=u&&(d=q+1),u<=q&&(_=q-1)}}function Uo(f,u,d){const _=f[u];f[u]=f[d],f[d]=_}function cl(f,u){return f<u?-1:f>u?1:0}function ia(f,u){if(f.length<=1)return[f];const d=[];let _,S;for(const R of f){const D=Os(R);D!==0&&(R.area=Math.abs(D),S===void 0&&(S=D<0),S===D<0?(_&&d.push(_),_=[R]):_.push(R))}if(_&&d.push(_),u>1)for(let R=0;R<d.length;R++)d[R].length<=u||(ul(d[R],u,1,d[R].length-1,Zl),d[R]=d[R].slice(0,u));return d}function Zl(f,u){return u.area-f.area}function Os(f){let u=0;for(let d,_,S=0,R=f.length,D=R-1;S<R;D=S++)d=f[S],_=f[D],u+=(_.x-d.x)*(d.y+_.y);return u}const gs=1/298.257223563,dl=gs*(2-gs),Kl=Math.PI/180;class ys{constructor(u){const d=6378.137*Kl*1e3,_=Math.cos(u*Kl),S=1/(1-dl*(1-_*_)),R=Math.sqrt(S);this.kx=d*R*_,this.ky=d*R*S*(1-dl)}distance(u,d){const _=this.wrap(u[0]-d[0])*this.kx,S=(u[1]-d[1])*this.ky;return Math.sqrt(_*_+S*S)}pointOnLine(u,d){let _,S,R,D,q=1/0;for(let W=0;W<u.length-1;W++){let ne=u[W][0],se=u[W][1],ve=this.wrap(u[W+1][0]-ne)*this.kx,Ne=(u[W+1][1]-se)*this.ky,ze=0;ve===0&&Ne===0||(ze=(this.wrap(d[0]-ne)*this.kx*ve+(d[1]-se)*this.ky*Ne)/(ve*ve+Ne*Ne),ze>1?(ne=u[W+1][0],se=u[W+1][1]):ze>0&&(ne+=ve/this.kx*ze,se+=Ne/this.ky*ze)),ve=this.wrap(d[0]-ne)*this.kx,Ne=(d[1]-se)*this.ky;const qe=ve*ve+Ne*Ne;qe<q&&(q=qe,_=ne,S=se,R=W,D=ze)}return{point:[_,S],index:R,t:Math.max(0,Math.min(1,D))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Al(f,u){return u[0]-f[0]}function fl(f){return f[1]-f[0]+1}function $t(f,u){return f[1]>=f[0]&&f[1]<u}function er(f,u){if(f[0]>f[1])return[null,null];const d=fl(f);if(u){if(d===2)return[f,null];const S=Math.floor(d/2);return[[f[0],f[0]+S],[f[0]+S,f[1]]]}if(d===1)return[f,null];const _=Math.floor(d/2)-1;return[[f[0],f[0]+_],[f[0]+_+1,f[1]]]}function Jr(f,u){if(!$t(u,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let _=u[0];_<=u[1];++_)Ta(d,f[_]);return d}function yn(f){const u=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const _ of d)Ta(u,_);return u}function di(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function vn(f,u,d){if(!di(f)||!di(u))return NaN;let _=0,S=0;return f[2]<u[0]&&(_=u[0]-f[2]),f[0]>u[2]&&(_=f[0]-u[2]),f[1]>u[3]&&(S=f[1]-u[3]),f[3]<u[1]&&(S=u[1]-f[3]),d.distance([0,0],[_,S])}function E(f,u,d){const _=d.pointOnLine(u,f);return d.distance(f,_.point)}function m(f,u,d,_,S){const R=Math.min(E(f,[d,_],S),E(u,[d,_],S)),D=Math.min(E(d,[f,u],S),E(_,[f,u],S));return Math.min(R,D)}function y(f,u,d,_,S){if(!$t(u,f.length)||!$t(_,d.length))return 1/0;let R=1/0;for(let D=u[0];D<u[1];++D){const q=f[D],W=f[D+1];for(let ne=_[0];ne<_[1];++ne){const se=d[ne],ve=d[ne+1];if(fa(q,W,se,ve))return 0;R=Math.min(R,m(q,W,se,ve,S))}}return R}function T(f,u,d,_,S){if(!$t(u,f.length)||!$t(_,d.length))return NaN;let R=1/0;for(let D=u[0];D<=u[1];++D)for(let q=_[0];q<=_[1];++q)if(R=Math.min(R,S.distance(f[D],d[q])),R===0)return R;return R}function z(f,u,d){if(Vo(f,u,!0))return 0;let _=1/0;for(const S of u){const R=S[0],D=S[S.length-1];if(R!==D&&(_=Math.min(_,E(f,[D,R],d)),_===0))return _;const q=d.pointOnLine(S,f);if(_=Math.min(_,d.distance(f,q.point)),_===0)return _}return _}function re(f,u,d,_){if(!$t(u,f.length))return NaN;for(let R=u[0];R<=u[1];++R)if(Vo(f[R],d,!0))return 0;let S=1/0;for(let R=u[0];R<u[1];++R){const D=f[R],q=f[R+1];for(const W of d)for(let ne=0,se=W.length,ve=se-1;ne<se;ve=ne++){const Ne=W[ve],ze=W[ne];if(fa(D,q,Ne,ze))return 0;S=Math.min(S,m(D,q,Ne,ze,_))}}return S}function ye(f,u){for(const d of f)for(const _ of d)if(Vo(_,u,!0))return!0;return!1}function Le(f,u,d,_=1/0){const S=yn(f),R=yn(u);if(_!==1/0&&vn(S,R,d)>=_)return _;if(ko(S,R)){if(ye(f,u))return 0}else if(ye(u,f))return 0;let D=1/0;for(const q of f)for(let W=0,ne=q.length,se=ne-1;W<ne;se=W++){const ve=q[se],Ne=q[W];for(const ze of u)for(let qe=0,Ze=ze.length,lt=Ze-1;qe<Ze;lt=qe++){const xt=ze[lt],Gt=ze[qe];if(fa(ve,Ne,xt,Gt))return 0;D=Math.min(D,m(ve,Ne,xt,Gt,d))}}return D}function Ke(f,u,d,_,S,R){if(!R)return;const D=vn(Jr(_,R),S,d);D<u&&f.push([D,R,[0,0]])}function yt(f,u,d,_,S,R,D){if(!R||!D)return;const q=vn(Jr(_,R),Jr(S,D),d);q<u&&f.push([q,R,D])}function Yt(f,u,d,_,S=1/0){let R=Math.min(_.distance(f[0],d[0][0]),S);if(R===0)return R;const D=new no([[0,[0,f.length-1],[0,0]]],Al),q=yn(d);for(;D.length>0;){const W=D.pop();if(W[0]>=R)continue;const ne=W[1],se=u?50:100;if(fl(ne)<=se){if(!$t(ne,f.length))return NaN;if(u){const ve=re(f,ne,d,_);if(isNaN(ve)||ve===0)return ve;R=Math.min(R,ve)}else for(let ve=ne[0];ve<=ne[1];++ve){const Ne=z(f[ve],d,_);if(R=Math.min(R,Ne),R===0)return 0}}else{const ve=er(ne,u);Ke(D,R,_,f,q,ve[0]),Ke(D,R,_,f,q,ve[1])}}return R}function or(f,u,d,_,S,R=1/0){let D=Math.min(R,S.distance(f[0],d[0]));if(D===0)return D;const q=new no([[0,[0,f.length-1],[0,d.length-1]]],Al);for(;q.length>0;){const W=q.pop();if(W[0]>=D)continue;const ne=W[1],se=W[2],ve=u?50:100,Ne=_?50:100;if(fl(ne)<=ve&&fl(se)<=Ne){if(!$t(ne,f.length)&&$t(se,d.length))return NaN;let ze;if(u&&_)ze=y(f,ne,d,se,S),D=Math.min(D,ze);else if(u&&!_){const qe=f.slice(ne[0],ne[1]+1);for(let Ze=se[0];Ze<=se[1];++Ze)if(ze=E(d[Ze],qe,S),D=Math.min(D,ze),D===0)return D}else if(!u&&_){const qe=d.slice(se[0],se[1]+1);for(let Ze=ne[0];Ze<=ne[1];++Ze)if(ze=E(f[Ze],qe,S),D=Math.min(D,ze),D===0)return D}else ze=T(f,ne,d,se,S),D=Math.min(D,ze)}else{const ze=er(ne,u),qe=er(se,_);yt(q,D,S,f,d,ze[0],qe[0]),yt(q,D,S,f,d,ze[0],qe[1]),yt(q,D,S,f,d,ze[1],qe[0]),yt(q,D,S,f,d,ze[1],qe[1])}}return D}function Nr(f){return f.type==="MultiPolygon"?f.coordinates.map((u=>({type:"Polygon",coordinates:u}))):f.type==="MultiLineString"?f.coordinates.map((u=>({type:"LineString",coordinates:u}))):f.type==="MultiPoint"?f.coordinates.map((u=>({type:"Point",coordinates:u}))):[f]}class on{constructor(u,d){this.type=Lr,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if($o(u[1])){const _=u[1];if(_.type==="FeatureCollection")return new on(_,_.features.map((S=>Nr(S.geometry))).flat());if(_.type==="Feature")return new on(_,Nr(_.geometry));if("type"in _&&"coordinates"in _)return new on(_,Nr(_))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,_){const S=d.geometry(),R=S.flat().map((W=>ro([W.x,W.y],d.canonical)));if(S.length===0)return NaN;const D=new ys(R[0][1]);let q=1/0;for(const W of _){switch(W.type){case"Point":q=Math.min(q,or(R,!1,[W.coordinates],!1,D,q));break;case"LineString":q=Math.min(q,or(R,!1,W.coordinates,!0,D,q));break;case"Polygon":q=Math.min(q,Yt(R,!1,W.coordinates,D,q))}if(q===0)return q}return q})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,_){const S=d.geometry(),R=S.flat().map((W=>ro([W.x,W.y],d.canonical)));if(S.length===0)return NaN;const D=new ys(R[0][1]);let q=1/0;for(const W of _){switch(W.type){case"Point":q=Math.min(q,or(R,!0,[W.coordinates],!1,D,q));break;case"LineString":q=Math.min(q,or(R,!0,W.coordinates,!0,D,q));break;case"Polygon":q=Math.min(q,Yt(R,!0,W.coordinates,D,q))}if(q===0)return q}return q})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(d,_){const S=d.geometry();if(S.length===0||S[0].length===0)return NaN;const R=ia(S,0).map((W=>W.map((ne=>ne.map((se=>ro([se.x,se.y],d.canonical))))))),D=new ys(R[0][0][0][1]);let q=1/0;for(const W of _)for(const ne of R){switch(W.type){case"Point":q=Math.min(q,Yt([W.coordinates],!1,ne,D,q));break;case"LineString":q=Math.min(q,Yt(W.coordinates,!0,ne,D,q));break;case"Polygon":q=Math.min(q,Le(ne,W.coordinates,D,q))}if(q===0)return q}return q})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class wn{constructor(u){this.type=Pn,this.key=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const _=u[1];return _==null?d.error("Global state property must be defined."):typeof _!="string"?d.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new wn(_)}evaluate(u){var d;const _=(d=u.globals)===null||d===void 0?void 0:d.globalState;return _&&Object.keys(_).length!==0?Xe(_,this.key):null}eachChild(){}outputDefined(){return!1}}const Ln={"==":Ea,"!=":Qi,">":Qo,"<":Fa,">=":Xl,"<=":Ns,array:yo,at:Ys,boolean:yo,case:Ca,coalesce:yi,collator:vo,format:Wi,image:Zs,in:Ha,"index-of":Wa,interpolate:pn,"interpolate-hcl":pn,"interpolate-lab":pn,length:Il,let:so,literal:Po,match:Gi,number:yo,"number-format":sl,object:yo,slice:le,step:pt,string:yo,"to-boolean":Io,"to-color":Io,"to-number":Io,"to-string":Io,var:Ds,within:ms,distance:on,"global-state":wn};class bn{constructor(u,d,_,S){this.name=u,this.type=d,this._evaluate=_,this.args=S}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,d){const _=u[0],S=bn.definitions[_];if(!S)return d.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0);const R=Array.isArray(S)?S[0]:S.type,D=Array.isArray(S)?[[S[1],S[2]]]:S.overloads,q=D.filter((([ne])=>!Array.isArray(ne)||ne.length===u.length-1));let W=null;for(const[ne,se]of q){W=new Xs(d.registry,Ra,d.path,null,d.scope);const ve=[];let Ne=!1;for(let ze=1;ze<u.length;ze++){const qe=u[ze],Ze=Array.isArray(ne)?ne[ze-1]:ne.type,lt=W.parse(qe,1+ve.length,Ze);if(!lt){Ne=!0;break}ve.push(lt)}if(!Ne)if(Array.isArray(ne)&&ne.length!==ve.length)W.error(`Expected ${ne.length} arguments, but found ${ve.length} instead.`);else{for(let ze=0;ze<ve.length;ze++){const qe=Array.isArray(ne)?ne[ze]:ne.type,Ze=ve[ze];W.concat(ze+1).checkSubtype(qe,Ze.type)}if(W.errors.length===0)return new bn(_,R,se,ve)}}if(q.length===1)d.errors.push(...W.errors);else{const ne=(q.length?q:D).map((([ve])=>{return Ne=ve,Array.isArray(Ne)?`(${Ne.map(Nn).join(", ")})`:`(${Nn(Ne.type)}...)`;var Ne})).join(" | "),se=[];for(let ve=1;ve<u.length;ve++){const Ne=d.parse(u[ve],1+se.length);if(!Ne)return null;se.push(Nn(Ne.type))}d.error(`Expected arguments of type ${ne}, but found (${se.join(", ")}) instead.`)}return null}static register(u,d){bn.definitions=d;for(const _ in d)u[_]=bn}}function Tn(f,[u,d,_,S]){u=u.evaluate(f),d=d.evaluate(f),_=_.evaluate(f);const R=S?S.evaluate(f):1,D=An(u,d,_,R);if(D)throw new On(D);return new Sr(u/255,d/255,_/255,R,!1)}function qi(f,u){return f in u}function Hi(f,u){const d=u[f];return d===void 0?null:d}function ha(f){return{type:f}}function Ra(f){if(f instanceof Ds)return Ra(f.boundExpression);if(f instanceof bn&&f.name==="error"||f instanceof vo||f instanceof ms||f instanceof on||f instanceof wn)return!1;const u=f instanceof Io||f instanceof yo;let d=!0;return f.eachChild((_=>{d=u?d&&Ra(_):d&&_ instanceof Po})),!!d&&bo(f)&&hl(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function bo(f){if(f instanceof bn&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof ms||f instanceof on)return!1;let u=!0;return f.eachChild((d=>{u&&!bo(d)&&(u=!1)})),u}function es(f){if(f instanceof bn&&f.name==="feature-state")return!1;let u=!0;return f.eachChild((d=>{u&&!es(d)&&(u=!1)})),u}function hl(f,u){if(f instanceof bn&&u.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild((_=>{d&&!hl(_,u)&&(d=!1)})),d}function pu(f){return{result:"success",value:f}}function vs(f){return{result:"error",value:f}}function Ao(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function ku(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Js(f){return!!f.expression&&f.expression.interpolated}function qn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function _o(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Mn(f)===Di}function Ku(f){return f}function Sc(f,u){const d=f.stops&&typeof f.stops[0][0]=="object",_=d||!(d||f.property!==void 0),S=f.type||(Js(u)?"exponential":"interval"),R=(function(se){switch(se.type){case"color":return Sr.parse;case"padding":return an.parse;case"numberArray":return Cr.parse;case"colorArray":return tn.parse;default:return null}})(u);if(R&&((f=wr({},f)).stops&&(f.stops=f.stops.map((se=>[se[0],R(se[1])]))),f.default=R(f.default?f.default:u.default)),f.colorSpace&&(D=f.colorSpace)!=="rgb"&&D!=="hcl"&&D!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var D;const q=(function(se){switch(se){case"exponential":return eh;case"interval":return Qf;case"categorical":return Au;case"identity":return gm;default:throw new Error(`Unknown function type "${se}"`)}})(S);let W,ne;if(S==="categorical"){W=Object.create(null);for(const se of f.stops)W[se[0]]=se[1];ne=typeof f.stops[0][0]}if(d){const se={},ve=[];for(let qe=0;qe<f.stops.length;qe++){const Ze=f.stops[qe],lt=Ze[0].zoom;se[lt]===void 0&&(se[lt]={zoom:lt,type:f.type,property:f.property,default:f.default,stops:[]},ve.push(lt)),se[lt].stops.push([Ze[0].value,Ze[1]])}const Ne=[];for(const qe of ve)Ne.push([se[qe].zoom,Sc(se[qe],u)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:pn.interpolationFactor.bind(void 0,ze),zoomStops:Ne.map((qe=>qe[0])),evaluate:({zoom:qe},Ze)=>eh({stops:Ne,base:f.base},u,qe).evaluate(qe,Ze)}}if(_){const se=S==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:se,interpolationFactor:pn.interpolationFactor.bind(void 0,se),zoomStops:f.stops.map((ve=>ve[0])),evaluate:({zoom:ve})=>q(f,u,ve,W,ne)}}return{kind:"source",evaluate(se,ve){const Ne=ve&&ve.properties?ve.properties[f.property]:void 0;return Ne===void 0?pl(f.default,u.default):q(f,u,Ne,W,ne)}}}function pl(f,u,d){return f!==void 0?f:u!==void 0?u:d!==void 0?d:void 0}function Au(f,u,d,_,S){return pl(typeof d===S?_[d]:void 0,f.default,u.default)}function Qf(f,u,d){if(qn(d)!=="number")return pl(f.default,u.default);const _=f.stops.length;if(_===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[_-1][0])return f.stops[_-1][1];const S=Ve(f.stops.map((R=>R[0])),d);return f.stops[S][1]}function eh(f,u,d){const _=f.base!==void 0?f.base:1;if(qn(d)!=="number")return pl(f.default,u.default);const S=f.stops.length;if(S===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[S-1][0])return f.stops[S-1][1];const R=Ve(f.stops.map((se=>se[0])),d),D=(function(se,ve,Ne,ze){const qe=ze-Ne,Ze=se-Ne;return qe===0?0:ve===1?Ze/qe:(Math.pow(ve,Ze)-1)/(Math.pow(ve,qe)-1)})(d,_,f.stops[R][0],f.stops[R+1][0]),q=f.stops[R][1],W=f.stops[R+1][1],ne=ei[u.type]||Ku;return typeof q.evaluate=="function"?{evaluate(...se){const ve=q.evaluate.apply(void 0,se),Ne=W.evaluate.apply(void 0,se);if(ve!==void 0&&Ne!==void 0)return ne(ve,Ne,D,f.colorSpace)}}:ne(q,W,D,f.colorSpace)}function gm(f,u,d){switch(u.type){case"color":d=Sr.parse(d);break;case"formatted":d=mn.fromString(d.toString());break;case"resolvedImage":d=_a.fromString(d.toString());break;case"padding":d=an.parse(d);break;case"colorArray":d=tn.parse(d);break;case"numberArray":d=Cr.parse(d);break;default:qn(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0)}return pl(d,f.default,u.default)}bn.register(Ln,{error:[{kind:"error"},[fn],(f,[u])=>{throw new On(u.evaluate(f))}],typeof:[fn,[Pn],(f,[u])=>Nn(Mn(u.evaluate(f)))],"to-rgba":[Oa(Lr,4),[_i],(f,[u])=>{const[d,_,S,R]=u.evaluate(f).rgb;return[255*d,255*_,255*S,R]}],rgb:[_i,[Lr,Lr,Lr],Tn],rgba:[_i,[Lr,Lr,Lr,Lr],Tn],has:{type:gn,overloads:[[[fn],(f,[u])=>qi(u.evaluate(f),f.properties())],[[fn,Di],(f,[u,d])=>qi(u.evaluate(f),d.evaluate(f))]]},get:{type:Pn,overloads:[[[fn],(f,[u])=>Hi(u.evaluate(f),f.properties())],[[fn,Di],(f,[u,d])=>Hi(u.evaluate(f),d.evaluate(f))]]},"feature-state":[Pn,[fn],(f,[u])=>Hi(u.evaluate(f),f.featureState||{})],properties:[Di,[],f=>f.properties()],"geometry-type":[fn,[],f=>f.geometryType()],id:[Pn,[],f=>f.id()],zoom:[Lr,[],f=>f.globals.zoom],"heatmap-density":[Lr,[],f=>f.globals.heatmapDensity||0],elevation:[Lr,[],f=>f.globals.elevation||0],"line-progress":[Lr,[],f=>f.globals.lineProgress||0],accumulated:[Pn,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Lr,ha(Lr),(f,u)=>{let d=0;for(const _ of u)d+=_.evaluate(f);return d}],"*":[Lr,ha(Lr),(f,u)=>{let d=1;for(const _ of u)d*=_.evaluate(f);return d}],"-":{type:Lr,overloads:[[[Lr,Lr],(f,[u,d])=>u.evaluate(f)-d.evaluate(f)],[[Lr],(f,[u])=>-u.evaluate(f)]]},"/":[Lr,[Lr,Lr],(f,[u,d])=>u.evaluate(f)/d.evaluate(f)],"%":[Lr,[Lr,Lr],(f,[u,d])=>u.evaluate(f)%d.evaluate(f)],ln2:[Lr,[],()=>Math.LN2],pi:[Lr,[],()=>Math.PI],e:[Lr,[],()=>Math.E],"^":[Lr,[Lr,Lr],(f,[u,d])=>Math.pow(u.evaluate(f),d.evaluate(f))],sqrt:[Lr,[Lr],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[Lr,[Lr],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[Lr,[Lr],(f,[u])=>Math.log(u.evaluate(f))],log2:[Lr,[Lr],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[Lr,[Lr],(f,[u])=>Math.sin(u.evaluate(f))],cos:[Lr,[Lr],(f,[u])=>Math.cos(u.evaluate(f))],tan:[Lr,[Lr],(f,[u])=>Math.tan(u.evaluate(f))],asin:[Lr,[Lr],(f,[u])=>Math.asin(u.evaluate(f))],acos:[Lr,[Lr],(f,[u])=>Math.acos(u.evaluate(f))],atan:[Lr,[Lr],(f,[u])=>Math.atan(u.evaluate(f))],min:[Lr,ha(Lr),(f,u)=>Math.min(...u.map((d=>d.evaluate(f))))],max:[Lr,ha(Lr),(f,u)=>Math.max(...u.map((d=>d.evaluate(f))))],abs:[Lr,[Lr],(f,[u])=>Math.abs(u.evaluate(f))],round:[Lr,[Lr],(f,[u])=>{const d=u.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[Lr,[Lr],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[Lr,[Lr],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[gn,[fn,Pn],(f,[u,d])=>f.properties()[u.value]===d.value],"filter-id-==":[gn,[Pn],(f,[u])=>f.id()===u.value],"filter-type-==":[gn,[fn],(f,[u])=>f.geometryType()===u.value],"filter-<":[gn,[fn,Pn],(f,[u,d])=>{const _=f.properties()[u.value],S=d.value;return typeof _==typeof S&&_<S}],"filter-id-<":[gn,[Pn],(f,[u])=>{const d=f.id(),_=u.value;return typeof d==typeof _&&d<_}],"filter->":[gn,[fn,Pn],(f,[u,d])=>{const _=f.properties()[u.value],S=d.value;return typeof _==typeof S&&_>S}],"filter-id->":[gn,[Pn],(f,[u])=>{const d=f.id(),_=u.value;return typeof d==typeof _&&d>_}],"filter-<=":[gn,[fn,Pn],(f,[u,d])=>{const _=f.properties()[u.value],S=d.value;return typeof _==typeof S&&_<=S}],"filter-id-<=":[gn,[Pn],(f,[u])=>{const d=f.id(),_=u.value;return typeof d==typeof _&&d<=_}],"filter->=":[gn,[fn,Pn],(f,[u,d])=>{const _=f.properties()[u.value],S=d.value;return typeof _==typeof S&&_>=S}],"filter-id->=":[gn,[Pn],(f,[u])=>{const d=f.id(),_=u.value;return typeof d==typeof _&&d>=_}],"filter-has":[gn,[Pn],(f,[u])=>u.value in f.properties()],"filter-has-id":[gn,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[gn,[Oa(fn)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[gn,[Oa(Pn)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[gn,[fn,Oa(Pn)],(f,[u,d])=>d.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[gn,[fn,Oa(Pn)],(f,[u,d])=>(function(_,S,R,D){for(;R<=D;){const q=R+D>>1;if(S[q]===_)return!0;S[q]>_?D=q-1:R=q+1}return!1})(f.properties()[u.value],d.value,0,d.value.length-1)],all:{type:gn,overloads:[[[gn,gn],(f,[u,d])=>u.evaluate(f)&&d.evaluate(f)],[ha(gn),(f,u)=>{for(const d of u)if(!d.evaluate(f))return!1;return!0}]]},any:{type:gn,overloads:[[[gn,gn],(f,[u,d])=>u.evaluate(f)||d.evaluate(f)],[ha(gn),(f,u)=>{for(const d of u)if(d.evaluate(f))return!0;return!1}]]},"!":[gn,[gn],(f,[u])=>!u.evaluate(f)],"is-supported-script":[gn,[fn],(f,[u])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(u.evaluate(f))}],upcase:[fn,[fn],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[fn,[fn],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[fn,ha(Pn),(f,u)=>u.map((d=>En(d.evaluate(f)))).join("")],"resolved-locale":[fn,[ga],(f,[u])=>u.evaluate(f).resolvedLocale()]});class uf{constructor(u,d){this.expression=u,this._warningHistory={},this._evaluator=new Pl,this._defaultValue=d?(function(_){if(_.type==="color"&&_o(_.default))return new Sr(0,0,0,0);switch(_.type){case"color":return Sr.parse(_.default)||null;case"padding":return an.parse(_.default)||null;case"numberArray":return Cr.parse(_.default)||null;case"colorArray":return tn.parse(_.default)||null;case"variableAnchorOffsetCollection":return gi.parse(_.default)||null;case"projectionDefinition":return si.parse(_.default)||null;default:return _.default===void 0?null:_.default}})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(u,d,_,S,R,D){return this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=_,this._evaluator.canonical=S,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)}evaluate(u,d,_,S,R,D){this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=_||null,this._evaluator.canonical=S,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=D||null;try{const q=this.expression.evaluate(this._evaluator);if(q==null||typeof q=="number"&&q!=q)return this._defaultValue;if(this._enumValues&&!(q in this._enumValues))throw new On(`Expected value to be one of ${Object.keys(this._enumValues).map((W=>JSON.stringify(W))).join(", ")}, but found ${JSON.stringify(q)} instead.`);return q}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console<"u"&&console.warn(q.message)),this._defaultValue}}}function wd(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Ln}function Cc(f,u){const d=new Xs(Ln,Ra,[],u?(function(S){const R={color:_i,string:fn,number:Lr,enum:fn,boolean:gn,formatted:na,padding:Ni,numberArray:ua,colorArray:Na,projectionDefinition:oi,resolvedImage:Mi,variableAnchorOffsetCollection:Ua};return S.type==="array"?Oa(R[S.value]||Pn,S.length):R[S.type]})(u):void 0),_=d.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?pu(new uf(_,u)):vs(d.errors)}class Hc{constructor(u,d){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!es(d.expression),this.globalStateRefs=df(d.expression)}evaluateWithoutErrorHandling(u,d,_,S,R,D){return this._styleExpression.evaluateWithoutErrorHandling(u,d,_,S,R,D)}evaluate(u,d,_,S,R,D){return this._styleExpression.evaluate(u,d,_,S,R,D)}}class Yh{constructor(u,d,_,S){this.kind=u,this.zoomStops=_,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!es(d.expression),this.globalStateRefs=df(d.expression),this.interpolationType=S}evaluateWithoutErrorHandling(u,d,_,S,R,D){return this._styleExpression.evaluateWithoutErrorHandling(u,d,_,S,R,D)}evaluate(u,d,_,S,R,D){return this._styleExpression.evaluate(u,d,_,S,R,D)}interpolationFactor(u,d,_){return this.interpolationType?pn.interpolationFactor(this.interpolationType,u,d,_):0}}function ym(f,u){const d=Cc(f,u);if(d.result==="error")return d;const _=d.value.expression,S=bo(_);if(!S&&!Ao(u))return vs([new Ar("","data expressions not supported")]);const R=hl(_,["zoom"]);if(!R&&!ku(u))return vs([new Ar("","zoom expressions not supported")]);const D=cf(_);return D||R?D instanceof Ar?vs([D]):D instanceof pn&&!Js(u)?vs([new Ar("",'"interpolate" expressions cannot be used with this property')]):pu(D?new Yh(S?"camera":"composite",d.value,D.labels,D instanceof pn?D.interpolation:void 0):new Hc(S?"constant":"source",d.value)):vs([new Ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Sd{constructor(u,d){this._parameters=u,this._specification=d,wr(this,Sc(this._parameters,this._specification))}static deserialize(u){return new Sd(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function cf(f){let u=null;if(f instanceof so)u=cf(f.result);else if(f instanceof yi){for(const d of f.args)if(u=cf(d),u)break}else(f instanceof pt||f instanceof pn)&&f.input instanceof bn&&f.input.name==="zoom"&&(u=f);return u instanceof Ar||f.eachChild((d=>{const _=cf(d);_ instanceof Ar?u=_:!u&&_?u=new Ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&_&&u!==_&&(u=new Ar("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function df(f,u=new Set){return f instanceof wn&&u.add(f.key),f.eachChild((d=>{df(d,u)})),u}function th(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!th(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const Zh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wc(f){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};th(f)||(f=mu(f));const u=Cc(f,Zh);if(u.result==="error")throw new Error(u.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,_,S)=>u.value.evaluate(d,_,{},S),needGeometry:Cd(f),getGlobalStateRefs:()=>df(u.value.expression)}}function ff(f,u){return f<u?-1:f>u?1:0}function Cd(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(Cd(f[u]))return!0;return!1}function mu(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?Kh(f[1],f[2],"=="):u==="!="?rh(Kh(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Kh(f[1],f[2],u):u==="any"?(d=f.slice(1),["any"].concat(d.map(mu))):u==="all"?["all"].concat(f.slice(1).map(mu)):u==="none"?["all"].concat(f.slice(1).map(mu).map(rh)):u==="in"?vm(f[1],f.slice(2)):u==="!in"?rh(vm(f[1],f.slice(2))):u==="has"?Jh(f[1]):u!=="!has"||rh(Jh(f[1]));var d}function Kh(f,u,d){switch(f){case"$type":return[`filter-type-${d}`,u];case"$id":return[`filter-id-${d}`,u];default:return[`filter-${d}`,f,u]}}function vm(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((d=>typeof d!=typeof u[0]))?["filter-in-large",f,["literal",u.sort(ff)]]:["filter-in-small",f,["literal",u]]}}function Jh(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function rh(f){return["!",f]}function Qh(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let S="[";for(const R of f)S+=`${Qh(R)},`;return`${S}]`}const d=Object.keys(f).sort();let _="{";for(let S=0;S<d.length;S++)_+=`${JSON.stringify(d[S])}:${Qh(f[d[S]])},`;return`${_}}`}function Fy(f){let u="";for(const d of vr)u+=`/${Qh(f[d])}`;return u}function ep(f){const u=f.value;return u?[new mt(f.key,u,"constants have been deprecated as of v8")]:[]}function aa(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Mo(f){if(Array.isArray(f))return f.map(Mo);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const d in f)u[d]=Mo(f[d]);return u}return aa(f)}function Lo(f){const u=f.key,d=f.value,_=f.valueSpec||{},S=f.objectElementValidators||{},R=f.style,D=f.styleSpec,q=f.validateSpec;let W=[];const ne=qn(d);if(ne!=="object")return[new mt(u,d,`object expected, ${ne} found`)];for(const se in d){const ve=se.split(".")[0],Ne=Xe(_,ve)||_["*"];let ze;if(Xe(S,ve))ze=S[ve];else if(Xe(_,ve))ze=q;else if(S["*"])ze=S["*"];else{if(!_["*"]){W.push(new mt(u,d[se],`unknown property "${se}"`));continue}ze=q}W=W.concat(ze({key:(u&&`${u}.`)+se,value:d[se],valueSpec:Ne,style:R,styleSpec:D,object:d,objectKey:se,validateSpec:q},d))}for(const se in _)S[se]||_[se].required&&_[se].default===void 0&&d[se]===void 0&&W.push(new mt(u,d,`missing required property "${se}"`));return W}function nh(f){const u=f.value,d=f.valueSpec,_=f.style,S=f.styleSpec,R=f.key,D=f.arrayElementValidator||f.validateSpec;if(qn(u)!=="array")return[new mt(R,u,`array expected, ${qn(u)} found`)];if(d.length&&u.length!==d.length)return[new mt(R,u,`array length ${d.length} expected, length ${u.length} found`)];if(d["min-length"]&&u.length<d["min-length"])return[new mt(R,u,`array length at least ${d["min-length"]} expected, length ${u.length} found`)];let q={type:d.value,values:d.values};S.$version<7&&(q.function=d.function),qn(d.value)==="object"&&(q=d.value);let W=[];for(let ne=0;ne<u.length;ne++)W=W.concat(D({array:u,arrayIndex:ne,value:u[ne],valueSpec:q,validateSpec:f.validateSpec,style:_,styleSpec:S,key:`${R}[${ne}]`}));return W}function Ed(f){const u=f.key,d=f.value,_=f.valueSpec;let S=qn(d);return S==="number"&&d!=d&&(S="NaN"),S!=="number"?[new mt(u,d,`number expected, ${S} found`)]:"minimum"in _&&d<_.minimum?[new mt(u,d,`${d} is less than the minimum value ${_.minimum}`)]:"maximum"in _&&d>_.maximum?[new mt(u,d,`${d} is greater than the maximum value ${_.maximum}`)]:[]}function Ju(f){const u=f.valueSpec,d=aa(f.value.type);let _,S,R,D={};const q=d!=="categorical"&&f.value.property===void 0,W=!q,ne=qn(f.value.stops)==="array"&&qn(f.value.stops[0])==="array"&&qn(f.value.stops[0][0])==="object",se=Lo({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(ze){if(d==="identity")return[new mt(ze.key,ze.value,'identity function may not have a "stops" property')];let qe=[];const Ze=ze.value;return qe=qe.concat(nh({key:ze.key,value:Ze,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:ve})),qn(Ze)==="array"&&Ze.length===0&&qe.push(new mt(ze.key,Ze,"array must have at least one stop")),qe},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return d==="identity"&&q&&se.push(new mt(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||se.push(new mt(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!Js(f.valueSpec)&&se.push(new mt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(W&&!Ao(f.valueSpec)?se.push(new mt(f.key,f.value,"property functions not supported")):q&&!ku(f.valueSpec)&&se.push(new mt(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!ne||f.value.property!==void 0||se.push(new mt(f.key,f.value,'"property" property is required')),se;function ve(ze){let qe=[];const Ze=ze.value,lt=ze.key;if(qn(Ze)!=="array")return[new mt(lt,Ze,`array expected, ${qn(Ze)} found`)];if(Ze.length!==2)return[new mt(lt,Ze,`array length 2 expected, length ${Ze.length} found`)];if(ne){if(qn(Ze[0])!=="object")return[new mt(lt,Ze,`object expected, ${qn(Ze[0])} found`)];if(Ze[0].zoom===void 0)return[new mt(lt,Ze,"object stop key must have zoom")];if(Ze[0].value===void 0)return[new mt(lt,Ze,"object stop key must have value")];if(R&&R>aa(Ze[0].zoom))return[new mt(lt,Ze[0].zoom,"stop zoom values must appear in ascending order")];aa(Ze[0].zoom)!==R&&(R=aa(Ze[0].zoom),S=void 0,D={}),qe=qe.concat(Lo({key:`${lt}[0]`,value:Ze[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:Ed,value:Ne}}))}else qe=qe.concat(Ne({key:`${lt}[0]`,value:Ze[0],validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},Ze));return wd(Mo(Ze[1]))?qe.concat([new mt(`${lt}[1]`,Ze[1],"expressions are not allowed in function stops.")]):qe.concat(ze.validateSpec({key:`${lt}[1]`,value:Ze[1],valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Ne(ze,qe){const Ze=qn(ze.value),lt=aa(ze.value),xt=ze.value!==null?ze.value:qe;if(_){if(Ze!==_)return[new mt(ze.key,xt,`${Ze} stop domain type must match previous stop domain type ${_}`)]}else _=Ze;if(Ze!=="number"&&Ze!=="string"&&Ze!=="boolean")return[new mt(ze.key,xt,"stop domain value must be a number, string, or boolean")];if(Ze!=="number"&&d!=="categorical"){let Gt=`number expected, ${Ze} found`;return Ao(u)&&d===void 0&&(Gt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(ze.key,xt,Gt)]}return d!=="categorical"||Ze!=="number"||isFinite(lt)&&Math.floor(lt)===lt?d!=="categorical"&&Ze==="number"&&S!==void 0&&lt<S?[new mt(ze.key,xt,"stop domain values must appear in ascending order")]:(S=lt,d==="categorical"&&lt in D?[new mt(ze.key,xt,"stop domain values must be unique")]:(D[lt]=!0,[])):[new mt(ze.key,xt,`integer expected, found ${lt}`)]}}function ts(f){const u=(f.expressionContext==="property"?ym:Cc)(Mo(f.value),f.valueSpec);if(u.result==="error")return u.value.map((_=>new mt(`${f.key}${_.key}`,f.value,_.message)));const d=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new mt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!es(d))return[new mt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!es(d))return[new mt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!hl(d,["zoom","feature-state"]))return[new mt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!bo(d))return[new mt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ih(f){const u=f.key,d=f.value,_=qn(d);return _!=="string"?[new mt(u,d,`color expected, ${_} found`)]:Sr.parse(String(d))?[]:[new mt(u,d,`color expected, "${d}" found`)]}function Qu(f){const u=f.key,d=f.value,_=f.valueSpec,S=[];return Array.isArray(_.values)?_.values.indexOf(aa(d))===-1&&S.push(new mt(u,d,`expected one of [${_.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(_.values).indexOf(aa(d))===-1&&S.push(new mt(u,d,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(d)} found`)),S}function ah(f){return th(Mo(f.value))?ts(wr({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tp(f)}function tp(f){const u=f.value,d=f.key;if(qn(u)!=="array")return[new mt(d,u,`array expected, ${qn(u)} found`)];const _=f.styleSpec;let S,R=[];if(u.length<1)return[new mt(d,u,"filter array must have at least 1 element")];switch(R=R.concat(Qu({key:`${d}[0]`,value:u[0],valueSpec:_.filter_operator,style:f.style,styleSpec:f.styleSpec})),aa(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&aa(u[1])==="$type"&&R.push(new mt(d,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&R.push(new mt(d,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(S=qn(u[1]),S!=="string"&&R.push(new mt(`${d}[1]`,u[1],`string expected, ${S} found`)));for(let D=2;D<u.length;D++)S=qn(u[D]),aa(u[1])==="$type"?R=R.concat(Qu({key:`${d}[${D}]`,value:u[D],valueSpec:_.geometry_type,style:f.style,styleSpec:f.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&R.push(new mt(`${d}[${D}]`,u[D],`string, number, or boolean expected, ${S} found`));break;case"any":case"all":case"none":for(let D=1;D<u.length;D++)R=R.concat(tp({key:`${d}[${D}]`,value:u[D],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":S=qn(u[1]),u.length!==2?R.push(new mt(d,u,`filter array for "${u[0]}" operator must have 2 elements`)):S!=="string"&&R.push(new mt(`${d}[1]`,u[1],`string expected, ${S} found`))}return R}function rp(f,u){const d=f.key,_=f.validateSpec,S=f.style,R=f.styleSpec,D=f.value,q=f.objectKey,W=R[`${u}_${f.layerType}`];if(!W)return[];const ne=q.match(/^(.*)-transition$/);if(u==="paint"&&ne&&W[ne[1]]&&W[ne[1]].transition)return _({key:d,value:D,valueSpec:R.transition,style:S,styleSpec:R});const se=f.valueSpec||W[q];if(!se)return[new mt(d,D,`unknown property "${q}"`)];let ve;if(qn(D)==="string"&&Ao(se)&&!se.tokens&&(ve=/^{([^}]+)}$/.exec(D)))return[new mt(d,D,`"${q}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ve[1])} }\`.`)];const Ne=[];return f.layerType==="symbol"&&(q==="text-field"&&S&&!S.glyphs&&Ne.push(new mt(d,D,'use of "text-field" requires a style "glyphs" property')),q==="text-font"&&_o(Mo(D))&&aa(D.type)==="identity"&&Ne.push(new mt(d,D,'"text-font" does not support identity functions'))),Ne.concat(_({key:f.key,value:D,valueSpec:se,style:S,styleSpec:R,expressionContext:"property",propertyType:u,propertyKey:q}))}function np(f){return rp(f,"paint")}function bm(f){return rp(f,"layout")}function hf(f){let u=[];const d=f.value,_=f.key,S=f.style,R=f.styleSpec;if(qn(d)!=="object")return[new mt(_,d,`object expected, ${qn(d)} found`)];d.type||d.ref||u.push(new mt(_,d,'either "type" or "ref" is required'));let D=aa(d.type);const q=aa(d.ref);if(d.id){const W=aa(d.id);for(let ne=0;ne<f.arrayIndex;ne++){const se=S.layers[ne];aa(se.id)===W&&u.push(new mt(_,d.id,`duplicate layer id "${d.id}", previously used at line ${se.id.__line__}`))}}if("ref"in d){let W;["type","source","source-layer","filter","layout"].forEach((ne=>{ne in d&&u.push(new mt(_,d[ne],`"${ne}" is prohibited for ref layers`))})),S.layers.forEach((ne=>{aa(ne.id)===q&&(W=ne)})),W?W.ref?u.push(new mt(_,d.ref,"ref cannot reference another ref layer")):D=aa(W.type):u.push(new mt(_,d.ref,`ref layer "${q}" not found`))}else if(D!=="background")if(d.source){const W=S.sources&&S.sources[d.source],ne=W&&aa(W.type);W?ne==="vector"&&D==="raster"?u.push(new mt(_,d.source,`layer "${d.id}" requires a raster source`)):ne!=="raster-dem"&&D==="hillshade"||ne!=="raster-dem"&&D==="color-relief"?u.push(new mt(_,d.source,`layer "${d.id}" requires a raster-dem source`)):ne==="raster"&&D!=="raster"?u.push(new mt(_,d.source,`layer "${d.id}" requires a vector source`)):ne!=="vector"||d["source-layer"]?ne==="raster-dem"&&D!=="hillshade"&&D!=="color-relief"?u.push(new mt(_,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):D!=="line"||!d.paint||!d.paint["line-gradient"]||ne==="geojson"&&W.lineMetrics||u.push(new mt(_,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new mt(_,d,`layer "${d.id}" must specify a "source-layer"`)):u.push(new mt(_,d.source,`source "${d.source}" not found`))}else u.push(new mt(_,d,'missing required property "source"'));return u=u.concat(Lo({key:_,value:d,valueSpec:R.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${_}.type`,value:d.type,valueSpec:R.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:ah,layout:W=>Lo({layer:d,key:W.key,value:W.value,style:W.style,styleSpec:W.styleSpec,validateSpec:W.validateSpec,objectElementValidators:{"*":ne=>bm(wr({layerType:D},ne))}}),paint:W=>Lo({layer:d,key:W.key,value:W.value,style:W.style,styleSpec:W.styleSpec,validateSpec:W.validateSpec,objectElementValidators:{"*":ne=>np(wr({layerType:D},ne))}})}})),u}function ml(f){const u=f.value,d=f.key,_=qn(u);return _!=="string"?[new mt(d,u,`string expected, ${_} found`)]:[]}const Mu={promoteId:function({key:f,value:u}){if(qn(u)==="string")return ml({key:f,value:u});{const d=[];for(const _ in u)d.push(...ml({key:`${f}.${_}`,value:u[_]}));return d}}};function Fs(f){const u=f.value,d=f.key,_=f.styleSpec,S=f.style,R=f.validateSpec;if(!u.type)return[new mt(d,u,'"type" is required')];const D=aa(u.type);let q;switch(D){case"vector":case"raster":return q=Lo({key:d,value:u,valueSpec:_[`source_${D.replace("-","_")}`],style:f.style,styleSpec:_,objectElementValidators:Mu,validateSpec:R}),q;case"raster-dem":return q=(function(W){var ne;const se=(ne=W.sourceName)!==null&&ne!==void 0?ne:"",ve=W.value,Ne=W.styleSpec,ze=Ne.source_raster_dem,qe=W.style;let Ze=[];const lt=qn(ve);if(ve===void 0)return Ze;if(lt!=="object")return Ze.push(new mt("source_raster_dem",ve,`object expected, ${lt} found`)),Ze;const xt=aa(ve.encoding)==="custom",Gt=["redFactor","greenFactor","blueFactor","baseShift"],At=W.value.encoding?`"${W.value.encoding}"`:"Default";for(const Nt in ve)!xt&&Gt.includes(Nt)?Ze.push(new mt(Nt,ve[Nt],`In "${se}": "${Nt}" is only valid when "encoding" is set to "custom". ${At} encoding found`)):ze[Nt]?Ze=Ze.concat(W.validateSpec({key:Nt,value:ve[Nt],valueSpec:ze[Nt],validateSpec:W.validateSpec,style:qe,styleSpec:Ne})):Ze.push(new mt(Nt,ve[Nt],`unknown property "${Nt}"`));return Ze})({sourceName:d,value:u,style:f.style,styleSpec:_,validateSpec:R}),q;case"geojson":if(q=Lo({key:d,value:u,valueSpec:_.source_geojson,style:S,styleSpec:_,validateSpec:R,objectElementValidators:Mu}),u.cluster)for(const W in u.clusterProperties){const[ne,se]=u.clusterProperties[W],ve=typeof ne=="string"?[ne,["accumulated"],["get",W]]:ne;q.push(...ts({key:`${d}.${W}.map`,value:se,expressionContext:"cluster-map"})),q.push(...ts({key:`${d}.${W}.reduce`,value:ve,expressionContext:"cluster-reduce"}))}return q;case"video":return Lo({key:d,value:u,valueSpec:_.source_video,style:S,validateSpec:R,styleSpec:_});case"image":return Lo({key:d,value:u,valueSpec:_.source_image,style:S,validateSpec:R,styleSpec:_});case"canvas":return[new mt(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qu({key:`${d}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Td(f){const u=f.value,d=f.styleSpec,_=d.light,S=f.style;let R=[];const D=qn(u);if(u===void 0)return R;if(D!=="object")return R=R.concat([new mt("light",u,`object expected, ${D} found`)]),R;for(const q in u){const W=q.match(/^(.*)-transition$/);R=R.concat(W&&_[W[1]]&&_[W[1]].transition?f.validateSpec({key:q,value:u[q],valueSpec:d.transition,validateSpec:f.validateSpec,style:S,styleSpec:d}):_[q]?f.validateSpec({key:q,value:u[q],valueSpec:_[q],validateSpec:f.validateSpec,style:S,styleSpec:d}):[new mt(q,u[q],`unknown property "${q}"`)])}return R}function oh(f){const u=f.value,d=f.styleSpec,_=d.sky,S=f.style,R=qn(u);if(u===void 0)return[];if(R!=="object")return[new mt("sky",u,`object expected, ${R} found`)];let D=[];for(const q in u)D=D.concat(_[q]?f.validateSpec({key:q,value:u[q],valueSpec:_[q],style:S,styleSpec:d}):[new mt(q,u[q],`unknown property "${q}"`)]);return D}function _m(f){const u=f.value,d=f.styleSpec,_=d.terrain,S=f.style;let R=[];const D=qn(u);if(u===void 0)return R;if(D!=="object")return R=R.concat([new mt("terrain",u,`object expected, ${D} found`)]),R;for(const q in u)R=R.concat(_[q]?f.validateSpec({key:q,value:u[q],valueSpec:_[q],validateSpec:f.validateSpec,style:S,styleSpec:d}):[new mt(q,u[q],`unknown property "${q}"`)]);return R}function xm(f){let u=[];const d=f.value,_=f.key;if(Array.isArray(d)){const S=[],R=[];for(const D in d)d[D].id&&S.includes(d[D].id)&&u.push(new mt(_,d,`all the sprites' ids must be unique, but ${d[D].id} is duplicated`)),S.push(d[D].id),d[D].url&&R.includes(d[D].url)&&u.push(new mt(_,d,`all the sprites' URLs must be unique, but ${d[D].url} is duplicated`)),R.push(d[D].url),u=u.concat(Lo({key:`${_}[${D}]`,value:d[D],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return ml({key:_,value:d})}function Pd(f){return u=f.value,u&&u.constructor===Object?[]:[new mt(f.key,f.value,`object expected, ${qn(f.value)} found`)];var u}const ip={"*":()=>[],array:nh,boolean:function(f){const u=f.value,d=f.key,_=qn(u);return _!=="boolean"?[new mt(d,u,`boolean expected, ${_} found`)]:[]},number:Ed,color:ih,constants:ep,enum:Qu,filter:ah,function:Ju,layer:hf,object:Lo,source:Fs,light:Td,sky:oh,terrain:_m,projection:function(f){const u=f.value,d=f.styleSpec,_=d.projection,S=f.style,R=qn(u);if(u===void 0)return[];if(R!=="object")return[new mt("projection",u,`object expected, ${R} found`)];let D=[];for(const q in u)D=D.concat(_[q]?f.validateSpec({key:q,value:u[q],valueSpec:_[q],style:S,styleSpec:d}):[new mt(q,u[q],`unknown property "${q}"`)]);return D},projectionDefinition:function(f){const u=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const _=qn(d);return _!=="array"||(function(S){return Array.isArray(S)&&S.length===3&&typeof S[0]=="string"&&typeof S[1]=="string"&&typeof S[2]=="number"})(d)||(function(S){return!!["interpolate","step","literal"].includes(S[0])})(d)?["array","string"].includes(_)?[]:[new mt(u,d,`projection expected, invalid type "${_}" found`)]:[new mt(u,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:ml,formatted:function(f){return ml(f).length===0?[]:ts(f)},resolvedImage:function(f){return ml(f).length===0?[]:ts(f)},padding:function(f){const u=f.key,d=f.value;if(qn(d)==="array"){if(d.length<1||d.length>4)return[new mt(u,d,`padding requires 1 to 4 values; ${d.length} values found`)];const _={type:"number"};let S=[];for(let R=0;R<d.length;R++)S=S.concat(f.validateSpec({key:`${u}[${R}]`,value:d[R],validateSpec:f.validateSpec,valueSpec:_}));return S}return Ed({key:u,value:d,valueSpec:{}})},numberArray:function(f){const u=f.key,d=f.value;if(qn(d)==="array"){const _={type:"number"};if(d.length<1)return[new mt(u,d,"array length at least 1 expected, length 0 found")];let S=[];for(let R=0;R<d.length;R++)S=S.concat(f.validateSpec({key:`${u}[${R}]`,value:d[R],validateSpec:f.validateSpec,valueSpec:_}));return S}return Ed({key:u,value:d,valueSpec:{}})},colorArray:function(f){const u=f.key,d=f.value;if(qn(d)==="array"){if(d.length<1)return[new mt(u,d,"array length at least 1 expected, length 0 found")];let _=[];for(let S=0;S<d.length;S++)_=_.concat(ih({key:`${u}[${S}]`,value:d[S]}));return _}return ih({key:u,value:d})},variableAnchorOffsetCollection:function(f){const u=f.key,d=f.value,_=qn(d),S=f.styleSpec;if(_!=="array"||d.length<1||d.length%2!=0)return[new mt(u,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let R=[];for(let D=0;D<d.length;D+=2)R=R.concat(Qu({key:`${u}[${D}]`,value:d[D],valueSpec:S.layout_symbol["text-anchor"]})),R=R.concat(nh({key:`${u}[${D+1}]`,value:d[D+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:S}));return R},sprite:xm,state:Pd};function Id(f){const u=f.value,d=f.valueSpec,_=f.styleSpec;return f.validateSpec=Id,d.expression&&_o(aa(u))?Ju(f):d.expression&&wd(Mo(u))?ts(f):d.type&&ip[d.type]?ip[d.type](f):Lo(wr({},f,{valueSpec:d.type?_[d.type]:d}))}function wm(f){const u=f.value,d=f.key,_=ml(f);return _.length||(u.indexOf("{fontstack}")===-1&&_.push(new mt(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&_.push(new mt(d,u,'"glyphs" url must include a "{range}" token'))),_}function Qs(f,u=bt){let d=[];return d=d.concat(Id({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:Id,objectElementValidators:{glyphs:wm,"*":()=>[]}})),f.constants&&(d=d.concat(ep({key:"constants",value:f.constants}))),kd(d)}function gl(f){return function(u){return f({...u,validateSpec:Id})}}function kd(f){return[].concat(f).sort(((u,d)=>u.line-d.line))}function gu(f){return function(...u){return kd(f.apply(this,u))}}Qs.source=gu(gl(Fs)),Qs.sprite=gu(gl(xm)),Qs.glyphs=gu(gl(wm)),Qs.light=gu(gl(Td)),Qs.sky=gu(gl(oh)),Qs.terrain=gu(gl(_m)),Qs.state=gu(gl(Pd)),Qs.layer=gu(gl(hf)),Qs.filter=gu(gl(ah)),Qs.paintProperty=gu(gl(np)),Qs.layoutProperty=gu(gl(bm));const Xc=Qs,V=Xc.light,K=Xc.sky,he=Xc.paintProperty,ke=Xc.layoutProperty;function Ge(f,u){let d=!1;if(u&&u.length)for(const _ of u)f.fire(new Zt(new Error(_.message))),d=!0;return d}class Je{constructor(u,d,_){const S=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const D=new Int32Array(this.arrayBuffer);u=D[0],this.d=(d=D[1])+2*(_=D[2]);for(let W=0;W<this.d*this.d;W++){const ne=D[3+W],se=D[3+W+1];S.push(ne===se?null:D.subarray(ne,se))}const q=D[3+S.length+1];this.keys=D.subarray(D[3+S.length],q),this.bboxes=D.subarray(q),this.insert=this._insertReadonly}else{this.d=d+2*_;for(let D=0;D<this.d*this.d;D++)S.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=_,this.scale=d/u,this.uid=0;const R=_/d*u;this.min=-R,this.max=u+R}insert(u,d,_,S,R){this._forEachCell(d,_,S,R,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(S),this.bboxes.push(R)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,d,_,S,R,D){this.cells[R].push(D)}query(u,d,_,S,R){const D=this.min,q=this.max;if(u<=D&&d<=D&&q<=_&&q<=S&&!R)return Array.prototype.slice.call(this.keys);{const W=[];return this._forEachCell(u,d,_,S,this._queryCell,W,{},R),W}}_queryCell(u,d,_,S,R,D,q,W){const ne=this.cells[R];if(ne!==null){const se=this.keys,ve=this.bboxes;for(let Ne=0;Ne<ne.length;Ne++){const ze=ne[Ne];if(q[ze]===void 0){const qe=4*ze;(W?W(ve[qe+0],ve[qe+1],ve[qe+2],ve[qe+3]):u<=ve[qe+2]&&d<=ve[qe+3]&&_>=ve[qe+0]&&S>=ve[qe+1])?(q[ze]=!0,D.push(se[ze])):q[ze]=!1}}}}_forEachCell(u,d,_,S,R,D,q,W){const ne=this._convertToCellCoord(u),se=this._convertToCellCoord(d),ve=this._convertToCellCoord(_),Ne=this._convertToCellCoord(S);for(let ze=ne;ze<=ve;ze++)for(let qe=se;qe<=Ne;qe++){const Ze=this.d*qe+ze;if((!W||W(this._convertFromCellCoord(ze),this._convertFromCellCoord(qe),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(qe+1)))&&R.call(this,u,d,_,S,Ze,D,q,W))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,d=3+this.cells.length+1+1;let _=0;for(let D=0;D<this.cells.length;D++)_+=this.cells[D].length;const S=new Int32Array(d+_+this.keys.length+this.bboxes.length);S[0]=this.extent,S[1]=this.n,S[2]=this.padding;let R=d;for(let D=0;D<u.length;D++){const q=u[D];S[3+D]=R,S.set(q,R),R+=q.length}return S[3+u.length]=R,S.set(this.keys,R),R+=this.keys.length,S[3+u.length+1]=R,S.set(this.bboxes,R),R+=this.bboxes.length,S.buffer}static serialize(u,d){const _=u.toArrayBuffer();return d&&d.push(_),{buffer:_}}static deserialize(u){return new Je(u.buffer)}}const tt={};function He(f,u,d={}){if(tt[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),tt[f]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}He("Object",Object),He("Set",Set),He("TransferableGridIndex",Je),He("Color",Sr),He("Error",Error),He("AJAXError",Qe),He("ResolvedImage",_a),He("StylePropertyFunction",Sd),He("StyleExpression",uf,{omit:["_evaluator"]}),He("ZoomDependentExpression",Yh),He("ZoomConstantExpression",Hc),He("CompoundExpression",bn,{omit:["_evaluate"]});for(const f in Ln)Ln[f]._classRegistryKey||He(`Expression_${f}`,Ln[f]);function ht(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function St(f){return f.$name||f.constructor._classRegistryKey}function qt(f){return!(function(u){if(u===null||typeof u!="object")return!1;const d=St(u);return!(!d||d==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||ht(f)||zt(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function hr(f,u){if(qt(f))return(ht(f)||zt(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const R=[];for(const D of f)R.push(hr(D,u));return R}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=St(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!tt[d])throw new Error(`${d} is not registered.`);const{klass:_}=tt[d],S=_.serialize?_.serialize(f,u):{};if(_.serialize){if(u&&S===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const R in f){if(!f.hasOwnProperty(R)||tt[d].omit.indexOf(R)>=0)continue;const D=f[R];S[R]=tt[d].shallow.indexOf(R)>=0?D:hr(D,u)}f instanceof Error&&(S.message=f.message)}if(S.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(S.$name=d),S}function wt(f){if(qt(f))return f;if(Array.isArray(f))return f.map(wt);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=St(f)||"Object";if(!tt[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:d}=tt[u];if(!d)throw new Error(`can't deserialize unregistered class ${u}`);if(d.deserialize)return d.deserialize(f);const _=Object.create(d.prototype);for(const S of Object.keys(f)){if(S==="$name")continue;const R=f[S];_[S]=tt[u].shallow.indexOf(S)>=0?R:wt(R)}return _}class Qt{constructor(){this.first=!0}update(u,d){const _=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=_,!0))}}const jt={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Tr(f){for(const u of f)if($n(u.charCodeAt(0)))return!0;return!1}function mr(f){for(const u of f)if(!Yr(u.charCodeAt(0)))return!1;return!0}function Ir(f){const u=f.map((d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}})).filter((d=>d));return new RegExp(u.join("|"),"u")}const Rr=Ir(["Arab","Dupl","Mong","Ougr","Syrc"]);function Yr(f){return!Rr.test(String.fromCodePoint(f))}const Vr=Ir(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function $n(f){return!(f!==746&&f!==747&&(f<4352||!(jt["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||jt["CJK Compatibility"](f)||jt["CJK Strokes"](f)||!(!jt["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||jt["Enclosed CJK Letters and Months"](f)||jt["Ideographic Description Characters"](f)||jt.Kanbun(f)||jt.Katakana(f)&&f!==12540||!(!jt["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!jt["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||jt["Vertical Forms"](f)||jt["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||Vr.test(String.fromCodePoint(f)))))}function kn(f){return!($n(f)||(function(u){return!!(jt["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||jt["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||jt["Letterlike Symbols"](u)||jt["Number Forms"](u)||jt["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||jt["Control Pictures"](u)&&u!==9251||jt["Optical Character Recognition"](u)||jt["Enclosed Alphanumerics"](u)||jt["Geometric Shapes"](u)||jt["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||jt["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||jt["CJK Symbols and Punctuation"](u)||jt.Katakana(u)||jt["Private Use Area"](u)||jt["CJK Compatibility Forms"](u)||jt["Small Form Variants"](u)||jt["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(f))}const Si=Ir(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Fn(f){return Si.test(String.fromCodePoint(f))}function $i(f,u){return!(!u&&Fn(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||jt.Khmer(f))}function Ro(f){for(const u of f)if(Fn(u.charCodeAt(0)))return!0;return!1}const ui=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(ui.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,_=new Promise((R=>{this.loadScriptResolve=R}));u(d);const S=new Promise((R=>setTimeout((()=>R()),this.TIMEOUT)));if(yield Promise.race([_,S]),this.isParsed()){const R={pluginStatus:"loaded",pluginURL:d};return this.setState(R),R}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)}))}};class sn{constructor(u,d){this.zoom=u,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new Qt,this.transition=d.transition||{},this.globalState=d.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Qt,this.transition={},this.globalState={})}isSupportedScript(u){return(function(d,_){for(const S of d)if(!$i(S.charCodeAt(0),_))return!1;return!0})(u,ui.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,d=u-Math.floor(u),_=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*d}}}class dn{constructor(u,d){this.property=u,this.value=d,this.expression=(function(_,S){if(_o(_))return new Sd(_,S);if(wd(_)){const R=ym(_,S);if(R.result==="error")throw new Error(R.value.map((D=>`${D.key}: ${D.message}`)).join(", "));return R.value}{let R=_;return S.type==="color"&&typeof _=="string"?R=Sr.parse(_):S.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?S.type!=="numberArray"||typeof _!="number"&&!Array.isArray(_)?S.type!=="colorArray"||typeof _!="string"&&!Array.isArray(_)?S.type==="variableAnchorOffsetCollection"&&Array.isArray(_)?R=gi.parse(_):S.type==="projectionDefinition"&&typeof _=="string"&&(R=si.parse(_)):R=tn.parse(_):R=Cr.parse(_):R=an.parse(_),{globalStateRefs:new Set,kind:"constant",evaluate:()=>R}}})(d===void 0?u.specification.default:d,u.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,d,_){return this.property.possiblyEvaluate(this,u,d,_)}setGlobalState(u){this.expression.evaluate=(d,_,S,R,D,q)=>(d.globalState=u,this._evaluate.call(this.expression,d,_,S,R,D,q))}}class io{constructor(u){this.property=u,this.value=new dn(u,void 0)}transitioned(u,d){return new Vi(this.property,this.value,d,Oe({},u.transition,this.transition),u.now)}untransitioned(){return new Vi(this.property,this.value,null,{},0)}}class bi{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Ie(this._values[u].value.value)}setValue(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new io(this._values[u].property)),this._values[u].value=new dn(this._values[u].property,d===null?void 0:Ie(d))}getTransition(u){return Ie(this._values[u].transition)}setTransition(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new io(this._values[u].property)),this._values[u].transition=Ie(d)||void 0}serialize(){const u={};for(const d of Object.keys(this._values)){const _=this.getValue(d);_!==void 0&&(u[d]=_);const S=this.getTransition(d);S!==void 0&&(u[`${d}-transition`]=S)}return u}transitioned(u,d){const _=new Pa(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].transitioned(u,d._values[S]);return _}untransitioned(){const u=new Pa(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].untransitioned();return u}}class Vi{constructor(u,d,_,S,R){this.property=u,this.value=d,this.begin=R+S.delay||0,this.end=this.begin+S.duration||0,u.specification.transition&&(S.delay||S.duration)&&(this.prior=_)}possiblyEvaluate(u,d,_){const S=u.now||0,R=this.value.possiblyEvaluate(u,d,_),D=this.prior;if(D){if(S>this.end)return this.prior=null,R;if(this.value.isDataDriven())return this.prior=null,R;if(S<this.begin)return D.possiblyEvaluate(u,d,_);{const q=(S-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(u,d,_),R,Se(q))}}return R}}class Pa{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,d,_){const S=new za(this._properties);for(const R of Object.keys(this._values))S._values[R]=this._values[R].possiblyEvaluate(u,d,_);return S}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class rs{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues),this._globalState={}}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Ie(this._values[u].value)}setValue(u,d){this._values[u]=new dn(this._values[u].property,d===null?void 0:Ie(d)),this._values[u].setGlobalState(this._globalState)}serialize(){const u={};for(const d of Object.keys(this._values)){const _=this.getValue(d);_!==void 0&&(u[d]=_)}return u}possiblyEvaluate(u,d,_){const S=new za(this._properties);for(const R of Object.keys(this._values))S._values[R]=this._values[R].possiblyEvaluate(u,d,_);return S}setGlobalState(u){this._globalState=u;for(const d of Object.values(this._values))d.setGlobalState(u)}}class Za{constructor(u,d,_){this.property=u,this.value=d,this.parameters=_}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,d,_,S){return this.property.evaluate(this.value,this.parameters,u,d,_,S)}}class za{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class hn{constructor(u){this.specification=u}possiblyEvaluate(u,d){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(d)}interpolate(u,d,_){const S=ei[this.specification.type];return S?S(u,d,_):u}}class Sn{constructor(u,d){this.specification=u,this.overrides=d}possiblyEvaluate(u,d,_,S){return new Za(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},_,S)}:u.expression,d)}interpolate(u,d,_){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new Za(this,{kind:"constant",value:void 0},u.parameters);const S=ei[this.specification.type];if(S){const R=S(u.value.value,d.value.value,_);return new Za(this,{kind:"constant",value:R},u.parameters)}return u}evaluate(u,d,_,S,R,D){return u.kind==="constant"?u.value:u.evaluate(d,_,S,R,D)}}class uo extends Sn{possiblyEvaluate(u,d,_,S){if(u.value===void 0)return new Za(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){const R=u.expression.evaluate(d,null,{},_,S),D=u.property.specification.type==="resolvedImage"&&typeof R!="string"?R.name:R,q=this._calculate(D,D,D,d);return new Za(this,{kind:"constant",value:q},d)}if(u.expression.kind==="camera"){const R=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new Za(this,{kind:"constant",value:R},d)}return new Za(this,u.expression,d)}evaluate(u,d,_,S,R,D){if(u.kind==="source"){const q=u.evaluate(d,_,S,R,D);return this._calculate(q,q,q,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},_,S),u.evaluate({zoom:Math.floor(d.zoom)},_,S),u.evaluate({zoom:Math.floor(d.zoom)+1},_,S),d):u.value}_calculate(u,d,_,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:_,to:d}}interpolate(u){return u}}class ki{constructor(u){this.specification=u}possiblyEvaluate(u,d,_,S){if(u.value!==void 0){if(u.expression.kind==="constant"){const R=u.expression.evaluate(d,null,{},_,S);return this._calculate(R,R,R,d)}return this._calculate(u.expression.evaluate(new sn(Math.floor(d.zoom-1),d)),u.expression.evaluate(new sn(Math.floor(d.zoom),d)),u.expression.evaluate(new sn(Math.floor(d.zoom+1),d)),d)}}_calculate(u,d,_,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:_,to:d}}interpolate(u){return u}}class Zi{constructor(u){this.specification=u}possiblyEvaluate(u,d,_,S){return!!u.expression.evaluate(d,null,{},_,S)}interpolate(){return!1}}class Ui{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in u){const _=u[d];_.specification.overridable&&this.overridableProperties.push(d);const S=this.defaultPropertyValues[d]=new dn(_,void 0),R=this.defaultTransitionablePropertyValues[d]=new io(_);this.defaultTransitioningPropertyValues[d]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=S.possiblyEvaluate({})}}}He("DataDrivenProperty",Sn),He("DataConstantProperty",hn),He("CrossFadedDataDrivenProperty",uo),He("CrossFadedProperty",ki),He("ColorRampProperty",Zi);const oa="-transition";class xa extends Er{constructor(u,d){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,this._globalState={},u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=Wc(u.filter)),d.layout&&(this._unevaluatedLayout=new rs(d.layout)),d.paint)){this._transitionablePaint=new bi(d.paint);for(const _ in u.paint)this.setPaintProperty(_,u.paint[_],{validate:!1});for(const _ in u.layout)this.setLayoutProperty(_,u.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new za(d.paint)}}setFilter(u){this.filter=u,this._featureFilter=Wc(u)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const _=this._unevaluatedLayout._values[d];for(const S of _.getGlobalStateRefs())u.add(S)}for(const d of this._featureFilter.getGlobalStateRefs())u.add(d);return u}getPaintAffectingGlobalStateRefs(){var u;const d=new globalThis.Map;if(this._transitionablePaint)for(const _ in this._transitionablePaint._values){const S=this._transitionablePaint._values[_].value;for(const R of S.getGlobalStateRefs()){const D=(u=d.get(R))!==null&&u!==void 0?u:[];D.push({name:_,value:S.value}),d.set(R,D)}}return d}setLayoutProperty(u,d,_={}){d!=null&&this._validate(ke,`layers.${this.id}.layout.${u}`,u,d,_)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)}getPaintProperty(u){return u.endsWith(oa)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,d,_={}){if(d!=null&&this._validate(he,`layers.${this.id}.paint.${u}`,u,d,_))return!1;if(u.endsWith(oa))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;{const S=this._transitionablePaint._values[u],R=S.property.specification["property-type"]==="cross-faded-data-driven",D=S.value.isDataDriven(),q=S.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);const W=this._transitionablePaint._values[u].value;return W.isDataDriven()||D||R||this._handleOverridablePaintPropertyUpdate(u,q,W)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,d,_){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,d){u.globalState=this._globalState,u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)}setGlobalState(u){this._globalState=u,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(u)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),rt(u,((d,_)=>!(d===void 0||_==="layout"&&!Object.keys(d).length||_==="paint"&&!Object.keys(d).length)))}_validate(u,d,_,S,R={}){return(!R||R.validate!==!1)&&Ge(this,u.call(Xc,{key:d,layerType:this.type,objectKey:_,value:S,styleSpec:bt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const d=this.paint.get(u);if(d instanceof Za&&Ao(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const yu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ja{constructor(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ci{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function hi(f,u=1){let d=0,_=0;return{members:f.map((S=>{const R=yu[S.type].BYTES_PER_ELEMENT,D=d=co(d,Math.max(u,R)),q=S.components||1;return _=Math.max(_,R),d+=R*q,{name:S.name,type:S.type,components:q,offset:D}})),size:co(d,Math.max(_,u)),alignment:u}}function co(f,u){return Math.ceil(f/u)*u}class ns extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d){const _=this.length;return this.resize(_+1),this.emplace(_,u,d)}emplace(u,d,_){const S=2*u;return this.int16[S+0]=d,this.int16[S+1]=_,u}}ns.prototype.bytesPerElement=4,He("StructArrayLayout2i4",ns);class Do extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,_){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,_)}emplace(u,d,_,S){const R=3*u;return this.int16[R+0]=d,this.int16[R+1]=_,this.int16[R+2]=S,u}}Do.prototype.bytesPerElement=6,He("StructArrayLayout3i6",Do);class el extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,_,S){const R=this.length;return this.resize(R+1),this.emplace(R,u,d,_,S)}emplace(u,d,_,S,R){const D=4*u;return this.int16[D+0]=d,this.int16[D+1]=_,this.int16[D+2]=S,this.int16[D+3]=R,u}}el.prototype.bytesPerElement=8,He("StructArrayLayout4i8",el);class is extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D){const q=this.length;return this.resize(q+1),this.emplace(q,u,d,_,S,R,D)}emplace(u,d,_,S,R,D,q){const W=6*u;return this.int16[W+0]=d,this.int16[W+1]=_,this.int16[W+2]=S,this.int16[W+3]=R,this.int16[W+4]=D,this.int16[W+5]=q,u}}is.prototype.bytesPerElement=12,He("StructArrayLayout2i4i12",is);class No extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D){const q=this.length;return this.resize(q+1),this.emplace(q,u,d,_,S,R,D)}emplace(u,d,_,S,R,D,q){const W=4*u,ne=8*u;return this.int16[W+0]=d,this.int16[W+1]=_,this.uint8[ne+4]=S,this.uint8[ne+5]=R,this.uint8[ne+6]=D,this.uint8[ne+7]=q,u}}No.prototype.bytesPerElement=8,He("StructArrayLayout2i4ub8",No);class bs extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d){const _=this.length;return this.resize(_+1),this.emplace(_,u,d)}emplace(u,d,_){const S=2*u;return this.float32[S+0]=d,this.float32[S+1]=_,u}}bs.prototype.bytesPerElement=8,He("StructArrayLayout2f8",bs);class pa extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D,q,W,ne,se){const ve=this.length;return this.resize(ve+1),this.emplace(ve,u,d,_,S,R,D,q,W,ne,se)}emplace(u,d,_,S,R,D,q,W,ne,se,ve){const Ne=10*u;return this.uint16[Ne+0]=d,this.uint16[Ne+1]=_,this.uint16[Ne+2]=S,this.uint16[Ne+3]=R,this.uint16[Ne+4]=D,this.uint16[Ne+5]=q,this.uint16[Ne+6]=W,this.uint16[Ne+7]=ne,this.uint16[Ne+8]=se,this.uint16[Ne+9]=ve,u}}pa.prototype.bytesPerElement=20,He("StructArrayLayout10ui20",pa);class Go extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D,q,W,ne,se,ve,Ne){const ze=this.length;return this.resize(ze+1),this.emplace(ze,u,d,_,S,R,D,q,W,ne,se,ve,Ne)}emplace(u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze){const qe=12*u;return this.int16[qe+0]=d,this.int16[qe+1]=_,this.int16[qe+2]=S,this.int16[qe+3]=R,this.uint16[qe+4]=D,this.uint16[qe+5]=q,this.uint16[qe+6]=W,this.uint16[qe+7]=ne,this.int16[qe+8]=se,this.int16[qe+9]=ve,this.int16[qe+10]=Ne,this.int16[qe+11]=ze,u}}Go.prototype.bytesPerElement=24,He("StructArrayLayout4i4ui4i24",Go);class Ml extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,_){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,_)}emplace(u,d,_,S){const R=3*u;return this.float32[R+0]=d,this.float32[R+1]=_,this.float32[R+2]=S,u}}Ml.prototype.bytesPerElement=12,He("StructArrayLayout3f12",Ml);class ec extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint32[1*u+0]=d,u}}ec.prototype.bytesPerElement=4,He("StructArrayLayout1ul4",ec);class Jl extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D,q,W,ne){const se=this.length;return this.resize(se+1),this.emplace(se,u,d,_,S,R,D,q,W,ne)}emplace(u,d,_,S,R,D,q,W,ne,se){const ve=10*u,Ne=5*u;return this.int16[ve+0]=d,this.int16[ve+1]=_,this.int16[ve+2]=S,this.int16[ve+3]=R,this.int16[ve+4]=D,this.int16[ve+5]=q,this.uint32[Ne+3]=W,this.uint16[ve+8]=ne,this.uint16[ve+9]=se,u}}Jl.prototype.bytesPerElement=20,He("StructArrayLayout6i1ul2ui20",Jl);class Ho extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D){const q=this.length;return this.resize(q+1),this.emplace(q,u,d,_,S,R,D)}emplace(u,d,_,S,R,D,q){const W=6*u;return this.int16[W+0]=d,this.int16[W+1]=_,this.int16[W+2]=S,this.int16[W+3]=R,this.int16[W+4]=D,this.int16[W+5]=q,u}}Ho.prototype.bytesPerElement=12,He("StructArrayLayout2i2i2i12",Ho);class A extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R){const D=this.length;return this.resize(D+1),this.emplace(D,u,d,_,S,R)}emplace(u,d,_,S,R,D){const q=4*u,W=8*u;return this.float32[q+0]=d,this.float32[q+1]=_,this.float32[q+2]=S,this.int16[W+6]=R,this.int16[W+7]=D,u}}A.prototype.bytesPerElement=16,He("StructArrayLayout2f1f2i16",A);class s extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D){const q=this.length;return this.resize(q+1),this.emplace(q,u,d,_,S,R,D)}emplace(u,d,_,S,R,D,q){const W=16*u,ne=4*u,se=8*u;return this.uint8[W+0]=d,this.uint8[W+1]=_,this.float32[ne+1]=S,this.float32[ne+2]=R,this.int16[se+6]=D,this.int16[se+7]=q,u}}s.prototype.bytesPerElement=16,He("StructArrayLayout2ub2f2i16",s);class h extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,_){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,_)}emplace(u,d,_,S){const R=3*u;return this.uint16[R+0]=d,this.uint16[R+1]=_,this.uint16[R+2]=S,u}}h.prototype.bytesPerElement=6,He("StructArrayLayout3ui6",h);class w extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt)}emplace(u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt,Gt){const At=24*u,Nt=12*u,dr=48*u;return this.int16[At+0]=d,this.int16[At+1]=_,this.uint16[At+2]=S,this.uint16[At+3]=R,this.uint32[Nt+2]=D,this.uint32[Nt+3]=q,this.uint32[Nt+4]=W,this.uint16[At+10]=ne,this.uint16[At+11]=se,this.uint16[At+12]=ve,this.float32[Nt+7]=Ne,this.float32[Nt+8]=ze,this.uint8[dr+36]=qe,this.uint8[dr+37]=Ze,this.uint8[dr+38]=lt,this.uint32[Nt+10]=xt,this.int16[At+22]=Gt,u}}w.prototype.bytesPerElement=48,He("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",w);class C extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt,Gt,At,Nt,dr,br,zr,ln,Kr,rn,Bn,Qr){const nn=this.length;return this.resize(nn+1),this.emplace(nn,u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt,Gt,At,Nt,dr,br,zr,ln,Kr,rn,Bn,Qr)}emplace(u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt,Gt,At,Nt,dr,br,zr,ln,Kr,rn,Bn,Qr,nn){const kr=32*u,ai=16*u;return this.int16[kr+0]=d,this.int16[kr+1]=_,this.int16[kr+2]=S,this.int16[kr+3]=R,this.int16[kr+4]=D,this.int16[kr+5]=q,this.int16[kr+6]=W,this.int16[kr+7]=ne,this.uint16[kr+8]=se,this.uint16[kr+9]=ve,this.uint16[kr+10]=Ne,this.uint16[kr+11]=ze,this.uint16[kr+12]=qe,this.uint16[kr+13]=Ze,this.uint16[kr+14]=lt,this.uint16[kr+15]=xt,this.uint16[kr+16]=Gt,this.uint16[kr+17]=At,this.uint16[kr+18]=Nt,this.uint16[kr+19]=dr,this.uint16[kr+20]=br,this.uint16[kr+21]=zr,this.uint16[kr+22]=ln,this.uint32[ai+12]=Kr,this.float32[ai+13]=rn,this.float32[ai+14]=Bn,this.uint16[kr+30]=Qr,this.uint16[kr+31]=nn,u}}C.prototype.bytesPerElement=64,He("StructArrayLayout8i15ui1ul2f2ui64",C);class L extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.float32[1*u+0]=d,u}}L.prototype.bytesPerElement=4,He("StructArrayLayout1f4",L);class B extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,_){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,_)}emplace(u,d,_,S){const R=3*u;return this.uint16[6*u+0]=d,this.float32[R+1]=_,this.float32[R+2]=S,u}}B.prototype.bytesPerElement=12,He("StructArrayLayout1ui2f12",B);class X extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,_){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,_)}emplace(u,d,_,S){const R=4*u;return this.uint32[2*u+0]=d,this.uint16[R+2]=_,this.uint16[R+3]=S,u}}X.prototype.bytesPerElement=8,He("StructArrayLayout1ul2ui8",X);class te extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d){const _=this.length;return this.resize(_+1),this.emplace(_,u,d)}emplace(u,d,_){const S=2*u;return this.uint16[S+0]=d,this.uint16[S+1]=_,u}}te.prototype.bytesPerElement=4,He("StructArrayLayout2ui4",te);class ce extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint16[1*u+0]=d,u}}ce.prototype.bytesPerElement=2,He("StructArrayLayout1ui2",ce);class me extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,_,S){const R=this.length;return this.resize(R+1),this.emplace(R,u,d,_,S)}emplace(u,d,_,S,R){const D=4*u;return this.float32[D+0]=d,this.float32[D+1]=_,this.float32[D+2]=S,this.float32[D+3]=R,u}}me.prototype.bytesPerElement=16,He("StructArrayLayout4f16",me);class Te extends ja{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}Te.prototype.size=20;class Ce extends Jl{get(u){return new Te(this,u)}}He("CollisionBoxArray",Ce);class Fe extends ja{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Fe.prototype.size=48;class We extends w{get(u){return new Fe(this,u)}}He("PlacedSymbolArray",We);class ct extends ja{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ct.prototype.size=64;class ut extends C{get(u){return new ct(this,u)}}He("SymbolInstanceArray",ut);class dt extends L{getoffsetX(u){return this.float32[1*u+0]}}He("GlyphOffsetArray",dt);class _t extends Do{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}He("SymbolLineVertexArray",_t);class Pt extends ja{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Pt.prototype.size=12;class Et extends B{get(u){return new Pt(this,u)}}He("TextAnchorOffsetArray",Et);class Mt extends ja{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Mt.prototype.size=8;class Ot extends X{get(u){return new Mt(this,u)}}He("FeatureIndexArray",Ot);class Tt extends ns{}class Vt extends ns{}class gr extends ns{}class lr extends is{}class cr extends No{}class fr extends bs{}class Xr extends pa{}class Zr extends Go{}class Fr extends Ml{}class Cn extends ec{}class vi extends Ho{}class Oi extends s{}class ea extends h{}class Xi extends te{}const Ki=hi([{name:"a_pos",components:2,type:"Int16"}],4),{members:sa}=Ki;class ii{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,d,_,S){const R=this.segments[this.segments.length-1];return u>ii.MAX_VERTEX_ARRAY_LENGTH&&at(`Max vertices per segment is ${ii.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${ii.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!R||R.vertexLength+u>ii.MAX_VERTEX_ARRAY_LENGTH||R.sortKey!==S?this.createNewSegment(d,_,S):R}createNewSegment(u,d,_){const S={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return _!==void 0&&(S.sortKey=_),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(S),S}getOrCreateLatestSegment(u,d,_){return this.prepareSegment(0,u,d,_)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const d in u.vaos)u.vaos[d].destroy()}static simpleSegment(u,d,_,S){return new ii([{vertexOffset:u,primitiveOffset:d,vertexLength:_,primitiveLength:S,vaos:{},sortKey:0}])}}function Ji(f,u){return 256*(f=Re(Math.floor(f),0,255))+Re(Math.floor(u),0,255)}ii.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,He("SegmentVector",ii);const fo=hi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Oo,as,_s,Ll={exports:{}},Ad={exports:{}},Md={exports:{}},sh=(function(){if(_s)return Ll.exports;_s=1;var f=(Oo||(Oo=1,Ad.exports=function(d,_){var S,R,D,q,W,ne,se,ve;for(R=d.length-(S=3&d.length),D=_,W=3432918353,ne=461845907,ve=0;ve<R;)se=255&d.charCodeAt(ve)|(255&d.charCodeAt(++ve))<<8|(255&d.charCodeAt(++ve))<<16|(255&d.charCodeAt(++ve))<<24,++ve,D=27492+(65535&(q=5*(65535&(D=(D^=se=(65535&(se=(se=(65535&se)*W+(((se>>>16)*W&65535)<<16)&4294967295)<<15|se>>>17))*ne+(((se>>>16)*ne&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(q>>>16)&65535)<<16);switch(se=0,S){case 3:se^=(255&d.charCodeAt(ve+2))<<16;case 2:se^=(255&d.charCodeAt(ve+1))<<8;case 1:D^=se=(65535&(se=(se=(65535&(se^=255&d.charCodeAt(ve)))*W+(((se>>>16)*W&65535)<<16)&4294967295)<<15|se>>>17))*ne+(((se>>>16)*ne&65535)<<16)&4294967295}return D^=d.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0}),Ad.exports),u=(as||(as=1,Md.exports=function(d,_){for(var S,R=d.length,D=_^R,q=0;R>=4;)S=1540483477*(65535&(S=255&d.charCodeAt(q)|(255&d.charCodeAt(++q))<<8|(255&d.charCodeAt(++q))<<16|(255&d.charCodeAt(++q))<<24))+((1540483477*(S>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(S=1540483477*(65535&(S^=S>>>24))+((1540483477*(S>>>16)&65535)<<16)),R-=4,++q;switch(R){case 3:D^=(255&d.charCodeAt(q+2))<<16;case 2:D^=(255&d.charCodeAt(q+1))<<8;case 1:D=1540483477*(65535&(D^=255&d.charCodeAt(q)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0}),Md.exports);return Ll.exports=f,Ll.exports.murmur3=f,Ll.exports.murmur2=u,Ll.exports})(),lh=p(sh);class pf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,d,_,S){this.ids.push(mf(u)),this.positions.push(d,_,S)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=mf(u);let _=0,S=this.ids.length-1;for(;_<S;){const D=_+S>>1;this.ids[D]>=d?S=D:_=D+1}const R=[];for(;this.ids[_]===d;)R.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return R}static serialize(u,d){const _=new Float64Array(u.ids),S=new Uint32Array(u.positions);return Ql(_,S,0,_.length-1),d&&d.push(_.buffer,S.buffer),{ids:_,positions:S}}static deserialize(u){const d=new pf;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d}}function mf(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:lh(String(f))}function Ql(f,u,d,_){for(;d<_;){const S=f[d+_>>1];let R=d-1,D=_+1;for(;;){do R++;while(f[R]<S);do D--;while(f[D]>S);if(R>=D)break;tc(f,R,D),tc(u,3*R,3*D),tc(u,3*R+1,3*D+1),tc(u,3*R+2,3*D+2)}D-d<_-D?(Ql(f,u,d,D),d=D+1):(Ql(f,u,D+1,_),_=D)}}function tc(f,u,d){const _=f[u];f[u]=f[d],f[d]=_}He("FeaturePositionMap",pf);class Rl{constructor(u,d){this.gl=u.gl,this.location=d}}class Ld extends Rl{constructor(u,d){super(u,d),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class os extends Rl{constructor(u,d){super(u,d),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class xs extends Rl{constructor(u,d){super(u,d),this.current=Sr.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const Lu=new Float32Array(16);function ss(f){return[Ji(255*f.r,255*f.g),Ji(255*f.b,255*f.a)]}class ap{constructor(u,d,_){this.value=u,this.uniformNames=d.map((S=>`u_${S}`)),this.type=_}setUniform(u,d,_){u.set(_.constantOr(this.value))}getBinding(u,d,_){return this.type==="color"?new xs(u,d):new Ld(u,d)}}class uh{constructor(u,d){this.uniformNames=d.map((_=>`u_${_}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr}setUniform(u,d,_,S){const R=S==="u_pattern_to"?this.patternTo:S==="u_pattern_from"?this.patternFrom:S==="u_pixel_ratio_to"?this.pixelRatioTo:S==="u_pixel_ratio_from"?this.pixelRatioFrom:null;R&&u.set(R)}getBinding(u,d,_){return _.substr(0,9)==="u_pattern"?new os(u,d):new Ld(u,d)}}class Yc{constructor(u,d,_,S){this.expression=u,this.type=_,this.maxValue=0,this.paintVertexAttributes=d.map((R=>({name:`a_${R}`,type:"Float32",components:_==="color"?2:1,offset:0}))),this.paintVertexArray=new S}populatePaintArray(u,d,_){const S=this.paintVertexArray.length,R=this.expression.evaluate(new sn(0,_),d,{},_.canonical,[],_.formattedSection);this.paintVertexArray.resize(u),this._setPaintValue(S,u,R)}updatePaintArray(u,d,_,S,R){const D=this.expression.evaluate(new sn(0,R),_,S);this._setPaintValue(u,d,D)}_setPaintValue(u,d,_){if(this.type==="color"){const S=ss(_);for(let R=u;R<d;R++)this.paintVertexArray.emplace(R,S[0],S[1])}else{for(let S=u;S<d;S++)this.paintVertexArray.emplace(S,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class rc{constructor(u,d,_,S,R,D){this.expression=u,this.uniformNames=d.map((q=>`u_${q}_t`)),this.type=_,this.useIntegerZoom=S,this.zoom=R,this.maxValue=0,this.paintVertexAttributes=d.map((q=>({name:`a_${q}`,type:"Float32",components:_==="color"?4:2,offset:0}))),this.paintVertexArray=new D}populatePaintArray(u,d,_){const S=this.expression.evaluate(new sn(this.zoom,_),d,{},_.canonical,[],_.formattedSection),R=this.expression.evaluate(new sn(this.zoom+1,_),d,{},_.canonical,[],_.formattedSection),D=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(D,u,S,R)}updatePaintArray(u,d,_,S,R){const D=this.expression.evaluate(new sn(this.zoom,R),_,S),q=this.expression.evaluate(new sn(this.zoom+1,R),_,S);this._setPaintValue(u,d,D,q)}_setPaintValue(u,d,_,S){if(this.type==="color"){const R=ss(_),D=ss(S);for(let q=u;q<d;q++)this.paintVertexArray.emplace(q,R[0],R[1],D[0],D[1])}else{for(let R=u;R<d;R++)this.paintVertexArray.emplace(R,_,S);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(S))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,d){const _=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,S=Re(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);u.set(S)}getBinding(u,d,_){return new Ld(u,d)}}class Rd{constructor(u,d,_,S,R,D){this.expression=u,this.type=d,this.useIntegerZoom=_,this.zoom=S,this.layerId=D,this.zoomInPaintVertexArray=new R,this.zoomOutPaintVertexArray=new R}populatePaintArray(u,d,_){const S=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(S,u,d.patterns&&d.patterns[this.layerId],_.imagePositions)}updatePaintArray(u,d,_,S,R){this._setPaintValues(u,d,_.patterns&&_.patterns[this.layerId],R.imagePositions)}_setPaintValues(u,d,_,S){if(!S||!_)return;const{min:R,mid:D,max:q}=_,W=S[R],ne=S[D],se=S[q];if(W&&ne&&se)for(let ve=u;ve<d;ve++)this.zoomInPaintVertexArray.emplace(ve,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],ne.pixelRatio,W.pixelRatio),this.zoomOutPaintVertexArray.emplace(ve,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],se.tl[0],se.tl[1],se.br[0],se.br[1],ne.pixelRatio,se.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,fo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,fo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class M1{constructor(u,d,_){this.binders={},this._buffers=[];const S=[];for(const R in u.paint._values){if(!_(R))continue;const D=u.paint.get(R);if(!(D instanceof Za&&Ao(D.property.specification)))continue;const q=L1(R,u.type),W=D.value,ne=D.property.specification.type,se=D.property.useIntegerZoom,ve=D.property.specification["property-type"],Ne=ve==="cross-faded"||ve==="cross-faded-data-driven";if(W.kind==="constant")this.binders[R]=Ne?new uh(W.value,q):new ap(W.value,q,ne),S.push(`/u_${R}`);else if(W.kind==="source"||Ne){const ze=By(R,ne,"source");this.binders[R]=Ne?new Rd(W,ne,se,d,ze,u.id):new Yc(W,q,ne,ze),S.push(`/a_${R}`)}else{const ze=By(R,ne,"composite");this.binders[R]=new rc(W,q,ne,se,d,ze),S.push(`/z_${R}`)}}this.cacheKey=S.sort().join("")}getMaxValue(u){const d=this.binders[u];return d instanceof Yc||d instanceof rc?d.maxValue:0}populatePaintArrays(u,d,_){for(const S in this.binders){const R=this.binders[S];(R instanceof Yc||R instanceof rc||R instanceof Rd)&&R.populatePaintArray(u,d,_)}}setConstantPatternPositions(u,d){for(const _ in this.binders){const S=this.binders[_];S instanceof uh&&S.setConstantPatternPositions(u,d)}}updatePaintArrays(u,d,_,S,R){let D=!1;for(const q in u){const W=d.getPositions(q);for(const ne of W){const se=_.feature(ne.index);for(const ve in this.binders){const Ne=this.binders[ve];if((Ne instanceof Yc||Ne instanceof rc||Ne instanceof Rd)&&Ne.expression.isStateDependent===!0){const ze=S.paint.get(ve);Ne.expression=ze.value,Ne.updatePaintArray(ne.start,ne.end,se,u[q],R),D=!0}}}}return D}defines(){const u=[];for(const d in this.binders){const _=this.binders[d];(_ instanceof ap||_ instanceof uh)&&u.push(..._.uniformNames.map((S=>`#define HAS_UNIFORM_${S}`)))}return u}getBinderAttributes(){const u=[];for(const d in this.binders){const _=this.binders[d];if(_ instanceof Yc||_ instanceof rc)for(let S=0;S<_.paintVertexAttributes.length;S++)u.push(_.paintVertexAttributes[S].name);else if(_ instanceof Rd)for(let S=0;S<fo.members.length;S++)u.push(fo.members[S].name)}return u}getBinderUniforms(){const u=[];for(const d in this.binders){const _=this.binders[d];if(_ instanceof ap||_ instanceof uh||_ instanceof rc)for(const S of _.uniformNames)u.push(S)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,d){const _=[];for(const S in this.binders){const R=this.binders[S];if(R instanceof ap||R instanceof uh||R instanceof rc){for(const D of R.uniformNames)if(d[D]){const q=R.getBinding(u,d[D],D);_.push({name:D,property:S,binding:q})}}}return _}setUniforms(u,d,_,S){for(const{name:R,property:D,binding:q}of d)this.binders[D].setUniform(q,S,_.get(D),R)}updatePaintBuffers(u){this._buffers=[];for(const d in this.binders){const _=this.binders[d];if(u&&_ instanceof Rd){const S=u.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;S&&this._buffers.push(S)}else(_ instanceof Yc||_ instanceof rc)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(u){for(const d in this.binders){const _=this.binders[d];(_ instanceof Yc||_ instanceof rc||_ instanceof Rd)&&_.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const d=this.binders[u];(d instanceof Yc||d instanceof rc||d instanceof Rd)&&d.destroy()}}}class vu{constructor(u,d,_=()=>!0){this.programConfigurations={};for(const S of u)this.programConfigurations[S.id]=new M1(S,d,_);this.needsUpload=!1,this._featureMap=new pf,this._bufferOffset=0}populatePaintArrays(u,d,_,S){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(u,d,S);d.id!==void 0&&this._featureMap.add(d.id,_,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,d,_,S){for(const R of _)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(u,this._featureMap,d,R,S)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function L1(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function By(f,u,d){const _={color:{source:bs,composite:me},number:{source:L,composite:bs}},S=(function(R){return{"line-pattern":{source:Xr,composite:Xr},"fill-pattern":{source:Xr,composite:Xr},"fill-extrusion-pattern":{source:Xr,composite:Xr}}[R]})(f);return S&&S[d]||_[u][d]}He("ConstantBinder",ap),He("CrossFadedConstantBinder",uh),He("SourceExpressionBinder",Yc),He("CrossFadedCompositeBinder",Rd),He("CompositeExpressionBinder",rc),He("ProgramConfiguration",M1,{omit:["_buffers"]}),He("ProgramConfigurationSet",vu);const Sm=Math.pow(2,14)-1,Cm=-Sm-1;function Dd(f){const u=xe/f.extent,d=f.loadGeometry();for(let _=0;_<d.length;_++){const S=d[_];for(let R=0;R<S.length;R++){const D=S[R],q=Math.round(D.x*u),W=Math.round(D.y*u);D.x=Re(q,Cm,Sm),D.y=Re(W,Cm,Sm),(q<D.x||q>D.x+1||W<D.y||W>D.y+1)&&at("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Zc(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Dd(f):[]}}const sA=-32768;function PG(f,u,d,_,S){f.emplaceBack(sA+8*u+_,sA+8*d+S)}class yw{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Vt,this.indexArray=new ea,this.segments=new ii,this.programConfigurations=new vu(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,_){const S=this.layers[0],R=[];let D=null,q=!1,W=S.type==="heatmap";if(S.type==="circle"){const se=S;D=se.layout.get("circle-sort-key"),q=!D.isConstant(),W=W||se.paint.get("circle-pitch-alignment")==="map"}const ne=W?d.subdivisionGranularity.circle:1;for(const{feature:se,id:ve,index:Ne,sourceLayerIndex:ze}of u){const qe=this.layers[0]._featureFilter.needGeometry,Ze=Zc(se,qe);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom,{globalState:this.globalState}),Ze,_))continue;const lt=q?D.evaluate(Ze,{},_):void 0,xt={id:ve,properties:se.properties,type:se.type,sourceLayerIndex:ze,index:Ne,geometry:qe?Ze.geometry:Dd(se),patterns:{},sortKey:lt};R.push(xt)}q&&R.sort(((se,ve)=>se.sortKey-ve.sortKey));for(const se of R){const{geometry:ve,index:Ne,sourceLayerIndex:ze}=se,qe=u[Ne].feature;this.addFeature(se,ve,Ne,_,ne),d.featureIndex.insert(qe,ve,Ne,ze,this.index)}}update(u,d,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,sa),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,d,_,S,R=1){let D;switch(R){case 1:D=[0,7];break;case 3:D=[0,2,5,7];break;case 5:D=[0,1,3,4,6,7];break;case 7:D=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${R}; valid values are 1, 3, 5, 7.`)}const q=D.length;for(const W of d)for(const ne of W){const se=ne.x,ve=ne.y;if(se<0||se>=xe||ve<0||ve>=xe)continue;const Ne=this.segments.prepareSegment(q*q,this.layoutVertexArray,this.indexArray,u.sortKey),ze=Ne.vertexLength;for(let qe=0;qe<q;qe++)for(let Ze=0;Ze<q;Ze++)PG(this.layoutVertexArray,se,ve,D[Ze],D[qe]);for(let qe=0;qe<q-1;qe++)for(let Ze=0;Ze<q-1;Ze++){const lt=ze+qe*q+Ze,xt=ze+(qe+1)*q+Ze;this.indexArray.emplaceBack(lt,xt+1,lt+1),this.indexArray.emplaceBack(lt,xt,xt+1)}Ne.vertexLength+=q*q,Ne.primitiveLength+=(q-1)*(q-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{imagePositions:{},canonical:S,globalState:this.globalState})}}function lA(f,u){for(let d=0;d<f.length;d++)if(Em(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Em(f,u[d]))return!0;return!!vw(f,u)}function IG(f,u,d){return!!Em(f,u)||!!bw(u,f,d)}function uA(f,u){if(f.length===1)return dA(u,f[0]);for(let d=0;d<u.length;d++){const _=u[d];for(let S=0;S<_.length;S++)if(Em(f,_[S]))return!0}for(let d=0;d<f.length;d++)if(dA(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(vw(f,u[d]))return!0;return!1}function kG(f,u,d){if(f.length>1){if(vw(f,u))return!0;for(let _=0;_<u.length;_++)if(bw(u[_],f,d))return!0}for(let _=0;_<f.length;_++)if(bw(f[_],u,d))return!0;return!1}function vw(f,u){if(f.length===0||u.length===0)return!1;for(let d=0;d<f.length-1;d++){const _=f[d],S=f[d+1];for(let R=0;R<u.length-1;R++)if(AG(_,S,u[R],u[R+1]))return!0}return!1}function AG(f,u,d,_){return je(f,d,_)!==je(u,d,_)&&je(f,u,d)!==je(f,u,_)}function bw(f,u,d){const _=d*d;if(u.length===1)return f.distSqr(u[0])<_;for(let S=1;S<u.length;S++)if(cA(f,u[S-1],u[S])<_)return!0;return!1}function cA(f,u,d){const _=u.distSqr(d);if(_===0)return f.distSqr(u);const S=((f.x-u.x)*(d.x-u.x)+(f.y-u.y)*(d.y-u.y))/_;return f.distSqr(S<0?u:S>1?d:d.sub(u)._mult(S)._add(u))}function dA(f,u){let d,_,S,R=!1;for(let D=0;D<f.length;D++){d=f[D];for(let q=0,W=d.length-1;q<d.length;W=q++)_=d[q],S=d[W],_.y>u.y!=S.y>u.y&&u.x<(S.x-_.x)*(u.y-_.y)/(S.y-_.y)+_.x&&(R=!R)}return R}function Em(f,u){let d=!1;for(let _=0,S=f.length-1;_<f.length;S=_++){const R=f[_],D=f[S];R.y>u.y!=D.y>u.y&&u.x<(D.x-R.x)*(u.y-R.y)/(D.y-R.y)+R.x&&(d=!d)}return d}function MG(f,u,d){const _=d[0],S=d[2];if(f.x<_.x&&u.x<_.x||f.x>S.x&&u.x>S.x||f.y<_.y&&u.y<_.y||f.y>S.y&&u.y>S.y)return!1;const R=je(f,u,d[0]);return R!==je(f,u,d[1])||R!==je(f,u,d[2])||R!==je(f,u,d[3])}function zy(f,u,d){const _=u.paint.get(f).value;return _.kind==="constant"?_.value:d.programConfigurations.get(u.id).getMaxValue(f)}function R1(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function D1(f,u,d,_,S){if(!u[0]&&!u[1])return f;const R=c.convert(u)._mult(S);d==="viewport"&&R._rotate(-_);const D=[];for(let q=0;q<f.length;q++)D.push(f[q].sub(R));return D}let fA,hA;He("CircleBucket",yw,{omit:["layers"]});var LG={get paint(){return hA=hA||new Ui({"circle-radius":new Sn(bt.paint_circle["circle-radius"]),"circle-color":new Sn(bt.paint_circle["circle-color"]),"circle-blur":new Sn(bt.paint_circle["circle-blur"]),"circle-opacity":new Sn(bt.paint_circle["circle-opacity"]),"circle-translate":new hn(bt.paint_circle["circle-translate"]),"circle-translate-anchor":new hn(bt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new hn(bt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new hn(bt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Sn(bt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Sn(bt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Sn(bt.paint_circle["circle-stroke-opacity"])})},get layout(){return fA=fA||new Ui({"circle-sort-key":new Sn(bt.layout_circle["circle-sort-key"])})}};class RG extends xa{constructor(u){super(u,LG)}createBucket(u){return new yw(u)}queryRadius(u){const d=u;return zy("circle-radius",this,d)+zy("circle-stroke-width",this,d)+R1(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:_,geometry:S,transform:R,pixelsToTileUnits:D,unwrappedTileID:q,getElevation:W}){const ne=D1(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-R.bearingInRadians,D),se=this.paint.get("circle-radius").evaluate(d,_)+this.paint.get("circle-stroke-width").evaluate(d,_),ve=this.paint.get("circle-pitch-alignment")==="map",Ne=ve?ne:(function(qe,Ze,lt,xt){return qe.map((Gt=>pA(Gt,Ze,lt,xt)))})(ne,R,q,W),ze=ve?se*D:se;for(const qe of S)for(const Ze of qe){const lt=ve?Ze:pA(Ze,R,q,W);let xt=ze;const Gt=R.projectTileCoordinates(Ze.x,Ze.y,q,W).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xt*=Gt/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xt*=R.cameraToCenterDistance/Gt),IG(Ne,lt,xt))return!0}return!1}}function pA(f,u,d,_){const S=u.projectTileCoordinates(f.x,f.y,d,_).point;return new c((.5*S.x+.5)*u.width,(.5*-S.y+.5)*u.height)}class mA extends yw{}let gA;He("HeatmapBucket",mA,{omit:["layers"]});var DG={get paint(){return gA=gA||new Ui({"heatmap-radius":new Sn(bt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Sn(bt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new hn(bt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zi(bt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new hn(bt.paint_heatmap["heatmap-opacity"])})}};function _w(f,{width:u,height:d},_,S){if(S){if(S instanceof Uint8ClampedArray)S=new Uint8Array(S.buffer);else if(S.length!==u*d*_)throw new RangeError(`mismatched image size. expected: ${S.length} but got: ${u*d*_}`)}else S=new Uint8Array(u*d*_);return f.width=u,f.height=d,f.data=S,f}function yA(f,{width:u,height:d},_){if(u===f.width&&d===f.height)return;const S=_w({},{width:u,height:d},_);xw(f,S,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,d)},_),f.width=u,f.height=d,f.data=S.data}function xw(f,u,d,_,S,R){if(S.width===0||S.height===0)return u;if(S.width>f.width||S.height>f.height||d.x>f.width-S.width||d.y>f.height-S.height)throw new RangeError("out of range source coordinates for image copy");if(S.width>u.width||S.height>u.height||_.x>u.width-S.width||_.y>u.height-S.height)throw new RangeError("out of range destination coordinates for image copy");const D=f.data,q=u.data;if(D===q)throw new Error("srcData equals dstData, so image is already copied");for(let W=0;W<S.height;W++){const ne=((d.y+W)*f.width+d.x)*R,se=((_.y+W)*u.width+_.x)*R;for(let ve=0;ve<S.width*R;ve++)q[se+ve]=D[ne+ve]}return u}class jy{constructor(u,d){_w(this,u,1,d)}resize(u){yA(this,u,1)}clone(){return new jy({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,_,S,R){xw(u,d,_,S,R,1)}}class bu{constructor(u,d){_w(this,u,4,d)}resize(u){yA(this,u,4)}replace(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new bu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,_,S,R){xw(u,d,_,S,R,4)}setPixel(u,d,_){const S=4*(u*this.width+d);this.data[S+0]=Math.round(255*_.r/_.a),this.data[S+1]=Math.round(255*_.g/_.a),this.data[S+2]=Math.round(255*_.b/_.a),this.data[S+3]=Math.round(255*_.a)}}function vA(f){const u={},d=f.resolution||256,_=f.clips?f.clips.length:1,S=f.image||new bu({width:d,height:_});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const R=(D,q,W)=>{u[f.evaluationKey]=W;const ne=f.expression.evaluate(u);S.setPixel(D/4/d,q/4,ne)};if(f.clips)for(let D=0,q=0;D<_;++D,q+=4*d)for(let W=0,ne=0;W<d;W++,ne+=4){const se=W/(d-1),{start:ve,end:Ne}=f.clips[D];R(q,ne,ve*(1-se)+Ne*se)}else for(let D=0,q=0;D<d;D++,q+=4)R(0,q,D/(d-1));return S}He("AlphaImage",jy),He("RGBAImage",bu);const ww="big-fb";class NG extends xa{createBucket(u){return new mA(u)}constructor(u){super(u,DG),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ww)&&this.heatmapFbos.delete(ww)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let bA;var OG={get paint(){return bA=bA||new Ui({"hillshade-illumination-direction":new hn(bt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new hn(bt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new hn(bt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new hn(bt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new hn(bt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new hn(bt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new hn(bt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new hn(bt.paint_hillshade["hillshade-method"])})}};class FG extends xa{constructor(u){super(u,OG),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,_=this.paint.get("hillshade-highlight-color").values,S=this.paint.get("hillshade-shadow-color").values;const R=Math.max(u.length,d.length,_.length,S.length);u=u.concat(Array(R-u.length).fill(u.at(-1))),d=d.concat(Array(R-d.length).fill(d.at(-1))),_=_.concat(Array(R-_.length).fill(_.at(-1))),S=S.concat(Array(R-S.length).fill(S.at(-1)));const D=d.map(pr);return{directionRadians:u.map(pr),altitudeRadians:D,shadowColor:S,highlightColor:_}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let _A;var BG={get paint(){return _A=_A||new Ui({"color-relief-opacity":new hn(bt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Zi(bt["paint_color-relief"]["color-relief-color"])})}};class Sw{constructor(u,d,_,S){this.context=u,this.format=_,this.texture=u.gl.createTexture(),this.update(d,S)}update(u,d,_){const{width:S,height:R}=u,D=!(this.size&&this.size[0]===S&&this.size[1]===R||_),{context:q}=this,{gl:W}=q;if(this.useMipmap=!!(d&&d.useMipmap),W.bindTexture(W.TEXTURE_2D,this.texture),q.pixelStoreUnpackFlipY.set(!1),q.pixelStoreUnpack.set(1),q.pixelStoreUnpackPremultiplyAlpha.set(this.format===W.RGBA&&(!d||d.premultiply!==!1)),D)this.size=[S,R],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||zt(u)?W.texImage2D(W.TEXTURE_2D,0,this.format,this.format,W.UNSIGNED_BYTE,u):W.texImage2D(W.TEXTURE_2D,0,this.format,S,R,0,this.format,W.UNSIGNED_BYTE,u.data);else{const{x:ne,y:se}=_||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||zt(u)?W.texSubImage2D(W.TEXTURE_2D,0,ne,se,W.RGBA,W.UNSIGNED_BYTE,u):W.texSubImage2D(W.TEXTURE_2D,0,ne,se,S,R,W.RGBA,W.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&W.generateMipmap(W.TEXTURE_2D),q.pixelStoreUnpackFlipY.setDefault(),q.pixelStoreUnpack.setDefault(),q.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,d,_){const{context:S}=this,{gl:R}=S;R.bindTexture(R.TEXTURE_2D,this.texture),_!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=R.LINEAR),u!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,u),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,_||u),this.filter=u),d!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,d),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class xA{constructor(u,d,_,S=1,R=1,D=1,q=0){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(_&&!["mapbox","terrarium","custom"].includes(_))return void at(`"${_}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const W=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),_){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=S,this.greenFactor=R,this.blueFactor=D,this.baseShift=q;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ne=0;ne<W;ne++)this.data[this._idx(-1,ne)]=this.data[this._idx(0,ne)],this.data[this._idx(W,ne)]=this.data[this._idx(W-1,ne)],this.data[this._idx(ne,-1)]=this.data[this._idx(ne,0)],this.data[this._idx(ne,W)]=this.data[this._idx(ne,W-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(W,-1)]=this.data[this._idx(W-1,0)],this.data[this._idx(-1,W)]=this.data[this._idx(0,W-1)],this.data[this._idx(W,W)]=this.data[this._idx(W-1,W-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ne=0;ne<W;ne++)for(let se=0;se<W;se++){const ve=this.get(ne,se);ve>this.max&&(this.max=ve),ve<this.min&&(this.min=ve)}}get(u,d){const _=new Uint8Array(this.data.buffer),S=4*this._idx(u,d);return this.unpack(_[S],_[S+1],_[S+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)}unpack(u,d,_){return u*this.redFactor+d*this.greenFactor+_*this.blueFactor-this.baseShift}pack(u){return wA(u,this.getUnpackVector())}getPixels(){return new bu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,d,_){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let S=d*this.dim,R=d*this.dim+this.dim,D=_*this.dim,q=_*this.dim+this.dim;switch(d){case-1:S=R-1;break;case 1:R=S+1}switch(_){case-1:D=q-1;break;case 1:q=D+1}const W=-d*this.dim,ne=-_*this.dim;for(let se=D;se<q;se++)for(let ve=S;ve<R;ve++)this.data[this._idx(ve,se)]=u.data[this._idx(ve+W,se+ne)]}}function wA(f,u){const d=u[0],_=u[1],S=u[2],R=u[3],D=Math.min(d,_,S),q=Math.round((f+R)/D);return{r:Math.floor(q*D/d)%256,g:Math.floor(q*D/_)%256,b:Math.floor(q*D/S)%256}}He("DEMData",xA);class zG extends xa{constructor(u){super(u,BG)}_createColorRamp(u){const d={elevationStops:[],colorStops:[]},_=this._transitionablePaint._values["color-relief-color"].value.expression;if(_ instanceof Hc&&_._styleExpression.expression instanceof pn){this.colorRampExpression=_;const D=_._styleExpression.expression;d.elevationStops=D.labels,d.colorStops=[];for(const q of d.elevationStops)d.colorStops.push(D.evaluate({globals:{elevation:q}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[Sr.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=u)return d;const S={elevationStops:[],colorStops:[]},R=(d.elevationStops.length-1)/(u-1);for(let D=0;D<d.elevationStops.length-.5;D+=R)S.elevationStops.push(d.elevationStops[Math.round(D)]),S.colorStops.push(d.colorStops[Math.round(D)]);return at(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),S}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,d,_){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const S=this._createColorRamp(d),R=new bu({width:S.colorStops.length,height:1}),D=new bu({width:S.colorStops.length,height:1});for(let q=0;q<S.elevationStops.length;q++){const W=wA(S.elevationStops[q],_);D.setPixel(0,q,new Sr(W.r/255,W.g/255,W.b/255,1)),R.setPixel(0,q,S.colorStops[q])}return this.colorRampTextures={elevationTexture:new Sw(u,D,u.gl.RGBA),colorTexture:new Sw(u,R,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const jG=hi([{name:"a_pos",components:2,type:"Int16"}],4),{members:qG}=jG;function Cw(f,u,d){const _=d.patternDependencies;let S=!1;for(const R of u){const D=R.paint.get(`${f}-pattern`);D.isConstant()||(S=!0);const q=D.constantOr(null);q&&(S=!0,_[q.to]=!0,_[q.from]=!0)}return S}function Ew(f,u,d,_,S){const{zoom:R,globalState:D}=_,q=S.patternDependencies;for(const W of u){const ne=W.paint.get(`${f}-pattern`).value;if(ne.kind!=="constant"){let se=ne.evaluate({zoom:R-1,globalState:D},d,{},S.availableImages),ve=ne.evaluate({zoom:R,globalState:D},d,{},S.availableImages),Ne=ne.evaluate({zoom:R+1,globalState:D},d,{},S.availableImages);se=se&&se.name?se.name:se,ve=ve&&ve.name?ve.name:ve,Ne=Ne&&Ne.name?Ne.name:Ne,q[se]=!0,q[ve]=!0,q[Ne]=!0,d.patterns[W.id]={min:se,mid:ve,max:Ne}}}return d}function SA(f,u,d,_,S){let R;if(S===(function(D,q,W,ne){let se=0;for(let ve=q,Ne=W-ne;ve<W;ve+=ne)se+=(D[Ne]-D[ve])*(D[ve+1]+D[Ne+1]),Ne=ve;return se})(f,u,d,_)>0)for(let D=u;D<d;D+=_)R=PA(D/_|0,f[D],f[D+1],R);else for(let D=d-_;D>=u;D-=_)R=PA(D/_|0,f[D],f[D+1],R);return R&&Tm(R,R.next)&&(Uy(R),R=R.next),R}function op(f,u){if(!f)return f;u||(u=f);let d,_=f;do if(d=!1,_.steiner||!Tm(_,_.next)&&Wo(_.prev,_,_.next)!==0)_=_.next;else{if(Uy(_),_=u=_.prev,_===_.next)break;d=!0}while(d||_!==u);return u}function qy(f,u,d,_,S,R,D){if(!f)return;!D&&R&&(function(W,ne,se,ve){let Ne=W;do Ne.z===0&&(Ne.z=Tw(Ne.x,Ne.y,ne,se,ve)),Ne.prevZ=Ne.prev,Ne.nextZ=Ne.next,Ne=Ne.next;while(Ne!==W);Ne.prevZ.nextZ=null,Ne.prevZ=null,(function(ze){let qe,Ze=1;do{let lt,xt=ze;ze=null;let Gt=null;for(qe=0;xt;){qe++;let At=xt,Nt=0;for(let br=0;br<Ze&&(Nt++,At=At.nextZ,At);br++);let dr=Ze;for(;Nt>0||dr>0&&At;)Nt!==0&&(dr===0||!At||xt.z<=At.z)?(lt=xt,xt=xt.nextZ,Nt--):(lt=At,At=At.nextZ,dr--),Gt?Gt.nextZ=lt:ze=lt,lt.prevZ=Gt,Gt=lt;xt=At}Gt.nextZ=null,Ze*=2}while(qe>1)})(Ne)})(f,_,S,R);let q=f;for(;f.prev!==f.next;){const W=f.prev,ne=f.next;if(R?VG(f,_,S,R):$G(f))u.push(W.i,f.i,ne.i),Uy(f),f=ne.next,q=ne.next;else if((f=ne)===q){D?D===1?qy(f=UG(op(f),u),u,d,_,S,R,2):D===2&&GG(f,u,d,_,S,R):qy(op(f),u,d,_,S,R,1);break}}}function $G(f){const u=f.prev,d=f,_=f.next;if(Wo(u,d,_)>=0)return!1;const S=u.x,R=d.x,D=_.x,q=u.y,W=d.y,ne=_.y,se=Math.min(S,R,D),ve=Math.min(q,W,ne),Ne=Math.max(S,R,D),ze=Math.max(q,W,ne);let qe=_.next;for(;qe!==u;){if(qe.x>=se&&qe.x<=Ne&&qe.y>=ve&&qe.y<=ze&&$y(S,q,R,W,D,ne,qe.x,qe.y)&&Wo(qe.prev,qe,qe.next)>=0)return!1;qe=qe.next}return!0}function VG(f,u,d,_){const S=f.prev,R=f,D=f.next;if(Wo(S,R,D)>=0)return!1;const q=S.x,W=R.x,ne=D.x,se=S.y,ve=R.y,Ne=D.y,ze=Math.min(q,W,ne),qe=Math.min(se,ve,Ne),Ze=Math.max(q,W,ne),lt=Math.max(se,ve,Ne),xt=Tw(ze,qe,u,d,_),Gt=Tw(Ze,lt,u,d,_);let At=f.prevZ,Nt=f.nextZ;for(;At&&At.z>=xt&&Nt&&Nt.z<=Gt;){if(At.x>=ze&&At.x<=Ze&&At.y>=qe&&At.y<=lt&&At!==S&&At!==D&&$y(q,se,W,ve,ne,Ne,At.x,At.y)&&Wo(At.prev,At,At.next)>=0||(At=At.prevZ,Nt.x>=ze&&Nt.x<=Ze&&Nt.y>=qe&&Nt.y<=lt&&Nt!==S&&Nt!==D&&$y(q,se,W,ve,ne,Ne,Nt.x,Nt.y)&&Wo(Nt.prev,Nt,Nt.next)>=0))return!1;Nt=Nt.nextZ}for(;At&&At.z>=xt;){if(At.x>=ze&&At.x<=Ze&&At.y>=qe&&At.y<=lt&&At!==S&&At!==D&&$y(q,se,W,ve,ne,Ne,At.x,At.y)&&Wo(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;Nt&&Nt.z<=Gt;){if(Nt.x>=ze&&Nt.x<=Ze&&Nt.y>=qe&&Nt.y<=lt&&Nt!==S&&Nt!==D&&$y(q,se,W,ve,ne,Ne,Nt.x,Nt.y)&&Wo(Nt.prev,Nt,Nt.next)>=0)return!1;Nt=Nt.nextZ}return!0}function UG(f,u){let d=f;do{const _=d.prev,S=d.next.next;!Tm(_,S)&&EA(_,d,d.next,S)&&Vy(_,S)&&Vy(S,_)&&(u.push(_.i,d.i,S.i),Uy(d),Uy(d.next),d=f=S),d=d.next}while(d!==f);return op(d)}function GG(f,u,d,_,S,R){let D=f;do{let q=D.next.next;for(;q!==D.prev;){if(D.i!==q.i&&ZG(D,q)){let W=TA(D,q);return D=op(D,D.next),W=op(W,W.next),qy(D,u,d,_,S,R,0),void qy(W,u,d,_,S,R,0)}q=q.next}D=D.next}while(D!==f)}function HG(f,u){let d=f.x-u.x;return d===0&&(d=f.y-u.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),d}function WG(f,u){const d=(function(S,R){let D=R;const q=S.x,W=S.y;let ne,se=-1/0;if(Tm(S,D))return D;do{if(Tm(S,D.next))return D.next;if(W<=D.y&&W>=D.next.y&&D.next.y!==D.y){const Ze=D.x+(W-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(Ze<=q&&Ze>se&&(se=Ze,ne=D.x<D.next.x?D:D.next,Ze===q))return ne}D=D.next}while(D!==R);if(!ne)return null;const ve=ne,Ne=ne.x,ze=ne.y;let qe=1/0;D=ne;do{if(q>=D.x&&D.x>=Ne&&q!==D.x&&CA(W<ze?q:se,W,Ne,ze,W<ze?se:q,W,D.x,D.y)){const Ze=Math.abs(W-D.y)/(q-D.x);Vy(D,S)&&(Ze<qe||Ze===qe&&(D.x>ne.x||D.x===ne.x&&XG(ne,D)))&&(ne=D,qe=Ze)}D=D.next}while(D!==ve);return ne})(f,u);if(!d)return u;const _=TA(d,f);return op(_,_.next),op(d,d.next)}function XG(f,u){return Wo(f.prev,f,u.prev)<0&&Wo(u.next,f,f.next)<0}function Tw(f,u,d,_,S){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*S|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-_)*S|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function YG(f){let u=f,d=f;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==f);return d}function CA(f,u,d,_,S,R,D,q){return(S-D)*(u-q)>=(f-D)*(R-q)&&(f-D)*(_-q)>=(d-D)*(u-q)&&(d-D)*(R-q)>=(S-D)*(_-q)}function $y(f,u,d,_,S,R,D,q){return!(f===D&&u===q)&&CA(f,u,d,_,S,R,D,q)}function ZG(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!(function(d,_){let S=d;do{if(S.i!==d.i&&S.next.i!==d.i&&S.i!==_.i&&S.next.i!==_.i&&EA(S,S.next,d,_))return!0;S=S.next}while(S!==d);return!1})(f,u)&&(Vy(f,u)&&Vy(u,f)&&(function(d,_){let S=d,R=!1;const D=(d.x+_.x)/2,q=(d.y+_.y)/2;do S.y>q!=S.next.y>q&&S.next.y!==S.y&&D<(S.next.x-S.x)*(q-S.y)/(S.next.y-S.y)+S.x&&(R=!R),S=S.next;while(S!==d);return R})(f,u)&&(Wo(f.prev,f,u.prev)||Wo(f,u.prev,u))||Tm(f,u)&&Wo(f.prev,f,f.next)>0&&Wo(u.prev,u,u.next)>0)}function Wo(f,u,d){return(u.y-f.y)*(d.x-u.x)-(u.x-f.x)*(d.y-u.y)}function Tm(f,u){return f.x===u.x&&f.y===u.y}function EA(f,u,d,_){const S=O1(Wo(f,u,d)),R=O1(Wo(f,u,_)),D=O1(Wo(d,_,f)),q=O1(Wo(d,_,u));return S!==R&&D!==q||!(S!==0||!N1(f,d,u))||!(R!==0||!N1(f,_,u))||!(D!==0||!N1(d,f,_))||!(q!==0||!N1(d,u,_))}function N1(f,u,d){return u.x<=Math.max(f.x,d.x)&&u.x>=Math.min(f.x,d.x)&&u.y<=Math.max(f.y,d.y)&&u.y>=Math.min(f.y,d.y)}function O1(f){return f>0?1:f<0?-1:0}function Vy(f,u){return Wo(f.prev,f,f.next)<0?Wo(f,u,f.next)>=0&&Wo(f,f.prev,u)>=0:Wo(f,u,f.prev)<0||Wo(f,f.next,u)<0}function TA(f,u){const d=Pw(f.i,f.x,f.y),_=Pw(u.i,u.x,u.y),S=f.next,R=u.prev;return f.next=u,u.prev=f,d.next=S,S.prev=d,_.next=d,d.prev=_,R.next=_,_.prev=R,_}function PA(f,u,d,_){const S=Pw(f,u,d);return _?(S.next=_.next,S.prev=_,_.next.prev=S,_.next=S):(S.prev=S,S.next=S),S}function Uy(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Pw(f,u,d){return{i:f,x:u,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Pm{constructor(u,d){if(d>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=d}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class F1{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}F1.noSubdivision=new F1({fill:new Pm(0,0),line:new Pm(0,0),tile:new Pm(0,0),stencil:new Pm(0,0),circle:1}),He("SubdivisionGranularityExpression",Pm),He("SubdivisionGranularitySetting",F1);const Im=-32768,Gy=32767;class KG{constructor(u,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=xe/u,this._canonical=d}_getKey(u,d){return(u+=32768)<<16|d+32768}_vertexToIndex(u,d){if(u<-32768||d<-32768||u>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const _=0|Math.round(u),S=0|Math.round(d),R=this._getKey(_,S);if(this._vertexDictionary.has(R))return this._vertexDictionary.get(R);const D=this._vertexBuffer.length/2;return this._vertexDictionary.set(R,D),this._vertexBuffer.push(_,S),D}_subdivideTrianglesScanline(u){if(this._granularity<2)return(function(S,R){const D=[];for(let q=0;q<R.length;q+=3){const W=R[q],ne=R[q+1],se=R[q+2],ve=S[2*W],Ne=S[2*W+1];(S[2*ne]-ve)*(S[2*se+1]-Ne)-(S[2*ne+1]-Ne)*(S[2*se]-ve)>0?(D.push(W),D.push(se),D.push(ne)):(D.push(W),D.push(ne),D.push(se))}return D})(this._vertexBuffer,u);const d=[],_=u.length;for(let S=0;S<_;S+=3){const R=[u[S+0],u[S+1],u[S+2]],D=[this._vertexBuffer[2*u[S+0]+0],this._vertexBuffer[2*u[S+0]+1],this._vertexBuffer[2*u[S+1]+0],this._vertexBuffer[2*u[S+1]+1],this._vertexBuffer[2*u[S+2]+0],this._vertexBuffer[2*u[S+2]+1]];let q=1/0,W=1/0,ne=-1/0,se=-1/0;for(let Ze=0;Ze<3;Ze++){const lt=D[2*Ze],xt=D[2*Ze+1];q=Math.min(q,lt),ne=Math.max(ne,lt),W=Math.min(W,xt),se=Math.max(se,xt)}if(q===ne||W===se)continue;const ve=Math.floor(q/this._granularityCellSize),Ne=Math.ceil(ne/this._granularityCellSize),ze=Math.floor(W/this._granularityCellSize),qe=Math.ceil(se/this._granularityCellSize);if(ve!==Ne||ze!==qe)for(let Ze=ze;Ze<qe;Ze++){const lt=this._scanlineGenerateVertexRingForCellRow(Ze,D,R);JG(this._vertexBuffer,lt,d)}else d.push(...R)}return d}_scanlineGenerateVertexRingForCellRow(u,d,_){const S=u*this._granularityCellSize,R=S+this._granularityCellSize,D=[];for(let q=0;q<3;q++){const W=d[2*q],ne=d[2*q+1],se=d[2*(q+1)%6],ve=d[(2*(q+1)+1)%6],Ne=d[2*(q+2)%6],ze=d[(2*(q+2)+1)%6],qe=se-W,Ze=ve-ne,lt=qe===0,xt=Ze===0,Gt=(S-ne)/Ze,At=(R-ne)/Ze,Nt=Math.min(Gt,At),dr=Math.max(Gt,At);if(!xt&&(Nt>=1||dr<=0)||xt&&(ne<S||ne>R)){ve>=S&&ve<=R&&D.push(_[(q+1)%3]);continue}!xt&&Nt>0&&D.push(this._vertexToIndex(W+qe*Nt,ne+Ze*Nt));const br=W+qe*Math.max(Nt,0),zr=W+qe*Math.min(dr,1);lt||this._generateIntraEdgeVertices(D,W,ne,se,ve,br,zr),!xt&&dr<1&&D.push(this._vertexToIndex(W+qe*dr,ne+Ze*dr)),(xt||ve>=S&&ve<=R)&&D.push(_[(q+1)%3]),!xt&&(ve<=S||ve>=R)&&this._generateInterEdgeVertices(D,W,ne,se,ve,Ne,ze,zr,S,R)}return D}_generateIntraEdgeVertices(u,d,_,S,R,D,q){const W=S-d,ne=R-_,se=ne===0,ve=se?Math.min(d,S):Math.min(D,q),Ne=se?Math.max(d,S):Math.max(D,q),ze=Math.floor(ve/this._granularityCellSize)+1,qe=Math.ceil(Ne/this._granularityCellSize)-1;if(se?d<S:D<q)for(let Ze=ze;Ze<=qe;Ze++){const lt=Ze*this._granularityCellSize;u.push(this._vertexToIndex(lt,_+ne*(lt-d)/W))}else for(let Ze=qe;Ze>=ze;Ze--){const lt=Ze*this._granularityCellSize;u.push(this._vertexToIndex(lt,_+ne*(lt-d)/W))}}_generateInterEdgeVertices(u,d,_,S,R,D,q,W,ne,se){const ve=R-_,Ne=D-S,ze=q-R,qe=(ne-R)/ze,Ze=(se-R)/ze,lt=Math.min(qe,Ze),xt=Math.max(qe,Ze),Gt=S+Ne*lt;let At=Math.floor(Math.min(Gt,W)/this._granularityCellSize)+1,Nt=Math.ceil(Math.max(Gt,W)/this._granularityCellSize)-1,dr=W<Gt;const br=ze===0;if(br&&(q===ne||q===se))return;if(br||lt>=1||xt<=0){const ln=_-q,Kr=D+(d-D)*Math.min((ne-q)/ln,(se-q)/ln);At=Math.floor(Math.min(Kr,W)/this._granularityCellSize)+1,Nt=Math.ceil(Math.max(Kr,W)/this._granularityCellSize)-1,dr=W<Kr}const zr=ve>0?se:ne;if(dr)for(let ln=At;ln<=Nt;ln++)u.push(this._vertexToIndex(ln*this._granularityCellSize,zr));else for(let ln=Nt;ln>=At;ln--)u.push(this._vertexToIndex(ln*this._granularityCellSize,zr))}_generateOutline(u){const d=[];for(const _ of u){const S=sp(_,this._granularity,!0),R=this._pointArrayToIndices(S),D=[];for(let q=1;q<R.length;q++)D.push(R[q-1]),D.push(R[q]);d.push(D)}return d}_handlePoles(u){let d=!1,_=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(_=!0)),(d||_)&&this._fillPoles(u,d,_)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let d=0;d<u.length;d+=2){const _=u[d+1];_===Im&&(u[d+1]=-32767),_===Gy&&(u[d+1]=32766)}}_generatePoleQuad(u,d,_,S,R,D){S>R!=(D===Im)?(u.push(d),u.push(_),u.push(this._vertexToIndex(S,D)),u.push(_),u.push(this._vertexToIndex(R,D)),u.push(this._vertexToIndex(S,D))):(u.push(_),u.push(d),u.push(this._vertexToIndex(S,D)),u.push(this._vertexToIndex(R,D)),u.push(_),u.push(this._vertexToIndex(S,D)))}_fillPoles(u,d,_){const S=this._vertexBuffer,R=xe,D=u.length;for(let q=2;q<D;q+=3){const W=u[q-2],ne=u[q-1],se=u[q],ve=S[2*W],Ne=S[2*W+1],ze=S[2*ne],qe=S[2*ne+1],Ze=S[2*se],lt=S[2*se+1];d&&(Ne===0&&qe===0&&this._generatePoleQuad(u,W,ne,ve,ze,Im),qe===0&&lt===0&&this._generatePoleQuad(u,ne,se,ze,Ze,Im),lt===0&&Ne===0&&this._generatePoleQuad(u,se,W,Ze,ve,Im)),_&&(Ne===R&&qe===R&&this._generatePoleQuad(u,W,ne,ve,ze,Gy),qe===R&&lt===R&&this._generatePoleQuad(u,ne,se,ze,Ze,Gy),lt===R&&Ne===R&&this._generatePoleQuad(u,se,W,Ze,ve,Gy))}}_initializeVertices(u){for(let d=0;d<u.length;d+=2)this._vertexToIndex(u[d],u[d+1])}subdividePolygonInternal(u,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:_,holeIndices:S}=(function(q){const W=[],ne=[];for(const se of q)if(se.length!==0){se!==q[0]&&W.push(ne.length/2);for(let ve=0;ve<se.length;ve++)ne.push(se[ve].x),ne.push(se[ve].y)}return{flattened:ne,holeIndices:W}})(u);let R;this._initializeVertices(_);try{const q=(function(ne,se,ve=2){const Ne=se&&se.length,ze=Ne?se[0]*ve:ne.length;let qe=SA(ne,0,ze,ve,!0);const Ze=[];if(!qe||qe.next===qe.prev)return Ze;let lt,xt,Gt;if(Ne&&(qe=(function(At,Nt,dr,br){const zr=[];for(let ln=0,Kr=Nt.length;ln<Kr;ln++){const rn=SA(At,Nt[ln]*br,ln<Kr-1?Nt[ln+1]*br:At.length,br,!1);rn===rn.next&&(rn.steiner=!0),zr.push(YG(rn))}zr.sort(HG);for(let ln=0;ln<zr.length;ln++)dr=WG(zr[ln],dr);return dr})(ne,se,qe,ve)),ne.length>80*ve){lt=ne[0],xt=ne[1];let At=lt,Nt=xt;for(let dr=ve;dr<ze;dr+=ve){const br=ne[dr],zr=ne[dr+1];br<lt&&(lt=br),zr<xt&&(xt=zr),br>At&&(At=br),zr>Nt&&(Nt=zr)}Gt=Math.max(At-lt,Nt-xt),Gt=Gt!==0?32767/Gt:0}return qy(qe,Ze,ve,lt,xt,Gt,0),Ze})(_,S),W=this._convertIndices(_,q);R=this._subdivideTrianglesScanline(W)}catch(q){console.error(q)}let D=[];return d&&(D=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(R),{verticesFlattened:this._vertexBuffer,indicesTriangles:R,indicesLineList:D}}_convertIndices(u,d){const _=[];for(let S=0;S<d.length;S++)_.push(this._vertexToIndex(u[2*d[S]],u[2*d[S]+1]));return _}_pointArrayToIndices(u){const d=[];for(let _=0;_<u.length;_++){const S=u[_];d.push(this._vertexToIndex(S.x,S.y))}return d}}function IA(f,u,d,_=!0){return new KG(d,u).subdividePolygonInternal(f,_)}function sp(f,u,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const _=f[0],S=f[f.length-1],R=d&&(_.x!==S.x||_.y!==S.y);if(u<2)return R?[...f,f[0]]:[...f];const D=Math.floor(xe/u),q=[];q.push(new c(f[0].x,f[0].y));const W=f.length,ne=R?W:W-1;for(let se=0;se<ne;se++){const ve=f[se],Ne=se<W-1?f[se+1]:f[0],ze=ve.x,qe=ve.y,Ze=Ne.x,lt=Ne.y,xt=ze!==Ze,Gt=qe!==lt;if(!xt&&!Gt)continue;const At=Ze-ze,Nt=lt-qe,dr=Math.abs(At),br=Math.abs(Nt);let zr=ze,ln=qe;for(;;){const rn=At>0?(Math.floor(zr/D)+1)*D:(Math.ceil(zr/D)-1)*D,Bn=Nt>0?(Math.floor(ln/D)+1)*D:(Math.ceil(ln/D)-1)*D,Qr=Math.abs(zr-rn),nn=Math.abs(ln-Bn),kr=Math.abs(zr-Ze),ai=Math.abs(ln-lt),fi=xt?Qr/dr:Number.POSITIVE_INFINITY,Gn=Gt?nn/br:Number.POSITIVE_INFINITY;if((kr<=Qr||!xt)&&(ai<=nn||!Gt))break;if(fi<Gn&&xt||!Gt){zr=rn,ln+=Nt*fi;const In=new c(zr,Math.round(ln));q[q.length-1].x===In.x&&q[q.length-1].y===In.y||q.push(In)}else{zr+=At*Gn,ln=Bn;const In=new c(Math.round(zr),ln);q[q.length-1].x===In.x&&q[q.length-1].y===In.y||q.push(In)}}const Kr=new c(Ze,lt);q[q.length-1].x===Kr.x&&q[q.length-1].y===Kr.y||q.push(Kr)}return q}function JG(f,u,d){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let _=0,S=f[2*u[0]];for(let W=1;W<u.length;W++){const ne=f[2*u[W]];ne<S&&(S=ne,_=W)}const R=u.length;let D=_,q=(D+1)%R;for(;;){const W=D-1>=0?D-1:R-1,ne=(q+1)%R,se=f[2*u[W]],ve=f[2*u[ne]],Ne=f[2*u[D]],ze=f[2*u[D]+1],qe=f[2*u[q]+1];let Ze=!1;if(se<ve)Ze=!0;else if(se>ve)Ze=!1;else{const lt=qe-ze,xt=-(f[2*u[q]]-Ne),Gt=ze<qe?1:-1;((se-Ne)*lt+(f[2*u[W]+1]-ze)*xt)*Gt>((ve-Ne)*lt+(f[2*u[ne]+1]-ze)*xt)*Gt&&(Ze=!0)}if(Ze){const lt=u[W],xt=u[D],Gt=u[q];lt!==xt&&lt!==Gt&&xt!==Gt&&d.push(Gt,xt,lt),D--,D<0&&(D=R-1)}else{const lt=u[ne],xt=u[D],Gt=u[q];lt!==xt&&lt!==Gt&&xt!==Gt&&d.push(Gt,xt,lt),q++,q>=R&&(q=0)}if(W===ne)break}}function kA(f,u,d,_,S,R,D,q,W){const ne=S.length/2,se=D&&q&&W;if(ne<ii.MAX_VERTEX_ARRAY_LENGTH){const ve=u.prepareSegment(ne,d,_),Ne=ve.vertexLength;for(let Ze=0;Ze<R.length;Ze+=3)_.emplaceBack(Ne+R[Ze],Ne+R[Ze+1],Ne+R[Ze+2]);let ze,qe;ve.vertexLength+=ne,ve.primitiveLength+=R.length/3,se&&(qe=D.prepareSegment(ne,d,q),ze=qe.vertexLength,qe.vertexLength+=ne);for(let Ze=0;Ze<S.length;Ze+=2)f(S[Ze],S[Ze+1]);if(se)for(let Ze=0;Ze<W.length;Ze++){const lt=W[Ze];for(let xt=1;xt<lt.length;xt+=2)q.emplaceBack(ze+lt[xt-1],ze+lt[xt]);qe.primitiveLength+=lt.length/2}}else(function(ve,Ne,ze,qe,Ze,lt){const xt=[];for(let br=0;br<qe.length/2;br++)xt.push(-1);const Gt={count:0};let At=0,Nt=ve.getOrCreateLatestSegment(Ne,ze),dr=Nt.vertexLength;for(let br=2;br<Ze.length;br+=3){const zr=Ze[br-2],ln=Ze[br-1],Kr=Ze[br];let rn=xt[zr]<At,Bn=xt[ln]<At,Qr=xt[Kr]<At;Nt.vertexLength+((rn?1:0)+(Bn?1:0)+(Qr?1:0))>ii.MAX_VERTEX_ARRAY_LENGTH&&(Nt=ve.createNewSegment(Ne,ze),At=Gt.count,rn=!0,Bn=!0,Qr=!0,dr=0);const nn=Hy(xt,qe,lt,Gt,zr,rn,Nt),kr=Hy(xt,qe,lt,Gt,ln,Bn,Nt),ai=Hy(xt,qe,lt,Gt,Kr,Qr,Nt);ze.emplaceBack(dr+nn-At,dr+kr-At,dr+ai-At),Nt.primitiveLength++}})(u,d,_,S,R,f),se&&(function(ve,Ne,ze,qe,Ze,lt){const xt=[];for(let br=0;br<qe.length/2;br++)xt.push(-1);const Gt={count:0};let At=0,Nt=ve.getOrCreateLatestSegment(Ne,ze),dr=Nt.vertexLength;for(let br=0;br<Ze.length;br++){const zr=Ze[br];for(let ln=1;ln<Ze[br].length;ln+=2){const Kr=zr[ln-1],rn=zr[ln];let Bn=xt[Kr]<At,Qr=xt[rn]<At;Nt.vertexLength+((Bn?1:0)+(Qr?1:0))>ii.MAX_VERTEX_ARRAY_LENGTH&&(Nt=ve.createNewSegment(Ne,ze),At=Gt.count,Bn=!0,Qr=!0,dr=0);const nn=Hy(xt,qe,lt,Gt,Kr,Bn,Nt),kr=Hy(xt,qe,lt,Gt,rn,Qr,Nt);ze.emplaceBack(dr+nn-At,dr+kr-At),Nt.primitiveLength++}}})(D,d,q,S,W,f),u.forceNewSegmentOnNextPrepare(),D?.forceNewSegmentOnNextPrepare()}function Hy(f,u,d,_,S,R,D){if(R){const q=_.count;return d(u[2*S],u[2*S+1]),f[S]=_.count,_.count++,D.vertexLength++,q}return f[S]}class Iw{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gr,this.indexArray=new ea,this.indexArray2=new Xi,this.programConfigurations=new vu(u.layers,u.zoom),this.segments=new ii,this.segments2=new ii,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,_){this.hasPattern=Cw("fill",this.layers,d);const S=this.layers[0].layout.get("fill-sort-key"),R=!S.isConstant(),D=[];for(const{feature:q,id:W,index:ne,sourceLayerIndex:se}of u){const ve=this.layers[0]._featureFilter.needGeometry,Ne=Zc(q,ve);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom,{globalState:this.globalState}),Ne,_))continue;const ze=R?S.evaluate(Ne,{},_,d.availableImages):void 0,qe={id:W,properties:q.properties,type:q.type,sourceLayerIndex:se,index:ne,geometry:ve?Ne.geometry:Dd(q),patterns:{},sortKey:ze};D.push(qe)}R&&D.sort(((q,W)=>q.sortKey-W.sortKey));for(const q of D){const{geometry:W,index:ne,sourceLayerIndex:se}=q;if(this.hasPattern){const ve=Ew("fill",this.layers,q,{zoom:this.zoom,globalState:this.globalState},d);this.patternFeatures.push(ve)}else this.addFeature(q,W,ne,_,{},d.subdivisionGranularity);d.featureIndex.insert(u[ne].feature,W,ne,se,this.index)}}update(u,d,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}addFeatures(u,d,_){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,d,_,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,qG),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,d,_,S,R,D){for(const q of ia(d,500)){const W=IA(q,S,D.fill.getGranularityForZoomLevel(S.z)),ne=this.layoutVertexArray;kA(((se,ve)=>{ne.emplaceBack(se,ve)}),this.segments,this.layoutVertexArray,this.indexArray,W.verticesFlattened,W.indicesTriangles,this.segments2,this.indexArray2,W.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{imagePositions:R,canonical:S,globalState:this.globalState})}}let AA,MA;He("FillBucket",Iw,{omit:["layers","patternFeatures"]});var QG={get paint(){return MA=MA||new Ui({"fill-antialias":new hn(bt.paint_fill["fill-antialias"]),"fill-opacity":new Sn(bt.paint_fill["fill-opacity"]),"fill-color":new Sn(bt.paint_fill["fill-color"]),"fill-outline-color":new Sn(bt.paint_fill["fill-outline-color"]),"fill-translate":new hn(bt.paint_fill["fill-translate"]),"fill-translate-anchor":new hn(bt.paint_fill["fill-translate-anchor"]),"fill-pattern":new uo(bt.paint_fill["fill-pattern"])})},get layout(){return AA=AA||new Ui({"fill-sort-key":new Sn(bt.layout_fill["fill-sort-key"])})}};class eH extends xa{constructor(u){super(u,QG)}recalculate(u,d){super.recalculate(u,d);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Iw(u)}queryRadius(){return R1(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:d,transform:_,pixelsToTileUnits:S}){return uA(D1(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-_.bearingInRadians,S),d)}isTileClipped(){return!0}}const tH=hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),rH=hi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:nH}=tH;class km{constructor(u,d,_,S,R){this.properties={},this.extent=_,this.type=0,this.id=void 0,this._pbf=u,this._geometry=-1,this._keys=S,this._values=R,u.readFields(iH,this,d)}loadGeometry(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos,_=[];let S,R=1,D=0,q=0,W=0;for(;u.pos<d;){if(D<=0){const ne=u.readVarint();R=7&ne,D=ne>>3}if(D--,R===1||R===2)q+=u.readSVarint(),W+=u.readSVarint(),R===1&&(S&&_.push(S),S=[]),S&&S.push(new c(q,W));else{if(R!==7)throw new Error(`unknown command ${R}`);S&&S.push(S[0].clone())}}return S&&_.push(S),_}bbox(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos;let _=1,S=0,R=0,D=0,q=1/0,W=-1/0,ne=1/0,se=-1/0;for(;u.pos<d;){if(S<=0){const ve=u.readVarint();_=7&ve,S=ve>>3}if(S--,_===1||_===2)R+=u.readSVarint(),D+=u.readSVarint(),R<q&&(q=R),R>W&&(W=R),D<ne&&(ne=D),D>se&&(se=D);else if(_!==7)throw new Error(`unknown command ${_}`)}return[q,ne,W,se]}toGeoJSON(u,d,_){const S=this.extent*Math.pow(2,_),R=this.extent*u,D=this.extent*d,q=this.loadGeometry();function W(Ne){return[360*(Ne.x+R)/S-180,360/Math.PI*Math.atan(Math.exp((1-2*(Ne.y+D)/S)*Math.PI))-90]}function ne(Ne){return Ne.map(W)}let se;if(this.type===1){const Ne=[];for(const qe of q)Ne.push(qe[0]);const ze=ne(Ne);se=Ne.length===1?{type:"Point",coordinates:ze[0]}:{type:"MultiPoint",coordinates:ze}}else if(this.type===2){const Ne=q.map(ne);se=Ne.length===1?{type:"LineString",coordinates:Ne[0]}:{type:"MultiLineString",coordinates:Ne}}else{if(this.type!==3)throw new Error("unknown feature type");{const Ne=(function(qe){const Ze=qe.length;if(Ze<=1)return[qe];const lt=[];let xt,Gt;for(let At=0;At<Ze;At++){const Nt=aH(qe[At]);Nt!==0&&(Gt===void 0&&(Gt=Nt<0),Gt===Nt<0?(xt&&lt.push(xt),xt=[qe[At]]):xt&&xt.push(qe[At]))}return xt&&lt.push(xt),lt})(q),ze=[];for(const qe of Ne)ze.push(qe.map(ne));se=ze.length===1?{type:"Polygon",coordinates:ze[0]}:{type:"MultiPolygon",coordinates:ze}}}const ve={type:"Feature",geometry:se,properties:this.properties};return this.id!=null&&(ve.id=this.id),ve}}function iH(f,u,d){f===1?u.id=d.readVarint():f===2?(function(_,S){const R=_.readVarint()+_.pos;for(;_.pos<R;){const D=S._keys[_.readVarint()],q=S._values[_.readVarint()];S.properties[D]=q}})(d,u):f===3?u.type=d.readVarint():f===4&&(u._geometry=d.pos)}function aH(f){let u=0;for(let d,_,S=0,R=f.length,D=R-1;S<R;D=S++)d=f[S],_=f[D],u+=(_.x-d.x)*(d.y+_.y);return u}km.types=["Unknown","Point","LineString","Polygon"];class LA{constructor(u,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(oH,this,d),this.length=this._features.length}feature(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];const d=this._pbf.readVarint()+this._pbf.pos;return new km(this._pbf,d,this.extent,this._keys,this._values)}}function oH(f,u,d){f===15?u.version=d.readVarint():f===1?u.name=d.readString():f===5?u.extent=d.readVarint():f===2?u._features.push(d.pos):f===3?u._keys.push(d.readString()):f===4&&u._values.push((function(_){let S=null;const R=_.readVarint()+_.pos;for(;_.pos<R;){const D=_.readVarint()>>3;S=D===1?_.readString():D===2?_.readFloat():D===3?_.readDouble():D===4?_.readVarint64():D===5?_.readVarint():D===6?_.readSVarint():D===7?_.readBoolean():null}if(S==null)throw new Error("unknown feature value");return S})(d))}class RA{constructor(u,d){this.layers=u.readFields(sH,{},d)}}function sH(f,u,d){if(f===3){const _=new LA(d,d.readVarint()+d.pos);_.length&&(u[_.name]=_)}}const kw=Math.pow(2,13);function Wy(f,u,d,_,S,R,D,q){f.emplaceBack(u,d,2*Math.floor(_*kw)+D,S*kw*2,R*kw*2,Math.round(q))}class Aw{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new lr,this.centroidVertexArray=new Tt,this.indexArray=new ea,this.programConfigurations=new vu(u.layers,u.zoom),this.segments=new ii,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,_){this.features=[],this.hasPattern=Cw("fill-extrusion",this.layers,d);for(const{feature:S,id:R,index:D,sourceLayerIndex:q}of u){const W=this.layers[0]._featureFilter.needGeometry,ne=Zc(S,W);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom,{globalState:this.globalState}),ne,_))continue;const se={id:R,sourceLayerIndex:q,index:D,geometry:W?ne.geometry:Dd(S),properties:S.properties,type:S.type,patterns:{}};this.hasPattern?this.features.push(Ew("fill-extrusion",this.layers,se,{zoom:this.zoom,globalState:this.globalState},d)):this.addFeature(se,se.geometry,D,_,{},d.subdivisionGranularity),d.featureIndex.insert(S,se.geometry,D,q,this.index,!0)}}addFeatures(u,d,_){for(const S of this.features){const{geometry:R}=S;this.addFeature(S,R,S.index,d,_,u.subdivisionGranularity)}}update(u,d,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,nH),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,rH.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,d,_,S,R,D){for(const q of ia(d,500)){const W={x:0,y:0,sampleCount:0},ne=this.layoutVertexArray.length;this.processPolygon(W,S,u,q,D);const se=this.layoutVertexArray.length-ne,ve=Math.floor(W.x/W.sampleCount),Ne=Math.floor(W.y/W.sampleCount);for(let ze=0;ze<se;ze++)this.centroidVertexArray.emplaceBack(ve,Ne)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{imagePositions:R,canonical:S,globalState:this.globalState})}processPolygon(u,d,_,S,R){if(S.length<1||DA(S[0]))return;for(const ve of S)ve.length!==0&&lH(u,ve);const D={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},q=R.fill.getGranularityForZoomLevel(d.z),W=km.types[_.type]==="Polygon";for(const ve of S){if(ve.length===0||DA(ve))continue;const Ne=sp(ve,q,W);this._generateSideFaces(Ne,D)}if(!W)return;const ne=IA(S,d,q,!1),se=this.layoutVertexArray;kA(((ve,Ne)=>{Wy(se,ve,Ne,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,ne.verticesFlattened,ne.indicesTriangles)}_generateSideFaces(u,d){let _=0;for(let S=1;S<u.length;S++){const R=u[S],D=u[S-1];if(uH(R,D))continue;d.segment.vertexLength+4>ii.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const q=R.sub(D)._perp()._unit(),W=D.dist(R);_+W>32768&&(_=0),Wy(this.layoutVertexArray,R.x,R.y,q.x,q.y,0,0,_),Wy(this.layoutVertexArray,R.x,R.y,q.x,q.y,0,1,_),_+=W,Wy(this.layoutVertexArray,D.x,D.y,q.x,q.y,0,0,_),Wy(this.layoutVertexArray,D.x,D.y,q.x,q.y,0,1,_);const ne=d.segment.vertexLength;this.indexArray.emplaceBack(ne,ne+2,ne+1),this.indexArray.emplaceBack(ne+1,ne+2,ne+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function lH(f,u){for(let d=0;d<u.length;d++){const _=u[d];d===u.length-1&&u[0].x===_.x&&u[0].y===_.y||(f.x+=_.x,f.y+=_.y,f.sampleCount++)}}function uH(f,u){return f.x===u.x&&(f.x<0||f.x>xe)||f.y===u.y&&(f.y<0||f.y>xe)}function DA(f){return f.every((u=>u.x<0))||f.every((u=>u.x>xe))||f.every((u=>u.y<0))||f.every((u=>u.y>xe))}let NA;He("FillExtrusionBucket",Aw,{omit:["layers","features"]});var cH={get paint(){return NA=NA||new Ui({"fill-extrusion-opacity":new hn(bt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Sn(bt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new hn(bt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new hn(bt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new uo(bt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Sn(bt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Sn(bt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new hn(bt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class dH extends xa{constructor(u){super(u,cH)}createBucket(u){return new Aw(u)}queryRadius(){return R1(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:_,geometry:S,transform:R,pixelsToTileUnits:D,pixelPosMatrix:q}){const W=D1(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-R.bearingInRadians,D),ne=this.paint.get("fill-extrusion-height").evaluate(d,_),se=this.paint.get("fill-extrusion-base").evaluate(d,_),ve=(function(ze,qe){const Ze=[];for(const lt of ze){const xt=[lt.x,lt.y,0,1];oe(xt,xt,qe),Ze.push(new c(xt[0]/xt[3],xt[1]/xt[3]))}return Ze})(W,q),Ne=(function(ze,qe,Ze,lt){const xt=[],Gt=[],At=lt[8]*qe,Nt=lt[9]*qe,dr=lt[10]*qe,br=lt[11]*qe,zr=lt[8]*Ze,ln=lt[9]*Ze,Kr=lt[10]*Ze,rn=lt[11]*Ze;for(const Bn of ze){const Qr=[],nn=[];for(const kr of Bn){const ai=kr.x,fi=kr.y,Gn=lt[0]*ai+lt[4]*fi+lt[12],In=lt[1]*ai+lt[5]*fi+lt[13],Fi=lt[2]*ai+lt[6]*fi+lt[14],xo=lt[3]*ai+lt[7]*fi+lt[15],ws=Fi+dr,vl=xo+br,ic=Gn+zr,_u=In+ln,tl=Fi+Kr,ho=xo+rn,zs=new c((Gn+At)/vl,(In+Nt)/vl);zs.z=ws/vl,Qr.push(zs);const rl=new c(ic/ho,_u/ho);rl.z=tl/ho,nn.push(rl)}xt.push(Qr),Gt.push(nn)}return[xt,Gt]})(S,se,ne,q);return(function(ze,qe,Ze){let lt=1/0;uA(Ze,qe)&&(lt=OA(Ze,qe[0]));for(let xt=0;xt<qe.length;xt++){const Gt=qe[xt],At=ze[xt];for(let Nt=0;Nt<Gt.length-1;Nt++){const dr=Gt[Nt],br=[dr,Gt[Nt+1],At[Nt+1],At[Nt],dr];lA(Ze,br)&&(lt=Math.min(lt,OA(Ze,br)))}}return lt!==1/0&&lt})(Ne[0],Ne[1],ve)}}function Xy(f,u){return f.x*u.x+f.y*u.y}function OA(f,u){if(f.length===1){let d=0;const _=u[d++];let S;for(;!S||_.equals(S);)if(S=u[d++],!S)return 1/0;for(;d<u.length;d++){const R=u[d],D=f[0],q=S.sub(_),W=R.sub(_),ne=D.sub(_),se=Xy(q,q),ve=Xy(q,W),Ne=Xy(W,W),ze=Xy(ne,q),qe=Xy(ne,W),Ze=se*Ne-ve*ve,lt=(Ne*ze-ve*qe)/Ze,xt=(se*qe-ve*ze)/Ze,Gt=_.z*(1-lt-xt)+S.z*lt+R.z*xt;if(isFinite(Gt))return Gt}return 1/0}{let d=1/0;for(const _ of u)d=Math.min(d,_.z);return d}}const fH=hi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:hH}=fH,pH=hi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mH}=pH,gH=Math.cos(Math.PI/180*37.5),FA=Math.pow(2,14)/.5;class Mw{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new cr,this.layoutVertexArray2=new fr,this.indexArray=new ea,this.programConfigurations=new vu(u.layers,u.zoom),this.segments=new ii,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,_){this.hasPattern=Cw("line",this.layers,d);const S=this.layers[0].layout.get("line-sort-key"),R=!S.isConstant(),D=[];for(const{feature:q,id:W,index:ne,sourceLayerIndex:se}of u){const ve=this.layers[0]._featureFilter.needGeometry,Ne=Zc(q,ve);if(!this.layers[0]._featureFilter.filter(new sn(this.zoom,{globalState:this.globalState}),Ne,_))continue;const ze=R?S.evaluate(Ne,{},_):void 0,qe={id:W,properties:q.properties,type:q.type,sourceLayerIndex:se,index:ne,geometry:ve?Ne.geometry:Dd(q),patterns:{},sortKey:ze};D.push(qe)}R&&D.sort(((q,W)=>q.sortKey-W.sortKey));for(const q of D){const{geometry:W,index:ne,sourceLayerIndex:se}=q;if(this.hasPattern){const ve=Ew("line",this.layers,q,{zoom:this.zoom,globalState:this.globalState},d);this.patternFeatures.push(ve)}else this.addFeature(q,W,ne,_,{},d.subdivisionGranularity);d.featureIndex.insert(u[ne].feature,W,ne,se,this.index)}}update(u,d,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}addFeatures(u,d,_){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,d,_,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,mH)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,hH),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,d,_,S,R,D){const q=this.layers[0].layout,W=q.get("line-join").evaluate(u,{}),ne=q.get("line-cap"),se=q.get("line-miter-limit"),ve=q.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Ne of d)this.addLine(Ne,u,W,ne,se,ve,S,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{imagePositions:R,canonical:S,globalState:this.globalState})}addLine(u,d,_,S,R,D,q,W){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=sp(u,q?W.line.getGranularityForZoomLevel(q.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let At=0;At<u.length-1;At++)this.totalDistance+=u[At].dist(u[At+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ne=km.types[d.type]==="Polygon";let se=u.length;for(;se>=2&&u[se-1].equals(u[se-2]);)se--;let ve=0;for(;ve<se-1&&u[ve].equals(u[ve+1]);)ve++;if(se<(ne?3:2))return;_==="bevel"&&(R=1.05);const Ne=this.overscaling<=16?122880/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*se,this.layoutVertexArray,this.indexArray);let qe,Ze,lt,xt,Gt;this.e1=this.e2=-1,ne&&(qe=u[se-2],Gt=u[ve].sub(qe)._unit()._perp());for(let At=ve;At<se;At++){if(lt=At===se-1?ne?u[ve+1]:void 0:u[At+1],lt&&u[At].equals(lt))continue;Gt&&(xt=Gt),qe&&(Ze=qe),qe=u[At],Gt=lt?lt.sub(qe)._unit()._perp():xt,xt=xt||Gt;let Nt=xt.add(Gt);Nt.x===0&&Nt.y===0||Nt._unit();const dr=xt.x*Gt.x+xt.y*Gt.y,br=Nt.x*Gt.x+Nt.y*Gt.y,zr=br!==0?1/br:1/0,ln=2*Math.sqrt(2-2*br),Kr=br<gH&&Ze&&lt,rn=xt.x*Gt.y-xt.y*Gt.x>0;if(Kr&&At>ve){const nn=qe.dist(Ze);if(nn>2*Ne){const kr=qe.sub(qe.sub(Ze)._mult(Ne/nn)._round());this.updateDistance(Ze,kr),this.addCurrentVertex(kr,xt,0,0,ze),Ze=kr}}const Bn=Ze&&lt;let Qr=Bn?_:ne?"butt":S;if(Bn&&Qr==="round"&&(zr<D?Qr="miter":zr<=2&&(Qr="fakeround")),Qr==="miter"&&zr>R&&(Qr="bevel"),Qr==="bevel"&&(zr>2&&(Qr="flipbevel"),zr<R&&(Qr="miter")),Ze&&this.updateDistance(Ze,qe),Qr==="miter")Nt._mult(zr),this.addCurrentVertex(qe,Nt,0,0,ze);else if(Qr==="flipbevel"){if(zr>100)Nt=Gt.mult(-1);else{const nn=zr*xt.add(Gt).mag()/xt.sub(Gt).mag();Nt._perp()._mult(nn*(rn?-1:1))}this.addCurrentVertex(qe,Nt,0,0,ze),this.addCurrentVertex(qe,Nt.mult(-1),0,0,ze)}else if(Qr==="bevel"||Qr==="fakeround"){const nn=-Math.sqrt(zr*zr-1),kr=rn?nn:0,ai=rn?0:nn;if(Ze&&this.addCurrentVertex(qe,xt,kr,ai,ze),Qr==="fakeround"){const fi=Math.round(180*ln/Math.PI/20);for(let Gn=1;Gn<fi;Gn++){let In=Gn/fi;if(In!==.5){const xo=In-.5;In+=In*xo*(In-1)*((1.0904+dr*(dr*(3.55645-1.43519*dr)-3.2452))*xo*xo+(.848013+dr*(.215638*dr-1.06021)))}const Fi=Gt.sub(xt)._mult(In)._add(xt)._unit()._mult(rn?-1:1);this.addHalfVertex(qe,Fi.x,Fi.y,!1,rn,0,ze)}}lt&&this.addCurrentVertex(qe,Gt,-kr,-ai,ze)}else if(Qr==="butt")this.addCurrentVertex(qe,Nt,0,0,ze);else if(Qr==="square"){const nn=Ze?1:-1;this.addCurrentVertex(qe,Nt,nn,nn,ze)}else Qr==="round"&&(Ze&&(this.addCurrentVertex(qe,xt,0,0,ze),this.addCurrentVertex(qe,xt,1,1,ze,!0)),lt&&(this.addCurrentVertex(qe,Gt,-1,-1,ze,!0),this.addCurrentVertex(qe,Gt,0,0,ze)));if(Kr&&At<se-1){const nn=qe.dist(lt);if(nn>2*Ne){const kr=qe.add(lt.sub(qe)._mult(Ne/nn)._round());this.updateDistance(qe,kr),this.addCurrentVertex(kr,Gt,0,0,ze),qe=kr}}}}addCurrentVertex(u,d,_,S,R,D=!1){const q=d.y*S-d.x,W=-d.y-d.x*S;this.addHalfVertex(u,d.x+d.y*_,d.y-d.x*_,D,!1,_,R),this.addHalfVertex(u,q,W,D,!0,-S,R),this.distance>FA/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,d,_,S,R,D))}addHalfVertex({x:u,y:d},_,S,R,D,q,W){const ne=.5*(this.lineClips?this.scaledDistance*(FA-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(R?1:0),(d<<1)+(D?1:0),Math.round(63*_)+128,Math.round(63*S)+128,1+(q===0?0:q<0?-1:1)|(63&ne)<<2,ne>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const se=W.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,se,this.e2),W.primitiveLength++),D?this.e2=se:this.e1=se}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,d){this.distance+=u.dist(d),this.updateScaledDistance()}}let BA,zA;He("LineBucket",Mw,{omit:["layers","patternFeatures"]});var jA={get paint(){return zA=zA||new Ui({"line-opacity":new Sn(bt.paint_line["line-opacity"]),"line-color":new Sn(bt.paint_line["line-color"]),"line-translate":new hn(bt.paint_line["line-translate"]),"line-translate-anchor":new hn(bt.paint_line["line-translate-anchor"]),"line-width":new Sn(bt.paint_line["line-width"]),"line-gap-width":new Sn(bt.paint_line["line-gap-width"]),"line-offset":new Sn(bt.paint_line["line-offset"]),"line-blur":new Sn(bt.paint_line["line-blur"]),"line-dasharray":new ki(bt.paint_line["line-dasharray"]),"line-pattern":new uo(bt.paint_line["line-pattern"]),"line-gradient":new Zi(bt.paint_line["line-gradient"])})},get layout(){return BA=BA||new Ui({"line-cap":new hn(bt.layout_line["line-cap"]),"line-join":new Sn(bt.layout_line["line-join"]),"line-miter-limit":new hn(bt.layout_line["line-miter-limit"]),"line-round-limit":new hn(bt.layout_line["line-round-limit"]),"line-sort-key":new Sn(bt.layout_line["line-sort-key"])})}};class yH extends Sn{possiblyEvaluate(u,d){return d=new sn(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(u,d)}evaluate(u,d,_,S){return d=Oe({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(u,d,_,S)}}let B1;class vH extends xa{constructor(u){super(u,jA),this.gradientVersion=0,B1||(B1=new yH(jA.paint.properties["line-width"].specification),B1.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(_){return _._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof pt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,d){super.recalculate(u,d),this.paint._values["line-floorwidth"]=B1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Mw(u)}queryRadius(u){const d=u,_=qA(zy("line-width",this,d),zy("line-gap-width",this,d)),S=zy("line-offset",this,d);return _/2+Math.abs(S)+R1(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:_,geometry:S,transform:R,pixelsToTileUnits:D}){const q=D1(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-R.bearingInRadians,D),W=D/2*qA(this.paint.get("line-width").evaluate(d,_),this.paint.get("line-gap-width").evaluate(d,_)),ne=this.paint.get("line-offset").evaluate(d,_);return ne&&(S=(function(se,ve){const Ne=[];for(let ze=0;ze<se.length;ze++){const qe=se[ze],Ze=[];for(let lt=0;lt<qe.length;lt++){const xt=qe[lt-1],Gt=qe[lt],At=qe[lt+1],Nt=lt===0?new c(0,0):Gt.sub(xt)._unit()._perp(),dr=lt===qe.length-1?new c(0,0):At.sub(Gt)._unit()._perp(),br=Nt._add(dr)._unit(),zr=br.x*dr.x+br.y*dr.y;zr!==0&&br._mult(1/zr),Ze.push(br._mult(ve)._add(Gt))}Ne.push(Ze)}return Ne})(S,ne*D)),(function(se,ve,Ne){for(let ze=0;ze<ve.length;ze++){const qe=ve[ze];if(se.length>=3){for(let Ze=0;Ze<qe.length;Ze++)if(Em(se,qe[Ze]))return!0}if(kG(se,qe,Ne))return!0}return!1})(q,S,W)}isTileClipped(){return!0}}function qA(f,u){return u>0?u+2*f:f}const bH=hi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_H=hi([{name:"a_projected_pos",components:3,type:"Float32"}],4);hi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const xH=hi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);hi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const $A=hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wH=hi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function SH(f,u,d){return f.sections.forEach((_=>{_.text=(function(S,R,D){const q=R.layout.get("text-transform").evaluate(D,{});return q==="uppercase"?S=S.toLocaleUpperCase():q==="lowercase"&&(S=S.toLocaleLowerCase()),ui.applyArabicShaping&&(S=ui.applyArabicShaping(S)),S})(_.text,u,d)})),f}hi([{name:"triangle",components:3,type:"Uint16"}]),hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),hi([{type:"Float32",name:"offsetX"}]),hi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),hi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Yy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Bs=24;const Lw=4294967296,VA=1/Lw,UA=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Rw{constructor(u=new Uint8Array(16)){this.buf=ArrayBuffer.isView(u)?u:new Uint8Array(u),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(u,d,_=this.length){for(;this.pos<_;){const S=this.readVarint(),R=S>>3,D=this.pos;this.type=7&S,u(R,d,this),this.pos===D&&this.skip(S)}return d}readMessage(u,d){return this.readFields(u,d,this.readVarint()+this.pos)}readFixed32(){const u=this.dataView.getUint32(this.pos,!0);return this.pos+=4,u}readSFixed32(){const u=this.dataView.getInt32(this.pos,!0);return this.pos+=4,u}readFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Lw;return this.pos+=8,u}readSFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Lw;return this.pos+=8,u}readFloat(){const u=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,u}readDouble(){const u=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,u}readVarint(u){const d=this.buf;let _,S;return S=d[this.pos++],_=127&S,S<128?_:(S=d[this.pos++],_|=(127&S)<<7,S<128?_:(S=d[this.pos++],_|=(127&S)<<14,S<128?_:(S=d[this.pos++],_|=(127&S)<<21,S<128?_:(S=d[this.pos],_|=(15&S)<<28,(function(R,D,q){const W=q.buf;let ne,se;if(se=W[q.pos++],ne=(112&se)>>4,se<128||(se=W[q.pos++],ne|=(127&se)<<3,se<128)||(se=W[q.pos++],ne|=(127&se)<<10,se<128)||(se=W[q.pos++],ne|=(127&se)<<17,se<128)||(se=W[q.pos++],ne|=(127&se)<<24,se<128)||(se=W[q.pos++],ne|=(1&se)<<31,se<128))return Am(R,ne,D);throw new Error("Expected varint not more than 10 bytes")})(_,u,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const u=this.readVarint();return u%2==1?(u+1)/-2:u/2}readBoolean(){return!!this.readVarint()}readString(){const u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&UA?UA.decode(this.buf.subarray(d,u)):(function(_,S,R){let D="",q=S;for(;q<R;){const W=_[q];let ne,se,ve,Ne=null,ze=W>239?4:W>223?3:W>191?2:1;if(q+ze>R)break;ze===1?W<128&&(Ne=W):ze===2?(ne=_[q+1],(192&ne)==128&&(Ne=(31&W)<<6|63&ne,Ne<=127&&(Ne=null))):ze===3?(ne=_[q+1],se=_[q+2],(192&ne)==128&&(192&se)==128&&(Ne=(15&W)<<12|(63&ne)<<6|63&se,(Ne<=2047||Ne>=55296&&Ne<=57343)&&(Ne=null))):ze===4&&(ne=_[q+1],se=_[q+2],ve=_[q+3],(192&ne)==128&&(192&se)==128&&(192&ve)==128&&(Ne=(15&W)<<18|(63&ne)<<12|(63&se)<<6|63&ve,(Ne<=65535||Ne>=1114112)&&(Ne=null))),Ne===null?(Ne=65533,ze=1):Ne>65535&&(Ne-=65536,D+=String.fromCharCode(Ne>>>10&1023|55296),Ne=56320|1023&Ne),D+=String.fromCharCode(Ne),q+=ze}return D})(this.buf,d,u)}readBytes(){const u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d}readPackedVarint(u=[],d){const _=this.readPackedEnd();for(;this.pos<_;)u.push(this.readVarint(d));return u}readPackedSVarint(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSVarint());return u}readPackedBoolean(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readBoolean());return u}readPackedFloat(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFloat());return u}readPackedDouble(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readDouble());return u}readPackedFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed32());return u}readPackedSFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed32());return u}readPackedFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed64());return u}readPackedSFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed64());return u}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(u){const d=7&u;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(u,d){this.writeVarint(u<<3|d)}realloc(u){let d=this.length||16;for(;d<this.pos+u;)d*=2;if(d!==this.length){const _=new Uint8Array(d);_.set(this.buf),this.buf=_,this.dataView=new DataView(_.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeSFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*VA),!0),this.pos+=8}writeSFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*VA),!0),this.pos+=8}writeVarint(u){(u=+u||0)>268435455||u<0?(function(d,_){let S,R;if(d>=0?(S=d%4294967296|0,R=d/4294967296|0):(S=~(-d%4294967296),R=~(-d/4294967296),4294967295^S?S=S+1|0:(S=0,R=R+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),(function(D,q,W){W.buf[W.pos++]=127&D|128,D>>>=7,W.buf[W.pos++]=127&D|128,D>>>=7,W.buf[W.pos++]=127&D|128,D>>>=7,W.buf[W.pos++]=127&D|128,W.buf[W.pos]=127&(D>>>=7)})(S,0,_),(function(D,q){const W=(7&D)<<4;q.buf[q.pos++]|=W|((D>>>=3)?128:0),D&&(q.buf[q.pos++]=127&D|((D>>>=7)?128:0),D&&(q.buf[q.pos++]=127&D|((D>>>=7)?128:0),D&&(q.buf[q.pos++]=127&D|((D>>>=7)?128:0),D&&(q.buf[q.pos++]=127&D|((D>>>=7)?128:0),D&&(q.buf[q.pos++]=127&D)))))})(R,_)})(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))}writeSVarint(u){this.writeVarint(u<0?2*-u-1:2*u)}writeBoolean(u){this.writeVarint(+u)}writeString(u){u=String(u),this.realloc(4*u.length),this.pos++;const d=this.pos;this.pos=(function(S,R,D){for(let q,W,ne=0;ne<R.length;ne++){if(q=R.charCodeAt(ne),q>55295&&q<57344){if(!W){q>56319||ne+1===R.length?(S[D++]=239,S[D++]=191,S[D++]=189):W=q;continue}if(q<56320){S[D++]=239,S[D++]=191,S[D++]=189,W=q;continue}q=W-55296<<10|q-56320|65536,W=null}else W&&(S[D++]=239,S[D++]=191,S[D++]=189,W=null);q<128?S[D++]=q:(q<2048?S[D++]=q>>6|192:(q<65536?S[D++]=q>>12|224:(S[D++]=q>>18|240,S[D++]=q>>12&63|128),S[D++]=q>>6&63|128),S[D++]=63&q|128)}return D})(this.buf,u,this.pos);const _=this.pos-d;_>=128&&GA(d,_,this),this.pos=d-1,this.writeVarint(_),this.pos+=_}writeFloat(u){this.realloc(4),this.dataView.setFloat32(this.pos,u,!0),this.pos+=4}writeDouble(u){this.realloc(8),this.dataView.setFloat64(this.pos,u,!0),this.pos+=8}writeBytes(u){const d=u.length;this.writeVarint(d),this.realloc(d);for(let _=0;_<d;_++)this.buf[this.pos++]=u[_]}writeRawMessage(u,d){this.pos++;const _=this.pos;u(d,this);const S=this.pos-_;S>=128&&GA(_,S,this),this.pos=_-1,this.writeVarint(S),this.pos+=S}writeMessage(u,d,_){this.writeTag(u,2),this.writeRawMessage(d,_)}writePackedVarint(u,d){d.length&&this.writeMessage(u,CH,d)}writePackedSVarint(u,d){d.length&&this.writeMessage(u,EH,d)}writePackedBoolean(u,d){d.length&&this.writeMessage(u,IH,d)}writePackedFloat(u,d){d.length&&this.writeMessage(u,TH,d)}writePackedDouble(u,d){d.length&&this.writeMessage(u,PH,d)}writePackedFixed32(u,d){d.length&&this.writeMessage(u,kH,d)}writePackedSFixed32(u,d){d.length&&this.writeMessage(u,AH,d)}writePackedFixed64(u,d){d.length&&this.writeMessage(u,MH,d)}writePackedSFixed64(u,d){d.length&&this.writeMessage(u,LH,d)}writeBytesField(u,d){this.writeTag(u,2),this.writeBytes(d)}writeFixed32Field(u,d){this.writeTag(u,5),this.writeFixed32(d)}writeSFixed32Field(u,d){this.writeTag(u,5),this.writeSFixed32(d)}writeFixed64Field(u,d){this.writeTag(u,1),this.writeFixed64(d)}writeSFixed64Field(u,d){this.writeTag(u,1),this.writeSFixed64(d)}writeVarintField(u,d){this.writeTag(u,0),this.writeVarint(d)}writeSVarintField(u,d){this.writeTag(u,0),this.writeSVarint(d)}writeStringField(u,d){this.writeTag(u,2),this.writeString(d)}writeFloatField(u,d){this.writeTag(u,5),this.writeFloat(d)}writeDoubleField(u,d){this.writeTag(u,1),this.writeDouble(d)}writeBooleanField(u,d){this.writeVarintField(u,+d)}}function Am(f,u,d){return d?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function GA(f,u,d){const _=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));d.realloc(_);for(let S=d.pos-1;S>=f;S--)d.buf[S+_]=d.buf[S]}function CH(f,u){for(let d=0;d<f.length;d++)u.writeVarint(f[d])}function EH(f,u){for(let d=0;d<f.length;d++)u.writeSVarint(f[d])}function TH(f,u){for(let d=0;d<f.length;d++)u.writeFloat(f[d])}function PH(f,u){for(let d=0;d<f.length;d++)u.writeDouble(f[d])}function IH(f,u){for(let d=0;d<f.length;d++)u.writeBoolean(f[d])}function kH(f,u){for(let d=0;d<f.length;d++)u.writeFixed32(f[d])}function AH(f,u){for(let d=0;d<f.length;d++)u.writeSFixed32(f[d])}function MH(f,u){for(let d=0;d<f.length;d++)u.writeFixed64(f[d])}function LH(f,u){for(let d=0;d<f.length;d++)u.writeSFixed64(f[d])}function RH(f,u,d){f===1&&d.readMessage(DH,u)}function DH(f,u,d){if(f===3){const{id:_,bitmap:S,width:R,height:D,left:q,top:W,advance:ne}=d.readMessage(NH,{});u.push({id:_,bitmap:new jy({width:R+6,height:D+6},S),metrics:{width:R,height:D,left:q,top:W,advance:ne}})}}function NH(f,u,d){f===1?u.id=d.readVarint():f===2?u.bitmap=d.readBytes():f===3?u.width=d.readVarint():f===4?u.height=d.readVarint():f===5?u.left=d.readSVarint():f===6?u.top=d.readSVarint():f===7&&(u.advance=d.readVarint())}function HA(f){let u=0,d=0;for(const D of f)u+=D.w*D.h,d=Math.max(d,D.w);f.sort(((D,q)=>q.h-D.h));const _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}];let S=0,R=0;for(const D of f)for(let q=_.length-1;q>=0;q--){const W=_[q];if(!(D.w>W.w||D.h>W.h)){if(D.x=W.x,D.y=W.y,R=Math.max(R,D.y+D.h),S=Math.max(S,D.x+D.w),D.w===W.w&&D.h===W.h){const ne=_.pop();ne&&q<_.length&&(_[q]=ne)}else D.h===W.h?(W.x+=D.w,W.w-=D.w):D.w===W.w?(W.y+=D.h,W.h-=D.h):(_.push({x:W.x+D.w,y:W.y,w:W.w-D.w,h:D.h}),W.y+=D.h,W.h-=D.h);break}}return{w:S,h:R,fill:u/(S*R)||0}}class Dw{constructor(u,{pixelRatio:d,version:_,stretchX:S,stretchY:R,content:D,textFitWidth:q,textFitHeight:W}){this.paddedRect=u,this.pixelRatio=d,this.stretchX=S,this.stretchY=R,this.content=D,this.version=_,this.textFitWidth=q,this.textFitHeight=W}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class WA{constructor(u,d){const _={},S={};this.haveRenderCallbacks=[];const R=[];this.addImages(u,_,R),this.addImages(d,S,R);const{w:D,h:q}=HA(R),W=new bu({width:D||1,height:q||1});for(const ne in u){const se=u[ne],ve=_[ne].paddedRect;bu.copy(se.data,W,{x:0,y:0},{x:ve.x+1,y:ve.y+1},se.data)}for(const ne in d){const se=d[ne],ve=S[ne].paddedRect,Ne=ve.x+1,ze=ve.y+1,qe=se.data.width,Ze=se.data.height;bu.copy(se.data,W,{x:0,y:0},{x:Ne,y:ze},se.data),bu.copy(se.data,W,{x:0,y:Ze-1},{x:Ne,y:ze-1},{width:qe,height:1}),bu.copy(se.data,W,{x:0,y:0},{x:Ne,y:ze+Ze},{width:qe,height:1}),bu.copy(se.data,W,{x:qe-1,y:0},{x:Ne-1,y:ze},{width:1,height:Ze}),bu.copy(se.data,W,{x:0,y:0},{x:Ne+qe,y:ze},{width:1,height:Ze})}this.image=W,this.iconPositions=_,this.patternPositions=S}addImages(u,d,_){for(const S in u){const R=u[S],D={x:0,y:0,w:R.data.width+2,h:R.data.height+2};_.push(D),d[S]=new Dw(D,R),R.hasRenderCallback&&this.haveRenderCallbacks.push(S)}}patchUpdatedImages(u,d){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const _ in u.updatedImages)this.patchUpdatedImage(this.iconPositions[_],u.getImage(_),d),this.patchUpdatedImage(this.patternPositions[_],u.getImage(_),d)}patchUpdatedImage(u,d,_){if(!u||!d||u.version===d.version)return;u.version=d.version;const[S,R]=u.tl;_.update(d.data,void 0,{x:S,y:R})}}var ch;He("ImagePosition",Dw),He("ImageAtlas",WA),l.ao=void 0,(ch=l.ao||(l.ao={}))[ch.none=0]="none",ch[ch.horizontal=1]="horizontal",ch[ch.vertical=2]="vertical",ch[ch.horizontalOnly=3]="horizontalOnly";class Zy{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,d,_){const S=new Zy;return S.scale=u||1,S.fontStack=d,S.verticalAlign=_||"bottom",S}static forImage(u,d){const _=new Zy;return _.imageName=u,_.verticalAlign=d||"bottom",_}}class Mm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,d){const _=new Mm;for(let S=0;S<u.sections.length;S++){const R=u.sections[S];R.image?_.addImageSection(R):_.addTextSection(R,d)}return _}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let d="";for(let _=0;_<u.length;_++){const S=u.charCodeAt(_+1)||null,R=u.charCodeAt(_-1)||null;d+=S&&kn(S)&&!Yy[u[_+1]]||R&&kn(R)&&!Yy[u[_-1]]||!Yy[u[_]]?u[_]:Yy[u[_]]}return d})(this.text)}trim(){let u=0;for(let _=0;_<this.text.length&&j1[this.text.charCodeAt(_)];_++)u++;let d=this.text.length;for(let _=this.text.length-1;_>=0&&_>=u&&j1[this.text.charCodeAt(_)];_--)d--;this.text=this.text.substring(u,d),this.sectionIndex=this.sectionIndex.slice(u,d)}substring(u,d){const _=new Mm;return _.text=this.text.substring(u,d),_.sectionIndex=this.sectionIndex.slice(u,d),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,d)=>Math.max(u,this.sections[d].scale)),0)}getMaxImageSize(u){let d=0,_=0;for(let S=0;S<this.length();S++){const R=this.getSection(S);if(R.imageName){const D=u[R.imageName];if(!D)continue;const q=D.displaySize;d=Math.max(d,q[0]),_=Math.max(_,q[1])}}return{maxImageWidth:d,maxImageHeight:_}}addTextSection(u,d){this.text+=u.text,this.sections.push(Zy.forText(u.scale,u.fontStack||d,u.verticalAlign));const _=this.sections.length-1;for(let S=0;S<u.text.length;++S)this.sectionIndex.push(_)}addImageSection(u){const d=u.image?u.image.name:"";if(d.length===0)return void at("Can't add FormattedSection with an empty image.");const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(Zy.forImage(d,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):at("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function z1(f,u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe){const Ze=Mm.fromFeature(f,S);let lt;ve===l.ao.vertical&&Ze.verticalizePunctuation();const{processBidirectionalText:xt,processStyledBidirectionalText:Gt}=ui;if(xt&&Ze.sections.length===1){lt=[];const dr=xt(Ze.toString(),Nw(Ze,ne,R,u,_,ze));for(const br of dr){const zr=new Mm;zr.text=br,zr.sections=Ze.sections;for(let ln=0;ln<br.length;ln++)zr.sectionIndex.push(0);lt.push(zr)}}else if(Gt){lt=[];const dr=Gt(Ze.text,Ze.sectionIndex,Nw(Ze,ne,R,u,_,ze));for(const br of dr){const zr=new Mm;zr.text=br[0],zr.sectionIndex=br[1],zr.sections=Ze.sections,lt.push(zr)}}else lt=(function(dr,br){const zr=[],ln=dr.text;let Kr=0;for(const rn of br)zr.push(dr.substring(Kr,rn)),Kr=rn;return Kr<ln.length&&zr.push(dr.substring(Kr,ln.length)),zr})(Ze,Nw(Ze,ne,R,u,_,ze));const At=[],Nt={positionedLines:At,text:Ze.toString(),top:se[1],bottom:se[1],left:se[0],right:se[0],writingMode:ve,iconsInText:!1,verticalizable:!1};return(function(dr,br,zr,ln,Kr,rn,Bn,Qr,nn,kr,ai,fi){let Gn=0,In=0,Fi=0,xo=0;const ws=Qr==="right"?1:Qr==="left"?0:.5,vl=Bs/fi;let ic=0;for(const ho of Kr){ho.trim();const zs=ho.getMaxScale(),rl={positionedGlyphs:[],lineOffset:0};dr.positionedLines[ic]=rl;const nl=rl.positionedGlyphs;let eu=0;if(!ho.length()){In+=rn,++ic;continue}const ac=zH(ln,ho,vl);for(let xu=0;xu<ho.length();xu++){const Ss=ho.getSection(xu),qs=ho.getSectionIndex(xu),$s=ho.getCharCode(xu),ls=jH(nn,ai,$s);let Ka;if(Ss.imageName){if(dr.iconsInText=!0,Ss.scale=Ss.scale*vl,Ka=$H(Ss,ls,zs,ac,ln),!Ka)continue;eu=Math.max(eu,Ka.imageOffset)}else if(Ka=qH(Ss,$s,ls,ac,br,zr),!Ka)continue;const{rect:Kc,metrics:Nm,baselineOffset:Jc}=Ka;nl.push({glyph:$s,imageName:Ss.imageName,x:Gn,y:In+Jc+-17,vertical:ls,scale:Ss.scale,fontStack:Ss.fontStack,sectionIndex:qs,metrics:Nm,rect:Kc}),ls?(dr.verticalizable=!0,Gn+=(Ss.imageName?Nm.advance:Bs)*Ss.scale+kr):Gn+=Nm.advance*Ss.scale+kr}nl.length!==0&&(Fi=Math.max(Gn-kr,Fi),VH(nl,0,nl.length-1,ws)),Gn=0,rl.lineOffset=Math.max(eu,(zs-1)*Bs);const js=rn*zs+eu;In+=js,xo=Math.max(js,xo),++ic}const{horizontalAlign:_u,verticalAlign:tl}=Ow(Bn);(function(ho,zs,rl,nl,eu,ac,js,xu,Ss){const qs=(zs-rl)*eu;let $s=0;$s=ac!==js?-xu*nl- -17:-nl*Ss*js+.5*js;for(const ls of ho)for(const Ka of ls.positionedGlyphs)Ka.x+=qs,Ka.y+=$s})(dr.positionedLines,ws,_u,tl,Fi,xo,rn,In,Kr.length),dr.top+=-tl*In,dr.bottom=dr.top+In,dr.left+=-_u*Fi,dr.right=dr.left+Fi})(Nt,u,d,_,lt,D,q,W,ve,ne,Ne,qe),!(function(dr){for(const br of dr)if(br.positionedGlyphs.length!==0)return!1;return!0})(At)&&Nt}const j1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},OH={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},FH={40:!0};function XA(f,u,d,_,S,R){if(u.imageName){const D=_[u.imageName];return D?D.displaySize[0]*u.scale*Bs/R+S:0}{const D=d[u.fontStack],q=D&&D[f];return q?q.metrics.advance*u.scale+S:0}}function YA(f,u,d,_){const S=Math.pow(f-u,2);return _?f<u?S/2:2*S:S+Math.abs(d)*d}function BH(f,u,d){let _=0;return f===10&&(_-=1e4),d&&(_+=150),f!==40&&f!==65288||(_+=50),u!==41&&u!==65289||(_+=50),_}function ZA(f,u,d,_,S,R){let D=null,q=YA(u,d,S,R);for(const W of _){const ne=YA(u-W.x,d,S,R)+W.badness;ne<=q&&(D=W,q=ne)}return{index:f,x:u,priorBreak:D,badness:q}}function KA(f){return f?KA(f.priorBreak).concat(f.index):[]}function Nw(f,u,d,_,S,R){if(!f)return[];const D=[],q=(function(ve,Ne,ze,qe,Ze,lt){let xt=0;for(let Gt=0;Gt<ve.length();Gt++){const At=ve.getSection(Gt);xt+=XA(ve.getCharCode(Gt),At,qe,Ze,Ne,lt)}return xt/Math.max(1,Math.ceil(xt/ze))})(f,u,d,_,S,R),W=f.text.indexOf("")>=0;let ne=0;for(let ve=0;ve<f.length();ve++){const Ne=f.getSection(ve),ze=f.getCharCode(ve);if(j1[ze]||(ne+=XA(ze,Ne,_,S,u,R)),ve<f.length()-1){const qe=!((se=ze)<11904)&&(!!jt["CJK Compatibility Forms"](se)||!!jt["CJK Compatibility"](se)||!!jt["CJK Strokes"](se)||!!jt["CJK Symbols and Punctuation"](se)||!!jt["Enclosed CJK Letters and Months"](se)||!!jt["Halfwidth and Fullwidth Forms"](se)||!!jt["Ideographic Description Characters"](se)||!!jt["Vertical Forms"](se)||Vr.test(String.fromCodePoint(se)));(OH[ze]||qe||Ne.imageName||ve!==f.length()-2&&FH[f.getCharCode(ve+1)])&&D.push(ZA(ve+1,ne,q,D,BH(ze,f.getCharCode(ve+1),qe&&W),!1))}}var se;return KA(ZA(f.length(),ne,q,D,0,!0))}function Ow(f){let u=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function zH(f,u,d){const _=u.getMaxScale()*Bs,{maxImageWidth:S,maxImageHeight:R}=u.getMaxImageSize(f),D=Math.max(_,R*d);return{verticalLineContentWidth:Math.max(_,S*d),horizontalLineContentHeight:D}}function JA(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function jH(f,u,d){return!(f===l.ao.horizontal||!u&&!$n(d)||u&&(j1[d]||(_=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(_)))));var _}function qH(f,u,d,_,S,R){const D=R[f.fontStack],q=(function(ne,se,ve,Ne){if(ne&&ne.rect)return ne;const ze=se[ve.fontStack],qe=ze&&ze[Ne];return qe?{rect:null,metrics:qe.metrics}:null})(D&&D[u],S,f,u);if(q===null)return null;let W;if(d)W=_.verticalLineContentWidth-f.scale*Bs;else{const ne=JA(f.verticalAlign);W=(_.horizontalLineContentHeight-f.scale*Bs)*ne}return{rect:q.rect,metrics:q.metrics,baselineOffset:W}}function $H(f,u,d,_,S){const R=S[f.imageName];if(!R)return null;const D=R.paddedRect,q=R.displaySize,W={width:q[0],height:q[1],left:1,top:-3,advance:u?q[1]:q[0]};let ne;if(u)ne=_.verticalLineContentWidth-q[1]*f.scale;else{const se=JA(f.verticalAlign);ne=(_.horizontalLineContentHeight-q[1]*f.scale)*se}return{rect:D,metrics:W,baselineOffset:ne,imageOffset:(u?q[0]:q[1])*f.scale-Bs*d}}function VH(f,u,d,_){if(_===0)return;const S=f[d],R=(f[d].x+S.metrics.advance*S.scale)*_;for(let D=u;D<=d;D++)f[D].x-=R}function UH(f,u,d){const{horizontalAlign:_,verticalAlign:S}=Ow(d),R=u[0]-f.displaySize[0]*_,D=u[1]-f.displaySize[1]*S;return{image:f,top:D,bottom:D+f.displaySize[1],left:R,right:R+f.displaySize[0]}}function QA(f){var u,d;let _=f.left,S=f.top,R=f.right-_,D=f.bottom-S;const q=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",W=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",ne=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(W==="proportional"){if(q==="stretchOnly"&&R/D<ne||q==="proportional"){const se=Math.ceil(D*ne);_*=se/R,R=se}}else if(q==="proportional"&&W==="stretchOnly"&&ne!==0&&R/D>ne){const se=Math.ceil(R/ne);S*=se/D,D=se}return{x1:_,y1:S,x2:_+R,y2:S+D}}function eM(f,u,d,_,S,R){const D=f.image;let q;if(D.content){const lt=D.content,xt=D.pixelRatio||1;q=[lt[0]/xt,lt[1]/xt,D.displaySize[0]-lt[2]/xt,D.displaySize[1]-lt[3]/xt]}const W=u.left*R,ne=u.right*R;let se,ve,Ne,ze;d==="width"||d==="both"?(ze=S[0]+W-_[3],ve=S[0]+ne+_[1]):(ze=S[0]+(W+ne-D.displaySize[0])/2,ve=ze+D.displaySize[0]);const qe=u.top*R,Ze=u.bottom*R;return d==="height"||d==="both"?(se=S[1]+qe-_[0],Ne=S[1]+Ze+_[2]):(se=S[1]+(qe+Ze-D.displaySize[1])/2,Ne=se+D.displaySize[1]),{image:D,top:se,right:ve,bottom:Ne,left:ze,collisionPadding:q}}const gf=128,dh=32640;function tM(f,u){const{expression:d}=u;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new sn(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:_,interpolationType:S}=d;let R=0;for(;R<_.length&&_[R]<=f;)R++;R=Math.max(0,R-1);let D=R;for(;D<_.length&&_[D]<f+1;)D++;D=Math.min(_.length-1,D);const q=_[R],W=_[D];return d.kind==="composite"?{kind:"composite",minZoom:q,maxZoom:W,interpolationType:S}:{kind:"camera",minZoom:q,maxZoom:W,minSize:d.evaluate(new sn(q)),maxSize:d.evaluate(new sn(W)),interpolationType:S}}}function Fw(f,u,d){let _="never";const S=f.get(u);return S?_=S:f.get(d)&&(_="always"),_}const GH=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function q1(f,u,d,_,S,R,D,q,W,ne,se,ve,Ne){const ze=q?Math.min(dh,Math.round(q[0])):0,qe=q?Math.min(dh,Math.round(q[1])):0;f.emplaceBack(u,d,Math.round(32*_),Math.round(32*S),R,D,(ze<<1)+(W?1:0),qe,16*ne,16*se,256*ve,256*Ne)}function Bw(f,u,d){f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d)}function HH(f){for(const u of f.sections)if(Ro(u.text))return!0;return!1}class zw{constructor(u){this.layoutVertexArray=new Zr,this.indexArray=new ea,this.programConfigurations=u,this.segments=new ii,this.dynamicLayoutVertexArray=new Fr,this.opacityVertexArray=new Cn,this.hasVisibleVertices=!1,this.placedSymbolArray=new We}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,d,_,S){this.isEmpty()||(_&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,bH.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,_H.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,GH,!0),this.opacityVertexBuffer.itemSize=1),(_||S)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}He("SymbolBuffers",zw);class jw{constructor(u,d,_){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new _,this.segments=new ii,this.collisionVertexArray=new Oi}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,xH.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}He("CollisionBuffers",jw);class Lm{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((D=>D.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tM(this.zoom,d["text-size"]),this.iconSizeData=tM(this.zoom,d["icon-size"]);const _=this.layers[0].layout,S=_.get("symbol-sort-key"),R=_.get("symbol-z-order");this.canOverlap=Fw(_,"text-overlap","text-allow-overlap")!=="never"||Fw(_,"icon-overlap","icon-allow-overlap")!=="never"||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=R!=="viewport-y"&&!S.isConstant(),this.sortFeaturesByY=(R==="viewport-y"||R==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map((D=>l.ao[D]))),this.stateDependentLayerIds=this.layers.filter((D=>D.isStateDependent())).map((D=>D.id)),this.sourceID=u.sourceID}createArrays(){this.text=new zw(new vu(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new zw(new vu(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new dt,this.lineVertexArray=new _t,this.symbolInstances=new ut,this.textAnchorOffsets=new Et}calculateGlyphDependencies(u,d,_,S,R){for(let D=0;D<u.length;D++)if(d[u.charCodeAt(D)]=!0,(_||S)&&R){const q=Yy[u.charAt(D)];q&&(d[q.charCodeAt(0)]=!0)}}populate(u,d,_){const S=this.layers[0],R=S.layout,D=R.get("text-font"),q=R.get("text-field"),W=R.get("icon-image"),ne=(q.value.kind!=="constant"||q.value.value instanceof mn&&!q.value.value.isEmpty()||q.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),se=W.value.kind!=="constant"||!!W.value.value||Object.keys(W.parameters).length>0,ve=R.get("symbol-sort-key");if(this.features=[],!ne&&!se)return;const Ne=d.iconDependencies,ze=d.glyphDependencies,qe=d.availableImages,Ze=new sn(this.zoom,{globalState:this.globalState});for(const{feature:lt,id:xt,index:Gt,sourceLayerIndex:At}of u){const Nt=S._featureFilter.needGeometry,dr=Zc(lt,Nt);if(!S._featureFilter.filter(Ze,dr,_))continue;let br,zr;if(Nt||(dr.geometry=Dd(lt)),ne){const Kr=S.getValueAndResolveTokens("text-field",dr,_,qe),rn=mn.factory(Kr),Bn=this.hasRTLText=this.hasRTLText||HH(rn);(!Bn||ui.getRTLTextPluginStatus()==="unavailable"||Bn&&ui.isParsed())&&(br=SH(rn,S,dr))}if(se){const Kr=S.getValueAndResolveTokens("icon-image",dr,_,qe);zr=Kr instanceof _a?Kr:_a.fromString(Kr)}if(!br&&!zr)continue;const ln=this.sortFeaturesByKey?ve.evaluate(dr,{},_):void 0;if(this.features.push({id:xt,text:br,icon:zr,index:Gt,sourceLayerIndex:At,geometry:dr.geometry,properties:lt.properties,type:km.types[lt.type],sortKey:ln}),zr&&(Ne[zr.name]=!0),br){const Kr=D.evaluate(dr,{},_).join(","),rn=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ao.vertical)>=0;for(const Bn of br.sections)if(Bn.image)Ne[Bn.image.name]=!0;else{const Qr=Tr(br.toString()),nn=Bn.fontStack||Kr,kr=ze[nn]=ze[nn]||{};this.calculateGlyphDependencies(Bn.text,kr,rn,this.allowVerticalPlacement,Qr)}}}R.get("symbol-placement")==="line"&&(this.features=(function(lt){const xt={},Gt={},At=[];let Nt=0;function dr(Kr){At.push(lt[Kr]),Nt++}function br(Kr,rn,Bn){const Qr=Gt[Kr];return delete Gt[Kr],Gt[rn]=Qr,At[Qr].geometry[0].pop(),At[Qr].geometry[0]=At[Qr].geometry[0].concat(Bn[0]),Qr}function zr(Kr,rn,Bn){const Qr=xt[rn];return delete xt[rn],xt[Kr]=Qr,At[Qr].geometry[0].shift(),At[Qr].geometry[0]=Bn[0].concat(At[Qr].geometry[0]),Qr}function ln(Kr,rn,Bn){const Qr=Bn?rn[0][rn[0].length-1]:rn[0][0];return`${Kr}:${Qr.x}:${Qr.y}`}for(let Kr=0;Kr<lt.length;Kr++){const rn=lt[Kr],Bn=rn.geometry,Qr=rn.text?rn.text.toString():null;if(!Qr){dr(Kr);continue}const nn=ln(Qr,Bn),kr=ln(Qr,Bn,!0);if(nn in Gt&&kr in xt&&Gt[nn]!==xt[kr]){const ai=zr(nn,kr,Bn),fi=br(nn,kr,At[ai].geometry);delete xt[nn],delete Gt[kr],Gt[ln(Qr,At[fi].geometry,!0)]=fi,At[ai].geometry=null}else nn in Gt?br(nn,kr,Bn):kr in xt?zr(nn,kr,Bn):(dr(Kr),xt[nn]=Nt-1,Gt[kr]=Nt-1)}return At.filter((Kr=>Kr.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((lt,xt)=>lt.sortKey-xt.sortKey))}update(u,d,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:_,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:_,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,d){const _=this.lineVertexArray.length;if(u.segment!==void 0){let S=u.dist(d[u.segment+1]),R=u.dist(d[u.segment]);const D={};for(let q=u.segment+1;q<d.length;q++)D[q]={x:d[q].x,y:d[q].y,tileUnitDistanceFromAnchor:S},q<d.length-1&&(S+=d[q+1].dist(d[q]));for(let q=u.segment||0;q>=0;q--)D[q]={x:d[q].x,y:d[q].y,tileUnitDistanceFromAnchor:R},q>0&&(R+=d[q-1].dist(d[q]));for(let q=0;q<d.length;q++){const W=D[q];this.lineVertexArray.emplaceBack(W.x,W.y,W.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(u,d,_,S,R,D,q,W,ne,se,ve,Ne){const ze=u.indexArray,qe=u.layoutVertexArray,Ze=u.segments.prepareSegment(4*d.length,qe,ze,this.canOverlap?D.sortKey:void 0),lt=this.glyphOffsetArray.length,xt=Ze.vertexLength,Gt=this.allowVerticalPlacement&&q===l.ao.vertical?Math.PI/2:0,At=D.text&&D.text.sections;for(let Nt=0;Nt<d.length;Nt++){const{tl:dr,tr:br,bl:zr,br:ln,tex:Kr,pixelOffsetTL:rn,pixelOffsetBR:Bn,minFontScaleX:Qr,minFontScaleY:nn,glyphOffset:kr,isSDF:ai,sectionIndex:fi}=d[Nt],Gn=Ze.vertexLength,In=kr[1];q1(qe,W.x,W.y,dr.x,In+dr.y,Kr.x,Kr.y,_,ai,rn.x,rn.y,Qr,nn),q1(qe,W.x,W.y,br.x,In+br.y,Kr.x+Kr.w,Kr.y,_,ai,Bn.x,rn.y,Qr,nn),q1(qe,W.x,W.y,zr.x,In+zr.y,Kr.x,Kr.y+Kr.h,_,ai,rn.x,Bn.y,Qr,nn),q1(qe,W.x,W.y,ln.x,In+ln.y,Kr.x+Kr.w,Kr.y+Kr.h,_,ai,Bn.x,Bn.y,Qr,nn),Bw(u.dynamicLayoutVertexArray,W,Gt),ze.emplaceBack(Gn,Gn+2,Gn+1),ze.emplaceBack(Gn+1,Gn+2,Gn+3),Ze.vertexLength+=4,Ze.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kr[0]),Nt!==d.length-1&&fi===d[Nt+1].sectionIndex||u.programConfigurations.populatePaintArrays(qe.length,D,D.index,{imagePositions:{},canonical:Ne,formattedSection:At&&At[fi],globalState:this.globalState})}u.placedSymbolArray.emplaceBack(W.x,W.y,lt,this.glyphOffsetArray.length-lt,xt,ne,se,W.segment,_?_[0]:0,_?_[1]:0,S[0],S[1],q,0,!1,0,ve)}_addCollisionDebugVertex(u,d,_,S,R,D){return d.emplaceBack(0,0),u.emplaceBack(_.x,_.y,S,R,Math.round(D.x),Math.round(D.y))}addCollisionDebugVertices(u,d,_,S,R,D,q){const W=R.segments.prepareSegment(4,R.layoutVertexArray,R.indexArray),ne=W.vertexLength,se=R.layoutVertexArray,ve=R.collisionVertexArray,Ne=q.anchorX,ze=q.anchorY;this._addCollisionDebugVertex(se,ve,D,Ne,ze,new c(u,d)),this._addCollisionDebugVertex(se,ve,D,Ne,ze,new c(_,d)),this._addCollisionDebugVertex(se,ve,D,Ne,ze,new c(_,S)),this._addCollisionDebugVertex(se,ve,D,Ne,ze,new c(u,S)),W.vertexLength+=4;const qe=R.indexArray;qe.emplaceBack(ne,ne+1),qe.emplaceBack(ne+1,ne+2),qe.emplaceBack(ne+2,ne+3),qe.emplaceBack(ne+3,ne),W.primitiveLength+=4}addDebugCollisionBoxes(u,d,_,S){for(let R=u;R<d;R++){const D=this.collisionBoxArray.get(R);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,S?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jw(vi,$A.members,Xi),this.iconCollisionBox=new jw(vi,$A.members,Xi);for(let u=0;u<this.symbolInstances.length;u++){const d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(u,d,_,S,R,D,q,W,ne){const se={};for(let ve=d;ve<_;ve++){const Ne=u.get(ve);se.textBox={x1:Ne.x1,y1:Ne.y1,x2:Ne.x2,y2:Ne.y2,anchorPointX:Ne.anchorPointX,anchorPointY:Ne.anchorPointY},se.textFeatureIndex=Ne.featureIndex;break}for(let ve=S;ve<R;ve++){const Ne=u.get(ve);se.verticalTextBox={x1:Ne.x1,y1:Ne.y1,x2:Ne.x2,y2:Ne.y2,anchorPointX:Ne.anchorPointX,anchorPointY:Ne.anchorPointY},se.verticalTextFeatureIndex=Ne.featureIndex;break}for(let ve=D;ve<q;ve++){const Ne=u.get(ve);se.iconBox={x1:Ne.x1,y1:Ne.y1,x2:Ne.x2,y2:Ne.y2,anchorPointX:Ne.anchorPointX,anchorPointY:Ne.anchorPointY},se.iconFeatureIndex=Ne.featureIndex;break}for(let ve=W;ve<ne;ve++){const Ne=u.get(ve);se.verticalIconBox={x1:Ne.x1,y1:Ne.y1,x2:Ne.x2,y2:Ne.y2,anchorPointX:Ne.anchorPointX,anchorPointY:Ne.anchorPointY},se.verticalIconFeatureIndex=Ne.featureIndex;break}return se}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const _=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,d){const _=u.placedSymbolArray.get(d),S=_.vertexStartIndex+4*_.numGlyphs;for(let R=_.vertexStartIndex;R<S;R+=4)u.indexArray.emplaceBack(R,R+2,R+1),u.indexArray.emplaceBack(R+1,R+2,R+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(u),_=Math.cos(u),S=[],R=[],D=[];for(let q=0;q<this.symbolInstances.length;++q){D.push(q);const W=this.symbolInstances.get(q);S.push(0|Math.round(d*W.anchorX+_*W.anchorY)),R.push(W.featureIndex)}return D.sort(((q,W)=>S[q]-S[W]||R[W]-R[q])),D}addToSortKeyRanges(u,d){const _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===d?_.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const _=this.symbolInstances.get(d);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach(((S,R,D)=>{S>=0&&D.indexOf(S)===R&&this.addIndicesForPlacedSymbol(this.text,S)})),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let rM,nM;He("SymbolBucket",Lm,{omit:["layers","collisionBoxArray","features","compareText"]}),Lm.MAX_GLYPHS=65535,Lm.addDynamicAttributes=Bw;var qw={get paint(){return nM=nM||new Ui({"icon-opacity":new Sn(bt.paint_symbol["icon-opacity"]),"icon-color":new Sn(bt.paint_symbol["icon-color"]),"icon-halo-color":new Sn(bt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Sn(bt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Sn(bt.paint_symbol["icon-halo-blur"]),"icon-translate":new hn(bt.paint_symbol["icon-translate"]),"icon-translate-anchor":new hn(bt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Sn(bt.paint_symbol["text-opacity"]),"text-color":new Sn(bt.paint_symbol["text-color"],{runtimeType:_i,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Sn(bt.paint_symbol["text-halo-color"]),"text-halo-width":new Sn(bt.paint_symbol["text-halo-width"]),"text-halo-blur":new Sn(bt.paint_symbol["text-halo-blur"]),"text-translate":new hn(bt.paint_symbol["text-translate"]),"text-translate-anchor":new hn(bt.paint_symbol["text-translate-anchor"])})},get layout(){return rM=rM||new Ui({"symbol-placement":new hn(bt.layout_symbol["symbol-placement"]),"symbol-spacing":new hn(bt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new hn(bt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Sn(bt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new hn(bt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new hn(bt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new hn(bt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new hn(bt.layout_symbol["icon-ignore-placement"]),"icon-optional":new hn(bt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new hn(bt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Sn(bt.layout_symbol["icon-size"]),"icon-text-fit":new hn(bt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new hn(bt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Sn(bt.layout_symbol["icon-image"]),"icon-rotate":new Sn(bt.layout_symbol["icon-rotate"]),"icon-padding":new Sn(bt.layout_symbol["icon-padding"]),"icon-keep-upright":new hn(bt.layout_symbol["icon-keep-upright"]),"icon-offset":new Sn(bt.layout_symbol["icon-offset"]),"icon-anchor":new Sn(bt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new hn(bt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new hn(bt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new hn(bt.layout_symbol["text-rotation-alignment"]),"text-field":new Sn(bt.layout_symbol["text-field"]),"text-font":new Sn(bt.layout_symbol["text-font"]),"text-size":new Sn(bt.layout_symbol["text-size"]),"text-max-width":new Sn(bt.layout_symbol["text-max-width"]),"text-line-height":new hn(bt.layout_symbol["text-line-height"]),"text-letter-spacing":new Sn(bt.layout_symbol["text-letter-spacing"]),"text-justify":new Sn(bt.layout_symbol["text-justify"]),"text-radial-offset":new Sn(bt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new hn(bt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Sn(bt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Sn(bt.layout_symbol["text-anchor"]),"text-max-angle":new hn(bt.layout_symbol["text-max-angle"]),"text-writing-mode":new hn(bt.layout_symbol["text-writing-mode"]),"text-rotate":new Sn(bt.layout_symbol["text-rotate"]),"text-padding":new hn(bt.layout_symbol["text-padding"]),"text-keep-upright":new hn(bt.layout_symbol["text-keep-upright"]),"text-transform":new Sn(bt.layout_symbol["text-transform"]),"text-offset":new Sn(bt.layout_symbol["text-offset"]),"text-allow-overlap":new hn(bt.layout_symbol["text-allow-overlap"]),"text-overlap":new hn(bt.layout_symbol["text-overlap"]),"text-ignore-placement":new hn(bt.layout_symbol["text-ignore-placement"]),"text-optional":new hn(bt.layout_symbol["text-optional"])})}};class iM{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:wi,this.defaultValue=u}evaluate(u){if(u.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}He("FormatSectionOverride",iM,{omit:["defaultValue"]});class $1 extends xa{constructor(u){super(u,qw)}recalculate(u,d){if(super.recalculate(u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const _=this.layout.get("text-writing-mode");if(_){const S=[];for(const R of _)S.indexOf(R)<0&&S.push(R);this.layout._values["text-writing-mode"]=S}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,d,_,S){const R=this.layout.get(u).evaluate(d,{},_,S),D=this._unevaluatedLayout._values[u];return D.isDataDriven()||wd(D.value)||!R?R:(function(q,W){return W.replace(/{([^{}]+)}/g,((ne,se)=>q&&se in q?String(q[se]):""))})(d.properties,R)}createBucket(u){return new Lm(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of qw.paint.overridableProperties){if(!$1.hasPaintOverride(this.layout,u))continue;const d=this.paint.get(u),_=new iM(d),S=new uf(_,d.property.specification);let R=null;R=d.value.kind==="constant"||d.value.kind==="source"?new Hc("source",S):new Yh("composite",S,d.value.zoomStops),this.paint._values[u]=new Za(d.property,R,d.parameters)}}_handleOverridablePaintPropertyUpdate(u,d,_){return!(!this.layout||d.isDataDriven()||_.isDataDriven())&&$1.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,d){const _=u.get("text-field"),S=qw.paint.properties[d];let R=!1;const D=q=>{for(const W of q)if(S.overrides&&S.overrides.hasOverride(W))return void(R=!0)};if(_.value.kind==="constant"&&_.value.value instanceof mn)D(_.value.value.sections);else if(_.value.kind==="source"||_.value.kind==="composite"){const q=ne=>{R||(ne instanceof Po&&Mn(ne.value)===na?D(ne.value.sections):ne instanceof Wi?D(ne.sections):ne.eachChild(q))},W=_.value;W._styleExpression&&q(W._styleExpression.expression)}return R}}let aM;var WH={get paint(){return aM=aM||new Ui({"background-color":new hn(bt.paint_background["background-color"]),"background-pattern":new ki(bt.paint_background["background-pattern"]),"background-opacity":new hn(bt.paint_background["background-opacity"])})}};class XH extends xa{constructor(u){super(u,WH)}}let oM;var YH={get paint(){return oM=oM||new Ui({"raster-opacity":new hn(bt.paint_raster["raster-opacity"]),"raster-hue-rotate":new hn(bt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new hn(bt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new hn(bt.paint_raster["raster-brightness-max"]),"raster-saturation":new hn(bt.paint_raster["raster-saturation"]),"raster-contrast":new hn(bt.paint_raster["raster-contrast"]),"raster-resampling":new hn(bt.paint_raster["raster-resampling"]),"raster-fade-duration":new hn(bt.paint_raster["raster-fade-duration"])})}};class ZH extends xa{constructor(u){super(u,YH)}}class KH extends xa{constructor(u){super(u,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class JH{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const QH={once:!0},$w=63710088e-1;class fh{constructor(u,d){if(isNaN(u)||isNaN(d))throw new Error(`Invalid LngLat object: (${u}, ${d})`);if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new fh($e(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const d=Math.PI/180,_=this.lat*d,S=u.lat*d,R=Math.sin(_)*Math.sin(S)+Math.cos(_)*Math.cos(S)*Math.cos((u.lng-this.lng)*d);return $w*Math.acos(Math.min(R,1))}static convert(u){if(u instanceof fh)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new fh(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new fh(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const sM=2*Math.PI*$w;function lM(f){return sM*Math.cos(f*Math.PI/180)}function uM(f){return(180+f)/360}function cM(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function dM(f,u){return f/lM(u)}function Vw(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function fM(f,u){return f*lM(Vw(u))}class Ky{constructor(u,d,_=0){this.x=+u,this.y=+d,this.z=+_}static fromLngLat(u,d=0){const _=fh.convert(u);return new Ky(uM(_.lng),cM(_.lat),dM(d,_.lat))}toLngLat(){return new fh(360*this.x-180,Vw(this.y))}toAltitude(){return fM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/sM*(u=Vw(this.y),1/Math.cos(u*Math.PI/180));var u}}function hM(f,u,d){var _=2*Math.PI*6378137/256/Math.pow(2,d);return[f*_-2*Math.PI*6378137/2,u*_-2*Math.PI*6378137/2]}class Uw{constructor(u,d,_){if(!(function(S,R,D){return!(S<0||S>25||D<0||D>=Math.pow(2,S)||R<0||R>=Math.pow(2,S))})(u,d,_))throw new Error(`x=${d}, y=${_}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=d,this.y=_,this.key=Rm(0,u,u,d,_)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,d,_){const S=(D=this.y,q=this.z,W=hM(256*(R=this.x),256*(D=Math.pow(2,q)-D-1),q),ne=hM(256*(R+1),256*(D+1),q),W[0]+","+W[1]+","+ne[0]+","+ne[1]);var R,D,q,W,ne;const se=(function(ve,Ne,ze){let qe,Ze="";for(let lt=ve;lt>0;lt--)qe=1<<lt-1,Ze+=(Ne&qe?1:0)+(ze&qe?2:0);return Ze})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,se).replace(/{bbox-epsg-3857}/g,S)}isChildOf(u){const d=this.z-u.z;return d>0&&u.x===this.x>>d&&u.y===this.y>>d}getTilePoint(u){const d=Math.pow(2,this.z);return new c((u.x*d-this.x)*xe,(u.y*d-this.y)*xe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pM{constructor(u,d){this.wrap=u,this.canonical=d,this.key=Rm(u,d.z,d.z,d.x,d.y)}}class nc{constructor(u,d,_,S,R){if(this.terrainRttPosMatrix32f=null,u<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${_}`);this.overscaledZ=u,this.wrap=d,this.canonical=new Uw(_,+S,+R),this.key=Rm(d,u,_,S,R)}clone(){return new nc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-u;return u>this.canonical.z?new nc(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nc(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(u,d){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-u;return u>this.canonical.z?Rm(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Rm(this.wrap*+d,u,u,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const d=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d}children(u){if(this.overscaledZ>=u)return[new nc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,_=2*this.canonical.x,S=2*this.canonical.y;return[new nc(d,this.wrap,d,_,S),new nc(d,this.wrap,d,_+1,S),new nc(d,this.wrap,d,_,S+1),new nc(d,this.wrap,d,_+1,S+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new nc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new nc(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pM(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new Ky(u.x-this.wrap,u.y))}}function Rm(f,u,d,_,S){(f*=2)<0&&(f=-1*f-1);const R=1<<d;return(R*R*f+R*S+_).toString(36)+d.toString(36)+u.toString(36)}function Jy(f,u){return u?f.properties[u]:f.id}He("CanonicalTileID",Uw),He("OverscaledTileID",nc,{omit:["terrainRttPosMatrix32f"]});class lp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const d=new lp;return d.extend(u(new c(this.minX,this.minY))),d.extend(u(new c(this.maxX,this.minY))),d.extend(u(new c(this.minX,this.maxY))),d.extend(u(new c(this.maxX,this.maxY))),d}static fromPoints(u){const d=new lp;for(const _ of u)d.extend(_);return d}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class mM{constructor(u){this._stringToNumber={},this._numberToString=[];for(let d=0;d<u.length;d++){const _=u[d];this._stringToNumber[_]=d,this._numberToString[d]=_}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class gM{constructor(u,d,_,S,R){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=_,u._y=S,this.properties=u.properties,this.id=R}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u}}class yM{constructor(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Je(xe,16,0),this.grid3D=new Je(xe,16,0),this.featureIndexArray=new Ot,this.promoteId=d}insert(u,d,_,S,R,D){const q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,S,R);const W=D?this.grid3D:this.grid;for(let ne=0;ne<d.length;ne++){const se=d[ne],ve=[1/0,1/0,-1/0,-1/0];for(let Ne=0;Ne<se.length;Ne++){const ze=se[Ne];ve[0]=Math.min(ve[0],ze.x),ve[1]=Math.min(ve[1],ze.y),ve[2]=Math.max(ve[2],ze.x),ve[3]=Math.max(ve[3],ze.y)}ve[0]<xe&&ve[1]<xe&&ve[2]>=0&&ve[3]>=0&&W.insert(q,ve[0],ve[1],ve[2],ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new RA(new Rw(this.rawTileData)).layers,this.sourceLayerCoder=new mM(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,d,_,S){this.loadVTLayers();const R=u.params,D=xe/u.tileSize/u.scale,q=Wc(R.filter),W=u.queryGeometry,ne=u.queryPadding*D,se=lp.fromPoints(W),ve=this.grid.query(se.minX-ne,se.minY-ne,se.maxX+ne,se.maxY+ne),Ne=lp.fromPoints(u.cameraQueryGeometry).expandBy(ne),ze=this.grid3D.query(Ne.minX,Ne.minY,Ne.maxX,Ne.maxY,((lt,xt,Gt,At)=>(function(Nt,dr,br,zr,ln){for(const rn of Nt)if(dr<=rn.x&&br<=rn.y&&zr>=rn.x&&ln>=rn.y)return!0;const Kr=[new c(dr,br),new c(dr,ln),new c(zr,ln),new c(zr,br)];if(Nt.length>2){for(const rn of Kr)if(Em(Nt,rn))return!0}for(let rn=0;rn<Nt.length-1;rn++)if(MG(Nt[rn],Nt[rn+1],Kr))return!0;return!1})(u.cameraQueryGeometry,lt-ne,xt-ne,Gt+ne,At+ne)));for(const lt of ze)ve.push(lt);ve.sort(eW);const qe={};let Ze;for(let lt=0;lt<ve.length;lt++){const xt=ve[lt];if(xt===Ze)continue;Ze=xt;const Gt=this.featureIndexArray.get(xt);let At=null;this.loadMatchingFeature(qe,Gt.bucketIndex,Gt.sourceLayerIndex,Gt.featureIndex,q,R.layers,R.availableImages,d,_,S,((Nt,dr,br)=>(At||(At=Dd(Nt)),dr.queryIntersectsFeature({queryGeometry:W,feature:Nt,featureState:br,geometry:At,zoom:this.z,transform:u.transform,pixelsToTileUnits:D,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation}))))}return qe}loadMatchingFeature(u,d,_,S,R,D,q,W,ne,se,ve){const Ne=this.bucketLayerIDs[d];if(D&&!Ne.some((lt=>D.has(lt))))return;const ze=this.sourceLayerCoder.decode(_),qe=this.vtLayers[ze].feature(S);if(R.needGeometry){const lt=Zc(qe,!0);if(!R.filter(new sn(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!R.filter(new sn(this.tileID.overscaledZ),qe))return;const Ze=this.getId(qe,ze);for(let lt=0;lt<Ne.length;lt++){const xt=Ne[lt];if(D&&!D.has(xt))continue;const Gt=W[xt];if(!Gt)continue;let At={};Ze&&se&&(At=se.getState(Gt.sourceLayer||"_geojsonTileLayer",Ze));const Nt=Oe({},ne[xt]);Nt.paint=vM(Nt.paint,Gt.paint,qe,At,q),Nt.layout=vM(Nt.layout,Gt.layout,qe,At,q);const dr=!ve||ve(qe,Gt,At);if(!dr)continue;const br=new gM(qe,this.z,this.x,this.y,Ze);br.layer=Nt;let zr=u[xt];zr===void 0&&(zr=u[xt]=[]),zr.push({featureIndex:S,feature:br,intersectionZ:dr})}}lookupSymbolFeatures(u,d,_,S,R,D,q,W){const ne={};this.loadVTLayers();const se=Wc(R);for(const ve of u)this.loadMatchingFeature(ne,_,S,ve,se,D,q,W,d);return ne}hasLayer(u){for(const d of this.bucketLayerIDs)for(const _ of d)if(u===_)return!0;return!1}getId(u,d){var _;let S=u.id;return this.promoteId&&(S=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof S=="boolean"&&(S=Number(S)),S===void 0&&(!((_=u.properties)===null||_===void 0)&&_.cluster)&&this.promoteId&&(S=Number(u.properties.cluster_id))),S}}function vM(f,u,d,_,S){return Ye(f,((R,D)=>{const q=u instanceof za?u.get(D):null;return q&&q.evaluate?q.evaluate(d,_,S):q}))}function eW(f,u){return u-f}function bM(f,u,d,_,S){const R=[];for(let D=0;D<f.length;D++){const q=f[D];let W;for(let ne=0;ne<q.length-1;ne++){let se=q[ne],ve=q[ne+1];se.x<u&&ve.x<u||(se.x<u?se=new c(u,se.y+(u-se.x)/(ve.x-se.x)*(ve.y-se.y))._round():ve.x<u&&(ve=new c(u,se.y+(u-se.x)/(ve.x-se.x)*(ve.y-se.y))._round()),se.y<d&&ve.y<d||(se.y<d?se=new c(se.x+(d-se.y)/(ve.y-se.y)*(ve.x-se.x),d)._round():ve.y<d&&(ve=new c(se.x+(d-se.y)/(ve.y-se.y)*(ve.x-se.x),d)._round()),se.x>=_&&ve.x>=_||(se.x>=_?se=new c(_,se.y+(_-se.x)/(ve.x-se.x)*(ve.y-se.y))._round():ve.x>=_&&(ve=new c(_,se.y+(_-se.x)/(ve.x-se.x)*(ve.y-se.y))._round()),se.y>=S&&ve.y>=S||(se.y>=S?se=new c(se.x+(S-se.y)/(ve.y-se.y)*(ve.x-se.x),S)._round():ve.y>=S&&(ve=new c(se.x+(S-se.y)/(ve.y-se.y)*(ve.x-se.x),S)._round()),W&&se.equals(W[W.length-1])||(W=[se],R.push(W)),W.push(ve)))))}}return R}He("FeatureIndex",yM,{omit:["rawTileData","sourceLayerCoder"]});class hh extends c{constructor(u,d,_,S){super(u,d),this.angle=_,S!==void 0&&(this.segment=S)}clone(){return new hh(this.x,this.y,this.angle,this.segment)}}function _M(f,u,d,_,S){if(u.segment===void 0||d===0)return!0;let R=u,D=u.segment+1,q=0;for(;q>-d/2;){if(D--,D<0)return!1;q-=f[D].dist(R),R=f[D]}q+=f[D].dist(f[D+1]),D++;const W=[];let ne=0;for(;q<d/2;){const se=f[D],ve=f[D+1];if(!ve)return!1;let Ne=f[D-1].angleTo(se)-se.angleTo(ve);for(Ne=Math.abs((Ne+3*Math.PI)%(2*Math.PI)-Math.PI),W.push({distance:q,angleDelta:Ne}),ne+=Ne;q-W[0].distance>_;)ne-=W.shift().angleDelta;if(ne>S)return!1;D++,q+=se.dist(ve)}return!0}function xM(f){let u=0;for(let d=0;d<f.length-1;d++)u+=f[d].dist(f[d+1]);return u}function wM(f,u,d){return f?.6*u*d:0}function SM(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function tW(f,u,d,_,S,R){const D=wM(d,S,R),q=SM(d,_)*R;let W=0;const ne=xM(f)/2;for(let se=0;se<f.length-1;se++){const ve=f[se],Ne=f[se+1],ze=ve.dist(Ne);if(W+ze>ne){const qe=(ne-W)/ze,Ze=ei.number(ve.x,Ne.x,qe),lt=ei.number(ve.y,Ne.y,qe),xt=new hh(Ze,lt,Ne.angleTo(ve),se);return xt._round(),!D||_M(f,xt,q,D,u)?xt:void 0}W+=ze}}function rW(f,u,d,_,S,R,D,q,W){const ne=wM(_,R,D),se=SM(_,S),ve=se*D,Ne=f[0].x===0||f[0].x===W||f[0].y===0||f[0].y===W;return u-ve<u/4&&(u=ve+u/4),CM(f,Ne?u/2*q%u:(se/2+2*R)*D*q%u,u,ne,d,ve,Ne,!1,W)}function CM(f,u,d,_,S,R,D,q,W){const ne=R/2,se=xM(f);let ve=0,Ne=u-d,ze=[];for(let qe=0;qe<f.length-1;qe++){const Ze=f[qe],lt=f[qe+1],xt=Ze.dist(lt),Gt=lt.angleTo(Ze);for(;Ne+d<ve+xt;){Ne+=d;const At=(Ne-ve)/xt,Nt=ei.number(Ze.x,lt.x,At),dr=ei.number(Ze.y,lt.y,At);if(Nt>=0&&Nt<W&&dr>=0&&dr<W&&Ne-ne>=0&&Ne+ne<=se){const br=new hh(Nt,dr,Gt,qe);br._round(),_&&!_M(f,br,R,_,S)||ze.push(br)}}ve+=xt}return q||ze.length||D||(ze=CM(f,ve/2,d,_,S,R,D,!0,W)),ze}function EM(f,u,d,_){const S=[],R=f.image,D=R.pixelRatio,q=R.paddedRect.w-2,W=R.paddedRect.h-2;let ne={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const se=R.stretchX||[[0,q]],ve=R.stretchY||[[0,W]],Ne=(kr,ai)=>kr+ai[1]-ai[0],ze=se.reduce(Ne,0),qe=ve.reduce(Ne,0),Ze=q-ze,lt=W-qe;let xt=0,Gt=ze,At=0,Nt=qe,dr=0,br=Ze,zr=0,ln=lt;if(R.content&&_){const kr=R.content,ai=kr[2]-kr[0],fi=kr[3]-kr[1];(R.textFitWidth||R.textFitHeight)&&(ne=QA(f)),xt=V1(se,0,kr[0]),At=V1(ve,0,kr[1]),Gt=V1(se,kr[0],kr[2]),Nt=V1(ve,kr[1],kr[3]),dr=kr[0]-xt,zr=kr[1]-At,br=ai-Gt,ln=fi-Nt}const Kr=ne.x1,rn=ne.y1,Bn=ne.x2-Kr,Qr=ne.y2-rn,nn=(kr,ai,fi,Gn)=>{const In=U1(kr.stretch-xt,Gt,Bn,Kr),Fi=G1(kr.fixed-dr,br,kr.stretch,ze),xo=U1(ai.stretch-At,Nt,Qr,rn),ws=G1(ai.fixed-zr,ln,ai.stretch,qe),vl=U1(fi.stretch-xt,Gt,Bn,Kr),ic=G1(fi.fixed-dr,br,fi.stretch,ze),_u=U1(Gn.stretch-At,Nt,Qr,rn),tl=G1(Gn.fixed-zr,ln,Gn.stretch,qe),ho=new c(In,xo),zs=new c(vl,xo),rl=new c(vl,_u),nl=new c(In,_u),eu=new c(Fi/D,ws/D),ac=new c(ic/D,tl/D),js=u*Math.PI/180;if(js){const qs=Math.sin(js),$s=Math.cos(js),ls=[$s,-qs,qs,$s];ho._matMult(ls),zs._matMult(ls),nl._matMult(ls),rl._matMult(ls)}const xu=kr.stretch+kr.fixed,Ss=ai.stretch+ai.fixed;return{tl:ho,tr:zs,bl:nl,br:rl,tex:{x:R.paddedRect.x+1+xu,y:R.paddedRect.y+1+Ss,w:fi.stretch+fi.fixed-xu,h:Gn.stretch+Gn.fixed-Ss},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:eu,pixelOffsetBR:ac,minFontScaleX:br/D/Bn,minFontScaleY:ln/D/Qr,isSDF:d}};if(_&&(R.stretchX||R.stretchY)){const kr=TM(se,Ze,ze),ai=TM(ve,lt,qe);for(let fi=0;fi<kr.length-1;fi++){const Gn=kr[fi],In=kr[fi+1];for(let Fi=0;Fi<ai.length-1;Fi++)S.push(nn(Gn,ai[Fi],In,ai[Fi+1]))}}else S.push(nn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:W+1}));return S}function V1(f,u,d){let _=0;for(const S of f)_+=Math.max(u,Math.min(d,S[1]))-Math.max(u,Math.min(d,S[0]));return _}function TM(f,u,d){const _=[{fixed:-1,stretch:0}];for(const[S,R]of f){const D=_[_.length-1];_.push({fixed:S-D.stretch,stretch:D.stretch}),_.push({fixed:S-D.stretch,stretch:D.stretch+(R-S)})}return _.push({fixed:u+1,stretch:d}),_}function U1(f,u,d,_){return f/u*d+_}function G1(f,u,d,_){return f-u*d/_}He("Anchor",hh);class H1{constructor(u,d,_,S,R,D,q,W,ne,se){var ve;if(this.boxStartIndex=u.length,ne){let Ne=D.top,ze=D.bottom;const qe=D.collisionPadding;qe&&(Ne-=qe[1],ze+=qe[3]);let Ze=ze-Ne;Ze>0&&(Ze=Math.max(10,Ze),this.circleDiameter=Ze)}else{const Ne=!((ve=D.image)===null||ve===void 0)&&ve.content&&(D.image.textFitWidth||D.image.textFitHeight)?QA(D):{x1:D.left,y1:D.top,x2:D.right,y2:D.bottom};Ne.y1=Ne.y1*q-W[0],Ne.y2=Ne.y2*q+W[2],Ne.x1=Ne.x1*q-W[3],Ne.x2=Ne.x2*q+W[1];const ze=D.collisionPadding;if(ze&&(Ne.x1-=ze[0]*q,Ne.y1-=ze[1]*q,Ne.x2+=ze[2]*q,Ne.y2+=ze[3]*q),se){const qe=new c(Ne.x1,Ne.y1),Ze=new c(Ne.x2,Ne.y1),lt=new c(Ne.x1,Ne.y2),xt=new c(Ne.x2,Ne.y2),Gt=se*Math.PI/180;qe._rotate(Gt),Ze._rotate(Gt),lt._rotate(Gt),xt._rotate(Gt),Ne.x1=Math.min(qe.x,Ze.x,lt.x,xt.x),Ne.x2=Math.max(qe.x,Ze.x,lt.x,xt.x),Ne.y1=Math.min(qe.y,Ze.y,lt.y,xt.y),Ne.y2=Math.max(qe.y,Ze.y,lt.y,xt.y)}u.emplaceBack(d.x,d.y,Ne.x1,Ne.y1,Ne.x2,Ne.y2,_,S,R)}this.boxEndIndex=u.length}}class nW{constructor(u=[],d=(_,S)=>_<S?-1:_>S?1:0){if(this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:d,compare:_}=this,S=d[u];for(;u>0;){const R=u-1>>1,D=d[R];if(_(S,D)>=0)break;d[u]=D,u=R}d[u]=S}_down(u){const{data:d,compare:_}=this,S=this.length>>1,R=d[u];for(;u<S;){let D=1+(u<<1);const q=D+1;if(q<this.length&&_(d[q],d[D])<0&&(D=q),_(d[D],R)>=0)break;d[u]=d[D],u=D}d[u]=R}}function iW(f,u=1,d=!1){const _=lp.fromPoints(f[0]),S=Math.min(_.width(),_.height());let R=S/2;const D=new nW([],aW),{minX:q,minY:W,maxX:ne,maxY:se}=_;if(S===0)return new c(q,W);for(let ze=q;ze<ne;ze+=S)for(let qe=W;qe<se;qe+=S)D.push(new Dm(ze+R,qe+R,R,f));let ve=(function(ze){let qe=0,Ze=0,lt=0;const xt=ze[0];for(let Gt=0,At=xt.length,Nt=At-1;Gt<At;Nt=Gt++){const dr=xt[Gt],br=xt[Nt],zr=dr.x*br.y-br.x*dr.y;Ze+=(dr.x+br.x)*zr,lt+=(dr.y+br.y)*zr,qe+=3*zr}return new Dm(Ze/qe,lt/qe,0,ze)})(f),Ne=D.length;for(;D.length;){const ze=D.pop();(ze.d>ve.d||!ve.d)&&(ve=ze,d&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Ne)),ze.max-ve.d<=u||(R=ze.h/2,D.push(new Dm(ze.p.x-R,ze.p.y-R,R,f)),D.push(new Dm(ze.p.x+R,ze.p.y-R,R,f)),D.push(new Dm(ze.p.x-R,ze.p.y+R,R,f)),D.push(new Dm(ze.p.x+R,ze.p.y+R,R,f)),Ne+=4)}return d&&(console.log(`num probes: ${Ne}`),console.log(`best distance: ${ve.d}`)),ve.p}function aW(f,u){return u.max-f.max}function Dm(f,u,d,_){this.p=new c(f,u),this.h=d,this.d=(function(S,R){let D=!1,q=1/0;for(let W=0;W<R.length;W++){const ne=R[W];for(let se=0,ve=ne.length,Ne=ve-1;se<ve;Ne=se++){const ze=ne[se],qe=ne[Ne];ze.y>S.y!=qe.y>S.y&&S.x<(qe.x-ze.x)*(S.y-ze.y)/(qe.y-ze.y)+ze.x&&(D=!D),q=Math.min(q,cA(S,ze,qe))}}return(D?1:-1)*Math.sqrt(q)})(this.p,_),this.max=this.d+this.h*Math.SQRT2}var yl;l.aE=void 0,(yl=l.aE||(l.aE={}))[yl.center=1]="center",yl[yl.left=2]="left",yl[yl.right=3]="right",yl[yl.top=4]="top",yl[yl.bottom=5]="bottom",yl[yl["top-left"]=6]="top-left",yl[yl["top-right"]=7]="top-right",yl[yl["bottom-left"]=8]="bottom-left",yl[yl["bottom-right"]=9]="bottom-right";const Gw=Number.POSITIVE_INFINITY;function PM(f,u){return u[1]!==Gw?(function(d,_,S){let R=0,D=0;switch(_=Math.abs(_),S=Math.abs(S),d){case"top-right":case"top-left":case"top":D=S-7;break;case"bottom-right":case"bottom-left":case"bottom":D=7-S}switch(d){case"top-right":case"bottom-right":case"right":R=-_;break;case"top-left":case"bottom-left":case"left":R=_}return[R,D]})(f,u[0],u[1]):(function(d,_){let S=0,R=0;_<0&&(_=0);const D=_/Math.SQRT2;switch(d){case"top-right":case"top-left":R=D-7;break;case"bottom-right":case"bottom-left":R=7-D;break;case"bottom":R=7-_;break;case"top":R=_-7}switch(d){case"top-right":case"bottom-right":S=-D;break;case"top-left":case"bottom-left":S=D;break;case"left":S=_;break;case"right":S=-_}return[S,R]})(f,u[0])}function IM(f,u,d){var _;const S=f.layout,R=(_=S.get("text-variable-anchor-offset"))===null||_===void 0?void 0:_.evaluate(u,{},d);if(R){const q=R.values,W=[];for(let ne=0;ne<q.length;ne+=2){const se=W[ne]=q[ne],ve=q[ne+1].map((Ne=>Ne*Bs));se.startsWith("top")?ve[1]-=7:se.startsWith("bottom")&&(ve[1]+=7),W[ne+1]=ve}return new gi(W)}const D=S.get("text-variable-anchor");if(D){let q;q=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[S.get("text-radial-offset").evaluate(u,{},d)*Bs,Gw]:S.get("text-offset").evaluate(u,{},d).map((ne=>ne*Bs));const W=[];for(const ne of D)W.push(ne,PM(ne,q));return new gi(W)}return null}function Hw(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oW(f,u,d,_,S,R,D,q,W,ne,se,ve){let Ne=R.textMaxSize.evaluate(u,{});Ne===void 0&&(Ne=D);const ze=f.layers[0].layout,qe=ze.get("icon-offset").evaluate(u,{},se),Ze=AM(d.horizontal),lt=D/24,xt=f.tilePixelRatio*lt,Gt=f.tilePixelRatio*Ne/24,At=f.tilePixelRatio*q,Nt=f.tilePixelRatio*ze.get("symbol-spacing"),dr=ze.get("text-padding")*f.tilePixelRatio,br=(function(fi,Gn,In,Fi=1){const xo=fi.get("icon-padding").evaluate(Gn,{},In),ws=xo&&xo.values;return[ws[0]*Fi,ws[1]*Fi,ws[2]*Fi,ws[3]*Fi]})(ze,u,se,f.tilePixelRatio),zr=ze.get("text-max-angle")/180*Math.PI,ln=ze.get("text-rotation-alignment")!=="viewport"&&ze.get("symbol-placement")!=="point",Kr=ze.get("icon-rotation-alignment")==="map"&&ze.get("symbol-placement")!=="point",rn=ze.get("symbol-placement"),Bn=Nt/2,Qr=ze.get("icon-text-fit");let nn;_&&Qr!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(nn=eM(_,d.vertical,Qr,ze.get("icon-text-fit-padding"),qe,lt)),Ze&&(_=eM(_,Ze,Qr,ze.get("icon-text-fit-padding"),qe,lt)));const kr=se?ve.line.getGranularityForZoomLevel(se.z):1,ai=(fi,Gn)=>{Gn.x<0||Gn.x>=xe||Gn.y<0||Gn.y>=xe||(function(In,Fi,xo,ws,vl,ic,_u,tl,ho,zs,rl,nl,eu,ac,js,xu,Ss,qs,$s,ls,Ka,Kc,Nm,Jc,uW){const Om=In.addToLineVertexArray(Fi,xo);let up,Fm,Bm,zm,DM=0,NM=0,OM=0,FM=0,eS=-1,tS=-1;const yf={};let BM=lh("");if(In.allowVerticalPlacement&&ws.vertical){const Dl=tl.layout.get("text-rotate").evaluate(Ka,{},Jc)+90;Bm=new H1(ho,Fi,zs,rl,nl,ws.vertical,eu,ac,js,Dl),_u&&(zm=new H1(ho,Fi,zs,rl,nl,_u,Ss,qs,js,Dl))}if(vl){const Dl=tl.layout.get("icon-rotate").evaluate(Ka,{}),oc=tl.layout.get("icon-text-fit")!=="none",cp=EM(vl,Dl,Nm,oc),ed=_u?EM(_u,Dl,Nm,oc):void 0;Fm=new H1(ho,Fi,zs,rl,nl,vl,Ss,qs,!1,Dl),DM=4*cp.length;const dp=In.iconSizeData;let Nd=null;dp.kind==="source"?(Nd=[gf*tl.layout.get("icon-size").evaluate(Ka,{})],Nd[0]>dh&&at(`${In.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):dp.kind==="composite"&&(Nd=[gf*Kc.compositeIconSizes[0].evaluate(Ka,{},Jc),gf*Kc.compositeIconSizes[1].evaluate(Ka,{},Jc)],(Nd[0]>dh||Nd[1]>dh)&&at(`${In.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),In.addSymbols(In.icon,cp,Nd,ls,$s,Ka,l.ao.none,Fi,Om.lineStartIndex,Om.lineLength,-1,Jc),eS=In.icon.placedSymbolArray.length-1,ed&&(NM=4*ed.length,In.addSymbols(In.icon,ed,Nd,ls,$s,Ka,l.ao.vertical,Fi,Om.lineStartIndex,Om.lineLength,-1,Jc),tS=In.icon.placedSymbolArray.length-1)}const zM=Object.keys(ws.horizontal);for(const Dl of zM){const oc=ws.horizontal[Dl];if(!up){BM=lh(oc.text);const ed=tl.layout.get("text-rotate").evaluate(Ka,{},Jc);up=new H1(ho,Fi,zs,rl,nl,oc,eu,ac,js,ed)}const cp=oc.positionedLines.length===1;if(OM+=kM(In,Fi,oc,ic,tl,js,Ka,xu,Om,ws.vertical?l.ao.horizontal:l.ao.horizontalOnly,cp?zM:[Dl],yf,eS,Kc,Jc),cp)break}ws.vertical&&(FM+=kM(In,Fi,ws.vertical,ic,tl,js,Ka,xu,Om,l.ao.vertical,["vertical"],yf,tS,Kc,Jc));const cW=up?up.boxStartIndex:In.collisionBoxArray.length,dW=up?up.boxEndIndex:In.collisionBoxArray.length,fW=Bm?Bm.boxStartIndex:In.collisionBoxArray.length,hW=Bm?Bm.boxEndIndex:In.collisionBoxArray.length,pW=Fm?Fm.boxStartIndex:In.collisionBoxArray.length,mW=Fm?Fm.boxEndIndex:In.collisionBoxArray.length,gW=zm?zm.boxStartIndex:In.collisionBoxArray.length,yW=zm?zm.boxEndIndex:In.collisionBoxArray.length;let Qc=-1;const X1=(Dl,oc)=>Dl&&Dl.circleDiameter?Math.max(Dl.circleDiameter,oc):oc;Qc=X1(up,Qc),Qc=X1(Bm,Qc),Qc=X1(Fm,Qc),Qc=X1(zm,Qc);const jM=Qc>-1?1:0;jM&&(Qc*=uW/Bs),In.glyphOffsetArray.length>=Lm.MAX_GLYPHS&&at("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ka.sortKey!==void 0&&In.addToSortKeyRanges(In.symbolInstances.length,Ka.sortKey);const vW=IM(tl,Ka,Jc),[bW,_W]=(function(Dl,oc){const cp=Dl.length,ed=oc?.values;if(ed?.length>0)for(let dp=0;dp<ed.length;dp+=2){const Nd=ed[dp+1];Dl.emplaceBack(l.aE[ed[dp]],Nd[0],Nd[1])}return[cp,Dl.length]})(In.textAnchorOffsets,vW);In.symbolInstances.emplaceBack(Fi.x,Fi.y,yf.right>=0?yf.right:-1,yf.center>=0?yf.center:-1,yf.left>=0?yf.left:-1,yf.vertical||-1,eS,tS,BM,cW,dW,fW,hW,pW,mW,gW,yW,zs,OM,FM,DM,NM,jM,0,eu,Qc,bW,_W)})(f,Gn,fi,d,_,S,nn,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,xt,[dr,dr,dr,dr],ln,W,At,br,Kr,qe,u,R,ne,se,D)};if(rn==="line")for(const fi of bM(u.geometry,0,0,xe,xe)){const Gn=sp(fi,kr),In=rW(Gn,Nt,zr,d.vertical||Ze,_,24,Gt,f.overscaling,xe);for(const Fi of In)Ze&&sW(f,Ze.text,Bn,Fi)||ai(Gn,Fi)}else if(rn==="line-center"){for(const fi of u.geometry)if(fi.length>1){const Gn=sp(fi,kr),In=tW(Gn,zr,d.vertical||Ze,_,24,Gt);In&&ai(Gn,In)}}else if(u.type==="Polygon")for(const fi of ia(u.geometry,0)){const Gn=iW(fi,16);ai(sp(fi[0],kr,!0),new hh(Gn.x,Gn.y,0))}else if(u.type==="LineString")for(const fi of u.geometry){const Gn=sp(fi,kr);ai(Gn,new hh(Gn[0].x,Gn[0].y,0))}else if(u.type==="Point")for(const fi of u.geometry)for(const Gn of fi)ai([Gn],new hh(Gn.x,Gn.y,0))}function kM(f,u,d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe){const Ze=(function(Gt,At,Nt,dr,br,zr,ln,Kr){const rn=dr.layout.get("text-rotate").evaluate(zr,{})*Math.PI/180,Bn=[];for(const Qr of At.positionedLines)for(const nn of Qr.positionedGlyphs){if(!nn.rect)continue;const kr=nn.rect||{};let ai=4,fi=!0,Gn=1,In=0;const Fi=(br||Kr)&&nn.vertical,xo=nn.metrics.advance*nn.scale/2;if(Kr&&At.verticalizable&&(In=Qr.lineOffset/2-(nn.imageName?-(Bs-nn.metrics.width*nn.scale)/2:(nn.scale-1)*Bs)),nn.imageName){const qs=ln[nn.imageName];fi=qs.sdf,Gn=qs.pixelRatio,ai=1/Gn}const ws=br?[nn.x+xo,nn.y]:[0,0];let vl=br?[0,0]:[nn.x+xo+Nt[0],nn.y+Nt[1]-In],ic=[0,0];Fi&&(ic=vl,vl=[0,0]);const _u=nn.metrics.isDoubleResolution?2:1,tl=(nn.metrics.left-ai)*nn.scale-xo+vl[0],ho=(-nn.metrics.top-ai)*nn.scale+vl[1],zs=tl+kr.w/_u*nn.scale/Gn,rl=ho+kr.h/_u*nn.scale/Gn,nl=new c(tl,ho),eu=new c(zs,ho),ac=new c(tl,rl),js=new c(zs,rl);if(Fi){const qs=new c(-xo,xo- -17),$s=-Math.PI/2,ls=12-xo,Ka=new c(22-ls,-(nn.imageName?ls:0)),Kc=new c(...ic);nl._rotateAround($s,qs)._add(Ka)._add(Kc),eu._rotateAround($s,qs)._add(Ka)._add(Kc),ac._rotateAround($s,qs)._add(Ka)._add(Kc),js._rotateAround($s,qs)._add(Ka)._add(Kc)}if(rn){const qs=Math.sin(rn),$s=Math.cos(rn),ls=[$s,-qs,qs,$s];nl._matMult(ls),eu._matMult(ls),ac._matMult(ls),js._matMult(ls)}const xu=new c(0,0),Ss=new c(0,0);Bn.push({tl:nl,tr:eu,bl:ac,br:js,tex:kr,writingMode:At.writingMode,glyphOffset:ws,sectionIndex:nn.sectionIndex,isSDF:fi,pixelOffsetTL:xu,pixelOffsetBR:Ss,minFontScaleX:0,minFontScaleY:0})}return Bn})(0,d,q,S,R,D,_,f.allowVerticalPlacement),lt=f.textSizeData;let xt=null;lt.kind==="source"?(xt=[gf*S.layout.get("text-size").evaluate(D,{})],xt[0]>dh&&at(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(xt=[gf*ze.compositeTextSizes[0].evaluate(D,{},qe),gf*ze.compositeTextSizes[1].evaluate(D,{},qe)],(xt[0]>dh||xt[1]>dh)&&at(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,Ze,xt,q,R,D,ne,u,W.lineStartIndex,W.lineLength,Ne,qe);for(const Gt of se)ve[Gt]=f.text.placedSymbolArray.length-1;return 4*Ze.length}function AM(f){for(const u in f)return f[u];return null}function sW(f,u,d,_){const S=f.compareText;if(u in S){const R=S[u];for(let D=R.length-1;D>=0;D--)if(_.dist(R[D])<d)return!0}else S[u]=[];return S[u].push(_),!1}const MM=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ww{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,_]=new Uint8Array(u,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const S=_>>4;if(S!==1)throw new Error(`Got v${S} data when expected v1.`);const R=MM[15&_];if(!R)throw new Error("Unrecognized array type.");const[D]=new Uint16Array(u,2,1),[q]=new Uint32Array(u,4,1);return new Ww(q,D,R,u)}constructor(u,d=64,_=Float64Array,S){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=_,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const R=MM.indexOf(this.ArrayType),D=2*u*this.ArrayType.BYTES_PER_ELEMENT,q=u*this.IndexArrayType.BYTES_PER_ELEMENT,W=(8-q%8)%8;if(R<0)throw new Error(`Unexpected typed array class: ${_}.`);S&&S instanceof ArrayBuffer?(this.data=S,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+q+W,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+D+q+W),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+q+W,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+R]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=u)}add(u,d){const _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=u,this.coords[this._pos++]=d,_}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Xw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,d,_,S){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:D,nodeSize:q}=this,W=[0,R.length-1,0],ne=[];for(;W.length;){const se=W.pop()||0,ve=W.pop()||0,Ne=W.pop()||0;if(ve-Ne<=q){for(let lt=Ne;lt<=ve;lt++){const xt=D[2*lt],Gt=D[2*lt+1];xt>=u&&xt<=_&&Gt>=d&&Gt<=S&&ne.push(R[lt])}continue}const ze=Ne+ve>>1,qe=D[2*ze],Ze=D[2*ze+1];qe>=u&&qe<=_&&Ze>=d&&Ze<=S&&ne.push(R[ze]),(se===0?u<=qe:d<=Ze)&&(W.push(Ne),W.push(ze-1),W.push(1-se)),(se===0?_>=qe:S>=Ze)&&(W.push(ze+1),W.push(ve),W.push(1-se))}return ne}within(u,d,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:R,nodeSize:D}=this,q=[0,S.length-1,0],W=[],ne=_*_;for(;q.length;){const se=q.pop()||0,ve=q.pop()||0,Ne=q.pop()||0;if(ve-Ne<=D){for(let lt=Ne;lt<=ve;lt++)RM(R[2*lt],R[2*lt+1],u,d)<=ne&&W.push(S[lt]);continue}const ze=Ne+ve>>1,qe=R[2*ze],Ze=R[2*ze+1];RM(qe,Ze,u,d)<=ne&&W.push(S[ze]),(se===0?u-_<=qe:d-_<=Ze)&&(q.push(Ne),q.push(ze-1),q.push(1-se)),(se===0?u+_>=qe:d+_>=Ze)&&(q.push(ze+1),q.push(ve),q.push(1-se))}return W}}function Xw(f,u,d,_,S,R){if(S-_<=d)return;const D=_+S>>1;LM(f,u,D,_,S,R),Xw(f,u,d,_,D-1,1-R),Xw(f,u,d,D+1,S,1-R)}function LM(f,u,d,_,S,R){for(;S>_;){if(S-_>600){const ne=S-_+1,se=d-_+1,ve=Math.log(ne),Ne=.5*Math.exp(2*ve/3),ze=.5*Math.sqrt(ve*Ne*(ne-Ne)/ne)*(se-ne/2<0?-1:1);LM(f,u,d,Math.max(_,Math.floor(d-se*Ne/ne+ze)),Math.min(S,Math.floor(d+(ne-se)*Ne/ne+ze)),R)}const D=u[2*d+R];let q=_,W=S;for(Qy(f,u,_,d),u[2*S+R]>D&&Qy(f,u,_,S);q<W;){for(Qy(f,u,q,W),q++,W--;u[2*q+R]<D;)q++;for(;u[2*W+R]>D;)W--}u[2*_+R]===D?Qy(f,u,_,W):(W++,Qy(f,u,W,S)),W<=d&&(_=W+1),d<=W&&(S=W-1)}}function Qy(f,u,d,_){Yw(f,d,_),Yw(u,2*d,2*_),Yw(u,2*d+1,2*_+1)}function Yw(f,u,d){const _=f[u];f[u]=f[d],f[d]=_}function RM(f,u,d,_){const S=f-d,R=u-_;return S*S+R*R}var Zw;l.cx=void 0,(Zw=l.cx||(l.cx={})).create="create",Zw.load="load",Zw.fullLoad="fullLoad";let W1=null,ev=[];const Kw=1e3/60,Jw="loadTime",Qw="fullLoadTime",lW={mark(f){performance.mark(f)},frame(f){const u=f;W1!=null&&ev.push(u-W1),W1=u},clearMetrics(){W1=null,ev=[],performance.clearMeasures(Jw),performance.clearMeasures(Qw);for(const f in l.cx)performance.clearMarks(l.cx[f])},getPerformanceMetrics(){performance.measure(Jw,l.cx.create,l.cx.load),performance.measure(Qw,l.cx.create,l.cx.fullLoad);const f=performance.getEntriesByName(Jw)[0].duration,u=performance.getEntriesByName(Qw)[0].duration,d=ev.length,_=1/(ev.reduce(((R,D)=>R+D),0)/d/1e3),S=ev.filter((R=>R>Kw)).reduce(((R,D)=>R+(D-Kw)/Kw),0);return{loadTime:f,fullLoadTime:u,fps:_,percentDroppedFrames:S/(d+S)*100,totalFrames:d}}};l.$=xe,l.A=F,l.B=function([f,u,d]){return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(d),y:f*Math.sin(u)*Math.sin(d),z:f*Math.cos(d)}},l.C=ei,l.D=hn,l.E=Er,l.F=sn,l.G=K,l.H=function(f){if(Wt==null){const u=f.navigator?f.navigator.userAgent:null;Wt=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Wt},l.I=Dw,l.J=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new JH((()=>this.process())),this.subscription=yr(this.target,"message",(d=>this.receive(d)),!1),this.globalScope=Ht(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise(((d,_)=>{const S=Math.round(1e18*Math.random()).toString(36).substring(0,10),R=u?yr(u.signal,"abort",(()=>{R?.unsubscribe(),delete this.resolveRejects[S];const W={id:S,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(W)}),QH):null;this.resolveRejects[S]={resolve:W=>{R?.unsubscribe(),d(W)},reject:W=>{R?.unsubscribe(),_(W)}};const D=[],q=Object.assign(Object.assign({},f),{id:S,sourceMapId:this.mapId,origin:location.origin,data:hr(f.data,D)});this.target.postMessage(q,{transfer:D})}))}receive(f){const u=f.data,d=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[d];const _=this.abortControllers[d];return delete this.abortControllers[d],void(_&&_.abort())}if(Ht(self)||u.mustQueue)return this.tasks[d]=u,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const S=this.resolveRejects[f];return delete this.resolveRejects[f],S?void(u.error?S.reject(wt(u.error)):S.resolve(wt(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=wt(u.data),_=new AbortController;this.abortControllers[f]=_;try{const S=yield this.messageHandlers[u.type](u.sourceMapId,d,_);this.completeTask(f,null,S)}catch(S){this.completeTask(f,S)}}))}completeTask(f,u,d){const _=[];delete this.abortControllers[f];const S={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?hr(u):null,data:hr(d,_)};this.target.postMessage(S,{transfer:_})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.K=Ue,l.L=function(){var f=new F(16);return F!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},l.M=function(f,u,d){var _,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze=d[0],lt=d[1],xt=d[2];return u===f?(f[12]=u[0]*Ze+u[4]*lt+u[8]*xt+u[12],f[13]=u[1]*Ze+u[5]*lt+u[9]*xt+u[13],f[14]=u[2]*Ze+u[6]*lt+u[10]*xt+u[14],f[15]=u[3]*Ze+u[7]*lt+u[11]*xt+u[15]):(S=u[1],R=u[2],D=u[3],q=u[4],W=u[5],ne=u[6],se=u[7],ve=u[8],Ne=u[9],ze=u[10],qe=u[11],f[0]=_=u[0],f[1]=S,f[2]=R,f[3]=D,f[4]=q,f[5]=W,f[6]=ne,f[7]=se,f[8]=ve,f[9]=Ne,f[10]=ze,f[11]=qe,f[12]=_*Ze+q*lt+ve*xt+u[12],f[13]=S*Ze+W*lt+Ne*xt+u[13],f[14]=R*Ze+ne*lt+ze*xt+u[14],f[15]=D*Ze+se*lt+qe*xt+u[15]),f},l.N=function(f,u,d){var _=d[0],S=d[1],R=d[2];return f[0]=u[0]*_,f[1]=u[1]*_,f[2]=u[2]*_,f[3]=u[3]*_,f[4]=u[4]*S,f[5]=u[5]*S,f[6]=u[6]*S,f[7]=u[7]*S,f[8]=u[8]*R,f[9]=u[9]*R,f[10]=u[10]*R,f[11]=u[11]*R,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},l.O=function(f,u,d){var _=u[0],S=u[1],R=u[2],D=u[3],q=u[4],W=u[5],ne=u[6],se=u[7],ve=u[8],Ne=u[9],ze=u[10],qe=u[11],Ze=u[12],lt=u[13],xt=u[14],Gt=u[15],At=d[0],Nt=d[1],dr=d[2],br=d[3];return f[0]=At*_+Nt*q+dr*ve+br*Ze,f[1]=At*S+Nt*W+dr*Ne+br*lt,f[2]=At*R+Nt*ne+dr*ze+br*xt,f[3]=At*D+Nt*se+dr*qe+br*Gt,f[4]=(At=d[4])*_+(Nt=d[5])*q+(dr=d[6])*ve+(br=d[7])*Ze,f[5]=At*S+Nt*W+dr*Ne+br*lt,f[6]=At*R+Nt*ne+dr*ze+br*xt,f[7]=At*D+Nt*se+dr*qe+br*Gt,f[8]=(At=d[8])*_+(Nt=d[9])*q+(dr=d[10])*ve+(br=d[11])*Ze,f[9]=At*S+Nt*W+dr*Ne+br*lt,f[10]=At*R+Nt*ne+dr*ze+br*xt,f[11]=At*D+Nt*se+dr*qe+br*Gt,f[12]=(At=d[12])*_+(Nt=d[13])*q+(dr=d[14])*ve+(br=d[15])*Ze,f[13]=At*S+Nt*W+dr*Ne+br*lt,f[14]=At*R+Nt*ne+dr*ze+br*xt,f[15]=At*D+Nt*se+dr*qe+br*Gt,f},l.P=c,l.Q=function(f,u){const d={};for(let _=0;_<u.length;_++){const S=u[_];S in f&&(d[S]=f[S])}return d},l.R=bu,l.S=fh,l.T=Sw,l.U=cM,l.V=uM,l.W=k,l.X=M,l.Y=sr,l.Z=nc,l._=a,l.a=be,l.a$=ie,l.a0=function(f,u){var d,_,S,R,D;if(!f)return u??{};if(!u)return f;let q=Object.assign({},f);if(u.removeAll&&(q={removeAll:!0}),u.remove){const W=new Set(u.remove);q.add&&(q.add=q.add.filter((se=>!W.has(se.id)))),q.update&&(q.update=q.update.filter((se=>!W.has(se.id))));const ne=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map((se=>se.id)));u.remove=u.remove.filter((se=>!ne.has(se)))}if(u.remove){const W=new Set(q.remove?q.remove.concat(u.remove):u.remove);q.remove=Array.from(W.values())}if(u.add){const W=q.add?q.add.concat(u.add):u.add,ne=new Map(W.map((se=>[se.id,se])));q.add=Array.from(ne.values())}if(u.update){const W=new Map((_=q.update)===null||_===void 0?void 0:_.map((ne=>[ne.id,ne])));for(const ne of u.update){const se=(S=W.get(ne.id))!==null&&S!==void 0?S:{id:ne.id};ne.newGeometry&&(se.newGeometry=ne.newGeometry),ne.addOrUpdateProperties&&(se.addOrUpdateProperties=((R=se.addOrUpdateProperties)!==null&&R!==void 0?R:[]).concat(ne.addOrUpdateProperties)),ne.removeProperties&&(se.removeProperties=((D=se.removeProperties)!==null&&D!==void 0?D:[]).concat(ne.removeProperties)),ne.removeAllProperties&&(se.removeAllProperties=!0),W.set(ne.id,se)}q.update=Array.from(W.values())}return q.remove&&q.add&&(q.remove=q.remove.filter((W=>q.add.findIndex((ne=>ne.id===W))===-1))),q},l.a1=Ky,l.a2=lp,l.a3=25,l.a4=Uw,l.a5=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((d=>{u.onloadstart=()=>{d(u)};for(const _ of f){const S=window.document.createElement("source");Lt(_)||(u.crossOrigin="Anonymous"),S.src=_,u.appendChild(S)}}))},l.a6=mt,l.a7=function(){return it++},l.a8=Ce,l.a9=Lm,l.aA=function(f){let u=1/0,d=1/0,_=-1/0,S=-1/0;for(const R of f)u=Math.min(u,R.x),d=Math.min(d,R.y),_=Math.max(_,R.x),S=Math.max(S,R.y);return[u,d,_,S]},l.aB=Bs,l.aC=Ee,l.aD=function(f,u,d,_,S=!1){if(!d[0]&&!d[1])return[0,0];const R=S?_==="map"?-f.bearingInRadians:0:_==="viewport"?f.bearingInRadians:0;if(R){const D=Math.sin(R),q=Math.cos(R);d=[d[0]*q-d[1]*D,d[0]*D+d[1]*q]}return[S?d[0]:Ee(u,d[0],f.zoom),S?d[1]:Ee(u,d[1],f.zoom)]},l.aF=Fw,l.aG=Hw,l.aH=Ow,l.aI=Ww,l.aJ=hi,l.aK=F1,l.aL=Tt,l.aM=ii,l.aN=ea,l.aO=$e,l.aP=Jt,l.aQ=fM,l.aR=ae,l.aS=Y,l.aT=function(f){var u=new F(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},l.aU=function(f,u,d){return f[0]=u[0]-d[0],f[1]=u[1]-d[1],f[2]=u[2]-d[2],f},l.aV=function(f,u){var d=u[0],_=u[1],S=u[2],R=d*d+_*_+S*S;return R>0&&(R=1/Math.sqrt(R)),f[0]=u[0]*R,f[1]=u[1]*R,f[2]=u[2]*R,f},l.aW=ee,l.aX=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},l.aY=function(f,u,d){return f[0]=u[0]*d[0],f[1]=u[1]*d[1],f[2]=u[2]*d[2],f[3]=u[3]*d[3],f},l.aZ=U,l.a_=function(f,u,d){const _=u[0]*d[0]+u[1]*d[1]+u[2]*d[2];return _===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/_},l.aa=Wc,l.ab=Zc,l.ac=gM,l.ad=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,_,S,R)=>{const D=S||R;return u[_]=!D||D.toLowerCase(),""})),u["max-age"]){const d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u},l.ae=pr,l.af=function(f){return Math.pow(2,f)},l.ag=$,l.ah=Re,l.ai=85.051129,l.aj=dM,l.ak=function(f){return Math.log(f)/Math.LN2},l.al=function(f){var u=f[0],d=f[1];return u*u+d*d},l.am=function(f,u){const d=[];for(const _ in f)_ in u||d.push(_);return d},l.an=function(f,u){let d=0,_=0;if(f.kind==="constant")_=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:S,minZoom:R,maxZoom:D}=f,q=S?Re(pn.interpolationFactor(S,u,R,D),0,1):0;f.kind==="camera"?_=ei.number(f.minSize,f.maxSize,q):d=q}return{uSizeT:d,uSize:_}},l.ap=function(f,{uSize:u,uSizeT:d},{lowerSize:_,upperSize:S}){return f.kind==="source"?_/gf:f.kind==="composite"?ei.number(_/gf,S/gf,d):u},l.aq=function(f,u){var d=u[0],_=u[1],S=u[2],R=u[3],D=u[4],q=u[5],W=u[6],ne=u[7],se=u[8],ve=u[9],Ne=u[10],ze=u[11],qe=u[12],Ze=u[13],lt=u[14],xt=u[15],Gt=d*q-_*D,At=d*W-S*D,Nt=d*ne-R*D,dr=_*W-S*q,br=_*ne-R*q,zr=S*ne-R*W,ln=se*Ze-ve*qe,Kr=se*lt-Ne*qe,rn=se*xt-ze*qe,Bn=ve*lt-Ne*Ze,Qr=ve*xt-ze*Ze,nn=Ne*xt-ze*lt,kr=Gt*nn-At*Qr+Nt*Bn+dr*rn-br*Kr+zr*ln;return kr?(f[0]=(q*nn-W*Qr+ne*Bn)*(kr=1/kr),f[1]=(S*Qr-_*nn-R*Bn)*kr,f[2]=(Ze*zr-lt*br+xt*dr)*kr,f[3]=(Ne*br-ve*zr-ze*dr)*kr,f[4]=(W*rn-D*nn-ne*Kr)*kr,f[5]=(d*nn-S*rn+R*Kr)*kr,f[6]=(lt*Nt-qe*zr-xt*At)*kr,f[7]=(se*zr-Ne*Nt+ze*At)*kr,f[8]=(D*Qr-q*rn+ne*ln)*kr,f[9]=(_*rn-d*Qr-R*ln)*kr,f[10]=(qe*br-Ze*Nt+xt*Gt)*kr,f[11]=(ve*Nt-se*br-ze*Gt)*kr,f[12]=(q*Kr-D*Bn-W*ln)*kr,f[13]=(d*Bn-_*Kr+S*ln)*kr,f[14]=(Ze*At-qe*dr-lt*Gt)*kr,f[15]=(se*dr-ve*At+Ne*Gt)*kr,f):null},l.ar=Me,l.as=function(f){var u=f[0],d=f[1];return Math.sqrt(u*u+d*d)},l.at=function(f){return f[0]=0,f[1]=0,f},l.au=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f},l.av=Bw,l.aw=oe,l.ax=function(f,u,d,_){const S=u.y-f.y,R=u.x-f.x,D=_.y-d.y,q=_.x-d.x,W=D*R-q*S;if(W===0)return null;const ne=(q*(f.y-d.y)-D*(f.x-d.x))/W;return new c(f.x+ne*R,f.y+ne*S)},l.ay=bM,l.az=lA,l.b=zt,l.b$=class extends A{},l.b0=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f[3]=u[3]*d,f},l.b1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},l.b2=pM,l.b3=Rm,l.b4=function(f,u,d,_,S){var R=1/Math.tan(u/2);if(f[0]=R/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=R,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,S!=null&&S!==1/0){var D=1/(_-S);f[10]=(S+_)*D,f[14]=2*S*_*D}else f[10]=-1,f[14]=-2*_;return f},l.b5=function(f){var u=new F(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},l.b6=function(f,u,d){var _=Math.sin(d),S=Math.cos(d),R=u[0],D=u[1],q=u[2],W=u[3],ne=u[4],se=u[5],ve=u[6],Ne=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=R*S+ne*_,f[1]=D*S+se*_,f[2]=q*S+ve*_,f[3]=W*S+Ne*_,f[4]=ne*S-R*_,f[5]=se*S-D*_,f[6]=ve*S-q*_,f[7]=Ne*S-W*_,f},l.b7=function(f,u,d){var _=Math.sin(d),S=Math.cos(d),R=u[4],D=u[5],q=u[6],W=u[7],ne=u[8],se=u[9],ve=u[10],Ne=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=R*S+ne*_,f[5]=D*S+se*_,f[6]=q*S+ve*_,f[7]=W*S+Ne*_,f[8]=ne*S-R*_,f[9]=se*S-D*_,f[10]=ve*S-q*_,f[11]=Ne*S-W*_,f},l.b8=function(){const f=new Float32Array(16);return $(f),f},l.b9=function(){const f=new Float64Array(16);return $(f),f},l.bA=function(f,u){const d=Ae(f,360),_=Ae(u,360),S=_-d,R=_>d?S-360:S+360;return Math.abs(S)<Math.abs(R)?S:R},l.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},l.bC=function(f,u,d,_){const S=Math.sqrt(f*f+u*u),R=Math.sqrt(d*d+_*_);f/=S,u/=S,d/=R,_/=R;const D=Math.acos(f*d+u*_);return-u*d+f*_>0?D:-D},l.bD=function(f,u){const d=Ae(f,2*Math.PI),_=Ae(u,2*Math.PI);return Math.min(Math.abs(d-_),Math.abs(d-_+2*Math.PI),Math.abs(d-_-2*Math.PI))},l.bE=function(){const f={},u=bt.$version;for(const d in bt.$root){const _=bt.$root[d];if(_.required){let S=null;S=d==="version"?u:_.type==="array"?[]:{},S!=null&&(f[d]=S)}}return f},l.bF=Qt,l.bG=ot,l.bH=function f(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(let _=0;_<u.length;_++)if(!f(u[_],d[_]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(const _ in u)if(!f(u[_],d[_]))return!1;return!0}return u===d},l.bI=function(f){f=f.slice();const u=Object.create(null);for(let d=0;d<f.length;d++)u[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=Dr(f[d],u[f[d].ref]));return f},l.bJ=function(f){if(f.type==="custom")return new KH(f);switch(f.type){case"background":return new XH(f);case"circle":return new RG(f);case"color-relief":return new zG(f);case"fill":return new eH(f);case"fill-extrusion":return new dH(f);case"heatmap":return new NG(f);case"hillshade":return new FG(f);case"line":return new vH(f);case"raster":return new ZH(f);case"symbol":return new $1(f)}},l.bK=Ie,l.bL=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let d=[];try{if(!jr(f.version,u.version))return[{command:"setStyle",args:[u]}];jr(f.center,u.center)||d.push({command:"setCenter",args:[u.center]}),jr(f.state,u.state)||d.push({command:"setGlobalState",args:[u.state]}),jr(f.centerAltitude,u.centerAltitude)||d.push({command:"setCenterAltitude",args:[u.centerAltitude]}),jr(f.zoom,u.zoom)||d.push({command:"setZoom",args:[u.zoom]}),jr(f.bearing,u.bearing)||d.push({command:"setBearing",args:[u.bearing]}),jr(f.pitch,u.pitch)||d.push({command:"setPitch",args:[u.pitch]}),jr(f.roll,u.roll)||d.push({command:"setRoll",args:[u.roll]}),jr(f.sprite,u.sprite)||d.push({command:"setSprite",args:[u.sprite]}),jr(f.glyphs,u.glyphs)||d.push({command:"setGlyphs",args:[u.glyphs]}),jr(f.transition,u.transition)||d.push({command:"setTransition",args:[u.transition]}),jr(f.light,u.light)||d.push({command:"setLight",args:[u.light]}),jr(f.terrain,u.terrain)||d.push({command:"setTerrain",args:[u.terrain]}),jr(f.sky,u.sky)||d.push({command:"setSky",args:[u.sky]}),jr(f.projection,u.projection)||d.push({command:"setProjection",args:[u.projection]});const _={},S=[];(function(D,q,W,ne){let se;for(se in q=q||{},D=D||{})Object.prototype.hasOwnProperty.call(D,se)&&(Object.prototype.hasOwnProperty.call(q,se)||Hn(se,W,ne));for(se in q)Object.prototype.hasOwnProperty.call(q,se)&&(Object.prototype.hasOwnProperty.call(D,se)?jr(D[se],q[se])||(D[se].type==="geojson"&&q[se].type==="geojson"&&Wn(D,q,se)?Ur(W,{command:"setGeoJSONSourceData",args:[se,q[se].data]}):en(se,q,W,ne)):nr(se,q,W))})(f.sources,u.sources,S,_);const R=[];f.layers&&f.layers.forEach((D=>{"source"in D&&_[D.source]?d.push({command:"removeLayer",args:[D.id]}):R.push(D)})),d=d.concat(S),(function(D,q,W){q=q||[];const ne=(D=D||[]).map(Be),se=q.map(Be),ve=D.reduce(gt,{}),Ne=q.reduce(gt,{}),ze=ne.slice(),qe=Object.create(null);let Ze,lt,xt,Gt,At;for(let Nt=0,dr=0;Nt<ne.length;Nt++)Ze=ne[Nt],Object.prototype.hasOwnProperty.call(Ne,Ze)?dr++:(Ur(W,{command:"removeLayer",args:[Ze]}),ze.splice(ze.indexOf(Ze,dr),1));for(let Nt=0,dr=0;Nt<se.length;Nt++)Ze=se[se.length-1-Nt],ze[ze.length-1-Nt]!==Ze&&(Object.prototype.hasOwnProperty.call(ve,Ze)?(Ur(W,{command:"removeLayer",args:[Ze]}),ze.splice(ze.lastIndexOf(Ze,ze.length-dr),1)):dr++,Gt=ze[ze.length-Nt],Ur(W,{command:"addLayer",args:[Ne[Ze],Gt]}),ze.splice(ze.length-Nt,0,Ze),qe[Ze]=!0);for(let Nt=0;Nt<se.length;Nt++)if(Ze=se[Nt],lt=ve[Ze],xt=Ne[Ze],!qe[Ze]&&!jr(lt,xt))if(jr(lt.source,xt.source)&&jr(lt["source-layer"],xt["source-layer"])&&jr(lt.type,xt.type)){for(At in Pe(lt.layout,xt.layout,W,Ze,null,"setLayoutProperty"),Pe(lt.paint,xt.paint,W,Ze,null,"setPaintProperty"),jr(lt.filter,xt.filter)||Ur(W,{command:"setFilter",args:[Ze,xt.filter]}),jr(lt.minzoom,xt.minzoom)&&jr(lt.maxzoom,xt.maxzoom)||Ur(W,{command:"setLayerZoomRange",args:[Ze,xt.minzoom,xt.maxzoom]}),lt)Object.prototype.hasOwnProperty.call(lt,At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?Pe(lt[At],xt[At],W,Ze,At.slice(6),"setPaintProperty"):jr(lt[At],xt[At])||Ur(W,{command:"setLayerProperty",args:[Ze,At,xt[At]]}));for(At in xt)Object.prototype.hasOwnProperty.call(xt,At)&&!Object.prototype.hasOwnProperty.call(lt,At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?Pe(lt[At],xt[At],W,Ze,At.slice(6),"setPaintProperty"):jr(lt[At],xt[At])||Ur(W,{command:"setLayerProperty",args:[Ze,At,xt[At]]}))}else Ur(W,{command:"removeLayer",args:[Ze]}),Gt=ze[ze.lastIndexOf(Ze)+1],Ur(W,{command:"addLayer",args:[xt,Gt]})})(R,u.layers,d)}catch(_){console.warn("Unable to compute style diff:",_),d=[{command:"setStyle",args:[u]}]}return d},l.bM=function(f){const u=[],d=f.id;return d===void 0&&u.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),u},l.bN=Ye,l.bO=rt,l.bP=class extends Rl{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},l.bQ=xs,l.bR=class extends Rl{constructor(f,u){super(f,u),this.current=Lu}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},l.bS=os,l.bT=class extends Rl{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},l.bU=class extends Rl{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},l.bV=N,l.bW=function(f,u){var d=Math.sin(u),_=Math.cos(u);return f[0]=_,f[1]=d,f[2]=0,f[3]=-d,f[4]=_,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},l.bX=function(f,u,d){var _=u[0],S=u[1],R=u[2];return f[0]=_*d[0]+S*d[3]+R*d[6],f[1]=_*d[1]+S*d[4]+R*d[7],f[2]=_*d[2]+S*d[5]+R*d[8],f},l.bY=function(f,u,d,_,S,R,D){var q=1/(u-d),W=1/(_-S),ne=1/(R-D);return f[0]=-2*q,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*W,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*ne,f[11]=0,f[12]=(u+d)*q,f[13]=(S+_)*W,f[14]=(D+R)*ne,f[15]=1,f},l.bZ=class extends Rl{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)u[4*d]=f[d].r,u[4*d+1]=f[d].g,u[4*d+2]=f[d].b,u[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,u)}}},l.b_=class extends Rl{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(f);this.gl.uniform1fv(this.location,u)}}},l.ba=function(){return new Float64Array(16)},l.bb=function(f,u,d){const _=new Float64Array(4);return de(_,f,u-90,d),_},l.bc=function(f,u,d,_){var S,R,D,q,W,ne=u[0],se=u[1],ve=u[2],Ne=u[3],ze=d[0],qe=d[1],Ze=d[2],lt=d[3];return(R=ne*ze+se*qe+ve*Ze+Ne*lt)<0&&(R=-R,ze=-ze,qe=-qe,Ze=-Ze,lt=-lt),1-R>O?(S=Math.acos(R),D=Math.sin(S),q=Math.sin((1-_)*S)/D,W=Math.sin(_*S)/D):(q=1-_,W=_),f[0]=q*ne+W*ze,f[1]=q*se+W*qe,f[2]=q*ve+W*Ze,f[3]=q*Ne+W*lt,f},l.bd=function(f){const u=new Float64Array(9);var d,_,S,R,D,q,W,ne,se,ve,Ne,ze,qe,Ze,lt,xt,Gt,At;ve=(S=(_=f)[0])*(W=S+S),Ne=(R=_[1])*W,qe=(D=_[2])*W,Ze=D*(ne=R+R),xt=(q=_[3])*W,Gt=q*ne,At=q*(se=D+D),(d=u)[0]=1-(ze=R*ne)-(lt=D*se),d[3]=Ne-At,d[6]=qe+Gt,d[1]=Ne+At,d[4]=1-ve-lt,d[7]=Ze-xt,d[2]=qe-Gt,d[5]=Ze+xt,d[8]=1-ve-ze;const Nt=Jt(-Math.asin(Re(u[2],-1,1)));let dr,br;return Math.hypot(u[5],u[8])<.001?(dr=0,br=-Jt(Math.atan2(u[3],u[4]))):(dr=Jt(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),br=Jt(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:dr,pitch:Nt+90,bearing:br}},l.be=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},l.bf=Sr,l.bg=Ld,l.bh=Im,l.bi=Gy,l.bj=Pm,l.bk=fe,l.bl=Se,l.bm=si,l.bn=function(f,u,d,_,S){return fe(_,S,Re((f-u)/(d-u),0,1))},l.bo=Ae,l.bp=function(){return new Float64Array(3)},l.bq=function(f,u,d,_){return f[0]=u[0]+d[0]*_,f[1]=u[1]+d[1]*_,f[2]=u[2]+d[2]*_,f},l.br=de,l.bs=function(f,u,d){var _=d[0],S=d[1],R=d[2],D=d[3],q=u[0],W=u[1],ne=u[2],se=S*ne-R*W,ve=R*q-_*ne,Ne=_*W-S*q;return f[0]=q+D*(se+=se)+S*(Ne+=Ne)-R*(ve+=ve),f[1]=W+D*ve+R*se-_*Ne,f[2]=ne+D*Ne+_*ve-S*se,f},l.bt=function(f,u,d){const _=(S=[f[0],f[1],f[2],u[0],u[1],u[2],d[0],d[1],d[2]])[0]*((se=S[8])*(D=S[4])-(q=S[5])*(ne=S[7]))+S[1]*(-se*(R=S[3])+q*(W=S[6]))+S[2]*(ne*R-D*W);var S,R,D,q,W,ne,se;if(_===0)return null;const ve=ee([],[u[0],u[1],u[2]],[d[0],d[1],d[2]]),Ne=ee([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),ze=ee([],[f[0],f[1],f[2]],[u[0],u[1],u[2]]),qe=ae([],ve,-f[3]);return Y(qe,qe,ae([],Ne,-u[3])),Y(qe,qe,ae([],ze,-d[3])),ae(qe,qe,1/_),qe},l.bu=$w,l.bv=function(){return new Float64Array(4)},l.bw=function(f,u,d,_){var S=[],R=[];return S[0]=u[0]-d[0],S[1]=u[1]-d[1],S[2]=u[2]-d[2],R[0]=S[0]*Math.cos(_)-S[1]*Math.sin(_),R[1]=S[0]*Math.sin(_)+S[1]*Math.cos(_),R[2]=S[2],f[0]=R[0]+d[0],f[1]=R[1]+d[1],f[2]=R[2]+d[2],f},l.bx=function(f,u,d,_){var S=[],R=[];return S[0]=u[0]-d[0],S[1]=u[1]-d[1],S[2]=u[2]-d[2],R[0]=S[0],R[1]=S[1]*Math.cos(_)-S[2]*Math.sin(_),R[2]=S[1]*Math.sin(_)+S[2]*Math.cos(_),f[0]=R[0]+d[0],f[1]=R[1]+d[1],f[2]=R[2]+d[2],f},l.by=function(f,u,d,_){var S=[],R=[];return S[0]=u[0]-d[0],S[1]=u[1]-d[1],S[2]=u[2]-d[2],R[0]=S[2]*Math.sin(_)+S[0]*Math.cos(_),R[1]=S[1],R[2]=S[2]*Math.cos(_)-S[0]*Math.sin(_),f[0]=R[0]+d[0],f[1]=R[1]+d[1],f[2]=R[2]+d[2],f},l.bz=function(f,u,d){var _=Math.sin(d),S=Math.cos(d),R=u[0],D=u[1],q=u[2],W=u[3],ne=u[8],se=u[9],ve=u[10],Ne=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=R*S-ne*_,f[1]=D*S-se*_,f[2]=q*S-ve*_,f[3]=W*S-Ne*_,f[8]=R*_+ne*S,f[9]=D*_+se*S,f[10]=q*_+ve*S,f[11]=W*_+Ne*S,f},l.c=nt,l.c0=wH,l.c1=class extends h{},l.c2=ww,l.c3=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},l.c4=vA,l.c5=function(f,u,d){var _=u[0],S=u[1],R=u[2],D=d[3]*_+d[7]*S+d[11]*R+d[15];return f[0]=(d[0]*_+d[4]*S+d[8]*R+d[12])/(D=D||1),f[1]=(d[1]*_+d[5]*S+d[9]*R+d[13])/D,f[2]=(d[2]*_+d[6]*S+d[10]*R+d[14])/D,f},l.c6=class extends el{},l.c7=class extends ce{},l.c8=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},l.c9=function(f,u){var d=f[0],_=f[1],S=f[2],R=f[3],D=f[4],q=f[5],W=f[6],ne=f[7],se=f[8],ve=f[9],Ne=f[10],ze=f[11],qe=f[12],Ze=f[13],lt=f[14],xt=f[15],Gt=u[0],At=u[1],Nt=u[2],dr=u[3],br=u[4],zr=u[5],ln=u[6],Kr=u[7],rn=u[8],Bn=u[9],Qr=u[10],nn=u[11],kr=u[12],ai=u[13],fi=u[14],Gn=u[15];return Math.abs(d-Gt)<=O*Math.max(1,Math.abs(d),Math.abs(Gt))&&Math.abs(_-At)<=O*Math.max(1,Math.abs(_),Math.abs(At))&&Math.abs(S-Nt)<=O*Math.max(1,Math.abs(S),Math.abs(Nt))&&Math.abs(R-dr)<=O*Math.max(1,Math.abs(R),Math.abs(dr))&&Math.abs(D-br)<=O*Math.max(1,Math.abs(D),Math.abs(br))&&Math.abs(q-zr)<=O*Math.max(1,Math.abs(q),Math.abs(zr))&&Math.abs(W-ln)<=O*Math.max(1,Math.abs(W),Math.abs(ln))&&Math.abs(ne-Kr)<=O*Math.max(1,Math.abs(ne),Math.abs(Kr))&&Math.abs(se-rn)<=O*Math.max(1,Math.abs(se),Math.abs(rn))&&Math.abs(ve-Bn)<=O*Math.max(1,Math.abs(ve),Math.abs(Bn))&&Math.abs(Ne-Qr)<=O*Math.max(1,Math.abs(Ne),Math.abs(Qr))&&Math.abs(ze-nn)<=O*Math.max(1,Math.abs(ze),Math.abs(nn))&&Math.abs(qe-kr)<=O*Math.max(1,Math.abs(qe),Math.abs(kr))&&Math.abs(Ze-ai)<=O*Math.max(1,Math.abs(Ze),Math.abs(ai))&&Math.abs(lt-fi)<=O*Math.max(1,Math.abs(lt),Math.abs(fi))&&Math.abs(xt-Gn)<=O*Math.max(1,Math.abs(xt),Math.abs(Gn))},l.cA=function(f,u){be.REGISTERED_PROTOCOLS[f]=u},l.cB=function(f){delete be.REGISTERED_PROTOCOLS[f]},l.cC=function(f,u){const d={};for(let S=0;S<f.length;S++){const R=u&&u[f[S].id]||Fy(f[S]);u&&(u[f[S].id]=R);let D=d[R];D||(D=d[R]=[]),D.push(f[S])}const _=[];for(const S in d)_.push(d[S]);return _},l.cD=He,l.cE=mM,l.cF=yM,l.cG=WA,l.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=xe/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],d=u.layout,_=u._unevaluatedLayout._values,S={layoutIconSize:_["icon-size"].possiblyEvaluate(new sn(f.bucket.zoom+1),f.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new sn(f.bucket.zoom+1),f.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new sn(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:ne,maxZoom:se}=f.bucket.textSizeData;S.compositeTextSizes=[_["text-size"].possiblyEvaluate(new sn(ne),f.canonical),_["text-size"].possiblyEvaluate(new sn(se),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:ne,maxZoom:se}=f.bucket.iconSizeData;S.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new sn(ne),f.canonical),_["icon-size"].possiblyEvaluate(new sn(se),f.canonical)]}const R=d.get("text-line-height")*Bs,D=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",q=d.get("text-keep-upright"),W=d.get("text-size");for(const ne of f.bucket.features){const se=d.get("text-font").evaluate(ne,{},f.canonical).join(","),ve=W.evaluate(ne,{},f.canonical),Ne=S.layoutTextSize.evaluate(ne,{},f.canonical),ze=S.layoutIconSize.evaluate(ne,{},f.canonical),qe={horizontal:{},vertical:void 0},Ze=ne.text;let lt,xt=[0,0];if(Ze){const Nt=Ze.toString(),dr=d.get("text-letter-spacing").evaluate(ne,{},f.canonical)*Bs,br=mr(Nt)?dr:0,zr=d.get("text-anchor").evaluate(ne,{},f.canonical),ln=IM(u,ne,f.canonical);if(!ln){const Qr=d.get("text-radial-offset").evaluate(ne,{},f.canonical);xt=Qr?PM(zr,[Qr*Bs,Gw]):d.get("text-offset").evaluate(ne,{},f.canonical).map((nn=>nn*Bs))}let Kr=D?"center":d.get("text-justify").evaluate(ne,{},f.canonical);const rn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(ne,{},f.canonical)*Bs:1/0,Bn=()=>{f.bucket.allowVerticalPlacement&&Tr(Nt)&&(qe.vertical=z1(Ze,f.glyphMap,f.glyphPositions,f.imagePositions,se,rn,R,zr,"left",br,xt,l.ao.vertical,!0,Ne,ve))};if(!D&&ln){const Qr=new Set;if(Kr==="auto")for(let kr=0;kr<ln.values.length;kr+=2)Qr.add(Hw(ln.values[kr]));else Qr.add(Kr);let nn=!1;for(const kr of Qr)if(!qe.horizontal[kr])if(nn)qe.horizontal[kr]=qe.horizontal[0];else{const ai=z1(Ze,f.glyphMap,f.glyphPositions,f.imagePositions,se,rn,R,"center",kr,br,xt,l.ao.horizontal,!1,Ne,ve);ai&&(qe.horizontal[kr]=ai,nn=ai.positionedLines.length===1)}Bn()}else{Kr==="auto"&&(Kr=Hw(zr));const Qr=z1(Ze,f.glyphMap,f.glyphPositions,f.imagePositions,se,rn,R,zr,Kr,br,xt,l.ao.horizontal,!1,Ne,ve);Qr&&(qe.horizontal[Kr]=Qr),Bn(),Tr(Nt)&&D&&q&&(qe.vertical=z1(Ze,f.glyphMap,f.glyphPositions,f.imagePositions,se,rn,R,zr,Kr,br,xt,l.ao.vertical,!1,Ne,ve))}}let Gt=!1;if(ne.icon&&ne.icon.name){const Nt=f.imageMap[ne.icon.name];Nt&&(lt=UH(f.imagePositions[ne.icon.name],d.get("icon-offset").evaluate(ne,{},f.canonical),d.get("icon-anchor").evaluate(ne,{},f.canonical)),Gt=!!Nt.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Gt:f.bucket.sdfIcons!==Gt&&at("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Nt.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const At=AM(qe.horizontal)||qe.vertical;f.bucket.iconsInText=!!At&&At.iconsInText,(At||lt)&&oW(f.bucket,ne,qe,lt,f.imageMap,S,Ne,ze,xt,Gt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},l.cI=Mw,l.cJ=Iw,l.cK=Aw,l.cL=RA,l.cM=Rw,l.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},l.cO=function(f,u,d,_,S){return a(this,void 0,void 0,(function*(){if(M())try{return yield sr(f,u,d,_,S)}catch{}return(function(R,D,q,W,ne){const se=R.width,ve=R.height;ur&&ar||(ur=new OffscreenCanvas(se,ve),ar=ur.getContext("2d",{willReadFrequently:!0})),ur.width=se,ur.height=ve,ar.drawImage(R,0,0,se,ve);const Ne=ar.getImageData(D,q,W,ne);return ar.clearRect(0,0,se,ve),Ne.data})(f,u,d,_,S)}))},l.cP=xA,l.cQ=p,l.cR=LA,l.cS=km,l.cT=Cc,l.cU=function(f,u){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Jy(f,u),f);else for(const _ of f.features)d.set(Jy(_,u),_);return d},l.cV=function(f,u){if(f==null)return!0;if(f.type==="Feature")return Jy(f,u)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const _ of f.features){const S=Jy(_,u);if(S==null||d.has(S))return!1;d.add(S)}return!0}return!1},l.cW=function(f,u,d){var _,S,R,D;if(u.removeAll&&f.clear(),u.remove)for(const q of u.remove)f.delete(q);if(u.add)for(const q of u.add){const W=Jy(q,d);W!=null&&f.set(W,q)}if(u.update)for(const q of u.update){let W=f.get(q.id);if(W==null)continue;const ne=!q.removeAllProperties&&(((_=q.removeProperties)===null||_===void 0?void 0:_.length)>0||((S=q.addOrUpdateProperties)===null||S===void 0?void 0:S.length)>0);if((q.newGeometry||q.removeAllProperties||ne)&&(W=Object.assign({},W),f.set(q.id,W),ne&&(W.properties=Object.assign({},W.properties))),q.newGeometry&&(W.geometry=q.newGeometry),q.removeAllProperties)W.properties={};else if(((R=q.removeProperties)===null||R===void 0?void 0:R.length)>0)for(const se of q.removeProperties)Object.prototype.hasOwnProperty.call(W.properties,se)&&delete W.properties[se];if(((D=q.addOrUpdateProperties)===null||D===void 0?void 0:D.length)>0)for(const{key:se,value:ve}of q.addOrUpdateProperties)W.properties[se]=ve}},l.cX=ui,l.ca=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},l.cb=f=>f.type==="symbol",l.cc=f=>f.type==="circle",l.cd=f=>f.type==="heatmap",l.ce=f=>f.type==="line",l.cf=f=>f.type==="fill",l.cg=f=>f.type==="fill-extrusion",l.ch=f=>f.type==="hillshade",l.ci=f=>f.type==="color-relief",l.cj=f=>f.type==="raster",l.ck=f=>f.type==="background",l.cl=f=>f.type==="custom",l.cm=we,l.cn=function(f,u,d){const _=ge(u.x-d.x,u.y-d.y),S=ge(f.x-d.x,f.y-d.y);var R,D;return Jt(Math.atan2(_[0]*S[1]-_[1]*S[0],(R=_)[0]*(D=S)[0]+R[1]*D[1]))},l.co=De,l.cp=function(f,u){return xr[u]&&(f instanceof MouseEvent||f instanceof WheelEvent)},l.cq=function(f,u){return ir[u]&&"touches"in f},l.cr=function(f){return ir[f]||xr[f]},l.cs=function(f,u,d){var _=u[0],S=u[1];return f[0]=d[0]*_+d[4]*S+d[12],f[1]=d[1]*_+d[5]*S+d[13],f},l.ct=function(f,u){const{x:d,y:_}=Ky.fromLngLat(u);return!(f<0||f>25||_<0||_>=1||d<0||d>=1)},l.cu=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},l.cv=class extends Do{},l.cw=lW,l.cy=function(f){return f.message===rr},l.cz=Qe,l.d=Lt,l.e=Oe,l.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),l.g=_e,l.h=f=>new Promise(((u,d)=>{const _=new Image;_.onload=()=>{u(_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame((()=>{_.src=st}))},_.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const S=new Blob([new Uint8Array(f)],{type:"image/png"});_.src=f.byteLength?URL.createObjectURL(S):st})),l.i=Ht,l.j=(f,u)=>et(Oe(f,{type:"json"}),u),l.k=Zt,l.l=Kt,l.m=et,l.n=(f,u)=>et(Oe(f,{type:"arrayBuffer"}),u),l.o=function(f){return new Rw(f).readFields(RH,[])},l.p=HA,l.q=jy,l.r=Ui,l.s=yr,l.t=bi,l.u=jt,l.v=bt,l.w=at,l.x=V,l.y=Ge,l.z=Xc})),i("worker",["./shared"],(function(l){class a{constructor(be){this.keyCache={},be&&this.replace(be)}replace(be){this._layerConfigs={},this._layers={},this.update(be,[])}update(be,_e){for(const Qe of be){this._layerConfigs[Qe.id]=Qe;const ot=this._layers[Qe.id]=l.bJ(Qe);ot._featureFilter=l.aa(ot.filter),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id]}for(const Qe of _e)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const Ue=l.cC(Object.values(this._layerConfigs),this.keyCache);for(const Qe of Ue){const ot=Qe.map((Zt=>this._layers[Zt.id])),et=ot[0];if(et.visibility==="none")continue;const Lt=et.source||"";let vt=this.familiesBySource[Lt];vt||(vt=this.familiesBySource[Lt]={});const Bt=et.sourceLayer||"_geojsonTileLayer";let Kt=vt[Bt];Kt||(Kt=vt[Bt]=[]),Kt.push(ot)}}}class c{constructor(be){const _e={},Ue=[];for(const Lt in be){const vt=be[Lt],Bt=_e[Lt]={};for(const Kt in vt){const Zt=vt[+Kt];if(!Zt||Zt.bitmap.width===0||Zt.bitmap.height===0)continue;const Er={x:0,y:0,w:Zt.bitmap.width+2,h:Zt.bitmap.height+2};Ue.push(Er),Bt[Kt]={rect:Er,metrics:Zt.metrics}}}const{w:Qe,h:ot}=l.p(Ue),et=new l.q({width:Qe||1,height:ot||1});for(const Lt in be){const vt=be[Lt];for(const Bt in vt){const Kt=vt[+Bt];if(!Kt||Kt.bitmap.width===0||Kt.bitmap.height===0)continue;const Zt=_e[Lt][Bt].rect;l.q.copy(Kt.bitmap,et,{x:0,y:0},{x:Zt.x+1,y:Zt.y+1},Kt.bitmap)}}this.image=et,this.positions=_e}}l.cD("GlyphAtlas",c);class p{constructor(be){this.tileID=new l.Z(be.tileID.overscaledZ,be.tileID.wrap,be.tileID.canonical.z,be.tileID.canonical.x,be.tileID.canonical.y),this.uid=be.uid,this.zoom=be.zoom,this.pixelRatio=be.pixelRatio,this.tileSize=be.tileSize,this.source=be.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=be.showCollisionBoxes,this.collectResourceTiming=!!be.collectResourceTiming,this.returnDependencies=!!be.returnDependencies,this.promoteId=be.promoteId,this.inFlightDependencies=[],this.globalState=be.globalState}parse(be,_e,Ue,Qe,ot){return l._(this,void 0,void 0,(function*(){this.status="parsing",this.data=be,this.collisionBoxArray=new l.a8;const et=new l.cE(Object.keys(be.layers).sort()),Lt=new l.cF(this.tileID,this.promoteId);Lt.bucketLayerIDs=[];const vt={},Bt={featureIndex:Lt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ue,subdivisionGranularity:ot},Kt=_e.familiesBySource[this.source];for(const Pe in Kt){const Be=be.layers[Pe];if(!Be)continue;Be.version===1&&l.w(`Vector tile source "${this.source}" layer "${Pe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const gt=et.encode(Pe),mt=[];for(let wr=0;wr<Be.length;wr++){const Ar=Be.feature(wr),Dn=Lt.getId(Ar,Pe);mt.push({feature:Ar,id:Dn,index:wr,sourceLayerIndex:gt})}for(const wr of Kt[Pe]){const Ar=wr[0];Ar.source!==this.source&&l.w(`layer.source = ${Ar.source} does not equal this.source = ${this.source}`),Ar.minzoom&&this.zoom<Math.floor(Ar.minzoom)||Ar.maxzoom&&this.zoom>=Ar.maxzoom||Ar.visibility!=="none"&&(g(wr,this.zoom,Ue,this.globalState),(vt[Ar.id]=Ar.createBucket({index:Lt.bucketLayerIDs.length,layers:wr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:gt,sourceID:this.source,globalState:this.globalState})).populate(mt,Bt,this.tileID.canonical),Lt.bucketLayerIDs.push(wr.map((Dn=>Dn.id))))}}const Zt=l.bN(Bt.glyphDependencies,(Pe=>Object.keys(Pe).map(Number)));this.inFlightDependencies.forEach((Pe=>Pe?.abort())),this.inFlightDependencies=[];let Er=Promise.resolve({});if(Object.keys(Zt).length){const Pe=new AbortController;this.inFlightDependencies.push(Pe),Er=Qe.sendAsync({type:"GG",data:{stacks:Zt,source:this.source,tileID:this.tileID,type:"glyphs"}},Pe)}const bt=Object.keys(Bt.iconDependencies);let vr=Promise.resolve({});if(bt.length){const Pe=new AbortController;this.inFlightDependencies.push(Pe),vr=Qe.sendAsync({type:"GI",data:{icons:bt,source:this.source,tileID:this.tileID,type:"icons"}},Pe)}const Dr=Object.keys(Bt.patternDependencies);let jr=Promise.resolve({});if(Dr.length){const Pe=new AbortController;this.inFlightDependencies.push(Pe),jr=Qe.sendAsync({type:"GI",data:{icons:Dr,source:this.source,tileID:this.tileID,type:"patterns"}},Pe)}const[Ur,nr,Hn]=yield Promise.all([Er,vr,jr]),en=new c(Ur),Wn=new l.cG(nr,Hn);for(const Pe in vt){const Be=vt[Pe];Be instanceof l.a9?(g(Be.layers,this.zoom,Ue,this.globalState),l.cH({bucket:Be,glyphMap:Ur,glyphPositions:en.positions,imageMap:nr,imagePositions:Wn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Bt.subdivisionGranularity})):Be.hasPattern&&(Be instanceof l.cI||Be instanceof l.cJ||Be instanceof l.cK)&&(g(Be.layers,this.zoom,Ue,this.globalState),Be.addFeatures(Bt,this.tileID.canonical,Wn.patternPositions))}return this.status="done",{buckets:Object.values(vt).filter((Pe=>!Pe.isEmpty())),featureIndex:Lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:en.image,imageAtlas:Wn,glyphMap:this.returnDependencies?Ur:null,iconMap:this.returnDependencies?nr:null,glyphPositions:this.returnDependencies?en.positions:null}}))}}function g(nt,be,_e,Ue){const Qe=new l.F(be);for(const ot of nt)ot.setGlobalState(Ue),ot.recalculate(Qe,_e)}class v{constructor(be,_e,Ue){this.actor=be,this.layerIndex=_e,this.availableImages=Ue,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(be,_e){return l._(this,void 0,void 0,(function*(){const Ue=yield l.n(be.request,_e);try{return{vectorTile:new l.cL(new l.cM(Ue.data)),rawData:Ue.data,cacheControl:Ue.cacheControl,expires:Ue.expires}}catch(Qe){const ot=new Uint8Array(Ue.data);let et=`Unable to parse the tile at ${be.request.url}, `;throw et+=ot[0]===31&&ot[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Qe.message}`,new Error(et)}}))}loadTile(be){return l._(this,void 0,void 0,(function*(){const _e=be.uid,Ue=!!(be&&be.request&&be.request.collectResourceTiming)&&new l.cN(be.request),Qe=new p(be);this.loading[_e]=Qe;const ot=new AbortController;Qe.abort=ot;try{const et=yield this.loadVectorTile(be,ot);if(delete this.loading[_e],!et)return null;const Lt=et.rawData,vt={};et.expires&&(vt.expires=et.expires),et.cacheControl&&(vt.cacheControl=et.cacheControl);const Bt={};if(Ue){const Zt=Ue.finish();Zt&&(Bt.resourceTiming=JSON.parse(JSON.stringify(Zt)))}Qe.vectorTile=et.vectorTile;const Kt=Qe.parse(et.vectorTile,this.layerIndex,this.availableImages,this.actor,be.subdivisionGranularity);this.loaded[_e]=Qe,this.fetching[_e]={rawTileData:Lt,cacheControl:vt,resourceTiming:Bt};try{const Zt=yield Kt;return l.e({rawTileData:Lt.slice(0)},Zt,vt,Bt)}finally{delete this.fetching[_e]}}catch(et){throw delete this.loading[_e],Qe.status="done",this.loaded[_e]=Qe,et}}))}reloadTile(be){return l._(this,void 0,void 0,(function*(){const _e=be.uid;if(!this.loaded||!this.loaded[_e])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ue=this.loaded[_e];if(Ue.showCollisionBoxes=be.showCollisionBoxes,Ue.globalState=be.globalState,Ue.status==="parsing"){const Qe=yield Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,be.subdivisionGranularity);let ot;if(this.fetching[_e]){const{rawTileData:et,cacheControl:Lt,resourceTiming:vt}=this.fetching[_e];delete this.fetching[_e],ot=l.e({rawTileData:et.slice(0)},Qe,Lt,vt)}else ot=Qe;return ot}if(Ue.status==="done"&&Ue.vectorTile)return Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,be.subdivisionGranularity)}))}abortTile(be){return l._(this,void 0,void 0,(function*(){const _e=this.loading,Ue=be.uid;_e&&_e[Ue]&&_e[Ue].abort&&(_e[Ue].abort.abort(),delete _e[Ue])}))}removeTile(be){return l._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[be.uid]&&delete this.loaded[be.uid]}))}}class x{constructor(){this.loaded={}}loadTile(be){return l._(this,void 0,void 0,(function*(){const{uid:_e,encoding:Ue,rawImageData:Qe,redFactor:ot,greenFactor:et,blueFactor:Lt,baseShift:vt}=be,Bt=Qe.width+2,Kt=Qe.height+2,Zt=l.b(Qe)?new l.R({width:Bt,height:Kt},yield l.cO(Qe,-1,-1,Bt,Kt)):Qe,Er=new l.cP(_e,Zt,Ue,ot,et,Lt,vt);return this.loaded=this.loaded||{},this.loaded[_e]=Er,Er}))}removeTile(be){const _e=this.loaded,Ue=be.uid;_e&&_e[Ue]&&delete _e[Ue]}}var b,P,I=(function(){if(P)return b;function nt(_e,Ue){if(_e.length!==0){be(_e[0],Ue);for(var Qe=1;Qe<_e.length;Qe++)be(_e[Qe],!Ue)}}function be(_e,Ue){for(var Qe=0,ot=0,et=0,Lt=_e.length,vt=Lt-1;et<Lt;vt=et++){var Bt=(_e[et][0]-_e[vt][0])*(_e[vt][1]+_e[et][1]),Kt=Qe+Bt;ot+=Math.abs(Qe)>=Math.abs(Bt)?Qe-Kt+Bt:Bt-Kt+Qe,Qe=Kt}Qe+ot>=0!=!!Ue&&_e.reverse()}return P=1,b=function _e(Ue,Qe){var ot,et=Ue&&Ue.type;if(et==="FeatureCollection")for(ot=0;ot<Ue.features.length;ot++)_e(Ue.features[ot],Qe);else if(et==="GeometryCollection")for(ot=0;ot<Ue.geometries.length;ot++)_e(Ue.geometries[ot],Qe);else if(et==="Feature")_e(Ue.geometry,Qe);else if(et==="Polygon")nt(Ue.coordinates,Qe);else if(et==="MultiPolygon")for(ot=0;ot<Ue.coordinates.length;ot++)nt(Ue.coordinates[ot],Qe);return Ue}})(),k=l.cQ(I);class M extends l.cS{constructor(be,_e){super(new l.cM,0,_e,[],[]),this.feature=be,this.type=be.type,this.properties=be.tags?be.tags:{},"id"in be&&(typeof be.id=="string"?this.id=parseInt(be.id,10):typeof be.id!="number"||isNaN(be.id)||(this.id=be.id))}loadGeometry(){const be=[],_e=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Ue of _e){const Qe=[];for(const ot of Ue)Qe.push(new l.P(ot[0],ot[1]));be.push(Qe)}return be}}class O extends l.cR{constructor(be,_e){super(new l.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=_e?_e.version:1,this.extent=_e?_e.extent:4096,this.length=be.length,this.features=be}feature(be){return new M(this.features[be],this.extent)}}function F(nt,be){be.writeVarintField(15,nt.version||1),be.writeStringField(1,nt.name||""),be.writeVarintField(5,nt.extent||4096);const _e={keys:[],values:[],keycache:{},valuecache:{}};for(let ot=0;ot<nt.length;ot++)_e.feature=nt.feature(ot),be.writeMessage(2,N,_e);const Ue=_e.keys;for(const ot of Ue)be.writeStringField(3,ot);const Qe=_e.values;for(const ot of Qe)be.writeMessage(4,Y,ot)}function N(nt,be){if(!nt.feature)return;const _e=nt.feature;_e.id!==void 0&&be.writeVarintField(1,_e.id),be.writeMessage(2,$,nt),be.writeVarintField(3,_e.type),be.writeMessage(4,H,_e)}function $(nt,be){for(const _e in nt.feature?.properties){let Ue=nt.feature.properties[_e],Qe=nt.keycache[_e];if(Ue===null)continue;Qe===void 0&&(nt.keys.push(_e),Qe=nt.keys.length-1,nt.keycache[_e]=Qe),be.writeVarint(Qe),typeof Ue!="string"&&typeof Ue!="boolean"&&typeof Ue!="number"&&(Ue=JSON.stringify(Ue));const ot=typeof Ue+":"+Ue;let et=nt.valuecache[ot];et===void 0&&(nt.values.push(Ue),et=nt.values.length-1,nt.valuecache[ot]=et),be.writeVarint(et)}}function j(nt,be){return(be<<3)+(7&nt)}function U(nt){return nt<<1^nt>>31}function H(nt,be){const _e=nt.loadGeometry(),Ue=nt.type;let Qe=0,ot=0;for(const et of _e){let Lt=1;Ue===1&&(Lt=et.length),be.writeVarint(j(1,Lt));const vt=Ue===3?et.length-1:et.length;for(let Bt=0;Bt<vt;Bt++){Bt===1&&Ue!==1&&be.writeVarint(j(2,vt-1));const Kt=et[Bt].x-Qe,Zt=et[Bt].y-ot;be.writeVarint(U(Kt)),be.writeVarint(U(Zt)),Qe+=Kt,ot+=Zt}nt.type===3&&be.writeVarint(j(7,1))}}function Y(nt,be){const _e=typeof nt;_e==="string"?be.writeStringField(1,nt):_e==="boolean"?be.writeBooleanField(7,nt):_e==="number"&&(nt%1!=0?be.writeDoubleField(3,nt):nt<0?be.writeSVarintField(6,nt):be.writeVarintField(5,nt))}const ae={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:nt=>nt},ee=Math.fround||(G=new Float32Array(1),nt=>(G[0]=+nt,G[0]));var G;class ie{constructor(be){this.options=Object.assign(Object.create(ae),be),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(be){const{log:_e,minZoom:Ue,maxZoom:Qe}=this.options;_e&&console.time("total time");const ot=`prepare ${be.length} points`;_e&&console.time(ot),this.points=be;const et=[];for(let vt=0;vt<be.length;vt++){const Bt=be[vt];if(!Bt.geometry)continue;const[Kt,Zt]=Bt.geometry.coordinates,Er=ee(de(Kt)),bt=ee(Me(Zt));et.push(Er,bt,1/0,vt,-1,1),this.options.reduce&&et.push(0)}let Lt=this.trees[Qe+1]=this._createTree(et);_e&&console.timeEnd(ot);for(let vt=Qe;vt>=Ue;vt--){const Bt=+Date.now();Lt=this.trees[vt]=this._createTree(this._cluster(Lt,vt)),_e&&console.log("z%d: %d clusters in %dms",vt,Lt.numItems,+Date.now()-Bt)}return _e&&console.timeEnd("total time"),this}getClusters(be,_e){let Ue=((be[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,be[1]));let ot=be[2]===180?180:((be[2]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,be[3]));if(be[2]-be[0]>=360)Ue=-180,ot=180;else if(Ue>ot){const Zt=this.getClusters([Ue,Qe,180,et],_e),Er=this.getClusters([-180,Qe,ot,et],_e);return Zt.concat(Er)}const Lt=this.trees[this._limitZoom(_e)],vt=Lt.range(de(Ue),Me(et),de(ot),Me(Qe)),Bt=Lt.data,Kt=[];for(const Zt of vt){const Er=this.stride*Zt;Kt.push(Bt[Er+5]>1?oe(Bt,Er,this.clusterProps):this.points[Bt[Er+3]])}return Kt}getChildren(be){const _e=this._getOriginId(be),Ue=this._getOriginZoom(be),Qe="No cluster with the specified id.",ot=this.trees[Ue];if(!ot)throw new Error(Qe);const et=ot.data;if(_e*this.stride>=et.length)throw new Error(Qe);const Lt=this.options.radius/(this.options.extent*Math.pow(2,Ue-1)),vt=ot.within(et[_e*this.stride],et[_e*this.stride+1],Lt),Bt=[];for(const Kt of vt){const Zt=Kt*this.stride;et[Zt+4]===be&&Bt.push(et[Zt+5]>1?oe(et,Zt,this.clusterProps):this.points[et[Zt+3]])}if(Bt.length===0)throw new Error(Qe);return Bt}getLeaves(be,_e,Ue){const Qe=[];return this._appendLeaves(Qe,be,_e=_e||10,Ue=Ue||0,0),Qe}getTile(be,_e,Ue){const Qe=this.trees[this._limitZoom(be)],ot=Math.pow(2,be),{extent:et,radius:Lt}=this.options,vt=Lt/et,Bt=(Ue-vt)/ot,Kt=(Ue+1+vt)/ot,Zt={features:[]};return this._addTileFeatures(Qe.range((_e-vt)/ot,Bt,(_e+1+vt)/ot,Kt),Qe.data,_e,Ue,ot,Zt),_e===0&&this._addTileFeatures(Qe.range(1-vt/ot,Bt,1,Kt),Qe.data,ot,Ue,ot,Zt),_e===ot-1&&this._addTileFeatures(Qe.range(0,Bt,vt/ot,Kt),Qe.data,-1,Ue,ot,Zt),Zt.features.length?Zt:null}getClusterExpansionZoom(be){let _e=this._getOriginZoom(be)-1;for(;_e<=this.options.maxZoom;){const Ue=this.getChildren(be);if(_e++,Ue.length!==1)break;be=Ue[0].properties.cluster_id}return _e}_appendLeaves(be,_e,Ue,Qe,ot){const et=this.getChildren(_e);for(const Lt of et){const vt=Lt.properties;if(vt&&vt.cluster?ot+vt.point_count<=Qe?ot+=vt.point_count:ot=this._appendLeaves(be,vt.cluster_id,Ue,Qe,ot):ot<Qe?ot++:be.push(Lt),be.length===Ue)break}return ot}_createTree(be){const _e=new l.aI(be.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ue=0;Ue<be.length;Ue+=this.stride)_e.add(be[Ue],be[Ue+1]);return _e.finish(),_e.data=be,_e}_addTileFeatures(be,_e,Ue,Qe,ot,et){for(const Lt of be){const vt=Lt*this.stride,Bt=_e[vt+5]>1;let Kt,Zt,Er;if(Bt)Kt=ue(_e,vt,this.clusterProps),Zt=_e[vt],Er=_e[vt+1];else{const Dr=this.points[_e[vt+3]];Kt=Dr.properties;const[jr,Ur]=Dr.geometry.coordinates;Zt=de(jr),Er=Me(Ur)}const bt={type:1,geometry:[[Math.round(this.options.extent*(Zt*ot-Ue)),Math.round(this.options.extent*(Er*ot-Qe))]],tags:Kt};let vr;vr=Bt||this.options.generateId?_e[vt+3]:this.points[_e[vt+3]].id,vr!==void 0&&(bt.id=vr),et.features.push(bt)}}_limitZoom(be){return Math.max(this.options.minZoom,Math.min(Math.floor(+be),this.options.maxZoom+1))}_cluster(be,_e){const{radius:Ue,extent:Qe,reduce:ot,minPoints:et}=this.options,Lt=Ue/(Qe*Math.pow(2,_e)),vt=be.data,Bt=[],Kt=this.stride;for(let Zt=0;Zt<vt.length;Zt+=Kt){if(vt[Zt+2]<=_e)continue;vt[Zt+2]=_e;const Er=vt[Zt],bt=vt[Zt+1],vr=be.within(vt[Zt],vt[Zt+1],Lt),Dr=vt[Zt+5];let jr=Dr;for(const Ur of vr){const nr=Ur*Kt;vt[nr+2]>_e&&(jr+=vt[nr+5])}if(jr>Dr&&jr>=et){let Ur,nr=Er*Dr,Hn=bt*Dr,en=-1;const Wn=(Zt/Kt<<5)+(_e+1)+this.points.length;for(const Pe of vr){const Be=Pe*Kt;if(vt[Be+2]<=_e)continue;vt[Be+2]=_e;const gt=vt[Be+5];nr+=vt[Be]*gt,Hn+=vt[Be+1]*gt,vt[Be+4]=Wn,ot&&(Ur||(Ur=this._map(vt,Zt,!0),en=this.clusterProps.length,this.clusterProps.push(Ur)),ot(Ur,this._map(vt,Be)))}vt[Zt+4]=Wn,Bt.push(nr/jr,Hn/jr,1/0,Wn,-1,jr),ot&&Bt.push(en)}else{for(let Ur=0;Ur<Kt;Ur++)Bt.push(vt[Zt+Ur]);if(jr>1)for(const Ur of vr){const nr=Ur*Kt;if(!(vt[nr+2]<=_e)){vt[nr+2]=_e;for(let Hn=0;Hn<Kt;Hn++)Bt.push(vt[nr+Hn])}}}}return Bt}_getOriginId(be){return be-this.points.length>>5}_getOriginZoom(be){return(be-this.points.length)%32}_map(be,_e,Ue){if(be[_e+5]>1){const et=this.clusterProps[be[_e+6]];return Ue?Object.assign({},et):et}const Qe=this.points[be[_e+3]].properties,ot=this.options.map(Qe);return Ue&&ot===Qe?Object.assign({},ot):ot}}function oe(nt,be,_e){return{type:"Feature",id:nt[be+3],properties:ue(nt,be,_e),geometry:{type:"Point",coordinates:[(Ue=nt[be],360*(Ue-.5)),ge(nt[be+1])]}};var Ue}function ue(nt,be,_e){const Ue=nt[be+5],Qe=Ue>=1e4?`${Math.round(Ue/1e3)}k`:Ue>=1e3?Math.round(Ue/100)/10+"k":Ue,ot=nt[be+6],et=ot===-1?{}:Object.assign({},_e[ot]);return Object.assign(et,{cluster:!0,cluster_id:nt[be+3],point_count:Ue,point_count_abbreviated:Qe})}function de(nt){return nt/360+.5}function Me(nt){const be=Math.sin(nt*Math.PI/180),_e=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return _e<0?0:_e>1?1:_e}function ge(nt){const be=(180-360*nt)*Math.PI/180;return 360*Math.atan(Math.exp(be))/Math.PI-90}function xe(nt,be,_e,Ue){let Qe=Ue;const ot=be+(_e-be>>1);let et,Lt=_e-be;const vt=nt[be],Bt=nt[be+1],Kt=nt[_e],Zt=nt[_e+1];for(let Er=be+3;Er<_e;Er+=3){const bt=Ee(nt[Er],nt[Er+1],vt,Bt,Kt,Zt);if(bt>Qe)et=Er,Qe=bt;else if(bt===Qe){const vr=Math.abs(Er-ot);vr<Lt&&(et=Er,Lt=vr)}}Qe>Ue&&(et-be>3&&xe(nt,be,et,Ue),nt[et+2]=Qe,_e-et>3&&xe(nt,et,_e,Ue))}function Ee(nt,be,_e,Ue,Qe,ot){let et=Qe-_e,Lt=ot-Ue;if(et!==0||Lt!==0){const vt=((nt-_e)*et+(be-Ue)*Lt)/(et*et+Lt*Lt);vt>1?(_e=Qe,Ue=ot):vt>0&&(_e+=et*vt,Ue+=Lt*vt)}return et=nt-_e,Lt=be-Ue,et*et+Lt*Lt}function Ae(nt,be,_e,Ue){const Qe={id:nt??null,type:be,geometry:_e,tags:Ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(be==="Point"||be==="MultiPoint"||be==="LineString")fe(Qe,_e);else if(be==="Polygon")fe(Qe,_e[0]);else if(be==="MultiLineString")for(const ot of _e)fe(Qe,ot);else if(be==="MultiPolygon")for(const ot of _e)fe(Qe,ot[0]);return Qe}function fe(nt,be){for(let _e=0;_e<be.length;_e+=3)nt.minX=Math.min(nt.minX,be[_e]),nt.minY=Math.min(nt.minY,be[_e+1]),nt.maxX=Math.max(nt.maxX,be[_e]),nt.maxY=Math.max(nt.maxY,be[_e+1])}function Se(nt,be,_e,Ue){if(!be.geometry)return;const Qe=be.geometry.coordinates;if(Qe&&Qe.length===0)return;const ot=be.geometry.type,et=Math.pow(_e.tolerance/((1<<_e.maxZoom)*_e.extent),2);let Lt=[],vt=be.id;if(_e.promoteId?vt=be.properties[_e.promoteId]:_e.generateId&&(vt=Ue||0),ot==="Point")we(Qe,Lt);else if(ot==="MultiPoint")for(const Bt of Qe)we(Bt,Lt);else if(ot==="LineString")De(Qe,Lt,et,!1);else if(ot==="MultiLineString"){if(_e.lineMetrics){for(const Bt of Qe)Lt=[],De(Bt,Lt,et,!1),nt.push(Ae(vt,"LineString",Lt,be.properties));return}Re(Qe,Lt,et,!1)}else if(ot==="Polygon")Re(Qe,Lt,et,!0);else{if(ot!=="MultiPolygon"){if(ot==="GeometryCollection"){for(const Bt of be.geometry.geometries)Se(nt,{id:vt,geometry:Bt,properties:be.properties},_e,Ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Bt of Qe){const Kt=[];Re(Bt,Kt,et,!0),Lt.push(Kt)}}nt.push(Ae(vt,ot,Lt,be.properties))}function we(nt,be){be.push($e(nt[0]),Oe(nt[1]),0)}function De(nt,be,_e,Ue){let Qe,ot,et=0;for(let vt=0;vt<nt.length;vt++){const Bt=$e(nt[vt][0]),Kt=Oe(nt[vt][1]);be.push(Bt,Kt,0),vt>0&&(et+=Ue?(Qe*Kt-Bt*ot)/2:Math.sqrt(Math.pow(Bt-Qe,2)+Math.pow(Kt-ot,2))),Qe=Bt,ot=Kt}const Lt=be.length-3;be[2]=1,xe(be,0,Lt,_e),be[Lt+2]=1,be.size=Math.abs(et),be.start=0,be.end=be.size}function Re(nt,be,_e,Ue){for(let Qe=0;Qe<nt.length;Qe++){const ot=[];De(nt[Qe],ot,_e,Ue),be.push(ot)}}function $e(nt){return nt/360+.5}function Oe(nt){const be=Math.sin(nt*Math.PI/180),_e=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return _e<0?0:_e>1?1:_e}function it(nt,be,_e,Ue,Qe,ot,et,Lt){if(Ue/=be,ot>=(_e/=be)&&et<Ue)return nt;if(et<_e||ot>=Ue)return null;const vt=[];for(const Bt of nt){const Kt=Bt.geometry;let Zt=Bt.type;const Er=Qe===0?Bt.minX:Bt.minY,bt=Qe===0?Bt.maxX:Bt.maxY;if(Er>=_e&&bt<Ue){vt.push(Bt);continue}if(bt<_e||Er>=Ue)continue;let vr=[];if(Zt==="Point"||Zt==="MultiPoint")Ye(Kt,vr,_e,Ue,Qe);else if(Zt==="LineString")rt(Kt,vr,_e,Ue,Qe,!1,Lt.lineMetrics);else if(Zt==="MultiLineString")It(Kt,vr,_e,Ue,Qe,!1);else if(Zt==="Polygon")It(Kt,vr,_e,Ue,Qe,!0);else if(Zt==="MultiPolygon")for(const Dr of Kt){const jr=[];It(Dr,jr,_e,Ue,Qe,!0),jr.length&&vr.push(jr)}if(vr.length){if(Lt.lineMetrics&&Zt==="LineString"){for(const Dr of vr)vt.push(Ae(Bt.id,Zt,Dr,Bt.tags));continue}Zt!=="LineString"&&Zt!=="MultiLineString"||(vr.length===1?(Zt="LineString",vr=vr[0]):Zt="MultiLineString"),Zt!=="Point"&&Zt!=="MultiPoint"||(Zt=vr.length===3?"Point":"MultiPoint"),vt.push(Ae(Bt.id,Zt,vr,Bt.tags))}}return vt.length?vt:null}function Ye(nt,be,_e,Ue,Qe){for(let ot=0;ot<nt.length;ot+=3){const et=nt[ot+Qe];et>=_e&&et<=Ue&&at(be,nt[ot],nt[ot+1],nt[ot+2])}}function rt(nt,be,_e,Ue,Qe,ot,et){let Lt=Ie(nt);const vt=Qe===0?je:Ht;let Bt,Kt,Zt=nt.start;for(let jr=0;jr<nt.length-3;jr+=3){const Ur=nt[jr],nr=nt[jr+1],Hn=nt[jr+2],en=nt[jr+3],Wn=nt[jr+4],Pe=Qe===0?Ur:nr,Be=Qe===0?en:Wn;let gt=!1;et&&(Bt=Math.sqrt(Math.pow(Ur-en,2)+Math.pow(nr-Wn,2))),Pe<_e?Be>_e&&(Kt=vt(Lt,Ur,nr,en,Wn,_e),et&&(Lt.start=Zt+Bt*Kt)):Pe>Ue?Be<Ue&&(Kt=vt(Lt,Ur,nr,en,Wn,Ue),et&&(Lt.start=Zt+Bt*Kt)):at(Lt,Ur,nr,Hn),Be<_e&&Pe>=_e&&(Kt=vt(Lt,Ur,nr,en,Wn,_e),gt=!0),Be>Ue&&Pe<=Ue&&(Kt=vt(Lt,Ur,nr,en,Wn,Ue),gt=!0),!ot&&gt&&(et&&(Lt.end=Zt+Bt*Kt),be.push(Lt),Lt=Ie(nt)),et&&(Zt+=Bt)}let Er=nt.length-3;const bt=nt[Er],vr=nt[Er+1],Dr=Qe===0?bt:vr;Dr>=_e&&Dr<=Ue&&at(Lt,bt,vr,nt[Er+2]),Er=Lt.length-3,ot&&Er>=3&&(Lt[Er]!==Lt[0]||Lt[Er+1]!==Lt[1])&&at(Lt,Lt[0],Lt[1],Lt[2]),Lt.length&&be.push(Lt)}function Ie(nt){const be=[];return be.size=nt.size,be.start=nt.start,be.end=nt.end,be}function It(nt,be,_e,Ue,Qe,ot){for(const et of nt)rt(et,be,_e,Ue,Qe,ot,!1)}function at(nt,be,_e,Ue){nt.push(be,_e,Ue)}function je(nt,be,_e,Ue,Qe,ot){const et=(ot-be)/(Ue-be);return at(nt,ot,_e+(Qe-_e)*et,1),et}function Ht(nt,be,_e,Ue,Qe,ot){const et=(ot-_e)/(Qe-_e);return at(nt,be+(Ue-be)*et,ot,1),et}function Wt(nt,be){const _e=[];for(let Ue=0;Ue<nt.length;Ue++){const Qe=nt[Ue],ot=Qe.type;let et;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")et=zt(Qe.geometry,be);else if(ot==="MultiLineString"||ot==="Polygon"){et=[];for(const Lt of Qe.geometry)et.push(zt(Lt,be))}else if(ot==="MultiPolygon"){et=[];for(const Lt of Qe.geometry){const vt=[];for(const Bt of Lt)vt.push(zt(Bt,be));et.push(vt)}}_e.push(Ae(Qe.id,ot,et,Qe.tags))}return _e}function zt(nt,be){const _e=[];_e.size=nt.size,nt.start!==void 0&&(_e.start=nt.start,_e.end=nt.end);for(let Ue=0;Ue<nt.length;Ue+=3)_e.push(nt[Ue]+be,nt[Ue+1],nt[Ue+2]);return _e}function st(nt,be){if(nt.transformed)return nt;const _e=1<<nt.z,Ue=nt.x,Qe=nt.y;for(const ot of nt.features){const et=ot.geometry,Lt=ot.type;if(ot.geometry=[],Lt===1)for(let vt=0;vt<et.length;vt+=2)ot.geometry.push(sr(et[vt],et[vt+1],be,_e,Ue,Qe));else for(let vt=0;vt<et.length;vt++){const Bt=[];for(let Kt=0;Kt<et[vt].length;Kt+=2)Bt.push(sr(et[vt][Kt],et[vt][Kt+1],be,_e,Ue,Qe));ot.geometry.push(Bt)}}return nt.transformed=!0,nt}function sr(nt,be,_e,Ue,Qe,ot){return[Math.round(_e*(nt*Ue-Qe)),Math.round(_e*(be*Ue-ot))]}function ur(nt,be,_e,Ue,Qe){const ot=be===Qe.maxZoom?0:Qe.tolerance/((1<<be)*Qe.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:nt.length,source:null,x:_e,y:Ue,z:be,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Lt of nt)ar(et,Lt,ot,Qe);return et}function ar(nt,be,_e,Ue){const Qe=be.geometry,ot=be.type,et=[];if(nt.minX=Math.min(nt.minX,be.minX),nt.minY=Math.min(nt.minY,be.minY),nt.maxX=Math.max(nt.maxX,be.maxX),nt.maxY=Math.max(nt.maxY,be.maxY),ot==="Point"||ot==="MultiPoint")for(let Lt=0;Lt<Qe.length;Lt+=3)et.push(Qe[Lt],Qe[Lt+1]),nt.numPoints++,nt.numSimplified++;else if(ot==="LineString")yr(et,Qe,nt,_e,!1,!1);else if(ot==="MultiLineString"||ot==="Polygon")for(let Lt=0;Lt<Qe.length;Lt++)yr(et,Qe[Lt],nt,_e,ot==="Polygon",Lt===0);else if(ot==="MultiPolygon")for(let Lt=0;Lt<Qe.length;Lt++){const vt=Qe[Lt];for(let Bt=0;Bt<vt.length;Bt++)yr(et,vt[Bt],nt,_e,!0,Bt===0)}if(et.length){let Lt=be.tags||null;if(ot==="LineString"&&Ue.lineMetrics){Lt={};for(const Bt in be.tags)Lt[Bt]=be.tags[Bt];Lt.mapbox_clip_start=Qe.start/Qe.size,Lt.mapbox_clip_end=Qe.end/Qe.size}const vt={geometry:et,type:ot==="Polygon"||ot==="MultiPolygon"?3:ot==="LineString"||ot==="MultiLineString"?2:1,tags:Lt};be.id!==null&&(vt.id=be.id),nt.features.push(vt)}}function yr(nt,be,_e,Ue,Qe,ot){const et=Ue*Ue;if(Ue>0&&be.size<(Qe?et:Ue))return void(_e.numPoints+=be.length/3);const Lt=[];for(let vt=0;vt<be.length;vt+=3)(Ue===0||be[vt+2]>et)&&(_e.numSimplified++,Lt.push(be[vt],be[vt+1])),_e.numPoints++;Qe&&(function(vt,Bt){let Kt=0;for(let Zt=0,Er=vt.length,bt=Er-2;Zt<Er;bt=Zt,Zt+=2)Kt+=(vt[Zt]-vt[bt])*(vt[Zt+1]+vt[bt+1]);if(Kt>0===Bt)for(let Zt=0,Er=vt.length;Zt<Er/2;Zt+=2){const bt=vt[Zt],vr=vt[Zt+1];vt[Zt]=vt[Er-2-Zt],vt[Zt+1]=vt[Er-1-Zt],vt[Er-2-Zt]=bt,vt[Er-1-Zt]=vr}})(Lt,ot),nt.push(Lt)}const pr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Jt{constructor(be,_e){const Ue=(_e=this.options=(function(ot,et){for(const Lt in et)ot[Lt]=et[Lt];return ot})(Object.create(pr),_e)).debug;if(Ue&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");let Qe=(function(ot,et){const Lt=[];if(ot.type==="FeatureCollection")for(let vt=0;vt<ot.features.length;vt++)Se(Lt,ot.features[vt],et,vt);else Se(Lt,ot.type==="Feature"?ot:{geometry:ot},et);return Lt})(be,_e);this.tiles={},this.tileCoords=[],Ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Qe=(function(ot,et){const Lt=et.buffer/et.extent;let vt=ot;const Bt=it(ot,1,-1-Lt,Lt,0,-1,2,et),Kt=it(ot,1,1-Lt,2+Lt,0,-1,2,et);return(Bt||Kt)&&(vt=it(ot,1,-Lt,1+Lt,0,-1,2,et)||[],Bt&&(vt=Wt(Bt,1).concat(vt)),Kt&&(vt=vt.concat(Wt(Kt,-1)))),vt})(Qe,_e),Qe.length&&this.splitTile(Qe,0,0,0),Ue&&(Qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(be,_e,Ue,Qe,ot,et,Lt){const vt=[be,_e,Ue,Qe],Bt=this.options,Kt=Bt.debug;for(;vt.length;){Qe=vt.pop(),Ue=vt.pop(),_e=vt.pop(),be=vt.pop();const Zt=1<<_e,Er=ir(_e,Ue,Qe);let bt=this.tiles[Er];if(!bt&&(Kt>1&&console.time("creation"),bt=this.tiles[Er]=ur(be,_e,Ue,Qe,Bt),this.tileCoords.push({z:_e,x:Ue,y:Qe}),Kt)){Kt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,Ue,Qe,bt.numFeatures,bt.numPoints,bt.numSimplified),console.timeEnd("creation"));const gt=`z${_e}`;this.stats[gt]=(this.stats[gt]||0)+1,this.total++}if(bt.source=be,ot==null){if(_e===Bt.indexMaxZoom||bt.numPoints<=Bt.indexMaxPoints)continue}else{if(_e===Bt.maxZoom||_e===ot)continue;if(ot!=null){const gt=ot-_e;if(Ue!==et>>gt||Qe!==Lt>>gt)continue}}if(bt.source=null,be.length===0)continue;Kt>1&&console.time("clipping");const vr=.5*Bt.buffer/Bt.extent,Dr=.5-vr,jr=.5+vr,Ur=1+vr;let nr=null,Hn=null,en=null,Wn=null,Pe=it(be,Zt,Ue-vr,Ue+jr,0,bt.minX,bt.maxX,Bt),Be=it(be,Zt,Ue+Dr,Ue+Ur,0,bt.minX,bt.maxX,Bt);be=null,Pe&&(nr=it(Pe,Zt,Qe-vr,Qe+jr,1,bt.minY,bt.maxY,Bt),Hn=it(Pe,Zt,Qe+Dr,Qe+Ur,1,bt.minY,bt.maxY,Bt),Pe=null),Be&&(en=it(Be,Zt,Qe-vr,Qe+jr,1,bt.minY,bt.maxY,Bt),Wn=it(Be,Zt,Qe+Dr,Qe+Ur,1,bt.minY,bt.maxY,Bt),Be=null),Kt>1&&console.timeEnd("clipping"),vt.push(nr||[],_e+1,2*Ue,2*Qe),vt.push(Hn||[],_e+1,2*Ue,2*Qe+1),vt.push(en||[],_e+1,2*Ue+1,2*Qe),vt.push(Wn||[],_e+1,2*Ue+1,2*Qe+1)}}getTile(be,_e,Ue){be=+be,_e=+_e,Ue=+Ue;const Qe=this.options,{extent:ot,debug:et}=Qe;if(be<0||be>24)return null;const Lt=1<<be,vt=ir(be,_e=_e+Lt&Lt-1,Ue);if(this.tiles[vt])return st(this.tiles[vt],ot);et>1&&console.log("drilling down to z%d-%d-%d",be,_e,Ue);let Bt,Kt=be,Zt=_e,Er=Ue;for(;!Bt&&Kt>0;)Kt--,Zt>>=1,Er>>=1,Bt=this.tiles[ir(Kt,Zt,Er)];return Bt&&Bt.source?(et>1&&(console.log("found parent tile z%d-%d-%d",Kt,Zt,Er),console.time("drilling down")),this.splitTile(Bt.source,Kt,Zt,Er,be,_e,Ue),et>1&&console.timeEnd("drilling down"),this.tiles[vt]?st(this.tiles[vt],ot):null):null}}function ir(nt,be,_e){return 32*((1<<nt)*_e+be)+nt}class xr extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(be,_e){return l._(this,void 0,void 0,(function*(){const Ue=be.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Qe=this._geoJSONIndex.getTile(Ue.z,Ue.x,Ue.y);if(!Qe)return null;const ot=new O(Qe.features,{version:2,extent:l.$});let et=(function(Lt){const vt=new l.cM;return(function(Bt,Kt){for(const Zt in Bt.layers)Kt.writeMessage(3,F,Bt.layers[Zt])})(Lt,vt),vt.finish()})(ot);return et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),{vectorTile:ot,rawData:et.buffer}}))}loadData(be){return l._(this,void 0,void 0,(function*(){var _e;(_e=this._pendingRequest)===null||_e===void 0||_e.abort();const Ue=!!(be&&be.request&&be.request.collectResourceTiming)&&new l.cN(be.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(be,this._pendingRequest);const Qe=yield this._pendingData;this._geoJSONIndex=be.cluster?new ie((function({superclusterOptions:et,clusterProperties:Lt}){if(!Lt||!et)return et;const vt={},Bt={},Kt={accumulated:null,zoom:0},Zt={properties:null},Er=Object.keys(Lt);for(const bt of Er){const[vr,Dr]=Lt[bt],jr=l.cT(Dr),Ur=l.cT(typeof vr=="string"?[vr,["accumulated"],["get",bt]]:vr);vt[bt]=jr.value,Bt[bt]=Ur.value}return et.map=bt=>{Zt.properties=bt;const vr={};for(const Dr of Er)vr[Dr]=vt[Dr].evaluate(Kt,Zt);return vr},et.reduce=(bt,vr)=>{Zt.properties=vr;for(const Dr of Er)Kt.accumulated=bt[Dr],bt[Dr]=Bt[Dr].evaluate(Kt,Zt)},et})(be)).load(Qe.features):(function(et,Lt){return new Jt(et,Lt)})(Qe,be.geojsonVtOptions),this.loaded={};const ot={data:Qe};if(Ue){const et=Ue.finish();et&&(ot.resourceTiming={},ot.resourceTiming[be.source]=JSON.parse(JSON.stringify(et)))}return ot}catch(Qe){if(delete this._pendingRequest,l.cy(Qe))return{abandoned:!0};throw Qe}}))}getData(){return l._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(be){const _e=this.loaded;return _e&&_e[be.uid]?super.reloadTile(be):this.loadTile(be)}loadAndProcessGeoJSON(be,_e){return l._(this,void 0,void 0,(function*(){let Ue=yield this.loadGeoJSON(be,_e);if(delete this._pendingRequest,typeof Ue!="object")throw new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`);if(k(Ue,!0),be.filter){const Qe=l.cT(be.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Qe.result==="error")throw new Error(Qe.value.map((et=>`${et.key}: ${et.message}`)).join(", "));Ue={type:"FeatureCollection",features:Ue.features.filter((et=>Qe.value.evaluate({zoom:0},et)))}}return Ue}))}loadGeoJSON(be,_e){return l._(this,void 0,void 0,(function*(){const{promoteId:Ue}=be;if(be.request){const Qe=yield l.j(be.request,_e);return this._dataUpdateable=l.cV(Qe.data,Ue)?l.cU(Qe.data,Ue):void 0,Qe.data}if(typeof be.data=="string")try{const Qe=JSON.parse(be.data);return this._dataUpdateable=l.cV(Qe,Ue)?l.cU(Qe,Ue):void 0,Qe}catch{throw new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`)}if(!be.dataDiff)throw new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${be.source}`);return l.cW(this._dataUpdateable,be.dataDiff,Ue),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(be){return l._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(be){return this._geoJSONIndex.getClusterExpansionZoom(be.clusterId)}getClusterChildren(be){return this._geoJSONIndex.getChildren(be.clusterId)}getClusterLeaves(be){return this._geoJSONIndex.getLeaves(be.clusterId,be.limit,be.offset)}}class rr{constructor(be){this.self=be,this.actor=new l.J(be),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(_e,Ue)=>{if(this.externalWorkerSourceTypes[_e])throw new Error(`Worker source with name "${_e}" already registered.`);this.externalWorkerSourceTypes[_e]=Ue},this.self.addProtocol=l.cA,this.self.removeProtocol=l.cB,this.self.registerRTLTextPlugin=_e=>{l.cX.setMethods(_e)},this.actor.registerMessageHandler("LDT",((_e,Ue)=>this._getDEMWorkerSource(_e,Ue.source).loadTile(Ue))),this.actor.registerMessageHandler("RDT",((_e,Ue)=>l._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(_e,Ue.source).removeTile(Ue)})))),this.actor.registerMessageHandler("GCEZ",((_e,Ue)=>l._(this,void 0,void 0,(function*(){return this._getWorkerSource(_e,Ue.type,Ue.source).getClusterExpansionZoom(Ue)})))),this.actor.registerMessageHandler("GCC",((_e,Ue)=>l._(this,void 0,void 0,(function*(){return this._getWorkerSource(_e,Ue.type,Ue.source).getClusterChildren(Ue)})))),this.actor.registerMessageHandler("GCL",((_e,Ue)=>l._(this,void 0,void 0,(function*(){return this._getWorkerSource(_e,Ue.type,Ue.source).getClusterLeaves(Ue)})))),this.actor.registerMessageHandler("LD",((_e,Ue)=>this._getWorkerSource(_e,Ue.type,Ue.source).loadData(Ue))),this.actor.registerMessageHandler("GD",((_e,Ue)=>this._getWorkerSource(_e,Ue.type,Ue.source).getData())),this.actor.registerMessageHandler("LT",((_e,Ue)=>this._getWorkerSource(_e,Ue.type,Ue.source).loadTile(Ue))),this.actor.registerMessageHandler("RT",((_e,Ue)=>this._getWorkerSource(_e,Ue.type,Ue.source).reloadTile(Ue))),this.actor.registerMessageHandler("AT",((_e,Ue)=>this._getWorkerSource(_e,Ue.type,Ue.source).abortTile(Ue))),this.actor.registerMessageHandler("RMT",((_e,Ue)=>this._getWorkerSource(_e,Ue.type,Ue.source).removeTile(Ue))),this.actor.registerMessageHandler("RS",((_e,Ue)=>l._(this,void 0,void 0,(function*(){if(!this.workerSources[_e]||!this.workerSources[_e][Ue.type]||!this.workerSources[_e][Ue.type][Ue.source])return;const Qe=this.workerSources[_e][Ue.type][Ue.source];delete this.workerSources[_e][Ue.type][Ue.source],Qe.removeSource!==void 0&&Qe.removeSource(Ue)})))),this.actor.registerMessageHandler("RM",(_e=>l._(this,void 0,void 0,(function*(){delete this.layerIndexes[_e],delete this.availableImages[_e],delete this.workerSources[_e],delete this.demWorkerSources[_e]})))),this.actor.registerMessageHandler("SR",((_e,Ue)=>l._(this,void 0,void 0,(function*(){this.referrer=Ue})))),this.actor.registerMessageHandler("SRPS",((_e,Ue)=>this._syncRTLPluginState(_e,Ue))),this.actor.registerMessageHandler("IS",((_e,Ue)=>l._(this,void 0,void 0,(function*(){this.self.importScripts(Ue)})))),this.actor.registerMessageHandler("SI",((_e,Ue)=>this._setImages(_e,Ue))),this.actor.registerMessageHandler("UL",((_e,Ue)=>l._(this,void 0,void 0,(function*(){this._getLayerIndex(_e).update(Ue.layers,Ue.removedIds)})))),this.actor.registerMessageHandler("SL",((_e,Ue)=>l._(this,void 0,void 0,(function*(){this._getLayerIndex(_e).replace(Ue)}))))}_setImages(be,_e){return l._(this,void 0,void 0,(function*(){this.availableImages[be]=_e;for(const Ue in this.workerSources[be]){const Qe=this.workerSources[be][Ue];for(const ot in Qe)Qe[ot].availableImages=_e}}))}_syncRTLPluginState(be,_e){return l._(this,void 0,void 0,(function*(){return yield l.cX.syncState(_e,this.self.importScripts)}))}_getAvailableImages(be){let _e=this.availableImages[be];return _e||(_e=[]),_e}_getLayerIndex(be){let _e=this.layerIndexes[be];return _e||(_e=this.layerIndexes[be]=new a),_e}_getWorkerSource(be,_e,Ue){if(this.workerSources[be]||(this.workerSources[be]={}),this.workerSources[be][_e]||(this.workerSources[be][_e]={}),!this.workerSources[be][_e][Ue]){const Qe={sendAsync:(ot,et)=>(ot.targetMapId=be,this.actor.sendAsync(ot,et))};switch(_e){case"vector":this.workerSources[be][_e][Ue]=new v(Qe,this._getLayerIndex(be),this._getAvailableImages(be));break;case"geojson":this.workerSources[be][_e][Ue]=new xr(Qe,this._getLayerIndex(be),this._getAvailableImages(be));break;default:this.workerSources[be][_e][Ue]=new this.externalWorkerSourceTypes[_e](Qe,this._getLayerIndex(be),this._getAvailableImages(be))}}return this.workerSources[be][_e][Ue]}_getDEMWorkerSource(be,_e){return this.demWorkerSources[be]||(this.demWorkerSources[be]={}),this.demWorkerSources[be][_e]||(this.demWorkerSources[be][_e]=new x),this.demWorkerSources[be][_e]}}return l.i(self)&&(self.worker=new rr(self)),rr})),i("index",["exports","./shared"],(function(l,a){var c="5.7.1";function p(){var A=new a.A(4);return a.A!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A}let g,v;const x={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(A,s,h){const w=requestAnimationFrame((L=>{C(),s(L)})),{unsubscribe:C}=a.s(A.signal,"abort",(()=>{C(),cancelAnimationFrame(w),h(a.c())}),!1)},frameAsync(A){return new Promise(((s,h)=>{this.frame(A,s,h)}))},getImageData(A,s=0){return this.getImageCanvasContext(A).getImageData(-s,-s,A.width+2*s,A.height+2*s)},getImageCanvasContext(A){const s=window.document.createElement("canvas"),h=s.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return s.width=A.width,s.height=A.height,h.drawImage(A,0,0,A.width,A.height),h},resolveURL:A=>(g||(g=document.createElement("a")),g.href=A,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class b{static testProp(s){if(!b.docStyle)return s[0];for(let h=0;h<s.length;h++)if(s[h]in b.docStyle)return s[h];return s[0]}static create(s,h,w){const C=window.document.createElement(s);return h!==void 0&&(C.className=h),w&&w.appendChild(C),C}static createNS(s,h){return window.document.createElementNS(s,h)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(s,h){s.style[b.transformProp]=h}static addEventListener(s,h,w,C={}){s.addEventListener(h,w,"passive"in C?C:C.capture)}static removeEventListener(s,h,w,C={}){s.removeEventListener(h,w,"passive"in C?C:C.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",b.suppressClickInternal,!0)}),0)}static getScale(s){const h=s.getBoundingClientRect();return{x:h.width/s.offsetWidth||1,y:h.height/s.offsetHeight||1,boundingClientRect:h}}static getPoint(s,h,w){const C=h.boundingClientRect;return new a.P((w.clientX-C.left)/h.x-s.clientLeft,(w.clientY-C.top)/h.y-s.clientTop)}static mousePos(s,h){const w=b.getScale(s);return b.getPoint(s,w,h)}static touchPos(s,h){const w=[],C=b.getScale(s);for(let L=0;L<h.length;L++)w.push(b.getPoint(s,C,h[L]));return w}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const h=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),w=h.querySelectorAll("script");for(const C of w)C.remove();return b.clean(h),h.innerHTML}static isPossiblyDangerous(s,h){const w=h.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!w.includes("javascript:")&&!w.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const h=s.children;for(const w of h)b.removeAttributes(w),b.clean(w)}static removeAttributes(s){for(const{name:h,value:w}of s.attributes)b.isPossiblyDangerous(h,w)&&s.removeAttribute(h)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(A){!M&&k&&(O?F(A):I=A)}};let I,k,M=!1,O=!1;function F(A){const s=A.createTexture();A.bindTexture(A.TEXTURE_2D,s);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,k),A.isContextLost())return;P.supported=!0}catch{}A.deleteTexture(s),M=!0}var N;typeof document<"u"&&(k=document.createElement("img"),k.onload=()=>{I&&F(I),I=null,O=!0},k.onerror=()=>{M=!0,I=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(A){let s,h,w,C;A.resetRequestQueue=()=>{s=[],h=0,w=0,C={}},A.addThrottleControl=te=>{const ce=w++;return C[ce]=te,ce},A.removeThrottleControl=te=>{delete C[te],B()},A.getImage=(te,ce,me=!0)=>new Promise(((Te,Ce)=>{P.supported&&(te.headers||(te.headers={}),te.headers.accept="image/webp,*/*"),a.e(te,{type:"image"}),s.push({abortController:ce,requestParameters:te,supportImageRefresh:me,state:"queued",onError:Fe=>{Ce(Fe)},onSuccess:Fe=>{Te(Fe)}}),B()}));const L=te=>a._(this,void 0,void 0,(function*(){te.state="running";const{requestParameters:ce,supportImageRefresh:me,onError:Te,onSuccess:Ce,abortController:Fe}=te,We=me===!1&&!a.i(self)&&!a.g(ce.url)&&(!ce.headers||Object.keys(ce.headers).reduce(((dt,_t)=>dt&&_t==="accept"),!0));h++;const ct=We?X(ce,Fe):a.m(ce,Fe);try{const dt=yield ct;delete te.abortController,te.state="completed",dt.data instanceof HTMLImageElement||a.b(dt.data)?Ce(dt):dt.data&&Ce({data:yield(ut=dt.data,typeof createImageBitmap=="function"?a.f(ut):a.h(ut)),cacheControl:dt.cacheControl,expires:dt.expires})}catch(dt){delete te.abortController,Te(dt)}finally{h--,B()}var ut})),B=()=>{const te=(()=>{for(const ce of Object.keys(C))if(C[ce]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ce=h;ce<te&&s.length>0;ce++){const me=s.shift();me.abortController.signal.aborted?ce--:L(me)}},X=(te,ce)=>new Promise(((me,Te)=>{const Ce=new Image,Fe=te.url,We=te.credentials;We&&We==="include"?Ce.crossOrigin="use-credentials":(We&&We==="same-origin"||!a.d(Fe))&&(Ce.crossOrigin="anonymous"),ce.signal.addEventListener("abort",(()=>{Ce.src="",Te(a.c())})),Ce.fetchPriority="high",Ce.onload=()=>{Ce.onerror=Ce.onload=null,me({data:Ce})},Ce.onerror=()=>{Ce.onerror=Ce.onload=null,ce.signal.aborted||Te(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Ce.src=Fe}))})(N||(N={})),N.resetRequestQueue();class ${constructor(s){this._transformRequestFn=s??null}transformRequest(s,h){return this._transformRequestFn&&this._transformRequestFn(s,h)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function j(A){const s=[];if(typeof A=="string")s.push({id:"default",url:A});else if(A&&A.length>0){const h=[];for(const{id:w,url:C}of A){const L=`${w}${C}`;h.indexOf(L)===-1&&(h.push(L),s.push({id:w,url:C}))}}return s}function U(A,s,h){try{const w=new URL(A);return w.pathname+=`${s}${h}`,w.toString()}catch{throw new Error(`Invalid sprite URL "${A}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function H(A){const{userImage:s}=A;return!!(s&&s.render&&s.render())&&(A.data.replace(new Uint8Array(s.data.buffer)),!0)}class Y extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:h,promiseResolve:w}of this.requestors)w(this._getImagesForIds(h));this.requestors=[]}}getImage(s){const h=this.images[s];if(h&&!h.data&&h.spriteData){const w=h.spriteData;h.data=new a.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),h.spriteData=null}return h}addImage(s,h){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,h)&&(this.images[s]=h)}_validate(s,h){let w=!0;const C=h.data||h.spriteData;return this._validateStretch(h.stretchX,C&&C.width)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchX" value`))),w=!1),this._validateStretch(h.stretchY,C&&C.height)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchY" value`))),w=!1),this._validateContent(h.content,h)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "content" value`))),w=!1),w}_validateStretch(s,h){if(!s)return!0;let w=0;for(const C of s){if(C[0]<w||C[1]<C[0]||h<C[1])return!1;w=C[1]}return!0}_validateContent(s,h){if(!s)return!0;if(s.length!==4)return!1;const w=h.spriteData,C=w&&w.width||h.data.width,L=w&&w.height||h.data.height;return!(s[0]<0||C<s[0]||s[1]<0||L<s[1]||s[2]<0||C<s[2]||s[3]<0||L<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,h,w=!0){const C=this.getImage(s);if(w&&(C.data.width!==h.data.width||C.data.height!==h.data.height))throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=C.version+1,this.images[s]=h,this.updatedImages[s]=!0}removeImage(s){const h=this.images[s];delete this.images[s],delete this.patterns[s],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise(((h,w)=>{let C=!0;if(!this.isLoaded())for(const L of s)this.images[L]||(C=!1);this.isLoaded()||C?h(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:h})}))}_getImagesForIds(s){const h={};for(const w of s){let C=this.getImage(w);C||(this.fire(new a.l("styleimagemissing",{id:w})),C=this.getImage(w)),C?h[w]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,textFitWidth:C.textFitWidth,textFitHeight:C.textFitHeight,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.w(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){const{width:s,height:h}=this.atlasImage;return{width:s,height:h}}getPattern(s){const h=this.patterns[s],w=this.getImage(s);if(!w)return null;if(h&&h.position.version===w.version)return h.position;if(h)h.position.version=w.version;else{const C={w:w.data.width+2,h:w.data.height+2,x:0,y:0},L=new a.I(C,w);this.patterns[s]={bin:C,position:L}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const h=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(s,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const L in this.patterns)s.push(this.patterns[L].bin);const{w:h,h:w}=a.p(s),C=this.atlasImage;C.resize({width:h||1,height:w||1});for(const L in this.patterns){const{bin:B}=this.patterns[L],X=B.x+1,te=B.y+1,ce=this.getImage(L).data,me=ce.width,Te=ce.height;a.R.copy(ce,C,{x:0,y:0},{x:X,y:te},{width:me,height:Te}),a.R.copy(ce,C,{x:0,y:Te-1},{x:X,y:te-1},{width:me,height:1}),a.R.copy(ce,C,{x:0,y:0},{x:X,y:te+Te},{width:me,height:1}),a.R.copy(ce,C,{x:me-1,y:0},{x:X-1,y:te},{width:1,height:Te}),a.R.copy(ce,C,{x:0,y:0},{x:X+me,y:te},{width:1,height:Te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const h of s){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const w=this.getImage(h);w||a.w(`Image with ID: "${h}" was not found`),H(w)&&this.updateImage(h,w)}}}const ae=1e20;function ee(A,s,h,w,C,L,B,X,te){for(let ce=s;ce<s+w;ce++)G(A,h*L+ce,L,C,B,X,te);for(let ce=h;ce<h+C;ce++)G(A,ce*L+s,1,w,B,X,te)}function G(A,s,h,w,C,L,B){L[0]=0,B[0]=-ae,B[1]=ae,C[0]=A[s];for(let X=1,te=0,ce=0;X<w;X++){C[X]=A[s+X*h];const me=X*X;do{const Te=L[te];ce=(C[X]-C[Te]+me-Te*Te)/(X-Te)/2}while(ce<=B[te]&&--te>-1);te++,L[te]=X,B[te]=ce,B[te+1]=ae}for(let X=0,te=0;X<w;X++){for(;B[te+1]<X;)te++;const ce=L[te],me=X-ce;A[s+X*h]=C[ce]+me*me}}class ie{constructor(s,h,w){this.requestManager=s,this.localIdeographFontFamily=h,this.entries={},this.lang=w}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,(function*(){const h=[];for(const L in s)for(const B of s[L])h.push(this._getAndCacheGlyphsPromise(L,B));const w=yield Promise.all(h),C={};for(const{stack:L,id:B,glyph:X}of w)C[L]||(C[L]={}),C[L][B]=X&&{id:X.id,bitmap:X.bitmap.clone(),metrics:X.metrics};return C}))}_getAndCacheGlyphsPromise(s,h){return a._(this,void 0,void 0,(function*(){let w=this.entries[s];w||(w=this.entries[s]={glyphs:{},requests:{},ranges:{}});let C=w.glyphs[h];if(C!==void 0)return{stack:s,id:h,glyph:C};if(C=this._tinySDF(w,s,h),C)return w.glyphs[h]=C,{stack:s,id:h,glyph:C};const L=Math.floor(h/256);if(256*L>65535)throw new Error("glyphs > 65535 not supported");if(w.ranges[L])return{stack:s,id:h,glyph:C};if(!this.url)throw new Error("glyphsUrl is not set");if(!w.requests[L]){const X=ie.loadGlyphRange(s,L,this.url,this.requestManager);w.requests[L]=X}const B=yield w.requests[L];for(const X in B)this._doesCharSupportLocalGlyph(+X)||(w.glyphs[+X]=B[+X]);return w.ranges[L]=!0,{stack:s,id:h,glyph:B[h]||null}}))}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||a.u["CJK Unified Ideographs"](s)||a.u["Hangul Syllables"](s)||a.u.Hiragana(s)||a.u.Katakana(s)||a.u["CJK Symbols and Punctuation"](s)||a.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,h,w){const C=this.localIdeographFontFamily;if(!C||!this._doesCharSupportLocalGlyph(w))return;let L=s.tinySDF;if(!L){let X="400";/bold/i.test(h)?X="900":/medium/i.test(h)?X="500":/light/i.test(h)&&(X="200"),L=s.tinySDF=new ie.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:C,fontWeight:X})}const B=L.draw(String.fromCharCode(w));return{id:w,bitmap:new a.q({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}ie.loadGlyphRange=function(A,s,h,w){return a._(this,void 0,void 0,(function*(){const C=256*s,L=C+255,B=w.transformRequest(h.replace("{fontstack}",A).replace("{range}",`${C}-${L}`),"Glyphs"),X=yield a.n(B,new AbortController);if(!X||!X.data)throw new Error(`Could not load glyph range. range: ${s}, ${C}-${L}`);const te={};for(const ce of a.o(X.data))te[ce.id]=ce;return te}))},ie.TinySDF=class{constructor({fontSize:A=24,buffer:s=3,radius:h=8,cutoff:w=.25,fontFamily:C="sans-serif",fontWeight:L="normal",fontStyle:B="normal",lang:X=null}={}){this.buffer=s,this.cutoff=w,this.radius=h,this.lang=X;const te=this.size=A+4*s,ce=this._createCanvas(te),me=this.ctx=ce.getContext("2d",{willReadFrequently:!0});me.font=`${B} ${L} ${A}px ${C}`,me.textBaseline="alphabetic",me.textAlign="left",me.fillStyle="black",this.gridOuter=new Float64Array(te*te),this.gridInner=new Float64Array(te*te),this.f=new Float64Array(te),this.z=new Float64Array(te+1),this.v=new Uint16Array(te)}_createCanvas(A){const s=document.createElement("canvas");return s.width=s.height=A,s}draw(A){const{width:s,actualBoundingBoxAscent:h,actualBoundingBoxDescent:w,actualBoundingBoxLeft:C,actualBoundingBoxRight:L}=this.ctx.measureText(A),B=Math.ceil(h),X=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(L-C))),te=Math.min(this.size-this.buffer,B+Math.ceil(w)),ce=X+2*this.buffer,me=te+2*this.buffer,Te=Math.max(ce*me,0),Ce=new Uint8ClampedArray(Te),Fe={data:Ce,width:ce,height:me,glyphWidth:X,glyphHeight:te,glyphTop:B,glyphLeft:0,glyphAdvance:s};if(X===0||te===0)return Fe;const{ctx:We,buffer:ct,gridInner:ut,gridOuter:dt}=this;this.lang&&(We.lang=this.lang),We.clearRect(ct,ct,X,te),We.fillText(A,ct,ct+B);const _t=We.getImageData(ct,ct,X,te);dt.fill(ae,0,Te),ut.fill(0,0,Te);for(let Pt=0;Pt<te;Pt++)for(let Et=0;Et<X;Et++){const Mt=_t.data[4*(Pt*X+Et)+3]/255;if(Mt===0)continue;const Ot=(Pt+ct)*ce+Et+ct;if(Mt===1)dt[Ot]=0,ut[Ot]=ae;else{const Tt=.5-Mt;dt[Ot]=Tt>0?Tt*Tt:0,ut[Ot]=Tt<0?Tt*Tt:0}}ee(dt,0,0,ce,me,ce,this.f,this.v,this.z),ee(ut,ct,ct,X,te,ce,this.f,this.v,this.z);for(let Pt=0;Pt<Te;Pt++){const Et=Math.sqrt(dt[Pt])-Math.sqrt(ut[Pt]);Ce[Pt]=Math.round(255-255*(Et/this.radius+this.cutoff))}return Fe}};class oe{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,h){return a.B(s.expression.evaluate(h))}interpolate(s,h,w){return{x:a.C.number(s.x,h.x,w),y:a.C.number(s.y,h.y,w),z:a.C.number(s.z,h.z,w)}}}let ue;class de extends a.E{constructor(s){super(),ue=ue||new a.r({anchor:new a.D(a.v.light.anchor),position:new oe,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(ue),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,h={}){if(!this._validate(a.x,s,h))for(const w in s){const C=s[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),C):this._transitionable.setValue(w,C)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,h,w){return(!w||w.validate!==!1)&&a.y(this,s.call(a.z,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Me=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class ge extends a.E{constructor(s){super(),this._transitionable=new a.t(Me),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(s,h={}){if(!this._validate(a.G,s,h)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const w in s){const C=s[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),C):this._transitionable.setValue(w,C)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,h,w={}){return w?.validate!==!1&&a.y(this,s.call(a.z,a.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class xe{constructor(s,h){this.width=s,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,h){const w=s.join(",")+String(h);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(s,h)),this.dashEntry[w]}getDashRanges(s,h,w){const C=[];let L=s.length%2==1?-s[s.length-1]*w:0,B=s[0]*w,X=!0;C.push({left:L,right:B,isDash:X,zeroLength:s[0]===0});let te=s[0];for(let ce=1;ce<s.length;ce++){X=!X;const me=s[ce];L=te*w,te+=me,B=te*w,C.push({left:L,right:B,isDash:X,zeroLength:me===0})}return C}addRoundDash(s,h,w){const C=h/2;for(let L=-w;L<=w;L++){const B=this.width*(this.nextRow+w+L);let X=0,te=s[X];for(let ce=0;ce<this.width;ce++){ce/te.right>1&&(te=s[++X]);const me=Math.abs(ce-te.left),Te=Math.abs(ce-te.right),Ce=Math.min(me,Te);let Fe;const We=L/w*(C+1);if(te.isDash){const ct=C-Math.abs(We);Fe=Math.sqrt(Ce*Ce+ct*ct)}else Fe=C-Math.sqrt(Ce*Ce+We*We);this.data[B+ce]=Math.max(0,Math.min(255,Fe+128))}}}addRegularDash(s){for(let X=s.length-1;X>=0;--X){const te=s[X],ce=s[X+1];te.zeroLength?s.splice(X,1):ce&&ce.isDash===te.isDash&&(ce.left=te.left,s.splice(X,1))}const h=s[0],w=s[s.length-1];h.isDash===w.isDash&&(h.left=w.left-this.width,w.right=h.right+this.width);const C=this.width*this.nextRow;let L=0,B=s[L];for(let X=0;X<this.width;X++){X/B.right>1&&(B=s[++L]);const te=Math.abs(X-B.left),ce=Math.abs(X-B.right),me=Math.min(te,ce);this.data[C+X]=Math.max(0,Math.min(255,(B.isDash?me:-me)+128))}}addDash(s,h){const w=h?7:0,C=2*w+1;if(this.nextRow+C>this.height)return a.w("LineAtlas out of space"),null;let L=0;for(let X=0;X<s.length;X++)L+=s[X];if(L!==0){const X=this.width/L,te=this.getDashRanges(s,this.width,X);h?this.addRoundDash(te,X,w):this.addRegularDash(te)}const B={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:L};return this.nextRow+=C,this.dirty=!0,B}bind(s){const h=s.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}const Ee="maplibre_preloaded_worker_pool";class Ae{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach((h=>{h.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ee]}numActive(){return Object.keys(this.active).length}}const fe=Math.floor(x.hardwareConcurrency/2);let Se,we;function De(){return Se||(Se=new Ae),Se}Ae.workerCount=a.H(globalThis)?Math.max(Math.min(fe,3),1):1;class Re{constructor(s,h){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=h;const w=this.workerPool.acquire(h);for(let C=0;C<w.length;C++){const L=new a.J(w[C],h);L.name=`Worker ${C}`,this.actors.push(L)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,h){const w=[];for(const C of this.actors)w.push(C.sendAsync({type:s,data:h}));return Promise.all(w)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach((h=>{h.remove()})),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,h){for(const w of this.actors)w.registerMessageHandler(s,h)}}function $e(){return we||(we=new Re(De(),a.K),we.registerMessageHandler("GR",((A,s,h)=>a.m(s,h)))),we}function Oe(A,s){const h=a.L();return a.M(h,h,[1,1,0]),a.N(h,h,[.5*A.width,.5*A.height,1]),A.calculatePosMatrix?a.O(h,h,A.calculatePosMatrix(s.toUnwrapped())):h}function it(A,s,h,w,C,L,B){var X;const te=(function(Ce,Fe,We){if(Ce)for(const ct of Ce){const ut=Fe[ct];if(ut&&ut.source===We&&ut.type==="fill-extrusion")return!0}else for(const ct in Fe){const ut=Fe[ct];if(ut.source===We&&ut.type==="fill-extrusion")return!0}return!1})((X=C?.layers)!==null&&X!==void 0?X:null,s,A.id),ce=L.maxPitchScaleFactor(),me=A.tilesIn(w,ce,te);me.sort(Ye);const Te=[];for(const Ce of me)Te.push({wrappedTileID:Ce.tileID.wrapped().key,queryResults:Ce.tile.queryRenderedFeatures(s,h,A._state,Ce.queryGeometry,Ce.cameraQueryGeometry,Ce.scale,C,L,ce,Oe(A.transform,Ce.tileID),B?(Fe,We)=>B(Ce.tileID,Fe,We):void 0)});return(function(Ce,Fe){for(const We in Ce)for(const ct of Ce[We])rt(ct,Fe);return Ce})((function(Ce){const Fe={},We={};for(const ct of Ce){const ut=ct.queryResults,dt=ct.wrappedTileID,_t=We[dt]=We[dt]||{};for(const Pt in ut){const Et=ut[Pt],Mt=_t[Pt]=_t[Pt]||{},Ot=Fe[Pt]=Fe[Pt]||[];for(const Tt of Et)Mt[Tt.featureIndex]||(Mt[Tt.featureIndex]=!0,Ot.push(Tt))}}return Fe})(Te),A)}function Ye(A,s){const h=A.tileID,w=s.tileID;return h.overscaledZ-w.overscaledZ||h.canonical.y-w.canonical.y||h.wrap-w.wrap||h.canonical.x-w.canonical.x}function rt(A,s){const h=A.feature,w=s.getFeatureState(h.layer["source-layer"],h.id);h.source=h.layer.source,h.layer["source-layer"]&&(h.sourceLayer=h.layer["source-layer"]),h.state=w}function Ie(A,s,h){return a._(this,void 0,void 0,(function*(){let w=A;if(A.url?w=(yield a.j(s.transformRequest(A.url,"Source"),h)).data:yield x.frameAsync(h),!w)return null;const C=a.Q(a.e(w,A),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in w&&w.vector_layers&&(C.vectorLayerIds=w.vector_layers.map((L=>L.id))),C}))}class It{constructor(s,h){s&&(h?this.setSouthWest(s).setNorthEast(h):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}extend(s){const h=this._sw,w=this._ne;let C,L;if(s instanceof a.S)C=s,L=s;else{if(!(s instanceof It))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(It.convert(s)):this.extend(a.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.S.convert(s)):this;if(C=s._sw,L=s._ne,!C||!L)return this}return h||w?(h.lng=Math.min(C.lng,h.lng),h.lat=Math.min(C.lat,h.lat),w.lng=Math.max(L.lng,w.lng),w.lat=Math.max(L.lat,w.lat)):(this._sw=new a.S(C.lng,C.lat),this._ne=new a.S(L.lng,L.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:h,lat:w}=a.S.convert(s);let C=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&C}static convert(s){return s instanceof It?s:s&&new It(s)}static fromLngLat(s,h=0){const w=360*h/40075017,C=w/Math.cos(Math.PI/180*s.lat);return new It(new a.S(s.lng-C,s.lat-w),new a.S(s.lng+C,s.lat+w))}adjustAntiMeridian(){const s=new a.S(this._sw.lng,this._sw.lat),h=new a.S(this._ne.lng,this._ne.lat);return new It(s,s.lng>h.lng?new a.S(h.lng+360,h.lat):h)}}class at{constructor(s,h,w){this.bounds=It.convert(this.validateBounds(s)),this.minzoom=h||0,this.maxzoom=w||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const h=Math.pow(2,s.z),w=Math.floor(a.V(this.bounds.getWest())*h),C=Math.floor(a.U(this.bounds.getNorth())*h),L=Math.ceil(a.V(this.bounds.getEast())*h),B=Math.ceil(a.U(this.bounds.getSouth())*h);return s.x>=w&&s.x<L&&s.y>=C&&s.y<B}}class je extends a.E{constructor(s,h,w,C){if(super(),this.id=s,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(h,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new at(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new a.k(s))}}))}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(h,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};w.request.collectResourceTiming=this._collectResourceTiming;let C="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise(((L,B)=>{s.reloadPromise={resolve:L,reject:B}}))}else s.actor=this.dispatcher.getActor(),C="LT";s.abortController=new AbortController;try{const L=yield s.actor.sendAsync({type:C,data:w},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,L)}catch(L){if(delete s.abortController,s.aborted)return;if(L&&L.status!==404)throw L;this._afterTileLoadWorkerResponse(s,null)}}))}_afterTileLoadWorkerResponse(s,h){if(h&&h.resourceTiming&&(s.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&s.setExpiryData(h),s.loadVectorData(h,this.map.painter),s.reloadPromise){const w=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(w.resolve).catch(w.reject)}}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ht extends a.E{constructor(s,h,w,C){super(),this.id=s,this.dispatcher=w,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},h),a.e(this,a.Q(h,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(s=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const h=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,h&&(a.e(this,h),h.bounds&&(this.tileBounds=new at(h.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(h){this._tileJSONRequest=null,this.fire(new a.k(h))}}))}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const w=yield N.getImage(this.map._requestManager.transformRequest(h,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(w&&w.data){this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&s.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const C=this.map.painter.context,L=C.gl,B=w.data;s.texture=this.map.painter.getTileTexture(B.width),s.texture?s.texture.update(B,{useMipmap:!0}):(s.texture=new a.T(C,B,L.RGBA,{useMipmap:!0}),s.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(w){if(delete s.abortController,s.aborted)s.state="unloaded";else if(w)throw s.state="errored",w}}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)}))}hasTransition(){return!1}}class Wt extends Ht{constructor(s,h,w,C){super(s,h,w,C),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w=this.map._requestManager.transformRequest(h,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const C=yield N.getImage(w,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(C&&C.data){const L=C.data;this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&s.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const B=a.b(L)&&a.W()?L:yield this.readImageNow(L),X={type:this.type,uid:s.uid,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const te=yield s.actor.sendAsync({type:"LDT",data:X});s.dem=te,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(C){if(delete s.abortController,s.aborted)s.state="unloaded";else if(C)throw s.state="errored",C}}))}readImageNow(s){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const h=s.width+2,w=s.height+2;try{return new a.R({width:h,height:w},yield a.Y(s,-1,-1,h,w))}catch{}}return x.getImageData(s,1)}))}_getNeighboringTiles(s){const h=s.canonical,w=Math.pow(2,h.z),C=(h.x-1+w)%w,L=h.x===0?s.wrap-1:s.wrap,B=(h.x+1+w)%w,X=h.x+1===w?s.wrap+1:s.wrap,te={};return te[new a.Z(s.overscaledZ,L,h.z,C,h.y).key]={backfilled:!1},te[new a.Z(s.overscaledZ,X,h.z,B,h.y).key]={backfilled:!1},h.y>0&&(te[new a.Z(s.overscaledZ,L,h.z,C,h.y-1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,s.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,X,h.z,B,h.y-1).key]={backfilled:!1}),h.y+1<w&&(te[new a.Z(s.overscaledZ,L,h.z,C,h.y+1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,s.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},te[new a.Z(s.overscaledZ,X,h.z,B,h.y+1).key]={backfilled:!1}),te}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))}))}}class zt extends a.E{constructor(s,h,w,C){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:h.data},this.actor=w.getActor(),this.setEventedParent(C),this._data=h.data,this._options=a.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId,h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(h.buffer!==void 0?h.buffer:128),tolerance:this._pixelsToTileUnits(h.tolerance!==void 0?h.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(h.clusterMaxZoom),minPoints:Math.max(2,h.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(h.clusterRadius||50),log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(a.$/this.tileSize)}_getClusterMaxZoom(s){const h=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${h}"`),h}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,(function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})}))}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map((h=>h.coordinates)).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const s=new It,h=yield this.getData();let w;switch(h.type){case"FeatureCollection":w=h.features.map((C=>this.getCoordinatesFromGeometry(C.geometry))).flat(1/0);break;case"Feature":w=this.getCoordinatesFromGeometry(h.geometry);break;default:w=this.getCoordinatesFromGeometry(h)}if(w.length==0)return s;for(let C=0;C<w.length-1;C+=2)s.extend([w[C],w[C+1]]);return s}))}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,h,w){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:h,offset:w}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:s,diff:h}=this._pendingWorkerUpdate;if(!s&&!h)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const w=a.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(w.request=this.map._requestManager.transformRequest(x.resolveURL(s),"Source"),w.request.collectResourceTiming=this._collectResourceTiming):w.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):h&&(w.dataDiff=h,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:w});if(this._isUpdatingWorker=!1,this._removed||C.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=C.data;let L=null;C.resourceTiming&&C.resourceTiming[this.id]&&(L=C.resourceTiming[this.id].slice(0));const B={dataType:"source"};this._collectResourceTiming&&L&&L.length>0&&a.e(B,{resourceTiming:L}),this.fire(new a.l("data",Object.assign(Object.assign({},B),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},B),{sourceDataType:"content"})))}catch(C){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(C))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.actor?"RT":"LT";s.actor=this.actor;const w={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;const C=yield this.actor.sendAsync({type:h,data:w},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(C,this.map.painter,h==="RT")}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class st extends a.E{constructor(s,h,w,C){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=w,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=h}load(s){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const h=yield N.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,s&&(this.coordinates=s),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,this.fire(new a.k(h))}}))}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const h=s.map(a.a1.fromLngLat);var w;return this.tileID=(function(C){const L=a.a2.fromPoints(C),B=L.width(),X=L.height(),te=Math.max(B,X),ce=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),me=Math.pow(2,ce);return new a.a4(ce,Math.floor((L.minX+L.maxX)/2*me),Math.floor((L.minY+L.maxY)/2*me))})(h),this.terrainTileRanges=this._getOverlappingTileRanges(h),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=h.map((C=>this.tileID.getTilePoint(C)._round())),this.flippedWindingOrder=((w=this.tileCoords)[1].x-w[0].x)*(w[2].y-w[0].y)-(w[1].y-w[0].y)*(w[2].x-w[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,h=s.gl;this.texture||(this.texture=new a.T(s,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let w=!1;for(const C in this.tiles){const L=this.tiles[C];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,w=!0)}w&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:h,minY:w,maxX:C,maxY:L}=a.a2.fromPoints(s),B={};for(let X=0;X<=a.a3;X++){const te=Math.pow(2,X),ce=Math.floor(h*te),me=Math.floor(w*te),Te=Math.floor(C*te),Ce=Math.floor(L*te);B[X]={minTileX:ce,minTileY:me,maxTileX:Te,maxTileY:Ce}}return B}}class sr extends st{constructor(s,h,w,C){super(s,h,w,C),this.roundZoom=!0,this.type="video",this.options=h}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const h of s.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{const h=yield a.a5(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new a.k(h))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const h=this.video.seekable;s<h.start(0)||s>h.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,h=s.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(s,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let w=!1;for(const C in this.tiles){const L=this.tiles[C];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,w=!0)}w&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ur extends st{constructor(s,h,w,C){super(s,h,w,C),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some((L=>!Array.isArray(L)||L.length!==2||L.some((B=>typeof B!="number"))))||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,w=h.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(h,this.canvas,w.RGBA,{premultiply:!0});let C=!1;for(const L in this.tiles){const B=this.tiles[L];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ar={},yr=A=>{switch(A){case"geojson":return zt;case"image":return st;case"raster":return Ht;case"raster-dem":return Wt;case"vector":return je;case"video":return sr;case"canvas":return ur}return ar[A]},pr="RTLPluginLoaded";class Jt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=$e()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch((h=>{throw this.status="error",h}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,(function*(h,w=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!w)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(pr))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ir=null;function xr(){return ir||(ir=new Jt),ir}class rr{constructor(s,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=a.a7(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const h=s+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,h,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=(function(C,L){const B={};if(!L)return B;for(const X of C){const te=X.layerIds.map((ce=>L.getLayer(ce))).filter(Boolean);if(te.length!==0){X.layers=te,X.stateDependentLayerIds&&(X.stateDependentLayers=X.stateDependentLayerIds.map((ce=>te.filter((me=>me.id===ce))[0])));for(const ce of te)B[ce.id]=X}}return B})(s.buckets,h?.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const L=this.buckets[C];if(L instanceof a.a9){if(this.hasSymbolBuckets=!0,!w)break;L.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const L=this.buckets[C];if(L instanceof a.a9&&L.hasRTLText){this.hasRTLText=!0,xr().lazyLoad();break}}this.queryPadding=0;for(const C in this.buckets){const L=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(C).queryRadius(L))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const w in this.buckets){const C=this.buckets[w];C.uploadPending()&&C.upload(s)}const h=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(s,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(s,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,h,w,C,L,B,X,te,ce,me,Te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:L,scale:B,tileSize:this.tileSize,pixelPosMatrix:me,transform:te,params:X,queryPadding:this.queryPadding*ce,getElevation:Te},s,h,w):{}}querySourceFeatures(s,h){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const C=w.loadVTLayers(),L=h&&h.sourceLayer?h.sourceLayer:"",B=C._geojsonTileLayer||C[L];if(!B)return;const X=a.aa(h&&h.filter),{z:te,x:ce,y:me}=this.tileID.canonical,Te={z:te,x:ce,y:me};for(let Ce=0;Ce<B.length;Ce++){const Fe=B.feature(Ce);if(X.needGeometry){const ut=a.ab(Fe,!0);if(!X.filter(new a.F(this.tileID.overscaledZ),ut,this.tileID.canonical))continue}else if(!X.filter(new a.F(this.tileID.overscaledZ),Fe))continue;const We=w.getId(Fe,L),ct=new a.ac(Fe,te,ce,me,We);ct.tile=Te,s.push(ct)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const h=this.expirationTime;if(s.cacheControl){const w=a.ad(s.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const w=Date.now();let C=!1;if(this.expirationTime>w)C=!1;else if(h)if(this.expirationTime<h)C=!0;else{const L=this.expirationTime-h;L?this.expirationTime=w+Math.max(L,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!h.style.hasLayer(C))continue;const L=this.buckets[C],B=L.layers[0].sourceLayer||"_geojsonTileLayer",X=w[B],te=s[B];if(!X||!te||Object.keys(te).length===0)continue;L.update(te,X,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ce=h&&h.style&&h.style.getLayer(C);ce&&(this.queryPadding=Math.max(this.queryPadding,ce.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<x.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=x.now()+s}setDependencies(s,h){const w={};for(const C of h)w[C]=!0;this.dependencies[s]=w}hasDependency(s,h){for(const w of s){const C=this.dependencies[w];if(C){for(const L of h)if(C[L])return!0}}return!1}}class nt{constructor(s,h){this.max=s,this.onRemove=h,this.reset()}reset(){for(const s in this.data)for(const h of this.data[s])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(s,h,w){const C=s.wrapped().key;this.data[C]===void 0&&(this.data[C]=[]);const L={value:h,timeout:void 0};if(w!==void 0&&(L.timeout=setTimeout((()=>{this.remove(s,L)}),w)),this.data[C].push(L),this.order.push(C),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const h=this.data[s].shift();return h.timeout&&clearTimeout(h.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),h.value}getByKey(s){const h=this.data[s];return h?h[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,h){if(!this.has(s))return this;const w=s.wrapped().key,C=h===void 0?0:this.data[w].indexOf(h),L=this.data[w][C];return this.data[w].splice(C,1),L.timeout&&clearTimeout(L.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(L.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(s){const h=[];for(const w in this.data)for(const C of this.data[w])s(C.value)||h.push(C);for(const w of h)this.remove(w.value.tileID,w)}}class be{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,h,w){const C=String(h);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][C]=this.stateChanges[s][C]||{},a.e(this.stateChanges[s][C],w),this.deletedStates[s]===null){this.deletedStates[s]={};for(const L in this.state[s])L!==C&&(this.deletedStates[s][L]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][C]===null){this.deletedStates[s][C]={};for(const L in this.state[s][C])w[L]||(this.deletedStates[s][C][L]=null)}else for(const L in w)this.deletedStates[s]&&this.deletedStates[s][C]&&this.deletedStates[s][C][L]===null&&delete this.deletedStates[s][C][L]}removeFeatureState(s,h,w){if(this.deletedStates[s]===null)return;const C=String(h);if(this.deletedStates[s]=this.deletedStates[s]||{},w&&h!==void 0)this.deletedStates[s][C]!==null&&(this.deletedStates[s][C]=this.deletedStates[s][C]||{},this.deletedStates[s][C][w]=null);else if(h!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][C])for(w in this.deletedStates[s][C]={},this.stateChanges[s][C])this.deletedStates[s][C][w]=null;else this.deletedStates[s][C]=null;else this.deletedStates[s]=null}getState(s,h){const w=String(h),C=a.e({},(this.state[s]||{})[w],(this.stateChanges[s]||{})[w]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const L=this.deletedStates[s][h];if(L===null)return{};for(const B in L)delete C[B]}return C}initializeTileState(s,h){s.setFeatureState(this.state,h)}coalesceChanges(s,h){const w={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const L={};for(const B in this.stateChanges[C])this.state[C][B]||(this.state[C][B]={}),a.e(this.state[C][B],this.stateChanges[C][B]),L[B]=this.state[C][B];w[C]=L}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const L={};if(this.deletedStates[C]===null)for(const B in this.state[C])L[B]={},this.state[C][B]={};else for(const B in this.deletedStates[C]){if(this.deletedStates[C][B]===null)this.state[C][B]={};else for(const X of Object.keys(this.deletedStates[C][B]))delete this.state[C][B][X];L[B]=this.state[C][B]}w[C]=w[C]||{},a.e(w[C],L)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const C in s)s[C].setFeatureState(w,h)}}const _e=89.25;function Ue(A,s){const h=a.ah(s.lat,-a.ai,a.ai);return new a.P(a.V(s.lng)*A,a.U(h)*A)}function Qe(A,s){return new a.a1(s.x/A,s.y/A).toLngLat()}function ot(A){return A.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-A.pitch)),Math.tan(a.ae(_e-A.pitch)))}function et(A,s){const h=A.canonical,w=s/a.af(h.z),C=h.x+Math.pow(2,h.z)*A.wrap,L=a.ag(new Float64Array(16));return a.M(L,L,[C*w,h.y*w,0]),a.N(L,L,[w/a.$,w/a.$,1]),L}function Lt(A,s,h,w,C){const L=a.a1.fromLngLat(A,s),B=C*a.aj(1,A.lat),X=B*Math.cos(a.ae(h)),te=Math.sqrt(B*B-X*X),ce=te*Math.sin(a.ae(-w)),me=te*Math.cos(a.ae(-w));return new a.a1(L.x+ce,L.y+me,L.z+X)}function vt(A,s,h){const w=s.intersectsFrustum(A);if(!h||w===0)return w;const C=s.intersectsPlane(h);return C===0?0:w===2&&C===2?2:1}function Bt(A,s,h){let w=0;const C=(h-s)/10;for(let L=0;L<10;L++)w+=C*Math.pow(Math.cos(s+(L+.5)/10*(h-s)),A);return w}function Kt(A,s){return function(h,w,C,L,B){const X=2*((A-1)/a.ak(Math.cos(a.ae(_e-B))/Math.cos(a.ae(_e)))-1),te=Math.acos(C/L),ce=2*Bt(X-1,0,a.ae(B/2)),me=Math.min(a.ae(_e),te+a.ae(B/2)),Te=Bt(X-1,Math.min(me,te-a.ae(B/2)),me),Ce=Math.atan(w/C),Fe=Math.hypot(w,C);let We=h;return We+=a.ak(L/Fe/Math.max(.5,Math.cos(a.ae(B/2)))),We+=X*a.ak(Math.cos(Ce))/2,We-=a.ak(Math.max(1,Te/ce/s))/2,We}}const Zt=Kt(9.314,3);function Er(A,s){const h=(s.roundZoom?Math.round:Math.floor)(A.zoom+a.ak(A.tileSize/s.tileSize));return Math.max(0,h)}function bt(A,s){const h=A.getCameraFrustum(),w=A.getClippingPlane(),C=A.screenPointToMercatorCoordinate(A.getCameraPoint()),L=a.a1.fromLngLat(A.center,A.elevation);C.z=L.z+Math.cos(A.pitchInRadians)*A.cameraToCenterDistance/A.worldSize;const B=A.getCoveringTilesDetailsProvider(),X=B.allowVariableZoom(A,s),te=Er(A,s),ce=s.minzoom||0,me=s.maxzoom!==void 0?s.maxzoom:A.maxZoom,Te=Math.min(Math.max(0,te),me),Ce=Math.pow(2,Te),Fe=[Ce*C.x,Ce*C.y,0],We=[Ce*L.x,Ce*L.y,0],ct=Math.hypot(L.x-C.x,L.y-C.y),ut=Math.abs(L.z-C.z),dt=Math.hypot(ct,ut),_t=Mt=>({zoom:0,x:0,y:0,wrap:Mt,fullyVisible:!1}),Pt=[],Et=[];if(A.renderWorldCopies&&B.allowWorldCopies())for(let Mt=1;Mt<=3;Mt++)Pt.push(_t(-Mt)),Pt.push(_t(Mt));for(Pt.push(_t(0));Pt.length>0;){const Mt=Pt.pop(),Ot=Mt.x,Tt=Mt.y;let Vt=Mt.fullyVisible;const gr={x:Ot,y:Tt,z:Mt.zoom},lr=B.getTileBoundingVolume(gr,Mt.wrap,A.elevation,s);if(!Vt){const Zr=vt(h,lr,w);if(Zr===0)continue;Vt=Zr===2}const cr=B.distanceToTile2d(C.x,C.y,gr,lr);let fr=te;X&&(fr=(s.calculateTileZoom||Zt)(A.zoom+a.ak(A.tileSize/s.tileSize),cr,ut,dt,A.fov)),fr=(s.roundZoom?Math.round:Math.floor)(fr),fr=Math.max(0,fr);const Xr=Math.min(fr,me);if(Mt.wrap=B.getWrap(L,gr,Mt.wrap),Mt.zoom>=Xr){if(Mt.zoom<ce)continue;const Zr=Te-Mt.zoom,Fr=Fe[0]-.5-(Ot<<Zr),Cn=Fe[1]-.5-(Tt<<Zr),vi=s.reparseOverscaled?Math.max(Mt.zoom,fr):Mt.zoom;Et.push({tileID:new a.Z(Mt.zoom===me?vi:Mt.zoom,Mt.wrap,Mt.zoom,Ot,Tt),distanceSq:a.al([We[0]-.5-Ot,We[1]-.5-Tt]),tileDistanceToCamera:Math.sqrt(Fr*Fr+Cn*Cn)})}else for(let Zr=0;Zr<4;Zr++)Pt.push({zoom:Mt.zoom+1,x:(Ot<<1)+Zr%2,y:(Tt<<1)+(Zr>>1),wrap:Mt.wrap,fullyVisible:Vt})}return Et.sort(((Mt,Ot)=>Mt.distanceSq-Ot.distanceSq)).map((Mt=>Mt.tileID))}const vr=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Dr extends a.E{constructor(s,h,w){super(),this.id=s,this.dispatcher=w,this.on("data",(C=>this._dataHandler(C))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((C,L,B,X)=>{const te=new(yr(L.type))(C,L,B,X);if(te.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${te.id}`);return te})(s,h,w,this),this._tiles={},this._cache=new nt(0,(C=>this._unloadTile(C))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new be,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const h=this._tiles[s];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,h,w){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,h,w)}catch(C){s.state="errored",C.status!==404?this._source.fire(new a.k(C,{tile:s})):this.update(this.transform,this.terrain)}}))}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const w=this._tiles[h];w.upload(s),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((s=>s.tileID)).sort(jr).map((s=>s.key))}getRenderableIds(s){const h=[];for(const w in this._tiles)this._isIdRenderable(w,s)&&h.push(this._tiles[w]);return s?h.sort(((w,C)=>{const L=w.tileID,B=C.tileID,X=new a.P(L.canonical.x,L.canonical.y)._rotate(-this.transform.bearingInRadians),te=new a.P(B.canonical.x,B.canonical.y)._rotate(-this.transform.bearingInRadians);return L.overscaledZ-B.overscaledZ||te.y-X.y||te.x-X.x})).map((w=>w.tileID.key)):h.map((w=>w.tileID)).sort(jr).map((w=>w.key))}hasRenderableParent(s){const h=this.findLoadedParent(s,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(s,h){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(h||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const h in this._tiles)s?this._reloadTile(h,"expired"):this._tiles[h].state!=="errored"&&this._reloadTile(h,"reloading")}}_reloadTile(s,h){return a._(this,void 0,void 0,(function*(){const w=this._tiles[s];w&&(w.state!=="loading"&&(w.state=h),yield this._loadTile(w,s,h))}))}_tileLoaded(s,h,w){s.timeAdded=x.now(),w==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(h,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const h=this.getRenderableIds();for(let C=0;C<h.length;C++){const L=h[C];if(s.neighboringTiles&&s.neighboringTiles[L]){const B=this.getTileByID(L);w(s,B),w(B,s)}}function w(C,L){C.needsHillshadePrepare=!0,C.needsTerrainPrepare=!0;let B=L.tileID.canonical.x-C.tileID.canonical.x;const X=L.tileID.canonical.y-C.tileID.canonical.y,te=Math.pow(2,C.tileID.canonical.z),ce=L.tileID.key;B===0&&X===0||Math.abs(X)>1||(Math.abs(B)>1&&(Math.abs(B+te)===1?B+=te:Math.abs(B-te)===1&&(B-=te)),L.dem&&C.dem&&(C.dem.backfillBorder(L.dem,B,X),C.neighboringTiles&&C.neighboringTiles[ce]&&(C.neighboringTiles[ce].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,h,w,C){for(const L in this._tiles){let B=this._tiles[L];if(C[L]||!B.hasData()||B.tileID.overscaledZ<=h||B.tileID.overscaledZ>w)continue;let X=B.tileID;for(;B&&B.tileID.overscaledZ>h+1;){const ce=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[ce.key],B&&B.hasData()&&(X=ce)}let te=X;for(;te.overscaledZ>h;)if(te=te.scaledTo(te.overscaledZ-1),s[te.key]||s[te.canonical.key]){C[X.key]=X;break}}}findLoadedParent(s,h){if(s.key in this._loadedParentTiles){const w=this._loadedParentTiles[s.key];return w&&w.tileID.overscaledZ>=h?w:null}for(let w=s.overscaledZ-1;w>=h;w--){const C=s.scaledTo(w),L=this._getLoadedTile(C);if(L)return L}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const h=this._tiles[s.key];return h&&h.hasData()?h:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const h=Math.ceil(s.width/this._source.tileSize)+1,w=Math.ceil(s.height/this._source.tileSize)+1,C=Math.floor(h*w*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(L)}handleWrapJump(s){const h=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,h){const w={};for(const C in this._tiles){const L=this._tiles[C];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+h),w[L.tileID.key]=L}this._tiles=w;for(const C in this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(const C in this._tiles)this._setTileReloadTimer(C,this._tiles[C])}}_updateCoveredAndRetainedTiles(s,h,w,C,L,B){const X={},te={},ce=Object.keys(s),me=x.now();for(const Te of ce){const Ce=s[Te],Fe=this._tiles[Te];if(!Fe||Fe.fadeEndTime!==0&&Fe.fadeEndTime<=me)continue;const We=this.findLoadedParent(Ce,h),ct=this.findLoadedSibling(Ce),ut=We||ct||null;ut&&(this._addTile(ut.tileID),X[ut.tileID.key]=ut.tileID),te[Te]=Ce}this._retainLoadedChildren(te,C,w,s);for(const Te in X)s[Te]||(this._coveredTiles[Te]=!0,s[Te]=X[Te]);if(B){const Te={},Ce={};for(const Fe of L)this._tiles[Fe.key].hasData()?Te[Fe.key]=Fe:Ce[Fe.key]=Fe;for(const Fe in Ce){const We=Ce[Fe].children(this._source.maxzoom);this._tiles[We[0].key]&&this._tiles[We[1].key]&&this._tiles[We[2].key]&&this._tiles[We[3].key]&&(Te[We[0].key]=s[We[0].key]=We[0],Te[We[1].key]=s[We[1].key]=We[1],Te[We[2].key]=s[We[2].key]=We[2],Te[We[3].key]=s[We[3].key]=We[3],delete Ce[Fe])}for(const Fe in Ce){const We=Ce[Fe],ct=this.findLoadedParent(We,this._source.minzoom),ut=this.findLoadedSibling(We),dt=ct||ut||null;if(dt){Te[dt.tileID.key]=s[dt.tileID.key]=dt.tileID;for(const _t in Te)Te[_t].isChildOf(dt.tileID)&&delete Te[_t]}}for(const Fe in this._tiles)Te[Fe]||(this._coveredTiles[Fe]=!0)}}update(s,h){if(!this._sourceLoaded||this._paused)return;let w;this.transform=s,this.terrain=h,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=s.getVisibleUnwrappedCoordinates(this._source.tileID).map((me=>new a.Z(me.canonical.z,me.wrap,me.canonical.z,me.canonical.x,me.canonical.y))):(w=bt(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(w=w.filter((me=>this._source.hasTile(me))))):w=[];const C=Er(s,this._source),L=Math.max(C-Dr.maxOverzooming,this._source.minzoom),B=Math.max(C+Dr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const me={};for(const Te of w)if(Te.canonical.z>this._source.minzoom){const Ce=Te.scaledTo(Te.canonical.z-1);me[Ce.key]=Ce;const Fe=Te.scaledTo(Math.max(this._source.minzoom,Math.min(Te.canonical.z,5)));me[Fe.key]=Fe}w=w.concat(Object.values(me))}const X=w.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,X&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const te=this._updateRetainedTiles(w,C);Ur(this._source.type)&&this._updateCoveredAndRetainedTiles(te,L,B,C,w,h);for(const me in te)this._tiles[me].clearFadeHold();const ce=a.am(this._tiles,te);for(const me of ce){const Te=this._tiles[me];Te.hasSymbolBuckets&&!Te.holdingForFade()?Te.setHoldDuration(this.map._fadeDuration):Te.hasSymbolBuckets&&!Te.symbolFadeFinished()||this._removeTile(me)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,h){var w;const C={},L={},B=Math.max(h-Dr.maxOverzooming,this._source.minzoom),X=Math.max(h+Dr.maxUnderzooming,this._source.minzoom),te={};for(const ce of s){const me=this._addTile(ce);C[ce.key]=ce,me.hasData()||h<this._source.maxzoom&&(te[ce.key]=ce)}this._retainLoadedChildren(te,h,X,C);for(const ce of s){let me=this._tiles[ce.key];if(me.hasData())continue;if(h+1>this._source.maxzoom){const Ce=ce.children(this._source.maxzoom)[0],Fe=this.getTile(Ce);if(Fe&&Fe.hasData()){C[Ce.key]=Ce;continue}}else{const Ce=ce.children(this._source.maxzoom);if(C[Ce[0].key]&&C[Ce[1].key]&&C[Ce[2].key]&&C[Ce[3].key])continue}let Te=me.wasRequested();for(let Ce=ce.overscaledZ-1;Ce>=B;--Ce){const Fe=ce.scaledTo(Ce);if(L[Fe.key])break;if(L[Fe.key]=!0,me=this.getTile(Fe),!me&&Te&&(me=this._addTile(Fe)),me){const We=me.hasData();if((We||!(!((w=this.map)===null||w===void 0)&&w.cancelPendingTileRequestsWhileZooming)||Te)&&(C[Fe.key]=Fe),Te=me.wasRequested(),We)break}}}return C}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const h=[];let w,C=this._tiles[s].tileID;for(;C.overscaledZ>0;){if(C.key in this._loadedParentTiles){w=this._loadedParentTiles[C.key];break}h.push(C.key);const L=C.scaledTo(C.overscaledZ-1);if(w=this._getLoadedTile(L),w)break;C=L}for(const L of h)this._loadedParentTiles[L]=w}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const h=this._tiles[s].tileID,w=this._getLoadedTile(h);this._loadedSiblingTiles[h.key]=w}}_addTile(s){let h=this._tiles[s.key];if(h)return h;h=this._cache.getAndRemove(s),h&&(this._setTileReloadTimer(s.key,h),h.tileID=s,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,h)));const w=h;return h||(h=new rr(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(h,s.key,h.state)),h.uses++,this._tiles[s.key]=h,w||this._source.fire(new a.l("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(s,h){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const w=h.getExpiryTimeout();w&&(this._timers[s]=setTimeout((()=>{this._reloadTile(s,"expired"),delete this._timers[s]}),w))}refreshTiles(s){for(const h in this._tiles)(this._isIdRenderable(h)||this._tiles[h].state=="errored")&&s.some((w=>w.equals(this._tiles[h].tileID.canonical)))&&this._reloadTile(h,"expired")}_removeTile(s){const h=this._tiles[s];h&&(h.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(s){const h=s.sourceDataType;s.dataType==="source"&&h==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&h==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,h,w){const C=[],L=this.transform;if(!L)return C;const B=L.getCoveringTilesDetailsProvider().allowWorldCopies(),X=w?L.getCameraQueryGeometry(s):s,te=Fe=>L.screenPointToMercatorCoordinate(Fe,this.terrain),ce=this.transformBbox(s,te,!B),me=this.transformBbox(X,te,!B),Te=this.getIds(),Ce=a.a2.fromPoints(me);for(let Fe=0;Fe<Te.length;Fe++){const We=this._tiles[Te[Fe]];if(We.holdingForFade())continue;const ct=B?[We.tileID]:[We.tileID.unwrapTo(-1),We.tileID.unwrapTo(0)],ut=Math.pow(2,L.zoom-We.tileID.overscaledZ),dt=h*We.queryPadding*a.$/We.tileSize/ut;for(const _t of ct){const Pt=Ce.map((Et=>_t.getTilePoint(new a.a1(Et.x,Et.y))));if(Pt.expandBy(dt),Pt.intersects(vr)){const Et=ce.map((Ot=>_t.getTilePoint(Ot))),Mt=me.map((Ot=>_t.getTilePoint(Ot)));C.push({tile:We,tileID:B?_t:_t.unwrapTo(0),queryGeometry:Et,cameraQueryGeometry:Mt,scale:ut})}}}return C}transformBbox(s,h,w){let C=s.map(h);if(w){const L=a.a2.fromPoints(s);L.shrinkBy(.001*Math.min(L.width(),L.height()));const B=L.map(h);a.a2.fromPoints(C).covers(B)||(C=C.map((X=>X.x>.5?new a.a1(X.x-1,X.y,X.z):X)))}return C}getVisibleCoordinates(s){const h=this.getRenderableIds(s).map((w=>this._tiles[w].tileID));return this.transform&&this.transform.populateCache(h),h}hasTransition(){if(this._source.hasTransition())return!0;if(Ur(this._source.type)){const s=x.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=s)return!0}return!1}setFeatureState(s,h,w){this._state.updateState(s=s||"_geojsonTileLayer",h,w)}removeFeatureState(s,h,w){this._state.removeFeatureState(s=s||"_geojsonTileLayer",h,w)}getFeatureState(s,h){return this._state.getState(s=s||"_geojsonTileLayer",h)}setDependencies(s,h,w){const C=this._tiles[s];C&&C.setDependencies(h,w)}reloadTilesForDependencies(s,h){for(const w in this._tiles)this._tiles[w].hasDependency(s,h)&&this._reloadTile(w,"reloading");this._cache.filter((w=>!w.hasDependency(s,h)))}}function jr(A,s){const h=Math.abs(2*A.wrap)-+(A.wrap<0),w=Math.abs(2*s.wrap)-+(s.wrap<0);return A.overscaledZ-s.overscaledZ||w-h||s.canonical.y-A.canonical.y||s.canonical.x-A.canonical.x}function Ur(A){return A==="raster"||A==="image"||A==="video"}Dr.maxOverzooming=10,Dr.maxUnderzooming=3;class nr{constructor(s,h){this.reset(s,h)}reset(s,h){this.points=s||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ah(s,0,1);let h=1,w=this._distances[h];const C=s*this.paddedLength+this.padding;for(;w<C&&h<this._distances.length;)w=this._distances[++h];const L=h-1,B=this._distances[L],X=w-B,te=X>0?(C-B)/X:0;return this.points[L].mult(1-te).add(this.points[h].mult(te))}}function Hn(A,s){let h=!0;return A==="always"||A!=="never"&&s!=="never"||(h=!1),h}class en{constructor(s,h,w){const C=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(s/w),this.yCellCount=Math.ceil(h/w);for(let B=0;B<this.xCellCount*this.yCellCount;B++)C.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=h,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,h,w,C,L){this._forEachCell(h,w,C,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(h),this.bboxes.push(w),this.bboxes.push(C),this.bboxes.push(L)}insertCircle(s,h,w,C){this._forEachCell(h-C,w-C,h+C,w+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(h),this.circles.push(w),this.circles.push(C)}_insertBoxCell(s,h,w,C,L,B){this.boxCells[L].push(B)}_insertCircleCell(s,h,w,C,L,B){this.circleCells[L].push(B)}_query(s,h,w,C,L,B,X){if(w<0||s>this.width||C<0||h>this.height)return[];const te=[];if(s<=0&&h<=0&&this.width<=w&&this.height<=C){if(L)return[{key:null,x1:s,y1:h,x2:w,y2:C}];for(let ce=0;ce<this.boxKeys.length;ce++)te.push({key:this.boxKeys[ce],x1:this.bboxes[4*ce],y1:this.bboxes[4*ce+1],x2:this.bboxes[4*ce+2],y2:this.bboxes[4*ce+3]});for(let ce=0;ce<this.circleKeys.length;ce++){const me=this.circles[3*ce],Te=this.circles[3*ce+1],Ce=this.circles[3*ce+2];te.push({key:this.circleKeys[ce],x1:me-Ce,y1:Te-Ce,x2:me+Ce,y2:Te+Ce})}}else this._forEachCell(s,h,w,C,this._queryCell,te,{hitTest:L,overlapMode:B,seenUids:{box:{},circle:{}}},X);return te}query(s,h,w,C){return this._query(s,h,w,C,!1,null)}hitTest(s,h,w,C,L,B){return this._query(s,h,w,C,!0,L,B).length>0}hitTestCircle(s,h,w,C,L){const B=s-w,X=s+w,te=h-w,ce=h+w;if(X<0||B>this.width||ce<0||te>this.height)return!1;const me=[];return this._forEachCell(B,te,X,ce,this._queryCellCircle,me,{hitTest:!0,overlapMode:C,circle:{x:s,y:h,radius:w},seenUids:{box:{},circle:{}}},L),me.length>0}_queryCell(s,h,w,C,L,B,X,te){const{seenUids:ce,hitTest:me,overlapMode:Te}=X,Ce=this.boxCells[L];if(Ce!==null){const We=this.bboxes;for(const ct of Ce)if(!ce.box[ct]){ce.box[ct]=!0;const ut=4*ct,dt=this.boxKeys[ct];if(s<=We[ut+2]&&h<=We[ut+3]&&w>=We[ut+0]&&C>=We[ut+1]&&(!te||te(dt))&&(!me||!Hn(Te,dt.overlapMode))&&(B.push({key:dt,x1:We[ut],y1:We[ut+1],x2:We[ut+2],y2:We[ut+3]}),me))return!0}}const Fe=this.circleCells[L];if(Fe!==null){const We=this.circles;for(const ct of Fe)if(!ce.circle[ct]){ce.circle[ct]=!0;const ut=3*ct,dt=this.circleKeys[ct];if(this._circleAndRectCollide(We[ut],We[ut+1],We[ut+2],s,h,w,C)&&(!te||te(dt))&&(!me||!Hn(Te,dt.overlapMode))){const _t=We[ut],Pt=We[ut+1],Et=We[ut+2];if(B.push({key:dt,x1:_t-Et,y1:Pt-Et,x2:_t+Et,y2:Pt+Et}),me)return!0}}}return!1}_queryCellCircle(s,h,w,C,L,B,X,te){const{circle:ce,seenUids:me,overlapMode:Te}=X,Ce=this.boxCells[L];if(Ce!==null){const We=this.bboxes;for(const ct of Ce)if(!me.box[ct]){me.box[ct]=!0;const ut=4*ct,dt=this.boxKeys[ct];if(this._circleAndRectCollide(ce.x,ce.y,ce.radius,We[ut+0],We[ut+1],We[ut+2],We[ut+3])&&(!te||te(dt))&&!Hn(Te,dt.overlapMode))return B.push(!0),!0}}const Fe=this.circleCells[L];if(Fe!==null){const We=this.circles;for(const ct of Fe)if(!me.circle[ct]){me.circle[ct]=!0;const ut=3*ct,dt=this.circleKeys[ct];if(this._circlesCollide(We[ut],We[ut+1],We[ut+2],ce.x,ce.y,ce.radius)&&(!te||te(dt))&&!Hn(Te,dt.overlapMode))return B.push(!0),!0}}}_forEachCell(s,h,w,C,L,B,X,te){const ce=this._convertToXCellCoord(s),me=this._convertToYCellCoord(h),Te=this._convertToXCellCoord(w),Ce=this._convertToYCellCoord(C);for(let Fe=ce;Fe<=Te;Fe++)for(let We=me;We<=Ce;We++)if(L.call(this,s,h,w,C,this.xCellCount*We+Fe,B,X,te))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,h,w,C,L,B){const X=C-s,te=L-h,ce=w+B;return ce*ce>X*X+te*te}_circleAndRectCollide(s,h,w,C,L,B,X){const te=(B-C)/2,ce=Math.abs(s-(C+te));if(ce>te+w)return!1;const me=(X-L)/2,Te=Math.abs(h-(L+me));if(Te>me+w)return!1;if(ce<=te||Te<=me)return!0;const Ce=ce-te,Fe=Te-me;return Ce*Ce+Fe*Fe<=w*w}}function Wn(A,s,h){const w=a.L();if(!A){const{vecSouth:Te,vecEast:Ce}=Be(s),Fe=p();Fe[0]=Ce[0],Fe[1]=Ce[1],Fe[2]=Te[0],Fe[3]=Te[1],C=Fe,(me=(B=(L=Fe)[0])*(ce=L[3])-(te=L[2])*(X=L[1]))&&(C[0]=ce*(me=1/me),C[1]=-X*me,C[2]=-te*me,C[3]=B*me),w[0]=Fe[0],w[1]=Fe[1],w[4]=Fe[2],w[5]=Fe[3]}var C,L,B,X,te,ce,me;return a.N(w,w,[1/h,1/h,1]),w}function Pe(A,s,h,w){if(A){const C=a.L();if(!s){const{vecSouth:L,vecEast:B}=Be(h);C[0]=B[0],C[1]=B[1],C[4]=L[0],C[5]=L[1]}return a.N(C,C,[w,w,1]),C}return h.pixelsToClipSpaceMatrix}function Be(A){const s=Math.cos(A.rollInRadians),h=Math.sin(A.rollInRadians),w=Math.cos(A.pitchInRadians),C=Math.cos(A.bearingInRadians),L=Math.sin(A.bearingInRadians),B=a.ar();B[0]=-C*w*h-L*s,B[1]=-L*w*h+C*s;const X=a.as(B);X<1e-9?a.at(B):a.au(B,B,1/X);const te=a.ar();te[0]=C*w*s-L*h,te[1]=L*w*s+C*h;const ce=a.as(te);return ce<1e-9?a.at(te):a.au(te,te,1/ce),{vecEast:te,vecSouth:B}}function gt(A,s,h,w){let C;w?(C=[A,s,w(A,s),1],a.aw(C,C,h)):(C=[A,s,0,1],ua(C,C,h));const L=C[3];return{point:new a.P(C[0]/L,C[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}function mt(A,s){return .5+A/s*.5}function wr(A,s){return A.x>=-s[0]&&A.x<=s[0]&&A.y>=-s[1]&&A.y<=s[1]}function Ar(A,s,h,w,C,L,B,X,te,ce,me,Te,Ce){const Fe=h?A.textSizeData:A.iconSizeData,We=a.an(Fe,s.transform.zoom),ct=[256/s.width*2+1,256/s.height*2+1],ut=h?A.text.dynamicLayoutVertexArray:A.icon.dynamicLayoutVertexArray;ut.clear();const dt=A.lineVertexArray,_t=h?A.text.placedSymbolArray:A.icon.placedSymbolArray,Pt=s.transform.width/s.transform.height;let Et=!1;for(let Mt=0;Mt<_t.length;Mt++){const Ot=_t.get(Mt);if(Ot.hidden||Ot.writingMode===a.ao.vertical&&!Et){Na(Ot.numGlyphs,ut);continue}Et=!1;const Tt=new a.P(Ot.anchorX,Ot.anchorY),Vt={getElevation:Ce,pitchedLabelPlaneMatrix:w,lineVertexArray:dt,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Tt,unwrappedTileID:te,width:ce,height:me,translation:Te},gr=Di(Ot.anchorX,Ot.anchorY,Vt);if(!wr(gr.point,ct)){Na(Ot.numGlyphs,ut);continue}const lr=mt(s.transform.cameraToCenterDistance,gr.signedDistanceFromCamera),cr=a.ap(Fe,We,Ot),fr=L?cr*s.transform.getPitchedTextCorrection(Ot.anchorX,Ot.anchorY,te)/lr:cr*lr,Xr=Lr({projectionContext:Vt,pitchedLabelPlaneMatrixInverse:C,symbol:Ot,fontSize:fr,flip:!1,keepUpright:B,glyphOffsetArray:A.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Pt,rotateToLine:X});Et=Xr.useVertical,(Xr.notEnoughRoom||Et||Xr.needsFlipping&&Lr({projectionContext:Vt,pitchedLabelPlaneMatrixInverse:C,symbol:Ot,fontSize:fr,flip:!0,keepUpright:B,glyphOffsetArray:A.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Pt,rotateToLine:X}).notEnoughRoom)&&Na(Ot.numGlyphs,ut)}h?A.text.dynamicLayoutVertexBuffer.updateData(ut):A.icon.dynamicLayoutVertexBuffer.updateData(ut)}function Dn(A,s,h,w,C,L,B,X){const te=L.glyphStartIndex+L.numGlyphs,ce=L.lineStartIndex,me=L.lineStartIndex+L.lineLength,Te=s.getoffsetX(L.glyphStartIndex),Ce=s.getoffsetX(te-1),Fe=na(A*Te,h,w,C,L.segment,ce,me,X,B);if(!Fe)return null;const We=na(A*Ce,h,w,C,L.segment,ce,me,X,B);return We?X.projectionCache.anyProjectionOccluded?null:{first:Fe,last:We}:null}function wi(A,s,h,w){return A===a.ao.horizontal&&Math.abs(h.y-s.y)>Math.abs(h.x-s.x)*w?{useVertical:!0}:(A===a.ao.vertical?s.y<h.y:s.x>h.x)?{needsFlipping:!0}:null}function Lr(A){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:h,symbol:w,fontSize:C,flip:L,keepUpright:B,glyphOffsetArray:X,dynamicLayoutVertexArray:te,aspectRatio:ce,rotateToLine:me}=A,Te=C/24,Ce=w.lineOffsetX*Te,Fe=w.lineOffsetY*Te;let We;if(w.numGlyphs>1){const ct=w.glyphStartIndex+w.numGlyphs,ut=w.lineStartIndex,dt=w.lineStartIndex+w.lineLength,_t=Dn(Te,X,Ce,Fe,L,w,me,s);if(!_t)return{notEnoughRoom:!0};const Pt=oi(_t.first.point.x,_t.first.point.y,s,h),Et=oi(_t.last.point.x,_t.last.point.y,s,h);if(B&&!L){const Mt=wi(w.writingMode,Pt,Et,ce);if(Mt)return Mt}We=[_t.first];for(let Mt=w.glyphStartIndex+1;Mt<ct-1;Mt++){const Ot=na(Te*X.getoffsetX(Mt),Ce,Fe,L,w.segment,ut,dt,s,me);if(!Ot)return{notEnoughRoom:!0};We.push(Ot)}We.push(_t.last)}else{if(B&&!L){const ut=_i(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,dt=w.lineStartIndex+w.segment+1,_t=new a.P(s.lineVertexArray.getx(dt),s.lineVertexArray.gety(dt)),Pt=_i(_t.x,_t.y,s),Et=Pt.signedDistanceFromCamera>0?Pt.point:fn(s.tileAnchorPoint,_t,ut,1,s),Mt=oi(ut.x,ut.y,s,h),Ot=oi(Et.x,Et.y,s,h),Tt=wi(w.writingMode,Mt,Ot,ce);if(Tt)return Tt}const ct=na(Te*X.getoffsetX(w.glyphStartIndex),Ce,Fe,L,w.segment,w.lineStartIndex,w.lineStartIndex+w.lineLength,s,me);if(!ct||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};We=[ct]}for(const ct of We)a.av(te,ct.point,ct.angle);return{}}function fn(A,s,h,w,C){const L=A.add(A.sub(s)._unit()),B=_i(L.x,L.y,C).point,X=h.sub(B);return h.add(X._mult(w/X.mag()))}function gn(A,s,h){const w=s.projectionCache;if(w.projections[A])return w.projections[A];const C=new a.P(s.lineVertexArray.getx(A),s.lineVertexArray.gety(A)),L=_i(C.x,C.y,s);if(L.signedDistanceFromCamera>0)return w.projections[A]=L.point,w.anyProjectionOccluded=w.anyProjectionOccluded||L.isOccluded,L.point;const B=A-h.direction;return fn(h.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(B),s.lineVertexArray.gety(B)),C,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,s)}function _i(A,s,h){const w=A+h.translation[0],C=s+h.translation[1];let L;return h.pitchWithMap?(L=gt(w,C,h.pitchedLabelPlaneMatrix,h.getElevation),L.isOccluded=!1):(L=h.transform.projectTileCoordinates(w,C,h.unwrappedTileID,h.getElevation),L.point.x=(.5*L.point.x+.5)*h.width,L.point.y=(.5*-L.point.y+.5)*h.height),L}function oi(A,s,h,w){if(h.pitchWithMap){const C=[A,s,0,1];return a.aw(C,C,w),h.transform.projectTileCoordinates(C[0]/C[3],C[1]/C[3],h.unwrappedTileID,h.getElevation).point}return{x:A/h.width*2-1,y:1-s/h.height*2}}function Di(A,s,h){return h.transform.projectTileCoordinates(A,s,h.unwrappedTileID,h.getElevation)}function Pn(A,s,h){return A._unit()._perp()._mult(s*h)}function ga(A,s,h,w,C,L,B,X,te){if(X.projectionCache.offsets[A])return X.projectionCache.offsets[A];const ce=h.add(s);if(A+te.direction<w||A+te.direction>=C)return X.projectionCache.offsets[A]=ce,ce;const me=gn(A+te.direction,X,te),Te=Pn(me.sub(h),B,te.direction),Ce=h.add(Te),Fe=me.add(Te);return X.projectionCache.offsets[A]=a.ax(L,ce,Ce,Fe)||ce,X.projectionCache.offsets[A]}function na(A,s,h,w,C,L,B,X,te){const ce=w?A-s:A+s;let me=ce>0?1:-1,Te=0;w&&(me*=-1,Te=Math.PI),me<0&&(Te+=Math.PI);let Ce,Fe=me>0?L+C:L+C+1;X.projectionCache.cachedAnchorPoint?Ce=X.projectionCache.cachedAnchorPoint:(Ce=_i(X.tileAnchorPoint.x,X.tileAnchorPoint.y,X).point,X.projectionCache.cachedAnchorPoint=Ce);let We,ct,ut=Ce,dt=Ce,_t=0,Pt=0;const Et=Math.abs(ce),Mt=[];let Ot;for(;_t+Pt<=Et;){if(Fe+=me,Fe<L||Fe>=B)return null;_t+=Pt,dt=ut,ct=We;const gr={absOffsetX:Et,direction:me,distanceFromAnchor:_t,previousVertex:dt};if(ut=gn(Fe,X,gr),h===0)Mt.push(dt),Ot=ut.sub(dt);else{let lr;const cr=ut.sub(dt);lr=cr.mag()===0?Pn(gn(Fe+me,X,gr).sub(ut),h,me):Pn(cr,h,me),ct||(ct=dt.add(lr)),We=ga(Fe,lr,ut,L,B,ct,h,X,gr),Mt.push(ct),Ot=We.sub(ct)}Pt=Ot.mag()}const Tt=Ot._mult((Et-_t)/Pt)._add(ct||dt),Vt=Te+Math.atan2(ut.y-dt.y,ut.x-dt.x);return Mt.push(Tt),{point:Tt,angle:te?Vt:0,path:Mt}}const Ni=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Na(A,s){for(let h=0;h<A;h++){const w=s.length;s.resize(w+4),s.float32.set(Ni,3*w)}}function ua(A,s,h){const w=s[0],C=s[1];return A[0]=h[0]*w+h[4]*C+h[12],A[1]=h[1]*w+h[5]*C+h[13],A[3]=h[3]*w+h[7]*C+h[15],A}const Mi=100;class Ua{constructor(s,h=new en(s.width+200,s.height+200,25),w=new en(s.width+200,s.height+200,25)){this.transform=s,this.grid=h,this.ignoredGrid=w,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Mi,this.screenBottomBoundary=s.height+Mi,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,h,w,C,L,B,X,te,ce,me,Te,Ce){const Fe=this.projectAndGetPerspectiveRatio(s.anchorPointX+te[0],s.anchorPointY+te[1],L,me,Ce),We=w*Fe.perspectiveRatio;let ct;if(B||X)ct=this._projectCollisionBox(s,We,C,L,B,X,te,Fe,me,Te,Ce);else{const Ot=Fe.x+(Te?Te.x*We:0),Tt=Fe.y+(Te?Te.y*We:0);ct={allPointsOccluded:!1,box:[Ot+s.x1*We,Tt+s.y1*We,Ot+s.x2*We,Tt+s.y2*We]}}const[ut,dt,_t,Pt]=ct.box,Et=B?ct.allPointsOccluded:Fe.isOccluded;let Mt=Et;return Mt||(Mt=Fe.perspectiveRatio<this.perspectiveRatioCutoff),Mt||(Mt=!this.isInsideGrid(ut,dt,_t,Pt)),Mt||h!=="always"&&this.grid.hitTest(ut,dt,_t,Pt,h,ce)?{box:[ut,dt,_t,Pt],placeable:!1,offscreen:!1,occluded:Et}:{box:[ut,dt,_t,Pt],placeable:!0,offscreen:this.isOffscreen(ut,dt,_t,Pt),occluded:Et}}placeCollisionCircles(s,h,w,C,L,B,X,te,ce,me,Te,Ce,Fe,We){const ct=[],ut=new a.P(h.anchorX,h.anchorY),dt=this.getPerspectiveRatio(ut.x,ut.y,B,We),_t=(ce?L*this.transform.getPitchedTextCorrection(h.anchorX,h.anchorY,B)/dt:L*dt)/a.aB,Pt={getElevation:We,pitchedLabelPlaneMatrix:X,lineVertexArray:w,pitchWithMap:ce,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ut,unwrappedTileID:B,width:this.transform.width,height:this.transform.height,translation:Fe},Et=Dn(_t,C,h.lineOffsetX*_t,h.lineOffsetY*_t,!1,h,!1,Pt);let Mt=!1,Ot=!1,Tt=!0;if(Et){const Vt=.5*Te*dt+Ce,gr=new a.P(-100,-100),lr=new a.P(this.screenRightBoundary,this.screenBottomBoundary),cr=new nr,fr=Et.first,Xr=Et.last;let Zr=[];for(let vi=fr.path.length-1;vi>=1;vi--)Zr.push(fr.path[vi]);for(let vi=1;vi<Xr.path.length;vi++)Zr.push(Xr.path[vi]);const Fr=2.5*Vt;if(ce){const vi=this.projectPathToScreenSpace(Zr,Pt);Zr=vi.some((Oi=>Oi.signedDistanceFromCamera<=0))?[]:vi.map((Oi=>Oi.point))}let Cn=[];if(Zr.length>0){const vi=Zr[0].clone(),Oi=Zr[0].clone();for(let ea=1;ea<Zr.length;ea++)vi.x=Math.min(vi.x,Zr[ea].x),vi.y=Math.min(vi.y,Zr[ea].y),Oi.x=Math.max(Oi.x,Zr[ea].x),Oi.y=Math.max(Oi.y,Zr[ea].y);Cn=vi.x>=gr.x&&Oi.x<=lr.x&&vi.y>=gr.y&&Oi.y<=lr.y?[Zr]:Oi.x<gr.x||vi.x>lr.x||Oi.y<gr.y||vi.y>lr.y?[]:a.ay([Zr],gr.x,gr.y,lr.x,lr.y)}for(const vi of Cn){cr.reset(vi,.25*Vt);let Oi=0;Oi=cr.length<=.5*Vt?1:Math.ceil(cr.paddedLength/Fr)+1;for(let ea=0;ea<Oi;ea++){const Xi=ea/Math.max(Oi-1,1),Ki=cr.lerp(Xi),sa=Ki.x+Mi,ii=Ki.y+Mi;ct.push(sa,ii,Vt,0);const Ji=sa-Vt,fo=ii-Vt,Oo=sa+Vt,as=ii+Vt;if(Tt=Tt&&this.isOffscreen(Ji,fo,Oo,as),Ot=Ot||this.isInsideGrid(Ji,fo,Oo,as),s!=="always"&&this.grid.hitTestCircle(sa,ii,Vt,s,me)&&(Mt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Mt}}}}return{circles:!te&&Mt||!Ot||dt<this.perspectiveRatioCutoff?[]:ct,offscreen:Tt,collisionDetected:Mt}}projectPathToScreenSpace(s,h){const w=(function(C,L){const B=a.L();return a.aq(B,L.pitchedLabelPlaneMatrix),C.map((X=>{const te=gt(X.x,X.y,B,L.getElevation),ce=L.transform.projectTileCoordinates(te.point.x,te.point.y,L.unwrappedTileID,L.getElevation);return ce.point.x=(.5*ce.point.x+.5)*L.width,ce.point.y=(.5*-ce.point.y+.5)*L.height,ce}))})(s,h);return(function(C){let L=0,B=0,X=0,te=0;for(let ce=0;ce<C.length;ce++)C[ce].isOccluded?(X=ce+1,te=0):(te++,te>B&&(B=te,L=X));return C.slice(L,L+B)})(w)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[],w=new a.a2;for(const Te of s){const Ce=new a.P(Te.x+Mi,Te.y+Mi);w.extend(Ce),h.push(Ce)}const{minX:C,minY:L,maxX:B,maxY:X}=w,te=this.grid.query(C,L,B,X).concat(this.ignoredGrid.query(C,L,B,X)),ce={},me={};for(const Te of te){const Ce=Te.key;if(ce[Ce.bucketInstanceId]===void 0&&(ce[Ce.bucketInstanceId]={}),ce[Ce.bucketInstanceId][Ce.featureIndex])continue;const Fe=[new a.P(Te.x1,Te.y1),new a.P(Te.x2,Te.y1),new a.P(Te.x2,Te.y2),new a.P(Te.x1,Te.y2)];a.az(h,Fe)&&(ce[Ce.bucketInstanceId][Ce.featureIndex]=!0,me[Ce.bucketInstanceId]===void 0&&(me[Ce.bucketInstanceId]=[]),me[Ce.bucketInstanceId].push(Ce.featureIndex))}return me}insertCollisionBox(s,h,w,C,L,B){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:L,collisionGroupID:B,overlapMode:h},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,h,w,C,L,B){const X=w?this.ignoredGrid:this.grid,te={bucketInstanceId:C,featureIndex:L,collisionGroupID:B,overlapMode:h};for(let ce=0;ce<s.length;ce+=4)X.insertCircle(te,s[ce],s[ce+1],s[ce+2])}projectAndGetPerspectiveRatio(s,h,w,C,L){if(L){let B;C?(B=[s,h,C(s,h),1],a.aw(B,B,L)):(B=[s,h,0,1],ua(B,B,L));const X=B[3];return{x:(B[0]/X+1)/2*this.transform.width+Mi,y:(-B[1]/X+1)/2*this.transform.height+Mi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/X*.5,isOccluded:!1,signedDistanceFromCamera:X}}{const B=this.transform.projectTileCoordinates(s,h,w,C);return{x:(B.point.x+1)/2*this.transform.width+Mi,y:(1-B.point.y)/2*this.transform.height+Mi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/B.signedDistanceFromCamera*.5,isOccluded:B.isOccluded,signedDistanceFromCamera:B.signedDistanceFromCamera}}}getPerspectiveRatio(s,h,w,C){const L=this.transform.projectTileCoordinates(s,h,w,C);return .5+this.transform.cameraToCenterDistance/L.signedDistanceFromCamera*.5}isOffscreen(s,h,w,C){return w<Mi||s>=this.screenRightBoundary||C<Mi||h>this.screenBottomBoundary}isInsideGrid(s,h,w,C){return w>=0&&s<this.gridRightBoundary&&C>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const s=a.ag([]);return a.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,h,w,C,L,B,X,te,ce,me,Te){let Ce=1,Fe=0,We=0,ct=1;const ut=s.anchorPointX+X[0],dt=s.anchorPointY+X[1];if(B&&!L){const Zr=this.projectAndGetPerspectiveRatio(ut+1,dt,C,ce,Te),Fr=Zr.x-te.x,Cn=Math.atan((Zr.y-te.y)/Fr)+(Fr<0?Math.PI:0),vi=Math.sin(Cn),Oi=Math.cos(Cn);Ce=Oi,Fe=vi,We=-vi,ct=Oi}else if(!B&&L){const Zr=Be(this.transform);Ce=Zr.vecEast[0],Fe=Zr.vecEast[1],We=Zr.vecSouth[0],ct=Zr.vecSouth[1]}let _t=te.x,Pt=te.y,Et=h;L&&(_t=ut,Pt=dt,Et=Math.pow(2,-(this.transform.zoom-w.overscaledZ)),Et*=this.transform.getPitchedTextCorrection(ut,dt,C),me||(Et*=a.ah(.5+te.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),me&&(_t+=Ce*me.x*Et+We*me.y*Et,Pt+=Fe*me.x*Et+ct*me.y*Et);const Mt=s.x1*Et,Ot=s.x2*Et,Tt=(Mt+Ot)/2,Vt=s.y1*Et,gr=s.y2*Et,lr=(Vt+gr)/2,cr=[{offsetX:Mt,offsetY:Vt},{offsetX:Tt,offsetY:Vt},{offsetX:Ot,offsetY:Vt},{offsetX:Ot,offsetY:lr},{offsetX:Ot,offsetY:gr},{offsetX:Tt,offsetY:gr},{offsetX:Mt,offsetY:gr},{offsetX:Mt,offsetY:lr}];let fr=[];for(const{offsetX:Zr,offsetY:Fr}of cr)fr.push(new a.P(_t+Ce*Zr+We*Fr,Pt+Fe*Zr+ct*Fr));let Xr=!1;if(L){const Zr=fr.map((Fr=>this.projectAndGetPerspectiveRatio(Fr.x,Fr.y,C,ce,Te)));Xr=Zr.some((Fr=>!Fr.isOccluded)),fr=Zr.map((Fr=>new a.P(Fr.x,Fr.y)))}else Xr=!0;return{box:a.aA(fr),allPointsOccluded:!Xr}}}class Oa{constructor(s,h,w,C){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?h:-h))):C&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class Nn{constructor(s,h,w,C,L){this.text=new Oa(s?s.text:null,h,w,L),this.icon=new Oa(s?s.icon:null,h,C,L)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Gl{constructor(s,h,w){this.text=s,this.icon=h,this.skipFade=w}}class Tl{constructor(s,h,w,C,L){this.bucketInstanceId=s,this.featureIndex=h,this.sourceLayerIndex=w,this.bucketIndex=C,this.tileID=L}}class ya{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const h=++this.maxGroupID;this.collisionGroups[s]={ID:h,predicate:w=>w.collisionGroupID===h}}return this.collisionGroups[s]}}function ca(A,s,h,w,C){const{horizontalAlign:L,verticalAlign:B}=a.aH(A);return new a.P(-(L-.5)*s+w[0]*C,-(B-.5)*h+w[1]*C)}class To{constructor(s,h,w,C,L){this.transform=s.clone(),this.terrain=h,this.collisionIndex=new Ua(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new ya(C),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const h=this.terrain;return h?(w,C)=>h.getElevation(s,w,C):null}getBucketParts(s,h,w,C){const L=w.getBucket(h),B=w.latestFeatureIndex;if(!L||!B||h.id!==L.layerIds[0])return;const X=w.collisionBoxArray,te=L.layers[0].layout,ce=L.layers[0].paint,me=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),Te=w.tileSize/a.$,Ce=w.tileID.toUnwrapped(),Fe=te.get("text-rotation-alignment")==="map",We=a.aC(w,1,this.transform.zoom),ct=a.aD(this.collisionIndex.transform,w,ce.get("text-translate"),ce.get("text-translate-anchor")),ut=a.aD(this.collisionIndex.transform,w,ce.get("icon-translate"),ce.get("icon-translate-anchor")),dt=Wn(Fe,this.transform,We);this.retainedQueryData[L.bucketInstanceId]=new Tl(L.bucketInstanceId,B,L.sourceLayerIndex,L.index,w.tileID);const _t={bucket:L,layout:te,translationText:ct,translationIcon:ut,unwrappedTileID:Ce,pitchedLabelPlaneMatrix:dt,scale:me,textPixelRatio:Te,holdingForFade:w.holdingForFade(),collisionBoxArray:X,partiallyEvaluatedTextSize:a.an(L.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(C)for(const Pt of L.sortKeyRanges){const{sortKey:Et,symbolInstanceStart:Mt,symbolInstanceEnd:Ot}=Pt;s.push({sortKey:Et,symbolInstanceStart:Mt,symbolInstanceEnd:Ot,parameters:_t})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:_t})}attemptAnchorPlacement(s,h,w,C,L,B,X,te,ce,me,Te,Ce,Fe,We,ct,ut,dt,_t,Pt,Et){const Mt=a.aE[s.textAnchor],Ot=[s.textOffset0,s.textOffset1],Tt=ca(Mt,w,C,Ot,L),Vt=this.collisionIndex.placeCollisionBox(h,Ce,te,ce,me,X,B,ut,Te.predicate,Pt,Tt,Et);if((!_t||this.collisionIndex.placeCollisionBox(_t,Ce,te,ce,me,X,B,dt,Te.predicate,Pt,Tt,Et).placeable)&&Vt.placeable){let gr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Fe.crossTileID]&&this.prevPlacement.placements[Fe.crossTileID]&&this.prevPlacement.placements[Fe.crossTileID].text&&(gr=this.prevPlacement.variableOffsets[Fe.crossTileID].anchor),Fe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Fe.crossTileID]={textOffset:Ot,width:w,height:C,anchor:Mt,textBoxScale:L,prevAnchor:gr},this.markUsedJustification(We,Mt,Fe,ct),We.allowVerticalPlacement&&(this.markUsedOrientation(We,ct,Fe),this.placedOrientations[Fe.crossTileID]=ct),{shift:Tt,placedGlyphBoxes:Vt}}}placeLayerBucketPart(s,h,w){const{bucket:C,layout:L,translationText:B,translationIcon:X,unwrappedTileID:te,pitchedLabelPlaneMatrix:ce,textPixelRatio:me,holdingForFade:Te,collisionBoxArray:Ce,partiallyEvaluatedTextSize:Fe,collisionGroup:We}=s.parameters,ct=L.get("text-optional"),ut=L.get("icon-optional"),dt=a.aF(L,"text-overlap","text-allow-overlap"),_t=dt==="always",Pt=a.aF(L,"icon-overlap","icon-allow-overlap"),Et=Pt==="always",Mt=L.get("text-rotation-alignment")==="map",Ot=L.get("text-pitch-alignment")==="map",Tt=L.get("icon-text-fit")!=="none",Vt=L.get("symbol-z-order")==="viewport-y",gr=_t&&(Et||!C.hasIconData()||ut),lr=Et&&(_t||!C.hasTextData()||ct);!C.collisionArrays&&Ce&&C.deserializeCollisionBoxes(Ce);const cr=this.retainedQueryData[C.bucketInstanceId].tileID,fr=this._getTerrainElevationFunc(cr),Xr=this.transform.getFastPathSimpleProjectionMatrix(cr),Zr=(Fr,Cn,vi)=>{var Oi,ea;if(h[Fr.crossTileID])return;if(Te)return void(this.placements[Fr.crossTileID]=new Gl(!1,!1,!1));let Xi=!1,Ki=!1,sa=!0,ii=null,Ji={box:null,placeable:!1,offscreen:null,occluded:!1},fo={placeable:!1},Oo=null,as=null,_s=null,Ll=0,Ad=0,Md=0;Cn.textFeatureIndex?Ll=Cn.textFeatureIndex:Fr.useRuntimeCollisionCircles&&(Ll=Fr.featureIndex),Cn.verticalTextFeatureIndex&&(Ad=Cn.verticalTextFeatureIndex);const sh=Cn.textBox;if(sh){const Ql=os=>{let xs=a.ao.horizontal;if(C.allowVerticalPlacement&&!os&&this.prevPlacement){const Lu=this.prevPlacement.placedOrientations[Fr.crossTileID];Lu&&(this.placedOrientations[Fr.crossTileID]=Lu,xs=Lu,this.markUsedOrientation(C,xs,Fr))}return xs},tc=(os,xs)=>{if(C.allowVerticalPlacement&&Fr.numVerticalGlyphVertices>0&&Cn.verticalTextBox){for(const Lu of C.writingModes)if(Lu===a.ao.vertical?(Ji=xs(),fo=Ji):Ji=os(),Ji&&Ji.placeable)break}else Ji=os()},Rl=Fr.textAnchorOffsetStartIndex,Ld=Fr.textAnchorOffsetEndIndex;if(Ld===Rl){const os=(xs,Lu)=>{const ss=this.collisionIndex.placeCollisionBox(xs,dt,me,cr,te,Ot,Mt,B,We.predicate,fr,void 0,Xr);return ss&&ss.placeable&&(this.markUsedOrientation(C,Lu,Fr),this.placedOrientations[Fr.crossTileID]=Lu),ss};tc((()=>os(sh,a.ao.horizontal)),(()=>{const xs=Cn.verticalTextBox;return C.allowVerticalPlacement&&Fr.numVerticalGlyphVertices>0&&xs?os(xs,a.ao.vertical):{box:null,offscreen:null}})),Ql(Ji&&Ji.placeable)}else{let os=a.aE[(ea=(Oi=this.prevPlacement)===null||Oi===void 0?void 0:Oi.variableOffsets[Fr.crossTileID])===null||ea===void 0?void 0:ea.anchor];const xs=(ss,ap,uh)=>{const Yc=ss.x2-ss.x1,rc=ss.y2-ss.y1,Rd=Fr.textBoxScale,M1=Tt&&Pt==="never"?ap:null;let vu=null,L1=dt==="never"?1:2,By="never";os&&L1++;for(let Sm=0;Sm<L1;Sm++){for(let Cm=Rl;Cm<Ld;Cm++){const Dd=C.textAnchorOffsets.get(Cm);if(os&&Dd.textAnchor!==os)continue;const Zc=this.attemptAnchorPlacement(Dd,ss,Yc,rc,Rd,Mt,Ot,me,cr,te,We,By,Fr,C,uh,B,X,M1,fr);if(Zc&&(vu=Zc.placedGlyphBoxes,vu&&vu.placeable))return Xi=!0,ii=Zc.shift,vu}os?os=null:By=dt}return w&&!vu&&(vu={box:this.collisionIndex.placeCollisionBox(sh,"always",me,cr,te,Ot,Mt,B,We.predicate,fr,void 0,Xr).box,offscreen:!1,placeable:!1,occluded:!1}),vu};tc((()=>xs(sh,Cn.iconBox,a.ao.horizontal)),(()=>{const ss=Cn.verticalTextBox;return C.allowVerticalPlacement&&(!Ji||!Ji.placeable)&&Fr.numVerticalGlyphVertices>0&&ss?xs(ss,Cn.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Ji&&(Xi=Ji.placeable,sa=Ji.offscreen);const Lu=Ql(Ji&&Ji.placeable);if(!Xi&&this.prevPlacement){const ss=this.prevPlacement.variableOffsets[Fr.crossTileID];ss&&(this.variableOffsets[Fr.crossTileID]=ss,this.markUsedJustification(C,ss.anchor,Fr,Lu))}}}if(Oo=Ji,Xi=Oo&&Oo.placeable,sa=Oo&&Oo.offscreen,Fr.useRuntimeCollisionCircles){const Ql=C.text.placedSymbolArray.get(Fr.centerJustifiedTextSymbolIndex),tc=a.ap(C.textSizeData,Fe,Ql),Rl=L.get("text-padding");as=this.collisionIndex.placeCollisionCircles(dt,Ql,C.lineVertexArray,C.glyphOffsetArray,tc,te,ce,w,Ot,We.predicate,Fr.collisionCircleDiameter,Rl,B,fr),as.circles.length&&as.collisionDetected&&!w&&a.w("Collisions detected, but collision boxes are not shown"),Xi=_t||as.circles.length>0&&!as.collisionDetected,sa=sa&&as.offscreen}if(Cn.iconFeatureIndex&&(Md=Cn.iconFeatureIndex),Cn.iconBox){const Ql=tc=>this.collisionIndex.placeCollisionBox(tc,Pt,me,cr,te,Ot,Mt,X,We.predicate,fr,Tt&&ii?ii:void 0,Xr);fo&&fo.placeable&&Cn.verticalIconBox?(_s=Ql(Cn.verticalIconBox),Ki=_s.placeable):(_s=Ql(Cn.iconBox),Ki=_s.placeable),sa=sa&&_s.offscreen}const lh=ct||Fr.numHorizontalGlyphVertices===0&&Fr.numVerticalGlyphVertices===0,pf=ut||Fr.numIconVertices===0;lh||pf?pf?lh||(Ki=Ki&&Xi):Xi=Ki&&Xi:Ki=Xi=Ki&&Xi;const mf=Ki&&_s.placeable;if(Xi&&Oo.placeable&&this.collisionIndex.insertCollisionBox(Oo.box,dt,L.get("text-ignore-placement"),C.bucketInstanceId,fo&&fo.placeable&&Ad?Ad:Ll,We.ID),mf&&this.collisionIndex.insertCollisionBox(_s.box,Pt,L.get("icon-ignore-placement"),C.bucketInstanceId,Md,We.ID),as&&Xi&&this.collisionIndex.insertCollisionCircles(as.circles,dt,L.get("text-ignore-placement"),C.bucketInstanceId,Ll,We.ID),w&&this.storeCollisionData(C.bucketInstanceId,vi,Cn,Oo,_s,as),Fr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Fr.crossTileID]=new Gl((Xi||gr)&&!Oo?.occluded,(Ki||lr)&&!_s?.occluded,sa||C.justReloaded),h[Fr.crossTileID]=!0};if(Vt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Fr=C.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Cn=Fr.length-1;Cn>=0;--Cn){const vi=Fr[Cn];Zr(C.symbolInstances.get(vi),C.collisionArrays[vi],vi)}}else for(let Fr=s.symbolInstanceStart;Fr<s.symbolInstanceEnd;Fr++)Zr(C.symbolInstances.get(Fr),C.collisionArrays[Fr],Fr);C.justReloaded=!1}storeCollisionData(s,h,w,C,L,B){if(w.textBox||w.iconBox){let X,te;this.collisionBoxArrays.has(s)?X=this.collisionBoxArrays.get(s):(X=new Map,this.collisionBoxArrays.set(s,X)),X.has(h)?te=X.get(h):(te={text:null,icon:null},X.set(h,te)),w.textBox&&(te.text=C.box),w.iconBox&&(te.icon=L.box)}if(B){let X=this.collisionCircleArrays[s];X===void 0&&(X=this.collisionCircleArrays[s]=[]);for(let te=0;te<B.circles.length;te+=4)X.push(B.circles[te+0]-Mi),X.push(B.circles[te+1]-Mi),X.push(B.circles[te+2]),X.push(B.collisionDetected?1:0)}}markUsedJustification(s,h,w,C){let L;L=C===a.ao.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[a.aG(h)];const B=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const X of B)X>=0&&(s.text.placedSymbolArray.get(X).crossTileID=L>=0&&X!==L?0:w.crossTileID)}markUsedOrientation(s,h,w){const C=h===a.ao.horizontal||h===a.ao.horizontalOnly?h:0,L=h===a.ao.vertical?h:0,B=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const X of B)s.text.placedSymbolArray.get(X).placedOrientation=C;w.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=L)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let w=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const C=h?h.symbolFadeChange(s):1,L=h?h.opacities:{},B=h?h.variableOffsets:{},X=h?h.placedOrientations:{};for(const te in this.placements){const ce=this.placements[te],me=L[te];me?(this.opacities[te]=new Nn(me,C,ce.text,ce.icon),w=w||ce.text!==me.text.placed||ce.icon!==me.icon.placed):(this.opacities[te]=new Nn(null,C,ce.text,ce.icon,ce.skipFade),w=w||ce.text||ce.icon)}for(const te in L){const ce=L[te];if(!this.opacities[te]){const me=new Nn(ce,C,!1,!1);me.isHidden()||(this.opacities[te]=me,w=w||ce.text.placed||ce.icon.placed)}}for(const te in B)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=B[te]);for(const te in X)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=X[te]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:s)}updateLayerOpacities(s,h){const w={};for(const C of h){const L=C.getBucket(s);L&&C.latestFeatureIndex&&s.id===L.layerIds[0]&&this.updateBucketOpacities(L,C.tileID,w,C.collisionBoxArray)}}updateBucketOpacities(s,h,w,C){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const L=s.layers[0],B=L.layout,X=new Nn(null,0,!1,!1,!0),te=B.get("text-allow-overlap"),ce=B.get("icon-allow-overlap"),me=L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Te=B.get("text-rotation-alignment")==="map",Ce=B.get("text-pitch-alignment")==="map",Fe=B.get("icon-text-fit")!=="none",We=new Nn(null,0,te&&(ce||!s.hasIconData()||B.get("icon-optional")),ce&&(te||!s.hasTextData()||B.get("text-optional")),!0);!s.collisionArrays&&C&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(C);const ct=(dt,_t,Pt)=>{for(let Et=0;Et<_t/4;Et++)dt.opacityVertexArray.emplaceBack(Pt);dt.hasVisibleVertices=dt.hasVisibleVertices||Pt!==Ga},ut=this.collisionBoxArrays.get(s.bucketInstanceId);for(let dt=0;dt<s.symbolInstances.length;dt++){const _t=s.symbolInstances.get(dt),{numHorizontalGlyphVertices:Pt,numVerticalGlyphVertices:Et,crossTileID:Mt}=_t;let Ot=this.opacities[Mt];w[Mt]?Ot=X:Ot||(Ot=We,this.opacities[Mt]=Ot),w[Mt]=!0;const Tt=_t.numIconVertices>0,Vt=this.placedOrientations[_t.crossTileID],gr=Vt===a.ao.vertical,lr=Vt===a.ao.horizontal||Vt===a.ao.horizontalOnly;if(Pt>0||Et>0){const fr=Ma(Ot.text);ct(s.text,Pt,gr?Ga:fr),ct(s.text,Et,lr?Ga:fr);const Xr=Ot.text.isHidden();[_t.rightJustifiedTextSymbolIndex,_t.centerJustifiedTextSymbolIndex,_t.leftJustifiedTextSymbolIndex].forEach((Cn=>{Cn>=0&&(s.text.placedSymbolArray.get(Cn).hidden=Xr||gr?1:0)})),_t.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(_t.verticalPlacedTextSymbolIndex).hidden=Xr||lr?1:0);const Zr=this.variableOffsets[_t.crossTileID];Zr&&this.markUsedJustification(s,Zr.anchor,_t,Vt);const Fr=this.placedOrientations[_t.crossTileID];Fr&&(this.markUsedJustification(s,"left",_t,Fr),this.markUsedOrientation(s,Fr,_t))}if(Tt){const fr=Ma(Ot.icon),Xr=!(Fe&&_t.verticalPlacedIconSymbolIndex&&gr);_t.placedIconSymbolIndex>=0&&(ct(s.icon,_t.numIconVertices,Xr?fr:Ga),s.icon.placedSymbolArray.get(_t.placedIconSymbolIndex).hidden=Ot.icon.isHidden()),_t.verticalPlacedIconSymbolIndex>=0&&(ct(s.icon,_t.numVerticalIconVertices,Xr?Ga:fr),s.icon.placedSymbolArray.get(_t.verticalPlacedIconSymbolIndex).hidden=Ot.icon.isHidden())}const cr=ut&&ut.has(dt)?ut.get(dt):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const fr=s.collisionArrays[dt];if(fr){let Xr=new a.P(0,0);if(fr.textBox||fr.verticalTextBox){let Zr=!0;if(me){const Fr=this.variableOffsets[Mt];Fr?(Xr=ca(Fr.anchor,Fr.width,Fr.height,Fr.textOffset,Fr.textBoxScale),Te&&Xr._rotate(Ce?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Zr=!1}if(fr.textBox||fr.verticalTextBox){let Fr;fr.textBox&&(Fr=gr),fr.verticalTextBox&&(Fr=lr),go(s.textCollisionBox.collisionVertexArray,Ot.text.placed,!Zr||Fr,cr.text,Xr.x,Xr.y)}}if(fr.iconBox||fr.verticalIconBox){const Zr=!!(!lr&&fr.verticalIconBox);let Fr;fr.iconBox&&(Fr=Zr),fr.verticalIconBox&&(Fr=!Zr),go(s.iconCollisionBox.collisionVertexArray,Ot.icon.placed,Fr,cr.icon,Fe?Xr.x:0,Fe?Xr.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,h){const w=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*w>s}setStale(){this.stale=!0}}function go(A,s,h,w,C,L){w&&w.length!==0||(w=[0,0,0,0]);const B=w[0]-Mi,X=w[1]-Mi,te=w[2]-Mi,ce=w[3]-Mi;A.emplaceBack(s?1:0,h?1:0,C||0,L||0,B,X),A.emplaceBack(s?1:0,h?1:0,C||0,L||0,te,X),A.emplaceBack(s?1:0,h?1:0,C||0,L||0,te,ce),A.emplaceBack(s?1:0,h?1:0,C||0,L||0,B,ce)}const qo=Math.pow(2,25),Xu=Math.pow(2,24),da=Math.pow(2,17),Yu=Math.pow(2,16),Zu=Math.pow(2,9),Ws=Math.pow(2,8),Ms=Math.pow(2,1);function Ma(A){if(A.opacity===0&&!A.placed)return 0;if(A.opacity===1&&A.placed)return 4294967295;const s=A.placed?1:0,h=Math.floor(127*A.opacity);return h*qo+s*Xu+h*da+s*Yu+h*Zu+s*Ws+h*Ms+s}const Ga=0;class va{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,h,w,C,L){const B=this._bucketParts;for(;this._currentTileIndex<s.length;)if(h.getBucketParts(B,C,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort(((X,te)=>X.sortKey-te.sortKey)));this._currentPartIndex<B.length;)if(h.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,L())return!0;return!1}}class Ls{constructor(s,h,w,C,L,B,X,te){this.placement=new To(s,h,B,X,te),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=L,this._done=!1}isDone(){return this._done}continuePlacement(s,h,w){const C=x.now(),L=()=>!this._forceFullPlacement&&x.now()-C>2;for(;this._currentPlacementIndex>=0;){const B=h[s[this._currentPlacementIndex]],X=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=X)&&(!B.maxzoom||B.maxzoom>X)){if(this._inProgressLayer||(this._inProgressLayer=new va(B)),this._inProgressLayer.continuePlacement(w[B.source],this.placement,this._showCollisionBoxes,B,L))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Hl=512/a.$/2;class Wl{constructor(s,h,w){this.tileID=s,this.bucketInstanceId=w,this._symbolsByKey={};const C=new Map;for(let L=0;L<h.length;L++){const B=h.get(L),X=B.key,te=C.get(X);te?te.push(B):C.set(X,[B])}for(const[L,B]of C){const X={positions:B.map((te=>({x:Math.floor(te.anchorX*Hl),y:Math.floor(te.anchorY*Hl)}))),crossTileIDs:B.map((te=>te.crossTileID))};if(X.positions.length>128){const te=new a.aI(X.positions.length,16,Uint16Array);for(const{x:ce,y:me}of X.positions)te.add(ce,me);te.finish(),delete X.positions,X.index=te}this._symbolsByKey[L]=X}}getScaledCoordinates(s,h){const{x:w,y:C,z:L}=this.tileID.canonical,{x:B,y:X,z:te}=h.canonical,ce=Hl/Math.pow(2,te-L),me=(X*a.$+s.anchorY)*ce,Te=C*a.$*Hl;return{x:Math.floor((B*a.$+s.anchorX)*ce-w*a.$*Hl),y:Math.floor(me-Te)}}findMatches(s,h,w){const C=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let L=0;L<s.length;L++){const B=s.get(L);if(B.crossTileID)continue;const X=this._symbolsByKey[B.key];if(!X)continue;const te=this.getScaledCoordinates(B,h);if(X.index){const ce=X.index.range(te.x-C,te.y-C,te.x+C,te.y+C).sort();for(const me of ce){const Te=X.crossTileIDs[me];if(!w[Te]){w[Te]=!0,B.crossTileID=Te;break}}}else if(X.positions)for(let ce=0;ce<X.positions.length;ce++){const me=X.positions[ce],Te=X.crossTileIDs[ce];if(Math.abs(me.x-te.x)<=C&&Math.abs(me.y-te.y)<=C&&!w[Te]){w[Te]=!0,B.crossTileID=Te;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:s})=>s))}}class J{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class pe{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const h=Math.round((s-this.lng)/360);if(h!==0)for(const w in this.indexes){const C=this.indexes[w],L={};for(const B in C){const X=C[B];X.tileID=X.tileID.unwrapTo(X.tileID.wrap+h),L[X.tileID.key]=X}this.indexes[w]=L}this.lng=s}addBucket(s,h,w){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let L=0;L<h.symbolInstances.length;L++)h.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const C=this.usedCrossTileIDs[s.overscaledZ];for(const L in this.indexes){const B=this.indexes[L];if(Number(L)>s.overscaledZ)for(const X in B){const te=B[X];te.tileID.isChildOf(s)&&te.findMatches(h.symbolInstances,s,C)}else{const X=B[s.scaledTo(Number(L)).key];X&&X.findMatches(h.symbolInstances,s,C)}}for(let L=0;L<h.symbolInstances.length;L++){const B=h.symbolInstances.get(L);B.crossTileID||(B.crossTileID=w.generate(),C[B.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Wl(s,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(s,h){for(const w of h.getCrossTileIDsLists())for(const C of w)delete this.usedCrossTileIDs[s][C]}removeStaleBuckets(s){let h=!1;for(const w in this.indexes){const C=this.indexes[w];for(const L in C)s[C[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,C[L]),delete C[L],h=!0)}return h}}class Xe{constructor(){this.layerIndexes={},this.crossTileIDs=new J,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,h,w){let C=this.layerIndexes[s.id];C===void 0&&(C=this.layerIndexes[s.id]=new pe);let L=!1;const B={};C.handleWrapJump(w);for(const X of h){const te=X.getBucket(s);te&&s.id===te.layerIds[0]&&(te.bucketInstanceId||(te.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(X.tileID,te,this.crossTileIDs)&&(L=!0),B[te.bucketInstanceId]=!0)}return C.removeStaleBuckets(B)&&(L=!0),L}pruneUnusedLayers(s){const h={};s.forEach((w=>{h[w]=!0}));for(const w in this.layerIndexes)h[w]||delete this.layerIndexes[w]}}var Ct="void main() {fragColor=vec4(1.0);}";const Rt={prelude:kt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:kt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:kt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:kt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:kt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:kt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:kt(Ct,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:kt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:kt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:kt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:kt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:kt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:kt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:kt(Ct,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:kt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:kt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:kt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:kt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:kt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:kt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:kt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:kt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:kt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:kt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:kt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:kt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:kt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:kt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:kt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:kt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:kt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:kt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:kt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:kt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function kt(A,s){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=s.match(/in ([\w]+) ([\w]+)/g),C=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=L?L.concat(C):C,X={};return{fragmentSource:A=A.replace(h,((te,ce,me,Te,Ce)=>(X[Ce]=!0,ce==="define"?`
#ifndef HAS_UNIFORM_u_${Ce}
in ${me} ${Te} ${Ce};
#else
uniform ${me} ${Te} u_${Ce};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ce}
    ${me} ${Te} ${Ce} = u_${Ce};
#endif
`))),vertexSource:s=s.replace(h,((te,ce,me,Te,Ce)=>{const Fe=Te==="float"?"vec2":"vec4",We=Ce.match(/color/)?"color":Fe;return X[Ce]?ce==="define"?`
#ifndef HAS_UNIFORM_u_${Ce}
uniform lowp float u_${Ce}_t;
in ${me} ${Fe} a_${Ce};
out ${me} ${Te} ${Ce};
#else
uniform ${me} ${Te} u_${Ce};
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ce}
    ${Ce} = a_${Ce};
#else
    ${me} ${Te} ${Ce} = u_${Ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ce}
    ${Ce} = unpack_mix_${We}(a_${Ce}, u_${Ce}_t);
#else
    ${me} ${Te} ${Ce} = u_${Ce};
#endif
`:ce==="define"?`
#ifndef HAS_UNIFORM_u_${Ce}
uniform lowp float u_${Ce}_t;
in ${me} ${Fe} a_${Ce};
#else
uniform ${me} ${Te} u_${Ce};
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ce}
    ${me} ${Te} ${Ce} = a_${Ce};
#else
    ${me} ${Te} ${Ce} = u_${Ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ce}
    ${me} ${Te} ${Ce} = unpack_mix_${We}(a_${Ce}, u_${Ce}_t);
#else
    ${me} ${Te} ${Ce} = u_${Ce};
#endif
`})),staticAttributes:w,staticUniforms:B}}class Xt{constructor(s,h,w){this.vertexBuffer=s,this.indexBuffer=h,this.segments=w}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Or=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const qr="#define PROJECTION_MERCATOR",Br="mercator";class Sr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Br}get shaderDefine(){return qr}get shaderPreludeCode(){return Rt.projectionMercator}get vertexShaderPreludeCode(){return Rt.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,h,w,C,L){if(this._cachedMesh)return this._cachedMesh;const B=new a.aL;B.emplaceBack(0,0),B.emplaceBack(a.$,0),B.emplaceBack(0,a.$),B.emplaceBack(a.$,a.$);const X=s.createVertexBuffer(B,Or.members),te=a.aM.simpleSegment(0,0,4,2),ce=new a.aN;ce.emplaceBack(1,0,2),ce.emplaceBack(1,2,3);const me=s.createIndexBuffer(ce);return this._cachedMesh=new Xt(X,me,te),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class Gr{constructor(s=0,h=0,w=0,C=0){if(isNaN(s)||s<0||isNaN(h)||h<0||isNaN(w)||w<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=h,this.left=w,this.right=C}interpolate(s,h,w){return h.top!=null&&s.top!=null&&(this.top=a.C.number(s.top,h.top,w)),h.bottom!=null&&s.bottom!=null&&(this.bottom=a.C.number(s.bottom,h.bottom,w)),h.left!=null&&s.left!=null&&(this.left=a.C.number(s.left,h.left,w)),h.right!=null&&s.right!=null&&(this.right=a.C.number(s.right,h.right,w)),this}getCenter(s,h){const w=a.ah((this.left+s-this.right)/2,0,s),C=a.ah((this.top+h-this.bottom)/2,0,h);return new a.P(w,C)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Gr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Un(A,s){if(!A.renderWorldCopies||A.lngRange)return;const h=s.lng-A.center.lng;s.lng+=h>180?-360:h<-180?360:0}function pi(A){return Math.max(0,Math.floor(A))}class mn{constructor(s,h,w,C,L,B){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=B===void 0||!!B,this._minZoom=h||0,this._maxZoom=w||22,this._minPitch=C??0,this._maxPitch=L??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=pi(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Gr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,h,w){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=pi(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new Gr(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!w&&s.autoCalculateNearFarZ,h&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const h=a.aO(s,-180,180)*Math.PI/180;var w,C,L,B,X,te,ce,me,Te;this._bearingInRadians!==h&&(this._unmodified=!1,this._bearingInRadians=h,this._calcMatrices(),this._rotationMatrix=p(),w=this._rotationMatrix,L=-this._bearingInRadians,B=(C=this._rotationMatrix)[0],X=C[1],te=C[2],ce=C[3],me=Math.sin(L),Te=Math.cos(L),w[0]=B*Te+te*me,w[1]=X*Te+ce*me,w[2]=B*-me+te*Te,w[3]=X*-me+ce*Te)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const h=a.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==h&&(this._unmodified=!1,this._pitchInRadians=h,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const h=s/180*Math.PI;this._rollInRadians!==h&&(this._unmodified=!1,this._rollInRadians=h,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(s){s=a.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=a.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const h=this.getConstrained(this._center,s).zoom;this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this._tileZoom=Math.max(0,Math.floor(h)),this._scale=a.af(h),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,h){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=h,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,h,w){this._unmodified=!1,this._edgeInsets.interpolate(s,h,w),this._constrain(),this._calcMatrices()}resize(s,h,w=!0){this._width=s,this._height=h,w&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new It([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(s,h){return this._callbacks.getConstrained(s,h)}getCameraQueryGeometry(s,h){if(h.length===1)return[h[0],s];{const{minX:w,minY:C,maxX:L,maxY:B}=a.a2.fromPoints(h).extend(s);return[new a.P(w,C),new a.P(L,C),new a.P(L,B),new a.P(w,B),new a.P(w,C)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:h,zoom:w}=this.getConstrained(this.center,this.zoom);this.setCenter(h),this.setZoom(w),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=a.ag(new Float64Array(16));a.N(s,s,[this._width/2,-this._height/2,1]),a.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=a.ag(new Float64Array(16)),a.N(s,s,[1,-1,1]),a.M(s,s,[-1,-1,0]),a.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,h,w,C){const L=w!==void 0?w:this.bearing,B=C=C!==void 0?C:this.pitch,X=a.a1.fromLngLat(s,h),te=-Math.cos(a.ae(B)),ce=Math.sin(a.ae(B)),me=ce*Math.sin(a.ae(L)),Te=-ce*Math.cos(a.ae(L));let Ce=this.elevation;const Fe=h-Ce;let We;te*Fe>=0||Math.abs(te)<.1?(We=1e4,Ce=h+We*te):We=-Fe/te;let ct,ut,dt=a.aQ(1,X.y),_t=0;do{if(_t+=1,_t>10)break;ut=We/dt,ct=new a.a1(X.x+me*ut,X.y+Te*ut),dt=1/ct.meterInMercatorCoordinateUnits()}while(Math.abs(We-ut*dt)>1e-12);return{center:ct.toLngLat(),elevation:Ce,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/ut/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const h=a.aj(1,this.center.lat)*this.worldSize,w=this.cameraToCenterDistance/h,C=a.a1.fromLngLat(this.center,this.elevation),L=Lt(this.center,this.elevation,this.pitch,this.bearing,w);this._elevation=s;const B=this.calculateCenterFromCameraLngLatAlt(L.toLngLat(),a.aQ(L.z,C.y),this.bearing,this.pitch);this._elevation=B.elevation,this._center=B.center,this.setZoom(B.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return Lt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const h=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/h,s.canonical.y/h,1/h/a.$,1/h/a.$]}}class an{constructor(s,h){this.min=s,this.max=h,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(s){const h=[s%2==0,s<2],w=a.aT(this.min),C=a.aT(this.max);for(let L=0;L<h.length;L++)w[L]=h[L]?this.min[L]:this.center[L],C[L]=h[L]?this.center[L]:this.max[L];return C[2]=this.max[2],new an(w,C)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let h=!0;for(let w=0;w<s.planes.length;w++){const C=this.intersectsPlane(s.planes[w]);if(C===0)return 0;C===1&&(h=!1)}return h?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let h=s[3],w=s[3];for(let C=0;C<3;C++)s[C]>0?(h+=s[C]*this.min[C],w+=s[C]*this.max[C]):(w+=s[C]*this.min[C],h+=s[C]*this.max[C]);return h>=0?2:w<0?0:1}}class Cr{distanceToTile2d(s,h,w,C){const L=C.distanceX([s,h]),B=C.distanceY([s,h]);return Math.hypot(L,B)}getWrap(s,h,w){return w}getTileBoundingVolume(s,h,w,C){var L,B;let X=0,te=0;if(C?.terrain){const me=new a.Z(s.z,h,s.z,s.x,s.y),Te=C.terrain.getMinMaxElevation(me);X=(L=Te.minElevation)!==null&&L!==void 0?L:Math.min(0,w),te=(B=Te.maxElevation)!==null&&B!==void 0?B:Math.max(0,w)}const ce=1<<s.z;return new an([h+s.x/ce,s.y/ce,X],[h+(s.x+1)/ce,(s.y+1)/ce,te])}allowVariableZoom(s,h){const w=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,C=a.ah(78.5-w/2,0,60);return!!h.terrain||s.pitch>C}allowWorldCopies(){return!0}prepareNextFrame(){}}class tn{constructor(s,h,w){this.points=s,this.planes=h,this.aabb=w}static fromInvProjectionMatrix(s,h=1,w=0,C,L){const B=L?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],X=Math.pow(2,w),te=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((Ce=>(function(Fe,We,ct,ut){const dt=a.aw([],Fe,We),_t=1/dt[3]/ct*ut;return a.aY(dt,dt,[_t,_t,1/dt[3],_t])})(Ce,s,h,X)));C&&(function(Ce,Fe,We,ct){const ut=ct?4:0,dt=ct?0:4;let _t=0;const Pt=[],Et=[];for(let Tt=0;Tt<4;Tt++){const Vt=a.aU([],Ce[Tt+dt],Ce[Tt+ut]),gr=a.aZ(Vt);a.aR(Vt,Vt,1/gr),Pt.push(gr),Et.push(Vt)}for(let Tt=0;Tt<4;Tt++){const Vt=a.a_(Ce[Tt+ut],Et[Tt],We);_t=Vt!==null&&Vt>=0?Math.max(_t,Vt):Math.max(_t,Pt[Tt])}const Mt=(function(Tt,Vt){const gr=a.aU([],Tt[Vt[0]],Tt[Vt[1]]),lr=a.aU([],Tt[Vt[2]],Tt[Vt[1]]),cr=[0,0,0,0];return a.aV(cr,a.aW([],gr,lr)),cr[3]=-a.aX(cr,Tt[Vt[0]]),cr})(Ce,Fe),Ot=(function(Tt,Vt){const gr=a.a$(Tt),lr=a.b0([],Tt,1/gr),cr=a.aU([],Vt,a.aR([],lr,a.aX(Vt,lr))),fr=a.a$(cr);if(fr>0){const Xr=Math.sqrt(1-lr[3]*lr[3]),Zr=a.aR([],lr,-lr[3]),Fr=a.aS([],Zr,a.aR([],cr,Xr/fr));return a.b1(Vt,Fr)}return null})(We,Mt);if(Ot!==null){const Tt=Ot/a.aX(Et[0],Mt);_t=Math.min(_t,Tt)}for(let Tt=0;Tt<4;Tt++){const Vt=Math.min(_t,Pt[Tt]);Ce[Tt+dt]=[Ce[Tt+ut][0]+Et[Tt][0]*Vt,Ce[Tt+ut][1]+Et[Tt][1]*Vt,Ce[Tt+ut][2]+Et[Tt][2]*Vt,1]}})(te,B[0],C,L);const ce=B.map((Ce=>{const Fe=a.aU([],te[Ce[0]],te[Ce[1]]),We=a.aU([],te[Ce[2]],te[Ce[1]]),ct=a.aV([],a.aW([],Fe,We)),ut=-a.aX(ct,te[Ce[1]]);return ct.concat(ut)})),me=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Te=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Ce of te)for(let Fe=0;Fe<3;Fe++)me[Fe]=Math.min(me[Fe],Ce[Fe]),Te[Fe]=Math.max(Te[Fe],Ce[Fe]);return new tn(te,ce,new an(me,Te))}}class On{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,h,w){return this._helper.interpolatePadding(s,h,w)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,h,w=!0){this._helper.resize(s,h,w)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,h){this._helper.overrideNearFarZ(s,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,h){}constructor(s,h,w,C,L){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new mn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(B,X)=>this.getConstrained(B,X)},s,h,w,C,L),this._coveringTilesDetailsProvider=new Cr}clone(){const s=new On;return s.apply(this),s}apply(s,h,w){this._helper.apply(s,h,w)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const h=[new a.b2(0,s)];if(this._helper._renderWorldCopies){const w=this.screenPointToMercatorCoordinate(new a.P(0,0)),C=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),L=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),B=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),X=Math.floor(Math.min(w.x,C.x,L.x,B.x)),te=Math.floor(Math.max(w.x,C.x,L.x,B.x)),ce=1;for(let me=X-ce;me<=te+ce;me++)me!==0&&h.push(new a.b2(me,s))}return h}getCameraFrustum(){return tn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const h=this.screenPointToLocation(this.centerPoint,s),w=s?s.getElevationForLngLatZoom(h,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(w)}setLocationAtPoint(s,h){const w=a.aj(this.elevation,this.center.lat),C=this.screenPointToMercatorCoordinateAtZ(h,w),L=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,w),B=a.a1.fromLngLat(s),X=new a.a1(B.x-(C.x-L.x),B.y-(C.y-L.y));this.setCenter(X?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,h){return h?this.coordinatePoint(a.a1.fromLngLat(s),h.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(s))}screenPointToLocation(s,h){var w;return(w=this.screenPointToMercatorCoordinate(s,h))===null||w===void 0?void 0:w.toLngLat()}screenPointToMercatorCoordinate(s,h){if(h){const w=h.pointCoordinate(s);if(w!=null)return w}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,h){const w=h||0,C=[s.x,s.y,0,1],L=[s.x,s.y,1,1];a.aw(C,C,this._pixelMatrixInverse),a.aw(L,L,this._pixelMatrixInverse);const B=C[3],X=L[3],te=C[1]/B,ce=L[1]/X,me=C[2]/B,Te=L[2]/X,Ce=me===Te?0:(w-me)/(Te-me);return new a.a1(a.C.number(C[0]/B,L[0]/X,Ce)/this.worldSize,a.C.number(te,ce,Ce)/this.worldSize,w)}coordinatePoint(s,h=0,w=this._pixelMatrix){const C=[s.x*this.worldSize,s.y*this.worldSize,h,1];return a.aw(C,C,w),new a.P(C[0]/C[3],C[1]/C[3])}getBounds(){const s=Math.max(0,this._helper._height/2-ot(this));return new It().extend(this.screenPointToLocation(new a.P(0,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(s,h){return h?h.pointCoordinate(s)!=null:s.y>this.height/2-ot(this)}calculatePosMatrix(s,h=!1,w){var C;const L=(C=s.key)!==null&&C!==void 0?C:a.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),B=h?this._alignedPosMatrixCache:this._posMatrixCache;if(B.has(L)){const ce=B.get(L);return w?ce.f32:ce.f64}const X=et(s,this.worldSize);a.O(X,h?this._alignedProjMatrix:this._viewProjMatrix,X);const te={f64:X,f32:new Float32Array(X)};return B.set(L,te),w?te.f32:te.f64}calculateFogMatrix(s){const h=s.key,w=this._fogMatrixCacheF32;if(w.has(h))return w.get(h);const C=et(s,this.worldSize);return a.O(C,this._fogMatrix,C),w.set(h,new Float32Array(C)),w.get(h)}getConstrained(s,h){h=a.ah(+h,this.minZoom,this.maxZoom);const w={center:new a.S(s.lng,s.lat),zoom:h};let C=this._helper._lngRange;if(!this._helper._renderWorldCopies&&C===null){const Pt=179.9999999999;C=[-Pt,Pt]}const L=this.tileSize*a.af(w.zoom);let B=0,X=L,te=0,ce=L,me=0,Te=0;const{x:Ce,y:Fe}=this.size;if(this._helper._latRange){const Pt=this._helper._latRange;B=a.U(Pt[1])*L,X=a.U(Pt[0])*L,X-B<Fe&&(me=Fe/(X-B))}C&&(te=a.aO(a.V(C[0])*L,0,L),ce=a.aO(a.V(C[1])*L,0,L),ce<te&&(ce+=L),ce-te<Ce&&(Te=Ce/(ce-te)));const{x:We,y:ct}=Ue(L,s);let ut,dt;const _t=Math.max(Te||0,me||0);if(_t){const Pt=new a.P(Te?(ce+te)/2:We,me?(X+B)/2:ct);return w.center=Qe(L,Pt).wrap(),w.zoom+=a.ak(_t),w}if(this._helper._latRange){const Pt=Fe/2;ct-Pt<B&&(dt=B+Pt),ct+Pt>X&&(dt=X-Pt)}if(C){const Pt=(te+ce)/2;let Et=We;this._helper._renderWorldCopies&&(Et=a.aO(We,Pt-L/2,Pt+L/2));const Mt=Ce/2;Et-Mt<te&&(ut=te+Mt),Et+Mt>ce&&(ut=ce-Mt)}if(ut!==void 0||dt!==void 0){const Pt=new a.P(ut??We,dt??ct);w.center=Qe(L,Pt).wrap()}return w}calculateCenterFromCameraLngLatAlt(s,h,w,C){return this._helper.calculateCenterFromCameraLngLatAlt(s,h,w,C)}_calculateNearFarZIfNeeded(s,h,w){if(!this._helper.autoCalculateNearFarZ)return;const C=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),L=s-C*this._helper._pixelPerMeter/Math.cos(h),B=C<0?L:s,X=Math.PI/2+this.pitchInRadians,te=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+w.y/this.height),ce=Math.sin(te)*B/Math.sin(a.ah(Math.PI-X-te,.01,Math.PI-.01)),me=ot(this),Te=Math.atan(me/this._helper.cameraToCenterDistance),Ce=a.ae(.75),Fe=Te>Ce?2*Te*(.5+w.y/(2*me)):Ce,We=Math.sin(Fe)*B/Math.sin(a.ah(Math.PI-X-Fe,.01,Math.PI-.01)),ct=Math.min(ce,We);this._helper._farZ=1.01*(Math.cos(Math.PI/2-h)*ct+B),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,h=Ue(this.worldSize,this.center),w=h.x,C=h.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const L=a.ae(Math.min(this.pitch,_e)),B=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(L));let X;this._calculateNearFarZIfNeeded(B,L,s),X=new Float64Array(16),a.b4(X,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,X),X[8]=2*-s.x/this._helper._width,X[9]=2*s.y/this._helper._height,this._projectionMatrix=a.b5(X),a.N(X,X,[1,-1,1]),a.M(X,X,[0,0,-this._helper.cameraToCenterDistance]),a.b6(X,X,-this.rollInRadians),a.b7(X,X,this.pitchInRadians),a.b6(X,X,-this.bearingInRadians),a.M(X,X,[-w,-C,0]),this._mercatorMatrix=a.N([],X,[this.worldSize,this.worldSize,this.worldSize]),a.N(X,X,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,X),a.M(X,X,[0,0,-this.elevation]),this._viewProjMatrix=X,this._invViewProjMatrix=a.aq([],X);const te=[0,0,-1,1];a.aw(te,te,this._invViewProjMatrix),this._cameraPosition=[te[0]/te[3],te[1]/te[3],te[2]/te[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,B,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-w,-C,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,X);const ce=this._helper._width%2/2,me=this._helper._height%2/2,Te=Math.cos(this.bearingInRadians),Ce=Math.sin(-this.bearingInRadians),Fe=w-Math.round(w)+Te*ce+Ce*me,We=C-Math.round(C)+Te*me+Ce*ce,ct=new Float64Array(X);if(a.M(ct,ct,[Fe>.5?Fe-1:Fe,We>.5?We-1:We,0]),this._alignedProjMatrix=ct,X=a.aq(new Float64Array(16),this._pixelMatrix),!X)throw new Error("failed to invert matrix");this._pixelMatrixInverse=X,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new a.P(0,0)),h=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.aw(h,h,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return Lt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,h){const w=a.a1.fromLngLat(s),C=[w.x*this.worldSize,w.y*this.worldSize,h,1];return a.aw(C,C,this._viewProjMatrix),C[2]/C[3]}getProjectionData(s){const{overscaledTileID:h,aligned:w,applyTerrainMatrix:C}=s,L=this._helper.getMercatorTileCoordinates(h),B=h?this.calculatePosMatrix(h,w,!0):null;let X;return X=h&&h.terrainRttPosMatrix32f&&C?h.terrainRttPosMatrix32f:B||a.b8(),{mainMatrix:X,tileMercatorCoords:L,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:X}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,h,w){return 1}transformLightDirection(s){return a.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,h,w,C){const L=this.calculatePosMatrix(w);let B;C?(B=[s,h,C(s,h),1],a.aw(B,B,L)):(B=[s,h,0,1],ua(B,B,L));const X=B[3];return{point:new a.P(B[0]/X,B[1]/X),signedDistanceFromCamera:X,isOccluded:!1}}populateCache(s){for(const h of s)this.calculatePosMatrix(h)}getMatrixForModel(s,h){const w=a.a1.fromLngLat(s,h),C=w.meterInMercatorCoordinateUnits(),L=a.b9();return a.M(L,L,[w.x,w.y,w.z]),a.b6(L,L,Math.PI),a.b7(L,L,Math.PI/2),a.N(L,L,[-C,C,C]),L}getProjectionDataForCustomLayer(s=!0){const h=new a.Z(0,0,0,0,0),w=this.getProjectionData({overscaledTileID:h,applyGlobeMatrix:s}),C=et(h,this.worldSize);a.O(C,this._viewProjMatrix,C),w.tileMercatorCoords=[0,0,1,1];const L=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],B=a.ba();return a.N(B,C,L),w.fallbackMatrix=B,w.mainMatrix=B,w}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function ba(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function gi(A){if(A.useSlerp)if(A.k<1){const s=a.bb(A.startEulerAngles.roll,A.startEulerAngles.pitch,A.startEulerAngles.bearing),h=a.bb(A.endEulerAngles.roll,A.endEulerAngles.pitch,A.endEulerAngles.bearing),w=new Float64Array(4);a.bc(w,s,h,A.k);const C=a.bd(w);A.tr.setRoll(C.roll),A.tr.setPitch(C.pitch),A.tr.setBearing(C.bearing)}else A.tr.setRoll(A.endEulerAngles.roll),A.tr.setPitch(A.endEulerAngles.pitch),A.tr.setBearing(A.endEulerAngles.bearing);else A.tr.setRoll(a.C.number(A.startEulerAngles.roll,A.endEulerAngles.roll,A.k)),A.tr.setPitch(a.C.number(A.startEulerAngles.pitch,A.endEulerAngles.pitch,A.k)),A.tr.setBearing(a.C.number(A.startEulerAngles.bearing,A.endEulerAngles.bearing,A.k))}function _a(A,s,h,w,C){const L=C.padding,B=Ue(C.worldSize,h.getNorthWest()),X=Ue(C.worldSize,h.getNorthEast()),te=Ue(C.worldSize,h.getSouthEast()),ce=Ue(C.worldSize,h.getSouthWest()),me=a.ae(-w),Te=B.rotate(me),Ce=X.rotate(me),Fe=te.rotate(me),We=ce.rotate(me),ct=new a.P(Math.max(Te.x,Ce.x,We.x,Fe.x),Math.max(Te.y,Ce.y,We.y,Fe.y)),ut=new a.P(Math.min(Te.x,Ce.x,We.x,Fe.x),Math.min(Te.y,Ce.y,We.y,Fe.y)),dt=ct.sub(ut),_t=(C.width-(L.left+L.right+s.left+s.right))/dt.x,Pt=(C.height-(L.top+L.bottom+s.top+s.bottom))/dt.y;if(Pt<0||_t<0)return void ba();const Et=Math.min(a.ak(C.scale*Math.min(_t,Pt)),A.maxZoom),Mt=a.P.convert(A.offset),Ot=new a.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(a.ae(w)),Tt=Mt.add(Ot).mult(C.scale/a.af(Et));return{center:Qe(C.worldSize,B.add(te).div(2).sub(Tt)),zoom:Et,bearing:w}}class si{get useGlobeControls(){return!1}handlePanInertia(s,h){const w=s.mag(),C=Math.abs(ot(h));return{easingOffset:s.mult(Math.min(.75*C/w,1)),easingCenter:h.center}}handleMapControlsRollPitchBearingZoom(s,h){s.bearingDelta&&h.setBearing(h.bearing+s.bearingDelta),s.pitchDelta&&h.setPitch(h.pitch+s.pitchDelta),s.rollDelta&&h.setRoll(h.roll+s.rollDelta),s.zoomDelta&&h.setZoom(h.zoom+s.zoomDelta)}handleMapControlsPan(s,h,w){s.around.distSqr(h.centerPoint)<.01||h.setLocationAtPoint(w,s.around)}cameraForBoxAndBearing(s,h,w,C,L){return _a(s,h,w,C,L)}handleJumpToCenterZoom(s,h){s.zoom!==(h.zoom!==void 0?+h.zoom:s.zoom)&&s.setZoom(+h.zoom),h.center!==void 0&&s.setCenter(a.S.convert(h.center))}handleEaseTo(s,h){const w=s.zoom,C=s.padding,L={roll:s.roll,pitch:s.pitch,bearing:s.bearing},B={roll:h.roll===void 0?s.roll:h.roll,pitch:h.pitch===void 0?s.pitch:h.pitch,bearing:h.bearing===void 0?s.bearing:h.bearing},X=h.zoom!==void 0,te=!s.isPaddingEqual(h.padding);let ce=!1;const me=X?+h.zoom:s.zoom;let Te=s.centerPoint.add(h.offsetAsPoint);const Ce=s.screenPointToLocation(Te),{center:Fe,zoom:We}=s.getConstrained(a.S.convert(h.center||Ce),me??w);Un(s,Fe);const ct=Ue(s.worldSize,Ce),ut=Ue(s.worldSize,Fe).sub(ct),dt=a.af(We-w);return ce=We!==w,{easeFunc:_t=>{if(ce&&s.setZoom(a.C.number(w,We,_t)),a.be(L,B)||gi({startEulerAngles:L,endEulerAngles:B,tr:s,k:_t,useSlerp:L.roll!=B.roll}),te&&(s.interpolatePadding(C,h.padding,_t),Te=s.centerPoint.add(h.offsetAsPoint)),h.around)s.setLocationAtPoint(h.around,h.aroundPoint);else{const Pt=a.af(s.zoom-w),Et=We>w?Math.min(2,dt):Math.max(.5,dt),Mt=Math.pow(Et,1-_t),Ot=Qe(s.worldSize,ct.add(ut.mult(_t*Mt)).mult(Pt));s.setLocationAtPoint(s.renderWorldCopies?Ot.wrap():Ot,Te)}},isZooming:ce,elevationCenter:Fe}}handleFlyTo(s,h){const w=h.zoom!==void 0,C=s.zoom,L=s.getConstrained(a.S.convert(h.center||h.locationAtOffset),w?+h.zoom:C),B=L.center,X=L.zoom;Un(s,B);const te=Ue(s.worldSize,h.locationAtOffset),ce=Ue(s.worldSize,B).sub(te),me=ce.mag(),Te=a.af(X-C);let Ce;if(h.minZoom!==void 0){const Fe=Math.min(+h.minZoom,C,X),We=s.getConstrained(B,Fe).zoom;Ce=a.af(We-C)}return{easeFunc:(Fe,We,ct,ut)=>{s.setZoom(Fe===1?X:C+a.ak(We));const dt=Fe===1?B:Qe(s.worldSize,te.add(ce.mult(ct)).mult(We));s.setLocationAtPoint(s.renderWorldCopies?dt.wrap():dt,ut)},scaleOfZoom:Te,targetCenter:B,scaleOfMinZoom:Ce,pixelPathLength:me}}}class An{constructor(s,h,w){this.blendFunction=s,this.blendColor=h,this.mask=w}}An.Replace=[1,0],An.disabled=new An(An.Replace,a.bf.transparent,[!1,!1,!1,!1]),An.unblended=new An(An.Replace,a.bf.transparent,[!0,!0,!0,!0]),An.alphaBlended=new An([1,771],a.bf.transparent,[!0,!0,!0,!0]);const $o=2305;class Mn{constructor(s,h,w){this.enable=s,this.mode=h,this.frontFace=w}}Mn.disabled=new Mn(!1,1029,$o),Mn.backCCW=new Mn(!0,1029,$o),Mn.frontCCW=new Mn(!0,1028,$o);class En{constructor(s,h,w){this.func=s,this.mask=h,this.range=w}}En.ReadOnly=!1,En.ReadWrite=!0,En.disabled=new En(519,En.ReadOnly,[0,1]);const Po=7680;class jn{constructor(s,h,w,C,L,B){this.test=s,this.ref=h,this.mask=w,this.fail=C,this.depthFail=L,this.pass=B}}jn.disabled=new jn({func:519,mask:0},0,0,Po,Po,Po);const yo=new WeakMap;function oo(A){var s;if(yo.has(A))return yo.get(A);{const h=(s=A.getParameter(A.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return yo.set(A,h),h}}class Io{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const h=s.context,w=h.gl;this._texFormat=w.RGBA,this._texType=w.UNSIGNED_BYTE;const C=new a.aL;C.emplaceBack(-1,-1),C.emplaceBack(2,-1),C.emplaceBack(-1,2);const L=new a.aN;L.emplaceBack(0,1,2),this._fullscreenTriangle=new Xt(h.createVertexBuffer(C,Or.members),h.createIndexBuffer(L),a.aM.simpleSegment(0,0,C.length,L.length)),this._resultBuffer=new Uint8Array(4),h.activeTexture.set(w.TEXTURE1);const B=w.createTexture();w.bindTexture(w.TEXTURE_2D,B),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texImage2D(w.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=h.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(B),oo(w)&&(this._pbo=w.createBuffer(),w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.bufferData(w.PIXEL_PACK_BUFFER,4,w.STREAM_READ),w.bindBuffer(w.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,h){const w=this._updateCount;return this._readbackQueue?w>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():w>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,h),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,h=s.gl;s.activeTexture.set(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,h){const w=this._cachedRenderContext.context,C=w.gl;if(this._bindFramebuffer(),w.viewport.set([0,0,this._texWidth,this._texHeight]),w.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(w,C.TRIANGLES,En.disabled,jn.disabled,An.unblended,Mn.disabled,((L,B)=>({u_input:L,u_output_expected:B}))(s,h),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&oo(C)){C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.readBuffer(C.COLOR_ATTACHMENT0),C.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),C.bindBuffer(C.PIXEL_PACK_BUFFER,null);const L=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:L}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&oo(s)){const h=s.clientWaitSync(this._readbackQueue.sync,0,0);if(h===s.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(h===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Io._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let h=0;return h+=s[0]/256,h+=s[1]/65536,h+=s[2]/16777216,s[3]<127&&(h=-h),h/128}}const Rs=a.$/128;function Pl(A,s){const h=A.granularity!==void 0?Math.max(A.granularity,1):1,w=h+(A.generateBorders?2:0),C=h+(A.extendToNorthPole||A.generateBorders?1:0)+(A.extendToSouthPole||A.generateBorders?1:0),L=w+1,B=C+1,X=A.generateBorders?-1:0,te=A.generateBorders||A.extendToNorthPole?-1:0,ce=h+(A.generateBorders?1:0),me=h+(A.generateBorders||A.extendToSouthPole?1:0),Te=L*B,Ce=w*C*6,Fe=L*B>65536;if(Fe&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const We=Fe||s==="32bit",ct=new Int16Array(2*Te);let ut=0;for(let Pt=te;Pt<=me;Pt++)for(let Et=X;Et<=ce;Et++){let Mt=Et/h*a.$;Et===-1&&(Mt=-Rs),Et===h+1&&(Mt=a.$+Rs);let Ot=Pt/h*a.$;Pt===-1&&(Ot=A.extendToNorthPole?a.bh:-Rs),Pt===h+1&&(Ot=A.extendToSouthPole?a.bi:a.$+Rs),ct[ut++]=Mt,ct[ut++]=Ot}const dt=We?new Uint32Array(Ce):new Uint16Array(Ce);let _t=0;for(let Pt=0;Pt<C;Pt++)for(let Et=0;Et<w;Et++){const Mt=Et+1+Pt*L,Ot=Et+(Pt+1)*L,Tt=Et+1+(Pt+1)*L;dt[_t++]=Et+Pt*L,dt[_t++]=Ot,dt[_t++]=Mt,dt[_t++]=Mt,dt[_t++]=Ot,dt[_t++]=Tt}return{vertices:ct.buffer.slice(0),indices:dt.buffer.slice(0),uses32bitIndices:We}}const Xs=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class so{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Rt.projectionGlobe}get vertexShaderPreludeCode(){return Rt.projectionMercator.vertexSource}get subdivisionGranularity(){return Xs}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new Io(s));const h=a.U(this._errorQueryLatitudeDegrees),w=2*Math.atan(Math.exp(Math.PI-h*Math.PI*2))-.5*Math.PI,C=this._errorMeasurement.updateErrorLoop(h,w),L=x.now();C!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=C,this._errorMeasurementLastChangeTime=L);const B=Math.min(Math.max((L-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(B))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,h,w,C,L){const B=(L==="stencil"?Xs.stencil:Xs.tile).getGranularityForZoomLevel(h.z);return this._getMesh(s,{granularity:B,generateBorders:w,extendToNorthPole:h.y===0&&C,extendToSouthPole:h.y===(1<<h.z)-1&&C})}_getMesh(s,h){const w=this._getMeshKey(h);if(w in this._tileMeshCache)return this._tileMeshCache[w];const C=(function(L,B){const X=Pl(B,"16bit"),te=a.aL.deserialize({arrayBuffer:X.vertices,length:X.vertices.byteLength/2/2}),ce=a.aN.deserialize({arrayBuffer:X.indices,length:X.indices.byteLength/2/3});return new Xt(L.createVertexBuffer(te,Or.members),L.createIndexBuffer(ce),a.aM.simpleSegment(0,0,te.length,ce.length))})(s,h);return this._tileMeshCache[w]=C,C}recalculate(s){}hasTransition(){const s=x.now();let h=!1;return h=h||(s-this._errorMeasurementLastChangeTime)/1e3<.7,h=h||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,h}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const Ds=new a.r({type:new a.D(a.v.projection.type)});class Ys extends a.E{constructor(s){super(),this._transitionable=new a.t(Ds),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new Sr,this._verticalPerspectiveProjection=new so}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof a.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,h,w,C,L){return this.currentProjection.getMeshFromTileID(s,h,w,C,L)}setProjection(s){this._transitionable.setValue("type",s?.type||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function Ha(A){const s=Ca(A.worldSize,A.center.lat);return 2*Math.PI*s}function Wa(A,s,h,w,C){const L=1/(1<<C),B=s/a.$*L+w*L,X=a.bo((A/a.$*L+h*L)*Math.PI*2+Math.PI,2*Math.PI),te=2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI,ce=Math.cos(te),me=new Float64Array(3);return me[0]=Math.sin(X)*ce,me[1]=Math.sin(te),me[2]=Math.cos(X)*ce,me}function Gi(A){return(function(s,h){const w=Math.cos(h),C=new Float64Array(3);return C[0]=Math.sin(s)*w,C[1]=Math.sin(h),C[2]=Math.cos(s)*w,C})(A.lng*Math.PI/180,A.lat*Math.PI/180)}function Ca(A,s){return A/(2*Math.PI)/Math.cos(s*Math.PI/180)}function le(A){const s=Math.asin(A[1])/Math.PI*180,h=Math.sqrt(A[0]*A[0]+A[2]*A[2]);if(h>1e-6){const w=A[0]/h,C=Math.acos(A[2]/h),L=(w>0?C:-C)/Math.PI*180;return new a.S(a.aO(L,-180,180),s)}return new a.S(0,s)}function Ve(A){return Math.cos(A*Math.PI/180)}function pt(A,s){const h=Ve(A),w=Ve(s);return a.ak(w/h)}function Dt(A,s){const h=A.rotate(s.bearingInRadians),w=s.zoom+pt(s.center.lat,0),C=a.bk(1/Ve(s.center.lat),1/Ve(Math.min(Math.abs(s.center.lat),60)),a.bn(w,7,3,0,1)),L=360/Ha({worldSize:s.worldSize,center:{lat:s.center.lat}});return new a.S(s.center.lng-h.x*L*C,a.ah(s.center.lat+h.y*L,-a.ai,a.ai))}function tr(A){const s=.5*A,h=Math.sin(s),w=Math.cos(s);return Math.log(h+w)-Math.log(w-h)}function Pr(A,s,h,w){const C=A.lat+h*w;if(Math.abs(h)>1){const L=(Math.sign(A.lat+h)!==Math.sign(A.lat)?-Math.abs(A.lat):Math.abs(A.lat))*Math.PI/180,B=Math.abs(A.lat+h)*Math.PI/180,X=tr(L+w*(B-L)),te=tr(L),ce=tr(B);return new a.S(A.lng+s*((X-te)/(ce-te)),C)}return new a.S(A.lng+s*w,C)}class $r{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,h,w,C){const L=`${s.z}_${s.x}_${s.y}_${C?.terrain?"t":""}`,B=this._cache.get(L);if(B)return B;const X=this._cachePrevious.get(L);if(X)return this._cache.set(L,X),X;const te=this._boundingVolumeFactory(s,h,w,C);return this._cache.set(L,te),this._hadAnyChanges=!0,te}}class xn{constructor(s,h,w,C){this.min=w,this.max=C,this.points=s,this.planes=h}static fromAabb(s,h){const w=[];for(let C=0;C<8;C++)w.push([1&~C?s[0]:h[0],(C>>1&1)==1?h[1]:s[1],(C>>2&1)==1?h[2]:s[2]]);return new xn(w,[[-1,0,0,h[0]],[1,0,0,-s[0]],[0,-1,0,h[1]],[0,1,0,-s[1]],[0,0,-1,h[2]],[0,0,1,-s[2]]],s,h)}static fromCenterSizeAngles(s,h,w){const C=a.br([],w[0],w[1],w[2]),L=a.bs([],[h[0],0,0],C),B=a.bs([],[0,h[1],0],C),X=a.bs([],[0,0,h[2]],C),te=[...s],ce=[...s];for(let Te=0;Te<8;Te++)for(let Ce=0;Ce<3;Ce++){const Fe=s[Ce]+L[Ce]*(1&~Te?-1:1)+B[Ce]*((Te>>1&1)==1?1:-1)+X[Ce]*((Te>>2&1)==1?1:-1);te[Ce]=Math.min(te[Ce],Fe),ce[Ce]=Math.max(ce[Ce],Fe)}const me=[];for(let Te=0;Te<8;Te++){const Ce=[...s];a.aS(Ce,Ce,a.aR([],L,1&~Te?-1:1)),a.aS(Ce,Ce,a.aR([],B,(Te>>1&1)==1?1:-1)),a.aS(Ce,Ce,a.aR([],X,(Te>>2&1)==1?1:-1)),me.push(Ce)}return new xn(me,[[...L,-a.aX(L,me[0])],[...B,-a.aX(B,me[0])],[...X,-a.aX(X,me[0])],[-L[0],-L[1],-L[2],-a.aX(L,me[7])],[-B[0],-B[1],-B[2],-a.aX(B,me[7])],[-X[0],-X[1],-X[2],-a.aX(X,me[7])]],te,ce)}intersectsFrustum(s){let h=!0;const w=this.points.length,C=this.planes.length,L=s.planes.length,B=s.points.length;for(let X=0;X<L;X++){const te=s.planes[X];let ce=0;for(let me=0;me<w;me++){const Te=this.points[me];te[0]*Te[0]+te[1]*Te[1]+te[2]*Te[2]+te[3]>=0&&ce++}if(ce===0)return 0;ce<w&&(h=!1)}if(h)return 2;for(let X=0;X<C;X++){const te=this.planes[X];let ce=0;for(let me=0;me<B;me++){const Te=s.points[me];te[0]*Te[0]+te[1]*Te[1]+te[2]*Te[2]+te[3]>=0&&ce++}if(ce===0)return 0}return 1}intersectsPlane(s){const h=this.points.length;let w=0;for(let C=0;C<h;C++){const L=this.points[C];s[0]*L[0]+s[1]*L[1]+s[2]*L[2]+s[3]>=0&&w++}return w===h?2:w===0?0:1}}function pn(A,s,h){const w=A-s;return w<0?-w:Math.max(0,w-h)}function Yn(A,s,h,w,C){const L=A-h;let B;return B=L<0?Math.min(-L,1+L-C):L>1?Math.min(Math.max(L-C,0),1-L):0,Math.max(B,pn(s,w,C))}class ei{constructor(){this._boundingVolumeCache=new $r(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,h,w,C){const L=1<<w.z,B=1/L,X=w.x/L,te=w.y/L;let ce=2;return ce=Math.min(ce,Yn(s,h,X,te,B)),ce=Math.min(ce,Yn(s,h,X+.5,-te-B,B)),ce=Math.min(ce,Yn(s,h,X+.5,2-te-B,B)),ce}getWrap(s,h,w){const C=1<<h.z,L=1/C,B=h.x/C,X=pn(s.x,B,L),te=pn(s.x,B-1,L),ce=pn(s.x,B+1,L),me=Math.min(X,te,ce);return me===ce?1:me===te?-1:0}allowVariableZoom(s,h){return Er(s,h)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,h,w,C){return this._boundingVolumeCache.getTileBoundingVolume(s,h,w,C)}_computeTileBoundingVolume(s,h,w,C){var L,B;let X=0,te=0;if(C?.terrain){const ce=new a.Z(s.z,h,s.z,s.x,s.y),me=C.terrain.getMinMaxElevation(ce);X=(L=me.minElevation)!==null&&L!==void 0?L:Math.min(0,w),te=(B=me.maxElevation)!==null&&B!==void 0?B:Math.max(0,w)}if(X/=a.bu,te/=a.bu,X+=1,te+=1,s.z<=0)return xn.fromAabb([-te,-te,-te],[te,te,te]);if(s.z===1)return xn.fromAabb([s.x===0?-te:0,s.y===0?0:-te,-te],[s.x===0?0:te,s.y===0?te:0,te]);{const ce=[Wa(0,0,s.x,s.y,s.z),Wa(a.$,0,s.x,s.y,s.z),Wa(a.$,a.$,s.x,s.y,s.z),Wa(0,a.$,s.x,s.y,s.z)],me=[];for(const cr of ce)me.push(a.aR([],cr,te));if(te!==X)for(const cr of ce)me.push(a.aR([],cr,X));s.y===0&&me.push([0,1,0]),s.y===(1<<s.z)-1&&me.push([0,-1,0]);const Te=[1,1,1],Ce=[-1,-1,-1];for(const cr of me)for(let fr=0;fr<3;fr++)Te[fr]=Math.min(Te[fr],cr[fr]),Ce[fr]=Math.max(Ce[fr],cr[fr]);const Fe=Wa(a.$/2,a.$/2,s.x,s.y,s.z),We=a.aW([],[0,1,0],Fe);a.aV(We,We);const ct=a.aW([],Fe,We);a.aV(ct,ct);const ut=a.aW([],ce[2],ce[1]);a.aV(ut,ut);const dt=a.aW([],ce[0],ce[3]);a.aV(dt,dt),me.push(a.aR([],Fe,te)),s.y>=(1<<s.z)/2&&me.push(a.aR([],Wa(a.$/2,0,s.x,s.y,s.z),te)),s.y<(1<<s.z)/2&&me.push(a.aR([],Wa(a.$/2,a.$,s.x,s.y,s.z),te));const _t=yi(Fe,me),Pt=yi(ct,me),Et=[-Fe[0],-Fe[1],-Fe[2],_t.max],Mt=[Fe[0],Fe[1],Fe[2],-_t.min],Ot=[-ct[0],-ct[1],-ct[2],Pt.max],Tt=[ct[0],ct[1],ct[2],-Pt.min],Vt=[...ut,0],gr=[...dt,0],lr=[];return s.y===0?lr.push(a.bt(gr,Vt,Et),a.bt(gr,Vt,Mt)):lr.push(a.bt(Ot,Vt,Et),a.bt(Ot,Vt,Mt),a.bt(Ot,gr,Et),a.bt(Ot,gr,Mt)),s.y===(1<<s.z)-1?lr.push(a.bt(gr,Vt,Et),a.bt(gr,Vt,Mt)):lr.push(a.bt(Tt,Vt,Et),a.bt(Tt,Vt,Mt),a.bt(Tt,gr,Et),a.bt(Tt,gr,Mt)),new xn(lr,[Et,Mt,Ot,Tt,Vt,gr],Te,Ce)}}}function yi(A,s){let h=1/0,w=-1/0;for(const C of s){const L=a.aX(A,C);h=Math.min(h,L),w=Math.max(w,L)}return{min:h,max:w}}class Li{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,h,w){return this._helper.interpolatePadding(s,h,w)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,h){this._helper.resize(s,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,h){this._helper.overrideNearFarZ(s,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new mn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,h)=>this.getConstrained(s,h)}),this._coveringTilesDetailsProvider=new ei}clone(){const s=new Li;return s.apply(this),s}apply(s,h){this._globeLatitudeErrorCorrectionRadians=h||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=a.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:h,applyGlobeMatrix:w}=s,C=this._helper.getMercatorTileCoordinates(h);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:C,clippingPlane:this._cachedClippingPlane,projectionTransition:w?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const h=this.pitchInRadians,w=this.cameraToCenterDistance/s,C=Math.sin(h)*w,L=Math.cos(h)*w+1,B=1/Math.sqrt(C*C+L*L)*1;let X=-C,te=L;const ce=Math.sqrt(X*X+te*te);X/=ce,te/=ce;const me=[0,X,te];a.bw(me,me,[0,0,0],-this.bearingInRadians),a.bx(me,me,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(me,me,[0,0,0],this.center.lng*Math.PI/180);const Te=1/a.aZ(me);return a.aR(me,me,Te),[...me,-B*Te]}isLocationOccluded(s){return!this.isSurfacePointVisible(Gi(s))}transformLightDirection(s){const h=this._helper._center.lng*Math.PI/180,w=this._helper._center.lat*Math.PI/180,C=Math.cos(w),L=[Math.sin(h)*C,Math.sin(w),Math.cos(h)*C],B=[L[2],0,-L[0]],X=[0,0,0];a.aW(X,B,L),a.aV(B,B),a.aV(X,X);const te=[0,0,0];return a.aV(te,[B[0]*s[0]+X[0]*s[1]+L[0]*s[2],B[1]*s[0]+X[1]*s[1]+L[1]*s[2],B[2]*s[0]+X[2]*s[1]+L[2]*s[2]]),te}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,h,w){const C=(function(X,te,ce){const me=1/(1<<ce.z);return new a.a1(X/a.$*me+ce.x*me,te/a.$*me+ce.y*me)})(s,h,w.canonical),L=(B=C.y,[a.bo(C.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI]);var B;return this.getCircleRadiusCorrection()/Math.cos(L[1])}projectTileCoordinates(s,h,w,C){const L=w.canonical,B=Wa(s,h,L.x,L.y,L.z),X=1+(C?C(s,h):0)/a.bu,te=[B[0]*X,B[1]*X,B[2]*X,1];a.aw(te,te,this._globeViewProjMatrixNoCorrection);const ce=this._cachedClippingPlane,me=ce[0]*B[0]+ce[1]*B[1]+ce[2]*B[2]+ce[3]<0;return{point:new a.P(te[0]/te[3],te[1]/te[3]),signedDistanceFromCamera:te[3],isOccluded:me}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=Ca(this.worldSize,this.center.lat),h=a.ba(),w=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),a.b4(h,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const C=this.centerOffset;h[8]=2*-C.x/this._helper._width,h[9]=2*C.y/this._helper._height,this._projectionMatrix=a.b5(h),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,h),a.M(h,h,[0,0,-this.cameraToCenterDistance]),a.b6(h,h,this.rollInRadians),a.b7(h,h,-this.pitchInRadians),a.b6(h,h,this.bearingInRadians),a.M(h,h,[0,0,-s]);const L=a.bp();L[0]=s,L[1]=s,L[2]=s,a.b7(w,h,this.center.lat*Math.PI/180),a.bz(w,w,-this.center.lng*Math.PI/180),a.N(w,w,L),this._globeViewProjMatrixNoCorrection=w,a.b7(h,h,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(h,h,-this.center.lng*Math.PI/180),a.N(h,h,L),this._globeViewProjMatrix32f=new Float32Array(h),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,w);const B=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,a.bw(this._cameraPosition,this._cameraPosition,B,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,B,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,B,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,B,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,B,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const X=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(X,X,[1,1,-1]),this._cachedFrustum=tn.fromInvProjectionMatrix(X,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){a.w("calculateFogMatrix is not supported on globe projection.");const h=a.ba();return a.ag(h),h}getVisibleUnwrappedCoordinates(s){return[new a.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,h){if(!this._globeViewProjMatrixNoCorrection)return 1;const w=Gi(s);a.aR(w,w,1+h/a.bu);const C=a.bv();return a.aw(C,[w[0],w[1],w[2],1],this._globeViewProjMatrixNoCorrection),C[2]/C[3]}populateCache(s){}getBounds(){const s=.5*this.width,h=.5*this.height,w=[new a.P(0,0),new a.P(s,0),new a.P(this.width,0),new a.P(this.width,h),new a.P(this.width,this.height),new a.P(s,this.height),new a.P(0,this.height),new a.P(0,h)],C=[];for(const Te of w)C.push(this.unprojectScreenPoint(Te));let L=0,B=0,X=0,te=0;const ce=this.center;for(const Te of C){const Ce=a.bA(ce.lng,Te.lng),Fe=a.bA(ce.lat,Te.lat);Ce<B&&(B=Ce),Ce>L&&(L=Ce),Fe<te&&(te=Fe),Fe>X&&(X=Fe)}const me=[ce.lng+B,ce.lat+te,ce.lng+L,ce.lat+X];return this.isSurfacePointOnScreen([0,1,0])&&(me[3]=90,me[0]=-180,me[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(me[1]=-90,me[0]=-180,me[2]=180),new It(me)}getConstrained(s,h){const w=a.ah(s.lat,-a.ai,a.ai),C=a.ah(+h,this.minZoom+pt(0,w),this.maxZoom);return{center:new a.S(s.lng,w),zoom:C}}calculateCenterFromCameraLngLatAlt(s,h,w,C){return this._helper.calculateCenterFromCameraLngLatAlt(s,h,w,C)}setLocationAtPoint(s,h){const w=Gi(this.unprojectScreenPoint(h)),C=Gi(s),L=a.bp();a.bB(L);const B=a.bp();a.by(B,w,L,-this.center.lng*Math.PI/180),a.bx(B,B,L,this.center.lat*Math.PI/180);const X=C[0]*C[0]+C[2]*C[2],te=B[0]*B[0];if(X<te)return;const ce=Math.sqrt(X-te),me=-ce,Te=a.bC(C[0],C[2],B[0],ce),Ce=a.bC(C[0],C[2],B[0],me),Fe=a.bp();a.by(Fe,C,L,-Te);const We=a.bC(Fe[1],Fe[2],B[1],B[2]),ct=a.bp();a.by(ct,C,L,-Ce);const ut=a.bC(ct[1],ct[2],B[1],B[2]),dt=.5*Math.PI,_t=We>=-dt&&We<=dt,Pt=ut>=-dt&&ut<=dt;let Et,Mt;if(_t&&Pt){const gr=this.center.lng*Math.PI/180,lr=this.center.lat*Math.PI/180;a.bD(Te,gr)+a.bD(We,lr)<a.bD(Ce,gr)+a.bD(ut,lr)?(Et=Te,Mt=We):(Et=Ce,Mt=ut)}else if(_t)Et=Te,Mt=We;else{if(!Pt)return;Et=Ce,Mt=ut}const Ot=Et/Math.PI*180,Tt=Mt/Math.PI*180,Vt=this.center.lat;this.setCenter(new a.S(Ot,a.ah(Tt,-90,90))),this.setZoom(this.zoom+pt(Vt,this.center.lat))}locationToScreenPoint(s,h){const w=Gi(s);if(h){const C=h.getElevationForLngLatZoom(s,this._helper._tileZoom);a.aR(w,w,1+C/a.bu)}return this._projectSurfacePointToScreen(w)}_projectSurfacePointToScreen(s){const h=a.bv();return a.aw(h,[...s,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],new a.P((.5*h[0]+.5)*this.width,(.5*-h[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,h){if(h){const w=h.pointCoordinate(s);if(w)return w}return a.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,h){var w;return(w=this.screenPointToMercatorCoordinate(s,h))===null||w===void 0?void 0:w.toLngLat()}isPointOnMapSurface(s,h){const w=this._cameraPosition,C=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(w,C)}getRayDirectionFromPixel(s){const h=a.bv();h[0]=s.x/this.width*2-1,h[1]=-1*(s.y/this.height*2-1),h[2]=1,h[3]=1,a.aw(h,h,this._globeViewProjMatrixNoCorrectionInverted),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3];const w=a.bp();w[0]=h[0]-this._cameraPosition[0],w[1]=h[1]-this._cameraPosition[1],w[2]=h[2]-this._cameraPosition[2];const C=a.bp();return a.aV(C,w),C}isSurfacePointVisible(s){const h=this._cachedClippingPlane;return h[0]*s[0]+h[1]*s[1]+h[2]*s[2]+h[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const h=a.bv();return a.aw(h,[...s,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3],h[0]>-1&&h[0]<1&&h[1]>-1&&h[1]<1&&h[2]>-1&&h[2]<1}rayPlanetIntersection(s,h){const w=a.aX(s,h),C=a.bp(),L=a.bp();a.aR(L,h,w),a.aU(C,s,L);const B=1-a.aX(C,C);if(B<0)return null;const X=a.aX(s,s)-1,te=-w+(w<0?1:-1)*Math.sqrt(B),ce=X/te,me=te;return{tMin:Math.min(ce,me),tMax:Math.max(ce,me)}}unprojectScreenPoint(s){const h=this._cameraPosition,w=this.getRayDirectionFromPixel(s),C=this.rayPlanetIntersection(h,w);if(C){const me=a.bp();a.aS(me,h,[w[0]*C.tMin,w[1]*C.tMin,w[2]*C.tMin]);const Te=a.bp();return a.aV(Te,me),le(Te)}const L=this._cachedClippingPlane,B=L[0]*w[0]+L[1]*w[1]+L[2]*w[2],X=-a.b1(L,h)/B,te=a.bp();if(X>0)a.aS(te,h,[w[0]*X,w[1]*X,w[2]*X]);else{const me=a.bp();a.aS(me,h,[2*w[0],2*w[1],2*w[2]]);const Te=a.b1(this._cachedClippingPlane,me);a.aU(te,me,[this._cachedClippingPlane[0]*Te,this._cachedClippingPlane[1]*Te,this._cachedClippingPlane[2]*Te])}const ce=(function(me){const Te=a.bp();return Te[0]=me[0]*-me[3],Te[1]=me[1]*-me[3],Te[2]=me[2]*-me[3],{center:Te,radius:Math.sqrt(1-me[3]*me[3])}})(L);return le((function(me,Te,Ce){const Fe=a.bp();a.aU(Fe,Ce,me);const We=a.bp();return a.bq(We,me,Fe,Te/a.a$(Fe)),We})(ce.center,ce.radius,te))}getMatrixForModel(s,h){const w=a.S.convert(s),C=1/a.bu,L=a.b9();return a.bz(L,L,w.lng/180*Math.PI),a.b7(L,L,-w.lat/180*Math.PI),a.M(L,L,[0,0,1+h/a.bu]),a.b7(L,L,.5*Math.PI),a.N(L,L,[C,C,C]),L}getProjectionDataForCustomLayer(s=!0){const h=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:s});return h.tileMercatorCoords=[0,0,1,1],h}getFastPathSimpleProjectionMatrix(s){}}class Ii{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,h,w){return this._helper.interpolatePadding(s,h,w)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,h,w=!0){this._helper.resize(s,h,w)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,h){this._helper.overrideNearFarZ(s,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,h){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=h,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new mn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,h)=>this.getConstrained(s,h)}),this._globeness=1,this._mercatorTransform=new On,this._verticalPerspectiveTransform=new Li}clone(){const s=new Ii;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const h=this._mercatorTransform.getProjectionData(s),w=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?w.mainMatrix:h.mainMatrix,clippingPlane:w.clippingPlane,tileMercatorCoords:w.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:h.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,h,w){const C=this._mercatorTransform.getPitchedTextCorrection(s,h,w),L=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,h,w);return a.bk(C,L,this._globeness)}projectTileCoordinates(s,h,w,C){return this.currentTransform.projectTileCoordinates(s,h,w,C)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,h){return this.currentTransform.lngLatToCameraDepth(s,h)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,h){return this.currentTransform.getConstrained(s,h)}calculateCenterFromCameraLngLatAlt(s,h,w,C){return this._helper.calculateCenterFromCameraLngLatAlt(s,h,w,C)}setLocationAtPoint(s,h){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,h),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,h),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,h){return this.currentTransform.locationToScreenPoint(s,h)}screenPointToMercatorCoordinate(s,h){return this.currentTransform.screenPointToMercatorCoordinate(s,h)}screenPointToLocation(s,h){return this.currentTransform.screenPointToLocation(s,h)}isPointOnMapSurface(s,h){return this.currentTransform.isPointOnMapSurface(s,h)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,h){return this.currentTransform.getMatrixForModel(s,h)}getProjectionDataForCustomLayer(s=!0){const h=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return h;const w=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return w.fallbackMatrix=h.mainMatrix,w}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class mi{get useGlobeControls(){return!0}handlePanInertia(s,h){const w=Dt(s,h);return Math.abs(w.lng-h.center.lng)>180&&(w.lng=h.center.lng+179.5*Math.sign(w.lng-h.center.lng)),{easingCenter:w,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,h){const w=s.around,C=h.screenPointToLocation(w);s.bearingDelta&&h.setBearing(h.bearing+s.bearingDelta),s.pitchDelta&&h.setPitch(h.pitch+s.pitchDelta),s.rollDelta&&h.setRoll(h.roll+s.rollDelta);const L=h.zoom;s.zoomDelta&&h.setZoom(h.zoom+s.zoomDelta);const B=h.zoom-L;if(B===0)return;const X=a.bA(h.center.lng,C.lng),te=X/(Math.abs(X/180)+1),ce=a.bA(h.center.lat,C.lat),me=h.getRayDirectionFromPixel(w),Te=h.cameraPosition,Ce=-1*a.aX(Te,me),Fe=a.bp();a.aS(Fe,Te,[me[0]*Ce,me[1]*Ce,me[2]*Ce]);const We=a.aZ(Fe)-1,ct=Math.exp(.5*-Math.max(We-.3,0)),ut=Ca(h.worldSize,h.center.lat)/Math.min(h.width,h.height),dt=a.bn(ut,.9,.5,1,.25),_t=(1-a.af(-B))*Math.min(ct,dt),Pt=h.center.lat,Et=h.zoom,Mt=new a.S(h.center.lng+te*_t,a.ah(h.center.lat+ce*_t,-a.ai,a.ai));h.setLocationAtPoint(C,w);const Ot=h.center,Tt=a.bn(Math.abs(X),45,85,0,1),Vt=a.bn(ut,.75,.35,0,1),gr=Math.pow(Math.max(Tt,Vt),.25),lr=a.bA(Ot.lng,Mt.lng),cr=a.bA(Ot.lat,Mt.lat);h.setCenter(new a.S(Ot.lng+lr*gr,Ot.lat+cr*gr).wrap()),h.setZoom(Et+pt(Pt,h.center.lat))}handleMapControlsPan(s,h,w){if(!s.panDelta)return;const C=h.center.lat,L=h.zoom;h.setCenter(Dt(s.panDelta,h).wrap()),h.setZoom(L+pt(C,h.center.lat))}cameraForBoxAndBearing(s,h,w,C,L){const B=_a(s,h,w,C,L),X=h.left/L.width*2-1,te=(L.width-h.right)/L.width*2-1,ce=h.top/L.height*-2+1,me=(L.height-h.bottom)/L.height*-2+1,Te=a.bA(w.getWest(),w.getEast())<0,Ce=Te?w.getEast():w.getWest(),Fe=Te?w.getWest():w.getEast(),We=Math.max(w.getNorth(),w.getSouth()),ct=Math.min(w.getNorth(),w.getSouth()),ut=Ce+.5*a.bA(Ce,Fe),dt=We+.5*a.bA(We,ct),_t=L.clone();_t.setCenter(B.center),_t.setBearing(B.bearing),_t.setPitch(0),_t.setRoll(0),_t.setZoom(B.zoom);const Pt=_t.modelViewProjectionMatrix,Et=[Gi(w.getNorthWest()),Gi(w.getNorthEast()),Gi(w.getSouthWest()),Gi(w.getSouthEast()),Gi(new a.S(Fe,dt)),Gi(new a.S(Ce,dt)),Gi(new a.S(ut,We)),Gi(new a.S(ut,ct))],Mt=Gi(B.center);let Ot=Number.POSITIVE_INFINITY;for(const Tt of Et)X<0&&(Ot=mi.getLesserNonNegativeNonNull(Ot,mi.solveVectorScale(Tt,Mt,Pt,"x",X))),te>0&&(Ot=mi.getLesserNonNegativeNonNull(Ot,mi.solveVectorScale(Tt,Mt,Pt,"x",te))),ce>0&&(Ot=mi.getLesserNonNegativeNonNull(Ot,mi.solveVectorScale(Tt,Mt,Pt,"y",ce))),me<0&&(Ot=mi.getLesserNonNegativeNonNull(Ot,mi.solveVectorScale(Tt,Mt,Pt,"y",me)));if(Number.isFinite(Ot)&&Ot!==0)return B.zoom=_t.zoom+a.ak(Ot),B;ba()}handleJumpToCenterZoom(s,h){const w=s.center.lat,C=s.getConstrained(h.center?a.S.convert(h.center):s.center,s.zoom).center;s.setCenter(C.wrap());const L=h.zoom!==void 0?+h.zoom:s.zoom+pt(w,C.lat);s.zoom!==L&&s.setZoom(L)}handleEaseTo(s,h){const w=s.zoom,C=s.center,L=s.padding,B={roll:s.roll,pitch:s.pitch,bearing:s.bearing},X={roll:h.roll===void 0?s.roll:h.roll,pitch:h.pitch===void 0?s.pitch:h.pitch,bearing:h.bearing===void 0?s.bearing:h.bearing},te=h.zoom!==void 0,ce=!s.isPaddingEqual(h.padding);let me=!1;const Te=h.center?a.S.convert(h.center):C,Ce=s.getConstrained(Te,w).center;Un(s,Ce);const Fe=s.clone();Fe.setCenter(Ce),Fe.setZoom(te?+h.zoom:w+pt(C.lat,Te.lat)),Fe.setBearing(h.bearing);const We=new a.P(a.ah(s.centerPoint.x+h.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+h.offsetAsPoint.y,0,s.height));Fe.setLocationAtPoint(Ce,We);const ct=(h.offset&&h.offsetAsPoint.mag())>0?Fe.center:Ce,ut=te?+h.zoom:w+pt(C.lat,ct.lat),dt=w+pt(C.lat,0),_t=ut+pt(ct.lat,0),Pt=a.bA(C.lng,ct.lng),Et=a.bA(C.lat,ct.lat),Mt=a.af(_t-dt);return me=ut!==w,{easeFunc:Ot=>{if(a.be(B,X)||gi({startEulerAngles:B,endEulerAngles:X,tr:s,k:Ot,useSlerp:B.roll!=X.roll}),ce&&s.interpolatePadding(L,h.padding,Ot),h.around)a.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(h.around,h.aroundPoint);else{const Tt=_t>dt?Math.min(2,Mt):Math.max(.5,Mt),Vt=Math.pow(Tt,1-Ot),gr=Pr(C,Pt,Et,Ot*Vt);s.setCenter(gr.wrap())}if(me){const Tt=a.C.number(dt,_t,Ot)+pt(0,s.center.lat);s.setZoom(Tt)}},isZooming:me,elevationCenter:ct}}handleFlyTo(s,h){const w=h.zoom!==void 0,C=s.center,L=s.zoom,B=s.padding,X=!s.isPaddingEqual(h.padding),te=s.getConstrained(a.S.convert(h.center||h.locationAtOffset),L).center,ce=w?+h.zoom:s.zoom+pt(s.center.lat,te.lat),me=s.clone();me.setCenter(te),me.setZoom(ce),me.setBearing(h.bearing);const Te=new a.P(a.ah(s.centerPoint.x+h.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+h.offsetAsPoint.y,0,s.height));me.setLocationAtPoint(te,Te);const Ce=me.center;Un(s,Ce);const Fe=(function(Et,Mt,Ot){const Tt=Gi(Mt),Vt=Gi(Ot),gr=a.aX(Tt,Vt),lr=Math.acos(gr),cr=Ha(Et);return lr/(2*Math.PI)*cr})(s,C,Ce),We=L+pt(C.lat,0),ct=ce+pt(Ce.lat,0),ut=a.af(ct-We);let dt;if(typeof h.minZoom=="number"){const Et=+h.minZoom+pt(Ce.lat,0),Mt=Math.min(Et,We,ct)+pt(0,Ce.lat),Ot=s.getConstrained(Ce,Mt).zoom+pt(Ce.lat,0);dt=a.af(Ot-We)}const _t=a.bA(C.lng,Ce.lng),Pt=a.bA(C.lat,Ce.lat);return{easeFunc:(Et,Mt,Ot,Tt)=>{const Vt=Pr(C,_t,Pt,Ot);X&&s.interpolatePadding(B,h.padding,Et);const gr=Et===1?Ce:Vt;s.setCenter(gr.wrap());const lr=We+a.ak(Mt);s.setZoom(Et===1?ce:lr+pt(0,gr.lat))},scaleOfZoom:ut,targetCenter:Ce,scaleOfMinZoom:dt,pixelPathLength:Fe}}static solveVectorScale(s,h,w,C,L){const B=C==="x"?[w[0],w[4],w[8],w[12]]:[w[1],w[5],w[9],w[13]],X=[w[3],w[7],w[11],w[15]],te=s[0]*B[0]+s[1]*B[1]+s[2]*B[2],ce=s[0]*X[0]+s[1]*X[1]+s[2]*X[2],me=h[0]*B[0]+h[1]*B[1]+h[2]*B[2],Te=h[0]*X[0]+h[1]*X[1]+h[2]*X[2];return me+L*ce===te+L*Te||X[3]*(te-me)+B[3]*(Te-ce)+te*Te==me*ce?null:(me+B[3]-L*Te-L*X[3])/(me-te-L*Te+L*ce)}static getLesserNonNegativeNonNull(s,h){return h!==null&&h>=0&&h<s?h:s}}class Ea{constructor(s){this._globe=s,this._mercatorCameraHelper=new si,this._verticalPerspectiveCameraHelper=new mi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,h){return this.currentHelper.handlePanInertia(s,h)}handleMapControlsRollPitchBearingZoom(s,h){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,h)}handleMapControlsPan(s,h,w){this.currentHelper.handleMapControlsPan(s,h,w)}cameraForBoxAndBearing(s,h,w,C,L){return this.currentHelper.cameraForBoxAndBearing(s,h,w,C,L)}handleJumpToCenterZoom(s,h){this.currentHelper.handleJumpToCenterZoom(s,h)}handleEaseTo(s,h){return this.currentHelper.handleEaseTo(s,h)}handleFlyTo(s,h){return this.currentHelper.handleFlyTo(s,h)}}const Qi=(A,s)=>a.y(A,s&&s.filter((h=>h.identifier!=="source.canvas"))),Fa=a.bE();class Qo extends a.E{constructor(s,h={}){var w,C;super(),this._rtlPluginLoaded=()=>{for(const B in this.sourceCaches){const X=this.sourceCaches[B].getSource().type;X!=="vector"&&X!=="geojson"||this.sourceCaches[B].reload()}},this.map=s,this.dispatcher=new Re(De(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",((B,X)=>this.getGlyphs(B,X))),this.dispatcher.registerMessageHandler("GI",((B,X)=>this.getImages(B,X))),this.imageManager=new Y,this.imageManager.setEventedParent(this);const L=((w=s._container)===null||w===void 0?void 0:w.lang)||typeof document<"u"&&((C=document.documentElement)===null||C===void 0?void 0:C.lang)||void 0;this.glyphManager=new ie(s._requestManager,h.localIdeographFontFamily,L),this.lineAtlas=new xe(256,512),this.crossTileSymbolIndex=new Xe,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),xr().on(pr,this._rtlPluginLoaded),this.on("data",(B=>{if(B.dataType!=="source"||B.sourceDataType!=="metadata")return;const X=this.sourceCaches[B.sourceId];if(!X)return;const te=X.getSource();if(te&&te.vectorLayerIds)for(const ce in this._layers){const me=this._layers[ce];me.source===te.id&&this._validateLayer(me)}}))}setGlobalStateProperty(s,h){var w,C,L;this._checkLoaded();const B=h===null?(L=(C=(w=this.stylesheet.state)===null||w===void 0?void 0:w[s])===null||C===void 0?void 0:C.default)!==null&&L!==void 0?L:null:h;if(a.bH(B,this._globalState[s]))return this;this._globalState[s]=B,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const h=[];for(const w in s)!a.bH(this._globalState[w],s[w].default)&&(h.push(w),this._globalState[w]=s[w].default);this._applyGlobalStateChanges(h)}_applyGlobalStateChanges(s){if(s.length===0)return;const h=new Set;for(const w in this._layers){const C=this._layers[w],L=C.getLayoutAffectingGlobalStateRefs(),B=C.getPaintAffectingGlobalStateRefs();for(const X of s)if(L.has(X)&&h.add(C.source),B.has(X))for(const{name:te,value:ce}of B.get(X))this._updatePaintProperty(C,te,ce)}for(const w in this.sourceCaches)h.has(w)&&(this._reloadSource(w),this._changed=!0)}loadURL(s,h={},w){this.fire(new a.l("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const C=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const L=this._loadStyleRequest;a.j(C,this._loadStyleRequest).then((B=>{this._loadStyleRequest=null,this._load(B.data,h,w)})).catch((B=>{this._loadStyleRequest=null,B&&!L.signal.aborted&&this.fire(new a.k(B))}))}loadJSON(s,h={},w){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(s,h,w)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Fa,{validate:!1})}_load(s,h,w){var C,L;let B=h.transformStyle?h.transformStyle(w,s):s;if(!h.validate||!Qi(this,a.z(B))){B=Object.assign({},B),this._loaded=!0,this.stylesheet=B;for(const X in B.sources)this.addSource(X,B.sources[X],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new de(this.stylesheet.light),this._setProjectionInternal(((C=this.stylesheet.projection)===null||C===void 0?void 0:C.type)||"mercator"),this.sky=new ge(this.stylesheet.sky),this.map.setTerrain((L=this.stylesheet.terrain)!==null&&L!==void 0?L:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var s;const h=a.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",h),this._order=h.map((w=>w.id)),this._layers={},this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this._serializedLayers=null;for(const w of h){const C=a.bJ(w);C.setEventedParent(this,{layer:{id:w.id}}),C.setGlobalState(this._globalState),this._layers[w.id]=C}}_loadSprite(s,h=!1,w=void 0){let C;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(L,B,X,te){return a._(this,void 0,void 0,(function*(){const ce=j(L),me=X>1?"@2x":"",Te={},Ce={};for(const{id:Fe,url:We}of ce){const ct=B.transformRequest(U(We,me,".json"),"SpriteJSON");Te[Fe]=a.j(ct,te);const ut=B.transformRequest(U(We,me,".png"),"SpriteImage");Ce[Fe]=N.getImage(ut,te)}return yield Promise.all([...Object.values(Te),...Object.values(Ce)]),(function(Fe,We){return a._(this,void 0,void 0,(function*(){const ct={};for(const ut in Fe){ct[ut]={};const dt=x.getImageCanvasContext((yield We[ut]).data),_t=(yield Fe[ut]).data;for(const Pt in _t){const{width:Et,height:Mt,x:Ot,y:Tt,sdf:Vt,pixelRatio:gr,stretchX:lr,stretchY:cr,content:fr,textFitWidth:Xr,textFitHeight:Zr}=_t[Pt];ct[ut][Pt]={data:null,pixelRatio:gr,sdf:Vt,stretchX:lr,stretchY:cr,content:fr,textFitWidth:Xr,textFitHeight:Zr,spriteData:{width:Et,height:Mt,x:Ot,y:Tt,context:dt}}}}return ct}))})(Te,Ce)}))})(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((L=>{if(this._spriteRequest=null,L)for(const B in L){this._spritesImagesIds[B]=[];const X=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter((te=>!(te in L))):[];for(const te of X)this.imageManager.removeImage(te),this._changedImages[te]=!0;for(const te in L[B]){const ce=B==="default"?te:`${B}:${te}`;this._spritesImagesIds[B].push(ce),ce in this.imageManager.images?this.imageManager.updateImage(ce,L[B][te],!1):this.imageManager.addImage(ce,L[B][te]),h&&(this._changedImages[ce]=!0)}}})).catch((L=>{this._spriteRequest=null,C=L,this.fire(new a.k(C))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),w&&w(C)}))}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(s){const h=this.sourceCaches[s.source];if(!h)return;const w=s.sourceLayer;if(!w)return;const C=h.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(w)===-1)&&this.fire(new a.k(new Error(`Source layer "${w}" does not exist on source "${C.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,h=!1){const w=this._serializedAllLayers();if(!s||s.length===0)return Object.values(h?a.bK(w):w);const C=[];for(const L of s)if(w[L]){const B=h?a.bK(w[L]):w[L];C.push(B)}return C}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const h=Object.keys(this._layers);for(const w of h){const C=this._layers[w];C.type!=="custom"&&(s[w]=C.serialize())}return s}hasTransitions(){var s,h,w;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((h=this.sky)===null||h===void 0)&&h.hasTransition()||!((w=this.projection)===null||w===void 0)&&w.hasTransition())return!0;for(const C in this.sourceCaches)if(this.sourceCaches[C].hasTransition())return!0;for(const C in this._layers)if(this._layers[C].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const h=this._changed;if(h){const C=Object.keys(this._updatedLayers),L=Object.keys(this._removedLayers);(C.length||L.length)&&this._updateWorkerLayers(C,L);for(const B in this._updatedSources){const X=this._updatedSources[B];if(X==="reload")this._reloadSource(B);else{if(X!=="clear")throw new Error(`Invalid action ${X}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const w={};for(const C in this.sourceCaches){const L=this.sourceCaches[C];w[C]=L.used,L.used=!1}for(const C of this._order){const L=this._layers[C];L.recalculate(s,this._availableImages),!L.isHidden(s.zoom)&&L.source&&(this.sourceCaches[L.source].used=!0)}for(const C in w){const L=this.sourceCaches[C];!!w[C]!=!!L.used&&L.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,h&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,h={}){var w;this._checkLoaded();const C=this.serialize();if(s=h.transformStyle?h.transformStyle(C,s):s,((w=h.validate)===null||w===void 0||w)&&Qi(this,a.z(s)))return!1;(s=a.bK(s)).layers=a.bI(s.layers);const L=a.bL(C,s),B=this._getOperationsToPerform(L);if(B.unimplemented.length>0)throw new Error(`Unimplemented: ${B.unimplemented.join(", ")}.`);if(B.operations.length===0)return!1;for(const X of B.operations)X();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const h=[],w=[];for(const C of s)switch(C.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":h.push((()=>this.addLayer.apply(this,C.args)));break;case"removeLayer":h.push((()=>this.removeLayer.apply(this,C.args)));break;case"setPaintProperty":h.push((()=>this.setPaintProperty.apply(this,C.args)));break;case"setLayoutProperty":h.push((()=>this.setLayoutProperty.apply(this,C.args)));break;case"setFilter":h.push((()=>this.setFilter.apply(this,C.args)));break;case"addSource":h.push((()=>this.addSource.apply(this,C.args)));break;case"removeSource":h.push((()=>this.removeSource.apply(this,C.args)));break;case"setLayerZoomRange":h.push((()=>this.setLayerZoomRange.apply(this,C.args)));break;case"setLight":h.push((()=>this.setLight.apply(this,C.args)));break;case"setGeoJSONSourceData":h.push((()=>this.setGeoJSONSourceData.apply(this,C.args)));break;case"setGlyphs":h.push((()=>this.setGlyphs.apply(this,C.args)));break;case"setSprite":h.push((()=>this.setSprite.apply(this,C.args)));break;case"setTerrain":h.push((()=>this.map.setTerrain.apply(this,C.args)));break;case"setSky":h.push((()=>this.setSky.apply(this,C.args)));break;case"setProjection":this.setProjection.apply(this,C.args);break;case"setGlobalState":h.push((()=>this.setGlobalState.apply(this,C.args)));break;case"setTransition":h.push((()=>{}));break;default:w.push(C.command)}return{operations:h,unimplemented:w}}addImage(s,h){if(this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,h),this._afterImageUpdated(s)}updateImage(s,h){this.imageManager.updateImage(s,h)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,h,w={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.z.source,`sources.${s}`,h,null,w))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const C=this.sourceCaches[s]=new Dr(s,h,this.dispatcher);C.style=this,C.setEventedParent(this,(()=>({isSourceLoaded:C.loaded(),source:C.serialize(),sourceId:s}))),C.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===s)return this.fire(new a.k(new Error(`Source "${s}" cannot be removed while layer "${w}" is using it.`)));const h=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],h.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,h){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const w=this.sourceCaches[s].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(h),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,h,w={}){this._checkLoaded();const C=s.id;if(this.getLayer(C))return void this.fire(new a.k(new Error(`Layer "${C}" already exists on this map.`)));let L;if(s.type==="custom"){if(Qi(this,a.bM(s)))return;L=a.bJ(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(C,s.source),s=a.bK(s),s=a.e(s,{source:C})),this._validate(a.z.layer,`layers.${C}`,s,{arrayIndex:-1},w))return;L=a.bJ(s),this._validateLayer(L),L.setEventedParent(this,{layer:{id:C}})}const B=h?this._order.indexOf(h):this._order.length;if(h&&B===-1)this.fire(new a.k(new Error(`Cannot add layer "${C}" before non-existing layer "${h}".`)));else{if(this._order.splice(B,0,C),this._layerOrderChanged=!0,this._layers[C]=L,this._removedLayers[C]&&L.source&&L.type!=="custom"){const X=this._removedLayers[C];delete this._removedLayers[C],X.type!==L.type?this._updatedSources[L.source]="clear":(this._updatedSources[L.source]="reload",this.sourceCaches[L.source].pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map)}}moveLayer(s,h){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===h)return;const w=this._order.indexOf(s);this._order.splice(w,1);const C=h?this._order.indexOf(h):this._order.length;h&&C===-1?this.fire(new a.k(new Error(`Cannot move layer "${s}" before non-existing layer "${h}".`))):(this._order.splice(C,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const h=this._layers[s];if(!h)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${s}".`)));h.setEventedParent(null);const w=this._order.indexOf(s);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=h,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],h.onRemove&&h.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,h,w){this._checkLoaded();const C=this.getLayer(s);C?C.minzoom===h&&C.maxzoom===w||(h!=null&&(C.minzoom=h),w!=null&&(C.maxzoom=w),this._updateLayer(C)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,h,w={}){this._checkLoaded();const C=this.getLayer(s);if(C){if(!a.bH(C.filter,h))return h==null?(C.setFilter(void 0),void this._updateLayer(C)):void(this._validate(a.z.filter,`layers.${C.id}.filter`,h,null,w)||(C.setFilter(a.bK(h)),this._updateLayer(C)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.bK(this.getLayer(s).filter)}setLayoutProperty(s,h,w,C={}){this._checkLoaded();const L=this.getLayer(s);L?a.bH(L.getLayoutProperty(h),w)||(L.setLayoutProperty(h,w,C),this._updateLayer(L)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,h){const w=this.getLayer(s);if(w)return w.getLayoutProperty(h);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,h,w,C={}){this._checkLoaded();const L=this.getLayer(s);L?a.bH(L.getPaintProperty(h),w)||this._updatePaintProperty(L,h,w,C):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,h,w,C={}){s.setPaintProperty(h,w,C)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,h){return this.getLayer(s).getPaintProperty(h)}setFeatureState(s,h){this._checkLoaded();const w=s.source,C=s.sourceLayer,L=this.sourceCaches[w];if(L===void 0)return void this.fire(new a.k(new Error(`The source '${w}' does not exist in the map's style.`)));const B=L.getSource().type;B==="geojson"&&C?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||C?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),L.setFeatureState(C,s.id,h)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,h){this._checkLoaded();const w=s.source,C=this.sourceCaches[w];if(C===void 0)return void this.fire(new a.k(new Error(`The source '${w}' does not exist in the map's style.`)));const L=C.getSource().type,B=L==="vector"?s.sourceLayer:void 0;L!=="vector"||B?h&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(B,s.id,h):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const h=s.source,w=s.sourceLayer,C=this.sourceCaches[h];if(C!==void 0)return C.getSource().type!=="vector"||w?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),C.getFeatureState(w,s.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.bN(this.sourceCaches,(L=>L.serialize())),h=this._serializeByIds(this._order,!0),w=this.map.getTerrain()||void 0,C=this.stylesheet;return a.bO({version:C.version,name:C.name,metadata:C.metadata,light:C.light,sky:C.sky,center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,sprite:C.sprite,glyphs:C.glyphs,transition:C.transition,projection:C.projection,sources:s,layers:h,terrain:w},(L=>L!==void 0))}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const h=B=>this._layers[B].type==="fill-extrusion",w={},C=[];for(let B=this._order.length-1;B>=0;B--){const X=this._order[B];if(h(X)){w[X]=B;for(const te of s){const ce=te[X];if(ce)for(const me of ce)C.push(me)}}}C.sort(((B,X)=>X.intersectionZ-B.intersectionZ));const L=[];for(let B=this._order.length-1;B>=0;B--){const X=this._order[B];if(h(X))for(let te=C.length-1;te>=0;te--){const ce=C[te].feature;if(w[ce.layer.id]<B)break;L.push(ce),C.pop()}else for(const te of s){const ce=te[X];if(ce)for(const me of ce)L.push(me.feature)}}return L}queryRenderedFeatures(s,h,w){h&&h.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",h.filter,null,h);const C={};if(h&&h.layers){if(!(Array.isArray(h.layers)||h.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ce of h.layers){const me=this._layers[ce];if(!me)return this.fire(new a.k(new Error(`The layer '${ce}' does not exist in the map's style and cannot be queried for features.`))),[];C[me.source]=!0}}const L=[];h.availableImages=this._availableImages;const B=this._serializedAllLayers(),X=h.layers instanceof Set?h.layers:Array.isArray(h.layers)?new Set(h.layers):null,te=Object.assign(Object.assign({},h),{layers:X});for(const ce in this.sourceCaches)h.layers&&!C[ce]||L.push(it(this.sourceCaches[ce],this._layers,B,s,te,w,this.map.terrain?(me,Te,Ce)=>this.map.terrain.getElevation(me,Te,Ce):void 0));return this.placement&&L.push((function(ce,me,Te,Ce,Fe,We,ct){const ut={},dt=We.queryRenderedSymbols(Ce),_t=[];for(const Pt of Object.keys(dt).map(Number))_t.push(ct[Pt]);_t.sort(Ye);for(const Pt of _t){const Et=Pt.featureIndex.lookupSymbolFeatures(dt[Pt.bucketInstanceId],me,Pt.bucketIndex,Pt.sourceLayerIndex,Fe.filter,Fe.layers,Fe.availableImages,ce);for(const Mt in Et){const Ot=ut[Mt]=ut[Mt]||[],Tt=Et[Mt];Tt.sort(((Vt,gr)=>{const lr=Pt.featureSortOrder;if(lr){const cr=lr.indexOf(Vt.featureIndex);return lr.indexOf(gr.featureIndex)-cr}return gr.featureIndex-Vt.featureIndex}));for(const Vt of Tt)Ot.push(Vt)}}return(function(Pt,Et,Mt){for(const Ot in Pt)for(const Tt of Pt[Ot])rt(Tt,Mt[Et[Ot].source]);return Pt})(ut,ce,Te)})(this._layers,B,this.sourceCaches,s,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)}querySourceFeatures(s,h){h&&h.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",h.filter,null,h);const w=this.sourceCaches[s];return w?(function(C,L){const B=C.getRenderableIds().map((ce=>C.getTileByID(ce))),X=[],te={};for(let ce=0;ce<B.length;ce++){const me=B[ce],Te=me.tileID.canonical.key;te[Te]||(te[Te]=!0,me.querySourceFeatures(X,L))}return X})(w,h):[]}getLight(){return this.light.getLight()}setLight(s,h={}){this._checkLoaded();const w=this.light.getLight();let C=!1;for(const B in s)if(!a.bH(s[B],w[B])){C=!0;break}if(!C)return;const L={now:x.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,h),this.light.updateTransitions(L)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,h={}){this._checkLoaded();const w=this.getSky();let C=!1;if(!s&&!w)return;if(s&&!w)C=!0;else if(!s&&w)C=!0;else for(const B in s)if(!a.bH(s[B],w[B])){C=!0;break}if(!C)return;const L={now:x.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,h),this.sky.updateTransitions(L)}_setProjectionInternal(s){const h=(function(w){if(Array.isArray(w)){const C=new Ys({type:w});return{projection:C,transform:new Ii,cameraHelper:new Ea(C)}}switch(w){case"mercator":return{projection:new Sr,transform:new On,cameraHelper:new si};case"globe":{const C=new Ys({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:C,transform:new Ii,cameraHelper:new Ea(C)}}case"vertical-perspective":return{projection:new so,transform:new Li,cameraHelper:new mi};default:return a.w(`Unknown projection name: ${w}. Falling back to mercator projection.`),{projection:new Sr,transform:new On,cameraHelper:new si}}})(s);this.projection=h.projection,this.map.migrateProjection(h.transform,h.cameraHelper);for(const w in this.sourceCaches)this.sourceCaches[w].reload()}_validate(s,h,w,C,L={}){return(!L||L.validate!==!1)&&Qi(this,s.call(a.z,a.e({key:h,style:this.serialize(),value:w,styleSpec:a.v},C)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),xr().off(pr,this._rtlPluginLoaded);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const w=this.sourceCaches[h];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const h in this.sourceCaches)this.sourceCaches[h].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,h,w,C,L=!1){let B=!1,X=!1;const te={};for(const ce of this._order){const me=this._layers[ce];if(me.type!=="symbol")continue;if(!te[me.source]){const Ce=this.sourceCaches[me.source];te[me.source]=Ce.getRenderableIds(!0).map((Fe=>Ce.getTileByID(Fe))).sort(((Fe,We)=>We.tileID.overscaledZ-Fe.tileID.overscaledZ||(Fe.tileID.isLessThan(We.tileID)?-1:1)))}const Te=this.crossTileSymbolIndex.addLayer(me,te[me.source],s.center.lng);B=B||Te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((L=L||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(x.now(),s.zoom))&&(this.pauseablePlacement=new Ls(s,this.map.terrain,this._order,L,h,w,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(x.now()),X=!0),B&&this.pauseablePlacement.placement.setStale()),X||B)for(const ce of this._order){const me=this._layers[ce];me.type==="symbol"&&this.placement.updateLayerOpacities(me,te[me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(x.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,h){return a._(this,void 0,void 0,(function*(){const w=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();const C=this.sourceCaches[h.source];return C&&C.setDependencies(h.tileID.key,h.type,h.icons),w}))}getGlyphs(s,h){return a._(this,void 0,void 0,(function*(){const w=yield this.glyphManager.getGlyphs(h.stacks),C=this.sourceCaches[h.source];return C&&C.setDependencies(h.tileID.key,h.type,[""]),w}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,h={}){this._checkLoaded(),s&&this._validate(a.z.glyphs,"glyphs",s,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,h,w={},C){this._checkLoaded();const L=[{id:s,url:h}],B=[...j(this.stylesheet.sprite),...L];this._validate(a.z.sprite,"sprite",B,null,w)||(this.stylesheet.sprite=B,this._loadSprite(L,!0,C))}removeSprite(s){this._checkLoaded();const h=j(this.stylesheet.sprite);if(h.find((w=>w.id===s))){if(this._spritesImagesIds[s])for(const w of this._spritesImagesIds[s])this.imageManager.removeImage(w),this._changedImages[w]=!0;h.splice(h.findIndex((w=>w.id===s)),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return j(this.stylesheet.sprite)}setSprite(s,h={},w){this._checkLoaded(),s&&this._validate(a.z.sprite,"sprite",s,null,h)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,w):(this._unloadSprite(),w&&w(null)))}}var Ns=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Xl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,h,w,C,L,B,X,te,ce){this.context=s;let me=this.boundPaintVertexBuffers.length!==C.length;for(let Te=0;!me&&Te<C.length;Te++)this.boundPaintVertexBuffers[Te]!==C[Te]&&(me=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==w||me||this.boundIndexBuffer!==L||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==X||this.boundDynamicVertexBuffer2!==te||this.boundDynamicVertexBuffer3!==ce?this.freshBind(h,w,C,L,B,X,te,ce):(s.bindVertexArray.set(this.vao),X&&X.bind(),L&&L.dynamicDraw&&L.bind(),te&&te.bind(),ce&&ce.bind())}freshBind(s,h,w,C,L,B,X,te){const ce=s.numAttributes,me=this.context,Te=me.gl;this.vao&&this.destroy(),this.vao=me.createVertexArray(),me.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=C,this.boundVertexOffset=L,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=X,this.boundDynamicVertexBuffer3=te,h.enableAttributes(Te,s);for(const Ce of w)Ce.enableAttributes(Te,s);B&&B.enableAttributes(Te,s),X&&X.enableAttributes(Te,s),te&&te.enableAttributes(Te,s),h.bind(),h.setVertexAttribPointers(Te,s,L);for(const Ce of w)Ce.bind(),Ce.setVertexAttribPointers(Te,s,L);B&&(B.bind(),B.setVertexAttribPointers(Te,s,L)),C&&C.bind(),X&&(X.bind(),X.setVertexAttribPointers(Te,s,L)),te&&(te.bind(),te.setVertexAttribPointers(Te,s,L)),me.currentNumAttributes=ce}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const vo=(A,s,h,w,C)=>({u_texture:0,u_ele_delta:A,u_fog_matrix:s,u_fog_color:h?h.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:C?0:h?h.calculateFogBlendOpacity(w):0,u_horizon_color:h?h.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1,u_is_globe_mode:C?1:0}),sl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Wi(A){const s=[];for(let h=0;h<A.length;h++){if(A[h]===null)continue;const w=A[h].split(" ");s.push(w.pop())}return s}class Zs{constructor(s,h,w,C,L,B,X,te,ce=[]){const me=s.gl;this.program=me.createProgram();const Te=Wi(h.staticAttributes),Ce=w?w.getBinderAttributes():[],Fe=Te.concat(Ce),We=Rt.prelude.staticUniforms?Wi(Rt.prelude.staticUniforms):[],ct=X.staticUniforms?Wi(X.staticUniforms):[],ut=h.staticUniforms?Wi(h.staticUniforms):[],dt=w?w.getBinderUniforms():[],_t=We.concat(ct).concat(ut).concat(dt),Pt=[];for(const lr of _t)Pt.indexOf(lr)<0&&Pt.push(lr);const Et=w?w.defines():[];oo(me)&&Et.unshift("#version 300 es"),L&&Et.push("#define OVERDRAW_INSPECTOR;"),B&&Et.push("#define TERRAIN3D;"),te&&Et.push(te),ce&&Et.push(...ce);let Mt=Et.concat(Rt.prelude.fragmentSource,X.fragmentSource,h.fragmentSource).join(`
`),Ot=Et.concat(Rt.prelude.vertexSource,X.vertexSource,h.vertexSource).join(`
`);oo(me)||(Mt=(function(lr){return lr.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Mt),Ot=(function(lr){return lr.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ot));const Tt=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);if(me.shaderSource(Tt,Mt),me.compileShader(Tt),!me.getShaderParameter(Tt,me.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${me.getShaderInfoLog(Tt)}`);me.attachShader(this.program,Tt);const Vt=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);if(me.shaderSource(Vt,Ot),me.compileShader(Vt),!me.getShaderParameter(Vt,me.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${me.getShaderInfoLog(Vt)}`);me.attachShader(this.program,Vt),this.attributes={};const gr={};this.numAttributes=Fe.length;for(let lr=0;lr<this.numAttributes;lr++)Fe[lr]&&(me.bindAttribLocation(this.program,lr,Fe[lr]),this.attributes[Fe[lr]]=lr);if(me.linkProgram(this.program),!me.getProgramParameter(this.program,me.LINK_STATUS))throw new Error(`Program failed to link: ${me.getProgramInfoLog(this.program)}`);me.deleteShader(Vt),me.deleteShader(Tt);for(let lr=0;lr<Pt.length;lr++){const cr=Pt[lr];if(cr&&!gr[cr]){const fr=me.getUniformLocation(this.program,cr);fr&&(gr[cr]=fr)}}this.fixedUniforms=C(s,gr),this.terrainUniforms=((lr,cr)=>({u_depth:new a.bP(lr,cr.u_depth),u_terrain:new a.bP(lr,cr.u_terrain),u_terrain_dim:new a.bg(lr,cr.u_terrain_dim),u_terrain_matrix:new a.bR(lr,cr.u_terrain_matrix),u_terrain_unpack:new a.bS(lr,cr.u_terrain_unpack),u_terrain_exaggeration:new a.bg(lr,cr.u_terrain_exaggeration)}))(s,gr),this.projectionUniforms=((lr,cr)=>({u_projection_matrix:new a.bR(lr,cr.u_projection_matrix),u_projection_tile_mercator_coords:new a.bS(lr,cr.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bS(lr,cr.u_projection_clipping_plane),u_projection_transition:new a.bg(lr,cr.u_projection_transition),u_projection_fallback_matrix:new a.bR(lr,cr.u_projection_fallback_matrix)}))(s,gr),this.binderUniforms=w?w.getUniforms(s,gr):[]}draw(s,h,w,C,L,B,X,te,ce,me,Te,Ce,Fe,We,ct,ut,dt,_t,Pt){const Et=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(w),s.setStencilMode(C),s.setColorMode(L),s.setCullFace(B),te){s.activeTexture.set(Et.TEXTURE2),Et.bindTexture(Et.TEXTURE_2D,te.depthTexture),s.activeTexture.set(Et.TEXTURE3),Et.bindTexture(Et.TEXTURE_2D,te.texture);for(const Ot in this.terrainUniforms)this.terrainUniforms[Ot].set(te[Ot])}if(ce)for(const Ot in ce)this.projectionUniforms[sl[Ot]].set(ce[Ot]);if(X)for(const Ot in this.fixedUniforms)this.fixedUniforms[Ot].set(X[Ot]);ut&&ut.setUniforms(s,this.binderUniforms,We,{zoom:ct});let Mt=0;switch(h){case Et.LINES:Mt=2;break;case Et.TRIANGLES:Mt=3;break;case Et.LINE_STRIP:Mt=1}for(const Ot of Fe.get()){const Tt=Ot.vaos||(Ot.vaos={});(Tt[me]||(Tt[me]=new Xl)).bind(s,this,Te,ut?ut.getPaintVertexBuffers():[],Ce,Ot.vertexOffset,dt,_t,Pt),Et.drawElements(h,Ot.primitiveLength*Mt,Et.UNSIGNED_SHORT,Ot.primitiveOffset*Mt*2)}}}function Il(A,s,h){const w=1/a.aC(h,1,s.transform.tileZoom),C=Math.pow(2,h.tileID.overscaledZ),L=h.tileSize*Math.pow(2,s.transform.tileZoom)/C,B=L*(h.tileID.canonical.x+h.tileID.wrap*C),X=L*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[w,A.fromScale,A.toScale],u_fade:A.t,u_pixel_coord_upper:[B>>16,X>>16],u_pixel_coord_lower:[65535&B,65535&X]}}const Xa=(A,s,h,w)=>{const C=A.style.light,L=C.properties.get("position"),B=[L.x,L.y,L.z],X=a.bV();C.properties.get("anchor")==="viewport"&&a.bW(X,A.transform.bearingInRadians),a.bX(B,B,X);const te=A.transform.transformLightDirection(B),ce=C.properties.get("color");return{u_lightpos:B,u_lightpos_globe:te,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[ce.r,ce.g,ce.b],u_vertical_gradient:+s,u_opacity:h,u_fill_translate:w}},Ba=(A,s,h,w,C,L,B)=>a.e(Xa(A,s,h,w),Il(L,A,B),{u_height_factor:-Math.pow(2,C.overscaledZ)/B.tileSize/8}),ro=(A,s,h,w)=>a.e(Il(s,A,h),{u_fill_translate:w}),Ta=(A,s)=>({u_world:A,u_fill_translate:s}),ko=(A,s,h,w,C)=>a.e(ro(A,s,h,C),{u_world:w}),Yl=(A,s,h,w,C)=>{const L=A.transform;let B,X,te=0;if(h.paint.get("circle-pitch-alignment")==="map"){const ce=a.aC(s,1,L.zoom);B=!0,X=[ce,ce],te=ce/(a.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*C}else B=!1,X=L.pixelsToGLUnits;return{u_camera_to_center_distance:L.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+B,u_device_pixel_ratio:A.pixelRatio,u_extrude_scale:X,u_globe_extrude_scale:te,u_translate:w}},fa=A=>({u_pixel_extrude_scale:[1/A.width,1/A.height]}),wc=A=>({u_viewport_size:[A.width,A.height]}),Vo=(A,s=1)=>({u_color:A,u_overlay:0,u_overlay_scale:s}),kl=(A,s,h,w)=>{const C=a.aC(A,1,s)/(a.$*Math.pow(2,A.tileID.overscaledZ))*2*Math.PI*w;return{u_extrude_scale:a.aC(A,1,s),u_intensity:h,u_globe_extrude_scale:C}},La=(A,s,h,w)=>{const C=a.L();a.bY(C,0,A.width,A.height,0,0,1);const L=A.context.gl;return{u_matrix:C,u_world:[L.drawingBufferWidth,L.drawingBufferHeight],u_image:h,u_color_ramp:w,u_opacity:s.paint.get("heatmap-opacity")}},ps=(A,s,h)=>{const w=h.paint.get("hillshade-accent-color");let C;switch(h.paint.get("hillshade-method")){case"basic":C=4;break;case"combined":C=1;break;case"igor":C=2;break;case"multidirectional":C=3;break;default:C=0}const L=h.getIlluminationProperties();for(let B=0;B<L.directionRadians.length;B++)h.paint.get("hillshade-illumination-anchor")==="viewport"&&(L.directionRadians[B]+=A.transform.bearingInRadians);return{u_image:0,u_latrange:hu(0,s.tileID),u_exaggeration:h.paint.get("hillshade-exaggeration"),u_altitudes:L.altitudeRadians,u_azimuths:L.directionRadians,u_accent:w,u_method:C,u_highlights:L.highlightColor,u_shadows:L.shadowColor}},fu=(A,s)=>{const h=s.stride,w=a.L();return a.bY(w,0,a.$,-a.$,0,0,1),a.M(w,w,[0,-a.$,0]),{u_matrix:w,u_image:1,u_dimension:[h,h],u_zoom:A.overscaledZ,u_unpack:s.getUnpackVector()}};function hu(A,s){const h=Math.pow(2,s.canonical.z),w=s.canonical.y;return[new a.a1(0,w/h).toLngLat().lat,new a.a1(0,(w+1)/h).toLngLat().lat]}const Ks=(A,s,h=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:h,u_opacity:A.paint.get("color-relief-opacity")}),ll=(A,s,h,w)=>{const C=A.transform;return{u_translation:ul(A,s,h),u_ratio:w/a.aC(s,1,C.zoom),u_device_pixel_ratio:A.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},lo=(A,s,h,w,C)=>a.e(ll(A,s,h,w),{u_image:0,u_image_height:C}),Ya=(A,s,h,w,C)=>{const L=A.transform,B=no(s,L);return{u_translation:ul(A,s,h),u_texsize:s.imageAtlasTexture.size,u_ratio:w/a.aC(s,1,L.zoom),u_device_pixel_ratio:A.pixelRatio,u_image:0,u_scale:[B,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},ms=(A,s,h,w,C,L)=>{const B=A.lineAtlas,X=no(s,A.transform),te=h.layout.get("line-cap")==="round",ce=B.getDash(C.from,te),me=B.getDash(C.to,te),Te=ce.width*L.fromScale,Ce=me.width*L.toScale;return a.e(ll(A,s,h,w),{u_patternscale_a:[X/Te,-ce.height/2],u_patternscale_b:[X/Ce,-me.height/2],u_sdfgamma:B.width/(256*Math.min(Te,Ce)*A.pixelRatio)/2,u_image:0,u_tex_y_a:ce.y,u_tex_y_b:me.y,u_mix:L.t})};function no(A,s){return 1/a.aC(A,1,s.tileZoom)}function ul(A,s,h){return a.aD(A.transform,s,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Uo=(A,s,h,w,C)=>{return{u_tl_parent:A,u_scale_parent:s,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(B=w.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(L=w.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:cl(w.paint.get("raster-hue-rotate")),u_coords_top:[C[0].x,C[0].y,C[1].x,C[1].y],u_coords_bottom:[C[3].x,C[3].y,C[2].x,C[2].y]};var L,B};function cl(A){A*=Math.PI/180;const s=Math.sin(A),h=Math.cos(A);return[(2*h+1)/3,(-Math.sqrt(3)*s-h+1)/3,(Math.sqrt(3)*s-h+1)/3]}const ia=(A,s,h,w,C,L,B,X,te,ce,me,Te,Ce)=>{const Fe=B.transform;return{u_is_size_zoom_constant:+(A==="constant"||A==="source"),u_is_size_feature_constant:+(A==="constant"||A==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Fe.cameraToCenterDistance,u_pitch:Fe.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:Fe.width/Fe.height,u_fade_change:B.options.fadeDuration?B.symbolFadeChange:1,u_label_plane_matrix:X,u_coord_matrix:te,u_is_text:+me,u_pitch_with_map:+w,u_is_along_line:C,u_is_variable_anchor:L,u_texsize:Te,u_texture:0,u_translation:ce,u_pitched_scale:Ce}},Zl=(A,s,h,w,C,L,B,X,te,ce,me,Te,Ce,Fe)=>{const We=B.transform;return a.e(ia(A,s,h,w,C,L,B,X,te,ce,me,Te,Fe),{u_gamma_scale:w?Math.cos(We.pitch*Math.PI/180)*We.cameraToCenterDistance:1,u_device_pixel_ratio:B.pixelRatio,u_is_halo:1})},Os=(A,s,h,w,C,L,B,X,te,ce,me,Te,Ce)=>a.e(Zl(A,s,h,w,C,L,B,X,te,ce,!0,me,0,Ce),{u_texsize_icon:Te,u_texture_icon:1}),gs=(A,s)=>({u_opacity:A,u_color:s}),dl=(A,s,h,w,C)=>a.e((function(L,B,X,te){const ce=X.imageManager.getPattern(L.from.toString()),me=X.imageManager.getPattern(L.to.toString()),{width:Te,height:Ce}=X.imageManager.getPixelSize(),Fe=Math.pow(2,te.tileID.overscaledZ),We=te.tileSize*Math.pow(2,X.transform.tileZoom)/Fe,ct=We*(te.tileID.canonical.x+te.tileID.wrap*Fe),ut=We*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ce.tl,u_pattern_br_a:ce.br,u_pattern_tl_b:me.tl,u_pattern_br_b:me.br,u_texsize:[Te,Ce],u_mix:B.t,u_pattern_size_a:ce.displaySize,u_pattern_size_b:me.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/a.aC(te,1,X.transform.tileZoom),u_pixel_coord_upper:[ct>>16,ut>>16],u_pixel_coord_lower:[65535&ct,65535&ut]}})(h,C,s,w),{u_opacity:A}),Kl=(A,s)=>{},ys={fillExtrusion:(A,s)=>({u_lightpos:new a.bT(A,s.u_lightpos),u_lightpos_globe:new a.bT(A,s.u_lightpos_globe),u_lightintensity:new a.bg(A,s.u_lightintensity),u_lightcolor:new a.bT(A,s.u_lightcolor),u_vertical_gradient:new a.bg(A,s.u_vertical_gradient),u_opacity:new a.bg(A,s.u_opacity),u_fill_translate:new a.bU(A,s.u_fill_translate)}),fillExtrusionPattern:(A,s)=>({u_lightpos:new a.bT(A,s.u_lightpos),u_lightpos_globe:new a.bT(A,s.u_lightpos_globe),u_lightintensity:new a.bg(A,s.u_lightintensity),u_lightcolor:new a.bT(A,s.u_lightcolor),u_vertical_gradient:new a.bg(A,s.u_vertical_gradient),u_height_factor:new a.bg(A,s.u_height_factor),u_opacity:new a.bg(A,s.u_opacity),u_fill_translate:new a.bU(A,s.u_fill_translate),u_image:new a.bP(A,s.u_image),u_texsize:new a.bU(A,s.u_texsize),u_pixel_coord_upper:new a.bU(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(A,s.u_pixel_coord_lower),u_scale:new a.bT(A,s.u_scale),u_fade:new a.bg(A,s.u_fade)}),fill:(A,s)=>({u_fill_translate:new a.bU(A,s.u_fill_translate)}),fillPattern:(A,s)=>({u_image:new a.bP(A,s.u_image),u_texsize:new a.bU(A,s.u_texsize),u_pixel_coord_upper:new a.bU(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(A,s.u_pixel_coord_lower),u_scale:new a.bT(A,s.u_scale),u_fade:new a.bg(A,s.u_fade),u_fill_translate:new a.bU(A,s.u_fill_translate)}),fillOutline:(A,s)=>({u_world:new a.bU(A,s.u_world),u_fill_translate:new a.bU(A,s.u_fill_translate)}),fillOutlinePattern:(A,s)=>({u_world:new a.bU(A,s.u_world),u_image:new a.bP(A,s.u_image),u_texsize:new a.bU(A,s.u_texsize),u_pixel_coord_upper:new a.bU(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(A,s.u_pixel_coord_lower),u_scale:new a.bT(A,s.u_scale),u_fade:new a.bg(A,s.u_fade),u_fill_translate:new a.bU(A,s.u_fill_translate)}),circle:(A,s)=>({u_camera_to_center_distance:new a.bg(A,s.u_camera_to_center_distance),u_scale_with_map:new a.bP(A,s.u_scale_with_map),u_pitch_with_map:new a.bP(A,s.u_pitch_with_map),u_extrude_scale:new a.bU(A,s.u_extrude_scale),u_device_pixel_ratio:new a.bg(A,s.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(A,s.u_globe_extrude_scale),u_translate:new a.bU(A,s.u_translate)}),collisionBox:(A,s)=>({u_pixel_extrude_scale:new a.bU(A,s.u_pixel_extrude_scale)}),collisionCircle:(A,s)=>({u_viewport_size:new a.bU(A,s.u_viewport_size)}),debug:(A,s)=>({u_color:new a.bQ(A,s.u_color),u_overlay:new a.bP(A,s.u_overlay),u_overlay_scale:new a.bg(A,s.u_overlay_scale)}),depth:Kl,clippingMask:Kl,heatmap:(A,s)=>({u_extrude_scale:new a.bg(A,s.u_extrude_scale),u_intensity:new a.bg(A,s.u_intensity),u_globe_extrude_scale:new a.bg(A,s.u_globe_extrude_scale)}),heatmapTexture:(A,s)=>({u_matrix:new a.bR(A,s.u_matrix),u_world:new a.bU(A,s.u_world),u_image:new a.bP(A,s.u_image),u_color_ramp:new a.bP(A,s.u_color_ramp),u_opacity:new a.bg(A,s.u_opacity)}),hillshade:(A,s)=>({u_image:new a.bP(A,s.u_image),u_latrange:new a.bU(A,s.u_latrange),u_exaggeration:new a.bg(A,s.u_exaggeration),u_altitudes:new a.b_(A,s.u_altitudes),u_azimuths:new a.b_(A,s.u_azimuths),u_accent:new a.bQ(A,s.u_accent),u_method:new a.bP(A,s.u_method),u_shadows:new a.bZ(A,s.u_shadows),u_highlights:new a.bZ(A,s.u_highlights)}),hillshadePrepare:(A,s)=>({u_matrix:new a.bR(A,s.u_matrix),u_image:new a.bP(A,s.u_image),u_dimension:new a.bU(A,s.u_dimension),u_zoom:new a.bg(A,s.u_zoom),u_unpack:new a.bS(A,s.u_unpack)}),colorRelief:(A,s)=>({u_image:new a.bP(A,s.u_image),u_unpack:new a.bS(A,s.u_unpack),u_dimension:new a.bU(A,s.u_dimension),u_elevation_stops:new a.bP(A,s.u_elevation_stops),u_color_stops:new a.bP(A,s.u_color_stops),u_color_ramp_size:new a.bP(A,s.u_color_ramp_size),u_opacity:new a.bg(A,s.u_opacity)}),line:(A,s)=>({u_translation:new a.bU(A,s.u_translation),u_ratio:new a.bg(A,s.u_ratio),u_device_pixel_ratio:new a.bg(A,s.u_device_pixel_ratio),u_units_to_pixels:new a.bU(A,s.u_units_to_pixels)}),lineGradient:(A,s)=>({u_translation:new a.bU(A,s.u_translation),u_ratio:new a.bg(A,s.u_ratio),u_device_pixel_ratio:new a.bg(A,s.u_device_pixel_ratio),u_units_to_pixels:new a.bU(A,s.u_units_to_pixels),u_image:new a.bP(A,s.u_image),u_image_height:new a.bg(A,s.u_image_height)}),linePattern:(A,s)=>({u_translation:new a.bU(A,s.u_translation),u_texsize:new a.bU(A,s.u_texsize),u_ratio:new a.bg(A,s.u_ratio),u_device_pixel_ratio:new a.bg(A,s.u_device_pixel_ratio),u_image:new a.bP(A,s.u_image),u_units_to_pixels:new a.bU(A,s.u_units_to_pixels),u_scale:new a.bT(A,s.u_scale),u_fade:new a.bg(A,s.u_fade)}),lineSDF:(A,s)=>({u_translation:new a.bU(A,s.u_translation),u_ratio:new a.bg(A,s.u_ratio),u_device_pixel_ratio:new a.bg(A,s.u_device_pixel_ratio),u_units_to_pixels:new a.bU(A,s.u_units_to_pixels),u_patternscale_a:new a.bU(A,s.u_patternscale_a),u_patternscale_b:new a.bU(A,s.u_patternscale_b),u_sdfgamma:new a.bg(A,s.u_sdfgamma),u_image:new a.bP(A,s.u_image),u_tex_y_a:new a.bg(A,s.u_tex_y_a),u_tex_y_b:new a.bg(A,s.u_tex_y_b),u_mix:new a.bg(A,s.u_mix)}),raster:(A,s)=>({u_tl_parent:new a.bU(A,s.u_tl_parent),u_scale_parent:new a.bg(A,s.u_scale_parent),u_buffer_scale:new a.bg(A,s.u_buffer_scale),u_fade_t:new a.bg(A,s.u_fade_t),u_opacity:new a.bg(A,s.u_opacity),u_image0:new a.bP(A,s.u_image0),u_image1:new a.bP(A,s.u_image1),u_brightness_low:new a.bg(A,s.u_brightness_low),u_brightness_high:new a.bg(A,s.u_brightness_high),u_saturation_factor:new a.bg(A,s.u_saturation_factor),u_contrast_factor:new a.bg(A,s.u_contrast_factor),u_spin_weights:new a.bT(A,s.u_spin_weights),u_coords_top:new a.bS(A,s.u_coords_top),u_coords_bottom:new a.bS(A,s.u_coords_bottom)}),symbolIcon:(A,s)=>({u_is_size_zoom_constant:new a.bP(A,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(A,s.u_is_size_feature_constant),u_size_t:new a.bg(A,s.u_size_t),u_size:new a.bg(A,s.u_size),u_camera_to_center_distance:new a.bg(A,s.u_camera_to_center_distance),u_pitch:new a.bg(A,s.u_pitch),u_rotate_symbol:new a.bP(A,s.u_rotate_symbol),u_aspect_ratio:new a.bg(A,s.u_aspect_ratio),u_fade_change:new a.bg(A,s.u_fade_change),u_label_plane_matrix:new a.bR(A,s.u_label_plane_matrix),u_coord_matrix:new a.bR(A,s.u_coord_matrix),u_is_text:new a.bP(A,s.u_is_text),u_pitch_with_map:new a.bP(A,s.u_pitch_with_map),u_is_along_line:new a.bP(A,s.u_is_along_line),u_is_variable_anchor:new a.bP(A,s.u_is_variable_anchor),u_texsize:new a.bU(A,s.u_texsize),u_texture:new a.bP(A,s.u_texture),u_translation:new a.bU(A,s.u_translation),u_pitched_scale:new a.bg(A,s.u_pitched_scale)}),symbolSDF:(A,s)=>({u_is_size_zoom_constant:new a.bP(A,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(A,s.u_is_size_feature_constant),u_size_t:new a.bg(A,s.u_size_t),u_size:new a.bg(A,s.u_size),u_camera_to_center_distance:new a.bg(A,s.u_camera_to_center_distance),u_pitch:new a.bg(A,s.u_pitch),u_rotate_symbol:new a.bP(A,s.u_rotate_symbol),u_aspect_ratio:new a.bg(A,s.u_aspect_ratio),u_fade_change:new a.bg(A,s.u_fade_change),u_label_plane_matrix:new a.bR(A,s.u_label_plane_matrix),u_coord_matrix:new a.bR(A,s.u_coord_matrix),u_is_text:new a.bP(A,s.u_is_text),u_pitch_with_map:new a.bP(A,s.u_pitch_with_map),u_is_along_line:new a.bP(A,s.u_is_along_line),u_is_variable_anchor:new a.bP(A,s.u_is_variable_anchor),u_texsize:new a.bU(A,s.u_texsize),u_texture:new a.bP(A,s.u_texture),u_gamma_scale:new a.bg(A,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(A,s.u_device_pixel_ratio),u_is_halo:new a.bP(A,s.u_is_halo),u_translation:new a.bU(A,s.u_translation),u_pitched_scale:new a.bg(A,s.u_pitched_scale)}),symbolTextAndIcon:(A,s)=>({u_is_size_zoom_constant:new a.bP(A,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(A,s.u_is_size_feature_constant),u_size_t:new a.bg(A,s.u_size_t),u_size:new a.bg(A,s.u_size),u_camera_to_center_distance:new a.bg(A,s.u_camera_to_center_distance),u_pitch:new a.bg(A,s.u_pitch),u_rotate_symbol:new a.bP(A,s.u_rotate_symbol),u_aspect_ratio:new a.bg(A,s.u_aspect_ratio),u_fade_change:new a.bg(A,s.u_fade_change),u_label_plane_matrix:new a.bR(A,s.u_label_plane_matrix),u_coord_matrix:new a.bR(A,s.u_coord_matrix),u_is_text:new a.bP(A,s.u_is_text),u_pitch_with_map:new a.bP(A,s.u_pitch_with_map),u_is_along_line:new a.bP(A,s.u_is_along_line),u_is_variable_anchor:new a.bP(A,s.u_is_variable_anchor),u_texsize:new a.bU(A,s.u_texsize),u_texsize_icon:new a.bU(A,s.u_texsize_icon),u_texture:new a.bP(A,s.u_texture),u_texture_icon:new a.bP(A,s.u_texture_icon),u_gamma_scale:new a.bg(A,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(A,s.u_device_pixel_ratio),u_is_halo:new a.bP(A,s.u_is_halo),u_translation:new a.bU(A,s.u_translation),u_pitched_scale:new a.bg(A,s.u_pitched_scale)}),background:(A,s)=>({u_opacity:new a.bg(A,s.u_opacity),u_color:new a.bQ(A,s.u_color)}),backgroundPattern:(A,s)=>({u_opacity:new a.bg(A,s.u_opacity),u_image:new a.bP(A,s.u_image),u_pattern_tl_a:new a.bU(A,s.u_pattern_tl_a),u_pattern_br_a:new a.bU(A,s.u_pattern_br_a),u_pattern_tl_b:new a.bU(A,s.u_pattern_tl_b),u_pattern_br_b:new a.bU(A,s.u_pattern_br_b),u_texsize:new a.bU(A,s.u_texsize),u_mix:new a.bg(A,s.u_mix),u_pattern_size_a:new a.bU(A,s.u_pattern_size_a),u_pattern_size_b:new a.bU(A,s.u_pattern_size_b),u_scale_a:new a.bg(A,s.u_scale_a),u_scale_b:new a.bg(A,s.u_scale_b),u_pixel_coord_upper:new a.bU(A,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(A,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(A,s.u_tile_units_to_pixels)}),terrain:(A,s)=>({u_texture:new a.bP(A,s.u_texture),u_ele_delta:new a.bg(A,s.u_ele_delta),u_fog_matrix:new a.bR(A,s.u_fog_matrix),u_fog_color:new a.bQ(A,s.u_fog_color),u_fog_ground_blend:new a.bg(A,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(A,s.u_fog_ground_blend_opacity),u_horizon_color:new a.bQ(A,s.u_horizon_color),u_horizon_fog_blend:new a.bg(A,s.u_horizon_fog_blend),u_is_globe_mode:new a.bg(A,s.u_is_globe_mode)}),terrainDepth:(A,s)=>({u_ele_delta:new a.bg(A,s.u_ele_delta)}),terrainCoords:(A,s)=>({u_texture:new a.bP(A,s.u_texture),u_terrain_coords_id:new a.bg(A,s.u_terrain_coords_id),u_ele_delta:new a.bg(A,s.u_ele_delta)}),projectionErrorMeasurement:(A,s)=>({u_input:new a.bg(A,s.u_input),u_output_expected:new a.bg(A,s.u_output_expected)}),atmosphere:(A,s)=>({u_sun_pos:new a.bT(A,s.u_sun_pos),u_atmosphere_blend:new a.bg(A,s.u_atmosphere_blend),u_globe_position:new a.bT(A,s.u_globe_position),u_globe_radius:new a.bg(A,s.u_globe_radius),u_inv_proj_matrix:new a.bR(A,s.u_inv_proj_matrix)}),sky:(A,s)=>({u_sky_color:new a.bQ(A,s.u_sky_color),u_horizon_color:new a.bQ(A,s.u_horizon_color),u_horizon:new a.bU(A,s.u_horizon),u_horizon_normal:new a.bU(A,s.u_horizon_normal),u_sky_horizon_blend:new a.bg(A,s.u_sky_horizon_blend),u_sky_blend:new a.bg(A,s.u_sky_blend)})};class Al{constructor(s,h,w){this.context=s;const C=s.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $t{constructor(s,h,w,C){this.length=h.length,this.attributes=w,this.itemSize=h.bytesPerElement,this.dynamicDraw=C,this.context=s;const L=s.gl;this.buffer=L.createBuffer(),s.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,h){for(let w=0;w<this.attributes.length;w++){const C=h.attributes[this.attributes[w].name];C!==void 0&&s.enableVertexAttribArray(C)}}setVertexAttribPointers(s,h,w){for(let C=0;C<this.attributes.length;C++){const L=this.attributes[C],B=h.attributes[L.name];B!==void 0&&s.vertexAttribPointer(B,L.components,s[fl[L.type]],!1,this.itemSize,L.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class er{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jr extends er{getDefault(){return a.bf.transparent}set(s){const h=this.current;(s.r!==h.r||s.g!==h.g||s.b!==h.b||s.a!==h.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class yn extends er{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class di extends er{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class vn extends er{getDefault(){return[!0,!0,!0,!0]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||s[3]!==h[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class E extends er{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class m extends er{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class y extends er{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const h=this.current;(s.func!==h.func||s.ref!==h.ref||s.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class T extends er{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class z extends er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=s,this.dirty=!1}}class re extends er{getDefault(){return[0,1]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class ye extends er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=s,this.dirty=!1}}class Le extends er{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Ke extends er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.BLEND):h.disable(h.BLEND),this.current=s,this.dirty=!1}}class yt extends er{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Yt extends er{getDefault(){return a.bf.transparent}set(s){const h=this.current;(s.r!==h.r||s.g!==h.g||s.b!==h.b||s.a!==h.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class or extends er{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Nr extends er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=s,this.dirty=!1}}class on extends er{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class wn extends er{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Ln extends er{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class bn extends er{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Tn extends er{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||s[3]!==h[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class qi extends er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Hi extends er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class ha extends er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Ra extends er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class bo extends er{getDefault(){return null}set(s){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class es extends er{getDefault(){return null}set(s){var h;if(s===this.current&&!this.dirty)return;const w=this.gl;oo(w)?w.bindVertexArray(s):(h=w.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class hl extends er{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class pu extends er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class vs extends er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Ao extends er{constructor(s,h){super(s),this.context=s,this.parent=h}getDefault(){return null}}class ku extends Ao{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Js extends Ao{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class qn extends Ao{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const _o="Framebuffer is not complete";class Ku{constructor(s,h,w,C,L){this.context=s,this.width=h,this.height=w;const B=s.gl,X=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new ku(s,X),C)this.depthAttachment=L?new qn(s,X):new Js(s,X);else if(L)throw new Error("Stencil cannot be set without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error(_o)}destroy(){const s=this.context.gl,h=this.colorAttachment.get();if(h&&s.deleteTexture(h),this.depthAttachment){const w=this.depthAttachment.get();w&&s.deleteRenderbuffer(w)}s.deleteFramebuffer(this.framebuffer)}}class Sc{constructor(s){var h,w;if(this.gl=s,this.clearColor=new Jr(this),this.clearDepth=new yn(this),this.clearStencil=new di(this),this.colorMask=new vn(this),this.depthMask=new E(this),this.stencilMask=new m(this),this.stencilFunc=new y(this),this.stencilOp=new T(this),this.stencilTest=new z(this),this.depthRange=new re(this),this.depthTest=new ye(this),this.depthFunc=new Le(this),this.blend=new Ke(this),this.blendFunc=new yt(this),this.blendColor=new Yt(this),this.blendEquation=new or(this),this.cullFace=new Nr(this),this.cullFaceSide=new on(this),this.frontFace=new wn(this),this.program=new Ln(this),this.activeTexture=new bn(this),this.viewport=new Tn(this),this.bindFramebuffer=new qi(this),this.bindRenderbuffer=new Hi(this),this.bindTexture=new ha(this),this.bindVertexBuffer=new Ra(this),this.bindElementBuffer=new bo(this),this.bindVertexArray=new es(this),this.pixelStoreUnpack=new hl(this),this.pixelStoreUnpackPremultiplyAlpha=new pu(this),this.pixelStoreUnpackFlipY=new vs(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),oo(s)){this.HALF_FLOAT=s.HALF_FLOAT;const C=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=s.RGBA16F)!==null&&h!==void 0?h:C?.RGBA16F_EXT,this.RGB16F=(w=s.RGB16F)!==null&&w!==void 0?w:C?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const C=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=C?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,h){return new Al(this,s,h)}createVertexBuffer(s,h,w){return new $t(this,s,h,w)}createRenderbuffer(s,h,w){const C=this.gl,L=C.createRenderbuffer();return this.bindRenderbuffer.set(L),C.renderbufferStorage(C.RENDERBUFFER,s,h,w),this.bindRenderbuffer.set(null),L}createFramebuffer(s,h,w,C){return new Ku(this,s,h,w,C)}clear({color:s,depth:h,stencil:w}){const C=this.gl;let L=0;s&&(L|=C.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(L|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),w!==void 0&&(L|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),C.clear(L)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.bH(s.blendFunction,An.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return oo(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var h;return oo(this.gl)?this.gl.deleteVertexArray(s):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let pl;function Au(A,s,h,w,C){const L=A.context,B=A.transform,X=L.gl,te=A.useProgram("collisionBox"),ce=[];let me=0,Te=0;for(let dt=0;dt<w.length;dt++){const _t=w[dt],Pt=s.getTile(_t).getBucket(h);if(!Pt)continue;const Et=C?Pt.textCollisionBox:Pt.iconCollisionBox,Mt=Pt.collisionCircleArray;Mt.length>0&&(ce.push({circleArray:Mt,circleOffset:Te,coord:_t}),me+=Mt.length/4,Te=me),Et&&te.draw(L,X.LINES,En.disabled,jn.disabled,A.colorModeForRenderPass(),Mn.disabled,fa(A.transform),A.style.map.terrain&&A.style.map.terrain.getTerrainData(_t),B.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,null,A.transform.zoom,null,null,Et.collisionVertexBuffer)}if(!C||!ce.length)return;const Ce=A.useProgram("collisionCircle"),Fe=new a.b$;Fe.resize(4*me),Fe._trim();let We=0;for(const dt of ce)for(let _t=0;_t<dt.circleArray.length/4;_t++){const Pt=4*_t,Et=dt.circleArray[Pt+0],Mt=dt.circleArray[Pt+1],Ot=dt.circleArray[Pt+2],Tt=dt.circleArray[Pt+3];Fe.emplace(We++,Et,Mt,Ot,Tt,0),Fe.emplace(We++,Et,Mt,Ot,Tt,1),Fe.emplace(We++,Et,Mt,Ot,Tt,2),Fe.emplace(We++,Et,Mt,Ot,Tt,3)}(!pl||pl.length<2*me)&&(pl=(function(dt){const _t=2*dt,Pt=new a.c1;Pt.resize(_t),Pt._trim();for(let Et=0;Et<_t;Et++){const Mt=6*Et;Pt.uint16[Mt+0]=4*Et+0,Pt.uint16[Mt+1]=4*Et+1,Pt.uint16[Mt+2]=4*Et+2,Pt.uint16[Mt+3]=4*Et+2,Pt.uint16[Mt+4]=4*Et+3,Pt.uint16[Mt+5]=4*Et+0}return Pt})(me));const ct=L.createIndexBuffer(pl,!0),ut=L.createVertexBuffer(Fe,a.c0.members,!0);for(const dt of ce){const _t=wc(A.transform);Ce.draw(L,X.TRIANGLES,En.disabled,jn.disabled,A.colorModeForRenderPass(),Mn.disabled,_t,A.style.map.terrain&&A.style.map.terrain.getTerrainData(dt.coord),null,h.id,ut,ct,a.aM.simpleSegment(0,2*dt.circleOffset,dt.circleArray.length,dt.circleArray.length/2),null,A.transform.zoom,null,null,null)}ut.destroy(),ct.destroy()}const Qf=a.ag(new Float32Array(16));function eh(A,s,h,w,C,L){const{horizontalAlign:B,verticalAlign:X}=a.aH(A);return new a.P((-(B-.5)*s/C+w[0])*L,(-(X-.5)*h/C+w[1])*L)}function gm(A,s,h,w,C,L){const B=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let X=w.mult(L);h||(X=X.rotate(-C));const te=B.add(X);return gt(te.x,te.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(h){const X=_i(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(A),te=Math.atan(X.y/X.x)+(X.x<0?Math.PI:0);return A.add(w.rotate(te))}return A.add(w)}function uf(A,s,h,w,C,L,B,X,te,ce,me,Te){const Ce=A.text.placedSymbolArray,Fe=A.text.dynamicLayoutVertexArray,We=A.icon.dynamicLayoutVertexArray,ct={};Fe.clear();for(let ut=0;ut<Ce.length;ut++){const dt=Ce.get(ut),_t=dt.hidden||!dt.crossTileID||A.allowVerticalPlacement&&!dt.placedOrientation?null:w[dt.crossTileID];if(_t){const Pt=new a.P(dt.anchorX,dt.anchorY),Et={getElevation:Te,width:C.width,height:C.height,pitchedLabelPlaneMatrix:L,pitchWithMap:h,transform:C,tileAnchorPoint:Pt,translation:ce,unwrappedTileID:me},Mt=h?Di(Pt.x,Pt.y,Et):_i(Pt.x,Pt.y,Et),Ot=mt(C.cameraToCenterDistance,Mt.signedDistanceFromCamera);let Tt=a.ap(A.textSizeData,X,dt)*Ot/a.aB;h&&(Tt*=A.tilePixelRatio/B);const{width:Vt,height:gr,anchor:lr,textOffset:cr,textBoxScale:fr}=_t,Xr=eh(lr,Vt,gr,cr,fr,Tt),Zr=C.getPitchedTextCorrection(Pt.x+ce[0],Pt.y+ce[1],me),Fr=gm(Mt.point,Et,s,Xr,-C.bearingInRadians,Zr),Cn=A.allowVerticalPlacement&&dt.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let vi=0;vi<dt.numGlyphs;vi++)a.av(Fe,Fr,Cn);te&&dt.associatedIconIndex>=0&&(ct[dt.associatedIconIndex]={shiftedAnchor:Fr,angle:Cn})}else Na(dt.numGlyphs,Fe)}if(te){We.clear();const ut=A.icon.placedSymbolArray;for(let dt=0;dt<ut.length;dt++){const _t=ut.get(dt);if(_t.hidden)Na(_t.numGlyphs,We);else{const Pt=ct[dt];if(Pt)for(let Et=0;Et<_t.numGlyphs;Et++)a.av(We,Pt.shiftedAnchor,Pt.angle);else Na(_t.numGlyphs,We)}}A.icon.dynamicLayoutVertexBuffer.updateData(We)}A.text.dynamicLayoutVertexBuffer.updateData(Fe)}function wd(A,s,h){return h.iconsInText&&s?"symbolTextAndIcon":A?"symbolSDF":"symbolIcon"}function Cc(A,s,h,w,C,L,B,X,te,ce,me,Te,Ce){const Fe=A.context,We=Fe.gl,ct=A.transform,ut=X==="map",dt=te==="map",_t=X!=="viewport"&&h.layout.get("symbol-placement")!=="point",Pt=ut&&!dt&&!_t,Et=!h.layout.get("symbol-sort-key").isConstant();let Mt=!1;const Ot=A.getDepthModeForSublayer(0,En.ReadOnly),Tt=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Vt=[],gr=ct.getCircleRadiusCorrection();for(const lr of w){const cr=s.getTile(lr),fr=cr.getBucket(h);if(!fr)continue;const Xr=C?fr.text:fr.icon;if(!Xr||!Xr.segments.get().length||!Xr.hasVisibleVertices)continue;const Zr=Xr.programConfigurations.get(h.id),Fr=C||fr.sdfIcons,Cn=C?fr.textSizeData:fr.iconSizeData,vi=dt||ct.pitch!==0,Oi=A.useProgram(wd(Fr,C,fr),Zr),ea=a.an(Cn,ct.zoom),Xi=A.style.map.terrain&&A.style.map.terrain.getTerrainData(lr);let Ki,sa,ii,Ji,fo=[0,0],Oo=null;if(C)sa=cr.glyphAtlasTexture,ii=We.LINEAR,Ki=cr.glyphAtlasTexture.size,fr.iconsInText&&(fo=cr.imageAtlasTexture.size,Oo=cr.imageAtlasTexture,Ji=vi||A.options.rotating||A.options.zooming||Cn.kind==="composite"||Cn.kind==="camera"?We.LINEAR:We.NEAREST);else{const os=h.layout.get("icon-size").constantOr(0)!==1||fr.iconsNeedLinear;sa=cr.imageAtlasTexture,ii=Fr||A.options.rotating||A.options.zooming||os||vi?We.LINEAR:We.NEAREST,Ki=cr.imageAtlasTexture.size}const as=a.aC(cr,1,A.transform.zoom),_s=Wn(ut,A.transform,as),Ll=a.L();a.aq(Ll,_s);const Ad=Pe(dt,ut,A.transform,as),Md=a.aD(ct,cr,L,B),sh=ct.getProjectionData({overscaledTileID:lr,applyGlobeMatrix:!Ce,applyTerrainMatrix:!0}),lh=Tt&&fr.hasTextData(),pf=h.layout.get("icon-text-fit")!=="none"&&lh&&fr.hasIconData();if(_t){const os=A.style.map.terrain?(Lu,ss)=>A.style.map.terrain.getElevation(lr,Lu,ss):null,xs=h.layout.get("text-rotation-alignment")==="map";Ar(fr,A,C,_s,Ll,dt,ce,xs,lr.toUnwrapped(),ct.width,ct.height,Md,os)}const mf=C&&Tt||pf,Ql=_t||mf?Qf:dt?_s:A.transform.clipSpaceToPixelsMatrix,tc=Fr&&h.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Rl;Rl=Fr?fr.iconsInText?Os(Cn.kind,ea,Pt,dt,_t,mf,A,Ql,Ad,Md,Ki,fo,gr):Zl(Cn.kind,ea,Pt,dt,_t,mf,A,Ql,Ad,Md,C,Ki,0,gr):ia(Cn.kind,ea,Pt,dt,_t,mf,A,Ql,Ad,Md,C,Ki,gr);const Ld={program:Oi,buffers:Xr,uniformValues:Rl,projectionData:sh,atlasTexture:sa,atlasTextureIcon:Oo,atlasInterpolation:ii,atlasInterpolationIcon:Ji,isSDF:Fr,hasHalo:tc};if(Et&&fr.canOverlap){Mt=!0;const os=Xr.segments.get();for(const xs of os)Vt.push({segments:new a.aM([xs]),sortKey:xs.sortKey,state:Ld,terrainData:Xi})}else Vt.push({segments:Xr.segments,sortKey:0,state:Ld,terrainData:Xi})}Mt&&Vt.sort(((lr,cr)=>lr.sortKey-cr.sortKey));for(const lr of Vt){const cr=lr.state;if(Fe.activeTexture.set(We.TEXTURE0),cr.atlasTexture.bind(cr.atlasInterpolation,We.CLAMP_TO_EDGE),cr.atlasTextureIcon&&(Fe.activeTexture.set(We.TEXTURE1),cr.atlasTextureIcon&&cr.atlasTextureIcon.bind(cr.atlasInterpolationIcon,We.CLAMP_TO_EDGE)),cr.isSDF){const fr=cr.uniformValues;cr.hasHalo&&(fr.u_is_halo=1,Hc(cr.buffers,lr.segments,h,A,cr.program,Ot,me,Te,fr,cr.projectionData,lr.terrainData)),fr.u_is_halo=0}Hc(cr.buffers,lr.segments,h,A,cr.program,Ot,me,Te,cr.uniformValues,cr.projectionData,lr.terrainData)}}function Hc(A,s,h,w,C,L,B,X,te,ce,me){const Te=w.context;C.draw(Te,Te.gl.TRIANGLES,L,B,X,Mn.backCCW,te,me,ce,h.id,A.layoutVertexBuffer,A.indexBuffer,s,h.paint,w.transform.zoom,A.programConfigurations.get(h.id),A.dynamicLayoutVertexBuffer,A.opacityVertexBuffer)}function Yh(A,s,h,w,C){const L=A.context,B=L.gl,X=jn.disabled,te=new An([B.ONE,B.ONE],a.bf.transparent,[!0,!0,!0,!0]),ce=s.getBucket(h);if(!ce)return;const me=w.key;let Te=h.heatmapFbos.get(me);Te||(Te=Sd(L,s.tileSize,s.tileSize),h.heatmapFbos.set(me,Te)),L.bindFramebuffer.set(Te.framebuffer),L.viewport.set([0,0,s.tileSize,s.tileSize]),L.clear({color:a.bf.transparent});const Ce=ce.programConfigurations.get(h.id),Fe=A.useProgram("heatmap",Ce,!C),We=A.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ct=A.style.map.terrain.getTerrainData(w);Fe.draw(L,B.TRIANGLES,En.disabled,X,te,Mn.disabled,kl(s,A.transform.zoom,h.paint.get("heatmap-intensity"),1),ct,We,h.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,h.paint,A.transform.zoom,Ce)}function ym(A,s,h,w,C){const L=A.context,B=L.gl,X=A.transform;L.setColorMode(A.colorModeForRenderPass());const te=cf(L,s),ce=h.key,me=s.heatmapFbos.get(ce);if(!me)return;L.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,me.colorAttachment.get()),L.activeTexture.set(B.TEXTURE1),te.bind(B.LINEAR,B.CLAMP_TO_EDGE);const Te=X.getProjectionData({overscaledTileID:h,applyTerrainMatrix:C,applyGlobeMatrix:!w});A.useProgram("heatmapTexture").draw(L,B.TRIANGLES,En.disabled,jn.disabled,A.colorModeForRenderPass(),Mn.disabled,La(A,s,0,1),null,Te,s.id,A.rasterBoundsBuffer,A.quadTriangleIndexBuffer,A.rasterBoundsSegments,s.paint,X.zoom),me.destroy(),s.heatmapFbos.delete(ce)}function Sd(A,s,h){var w,C;const L=A.gl,B=L.createTexture();L.bindTexture(L.TEXTURE_2D,B),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR);const X=(w=A.HALF_FLOAT)!==null&&w!==void 0?w:L.UNSIGNED_BYTE,te=(C=A.RGBA16F)!==null&&C!==void 0?C:L.RGBA;L.texImage2D(L.TEXTURE_2D,0,te,s,h,0,L.RGBA,X,null);const ce=A.createFramebuffer(s,h,!1,!1);return ce.colorAttachment.set(B),ce}function cf(A,s){return s.colorRampTexture||(s.colorRampTexture=new a.T(A,s.colorRamp,A.gl.RGBA)),s.colorRampTexture}function df(A,s,h,w,C){if(!h||!w||!w.imageAtlas)return;const L=w.imageAtlas.patternPositions;let B=L[h.to.toString()],X=L[h.from.toString()];if(!B&&X&&(B=X),!X&&B&&(X=B),!B||!X){const te=C.getPaintProperty(s);B=L[te],X=L[te]}B&&X&&A.setConstantPatternPositions(B,X)}function th(A,s,h,w,C,L,B,X){const te=A.context.gl,ce="fill-pattern",me=h.paint.get(ce),Te=me&&me.constantOr(1),Ce=h.getCrossfadeParameters();let Fe,We,ct,ut,dt;const _t=A.transform,Pt=h.paint.get("fill-translate"),Et=h.paint.get("fill-translate-anchor");B?(We=Te&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Fe=te.LINES):(We=Te?"fillPattern":"fill",Fe=te.TRIANGLES);const Mt=me.constantOr(null);for(const Ot of w){const Tt=s.getTile(Ot);if(Te&&!Tt.patternsLoaded())continue;const Vt=Tt.getBucket(h);if(!Vt)continue;const gr=Vt.programConfigurations.get(h.id),lr=A.useProgram(We,gr),cr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ot);Te&&(A.context.activeTexture.set(te.TEXTURE0),Tt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),gr.updatePaintBuffers(Ce)),df(gr,ce,Mt,Tt,h);const fr=_t.getProjectionData({overscaledTileID:Ot,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),Xr=a.aD(_t,Tt,Pt,Et);if(B){ut=Vt.indexBuffer2,dt=Vt.segments2;const Fr=[te.drawingBufferWidth,te.drawingBufferHeight];ct=We==="fillOutlinePattern"&&Te?ko(A,Ce,Tt,Fr,Xr):Ta(Fr,Xr)}else ut=Vt.indexBuffer,dt=Vt.segments,ct=Te?ro(A,Ce,Tt,Xr):{u_fill_translate:Xr};const Zr=A.stencilModeForClipping(Ot);lr.draw(A.context,Fe,C,Zr,L,Mn.backCCW,ct,cr,fr,h.id,Vt.layoutVertexBuffer,ut,dt,h.paint,A.transform.zoom,gr)}}function Zh(A,s,h,w,C,L,B,X){const te=A.context,ce=te.gl,me="fill-extrusion-pattern",Te=h.paint.get(me),Ce=Te.constantOr(1),Fe=h.getCrossfadeParameters(),We=h.paint.get("fill-extrusion-opacity"),ct=Te.constantOr(null),ut=A.transform;for(const dt of w){const _t=s.getTile(dt),Pt=_t.getBucket(h);if(!Pt)continue;const Et=A.style.map.terrain&&A.style.map.terrain.getTerrainData(dt),Mt=Pt.programConfigurations.get(h.id),Ot=A.useProgram(Ce?"fillExtrusionPattern":"fillExtrusion",Mt);Ce&&(A.context.activeTexture.set(ce.TEXTURE0),_t.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Mt.updatePaintBuffers(Fe));const Tt=ut.getProjectionData({overscaledTileID:dt,applyGlobeMatrix:!X,applyTerrainMatrix:!0});df(Mt,me,ct,_t,h);const Vt=a.aD(ut,_t,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),gr=h.paint.get("fill-extrusion-vertical-gradient"),lr=Ce?Ba(A,gr,We,Vt,dt,Fe,_t):Xa(A,gr,We,Vt);Ot.draw(te,te.gl.TRIANGLES,C,L,B,Mn.backCCW,lr,Et,Tt,h.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,h.paint,A.transform.zoom,Mt,A.style.map.terrain&&Pt.centroidVertexBuffer)}}function Wc(A,s,h,w,C,L,B,X,te){var ce;const me=A.style.projection,Te=A.context,Ce=A.transform,Fe=Te.gl,We=[`#define NUM_ILLUMINATION_SOURCES ${h.paint.get("hillshade-highlight-color").values.length}`],ct=A.useProgram("hillshade",null,!1,We),ut=!A.options.moving;for(const dt of w){const _t=s.getTile(dt),Pt=_t.fbo;if(!Pt)continue;const Et=me.getMeshFromTileID(Te,dt.canonical,X,!0,"raster"),Mt=(ce=A.style.map.terrain)===null||ce===void 0?void 0:ce.getTerrainData(dt);Te.activeTexture.set(Fe.TEXTURE0),Fe.bindTexture(Fe.TEXTURE_2D,Pt.colorAttachment.get());const Ot=Ce.getProjectionData({overscaledTileID:dt,aligned:ut,applyGlobeMatrix:!te,applyTerrainMatrix:!0});ct.draw(Te,Fe.TRIANGLES,L,C[dt.overscaledZ],B,Mn.backCCW,ps(A,_t,h),Mt,Ot,h.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}function ff(A,s,h,w,C,L,B,X,te){var ce;const me=A.style.projection,Te=A.context,Ce=A.transform,Fe=Te.gl,We=A.useProgram("colorRelief"),ct=!A.options.moving;let ut=!0,dt=0;for(const _t of w){const Pt=s.getTile(_t),Et=Pt.dem;if(ut){const lr=Fe.getParameter(Fe.MAX_TEXTURE_SIZE),{elevationTexture:cr,colorTexture:fr}=h.getColorRampTextures(Te,lr,Et.getUnpackVector());Te.activeTexture.set(Fe.TEXTURE1),cr.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE),Te.activeTexture.set(Fe.TEXTURE4),fr.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),ut=!1,dt=cr.size[0]}if(!Et||!Et.data)continue;const Mt=Et.stride,Ot=Et.getPixels();if(Te.activeTexture.set(Fe.TEXTURE0),Te.pixelStoreUnpackPremultiplyAlpha.set(!1),Pt.demTexture=Pt.demTexture||A.getTileTexture(Mt),Pt.demTexture){const lr=Pt.demTexture;lr.update(Ot,{premultiply:!1}),lr.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}else Pt.demTexture=new a.T(Te,Ot,Fe.RGBA,{premultiply:!1}),Pt.demTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE);const Tt=me.getMeshFromTileID(Te,_t.canonical,X,!0,"raster"),Vt=(ce=A.style.map.terrain)===null||ce===void 0?void 0:ce.getTerrainData(_t),gr=Ce.getProjectionData({overscaledTileID:_t,aligned:ct,applyGlobeMatrix:!te,applyTerrainMatrix:!0});We.draw(Te,Fe.TRIANGLES,L,C[_t.overscaledZ],B,Mn.backCCW,Ks(h,Pt.dem,dt),Vt,gr,h.id,Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}}const Cd=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function mu(A,s,h,w,C,L,B,X,te=!1,ce=!1){const me=w[w.length-1].overscaledZ,Te=A.context,Ce=Te.gl,Fe=A.useProgram("raster"),We=A.transform,ct=A.style.projection,ut=A.colorModeForRenderPass(),dt=!A.options.moving;for(const _t of w){const Pt=A.getDepthModeForSublayer(_t.overscaledZ-me,h.paint.get("raster-opacity")===1?En.ReadWrite:En.ReadOnly,Ce.LESS),Et=s.getTile(_t);Et.registerFadeDuration(h.paint.get("raster-fade-duration"));const Mt=s.findLoadedParent(_t,0),Ot=s.findLoadedSibling(_t),Tt=Kh(Et,Mt||Ot||null,s,h,A.transform,A.style.map.terrain);let Vt,gr;const lr=h.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;Te.activeTexture.set(Ce.TEXTURE0),Et.texture.bind(lr,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Te.activeTexture.set(Ce.TEXTURE1),Mt?(Mt.texture.bind(lr,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Vt=Math.pow(2,Mt.tileID.overscaledZ-Et.tileID.overscaledZ),gr=[Et.tileID.canonical.x*Vt%1,Et.tileID.canonical.y*Vt%1]):Et.texture.bind(lr,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Et.texture.useMipmap&&Te.extTextureFilterAnisotropic&&A.transform.pitch>20&&Ce.texParameterf(Ce.TEXTURE_2D,Te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Te.extTextureFilterAnisotropicMax);const cr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(_t),fr=We.getProjectionData({overscaledTileID:_t,aligned:dt,applyGlobeMatrix:!ce,applyTerrainMatrix:!0}),Xr=Uo(gr||[0,0],Vt||1,Tt,h,X),Zr=ct.getMeshFromTileID(Te,_t.canonical,L,B,"raster");Fe.draw(Te,Ce.TRIANGLES,Pt,C?C[_t.overscaledZ]:jn.disabled,ut,te?Mn.frontCCW:Mn.backCCW,Xr,cr,fr,h.id,Zr.vertexBuffer,Zr.indexBuffer,Zr.segments)}}function Kh(A,s,h,w,C,L){const B=w.paint.get("raster-fade-duration");if(!L&&B>0){const X=x.now(),te=(X-A.timeAdded)/B,ce=s?(X-s.timeAdded)/B:-1,me=h.getSource(),Te=Er(C,{tileSize:me.tileSize,roundZoom:me.roundZoom}),Ce=!s||Math.abs(s.tileID.overscaledZ-Te)>Math.abs(A.tileID.overscaledZ-Te),Fe=Ce&&A.refreshedUponExpiration?1:a.ah(Ce?te:1-ce,0,1);return A.refreshedUponExpiration&&te>=1&&(A.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Fe}:{opacity:Fe,mix:0}}return{opacity:1,mix:0}}const vm=new a.bf(1,0,0,1),Jh=new a.bf(0,1,0,1),rh=new a.bf(0,0,1,1),Qh=new a.bf(1,0,1,1),Fy=new a.bf(0,1,1,1);function ep(A,s,h,w){Mo(A,0,s+h/2,A.transform.width,h,w)}function aa(A,s,h,w){Mo(A,s-h/2,0,h,A.transform.height,w)}function Mo(A,s,h,w,C,L){const B=A.context,X=B.gl;X.enable(X.SCISSOR_TEST),X.scissor(s*A.pixelRatio,h*A.pixelRatio,w*A.pixelRatio,C*A.pixelRatio),B.clear({color:L}),X.disable(X.SCISSOR_TEST)}function Lo(A,s,h){const w=A.context,C=w.gl,L=A.useProgram("debug"),B=En.disabled,X=jn.disabled,te=A.colorModeForRenderPass(),ce="$debug",me=A.style.map.terrain&&A.style.map.terrain.getTerrainData(h);w.activeTexture.set(C.TEXTURE0);const Te=s.getTileByID(h.key).latestRawTileData,Ce=Math.floor((Te&&Te.byteLength||0)/1024),Fe=s.getTile(h).tileSize,We=512/Math.min(Fe,512)*(h.overscaledZ/A.transform.zoom)*.5;let ct=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(ct+=` => ${h.overscaledZ}`),(function(dt,_t){dt.initDebugOverlayCanvas();const Pt=dt.debugOverlayCanvas,Et=dt.context.gl,Mt=dt.debugOverlayCanvas.getContext("2d");Mt.clearRect(0,0,Pt.width,Pt.height),Mt.shadowColor="white",Mt.shadowBlur=2,Mt.lineWidth=1.5,Mt.strokeStyle="white",Mt.textBaseline="top",Mt.font="bold 36px Open Sans, sans-serif",Mt.fillText(_t,5,5),Mt.strokeText(_t,5,5),dt.debugOverlayTexture.update(Pt),dt.debugOverlayTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE)})(A,`${ct} ${Ce}kB`);const ut=A.transform.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!0});L.draw(w,C.TRIANGLES,B,X,An.alphaBlended,Mn.disabled,Vo(a.bf.transparent,We),null,ut,ce,A.debugBuffer,A.quadTriangleIndexBuffer,A.debugSegments),L.draw(w,C.LINE_STRIP,B,X,te,Mn.disabled,Vo(a.bf.red),me,ut,ce,A.debugBuffer,A.tileBorderIndexBuffer,A.debugSegments)}function nh(A,s,h,w){const{isRenderingGlobe:C}=w,L=A.context,B=L.gl,X=A.transform,te=A.colorModeForRenderPass(),ce=A.getDepthModeFor3D(),me=A.useProgram("terrain");L.bindFramebuffer.set(null),L.viewport.set([0,0,A.width,A.height]);for(const Te of h){const Ce=s.getTerrainMesh(Te.tileID),Fe=A.renderToTexture.getTexture(Te),We=s.getTerrainData(Te.tileID);L.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,Fe.texture);const ct=s.getMeshFrameDelta(X.zoom),ut=X.calculateFogMatrix(Te.tileID.toUnwrapped()),dt=vo(ct,ut,A.style.sky,X.pitch,C),_t=X.getProjectionData({overscaledTileID:Te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});me.draw(L,B.TRIANGLES,ce,jn.disabled,te,Mn.backCCW,dt,We,_t,"terrain",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)}}function Ed(A,s){if(!s.mesh){const h=new a.aL;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(1,1),h.emplaceBack(-1,1);const w=new a.aN;w.emplaceBack(0,1,2),w.emplaceBack(0,2,3),s.mesh=new Xt(A.createVertexBuffer(h,Or.members),A.createIndexBuffer(w),a.aM.simpleSegment(0,0,h.length,w.length))}return s.mesh}class Ju{constructor(s,h){this.context=new Sc(s),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Dr.maxUnderzooming+Dr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xe}resize(s,h,w){if(this.width=Math.floor(s*w),this.height=Math.floor(h*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const s=this.context,h=new a.aL;h.emplaceBack(0,0),h.emplaceBack(a.$,0),h.emplaceBack(0,a.$),h.emplaceBack(a.$,a.$),this.tileExtentBuffer=s.createVertexBuffer(h,Or.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const w=new a.aL;w.emplaceBack(0,0),w.emplaceBack(a.$,0),w.emplaceBack(0,a.$),w.emplaceBack(a.$,a.$),this.debugBuffer=s.createVertexBuffer(w,Or.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const C=new a.c6;C.emplaceBack(0,0,0,0),C.emplaceBack(a.$,0,a.$,0),C.emplaceBack(0,a.$,0,a.$),C.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=s.createVertexBuffer(C,Ns.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const L=new a.aL;L.emplaceBack(0,0),L.emplaceBack(a.$,0),L.emplaceBack(0,a.$),L.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(L,Or.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const B=new a.aL;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(B,Or.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const X=new a.c7;X.emplaceBack(0),X.emplaceBack(1),X.emplaceBack(3),X.emplaceBack(2),X.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(X);const te=new a.aN;te.emplaceBack(1,0,2),te.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(te);const ce=this.context.gl;this.stencilClearMode=new jn({func:ce.ALWAYS,mask:0},0,255,ce.ZERO,ce.ZERO,ce.ZERO),this.tileExtentMesh=new Xt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,h=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=a.L();a.bY(w,0,this.width,this.height,0,0,1),a.N(w,w,[h.drawingBufferWidth,h.drawingBufferHeight,0]);const C={mainMatrix:w,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:w};this.useProgram("clippingMask",null,!0).draw(s,h.TRIANGLES,En.disabled,this.stencilClearMode,An.disabled,Mn.disabled,null,null,C,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,h,w){if(this.currentStencilSource===s.source||!s.isTileClipped()||!h||!h.length)return;this.currentStencilSource=s.source,this.nextStencilID+h.length>256&&this.clearStencil();const C=this.context;C.setColorMode(An.disabled),C.setDepthMode(En.disabled);const L={};for(const B of h)L[B.key]=this.nextStencilID++;this._renderTileMasks(L,h,w,!0),this._renderTileMasks(L,h,w,!1),this._tileClippingMaskIDs=L}_renderTileMasks(s,h,w,C){const L=this.context,B=L.gl,X=this.style.projection,te=this.transform,ce=this.useProgram("clippingMask");for(const me of h){const Te=s[me.key],Ce=this.style.map.terrain&&this.style.map.terrain.getTerrainData(me),Fe=X.getMeshFromTileID(this.context,me.canonical,C,!0,"stencil"),We=te.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!w,applyTerrainMatrix:!0});ce.draw(L,B.TRIANGLES,En.disabled,new jn({func:B.ALWAYS,mask:0},Te,255,B.KEEP,B.KEEP,B.REPLACE),An.disabled,w?Mn.disabled:Mn.backCCW,null,Ce,We,"$clipping",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}_renderTilesDepthBuffer(){const s=this.context,h=s.gl,w=this.style.projection,C=this.transform,L=this.useProgram("depth"),B=this.getDepthModeFor3D(),X=bt(C,{tileSize:C.tileSize});for(const te of X){const ce=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),me=w.getMeshFromTileID(this.context,te.canonical,!0,!0,"raster"),Te=C.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!0,applyTerrainMatrix:!0});L.draw(s,h.TRIANGLES,B,jn.disabled,An.disabled,Mn.backCCW,null,ce,Te,"$clipping",me.vertexBuffer,me.indexBuffer,me.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,h=this.context.gl;return new jn({func:h.NOTEQUAL,mask:255},s,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(s){const h=this.context.gl;return new jn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,h.KEEP,h.KEEP,h.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const h=this.context.gl,w=s.sort(((B,X)=>X.overscaledZ-B.overscaledZ)),C=w[w.length-1].overscaledZ,L=w[0].overscaledZ-C+1;if(L>1){this.currentStencilSource=void 0,this.nextStencilID+L>256&&this.clearStencil();const B={};for(let X=0;X<L;X++)B[X+C]=new jn({func:h.GEQUAL,mask:255},X+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=L,[B,w]}return[{[C]:jn.disabled},w]}stencilConfigForOverlapTwoPass(s){const h=this.context.gl,w=s.sort(((B,X)=>X.overscaledZ-B.overscaledZ)),C=w[w.length-1].overscaledZ,L=w[0].overscaledZ-C+1;if(this.clearStencil(),L>1){const B={},X={};for(let te=0;te<L;te++)B[te+C]=new jn({func:h.GREATER,mask:255},L+1+te,255,h.KEEP,h.KEEP,h.REPLACE),X[te+C]=new jn({func:h.GREATER,mask:255},1+te,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID=2*L+1,[B,X,w]}return this.nextStencilID=3,[{[C]:new jn({func:h.GREATER,mask:255},2,255,h.KEEP,h.KEEP,h.REPLACE)},{[C]:new jn({func:h.GREATER,mask:255},1,255,h.KEEP,h.KEEP,h.REPLACE)},w]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new An([s.CONSTANT_COLOR,s.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?An.unblended:An.alphaBlended}getDepthModeForSublayer(s,h,w){if(!this.opaquePassEnabledForLayer())return En.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new En(w||this.context.gl.LEQUAL,h,[C,C])}getDepthModeFor3D(){return new En(this.context.gl.LEQUAL,En.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,h){var w,C;this.style=s,this.options=h,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(x.now()),this.imageManager.beginFrame();const L=this.style._order,B=this.style.sourceCaches,X={},te={},ce={},me={isRenderingToTexture:!1,isRenderingGlobe:((w=s.projection)===null||w===void 0?void 0:w.transitionState)>0};for(const Ce in B){const Fe=B[Ce];Fe.used&&Fe.prepare(this.context),X[Ce]=Fe.getVisibleCoordinates(!1),te[Ce]=X[Ce].slice().reverse(),ce[Ce]=Fe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ce=0;Ce<L.length;Ce++)if(this.style._layers[L[Ce]].is3D()){this.opaquePassCutoff=Ce;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Ce of L){const Fe=this.style._layers[Ce];if(!Fe.hasOffscreenPass()||Fe.isHidden(this.transform.zoom))continue;const We=te[Fe.source];(Fe.type==="custom"||We.length)&&this.renderLayer(this,B[Fe.source],Fe,We,me)}if((C=this.style.projection)===null||C===void 0||C.updateGPUdependent({context:this.context,useProgram:Ce=>this.useProgram(Ce)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(Ce,Fe){const We=Ce.context,ct=We.gl,ut=((Ot,Tt,Vt)=>{const gr=Math.cos(Tt.rollInRadians),lr=Math.sin(Tt.rollInRadians),cr=ot(Tt),fr=Tt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ot.properties.get("sky-color"),u_horizon_color:Ot.properties.get("horizon-color"),u_horizon:[(Tt.width/2-cr*lr)*Vt,(Tt.height/2+cr*gr)*Vt],u_horizon_normal:[-lr,gr],u_sky_horizon_blend:Ot.properties.get("sky-horizon-blend")*Tt.height/2*Vt,u_sky_blend:fr}})(Fe,Ce.style.map.transform,Ce.pixelRatio),dt=new En(ct.LEQUAL,En.ReadWrite,[0,1]),_t=jn.disabled,Pt=Ce.colorModeForRenderPass(),Et=Ce.useProgram("sky"),Mt=Ed(We,Fe);Et.draw(We,ct.TRIANGLES,dt,_t,Pt,Mn.disabled,ut,null,void 0,"sky",Mt.vertexBuffer,Mt.indexBuffer,Mt.segments)})(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const Ce=this.style._layers[L[this.currentLayer]],Fe=B[Ce.source],We=X[Ce.source];this._renderTileClippingMasks(Ce,We,!1),this.renderLayer(this,Fe,Ce,We,me)}this.renderPass="translucent";let Te=!1;for(this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const Ce=this.style._layers[L[this.currentLayer]],Fe=B[Ce.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Ce,me))continue;this.opaquePassEnabledForLayer()||Te||(Te=!0,me.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const We=(Ce.type==="symbol"?ce:te)[Ce.source];this._renderTileClippingMasks(Ce,X[Ce.source],!!this.renderToTexture),this.renderLayer(this,Fe,Ce,We,me)}if(me.isRenderingGlobe&&(function(Ce,Fe,We){const ct=Ce.context,ut=ct.gl,dt=Ce.useProgram("atmosphere"),_t=new En(ut.LEQUAL,En.ReadOnly,[0,1]),Pt=Ce.transform,Et=(function(fr,Xr){const Zr=fr.properties.get("position"),Fr=[-Zr.x,-Zr.y,-Zr.z],Cn=a.ag(new Float64Array(16));return fr.properties.get("anchor")==="map"&&(a.b6(Cn,Cn,Xr.rollInRadians),a.b7(Cn,Cn,-Xr.pitchInRadians),a.b6(Cn,Cn,Xr.bearingInRadians),a.b7(Cn,Cn,Xr.center.lat*Math.PI/180),a.bz(Cn,Cn,-Xr.center.lng*Math.PI/180)),a.c5(Fr,Fr,Cn),Fr})(We,Ce.transform),Mt=Pt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ot=Fe.properties.get("atmosphere-blend")*Mt.projectionTransition;if(Ot===0)return;const Tt=Ca(Pt.worldSize,Pt.center.lat),Vt=Pt.inverseProjectionMatrix,gr=new Float64Array(4);gr[3]=1,a.aw(gr,gr,Pt.modelViewProjectionMatrix),gr[0]/=gr[3],gr[1]/=gr[3],gr[2]/=gr[3],gr[3]=1,a.aw(gr,gr,Vt),gr[0]/=gr[3],gr[1]/=gr[3],gr[2]/=gr[3],gr[3]=1;const lr=((fr,Xr,Zr,Fr,Cn)=>({u_sun_pos:fr,u_atmosphere_blend:Xr,u_globe_position:Zr,u_globe_radius:Fr,u_inv_proj_matrix:Cn}))(Et,Ot,[gr[0],gr[1],gr[2]],Tt,Vt),cr=Ed(ct,Fe);dt.draw(ct,ut.TRIANGLES,_t,jn.disabled,An.alphaBlended,Mn.disabled,lr,null,null,"atmosphere",cr.vertexBuffer,cr.indexBuffer,cr.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Ce=(function(Fe,We){let ct=null;const ut=Object.values(Fe._layers).flatMap((Et=>Et.source&&!Et.isHidden(We)?[Fe.sourceCaches[Et.source]]:[])),dt=ut.filter((Et=>Et.getSource().type==="vector")),_t=ut.filter((Et=>Et.getSource().type!=="vector")),Pt=Et=>{(!ct||ct.getSource().maxzoom<Et.getSource().maxzoom)&&(ct=Et)};return dt.forEach((Et=>Pt(Et))),ct||_t.forEach((Et=>Pt(Et))),ct})(this.style,this.transform.zoom);Ce&&(function(Fe,We,ct){for(let ut=0;ut<ct.length;ut++)Lo(Fe,We,ct[ut])})(this,Ce,Ce.getVisibleCoordinates())}this.options.showPadding&&(function(Ce){const Fe=Ce.transform.padding;ep(Ce,Ce.transform.height-(Fe.top||0),3,vm),ep(Ce,Fe.bottom||0,3,Jh),aa(Ce,Fe.left||0,3,rh),aa(Ce,Ce.transform.width-(Fe.right||0),3,Qh);const We=Ce.transform.centerPoint;(function(ct,ut,dt,_t){Mo(ct,ut-1,dt-10,2,20,_t),Mo(ct,ut-10,dt-1,20,2,_t)})(Ce,We.x,Ce.transform.height-We.y,Fy)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const h=this.terrainFacilitator.matrix,w=this.transform.modelViewProjectionMatrix;let C=this.terrainFacilitator.dirty;C||(C=s?!a.c8(h,w):!a.c9(h,w)),C||(C=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),C&&(a.ca(h,w),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(L,B){const X=L.context,te=X.gl,ce=L.transform,me=An.unblended,Te=new En(te.LEQUAL,En.ReadWrite,[0,1]),Ce=B.sourceCache.getRenderableTiles(),Fe=L.useProgram("terrainDepth");X.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),X.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),X.clear({color:a.bf.transparent,depth:1});for(const We of Ce){const ct=B.getTerrainMesh(We.tileID),ut=B.getTerrainData(We.tileID),dt=ce.getProjectionData({overscaledTileID:We.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),_t={u_ele_delta:B.getMeshFrameDelta(ce.zoom)};Fe.draw(X,te.TRIANGLES,Te,jn.disabled,me,Mn.backCCW,_t,ut,dt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments)}X.bindFramebuffer.set(null),X.viewport.set([0,0,L.width,L.height])})(this,this.style.map.terrain),(function(L,B){const X=L.context,te=X.gl,ce=L.transform,me=An.unblended,Te=new En(te.LEQUAL,En.ReadWrite,[0,1]),Ce=B.getCoordsTexture(),Fe=B.sourceCache.getRenderableTiles(),We=L.useProgram("terrainCoords");X.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),X.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),X.clear({color:a.bf.transparent,depth:1}),B.coordsIndex=[];for(const ct of Fe){const ut=B.getTerrainMesh(ct.tileID),dt=B.getTerrainData(ct.tileID);X.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,Ce.texture);const _t={u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(ce.zoom)},Pt=ce.getProjectionData({overscaledTileID:ct.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});We.draw(X,te.TRIANGLES,Te,jn.disabled,me,Mn.backCCW,_t,dt,Pt,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments),B.coordsIndex.push(ct.tileID.key)}X.bindFramebuffer.set(null),X.viewport.set([0,0,L.width,L.height])})(this,this.style.map.terrain))}renderLayer(s,h,w,C,L){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||(C||[]).length)&&(this.id=w.id,a.cb(w)?(function(B,X,te,ce,me,Te){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=Te,Fe=jn.disabled,We=B.colorModeForRenderPass();(te._unevaluatedLayout.hasValue("text-variable-anchor")||te._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ct,ut,dt,_t,Pt,Et,Mt,Ot,Tt){const Vt=ut.transform,gr=ut.style.map.terrain,lr=Pt==="map",cr=Et==="map";for(const fr of ct){const Xr=_t.getTile(fr),Zr=Xr.getBucket(dt);if(!Zr||!Zr.text||!Zr.text.segments.get().length)continue;const Fr=a.an(Zr.textSizeData,Vt.zoom),Cn=a.aC(Xr,1,ut.transform.zoom),vi=Wn(lr,ut.transform,Cn),Oi=dt.layout.get("icon-text-fit")!=="none"&&Zr.hasIconData();if(Fr){const ea=Math.pow(2,Vt.zoom-Xr.tileID.overscaledZ),Xi=gr?(Ki,sa)=>gr.getElevation(fr,Ki,sa):null;uf(Zr,lr,cr,Tt,Vt,vi,ea,Fr,Oi,a.aD(Vt,Xr,Mt,Ot),fr.toUnwrapped(),Xi)}}})(ce,B,te,X,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),me),te.paint.get("icon-opacity").constantOr(1)!==0&&Cc(B,X,te,ce,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),Fe,We,Ce),te.paint.get("text-opacity").constantOr(1)!==0&&Cc(B,X,te,ce,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),Fe,We,Ce),X.map.showCollisionBoxes&&(Au(B,X,te,ce,!0),Au(B,X,te,ce,!1))})(s,h,w,C,this.style.placement.variableOffsets,L):a.cc(w)?(function(B,X,te,ce,me){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=me,Ce=te.paint.get("circle-opacity"),Fe=te.paint.get("circle-stroke-width"),We=te.paint.get("circle-stroke-opacity"),ct=!te.layout.get("circle-sort-key").isConstant();if(Ce.constantOr(1)===0&&(Fe.constantOr(1)===0||We.constantOr(1)===0))return;const ut=B.context,dt=ut.gl,_t=B.transform,Pt=B.getDepthModeForSublayer(0,En.ReadOnly),Et=jn.disabled,Mt=B.colorModeForRenderPass(),Ot=[],Tt=_t.getCircleRadiusCorrection();for(let Vt=0;Vt<ce.length;Vt++){const gr=ce[Vt],lr=X.getTile(gr),cr=lr.getBucket(te);if(!cr)continue;const fr=te.paint.get("circle-translate"),Xr=te.paint.get("circle-translate-anchor"),Zr=a.aD(_t,lr,fr,Xr),Fr=cr.programConfigurations.get(te.id),Cn=B.useProgram("circle",Fr),vi=cr.layoutVertexBuffer,Oi=cr.indexBuffer,ea=B.style.map.terrain&&B.style.map.terrain.getTerrainData(gr),Xi={programConfiguration:Fr,program:Cn,layoutVertexBuffer:vi,indexBuffer:Oi,uniformValues:Yl(B,lr,te,Zr,Tt),terrainData:ea,projectionData:_t.getProjectionData({overscaledTileID:gr,applyGlobeMatrix:!Te,applyTerrainMatrix:!0})};if(ct){const Ki=cr.segments.get();for(const sa of Ki)Ot.push({segments:new a.aM([sa]),sortKey:sa.sortKey,state:Xi})}else Ot.push({segments:cr.segments,sortKey:0,state:Xi})}ct&&Ot.sort(((Vt,gr)=>Vt.sortKey-gr.sortKey));for(const Vt of Ot){const{programConfiguration:gr,program:lr,layoutVertexBuffer:cr,indexBuffer:fr,uniformValues:Xr,terrainData:Zr,projectionData:Fr}=Vt.state;lr.draw(ut,dt.TRIANGLES,Pt,Et,Mt,Mn.backCCW,Xr,Zr,Fr,te.id,cr,fr,Vt.segments,te.paint,B.transform.zoom,gr)}})(s,h,w,C,L):a.cd(w)?(function(B,X,te,ce,me){if(te.paint.get("heatmap-opacity")===0)return;const Te=B.context,{isRenderingToTexture:Ce,isRenderingGlobe:Fe}=me;if(B.style.map.terrain){for(const We of ce){const ct=X.getTile(We);X.hasRenderableParent(We)||(B.renderPass==="offscreen"?Yh(B,ct,te,We,Fe):B.renderPass==="translucent"&&ym(B,te,We,Ce,Fe))}Te.viewport.set([0,0,B.width,B.height])}else B.renderPass==="offscreen"?(function(We,ct,ut,dt){const _t=We.context,Pt=_t.gl,Et=We.transform,Mt=jn.disabled,Ot=new An([Pt.ONE,Pt.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(Tt,Vt,gr){const lr=Tt.gl;Tt.activeTexture.set(lr.TEXTURE1),Tt.viewport.set([0,0,Vt.width/4,Vt.height/4]);let cr=gr.heatmapFbos.get(a.c2);cr?(lr.bindTexture(lr.TEXTURE_2D,cr.colorAttachment.get()),Tt.bindFramebuffer.set(cr.framebuffer)):(cr=Sd(Tt,Vt.width/4,Vt.height/4),gr.heatmapFbos.set(a.c2,cr))})(_t,We,ut),_t.clear({color:a.bf.transparent});for(let Tt=0;Tt<dt.length;Tt++){const Vt=dt[Tt];if(ct.hasRenderableParent(Vt))continue;const gr=ct.getTile(Vt),lr=gr.getBucket(ut);if(!lr)continue;const cr=lr.programConfigurations.get(ut.id),fr=We.useProgram("heatmap",cr),Xr=Et.getProjectionData({overscaledTileID:Vt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Zr=Et.getCircleRadiusCorrection();fr.draw(_t,Pt.TRIANGLES,En.disabled,Mt,Ot,Mn.backCCW,kl(gr,Et.zoom,ut.paint.get("heatmap-intensity"),Zr),null,Xr,ut.id,lr.layoutVertexBuffer,lr.indexBuffer,lr.segments,ut.paint,Et.zoom,cr)}_t.viewport.set([0,0,We.width,We.height])})(B,X,te,ce):B.renderPass==="translucent"&&(function(We,ct){const ut=We.context,dt=ut.gl;ut.setColorMode(We.colorModeForRenderPass());const _t=ct.heatmapFbos.get(a.c2);_t&&(ut.activeTexture.set(dt.TEXTURE0),dt.bindTexture(dt.TEXTURE_2D,_t.colorAttachment.get()),ut.activeTexture.set(dt.TEXTURE1),cf(ut,ct).bind(dt.LINEAR,dt.CLAMP_TO_EDGE),We.useProgram("heatmapTexture").draw(ut,dt.TRIANGLES,En.disabled,jn.disabled,We.colorModeForRenderPass(),Mn.disabled,La(We,ct,0,1),null,null,ct.id,We.viewportBuffer,We.quadTriangleIndexBuffer,We.viewportSegments,ct.paint,We.transform.zoom))})(B,te)})(s,h,w,C,L):a.ce(w)?(function(B,X,te,ce,me){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=me,Ce=te.paint.get("line-opacity"),Fe=te.paint.get("line-width");if(Ce.constantOr(1)===0||Fe.constantOr(1)===0)return;const We=B.getDepthModeForSublayer(0,En.ReadOnly),ct=B.colorModeForRenderPass(),ut=te.paint.get("line-dasharray"),dt=te.paint.get("line-pattern"),_t=dt.constantOr(1),Pt=te.paint.get("line-gradient"),Et=te.getCrossfadeParameters(),Mt=_t?"linePattern":ut?"lineSDF":Pt?"lineGradient":"line",Ot=B.context,Tt=Ot.gl,Vt=B.transform;let gr=!0;for(const lr of ce){const cr=X.getTile(lr);if(_t&&!cr.patternsLoaded())continue;const fr=cr.getBucket(te);if(!fr)continue;const Xr=fr.programConfigurations.get(te.id),Zr=B.context.program.get(),Fr=B.useProgram(Mt,Xr),Cn=gr||Fr.program!==Zr,vi=B.style.map.terrain&&B.style.map.terrain.getTerrainData(lr),Oi=dt.constantOr(null);if(Oi&&cr.imageAtlas){const ii=cr.imageAtlas,Ji=ii.patternPositions[Oi.to.toString()],fo=ii.patternPositions[Oi.from.toString()];Ji&&fo&&Xr.setConstantPatternPositions(Ji,fo)}const ea=Vt.getProjectionData({overscaledTileID:lr,applyGlobeMatrix:!Te,applyTerrainMatrix:!0}),Xi=Vt.getPixelScale(),Ki=_t?Ya(B,cr,te,Xi,Et):ut?ms(B,cr,te,Xi,ut,Et):Pt?lo(B,cr,te,Xi,fr.lineClipsArray.length):ll(B,cr,te,Xi);if(_t)Ot.activeTexture.set(Tt.TEXTURE0),cr.imageAtlasTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),Xr.updatePaintBuffers(Et);else if(ut&&(Cn||B.lineAtlas.dirty))Ot.activeTexture.set(Tt.TEXTURE0),B.lineAtlas.bind(Ot);else if(Pt){const ii=fr.gradients[te.id];let Ji=ii.texture;if(te.gradientVersion!==ii.version){let fo=256;if(te.stepInterpolant){const Oo=X.getSource().maxzoom,as=lr.canonical.z===Oo?Math.ceil(1<<B.transform.maxZoom-lr.canonical.z):1;fo=a.ah(a.c3(fr.maxLineLength/a.$*1024*as),256,Ot.maxTextureSize)}ii.gradient=a.c4({expression:te.gradientExpression(),evaluationKey:"lineProgress",resolution:fo,image:ii.gradient||void 0,clips:fr.lineClipsArray}),ii.texture?ii.texture.update(ii.gradient):ii.texture=new a.T(Ot,ii.gradient,Tt.RGBA),ii.version=te.gradientVersion,Ji=ii.texture}Ot.activeTexture.set(Tt.TEXTURE0),Ji.bind(te.stepInterpolant?Tt.NEAREST:Tt.LINEAR,Tt.CLAMP_TO_EDGE)}const sa=B.stencilModeForClipping(lr);Fr.draw(Ot,Tt.TRIANGLES,We,sa,ct,Mn.disabled,Ki,vi,ea,te.id,fr.layoutVertexBuffer,fr.indexBuffer,fr.segments,te.paint,B.transform.zoom,Xr,fr.layoutVertexBuffer2),gr=!1}})(s,h,w,C,L):a.cf(w)?(function(B,X,te,ce,me){const Te=te.paint.get("fill-color"),Ce=te.paint.get("fill-opacity");if(Ce.constantOr(1)===0)return;const{isRenderingToTexture:Fe}=me,We=B.colorModeForRenderPass(),ct=te.paint.get("fill-pattern"),ut=B.opaquePassEnabledForLayer()&&!ct.constantOr(1)&&Te.constantOr(a.bf.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===ut){const dt=B.getDepthModeForSublayer(1,B.renderPass==="opaque"?En.ReadWrite:En.ReadOnly);th(B,X,te,ce,dt,We,!1,Fe)}if(B.renderPass==="translucent"&&te.paint.get("fill-antialias")){const dt=B.getDepthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,En.ReadOnly);th(B,X,te,ce,dt,We,!0,Fe)}})(s,h,w,C,L):a.cg(w)?(function(B,X,te,ce,me){const Te=te.paint.get("fill-extrusion-opacity");if(Te===0)return;const{isRenderingToTexture:Ce}=me;if(B.renderPass==="translucent"){const Fe=new En(B.context.gl.LEQUAL,En.ReadWrite,B.depthRangeFor3D);if(Te!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))Zh(B,X,te,ce,Fe,jn.disabled,An.disabled,Ce),Zh(B,X,te,ce,Fe,B.stencilModeFor3D(),B.colorModeForRenderPass(),Ce);else{const We=B.colorModeForRenderPass();Zh(B,X,te,ce,Fe,jn.disabled,We,Ce)}}})(s,h,w,C,L):a.ch(w)?(function(B,X,te,ce,me){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=me,Ce=B.context,Fe=B.style.projection.useSubdivision,We=B.getDepthModeForSublayer(0,En.ReadOnly),ct=B.colorModeForRenderPass();if(B.renderPass==="offscreen")(function(ut,dt,_t,Pt,Et,Mt,Ot){const Tt=ut.context,Vt=Tt.gl;for(const gr of _t){const lr=dt.getTile(gr),cr=lr.dem;if(!cr||!cr.data||!lr.needsHillshadePrepare)continue;const fr=cr.dim,Xr=cr.stride,Zr=cr.getPixels();if(Tt.activeTexture.set(Vt.TEXTURE1),Tt.pixelStoreUnpackPremultiplyAlpha.set(!1),lr.demTexture=lr.demTexture||ut.getTileTexture(Xr),lr.demTexture){const Cn=lr.demTexture;Cn.update(Zr,{premultiply:!1}),Cn.bind(Vt.NEAREST,Vt.CLAMP_TO_EDGE)}else lr.demTexture=new a.T(Tt,Zr,Vt.RGBA,{premultiply:!1}),lr.demTexture.bind(Vt.NEAREST,Vt.CLAMP_TO_EDGE);Tt.activeTexture.set(Vt.TEXTURE0);let Fr=lr.fbo;if(!Fr){const Cn=new a.T(Tt,{width:fr,height:fr,data:null},Vt.RGBA);Cn.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE),Fr=lr.fbo=Tt.createFramebuffer(fr,fr,!0,!1),Fr.colorAttachment.set(Cn.texture)}Tt.bindFramebuffer.set(Fr.framebuffer),Tt.viewport.set([0,0,fr,fr]),ut.useProgram("hillshadePrepare").draw(Tt,Vt.TRIANGLES,Et,Mt,Ot,Mn.disabled,fu(lr.tileID,cr),null,null,Pt.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments),lr.needsHillshadePrepare=!1}})(B,X,ce,te,We,jn.disabled,ct),Ce.viewport.set([0,0,B.width,B.height]);else if(B.renderPass==="translucent")if(Fe){const[ut,dt,_t]=B.stencilConfigForOverlapTwoPass(ce);Wc(B,X,te,_t,ut,We,ct,!1,Te),Wc(B,X,te,_t,dt,We,ct,!0,Te)}else{const[ut,dt]=B.getStencilConfigForOverlapAndUpdateStencilID(ce);Wc(B,X,te,dt,ut,We,ct,!1,Te)}})(s,h,w,C,L):a.ci(w)?(function(B,X,te,ce,me){if(B.renderPass!=="translucent"||!ce.length)return;const{isRenderingToTexture:Te}=me,Ce=B.style.projection.useSubdivision,Fe=B.getDepthModeForSublayer(0,En.ReadOnly),We=B.colorModeForRenderPass();if(Ce){const[ct,ut,dt]=B.stencilConfigForOverlapTwoPass(ce);ff(B,X,te,dt,ct,Fe,We,!1,Te),ff(B,X,te,dt,ut,Fe,We,!0,Te)}else{const[ct,ut]=B.getStencilConfigForOverlapAndUpdateStencilID(ce);ff(B,X,te,ut,ct,Fe,We,!1,Te)}})(s,h,w,C,L):a.cj(w)?(function(B,X,te,ce,me){if(B.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!ce.length)return;const{isRenderingToTexture:Te}=me,Ce=X.getSource(),Fe=B.style.projection.useSubdivision;if(Ce instanceof st)mu(B,X,te,ce,null,!1,!1,Ce.tileCoords,Ce.flippedWindingOrder,Te);else if(Fe){const[We,ct,ut]=B.stencilConfigForOverlapTwoPass(ce);mu(B,X,te,ut,We,!1,!0,Cd,!1,Te),mu(B,X,te,ut,ct,!0,!0,Cd,!1,Te)}else{const[We,ct]=B.getStencilConfigForOverlapAndUpdateStencilID(ce);mu(B,X,te,ct,We,!1,!0,Cd,!1,Te)}})(s,h,w,C,L):a.ck(w)?(function(B,X,te,ce,me){const Te=te.paint.get("background-color"),Ce=te.paint.get("background-opacity");if(Ce===0)return;const{isRenderingToTexture:Fe}=me,We=B.context,ct=We.gl,ut=B.style.projection,dt=B.transform,_t=dt.tileSize,Pt=te.paint.get("background-pattern");if(B.isPatternMissing(Pt))return;const Et=!Pt&&Te.a===1&&Ce===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Et)return;const Mt=jn.disabled,Ot=B.getDepthModeForSublayer(0,Et==="opaque"?En.ReadWrite:En.ReadOnly),Tt=B.colorModeForRenderPass(),Vt=B.useProgram(Pt?"backgroundPattern":"background"),gr=ce||bt(dt,{tileSize:_t,terrain:B.style.map.terrain});Pt&&(We.activeTexture.set(ct.TEXTURE0),B.imageManager.bind(B.context));const lr=te.getCrossfadeParameters();for(const cr of gr){const fr=dt.getProjectionData({overscaledTileID:cr,applyGlobeMatrix:!Fe,applyTerrainMatrix:!0}),Xr=Pt?dl(Ce,B,Pt,{tileID:cr,tileSize:_t},lr):gs(Ce,Te),Zr=B.style.map.terrain&&B.style.map.terrain.getTerrainData(cr),Fr=ut.getMeshFromTileID(We,cr.canonical,!1,!0,"raster");Vt.draw(We,ct.TRIANGLES,Ot,Mt,Tt,Mn.backCCW,Xr,Zr,fr,te.id,Fr.vertexBuffer,Fr.indexBuffer,Fr.segments)}})(s,0,w,C,L):a.cl(w)&&(function(B,X,te,ce){const{isRenderingGlobe:me}=ce,Te=B.context,Ce=te.implementation,Fe=B.style.projection,We=B.transform,ct=We.getProjectionDataForCustomLayer(me),ut={farZ:We.farZ,nearZ:We.nearZ,fov:We.fov*Math.PI/180,modelViewProjectionMatrix:We.modelViewProjectionMatrix,projectionMatrix:We.projectionMatrix,shaderData:{variantName:Fe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Fe.shaderPreludeCode.vertexSource}`,define:Fe.shaderDefine},defaultProjectionData:ct},dt=Ce.renderingMode?Ce.renderingMode:"2d";if(B.renderPass==="offscreen"){const _t=Ce.prerender;_t&&(B.setCustomLayerDefaults(),Te.setColorMode(B.colorModeForRenderPass()),_t.call(Ce,Te.gl,ut),Te.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),Te.setColorMode(B.colorModeForRenderPass()),Te.setStencilMode(jn.disabled);const _t=dt==="3d"?B.getDepthModeFor3D():B.getDepthModeForSublayer(0,En.ReadOnly);Te.setDepthMode(_t),Ce.render(Te.gl,ut),Te.setDirty(),B.setBaseState(),Te.bindFramebuffer.set(null)}})(s,0,w,L))}saveTileTexture(s){const h=this._tileTextures[s.size[0]];h?h.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const h=this._tileTextures[s];return h&&h.length>0?h.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const h=this.imageManager.getPattern(s.from.toString()),w=this.imageManager.getPattern(s.to.toString());return!h||!w}useProgram(s,h,w=!1,C=[]){this.cache=this.cache||{};const L=!!this.style.map.terrain,B=this.style.projection,X=w?Rt.projectionMercator:B.shaderPreludeCode,te=w?qr:B.shaderDefine,ce=s+(h?h.cacheKey:"")+`/${w?Br:B.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(L?"/terrain":"")+(C?`/${C.join("/")}`:"");return this.cache[ce]||(this.cache[ce]=new Zs(this.context,Rt[s],h,ys[s],this._showOverdrawInspector,L,X,te,C)),this.cache[ce]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:h}=this.context.gl;return this.width!==s||this.height!==h}}function ts(A,s){let h,w=!1,C=null,L=null;const B=()=>{C=null,w&&(A.apply(L,h),C=setTimeout(B,s),w=!1)};return(...X)=>(w=!0,L=this,h=X,C||B(),C)}class ih{constructor(s){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let w;return h.split("&").map((C=>C.split("="))).forEach((C=>{C[0]===this._hashName&&(w=C)})),(w&&w[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(!this._isValidHash(h))return!1;const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:w,pitch:+(h[4]||0)}),!0},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{const h=this._getCurrentHash();if(h.length===0)return;const w=h.join("/");let C=w;C.split("&").length>0&&(C=C.split("&")[0]),this._hashName&&(C=`${this._hashName}=${w}`);let L=window.location.hash.replace(C,"");L.startsWith("#&")?L=L.slice(0,1)+L.slice(2):L==="#"&&(L="");let B=window.location.href.replace(/(#.+)?$/,L);B=B.replace("&&","&"),window.history.replaceState(window.history.state,null,B)},this._updateHash=ts(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const h=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,C=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,C),B=Math.round(h.lng*L)/L,X=Math.round(h.lat*L)/L,te=this._map.getBearing(),ce=this._map.getPitch();let me="";if(me+=s?`/${B}/${X}/${w}`:`${w}/${X}/${B}`,(te||ce)&&(me+="/"+Math.round(10*te)/10),ce&&(me+=`/${Math.round(ce)}`),this._hashName){const Te=this._hashName;let Ce=!1;const Fe=window.location.hash.slice(1).split("&").map((We=>{const ct=We.split("=")[0];return ct===Te?(Ce=!0,`${ct}=${me}`):We})).filter((We=>We));return Ce||Fe.push(`${Te}=${me}`),`#${Fe.join("&")}`}return`#${me}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new a.S(+s[2],+s[1])}catch{return!1}const h=+s[0],w=+(s[3]||0),C=+(s[4]||0);return h>=this._map.getMinZoom()&&h<=this._map.getMaxZoom()&&w>=-180&&w<=180&&C>=this._map.getMinPitch()&&C<=this._map.getMaxPitch()}}const Qu={linearity:.3,easing:a.cm(0,0,.3,1)},ah=a.e({deceleration:2500,maxSpeed:1400},Qu),tp=a.e({deceleration:20,maxSpeed:1400},Qu),rp=a.e({deceleration:1e3,maxSpeed:360},Qu),np=a.e({deceleration:1e3,maxSpeed:90},Qu),bm=a.e({deceleration:1e3,maxSpeed:360},Qu);class hf{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:x.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,h=x.now();for(;s.length>0&&h-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:L}of this._inertiaBuffer)h.zoom+=L.zoomDelta||0,h.bearing+=L.bearingDelta||0,h.pitch+=L.pitchDelta||0,h.roll+=L.rollDelta||0,L.panDelta&&h.pan._add(L.panDelta),L.around&&(h.around=L.around),L.pinchAround&&(h.pinchAround=L.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(h.pan.mag()){const L=Mu(h.pan.mag(),w,a.e({},ah,s||{})),B=h.pan.mult(L.amount/h.pan.mag()),X=this._map.cameraHelper.handlePanInertia(B,this._map.transform);C.center=X.easingCenter,C.offset=X.easingOffset,ml(C,L)}if(h.zoom){const L=Mu(h.zoom,w,tp);C.zoom=this._map.transform.zoom+L.amount,ml(C,L)}if(h.bearing){const L=Mu(h.bearing,w,rp);C.bearing=this._map.transform.bearing+a.ah(L.amount,-179,179),ml(C,L)}if(h.pitch){const L=Mu(h.pitch,w,np);C.pitch=this._map.transform.pitch+L.amount,ml(C,L)}if(h.roll){const L=Mu(h.roll,w,bm);C.roll=this._map.transform.roll+a.ah(L.amount,-179,179),ml(C,L)}if(C.zoom||C.bearing){const L=h.pinchAround===void 0?h.around:h.pinchAround;C.around=L?this._map.unproject(L):this._map.getCenter()}return this.clear(),a.e(C,{noMoveStart:!0})}}function ml(A,s){(!A.duration||A.duration<s.duration)&&(A.duration=s.duration,A.easing=s.easing)}function Mu(A,s,h){const{maxSpeed:w,linearity:C,deceleration:L}=h,B=a.ah(A*C/(s/1e3),-w,w),X=Math.abs(B)/(L*C);return{easing:h.easing,duration:1e3*X,amount:B*(X/2)}}class Fs extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,h,w,C={}){w=w instanceof MouseEvent?w:new MouseEvent(s,w);const L=b.mousePos(h.getCanvas(),w),B=h.unproject(L);super(s,a.e({point:L,lngLat:B,originalEvent:w},C)),this._defaultPrevented=!1,this.target=h}}class Td extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,h,w){const C=s==="touchend"?w.changedTouches:w.touches,L=b.touchPos(h.getCanvasContainer(),C),B=L.map((te=>h.unproject(te))),X=L.reduce(((te,ce,me,Te)=>te.add(ce.div(Te.length))),new a.P(0,0));super(s,{points:L,point:X,lngLats:B,lngLat:h.unproject(X),originalEvent:w}),this._defaultPrevented=!1}}class oh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,h,w){super(s,{originalEvent:w}),this._defaultPrevented=!1}}class _m{constructor(s,h){this._map=s,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new oh(s.type,this._map,s))}mousedown(s,h){return this._mousedownPos=h,this._firePreventable(new Fs(s.type,this._map,s))}mouseup(s){this._map.fire(new Fs(s.type,this._map,s))}click(s,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Fs(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Fs(s.type,this._map,s))}mouseover(s){this._map.fire(new Fs(s.type,this._map,s))}mouseout(s){this._map.fire(new Fs(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Td(s.type,this._map,s))}touchmove(s){this._map.fire(new Td(s.type,this._map,s))}touchend(s){this._map.fire(new Td(s.type,this._map,s))}touchcancel(s){this._map.fire(new Td(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xm{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Fs(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Fs(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pd{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(a.P.convert(s),this._map.terrain)}}class ip{constructor(s,h){this._map=s,this._tr=new Pd(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,h){this.isEnabled()&&s.shiftKey&&s.button===0&&(b.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(s,h){if(!this._active)return;const w=h;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=w,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const L=Math.min(C.x,w.x),B=Math.max(C.x,w.x),X=Math.min(C.y,w.y),te=Math.max(C.y,w.y);b.setTransform(this._box,`translate(${L}px,${X}px)`),this._box.style.width=B-L+"px",this._box.style.height=te-X+"px"}mouseupWindow(s,h){if(!this._active||s.button!==0)return;const w=this._startPos,C=h;if(this.reset(),b.suppressClick(),w.x!==C.x||w.y!==C.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:s})),{cameraAnimation:L=>L.fitScreenCoordinates(w,C,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,h){return this._map.fire(new a.l(s,{originalEvent:h}))}}function Id(A,s){if(A.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${A.length}, points ${s.length}`);const h={};for(let w=0;w<A.length;w++)h[A[w].identifier]=s[w];return h}class wm{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,h,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),w.length===this.numTouches&&(this.centroid=(function(C){const L=new a.P(0,0);for(const B of C)L._add(B);return L.div(C.length)})(h),this.touches=Id(w,h)))}touchmove(s,h,w){if(this.aborted||!this.centroid)return;const C=Id(w,h);for(const L in this.touches){const B=C[L];(!B||B.dist(this.touches[L])>30)&&(this.aborted=!0)}}touchend(s,h,w){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class Qs{constructor(s){this.singleTap=new wm(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,h,w){this.singleTap.touchstart(s,h,w)}touchmove(s,h,w){this.singleTap.touchmove(s,h,w)}touchend(s,h,w){const C=this.singleTap.touchend(s,h,w);if(C){const L=s.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(C)<30;if(L&&B||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class gl{constructor(s){this._tr=new Pd(s),this._zoomIn=new Qs({numTouches:1,numTaps:2}),this._zoomOut=new Qs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,h,w){this._zoomIn.touchstart(s,h,w),this._zoomOut.touchstart(s,h,w)}touchmove(s,h,w){this._zoomIn.touchmove(s,h,w),this._zoomOut.touchmove(s,h,w)}touchend(s,h,w){const C=this._zoomIn.touchend(s,h,w),L=this._zoomOut.touchend(s,h,w),B=this._tr;return C?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(C)},{originalEvent:s})}):L?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(L)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kd{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const h=this._moveFunction(...s);if(h.bearingDelta||h.pitchDelta||h.rollDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(s,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(h)?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,h){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const C=Array.isArray(h)?h[0]:h;return!this._moved&&C.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=C,this._move(w,C))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&b.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const gu=0,Xc=2,V={[gu]:1,[Xc]:2};class K{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const h=b.mouseButton(s);this._eventButton=h}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!(function(h,w){const C=V[w];return h.buttons===void 0||(h.buttons&C)!==C})(s,this._eventButton)}isValidEndEvent(s){return b.mouseButton(s)===this._eventButton}}class he{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class ke{constructor(s=new K({checkCorrectEvent:()=>!0}),h=new he){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=h}_executeRelevantHandler(s,h,w){return s instanceof MouseEvent?h(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?w(s):void 0}startMove(s){this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.startMove(h)),(h=>this.oneFingerTouchMoveStateManager.startMove(h)))}endMove(s){this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.endMove(h)),(h=>this.oneFingerTouchMoveStateManager.endMove(h)))}isValidStartEvent(s){return this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.isValidStartEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidStartEvent(h)))}isValidMoveEvent(s){return this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.isValidMoveEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(h)))}isValidEndEvent(s){return this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.isValidEndEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidEndEvent(h)))}}const Ge=A=>{A.mousedown=A.dragStart,A.mousemoveWindow=A.dragMove,A.mouseup=A.dragEnd,A.contextmenu=s=>{s.preventDefault()}};class Je{constructor(s,h){this._clickTolerance=s.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,h,w){return this._calculateTransform(s,h,w)}touchmove(s,h,w){if(this._active){if(!this._shouldBePrevented(w.length))return s.preventDefault(),this._calculateTransform(s,h,w);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,h,w){this._calculateTransform(s,h,w),this._active&&this._shouldBePrevented(w.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,h,w){w.length>0&&(this._active=!0);const C=Id(w,h),L=new a.P(0,0),B=new a.P(0,0);let X=0;for(const ce in C){const me=C[ce],Te=this._touches[ce];Te&&(L._add(me),B._add(me.sub(Te)),X++,C[ce]=me)}if(this._touches=C,this._shouldBePrevented(X)||!B.mag())return;const te=B.div(X);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:L.div(X),panDelta:te}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,h,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([h[0],h[1]]))}touchmove(s,h,w){if(!this._firstTwoTouches)return;s.preventDefault();const[C,L]=this._firstTwoTouches,B=He(w,h,C),X=He(w,h,L);if(!B||!X)return;const te=this._aroundCenter?null:B.add(X).div(2);return this._move([B,X],te,s)}touchend(s,h,w){if(!this._firstTwoTouches)return;const[C,L]=this._firstTwoTouches,B=He(w,h,C),X=He(w,h,L);B&&X||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function He(A,s,h){for(let w=0;w<A.length;w++)if(A[w].identifier===h)return s[w]}function ht(A,s){return Math.log(A/s)/Math.LN2}class St extends tt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,h){const w=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(ht(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ht(this._distance,w),pinchAround:h}}}function qt(A,s){return 180*A.angleWith(s)/Math.PI}class hr extends tt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,h,w){const C=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:qt(this._vector,C),pinchAround:h}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const h=25/(Math.PI*this._minDiameter)*360,w=qt(s,this._startVector);return Math.abs(w)<h}}function wt(A){return Math.abs(A.y)>Math.abs(A.x)}class Qt extends tt{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,h,w){super.touchstart(s,h,w),this._currentTouchCount=w.length}_start(s){this._lastPoints=s,wt(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,h,w){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const C=s[0].sub(this._lastPoints[0]),L=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,L,w.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(C.y+L.y)/2*-.5}):void 0}gestureBeginsVertically(s,h,w){if(this._valid!==void 0)return this._valid;const C=s.mag()>=2,L=h.mag()>=2;if(!C&&!L)return;if(!C||!L)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const B=s.y>0==h.y>0;return wt(s)&&wt(h)&&B}}const jt={panStep:100,bearingStep:15,pitchStep:10};class Tr{constructor(s){this._tr=new Pd(s);const h=jt;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let h=0,w=0,C=0,L=0,B=0;switch(s.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:s.shiftKey?w=-1:(s.preventDefault(),L=-1);break;case 39:s.shiftKey?w=1:(s.preventDefault(),L=1);break;case 38:s.shiftKey?C=1:(s.preventDefault(),B=-1);break;case 40:s.shiftKey?C=-1:(s.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(w=0,C=0),{cameraAnimation:X=>{const te=this._tr;X.easeTo({duration:300,easeId:"keyboardHandler",easing:mr,zoom:h?Math.round(te.zoom)+h*(s.shiftKey?2:1):te.zoom,bearing:te.bearing+w*this._bearingStep,pitch:te.pitch+C*this._pitchStep,offset:[-L*this._panStep,-B*this._panStep],center:te.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mr(A){return A*(2-A)}const Ir=4.000244140625,Rr=1/450;class Yr{constructor(s,h){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=s,this._tr=new Pd(s),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Rr}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let h=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const w=x.now(),C=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,h!==0&&h%Ir==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(C*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),s.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=s,this._delta-=h,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=b.mousePos(this._map.getCanvas(),s),w=this._tr;this._aroundPoint=this._aroundCenter?w.transform.locationToScreenPoint(a.S.convert(w.center)):h,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const X=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=X),typeof this._targetZoom=="number"&&(this._targetZoom+=X)}if(this._delta!==0){const X=this._type==="wheel"&&Math.abs(this._delta)>Ir?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*X)));this._delta<0&&te!==0&&(te=1/te);const ce=typeof this._targetZoom!="number"?s.scale:a.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),a.ak(ce*te)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,w=this._startZoom,C=this._easing;let L,B=!1;if(this._type==="wheel"&&w&&C){const X=x.now()-this._lastWheelEventTime,te=Math.min((X+5)/200,1),ce=C(te);L=a.C.number(w,h,ce),te<1?this._frameId||(this._frameId=!0):B=!0}else L=h,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=L,{noInertia:!0,needsRenderFrame:!B,zoomDelta:L-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let h=a.co;if(this._prevEase){const w=this._prevEase,C=(x.now()-w.start)/w.duration,L=w.easing(C+.01)-w.easing(C),B=.27/Math.sqrt(L*L+1e-4)*.01,X=Math.sqrt(.0729-B*B);h=a.cm(B,X,.25,1)}return this._prevEase={start:x.now(),duration:s,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Vr{constructor(s,h){this._clickZoom=s,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $n{constructor(s){this._tr=new Pd(s),this.reset()}reset(){this._active=!1}dblclick(s,h){return s.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kn{constructor(){this._tap=new Qs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,h,w){if(!this._swipePoint)if(this._tapTime){const C=h[0],L=s.timeStamp-this._tapTime<500,B=this._tapPoint.dist(C)<30;L&&B?w.length>0&&(this._swipePoint=C,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(s,h,w)}touchmove(s,h,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const C=h[0],L=C.y-this._swipePoint.y;return this._swipePoint=C,s.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(s,h,w)}touchend(s,h,w){if(this._tapTime)this._swipePoint&&w.length===0&&this.reset();else{const C=this._tap.touchend(s,h,w);C&&(this._tapTime=s.timeStamp,this._tapPoint=C)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Si{constructor(s,h,w){this._el=s,this._mousePan=h,this._touchPan=w}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fn{constructor(s,h,w,C){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=h,this._mousePitch=w,this._mouseRoll=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class $i{constructor(s,h,w,C){this._el=s,this._touchZoom=h,this._touchRotate=w,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ro{constructor(s,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",s);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const w=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),C=document.createElement("div");C.className="maplibregl-desktop-message",C.textContent=h,this._container.appendChild(C);const L=document.createElement("div");L.className="maplibregl-mobile-message",L.textContent=w,this._container.appendChild(L),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,h){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:s,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ui=A=>A.zoom||A.drag||A.roll||A.pitch||A.rotate;class sn extends a.l{}function dn(A){return A.panDelta&&A.panDelta.mag()||A.zoomDelta||A.bearingDelta||A.pitchDelta||A.rollDelta}class io{constructor(s,h){this.handleWindowEvent=C=>{this.handleEvent(C,`${C.type}Window`)},this.handleEvent=(C,L)=>{if(C.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=C.type==="renderFrame"?void 0:C,X={needsRenderFrame:!1},te={},ce={};for(const{handlerName:Ce,handler:Fe,allowed:We}of this._handlers){if(!Fe.isEnabled())continue;let ct;if(this._blockedByActive(ce,We,Ce))Fe.reset();else if(Fe[L||C.type]){if(a.cp(C,L||C.type)){const ut=b.mousePos(this._map.getCanvas(),C);ct=Fe[L||C.type](C,ut)}else if(a.cq(C,L||C.type)){const ut=this._getMapTouches(C.touches),dt=b.touchPos(this._map.getCanvas(),ut);ct=Fe[L||C.type](C,dt,ut)}else a.cr(L||C.type)||(ct=Fe[L||C.type](C));this.mergeHandlerResult(X,te,ct,Ce,B),ct&&ct.needsRenderFrame&&this._triggerRenderFrame()}(ct||Fe.isActive())&&(ce[Ce]=Fe)}const me={};for(const Ce in this._previousActiveHandlers)ce[Ce]||(me[Ce]=B);this._previousActiveHandlers=ce,(Object.keys(me).length||dn(X))&&(this._changes.push([X,te,me]),this._triggerRenderFrame()),(Object.keys(ce).length||dn(X))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Te}=X;Te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Te(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hf(s),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,L,B]of this._listeners)b.addEventListener(C,L,C===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[s,h,w]of this._listeners)b.removeEventListener(s,h,s===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(s){const h=this._map,w=h.getCanvasContainer();this._add("mapEvent",new _m(h,s));const C=h.boxZoom=new ip(h,s);this._add("boxZoom",C),s.interactive&&s.boxZoom&&C.enable();const L=h.cooperativeGestures=new Ro(h,s.cooperativeGestures);this._add("cooperativeGestures",L),s.cooperativeGestures&&L.enable();const B=new gl(h),X=new $n(h);h.doubleClickZoom=new Vr(X,B),this._add("tapZoom",B),this._add("clickZoom",X),s.interactive&&s.doubleClickZoom&&h.doubleClickZoom.enable();const te=new kn;this._add("tapDragZoom",te);const ce=h.touchPitch=new Qt(h);this._add("touchPitch",ce),s.interactive&&s.touchPitch&&h.touchPitch.enable(s.touchPitch);const me=()=>h.project(h.getCenter()),Te=(function({enable:Et,clickTolerance:Mt,aroundCenter:Ot=!0,minPixelCenterThreshold:Tt=100,rotateDegreesPerPixelMoved:Vt=.8},gr){const lr=new K({checkCorrectEvent:cr=>b.mouseButton(cr)===0&&cr.ctrlKey||b.mouseButton(cr)===2&&!cr.ctrlKey});return new kd({clickTolerance:Mt,move:(cr,fr)=>{const Xr=gr();if(Ot&&Math.abs(Xr.y-cr.y)>Tt)return{bearingDelta:a.cn(new a.P(cr.x,fr.y),fr,Xr)};let Zr=(fr.x-cr.x)*Vt;return Ot&&fr.y<Xr.y&&(Zr=-Zr),{bearingDelta:Zr}},moveStateManager:lr,enable:Et,assignEvents:Ge})})(s,me),Ce=(function({enable:Et,clickTolerance:Mt,pitchDegreesPerPixelMoved:Ot=-.5}){const Tt=new K({checkCorrectEvent:Vt=>b.mouseButton(Vt)===0&&Vt.ctrlKey||b.mouseButton(Vt)===2});return new kd({clickTolerance:Mt,move:(Vt,gr)=>({pitchDelta:(gr.y-Vt.y)*Ot}),moveStateManager:Tt,enable:Et,assignEvents:Ge})})(s),Fe=(function({enable:Et,clickTolerance:Mt,rollDegreesPerPixelMoved:Ot=.3},Tt){const Vt=new K({checkCorrectEvent:gr=>b.mouseButton(gr)===2&&gr.ctrlKey});return new kd({clickTolerance:Mt,move:(gr,lr)=>{const cr=Tt();let fr=(lr.x-gr.x)*Ot;return lr.y<cr.y&&(fr=-fr),{rollDelta:fr}},moveStateManager:Vt,enable:Et,assignEvents:Ge})})(s,me);h.dragRotate=new Fn(s,Te,Ce,Fe),this._add("mouseRotate",Te,["mousePitch"]),this._add("mousePitch",Ce,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Fe,["mousePitch"]),s.interactive&&s.dragRotate&&h.dragRotate.enable();const We=(function({enable:Et,clickTolerance:Mt}){const Ot=new K({checkCorrectEvent:Tt=>b.mouseButton(Tt)===0&&!Tt.ctrlKey});return new kd({clickTolerance:Mt,move:(Tt,Vt)=>({around:Vt,panDelta:Vt.sub(Tt)}),activateOnStart:!0,moveStateManager:Ot,enable:Et,assignEvents:Ge})})(s),ct=new Je(s,h);h.dragPan=new Si(w,We,ct),this._add("mousePan",We),this._add("touchPan",ct,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&h.dragPan.enable(s.dragPan);const ut=new hr,dt=new St;h.touchZoomRotate=new $i(w,dt,ut,te),this._add("touchRotate",ut,["touchPan","touchZoom"]),this._add("touchZoom",dt,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&h.touchZoomRotate.enable(s.touchZoomRotate);const _t=h.scrollZoom=new Yr(h,(()=>this._triggerRenderFrame()));this._add("scrollZoom",_t,["mousePan"]),s.interactive&&s.scrollZoom&&h.scrollZoom.enable(s.scrollZoom);const Pt=h.keyboard=new Tr(h);this._add("keyboard",Pt),s.interactive&&s.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new xm(h))}_add(s,h,w){this._handlers.push({handlerName:s,handler:h,allowed:w}),this._handlersById[s]=h}stop(s){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ui(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,h,w){for(const C in s)if(C!==w&&(!h||h.indexOf(C)<0))return!0;return!1}_getMapTouches(s){const h=[];for(const w of s)this._el.contains(w.target)&&h.push(w);return h}mergeHandlerResult(s,h,w,C,L){if(!w)return;a.e(s,w);const B={handlerName:C,originalEvent:w.originalEvent||L};w.zoomDelta!==void 0&&(h.zoom=B),w.panDelta!==void 0&&(h.drag=B),w.rollDelta!==void 0&&(h.roll=B),w.pitchDelta!==void 0&&(h.pitch=B),w.bearingDelta!==void 0&&(h.rotate=B)}_applyChanges(){const s={},h={},w={};for(const[C,L,B]of this._changes)C.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(C.panDelta)),C.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+C.pitchDelta),C.rollDelta&&(s.rollDelta=(s.rollDelta||0)+C.rollDelta),C.around!==void 0&&(s.around=C.around),C.pinchAround!==void 0&&(s.pinchAround=C.pinchAround),C.noInertia&&(s.noInertia=C.noInertia),a.e(h,L),a.e(w,B);this._updateMapTransform(s,h,w),this._changes=[]}_updateMapTransform(s,h,w){const C=this._map,L=C._getTransformForUpdate(),B=C.terrain;if(!(dn(s)||B&&this._terrainMovement))return this._fireEvents(h,w,!0);C._stop(!0);let{panDelta:X,zoomDelta:te,bearingDelta:ce,pitchDelta:me,rollDelta:Te,around:Ce,pinchAround:Fe}=s;Fe!==void 0&&(Ce=Fe),Ce=Ce||C.transform.centerPoint,B&&!L.isPointOnMapSurface(Ce)&&(Ce=L.centerPoint);const We={panDelta:X,zoomDelta:te,rollDelta:Te,pitchDelta:me,bearingDelta:ce,around:Ce};this._map.cameraHelper.useGlobeControls&&!L.isPointOnMapSurface(Ce)&&(Ce=L.centerPoint);const ct=Ce.distSqr(L.centerPoint)<.01?L.center:L.screenPointToLocation(X?Ce.sub(X):Ce);B?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(We,L),this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?L.setCenter(L.screenPointToLocation(L.centerPoint.sub(X))):this._map.cameraHelper.handleMapControlsPan(We,L,ct):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(We,L,ct))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(We,L),this._map.cameraHelper.handleMapControlsPan(We,L,ct)),C._applyUpdatedTransform(L),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(h,w,!0)}_fireEvents(s,h,w){const C=ui(this._eventsInProgress),L=ui(s),B={};for(const Te in s){const{originalEvent:Ce}=s[Te];this._eventsInProgress[Te]||(B[`${Te}start`]=Ce),this._eventsInProgress[Te]=s[Te]}!C&&L&&this._fireEvent("movestart",L.originalEvent);for(const Te in B)this._fireEvent(Te,B[Te]);L&&this._fireEvent("move",L.originalEvent);for(const Te in s){const{originalEvent:Ce}=s[Te];this._fireEvent(Te,Ce)}const X={};let te;for(const Te in this._eventsInProgress){const{handlerName:Ce,originalEvent:Fe}=this._eventsInProgress[Te];this._handlersById[Ce].isActive()||(delete this._eventsInProgress[Te],te=h[Ce]||Fe,X[`${Te}end`]=te)}for(const Te in X)this._fireEvent(Te,X[Te]);const ce=ui(this._eventsInProgress),me=(C||L)&&!ce;if(me&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Te=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Te.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Te)}if(w&&me){this._updatingCamera=!0;const Te=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ce=Fe=>Fe!==0&&-this._bearingSnap<Fe&&Fe<this._bearingSnap;!Te||!Te.essential&&x.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:te})),Ce(this._map.getBearing())&&this._map.resetNorth()):(Ce(Te.bearing||this._map.getBearing())&&(Te.bearing=0),Te.freezeElevation=!0,this._map.easeTo(Te,{originalEvent:te})),this._updatingCamera=!1}}_fireEvent(s,h){this._map.fire(new a.l(s,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((s=>{delete this._frameId,this.handleEvent(new sn("renderFrame",{timeStamp:s})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class bi extends a.E{constructor(s,h,w){super(),this._renderFrameCallback=()=>{const C=Math.min((x.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=w.bearingSnap,this.cameraHelper=h,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(s,h){s.apply(this.transform),this.transform=s,this.cameraHelper=h}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,h){return this.jumpTo({center:s},h)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,h){return this.jumpTo({elevation:s},h),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,h,w){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},h),w)}panTo(s,h,w){return this.easeTo(a.e({center:s},h),w)}getZoom(){return this.transform.zoom}setZoom(s,h){return this.jumpTo({zoom:s},h),this}zoomTo(s,h,w){return this.easeTo(a.e({zoom:s},h),w)}zoomIn(s,h){return this.zoomTo(this.getZoom()+1,s,h),this}zoomOut(s,h){return this.zoomTo(this.getZoom()-1,s,h),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,h){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)).fire(new a.l("moveend",h))),this}getBearing(){return this.transform.bearing}setBearing(s,h){return this.jumpTo({bearing:s},h),this}getPadding(){return this.transform.padding}setPadding(s,h){return this.jumpTo({padding:s},h),this}rotateTo(s,h,w){return this.easeTo(a.e({bearing:s},h),w)}resetNorth(s,h){return this.rotateTo(0,a.e({duration:1e3},s),h),this}resetNorthPitch(s,h){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},s),h),this}snapToNorth(s,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,h):this}getPitch(){return this.transform.pitch}setPitch(s,h){return this.jumpTo({pitch:s},h),this}getRoll(){return this.transform.roll}setRoll(s,h){return this.jumpTo({roll:s},h),this}cameraForBounds(s,h){s=It.convert(s).adjustAntiMeridian();const w=h&&h.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),w,h)}_cameraForBoxAndBearing(s,h,w,C){const L={top:0,bottom:0,right:0,left:0};if(typeof(C=a.e({padding:L,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const ce=C.padding;C.padding={top:ce,bottom:ce,right:ce,left:ce}}const B=a.e(L,C.padding);C.padding=B;const X=this.transform,te=new It(s,h);return this.cameraHelper.cameraForBoxAndBearing(C,B,te,w,X)}fitBounds(s,h,w){return this._fitInternal(this.cameraForBounds(s,h),h,w)}fitScreenCoordinates(s,h,w,C,L){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(s)),this.transform.screenPointToLocation(a.P.convert(h)),w,C),C,L)}_fitInternal(s,h,w){return s?(delete(h=a.e(s,h)).padding,h.linear?this.easeTo(h,w):this.flyTo(h,w)):this}jumpTo(s,h){this.stop();const w=this._getTransformForUpdate();let C=!1,L=!1,B=!1;const X=w.zoom;this.cameraHelper.handleJumpToCenterZoom(w,s);const te=w.zoom!==X;return"elevation"in s&&w.elevation!==+s.elevation&&w.setElevation(+s.elevation),"bearing"in s&&w.bearing!==+s.bearing&&(C=!0,w.setBearing(+s.bearing)),"pitch"in s&&w.pitch!==+s.pitch&&(L=!0,w.setPitch(+s.pitch)),"roll"in s&&w.roll!==+s.roll&&(B=!0,w.setRoll(+s.roll)),s.padding==null||w.isPaddingEqual(s.padding)||w.setPadding(s.padding),this._applyUpdatedTransform(w),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)),te&&this.fire(new a.l("zoomstart",h)).fire(new a.l("zoom",h)).fire(new a.l("zoomend",h)),C&&this.fire(new a.l("rotatestart",h)).fire(new a.l("rotate",h)).fire(new a.l("rotateend",h)),L&&this.fire(new a.l("pitchstart",h)).fire(new a.l("pitch",h)).fire(new a.l("pitchend",h)),B&&this.fire(new a.l("rollstart",h)).fire(new a.l("roll",h)).fire(new a.l("rollend",h)),this.fire(new a.l("moveend",h))}calculateCameraOptionsFromTo(s,h,w,C=0){const L=a.a1.fromLngLat(s,h),B=a.a1.fromLngLat(w,C),X=B.x-L.x,te=B.y-L.y,ce=B.z-L.z,me=Math.hypot(X,te,ce);if(me===0)throw new Error("Can't calculate camera options with same From and To");const Te=Math.hypot(X,te),Ce=a.ak(this.transform.cameraToCenterDistance/me/this.transform.tileSize),Fe=180*Math.atan2(X,-te)/Math.PI;let We=180*Math.acos(Te/me)/Math.PI;return We=ce<0?90-We:90+We,{center:B.toLngLat(),elevation:C,zoom:Ce,pitch:We,bearing:Fe}}calculateCameraOptionsFromCameraLngLatAltRotation(s,h,w,C,L){const B=this.transform.calculateCenterFromCameraLngLatAlt(s,h,w,C);return{center:B.center,elevation:B.elevation,zoom:B.zoom,bearing:w,pitch:C,roll:L}}easeTo(s,h){this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.co},s)).animate===!1||!s.essential&&x.prefersReducedMotion)&&(s.duration=0);const w=this._getTransformForUpdate(),C=this.getBearing(),L=w.pitch,B=w.roll,X="bearing"in s?this._normalizeBearing(s.bearing,C):C,te="pitch"in s?+s.pitch:L,ce="roll"in s?this._normalizeBearing(s.roll,B):B,me="padding"in s?s.padding:w.padding,Te=a.P.convert(s.offset);let Ce,Fe;s.around&&(Ce=a.S.convert(s.around),Fe=w.locationToScreenPoint(Ce));const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ct=this.cameraHelper.handleEaseTo(w,{bearing:X,pitch:te,roll:ce,padding:me,around:Ce,aroundPoint:Fe,offsetAsPoint:Te,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||C!==X,this._pitching=this._pitching||te!==L,this._rolling=this._rolling||ce!==B,this._padding=!w.isPaddingEqual(me),this._zooming=this._zooming||ct.isZooming,this._easeId=s.easeId,this._prepareEase(h,s.noMoveStart,We),this.terrain&&this._prepareElevation(ct.elevationCenter),this._ease((ut=>{ct.easeFunc(ut),this.terrain&&!s.freezeElevation&&this._updateElevation(ut),this._applyUpdatedTransform(w),this._fireMoveEvents(h)}),(ut=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(h,ut)}),s),this}_prepareEase(s,h,w={}){this._moving=!0,h||w.moving||this.fire(new a.l("movestart",s)),this._zooming&&!w.zooming&&this.fire(new a.l("zoomstart",s)),this._rotating&&!w.rotating&&this.fire(new a.l("rotatestart",s)),this._pitching&&!w.pitching&&this.fire(new a.l("pitchstart",s)),this._rolling&&!w.rolling&&this.fire(new a.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&h!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(w-(h-(w*s+this._elevationStart))/(1-s)),this._elevationTarget=h}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const h=s.getCameraLngLat(),w=s.getCameraAltitude(),C=this.terrain?this.terrain.getElevationForLngLatZoom(h,s.zoom):0;if(w<C){const L=this.calculateCameraOptionsFromTo(h,C,s.center,s.elevation);return{pitch:L.pitch,zoom:L.zoom}}return{}}_applyUpdatedTransform(s){const h=[];if(h.push((C=>this._elevateCameraIfInsideTerrain(C))),this.transformCameraUpdate&&h.push((C=>this.transformCameraUpdate(C))),!h.length)return;const w=s.clone();for(const C of h){const L=w.clone(),{center:B,zoom:X,roll:te,pitch:ce,bearing:me,elevation:Te}=C(L);B&&L.setCenter(B),Te!==void 0&&L.setElevation(Te),X!==void 0&&L.setZoom(X),te!==void 0&&L.setRoll(te),ce!==void 0&&L.setPitch(ce),me!==void 0&&L.setBearing(me),w.apply(L)}this.transform.apply(w)}_fireMoveEvents(s){this.fire(new a.l("move",s)),this._zooming&&this.fire(new a.l("zoom",s)),this._rotating&&this.fire(new a.l("rotate",s)),this._pitching&&this.fire(new a.l("pitch",s)),this._rolling&&this.fire(new a.l("roll",s))}_afterEase(s,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const w=this._zooming,C=this._rotating,L=this._pitching,B=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,w&&this.fire(new a.l("zoomend",s)),C&&this.fire(new a.l("rotateend",s)),L&&this.fire(new a.l("pitchend",s)),B&&this.fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}flyTo(s,h){if(!s.essential&&x.prefersReducedMotion){const fr=a.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(fr,h)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},s);const w=this._getTransformForUpdate(),C=w.bearing,L=w.pitch,B=w.roll,X=w.padding,te="bearing"in s?this._normalizeBearing(s.bearing,C):C,ce="pitch"in s?+s.pitch:L,me="roll"in s?this._normalizeBearing(s.roll,B):B,Te="padding"in s?s.padding:w.padding,Ce=a.P.convert(s.offset);let Fe=w.centerPoint.add(Ce);const We=w.screenPointToLocation(Fe),ct=this.cameraHelper.handleFlyTo(w,{bearing:te,pitch:ce,roll:me,padding:Te,locationAtOffset:We,offsetAsPoint:Ce,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let ut=s.curve;const dt=Math.max(w.width,w.height),_t=dt/ct.scaleOfZoom,Pt=ct.pixelPathLength;typeof ct.scaleOfMinZoom=="number"&&(ut=Math.sqrt(dt/ct.scaleOfMinZoom/Pt*2));const Et=ut*ut;function Mt(fr){const Xr=(_t*_t-dt*dt+(fr?-1:1)*Et*Et*Pt*Pt)/(2*(fr?_t:dt)*Et*Pt);return Math.log(Math.sqrt(Xr*Xr+1)-Xr)}function Ot(fr){return(Math.exp(fr)-Math.exp(-fr))/2}function Tt(fr){return(Math.exp(fr)+Math.exp(-fr))/2}const Vt=Mt(!1);let gr=function(fr){return Tt(Vt)/Tt(Vt+ut*fr)},lr=function(fr){return dt*((Tt(Vt)*(Ot(Xr=Vt+ut*fr)/Tt(Xr))-Ot(Vt))/Et)/Pt;var Xr},cr=(Mt(!0)-Vt)/ut;if(Math.abs(Pt)<2e-6||!isFinite(cr)){if(Math.abs(dt-_t)<1e-6)return this.easeTo(s,h);const fr=_t<dt?-1:1;cr=Math.abs(Math.log(_t/dt))/ut,lr=()=>0,gr=Xr=>Math.exp(fr*ut*Xr)}return s.duration="duration"in s?+s.duration:1e3*cr/("screenSpeed"in s?+s.screenSpeed/ut:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=C!==te,this._pitching=ce!==L,this._rolling=me!==B,this._padding=!w.isPaddingEqual(Te),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(ct.targetCenter),this._ease((fr=>{const Xr=fr*cr,Zr=1/gr(Xr),Fr=lr(Xr);this._rotating&&w.setBearing(a.C.number(C,te,fr)),this._pitching&&w.setPitch(a.C.number(L,ce,fr)),this._rolling&&w.setRoll(a.C.number(B,me,fr)),this._padding&&(w.interpolatePadding(X,Te,fr),Fe=w.centerPoint.add(Ce)),ct.easeFunc(fr,Zr,Fr,Fe),this.terrain&&!s.freezeElevation&&this._updateElevation(fr),this._applyUpdatedTransform(w),this._fireMoveEvents(h)}),(()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(h)}),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,h){var w;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,h)}return s||(w=this.handlers)===null||w===void 0||w.stop(!1),this}_ease(s,h,w){w.animate===!1||w.duration===0?(s(1),h()):(this._easeStart=x.now(),this._easeOptions=w,this._onEaseFrame=s,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,h){s=a.aO(s,-180,180);const w=Math.abs(s-h);return Math.abs(s-360-h)<w&&(s-=360),Math.abs(s+360-h)<w&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(s),this.transform.tileZoom):null}}const Vi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Pa{constructor(s=Vi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,h){const w=this._map._getUIString(`AttributionControl.${h}`);s.title=w,s.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map((C=>typeof C!="string"?"":C))):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const h=this._map.style.sourceCaches;for(const C in h){const L=h[C];if(L.used||L.usedForTerrain){const B=L.getSource();B.attribution&&s.indexOf(B.attribution)<0&&s.push(B.attribution)}}s=s.filter((C=>String(C).trim())),s.sort(((C,L)=>C.length-L.length)),s=s.filter(((C,L)=>{for(let B=L+1;B<s.length;B++)if(s[B].indexOf(C)>=0)return!1;return!0}));const w=s.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,s.length?(this._innerContainer.innerHTML=b.sanitize(w),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class rs{constructor(s={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const w=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const h=b.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Za{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const h=++this._id;return this._queue.push({callback:s,id:h,cancelled:!1}),h}remove(s){const h=this._currentlyRunning,w=h?this._queue.concat(h):this._queue;for(const C of w)if(C.id===s)return void(C.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const w of h)if(!w.cancelled&&(w.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var za=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class hn extends a.E{constructor(s){super(),this._lastTilesetChange=x.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,h){this.sourceCache.update(s,h),this._renderableTilesKeys=[];const w={};for(const C of bt(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))w[C.key]=!0,this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.terrainRttPosMatrix32f=new Float64Array(16),a.bY(C.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[C.key]=new rr(C,this.tileSize),this._lastTilesetChange=x.now());for(const C in this._tiles)w[C]||delete this._tiles[C]}freeRtt(s){for(const h in this._tiles){const w=this._tiles[h];(!s||w.tileID.equals(s)||w.tileID.isChildOf(s)||s.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((s=>this.getTileByID(s)))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,h){return h?this._getTerrainCoordsForTileRanges(s,h):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const h={};for(const w of this._renderableTilesKeys){const C=this._tiles[w].tileID,L=s.clone(),B=a.ba();if(C.canonical.equals(s.canonical))a.bY(B,0,a.$,a.$,0,0,1);else if(C.canonical.isChildOf(s.canonical)){const X=C.canonical.z-s.canonical.z,te=C.canonical.x-(C.canonical.x>>X<<X),ce=C.canonical.y-(C.canonical.y>>X<<X),me=a.$>>X;a.bY(B,0,me,me,0,0,1),a.M(B,B,[-te*me,-ce*me,0])}else{if(!s.canonical.isChildOf(C.canonical))continue;{const X=s.canonical.z-C.canonical.z,te=s.canonical.x-(s.canonical.x>>X<<X),ce=s.canonical.y-(s.canonical.y>>X<<X),me=a.$>>X;a.bY(B,0,a.$,a.$,0,0,1),a.M(B,B,[te*me,ce*me,0]),a.N(B,B,[1/2**X,1/2**X,0])}}L.terrainRttPosMatrix32f=new Float32Array(B),h[w]=L}return h}_getTerrainCoordsForTileRanges(s,h){const w={};for(const C of this._renderableTilesKeys){const L=this._tiles[C].tileID;if(!this._isWithinTileRanges(L,h))continue;const B=s.clone(),X=a.ba();if(L.canonical.z===s.canonical.z){const te=s.canonical.x-L.canonical.x,ce=s.canonical.y-L.canonical.y;a.bY(X,0,a.$,a.$,0,0,1),a.M(X,X,[te*a.$,ce*a.$,0])}else if(L.canonical.z>s.canonical.z){const te=L.canonical.z-s.canonical.z,ce=L.canonical.x-(L.canonical.x>>te<<te),me=L.canonical.y-(L.canonical.y>>te<<te),Te=s.canonical.x-(L.canonical.x>>te),Ce=s.canonical.y-(L.canonical.y>>te),Fe=a.$>>te;a.bY(X,0,Fe,Fe,0,0,1),a.M(X,X,[-ce*Fe+Te*a.$,-me*Fe+Ce*a.$,0])}else{const te=s.canonical.z-L.canonical.z,ce=s.canonical.x-(s.canonical.x>>te<<te),me=s.canonical.y-(s.canonical.y>>te<<te),Te=(s.canonical.x>>te)-L.canonical.x,Ce=(s.canonical.y>>te)-L.canonical.y,Fe=a.$<<te;a.bY(X,0,Fe,Fe,0,0,1),a.M(X,X,[ce*a.$+Te*Fe,me*a.$+Ce*Fe,0])}B.terrainRttPosMatrix32f=new Float32Array(X),w[C]=B}return w}getSourceTile(s,h){const w=this.sourceCache._source;let C=s.overscaledZ-this.deltaZoom;if(C>w.maxzoom&&(C=w.maxzoom),C<w.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(C).key);let L=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!L||!L.dem)&&h)for(;C>=w.minzoom&&(!L||!L.dem);)L=this.sourceCache.getTileByID(s.scaledTo(C--).key);return L}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,h){return h[s.canonical.z]&&s.canonical.x>=h[s.canonical.z].minTileX&&s.canonical.x<=h[s.canonical.z].maxTileX&&s.canonical.y>=h[s.canonical.z].minTileY&&s.canonical.y<=h[s.canonical.z].maxTileY}}class Sn{constructor(s,h,w){this._meshCache={},this.painter=s,this.sourceCache=new hn(h),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,h,w,C=a.$){var L;if(!(h>=0&&h<C&&w>=0&&w<C))return 0;const B=this.getTerrainData(s),X=(L=B.tile)===null||L===void 0?void 0:L.dem;if(!X)return 0;const te=a.cs([],[h/C*a.$,w/C*a.$],B.u_terrain_matrix),ce=[te[0]*X.dim,te[1]*X.dim],me=Math.floor(ce[0]),Te=Math.floor(ce[1]),Ce=ce[0]-me,Fe=ce[1]-Te;return X.get(me,Te)*(1-Ce)*(1-Fe)+X.get(me+1,Te)*Ce*(1-Fe)+X.get(me,Te+1)*(1-Ce)*Fe+X.get(me+1,Te+1)*Ce*Fe}getElevationForLngLatZoom(s,h){if(!a.ct(h,s.wrap()))return 0;const{tileID:w,mercatorX:C,mercatorY:L}=this._getOverscaledTileIDFromLngLatZoom(s,h);return this.getElevation(w,C%a.$,L%a.$,a.$)}getElevation(s,h,w,C=a.$){return this.getDEMElevation(s,h,w,C)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const C=this.painter.context,L=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(C,L,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(C,new a.R({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const h=this.sourceCache.getSourceTile(s,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const C=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new a.T(C,h.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),h.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const w=h&&h+h.tileID.key+s.key;if(w&&!this._demMatrixCache[w]){const C=this.sourceCache.sourceCache._source.maxzoom;let L=s.canonical.z-h.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=C?L=s.canonical.z-C:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=s.canonical.x-(s.canonical.x>>L<<L),X=s.canonical.y-(s.canonical.y>>L<<L),te=a.cu(new Float64Array(16),[1/(a.$<<L),1/(a.$<<L),0]);a.M(te,te,[B*a.$,X*a.$,0]),this._demMatrixCache[s.key]={matrix:te,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(s){const h=this.painter,w=h.width/devicePixelRatio,C=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(h.context,{width:w,height:C,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(h.context,{width:w,height:C,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(w,C,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,w,C))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let L=0,B=0;L<this._coordsTextureSize;L++)for(let X=0;X<this._coordsTextureSize;X++,B+=4)h[B+0]=255&X,h[B+1]=255&L,h[B+2]=X>>8<<4|L>>8,h[B+3]=0;const w=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),C=new a.T(s,w,s.gl.RGBA,{premultiply:!1});return C.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const h=new Uint8Array(4),w=this.painter.context,C=w.gl,L=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),B=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),X=Math.round(this.painter.height/devicePixelRatio);w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(L,X-B-1,1,1,C.RGBA,C.UNSIGNED_BYTE,h),w.bindFramebuffer.set(null);const te=h[0]+(h[2]>>4<<8),ce=h[1]+((15&h[2])<<8),me=this.coordsIndex[255-h[3]],Te=me&&this.sourceCache.getTileByID(me);if(!Te)return null;const Ce=this._coordsTextureSize,Fe=(1<<Te.tileID.canonical.z)*Ce;return new a.a1((Te.tileID.canonical.x*Ce+te)/Fe+Te.tileID.wrap,(Te.tileID.canonical.y*Ce+ce)/Fe,this.getElevation(Te.tileID,te,ce,Ce))}depthAtPoint(s){const h=new Uint8Array(4),w=this.painter.context,C=w.gl;return w.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),C.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,h),w.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(s){var h;const w=((h=this.painter.style.projection)===null||h===void 0?void 0:h.transitionState)>0,C=w&&s.canonical.y===0,L=w&&s.canonical.y===(1<<s.canonical.z)-1,B=`m_${C?"n":""}_${L?"s":""}`;if(this._meshCache[B])return this._meshCache[B];const X=this.painter.context,te=new a.cv,ce=new a.aN,me=this.meshSize,Te=a.$/me,Ce=me*me;for(let Tt=0;Tt<=me;Tt++)for(let Vt=0;Vt<=me;Vt++)te.emplaceBack(Vt*Te,Tt*Te,0);for(let Tt=0;Tt<Ce;Tt+=me+1)for(let Vt=0;Vt<me;Vt++)ce.emplaceBack(Vt+Tt,me+Vt+Tt+1,me+Vt+Tt+2),ce.emplaceBack(Vt+Tt,me+Vt+Tt+2,Vt+Tt+1);const Fe=te.length,We=Fe+(me+1),ct=(me+1)*me,ut=C?a.bh:0,dt=C?0:1,_t=L?a.bi:a.$,Pt=L?0:1;for(let Tt=0;Tt<=me;Tt++)te.emplaceBack(Tt*Te,ut,dt);for(let Tt=0;Tt<=me;Tt++)te.emplaceBack(Tt*Te,_t,Pt);for(let Tt=0;Tt<me;Tt++)ce.emplaceBack(ct+Tt,We+Tt,We+Tt+1),ce.emplaceBack(ct+Tt,We+Tt+1,ct+Tt+1),ce.emplaceBack(0+Tt,Fe+Tt+1,Fe+Tt),ce.emplaceBack(0+Tt,0+Tt+1,Fe+Tt+1);const Et=te.length,Mt=Et+2*(me+1);for(const Tt of[0,1])for(let Vt=0;Vt<=me;Vt++)for(const gr of[0,1])te.emplaceBack(Tt*a.$,Vt*Te,gr);for(let Tt=0;Tt<2*me;Tt+=2)ce.emplaceBack(Et+Tt,Et+Tt+1,Et+Tt+3),ce.emplaceBack(Et+Tt,Et+Tt+3,Et+Tt+2),ce.emplaceBack(Mt+Tt,Mt+Tt+3,Mt+Tt+1),ce.emplaceBack(Mt+Tt,Mt+Tt+2,Mt+Tt+3);const Ot=new Xt(X.createVertexBuffer(te,za.members),X.createIndexBuffer(ce),a.aM.simpleSegment(0,0,te.length,ce.length));return this._meshCache[B]=Ot,Ot}getMeshFrameDelta(s){return 2*Math.PI*a.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,h){var w;const{tileID:C}=this._getOverscaledTileIDFromLngLatZoom(s,h);return(w=this.getMinMaxElevation(C).minElevation)!==null&&w!==void 0?w:0}getMinMaxElevation(s){const h=this.getTerrainData(s).tile,w={minElevation:null,maxElevation:null};return h&&h.dem&&(w.minElevation=h.dem.min*this.exaggeration,w.maxElevation=h.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(s,h){const w=a.a1.fromLngLat(s.wrap()),C=(1<<h)*a.$,L=w.x*C,B=w.y*C,X=Math.floor(L/a.$),te=Math.floor(B/a.$);return{tileID:new a.Z(h,0,h,X,te),mercatorX:L,mercatorY:B}}}class uo{constructor(s,h,w){this._context=s,this._size=h,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(w.texture),{id:s,fbo:h,texture:w,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((h=>s.id!==h)),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((s=>!s.inUse))===!1}}const ki={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Zi{constructor(s,h){this.painter=s,this.terrain=h,this.pool=new uo(s.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter((w=>!s._layers[w].isHidden(h))),this._coordsAscending={};for(const w in s.sourceCaches){this._coordsAscending[w]={};const C=s.sourceCaches[w].getVisibleCoordinates(),L=s.sourceCaches[w].getSource(),B=L instanceof st?L.terrainTileRanges:null;for(const X of C){const te=this.terrain.sourceCache.getTerrainCoords(X,B);for(const ce in te)this._coordsAscending[w][ce]||(this._coordsAscending[w][ce]=[]),this._coordsAscending[w][ce].push(te[ce])}}this._coordsAscendingStr={};for(const w of s._order){const C=s._layers[w],L=C.source;if(ki[C.type]&&!this._coordsAscendingStr[L]){this._coordsAscendingStr[L]={};for(const B in this._coordsAscending[L])this._coordsAscendingStr[L][B]=this._coordsAscending[L][B].map((X=>X.key)).sort().join()}}for(const w of this._renderableTiles)for(const C in this._coordsAscendingStr){const L=this._coordsAscendingStr[C][w.tileID.key];L&&L!==w.rttCoords[C]&&(w.rtt=[])}}renderLayer(s,h){if(s.isHidden(this.painter.transform.zoom))return!1;const w=Object.assign(Object.assign({},h),{isRenderingToTexture:!0}),C=s.type,L=this.painter,B=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(ki[C]&&(this._prevType&&ki[this._prevType]||this._stacks.push([]),this._prevType=C,this._stacks[this._stacks.length-1].push(s.id),!B))return!0;if(ki[this._prevType]||ki[C]&&B){this._prevType=C;const X=this._stacks.length-1,te=this._stacks[X]||[];for(const ce of this._renderableTiles){if(this.pool.isFull()&&(nh(this.painter,this.terrain,this._rttTiles,w),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ce),ce.rtt[X]){const Te=this.pool.getObjectForId(ce.rtt[X].id);if(Te.stamp===ce.rtt[X].stamp){this.pool.useObject(Te);continue}}const me=this.pool.getOrCreateFreeObject();this.pool.useObject(me),this.pool.stampObject(me),ce.rtt[X]={id:me.id,stamp:me.stamp},L.context.bindFramebuffer.set(me.fbo.framebuffer),L.context.clear({color:a.bf.transparent,stencil:0}),L.currentStencilSource=void 0;for(let Te=0;Te<te.length;Te++){const Ce=L.style._layers[te[Te]],Fe=Ce.source?this._coordsAscending[Ce.source][ce.tileID.key]:[ce.tileID];L.context.viewport.set([0,0,me.fbo.width,me.fbo.height]),L._renderTileClippingMasks(Ce,Fe,!0),L.renderLayer(L,L.style.sourceCaches[Ce.source],Ce,Fe,w),Ce.source&&(ce.rttCoords[Ce.source]=this._coordsAscendingStr[Ce.source][ce.tileID.key])}}return nh(this.painter,this.terrain,this._rttTiles,w),this._rttTiles=[],this.pool.freeAllObjects(),ki[C]}return!1}}const Ui={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},oa=c,xa={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Vi,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},yu={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ja{constructor(s,h,w=!1){this.mousedown=L=>{this.startMove(L,b.mousePos(this.element,L)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=L=>{this.move(L,b.mousePos(this.element,L))},this.mouseup=L=>{this._rotatePitchHandler.dragEnd(L),this.offTemp()},this.touchstart=L=>{L.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,L.targetTouches)[0],this.startMove(L,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=L=>{L.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,L.targetTouches)[0],this.move(L,this._lastPos))},this.touchend=L=>{L.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=h;const C=new ke;this._rotatePitchHandler=new kd({clickTolerance:3,move:(L,B)=>{const X=h.getBoundingClientRect(),te=new a.P((X.bottom-X.top)/2,(X.right-X.left)/2);return{bearingDelta:a.cn(new a.P(L.x,B.y),B,te),pitchDelta:w?-.5*(B.y-L.y):void 0}},moveStateManager:C,enable:!0,assignEvents:()=>{}}),this.map=s,b.addEventListener(h,"mousedown",this.mousedown),b.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(h,"touchcancel",this.reset)}startMove(s,h){this._rotatePitchHandler.dragStart(s,h),b.disableDrag()}move(s,h){const w=this.map,{bearingDelta:C,pitchDelta:L}=this._rotatePitchHandler.dragMove(s,h)||{};C&&w.setBearing(w.getBearing()+C),L&&w.setPitch(w.getPitch()+L)}off(){const s=this.element;b.removeEventListener(s,"mousedown",this.mousedown),b.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let Ci;function hi(A,s,h,w=!1){if(w||!h.getCoveringTilesDetailsProvider().allowWorldCopies())return A?.wrap();const C=new a.S(A.lng,A.lat);if(A=new a.S(A.lng,A.lat),s){const L=new a.S(A.lng-360,A.lat),B=new a.S(A.lng+360,A.lat),X=h.locationToScreenPoint(A).distSqr(s);h.locationToScreenPoint(L).distSqr(s)<X?A=L:h.locationToScreenPoint(B).distSqr(s)<X&&(A=B)}for(;Math.abs(A.lng-h.center.lng)>180;){const L=h.locationToScreenPoint(A);if(L.x>=0&&L.y>=0&&L.x<=h.width&&L.y<=h.height)break;A.lng>h.center.lng?A.lng-=360:A.lng+=360}return A.lng!==C.lng&&h.isPointOnMapSurface(h.locationToScreenPoint(A))?A:C}const co={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ns(A,s,h){const w=A.classList;for(const C in co)w.remove(`maplibregl-${h}-anchor-${C}`);w.add(`maplibregl-${h}-anchor-${s}`)}class Do extends a.E{constructor(s){if(super(),this._onKeyPress=h=>{const w=h.code,C=h.charCode||h.keyCode;w!=="Space"&&w!=="Enter"&&C!==32&&C!==13||this.togglePopup()},this._onMapClick=h=>{const w=h.originalEvent.target,C=this._element;this._popup&&(w===C||C.contains(w))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();(h?.type==="terrain"||h?.type==="render"&&!w)&&this._map.once("render",this._update),this._lngLat=hi(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let L="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?L="rotateX(0deg)":this._pitchAlignment==="map"&&(L=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${co[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${L} ${C}`),x.frameAsync(new AbortController).then((()=>{this._updateOpacity(h&&h.type==="moveend")})).catch((()=>{}))},this._onMove=h=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s?.opacity,s?.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");const h=b.createNS("http://www.w3.org/2000/svg","svg"),w=41,C=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${w}px`),h.setAttributeNS(null,"width",`${C}px`),h.setAttributeNS(null,"viewBox",`0 0 ${C} ${w}`);const L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"stroke","none"),L.setAttributeNS(null,"stroke-width","1"),L.setAttributeNS(null,"fill","none"),L.setAttributeNS(null,"fill-rule","evenodd");const B=b.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const X=b.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(3.0, 29.0)"),X.setAttributeNS(null,"fill","#000000");const te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const dt of te){const _t=b.createNS("http://www.w3.org/2000/svg","ellipse");_t.setAttributeNS(null,"opacity","0.04"),_t.setAttributeNS(null,"cx","10.5"),_t.setAttributeNS(null,"cy","5.80029008"),_t.setAttributeNS(null,"rx",dt.rx),_t.setAttributeNS(null,"ry",dt.ry),X.appendChild(_t)}const ce=b.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"fill",this._color);const me=b.createNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ce.appendChild(me);const Te=b.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"opacity","0.25"),Te.setAttributeNS(null,"fill","#000000");const Ce=b.createNS("http://www.w3.org/2000/svg","path");Ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Te.appendChild(Ce);const Fe=b.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Fe.setAttributeNS(null,"fill","#FFFFFF");const We=b.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ct=b.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#000000"),ct.setAttributeNS(null,"opacity","0.25"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962");const ut=b.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),We.appendChild(ct),We.appendChild(ut),B.appendChild(X),B.appendChild(ce),B.appendChild(Te),B.appendChild(Fe),B.appendChild(We),h.appendChild(B),h.setAttributeNS(null,"height",w*this._scale+"px"),h.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(h),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(h=>{h.preventDefault()})),this._element.addEventListener("mousedown",(h=>{h.preventDefault()})),ns(this._element,this._anchor,"marker"),s&&s.className)for(const h of s.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const C=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var h,w;const C=(h=this._map)===null||h===void 0?void 0:h.terrain,L=this._map.transform.isLocationOccluded(this._lngLat);if(!C||L){const Fe=L?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Fe&&(this._element.style.opacity=Fe))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const B=this._map,X=B.terrain.depthAtPoint(this._pos),te=B.terrain.getElevationForLngLatZoom(this._lngLat,B.transform.tileZoom);if(B.transform.lngLatToCameraDepth(this._lngLat,te)-X<.006)return void(this._element.style.opacity=this._opacity);const ce=-this._offset.y/B.transform.pixelsPerMeter,me=Math.sin(B.getPitch()*Math.PI/180)*ce,Te=B.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),Ce=B.transform.lngLatToCameraDepth(this._lngLat,te+me)-Te>.006;!((w=this._popup)===null||w===void 0)&&w.isOpen()&&Ce&&this._popup.remove(),this._element.style.opacity=Ce?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,h){return(this._opacity===void 0||s===void 0&&h===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}const el={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let is=0,No=!1;const bs={maxWidth:100,unit:"metric"};function pa(A,s,h){const w=h&&h.maxWidth||100,C=A._container.clientHeight/2,L=A._container.clientWidth/2,B=A.unproject([L-w/2,C]),X=A.unproject([L+w/2,C]),te=Math.round(A.project(X).x-A.project(B).x),ce=Math.min(w,te,A._container.clientWidth),me=B.distanceTo(X);if(h&&h.unit==="imperial"){const Te=3.2808*me;Te>5280?Go(s,ce,Te/5280,A._getUIString("ScaleControl.Miles")):Go(s,ce,Te,A._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?Go(s,ce,me/1852,A._getUIString("ScaleControl.NauticalMiles")):me>=1e3?Go(s,ce,me/1e3,A._getUIString("ScaleControl.Kilometers")):Go(s,ce,me,A._getUIString("ScaleControl.Meters"))}function Go(A,s,h,w){const C=(function(L){const B=Math.pow(10,`${Math.floor(L)}`.length-1);let X=L/B;return X=X>=10?10:X>=5?5:X>=3?3:X>=2?2:X>=1?1:(function(te){const ce=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*ce)/ce})(X),B*X})(h);A.style.width=s*(C/h)+"px",A.innerHTML=`${C}&nbsp;${w}`}const Ml={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ec=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jl(A){if(A){if(typeof A=="number"){const s=Math.round(Math.abs(A)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,A),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-A),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(A,0),right:new a.P(-A,0)}}if(A instanceof a.P||Array.isArray(A)){const s=a.P.convert(A);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(A.center||[0,0]),top:a.P.convert(A.top||[0,0]),"top-left":a.P.convert(A["top-left"]||[0,0]),"top-right":a.P.convert(A["top-right"]||[0,0]),bottom:a.P.convert(A.bottom||[0,0]),"bottom-left":a.P.convert(A["bottom-left"]||[0,0]),"bottom-right":a.P.convert(A["bottom-right"]||[0,0]),left:a.P.convert(A.left||[0,0]),right:a.P.convert(A.right||[0,0])}}return Jl(new a.P(0,0))}const Ho=c;l.AJAXError=a.cz,l.Event=a.l,l.Evented=a.E,l.LngLat=a.S,l.MercatorCoordinate=a.a1,l.Point=a.P,l.addProtocol=a.cA,l.config=a.a,l.removeProtocol=a.cB,l.AttributionControl=Pa,l.BoxZoomHandler=ip,l.CanvasSource=ur,l.CooperativeGesturesHandler=Ro,l.DoubleClickZoomHandler=Vr,l.DragPanHandler=Si,l.DragRotateHandler=Fn,l.EdgeInsets=Gr,l.FullscreenControl=class extends a.E{constructor(A={}){super(),this._onFullscreenChange=()=>{var s;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=h?.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,A&&A.container&&(A.container instanceof HTMLElement?this._container=A.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(A){return this._map=A,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const A=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",A).setAttribute("aria-hidden","true"),A.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const A=this._getTitle();this._fullscreenButton.setAttribute("aria-label",A),this._fullscreenButton.title=A}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=zt,l.GeolocateControl=class extends a.E{constructor(A){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const h=new a.S(s.coords.longitude,s.coords.latitude),w=s.coords.accuracy,C=this._map.getBearing(),L=a.e({bearing:C},this.options.fitBoundsOptions),B=It.fromLngLat(h,w);this._map.fitBounds(B,L,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const h=new a.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&No)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Do({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Do({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(h=>{const w=h?.[0]instanceof ResizeObserverEntry;h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||w||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},el,A)}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(s=!1){if(Ci!==void 0&&!s)return Ci;if(window.navigator.permissions===void 0)return Ci=!!window.navigator.geolocation,Ci;try{Ci=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ci=!!window.navigator.geolocation}return Ci}))})().then((s=>this._finishSetupUI(s))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,is=0,No=!1}_isOutOfMapMaxBounds(A){const s=this._map.getMaxBounds(),h=A.coords;return s&&(h.longitude<s.getWest()||h.longitude>s.getEast()||h.latitude<s.getSouth()||h.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const A=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&A))return;const s=this._map.project(A),h=this._map.unproject([s.x+100,s.y]),w=A.distanceTo(h)/100,C=2*this._accuracy/w;this._circleElement.style.width=`${C.toFixed(2)}px`,this._circleElement.style.height=`${C.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":is--,No=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let A;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),is++,is>1?(A={maximumAge:6e5,timeout:0},No=!0):(A=this.options.positionOptions,No=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,A)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var A;const s=(A=this._map.getProjection())===null||A===void 0?void 0:A.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var A;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((A=this._map.getProjection())===null||A===void 0?void 0:A.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=ih,l.ImageSource=st,l.KeyboardHandler=Tr,l.LngLatBounds=It,l.LogoControl=rs,l.Map=class extends bi{constructor(A){var s,h;a.cw.mark(a.cx.create);const w=Object.assign(Object.assign(Object.assign({},xa),A),{canvasContextAttributes:Object.assign(Object.assign({},xa.canvasContextAttributes),A.canvasContextAttributes)});if(w.minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const C=new On,L=new si;if(w.minZoom!==void 0&&C.setMinZoom(w.minZoom),w.maxZoom!==void 0&&C.setMaxZoom(w.maxZoom),w.minPitch!==void 0&&C.setMinPitch(w.minPitch),w.maxPitch!==void 0&&C.setMaxPitch(w.maxPitch),w.renderWorldCopies!==void 0&&C.setRenderWorldCopies(w.renderWorldCopies),super(C,L,{bearingSnap:w.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Za,this._controls=[],this._mapId=a.a7(),this._contextLost=X=>{X.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:X}))},this._contextRestored=X=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:X}))},this._onMapScroll=X=>{if(X.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=w.interactive,this._maxTileCacheSize=w.maxTileCacheSize,this._maxTileCacheZoomLevels=w.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},w.canvasContextAttributes),this._trackResize=w.trackResize===!0,this._bearingSnap=w.bearingSnap,this._centerClampedToGround=w.centerClampedToGround,this._refreshExpiredTiles=w.refreshExpiredTiles===!0,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions===!0,this._collectResourceTiming=w.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ui),w.locale),this._clickTolerance=w.clickTolerance,this._overridePixelRatio=w.pixelRatio,this._maxCanvasSize=w.maxCanvasSize,this.transformCameraUpdate=w.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=w.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=N.addThrottleControl((()=>this.isMoving())),this._requestManager=new $(w.transformRequest),typeof w.container=="string"){if(this._container=document.getElementById(w.container),!this._container)throw new Error(`Container '${w.container}' not found.`)}else{if(!(w.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let X=!1;const te=ts((ce=>{this._trackResize&&!this._removed&&(this.resize(ce),this.redraw())}),50);this._resizeObserver=new ResizeObserver((ce=>{X?te(ce):X=!0})),this._resizeObserver.observe(this._container)}this.handlers=new io(this,w),this._hash=w.hash&&new ih(typeof w.hash=="string"&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,roll:w.roll}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,a.e({},w.fitBoundsOptions,{duration:0}))));const B=typeof w.style=="string"||((h=(s=w.style)===null||s===void 0?void 0:s.projection)===null||h===void 0?void 0:h.type)!=="globe";this.resize(null,B),this._localIdeographFontFamily=w.localIdeographFontFamily,this._validateStyle=w.validateStyle,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new Pa(typeof w.attributionControl=="boolean"?void 0:w.attributionControl)),w.maplibreLogo&&this.addControl(new rs,w.logoPosition),this.on("style.load",(()=>{if(B||this._resizeTransform(),this.transform.unmodified){const X=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(X)}})),this.on("data",(X=>{this._update(X.dataType==="style"),this.fire(new a.l(`${X.dataType}data`,X))})),this.on("dataloading",(X=>{this.fire(new a.l(`${X.dataType}dataloading`,X))})),this.on("dataabort",(X=>{this.fire(new a.l("sourcedataabort",X))}))}_getMapId(){return this._mapId}setGlobalStateProperty(A,s){return this.style.setGlobalStateProperty(A,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(A,s){if(s===void 0&&(s=A.getDefaultPosition?A.getDefaultPosition():"top-right"),!A||!A.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=A.onAdd(this);this._controls.push(A);const w=this._controlPositions[s];return s.indexOf("bottom")!==-1?w.insertBefore(h,w.firstChild):w.appendChild(h),this}removeControl(A){if(!A||!A.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(A);return s>-1&&this._controls.splice(s,1),A.onRemove(this),this}hasControl(A){return this._controls.indexOf(A)>-1}coveringTiles(A){return bt(this.transform,A)}calculateCameraOptionsFromTo(A,s,h,w){return w==null&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(A,s,h,w)}resize(A,s=!0){const[h,w]=this._containerDimensions(),C=this._getClampedPixelRatio(h,w);if(this._resizeCanvas(h,w,C),this.painter.resize(h,w,C),this.painter.overLimit()){const B=this.painter.context.gl;this._maxCanvasSize=[B.drawingBufferWidth,B.drawingBufferHeight];const X=this._getClampedPixelRatio(h,w);this._resizeCanvas(h,w,X),this.painter.resize(h,w,X)}this._resizeTransform(s);const L=!this._moving;return L&&(this.stop(),this.fire(new a.l("movestart",A)).fire(new a.l("move",A))),this.fire(new a.l("resize",A)),L&&this.fire(new a.l("moveend",A)),this}_resizeTransform(A=!0){var s;const[h,w]=this._containerDimensions();this.transform.resize(h,w,A),(s=this._requestedCameraState)===null||s===void 0||s.resize(h,w,A)}_getClampedPixelRatio(A,s){const{0:h,1:w}=this._maxCanvasSize,C=this.getPixelRatio(),L=A*C,B=s*C;return Math.min(L>h?h/L:1,B>w?w/B:1)*C}getPixelRatio(){var A;return(A=this._overridePixelRatio)!==null&&A!==void 0?A:devicePixelRatio}setPixelRatio(A){this._overridePixelRatio=A,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(A){return this.transform.setMaxBounds(It.convert(A)),this._update()}setMinZoom(A){if((A=A??-2)>=-2&&A<=this.transform.maxZoom)return this.transform.setMinZoom(A),this._update(),this.getZoom()<A&&this.setZoom(A),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(A){if((A=A??22)>=this.transform.minZoom)return this.transform.setMaxZoom(A),this._update(),this.getZoom()>A&&this.setZoom(A),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(A){if((A=A??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(A>=0&&A<=this.transform.maxPitch)return this.transform.setMinPitch(A),this._update(),this.getPitch()<A&&this.setPitch(A),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(A){if((A=A??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(A>=this.transform.minPitch)return this.transform.setMaxPitch(A),this._update(),this.getPitch()>A&&this.setPitch(A),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(A){return this.transform.setRenderWorldCopies(A),this._update()}project(A){return this.transform.locationToScreenPoint(a.S.convert(A),this.style&&this.terrain)}unproject(A){return this.transform.screenPointToLocation(a.P.convert(A),this.terrain)}isMoving(){var A;return this._moving||((A=this.handlers)===null||A===void 0?void 0:A.isMoving())}isZooming(){var A;return this._zooming||((A=this.handlers)===null||A===void 0?void 0:A.isZooming())}isRotating(){var A;return this._rotating||((A=this.handlers)===null||A===void 0?void 0:A.isRotating())}_createDelegatedListener(A,s,h){if(A==="mouseenter"||A==="mouseover"){let w=!1;return{layers:s,listener:h,delegates:{mousemove:L=>{const B=s.filter((te=>this.getLayer(te))),X=B.length!==0?this.queryRenderedFeatures(L.point,{layers:B}):[];X.length?w||(w=!0,h.call(this,new Fs(A,this,L.originalEvent,{features:X}))):w=!1},mouseout:()=>{w=!1}}}}if(A==="mouseleave"||A==="mouseout"){let w=!1;return{layers:s,listener:h,delegates:{mousemove:B=>{const X=s.filter((te=>this.getLayer(te)));(X.length!==0?this.queryRenderedFeatures(B.point,{layers:X}):[]).length?w=!0:w&&(w=!1,h.call(this,new Fs(A,this,B.originalEvent)))},mouseout:B=>{w&&(w=!1,h.call(this,new Fs(A,this,B.originalEvent)))}}}}{const w=C=>{const L=s.filter((X=>this.getLayer(X))),B=L.length!==0?this.queryRenderedFeatures(C.point,{layers:L}):[];B.length&&(C.features=B,h.call(this,C),delete C.features)};return{layers:s,listener:h,delegates:{[A]:w}}}}_saveDelegatedListener(A,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[A]=this._delegatedListeners[A]||[],this._delegatedListeners[A].push(s)}_removeDelegatedListener(A,s,h){if(!this._delegatedListeners||!this._delegatedListeners[A])return;const w=this._delegatedListeners[A];for(let C=0;C<w.length;C++){const L=w[C];if(L.listener===h&&L.layers.length===s.length&&L.layers.every((B=>s.includes(B)))){for(const B in L.delegates)this.off(B,L.delegates[B]);return void w.splice(C,1)}}}on(A,s,h){if(h===void 0)return super.on(A,s);const w=typeof s=="string"?[s]:s,C=this._createDelegatedListener(A,w,h);this._saveDelegatedListener(A,C);for(const L in C.delegates)this.on(L,C.delegates[L]);return{unsubscribe:()=>{this._removeDelegatedListener(A,w,h)}}}once(A,s,h){if(h===void 0)return super.once(A,s);const w=typeof s=="string"?[s]:s,C=this._createDelegatedListener(A,w,h);for(const L in C.delegates){const B=C.delegates[L];C.delegates[L]=(...X)=>{this._removeDelegatedListener(A,w,h),B(...X)}}this._saveDelegatedListener(A,C);for(const L in C.delegates)this.once(L,C.delegates[L]);return this}off(A,s,h){return h===void 0?super.off(A,s):(this._removeDelegatedListener(A,typeof s=="string"?[s]:s,h),this)}queryRenderedFeatures(A,s){if(!this.style)return[];let h;const w=A instanceof a.P||Array.isArray(A),C=w?A:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(w?{}:A)||{},C instanceof a.P||typeof C[0]=="number")h=[a.P.convert(C)];else{const L=a.P.convert(C[0]),B=a.P.convert(C[1]);h=[L,new a.P(B.x,L.y),B,new a.P(L.x,B.y),L]}return this.style.queryRenderedFeatures(h,s,this.transform)}querySourceFeatures(A,s){return this.style.querySourceFeatures(A,s)}setStyle(A,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&A?(this._diffStyle(A,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(A,s))}setTransformRequest(A){return this._requestManager.setTransformRequest(A),this}_getUIString(A){const s=this._locale[A];if(s==null)throw new Error(`Missing UI string '${A}'`);return s}_updateStyle(A,s){var h,w;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(A,s)));const C=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!A)),A?(this.style=new Qo(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof A=="string"?this.style.loadURL(A,s,C):this.style.loadJSON(A,s,C),this):((w=(h=this.style)===null||h===void 0?void 0:h.projection)===null||w===void 0||w.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Qo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(A,s){if(typeof A=="string"){const h=this._requestManager.transformRequest(A,"Style");a.j(h,new AbortController).then((w=>{this._updateDiff(w.data,s)})).catch((w=>{w&&this.fire(new a.k(w))}))}else typeof A=="object"&&this._updateDiff(A,s)}_updateDiff(A,s){try{this.style.setState(A,s)&&this._update(!0)}catch(h){a.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(A,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(A,s){return this._lazyInitEmptyStyle(),this.style.addSource(A,s),this._update(!0)}isSourceLoaded(A){const s=this.style&&this.style.sourceCaches[A];if(s!==void 0)return s.loaded();this.fire(new a.k(new Error(`There is no source with ID '${A}'`)))}setTerrain(A){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),A){const s=this.style.sourceCaches[A.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${A.source}`);this.terrain===null&&s.reload();for(const h in this.style._layers){const w=this.style._layers[h];w.type==="hillshade"&&w.source===A.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),w.type==="color-relief"&&w.source===A.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Sn(this.painter,s,A),this.painter.renderToTexture=new Zi(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=h=>{var w;h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==A.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((w=h.source)===null||w===void 0?void 0:w.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:A})),this}getTerrain(){var A,s;return(s=(A=this.terrain)===null||A===void 0?void 0:A.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const A=this.style&&this.style.sourceCaches;for(const s in A){const h=A[s]._tiles;for(const w in h){const C=h[w];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}removeSource(A){return this.style.removeSource(A),this._update(!0)}getSource(A){return this.style.getSource(A)}setSourceTileLodParams(A,s,h){if(h){const w=this.getSource(h);if(!w)throw new Error(`There is no source with ID "${h}", cannot set LOD parameters`);w.calculateTileZoom=Kt(Math.max(1,A),Math.max(1,s))}else for(const w in this.style.sourceCaches)this.style.sourceCaches[w].getSource().calculateTileZoom=Kt(Math.max(1,A),Math.max(1,s));return this._update(!0),this}refreshTiles(A,s){const h=this.style.sourceCaches[A];if(!h)throw new Error(`There is no source cache with ID "${A}", cannot refresh tile`);s===void 0?h.reload(!0):h.refreshTiles(s.map((w=>new a.a4(w.z,w.x,w.y))))}addImage(A,s,h={}){const{pixelRatio:w=1,sdf:C=!1,stretchX:L,stretchY:B,content:X,textFitWidth:te,textFitHeight:ce}=h;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:me,height:Te,data:Ce}=s,Fe=s;return this.style.addImage(A,{data:new a.R({width:me,height:Te},new Uint8Array(Ce)),pixelRatio:w,stretchX:L,stretchY:B,content:X,textFitWidth:te,textFitHeight:ce,sdf:C,version:0,userImage:Fe}),Fe.onAdd&&Fe.onAdd(this,A),this}}{const{width:me,height:Te,data:Ce}=x.getImageData(s);this.style.addImage(A,{data:new a.R({width:me,height:Te},Ce),pixelRatio:w,stretchX:L,stretchY:B,content:X,textFitWidth:te,textFitHeight:ce,sdf:C,version:0})}}updateImage(A,s){const h=this.style.getImage(A);if(!h)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=s instanceof HTMLImageElement||a.b(s)?x.getImageData(s):s,{width:C,height:L,data:B}=w;if(C===void 0||L===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==h.data.width||L!==h.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const X=!(s instanceof HTMLImageElement||a.b(s));return h.data.replace(B,X),this.style.updateImage(A,h),this}getImage(A){return this.style.getImage(A)}hasImage(A){return A?!!this.style.getImage(A):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(A){this.style.removeImage(A)}loadImage(A){return N.getImage(this._requestManager.transformRequest(A,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(A,s){return this._lazyInitEmptyStyle(),this.style.addLayer(A,s),this._update(!0)}moveLayer(A,s){return this.style.moveLayer(A,s),this._update(!0)}removeLayer(A){return this.style.removeLayer(A),this._update(!0)}getLayer(A){return this.style.getLayer(A)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(A,s,h){return this.style.setLayerZoomRange(A,s,h),this._update(!0)}setFilter(A,s,h={}){return this.style.setFilter(A,s,h),this._update(!0)}getFilter(A){return this.style.getFilter(A)}setPaintProperty(A,s,h,w={}){return this.style.setPaintProperty(A,s,h,w),this._update(!0)}getPaintProperty(A,s){return this.style.getPaintProperty(A,s)}setLayoutProperty(A,s,h,w={}){return this.style.setLayoutProperty(A,s,h,w),this._update(!0)}getLayoutProperty(A,s){return this.style.getLayoutProperty(A,s)}setGlyphs(A,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(A,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(A,s,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(A,s,h,(w=>{w||this._update(!0)})),this}removeSprite(A){return this._lazyInitEmptyStyle(),this.style.removeSprite(A),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(A,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(A,s,(h=>{h||this._update(!0)})),this}setLight(A,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(A,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(A,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(A,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(A,s){return this.style.setFeatureState(A,s),this._update()}removeFeatureState(A,s){return this.style.removeFeatureState(A,s),this._update()}getFeatureState(A){return this.style.getFeatureState(A)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let A=0,s=0;return this._container&&(A=this._container.clientWidth||400,s=this._container.clientHeight||300),[A,s]}_setupContainer(){const A=this._container;A.classList.add("maplibregl-map");const s=this._canvasContainer=b.create("div","maplibregl-canvas-container",A);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),w=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],w);const C=this._controlContainer=b.create("div","maplibregl-control-container",A),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((B=>{L[B]=b.create("div",`maplibregl-ctrl-${B} `,C)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(A,s,h){this._canvas.width=Math.floor(h*A),this._canvas.height=Math.floor(h*s),this._canvas.style.width=`${A}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const A=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",(w=>{s={requestedAttributes:A},w&&(s.statusMessage=w.statusMessage,s.type=w.type)}),{once:!0});let h=null;if(h=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,A):this._canvas.getContext("webgl2",A)||this._canvas.getContext("webgl",A),!h){const w="Failed to initialize WebGL";throw s?(s.message=w,new Error(JSON.stringify(s))):new Error(w)}this.painter=new Ju(h,this.transform),P.testSupport(h)}migrateProjection(A,s){super.migrateProjection(A,s),this.painter.transform=A,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(A){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||A,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(A){return this._update(),this._renderTaskQueue.add(A)}_cancelRenderFrame(A){this._renderTaskQueue.remove(A)}_render(A){var s,h,w,C,L;const B=this._idleTriggered?this._fadeDuration:0,X=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(A),this._removed)return;let te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Te=this.transform.zoom,Ce=x.now();this.style.zoomHistory.update(Te,Ce);const Fe=new a.F(Te,{now:Ce,fadeDuration:B,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),We=Fe.crossFadingFactor();We===1&&We===this._crossFadingFactor||(te=!0,this._crossFadingFactor=We),this.style.update(Fe)}const ce=((h=this.style.projection)===null||h===void 0?void 0:h.transitionState)>0!==X;(w=this.style.projection)===null||w===void 0||w.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((C=this.style.projection)===null||C===void 0?void 0:C.transitionState,(L=this.style.projection)===null||L===void 0?void 0:L.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ce)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,B,this._crossSourceCollisions,ce),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:B,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const me=this._sourcesDirty||this._styleDirty||this._placementDirty;return me||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||me||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var A;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),N.removeThrottleControl(this._imageQueueHandle),(A=this._resizeObserver)===null||A===void 0||A.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s?.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frame(this._frameRequest,(A=>{a.cw.frame(A),this._frameRequest=null;try{this._render(A)}catch(s){if(!a.cy(s)&&!(function(h){return h.message===_o})(s))throw s}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(A){this._showTileBoundaries!==A&&(this._showTileBoundaries=A,this._update())}get showPadding(){return!!this._showPadding}set showPadding(A){this._showPadding!==A&&(this._showPadding=A,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(A){this._showCollisionBoxes!==A&&(this._showCollisionBoxes=A,A?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(A){this._showOverdrawInspector!==A&&(this._showOverdrawInspector=A,this._update())}get repaint(){return!!this._repaint}set repaint(A){this._repaint!==A&&(this._repaint=A,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(A){this._vertices=A,this._update()}get version(){return oa}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(A){return this._lazyInitEmptyStyle(),this.style.setProjection(A),this._update(!0)}},l.MapMouseEvent=Fs,l.MapTouchEvent=Td,l.MapWheelEvent=oh,l.Marker=Do,l.NavigationControl=class{constructor(A){this._updateZoomButtons=()=>{const s=this._map.getZoom(),h=s===this._map.getMaxZoom(),w=s===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,h)=>{const w=this._map._getUIString(`NavigationControl.${h}`);s.title=w,s.setAttribute("aria-label",w)},this.options=a.e({},yu,A),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(s=>this._map.zoomIn({},{originalEvent:s}))),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(s=>this._map.zoomOut({},{originalEvent:s}))),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})})),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(A){return this._map=A,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ja(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(A,s){const h=b.create("button",A,this._container);return h.type="button",h.addEventListener("click",s),h}},l.Popup=class extends a.E{constructor(A){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const B of this.options.className.split(" "))this._container.classList.add(B);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=hi(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const h=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let w=this.options.anchor;const C=Jl(this.options.offset);if(!w){const B=this._container.offsetWidth,X=this._container.offsetHeight;let te;te=h.y+C.bottom.y<X?["top"]:h.y>this._map.transform.height-X?["bottom"]:[],h.x<B/2?te.push("left"):h.x>this._map.transform.width-B/2&&te.push("right"),w=te.length===0?"bottom":te.join("-")}let L=h.add(C[w]);this.options.subpixelPositioning||(L=L.round()),b.setTransform(this._container,`${co[w]} translate(${L.x}px,${L.y}px)`),ns(this._container,w,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Ml),A)}addTo(A){return this._map&&this.remove(),this._map=A,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(A){return this._lngLat=a.S.convert(A),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(A){return this.setDOMContent(document.createTextNode(A))}setHTML(A){const s=document.createDocumentFragment(),h=document.createElement("body");let w;for(h.innerHTML=A;w=h.firstChild,w;)s.appendChild(w);return this.setDOMContent(s)}getMaxWidth(){var A;return(A=this._container)===null||A===void 0?void 0:A.style.maxWidth}setMaxWidth(A){return this.options.maxWidth=A,this._update(),this}setDOMContent(A){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(A),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(A){return this._container&&this._container.classList.add(A),this}removeClassName(A){return this._container&&this._container.classList.remove(A),this}setOffset(A){return this.options.offset=A,this._update(),this}toggleClassName(A){if(this._container)return this._container.classList.toggle(A)}setSubpixelPositioning(A){this.options.subpixelPositioning=A}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const A=this._container.querySelector(ec);A&&A.focus()}},l.RasterDEMTileSource=Wt,l.RasterTileSource=Ht,l.ScaleControl=class{constructor(A){this._onMove=()=>{pa(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,pa(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},bs),A)}getDefaultPosition(){return"bottom-left"}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",A.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Yr,l.Style=Qo,l.TerrainControl=class{constructor(A){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=A}onAdd(A){return this._map=A,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=Qt,l.TwoFingersTouchRotateHandler=hr,l.TwoFingersTouchZoomHandler=St,l.TwoFingersTouchZoomRotateHandler=$i,l.VectorTileSource=je,l.VideoSource=sr,l.addSourceType=(A,s)=>a._(void 0,void 0,void 0,(function*(){if(yr(A))throw new Error(`A source type called "${A}" already exists.`);((h,w)=>{ar[h]=w})(A,s)})),l.clearPrewarmedResources=function(){const A=Se;A&&(A.isPreloaded()&&A.numActive()===1?(A.release(Ee),Se=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=Pl,l.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return xr().getRTLTextPluginStatus()},l.getVersion=function(){return Ho},l.getWorkerCount=function(){return Ae.workerCount},l.getWorkerUrl=function(){return a.a.WORKER_URL},l.importScriptInWorkers=function(A){return $e().broadcast("IS",A)},l.prewarm=function(){De().acquire(Ee)},l.setMaxParallelImageRequests=function(A){a.a.MAX_PARALLEL_IMAGE_REQUESTS=A},l.setRTLTextPlugin=function(A,s){return xr().setRTLTextPlugin(A,s)},l.setWorkerCount=function(A){Ae.workerCount=A},l.setWorkerUrl=function(A){a.a.WORKER_URL=A}}));var o=r;return o}))})(l_)),l_.exports}var h2=gK();const $4=rf(h2);class yK{registeredElements;baseLayers;firstSymbolLayer;eventHandlers;wrapper;initRegisteredElements;addNativeMaplibreFunctionsAndProps;map;style;styleJson;addSource;addControl;on;cleanup;constructor(t){const r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:(a,c,p,g)=>{if(!r.eventHandlers[a])return;typeof p=="string"&&(g=p,p={}),r.eventHandlers[a].push({handler:c,options:p});const v=[a,c];g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].wrapperEvents.push(v))},off:(a,c)=>{r.eventHandlers[a]&&(r.eventHandlers[a]=r.eventHandlers[a].filter(p=>Object.is(p.handler,c)?!1:p))},fire:(a,c)=>{if(!r.eventHandlers[a])return;const p=c||window,g=new Event(a);r.eventHandlers[a].forEach(function(v){v.handler.call(p,g,r,c)})},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:a=>{if(a)return{id:a.id,type:a.type,visible:a.visibility!=="none",baseLayer:r.baseLayers.indexOf(a.id)!==-1}},buildLayerObjects:()=>r.map.style._order.map(a=>r.wrapper.buildLayerObject(r.map.style._layers[a])).filter(a=>typeof a<"u"),refreshLayerState:()=>{r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:()=>typeof r.map.getCenter=="function"?{center:(({lng:a,lat:c})=>({lng:a,lat:c}))(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},refreshViewport:()=>{r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=(a,c)=>{(typeof r.registeredElements[a]>"u"||typeof c<"u"&&c)&&(r.registeredElements[a]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=(a,c,p)=>r.map.style?(p&&typeof p=="string"&&typeof a.id<"u"&&(r.initRegisteredElements(p),r.registeredElements[p].layers.push(a.id),a?.source&&typeof a?.source!="string"&&r.registeredElements[p].sources.push(a.id)),r.map.addLayer(a,c),r.wrapper.fire("addlayer",{layer_id:a.id}),this):this,this.addSource=(a,c,p)=>r.map.style?(p&&typeof p=="string"&&typeof a<"u"&&(r.initRegisteredElements(p),r.registeredElements[p].sources.push(a)),r.map.addSource(a,c),r.wrapper.fire("addsource",{source_id:a}),this):this,this.addImage=(a,c,p,g)=>r.map.style?typeof p=="string"&&typeof g>"u"?r.addImage(a,c,void 0,p):(g&&typeof g=="string"&&typeof a<"u"&&(r.initRegisteredElements(g),r.registeredElements[g].images.push(a)),r.map.addImage(a,c,p),this):this,this.on=(a,c,p,g)=>{if(typeof p=="string"&&typeof c=="function")return r.on.call(r,a,void 0,c,p);let v=[a,c,p];return c||(v=[a,p]),g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].events.push(v)),r.map.on(...v),this},this.addControl=(a,c,p)=>(p&&typeof p=="string"&&(r.initRegisteredElements(p),r.registeredElements[p].controls.push(a)),r.map.addControl(a,c),this),this.cleanup=a=>{r.map.style&&typeof r.registeredElements[a]<"u"&&(r.registeredElements[a].layers.forEach(c=>{r.map.style.getLayer(c)&&r.map.style.removeLayer(c)}),r.registeredElements[a].sources.forEach(c=>{r.map.style.getSource(c)&&r.map.style.removeSource(c)}),r.registeredElements[a].images.forEach(c=>{r.map.hasImage(c)&&r.map.style.removeImage(c)}),r.registeredElements[a].events.forEach(c=>{r.map.off(...c)}),r.registeredElements[a].controls.forEach(c=>{r.map.removeControl(c)}),r.registeredElements[a].wrapperEvents.forEach(c=>{r.wrapper.off(...c)}),r.initRegisteredElements(a,!0))},["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach(a=>{this[a]=(...c)=>(r.map&&r.map.style&&typeof r.map.style[a]=="function"&&r.map.style[a](...c),r.map._update?r.map._update(!0):void 0)}),["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach(a=>{this[a]=(...c)=>r.map&&r.map.style?r.map.style[a](...c):!1}),this.addNativeMaplibreFunctionsAndProps=()=>{Object.getOwnPropertyNames(Object.getPrototypeOf(this.map)).forEach(a=>{typeof this[a]>"u"&&(this[a]=(...c)=>r.map[a](...c))}),Object.keys(this.map).forEach(a=>{typeof this[a]>"u"&&(this[a]=r.map[a])})},["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach(a=>{this[a]=(...c)=>{if(typeof r.map[a]=="function")return r.map[a].call(r.map,...c)}}),(async()=>{typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1&&await fetch(t.mapOptions.style).then(a=>{if(a.ok)return a.json();throw new Error("error loading map style.json")}).then(a=>{a.layers.forEach(c=>{r.baseLayers.push(c.id),!r.firstSymbolLayer&&c.type==="symbol"&&(r.firstSymbolLayer=c.id)}),r.styleJson=a,t.mapOptions.style=a}).catch(a=>{console.log(a)}),r.map=new h2.Map(t.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",()=>{r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",()=>{r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",()=>{r.wrapper.refreshLayerState()}),r.map.on("data",()=>{r.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(r.map,r)})()}}const N9={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},vK=e=>{const t=Q.useRef(null),r=Q.useRef(null),n=Q.useContext(Vh),i=Q.useRef(e.mapId),o=Q.useRef(!1),l=Q.useRef(e.options?.style);return Q.useEffect(()=>{const a=i.current;return()=>{o.current=!1,n.removeMap(a),t.current&&(t.current.map?.remove?.(),t.current.cancelled=!0,t.current=null)}},[]),Q.useEffect(()=>{o.current||r.current&&(o.current=!0,e?.options?.style&&(l.current=JSON.stringify(e.options.style)),t.current=new yK({mapOptions:{style:"",...e.options,...e?.options?.style?{}:{style:N9?.options?.style},container:r.current},onReady:(a,c)=>{a.once("load",()=>{c?.cancelled?a.remove():(window._map=a,e.mapId?n.registerMap(e.mapId,c):n.setMap(c))})}}))},[e.options,e.mapId]),Q.useEffect(()=>{if(t.current?.map&&e?.options?.style){const a=JSON.stringify(e.options.style);l.current!==a&&(l.current=a,t.current.map.setStyle(e.options.style))}},[e?.options?.style]),Z.jsx("div",{ref:r,className:"mapContainer",style:e.style})};vK.defaultProps=N9;function p2(e){const t=Q.useContext(Vh),r=Q.useRef(!1),n=Q.useRef(null),[i,o]=Q.useState(),l=Q.useRef(void 0),[a,c]=Q.useState([]),p=Q.useRef(""),g=Q.useRef(Bu()),v=Q.useCallback(b=>!e?.filter?.includeBaseLayers&&b?.baseLayer?!1:typeof e.filter?.matchLayerIds<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(b.id):b.id.includes(e.filter.matchLayerIds):!0,[e.filter]),x=Q.useCallback(()=>{if(!n.current)return;const b=n.current.wrapper.layerState.filter(v),P=JSON.stringify(b);p.current!==P&&(p.current=P,c(b))},[v]);return Q.useEffect(()=>{const b=g.current;return()=>{n.current&&(n.current.cleanup(b),n.current=null),r.current=!1}},[]),Q.useEffect(()=>{if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}e?.watch?.viewport&&(o(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",()=>{l.current!==n.current?.wrapper.viewportStateString&&o(n.current?.wrapper.viewportState)},g.current)),e?.watch?.layers&&(x(),n.current.wrapper.on("layerchange",x,{includeBaseLayers:e?.filter?.includeBaseLayers,matchLayerIds:e?.filter?.matchLayerIds},g.current))}},[t.mapIds,t,e.mapId,x,e]),{layers:a,viewport:i}}p2.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function la(e){const t=Q.useContext(Vh),[r,n]=Q.useState({map:void 0,ready:!1}),i=p2({mapId:e?.mapId,watch:{viewport:!1,layers:!!e?.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),o=Q.useRef(null),l=Q.useRef(Bu()),a=()=>{o.current&&o.current.cleanup(l.current)};return Q.useEffect(()=>()=>{a(),o.current=null},[]),Q.useEffect(()=>{if(o.current&&o.current.cancelled===!0&&(o.current=null,n({map:void 0,ready:!1})),!(o.current||!t.mapExists(e?.mapId))){if(e?.waitForLayer){let c=!1;if(i?.layers?.forEach(p=>{p.id===e?.waitForLayer&&(c=!0)}),!c)return}o.current=t.getMap(e?.mapId),n({map:o.current,ready:!0})}},[t.mapIds,i.layers,t,e]),{map:r.map,mapIsReady:r.ready,componentId:l.current,layers:i.layers,cleanup:a}}const IL=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function bK(e){return typeof e.options.source=="string"?{source:e.options.source}:e.geojson&&(!e.options?.source||typeof e?.options?.source!="string"&&e.options?.source?.attribution&&!e.options?.source?.type)?{source:{type:"geojson",data:e.geojson||"",attribution:typeof e?.options?.source!="string"&&e.options.source?.attribution?e.options.source?.attribution:""}}:{}}function _K(e,t){if(e?.insertBeforeLayer)return e.insertBeforeLayer;if(e?.insertBeforeFirstSymbolLayer)return t?.map?.firstSymbolLayer}function qf(e){const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Q.useRef(""),n=Q.useRef(""),i=Q.useRef(""),[o,l]=Q.useState(),a=Q.useRef(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+t.componentId),c=Q.useCallback(()=>{if(!t.map||t?.map.cancelled||(t.map.map.getLayer(a.current)&&t.cleanup(),typeof e?.options?.source!="string"&&t.map.map.getSource(a.current)&&t.map.map.removeSource(a.current),typeof e.options.source=="string"&&(e.options.source===""||!t.map.map.getSource(e.options.source)))||typeof e?.options?.source!="string"&&!e.geojson&&!e?.options?.source?.data&&e?.options?.type!=="background"||typeof e.options.type>"u")return;try{t.map.addLayer({...e.options,...bK(e),id:a.current},_K(e,t),t.componentId)}catch(v){console.error("Failed to add layer:",v)}l(()=>t.map?.map.getLayer(a.current));const p=()=>{t.map?.map.getLayer(a.current)||c()};t.map.on("styledata",p,t.componentId);const g=(v,x,{source_id:b})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===b&&c()};t.map.wrapper.on("addsource",g,t.componentId),n.current=JSON.stringify(e.options?.paint),i.current=JSON.stringify(e.options?.layout),r.current=e.options.type},[e,t]);return Q.useEffect(()=>{t.map&&(!e.geojson&&!e.options.source&&e?.options?.type!=="background"||t.map?.cancelled===!1&&t?.map?.map?.getLayer?.(a.current)&&(IL.indexOf(e.options.type)===-1||IL.indexOf(e.options.type)!==-1&&e.options.type===r.current)||c())},[t.map,t.mapIsReady,e,c]),Q.useEffect(()=>{t.map?.cancelled===!0||!t.map?.map?.getSource?.(a.current)||t.map.map.getSource(a.current)?.setData?.(e.geojson)},[e.geojson,t.map,e.options.type]),Q.useEffect(()=>{if(t.map?.cancelled===!0||!t.map||!t.map?.map?.getLayer?.(a.current)||e.options.type!==r.current)return;let p;const g=JSON.stringify(e.options.layout);if(e.options.layout&&g!==i.current){const x=JSON.parse(i.current);for(p in e.options.layout)e.options.layout?.[p]&&e.options.layout[p]!==x[p]&&t.map.map.setLayoutProperty(a.current,p,e.options.layout[p]);i.current=g}const v=JSON.stringify(e.options.paint);if(v!==n.current){const x=JSON.parse(n.current);for(p in e.options.paint)e.options.paint?.[p]&&e.options.paint[p]!==x[p]&&t.map.map.setPaintProperty(a.current,p,e.options.paint[p]);n.current=v}},[e.options,t.map]),Q.useEffect(()=>{!e.insertBeforeLayer||!t.map||!t.map.getLayer(e.insertBeforeLayer)||!t.map.getLayer(a.current)||t.map.moveLayer(a.current,e.insertBeforeLayer)},[t.map,e.insertBeforeLayer]),Q.useEffect(()=>()=>{t.cleanup()},[]),Q.useEffect(()=>{if(typeof e?.options?.source!="string"||!t.map)return;const p=()=>{typeof e?.options?.source=="string"&&t?.map?.getSource?.(e.options.source)&&!t.map.getLayer(a.current)&&c()};t.map.on("sourcedataloading",p);const g=(v,x,{source_id:b})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===b&&c()};return t.map.wrapper.on("addsource",g),()=>{t?.map&&(t.map.off("sourcedataloading",p),t.map.wrapper.off("addsource",g))}},[t.map,e.options?.source]),Q.useEffect(()=>{if(!e.onClick||!t?.map||!t?.map?.getLayer?.(a.current))return;const p=e.onClick;return t.map?.on("click",a.current,p),()=>{p&&t?.map&&t.map?.off("click",a.current,p)}},[t.map,e.onClick]),Q.useEffect(()=>{if(!e.onHover||!t?.map||!t?.map?.getLayer?.(a.current))return;const p=e.onHover;return t.map?.on("mousemove",a.current,p),()=>{p&&t?.map&&t.map?.off("mousemove",a.current,p)}},[t.map,e.onHover]),Q.useEffect(()=>{if(!e.onLeave||!t?.map||!t?.map?.getLayer?.(a.current))return;const p=e.onLeave;return t.map?.on("mouseleave",a.current,p),()=>{p&&t?.map&&t.map?.off("mouseleave",a.current,p)}},[t.map,e.onLeave]),{map:t.map,layer:o,layerId:a.current,componentId:t.componentId,mapHook:t}}qf.defaultProps={};const O9=(e,t)=>{switch(e){case"fill":return t?.fill?t.fill:{"fill-color":"#009EE0","fill-outline-color":"#009EE0"};case"line":return t?.line?(console.log(t.line),t.line):{"line-color":"#009EE0","line-width":4,"line-blur":0};case"circle":return t?.circle?t.circle:{"circle-color":"#009EE0","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-radius":5};default:return{}}},kL={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},O_=e=>e?.type==="Feature"?kL?.[e?.geometry?.type]?kL[e.geometry.type]:"circle":e?.type==="FeatureCollection"?e.features.length?O_(e.features[0]):"circle":"fill";function EP(e){const t=la({mapId:e.mapId}),[r,n]=Q.useState(),i=Q.useRef(e.sourceId||(e.idPrefix?e.idPrefix:"Source-")+t.componentId),o=Q.useCallback(()=>{if(t.map&&t.map?.style?._layers){for(const[a,c]of Object.entries(t.map.style._layers))c.source===i.current&&t.map.removeLayer(a);t.map.getSource(i.current)&&t.map.removeSource(i.current)}},[t.map]),l=Q.useCallback(()=>{t.map&&(e.source.type==="geojson"&&!e.source.data||(t.map.map.getSource(i.current)&&o(),t.map?.addSource(i.current,{...e.source}),n(t.map.map.getSource(i.current))))},[e,t,o]);return Q.useEffect(()=>{t.map?.map?.getSource(i.current)&&t.map.map.getSource(i.current)?.setData?.(e.source.data)},[e.source?.data]),Q.useEffect(()=>{t?.map?.map?.getSource?.(e.sourceId)&&e.sourceId===i.current||(i.current=e.sourceId,l())},[t.map,e,l]),Q.useEffect(()=>{if(!t.map)return;const a=()=>{t?.map?.getSource?.(e.sourceId)||l()};return t.map.on("styledata",a),()=>{t?.map&&t.map.off("styledata",a)}},[t.map,l]),Q.useEffect(()=>()=>{o()},[o]),{map:t.map,source:r,componentId:t.componentId,mapHook:t}}const zu=e=>{const t=e.type||O_(e.geojson),r=Q.useRef(e.layerId||"MlGeoJsonLayer-"+Bu()),n=`label-${r.current}`;return Q.useEffect(()=>{e.layerId?r.current=e.layerId:r.current="MlGeoJsonLayer-"+Bu()},[e.layerId]),EP({mapId:e.mapId,sourceId:"source-"+r.current,source:{type:"geojson",data:e.geojson,...typeof e?.options?.source<"u"&&typeof e?.options?.source!="string"?e.options.source:{}}}),qf({mapId:e.mapId,layerId:r.current,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},paint:{...e.paint||O9(t,e.defaultPaintOverrides),...e?.options?.paint},layout:{...e?.layout||{},...e?.options?.layout},type:t},insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),qf({mapId:e.mapId,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},id:n,type:"symbol",maxzoom:24,minzoom:1,...e?.labelOptions?e.labelOptions:{},...e?.options?.filter?{filter:e.options.filter}:{},layout:{"text-font":["Open Sans Regular"],"text-field":`{${e.labelProp}}`,"text-size":12,"text-anchor":"top",...e?.labelOptions?.layout?e.labelOptions.layout:{},visibility:e?.layout?.visibility??e?.options?.layout?.visibility??"visible"},paint:{"text-halo-width":1,"text-halo-color":"#fefefe","text-color":"#121212",...e?.labelOptions?.paint?e.labelOptions.paint:{}}}}),Z.jsx(Z.Fragment,{})};try{zu.displayName="MlGeoJsonLayer",zu.__docgenInfo={description:"Adds source and layer to display GeoJSON data on the map.",displayName:"MlGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the new layer and source that are added to the MapLibre instance",name:"layerId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}},type:{defaultValue:null,description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"symbol"'},{value:'"fill"'},{value:'"line"'},{value:'"circle"'},{value:'"heatmap"'},{value:'"fill-extrusion"'},{value:'"hillshade"'},{value:'"color-relief"'},{value:'"background"'}]}},paint:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | ... 8 more ... | undefined'}},layout:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`,name:"layout",required:!1,type:{name:'{ "fill-sort-key"?: DataDrivenPropertyValueSpecification<number> | undefined; visibility?: "visible" | "none" | undefined; } | { "line-cap"?: PropertyValueSpecification<...> | undefined; ... 4 more ...; visibility?: "visible" | ... 1 more ... | undefined; } | ... 8 more ... | undefined'}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!1,type:{name:'{ circle?: { "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-color"?: DataDrivenPropertyValueSpecification<string> | undefined; ... 8 more ...; "circle-stroke-opacity"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined; fill?: { ...; } | undefined; line?: { ......'}},labelProp:{defaultValue:null,description:"Property name in the GeoJSON object to be used as a label.",name:"labelProp",required:!1,type:{name:"string | undefined"}},labelOptions:{defaultValue:null,description:"Label configuration options.",name:"labelOptions",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}}}}}catch{}function V4(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function xK(e){return Z.jsx(d9,{...e,defaultTheme:SP,themeId:ld})}function wK(e){return function(r){return Z.jsx(xK,{styles:typeof e=="function"?n=>e({theme:n,...r}):e})}}function SK(){return gP}const zn=ZY;function ni(e){return HY(e)}function CK(e){return Jn("MuiSvgIcon",e)}Xn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const EK=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${Wr(t)}`,`fontSize${Wr(r)}`]};return Qn(i,CK,n)},TK=_r("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Wr(r.color)}`],t[`fontSize${Wr(r.fontSize)}`]]}})(zn(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),U4=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:l="inherit",component:a="svg",fontSize:c="medium",htmlColor:p,inheritViewBox:g=!1,titleAccess:v,viewBox:x="0 0 24 24",...b}=n,P=Q.isValidElement(i)&&i.type==="svg",I={...n,color:l,component:a,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:g,viewBox:x,hasSvgAsChild:P},k={};g||(k.viewBox=x);const M=EK(I);return Z.jsxs(TK,{as:a,className:cn(M.root,o),focusable:"false",color:p,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:r,...k,...b,...P&&i.props,ownerState:I,children:[P?i.props.children:i,v?Z.jsx("title",{children:v}):null]})});U4.muiName="SvgIcon";function Ei(e,t){function r(n,i){return Z.jsx(U4,{"data-testid":void 0,ref:i,...n,children:e})}return r.muiName=U4.muiName,Q.memo(Q.forwardRef(r))}function TP(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function jo(e){return e&&e.ownerDocument||document}function Pu(e){return jo(e).defaultView||window}function AL(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Rh(e){const{controlled:t,default:r,name:n,state:i="value"}=e,{current:o}=Q.useRef(t!==void 0),[l,a]=Q.useState(r),c=o?t:l,p=Q.useCallback(g=>{o||a(g)},[]);return[c,p]}function Sl(e){const t=Q.useRef(e);return $l(()=>{t.current=e}),Q.useRef((...r)=>(0,t.current)(...r)).current}function to(...e){const t=Q.useRef(void 0),r=Q.useCallback(n=>{const i=e.map(o=>{if(o==null)return null;if(typeof o=="function"){const l=o,a=l(n);return typeof a=="function"?a:()=>{l(null)}}return o.current=n,()=>{o.current=null}});return()=>{i.forEach(o=>o?.())}},e);return Q.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function PK(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function Kg(e,t){if(!e)return t;function r(l,a){const c={};return Object.keys(a).forEach(p=>{PK(p,a[p])&&typeof l[p]=="function"&&(c[p]=(...g)=>{l[p](...g),a[p](...g)})}),c}if(typeof e=="function"||typeof t=="function")return l=>{const a=typeof t=="function"?t(l):t,c=typeof e=="function"?e({...l,...a}):e,p=cn(l?.className,a?.className,c?.className),g=r(c,a);return{...a,...c,...g,...!!p&&{className:p},...a?.style&&c?.style&&{style:{...a.style,...c.style}},...a?.sx&&c?.sx&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const n=t,i=r(e,n),o=cn(n?.className,e?.className);return{...t,...e,...i,...!!o&&{className:o},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function F9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function G4(e,t){return G4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},G4(e,t)}function B9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,G4(e,t)}const ML={disabled:!1},F_=ft.createContext(null);var IK=function(t){return t.scrollTop},Lv="unmounted",vp="exited",bp="entering",og="entered",H4="exiting",xc=(function(e){B9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var l=i,a=l&&!l.isMounting?n.enter:n.appear,c;return o.appearStatus=null,n.in?a?(c=vp,o.appearStatus=bp):c=og:n.unmountOnExit||n.mountOnEnter?c=Lv:c=vp,o.state={status:c},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var l=i.in;return l&&o.status===Lv?{status:vp}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==bp&&l!==og&&(o=bp):(l===bp||l===og)&&(o=H4)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,l,a;return o=l=a=i,i!=null&&typeof i!="number"&&(o=i.exit,l=i.enter,a=i.appear!==void 0?i.appear:l),{exit:o,enter:l,appear:a}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===bp){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:kv.findDOMNode(this);l&&IK(l)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vp&&this.setState({status:Lv})},r.performEnter=function(i){var o=this,l=this.props.enter,a=this.context?this.context.isMounting:i,c=this.props.nodeRef?[a]:[kv.findDOMNode(this),a],p=c[0],g=c[1],v=this.getTimeouts(),x=a?v.appear:v.enter;if(!i&&!l||ML.disabled){this.safeSetState({status:og},function(){o.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:bp},function(){o.props.onEntering(p,g),o.onTransitionEnd(x,function(){o.safeSetState({status:og},function(){o.props.onEntered(p,g)})})})},r.performExit=function(){var i=this,o=this.props.exit,l=this.getTimeouts(),a=this.props.nodeRef?void 0:kv.findDOMNode(this);if(!o||ML.disabled){this.safeSetState({status:vp},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:H4},function(){i.props.onExiting(a),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:vp},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,l=!0;return this.nextCallback=function(a){l&&(l=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:kv.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!l||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=c[0],g=c[1];this.props.addEndListener(p,g)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===Lv)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=F9(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ft.createElement(F_.Provider,{value:null},typeof l=="function"?l(i,a):ft.cloneElement(ft.Children.only(l),a))},t})(ft.Component);xc.contextType=F_;xc.propTypes={};function Gm(){}xc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Gm,onEntering:Gm,onEntered:Gm,onExit:Gm,onExiting:Gm,onExited:Gm};xc.UNMOUNTED=Lv;xc.EXITED=vp;xc.ENTERING=bp;xc.ENTERED=og;xc.EXITING=H4;function kK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PP(e,t){var r=function(o){return t&&Q.isValidElement(o)?t(o):o},n=Object.create(null);return e&&Q.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function AK(e,t){e=e||{},t=t||{};function r(g){return g in t?t[g]:e[g]}var n=Object.create(null),i=[];for(var o in e)o in t?i.length&&(n[o]=i,i=[]):i.push(o);var l,a={};for(var c in t){if(n[c])for(l=0;l<n[c].length;l++){var p=n[c][l];a[n[c][l]]=r(p)}a[c]=r(c)}for(l=0;l<i.length;l++)a[i[l]]=r(i[l]);return a}function Ap(e,t,r){return r[t]!=null?r[t]:e.props[t]}function MK(e,t){return PP(e.children,function(r){return Q.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:Ap(r,"appear",e),enter:Ap(r,"enter",e),exit:Ap(r,"exit",e)})})}function LK(e,t,r){var n=PP(e.children),i=AK(t,n);return Object.keys(i).forEach(function(o){var l=i[o];if(Q.isValidElement(l)){var a=o in t,c=o in n,p=t[o],g=Q.isValidElement(p)&&!p.props.in;c&&(!a||g)?i[o]=Q.cloneElement(l,{onExited:r.bind(null,l),in:!0,exit:Ap(l,"exit",e),enter:Ap(l,"enter",e)}):!c&&a&&!g?i[o]=Q.cloneElement(l,{in:!1}):c&&a&&Q.isValidElement(p)&&(i[o]=Q.cloneElement(l,{onExited:r.bind(null,l),in:p.props.in,exit:Ap(l,"exit",e),enter:Ap(l,"enter",e)}))}}),i}var RK=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},DK={component:"div",childFactory:function(t){return t}},IP=(function(e){B9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var l=o.handleExited.bind(kK(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var l=o.children,a=o.handleExited,c=o.firstRender;return{children:c?MK(i,a):LK(i,l,a),firstRender:!1}},r.handleExited=function(i,o){var l=PP(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var c=A_({},a.children);return delete c[i.key],{children:c}}))},r.render=function(){var i=this.props,o=i.component,l=i.childFactory,a=F9(i,["component","childFactory"]),c=this.state.contextValue,p=RK(this.state.children).map(l);return delete a.appear,delete a.enter,delete a.exit,o===null?ft.createElement(F_.Provider,{value:c},p):ft.createElement(F_.Provider,{value:c},ft.createElement(o,a,p))},t})(ft.Component);IP.propTypes={};IP.defaultProps=DK;const LL={};function z9(e,t){const r=Q.useRef(LL);return r.current===LL&&(r.current=e(t)),r}const NK=[];function OK(e){Q.useEffect(e,NK)}class m2{static create(){return new m2}currentId=null;start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Af(){const e=z9(m2.create).current;return OK(e.disposeEffect),e}const g2=e=>e.scrollTop;function cd(e,t){const{timeout:r,easing:n,style:i={}}=e;return{duration:i.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:i.transitionDelay}}function FK(e){return Jn("MuiCollapse",e)}Xn("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const BK=e=>{const{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return Qn(n,FK,r)},zK=_r("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(zn(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),jK=_r("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),qK=_r("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),W4=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiCollapse"}),{addEndListener:i,children:o,className:l,collapsedSize:a="0px",component:c,easing:p,in:g,onEnter:v,onEntered:x,onEntering:b,onExit:P,onExited:I,onExiting:k,orientation:M="vertical",style:O,timeout:F=A9.standard,TransitionComponent:N=xc,...$}=n,j={...n,orientation:M,collapsedSize:a},U=BK(j),H=du(),Y=Af(),ae=Q.useRef(null),ee=Q.useRef(),G=typeof a=="number"?`${a}px`:a,ie=M==="horizontal",oe=ie?"width":"height",ue=Q.useRef(null),de=to(r,ue),Me=Re=>$e=>{if(Re){const Oe=ue.current;$e===void 0?Re(Oe):Re(Oe,$e)}},ge=()=>ae.current?ae.current[ie?"clientWidth":"clientHeight"]:0,xe=Me((Re,$e)=>{ae.current&&ie&&(ae.current.style.position="absolute"),Re.style[oe]=G,v&&v(Re,$e)}),Ee=Me((Re,$e)=>{const Oe=ge();ae.current&&ie&&(ae.current.style.position="");const{duration:it,easing:Ye}=cd({style:O,timeout:F,easing:p},{mode:"enter"});if(F==="auto"){const rt=H.transitions.getAutoHeightDuration(Oe);Re.style.transitionDuration=`${rt}ms`,ee.current=rt}else Re.style.transitionDuration=typeof it=="string"?it:`${it}ms`;Re.style[oe]=`${Oe}px`,Re.style.transitionTimingFunction=Ye,b&&b(Re,$e)}),Ae=Me((Re,$e)=>{Re.style[oe]="auto",x&&x(Re,$e)}),fe=Me(Re=>{Re.style[oe]=`${ge()}px`,P&&P(Re)}),Se=Me(I),we=Me(Re=>{const $e=ge(),{duration:Oe,easing:it}=cd({style:O,timeout:F,easing:p},{mode:"exit"});if(F==="auto"){const Ye=H.transitions.getAutoHeightDuration($e);Re.style.transitionDuration=`${Ye}ms`,ee.current=Ye}else Re.style.transitionDuration=typeof Oe=="string"?Oe:`${Oe}ms`;Re.style[oe]=G,Re.style.transitionTimingFunction=it,k&&k(Re)}),De=Re=>{F==="auto"&&Y.start(ee.current||0,Re),i&&i(ue.current,Re)};return Z.jsx(N,{in:g,onEnter:xe,onEntered:Ae,onEntering:Ee,onExit:fe,onExited:Se,onExiting:we,addEndListener:De,nodeRef:ue,timeout:F==="auto"?null:F,...$,children:(Re,{ownerState:$e,...Oe})=>Z.jsx(zK,{as:c,className:cn(U.root,l,{entered:U.entered,exited:!g&&G==="0px"&&U.hidden}[Re]),style:{[ie?"minWidth":"minHeight"]:G,...O},ref:de,ownerState:{...j,state:Re},...Oe,children:Z.jsx(jK,{ownerState:{...j,state:Re},className:U.wrapper,ref:ae,children:Z.jsx(qK,{ownerState:{...j,state:Re},className:U.wrapperInner,children:o})})})})});W4&&(W4.muiSupportAuto=!0);function $K(e){return Jn("MuiPaper",e)}Xn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const VK=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return Qn(o,$K,i)},UK=_r("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(zn(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Oc=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiPaper"}),i=du(),{className:o,component:l="div",elevation:a=1,square:c=!1,variant:p="elevation",...g}=n,v={...n,component:l,elevation:a,square:c,variant:p},x=VK(v);return Z.jsx(UK,{as:l,ownerState:v,className:cn(x.root,o),ref:r,...g,style:{...p==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${R_("#fff",j4(a))}, ${R_("#fff",j4(a))})`}},...g.style}})}),j9=Q.createContext({});function Wd(e){return typeof e=="string"}function q9(e,t,r){return e===void 0||Wd(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function $9(e,t,r){return typeof e=="function"?e(t,r):e}function Rp(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function RL(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function V9(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const b=cn(r?.className,o,i?.className,n?.className),P={...r?.style,...i?.style,...n?.style},I={...r,...i,...n};return b.length>0&&(I.className=b),Object.keys(P).length>0&&(I.style=P),{props:I,internalRef:void 0}}const l=Rp({...i,...n}),a=RL(n),c=RL(i),p=t(l),g=cn(p?.className,r?.className,o,i?.className,n?.className),v={...p?.style,...r?.style,...i?.style,...n?.style},x={...p,...r,...c,...a};return g.length>0&&(x.className=g),Object.keys(v).length>0&&(x.style=v),{props:x,internalRef:p.ref}}function ri(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:o,internalForwardedProps:l,shouldForwardComponentProp:a=!1,...c}=t,{component:p,slots:g={[e]:void 0},slotProps:v={[e]:void 0},...x}=o,b=g[e]||n,P=$9(v[e],i),{props:{component:I,...k},internalRef:M}=V9({className:r,...c,externalForwardedProps:e==="root"?x:void 0,externalSlotProps:P}),O=to(M,P?.ref,t.ref),F=e==="root"?I||p:I,N=q9(b,{...e==="root"&&!p&&!g[e]&&l,...e!=="root"&&!g[e]&&l,...k,...F&&!a&&{as:F},...F&&a&&{component:F},ref:O},i);return[b,N]}function GK(e){return Jn("MuiAccordion",e)}const J1=Xn("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),HK=e=>{const{classes:t,square:r,expanded:n,disabled:i,disableGutters:o}=e;return Qn({root:["root",!r&&"rounded",n&&"expanded",i&&"disabled",!o&&"gutters"],heading:["heading"],region:["region"]},GK,t)},WK=_r(Oc,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${J1.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(zn(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${J1.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${J1.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),zn(({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${J1.expanded}`]:{margin:"16px 0"}}}]}))),XK=_r("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),YK=_r("div",{name:"MuiAccordion",slot:"Region"})({}),ZK=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:l=!1,disabled:a=!1,disableGutters:c=!1,expanded:p,onChange:g,square:v=!1,slots:x={},slotProps:b={},TransitionComponent:P,TransitionProps:I,...k}=n,[M,O]=Rh({controlled:p,default:l,name:"Accordion",state:"expanded"}),F=Q.useCallback(Ee=>{O(!M),g&&g(Ee,!M)},[M,g,O]),[N,...$]=Q.Children.toArray(i),j=Q.useMemo(()=>({expanded:M,disabled:a,disableGutters:c,toggle:F}),[M,a,c,F]),U={...n,square:v,disabled:a,disableGutters:c,expanded:M},H=HK(U),Y={transition:P,...x},ae={transition:I,...b},ee={slots:Y,slotProps:ae},[G,ie]=ri("root",{elementType:WK,externalForwardedProps:{...ee,...k},className:cn(H.root,o),shouldForwardComponentProp:!0,ownerState:U,ref:r,additionalProps:{square:v}}),[oe,ue]=ri("heading",{elementType:XK,externalForwardedProps:ee,className:H.heading,ownerState:U}),[de,Me]=ri("transition",{elementType:W4,externalForwardedProps:ee,ownerState:U}),[ge,xe]=ri("region",{elementType:YK,externalForwardedProps:ee,ownerState:U,className:H.region,additionalProps:{"aria-labelledby":N.props.id,id:N.props["aria-controls"],role:"region"}});return Z.jsxs(G,{...ie,children:[Z.jsx(oe,{...ue,children:Z.jsx(j9.Provider,{value:j,children:N})}),Z.jsx(de,{in:M,timeout:"auto",...Me,children:Z.jsx(ge,{...xe,children:$})})]})});function Jg(e){try{return e.matches(":focus-visible")}catch{}return!1}class B_{static create(){return new B_}static use(){const t=z9(B_.create).current,[r,n]=Q.useState(!1);return t.shouldMount=r,t.setShouldMount=n,Q.useEffect(t.mountEffect,[r]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=JK(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function KK(){return B_.use()}function JK(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function QK(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:l,in:a,onExited:c,timeout:p}=e,[g,v]=Q.useState(!1),x=cn(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),b={width:l,height:l,top:-(l/2)+o,left:-(l/2)+i},P=cn(r.child,g&&r.childLeaving,n&&r.childPulsate);return!a&&!g&&v(!0),Q.useEffect(()=>{if(!a&&c!=null){const I=setTimeout(c,p);return()=>{clearTimeout(I)}}},[c,a,p]),Z.jsx("span",{className:x,style:b,children:Z.jsx("span",{className:P})})}const Ic=Xn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),X4=550,eJ=80,tJ=Q0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,rJ=Q0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,nJ=Q0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,iJ=_r("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),aJ=_r(QK,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ic.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${tJ};
    animation-duration: ${X4}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Ic.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Ic.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ic.childLeaving} {
    opacity: 0;
    animation-name: ${rJ};
    animation-duration: ${X4}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Ic.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${nJ};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,oJ=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:l,...a}=n,[c,p]=Q.useState([]),g=Q.useRef(0),v=Q.useRef(null);Q.useEffect(()=>{v.current&&(v.current(),v.current=null)},[c]);const x=Q.useRef(!1),b=Af(),P=Q.useRef(null),I=Q.useRef(null),k=Q.useCallback(N=>{const{pulsate:$,rippleX:j,rippleY:U,rippleSize:H,cb:Y}=N;p(ae=>[...ae,Z.jsx(aJ,{classes:{ripple:cn(o.ripple,Ic.ripple),rippleVisible:cn(o.rippleVisible,Ic.rippleVisible),ripplePulsate:cn(o.ripplePulsate,Ic.ripplePulsate),child:cn(o.child,Ic.child),childLeaving:cn(o.childLeaving,Ic.childLeaving),childPulsate:cn(o.childPulsate,Ic.childPulsate)},timeout:X4,pulsate:$,rippleX:j,rippleY:U,rippleSize:H},g.current)]),g.current+=1,v.current=Y},[o]),M=Q.useCallback((N={},$={},j=()=>{})=>{const{pulsate:U=!1,center:H=i||$.pulsate,fakeElement:Y=!1}=$;if(N?.type==="mousedown"&&x.current){x.current=!1;return}N?.type==="touchstart"&&(x.current=!0);const ae=Y?null:I.current,ee=ae?ae.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,ie,oe;if(H||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)G=Math.round(ee.width/2),ie=Math.round(ee.height/2);else{const{clientX:ue,clientY:de}=N.touches&&N.touches.length>0?N.touches[0]:N;G=Math.round(ue-ee.left),ie=Math.round(de-ee.top)}if(H)oe=Math.sqrt((2*ee.width**2+ee.height**2)/3),oe%2===0&&(oe+=1);else{const ue=Math.max(Math.abs((ae?ae.clientWidth:0)-G),G)*2+2,de=Math.max(Math.abs((ae?ae.clientHeight:0)-ie),ie)*2+2;oe=Math.sqrt(ue**2+de**2)}N?.touches?P.current===null&&(P.current=()=>{k({pulsate:U,rippleX:G,rippleY:ie,rippleSize:oe,cb:j})},b.start(eJ,()=>{P.current&&(P.current(),P.current=null)})):k({pulsate:U,rippleX:G,rippleY:ie,rippleSize:oe,cb:j})},[i,k,b]),O=Q.useCallback(()=>{M({},{pulsate:!0})},[M]),F=Q.useCallback((N,$)=>{if(b.clear(),N?.type==="touchend"&&P.current){P.current(),P.current=null,b.start(0,()=>{F(N,$)});return}P.current=null,p(j=>j.length>0?j.slice(1):j),v.current=$},[b]);return Q.useImperativeHandle(r,()=>({pulsate:O,start:M,stop:F}),[O,M,F]),Z.jsx(iJ,{className:cn(Ic.root,o.root,l),ref:I,...a,children:Z.jsx(IP,{component:null,exit:!0,children:c})})});function sJ(e){return Jn("MuiButtonBase",e)}const lJ=Xn("MuiButtonBase",["root","disabled","focusVisible"]),uJ=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,l=Qn({root:["root",t&&"disabled",r&&"focusVisible"]},sJ,i);return r&&n&&(l.root+=` ${n}`),l},cJ=_r("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${lJ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),nm=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:l,className:a,component:c="button",disabled:p=!1,disableRipple:g=!1,disableTouchRipple:v=!1,focusRipple:x=!1,focusVisibleClassName:b,LinkComponent:P="a",onBlur:I,onClick:k,onContextMenu:M,onDragLeave:O,onFocus:F,onFocusVisible:N,onKeyDown:$,onKeyUp:j,onMouseDown:U,onMouseLeave:H,onMouseUp:Y,onTouchEnd:ae,onTouchMove:ee,onTouchStart:G,tabIndex:ie=0,TouchRippleProps:oe,touchRippleRef:ue,type:de,...Me}=n,ge=Q.useRef(null),xe=KK(),Ee=to(xe.ref,ue),[Ae,fe]=Q.useState(!1);p&&Ae&&fe(!1),Q.useImperativeHandle(i,()=>({focusVisible:()=>{fe(!0),ge.current.focus()}}),[]);const Se=xe.shouldMount&&!g&&!p;Q.useEffect(()=>{Ae&&x&&!g&&xe.pulsate()},[g,x,Ae,xe]);const we=bf(xe,"start",U,v),De=bf(xe,"stop",M,v),Re=bf(xe,"stop",O,v),$e=bf(xe,"stop",Y,v),Oe=bf(xe,"stop",ar=>{Ae&&ar.preventDefault(),H&&H(ar)},v),it=bf(xe,"start",G,v),Ye=bf(xe,"stop",ae,v),rt=bf(xe,"stop",ee,v),Ie=bf(xe,"stop",ar=>{Jg(ar.target)||fe(!1),I&&I(ar)},!1),It=Sl(ar=>{ge.current||(ge.current=ar.currentTarget),Jg(ar.target)&&(fe(!0),N&&N(ar)),F&&F(ar)}),at=()=>{const ar=ge.current;return c&&c!=="button"&&!(ar.tagName==="A"&&ar.href)},je=Sl(ar=>{x&&!ar.repeat&&Ae&&ar.key===" "&&xe.stop(ar,()=>{xe.start(ar)}),ar.target===ar.currentTarget&&at()&&ar.key===" "&&ar.preventDefault(),$&&$(ar),ar.target===ar.currentTarget&&at()&&ar.key==="Enter"&&!p&&(ar.preventDefault(),k&&k(ar))}),Ht=Sl(ar=>{x&&ar.key===" "&&Ae&&!ar.defaultPrevented&&xe.stop(ar,()=>{xe.pulsate(ar)}),j&&j(ar),k&&ar.target===ar.currentTarget&&at()&&ar.key===" "&&!ar.defaultPrevented&&k(ar)});let Wt=c;Wt==="button"&&(Me.href||Me.to)&&(Wt=P);const zt={};Wt==="button"?(zt.type=de===void 0?"button":de,zt.disabled=p):(!Me.href&&!Me.to&&(zt.role="button"),p&&(zt["aria-disabled"]=p));const st=to(r,ge),sr={...n,centerRipple:o,component:c,disabled:p,disableRipple:g,disableTouchRipple:v,focusRipple:x,tabIndex:ie,focusVisible:Ae},ur=uJ(sr);return Z.jsxs(cJ,{as:Wt,className:cn(ur.root,a),ownerState:sr,onBlur:Ie,onClick:k,onContextMenu:De,onFocus:It,onKeyDown:je,onKeyUp:Ht,onMouseDown:we,onMouseLeave:Oe,onMouseUp:$e,onDragLeave:Re,onTouchEnd:Ye,onTouchMove:rt,onTouchStart:it,ref:st,tabIndex:p?-1:ie,type:de,...zt,...Me,children:[l,Se?Z.jsx(oJ,{ref:Ee,center:o,...oe}):null]})});function bf(e,t,r,n=!1){return Sl(i=>(r&&r(i),n||e[t](i),!0))}function dJ(e){return Jn("MuiAccordionSummary",e)}const Ig=Xn("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),fJ=e=>{const{classes:t,expanded:r,disabled:n,disableGutters:i}=e;return Qn({root:["root",r&&"expanded",n&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},dJ,t)},hJ=_r(nm,{name:"MuiAccordionSummary",slot:"Root"})(zn(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${Ig.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ig.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${Ig.disabled})`]:{cursor:"pointer"},variants:[{props:r=>!r.disableGutters,style:{[`&.${Ig.expanded}`]:{minHeight:64}}}]}})),pJ=_r("span",{name:"MuiAccordionSummary",slot:"Content"})(zn(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${Ig.expanded}`]:{margin:"20px 0"}}}]}))),mJ=_r("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(zn(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${Ig.expanded}`]:{transform:"rotate(180deg)"}}))),gJ=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:l,focusVisibleClassName:a,onClick:c,slots:p,slotProps:g,...v}=n,{disabled:x=!1,disableGutters:b,expanded:P,toggle:I}=Q.useContext(j9),k=ae=>{I&&I(ae),c&&c(ae)},M={...n,expanded:P,disabled:x,disableGutters:b},O=fJ(M),F={slots:p,slotProps:g},[N,$]=ri("root",{ref:r,shouldForwardComponentProp:!0,className:cn(O.root,o),elementType:hJ,externalForwardedProps:{...F,...v},ownerState:M,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:x,"aria-expanded":P,focusVisibleClassName:cn(O.focusVisible,a)},getSlotProps:ae=>({...ae,onClick:ee=>{ae.onClick?.(ee),k(ee)}})}),[j,U]=ri("content",{className:O.content,elementType:pJ,externalForwardedProps:F,ownerState:M}),[H,Y]=ri("expandIconWrapper",{className:O.expandIconWrapper,elementType:mJ,externalForwardedProps:F,ownerState:M});return Z.jsxs(N,{...$,children:[Z.jsx(j,{...U,children:i}),l&&Z.jsx(H,{...Y,children:l})]})});function yJ(e){return typeof e.main=="string"}function vJ(e,t=[]){if(!yJ(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Hs(e=[]){return([,t])=>t&&vJ(t,e)}function bJ(e){return Jn("MuiCircularProgress",e)}Xn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ph=44,Y4=Q0`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Z4=Q0`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,_J=typeof Y4!="string"?dP`
        animation: ${Y4} 1.4s linear infinite;
      `:null,xJ=typeof Z4!="string"?dP`
        animation: ${Z4} 1.4s ease-in-out infinite;
      `:null,wJ=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${Wr(n)}`],svg:["svg"],circle:["circle",`circle${Wr(r)}`,i&&"circleDisableShrink"]};return Qn(o,bJ,t)},SJ=_r("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${Wr(r.color)}`]]}})(zn(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:_J||{animation:`${Y4} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),CJ=_r("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),EJ=_r("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${Wr(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(zn(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:xJ||{animation:`${Z4} 1.4s ease-in-out infinite`}}]}))),y2=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:l=!1,size:a=40,style:c,thickness:p=3.6,value:g=0,variant:v="indeterminate",...x}=n,b={...n,color:o,disableShrink:l,size:a,thickness:p,value:g,variant:v},P=wJ(b),I={},k={},M={};if(v==="determinate"){const O=2*Math.PI*((ph-p)/2);I.strokeDasharray=O.toFixed(3),M["aria-valuenow"]=Math.round(g),I.strokeDashoffset=`${((100-g)/100*O).toFixed(3)}px`,k.transform="rotate(-90deg)"}return Z.jsx(SJ,{className:cn(P.root,i),style:{width:a,height:a,...k,...c},ownerState:b,ref:r,role:"progressbar",...M,...x,children:Z.jsx(CJ,{className:P.svg,ownerState:b,viewBox:`${ph/2} ${ph/2} ${ph} ${ph}`,children:Z.jsx(EJ,{className:P.circle,style:I,ownerState:b,cx:ph,cy:ph,r:(ph-p)/2,fill:"none",strokeWidth:p})})})});function TJ(e){return Jn("MuiIconButton",e)}const DL=Xn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),PJ=e=>{const{classes:t,disabled:r,color:n,edge:i,size:o,loading:l}=e,a={root:["root",l&&"loading",r&&"disabled",n!=="default"&&`color${Wr(n)}`,i&&`edge${Wr(i)}`,`size${Wr(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Qn(a,TJ,t)},IJ=_r(nm,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${Wr(r.color)}`],r.edge&&t[`edge${Wr(r.edge)}`],t[`size${Wr(r.size)}`]]}})(zn(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),zn(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${DL.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${DL.loading}`]:{color:"transparent"}}))),kJ=_r("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),hc=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:l,color:a="default",disabled:c=!1,disableFocusRipple:p=!1,size:g="medium",id:v,loading:x=null,loadingIndicator:b,...P}=n,I=$h(v),k=b??Z.jsx(y2,{"aria-labelledby":I,color:"inherit",size:16}),M={...n,edge:i,color:a,disabled:c,disableFocusRipple:p,loading:x,loadingIndicator:k,size:g},O=PJ(M);return Z.jsxs(IJ,{id:x?I:v,className:cn(O.root,l),centerRipple:!0,focusRipple:!p,disabled:c||x,ref:r,...P,ownerState:M,children:[typeof x=="boolean"&&Z.jsx("span",{className:O.loadingWrapper,style:{display:"contents"},children:Z.jsx(kJ,{className:O.loadingIndicator,ownerState:M,children:x&&k})}),o]})});function AJ(e){return Jn("MuiTypography",e)}const NL=Xn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),MJ={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},LJ=SK(),RJ=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:l}=e,a={root:["root",o,e.align!=="inherit"&&`align${Wr(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return Qn(a,AJ,l)},DJ=_r("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${Wr(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(zn(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Wr(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),OL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ko=Q.forwardRef(function(t,r){const{color:n,...i}=ni({props:t,name:"MuiTypography"}),o=!MJ[n],l=LJ({...i,...o&&{color:n}}),{align:a="inherit",className:c,component:p,gutterBottom:g=!1,noWrap:v=!1,paragraph:x=!1,variant:b="body1",variantMapping:P=OL,...I}=l,k={...l,align:a,color:n,className:c,component:p,gutterBottom:g,noWrap:v,paragraph:x,variant:b,variantMapping:P},M=p||(x?"p":P[b]||OL[b])||"span",O=RJ(k);return Z.jsx(DJ,{as:M,ref:r,className:cn(O.root,c),...I,ownerState:k,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...I.style}})});function NJ(e){return Jn("MuiAppBar",e)}Xn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const OJ=e=>{const{color:t,position:r,classes:n}=e,i={root:["root",`color${Wr(t)}`,`position${Wr(r)}`]};return Qn(i,NJ,n)},FL=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,FJ=_r(Oc,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${Wr(r.position)}`],t[`color${Wr(r.color)}`]]}})(zn(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Hs(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?FL(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?FL(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),BJ=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:l=!1,position:a="fixed",...c}=n,p={...n,color:o,position:a,enableColorOnDark:l},g=OJ(p);return Z.jsx(FJ,{square:!0,component:"header",ownerState:p,elevation:4,className:cn(g.root,i,a==="fixed"&&"mui-fixed"),ref:r,...c})});var ju="top",Fc="bottom",Bc="right",qu="left",kP="auto",a1=[ju,Fc,Bc,qu],Qg="start",_0="end",zJ="clippingParents",U9="viewport",nv="popper",jJ="reference",BL=a1.reduce(function(e,t){return e.concat([t+"-"+Qg,t+"-"+_0])},[]),G9=[].concat(a1,[kP]).reduce(function(e,t){return e.concat([t,t+"-"+Qg,t+"-"+_0])},[]),qJ="beforeRead",$J="read",VJ="afterRead",UJ="beforeMain",GJ="main",HJ="afterMain",WJ="beforeWrite",XJ="write",YJ="afterWrite",ZJ=[qJ,$J,VJ,UJ,GJ,HJ,WJ,XJ,YJ];function Jd(e){return e?(e.nodeName||"").toLowerCase():null}function pc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function qp(e){var t=pc(e).Element;return e instanceof t||e instanceof Element}function Rc(e){var t=pc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function AP(e){if(typeof ShadowRoot>"u")return!1;var t=pc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function KJ(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!Rc(o)||!Jd(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(l){var a=i[l];a===!1?o.removeAttribute(l):o.setAttribute(l,a===!0?"":a)}))})}function JJ(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},l=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=l.reduce(function(c,p){return c[p]="",c},{});!Rc(i)||!Jd(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}}const QJ={name:"applyStyles",enabled:!0,phase:"write",fn:KJ,effect:JJ,requires:["computeStyles"]};function Xd(e){return e.split("-")[0]}var Dp=Math.max,z_=Math.min,ey=Math.round;function K4(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function H9(){return!/^((?!chrome|android).)*safari/i.test(K4())}function ty(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&Rc(e)&&(i=e.offsetWidth>0&&ey(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&ey(n.height)/e.offsetHeight||1);var l=qp(e)?pc(e):window,a=l.visualViewport,c=!H9()&&r,p=(n.left+(c&&a?a.offsetLeft:0))/i,g=(n.top+(c&&a?a.offsetTop:0))/o,v=n.width/i,x=n.height/o;return{width:v,height:x,top:g,right:p+v,bottom:g+x,left:p,x:p,y:g}}function MP(e){var t=ty(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function W9(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&AP(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function $f(e){return pc(e).getComputedStyle(e)}function eQ(e){return["table","td","th"].indexOf(Jd(e))>=0}function Uh(e){return((qp(e)?e.ownerDocument:e.document)||window.document).documentElement}function v2(e){return Jd(e)==="html"?e:e.assignedSlot||e.parentNode||(AP(e)?e.host:null)||Uh(e)}function zL(e){return!Rc(e)||$f(e).position==="fixed"?null:e.offsetParent}function tQ(e){var t=/firefox/i.test(K4()),r=/Trident/i.test(K4());if(r&&Rc(e)){var n=$f(e);if(n.position==="fixed")return null}var i=v2(e);for(AP(i)&&(i=i.host);Rc(i)&&["html","body"].indexOf(Jd(i))<0;){var o=$f(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function o1(e){for(var t=pc(e),r=zL(e);r&&eQ(r)&&$f(r).position==="static";)r=zL(r);return r&&(Jd(r)==="html"||Jd(r)==="body"&&$f(r).position==="static")?t:r||tQ(e)||t}function LP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qv(e,t,r){return Dp(e,z_(t,r))}function rQ(e,t,r){var n=Qv(e,t,r);return n>r?r:n}function X9(){return{top:0,right:0,bottom:0,left:0}}function Y9(e){return Object.assign({},X9(),e)}function Z9(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var nQ=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Y9(typeof t!="number"?t:Z9(t,a1))};function iQ(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,l=r.modifiersData.popperOffsets,a=Xd(r.placement),c=LP(a),p=[qu,Bc].indexOf(a)>=0,g=p?"height":"width";if(!(!o||!l)){var v=nQ(i.padding,r),x=MP(o),b=c==="y"?ju:qu,P=c==="y"?Fc:Bc,I=r.rects.reference[g]+r.rects.reference[c]-l[c]-r.rects.popper[g],k=l[c]-r.rects.reference[c],M=o1(o),O=M?c==="y"?M.clientHeight||0:M.clientWidth||0:0,F=I/2-k/2,N=v[b],$=O-x[g]-v[P],j=O/2-x[g]/2+F,U=Qv(N,j,$),H=c;r.modifiersData[n]=(t={},t[H]=U,t.centerOffset=U-j,t)}}function aQ(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||W9(t.elements.popper,i)&&(t.elements.arrow=i))}const oQ={name:"arrow",enabled:!0,phase:"main",fn:iQ,effect:aQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ry(e){return e.split("-")[1]}var sQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lQ(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:ey(r*i)/i||0,y:ey(n*i)/i||0}}function jL(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,l=e.offsets,a=e.position,c=e.gpuAcceleration,p=e.adaptive,g=e.roundOffsets,v=e.isFixed,x=l.x,b=x===void 0?0:x,P=l.y,I=P===void 0?0:P,k=typeof g=="function"?g({x:b,y:I}):{x:b,y:I};b=k.x,I=k.y;var M=l.hasOwnProperty("x"),O=l.hasOwnProperty("y"),F=qu,N=ju,$=window;if(p){var j=o1(r),U="clientHeight",H="clientWidth";if(j===pc(r)&&(j=Uh(r),$f(j).position!=="static"&&a==="absolute"&&(U="scrollHeight",H="scrollWidth")),j=j,i===ju||(i===qu||i===Bc)&&o===_0){N=Fc;var Y=v&&j===$&&$.visualViewport?$.visualViewport.height:j[U];I-=Y-n.height,I*=c?1:-1}if(i===qu||(i===ju||i===Fc)&&o===_0){F=Bc;var ae=v&&j===$&&$.visualViewport?$.visualViewport.width:j[H];b-=ae-n.width,b*=c?1:-1}}var ee=Object.assign({position:a},p&&sQ),G=g===!0?lQ({x:b,y:I},pc(r)):{x:b,y:I};if(b=G.x,I=G.y,c){var ie;return Object.assign({},ee,(ie={},ie[N]=O?"0":"",ie[F]=M?"0":"",ie.transform=($.devicePixelRatio||1)<=1?"translate("+b+"px, "+I+"px)":"translate3d("+b+"px, "+I+"px, 0)",ie))}return Object.assign({},ee,(t={},t[N]=O?I+"px":"",t[F]=M?b+"px":"",t.transform="",t))}function uQ(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,l=o===void 0?!0:o,a=r.roundOffsets,c=a===void 0?!0:a,p={placement:Xd(t.placement),variation:ry(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jL(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jL(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const cQ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uQ,data:{}};var Q1={passive:!0};function dQ(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,l=n.resize,a=l===void 0?!0:l,c=pc(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&p.forEach(function(g){g.addEventListener("scroll",r.update,Q1)}),a&&c.addEventListener("resize",r.update,Q1),function(){o&&p.forEach(function(g){g.removeEventListener("scroll",r.update,Q1)}),a&&c.removeEventListener("resize",r.update,Q1)}}const fQ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dQ,data:{}};var hQ={left:"right",right:"left",bottom:"top",top:"bottom"};function u_(e){return e.replace(/left|right|bottom|top/g,function(t){return hQ[t]})}var pQ={start:"end",end:"start"};function qL(e){return e.replace(/start|end/g,function(t){return pQ[t]})}function RP(e){var t=pc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function DP(e){return ty(Uh(e)).left+RP(e).scrollLeft}function mQ(e,t){var r=pc(e),n=Uh(e),i=r.visualViewport,o=n.clientWidth,l=n.clientHeight,a=0,c=0;if(i){o=i.width,l=i.height;var p=H9();(p||!p&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:l,x:a+DP(e),y:c}}function gQ(e){var t,r=Uh(e),n=RP(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Dp(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=Dp(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+DP(e),c=-n.scrollTop;return $f(i||r).direction==="rtl"&&(a+=Dp(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:l,x:a,y:c}}function NP(e){var t=$f(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function K9(e){return["html","body","#document"].indexOf(Jd(e))>=0?e.ownerDocument.body:Rc(e)&&NP(e)?e:K9(v2(e))}function e0(e,t){var r;t===void 0&&(t=[]);var n=K9(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=pc(n),l=i?[o].concat(o.visualViewport||[],NP(n)?n:[]):n,a=t.concat(l);return i?a:a.concat(e0(v2(l)))}function J4(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function yQ(e,t){var r=ty(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function $L(e,t,r){return t===U9?J4(mQ(e,r)):qp(t)?yQ(t,r):J4(gQ(Uh(e)))}function vQ(e){var t=e0(v2(e)),r=["absolute","fixed"].indexOf($f(e).position)>=0,n=r&&Rc(e)?o1(e):e;return qp(n)?t.filter(function(i){return qp(i)&&W9(i,n)&&Jd(i)!=="body"}):[]}function bQ(e,t,r,n){var i=t==="clippingParents"?vQ(e):[].concat(t),o=[].concat(i,[r]),l=o[0],a=o.reduce(function(c,p){var g=$L(e,p,n);return c.top=Dp(g.top,c.top),c.right=z_(g.right,c.right),c.bottom=z_(g.bottom,c.bottom),c.left=Dp(g.left,c.left),c},$L(e,l,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function J9(e){var t=e.reference,r=e.element,n=e.placement,i=n?Xd(n):null,o=n?ry(n):null,l=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,c;switch(i){case ju:c={x:l,y:t.y-r.height};break;case Fc:c={x:l,y:t.y+t.height};break;case Bc:c={x:t.x+t.width,y:a};break;case qu:c={x:t.x-r.width,y:a};break;default:c={x:t.x,y:t.y}}var p=i?LP(i):null;if(p!=null){var g=p==="y"?"height":"width";switch(o){case Qg:c[p]=c[p]-(t[g]/2-r[g]/2);break;case _0:c[p]=c[p]+(t[g]/2-r[g]/2);break}}return c}function x0(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,l=o===void 0?e.strategy:o,a=r.boundary,c=a===void 0?zJ:a,p=r.rootBoundary,g=p===void 0?U9:p,v=r.elementContext,x=v===void 0?nv:v,b=r.altBoundary,P=b===void 0?!1:b,I=r.padding,k=I===void 0?0:I,M=Y9(typeof k!="number"?k:Z9(k,a1)),O=x===nv?jJ:nv,F=e.rects.popper,N=e.elements[P?O:x],$=bQ(qp(N)?N:N.contextElement||Uh(e.elements.popper),c,g,l),j=ty(e.elements.reference),U=J9({reference:j,element:F,placement:i}),H=J4(Object.assign({},F,U)),Y=x===nv?H:j,ae={top:$.top-Y.top+M.top,bottom:Y.bottom-$.bottom+M.bottom,left:$.left-Y.left+M.left,right:Y.right-$.right+M.right},ee=e.modifiersData.offset;if(x===nv&&ee){var G=ee[i];Object.keys(ae).forEach(function(ie){var oe=[Bc,Fc].indexOf(ie)>=0?1:-1,ue=[ju,Fc].indexOf(ie)>=0?"y":"x";ae[ie]+=G[ue]*oe})}return ae}function _Q(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,l=r.padding,a=r.flipVariations,c=r.allowedAutoPlacements,p=c===void 0?G9:c,g=ry(n),v=g?a?BL:BL.filter(function(P){return ry(P)===g}):a1,x=v.filter(function(P){return p.indexOf(P)>=0});x.length===0&&(x=v);var b=x.reduce(function(P,I){return P[I]=x0(e,{placement:I,boundary:i,rootBoundary:o,padding:l})[Xd(I)],P},{});return Object.keys(b).sort(function(P,I){return b[P]-b[I]})}function xQ(e){if(Xd(e)===kP)return[];var t=u_(e);return[qL(e),t,qL(t)]}function wQ(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,l=r.altAxis,a=l===void 0?!0:l,c=r.fallbackPlacements,p=r.padding,g=r.boundary,v=r.rootBoundary,x=r.altBoundary,b=r.flipVariations,P=b===void 0?!0:b,I=r.allowedAutoPlacements,k=t.options.placement,M=Xd(k),O=M===k,F=c||(O||!P?[u_(k)]:xQ(k)),N=[k].concat(F).reduce(function(we,De){return we.concat(Xd(De)===kP?_Q(t,{placement:De,boundary:g,rootBoundary:v,padding:p,flipVariations:P,allowedAutoPlacements:I}):De)},[]),$=t.rects.reference,j=t.rects.popper,U=new Map,H=!0,Y=N[0],ae=0;ae<N.length;ae++){var ee=N[ae],G=Xd(ee),ie=ry(ee)===Qg,oe=[ju,Fc].indexOf(G)>=0,ue=oe?"width":"height",de=x0(t,{placement:ee,boundary:g,rootBoundary:v,altBoundary:x,padding:p}),Me=oe?ie?Bc:qu:ie?Fc:ju;$[ue]>j[ue]&&(Me=u_(Me));var ge=u_(Me),xe=[];if(o&&xe.push(de[G]<=0),a&&xe.push(de[Me]<=0,de[ge]<=0),xe.every(function(we){return we})){Y=ee,H=!1;break}U.set(ee,xe)}if(H)for(var Ee=P?3:1,Ae=function(De){var Re=N.find(function($e){var Oe=U.get($e);if(Oe)return Oe.slice(0,De).every(function(it){return it})});if(Re)return Y=Re,"break"},fe=Ee;fe>0;fe--){var Se=Ae(fe);if(Se==="break")break}t.placement!==Y&&(t.modifiersData[n]._skip=!0,t.placement=Y,t.reset=!0)}}const SQ={name:"flip",enabled:!0,phase:"main",fn:wQ,requiresIfExists:["offset"],data:{_skip:!1}};function VL(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function UL(e){return[ju,Bc,Fc,qu].some(function(t){return e[t]>=0})}function CQ(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,l=x0(t,{elementContext:"reference"}),a=x0(t,{altBoundary:!0}),c=VL(l,n),p=VL(a,i,o),g=UL(c),v=UL(p);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:p,isReferenceHidden:g,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":v})}const EQ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:CQ};function TQ(e,t,r){var n=Xd(e),i=[qu,ju].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=o[0],a=o[1];return l=l||0,a=(a||0)*i,[qu,Bc].indexOf(n)>=0?{x:a,y:l}:{x:l,y:a}}function PQ(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,l=G9.reduce(function(g,v){return g[v]=TQ(v,t.rects,o),g},{}),a=l[t.placement],c=a.x,p=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=p),t.modifiersData[n]=l}const IQ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:PQ};function kQ(e){var t=e.state,r=e.name;t.modifiersData[r]=J9({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const AQ={name:"popperOffsets",enabled:!0,phase:"read",fn:kQ,data:{}};function MQ(e){return e==="x"?"y":"x"}function LQ(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,l=r.altAxis,a=l===void 0?!1:l,c=r.boundary,p=r.rootBoundary,g=r.altBoundary,v=r.padding,x=r.tether,b=x===void 0?!0:x,P=r.tetherOffset,I=P===void 0?0:P,k=x0(t,{boundary:c,rootBoundary:p,padding:v,altBoundary:g}),M=Xd(t.placement),O=ry(t.placement),F=!O,N=LP(M),$=MQ(N),j=t.modifiersData.popperOffsets,U=t.rects.reference,H=t.rects.popper,Y=typeof I=="function"?I(Object.assign({},t.rects,{placement:t.placement})):I,ae=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(j){if(o){var ie,oe=N==="y"?ju:qu,ue=N==="y"?Fc:Bc,de=N==="y"?"height":"width",Me=j[N],ge=Me+k[oe],xe=Me-k[ue],Ee=b?-H[de]/2:0,Ae=O===Qg?U[de]:H[de],fe=O===Qg?-H[de]:-U[de],Se=t.elements.arrow,we=b&&Se?MP(Se):{width:0,height:0},De=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:X9(),Re=De[oe],$e=De[ue],Oe=Qv(0,U[de],we[de]),it=F?U[de]/2-Ee-Oe-Re-ae.mainAxis:Ae-Oe-Re-ae.mainAxis,Ye=F?-U[de]/2+Ee+Oe+$e+ae.mainAxis:fe+Oe+$e+ae.mainAxis,rt=t.elements.arrow&&o1(t.elements.arrow),Ie=rt?N==="y"?rt.clientTop||0:rt.clientLeft||0:0,It=(ie=ee?.[N])!=null?ie:0,at=Me+it-It-Ie,je=Me+Ye-It,Ht=Qv(b?z_(ge,at):ge,Me,b?Dp(xe,je):xe);j[N]=Ht,G[N]=Ht-Me}if(a){var Wt,zt=N==="x"?ju:qu,st=N==="x"?Fc:Bc,sr=j[$],ur=$==="y"?"height":"width",ar=sr+k[zt],yr=sr-k[st],pr=[ju,qu].indexOf(M)!==-1,Jt=(Wt=ee?.[$])!=null?Wt:0,ir=pr?ar:sr-U[ur]-H[ur]-Jt+ae.altAxis,xr=pr?sr+U[ur]+H[ur]-Jt-ae.altAxis:yr,rr=b&&pr?rQ(ir,sr,xr):Qv(b?ir:ar,sr,b?xr:yr);j[$]=rr,G[$]=rr-sr}t.modifiersData[n]=G}}const RQ={name:"preventOverflow",enabled:!0,phase:"main",fn:LQ,requiresIfExists:["offset"]};function DQ(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function NQ(e){return e===pc(e)||!Rc(e)?RP(e):DQ(e)}function OQ(e){var t=e.getBoundingClientRect(),r=ey(t.width)/e.offsetWidth||1,n=ey(t.height)/e.offsetHeight||1;return r!==1||n!==1}function FQ(e,t,r){r===void 0&&(r=!1);var n=Rc(t),i=Rc(t)&&OQ(t),o=Uh(t),l=ty(e,i,r),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Jd(t)!=="body"||NP(o))&&(a=NQ(t)),Rc(t)?(c=ty(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=DP(o))),{x:l.left+a.scrollLeft-c.x,y:l.top+a.scrollTop-c.y,width:l.width,height:l.height}}function BQ(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(a){if(!r.has(a)){var c=t.get(a);c&&i(c)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function zQ(e){var t=BQ(e);return ZJ.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function jQ(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function qQ(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var GL={placement:"bottom",modifiers:[],strategy:"absolute"};function HL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function $Q(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?GL:i;return function(a,c,p){p===void 0&&(p=o);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},GL,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},v=[],x=!1,b={state:g,setOptions:function(M){var O=typeof M=="function"?M(g.options):M;I(),g.options=Object.assign({},o,g.options,O),g.scrollParents={reference:qp(a)?e0(a):a.contextElement?e0(a.contextElement):[],popper:e0(c)};var F=zQ(qQ([].concat(n,g.options.modifiers)));return g.orderedModifiers=F.filter(function(N){return N.enabled}),P(),b.update()},forceUpdate:function(){if(!x){var M=g.elements,O=M.reference,F=M.popper;if(HL(O,F)){g.rects={reference:FQ(O,o1(F),g.options.strategy==="fixed"),popper:MP(F)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(ae){return g.modifiersData[ae.name]=Object.assign({},ae.data)});for(var N=0;N<g.orderedModifiers.length;N++){if(g.reset===!0){g.reset=!1,N=-1;continue}var $=g.orderedModifiers[N],j=$.fn,U=$.options,H=U===void 0?{}:U,Y=$.name;typeof j=="function"&&(g=j({state:g,options:H,name:Y,instance:b})||g)}}}},update:jQ(function(){return new Promise(function(k){b.forceUpdate(),k(g)})}),destroy:function(){I(),x=!0}};if(!HL(a,c))return b;b.setOptions(p).then(function(k){!x&&p.onFirstUpdate&&p.onFirstUpdate(k)});function P(){g.orderedModifiers.forEach(function(k){var M=k.name,O=k.options,F=O===void 0?{}:O,N=k.effect;if(typeof N=="function"){var $=N({state:g,name:M,instance:b,options:F}),j=function(){};v.push($||j)}})}function I(){v.forEach(function(k){return k()}),v=[]}return b}}var VQ=[fQ,AQ,cQ,QJ,IQ,SQ,RQ,oQ,EQ],UQ=$Q({defaultModifiers:VQ});function jd(e){const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...o}=e,l=i?{}:$9(r,n),{props:a,internalRef:c}=V9({...o,externalSlotProps:l}),p=to(c,l?.ref,e.additionalProps?.ref);return q9(t,{...a,ref:p},n)}function Xf(e){return parseInt(Q.version,10)>=19?e?.props?.ref||null:e?.ref||null}function GQ(e){return typeof e=="function"?e():e}const Q9=Q.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[l,a]=Q.useState(null),c=to(Q.isValidElement(n)?Xf(n):null,r);if($l(()=>{o||a(GQ(i)||document.body)},[i,o]),$l(()=>{if(l&&!o)return AL(r,l),()=>{AL(r,null)}},[r,l,o]),o){if(Q.isValidElement(n)){const p={ref:c};return Q.cloneElement(n,p)}return n}return l&&kf.createPortal(n,l)});function HQ(e){return Jn("MuiPopper",e)}Xn("MuiPopper",["root"]);function WQ(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Q4(e){return typeof e=="function"?e():e}function XQ(e){return e.nodeType!==void 0}const YQ=e=>{const{classes:t}=e;return Qn({root:["root"]},HQ,t)},ZQ={},KQ=Q.forwardRef(function(t,r){const{anchorEl:n,children:i,direction:o,disablePortal:l,modifiers:a,open:c,placement:p,popperOptions:g,popperRef:v,slotProps:x={},slots:b={},TransitionProps:P,ownerState:I,...k}=t,M=Q.useRef(null),O=to(M,r),F=Q.useRef(null),N=to(F,v),$=Q.useRef(N);$l(()=>{$.current=N},[N]),Q.useImperativeHandle(v,()=>F.current,[]);const j=WQ(p,o),[U,H]=Q.useState(j),[Y,ae]=Q.useState(Q4(n));Q.useEffect(()=>{F.current&&F.current.forceUpdate()}),Q.useEffect(()=>{n&&ae(Q4(n))},[n]),$l(()=>{if(!Y||!c)return;const ue=ge=>{H(ge.placement)};let de=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ge})=>{ue(ge)}}];a!=null&&(de=de.concat(a)),g&&g.modifiers!=null&&(de=de.concat(g.modifiers));const Me=UQ(Y,M.current,{placement:j,...g,modifiers:de});return $.current(Me),()=>{Me.destroy(),$.current(null)}},[Y,l,a,c,g,j]);const ee={placement:U};P!==null&&(ee.TransitionProps=P);const G=YQ(t),ie=b.root??"div",oe=jd({elementType:ie,externalSlotProps:x.root,externalForwardedProps:k,additionalProps:{role:"tooltip",ref:O},ownerState:t,className:G.root});return Z.jsx(ie,{...oe,children:typeof i=="function"?i(ee):i})}),JQ=Q.forwardRef(function(t,r){const{anchorEl:n,children:i,container:o,direction:l="ltr",disablePortal:a=!1,keepMounted:c=!1,modifiers:p,open:g,placement:v="bottom",popperOptions:x=ZQ,popperRef:b,style:P,transition:I=!1,slotProps:k={},slots:M={},...O}=t,[F,N]=Q.useState(!0),$=()=>{N(!1)},j=()=>{N(!0)};if(!c&&!g&&(!I||F))return null;let U;if(o)U=o;else if(n){const ae=Q4(n);U=ae&&XQ(ae)?jo(ae).body:jo(null).body}const H=!g&&c&&(!I||F)?"none":void 0,Y=I?{in:g,onEnter:$,onExited:j}:void 0;return Z.jsx(Q9,{disablePortal:a,container:U,children:Z.jsx(KQ,{anchorEl:n,direction:l,disablePortal:a,modifiers:p,ref:r,open:I?!F:g,placement:v,popperOptions:x,popperRef:b,slotProps:k,slots:M,...O,style:{position:"fixed",top:0,left:0,display:H,...P},TransitionProps:Y,children:i})})}),QQ=_r(JQ,{name:"MuiPopper",slot:"Root"})({}),e7=Q.forwardRef(function(t,r){const n=i1(),i=ni({props:t,name:"MuiPopper"}),{anchorEl:o,component:l,components:a,componentsProps:c,container:p,disablePortal:g,keepMounted:v,modifiers:x,open:b,placement:P,popperOptions:I,popperRef:k,transition:M,slots:O,slotProps:F,...N}=i,$=O?.root??a?.Root,j={anchorEl:o,container:p,disablePortal:g,keepMounted:v,modifiers:x,open:b,placement:P,popperOptions:I,popperRef:k,transition:M,...N};return Z.jsx(QQ,{as:l,direction:n?"rtl":"ltr",slots:{root:$},slotProps:F??c,...j,ref:r})});function eb(e){return parseInt(e,10)||0}const eee={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function tee(e){for(const t in e)return!1;return!0}function WL(e){return tee(e)||e.outerHeightStyle===0&&!e.overflowing}const ree=Q.forwardRef(function(t,r){const{onChange:n,maxRows:i,minRows:o=1,style:l,value:a,...c}=t,{current:p}=Q.useRef(a!=null),g=Q.useRef(null),v=to(r,g),x=Q.useRef(null),b=Q.useRef(null),P=Q.useCallback(()=>{const F=g.current,N=b.current;if(!F||!N)return;const j=Pu(F).getComputedStyle(F);if(j.width==="0px")return{outerHeightStyle:0,overflowing:!1};N.style.width=j.width,N.value=F.value||t.placeholder||"x",N.value.slice(-1)===`
`&&(N.value+=" ");const U=j.boxSizing,H=eb(j.paddingBottom)+eb(j.paddingTop),Y=eb(j.borderBottomWidth)+eb(j.borderTopWidth),ae=N.scrollHeight;N.value="x";const ee=N.scrollHeight;let G=ae;o&&(G=Math.max(Number(o)*ee,G)),i&&(G=Math.min(Number(i)*ee,G)),G=Math.max(G,ee);const ie=G+(U==="border-box"?H+Y:0),oe=Math.abs(G-ae)<=1;return{outerHeightStyle:ie,overflowing:oe}},[i,o,t.placeholder]),I=Sl(()=>{const F=g.current,N=P();if(!F||!N||WL(N))return!1;const $=N.outerHeightStyle;return x.current!=null&&x.current!==$}),k=Q.useCallback(()=>{const F=g.current,N=P();if(!F||!N||WL(N))return;const $=N.outerHeightStyle;x.current!==$&&(x.current=$,F.style.height=`${$}px`),F.style.overflow=N.overflowing?"hidden":""},[P]),M=Q.useRef(-1);$l(()=>{const F=TP(k),N=g?.current;if(!N)return;const $=Pu(N);$.addEventListener("resize",F);let j;return typeof ResizeObserver<"u"&&(j=new ResizeObserver(()=>{I()&&(j.unobserve(N),cancelAnimationFrame(M.current),k(),M.current=requestAnimationFrame(()=>{j.observe(N)}))}),j.observe(N)),()=>{F.clear(),cancelAnimationFrame(M.current),$.removeEventListener("resize",F),j&&j.disconnect()}},[P,k,I]),$l(()=>{k()});const O=F=>{p||k();const N=F.target,$=N.value.length,j=N.value.endsWith(`
`),U=N.selectionStart===$;j&&U&&N.setSelectionRange($,$),n&&n(F)};return Z.jsxs(Q.Fragment,{children:[Z.jsx("textarea",{value:a,onChange:O,ref:v,rows:o,style:l,...c}),Z.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:b,tabIndex:-1,style:{...eee.shadow,...l,paddingTop:0,paddingBottom:0}})]})});function Gh({props:e,states:t,muiFormControl:r}){return t.reduce((n,i)=>(n[i]=e[i],r&&typeof e[i]>"u"&&(n[i]=r[i]),n),{})}const OP=Q.createContext(void 0);function nf(){return Q.useContext(OP)}function XL(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function j_(e,t=!1){return e&&(XL(e.value)&&e.value!==""||t&&XL(e.defaultValue)&&e.defaultValue!=="")}function nee(e){return e.startAdornment}function iee(e){return Jn("MuiInputBase",e)}const ny=Xn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var YL;const b2=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${Wr(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},_2=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},aee=e=>{const{classes:t,color:r,disabled:n,error:i,endAdornment:o,focused:l,formControl:a,fullWidth:c,hiddenLabel:p,multiline:g,readOnly:v,size:x,startAdornment:b,type:P}=e,I={root:["root",`color${Wr(r)}`,n&&"disabled",i&&"error",c&&"fullWidth",l&&"focused",a&&"formControl",x&&x!=="medium"&&`size${Wr(x)}`,g&&"multiline",b&&"adornedStart",o&&"adornedEnd",p&&"hiddenLabel",v&&"readOnly"],input:["input",n&&"disabled",P==="search"&&"inputTypeSearch",g&&"inputMultiline",x==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",b&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return Qn(I,iee,t)},x2=_r("div",{name:"MuiInputBase",slot:"Root",overridesResolver:b2})(zn(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ny.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),w2=_r("input",{name:"MuiInputBase",slot:"Input",overridesResolver:_2})(zn(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ny.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${ny.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),ZL=wK({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),FP=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:l,className:a,color:c,components:p={},componentsProps:g={},defaultValue:v,disabled:x,disableInjectingGlobalStyles:b,endAdornment:P,error:I,fullWidth:k=!1,id:M,inputComponent:O="input",inputProps:F={},inputRef:N,margin:$,maxRows:j,minRows:U,multiline:H=!1,name:Y,onBlur:ae,onChange:ee,onClick:G,onFocus:ie,onKeyDown:oe,onKeyUp:ue,placeholder:de,readOnly:Me,renderSuffix:ge,rows:xe,size:Ee,slotProps:Ae={},slots:fe={},startAdornment:Se,type:we="text",value:De,...Re}=n,$e=F.value!=null?F.value:De,{current:Oe}=Q.useRef($e!=null),it=Q.useRef(),Ye=Q.useCallback(_e=>{},[]),rt=to(it,N,F.ref,Ye),[Ie,It]=Q.useState(!1),at=nf(),je=Gh({props:n,muiFormControl:at,states:["color","disabled","error","hiddenLabel","size","required","filled"]});je.focused=at?at.focused:Ie,Q.useEffect(()=>{!at&&x&&Ie&&(It(!1),ae&&ae())},[at,x,Ie,ae]);const Ht=at&&at.onFilled,Wt=at&&at.onEmpty,zt=Q.useCallback(_e=>{j_(_e)?Ht&&Ht():Wt&&Wt()},[Ht,Wt]);$l(()=>{Oe&&zt({value:$e})},[$e,zt,Oe]);const st=_e=>{ie&&ie(_e),F.onFocus&&F.onFocus(_e),at&&at.onFocus?at.onFocus(_e):It(!0)},sr=_e=>{ae&&ae(_e),F.onBlur&&F.onBlur(_e),at&&at.onBlur?at.onBlur(_e):It(!1)},ur=(_e,...Ue)=>{if(!Oe){const Qe=_e.target||it.current;if(Qe==null)throw new Error(zf(1));zt({value:Qe.value})}F.onChange&&F.onChange(_e,...Ue),ee&&ee(_e,...Ue)};Q.useEffect(()=>{zt(it.current)},[]);const ar=_e=>{it.current&&_e.currentTarget===_e.target&&it.current.focus(),G&&G(_e)};let yr=O,pr=F;H&&yr==="input"&&(xe?pr={type:void 0,minRows:xe,maxRows:xe,...pr}:pr={type:void 0,maxRows:j,minRows:U,...pr},yr=ree);const Jt=_e=>{zt(_e.animationName==="mui-auto-fill-cancel"?it.current:{value:"x"})};Q.useEffect(()=>{at&&at.setAdornedStart(!!Se)},[at,Se]);const ir={...n,color:je.color||"primary",disabled:je.disabled,endAdornment:P,error:je.error,focused:je.focused,formControl:at,fullWidth:k,hiddenLabel:je.hiddenLabel,multiline:H,size:je.size,startAdornment:Se,type:we},xr=aee(ir),rr=fe.root||p.Root||x2,nt=Ae.root||g.root||{},be=fe.input||p.Input||w2;return pr={...pr,...Ae.input??g.input},Z.jsxs(Q.Fragment,{children:[!b&&typeof ZL=="function"&&(YL||(YL=Z.jsx(ZL,{}))),Z.jsxs(rr,{...nt,ref:r,onClick:ar,...Re,...!Wd(rr)&&{ownerState:{...ir,...nt.ownerState}},className:cn(xr.root,nt.className,a,Me&&"MuiInputBase-readOnly"),children:[Se,Z.jsx(OP.Provider,{value:null,children:Z.jsx(be,{"aria-invalid":je.error,"aria-describedby":i,autoComplete:o,autoFocus:l,defaultValue:v,disabled:je.disabled,id:M,onAnimationStart:Jt,name:Y,placeholder:de,readOnly:Me,required:je.required,rows:xe,value:$e,onKeyDown:oe,onKeyUp:ue,type:we,...pr,...!Wd(be)&&{as:yr,ownerState:{...ir,...pr.ownerState}},ref:rt,className:cn(xr.input,pr.className,Me&&"MuiInputBase-readOnly"),onBlur:sr,onChange:ur,onFocus:st})}),P,ge?ge({...je,startAdornment:Se}):null]})]})});function oee(e){return Jn("MuiInput",e)}const iv={...ny,...Xn("MuiInput",["root","underline","input"])};function see(e){return Jn("MuiOutlinedInput",e)}const Fd={...ny,...Xn("MuiOutlinedInput",["root","notchedOutline","input"])};function lee(e){return Jn("MuiFilledInput",e)}const hp={...ny,...Xn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},uee=Ei(Z.jsx("path",{d:"M7 10l5 5 5-5z"})),cee=Ei(Z.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function dee(e){return Jn("MuiAvatar",e)}Xn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const fee=e=>{const{classes:t,variant:r,colorDefault:n}=e;return Qn({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},dee,t)},hee=_r("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(zn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),pee=_r("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),mee=_r(cee,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function gee({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[i,o]=Q.useState(!1);return Q.useEffect(()=>{if(!r&&!n)return;o(!1);let l=!0;const a=new Image;return a.onload=()=>{l&&o("loaded")},a.onerror=()=>{l&&o("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=r,n&&(a.srcset=n),()=>{l=!1}},[e,t,r,n]),i}const t7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiAvatar"}),{alt:i,children:o,className:l,component:a="div",slots:c={},slotProps:p={},imgProps:g,sizes:v,src:x,srcSet:b,variant:P="circular",...I}=n;let k=null;const M={...n,component:a,variant:P},O=gee({...g,...typeof p.img=="function"?p.img(M):p.img,src:x,srcSet:b}),F=x||b,N=F&&O!=="error";M.colorDefault=!N,delete M.ownerState;const $=fee(M),[j,U]=ri("root",{ref:r,className:cn($.root,l),elementType:hee,externalForwardedProps:{slots:c,slotProps:p,component:a,...I},ownerState:M}),[H,Y]=ri("img",{className:$.img,elementType:pee,externalForwardedProps:{slots:c,slotProps:{img:{...g,...p.img}}},additionalProps:{alt:i,src:x,srcSet:b,sizes:v},ownerState:M}),[ae,ee]=ri("fallback",{className:$.fallback,elementType:mee,externalForwardedProps:{slots:c,slotProps:p},shouldForwardComponentProp:!0,ownerState:M});return N?k=Z.jsx(H,{...Y}):o||o===0?k=o:F&&i?k=i[0]:k=Z.jsx(ae,{...ee}),Z.jsx(j,{...U,children:k})}),yee={entering:{opacity:1},entered:{opacity:1}},eT=Q.forwardRef(function(t,r){const n=du(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:a,easing:c,in:p,onEnter:g,onEntered:v,onEntering:x,onExit:b,onExited:P,onExiting:I,style:k,timeout:M=i,TransitionComponent:O=xc,...F}=t,N=Q.useRef(null),$=to(N,Xf(a),r),j=oe=>ue=>{if(oe){const de=N.current;ue===void 0?oe(de):oe(de,ue)}},U=j(x),H=j((oe,ue)=>{g2(oe);const de=cd({style:k,timeout:M,easing:c},{mode:"enter"});oe.style.webkitTransition=n.transitions.create("opacity",de),oe.style.transition=n.transitions.create("opacity",de),g&&g(oe,ue)}),Y=j(v),ae=j(I),ee=j(oe=>{const ue=cd({style:k,timeout:M,easing:c},{mode:"exit"});oe.style.webkitTransition=n.transitions.create("opacity",ue),oe.style.transition=n.transitions.create("opacity",ue),b&&b(oe)}),G=j(P),ie=oe=>{o&&o(N.current,oe)};return Z.jsx(O,{appear:l,in:p,nodeRef:N,onEnter:H,onEntered:Y,onEntering:U,onExit:ee,onExited:G,onExiting:ae,addEndListener:ie,timeout:M,...F,children:(oe,{ownerState:ue,...de})=>Q.cloneElement(a,{style:{opacity:0,visibility:oe==="exited"&&!p?"hidden":void 0,...yee[oe],...k,...a.props.style},ref:$,...de})})});function vee(e){return Jn("MuiBackdrop",e)}Xn("MuiBackdrop",["root","invisible"]);const bee=e=>{const{classes:t,invisible:r}=e;return Qn({root:["root",r&&"invisible"]},vee,t)},_ee=_r("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),r7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiBackdrop"}),{children:i,className:o,component:l="div",invisible:a=!1,open:c,components:p={},componentsProps:g={},slotProps:v={},slots:x={},TransitionComponent:b,transitionDuration:P,...I}=n,k={...n,component:l,invisible:a},M=bee(k),O={transition:b,root:p.Root,...x},F={...g,...v},N={component:l,slots:O,slotProps:F},[$,j]=ri("root",{elementType:_ee,externalForwardedProps:N,className:cn(M.root,o),ownerState:k}),[U,H]=ri("transition",{elementType:eT,externalForwardedProps:N,ownerState:k});return Z.jsx(U,{in:c,timeout:P,...I,...H,children:Z.jsx($,{"aria-hidden":!0,...j,classes:M,ref:r,children:i})})}),xee=Xn("MuiBox",["root"]),wee=xy(),po=h9({themeId:ld,defaultTheme:wee,defaultClassName:xee.root,generateClassName:yP.generate});function See(e){return Jn("MuiButton",e)}const pp=Xn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),n7=Q.createContext({}),i7=Q.createContext(void 0),Cee=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,loading:l,loadingPosition:a,classes:c}=e,p={root:["root",l&&"loading",o,`${o}${Wr(t)}`,`size${Wr(i)}`,`${o}Size${Wr(i)}`,`color${Wr(t)}`,r&&"disableElevation",n&&"fullWidth",l&&`loadingPosition${Wr(a)}`],startIcon:["icon","startIcon",`iconSize${Wr(i)}`],endIcon:["icon","endIcon",`iconSize${Wr(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},g=Qn(p,See,c);return{...c,...g}},a7=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Eee=_r(nm,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${Wr(r.color)}`],t[`size${Wr(r.size)}`],t[`${r.variant}Size${Wr(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(zn(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${pp.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${pp.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${pp.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${pp.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Hs()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${pp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${pp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${pp.loading}`]:{color:"transparent"}}}]}})),Tee=_r("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${Wr(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...a7]})),Pee=_r("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${Wr(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...a7]})),Iee=_r("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),KL=_r("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),ji=Q.forwardRef(function(t,r){const n=Q.useContext(n7),i=Q.useContext(i7),o=v0(n,t),l=ni({props:o,name:"MuiButton"}),{children:a,color:c="primary",component:p="button",className:g,disabled:v=!1,disableElevation:x=!1,disableFocusRipple:b=!1,endIcon:P,focusVisibleClassName:I,fullWidth:k=!1,id:M,loading:O=null,loadingIndicator:F,loadingPosition:N="center",size:$="medium",startIcon:j,type:U,variant:H="text",...Y}=l,ae=$h(M),ee=F??Z.jsx(y2,{"aria-labelledby":ae,color:"inherit",size:16}),G={...l,color:c,component:p,disabled:v,disableElevation:x,disableFocusRipple:b,fullWidth:k,loading:O,loadingIndicator:ee,loadingPosition:N,size:$,type:U,variant:H},ie=Cee(G),oe=(j||O&&N==="start")&&Z.jsx(Tee,{className:ie.startIcon,ownerState:G,children:j||Z.jsx(KL,{className:ie.loadingIconPlaceholder,ownerState:G})}),ue=(P||O&&N==="end")&&Z.jsx(Pee,{className:ie.endIcon,ownerState:G,children:P||Z.jsx(KL,{className:ie.loadingIconPlaceholder,ownerState:G})}),de=i||"",Me=typeof O=="boolean"?Z.jsx("span",{className:ie.loadingWrapper,style:{display:"contents"},children:O&&Z.jsx(Iee,{className:ie.loadingIndicator,ownerState:G,children:ee})}):null;return Z.jsxs(Eee,{ownerState:G,className:cn(n.className,ie.root,g,de),component:p,disabled:v||O,focusRipple:!b,focusVisibleClassName:cn(ie.focusVisible,I),ref:r,type:U,id:O?ae:M,...Y,classes:ie,children:[oe,N!=="end"&&Me,a,N==="end"&&Me,ue]})});function kee(e){return Q.Children.toArray(e).filter(t=>Q.isValidElement(t))}function Aee(e){return Jn("MuiButtonGroup",e)}const zi=Xn("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Mee=(e,t)=>{const{ownerState:r}=e;return[{[`& .${zi.grouped}`]:t.grouped},{[`& .${zi.grouped}`]:t[`grouped${Wr(r.orientation)}`]},{[`& .${zi.grouped}`]:t[`grouped${Wr(r.variant)}`]},{[`& .${zi.grouped}`]:t[`grouped${Wr(r.variant)}${Wr(r.orientation)}`]},{[`& .${zi.grouped}`]:t[`grouped${Wr(r.variant)}${Wr(r.color)}`]},{[`& .${zi.firstButton}`]:t.firstButton},{[`& .${zi.lastButton}`]:t.lastButton},{[`& .${zi.middleButton}`]:t.middleButton},t.root,t[r.variant],r.disableElevation===!0&&t.disableElevation,r.fullWidth&&t.fullWidth,r.orientation==="vertical"&&t.vertical]},Lee=e=>{const{classes:t,color:r,disabled:n,disableElevation:i,fullWidth:o,orientation:l,variant:a}=e,c={root:["root",a,l,o&&"fullWidth",i&&"disableElevation",`color${Wr(r)}`],grouped:["grouped",`grouped${Wr(l)}`,`grouped${Wr(a)}`,`grouped${Wr(a)}${Wr(l)}`,`grouped${Wr(a)}${Wr(r)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Qn(c,Aee,t)},Ree=_r("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Mee})(zn(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${zi.lastButton},& .${zi.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${zi.lastButton},& .${zi.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${zi.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${zi.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Hs()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${zi.lastButton},& .${zi.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${zi.lastButton},& .${zi.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${zi.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${zi.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Hs(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${zi.firstButton},& .${zi.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${zi.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),tT=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiButtonGroup"}),{children:i,className:o,color:l="primary",component:a="div",disabled:c=!1,disableElevation:p=!1,disableFocusRipple:g=!1,disableRipple:v=!1,fullWidth:x=!1,orientation:b="horizontal",size:P="medium",variant:I="outlined",...k}=n,M={...n,color:l,component:a,disabled:c,disableElevation:p,disableFocusRipple:g,disableRipple:v,fullWidth:x,orientation:b,size:P,variant:I},O=Lee(M),F=Q.useMemo(()=>({className:O.grouped,color:l,disabled:c,disableElevation:p,disableFocusRipple:g,disableRipple:v,fullWidth:x,size:P,variant:I}),[l,c,p,g,v,x,P,I,O.grouped]),N=kee(i),$=N.length,j=U=>{const H=U===0,Y=U===$-1;return H&&Y?"":H?O.firstButton:Y?O.lastButton:O.middleButton};return Z.jsx(Ree,{as:a,role:"group",className:cn(O.root,o),ref:r,ownerState:M,...k,children:Z.jsx(n7.Provider,{value:F,children:N.map((U,H)=>Z.jsx(i7.Provider,{value:j(H),children:U},H))})})});function Dee(e){return Jn("PrivateSwitchBase",e)}Xn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Nee=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${Wr(i)}`],input:["input"]};return Qn(o,Dee,t)},Oee=_r(nm,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),Fee=_r("input",{name:"MuiSwitchBase",shouldForwardProp:As})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),o7=Q.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,defaultChecked:l,disabled:a,disableFocusRipple:c=!1,edge:p=!1,icon:g,id:v,inputProps:x,inputRef:b,name:P,onBlur:I,onChange:k,onFocus:M,readOnly:O,required:F=!1,tabIndex:N,type:$,value:j,slots:U={},slotProps:H={},...Y}=t,[ae,ee]=Rh({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),G=nf(),ie=De=>{M&&M(De),G&&G.onFocus&&G.onFocus(De)},oe=De=>{I&&I(De),G&&G.onBlur&&G.onBlur(De)},ue=De=>{if(De.nativeEvent.defaultPrevented)return;const Re=De.target.checked;ee(Re),k&&k(De,Re)};let de=a;G&&typeof de>"u"&&(de=G.disabled);const Me=$==="checkbox"||$==="radio",ge={...t,checked:ae,disabled:de,disableFocusRipple:c,edge:p},xe=Nee(ge),Ee={slots:U,slotProps:{input:x,...H}},[Ae,fe]=ri("root",{ref:r,elementType:Oee,className:xe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Ee,component:"span",...Y},getSlotProps:De=>({...De,onFocus:Re=>{De.onFocus?.(Re),ie(Re)},onBlur:Re=>{De.onBlur?.(Re),oe(Re)}}),ownerState:ge,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:de,role:void 0,tabIndex:null}}),[Se,we]=ri("input",{ref:b,elementType:Fee,className:xe.input,externalForwardedProps:Ee,getSlotProps:De=>({...De,onChange:Re=>{De.onChange?.(Re),ue(Re)}}),ownerState:ge,additionalProps:{autoFocus:n,checked:i,defaultChecked:l,disabled:de,id:Me?v:void 0,name:P,readOnly:O,required:F,tabIndex:N,type:$,...$==="checkbox"&&j===void 0?{}:{value:j}}});return Z.jsxs(Ae,{...fe,children:[Z.jsx(Se,{...we}),ae?o:g]})}),Bee=Ei(Z.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),zee=Ei(Z.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),jee=Ei(Z.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function qee(e){return Jn("MuiCheckbox",e)}const gS=Xn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),$ee=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,o={root:["root",r&&"indeterminate",`color${Wr(n)}`,`size${Wr(i)}`]},l=Qn(o,qee,t);return{...t,...l}},Vee=_r(o7,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${Wr(r.size)}`],r.color!=="default"&&t[`color${Wr(r.color)}`]]}})(zn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{[`&.${gS.checked}, &.${gS.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${gS.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Uee=Z.jsx(zee,{}),Gee=Z.jsx(Bee,{}),Hee=Z.jsx(jee,{}),iy=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiCheckbox"}),{checkedIcon:i=Uee,color:o="primary",icon:l=Gee,indeterminate:a=!1,indeterminateIcon:c=Hee,inputProps:p,size:g="medium",disableRipple:v=!1,className:x,slots:b={},slotProps:P={},...I}=n,k=a?c:l,M=a?c:i,O={...n,disableRipple:v,color:o,indeterminate:a,size:g},F=$ee(O),N=P.input??p,[$,j]=ri("root",{ref:r,elementType:Vee,className:cn(F.root,x),shouldForwardComponentProp:!0,externalForwardedProps:{slots:b,slotProps:P,...I},ownerState:O,additionalProps:{type:"checkbox",icon:Q.cloneElement(k,{fontSize:k.props.fontSize??g}),checkedIcon:Q.cloneElement(M,{fontSize:M.props.fontSize??g}),disableRipple:v,slots:b,slotProps:{input:Kg(typeof N=="function"?N(O):N,{"data-indeterminate":a})}}});return Z.jsx($,{...j,classes:F})});function JL(e){return e.substring(2).toLowerCase()}function Wee(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Xee(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,l=Q.useRef(!1),a=Q.useRef(null),c=Q.useRef(!1),p=Q.useRef(!1);Q.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const g=to(Xf(t),a),v=Sl(P=>{const I=p.current;p.current=!1;const k=jo(a.current);if(!c.current||!a.current||"clientX"in P&&Wee(P,k))return;if(l.current){l.current=!1;return}let M;P.composedPath?M=P.composedPath().includes(a.current):M=!k.documentElement.contains(P.target)||a.current.contains(P.target),!M&&(r||!I)&&i(P)}),x=P=>I=>{p.current=!0;const k=t.props[P];k&&k(I)},b={ref:g};return o!==!1&&(b[o]=x(o)),Q.useEffect(()=>{if(o!==!1){const P=JL(o),I=jo(a.current),k=()=>{l.current=!0};return I.addEventListener(P,v),I.addEventListener("touchmove",k),()=>{I.removeEventListener(P,v),I.removeEventListener("touchmove",k)}}},[v,o]),n!==!1&&(b[n]=x(n)),Q.useEffect(()=>{if(n!==!1){const P=JL(n),I=jo(a.current);return I.addEventListener(P,v),()=>{I.removeEventListener(P,v)}}},[v,n]),Q.cloneElement(t,b)}function s7(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Yee(e){const t=jo(e);return t.body===e?Pu(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function t0(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function QL(e){return parseInt(Pu(e).getComputedStyle(e).paddingRight,10)||0}function Zee(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function eR(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,l=>{const a=!o.includes(l),c=!Zee(l);a&&c&&t0(l,i)})}function yS(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function Kee(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(Yee(n)){const l=s7(Pu(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${QL(n)+l}px`;const a=jo(n).querySelectorAll(".mui-fixed");[].forEach.call(a,c=>{r.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${QL(c)+l}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=jo(n).body;else{const l=n.parentElement,a=Pu(n);o=l?.nodeName==="HTML"&&a.getComputedStyle(l).overflowY==="scroll"?l:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:l,property:a})=>{o?l.style.setProperty(a,o):l.style.removeProperty(a)})}}function Jee(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class Qee{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&t0(t.modalRef,!1);const i=Jee(r);eR(r,t.mount,t.modalRef,i,!0);const o=yS(this.containers,l=>l.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=yS(this.containers,o=>o.modals.includes(t)),i=this.containers[n];i.restore||(i.restore=Kee(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=yS(this.containers,l=>l.modals.includes(t)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&t0(t.modalRef,r),eR(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&t0(l.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const ete=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function tte(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function rte(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function nte(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||rte(e))}function ite(e){const t=[],r=[];return Array.from(e.querySelectorAll(ete)).forEach((n,i)=>{const o=tte(n);o===-1||!nte(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function ate(){return!0}function ote(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=ite,isEnabled:l=ate,open:a}=e,c=Q.useRef(!1),p=Q.useRef(null),g=Q.useRef(null),v=Q.useRef(null),x=Q.useRef(null),b=Q.useRef(!1),P=Q.useRef(null),I=to(Xf(t),P),k=Q.useRef(null);Q.useEffect(()=>{!a||!P.current||(b.current=!r)},[r,a]),Q.useEffect(()=>{if(!a||!P.current)return;const F=jo(P.current);return P.current.contains(F.activeElement)||(P.current.hasAttribute("tabIndex")||P.current.setAttribute("tabIndex","-1"),b.current&&P.current.focus()),()=>{i||(v.current&&v.current.focus&&(c.current=!0,v.current.focus()),v.current=null)}},[a]),Q.useEffect(()=>{if(!a||!P.current)return;const F=jo(P.current),N=U=>{k.current=U,!(n||!l()||U.key!=="Tab")&&F.activeElement===P.current&&U.shiftKey&&(c.current=!0,g.current&&g.current.focus())},$=()=>{const U=P.current;if(U===null)return;if(!F.hasFocus()||!l()||c.current){c.current=!1;return}if(U.contains(F.activeElement)||n&&F.activeElement!==p.current&&F.activeElement!==g.current)return;if(F.activeElement!==x.current)x.current=null;else if(x.current!==null)return;if(!b.current)return;let H=[];if((F.activeElement===p.current||F.activeElement===g.current)&&(H=o(P.current)),H.length>0){const Y=!!(k.current?.shiftKey&&k.current?.key==="Tab"),ae=H[0],ee=H[H.length-1];typeof ae!="string"&&typeof ee!="string"&&(Y?ee.focus():ae.focus())}else U.focus()};F.addEventListener("focusin",$),F.addEventListener("keydown",N,!0);const j=setInterval(()=>{F.activeElement&&F.activeElement.tagName==="BODY"&&$()},50);return()=>{clearInterval(j),F.removeEventListener("focusin",$),F.removeEventListener("keydown",N,!0)}},[r,n,i,l,a,o]);const M=F=>{v.current===null&&(v.current=F.relatedTarget),b.current=!0,x.current=F.target;const N=t.props.onFocus;N&&N(F)},O=F=>{v.current===null&&(v.current=F.relatedTarget),b.current=!0};return Z.jsxs(Q.Fragment,{children:[Z.jsx("div",{tabIndex:a?0:-1,onFocus:O,ref:p,"data-testid":"sentinelStart"}),Q.cloneElement(t,{ref:I,onFocus:M}),Z.jsx("div",{tabIndex:a?0:-1,onFocus:O,ref:g,"data-testid":"sentinelEnd"})]})}function ste(e){return typeof e=="function"?e():e}function lte(e){return e?e.props.hasOwnProperty("in"):!1}const tR=()=>{},tb=new Qee;function ute(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:l,children:a,onClose:c,open:p,rootRef:g}=e,v=Q.useRef({}),x=Q.useRef(null),b=Q.useRef(null),P=to(b,g),[I,k]=Q.useState(!p),M=lte(a);let O=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(O=!1);const F=()=>jo(x.current),N=()=>(v.current.modalRef=b.current,v.current.mount=x.current,v.current),$=()=>{tb.mount(N(),{disableScrollLock:n}),b.current&&(b.current.scrollTop=0)},j=Sl(()=>{const ue=ste(t)||F().body;tb.add(N(),ue),b.current&&$()}),U=()=>tb.isTopModal(N()),H=Sl(ue=>{x.current=ue,ue&&(p&&U()?$():b.current&&t0(b.current,O))}),Y=Q.useCallback(()=>{tb.remove(N(),O)},[O]);Q.useEffect(()=>()=>{Y()},[Y]),Q.useEffect(()=>{p?j():(!M||!i)&&Y()},[p,Y,M,i,j]);const ae=ue=>de=>{ue.onKeyDown?.(de),!(de.key!=="Escape"||de.which===229||!U())&&(r||(de.stopPropagation(),c&&c(de,"escapeKeyDown")))},ee=ue=>de=>{ue.onClick?.(de),de.target===de.currentTarget&&c&&c(de,"backdropClick")};return{getRootProps:(ue={})=>{const de=Rp(e);delete de.onTransitionEnter,delete de.onTransitionExited;const Me={...de,...ue};return{role:"presentation",...Me,onKeyDown:ae(Me),ref:P}},getBackdropProps:(ue={})=>{const de=ue;return{"aria-hidden":!0,...de,onClick:ee(de),open:p}},getTransitionProps:()=>{const ue=()=>{k(!1),o&&o()},de=()=>{k(!0),l&&l(),i&&Y()};return{onEnter:V4(ue,a?.props.onEnter??tR),onExited:V4(de,a?.props.onExited??tR)}},rootRef:P,portalRef:H,isTopModal:U,exited:I,hasTransition:M}}function cte(e){return Jn("MuiModal",e)}Xn("MuiModal",["root","hidden","backdrop"]);const dte=e=>{const{open:t,exited:r,classes:n}=e;return Qn({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},cte,n)},fte=_r("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(zn(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),hte=_r(r7,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),BP=Q.forwardRef(function(t,r){const n=ni({name:"MuiModal",props:t}),{BackdropComponent:i=hte,BackdropProps:o,classes:l,className:a,closeAfterTransition:c=!1,children:p,container:g,component:v,components:x={},componentsProps:b={},disableAutoFocus:P=!1,disableEnforceFocus:I=!1,disableEscapeKeyDown:k=!1,disablePortal:M=!1,disableRestoreFocus:O=!1,disableScrollLock:F=!1,hideBackdrop:N=!1,keepMounted:$=!1,onClose:j,onTransitionEnter:U,onTransitionExited:H,open:Y,slotProps:ae={},slots:ee={},theme:G,...ie}=n,oe={...n,closeAfterTransition:c,disableAutoFocus:P,disableEnforceFocus:I,disableEscapeKeyDown:k,disablePortal:M,disableRestoreFocus:O,disableScrollLock:F,hideBackdrop:N,keepMounted:$},{getRootProps:ue,getBackdropProps:de,getTransitionProps:Me,portalRef:ge,isTopModal:xe,exited:Ee,hasTransition:Ae}=ute({...oe,rootRef:r}),fe={...oe,exited:Ee},Se=dte(fe),we={};if(p.props.tabIndex===void 0&&(we.tabIndex="-1"),Ae){const{onEnter:Ye,onExited:rt}=Me();we.onEnter=Ye,we.onExited=rt}const De={slots:{root:x.Root,backdrop:x.Backdrop,...ee},slotProps:{...b,...ae}},[Re,$e]=ri("root",{ref:r,elementType:fte,externalForwardedProps:{...De,...ie,component:v},getSlotProps:ue,ownerState:fe,className:cn(a,Se?.root,!fe.open&&fe.exited&&Se?.hidden)}),[Oe,it]=ri("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:De,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:Ye=>de({...Ye,onClick:rt=>{Ye?.onClick&&Ye.onClick(rt)}}),className:cn(o?.className,Se?.backdrop),ownerState:fe});return!$&&!Y&&(!Ae||Ee)?null:Z.jsx(Q9,{ref:ge,container:g,disablePortal:M,children:Z.jsxs(Re,{...$e,children:[!N&&i?Z.jsx(Oe,{...it}):null,Z.jsx(ote,{disableEnforceFocus:I,disableAutoFocus:P,disableRestoreFocus:O,isEnabled:xe,open:Y,children:Q.cloneElement(p,we)})]})})});function pte(e){return Jn("MuiDialog",e)}const vS=Xn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),l7=Q.createContext({}),mte=_r(r7,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),gte=e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:i,fullScreen:o}=e,l={root:["root"],container:["container",`scroll${Wr(r)}`],paper:["paper",`paperScroll${Wr(r)}`,`paperWidth${Wr(String(n))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return Qn(l,pte,t)},yte=_r(BP,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),vte=_r("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${Wr(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),bte=_r(Oc,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${Wr(r.scroll)}`],t[`paperWidth${Wr(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(zn(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${vS.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${vS.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${vS.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),zP=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiDialog"}),i=du(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":a,"aria-modal":c=!0,BackdropComponent:p,BackdropProps:g,children:v,className:x,disableEscapeKeyDown:b=!1,fullScreen:P=!1,fullWidth:I=!1,maxWidth:k="sm",onClick:M,onClose:O,open:F,PaperComponent:N=Oc,PaperProps:$={},scroll:j="paper",slots:U={},slotProps:H={},TransitionComponent:Y=eT,transitionDuration:ae=o,TransitionProps:ee,...G}=n,ie={...n,disableEscapeKeyDown:b,fullScreen:P,fullWidth:I,maxWidth:k,scroll:j},oe=gte(ie),ue=Q.useRef(),de=It=>{ue.current=It.target===It.currentTarget},Me=It=>{M&&M(It),ue.current&&(ue.current=null,O&&O(It,"backdropClick"))},ge=$h(a),xe=Q.useMemo(()=>({titleId:ge}),[ge]),Ee={transition:Y,...U},Ae={transition:ee,paper:$,backdrop:g,...H},fe={slots:Ee,slotProps:Ae},[Se,we]=ri("root",{elementType:yte,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:ie,className:cn(oe.root,x),ref:r}),[De,Re]=ri("backdrop",{elementType:mte,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:ie}),[$e,Oe]=ri("paper",{elementType:bte,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:ie,className:cn(oe.paper,$.className)}),[it,Ye]=ri("container",{elementType:vte,externalForwardedProps:fe,ownerState:ie,className:oe.container}),[rt,Ie]=ri("transition",{elementType:eT,externalForwardedProps:fe,ownerState:ie,additionalProps:{appear:!0,in:F,timeout:ae,role:"presentation"}});return Z.jsx(Se,{closeAfterTransition:!0,slots:{backdrop:De},slotProps:{backdrop:{transitionDuration:ae,as:p,...Re}},disableEscapeKeyDown:b,onClose:O,open:F,onClick:Me,...we,...G,children:Z.jsx(rt,{...Ie,children:Z.jsx(it,{onMouseDown:de,...Ye,children:Z.jsx($e,{as:N,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":ge,"aria-modal":c,...Oe,children:Z.jsx(l7.Provider,{value:xe,children:v})})})})})});function _te(e){return Jn("MuiDialogActions",e)}Xn("MuiDialogActions",["root","spacing"]);const xte=e=>{const{classes:t,disableSpacing:r}=e;return Qn({root:["root",!r&&"spacing"]},_te,t)},wte=_r("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),s1=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...l}=n,a={...n,disableSpacing:o},c=xte(a);return Z.jsx(wte,{className:cn(c.root,i),ownerState:a,ref:r,...l})});function Ste(e){return Jn("MuiDialogContent",e)}Xn("MuiDialogContent",["root","dividers"]);function Cte(e){return Jn("MuiDialogTitle",e)}const Ete=Xn("MuiDialogTitle",["root"]),Tte=e=>{const{classes:t,dividers:r}=e;return Qn({root:["root",r&&"dividers"]},Ste,t)},Pte=_r("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(zn(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${Ete.root} + &`]:{paddingTop:0}}}]}))),jP=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...l}=n,a={...n,dividers:o},c=Tte(a);return Z.jsx(Pte,{className:cn(c.root,i),ownerState:a,ref:r,...l})});function Ite(e){return Jn("MuiDialogContentText",e)}Xn("MuiDialogContentText",["root"]);const kte=e=>{const{classes:t}=e,n=Qn({root:["root"]},Ite,t);return{...t,...n}},Ate=_r(Ko,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Mte=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiDialogContentText"}),{children:i,className:o,...l}=n,a=kte(l);return Z.jsx(Ate,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:l,className:cn(a.root,o),...n,classes:a})}),Lte=e=>{const{classes:t}=e;return Qn({root:["root"]},Cte,t)},Rte=_r(Ko,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),im=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiDialogTitle"}),{className:i,id:o,...l}=n,a=n,c=Lte(a),{titleId:p=o}=Q.useContext(l7);return Z.jsx(Rte,{component:"h2",className:cn(c.root,i),ownerState:a,ref:r,variant:"h6",id:o??p,...l})});function Dte(e){return Jn("MuiDivider",e)}const rR=Xn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Nte=e=>{const{absolute:t,children:r,classes:n,flexItem:i,light:o,orientation:l,textAlign:a,variant:c}=e;return Qn({root:["root",t&&"absolute",c,o&&"light",l==="vertical"&&"vertical",i&&"flexItem",r&&"withChildren",r&&l==="vertical"&&"withChildrenVertical",a==="right"&&l!=="vertical"&&"textAlignRight",a==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},Dte,n)},Ote=_r("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(zn(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Fte=_r("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(zn(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),rT=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiDivider"}),{absolute:i=!1,children:o,className:l,orientation:a="horizontal",component:c=o||a==="vertical"?"div":"hr",flexItem:p=!1,light:g=!1,role:v=c!=="hr"?"separator":void 0,textAlign:x="center",variant:b="fullWidth",...P}=n,I={...n,absolute:i,component:c,flexItem:p,light:g,orientation:a,role:v,textAlign:x,variant:b},k=Nte(I);return Z.jsx(Ote,{as:c,className:cn(k.root,l),role:v,ref:r,ownerState:I,"aria-orientation":v==="separator"&&(c!=="hr"||a==="vertical")?a:void 0,...P,children:o?Z.jsx(Fte,{className:k.wrapper,ownerState:I,children:o}):null})});rT&&(rT.muiSkipListHighlight=!0);function Bte(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),o=Pu(t);let l;if(t.fakeTransform)l=t.fakeTransform;else{const p=o.getComputedStyle(t);l=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}let a=0,c=0;if(l&&l!=="none"&&typeof l=="string"){const p=l.split("(")[1].split(")")[0].split(",");a=parseInt(p[4],10),c=parseInt(p[5],10)}return e==="left"?i?`translateX(${i.right+a-n.left}px)`:`translateX(${o.innerWidth+a-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:e==="up"?i?`translateY(${i.bottom+c-n.top}px)`:`translateY(${o.innerHeight+c-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-c}px)`:`translateY(-${n.top+n.height-c}px)`}function zte(e){return typeof e=="function"?e():e}function rb(e,t,r){const n=zte(r),i=Bte(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const jte=Q.forwardRef(function(t,r){const n=du(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:l,appear:a=!0,children:c,container:p,direction:g="down",easing:v=i,in:x,onEnter:b,onEntered:P,onEntering:I,onExit:k,onExited:M,onExiting:O,style:F,timeout:N=o,TransitionComponent:$=xc,...j}=t,U=Q.useRef(null),H=to(Xf(c),U,r),Y=ge=>xe=>{ge&&(xe===void 0?ge(U.current):ge(U.current,xe))},ae=Y((ge,xe)=>{rb(g,ge,p),g2(ge),b&&b(ge,xe)}),ee=Y((ge,xe)=>{const Ee=cd({timeout:N,style:F,easing:v},{mode:"enter"});ge.style.webkitTransition=n.transitions.create("-webkit-transform",{...Ee}),ge.style.transition=n.transitions.create("transform",{...Ee}),ge.style.webkitTransform="none",ge.style.transform="none",I&&I(ge,xe)}),G=Y(P),ie=Y(O),oe=Y(ge=>{const xe=cd({timeout:N,style:F,easing:v},{mode:"exit"});ge.style.webkitTransition=n.transitions.create("-webkit-transform",xe),ge.style.transition=n.transitions.create("transform",xe),rb(g,ge,p),k&&k(ge)}),ue=Y(ge=>{ge.style.webkitTransition="",ge.style.transition="",M&&M(ge)}),de=ge=>{l&&l(U.current,ge)},Me=Q.useCallback(()=>{U.current&&rb(g,U.current,p)},[g,p]);return Q.useEffect(()=>{if(x||g==="down"||g==="right")return;const ge=TP(()=>{U.current&&rb(g,U.current,p)}),xe=Pu(U.current);return xe.addEventListener("resize",ge),()=>{ge.clear(),xe.removeEventListener("resize",ge)}},[g,x,p]),Q.useEffect(()=>{x||Me()},[x,Me]),Z.jsx($,{nodeRef:U,onEnter:ae,onEntered:G,onEntering:ee,onExit:oe,onExited:ue,onExiting:ie,addEndListener:de,appear:a,in:x,timeout:N,...j,children:(ge,{ownerState:xe,...Ee})=>Q.cloneElement(c,{ref:H,style:{visibility:ge==="exited"&&!x?"hidden":void 0,...F,...c.props.style},...Ee})})});function qte(e){return Jn("MuiDrawer",e)}Xn("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const u7=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},$te=e=>{const{classes:t,anchor:r,variant:n}=e,i={root:["root",`anchor${Wr(r)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Wr(r)}`,n!=="temporary"&&`paperAnchorDocked${Wr(r)}`]};return Qn(i,qte,t)},Vte=_r(BP,{name:"MuiDrawer",slot:"Root",overridesResolver:u7})(zn(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),Ute=_r("div",{shouldForwardProp:As,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:u7})({flex:"0 0 auto"}),Gte=_r(Oc,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${Wr(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${Wr(r.anchor)}`]]}})(zn(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),c7={left:"right",right:"left",top:"down",bottom:"up"};function Sp(e){return["left","right"].includes(e)}function Rv({direction:e},t){return e==="rtl"&&Sp(t)?c7[t]:t}const qP=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiDrawer"}),i=du(),o=i1(),l={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:c,children:p,className:g,elevation:v=16,hideBackdrop:x=!1,ModalProps:{BackdropProps:b,...P}={},onClose:I,open:k=!1,PaperProps:M={},SlideProps:O,TransitionComponent:F,transitionDuration:N=l,variant:$="temporary",slots:j={},slotProps:U={},...H}=n,Y=Q.useRef(!1);Q.useEffect(()=>{Y.current=!0},[]);const ae=Rv({direction:o?"rtl":"ltr"},a),G={...n,anchor:a,elevation:v,open:k,variant:$,...H},ie=$te(G),oe={slots:{transition:F,...j},slotProps:{paper:M,transition:O,...U,backdrop:Kg(U.backdrop||{...c,...b},{transitionDuration:N})}},[ue,de]=ri("root",{ref:r,elementType:Vte,className:cn(ie.root,ie.modal,g),shouldForwardComponentProp:!0,ownerState:G,externalForwardedProps:{...oe,...H,...P},additionalProps:{open:k,onClose:I,hideBackdrop:x,slots:{backdrop:oe.slots.backdrop},slotProps:{backdrop:oe.slotProps.backdrop}}}),[Me,ge]=ri("paper",{elementType:Gte,shouldForwardComponentProp:!0,className:cn(ie.paper,M.className),ownerState:G,externalForwardedProps:oe,additionalProps:{elevation:$==="temporary"?v:0,square:!0,...$==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[xe,Ee]=ri("docked",{elementType:Ute,ref:r,className:cn(ie.root,ie.docked,g),ownerState:G,externalForwardedProps:oe,additionalProps:H}),[Ae,fe]=ri("transition",{elementType:jte,ownerState:G,externalForwardedProps:oe,additionalProps:{in:k,direction:c7[ae],timeout:N,appear:Y.current}}),Se=Z.jsx(Me,{...ge,children:p});if($==="permanent")return Z.jsx(xe,{...Ee,children:Se});const we=Z.jsx(Ae,{...fe,children:Se});return $==="persistent"?Z.jsx(xe,{...Ee,children:we}):Z.jsx(ue,{...de,children:we})});function Hte(e){return Jn("MuiFab",e)}const nR=Xn("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Wte=e=>{const{color:t,variant:r,classes:n,size:i}=e,o={root:["root",r,`size${Wr(i)}`,t==="inherit"?"colorInherit":t]},l=Qn(o,Hte,n);return{...n,...l}},Xte=_r(nm,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>As(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${Wr(r.size)}`],r.color==="inherit"&&t.colorInherit,t[Wr(r.size)],t[r.color]]}})(zn(({theme:e})=>({...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:e.palette.getContrastText?.(e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${nR.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})),zn(({theme:e})=>({variants:[...Object.entries(e.palette).filter(Hs(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),zn(({theme:e})=>({[`&.${nR.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),d7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiFab"}),{children:i,className:o,color:l="default",component:a="button",disabled:c=!1,disableFocusRipple:p=!1,focusVisibleClassName:g,size:v="large",variant:x="circular",...b}=n,P={...n,color:l,component:a,disabled:c,disableFocusRipple:p,size:v,variant:x},I=Wte(P);return Z.jsx(Xte,{className:cn(I.root,o),component:a,disabled:c,focusRipple:!p,focusVisibleClassName:cn(I.focusVisible,g),ownerState:P,ref:r,...b,classes:I,children:i})}),Yte=e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:i,size:o,hiddenLabel:l,multiline:a}=e,c={root:["root",!r&&"underline",n&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${Wr(o)}`,l&&"hiddenLabel",a&&"multiline"],input:["input"]},p=Qn(c,lee,t);return{...t,...p}},Zte=_r(x2,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...b2(e,t),!r.disableUnderline&&t.underline]}})(zn(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${hp.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${hp.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hp.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hp.disabled}, .${hp.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${hp.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Hs()).map(([l])=>({props:{disableUnderline:!1,color:l},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[l]?.main}`}}})),{props:({ownerState:l})=>l.startAdornment,style:{paddingLeft:12}},{props:({ownerState:l})=>l.endAdornment,style:{paddingRight:12}},{props:({ownerState:l})=>l.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:l,size:a})=>l.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel&&l.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Kte=_r(w2,{name:"MuiFilledInput",slot:"Input",overridesResolver:_2})(zn(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),$P=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:l,fullWidth:a=!1,hiddenLabel:c,inputComponent:p="input",multiline:g=!1,slotProps:v,slots:x={},type:b="text",...P}=n,I={...n,disableUnderline:i,fullWidth:a,inputComponent:p,multiline:g,type:b},k=Yte(n),M={root:{ownerState:I},input:{ownerState:I}},O=v??l?ql(M,v??l):M,F=x.root??o.Root??Zte,N=x.input??o.Input??Kte;return Z.jsx(FP,{slots:{root:F,input:N},slotProps:O,fullWidth:a,inputComponent:p,multiline:g,ref:r,type:b,...P,classes:k})});$P.muiName="Input";function Jte(e){return Jn("MuiFormControl",e)}Xn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Qte=e=>{const{classes:t,margin:r,fullWidth:n}=e,i={root:["root",r!=="none"&&`margin${Wr(r)}`,n&&"fullWidth"]};return Qn(i,Jte,t)},ere=_r("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${Wr(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),cc=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiFormControl"}),{children:i,className:o,color:l="primary",component:a="div",disabled:c=!1,error:p=!1,focused:g,fullWidth:v=!1,hiddenLabel:x=!1,margin:b="none",required:P=!1,size:I="medium",variant:k="outlined",...M}=n,O={...n,color:l,component:a,disabled:c,error:p,fullWidth:v,hiddenLabel:x,margin:b,required:P,size:I,variant:k},F=Qte(O),[N,$]=Q.useState(()=>{let ue=!1;return i&&Q.Children.forEach(i,de=>{if(!jg(de,["Input","Select"]))return;const Me=jg(de,["Select"])?de.props.input:de;Me&&nee(Me.props)&&(ue=!0)}),ue}),[j,U]=Q.useState(()=>{let ue=!1;return i&&Q.Children.forEach(i,de=>{jg(de,["Input","Select"])&&(j_(de.props,!0)||j_(de.props.inputProps,!0))&&(ue=!0)}),ue}),[H,Y]=Q.useState(!1);c&&H&&Y(!1);const ae=g!==void 0&&!c?g:H;let ee;Q.useRef(!1);const G=Q.useCallback(()=>{U(!0)},[]),ie=Q.useCallback(()=>{U(!1)},[]),oe=Q.useMemo(()=>({adornedStart:N,setAdornedStart:$,color:l,disabled:c,error:p,filled:j,focused:ae,fullWidth:v,hiddenLabel:x,size:I,onBlur:()=>{Y(!1)},onFocus:()=>{Y(!0)},onEmpty:ie,onFilled:G,registerEffect:ee,required:P,variant:k}),[N,l,c,p,j,ae,v,x,ee,ie,G,P,I,k]);return Z.jsx(OP.Provider,{value:oe,children:Z.jsx(ere,{as:a,ownerState:O,className:cn(F.root,o),ref:r,...M,children:i})})});function tre(e){return Jn("MuiFormControlLabel",e)}const Dv=Xn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),rre=e=>{const{classes:t,disabled:r,labelPlacement:n,error:i,required:o}=e,l={root:["root",r&&"disabled",`labelPlacement${Wr(n)}`,i&&"error",o&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",i&&"error"]};return Qn(l,tre,t)},nre=_r("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Dv.label}`]:t.label},t.root,t[`labelPlacement${Wr(r.labelPlacement)}`]]}})(zn(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Dv.disabled}`]:{cursor:"default"},[`& .${Dv.label}`]:{[`&.${Dv.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),ire=_r("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(zn(({theme:e})=>({[`&.${Dv.error}`]:{color:(e.vars||e).palette.error.main}}))),nT=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiFormControlLabel"}),{checked:i,className:o,componentsProps:l={},control:a,disabled:c,disableTypography:p,inputRef:g,label:v,labelPlacement:x="end",name:b,onChange:P,required:I,slots:k={},slotProps:M={},value:O,...F}=n,N=nf(),$=c??a.props.disabled??N?.disabled,j=I??a.props.required,U={disabled:$,required:j};["checked","name","onChange","value","inputRef"].forEach(ue=>{typeof a.props[ue]>"u"&&typeof n[ue]<"u"&&(U[ue]=n[ue])});const H=Gh({props:n,muiFormControl:N,states:["error"]}),Y={...n,disabled:$,labelPlacement:x,required:j,error:H.error},ae=rre(Y),ee={slots:k,slotProps:{...l,...M}},[G,ie]=ri("typography",{elementType:Ko,externalForwardedProps:ee,ownerState:Y});let oe=v;return oe!=null&&oe.type!==Ko&&!p&&(oe=Z.jsx(G,{component:"span",...ie,className:cn(ae.label,ie?.className),children:oe})),Z.jsxs(nre,{className:cn(ae.root,o),ownerState:Y,ref:r,...F,children:[Q.cloneElement(a,U),j?Z.jsxs("div",{children:[oe,Z.jsxs(ire,{ownerState:Y,"aria-hidden":!0,className:ae.asterisk,children:["","*"]})]}):oe]})});function are(e){return Jn("MuiFormGroup",e)}Xn("MuiFormGroup",["root","row","error"]);const ore=e=>{const{classes:t,row:r,error:n}=e;return Qn({root:["root",r&&"row",n&&"error"]},are,t)},sre=_r("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),f7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiFormGroup"}),{className:i,row:o=!1,...l}=n,a=nf(),c=Gh({props:n,muiFormControl:a,states:["error"]}),p={...n,row:o,error:c.error},g=ore(p);return Z.jsx(sre,{className:cn(g.root,i),ownerState:p,ref:r,...l})});function lre(e){return Jn("MuiFormHelperText",e)}const iR=Xn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var aR;const ure=e=>{const{classes:t,contained:r,size:n,disabled:i,error:o,filled:l,focused:a,required:c}=e,p={root:["root",i&&"disabled",o&&"error",n&&`size${Wr(n)}`,r&&"contained",a&&"focused",l&&"filled",c&&"required"]};return Qn(p,lre,t)},cre=_r("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${Wr(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(zn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${iR.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${iR.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),dre=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:l="p",disabled:a,error:c,filled:p,focused:g,margin:v,required:x,variant:b,...P}=n,I=nf(),k=Gh({props:n,muiFormControl:I,states:["variant","size","disabled","error","filled","focused","required"]}),M={...n,component:l,contained:k.variant==="filled"||k.variant==="outlined",variant:k.variant,size:k.size,disabled:k.disabled,error:k.error,filled:k.filled,focused:k.focused,required:k.required};delete M.ownerState;const O=ure(M);return Z.jsx(cre,{as:l,className:cn(O.root,o),ref:r,...P,ownerState:M,children:i===" "?aR||(aR=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function fre(e){return Jn("MuiFormLabel",e)}const r0=Xn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),hre=e=>{const{classes:t,color:r,focused:n,disabled:i,error:o,filled:l,required:a}=e,c={root:["root",`color${Wr(r)}`,i&&"disabled",o&&"error",l&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return Qn(c,fre,t)},pre=_r("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(zn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{[`&.${r0.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${r0.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${r0.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),mre=_r("span",{name:"MuiFormLabel",slot:"Asterisk"})(zn(({theme:e})=>({[`&.${r0.error}`]:{color:(e.vars||e).palette.error.main}}))),h7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiFormLabel"}),{children:i,className:o,color:l,component:a="label",disabled:c,error:p,filled:g,focused:v,required:x,...b}=n,P=nf(),I=Gh({props:n,muiFormControl:P,states:["color","required","focused","disabled","error","filled"]}),k={...n,color:I.color||"primary",component:a,disabled:I.disabled,error:I.error,filled:I.filled,focused:I.focused,required:I.required},M=hre(k);return Z.jsxs(pre,{as:a,ownerState:k,className:cn(M.root,o),ref:r,...b,children:[i,I.required&&Z.jsxs(mre,{ownerState:k,"aria-hidden":!0,className:M.asterisk,children:["","*"]})]})}),Mf=EZ({createStyledComponent:_r("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>ni({props:e,name:"MuiGrid"}),useTheme:du});function iT(e){return`scale(${e}, ${e**2})`}const gre={entering:{opacity:1,transform:iT(1)},entered:{opacity:1,transform:"none"}},bS=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),w0=Q.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:o,easing:l,in:a,onEnter:c,onEntered:p,onEntering:g,onExit:v,onExited:x,onExiting:b,style:P,timeout:I="auto",TransitionComponent:k=xc,...M}=t,O=Af(),F=Q.useRef(),N=du(),$=Q.useRef(null),j=to($,Xf(o),r),U=ue=>de=>{if(ue){const Me=$.current;de===void 0?ue(Me):ue(Me,de)}},H=U(g),Y=U((ue,de)=>{g2(ue);const{duration:Me,delay:ge,easing:xe}=cd({style:P,timeout:I,easing:l},{mode:"enter"});let Ee;I==="auto"?(Ee=N.transitions.getAutoHeightDuration(ue.clientHeight),F.current=Ee):Ee=Me,ue.style.transition=[N.transitions.create("opacity",{duration:Ee,delay:ge}),N.transitions.create("transform",{duration:bS?Ee:Ee*.666,delay:ge,easing:xe})].join(","),c&&c(ue,de)}),ae=U(p),ee=U(b),G=U(ue=>{const{duration:de,delay:Me,easing:ge}=cd({style:P,timeout:I,easing:l},{mode:"exit"});let xe;I==="auto"?(xe=N.transitions.getAutoHeightDuration(ue.clientHeight),F.current=xe):xe=de,ue.style.transition=[N.transitions.create("opacity",{duration:xe,delay:Me}),N.transitions.create("transform",{duration:bS?xe:xe*.666,delay:bS?Me:Me||xe*.333,easing:ge})].join(","),ue.style.opacity=0,ue.style.transform=iT(.75),v&&v(ue)}),ie=U(x),oe=ue=>{I==="auto"&&O.start(F.current||0,ue),n&&n($.current,ue)};return Z.jsx(k,{appear:i,in:a,nodeRef:$,onEnter:Y,onEntered:ae,onEntering:H,onExit:G,onExited:ie,onExiting:ee,addEndListener:oe,timeout:I==="auto"?null:I,...M,children:(ue,{ownerState:de,...Me})=>Q.cloneElement(o,{style:{opacity:0,transform:iT(.75),visibility:ue==="exited"&&!a?"hidden":void 0,...gre[ue],...P,...o.props.style},ref:j,...Me})})});w0&&(w0.muiSupportAuto=!0);const yre=e=>{const{classes:t,disableUnderline:r}=e,i=Qn({root:["root",!r&&"underline"],input:["input"]},oee,t);return{...t,...i}},vre=_r(x2,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...b2(e,t),!r.disableUnderline&&t.underline]}})(zn(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${iv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${iv.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${iv.disabled}, .${iv.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${iv.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Hs()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),bre=_r(w2,{name:"MuiInput",slot:"Input",overridesResolver:_2})({}),VP=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:l,fullWidth:a=!1,inputComponent:c="input",multiline:p=!1,slotProps:g,slots:v={},type:x="text",...b}=n,P=yre(n),k={root:{ownerState:{disableUnderline:i}}},M=g??l?ql(g??l,k):k,O=v.root??o.Root??vre,F=v.input??o.Input??bre;return Z.jsx(FP,{slots:{root:O,input:F},slotProps:M,fullWidth:a,inputComponent:c,multiline:p,ref:r,type:x,...b,classes:P})});VP.muiName="Input";function _re(e){return Jn("MuiInputLabel",e)}Xn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const xre=e=>{const{classes:t,formControl:r,size:n,shrink:i,disableAnimation:o,variant:l,required:a}=e,c={root:["root",r&&"formControl",!o&&"animated",i&&"shrink",n&&n!=="medium"&&`size${Wr(n)}`,l],asterisk:[a&&"asterisk"]},p=Qn(c,_re,t);return{...t,...p}},wre=_r(h7,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${r0.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(zn(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:n})=>t==="filled"&&r.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Ih=Q.forwardRef(function(t,r){const n=ni({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:o,shrink:l,variant:a,className:c,...p}=n,g=nf();let v=l;typeof v>"u"&&g&&(v=g.filled||g.focused||g.adornedStart);const x=Gh({props:n,muiFormControl:g,states:["size","variant","required","focused"]}),b={...n,disableAnimation:i,formControl:g,shrink:v,size:x.size,variant:x.variant,required:x.required,focused:x.focused},P=xre(b);return Z.jsx(wre,{"data-shrink":v,ref:r,className:cn(P.root,c),...p,ownerState:b,classes:P})}),Dc=Q.createContext({});function Sre(e){return Jn("MuiList",e)}Xn("MuiList",["root","padding","dense","subheader"]);const Cre=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return Qn({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},Sre,t)},Ere=_r("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),gd=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiList"}),{children:i,className:o,component:l="ul",dense:a=!1,disablePadding:c=!1,subheader:p,...g}=n,v=Q.useMemo(()=>({dense:a}),[a]),x={...n,component:l,dense:a,disablePadding:c},b=Cre(x);return Z.jsx(Dc.Provider,{value:v,children:Z.jsxs(Ere,{as:l,className:cn(b.root,o),ref:r,ownerState:x,...g,children:[p,i]})})});function Tre(e){return Jn("MuiListItem",e)}Xn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Pre(e){return Jn("MuiListItemButton",e)}const sg=Xn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Ire=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]},kre=e=>{const{alignItems:t,classes:r,dense:n,disabled:i,disableGutters:o,divider:l,selected:a}=e,p=Qn({root:["root",n&&"dense",!o&&"gutters",l&&"divider",i&&"disabled",t==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},Pre,r);return{...r,...p}},Are=_r(nm,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Ire})(zn(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${sg.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${sg.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${sg.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${sg.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${sg.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),p7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:l="div",children:a,dense:c=!1,disableGutters:p=!1,divider:g=!1,focusVisibleClassName:v,selected:x=!1,className:b,...P}=n,I=Q.useContext(Dc),k=Q.useMemo(()=>({dense:c||I.dense||!1,alignItems:i,disableGutters:p}),[i,I.dense,c,p]),M=Q.useRef(null);$l(()=>{o&&M.current&&M.current.focus()},[o]);const O={...n,alignItems:i,dense:k.dense,disableGutters:p,divider:g,selected:x},F=kre(O),N=to(M,r);return Z.jsx(Dc.Provider,{value:k,children:Z.jsx(Are,{ref:N,href:P.href||P.to,component:(P.href||P.to)&&l==="div"?"button":l,focusVisibleClassName:cn(F.focusVisible,v),ownerState:O,className:cn(F.root,b),...P,classes:F,children:a})})});function Mre(e){return Jn("MuiListItemSecondaryAction",e)}Xn("MuiListItemSecondaryAction",["root","disableGutters"]);const Lre=e=>{const{disableGutters:t,classes:r}=e;return Qn({root:["root",t&&"disableGutters"]},Mre,r)},Rre=_r("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),m7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...o}=n,l=Q.useContext(Dc),a={...n,disableGutters:l.disableGutters},c=Lre(a);return Z.jsx(Rre,{className:cn(c.root,i),ownerState:a,ref:r,...o})});m7.muiName="ListItemSecondaryAction";const Dre=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},Nre=e=>{const{alignItems:t,classes:r,dense:n,disableGutters:i,disablePadding:o,divider:l,hasSecondaryAction:a}=e;return Qn({root:["root",n&&"dense",!i&&"gutters",!o&&"padding",l&&"divider",t==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},Tre,r)},Ore=_r("div",{name:"MuiListItem",slot:"Root",overridesResolver:Dre})(zn(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${sg.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Fre=_r("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),zc=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiListItem"}),{alignItems:i="center",children:o,className:l,component:a,components:c={},componentsProps:p={},ContainerComponent:g="li",ContainerProps:{className:v,...x}={},dense:b=!1,disableGutters:P=!1,disablePadding:I=!1,divider:k=!1,secondaryAction:M,slotProps:O={},slots:F={},...N}=n,$=Q.useContext(Dc),j=Q.useMemo(()=>({dense:b||$.dense||!1,alignItems:i,disableGutters:P}),[i,$.dense,b,P]),U=Q.useRef(null),H=Q.Children.toArray(o),Y=H.length&&jg(H[H.length-1],["ListItemSecondaryAction"]),ae={...n,alignItems:i,dense:j.dense,disableGutters:P,disablePadding:I,divider:k,hasSecondaryAction:Y},ee=Nre(ae),G=to(U,r),ie=F.root||c.Root||Ore,oe=O.root||p.root||{},ue={className:cn(ee.root,oe.className,l),...N};let de=a||"li";return Y?(de=!ue.component&&!a?"div":de,g==="li"&&(de==="li"?de="div":ue.component==="li"&&(ue.component="div")),Z.jsx(Dc.Provider,{value:j,children:Z.jsxs(Fre,{as:g,className:cn(ee.container,v),ref:G,ownerState:ae,...x,children:[Z.jsx(ie,{...oe,...!Wd(ie)&&{as:de,ownerState:{...ae,...oe.ownerState}},...ue,children:H}),H.pop()]})})):Z.jsx(Dc.Provider,{value:j,children:Z.jsxs(ie,{...oe,as:de,ref:G,...!Wd(ie)&&{ownerState:{...ae,...oe.ownerState}},...ue,children:[H,M&&Z.jsx(m7,{children:M})]})})});function Bre(e){return Jn("MuiListItemAvatar",e)}Xn("MuiListItemAvatar",["root","alignItemsFlexStart"]);const zre=e=>{const{alignItems:t,classes:r}=e;return Qn({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Bre,r)},jre=_r("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),g7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiListItemAvatar"}),{className:i,...o}=n,l=Q.useContext(Dc),a={...n,alignItems:l.alignItems},c=zre(a);return Z.jsx(jre,{className:cn(c.root,i),ownerState:a,ref:r,...o})});function qre(e){return Jn("MuiListItemIcon",e)}const oR=Xn("MuiListItemIcon",["root","alignItemsFlexStart"]),$re=e=>{const{alignItems:t,classes:r}=e;return Qn({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},qre,r)},Vre=_r("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(zn(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),S0=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiListItemIcon"}),{className:i,...o}=n,l=Q.useContext(Dc),a={...n,alignItems:l.alignItems},c=$re(a);return Z.jsx(Vre,{className:cn(c.root,i),ownerState:a,ref:r,...o})});function Ure(e){return Jn("MuiListItemText",e)}const kg=Xn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Gre=e=>{const{classes:t,inset:r,primary:n,secondary:i,dense:o}=e;return Qn({root:["root",r&&"inset",o&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Ure,t)},Hre=_r("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${kg.primary}`]:t.primary},{[`& .${kg.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${NL.root}:where(& .${kg.primary})`]:{display:"block"},[`.${NL.root}:where(& .${kg.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Mc=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:l=!1,inset:a=!1,primary:c,primaryTypographyProps:p,secondary:g,secondaryTypographyProps:v,slots:x={},slotProps:b={},...P}=n,{dense:I}=Q.useContext(Dc);let k=c??i,M=g;const O={...n,disableTypography:l,inset:a,primary:!!k,secondary:!!M,dense:I},F=Gre(O),N={slots:x,slotProps:{primary:p,secondary:v,...b}},[$,j]=ri("root",{className:cn(F.root,o),elementType:Hre,externalForwardedProps:{...N,...P},ownerState:O,ref:r}),[U,H]=ri("primary",{className:F.primary,elementType:Ko,externalForwardedProps:N,ownerState:O}),[Y,ae]=ri("secondary",{className:F.secondary,elementType:Ko,externalForwardedProps:N,ownerState:O});return k!=null&&k.type!==Ko&&!l&&(k=Z.jsx(U,{variant:I?"body2":"body1",component:H?.variant?void 0:"span",...H,children:k})),M!=null&&M.type!==Ko&&!l&&(M=Z.jsx(Y,{variant:"body2",color:"textSecondary",...ae,children:M})),Z.jsxs($,{...j,children:[k,M]})});function _S(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function sR(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function y7(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function av(e,t,r,n,i,o){let l=!1,a=i(e,t,t?r:!1);for(;a;){if(a===e.firstChild){if(l)return!1;l=!0}const c=n?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!y7(a,o)||c)a=i(e,a,r);else return a.focus(),!0}return!1}const Wre=Q.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:l,className:a,disabledItemsFocusable:c=!1,disableListWrap:p=!1,onKeyDown:g,variant:v="selectedMenu",...x}=t,b=Q.useRef(null),P=Q.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$l(()=>{i&&b.current.focus()},[i]),Q.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(F,{direction:N})=>{const $=!b.current.style.width;if(F.clientHeight<b.current.clientHeight&&$){const j=`${s7(Pu(F))}px`;b.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=j,b.current.style.width=`calc(100% + ${j})`}return b.current}}),[]);const I=F=>{const N=b.current,$=F.key;if(F.ctrlKey||F.metaKey||F.altKey){g&&g(F);return}const U=jo(N).activeElement;if($==="ArrowDown")F.preventDefault(),av(N,U,p,c,_S);else if($==="ArrowUp")F.preventDefault(),av(N,U,p,c,sR);else if($==="Home")F.preventDefault(),av(N,null,p,c,_S);else if($==="End")F.preventDefault(),av(N,null,p,c,sR);else if($.length===1){const H=P.current,Y=$.toLowerCase(),ae=performance.now();H.keys.length>0&&(ae-H.lastTime>500?(H.keys=[],H.repeating=!0,H.previousKeyMatched=!0):H.repeating&&Y!==H.keys[0]&&(H.repeating=!1)),H.lastTime=ae,H.keys.push(Y);const ee=U&&!H.repeating&&y7(U,H);H.previousKeyMatched&&(ee||av(N,U,!1,c,_S,H))?F.preventDefault():H.previousKeyMatched=!1}g&&g(F)},k=to(b,r);let M=-1;Q.Children.forEach(l,(F,N)=>{if(!Q.isValidElement(F)){M===N&&(M+=1,M>=l.length&&(M=-1));return}F.props.disabled||(v==="selectedMenu"&&F.props.selected||M===-1)&&(M=N),M===N&&(F.props.disabled||F.props.muiSkipListHighlight||F.type.muiSkipListHighlight)&&(M+=1,M>=l.length&&(M=-1))});const O=Q.Children.map(l,(F,N)=>{if(N===M){const $={};return o&&($.autoFocus=!0),F.props.tabIndex===void 0&&v==="selectedMenu"&&($.tabIndex=0),Q.cloneElement(F,$)}return F});return Z.jsx(gd,{role:"menu",ref:k,className:a,onKeyDown:I,tabIndex:i?0:-1,...x,children:O})});function Xre(e){return Jn("MuiPopover",e)}Xn("MuiPopover",["root","paper"]);function lR(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function uR(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function cR(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function nb(e){return typeof e=="function"?e():e}const Yre=e=>{const{classes:t}=e;return Qn({root:["root"],paper:["paper"]},Xre,t)},Zre=_r(BP,{name:"MuiPopover",slot:"Root"})({}),v7=_r(Oc,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Kre=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:c="anchorEl",children:p,className:g,container:v,elevation:x=8,marginThreshold:b=16,open:P,PaperProps:I={},slots:k={},slotProps:M={},transformOrigin:O={vertical:"top",horizontal:"left"},TransitionComponent:F,transitionDuration:N="auto",TransitionProps:$={},disableScrollLock:j=!1,...U}=n,H=Q.useRef(),Y={...n,anchorOrigin:l,anchorReference:c,elevation:x,marginThreshold:b,transformOrigin:O,TransitionComponent:F,transitionDuration:N,TransitionProps:$},ae=Yre(Y),ee=Q.useCallback(()=>{if(c==="anchorPosition")return a;const Ye=nb(o),Ie=(Ye&&Ye.nodeType===1?Ye:jo(H.current).body).getBoundingClientRect();return{top:Ie.top+lR(Ie,l.vertical),left:Ie.left+uR(Ie,l.horizontal)}},[o,l.horizontal,l.vertical,a,c]),G=Q.useCallback(Ye=>({vertical:lR(Ye,O.vertical),horizontal:uR(Ye,O.horizontal)}),[O.horizontal,O.vertical]),ie=Q.useCallback(Ye=>{const rt={width:Ye.offsetWidth,height:Ye.offsetHeight},Ie=G(rt);if(c==="none")return{top:null,left:null,transformOrigin:cR(Ie)};const It=ee();let at=It.top-Ie.vertical,je=It.left-Ie.horizontal;const Ht=at+rt.height,Wt=je+rt.width,zt=Pu(nb(o)),st=zt.innerHeight-b,sr=zt.innerWidth-b;if(b!==null&&at<b){const ur=at-b;at-=ur,Ie.vertical+=ur}else if(b!==null&&Ht>st){const ur=Ht-st;at-=ur,Ie.vertical+=ur}if(b!==null&&je<b){const ur=je-b;je-=ur,Ie.horizontal+=ur}else if(Wt>sr){const ur=Wt-sr;je-=ur,Ie.horizontal+=ur}return{top:`${Math.round(at)}px`,left:`${Math.round(je)}px`,transformOrigin:cR(Ie)}},[o,c,ee,G,b]),[oe,ue]=Q.useState(P),de=Q.useCallback(()=>{const Ye=H.current;if(!Ye)return;const rt=ie(Ye);rt.top!==null&&Ye.style.setProperty("top",rt.top),rt.left!==null&&(Ye.style.left=rt.left),Ye.style.transformOrigin=rt.transformOrigin,ue(!0)},[ie]);Q.useEffect(()=>(j&&window.addEventListener("scroll",de),()=>window.removeEventListener("scroll",de)),[o,j,de]);const Me=()=>{de()},ge=()=>{ue(!1)};Q.useEffect(()=>{P&&de()}),Q.useImperativeHandle(i,()=>P?{updatePosition:()=>{de()}}:null,[P,de]),Q.useEffect(()=>{if(!P)return;const Ye=TP(()=>{de()}),rt=Pu(nb(o));return rt.addEventListener("resize",Ye),()=>{Ye.clear(),rt.removeEventListener("resize",Ye)}},[o,P,de]);let xe=N;const Ee={slots:{transition:F,...k},slotProps:{transition:$,paper:I,...M}},[Ae,fe]=ri("transition",{elementType:w0,externalForwardedProps:Ee,ownerState:Y,getSlotProps:Ye=>({...Ye,onEntering:(rt,Ie)=>{Ye.onEntering?.(rt,Ie),Me()},onExited:rt=>{Ye.onExited?.(rt),ge()}}),additionalProps:{appear:!0,in:P}});N==="auto"&&!Ae.muiSupportAuto&&(xe=void 0);const Se=v||(o?jo(nb(o)).body:void 0),[we,{slots:De,slotProps:Re,...$e}]=ri("root",{ref:r,elementType:Zre,externalForwardedProps:{...Ee,...U},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:k.backdrop},slotProps:{backdrop:Kg(typeof M.backdrop=="function"?M.backdrop(Y):M.backdrop,{invisible:!0})},container:Se,open:P},ownerState:Y,className:cn(ae.root,g)}),[Oe,it]=ri("paper",{ref:H,className:ae.paper,elementType:v7,externalForwardedProps:Ee,shouldForwardComponentProp:!0,additionalProps:{elevation:x,style:oe?void 0:{opacity:0}},ownerState:Y});return Z.jsx(we,{...$e,...!Wd(we)&&{slots:De,slotProps:Re,disableScrollLock:j},children:Z.jsx(Ae,{...fe,timeout:xe,children:Z.jsx(Oe,{...it,children:p})})})});function Jre(e){return Jn("MuiMenu",e)}Xn("MuiMenu",["root","paper","list"]);const Qre={vertical:"top",horizontal:"right"},ene={vertical:"top",horizontal:"left"},tne=e=>{const{classes:t}=e;return Qn({root:["root"],paper:["paper"],list:["list"]},Jre,t)},rne=_r(Kre,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),nne=_r(v7,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),ine=_r(Wre,{name:"MuiMenu",slot:"List"})({outline:0}),b7=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:l,disableAutoFocusItem:a=!1,MenuListProps:c={},onClose:p,open:g,PaperProps:v={},PopoverClasses:x,transitionDuration:b="auto",TransitionProps:{onEntering:P,...I}={},variant:k="selectedMenu",slots:M={},slotProps:O={},...F}=n,N=i1(),$={...n,autoFocus:i,disableAutoFocusItem:a,MenuListProps:c,onEntering:P,PaperProps:v,transitionDuration:b,TransitionProps:I,variant:k},j=tne($),U=i&&!a&&g,H=Q.useRef(null),Y=(xe,Ee)=>{H.current&&H.current.adjustStyleForScrollbar(xe,{direction:N?"rtl":"ltr"}),P&&P(xe,Ee)},ae=xe=>{xe.key==="Tab"&&(xe.preventDefault(),p&&p(xe,"tabKeyDown"))};let ee=-1;Q.Children.map(o,(xe,Ee)=>{Q.isValidElement(xe)&&(xe.props.disabled||(k==="selectedMenu"&&xe.props.selected||ee===-1)&&(ee=Ee))});const G={slots:M,slotProps:{list:c,transition:I,paper:v,...O}},ie=jd({elementType:M.root,externalSlotProps:O.root,ownerState:$,className:[j.root,l]}),[oe,ue]=ri("paper",{className:j.paper,elementType:nne,externalForwardedProps:G,shouldForwardComponentProp:!0,ownerState:$}),[de,Me]=ri("list",{className:cn(j.list,c.className),elementType:ine,shouldForwardComponentProp:!0,externalForwardedProps:G,getSlotProps:xe=>({...xe,onKeyDown:Ee=>{ae(Ee),xe.onKeyDown?.(Ee)}}),ownerState:$}),ge=typeof G.slotProps.transition=="function"?G.slotProps.transition($):G.slotProps.transition;return Z.jsx(rne,{onClose:p,anchorOrigin:{vertical:"bottom",horizontal:N?"right":"left"},transformOrigin:N?Qre:ene,slots:{root:M.root,paper:oe,backdrop:M.backdrop,...M.transition&&{transition:M.transition}},slotProps:{root:ie,paper:ue,backdrop:typeof O.backdrop=="function"?O.backdrop($):O.backdrop,transition:{...ge,onEntering:(...xe)=>{Y(...xe),ge?.onEntering?.(...xe)}}},open:g,ref:r,transitionDuration:b,ownerState:$,...F,classes:x,children:Z.jsx(de,{actions:H,autoFocus:i&&(ee===-1||a),autoFocusItem:U,variant:k,...Me,children:o})})});function ane(e){return Jn("MuiMenuItem",e)}const ov=Xn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),one=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},sne=e=>{const{disabled:t,dense:r,divider:n,disableGutters:i,selected:o,classes:l}=e,c=Qn({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",o&&"selected"]},ane,l);return{...l,...c}},lne=_r(nm,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:one})(zn(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ov.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${ov.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${ov.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${ov.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ov.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${rR.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${rR.inset}`]:{marginLeft:52},[`& .${kg.root}`]:{marginTop:0,marginBottom:0},[`& .${kg.inset}`]:{paddingLeft:36},[`& .${oR.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${oR.root} svg`]:{fontSize:"1.25rem"}}}]}))),Np=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:l=!1,divider:a=!1,disableGutters:c=!1,focusVisibleClassName:p,role:g="menuitem",tabIndex:v,className:x,...b}=n,P=Q.useContext(Dc),I=Q.useMemo(()=>({dense:l||P.dense||!1,disableGutters:c}),[P.dense,l,c]),k=Q.useRef(null);$l(()=>{i&&k.current&&k.current.focus()},[i]);const M={...n,dense:I.dense,divider:a,disableGutters:c},O=sne(n),F=to(k,r);let N;return n.disabled||(N=v!==void 0?v:-1),Z.jsx(Dc.Provider,{value:I,children:Z.jsx(lne,{ref:F,role:g,tabIndex:N,component:o,focusVisibleClassName:cn(O.focusVisible,p),className:cn(O.root,x),...b,ownerState:M,classes:O})})});function une(e){return Jn("MuiNativeSelect",e)}const UP=Xn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),cne=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:l}=e,a={select:["select",r,n&&"disabled",i&&"multiple",l&&"error"],icon:["icon",`icon${Wr(r)}`,o&&"iconOpen",n&&"disabled"]};return Qn(a,une,t)},_7=_r("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${UP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),dne=_r(_7,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:As,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${UP.multiple}`]:t.multiple}]}})({}),x7=_r("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${UP.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),fne=_r(x7,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${Wr(r.variant)}`],r.open&&t.iconOpen]}})({}),hne=Q.forwardRef(function(t,r){const{className:n,disabled:i,error:o,IconComponent:l,inputRef:a,variant:c="standard",...p}=t,g={...t,disabled:i,variant:c,error:o},v=cne(g);return Z.jsxs(Q.Fragment,{children:[Z.jsx(dne,{ownerState:g,className:cn(v.select,n),disabled:i,ref:a||r,...p}),t.multiple?null:Z.jsx(fne,{as:l,ownerState:g,className:v.icon})]})});function pne(e){const{children:t,defer:r=!1,fallback:n=null}=e,[i,o]=Q.useState(!1);return $l(()=>{r||o(!0)},[r]),Q.useEffect(()=>{r&&o(!0)},[r]),i?t:n}var dR;const mne=_r("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:As})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),gne=_r("legend",{name:"MuiNotchedOutlined",shouldForwardProp:As})(zn(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function yne(e){const{children:t,classes:r,className:n,label:i,notched:o,...l}=e,a=i!=null&&i!=="",c={...e,notched:o,withLabel:a};return Z.jsx(mne,{"aria-hidden":!0,className:n,ownerState:c,...l,children:Z.jsx(gne,{ownerState:c,children:a?Z.jsx("span",{children:i}):dR||(dR=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const vne=e=>{const{classes:t}=e,n=Qn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},see,t);return{...t,...n}},bne=_r(x2,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:b2})(zn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Fd.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Fd.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${Fd.focused} .${Fd.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Hs()).map(([r])=>({props:{color:r},style:{[`&.${Fd.focused} .${Fd.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${Fd.error} .${Fd.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Fd.disabled} .${Fd.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:n})=>r.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),_ne=_r(yne,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(zn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),xne=_r(w2,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:_2})(zn(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),S2=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:l="input",label:a,multiline:c=!1,notched:p,slots:g={},slotProps:v={},type:x="text",...b}=n,P=vne(n),I=nf(),k=Gh({props:n,muiFormControl:I,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),M={...n,color:k.color||"primary",disabled:k.disabled,error:k.error,focused:k.focused,formControl:I,fullWidth:o,hiddenLabel:k.hiddenLabel,multiline:c,size:k.size,type:x},O=g.root??i.Root??bne,F=g.input??i.Input??xne,[N,$]=ri("notchedOutline",{elementType:_ne,className:P.notchedOutline,shouldForwardComponentProp:!0,ownerState:M,externalForwardedProps:{slots:g,slotProps:v},additionalProps:{label:a!=null&&a!==""&&k.required?Z.jsxs(Q.Fragment,{children:[a,"","*"]}):a}});return Z.jsx(FP,{slots:{root:O,input:F},slotProps:v,renderSuffix:j=>Z.jsx(N,{...$,notched:typeof p<"u"?p:!!(j.startAdornment||j.filled||j.focused)}),fullWidth:o,inputComponent:l,multiline:c,ref:r,type:x,...b,classes:{...P,notchedOutline:null}})});S2.muiName="Input";const wne=Ei(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Sne=Ei(Z.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Cne=_r("span",{name:"MuiRadioButtonIcon",shouldForwardProp:As})({position:"relative",display:"flex"}),Ene=_r(wne,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Tne=_r(Sne,{name:"MuiRadioButtonIcon"})(zn(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function w7(e){const{checked:t=!1,classes:r={},fontSize:n}=e,i={...e,checked:t};return Z.jsxs(Cne,{className:r.root,ownerState:i,children:[Z.jsx(Ene,{fontSize:n,className:r.background,ownerState:i}),Z.jsx(Tne,{fontSize:n,className:r.dot,ownerState:i})]})}const S7=Q.createContext(void 0);function Pne(){return Q.useContext(S7)}function Ine(e){return Jn("MuiRadio",e)}const fR=Xn("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),kne=e=>{const{classes:t,color:r,size:n}=e,i={root:["root",`color${Wr(r)}`,n!=="medium"&&`size${Wr(n)}`]};return{...t,...Qn(i,Ine,t)}},Ane=_r(o7,{shouldForwardProp:e=>As(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size!=="medium"&&t[`size${Wr(r.size)}`],t[`color${Wr(r.color)}`]]}})(zn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${fR.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${fR.checked}`]:{color:(e.vars||e).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Mne(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const Lne=Z.jsx(w7,{checked:!0}),Rne=Z.jsx(w7,{}),hR=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiRadio"}),{checked:i,checkedIcon:o=Lne,color:l="primary",icon:a=Rne,name:c,onChange:p,size:g="medium",className:v,disabled:x,disableRipple:b=!1,slots:P={},slotProps:I={},inputProps:k,...M}=n,O=nf();let F=x;O&&typeof F>"u"&&(F=O.disabled),F??=!1;const N={...n,disabled:F,disableRipple:b,color:l,size:g},$=kne(N),j=Pne();let U=i;const H=V4(p,j&&j.onChange);let Y=c;j&&(typeof U>"u"&&(U=Mne(j.value,n.value)),typeof Y>"u"&&(Y=j.name));const ae=I.input??k,[ee,G]=ri("root",{ref:r,elementType:Ane,className:cn($.root,v),shouldForwardComponentProp:!0,externalForwardedProps:{slots:P,slotProps:I,...M},getSlotProps:ie=>({...ie,onChange:(oe,...ue)=>{ie.onChange?.(oe,...ue),H(oe,...ue)}}),ownerState:N,additionalProps:{type:"radio",icon:Q.cloneElement(a,{fontSize:a.props.fontSize??g}),checkedIcon:Q.cloneElement(o,{fontSize:o.props.fontSize??g}),disabled:F,name:Y,checked:U,slots:P,slotProps:{input:typeof ae=="function"?ae(N):ae}}});return Z.jsx(ee,{...G,classes:$})});function Dne(e){return Jn("MuiRadioGroup",e)}Xn("MuiRadioGroup",["root","row","error"]);const Nne=e=>{const{classes:t,row:r,error:n}=e;return Qn({root:["root",r&&"row",n&&"error"]},Dne,t)},One=Q.forwardRef(function(t,r){const{actions:n,children:i,className:o,defaultValue:l,name:a,onChange:c,value:p,...g}=t,v=Q.useRef(null),x=Nne(t),[b,P]=Rh({controlled:p,default:l,name:"RadioGroup"});Q.useImperativeHandle(n,()=>({focus:()=>{let O=v.current.querySelector("input:not(:disabled):checked");O||(O=v.current.querySelector("input:not(:disabled)")),O&&O.focus()}}),[]);const I=to(r,v),k=$h(a),M=Q.useMemo(()=>({name:k,onChange(O){P(O.target.value),c&&c(O,O.target.value)},value:b}),[k,c,P,b]);return Z.jsx(S7.Provider,{value:M,children:Z.jsx(f7,{role:"radiogroup",ref:I,className:cn(x.root,o),...g,children:i})})}),Fne={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function C7(e){return Jn("MuiSelect",e)}const sv=Xn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var pR;const Bne=_r(_7,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${sv.select}`]:t.select},{[`&.${sv.select}`]:t[r.variant]},{[`&.${sv.error}`]:t.error},{[`&.${sv.multiple}`]:t.multiple}]}})({[`&.${sv.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),zne=_r(x7,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${Wr(r.variant)}`],r.open&&t.iconOpen]}})({}),jne=_r("input",{shouldForwardProp:e=>f2(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function mR(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function qne(e){return e==null||typeof e=="string"&&!e.trim()}const $ne=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:l}=e,a={select:["select",r,n&&"disabled",i&&"multiple",l&&"error"],icon:["icon",`icon${Wr(r)}`,o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return Qn(a,C7,t)},Vne=Q.forwardRef(function(t,r){const{"aria-describedby":n,"aria-label":i,autoFocus:o,autoWidth:l,children:a,className:c,defaultOpen:p,defaultValue:g,disabled:v,displayEmpty:x,error:b=!1,IconComponent:P,inputRef:I,labelId:k,MenuProps:M={},multiple:O,name:F,onBlur:N,onChange:$,onClose:j,onFocus:U,onOpen:H,open:Y,readOnly:ae,renderValue:ee,required:G,SelectDisplayProps:ie={},tabIndex:oe,type:ue,value:de,variant:Me="standard",...ge}=t,[xe,Ee]=Rh({controlled:de,default:g,name:"Select"}),[Ae,fe]=Rh({controlled:Y,default:p,name:"Select"}),Se=Q.useRef(null),we=Q.useRef(null),[De,Re]=Q.useState(null),{current:$e}=Q.useRef(Y!=null),[Oe,it]=Q.useState(),Ye=to(r,I),rt=Q.useCallback(et=>{we.current=et,et&&Re(et)},[]),Ie=De?.parentNode;Q.useImperativeHandle(Ye,()=>({focus:()=>{we.current.focus()},node:Se.current,value:xe}),[xe]),Q.useEffect(()=>{p&&Ae&&De&&!$e&&(it(l?null:Ie.clientWidth),we.current.focus())},[De,l]),Q.useEffect(()=>{o&&we.current.focus()},[o]),Q.useEffect(()=>{if(!k)return;const et=jo(we.current).getElementById(k);if(et){const Lt=()=>{getSelection().isCollapsed&&we.current.focus()};return et.addEventListener("click",Lt),()=>{et.removeEventListener("click",Lt)}}},[k]);const It=(et,Lt)=>{et?H&&H(Lt):j&&j(Lt),$e||(it(l?null:Ie.clientWidth),fe(et))},at=et=>{et.button===0&&(et.preventDefault(),we.current.focus(),It(!0,et))},je=et=>{It(!1,et)},Ht=Q.Children.toArray(a),Wt=et=>{const Lt=Ht.find(vt=>vt.props.value===et.target.value);Lt!==void 0&&(Ee(Lt.props.value),$&&$(et,Lt))},zt=et=>Lt=>{let vt;if(Lt.currentTarget.hasAttribute("tabindex")){if(O){vt=Array.isArray(xe)?xe.slice():[];const Bt=xe.indexOf(et.props.value);Bt===-1?vt.push(et.props.value):vt.splice(Bt,1)}else vt=et.props.value;if(et.props.onClick&&et.props.onClick(Lt),xe!==vt&&(Ee(vt),$)){const Bt=Lt.nativeEvent||Lt,Kt=new Bt.constructor(Bt.type,Bt);Object.defineProperty(Kt,"target",{writable:!0,value:{value:vt,name:F}}),$(Kt,et)}O||It(!1,Lt)}},st=et=>{ae||[" ","ArrowUp","ArrowDown","Enter"].includes(et.key)&&(et.preventDefault(),It(!0,et))},sr=De!==null&&Ae,ur=et=>{!sr&&N&&(Object.defineProperty(et,"target",{writable:!0,value:{value:xe,name:F}}),N(et))};delete ge["aria-invalid"];let ar,yr;const pr=[];let Jt=!1;(j_({value:xe})||x)&&(ee?ar=ee(xe):Jt=!0);const ir=Ht.map(et=>{if(!Q.isValidElement(et))return null;let Lt;if(O){if(!Array.isArray(xe))throw new Error(zf(2));Lt=xe.some(vt=>mR(vt,et.props.value)),Lt&&Jt&&pr.push(et.props.children)}else Lt=mR(xe,et.props.value),Lt&&Jt&&(yr=et.props.children);return Q.cloneElement(et,{"aria-selected":Lt?"true":"false",onClick:zt(et),onKeyUp:vt=>{vt.key===" "&&vt.preventDefault(),et.props.onKeyUp&&et.props.onKeyUp(vt)},role:"option",selected:Lt,value:void 0,"data-value":et.props.value})});Jt&&(O?pr.length===0?ar=null:ar=pr.reduce((et,Lt,vt)=>(et.push(Lt),vt<pr.length-1&&et.push(", "),et),[]):ar=yr);let xr=Oe;!l&&$e&&De&&(xr=Ie.clientWidth);let rr;typeof oe<"u"?rr=oe:rr=v?null:0;const nt=ie.id||(F?`mui-component-select-${F}`:void 0),be={...t,variant:Me,value:xe,open:sr,error:b},_e=$ne(be),Ue={...M.PaperProps,...typeof M.slotProps?.paper=="function"?M.slotProps.paper(be):M.slotProps?.paper},Qe={...M.MenuListProps,...typeof M.slotProps?.list=="function"?M.slotProps.list(be):M.slotProps?.list},ot=$h();return Z.jsxs(Q.Fragment,{children:[Z.jsx(Bne,{as:"div",ref:rt,tabIndex:rr,role:"combobox","aria-controls":sr?ot:void 0,"aria-disabled":v?"true":void 0,"aria-expanded":sr?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[k,nt].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":G?"true":void 0,"aria-invalid":b?"true":void 0,onKeyDown:st,onMouseDown:v||ae?null:at,onBlur:ur,onFocus:U,...ie,ownerState:be,className:cn(ie.className,_e.select,c),id:nt,children:qne(ar)?pR||(pR=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ar}),Z.jsx(jne,{"aria-invalid":b,value:Array.isArray(xe)?xe.join(","):xe,name:F,ref:Se,"aria-hidden":!0,onChange:Wt,tabIndex:-1,disabled:v,className:_e.nativeInput,autoFocus:o,required:G,...ge,ownerState:be}),Z.jsx(zne,{as:P,className:_e.icon,ownerState:be}),Z.jsx(b7,{id:`menu-${F||""}`,anchorEl:Ie,open:sr,onClose:je,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...M,slotProps:{...M.slotProps,list:{"aria-labelledby":k,role:"listbox","aria-multiselectable":O?"true":void 0,disableListWrap:!0,id:ot,...Qe},paper:{...Ue,style:{minWidth:xr,...Ue!=null?Ue.style:null}}},children:ir})]})}),Une=e=>{const{classes:t}=e,n=Qn({root:["root"]},C7,t);return{...t,...n}},GP={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>As(e)&&e!=="variant"},Gne=_r(VP,GP)(""),Hne=_r(S2,GP)(""),Wne=_r($P,GP)(""),kh=Q.forwardRef(function(t,r){const n=ni({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:l={},className:a,defaultOpen:c=!1,displayEmpty:p=!1,IconComponent:g=uee,id:v,input:x,inputProps:b,label:P,labelId:I,MenuProps:k,multiple:M=!1,native:O=!1,onClose:F,onOpen:N,open:$,renderValue:j,SelectDisplayProps:U,variant:H="outlined",...Y}=n,ae=O?hne:Vne,ee=nf(),G=Gh({props:n,muiFormControl:ee,states:["variant","error"]}),ie=G.variant||H,oe={...n,variant:ie,classes:l},ue=Une(oe),{root:de,...Me}=ue,ge=x||{standard:Z.jsx(Gne,{ownerState:oe}),outlined:Z.jsx(Hne,{label:P,ownerState:oe}),filled:Z.jsx(Wne,{ownerState:oe})}[ie],xe=to(r,Xf(ge));return Z.jsx(Q.Fragment,{children:Q.cloneElement(ge,{inputComponent:ae,inputProps:{children:o,error:G.error,IconComponent:g,variant:ie,type:void 0,multiple:M,...O?{id:v}:{autoWidth:i,defaultOpen:c,displayEmpty:p,labelId:I,MenuProps:k,onClose:F,onOpen:N,open:$,renderValue:j,SelectDisplayProps:{id:v,...U}},...b,classes:b?ql(Me,b.classes):Me,...x?x.props.inputProps:{}},...(M&&O||p)&&ie==="outlined"?{notched:!0}:{},ref:xe,className:cn(ge.props.className,a,ue.root),...!x&&{variant:ie},...Y})})});kh.muiName="Select";function Xne(e,t,r=(n,i)=>n===i){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}const Yne=2;function Hm(e,t,r,n,i){return r===1?Math.min(e+t,i):Math.max(e-t,n)}function E7(e,t){return e-t}function gR(e,t){const{index:r}=e.reduce((n,i,o)=>{const l=Math.abs(t-i);return n===null||l<n.distance||l===n.distance?{distance:l,index:o}:n},null)??{};return r}function ib(e,t){if(t.current!==void 0&&e.changedTouches){const r=e;for(let n=0;n<r.changedTouches.length;n+=1){const i=r.changedTouches[n];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function q_(e,t,r){return(e-t)*100/(r-t)}function Zne(e,t,r){return(r-t)*e+t}function Kne(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),n=r[0].split(".")[1];return(n?n.length:0)+parseInt(r[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function Jne(e,t,r){const n=Math.round((e-r)/t)*t+r;return Number(n.toFixed(Kne(t)))}function yR({values:e,newValue:t,index:r}){const n=e.slice();return n[r]=t,n.sort(E7)}function ab({sliderRef:e,activeIndex:t,setActive:r}){const n=jo(e.current);(!e.current?.contains(n.activeElement)||Number(n?.activeElement?.getAttribute("data-index"))!==t)&&e.current?.querySelector(`[type="range"][data-index="${t}"]`).focus(),r&&r(t)}function ob(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?Xne(e,t):!1}const Qne={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},eie=e=>e;let sb;function vR(){return sb===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?sb=CSS.supports("touch-action","none"):sb=!0),sb}function tie(e){const{"aria-labelledby":t,defaultValue:r,disabled:n=!1,disableSwap:i=!1,isRtl:o=!1,marks:l=!1,max:a=100,min:c=0,name:p,onChange:g,onChangeCommitted:v,orientation:x="horizontal",rootRef:b,scale:P=eie,step:I=1,shiftStep:k=10,tabIndex:M,value:O}=e,F=Q.useRef(void 0),[N,$]=Q.useState(-1),[j,U]=Q.useState(-1),[H,Y]=Q.useState(!1),ae=Q.useRef(0),ee=Q.useRef(null),[G,ie]=Rh({controlled:O,default:r??c,name:"Slider"}),oe=g&&((Jt,ir,xr)=>{const rr=Jt.nativeEvent||Jt,nt=new rr.constructor(rr.type,rr);Object.defineProperty(nt,"target",{writable:!0,value:{value:ir,name:p}}),ee.current=ir,g(nt,ir,xr)}),ue=Array.isArray(G);let de=ue?G.slice().sort(E7):[G];de=de.map(Jt=>Jt==null?c:wp(Jt,c,a));const Me=l===!0&&I!==null?[...Array(Math.floor((a-c)/I)+1)].map((Jt,ir)=>({value:c+I*ir})):l||[],ge=Me.map(Jt=>Jt.value),[xe,Ee]=Q.useState(-1),Ae=Q.useRef(null),fe=to(b,Ae),Se=Jt=>ir=>{const xr=Number(ir.currentTarget.getAttribute("data-index"));Jg(ir.target)&&Ee(xr),U(xr),Jt?.onFocus?.(ir)},we=Jt=>ir=>{Jg(ir.target)||Ee(-1),U(-1),Jt?.onBlur?.(ir)},De=(Jt,ir)=>{const xr=Number(Jt.currentTarget.getAttribute("data-index")),rr=de[xr],nt=ge.indexOf(rr);let be=ir;if(Me&&I==null){const _e=ge[ge.length-1];be>=_e?be=_e:be<=ge[0]?be=ge[0]:be=be<rr?ge[nt-1]:ge[nt+1]}if(be=wp(be,c,a),ue){i&&(be=wp(be,de[xr-1]||-1/0,de[xr+1]||1/0));const _e=be;be=yR({values:de,newValue:be,index:xr});let Ue=xr;i||(Ue=be.indexOf(_e)),ab({sliderRef:Ae,activeIndex:Ue})}ie(be),Ee(xr),oe&&!ob(be,G)&&oe(Jt,be,xr),v&&v(Jt,ee.current??be)},Re=Jt=>ir=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(ir.key)){ir.preventDefault();const xr=Number(ir.currentTarget.getAttribute("data-index")),rr=de[xr];let nt=null;if(I!=null){const be=ir.shiftKey?k:I;switch(ir.key){case"ArrowUp":nt=Hm(rr,be,1,c,a);break;case"ArrowRight":nt=Hm(rr,be,o?-1:1,c,a);break;case"ArrowDown":nt=Hm(rr,be,-1,c,a);break;case"ArrowLeft":nt=Hm(rr,be,o?1:-1,c,a);break;case"PageUp":nt=Hm(rr,k,1,c,a);break;case"PageDown":nt=Hm(rr,k,-1,c,a);break;case"Home":nt=c;break;case"End":nt=a;break}}else if(Me){const be=ge[ge.length-1],_e=ge.indexOf(rr),Ue=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Qe=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Ue.includes(ir.key)?_e===0?nt=ge[0]:nt=ge[_e-1]:Qe.includes(ir.key)&&(_e===ge.length-1?nt=be:nt=ge[_e+1])}nt!=null&&De(ir,nt)}Jt?.onKeyDown?.(ir)};$l(()=>{n&&Ae.current.contains(document.activeElement)&&document.activeElement?.blur()},[n]),n&&N!==-1&&$(-1),n&&xe!==-1&&Ee(-1);const $e=Jt=>ir=>{Jt.onChange?.(ir),De(ir,ir.target.valueAsNumber)},Oe=Q.useRef(void 0);let it=x;o&&x==="horizontal"&&(it+="-reverse");const Ye=({finger:Jt,move:ir=!1})=>{const{current:xr}=Ae,{width:rr,height:nt,bottom:be,left:_e}=xr.getBoundingClientRect();let Ue;it.startsWith("vertical")?Ue=(be-Jt.y)/nt:Ue=(Jt.x-_e)/rr,it.includes("-reverse")&&(Ue=1-Ue);let Qe;if(Qe=Zne(Ue,c,a),I)Qe=Jne(Qe,I,c);else{const et=gR(ge,Qe);Qe=ge[et]}Qe=wp(Qe,c,a);let ot=0;if(ue){ir?ot=Oe.current:ot=gR(de,Qe),i&&(Qe=wp(Qe,de[ot-1]||-1/0,de[ot+1]||1/0));const et=Qe;Qe=yR({values:de,newValue:Qe,index:ot}),i&&ir||(ot=Qe.indexOf(et),Oe.current=ot)}return{newValue:Qe,activeIndex:ot}},rt=Sl(Jt=>{const ir=ib(Jt,F);if(!ir)return;if(ae.current+=1,Jt.type==="mousemove"&&Jt.buttons===0){Ie(Jt);return}const{newValue:xr,activeIndex:rr}=Ye({finger:ir,move:!0});ab({sliderRef:Ae,activeIndex:rr,setActive:$}),ie(xr),!H&&ae.current>Yne&&Y(!0),oe&&!ob(xr,G)&&oe(Jt,xr,rr)}),Ie=Sl(Jt=>{const ir=ib(Jt,F);if(Y(!1),!ir)return;const{newValue:xr}=Ye({finger:ir,move:!0});$(-1),Jt.type==="touchend"&&U(-1),v&&v(Jt,ee.current??xr),F.current=void 0,at()}),It=Sl(Jt=>{if(n)return;vR()||Jt.preventDefault();const ir=Jt.changedTouches[0];ir!=null&&(F.current=ir.identifier);const xr=ib(Jt,F);if(xr!==!1){const{newValue:nt,activeIndex:be}=Ye({finger:xr});ab({sliderRef:Ae,activeIndex:be,setActive:$}),ie(nt),oe&&!ob(nt,G)&&oe(Jt,nt,be)}ae.current=0;const rr=jo(Ae.current);rr.addEventListener("touchmove",rt,{passive:!0}),rr.addEventListener("touchend",Ie,{passive:!0})}),at=Q.useCallback(()=>{const Jt=jo(Ae.current);Jt.removeEventListener("mousemove",rt),Jt.removeEventListener("mouseup",Ie),Jt.removeEventListener("touchmove",rt),Jt.removeEventListener("touchend",Ie)},[Ie,rt]);Q.useEffect(()=>{const{current:Jt}=Ae;return Jt.addEventListener("touchstart",It,{passive:vR()}),()=>{Jt.removeEventListener("touchstart",It),at()}},[at,It]),Q.useEffect(()=>{n&&at()},[n,at]);const je=Jt=>ir=>{if(Jt.onMouseDown?.(ir),n||ir.defaultPrevented||ir.button!==0)return;ir.preventDefault();const xr=ib(ir,F);if(xr!==!1){const{newValue:nt,activeIndex:be}=Ye({finger:xr});ab({sliderRef:Ae,activeIndex:be,setActive:$}),ie(nt),oe&&!ob(nt,G)&&oe(ir,nt,be)}ae.current=0;const rr=jo(Ae.current);rr.addEventListener("mousemove",rt,{passive:!0}),rr.addEventListener("mouseup",Ie)},Ht=q_(ue?de[0]:c,c,a),Wt=q_(de[de.length-1],c,a)-Ht,zt=(Jt={})=>{const ir=Rp(Jt),xr={onMouseDown:je(ir||{})},rr={...ir,...xr};return{...Jt,ref:fe,...rr}},st=Jt=>ir=>{Jt.onMouseOver?.(ir);const xr=Number(ir.currentTarget.getAttribute("data-index"));U(xr)},sr=Jt=>ir=>{Jt.onMouseLeave?.(ir),U(-1)},ur=(Jt={})=>{const ir=Rp(Jt),xr={onMouseOver:st(ir||{}),onMouseLeave:sr(ir||{})};return{...Jt,...ir,...xr}},ar=Jt=>({pointerEvents:N!==-1&&N!==Jt?"none":void 0});let yr;return x==="vertical"&&(yr=o?"vertical-rl":"vertical-lr"),{active:N,axis:it,axisProps:Qne,dragging:H,focusedThumbIndex:xe,getHiddenInputProps:(Jt={})=>{const ir=Rp(Jt),xr={onChange:$e(ir||{}),onFocus:Se(ir||{}),onBlur:we(ir||{}),onKeyDown:Re(ir||{})},rr={...ir,...xr};return{tabIndex:M,"aria-labelledby":t,"aria-orientation":x,"aria-valuemax":P(a),"aria-valuemin":P(c),name:p,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:n,...Jt,...rr,style:{...Fne,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:yr}}},getRootProps:zt,getThumbProps:ur,marks:Me,open:j,range:ue,rootRef:fe,trackLeap:Wt,trackOffset:Ht,values:de,getThumbStyle:ar}}const rie=e=>!e||!Wd(e);function nie(e){return Jn("MuiSlider",e)}const Lc=Xn("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),iie=e=>{const{open:t}=e;return{offset:cn(t&&Lc.valueLabelOpen),circle:Lc.valueLabelCircle,label:Lc.valueLabelLabel}};function aie(e){const{children:t,className:r,value:n}=e,i=iie(e);return t?Q.cloneElement(t,{className:t.props.className},Z.jsxs(Q.Fragment,{children:[t.props.children,Z.jsx("span",{className:cn(i.offset,r),"aria-hidden":!0,children:Z.jsx("span",{className:i.circle,children:Z.jsx("span",{className:i.label,children:n})})})]})):null}function bR(e){return e}const oie=_r("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${Wr(r.color)}`],r.size!=="medium"&&t[`size${Wr(r.size)}`],r.marked&&t.marked,r.orientation==="vertical"&&t.vertical,r.track==="inverted"&&t.trackInverted,r.track===!1&&t.trackFalse]}})(zn(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Lc.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Lc.dragging}`]:{[`& .${Lc.thumb}, & .${Lc.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),sie=_r("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),lie=_r("span",{name:"MuiSlider",slot:"Track"})(zn(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),uie=_r("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.thumb,t[`thumbColor${Wr(r.color)}`],r.size!=="medium"&&t[`thumbSize${Wr(r.size)}`]]}})(zn(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Lc.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Hs()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${Lc.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Lc.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]}))),cie=_r(aie,{name:"MuiSlider",slot:"ValueLabel"})(zn(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Lc.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Lc.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),die=_r("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>f2(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:r}=e;return[t.mark,r&&t.markActive]}})(zn(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),fie=_r("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>f2(e)&&e!=="markLabelActive"})(zn(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),hie=e=>{const{disabled:t,dragging:r,marked:n,orientation:i,track:o,classes:l,color:a,size:c}=e,p={root:["root",t&&"disabled",r&&"dragging",n&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",a&&`color${Wr(a)}`,c&&`size${Wr(c)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",c&&`thumbSize${Wr(c)}`,a&&`thumbColor${Wr(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Qn(p,nie,l)},pie=({children:e})=>e,HP=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiSlider"}),i=i1(),{"aria-label":o,"aria-valuetext":l,"aria-labelledby":a,component:c="span",components:p={},componentsProps:g={},color:v="primary",classes:x,className:b,disableSwap:P=!1,disabled:I=!1,getAriaLabel:k,getAriaValueText:M,marks:O=!1,max:F=100,min:N=0,name:$,onChange:j,onChangeCommitted:U,orientation:H="horizontal",shiftStep:Y=10,size:ae="medium",step:ee=1,scale:G=bR,slotProps:ie,slots:oe,tabIndex:ue,track:de="normal",value:Me,valueLabelDisplay:ge="off",valueLabelFormat:xe=bR,...Ee}=n,Ae={...n,isRtl:i,max:F,min:N,classes:x,disabled:I,disableSwap:P,orientation:H,marks:O,color:v,size:ae,step:ee,shiftStep:Y,scale:G,track:de,valueLabelDisplay:ge,valueLabelFormat:xe},{axisProps:fe,getRootProps:Se,getHiddenInputProps:we,getThumbProps:De,open:Re,active:$e,axis:Oe,focusedThumbIndex:it,range:Ye,dragging:rt,marks:Ie,values:It,trackOffset:at,trackLeap:je,getThumbStyle:Ht}=tie({...Ae,rootRef:r});Ae.marked=Ie.length>0&&Ie.some(bt=>bt.label),Ae.dragging=rt,Ae.focusedThumbIndex=it;const Wt=hie(Ae),zt=oe?.root??p.Root??oie,st=oe?.rail??p.Rail??sie,sr=oe?.track??p.Track??lie,ur=oe?.thumb??p.Thumb??uie,ar=oe?.valueLabel??p.ValueLabel??cie,yr=oe?.mark??p.Mark??die,pr=oe?.markLabel??p.MarkLabel??fie,Jt=oe?.input??p.Input??"input",ir=ie?.root??g.root,xr=ie?.rail??g.rail,rr=ie?.track??g.track,nt=ie?.thumb??g.thumb,be=ie?.valueLabel??g.valueLabel,_e=ie?.mark??g.mark,Ue=ie?.markLabel??g.markLabel,Qe=ie?.input??g.input,ot=jd({elementType:zt,getSlotProps:Se,externalSlotProps:ir,externalForwardedProps:Ee,additionalProps:{...rie(zt)&&{as:c}},ownerState:{...Ae,...ir?.ownerState},className:[Wt.root,b]}),et=jd({elementType:st,externalSlotProps:xr,ownerState:Ae,className:Wt.rail}),Lt=jd({elementType:sr,externalSlotProps:rr,additionalProps:{style:{...fe[Oe].offset(at),...fe[Oe].leap(je)}},ownerState:{...Ae,...rr?.ownerState},className:Wt.track}),vt=jd({elementType:ur,getSlotProps:De,externalSlotProps:nt,ownerState:{...Ae,...nt?.ownerState},className:Wt.thumb}),Bt=jd({elementType:ar,externalSlotProps:be,ownerState:{...Ae,...be?.ownerState},className:Wt.valueLabel}),Kt=jd({elementType:yr,externalSlotProps:_e,ownerState:Ae,className:Wt.mark}),Zt=jd({elementType:pr,externalSlotProps:Ue,ownerState:Ae,className:Wt.markLabel}),Er=jd({elementType:Jt,getSlotProps:we,externalSlotProps:Qe,ownerState:Ae});return Z.jsxs(zt,{...ot,children:[Z.jsx(st,{...et}),Z.jsx(sr,{...Lt}),Ie.filter(bt=>bt.value>=N&&bt.value<=F).map((bt,vr)=>{const Dr=q_(bt.value,N,F),jr=fe[Oe].offset(Dr);let Ur;return de===!1?Ur=It.includes(bt.value):Ur=de==="normal"&&(Ye?bt.value>=It[0]&&bt.value<=It[It.length-1]:bt.value<=It[0])||de==="inverted"&&(Ye?bt.value<=It[0]||bt.value>=It[It.length-1]:bt.value>=It[0]),Z.jsxs(Q.Fragment,{children:[Z.jsx(yr,{"data-index":vr,...Kt,...!Wd(yr)&&{markActive:Ur},style:{...jr,...Kt.style},className:cn(Kt.className,Ur&&Wt.markActive)}),bt.label!=null?Z.jsx(pr,{"aria-hidden":!0,"data-index":vr,...Zt,...!Wd(pr)&&{markLabelActive:Ur},style:{...jr,...Zt.style},className:cn(Wt.markLabel,Zt.className,Ur&&Wt.markLabelActive),children:bt.label}):null]},vr)}),It.map((bt,vr)=>{const Dr=q_(bt,N,F),jr=fe[Oe].offset(Dr),Ur=ge==="off"?pie:ar;return Z.jsx(Ur,{...!Wd(Ur)&&{valueLabelFormat:xe,valueLabelDisplay:ge,value:typeof xe=="function"?xe(G(bt),vr):xe,index:vr,open:Re===vr||$e===vr||ge==="on",disabled:I},...Bt,children:Z.jsx(ur,{"data-index":vr,...vt,className:cn(Wt.thumb,vt.className,$e===vr&&Wt.active,it===vr&&Wt.focusVisible),style:{...jr,...Ht(vr),...vt.style},children:Z.jsx(Jt,{"data-index":vr,"aria-label":k?k(vr):o,"aria-valuenow":G(bt),"aria-labelledby":a,"aria-valuetext":M?M(G(bt),vr):l,value:It[vr],...Er})})},vr)})]})});function mie(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:i,resumeHideDuration:o}=e,l=Af();Q.useEffect(()=>{if(!i)return;function M(O){O.defaultPrevented||O.key==="Escape"&&n?.(O,"escapeKeyDown")}return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[i,n]);const a=Sl((M,O)=>{n?.(M,O)}),c=Sl(M=>{!n||M==null||l.start(M,()=>{a(null,"timeout")})});Q.useEffect(()=>(i&&c(t),l.clear),[i,t,c,l]);const p=M=>{n?.(M,"clickaway")},g=l.clear,v=Q.useCallback(()=>{t!=null&&c(o??t*.5)},[t,o,c]),x=M=>O=>{const F=M.onBlur;F?.(O),v()},b=M=>O=>{const F=M.onFocus;F?.(O),g()},P=M=>O=>{const F=M.onMouseEnter;F?.(O),g()},I=M=>O=>{const F=M.onMouseLeave;F?.(O),v()};return Q.useEffect(()=>{if(!r&&i)return window.addEventListener("focus",v),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",v),window.removeEventListener("blur",g)}},[r,i,v,g]),{getRootProps:(M={})=>{const O={...Rp(e),...Rp(M)};return{role:"presentation",...M,...O,onBlur:x(O),onFocus:b(O),onMouseEnter:P(O),onMouseLeave:I(O)}},onClickAway:p}}function gie(e){return Jn("MuiSnackbarContent",e)}Xn("MuiSnackbarContent",["root","message","action"]);const yie=e=>{const{classes:t}=e;return Qn({root:["root"],action:["action"],message:["message"]},gie,t)},vie=_r(Oc,{name:"MuiSnackbarContent",slot:"Root"})(zn(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(D_(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:D_(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),bie=_r("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),_ie=_r("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),xie=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiSnackbarContent"}),{action:i,className:o,message:l,role:a="alert",...c}=n,p=n,g=yie(p);return Z.jsxs(vie,{role:a,elevation:6,className:cn(g.root,o),ownerState:p,ref:r,...c,children:[Z.jsx(bie,{className:g.message,ownerState:p,children:l}),i?Z.jsx(_ie,{className:g.action,ownerState:p,children:i}):null]})});function wie(e){return Jn("MuiSnackbar",e)}Xn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Sie=e=>{const{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${Wr(r.vertical)}${Wr(r.horizontal)}`]};return Qn(n,wie,t)},Cie=_r("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${Wr(r.anchorOrigin.vertical)}${Wr(r.anchorOrigin.horizontal)}`]]}})(zn(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Eie=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiSnackbar"}),i=du(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:l,anchorOrigin:{vertical:a,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:p=null,children:g,className:v,ClickAwayListenerProps:x,ContentProps:b,disableWindowBlurListener:P=!1,message:I,onBlur:k,onClose:M,onFocus:O,onMouseEnter:F,onMouseLeave:N,open:$,resumeHideDuration:j,slots:U={},slotProps:H={},TransitionComponent:Y,transitionDuration:ae=o,TransitionProps:{onEnter:ee,onExited:G,...ie}={},...oe}=n,ue={...n,anchorOrigin:{vertical:a,horizontal:c},autoHideDuration:p,disableWindowBlurListener:P,TransitionComponent:Y,transitionDuration:ae},de=Sie(ue),{getRootProps:Me,onClickAway:ge}=mie({...ue}),[xe,Ee]=Q.useState(!0),Ae=It=>{Ee(!0),G&&G(It)},fe=(It,at)=>{Ee(!1),ee&&ee(It,at)},Se={slots:{transition:Y,...U},slotProps:{content:b,clickAwayListener:x,transition:ie,...H}},[we,De]=ri("root",{ref:r,className:[de.root,v],elementType:Cie,getSlotProps:Me,externalForwardedProps:{...Se,...oe},ownerState:ue}),[Re,{ownerState:$e,...Oe}]=ri("clickAwayListener",{elementType:Xee,externalForwardedProps:Se,getSlotProps:It=>({onClickAway:(...at)=>{const je=at[0];It.onClickAway?.(...at),!je?.defaultMuiPrevented&&ge(...at)}}),ownerState:ue}),[it,Ye]=ri("content",{elementType:xie,shouldForwardComponentProp:!0,externalForwardedProps:Se,additionalProps:{message:I,action:l},ownerState:ue}),[rt,Ie]=ri("transition",{elementType:w0,externalForwardedProps:Se,getSlotProps:It=>({onEnter:(...at)=>{It.onEnter?.(...at),fe(...at)},onExited:(...at)=>{It.onExited?.(...at),Ae(...at)}}),additionalProps:{appear:!0,in:$,timeout:ae,direction:a==="top"?"down":"up"},ownerState:ue});return!$&&xe?null:Z.jsx(Re,{...Oe,...U.clickAwayListener&&{ownerState:$e},children:Z.jsx(we,{...De,children:Z.jsx(rt,{...Ie,children:g||Z.jsx(it,{...Ye})})})})}),Tie={entering:{transform:"none"},entered:{transform:"none"}},Pie=Q.forwardRef(function(t,r){const n=du(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:a,easing:c,in:p,onEnter:g,onEntered:v,onEntering:x,onExit:b,onExited:P,onExiting:I,style:k,timeout:M=i,TransitionComponent:O=xc,...F}=t,N=Q.useRef(null),$=to(N,Xf(a),r),j=oe=>ue=>{if(oe){const de=N.current;ue===void 0?oe(de):oe(de,ue)}},U=j(x),H=j((oe,ue)=>{g2(oe);const de=cd({style:k,timeout:M,easing:c},{mode:"enter"});oe.style.webkitTransition=n.transitions.create("transform",de),oe.style.transition=n.transitions.create("transform",de),g&&g(oe,ue)}),Y=j(v),ae=j(I),ee=j(oe=>{const ue=cd({style:k,timeout:M,easing:c},{mode:"exit"});oe.style.webkitTransition=n.transitions.create("transform",ue),oe.style.transition=n.transitions.create("transform",ue),b&&b(oe)}),G=j(P),ie=oe=>{o&&o(N.current,oe)};return Z.jsx(O,{appear:l,in:p,nodeRef:N,onEnter:H,onEntered:Y,onEntering:U,onExit:ee,onExited:G,onExiting:ae,addEndListener:ie,timeout:M,...F,children:(oe,{ownerState:ue,...de})=>Q.cloneElement(a,{style:{transform:"scale(0)",visibility:oe==="exited"&&!p?"hidden":void 0,...Tie[oe],...k,...a.props.style},ref:$,...de})})});function Iie(e){return Jn("MuiSpeedDial",e)}const lb=Xn("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),kie=e=>{const{classes:t,open:r,direction:n}=e,i={root:["root",`direction${Wr(n)}`],fab:["fab"],actions:["actions",!r&&"actionsClosed"]};return Qn(i,Iie,t)};function lv(e){if(e==="up"||e==="down")return"vertical";if(e==="right"||e==="left")return"horizontal"}const mh=32,ub=16,Aie=_r("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`direction${Wr(r.direction)}`]]}})(zn(({theme:e})=>({zIndex:(e.vars||e).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none",variants:[{props:{direction:"up"},style:{flexDirection:"column-reverse",[`& .${lb.actions}`]:{flexDirection:"column-reverse",marginBottom:-mh,paddingBottom:ub+mh}}},{props:{direction:"down"},style:{flexDirection:"column",[`& .${lb.actions}`]:{flexDirection:"column",marginTop:-mh,paddingTop:ub+mh}}},{props:{direction:"left"},style:{flexDirection:"row-reverse",[`& .${lb.actions}`]:{flexDirection:"row-reverse",marginRight:-mh,paddingRight:ub+mh}}},{props:{direction:"right"},style:{flexDirection:"row",[`& .${lb.actions}`]:{flexDirection:"row",marginLeft:-mh,paddingLeft:ub+mh}}}]}))),Mie=_r(d7,{name:"MuiSpeedDial",slot:"Fab"})({pointerEvents:"auto"}),Lie=_r("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.actions,!r.open&&t.actionsClosed]}})({display:"flex",pointerEvents:"auto",variants:[{props:({ownerState:e})=>!e.open,style:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}]}),Rie=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiSpeedDial"}),i=du(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:l,FabProps:{ref:a,...c}={},children:p,className:g,direction:v="up",hidden:x=!1,icon:b,onBlur:P,onClose:I,onFocus:k,onKeyDown:M,onMouseEnter:O,onMouseLeave:F,onOpen:N,open:$,openIcon:j,slots:U={},slotProps:H={},TransitionComponent:Y,TransitionProps:ae,transitionDuration:ee=o,...G}=n,[ie,oe]=Rh({controlled:$,default:!1,name:"SpeedDial",state:"open"}),ue={...n,open:ie,direction:v},de=kie(ue),Me=Af(),ge=Q.useRef(0),xe=Q.useRef(),Ee=Q.useRef([]);Ee.current=[Ee.current[0]];const Ae=Q.useCallback(zt=>{Ee.current[0]=zt},[]),fe=to(a,Ae),Se=(zt,st,sr)=>ur=>{Ee.current[zt+1]=ur,st&&st(ur),sr&&sr(ur)},we=zt=>{M&&M(zt);const st=zt.key.replace("Arrow","").toLowerCase(),{current:sr=st}=xe;if(zt.key==="Escape"){oe(!1),Ee.current[0].focus(),I&&I(zt,"escapeKeyDown");return}if(lv(st)===lv(sr)&&lv(st)!==void 0){zt.preventDefault();const ur=st===sr?1:-1,ar=wp(ge.current+ur,0,Ee.current.length-1);Ee.current[ar].focus(),ge.current=ar,xe.current=sr}};Q.useEffect(()=>{ie||(ge.current=0,xe.current=void 0)},[ie]);const De=zt=>{zt.type==="mouseleave"&&F&&F(zt),zt.type==="blur"&&P&&P(zt),Me.clear(),zt.type==="blur"?Me.start(0,()=>{oe(!1),I&&I(zt,"blur")}):(oe(!1),I&&I(zt,"mouseLeave"))},Re=zt=>{c.onClick&&c.onClick(zt),Me.clear(),ie?(oe(!1),I&&I(zt,"toggle")):(oe(!0),N&&N(zt,"toggle"))},$e=zt=>{zt.type==="mouseenter"&&O&&O(zt),zt.type==="focus"&&k&&k(zt),Me.clear(),ie||Me.start(0,()=>{oe(!0),N&&N(zt,{focus:"focus",mouseenter:"mouseEnter"}[zt.type])})},Oe=l.replace(/^[^a-z]+|[^\w:.-]+/gi,""),it=Q.Children.toArray(p).filter(zt=>Q.isValidElement(zt)),Ye=it.map((zt,st)=>{const{FabProps:{ref:sr}={},slotProps:ur={},tooltipPlacement:ar}=zt.props,{fab:{ref:yr,...pr}={},...Jt}=ur,ir=ar||(lv(v)==="vertical"?"left":"top");return Q.cloneElement(zt,{slotProps:{fab:{...pr,ref:Se(st,sr,yr)},...Jt},delay:30*(ie?st:it.length-st),open:ie,tooltipPlacement:ir,id:`${Oe}-action-${st}`})}),rt={transition:Y,...U},Ie={transition:ae,...H},It={slots:rt,slotProps:Ie},[at,je]=ri("root",{elementType:Aie,externalForwardedProps:{...It,...G},ownerState:ue,ref:r,className:cn(de.root,g),additionalProps:{role:"presentation"},getSlotProps:zt=>({...zt,onKeyDown:st=>{zt.onKeyDown?.(st),we(st)},onBlur:st=>{zt.onBlur?.(st),De(st)},onFocus:st=>{zt.onFocus?.(st),$e(st)},onMouseEnter:st=>{zt.onMouseEnter?.(st),$e(st)},onMouseLeave:st=>{zt.onMouseLeave?.(st),De(st)}})}),[Ht,Wt]=ri("transition",{elementType:Pie,externalForwardedProps:It,ownerState:ue});return Z.jsxs(at,{...je,children:[Z.jsx(Ht,{in:!x,timeout:ee,unmountOnExit:!0,...Wt,children:Z.jsx(Mie,{color:"primary","aria-label":l,"aria-haspopup":"true","aria-expanded":ie,"aria-controls":`${Oe}-actions`,...c,onClick:Re,className:cn(de.fab,c.className),ref:fe,ownerState:ue,children:Q.isValidElement(b)&&jg(b,["SpeedDialIcon"])?Q.cloneElement(b,{open:ie}):b})}),Z.jsx(Lie,{id:`${Oe}-actions`,role:"menu","aria-orientation":lv(v),className:cn(de.actions,!ie&&de.actionsClosed),ownerState:ue,children:Ye})]})});function Die(e){return Jn("MuiTooltip",e)}const fs=Xn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Nie(e){return Math.round(e*1e5)/1e5}const Oie=e=>{const{classes:t,disableInteractive:r,arrow:n,touch:i,placement:o}=e,l={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${Wr(o.split("-")[0])}`],arrow:["arrow"]};return Qn(l,Die,t)},Fie=_r(e7,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(zn(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${fs.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${fs.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${fs.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${fs.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${fs.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${fs.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${fs.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${fs.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Bie=_r("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${Wr(r.placement.split("-")[0])}`]]}})(zn(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${fs.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${fs.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${fs.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Nie(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${fs.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${fs.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${fs.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${fs.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),zie=_r("span",{name:"MuiTooltip",slot:"Arrow"})(zn(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let cb=!1;const _R=new m2;let uv={x:0,y:0};function db(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const Lf=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiTooltip"}),{arrow:i=!1,children:o,classes:l,components:a={},componentsProps:c={},describeChild:p=!1,disableFocusListener:g=!1,disableHoverListener:v=!1,disableInteractive:x=!1,disableTouchListener:b=!1,enterDelay:P=100,enterNextDelay:I=0,enterTouchDelay:k=700,followCursor:M=!1,id:O,leaveDelay:F=0,leaveTouchDelay:N=1500,onClose:$,onOpen:j,open:U,placement:H="bottom",PopperComponent:Y,PopperProps:ae={},slotProps:ee={},slots:G={},title:ie,TransitionComponent:oe,TransitionProps:ue,...de}=n,Me=Q.isValidElement(o)?o:Z.jsx("span",{children:o}),ge=du(),xe=i1(),[Ee,Ae]=Q.useState(),[fe,Se]=Q.useState(null),we=Q.useRef(!1),De=x||M,Re=Af(),$e=Af(),Oe=Af(),it=Af(),[Ye,rt]=Rh({controlled:U,default:!1,name:"Tooltip",state:"open"});let Ie=Ye;const It=$h(O),at=Q.useRef(),je=Sl(()=>{at.current!==void 0&&(document.body.style.WebkitUserSelect=at.current,at.current=void 0),it.clear()});Q.useEffect(()=>je,[je]);const Ht=nr=>{_R.clear(),cb=!0,rt(!0),j&&!Ie&&j(nr)},Wt=Sl(nr=>{_R.start(800+F,()=>{cb=!1}),rt(!1),$&&Ie&&$(nr),Re.start(ge.transitions.duration.shortest,()=>{we.current=!1})}),zt=nr=>{we.current&&nr.type!=="touchstart"||(Ee&&Ee.removeAttribute("title"),$e.clear(),Oe.clear(),P||cb&&I?$e.start(cb?I:P,()=>{Ht(nr)}):Ht(nr))},st=nr=>{$e.clear(),Oe.start(F,()=>{Wt(nr)})},[,sr]=Q.useState(!1),ur=nr=>{Jg(nr.target)||(sr(!1),st(nr))},ar=nr=>{Ee||Ae(nr.currentTarget),Jg(nr.target)&&(sr(!0),zt(nr))},yr=nr=>{we.current=!0;const Hn=Me.props;Hn.onTouchStart&&Hn.onTouchStart(nr)},pr=nr=>{yr(nr),Oe.clear(),Re.clear(),je(),at.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",it.start(k,()=>{document.body.style.WebkitUserSelect=at.current,zt(nr)})},Jt=nr=>{Me.props.onTouchEnd&&Me.props.onTouchEnd(nr),je(),Oe.start(N,()=>{Wt(nr)})};Q.useEffect(()=>{if(!Ie)return;function nr(Hn){Hn.key==="Escape"&&Wt(Hn)}return document.addEventListener("keydown",nr),()=>{document.removeEventListener("keydown",nr)}},[Wt,Ie]);const ir=to(Xf(Me),Ae,r);!ie&&ie!==0&&(Ie=!1);const xr=Q.useRef(),rr=nr=>{const Hn=Me.props;Hn.onMouseMove&&Hn.onMouseMove(nr),uv={x:nr.clientX,y:nr.clientY},xr.current&&xr.current.update()},nt={},be=typeof ie=="string";p?(nt.title=!Ie&&be&&!v?ie:null,nt["aria-describedby"]=Ie?It:null):(nt["aria-label"]=be?ie:null,nt["aria-labelledby"]=Ie&&!be?It:null);const _e={...nt,...de,...Me.props,className:cn(de.className,Me.props.className),onTouchStart:yr,ref:ir,...M?{onMouseMove:rr}:{}},Ue={};b||(_e.onTouchStart=pr,_e.onTouchEnd=Jt),v||(_e.onMouseOver=db(zt,_e.onMouseOver),_e.onMouseLeave=db(st,_e.onMouseLeave),De||(Ue.onMouseOver=zt,Ue.onMouseLeave=st)),g||(_e.onFocus=db(ar,_e.onFocus),_e.onBlur=db(ur,_e.onBlur),De||(Ue.onFocus=ar,Ue.onBlur=ur));const Qe={...n,isRtl:xe,arrow:i,disableInteractive:De,placement:H,PopperComponentProp:Y,touch:we.current},ot=typeof ee.popper=="function"?ee.popper(Qe):ee.popper,et=Q.useMemo(()=>{let nr=[{name:"arrow",enabled:!!fe,options:{element:fe,padding:4}}];return ae.popperOptions?.modifiers&&(nr=nr.concat(ae.popperOptions.modifiers)),ot?.popperOptions?.modifiers&&(nr=nr.concat(ot.popperOptions.modifiers)),{...ae.popperOptions,...ot?.popperOptions,modifiers:nr}},[fe,ae.popperOptions,ot?.popperOptions]),Lt=Oie(Qe),vt=typeof ee.transition=="function"?ee.transition(Qe):ee.transition,Bt={slots:{popper:a.Popper,transition:a.Transition??oe,tooltip:a.Tooltip,arrow:a.Arrow,...G},slotProps:{arrow:ee.arrow??c.arrow,popper:{...ae,...ot??c.popper},tooltip:ee.tooltip??c.tooltip,transition:{...ue,...vt??c.transition}}},[Kt,Zt]=ri("popper",{elementType:Fie,externalForwardedProps:Bt,ownerState:Qe,className:cn(Lt.popper,ae?.className)}),[Er,bt]=ri("transition",{elementType:w0,externalForwardedProps:Bt,ownerState:Qe}),[vr,Dr]=ri("tooltip",{elementType:Bie,className:Lt.tooltip,externalForwardedProps:Bt,ownerState:Qe}),[jr,Ur]=ri("arrow",{elementType:zie,className:Lt.arrow,externalForwardedProps:Bt,ownerState:Qe,ref:Se});return Z.jsxs(Q.Fragment,{children:[Q.cloneElement(Me,_e),Z.jsx(Kt,{as:Y??e7,placement:H,anchorEl:M?{getBoundingClientRect:()=>({top:uv.y,left:uv.x,right:uv.x,bottom:uv.y,width:0,height:0})}:Ee,popperRef:xr,open:Ee?Ie:!1,id:It,transition:!0,...Ue,...Zt,popperOptions:et,children:({TransitionProps:nr})=>Z.jsx(Er,{timeout:ge.transitions.duration.shorter,...nr,...bt,children:Z.jsxs(vr,{...Dr,children:[ie,i?Z.jsx(jr,{...Ur}):null]})})})]})});function jie(e){return Jn("MuiSpeedDialAction",e)}const fb=Xn("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),qie=e=>{const{open:t,tooltipPlacement:r,classes:n}=e,i={fab:["fab",!t&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${Wr(r)}`,!t&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return Qn(i,jie,n)},$ie=_r(d7,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.fab,!r.open&&t.fabClosed]}})(zn(({theme:e})=>({margin:8,color:(e.vars||e).palette.text.secondary,backgroundColor:(e.vars||e).palette.background.paper,"&:hover":{backgroundColor:e.vars?e.vars.palette.SpeedDialAction.fabHoverBg:D_(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1,variants:[{props:({ownerState:t})=>!t.open,style:{opacity:0,transform:"scale(0)"}}]}))),Vie=_r("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.staticTooltip,!r.open&&t.staticTooltipClosed,t[`tooltipPlacement${Wr(r.tooltipPlacement)}`]]}})(zn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",[`& .${fb.staticTooltipLabel}`]:{transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},variants:[{props:({ownerState:t})=>!t.open,style:{[`& .${fb.staticTooltipLabel}`]:{opacity:0,transform:"scale(0.5)"}}},{props:{tooltipPlacement:"left"},style:{[`& .${fb.staticTooltipLabel}`]:{transformOrigin:"100% 50%",right:"100%",marginRight:8}}},{props:{tooltipPlacement:"right"},style:{[`& .${fb.staticTooltipLabel}`]:{transformOrigin:"0% 50%",left:"100%",marginLeft:8}}}]}))),Uie=_r("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel"})(zn(({theme:e})=>({position:"absolute",...e.typography.body1,backgroundColor:(e.vars||e).palette.background.paper,borderRadius:(e.vars||e).shape.borderRadius,boxShadow:(e.vars||e).shadows[1],color:(e.vars||e).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"}))),Gie=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiSpeedDialAction"}),{className:i,delay:o=0,FabProps:l={},icon:a,id:c,open:p,TooltipClasses:g,tooltipOpen:v=!1,tooltipPlacement:x="left",tooltipTitle:b,slots:P={},slotProps:I={},...k}=n,M={...n,tooltipPlacement:x},O=qie(M),F={slots:P,slotProps:{fab:l,...I,tooltip:Kg(typeof I.tooltip=="function"?I.tooltip(M):I.tooltip,{title:b,open:v,placement:x,classes:g})}},[N,$]=Q.useState(F.slotProps.tooltip?.open),j=()=>{$(!1)},U=()=>{$(!0)},H={transitionDelay:`${o}ms`},[Y,ae]=ri("fab",{elementType:$ie,externalForwardedProps:F,ownerState:M,shouldForwardComponentProp:!0,className:cn(O.fab,i),additionalProps:{style:H,tabIndex:-1,role:"menuitem",size:"small"}}),[ee,G]=ri("tooltip",{elementType:Lf,externalForwardedProps:F,shouldForwardComponentProp:!0,ref:r,additionalProps:{id:c},ownerState:M,getSlotProps:ge=>({...ge,onClose:xe=>{ge.onClose?.(xe),j()},onOpen:xe=>{ge.onOpen?.(xe),U()}})}),[ie,oe]=ri("staticTooltip",{elementType:Vie,externalForwardedProps:F,ownerState:M,ref:r,className:O.staticTooltip,additionalProps:{id:c}}),[ue,de]=ri("staticTooltipLabel",{elementType:Uie,externalForwardedProps:F,ownerState:M,className:O.staticTooltipLabel,additionalProps:{style:H,id:`${c}-label`}}),Me=Z.jsx(Y,{...ae,children:a});return G.open?Z.jsxs(ie,{...oe,...k,children:[Z.jsx(ue,{...de,children:G.title}),Q.cloneElement(Me,{"aria-labelledby":`${c}-label`})]}):(!p&&N&&$(!1),Z.jsx(ee,{...G,title:G.title,open:p&&N,placement:G.placement,classes:G.classes,...k,children:Me}))}),Hie=_r("div",{name:"MuiSwipeArea",shouldForwardProp:As})(zn(({theme:e})=>({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1,variants:[{props:{anchor:"left"},style:{right:"auto"}},{props:{anchor:"right"},style:{left:"auto",right:0}},{props:{anchor:"top"},style:{bottom:"auto",right:0}},{props:{anchor:"bottom"},style:{top:"auto",bottom:0,right:0}}]}))),Wie=Q.forwardRef(function(t,r){const{anchor:n,classes:i={},className:o,width:l,style:a,...c}=t,p=t;return Z.jsx(Hie,{className:cn("PrivateSwipeArea-root",i.root,i[`anchor${Wr(n)}`],o),ref:r,style:{[Sp(n)?"width":"height"]:l,...a},ownerState:p,...c})}),hb=3,xS=20;let _f=null;function wS(e,t,r){return e==="right"?r.body.offsetWidth-t[0].pageX:t[0].pageX}function SS(e,t,r){return e==="bottom"?r.innerHeight-t[0].clientY:t[0].clientY}function cv(e,t){return e?t.clientWidth:t.clientHeight}function xR(e,t,r,n){return Math.min(Math.max(r?t-e:n+t-e,0),n)}function Xie(e,t){const r=[];for(;e&&e!==t.parentElement;){const n=Pu(t).getComputedStyle(e);n.getPropertyValue("position")==="absolute"||n.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&r.push(e),e=e.parentElement}return r}function Yie({domTreeShapes:e,start:t,current:r,anchor:n}){const i={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(o=>{let l=r>=t;(n==="top"||n==="left")&&(l=!l);const a=n==="left"||n==="right"?"x":"y",c=Math.round(o[i.scrollPosition[a]]),p=c>0,g=c+o[i.clientLength[a]]<o[i.scrollLength[a]];return!!(l&&g||!l&&p)})}const Zie=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Kie=Q.forwardRef(function(t,r){const n=ni({name:"MuiSwipeableDrawer",props:t}),i=du(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:l="left",disableBackdropTransition:a=!1,disableDiscovery:c=!1,disableSwipeToOpen:p=Zie,hideBackdrop:g,hysteresis:v=.52,allowSwipeInChildren:x=!1,minFlingVelocity:b=450,ModalProps:{BackdropProps:P,...I}={},onClose:k,onOpen:M,open:O=!1,PaperProps:F={},SwipeAreaProps:N,swipeAreaWidth:$=20,transitionDuration:j=o,variant:U="temporary",slots:H={},slotProps:Y={},...ae}=n,[ee,G]=Q.useState(!1),ie=Q.useRef({isSwiping:null}),oe=Q.useRef(),ue=Q.useRef(),de=Q.useRef(),Me=to(F.ref,de),ge=Q.useRef(!1),xe=Q.useRef();$l(()=>{xe.current=null},[O]);const Ee=Q.useCallback(($e,Oe={})=>{const{mode:it=null,changeTransition:Ye=!0}=Oe,rt=Rv(i,l),Ie=["right","bottom"].includes(rt)?1:-1,It=Sp(l),at=It?`translate(${Ie*$e}px, 0)`:`translate(0, ${Ie*$e}px)`,je=de.current.style;je.webkitTransform=at,je.transform=at;let Ht="";if(it&&(Ht=i.transitions.create("all",cd({easing:void 0,style:void 0,timeout:j},{mode:it}))),Ye&&(je.webkitTransition=Ht,je.transition=Ht),!a&&!g){const Wt=ue.current.style;Wt.opacity=1-$e/cv(It,de.current),Ye&&(Wt.webkitTransition=Ht,Wt.transition=Ht)}},[l,a,g,i,j]),Ae=Sl($e=>{if(!ge.current)return;if(_f=null,ge.current=!1,kf.flushSync(()=>{G(!1)}),!ie.current.isSwiping){ie.current.isSwiping=null;return}ie.current.isSwiping=null;const Oe=Rv(i,l),it=Sp(l);let Ye;it?Ye=wS(Oe,$e.changedTouches,jo($e.currentTarget)):Ye=SS(Oe,$e.changedTouches,Pu($e.currentTarget));const rt=it?ie.current.startX:ie.current.startY,Ie=cv(it,de.current),It=xR(Ye,rt,O,Ie),at=It/Ie;if(Math.abs(ie.current.velocity)>b&&(xe.current=Math.abs((Ie-It)/ie.current.velocity)*1e3),O){ie.current.velocity>b||at>v?k():Ee(0,{mode:"exit"});return}ie.current.velocity<-b||1-at>v?M():Ee(cv(it,de.current),{mode:"enter"})}),fe=($e=!1)=>{if(!ee){($e||!(c&&x))&&kf.flushSync(()=>{G(!0)});const Oe=Sp(l);!O&&de.current&&Ee(cv(Oe,de.current)+(c?15:-xS),{changeTransition:!1}),ie.current.velocity=0,ie.current.lastTime=null,ie.current.lastTranslate=null,ie.current.paperHit=!1,ge.current=!0}},Se=Sl($e=>{if(!de.current||!ge.current||_f!==null&&_f!==ie.current)return;fe(!0);const Oe=Rv(i,l),it=Sp(l),Ye=wS(Oe,$e.touches,jo($e.currentTarget)),rt=SS(Oe,$e.touches,Pu($e.currentTarget));if(O&&de.current.contains($e.target)&&_f===null){const Ht=Xie($e.target,de.current);if(Yie({domTreeShapes:Ht,start:it?ie.current.startX:ie.current.startY,current:it?Ye:rt,anchor:l})){_f=!0;return}_f=ie.current}if(ie.current.isSwiping==null){const Ht=Math.abs(Ye-ie.current.startX),Wt=Math.abs(rt-ie.current.startY),zt=it?Ht>Wt&&Ht>hb:Wt>Ht&&Wt>hb;if(zt&&$e.cancelable&&$e.preventDefault(),zt===!0||(it?Wt>hb:Ht>hb)){if(ie.current.isSwiping=zt,!zt){Ae($e);return}ie.current.startX=Ye,ie.current.startY=rt,!c&&!O&&(it?ie.current.startX-=xS:ie.current.startY-=xS)}}if(!ie.current.isSwiping)return;const Ie=cv(it,de.current);let It=it?ie.current.startX:ie.current.startY;O&&!ie.current.paperHit&&(It=Math.min(It,Ie));const at=xR(it?Ye:rt,It,O,Ie);if(O)if(ie.current.paperHit)at===0&&(ie.current.startX=Ye,ie.current.startY=rt);else if(it?Ye<Ie:rt<Ie)ie.current.paperHit=!0,ie.current.startX=Ye,ie.current.startY=rt;else return;ie.current.lastTranslate===null&&(ie.current.lastTranslate=at,ie.current.lastTime=performance.now()+1);const je=(at-ie.current.lastTranslate)/(performance.now()-ie.current.lastTime)*1e3;ie.current.velocity=ie.current.velocity*.4+je*.6,ie.current.lastTranslate=at,ie.current.lastTime=performance.now(),$e.cancelable&&$e.preventDefault(),Ee(at)}),we=Sl($e=>{if($e.defaultPrevented||$e.defaultMuiPrevented||O&&(g||!ue.current.contains($e.target))&&!de.current.contains($e.target))return;const Oe=Rv(i,l),it=Sp(l),Ye=wS(Oe,$e.touches,jo($e.currentTarget)),rt=SS(Oe,$e.touches,Pu($e.currentTarget));if(!O){if(p||!($e.target===oe.current||de.current?.contains($e.target)&&(typeof x=="function"?x($e,oe.current,de.current):x)))return;if(it){if(Ye>$)return}else if(rt>$)return}$e.defaultMuiPrevented=!0,_f=null,ie.current.startX=Ye,ie.current.startY=rt,fe()});Q.useEffect(()=>{if(U==="temporary"){const $e=jo(de.current);return $e.addEventListener("touchstart",we),$e.addEventListener("touchmove",Se,{passive:!O}),$e.addEventListener("touchend",Ae),()=>{$e.removeEventListener("touchstart",we),$e.removeEventListener("touchmove",Se,{passive:!O}),$e.removeEventListener("touchend",Ae)}}},[U,O,we,Se,Ae]),Q.useEffect(()=>()=>{_f===ie.current&&(_f=null)},[]),Q.useEffect(()=>{O||G(!1)},[O]);const[De,Re]=ri("swipeArea",{ref:oe,elementType:Wie,ownerState:n,externalForwardedProps:{slots:H,slotProps:{swipeArea:N,...Y}},additionalProps:{width:$,anchor:l}});return Z.jsxs(Q.Fragment,{children:[Z.jsx(qP,{open:U==="temporary"&&ee?!0:O,variant:U,ModalProps:{BackdropProps:{...P,ref:ue},...U==="temporary"&&{keepMounted:!0},...I},hideBackdrop:g,anchor:l,transitionDuration:xe.current||j,onClose:k,ref:r,slots:H,slotProps:{...Y,backdrop:Kg(Y.backdrop??P,{ref:ue}),paper:Kg(Y.paper??F,{style:{pointerEvents:U==="temporary"&&!O&&!x?"none":""},ref:Me})},...ae}),!p&&U==="temporary"&&Z.jsx(pne,{children:Z.jsx(De,{...Re})})]})});function Jie(e){return Jn("MuiToolbar",e)}Xn("MuiToolbar",["root","gutters","regular","dense"]);const Qie=e=>{const{classes:t,disableGutters:r,variant:n}=e;return Qn({root:["root",!r&&"gutters",n]},Jie,t)},eae=_r("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(zn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),tae=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:l=!1,variant:a="regular",...c}=n,p={...n,component:o,disableGutters:l,variant:a},g=Qie(p);return Z.jsx(eae,{as:o,className:cn(g.root,i),ref:r,ownerState:p,...c})});function rae(e){return Jn("MuiTextField",e)}Xn("MuiTextField",["root"]);const nae={standard:VP,filled:$P,outlined:S2},iae=e=>{const{classes:t}=e;return Qn({root:["root"]},rae,t)},aae=_r(cc,{name:"MuiTextField",slot:"Root"})({}),C2=Q.forwardRef(function(t,r){const n=ni({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:l,className:a,color:c="primary",defaultValue:p,disabled:g=!1,error:v=!1,FormHelperTextProps:x,fullWidth:b=!1,helperText:P,id:I,InputLabelProps:k,inputProps:M,InputProps:O,inputRef:F,label:N,maxRows:$,minRows:j,multiline:U=!1,name:H,onBlur:Y,onChange:ae,onFocus:ee,placeholder:G,required:ie=!1,rows:oe,select:ue=!1,SelectProps:de,slots:Me={},slotProps:ge={},type:xe,value:Ee,variant:Ae="outlined",...fe}=n,Se={...n,autoFocus:o,color:c,disabled:g,error:v,fullWidth:b,multiline:U,required:ie,select:ue,variant:Ae},we=iae(Se),De=$h(I),Re=P&&De?`${De}-helper-text`:void 0,$e=N&&De?`${De}-label`:void 0,Oe=nae[Ae],it={slots:Me,slotProps:{input:O,inputLabel:k,htmlInput:M,formHelperText:x,select:de,...ge}},Ye={},rt=it.slotProps.inputLabel;Ae==="outlined"&&(rt&&typeof rt.shrink<"u"&&(Ye.notched=rt.shrink),Ye.label=N),ue&&((!de||!de.native)&&(Ye.id=void 0),Ye["aria-describedby"]=void 0);const[Ie,It]=ri("root",{elementType:aae,shouldForwardComponentProp:!0,externalForwardedProps:{...it,...fe},ownerState:Se,className:cn(we.root,a),ref:r,additionalProps:{disabled:g,error:v,fullWidth:b,required:ie,color:c,variant:Ae}}),[at,je]=ri("input",{elementType:Oe,externalForwardedProps:it,additionalProps:Ye,ownerState:Se}),[Ht,Wt]=ri("inputLabel",{elementType:Ih,externalForwardedProps:it,ownerState:Se}),[zt,st]=ri("htmlInput",{elementType:"input",externalForwardedProps:it,ownerState:Se}),[sr,ur]=ri("formHelperText",{elementType:dre,externalForwardedProps:it,ownerState:Se}),[ar,yr]=ri("select",{elementType:kh,externalForwardedProps:it,ownerState:Se}),pr=Z.jsx(at,{"aria-describedby":Re,autoComplete:i,autoFocus:o,defaultValue:p,fullWidth:b,multiline:U,name:H,rows:oe,maxRows:$,minRows:j,type:xe,value:Ee,id:De,inputRef:F,onBlur:Y,onChange:ae,onFocus:ee,placeholder:G,inputProps:st,slots:{input:Me.htmlInput?zt:void 0},...je});return Z.jsxs(Ie,{...It,children:[N!=null&&N!==""&&Z.jsx(Ht,{htmlFor:De,id:$e,...Wt,children:N}),ue?Z.jsx(ar,{"aria-describedby":Re,id:De,labelId:$e,value:Ee,input:pr,...yr,children:l}):pr,P&&Z.jsx(sr,{id:Re,...ur,children:P})]})}),l1=b9({themeId:ld}),oae=Ei(Z.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),WP="https://mapcomponents.github.io/react-map-components-maplibre/react-maplibre/",sae=WP+"assets/WG-MapComponents-Logo_rgb.svg",lae=WP+"assets/WG-MapComponents-Logo_rgb-weisse-schrift.svg",uae=WP+"assets/mapcomponents_logo.png";function wR(e){const t=du(),[r,n]=Q.useState(null),i=l=>{n(l.currentTarget)},o=()=>{n(null)};return Z.jsx(BJ,{sx:{minHeight:"62px",position:"absolute",zIndex:1300,top:0},children:Z.jsxs(tae,{disableGutters:!0,children:[e.logo||Z.jsxs(Z.Fragment,{children:[Z.jsx(po,{sx:{marginLeft:"25px",display:{xs:"none",md:"flex"},flexGrow:{md:"30"}},children:Z.jsx("img",{src:t.palette.mode==="dark"?lae:sae,style:{width:"100%",maxWidth:"250px"}})}),Z.jsx(po,{sx:{marginLeft:"25px",display:{xs:"flex",sm:"flex",md:"none"},flexGrow:{xs:"500"},mr:{sm:"0px"}},children:Z.jsx("img",{src:uae,width:"50px",height:"50px"})})]}),Z.jsx(po,{sx:{flexGrow:1,display:{xs:"flex"}},children:e.unmovableButtons}),e.buttons?Z.jsxs(po,{sx:{flexGrow:22,display:{xs:"flex",sm:"none"}},children:[Z.jsx(hc,{onClick:i,children:Z.jsx(oae,{})}),Z.jsx(b7,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!r,onClose:o,PaperProps:{elevation:24,sx:{overflow:"visible",mt:"15px"}},sx:{display:{xs:"block",sm:"none"}},children:Z.jsx(po,{sx:{paddingLeft:"10px",paddingRight:"10px"},onClick:o,children:e.buttons})})]}):"",Z.jsx(po,{sx:{marginRight:"25px",display:{xs:"none",sm:"flex"}},children:e.buttons})]})})}try{wR.displayName="TopToolbar",wR.__docgenInfo={description:"",displayName:"TopToolbar",props:{unmovableButtons:{defaultValue:null,description:"",name:"unmovableButtons",required:!1,type:{name:"ReactNode"}},buttons:{defaultValue:null,description:"",name:"buttons",required:!1,type:{name:"ReactNode"}},logo:{defaultValue:null,description:"",name:"logo",required:!1,type:{name:"ReactNode"}}}}}catch{}const cae=Ei(Z.jsx("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),aT=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Q.useState(!1),i=()=>{navigator.geolocation.getCurrentPosition(o,l)},o=Q.useCallback(a=>{t.map?.map.setCenter?.([a.coords.longitude,a.coords.latitude])},[t.map]),l=()=>{console.log("Access of user location denied"),n(!0)};return Z.jsx(Z.Fragment,{children:Z.jsx(ji,{variant:"navtools",sx:a=>({zIndex:1002,color:r?e.offColor??a.palette.navigation.buttonColor:e.onColor??a.palette.navigation.buttonColor}),onClick:i,disabled:r,children:Z.jsx(cae,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})})};try{aT.displayName="MlCenterPosition",aT.__docgenInfo={description:"Component template",displayName:"MlCenterPosition",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},onColor:{defaultValue:null,description:"Active button font color",name:"onColor",required:!1,type:{name:"string | undefined"}},offColor:{defaultValue:null,description:"Inactive button font color",name:"offColor",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"CSS style object that is applied to the button component",name:"style",required:!1,type:{name:"SxProps<Theme> | undefined"}}}}}catch{}const SR=e=>{const t=la({mapId:e.mapId});return console.log(t.componentId+" remove this log"),Z.jsx(Z.Fragment,{})};try{SR.displayName="MlComponentTemplate",SR.__docgenInfo={description:"Component description",displayName:"MlComponentTemplate",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const dae=Ei(Z.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}));function Va(e){"@babel/helpers - typeof";return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(e)}var dd=Uint8Array,dc=Uint16Array,XP=Int32Array,YP=new dd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ZP=new dd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),CR=new dd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T7=function(e,t){for(var r=new dc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new XP(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},P7=T7(YP,2),fae=P7.b,oT=P7.r;fae[28]=258,oT[258]=28;var hae=T7(ZP,0),ER=hae.r,sT=new dc(32768);for(var Co=0;Co<32768;++Co){var gh=(Co&43690)>>1|(Co&21845)<<1;gh=(gh&52428)>>2|(gh&13107)<<2,gh=(gh&61680)>>4|(gh&3855)<<4,sT[Co]=((gh&65280)>>8|(gh&255)<<8)>>1}var n0=(function(e,t,r){for(var n=e.length,i=0,o=new dc(t);i<n;++i)e[i]&&++o[e[i]-1];var l=new dc(t);for(i=1;i<t;++i)l[i]=l[i-1]+o[i-1]<<1;var a;if(r){a=new dc(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var p=i<<4|e[i],g=t-e[i],v=l[e[i]-1]++<<g,x=v|(1<<g)-1;v<=x;++v)a[sT[v]>>c]=p}else for(a=new dc(n),i=0;i<n;++i)e[i]&&(a[i]=sT[l[e[i]-1]++]>>15-e[i]);return a}),$p=new dd(288);for(var Co=0;Co<144;++Co)$p[Co]=8;for(var Co=144;Co<256;++Co)$p[Co]=9;for(var Co=256;Co<280;++Co)$p[Co]=7;for(var Co=280;Co<288;++Co)$p[Co]=8;var $_=new dd(32);for(var Co=0;Co<32;++Co)$_[Co]=5;var pae=n0($p,9,0),mae=n0($_,5,0),I7=function(e){return(e+7)/8|0},gae=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new dd(e.subarray(t,r))},xf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},dv=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},CS=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return{t:A7,l:0};if(i==1){var l=new dd(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function($,j){return $.f-j.f}),r.push({s:-1,f:25001});var a=r[0],c=r[1],p=0,g=1,v=2;for(r[0]={s:-1,f:a.f+c.f,l:a,r:c};g!=i-1;)a=r[r[p].f<r[v].f?p++:v++],c=r[p!=g&&r[p].f<r[v].f?p++:v++],r[g++]={s:-1,f:a.f+c.f,l:a,r:c};for(var x=o[0].s,n=1;n<i;++n)o[n].s>x&&(x=o[n].s);var b=new dc(x+1),P=lT(r[g-1],b,0);if(P>t){var n=0,I=0,k=P-t,M=1<<k;for(o.sort(function(j,U){return b[U.s]-b[j.s]||j.f-U.f});n<i;++n){var O=o[n].s;if(b[O]>t)I+=M-(1<<P-b[O]),b[O]=t;else break}for(I>>=k;I>0;){var F=o[n].s;b[F]<t?I-=1<<t-b[F]++-1:++n}for(;n>=0&&I;--n){var N=o[n].s;b[N]==t&&(--b[N],++I)}P=t}return{t:new dd(b),l:P}},lT=function(e,t,r){return e.s==-1?Math.max(lT(e.l,t,r+1),lT(e.r,t,r+1)):t[e.s]=r},TR=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new dc(++t),n=0,i=e[0],o=1,l=function(c){r[n++]=c},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=e[a]}return{c:r.subarray(0,n),n:t}},fv=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},k7=function(e,t,r){var n=r.length,i=I7(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},PR=function(e,t,r,n,i,o,l,a,c,p,g){xf(t,g++,r),++i[256];for(var v=CS(i,15),x=v.t,b=v.l,P=CS(o,15),I=P.t,k=P.l,M=TR(x),O=M.c,F=M.n,N=TR(I),$=N.c,j=N.n,U=new dc(19),H=0;H<O.length;++H)++U[O[H]&31];for(var H=0;H<$.length;++H)++U[$[H]&31];for(var Y=CS(U,7),ae=Y.t,ee=Y.l,G=19;G>4&&!ae[CR[G-1]];--G);var ie=p+5<<3,oe=fv(i,$p)+fv(o,$_)+l,ue=fv(i,x)+fv(o,I)+l+14+3*G+fv(U,ae)+2*U[16]+3*U[17]+7*U[18];if(c>=0&&ie<=oe&&ie<=ue)return k7(t,g,e.subarray(c,c+p));var de,Me,ge,xe;if(xf(t,g,1+(ue<oe)),g+=2,ue<oe){de=n0(x,b,0),Me=x,ge=n0(I,k,0),xe=I;var Ee=n0(ae,ee,0);xf(t,g,F-257),xf(t,g+5,j-1),xf(t,g+10,G-4),g+=14;for(var H=0;H<G;++H)xf(t,g+3*H,ae[CR[H]]);g+=3*G;for(var Ae=[O,$],fe=0;fe<2;++fe)for(var Se=Ae[fe],H=0;H<Se.length;++H){var we=Se[H]&31;xf(t,g,Ee[we]),g+=ae[we],we>15&&(xf(t,g,Se[H]>>5&127),g+=Se[H]>>12)}}else de=pae,Me=$p,ge=mae,xe=$_;for(var H=0;H<a;++H){var De=n[H];if(De>255){var we=De>>18&31;dv(t,g,de[we+257]),g+=Me[we+257],we>7&&(xf(t,g,De>>23&31),g+=YP[we]);var Re=De&31;dv(t,g,ge[Re]),g+=xe[Re],Re>3&&(dv(t,g,De>>5&8191),g+=ZP[Re])}else dv(t,g,de[De]),g+=Me[De]}return dv(t,g,de[256]),g+Me[256]},yae=new XP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),A7=new dd(0),vae=function(e,t,r,n,i,o){var l=o.z||e.length,a=new dd(n+l+5*(1+Math.ceil(l/7e3))+i),c=a.subarray(n,a.length-i),p=o.l,g=(o.r||0)&7;if(t){g&&(c[0]=o.r>>3);for(var v=yae[t-1],x=v>>13,b=v&8191,P=(1<<r)-1,I=o.p||new dc(32768),k=o.h||new dc(P+1),M=Math.ceil(r/3),O=2*M,F=function(at){return(e[at]^e[at+1]<<M^e[at+2]<<O)&P},N=new XP(25e3),$=new dc(288),j=new dc(32),U=0,H=0,Y=o.i||0,ae=0,ee=o.w||0,G=0;Y+2<l;++Y){var ie=F(Y),oe=Y&32767,ue=k[ie];if(I[oe]=ue,k[ie]=oe,ee<=Y){var de=l-Y;if((U>7e3||ae>24576)&&(de>423||!p)){g=PR(e,c,0,N,$,j,H,ae,G,Y-G,g),ae=U=H=0,G=Y;for(var Me=0;Me<286;++Me)$[Me]=0;for(var Me=0;Me<30;++Me)j[Me]=0}var ge=2,xe=0,Ee=b,Ae=oe-ue&32767;if(de>2&&ie==F(Y-Ae))for(var fe=Math.min(x,de)-1,Se=Math.min(32767,Y),we=Math.min(258,de);Ae<=Se&&--Ee&&oe!=ue;){if(e[Y+ge]==e[Y+ge-Ae]){for(var De=0;De<we&&e[Y+De]==e[Y+De-Ae];++De);if(De>ge){if(ge=De,xe=Ae,De>fe)break;for(var Re=Math.min(Ae,De-2),$e=0,Me=0;Me<Re;++Me){var Oe=Y-Ae+Me&32767,it=I[Oe],Ye=Oe-it&32767;Ye>$e&&($e=Ye,ue=Oe)}}}oe=ue,ue=I[oe],Ae+=oe-ue&32767}if(xe){N[ae++]=268435456|oT[ge]<<18|ER[xe];var rt=oT[ge]&31,Ie=ER[xe]&31;H+=YP[rt]+ZP[Ie],++$[257+rt],++j[Ie],ee=Y+ge,++U}else N[ae++]=e[Y],++$[e[Y]]}}for(Y=Math.max(Y,ee);Y<l;++Y)N[ae++]=e[Y],++$[e[Y]];g=PR(e,c,p,N,$,j,H,ae,G,Y-G,g),p||(o.r=g&7|c[g/8|0]<<3,g-=7,o.h=k,o.p=I,o.i=Y,o.w=ee)}else{for(var Y=o.w||0;Y<l+p;Y+=65535){var It=Y+65535;It>=l&&(c[g/8|0]=p,It=l),g=k7(c,g+1,e.subarray(Y,It))}o.i=l}return gae(a,0,n+I7(g)+i)},M7=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length|0,l=0;l!=o;){for(var a=Math.min(l+2655,o);l<a;++l)i+=n+=r[l];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},bae=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),l=new dd(o.length+e.length);l.set(o),l.set(e,o.length),e=l,i.w=o.length}return vae(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},L7=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},_ae=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=M7();i.p(t.dictionary),L7(e,2,i.d())}};function uT(e,t){t||(t={});var r=M7();r.p(e);var n=bae(e,t,t.dictionary?6:2,4);return _ae(n,t),L7(n,n.length-4,r.d()),n}var xae=typeof TextDecoder<"u"&&new TextDecoder,wae=0;try{xae.decode(A7,{stream:!0}),wae=1}catch{}function Sae(e){if(Array.isArray(e))return e}function Cae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,l,a=[],c=!0,p=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(g){p=!0,i=g}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(p)throw i}}return a}}function IR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Eae(e,t){if(e){if(typeof e=="string")return IR(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?IR(e,t):void 0}}function Tae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kR(e,t){return Sae(e)||Cae(e,t)||Eae(e,t)||Tae()}function AR(e,t="utf8"){return new TextDecoder(t).decode(e)}const Pae=new TextEncoder;function Iae(e){return Pae.encode(e)}const kae=1024*8,Aae=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),ES={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class KP{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=kae,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,o=t.byteLength-i;let l=i;(ArrayBuffer.isView(t)||t instanceof KP)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=ES[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===Aae&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+n));a.reverse();const c=new ES[r](a.buffer);return this.offset+=n,c.reverse(),c}const l=new ES[r](o);return this.offset+=n,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return AR(this.readBytes(t))}decodeText(t=1,r="utf8"){return AR(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Iae(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function wy(e){let t=e.length;for(;--t>=0;)e[t]=0}const Mae=3,Lae=258,R7=29,Rae=256,Dae=Rae+1+R7,D7=30,Nae=512,Oae=new Array((Dae+2)*2);wy(Oae);const Fae=new Array(D7*2);wy(Fae);const Bae=new Array(Nae);wy(Bae);const zae=new Array(Lae-Mae+1);wy(zae);const jae=new Array(R7);wy(jae);const qae=new Array(D7);wy(qae);const $ae=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do i=i+t[n++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0};var cT=$ae;const Vae=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Uae=new Uint32Array(Vae()),Gae=(e,t,r,n)=>{const i=Uae,o=n+r;e^=-1;for(let l=n;l<o;l++)e=e>>>8^i[(e^t[l])&255];return e^-1};var Bd=Gae,dT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},N7={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Hae=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Wae=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Hae(r,n)&&(e[n]=r[n])}}return e},Xae=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let l=e[n];r.set(l,i),i+=l.length}return r},O7={assign:Wae,flattenChunks:Xae};let F7=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{F7=!1}const C0=new Uint8Array(256);for(let e=0;e<256;e++)C0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;C0[254]=C0[254]=1;var Yae=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,l=e.length,a=0;for(i=0;i<l;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<l&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<l&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const Zae=(e,t)=>{if(t<65534&&e.subarray&&F7)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var Kae=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let l=e[n++];if(l<128){o[i++]=l;continue}let a=C0[l];if(a>4){o[i++]=65533,n+=a-1;continue}for(l&=a===2?31:a===3?15:7;a>1&&n<r;)l=l<<6|e[n++]&63,a--;if(a>1){o[i++]=65533;continue}l<65536?o[i++]=l:(l-=65536,o[i++]=55296|l>>10&1023,o[i++]=56320|l&1023)}return Zae(o,i)},Jae=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+C0[e[r]]>t?r:t},fT={string2buf:Yae,buf2string:Kae,utf8border:Jae};function Qae(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var eoe=Qae;const pb=16209,toe=16191;var roe=function(t,r){let n,i,o,l,a,c,p,g,v,x,b,P,I,k,M,O,F,N,$,j,U,H,Y,ae;const ee=t.state;n=t.next_in,Y=t.input,i=n+(t.avail_in-5),o=t.next_out,ae=t.output,l=o-(r-t.avail_out),a=o+(t.avail_out-257),c=ee.dmax,p=ee.wsize,g=ee.whave,v=ee.wnext,x=ee.window,b=ee.hold,P=ee.bits,I=ee.lencode,k=ee.distcode,M=(1<<ee.lenbits)-1,O=(1<<ee.distbits)-1;e:do{P<15&&(b+=Y[n++]<<P,P+=8,b+=Y[n++]<<P,P+=8),F=I[b&M];t:for(;;){if(N=F>>>24,b>>>=N,P-=N,N=F>>>16&255,N===0)ae[o++]=F&65535;else if(N&16){$=F&65535,N&=15,N&&(P<N&&(b+=Y[n++]<<P,P+=8),$+=b&(1<<N)-1,b>>>=N,P-=N),P<15&&(b+=Y[n++]<<P,P+=8,b+=Y[n++]<<P,P+=8),F=k[b&O];r:for(;;){if(N=F>>>24,b>>>=N,P-=N,N=F>>>16&255,N&16){if(j=F&65535,N&=15,P<N&&(b+=Y[n++]<<P,P+=8,P<N&&(b+=Y[n++]<<P,P+=8)),j+=b&(1<<N)-1,j>c){t.msg="invalid distance too far back",ee.mode=pb;break e}if(b>>>=N,P-=N,N=o-l,j>N){if(N=j-N,N>g&&ee.sane){t.msg="invalid distance too far back",ee.mode=pb;break e}if(U=0,H=x,v===0){if(U+=p-N,N<$){$-=N;do ae[o++]=x[U++];while(--N);U=o-j,H=ae}}else if(v<N){if(U+=p+v-N,N-=v,N<$){$-=N;do ae[o++]=x[U++];while(--N);if(U=0,v<$){N=v,$-=N;do ae[o++]=x[U++];while(--N);U=o-j,H=ae}}}else if(U+=v-N,N<$){$-=N;do ae[o++]=x[U++];while(--N);U=o-j,H=ae}for(;$>2;)ae[o++]=H[U++],ae[o++]=H[U++],ae[o++]=H[U++],$-=3;$&&(ae[o++]=H[U++],$>1&&(ae[o++]=H[U++]))}else{U=o-j;do ae[o++]=ae[U++],ae[o++]=ae[U++],ae[o++]=ae[U++],$-=3;while($>2);$&&(ae[o++]=ae[U++],$>1&&(ae[o++]=ae[U++]))}}else if((N&64)===0){F=k[(F&65535)+(b&(1<<N)-1)];continue r}else{t.msg="invalid distance code",ee.mode=pb;break e}break}}else if((N&64)===0){F=I[(F&65535)+(b&(1<<N)-1)];continue t}else if(N&32){ee.mode=toe;break e}else{t.msg="invalid literal/length code",ee.mode=pb;break e}break}}while(n<i&&o<a);$=P>>3,n-=$,P-=$<<3,b&=(1<<P)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),ee.hold=b,ee.bits=P};const Wm=15,MR=852,LR=592,RR=0,TS=1,DR=2,noe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ioe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),aoe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ooe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),soe=(e,t,r,n,i,o,l,a)=>{const c=a.bits;let p=0,g=0,v=0,x=0,b=0,P=0,I=0,k=0,M=0,O=0,F,N,$,j,U,H=null,Y;const ae=new Uint16Array(Wm+1),ee=new Uint16Array(Wm+1);let G=null,ie,oe,ue;for(p=0;p<=Wm;p++)ae[p]=0;for(g=0;g<n;g++)ae[t[r+g]]++;for(b=c,x=Wm;x>=1&&ae[x]===0;x--);if(b>x&&(b=x),x===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(v=1;v<x&&ae[v]===0;v++);for(b<v&&(b=v),k=1,p=1;p<=Wm;p++)if(k<<=1,k-=ae[p],k<0)return-1;if(k>0&&(e===RR||x!==1))return-1;for(ee[1]=0,p=1;p<Wm;p++)ee[p+1]=ee[p]+ae[p];for(g=0;g<n;g++)t[r+g]!==0&&(l[ee[t[r+g]]++]=g);if(e===RR?(H=G=l,Y=20):e===TS?(H=noe,G=ioe,Y=257):(H=aoe,G=ooe,Y=0),O=0,g=0,p=v,U=o,P=b,I=0,$=-1,M=1<<b,j=M-1,e===TS&&M>MR||e===DR&&M>LR)return 1;for(;;){ie=p-I,l[g]+1<Y?(oe=0,ue=l[g]):l[g]>=Y?(oe=G[l[g]-Y],ue=H[l[g]-Y]):(oe=96,ue=0),F=1<<p-I,N=1<<P,v=N;do N-=F,i[U+(O>>I)+N]=ie<<24|oe<<16|ue|0;while(N!==0);for(F=1<<p-1;O&F;)F>>=1;if(F!==0?(O&=F-1,O+=F):O=0,g++,--ae[p]===0){if(p===x)break;p=t[r+l[g]]}if(p>b&&(O&j)!==$){for(I===0&&(I=b),U+=v,P=p-I,k=1<<P;P+I<x&&(k-=ae[P+I],!(k<=0));)P++,k<<=1;if(M+=1<<P,e===TS&&M>MR||e===DR&&M>LR)return 1;$=O&j,i[$]=b<<24|P<<16|U-o|0}}return O!==0&&(i[U+O]=p-I<<24|64<<16|0),a.bits=b,0};var i0=soe;const loe=0,B7=1,z7=2,{Z_FINISH:NR,Z_BLOCK:uoe,Z_TREES:mb,Z_OK:Vp,Z_STREAM_END:coe,Z_NEED_DICT:doe,Z_STREAM_ERROR:jc,Z_DATA_ERROR:j7,Z_MEM_ERROR:q7,Z_BUF_ERROR:foe,Z_DEFLATED:OR}=N7,E2=16180,FR=16181,BR=16182,zR=16183,jR=16184,qR=16185,$R=16186,VR=16187,UR=16188,GR=16189,V_=16190,wf=16191,PS=16192,HR=16193,IS=16194,WR=16195,XR=16196,YR=16197,ZR=16198,gb=16199,yb=16200,KR=16201,JR=16202,QR=16203,eD=16204,tD=16205,kS=16206,rD=16207,nD=16208,Bo=16209,$7=16210,V7=16211,hoe=852,poe=592,moe=15,goe=moe,iD=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function yoe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const am=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<E2||t.mode>V7?1:0},U7=e=>{if(am(e))return jc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=E2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(hoe),t.distcode=t.distdyn=new Int32Array(poe),t.sane=1,t.back=-1,Vp},G7=e=>{if(am(e))return jc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,U7(e)},H7=(e,t)=>{let r;if(am(e))return jc;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?jc:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,G7(e))},W7=(e,t)=>{if(!e)return jc;const r=new yoe;e.state=r,r.strm=e,r.window=null,r.mode=E2;const n=H7(e,t);return n!==Vp&&(e.state=null),n},voe=e=>W7(e,goe);let aD=!0,AS,MS;const boe=e=>{if(aD){AS=new Int32Array(512),MS=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(i0(B7,e.lens,0,288,AS,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;i0(z7,e.lens,0,32,MS,0,e.work,{bits:5}),aD=!1}e.lencode=AS,e.lenbits=9,e.distcode=MS,e.distbits=5},X7=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},_oe=(e,t)=>{let r,n,i,o,l,a,c,p,g,v,x,b,P,I,k=0,M,O,F,N,$,j,U,H;const Y=new Uint8Array(4);let ae,ee;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(am(e)||!e.output||!e.input&&e.avail_in!==0)return jc;r=e.state,r.mode===wf&&(r.mode=PS),l=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,p=r.hold,g=r.bits,v=a,x=c,H=Vp;e:for(;;)switch(r.mode){case E2:if(r.wrap===0){r.mode=PS;break}for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.wrap&2&&p===35615){r.wbits===0&&(r.wbits=15),r.check=0,Y[0]=p&255,Y[1]=p>>>8&255,r.check=Bd(r.check,Y,2,0),p=0,g=0,r.mode=FR;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((p&255)<<8)+(p>>8))%31){e.msg="incorrect header check",r.mode=Bo;break}if((p&15)!==OR){e.msg="unknown compression method",r.mode=Bo;break}if(p>>>=4,g-=4,U=(p&15)+8,r.wbits===0&&(r.wbits=U),U>15||U>r.wbits){e.msg="invalid window size",r.mode=Bo;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=p&512?GR:wf,p=0,g=0;break;case FR:for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.flags=p,(r.flags&255)!==OR){e.msg="unknown compression method",r.mode=Bo;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Bo;break}r.head&&(r.head.text=p>>8&1),r.flags&512&&r.wrap&4&&(Y[0]=p&255,Y[1]=p>>>8&255,r.check=Bd(r.check,Y,2,0)),p=0,g=0,r.mode=BR;case BR:for(;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.head&&(r.head.time=p),r.flags&512&&r.wrap&4&&(Y[0]=p&255,Y[1]=p>>>8&255,Y[2]=p>>>16&255,Y[3]=p>>>24&255,r.check=Bd(r.check,Y,4,0)),p=0,g=0,r.mode=zR;case zR:for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.head&&(r.head.xflags=p&255,r.head.os=p>>8),r.flags&512&&r.wrap&4&&(Y[0]=p&255,Y[1]=p>>>8&255,r.check=Bd(r.check,Y,2,0)),p=0,g=0,r.mode=jR;case jR:if(r.flags&1024){for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.length=p,r.head&&(r.head.extra_len=p),r.flags&512&&r.wrap&4&&(Y[0]=p&255,Y[1]=p>>>8&255,r.check=Bd(r.check,Y,2,0)),p=0,g=0}else r.head&&(r.head.extra=null);r.mode=qR;case qR:if(r.flags&1024&&(b=r.length,b>a&&(b=a),b&&(r.head&&(U=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+b),U)),r.flags&512&&r.wrap&4&&(r.check=Bd(r.check,n,b,o)),a-=b,o+=b,r.length-=b),r.length))break e;r.length=0,r.mode=$R;case $R:if(r.flags&2048){if(a===0)break e;b=0;do U=n[o+b++],r.head&&U&&r.length<65536&&(r.head.name+=String.fromCharCode(U));while(U&&b<a);if(r.flags&512&&r.wrap&4&&(r.check=Bd(r.check,n,b,o)),a-=b,o+=b,U)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=VR;case VR:if(r.flags&4096){if(a===0)break e;b=0;do U=n[o+b++],r.head&&U&&r.length<65536&&(r.head.comment+=String.fromCharCode(U));while(U&&b<a);if(r.flags&512&&r.wrap&4&&(r.check=Bd(r.check,n,b,o)),a-=b,o+=b,U)break e}else r.head&&(r.head.comment=null);r.mode=UR;case UR:if(r.flags&512){for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.wrap&4&&p!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Bo;break}p=0,g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=wf;break;case GR:for(;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}e.adler=r.check=iD(p),p=0,g=0,r.mode=V_;case V_:if(r.havedict===0)return e.next_out=l,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=p,r.bits=g,doe;e.adler=r.check=1,r.mode=wf;case wf:if(t===uoe||t===mb)break e;case PS:if(r.last){p>>>=g&7,g-=g&7,r.mode=kS;break}for(;g<3;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}switch(r.last=p&1,p>>>=1,g-=1,p&3){case 0:r.mode=HR;break;case 1:if(boe(r),r.mode=gb,t===mb){p>>>=2,g-=2;break e}break;case 2:r.mode=XR;break;case 3:e.msg="invalid block type",r.mode=Bo}p>>>=2,g-=2;break;case HR:for(p>>>=g&7,g-=g&7;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if((p&65535)!==(p>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Bo;break}if(r.length=p&65535,p=0,g=0,r.mode=IS,t===mb)break e;case IS:r.mode=WR;case WR:if(b=r.length,b){if(b>a&&(b=a),b>c&&(b=c),b===0)break e;i.set(n.subarray(o,o+b),l),a-=b,o+=b,c-=b,l+=b,r.length-=b;break}r.mode=wf;break;case XR:for(;g<14;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.nlen=(p&31)+257,p>>>=5,g-=5,r.ndist=(p&31)+1,p>>>=5,g-=5,r.ncode=(p&15)+4,p>>>=4,g-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Bo;break}r.have=0,r.mode=YR;case YR:for(;r.have<r.ncode;){for(;g<3;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.lens[G[r.have++]]=p&7,p>>>=3,g-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ae={bits:r.lenbits},H=i0(loe,r.lens,0,19,r.lencode,0,r.work,ae),r.lenbits=ae.bits,H){e.msg="invalid code lengths set",r.mode=Bo;break}r.have=0,r.mode=ZR;case ZR:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[p&(1<<r.lenbits)-1],M=k>>>24,O=k>>>16&255,F=k&65535,!(M<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(F<16)p>>>=M,g-=M,r.lens[r.have++]=F;else{if(F===16){for(ee=M+2;g<ee;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(p>>>=M,g-=M,r.have===0){e.msg="invalid bit length repeat",r.mode=Bo;break}U=r.lens[r.have-1],b=3+(p&3),p>>>=2,g-=2}else if(F===17){for(ee=M+3;g<ee;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=M,g-=M,U=0,b=3+(p&7),p>>>=3,g-=3}else{for(ee=M+7;g<ee;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=M,g-=M,U=0,b=11+(p&127),p>>>=7,g-=7}if(r.have+b>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Bo;break}for(;b--;)r.lens[r.have++]=U}}if(r.mode===Bo)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Bo;break}if(r.lenbits=9,ae={bits:r.lenbits},H=i0(B7,r.lens,0,r.nlen,r.lencode,0,r.work,ae),r.lenbits=ae.bits,H){e.msg="invalid literal/lengths set",r.mode=Bo;break}if(r.distbits=6,r.distcode=r.distdyn,ae={bits:r.distbits},H=i0(z7,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ae),r.distbits=ae.bits,H){e.msg="invalid distances set",r.mode=Bo;break}if(r.mode=gb,t===mb)break e;case gb:r.mode=yb;case yb:if(a>=6&&c>=258){e.next_out=l,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=p,r.bits=g,roe(e,x),l=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,p=r.hold,g=r.bits,r.mode===wf&&(r.back=-1);break}for(r.back=0;k=r.lencode[p&(1<<r.lenbits)-1],M=k>>>24,O=k>>>16&255,F=k&65535,!(M<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(O&&(O&240)===0){for(N=M,$=O,j=F;k=r.lencode[j+((p&(1<<N+$)-1)>>N)],M=k>>>24,O=k>>>16&255,F=k&65535,!(N+M<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=N,g-=N,r.back+=N}if(p>>>=M,g-=M,r.back+=M,r.length=F,O===0){r.mode=tD;break}if(O&32){r.back=-1,r.mode=wf;break}if(O&64){e.msg="invalid literal/length code",r.mode=Bo;break}r.extra=O&15,r.mode=KR;case KR:if(r.extra){for(ee=r.extra;g<ee;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.length+=p&(1<<r.extra)-1,p>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=JR;case JR:for(;k=r.distcode[p&(1<<r.distbits)-1],M=k>>>24,O=k>>>16&255,F=k&65535,!(M<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if((O&240)===0){for(N=M,$=O,j=F;k=r.distcode[j+((p&(1<<N+$)-1)>>N)],M=k>>>24,O=k>>>16&255,F=k&65535,!(N+M<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=N,g-=N,r.back+=N}if(p>>>=M,g-=M,r.back+=M,O&64){e.msg="invalid distance code",r.mode=Bo;break}r.offset=F,r.extra=O&15,r.mode=QR;case QR:if(r.extra){for(ee=r.extra;g<ee;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.offset+=p&(1<<r.extra)-1,p>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Bo;break}r.mode=eD;case eD:if(c===0)break e;if(b=x-c,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Bo;break}b>r.wnext?(b-=r.wnext,P=r.wsize-b):P=r.wnext-b,b>r.length&&(b=r.length),I=r.window}else I=i,P=l-r.offset,b=r.length;b>c&&(b=c),c-=b,r.length-=b;do i[l++]=I[P++];while(--b);r.length===0&&(r.mode=yb);break;case tD:if(c===0)break e;i[l++]=r.length,c--,r.mode=yb;break;case kS:if(r.wrap){for(;g<32;){if(a===0)break e;a--,p|=n[o++]<<g,g+=8}if(x-=c,e.total_out+=x,r.total+=x,r.wrap&4&&x&&(e.adler=r.check=r.flags?Bd(r.check,i,x,l-x):cT(r.check,i,x,l-x)),x=c,r.wrap&4&&(r.flags?p:iD(p))!==r.check){e.msg="incorrect data check",r.mode=Bo;break}p=0,g=0}r.mode=rD;case rD:if(r.wrap&&r.flags){for(;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.wrap&4&&p!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Bo;break}p=0,g=0}r.mode=nD;case nD:H=coe;break e;case Bo:H=j7;break e;case $7:return q7;case V7:default:return jc}return e.next_out=l,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=p,r.bits=g,(r.wsize||x!==e.avail_out&&r.mode<Bo&&(r.mode<kS||t!==NR))&&X7(e,e.output,e.next_out,x-e.avail_out),v-=e.avail_in,x-=e.avail_out,e.total_in+=v,e.total_out+=x,r.total+=x,r.wrap&4&&x&&(e.adler=r.check=r.flags?Bd(r.check,i,x,e.next_out-x):cT(r.check,i,x,e.next_out-x)),e.data_type=r.bits+(r.last?64:0)+(r.mode===wf?128:0)+(r.mode===gb||r.mode===IS?256:0),(v===0&&x===0||t===NR)&&H===Vp&&(H=foe),H},xoe=e=>{if(am(e))return jc;let t=e.state;return t.window&&(t.window=null),e.state=null,Vp},woe=(e,t)=>{if(am(e))return jc;const r=e.state;return(r.wrap&2)===0?jc:(r.head=t,t.done=!1,Vp)},Soe=(e,t)=>{const r=t.length;let n,i,o;return am(e)||(n=e.state,n.wrap!==0&&n.mode!==V_)?jc:n.mode===V_&&(i=1,i=cT(i,t,r,0),i!==n.check)?j7:(o=X7(e,t,r,r),o?(n.mode=$7,q7):(n.havedict=1,Vp))};var Coe=G7,Eoe=H7,Toe=U7,Poe=voe,Ioe=W7,koe=_oe,Aoe=xoe,Moe=woe,Loe=Soe,Roe="pako inflate (from Nodeca project)",Tf={inflateReset:Coe,inflateReset2:Eoe,inflateResetKeep:Toe,inflateInit:Poe,inflateInit2:Ioe,inflate:koe,inflateEnd:Aoe,inflateGetHeader:Moe,inflateSetDictionary:Loe,inflateInfo:Roe};function Doe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Noe=Doe;const Y7=Object.prototype.toString,{Z_NO_FLUSH:Ooe,Z_FINISH:Foe,Z_OK:E0,Z_STREAM_END:LS,Z_NEED_DICT:RS,Z_STREAM_ERROR:Boe,Z_DATA_ERROR:oD,Z_MEM_ERROR:zoe}=N7;function u1(e){this.options=O7.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eoe,this.strm.avail_out=0;let r=Tf.inflateInit2(this.strm,t.windowBits);if(r!==E0)throw new Error(dT[r]);if(this.header=new Noe,Tf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=fT.string2buf(t.dictionary):Y7.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Tf.inflateSetDictionary(this.strm,t.dictionary),r!==E0)))throw new Error(dT[r])}u1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,l,a;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?Foe:Ooe,Y7.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Tf.inflate(r,l),o===RS&&i&&(o=Tf.inflateSetDictionary(r,i),o===E0?o=Tf.inflate(r,l):o===oD&&(o=RS));r.avail_in>0&&o===LS&&r.state.wrap>0&&e[r.next_in]!==0;)Tf.inflateReset(r),o=Tf.inflate(r,l);switch(o){case Boe:case oD:case RS:case zoe:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===LS))if(this.options.to==="string"){let c=fT.utf8border(r.output,r.next_out),p=r.next_out-c,g=fT.buf2string(r.output,c);r.next_out=p,r.avail_out=n-p,p&&r.output.set(r.output.subarray(c,c+p),0),this.onData(g)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===E0&&a===0)){if(o===LS)return o=Tf.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};u1.prototype.onData=function(e){this.chunks.push(e)};u1.prototype.onEnd=function(e){e===E0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=O7.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function joe(e,t){const r=new u1(t);if(r.push(e),r.err)throw r.msg||dT[r.err];return r.result}var qoe=u1,$oe=joe,Voe={Inflate:qoe,inflate:$oe};const{Inflate:Uoe,inflate:Goe}=Voe;var sD=Uoe,Hoe=Goe;const Z7=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Z7[e]=t}const lD=4294967295;function Woe(e,t,r){let n=e;for(let i=0;i<r;i++)n=Z7[(n^t[i])&255]^n>>>8;return n}function Xoe(e,t){return(Woe(lD,e,t)^lD)>>>0}function uD(e,t,r){const n=e.readUint32(),i=Xoe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function K7(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function J7(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function Q7(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function ej(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=e[o]+(r[o]>>1)&255;for(;o<n;o++)t[o]=e[o]+(t[o-i]+r[o]>>1)&255}}function tj(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=e[o]+r[o]&255;for(;o<n;o++)t[o]=e[o]+Yoe(t[o-i],r[o],r[o-i])&255}}function Yoe(e,t,r){const n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),l=Math.abs(n-r);return i<=o&&i<=l?e:o<=l?t:r}function Zoe(e,t,r,n,i,o){switch(e){case 0:K7(t,r,i);break;case 1:J7(t,r,i,o);break;case 2:Q7(t,r,n,i);break;case 3:ej(t,r,n,i,o);break;case 4:tj(t,r,n,i,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Koe=new Uint16Array([255]),Joe=new Uint8Array(Koe.buffer),Qoe=Joe[0]===255;function ese(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,c=new Uint8Array(n*r*a);let p=0;for(let g=0;g<7;g++){const v=l[g],x=Math.ceil((r-v.x)/v.xStep),b=Math.ceil((n-v.y)/v.yStep);if(x<=0||b<=0)continue;const P=x*a,I=new Uint8Array(P);for(let k=0;k<b;k++){const M=t[p++],O=t.subarray(p,p+P);p+=P;const F=new Uint8Array(P);Zoe(M,O,F,I,P,a),I.set(F);for(let N=0;N<x;N++){const $=v.x+N*v.xStep,j=v.y+k*v.yStep;if(!($>=r||j>=n))for(let U=0;U<a;U++)c[(j*r+$)*a+U]=F[N*a+U]}}}if(o===16){const g=new Uint16Array(c.buffer);if(Qoe)for(let v=0;v<g.length;v++)g[v]=tse(g[v]);return g}else return c}function tse(e){return(e&255)<<8|e>>8&255}const rse=new Uint16Array([255]),nse=new Uint8Array(rse.buffer),ise=nse[0]===255,ase=new Uint8Array(0);function cD(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,l=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*r),c=new Uint8Array(n*a);let p=ase,g=0,v,x;for(let b=0;b<n;b++){switch(v=t.subarray(g+1,g+1+a),x=c.subarray(b*a,(b+1)*a),t[g]){case 0:K7(v,x,a);break;case 1:J7(v,x,a,l);break;case 2:Q7(v,x,p,a);break;case 3:ej(v,x,p,a,l);break;case 4:tj(v,x,p,a,l);break;default:throw new Error(`Unsupported filter: ${t[g]}`)}p=x,g+=a+1}if(o===16){const b=new Uint16Array(c.buffer);if(ise)for(let P=0;P<b.length;P++)b[P]=ose(b[P]);return b}else return c}function ose(e){return(e&255)<<8|e>>8&255}const c_=Uint8Array.of(137,80,78,71,13,10,26,10);function dD(e){if(!sse(e.readBytes(c_.length)))throw new Error("wrong PNG signature")}function sse(e){if(e.length<c_.length)return!1;for(let t=0;t<c_.length;t++)if(e[t]!==c_[t])return!1;return!0}const lse="tEXt",use=0,rj=new TextDecoder("latin1");function cse(e){if(fse(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const dse=/^[\u0000-\u00FF]*$/;function fse(e){if(!dse.test(e))throw new Error("invalid latin1 text")}function hse(e,t,r){const n=nj(t);e[n]=pse(t,r-n.length-1)}function nj(e){for(e.mark();e.readByte()!==use;);const t=e.offset;e.reset();const r=rj.decode(e.readBytes(t-e.offset-1));return e.skip(1),cse(r),r}function pse(e,t){return rj.decode(e.readBytes(t))}const sc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},DS={UNKNOWN:-1,DEFLATE:0},fD={UNKNOWN:-1,ADAPTIVE:0},NS={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},vb={NONE:0,BACKGROUND:1,PREVIOUS:2},OS={SOURCE:0,OVER:1};class mse extends KP{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new sD,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=DS.UNKNOWN,this._filterMethod=fD.UNKNOWN,this._interlaceMethod=NS.UNKNOWN,this._colorType=sc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(dD(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(dD(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case lse:hse(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?uD(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?uD(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=gse(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case sc.GREYSCALE:n=1;break;case sc.TRUECOLOUR:n=3;break;case sc.INDEXED_COLOUR:n=1;break;case sc.GREYSCALE_ALPHA:n=2;break;case sc.TRUECOLOUR_ALPHA:n=4;break;case sc.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==DS.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case sc.GREYSCALE:case sc.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case sc.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case sc.UNKNOWN:case sc.GREYSCALE_ALPHA:case sc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=nj(this),n=this.readUint8();if(n!==DS.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Hoe(i)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=cD({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case vb.NONE:break;case vb.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*t.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)n.data[l+a]=0}break;case vb.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,i=(o,l)=>{const a=((o+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,c=(o*r.width+l)*this._png.channels;return{index:a,frameIndex:c}};switch(r.blendOp){case OS.SOURCE:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:a,frameIndex:c}=i(o,l);for(let p=0;p<this._png.channels;p++)t.data[a+p]=r.data[c+p]}break;case OS.OVER:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:a,frameIndex:c}=i(o,l);for(let p=0;p<this._png.channels;p++){const g=r.data[c+this._png.channels-1]/n,v=p%(this._png.channels-1)===0?1:r.data[c+p],x=Math.floor(g*v+(1-g)*t.data[a+p]);t.data[a+p]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==fD.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===NS.NO_INTERLACE)this._png.data=cD({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===NS.ADAM7)this._png.data=ese({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:vb.NONE,blendOp:OS.SOURCE,data:t}),this._inflator=new sD,this._writingDataChunks=!1}}function gse(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var hD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(hD||(hD={}));function yse(e,t){return new mse(e,t).decode()}var xi=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function FS(){xi.console&&typeof xi.console.log=="function"&&xi.console.log.apply(xi.console,arguments)}var ao={log:FS,warn:function(e){xi.console&&(typeof xi.console.warn=="function"?xi.console.warn.apply(xi.console,arguments):FS.call(null,arguments))},error:function(e){xi.console&&(typeof xi.console.error=="function"?xi.console.error.apply(xi.console,arguments):FS(e))}};function BS(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){_p(n.response,t,r)},n.onerror=function(){ao.error("could not download file")},n.send()}function pD(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function bb(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var _p=xi.saveAs||((typeof window>"u"?"undefined":Va(window))!=="object"||window!==xi?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=xi.URL||xi.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?pD(i.href)?BS(e,t,r):bb(i,i.target="_blank"):bb(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){bb(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(pD(e))BS(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){bb(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Va(o)!=="object"&&(ao.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return BS(e,t,r);var i=e.type==="application/octet-stream",o=/constructor/i.test(xi.HTMLElement)||xi.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":Va(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var g=a.result;g=l?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},a.readAsDataURL(e)}else{var c=xi.URL||xi.webkitURL,p=c.createObjectURL(e);n?n.location=p:location.href=p,n=null,setTimeout(function(){c.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ij(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,l=i.exec(e);l&&(t=o(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),p=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),p.length==1&&(p="0"+p),"#"+a+c+p}}var d_=xi.atob.bind(xi),mD=xi.btoa.bind(xi);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zS(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r=tu(r,n,i,o,t[0],7,-680876936),o=tu(o,r,n,i,t[1],12,-389564586),i=tu(i,o,r,n,t[2],17,606105819),n=tu(n,i,o,r,t[3],22,-1044525330),r=tu(r,n,i,o,t[4],7,-176418897),o=tu(o,r,n,i,t[5],12,1200080426),i=tu(i,o,r,n,t[6],17,-1473231341),n=tu(n,i,o,r,t[7],22,-45705983),r=tu(r,n,i,o,t[8],7,1770035416),o=tu(o,r,n,i,t[9],12,-1958414417),i=tu(i,o,r,n,t[10],17,-42063),n=tu(n,i,o,r,t[11],22,-1990404162),r=tu(r,n,i,o,t[12],7,1804603682),o=tu(o,r,n,i,t[13],12,-40341101),i=tu(i,o,r,n,t[14],17,-1502002290),r=ru(r,n=tu(n,i,o,r,t[15],22,1236535329),i,o,t[1],5,-165796510),o=ru(o,r,n,i,t[6],9,-1069501632),i=ru(i,o,r,n,t[11],14,643717713),n=ru(n,i,o,r,t[0],20,-373897302),r=ru(r,n,i,o,t[5],5,-701558691),o=ru(o,r,n,i,t[10],9,38016083),i=ru(i,o,r,n,t[15],14,-660478335),n=ru(n,i,o,r,t[4],20,-405537848),r=ru(r,n,i,o,t[9],5,568446438),o=ru(o,r,n,i,t[14],9,-1019803690),i=ru(i,o,r,n,t[3],14,-187363961),n=ru(n,i,o,r,t[8],20,1163531501),r=ru(r,n,i,o,t[13],5,-1444681467),o=ru(o,r,n,i,t[2],9,-51403784),i=ru(i,o,r,n,t[7],14,1735328473),r=nu(r,n=ru(n,i,o,r,t[12],20,-1926607734),i,o,t[5],4,-378558),o=nu(o,r,n,i,t[8],11,-2022574463),i=nu(i,o,r,n,t[11],16,1839030562),n=nu(n,i,o,r,t[14],23,-35309556),r=nu(r,n,i,o,t[1],4,-1530992060),o=nu(o,r,n,i,t[4],11,1272893353),i=nu(i,o,r,n,t[7],16,-155497632),n=nu(n,i,o,r,t[10],23,-1094730640),r=nu(r,n,i,o,t[13],4,681279174),o=nu(o,r,n,i,t[0],11,-358537222),i=nu(i,o,r,n,t[3],16,-722521979),n=nu(n,i,o,r,t[6],23,76029189),r=nu(r,n,i,o,t[9],4,-640364487),o=nu(o,r,n,i,t[12],11,-421815835),i=nu(i,o,r,n,t[15],16,530742520),r=iu(r,n=nu(n,i,o,r,t[2],23,-995338651),i,o,t[0],6,-198630844),o=iu(o,r,n,i,t[7],10,1126891415),i=iu(i,o,r,n,t[14],15,-1416354905),n=iu(n,i,o,r,t[5],21,-57434055),r=iu(r,n,i,o,t[12],6,1700485571),o=iu(o,r,n,i,t[3],10,-1894986606),i=iu(i,o,r,n,t[10],15,-1051523),n=iu(n,i,o,r,t[1],21,-2054922799),r=iu(r,n,i,o,t[8],6,1873313359),o=iu(o,r,n,i,t[15],10,-30611744),i=iu(i,o,r,n,t[6],15,-1560198380),n=iu(n,i,o,r,t[13],21,1309151649),r=iu(r,n,i,o,t[4],6,-145523070),o=iu(o,r,n,i,t[11],10,-1120210379),i=iu(i,o,r,n,t[2],15,718787259),n=iu(n,i,o,r,t[9],21,-343485551),e[0]=Ch(r,e[0]),e[1]=Ch(n,e[1]),e[2]=Ch(i,e[2]),e[3]=Ch(o,e[3])}function T2(e,t,r,n,i,o){return t=Ch(Ch(t,e),Ch(n,o)),Ch(t<<i|t>>>32-i,r)}function tu(e,t,r,n,i,o,l){return T2(t&r|~t&n,e,t,i,o,l)}function ru(e,t,r,n,i,o,l){return T2(t&n|r&~n,e,t,i,o,l)}function nu(e,t,r,n,i,o,l){return T2(t^r^n,e,t,i,o,l)}function iu(e,t,r,n,i,o,l){return T2(r^(t|~n),e,t,i,o,l)}function aj(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)zS(n,vse(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(zS(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,zS(n,i),n}function vse(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var gD="0123456789abcdef".split("");function bse(e){for(var t="",r=0;r<4;r++)t+=gD[e>>8*r+4&15]+gD[e>>8*r&15];return t}function _se(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function hT(e){return aj(e).map(_se).join("")}var xse=(function(e){for(var t=0;t<e.length;t++)e[t]=bse(e[t]);return e.join("")})(aj("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ch(e,t){if(xse){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function pT(e,t){var r,n,i,o;if(e!==r){for(var l=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var p=0;for(c=0;c<256;c++){var g=a[c];p=(p+g+l.charCodeAt(c))%256,a[c]=a[p],a[p]=g}r=e,n=a}else a=n;var v=t.length,x=0,b=0,P="";for(c=0;c<v;c++)b=(b+(g=a[x=(x+1)%256]))%256,a[x]=a[b],a[b]=g,l=a[(a[x]+a[b])%256],P+=String.fromCharCode(t.charCodeAt(c)^l);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var yD={print:4,modify:8,copy:16,"annot-forms":32};function lg(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(yD.perm!==void 0)throw new Error("Invalid permission: "+a);i+=yD[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=hT(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=pT(this.encryptionKey,this.padding)}function ug(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function vD(e){if(Va(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var o=Math.random().toString(35);return t[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[r]){var l=t[r][o];try{l[0].apply(e,n)}catch(a){xi.console&&ao.error("jsPDF PubSub Error",a.message,a)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function U_(e){if(!(this instanceof U_))return new U_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function oj(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Cp(e,t,r,n,i){if(!(this instanceof Cp))return new Cp(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,oj.call(this,n,i)}function Ag(e,t,r,n,i){if(!(this instanceof Ag))return new Ag(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,oj.call(this,n,i)}function ti(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],l=[],a=1,c=16,p="S",g=null;Va(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,o=e.compress||e.compressPdf||o,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),p=e.defaultPathOperation||"S"),l=e.filters||(o===!0?["FlateEncode"]:l),n=n||"mm",r=(""+(r||"P")).toLowerCase();var v=e.putOnlyUsedFonts||!1,x={},b={internal:{},__private__:{}};b.__private__.PubSub=vD;var P="1.3",I=b.__private__.getPdfVersion=function(){return P};b.__private__.setPdfVersion=function(le){P=le};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var M=b.__private__.getPageFormat=function(le){return k[le]};i=i||"a4";var O="compat",F="advanced",N=O;function $(){this.saveGraphicsState(),je(new en(be,0,0,-be,0,Gi()*be).toString()+" cm"),this.setFontSize(this.getFontSize()/be),p="n",N=F}function j(){this.restoreGraphicsState(),p="S",N=O}var U=b.__private__.combineFontStyleAndFontWeight=function(le,Ve){if(le=="bold"&&Ve=="normal"||le=="bold"&&Ve==400||le=="normal"&&Ve=="italic"||le=="bold"&&Ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ve&&(le=Ve==400||Ve==="normal"?le==="italic"?"italic":"normal":Ve!=700&&Ve!=="bold"||le!=="normal"?(Ve==700?"bold":Ve)+""+le:"bold"),le};b.advancedAPI=function(le){var Ve=N===O;return Ve&&$.call(this),typeof le!="function"||(le(this),Ve&&j.call(this)),this},b.compatAPI=function(le){var Ve=N===F;return Ve&&j.call(this),typeof le!="function"||(le(this),Ve&&$.call(this)),this},b.isAdvancedAPI=function(){return N===F};var H,Y=function(le){if(N!==F)throw new Error(le+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ae=b.roundToPrecision=b.__private__.roundToPrecision=function(le,Ve){var pt=t||Ve;if(isNaN(le)||isNaN(pt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return le.toFixed(pt).replace(/0+$/,"")};H=b.hpf=b.__private__.hpf=typeof c=="number"?function(le){if(isNaN(le))throw new Error("Invalid argument passed to jsPDF.hpf");return ae(le,c)}:c==="smart"?function(le){if(isNaN(le))throw new Error("Invalid argument passed to jsPDF.hpf");return ae(le,le>-1&&le<1?16:5)}:function(le){if(isNaN(le))throw new Error("Invalid argument passed to jsPDF.hpf");return ae(le,16)};var ee=b.f2=b.__private__.f2=function(le){if(isNaN(le))throw new Error("Invalid argument passed to jsPDF.f2");return ae(le,2)},G=b.__private__.f3=function(le){if(isNaN(le))throw new Error("Invalid argument passed to jsPDF.f3");return ae(le,3)},ie=b.scale=b.__private__.scale=function(le){if(isNaN(le))throw new Error("Invalid argument passed to jsPDF.scale");return N===O?le*be:N===F?le:void 0},oe=function(le){return ie((function(Ve){return N===O?Gi()-Ve:N===F?Ve:void 0})(le))};b.__private__.setPrecision=b.setPrecision=function(le){typeof parseInt(le,10)=="number"&&(t=parseInt(le,10))};var ue,de="00000000000000000000000000000000",Me=b.__private__.getFileId=function(){return de},ge=b.__private__.setFileId=function(le){return de=le!==void 0&&/^[a-fA-F0-9]{32}$/.test(le)?le.toUpperCase():de.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(va=new lg(g.userPermissions,g.userPassword,g.ownerPassword,de)),de};b.setFileId=function(le){return ge(le),this},b.getFileId=function(){return Me()};var xe=b.__private__.convertDateToPDFDate=function(le){var Ve=le.getTimezoneOffset(),pt=Ve<0?"+":"-",Dt=Math.floor(Math.abs(Ve/60)),tr=Math.abs(Ve%60),Pr=[pt,we(Dt),"'",we(tr),"'"].join("");return["D:",le.getFullYear(),we(le.getMonth()+1),we(le.getDate()),we(le.getHours()),we(le.getMinutes()),we(le.getSeconds()),Pr].join("")},Ee=b.__private__.convertPDFDateToDate=function(le){var Ve=parseInt(le.substr(2,4),10),pt=parseInt(le.substr(6,2),10)-1,Dt=parseInt(le.substr(8,2),10),tr=parseInt(le.substr(10,2),10),Pr=parseInt(le.substr(12,2),10),$r=parseInt(le.substr(14,2),10);return new Date(Ve,pt,Dt,tr,Pr,$r,0)},Ae=b.__private__.setCreationDate=function(le){var Ve;if(le===void 0&&(le=new Date),le instanceof Date)Ve=xe(le);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(le))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ve=le}return ue=Ve},fe=b.__private__.getCreationDate=function(le){var Ve=ue;return le==="jsDate"&&(Ve=Ee(ue)),Ve};b.setCreationDate=function(le){return Ae(le),this},b.getCreationDate=function(le){return fe(le)};var Se,we=b.__private__.padd2=function(le){return("0"+parseInt(le)).slice(-2)},De=b.__private__.padd2Hex=function(le){return("00"+(le=le.toString())).substr(le.length)},Re=0,$e=[],Oe=[],it=0,Ye=[],rt=[],Ie=!1,It=Oe;b.__private__.setCustomOutputDestination=function(le){Ie=!0,It=le};var at=function(le){Ie||(It=le)};b.__private__.resetCustomOutputDestination=function(){Ie=!1,It=Oe};var je=b.__private__.out=function(le){return le=le.toString(),it+=le.length+1,It.push(le),It},Ht=b.__private__.write=function(le){return je(arguments.length===1?le.toString():Array.prototype.join.call(arguments," "))},Wt=b.__private__.getArrayBuffer=function(le){for(var Ve=le.length,pt=new ArrayBuffer(Ve),Dt=new Uint8Array(pt);Ve--;)Dt[Ve]=le.charCodeAt(Ve);return pt},zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return zt};var st=e.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(le){return st=N===F?le/be:le,this};var sr,ur=b.__private__.getFontSize=b.getFontSize=function(){return N===O?st:st*be},ar=e.R2L||!1;b.__private__.setR2L=b.setR2L=function(le){return ar=le,this},b.__private__.getR2L=b.getR2L=function(){return ar};var yr,pr=b.__private__.setZoomMode=function(le){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(le))sr=le;else if(isNaN(le)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(le)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+le+'" is not recognized.');sr=le}else sr=parseInt(le,10)};b.__private__.getZoomMode=function(){return sr};var Jt,ir=b.__private__.setPageMode=function(le){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(le)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+le+'" is not recognized.');yr=le};b.__private__.getPageMode=function(){return yr};var xr=b.__private__.setLayoutMode=function(le){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(le)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+le+'" is not recognized.');Jt=le};b.__private__.getLayoutMode=function(){return Jt},b.__private__.setDisplayMode=b.setDisplayMode=function(le,Ve,pt){return pr(le),xr(Ve),ir(pt),this};var rr={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(le){if(Object.keys(rr).indexOf(le)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return rr[le]},b.__private__.getDocumentProperties=function(){return rr},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(le){for(var Ve in rr)rr.hasOwnProperty(Ve)&&le[Ve]&&(rr[Ve]=le[Ve]);return this},b.__private__.setDocumentProperty=function(le,Ve){if(Object.keys(rr).indexOf(le)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return rr[le]=Ve};var nt,be,_e,Ue,Qe,ot={},et={},Lt=[],vt={},Bt={},Kt={},Zt={},Er=null,bt=0,vr=[],Dr=new vD(b),jr=e.hotfixes||[],Ur={},nr={},Hn=[],en=function le(Ve,pt,Dt,tr,Pr,$r){if(!(this instanceof le))return new le(Ve,pt,Dt,tr,Pr,$r);isNaN(Ve)&&(Ve=1),isNaN(pt)&&(pt=0),isNaN(Dt)&&(Dt=0),isNaN(tr)&&(tr=1),isNaN(Pr)&&(Pr=0),isNaN($r)&&($r=0),this._matrix=[Ve,pt,Dt,tr,Pr,$r]};Object.defineProperty(en.prototype,"sx",{get:function(){return this._matrix[0]},set:function(le){this._matrix[0]=le}}),Object.defineProperty(en.prototype,"shy",{get:function(){return this._matrix[1]},set:function(le){this._matrix[1]=le}}),Object.defineProperty(en.prototype,"shx",{get:function(){return this._matrix[2]},set:function(le){this._matrix[2]=le}}),Object.defineProperty(en.prototype,"sy",{get:function(){return this._matrix[3]},set:function(le){this._matrix[3]=le}}),Object.defineProperty(en.prototype,"tx",{get:function(){return this._matrix[4]},set:function(le){this._matrix[4]=le}}),Object.defineProperty(en.prototype,"ty",{get:function(){return this._matrix[5]},set:function(le){this._matrix[5]=le}}),Object.defineProperty(en.prototype,"a",{get:function(){return this._matrix[0]},set:function(le){this._matrix[0]=le}}),Object.defineProperty(en.prototype,"b",{get:function(){return this._matrix[1]},set:function(le){this._matrix[1]=le}}),Object.defineProperty(en.prototype,"c",{get:function(){return this._matrix[2]},set:function(le){this._matrix[2]=le}}),Object.defineProperty(en.prototype,"d",{get:function(){return this._matrix[3]},set:function(le){this._matrix[3]=le}}),Object.defineProperty(en.prototype,"e",{get:function(){return this._matrix[4]},set:function(le){this._matrix[4]=le}}),Object.defineProperty(en.prototype,"f",{get:function(){return this._matrix[5]},set:function(le){this._matrix[5]=le}}),Object.defineProperty(en.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(en.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(en.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(en.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),en.prototype.join=function(le){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(H).join(le)},en.prototype.multiply=function(le){var Ve=le.sx*this.sx+le.shy*this.shx,pt=le.sx*this.shy+le.shy*this.sy,Dt=le.shx*this.sx+le.sy*this.shx,tr=le.shx*this.shy+le.sy*this.sy,Pr=le.tx*this.sx+le.ty*this.shx+this.tx,$r=le.tx*this.shy+le.ty*this.sy+this.ty;return new en(Ve,pt,Dt,tr,Pr,$r)},en.prototype.decompose=function(){var le=this.sx,Ve=this.shy,pt=this.shx,Dt=this.sy,tr=this.tx,Pr=this.ty,$r=Math.sqrt(le*le+Ve*Ve),xn=(le/=$r)*pt+(Ve/=$r)*Dt;pt-=le*xn,Dt-=Ve*xn;var pn=Math.sqrt(pt*pt+Dt*Dt);return xn/=pn,le*(Dt/=pn)<Ve*(pt/=pn)&&(le=-le,Ve=-Ve,xn=-xn,$r=-$r),{scale:new en($r,0,0,pn,0,0),translate:new en(1,0,0,1,tr,Pr),rotate:new en(le,Ve,-Ve,le,0,0),skew:new en(1,0,xn,1,0,0)}},en.prototype.toString=function(le){return this.join(" ")},en.prototype.inversed=function(){var le=this.sx,Ve=this.shy,pt=this.shx,Dt=this.sy,tr=this.tx,Pr=this.ty,$r=1/(le*Dt-Ve*pt),xn=Dt*$r,pn=-Ve*$r,Yn=-pt*$r,ei=le*$r;return new en(xn,pn,Yn,ei,-xn*tr-Yn*Pr,-pn*tr-ei*Pr)},en.prototype.applyToPoint=function(le){var Ve=le.x*this.sx+le.y*this.shx+this.tx,pt=le.x*this.shy+le.y*this.sy+this.ty;return new Pl(Ve,pt)},en.prototype.applyToRectangle=function(le){var Ve=this.applyToPoint(le),pt=this.applyToPoint(new Pl(le.x+le.w,le.y+le.h));return new Xs(Ve.x,Ve.y,pt.x-Ve.x,pt.y-Ve.y)},en.prototype.clone=function(){var le=this.sx,Ve=this.shy,pt=this.shx,Dt=this.sy,tr=this.tx,Pr=this.ty;return new en(le,Ve,pt,Dt,tr,Pr)},b.Matrix=en;var Wn=b.matrixMult=function(le,Ve){return Ve.multiply(le)},Pe=new en(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Pe;var Be=function(le,Ve){if(!Bt[le]){var pt=(Ve instanceof Cp?"Sh":"P")+(Object.keys(vt).length+1).toString(10);Ve.id=pt,Bt[le]=pt,vt[pt]=Ve,Dr.publish("addPattern",Ve)}};b.ShadingPattern=Cp,b.TilingPattern=Ag,b.addShadingPattern=function(le,Ve){return Y("addShadingPattern()"),Be(le,Ve),this},b.beginTilingPattern=function(le){Y("beginTilingPattern()"),Ds(le.boundingBox[0],le.boundingBox[1],le.boundingBox[2]-le.boundingBox[0],le.boundingBox[3]-le.boundingBox[1],le.matrix)},b.endTilingPattern=function(le,Ve){Y("endTilingPattern()"),Ve.stream=rt[Se].join(`
`),Be(le,Ve),Dr.publish("endTilingPattern",Ve),Hn.pop().restore()};var gt,mt=b.__private__.newObject=function(){var le=wr();return Ar(le,!0),le},wr=b.__private__.newObjectDeferred=function(){return Re++,$e[Re]=function(){return it},Re},Ar=function(le,Ve){return Ve=typeof Ve=="boolean"&&Ve,$e[le]=it,Ve&&je(le+" 0 obj"),le},Dn=b.__private__.newAdditionalObject=function(){var le={objId:wr(),content:""};return Ye.push(le),le},wi=wr(),Lr=wr(),fn=b.__private__.decodeColorString=function(le){var Ve=le.split(" ");if(Ve.length!==2||Ve[1]!=="g"&&Ve[1]!=="G")Ve.length!==5||Ve[4]!=="k"&&Ve[4]!=="K"||(Ve=[(1-Ve[0])*(1-Ve[3]),(1-Ve[1])*(1-Ve[3]),(1-Ve[2])*(1-Ve[3]),"r"]);else{var pt=parseFloat(Ve[0]);Ve=[pt,pt,pt,"r"]}for(var Dt="#",tr=0;tr<3;tr++)Dt+=("0"+Math.floor(255*parseFloat(Ve[tr])).toString(16)).slice(-2);return Dt},gn=b.__private__.encodeColorString=function(le){var Ve;typeof le=="string"&&(le={ch1:le});var pt=le.ch1,Dt=le.ch2,tr=le.ch3,Pr=le.ch4,$r=le.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pt=="string"&&pt.charAt(0)!=="#"){var xn=new ij(pt);if(xn.ok)pt=xn.toHex();else if(!/^\d*\.?\d*$/.test(pt))throw new Error('Invalid color "'+pt+'" passed to jsPDF.encodeColorString.')}if(typeof pt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pt)&&(pt="#"+pt[1]+pt[1]+pt[2]+pt[2]+pt[3]+pt[3]),typeof pt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pt)){var pn=parseInt(pt.substr(1),16);pt=pn>>16&255,Dt=pn>>8&255,tr=255&pn}if(Dt===void 0||Pr===void 0&&pt===Dt&&Dt===tr)Ve=typeof pt=="string"?pt+" "+$r[0]:le.precision===2?ee(pt/255)+" "+$r[0]:G(pt/255)+" "+$r[0];else if(Pr===void 0||Va(Pr)==="object"){if(Pr&&!isNaN(Pr.a)&&Pr.a===0)return["1.","1.","1.",$r[1]].join(" ");Ve=typeof pt=="string"?[pt,Dt,tr,$r[1]].join(" "):le.precision===2?[ee(pt/255),ee(Dt/255),ee(tr/255),$r[1]].join(" "):[G(pt/255),G(Dt/255),G(tr/255),$r[1]].join(" ")}else Ve=typeof pt=="string"?[pt,Dt,tr,Pr,$r[2]].join(" "):le.precision===2?[ee(pt),ee(Dt),ee(tr),ee(Pr),$r[2]].join(" "):[G(pt),G(Dt),G(tr),G(Pr),$r[2]].join(" ");return Ve},_i=b.__private__.getFilters=function(){return l},oi=b.__private__.putStream=function(le){var Ve=(le=le||{}).data||"",pt=le.filters||_i(),Dt=le.alreadyAppliedFilters||[],tr=le.addLength1||!1,Pr=Ve.length,$r=le.objectId,xn=function(Ea){return Ea};if(g!==null&&$r===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(xn=va.encryptor($r,0));var pn={};pt===!0&&(pt=["FlateEncode"]);var Yn=le.additionalKeyValues||[],ei=(pn=ti.API.processDataByFilters!==void 0?ti.API.processDataByFilters(Ve,pt):{data:Ve,reverseChain:[]}).reverseChain+(Array.isArray(Dt)?Dt.join(" "):Dt.toString());if(pn.data.length!==0&&(Yn.push({key:"Length",value:pn.data.length}),tr===!0&&Yn.push({key:"Length1",value:Pr})),ei.length!=0)if(ei.split("/").length-1==1)Yn.push({key:"Filter",value:ei});else{Yn.push({key:"Filter",value:"["+ei+"]"});for(var yi=0;yi<Yn.length;yi+=1)if(Yn[yi].key==="DecodeParms"){for(var Li=[],Ii=0;Ii<pn.reverseChain.split("/").length-1;Ii+=1)Li.push("null");Li.push(Yn[yi].value),Yn[yi].value="["+Li.join(" ")+"]"}}je("<<");for(var mi=0;mi<Yn.length;mi++)je("/"+Yn[mi].key+" "+Yn[mi].value);je(">>"),pn.data.length!==0&&(je("stream"),je(xn(pn.data)),je("endstream"))},Di=b.__private__.putPage=function(le){var Ve=le.number,pt=le.data,Dt=le.objId,tr=le.contentsObjId;Ar(Dt,!0),je("<</Type /Page"),je("/Parent "+le.rootDictionaryObjId+" 0 R"),je("/Resources "+le.resourceDictionaryObjId+" 0 R"),je("/MediaBox ["+parseFloat(H(le.mediaBox.bottomLeftX))+" "+parseFloat(H(le.mediaBox.bottomLeftY))+" "+H(le.mediaBox.topRightX)+" "+H(le.mediaBox.topRightY)+"]"),le.cropBox!==null&&je("/CropBox ["+H(le.cropBox.bottomLeftX)+" "+H(le.cropBox.bottomLeftY)+" "+H(le.cropBox.topRightX)+" "+H(le.cropBox.topRightY)+"]"),le.bleedBox!==null&&je("/BleedBox ["+H(le.bleedBox.bottomLeftX)+" "+H(le.bleedBox.bottomLeftY)+" "+H(le.bleedBox.topRightX)+" "+H(le.bleedBox.topRightY)+"]"),le.trimBox!==null&&je("/TrimBox ["+H(le.trimBox.bottomLeftX)+" "+H(le.trimBox.bottomLeftY)+" "+H(le.trimBox.topRightX)+" "+H(le.trimBox.topRightY)+"]"),le.artBox!==null&&je("/ArtBox ["+H(le.artBox.bottomLeftX)+" "+H(le.artBox.bottomLeftY)+" "+H(le.artBox.topRightX)+" "+H(le.artBox.topRightY)+"]"),typeof le.userUnit=="number"&&le.userUnit!==1&&je("/UserUnit "+le.userUnit),Dr.publish("putPage",{objId:Dt,pageContext:vr[Ve],pageNumber:Ve,page:pt}),je("/Contents "+tr+" 0 R"),je(">>"),je("endobj");var Pr=pt.join(`
`);return N===F&&(Pr+=`
Q`),Ar(tr,!0),oi({data:Pr,filters:_i(),objectId:tr}),je("endobj"),Dt},Pn=b.__private__.putPages=function(){var le,Ve,pt=[];for(le=1;le<=bt;le++)vr[le].objId=wr(),vr[le].contentsObjId=wr();for(le=1;le<=bt;le++)pt.push(Di({number:le,data:rt[le],objId:vr[le].objId,contentsObjId:vr[le].contentsObjId,mediaBox:vr[le].mediaBox,cropBox:vr[le].cropBox,bleedBox:vr[le].bleedBox,trimBox:vr[le].trimBox,artBox:vr[le].artBox,userUnit:vr[le].userUnit,rootDictionaryObjId:wi,resourceDictionaryObjId:Lr}));Ar(wi,!0),je("<</Type /Pages");var Dt="/Kids [";for(Ve=0;Ve<bt;Ve++)Dt+=pt[Ve]+" 0 R ";je(Dt+"]"),je("/Count "+bt),je(">>"),je("endobj"),Dr.publish("postPutPages")},ga=function(le){Dr.publish("putFont",{font:le,out:je,newObject:mt,putStream:oi}),le.isAlreadyPutted!==!0&&(le.objectNumber=mt(),je("<<"),je("/Type /Font"),je("/BaseFont /"+ug(le.postScriptName)),je("/Subtype /Type1"),typeof le.encoding=="string"&&je("/Encoding /"+le.encoding),je("/FirstChar 32"),je("/LastChar 255"),je(">>"),je("endobj"))},na=function(le){le.objectNumber=mt();var Ve=[];Ve.push({key:"Type",value:"/XObject"}),Ve.push({key:"Subtype",value:"/Form"}),Ve.push({key:"BBox",value:"["+[H(le.x),H(le.y),H(le.x+le.width),H(le.y+le.height)].join(" ")+"]"}),Ve.push({key:"Matrix",value:"["+le.matrix.toString()+"]"});var pt=le.pages[1].join(`
`);oi({data:pt,additionalKeyValues:Ve,objectId:le.objectNumber}),je("endobj")},Ni=function(le,Ve){Ve||(Ve=21);var pt=mt(),Dt=(function($r,xn){var pn,Yn=[],ei=1/(xn-1);for(pn=0;pn<1;pn+=ei)Yn.push(pn);if(Yn.push(1),$r[0].offset!=0){var yi={offset:0,color:$r[0].color};$r.unshift(yi)}if($r[$r.length-1].offset!=1){var Li={offset:1,color:$r[$r.length-1].color};$r.push(Li)}for(var Ii="",mi=0,Ea=0;Ea<Yn.length;Ea++){for(pn=Yn[Ea];pn>$r[mi+1].offset;)mi++;var Qi=$r[mi].offset,Fa=(pn-Qi)/($r[mi+1].offset-Qi),Qo=$r[mi].color,Ns=$r[mi+1].color;Ii+=De(Math.round((1-Fa)*Qo[0]+Fa*Ns[0]).toString(16))+De(Math.round((1-Fa)*Qo[1]+Fa*Ns[1]).toString(16))+De(Math.round((1-Fa)*Qo[2]+Fa*Ns[2]).toString(16))}return Ii.trim()})(le.colors,Ve),tr=[];tr.push({key:"FunctionType",value:"0"}),tr.push({key:"Domain",value:"[0.0 1.0]"}),tr.push({key:"Size",value:"["+Ve+"]"}),tr.push({key:"BitsPerSample",value:"8"}),tr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oi({data:Dt,additionalKeyValues:tr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pt}),je("endobj"),le.objectNumber=mt(),je("<< /ShadingType "+le.type),je("/ColorSpace /DeviceRGB");var Pr="/Coords ["+H(parseFloat(le.coords[0]))+" "+H(parseFloat(le.coords[1]))+" ";le.type===2?Pr+=H(parseFloat(le.coords[2]))+" "+H(parseFloat(le.coords[3])):Pr+=H(parseFloat(le.coords[2]))+" "+H(parseFloat(le.coords[3]))+" "+H(parseFloat(le.coords[4]))+" "+H(parseFloat(le.coords[5])),je(Pr+="]"),le.matrix&&je("/Matrix ["+le.matrix.toString()+"]"),je("/Function "+pt+" 0 R"),je("/Extend [true true]"),je(">>"),je("endobj")},Na=function(le,Ve){var pt=wr(),Dt=mt();Ve.push({resourcesOid:pt,objectOid:Dt}),le.objectNumber=Dt;var tr=[];tr.push({key:"Type",value:"/Pattern"}),tr.push({key:"PatternType",value:"1"}),tr.push({key:"PaintType",value:"1"}),tr.push({key:"TilingType",value:"1"}),tr.push({key:"BBox",value:"["+le.boundingBox.map(H).join(" ")+"]"}),tr.push({key:"XStep",value:H(le.xStep)}),tr.push({key:"YStep",value:H(le.yStep)}),tr.push({key:"Resources",value:pt+" 0 R"}),le.matrix&&tr.push({key:"Matrix",value:"["+le.matrix.toString()+"]"}),oi({data:le.stream,additionalKeyValues:tr,objectId:le.objectNumber}),je("endobj")},ua=function(le){for(var Ve in le.objectNumber=mt(),je("<<"),le)switch(Ve){case"opacity":je("/ca "+ee(le[Ve]));break;case"stroke-opacity":je("/CA "+ee(le[Ve]))}je(">>"),je("endobj")},Mi=function(le){Ar(le.resourcesOid,!0),je("<<"),je("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Ve in je("/Font <<"),ot)ot.hasOwnProperty(Ve)&&(v===!1||v===!0&&x.hasOwnProperty(Ve))&&je("/"+Ve+" "+ot[Ve].objectNumber+" 0 R");je(">>")})(),(function(){if(Object.keys(vt).length>0){for(var Ve in je("/Shading <<"),vt)vt.hasOwnProperty(Ve)&&vt[Ve]instanceof Cp&&vt[Ve].objectNumber>=0&&je("/"+Ve+" "+vt[Ve].objectNumber+" 0 R");Dr.publish("putShadingPatternDict"),je(">>")}})(),(function(Ve){if(Object.keys(vt).length>0){for(var pt in je("/Pattern <<"),vt)vt.hasOwnProperty(pt)&&vt[pt]instanceof b.TilingPattern&&vt[pt].objectNumber>=0&&vt[pt].objectNumber<Ve&&je("/"+pt+" "+vt[pt].objectNumber+" 0 R");Dr.publish("putTilingPatternDict"),je(">>")}})(le.objectOid),(function(){if(Object.keys(Kt).length>0){var Ve;for(Ve in je("/ExtGState <<"),Kt)Kt.hasOwnProperty(Ve)&&Kt[Ve].objectNumber>=0&&je("/"+Ve+" "+Kt[Ve].objectNumber+" 0 R");Dr.publish("putGStateDict"),je(">>")}})(),(function(){for(var Ve in je("/XObject <<"),Ur)Ur.hasOwnProperty(Ve)&&Ur[Ve].objectNumber>=0&&je("/"+Ve+" "+Ur[Ve].objectNumber+" 0 R");Dr.publish("putXobjectDict"),je(">>")})(),je(">>"),je("endobj")},Ua=function(le){et[le.fontName]=et[le.fontName]||{},et[le.fontName][le.fontStyle]=le.id},Oa=function(le,Ve,pt,Dt,tr){var Pr={id:"F"+(Object.keys(ot).length+1).toString(10),postScriptName:le,fontName:Ve,fontStyle:pt,encoding:Dt,isStandardFont:tr||!1,metadata:{}};return Dr.publish("addFont",{font:Pr,instance:this}),ot[Pr.id]=Pr,Ua(Pr),Pr.id},Nn=b.__private__.pdfEscape=b.pdfEscape=function(le,Ve){return(function(pt,Dt){var tr,Pr,$r,xn,pn,Yn,ei,yi,Li;if($r=(Dt=Dt||{}).sourceEncoding||"Unicode",pn=Dt.outputEncoding,(Dt.autoencode||pn)&&ot[nt].metadata&&ot[nt].metadata[$r]&&ot[nt].metadata[$r].encoding&&(xn=ot[nt].metadata[$r].encoding,!pn&&ot[nt].encoding&&(pn=ot[nt].encoding),!pn&&xn.codePages&&(pn=xn.codePages[0]),typeof pn=="string"&&(pn=xn[pn]),pn)){for(ei=!1,Yn=[],tr=0,Pr=pt.length;tr<Pr;tr++)(yi=pn[pt.charCodeAt(tr)])?Yn.push(String.fromCharCode(yi)):Yn.push(pt[tr]),Yn[tr].charCodeAt(0)>>8&&(ei=!0);pt=Yn.join("")}for(tr=pt.length;ei===void 0&&tr!==0;)pt.charCodeAt(tr-1)>>8&&(ei=!0),tr--;if(!ei)return pt;for(Yn=Dt.noBOM?[]:[254,255],tr=0,Pr=pt.length;tr<Pr;tr++){if((Li=(yi=pt.charCodeAt(tr))>>8)>>8)throw new Error("Character at position "+tr+" of string '"+pt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yn.push(Li),Yn.push(yi-(Li<<8))}return String.fromCharCode.apply(void 0,Yn)})(le,Ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gl=b.__private__.beginPage=function(le){rt[++bt]=[],vr[bt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(le[0]),topRightY:Number(le[1])}},ca(bt),at(rt[Se])},Tl=function(le,Ve){var pt,Dt,tr;switch(r=Ve||r,typeof le=="string"&&(pt=M(le.toLowerCase()),Array.isArray(pt)&&(Dt=pt[0],tr=pt[1])),Array.isArray(le)&&(Dt=le[0]*be,tr=le[1]*be),isNaN(Dt)&&(Dt=i[0],tr=i[1]),(Dt>14400||tr>14400)&&(ao.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Dt=Math.min(14400,Dt),tr=Math.min(14400,tr)),i=[Dt,tr],r.substr(0,1)){case"l":tr>Dt&&(i=[tr,Dt]);break;case"p":Dt>tr&&(i=[tr,Dt])}Gl(i),Cr(mn),je($o),oo!==0&&je(oo+" J"),Io!==0&&je(Io+" j"),Dr.publish("addPage",{pageNumber:bt})},ya=function(le){le>0&&le<=bt&&(rt.splice(le,1),vr.splice(le,1),bt--,Se>bt&&(Se=bt),this.setPage(Se))},ca=function(le){le>0&&le<=bt&&(Se=le)},To=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return rt.length-1},go=function(le,Ve,pt){var Dt,tr=void 0;return pt=pt||{},le=le!==void 0?le:ot[nt].fontName,Ve=Ve!==void 0?Ve:ot[nt].fontStyle,Dt=le.toLowerCase(),et[Dt]!==void 0&&et[Dt][Ve]!==void 0?tr=et[Dt][Ve]:et[le]!==void 0&&et[le][Ve]!==void 0?tr=et[le][Ve]:pt.disableWarning===!1&&ao.warn("Unable to look up font label for font '"+le+"', '"+Ve+"'. Refer to getFontList() for available fonts."),tr||pt.noFallback||(tr=et.times[Ve])==null&&(tr=et.times.normal),tr},qo=b.__private__.putInfo=function(){var le=mt(),Ve=function(Dt){return Dt};for(var pt in g!==null&&(Ve=va.encryptor(le,0)),je("<<"),je("/Producer ("+Nn(Ve("jsPDF "+ti.version))+")"),rr)rr.hasOwnProperty(pt)&&rr[pt]&&je("/"+pt.substr(0,1).toUpperCase()+pt.substr(1)+" ("+Nn(Ve(rr[pt]))+")");je("/CreationDate ("+Nn(Ve(ue))+")"),je(">>"),je("endobj")},Xu=b.__private__.putCatalog=function(le){var Ve=(le=le||{}).rootDictionaryObjId||wi;switch(mt(),je("<<"),je("/Type /Catalog"),je("/Pages "+Ve+" 0 R"),sr||(sr="fullwidth"),sr){case"fullwidth":je("/OpenAction [3 0 R /FitH null]");break;case"fullheight":je("/OpenAction [3 0 R /FitV null]");break;case"fullpage":je("/OpenAction [3 0 R /Fit]");break;case"original":je("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pt=""+sr;pt.substr(pt.length-1)==="%"&&(sr=parseInt(sr)/100),typeof sr=="number"&&je("/OpenAction [3 0 R /XYZ null null "+ee(sr)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":je("/PageLayout /OneColumn");break;case"single":je("/PageLayout /SinglePage");break;case"two":case"twoleft":je("/PageLayout /TwoColumnLeft");break;case"tworight":je("/PageLayout /TwoColumnRight")}yr&&je("/PageMode /"+yr),Dr.publish("putCatalog"),je(">>"),je("endobj")},da=b.__private__.putTrailer=function(){je("trailer"),je("<<"),je("/Size "+(Re+1)),je("/Root "+Re+" 0 R"),je("/Info "+(Re-1)+" 0 R"),g!==null&&je("/Encrypt "+va.oid+" 0 R"),je("/ID [ <"+de+"> <"+de+"> ]"),je(">>")},Yu=b.__private__.putHeader=function(){je("%PDF-"+P),je("%")},Zu=b.__private__.putXRef=function(){var le="0000000000";je("xref"),je("0 "+(Re+1)),je("0000000000 65535 f ");for(var Ve=1;Ve<=Re;Ve++)typeof $e[Ve]=="function"?je((le+$e[Ve]()).slice(-10)+" 00000 n "):$e[Ve]!==void 0?je((le+$e[Ve]).slice(-10)+" 00000 n "):je("0000000000 00000 n ")},Ws=b.__private__.buildDocument=function(){var le;Re=0,it=0,Oe=[],$e=[],Ye=[],wi=wr(),Lr=wr(),at(Oe),Dr.publish("buildDocument"),Yu(),Pn(),(function(){Dr.publish("putAdditionalObjects");for(var pt=0;pt<Ye.length;pt++){var Dt=Ye[pt];Ar(Dt.objId,!0),je(Dt.content),je("endobj")}Dr.publish("postPutAdditionalObjects")})(),le=[],(function(){for(var pt in ot)ot.hasOwnProperty(pt)&&(v===!1||v===!0&&x.hasOwnProperty(pt))&&ga(ot[pt])})(),(function(){var pt;for(pt in Kt)Kt.hasOwnProperty(pt)&&ua(Kt[pt])})(),(function(){for(var pt in Ur)Ur.hasOwnProperty(pt)&&na(Ur[pt])})(),(function(pt){var Dt;for(Dt in vt)vt.hasOwnProperty(Dt)&&(vt[Dt]instanceof Cp?Ni(vt[Dt]):vt[Dt]instanceof Ag&&Na(vt[Dt],pt))})(le),Dr.publish("putResources"),le.forEach(Mi),Mi({resourcesOid:Lr,objectOid:Number.MAX_SAFE_INTEGER}),Dr.publish("postPutResources"),g!==null&&(va.oid=mt(),je("<<"),je("/Filter /Standard"),je("/V "+va.v),je("/R "+va.r),je("/U <"+va.toHexString(va.U)+">"),je("/O <"+va.toHexString(va.O)+">"),je("/P "+va.P),je(">>"),je("endobj")),qo(),Xu();var Ve=it;return Zu(),da(),je("startxref"),je(""+Ve),je("%%EOF"),at(rt[Se]),Oe.join(`
`)},Ms=b.__private__.getBlob=function(le){return new Blob([Wt(le)],{type:"application/pdf"})},Ma=b.output=b.__private__.output=(gt=function(le,Ve){switch(typeof(Ve=Ve||{})=="string"?Ve={filename:Ve}:Ve.filename=Ve.filename||"generated.pdf",le){case void 0:return Ws();case"save":b.save(Ve.filename);break;case"arraybuffer":return Wt(Ws());case"blob":return Ms(Ws());case"bloburi":case"bloburl":if(xi.URL!==void 0&&typeof xi.URL.createObjectURL=="function")return xi.URL&&xi.URL.createObjectURL(Ms(Ws()))||void 0;ao.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pt="",Dt=Ws();try{pt=mD(Dt)}catch{pt=mD(unescape(encodeURIComponent(Dt)))}return"data:application/pdf;filename="+Ve.filename+";base64,"+pt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xi)==="[object Window]"){var tr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ve.pdfObjectUrl&&(tr=Ve.pdfObjectUrl,Pr="");var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+tr+'"'+Pr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ve)+");<\/script></body></html>",xn=xi.open();return xn!==null&&xn.document.write($r),xn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xi)==="[object Window]"){var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ve.filename+'" width="500px" height="400px" /></body></html>',Yn=xi.open();if(Yn!==null){Yn.document.write(pn);var ei=this;Yn.document.documentElement.querySelector("#pdfViewer").onload=function(){Yn.document.title=Ve.filename,Yn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ei.output("bloburl"))}}return Yn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xi)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ve)+'"></iframe></body></html>',Li=xi.open();if(Li!==null&&(Li.document.write(yi),Li.document.title=Ve.filename),Li||typeof safari>"u")return Li;break;case"datauri":case"dataurl":return xi.document.location.href=this.output("datauristring",Ve);default:return null}},gt.foo=function(){try{return gt.apply(this,arguments)}catch(pt){var le=pt.stack||"";~le.indexOf(" at ")&&(le=le.split(" at ")[1]);var Ve="Error in function "+le.split(`
`)[0].split("<")[0]+": "+pt.message;if(!xi.console)throw new Error(Ve);xi.console.error(Ve,pt),xi.alert&&alert(Ve)}},gt.foo.bar=gt,gt.foo),Ga=function(le){return Array.isArray(jr)===!0&&jr.indexOf(le)>-1};switch(n){case"pt":be=1;break;case"mm":be=72/25.4;break;case"cm":be=72/2.54;break;case"in":be=72;break;case"px":be=Ga("px_scaling")==1?.75:96/72;break;case"pc":case"em":be=12;break;case"ex":be=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);be=n}var va=null;Ae(),ge();var Ls=b.__private__.getPageInfo=b.getPageInfo=function(le){if(isNaN(le)||le%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vr[le].objId,pageNumber:le,pageContext:vr[le]}},Hl=b.__private__.getPageInfoByObjId=function(le){if(isNaN(le)||le%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ve in vr)if(vr[Ve].objId===le)break;return Ls(Ve)},Wl=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:vr[Se].objId,pageNumber:Se,pageContext:vr[Se]}};b.addPage=function(){return Tl.apply(this,arguments),this},b.setPage=function(){return ca.apply(this,arguments),at.call(this,rt[Se]),this},b.insertPage=function(le){return this.addPage(),this.movePage(Se,le),this},b.movePage=function(le,Ve){var pt,Dt;if(le>Ve){pt=rt[le],Dt=vr[le];for(var tr=le;tr>Ve;tr--)rt[tr]=rt[tr-1],vr[tr]=vr[tr-1];rt[Ve]=pt,vr[Ve]=Dt,this.setPage(Ve)}else if(le<Ve){pt=rt[le],Dt=vr[le];for(var Pr=le;Pr<Ve;Pr++)rt[Pr]=rt[Pr+1],vr[Pr]=vr[Pr+1];rt[Ve]=pt,vr[Ve]=Dt,this.setPage(Ve)}return this},b.deletePage=function(){return ya.apply(this,arguments),this},b.__private__.text=b.text=function(le,Ve,pt,Dt,tr){var Pr,$r,xn,pn,Yn,ei,yi,Li,Ii,mi=(Dt=Dt||{}).scope||this;if(typeof le=="number"&&typeof Ve=="number"&&(typeof pt=="string"||Array.isArray(pt))){var Ea=pt;pt=Ve,Ve=le,le=Ea}if(arguments[3]instanceof en==0?(xn=arguments[4],pn=arguments[5],Va(yi=arguments[3])==="object"&&yi!==null||(typeof xn=="string"&&(pn=xn,xn=null),typeof yi=="string"&&(pn=yi,yi=null),typeof yi=="number"&&(xn=yi,yi=null),Dt={flags:yi,angle:xn,align:pn})):(Y("The transform parameter of text() with a Matrix value"),Ii=tr),isNaN(Ve)||isNaN(pt)||le==null)throw new Error("Invalid arguments passed to jsPDF.text");if(le.length===0)return mi;var Qi,Fa="",Qo=typeof Dt.lineHeightFactor=="number"?Dt.lineHeightFactor:pi,Ns=mi.internal.scaleFactor;function Xl(vn){return vn=vn.split("	").join(Array(Dt.TabLen||9).join(" ")),Nn(vn,yi)}function vo(vn){for(var E,m=vn.concat(),y=[],T=m.length;T--;)typeof(E=m.shift())=="string"?y.push(E):Array.isArray(vn)&&(E.length===1||E[1]===void 0&&E[2]===void 0)?y.push(E[0]):y.push([E[0],E[1],E[2]]);return y}function sl(vn,E){var m;if(typeof vn=="string")m=E(vn)[0];else if(Array.isArray(vn)){for(var y,T,z=vn.concat(),re=[],ye=z.length;ye--;)typeof(y=z.shift())=="string"?re.push(E(y)[0]):Array.isArray(y)&&typeof y[0]=="string"&&(T=E(y[0],y[1],y[2]),re.push([T[0],T[1],T[2]]));m=re}return m}var Wi=!1,Zs=!0;if(typeof le=="string")Wi=!0;else if(Array.isArray(le)){var Il=le.concat();$r=[];for(var Xa,Ba=Il.length;Ba--;)(typeof(Xa=Il.shift())!="string"||Array.isArray(Xa)&&typeof Xa[0]!="string")&&(Zs=!1);Wi=Zs}if(Wi===!1)throw new Error('Type of text must be string or Array. "'+le+'" is not recognized.');typeof le=="string"&&(le=le.match(/[\r?\n]/)?le.split(/\r\n|\r|\n/g):[le]);var ro=st/mi.internal.scaleFactor,Ta=ro*(Qo-1);switch(Dt.baseline){case"bottom":pt-=Ta;break;case"top":pt+=ro-Ta;break;case"hanging":pt+=ro-2*Ta;break;case"middle":pt+=ro/2-Ta}if((ei=Dt.maxWidth||0)>0&&(typeof le=="string"?le=mi.splitTextToSize(le,ei):Object.prototype.toString.call(le)==="[object Array]"&&(le=le.reduce(function(vn,E){return vn.concat(mi.splitTextToSize(E,ei))},[]))),Pr={text:le,x:Ve,y:pt,options:Dt,mutex:{pdfEscape:Nn,activeFontKey:nt,fonts:ot,activeFontSize:st}},Dr.publish("preProcessText",Pr),le=Pr.text,xn=(Dt=Pr.options).angle,Ii instanceof en==0&&xn&&typeof xn=="number"){xn*=Math.PI/180,Dt.rotationDirection===0&&(xn=-xn),N===F&&(xn=-xn);var ko=Math.cos(xn),Yl=Math.sin(xn);Ii=new en(ko,Yl,-Yl,ko,0,0)}else xn&&xn instanceof en&&(Ii=xn);N!==F||Ii||(Ii=Pe),(Yn=Dt.charSpace||jn)!==void 0&&(Fa+=H(ie(Yn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Li=Dt.horizontalScale)!==void 0&&(Fa+=H(100*Li)+` Tz
`),Dt.lang;var fa=-1,wc=Dt.renderingMode!==void 0?Dt.renderingMode:Dt.stroke,Vo=mi.internal.getCurrentPageInfo().pageContext;switch(wc){case 0:case!1:case"fill":fa=0;break;case 1:case!0:case"stroke":fa=1;break;case 2:case"fillThenStroke":fa=2;break;case 3:case"invisible":fa=3;break;case 4:case"fillAndAddForClipping":fa=4;break;case 5:case"strokeAndAddPathForClipping":fa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fa=6;break;case 7:case"addToPathForClipping":fa=7}var kl=Vo.usedRenderingMode!==void 0?Vo.usedRenderingMode:-1;fa!==-1?Fa+=fa+` Tr
`:kl!==-1&&(Fa+=`0 Tr
`),fa!==-1&&(Vo.usedRenderingMode=fa),pn=Dt.align||"left";var La,ps=st*Qo,fu=mi.internal.pageSize.getWidth(),hu=ot[nt];Yn=Dt.charSpace||jn,ei=Dt.maxWidth||0,yi=Object.assign({autoencode:!0,noBOM:!0},Dt.flags);var Ks=[],ll=function(vn){return mi.getStringUnitWidth(vn,{font:hu,charSpace:Yn,fontSize:st,doKerning:!1})*st/Ns};if(Object.prototype.toString.call(le)==="[object Array]"){var lo;$r=vo(le),pn!=="left"&&(La=$r.map(ll));var Ya,ms=0;if(pn==="right"){Ve-=La[0],le=[],Ba=$r.length;for(var no=0;no<Ba;no++)no===0?(Ya=gi(Ve),lo=_a(pt)):(Ya=ie(ms-La[no]),lo=-ps),le.push([$r[no],Ya,lo]),ms=La[no]}else if(pn==="center"){Ve-=La[0]/2,le=[],Ba=$r.length;for(var ul=0;ul<Ba;ul++)ul===0?(Ya=gi(Ve),lo=_a(pt)):(Ya=ie((ms-La[ul])/2),lo=-ps),le.push([$r[ul],Ya,lo]),ms=La[ul]}else if(pn==="left"){le=[],Ba=$r.length;for(var Uo=0;Uo<Ba;Uo++)le.push($r[Uo])}else if(pn==="justify"&&hu.encoding==="Identity-H"){le=[],Ba=$r.length,ei=ei!==0?ei:fu;for(var cl=0,ia=0;ia<Ba;ia++)if(lo=ia===0?_a(pt):-ps,Ya=ia===0?gi(Ve):cl,ia<Ba-1){var Zl=ie((ei-La[ia])/($r[ia].split(" ").length-1)),Os=$r[ia].split(" ");le.push([Os[0]+" ",Ya,lo]),cl=0;for(var gs=1;gs<Os.length;gs++){var dl=(ll(Os[gs-1]+" "+Os[gs])-ll(Os[gs]))*Ns+Zl;gs==Os.length-1?le.push([Os[gs],dl,0]):le.push([Os[gs]+" ",dl,0]),cl-=dl}}else le.push([$r[ia],Ya,lo]);le.push(["",cl,0])}else{if(pn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(le=[],Ba=$r.length,ei=ei!==0?ei:fu,ia=0;ia<Ba;ia++)lo=ia===0?_a(pt):-ps,Ya=ia===0?gi(Ve):0,ia<Ba-1?Ks.push(H(ie((ei-La[ia])/($r[ia].split(" ").length-1)))):Ks.push(0),le.push([$r[ia],Ya,lo])}}(typeof Dt.R2L=="boolean"?Dt.R2L:ar)===!0&&(le=sl(le,function(vn,E,m){return[vn.split("").reverse().join(""),E,m]})),Pr={text:le,x:Ve,y:pt,options:Dt,mutex:{pdfEscape:Nn,activeFontKey:nt,fonts:ot,activeFontSize:st}},Dr.publish("postProcessText",Pr),le=Pr.text,Qi=Pr.mutex.isHex||!1;var Kl=ot[nt].encoding;Kl!=="WinAnsiEncoding"&&Kl!=="StandardEncoding"||(le=sl(le,function(vn,E,m){return[Xl(vn),E,m]})),$r=vo(le),le=[];for(var ys,Al,fl,$t=Array.isArray($r[0])?1:0,er="",Jr=function(vn,E,m){var y="";return m instanceof en?(m=typeof Dt.angle=="number"?Wn(m,new en(1,0,0,1,vn,E)):Wn(new en(1,0,0,1,vn,E),m),N===F&&(m=Wn(new en(1,0,0,-1,0,0),m)),y=m.join(" ")+` Tm
`):y=H(vn)+" "+H(E)+` Td
`,y},yn=0;yn<$r.length;yn++){switch(er="",$t){case 1:fl=(Qi?"<":"(")+$r[yn][0]+(Qi?">":")"),ys=parseFloat($r[yn][1]),Al=parseFloat($r[yn][2]);break;case 0:fl=(Qi?"<":"(")+$r[yn]+(Qi?">":")"),ys=gi(Ve),Al=_a(pt)}Ks!==void 0&&Ks[yn]!==void 0&&(er=Ks[yn]+` Tw
`),yn===0?le.push(er+Jr(ys,Al,Ii)+fl):$t===0?le.push(er+fl):$t===1&&le.push(er+Jr(ys,Al,Ii)+fl)}le=$t===0?le.join(` Tj
T* `):le.join(` Tj
`),le+=` Tj
`;var di=`BT
/`;return di+=nt+" "+st+` Tf
`,di+=H(st*Qo)+` TL
`,di+=En+`
`,di+=Fa,di+=le,je(di+="ET"),x[nt]=!0,mi};var J=b.__private__.clip=b.clip=function(le){return je(le==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return J("evenodd")},b.__private__.discardPath=b.discardPath=function(){return je("n"),this};var pe=b.__private__.isValidStyle=function(le){var Ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(le)!==-1&&(Ve=!0),Ve};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(le){return pe(le)&&(p=le),this};var Xe=b.__private__.getStyle=b.getStyle=function(le){var Ve=p;switch(le){case"D":case"S":Ve="S";break;case"F":Ve="f";break;case"FD":case"DF":Ve="B";break;case"f":case"f*":case"B":case"B*":Ve=le}return Ve},Ct=b.close=function(){return je("h"),this};b.stroke=function(){return je("S"),this},b.fill=function(le){return Rt("f",le),this},b.fillEvenOdd=function(le){return Rt("f*",le),this},b.fillStroke=function(le){return Rt("B",le),this},b.fillStrokeEvenOdd=function(le){return Rt("B*",le),this};var Rt=function(le,Ve){Va(Ve)==="object"?Or(Ve,le):je(le)},kt=function(le){le===null||N===F&&le===void 0||(le=Xe(le),je(le))};function Xt(le,Ve,pt,Dt,tr){var Pr=new Ag(Ve||this.boundingBox,pt||this.xStep,Dt||this.yStep,this.gState,tr||this.matrix);Pr.stream=this.stream;var $r=le+"$$"+this.cloneIndex+++"$$";return Be($r,Pr),Pr}var Or=function(le,Ve){var pt=Bt[le.key],Dt=vt[pt];if(Dt instanceof Cp)je("q"),je(qr(Ve)),Dt.gState&&b.setGState(Dt.gState),je(le.matrix.toString()+" cm"),je("/"+pt+" sh"),je("Q");else if(Dt instanceof Ag){var tr=new en(1,0,0,-1,0,Gi());le.matrix&&(tr=tr.multiply(le.matrix||Pe),pt=Xt.call(Dt,le.key,le.boundingBox,le.xStep,le.yStep,tr).id),je("q"),je("/Pattern cs"),je("/"+pt+" scn"),Dt.gState&&b.setGState(Dt.gState),je(Ve),je("Q")}},qr=function(le){switch(le){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Br=b.moveTo=function(le,Ve){return je(H(ie(le))+" "+H(oe(Ve))+" m"),this},Sr=b.lineTo=function(le,Ve){return je(H(ie(le))+" "+H(oe(Ve))+" l"),this},Gr=b.curveTo=function(le,Ve,pt,Dt,tr,Pr){return je([H(ie(le)),H(oe(Ve)),H(ie(pt)),H(oe(Dt)),H(ie(tr)),H(oe(Pr)),"c"].join(" ")),this};b.__private__.line=b.line=function(le,Ve,pt,Dt,tr){if(isNaN(le)||isNaN(Ve)||isNaN(pt)||isNaN(Dt)||!pe(tr))throw new Error("Invalid arguments passed to jsPDF.line");return N===O?this.lines([[pt-le,Dt-Ve]],le,Ve,[1,1],tr||"S"):this.lines([[pt-le,Dt-Ve]],le,Ve,[1,1]).stroke()},b.__private__.lines=b.lines=function(le,Ve,pt,Dt,tr,Pr){var $r,xn,pn,Yn,ei,yi,Li,Ii,mi,Ea,Qi,Fa;if(typeof le=="number"&&(Fa=pt,pt=Ve,Ve=le,le=Fa),Dt=Dt||[1,1],Pr=Pr||!1,isNaN(Ve)||isNaN(pt)||!Array.isArray(le)||!Array.isArray(Dt)||!pe(tr)||typeof Pr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Br(Ve,pt),$r=Dt[0],xn=Dt[1],Yn=le.length,Ea=Ve,Qi=pt,pn=0;pn<Yn;pn++)(ei=le[pn]).length===2?(Ea=ei[0]*$r+Ea,Qi=ei[1]*xn+Qi,Sr(Ea,Qi)):(yi=ei[0]*$r+Ea,Li=ei[1]*xn+Qi,Ii=ei[2]*$r+Ea,mi=ei[3]*xn+Qi,Ea=ei[4]*$r+Ea,Qi=ei[5]*xn+Qi,Gr(yi,Li,Ii,mi,Ea,Qi));return Pr&&Ct(),kt(tr),this},b.path=function(le){for(var Ve=0;Ve<le.length;Ve++){var pt=le[Ve],Dt=pt.c;switch(pt.op){case"m":Br(Dt[0],Dt[1]);break;case"l":Sr(Dt[0],Dt[1]);break;case"c":Gr.apply(this,Dt);break;case"h":Ct()}}return this},b.__private__.rect=b.rect=function(le,Ve,pt,Dt,tr){if(isNaN(le)||isNaN(Ve)||isNaN(pt)||isNaN(Dt)||!pe(tr))throw new Error("Invalid arguments passed to jsPDF.rect");return N===O&&(Dt=-Dt),je([H(ie(le)),H(oe(Ve)),H(ie(pt)),H(ie(Dt)),"re"].join(" ")),kt(tr),this},b.__private__.triangle=b.triangle=function(le,Ve,pt,Dt,tr,Pr,$r){if(isNaN(le)||isNaN(Ve)||isNaN(pt)||isNaN(Dt)||isNaN(tr)||isNaN(Pr)||!pe($r))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pt-le,Dt-Ve],[tr-pt,Pr-Dt],[le-tr,Ve-Pr]],le,Ve,[1,1],$r,!0),this},b.__private__.roundedRect=b.roundedRect=function(le,Ve,pt,Dt,tr,Pr,$r){if(isNaN(le)||isNaN(Ve)||isNaN(pt)||isNaN(Dt)||isNaN(tr)||isNaN(Pr)||!pe($r))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xn=4/3*(Math.SQRT2-1);return tr=Math.min(tr,.5*pt),Pr=Math.min(Pr,.5*Dt),this.lines([[pt-2*tr,0],[tr*xn,0,tr,Pr-Pr*xn,tr,Pr],[0,Dt-2*Pr],[0,Pr*xn,-tr*xn,Pr,-tr,Pr],[2*tr-pt,0],[-tr*xn,0,-tr,-Pr*xn,-tr,-Pr],[0,2*Pr-Dt],[0,-Pr*xn,tr*xn,-Pr,tr,-Pr]],le+tr,Ve,[1,1],$r,!0),this},b.__private__.ellipse=b.ellipse=function(le,Ve,pt,Dt,tr){if(isNaN(le)||isNaN(Ve)||isNaN(pt)||isNaN(Dt)||!pe(tr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pr=4/3*(Math.SQRT2-1)*pt,$r=4/3*(Math.SQRT2-1)*Dt;return Br(le+pt,Ve),Gr(le+pt,Ve-$r,le+Pr,Ve-Dt,le,Ve-Dt),Gr(le-Pr,Ve-Dt,le-pt,Ve-$r,le-pt,Ve),Gr(le-pt,Ve+$r,le-Pr,Ve+Dt,le,Ve+Dt),Gr(le+Pr,Ve+Dt,le+pt,Ve+$r,le+pt,Ve),kt(tr),this},b.__private__.circle=b.circle=function(le,Ve,pt,Dt){if(isNaN(le)||isNaN(Ve)||isNaN(pt)||!pe(Dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(le,Ve,pt,pt,Dt)},b.setFont=function(le,Ve,pt){return pt&&(Ve=U(Ve,pt)),nt=go(le,Ve,{disableWarning:!1}),this};var Un=b.__private__.getFont=b.getFont=function(){return ot[go.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var le,Ve,pt={};for(le in et)if(et.hasOwnProperty(le))for(Ve in pt[le]=[],et[le])et[le].hasOwnProperty(Ve)&&pt[le].push(Ve);return pt},b.addFont=function(le,Ve,pt,Dt,tr){var Pr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pr.indexOf(arguments[3])!==-1?tr=arguments[3]:arguments[3]&&Pr.indexOf(arguments[3])==-1&&(pt=U(pt,Dt)),Oa.call(this,le,Ve,pt,tr=tr||"Identity-H")};var pi,mn=e.lineWidth||.200025,an=b.__private__.getLineWidth=b.getLineWidth=function(){return mn},Cr=b.__private__.setLineWidth=b.setLineWidth=function(le){return mn=le,je(H(ie(le))+" w"),this};b.__private__.setLineDash=ti.API.setLineDash=ti.API.setLineDashPattern=function(le,Ve){if(le=le||[],Ve=Ve||0,isNaN(Ve)||!Array.isArray(le))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return le=le.map(function(pt){return H(ie(pt))}).join(" "),Ve=H(ie(Ve)),je("["+le+"] "+Ve+" d"),this};var tn=b.__private__.getLineHeight=b.getLineHeight=function(){return st*pi};b.__private__.getLineHeight=b.getLineHeight=function(){return st*pi};var On=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(le){return typeof(le=le||1.15)=="number"&&(pi=le),this},ba=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return pi};On(e.lineHeight);var gi=b.__private__.getHorizontalCoordinate=function(le){return ie(le)},_a=b.__private__.getVerticalCoordinate=function(le){return N===F?le:vr[Se].mediaBox.topRightY-vr[Se].mediaBox.bottomLeftY-ie(le)},si=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(le){return H(gi(le))},An=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(le){return H(_a(le))},$o=e.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return fn($o)},b.__private__.setStrokeColor=b.setDrawColor=function(le,Ve,pt,Dt){return $o=gn({ch1:le,ch2:Ve,ch3:pt,ch4:Dt,pdfColorType:"draw",precision:2}),je($o),this};var Mn=e.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return fn(Mn)},b.__private__.setFillColor=b.setFillColor=function(le,Ve,pt,Dt){return Mn=gn({ch1:le,ch2:Ve,ch3:pt,ch4:Dt,pdfColorType:"fill",precision:2}),je(Mn),this};var En=e.textColor||"0 g",Po=b.__private__.getTextColor=b.getTextColor=function(){return fn(En)};b.__private__.setTextColor=b.setTextColor=function(le,Ve,pt,Dt){return En=gn({ch1:le,ch2:Ve,ch3:pt,ch4:Dt,pdfColorType:"text",precision:3}),this};var jn=e.charSpace,yo=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(jn||0)};b.__private__.setCharSpace=b.setCharSpace=function(le){if(isNaN(le))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return jn=le,this};var oo=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(le){var Ve=b.CapJoinStyles[le];if(Ve===void 0)throw new Error("Line cap style of '"+le+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return oo=Ve,je(Ve+" J"),this};var Io=0;b.__private__.setLineJoin=b.setLineJoin=function(le){var Ve=b.CapJoinStyles[le];if(Ve===void 0)throw new Error("Line join style of '"+le+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Io=Ve,je(Ve+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(le){if(le=le||0,isNaN(le))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return je(H(ie(le))+" M"),this},b.GState=U_,b.setGState=function(le){(le=typeof le=="string"?Kt[Zt[le]]:Rs(null,le)).equals(Er)||(je("/"+le.id+" gs"),Er=le)};var Rs=function(le,Ve){if(!le||!Zt[le]){var pt=!1;for(var Dt in Kt)if(Kt.hasOwnProperty(Dt)&&Kt[Dt].equals(Ve)){pt=!0;break}if(pt)Ve=Kt[Dt];else{var tr="GS"+(Object.keys(Kt).length+1).toString(10);Kt[tr]=Ve,Ve.id=tr}return le&&(Zt[le]=Ve.id),Dr.publish("addGState",Ve),Ve}};b.addGState=function(le,Ve){return Rs(le,Ve),this},b.saveGraphicsState=function(){return je("q"),Lt.push({key:nt,size:st,color:En}),this},b.restoreGraphicsState=function(){je("Q");var le=Lt.pop();return nt=le.key,st=le.size,En=le.color,Er=null,this},b.setCurrentTransformationMatrix=function(le){return je(le.toString()+" cm"),this},b.comment=function(le){return je("#"+le),this};var Pl=function(le,Ve){var pt=le||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pt},set:function(Pr){isNaN(Pr)||(pt=parseFloat(Pr))}});var Dt=Ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Dt},set:function(Pr){isNaN(Pr)||(Dt=parseFloat(Pr))}});var tr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return tr},set:function(Pr){tr=Pr.toString()}}),this},Xs=function(le,Ve,pt,Dt){Pl.call(this,le,Ve),this.type="rect";var tr=pt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return tr},set:function($r){isNaN($r)||(tr=parseFloat($r))}});var Pr=Dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pr},set:function($r){isNaN($r)||(Pr=parseFloat($r))}}),this},so=function(){this.page=bt,this.currentPage=Se,this.pages=rt.slice(0),this.pagesContext=vr.slice(0),this.x=_e,this.y=Ue,this.matrix=Qe,this.width=Ha(Se),this.height=Gi(Se),this.outputDestination=It,this.id="",this.objectNumber=-1};so.prototype.restore=function(){bt=this.page,Se=this.currentPage,vr=this.pagesContext,rt=this.pages,_e=this.x,Ue=this.y,Qe=this.matrix,Wa(Se,this.width),Ca(Se,this.height),It=this.outputDestination};var Ds=function(le,Ve,pt,Dt,tr){Hn.push(new so),bt=Se=0,rt=[],_e=le,Ue=Ve,Qe=tr,Gl([pt,Dt])};for(var Ys in b.beginFormObject=function(le,Ve,pt,Dt,tr){return Ds(le,Ve,pt,Dt,tr),this},b.endFormObject=function(le){return(function(Ve){if(nr[Ve])Hn.pop().restore();else{var pt=new so,Dt="Xo"+(Object.keys(Ur).length+1).toString(10);pt.id=Dt,nr[Ve]=Dt,Ur[Dt]=pt,Dr.publish("addFormObject",pt),Hn.pop().restore()}})(le),this},b.doFormObject=function(le,Ve){var pt=Ur[nr[le]];return je("q"),je(Ve.toString()+" cm"),je("/"+pt.id+" Do"),je("Q"),this},b.getFormObject=function(le){var Ve=Ur[nr[le]];return{x:Ve.x,y:Ve.y,width:Ve.width,height:Ve.height,matrix:Ve.matrix}},b.save=function(le,Ve){return le=le||"generated.pdf",(Ve=Ve||{}).returnPromise=Ve.returnPromise||!1,Ve.returnPromise===!1?(_p(Ms(Ws()),le),typeof _p.unload=="function"&&xi.setTimeout&&setTimeout(_p.unload,911),this):new Promise(function(pt,Dt){try{var tr=_p(Ms(Ws()),le);typeof _p.unload=="function"&&xi.setTimeout&&setTimeout(_p.unload,911),pt(tr)}catch(Pr){Dt(Pr.message)}})},ti.API)ti.API.hasOwnProperty(Ys)&&(Ys==="events"&&ti.API.events.length?(function(le,Ve){var pt,Dt,tr;for(tr=Ve.length-1;tr!==-1;tr--)pt=Ve[tr][0],Dt=Ve[tr][1],le.subscribe.apply(le,[pt].concat(typeof Dt=="function"?[Dt]:Dt))})(Dr,ti.API.events):b[Ys]=ti.API[Ys]);var Ha=b.getPageWidth=function(le){return(vr[le=le||Se].mediaBox.topRightX-vr[le].mediaBox.bottomLeftX)/be},Wa=b.setPageWidth=function(le,Ve){vr[le].mediaBox.topRightX=Ve*be+vr[le].mediaBox.bottomLeftX},Gi=b.getPageHeight=function(le){return(vr[le=le||Se].mediaBox.topRightY-vr[le].mediaBox.bottomLeftY)/be},Ca=b.setPageHeight=function(le,Ve){vr[le].mediaBox.topRightY=Ve*be+vr[le].mediaBox.bottomLeftY};return b.internal={pdfEscape:Nn,getStyle:Xe,getFont:Un,getFontSize:ur,getCharSpace:yo,getTextColor:Po,getLineHeight:tn,getLineHeightFactor:ba,getLineWidth:an,write:Ht,getHorizontalCoordinate:gi,getVerticalCoordinate:_a,getCoordinateString:si,getVerticalCoordinateString:An,collections:{},newObject:mt,newAdditionalObject:Dn,newObjectDeferred:wr,newObjectDeferredBegin:Ar,getFilters:_i,putStream:oi,events:Dr,scaleFactor:be,pageSize:{getWidth:function(){return Ha(Se)},setWidth:function(le){Wa(Se,le)},getHeight:function(){return Gi(Se)},setHeight:function(le){Ca(Se,le)}},encryptionOptions:g,encryption:va,getEncryptor:function(le){return g!==null?va.encryptor(le,0):function(Ve){return Ve}},output:Ma,getNumberOfPages:To,pages:rt,out:je,f2:ee,f3:G,getPageInfo:Ls,getPageInfoByObjId:Hl,getCurrentPageInfo:Wl,getPDFVersion:I,Point:Pl,Rectangle:Xs,Matrix:en,hasHotfix:Ga},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ha(Se)},set:function(le){Wa(Se,le)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Gi(Se)},set:function(le){Ca(Se,le)},enumerable:!0,configurable:!0}),(function(le){for(var Ve=0,pt=zt.length;Ve<pt;Ve++){var Dt=Oa.call(this,le[Ve][0],le[Ve][1],le[Ve][2],zt[Ve][3],!0);v===!1&&(x[Dt]=!0);var tr=le[Ve][0].split("-");Ua({id:Dt,fontName:tr[0],fontStyle:tr[1]||""})}Dr.publish("addFonts",{fonts:ot,dictionary:et})}).call(b,zt),nt="F1",Tl(i,r),Dr.publish("initialized"),b}lg.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},lg.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},lg.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},lg.prototype.processOwnerPassword=function(e,t){return pT(hT(t).substr(0,5),e)},lg.prototype.encryptor=function(e,t){var r=hT(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return pT(r,n)}},U_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Va(e)!==Va(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},ti.API={events:[]},ti.version="3.0.2";var hs=ti.API,JP=1,om=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ai=function(e){return e.toFixed(2)},yh=function(e){return e.toFixed(5)};hs.__acroform__={};var Uu=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},bD=function(e){return e*JP},zd=function(e){var t=new lj,r=Vn.internal.getHeight(e)||0,n=Vn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ai(n)),Number(Ai(r))],t},wse=hs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Sse=hs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Cse=hs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Cs=hs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Cse(e,t-1)},Es=hs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wse(e,t-1)},Ts=hs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Sse(e,t-1)},Ese=hs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],o=e[1],l=e[2],a=e[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(o+a)||0,c.upperRight_X=r(i+l)||0,c.upperRight_Y=n(o)||0,[Number(Ai(c.lowerLeft_X)),Number(Ai(c.lowerLeft_Y)),Number(Ai(c.upperRight_X)),Number(Ai(c.upperRight_Y))]},Tse=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=mT(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Ai(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=zd(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},mT=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(ee){return ee.split(`
`)}):i.map(function(ee){return[ee]});var o=r,l=Vn.internal.getHeight(e)||0;l=l<0?-l:l;var a=Vn.internal.getWidth(e)||0;a=a<0?-a:a;var c=function(ee,G,ie){if(ee+1<i.length){var oe=G+" "+i[ee+1][0];return _b(oe,e,ie).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var p,g,v=_b("3",e,o).height,x=e.multiline?l-o:(l-v)/2,b=x+=2,P=0,I=0,k=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+_b(t,e,o=12).width+", FieldWidth:"+a+`
`;break}for(var M="",O=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var N=!1;if(i[F].length!==1&&k!==i[F].length-1){if((v+2)*(O+2)+2>l)continue e;M+=i[F][k],N=!0,I=F,F--}else{M=(M+=i[F][k]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var $=parseInt(F),j=c($,M,o),U=F>=i.length-1;if(j&&!U){M+=" ",k=0;continue}if(j||U){if(U)I=$;else if(e.multiline&&(v+2)*(O+2)+2>l)continue e}else{if(!e.multiline||(v+2)*(O+2)+2>l)continue e;I=$}}for(var H="",Y=P;Y<=I;Y++){var ae=i[Y];if(e.multiline){if(Y===I){H+=ae[k]+" ",k=(k+1)%ae.length;continue}if(Y===P){H+=ae[ae.length-1]+" ";continue}}H+=ae[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,g=_b(H,e,o).width,e.textAlign){case"right":p=a-g-2;break;case"center":p=(a-g)/2;break;default:p=2}t+=Ai(p)+" "+Ai(b)+` Td
`,t+="("+om(H)+`) Tj
`,t+=-Ai(p)+` 0 Td
`,b=-(o+2),g=0,P=N?I:I+1,O++,M=""}break}return n.text=t,n.fontSize=o,n},_b=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Pse={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Ise=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},kse=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(yd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Pse)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");JP=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new uj,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&Ise(o,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var a=n[l],c=[],p=a.Rect;if(a.Rect&&(a.Rect=Ese(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Vn.createDefaultAppearanceStream(a),Va(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=p,a.hasAppearanceStream&&!a.appearanceStreamContent){var g=Tse(a);c.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(a.appearanceStreamContent){var v="";for(var x in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(x)){var b=a.appearanceStreamContent[x];if(v+="/"+x+" ",v+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var l in b)if(b.hasOwnProperty(l)){var P=b[l];typeof P=="function"&&(P=P.call(i,a)),v+="/"+l+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=b)=="function"&&(P=P.call(i,a)),v+="/"+l+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);v+=">>"}c.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&(function(I,k){for(var M in I)if(I.hasOwnProperty(M)){var O=M,F=I[M];k.internal.newObjectDeferredBegin(F.objId,!0),Va(F)==="object"&&typeof F.putStream=="function"&&F.putStream(),delete I[O]}})(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},sj=hs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(l){return l};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),Va(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+om(n(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},jS=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+om(n(e))+")"},Ud=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ud.prototype.toString=function(){return this.objId+" 0 R"},Ud.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ud.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:sj(i,this.objId,this.scope)}):i instanceof Ud?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var lj=function(){Ud.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Uu(lj,Ud);var uj=function(){Ud.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+om(r(e))+")"}},set:function(r){e=r}})};Uu(uj,Ud);var yd=function e(){Ud.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');t=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Cs(t,3)},set:function(M){M?this.F=Es(t,3):this.F=Ts(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');r=M}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(M){n=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(M){n[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(M){n[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(M){n[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(M){n[3]=M}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof G_)return;o="FieldObject"+e.FieldNum++}var M=function(O){return O};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+om(M(o))+")"},set:function(M){o=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(M){o=M}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(M){l=M}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(M){a=M}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(M){c=M}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/JP:p},set:function(M){p=M}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(M){g=M}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof G_||this instanceof Op))return jS(v,this.objId,this.scope)},set:function(M){M=M.toString(),v=M}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof _l==0?jS(x,this.objId,this.scope):x},set:function(M){M=M.toString(),x=this instanceof _l==0?M.substr(0,1)==="("?Xm(M.substr(1,M.length-2)):Xm(M):M}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _l==1?Xm(x.substr(1,x.length-1)):x},set:function(M){M=M.toString(),x=this instanceof _l==1?"/"+M:M}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof _l==0?jS(b,this.objId,this.scope):b},set:function(M){M=M.toString(),b=this instanceof _l==0?M.substr(0,1)==="("?Xm(M.substr(1,M.length-2)):Xm(M):M}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _l==1?Xm(b.substr(1,b.length-1)):b},set:function(M){M=M.toString(),b=this instanceof _l==1?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(M){M=!!M,I=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(M){P=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,1)},set:function(M){M?this.Ff=Es(this.Ff,1):this.Ff=Ts(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,2)},set:function(M){M?this.Ff=Es(this.Ff,2):this.Ff=Ts(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,3)},set:function(M){M?this.Ff=Es(this.Ff,3):this.Ff=Ts(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');k=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(k){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Uu(yd,Ud);var $g=function(){yd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return sj(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(o,l,a){a||(a=1);for(var c,p=[];c=l.exec(o);)p.push(c[a]);return p})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,18)},set:function(r){r?this.Ff=Es(this.Ff,18):this.Ff=Ts(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Es(this.Ff,19):this.Ff=Ts(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,20)},set:function(r){r?(this.Ff=Es(this.Ff,20),t.sort()):this.Ff=Ts(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,22)},set:function(r){r?this.Ff=Es(this.Ff,22):this.Ff=Ts(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,23)},set:function(r){r?this.Ff=Es(this.Ff,23):this.Ff=Ts(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,27)},set:function(r){r?this.Ff=Es(this.Ff,27):this.Ff=Ts(this.Ff,27)}}),this.hasAppearanceStream=!1};Uu($g,yd);var Vg=function(){$g.call(this),this.fontName="helvetica",this.combo=!1};Uu(Vg,$g);var Ug=function(){Vg.call(this),this.combo=!0};Uu(Ug,Vg);var f_=function(){Ug.call(this),this.edit=!0};Uu(f_,Ug);var _l=function(){yd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,15)},set:function(r){r?this.Ff=Es(this.Ff,15):this.Ff=Ts(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,16)},set:function(r){r?this.Ff=Es(this.Ff,16):this.Ff=Ts(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,17)},set:function(r){r?this.Ff=Es(this.Ff,17):this.Ff=Ts(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,26)},set:function(r){r?this.Ff=Es(this.Ff,26):this.Ff=Ts(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+om(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Va(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Uu(_l,yd);var h_=function(){_l.call(this),this.pushButton=!0};Uu(h_,_l);var Gg=function(){_l.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Uu(Gg,_l);var G_=function(){var e,t;yd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),n)l.push("/"+o+" ("+om(i(n[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Va(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Vn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Uu(G_,yd),Gg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Gg.prototype.createOption=function(e){var t=new G_;return t.Parent=this,t.optionName=e,this.Kids.push(t),Ase.call(this.scope,t),t};var p_=function(){_l.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Vn.CheckBox.createAppearanceStream()};Uu(p_,_l);var Op=function(){yd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,13)},set:function(t){t?this.Ff=Es(this.Ff,13):this.Ff=Ts(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,21)},set:function(t){t?this.Ff=Es(this.Ff,21):this.Ff=Ts(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,23)},set:function(t){t?this.Ff=Es(this.Ff,23):this.Ff=Ts(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,24)},set:function(t){t?this.Ff=Es(this.Ff,24):this.Ff=Ts(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,25)},set:function(t){t?this.Ff=Es(this.Ff,25):this.Ff=Ts(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,26)},set:function(t){t?this.Ff=Es(this.Ff,26):this.Ff=Ts(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Uu(Op,yd);var m_=function(){Op.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,14)},set:function(e){e?this.Ff=Es(this.Ff,14):this.Ff=Ts(this.Ff,14)}}),this.password=!0};Uu(m_,Op);var Vn={CheckBox:{createAppearanceStream:function(){return{N:{On:Vn.CheckBox.YesNormal},D:{On:Vn.CheckBox.YesPushDown,Off:Vn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=zd(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=mT(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Ai(Vn.internal.getWidth(e))+" "+Ai(Vn.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ai(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=zd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],o=Vn.internal.getHeight(e),l=Vn.internal.getWidth(e),a=mT(e,e.caption);return i.push("1 g"),i.push("0 0 "+Ai(l)+" "+Ai(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ai(l-1)+" "+Ai(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Ai(a.fontSize)+" Tf "+n),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=zd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ai(Vn.internal.getWidth(e))+" "+Ai(Vn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Vn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Vn.RadioButton.Circle.YesNormal,t.D[e]=Vn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=zd(e);t.scope=e.scope;var r=[],n=Vn.internal.getWidth(e)<=Vn.internal.getHeight(e)?Vn.internal.getWidth(e)/4:Vn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Vn.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+yh(Vn.internal.getWidth(e)/2)+" "+yh(Vn.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=zd(e);t.scope=e.scope;var r=[],n=Vn.internal.getWidth(e)<=Vn.internal.getHeight(e)?Vn.internal.getWidth(e)/4:Vn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Vn.internal.Bezier_C).toFixed(5)),l=Number((n*Vn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yh(Vn.internal.getWidth(e)/2)+" "+yh(Vn.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+yh(Vn.internal.getWidth(e)/2)+" "+yh(Vn.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=zd(e);t.scope=e.scope;var r=[],n=Vn.internal.getWidth(e)<=Vn.internal.getHeight(e)?Vn.internal.getWidth(e)/4:Vn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Vn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yh(Vn.internal.getWidth(e)/2)+" "+yh(Vn.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Vn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Vn.RadioButton.Cross.YesNormal,t.D[e]=Vn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=zd(e);t.scope=e.scope;var r=[],n=Vn.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Ai(Vn.internal.getWidth(e)-2)+" "+Ai(Vn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ai(n.x1.x)+" "+Ai(n.x1.y)+" m"),r.push(Ai(n.x2.x)+" "+Ai(n.x2.y)+" l"),r.push(Ai(n.x4.x)+" "+Ai(n.x4.y)+" m"),r.push(Ai(n.x3.x)+" "+Ai(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=zd(e);t.scope=e.scope;var r=Vn.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ai(Vn.internal.getWidth(e))+" "+Ai(Vn.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ai(Vn.internal.getWidth(e)-2)+" "+Ai(Vn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ai(r.x1.x)+" "+Ai(r.x1.y)+" m"),n.push(Ai(r.x2.x)+" "+Ai(r.x2.y)+" l"),n.push(Ai(r.x4.x)+" "+Ai(r.x4.y)+" m"),n.push(Ai(r.x3.x)+" "+Ai(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=zd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ai(Vn.internal.getWidth(e))+" "+Ai(Vn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Vn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Vn.internal.getWidth(e),r=Vn.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Vn.internal.getWidth=function(e){var t=0;return Va(e)==="object"&&(t=bD(e.Rect[2])),t},Vn.internal.getHeight=function(e){var t=0;return Va(e)==="object"&&(t=bD(e.Rect[3])),t};var Ase=hs.addField=function(e){if(kse(this,e),!(e instanceof yd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};hs.AcroFormChoiceField=$g,hs.AcroFormListBox=Vg,hs.AcroFormComboBox=Ug,hs.AcroFormEditBox=f_,hs.AcroFormButton=_l,hs.AcroFormPushButton=h_,hs.AcroFormRadioButton=Gg,hs.AcroFormCheckBox=p_,hs.AcroFormTextField=Op,hs.AcroFormPasswordField=m_,hs.AcroFormAppearance=Vn,hs.AcroForm={ChoiceField:$g,ListBox:Vg,ComboBox:Ug,EditBox:f_,Button:_l,PushButton:h_,RadioButton:Gg,CheckBox:p_,TextField:Op,PasswordField:m_,Appearance:Vn},ti.AcroForm={ChoiceField:$g,ListBox:Vg,ComboBox:Ug,EditBox:f_,Button:_l,PushButton:h_,RadioButton:Gg,CheckBox:p_,TextField:Op,PasswordField:m_,Appearance:Vn};ti.AcroForm;function cj(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(ee,G){var ie,oe,ue,de,Me,ge=r;if((G=G||r)==="RGBA"||ee.data!==void 0&&ee.data instanceof Uint8ClampedArray&&"height"in ee&&"width"in ee)return"RGBA";if(j(ee))for(Me in n)for(ue=n[Me],ie=0;ie<ue.length;ie+=1){for(de=!0,oe=0;oe<ue[ie].length;oe+=1)if(ue[ie][oe]!==void 0&&ue[ie][oe]!==ee[oe]){de=!1;break}if(de===!0){ge=Me;break}}else for(Me in n)for(ue=n[Me],ie=0;ie<ue.length;ie+=1){for(de=!0,oe=0;oe<ue[ie].length;oe+=1)if(ue[ie][oe]!==void 0&&ue[ie][oe]!==ee.charCodeAt(oe)){de=!1;break}if(de===!0){ge=Me;break}}return ge===r&&G!==r&&(ge=G),ge},o=function ee(G){for(var ie=this.internal.write,oe=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var de=[];if(de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Image"}),de.push({key:"Width",value:G.width}),de.push({key:"Height",value:G.height}),G.colorSpace===M.INDEXED?de.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(de.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===M.DEVICE_CMYK&&de.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),de.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&de.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var Me="",ge=0,xe=G.transparency.length;ge<xe;ge++)Me+=G.transparency[ge]+" "+G.transparency[ge]+" ";de.push({key:"Mask",value:"["+Me+"]"})}G.sMask!==void 0&&de.push({key:"SMask",value:G.objectId+1+" 0 R"});var Ee=G.filter!==void 0?["/"+G.filter]:void 0;if(oe({data:G.data,additionalKeyValues:de,alreadyAppliedFilters:Ee,objectId:G.objectId}),ie("endobj"),"sMask"in G&&G.sMask!==void 0){var Ae=(G.predictor!=null?"/Predictor "+G.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+G.width,fe={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:Ae,data:G.sMask};"filter"in G&&(fe.filter=G.filter),ee.call(this,fe)}if(G.colorSpace===M.INDEXED){var Se=this.internal.newObject();oe({data:H(new Uint8Array(G.palette)),objectId:Se}),ie("endobj")}},l=function(){var ee=this.internal.collections[t+"images"];for(var G in ee)o.call(this,ee[G])},a=function(){var ee,G=this.internal.collections[t+"images"],ie=this.internal.write;for(var oe in G)ie("/I"+(ee=G[oe]).index,ee.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",a))},p=function(){var ee=this.internal.collections[t+"images"];return c.call(this),ee},g=function(){return Object.keys(this.internal.collections[t+"images"]).length},v=function(ee){return typeof e["process"+ee.toUpperCase()]=="function"},x=function(ee){return Va(ee)==="object"&&ee.nodeType===1},b=function(ee,G){if(ee.nodeName==="IMG"&&ee.hasAttribute("src")){var ie=""+ee.getAttribute("src");if(ie.indexOf("data:image/")===0)return d_(unescape(ie).split("base64,").pop());var oe=e.loadFile(ie,!0);if(oe!==void 0)return oe}if(ee.nodeName==="CANVAS"){if(ee.width===0||ee.height===0)throw new Error("Given canvas must have data. Canvas width: "+ee.width+", height: "+ee.height);var ue;switch(G){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;default:ue="image/jpeg"}return d_(ee.toDataURL(ue,1).split("base64,").pop())}},P=function(ee){var G=this.internal.collections[t+"images"];if(G){for(var ie in G)if(ee===G[ie].alias)return G[ie]}},I=function(ee,G,ie){return ee||G||(ee=-96,G=-96),ee<0&&(ee=-1*ie.width*72/ee/this.internal.scaleFactor),G<0&&(G=-1*ie.height*72/G/this.internal.scaleFactor),ee===0&&(ee=G*ie.width/ie.height),G===0&&(G=ee*ie.height/ie.width),[ee,G]},k=function(ee,G,ie,oe,ue,de){var Me=I.call(this,ie,oe,ue),ge=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Ee=p.call(this);if(ie=Me[0],oe=Me[1],Ee[ue.index]=ue,de){de*=Math.PI/180;var Ae=Math.cos(de),fe=Math.sin(de),Se=function(De){return De.toFixed(4)},we=[Se(Ae),Se(fe),Se(-1*fe),Se(Ae),0,0,"cm"]}this.internal.write("q"),de?(this.internal.write([1,"0","0",1,ge(ee),xe(G+oe),"cm"].join(" ")),this.internal.write(we.join(" ")),this.internal.write([ge(ie),"0","0",ge(oe),"0","0","cm"].join(" "))):this.internal.write([ge(ie),"0","0",ge(oe),ge(ee),xe(G+oe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},M=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=e.__addimage__.sHashCode=function(ee){var G,ie,oe=0;if(typeof ee=="string")for(ie=ee.length,G=0;G<ie;G++)oe=(oe<<5)-oe+ee.charCodeAt(G),oe|=0;else if(j(ee))for(ie=ee.byteLength/2,G=0;G<ie;G++)oe=(oe<<5)-oe+ee[G],oe|=0;return oe},N=e.__addimage__.validateStringAsBase64=function(ee){(ee=ee||"").toString().trim();var G=!0;return ee.length===0&&(G=!1),ee.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(ee.substr(0,ee.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ee.substr(-2))===!1&&(G=!1),G},$=e.__addimage__.extractImageFromDataUrl=function(ee){if(ee==null||!(ee=ee.trim()).startsWith("data:"))return null;var G=ee.indexOf(",");return G<0?null:ee.substring(0,G).trim().endsWith("base64")?ee.substring(G+1):null};e.__addimage__.isArrayBuffer=function(ee){return ee instanceof ArrayBuffer};var j=e.__addimage__.isArrayBufferView=function(ee){return ee instanceof Int8Array||ee instanceof Uint8Array||ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array},U=e.__addimage__.binaryStringToUint8Array=function(ee){for(var G=ee.length,ie=new Uint8Array(G),oe=0;oe<G;oe++)ie[oe]=ee.charCodeAt(oe);return ie},H=e.__addimage__.arrayBufferToBinaryString=function(ee){for(var G="",ie=j(ee)?ee:new Uint8Array(ee),oe=0;oe<ie.length;oe+=8192)G+=String.fromCharCode.apply(null,ie.subarray(oe,oe+8192));return G};e.addImage=function(){var ee,G,ie,oe,ue,de,Me,ge,xe;if(typeof arguments[1]=="number"?(G=r,ie=arguments[1],oe=arguments[2],ue=arguments[3],de=arguments[4],Me=arguments[5],ge=arguments[6],xe=arguments[7]):(G=arguments[1],ie=arguments[2],oe=arguments[3],ue=arguments[4],de=arguments[5],Me=arguments[6],ge=arguments[7],xe=arguments[8]),Va(ee=arguments[0])==="object"&&!x(ee)&&"imageData"in ee){var Ee=ee;ee=Ee.imageData,G=Ee.format||G||r,ie=Ee.x||ie||0,oe=Ee.y||oe||0,ue=Ee.w||Ee.width||ue,de=Ee.h||Ee.height||de,Me=Ee.alias||Me,ge=Ee.compression||ge,xe=Ee.rotation||Ee.angle||xe}var Ae=this.internal.getFilters();if(ge===void 0&&Ae.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(ie)||isNaN(oe))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var fe=Y.call(this,ee,G,Me,ge);return k.call(this,ie,oe,ue,de,fe,xe),this};var Y=function(ee,G,ie,oe){var ue,de,Me;if(typeof ee=="string"&&i(ee)===r){ee=unescape(ee);var ge=ae(ee,!1);(ge!==""||(ge=e.loadFile(ee,!0))!==void 0)&&(ee=ge)}if(x(ee)&&(ee=b(ee,G)),G=i(ee,G),!v(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((Me=ie)==null||Me.length===0)&&(ie=(function(xe){return typeof xe=="string"||j(xe)?F(xe):j(xe.data)?F(xe.data):null})(ee)),(ue=P.call(this,ie))||(ee instanceof Uint8Array||G==="RGBA"||(de=ee,ee=U(ee)),ue=this["process"+G.toUpperCase()](ee,g.call(this),ie,(function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in e.image_compression?xe:O.NONE})(oe),de)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},ae=e.__addimage__.convertBase64ToBinaryString=function(ee,G){G=typeof G!="boolean"||G;var ie,oe="";if(typeof ee=="string"){var ue;ie=(ue=$(ee))!==null&&ue!==void 0?ue:ee;try{oe=d_(ie)}catch(de){if(G)throw N(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+de.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};e.getImageProperties=function(ee){var G,ie,oe="";if(x(ee)&&(ee=b(ee)),typeof ee=="string"&&i(ee)===r&&((oe=ae(ee,!1))===""&&(oe=e.loadFile(ee)||""),ee=oe),ie=i(ee),!v(ie))throw new Error("addImage does not support files of type '"+ie+"', please ensure that a plugin for '"+ie+"' support is added.");if(ee instanceof Uint8Array||(ee=U(ee)),!(G=this["process"+ie.toUpperCase()](ee)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=ie,G}})(ti.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ti.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,o,l=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),p=r.pageContext.annotations,g=!1,v=0;v<p.length&&!g;v++)switch((n=p[v]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var x=0;x<p.length;x++){n=p[x];var b=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(I.objId),O=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+b(M(n.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+b(M(O))+") >>",I.content=o;var F=I.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(I.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+a(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var N=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var $=this.annotations._nameMap[n.options.name];n.options.pageNumber=$.page,n.options.top=$.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var j=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+j+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,o,l){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(r),y:p(n),w:c(r+i),h:p(n+o)},options:l,type:"link"})},e.textWithLink=function(r,n,i,o){var l,a,c=this.getTextWidth(r),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var g=this.splitTextToSize(r,a).length;l=Math.ceil(p*g)}else a=c,l=p;return this.text(r,n,i,o),i+=.2*p,o.align==="center"&&(n-=c/2),o.align==="right"&&(n-=c),this.link(n,i-p,a,l,o),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(ti.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(I){return t[I.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},a=e.__arabicParser__.isArabicEndLetter=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(I){return l(I)&&i.indexOf(I.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length>=1};var p=e.__arabicParser__.arabicLetterHasFinalForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(I){return l(I)&&o(I)&&t[I.charCodeAt(0)].length==4},v=e.__arabicParser__.resolveLigatures=function(I){var k=0,M=r,O="",F=0;for(k=0;k<I.length;k+=1)M[I.charCodeAt(k)]!==void 0?(F++,typeof(M=M[I.charCodeAt(k)])=="number"&&(O+=String.fromCharCode(M),M=r,F=0),k===I.length-1&&(M=r,O+=I.charAt(k-(F-1)),k-=F-1,F=0)):(M=r,O+=I.charAt(k-F),k-=F,F=0);return O};e.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&n[I.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(I,k,M){return l(I)?o(I)===!1?-1:!p(I)||!l(k)&&!l(M)||!l(M)&&a(k)||a(I)&&!l(k)||a(I)&&c(k)||a(I)&&a(k)?0:g(I)&&l(k)&&!a(k)&&l(M)&&p(M)?3:a(I)||!l(M)?1:2:-1},b=function(I){var k=0,M=0,O=0,F="",N="",$="",j=(I=I||"").split("\\s+"),U=[];for(k=0;k<j.length;k+=1){for(U.push(""),M=0;M<j[k].length;M+=1)F=j[k][M],N=j[k][M-1],$=j[k][M+1],l(F)?(O=x(F,N,$),U[k]+=O!==-1?String.fromCharCode(t[F.charCodeAt(0)][O]):F):U[k]+=F;U[k]=v(U[k])}return U.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var I,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(k)){var O=0;for(M=[],O=0;O<k.length;O+=1)Array.isArray(k[O])?M.push([b(k[O][0]),k[O][1],k[O][2]]):M.push([b(k[O])]);I=M}else I=b(k);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};e.events.push(["preProcessText",P])})(ti.API),ti.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(a){l=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(ti.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(I){c=I}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(I){p=I}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(I){g=I}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(I){v=I}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(I){x=I}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(I){b=I}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(I){P=I}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,p){n.call(this);var g=(p=p||{}).fontSize||this.getFontSize(),v=p.font||this.getFont(),x=p.scaleFactor||this.internal.scaleFactor,b=0,P=0,I=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var M=p.maxWidth;M>0?typeof c=="string"?c=this.splitTextToSize(c,M):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(F,N){return F.concat(k.splitTextToSize(N,M))},[])):c=Array.isArray(c)?c:[c];for(var O=0;O<c.length;O++)b<(I=this.getStringUnitWidth(c[O],{font:v})*g)&&(b=I);return b!==0&&(P=c.length),{w:b/=x,h:Math.max((P*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var p=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===c.lineNumber?(c.x=(p.x||0)+(p.width||0),c.y=p.y||0):p.y+p.height+c.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=v.top,b&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=p.y+p.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-g,c.y+g,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+g,{align:"center",baseline:"top",maxWidth:c.width-g-g}):this.text(c.text,c.x+g,c.y+g,{align:"left",baseline:"top",maxWidth:c.width-g-g})),this.internal.__cell__.lastCell=c,this};e.table=function(c,p,g,v,x){if(n.call(this),!g)throw new Error("No data for PDF table.");var b,P,I,k,M=[],O=[],F=[],N={},$={},j=[],U=[],H=(x=x||{}).autoSize||!1,Y=x.printHeaders!==!1,ae=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,ee=x.margins||Object.assign({width:this.getPageWidth()},t),G=typeof x.padding=="number"?x.padding:3,ie=x.headerBackgroundColor||"#c8c8c8",oe=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=ee,this.internal.__cell__.table_font_size=ae,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=ie,this.internal.__cell__.headerTextColor=oe,this.setFontSize(ae),v==null)O=M=Object.keys(g[0]),F=M.map(function(){return"left"});else if(Array.isArray(v)&&Va(v[0])==="object")for(M=v.map(function(Ee){return Ee.name}),O=v.map(function(Ee){return Ee.prompt||Ee.name||""}),F=v.map(function(Ee){return Ee.align||"left"}),b=0;b<v.length;b+=1)$[v[b].name]=.7499990551181103*v[b].width;else Array.isArray(v)&&typeof v[0]=="string"&&(O=M=v,F=M.map(function(){return"left"}));if(H||Array.isArray(v)&&typeof v[0]=="string")for(b=0;b<M.length;b+=1){for(N[k=M[b]]=g.map(function(Ee){return Ee[k]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(O[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=N[k],this.setFont(void 0,"normal"),I=0;I<P.length;I+=1)j.push(this.getTextDimensions(P[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);$[k]=Math.max.apply(null,j)+G+G,j=[]}if(Y){var ue={};for(b=0;b<M.length;b+=1)ue[M[b]]={},ue[M[b]].text=O[b],ue[M[b]].align=F[b];var de=a.call(this,ue,$);U=M.map(function(Ee){return new o(c,p,$[Ee],de,ue[Ee].text,void 0,ue[Ee].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var Me=v.reduce(function(Ee,Ae){return Ee[Ae.name]=Ae.align,Ee},{});for(b=0;b<g.length;b+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:b,data:g[b]},this);var ge=a.call(this,g[b],$);for(I=0;I<M.length;I+=1){var xe=g[b][M[I]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:b,col:I,data:xe},this),l.call(this,new o(c,p,$[M[I]],ge,xe,b+2,Me[M[I]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=p,this};var a=function(c,p){var g=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(b){var P=c[b];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,p[b]-g-g)},this).map(function(b){return this.getLineHeightFactor()*b.length*v/x+g+g},this).reduce(function(b,P){return Math.max(b,P)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,p){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){g=this.internal.__cell__.tableHeaderRow[b].clone(),p&&(g.y=this.internal.__cell__.margins.top||0,x.push(g)),g.lineNumber=c;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,g),this.setTextColor(P)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),r=!1}})(ti.API);var dj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gT=cj(fj),hj=[100,200,300,400,500,600,700,800,900],Mse=cj(hj);function qS(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(o){return dj[o=o||"normal"]?o:"normal"})(e.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(e.weight),i=(function(o){return typeof gT[o=o||"normal"]=="number"?o:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function _D(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var Lse={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wD(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function SD(e){return e.trimLeft()}function Rse(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Dse(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var xb,CD,ED,Ym,wb,TD,PD,ID,$S=["times"];function kD(e,t,r,n){var i=4,o=MD;switch(n){case ti.API.image_compression.FAST:i=1,o=AD;break;case ti.API.image_compression.MEDIUM:i=6,o=LD;break;case ti.API.image_compression.SLOW:i=9,o=RD}e=(function(a,c,p,g){for(var v,x=a.length/c,b=new Uint8Array(a.length+x),P=[Nse,AD,MD,LD,RD],I=0;I<x;I+=1){var k=I*c,M=a.subarray(k,k+c);if(g)b.set(g(M,p,v),k+I);else{for(var O=P.length,F=[],N=0;N<O;N+=1)F[N]=P[N](M,p,v);var $=Fse(F.concat());b.set(F[$],k+I)}v=M}return b})(e,t,r,o);var l=uT(e,{level:i});return ti.API.__addimage__.arrayBufferToBinaryString(l)}function Nse(e){var t=Array.apply([],e);return t.unshift(0),t}function AD(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var o=e[i-t]||0;n[i+1]=e[i]-o+256&255}return n}function MD(e,t,r){var n=e.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var l=r&&r[o]||0;i[o+1]=e[o]-l+256&255}return i}function LD(e,t,r){var n=e.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var l=e[o-t]||0,a=r&&r[o]||0;i[o+1]=e[o]+256-(l+a>>>1)&255}return i}function RD(e,t,r){var n=e.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var l=Ose(e[o-t]||0,r&&r[o]||0,r&&r[o-t]||0);i[o+1]=e[o]-l+256&255}return i}function Ose(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),o=Math.abs(e+t-r-r);return n<=i&&n<=o?e:i<=o?t:r}function Fse(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function VS(e,t,r){var n=t*r,i=Math.floor(n/8),o=16-(n-8*i+r),l=(1<<r)-1;return pj(e,i)>>o&l}function DD(e,t,r,n){var i=r*n,o=Math.floor(i/8),l=16-(i-8*o+n),a=(1<<n)-1,c=(t&a)<<l;(function(p,g,v){if(g+1<p.byteLength)p.setUint16(g,v,!1);else{var x=v>>8&255;p.setUint8(g,x)}})(e,o,pj(e,o)&~(a<<l)&65535|c)}function pj(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Bse(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,l=1<<1+(7&i);e[t++],e[t++];var a=null,c=null;o&&(a=t,c=l,t+=3*l);var p=!0,g=[],v=0,x=null,b=0,P=null;for(this.width=r,this.height=n;p&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var I=e[t++];v=e[t++]|e[t++]<<8,x=e[t++],1&I||(x=null),b=I>>2&7,t++;break;case 254:for(;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,M=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,N=e[t++],$=N>>6&1,j=1<<1+(7&N),U=a,H=c,Y=!1;N>>7&&(Y=!0,U=t,H=j,t+=3*j);var ae=t;for(t++;;){var ee;if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}g.push({x:k,y:M,width:O,height:F,has_local_palette:Y,palette_offset:U,palette_size:H,data_offset:ae,data_length:t-ae,transparent_index:x,interlaced:!!$,delay:v,disposal:b});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return P},this.frameInfo=function(G){if(G<0||G>=g.length)throw new Error("Frame index out of range.");return g[G]},this.decodeAndBlitFrameBGRA=function(G,ie){var oe=this.frameInfo(G),ue=oe.width*oe.height,de=new Uint8Array(ue);ND(e,oe.data_offset,de,ue);var Me=oe.palette_offset,ge=oe.transparent_index;ge===null&&(ge=256);var xe=oe.width,Ee=r-xe,Ae=xe,fe=4*(oe.y*r+oe.x),Se=4*((oe.y+oe.height)*r+oe.x),we=fe,De=4*Ee;oe.interlaced===!0&&(De+=4*r*7);for(var Re=8,$e=0,Oe=de.length;$e<Oe;++$e){var it=de[$e];if(Ae===0&&(Ae=xe,(we+=De)>=Se&&(De=4*Ee+4*r*(Re-1),we=fe+(xe+Ee)*(Re<<1),Re>>=1)),it===ge)we+=4;else{var Ye=e[Me+3*it],rt=e[Me+3*it+1],Ie=e[Me+3*it+2];ie[we++]=Ie,ie[we++]=rt,ie[we++]=Ye,ie[we++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(G,ie){var oe=this.frameInfo(G),ue=oe.width*oe.height,de=new Uint8Array(ue);ND(e,oe.data_offset,de,ue);var Me=oe.palette_offset,ge=oe.transparent_index;ge===null&&(ge=256);var xe=oe.width,Ee=r-xe,Ae=xe,fe=4*(oe.y*r+oe.x),Se=4*((oe.y+oe.height)*r+oe.x),we=fe,De=4*Ee;oe.interlaced===!0&&(De+=4*r*7);for(var Re=8,$e=0,Oe=de.length;$e<Oe;++$e){var it=de[$e];if(Ae===0&&(Ae=xe,(we+=De)>=Se&&(De=4*Ee+4*r*(Re-1),we=fe+(xe+Ee)*(Re<<1),Re>>=1)),it===ge)we+=4;else{var Ye=e[Me+3*it],rt=e[Me+3*it+1],Ie=e[Me+3*it+2];ie[we++]=Ye,ie[we++]=rt,ie[we++]=Ie,ie[we++]=255}--Ae}}}function ND(e,t,r,n){for(var i=e[t++],o=1<<i,l=o+1,a=l+1,c=i+1,p=(1<<c)-1,g=0,v=0,x=0,b=e[t++],P=new Int32Array(4096),I=null;;){for(;g<16&&b!==0;)v|=e[t++]<<g,g+=8,b===1?b=e[t++]:--b;if(g<c)break;var k=v&p;if(v>>=c,g-=c,k!==o){if(k===l)break;for(var M=k<a?k:I,O=0,F=M;F>o;)F=P[F]>>8,++O;var N=F;if(x+O+(M!==k?1:0)>n)return void ao.log("Warning, gif stream longer than expected.");r[x++]=N;var $=x+=O;for(M!==k&&(r[x++]=N),F=M;O--;)F=P[F],r[--$]=255&F,F>>=8;I!==null&&a<4096&&(P[a++]=I<<8|N,a>=p+1&&c<12&&(++c,p=p<<1|1)),I=k}else a=l+1,p=(1<<(c=i+1))-1,I=null}return x!==n&&ao.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function US(e){var t,r,n,i,o,l=Math.floor,a=new Array(64),c=new Array(64),p=new Array(64),g=new Array(64),v=new Array(65535),x=new Array(65535),b=new Array(64),P=new Array(64),I=[],k=0,M=7,O=new Array(64),F=new Array(64),N=new Array(64),$=new Array(256),j=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ee=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ie=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function de(fe,Se){for(var we=0,De=0,Re=new Array,$e=1;$e<=16;$e++){for(var Oe=1;Oe<=fe[$e];Oe++)Re[Se[De]]=[],Re[Se[De]][0]=we,Re[Se[De]][1]=$e,De++,we++;we*=2}return Re}function Me(fe){for(var Se=fe[0],we=fe[1]-1;we>=0;)Se&1<<we&&(k|=1<<M),we--,--M<0&&(k==255?(ge(255),ge(0)):ge(k),M=7,k=0)}function ge(fe){I.push(fe)}function xe(fe){ge(fe>>8&255),ge(255&fe)}function Ee(fe,Se,we,De,Re){for(var $e,Oe=Re[0],it=Re[240],Ye=(function(st,sr){var ur,ar,yr,pr,Jt,ir,xr,rr,nt,be,_e=0;for(nt=0;nt<8;++nt){ur=st[_e],ar=st[_e+1],yr=st[_e+2],pr=st[_e+3],Jt=st[_e+4],ir=st[_e+5],xr=st[_e+6];var Ue=ur+(rr=st[_e+7]),Qe=ur-rr,ot=ar+xr,et=ar-xr,Lt=yr+ir,vt=yr-ir,Bt=pr+Jt,Kt=pr-Jt,Zt=Ue+Bt,Er=Ue-Bt,bt=ot+Lt,vr=ot-Lt;st[_e]=Zt+bt,st[_e+4]=Zt-bt;var Dr=.707106781*(vr+Er);st[_e+2]=Er+Dr,st[_e+6]=Er-Dr;var jr=.382683433*((Zt=Kt+vt)-(vr=et+Qe)),Ur=.5411961*Zt+jr,nr=1.306562965*vr+jr,Hn=.707106781*(bt=vt+et),en=Qe+Hn,Wn=Qe-Hn;st[_e+5]=Wn+Ur,st[_e+3]=Wn-Ur,st[_e+1]=en+nr,st[_e+7]=en-nr,_e+=8}for(_e=0,nt=0;nt<8;++nt){ur=st[_e],ar=st[_e+8],yr=st[_e+16],pr=st[_e+24],Jt=st[_e+32],ir=st[_e+40],xr=st[_e+48];var Pe=ur+(rr=st[_e+56]),Be=ur-rr,gt=ar+xr,mt=ar-xr,wr=yr+ir,Ar=yr-ir,Dn=pr+Jt,wi=pr-Jt,Lr=Pe+Dn,fn=Pe-Dn,gn=gt+wr,_i=gt-wr;st[_e]=Lr+gn,st[_e+32]=Lr-gn;var oi=.707106781*(_i+fn);st[_e+16]=fn+oi,st[_e+48]=fn-oi;var Di=.382683433*((Lr=wi+Ar)-(_i=mt+Be)),Pn=.5411961*Lr+Di,ga=1.306562965*_i+Di,na=.707106781*(gn=Ar+mt),Ni=Be+na,Na=Be-na;st[_e+40]=Na+Pn,st[_e+24]=Na-Pn,st[_e+8]=Ni+ga,st[_e+56]=Ni-ga,_e++}for(nt=0;nt<64;++nt)be=st[nt]*sr[nt],b[nt]=be>0?be+.5|0:be-.5|0;return b})(fe,Se),rt=0;rt<64;++rt)P[U[rt]]=Ye[rt];var Ie=P[0]-we;we=P[0],Ie==0?Me(De[0]):(Me(De[x[$e=32767+Ie]]),Me(v[$e]));for(var It=63;It>0&&P[It]==0;)It--;if(It==0)return Me(Oe),we;for(var at,je=1;je<=It;){for(var Ht=je;P[je]==0&&je<=It;)++je;var Wt=je-Ht;if(Wt>=16){at=Wt>>4;for(var zt=1;zt<=at;++zt)Me(it);Wt&=15}$e=32767+P[je],Me(Re[(Wt<<4)+x[$e]]),Me(v[$e]),je++}return It!=63&&Me(Oe),we}function Ae(fe){fe=Math.min(Math.max(fe,1),100),o!=fe&&((function(Se){for(var we=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],De=0;De<64;De++){var Re=l((we[De]*Se+50)/100);Re=Math.min(Math.max(Re,1),255),a[U[De]]=Re}for(var $e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Oe=0;Oe<64;Oe++){var it=l(($e[Oe]*Se+50)/100);it=Math.min(Math.max(it,1),255),c[U[Oe]]=it}for(var Ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],rt=0,Ie=0;Ie<8;Ie++)for(var It=0;It<8;It++)p[rt]=1/(a[U[rt]]*Ye[Ie]*Ye[It]*8),g[rt]=1/(c[U[rt]]*Ye[Ie]*Ye[It]*8),rt++})(fe<50?Math.floor(5e3/fe):Math.floor(200-2*fe)),o=fe)}this.encode=function(fe,Se){Se&&Ae(Se),I=new Array,k=0,M=7,xe(65496),xe(65504),xe(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),xe(1),xe(1),ge(0),ge(0),(function(){xe(65499),xe(132),ge(0);for(var ar=0;ar<64;ar++)ge(a[ar]);ge(1);for(var yr=0;yr<64;yr++)ge(c[yr])})(),(function(ar,yr){xe(65472),xe(17),ge(8),xe(yr),xe(ar),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)})(fe.width,fe.height),(function(){xe(65476),xe(418),ge(0);for(var ar=0;ar<16;ar++)ge(H[ar+1]);for(var yr=0;yr<=11;yr++)ge(Y[yr]);ge(16);for(var pr=0;pr<16;pr++)ge(ae[pr+1]);for(var Jt=0;Jt<=161;Jt++)ge(ee[Jt]);ge(1);for(var ir=0;ir<16;ir++)ge(G[ir+1]);for(var xr=0;xr<=11;xr++)ge(ie[xr]);ge(17);for(var rr=0;rr<16;rr++)ge(oe[rr+1]);for(var nt=0;nt<=161;nt++)ge(ue[nt])})(),xe(65498),xe(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var we=0,De=0,Re=0;k=0,M=7,this.encode.displayName="_encode_";for(var $e,Oe,it,Ye,rt,Ie,It,at,je,Ht=fe.data,Wt=fe.width,zt=fe.height,st=4*Wt,sr=0;sr<zt;){for($e=0;$e<st;){for(rt=st*sr+$e,It=-1,at=0,je=0;je<64;je++)Ie=rt+(at=je>>3)*st+(It=4*(7&je)),sr+at>=zt&&(Ie-=st*(sr+1+at-zt)),$e+It>=st&&(Ie-=$e+It-st+4),Oe=Ht[Ie++],it=Ht[Ie++],Ye=Ht[Ie++],O[je]=(j[Oe]+j[it+256|0]+j[Ye+512|0]>>16)-128,F[je]=(j[Oe+768|0]+j[it+1024|0]+j[Ye+1280|0]>>16)-128,N[je]=(j[Oe+1280|0]+j[it+1536|0]+j[Ye+1792|0]>>16)-128;we=Ee(O,p,we,t,n),De=Ee(F,g,De,r,i),Re=Ee(N,g,Re,r,i),$e+=32}sr+=8}if(M>=0){var ur=[];ur[1]=M+1,ur[0]=(1<<M+1)-1,Me(ur)}return xe(65497),new Uint8Array(I)},e=e||50,(function(){for(var fe=String.fromCharCode,Se=0;Se<256;Se++)$[Se]=fe(Se)})(),t=de(H,Y),r=de(G,ie),n=de(ae,ee),i=de(oe,ue),(function(){for(var fe=1,Se=2,we=1;we<=15;we++){for(var De=fe;De<Se;De++)x[32767+De]=we,v[32767+De]=[],v[32767+De][1]=we,v[32767+De][0]=De;for(var Re=-(Se-1);Re<=-fe;Re++)x[32767+Re]=we,v[32767+Re]=[],v[32767+Re][1]=we,v[32767+Re][0]=Se-1+Re;fe<<=1,Se<<=1}})(),(function(){for(var fe=0;fe<256;fe++)j[fe]=19595*fe,j[fe+256|0]=38470*fe,j[fe+512|0]=7471*fe+32768,j[fe+768|0]=-11059*fe,j[fe+1024|0]=-21709*fe,j[fe+1280|0]=32768*fe+8421375,j[fe+1536|0]=-27439*fe,j[fe+1792|0]=-5329*fe})(),Ae(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function td(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function OD(e){function t(Y){if(!Y)throw Error("assert :P")}function r(Y,ae,ee){for(var G=0;4>G;G++)if(Y[ae+G]!=ee.charCodeAt(G))return!0;return!1}function n(Y,ae,ee,G,ie){for(var oe=0;oe<ie;oe++)Y[ae+oe]=ee[G+oe]}function i(Y,ae,ee,G){for(var ie=0;ie<G;ie++)Y[ae+ie]=ee}function o(Y){return new Int32Array(Y)}function l(Y,ae){for(var ee=[],G=0;G<Y;G++)ee.push(new ae);return ee}function a(Y,ae){var ee=[];return(function G(ie,oe,ue){for(var de=ue[oe],Me=0;Me<de&&(ie.push(ue.length>oe+1?[]:new ae),!(ue.length<oe+1));Me++)G(ie[Me],oe+1,ue)})(ee,0,Y),ee}var c=function(){var Y=this;function ae(V,K){for(var he=1<<K-1>>>0;V&he;)he>>>=1;return he?(V&he-1)+he:V}function ee(V,K,he,ke,Ge){t(!(ke%he));do V[K+(ke-=he)]=Ge;while(0<ke)}function G(V,K,he,ke,Ge){if(t(2328>=Ge),512>=Ge)var Je=o(512);else if((Je=o(Ge))==null)return 0;return(function(tt,He,ht,St,qt,hr){var wt,Qt,jt=He,Tr=1<<ht,mr=o(16),Ir=o(16);for(t(qt!=0),t(St!=null),t(tt!=null),t(0<ht),Qt=0;Qt<qt;++Qt){if(15<St[Qt])return 0;++mr[St[Qt]]}if(mr[0]==qt)return 0;for(Ir[1]=0,wt=1;15>wt;++wt){if(mr[wt]>1<<wt)return 0;Ir[wt+1]=Ir[wt]+mr[wt]}for(Qt=0;Qt<qt;++Qt)wt=St[Qt],0<St[Qt]&&(hr[Ir[wt]++]=Qt);if(Ir[15]==1)return(St=new ie).g=0,St.value=hr[0],ee(tt,jt,1,Tr,St),Tr;var Rr,Yr=-1,Vr=Tr-1,$n=0,kn=1,Si=1,Fn=1<<ht;for(Qt=0,wt=1,qt=2;wt<=ht;++wt,qt<<=1){if(kn+=Si<<=1,0>(Si-=mr[wt]))return 0;for(;0<mr[wt];--mr[wt])(St=new ie).g=wt,St.value=hr[Qt++],ee(tt,jt+$n,qt,Fn,St),$n=ae($n,wt)}for(wt=ht+1,qt=2;15>=wt;++wt,qt<<=1){if(kn+=Si<<=1,0>(Si-=mr[wt]))return 0;for(;0<mr[wt];--mr[wt]){if(St=new ie,($n&Vr)!=Yr){for(jt+=Fn,Rr=1<<(Yr=wt)-ht;15>Yr&&!(0>=(Rr-=mr[Yr]));)++Yr,Rr<<=1;Tr+=Fn=1<<(Rr=Yr-ht),tt[He+(Yr=$n&Vr)].g=Rr+ht,tt[He+Yr].value=jt-He-Yr}St.g=wt-ht,St.value=hr[Qt++],ee(tt,jt+($n>>ht),qt,Fn,St),$n=ae($n,wt)}}return kn!=2*Ir[15]-1?0:Tr})(V,K,he,ke,Ge,Je)}function ie(){this.value=this.g=0}function oe(){this.value=this.g=0}function ue(){this.G=l(5,ie),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(no,oe)}function de(V,K,he,ke){t(V!=null),t(K!=null),t(2147483648>ke),V.Ca=254,V.I=0,V.b=-8,V.Ka=0,V.oa=K,V.pa=he,V.Jd=K,V.Yc=he+ke,V.Zc=4<=ke?he+ke-4+1:he,Oe(V)}function Me(V,K){for(var he=0;0<K--;)he|=Ye(V,128)<<K;return he}function ge(V,K){var he=Me(V,K);return it(V)?-he:he}function xe(V,K,he,ke){var Ge,Je=0;for(t(V!=null),t(K!=null),t(4294967288>ke),V.Sb=ke,V.Ra=0,V.u=0,V.h=0,4<ke&&(ke=4),Ge=0;Ge<ke;++Ge)Je+=K[he+Ge]<<8*Ge;V.Ra=Je,V.bb=ke,V.oa=K,V.pa=he}function Ee(V){for(;8<=V.u&&V.bb<V.Sb;)V.Ra>>>=8,V.Ra+=V.oa[V.pa+V.bb]<<cl-8>>>0,++V.bb,V.u-=8;De(V)&&(V.h=1,V.u=0)}function Ae(V,K){if(t(0<=K),!V.h&&K<=Uo){var he=we(V)&ul[K];return V.u+=K,Ee(V),he}return V.h=1,V.u=0}function fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Se(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function we(V){return V.Ra>>>(V.u&cl-1)>>>0}function De(V){return t(V.bb<=V.Sb),V.h||V.bb==V.Sb&&V.u>cl}function Re(V,K){V.u=K,V.h=De(V)}function $e(V){V.u>=ia&&(t(V.u>=ia),Ee(V))}function Oe(V){t(V!=null&&V.oa!=null),V.pa<V.Zc?(V.I=(V.oa[V.pa++]|V.I<<8)>>>0,V.b+=8):(t(V!=null&&V.oa!=null),V.pa<V.Yc?(V.b+=8,V.I=V.oa[V.pa++]|V.I<<8):V.Ka?V.b=0:(V.I<<=8,V.b+=8,V.Ka=1))}function it(V){return Me(V,1)}function Ye(V,K){var he=V.Ca;0>V.b&&Oe(V);var ke=V.b,Ge=he*K>>>8,Je=(V.I>>>ke>Ge)+0;for(Je?(he-=Ge,V.I-=Ge+1<<ke>>>0):he=Ge+1,ke=he,Ge=0;256<=ke;)Ge+=8,ke>>=8;return ke=7^Ge+Zl[ke],V.b-=ke,V.Ca=(he<<ke)-1,Je}function rt(V,K,he){V[K+0]=he>>24&255,V[K+1]=he>>16&255,V[K+2]=he>>8&255,V[K+3]=255&he}function Ie(V,K){return V[K+0]|V[K+1]<<8}function It(V,K){return Ie(V,K)|V[K+2]<<16}function at(V,K){return Ie(V,K)|Ie(V,K+2)<<16}function je(V,K){var he=1<<K;return t(V!=null),t(0<K),V.X=o(he),V.X==null?0:(V.Mb=32-K,V.Xa=K,1)}function Ht(V,K){t(V!=null),t(K!=null),t(V.Xa==K.Xa),n(K.X,0,V.X,0,1<<K.Xa)}function Wt(){this.X=[],this.Xa=this.Mb=0}function zt(V,K,he,ke){t(he!=null),t(ke!=null);var Ge=he[0],Je=ke[0];return Ge==0&&(Ge=(V*Je+K/2)/K),Je==0&&(Je=(K*Ge+V/2)/V),0>=Ge||0>=Je?0:(he[0]=Ge,ke[0]=Je,1)}function st(V,K){return V+(1<<K)-1>>>K}function sr(V,K){return((4278255360&V)+(4278255360&K)>>>0&4278255360)+((16711935&V)+(16711935&K)>>>0&16711935)>>>0}function ur(V,K){Y[K]=function(he,ke,Ge,Je,tt,He,ht){var St;for(St=0;St<tt;++St){var qt=Y[V](He[ht+St-1],Ge,Je+St);He[ht+St]=sr(he[ke+St],qt)}}}function ar(){this.ud=this.hd=this.jd=0}function yr(V,K){return((4278124286&(V^K))>>>1)+(V&K)>>>0}function pr(V){return 0<=V&&256>V?V:0>V?0:255<V?255:void 0}function Jt(V,K){return pr(V+(V-K+.5>>1))}function ir(V,K,he){return Math.abs(K-he)-Math.abs(V-he)}function xr(V,K,he,ke,Ge,Je,tt){for(ke=Je[tt-1],he=0;he<Ge;++he)Je[tt+he]=ke=sr(V[K+he],ke)}function rr(V,K,he,ke,Ge){var Je;for(Je=0;Je<he;++Je){var tt=V[K+Je],He=tt>>8&255,ht=16711935&(ht=(ht=16711935&tt)+((He<<16)+He));ke[Ge+Je]=(4278255360&tt)+ht>>>0}}function nt(V,K){K.jd=255&V,K.hd=V>>8&255,K.ud=V>>16&255}function be(V,K,he,ke,Ge,Je){var tt;for(tt=0;tt<ke;++tt){var He=K[he+tt],ht=He>>>8,St=He,qt=255&(qt=(qt=He>>>16)+((V.jd<<24>>24)*(ht<<24>>24)>>>5));St=255&(St=(St+=(V.hd<<24>>24)*(ht<<24>>24)>>>5)+((V.ud<<24>>24)*(qt<<24>>24)>>>5)),Ge[Je+tt]=(4278255360&He)+(qt<<16)+St}}function _e(V,K,he,ke,Ge){Y[K]=function(Je,tt,He,ht,St,qt,hr,wt,Qt){for(ht=hr;ht<wt;++ht)for(hr=0;hr<Qt;++hr)St[qt++]=Ge(He[ke(Je[tt++])])},Y[V]=function(Je,tt,He,ht,St,qt,hr){var wt=8>>Je.b,Qt=Je.Ea,jt=Je.K[0],Tr=Je.w;if(8>wt)for(Je=(1<<Je.b)-1,Tr=(1<<wt)-1;tt<He;++tt){var mr,Ir=0;for(mr=0;mr<Qt;++mr)mr&Je||(Ir=ke(ht[St++])),qt[hr++]=Ge(jt[Ir&Tr]),Ir>>=wt}else Y["VP8LMapColor"+he](ht,St,jt,Tr,qt,hr,tt,He,Qt)}}function Ue(V,K,he,ke,Ge){for(he=K+he;K<he;){var Je=V[K++];ke[Ge++]=Je>>16&255,ke[Ge++]=Je>>8&255,ke[Ge++]=255&Je}}function Qe(V,K,he,ke,Ge){for(he=K+he;K<he;){var Je=V[K++];ke[Ge++]=Je>>16&255,ke[Ge++]=Je>>8&255,ke[Ge++]=255&Je,ke[Ge++]=Je>>24&255}}function ot(V,K,he,ke,Ge){for(he=K+he;K<he;){var Je=(tt=V[K++])>>16&240|tt>>12&15,tt=240&tt|tt>>28&15;ke[Ge++]=Je,ke[Ge++]=tt}}function et(V,K,he,ke,Ge){for(he=K+he;K<he;){var Je=(tt=V[K++])>>16&248|tt>>13&7,tt=tt>>5&224|tt>>3&31;ke[Ge++]=Je,ke[Ge++]=tt}}function Lt(V,K,he,ke,Ge){for(he=K+he;K<he;){var Je=V[K++];ke[Ge++]=255&Je,ke[Ge++]=Je>>8&255,ke[Ge++]=Je>>16&255}}function vt(V,K,he,ke,Ge,Je){if(Je==0)for(he=K+he;K<he;)rt(ke,((Je=V[K++])[0]>>24|Je[1]>>8&65280|Je[2]<<8&16711680|Je[3]<<24)>>>0),Ge+=32;else n(ke,Ge,V,K,he)}function Bt(V,K){Y[K][0]=Y[V+"0"],Y[K][1]=Y[V+"1"],Y[K][2]=Y[V+"2"],Y[K][3]=Y[V+"3"],Y[K][4]=Y[V+"4"],Y[K][5]=Y[V+"5"],Y[K][6]=Y[V+"6"],Y[K][7]=Y[V+"7"],Y[K][8]=Y[V+"8"],Y[K][9]=Y[V+"9"],Y[K][10]=Y[V+"10"],Y[K][11]=Y[V+"11"],Y[K][12]=Y[V+"12"],Y[K][13]=Y[V+"13"],Y[K][14]=Y[V+"0"],Y[K][15]=Y[V+"0"]}function Kt(V){return V==uf||V==wd||V==Cc||V==Hc}function Zt(){this.eb=[],this.size=this.A=this.fb=0}function Er(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zt,this.f.kb=new Er,this.sd=null}function vr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function jr(V){return alert("todo:WebPSamplerProcessPlane"),V.T}function Ur(V,K){var he=V.T,ke=K.ba.f.RGBA,Ge=ke.eb,Je=ke.fb+V.ka*ke.A,tt=ts[K.ba.S],He=V.y,ht=V.O,St=V.f,qt=V.N,hr=V.ea,wt=V.W,Qt=K.cc,jt=K.dc,Tr=K.Mc,mr=K.Nc,Ir=V.ka,Rr=V.ka+V.T,Yr=V.U,Vr=Yr+1>>1;for(Ir==0?tt(He,ht,null,null,St,qt,hr,wt,St,qt,hr,wt,Ge,Je,null,null,Yr):(tt(K.ec,K.fc,He,ht,Qt,jt,Tr,mr,St,qt,hr,wt,Ge,Je-ke.A,Ge,Je,Yr),++he);Ir+2<Rr;Ir+=2)Qt=St,jt=qt,Tr=hr,mr=wt,qt+=V.Rc,wt+=V.Rc,Je+=2*ke.A,tt(He,(ht+=2*V.fa)-V.fa,He,ht,Qt,jt,Tr,mr,St,qt,hr,wt,Ge,Je-ke.A,Ge,Je,Yr);return ht+=V.fa,V.j+Rr<V.o?(n(K.ec,K.fc,He,ht,Yr),n(K.cc,K.dc,St,qt,Vr),n(K.Mc,K.Nc,hr,wt,Vr),he--):1&Rr||tt(He,ht,null,null,St,qt,hr,wt,St,qt,hr,wt,Ge,Je+ke.A,null,null,Yr),he}function nr(V,K,he){var ke=V.F,Ge=[V.J];if(ke!=null){var Je=V.U,tt=K.ba.S,He=tt==Qf||tt==Cc;K=K.ba.f.RGBA;var ht=[0],St=V.ka;ht[0]=V.T,V.Kb&&(St==0?--ht[0]:(--St,Ge[0]-=V.width),V.j+V.ka+V.T==V.o&&(ht[0]=V.o-V.j-St));var qt=K.eb;St=K.fb+St*K.A,V=Ra(ke,Ge[0],V.width,Je,ht,qt,St+(He?0:3),K.A),t(he==ht),V&&Kt(tt)&&Hi(qt,St,He,Je,ht,K.A)}return 0}function Hn(V){var K=V.ma,he=K.ba.S,ke=11>he,Ge=he==Sc||he==Au||he==Qf||he==eh||he==12||Kt(he);if(K.memory=null,K.Ib=null,K.Jb=null,K.Nd=null,!lo(K.Oa,V,Ge?11:12))return 0;if(Ge&&Kt(he)&&Zs(),V.da)alert("todo:use_scaling");else{if(ke){if(K.Ib=jr,V.Kb){if(he=V.U+1>>1,K.memory=o(V.U+2*he),K.memory==null)return 0;K.ec=K.memory,K.fc=0,K.cc=K.ec,K.dc=K.fc+V.U,K.Mc=K.cc,K.Nc=K.dc+he,K.Ib=Ur,Zs()}}else alert("todo:EmitYUV");Ge&&(K.Jb=nr,ke&&sl())}if(ke&&!oh){for(V=0;256>V;++V)_m[V]=89858*(V-128)+ml>>hf,ip[V]=-22014*(V-128)+ml,Pd[V]=-45773*(V-128),xm[V]=113618*(V-128)+ml>>hf;for(V=Mu;V<Fs;++V)K=76283*(V-16)+ml>>hf,Id[V-Mu]=La(K,255),wm[V-Mu]=La(K+8>>4,15);oh=1}return 1}function en(V){var K=V.ma,he=V.U,ke=V.T;return t(!(1&V.ka)),0>=he||0>=ke?0:(he=K.Ib(V,K),K.Jb!=null&&K.Jb(V,K,he),K.Dc+=he,1)}function Wn(V){V.ma.memory=null}function Pe(V,K,he,ke){return Ae(V,8)!=47?0:(K[0]=Ae(V,14)+1,he[0]=Ae(V,14)+1,ke[0]=Ae(V,1),Ae(V,3)!=0?0:!V.h)}function Be(V,K){if(4>V)return V+1;var he=V-2>>1;return(2+(1&V)<<he)+Ae(K,he)+1}function gt(V,K){return 120<K?K-120:1<=(he=((he=th[K-1])>>4)*V+(8-(15&he)))?he:1;var he}function mt(V,K,he){var ke=we(he),Ge=V[K+=255&ke].g-8;return 0<Ge&&(Re(he,he.u+8),ke=we(he),K+=V[K].value,K+=ke&(1<<Ge)-1),Re(he,he.u+V[K].g),V[K].value}function wr(V,K,he){return he.g+=V.g,he.value+=V.value<<K>>>0,t(8>=he.g),V.g}function Ar(V,K,he){var ke=V.xc;return t((K=ke==0?0:V.vc[V.md*(he>>ke)+(K>>ke)])<V.Wb),V.Ya[K]}function Dn(V,K,he,ke){var Ge=V.ab,Je=V.c*K,tt=V.C;K=tt+K;var He=he,ht=ke;for(ke=V.Ta,he=V.Ua;0<Ge--;){var St=V.gc[Ge],qt=tt,hr=K,wt=He,Qt=ht,jt=(ht=ke,He=he,St.Ea);switch(t(qt<hr),t(hr<=St.nc),St.hc){case 2:dl(wt,Qt,(hr-qt)*jt,ht,He);break;case 0:var Tr=qt,mr=hr,Ir=ht,Rr=He,Yr=(Fn=St).Ea;Tr==0&&(Os(wt,Qt,null,null,1,Ir,Rr),xr(wt,Qt+1,0,0,Yr-1,Ir,Rr+1),Qt+=Yr,Rr+=Yr,++Tr);for(var Vr=1<<Fn.b,$n=Vr-1,kn=st(Yr,Fn.b),Si=Fn.K,Fn=Fn.w+(Tr>>Fn.b)*kn;Tr<mr;){var $i=Si,Ro=Fn,ui=1;for(gs(wt,Qt,Ir,Rr-Yr,1,Ir,Rr);ui<Yr;){var sn=(ui&~$n)+Vr;sn>Yr&&(sn=Yr),(0,$t[$i[Ro++]>>8&15])(wt,Qt+ +ui,Ir,Rr+ui-Yr,sn-ui,Ir,Rr+ui),ui=sn}Qt+=Yr,Rr+=Yr,++Tr&$n||(Fn+=kn)}hr!=St.nc&&n(ht,He-jt,ht,He+(hr-qt-1)*jt,jt);break;case 1:for(jt=wt,mr=Qt,Yr=(wt=St.Ea)-(Rr=wt&~(Ir=(Qt=1<<St.b)-1)),Tr=st(wt,St.b),Vr=St.K,St=St.w+(qt>>St.b)*Tr;qt<hr;){for($n=Vr,kn=St,Si=new ar,Fn=mr+Rr,$i=mr+wt;mr<Fn;)nt($n[kn++],Si),er(Si,jt,mr,Qt,ht,He),mr+=Qt,He+=Qt;mr<$i&&(nt($n[kn++],Si),er(Si,jt,mr,Yr,ht,He),mr+=Yr,He+=Yr),++qt&Ir||(St+=Tr)}break;case 3:if(wt==ht&&Qt==He&&0<St.b){for(mr=ht,wt=jt=He+(hr-qt)*jt-(Rr=(hr-qt)*st(St.Ea,St.b)),Qt=ht,Ir=He,Tr=[],Rr=(Yr=Rr)-1;0<=Rr;--Rr)Tr[Rr]=Qt[Ir+Rr];for(Rr=Yr-1;0<=Rr;--Rr)mr[wt+Rr]=Tr[Rr];Kl(St,qt,hr,ht,jt,ht,He)}else Kl(St,qt,hr,wt,Qt,ht,He)}He=ke,ht=he}ht!=he&&n(ke,he,He,ht,Je)}function wi(V,K){var he=V.V,ke=V.Ba+V.c*V.C,Ge=K-V.C;if(t(K<=V.l.o),t(16>=Ge),0<Ge){var Je=V.l,tt=V.Ta,He=V.Ua,ht=Je.width;if(Dn(V,Ge,he,ke),Ge=He=[He],t((he=V.C)<(ke=K)),t(Je.v<Je.va),ke>Je.o&&(ke=Je.o),he<Je.j){var St=Je.j-he;he=Je.j,Ge[0]+=St*ht}if(he>=ke?he=0:(Ge[0]+=4*Je.v,Je.ka=he-Je.j,Je.U=Je.va-Je.v,Je.T=ke-he,he=1),he){if(He=He[0],11>(he=V.ca).S){var qt=he.f.RGBA,hr=(ke=he.S,Ge=Je.U,Je=Je.T,St=qt.eb,qt.A),wt=Je;for(qt=qt.fb+V.Ma*qt.A;0<wt--;){var Qt=tt,jt=He,Tr=Ge,mr=St,Ir=qt;switch(ke){case Ku:Jr(Qt,jt,Tr,mr,Ir);break;case Sc:yn(Qt,jt,Tr,mr,Ir);break;case uf:yn(Qt,jt,Tr,mr,Ir),Hi(mr,Ir,0,Tr,1,0);break;case pl:E(Qt,jt,Tr,mr,Ir);break;case Au:vt(Qt,jt,Tr,mr,Ir,1);break;case wd:vt(Qt,jt,Tr,mr,Ir,1),Hi(mr,Ir,0,Tr,1,0);break;case Qf:vt(Qt,jt,Tr,mr,Ir,0);break;case Cc:vt(Qt,jt,Tr,mr,Ir,0),Hi(mr,Ir,1,Tr,1,0);break;case eh:di(Qt,jt,Tr,mr,Ir);break;case Hc:di(Qt,jt,Tr,mr,Ir),ha(mr,Ir,Tr,1,0);break;case gm:vn(Qt,jt,Tr,mr,Ir);break;default:t(0)}He+=ht,qt+=hr}V.Ma+=Je}else alert("todo:EmitRescaledRowsYUVA");t(V.Ma<=he.height)}}V.C=K,t(V.C<=V.i)}function Lr(V){var K;if(0<V.ua)return 0;for(K=0;K<V.Wb;++K){var he=V.Ya[K].G,ke=V.Ya[K].H;if(0<he[1][ke[1]+0].g||0<he[2][ke[2]+0].g||0<he[3][ke[3]+0].g)return 0}return 1}function fn(V,K,he,ke,Ge,Je){if(V.Z!=0){var tt=V.qd,He=V.rd;for(t(Ju[V.Z]!=null);K<he;++K)Ju[V.Z](tt,He,ke,Ge,ke,Ge,Je),tt=ke,He=Ge,Ge+=Je;V.qd=tt,V.rd=He}}function gn(V,K){var he=V.l.ma,ke=he.Z==0||he.Z==1?V.l.j:V.C;if(ke=V.C<ke?ke:V.C,t(K<=V.l.o),K>ke){var Ge=V.l.width,Je=he.ca,tt=he.tb+Ge*ke,He=V.V,ht=V.Ba+V.c*ke,St=V.gc;t(V.ab==1),t(St[0].hc==3),Al(St[0],ke,K,He,ht,Je,tt),fn(he,ke,K,Je,tt,Ge)}V.C=V.Ma=K}function _i(V,K,he,ke,Ge,Je,tt){var He=V.$/ke,ht=V.$%ke,St=V.m,qt=V.s,hr=he+V.$,wt=hr;Ge=he+ke*Ge;var Qt=he+ke*Je,jt=280+qt.ua,Tr=V.Pb?He:16777216,mr=0<qt.ua?qt.Wa:null,Ir=qt.wc,Rr=hr<Qt?Ar(qt,ht,He):null;t(V.C<Je),t(Qt<=Ge);var Yr=!1;e:for(;;){for(;Yr||hr<Qt;){var Vr=0;if(He>=Tr){var $n=hr-he;t((Tr=V).Pb),Tr.wd=Tr.m,Tr.xd=$n,0<Tr.s.ua&&Ht(Tr.s.Wa,Tr.s.vb),Tr=He+Wc}if(ht&Ir||(Rr=Ar(qt,ht,He)),t(Rr!=null),Rr.Qb&&(K[hr]=Rr.qb,Yr=!0),!Yr)if($e(St),Rr.jc){Vr=St,$n=K;var kn=hr,Si=Rr.pd[we(Vr)&no-1];t(Rr.jc),256>Si.g?(Re(Vr,Vr.u+Si.g),$n[kn]=Si.value,Vr=0):(Re(Vr,Vr.u+Si.g-256),t(256<=Si.value),Vr=Si.value),Vr==0&&(Yr=!0)}else Vr=mt(Rr.G[0],Rr.H[0],St);if(St.h)break;if(Yr||256>Vr){if(!Yr)if(Rr.nd)K[hr]=(Rr.qb|Vr<<8)>>>0;else{if($e(St),Yr=mt(Rr.G[1],Rr.H[1],St),$e(St),$n=mt(Rr.G[2],Rr.H[2],St),kn=mt(Rr.G[3],Rr.H[3],St),St.h)break;K[hr]=(kn<<24|Yr<<16|Vr<<8|$n)>>>0}if(Yr=!1,++hr,++ht>=ke&&(ht=0,++He,tt!=null&&He<=Je&&!(He%16)&&tt(V,He),mr!=null))for(;wt<hr;)Vr=K[wt++],mr.X[(506832829*Vr&4294967295)>>>mr.Mb]=Vr}else if(280>Vr){if(Vr=Be(Vr-256,St),$n=mt(Rr.G[4],Rr.H[4],St),$e(St),$n=gt(ke,$n=Be($n,St)),St.h)break;if(hr-he<$n||Ge-hr<Vr)break e;for(kn=0;kn<Vr;++kn)K[hr+kn]=K[hr+kn-$n];for(hr+=Vr,ht+=Vr;ht>=ke;)ht-=ke,++He,tt!=null&&He<=Je&&!(He%16)&&tt(V,He);if(t(hr<=Ge),ht&Ir&&(Rr=Ar(qt,ht,He)),mr!=null)for(;wt<hr;)Vr=K[wt++],mr.X[(506832829*Vr&4294967295)>>>mr.Mb]=Vr}else{if(!(Vr<jt))break e;for(Yr=Vr-280,t(mr!=null);wt<hr;)Vr=K[wt++],mr.X[(506832829*Vr&4294967295)>>>mr.Mb]=Vr;Vr=hr,t(!(Yr>>>($n=mr).Xa)),K[Vr]=$n.X[Yr],Yr=!0}Yr||t(St.h==De(St))}if(V.Pb&&St.h&&hr<Ge)t(V.m.h),V.a=5,V.m=V.wd,V.$=V.xd,0<V.s.ua&&Ht(V.s.vb,V.s.Wa);else{if(St.h)break e;tt?.(V,He>Je?Je:He),V.a=0,V.$=hr-he}return 1}return V.a=3,0}function oi(V){t(V!=null),V.vc=null,V.yc=null,V.Ya=null;var K=V.Wa;K!=null&&(K.X=null),V.vb=null,t(V!=null)}function Di(){var V=new Li;return V==null?null:(V.a=0,V.xb=Ed,Bt("Predictor","VP8LPredictors"),Bt("Predictor","VP8LPredictors_C"),Bt("PredictorAdd","VP8LPredictorsAdd"),Bt("PredictorAdd","VP8LPredictorsAdd_C"),dl=rr,er=be,Jr=Ue,yn=Qe,di=ot,vn=et,E=Lt,Y.VP8LMapColor32b=ys,Y.VP8LMapColor8b=fl,V)}function Pn(V,K,he,ke,Ge){var Je=1,tt=[V],He=[K],ht=ke.m,St=ke.s,qt=null,hr=0;e:for(;;){if(he)for(;Je&&Ae(ht,1);){var wt=tt,Qt=He,jt=ke,Tr=1,mr=jt.m,Ir=jt.gc[jt.ab],Rr=Ae(mr,2);if(jt.Oc&1<<Rr)Je=0;else{switch(jt.Oc|=1<<Rr,Ir.hc=Rr,Ir.Ea=wt[0],Ir.nc=Qt[0],Ir.K=[null],++jt.ab,t(4>=jt.ab),Rr){case 0:case 1:Ir.b=Ae(mr,3)+2,Tr=Pn(st(Ir.Ea,Ir.b),st(Ir.nc,Ir.b),0,jt,Ir.K),Ir.K=Ir.K[0];break;case 3:var Yr,Vr=Ae(mr,8)+1,$n=16<Vr?0:4<Vr?1:2<Vr?2:3;if(wt[0]=st(Ir.Ea,$n),Ir.b=$n,Yr=Tr=Pn(Vr,1,0,jt,Ir.K)){var kn,Si=Vr,Fn=Ir,$i=1<<(8>>Fn.b),Ro=o($i);if(Ro==null)Yr=0;else{var ui=Fn.K[0],sn=Fn.w;for(Ro[0]=Fn.K[0][0],kn=1;kn<1*Si;++kn)Ro[kn]=sr(ui[sn+kn],Ro[kn-1]);for(;kn<4*$i;++kn)Ro[kn]=0;Fn.K[0]=null,Fn.K[0]=Ro,Yr=1}}Tr=Yr;break;case 2:break;default:t(0)}Je=Tr}}if(tt=tt[0],He=He[0],Je&&Ae(ht,1)&&!(Je=1<=(hr=Ae(ht,4))&&11>=hr)){ke.a=3;break e}var dn;if(dn=Je)t:{var io,bi,Vi,Pa=ke,rs=tt,Za=He,za=hr,hn=he,Sn=Pa.m,uo=Pa.s,ki=[null],Zi=1,Ui=0,oa=Zh[za];r:for(;;){if(hn&&Ae(Sn,1)){var xa=Ae(Sn,3)+2,yu=st(rs,xa),ja=st(Za,xa),Ci=yu*ja;if(!Pn(yu,ja,0,Pa,ki))break r;for(ki=ki[0],uo.xc=xa,io=0;io<Ci;++io){var hi=ki[io]>>8&65535;ki[io]=hi,hi>=Zi&&(Zi=hi+1)}}if(Sn.h)break r;for(bi=0;5>bi;++bi){var co=Sd[bi];!bi&&0<za&&(co+=1<<za),Ui<co&&(Ui=co)}var ns=l(Zi*oa,ie),Do=Zi,el=l(Do,ue);if(el==null)var is=null;else t(65536>=Do),is=el;var No=o(Ui);if(is==null||No==null||ns==null){Pa.a=1;break r}var bs=ns;for(io=Vi=0;io<Zi;++io){var pa=is[io],Go=pa.G,Ml=pa.H,ec=0,Jl=1,Ho=0;for(bi=0;5>bi;++bi){co=Sd[bi],Go[bi]=bs,Ml[bi]=Vi,!bi&&0<za&&(co+=1<<za);i:{var A,s=co,h=Pa,w=No,C=bs,L=Vi,B=0,X=h.m,te=Ae(X,1);if(i(w,0,0,s),te){var ce=Ae(X,1)+1,me=Ae(X,1),Te=Ae(X,me==0?1:8);w[Te]=1,ce==2&&(w[Te=Ae(X,8)]=1);var Ce=1}else{var Fe=o(19),We=Ae(X,4)+4;if(19<We){h.a=3;var ct=0;break i}for(A=0;A<We;++A)Fe[df[A]]=Ae(X,3);var ut=void 0,dt=void 0,_t=h,Pt=Fe,Et=s,Mt=w,Ot=0,Tt=_t.m,Vt=8,gr=l(128,ie);n:for(;G(gr,0,7,Pt,19);){if(Ae(Tt,1)){var lr=2+2*Ae(Tt,3);if((ut=2+Ae(Tt,lr))>Et)break n}else ut=Et;for(dt=0;dt<Et&&ut--;){$e(Tt);var cr=gr[0+(127&we(Tt))];Re(Tt,Tt.u+cr.g);var fr=cr.value;if(16>fr)Mt[dt++]=fr,fr!=0&&(Vt=fr);else{var Xr=fr==16,Zr=fr-16,Fr=ym[Zr],Cn=Ae(Tt,Yh[Zr])+Fr;if(dt+Cn>Et)break n;for(var vi=Xr?Vt:0;0<Cn--;)Mt[dt++]=vi}}Ot=1;break n}Ot||(_t.a=3),Ce=Ot}(Ce=Ce&&!X.h)&&(B=G(C,L,8,w,s)),Ce&&B!=0?ct=B:(h.a=3,ct=0)}if(ct==0)break r;if(Jl&&cf[bi]==1&&(Jl=bs[Vi].g==0),ec+=bs[Vi].g,Vi+=ct,3>=bi){var Oi,ea=No[0];for(Oi=1;Oi<co;++Oi)No[Oi]>ea&&(ea=No[Oi]);Ho+=ea}}if(pa.nd=Jl,pa.Qb=0,Jl&&(pa.qb=(Go[3][Ml[3]+0].value<<24|Go[1][Ml[1]+0].value<<16|Go[2][Ml[2]+0].value)>>>0,ec==0&&256>Go[0][Ml[0]+0].value&&(pa.Qb=1,pa.qb+=Go[0][Ml[0]+0].value<<8)),pa.jc=!pa.Qb&&6>Ho,pa.jc){var Xi,Ki=pa;for(Xi=0;Xi<no;++Xi){var sa=Xi,ii=Ki.pd[sa],Ji=Ki.G[0][Ki.H[0]+sa];256<=Ji.value?(ii.g=Ji.g+256,ii.value=Ji.value):(ii.g=0,ii.value=0,sa>>=wr(Ji,8,ii),sa>>=wr(Ki.G[1][Ki.H[1]+sa],16,ii),sa>>=wr(Ki.G[2][Ki.H[2]+sa],0,ii),wr(Ki.G[3][Ki.H[3]+sa],24,ii))}}}uo.vc=ki,uo.Wb=Zi,uo.Ya=is,uo.yc=ns,dn=1;break t}dn=0}if(!(Je=dn)){ke.a=3;break e}if(0<hr){if(St.ua=1<<hr,!je(St.Wa,hr)){ke.a=1,Je=0;break e}}else St.ua=0;var fo=ke,Oo=tt,as=He,_s=fo.s,Ll=_s.xc;if(fo.c=Oo,fo.i=as,_s.md=st(Oo,Ll),_s.wc=Ll==0?-1:(1<<Ll)-1,he){ke.xb=nh;break e}if((qt=o(tt*He))==null){ke.a=1,Je=0;break e}Je=(Je=_i(ke,qt,0,tt,He,He,null))&&!ht.h;break e}return Je?(Ge!=null?Ge[0]=qt:(t(qt==null),t(he)),ke.$=0,he||oi(St)):oi(St),Je}function ga(V,K){var he=V.c*V.i,ke=he+K+16*K;return t(V.c<=K),V.V=o(ke),V.V==null?(V.Ta=null,V.Ua=0,V.a=1,0):(V.Ta=V.V,V.Ua=V.Ba+he+K,1)}function na(V,K){var he=V.C,ke=K-he,Ge=V.V,Je=V.Ba+V.c*he;for(t(K<=V.l.o);0<ke;){var tt=16<ke?16:ke,He=V.l.ma,ht=V.l.width,St=ht*tt,qt=He.ca,hr=He.tb+ht*he,wt=V.Ta,Qt=V.Ua;Dn(V,tt,Ge,Je),bo(wt,Qt,qt,hr,St),fn(He,he,he+tt,qt,hr,ht),ke-=tt,Ge+=tt*V.c,he+=tt}t(he==K),V.C=V.Ma=K}function Ni(){this.ub=this.yd=this.td=this.Rb=0}function Na(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ua(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Mi(){this.Yb=(function(){var V=[];return(function K(he,ke,Ge){for(var Je=Ge[ke],tt=0;tt<Je&&(he.push(Ge.length>ke+1?[]:0),!(Ge.length<ke+1));tt++)K(he[tt],ke+1,Ge)})(V,0,[3,11]),V})()}function Ua(){this.jb=o(3),this.Wc=a([4,8],Mi),this.Xc=a([4,17],Mi)}function Oa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Nn(){this.ld=this.La=this.dd=this.tc=0}function Gl(){this.Na=this.la=0}function Tl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ya(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ca(){this.uc=this.M=this.Nb=0,this.wa=Array(new Nn),this.Y=0,this.ya=Array(new ya),this.aa=0,this.l=new qo}function To(){this.y=o(16),this.f=o(8),this.ea=o(8)}function go(){this.cb=this.a=0,this.sc="",this.m=new fe,this.Od=new Ni,this.Kc=new Na,this.ed=new Oa,this.Qa=new ua,this.Ic=this.$c=this.Aa=0,this.D=new ca,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,fe),this.ia=0,this.pb=l(4,Tl),this.Pa=new Ua,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new To),this.Hd=0,this.rb=Array(new Gl),this.sb=0,this.wa=Array(new Nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ya),this.L=this.aa=0,this.gd=a([4,2],Nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Xu(){var V=new go;return V!=null&&(V.a=0,V.sc="OK",V.cb=0,V.Xb=0,mu||(mu=Ws)),V}function da(V,K,he){return V.a==0&&(V.a=K,V.sc=he,V.cb=0),0}function Yu(V,K,he){return 3<=he&&V[K+0]==157&&V[K+1]==1&&V[K+2]==42}function Zu(V,K){if(V==null)return 0;if(V.a=0,V.sc="OK",K==null)return da(V,2,"null VP8Io passed to VP8GetHeaders()");var he=K.data,ke=K.w,Ge=K.ha;if(4>Ge)return da(V,7,"Truncated header.");var Je=he[ke+0]|he[ke+1]<<8|he[ke+2]<<16,tt=V.Od;if(tt.Rb=!(1&Je),tt.td=Je>>1&7,tt.yd=Je>>4&1,tt.ub=Je>>5,3<tt.td)return da(V,3,"Incorrect keyframe parameters.");if(!tt.yd)return da(V,4,"Frame not displayable.");ke+=3,Ge-=3;var He=V.Kc;if(tt.Rb){if(7>Ge)return da(V,7,"cannot parse picture header");if(!Yu(he,ke,Ge))return da(V,3,"Bad code word");He.c=16383&(he[ke+4]<<8|he[ke+3]),He.Td=he[ke+4]>>6,He.i=16383&(he[ke+6]<<8|he[ke+5]),He.Ud=he[ke+6]>>6,ke+=7,Ge-=7,V.za=He.c+15>>4,V.Ub=He.i+15>>4,K.width=He.c,K.height=He.i,K.Da=0,K.j=0,K.v=0,K.va=K.width,K.o=K.height,K.da=0,K.ib=K.width,K.hb=K.height,K.U=K.width,K.T=K.height,i((Je=V.Pa).jb,0,255,Je.jb.length),t((Je=V.Qa)!=null),Je.Cb=0,Je.Bb=0,Je.Fb=1,i(Je.Zb,0,0,Je.Zb.length),i(Je.Lb,0,0,Je.Lb)}if(tt.ub>Ge)return da(V,7,"bad partition length");de(Je=V.m,he,ke,tt.ub),ke+=tt.ub,Ge-=tt.ub,tt.Rb&&(He.Ld=it(Je),He.Kd=it(Je)),He=V.Qa;var ht,St=V.Pa;if(t(Je!=null),t(He!=null),He.Cb=it(Je),He.Cb){if(He.Bb=it(Je),it(Je)){for(He.Fb=it(Je),ht=0;4>ht;++ht)He.Zb[ht]=it(Je)?ge(Je,7):0;for(ht=0;4>ht;++ht)He.Lb[ht]=it(Je)?ge(Je,6):0}if(He.Bb)for(ht=0;3>ht;++ht)St.jb[ht]=it(Je)?Me(Je,8):255}else He.Bb=0;if(Je.Ka)return da(V,3,"cannot parse segment header");if((He=V.ed).zd=it(Je),He.Tb=Me(Je,6),He.wb=Me(Je,3),He.Pc=it(Je),He.Pc&&it(Je)){for(St=0;4>St;++St)it(Je)&&(He.vd[St]=ge(Je,6));for(St=0;4>St;++St)it(Je)&&(He.od[St]=ge(Je,6))}if(V.L=He.Tb==0?0:He.zd?1:2,Je.Ka)return da(V,3,"cannot parse filter header");var qt=Ge;if(Ge=ht=ke,ke=ht+qt,He=qt,V.Xb=(1<<Me(V.m,2))-1,qt<3*(St=V.Xb))he=7;else{for(ht+=3*St,He-=3*St,qt=0;qt<St;++qt){var hr=he[Ge+0]|he[Ge+1]<<8|he[Ge+2]<<16;hr>He&&(hr=He),de(V.Jc[+qt],he,ht,hr),ht+=hr,He-=hr,Ge+=3}de(V.Jc[+St],he,ht,He),he=ht<ke?0:5}if(he!=0)return da(V,he,"cannot parse partitions");for(he=Me(ht=V.m,7),Ge=it(ht)?ge(ht,4):0,ke=it(ht)?ge(ht,4):0,He=it(ht)?ge(ht,4):0,St=it(ht)?ge(ht,4):0,ht=it(ht)?ge(ht,4):0,qt=V.Qa,hr=0;4>hr;++hr){if(qt.Cb){var wt=qt.Zb[hr];qt.Fb||(wt+=he)}else{if(0<hr){V.pb[hr]=V.pb[0];continue}wt=he}var Qt=V.pb[hr];Qt.Sc[0]=ff[La(wt+Ge,127)],Qt.Sc[1]=Cd[La(wt+0,127)],Qt.Eb[0]=2*ff[La(wt+ke,127)],Qt.Eb[1]=101581*Cd[La(wt+He,127)]>>16,8>Qt.Eb[1]&&(Qt.Eb[1]=8),Qt.Qc[0]=ff[La(wt+St,117)],Qt.Qc[1]=Cd[La(wt+ht,127)],Qt.lc=wt+ht}if(!tt.Rb)return da(V,4,"Not a key frame.");for(it(Je),tt=V.Pa,he=0;4>he;++he){for(Ge=0;8>Ge;++Ge)for(ke=0;3>ke;++ke)for(He=0;11>He;++He)St=Ye(Je,Fy[he][Ge][ke][He])?Me(Je,8):rh[he][Ge][ke][He],tt.Wc[he][Ge].Yb[ke][He]=St;for(Ge=0;17>Ge;++Ge)tt.Xc[he][Ge]=tt.Wc[he][ep[Ge]]}return V.kc=it(Je),V.kc&&(V.Bd=Me(Je,8)),V.cb=1}function Ws(V,K,he,ke,Ge,Je,tt){var He=K[Ge].Yb[he];for(he=0;16>Ge;++Ge){if(!Ye(V,He[he+0]))return Ge;for(;!Ye(V,He[he+1]);)if(He=K[++Ge].Yb[0],he=0,Ge==16)return 16;var ht=K[Ge+1].Yb;if(Ye(V,He[he+2])){var St=V,qt=0;if(Ye(St,(wt=He)[(hr=he)+3]))if(Ye(St,wt[hr+6])){for(He=0,hr=2*(qt=Ye(St,wt[hr+8]))+(wt=Ye(St,wt[hr+9+qt])),qt=0,wt=Kh[hr];wt[He];++He)qt+=qt+Ye(St,wt[He]);qt+=3+(8<<hr)}else Ye(St,wt[hr+7])?(qt=7+2*Ye(St,165),qt+=Ye(St,145)):qt=5+Ye(St,159);else qt=Ye(St,wt[hr+4])?3+Ye(St,wt[hr+5]):2;He=ht[2]}else qt=1,He=ht[1];ht=tt+vm[Ge],0>(St=V).b&&Oe(St);var hr,wt=St.b,Qt=(hr=St.Ca>>1)-(St.I>>wt)>>31;--St.b,St.Ca+=Qt,St.Ca|=1,St.I-=(hr+1&Qt)<<wt,Je[ht]=((qt^Qt)-Qt)*ke[(0<Ge)+0]}return 16}function Ms(V){var K=V.rb[V.sb-1];K.la=0,K.Na=0,i(V.zc,0,0,V.zc.length),V.ja=0}function Ma(V,K,he,ke,Ge){Ge=V[K+he+32*ke]+(Ge>>3),V[K+he+32*ke]=-256&Ge?0>Ge?0:255:Ge}function Ga(V,K,he,ke,Ge,Je){Ma(V,K,0,he,ke+Ge),Ma(V,K,1,he,ke+Je),Ma(V,K,2,he,ke-Je),Ma(V,K,3,he,ke-Ge)}function va(V){return(20091*V>>16)+V}function Ls(V,K,he,ke){var Ge,Je=0,tt=o(16);for(Ge=0;4>Ge;++Ge){var He=V[K+0]+V[K+8],ht=V[K+0]-V[K+8],St=(35468*V[K+4]>>16)-va(V[K+12]),qt=va(V[K+4])+(35468*V[K+12]>>16);tt[Je+0]=He+qt,tt[Je+1]=ht+St,tt[Je+2]=ht-St,tt[Je+3]=He-qt,Je+=4,K++}for(Ge=Je=0;4>Ge;++Ge)He=(V=tt[Je+0]+4)+tt[Je+8],ht=V-tt[Je+8],St=(35468*tt[Je+4]>>16)-va(tt[Je+12]),Ma(he,ke,0,0,He+(qt=va(tt[Je+4])+(35468*tt[Je+12]>>16))),Ma(he,ke,1,0,ht+St),Ma(he,ke,2,0,ht-St),Ma(he,ke,3,0,He-qt),Je++,ke+=32}function Hl(V,K,he,ke){var Ge=V[K+0]+4,Je=35468*V[K+4]>>16,tt=va(V[K+4]),He=35468*V[K+1]>>16;Ga(he,ke,0,Ge+tt,V=va(V[K+1]),He),Ga(he,ke,1,Ge+Je,V,He),Ga(he,ke,2,Ge-Je,V,He),Ga(he,ke,3,Ge-tt,V,He)}function Wl(V,K,he,ke,Ge){Ls(V,K,he,ke),Ge&&Ls(V,K+16,he,ke+4)}function J(V,K,he,ke){y(V,K+0,he,ke,1),y(V,K+32,he,ke+128,1)}function pe(V,K,he,ke){var Ge;for(V=V[K+0]+4,Ge=0;4>Ge;++Ge)for(K=0;4>K;++K)Ma(he,ke,K,Ge,V)}function Xe(V,K,he,ke){V[K+0]&&re(V,K+0,he,ke),V[K+16]&&re(V,K+16,he,ke+4),V[K+32]&&re(V,K+32,he,ke+128),V[K+48]&&re(V,K+48,he,ke+128+4)}function Ct(V,K,he,ke){var Ge,Je=o(16);for(Ge=0;4>Ge;++Ge){var tt=V[K+0+Ge]+V[K+12+Ge],He=V[K+4+Ge]+V[K+8+Ge],ht=V[K+4+Ge]-V[K+8+Ge],St=V[K+0+Ge]-V[K+12+Ge];Je[0+Ge]=tt+He,Je[8+Ge]=tt-He,Je[4+Ge]=St+ht,Je[12+Ge]=St-ht}for(Ge=0;4>Ge;++Ge)tt=(V=Je[0+4*Ge]+3)+Je[3+4*Ge],He=Je[1+4*Ge]+Je[2+4*Ge],ht=Je[1+4*Ge]-Je[2+4*Ge],St=V-Je[3+4*Ge],he[ke+0]=tt+He>>3,he[ke+16]=St+ht>>3,he[ke+32]=tt-He>>3,he[ke+48]=St-ht>>3,ke+=64}function Rt(V,K,he){var ke,Ge=K-32,Je=qn,tt=255-V[Ge-1];for(ke=0;ke<he;++ke){var He,ht=Je,St=tt+V[K-1];for(He=0;He<he;++He)V[K+He]=ht[St+V[Ge+He]];K+=32}}function kt(V,K){Rt(V,K,4)}function Xt(V,K){Rt(V,K,8)}function Or(V,K){Rt(V,K,16)}function qr(V,K){var he;for(he=0;16>he;++he)n(V,K+32*he,V,K-32,16)}function Br(V,K){var he;for(he=16;0<he;--he)i(V,K,V[K-1],16),K+=32}function Sr(V,K,he){var ke;for(ke=0;16>ke;++ke)i(K,he+32*ke,V,16)}function Gr(V,K){var he,ke=16;for(he=0;16>he;++he)ke+=V[K-1+32*he]+V[K+he-32];Sr(ke>>5,V,K)}function Un(V,K){var he,ke=8;for(he=0;16>he;++he)ke+=V[K-1+32*he];Sr(ke>>4,V,K)}function pi(V,K){var he,ke=8;for(he=0;16>he;++he)ke+=V[K+he-32];Sr(ke>>4,V,K)}function mn(V,K){Sr(128,V,K)}function an(V,K,he){return V+2*K+he+2>>2}function Cr(V,K){var he,ke=K-32;for(ke=new Uint8Array([an(V[ke-1],V[ke+0],V[ke+1]),an(V[ke+0],V[ke+1],V[ke+2]),an(V[ke+1],V[ke+2],V[ke+3]),an(V[ke+2],V[ke+3],V[ke+4])]),he=0;4>he;++he)n(V,K+32*he,ke,0,ke.length)}function tn(V,K){var he=V[K-1],ke=V[K-1+32],Ge=V[K-1+64],Je=V[K-1+96];rt(V,K+0,16843009*an(V[K-1-32],he,ke)),rt(V,K+32,16843009*an(he,ke,Ge)),rt(V,K+64,16843009*an(ke,Ge,Je)),rt(V,K+96,16843009*an(Ge,Je,Je))}function On(V,K){var he,ke=4;for(he=0;4>he;++he)ke+=V[K+he-32]+V[K-1+32*he];for(ke>>=3,he=0;4>he;++he)i(V,K+32*he,ke,4)}function ba(V,K){var he=V[K-1+0],ke=V[K-1+32],Ge=V[K-1+64],Je=V[K-1-32],tt=V[K+0-32],He=V[K+1-32],ht=V[K+2-32],St=V[K+3-32];V[K+0+96]=an(ke,Ge,V[K-1+96]),V[K+1+96]=V[K+0+64]=an(he,ke,Ge),V[K+2+96]=V[K+1+64]=V[K+0+32]=an(Je,he,ke),V[K+3+96]=V[K+2+64]=V[K+1+32]=V[K+0+0]=an(tt,Je,he),V[K+3+64]=V[K+2+32]=V[K+1+0]=an(He,tt,Je),V[K+3+32]=V[K+2+0]=an(ht,He,tt),V[K+3+0]=an(St,ht,He)}function gi(V,K){var he=V[K+1-32],ke=V[K+2-32],Ge=V[K+3-32],Je=V[K+4-32],tt=V[K+5-32],He=V[K+6-32],ht=V[K+7-32];V[K+0+0]=an(V[K+0-32],he,ke),V[K+1+0]=V[K+0+32]=an(he,ke,Ge),V[K+2+0]=V[K+1+32]=V[K+0+64]=an(ke,Ge,Je),V[K+3+0]=V[K+2+32]=V[K+1+64]=V[K+0+96]=an(Ge,Je,tt),V[K+3+32]=V[K+2+64]=V[K+1+96]=an(Je,tt,He),V[K+3+64]=V[K+2+96]=an(tt,He,ht),V[K+3+96]=an(He,ht,ht)}function _a(V,K){var he=V[K-1+0],ke=V[K-1+32],Ge=V[K-1+64],Je=V[K-1-32],tt=V[K+0-32],He=V[K+1-32],ht=V[K+2-32],St=V[K+3-32];V[K+0+0]=V[K+1+64]=Je+tt+1>>1,V[K+1+0]=V[K+2+64]=tt+He+1>>1,V[K+2+0]=V[K+3+64]=He+ht+1>>1,V[K+3+0]=ht+St+1>>1,V[K+0+96]=an(Ge,ke,he),V[K+0+64]=an(ke,he,Je),V[K+0+32]=V[K+1+96]=an(he,Je,tt),V[K+1+32]=V[K+2+96]=an(Je,tt,He),V[K+2+32]=V[K+3+96]=an(tt,He,ht),V[K+3+32]=an(He,ht,St)}function si(V,K){var he=V[K+0-32],ke=V[K+1-32],Ge=V[K+2-32],Je=V[K+3-32],tt=V[K+4-32],He=V[K+5-32],ht=V[K+6-32],St=V[K+7-32];V[K+0+0]=he+ke+1>>1,V[K+1+0]=V[K+0+64]=ke+Ge+1>>1,V[K+2+0]=V[K+1+64]=Ge+Je+1>>1,V[K+3+0]=V[K+2+64]=Je+tt+1>>1,V[K+0+32]=an(he,ke,Ge),V[K+1+32]=V[K+0+96]=an(ke,Ge,Je),V[K+2+32]=V[K+1+96]=an(Ge,Je,tt),V[K+3+32]=V[K+2+96]=an(Je,tt,He),V[K+3+64]=an(tt,He,ht),V[K+3+96]=an(He,ht,St)}function An(V,K){var he=V[K-1+0],ke=V[K-1+32],Ge=V[K-1+64],Je=V[K-1+96];V[K+0+0]=he+ke+1>>1,V[K+2+0]=V[K+0+32]=ke+Ge+1>>1,V[K+2+32]=V[K+0+64]=Ge+Je+1>>1,V[K+1+0]=an(he,ke,Ge),V[K+3+0]=V[K+1+32]=an(ke,Ge,Je),V[K+3+32]=V[K+1+64]=an(Ge,Je,Je),V[K+3+64]=V[K+2+64]=V[K+0+96]=V[K+1+96]=V[K+2+96]=V[K+3+96]=Je}function $o(V,K){var he=V[K-1+0],ke=V[K-1+32],Ge=V[K-1+64],Je=V[K-1+96],tt=V[K-1-32],He=V[K+0-32],ht=V[K+1-32],St=V[K+2-32];V[K+0+0]=V[K+2+32]=he+tt+1>>1,V[K+0+32]=V[K+2+64]=ke+he+1>>1,V[K+0+64]=V[K+2+96]=Ge+ke+1>>1,V[K+0+96]=Je+Ge+1>>1,V[K+3+0]=an(He,ht,St),V[K+2+0]=an(tt,He,ht),V[K+1+0]=V[K+3+32]=an(he,tt,He),V[K+1+32]=V[K+3+64]=an(ke,he,tt),V[K+1+64]=V[K+3+96]=an(Ge,ke,he),V[K+1+96]=an(Je,Ge,ke)}function Mn(V,K){var he;for(he=0;8>he;++he)n(V,K+32*he,V,K-32,8)}function En(V,K){var he;for(he=0;8>he;++he)i(V,K,V[K-1],8),K+=32}function Po(V,K,he){var ke;for(ke=0;8>ke;++ke)i(K,he+32*ke,V,8)}function jn(V,K){var he,ke=8;for(he=0;8>he;++he)ke+=V[K+he-32]+V[K-1+32*he];Po(ke>>4,V,K)}function yo(V,K){var he,ke=4;for(he=0;8>he;++he)ke+=V[K+he-32];Po(ke>>3,V,K)}function oo(V,K){var he,ke=4;for(he=0;8>he;++he)ke+=V[K-1+32*he];Po(ke>>3,V,K)}function Io(V,K){Po(128,V,K)}function Rs(V,K,he){var ke=V[K-he],Ge=V[K+0],Je=3*(Ge-ke)+ku[1020+V[K-2*he]-V[K+he]],tt=Js[112+(Je+4>>3)];V[K-he]=qn[255+ke+Js[112+(Je+3>>3)]],V[K+0]=qn[255+Ge-tt]}function Pl(V,K,he,ke){var Ge=V[K+0],Je=V[K+he];return _o[255+V[K-2*he]-V[K-he]]>ke||_o[255+Je-Ge]>ke}function Xs(V,K,he,ke){return 4*_o[255+V[K-he]-V[K+0]]+_o[255+V[K-2*he]-V[K+he]]<=ke}function so(V,K,he,ke,Ge){var Je=V[K-3*he],tt=V[K-2*he],He=V[K-he],ht=V[K+0],St=V[K+he],qt=V[K+2*he],hr=V[K+3*he];return 4*_o[255+He-ht]+_o[255+tt-St]>ke?0:_o[255+V[K-4*he]-Je]<=Ge&&_o[255+Je-tt]<=Ge&&_o[255+tt-He]<=Ge&&_o[255+hr-qt]<=Ge&&_o[255+qt-St]<=Ge&&_o[255+St-ht]<=Ge}function Ds(V,K,he,ke){var Ge=2*ke+1;for(ke=0;16>ke;++ke)Xs(V,K+ke,he,Ge)&&Rs(V,K+ke,he)}function Ys(V,K,he,ke){var Ge=2*ke+1;for(ke=0;16>ke;++ke)Xs(V,K+ke*he,1,Ge)&&Rs(V,K+ke*he,1)}function Ha(V,K,he,ke){var Ge;for(Ge=3;0<Ge;--Ge)Ds(V,K+=4*he,he,ke)}function Wa(V,K,he,ke){var Ge;for(Ge=3;0<Ge;--Ge)Ys(V,K+=4,he,ke)}function Gi(V,K,he,ke,Ge,Je,tt,He){for(Je=2*Je+1;0<Ge--;){if(so(V,K,he,Je,tt))if(Pl(V,K,he,He))Rs(V,K,he);else{var ht=V,St=K,qt=he,hr=ht[St-2*qt],wt=ht[St-qt],Qt=ht[St+0],jt=ht[St+qt],Tr=ht[St+2*qt],mr=27*(Rr=ku[1020+3*(Qt-wt)+ku[1020+hr-jt]])+63>>7,Ir=18*Rr+63>>7,Rr=9*Rr+63>>7;ht[St-3*qt]=qn[255+ht[St-3*qt]+Rr],ht[St-2*qt]=qn[255+hr+Ir],ht[St-qt]=qn[255+wt+mr],ht[St+0]=qn[255+Qt-mr],ht[St+qt]=qn[255+jt-Ir],ht[St+2*qt]=qn[255+Tr-Rr]}K+=ke}}function Ca(V,K,he,ke,Ge,Je,tt,He){for(Je=2*Je+1;0<Ge--;){if(so(V,K,he,Je,tt))if(Pl(V,K,he,He))Rs(V,K,he);else{var ht=V,St=K,qt=he,hr=ht[St-qt],wt=ht[St+0],Qt=ht[St+qt],jt=Js[112+(4+(Tr=3*(wt-hr))>>3)],Tr=Js[112+(Tr+3>>3)],mr=jt+1>>1;ht[St-2*qt]=qn[255+ht[St-2*qt]+mr],ht[St-qt]=qn[255+hr+Tr],ht[St+0]=qn[255+wt-jt],ht[St+qt]=qn[255+Qt-mr]}K+=ke}}function le(V,K,he,ke,Ge,Je){Gi(V,K,he,1,16,ke,Ge,Je)}function Ve(V,K,he,ke,Ge,Je){Gi(V,K,1,he,16,ke,Ge,Je)}function pt(V,K,he,ke,Ge,Je){var tt;for(tt=3;0<tt;--tt)Ca(V,K+=4*he,he,1,16,ke,Ge,Je)}function Dt(V,K,he,ke,Ge,Je){var tt;for(tt=3;0<tt;--tt)Ca(V,K+=4,1,he,16,ke,Ge,Je)}function tr(V,K,he,ke,Ge,Je,tt,He){Gi(V,K,Ge,1,8,Je,tt,He),Gi(he,ke,Ge,1,8,Je,tt,He)}function Pr(V,K,he,ke,Ge,Je,tt,He){Gi(V,K,1,Ge,8,Je,tt,He),Gi(he,ke,1,Ge,8,Je,tt,He)}function $r(V,K,he,ke,Ge,Je,tt,He){Ca(V,K+4*Ge,Ge,1,8,Je,tt,He),Ca(he,ke+4*Ge,Ge,1,8,Je,tt,He)}function xn(V,K,he,ke,Ge,Je,tt,He){Ca(V,K+4,1,Ge,8,Je,tt,He),Ca(he,ke+4,1,Ge,8,Je,tt,He)}function pn(){this.ba=new bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Yn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ei(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function yi(){this.ua=0,this.Wa=new Wt,this.vb=new Wt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ue,this.yc=new ie}function Li(){this.xb=this.a=0,this.l=new qo,this.ca=new bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Se,this.Pb=0,this.wd=new Se,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new yi,this.ab=0,this.gc=l(4,ei),this.Oc=0}function Ii(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new qo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mi(V,K,he,ke,Ge,Je,tt){for(V=V==null?0:V[K+0],K=0;K<tt;++K)Ge[Je+K]=V+he[ke+K]&255,V=Ge[Je+K]}function Ea(V,K,he,ke,Ge,Je,tt){var He;if(V==null)mi(null,null,he,ke,Ge,Je,tt);else for(He=0;He<tt;++He)Ge[Je+He]=V[K+He]+he[ke+He]&255}function Qi(V,K,he,ke,Ge,Je,tt){if(V==null)mi(null,null,he,ke,Ge,Je,tt);else{var He,ht=V[K+0],St=ht,qt=ht;for(He=0;He<tt;++He)St=qt+(ht=V[K+He])-St,qt=he[ke+He]+(-256&St?0>St?0:255:St)&255,St=ht,Ge[Je+He]=qt}}function Fa(V,K,he,ke){var Ge=K.width,Je=K.o;if(t(V!=null&&K!=null),0>he||0>=ke||he+ke>Je)return null;if(!V.Cc){if(V.ga==null){var tt;if(V.ga=new Ii,(tt=V.ga==null)||(tt=K.width*K.o,t(V.Gb.length==0),V.Gb=o(tt),V.Uc=0,V.Gb==null?tt=0:(V.mb=V.Gb,V.nb=V.Uc,V.rc=null,tt=1),tt=!tt),!tt){tt=V.ga;var He=V.Fa,ht=V.P,St=V.qc,qt=V.mb,hr=V.nb,wt=ht+1,Qt=St-1,jt=tt.l;if(t(He!=null&&qt!=null&&K!=null),Ju[0]=null,Ju[1]=mi,Ju[2]=Ea,Ju[3]=Qi,tt.ca=qt,tt.tb=hr,tt.c=K.width,tt.i=K.height,t(0<tt.c&&0<tt.i),1>=St)K=0;else if(tt.$a=3&He[ht+0],tt.Z=He[ht+0]>>2&3,tt.Lc=He[ht+0]>>4&3,ht=He[ht+0]>>6&3,0>tt.$a||1<tt.$a||4<=tt.Z||1<tt.Lc||ht)K=0;else if(jt.put=en,jt.ac=Hn,jt.bc=Wn,jt.ma=tt,jt.width=K.width,jt.height=K.height,jt.Da=K.Da,jt.v=K.v,jt.va=K.va,jt.j=K.j,jt.o=K.o,tt.$a)e:{t(tt.$a==1),K=Di();t:for(;;){if(K==null){K=0;break e}if(t(tt!=null),tt.mc=K,K.c=tt.c,K.i=tt.i,K.l=tt.l,K.l.ma=tt,K.l.width=tt.c,K.l.height=tt.i,K.a=0,xe(K.m,He,wt,Qt),!Pn(tt.c,tt.i,1,K,null)||(K.ab==1&&K.gc[0].hc==3&&Lr(K.s)?(tt.ic=1,He=K.c*K.i,K.Ta=null,K.Ua=0,K.V=o(He),K.Ba=0,K.V==null?(K.a=1,K=0):K=1):(tt.ic=0,K=ga(K,tt.c)),!K))break t;K=1;break e}tt.mc=null,K=0}else K=Qt>=tt.c*tt.i;tt=!K}if(tt)return null;V.ga.Lc!=1?V.Ga=0:ke=Je-he}t(V.ga!=null),t(he+ke<=Je);e:{if(K=(He=V.ga).c,Je=He.l.o,He.$a==0){if(wt=V.rc,Qt=V.Vc,jt=V.Fa,ht=V.P+1+he*K,St=V.mb,qt=V.nb+he*K,t(ht<=V.P+V.qc),He.Z!=0)for(t(Ju[He.Z]!=null),tt=0;tt<ke;++tt)Ju[He.Z](wt,Qt,jt,ht,St,qt,K),wt=St,Qt=qt,qt+=K,ht+=K;else for(tt=0;tt<ke;++tt)n(St,qt,jt,ht,K),wt=St,Qt=qt,qt+=K,ht+=K;V.rc=wt,V.Vc=Qt}else{if(t(He.mc!=null),K=he+ke,t((tt=He.mc)!=null),t(K<=tt.i),tt.C>=K)K=1;else if(He.ic||sl(),He.ic){He=tt.V,wt=tt.Ba,Qt=tt.c;var Tr=tt.i,mr=(jt=1,ht=tt.$/Qt,St=tt.$%Qt,qt=tt.m,hr=tt.s,tt.$),Ir=Qt*Tr,Rr=Qt*K,Yr=hr.wc,Vr=mr<Rr?Ar(hr,St,ht):null;t(mr<=Ir),t(K<=Tr),t(Lr(hr));t:for(;;){for(;!qt.h&&mr<Rr;){if(St&Yr||(Vr=Ar(hr,St,ht)),t(Vr!=null),$e(qt),256>(Tr=mt(Vr.G[0],Vr.H[0],qt)))He[wt+mr]=Tr,++mr,++St>=Qt&&(St=0,++ht<=K&&!(ht%16)&&gn(tt,ht));else{if(!(280>Tr)){jt=0;break t}Tr=Be(Tr-256,qt);var $n,kn=mt(Vr.G[4],Vr.H[4],qt);if($e(qt),!(mr>=(kn=gt(Qt,kn=Be(kn,qt)))&&Ir-mr>=Tr)){jt=0;break t}for($n=0;$n<Tr;++$n)He[wt+mr+$n]=He[wt+mr+$n-kn];for(mr+=Tr,St+=Tr;St>=Qt;)St-=Qt,++ht<=K&&!(ht%16)&&gn(tt,ht);mr<Rr&&St&Yr&&(Vr=Ar(hr,St,ht))}t(qt.h==De(qt))}gn(tt,ht>K?K:ht);break t}!jt||qt.h&&mr<Ir?(jt=0,tt.a=qt.h?5:3):tt.$=mr,K=jt}else K=_i(tt,tt.V,tt.Ba,tt.c,tt.i,K,na);if(!K){ke=0;break e}}he+ke>=Je&&(V.Cc=1),ke=1}if(!ke)return null;if(V.Cc&&((ke=V.ga)!=null&&(ke.mc=null),V.ga=null,0<V.Ga))return alert("todo:WebPDequantizeLevels"),null}return V.nb+he*Ge}function Qo(V,K,he,ke,Ge,Je){for(;0<Ge--;){var tt,He=V,ht=K+(he?1:0),St=V,qt=K+(he?0:3);for(tt=0;tt<ke;++tt){var hr=St[qt+4*tt];hr!=255&&(hr*=32897,He[ht+4*tt+0]=He[ht+4*tt+0]*hr>>23,He[ht+4*tt+1]=He[ht+4*tt+1]*hr>>23,He[ht+4*tt+2]=He[ht+4*tt+2]*hr>>23)}K+=Je}}function Ns(V,K,he,ke,Ge){for(;0<ke--;){var Je;for(Je=0;Je<he;++Je){var tt=V[K+2*Je+0],He=15&(St=V[K+2*Je+1]),ht=4369*He,St=(240&St|St>>4)*ht>>16;V[K+2*Je+0]=(240&tt|tt>>4)*ht>>16&240|(15&tt|tt<<4)*ht>>16>>4&15,V[K+2*Je+1]=240&St|He}K+=Ge}}function Xl(V,K,he,ke,Ge,Je,tt,He){var ht,St,qt=255;for(St=0;St<Ge;++St){for(ht=0;ht<ke;++ht){var hr=V[K+ht];Je[tt+4*ht]=hr,qt&=hr}K+=he,tt+=He}return qt!=255}function vo(V,K,he,ke,Ge){var Je;for(Je=0;Je<Ge;++Je)he[ke+Je]=V[K+Je]>>8}function sl(){Hi=Qo,ha=Ns,Ra=Xl,bo=vo}function Wi(V,K,he){Y[V]=function(ke,Ge,Je,tt,He,ht,St,qt,hr,wt,Qt,jt,Tr,mr,Ir,Rr,Yr){var Vr,$n=Yr-1>>1,kn=He[ht+0]|St[qt+0]<<16,Si=hr[wt+0]|Qt[jt+0]<<16;t(ke!=null);var Fn=3*kn+Si+131074>>2;for(K(ke[Ge+0],255&Fn,Fn>>16,Tr,mr),Je!=null&&(Fn=3*Si+kn+131074>>2,K(Je[tt+0],255&Fn,Fn>>16,Ir,Rr)),Vr=1;Vr<=$n;++Vr){var $i=He[ht+Vr]|St[qt+Vr]<<16,Ro=hr[wt+Vr]|Qt[jt+Vr]<<16,ui=kn+$i+Si+Ro+524296,sn=ui+2*($i+Si)>>3;Fn=sn+kn>>1,kn=(ui=ui+2*(kn+Ro)>>3)+$i>>1,K(ke[Ge+2*Vr-1],255&Fn,Fn>>16,Tr,mr+(2*Vr-1)*he),K(ke[Ge+2*Vr-0],255&kn,kn>>16,Tr,mr+(2*Vr-0)*he),Je!=null&&(Fn=ui+Si>>1,kn=sn+Ro>>1,K(Je[tt+2*Vr-1],255&Fn,Fn>>16,Ir,Rr+(2*Vr-1)*he),K(Je[tt+2*Vr+0],255&kn,kn>>16,Ir,Rr+(2*Vr+0)*he)),kn=$i,Si=Ro}1&Yr||(Fn=3*kn+Si+131074>>2,K(ke[Ge+Yr-1],255&Fn,Fn>>16,Tr,mr+(Yr-1)*he),Je!=null&&(Fn=3*Si+kn+131074>>2,K(Je[tt+Yr-1],255&Fn,Fn>>16,Ir,Rr+(Yr-1)*he)))}}function Zs(){ts[Ku]=ih,ts[Sc]=ah,ts[pl]=Qu,ts[Au]=tp,ts[Qf]=rp,ts[eh]=np,ts[gm]=bm,ts[uf]=ah,ts[wd]=tp,ts[Cc]=rp,ts[Hc]=np}function Il(V){return V&-16384?0>V?0:255:V>>Td}function Xa(V,K){return Il((19077*V>>8)+(26149*K>>8)-14234)}function Ba(V,K,he){return Il((19077*V>>8)-(6419*K>>8)-(13320*he>>8)+8708)}function ro(V,K){return Il((19077*V>>8)+(33050*K>>8)-17685)}function Ta(V,K,he,ke,Ge){ke[Ge+0]=Xa(V,he),ke[Ge+1]=Ba(V,K,he),ke[Ge+2]=ro(V,K)}function ko(V,K,he,ke,Ge){ke[Ge+0]=ro(V,K),ke[Ge+1]=Ba(V,K,he),ke[Ge+2]=Xa(V,he)}function Yl(V,K,he,ke,Ge){var Je=Ba(V,K,he);K=Je<<3&224|ro(V,K)>>3,ke[Ge+0]=248&Xa(V,he)|Je>>5,ke[Ge+1]=K}function fa(V,K,he,ke,Ge){var Je=240&ro(V,K)|15;ke[Ge+0]=240&Xa(V,he)|Ba(V,K,he)>>4,ke[Ge+1]=Je}function wc(V,K,he,ke,Ge){ke[Ge+0]=255,Ta(V,K,he,ke,Ge+1)}function Vo(V,K,he,ke,Ge){ko(V,K,he,ke,Ge),ke[Ge+3]=255}function kl(V,K,he,ke,Ge){Ta(V,K,he,ke,Ge),ke[Ge+3]=255}function La(V,K){return 0>V?0:V>K?K:V}function ps(V,K,he){Y[V]=function(ke,Ge,Je,tt,He,ht,St,qt,hr){for(var wt=qt+(-2&hr)*he;qt!=wt;)K(ke[Ge+0],Je[tt+0],He[ht+0],St,qt),K(ke[Ge+1],Je[tt+0],He[ht+0],St,qt+he),Ge+=2,++tt,++ht,qt+=2*he;1&hr&&K(ke[Ge+0],Je[tt+0],He[ht+0],St,qt)}}function fu(V,K,he){return he==0?V==0?K==0?6:5:K==0?4:0:he}function hu(V,K,he,ke,Ge){switch(V>>>30){case 3:y(K,he,ke,Ge,0);break;case 2:T(K,he,ke,Ge);break;case 1:re(K,he,ke,Ge)}}function Ks(V,K){var he,ke,Ge=K.M,Je=K.Nb,tt=V.oc,He=V.pc+40,ht=V.oc,St=V.pc+584,qt=V.oc,hr=V.pc+600;for(he=0;16>he;++he)tt[He+32*he-1]=129;for(he=0;8>he;++he)ht[St+32*he-1]=129,qt[hr+32*he-1]=129;for(0<Ge?tt[He-1-32]=ht[St-1-32]=qt[hr-1-32]=129:(i(tt,He-32-1,127,21),i(ht,St-32-1,127,9),i(qt,hr-32-1,127,9)),ke=0;ke<V.za;++ke){var wt=K.ya[K.aa+ke];if(0<ke){for(he=-1;16>he;++he)n(tt,He+32*he-4,tt,He+32*he+12,4);for(he=-1;8>he;++he)n(ht,St+32*he-4,ht,St+32*he+4,4),n(qt,hr+32*he-4,qt,hr+32*he+4,4)}var Qt=V.Gd,jt=V.Hd+ke,Tr=wt.ad,mr=wt.Hc;if(0<Ge&&(n(tt,He-32,Qt[jt].y,0,16),n(ht,St-32,Qt[jt].f,0,8),n(qt,hr-32,Qt[jt].ea,0,8)),wt.Za){var Ir=tt,Rr=He-32+16;for(0<Ge&&(ke>=V.za-1?i(Ir,Rr,Qt[jt].y[15],4):n(Ir,Rr,Qt[jt+1].y,0,4)),he=0;4>he;he++)Ir[Rr+128+he]=Ir[Rr+256+he]=Ir[Rr+384+he]=Ir[Rr+0+he];for(he=0;16>he;++he,mr<<=2)Ir=tt,Rr=He+Qs[he],Mo[wt.Ob[he]](Ir,Rr),hu(mr,Tr,16*+he,Ir,Rr)}else if(Ir=fu(ke,Ge,wt.Ob[0]),aa[Ir](tt,He),mr!=0)for(he=0;16>he;++he,mr<<=2)hu(mr,Tr,16*+he,tt,He+Qs[he]);for(he=wt.Gc,Ir=fu(ke,Ge,wt.Dd),Lo[Ir](ht,St),Lo[Ir](qt,hr),mr=Tr,Ir=ht,Rr=St,255&(wt=0|he)&&(170&wt?z(mr,256,Ir,Rr):ye(mr,256,Ir,Rr)),wt=qt,mr=hr,255&(he>>=8)&&(170&he?z(Tr,320,wt,mr):ye(Tr,320,wt,mr)),Ge<V.Ub-1&&(n(Qt[jt].y,0,tt,He+480,16),n(Qt[jt].f,0,ht,St+224,8),n(Qt[jt].ea,0,qt,hr+224,8)),he=8*Je*V.B,Qt=V.sa,jt=V.ta+16*ke+16*Je*V.R,Tr=V.qa,wt=V.ra+8*ke+he,mr=V.Ha,Ir=V.Ia+8*ke+he,he=0;16>he;++he)n(Qt,jt+he*V.R,tt,He+32*he,16);for(he=0;8>he;++he)n(Tr,wt+he*V.B,ht,St+32*he,8),n(mr,Ir+he*V.B,qt,hr+32*he,8)}}function ll(V,K,he,ke,Ge,Je,tt,He,ht){var St=[0],qt=[0],hr=0,wt=ht!=null?ht.kd:0,Qt=ht??new Yn;if(V==null||12>he)return 7;Qt.data=V,Qt.w=K,Qt.ha=he,K=[K],he=[he],Qt.gb=[Qt.gb];e:{var jt=K,Tr=he,mr=Qt.gb;if(t(V!=null),t(Tr!=null),t(mr!=null),mr[0]=0,12<=Tr[0]&&!r(V,jt[0],"RIFF")){if(r(V,jt[0]+8,"WEBP")){mr=3;break e}var Ir=at(V,jt[0]+4);if(12>Ir||4294967286<Ir){mr=3;break e}if(wt&&Ir>Tr[0]-8){mr=7;break e}mr[0]=Ir,jt[0]+=12,Tr[0]-=12}mr=0}if(mr!=0)return mr;for(Ir=0<Qt.gb[0],he=he[0];;){e:{var Rr=V;Tr=K,mr=he;var Yr=St,Vr=qt,$n=jt=[0];if((Fn=hr=[hr])[0]=0,8>mr[0])mr=7;else{if(!r(Rr,Tr[0],"VP8X")){if(at(Rr,Tr[0]+4)!=10){mr=3;break e}if(18>mr[0]){mr=7;break e}var kn=at(Rr,Tr[0]+8),Si=1+It(Rr,Tr[0]+12);if(2147483648<=Si*(Rr=1+It(Rr,Tr[0]+15))){mr=3;break e}$n!=null&&($n[0]=kn),Yr!=null&&(Yr[0]=Si),Vr!=null&&(Vr[0]=Rr),Tr[0]+=18,mr[0]-=18,Fn[0]=1}mr=0}}if(hr=hr[0],jt=jt[0],mr!=0)return mr;if(Tr=!!(2&jt),!Ir&&hr)return 3;if(Je!=null&&(Je[0]=!!(16&jt)),tt!=null&&(tt[0]=Tr),He!=null&&(He[0]=0),tt=St[0],jt=qt[0],hr&&Tr&&ht==null){mr=0;break}if(4>he){mr=7;break}if(Ir&&hr||!Ir&&!hr&&!r(V,K[0],"ALPH")){he=[he],Qt.na=[Qt.na],Qt.P=[Qt.P],Qt.Sa=[Qt.Sa];e:{kn=V,mr=K,Ir=he;var Fn=Qt.gb;Yr=Qt.na,Vr=Qt.P,$n=Qt.Sa,Si=22,t(kn!=null),t(Ir!=null),Rr=mr[0];var $i=Ir[0];for(t(Yr!=null),t($n!=null),Yr[0]=null,Vr[0]=null,$n[0]=0;;){if(mr[0]=Rr,Ir[0]=$i,8>$i){mr=7;break e}var Ro=at(kn,Rr+4);if(4294967286<Ro){mr=3;break e}var ui=8+Ro+1&-2;if(Si+=ui,0<Fn&&Si>Fn){mr=3;break e}if(!r(kn,Rr,"VP8 ")||!r(kn,Rr,"VP8L")){mr=0;break e}if($i[0]<ui){mr=7;break e}r(kn,Rr,"ALPH")||(Yr[0]=kn,Vr[0]=Rr+8,$n[0]=Ro),Rr+=ui,$i-=ui}}if(he=he[0],Qt.na=Qt.na[0],Qt.P=Qt.P[0],Qt.Sa=Qt.Sa[0],mr!=0)break}he=[he],Qt.Ja=[Qt.Ja],Qt.xa=[Qt.xa];e:if(Fn=V,mr=K,Ir=he,Yr=Qt.gb[0],Vr=Qt.Ja,$n=Qt.xa,kn=mr[0],Rr=!r(Fn,kn,"VP8 "),Si=!r(Fn,kn,"VP8L"),t(Fn!=null),t(Ir!=null),t(Vr!=null),t($n!=null),8>Ir[0])mr=7;else{if(Rr||Si){if(Fn=at(Fn,kn+4),12<=Yr&&Fn>Yr-12){mr=3;break e}if(wt&&Fn>Ir[0]-8){mr=7;break e}Vr[0]=Fn,mr[0]+=8,Ir[0]-=8,$n[0]=Si}else $n[0]=5<=Ir[0]&&Fn[kn+0]==47&&!(Fn[kn+4]>>5),Vr[0]=Ir[0];mr=0}if(he=he[0],Qt.Ja=Qt.Ja[0],Qt.xa=Qt.xa[0],K=K[0],mr!=0)break;if(4294967286<Qt.Ja)return 3;if(He==null||Tr||(He[0]=Qt.xa?2:1),tt=[tt],jt=[jt],Qt.xa){if(5>he){mr=7;break}He=tt,wt=jt,Tr=Je,V==null||5>he?V=0:5<=he&&V[K+0]==47&&!(V[K+4]>>5)?(Ir=[0],Fn=[0],Yr=[0],xe(Vr=new Se,V,K,he),Pe(Vr,Ir,Fn,Yr)?(He!=null&&(He[0]=Ir[0]),wt!=null&&(wt[0]=Fn[0]),Tr!=null&&(Tr[0]=Yr[0]),V=1):V=0):V=0}else{if(10>he){mr=7;break}He=jt,V==null||10>he||!Yu(V,K+3,he-3)?V=0:(wt=V[K+0]|V[K+1]<<8|V[K+2]<<16,Tr=16383&(V[K+7]<<8|V[K+6]),V=16383&(V[K+9]<<8|V[K+8]),1&wt||3<(wt>>1&7)||!(wt>>4&1)||wt>>5>=Qt.Ja||!Tr||!V?V=0:(tt&&(tt[0]=Tr),He&&(He[0]=V),V=1))}if(!V||(tt=tt[0],jt=jt[0],hr&&(St[0]!=tt||qt[0]!=jt)))return 3;ht!=null&&(ht[0]=Qt,ht.offset=K-ht.w,t(4294967286>K-ht.w),t(ht.offset==ht.ha-he));break}return mr==0||mr==7&&hr&&ht==null?(Je!=null&&(Je[0]|=Qt.na!=null&&0<Qt.na.length),ke!=null&&(ke[0]=tt),Ge!=null&&(Ge[0]=jt),0):mr}function lo(V,K,he){var ke=K.width,Ge=K.height,Je=0,tt=0,He=ke,ht=Ge;if(K.Da=V!=null&&0<V.Da,K.Da&&(He=V.cd,ht=V.bd,Je=V.v,tt=V.j,11>he||(Je&=-2,tt&=-2),0>Je||0>tt||0>=He||0>=ht||Je+He>ke||tt+ht>Ge))return 0;if(K.v=Je,K.j=tt,K.va=Je+He,K.o=tt+ht,K.U=He,K.T=ht,K.da=V!=null&&0<V.da,K.da){if(!zt(He,ht,he=[V.ib],Je=[V.hb]))return 0;K.ib=he[0],K.hb=Je[0]}return K.ob=V!=null&&V.ob,K.Kb=V==null||!V.Sd,K.da&&(K.ob=K.ib<3*ke/4&&K.hb<3*Ge/4,K.Kb=0),1}function Ya(V){if(V==null)return 2;if(11>V.S){var K=V.f.RGBA;K.fb+=(V.height-1)*K.A,K.A=-K.A}else K=V.f.kb,V=V.height,K.O+=(V-1)*K.fa,K.fa=-K.fa,K.N+=(V-1>>1)*K.Ab,K.Ab=-K.Ab,K.W+=(V-1>>1)*K.Db,K.Db=-K.Db,K.F!=null&&(K.J+=(V-1)*K.lb,K.lb=-K.lb);return 0}function ms(V,K,he,ke){if(ke==null||0>=V||0>=K)return 2;if(he!=null){if(he.Da){var Ge=he.cd,Je=he.bd,tt=-2&he.v,He=-2&he.j;if(0>tt||0>He||0>=Ge||0>=Je||tt+Ge>V||He+Je>K)return 2;V=Ge,K=Je}if(he.da){if(!zt(V,K,Ge=[he.ib],Je=[he.hb]))return 2;V=Ge[0],K=Je[0]}}ke.width=V,ke.height=K;e:{var ht=ke.width,St=ke.height;if(V=ke.S,0>=ht||0>=St||!(V>=Ku&&13>V))V=2;else{if(0>=ke.Rd&&ke.sd==null){tt=Je=Ge=K=0;var qt=(He=ht*Xc[V])*St;if(11>V||(Je=(St+1)/2*(K=(ht+1)/2),V==12&&(tt=(Ge=ht)*St)),(St=o(qt+2*Je+tt))==null){V=1;break e}ke.sd=St,11>V?((ht=ke.f.RGBA).eb=St,ht.fb=0,ht.A=He,ht.size=qt):((ht=ke.f.kb).y=St,ht.O=0,ht.fa=He,ht.Fd=qt,ht.f=St,ht.N=0+qt,ht.Ab=K,ht.Cd=Je,ht.ea=St,ht.W=0+qt+Je,ht.Db=K,ht.Ed=Je,V==12&&(ht.F=St,ht.J=0+qt+2*Je),ht.Tc=tt,ht.lb=Ge)}if(K=1,Ge=ke.S,Je=ke.width,tt=ke.height,Ge>=Ku&&13>Ge)if(11>Ge)V=ke.f.RGBA,K&=(He=Math.abs(V.A))*(tt-1)+Je<=V.size,K&=He>=Je*Xc[Ge],K&=V.eb!=null;else{V=ke.f.kb,He=(Je+1)/2,qt=(tt+1)/2,ht=Math.abs(V.fa),St=Math.abs(V.Ab);var hr=Math.abs(V.Db),wt=Math.abs(V.lb),Qt=wt*(tt-1)+Je;K&=ht*(tt-1)+Je<=V.Fd,K&=St*(qt-1)+He<=V.Cd,K=(K&=hr*(qt-1)+He<=V.Ed)&ht>=Je&St>=He&hr>=He,K&=V.y!=null,K&=V.f!=null,K&=V.ea!=null,Ge==12&&(K&=wt>=Je,K&=Qt<=V.Tc,K&=V.F!=null)}else K=0;V=K?0:2}}return V!=0||he!=null&&he.fd&&(V=Ya(ke)),V}var no=64,ul=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Uo=24,cl=32,ia=8,Zl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ur("Predictor0","PredictorAdd0"),Y.Predictor0=function(){return 4278190080},Y.Predictor1=function(V){return V},Y.Predictor2=function(V,K,he){return K[he+0]},Y.Predictor3=function(V,K,he){return K[he+1]},Y.Predictor4=function(V,K,he){return K[he-1]},Y.Predictor5=function(V,K,he){return yr(yr(V,K[he+1]),K[he+0])},Y.Predictor6=function(V,K,he){return yr(V,K[he-1])},Y.Predictor7=function(V,K,he){return yr(V,K[he+0])},Y.Predictor8=function(V,K,he){return yr(K[he-1],K[he+0])},Y.Predictor9=function(V,K,he){return yr(K[he+0],K[he+1])},Y.Predictor10=function(V,K,he){return yr(yr(V,K[he-1]),yr(K[he+0],K[he+1]))},Y.Predictor11=function(V,K,he){var ke=K[he+0];return 0>=ir(ke>>24&255,V>>24&255,(K=K[he-1])>>24&255)+ir(ke>>16&255,V>>16&255,K>>16&255)+ir(ke>>8&255,V>>8&255,K>>8&255)+ir(255&ke,255&V,255&K)?ke:V},Y.Predictor12=function(V,K,he){var ke=K[he+0];return(pr((V>>24&255)+(ke>>24&255)-((K=K[he-1])>>24&255))<<24|pr((V>>16&255)+(ke>>16&255)-(K>>16&255))<<16|pr((V>>8&255)+(ke>>8&255)-(K>>8&255))<<8|pr((255&V)+(255&ke)-(255&K)))>>>0},Y.Predictor13=function(V,K,he){var ke=K[he-1];return(Jt((V=yr(V,K[he+0]))>>24&255,ke>>24&255)<<24|Jt(V>>16&255,ke>>16&255)<<16|Jt(V>>8&255,ke>>8&255)<<8|Jt(255&V,255&ke))>>>0};var Os=Y.PredictorAdd0;Y.PredictorAdd1=xr,ur("Predictor2","PredictorAdd2"),ur("Predictor3","PredictorAdd3"),ur("Predictor4","PredictorAdd4"),ur("Predictor5","PredictorAdd5"),ur("Predictor6","PredictorAdd6"),ur("Predictor7","PredictorAdd7"),ur("Predictor8","PredictorAdd8"),ur("Predictor9","PredictorAdd9"),ur("Predictor10","PredictorAdd10"),ur("Predictor11","PredictorAdd11"),ur("Predictor12","PredictorAdd12"),ur("Predictor13","PredictorAdd13");var gs=Y.PredictorAdd2;_e("ColorIndexInverseTransform","MapARGB","32b",function(V){return V>>8&255},function(V){return V}),_e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(V){return V},function(V){return V>>8&255});var dl,Kl=Y.ColorIndexInverseTransform,ys=Y.MapARGB,Al=Y.VP8LColorIndexInverseTransformAlpha,fl=Y.MapAlpha,$t=Y.VP8LPredictorsAdd=[];$t.length=16,(Y.VP8LPredictors=[]).length=16,(Y.VP8LPredictorsAdd_C=[]).length=16,(Y.VP8LPredictors_C=[]).length=16;var er,Jr,yn,di,vn,E,m,y,T,z,re,ye,Le,Ke,yt,Yt,or,Nr,on,wn,Ln,bn,Tn,qi,Hi,ha,Ra,bo,es=o(511),hl=o(2041),pu=o(225),vs=o(767),Ao=0,ku=hl,Js=pu,qn=vs,_o=es,Ku=0,Sc=1,pl=2,Au=3,Qf=4,eh=5,gm=6,uf=7,wd=8,Cc=9,Hc=10,Yh=[2,3,7],ym=[3,3,11],Sd=[280,256,256,256,40],cf=[0,1,1,1,0],df=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],th=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wc=8,ff=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Cd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],mu=null,Kh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Jh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fy=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ep=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],aa=[],Mo=[],Lo=[],nh=1,Ed=2,Ju=[],ts=[];Wi("UpsampleRgbLinePair",Ta,3),Wi("UpsampleBgrLinePair",ko,3),Wi("UpsampleRgbaLinePair",kl,4),Wi("UpsampleBgraLinePair",Vo,4),Wi("UpsampleArgbLinePair",wc,4),Wi("UpsampleRgba4444LinePair",fa,2),Wi("UpsampleRgb565LinePair",Yl,2);var ih=Y.UpsampleRgbLinePair,Qu=Y.UpsampleBgrLinePair,ah=Y.UpsampleRgbaLinePair,tp=Y.UpsampleBgraLinePair,rp=Y.UpsampleArgbLinePair,np=Y.UpsampleRgba4444LinePair,bm=Y.UpsampleRgb565LinePair,hf=16,ml=1<<hf-1,Mu=-227,Fs=482,Td=6,oh=0,_m=o(256),xm=o(256),Pd=o(256),ip=o(256),Id=o(Fs-Mu),wm=o(Fs-Mu);ps("YuvToRgbRow",Ta,3),ps("YuvToBgrRow",ko,3),ps("YuvToRgbaRow",kl,4),ps("YuvToBgraRow",Vo,4),ps("YuvToArgbRow",wc,4),ps("YuvToRgba4444Row",fa,2),ps("YuvToRgb565Row",Yl,2);var Qs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gl=[0,2,8],kd=[8,7,6,4,4,2,2,2,1,1,1,1],gu=1;this.WebPDecodeRGBA=function(V,K,he,ke,Ge){var Je=Sc,tt=new pn,He=new bt;tt.ba=He,He.S=Je,He.width=[He.width],He.height=[He.height];var ht=He.width,St=He.height,qt=new vr;if(qt==null||V==null)var hr=2;else t(qt!=null),hr=ll(V,K,he,qt.width,qt.height,qt.Pd,qt.Qd,qt.format,null);if(hr!=0?ht=0:(ht!=null&&(ht[0]=qt.width[0]),St!=null&&(St[0]=qt.height[0]),ht=1),ht){He.width=He.width[0],He.height=He.height[0],ke!=null&&(ke[0]=He.width),Ge!=null&&(Ge[0]=He.height);e:{if(ke=new qo,(Ge=new Yn).data=V,Ge.w=K,Ge.ha=he,Ge.kd=1,K=[0],t(Ge!=null),((V=ll(Ge.data,Ge.w,Ge.ha,null,null,null,K,null,Ge))==0||V==7)&&K[0]&&(V=4),(K=V)==0){if(t(tt!=null),ke.data=Ge.data,ke.w=Ge.w+Ge.offset,ke.ha=Ge.ha-Ge.offset,ke.put=en,ke.ac=Hn,ke.bc=Wn,ke.ma=tt,Ge.xa){if((V=Di())==null){tt=1;break e}if((function(wt,Qt){var jt=[0],Tr=[0],mr=[0];t:for(;;){if(wt==null)return 0;if(Qt==null)return wt.a=2,0;if(wt.l=Qt,wt.a=0,xe(wt.m,Qt.data,Qt.w,Qt.ha),!Pe(wt.m,jt,Tr,mr)){wt.a=3;break t}if(wt.xb=Ed,Qt.width=jt[0],Qt.height=Tr[0],!Pn(jt[0],Tr[0],1,wt,null))break t;return 1}return t(wt.a!=0),0})(V,ke)){if(ke=(K=ms(ke.width,ke.height,tt.Oa,tt.ba))==0){t:{ke=V;r:for(;;){if(ke==null){ke=0;break t}if(t(ke.s.yc!=null),t(ke.s.Ya!=null),t(0<ke.s.Wb),t((he=ke.l)!=null),t((Ge=he.ma)!=null),ke.xb!=0){if(ke.ca=Ge.ba,ke.tb=Ge.tb,t(ke.ca!=null),!lo(Ge.Oa,he,Au)){ke.a=2;break r}if(!ga(ke,he.width)||he.da)break r;if((he.da||Kt(ke.ca.S))&&sl(),11>ke.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ke.ca.f.kb.F!=null&&sl()),ke.Pb&&0<ke.s.ua&&ke.s.vb.X==null&&!je(ke.s.vb,ke.s.Wa.Xa)){ke.a=1;break r}ke.xb=0}if(!_i(ke,ke.V,ke.Ba,ke.c,ke.i,he.o,wi))break r;Ge.Dc=ke.Ma,ke=1;break t}t(ke.a!=0),ke=0}ke=!ke}ke&&(K=V.a)}else K=V.a}else{if((V=new Xu)==null){tt=1;break e}if(V.Fa=Ge.na,V.P=Ge.P,V.qc=Ge.Sa,Zu(V,ke)){if((K=ms(ke.width,ke.height,tt.Oa,tt.ba))==0){if(V.Aa=0,he=tt.Oa,t((Ge=V)!=null),he!=null){if(0<(ht=0>(ht=he.Md)?0:100<ht?255:255*ht/100)){for(St=qt=0;4>St;++St)12>(hr=Ge.pb[St]).lc&&(hr.ia=ht*kd[0>hr.lc?0:hr.lc]>>3),qt|=hr.ia;qt&&(alert("todo:VP8InitRandom"),Ge.ia=1)}Ge.Ga=he.Id,100<Ge.Ga?Ge.Ga=100:0>Ge.Ga&&(Ge.Ga=0)}(function(wt,Qt){if(wt==null)return 0;if(Qt==null)return da(wt,2,"NULL VP8Io parameter in VP8Decode().");if(!wt.cb&&!Zu(wt,Qt))return 0;if(t(wt.cb),Qt.ac==null||Qt.ac(Qt)){Qt.ob&&(wt.L=0);var jt=gl[wt.L];if(wt.L==2?(wt.yb=0,wt.zb=0):(wt.yb=Qt.v-jt>>4,wt.zb=Qt.j-jt>>4,0>wt.yb&&(wt.yb=0),0>wt.zb&&(wt.zb=0)),wt.Va=Qt.o+15+jt>>4,wt.Hb=Qt.va+15+jt>>4,wt.Hb>wt.za&&(wt.Hb=wt.za),wt.Va>wt.Ub&&(wt.Va=wt.Ub),0<wt.L){var Tr=wt.ed;for(jt=0;4>jt;++jt){var mr;if(wt.Qa.Cb){var Ir=wt.Qa.Lb[jt];wt.Qa.Fb||(Ir+=Tr.Tb)}else Ir=Tr.Tb;for(mr=0;1>=mr;++mr){var Rr=wt.gd[jt][mr],Yr=Ir;if(Tr.Pc&&(Yr+=Tr.vd[0],mr&&(Yr+=Tr.od[0])),0<(Yr=0>Yr?0:63<Yr?63:Yr)){var Vr=Yr;0<Tr.wb&&(Vr=4<Tr.wb?Vr>>2:Vr>>1)>9-Tr.wb&&(Vr=9-Tr.wb),1>Vr&&(Vr=1),Rr.dd=Vr,Rr.tc=2*Yr+Vr,Rr.ld=40<=Yr?2:15<=Yr?1:0}else Rr.tc=0;Rr.La=mr}}}jt=0}else da(wt,6,"Frame setup failed"),jt=wt.a;if(jt=jt==0){if(jt){wt.$c=0,0<wt.Aa||(wt.Ic=gu);t:{jt=wt.Ic,Tr=4*(Vr=wt.za);var $n=32*Vr,kn=Vr+1,Si=0<wt.L?Vr*(0<wt.Aa?2:1):0,Fn=(wt.Aa==2?2:1)*Vr;if((Rr=Tr+832+(mr=3*(16*jt+gl[wt.L])/2*$n)+(Ir=wt.Fa!=null&&0<wt.Fa.length?wt.Kc.c*wt.Kc.i:0))!=Rr)jt=0;else{if(Rr>wt.Vb){if(wt.Vb=0,wt.Ec=o(Rr),wt.Fc=0,wt.Ec==null){jt=da(wt,1,"no memory during frame initialization.");break t}wt.Vb=Rr}Rr=wt.Ec,Yr=wt.Fc,wt.Ac=Rr,wt.Bc=Yr,Yr+=Tr,wt.Gd=l($n,To),wt.Hd=0,wt.rb=l(kn+1,Gl),wt.sb=1,wt.wa=Si?l(Si,Nn):null,wt.Y=0,wt.D.Nb=0,wt.D.wa=wt.wa,wt.D.Y=wt.Y,0<wt.Aa&&(wt.D.Y+=Vr),t(!0),wt.oc=Rr,wt.pc=Yr,Yr+=832,wt.ya=l(Fn,ya),wt.aa=0,wt.D.ya=wt.ya,wt.D.aa=wt.aa,wt.Aa==2&&(wt.D.aa+=Vr),wt.R=16*Vr,wt.B=8*Vr,Vr=($n=gl[wt.L])*wt.R,$n=$n/2*wt.B,wt.sa=Rr,wt.ta=Yr+Vr,wt.qa=wt.sa,wt.ra=wt.ta+16*jt*wt.R+$n,wt.Ha=wt.qa,wt.Ia=wt.ra+8*jt*wt.B+$n,wt.$c=0,Yr+=mr,wt.mb=Ir?Rr:null,wt.nb=Ir?Yr:null,t(Yr+Ir<=wt.Fc+wt.Vb),Ms(wt),i(wt.Ac,wt.Bc,0,Tr),jt=1}}if(jt){if(Qt.ka=0,Qt.y=wt.sa,Qt.O=wt.ta,Qt.f=wt.qa,Qt.N=wt.ra,Qt.ea=wt.Ha,Qt.Vd=wt.Ia,Qt.fa=wt.R,Qt.Rc=wt.B,Qt.F=null,Qt.J=0,!Ao){for(jt=-255;255>=jt;++jt)es[255+jt]=0>jt?-jt:jt;for(jt=-1020;1020>=jt;++jt)hl[1020+jt]=-128>jt?-128:127<jt?127:jt;for(jt=-112;112>=jt;++jt)pu[112+jt]=-16>jt?-16:15<jt?15:jt;for(jt=-255;510>=jt;++jt)vs[255+jt]=0>jt?0:255<jt?255:jt;Ao=1}m=Ct,y=Wl,z=J,re=pe,ye=Xe,T=Hl,Le=le,Ke=Ve,yt=tr,Yt=Pr,or=pt,Nr=Dt,on=$r,wn=xn,Ln=Ds,bn=Ys,Tn=Ha,qi=Wa,Mo[0]=On,Mo[1]=kt,Mo[2]=Cr,Mo[3]=tn,Mo[4]=ba,Mo[5]=_a,Mo[6]=gi,Mo[7]=si,Mo[8]=$o,Mo[9]=An,aa[0]=Gr,aa[1]=Or,aa[2]=qr,aa[3]=Br,aa[4]=Un,aa[5]=pi,aa[6]=mn,Lo[0]=jn,Lo[1]=Xt,Lo[2]=Mn,Lo[3]=En,Lo[4]=oo,Lo[5]=yo,Lo[6]=Io,jt=1}else jt=0}jt&&(jt=(function($i,Ro){for($i.M=0;$i.M<$i.Va;++$i.M){var ui,sn=$i.Jc[$i.M&$i.Xb],dn=$i.m,io=$i;for(ui=0;ui<io.za;++ui){var bi=dn,Vi=io,Pa=Vi.Ac,rs=Vi.Bc+4*ui,Za=Vi.zc,za=Vi.ya[Vi.aa+ui];if(Vi.Qa.Bb?za.$b=Ye(bi,Vi.Pa.jb[0])?2+Ye(bi,Vi.Pa.jb[2]):Ye(bi,Vi.Pa.jb[1]):za.$b=0,Vi.kc&&(za.Ad=Ye(bi,Vi.Bd)),za.Za=!Ye(bi,145)+0,za.Za){var hn=za.Ob,Sn=0;for(Vi=0;4>Vi;++Vi){var uo,ki=Za[0+Vi];for(uo=0;4>uo;++uo){ki=Qh[Pa[rs+uo]][ki];for(var Zi=Jh[Ye(bi,ki[0])];0<Zi;)Zi=Jh[2*Zi+Ye(bi,ki[Zi])];ki=-Zi,Pa[rs+uo]=ki}n(hn,Sn,Pa,rs,4),Sn+=4,Za[0+Vi]=ki}}else ki=Ye(bi,156)?Ye(bi,128)?1:3:Ye(bi,163)?2:0,za.Ob[0]=ki,i(Pa,rs,ki,4),i(Za,0,ki,4);za.Dd=Ye(bi,142)?Ye(bi,114)?Ye(bi,183)?1:3:2:0}if(io.m.Ka)return da($i,7,"Premature end-of-partition0 encountered.");for(;$i.ja<$i.za;++$i.ja){if(io=sn,bi=(dn=$i).rb[dn.sb-1],Pa=dn.rb[dn.sb+dn.ja],ui=dn.ya[dn.aa+dn.ja],rs=dn.kc?ui.Ad:0)bi.la=Pa.la=0,ui.Za||(bi.Na=Pa.Na=0),ui.Hc=0,ui.Gc=0,ui.ia=0;else{var Ui,oa;if(bi=Pa,Pa=io,rs=dn.Pa.Xc,Za=dn.ya[dn.aa+dn.ja],za=dn.pb[Za.$b],Vi=Za.ad,hn=0,Sn=dn.rb[dn.sb-1],ki=uo=0,i(Vi,hn,0,384),Za.Za)var xa=0,yu=rs[3];else{Zi=o(16);var ja=bi.Na+Sn.Na;if(ja=mu(Pa,rs[1],ja,za.Eb,0,Zi,0),bi.Na=Sn.Na=(0<ja)+0,1<ja)m(Zi,0,Vi,hn);else{var Ci=Zi[0]+3>>3;for(Zi=0;256>Zi;Zi+=16)Vi[hn+Zi]=Ci}xa=1,yu=rs[0]}var hi=15&bi.la,co=15&Sn.la;for(Zi=0;4>Zi;++Zi){var ns=1&co;for(Ci=oa=0;4>Ci;++Ci)hi=hi>>1|(ns=(ja=mu(Pa,yu,ja=ns+(1&hi),za.Sc,xa,Vi,hn))>xa)<<7,oa=oa<<2|(3<ja?3:1<ja?2:Vi[hn+0]!=0),hn+=16;hi>>=4,co=co>>1|ns<<7,uo=(uo<<8|oa)>>>0}for(yu=hi,xa=co>>4,Ui=0;4>Ui;Ui+=2){for(oa=0,hi=bi.la>>4+Ui,co=Sn.la>>4+Ui,Zi=0;2>Zi;++Zi){for(ns=1&co,Ci=0;2>Ci;++Ci)ja=ns+(1&hi),hi=hi>>1|(ns=0<(ja=mu(Pa,rs[2],ja,za.Qc,0,Vi,hn)))<<3,oa=oa<<2|(3<ja?3:1<ja?2:Vi[hn+0]!=0),hn+=16;hi>>=2,co=co>>1|ns<<5}ki|=oa<<4*Ui,yu|=hi<<4<<Ui,xa|=(240&co)<<Ui}bi.la=yu,Sn.la=xa,Za.Hc=uo,Za.Gc=ki,Za.ia=43690&ki?0:za.ia,rs=!(uo|ki)}if(0<dn.L&&(dn.wa[dn.Y+dn.ja]=dn.gd[ui.$b][ui.Za],dn.wa[dn.Y+dn.ja].La|=!rs),io.Ka)return da($i,7,"Premature end-of-file encountered.")}if(Ms($i),dn=Ro,io=1,ui=(sn=$i).D,bi=0<sn.L&&sn.M>=sn.zb&&sn.M<=sn.Va,sn.Aa==0)t:{if(ui.M=sn.M,ui.uc=bi,Ks(sn,ui),io=1,ui=(oa=sn.D).Nb,bi=(ki=gl[sn.L])*sn.R,Pa=ki/2*sn.B,Zi=16*ui*sn.R,Ci=8*ui*sn.B,rs=sn.sa,Za=sn.ta-bi+Zi,za=sn.qa,Vi=sn.ra-Pa+Ci,hn=sn.Ha,Sn=sn.Ia-Pa+Ci,co=(hi=oa.M)==0,uo=hi>=sn.Va-1,sn.Aa==2&&Ks(sn,oa),oa.uc)for(ns=(ja=sn).D.M,t(ja.D.uc),oa=ja.yb;oa<ja.Hb;++oa){xa=oa,yu=ns;var Do=(el=(Ho=ja).D).Nb;Ui=Ho.R;var el=el.wa[el.Y+xa],is=Ho.sa,No=Ho.ta+16*Do*Ui+16*xa,bs=el.dd,pa=el.tc;if(pa!=0)if(t(3<=pa),Ho.L==1)0<xa&&bn(is,No,Ui,pa+4),el.La&&qi(is,No,Ui,pa),0<yu&&Ln(is,No,Ui,pa+4),el.La&&Tn(is,No,Ui,pa);else{var Go=Ho.B,Ml=Ho.qa,ec=Ho.ra+8*Do*Go+8*xa,Jl=Ho.Ha,Ho=Ho.Ia+8*Do*Go+8*xa;Do=el.ld,0<xa&&(Ke(is,No,Ui,pa+4,bs,Do),Yt(Ml,ec,Jl,Ho,Go,pa+4,bs,Do)),el.La&&(Nr(is,No,Ui,pa,bs,Do),wn(Ml,ec,Jl,Ho,Go,pa,bs,Do)),0<yu&&(Le(is,No,Ui,pa+4,bs,Do),yt(Ml,ec,Jl,Ho,Go,pa+4,bs,Do)),el.La&&(or(is,No,Ui,pa,bs,Do),on(Ml,ec,Jl,Ho,Go,pa,bs,Do))}}if(sn.ia&&alert("todo:DitherRow"),dn.put!=null){if(oa=16*hi,hi=16*(hi+1),co?(dn.y=sn.sa,dn.O=sn.ta+Zi,dn.f=sn.qa,dn.N=sn.ra+Ci,dn.ea=sn.Ha,dn.W=sn.Ia+Ci):(oa-=ki,dn.y=rs,dn.O=Za,dn.f=za,dn.N=Vi,dn.ea=hn,dn.W=Sn),uo||(hi-=ki),hi>dn.o&&(hi=dn.o),dn.F=null,dn.J=null,sn.Fa!=null&&0<sn.Fa.length&&oa<hi&&(dn.J=Fa(sn,dn,oa,hi-oa),dn.F=sn.mb,dn.F==null&&dn.F.length==0)){io=da(sn,3,"Could not decode alpha data.");break t}oa<dn.j&&(ki=dn.j-oa,oa=dn.j,t(!(1&ki)),dn.O+=sn.R*ki,dn.N+=sn.B*(ki>>1),dn.W+=sn.B*(ki>>1),dn.F!=null&&(dn.J+=dn.width*ki)),oa<hi&&(dn.O+=dn.v,dn.N+=dn.v>>1,dn.W+=dn.v>>1,dn.F!=null&&(dn.J+=dn.v),dn.ka=oa-dn.j,dn.U=dn.va-dn.v,dn.T=hi-oa,io=dn.put(dn))}ui+1!=sn.Ic||uo||(n(sn.sa,sn.ta-bi,rs,Za+16*sn.R,bi),n(sn.qa,sn.ra-Pa,za,Vi+8*sn.B,Pa),n(sn.Ha,sn.Ia-Pa,hn,Sn+8*sn.B,Pa))}if(!io)return da($i,6,"Output aborted.")}return 1})(wt,Qt)),Qt.bc!=null&&Qt.bc(Qt),jt&=1}return jt?(wt.cb=0,jt):0})(V,ke)||(K=V.a)}}else K=V.a}K==0&&tt.Oa!=null&&tt.Oa.fd&&(K=Ya(tt.ba))}tt=K}Je=tt!=0?null:11>Je?He.f.RGBA.eb:He.f.kb.y}else Je=null;return Je};var Xc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(Y,ae){for(var ee="",G=0;G<4;G++)ee+=String.fromCharCode(Y[ae++]);return ee}function g(Y,ae){return Y[ae+0]|Y[ae+1]<<8}function v(Y,ae){return(Y[ae+0]|Y[ae+1]<<8|Y[ae+2]<<16)>>>0}function x(Y,ae){return(Y[ae+0]|Y[ae+1]<<8|Y[ae+2]<<16|Y[ae+3]<<24)>>>0}new c;var b=[0],P=[0],I=[],k=new c,M=e,O=(function(Y,ae){var ee={},G=0,ie=!1,oe=0,ue=0;if(ee.frames=[],!(function(fe,Se){for(var we=0;we<4;we++)if(fe[Se+we]!="RIFF".charCodeAt(we))return!0;return!1})(Y,ae)){for(x(Y,ae+=4),ae+=8;ae<Y.length;){var de=p(Y,ae),Me=x(Y,ae+=4);ae+=4;var ge=Me+(1&Me);switch(de){case"VP8 ":case"VP8L":ee.frames[G]===void 0&&(ee.frames[G]={}),(Ae=ee.frames[G]).src_off=ie?ue:ae-8,Ae.src_size=oe+Me+8,G++,ie&&(ie=!1,oe=0,ue=0);break;case"VP8X":(Ae=ee.header={}).feature_flags=Y[ae];var xe=ae+4;Ae.canvas_width=1+v(Y,xe),xe+=3,Ae.canvas_height=1+v(Y,xe),xe+=3;break;case"ALPH":ie=!0,oe=ge+8,ue=ae-8;break;case"ANIM":(Ae=ee.header).bgcolor=x(Y,ae),xe=ae+4,Ae.loop_count=g(Y,xe),xe+=2;break;case"ANMF":var Ee,Ae;(Ae=ee.frames[G]={}).offset_x=2*v(Y,ae),ae+=3,Ae.offset_y=2*v(Y,ae),ae+=3,Ae.width=1+v(Y,ae),ae+=3,Ae.height=1+v(Y,ae),ae+=3,Ae.duration=v(Y,ae),ae+=3,Ee=Y[ae++],Ae.dispose=1&Ee,Ae.blend=Ee>>1&1}de!="ANMF"&&(ae+=ge)}return ee}})(M,0);O.response=M,O.rgbaoutput=!0,O.dataurl=!1;var F=O.header?O.header:null,N=O.frames?O.frames:null;if(F){F.loop_counter=F.loop_count,b=[F.canvas_height],P=[F.canvas_width];for(var $=0;$<N.length&&N[$].blend!=0;$++);}var j=N[0],U=k.WebPDecodeRGBA(M,j.src_off,j.src_size,P,b);j.rgba=U,j.imgwidth=P[0],j.imgheight=b[0];for(var H=0;H<P[0]*b[0]*4;H++)I[H]=U[H];return this.width=P,this.height=b,this.data=I,this}(function(e){var t,r,n,i,o,l,a,c,p,g=function(fe){return fe=fe||{},this.isStrokeTransparent=fe.isStrokeTransparent||!1,this.strokeOpacity=fe.strokeOpacity||1,this.strokeStyle=fe.strokeStyle||"#000000",this.fillStyle=fe.fillStyle||"#000000",this.isFillTransparent=fe.isFillTransparent||!1,this.fillOpacity=fe.fillOpacity||1,this.font=fe.font||"10px sans-serif",this.textBaseline=fe.textBaseline||"alphabetic",this.textAlign=fe.textAlign||"left",this.lineWidth=fe.lineWidth||1,this.lineJoin=fe.lineJoin||"miter",this.lineCap=fe.lineCap||"butt",this.path=fe.path||[],this.transform=fe.transform!==void 0?fe.transform.clone():new c,this.globalCompositeOperation=fe.globalCompositeOperation||"normal",this.globalAlpha=fe.globalAlpha||1,this.clip_path=fe.clip_path||[],this.currentPoint=fe.currentPoint||new l,this.miterLimit=fe.miterLimit||10,this.lastPoint=fe.lastPoint||new l,this.lineDashOffset=fe.lineDashOffset||0,this.lineDash=fe.lineDash||[],this.margin=fe.margin||[0,0,0,0],this.prevPageLastElemOffset=fe.prevPageLastElemOffset||0,this.ignoreClearRect=typeof fe.ignoreClearRect!="boolean"||fe.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,p=new g}]);var v=function(fe){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Se=fe;Object.defineProperty(this,"pdf",{get:function(){return Se}});var we=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return we},set:function(at){we=!!at}});var De=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return De},set:function(at){De=!!at}});var Re=0;Object.defineProperty(this,"posX",{get:function(){return Re},set:function(at){isNaN(at)||(Re=at)}});var $e=0;Object.defineProperty(this,"posY",{get:function(){return $e},set:function(at){isNaN(at)||($e=at)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(at){var je;typeof at=="number"?je=[at,at,at,at]:((je=new Array(4))[0]=at[0],je[1]=at.length>=2?at[1]:je[0],je[2]=at.length>=3?at[2]:je[0],je[3]=at.length>=4?at[3]:je[1]),p.margin=je}});var Oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Oe},set:function(at){Oe=at}});var it=0;Object.defineProperty(this,"lastBreak",{get:function(){return it},set:function(at){it=at}});var Ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ye},set:function(at){Ye=at}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(at){at instanceof g&&(p=at)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(at){p.path=at}});var rt=[];Object.defineProperty(this,"ctxStack",{get:function(){return rt},set:function(at){rt=at}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(at){var je;je=x(at),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(at){var je=x(at);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(at){["butt","round","square"].indexOf(at)!==-1&&(this.ctx.lineCap=at,this.pdf.setLineCap(at))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(at){isNaN(at)||(this.ctx.lineWidth=at,this.pdf.setLineWidth(at))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(at){["bevel","round","miter"].indexOf(at)!==-1&&(this.ctx.lineJoin=at,this.pdf.setLineJoin(at))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(at){isNaN(at)||(this.ctx.miterLimit=at,this.pdf.setMiterLimit(at))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(at){this.ctx.textBaseline=at}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(at){["right","end","center","left","start"].indexOf(at)!==-1&&(this.ctx.textAlign=at)}});var Ie=null,It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(at){Ie=null,It=at}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(at){var je;if(this.ctx.font=at,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(at))!==null){var Ht=je[1];je[2];var Wt=je[3],zt=je[4];je[5];var st=je[6],sr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(zt)[2];zt=Math.floor(sr==="px"?parseFloat(zt)*this.pdf.internal.scaleFactor:sr==="em"?parseFloat(zt)*this.pdf.getFontSize():parseFloat(zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(zt);var ur=(function(be){var _e,Ue,Qe=[],ot=be.trim();if(ot==="")return $S;if(ot in xD)return[xD[ot]];for(;ot!=="";){switch(Ue=null,_e=(ot=SD(ot)).charAt(0)){case'"':case"'":Ue=Rse(ot.substring(1),_e);break;default:Ue=Dse(ot)}if(Ue===null||(Qe.push(Ue[0]),(ot=SD(Ue[1]))!==""&&ot.charAt(0)!==","))return $S;ot=ot.replace(/^,/,"")}return Qe})(st);if(this.fontFaces){var ar=(function(be,_e){if(Ie===null){var Ue=(function(Qe){var ot=[];return Object.keys(Qe).forEach(function(et){Qe[et].forEach(function(Lt){var vt=null;switch(Lt){case"bold":vt={family:et,weight:"bold"};break;case"italic":vt={family:et,style:"italic"};break;case"bolditalic":vt={family:et,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:et}}vt!==null&&(vt.ref={name:et,style:Lt},ot.push(vt))})}),ot})(be.getFontList());Ie=(function(Qe){for(var ot={},et=0;et<Qe.length;++et){var Lt=qS(Qe[et]),vt=Lt.family,Bt=Lt.stretch,Kt=Lt.style,Zt=Lt.weight;ot[vt]=ot[vt]||{},ot[vt][Bt]=ot[vt][Bt]||{},ot[vt][Bt][Kt]=ot[vt][Bt][Kt]||{},ot[vt][Bt][Kt][Zt]=Lt}return ot})(Ue.concat(_e))}return Ie})(this.pdf,this.fontFaces),yr=ur.map(function(be){return{family:be,stretch:"normal",weight:Wt,style:Ht}}),pr=(function(be,_e,Ue){for(var Qe=(Ue=Ue||{}).defaultFontFamily||"times",ot=Object.assign({},Lse,Ue.genericFontFamilies||{}),et=null,Lt=null,vt=0;vt<_e.length;++vt)if(ot[(et=qS(_e[vt])).family]&&(et.family=ot[et.family]),be.hasOwnProperty(et.family)){Lt=be[et.family];break}if(!(Lt=Lt||be[Qe]))throw new Error("Could not find a font-family for the rule '"+wD(et)+"' and default family '"+Qe+"'.");if(Lt=(function(Bt,Kt){if(Kt[Bt])return Kt[Bt];var Zt=gT[Bt],Er=Zt<=gT.normal?-1:1,bt=_D(Kt,fj,Zt,Er);if(!bt)throw new Error("Could not find a matching font-stretch value for "+Bt);return bt})(et.stretch,Lt),Lt=(function(Bt,Kt){if(Kt[Bt])return Kt[Bt];for(var Zt=dj[Bt],Er=0;Er<Zt.length;++Er)if(Kt[Zt[Er]])return Kt[Zt[Er]];throw new Error("Could not find a matching font-style for "+Bt)})(et.style,Lt),!(Lt=(function(Bt,Kt){if(Kt[Bt])return Kt[Bt];if(Bt===400&&Kt[500])return Kt[500];if(Bt===500&&Kt[400])return Kt[400];var Zt=Mse[Bt],Er=_D(Kt,hj,Zt,Bt<400?-1:1);if(!Er)throw new Error("Could not find a matching font-weight for value "+Bt);return Er})(et.weight,Lt)))throw new Error("Failed to resolve a font for the rule '"+wD(et)+"'.");return Lt})(ar,yr);this.pdf.setFont(pr.ref.name,pr.ref.style)}else{var Jt="";(Wt==="bold"||parseInt(Wt,10)>=700||Ht==="bold")&&(Jt="bold"),Ht==="italic"&&(Jt+="italic"),Jt.length===0&&(Jt="normal");for(var ir="",xr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},rr=0;rr<ur.length;rr++){if(this.pdf.internal.getFont(ur[rr],Jt,{noFallback:!0,disableWarning:!0})!==void 0){ir=ur[rr];break}if(Jt==="bolditalic"&&this.pdf.internal.getFont(ur[rr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ir=ur[rr],Jt="bold";else if(this.pdf.internal.getFont(ur[rr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ir=ur[rr],Jt="normal";break}}if(ir===""){for(var nt=0;nt<ur.length;nt++)if(xr[ur[nt]]){ir=xr[ur[nt]];break}}ir=ir===""?"Times":ir,this.pdf.setFont(ir,Jt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(at){this.ctx.globalCompositeOperation=at}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(at){this.ctx.globalAlpha=at}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(at){this.ctx.lineDashOffset=at,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(at){this.ctx.lineDash=at,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(at){this.ctx.ignoreClearRect=!!at}})};v.prototype.setLineDash=function(fe){this.lineDash=fe},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){N.call(this,"fill",!1)},v.prototype.stroke=function(){N.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(fe,Se){if(isNaN(fe)||isNaN(Se))throw ao.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var we=this.ctx.transform.applyToPoint(new l(fe,Se));this.path.push({type:"mt",x:we.x,y:we.y}),this.ctx.lastPoint=new l(fe,Se)},v.prototype.closePath=function(){var fe=new l(0,0),Se=0;for(Se=this.path.length-1;Se!==-1;Se--)if(this.path[Se].type==="begin"&&Va(this.path[Se+1])==="object"&&typeof this.path[Se+1].x=="number"){fe=new l(this.path[Se+1].x,this.path[Se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(fe.x,fe.y)},v.prototype.lineTo=function(fe,Se){if(isNaN(fe)||isNaN(Se))throw ao.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var we=this.ctx.transform.applyToPoint(new l(fe,Se));this.path.push({type:"lt",x:we.x,y:we.y}),this.ctx.lastPoint=new l(we.x,we.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},v.prototype.quadraticCurveTo=function(fe,Se,we,De){if(isNaN(we)||isNaN(De)||isNaN(fe)||isNaN(Se))throw ao.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Re=this.ctx.transform.applyToPoint(new l(we,De)),$e=this.ctx.transform.applyToPoint(new l(fe,Se));this.path.push({type:"qct",x1:$e.x,y1:$e.y,x:Re.x,y:Re.y}),this.ctx.lastPoint=new l(Re.x,Re.y)},v.prototype.bezierCurveTo=function(fe,Se,we,De,Re,$e){if(isNaN(Re)||isNaN($e)||isNaN(fe)||isNaN(Se)||isNaN(we)||isNaN(De))throw ao.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Oe=this.ctx.transform.applyToPoint(new l(Re,$e)),it=this.ctx.transform.applyToPoint(new l(fe,Se)),Ye=this.ctx.transform.applyToPoint(new l(we,De));this.path.push({type:"bct",x1:it.x,y1:it.y,x2:Ye.x,y2:Ye.y,x:Oe.x,y:Oe.y}),this.ctx.lastPoint=new l(Oe.x,Oe.y)},v.prototype.arc=function(fe,Se,we,De,Re,$e){if(isNaN(fe)||isNaN(Se)||isNaN(we)||isNaN(De)||isNaN(Re))throw ao.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if($e=!!$e,!this.ctx.transform.isIdentity){var Oe=this.ctx.transform.applyToPoint(new l(fe,Se));fe=Oe.x,Se=Oe.y;var it=this.ctx.transform.applyToPoint(new l(0,we)),Ye=this.ctx.transform.applyToPoint(new l(0,0));we=Math.sqrt(Math.pow(it.x-Ye.x,2)+Math.pow(it.y-Ye.y,2))}Math.abs(Re-De)>=2*Math.PI&&(De=0,Re=2*Math.PI),this.path.push({type:"arc",x:fe,y:Se,radius:we,startAngle:De,endAngle:Re,counterclockwise:$e})},v.prototype.arcTo=function(fe,Se,we,De,Re){throw new Error("arcTo not implemented.")},v.prototype.rect=function(fe,Se,we,De){if(isNaN(fe)||isNaN(Se)||isNaN(we)||isNaN(De))throw ao.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(fe,Se),this.lineTo(fe+we,Se),this.lineTo(fe+we,Se+De),this.lineTo(fe,Se+De),this.lineTo(fe,Se),this.lineTo(fe+we,Se),this.lineTo(fe,Se)},v.prototype.fillRect=function(fe,Se,we,De){if(isNaN(fe)||isNaN(Se)||isNaN(we)||isNaN(De))throw ao.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var Re={};this.lineCap!=="butt"&&(Re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(fe,Se,we,De),this.fill(),Re.hasOwnProperty("lineCap")&&(this.lineCap=Re.lineCap),Re.hasOwnProperty("lineJoin")&&(this.lineJoin=Re.lineJoin)}},v.prototype.strokeRect=function(fe,Se,we,De){if(isNaN(fe)||isNaN(Se)||isNaN(we)||isNaN(De))throw ao.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(fe,Se,we,De),this.stroke())},v.prototype.clearRect=function(fe,Se,we,De){if(isNaN(fe)||isNaN(Se)||isNaN(we)||isNaN(De))throw ao.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(fe,Se,we,De))},v.prototype.save=function(fe){fe=typeof fe!="boolean"||fe;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,we=0;we<this.pdf.internal.getNumberOfPages();we++)this.pdf.setPage(we+1),this.pdf.internal.out("q");if(this.pdf.setPage(Se),fe){this.ctx.fontSize=this.pdf.internal.getFontSize();var De=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=De}},v.prototype.restore=function(fe){fe=typeof fe!="boolean"||fe;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,we=0;we<this.pdf.internal.getNumberOfPages();we++)this.pdf.setPage(we+1),this.pdf.internal.out("Q");this.pdf.setPage(Se),fe&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(fe){var Se,we,De,Re;if(fe.isCanvasGradient===!0&&(fe=fe.getColor()),!fe)return{r:0,g:0,b:0,a:0,style:fe};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(fe))Se=0,we=0,De=0,Re=0;else{var $e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(fe);if($e!==null)Se=parseInt($e[1]),we=parseInt($e[2]),De=parseInt($e[3]),Re=1;else if(($e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(fe))!==null)Se=parseInt($e[1]),we=parseInt($e[2]),De=parseInt($e[3]),Re=parseFloat($e[4]);else{if(Re=1,typeof fe=="string"&&fe.charAt(0)!=="#"){var Oe=new ij(fe);fe=Oe.ok?Oe.toHex():"#000000"}fe.length===4?(Se=fe.substring(1,2),Se+=Se,we=fe.substring(2,3),we+=we,De=fe.substring(3,4),De+=De):(Se=fe.substring(1,3),we=fe.substring(3,5),De=fe.substring(5,7)),Se=parseInt(Se,16),we=parseInt(we,16),De=parseInt(De,16)}}return{r:Se,g:we,b:De,a:Re,style:fe}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(fe,Se,we,De){if(isNaN(Se)||isNaN(we)||typeof fe!="string")throw ao.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(De=isNaN(De)?void 0:De,!b.call(this)){var Re=ge(this.ctx.transform.rotation),$e=this.ctx.transform.scaleX;G.call(this,{text:fe,x:Se,y:we,scale:$e,angle:Re,align:this.textAlign,maxWidth:De})}},v.prototype.strokeText=function(fe,Se,we,De){if(isNaN(Se)||isNaN(we)||typeof fe!="string")throw ao.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){De=isNaN(De)?void 0:De;var Re=ge(this.ctx.transform.rotation),$e=this.ctx.transform.scaleX;G.call(this,{text:fe,x:Se,y:we,scale:$e,renderingMode:"stroke",angle:Re,align:this.textAlign,maxWidth:De})}},v.prototype.measureText=function(fe){if(typeof fe!="string")throw ao.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Se=this.pdf,we=this.pdf.internal.scaleFactor,De=Se.internal.getFontSize(),Re=Se.getStringUnitWidth(fe)*De/Se.internal.scaleFactor;return new function($e){var Oe=($e=$e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Oe}}),this}({width:Re*=Math.round(96*we/72*1e4)/1e4})},v.prototype.scale=function(fe,Se){if(isNaN(fe)||isNaN(Se))throw ao.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var we=new c(fe,0,0,Se,0,0);this.ctx.transform=this.ctx.transform.multiply(we)},v.prototype.rotate=function(fe){if(isNaN(fe))throw ao.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Se=new c(Math.cos(fe),Math.sin(fe),-Math.sin(fe),Math.cos(fe),0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},v.prototype.translate=function(fe,Se){if(isNaN(fe)||isNaN(Se))throw ao.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var we=new c(1,0,0,1,fe,Se);this.ctx.transform=this.ctx.transform.multiply(we)},v.prototype.transform=function(fe,Se,we,De,Re,$e){if(isNaN(fe)||isNaN(Se)||isNaN(we)||isNaN(De)||isNaN(Re)||isNaN($e))throw ao.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Oe=new c(fe,Se,we,De,Re,$e);this.ctx.transform=this.ctx.transform.multiply(Oe)},v.prototype.setTransform=function(fe,Se,we,De,Re,$e){fe=isNaN(fe)?1:fe,Se=isNaN(Se)?0:Se,we=isNaN(we)?0:we,De=isNaN(De)?1:De,Re=isNaN(Re)?0:Re,$e=isNaN($e)?0:$e,this.ctx.transform=new c(fe,Se,we,De,Re,$e)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(fe,Se,we,De,Re,$e,Oe,it,Ye){var rt=this.pdf.getImageProperties(fe),Ie=1,It=1,at=1,je=1;De!==void 0&&it!==void 0&&(at=it/De,je=Ye/Re,Ie=rt.width/De*it/De,It=rt.height/Re*Ye/Re),$e===void 0&&($e=Se,Oe=we,Se=0,we=0),De!==void 0&&it===void 0&&(it=De,Ye=Re),De===void 0&&it===void 0&&(it=rt.width,Ye=rt.height);for(var Ht,Wt=this.ctx.transform.decompose(),zt=ge(Wt.rotate.shx),st=new c,sr=(st=(st=(st=st.multiply(Wt.translate)).multiply(Wt.skew)).multiply(Wt.scale)).applyToRectangle(new a($e-Se*at,Oe-we*je,De*Ie,Re*It)),ur=k.call(this,sr),ar=[],yr=0;yr<ur.length;yr+=1)ar.indexOf(ur[yr])===-1&&ar.push(ur[yr]);if(F(ar),this.autoPaging)for(var pr=ar[0],Jt=ar[ar.length-1],ir=pr;ir<Jt+1;ir++){this.pdf.setPage(ir);var xr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rr=ir===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=ir===1?0:nt+(ir-2)*be;if(this.ctx.clip_path.length!==0){var Ue=this.path;Ht=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Ht,this.posX+this.margin[3],-_e+rr+this.ctx.prevPageLastElemOffset),$.call(this,"fill",!0),this.path=Ue}var Qe=JSON.parse(JSON.stringify(sr));Qe=O([Qe],this.posX+this.margin[3],-_e+rr+this.ctx.prevPageLastElemOffset)[0];var ot=(ir>pr||ir<Jt)&&I.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xr,be,null).clip().discardPath()),this.pdf.addImage(fe,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,zt),ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(fe,"JPEG",sr.x,sr.y,sr.w,sr.h,null,null,zt)};var k=function(fe,Se,we){var De=[];Se=Se||this.pdf.internal.pageSize.width,we=we||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Re=this.posY+this.ctx.prevPageLastElemOffset;switch(fe.type){default:case"mt":case"lt":De.push(Math.floor((fe.y+Re)/we)+1);break;case"arc":De.push(Math.floor((fe.y+Re-fe.radius)/we)+1),De.push(Math.floor((fe.y+Re+fe.radius)/we)+1);break;case"qct":var $e=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,fe.x1,fe.y1,fe.x,fe.y);De.push(Math.floor(($e.y+Re)/we)+1),De.push(Math.floor(($e.y+$e.h+Re)/we)+1);break;case"bct":var Oe=Ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,fe.x1,fe.y1,fe.x2,fe.y2,fe.x,fe.y);De.push(Math.floor((Oe.y+Re)/we)+1),De.push(Math.floor((Oe.y+Oe.h+Re)/we)+1);break;case"rect":De.push(Math.floor((fe.y+Re)/we)+1),De.push(Math.floor((fe.y+fe.h+Re)/we)+1)}for(var it=0;it<De.length;it+=1)for(;this.pdf.internal.getNumberOfPages()<De[it];)M.call(this);return De},M=function(){var fe=this.fillStyle,Se=this.strokeStyle,we=this.font,De=this.lineCap,Re=this.lineWidth,$e=this.lineJoin;this.pdf.addPage(),this.fillStyle=fe,this.strokeStyle=Se,this.font=we,this.lineCap=De,this.lineWidth=Re,this.lineJoin=$e},O=function(fe,Se,we){for(var De=0;De<fe.length;De++)switch(fe[De].type){case"bct":fe[De].x2+=Se,fe[De].y2+=we;case"qct":fe[De].x1+=Se,fe[De].y1+=we;default:fe[De].x+=Se,fe[De].y+=we}return fe},F=function(fe){return fe.sort(function(Se,we){return Se-we})},N=function(fe,Se){for(var we,De,Re=this.fillStyle,$e=this.strokeStyle,Oe=this.lineCap,it=this.lineWidth,Ye=Math.abs(it*this.ctx.transform.scaleX),rt=this.lineJoin,Ie=JSON.parse(JSON.stringify(this.path)),It=JSON.parse(JSON.stringify(this.path)),at=[],je=0;je<It.length;je++)if(It[je].x!==void 0)for(var Ht=k.call(this,It[je]),Wt=0;Wt<Ht.length;Wt+=1)at.indexOf(Ht[Wt])===-1&&at.push(Ht[Wt]);for(var zt=0;zt<at.length;zt++)for(;this.pdf.internal.getNumberOfPages()<at[zt];)M.call(this);if(F(at),this.autoPaging)for(var st=at[0],sr=at[at.length-1],ur=st;ur<sr+1;ur++){this.pdf.setPage(ur),this.fillStyle=Re,this.strokeStyle=$e,this.lineCap=Oe,this.lineWidth=Ye,this.lineJoin=rt;var ar=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yr=ur===1?this.posY+this.margin[0]:this.margin[0],pr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ir=ur===1?0:pr+(ur-2)*Jt;if(this.ctx.clip_path.length!==0){var xr=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(we,this.posX+this.margin[3],-ir+yr+this.ctx.prevPageLastElemOffset),$.call(this,fe,!0),this.path=xr}if(De=JSON.parse(JSON.stringify(Ie)),this.path=O(De,this.posX+this.margin[3],-ir+yr+this.ctx.prevPageLastElemOffset),Se===!1||ur===0){var rr=(ur>st||ur<sr)&&I.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ar,Jt,null).clip().discardPath()),$.call(this,fe,Se),rr&&this.pdf.restoreGraphicsState()}this.lineWidth=it}else this.lineWidth=Ye,$.call(this,fe,Se),this.lineWidth=it;this.path=Ie},$=function(fe,Se){if((fe!=="stroke"||Se||!P.call(this))&&(fe==="stroke"||Se||!b.call(this))){for(var we,De,Re=[],$e=this.path,Oe=0;Oe<$e.length;Oe++){var it=$e[Oe];switch(it.type){case"begin":Re.push({begin:!0});break;case"close":Re.push({close:!0});break;case"mt":Re.push({start:it,deltas:[],abs:[]});break;case"lt":var Ye=Re.length;if($e[Oe-1]&&!isNaN($e[Oe-1].x)&&(we=[it.x-$e[Oe-1].x,it.y-$e[Oe-1].y],Ye>0)){for(;Ye>=0;Ye--)if(Re[Ye-1].close!==!0&&Re[Ye-1].begin!==!0){Re[Ye-1].deltas.push(we),Re[Ye-1].abs.push(it);break}}break;case"bct":we=[it.x1-$e[Oe-1].x,it.y1-$e[Oe-1].y,it.x2-$e[Oe-1].x,it.y2-$e[Oe-1].y,it.x-$e[Oe-1].x,it.y-$e[Oe-1].y],Re[Re.length-1].deltas.push(we);break;case"qct":var rt=$e[Oe-1].x+2/3*(it.x1-$e[Oe-1].x),Ie=$e[Oe-1].y+2/3*(it.y1-$e[Oe-1].y),It=it.x+2/3*(it.x1-it.x),at=it.y+2/3*(it.y1-it.y),je=it.x,Ht=it.y;we=[rt-$e[Oe-1].x,Ie-$e[Oe-1].y,It-$e[Oe-1].x,at-$e[Oe-1].y,je-$e[Oe-1].x,Ht-$e[Oe-1].y],Re[Re.length-1].deltas.push(we);break;case"arc":Re.push({deltas:[],abs:[],arc:!0}),Array.isArray(Re[Re.length-1].abs)&&Re[Re.length-1].abs.push(it)}}De=Se?null:fe==="stroke"?"stroke":"fill";for(var Wt=!1,zt=0;zt<Re.length;zt++)if(Re[zt].arc)for(var st=Re[zt].abs,sr=0;sr<st.length;sr++){var ur=st[sr];ur.type==="arc"?H.call(this,ur.x,ur.y,ur.radius,ur.startAngle,ur.endAngle,ur.counterclockwise,void 0,Se,!Wt):ie.call(this,ur.x,ur.y),Wt=!0}else if(Re[zt].close===!0)this.pdf.internal.out("h"),Wt=!1;else if(Re[zt].begin!==!0){var ar=Re[zt].start.x,yr=Re[zt].start.y;oe.call(this,Re[zt].deltas,ar,yr),Wt=!0}De&&Y.call(this,De),Se&&ae.call(this)}},j=function(fe){var Se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,we=Se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return fe-we;case"top":return fe+Se-we;case"hanging":return fe+Se-2*we;case"middle":return fe+Se/2-we;default:return fe}},U=function(fe){return fe+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var fe=function(){};return fe.colorStops=[],fe.addColorStop=function(Se,we){this.colorStops.push([Se,we])},fe.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},fe.isCanvasGradient=!0,fe},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(fe,Se,we,De,Re,$e,Oe,it,Ye){for(var rt=de.call(this,we,De,Re,$e),Ie=0;Ie<rt.length;Ie++){var It=rt[Ie];Ie===0&&(Ye?ee.call(this,It.x1+fe,It.y1+Se):ie.call(this,It.x1+fe,It.y1+Se)),ue.call(this,fe,Se,It.x2,It.y2,It.x3,It.y3,It.x4,It.y4)}it?ae.call(this):Y.call(this,Oe)},Y=function(fe){switch(fe){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ae=function(){this.pdf.clip(),this.pdf.discardPath()},ee=function(fe,Se){this.pdf.internal.out(r(fe)+" "+n(Se)+" m")},G=function(fe){var Se;switch(fe.align){case"right":case"end":Se="right";break;case"center":Se="center";break;default:Se="left"}var we=this.pdf.getTextDimensions(fe.text),De=j.call(this,fe.y),Re=U.call(this,De)-we.h,$e=this.ctx.transform.applyToPoint(new l(fe.x,De)),Oe=this.ctx.transform.decompose(),it=new c;it=(it=(it=it.multiply(Oe.translate)).multiply(Oe.skew)).multiply(Oe.scale);for(var Ye,rt,Ie,It=this.ctx.transform.applyToRectangle(new a(fe.x,De,we.w,we.h)),at=it.applyToRectangle(new a(fe.x,Re,we.w,we.h)),je=k.call(this,at),Ht=[],Wt=0;Wt<je.length;Wt+=1)Ht.indexOf(je[Wt])===-1&&Ht.push(je[Wt]);if(F(Ht),this.autoPaging)for(var zt=Ht[0],st=Ht[Ht.length-1],sr=zt;sr<st+1;sr++){this.pdf.setPage(sr);var ur=sr===1?this.posY+this.margin[0]:this.margin[0],ar=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yr=this.pdf.internal.pageSize.height-this.margin[2],pr=yr-this.margin[0],Jt=this.pdf.internal.pageSize.width-this.margin[1],ir=Jt-this.margin[3],xr=sr===1?0:ar+(sr-2)*pr;if(this.ctx.clip_path.length!==0){var rr=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Ye,this.posX+this.margin[3],-1*xr+ur),$.call(this,"fill",!0),this.path=rr}var nt=O([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-xr+ur+this.ctx.prevPageLastElemOffset)[0];fe.scale>=.01&&(rt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(rt*fe.scale),Ie=this.lineWidth,this.lineWidth=Ie*fe.scale);var be=this.autoPaging!=="text";if(be||nt.y+nt.h<=yr){if(be||nt.y>=ur&&nt.x<=Jt){var _e=be?fe.text:this.pdf.splitTextToSize(fe.text,fe.maxWidth||Jt-nt.x)[0],Ue=O([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-xr+ur+this.ctx.prevPageLastElemOffset)[0],Qe=be&&(sr>zt||sr<st)&&I.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ir,pr,null).clip().discardPath()),this.pdf.text(_e,Ue.x,Ue.y,{angle:fe.angle,align:Se,renderingMode:fe.renderingMode}),Qe&&this.pdf.restoreGraphicsState()}}else nt.y<yr&&(this.ctx.prevPageLastElemOffset+=yr-nt.y);fe.scale>=.01&&(this.pdf.setFontSize(rt),this.lineWidth=Ie)}else fe.scale>=.01&&(rt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(rt*fe.scale),Ie=this.lineWidth,this.lineWidth=Ie*fe.scale),this.pdf.text(fe.text,$e.x+this.posX,$e.y+this.posY,{angle:fe.angle,align:Se,renderingMode:fe.renderingMode,maxWidth:fe.maxWidth}),fe.scale>=.01&&(this.pdf.setFontSize(rt),this.lineWidth=Ie)},ie=function(fe,Se,we,De){we=we||0,De=De||0,this.pdf.internal.out(r(fe+we)+" "+n(Se+De)+" l")},oe=function(fe,Se,we){return this.pdf.lines(fe,Se,we,null,null)},ue=function(fe,Se,we,De,Re,$e,Oe,it){this.pdf.internal.out([t(i(we+fe)),t(o(De+Se)),t(i(Re+fe)),t(o($e+Se)),t(i(Oe+fe)),t(o(it+Se)),"c"].join(" "))},de=function(fe,Se,we,De){for(var Re=2*Math.PI,$e=Math.PI/2;Se>we;)Se-=Re;var Oe=Math.abs(we-Se);Oe<Re&&De&&(Oe=Re-Oe);for(var it=[],Ye=De?-1:1,rt=Se;Oe>1e-5;){var Ie=rt+Ye*Math.min(Oe,$e);it.push(Me.call(this,fe,rt,Ie)),Oe-=Math.abs(Ie-rt),rt=Ie}return it},Me=function(fe,Se,we){var De=(we-Se)/2,Re=fe*Math.cos(De),$e=fe*Math.sin(De),Oe=Re,it=-$e,Ye=Oe*Oe+it*it,rt=Ye+Oe*Re+it*$e,Ie=4/3*(Math.sqrt(2*Ye*rt)-rt)/(Oe*$e-it*Re),It=Oe-Ie*it,at=it+Ie*Oe,je=It,Ht=-at,Wt=De+Se,zt=Math.cos(Wt),st=Math.sin(Wt);return{x1:fe*Math.cos(Se),y1:fe*Math.sin(Se),x2:It*zt-at*st,y2:It*st+at*zt,x3:je*zt-Ht*st,y3:je*st+Ht*zt,x4:fe*Math.cos(we),y4:fe*Math.sin(we)}},ge=function(fe){return 180*fe/Math.PI},xe=function(fe,Se,we,De,Re,$e){var Oe=fe+.5*(we-fe),it=Se+.5*(De-Se),Ye=Re+.5*(we-Re),rt=$e+.5*(De-$e),Ie=Math.min(fe,Re,Oe,Ye),It=Math.max(fe,Re,Oe,Ye),at=Math.min(Se,$e,it,rt),je=Math.max(Se,$e,it,rt);return new a(Ie,at,It-Ie,je-at)},Ee=function(fe,Se,we,De,Re,$e,Oe,it){var Ye,rt,Ie,It,at,je,Ht,Wt,zt,st,sr,ur,ar,yr,pr=we-fe,Jt=De-Se,ir=Re-we,xr=$e-De,rr=Oe-Re,nt=it-$e;for(rt=0;rt<41;rt++)zt=(Ht=(Ie=fe+(Ye=rt/40)*pr)+Ye*((at=we+Ye*ir)-Ie))+Ye*(at+Ye*(Re+Ye*rr-at)-Ht),st=(Wt=(It=Se+Ye*Jt)+Ye*((je=De+Ye*xr)-It))+Ye*(je+Ye*($e+Ye*nt-je)-Wt),rt==0?(sr=zt,ur=st,ar=zt,yr=st):(sr=Math.min(sr,zt),ur=Math.min(ur,st),ar=Math.max(ar,zt),yr=Math.max(yr,st));return new a(Math.round(sr),Math.round(ur),Math.round(ar-sr),Math.round(yr-ur))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var fe,Se,we=(fe=this.ctx.lineDash,Se=this.ctx.lineDashOffset,JSON.stringify({lineDash:fe,lineDashOffset:Se}));this.prevLineDash!==we&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=we)}}})(ti.API),(function(e){var t=function(l){var a,c,p,g,v,x,b,P,I,k;for(c=[],p=0,g=(l+=a="\0\0\0\0".slice(l.length%4||4)).length;g>p;p+=4)(v=(l.charCodeAt(p)<<24)+(l.charCodeAt(p+1)<<16)+(l.charCodeAt(p+2)<<8)+l.charCodeAt(p+3))!==0?(x=(v=((v=((v=((v=(v-(k=v%85))/85)-(I=v%85))/85)-(P=v%85))/85)-(b=v%85))/85)%85,c.push(x+33,b+33,P+33,I+33,k+33)):c.push(122);return(function(M,O){for(var F=O;F>0;F--)M.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},r=function(l){var a,c,p,g,v,x=String,b="length",P=255,I="charCodeAt",k="slice",M="replace";for(l[k](-2),l=l[k](0,-2)[M](/\s/g,"")[M]("z","!!!!!"),p=[],g=0,v=(l+=a="uuuuu"[k](l[b]%5||5))[b];v>g;g+=5)c=52200625*(l[I](g)-33)+614125*(l[I](g+1)-33)+7225*(l[I](g+2)-33)+85*(l[I](g+3)-33)+(l[I](g+4)-33),p.push(P&c>>24,P&c>>16,P&c>>8,P&c);return(function(O,F){for(var N=F;N>0;N--)O.pop()})(p,a[b]),x.fromCharCode.apply(x,p)},n=function(l){return l.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),a.test(l)===!1)return"";for(var c="",p=0;p<l.length;p+=2)c+=String.fromCharCode("0x"+(l[p]+l[p+1]));return c},o=function(l){for(var a=new Uint8Array(l.length),c=l.length;c--;)a[c]=l.charCodeAt(c);return(a=uT(a)).reduce(function(p,g){return p+String.fromCharCode(g)},"")};e.processDataByFilters=function(l,a){var c=0,p=l||"",g=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":p=r(p),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=t(p),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=i(p),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=n(p),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:p,reverseChain:g.reverse().join(" ")}}})(ti.API),(function(e){e.loadFile=function(t,r,n){return(function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var a=void 0;try{a=(function(c,p,g){var v=new XMLHttpRequest,x=0,b=function(P){var I=P.length,k=[],M=String.fromCharCode;for(x=0;x<I;x+=1)k.push(M(255&P.charCodeAt(x)));return k.join("")};if(v.open("GET",c,!p),v.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(v.onload=function(){v.status===200?g(b(this.responseText)):g(void 0)}),v.send(null),p&&v.status===200)return b(v.responseText)})(i,o,l)}catch{}return a})(t,r,n)},e.loadImageFile=e.loadFile})(ti.API),(function(e){function t(){return(xi.html2canvas?Promise.resolve(xi.html2canvas):rS(()=>import("./html2canvas.esm-B0tyYwQk.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(xi.DOMPurify?Promise.resolve(xi.DOMPurify):rS(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var c=Va(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var p=document.createElement(a);for(var g in c.className&&(p.className=c.className),c.innerHTML&&c.dompurify&&(p.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)p.style[g]=c.style[g];return p},o=function a(c,p){for(var g=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)p!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||g.appendChild(a(v,p));return c.nodeType===1&&(c.nodeName==="CANVAS"?(g.width=c.width,g.height=c.height,g.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(g.value=c.value),g.addEventListener("load",function(){g.scrollTop=c.scrollTop,g.scrollLeft=c.scrollLeft},!0)),g},l=function a(c){var p=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),g=a.convert(Promise.resolve(),p);return(g=g.setProgress(1,a,1,[a])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(a,c){return a.__proto__=c||l.prototype,a},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(p){switch(n(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(r).then(function(p){return this.set({src:i("div",{innerHTML:a,dompurify:p})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},l.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(c){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,c(this.prop.container,p)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(c){var p=this.opt.jsPDF,g=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=g,g)for(var b=0;b<g.length;++b){var P=g[b],I=P.src.find(function(k){return k.format==="truetype"});I&&p.addFont(I.url,P.ref.name,P.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,p.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(a,c,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},l.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},l.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},l.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(a){if(n(a)!=="object")return this;var c=Object.keys(a||{}).map(function(p){if(p in l.template.prop)return function(){this.prop[p]=a[p]};switch(p){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[p]=a[p]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(a,c){return this.then(function(){var p=a in l.template.prop?this.prop[a]:this.opt[a];return c?c(p):p})},l.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},l.prototype.setPageSize=function(a){function c(p,g){return Math.floor(p*g/72*96)}return this.then(function(){(a=a||ti.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},l.prototype.setProgress=function(a,c,p,g){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),p!=null&&(this.progress.n=p),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(a,c,p,g){return this.setProgress(a?this.progress.val+a:null,c||null,p?this.progress.n+p:null,g?this.progress.stack.concat(g):null)},l.prototype.then=function(a,c){var p=this;return this.thenCore(a,c,function(g,v){return p.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(x){return p.updateProgress(null,g),x}).then(g,v).then(function(x){return p.updateProgress(1),x})})},l.prototype.thenCore=function(a,c,p){p=p||Promise.prototype.then;var g=this;a&&(a=a.bind(g)),c&&(c=c.bind(g));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:l.convert(Object.assign({},g),Promise.prototype),x=p.call(v,a,c);return l.convert(x,g.__proto__)},l.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},l.prototype.thenList=function(a){var c=this;return a.forEach(function(p){c=c.thenCore(p)}),c},l.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return l.convert(c,this)},l.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},l.prototype.error=function(a){return this.then(function(){throw new Error(a)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,ti.getPageSize=function(a,c,p){if(Va(a)==="object"){var g=a;a=g.orientation,c=g.unit||c,p=g.format||p}c=c||"mm",p=p||"a4",a=(""+(a||"P")).toLowerCase();var v,x=(""+p).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+c}var P,I=0,k=0;if(b.hasOwnProperty(x))I=b[x][1]/v,k=b[x][0]/v;else try{I=p[1],k=p[0]}catch{throw new Error("Invalid format: "+p)}if(a==="p"||a==="portrait")a="p",k>I&&(P=k,k=I,I=P);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",I>k&&(P=k,k=I,I=P)}return{width:k,height:I,unit:c,k:v,orientation:a}},e.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(qS):null;var p=new l(c);return c.worker?p:p.from(a).doCallback()}})(ti.API),ti.API.addJS=function(e){return ED=e,this.internal.events.subscribe("postPutResources",function(){xb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),CD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ED+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xb!==void 0&&CD!==void 0&&this.internal.out("/Names <</JavaScript "+xb+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],a=n.exec(l);if(a!=null){var c=a[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,g=[];for(o=0;o<p;o++){var v=r.internal.newObject();g.push(v);var x=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var b=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<g.length;o++)r.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+b+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var l={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var l=n.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var a=this.count=this.count_r({count:0},l);if(a>0&&this.line("/Count "+a),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var p=0;p<n.children.length;p++)this.renderItems(n.children[p])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(ti.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,o,l,a){var c,p=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=(function(v){for(var x,b=256*v.charCodeAt(4)+v.charCodeAt(5),P=v.length,I={width:0,height:0,numcomponents:1},k=4;k<P;k+=2){if(k+=b,t.indexOf(v.charCodeAt(k+1))!==-1){x=256*v.charCodeAt(k+5)+v.charCodeAt(k+6),I={width:256*v.charCodeAt(k+7)+v.charCodeAt(k+8),height:x,numcomponents:v.charCodeAt(k+9)};break}b=256*v.charCodeAt(k+2)+v.charCodeAt(k+3)}return I})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}g={data:r,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:p,index:n,alias:i}}return g}})(ti.API),ti.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,o=yse(e,{checkCrc:!0}),l=o.width,a=o.height,c=o.channels,p=o.palette,g=o.depth;i=p&&c===1?(function(U){for(var H=U.width,Y=U.height,ae=U.data,ee=U.palette,G=U.depth,ie=!1,oe=[],ue=[],de=void 0,Me=!1,ge=0,xe=0;xe<ee.length;xe++){var Ee=kR(ee[xe],4),Ae=Ee[0],fe=Ee[1],Se=Ee[2],we=Ee[3];oe.push(Ae,fe,Se),we!=null&&(we===0?(ge++,ue.length<1&&ue.push(xe)):we<255&&(Me=!0))}if(Me||ge>1){ie=!0,ue=void 0;var De=H*Y;de=new Uint8Array(De);for(var Re=new DataView(ae.buffer),$e=0;$e<De;$e++){var Oe=VS(Re,$e,G),it=kR(ee[Oe],4)[3];de[$e]=it}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:ae,alphaBytes:de,needSMask:ie,palette:oe,mask:ue}})(o):c===2||c===4?(function(U){for(var H=U.data,Y=U.width,ae=U.height,ee=U.channels,G=U.depth,ie=ee===2?"DeviceGray":"DeviceRGB",oe=ee-1,ue=Y*ae,de=oe,Me=ue*de,ge=1*ue,xe=Math.ceil(Me*G/8),Ee=Math.ceil(ge*G/8),Ae=new Uint8Array(xe),fe=new Uint8Array(Ee),Se=new DataView(H.buffer),we=new DataView(Ae.buffer),De=new DataView(fe.buffer),Re=!1,$e=0;$e<ue;$e++){for(var Oe=$e*ee,it=0;it<de;it++)DD(we,VS(Se,Oe+it,G),$e*de+it,G);var Ye=VS(Se,Oe+de,G);Ye<(1<<G)-1&&(Re=!0),DD(De,Ye,1*$e,G)}return{colorSpace:ie,colorsPerPixel:oe,colorBytes:Ae,alphaBytes:fe,needSMask:Re}})(o):(function(U){var H=U.data,Y=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Y,colorsPerPixel:Y==="DeviceGray"?1:3,colorBytes:H instanceof Uint8Array?H:new Uint8Array(H.buffer),needSMask:!1}})(o);var v,x,b,P=i,I=P.colorSpace,k=P.colorsPerPixel,M=P.colorBytes,O=P.alphaBytes,F=P.needSMask,N=P.palette,$=P.mask,j=null;return n!==ti.API.image_compression.NONE&&typeof uT=="function"?(j=(function(U){var H;switch(U){case ti.API.image_compression.FAST:H=11;break;case ti.API.image_compression.MEDIUM:H=13;break;case ti.API.image_compression.SLOW:H=14;break;default:H=12}return H})(n),v=this.decode.FLATE_DECODE,x="/Predictor ".concat(j," "),e=kD(M,l*k,k,n),F&&(b=kD(O,l,1,n))):(v=void 0,x="",e=M,F&&(b=O)),x+="/Colors ".concat(k," /BitsPerComponent ").concat(g," /Columns ").concat(l),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:r,data:e,index:t,filter:v,decodeParameters:x,transparency:$,palette:N,sMask:b,predictor:j,width:l,height:a,bitsPerComponent:g,colorSpace:I}}},(function(e){e.processGIF89A=function(t,r,n,i){var o=new Bse(t),l=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var p={data:c,width:l,height:a},g=new US(100).encode(p,100);return e.processJPEG.call(this,g,r,n,i)},e.processGIF87A=e.processGIF89A})(ti.API),td.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},td.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ao.log("bit decode error:"+r)}},td.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[l+4*a]=c.blue,this.data[l+4*a+1]=c.green,this.data[l+4*a+2]=c.red,this.data[l+4*a+3]=255}r!==0&&(this.pos+=4-r)}},td.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,a=o>>4,c=15&o,p=this.palette[a];if(this.data[l]=p.blue,this.data[l+1]=p.green,this.data[l+2]=p.red,this.data[l+3]=255,2*i+1>=this.width)break;p=this.palette[c],this.data[l+4]=p.blue,this.data[l+4+1]=p.green,this.data[l+4+2]=p.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},td.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},td.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,c=(o>>10&t)/t*255|0,p=o>>15?255:0,g=n*this.width*4+4*i;this.data[g]=c,this.data[g+1]=a,this.data[g+2]=l,this.data[g+3]=p}this.pos+=e}},td.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(l&t)/t*255|0,c=(l>>5&r)/r*255|0,p=(l>>11)/t*255|0,g=i*this.width*4+4*o;this.data[g]=p,this.data[g+1]=c,this.data[g+2]=a,this.data[g+3]=255}this.pos+=e}},td.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},td.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=l}},td.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,i){var o=new td(t,!1),l=o.width,a=o.height,c={data:o.getData(),width:l,height:a},p=new US(100).encode(c,100);return e.processJPEG.call(this,p,r,n,i)}})(ti.API),OD.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,i){var o=new OD(t),l=o.width,a=o.height,c={data:o.getData(),width:l,height:a},p=new US(100).encode(c,100);return e.processJPEG.call(this,p,r,n,i)}})(ti.API),ti.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),a=0,c=0,p=0;p<i;p+=4){var g=n[p],v=n[p+1],x=n[p+2],b=n[p+3];o[a++]=g,o[a++]=v,o[a++]=x,l[c++]=b}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:P,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ti.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ym=ti.API,wb=Ym.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,p=t.kerning?t.kerning:i.metadata.Unicode.kerning,g=p.fof?p.fof:1,v=t.doKerning!==!1,x=0,b=e.length,P=0,I=a[0]||c,k=[];for(r=0;r<b;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/o)||0)/1e3):(x=v&&Va(p[n])==="object"&&!isNaN(parseInt(p[n][P],10))?p[n][P]/g:0,k.push((a[n]||I)/c+x)),P=n;return k},TD=Ym.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Ym.processArabic&&(e=Ym.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:wb.apply(this,arguments).reduce(function(o,l){return o+l},0)},PD=function(e,t,r,n){for(var i=[],o=0,l=e.length,a=0;o!==l&&a+t[o]<r;)a+=t[o],o++;i.push(e.slice(0,o));var c=o;for(a=0;o!==l;)a+t[o]>n&&(i.push(e.slice(c,o)),a=0,c=o),a+=t[o],o++;return c!==o&&i.push(e.slice(c,o)),i},ID=function(e,t,r){r||(r={});var n,i,o,l,a,c,p,g=[],v=[g],x=r.textIndent||0,b=0,P=0,I=e.split(" "),k=wb.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?I[0].length+2:r.lineIndent||0){var M=Array(c).join(" "),O=[];I.map(function(N){(N=N.split(/\s*\n/)).length>1?O=O.concat(N.map(function($,j){return(j&&$.length?`
`:"")+$})):O.push(N[0])}),I=O,c=TD.apply(this,[M,r])}for(o=0,l=I.length;o<l;o++){var F=0;if(n=I[o],c&&n[0]==`
`&&(n=n.substr(1),F=1),x+b+(P=(i=wb.apply(this,[n,r])).reduce(function(N,$){return N+$},0))>t||F){if(P>t){for(a=PD.apply(this,[n,i,t-(x+b),t]),g.push(a.shift()),g=[a.pop()];a.length;)v.push([a.shift()]);P=i.slice(n.length-(g[0]?g[0].length:0)).reduce(function(N,$){return N+$},0)}else g=[n];v.push(g),x=P+c,b=k}else g.push(n),x+=b+P,b=k}return p=c?function(N,$){return($?M:"")+N.join(" ")}:function(N){return N.join(" ")},v.map(p)},Ym.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var v=this.internal.getFont(g.fontName,g.fontStyle),x="Unicode";return v.metadata[x]?{widths:v.metadata[x].widths||{0:1},kerning:v.metadata[x].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var a,c,p=[];for(a=0,c=n.length;a<c;a++)p=p.concat(ID.apply(this,[n[a],l,o]));return p},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[r[o]]=t[o],i[t[o]]=r[o];var l=function(x){return"0x"+parseInt(x,10).toString(16)},a=e.__fontmetrics__.compress=function(x){var b,P,I,k,M=["{"];for(var O in x){if(b=x[O],isNaN(parseInt(O,10))?P="'"+O+"'":(O=parseInt(O,10),P=(P=l(O).slice(2)).slice(0,-1)+i[P.slice(-1)]),typeof b=="number")b<0?(I=l(b).slice(3),k="-"):(I=l(b).slice(2),k=""),I=k+I.slice(0,-1)+i[I.slice(-1)];else{if(Va(b)!=="object")throw new Error("Don't know what to do with value type "+Va(b)+".");I=a(b)}M.push(P+I)}return M.push("}"),M.join("")},c=e.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,P,I,k,M={},O=1,F=M,N=[],$="",j="",U=x.length-1,H=1;H<U;H+=1)(k=x[H])=="'"?b?(I=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(N.push([F,I]),F={},I=void 0):k=="}"?((P=N.pop())[0][P[1]]=F,I=void 0,F=P[0]):k=="-"?O=-1:I===void 0?n.hasOwnProperty(k)?($+=n[k],I=parseInt($,16)*O,O=1,$=""):$+=k:n.hasOwnProperty(k)?(j+=n[k],F[I]=parseInt(j,16)*O,O=1,I=void 0,j=""):j+=k;return M},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},v={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(x){var b=x.font,P=v.Unicode[b.postScriptName];P&&(b.metadata.Unicode={},b.metadata.Unicode.widths=P.widths,b.metadata.Unicode.kerning=P.kerning);var I=g.Unicode[b.postScriptName];I&&(b.metadata.Unicode.encoding=I,b.encoding=I.codePages[0])}])})(ti.API),(function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(d_(a)),l.metadata=e.API.TTFFont.open(a),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])})(ti),ti.API.addSvgAsImage=function(e,t,r,n,i,o,l,a){if(isNaN(t)||isNaN(r))throw ao.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw ao.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var p=c.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,c.width,c.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(xi.canvg?Promise.resolve(xi.canvg):rS(()=>import("./index.es-CDtkQyjk.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(p,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){v.addImage(c.toDataURL("image/jpeg",1),t,r,n,i,l,a)})},ti.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},ti.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(l),c=[],p=0,g=0,v=0;function x(P,I){var k,M=!1;for(k=0;k<P.length;k+=1)P[k]===I&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var b=a.length;for(v=0;v<b;v+=1)r[a[v]].value=r[a[v]].defaultValue,r[a[v]].explicitSet=!1}if(Va(e)==="object"){for(i in e)if(o=e[i],x(a,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&x(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(p=0;p<o.length;p+=1)if(n=!0,o[p].length===1&&typeof o[p][0]=="number")c.push(String(o[p]-1));else if(o[p].length>1){for(g=0;g<o[p].length;g+=1)typeof o[p][g]!="number"&&(n=!1);n===!0&&c.push([o[p][0]-1,o[p][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,I=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?I.push("/"+P+" /"+r[P].value):I.push("/"+P+" "+r[P].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+l.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+a+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(ti.API),(function(e){var t=e.API,r=t.pdfEscape16=function(o,l){for(var a,c=l.metadata.Unicode.widths,p=["","0","00","000","0000"],g=[""],v=0,x=o.length;v<x;++v){if(a=l.metadata.characterToGlyph(o.charCodeAt(v)),l.metadata.glyIdsUsed.push(a),l.metadata.toUnicode[a]=o.charCodeAt(v),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(l.metadata.widthOfGlyph(a),10)])),a=="0")return g.join("");a=a.toString(16),g.push(p[4-a.length],a)}return g.join("")},n=function(o){var l,a,c,p,g,v,x;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],v=0,x=(a=Object.keys(o).sort(function(b,P){return b-P})).length;v<x;v++)l=a[v],c.length>=100&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(p=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+p+">"));return c.length&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(l){var a=l.font,c=l.out,p=l.newObject,g=l.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var v=a.metadata.Unicode.widths,x=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),b="",P=0;P<x.length;P++)b+=String.fromCharCode(x[P]);var I=p();g({data:b,addLength1:!0,objectId:I}),c("endobj");var k=p();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var M=p();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ug(a.fontName)),c("/FontFile2 "+I+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var O=p();c("<<"),c("/Type /Font"),c("/BaseFont /"+ug(a.fontName)),c("/FontDescriptor "+M+" 0 R"),c("/W "+e.API.PDFObject.convert(v)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=p(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+ug(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+O+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(l){var a=l.font,c=l.out,p=l.newObject,g=l.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var v=a.metadata.rawData,x="",b=0;b<v.length;b++)x+=String.fromCharCode(v[b]);var P=p();g({data:x,addLength1:!0,objectId:P}),c("endobj");var I=p();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var k=p();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+P+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+ug(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=p();for(var M=0;M<a.metadata.hmtx.widths.length;M++)a.metadata.hmtx.widths[M]=parseInt(a.metadata.hmtx.widths[M]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+ug(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,a=o.text||"",c=o.x,p=o.y,g=o.options||{},v=o.mutex||{},x=v.pdfEscape,b=v.activeFontKey,P=v.fonts,I=b,k="",M=0,O="",F=P[I].encoding;if(P[I].encoding!=="Identity-H")return{text:a,x:c,y:p,options:g,mutex:v};for(O=a,I=b,Array.isArray(a)&&(O=a[0]),M=0;M<O.length;M+=1)P[I].metadata.hasOwnProperty("cmap")&&(l=P[I].metadata.cmap.unicode.codeMap[O[M].charCodeAt(0)]),l||O[M].charCodeAt(0)<256&&P[I].metadata.hasOwnProperty("Unicode")?k+=O[M]:k+="";var N="";return parseInt(I.slice(1))<14||F==="WinAnsiEncoding"?N=x(k,I).split("").map(function($){return $.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(N=r(k,P[I])),v.isHex=!0,{text:N,x:c,y:p,options:g,mutex:v}};t.events.push(["postProcessText",function(o){var l=o.text||"",a=[],c={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var p=0;for(p=0;p<l.length;p+=1)Array.isArray(l[p])&&l[p].length===3?a.push([i(Object.assign({},c,{text:l[p][0]})).text,l[p][1],l[p][2]]):a.push(i(Object.assign({},c,{text:l[p]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:l})).text}])})(ti),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(ti.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,o,l,a,c,p,g,v=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,F=0;this.__bidiEngine__={};var N=function(ee){var G=ee.charCodeAt(),ie=G>>8,oe=I[ie];return oe!==void 0?v[256*oe+(255&G)]:ie===252||ie===253?"AL":M.test(ie)?"L":ie===8?"R":"N"},$=function(ee){for(var G,ie=0;ie<ee.length;ie++){if((G=N(ee.charAt(ie)))==="L")return!1;if(G==="R")return!0}return!1},j=function(ee,G,ie,oe){var ue,de,Me,ge,xe=G[oe];switch(xe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(xe="AN");break;case"AL":O=!0,xe="R";break;case"WS":case"BN":xe="N";break;case"CS":oe<1||oe+1>=G.length||(ue=ie[oe-1])!=="EN"&&ue!=="AN"||(de=G[oe+1])!=="EN"&&de!=="AN"?xe="N":O&&(de="AN"),xe=de===ue?de:"N";break;case"ES":xe=(ue=oe>0?ie[oe-1]:"B")==="EN"&&oe+1<G.length&&G[oe+1]==="EN"?"EN":"N";break;case"ET":if(oe>0&&ie[oe-1]==="EN"){xe="EN";break}if(O){xe="N";break}for(Me=oe+1,ge=G.length;Me<ge&&G[Me]==="ET";)Me++;xe=Me<ge&&G[Me]==="EN"?"EN":"N";break;case"NSM":if(l&&!a){for(ge=G.length,Me=oe+1;Me<ge&&G[Me]==="NSM";)Me++;if(Me<ge){var Ee=ee[oe],Ae=Ee>=1425&&Ee<=2303||Ee===64286;if(ue=G[Me],Ae&&(ue==="R"||ue==="AL")){xe="R";break}}}xe=oe<1||(ue=G[oe-1])==="B"?"N":ie[oe-1];break;case"B":O=!1,i=!0,xe=F;break;case"S":o=!0,xe="N"}return xe},U=function(ee,G,ie){var oe=ee.split("");return ie&&H(oe,ie,{hiLevel:F}),oe.reverse(),G&&G.reverse(),oe.join("")},H=function(ee,G,ie){var oe,ue,de,Me,ge,xe=-1,Ee=ee.length,Ae=0,fe=[],Se=F?b:x,we=[];for(O=!1,i=!1,o=!1,ue=0;ue<Ee;ue++)we[ue]=N(ee[ue]);for(de=0;de<Ee;de++){if(ge=Ae,fe[de]=j(ee,we,fe,de),oe=240&(Ae=Se[ge][P[fe[de]]]),Ae&=15,G[de]=Me=Se[Ae][5],oe>0)if(oe===16){for(ue=xe;ue<de;ue++)G[ue]=1;xe=-1}else xe=-1;if(Se[Ae][6])xe===-1&&(xe=de);else if(xe>-1){for(ue=xe;ue<de;ue++)G[ue]=Me;xe=-1}we[de]==="B"&&(G[de]=0),ie.hiLevel|=Me}o&&(function(De,Re,$e){for(var Oe=0;Oe<$e;Oe++)if(De[Oe]==="S"){Re[Oe]=F;for(var it=Oe-1;it>=0&&De[it]==="WS";it--)Re[it]=F}})(we,G,Ee)},Y=function(ee,G,ie,oe,ue){if(!(ue.hiLevel<ee)){if(ee===1&&F===1&&!i)return G.reverse(),void(ie&&ie.reverse());for(var de,Me,ge,xe,Ee=G.length,Ae=0;Ae<Ee;){if(oe[Ae]>=ee){for(ge=Ae+1;ge<Ee&&oe[ge]>=ee;)ge++;for(xe=Ae,Me=ge-1;xe<Me;xe++,Me--)de=G[xe],G[xe]=G[Me],G[Me]=de,ie&&(de=ie[xe],ie[xe]=ie[Me],ie[Me]=de);Ae=ge}Ae++}}},ae=function(ee,G,ie){var oe=ee.split(""),ue={hiLevel:F};return ie||(ie=[]),H(oe,ie,ue),(function(de,Me,ge){if(ge.hiLevel!==0&&g)for(var xe,Ee=0;Ee<de.length;Ee++)Me[Ee]===1&&(xe=k.indexOf(de[Ee]))>=0&&(de[Ee]=k[xe+1])})(oe,ie,ue),Y(2,oe,G,ie,ue),Y(1,oe,G,ie,ue),oe.join("")};return this.__bidiEngine__.doBidiReorder=function(ee,G,ie){if((function(ue,de){if(de)for(var Me=0;Me<ue.length;Me++)de[Me]=Me;a===void 0&&(a=$(ue)),p===void 0&&(p=$(ue))})(ee,G),l||!c||p)if(l&&c&&a^p)F=a?1:0,ee=U(ee,G,ie);else if(!l&&c&&p)F=a?1:0,ee=ae(ee,G,ie),ee=U(ee,G);else if(!l||a||c||p){if(l&&!c&&a^p)ee=U(ee,G),a?(F=0,ee=ae(ee,G,ie)):(F=1,ee=ae(ee,G,ie),ee=U(ee,G));else if(l&&a&&!c&&p)F=1,ee=ae(ee,G,ie),ee=U(ee,G);else if(!l&&!c&&a^p){var oe=g;a?(F=1,ee=ae(ee,G,ie),F=0,g=!1,ee=ae(ee,G,ie),g=oe):(F=0,ee=ae(ee,G,ie),ee=U(ee,G),F=1,g=!1,ee=ae(ee,G,ie),g=oe,ee=U(ee,G))}}else F=0,ee=ae(ee,G,ie);else F=a?1:0,ee=ae(ee,G,ie);return ee},this.__bidiEngine__.setOptions=function(ee){ee&&(l=ee.isInputVisual,c=ee.isOutputVisual,a=ee.isInputRtl,p=ee.isOutputRtl,g=ee.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(l=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?l.push([r.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):l.push([r.doBidiReorder(i[a])]);n.text=l}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(ti),ti.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Dh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Qse(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new zse(this.contents),this.head=new qse(this),this.name=new Hse(this),this.cmap=new mj(this),this.toUnicode={},this.hhea=new $se(this),this.maxp=new Wse(this),this.hmtx=new Xse(this),this.post=new Use(this),this.os2=new Vse(this),this.loca=new Jse(this),this.glyf=new Yse(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,a,c,p;for(p=[],l=0,a=(c=this.bbox).length;l<a;l++)t=c[l],p.push(Math.round(t*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,o,l,a;for(l=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=t.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var vd,Dh=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,o,l,a,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),a=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^a)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*l+256*a+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(this.writeByte(r));return o},e})(),zse=(function(){var e;function t(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,o,l,a,c,p,g,v,x,b,P,I;for(I in b=Object.keys(r).length,c=Math.log(2),v=16*Math.floor(Math.log(b)/c),l=Math.floor(v/c),g=16*b-v,(i=new Dh).writeInt(this.scalarType),i.writeShort(b),i.writeShort(v),i.writeShort(l),i.writeShort(g),o=16*b,p=i.pos+o,a=null,P=[],r)for(x=r[I],i.writeString(I),i.writeInt(e(x)),i.writeInt(p),i.writeInt(x.length),P=P.concat(x),I==="head"&&(a=p),p+=x.length;p%4;)P.push(0),p++;return i.write(P),n=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(n),i.data},e=function(r){var n,i,o,l;for(r=gj.call(r);r.length%4;)r.push(0);for(o=new Dh(r),i=0,n=0,l=r.length;n<l;n=n+=4)i+=o.readUInt32();return 4294967295&i},t})(),jse={}.hasOwnProperty,af=function(e,t){for(var r in t)jse.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};vd=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var qse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Dh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),FD=(function(){function e(t,r){var n,i,o,l,a,c,p,g,v,x,b,P,I,k,M,O,F;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(b=t.readUInt16(),x=b/2,t.pos+=6,o=(function(){var N,$;for($=[],c=N=0;0<=x?N<x:N>x;c=0<=x?++N:--N)$.push(t.readUInt16());return $})(),t.pos+=2,I=(function(){var N,$;for($=[],c=N=0;0<=x?N<x:N>x;c=0<=x?++N:--N)$.push(t.readUInt16());return $})(),p=(function(){var N,$;for($=[],c=N=0;0<=x?N<x:N>x;c=0<=x?++N:--N)$.push(t.readUInt16());return $})(),g=(function(){var N,$;for($=[],c=N=0;0<=x?N<x:N>x;c=0<=x?++N:--N)$.push(t.readUInt16());return $})(),i=(this.length-t.pos+this.offset)/2,a=(function(){var N,$;for($=[],c=N=0;0<=i?N<i:N>i;c=0<=i?++N:--N)$.push(t.readUInt16());return $})(),c=M=0,F=o.length;M<F;c=++M)for(k=o[c],n=O=P=I[c];P<=k?O<=k:O>=k;n=P<=k?++O:--O)g[c]===0?l=n+p[c]:(l=a[g[c]/2+(n-P)-(x-c)]||0)!==0&&(l+=p[c]),this.codeMap[n]=65535&l}t.pos=v}return e.encode=function(t,r){var n,i,o,l,a,c,p,g,v,x,b,P,I,k,M,O,F,N,$,j,U,H,Y,ae,ee,G,ie,oe,ue,de,Me,ge,xe,Ee,Ae,fe,Se,we,De,Re,$e,Oe,it,Ye,rt,Ie;switch(oe=new Dh,l=Object.keys(t).sort(function(It,at){return It-at}),r){case"macroman":for(I=0,k=(function(){var It=[];for(P=0;P<256;++P)It.push(0);return It})(),O={0:0},o={},ue=0,xe=l.length;ue<xe;ue++)O[it=t[i=l[ue]]]==null&&(O[it]=++I),o[i]={old:t[i],new:O[t[i]]},k[i]=O[t[i]];return oe.writeUInt16(1),oe.writeUInt16(0),oe.writeUInt32(12),oe.writeUInt16(0),oe.writeUInt16(262),oe.writeUInt16(0),oe.write(k),{charMap:o,subtable:oe.data,maxGlyphID:I+1};case"unicode":for(G=[],v=[],F=0,O={},n={},M=p=null,de=0,Ee=l.length;de<Ee;de++)O[$=t[i=l[de]]]==null&&(O[$]=++F),n[i]={old:$,new:O[$]},a=O[$]-i,M!=null&&a===p||(M&&v.push(M),G.push(i),p=a),M=i;for(M&&v.push(M),v.push(65535),G.push(65535),ae=2*(Y=G.length),H=2*Math.pow(Math.log(Y)/Math.LN2,2),x=Math.log(H/2)/Math.LN2,U=2*Y-H,c=[],j=[],b=[],P=Me=0,Ae=G.length;Me<Ae;P=++Me){if(ee=G[P],g=v[P],ee===65535){c.push(0),j.push(0);break}if(ee-(ie=n[ee].new)>=32768)for(c.push(0),j.push(2*(b.length+Y-P)),i=ge=ee;ee<=g?ge<=g:ge>=g;i=ee<=g?++ge:--ge)b.push(n[i].new);else c.push(ie-ee),j.push(0)}for(oe.writeUInt16(3),oe.writeUInt16(1),oe.writeUInt32(12),oe.writeUInt16(4),oe.writeUInt16(16+8*Y+2*b.length),oe.writeUInt16(0),oe.writeUInt16(ae),oe.writeUInt16(H),oe.writeUInt16(x),oe.writeUInt16(U),$e=0,fe=v.length;$e<fe;$e++)i=v[$e],oe.writeUInt16(i);for(oe.writeUInt16(0),Oe=0,Se=G.length;Oe<Se;Oe++)i=G[Oe],oe.writeUInt16(i);for(Ye=0,we=c.length;Ye<we;Ye++)a=c[Ye],oe.writeUInt16(a);for(rt=0,De=j.length;rt<De;rt++)N=j[rt],oe.writeUInt16(N);for(Ie=0,Re=b.length;Ie<Re;Ie++)I=b[Ie],oe.writeUInt16(I);return{charMap:n,subtable:oe.data,maxGlyphID:F+1}}},e})(),mj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new FD(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=FD.encode(t,r),(i=new Dh).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e})(),$se=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),Vse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Use=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var l,a,c;for(c=[],o=l=0,a=this.file.maxp.numGlyphs;0<=a?l<a:l>a;o=0<=a?++l:--l)c.push(t.readUInt32());return c}).call(this)}},e})(),Gse=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Hse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,o,l,a,c,p,g,v,x;for(t.pos=this.offset,t.readShort(),r=t.readShort(),a=t.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(c={},o=g=0,v=n.length;g<v;o=++g)i=n[o],t.pos=i.offset,p=t.readString(i.length),l=new Gse(p,i),c[x=i.nameID]==null&&(c[x]=[]),c[i.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),Wse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),Xse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,o,l,a,c;for(t.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,g;for(g=[],r=p=0;0<=i?p<i:p>i;r=0<=i?++p:--p)g.push(t.readInt16());return g})(),this.widths=(function(){var p,g,v,x;for(x=[],p=0,g=(v=this.metrics).length;p<g;p++)o=v[p],x.push(o.advance);return x}).call(this),n=this.widths[this.widths.length-1],c=[],r=l=0;0<=i?l<i:l>i;r=0<=i?++l:--l)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),gj=[].slice,Yse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,o,l,a,c,p,g,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,l=(a=new Dh(r.read(i))).readShort(),p=a.readShort(),v=a.readShort(),c=a.readShort(),g=a.readShort(),this.cache[t]=l===-1?new Kse(a,p,v,c,g):new Zse(a,l,p,v,c,g),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,o,l,a,c;for(l=[],o=[],a=0,c=r.length;a<c;a++)i=t[r[a]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},e})(),Zse=(function(){function e(t,r,n,i,o,l){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Kse=(function(){function e(t,r,n,i,o){var l,a;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;a=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&a;)l.pos+=1&a?4:2,128&a?l.pos+=8:64&a?l.pos+=4:8&a&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Dh(gj.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),Jse=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return af(e,vd),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<r.length&&r[o]==l){++o,n[l]=i;var a=this.offsets[l],c=this.offsets[l+1]-a;c>0&&(i+=c)}for(var p=new Array(4*n.length),g=0;g<n.length;++g)p[4*g+3]=255&n[g],p[4*g+2]=(65280&n[g])>>8,p[4*g+1]=(16711680&n[g])>>16,p[4*g]=(4278190080&n[g])>>24;return p},e})(),Qse=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)n=o[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,o,l,a,c;for(i={},l=0,a=t.length;l<a;l++)i[o=t[l]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in c=this.glyphsFor(r))n=c[o],i[o]=n;return i},e.prototype.encode=function(t,r){var n,i,o,l,a,c,p,g,v,x,b,P,I,k,M;for(i in n=mj.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),b={0:0},M=n.charMap)b[(c=M[i]).old]=c.new;for(P in x=n.maxGlyphID,l)P in b||(b[P]=x++);return g=(function(O){var F,N;for(F in N={},O)N[O[F]]=F;return N})(b),v=Object.keys(g).sort(function(O,F){return O-F}),I=(function(){var O,F,N;for(N=[],O=0,F=v.length;O<F;O++)a=v[O],N.push(g[a]);return N})(),o=this.font.glyf.encode(l,I,b),p=this.font.loca.encode(o.offsets,I),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e})();ti.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,o,l;if(Array.isArray(r))return"["+(function(){var a,c,p;for(p=[],a=0,c=r.length;a<c;a++)n=r[a],p.push(t.convert(n));return p})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)l=r[i],o.push("/"+i+" "+t.convert(l));return o.push(">>"),o.join(`
`)}return""+r},t})();const ele=e=>{const t=e.width,r=e.height,n=document.createElement("div");n.className="hidden-map",n.style.width="0px",n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n);const i=document.createElement("div");i.style.width=t+"px",i.style.height=r+"px",n.appendChild(i);const o=e.map.map.getStyle();for(const c in o.sources){const p=o.sources[c];Object.keys(p).forEach(g=>{p[g]||delete p[g]})}const l=new h2.Map({container:i,center:e.map.map.getCenter(),zoom:e.map.map.getZoom(),bearing:0,pitch:0,interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,style:o}),a=l._cameraForBoxAndBearing([e.bboxUnrotated[0],e.bboxUnrotated[1]],[e.bboxUnrotated[2],e.bboxUnrotated[3]],e.bearing+e.map.map.getBearing());return l._fitInternal(a),new Promise(c=>{console.log("before idle"),l.once("idle",function(){const p={...e,renderMap:l,hiddenContainer:n,createPdf:g=>tle({...e,renderMap:l,hiddenContainer:n,...g}),createPng:g=>nle({...e,renderMap:l,hiddenContainer:n,...g})};c(p)})})};function tle(e){const t=new ti({orientation:e?.orientation==="portrait"?"p":"l",unit:"mm",compress:!0,format:e.format});return Object.defineProperty(window,"devicePixelRatio",{get:function(){return 300/96}}),new Promise(r=>{t.addImage(e.renderMap.getCanvas().toDataURL("image/png"),"png",0,0,t.internal.pageSize.getWidth(),t.internal.pageSize.getHeight(),void 0,"FAST"),e.renderMap.remove(),e.hiddenContainer.parentNode?.removeChild(e.hiddenContainer);const n={...e,pdf:t,downloadPdf:i=>rle({...n,...i}),formData:new FormData};r(n)})}function rle(e){return e.pdf.save("Map.pdf"),new Promise(function(t){t({...e})})}function nle(e){return new Promise(t=>{const r=e.renderMap.getCanvas().toDataURL("image/png"),n={...e,png:r,downloadPng:i=>ile({...n,...i})};t(n)})}function ile(e){const t=document.createElement("a");return t.download=e?.name?e.name+".png":"map.png",t.href=e.png,document.body.appendChild(t),t.click(),document.body.removeChild(t),new Promise(function(r){r({...e})})}function yj(e){const t=la({mapId:e.mapId});return{createExport:Q.useMemo(()=>{if(t.map)return n=>ele({map:t.map,...n})},[t.map])}}const BD=e=>{const t=la({mapId:e.mapId}),r=yj({mapId:e.mapId}),[n,i]=ft.useState(!1);return Z.jsx(Z.Fragment,{children:Z.jsx(ji,{color:"primary",variant:"contained",onClick:()=>{if(t.map&&r?.createExport){i(!0);const o=t.map.getBounds(),l=[o.getWest(),o.getSouth(),o.getEast(),o.getNorth()];r.createExport({width:595*1.4,height:842*1.4,bbox:l,bboxUnrotated:l,bearing:t.map.getBearing(),format:"a4",orientation:"portrait",...e.exportOptions}).then(a=>a.createPdf()).then(a=>(i(!1),a.downloadPdf())).catch(a=>{console.log(a),i(!1)})}},children:n?Z.jsx(y2,{size:24,sx:{color:"#fff"}}):Z.jsx(dae,{})})})};try{BD.displayName="MlCreatePdfButton",BD.__docgenInfo={description:"Renders a button that will create a PDF version of the current map view (dimensions adjusted to fit Din A4 Paper).",displayName:"MlCreatePdfButton",props:{mapId:{defaultValue:null,description:"ID of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},exportOptions:{defaultValue:null,description:"Option overrides for the createExport function",name:"exportOptions",required:!1,type:{name:"createExportOptions | undefined"}}}}}catch{}const Mg={A4:{"300dpi":{width:2480,height:3508},"150dpi":{width:1240,height:1754},"72dpi":{width:595,height:842}},A3:{"300dpi":{width:3505,height:4961},"150dpi":{width:1754,height:2480},"72dpi":{width:842,height:1191}},A2:{"300dpi":{width:4961,height:7016},"150dpi":{width:2480,height:3508},"72dpi":{width:1191,height:1684}},A1:{"300dpi":{width:7016,height:9933},"150dpi":{width:3508,height:4967},"72dpi":{width:1684,height:2384}},A0:{"300dpi":{width:9933,height:14043},"150dpi":{width:4967,height:7022},"72dpi":{width:2384,height:3370}}},vj=ft.createContext({}),ale=Mg.A4["72dpi"],yT=({children:e})=>{const[t,r]=Q.useState("A4"),[n,i]=Q.useState("72dpi"),[o,l]=Q.useState({center:void 0,scale:void 0,rotate:0,width:210,height:297,orientation:"portrait",fixedScale:0}),a=Q.useRef(null),c=Q.useMemo(()=>typeof Mg[t][n]<"u"?o.orientation==="portrait"?Mg[t][n]:{width:Mg[t][n].height,height:Mg[t][n].width}:ale,[t,n,o.orientation]),p={options:o,setOptions:l,format:t,setFormat:r,quality:n,setQuality:i,geojsonRef:a,template:c};return Z.jsx(vj.Provider,{value:p,children:e})};try{yT.displayName="PdfContextProvider",yT.__docgenInfo={description:"",displayName:"PdfContextProvider",props:{}}}catch{}function QP(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function bj(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function _j(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function eI(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function ole(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function sle(e,t){var r=eI("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function vT(e){return e.replace(/_/g,".")}function Nv(e,t){var r=null,n="-1";return QP(e,function(i){var o=eI("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!o||i.brand?!1:(r=i,n=o[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=sle(i.versionTest.toLowerCase(),t)||n),n=vT(n),!0)}),{preset:r,version:n}}function Sb(e,t){var r={brand:"",version:"-1"};return QP(e,function(n){var i=xj(t,n);return i?(r.brand=n.id,r.version=n.versionAlias||i.version,r.version!=="-1"):!1}),r}function xj(e,t){return bj(e,function(r){var n=r.brand;return eI(""+t.test,n.toLowerCase())})}var wj=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Sj=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],bT=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Cj=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Ej=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Tj(e){return!!Nv(Cj,e).preset}function lle(e){var t=_j(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:Tj(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=Nv(wj,t),l=o.preset,a=o.version,c=Nv(Ej,t),p=c.preset,g=c.version,v=Nv(Sj,t);if(n.chromium=!!v.preset,n.chromiumVersion=v.version,!n.chromium){var x=Nv(bT,t);n.webkit=!!x.preset,n.webkitVersion=x.version}return p&&(i.name=p.id,i.version=g,i.majorVersion=parseInt(g,10)),l&&(n.name=l.id,n.version=a,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}function ule(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=t.mobile||!1,i=r[0],o=(t.platform||navigator.platform).toLowerCase(),l={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Sb(Cj,r).brand||Tj(_j())},a={name:"unknown",version:"-1",majorVersion:-1};l.webkit=!l.chromium&&QP(bT,function(x){return xj(r,x)});var c=Sb(Sj,r);if(l.chromium=!!c.brand,l.chromiumVersion=c.version||"-1",!l.chromium){var p=Sb(bT,r);l.webkit=!!p.brand,l.webkitVersion=p.version||"-1"}var g=bj(Ej,function(x){return new RegExp(""+x.test,"g").exec(o)});a.name=g?g.id:"";{var v=Sb(wj,r);l.name=v.brand||l.name,l.version=v.brand&&e?e.uaFullVersion:v.version}return l.webkit&&(a.name=n?"ios":"mac"),a.name==="ios"&&l.webview&&(l.version="-1"),a.version=vT(a.version),l.version=vT(l.version),a.majorVersion=parseInt(a.version,10),l.majorVersion=parseInt(l.version,10),{browser:l,os:a,isMobile:n,isHints:!0}}function cle(e){return ole()?ule():lle(e)}function dle(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(i){return i?""+e+i:""}).join(" ")}).join(" ")}function fle(e,t){return t.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function Fp(e,t){return function(r){r&&(e[t]=r)}}function Pj(e,t,r){return function(n){n&&(e[t][r]=n)}}function hle(e,t){return t===void 0&&(t={}),function(r,n){e.forEach(function(i){var o=t[i]||i;o in r||(r[o]=function(){for(var l,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var p=(l=this[n])[i].apply(l,a);return p===this[n]?this:p})})}}var ple="function",mle="object",gle="string",yle="number",tI="undefined",Ij=typeof window!==tI,vle=typeof document!==tI&&document,ble=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Gs=1e-7,Cb={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _le(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],l=0,a=o.length;l<a;l++,i++)n[i]=o[l];return n}function H_(e,t,r,n){return(e*n+t*r)/(r+n)}function rI(e){return typeof e===tI}function fd(e){return e&&typeof e===mle}function Cl(e){return Array.isArray(e)}function Yf(e){return typeof e===gle}function T0(e){return typeof e===yle}function nI(e){return typeof e===ple}function xle(e,t){var r=e===""||e==" ",n=t===""||t==" ";return n&&r||e===t}function kj(e,t,r,n,i){var o=iI(e,t,r);return o?r:wle(e,t,r+1,n,i)}function iI(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function wle(e,t,r,n,i){for(var o=function(p){var g=t[p].trim();if(g===e.close&&!iI(e,t,p))return{value:p};var v=p,x=mc(i,function(b){var P=b.open;return P===g});if(x&&(v=kj(x,t,p,n,i)),v===-1)return l=p,"break";p=v,l=p},l,a=r;a<n;++a){var c=o(a);if(a=l,typeof c=="object")return c.value;if(c==="break")break}return-1}function aI(e,t){var r=Yf(t)?{separator:t}:t,n=r.separator,i=n===void 0?",":n,o=r.isSeparateFirst,l=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,c=a===void 0?l:a,p=r.openCloseCharacters,g=p===void 0?ble:p,v=g.map(function(U){var H=U.open,Y=U.close;return H===Y?H:H+"|"+Y}).join("|"),x="(\\s*"+i+"\\s*|"+v+"|\\s+)",b=new RegExp(x,"g"),P=e.split(b).filter(function(U){return U&&U!=="undefined"}),I=P.length,k=[],M=[];function O(){return M.length?(k.push(M.join("")),M=[],!0):!1}for(var F=function(U){var H=P[U].trim(),Y=U,ae=mc(g,function(ie){var oe=ie.open;return oe===H}),ee=mc(g,function(ie){var oe=ie.close;return oe===H});if(ae){if(Y=kj(ae,P,U,I,g),Y!==-1&&c)return O()&&o||(k.push(P.slice(U,Y+1).join("")),U=Y,o)?(N=U,"break"):(N=U,"continue")}else if(ee&&!iI(ee,P,U)){var G=_le(g);return G.splice(g.indexOf(ee),1),{value:aI(e,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:l,isSeparateOpenClose:c,openCloseCharacters:G})}}else if(xle(H,i)&&!l)return O(),o?(N=U,"break"):(N=U,"continue");Y===-1&&(Y=I-1),M.push(P.slice(U,Y+1).join("")),U=Y,N=U},N,$=0;$<I;++$){var j=F($);if($=N,typeof j=="object")return j.value;if(j==="break")break}return M.length&&k.push(M.join("")),k}function Nh(e){return aI(e,"")}function Mp(e){return aI(e,",")}function Aj(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function c1(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2],i=t[3];return{prefix:r,unit:i,value:parseFloat(n)}}function Sle(e,t){return e.replace(/([a-z])([A-Z])/g,function(r,n,i){return""+n+t+i.toLowerCase()})}function P0(){return Date.now?Date.now():new Date().getTime()}function Vf(e,t,r){r===void 0&&(r=-1);for(var n=e.length,i=0;i<n;++i)if(t(e[i],i,e))return i;return r}function mc(e,t,r){var n=Vf(e,t);return n>-1?e[n]:r}var Mj=(function(){var e=P0(),t=Ij&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=P0(),i=setTimeout(function(){r(n-e)},1e3/60);return i}})(),Cle=(function(){var e=Ij&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}})();function Sy(e){return Object.keys(e)}function Qa(e,t){var r=c1(e),n=r.value,i=r.unit;if(fd(t)){var o=t[i];if(o){if(nI(o))return o(n);if(Cb[i])return Cb[i](n,o)}}else if(i==="%")return n*t/100;return Cb[i]?Cb[i](n):n}function _T(e,t,r){return Math.max(t,Math.min(e,r))}function zD(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[Pi(t[0],Gs),Pi(t[0]/n,Gs)],[Pi(t[1]*n,Gs),Pi(t[1],Gs)]].filter(function(i){return i.every(function(o,l){var a=t[l],c=Pi(a,Gs);return r?o<=a||o<=c:o>=a||o>=c})})[0]||e}function Lj(e,t,r,n){if(!n)return e.map(function(b,P){return _T(b,t[P],r[P])});var i=e[0],o=e[1],l=n===!0?i/o:n,a=zD(e,t,!1,l),c=a[0],p=a[1],g=zD(e,r,!0,l),v=g[0],x=g[1];return i<c||o<p?(i=c,o=p):(i>v||o>x)&&(i=v,o=x),[i,o]}function Ele(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return r}function xT(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function Is(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function Tle(e){return[0,1].map(function(t){return xT(e.map(function(r){return r[t]}))})}function jD(e){var t=Tle(e),r=Is(t,e[0]),n=Is(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function Nf(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function Pi(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function qD(e,t){return e.forEach(function(r,n){e[n]=Pi(e[n],t)}),e}function Ple(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function Ile(e){return e.reduce(function(t,r){return t.concat(r)},[])}function al(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Rj(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function Dj(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function au(e,t,r,n){e.addEventListener(t,r,n)}function Nl(e,t,r,n){e.removeEventListener(t,r,n)}function oI(e){return e?.ownerDocument||vle}function sI(e){return oI(e).documentElement}function Hh(e){return oI(e).body}function Ah(e){var t;return((t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function Nj(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function lI(e){return fd(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}function kle(e,t,r,n,i,o){for(var l=0;l<i;++l){var a=r+l*i,c=n+l*i;e[a]+=e[c]*o,t[a]+=t[c]*o}}function Ale(e,t,r,n,i){for(var o=0;o<i;++o){var l=r+o*i,a=n+o*i,c=e[l],p=t[l];e[l]=e[a],e[a]=c,t[l]=t[a],t[a]=p}}function Mle(e,t,r,n,i){for(var o=0;o<n;++o){var l=r+o*n;e[l]/=i,t[l]/=i}}function Oj(e,t,r){for(var n=e.slice(),i=0;i<r;++i)n[i*r+t-1]=0,n[(t-1)*r+i]=0;return n[(t-1)*(r+1)]=1,n}function Qd(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=So(t),i=0;i<t;++i){var o=t*i+i;if(!Pi(r[o],Gs)){for(var l=i+1;l<t;++l)if(r[t*i+l]){Ale(r,n,i,l,t);break}}if(!Pi(r[o],Gs))return[];Mle(r,n,i,t,r[o]);for(var l=0;l<t;++l){var a=l,c=l+i*t,p=r[c];!Pi(p,Gs)||i===l||kle(r,n,a,i,t,-p)}}return n}function Lle(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=0;n<t;++n)for(var i=0;i<t;++i)r[i*t+n]=e[t*n+i];return r}function Fj(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=e[t*t-1],i=0;i<t-1;++i)r[i]=e[t*(t-1)+i]/n;return r[t-1]=0,r}function Rle(e,t){for(var r=So(t),n=0;n<t-1;++n)r[t*(t-1)+n]=e[n]||0;return r}function Up(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function hd(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=So(r),i=Math.min(t,r),o=0;o<i-1;++o){for(var l=0;l<i-1;++l)n[o*r+l]=e[o*t+l];n[(o+1)*r-1]=e[(o+1)*t-1],n[(r-1)*r+o]=e[(t-1)*t+o]}return n[r*r-1]=e[t*t-1],n}function W_(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=So(e);return t.forEach(function(i){n=eo(n,i,e)}),n}function eo(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],i=e.length/r,o=t.length/i;if(i){if(!o)return e}else return t;for(var l=0;l<r;++l)for(var a=0;a<o;++a){n[a*r+l]=0;for(var c=0;c<i;++c)n[a*r+l]+=e[c*r+l]*t[a*i+c]}return n}function ma(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]+t[i];return n}function ci(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]-t[i];return n}function Dle(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function Bj(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function cu(e,t,r){r===void 0&&(r=t.length);var n=eo(e,t,r),i=n[r-1];return n.map(function(o){return o/i})}function Nle(e,t){return eo(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function Ole(e,t){return eo(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function Fle(e,t){return eo(e,f1(t,4))}function Eb(e,t){var r=t[0],n=r===void 0?1:r,i=t[1],o=i===void 0?1:i,l=t[2],a=l===void 0?1:l;return eo(e,[n,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function d1(e,t){return cu(f1(t,3),Up(e,3))}function GS(e,t){var r=t[0],n=r===void 0?0:r,i=t[1],o=i===void 0?0:i,l=t[2],a=l===void 0?0:l;return eo(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,o,a,1],4)}function $D(e,t){return eo(e,t,4)}function f1(e,t){var r=Math.cos(e),n=Math.sin(e),i=So(t);return i[0]=r,i[1]=n,i[t]=-n,i[t+1]=r,i}function So(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function uI(e,t){for(var r=So(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[(t+1)*i]=e[i];return r}function Gp(e,t){for(var r=So(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[t*(t-1)+i]=e[i];return r}function cI(e,t,r,n,i,o,l,a){var c=e[0],p=e[1],g=t[0],v=t[1],x=r[0],b=r[1],P=n[0],I=n[1],k=i[0],M=i[1],O=o[0],F=o[1],N=l[0],$=l[1],j=a[0],U=a[1],H=[c,0,g,0,x,0,P,0,p,0,v,0,b,0,I,0,1,0,1,0,1,0,1,0,0,c,0,g,0,x,0,P,0,p,0,v,0,b,0,I,0,1,0,1,0,1,0,1,-k*c,-M*c,-O*g,-F*g,-N*x,-$*x,-j*P,-U*P,-k*p,-M*p,-O*v,-F*v,-N*b,-$*b,-j*I,-U*I],Y=Qd(H,8);if(!Y.length)return[];var ae=eo(Y,[k,M,O,F,N,$,j,U],8);return ae[8]=1,hd(Lle(ae),3,4)}var a0=function(){return a0=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},a0.apply(this,arguments)};function Ble(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function I0(e,t){return t===void 0&&(t=0),cg(ay(e,t))}function zle(e,t){var r=cu(e,[t[0],t[1]||0,t[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function cg(e){var t=Ble();return e.forEach(function(r){var n=r.matrixFunction,i=r.functionValue;n&&(t=n(t,i))}),t}function ay(e,t){t===void 0&&(t=0);var r=Cl(e)?e:Nh(e);return r.map(function(n){var i=Aj(n),o=i.prefix,l=i.value,a=null,c=o,p="";if(o==="translate"||o==="translateX"||o==="translate3d"){var g=fd(t)?a0(a0({},t),{"o%":t["%"]}):{"%":t,"o%":t},v=Mp(l).map(function(ie,oe){return oe===0&&"x%"in g?g["%"]=t["x%"]:oe===1&&"y%"in g?g["%"]=t["y%"]:g["%"]=t["o%"],Qa(ie,g)}),x=v[0],b=v[1],P=b===void 0?0:b,I=v[2],k=I===void 0?0:I;a=GS,p=[x,P,k]}else if(o==="translateY"){var M=fd(t)?a0({"%":t["y%"]},t):{"%":t},P=Qa(l,M);a=GS,p=[0,P,0]}else if(o==="translateZ"){var k=parseFloat(l);a=GS,p=[0,0,k]}else if(o==="scale"||o==="scale3d"){var O=Mp(l).map(function(ie){return parseFloat(ie)}),F=O[0],N=O[1],$=N===void 0?F:N,j=O[2],U=j===void 0?1:j;a=Eb,p=[F,$,U]}else if(o==="scaleX"){var F=parseFloat(l);a=Eb,p=[F,1,1]}else if(o==="scaleY"){var $=parseFloat(l);a=Eb,p=[1,$,1]}else if(o==="scaleZ"){var U=parseFloat(l);a=Eb,p=[1,1,U]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var H=c1(l),Y=H.unit,ae=H.value,ee=Y==="rad"?ae:ae*Math.PI/180;o==="rotate"||o==="rotateZ"?(c="rotateZ",a=Fle):o==="rotateX"?a=Nle:o==="rotateY"&&(a=Ole),p=ee}else if(o==="matrix3d")a=$D,p=Mp(l).map(function(ie){return parseFloat(ie)});else if(o==="matrix"){var G=Mp(l).map(function(ie){return parseFloat(ie)});a=$D,p=[G[0],G[1],0,0,G[2],G[3],0,0,0,0,1,0,G[4],G[5],0,1]}else c="";return{name:o,functionName:c,value:l,matrixFunction:a,functionValue:p}})}var jle=(function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var i=this.keys,o=this.values,l=i.indexOf(r),a=l===-1?i.length:l;i[a]=r,o[a]=n},e})(),qle=(function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e})(),$le=typeof Map=="function",Vle=(function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e})();function Ule(e,t){var r=[],n=[];return e.forEach(function(i){var o=i[0],l=i[1],a=new Vle;r[o]=a,n[l]=a}),r.forEach(function(i,o){i.connect(r[o-1])}),e.filter(function(i,o){return!t[o]}).map(function(i,o){var l=i[0],a=i[1];if(l===a)return[0,0];var c=r[l],p=n[a-1],g=c.getIndex();c.disconnect(),p?c.connect(p,p.next):c.connect(void 0,r[0]);var v=c.getIndex();return[g,v]})}var Gle=(function(){function e(r,n,i,o,l,a,c,p){this.prevList=r,this.list=n,this.added=i,this.removed=o,this.changed=l,this.maintained=a,this.changedBeforeAdded=c,this.fixed=p}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=Ule(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(o,l){var a=o[0],c=o[1],p=n[l],g=p[0],v=p[1];if(a!==c)return i.push([g,v]),!0}),this.cachePureChanged=i},e})();function dI(e,t,r){var n=$le?Map:r?qle:jle,i=r||function(O){return O},o=[],l=[],a=[],c=e.map(i),p=t.map(i),g=new n,v=new n,x=[],b=[],P={},I=[],k=0,M=0;return c.forEach(function(O,F){g.set(O,F)}),p.forEach(function(O,F){v.set(O,F)}),c.forEach(function(O,F){var N=v.get(O);typeof N>"u"?(++M,l.push(F)):P[N]=M}),p.forEach(function(O,F){var N=g.get(O);typeof N>"u"?(o.push(F),++k):(a.push([N,F]),M=P[F]||0,x.push([N-M,F-k]),b.push(F===N),N!==F&&I.push([N,F]))}),l.reverse(),new Gle(e,t,o,l,I,a,x,b)}var Hle=(function(){function e(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var n=[].slice.call(r),i=dI(this.list,n,this.findKeyCallback);return this.list=n,i},e})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wT=function(e,t){return wT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},wT(e,t)};function Wle(e,t){wT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zj=typeof Map=="function"?void 0:(function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}})(),jj=(function(e){Wle(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,zj)||this}return t})(Hle);function Xle(e,t){return dI(e,t,zj)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ST=function(){return ST=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ST.apply(this,arguments)};function Yle(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],l=0,a=o.length;l<a;l++,i++)n[i]=o[l];return n}var fI=(function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(fd(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(!r)this._events={};else if(fd(r))for(var i in r)this.off(i);else if(!n)this._events[r]=[];else{var o=this._events[r];if(o){var l=Vf(o,function(a){return a.listener===n});l>-1&&o.splice(l,1)}}return this},t.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(o){i._addEvent(r,o,{once:!0})})},t.emit=function(r,n){var i=this;n===void 0&&(n={});var o=this._events[r];if(!r||!o)return!0;var l=!1;return n.eventType=r,n.stop=function(){l=!0},n.currentTarget=this,Yle(o).forEach(function(a){a.listener(n),a.once&&i.off(r,a.listener)}),!l},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,i){var o=this._events;o[r]=o[r]||[];var l=o[r];l.push(ST({listener:n},i))},e})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var CT=function(e,t){return CT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},CT(e,t)};function Zle(e,t){CT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Lg=function(){return Lg=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Lg.apply(this,arguments)};function Kle(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function VD(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function Tb(e){if(e){if(Yf(e))return document.querySelector(e)}else return null;if(nI(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var Jle=(function(e){Zle(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(o){n.checkScroll({container:i.container,inputEvent:o})}})},n}var r=t.prototype;return r.dragStart=function(n,i){var o=Tb(i.container);if(!o){this._flag=!1;return}var l=0,a=0,c=0,p=0;if(o===document.body)c=window.innerWidth,p=window.innerHeight;else{var g=o.getBoundingClientRect();l=g.top,a=g.left,c=g.width,p=g.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:l,left:a,width:c,height:p},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},r.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var o=n.clientX,l=n.clientY,a=i.threshold,c=a===void 0?0:a,p=this,g=p._startRect,v=p._startPos;this._currentOptions=i;var x=[0,0];return g.top>l-c?(v[1]>g.top||l<v[1])&&(x[1]=-1):g.top+g.height<l+c&&(v[1]<g.top+g.height||l>v[1])&&(x[1]=1),g.left>o-c?(v[0]>g.left||o<v[0])&&(x[0]=-1):g.left+g.width<o+c&&(v[0]<g.left+g.width||o>v[0])&&(x[0]=1),!x[0]&&!x[1]?!1:this._continueDrag(Lg(Lg({},i),{direction:x,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var i=this;if(this._isWait)return!1;var o=n.prevScrollPos,l=o===void 0?this._prevScrollPos:o,a=n.direction,c=n.throttleTime,p=c===void 0?0:c,g=n.inputEvent,v=n.isDrag,x=this._getScrollPosition(a||[0,0],n),b=x[0]-l[0],P=x[1]-l[1],I=a||[b?Math.abs(b)/b:0,P?Math.abs(P)/P:0];return this._prevScrollPos=x,this._lock=!1,!b&&!P?!1:(this.emit("move",{offsetX:I[0]?b:0,offsetY:I[1]?P:0,inputEvent:g}),p&&v&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},p)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,i){var o=i.container,l=i.getScrollPosition,a=l===void 0?Kle:l;return a({container:Tb(o),direction:n})},r._continueDrag=function(n){var i=this,o,l=n.container,a=n.direction,c=n.throttleTime,p=n.useScroll,g=n.isDrag,v=n.inputEvent;if(!(!this._flag||g&&this._isWait)){var x=P0(),b=Math.max(c+this._prevTime-x,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},b),!1;this._prevTime=x;var P=this._getScrollPosition(a,n);this._prevScrollPos=P,g&&(this._isWait=!0),p||(this._lock=!0);var I={container:Tb(l),direction:a,inputEvent:v};return(o=n.requestScroll)===null||o===void 0||o.call(n,I),this.emit("scroll",I),this._isWait=!1,p||this.checkScroll(Lg(Lg({},n),{prevScrollPos:P,direction:a,inputEvent:v}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var o=i===!0?VD:i,l=Tb(n.container);i===!0&&(l===document.body||l===document.documentElement)?this._unregister=VD(window,this._onScroll):this._unregister=o(l,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t})(fI);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Qle(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],l=0,a=o.length;l<a;l++,i++)n[i]=o[l];return n}function Ou(e){return Pi(e,Gs)}function eue(e,t){return e.every(function(r,n){return Ou(r-t[n])===0})}function tue(e,t){return!Ou(e[0]-t[0])&&!Ou(e[1]-t[1])}function qj(e){return e.length<3?0:Math.abs(Ele(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function UD(e,t){var r=t.width,n=t.height,i=t.left,o=t.top,l=Hp(e),a=l.minX,c=l.minY,p=l.maxX,g=l.maxY,v=r/(p-a),x=n/(g-c);return e.map(function(b){return[i+(b[0]-a)*v,o+(b[1]-c)*x]})}function Hp(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function ET(e,t,r){var n=e[0],i=e[1],o=Hp(t),l=o.minX,a=o.maxX,c=[[l,i],[a,i]],p=X_(c[0],c[1]),g=TT(t),v=[];if(g.forEach(function(P){var I=X_(P[0],P[1]),k=P[0];if(eue(p,I))v.push({pos:e,line:P,type:"line"});else{var M=$j(hI(p,I),[c,P]);M.forEach(function(O){P.some(function(F){return tue(F,O)})?v.push({pos:O,line:P,type:"point"}):Ou(k[1]-i)!==0&&v.push({pos:O,line:P,type:"intersection"})})}}),mc(v,function(P){return P[0]===n}))return!0;var x=0,b={};return v.forEach(function(P){var I=P.pos,k=P.type,M=P.line;if(!(I[0]>n))if(k==="intersection")++x;else{if(k==="line")return;if(k==="point"){var O=mc(M,function($){return $[1]!==i}),F=b[I[0]],N=O[1]>i?1:-1;F?F!==N&&++x:b[I[0]]=N}}}),x%2===1}function X_(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],l=i-r,a=o-n;Math.abs(l)<Gs&&(l=0),Math.abs(a)<Gs&&(a=0);var c=0,p=0,g=0;return l?a?(c=-a/l,p=1,g=-c*r-n):(p=1,g=-n):a&&(c=-1,g=r),[c,p,g]}function hI(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],l=t[1],a=t[2],c=r===0&&o===0,p=n===0&&l===0,g=[];if(c&&p)return[];if(c){var v=-i/n,x=-a/l;return v!==x?[]:[[-1/0,v],[1/0,v]]}else if(p){var b=-i/r,P=-a/o;return b!==P?[]:[[b,-1/0],[b,1/0]]}else if(r===0){var I=-i/n,k=-(l*I+a)/o;g=[[k,I]]}else if(o===0){var I=-a/l,k=-(n*I+i)/r;g=[[k,I]]}else if(n===0){var k=-i/r,I=-(o*k+a)/l;g=[[k,I]]}else if(l===0){var k=-a/o,I=-(r*k+i)/n;g=[[k,I]]}else{var k=(n*a-l*i)/(l*r-n*o),I=-(r*k+i)/n;g=[[k,I]]}return g.map(function(M){return[M[0],M[1]]})}function $j(e,t){var r=t.map(function(v){return[0,1].map(function(x){return[Math.min(v[0][x],v[1][x]),Math.max(v[0][x],v[1][x])]})}),n=[];if(e.length===2){var i=e[0],o=i[0],l=i[1];if(Ou(o-e[1][0])){if(!Ou(l-e[1][1])){var p=Math.max.apply(Math,r.map(function(v){return v[0][0]})),g=Math.min.apply(Math,r.map(function(v){return v[0][1]}));if(Ou(p-g)>0)return[];n=[[p,l],[g,l]]}}else{var a=Math.max.apply(Math,r.map(function(v){return v[1][0]})),c=Math.min.apply(Math,r.map(function(v){return v[1][1]}));if(Ou(a-c)>0)return[];n=[[o,a],[o,c]]}}return n.length||(n=e.filter(function(v){var x=v[0],b=v[1];return r.every(function(P){return 0<=Ou(x-P[0][0])&&0<=Ou(P[0][1]-x)&&0<=Ou(b-P[1][0])&&0<=Ou(P[1][1]-b)})})),n.map(function(v){return[Ou(v[0]),Ou(v[1])]})}function TT(e){return Qle(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function rue(e,t){var r=e.slice(),n=t.slice();jD(r)===-1&&r.reverse(),jD(n)===-1&&n.reverse();var i=TT(r),o=TT(n),l=i.map(function(g){return X_(g[0],g[1])}),a=o.map(function(g){return X_(g[0],g[1])}),c=[];l.forEach(function(g,v){var x=i[v],b=[];a.forEach(function(P,I){var k=hI(g,P),M=$j(k,[x,o[I]]);b.push.apply(b,M.map(function(O){return{index1:v,index2:I,pos:O,type:"intersection"}}))}),b.sort(function(P,I){return Nf(x[0],P.pos)-Nf(x[0],I.pos)}),c.push.apply(c,b),ET(x[1],n)&&c.push({index1:v,index2:-1,pos:x[1],type:"inside"})}),o.forEach(function(g,v){if(ET(g[1],r)){var x=!1,b=Vf(c,function(P){var I=P.index2;return I===v?(x=!0,!1):!!x});b===-1&&(x=!1,b=Vf(c,function(P){var I=P.index1,k=P.index2;return I===-1&&k+1===v?(x=!0,!1):!!x})),b===-1?c.push({index1:-1,index2:v,pos:g[1],type:"inside"}):c.splice(b,0,{index1:-1,index2:v,pos:g[1],type:"inside"})}});var p={};return c.filter(function(g){var v=g.pos,x=v[0]+"x"+v[1];return p[x]?!1:(p[x]=!0,!0)})}function nue(e,t){var r=rue(e,t);return r.map(function(n){var i=n.pos;return i})}function iue(e,t){var r=nue(e,t);return qj(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var PT=function(e,t){return PT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},PT(e,t)};function aue(e,t){PT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Vs=function(){return Vs=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Vs.apply(this,arguments)};function oue(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function HS(e){return oue([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function sue(e){return e.touches&&e.touches.length>=2}function Pb(e){return e?e.touches?uue(e.touches):[Vj(e)]:[]}function lue(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function GD(e,t,r){var n=r.length,i=o0(e,n),o=i.clientX,l=i.clientY,a=i.originalClientX,c=i.originalClientY,p=o0(t,n),g=p.clientX,v=p.clientY,x=o0(r,n),b=x.clientX,P=x.clientY,I=o-g,k=l-v,M=o-b,O=l-P;return{clientX:a,clientY:c,deltaX:I,deltaY:k,distX:M,distY:O}}function WS(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function uue(e){for(var t=Math.min(e.length,2),r=[],n=0;n<t;++n)r.push(Vj(e[n]));return r}function Vj(e){return{clientX:e.clientX,clientY:e.clientY}}function o0(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),i=0;i<n;++i){var o=e[i];r.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,r.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,r.clientX+=o.clientX,r.clientY+=o.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var XS=(function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),HS(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),HS(t)-HS(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=GD(t||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,o=n.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,i=Math.min(this.length,r.length),o=[],l=0;l<i;++l)o[l]=GD([t[l]],[r[l]],[n[l]]);return o},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=o0(t,this.length),i=o0(this.prevClients,this.length),o=n.clientX-i.clientX,l=n.clientY-i.clientY;return Math.sqrt(o*o+l*l)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),WS(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),WS(t)/WS(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e})(),HD=["textarea","input"],cue=(function(e){aue(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(x,b){if(b===void 0&&(b=!0),!(!i.flag&&x.cancelable===!1)){var P=x.type.indexOf("drag")>=-1;if(!(i.flag&&P)){i._isDragAPI=!0;var I=i.options,k=I.container,M=I.pinchOutside,O=I.preventWheelClick,F=I.preventRightClick,N=I.preventDefault,$=I.checkInput,j=I.dragFocusedInput,U=I.preventClickEventOnDragStart,H=I.preventClickEventOnDrag,Y=I.preventClickEventByCondition,ae=i._useTouch,ee=!i.flag;if(i._isSecondaryButton=x.which===3||x.button===2,O&&(x.which===2||x.button===1)||F&&(x.which===3||x.button===2))return i.stop(),!1;if(ee){var G=i._window.document.activeElement,ie=x.target;if(ie){var oe=ie.tagName.toLowerCase(),ue=HD.indexOf(oe)>-1,de=ie.isContentEditable;if(ue||de){if($||!j&&G===ie)return!1;if(G&&(G===ie||de&&G.isContentEditable&&G.contains(ie)))if(j)ie.blur();else return!1}else if((N||x.type==="touchstart")&&G){var Me=G.tagName.toLowerCase();(G.isContentEditable||HD.indexOf(Me)>-1)&&G.blur()}(U||H||Y)&&au(i._window,"click",i._onClick,!0)}i.clientStores=[new XS(Pb(x))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=x,i.data={},i.doubleFlag=P0()-i.prevTime<200,i._isMouseEvent=lue(x),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ge=i._preventMouseEvent||i.emit("dragStart",Vs(Vs({data:i.data,datas:i.data,inputEvent:x,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){x.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ge===!1&&i.stop(),i._isMouseEvent&&i.flag&&N&&x.preventDefault()}if(!i.flag)return!1;var xe=0;if(ee?(i._attchDragEvent(),ae&&M&&(xe=setTimeout(function(){au(k,"touchstart",i.onDragStart,{passive:!1})}))):ae&&M&&Nl(k,"touchstart",i.onDragStart),i.flag&&sue(x)){if(clearTimeout(xe),ee&&x.touches.length!==x.changedTouches.length)return;i.pinchFlag||i.onPinchStart(x)}}}},i.onDrag=function(x,b){if(i.flag){var P=i.options.preventDefault;!i._isMouseEvent&&P&&x.preventDefault(),i._prevInputEvent=x;var I=Pb(x),k=i.moveClients(I,x,!1);if(i._dragFlag){if(i.pinchFlag||k.deltaX||k.deltaY){var M=i._preventMouseEvent||i.emit("drag",Vs(Vs({},k),{isScroll:!!b,inputEvent:x}));if(M===!1){i.stop();return}}i.pinchFlag&&i.onPinch(x,I)}i.getCurrentStore().getPosition(I,!0)}},i.onDragEnd=function(x){if(i.flag){var b=i.options,P=b.pinchOutside,I=b.container,k=b.preventClickEventOnDrag,M=b.preventClickEventOnDragStart,O=b.preventClickEventByCondition,F=i.isDrag;(k||M||O)&&requestAnimationFrame(function(){i._allowClickEvent()}),!O&&!M&&k&&!F&&i._allowClickEvent(),i._useTouch&&P&&Nl(I,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(x);var N=x?.touches?Pb(x):[],$=N.length;$===0||!i.options.keepDragging?i.flag=!1:i._addStore(new XS(N));var j=i._getPosition(),U=P0(),H=!F&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=F||H?0:U,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Vs({data:i.data,datas:i.data,isDouble:H,isDrag:F,isClick:!F,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:x,isTrusted:i._isTrusted},j)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Nl(i._window,"click",i._onClick,!0)},i._onClick=function(x){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(x)||(x.stopPropagation(),x.preventDefault())},i._onContextMenu=function(x){var b=i.options;b.preventRightClick?i.onDragEnd(x):x.preventDefault()},i._passCallback=function(){};var o=[].concat(r),l=o[0];i._window=Nj(l)?l:Ah(l),i.options=Vs({checkInput:!1,container:l&&!("document"in l)?Ah(l):l,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var a=i.options,c=a.container,p=a.events,g=a.checkWindowBlur;if(i._useDrag=p.indexOf("drag")>-1,i._useTouch=p.indexOf("touch")>-1,i._useMouse=p.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach(function(x){au(x,"dragstart",i.onDragStart)}),i._useMouse&&(o.forEach(function(x){au(x,"mousedown",i.onDragStart),au(x,"mousemove",i._passCallback)}),au(c,"contextmenu",i._onContextMenu)),g&&au(Ah(),"blur",i.onBlur),i._useTouch){var v={passive:!1};o.forEach(function(x){au(x,"touchstart",i.onDragStart,v),au(x,"touchmove",i._passCallback,v)})}return i}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(r,n),o&&this.onDrag(i,!0))},t.prototype.move=function(r,n){var i=r[0],o=r[1],l=this.getCurrentStore(),a=l.prevClients;return this.moveClients(a.map(function(c){var p=c.clientX,g=c.clientY;return{clientX:p+i,clientY:g+o,originalClientX:p,originalClientY:g}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var i in r)n[i]=r[i];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Vs(Vs({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,i=this.options.container;this.off(),Nl(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(o){Nl(o,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(o){Nl(o,"mousedown",r.onDragStart)}),Nl(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(o){Nl(o,"touchstart",r.onDragStart)}),Nl(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var o=new XS(Pb(r));this.pinchFlag=!0,this._addStore(o);var l=this.emit("pinchStart",Vs(Vs({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));l===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Vs(Vs({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Vs(Vs({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,i){var o=this._getPosition(r,i),l=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!l&&this.isDrag&&(a=!0),Vs(Vs({data:this.data,datas:this.data},o),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:a})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var i=this.getCurrentStore(),o=i.getPosition(r,n),l=this.clientStores.slice(1).reduce(function(p,g){var v=g.getPosition();return p.distX+=v.distX,p.distY+=v.distY,p},o),a=l.distX,c=l.distY;return Vs(Vs({},o),{distX:a,distY:c})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(au(n,"dragover",this.onDrag,i),au(r,"dragend",this.onDragEnd)),this._useMouse&&(au(n,"mousemove",this.onDrag),au(r,"mouseup",this.onDragEnd)),this._useTouch&&(au(n,"touchmove",this.onDrag,i),au(r,"touchend",this.onDragEnd,i),au(r,"touchcancel",this.onDragEnd,i))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(Nl(n,"dragover",this.onDrag),Nl(r,"dragend",this.onDragEnd)),this._useMouse&&(Nl(n,"mousemove",this.onDrag),Nl(r,"mouseup",this.onDragEnd)),this._useTouch&&(Nl(n,"touchstart",this.onDragStart),Nl(n,"touchmove",this.onDrag),Nl(r,"touchend",this.onDragEnd),Nl(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t})(fI);function due(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var fue=due;function hue(e){return fue(e).toString(36)}function pue(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function mue(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var o=i.trim();return(o?Mp(o):[""]).map(function(l){var a=l.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(e))):a?".".concat(e," ").concat(a):".".concat(e)}).join(", ")+" {"})}function gue(e,t,r,n,i){var o=oI(n),l=o.createElement("style");return l.setAttribute("type","text/css"),l.setAttribute("data-styled-id",e),l.setAttribute("data-styled-count","1"),r.nonce&&l.setAttribute("nonce",r.nonce),l.innerHTML=mue(e,t,r),(i||o.head||o.body).appendChild(l),l}function yue(e){var t="rCS"+hue(e);return{className:t,inject:function(r,n){n===void 0&&(n={});var i=pue(r),o=(i||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!o)o=gue(t,e,n,r,i);else{var l=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(l+1))}return{destroy:function(){var a,c=parseFloat(o.getAttribute("data-styled-count"))||0;c<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(c-1))}}}}}var IT=function(){return IT=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},IT.apply(this,arguments)};function vue(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Uj(e,t){var r=yue(t),n=r.className;return Q.forwardRef(function(i,o){var l=i.className,a=l===void 0?"":l;i.cspNonce;var c=vue(i,["className","cspNonce"]),p=Q.useRef();return Q.useImperativeHandle(o,function(){return p.current},[]),Q.useEffect(function(){var g=r.inject(p.current,{nonce:i.cspNonce});return function(){g.destroy()}},[]),Q.createElement(e,IT({ref:p,"data-styled-id":n,className:"".concat(a," ").concat(n)},c))})}var kT=function(e,t){return kT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},kT(e,t)};function h1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ft=function(){return Ft=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ft.apply(this,arguments)};function bue(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function _ue(e,t,r,n){var i=arguments.length,o=i<3?t:n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(o=(i<3?l(o):i>3?l(t,r,o):l(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function xue(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ut(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],l;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){l={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return o}function un(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function p1(e,t){return Ft({events:[],props:[],name:e},t)}var wue=["n","w","s","e"],pI=["n","w","s","e","nw","ne","sw","se"];function Sue(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function Cue(e){var t=Sue(1,e),r=Math.round(e/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var Cy=cle(),Gj=Cy.browser.webkit,Hj=Gj&&(function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1})(),Wj=Cy.browser.name,Xj=parseInt(Cy.browser.version,10),Eue=Wj==="chrome",Tue=Cy.browser.chromium,Pue=parseInt(Cy.browser.chromiumVersion,10)||0,Iue=Eue&&Xj>=109||Tue&&Pue>=109,kue=Wj==="firefox",Aue=parseInt(Cy.browser.webkitVersion,10)>=612||Xj>=15,mI="moveable-",Mue=pI.map(function(e){var t="",r="",n="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(o,";"),i="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",i="top"),e.indexOf("w")>-1&&(r="left: ".concat(o,";"),n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),Lue=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Mue,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(Cue(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Hj?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Rue=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],AT=1e-4,Iu=1e-7,Ib=1e-9,MT=Math.pow(10,10),WD=-MT,Due={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},gI={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Yj={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Nue=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function m1(e,t,r,n,i,o){var l,a;o===void 0&&(o="draggable");var c=(a=(l=t.gestos[o])===null||l===void 0?void 0:l.move(r,e.inputEvent))!==null&&a!==void 0?a:{},p=c.originalDatas||c.datas,g=p[o]||(p[o]={});return Ft(Ft({},c),{isPinch:!!n,parentEvent:!0,datas:g,originalDatas:e.originalDatas})}var oy=(function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),Ft(Ft({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var n,i,o=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0;else{var l=this.isDrag;n=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!l&&this.isDrag&&(o=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:r,isFirstDrag:o,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e})();function Hg(e,t,r,n){var i=e.length===16,o=i?4:3,l=lm(e,r,n,o),a=Ut(l,4),c=Ut(a[0],2),p=c[0],g=c[1],v=Ut(a[1],2),x=v[0],b=v[1],P=Ut(a[2],2),I=P[0],k=P[1],M=Ut(a[3],2),O=M[0],F=M[1],N=Ut(Xo(e,t,o),2),$=N[0],j=N[1],U=Math.min(p,x,I,O),H=Math.min(g,b,k,F),Y=Math.max(p,x,I,O),ae=Math.max(g,b,k,F);p=p-U||0,x=x-U||0,I=I-U||0,O=O-U||0,g=g-H||0,b=b-H||0,k=k-H||0,F=F-H||0,$=$-U||0,j=j-H||0;var ee=e[0],G=e[o+1],ie=Eu(ee*G);return{left:U,top:H,right:Y,bottom:ae,origin:[$,j],pos1:[p,g],pos2:[x,b],pos3:[I,k],pos4:[O,F],direction:ie}}function Zj(e,t){var r=t.clientX,n=t.clientY,i=t.datas,o=e.state,l=o.moveableClientRect,a=o.rootMatrix,c=o.is3d,p=o.pos1,g=l.left,v=l.top,x=c?4:3,b=Ut(ci(uy(a,[r-g,n-v],x),p),2),P=b[0],I=b[1],k=Ut(of({datas:i,distX:P,distY:I}),2),M=k[0],O=k[1];return[M,O]}function sm(e,t){var r=t.datas,n=e.state,i=n.allMatrix,o=n.beforeMatrix,l=n.is3d,a=n.left,c=n.top,p=n.origin,g=n.offsetMatrix,v=n.targetMatrix,x=n.transformOrigin,b=l?4:3;r.is3d=l,r.matrix=i,r.targetMatrix=v,r.beforeMatrix=o,r.offsetMatrix=g,r.transformOrigin=x,r.inverseMatrix=Qd(i,b),r.inverseBeforeMatrix=Qd(o,b),r.absoluteOrigin=Up(ma([a,c],p),b),r.startDragBeforeDist=cu(r.inverseBeforeMatrix,r.absoluteOrigin,b),r.startDragDist=cu(r.inverseMatrix,r.absoluteOrigin,b)}function Oue(e){return Hg(e.datas.beforeTransform,[50,50],100,100).direction}function P2(e,t,r){var n=t.datas,i=t.originalDatas.beforeRenderable,o=n.transformIndex,l=i.nextTransforms,a=l.length,c=i.nextTransformAppendedIndexes,p=-1;o===-1?(r==="translate"?p=0:r==="rotate"&&(p=Vf(l,function(b){return b.match(/scale\(/g)})),p===-1&&(p=l.length),n.transformIndex=p):mc(c,function(b){return b.index===o&&b.functionName===r})?p=o:p=o+c.filter(function(b){return b.index<o}).length;var g=lde(l,e.state,p),v=g.targetFunction,x=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=g.beforeFunctionTexts,n.afterFunctionTexts=g.afterFunctionTexts,n.beforeTransform=g.beforeFunctionMatrix,n.beforeTransform2=g.beforeFunctionMatrix2,n.targetTansform=g.targetFunctionMatrix,n.afterTransform=g.afterFunctionMatrix,n.afterTransform2=g.afterFunctionMatrix2,n.targetAllTransform=g.allFunctionMatrix,v.functionName===x?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):a>p&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=un(un([],Ut(c),!1),[{functionName:r,index:p,isAppend:!0}],!1))}function I2(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function Fue(e){var t=e.datas,r=e.distX,n=e.distY,i=Ut(Jj({datas:t,distX:r,distY:n}),2),o=i[0],l=i[1],a=Kj(t,Rle([o,l],4));return cu(a,Up([0,0,0],4),4)}function Kj(e,t,r){var n=e.beforeTransform,i=e.afterTransform,o=e.beforeTransform2,l=e.afterTransform2,a=e.targetAllTransform,c=r?eo(a,t,4):eo(t,a,4),p=eo(Qd(r?o:n,4),c,4),g=eo(p,Qd(r?l:i,4),4);return g}function Jj(e){var t=e.datas,r=e.distX,n=e.distY,i=t.inverseBeforeMatrix,o=t.is3d,l=t.startDragBeforeDist,a=t.absoluteOrigin,c=o?4:3;return ci(cu(i,ma(a,[r,n]),c),l)}function of(e,t){var r=e.datas,n=e.distX,i=e.distY,o=r.inverseBeforeMatrix,l=r.inverseMatrix,a=r.is3d,c=r.startDragBeforeDist,p=r.startDragDist,g=r.absoluteOrigin,v=a?4:3;return ci(cu(t?o:l,ma(g,[n,i]),v),t?c:p)}function Bue(e,t){var r=e.datas,n=e.distX,i=e.distY;r.beforeMatrix;var o=r.matrix,l=r.is3d;r.startDragBeforeDist;var a=r.startDragDist,c=r.absoluteOrigin,p=l?4:3;return ci(cu(o,ma(a,[n,i]),p),c)}function zue(e,t,r,n,i,o){return n===void 0&&(n=t),i===void 0&&(i=r),o===void 0&&(o=[0,0]),e?e.map(function(l,a){var c=c1(l),p=c.value,g=c.unit,v=a?i:n,x=a?r:t;if(l==="%"||isNaN(p)){var b=v?o[a]/v:0;return x*b}else if(g!=="%")return p;return x*p/100}):o}function Qj(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function jue(e,t){return Qj(t).map(function(r){return e[r]})}function YS(e,t){var r=(t+1)/2;return[H_(e[0][0],e[1][0],r,1-r),H_(e[0][1],e[1][1],r,1-r)]}function ol(e,t){var r=YS([e[0],e[1]],t[0]),n=YS([e[2],e[3]],t[0]);return YS([r,n],t[1])}function que(e,t,r,n,i,o){var l=lm(t,r,n,i),a=ol(l,o),c=e[0]-a[0],p=e[1]-a[1];return[c,p]}function g1(e,t,r,n){return eo(e,l0(t,n,r),n)}function $ue(e,t,r,n){var i=e.transformOrigin,o=e.offsetMatrix,l=e.is3d,a=l?4:3,c;if(Yf(r)){var p=t.beforeTransform,g=t.afterTransform;n?c=hd(I0(r),4,a):c=hd(eo(eo(p,I0([r]),4),g,4),4,a)}else c=r;return g1(o,c,i,a)}function Vue(e,t){var r=e.transformOrigin,n=e.offsetMatrix,i=e.is3d,o=e.targetMatrix,l=e.targetAllTransform,a=i?4:3;return g1(n,eo(l||o,uI(t,a),a),r,a)}function k2(e,t){var r=Ey(t);return{setTransform:function(n,i){i===void 0&&(i=-1),r.startTransforms=Cl(n)?n:Nh(n),LT(e,t,i)},setTransformIndex:function(n){LT(e,t,n)}}}function A2(e,t,r){var n=Ey(t),i=n.startTransforms;LT(e,t,Vf(i,function(o){return o.indexOf("".concat(r,"("))===0}))}function LT(e,t,r){var n=Ey(t),i=t.datas;if(i.transformIndex=r,r!==-1){var o=n.startTransforms[r];if(o){var l=e.state,a=ay([o],{"x%":function(c){return c/100*l.offsetWidth},"y%":function(c){return c/100*l.offsetHeight}});i.startValue=a[0].functionValue}}}function yI(e,t){var r=Ey(e);r.nextTransforms=Nh(t)}function Ey(e){return e.originalDatas.beforeRenderable}function Y_(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function kb(e){return(Y_(e)||[]).join(" ")}function Ab(e){return Ey(e).nextStyle}function eq(e,t,r,n,i){yI(i,t);var o=Cu.drag(e,m1(i,e.state,r,n)),l=o?o.transform:t;return Ft(Ft({transform:t,drag:o},Tu({transform:l},i)),{afterTransform:l})}function vI(e,t,r,n,i,o){var l=$ue(e.state,i,t,o),a=Hue(e,r,n,l);return a}function tq(e,t,r,n,i,o,l){var a=vI(e,t,r,i,o,l),c=e.state,p=c.left,g=c.top,v=e.props.groupable,x=v?p:0,b=v?g:0,P=ci(n,a);return ci(P,[x,b])}function Uue(e,t,r,n,i,o,l){var a=tq(e,t,r,n,i,o,l);return a}function Gue(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function Hue(e,t,r,n){n===void 0&&(n=e.state.allMatrix);var i=e.state,o=i.width,l=i.height,a=i.is3d,c=a?4:3,p=[o/2*(1+t[0])+r[0],l/2*(1+t[1])+r[1]];return Xo(n,p,c)}function Wue(e,t,r){var n=r.fixedDirection,i=r.fixedPosition,o=r.fixedOffset;return tq(e,"rotate(".concat(t,"deg)"),n,i,o,r)}function Xue(e,t,r,n,i,o){var l=e.props.groupable,a=e.state,c=a.transformOrigin,p=a.offsetMatrix,g=a.is3d,v=a.width,x=a.height,b=a.left,P=a.top,I=o.fixedDirection,k=o.nextTargetMatrix||a.targetMatrix,M=g?4:3,O=zue(i,t,r,v,x,c),F=l?b:0,N=l?P:0,$=g1(p,k,O,M),j=que(n,$,t,r,M,I);return ci(j,[F,N])}function Yue(e,t){return ol($c(e.state),t)}function Zue(e,t){var r=e.targetGesto,n=e.controlGesto,i;return r?.isFlag()&&(i=r.getEventData()[t]),!i&&n?.isFlag()&&(i=n.getEventData()[t]),i||{}}function Kue(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function Jue(e){var t=e("scale"),r=e("rotate"),n=e("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&i.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&i.push("scale(".concat(t.split(/\s+/).join(","),")")),i}function rq(e,t,r){for(var n=e,i=[],o=sI(e)||Hh(e),l=!r&&e===t||e===o,a=l,c=!1,p=3,g,v,x,b=!1,P=A0(t,t,!0).offsetParent,I=1;n&&!a;){a=l;var k=Vu(n),M=k("position"),O=Tq(n),F=M==="fixed",N=Jue(k),$=Dle(Yce(O)),j=void 0,U=!1,H=!1,Y=0,ae=0,ee=0,G=0,ie={hasTransform:!1,fixedContainer:null};F&&(b=!0,ie=ede(n),P=ie.fixedContainer);var oe=$.length;!c&&(oe===16||N.length)&&(c=!0,p=4,BT(i),x&&(x=hd(x,3,4))),c&&oe===9&&($=hd($,3,4));var ue=Qce(n,e),de=ue.tagName,Me=ue.hasOffset,ge=ue.isSVG,xe=ue.origin,Ee=ue.targetOrigin,Ae=ue.offset,fe=Ut(Ae,2),Se=fe[0],we=fe[1];de==="svg"&&!n.ownerSVGElement&&x&&(i.push({type:"target",target:n,matrix:tde(n,p)}),i.push({type:"offset",target:n,matrix:So(p)}));var De=parseFloat(k("zoom"))||1;if(F)j=ie.fixedContainer,U=!0;else{var Re=A0(n,t,!1,!0,k),$e=Re.offsetZoom;if(j=Re.offsetParent,U=Re.isEnd,H=Re.isStatic,I*=$e,(Re.isCustomElement||$e!==1)&&H)Se-=j.offsetLeft,we-=j.offsetTop;else if(kue||Iue){var Oe=Re.parentSlotElement;if(Oe){for(var it=j,Ye=0,rt=0;it&&Kue(it);)Ye+=it.offsetLeft,rt+=it.offsetTop,it=it.offsetParent;Se-=Ye,we-=rt}}}if(Gj&&!Aue&&Me&&!ge&&H&&(M==="relative"||M==="static")&&(Se-=j.offsetLeft,we-=j.offsetTop,l=l||U),F)Me&&ie.hasTransform&&(ee=j.clientLeft,G=j.clientTop);else if(Me&&P!==j&&(Y=j.clientLeft,ae=j.clientTop),Me&&j===o){var Ie=Pq(n,!1);Se+=Ie[0],we+=Ie[1]}if(i.push({type:"target",target:n,matrix:l0($,p,xe)}),N.length&&(i.push({type:"offset",target:n,matrix:So(p)}),i.push({type:"target",target:n,matrix:l0(I0(N),p,xe)})),Me){var It=n===e,at=It?0:n.scrollLeft,je=It?0:n.scrollTop;i.push({type:"offset",target:n,matrix:Gp([Se-at+Y-ee,we-je+ae-G],p)})}else i.push({type:"offset",target:n,origin:xe});if(De!==1&&i.push({type:"zoom",target:n,matrix:l0(uI([De,De],p),p,[0,0])}),x||(x=$),g||(g=xe),v||(v=Ee),a||F)break;n=j,l=U,(!r||n===o)&&(a=l)}return x||(x=So(p)),g||(g=[0,0]),v||(v=[0,0]),{zoom:I,offsetContainer:P,matrixes:i,targetMatrix:x,transformOrigin:g,targetOrigin:v,is3d:c,hasFixed:b}}var Ep=null,Tp=null,Rg=null;function sy(e){e?(window.Map&&(Ep=new Map,Tp=new Map),Rg=[]):(Ep=null,Rg=null,Tp=null)}function Que(e){var t=Tp?.get(e);if(t)return t;var r=u0(e,!0);return Tp&&Tp.set(e,r),r}function ece(e,t){if(Rg){var r=mc(Rg,function(i){return i[0][0]==e&&i[0][1]==t});if(r)return r[1]}var n=rq(e,t,!0);return Rg&&Rg.push([[e,t],n]),n}function Vu(e){var t=Ep?.get(e);if(!t){var r=Ah(e).getComputedStyle(e);if(!Ep)return function(o){return r[o]};t={style:r,cached:{}},Ep.set(e,t)}var n=t.cached,i=t.style;return function(o){return o in n||(n[o]=i[o]),n[o]}}function ud(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return e.moveables.map(function(l,a){return o[a]=o[a]||{},o[a][t]=o[a][t]||{},Ft(Ft({},r),{isRequestChild:!0,datas:o[a][t],originalDatas:o[a]})})}function ZS(e,t,r,n,i,o,l){var a=!!r.match(/Start$/g),c=!!r.match(/End$/g),p=i.isPinch,g=i.datas,v=ud(e,t.name,i),x=e.moveables,b=[],P=v.map(function(I,k){var M=x[k],O=M.state,F=O.gestos,N=I;if(a)N=new oy(l).dragStart(n,I),b.push(N);else{if(F[l]||(F[l]=g.childGestos[k]),!F[l])return;N=m1(I,O,n,p,o,l),b.push(N)}var $=t[r](M,Ft(Ft({},N),{parentFlag:!0}));return c&&(F[l]=null),$});return a&&(g.childGestos=x.map(function(I){return I.state.gestos[l]})),{eventParams:P,childEvents:b}}function Of(e,t,r,n,i,o){i===void 0&&(i=function(g,v){return v});var l=!!r.match(/End$/g),a=ud(e,t.name,n),c=e.moveables,p=a.map(function(g,v){var x=c[v],b=g;b=i(x,g);var P=t[r](x,Ft(Ft({},b),{parentFlag:!0}));return l&&(x.state.gestos={}),P});return p}function Z_(e,t,r,n){var i=r.fixedDirection,o=r.fixedPosition,l=n.datas.startPositions||$c(t.state),a=ol(l,i),c=Ut(cu(f1(-e.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),p=c[0],g=c[1];return n.datas.originalX=p,n.datas.originalY=g,n}function nq(e,t,r,n){var i=e.getState(),o=i.renderPoses,l=i.rotation,a=i.direction,c=Wp(e.props,t).zoom,p=s0(l/Math.PI*180),g={},v=e.renderState;v.renderDirectionMap||(v.renderDirectionMap={});var x=v.renderDirectionMap;r.forEach(function(P){var I=P.dir;g[I]=!0});var b=Eu(a);return r.map(function(P){var I=P.data,k=P.classNames,M=P.dir,O=gI[M];if(!O||!g[M])return null;x[M]=!0;var F=(Pi(p,15)+b*Yj[M]+720)%180,N={};return Sy(I).forEach(function($){N["data-".concat($)]=I[$]}),n.createElement("div",Ft({className:li.apply(void 0,un(["control","direction",M,t],Ut(k),!1)),"data-rotation":F,"data-direction":M},N,{key:"direction-".concat(M),style:ex.apply(void 0,un([l,c],Ut(O.map(function($){return o[$]})),!1))}))})}function iq(e,t,r,n){var i=Wp(e.props,r),o=i.renderDirections,l=o===void 0?t:o,a=i.displayAroundControls;if(!l)return[];var c=l===!0?pI:l;return un(un([],Ut(a?lq(e,n,r,c):[]),!1),Ut(nq(e,r,c.map(function(p){return{data:{},classNames:[],dir:p}}),n)),!1)}function k0(e,t,r,n,i,o){for(var l=[],a=6;a<arguments.length;a++)l[a-6]=arguments[a];var c=Is(r,n),p=t?Pi(c/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(o),className:li.apply(void 0,un(["line","direction",t?"edge":"",t],Ut(l),!1)),"data-rotation":p,"data-line-key":o,"data-direction":t,style:Fv(r,n,i,c)})}function aq(e,t,r,n,i){var o=r===!0?wue:r;return o.map(function(l,a){var c=Ut(gI[l],2),p=c[0],g=c[1];if(g!=null)return k0(e,l,n[p],n[g],i,"".concat(t,"Edge").concat(a),t)}).filter(Boolean)}function oq(e){return function(t,r){var n=Wp(t.props,e).edge;return n&&(n===!0||n.length)?un(un([],Ut(aq(r,e,n,t.getState().renderPoses,t.props.zoom)),!1),Ut(tce(t,e,r)),!1):sq(t,e,r)}}function sq(e,t,r){return iq(e,pI,t,r)}function tce(e,t,r){return iq(e,["nw","ne","sw","se"],t,r)}function lq(e,t,r,n){var i=e.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=e.getState(),l=o.renderPoses,a=o.rotation,c=o.direction,p=i.renderDirectionMap,g=e.props.zoom,v=Eu(c),x=a/Math.PI*180;return(n||Sy(p)).map(function(b){var P=gI[b];if(!P)return null;var I=(Pi(x,15)+v*Yj[b]+720)%180,k=["around-control"];return r&&k.push("direction",r),t.createElement("div",{className:li.apply(void 0,un([],Ut(k),!1)),"data-rotation":I,"data-direction":b,key:"direction-around-".concat(b),style:ex.apply(void 0,un([a,g],Ut(P.map(function(M){return l[M]})),!1))})})}function bI(e,t,r){var n=e||{},i=n.position,o=i===void 0?"client":i,l=n.left,a=l===void 0?-1/0:l,c=n.top,p=c===void 0?-1/0:c,g=n.right,v=g===void 0?1/0:g,x=n.bottom,b=x===void 0?1/0:x,P={position:o,left:a,top:p,right:v,bottom:b};return{vertical:XD(P,t,!0),horizontal:XD(P,r,!1)}}function M2(e,t){var r=e.state,n=r.containerClientRect,i=n.clientHeight,o=n.clientWidth,l=n.clientLeft,a=n.clientTop,c=r.snapOffset,p=c.left,g=c.top,v=c.right,x=c.bottom,b=t||e.props.bounds||{},P=b.position||"client",I=P==="css",k=b.left,M=k===void 0?-1/0:k,O=b.top,F=O===void 0?-1/0:O,N=b.right,$=N===void 0?I?-1/0:1/0:N,j=b.bottom,U=j===void 0?I?-1/0:1/0:j;return I&&($=o+v-p-$,U=i+x-g-U),{left:M+p-l,right:$+p-l,top:F+g-a,bottom:U+g-a}}function rce(e,t,r){var n=M2(e),i=n.left,o=n.top,l=n.right,a=n.bottom,c=Ut(r,2),p=c[0],g=c[1],v=Ut(ci(r,t),2),x=v[0],b=v[1];Hr(x)<Iu&&(x=0),Hr(b)<Iu&&(b=0);var P=b>0,I=x>0,k={isBound:!1,offset:0,pos:0},M={isBound:!1,offset:0,pos:0};if(x===0&&b===0)return{vertical:k,horizontal:M};if(x===0)P?a<g&&(M.pos=a,M.offset=g-a):o>g&&(M.pos=o,M.offset=g-o);else if(b===0)I?l<p&&(k.pos=l,k.offset=p-l):i>p&&(k.pos=i,k.offset=p-i);else{var O=b/x,F=r[1]-O*p,N=0,$=0,j=!1;I&&l<=p?(N=O*l+F,$=l,j=!0):!I&&p<=i&&(N=O*i+F,$=i,j=!0),j&&(N<o||N>a)&&(j=!1),j||(P&&a<=g?(N=a,$=(N-F)/O,j=!0):!P&&g<=o&&(N=o,$=(N-F)/O,j=!0)),j&&(k.isBound=!0,k.pos=$,k.offset=p-$,M.isBound=!0,M.pos=N,M.offset=g-N)}return{vertical:k,horizontal:M}}function XD(e,t,r){var n=e[r?"left":"top"],i=e[r?"right":"bottom"],o=Math.min.apply(Math,un([],Ut(t),!1)),l=Math.max.apply(Math,un([],Ut(t),!1)),a=[];return n+1>o&&a.push({direction:"start",isBound:!0,offset:o-n,pos:n}),i-1<l&&a.push({direction:"end",isBound:!0,offset:l-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(c,p){return Hr(p.offset)-Hr(c.offset)})}function YD(e,t,r){var n=r?e.map(function(i){return d1(i,r)}):e;return n.some(function(i){return i[0]<t.left&&Hr(i[0]-t.left)>.1||i[0]>t.right&&Hr(i[0]-t.right)>.1||i[1]<t.top&&Hr(i[1]-t.top)>.1||i[1]>t.bottom&&Hr(i[1]-t.bottom)>.1})}function nce(e,t,r){var n=qc(e),i=Math.sqrt(n*n-t*t)||0;return[i,-i].sort(function(o,l){return Hr(o-e[r?0:1])-Hr(l-e[r?0:1])}).map(function(o){return Is([0,0],r?[o,t]:[t,o])})}function ice(e,t,r,n,i){if(!e.props.bounds)return[];var o=i*Math.PI/180,l=M2(e),a=l.left,c=l.top,p=l.right,g=l.bottom,v=a-n[0],x=p-n[0],b=c-n[1],P=g-n[1],I={left:v,top:b,right:x,bottom:P};if(!YD(r,I,0))return[];var k=[];return[[v,0],[x,0],[b,1],[P,1]].forEach(function(M){var O=Ut(M,2),F=O[0],N=O[1];r.forEach(function($){var j=Is([0,0],$);k.push.apply(k,un([],Ut(nce($,F,N).map(function(U){return o+U-j}).filter(function(U){return!YD(t,I,U)}).map(function(U){return Pi(U*180/Math.PI,Iu)})),!1))})}),k}var ace=["left","right","center"],oce=["top","bottom","middle"],ZD={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Oh={start:"left",end:"right",center:"center"},Fh={start:"top",end:"bottom",center:"middle"};function Dg(){return{left:!1,top:!1,right:!1,bottom:!1}}function Ty(e,t){var r=e.props,n=r.snappable,i=r.bounds,o=r.innerBounds,l=r.verticalGuidelines,a=r.horizontalGuidelines,c=r.snapGridWidth,p=r.snapGridHeight,g=e.state,v=g.guidelines,x=g.enableSnap;return!n||!x||t&&n!==!0&&n.indexOf(t)<0?!1:!!(c||p||i||o||v&&v.length||l&&l.length||a&&a.length)}function _I(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function sce(e,t){var r=_I(e),n={};for(var i in r)i in t&&r[i]&&(n[i]=t[i]);return n}function xI(e,t){var r=sce(e,t),n=oce.filter(function(o){return o in r}),i=ace.filter(function(o){return o in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(o){return r[o]}),vertical:i.map(function(o){return r[o]})}}function lce(e,t,r){var n=Xo(e,[t.clientLeft,t.clientTop],r);return[t.left+n[0],t.top+n[1]]}function uce(e){var t=Ut(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];Math.abs(i)<Gs&&(i=0),Math.abs(o)<Gs&&(o=0);var l=0,a=0,c=0;return i?o?(l=-o/i,a=1,c=l*r[0]-r[1]):(a=1,c=-r[1]):(l=-1,c=r[0]),[l,a,c].map(function(p){return Pi(p,Gs)})}var uq="snapRotationThreshold",cq="snapRotationDegrees",dq="snapHorizontalThreshold",fq="snapVerticalThreshold";function L2(e,t,r,n,i,o,l){var a;n===void 0&&(n=[]),i===void 0&&(i=[]);var c=e.props,p=((a=e.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],g=dN(l,c[dq],5),v=dN(o,c[fq],5);return hq(e.state.guidelines,t,r,n,i,g,v,p)}function hq(e,t,r,n,i,o,l,a){return{vertical:JD(e,"vertical",t,l*a[0],n),horizontal:JD(e,"horizontal",r,o*a[1],i)}}function cce(e,t,r){var n=Ut(r,2),i=n[0],o=n[1],l=Ut(t,2),a=l[0],c=l[1],p=Ut(ci(r,t),2),g=p[0],v=p[1],x=v>0,b=g>0;g=tx(g),v=tx(v);var P={isSnap:!1,offset:0,pos:0},I={isSnap:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:P,horizontal:I};var k=L2(e,g?[i]:[],v?[o]:[],[],[],void 0,void 0),M=k.vertical,O=k.horizontal;M.posInfos.filter(function(de){var Me=de.pos;return b?Me>=a:Me<=a}),O.posInfos.filter(function(de){var Me=de.pos;return x?Me>=c:Me<=c}),M.isSnap=M.posInfos.length>0,O.isSnap=O.posInfos.length>0;var F=RT(M),N=F.isSnap,$=F.guideline,j=RT(O),U=j.isSnap,H=j.guideline,Y=U?H.pos[1]:0,ae=N?$.pos[0]:0;if(g===0)U&&(I.isSnap=!0,I.pos=H.pos[1],I.offset=o-I.pos);else if(v===0)N&&(P.isSnap=!0,P.pos=ae,P.offset=i-ae);else{var ee=v/g,G=r[1]-ee*i,ie=0,oe=0,ue=!1;N?(oe=ae,ie=ee*oe+G,ue=!0):U&&(ie=Y,oe=(ie-G)/ee,ue=!0),ue&&(P.isSnap=!0,P.pos=oe,P.offset=i-oe,I.isSnap=!0,I.pos=ie,I.offset=o-ie)}return{vertical:P,horizontal:I}}function Eh(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function KD(e,t,r,n){var i=xI(e.props.snapDirections,t),o=L2(e,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Eh(c)}),i.horizontalNames.map(function(c){return Eh(c)}),r,n),l=Eh(i.horizontalNames[o.horizontal.index]),a=Eh(i.verticalNames[o.vertical.index]);return{vertical:Ft(Ft({},o.vertical),{direction:a}),horizontal:Ft(Ft({},o.horizontal),{direction:l})}}function RT(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,l=n.guideline;return{isSnap:t,offset:i,dist:o,pos:r.pos,guideline:l}}function JD(e,t,r,n,i){var o,l;if(i===void 0&&(i=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=t==="vertical",c=a?0:1,p=r.map(function(v,x){var b=i[x]||"",P=e.map(function(I){var k=I.pos,M=v-k[c];return{offset:M,dist:Hr(M),guideline:I,direction:b}}).filter(function(I){var k=I.guideline,M=I.dist,O=k.type;return!(O!==t||M>n)}).sort(function(I,k){return I.dist-k.dist});return{pos:v,index:x,guidelineInfos:P,direction:b}}).filter(function(v){return v.guidelineInfos.length>0}).sort(function(v,x){return v.guidelineInfos[0].dist-x.guidelineInfos[0].dist}),g=p.length>0;return{isSnap:g,index:g?p[0].index:-1,direction:(l=(o=p[0])===null||o===void 0?void 0:o.direction)!==null&&l!==void 0?l:"",posInfos:p}}function dce(e,t,r,n,i){var o=[];r[0]&&r[1]?o=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(x,b,P){var I=P[b+1]||P[0];o.push(x),o.push([(x[0]+I[0])/2,(x[1]+I[1])/2])}):e.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],r):(o.push.apply(o,un([],Ut(jue([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var l=o.map(function(x){return ol(t,x)}),a=l.map(function(x){return x[0]}),c=l.map(function(x){return x[1]}),p=L2(e,a,c,o.map(function(x){return Eh(x[0])}),o.map(function(x){return Eh(x[1])}),n,i),g=Eh(o.map(function(x){return x[0]})[p.vertical.index]),v=Eh(o.map(function(x){return x[1]})[p.horizontal.index]);return{vertical:Ft(Ft({},p.vertical),{direction:g}),horizontal:Ft(Ft({},p.horizontal),{direction:v})}}function pq(e,t){var r=Hr(e.offset),n=Hr(t.offset);return e.isBound&&t.isBound?n-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?n-r:e.isSnap?-1:t.isSnap||r<Iu?1:n<Iu?-1:r-n}function K_(e,t){return e.slice().sort(function(r,n){var i=r.sign[t],o=n.sign[t],l=r.offset[t],a=n.offset[t];if(i){if(!o)return-1}else return 1;return pq({isBound:r.isBound,isSnap:r.isSnap,offset:l},{isBound:n.isBound,isSnap:n.isSnap,offset:a})})[0]}function fce(e,t,r){var n=[];if(r)Hr(t[0])!==1||Hr(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),n.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var i=e[0]?e:[1,1];[1,-1].forEach(function(l){[1,-1].forEach(function(a){var c=[l*i[0],a*i[1]];t[0]===c[0]&&t[1]===c[1]||n.push([t,c])})})}else if(e[0]){var o=Hr(t[0])===1?[1]:[1,-1];o.forEach(function(l){n.push([[t[0],-1],[l*e[0],-1]],[[t[0],0],[l*e[0],0]],[[t[0],1],[l*e[0],1]])})}else if(e[1]){var o=Hr(t[1])===1?[1]:[1,-1];o.forEach(function(a){n.push([[-1,t[1]],[-1,a*e[1]]],[[0,t[1]],[0,a*e[1]]],[[1,t[1]],[1,a*e[1]]])})}return n}function mq(e,t){var r=xT([t[0][0],t[1][0]]),n=xT([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:n<=e[1]}}function wI(e,t){var r=Ut(t,2),n=r[0],i=r[1],o=i[0]-n[0],l=i[1]-n[1];Hr(o)<Iu&&(o=0),Hr(l)<Iu&&(l=0);var a,c;if(!o)a=n[0],c=e[0];else if(!l)a=n[1],c=e[1];else{var p=l/o;a=p*(e[0]-n[0])+n[1],c=e[1]}return a-c}function gq(e,t,r,n){return n===void 0&&(n=Iu),e.every(function(i){var o=wI(i,t),l=o<=0;return l===r||Hr(o)<=n})}function QD(e,t,r,n,i){return i===void 0&&(i=0),n&&t-i<=e||!n&&e<=r+i?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function hce(e,t){var r=t.line,n=t.centerSign,i=t.verticalSign,o=t.horizontalSign,l=t.lineConstants,a=e.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=a.left,p=a.top,g=a.width,v=a.height,x=[[c,p],[c,p+v]],b=[[c,p],[c+g,p]],P=[[c+g,p],[c+g,p+v]],I=[[c,p+v],[c+g,p+v]];if(gq([[c,p],[c+g,p],[c,p+v],[c+g,p+v]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var k=Th(r,l,b,i),M=Th(r,l,I,i),O=Th(r,l,x,o),F=Th(r,l,P,o),N=k.isBound&&M.isBound,$=k.isBound||M.isBound,j=O.isBound&&F.isBound,U=O.isBound||F.isBound,H=ly(k.offset,M.offset),Y=ly(O.offset,F.offset),ae=[0,0],ee=!1,G=!1;return Hr(Y)<Hr(H)?(ae=[H,0],ee=$,G=N):(ae=[0,Y],ee=U,G=j),{isAllBound:G,isVerticalBound:$,isHorizontalBound:U,isBound:ee,offset:ae}}function Th(e,t,r,n,i,o){var l=Ut(t,2),a=l[0],c=l[1],p=e[0],g=r[0],v=r[1],x=tx(v[1]-g[1]),b=tx(v[0]-g[0]),P=c,I=a,k=-a/c;if(b){if(!x){if(o&&!P)return{isBound:!1,offset:0};if(I){var N=(g[1]-p[1])/k+p[0];return QD(N,g[0],v[0],n,i)}else{var O=g[1]-p[1],F=Hr(O)<=(i||0);return{isBound:F,offset:F?O:0}}}}else{if(o&&!I)return{isBound:!1,offset:0};if(P){var M=k*(g[0]-p[0])+p[1];return QD(M,g[1],v[1],n,i)}else{var O=g[0]-p[0],F=Hr(O)<=(i||0);return{isBound:F,offset:F?O:0}}}return{isBound:!1,offset:0}}function yq(e,t,r){return t.map(function(n){var i=hce(e,n),o=i.isBound,l=i.offset,a=i.isVerticalBound,c=i.isHorizontalBound,p=n.multiple,g=of({datas:r,distX:l[0],distY:l[1]}).map(function(v,x){return v*(p[x]?2/p[x]:0)});return{sign:p,isBound:o,isVerticalBound:a,isHorizontalBound:c,isSnap:!1,offset:g}})}function pce(e,t,r){var n,i=SI(e,t,[0,0],!1).map(function(x){return Ft(Ft({},x),{multiple:x.multiple.map(function(b){return Hr(b)*2})})}),o=yq(e,i,r),l=K_(o,0),a=K_(o,1),c=0,p=0,g=l.isVerticalBound||a.isVerticalBound,v=l.isHorizontalBound||a.isHorizontalBound;return(g||v)&&(n=Ut(Bue({datas:r,distX:-l.offset[0],distY:-a.offset[1]}),2),c=n[0],p=n[1]),{vertical:{isBound:g,offset:c},horizontal:{isBound:v,offset:p}}}function mce(e,t){var r=[],n=e[0],i=e[1];return n&&i?r.push([[0,i*2],e,[-n,i]],[[n*2,0],e,[n,-i]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),t&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,i*2],[1,i],[-1,i]]),t&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function SI(e,t,r,n){var i=e.state,o=i.allMatrix,l=i.is3d,a=lm(o,100,100,l?4:3),c=ol(a,[0,0]);return mce(r,n).map(function(p){var g=Ut(p,3),v=g[0],x=g[1],b=g[2],P=[ol(a,x),ol(a,b)],I=uce(P),k=mq(c,P),M=k.vertical,O=k.horizontal,F=wI(c,P)<=0;return{multiple:v,centerSign:F,verticalSign:M,horizontalSign:O,lineConstants:I,line:[ol(t,x),ol(t,b)]}})}function eN(e,t,r,n){var i=n?e.map(function(o){return d1(o,n)}):e;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(o){var l=wI(r,o)<=0;return!gq(t,o,l)})}function gce(e){var t=Ut(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return Hr(r[0]);if(!o)return Hr(r[1]);var l=o/i;return Hr((-l*r[0]+r[1])/Math.sqrt(Math.pow(l,2)+1))}function yce(e){var t=Ut(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return[r[0],0];if(!o)return[0,r[1]];var l=o/i,a=-l*r[0]+r[1];return[-a/(l+1/l),a/(l*l+1)]}function vce(e,t,r,n,i){var o=e.props.innerBounds,l=i*Math.PI/180;if(!o)return[];var a=o.left,c=o.top,p=o.width,g=o.height,v=a-n[0],x=a+p-n[0],b=c-n[1],P=c+g-n[1],I=[[v,b],[x,b],[v,P],[x,P]],k=ol(r,[0,0]);if(!eN(r,I,k,0))return[];var M=[],O=I.map(function(F){return[qc(F),Is([0,0],F)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(F){var N=Is([0,0],yce(F)),$=gce(F);M.push.apply(M,un([],Ut(O.filter(function(j){var U=Ut(j,1),H=U[0];return H&&$<=H}).map(function(j){var U=Ut(j,2),H=U[0],Y=U[1],ae=Math.acos(H?$/H:0),ee=Y+ae,G=Y-ae;return[l+ee-N,l+G-N]}).reduce(function(j,U){return j.push.apply(j,un([],Ut(U),!1)),j},[]).filter(function(j){return!eN(t,I,k,j)}).map(function(j){return Pi(j*180/Math.PI,Iu)})),!1))}),M}function bce(e){var t=e.props.innerBounds,r=Dg();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var n=e.getRect(),i=n.pos1,o=n.pos2,l=n.pos3,a=n.pos4,c=[i,o,l,a],p=ol(c,[0,0]),g=t.left,v=t.top,x=t.width,b=t.height,P=[[g,v],[g,v+b]],I=[[g,v],[g+x,v]],k=[[g+x,v],[g+x,v+b]],M=[[g,v+b],[g+x,v+b]],O=SI(e,c,[0,0],!1),F=[],N=[];return O.forEach(function($){var j=$.line,U=$.lineConstants,H=mq(p,j),Y=H.horizontal,ae=H.vertical,ee=Th(j,U,I,ae,1,!0),G=Th(j,U,M,ae,1,!0),ie=Th(j,U,P,Y,1,!0),oe=Th(j,U,k,Y,1,!0);ee.isBound&&!r.top&&(F.push(v),r.top=!0),G.isBound&&!r.bottom&&(F.push(v+b),r.bottom=!0),ie.isBound&&!r.left&&(N.push(g),r.left=!0),oe.isBound&&!r.right&&(N.push(g+x),r.right=!0)}),{boundMap:r,horizontal:F,vertical:N}}function _ce(e,t,r,n){var i=t[0]-e[0],o=t[1]-e[1];if(Hr(i)<Gs&&(i=0),Hr(o)<Gs&&(o=0),!i)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var l=o/i,a=e[1]-l*e[0];if(n){var c=l*(t[0]+r)+a;return[r,c-t[1]]}else{var p=(t[1]+r-a)/l;return[p-t[0],r]}}function DT(e,t,r,n,i){var o=_ce(e,t,r,n);if(!o)return{isOutside:!1,offset:[0,0]};var l=Nf(e,t),a=Nf(o,e),c=Nf(o,t),p=a>l||c>l,g=Ut(of({datas:i,distX:o[0],distY:o[1]}),2),v=g[0],x=g[1];return{offset:[v,x],isOutside:p}}function J_(e,t){return e.isBound?e.offset:t.isSnap?RT(t).offset:0}function xce(e,t,r,n,i){var o=Ut(t,2),l=o[0],a=o[1],c=Ut(r,2),p=c[0],g=c[1],v=Ut(n,2),x=v[0],b=v[1],P=Ut(i,2),I=P[0],k=P[1],M=-I,O=-k;if(e&&l&&a){M=0,O=0;var F=[];if(p&&g?F.push([0,k],[I,0]):p?F.push([I,0]):g?F.push([0,k]):x&&b?F.push([0,k],[I,0]):x?F.push([I,0]):b&&F.push([0,k]),F.length){F.sort(function(U,H){return qc(ci([l,a],U))-qc(ci([l,a],H))});var N=F[0];if(N[0]&&Hr(l)>Gs)M=-N[0],O=a*Hr(l+M)/Hr(l)-a;else if(N[1]&&Hr(a)>Gs){var $=a;O=-N[1],M=l*Hr(a+O)/Hr($)-l}if(e&&g&&p)if(Hr(M)>Gs&&Hr(M)<Hr(I)){var j=Hr(I)/Hr(M);M*=j,O*=j}else if(Hr(O)>Gs&&Hr(O)<Hr(k)){var j=Hr(k)/Hr(O);M*=j,O*=j}else M=ly(-I,M),O=ly(-k,O)}}else M=l||p?-I:0,O=a||g?-k:0;return[M,O]}function wce(e,t,r,n,i,o){if(!Ty(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var l=TI(o.absolutePoses,[t,r]),a=Nc(l),c=a.left,p=a.right,g=a.top,v=a.bottom,x={horizontal:l.map(function(oe){return oe[1]}),vertical:l.map(function(oe){return oe[0]})},b=_I(e.props.snapDirections),P=xI(b,{left:c,right:p,top:g,bottom:v,center:(c+p)/2,middle:(g+v)/2}),I=R2(e,i,P,x),k=I.vertical,M=I.horizontal,O=pce(e,l,o),F=O.vertical,N=O.horizontal,$=k.isSnap,j=M.isSnap,U=k.isBound||F.isBound,H=M.isBound||N.isBound,Y=ly(k.offset,F.offset),ae=ly(M.offset,N.offset),ee=Ut(xce(n,[t,r],[U,H],[$,j],[Y,ae]),2),G=ee[0],ie=ee[1];return[{isBound:U,isSnap:$,offset:G},{isBound:H,isSnap:j,offset:ie}]}function R2(e,t,r,n){n===void 0&&(n=r);var i=bI(M2(e),n.vertical,n.horizontal),o=i.horizontal,l=i.vertical,a=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:L2(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),c=a.horizontal,p=a.vertical,g=J_(o[0],c),v=J_(l[0],p),x=Hr(g),b=Hr(v);return{horizontal:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:g,dist:x,bounds:o,snap:c},vertical:{isBound:l[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:v,dist:b,bounds:l,snap:p}}}function tN(e,t,r,n,i,o,l){l===void 0&&(l=[1,1]);var a=bI(t,r,n),c=a.horizontal,p=a.vertical,g=hq(e,r,n,[],[],i,o,l),v=g.horizontal,x=g.vertical,b=J_(c[0],v),P=J_(p[0],x),I=Hr(b),k=Hr(P);return{horizontal:{isBound:c[0].isBound,isSnap:v.isSnap,snapIndex:v.index,offset:b,dist:I,bounds:c,snap:v},vertical:{isBound:p[0].isBound,isSnap:x.isSnap,snapIndex:x.index,offset:P,dist:k,bounds:p,snap:x}}}function Sce(e,t,r,n){var i=Is(e,t)/Math.PI*180,o=r.vertical,l=o.isBound,a=o.isSnap,c=o.dist,p=r.horizontal,g=p.isBound,v=p.isSnap,x=p.dist,b=i%180,P=b<3||b>177,I=b>87&&b<93;return x<c&&(l||a&&!I&&(!n||!P))?"vertical":g||v&&!P&&(!n||!I)?"horizontal":""}function Cce(e,t,r,n,i,o){return r.map(function(l){var a=Ut(l,2),c=a[0],p=a[1],g=ol(t,c),v=ol(t,p),x=n?Ece(e,g,v,i):R2(e,i,{vertical:[v[0]],horizontal:[v[1]]}),b=x.horizontal,P=b.offset,I=b.isBound,k=b.isSnap,M=x.vertical,O=M.offset,F=M.isBound,N=M.isSnap,$=ci(p,c);if(!O&&!P)return{isBound:F||I,isSnap:N||k,sign:$,offset:[0,0]};var j=Sce(g,v,x,n);if(!j)return{sign:$,isBound:!1,isSnap:!1,offset:[0,0]};var U=j==="vertical",H=[0,0];return!n&&Hr(p[0])===1&&Hr(p[1])===1&&c[0]!==p[0]&&c[1]!==p[1]?H=of({datas:o,distX:-O,distY:-P}):H=DT(g,v,-(U?O:P),U,o).offset,H=H.map(function(Y,ae){return Y*($[ae]?2/$[ae]:0)}),{sign:$,isBound:U?F:I,isSnap:U?N:k,offset:H}})}function rN(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function Ece(e,t,r,n){var i=rce(e,t,r),o=i.horizontal,l=i.vertical,a=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:cce(e,t,r),c=a.horizontal,p=a.vertical,g=rN(o,c),v=rN(l,p),x=Hr(g),b=Hr(v);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:g,dist:x},vertical:{isBound:l.isBound,isSnap:p.isSnap,offset:v,dist:b}}}function Tce(e,t,r,n,i){var o=[-r[0],-r[1]],l=e.state,a=l.width,c=l.height,p=e.props.bounds,g=1/0,v=1/0;if(p){var x=[[r[0],-r[1]],[-r[0],r[1]]],b=p.left,P=b===void 0?-1/0:b,I=p.top,k=I===void 0?-1/0:I,M=p.right,O=M===void 0?1/0:M,F=p.bottom,N=F===void 0?1/0:F;x.forEach(function($){var j=$[0]!==o[0],U=$[1]!==o[1],H=ol(t,$),Y=Is(n,H)*360/Math.PI;if(U){var ae=H.slice();(Hr(Y-360)<2||Hr(Y-180)<2)&&(ae[1]=n[1]);var ee=DT(n,ae,(n[1]<H[1]?N:k)-H[1],!1,i),G=Ut(ee.offset,2),ie=G[1],oe=ee.isOutside;isNaN(ie)||(v=c+(oe?1:-1)*Hr(ie))}if(j){var ae=H.slice();(Hr(Y-90)<2||Hr(Y-270)<2)&&(ae[0]=n[0]);var ue=DT(n,ae,(n[0]<H[0]?O:P)-H[0],!0,i),de=Ut(ue.offset,1),Me=de[0],ge=ue.isOutside;isNaN(Me)||(g=a+(ge?1:-1)*Hr(Me))}})}return{maxWidth:g,maxHeight:v}}var Cu={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,o=r.zoom,l=e.getState(),a=l.dragInfo,c=l.beforeOrigin;if(n||!i||!a)return[];var p=a.dist;if(!p[0]&&!p[1])return[];var g=qc(p),v=Is(p,[0,0]);return[t.createElement("div",{className:li("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(g,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(v,"rad) scaleY(").concat(o,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,i=t.parentGesto,o=e.state,l=o.gestos,a=o.style;if(l.draggable)return!1;l.draggable=i||e.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],sm(e,t),A2(e,t,"translate"),Gce(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var c=Ri(e,t,Ft({set:function(g){r.startValue=g}},k2(e,t))),p=n||Rn(e,"onDragStart",c);return p!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(l.draggable=null,r.isPinch=!1),r.isDrag?c:!1},drag:function(e,t){if(t){P2(e,t,"translate");var r=t.datas,n=t.parentEvent,i=t.parentFlag,o=t.isPinch,l=t.deltaOffset,a=t.useSnap,c=t.isRequest,p=t.isGroup,g=t.parentThrottleDrag,v=t.distX,x=t.distY,b=r.isDrag,P=r.prevDist,I=r.prevBeforeDist,k=r.startValue;if(b){l&&(v+=l[0],x+=l[1]);var M=e.props,O=M.parentMoveable,F=p?0:M.throttleDrag||g||0,N=n?0:M.throttleDragRotate||0,$=0,j=!1,U=!1,H=!1,Y=!1;if(!n&&N>0&&(v||x)){var ae=M.startDragRotate||0,ee=Pi(ae+Is([0,0],[v,x])*180/Math.PI,N)-ae,G=x*Math.abs(Math.cos((ee-90)/180*Math.PI)),ie=v*Math.abs(Math.cos(ee/180*Math.PI)),oe=qc([ie,G]);$=ee*Math.PI/180,v=oe*Math.cos($),x=oe*Math.sin($)}if(!o&&!n&&!i){var ue=Ut(wce(e,v,x,N,!a&&c||l,r),2),de=ue[0],Me=ue[1];j=de.isSnap,U=de.isBound,H=Me.isSnap,Y=Me.isBound;var ge=de.offset,xe=Me.offset;v+=ge,x+=xe}var Ee=ma(Jj({datas:r,distX:v,distY:x}),k),Ae=ma(Fue({datas:r,distX:v,distY:x}),k);qD(Ae,Iu),qD(Ee,Iu),N||(!j&&!U&&(Ae[0]=Pi(Ae[0],F),Ee[0]=Pi(Ee[0],F)),!H&&!Y&&(Ae[1]=Pi(Ae[1],F),Ee[1]=Pi(Ee[1],F)));var fe=ci(Ee,k),Se=ci(Ae,k),we=ci(Se,P),De=ci(fe,I);r.prevDist=Se,r.prevBeforeDist=fe,r.passDelta=we,r.passDist=Se;var Re=r.left+fe[0],$e=r.top+fe[1],Oe=r.right-fe[0],it=r.bottom-fe[1],Ye=I2(r,"translate(".concat(Ae[0],"px, ").concat(Ae[1],"px)"),"translate(".concat(Se[0],"px, ").concat(Se[1],"px)"));if(yI(t,Ye),e.state.dragInfo.dist=n?[0,0]:Se,!(!n&&!O&&we.every(function(je){return!je})&&De.some(function(je){return!je}))){var rt=e.state,Ie=rt.width,It=rt.height,at=Ri(e,t,Ft({transform:Ye,dist:Se,delta:we,translate:Ae,beforeDist:fe,beforeDelta:De,beforeTranslate:Ee,left:Re,top:$e,right:Oe,bottom:it,width:Ie,height:It,isPinch:o},Tu({transform:Ye},t)));return!n&&Rn(e,"onDrag",at),at}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(e,Ft(Ft({},t),{deltaOffset:n}))):!1},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=gc(e,t,{});return!r&&Rn(e,"onDragEnd",i),i}},dragGroupStart:function(e,t){var r,n,i=t.datas,o=t.clientX,l=t.clientY,a=this.dragStart(e,t);if(!a)return!1;var c=ZS(e,this,"dragStart",[o||0,l||0],t,!1,"draggable"),p=c.childEvents,g=c.eventParams,v=Ft(Ft({},a),{targets:e.props.targets,events:g}),x=Rn(e,"onDragGroupStart",v);i.isDrag=x!==!1;var b=(n=(r=p[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?a:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var n=this.drag(e,Ft(Ft({},t),{parentThrottleDrag:e.props.throttleDrag})),i=t.datas.passDelta,o=ZS(e,this,"drag",i,t,!1,"draggable").eventParams;if(n){var l=Ft({targets:e.props.targets,events:o},n);return Rn(e,"onDragGroup",l),l}}},dragGroupEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(e,t);var i=ZS(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return Rn(e,"onDragGroupEnd",gc(e,t,{targets:e.props.targets,events:i})),r}},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=!1;return{isControl:!1,requestStart:function(l){return o=l.useSnap,{datas:t,useSnap:o}},request:function(l){return"x"in l?n=l.x-r.left:"deltaX"in l&&(n+=l.deltaX),"y"in l?i=l.y-r.top:"deltaY"in l&&(i+=l.deltaY),{datas:t,distX:n,distY:i,useSnap:o}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:o}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function vq(e,t){var r=ol(e,t),n=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:n}}function Pce(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,l=n?4:3,a=[i/2*(1+t[0]),o/2*(1+t[1])],c=Xo(r,a,l),p=[0,0];return{fixedPosition:c,fixedDirection:t,fixedOffset:p}}function bq(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,l=n?4:3,a=Gue(t,i,o),c=Xo(r,t,l),p=[i?0:t[0],o?0:t[1]];return{fixedPosition:c,fixedDirection:a,fixedOffset:p}}var nN=kI("resizable"),NT={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:oq("resizable"),dragControlCondition:nN,viewClassName:II("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,i=t.isPinch,o=t.isGroup,l=t.parentDirection,a=t.parentGesto,c=t.datas,p=t.parentFixedDirection,g=t.parentEvent,v=Lq(l,i,n,c),x=e.state,b=x.target,P=x.width,I=x.height,k=x.gestos;if(!v||!b||k.resizable)return!1;k.resizable=a||e.controlGesto,!i&&sm(e,t),c.datas={},c.direction=v,c.startOffsetWidth=P,c.startOffsetHeight=I,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=x.inlineCSSWidth||x.cssWidth,c.startHeight=x.inlineCSSHeight||x.cssHeight,c.maxSize=[1/0,1/0],o||(c.minSize=[x.minOffsetWidth,x.minOffsetHeight],c.maxSize=[x.maxOffsetWidth,x.maxOffsetHeight]);var M=e.props.transformOrigin||"% %";c.transformOrigin=Yf(M)?M.split(" "):M,c.startOffsetMatrix=x.offsetMatrix,c.startTransformOrigin=x.transformOrigin,c.isWidth=(r=t?.parentIsWidth)!==null&&r!==void 0?r:!v[0]&&!v[1]||v[0]||!v[1];function O(Y){c.ratio=Y&&isFinite(Y)?Y:0}c.startPositions=$c(e.state);function F(Y){var ae=vq(c.startPositions,Y);c.fixedDirection=ae.fixedDirection,c.fixedPosition=ae.fixedPosition,c.fixedOffset=ae.fixedOffset}function N(Y){var ae=bq(e.state,Y);c.fixedDirection=ae.fixedDirection,c.fixedPosition=ae.fixedPosition,c.fixedOffset=ae.fixedOffset}function $(Y){c.minSize=[Qa("".concat(Y[0]),0)||0,Qa("".concat(Y[1]),0)||0]}function j(Y){var ae=[Y[0]||1/0,Y[1]||1/0];(!T0(ae[0])||isFinite(ae[0]))&&(ae[0]=Qa("".concat(ae[0]),0)||1/0),(!T0(ae[1])||isFinite(ae[1]))&&(ae[1]=Qa("".concat(ae[1]),0)||1/0),c.maxSize=ae}O(P/I),F(p||[-v[0],-v[1]]),c.setFixedDirection=F,c.setFixedPosition=N,c.setMin=$,c.setMax=j;var U=Ri(e,t,{direction:v,startRatio:c.ratio,set:function(Y){var ae=Ut(Y,2),ee=ae[0],G=ae[1];c.startWidth=ee,c.startHeight=G},setMin:$,setMax:j,setRatio:O,setFixedDirection:F,setFixedPosition:N,setOrigin:function(Y){c.transformOrigin=Y},dragStart:Cu.dragStart(e,new oy().dragStart([0,0],t))}),H=g||Rn(e,"onResizeStart",U);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,H!==!1&&(c.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:v}),c.isResize?U:!1},dragControl:function(e,t){var r,n=t.datas,i=t.parentFlag,o=t.isPinch,l=t.parentKeepRatio,a=t.dragClient,c=t.parentDist,p=t.useSnap,g=t.isRequest,v=t.isGroup,x=t.parentEvent,b=t.resolveMatrix,P=n.isResize,I=n.transformOrigin,k=n.startWidth,M=n.startHeight,O=n.prevWidth,F=n.prevHeight,N=n.minSize,$=n.maxSize,j=n.ratio,U=n.startOffsetWidth,H=n.startOffsetHeight,Y=n.isWidth;if(!P)return;if(b){var ae=e.state.is3d,ee=n.startOffsetMatrix,G=n.startTransformOrigin,ie=ae?4:3,oe=I0(Y_(t)),ue=Math.sqrt(oe.length);ie!==ue&&(oe=hd(oe,ue,ie));var de=g1(ee,oe,G,ie),Me=lm(de,U,H,ie);n.startPositions=Me,n.nextTargetMatrix=oe,n.nextAllMatrix=de}var ge=Wp(e.props,"resizable"),xe=ge.resizeFormat,Ee=ge.throttleResize,Ae=Ee===void 0?i?0:1:Ee,fe=ge.parentMoveable,Se=ge.keepRatioFinally,we=n.direction,De=we,Re=0,$e=0;!we[0]&&!we[1]&&(De=[1,1]);var Oe=j&&(l??ge.keepRatio)||!1;function it(){var pr=n.fixedDirection,Jt=Bq(De,Oe,n,t);Re=Jt.distWidth,$e=Jt.distHeight;var ir=De[0]-pr[0]||Oe?Math.max(U+Re,Iu):U,xr=De[1]-pr[1]||Oe?Math.max(H+$e,Iu):H;return Oe&&U&&H&&(Y?xr=ir/j:ir=xr*j),[ir,xr]}var Ye=Ut(it(),2),rt=Ye[0],Ie=Ye[1];x||(n.setFixedDirection(n.fixedDirection),Rn(e,"onBeforeResize",Ri(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(pr){var Jt;return n.setFixedDirection(pr),Jt=Ut(it(),2),rt=Jt[0],Ie=Jt[1],[rt,Ie]},setFixedPosition:function(pr){var Jt;return n.setFixedPosition(pr),Jt=Ut(it(),2),rt=Jt[0],Ie=Jt[1],[rt,Ie]},boundingWidth:rt,boundingHeight:Ie,setSize:function(pr){var Jt;Jt=Ut(pr,2),rt=Jt[0],Ie=Jt[1]}},!0)));var It=a;a||(!i&&o?It=Yue(e,[0,0]):It=n.fixedPosition);var at=[0,0];o||(at=Vce(e,rt,Ie,we,It,!p&&g,n)),c&&(!c[0]&&(at[0]=0),!c[1]&&(at[1]=0));function je(){var pr;xe&&(pr=Ut(xe([rt,Ie]),2),rt=pr[0],Ie=pr[1]),rt=Pi(rt,Ae),Ie=Pi(Ie,Ae)}if(Oe){De[0]&&De[1]&&at[0]&&at[1]&&(Hr(at[0])>Hr(at[1])?at[1]=0:at[0]=0);var Ht=!at[0]&&!at[1];Ht&&je(),De[0]&&!De[1]||at[0]&&!at[1]||Ht&&Y?(rt+=at[0],Ie=rt/j):(!De[0]&&De[1]||!at[0]&&at[1]||Ht&&!Y)&&(Ie+=at[1],rt=Ie*j)}else rt+=at[0],Ie+=at[1],rt=Math.max(0,rt),Ie=Math.max(0,Ie);r=Ut(Lj([rt,Ie],N,$,Oe?j:!1),2),rt=r[0],Ie=r[1],je(),Oe&&(v||Se)&&(Y?Ie=rt/j:rt=Ie*j),Re=rt-U,$e=Ie-H;var Wt=[Re-O,$e-F];n.prevWidth=Re,n.prevHeight=$e;var zt=Xue(e,rt,Ie,It,I,n);if(!(!fe&&Wt.every(function(pr){return!pr})&&zt.every(function(pr){return!pr}))){var st=Cu.drag(e,m1(t,e.state,zt,!!o,!1,"draggable")),sr=st.transform,ur=k+Re,ar=M+$e,yr=Ri(e,t,Ft({width:ur,height:ar,offsetWidth:Math.round(rt),offsetHeight:Math.round(Ie),startRatio:j,boundingWidth:rt,boundingHeight:Ie,direction:we,dist:[Re,$e],delta:Wt,isPinch:!!o,drag:st},Dq({style:{width:"".concat(ur,"px"),height:"".concat(ar,"px")},transform:sr},st,t)));return!x&&Rn(e,"onResize",yr),yr}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,l=r.prevWidth,a=r.prevHeight;if(!(!n||e.props.checkResizableError===!1)){var c=e.state,p=c.width,g=c.height,v=p-(i+l),x=g-(o+a),b=Hr(v)>3,P=Hr(x)>3;if(b&&(r.startWidth+=v,r.startOffsetWidth+=v,r.prevWidth+=v),P&&(r.startHeight+=x,r.startOffsetHeight+=x,r.prevHeight+=x),b||P)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var i=gc(e,t,{});return!n&&Rn(e,"onResizeEnd",i),i}},dragGroupControlCondition:nN,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,Ft(Ft({},t),{isGroup:!0}));if(!n)return!1;var i=ud(e,"resizable",t),o=r.startOffsetWidth,l=r.startOffsetHeight;function a(){var b=r.minSize;i.forEach(function(P){var I=P.datas,k=I.minSize,M=I.startOffsetWidth,O=I.startOffsetHeight,F=o*(M?k[0]/M:0),N=l*(O?k[1]/O:0);b[0]=Math.max(b[0],F),b[1]=Math.max(b[1],N)})}function c(){var b=r.maxSize;i.forEach(function(P){var I=P.datas,k=I.maxSize,M=I.startOffsetWidth,O=I.startOffsetHeight,F=o*(M?k[0]/M:0),N=l*(O?k[1]/O:0);b[0]=Math.min(b[0],F),b[1]=Math.min(b[1],N)})}var p=Of(e,this,"dragControlStart",t,function(b,P){return Z_(e,b,r,P)});a(),c();var g=function(b){n.setFixedDirection(b),p.forEach(function(P,I){P.setFixedDirection(b),Z_(e,P.moveable,r,i[I])})};r.setFixedDirection=g;var v=Ft(Ft({},n),{targets:e.props.targets,events:p.map(function(b){return Ft(Ft({},b),{setMin:function(P){b.setMin(P),a()},setMax:function(P){b.setMax(P),c()}})}),setFixedDirection:g,setMin:function(b){n.setMin(b),a()},setMax:function(b){n.setMax(b),c()}}),x=Rn(e,"onResizeGroupStart",v);return r.isResize=x!==!1,r.isResize?n:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=Wp(e.props,"resizable");N2(e,"onBeforeResize",function(b){Rn(e,"onBeforeResizeGroup",Ri(e,t,Ft(Ft({},b),{targets:n.targets}),!0))});var i=this.dragControl(e,Ft(Ft({},t),{isGroup:!0}));if(i){var o=i.boundingWidth,l=i.boundingHeight,a=i.dist,c=n.keepRatio,p=[o/(o-a[0]),l/(l-a[1])],g=r.fixedPosition,v=Of(e,this,"dragControl",t,function(b,P){var I=Ut(cu(f1(e.rotation/180*Math.PI,3),[P.datas.originalX*p[0],P.datas.originalY*p[1],1],3),2),k=I[0],M=I[1];return Ft(Ft({},P),{parentDist:null,parentScale:p,dragClient:ma(g,[k,M]),parentKeepRatio:c})}),x=Ft({targets:n.targets,events:v},i);return Rn(e,"onResizeGroup",x),x}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(e,t);var i=Of(e,this,"dragControlEnd",t),o=gc(e,t,{targets:e.props.targets,events:i});return Rn(e,"onResizeGroupEnd",o),r}},request:function(e){var t={},r=0,n=0,i=!1,o=e.getRect();return{isControl:!0,requestStart:function(l){var a;return i=l.useSnap,{datas:t,parentDirection:l.direction||[1,1],parentIsWidth:(a=l?.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(l){return"offsetWidth"in l?r=l.offsetWidth-o.offsetWidth:"deltaWidth"in l&&(r+=l.deltaWidth),"offsetHeight"in l?n=l.offsetHeight-o.offsetHeight:"deltaHeight"in l&&(n+=l.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:l.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.resizable=null}};function KS(e,t,r,n,i){var o=e.props.groupable,l=e.state,a=l.is3d?4:3,c=t.origin,p=Xo(e.state.rootMatrix,ci([c[0],c[1]],o?[0,0]:[l.left,l.top]),a),g=ma([i.left,i.top],p);t.startAbsoluteOrigin=g,t.prevDeg=Is(g,[r,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=Nf(g,[r,n])}function g_(e,t,r){var n=r.defaultDeg,i=r.prevDeg,o=i%360,l=Math.floor(i/360);o<0&&(o+=360),o>e&&o>270&&e<90?++l:o<e&&o<90&&e>270&&--l;var a=t*(l*360+e-n);return r.prevDeg=n+a,a}function JS(e,t,r,n){return g_(Is(n.startAbsoluteOrigin,[e,t])/Math.PI*180,r,n)}function QS(e,t,r,n,i,o){var l=e.props.throttleRotate,a=l===void 0?0:l,c=r.prevSnapDeg,p=0,g=!1;if(o){var v=$ce(e,t,n,i+n);g=v.isSnap,p=i+v.dist}g||(p=Pi(i+n,a));var x=p-i;return r.prevSnapDeg=x,[x-c,x,p]}function _q(e,t,r){var n=Ut(t,4),i=n[0],o=n[1],l=n[2],a=n[3];if(e==="none")return[];if(Cl(e))return e.map(function(k){return _q(k,[i,o,l,a],r)[0]});var c=Ut((e||"top").split("-"),2),p=c[0],g=c[1],v=[i,o];p==="left"?v=[l,i]:p==="right"?v=[o,a]:p==="bottom"&&(v=[a,l]);var x=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2],b=Aq(v,r);if(g){var P=g==="top"||g==="left",I=p==="bottom"||p==="left";x=v[P&&!I||!P&&I?0:1]}return[[x,b]]}function OT(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(al(r,li("rotation-control"))||e.props.rotateAroundControls&&al(r,li("around-control"))||al(r,li("control"))&&al(r,li("rotatable")))return!0;var n=e.props.rotationTarget;return n?AI(n,!0).some(function(i){return i?r===i||r.contains(i):!1}):!1}var Ice=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,kce={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Ice],viewClassName:function(e){return e.isDragging("rotatable")?li("view-rotation-dragging"):""},render:function(e,t){var r=Wp(e.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,o=r.zoom,l=r.renderDirections,a=r.rotateAroundControls,c=r.resolveAblesWithRotatable,p=e.getState(),g=p.renderPoses,v=p.direction;if(!n)return null;var x=_q(i,g,v),b=[];if(x.forEach(function(M,O){var F=Ut(M,2),N=F[0],$=F[1];b.push(t.createElement("div",{key:"rotation".concat(O),className:li("rotation"),style:{transform:"translate(-50%) translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat($,"rad)")}},t.createElement("div",{className:li("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),t.createElement("div",{className:li("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),l){var P=Sy(c||{}),I={};P.forEach(function(M){c[M].forEach(function(O){I[O]=M})});var k=[];Cl(l)&&(k=l.map(function(M){var O=I[M];return{data:O?{resolve:O}:{},classNames:O?["move"]:[],dir:M}})),b.push.apply(b,un([],Ut(nq(e,"rotatable",k,t)),!1))}return a&&b.push.apply(b,un([],Ut(lq(e,t)),!1)),b},dragControlCondition:OT,dragControlStart:function(e,t){var r,n,i=t.datas,o=t.clientX,l=t.clientY,a=t.parentRotate,c=t.parentFlag,p=t.isPinch,g=t.isRequest,v=e.state,x=v.target,b=v.left,P=v.top,I=v.direction,k=v.beforeDirection,M=v.targetTransform,O=v.moveableClientRect,F=v.offsetMatrix,N=v.targetMatrix,$=v.allMatrix,j=v.width,U=v.height;if(!g&&!x)return!1;var H=e.getRect();i.rect=H,i.transform=M,i.left=b,i.top=P;var Y=function(De){var Re=bq(e.state,De);i.fixedDirection=Re.fixedDirection,i.fixedOffset=Re.fixedOffset,i.fixedPosition=Re.fixedPosition,Ae&&Ae.setFixedPosition(De)},ae=function(De){var Re=Pce(e.state,De);i.fixedDirection=Re.fixedDirection,i.fixedOffset=Re.fixedOffset,i.fixedPosition=Re.fixedPosition,Ae&&Ae.setFixedDirection(De)},ee=o,G=l;if(g||p||c){var ie=a||0;i.beforeInfo={origin:H.beforeOrigin,prevDeg:ie,defaultDeg:ie,prevSnapDeg:0,startDist:0},i.afterInfo=Ft(Ft({},i.beforeInfo),{origin:H.origin}),i.absoluteInfo=Ft(Ft({},i.beforeInfo),{origin:H.origin,startValue:ie})}else{var oe=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(oe){var ue=oe.getAttribute("data-direction")||"",de=Due[ue];if(de){i.isControl=!0,i.isAroundControl=al(oe,li("around-control")),i.controlDirection=de;var Me=oe.getAttribute("data-resolve");Me&&(i.resolveAble=Me);var ge=ide(v.rootMatrix,v.renderPoses,O);r=Ut(ol(ge,de),2),ee=r[0],G=r[1]}}i.beforeInfo={origin:H.beforeOrigin},i.afterInfo={origin:H.origin},i.absoluteInfo={origin:H.origin,startValue:H.rotation};var xe=Y;Y=function(De){var Re=v.is3d?4:3,$e=Ut(ma(Fj(N,Re),De),2),Oe=$e[0],it=$e[1],Ye=cu(F,Up([Oe,it],Re)),rt=cu($,Up([De[0],De[1]],Re));xe(De);var Ie=v.posDelta;i.beforeInfo.origin=ci(Ye,Ie),i.afterInfo.origin=ci(rt,Ie),i.absoluteInfo.origin=ci(rt,Ie),KS(e,i.beforeInfo,ee,G,O),KS(e,i.afterInfo,ee,G,O),KS(e,i.absoluteInfo,ee,G,O)},ae=function(De){var Re=ol([[0,0],[j,0],[0,U],[j,U]],De);Y(Re)}}i.startClientX=ee,i.startClientY=G,i.direction=I,i.beforeDirection=k,i.startValue=0,i.datas={},A2(e,t,"rotate");var Ee=!1,Ae=!1;if(i.isControl&&i.resolveAble){var fe=i.resolveAble;fe==="resizable"&&(Ae=NT.dragControlStart(e,Ft(Ft({},new oy("resizable").dragStart([0,0],t)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}Ae||(Ee=Cu.dragStart(e,new oy().dragStart([0,0],t))),Y(ade(e));var Se=Ri(e,t,Ft(Ft({set:function(De){i.startValue=De*Math.PI/180},setFixedDirection:ae,setFixedPosition:Y},k2(e,t)),{dragStart:Ee,resizeStart:Ae})),we=Rn(e,"onRotateStart",Se);return i.isRotate=we!==!1,v.snapRenderInfo={request:t.isRequest},i.isRotate?Se:!1},dragControl:function(e,t){var r,n,i,o=t.datas,l=t.clientDistX,a=t.clientDistY,c=t.parentRotate,p=t.parentFlag,g=t.isPinch,v=t.groupDelta,x=t.resolveMatrix,b=o.beforeDirection,P=o.beforeInfo,I=o.afterInfo,k=o.absoluteInfo,M=o.isRotate,O=o.startValue,F=o.rect,N=o.startClientX,$=o.startClientY;if(M){P2(e,t,"rotate");var j=Oue(t),U=b*j,H=e.props.parentMoveable,Y=0,ae,ee,G=0,ie,oe,ue=0,de,Me,ge=180/Math.PI*O,xe=k.startValue,Ee=!1,Ae=N+l,fe=$+a;if(!p&&"parentDist"in t){var Se=t.parentDist;ae=Se,ie=Se,de=Se}else g||p?(ae=g_(c,b,P),ie=g_(c,U,I),de=g_(c,U,k)):(ae=JS(Ae,fe,b,P),ie=JS(Ae,fe,U,I),de=JS(Ae,fe,U,k),Ee=!0);if(ee=ge+ae,oe=ge+ie,Me=xe+de,Rn(e,"onBeforeRotate",Ri(e,t,{beforeRotation:ee,rotation:oe,absoluteRotation:Me,setRotation:function(It){ie=It-ge,ae=ie,de=ie}},!0)),r=Ut(QS(e,F,P,ae,ge,Ee),3),Y=r[0],ae=r[1],ee=r[2],n=Ut(QS(e,F,I,ie,ge,Ee),3),G=n[0],ie=n[1],oe=n[2],i=Ut(QS(e,F,k,de,xe,Ee),3),ue=i[0],de=i[1],Me=i[2],!(!ue&&!G&&!Y&&!H&&!x)){var we=I2(o,"rotate(".concat(oe,"deg)"),"rotate(".concat(ie,"deg)"));x&&(o.fixedPosition=vI(e,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var De=Wue(e,ie,o),Re=ci(ma(v||[0,0],De),o.prevInverseDist||[0,0]);o.prevInverseDist=De,o.requestValue=null;var $e=eq(e,we,Re,g,t),Oe=$e,it=Nf([Ae,fe],k.startAbsoluteOrigin)-k.startDist,Ye=void 0;if(o.resolveAble==="resizable"){var rt=NT.dragControl(e,Ft(Ft({},m1(t,e.state,[t.deltaX,t.deltaY],!!g,!1,"resizable")),{resolveMatrix:!0,parentDistance:it}));rt&&(Ye=rt,Oe=Dq(Oe,rt,t))}var Ie=Ri(e,t,Ft(Ft({delta:G,dist:ie,rotate:oe,rotation:oe,beforeDist:ae,beforeDelta:Y,beforeRotate:ee,beforeRotation:ee,absoluteDist:de,absoluteDelta:ue,absoluteRotate:Me,absoluteRotation:Me,isPinch:!!g,resize:Ye},$e),Oe));return Rn(e,"onRotate",Ie),Ie}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var n=gc(e,t,{});return Rn(e,"onRotateEnd",n),n}},dragGroupControlCondition:OT,dragGroupControlStart:function(e,t){var r=t.datas,n=e.state,i=n.left,o=n.top,l=n.beforeOrigin,a=this.dragControlStart(e,t);if(!a)return!1;a.set(r.beforeDirection*e.rotation);var c=Of(e,this,"dragControlStart",t,function(v,x){var b=v.state,P=b.left,I=b.top,k=b.beforeOrigin,M=ma(ci([P,I],[i,o]),ci(k,l));return x.datas.startGroupClient=M,x.datas.groupClient=M,Ft(Ft({},x),{parentRotate:0})}),p=Ft(Ft({},a),{targets:e.props.targets,events:c}),g=Rn(e,"onRotateGroupStart",p);return r.isRotate=g!==!1,r.isRotate?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){N2(e,"onBeforeRotate",function(p){Rn(e,"onBeforeRotateGroup",Ri(e,t,Ft(Ft({},p),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=r.beforeDirection,o=n.beforeDist,l=o/180*Math.PI,a=Of(e,this,"dragControl",t,function(p,g){var v=g.datas.startGroupClient,x=Ut(g.datas.groupClient,2),b=x[0],P=x[1],I=Ut(d1(v,l*i),2),k=I[0],M=I[1],O=[k-b,M-P];return g.datas.groupClient=[k,M],Ft(Ft({},g),{parentRotate:o,groupDelta:O})});e.rotation=i*n.beforeRotation;var c=Ft({targets:e.props.targets,events:a,set:function(p){e.rotation=p},setGroupRotation:function(p){e.rotation=p}},n);return Rn(e,"onRotateGroup",c),c}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(e,t);var i=Of(e,this,"dragControlEnd",t),o=gc(e,t,{targets:e.props.targets,events:i});return Rn(e,"onRotateGroupEnd",o),r}},request:function(e){var t={},r=0,n=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(i){return"deltaRotate"in i?r+=i.deltaRotate:"rotate"in i&&(r=i.rotate-n),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ace(e,t){var r,n=e.direction,i=e.classNames,o=e.size,l=e.pos,a=e.zoom,c=e.key,p=n==="horizontal",g=p?"Y":"X";return t.createElement("div",{key:c,className:i.join(" "),style:(r={},r[p?"width":"height"]="".concat(o),r.transform="translate(".concat(l[0],", ").concat(l[1],") translate").concat(g,"(-50%) scale").concat(g,"(").concat(a,")"),r)})}function CI(e,t){return Ace(Ft(Ft({},e),{classNames:un([li("line","guideline",e.direction)],Ut(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(Pi(r,.1),"px")})}),t)}function iN(e,t,r,n,i,o,l,a){var c=e.props.zoom;return r.map(function(p,g){var v=p.type,x=p.pos,b=[0,0];return b[l]=n,b[l?0:1]=-i+x,CI({key:"".concat(t,"TargetGuideline").concat(g),classNames:[li("target","bold",v)],posValue:b,sizeValue:o,zoom:c,direction:t},a)})}function aN(e,t,r,n,i,o){var l=e.props,a=l.zoom,c=l.isDisplayInnerSnapDigit,p=t==="horizontal"?Oh:Fh,g=i[p.start],v=i[p.end];return r.filter(function(x){var b=x.hide,P=x.elementRect;if(b)return!1;if(c&&P){var I=P.rect;if(I[p.start]<=g&&v<=I[p.end])return!1}return!0}).map(function(x,b){var P=x.pos,I=x.size,k=x.element,M=x.className,O=[-n[0]+P[0],-n[1]+P[1]];return CI({key:"".concat(t,"-default-guideline-").concat(b),classNames:k?[li("bold"),M]:[li("normal"),M],direction:t,posValue:O,sizeValue:I,zoom:a},o)})}function Ov(e,t,r,n,i,o,l,a){var c,p=e.props,g=p.snapDigit,v=g===void 0?0:g,x=p.isDisplaySnapDigit,b=x===void 0?!0:x,P=p.snapDistFormat,I=P===void 0?function($,j){return $}:P,k=p.zoom,M=t==="horizontal"?"X":"Y",O=t==="vertical"?"height":"width",F=Math.abs(i),N=b?parseFloat(F.toFixed(v)):0;return a.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(n),className:li("guideline-group",t),style:(c={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},c[O]="".concat(F,"px"),c)},CI({direction:t,classNames:[li(r),l],size:"100%",posValue:[0,0],sizeValue:F,zoom:k},a),a.createElement("div",{className:li("size-value","gap"),style:{transform:"translate".concat(M,"(-50%) scale(").concat(k,")")}},N>0?I(N,t):""))}function Mce(e,t,r,n){var i=e==="vertical"?0:1,o=e==="vertical"?1:0,l=i?Oh:Fh,a=r[l.start],c=r[l.end];return Nq(t,function(p){return p.pos[i]}).map(function(p){var g=[],v=[],x=[];return p.forEach(function(b){var P,I,k=b.element,M=b.elementRect.rect;if(M[l.end]<a)g.push(b);else if(c<M[l.start])v.push(b);else if(M[l.start]<=a&&c<=M[l.end]&&n){var O=b.pos,F={element:k,rect:Ft(Ft({},M),(P={},P[l.end]=M[l.start],P))},N={element:k,rect:Ft(Ft({},M),(I={},I[l.start]=M[l.end],I))},$=[0,0],j=[0,0];$[i]=O[i],$[o]=O[o],j[i]=O[i],j[o]=O[o]+b.size,g.push({type:e,pos:$,size:0,elementRect:F,direction:"",elementDirection:"end"}),v.push({type:e,pos:j,size:0,elementRect:N,direction:"",elementDirection:"start"})}}),g.sort(function(b,P){return P.pos[o]-b.pos[o]}),v.sort(function(b,P){return b.pos[o]-P.pos[o]}),{total:p,start:g,end:v,inner:x}})}function Lce(e,t,r,n,i){var o=e.props.isDisplayInnerSnapDigit,l=[];return["vertical","horizontal"].forEach(function(a){var c=t.filter(function(k){return k.type===a}),p=a==="vertical"?1:0,g=p?0:1,v=Mce(a,c,n,o),x=p?Fh:Oh,b=p?Oh:Fh,P=n[x.start],I=n[x.end];v.forEach(function(k){var M=k.total,O=k.start,F=k.end,N=k.inner,$=r[g]+M[0].pos[g]-n[b.start],j=n;O.forEach(function(U){var H=U.elementRect.rect,Y=j[x.start]-H[x.end];if(Y>0){var ae=[0,0];ae[p]=r[p]+j[x.start]-P-Y,ae[g]=$,l.push(Ov(e,a,"dashed",l.length,Y,ae,U.className,i))}j=H}),j=n,F.forEach(function(U){var H=U.elementRect.rect,Y=H[x.start]-j[x.end];if(Y>0){var ae=[0,0];ae[p]=r[p]+j[x.end]-P,ae[g]=$,l.push(Ov(e,a,"dashed",l.length,Y,ae,U.className,i))}j=H}),N.forEach(function(U){var H=U.elementRect.rect,Y=P-H[x.start],ae=H[x.end]-I,ee=[0,0],G=[0,0];ee[p]=r[p]-Y,ee[g]=$,G[p]=r[p]+I-P,G[g]=$,l.push(Ov(e,a,"dashed",l.length,Y,ee,U.className,i)),l.push(Ov(e,a,"dashed",l.length,ae,G,U.className,i))})})}),l}function Rce(e,t,r,n,i){var o=[];return["horizontal","vertical"].forEach(function(l){var a=t.filter(function(k){return k.type===l}).slice(0,1),c=l==="vertical"?0:1,p=c?0:1,g=c?Fh:Oh,v=c?Oh:Fh,x=n[g.start],b=n[g.end],P=n[v.start],I=n[v.end];a.forEach(function(k){var M=k.gap,O=k.gapRects,F=Math.max.apply(Math,un([P],Ut(O.map(function(j){var U=j.rect;return U[v.start]})),!1)),N=Math.min.apply(Math,un([I],Ut(O.map(function(j){var U=j.rect;return U[v.end]})),!1)),$=(F+N)/2;F===N||$===(P+I)/2||O.forEach(function(j){var U=j.rect,H=j.className,Y=[r[0],r[1]];if(U[g.end]<x)Y[c]+=U[g.end]-x;else if(b<U[g.start])Y[c]+=U[g.start]-x-M;else return;Y[p]+=$-P,o.push(Ov(e,c?"vertical":"horizontal","gap",o.length,M,Y,H,i))})})}),o}function FT(e){var t,r,n=e.state,i=n.containerClientRect,o=n.hasFixed,l=i.overflow,a=i.scrollHeight,c=i.scrollWidth,p=i.clientHeight,g=i.clientWidth,v=i.clientLeft,x=i.clientTop,b=e.props,P=b.snapGap,I=P===void 0?!0:P,k=b.verticalGuidelines,M=b.horizontalGuidelines,O=b.snapThreshold,F=O===void 0?5:O,N=b.maxSnapElementGuidelineDistance,$=N===void 0?1/0:N,j=b.isDisplayGridGuidelines,U=Nc($c(e.state)),H=U.top,Y=U.left,ae=U.bottom,ee=U.right,G={top:H,left:Y,bottom:ae,right:ee,center:(Y+ee)/2,middle:(H+ae)/2},ie=Fce(e),oe=un([],Ut(ie),!1),ue=((r=(t=n.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(xe){return xe*F});I&&oe.push.apply(oe,un([],Ut(Dce(e,G,ue)),!1));var de=Ft({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(oe.push.apply(oe,un([],Ut(Oce(e,l?c:g,l?a:p,v,x,de,j)),!1)),o){var Me=i.left,ge=i.top;de.left+=Me,de.top+=ge,de.right+=Me,de.bottom+=ge}return oe.push.apply(oe,un([],Ut(wq(M||!1,k||!1,l?c:g,l?a:p,v,x,de)),!1)),oe=oe.filter(function(xe){var Ee=xe.element,Ae=xe.elementRect,fe=xe.type;if(!Ee||!Ae)return!0;var Se=Ae.rect;return xq(G,Se,fe,$)}),oe}function Dce(e,t,r){var n=e.props,i=n.maxSnapElementGuidelineDistance,o=i===void 0?1/0:i,l=n.maxSnapElementGapDistance,a=l===void 0?1/0:l,c=e.state.elementRects,p=[];return[["vertical",Oh,Fh],["horizontal",Fh,Oh]].forEach(function(g){var v=Ut(g,3),x=v[0],b=v[1],P=v[2],I=t[b.start],k=t[b.end],M=t[b.center],O=t[P.start],F=t[P.end],N={left:r[0],top:r[1]};function $(H){var Y=H.rect,ae=N[b.start];return Y[b.end]<I+ae?I-Y[b.end]:k-ae<Y[b.start]?Y[b.start]-k:-1}var j=c.filter(function(H){var Y=H.rect;return Y[P.start]>F||Y[P.end]<O?!1:$(H)>0}).sort(function(H,Y){return $(H)-$(Y)}),U=[];j.forEach(function(H){j.forEach(function(Y){if(H!==Y){var ae=H.rect,ee=Y.rect,G=ae[P.start],ie=ae[P.end],oe=ee[P.start],ue=ee[P.end];G>ue||oe>ie||U.push([H,Y])}})}),U.forEach(function(H){var Y=Ut(H,2),ae=Y[0],ee=Y[1],G=ae.rect,ie=ee.rect,oe=G[b.start],ue=G[b.end],de=ie[b.start],Me=ie[b.end],ge=N[b.start],xe=0,Ee=0,Ae=!1,fe=!1,Se=!1;if(ue<=I&&k<=de){if(fe=!0,xe=(de-ue-(k-I))/2,Ee=ue+xe+(k-I)/2,Hr(Ee-M)>ge)return}else if(ue<de&&Me<I+ge){if(Ae=!0,xe=de-ue,Ee=Me+xe,Hr(Ee-I)>ge)return}else if(ue<de&&k-ge<oe){if(Se=!0,xe=de-ue,Ee=oe-xe,Hr(Ee-k)>ge)return}else return;xe&&xq(t,ie,x,o)&&(xe>a||p.push({type:x,pos:x==="vertical"?[Ee,0]:[0,Ee],element:ee.element,size:0,className:ee.className,isStart:Ae,isCenter:fe,isEnd:Se,gap:xe,hide:!0,gapRects:[ae,ee],direction:"",elementDirection:""}))})}),p}function Nce(e,t,r,n){var i,o,l=e.props,a=e.state,c=l.snapGridAll,p=l.snapGridWidth,g=p===void 0?0:p,v=l.snapGridHeight,x=v===void 0?0:v,b=a.snapRenderInfo,P=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((o=b.direction)===null||o===void 0?void 0:o[1])),I=e.moveables;if(c&&I&&P&&(g||x)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var k=e.getRect(),M=k.children,O=b.direction;if(M){var F=O.map(function($,j){var U=j===0?{snapSize:g,posName:"left",sizeName:"width",clientOffset:n.left-t}:{snapSize:x,posName:"top",sizeName:"height",clientOffset:n.top-r},H=U.snapSize,Y=U.posName,ae=U.sizeName,ee=U.clientOffset;if(!H)return{dir:$,multiple:1,snapSize:H,snapOffset:0};var G=k[ae],ie=k[Y],oe=Ile(M.map(function(Ae){return[Ae[Y]-ie,Ae[ae],G-Ae[ae]-Ae[Y]+ie]})).filter(function(Ae){return Ae}).sort(function(Ae,fe){return Ae-fe}),ue=oe[0],de=oe.map(function(Ae){return Pi(Ae/ue,.1)*H}),Me=1,ge=Pi(G/ue,.1);for(Me=1;Me<=10&&!de.every(function(Ae){return Ae*Me%1===0});++Me);var xe=(-$+1)/2,Ee=H_(ie-ee,ie-ee+G,xe,1-xe);return{multiple:ge*Me,dir:$,snapSize:H,snapOffset:Math.round(Ee/H)}}),N=F.map(function($){return $.multiple||1});a.snapThresholdInfo.multiples=N,a.snapThresholdInfo.offset=F.map(function($){return $.snapOffset}),F.forEach(function($,j){$.snapSize})}}else a.snapThresholdInfo=null}function Oce(e,t,r,n,i,o,l){n===void 0&&(n=0),i===void 0&&(i=0);var a=e.props,c=e.state,p=a.snapGridWidth,g=p===void 0?0:p,v=a.snapGridHeight,x=v===void 0?0:v,b=[],P=o.left,I=o.top,k=[0,0];Nce(e,n,i,o);var M=c.snapThresholdInfo,O=g,F=x;if(M&&(g*=M.multiples[0]||1,x*=M.multiples[1]||1,k=M.offset),x){for(var N=function(j){b.push({type:"horizontal",pos:[P,Pi(k[1]*F+j-i+I,.1)],className:li("grid-guideline"),size:t,hide:!l,direction:"",grid:!0})},$=0;$<=r*2;$+=x)N($);for(var $=-x;$>=-r;$-=x)N($)}if(g){for(var N=function(U){b.push({type:"vertical",pos:[Pi(k[0]*O+U-n+P,.1),I],className:li("grid-guideline"),size:r,hide:!l,direction:"",grid:!0})},$=0;$<=t*2;$+=g)N($);for(var $=-g;$>=-t;$-=g)N($)}return b}function xq(e,t,r,n){return r==="horizontal"?Hr(e.right-t.left)<=n||Hr(e.left-t.right)<=n||e.left<=t.right&&t.left<=e.right:r==="vertical"?Hr(e.bottom-t.top)<=n||Hr(e.top-t.bottom)<=n||e.top<=t.bottom&&t.top<=e.bottom:!0}function Fce(e){var t=e.state,r=e.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return t.elementRects=[],[];var i=(t.elementRects||[]).filter(function(x){return!x.refresh}),o=n.map(function(x){return fd(x)&&"element"in x?Ft(Ft({},x),{element:Yd(x.element,!0)}):{element:Yd(x,!0)}}).filter(function(x){return x.element}),l=Xle(i.map(function(x){return x.element}),o.map(function(x){return x.element})),a=l.maintained,c=l.added,p=[];a.forEach(function(x){var b=Ut(x,2),P=b[0],I=b[1];p[I]=i[P]}),Bce(e,c.map(function(x){return o[x]})).map(function(x,b){p[c[b]]=x}),t.elementRects=p;var g=_I(e.props.elementSnapDirections),v=[];return p.forEach(function(x){var b=x.element,P=x.top,I=P===void 0?g.top:P,k=x.left,M=k===void 0?g.left:k,O=x.right,F=O===void 0?g.right:O,N=x.bottom,$=N===void 0?g.bottom:N,j=x.center,U=j===void 0?g.center:j,H=x.middle,Y=H===void 0?g.middle:H,ae=x.className,ee=x.rect,G=xI({top:I,right:F,left:M,bottom:$,center:U,middle:Y},ee),ie=G.horizontal,oe=G.vertical,ue=G.horizontalNames,de=G.verticalNames,Me=ee.top,ge=ee.left,xe=ee.right-ge,Ee=ee.bottom-Me,Ae=[xe,Ee];oe.forEach(function(fe,Se){v.push({type:"vertical",element:b,pos:[Pi(fe,.1),Me],size:Ee,sizes:Ae,className:ae,elementRect:x,elementDirection:ZD[de[Se]]||de[Se],direction:""})}),ie.forEach(function(fe,Se){v.push({type:"horizontal",element:b,pos:[ge,Pi(fe,.1)],size:xe,sizes:Ae,className:ae,elementRect:x,elementDirection:ZD[ue[Se]]||ue[Se],direction:""})})}),v}function oN(e,t){return e?e.map(function(r){var n=fd(r)?r:{pos:r},i=n.pos;return T0(i)?n:Ft(Ft({},n),{pos:Qa(i,t)})}):[]}function wq(e,t,r,n,i,o,l){i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l={left:0,top:0,right:0,bottom:0});var a=[],c=l.left,p=l.top,g=l.bottom,v=l.right,x=r+v-c,b=n+g-p;return oN(e,b).forEach(function(P){a.push({type:"horizontal",pos:[c,Pi(P.pos-o+p,.1)],size:x,className:P.className,direction:""})}),oN(t,x).forEach(function(P){a.push({type:"vertical",pos:[Pi(P.pos-i+c,.1),p],size:b,className:P.className,direction:""})}),a}function Bce(e,t){if(!t.length)return[];var r=e.props.groupable,n=e.state,i=n.containerClientRect,o=n.rootMatrix,l=n.is3d,a=n.offsetDelta,c=l?4:3,p=Ut(lce(o,i,c),2),g=p[0],v=p[1],x=r?0:a[0],b=r?0:a[1];return t.map(function(P){var I=P.element.getBoundingClientRect(),k=I.left-g-x,M=I.top-v-b,O=M+I.height,F=k+I.width,N=Ut(uy(o,[k,M],c),2),$=N[0],j=N[1],U=Ut(uy(o,[F,O],c),2),H=U[0],Y=U[1];return Ft(Ft({},P),{rect:{left:$,right:H,top:j,bottom:Y,center:($+H)/2,middle:(j+Y)/2}})})}function Mb(e){var t=e.state,r=t.container,n=e.props.snapContainer||r;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var i=t.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==n){var l=Yd(n,!0);if(l){var a=u0(l),c=fN(t,[a.left-i.left,a.top-i.top]),p=fN(t,[a.right-i.right,a.bottom-i.bottom]);o.left=Pi(c[0],1e-5),o.top=Pi(c[1],1e-5),o.right=Pi(p[0],1e-5),o.bottom=Pi(p[1],1e-5)}}return t.snapContainer=n,t.snapOffset=o,t.guidelines=FT(e),t.enableSnap=!0,!0}function Sq(e,t,r,n,i,o){var l=lm(e,t,r,o?4:3),a=ol(l,n);return TI(l,ci(i,a))}function sN(e){return e?e/Hr(e):0}function zce(e,t,r,n,i,o){var l=o.fixedDirection,a=fce(r,l,n),c=SI(e,t,r,n),p=un(un([],Ut(Cce(e,t,a,n,i,o)),!1),Ut(yq(e,c,o)),!1),g=K_(p,0),v=K_(p,1);return{width:{isBound:g.isBound,offset:g.offset[0]},height:{isBound:v.isBound,offset:v.offset[1]}}}function jce(e,t,r,n,i,o,l,a,c){var p=ol(t,l),g=R2(e,a,{vertical:[p[0]],horizontal:[p[1]]}),v=g.horizontal.offset,x=g.vertical.offset;if(Pi(x,AT)||Pi(v,AT)){var b=Ut(of({datas:c,distX:-x,distY:-v}),2),P=b[0],I=b[1],k=Math.min(i||1/0,r+l[0]*P),M=Math.min(o||1/0,n+l[1]*I);return[k-r,M-n]}return[0,0]}function Cq(e,t,r,n,i,o,l,a){for(var c=$c(e.state),p=e.props.keepRatio,g=0,v=0,x=0;x<2;++x){var b=t(g,v),P=zce(e,b,i,p,l,a),I=P.width,k=P.height,M=I.isBound,O=k.isBound,F=I.offset,N=k.offset;if(x===1&&(M||(F=0),O||(N=0)),x===0&&l&&!M&&!O)return[0,0];if(p){var $=Hr(F)*(r?1/r:1),j=Hr(N)*(n?1/n:1),U=M&&O?$<j:O||!M&&$<j;U?F=r*N/n:N=n*F/r}g+=F,v+=N}if(!p&&i[0]&&i[1]){var H=Tce(e,c,i,o,a),Y=H.maxWidth,ae=H.maxHeight,ee=Ut(jce(e,t(g,v).map(function(oe){return oe.map(function(ue){return Pi(ue,AT)})}),r+g,n+v,Y,ae,i,l,a),2),F=ee[0],N=ee[1];g+=F,v+=N}return[g,v]}function s0(e){return e<0&&(e=e%360+360),e%=360,e}function qce(e,t){t=s0(t);var r=Math.floor(e/360),n=r*360+360-t,i=r*360+t;return Hr(e-n)<Hr(e-i)?n:i}function e5(e,t){e=s0(e),t=s0(t);var r=s0(e-t);return Math.min(r,360-r)}function $ce(e,t,r,n){var i,o=e.props,l=(i=o[uq])!==null&&i!==void 0?i:5,a=o[cq];if(Ty(e,"rotatable")){var c=t.pos1,p=t.pos2,g=t.pos3,v=t.pos4,x=t.origin,b=r*Math.PI/180,P=[c,p,g,v].map(function(N){return ci(N,x)}),I=P.map(function(N){return d1(N,b)}),k=un(un([],Ut(ice(e,P,I,x,r)),!1),Ut(vce(e,P,I,x,r)),!1);k.sort(function(N,$){return Hr(N-r)-Hr($-r)});var M=k.length>0;if(M)return{isSnap:M,dist:M?k[0]:r}}if(a?.length&&l){var O=a.slice().sort(function(N,$){return e5(N,n)-e5($,n)}),F=O[0];if(e5(F,n)<=l)return{isSnap:!0,dist:r+qce(n,F)-n}}return{isSnap:!1,dist:r}}function Vce(e,t,r,n,i,o,l){if(!Ty(e,"resizable"))return[0,0];var a=l.fixedDirection,c=l.nextAllMatrix,p=e.state,g=p.allMatrix,v=p.is3d;return Cq(e,function(x,b){return Sq(c||g,t+x,r+b,a,i,v)},t,r,n,i,o,l)}function Uce(e,t,r,n,i){if(!Ty(e,"scalable"))return[0,0];var o=i.startOffsetWidth,l=i.startOffsetHeight,a=i.fixedPosition,c=i.fixedDirection,p=i.is3d,g=Cq(e,function(v,x){return Sq(Vue(i,ma(t,[v/o,x/l])),o,l,c,a,p)},o,l,r,a,n,i);return[g[0]/o,g[1]/l]}function Gce(e,t){t.absolutePoses=$c(e.state)}function lN(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(n){var i=n.guideline;mc(t,function(o){return o.guideline===i})||(i.direction="",t.push({guideline:i,posInfo:r}))})}),t.map(function(r){var n=r.guideline,i=r.posInfo;return Ft(Ft({},n),{direction:i.direction})})}function uN(e,t,r,n,i,o){var l=bI(M2(e,o),t,r),a=l.vertical,c=l.horizontal,p=Dg();a.forEach(function(P){P.isBound&&(P.direction==="start"&&(p.left=!0),P.direction==="end"&&(p.right=!0),n.push({type:"bounds",pos:P.pos}))}),c.forEach(function(P){P.isBound&&(P.direction==="start"&&(p.top=!0),P.direction==="end"&&(p.bottom=!0),i.push({type:"bounds",pos:P.pos}))});var g=bce(e),v=g.boundMap,x=g.vertical,b=g.horizontal;return x.forEach(function(P){Vf(n,function(I){var k=I.type,M=I.pos;return k==="bounds"&&M===P})>=0||n.push({type:"bounds",pos:P})}),b.forEach(function(P){Vf(i,function(I){var k=I.type,M=I.pos;return k==="bounds"&&M===P})>=0||i.push({type:"bounds",pos:P})}),{boundMap:p,innerBoundMap:v}}var Hce=kI("",["resizable","scalable"]),Wce={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",uq,cq,dq,fq,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,n=r.top,i=r.left,o=r.pos1,l=r.pos2,a=r.pos3,c=r.pos4,p=r.snapRenderInfo,g=e.props.snapRenderThreshold,v=g===void 0?1:g;if(!p||!p.render||!Ty(e,""))return Og(e,"boundMap",Dg(),function(we){return JSON.stringify(we)}),Og(e,"innerBoundMap",Dg(),function(we){return JSON.stringify(we)}),[];r.guidelines=FT(e);var x=Math.min(o[0],l[0],a[0],c[0]),b=Math.min(o[1],l[1],a[1],c[1]),P=p.externalPoses||[],I=$c(e.state),k=[],M=[],O=[],F=[],N=[],$=Nc(I),j=$.width,U=$.height,H=$.top,Y=$.left,ae=$.bottom,ee=$.right,G={left:Y,right:ee,top:H,bottom:ae,center:(Y+ee)/2,middle:(H+ae)/2},ie=P.length>0,oe=ie?Nc(P):{};if(!p.request){if(p.direction&&N.push(dce(e,I,p.direction,v,v)),p.snap){var ue=Nc(I);p.center&&(ue.middle=(ue.top+ue.bottom)/2,ue.center=(ue.left+ue.right)/2),N.push(KD(e,ue,v,v))}ie&&(p.center&&(oe.middle=(oe.top+oe.bottom)/2,oe.center=(oe.left+oe.right)/2),N.push(KD(e,oe,v,v))),N.forEach(function(we){var De=we.vertical.posInfos,Re=we.horizontal.posInfos;k.push.apply(k,un([],Ut(De.filter(function($e){var Oe=$e.guidelineInfos;return Oe.some(function(it){var Ye=it.guideline;return!Ye.hide})}).map(function($e){return{type:"snap",pos:$e.pos}})),!1)),M.push.apply(M,un([],Ut(Re.filter(function($e){var Oe=$e.guidelineInfos;return Oe.some(function(it){var Ye=it.guideline;return!Ye.hide})}).map(function($e){return{type:"snap",pos:$e.pos}})),!1)),O.push.apply(O,un([],Ut(lN(De)),!1)),F.push.apply(F,un([],Ut(lN(Re)),!1))})}var de=uN(e,[Y,ee],[H,ae],k,M),Me=de.boundMap,ge=de.innerBoundMap;ie&&uN(e,[oe.left,oe.right],[oe.top,oe.bottom],k,M,p.externalBounds);var xe=un(un([],Ut(O),!1),Ut(F),!1),Ee=xe.filter(function(we){return we.element&&!we.gapRects}),Ae=xe.filter(function(we){return we.gapRects}).sort(function(we,De){return we.gap-De.gap});Rn(e,"onSnap",{guidelines:xe.filter(function(we){var De=we.element;return!De}),elements:Ee,gaps:Ae},!0);var fe=Og(e,"boundMap",Me,function(we){return JSON.stringify(we)},Dg()),Se=Og(e,"innerBoundMap",ge,function(we){return JSON.stringify(we)},Dg());return(Me===fe||ge===Se)&&Rn(e,"onBound",{bounds:Me,innerBounds:ge},!0),un(un(un(un(un(un([],Ut(Lce(e,Ee,[x,b],G,t)),!1),Ut(Rce(e,Ae,[x,b],G,t)),!1),Ut(aN(e,"horizontal",F,[i,n],G,t)),!1),Ut(aN(e,"vertical",O,[i,n],G,t)),!1),Ut(iN(e,"horizontal",M,x,n,j,0,t)),!1),Ut(iN(e,"vertical",k,b,i,U,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},Mb(e)},drag:function(e){var t=e.state;Mb(e)||(t.guidelines=FT(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(Hce(e,t)||OT(e,t))return!0;if(!t.isRequest&&t.inputEvent)return al(t.inputEvent.target,li("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,Mb(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,Mb(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function Xce(e,t){return[e[0]*t[0],e[1]*t[1]]}function li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return dle.apply(void 0,un([mI],Ut(e),!1))}function Eq(e){e()}function Yce(e){return!e||e==="none"?[1,0,0,1,0,0]:fd(e)?e:I0(e)}function l0(e,t,r){return W_(t,Gp(r,t),e,Gp(r.map(function(n){return-n}),t))}function Zce(e,t,r){if(t==="%"){var n=EI(e.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function Kce(e){var t=Jce(PI(e,":before"));return t.map(function(r,n){var i=c1(r),o=i.value,l=i.unit;return o*Zce(e,l,n===0)})}function Q_(e){return e?e.split(" "):["0","0"]}function Jce(e){return Q_(e.transformOrigin)}function Tq(e){var t=Vu(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var n=e.transform,i=n.baseVal;if(!i)return"";var o=i.length;if(!o)return"";for(var l=[],a=function(p){var g=i[p].matrix;l.push("matrix(".concat(["a","b","c","d","e","f"].map(function(v){return g[v]}).join(", "),")"))},c=0;c<o;++c)a(c);return l.join(" ")}return""}function A0(e,t,r,n,i){var o,l,a=sI(e)||Hh(e),c=!1,p,g;if(!e||r)p=e;else{var v=(o=e?.assignedSlot)===null||o===void 0?void 0:o.parentElement,x=e.parentElement;v?(c=!0,g=x,p=v):p=x}for(var b=!1,P=e===t||p===t,I="relative",k=1,M=parseFloat(i?.("zoom"))||1,O=i?.("position");p&&p!==a;){t===p&&(P=!0);var F=Vu(p),N=p.tagName.toLowerCase(),$=Tq(p),j=F("willChange"),U=parseFloat(F("zoom"))||1;if(I=F("position"),n&&U!==1){k=U;break}if(!r&&n&&M!==1&&O&&O!=="absolute"||N==="svg"||N==="foreignobject"||I!=="static"||$&&$!=="none"||j==="transform")break;var H=(l=e?.assignedSlot)===null||l===void 0?void 0:l.parentNode,Y=p.parentNode;H&&(c=!0,g=Y);var ae=Y;if(ae&&ae.nodeType===11){p=ae.host,b=!0,I=Vu(p)("position");break}p=ae,I="relative"}return{offsetZoom:k,hasSlot:c,parentSlotElement:g,isCustomElement:b,isStatic:I==="static",isEnd:P||!p||p===a,offsetParent:p||a}}function Qce(e,t){var r,n=e.tagName.toLowerCase(),i=e.offsetLeft,o=e.offsetTop,l=Vu(e),a=rI(i),c=!a,p,g;return!c&&(n!=="svg"||e.ownerSVGElement)?(p=Hj?Kce(e):Q_(l("transformOrigin")).map(function(v){return parseFloat(v)}),g=p.slice(),c=!0,n==="svg"?(i=0,o=0):(r=Ut(rde(e,p,e===t&&t.tagName.toLowerCase()==="g"),4),i=r[0],o=r[1],p[0]=r[2],p[1]=r[3])):(p=Q_(l("transformOrigin")).map(function(v){return parseFloat(v)}),g=p.slice()),{tagName:n,isSVG:a,hasOffset:c,offset:[i||0,o||0],origin:p,targetOrigin:g}}function Pq(e,t){var r=Vu(e),n=Vu(Hh(e)),i=n("position");if(!t&&(!i||i==="static"))return[0,0];var o=parseInt(n("marginLeft"),10),l=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(l=0),(r("left")!=="auto"||r("right")!=="auto")&&(o=0)),[o,l]}function BT(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=hd(r,3,4))})}function ede(e){for(var t=e.parentElement,r=!1,n=Hh(e);t;){var i=PI(t).transform;if(i&&i!=="none"){r=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:r}}function D2(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(Bj(e,!t).join(","),")")}function EI(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||r,clientWidth:t,clientHeight:r}}function tde(e,t){var r,n=EI(e),i=n.width,o=n.height,l=n.clientWidth,a=n.clientHeight,c=l/i,p=a/o,g=e.preserveAspectRatio.baseVal,v=g.align,x=g.meetOrSlice,b=[0,0],P=[c,p],I=[0,0];if(v!==1){var k=(v-2)%3,M=Math.floor((v-2)/3);b[0]=i*k/2,b[1]=o*M/2;var O=x===2?Math.max(p,c):Math.min(c,p);P[0]=O,P[1]=O,I[0]=(l-i)/2*k,I[1]=(a-o)/2*M}var F=uI(P,t);return r=Ut(I,2),F[t*(t-1)]=r[0],F[t*(t-1)+1]=r[1],l0(F,t,b)}function rde(e,t,r){var n=e.tagName.toLowerCase();if(!e.getBBox||!r&&n==="g")return[0,0,0,0];var i=Vu(e),o=i("transform-box")==="fill-box",l=e.getBBox(),a=EI(e.ownerSVGElement),c=l.x,p=l.y;n==="foreignobject"&&!c&&!p&&(c=parseFloat(e.getAttribute("x"))||0,p=parseFloat(e.getAttribute("y"))||0);var g=c-a.x,v=p-a.y,x=o?t[0]:t[0]-g,b=o?t[1]:t[1]-v;return[g,v,x,b]}function Xo(e,t,r){return cu(e,Up(t,r),r)}function lm(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(i){return Xo(e,i,n)})}function Nc(e){var t=e.map(function(p){return p[0]}),r=e.map(function(p){return p[1]}),n=Math.min.apply(Math,un([],Ut(t),!1)),i=Math.min.apply(Math,un([],Ut(r),!1)),o=Math.max.apply(Math,un([],Ut(t),!1)),l=Math.max.apply(Math,un([],Ut(r),!1)),a=o-n,c=l-i;return{left:n,top:i,right:o,bottom:l,width:a,height:c}}function cN(e,t,r,n){var i=lm(e,t,r,n);return Nc(i)}function nde(e,t,r,n,i){var o,l=e.target,a=e.origin,c=t.matrix,p=kq(l),g=p.offsetWidth,v=p.offsetHeight,x=r.getBoundingClientRect(),b=[0,0];r===Hh(r)&&(b=Pq(l,!0));for(var P=l.getBoundingClientRect(),I=P.left-x.left+r.scrollLeft-(r.clientLeft||0)+b[0],k=P.top-x.top+r.scrollTop-(r.clientTop||0)+b[1],M=P.width,O=P.height,F=W_(n,i,c),N=cN(F,g,v,n),$=N.left,j=N.top,U=N.width,H=N.height,Y=Xo(F,a,n),ae=ci(Y,[$,j]),ee=[I+ae[0]*M/U,k+ae[1]*O/H],G=[0,0],ie=0;++ie<10;){var oe=Qd(i,n);o=Ut(ci(Xo(oe,ee,n),Xo(oe,Y,n)),2),G[0]=o[0],G[1]=o[1];var ue=W_(n,i,Gp(G,n),c),de=cN(ue,g,v,n),Me=de.left,ge=de.top,xe=Me-I,Ee=ge-k;if(Hr(xe)<2&&Hr(Ee)<2)break;ee[0]-=xe,ee[1]-=Ee}return G.map(function(Ae){return Math.round(Ae)})}function ide(e,t,r){var n=e.length===16,i=n?4:3,o=t.map(function(c){return Xo(e,c,i)}),l=r.left,a=r.top;return o.map(function(c){return[c[0]+l,c[1]+a]})}function qc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Iq(e,t){return qc([t[0]-e[0],t[1]-e[1]])}function Fv(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=Is(e,t));var i=Iq(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function ex(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,o=r.reduce(function(a,c){return a+c[0]},0)/i,l=r.reduce(function(a,c){return a+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(l,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function Wp(e,t){var r=e[t];return fd(r)?Ft(Ft({},e),r):e}function kq(e){var t=e&&!rI(e.offsetWidth),r=0,n=0,i=0,o=0,l=0,a=0,c=0,p=0,g=0,v=0,x=0,b=0,P=1/0,I=1/0,k=1/0,M=1/0,O=0,F=0,N=!1;if(e)if(!t&&e.ownerSVGElement){var $=e.getBBox();N=!0,r=$.width,n=$.height,l=r,a=n,c=r,p=n,i=r,o=n}else{var j=Vu(e),U=e.style,H=j("boxSizing")==="border-box",Y=parseFloat(j("borderLeftWidth"))||0,ae=parseFloat(j("borderRightWidth"))||0,ee=parseFloat(j("borderTopWidth"))||0,G=parseFloat(j("borderBottomWidth"))||0,ie=parseFloat(j("paddingLeft"))||0,oe=parseFloat(j("paddingRight"))||0,ue=parseFloat(j("paddingTop"))||0,de=parseFloat(j("paddingBottom"))||0,Me=ie+oe,ge=ue+de,xe=Y+ae,Ee=ee+G,Ae=Me+xe,fe=ge+Ee,Se=j("position"),we=0,De=0;if("clientLeft"in e){var Re=null;if(Se==="absolute"){var $e=A0(e,Hh(e));Re=$e.offsetParent}else Re=e.parentElement;if(Re){var Oe=Vu(Re);we=parseFloat(Oe("width")),De=parseFloat(Oe("height"))}}g=Math.max(Me,Qa(j("minWidth"),we)||0),v=Math.max(ge,Qa(j("minHeight"),De)||0),P=Qa(j("maxWidth"),we),I=Qa(j("maxHeight"),De),isNaN(P)&&(P=1/0),isNaN(I)&&(I=1/0),O=Qa(U.width,0)||0,F=Qa(U.height,0)||0,l=parseFloat(j("width"))||0,a=parseFloat(j("height"))||0,c=Hr(l-O)<1?_T(g,O||l,P):l,p=Hr(a-F)<1?_T(v,F||a,I):a,r=c,n=p,i=c,o=p,H?(k=P,M=I,x=g,b=v,c=r-Ae,p=n-fe):(k=P+Ae,M=I+fe,x=g+Ae,b=v+fe,r=c+Ae,n=p+fe),i=c+Me,o=p+ge}return{svg:N,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:o,contentWidth:c,contentHeight:p,inlineCSSWidth:O,inlineCSSHeight:F,cssWidth:l,cssHeight:a,minWidth:g,minHeight:v,maxWidth:P,maxHeight:I,minOffsetWidth:x,minOffsetHeight:b,maxOffsetWidth:k,maxOffsetHeight:M}}function Aq(e,t){return Is(t>0?e[0]:e[1],t>0?e[1]:e[0])}function Lb(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Mq(e,t){var r=e===Hh(e)||e===sI(e),n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=Vu(e)("overflow")!=="visible",Ft(Ft({},t),n)}function t5(e,t,r,n){var i=e.left,o=e.right,l=e.top,a=e.bottom,c=t.top,p=t.left,g={left:p+i,top:c+l,right:p+o,bottom:c+a,width:o-i,height:a-l};return r&&n?Mq(r,g):g}function u0(e,t){var r=0,n=0,i=0,o=0;if(e){var l=e.getBoundingClientRect();r=l.left,n=l.top,i=l.width,o=l.height}var a={left:r,top:n,width:i,height:o,right:r+i,bottom:n+o};return e&&t?Mq(e,a):a}function ade(e){var t=e.props,r=t.groupable,n=t.svgOrigin,i=e.getState(),o=i.offsetWidth,l=i.offsetHeight,a=i.svg,c=i.transformOrigin;return!r&&a&&n?MI(n,o,l):c}function Lq(e,t,r,n){var i;if(e)i=e;else if(t)i=[0,0];else{var o=r.target;i=Rq(o,n)}return i}function Rq(e,t){if(e){var r=e.getAttribute("data-rotation")||"",n=e.getAttribute("data-direction");if(t.deg=r,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function TI(e,t){return[ma(t,e[0]),ma(t,e[1]),ma(t,e[2]),ma(t,e[3])]}function $c(e){var t=e.left,r=e.top,n=e.pos1,i=e.pos2,o=e.pos3,l=e.pos4;return TI([n,i,o,l],[t,r])}function zT(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function Ng(e,t){var r=t?"controlGesto":"targetGesto",n=e[r];n?.isIdle()===!1&&zT(e,t),n?.unset(),e[r]=null}function Tu(e,t){if(t){var r=Ey(t);r.nextStyle=Ft(Ft({},r.nextStyle),e)}return{style:e,cssText:Sy(e).map(function(n){return"".concat(Sle(n,"-"),": ").concat(e[n],";")}).join("")}}function Dq(e,t,r){var n=t.afterTransform||t.transform;return Ft(Ft({},Tu(Ft(Ft(Ft({},e.style),t.style),{transform:n}),r)),{afterTransform:n,transform:e.transform})}function Ri(e,t,r,n){var i=t.datas;i.datas||(i.datas={});var o=Ft(Ft({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:i.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var l;(l=t.stop)===null||l===void 0||l.call(t)}});return i.isStartEvent?n||(i.lastEvent=o):i.isStartEvent=!0,o}function gc(e,t,r){var n=t.datas,i="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),Ft(Ft({isDrag:i},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function N2(e,t,r){e._emitter.on(t,r)}function Rn(e,t,r,n,i){return e.triggerEvent(t,r,n,i)}function PI(e,t){return Ah(e).getComputedStyle(e,t)}function Rb(e,t,r){var n={},i={};return e.filter(function(o){var l=o.name;if(n[l]||!t.some(function(a){return o[a]}))return!1;if(!r&&o.ableGroup){if(i[o.ableGroup])return!1;i[o.ableGroup]=!0}return n[l]=!0,!0})}function jT(e,t){return e===t||e==null&&t==null}function dN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var i=e[n];if(!rI(i))return i}return e[r]}function Nq(e,t){var r=[],n=[];return e.forEach(function(i,o){var l=t(i,o,e),a=n.indexOf(l),c=r[a]||[];a===-1&&(n.push(l),r.push(c)),c.push(i)}),r}function ode(e,t){var r=[],n={};return e.forEach(function(i,o){var l=t(i,o,e),a=n[l];a||(a=[],n[l]=a,r.push(a)),a.push(i)}),r}function Oq(e){return e.reduce(function(t,r){return t.concat(r)},[])}function ly(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return Hr(n)-Hr(r)}),e[0]}function uy(e,t,r){return cu(Qd(e,r),Up(t,r),r)}function sde(e,t){var r,n=e.is3d,i=e.rootMatrix,o=n?4:3;return r=Ut(uy(i,[t.distX,t.distY],o),2),t.distX=r[0],t.distY=r[1],t}function Ec(e,t,r,n){if(!r[0]&&!r[1])return t;var i=Xo(e,[sN(r[0]||1),0],n),o=Xo(e,[0,sN(r[1]||1)],n),l=Xo(e,[r[0]/qc(i),r[1]/qc(o)],n);return ma(t,l)}function nd(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function tx(e){return Hr(e)<=Iu?0:e}function II(e){return function(t){if(!t.isDragging(e))return"";var r=Zue(t,e),n=r.deg;return n?li("view-control-rotation".concat(n)):""}}function kI(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return t.some(function(o){return n.requestAble===o})?n.parentDirection:!1;var i=n.inputEvent.target;return al(i,li("direction"))&&(!e||al(i,li(e)))}}function lde(e,t,r){var n,i=ay(e,{"x%":function($){return $/100*t.offsetWidth},"y%":function($){return $/100*t.offsetHeight}}),o=e.slice(0,r<0?void 0:r),l=e.slice(0,r<0?void 0:r+1),a=e[r]||"",c=r<0?[]:e.slice(r),p=r<0?[]:e.slice(r+1),g=i.slice(0,r<0?void 0:r),v=i.slice(0,r<0?void 0:r+1),x=(n=i[r])!==null&&n!==void 0?n:ay([""])[0],b=r<0?[]:i.slice(r),P=r<0?[]:i.slice(r+1),I=x?[x]:[],k=cg(g),M=cg(v),O=cg(b),F=cg(P),N=eo(k,O,4);return{transforms:e,beforeFunctionMatrix:k,beforeFunctionMatrix2:M,targetFunctionMatrix:cg(I),afterFunctionMatrix:O,afterFunctionMatrix2:F,allFunctionMatrix:N,beforeFunctions:g,beforeFunctions2:v,targetFunction:I[0],afterFunctions:b,afterFunctions2:P,beforeFunctionTexts:o,beforeFunctionTexts2:l,targetFunctionText:a,afterFunctionTexts:c,afterFunctionTexts2:p}}function ude(e){return!e||!fd(e)||lI(e)?!1:Cl(e)||"length"in e}function Yd(e,t){return e?lI(e)?e:Yf(e)?t?document.querySelector(e):e:nI(e)?e():Nj(e)?e:"current"in e?e.current:e:null}function AI(e,t){if(!e)return[];var r=ude(e)?[].slice.call(e):[e];return r.reduce(function(n,i){return Yf(i)&&t?un(un([],Ut(n),!1),Ut([].slice.call(document.querySelectorAll(i))),!1):(Cl(i)?n.push(AI(i,t)):n.push(Yd(i,t)),n)},[])}function cde(e,t,r){var n=Is(e,t)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function fN(e,t){var r=e.rootMatrix,n=e.is3d,i=n?4:3,o=Qd(r,i);return n||(o=hd(o,3,4)),o[12]=0,o[13]=0,o[14]=0,zle(o,t)}function Fq(e,t,r,n,i){var o=Ut(e,2),l=o[0],a=o[1],c=0,p=0;if(i&&l&&a){var g=Is([0,0],t),v=Is([0,0],n),x=qc(t),b=Math.cos(g-v)*x;if(!n[0])p=b,c=p*r;else if(!n[1])c=b,p=c/r;else{var P=n[0]*l,I=n[1]*a,k=Math.atan2(P+t[0],I+t[1]),M=Math.atan2(P,I);k<0&&(k+=Math.PI*2),M<0&&(M+=Math.PI*2);var O=0;Hr(k-M)<Math.PI/2||Hr(k-M)>Math.PI/2*3||(M+=Math.PI),O=k-M,O>Math.PI*2?O-=Math.PI*2:O>Math.PI?O=2*Math.PI-O:O<-Math.PI&&(O=-2*Math.PI-O);var F=qc([P+t[0],I+t[1]])*Math.cos(O);c=F*Math.sin(M)-P,p=F*Math.cos(M)-I,n[0]<0&&(c*=-1),n[1]<0&&(p*=-1)}}else c=n[0]*t[0],p=n[1]*t[1];return[c,p]}function Bq(e,t,r,n){var i,o=r.ratio,l=r.startOffsetWidth,a=r.startOffsetHeight,c=0,p=0,g=n.distX,v=n.distY,x=n.pinchScale,b=n.parentDistance,P=n.parentDist,I=n.parentScale,k=r.fixedDirection,M=[0,1].map(function(U){return Hr(e[U]-k[U])}),O=[0,1].map(function(U){var H=M[U];return H!==0&&(H=2/H),H});if(P)c=P[0],p=P[1],t&&(c?p||(p=c/o):c=p*o);else if(T0(x))c=(x-1)*l,p=(x-1)*a;else if(I)c=(I[0]-1)*l,p=(I[1]-1)*a;else if(b){var F=l*M[0],N=a*M[1],$=qc([F,N]);c=b/$*F*O[0],p=b/$*N*O[1]}else{var j=of({datas:r,distX:g,distY:v});j=O.map(function(U,H){return j[H]*U}),i=Ut(Fq([l,a],j,o,e,t),2),c=i[0],p=i[1]}return{distWidth:c,distHeight:p}}function qT(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=Ut(e.split(" "),2),n=r[0],i=r[1],o=qT(n||""),l=qT(i||""),a=Ft(Ft({},o),l),c={x:"50%",y:"50%"};return a.x&&(c.x=a.x),a.y&&(c.y=a.y),a.value&&(a.x&&!a.y&&(c.y=a.value),!a.x&&a.y&&(c.x=a.value)),c}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function MI(e,t,r){var n=qT(e,!0),i=n.x,o=n.y;return[Qa(i,t)||0,Qa(o,r)||0]}function dde(e,t,r){var n=e.map(function(o){return ci(o,t)}),i=n.map(function(o){return d1(o,r)});return{prev:n,next:i,result:i.map(function(o){return ma(o,t)})}}function zq(e,t){return e.length===t.length&&e.every(function(r,n){var i=t[n],o=Cl(r),l=Cl(i);return o&&l?zq(r,i):!o&&!l?r===i:!1})}function Og(e,t,r,n,i){var o=e._store,l=o[t];if(!(t in o))if(i!=null)o[t]=i,l=i;else return o[t]=r,r;return l===r||n(l)===n(r)?l:(o[t]=r,r)}function Eu(e){return e>=0?1:-1}function Hr(e){return Math.abs(e)}function r5(e,t){return Ple(e).map(function(r){return t(r)})}function jq(e){return T0(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var fde=p1("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,i=t.angle,o=t.originalDatas,l=e.props,a=l.pinchable,c=l.ables;if(!a)return!1;var p="onPinch".concat(n?"Group":"","Start"),g="drag".concat(n?"Group":"","ControlStart"),v=(a===!0?e.controlAbles:c.filter(function(I){return a.indexOf(I.name)>-1})).filter(function(I){return I.canPinch&&I[g]}),x=Ri(e,t,{});n&&(x.targets=n);var b=Rn(e,p,x);r.isPinch=b!==!1,r.ables=v;var P=r.isPinch;return P?(v.forEach(function(I){if(o[I.name]=o[I.name]||{},!!I[g]){var k=Ft(Ft({},t),{datas:o[I.name],parentRotate:i,isPinch:!0});I[g](e,k)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},P):!1},pinch:function(e,t){var r=t.datas,n=t.scale,i=t.distance,o=t.originalDatas,l=t.inputEvent,a=t.targets,c=t.angle;if(r.isPinch){var p=i*(1-1/n),g=Ri(e,t,{});a&&(g.targets=a);var v="onPinch".concat(a?"Group":"");Rn(e,v,g);var x=r.ables,b="drag".concat(a?"Group":"","Control");return x.forEach(function(P){P[b]&&P[b](e,Ft(Ft({},t),{datas:o[P.name],inputEvent:l,resolveMatrix:!0,pinchScale:n,parentDistance:p,parentRotate:c,isPinch:!0}))}),g}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.targets,l=t.originalDatas;if(r.isPinch){var a="onPinch".concat(o?"Group":"","End"),c=gc(e,t,{isDrag:n});o&&(c.targets=o),Rn(e,a,c);var p=r.ables,g="drag".concat(o?"Group":"","ControlEnd");return p.forEach(function(v){v[g]&&v[g](e,Ft(Ft({},t),{isDrag:n,datas:l[v.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,Ft(Ft({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,Ft(Ft({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,Ft(Ft({},t),{targets:e.props.targets}))}}),hN=kI("scalable"),hde={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:oq("scalable"),dragControlCondition:hN,viewClassName:II("scalable"),dragControlStart:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.parentDirection,l=Lq(o,n,i,r),a=e.state,c=a.width,p=a.height,g=a.targetTransform,v=a.target,x=a.pos1,b=a.pos2,P=a.pos4;if(!l||!v)return!1;n||sm(e,t),r.datas={},r.transform=g,r.prevDist=[1,1],r.direction=l,r.startOffsetWidth=c,r.startOffsetHeight=p,r.startValue=[1,1];var I=!l[0]&&!l[1]||l[0]||!l[1];A2(e,t,"scale"),r.isWidth=I;function k(j){r.ratio=j&&isFinite(j)?j:0}r.startPositions=$c(e.state);function M(j){var U=vq(r.startPositions,j);r.fixedDirection=U.fixedDirection,r.fixedPosition=U.fixedPosition,r.fixedOffset=U.fixedOffset}r.setFixedDirection=M,k(Nf(x,b)/Nf(b,P)),M([-l[0],-l[1]]);var O=function(j){r.minScaleSize=j},F=function(j){r.maxScaleSize=j};O([-1/0,-1/0]),F([1/0,1/0]);var N=Ri(e,t,Ft(Ft({direction:l,set:function(j){r.startValue=j},setRatio:k,setFixedDirection:M,setMinScaleSize:O,setMaxScaleSize:F},k2(e,t)),{dragStart:Cu.dragStart(e,new oy().dragStart([0,0],t))})),$=Rn(e,"onScaleStart",N);return r.startFixedDirection=r.fixedDirection,$!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:l}),r.isScale?N:!1},dragControl:function(e,t){P2(e,t,"scale");var r=t.datas,n=t.parentKeepRatio,i=t.parentFlag,o=t.isPinch,l=t.dragClient,a=t.isRequest,c=t.useSnap,p=t.resolveMatrix,g=r.prevDist,v=r.direction,x=r.startOffsetWidth,b=r.startOffsetHeight,P=r.isScale,I=r.startValue,k=r.isWidth,M=r.ratio;if(!P)return!1;var O=e.props,F=O.throttleScale,N=O.parentMoveable,$=v;!v[0]&&!v[1]&&($=[1,1]);var j=M&&(n??O.keepRatio)||!1,U=e.state,H=[I[0],I[1]];function Y(){var rt=Bq($,j,r,t),Ie=rt.distWidth,It=rt.distHeight,at=x?(x+Ie)/x:1,je=b?(b+It)/b:1;I[0]||(H[0]=Ie/x),I[1]||(H[1]=It/b);var Ht=($[0]||j?at:1)*H[0],Wt=($[1]||j?je:1)*H[1];return Ht===0&&(Ht=Eu(g[0])*Ib),Wt===0&&(Wt=Eu(g[1])*Ib),[Ht,Wt]}var ae=Y();if(!o&&e.props.groupable){var ee=U.snapRenderInfo||{},G=ee.direction;Cl(G)&&(G[0]||G[1])&&(U.snapRenderInfo={direction:v,request:t.isRequest})}Rn(e,"onBeforeScale",Ri(e,t,{scale:ae,setFixedDirection:function(rt){return r.setFixedDirection(rt),ae=Y(),ae},startFixedDirection:r.startFixedDirection,setScale:function(rt){ae=rt}},!0));var ie=[ae[0]/H[0],ae[1]/H[1]],oe=l,ue=[0,0],de=Eu(ie[0]*ie[1]),Me=!l&&!i&&o;if(Me||p?oe=vI(e,r.targetAllTransform,[0,0],[0,0],r):l||(oe=r.fixedPosition),o||(ue=Uce(e,ie,v,!c&&a,r)),j){$[0]&&$[1]&&ue[0]&&ue[1]&&(Math.abs(ue[0]*x)>Math.abs(ue[1]*b)?ue[1]=0:ue[0]=0);var ge=!ue[0]&&!ue[1];if(ge&&(k?ie[0]=Pi(ie[0]*H[0],F)/H[0]:ie[1]=Pi(ie[1]*H[1],F)/H[1]),$[0]&&!$[1]||ue[0]&&!ue[1]||ge&&k){ie[0]+=ue[0];var xe=x*ie[0]*H[0]/M;ie[1]=Eu(de*ie[0])*Hr(xe/b/H[1])}else if(!$[0]&&$[1]||!ue[0]&&ue[1]||ge&&!k){ie[1]+=ue[1];var Ee=b*ie[1]*H[1]*M;ie[0]=Eu(de*ie[1])*Hr(Ee/x/H[0])}}else ie[0]+=ue[0],ie[1]+=ue[1],ue[0]||(ie[0]=Pi(ie[0]*H[0],F)/H[0]),ue[1]||(ie[1]=Pi(ie[1]*H[1],F)/H[1]);ie[0]===0&&(ie[0]=Eu(g[0])*Ib),ie[1]===0&&(ie[1]=Eu(g[1])*Ib),ae=Xce(ie,[H[0],H[1]]);var Ae=[x,b],fe=[x*ae[0],b*ae[1]];fe=Lj(fe,r.minScaleSize,r.maxScaleSize,j?M:!1),ae=r5(2,function(rt){return Ae[rt]?fe[rt]/Ae[rt]:fe[rt]}),ie=r5(2,function(rt){return ae[rt]/H[rt]});var Se=r5(2,function(rt){return g[rt]?ie[rt]/g[rt]:ie[rt]}),we="scale(".concat(ie.join(", "),")"),De="scale(".concat(ae.join(", "),")"),Re=I2(r,De,we),$e=!I[0]||!I[1],Oe=Uue(e,$e?De:we,r.fixedDirection,oe,r.fixedOffset,r,$e),it=Me?Oe:ci(Oe,r.prevInverseDist||[0,0]);if(r.prevDist=ie,r.prevInverseDist=Oe,ae[0]===g[0]&&ae[1]===g[1]&&it.every(function(rt){return!rt})&&!N&&!Me)return!1;var Ye=Ri(e,t,Ft({offsetWidth:x,offsetHeight:b,direction:v,scale:ae,dist:ie,delta:Se,isPinch:!!o},eq(e,Re,it,o,t)));return Rn(e,"onScale",Ye),Ye},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var n=gc(e,t,{});return Rn(e,"onScaleEnd",n),n},dragGroupControlCondition:hN,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,t);if(!n)return!1;var i=ud(e,"resizable",t);r.moveableScale=e.scale;var o=Of(e,this,"dragControlStart",t,function(p,g){return Z_(e,p,r,g)}),l=function(p){n.setFixedDirection(p),o.forEach(function(g,v){g.setFixedDirection(p),Z_(e,g.moveable,r,i[v])})};r.setFixedDirection=l;var a=Ft(Ft({},n),{targets:e.props.targets,events:o,setFixedDirection:l}),c=Rn(e,"onScaleGroupStart",a);return r.isScale=c!==!1,r.isScale?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){N2(e,"onBeforeScale",function(g){Rn(e,"onBeforeScaleGroup",Ri(e,t,Ft(Ft({},g),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=n.dist,o=r.moveableScale;e.scale=[i[0]*o[0],i[1]*o[1]];var l=e.props.keepRatio,a=r.fixedPosition,c=Of(e,this,"dragControl",t,function(g,v){var x=Ut(cu(f1(e.rotation/180*Math.PI,3),[v.datas.originalX*i[0],v.datas.originalY*i[1],1],3),2),b=x[0],P=x[1];return Ft(Ft({},v),{parentDist:null,parentScale:i,parentKeepRatio:l,dragClient:ma(a,[b,P])})}),p=Ft({targets:e.props.targets,events:c},n);return Rn(e,"onScaleGroup",p),p}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(e,t);var i=Of(e,this,"dragControlEnd",t),o=gc(e,t,{targets:e.props.targets,events:i});return Rn(e,"onScaleGroupEnd",o),r}},request:function(){var e={},t=0,r=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:e,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return t+=i.deltaWidth,r+=i.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}}};function vh(e,t){return e.map(function(r,n){return H_(r,t[n],1,2)})}function pN(e,t,r){var n=Is(e,t),i=Is(e,r),o=i-n;return o>=0?o:o+2*Math.PI}function pde(e,t){var r=pN(e[0],e[1],e[2]),n=pN(t[0],t[1],t[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}var mde={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:II("warpable"),render:function(e,t){var r=e.props,n=r.resizable,i=r.scalable,o=r.warpable,l=r.zoom;if(n||i||!o)return[];var a=e.state,c=a.pos1,p=a.pos2,g=a.pos3,v=a.pos4,x=vh(c,p),b=vh(p,c),P=vh(c,g),I=vh(g,c),k=vh(g,v),M=vh(v,g),O=vh(p,v),F=vh(v,p);return un([t.createElement("div",{className:li("line"),key:"middeLine1",style:Fv(x,k,l)}),t.createElement("div",{className:li("line"),key:"middeLine2",style:Fv(b,M,l)}),t.createElement("div",{className:li("line"),key:"middeLine3",style:Fv(P,O,l)}),t.createElement("div",{className:li("line"),key:"middeLine4",style:Fv(I,F,l)})],Ut(sq(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return al(r,li("direction"))&&al(r,li("warpable"))},dragControlStart:function(e,t){var r=t.datas,n=t.inputEvent,i=e.props.target,o=n.target,l=Rq(o,r);if(!l||!i)return!1;var a=e.state,c=a.transformOrigin,p=a.is3d,g=a.targetTransform,v=a.targetMatrix,x=a.width,b=a.height,P=a.left,I=a.top;r.datas={},r.targetTransform=g,r.warpTargetMatrix=p?v:hd(v,3,4),r.targetInverseMatrix=Oj(Qd(r.warpTargetMatrix,4),3,4),r.direction=l,r.left=P,r.top=I,r.poses=[[0,0],[x,0],[0,b],[x,b]].map(function(O){return ci(O,c)}),r.nextPoses=r.poses.map(function(O){var F=Ut(O,2),N=F[0],$=F[1];return cu(r.warpTargetMatrix,[N,$,0,1],4)}),r.startValue=So(4),r.prevMatrix=So(4),r.absolutePoses=$c(a),r.posIndexes=Qj(l),sm(e,t),A2(e,t,"matrix3d"),a.snapRenderInfo={request:t.isRequest,direction:l};var k=Ri(e,t,Ft({set:function(O){r.startValue=O}},k2(e,t))),M=Rn(e,"onWarpStart",k);return M!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,n=t.isRequest,i=t.distX,o=t.distY,l=r.targetInverseMatrix,a=r.prevMatrix,c=r.isWarp,p=r.startValue,g=r.poses,v=r.posIndexes,x=r.absolutePoses;if(!c)return!1;if(P2(e,t,"matrix3d"),Ty(e,"warpable")){var b=v.map(function(Y){return x[Y]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var P=R2(e,n,{horizontal:b.map(function(Y){return Y[1]+o}),vertical:b.map(function(Y){return Y[0]+i})}),I=P.horizontal,k=P.vertical;o-=I.offset,i-=k.offset}var M=of({datas:r,distX:i,distY:o},!0),O=r.nextPoses.slice();if(v.forEach(function(Y){O[Y]=ma(O[Y],M)}),!Rue.every(function(Y){return pde(Y.map(function(ae){return g[ae]}),Y.map(function(ae){return O[ae]}))}))return!1;var F=cI(g[0],g[2],g[1],g[3],O[0],O[2],O[1],O[3]);if(!F.length)return!1;var N=eo(l,F,4),$=Kj(r,N,!0),j=eo(Qd(a,4),$,4);r.prevMatrix=$;var U=eo(p,$,4),H=I2(r,"matrix3d(".concat(U.join(", "),")"),"matrix3d(".concat($.join(", "),")"));return yI(t,H),Rn(e,"onWarp",Ri(e,t,Ft({delta:j,matrix:U,dist:$,multiply:eo,transform:H},Tu({transform:H},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,n=t.isDrag;return r.isWarp?(r.isWarp=!1,Rn(e,"onWarpEnd",gc(e,t,{})),n):!1}},gde=li("area-pieces"),Db=li("area-piece"),qq=li("avoid"),yde=li("view-dragging");function n5(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,i=r.height;Dj(t,qq),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function mN(e){return e.createElement("div",{key:"area_pieces",className:gde},e.createElement("div",{className:Db}),e.createElement("div",{className:Db}),e.createElement("div",{className:Db}),e.createElement("div",{className:Db}))}var $q={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,n=r.target,i=r.dragArea,o=r.groupable,l=r.passDragArea,a=e.getState(),c=a.width,p=a.height,g=a.renderPoses,v=l?li("area","pass"):li("area");if(o)return[t.createElement("div",{key:"area",ref:Fp(e,"areaElement"),className:v}),mN(t)];if(!n||!i)return[];var x=cI([0,0],[c,0],[0,p],[c,p],g[0],g[1],g[2],g[3]),b=x.length?D2(x,!0):"none";return[t.createElement("div",{key:"area",ref:Fp(e,"areaElement"),className:v,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(p,"px"),transformOrigin:"0 0",transform:b}}),mN(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,i=t.clientY,o=t.inputEvent;if(!o)return!1;r.isDragArea=!1;var l=e.areaElement,a=e.state,c=a.moveableClientRect,p=a.renderPoses,g=a.rootMatrix,v=a.is3d,x=c.left,b=c.top,P=Nc(p),I=P.left,k=P.top,M=P.width,O=P.height,F=v?4:3,N=Ut(uy(g,[n-x,i-b],F),2),$=N[0],j=N[1];$-=I,j-=k;var U=[{left:I,top:k,width:M,height:j-10},{left:I,top:k,width:$-10,height:O},{left:I,top:k+j+10,width:M,height:O-j-10},{left:I+$+10,top:k,width:M-$-10,height:O}],H=[].slice.call(l.nextElementSibling.children);U.forEach(function(Y,ae){H[ae].style.cssText="left: ".concat(Y.left,"px;top: ").concat(Y.top,"px; width: ").concat(Y.width,"px; height: ").concat(Y.height,"px;")}),Rj(l,qq),a.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,n5(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||n5(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){n5(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&Mj(function(){t.disableNativeEvent=!1})}},vde=p1("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,n=r.zoom,i=r.svgOrigin,o=r.groupable,l=e.getState(),a=l.beforeOrigin,c=l.rotation,p=l.svg,g=l.allMatrix,v=l.is3d,x=l.left,b=l.top,P=l.offsetWidth,I=l.offsetHeight,k;if(!o&&p&&i){var M=Ut(MI(i,P,I),2),O=M[0],F=M[1],N=v?4:3,$=Xo(g,[O,F],N);k=ex(c,n,ci($,[x,b]))}else k=ex(c,n,a);return[t.createElement("div",{className:li("control","origin"),style:k,key:"beforeOrigin"})]}});function bde(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var _de={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,n=r.scrollContainer,i=n===void 0?e.getContainer():n,o=r.scrollOptions,l=new Jle,a=Yd(i,!0);t.datas.dragScroll=l,e.state.dragScroll=l;var c=t.isControl?"controlGesto":"targetGesto",p=t.targets;l.on("scroll",function(g){var v=g.container,x=g.direction,b=Ri(e,t,{scrollContainer:v,direction:x}),P=p?"onScrollGroup":"onScroll";p&&(b.targets=p),Rn(e,P,b)}).on("move",function(g){var v=g.offsetX,x=g.offsetY,b=g.inputEvent;e[c].scrollBy(v,x,b.inputEvent,!1)}).on("scrollDrag",function(g){var v=g.next;v(e[c].getCurrentEvent())}),l.dragStart(t,Ft({container:a},o))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var n=e.props,i=n.scrollContainer,o=i===void 0?e.getContainer():i,l=n.scrollThreshold,a=l===void 0?0:l,c=n.scrollThrottleTime,p=c===void 0?0:c,g=n.getScrollPosition,v=g===void 0?bde:g,x=n.scrollOptions;return r.drag(t,Ft({container:o,threshold:a,throttleTime:p,getScrollPosition:function(b){return v({scrollContainer:b.container,direction:b.direction})}},x)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,Ft(Ft({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,Ft(Ft({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,Ft(Ft({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,Ft(Ft({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,Ft(Ft({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,Ft(Ft({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,Ft(Ft({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},Vq={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},xde=p1("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=jq(r.padding||{}),i=n.left,o=n.top,l=n.right,a=n.bottom,c=e.getState(),p=c.renderPoses,g=c.pos1,v=c.pos2,x=c.pos3,b=c.pos4,P=[g,v,x,b],I=[];return i>0&&I.push([0,2]),o>0&&I.push([0,1]),l>0&&I.push([1,3]),a>0&&I.push([2,3]),I.map(function(k,M){var O=Ut(k,2),F=O[0],N=O[1],$=P[F],j=P[N],U=p[F],H=p[N],Y=cI([0,0],[100,0],[0,100],[100,100],$,j,U,H);if(Y.length)return t.createElement("div",{key:"padding".concat(M),className:li("padding"),style:{transform:D2(Y,!0)}})})}}),gN=["nw","ne","se","sw"];function Nb(e,t){var r=e[0]+e[1],n=r>t?t/r:1;return e[0]*=n,e[1]=t-e[1]*n,e}var wde=[1,2,5,6],Sde=[0,3,4,7],Pp=[1,-1,-1,1],Ip=[1,1,-1,-1];function LI(e,t,r,n,i,o,l,a){i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=r),a===void 0&&(a=n);var c=[],p=!1,g=e.filter(function(x){return!x.virtual}),v=g.map(function(x){var b=x.horizontal,P=x.vertical,I=x.pos;if(P&&!p&&(p=!0,c.push("/")),p){var k=Math.max(0,P===1?I[1]-o:a-I[1]);return c.push(nd(k,n,t)),k}else{var k=Math.max(0,b===1?I[0]-i:l-I[0]);return c.push(nd(k,r,t)),k}});return{radiusPoses:g,styles:c,raws:v}}function Uq(e){for(var t=[0,0],r=[0,0],n=e.length,i=0;i<n;++i){var o=e[i];o.sub&&(o.horizontal&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1,r[0]=i+1),o.vertical&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function Gq(e,t,r,n,i,o,l){var a,c,p,g;o===void 0&&(o=[0,0]),l===void 0&&(l=!1);var v=e.indexOf("/"),x=(v>-1?e.slice(0,v):e).length,b=e.slice(0,x),P=e.slice(x+1),I=b.length,k=P.length,M=k>0,O=Ut(b,4),F=O[0],N=F===void 0?"0px":F,$=O[1],j=$===void 0?N:$,U=O[2],H=U===void 0?N:U,Y=O[3],ae=Y===void 0?j:Y,ee=Ut(P,4),G=ee[0],ie=G===void 0?N:G,oe=ee[1],ue=oe===void 0?M?ie:j:oe,de=ee[2],Me=de===void 0?M?ie:H:de,ge=ee[3],xe=ge===void 0?M?ue:ae:ge,Ee=[N,j,H,ae].map(function(Re){return Qa(Re,t)}),Ae=[ie,ue,Me,xe].map(function(Re){return Qa(Re,r)}),fe=Ee.slice(),Se=Ae.slice();a=Ut(Nb([fe[0],fe[1]],t),2),fe[0]=a[0],fe[1]=a[1],c=Ut(Nb([fe[3],fe[2]],t),2),fe[3]=c[0],fe[2]=c[1],p=Ut(Nb([Se[0],Se[3]],r),2),Se[0]=p[0],Se[3]=p[1],g=Ut(Nb([Se[1],Se[2]],r),2),Se[1]=g[0],Se[2]=g[1];var we=l?fe:fe.slice(0,Math.max(o[0],I)),De=l?Se:Se.slice(0,Math.max(o[1],k));return un(un([],Ut(we.map(function(Re,$e){var Oe=gN[$e];return{virtual:$e>=I,horizontal:Pp[$e],vertical:0,pos:[n+Re,i+(Ip[$e]===-1?r:0)],sub:!0,raw:Ee[$e],direction:Oe}})),!1),Ut(De.map(function(Re,$e){var Oe=gN[$e];return{virtual:$e>=k,horizontal:0,vertical:Ip[$e],pos:[n+(Pp[$e]===-1?t:0),i+Re],sub:!0,raw:Ae[$e],direction:Oe}})),!1)}function Cde(e,t,r,n,i){i===void 0&&(i=t.length);var o=Uq(e.slice(n)),l=o.horizontalRange,a=o.verticalRange,c=r-n,p=0;if(c===0)p=i;else if(c>0&&c<l[1])p=l[1]-c;else if(c>=a[0])p=a[0]+a[1]-c;else return;e.splice(r,p),t.splice(r,p)}function Ede(e,t,r,n,i,o,l,a,c,p,g){p===void 0&&(p=0),g===void 0&&(g=0);var v=Uq(e.slice(r)),x=v.horizontalRange,b=v.verticalRange;if(n>-1)for(var P=Pp[n]===1?o-p:a-o,I=x[1];I<=n;++I){var k=Ip[I]===1?g:c,M=0;if(n===I?M=o:I===0?M=p+P:Pp[I]===-1&&(M=a-(t[r][0]-p)),e.splice(r+I,0,{horizontal:Pp[I],vertical:0,pos:[M,k]}),t.splice(r+I,0,[M,k]),I===0)break}else if(i>-1){var O=Ip[i]===1?l-g:c-l;if(x[1]===0&&b[1]===0){var F=[p+O,g];e.push({horizontal:Pp[0],vertical:0,pos:F}),t.push(F)}for(var N=b[0],I=b[1];I<=i;++I){var M=Pp[I]===1?p:a,k=0;if(i===I?k=l:I===0?k=g+O:Ip[I]===1?k=t[r+N][1]:Ip[I]===-1&&(k=c-(t[r+N][1]-g)),e.push({horizontal:0,vertical:Ip[I],pos:[M,k]}),t.push([M,k]),I===0)break}}}function Tde(e,t){t===void 0&&(t=e.map(function(i){return i.raw}));var r=e.map(function(i,o){return i.horizontal?t[o]:null}).filter(function(i){return i!=null}),n=e.map(function(i,o){return i.vertical?t[o]:null}).filter(function(i){return i!=null});return{horizontals:r,verticals:n}}var Pde=[[0,-1,"n"],[1,0,"e"]],Ide=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function RI(e,t,r){var n=e.props.clipRelative,i=e.state,o=i.width,l=i.height,a=t,c=a.type,p=a.poses,g=c==="rect",v=c==="circle";if(c==="polygon")return r.map(function(j){return"".concat(nd(j[0],o,n)," ").concat(nd(j[1],l,n))});if(g||c==="inset"){var x=r[1][1],b=r[3][0],P=r[7][0],I=r[5][1];if(g)return[x,b,I,P].map(function(j){return"".concat(j,"px")});var k=[x,o-b,l-I,P].map(function(j,U){return nd(j,U%2?o:l,n)});if(r.length>8){var M=Ut(ci(r[4],r[0]),2),O=M[0],F=M[1];k.push.apply(k,un(["round"],Ut(LI(p.slice(8).map(function(j,U){return Ft(Ft({},j),{pos:r[U]})}),n,O,F,P,x,b,I).styles),!1))}return k}else if(v||c==="ellipse"){var N=r[0],$=nd(Hr(r[1][1]-N[1]),v?Math.sqrt((o*o+l*l)/2):l,n),k=v?[$]:[nd(Hr(r[2][0]-N[0]),o,n),$];return k.push("at",nd(N[0],o,n),nd(N[1],l,n)),k}}function rx(e,t,r,n){var i=[n,(n+t)/2,t],o=[e,(e+r)/2,r];return Ide.map(function(l){var a=Ut(l,3),c=a[0],p=a[1],g=a[2],v=i[c+1],x=o[p+1];return{vertical:Hr(p),horizontal:Hr(c),direction:g,pos:[v,x]}})}function Hq(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(n){var i=n.pos;t[0]=Math.min(t[0],i[0]),t[1]=Math.max(t[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])}),[Hr(t[1]-t[0]),Hr(r[1]-r[0])]}function yN(e,t,r,n,i){var o,l,a,c,p,g,v,x,b;if(e){var P=i;if(!P){var I=Vu(e),k=I("clipPath");P=k!=="none"?k:I("clip")}if(!((!P||P==="none"||P==="auto")&&(P=n,!P))){var M=Aj(P),O=M.prefix,F=O===void 0?P:O,N=M.value,$=N===void 0?"":N,j=F==="circle",U=" ";if(F==="polygon"){var H=Mp($||"0% 0%, 100% 0%, 100% 100%, 0% 100%");U=",";var Y=H.map(function(ur){var ar=Ut(ur.split(" "),2),yr=ar[0],pr=ar[1];return{vertical:1,horizontal:1,pos:[Qa(yr,t),Qa(pr,r)]}}),ae=Hp(Y.map(function(ur){return ur.pos}));return{type:F,clipText:P,poses:Y,splitter:U,left:ae.minX,right:ae.maxX,top:ae.minY,bottom:ae.maxY}}else if(j||F==="ellipse"){var ee="",G="",ie=0,oe=0,H=Nh($);if(j){var ue="";o=Ut(H,4),l=o[0],ue=l===void 0?"50%":l,a=o[2],ee=a===void 0?"50%":a,c=o[3],G=c===void 0?"50%":c,ie=Qa(ue,Math.sqrt((t*t+r*r)/2)),oe=ie}else{var de="",Me="";p=Ut(H,5),g=p[0],de=g===void 0?"50%":g,v=p[1],Me=v===void 0?"50%":v,x=p[3],ee=x===void 0?"50%":x,b=p[4],G=b===void 0?"50%":b,ie=Qa(de,t),oe=Qa(Me,r)}var ge=[Qa(ee,t),Qa(G,r)],Y=un([{vertical:1,horizontal:1,pos:ge,direction:"nesw"}],Ut(Pde.slice(0,j?1:2).map(function(yr){return{vertical:Hr(yr[1]),horizontal:yr[0],direction:yr[2],sub:!0,pos:[ge[0]+yr[0]*ie,ge[1]+yr[1]*oe]}})),!1);return{type:F,clipText:P,radiusX:ie,radiusY:oe,left:ge[0]-ie,top:ge[1]-oe,right:ge[0]+ie,bottom:ge[1]+oe,poses:Y,splitter:U}}else if(F==="inset"){var H=Nh($||"0 0 0 0"),xe=H.indexOf("round"),Ee=(xe>-1?H.slice(0,xe):H).length,Ae=H.slice(Ee+1),fe=Ut(H.slice(0,Ee),4),Se=fe[0],we=fe[1],De=we===void 0?Se:we,Re=fe[2],$e=Re===void 0?Se:Re,Oe=fe[3],it=Oe===void 0?De:Oe,Ye=Ut([Se,$e].map(function(yr){return Qa(yr,r)}),2),rt=Ye[0],Ie=Ye[1],It=Ut([it,De].map(function(yr){return Qa(yr,t)}),2),at=It[0],je=It[1],Ht=t-je,Wt=r-Ie,zt=Gq(Ae,Ht-at,Wt-rt,at,rt),Y=un(un([],Ut(rx(rt,Ht,Wt,at)),!1),Ut(zt),!1);return{type:"inset",clipText:P,poses:Y,top:rt,left:at,right:Ht,bottom:Wt,radius:Ae,splitter:U}}else if(F==="rect"){var H=Mp($||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));U=",";var st=Ut(H.map(function(ir){var xr=c1(ir).value;return xr}),4),sr=st[0],je=st[1],Ie=st[2],at=st[3],Y=rx(sr,je,Ie,at);return{type:"rect",clipText:P,poses:Y,top:sr,right:je,bottom:Ie,left:at,values:H,splitter:U}}}}}function kde(e,t,r,n,i){var o=e[t],l=o.direction,a=o.sub,c=e.map(function(){return[0,0]}),p=l?l.split(""):[];if(n&&t<8){var g=p.filter(function(ie){return ie==="w"||ie==="e"}),v=p.filter(function(ie){return ie==="n"||ie==="s"}),x=g[0],b=v[0];c[t]=r;var P=Ut(Hq(e),2),I=P[0],k=P[1],M=I&&k?I/k:0;if(M&&i){var O=(t+4)%8,F=e[O].pos,N=[0,0];l.indexOf("w")>-1?N[0]=-1:l.indexOf("e")>-1&&(N[0]=1),l.indexOf("n")>-1?N[1]=-1:l.indexOf("s")>-1&&(N[1]=1);var $=Fq([I,k],r,M,N,!0),j=I+$[0],U=k+$[1],H=F[1],Y=F[1],ae=F[0],ee=F[0];N[0]===-1?ae=ee-j:N[0]===1?ee=ae+j:(ae=ae-j/2,ee=ee+j/2),N[1]===-1?H=Y-U:(N[1]===1||(H=Y-U/2),Y=H+U);var G=rx(H,ee,Y,ae);e.forEach(function(ie,oe){c[oe][0]=G[oe].pos[0]-ie.pos[0],c[oe][1]=G[oe].pos[1]-ie.pos[1]})}else e.forEach(function(ie,oe){var ue=ie.direction;ue&&(ue.indexOf(x)>-1&&(c[oe][0]=r[0]),ue.indexOf(b)>-1&&(c[oe][1]=r[1]))}),x&&(c[1][0]=r[0]/2,c[5][0]=r[0]/2),b&&(c[3][1]=r[1]/2,c[7][1]=r[1]/2)}else l&&!a?p.forEach(function(ie){var oe=ie==="n"||ie==="s";e.forEach(function(ue,de){var Me=ue.direction,ge=ue.horizontal,xe=ue.vertical;!Me||Me.indexOf(ie)===-1||(c[de]=[oe||!ge?0:r[0],!oe||!xe?0:r[1]])})}):c[t]=r;return c}function Ade(e,t){var r=Ut(Zj(e,t),2),n=r[0],i=r[1],o=t.datas,l=o.clipPath,a=o.clipIndex,c=l,p=c.type,g=c.poses,v=c.splitter,x=g.map(function(O){return O.pos});if(p==="polygon")x.splice(a,0,[n,i]);else if(p==="inset"){var b=wde.indexOf(a),P=Sde.indexOf(a),I=g.length;if(Ede(g,x,8,b,P,n,i,x[4][0],x[4][1],x[0][0],x[0][1]),I===g.length)return}else return;var k=RI(e,l,x),M="".concat(p,"(").concat(k.join(v),")");Rn(e,"onClip",Ri(e,t,Ft({clipEventType:"added",clipType:p,poses:x,clipStyles:k,clipStyle:M,distX:0,distY:0},Tu({clipPath:M},t))))}function Mde(e,t){var r=t.datas,n=r.clipPath,i=r.clipIndex,o=n,l=o.type,a=o.poses,c=o.splitter,p=a.map(function(b){return b.pos}),g=p.length;if(l==="polygon")a.splice(i,1),p.splice(i,1);else if(l==="inset"){if(i<8||(Cde(a,p,i,8,g),g===a.length))return}else return;var v=RI(e,n,p),x="".concat(l,"(").concat(v.join(c),")");Rn(e,"onClip",Ri(e,t,Ft({clipEventType:"removed",clipType:l,poses:p,clipStyles:v,clipStyle:x,distX:0,distY:0},Tu({clipPath:x},t))))}var Lde={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,n=r.customClipPath,i=r.defaultClipPath,o=r.clipArea,l=r.zoom,a=r.groupable,c=e.getState(),p=c.target,g=c.width,v=c.height,x=c.allMatrix,b=c.is3d,P=c.left,I=c.top,k=c.pos1,M=c.pos2,O=c.pos3,F=c.pos4,N=c.clipPathState,$=c.snapBoundInfos,j=c.rotation;if(!p||a)return[];var U=yN(p,g,v,i||"inset",N||n);if(!U)return[];var H=b?4:3,Y=U.type,ae=U.poses,ee=ae.map(function(je){var Ht=Xo(x,je.pos,H);return[Ht[0]-P,Ht[1]-I]}),G=[],ie=[],oe=Y==="rect",ue=Y==="inset",de=Y==="polygon";if(oe||ue||de){var Me=ue?ee.slice(0,8):ee;ie=Me.map(function(je,Ht){var Wt=Ht===0?Me[Me.length-1]:Me[Ht-1],zt=Is(Wt,je),st=Iq(Wt,je);return t.createElement("div",{key:"clipLine".concat(Ht),className:li("line","clip-line","snap-control"),"data-clip-index":Ht,style:{width:"".concat(st,"px"),transform:"translate(".concat(Wt[0],"px, ").concat(Wt[1],"px) rotate(").concat(zt,"rad) scaleY(").concat(l,")")}})})}if(G=ee.map(function(je,Ht){return t.createElement("div",{key:"clipControl".concat(Ht),className:li("control","clip-control","snap-control"),"data-clip-index":Ht,style:{transform:"translate(".concat(je[0],"px, ").concat(je[1],"px) rotate(").concat(j,"rad) scale(").concat(l,")")}})}),ue&&G.push.apply(G,un([],Ut(ee.slice(8).map(function(je,Ht){return t.createElement("div",{key:"clipRadiusControl".concat(Ht),className:li("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Ht,style:{transform:"translate(".concat(je[0],"px, ").concat(je[1],"px) rotate(").concat(j,"rad) scale(").concat(l,")")}})})),!1)),Y==="circle"||Y==="ellipse"){var ge=U.left,xe=U.top,Ee=U.radiusX,Ae=U.radiusY,fe=Ut(ci(Xo(x,[ge,xe],H),Xo(x,[0,0],H)),2),Se=fe[0],we=fe[1],De="none";if(!o){for(var Re=Math.max(10,Ee/5,Ae/5),$e=[],Oe=0;Oe<=Re;++Oe){var it=Math.PI*2/Re*Oe;$e.push([Ee+(Ee-l)*Math.cos(it),Ae+(Ae-l)*Math.sin(it)])}$e.push([Ee,-2]),$e.push([-2,-2]),$e.push([-2,Ae*2+2]),$e.push([Ee*2+2,Ae*2+2]),$e.push([Ee*2+2,-2]),$e.push([Ee,-2]),De="polygon(".concat($e.map(function(je){return"".concat(je[0],"px ").concat(je[1],"px")}).join(", "),")")}G.push(t.createElement("div",{key:"clipEllipse",className:li("clip-ellipse","snap-control"),style:{width:"".concat(Ee*2,"px"),height:"".concat(Ae*2,"px"),clipPath:De,transform:"translate(".concat(-P+Se,"px, ").concat(-I+we,"px) ").concat(D2(x))}}))}if(o){var Ye=Nc(un([k,M,O,F],Ut(ee),!1)),rt=Ye.width,Ie=Ye.height,It=Ye.left,at=Ye.top;if(de||oe||ue){var $e=ue?ee.slice(0,8):ee;G.push(t.createElement("div",{key:"clipArea",className:li("clip-area","snap-control"),style:{width:"".concat(rt,"px"),height:"".concat(Ie,"px"),transform:"translate(".concat(It,"px, ").concat(at,"px)"),clipPath:"polygon(".concat($e.map(function(Ht){return"".concat(Ht[0]-It,"px ").concat(Ht[1]-at,"px")}).join(", "),")")}}))}}return $&&["vertical","horizontal"].forEach(function(je){var Ht=$[je],Wt=je==="horizontal";Ht.isSnap&&ie.push.apply(ie,un([],Ut(Ht.snap.posInfos.map(function(zt,st){var sr=zt.pos,ur=ci(Xo(x,Wt?[0,sr]:[sr,0],H),[P,I]),ar=ci(Xo(x,Wt?[g,sr]:[sr,v],H),[P,I]);return k0(t,"",ur,ar,l,"clip".concat(je,"snap").concat(st),"guideline")})),!1)),Ht.isBound&&ie.push.apply(ie,un([],Ut(Ht.bounds.map(function(zt,st){var sr=zt.pos,ur=ci(Xo(x,Wt?[0,sr]:[sr,0],H),[P,I]),ar=ci(Xo(x,Wt?[g,sr]:[sr,v],H),[P,I]);return k0(t,"",ur,ar,l,"clip".concat(je,"bounds").concat(st),"guideline","bounds","bold")})),!1))}),un(un([],Ut(G),!1),Ut(ie),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,n=r.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,Ft(Ft({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,n=e.props,i=n.defaultClipPath,o=n.customClipPath,l=r.target,a=r.width,c=r.height,p=t.inputEvent?t.inputEvent.target:null,g=p&&p.getAttribute("class")||"",v=t.datas,x=yN(l,a,c,i||"inset",o);if(!x)return!1;var b=x.clipText,P=x.type,I=x.poses,k=Rn(e,"onClipStart",Ri(e,t,{clipType:P,clipStyle:b,poses:I.map(function(M){return M.pos})}));return k===!1?(v.isClipStart=!1,!1):(v.isControl=g&&g.indexOf("clip-control")>-1,v.isLine=g.indexOf("clip-line")>-1,v.isArea=g.indexOf("clip-area")>-1||g.indexOf("clip-ellipse")>-1,v.clipIndex=p?parseInt(p.getAttribute("data-clip-index"),10):-1,v.clipPath=x,v.isClipStart=!0,r.clipPathState=b,sm(e,t),!0)},dragControl:function(e,t){var r,n,i,o=t.datas,l=t.originalDatas,a=t.isDragTarget;if(!o.isClipStart)return!1;var c=o,p=c.isControl,g=c.isLine,v=c.isArea,x=c.clipIndex,b=c.clipPath;if(!b)return!1;var P=Wp(e.props,"clippable"),I=P.keepRatio,k=0,M=0,O=l.draggable,F=of(t);a&&O?(r=Ut(O.prevBeforeDist,2),k=r[0],M=r[1]):(n=Ut(F,2),k=n[0],M=n[1]);var N=[k,M],$=e.state,j=$.width,U=$.height,H=!v&&!p&&!g,Y=b.type,ae=b.poses,ee=b.splitter,G=ae.map(function(Zt){return Zt.pos});H&&(k=-k,M=-M);var ie=!p||ae[x].direction==="nesw",oe=Y==="inset"||Y==="rect",ue=ae.map(function(){return[0,0]});if(p&&!ie){var de=ae[x],Me=de.horizontal,ge=de.vertical,xe=[k*Hr(Me),M*Hr(ge)];ue=kde(ae,x,xe,oe,I)}else ie&&(ue=G.map(function(){return[k,M]}));var Ee=G.map(function(Zt,Er){return ma(Zt,ue[Er])}),Ae=un([],Ut(Ee),!1);$.snapBoundInfos=null;var fe=b.type==="circle",Se=b.type==="ellipse";if(fe||Se){var we=Nc(Ee),De=Hr(we.bottom-we.top),Re=Hr(Se?we.right-we.left:De),$e=Ee[0][1]+De,Oe=Ee[0][0]-Re,it=Ee[0][0]+Re;fe&&(Ae.push([it,we.bottom]),ue.push([1,0])),Ae.push([we.left,$e]),ue.push([0,1]),Ae.push([Oe,we.bottom]),ue.push([1,0])}var Ye=wq((P.clipHorizontalGuidelines||[]).map(function(Zt){return Qa("".concat(Zt),U)}),(P.clipVerticalGuidelines||[]).map(function(Zt){return Qa("".concat(Zt),j)}),j,U),rt=[],Ie=[];if(fe||Se)rt=[Ae[4][0],Ae[2][0]],Ie=[Ae[1][1],Ae[3][1]];else if(oe){var It=[Ae[0],Ae[2],Ae[4],Ae[6]],at=[ue[0],ue[2],ue[4],ue[6]];rt=It.filter(function(Zt,Er){return at[Er][0]}).map(function(Zt){return Zt[0]}),Ie=It.filter(function(Zt,Er){return at[Er][1]}).map(function(Zt){return Zt[1]})}else rt=Ae.filter(function(Zt,Er){return ue[Er][0]}).map(function(Zt){return Zt[0]}),Ie=Ae.filter(function(Zt,Er){return ue[Er][1]}).map(function(Zt){return Zt[1]});var je=[0,0],Ht=tN(Ye,P.clipTargetBounds&&{left:0,top:0,right:j,bottom:U},rt,Ie,5,5),Wt=Ht.horizontal,zt=Ht.vertical,st=Wt.offset,sr=zt.offset;if(Wt.isBound&&(je[1]+=st),zt.isBound&&(je[0]+=sr),(Se||fe)&&ue[0][0]===0&&ue[0][1]===0){var we=Nc(Ee),ur=we.bottom-we.top,ar=Se?we.right-we.left:ur,yr=zt.isBound?Hr(sr):zt.snapIndex===0?-sr:sr,pr=Wt.isBound?Hr(st):Wt.snapIndex===0?-st:st;ar-=yr,ur-=pr,fe&&(ur=pq(zt,Wt)>0?ur:ar,ar=ur);var Jt=Ae[0];Ae[1][1]=Jt[1]-ur,Ae[2][0]=Jt[0]+ar,Ae[3][1]=Jt[1]+ur,Ae[4][0]=Jt[0]-ar}else if(oe&&I&&p){var ir=Ut(Hq(ae),2),xr=ir[0],rr=ir[1],nt=xr&&rr?xr/rr:0,be=ae[x],_e=be.direction||"",Ue=Ae[1][1],$e=Ae[5][1],Oe=Ae[7][0],it=Ae[3][0];Hr(st)<=Hr(sr)?st=Eu(st)*Hr(sr)/nt:sr=Eu(sr)*Hr(st)*nt,_e.indexOf("w")>-1?Oe-=sr:_e.indexOf("e")>-1?it-=sr:(Oe+=sr/2,it-=sr/2),_e.indexOf("n")>-1?Ue-=st:_e.indexOf("s")>-1?$e-=st:(Ue+=st/2,$e-=st/2);var Qe=rx(Ue,it,$e,Oe);Ae.forEach(function(vr,Dr){var jr;jr=Ut(Qe[Dr].pos,2),vr[0]=jr[0],vr[1]=jr[1]})}else Ae.forEach(function(Zt,Er){var bt=ue[Er];bt[0]&&(Zt[0]-=sr),bt[1]&&(Zt[1]-=st)});var ot=RI(e,b,Ee),et="".concat(Y,"(").concat(ot.join(ee),")");if($.clipPathState=et,fe||Se)rt=[Ae[4][0],Ae[2][0]],Ie=[Ae[1][1],Ae[3][1]];else if(oe){var It=[Ae[0],Ae[2],Ae[4],Ae[6]];rt=It.map(function(Er){return Er[0]}),Ie=It.map(function(Er){return Er[1]})}else rt=Ae.map(function(Zt){return Zt[0]}),Ie=Ae.map(function(Zt){return Zt[1]});if($.snapBoundInfos=tN(Ye,P.clipTargetBounds&&{left:0,top:0,right:j,bottom:U},rt,Ie,1,1),O){var Lt=$.is3d,vt=$.allMatrix,Bt=Lt?4:3,Kt=je;a&&(Kt=[N[0]+je[0]-F[0],N[1]+je[1]-F[1]]),O.deltaOffset=eo(vt,[Kt[0],Kt[1],0,0],Bt)}return Rn(e,"onClip",Ri(e,t,Ft({clipEventType:"changed",clipType:Y,poses:Ee,clipStyle:et,clipStyles:ot,distX:k,distY:M},Tu((i={},i[Y==="rect"?"clip":"clipPath"]=et,i),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,n=t.datas,i=t.isDouble,o=n.isLine,l=n.isClipStart,a=n.isControl;return l?(Rn(e,"onClipEnd",gc(e,t,{})),i&&(a?Mde(e,t):o&&Ade(e,t)),i||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},Rde={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":al(t.inputEvent.target,li("origin"))},dragControlStart:function(e,t){var r=t.datas;sm(e,t);var n=Ri(e,t,{dragStart:Cu.dragStart(e,new oy().dragStart([0,0],t))}),i=Rn(e,"onDragOriginStart",n);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,i===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(e,t){var r=t.datas,n=t.isPinch,i=t.isRequest;if(!r.isDragOrigin)return!1;var o=Ut(of(t),2),l=o[0],a=o[1],c=e.state,p=c.width,g=c.height,v=c.offsetMatrix,x=c.targetMatrix,b=c.is3d,P=e.props.originRelative,I=P===void 0?!0:P,k=b?4:3,M=[l,a];if(i){var O=t.distOrigin;(O[0]||O[1])&&(M=O)}var F=ma(r.startOrigin,M),N=ma(r.startTargetOrigin,M),$=ci(M,r.prevOrigin),j=g1(v,x,F,k),U=e.getRect(),H=Nc(lm(j,p,g,k)),Y=[U.left-H.left,U.top-H.top];r.prevOrigin=M;var ae=[nd(N[0],p,I),nd(N[1],g,I)].join(" "),ee=Cu.drag(e,m1(t,e.state,Y,!!n)),G=Ri(e,t,Ft(Ft({width:p,height:g,origin:F,dist:M,delta:$,transformOrigin:ae,drag:ee},Tu({transformOrigin:ae,transform:ee.transform},t)),{afterTransform:ee.transform}));return Rn(e,"onDragOrigin",G),G},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(Rn(e,"onDragOriginEnd",gc(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=r.transformOrigin,l=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(a){return"deltaOrigin"in a?(l[0]+=a.deltaOrigin[0],l[1]+=a.deltaOrigin[1]):"origin"in a?(l[0]=a.origin[0]-o[0],l[1]=a.origin[1]-o[1]):("x"in a?n=a.x-r.left:"deltaX"in a&&(n+=a.deltaX),"y"in a?i=a.y-r.top:"deltaY"in a&&(i+=a.deltaY)),{datas:t,distX:n,distY:i,distOrigin:l}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Dde(e,t,r,n){var i=e.filter(function(c){var p=c.virtual,g=c.horizontal;return g&&!p}).length,o=e.filter(function(c){var p=c.virtual,g=c.vertical;return g&&!p}).length,l=-1;if(t===0&&(i===0?l=0:i===1&&(l=1)),t===2&&(i<=2?l=2:i<=3&&(l=3)),t===3&&(o===0?l=4:o<4&&(l=7)),t===1&&(o<=1?l=5:o<=2&&(l=6)),!(l===-1||!e[l].virtual)){var a=e[l];Nde(e,l),l<4?a.pos[0]=r:a.pos[1]=n}}function Nde(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function Ode(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function vN(e,t,r,n,i){n===void 0&&(n=[0,0]);var o=[];return!e||e==="0px"?o=[]:o=Nh(e),Gq(o,t,r,0,0,n,i)}function bN(e,t,r,n,i){var o=e.state,l=o.width,a=o.height,c=LI(i,e.props.roundRelative,l,a),p=c.raws,g=c.styles,v=c.radiusPoses,x=Tde(v,p),b=x.horizontals,P=x.verticals,I=g.join(" ");o.borderRadiusState=I;var k=Ri(e,t,Ft({horizontals:b,verticals:P,borderRadius:I,width:l,height:a,delta:n,dist:r},Tu({borderRadius:I},t)));return Rn(e,"onRound",k),k}function _N(e){var t,r,n=e.getState().style,i=n.borderRadius||"";if(!i&&e.props.groupable){var o=e.moveables[0],l=e.getTargets()[0];l&&(o?.props.target===l?(i=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=i):(i=PI(l).borderRadius,n.borderRadius=i))}return i}var Fde={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?li("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),n=r.target,i=r.width,o=r.height,l=r.allMatrix,a=r.is3d,c=r.left,p=r.top,g=r.borderRadiusState,v=e.props,x=v.minRoundControls,b=x===void 0?[0,0]:x,P=v.maxRoundControls,I=P===void 0?[4,4]:P,k=v.zoom,M=v.roundPadding,O=M===void 0?0:M,F=v.isDisplayShadowRoundControls,N=v.groupable;if(!n)return null;var $=g||_N(e),j=a?4:3,U=vN($,i,o,b,!0);if(!U)return null;var H=0,Y=0,ae=N?[0,0]:[c,p];return U.map(function(ee,G){var ie=ee.horizontal,oe=ee.vertical,ue=ee.direction||"",de=un([],Ut(ee.pos),!1);Y+=Math.abs(ie),H+=Math.abs(oe),ie&&ue.indexOf("n")>-1&&(de[1]-=O),oe&&ue.indexOf("w")>-1&&(de[0]-=O),ie&&ue.indexOf("s")>-1&&(de[1]+=O),oe&&ue.indexOf("e")>-1&&(de[0]+=O);var Me=ci(Xo(l,de,j),ae),ge=F&&F!=="horizontal",xe=ee.vertical?H<=I[1]&&(ge||!ee.virtual):Y<=I[0]&&(F||!ee.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(G),className:li("control","border-radius",ee.vertical?"vertical":"",ee.virtual?"virtual":""),"data-radius-index":G,style:{display:xe?"block":"none",transform:"translate(".concat(Me[0],"px, ").concat(Me[1],"px) scale(").concat(k,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,n=t.datas,i=r.target,o=i.getAttribute("class")||"",l=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,c=l?parseInt(i.getAttribute("data-radius-index"),10):-1,p=-1;if(a){var g=i.getAttribute("data-line-key")||"";g&&(p=parseInt(g.replace(/render-line-/g,""),10),isNaN(p)&&(p=-1))}if(!l&&!a)return!1;var v=Ri(e,t,{}),x=Rn(e,"onRoundStart",v);if(x===!1)return!1;n.lineIndex=p,n.controlIndex=c,n.isControl=l,n.isLine=a,sm(e,t);var b=e.props,P=b.roundRelative,I=b.minRoundControls,k=I===void 0?[0,0]:I,M=e.state,O=M.width,F=M.height;n.isRound=!0,n.prevDist=[0,0];var N=_N(e),$=vN(N||"",O,F,k,!0)||[];return n.controlPoses=$,M.borderRadiusState=LI($,P,O,F).styles.join(" "),v},dragControl:function(e,t){var r=t.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,o=Ut(of(t),2),l=o[0],a=o[1],c=[l,a],p=ci(c,r.prevDist),g=e.props.maxRoundControls,v=g===void 0?[4,4]:g,x=e.state,b=x.width,P=x.height,I=n[i],k=I.vertical,M=I.horizontal,O=n.map(function(N){var $=N.horizontal,j=N.vertical,U=[$*M*c[0],j*k*c[1]];if($){if(v[0]===1)return U;if(v[0]<4&&$!==M)return U}else{if(v[1]===0)return U[1]=j*M*c[0]/b*P,U;if(k){if(v[1]===1)return U;if(v[1]<4&&j!==k)return U}}return[0,0]});O[i]=c;var F=n.map(function(N,$){return Ft(Ft({},N),{pos:ma(N.pos,O[$])})});return i<4?F.slice(0,i+1).forEach(function(N){N.virtual=!1}):F.slice(4,i+1).forEach(function(N){N.virtual=!1}),r.prevDist=[l,a],bN(e,t,c,p,F)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var n=t.datas,i=t.isDouble;if(!n.isRound)return!1;var o=n.isControl,l=n.controlIndex,a=n.isLine,c=n.lineIndex,p=n.controlPoses,g=p.filter(function(M){var O=M.virtual;return O}).length,v=e.props.roundClickable,x=v===void 0?!0:v;if(i&&x){if(o&&(x===!0||x==="control"))Ode(p,l);else if(a&&(x===!0||x==="line")){var b=Ut(Zj(e,t),2),P=b[0],I=b[1];Dde(p,c,P,I)}g!==p.filter(function(M){var O=M.virtual;return O}).length&&bN(e,t,[0,0],[0,0],p)}var k=gc(e,t,{});return Rn(e,"onRoundEnd",k),r.borderRadiusState="",k},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=ud(e,"roundable",t),l=Ft({targets:e.props.targets,events:o.map(function(a,c){return Ft(Ft({},a),{target:i[c],moveable:n[c],currentTarget:n[c]})})},r);return Rn(e,"onRoundGroupStart",l),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=ud(e,"roundable",t),l=Ft({targets:e.props.targets,events:o.map(function(a,c){return Ft(Ft(Ft({},a),{target:i[c],moveable:n[c],currentTarget:n[c]}),Tu({borderRadius:r.borderRadius},a))})},r);return Rn(e,"onRoundGroup",l),l},dragGroupControlEnd:function(e,t){var r=e.moveables,n=e.props.targets,i=ud(e,"roundable",t);N2(e,"onRound",function(a){var c=Ft({targets:e.props.targets,events:i.map(function(p,g){return Ft(Ft(Ft({},p),{target:n[g],moveable:r[g],currentTarget:r[g]}),Tu({borderRadius:a.borderRadius},p))})},a);Rn(e,"onRoundGroup",c)});var o=this.dragControlEnd(e,t);if(!o)return!1;var l=Ft({targets:e.props.targets,events:i.map(function(a,c){var p;return Ft(Ft({},a),{target:n[c],moveable:r[c],currentTarget:r[c],lastEvent:(p=a.datas)===null||p===void 0?void 0:p.lastEvent})})},o);return Rn(e,"onRoundGroupEnd",l),l},unset:function(e){e.state.borderRadiusState=""}};function Bde(e,t){var r=t?4:3,n=So(r),i="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return e===i||e==="matrix(1,0,0,1,0,0)"}var Wq={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,i=r.targetMatrix,o=r.inlineTransform,l=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Bj(i,!0),")"),a=!o||o==="none"?l:o;t.datas.startTransforms=Bde(a,n)?[]:Nh(a)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return Ri(e,t,{setTransform:function(r){t.datas.startTransforms=Cl(r)?r:Nh(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return Ri(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),Rn(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),Rn(e,"onBeforeRender",Ri(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),Rn(e,"onBeforeRenderEnd",Ri(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.setTransform(c,l),r.resetStyle(l),r.fillDragStartParams(c,l)});Rn(e,"onBeforeRenderGroupStart",Ri(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:o}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.resetStyle(l),r.fillDragParams(c,l)});Rn(e,"onBeforeRenderGroup",Ri(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:o}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),Rn(e,"onBeforeRenderGroupEnd",Ri(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},Xq={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){Rn(e,"onRenderStart",Ri(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){Rn(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){Rn(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){Rn(e,"onRenderGroupStart",Ri(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.fillDragParams(c,l)});Rn(e,"onRenderGroup",Ri(e,t,Ft(Ft({isPinch:!!t.isPinch,targets:e.props.targets,transform:kb(t),transformObject:{}},Tu(Ab(t))),{events:o})))},dragGroupEnd:function(e,t){var r=this,n=ud(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(l,a){var c=i[a];return r.fillDragEndParams(c,l)});Rn(e,"onRenderGroupEnd",Ri(e,t,Ft({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:o,transformObject:{},transform:kb(t)},Tu(Ab(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return ay(Y_(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Ri(e,t,Ft({isPinch:!!t.isPinch,transformObject:r,transform:kb(t)},Tu(Ab(t))))},fillDragEndParams:function(e,t){var r={};return ay(Y_(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Ri(e,t,Ft({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:kb(t)},Tu(Ab(t))))}};function c0(e,t,r,n,i,o,l){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=i==="Start",c=i==="End",p=i==="After",g=e.state.target,v=o.isRequest,x=n.indexOf("Control")>-1;if(!g||a&&x&&!v&&e.areaElement===o.inputEvent.target)return!1;var b=un([],Ut(t),!1);if(v){var P=o.requestAble;b.some(function(G){return G.name===P})||b.push.apply(b,un([],Ut(e.props.ables.filter(function(G){return G.name===P})),!1))}if(!b.length||b.every(function(G){return G.dragRelation}))return!1;var I=o.inputEvent,k;c&&I&&(k=document.elementFromPoint(o.clientX,o.clientY)||I.target);var M=!1,O=function(){var G;M=!0,(G=o.stop)===null||G===void 0||G.call(o)},F=a&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());F&&e.updateRect(i,!0,!1);var N=o.datas,$=x?"controlGesto":"targetGesto",j=e[$],U=function(G,ie,oe){if(!(ie in G)||j!==e[$])return!1;var ue=G.name,de=N[ue]||(N[ue]={});if(a&&(de.isEventStart=!oe||!G[oe]||G[oe](e,o)),!de.isEventStart)return!1;var Me=G[ie](e,Ft(Ft({},o),{stop:O,datas:de,originalDatas:N,inputTarget:k}));return e._emitter.off(),a&&Me===!1&&(de.isEventStart=!1),Me};F&&b.forEach(function(G){G.unset&&G.unset(e)}),U(Wq,"drag".concat(n).concat(i));var H=0,Y=0;r.forEach(function(G){if(M)return!1;var ie="".concat(G).concat(n).concat(i),oe="".concat(G).concat(n,"Condition");i===""&&!v&&sde(e.state,o);var ue=b.filter(function(ge){return ge[ie]});ue=ue.filter(function(ge,xe){return ge.name&&ue.indexOf(ge)===xe});var de=ue.filter(function(ge){return U(ge,ie,oe)}),Me=de.length;M&&++H,Me&&++Y,!M&&a&&ue.length&&!Me&&(H+=ue.filter(function(ge){var xe=ge.name,Ee=N[xe];return Ee.isEventStart?ge.dragRelation!=="strong":!1}).length?1:0)}),(!p||Y)&&U(Xq,"drag".concat(n).concat(i));var ae=j!==e[$]||H===r.length;if((c||M||ae)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(G){G.state.gestos={}}),b.forEach(function(G){G.unset&&G.unset(e)})),a&&!ae&&!v&&Y&&e.props.preventDefault&&o?.preventDefault(),e.isUnmounted||ae)return!1;if(!a&&Y&&!l||c){var ee=e.props.flushSync||Eq;ee(function(){e.updateRect(c?i:"",!0,!1),e.forceUpdate()})}return!a&&!c&&!p&&Y&&!l&&c0(e,t,r,n,i+"After",o),!0}function DI(e,t){return function(r,n){var i;n===void 0&&(n=r.inputEvent.target);var o=n,l=e.areaElement,a=e._dragTarget;return!a||!t&&(!((i=e.controlGesto)===null||i===void 0)&&i.isFlag())?!1:o===a||a.contains(o)||o===l||!e.isMoveableElement(o)&&!e.controlBox.contains(o)||al(o,"moveable-area")||al(o,"moveable-padding")||al(o,"moveable-edgeDraggable")}}function Yq(e,t,r){var n=e.controlBox,i=[],o=e.props,l=o.dragArea,a=e.state.target,c=o.dragTarget;i.push(n),(!l||c)&&i.push(t),!l&&c&&a&&t!==a&&o.dragTargetSelf&&i.push(a);var p=DI(e);return Kq(e,i,"targetAbles",r,{dragStart:p,pinchStart:p})}function Zq(e,t){var r=e.controlBox,n=[];n.push(r);var i=DI(e,!0),o=function(l,a){if(a===void 0&&(a=l.inputEvent.target),a===r)return!0;var c=i(l,a);return!c};return Kq(e,n,"controlAbles",t,{dragStart:o,pinchStart:o})}function Kq(e,t,r,n,i){i===void 0&&(i={});var o=r==="targetAbles",l=e.props,a=l.pinchOutside,c=l.pinchThreshold,p=l.preventClickEventOnDrag,g=l.preventClickDefault,v=l.checkInput,x=l.dragFocusedInput,b=l.preventDefault,P=b===void 0?!0:b,I=l.preventRightClick,k=I===void 0?!0:I,M=l.preventWheelClick,O=M===void 0?!0:M,F=l.dragContainer,N=Yd(F,!0),$={preventDefault:P,preventRightClick:k,preventWheelClick:O,container:N||Ah(e.getControlBoxElement()),pinchThreshold:c,pinchOutside:a,preventClickEventOnDrag:o?p:!1,preventClickEventOnDragStart:o?g:!1,preventClickEventByCondition:o?null:function(H){return e.controlBox.contains(H.target)},checkInput:o?v:!1,dragFocusedInput:x},j=new cue(t,$),U=n==="Control";return["drag","pinch"].forEach(function(H){["Start","","End"].forEach(function(Y){j.on("".concat(H).concat(Y),function(ae){var ee,G=ae.eventType,ie=H==="drag"&&ae.isPinch;if(i[G]&&!i[G](ae)){ae.stop();return}if(!ie){var oe=H==="drag"?[H]:["drag",H],ue=un([],Ut(e[r]),!1),de=c0(e,ue,oe,n,Y,ae);de?(e.props.stopPropagation||Y==="Start"&&U)&&((ee=ae?.inputEvent)===null||ee===void 0||ee.stopPropagation()):ae.stop()}})})}),j}var zde=(function(){function e(t,r,n){var i=this;this.target=t,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(o){var l=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(c){c[l](a,{inputEvent:o})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e})();function jde(e,t,r,n){var i;r===void 0&&(r=t);var o=rq(e,t),l=o.matrixes,a=o.is3d,c=o.targetMatrix,p=o.transformOrigin,g=o.targetOrigin,v=o.offsetContainer,x=o.hasFixed,b=o.zoom,P=ece(v,r),I=P.matrixes,k=P.is3d,M=P.offsetContainer,O=P.zoom,F=n,N=4,$=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,j=c,U=So(N),H=So(N),Y=So(N),ae=So(N),ee=l.length,G=I.map(function(xe){return Ft(Ft({},xe),{matrix:xe.matrix?un([],Ut(xe.matrix),!1):void 0})}).reverse();l.reverse(),!a&&F&&(j=hd(j,3,4),BT(l)),!k&&F&&BT(G),G.forEach(function(xe){H=eo(H,xe.matrix,N)});var ie=r||Hh(e),oe=((i=G[0])===null||i===void 0?void 0:i.target)||A0(ie,ie,!0).offsetParent,ue=G.slice(1).reduce(function(xe,Ee){return eo(xe,Ee.matrix,N)},So(N));l.forEach(function(xe,Ee){if(ee-2===Ee&&(Y=U.slice()),ee-1===Ee&&(ae=U.slice()),!xe.matrix){var Ae=l[Ee+1],fe=nde(xe,Ae,oe,N,eo(ue,U,N));xe.matrix=Gp(fe,N)}U=eo(U,xe.matrix,N)});var de=!$&&a;j||(j=So(de?4:3));var Me=D2($&&j.length===16?hd(j,4,3):j,de),ge=H;return H=Oj(H,N,N),{hasZoom:b!==1||O!==1,hasFixed:x,matrixes:l,rootMatrix:H,originalRootMatrix:ge,beforeMatrix:Y,offsetMatrix:ae,allMatrix:U,targetMatrix:j,targetTransform:Me,inlineTransform:e.style.transform,transformOrigin:p,targetOrigin:g,is3d:F,offsetContainer:v,offsetRootContainer:M}}function qde(e,t,r,n){r===void 0&&(r=t);var i=0,o=0,l=0,a={},c=kq(e);if(e&&(i=c.offsetWidth,o=c.offsetHeight),e){var p=jde(e,t,r,n),g=Hg(p.allMatrix,p.transformOrigin,i,o);a=Ft(Ft({},p),g);var v=Hg(p.allMatrix,[50,50],100,100);l=Aq([v.pos1,v.pos2],v.direction)}var x=4;return Ft(Ft(Ft({hasZoom:!1,width:i,height:o,rotation:l},c),{originalRootMatrix:So(x),rootMatrix:So(x),beforeMatrix:So(x),offsetMatrix:So(x),allMatrix:So(x),targetMatrix:So(x),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function $T(e,t,r,n,i,o){o===void 0&&(o=[]);var l=1,a=[0,0],c=Lb(),p=Lb(),g=Lb(),v=Lb(),x=[0,0],b={},P=qde(t,r,i,!0);if(t){var I=Vu(t);o.forEach(function(G){b[G]=I(G)});var k=P.is3d?4:3,M=Hg(P.offsetMatrix,ma(P.transformOrigin,Fj(P.targetMatrix,k)),P.width,P.height);l=M.direction,a=ma(M.origin,[M.left-P.left,M.top-P.top]),v=u0(P.offsetRootContainer);var O=A0(n,n,!0).offsetParent||P.offsetRootContainer;if(P.hasZoom){var F=Hg(eo(P.originalRootMatrix,P.allMatrix),P.transformOrigin,P.width,P.height),N=Hg(P.originalRootMatrix,Q_(Vu(O)("transformOrigin")).map(function(G){return parseFloat(G)}),O.offsetWidth,O.offsetHeight);if(c=t5(F,v),g=t5(N,v,O,!0),e){var $=F.left,j=F.top;p=t5({left:$,top:j,bottom:j,right:j},v)}}else{c=u0(t),g=Que(O),e&&(p=u0(e));var U=g.left,H=g.top,Y=g.clientLeft,ae=g.clientTop,ee=[c.left-U,c.top-H];x=ci(uy(P.rootMatrix,ee,4),[Y+P.left,ae+P.top])}}return Ft({targetClientRect:c,containerClientRect:g,moveableClientRect:p,rootContainerClientRect:v,beforeDirection:l,beforeOrigin:a,originalBeforeOrigin:a,target:t,style:b,offsetDelta:x},P)}function xN(e){var t=e.pos1,r=e.pos2,n=e.pos3,i=e.pos4;if(!t||!r||!n||!i)return null;var o=Hp([t,r,n,i]),l=[o.minX,o.minY],a=ci(e.origin,l);return t=ci(t,l),r=ci(r,l),n=ci(n,l),i=ci(i,l),Ft(Ft({},e),{left:e.left,top:e.top,posDelta:l,pos1:t,pos2:r,pos3:n,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var cy=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=Ft({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},$T(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new fI,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}Cle(r._observerId),r._observerId=Mj(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return t.prototype.render=function(){var r=this.props,n=this.getState(),i=r.parentPosition,o=r.className,l=r.target,a=r.zoom,c=r.cspNonce,p=r.translateZ,g=r.cssStyled,v=r.groupable,x=r.linePadding,b=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var P=Ut(i||[0,0],2),I=P[0],k=P[1],M=n.left,O=n.top,F=n.target,N=n.direction,$=n.hasFixed,j=n.offsetDelta,U=r.targets,H=this.isDragging(),Y={};this.getEnabledAbles().forEach(function(ue){Y["data-able-".concat(ue.name.toLowerCase())]=!0});var ae=this._getAbleClassName(),ee=U&&U.length&&(F||v)||l||!this._hasFirstTarget&&this.state.isPersisted,G=this.controlBox||this.props.firstRenderState||this.props.persistData,ie=[M-I,O-k];!v&&r.useAccuratePosition&&(ie[0]+=j[0],ie[1]+=j[1]);var oe={position:$?"fixed":"absolute",display:ee?"block":"none",visibility:G?"visible":"hidden",transform:"translate3d(".concat(ie[0],"px, ").concat(ie[1],"px, ").concat(p,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return x&&(oe["--moveable-line-padding"]=x),b&&(oe["--moveable-control-padding"]=b),Q.createElement(g,Ft({cspNonce:c,ref:Fp(this,"controlBox"),className:"".concat(li("control-box",N===-1?"reverse":"",H?"dragging":"")," ").concat(ae," ").concat(o)},Y,{onClick:this._onPreventClick,style:oe}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,i=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Ng(this,!1),Ng(this,!0);var o=this.events;for(var l in o){var a=o[l];a&&a.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var n=this.props.ables||[];return mc(n,function(i){return i.name===r})},t.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,i=r.wrapperMoveable,o=r.container;return o||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(mI)>-1},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=this.targetGesto,o=this.controlGesto;return i&&DI(this)({inputEvent:r},n)?i.isFlag()||i.triggerDragStart(r):o&&this.isMoveableElement(n)&&(o.isFlag()||o.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var n=this.state,i=n.target,o=n.pos1,l=n.pos2,a=n.pos3,c=n.pos4,p=n.targetClientRect;if(!i)return 0;var g;if(lI(r)){var v=r.getBoundingClientRect();g={left:v.left,top:v.top,width:v.width,height:v.height}}else g=Ft({width:0,height:0},r);var x=g.left,b=g.top,P=g.width,I=g.height,k=UD([o,l,c,a],p),M=iue(k,[[x,b],[x+P,b],[x+P,b+I],[x,b+I]]),O=qj(k);return!M||!O?0:Math.min(100,M/O*100)},t.prototype.isInside=function(r,n){var i=this.state,o=i.target,l=i.pos1,a=i.pos2,c=i.pos3,p=i.pos4,g=i.targetClientRect;return o?ET([r,n],UD([l,a,p,c],g)):!1},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0);var o=this.props,l=!o.parentPosition&&!o.wrapperMoveable;l&&sy(!0);var a=o.parentMoveable,c=this.state,p=c.target||o.target,g=this.getContainer(),v=a?a._rootContainer:this._rootContainer,x=$T(this.controlBox,p,g,g,v||g,this._getRequestStyles());if(!p&&this._hasFirstTarget&&o.persistData){var b=xN(o.persistData);for(var P in b)x[P]=b[P]}l&&sy(),this.updateState(x,a?!1:i)},t.prototype.isDragging=function(r){var n,i,o=this.targetGesto,l=this.controlGesto;if(o?.isFlag()){if(!r)return!0;var a=o.getEventData();return!!(!((n=a[r])===null||n===void 0)&&n.isEventStart)}if(l?.isFlag()){if(!r)return!0;var a=l.getEventData();return!!(!((i=a[r])===null||i===void 0)&&i.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,n=$c(this.state),i=Ut(n,4),o=i[0],l=i[1],a=i[2],c=i[3],p=Nc(n),g=r.width,v=r.height,x=p.width,b=p.height,P=p.left,I=p.top,k=[r.left,r.top],M=ma(k,r.origin),O=ma(k,r.beforeOrigin),F=r.transformOrigin;return{width:x,height:b,left:P,top:I,pos1:o,pos2:l,pos3:a,pos4:c,offsetWidth:g,offsetHeight:v,beforeOrigin:O,origin:M,transformOrigin:F,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;n?.isIdle()===!1&&zT(this,!1),n?.stop()}if(!r||r==="control"){var n=this.controlGesto;n?.isIdle()===!1&&zT(this,!0),n?.stop()}},t.prototype.getRotation=function(){var r=this.state,n=r.pos1,i=r.pos2,o=r.direction;return cde(n,i,o)},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this,l=o.props,a=l.parentMoveable||l.wrapperMoveable||o,c=a.props.ables,p=l.groupable,g=mc(c,function(M){return M.name===r});if(this.isDragging()||!g||!g.request)return{request:function(){return this},requestEnd:function(){return this}};var v=g.request(o),x=i||n.isInstant,b=v.isControl?"controlAbles":"targetAbles",P="".concat(p?"Group":"").concat(v.isControl?"Control":""),I=un([],Ut(a[b]),!1),k={request:function(M){return c0(o,I,["drag"],P,"",Ft(Ft({},v.request(M)),{requestAble:r,isRequest:!0}),x),k},requestEnd:function(){return c0(o,I,["drag"],P,"End",Ft(Ft({},v.requestEnd()),{requestAble:r,isRequest:!0}),x),k}};return c0(o,I,["drag"],P,"Start",Ft(Ft({},v.requestStart(n)),{requestAble:r,isRequest:!0}),x),x?k.request(n).requestEnd():k},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,i=n.padding,o=r.originalBeforeOrigin,l=r.transformOrigin,a=r.allMatrix,c=r.is3d,p=r.pos1,g=r.pos2,v=r.pos3,x=r.pos4,b=r.left,P=r.top,I=r.isPersisted,k=n.zoom||1;if(!i&&k<=1){r.renderPoses=[p,g,v,x],r.renderLines=[[p,g],[g,x],[x,v],[v,p]];return}var M=jq(i||{}),O=M.left,F=M.top,N=M.bottom,$=M.right,j=c?4:3,U=[];I?U=l:this.controlBox&&n.groupable?U=o:U=ma(o,[b,P]);var H=W_(j,Gp(U.map(function(oe){return-oe}),j),a,Gp(l,j)),Y=Ec(H,p,[-O,-F],j),ae=Ec(H,g,[$,-F],j),ee=Ec(H,v,[-O,N],j),G=Ec(H,x,[$,N],j);r.renderPoses=[Y,ae,ee,G],r.renderLines=[[Y,ae],[ae,G],[G,ee],[ee,Y]];{var ie=k/2;r.renderLines=[[Ec(H,p,[-O-ie,-F],j),Ec(H,g,[$+ie,-F],j)],[Ec(H,g,[$,-F-ie],j),Ec(H,x,[$,N+ie],j)],[Ec(H,x,[$+ie,N],j),Ec(H,v,[-O-ie,N],j)],[Ec(H,v,[-O,N+ie],j),Ec(H,p,[-O,-F-ie],j)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,i=r.container,o=r.parentMoveable,l=this.state,a=l.target,c=l.container;if(!(!a&&!n)){this.updateAbles();var p=!jT(a,n),g=p||!jT(c,i);if(g){var v=i||this.controlBox;v&&this.unsetAbles(),this.updateState({target:n,container:i}),!o&&v&&this.updateRect("End",!1,!1),this._isPropTargetChanged=p}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,n){var i=this.props;if(this._emitter.trigger(r,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(r,n,!0);var o=i[r];return o&&o(n)},t.prototype.useCSS=function(r,n){var i=this.props.customStyledMap,o=r+n;return i[o]||(i[o]=Uj(r,n)),i[o]},t.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=n.persistData,l=n.firstRenderState;if(l&&!i)return l;if(!this._hasFirstTarget&&o){var a=xN(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},t.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var i=this.props,o=i.triggerAblesSimultaneously,l=this.getEnabledAbles(r),a="drag".concat(n,"Start"),c="pinch".concat(n,"Start"),p="drag".concat(n,"ControlStart"),g=Rb(l,[a,c],o),v=Rb(l,[p],o);this.enabledAbles=l,this.targetAbles=g,this.controlAbles=v},t.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var o in r)i[o]=r[o]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},t.prototype.renderAbles=function(){var r=this,n=this.props,i=n.triggerAblesSimultaneously,o={createElement:Q.createElement};return this.renderState={},ode(Oq(Rb(this.getEnabledAbles(),["render"],i).map(function(l){var a=l.render;return a(r,o)||[]})).filter(function(l){return l}),function(l){var a=l.key;return a}).map(function(l){return l[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,l,a=(l=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&l!==void 0?l:[];return un(un([],Ut(n),!1),Ut(a),!1)},un([],Ut(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,i=this._dragTarget,o=!r&&this.targetGesto||this._isTargetChanged(!0);o&&(Ng(this,!1),this.updateState({gestos:{}})),n||Ng(this,!0),i&&r&&!this.targetGesto&&(this.targetGesto=Yq(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=Zq(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=Yd(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,n=r,i=n.zoom,o=n.hideDefaultLines,l=n.hideChildMoveableDefaultLines,a=n.parentMoveable;if(o||a&&l)return[];var c=this.getState(),p={createElement:Q.createElement};return c.renderLines.map(function(g,v){return k0(p,"",g[0],g[1],i,"render-line-".concat(v))})},t.prototype._isTargetChanged=function(r){var n=this.props,i=n.dragTarget||n.target,o=this._prevOriginalDragTarget,l=this._prevDragArea,a=n.dragArea,c=!a&&o!==i,p=(r||a)&&l!==a;return c||p||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,o=this.events,l=Sy(o);if(this._isTargetChanged())for(var a in o){var c=o[a];c&&c.destroy(),o[a]=null}if(i){var p=this.enabledAbles;l.forEach(function(g){var v=Rb(p,[g]),x=v.length>0,b=o[g];if(!x){b&&(b.destroy(),o[g]=null);return}b||(b=new zde(i,r,g),o[g]=b),b.setAbles(v)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Yd(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Yd(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(un(un([],Ut(this._getAbleViewClassNames()),!1),[this.isDragging()?yde:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,i=Nq(r.filter(Boolean),function(p){return p}).map(function(p){var g=Ut(p,1),v=g[0];return v}),o=this._viewClassNames,l=dI(o,i),a=l.removed,c=l.added;a.forEach(function(p){Dj(n,o[p])}),c.forEach(function(p){Rj(n,i[p])}),this._viewClassNames=i},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var i=this.getEnabledAbles(),o=this.targetGesto,l=this.controlGesto,a=o?.isFlag()?o.getEventData():{},c=l?.isFlag()?l.getEventData():{};return i.map(function(p){var g,v,x,b=p.name,P=((g=p.className)===null||g===void 0?void 0:g.call(p,n))||"";return(!((v=a[b])===null||v===void 0)&&v.isEventStart||!((x=c[b])===null||x===void 0)&&x.isEventStart)&&(P+=" ".concat(li("".concat(b).concat(r,"-dragging")))),P.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var n,i=this.props,o=i.target,l=Ah(this.getControlBoxElement());if(!l.ResizeObserver||!o||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===o&&this._reiszeObserver)){var a=new l.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},t.prototype._updateMutationObserver=function(r){var n=this,i,o=this.props,l=o.target,a=Ah(this.getControlBoxElement());if(!a.MutationObserver||!l||!o.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===l&&this._mutationObserver)){var c=new a.MutationObserver(function(p){var g,v;try{for(var x=xue(p),b=x.next();!b.done;b=x.next()){var P=b.value;P.type==="attributes"&&P.attributeName==="style"&&n.checkUpdateRect()}}catch(I){g={error:I}}finally{try{b&&!b.done&&(v=x.return)&&v.call(x)}finally{if(g)throw g.error}}});c.observe(l,{attributes:!0}),this._mutationObserver=c}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Eq,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t})(Q.PureComponent),NI={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,n=e.props,i=n.targets||[],o=e.getState(),l=o.left,a=o.top,c=o.isPersisted,p=n.zoom||1,g=e.renderGroupRects,v=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];c?i=v.map(function(){return null}):v=[];var x=Og(e,"parentPosition",[l,a],function(P){return P.join(",")}),b=Og(e,"requestStyles",e.getRequestChildStyles(),function(P){return P.join(",")});return e.moveables=e.moveables.slice(0,i.length),un(un([],Ut(i.map(function(P,I){return t.createElement(cy,{key:"moveable"+I,ref:Pj(e,"moveables",I),target:P,origin:!1,requestStyles:b,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[l,a],persistData:v[I],zoom:p})})),!1),Ut(Oq(g.map(function(P,I){var k=P.pos1,M=P.pos2,O=P.pos3,F=P.pos4,N=[k,M,O,F];return[[0,1],[1,3],[3,2],[2,0]].map(function($,j){var U=Ut($,2),H=U[0],Y=U[1];return k0(t,"",ci(N[H],x),ci(N[Y],x),p,"group-rect-".concat(I,"-").concat(j))})}))),!1)}},$de=p1("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,i=t.inputTarget,o=e.isMoveableElement(i),l=!o&&e.controlBox.contains(i);if(!(!n||!i||t.isDrag||e.isMoveableElement(i)||l)){var a=r.contains(i);Rn(e,"onClick",Ri(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:e.props.target,containsTarget:a}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(!(!r||!n||t.isDrag||e.isMoveableElement(n)||t.datas.inputTarget===n)){var i=e.props.targets,o=i.indexOf(n),l=o>-1,a=!1;o===-1&&(o=Vf(i,function(c){return c.contains(n)}),a=o>-1),Rn(e,"onClickGroup",Ri(e,t,{isDouble:t.isDouble,targets:i,inputTarget:n,targetIndex:o,isTarget:l,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function Zm(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),Ft(Ft({},e),{datas:t})}var Vde=p1("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?aq(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&al(i,li("direction"))&&al(i,li("edge"))&&al(i,li("edgeDraggable"))},dragStart:function(e,t){return Cu.dragStart(e,Zm(t))},drag:function(e,t){return Cu.drag(e,Zm(t))},dragEnd:function(e,t){return Cu.dragEnd(e,Zm(t))},dragGroupCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&al(i,li("direction"))&&al(i,li("line"))},dragGroupStart:function(e,t){return Cu.dragGroupStart(e,Zm(t))},dragGroup:function(e,t){return Cu.dragGroup(e,Zm(t))},dragGroupEnd:function(e,t){return Cu.dragGroupEnd(e,Zm(t))},unset:function(e){return Cu.unset(e)}}),Jq={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Ude=[Wq,Vq,Wce,fde,Cu,Vde,NT,hde,mde,kce,_de,xde,vde,Rde,Lde,Fde,NI,Jq,$de,$q,Xq];function wN(e,t){var r=Ut(e,3),n=r[0],i=r[1],o=r[2];return(n*t[0]+i*t[1]+o)/Math.sqrt(n*n+i*i)}function Ob(e,t){var r=Ut(e,2),n=r[0],i=r[1];return-n*t[0]-i*t[1]}function SN(e,t){return Math.max.apply(Math,un([],Ut(e.map(function(r){var n=Ut(r,4),i=n[0],o=n[1],l=n[2],a=n[3];return Math.max(i[t],o[t],l[t],a[t])})),!1))}function CN(e,t){return Math.min.apply(Math,un([],Ut(e.map(function(r){var n=Ut(r,4),i=n[0],o=n[1],l=n[2],a=n[3];return Math.min(i[t],o[t],l[t],a[t])})),!1))}function Gde(e,t){var r,n,i,o=[0,0],l=[0,0],a=[0,0],c=[0,0],p=0,g=0;if(!e.length)return{pos1:o,pos2:l,pos3:a,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:p,height:g,rotation:t};var v=Pi(t,Iu);if(v%90){var x=v/180*Math.PI,b=Math.tan(x),P=-1/b,I=[MT,WD],k=[[0,0],[0,0]],M=[MT,WD],O=[[0,0],[0,0]];e.forEach(function(Se){Se.forEach(function(we){var De=wN([-b,1,0],we),Re=wN([-P,1,0],we);I[0]>De&&(k[0]=we,I[0]=De),I[1]<De&&(k[1]=we,I[1]=De),M[0]>Re&&(O[0]=we,M[0]=Re),M[1]<Re&&(O[1]=we,M[1]=Re)})});var F=Ut(k,2),N=F[0],$=F[1],j=Ut(O,2),U=j[0],H=j[1],Y=[-b,1,Ob([-b,1],N)],ae=[-b,1,Ob([-b,1],$)],ee=[-P,1,Ob([-P,1],U)],G=[-P,1,Ob([-P,1],H)];r=Ut([[Y,ee],[Y,G],[ae,ee],[ae,G]].map(function(Se){var we=Ut(Se,2),De=we[0],Re=we[1];return hI(De,Re)[0]}),4),o=r[0],l=r[1],a=r[2],c=r[3],p=M[1]-M[0],g=I[1]-I[0]}else{var ie=CN(e,0),oe=CN(e,1),ue=SN(e,0),de=SN(e,1);if(o=[ie,oe],l=[ue,oe],a=[ie,de],c=[ue,de],p=ue-ie,g=de-oe,v%180){var Me=[a,o,c,l];n=Ut(Me,4),o=n[0],l=n[1],a=n[2],c=n[3],p=de-oe,g=ue-ie}}if(v%360>180){var Me=[c,a,l,o];i=Ut(Me,4),o=i[0],l=i[1],a=i[2],c=i[3]}var ge=Hp([o,l,a,c]),xe=ge.minX,Ee=ge.minY,Ae=ge.maxX,fe=ge.maxY;return{pos1:o,pos2:l,pos3:a,pos4:c,width:p,height:g,minX:xe,minY:Ee,maxX:Ae,maxY:fe,rotation:t}}function Qq(e,t){var r=t.map(function(n){if(Cl(n)){var i=Qq(e,n),o=i.length;return o>1?i:o===1?i[0]:null}else{var l=mc(e,function(a){var c=a.manager;return c.props.target===n});return l?(l.finded=!0,l.manager):null}}).filter(Boolean);return r.length===1&&Cl(r[0])?r[0]:r}var Hde=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new jj,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){var o;i===void 0&&(i=!0);var l=this.state;if(!this.controlBox||l.isPersisted)return;sy(!0),this.moveables.forEach(function(Oe){Oe.updateRect(r,!1,!1)});var a=this.props,c=this.moveables,p=l.target||a.target,g=c.map(function(Oe){return{finded:!1,manager:Oe}}),v=this.props.targetGroups||[],x=Qq(g,v),b=a.useDefaultGroupRotate;x.push.apply(x,un([],Ut(g.filter(function(Oe){var it=Oe.finded;return!it}).map(function(Oe){var it=Oe.manager;return it})),!1));var P=[],I=!n||r!==""&&a.updateGroup,k=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var M=(o=a.persistData)===null||o===void 0?void 0:o.rotation;M!=null&&(k=M)}function O(Oe,it,Ye){var rt=Oe.map(function(zt){if(Cl(zt)){var st=O(zt,it),sr=[st.pos1,st.pos2,st.pos3,st.pos4];return P.push(st),{poses:sr,rotation:st.rotation}}else return{poses:$c(zt.state),rotation:zt.getRotation()}}),Ie=rt.map(function(zt){var st=zt.rotation;return st}),It=0,at=Ie[0],je=Ie.every(function(zt){return Math.abs(at-zt)<.1});I?It=!b&&je?at:k:It=!b&&!Ye&&je?at:it;var Ht=rt.map(function(zt){var st=zt.poses;return st}),Wt=Gde(Ht,It);return Wt}var F=O(x,this.rotation,!0);I&&(this.rotation=F.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=v,this.renderGroupRects=P;var N=this.transformOrigin,$=this.rotation,j=this.scale,U=F.width,H=F.height,Y=F.minX,ae=F.minY,ee=dde([[0,0],[U,0],[0,H],[U,H]],MI(N,U,H),this.rotation/180*Math.PI),G=Hp(ee.result),ie=G.minX,oe=G.minY,ue=" rotate(".concat($,"deg)")+" scale(".concat(Eu(j[0]),", ").concat(Eu(j[1]),")"),de="translate(".concat(-ie,"px, ").concat(-oe,"px)").concat(ue);this.controlBox.style.transform="translate3d(".concat(Y,"px, ").concat(ae,"px, ").concat(this.props.translateZ||0,")"),p.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(N,";")+"width:".concat(U,"px;height:").concat(H,"px;")+"transform: ".concat(de),l.width=U,l.height=H;var Me=this.getContainer(),ge=$T(this.controlBox,p,this.controlBox,this.getContainer(),this._rootContainer||Me,[]),xe=[ge.left,ge.top],Ee=Ut($c(ge),4),Ae=Ee[0],fe=Ee[1],Se=Ee[2],we=Ee[3],De=Hp([Ae,fe,Se,we]),Re=[De.minX,De.minY],$e=Eu(j[0]*j[1]);ge.pos1=ci(Ae,Re),ge.pos2=ci(fe,Re),ge.pos3=ci(Se,Re),ge.pos4=ci(we,Re),ge.left=Y-ge.left+Re[0],ge.top=ae-ge.top+Re[1],ge.origin=ci(ma(xe,ge.origin),Re),ge.beforeOrigin=ci(ma(xe,ge.beforeOrigin),Re),ge.originalBeforeOrigin=ma(xe,ge.originalBeforeOrigin),ge.transformOrigin=ci(ma(xe,ge.transformOrigin),Re),p.style.transform="translate(".concat(-ie-Re[0],"px, ").concat(-oe-Re[1],"px)")+ue,sy(),this.updateState(Ft(Ft({},ge),{posDelta:Re,direction:$e,beforeDirection:$e}),i)},t.prototype.getRect=function(){return Ft(Ft({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,n,i){if(i||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,l,a=(l=(o=i.requestChildStyle)===null||o===void 0?void 0:o.call(i))!==null&&l!==void 0?l:[];return un(un([],Ut(n),!1),Ut(a),!1)},[]);return r},t.prototype.getMoveables=function(){return un([],Ut(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,un(un([],Ut(this.props.ables),!1),[NI],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Yd(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,n=this.props,i=this._prevDragTarget,o=n.dragTarget||this.areaElement,l=n.targets,a=this.differ.update(l),c=a.added,p=a.changed,g=a.removed,v=c.length||g.length;(v||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Ng(this,!1),Ng(this,!0),this.updateState({gestos:{}})),i!==o&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=Yq(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Zq(this,"GroupControl")));var x=!jT(r.container,n.container);x&&(r.container=n.container),(x||v||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||p.length||l.length&&!zq(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},t.prototype._updateObserver=function(){},t.defaultProps=Ft(Ft({},cy.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t})(cy),Wde=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,n,i=this.props,o=i.cspNonce,l=i.cssStyled,a=i.persistData,c=i.targets||[],p=c.length,g=this.isUnmounted||!p,v=(n=a?.children)!==null&&n!==void 0?n:[];return g&&!p&&v.length?c=v.map(function(){return null}):g||(v=[]),Q.createElement(l,{cspNonce:o,ref:Fp(this,"controlBox"),className:li("control-box")},c.map(function(x,b){var P,I,k=(I=(P=i.individualGroupableProps)===null||P===void 0?void 0:P.call(i,x,b))!==null&&I!==void 0?I:{};return Q.createElement(cy,Ft({key:"moveable"+b,ref:Pj(r,"moveables",b)},i,k,{target:x,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:v[b]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0),sy(!0),this.moveables.forEach(function(o){o.updateRect(r,n,i)}),sy()},t.prototype.getRect=function(){return Ft(Ft({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this.moveables.map(function(c){return c.request(r,Ft(Ft({},n),{isInstant:!1}),!1)}),l=i||n.isInstant,a={request:function(c){return o.forEach(function(p){return p.request(c)}),this},requestEnd:function(){return o.forEach(function(c){return c.requestEnd()}),this}};return l?a.request(n).requestEnd():a},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=n,o=mc(this.moveables,function(l){var a=l.getTargets()[0],c=l.getControlBoxElement(),p=l.getDragElement();return!a||!p?!1:p===i||p.contains(i)||p!==a&&a===i||a.contains(i)||c===i||c.contains(i)});return o&&o.dragStart(r,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return un([],Ut(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t})(cy);function e$(e,t){var r=[];return e.forEach(function(n){if(n){if(Yf(n)){t[n]&&r.push.apply(r,un([],Ut(t[n]),!1));return}Cl(n)?r.push.apply(r,un([],Ut(e$(n,t)),!1)):r.push(n)}}),r}function t$(e,t){var r=[];return e.forEach(function(n){if(n){if(Yf(n)){t[n]&&r.push.apply(r,un([],Ut(t[n]),!1));return}Cl(n)?r.push(t$(n,t)):r.push(n)}}),r}function r$(e,t){return e.length!==t.length||e.some(function(r,n){var i=t[n];return!r&&!i?!1:r!=i?Cl(r)&&Cl(i)?r$(r,i):!0:!1})}var Xde=(function(e){h1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new jj,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(o){var l=o.css;l&&l.forEach(function(a){r[a]=!0})});var i=Sy(r).join(`
`);this.defaultStyled=Uj("div",fle(mI,Lue+i))},t.getTotalAbles=function(){return un([Vq,NI,Jq,$q],Ut(this.defaultAbles),!1)},t.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,o=i.ables,l=i.props,a=bue(i,["ables","props"]),c=Ut(this._updateRefs(!0),2),p=c[0],g=c[1],v=e$(p,g),x=v.length>1,b=n.getTotalAbles(),P=un(un([],Ut(b),!1),Ut(o||[]),!1),I=Ft(Ft(Ft({},a),l||{}),{ables:P,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=v;var k=null,M=this.moveable,O=a.persistData;if(O?.children&&(x=!0),a.individualGroupable)return Q.createElement(Wde,Ft({key:"individual-group",ref:Fp(this,"moveable")},I,{target:null,targets:v}));if(x){var F=t$(p,g);if(M&&!M.props.groupable&&!M.props.individualGroupable){var N=M.props.target;N&&v.indexOf(N)>-1&&(k=Ft({},M.state))}return Q.createElement(Hde,Ft({key:"group",ref:Fp(this,"moveable")},I,(r=a.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:v,targetGroups:F,firstRenderState:k}))}else{var $=v[0];if(M&&(M.props.groupable||M.props.individualGroupable)){var j=M.moveables||[],U=mc(j,function(H){return H.props.target===$});U&&(k=Ft({},U.state))}return Q.createElement(cy,Ft({key:"single",ref:Fp(this,"moveable")},I,{target:$,firstRenderState:k}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(i){n=i})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var n=this.refTargets,i=AI(this.props.target||this.props.targets),o=typeof document<"u",l=r$(n,i),a=this.selectorMap,c={};return this.refTargets.forEach(function p(g){if(Yf(g)){var v=a[g];v?c[g]=a[g]:o&&(l=!0,c[g]=[].slice.call(document.querySelectorAll(g)))}else Cl(g)&&g.forEach(p)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!r&&l]},t.prototype._checkChangeTargets=function(){var r,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),l=o.added,a=o.removed,c=l.length||a.length;c&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var p=Ut(this._updateRefs(),3),g=p[0],v=p[1],x=p[2];this.refTargets=g,this.selectorMap=v,x&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,_ue([hle(Nue)],t.prototype,"moveable",void 0),t})(Q.PureComponent),Yde=(function(e){h1(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=Ude,t})(Xde),lu=63710088e-1,n$={centimeters:lu*100,centimetres:lu*100,degrees:360/(2*Math.PI),feet:lu*3.28084,inches:lu*39.37,kilometers:lu/1e3,kilometres:lu/1e3,meters:lu,metres:lu,miles:lu/1609.344,millimeters:lu*1e3,millimetres:lu*1e3,nauticalmiles:lu/1852,radians:1,yards:lu*1.0936};function Xp(e,t,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function Vc(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!EN(e[0])||!EN(e[1]))throw new Error("coordinates must contain numbers");return Xp({type:"Point",coordinates:e},t,r)}function O2(e,t,r={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return Xp({type:"Polygon",coordinates:e},t,r)}function zl(e,t,r={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Xp({type:"LineString",coordinates:e},t,r)}function Uf(e,t={}){const r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function Zde(e,t,r={}){return Xp({type:"MultiLineString",coordinates:e},t,r)}function i$(e,t="kilometers"){const r=n$[t];if(!r)throw new Error(t+" units is invalid");return e*r}function OI(e,t="kilometers"){const r=n$[t];if(!r)throw new Error(t+" units is invalid");return e/r}function Kde(e,t){return nx(OI(e,t))}function nx(e){return e%(2*Math.PI)*180/Math.PI}function od(e){return e%360*Math.PI/180}function EN(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function FI(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Bh(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function a$(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function M0(e){return e.type==="Feature"?e.geometry:e}function o$(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function L0(e,t,r={}){if(r.final===!0)return Jde(e,t);const n=Bh(e),i=Bh(t),o=od(n[0]),l=od(i[0]),a=od(n[1]),c=od(i[1]),p=Math.sin(l-o)*Math.cos(c),g=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(l-o);return nx(Math.atan2(p,g))}function Jde(e,t){let r=L0(t,e);return r=(r+180)%360,r}function dy(e,t,r,n={}){const i=Bh(e),o=od(i[0]),l=od(i[1]),a=od(r),c=OI(t,n.units),p=Math.asin(Math.sin(l)*Math.cos(c)+Math.cos(l)*Math.sin(c)*Math.cos(a)),g=o+Math.atan2(Math.sin(a)*Math.sin(c)*Math.cos(l),Math.cos(c)-Math.sin(l)*Math.sin(p)),v=nx(g),x=nx(p);return Vc([v,x],n.properties)}function F2(e,t,r={}){var n=Bh(e),i=Bh(t),o=od(i[1]-n[1]),l=od(i[0]-n[0]),a=od(n[1]),c=od(i[1]),p=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(a)*Math.cos(c);return i$(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),r.units)}function Qde(e,t,r={}){const i=M0(e).coordinates;let o=0;for(let l=0;l<i.length&&!(t>=o&&l===i.length-1);l++)if(o>=t){const a=t-o;if(a){const c=L0(i[l],i[l-1])-180;return dy(i[l],a,c,r)}else return Vc(i[l])}else o+=F2(i[l],i[l+1],r);return Vc(i[i.length-1])}function Py(e,t,r){if(e!==null)for(var n,i,o,l,a,c,p,g=0,v=0,x,b=e.type,P=b==="FeatureCollection",I=b==="Feature",k=P?e.features.length:1,M=0;M<k;M++){p=P?e.features[M].geometry:I?e.geometry:e,x=p?p.type==="GeometryCollection":!1,a=x?p.geometries.length:1;for(var O=0;O<a;O++){var F=0,N=0;if(l=x?p.geometries[O]:p,l!==null){c=l.coordinates;var $=l.type;switch(g=r&&($==="Polygon"||$==="MultiPolygon")?1:0,$){case null:break;case"Point":if(t(c,v,M,F,N)===!1)return!1;v++,F++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(t(c[n],v,M,F,N)===!1)return!1;v++,$==="MultiPoint"&&F++}$==="LineString"&&F++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-g;i++){if(t(c[n][i],v,M,F,N)===!1)return!1;v++}$==="MultiLineString"&&F++,$==="Polygon"&&N++}$==="Polygon"&&F++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(N=0,i=0;i<c[n].length;i++){for(o=0;o<c[n][i].length-g;o++){if(t(c[n][i][o],v,M,F,N)===!1)return!1;v++}N++}F++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(Py(l.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function TN(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function B2(e,t){var r,n,i,o,l,a,c,p,g,v,x=0,b=e.type==="FeatureCollection",P=e.type==="Feature",I=b?e.features.length:1;for(r=0;r<I;r++){for(a=b?e.features[r].geometry:P?e.geometry:e,p=b?e.features[r].properties:P?e.properties:{},g=b?e.features[r].bbox:P?e.bbox:void 0,v=b?e.features[r].id:P?e.id:void 0,c=a?a.type==="GeometryCollection":!1,l=c?a.geometries.length:1,i=0;i<l;i++){if(o=c?a.geometries[i]:a,o===null){if(t(null,x,p,g,v)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,x,p,g,v)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],x,p,g,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function efe(e,t,r){var n=r;return B2(e,function(i,o,l,a,c){n=t(n,i,o,l,a,c)}),n}function BI(e,t){B2(e,function(r,n,i,o,l){var a=r===null?null:r.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Xp(r,i,{bbox:o,id:l}),n,0)===!1?!1:void 0}var c;switch(a){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var p=0;p<r.coordinates.length;p++){var g=r.coordinates[p],v={type:c,coordinates:g};if(t(Xp(v,i),n,p)===!1)return!1}})}function tfe(e,t){BI(e,function(r,n,i){var o=0;if(r.geometry){var l=r.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var a,c=0,p=0,g=0;if(Py(r,function(v,x,b,P,I){if(a===void 0||n>c||P>p||I>g){a=v,c=n,p=P,g=I,o=0;return}var k=zl([a,v],r.properties);if(t(k,n,i,I,o)===!1)return!1;o++,a=v})===!1)return!1}}})}function rfe(e,t,r){var n=r,i=!1;return tfe(e,function(o,l,a,c,p){i===!1&&r===void 0?n=o:n=t(n,o,l,a,c,p),i=!0}),n}function nfe(e){return efe(e,(t,r)=>t+ife(r),0)}function ife(e){let t=0,r;switch(e.type){case"Polygon":return PN(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=PN(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function PN(e){let t=0;if(e&&e.length>0){t+=Math.abs(IN(e[0]));for(let r=1;r<e.length;r++)t-=Math.abs(IN(e[r]))}return t}var afe=lu*lu/2,i5=Math.PI/180;function IN(e){const t=e.length-1;if(t<=2)return 0;let r=0,n=0;for(;n<t;){const i=e[n],o=e[n+1===t?0:n+1],l=e[n+2>=t?(n+2)%t:n+2],a=i[0]*i5,c=o[1]*i5,p=l[0]*i5;r+=(p-a)*Math.sin(c),n++}return r*afe}function yc(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const r=[1/0,1/0,-1/0,-1/0];return Py(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}function kN(e,t={}){const r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const l=[r,n];return O2([[l,[i,n],[i,o],[r,o],l]],t.properties,{bbox:e,id:t.id})}const Ff=11102230246251565e-32,ou=134217729,ofe=(3+8*Ff)*Ff;function a5(e,t,r,n,i){let o,l,a,c,p=t[0],g=n[0],v=0,x=0;g>p==g>-p?(o=p,p=t[++v]):(o=g,g=n[++x]);let b=0;if(v<e&&x<r)for(g>p==g>-p?(l=p+o,a=o-(l-p),p=t[++v]):(l=g+o,a=o-(l-g),g=n[++x]),o=l,a!==0&&(i[b++]=a);v<e&&x<r;)g>p==g>-p?(l=o+p,c=l-o,a=o-(l-c)+(p-c),p=t[++v]):(l=o+g,c=l-o,a=o-(l-c)+(g-c),g=n[++x]),o=l,a!==0&&(i[b++]=a);for(;v<e;)l=o+p,c=l-o,a=o-(l-c)+(p-c),p=t[++v],o=l,a!==0&&(i[b++]=a);for(;x<r;)l=o+g,c=l-o,a=o-(l-c)+(g-c),g=n[++x],o=l,a!==0&&(i[b++]=a);return(o!==0||b===0)&&(i[b++]=o),b}function sfe(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function y1(e){return new Float64Array(e)}const lfe=(3+16*Ff)*Ff,ufe=(2+12*Ff)*Ff,cfe=(9+64*Ff)*Ff*Ff,Km=y1(4),AN=y1(8),MN=y1(12),LN=y1(16),wu=y1(4);function dfe(e,t,r,n,i,o,l){let a,c,p,g,v,x,b,P,I,k,M,O,F,N,$,j,U,H;const Y=e-i,ae=r-i,ee=t-o,G=n-o;N=Y*G,x=ou*Y,b=x-(x-Y),P=Y-b,x=ou*G,I=x-(x-G),k=G-I,$=P*k-(N-b*I-P*I-b*k),j=ee*ae,x=ou*ee,b=x-(x-ee),P=ee-b,x=ou*ae,I=x-(x-ae),k=ae-I,U=P*k-(j-b*I-P*I-b*k),M=$-U,v=$-M,Km[0]=$-(M+v)+(v-U),O=N+M,v=O-N,F=N-(O-v)+(M-v),M=F-j,v=F-M,Km[1]=F-(M+v)+(v-j),H=O+M,v=H-O,Km[2]=O-(H-v)+(M-v),Km[3]=H;let ie=sfe(4,Km),oe=ufe*l;if(ie>=oe||-ie>=oe||(v=e-Y,a=e-(Y+v)+(v-i),v=r-ae,p=r-(ae+v)+(v-i),v=t-ee,c=t-(ee+v)+(v-o),v=n-G,g=n-(G+v)+(v-o),a===0&&c===0&&p===0&&g===0)||(oe=cfe*l+ofe*Math.abs(ie),ie+=Y*g+G*a-(ee*p+ae*c),ie>=oe||-ie>=oe))return ie;N=a*G,x=ou*a,b=x-(x-a),P=a-b,x=ou*G,I=x-(x-G),k=G-I,$=P*k-(N-b*I-P*I-b*k),j=c*ae,x=ou*c,b=x-(x-c),P=c-b,x=ou*ae,I=x-(x-ae),k=ae-I,U=P*k-(j-b*I-P*I-b*k),M=$-U,v=$-M,wu[0]=$-(M+v)+(v-U),O=N+M,v=O-N,F=N-(O-v)+(M-v),M=F-j,v=F-M,wu[1]=F-(M+v)+(v-j),H=O+M,v=H-O,wu[2]=O-(H-v)+(M-v),wu[3]=H;const ue=a5(4,Km,4,wu,AN);N=Y*g,x=ou*Y,b=x-(x-Y),P=Y-b,x=ou*g,I=x-(x-g),k=g-I,$=P*k-(N-b*I-P*I-b*k),j=ee*p,x=ou*ee,b=x-(x-ee),P=ee-b,x=ou*p,I=x-(x-p),k=p-I,U=P*k-(j-b*I-P*I-b*k),M=$-U,v=$-M,wu[0]=$-(M+v)+(v-U),O=N+M,v=O-N,F=N-(O-v)+(M-v),M=F-j,v=F-M,wu[1]=F-(M+v)+(v-j),H=O+M,v=H-O,wu[2]=O-(H-v)+(M-v),wu[3]=H;const de=a5(ue,AN,4,wu,MN);N=a*g,x=ou*a,b=x-(x-a),P=a-b,x=ou*g,I=x-(x-g),k=g-I,$=P*k-(N-b*I-P*I-b*k),j=c*p,x=ou*c,b=x-(x-c),P=c-b,x=ou*p,I=x-(x-p),k=p-I,U=P*k-(j-b*I-P*I-b*k),M=$-U,v=$-M,wu[0]=$-(M+v)+(v-U),O=N+M,v=O-N,F=N-(O-v)+(M-v),M=F-j,v=F-M,wu[1]=F-(M+v)+(v-j),H=O+M,v=H-O,wu[2]=O-(H-v)+(M-v),wu[3]=H;const Me=a5(de,MN,4,wu,LN);return LN[Me-1]}function ffe(e,t,r,n,i,o){const l=(t-o)*(r-i),a=(e-i)*(n-o),c=l-a,p=Math.abs(l+a);return Math.abs(c)>=lfe*p?c:-dfe(e,t,r,n,i,o,p)}function hfe(e,t){var r,n,i=0,o,l,a,c,p,g,v,x=e[0],b=e[1],P=t.length;for(r=0;r<P;r++){n=0;var I=t[r],k=I.length-1;if(g=I[0],g[0]!==I[k][0]&&g[1]!==I[k][1])throw new Error("First and last coordinates in a ring must be the same");for(l=g[0]-x,a=g[1]-b,n;n<k;n++){if(v=I[n+1],c=v[0]-x,p=v[1]-b,a===0&&p===0){if(c<=0&&l>=0||l<=0&&c>=0)return 0}else if(p>=0&&a<=0||p<=0&&a>=0){if(o=ffe(l,c,a,p,0,0),o===0)return 0;(o>0&&p>0&&a<=0||o<0&&p<=0&&a>0)&&i++}g=v,a=p,l=c}}return i%2!==0}function z2(e,t,r={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const n=Bh(e),i=M0(t),o=i.type,l=t.bbox;let a=i.coordinates;if(l&&pfe(n,l)===!1)return!1;o==="Polygon"&&(a=[a]);let c=!1;for(var p=0;p<a.length;++p){const g=hfe(n,a[p]);if(g===0)return!r.ignoreBoundary;g&&(c=!0)}return c}function pfe(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function R0(e,t,r={}){const n=Bh(e),i=a$(t);for(let o=0;o<i.length-1;o++){let l=!1;if(r.ignoreEndVertices&&(o===0&&(l="start"),o===i.length-2&&(l="end"),o===0&&o+1===i.length-1&&(l="both")),mfe(i[o],i[o+1],n,l,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function mfe(e,t,r,n,i){const o=r[0],l=r[1],a=e[0],c=e[1],p=t[0],g=t[1],v=r[0]-a,x=r[1]-c,b=p-a,P=g-c,I=v*P-x*b;if(i!==null){if(Math.abs(I)>i)return!1}else if(I!==0)return!1;if(Math.abs(b)===Math.abs(P)&&Math.abs(b)===0)return n?!1:r[0]===e[0]&&r[1]===e[1];if(n){if(n==="start")return Math.abs(b)>=Math.abs(P)?b>0?a<o&&o<=p:p<=o&&o<a:P>0?c<l&&l<=g:g<=l&&l<c;if(n==="end")return Math.abs(b)>=Math.abs(P)?b>0?a<=o&&o<p:p<o&&o<=a:P>0?c<=l&&l<g:g<l&&l<=c;if(n==="both")return Math.abs(b)>=Math.abs(P)?b>0?a<o&&o<p:p<o&&o<a:P>0?c<l&&l<g:g<l&&l<c}else return Math.abs(b)>=Math.abs(P)?b>0?a<=o&&o<=p:p<=o&&o<=a:P>0?c<=l&&l<=g:g<=l&&l<=c;return!1}function gfe(e,t){const r=M0(e),n=M0(t),i=r.type,o=n.type,l=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return zI(l,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return vfe(r,n);case"MultiPoint":return bfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return R0(n,r,{ignoreEndVertices:!0});case"LineString":return wfe(r,n);case"MultiPoint":return _fe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return z2(n,r,{ignoreBoundary:!0});case"LineString":return Sfe(r,n);case"Polygon":return s$(r,n);case"MultiPoint":return xfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Polygon":return yfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function yfe(e,t){return e.coordinates.some(r=>s$({type:"Polygon",coordinates:r},t))}function vfe(e,t){let r,n=!1;for(r=0;r<e.coordinates.length;r++)if(zI(e.coordinates[r],t.coordinates)){n=!0;break}return n}function bfe(e,t){for(const r of t.coordinates){let n=!1;for(const i of e.coordinates)if(zI(r,i)){n=!0;break}if(!n)return!1}return!0}function _fe(e,t){let r=!1;for(const n of t.coordinates)if(R0(n,e,{ignoreEndVertices:!0})&&(r=!0),!R0(n,e))return!1;return!!r}function xfe(e,t){for(const r of t.coordinates)if(!z2(r,e,{ignoreBoundary:!0}))return!1;return!0}function wfe(e,t){let r=!1;for(const n of t.coordinates)if(R0({type:"Point",coordinates:n},e,{ignoreEndVertices:!0})&&(r=!0),!R0({type:"Point",coordinates:n},e,{ignoreEndVertices:!1}))return!1;return r}function Sfe(e,t){let r=!1,n=0;const i=yc(e),o=yc(t);if(!l$(i,o))return!1;for(n;n<t.coordinates.length-1;n++){const l=Cfe(t.coordinates[n],t.coordinates[n+1]);if(z2({type:"Point",coordinates:l},e,{ignoreBoundary:!0})){r=!0;break}}return r}function s$(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;const r=yc(e),n=yc(t);if(!l$(r,n))return!1;const i=M0(t).coordinates;for(const o of i)for(const l of o)if(!z2(l,e))return!1;return!0}function l$(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function zI(e,t){return e[0]===t[0]&&e[1]===t[1]}function Cfe(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function Efe(e,t={}){const r=yc(e),n=(r[0]+r[2])/2,i=(r[1]+r[3])/2;return Vc([n,i],t.properties,t)}var y_={exports:{}},Tfe=y_.exports,RN;function Pfe(){return RN||(RN=1,(function(e,t){(function(r,n){e.exports=n()})(Tfe,(function(){function r(E,m){(m==null||m>E.length)&&(m=E.length);for(var y=0,T=Array(m);y<m;y++)T[y]=E[y];return T}function n(E,m,y){return m=g(m),(function(T,z){if(z&&(typeof z=="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re})(T)})(E,x()?Reflect.construct(m,y||[],g(E).constructor):m.apply(E,y))}function i(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function o(E,m,y){if(x())return Reflect.construct.apply(null,arguments);var T=[null];T.push.apply(T,m);var z=new(E.bind.apply(E,T));return y&&b(z,y.prototype),z}function l(E,m){for(var y=0;y<m.length;y++){var T=m[y];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,k(T.key),T)}}function a(E,m,y){return m&&l(E.prototype,m),y&&l(E,y),Object.defineProperty(E,"prototype",{writable:!1}),E}function c(E,m){var y=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!y){if(Array.isArray(E)||(y=M(E))||m){y&&(E=y);var T=0,z=function(){};return{s:z,n:function(){return T>=E.length?{done:!0}:{done:!1,value:E[T++]}},e:function(Ke){throw Ke},f:z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re,ye=!0,Le=!1;return{s:function(){y=y.call(E)},n:function(){var Ke=y.next();return ye=Ke.done,Ke},e:function(Ke){Le=!0,re=Ke},f:function(){try{ye||y.return==null||y.return()}finally{if(Le)throw re}}}}function p(){return p=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(E,m,y){var T=(function(re,ye){for(;!{}.hasOwnProperty.call(re,ye)&&(re=g(re))!==null;);return re})(E,m);if(T){var z=Object.getOwnPropertyDescriptor(T,m);return z.get?z.get.call(arguments.length<3?E:y):z.value}},p.apply(null,arguments)}function g(E){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},g(E)}function v(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),m&&b(E,m)}function x(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(x=function(){return!!E})()}function b(E,m){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,T){return y.__proto__=T,y},b(E,m)}function P(E,m,y,T){var z=p(g(1&T?E.prototype:E),m,y);return 2&T&&typeof z=="function"?function(re){return z.apply(y,re)}:z}function I(E){return(function(m){if(Array.isArray(m))return r(m)})(E)||(function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)})(E)||M(E)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function k(E){var m=(function(y,T){if(typeof y!="object"||!y)return y;var z=y[Symbol.toPrimitive];if(z!==void 0){var re=z.call(y,T);if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)})(E,"string");return typeof m=="symbol"?m:m+""}function M(E,m){if(E){if(typeof E=="string")return r(E,m);var y={}.toString.call(E).slice(8,-1);return y==="Object"&&E.constructor&&(y=E.constructor.name),y==="Map"||y==="Set"?Array.from(E):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?r(E,m):void 0}}function O(E){var m=typeof Map=="function"?new Map:void 0;return O=function(y){if(y===null||!(function(z){try{return Function.toString.call(z).indexOf("[native code]")!==-1}catch{return typeof z=="function"}})(y))return y;if(typeof y!="function")throw new TypeError("Super expression must either be null or a function");if(m!==void 0){if(m.has(y))return m.get(y);m.set(y,T)}function T(){return o(y,arguments,g(this).constructor)}return T.prototype=Object.create(y.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),b(T,y)},O(E)}var F=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(m){this._quadrantSegments=m,this._quadrantSegments===0&&(this._joinStyle=E.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=E.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),m<=0&&(this._quadrantSegments=1),this._joinStyle!==E.JOIN_ROUND&&(this._quadrantSegments=E.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(m){this._joinStyle=m}},{key:"setSimplifyFactor",value:function(m){this._simplifyFactor=m<0?0:m}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(m){this._endCapStyle=m}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(m){this._mitreLimit=m}},{key:"setSingleSided",value:function(m){this._isSingleSided=m}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=E.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=E.CAP_ROUND,this._joinStyle=E.JOIN_ROUND,this._mitreLimit=E.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=E.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this.setQuadrantSegments(m)}else if(arguments.length===2){var y=arguments[0],T=arguments[1];this.setQuadrantSegments(y),this.setEndCapStyle(T)}else if(arguments.length===4){var z=arguments[0],re=arguments[1],ye=arguments[2],Le=arguments[3];this.setQuadrantSegments(z),this.setEndCapStyle(re),this.setJoinStyle(ye),this.setMitreLimit(Le)}}}},{key:"bufferDistanceError",value:function(m){var y=Math.PI/2/m;return 1-Math.cos(y/2)}}])})();F.CAP_ROUND=1,F.CAP_FLAT=2,F.CAP_SQUARE=3,F.JOIN_ROUND=1,F.JOIN_MITRE=2,F.JOIN_BEVEL=3,F.DEFAULT_QUADRANT_SEGMENTS=8,F.DEFAULT_MITRE_LIMIT=5,F.DEFAULT_SIMPLIFY_FACTOR=.01;var N=(function(E){function m(y){var T;return i(this,m),(T=n(this,m,[y])).name=Object.keys({Exception:m})[0],T}return v(m,E),a(m,[{key:"toString",value:function(){return this.message}}])})(O(Error)),$=(function(E){function m(y){var T;return i(this,m),(T=n(this,m,[y])).name=Object.keys({IllegalArgumentException:m})[0],T}return v(m,E),a(m)})(N),j=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E){}}])})();function U(){}function H(){}function Y(){}var ae,ee,G,ie,oe,ue,de,Me,ge=(function(){return a((function E(){i(this,E)}),null,[{key:"equalsWithTolerance",value:function(E,m,y){return Math.abs(E-m)<=y}}])})(),xe=(function(){return a((function E(m,y){i(this,E),this.low=y||0,this.high=m||0}),null,[{key:"toBinaryString",value:function(E){var m,y="";for(m=2147483648;m>0;m>>>=1)y+=(E.high&m)===m?"1":"0";for(m=2147483648;m>0;m>>>=1)y+=(E.low&m)===m?"1":"0";return y}}])})();function Ee(){}function Ae(){}Ee.NaN=NaN,Ee.isNaN=function(E){return Number.isNaN(E)},Ee.isInfinite=function(E){return!Number.isFinite(E)},Ee.MAX_VALUE=Number.MAX_VALUE,Ee.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Ee.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(ue=2146435072,de=new Float64Array(1),Me=new Int32Array(de.buffer),Ee.doubleToLongBits=function(E){de[0]=E;var m=0|Me[0],y=0|Me[1];return(y&ue)===ue&&1048575&y&&m!==0&&(m=0,y=2146959360),new xe(y,m)},Ee.longBitsToDouble=function(E){return Me[0]=E.low,Me[1]=E.high,de[0]}):(ae=1023,ee=Math.log2,G=Math.floor,ie=Math.pow,oe=(function(){for(var E=53;E>0;E--){var m=ie(2,E)-1;if(G(ee(m))+1===E)return m}return 0})(),Ee.doubleToLongBits=function(E){var m,y,T,z,re,ye,Le,Ke,yt;if(E<0||1/E===Number.NEGATIVE_INFINITY?(ye=1<<31,E=-E):ye=0,E===0)return new xe(Ke=ye,yt=0);if(E===1/0)return new xe(Ke=2146435072|ye,yt=0);if(E!=E)return new xe(Ke=2146959360,yt=0);if(z=0,yt=0,(m=G(E))>1)if(m<=oe)(z=G(ee(m)))<=20?(yt=0,Ke=m<<20-z&1048575):(yt=m%(y=ie(2,T=z-20))<<32-T,Ke=m/y&1048575);else for(T=m,yt=0;(T=G(y=T/2))!==0;)z++,yt>>>=1,yt|=(1&Ke)<<31,Ke>>>=1,y!==T&&(Ke|=524288);if(Le=z+ae,re=m===0,m=E-m,z<52&&m!==0)for(T=0;;){if((y=2*m)>=1?(m=y-1,re?(Le--,re=!1):(T<<=1,T|=1,z++)):(m=y,re?--Le==0&&(z++,re=!1):(T<<=1,z++)),z===20)Ke|=T,T=0;else if(z===52){yt|=T;break}if(y===1){z<20?Ke|=T<<20-z:z<52&&(yt|=T<<52-z);break}}return Ke|=Le<<20,new xe(Ke|=ye,yt)},Ee.longBitsToDouble=function(E){var m,y,T,z,re=E.high,ye=E.low,Le=re&1<<31?-1:1;for(T=((2146435072&re)>>20)-ae,z=0,y=1<<19,m=1;m<=20;m++)re&y&&(z+=ie(2,-m)),y>>>=1;for(y=1<<31,m=21;m<=52;m++)ye&y&&(z+=ie(2,-m)),y>>>=1;if(T===-1023){if(z===0)return 0*Le;T=-1022}else{if(T===1024)return z===0?Le/0:NaN;z+=1}return Le*z*ie(2,T)});var fe=(function(E){function m(y){var T;return i(this,m),(T=n(this,m,[y])).name=Object.keys({RuntimeException:m})[0],T}return v(m,E),a(m)})(N),Se=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,null,[{key:"constructor_",value:function(){if(arguments.length===0)fe.constructor_.call(this);else if(arguments.length===1){var y=arguments[0];fe.constructor_.call(this,y)}}}])})(fe),we=(function(){function E(){i(this,E)}return a(E,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)E.shouldNeverReachHere(null);else if(arguments.length===1){var m=arguments[0];throw new Se("Should never reach here"+(m!==null?": "+m:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var m=arguments[0];E.isTrue(m,null)}else if(arguments.length===2){var y=arguments[1];if(!arguments[0])throw y===null?new Se:new Se(y)}}},{key:"equals",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];E.equals(m,y,null)}else if(arguments.length===3){var T=arguments[0],z=arguments[1],re=arguments[2];if(!z.equals(T))throw new Se("Expected "+T+" but encountered "+z+(re!==null?": "+re:""))}}}])})(),De=new ArrayBuffer(8),Re=new Float64Array(De),$e=new Int32Array(De),Oe=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getM",value:function(){return Ee.NaN}},{key:"setOrdinate",value:function(m,y){switch(m){case E.X:this.x=y;break;case E.Y:this.y=y;break;case E.Z:this.setZ(y);break;default:throw new $("Invalid ordinate index: "+m)}}},{key:"equals2D",value:function(){if(arguments.length===1){var m=arguments[0];return this.x===m.x&&this.y===m.y}if(arguments.length===2){var y=arguments[0],T=arguments[1];return!!ge.equalsWithTolerance(this.x,y.x,T)&&!!ge.equalsWithTolerance(this.y,y.y,T)}}},{key:"setM",value:function(m){throw new $("Invalid ordinate index: "+E.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(m){switch(m){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.getZ()}throw new $("Invalid ordinate index: "+m)}},{key:"equals3D",value:function(m){return this.x===m.x&&this.y===m.y&&(this.getZ()===m.getZ()||Ee.isNaN(this.getZ())&&Ee.isNaN(m.getZ()))}},{key:"equals",value:function(m){return m instanceof E&&this.equals2D(m)}},{key:"equalInZ",value:function(m,y){return ge.equalsWithTolerance(this.getZ(),m.getZ(),y)}},{key:"setX",value:function(m){this.x=m}},{key:"compareTo",value:function(m){var y=m;return this.x<y.x?-1:this.x>y.x?1:this.y<y.y?-1:this.y>y.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(m){this.z=m}},{key:"clone",value:function(){try{return null}catch(m){if(m instanceof CloneNotSupportedException)return we.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw m}}},{key:"copy",value:function(){return new E(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(m){var y=this.x-m.x,T=this.y-m.y,z=this.getZ()-m.getZ();return Math.sqrt(y*y+T*T+z*z)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(m){this.y=m}},{key:"distance",value:function(m){var y=this.x-m.x,T=this.y-m.y;return Math.sqrt(y*y+T*T)}},{key:"hashCode",value:function(){var m=17;return m=37*(m=37*m+E.hashCode(this.x))+E.hashCode(this.y)}},{key:"setCoordinate",value:function(m){this.x=m.x,this.y=m.y,this.z=m.getZ()}},{key:"interfaces_",get:function(){return[U,H,Y]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)E.constructor_.call(this,0,0);else if(arguments.length===1){var m=arguments[0];E.constructor_.call(this,m.x,m.y,m.getZ())}else if(arguments.length===2){var y=arguments[0],T=arguments[1];E.constructor_.call(this,y,T,E.NULL_ORDINATE)}else if(arguments.length===3){var z=arguments[0],re=arguments[1],ye=arguments[2];this.x=z,this.y=re,this.z=ye}}},{key:"hashCode",value:function(m){return Re[0]=m,$e[0]^$e[1]}}])})(),it=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"compare",value:function(m,y){var T=E.compare(m.x,y.x);if(T!==0)return T;var z=E.compare(m.y,y.y);return z!==0?z:this._dimensionsToTest<=2?0:E.compare(m.getZ(),y.getZ())}},{key:"interfaces_",get:function(){return[Ae]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)E.constructor_.call(this,2);else if(arguments.length===1){var m=arguments[0];if(m!==2&&m!==3)throw new $("only 2 or 3 dimensions may be specified");this._dimensionsToTest=m}}},{key:"compare",value:function(m,y){return m<y?-1:m>y?1:Ee.isNaN(m)?Ee.isNaN(y)?0:-1:Ee.isNaN(y)?1:0}}])})();Oe.DimensionalComparator=it,Oe.NULL_ORDINATE=Ee.NaN,Oe.X=0,Oe.Y=1,Oe.Z=2,Oe.M=3;var Ye=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(m){if(!(m instanceof E))return!1;var y=m;return this.isNull()?y.isNull():this._maxx===y.getMaxX()&&this._maxy===y.getMaxY()&&this._minx===y.getMinX()&&this._miny===y.getMinY()}},{key:"intersection",value:function(m){if(this.isNull()||m.isNull()||!this.intersects(m))return new E;var y=this._minx>m._minx?this._minx:m._minx,T=this._miny>m._miny?this._miny:m._miny;return new E(y,this._maxx<m._maxx?this._maxx:m._maxx,T,this._maxy<m._maxy?this._maxy:m._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];return this.covers(m.x,m.y)}if(arguments[0]instanceof E){var y=arguments[0];return!this.isNull()&&!y.isNull()&&y.getMinX()>=this._minx&&y.getMaxX()<=this._maxx&&y.getMinY()>=this._miny&&y.getMaxY()<=this._maxy}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];return!this.isNull()&&T>=this._minx&&T<=this._maxx&&z>=this._miny&&z<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return!this.isNull()&&!m.isNull()&&!(m._minx>this._maxx||m._maxx<this._minx||m._miny>this._maxy||m._maxy<this._miny)}if(arguments[0]instanceof Oe){var y=arguments[0];return this.intersects(y.x,y.y)}}else if(arguments.length===2){if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var T=arguments[0],z=arguments[1];return!this.isNull()&&!((T.x<z.x?T.x:z.x)>this._maxx)&&!((T.x>z.x?T.x:z.x)<this._minx)&&!((T.y<z.y?T.y:z.y)>this._maxy)&&!((T.y>z.y?T.y:z.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var re=arguments[0],ye=arguments[1];return!this.isNull()&&!(re>this._maxx||re<this._minx||ye>this._maxy||ye<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var m=this.getWidth(),y=this.getHeight();return Math.sqrt(m*m+y*y)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];this.expandToInclude(m.x,m.y)}else if(arguments[0]instanceof E){var y=arguments[0];if(y.isNull())return null;this.isNull()?(this._minx=y.getMinX(),this._maxx=y.getMaxX(),this._miny=y.getMinY(),this._maxy=y.getMaxY()):(y._minx<this._minx&&(this._minx=y._minx),y._maxx>this._maxx&&(this._maxx=y._maxx),y._miny<this._miny&&(this._miny=y._miny),y._maxy>this._maxy&&(this._maxy=y._maxy))}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];this.isNull()?(this._minx=T,this._maxx=T,this._miny=z,this._maxy=z):(T<this._minx&&(this._minx=T),T>this._maxx&&(this._maxx=T),z<this._miny&&(this._miny=z),z>this._maxy&&(this._maxy=z))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var m=this.getWidth(),y=this.getHeight();return m<y?m:y}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(m){var y=m;return this.isNull()?y.isNull()?0:-1:y.isNull()?1:this._minx<y._minx?-1:this._minx>y._minx?1:this._miny<y._miny?-1:this._miny>y._miny?1:this._maxx<y._maxx?-1:this._maxx>y._maxx?1:this._maxy<y._maxy?-1:this._maxy>y._maxy?1:0}},{key:"translate",value:function(m,y){if(this.isNull())return null;this.init(this.getMinX()+m,this.getMaxX()+m,this.getMinY()+y,this.getMaxY()+y)}},{key:"copy",value:function(){return new E(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(m){return!(!this.isNull()&&!m.isNull())||m._minx>this._maxx||m._maxx<this._minx||m._miny>this._maxy||m._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var m=this.getWidth(),y=this.getHeight();return m>y?m:y}},{key:"expandBy",value:function(){if(arguments.length===1){var m=arguments[0];this.expandBy(m,m)}else if(arguments.length===2){var y=arguments[0],T=arguments[1];if(this.isNull())return null;this._minx-=y,this._maxx+=y,this._miny-=T,this._maxy+=T,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.covers(m)}if(arguments[0]instanceof Oe){var y=arguments[0];return this.covers(y)}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];return this.covers(T,z)}}},{key:"centre",value:function(){return this.isNull()?null:new Oe((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];this.init(m.x,m.x,m.y,m.y)}else if(arguments[0]instanceof E){var y=arguments[0];this._minx=y._minx,this._maxx=y._maxx,this._miny=y._miny,this._maxy=y._maxy}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];this.init(T.x,z.x,T.y,z.y)}else if(arguments.length===4){var re=arguments[0],ye=arguments[1],Le=arguments[2],Ke=arguments[3];re<ye?(this._minx=re,this._maxx=ye):(this._minx=ye,this._maxx=re),Le<Ke?(this._miny=Le,this._maxy=Ke):(this._miny=Ke,this._maxy=Le)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(m){if(this.intersects(m))return 0;var y=0;this._maxx<m._minx?y=m._minx-this._maxx:this._minx>m._maxx&&(y=this._minx-m._maxx);var T=0;return this._maxy<m._miny?T=m._miny-this._maxy:this._miny>m._maxy&&(T=this._miny-m._maxy),y===0?T:T===0?y:Math.sqrt(y*y+T*T)}},{key:"hashCode",value:function(){var m=17;return m=37*(m=37*(m=37*(m=37*m+Oe.hashCode(this._minx))+Oe.hashCode(this._maxx))+Oe.hashCode(this._miny))+Oe.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[U,Y]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];this.init(m.x,m.x,m.y,m.y)}else if(arguments[0]instanceof E){var y=arguments[0];this.init(y)}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];this.init(T.x,z.x,T.y,z.y)}else if(arguments.length===4){var re=arguments[0],ye=arguments[1],Le=arguments[2],Ke=arguments[3];this.init(re,ye,Le,Ke)}}},{key:"intersects",value:function(){if(arguments.length===3){var m=arguments[0],y=arguments[1],T=arguments[2];return T.x>=(m.x<y.x?m.x:y.x)&&T.x<=(m.x>y.x?m.x:y.x)&&T.y>=(m.y<y.y?m.y:y.y)&&T.y<=(m.y>y.y?m.y:y.y)}if(arguments.length===4){var z=arguments[0],re=arguments[1],ye=arguments[2],Le=arguments[3],Ke=Math.min(ye.x,Le.x),yt=Math.max(ye.x,Le.x),Yt=Math.min(z.x,re.x),or=Math.max(z.x,re.x);return!(Yt>yt)&&!(or<Ke)&&(Ke=Math.min(ye.y,Le.y),yt=Math.max(ye.y,Le.y),Yt=Math.min(z.y,re.y),or=Math.max(z.y,re.y),!(Yt>yt)&&!(or<Ke))}}}])})(),rt=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(m){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(m){return this===m||this.equalsExact(m,0)}},{key:"geometryChanged",value:function(){this.apply(E.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(m){return m!==null&&this.norm().equalsExact(m.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var m;if(arguments.length===1){var y=arguments[0];return m=y,this.getTypeCode()!==m.getTypeCode()?this.getTypeCode()-m.getTypeCode():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(y)}if(arguments.length===2){var T=arguments[0],z=arguments[1];return m=T,this.getTypeCode()!==m.getTypeCode()?this.getTypeCode()-m.getTypeCode():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(T,z)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(m){if(m.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION)throw new $("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(m,y,T){return T===0?m.equals(y):m.distance(y)<=T}},{key:"norm",value:function(){var m=this.copy();return m.normalize(),m}},{key:"reverse",value:function(){var m=this.reverseInternal();return this.envelope!=null&&(m.envelope=this.envelope.copy()),m.setSRID(this.getSRID()),m}},{key:"copy",value:function(){var m=this.copyInternal();return m.envelope=this._envelope==null?null:this._envelope.copy(),m._SRID=this._SRID,m._userData=this._userData,m}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Ye(this._envelope)}},{key:"setSRID",value:function(m){this._SRID=m}},{key:"setUserData",value:function(m){this._userData=m}},{key:"compare",value:function(m,y){for(var T=m.iterator(),z=y.iterator();T.hasNext()&&z.hasNext();){var re=T.next(),ye=z.next(),Le=re.compareTo(ye);if(Le!==0)return Le}return T.hasNext()?1:z.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(m){return this.getClass()===m.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===E.TYPECODE_MULTIPOINT||this.getTypeCode()===E.TYPECODE_MULTILINESTRING||this.getTypeCode()===E.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[H,U,Y]}},{key:"getClass",value:function(){return E}}],[{key:"hasNonEmptyElements",value:function(m){for(var y=0;y<m.length;y++)if(!m[y].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(m){for(var y=0;y<m.length;y++)if(m[y]===null)return!0;return!1}}])})();rt.constructor_=function(E){E&&(this._envelope=null,this._userData=null,this._factory=E,this._SRID=E.getSRID())},rt.TYPECODE_POINT=0,rt.TYPECODE_MULTIPOINT=1,rt.TYPECODE_LINESTRING=2,rt.TYPECODE_LINEARRING=3,rt.TYPECODE_MULTILINESTRING=4,rt.TYPECODE_POLYGON=5,rt.TYPECODE_MULTIPOLYGON=6,rt.TYPECODE_GEOMETRYCOLLECTION=7,rt.TYPENAME_POINT="Point",rt.TYPENAME_MULTIPOINT="MultiPoint",rt.TYPENAME_LINESTRING="LineString",rt.TYPENAME_LINEARRING="LinearRing",rt.TYPENAME_MULTILINESTRING="MultiLineString",rt.TYPENAME_POLYGON="Polygon",rt.TYPENAME_MULTIPOLYGON="MultiPolygon",rt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",rt.geometryChangedFilter={get interfaces_(){return[j]},filter:function(E){E.geometryChangedAction()}};var Ie=(function(){function E(){i(this,E)}return a(E,null,[{key:"toLocationSymbol",value:function(m){switch(m){case E.EXTERIOR:return"e";case E.BOUNDARY:return"b";case E.INTERIOR:return"i";case E.NONE:return"-"}throw new $("Unknown location value: "+m)}}])})();Ie.INTERIOR=0,Ie.BOUNDARY=1,Ie.EXTERIOR=2,Ie.NONE=-1;var It=(function(){return a((function E(){i(this,E)}),[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])})(),at=(function(E){function m(y){var T;return i(this,m),(T=n(this,m,[y])).name=Object.keys({NoSuchElementException:m})[0],T}return v(m,E),a(m)})(N),je=(function(E){function m(y){var T;return i(this,m),(T=n(this,m,[y])).name=Object.keys({UnsupportedOperationException:m})[0],T}return v(m,E),a(m)})(N),Ht=(function(E){function m(){return i(this,m),n(this,m,arguments)}return v(m,E),a(m,[{key:"contains",value:function(){}}])})(It),Wt=(function(E){function m(y){var T;return i(this,m),(T=n(this,m)).map=new Map,y instanceof It&&T.addAll(y),T}return v(m,E),a(m,[{key:"contains",value:function(y){var T=y.hashCode?y.hashCode():y;return!!this.map.has(T)}},{key:"add",value:function(y){var T=y.hashCode?y.hashCode():y;return!this.map.has(T)&&!!this.map.set(T,y)}},{key:"addAll",value:function(y){var T,z=c(y);try{for(z.s();!(T=z.n()).done;){var re=T.value;this.add(re)}}catch(ye){z.e(ye)}finally{z.f()}return!0}},{key:"remove",value:function(){throw new je}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new zt(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])})(Ht),zt=(function(){return a((function E(m){i(this,E),this.iterator=m.values();var y=this.iterator.next(),T=y.done,z=y.value;this.done=T,this.value=z}),[{key:"next",value:function(){if(this.done)throw new at;var E=this.value,m=this.iterator.next(),y=m.done,T=m.value;return this.done=y,this.value=T,E}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new je}}])})(),st=(function(){function E(){i(this,E)}return a(E,null,[{key:"opposite",value:function(m){return m===E.LEFT?E.RIGHT:m===E.RIGHT?E.LEFT:m}}])})();st.ON=0,st.LEFT=1,st.RIGHT=2;var sr=(function(E){function m(y){var T;return i(this,m),(T=n(this,m,[y])).name=Object.keys({EmptyStackException:m})[0],T}return v(m,E),a(m)})(N),ur=(function(E){function m(y){var T;return i(this,m),(T=n(this,m,[y])).name=Object.keys({IndexOutOfBoundsException:m})[0],T}return v(m,E),a(m)})(N),ar=(function(E){function m(){return i(this,m),n(this,m,arguments)}return v(m,E),a(m,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])})(It),yr=(function(E){function m(){var y;return i(this,m),(y=n(this,m)).array=[],y}return v(m,E),a(m,[{key:"add",value:function(y){return this.array.push(y),!0}},{key:"get",value:function(y){if(y<0||y>=this.size())throw new ur;return this.array[y]}},{key:"push",value:function(y){return this.array.push(y),y}},{key:"pop",value:function(){if(this.array.length===0)throw new sr;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new sr;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(y){return this.array.indexOf(y)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])})(ar);function pr(E,m){return E.interfaces_&&E.interfaces_.indexOf(m)>-1}var Jt=(function(){return a((function E(m){i(this,E),this.str=m}),[{key:"append",value:function(E){this.str+=E}},{key:"setCharAt",value:function(E,m){this.str=this.str.substr(0,E)+m+this.str.substr(E+1)}},{key:"toString",value:function(){return this.str}}])})(),ir=(function(){function E(m){i(this,E),this.value=m}return a(E,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(m){return this.value<m?-1:this.value>m?1:0}}],[{key:"compare",value:function(m,y){return m<y?-1:m>y?1:0}},{key:"isNan",value:function(m){return Number.isNaN(m)}},{key:"valueOf",value:function(m){return new E(m)}}])})(),xr=(function(){return a((function E(){i(this,E)}),null,[{key:"isWhitespace",value:function(E){return E<=32&&E>=0||E===127}},{key:"toUpperCase",value:function(E){return E.toUpperCase()}}])})(),rr=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"le",value:function(m){return this._hi<m._hi||this._hi===m._hi&&this._lo<=m._lo}},{key:"extractSignificantDigits",value:function(m,y){var T=this.abs(),z=E.magnitude(T._hi),re=E.TEN.pow(z);(T=T.divide(re)).gt(E.TEN)?(T=T.divide(E.TEN),z+=1):T.lt(E.ONE)&&(T=T.multiply(E.TEN),z-=1);for(var ye=z+1,Le=new Jt,Ke=E.MAX_PRINT_DIGITS-1,yt=0;yt<=Ke;yt++){m&&yt===ye&&Le.append(".");var Yt=Math.trunc(T._hi);if(Yt<0)break;var or=!1,Nr=0;Yt>9?(or=!0,Nr="9"):Nr="0"+Yt,Le.append(Nr),T=T.subtract(E.valueOf(Yt)).multiply(E.TEN),or&&T.selfAdd(E.TEN);var on=!0,wn=E.magnitude(T._hi);if(wn<0&&Math.abs(wn)>=Ke-yt&&(on=!1),!on)break}return y[0]=z,Le.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return this.add(m.negate())}if(typeof arguments[0]=="number"){var y=arguments[0];return this.add(-y)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof E){var m=arguments[0];return this._hi===m._hi&&this._lo===m._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return this.isNaN()?this:this.selfAdd(-m._hi,-m._lo)}if(typeof arguments[0]=="number"){var y=arguments[0];return this.isNaN()?this:this.selfAdd(-y,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(m){return this.le(m)?this:m}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.selfDivide(m._hi,m._lo)}if(typeof arguments[0]=="number"){var y=arguments[0];return this.selfDivide(y,0)}}else if(arguments.length===2){var T,z,re,ye,Le=arguments[0],Ke=arguments[1],yt=null,Yt=null,or=null,Nr=null;return re=this._hi/Le,Nr=(yt=(or=E.SPLIT*re)-(yt=or-re))*(Yt=(Nr=E.SPLIT*Le)-(Yt=Nr-Le))-(ye=re*Le)+yt*(z=Le-Yt)+(T=re-yt)*Yt+T*z,Nr=re+(or=(this._hi-ye-Nr+this._lo-re*Ke)/Le),this._hi=Nr,this._lo=re-Nr+or,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof E){var m,y,T,z,re=arguments[0],ye=null,Le=null,Ke=null,yt=null;return m=(T=this._hi/re._hi)-(ye=(Ke=E.SPLIT*T)-(ye=Ke-T)),yt=ye*(Le=(yt=E.SPLIT*re._hi)-(Le=yt-re._hi))-(z=T*re._hi)+ye*(y=re._hi-Le)+m*Le+m*y,new E(yt=T+(Ke=(this._hi-z-yt+this._lo-T*re._lo)/re._hi),T-yt+Ke)}if(typeof arguments[0]=="number"){var Yt=arguments[0];return Ee.isNaN(Yt)?E.createNaN():E.copy(this).selfDivide(Yt,0)}}},{key:"ge",value:function(m){return this._hi>m._hi||this._hi===m._hi&&this._lo>=m._lo}},{key:"pow",value:function(m){if(m===0)return E.valueOf(1);var y=new E(this),T=E.valueOf(1),z=Math.abs(m);if(z>1)for(;z>0;)z%2==1&&T.selfMultiply(y),(z/=2)>0&&(y=y.sqr());else T=y;return m<0?T.reciprocal():T}},{key:"ceil",value:function(){if(this.isNaN())return E.NaN;var m=Math.ceil(this._hi),y=0;return m===this._hi&&(y=Math.ceil(this._lo)),new E(m,y)}},{key:"compareTo",value:function(m){var y=m;return this._hi<y._hi?-1:this._hi>y._hi?1:this._lo<y._lo?-1:this._lo>y._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return this.init(m),this}if(typeof arguments[0]=="number"){var y=arguments[0];return this.init(y),this}}},{key:"max",value:function(m){return this.ge(m)?this:m}},{key:"sqrt",value:function(){if(this.isZero())return E.valueOf(0);if(this.isNegative())return E.NaN;var m=1/Math.sqrt(this._hi),y=this._hi*m,T=E.valueOf(y),z=this.subtract(T.sqr())._hi*(.5*m);return T.add(z)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.selfAdd(m._hi,m._lo)}if(typeof arguments[0]=="number"){var y,T,z,re,ye,Le=arguments[0],Ke=null;return Ke=(z=this._hi+Le)-(re=z-this._hi),T=(ye=(Ke=Le-re+(this._hi-Ke))+this._lo)+(z-(y=z+ye)),this._hi=y+T,this._lo=T+(y-this._hi),this}}else if(arguments.length===2){var yt,Yt,or,Nr,on=arguments[0],wn=arguments[1],Ln=null,bn=null,Tn=null;or=this._hi+on,Yt=this._lo+wn,bn=or-(Tn=or-this._hi),Ln=Yt-(Nr=Yt-this._lo);var qi=(yt=or+(Tn=(bn=on-Tn+(this._hi-bn))+Yt))+(Tn=(Ln=wn-Nr+(this._lo-Ln))+(Tn+(or-yt))),Hi=Tn+(yt-qi);return this._hi=qi,this._lo=Hi,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.selfMultiply(m._hi,m._lo)}if(typeof arguments[0]=="number"){var y=arguments[0];return this.selfMultiply(y,0)}}else if(arguments.length===2){var T,z,re=arguments[0],ye=arguments[1],Le=null,Ke=null,yt=null,Yt=null;Le=(yt=E.SPLIT*this._hi)-this._hi,Yt=E.SPLIT*re,Le=yt-Le,T=this._hi-Le,Ke=Yt-re;var or=(yt=this._hi*re)+(Yt=Le*(Ke=Yt-Ke)-yt+Le*(z=re-Ke)+T*Ke+T*z+(this._hi*ye+this._lo*re)),Nr=Yt+(Le=yt-or);return this._hi=or,this._lo=Nr,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return E.NaN;var m=Math.floor(this._hi),y=0;return m===this._hi&&(y=Math.floor(this._lo)),new E(m,y)}},{key:"negate",value:function(){return this.isNaN()?this:new E(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(m){if(m instanceof CloneNotSupportedException)return null;throw m}}},{key:"multiply",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return m.isNaN()?E.createNaN():E.copy(this).selfMultiply(m)}if(typeof arguments[0]=="number"){var y=arguments[0];return Ee.isNaN(y)?E.createNaN():E.copy(this).selfMultiply(y,0)}}},{key:"isNaN",value:function(){return Ee.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var m=E.magnitude(this._hi);return m>=-3&&m<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var m=this.getSpecialNumberString();if(m!==null)return m;var y=new Array(1).fill(null),T=this.extractSignificantDigits(!0,y),z=y[0]+1,re=T;if(T.charAt(0)===".")re="0"+T;else if(z<0)re="0."+E.stringOfChar("0",-z)+T;else if(T.indexOf(".")===-1){var ye=z-T.length;re=T+E.stringOfChar("0",ye)+".0"}return this.isNegative()?"-"+re:re}},{key:"reciprocal",value:function(){var m,y,T,z,re=null,ye=null,Le=null,Ke=null;m=(T=1/this._hi)-(re=(Le=E.SPLIT*T)-(re=Le-T)),ye=(Ke=E.SPLIT*this._hi)-this._hi;var yt=T+(Le=(1-(z=T*this._hi)-(Ke=re*(ye=Ke-ye)-z+re*(y=this._hi-ye)+m*ye+m*y)-T*this._lo)/this._hi);return new E(yt,T-yt+Le)}},{key:"toSciNotation",value:function(){if(this.isZero())return E.SCI_NOT_ZERO;var m=this.getSpecialNumberString();if(m!==null)return m;var y=new Array(1).fill(null),T=this.extractSignificantDigits(!1,y),z=E.SCI_NOT_EXPONENT_CHAR+y[0];if(T.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+T);var re="";T.length>1&&(re=T.substring(1));var ye=T.charAt(0)+"."+re;return this.isNegative()?"-"+ye+z:ye+z}},{key:"abs",value:function(){return this.isNaN()?E.NaN:this.isNegative()?this.negate():new E(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(m){return this._hi<m._hi||this._hi===m._hi&&this._lo<m._lo}},{key:"add",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return E.copy(this).selfAdd(m)}if(typeof arguments[0]=="number"){var y=arguments[0];return E.copy(this).selfAdd(y)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var m=arguments[0];this._hi=m,this._lo=0}else if(arguments[0]instanceof E){var y=arguments[0];this._hi=y._hi,this._lo=y._lo}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];this._hi=T,this._lo=z}}},{key:"gt",value:function(m){return this._hi>m._hi||this._hi===m._hi&&this._lo>m._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?E.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[Y,U,H]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var m=arguments[0];this.init(m)}else if(arguments[0]instanceof E){var y=arguments[0];this.init(y)}else if(typeof arguments[0]=="string"){var T=arguments[0];E.constructor_.call(this,E.parse(T))}}else if(arguments.length===2){var z=arguments[0],re=arguments[1];this.init(z,re)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1],T=arguments[2],z=arguments[3];return E.determinant(E.valueOf(m),E.valueOf(y),E.valueOf(T),E.valueOf(z))}if(arguments[3]instanceof E&&arguments[2]instanceof E&&arguments[0]instanceof E&&arguments[1]instanceof E){var re=arguments[1],ye=arguments[2],Le=arguments[3];return arguments[0].multiply(Le).selfSubtract(re.multiply(ye))}}},{key:"sqr",value:function(m){return E.valueOf(m).selfMultiply(m)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var m=arguments[0];return E.parse(m)}if(typeof arguments[0]=="number")return new E(arguments[0])}},{key:"sqrt",value:function(m){return E.valueOf(m).sqrt()}},{key:"parse",value:function(m){for(var y=0,T=m.length;xr.isWhitespace(m.charAt(y));)y++;var z=!1;if(y<T){var re=m.charAt(y);re!=="-"&&re!=="+"||(y++,re==="-"&&(z=!0))}for(var ye=new E,Le=0,Ke=0,yt=0,Yt=!1;!(y>=T);){var or=m.charAt(y);if(y++,xr.isDigit(or)){var Nr=or-"0";ye.selfMultiply(E.TEN),ye.selfAdd(Nr),Le++}else{if(or!=="."){if(or==="e"||or==="E"){var on=m.substring(y);try{yt=ir.parseInt(on)}catch(qi){throw qi instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+on+" in string "+m):qi}break}throw new NumberFormatException("Unexpected character '"+or+"' at position "+y+" in string "+m)}Ke=Le,Yt=!0}}var wn=ye;Yt||(Ke=Le);var Ln=Le-Ke-yt;if(Ln===0)wn=ye;else if(Ln>0){var bn=E.TEN.pow(Ln);wn=ye.divide(bn)}else if(Ln<0){var Tn=E.TEN.pow(-Ln);wn=ye.multiply(Tn)}return z?wn.negate():wn}},{key:"createNaN",value:function(){return new E(Ee.NaN,Ee.NaN)}},{key:"copy",value:function(m){return new E(m)}},{key:"magnitude",value:function(m){var y=Math.abs(m),T=Math.log(y)/Math.log(10),z=Math.trunc(Math.floor(T));return 10*Math.pow(10,z)<=y&&(z+=1),z}},{key:"stringOfChar",value:function(m,y){for(var T=new Jt,z=0;z<y;z++)T.append(m);return T.toString()}}])})();rr.PI=new rr(3.141592653589793,12246467991473532e-32),rr.TWO_PI=new rr(6.283185307179586,24492935982947064e-32),rr.PI_2=new rr(1.5707963267948966,6123233995736766e-32),rr.E=new rr(2.718281828459045,14456468917292502e-32),rr.NaN=new rr(Ee.NaN,Ee.NaN),rr.EPS=123259516440783e-46,rr.SPLIT=134217729,rr.MAX_PRINT_DIGITS=32,rr.TEN=rr.valueOf(10),rr.ONE=rr.valueOf(1),rr.SCI_NOT_EXPONENT_CHAR="E",rr.SCI_NOT_ZERO="0.0E0";var nt=(function(){function E(){i(this,E)}return a(E,null,[{key:"orientationIndex",value:function(m,y,T){var z=E.orientationIndexFilter(m,y,T);if(z<=1)return z;var re=rr.valueOf(y.x).selfAdd(-m.x),ye=rr.valueOf(y.y).selfAdd(-m.y),Le=rr.valueOf(T.x).selfAdd(-y.x),Ke=rr.valueOf(T.y).selfAdd(-y.y);return re.selfMultiply(Ke).selfSubtract(ye.selfMultiply(Le)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof rr&&arguments[2]instanceof rr&&arguments[0]instanceof rr&&arguments[1]instanceof rr){var m=arguments[1],y=arguments[2],T=arguments[3];return arguments[0].multiply(T).selfSubtract(m.multiply(y)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var z=arguments[0],re=arguments[1],ye=arguments[2],Le=arguments[3],Ke=rr.valueOf(z),yt=rr.valueOf(re),Yt=rr.valueOf(ye),or=rr.valueOf(Le);return Ke.multiply(or).selfSubtract(yt.multiply(Yt)).signum()}}},{key:"intersection",value:function(m,y,T,z){var re=new rr(m.y).selfSubtract(y.y),ye=new rr(y.x).selfSubtract(m.x),Le=new rr(m.x).selfMultiply(y.y).selfSubtract(new rr(y.x).selfMultiply(m.y)),Ke=new rr(T.y).selfSubtract(z.y),yt=new rr(z.x).selfSubtract(T.x),Yt=new rr(T.x).selfMultiply(z.y).selfSubtract(new rr(z.x).selfMultiply(T.y)),or=ye.multiply(Yt).selfSubtract(yt.multiply(Le)),Nr=Ke.multiply(Le).selfSubtract(re.multiply(Yt)),on=re.multiply(yt).selfSubtract(Ke.multiply(ye)),wn=or.selfDivide(on).doubleValue(),Ln=Nr.selfDivide(on).doubleValue();return Ee.isNaN(wn)||Ee.isInfinite(wn)||Ee.isNaN(Ln)||Ee.isInfinite(Ln)?null:new Oe(wn,Ln)}},{key:"orientationIndexFilter",value:function(m,y,T){var z=null,re=(m.x-T.x)*(y.y-T.y),ye=(m.y-T.y)*(y.x-T.x),Le=re-ye;if(re>0){if(ye<=0)return E.signum(Le);z=re+ye}else{if(!(re<0)||ye>=0)return E.signum(Le);z=-re-ye}var Ke=E.DP_SAFE_EPSILON*z;return Le>=Ke||-Le>=Ke?E.signum(Le):2}},{key:"signum",value:function(m){return m>0?1:m<0?-1:0}}])})();nt.DP_SAFE_EPSILON=1e-15;var be=(function(){return a((function E(){i(this,E)}),[{key:"getM",value:function(E){if(this.hasM()){var m=this.getDimension()-this.getMeasures();return this.getOrdinate(E,m)}return Ee.NaN}},{key:"setOrdinate",value:function(E,m,y){}},{key:"getZ",value:function(E){return this.hasZ()?this.getOrdinate(E,2):Ee.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(E,m){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(E){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(E){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(E){}},{key:"copy",value:function(){}},{key:"getY",value:function(E){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[H]}}])})();be.X=0,be.Y=1,be.Z=2,be.M=3;var _e=(function(){function E(){i(this,E)}return a(E,null,[{key:"index",value:function(m,y,T){return nt.orientationIndex(m,y,T)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var m=arguments[0],y=m.length-1;if(y<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var T=m[0],z=0,re=1;re<=y;re++){var ye=m[re];ye.y>T.y&&(T=ye,z=re)}var Le=z;do(Le-=1)<0&&(Le=y);while(m[Le].equals2D(T)&&Le!==z);var Ke=z;do Ke=(Ke+1)%y;while(m[Ke].equals2D(T)&&Ke!==z);var yt=m[Le],Yt=m[Ke];if(yt.equals2D(T)||Yt.equals2D(T)||yt.equals2D(Yt))return!1;var or=E.index(yt,T,Yt);return or===0?yt.x>Yt.x:or>0}if(pr(arguments[0],be)){var Nr=arguments[0],on=Nr.size()-1;if(on<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var wn=Nr.getCoordinate(0),Ln=0,bn=1;bn<=on;bn++){var Tn=Nr.getCoordinate(bn);Tn.y>wn.y&&(wn=Tn,Ln=bn)}var qi=null,Hi=Ln;do(Hi-=1)<0&&(Hi=on),qi=Nr.getCoordinate(Hi);while(qi.equals2D(wn)&&Hi!==Ln);var ha=null,Ra=Ln;do Ra=(Ra+1)%on,ha=Nr.getCoordinate(Ra);while(ha.equals2D(wn)&&Ra!==Ln);if(qi.equals2D(wn)||ha.equals2D(wn)||qi.equals2D(ha))return!1;var bo=E.index(qi,wn,ha);return bo===0?qi.x>ha.x:bo>0}}}])})();_e.CLOCKWISE=-1,_e.RIGHT=_e.CLOCKWISE,_e.COUNTERCLOCKWISE=1,_e.LEFT=_e.COUNTERCLOCKWISE,_e.COLLINEAR=0,_e.STRAIGHT=_e.COLLINEAR;var Ue=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(E,m){var y=this.getRightmostSideOfSegment(E,m);return y<0&&(y=this.getRightmostSideOfSegment(E,m-1)),y<0&&(this._minCoord=null,this.checkForRightmostCoordinate(E)),y}},{key:"findRightmostEdgeAtVertex",value:function(){var E=this._minDe.getEdge().getCoordinates();we.isTrue(this._minIndex>0&&this._minIndex<E.length,"rightmost point expected to be interior vertex of edge");var m=E[this._minIndex-1],y=E[this._minIndex+1],T=_e.index(this._minCoord,y,m),z=!1;(m.y<this._minCoord.y&&y.y<this._minCoord.y&&T===_e.COUNTERCLOCKWISE||m.y>this._minCoord.y&&y.y>this._minCoord.y&&T===_e.CLOCKWISE)&&(z=!0),z&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(E,m){var y=E.getEdge().getCoordinates();if(m<0||m+1>=y.length||y[m].y===y[m+1].y)return-1;var T=st.LEFT;return y[m].y<y[m+1].y&&(T=st.RIGHT),T}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(E){for(var m=E.getEdge().getCoordinates(),y=0;y<m.length-1;y++)(this._minCoord===null||m[y].x>this._minCoord.x)&&(this._minDe=E,this._minIndex=y,this._minCoord=m[y])}},{key:"findRightmostEdgeAtNode",value:function(){var E=this._minDe.getNode().getEdges();this._minDe=E.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(E){for(var m=E.iterator();m.hasNext();){var y=m.next();y.isForward()&&this.checkForRightmostCoordinate(y)}we.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===st.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])})(),Qe=(function(E){function m(y,T){var z;return i(this,m),(z=n(this,m,[T?y+" [ "+T+" ]":y])).pt=T?new Oe(T):void 0,z.name=Object.keys({TopologyException:m})[0],z}return v(m,E),a(m,[{key:"getCoordinate",value:function(){return this.pt}}])})(fe),ot=(function(){return a((function E(){i(this,E),this.array=[]}),[{key:"addLast",value:function(E){this.array.push(E)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])})(),et=(function(E){function m(y){var T;return i(this,m),(T=n(this,m)).array=[],y instanceof It&&T.addAll(y),T}return v(m,E),a(m,[{key:"interfaces_",get:function(){return[ar,It]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(y){return arguments.length===1?this.array.push(y):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(y){var T,z=c(y);try{for(z.s();!(T=z.n()).done;){var re=T.value;this.array.push(re)}}catch(ye){z.e(ye)}finally{z.f()}}},{key:"set",value:function(y,T){var z=this.array[y];return this.array[y]=T,z}},{key:"iterator",value:function(){return new Lt(this)}},{key:"get",value:function(y){if(y<0||y>=this.size())throw new ur;return this.array[y]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(y){y?this.array.sort((function(T,z){return y.compare(T,z)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(y){for(var T=0,z=this.array.length;T<z;T++)if(this.array[T]===y)return!!this.array.splice(T,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])})(ar),Lt=(function(){return a((function E(m){i(this,E),this.arrayList=m,this.position=0}),[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new at;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(E){return this.arrayList.set(this.position-1,E)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])})(),vt=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"clearVisitedEdges",value:function(){for(var E=this._dirEdgeList.iterator();E.hasNext();)E.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(E){for(var m=null,y=E.getEdges().iterator();y.hasNext();){var T=y.next();if(T.isVisited()||T.getSym().isVisited()){m=T;break}}if(m===null)throw new Qe("unable to find edge to compute depths at "+E.getCoordinate());E.getEdges().computeDepths(m);for(var z=E.getEdges().iterator();z.hasNext();){var re=z.next();re.setVisited(!0),this.copySymDepths(re)}}},{key:"computeDepth",value:function(E){this.clearVisitedEdges();var m=this._finder.getEdge();m.getNode(),m.getLabel(),m.setEdgeDepths(st.RIGHT,E),this.copySymDepths(m),this.computeDepths(m)}},{key:"create",value:function(E){this.addReachable(E),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var E=this._dirEdgeList.iterator();E.hasNext();){var m=E.next();m.getDepth(st.RIGHT)>=1&&m.getDepth(st.LEFT)<=0&&!m.isInteriorAreaEdge()&&m.setInResult(!0)}}},{key:"computeDepths",value:function(E){var m=new Wt,y=new ot,T=E.getNode();for(y.addLast(T),m.add(T),E.setVisited(!0);!y.isEmpty();){var z=y.removeFirst();m.add(z),this.computeNodeDepth(z);for(var re=z.getEdges().iterator();re.hasNext();){var ye=re.next().getSym();if(!ye.isVisited()){var Le=ye.getNode();m.contains(Le)||(y.addLast(Le),m.add(Le))}}}}},{key:"compareTo",value:function(E){var m=E;return this._rightMostCoord.x<m._rightMostCoord.x?-1:this._rightMostCoord.x>m._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var E=new Ye,m=this._dirEdgeList.iterator();m.hasNext();)for(var y=m.next().getEdge().getCoordinates(),T=0;T<y.length-1;T++)E.expandToInclude(y[T]);this._env=E}return this._env}},{key:"addReachable",value:function(E){var m=new yr;for(m.add(E);!m.empty();){var y=m.pop();this.add(y,m)}}},{key:"copySymDepths",value:function(E){var m=E.getSym();m.setDepth(st.LEFT,E.getDepth(st.RIGHT)),m.setDepth(st.RIGHT,E.getDepth(st.LEFT))}},{key:"add",value:function(E,m){E.setVisited(!0),this._nodes.add(E);for(var y=E.getEdges().iterator();y.hasNext();){var T=y.next();this._dirEdgeList.add(T);var z=T.getSym().getNode();z.isVisited()||m.push(z)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new et,this._nodes=new et,this._rightMostCoord=null,this._env=null,this._finder=new Ue}}])})(),Bt=(function(){return a((function E(){i(this,E)}),null,[{key:"intersection",value:function(E,m,y,T){var z=E.x<m.x?E.x:m.x,re=E.y<m.y?E.y:m.y,ye=E.x>m.x?E.x:m.x,Le=E.y>m.y?E.y:m.y,Ke=y.x<T.x?y.x:T.x,yt=y.y<T.y?y.y:T.y,Yt=y.x>T.x?y.x:T.x,or=y.y>T.y?y.y:T.y,Nr=((z>Ke?z:Ke)+(ye<Yt?ye:Yt))/2,on=((re>yt?re:yt)+(Le<or?Le:or))/2,wn=E.x-Nr,Ln=E.y-on,bn=m.x-Nr,Tn=m.y-on,qi=y.x-Nr,Hi=y.y-on,ha=T.x-Nr,Ra=T.y-on,bo=Ln-Tn,es=bn-wn,hl=wn*Tn-bn*Ln,pu=Hi-Ra,vs=ha-qi,Ao=qi*Ra-ha*Hi,ku=bo*vs-pu*es,Js=(es*Ao-vs*hl)/ku,qn=(pu*hl-bo*Ao)/ku;return Ee.isNaN(Js)||Ee.isInfinite(Js)||Ee.isNaN(qn)||Ee.isInfinite(qn)?null:new Oe(Js+Nr,qn+on)}}])})(),Kt=(function(){return a((function E(){i(this,E)}),null,[{key:"arraycopy",value:function(E,m,y,T,z){for(var re=0,ye=m;ye<m+z;ye++)y[T+re]=E[ye],re++}},{key:"getProperty",value:function(E){return{"line.separator":`
`}[E]}}])})(),Zt=(function(){function E(){i(this,E)}return a(E,null,[{key:"log10",value:function(m){var y=Math.log(m);return Ee.isInfinite(y)||Ee.isNaN(y)?y:y/E.LOG_10}},{key:"min",value:function(m,y,T,z){var re=m;return y<re&&(re=y),T<re&&(re=T),z<re&&(re=z),re}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1],T=arguments[2];return m<y?y:m>T?T:m}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var z=arguments[0],re=arguments[1],ye=arguments[2];return z<re?re:z>ye?ye:z}}},{key:"wrap",value:function(m,y){return m<0?y- -m%y:m%y}},{key:"max",value:function(){if(arguments.length===3){var m=arguments[1],y=arguments[2],T=arguments[0];return m>T&&(T=m),y>T&&(T=y),T}if(arguments.length===4){var z=arguments[1],re=arguments[2],ye=arguments[3],Le=arguments[0];return z>Le&&(Le=z),re>Le&&(Le=re),ye>Le&&(Le=ye),Le}}},{key:"average",value:function(m,y){return(m+y)/2}}])})();Zt.LOG_10=Math.log(10);var Er=(function(){function E(){i(this,E)}return a(E,null,[{key:"segmentToSegment",value:function(m,y,T,z){if(m.equals(y))return E.pointToSegment(m,T,z);if(T.equals(z))return E.pointToSegment(z,m,y);var re=!1;if(Ye.intersects(m,y,T,z)){var ye=(y.x-m.x)*(z.y-T.y)-(y.y-m.y)*(z.x-T.x);if(ye===0)re=!0;else{var Le=(m.y-T.y)*(z.x-T.x)-(m.x-T.x)*(z.y-T.y),Ke=((m.y-T.y)*(y.x-m.x)-(m.x-T.x)*(y.y-m.y))/ye,yt=Le/ye;(yt<0||yt>1||Ke<0||Ke>1)&&(re=!0)}}else re=!0;return re?Zt.min(E.pointToSegment(m,T,z),E.pointToSegment(y,T,z),E.pointToSegment(T,m,y),E.pointToSegment(z,m,y)):0}},{key:"pointToSegment",value:function(m,y,T){if(y.x===T.x&&y.y===T.y)return m.distance(y);var z=(T.x-y.x)*(T.x-y.x)+(T.y-y.y)*(T.y-y.y),re=((m.x-y.x)*(T.x-y.x)+(m.y-y.y)*(T.y-y.y))/z;if(re<=0)return m.distance(y);if(re>=1)return m.distance(T);var ye=((y.y-m.y)*(T.x-y.x)-(y.x-m.x)*(T.y-y.y))/z;return Math.abs(ye)*Math.sqrt(z)}},{key:"pointToLinePerpendicular",value:function(m,y,T){var z=(T.x-y.x)*(T.x-y.x)+(T.y-y.y)*(T.y-y.y),re=((y.y-m.y)*(T.x-y.x)-(y.x-m.x)*(T.y-y.y))/z;return Math.abs(re)*Math.sqrt(z)}},{key:"pointToSegmentString",value:function(m,y){if(y.length===0)throw new $("Line array must contain at least one vertex");for(var T=m.distance(y[0]),z=0;z<y.length-1;z++){var re=E.pointToSegment(m,y[z],y[z+1]);re<T&&(T=re)}return T}}])})(),bt=(function(){return a((function E(){i(this,E)}),[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||pr(arguments[0],be);else if(arguments.length!==2){if(arguments.length===3){var E=arguments[0],m=arguments[1];return this.create(E,m)}}}}])})(),vr=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E){}}])})(),Dr=(function(){return a((function E(){i(this,E)}),null,[{key:"ofLine",value:function(E){var m=E.size();if(m<=1)return 0;var y=0,T=new Oe;E.getCoordinate(0,T);for(var z=T.x,re=T.y,ye=1;ye<m;ye++){E.getCoordinate(ye,T);var Le=T.x,Ke=T.y,yt=Le-z,Yt=Ke-re;y+=Math.sqrt(yt*yt+Yt*Yt),z=Le,re=Ke}return y}}])})(),jr=a((function E(){i(this,E)})),Ur=(function(){function E(){i(this,E)}return a(E,null,[{key:"copyCoord",value:function(m,y,T,z){for(var re=Math.min(m.getDimension(),T.getDimension()),ye=0;ye<re;ye++)T.setOrdinate(z,ye,m.getOrdinate(y,ye))}},{key:"isRing",value:function(m){var y=m.size();return y===0||!(y<=3)&&m.getOrdinate(0,be.X)===m.getOrdinate(y-1,be.X)&&m.getOrdinate(0,be.Y)===m.getOrdinate(y-1,be.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(pr(arguments[0],be)&&Number.isInteger(arguments[1])){var m=arguments[0],y=arguments[1];E.scroll(m,y,E.isRing(m))}else if(pr(arguments[0],be)&&arguments[1]instanceof Oe){var T=arguments[0],z=arguments[1],re=E.indexOf(z,T);if(re<=0)return null;E.scroll(T,re)}}else if(arguments.length===3){var ye=arguments[0],Le=arguments[1],Ke=arguments[2];if(Le<=0)return null;for(var yt=ye.copy(),Yt=Ke?ye.size()-1:ye.size(),or=0;or<Yt;or++)for(var Nr=0;Nr<ye.getDimension();Nr++)ye.setOrdinate(or,Nr,yt.getOrdinate((Le+or)%Yt,Nr));if(Ke)for(var on=0;on<ye.getDimension();on++)ye.setOrdinate(Yt,on,ye.getOrdinate(0,on))}}},{key:"isEqual",value:function(m,y){var T=m.size();if(T!==y.size())return!1;for(var z=Math.min(m.getDimension(),y.getDimension()),re=0;re<T;re++)for(var ye=0;ye<z;ye++){var Le=m.getOrdinate(re,ye),Ke=y.getOrdinate(re,ye);if(m.getOrdinate(re,ye)!==y.getOrdinate(re,ye)&&(!Ee.isNaN(Le)||!Ee.isNaN(Ke)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var m=arguments[0];return E.minCoordinateIndex(m,0,m.size()-1)}if(arguments.length===3){for(var y=arguments[0],T=arguments[2],z=-1,re=null,ye=arguments[1];ye<=T;ye++){var Le=y.getCoordinate(ye);(re===null||re.compareTo(Le)>0)&&(re=Le,z=ye)}return z}}},{key:"extend",value:function(m,y,T){var z=m.create(T,y.getDimension()),re=y.size();if(E.copy(y,0,z,0,re),re>0)for(var ye=re;ye<T;ye++)E.copy(y,re-1,z,ye,1);return z}},{key:"reverse",value:function(m){for(var y=m.size()-1,T=Math.trunc(y/2),z=0;z<=T;z++)E.swap(m,z,y-z)}},{key:"swap",value:function(m,y,T){if(y===T)return null;for(var z=0;z<m.getDimension();z++){var re=m.getOrdinate(y,z);m.setOrdinate(y,z,m.getOrdinate(T,z)),m.setOrdinate(T,z,re)}}},{key:"copy",value:function(m,y,T,z,re){for(var ye=0;ye<re;ye++)E.copyCoord(m,y+ye,T,z+ye)}},{key:"ensureValidRing",value:function(m,y){var T=y.size();return T===0?y:T<=3?E.createClosedRing(m,y,4):y.getOrdinate(0,be.X)===y.getOrdinate(T-1,be.X)&&y.getOrdinate(0,be.Y)===y.getOrdinate(T-1,be.Y)?y:E.createClosedRing(m,y,T+1)}},{key:"indexOf",value:function(m,y){for(var T=0;T<y.size();T++)if(m.x===y.getOrdinate(T,be.X)&&m.y===y.getOrdinate(T,be.Y))return T;return-1}},{key:"createClosedRing",value:function(m,y,T){var z=m.create(T,y.getDimension()),re=y.size();E.copy(y,0,z,0,re);for(var ye=re;ye<T;ye++)E.copy(y,0,z,ye,1);return z}},{key:"minCoordinate",value:function(m){for(var y=null,T=0;T<m.size();T++){var z=m.getCoordinate(T);(y===null||y.compareTo(z)>0)&&(y=z)}return y}}])})(),nr=(function(){function E(){i(this,E)}return a(E,null,[{key:"toDimensionSymbol",value:function(m){switch(m){case E.FALSE:return E.SYM_FALSE;case E.TRUE:return E.SYM_TRUE;case E.DONTCARE:return E.SYM_DONTCARE;case E.P:return E.SYM_P;case E.L:return E.SYM_L;case E.A:return E.SYM_A}throw new $("Unknown dimension value: "+m)}},{key:"toDimensionValue",value:function(m){switch(xr.toUpperCase(m)){case E.SYM_FALSE:return E.FALSE;case E.SYM_TRUE:return E.TRUE;case E.SYM_DONTCARE:return E.DONTCARE;case E.SYM_P:return E.P;case E.SYM_L:return E.L;case E.SYM_A:return E.A}throw new $("Unknown dimension symbol: "+m)}}])})();nr.P=0,nr.L=1,nr.A=2,nr.FALSE=-1,nr.TRUE=-2,nr.DONTCARE=-3,nr.SYM_FALSE="F",nr.SYM_TRUE="T",nr.SYM_DONTCARE="*",nr.SYM_P="0",nr.SYM_L="1",nr.SYM_A="2";var Hn=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E){}}])})(),en=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E,m){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])})(),Wn=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Ye:this._points.expandEnvelope(new Ye)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new m(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof rt){var y=arguments[0],T=arguments[1];if(!this.isEquivalentClass(y))return!1;var z=y;if(this._points.size()!==z._points.size())return!1;for(var re=0;re<this._points.size();re++)if(!this.equal(this._points.getCoordinate(re),z._points.getCoordinate(re),T))return!1;return!0}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var y=0;y<Math.trunc(this._points.size()/2);y++){var T=this._points.size()-1-y;if(!this._points.getCoordinate(y).equals(this._points.getCoordinate(T))){if(this._points.getCoordinate(y).compareTo(this._points.getCoordinate(T))>0){var z=this._points.copy();Ur.reverse(z),this._points=z}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?nr.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var y=this._points.copy();return Ur.reverse(y),this.getFactory().createLineString(y)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return rt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Dr.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var y=arguments[0],T=0,z=0;T<this._points.size()&&z<y._points.size();){var re=this._points.getCoordinate(T).compareTo(y._points.getCoordinate(z));if(re!==0)return re;T++,z++}return T<this._points.size()?1:z<y._points.size()?-1:0}if(arguments.length===2){var ye=arguments[0];return arguments[1].compare(this._points,ye._points)}}},{key:"apply",value:function(){if(pr(arguments[0],vr))for(var y=arguments[0],T=0;T<this._points.size();T++)y.filter(this._points.getCoordinate(T));else if(pr(arguments[0],en)){var z=arguments[0];if(this._points.size()===0)return null;for(var re=0;re<this._points.size()&&(z.filter(this._points,re),!z.isDone());re++);z.isGeometryChanged()&&this.geometryChanged()}else pr(arguments[0],Hn)?arguments[0].filter(this):pr(arguments[0],j)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new je}},{key:"isEquivalentClass",value:function(y){return y instanceof m}},{key:"getCoordinateN",value:function(y){return this._points.getCoordinate(y)}},{key:"getGeometryType",value:function(){return rt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(y){if(y===null&&(y=this.getFactory().getCoordinateSequenceFactory().create([])),y.size()===1)throw new $("Invalid number of points in LineString (found "+y.size()+" - must be 0 or >= 2)");this._points=y}},{key:"isCoordinate",value:function(y){for(var T=0;T<this._points.size();T++)if(this._points.getCoordinate(T).equals(y))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(y){return this.getFactory().createPoint(this._points.getCoordinate(y))}},{key:"interfaces_",get:function(){return[jr]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var y=arguments[0],T=arguments[1];rt.constructor_.call(this,T),this.init(y)}}}}])})(rt),Pe=a((function E(){i(this,E)})),Be=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Ye;var y=new Ye;return y.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),y}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new m(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof rt){var y=arguments[0],T=arguments[1];return!!this.isEquivalentClass(y)&&(!(!this.isEmpty()||!y.isEmpty())||this.isEmpty()===y.isEmpty()&&this.equal(y.getCoordinate(),this.getCoordinate(),T))}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return nr.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return rt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var y=arguments[0];return this.getCoordinate().compareTo(y.getCoordinate())}if(arguments.length===2){var T=arguments[0];return arguments[1].compare(this._coordinates,T._coordinates)}}},{key:"apply",value:function(){if(pr(arguments[0],vr)){var y=arguments[0];if(this.isEmpty())return null;y.filter(this.getCoordinate())}else if(pr(arguments[0],en)){var T=arguments[0];if(this.isEmpty())return null;T.filter(this._coordinates,0),T.isGeometryChanged()&&this.geometryChanged()}else pr(arguments[0],Hn)?arguments[0].filter(this):pr(arguments[0],j)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return rt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(y){y===null&&(y=this.getFactory().getCoordinateSequenceFactory().create([])),we.isTrue(y.size()<=1),this._coordinates=y}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Pe]}}],[{key:"constructor_",value:function(){this._coordinates=null;var y=arguments[0],T=arguments[1];rt.constructor_.call(this,T),this.init(y)}}])})(rt),gt=(function(){function E(){i(this,E)}return a(E,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var m=arguments[0];return Math.abs(E.ofRingSigned(m))}if(pr(arguments[0],be)){var y=arguments[0];return Math.abs(E.ofRingSigned(y))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var m=arguments[0];if(m.length<3)return 0;for(var y=0,T=m[0].x,z=1;z<m.length-1;z++){var re=m[z].x-T,ye=m[z+1].y;y+=re*(m[z-1].y-ye)}return y/2}if(pr(arguments[0],be)){var Le=arguments[0],Ke=Le.size();if(Ke<3)return 0;var yt=new Oe,Yt=new Oe,or=new Oe;Le.getCoordinate(0,Yt),Le.getCoordinate(1,or);var Nr=Yt.x;or.x-=Nr;for(var on=0,wn=1;wn<Ke-1;wn++)yt.y=Yt.y,Yt.x=or.x,Yt.y=or.y,Le.getCoordinate(wn+1,or),or.x-=Nr,on+=Yt.x*(yt.y-or.y);return on/2}}}])})(),mt=(function(){return a((function E(){i(this,E)}),null,[{key:"sort",value:function(){var E=arguments,m=arguments[0];if(arguments.length===1)m.sort((function(Nr,on){return Nr.compareTo(on)}));else if(arguments.length===2)m.sort((function(Nr,on){return E[1].compare(Nr,on)}));else if(arguments.length===3){var y=m.slice(arguments[1],arguments[2]);y.sort();var T=m.slice(0,arguments[1]).concat(y,m.slice(arguments[2],m.length));m.splice(0,m.length);var z,re=c(T);try{for(re.s();!(z=re.n()).done;){var ye=z.value;m.push(ye)}}catch(Nr){re.e(Nr)}finally{re.f()}}else if(arguments.length===4){var Le=m.slice(arguments[1],arguments[2]);Le.sort((function(Nr,on){return E[3].compare(Nr,on)}));var Ke=m.slice(0,arguments[1]).concat(Le,m.slice(arguments[2],m.length));m.splice(0,m.length);var yt,Yt=c(Ke);try{for(Yt.s();!(yt=Yt.n()).done;){var or=yt.value;m.push(or)}}catch(Nr){Yt.e(Nr)}finally{Yt.f()}}}},{key:"asList",value:function(E){var m,y=new et,T=c(E);try{for(T.s();!(m=T.n()).done;){var z=m.value;y.add(z)}}catch(re){T.e(re)}finally{T.f()}return y}},{key:"copyOf",value:function(E,m){return E.slice(0,m)}}])})(),wr=a((function E(){i(this,E)})),Ar=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var y=new Array(this.getNumPoints()).fill(null),T=-1,z=this._shell.getCoordinates(),re=0;re<z.length;re++)y[++T]=z[re];for(var ye=0;ye<this._holes.length;ye++)for(var Le=this._holes[ye].getCoordinates(),Ke=0;Ke<Le.length;Ke++)y[++T]=Le[Ke];return y}},{key:"getArea",value:function(){var y=0;y+=gt.ofRing(this._shell.getCoordinateSequence());for(var T=0;T<this._holes.length;T++)y-=gt.ofRing(this._holes[T].getCoordinateSequence());return y}},{key:"copyInternal",value:function(){for(var y=this._shell.copy(),T=new Array(this._holes.length).fill(null),z=0;z<this._holes.length;z++)T[z]=this._holes[z].copy();return new m(y,T,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var y=this._shell.getCoordinateSequence(),T=this.getEnvelopeInternal(),z=0;z<5;z++){var re=y.getX(z);if(re!==T.getMinX()&&re!==T.getMaxX())return!1;var ye=y.getY(z);if(ye!==T.getMinY()&&ye!==T.getMaxY())return!1}for(var Le=y.getX(0),Ke=y.getY(0),yt=1;yt<=4;yt++){var Yt=y.getX(yt),or=y.getY(yt);if(Yt!==Le==(or!==Ke))return!1;Le=Yt,Ke=or}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof rt){var y=arguments[0],T=arguments[1];if(!this.isEquivalentClass(y))return!1;var z=y,re=this._shell,ye=z._shell;if(!re.equalsExact(ye,T)||this._holes.length!==z._holes.length)return!1;for(var Le=0;Le<this._holes.length;Le++)if(!this._holes[Le].equalsExact(z._holes[Le],T))return!1;return!0}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var y=0;y<this._holes.length;y++)this._holes[y]=this.normalized(this._holes[y],!1);mt.sort(this._holes)}else if(arguments.length===2){var T=arguments[0],z=arguments[1];if(T.isEmpty())return null;var re=T.getCoordinateSequence(),ye=Ur.minCoordinateIndex(re,0,re.size()-2);Ur.scroll(re,ye,!0),_e.isCCW(re)===z&&Ur.reverse(re)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var y=this.getExteriorRing().reverse(),T=new Array(this.getNumInteriorRing()).fill(null),z=0;z<T.length;z++)T[z]=this.getInteriorRingN(z).reverse();return this.getFactory().createPolygon(y,T)}},{key:"getTypeCode",value:function(){return rt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var y=0;y+=this._shell.getLength();for(var T=0;T<this._holes.length;T++)y+=this._holes[T].getLength();return y}},{key:"getNumPoints",value:function(){for(var y=this._shell.getNumPoints(),T=0;T<this._holes.length;T++)y+=this._holes[T].getNumPoints();return y}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(y,T){var z=y.copy();return this.normalize(z,T),z}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var y=arguments[0],T=this._shell,z=y._shell;return T.compareToSameClass(z)}if(arguments.length===2){var re=arguments[1],ye=arguments[0],Le=this._shell,Ke=ye._shell,yt=Le.compareToSameClass(Ke,re);if(yt!==0)return yt;for(var Yt=this.getNumInteriorRing(),or=ye.getNumInteriorRing(),Nr=0;Nr<Yt&&Nr<or;){var on=this.getInteriorRingN(Nr),wn=ye.getInteriorRingN(Nr),Ln=on.compareToSameClass(wn,re);if(Ln!==0)return Ln;Nr++}return Nr<Yt?1:Nr<or?-1:0}}},{key:"apply",value:function(){if(pr(arguments[0],vr)){var y=arguments[0];this._shell.apply(y);for(var T=0;T<this._holes.length;T++)this._holes[T].apply(y)}else if(pr(arguments[0],en)){var z=arguments[0];if(this._shell.apply(z),!z.isDone())for(var re=0;re<this._holes.length&&(this._holes[re].apply(z),!z.isDone());re++);z.isGeometryChanged()&&this.geometryChanged()}else if(pr(arguments[0],Hn))arguments[0].filter(this);else if(pr(arguments[0],j)){var ye=arguments[0];ye.filter(this),this._shell.apply(ye);for(var Le=0;Le<this._holes.length;Le++)this._holes[Le].apply(ye)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var y=new Array(this._holes.length+1).fill(null);y[0]=this._shell;for(var T=0;T<this._holes.length;T++)y[T+1]=this._holes[T];return y.length<=1?this.getFactory().createLinearRing(y[0].getCoordinateSequence()):this.getFactory().createMultiLineString(y)}},{key:"getGeometryType",value:function(){return rt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(y){return this._holes[y]}},{key:"interfaces_",get:function(){return[wr]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var y=arguments[0],T=arguments[1],z=arguments[2];if(rt.constructor_.call(this,z),y===null&&(y=this.getFactory().createLinearRing()),T===null&&(T=[]),rt.hasNullElements(T))throw new $("holes must not contain null elements");if(y.isEmpty()&&rt.hasNonEmptyElements(T))throw new $("shell is empty but holes are not");this._shell=y,this._holes=T}}])})(rt),Dn=(function(E){function m(){return i(this,m),n(this,m,arguments)}return v(m,E),a(m)})(Ht),wi=(function(E){function m(y){var T;return i(this,m),(T=n(this,m)).array=[],y instanceof It&&T.addAll(y),T}return v(m,E),a(m,[{key:"contains",value:function(y){var T,z=c(this.array);try{for(z.s();!(T=z.n()).done;)if(T.value.compareTo(y)===0)return!0}catch(re){z.e(re)}finally{z.f()}return!1}},{key:"add",value:function(y){if(this.contains(y))return!1;for(var T=0,z=this.array.length;T<z;T++)if(this.array[T].compareTo(y)===1)return!!this.array.splice(T,0,y);return this.array.push(y),!0}},{key:"addAll",value:function(y){var T,z=c(y);try{for(z.s();!(T=z.n()).done;){var re=T.value;this.add(re)}}catch(ye){z.e(ye)}finally{z.f()}return!0}},{key:"remove",value:function(){throw new je}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Lr(this.array)}}])})(Dn),Lr=(function(){return a((function E(m){i(this,E),this.array=m,this.position=0}),[{key:"next",value:function(){if(this.position===this.array.length)throw new at;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new je}}])})(),fn=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){for(var y=new Ye,T=0;T<this._geometries.length;T++)y.expandToInclude(this._geometries[T].getEnvelopeInternal());return y}},{key:"getGeometryN",value:function(y){return this._geometries[y]}},{key:"getCoordinates",value:function(){for(var y=new Array(this.getNumPoints()).fill(null),T=-1,z=0;z<this._geometries.length;z++)for(var re=this._geometries[z].getCoordinates(),ye=0;ye<re.length;ye++)y[++T]=re[ye];return y}},{key:"getArea",value:function(){for(var y=0,T=0;T<this._geometries.length;T++)y+=this._geometries[T].getArea();return y}},{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),T=0;T<y.length;T++)y[T]=this._geometries[T].copy();return new m(y,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof rt){var y=arguments[0],T=arguments[1];if(!this.isEquivalentClass(y))return!1;var z=y;if(this._geometries.length!==z._geometries.length)return!1;for(var re=0;re<this._geometries.length;re++)if(!this._geometries[re].equalsExact(z._geometries[re],T))return!1;return!0}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var y=0;y<this._geometries.length;y++)this._geometries[y].normalize();mt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var y=nr.FALSE,T=0;T<this._geometries.length;T++)y=Math.max(y,this._geometries[T].getBoundaryDimension());return y}},{key:"reverseInternal",value:function(){for(var y=this._geometries.length,T=new et(y),z=0;z<y;z++)T.add(this._geometries[z].reverse());return this.getFactory().buildGeometry(T)}},{key:"getTypeCode",value:function(){return rt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var y=nr.FALSE,T=0;T<this._geometries.length;T++)y=Math.max(y,this._geometries[T].getDimension());return y}},{key:"getLength",value:function(){for(var y=0,T=0;T<this._geometries.length;T++)y+=this._geometries[T].getLength();return y}},{key:"getNumPoints",value:function(){for(var y=0,T=0;T<this._geometries.length;T++)y+=this._geometries[T].getNumPoints();return y}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var y=arguments[0],T=new wi(mt.asList(this._geometries)),z=new wi(mt.asList(y._geometries));return this.compare(T,z)}if(arguments.length===2){for(var re=arguments[1],ye=arguments[0],Le=this.getNumGeometries(),Ke=ye.getNumGeometries(),yt=0;yt<Le&&yt<Ke;){var Yt=this.getGeometryN(yt),or=ye.getGeometryN(yt),Nr=Yt.compareToSameClass(or,re);if(Nr!==0)return Nr;yt++}return yt<Le?1:yt<Ke?-1:0}}},{key:"apply",value:function(){if(pr(arguments[0],vr))for(var y=arguments[0],T=0;T<this._geometries.length;T++)this._geometries[T].apply(y);else if(pr(arguments[0],en)){var z=arguments[0];if(this._geometries.length===0)return null;for(var re=0;re<this._geometries.length&&(this._geometries[re].apply(z),!z.isDone());re++);z.isGeometryChanged()&&this.geometryChanged()}else if(pr(arguments[0],Hn)){var ye=arguments[0];ye.filter(this);for(var Le=0;Le<this._geometries.length;Le++)this._geometries[Le].apply(ye)}else if(pr(arguments[0],j)){var Ke=arguments[0];Ke.filter(this);for(var yt=0;yt<this._geometries.length;yt++)this._geometries[yt].apply(Ke)}}},{key:"getBoundary",value:function(){return rt.checkNotGeometryCollection(this),we.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return rt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var y=arguments[0],T=arguments[1];if(rt.constructor_.call(this,T),y===null&&(y=[]),rt.hasNullElements(y))throw new $("geometries must not contain null elements");this._geometries=y}}}}])})(rt),gn=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),T=0;T<y.length;T++)y[T]=this._geometries[T].copy();return new m(y,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof rt){var y=arguments[0],T=arguments[1];return!!this.isEquivalentClass(y)&&P(m,"equalsExact",this,1).call(this,y,T)}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var y=arguments[0];return this._geometries[y].getCoordinate()}return P(m,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return nr.FALSE}},{key:"getTypeCode",value:function(){return rt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return rt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Pe]}}],[{key:"constructor_",value:function(){var y=arguments[0],T=arguments[1];fn.constructor_.call(this,y,T)}}])})(fn),_i=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"copyInternal",value:function(){return new m(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return nr.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||P(m,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var y=this._points.copy();return Ur.reverse(y),this.getFactory().createLinearRing(y)}},{key:"getTypeCode",value:function(){return rt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!P(m,"isClosed",this,1).call(this))throw new $("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<m.MINIMUM_VALID_SIZE)throw new $("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return rt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var y=arguments[0],T=arguments[1];Wn.constructor_.call(this,y,T),this.validateConstruction()}}])})(Wn);_i.MINIMUM_VALID_SIZE=4;var oi=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"setOrdinate",value:function(y,T){switch(y){case m.X:this.x=T;break;case m.Y:this.y=T;break;default:throw new $("Invalid ordinate index: "+y)}}},{key:"getZ",value:function(){return Oe.NULL_ORDINATE}},{key:"getOrdinate",value:function(y){switch(y){case m.X:return this.x;case m.Y:return this.y}throw new $("Invalid ordinate index: "+y)}},{key:"setZ",value:function(y){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(y){this.x=y.x,this.y=y.y,this.z=y.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)Oe.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof m){var y=arguments[0];Oe.constructor_.call(this,y.x,y.y)}else if(arguments[0]instanceof Oe){var T=arguments[0];Oe.constructor_.call(this,T.x,T.y)}}else if(arguments.length===2){var z=arguments[0],re=arguments[1];Oe.constructor_.call(this,z,re,Oe.NULL_ORDINATE)}}}])})(Oe);oi.X=0,oi.Y=1,oi.Z=-1,oi.M=-1;var Di=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(y,T){switch(y){case m.X:this.x=T;break;case m.Y:this.y=T;break;case m.M:this._m=T;break;default:throw new $("Invalid ordinate index: "+y)}}},{key:"setM",value:function(y){this._m=y}},{key:"getZ",value:function(){return Oe.NULL_ORDINATE}},{key:"getOrdinate",value:function(y){switch(y){case m.X:return this.x;case m.Y:return this.y;case m.M:return this._m}throw new $("Invalid ordinate index: "+y)}},{key:"setZ",value:function(y){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(y){this.x=y.x,this.y=y.y,this.z=y.getZ(),this._m=y.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Oe.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof m){var y=arguments[0];Oe.constructor_.call(this,y.x,y.y),this._m=y._m}else if(arguments[0]instanceof Oe){var T=arguments[0];Oe.constructor_.call(this,T.x,T.y),this._m=this.getM()}}else if(arguments.length===3){var z=arguments[0],re=arguments[1],ye=arguments[2];Oe.constructor_.call(this,z,re,Oe.NULL_ORDINATE),this._m=ye}}}])})(Oe);Di.X=0,Di.Y=1,Di.Z=-1,Di.M=2;var Pn=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(y,T){switch(y){case Oe.X:this.x=T;break;case Oe.Y:this.y=T;break;case Oe.Z:this.z=T;break;case Oe.M:this._m=T;break;default:throw new $("Invalid ordinate index: "+y)}}},{key:"setM",value:function(y){this._m=y}},{key:"getOrdinate",value:function(y){switch(y){case Oe.X:return this.x;case Oe.Y:return this.y;case Oe.Z:return this.getZ();case Oe.M:return this.getM()}throw new $("Invalid ordinate index: "+y)}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(y){this.x=y.x,this.y=y.y,this.z=y.getZ(),this._m=y.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Oe.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof m){var y=arguments[0];Oe.constructor_.call(this,y),this._m=y._m}else if(arguments[0]instanceof Oe){var T=arguments[0];Oe.constructor_.call(this,T),this._m=this.getM()}}else if(arguments.length===4){var z=arguments[0],re=arguments[1],ye=arguments[2],Le=arguments[3];Oe.constructor_.call(this,z,re,ye),this._m=Le}}}])})(Oe),ga=(function(){function E(){i(this,E)}return a(E,null,[{key:"measures",value:function(m){return m instanceof oi?0:m instanceof Di||m instanceof Pn?1:0}},{key:"dimension",value:function(m){return m instanceof oi?2:m instanceof Di?3:m instanceof Pn?4:3}},{key:"create",value:function(){if(arguments.length===1){var m=arguments[0];return E.create(m,0)}if(arguments.length===2){var y=arguments[0],T=arguments[1];return y===2?new oi:y===3&&T===0?new Oe:y===3&&T===1?new Di:y===4&&T===1?new Pn:new Oe}}}])})(),na=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"getCoordinate",value:function(y){return this.get(y)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&pr(arguments[0],It)){for(var y=arguments[1],T=!1,z=arguments[0].iterator();z.hasNext();)this.add(z.next(),y),T=!0;return T}return P(m,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var y=P(m,"clone",this,1).call(this),T=0;T<this.size();T++)y.add(T,this.get(T).clone());return y}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(m.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(m.coordArrayType);for(var y=this.size(),T=new Array(y).fill(null),z=0;z<y;z++)T[z]=this.get(y-z-1);return T}}},{key:"add",value:function(){if(arguments.length===1){var y=arguments[0];return P(m,"add",this,1).call(this,y)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var T=arguments[0],z=arguments[1];return this.add(T,z,!0),!0}if(arguments[0]instanceof Oe&&typeof arguments[1]=="boolean"){var re=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(re))return null;P(m,"add",this,1).call(this,re)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var ye=arguments[0],Le=arguments[1];return this.add(ye,Le),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Ke=arguments[0],yt=arguments[1];if(arguments[2])for(var Yt=0;Yt<Ke.length;Yt++)this.add(Ke[Yt],yt);else for(var or=Ke.length-1;or>=0;or--)this.add(Ke[or],yt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Oe){var Nr=arguments[0],on=arguments[1];if(!arguments[2]){var wn=this.size();if(wn>0&&(Nr>0&&this.get(Nr-1).equals2D(on)||Nr<wn&&this.get(Nr).equals2D(on)))return null}P(m,"add",this,1).call(this,Nr,on)}}else if(arguments.length===4){var Ln=arguments[0],bn=arguments[1],Tn=arguments[2],qi=arguments[3],Hi=1;Tn>qi&&(Hi=-1);for(var ha=Tn;ha!==qi;ha+=Hi)this.add(Ln[ha],bn);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var y=this.get(0).copy();this.add(y,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var y=arguments[0];this.ensureCapacity(y.length),this.add(y,!0)}else if(arguments.length===2){var T=arguments[0],z=arguments[1];this.ensureCapacity(T.length),this.add(T,z)}}}}])})(et);na.coordArrayType=new Array(0).fill(null);var Ni=(function(){function E(){i(this,E)}return a(E,null,[{key:"isRing",value:function(m){return!(m.length<4)&&!!m[0].equals2D(m[m.length-1])}},{key:"ptNotInList",value:function(m,y){for(var T=0;T<m.length;T++){var z=m[T];if(E.indexOf(z,y)<0)return z}return null}},{key:"scroll",value:function(m,y){var T=E.indexOf(y,m);if(T<0)return null;var z=new Array(m.length).fill(null);Kt.arraycopy(m,T,z,0,m.length-T),Kt.arraycopy(m,0,z,m.length-T,T),Kt.arraycopy(z,0,m,0,m.length)}},{key:"equals",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];if(m===y)return!0;if(m===null||y===null||m.length!==y.length)return!1;for(var T=0;T<m.length;T++)if(!m[T].equals(y[T]))return!1;return!0}if(arguments.length===3){var z=arguments[0],re=arguments[1],ye=arguments[2];if(z===re)return!0;if(z===null||re===null||z.length!==re.length)return!1;for(var Le=0;Le<z.length;Le++)if(ye.compare(z[Le],re[Le])!==0)return!1;return!0}}},{key:"intersection",value:function(m,y){for(var T=new na,z=0;z<m.length;z++)y.intersects(m[z])&&T.add(m[z],!0);return T.toCoordinateArray()}},{key:"measures",value:function(m){if(m===null||m.length===0)return 0;var y,T=0,z=c(m);try{for(z.s();!(y=z.n()).done;){var re=y.value;T=Math.max(T,ga.measures(re))}}catch(ye){z.e(ye)}finally{z.f()}return T}},{key:"hasRepeatedPoints",value:function(m){for(var y=1;y<m.length;y++)if(m[y-1].equals(m[y]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(m){return E.hasRepeatedPoints(m)?new na(m,!1).toCoordinateArray():m}},{key:"reverse",value:function(m){for(var y=m.length-1,T=Math.trunc(y/2),z=0;z<=T;z++){var re=m[z];m[z]=m[y-z],m[y-z]=re}}},{key:"removeNull",value:function(m){for(var y=0,T=0;T<m.length;T++)m[T]!==null&&y++;var z=new Array(y).fill(null);if(y===0)return z;for(var re=0,ye=0;ye<m.length;ye++)m[ye]!==null&&(z[re++]=m[ye]);return z}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var m=arguments[0],y=new Array(m.length).fill(null),T=0;T<m.length;T++)y[T]=m[T].copy();return y}if(arguments.length===5)for(var z=arguments[0],re=arguments[1],ye=arguments[2],Le=arguments[3],Ke=arguments[4],yt=0;yt<Ke;yt++)ye[Le+yt]=z[re+yt].copy()}},{key:"isEqualReversed",value:function(m,y){for(var T=0;T<m.length;T++){var z=m[T],re=y[m.length-T-1];if(z.compareTo(re)!==0)return!1}return!0}},{key:"envelope",value:function(m){for(var y=new Ye,T=0;T<m.length;T++)y.expandToInclude(m[T]);return y}},{key:"toCoordinateArray",value:function(m){return m.toArray(E.coordArrayType)}},{key:"dimension",value:function(m){if(m===null||m.length===0)return 3;var y,T=0,z=c(m);try{for(z.s();!(y=z.n()).done;){var re=y.value;T=Math.max(T,ga.dimension(re))}}catch(ye){z.e(ye)}finally{z.f()}return T}},{key:"atLeastNCoordinatesOrNothing",value:function(m,y){return y.length>=m?y:[]}},{key:"indexOf",value:function(m,y){for(var T=0;T<y.length;T++)if(m.equals(y[T]))return T;return-1}},{key:"increasingDirection",value:function(m){for(var y=0;y<Math.trunc(m.length/2);y++){var T=m.length-1-y,z=m[y].compareTo(m[T]);if(z!==0)return z}return 1}},{key:"compare",value:function(m,y){for(var T=0;T<m.length&&T<y.length;){var z=m[T].compareTo(y[T]);if(z!==0)return z;T++}return T<y.length?-1:T<m.length?1:0}},{key:"minCoordinate",value:function(m){for(var y=null,T=0;T<m.length;T++)(y===null||y.compareTo(m[T])>0)&&(y=m[T]);return y}},{key:"extract",value:function(m,y,T){y=Zt.clamp(y,0,m.length);var z=(T=Zt.clamp(T,-1,m.length))-y+1;T<0&&(z=0),y>=m.length&&(z=0),T<y&&(z=0);var re=new Array(z).fill(null);if(z===0)return re;for(var ye=0,Le=y;Le<=T;Le++)re[ye++]=m[Le];return re}}])})(),Na=(function(){return a((function E(){i(this,E)}),[{key:"compare",value:function(E,m){var y=E,T=m;return Ni.compare(y,T)}},{key:"interfaces_",get:function(){return[Ae]}}])})(),ua=(function(){return a((function E(){i(this,E)}),[{key:"compare",value:function(E,m){var y=E,T=m;if(y.length<T.length)return-1;if(y.length>T.length)return 1;if(y.length===0)return 0;var z=Ni.compare(y,T);return Ni.isEqualReversed(y,T)?0:z}},{key:"OLDcompare",value:function(E,m){var y=E,T=m;if(y.length<T.length)return-1;if(y.length>T.length)return 1;if(y.length===0)return 0;for(var z=Ni.increasingDirection(y),re=Ni.increasingDirection(T),ye=z>0?0:y.length-1,Le=re>0?0:y.length-1,Ke=0;Ke<y.length;Ke++){var yt=y[ye].compareTo(T[Le]);if(yt!==0)return yt;ye+=z,Le+=re}return 0}},{key:"interfaces_",get:function(){return[Ae]}}])})();Ni.ForwardComparator=Na,Ni.BidirectionalComparator=ua,Ni.coordArrayType=new Array(0).fill(null);var Mi=(function(){return a((function E(m){i(this,E),this.str=m}),[{key:"append",value:function(E){this.str+=E}},{key:"setCharAt",value:function(E,m){this.str=this.str.substr(0,E)+m+this.str.substr(E+1)}},{key:"toString",value:function(){return this.str}}])})(),Ua=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getM",value:function(m){return this.hasM()?this._coordinates[m].getM():Ee.NaN}},{key:"setOrdinate",value:function(m,y,T){switch(y){case be.X:this._coordinates[m].x=T;break;case be.Y:this._coordinates[m].y=T;break;default:this._coordinates[m].setOrdinate(y,T)}}},{key:"getZ",value:function(m){return this.hasZ()?this._coordinates[m].getZ():Ee.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(m,y){switch(y){case be.X:return this._coordinates[m].x;case be.Y:return this._coordinates[m].y;default:return this._coordinates[m].getOrdinate(y)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var m=arguments[0];return this._coordinates[m]}if(arguments.length===2){var y=arguments[0];arguments[1].setCoordinate(this._coordinates[y])}}},{key:"getCoordinateCopy",value:function(m){var y=this.createCoordinate();return y.setCoordinate(this._coordinates[m]),y}},{key:"createCoordinate",value:function(){return ga.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(m){return this._coordinates[m].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(m){for(var y=0;y<this._coordinates.length;y++)m.expandToInclude(this._coordinates[y]);return m}},{key:"copy",value:function(){for(var m=new Array(this.size()).fill(null),y=0;y<this._coordinates.length;y++){var T=this.createCoordinate();T.setCoordinate(this._coordinates[y]),m[y]=T}return new E(m,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var m=new Mi(17*this._coordinates.length);m.append("("),m.append(this._coordinates[0]);for(var y=1;y<this._coordinates.length;y++)m.append(", "),m.append(this._coordinates[y]);return m.append(")"),m.toString()}return"()"}},{key:"getY",value:function(m){return this._coordinates[m].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[be,Y]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];E.constructor_.call(this,m,Ni.dimension(m),Ni.measures(m))}else if(Number.isInteger(arguments[0])){var y=arguments[0];this._coordinates=new Array(y).fill(null);for(var T=0;T<y;T++)this._coordinates[T]=new Oe}else if(pr(arguments[0],be)){var z=arguments[0];if(z===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=z.getDimension(),this._measures=z.getMeasures(),this._coordinates=new Array(z.size()).fill(null);for(var re=0;re<this._coordinates.length;re++)this._coordinates[re]=z.getCoordinateCopy(re)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ye=arguments[0],Le=arguments[1];E.constructor_.call(this,ye,Le,Ni.measures(ye))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Ke=arguments[0],yt=arguments[1];this._coordinates=new Array(Ke).fill(null),this._dimension=yt;for(var Yt=0;Yt<Ke;Yt++)this._coordinates[Yt]=ga.create(yt)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var or=arguments[0],Nr=arguments[1],on=arguments[2];this._dimension=Nr,this._measures=on,this._coordinates=or===null?new Array(0).fill(null):or}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var wn=arguments[0],Ln=arguments[1],bn=arguments[2];this._coordinates=new Array(wn).fill(null),this._dimension=Ln,this._measures=bn;for(var Tn=0;Tn<wn;Tn++)this._coordinates[Tn]=this.createCoordinate()}}}}])})(),Oa=(function(){function E(){i(this,E)}return a(E,[{key:"readResolve",value:function(){return E.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Ua(arguments[0]);if(pr(arguments[0],be))return new Ua(arguments[0])}else{if(arguments.length===2){var m=arguments[1];return m>3&&(m=3),m<2&&(m=2),new Ua(arguments[0],m)}if(arguments.length===3){var y=arguments[2],T=arguments[1]-y;return y>1&&(y=1),T>3&&(T=3),T<2&&(T=2),new Ua(arguments[0],T+y,y)}}}},{key:"interfaces_",get:function(){return[bt,Y]}}],[{key:"instance",value:function(){return E.instanceObject}}])})();Oa.instanceObject=new Oa;var Nn=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),T=0;T<y.length;T++)y[T]=this._geometries[T].copy();return new m(y,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof rt){var y=arguments[0],T=arguments[1];return!!this.isEquivalentClass(y)&&P(m,"equalsExact",this,1).call(this,y,T)}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return rt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var y=new et,T=0;T<this._geometries.length;T++)for(var z=this._geometries[T].getBoundary(),re=0;re<z.getNumGeometries();re++)y.add(z.getGeometryN(re));var ye=new Array(y.size()).fill(null);return this.getFactory().createMultiLineString(y.toArray(ye))}},{key:"getGeometryType",value:function(){return rt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[wr]}}],[{key:"constructor_",value:function(){var y=arguments[0],T=arguments[1];fn.constructor_.call(this,y,T)}}])})(fn),Gl=(function(){return a((function E(){i(this,E)}),[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])})(),Tl=(function(E){function m(){var y;return i(this,m),(y=n(this,m)).map=new Map,y}return v(m,E),a(m,[{key:"get",value:function(y){return this.map.get(y)||null}},{key:"put",value:function(y,T){return this.map.set(y,T),T}},{key:"values",value:function(){for(var y=new et,T=this.map.values(),z=T.next();!z.done;)y.add(z.value),z=T.next();return y}},{key:"entrySet",value:function(){var y=new Wt;return this.map.entries().forEach((function(T){return y.add(T)})),y}},{key:"size",value:function(){return this.map.size()}}])})(Gl),ya=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"equals",value:function(m){if(!(m instanceof E))return!1;var y=m;return this._modelType===y._modelType&&this._scale===y._scale}},{key:"compareTo",value:function(m){var y=m,T=this.getMaximumSignificantDigits(),z=y.getMaximumSignificantDigits();return ir.compare(T,z)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===E.FLOATING||this._modelType===E.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var m="UNKNOWN";return this._modelType===E.FLOATING?m="Floating":this._modelType===E.FLOATING_SINGLE?m="Floating-Single":this._modelType===E.FIXED&&(m="Fixed (Scale="+this.getScale()+")"),m}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var m=arguments[0];return Ee.isNaN(m)||this._modelType===E.FLOATING_SINGLE?m:this._modelType===E.FIXED?Math.round(m*this._scale)/this._scale:m}if(arguments[0]instanceof Oe){var y=arguments[0];if(this._modelType===E.FLOATING)return null;y.x=this.makePrecise(y.x),y.y=this.makePrecise(y.y)}}},{key:"getMaximumSignificantDigits",value:function(){var m=16;return this._modelType===E.FLOATING?m=16:this._modelType===E.FLOATING_SINGLE?m=6:this._modelType===E.FIXED&&(m=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),m}},{key:"setScale",value:function(m){this._scale=Math.abs(m)}},{key:"interfaces_",get:function(){return[Y,U]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=E.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof ca){var m=arguments[0];this._modelType=m,m===E.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var y=arguments[0];this._modelType=E.FIXED,this.setScale(y)}else if(arguments[0]instanceof E){var T=arguments[0];this._modelType=T._modelType,this._scale=T._scale}}}},{key:"mostPrecise",value:function(m,y){return m.compareTo(y)>=0?m:y}}])})(),ca=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"readResolve",value:function(){return E.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[Y]}}],[{key:"constructor_",value:function(){this._name=null;var m=arguments[0];this._name=m,E.nameToTypeMap.put(m,this)}}])})();ca.nameToTypeMap=new Tl,ya.Type=ca,ya.FIXED=new ca("FIXED"),ya.FLOATING=new ca("FLOATING"),ya.FLOATING_SINGLE=new ca("FLOATING SINGLE"),ya.maximumPreciseValue=9007199254740992;var To=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"copyInternal",value:function(){for(var y=new Array(this._geometries.length).fill(null),T=0;T<y.length;T++)y[T]=this._geometries[T].copy();return new m(y,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof rt){var y=arguments[0],T=arguments[1];return!!this.isEquivalentClass(y)&&P(m,"equalsExact",this,1).call(this,y,T)}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?nr.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return rt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new je}},{key:"getGeometryType",value:function(){return rt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[jr]}}],[{key:"constructor_",value:function(){var y=arguments[0],T=arguments[1];fn.constructor_.call(this,y,T)}}])})(fn),go=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"createEmpty",value:function(m){switch(m){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new $("Invalid dimension: "+m)}}},{key:"toGeometry",value:function(m){return m.isNull()?this.createPoint():m.getMinX()===m.getMaxX()&&m.getMinY()===m.getMaxY()?this.createPoint(new Oe(m.getMinX(),m.getMinY())):m.getMinX()===m.getMaxX()||m.getMinY()===m.getMaxY()?this.createLineString([new Oe(m.getMinX(),m.getMinY()),new Oe(m.getMaxX(),m.getMaxY())]):this.createPolygon(this.createLinearRing([new Oe(m.getMinX(),m.getMinY()),new Oe(m.getMinX(),m.getMaxY()),new Oe(m.getMaxX(),m.getMaxY()),new Oe(m.getMaxX(),m.getMinY()),new Oe(m.getMinX(),m.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];return this.createLineString(m!==null?this.getCoordinateSequenceFactory().create(m):null)}if(pr(arguments[0],be))return new Wn(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new To(null,this):arguments.length===1?new To(arguments[0],this):void 0}},{key:"buildGeometry",value:function(m){for(var y=null,T=!1,z=!1,re=m.iterator();re.hasNext();){var ye=re.next(),Le=ye.getTypeCode();y===null&&(y=Le),Le!==y&&(T=!0),ye instanceof fn&&(z=!0)}if(y===null)return this.createGeometryCollection();if(T||z)return this.createGeometryCollection(E.toGeometryArray(m));var Ke=m.iterator().next();if(m.size()>1){if(Ke instanceof Ar)return this.createMultiPolygon(E.toPolygonArray(m));if(Ke instanceof Wn)return this.createMultiLineString(E.toLineStringArray(m));if(Ke instanceof Be)return this.createMultiPoint(E.toPointArray(m));we.shouldNeverReachHere("Unhandled geometry type: "+Ke.getGeometryType())}return Ke}},{key:"createMultiPointFromCoords",value:function(m){return this.createMultiPoint(m!==null?this.getCoordinateSequenceFactory().create(m):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Oe){var m=arguments[0];return this.createPoint(m!==null?this.getCoordinateSequenceFactory().create([m]):null)}if(pr(arguments[0],be))return new Be(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(pr(arguments[0],be)){var m=arguments[0];return this.createPolygon(this.createLinearRing(m))}if(arguments[0]instanceof Array){var y=arguments[0];return this.createPolygon(this.createLinearRing(y))}if(arguments[0]instanceof _i){var T=arguments[0];return this.createPolygon(T,null)}}else if(arguments.length===2)return new Ar(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new fn(null,this):arguments.length===1?new fn(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];return this.createLinearRing(m!==null?this.getCoordinateSequenceFactory().create(m):null)}if(pr(arguments[0],be))return new _i(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Nn(null,this):arguments.length===1?new Nn(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new gn(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new gn(arguments[0],this);if(pr(arguments[0],be)){var m=arguments[0];if(m===null)return this.createMultiPoint(new Array(0).fill(null));for(var y=new Array(m.size()).fill(null),T=0;T<m.size();T++){var z=this.getCoordinateSequenceFactory().create(1,m.getDimension(),m.getMeasures());Ur.copy(m,T,z,0,1),y[T]=this.createPoint(z)}return this.createMultiPoint(y)}}}},{key:"interfaces_",get:function(){return[Y]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)E.constructor_.call(this,new ya,0);else if(arguments.length===1){if(pr(arguments[0],bt)){var m=arguments[0];E.constructor_.call(this,new ya,0,m)}else if(arguments[0]instanceof ya){var y=arguments[0];E.constructor_.call(this,y,0,E.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];E.constructor_.call(this,T,z,E.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Le=arguments[2];this._precisionModel=re,this._coordinateSequenceFactory=Le,this._SRID=ye}}},{key:"toMultiPolygonArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toGeometryArray",value:function(m){if(m===null)return null;var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Oa.instance()}},{key:"toMultiLineStringArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toLineStringArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toMultiPointArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toLinearRingArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toPointArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"toPolygonArray",value:function(m){var y=new Array(m.size()).fill(null);return m.toArray(y)}},{key:"createPointFromInternalCoord",value:function(m,y){return y.getPrecisionModel().makePrecise(m),y.getFactory().createPoint(m)}}])})(),qo="XY",Xu="XYZ",da="XYM",Yu="XYZM",Zu={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ws="EMPTY",Ms=1,Ma=2,Ga=3,va=4,Ls=5,Hl=6;for(var Wl in Zu)Zu[Wl].toUpperCase();var J=(function(){return a((function E(m){i(this,E),this.wkt=m,this.index_=-1}),[{key:"isAlpha_",value:function(E){return E>="a"&&E<="z"||E>="A"&&E<="Z"}},{key:"isNumeric_",value:function(E,m){return E>="0"&&E<="9"||E=="."&&!(m!==void 0&&m)}},{key:"isWhiteSpace_",value:function(E){return E==" "||E=="	"||E=="\r"||E==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var E,m=this.nextChar_(),y=this.index_,T=m;if(m=="(")E=Ma;else if(m==",")E=Ls;else if(m==")")E=Ga;else if(this.isNumeric_(m)||m=="-")E=va,T=this.readNumber_();else if(this.isAlpha_(m))E=Ms,T=this.readText_();else{if(this.isWhiteSpace_(m))return this.nextToken();if(m!=="")throw new Error("Unexpected character: "+m);E=Hl}return{position:y,value:T,type:E}}},{key:"readNumber_",value:function(){var E,m=this.index_,y=!1,T=!1;do E=="."?y=!0:E!="e"&&E!="E"||(T=!0),E=this.nextChar_();while(this.isNumeric_(E,y)||!T&&(E=="e"||E=="E")||T&&(E=="-"||E=="+"));return parseFloat(this.wkt.substring(m,this.index_--))}},{key:"readText_",value:function(){var E,m=this.index_;do E=this.nextChar_();while(this.isAlpha_(E));return this.wkt.substring(m,this.index_--).toUpperCase()}}])})(),pe=(function(){return a((function E(m,y){i(this,E),this.lexer_=m,this.token_,this.layout_=qo,this.factory=y}),[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(E){return this.token_.type==E}},{key:"match",value:function(E){var m=this.isTokenType(E);return m&&this.consume_(),m}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var E=qo,m=this.token_;if(this.isTokenType(Ms)){var y=m.value;y==="Z"?E=Xu:y==="M"?E=da:y==="ZM"&&(E=Yu),E!==qo&&this.consume_()}return E}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Ma)){var E=[];do E.push(this.parseGeometry_());while(this.match(Ls));if(this.match(Ga))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Ma)){var E=this.parsePoint_();if(this.match(Ga))return E}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Ma)){var E=this.parsePointList_();if(this.match(Ga))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Ma)){var E=this.parseLineStringTextList_();if(this.match(Ga))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var E;if(this.match(Ma)){if(E=this.token_.type==Ma?this.parsePointTextList_():this.parsePointList_(),this.match(Ga))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Ma)){var E=this.parseLineStringTextList_();if(this.match(Ga))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Ma)){var E=this.parsePolygonTextList_();if(this.match(Ga))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var E=[],m=this.layout_.length,y=0;y<m;++y){var T=this.token_;if(!this.match(va))break;E.push(T.value)}if(E.length==m)return E;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var E=[this.parsePoint_()];this.match(Ls);)E.push(this.parsePoint_());return E}},{key:"parsePointTextList_",value:function(){for(var E=[this.parsePointText_()];this.match(Ls);)E.push(this.parsePointText_());return E}},{key:"parseLineStringTextList_",value:function(){for(var E=[this.parseLineStringText_()];this.match(Ls);)E.push(this.parseLineStringText_());return E}},{key:"parsePolygonTextList_",value:function(){for(var E=[this.parsePolygonText_()];this.match(Ls);)E.push(this.parsePolygonText_());return E}},{key:"isEmptyGeometry_",value:function(){var E=this.isTokenType(Ms)&&this.token_.value==Ws;return E&&this.consume_(),E}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var E=this.factory,m=function(Ln){return o(Oe,I(Ln))},y=function(Ln){var bn=Ln.map((function(Tn){return E.createLinearRing(Tn.map(m))}));return bn.length>1?E.createPolygon(bn[0],bn.slice(1)):E.createPolygon(bn[0])},T=this.token_;if(this.match(Ms)){var z=T.value;if(this.layout_=this.parseGeometryLayout_(),z=="GEOMETRYCOLLECTION"){var re=this.parseGeometryCollectionText_();return E.createGeometryCollection(re)}switch(z){case"POINT":var ye=this.parsePointText_();return ye?E.createPoint(o(Oe,I(ye))):E.createPoint();case"LINESTRING":var Le=this.parseLineStringText_().map(m);return E.createLineString(Le);case"LINEARRING":var Ke=this.parseLineStringText_().map(m);return E.createLinearRing(Ke);case"POLYGON":var yt=this.parsePolygonText_();return yt&&yt.length!==0?y(yt):E.createPolygon();case"MULTIPOINT":var Yt=this.parseMultiPointText_();if(!Yt||Yt.length===0)return E.createMultiPoint();var or=Yt.map(m).map((function(Ln){return E.createPoint(Ln)}));return E.createMultiPoint(or);case"MULTILINESTRING":var Nr=this.parseMultiLineStringText_().map((function(Ln){return E.createLineString(Ln.map(m))}));return E.createMultiLineString(Nr);case"MULTIPOLYGON":var on=this.parseMultiPolygonText_();if(!on||on.length===0)return E.createMultiPolygon();var wn=on.map(y);return E.createMultiPolygon(wn);default:throw new Error("Invalid geometry type: "+z)}}throw new Error(this.formatErrorMessage_())}}])})();function Xe(E){if(E.isEmpty())return"";var m=E.getCoordinate(),y=[m.x,m.y];return m.z===void 0||Number.isNaN(m.z)||y.push(m.z),m.m===void 0||Number.isNaN(m.m)||y.push(m.m),y.join(" ")}function Ct(E){for(var m=E.getCoordinates().map((function(re){var ye=[re.x,re.y];return re.z===void 0||Number.isNaN(re.z)||ye.push(re.z),re.m===void 0||Number.isNaN(re.m)||ye.push(re.m),ye})),y=[],T=0,z=m.length;T<z;++T)y.push(m[T].join(" "));return y.join(", ")}function Rt(E){var m=[];m.push("("+Ct(E.getExteriorRing())+")");for(var y=0,T=E.getNumInteriorRing();y<T;++y)m.push("("+Ct(E.getInteriorRingN(y))+")");return m.join(", ")}var kt={Point:Xe,LineString:Ct,LinearRing:Ct,Polygon:Rt,MultiPoint:function(E){for(var m=[],y=0,T=E.getNumGeometries();y<T;++y)m.push("("+Xe(E.getGeometryN(y))+")");return m.join(", ")},MultiLineString:function(E){for(var m=[],y=0,T=E.getNumGeometries();y<T;++y)m.push("("+Ct(E.getGeometryN(y))+")");return m.join(", ")},MultiPolygon:function(E){for(var m=[],y=0,T=E.getNumGeometries();y<T;++y)m.push("("+Rt(E.getGeometryN(y))+")");return m.join(", ")},GeometryCollection:function(E){for(var m=[],y=0,T=E.getNumGeometries();y<T;++y)m.push(Xt(E.getGeometryN(y)));return m.join(", ")}};function Xt(E){var m=E.getGeometryType(),y=kt[m];m=m.toUpperCase();var T=(function(z){var re="";if(z.isEmpty())return re;var ye=z.getCoordinate();return ye.z===void 0||Number.isNaN(ye.z)||(re+="Z"),ye.m===void 0||Number.isNaN(ye.m)||(re+="M"),re})(E);return T.length>0&&(m+=" "+T),E.isEmpty()?m+" "+Ws:m+" ("+y(E)+")"}var Or=(function(){return a((function E(m){i(this,E),this.geometryFactory=m||new go,this.precisionModel=this.geometryFactory.getPrecisionModel()}),[{key:"read",value:function(E){var m=new J(E);return new pe(m,this.geometryFactory).parse()}},{key:"write",value:function(E){return Xt(E)}}])})(),qr=(function(){return a((function E(m){i(this,E),this.parser=new Or(m)}),[{key:"write",value:function(E){return this.parser.write(E)}}],[{key:"toLineString",value:function(E,m){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+E.x+" "+E.y+", "+m.x+" "+m.y+" )"}}])})(),Br=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getIndexAlongSegment",value:function(m,y){return this.computeIntLineIndex(),this._intLineIndex[m][y]}},{key:"getTopologySummary",value:function(){var m=new Mi;return this.isEndPoint()&&m.append(" endpoint"),this._isProper&&m.append(" proper"),this.isCollinear()&&m.append(" collinear"),m.toString()}},{key:"computeIntersection",value:function(m,y,T,z){this._inputLines[0][0]=m,this._inputLines[0][1]=y,this._inputLines[1][0]=T,this._inputLines[1][1]=z,this._result=this.computeIntersect(m,y,T,z)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var m=arguments[0];this.getEdgeDistance(m,0)>this.getEdgeDistance(m,1)?(this._intLineIndex[m][0]=0,this._intLineIndex[m][1]=1):(this._intLineIndex[m][0]=1,this._intLineIndex[m][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(m){this._precisionModel=m}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var m=arguments[0],y=0;y<this._result;y++)if(!this._intPt[y].equals2D(this._inputLines[m][0])&&!this._intPt[y].equals2D(this._inputLines[m][1]))return!0;return!1}}},{key:"getIntersection",value:function(m){return this._intPt[m]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==E.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(m,y){return E.computeEdgeDistance(this._intPt[y],this._inputLines[m][0],this._inputLines[m][1])}},{key:"isCollinear",value:function(){return this._result===E.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return qr.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+qr.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(m,y){return this._inputLines[m][y]}},{key:"isIntersection",value:function(m){for(var y=0;y<this._result;y++)if(this._intPt[y].equals2D(m))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(m,y){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[m][y]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Oe,this._intPt[1]=new Oe,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(m,y,T){var z=Math.abs(T.x-y.x),re=Math.abs(T.y-y.y),ye=-1;if(m.equals(y))ye=0;else if(m.equals(T))ye=z>re?z:re;else{var Le=Math.abs(m.x-y.x),Ke=Math.abs(m.y-y.y);(ye=z>re?Le:Ke)!==0||m.equals(y)||(ye=Math.max(Le,Ke))}return we.isTrue(!(ye===0&&!m.equals(y)),"Bad distance calculation"),ye}},{key:"nonRobustComputeEdgeDistance",value:function(m,y,T){var z=m.x-y.x,re=m.y-y.y,ye=Math.sqrt(z*z+re*re);return we.isTrue(!(ye===0&&!m.equals(y)),"Invalid distance calculation"),ye}}])})();Br.DONT_INTERSECT=0,Br.DO_INTERSECT=1,Br.COLLINEAR=2,Br.NO_INTERSECTION=0,Br.POINT_INTERSECTION=1,Br.COLLINEAR_INTERSECTION=2;var Sr=(function(E){function m(){return i(this,m),n(this,m)}return v(m,E),a(m,[{key:"isInSegmentEnvelopes",value:function(y){var T=new Ye(this._inputLines[0][0],this._inputLines[0][1]),z=new Ye(this._inputLines[1][0],this._inputLines[1][1]);return T.contains(y)&&z.contains(y)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return P(m,"computeIntersection",this,1).apply(this,arguments);var y=arguments[0],T=arguments[1],z=arguments[2];if(this._isProper=!1,Ye.intersects(T,z,y)&&_e.index(T,z,y)===0&&_e.index(z,T,y)===0)return this._isProper=!0,(y.equals(T)||y.equals(z))&&(this._isProper=!1),this._result=Br.POINT_INTERSECTION,null;this._result=Br.NO_INTERSECTION}},{key:"intersection",value:function(y,T,z,re){var ye=this.intersectionSafe(y,T,z,re);return this.isInSegmentEnvelopes(ye)||(ye=new Oe(m.nearestEndpoint(y,T,z,re))),this._precisionModel!==null&&this._precisionModel.makePrecise(ye),ye}},{key:"checkDD",value:function(y,T,z,re,ye){var Le=nt.intersection(y,T,z,re),Ke=this.isInSegmentEnvelopes(Le);Kt.out.println("DD in env = "+Ke+"  --------------------- "+Le),ye.distance(Le)>1e-4&&Kt.out.println("Distance = "+ye.distance(Le))}},{key:"intersectionSafe",value:function(y,T,z,re){var ye=Bt.intersection(y,T,z,re);return ye===null&&(ye=m.nearestEndpoint(y,T,z,re)),ye}},{key:"computeCollinearIntersection",value:function(y,T,z,re){var ye=Ye.intersects(y,T,z),Le=Ye.intersects(y,T,re),Ke=Ye.intersects(z,re,y),yt=Ye.intersects(z,re,T);return ye&&Le?(this._intPt[0]=z,this._intPt[1]=re,Br.COLLINEAR_INTERSECTION):Ke&&yt?(this._intPt[0]=y,this._intPt[1]=T,Br.COLLINEAR_INTERSECTION):ye&&Ke?(this._intPt[0]=z,this._intPt[1]=y,!z.equals(y)||Le||yt?Br.COLLINEAR_INTERSECTION:Br.POINT_INTERSECTION):ye&&yt?(this._intPt[0]=z,this._intPt[1]=T,!z.equals(T)||Le||Ke?Br.COLLINEAR_INTERSECTION:Br.POINT_INTERSECTION):Le&&Ke?(this._intPt[0]=re,this._intPt[1]=y,!re.equals(y)||ye||yt?Br.COLLINEAR_INTERSECTION:Br.POINT_INTERSECTION):Le&&yt?(this._intPt[0]=re,this._intPt[1]=T,!re.equals(T)||ye||Ke?Br.COLLINEAR_INTERSECTION:Br.POINT_INTERSECTION):Br.NO_INTERSECTION}},{key:"computeIntersect",value:function(y,T,z,re){if(this._isProper=!1,!Ye.intersects(y,T,z,re))return Br.NO_INTERSECTION;var ye=_e.index(y,T,z),Le=_e.index(y,T,re);if(ye>0&&Le>0||ye<0&&Le<0)return Br.NO_INTERSECTION;var Ke=_e.index(z,re,y),yt=_e.index(z,re,T);return Ke>0&&yt>0||Ke<0&&yt<0?Br.NO_INTERSECTION:ye===0&&Le===0&&Ke===0&&yt===0?this.computeCollinearIntersection(y,T,z,re):(ye===0||Le===0||Ke===0||yt===0?(this._isProper=!1,y.equals2D(z)||y.equals2D(re)?this._intPt[0]=y:T.equals2D(z)||T.equals2D(re)?this._intPt[0]=T:ye===0?this._intPt[0]=new Oe(z):Le===0?this._intPt[0]=new Oe(re):Ke===0?this._intPt[0]=new Oe(y):yt===0&&(this._intPt[0]=new Oe(T))):(this._isProper=!0,this._intPt[0]=this.intersection(y,T,z,re)),Br.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(y,T,z,re){var ye=y,Le=Er.pointToSegment(y,z,re),Ke=Er.pointToSegment(T,z,re);return Ke<Le&&(Le=Ke,ye=T),(Ke=Er.pointToSegment(z,y,T))<Le&&(Le=Ke,ye=z),(Ke=Er.pointToSegment(re,y,T))<Le&&(Le=Ke,ye=re),ye}}])})(Br),Gr=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"countSegment",value:function(m,y){if(m.x<this._p.x&&y.x<this._p.x)return null;if(this._p.x===y.x&&this._p.y===y.y)return this._isPointOnSegment=!0,null;if(m.y===this._p.y&&y.y===this._p.y){var T=m.x,z=y.x;return T>z&&(T=y.x,z=m.x),this._p.x>=T&&this._p.x<=z&&(this._isPointOnSegment=!0),null}if(m.y>this._p.y&&y.y<=this._p.y||y.y>this._p.y&&m.y<=this._p.y){var re=_e.index(m,y,this._p);if(re===_e.COLLINEAR)return this._isPointOnSegment=!0,null;y.y<m.y&&(re=-re),re===_e.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Ie.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?Ie.BOUNDARY:this._crossingCount%2==1?Ie.INTERIOR:Ie.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var m=arguments[0];this._p=m}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Oe&&pr(arguments[1],be)){for(var m=arguments[1],y=new E(arguments[0]),T=new Oe,z=new Oe,re=1;re<m.size();re++)if(m.getCoordinate(re,T),m.getCoordinate(re-1,z),y.countSegment(T,z),y.isOnSegment())return y.getLocation();return y.getLocation()}if(arguments[0]instanceof Oe&&arguments[1]instanceof Array){for(var ye=arguments[1],Le=new E(arguments[0]),Ke=1;Ke<ye.length;Ke++){var yt=ye[Ke],Yt=ye[Ke-1];if(Le.countSegment(yt,Yt),Le.isOnSegment())return Le.getLocation()}return Le.getLocation()}}}])})(),Un=(function(){function E(){i(this,E)}return a(E,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Oe&&pr(arguments[1],be)){for(var m=arguments[0],y=arguments[1],T=new Sr,z=new Oe,re=new Oe,ye=y.size(),Le=1;Le<ye;Le++)if(y.getCoordinate(Le-1,z),y.getCoordinate(Le,re),T.computeIntersection(m,z,re),T.hasIntersection())return!0;return!1}if(arguments[0]instanceof Oe&&arguments[1]instanceof Array){for(var Ke=arguments[0],yt=arguments[1],Yt=new Sr,or=1;or<yt.length;or++){var Nr=yt[or-1],on=yt[or];if(Yt.computeIntersection(Ke,Nr,on),Yt.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(m,y){return Gr.locatePointInRing(m,y)}},{key:"isInRing",value:function(m,y){return E.locateInRing(m,y)!==Ie.EXTERIOR}}])})(),pi=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"setAllLocations",value:function(m){for(var y=0;y<this.location.length;y++)this.location[y]=m}},{key:"isNull",value:function(){for(var m=0;m<this.location.length;m++)if(this.location[m]!==Ie.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(m){for(var y=0;y<this.location.length;y++)this.location[y]===Ie.NONE&&(this.location[y]=m)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(m){if(m.location.length>this.location.length){var y=new Array(3).fill(null);y[st.ON]=this.location[st.ON],y[st.LEFT]=Ie.NONE,y[st.RIGHT]=Ie.NONE,this.location=y}for(var T=0;T<this.location.length;T++)this.location[T]===Ie.NONE&&T<m.location.length&&(this.location[T]=m.location[T])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var m=this.location[st.LEFT];this.location[st.LEFT]=this.location[st.RIGHT],this.location[st.RIGHT]=m}},{key:"toString",value:function(){var m=new Jt;return this.location.length>1&&m.append(Ie.toLocationSymbol(this.location[st.LEFT])),m.append(Ie.toLocationSymbol(this.location[st.ON])),this.location.length>1&&m.append(Ie.toLocationSymbol(this.location[st.RIGHT])),m.toString()}},{key:"setLocations",value:function(m,y,T){this.location[st.ON]=m,this.location[st.LEFT]=y,this.location[st.RIGHT]=T}},{key:"get",value:function(m){return m<this.location.length?this.location[m]:Ie.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var m=0;m<this.location.length;m++)if(this.location[m]===Ie.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var m=arguments[0];this.setLocation(st.ON,m)}else if(arguments.length===2){var y=arguments[0],T=arguments[1];this.location[y]=T}}},{key:"init",value:function(m){this.location=new Array(m).fill(null),this.setAllLocations(Ie.NONE)}},{key:"isEqualOnSide",value:function(m,y){return this.location[y]===m.location[y]}},{key:"allPositionsEqual",value:function(m){for(var y=0;y<this.location.length;y++)if(this.location[y]!==m)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];this.init(m.length)}else if(Number.isInteger(arguments[0])){var y=arguments[0];this.init(1),this.location[st.ON]=y}else if(arguments[0]instanceof E){var T=arguments[0];if(this.init(T.location.length),T!==null)for(var z=0;z<this.location.length;z++)this.location[z]=T.location[z]}}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Le=arguments[2];this.init(3),this.location[st.ON]=re,this.location[st.LEFT]=ye,this.location[st.RIGHT]=Le}}}])})(),mn=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getGeometryCount",value:function(){var m=0;return this.elt[0].isNull()||m++,this.elt[1].isNull()||m++,m}},{key:"setAllLocations",value:function(m,y){this.elt[m].setAllLocations(y)}},{key:"isNull",value:function(m){return this.elt[m].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var m=arguments[0];this.setAllLocationsIfNull(0,m),this.setAllLocationsIfNull(1,m)}else if(arguments.length===2){var y=arguments[0],T=arguments[1];this.elt[y].setAllLocationsIfNull(T)}}},{key:"isLine",value:function(m){return this.elt[m].isLine()}},{key:"merge",value:function(m){for(var y=0;y<2;y++)this.elt[y]===null&&m.elt[y]!==null?this.elt[y]=new pi(m.elt[y]):this.elt[y].merge(m.elt[y])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var m=arguments[0];return this.elt[m].get(st.ON)}if(arguments.length===2){var y=arguments[0],T=arguments[1];return this.elt[y].get(T)}}},{key:"toString",value:function(){var m=new Jt;return this.elt[0]!==null&&(m.append("A:"),m.append(this.elt[0].toString())),this.elt[1]!==null&&(m.append(" B:"),m.append(this.elt[1].toString())),m.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var m=arguments[0];return this.elt[m].isArea()}}},{key:"isAnyNull",value:function(m){return this.elt[m].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];this.elt[m].setLocation(st.ON,y)}else if(arguments.length===3){var T=arguments[0],z=arguments[1],re=arguments[2];this.elt[T].setLocation(z,re)}}},{key:"isEqualOnSide",value:function(m,y){return this.elt[0].isEqualOnSide(m.elt[0],y)&&this.elt[1].isEqualOnSide(m.elt[1],y)}},{key:"allPositionsEqual",value:function(m,y){return this.elt[m].allPositionsEqual(y)}},{key:"toLine",value:function(m){this.elt[m].isArea()&&(this.elt[m]=new pi(this.elt[m].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var m=arguments[0];this.elt[0]=new pi(m),this.elt[1]=new pi(m)}else if(arguments[0]instanceof E){var y=arguments[0];this.elt[0]=new pi(y.elt[0]),this.elt[1]=new pi(y.elt[1])}}else if(arguments.length===2){var T=arguments[0],z=arguments[1];this.elt[0]=new pi(Ie.NONE),this.elt[1]=new pi(Ie.NONE),this.elt[T].setLocation(z)}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Le=arguments[2];this.elt[0]=new pi(re,ye,Le),this.elt[1]=new pi(re,ye,Le)}else if(arguments.length===4){var Ke=arguments[0],yt=arguments[1],Yt=arguments[2],or=arguments[3];this.elt[0]=new pi(Ie.NONE,Ie.NONE,Ie.NONE),this.elt[1]=new pi(Ie.NONE,Ie.NONE,Ie.NONE),this.elt[Ke].setLocations(yt,Yt,or)}}},{key:"toLineLabel",value:function(m){for(var y=new E(Ie.NONE),T=0;T<2;T++)y.setLocation(T,m.getLocation(T));return y}}])})(),an=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var E=new Array(this._pts.size()).fill(null),m=0;m<this._pts.size();m++)E[m]=this._pts.get(m);this._ring=this._geometryFactory.createLinearRing(E),this._isHole=_e.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(E){this._startDe=E;var m=E,y=!0;do{if(m===null)throw new Qe("Found null DirectedEdge");if(m.getEdgeRing()===this)throw new Qe("Directed Edge visited twice during ring-building at "+m.getCoordinate());this._edges.add(m);var T=m.getLabel();we.isTrue(T.isArea()),this.mergeLabel(T),this.addPoints(m.getEdge(),m.isForward(),y),y=!1,this.setEdgeRing(m,this),m=this.getNext(m)}while(m!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(E){return this._pts.get(E)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var E=this._startDe;do{var m=E.getNode().getEdges().getOutgoingDegree(this);m>this._maxNodeDegree&&(this._maxNodeDegree=m),E=this.getNext(E)}while(E!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(E,m,y){var T=E.getCoordinates();if(m){var z=1;y&&(z=0);for(var re=z;re<T.length;re++)this._pts.add(T[re])}else{var ye=T.length-2;y&&(ye=T.length-1);for(var Le=ye;Le>=0;Le--)this._pts.add(T[Le])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var E=this._startDe;do E.getEdge().setInResult(!0),E=E.getNext();while(E!==this._startDe)}},{key:"containsPoint",value:function(E){var m=this.getLinearRing();if(!m.getEnvelopeInternal().contains(E)||!Un.isInRing(E,m.getCoordinates()))return!1;for(var y=this._holes.iterator();y.hasNext();)if(y.next().containsPoint(E))return!1;return!0}},{key:"addHole",value:function(E){this._holes.add(E)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var E=arguments[0];this.mergeLabel(E,0),this.mergeLabel(E,1)}else if(arguments.length===2){var m=arguments[1],y=arguments[0].getLocation(m,st.RIGHT);if(y===Ie.NONE)return null;if(this._label.getLocation(m)===Ie.NONE)return this._label.setLocation(m,y),null}}},{key:"setShell",value:function(E){this._shell=E,E!==null&&E.addHole(this)}},{key:"toPolygon",value:function(E){for(var m=new Array(this._holes.size()).fill(null),y=0;y<this._holes.size();y++)m[y]=this._holes.get(y).getLinearRing();return E.createPolygon(this.getLinearRing(),m)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new et,this._pts=new et,this._label=new mn(Ie.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new et,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var E=arguments[0],m=arguments[1];this._geometryFactory=m,this.computePoints(E),this.computeRing()}}}}])})(),Cr=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"setEdgeRing",value:function(y,T){y.setMinEdgeRing(T)}},{key:"getNext",value:function(y){return y.getNextMin()}}],[{key:"constructor_",value:function(){var y=arguments[0],T=arguments[1];an.constructor_.call(this,y,T)}}])})(an),tn=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"buildMinimalRings",value:function(){var y=new et,T=this._startDe;do{if(T.getMinEdgeRing()===null){var z=new Cr(T,this._geometryFactory);y.add(z)}T=T.getNext()}while(T!==this._startDe);return y}},{key:"setEdgeRing",value:function(y,T){y.setEdgeRing(T)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var y=this._startDe;do y.getNode().getEdges().linkMinimalDirectedEdges(this),y=y.getNext();while(y!==this._startDe)}},{key:"getNext",value:function(y){return y.getNext()}}],[{key:"constructor_",value:function(){var y=arguments[0],T=arguments[1];an.constructor_.call(this,y,T)}}])})(an),On=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"setVisited",value:function(E){this._isVisited=E}},{key:"setInResult",value:function(E){this._isInResult=E}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(E){this._label=E}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(E){this._isCovered=E,this._isCoveredSet=!0}},{key:"updateIM",value:function(E){we.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(E)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this._label=E}}}}])})(),ba=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"isIncidentEdgeInResult",value:function(){for(var y=this.getEdges().getEdges().iterator();y.hasNext();)if(y.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(y){y.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(y){}},{key:"computeMergedLocation",value:function(y,T){var z=Ie.NONE;if(z=this._label.getLocation(T),!y.isNull(T)){var re=y.getLocation(T);z!==Ie.BOUNDARY&&(z=re)}return z}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return P(m,"setLabel",this,1).apply(this,arguments);var y=arguments[0],T=arguments[1];this._label===null?this._label=new mn(y,T):this._label.setLocation(y,T)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof m){var y=arguments[0];this.mergeLabel(y._label)}else if(arguments[0]instanceof mn)for(var T=arguments[0],z=0;z<2;z++){var re=this.computeMergedLocation(T,z);this._label.getLocation(z)===Ie.NONE&&this._label.setLocation(z,re)}}},{key:"add",value:function(y){this._edges.insert(y),y.setNode(this)}},{key:"setLabelBoundary",value:function(y){if(this._label===null)return null;var T=Ie.NONE;this._label!==null&&(T=this._label.getLocation(y));var z=null;switch(T){case Ie.BOUNDARY:z=Ie.INTERIOR;break;case Ie.INTERIOR:default:z=Ie.BOUNDARY}this._label.setLocation(y,z)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var y=arguments[0],T=arguments[1];this._coord=y,this._edges=T,this._label=new mn(0,Ie.NONE)}}])})(On),gi=(function(E){function m(){return i(this,m),n(this,m,arguments)}return v(m,E),a(m)})(Gl);function _a(E){return E==null?0:E.color}function si(E){return E==null?null:E.parent}function An(E,m){E!==null&&(E.color=m)}function $o(E){return E==null?null:E.left}function Mn(E){return E==null?null:E.right}var En=(function(E){function m(){var y;return i(this,m),(y=n(this,m)).root_=null,y.size_=0,y}return v(m,E),a(m,[{key:"get",value:function(y){for(var T=this.root_;T!==null;){var z=y.compareTo(T.key);if(z<0)T=T.left;else{if(!(z>0))return T.value;T=T.right}}return null}},{key:"put",value:function(y,T){if(this.root_===null)return this.root_={key:y,value:T,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var z,re,ye=this.root_;do if(z=ye,(re=y.compareTo(ye.key))<0)ye=ye.left;else{if(!(re>0)){var Le=ye.value;return ye.value=T,Le}ye=ye.right}while(ye!==null);var Ke={key:y,left:null,right:null,value:T,parent:z,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return re<0?z.left=Ke:z.right=Ke,this.fixAfterInsertion(Ke),this.size_++,null}},{key:"fixAfterInsertion",value:function(y){var T;for(y.color=1;y!=null&&y!==this.root_&&y.parent.color===1;)si(y)===$o(si(si(y)))?_a(T=Mn(si(si(y))))===1?(An(si(y),0),An(T,0),An(si(si(y)),1),y=si(si(y))):(y===Mn(si(y))&&(y=si(y),this.rotateLeft(y)),An(si(y),0),An(si(si(y)),1),this.rotateRight(si(si(y)))):_a(T=$o(si(si(y))))===1?(An(si(y),0),An(T,0),An(si(si(y)),1),y=si(si(y))):(y===$o(si(y))&&(y=si(y),this.rotateRight(y)),An(si(y),0),An(si(si(y)),1),this.rotateLeft(si(si(y))));this.root_.color=0}},{key:"values",value:function(){var y=new et,T=this.getFirstEntry();if(T!==null)for(y.add(T.value);(T=m.successor(T))!==null;)y.add(T.value);return y}},{key:"entrySet",value:function(){var y=new Wt,T=this.getFirstEntry();if(T!==null)for(y.add(T);(T=m.successor(T))!==null;)y.add(T);return y}},{key:"rotateLeft",value:function(y){if(y!=null){var T=y.right;y.right=T.left,T.left!=null&&(T.left.parent=y),T.parent=y.parent,y.parent==null?this.root_=T:y.parent.left===y?y.parent.left=T:y.parent.right=T,T.left=y,y.parent=T}}},{key:"rotateRight",value:function(y){if(y!=null){var T=y.left;y.left=T.right,T.right!=null&&(T.right.parent=y),T.parent=y.parent,y.parent==null?this.root_=T:y.parent.right===y?y.parent.right=T:y.parent.left=T,T.right=y,y.parent=T}}},{key:"getFirstEntry",value:function(){var y=this.root_;if(y!=null)for(;y.left!=null;)y=y.left;return y}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(y){for(var T=this.root_;T!==null;){var z=y.compareTo(T.key);if(z<0)T=T.left;else{if(!(z>0))return!0;T=T.right}}return!1}}],[{key:"successor",value:function(y){var T;if(y===null)return null;if(y.right!==null){for(T=y.right;T.left!==null;)T=T.left;return T}T=y.parent;for(var z=y;T!==null&&z===T.right;)z=T,T=T.parent;return T}}])})(gi),Po=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"find",value:function(E){return this.nodeMap.get(E)}},{key:"addNode",value:function(){if(arguments[0]instanceof Oe){var E=arguments[0],m=this.nodeMap.get(E);return m===null&&(m=this.nodeFact.createNode(E),this.nodeMap.put(E,m)),m}if(arguments[0]instanceof ba){var y=arguments[0],T=this.nodeMap.get(y.getCoordinate());return T===null?(this.nodeMap.put(y.getCoordinate(),y),y):(T.mergeLabel(y),T)}}},{key:"print",value:function(E){for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(E){for(var m=new et,y=this.iterator();y.hasNext();){var T=y.next();T.getLabel().getLocation(E)===Ie.BOUNDARY&&m.add(T)}return m}},{key:"add",value:function(E){var m=E.getCoordinate();this.addNode(m).add(E)}}],[{key:"constructor_",value:function(){this.nodeMap=new En,this.nodeFact=null;var E=arguments[0];this.nodeFact=E}}])})(),jn=(function(){function E(){i(this,E)}return a(E,null,[{key:"isNorthern",value:function(m){return m===E.NE||m===E.NW}},{key:"isOpposite",value:function(m,y){return m!==y&&(m-y+4)%4===2}},{key:"commonHalfPlane",value:function(m,y){if(m===y)return m;if((m-y+4)%4===2)return-1;var T=m<y?m:y;return T===0&&(m>y?m:y)===3?3:T}},{key:"isInHalfPlane",value:function(m,y){return y===E.SE?m===E.SE||m===E.SW:m===y||m===y+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1];if(m===0&&y===0)throw new $("Cannot compute the quadrant for point ( "+m+", "+y+" )");return m>=0?y>=0?E.NE:E.SE:y>=0?E.NW:E.SW}if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var T=arguments[0],z=arguments[1];if(z.x===T.x&&z.y===T.y)throw new $("Cannot compute the quadrant for two identical points "+T);return z.x>=T.x?z.y>=T.y?E.NE:E.SE:z.y>=T.y?E.NW:E.SW}}}])})();jn.NE=0,jn.NW=1,jn.SW=2,jn.SE=3;var yo=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"compareDirection",value:function(m){return this._dx===m._dx&&this._dy===m._dy?0:this._quadrant>m._quadrant?1:this._quadrant<m._quadrant?-1:_e.index(m._p0,m._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(m){this._node=m}},{key:"print",value:function(m){var y=Math.atan2(this._dy,this._dx),T=this.getClass().getName(),z=T.lastIndexOf("."),re=T.substring(z+1);m.print("  "+re+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+y+"   "+this._label)}},{key:"compareTo",value:function(m){var y=m;return this.compareDirection(y)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var m=Math.atan2(this._dy,this._dx),y=this.getClass().getName(),T=y.lastIndexOf(".");return"  "+y.substring(T+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+m+"   "+this._label}},{key:"computeLabel",value:function(m){}},{key:"init",value:function(m,y){this._p0=m,this._p1=y,this._dx=y.x-m.x,this._dy=y.y-m.y,this._quadrant=jn.quadrant(this._dx,this._dy),we.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var m=arguments[0];this._edge=m}else if(arguments.length===3){var y=arguments[0],T=arguments[1],z=arguments[2];E.constructor_.call(this,y,T,z,null)}else if(arguments.length===4){var re=arguments[0],ye=arguments[1],Le=arguments[2],Ke=arguments[3];E.constructor_.call(this,re),this.init(ye,Le),this._label=Ke}}}])})(),oo=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(y){return this._depth[y]}},{key:"setVisited",value:function(y){this._isVisited=y}},{key:"computeDirectedLabel",value:function(){this._label=new mn(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(y,T){if(this._depth[y]!==-999&&this._depth[y]!==T)throw new Qe("assigned depths do not match",this.getCoordinate());this._depth[y]=T}},{key:"isInteriorAreaEdge",value:function(){for(var y=!0,T=0;T<2;T++)this._label.isArea(T)&&this._label.getLocation(T,st.LEFT)===Ie.INTERIOR&&this._label.getLocation(T,st.RIGHT)===Ie.INTERIOR||(y=!1);return y}},{key:"setNextMin",value:function(y){this._nextMin=y}},{key:"print",value:function(y){P(m,"print",this,1).call(this,y),y.print(" "+this._depth[st.LEFT]+"/"+this._depth[st.RIGHT]),y.print(" ("+this.getDepthDelta()+")"),this._isInResult&&y.print(" inResult")}},{key:"setMinEdgeRing",value:function(y){this._minEdgeRing=y}},{key:"isLineEdge",value:function(){var y=this._label.isLine(0)||this._label.isLine(1),T=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ie.EXTERIOR),z=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ie.EXTERIOR);return y&&T&&z}},{key:"setEdgeRing",value:function(y){this._edgeRing=y}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var y=this._edge.getDepthDelta();return this._isForward||(y=-y),y}},{key:"setInResult",value:function(y){this._isInResult=y}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(y){this.print(y),y.print(" "),this._isForward?this._edge.print(y):this._edge.printReverse(y)}},{key:"setSym",value:function(y){this._sym=y}},{key:"setVisitedEdge",value:function(y){this.setVisited(y),this._sym.setVisited(y)}},{key:"setEdgeDepths",value:function(y,T){var z=this.getEdge().getDepthDelta();this._isForward||(z=-z);var re=1;y===st.LEFT&&(re=-1);var ye=st.opposite(y),Le=T+z*re;this.setDepth(y,T),this.setDepth(ye,Le)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(y){this._next=y}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var y=arguments[0],T=arguments[1];if(yo.constructor_.call(this,y),this._isForward=T,T)this.init(y.getCoordinate(0),y.getCoordinate(1));else{var z=y.getNumPoints()-1;this.init(y.getCoordinate(z),y.getCoordinate(z-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(y,T){return y===Ie.EXTERIOR&&T===Ie.INTERIOR?1:y===Ie.INTERIOR&&T===Ie.EXTERIOR?-1:0}}])})(yo),Io=(function(){return a((function E(){i(this,E)}),[{key:"createNode",value:function(E){return new ba(E,null)}}])})(),Rs=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"printEdges",value:function(E){E.println("Edges:");for(var m=0;m<this._edges.size();m++){E.println("edge "+m+":");var y=this._edges.get(m);y.print(E),y.eiList.print(E)}}},{key:"find",value:function(E){return this._nodes.find(E)}},{key:"addNode",value:function(){if(arguments[0]instanceof ba){var E=arguments[0];return this._nodes.addNode(E)}if(arguments[0]instanceof Oe){var m=arguments[0];return this._nodes.addNode(m)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var E=this._nodes.iterator();E.hasNext();)E.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(E){Kt.out.println(E)}},{key:"isBoundaryNode",value:function(E,m){var y=this._nodes.find(m);if(y===null)return!1;var T=y.getLabel();return T!==null&&T.getLocation(E)===Ie.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var E=this._nodes.iterator();E.hasNext();)E.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(E,m,y,T){return!!E.equals(y)&&_e.index(E,m,T)===_e.COLLINEAR&&jn.quadrant(E,m)===jn.quadrant(y,T)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(E){Kt.out.print(E)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(E,m){for(var y=0;y<this._edges.size();y++){var T=this._edges.get(y),z=T.getCoordinates();if(this.matchInSameDirection(E,m,z[0],z[1])||this.matchInSameDirection(E,m,z[z.length-1],z[z.length-2]))return T}return null}},{key:"insertEdge",value:function(E){this._edges.add(E)}},{key:"findEdgeEnd",value:function(E){for(var m=this.getEdgeEnds().iterator();m.hasNext();){var y=m.next();if(y.getEdge()===E)return y}return null}},{key:"addEdges",value:function(E){for(var m=E.iterator();m.hasNext();){var y=m.next();this._edges.add(y);var T=new oo(y,!0),z=new oo(y,!1);T.setSym(z),z.setSym(T),this.add(T),this.add(z)}}},{key:"add",value:function(E){this._nodes.add(E),this._edgeEndList.add(E)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(E,m){for(var y=0;y<this._edges.size();y++){var T=this._edges.get(y),z=T.getCoordinates();if(E.equals(z[0])&&m.equals(z[1]))return T}return null}}],[{key:"constructor_",value:function(){if(this._edges=new et,this._nodes=null,this._edgeEndList=new et,arguments.length===0)this._nodes=new Po(new Io);else if(arguments.length===1){var E=arguments[0];this._nodes=new Po(E)}}},{key:"linkResultDirectedEdges",value:function(E){for(var m=E.iterator();m.hasNext();)m.next().getEdges().linkResultDirectedEdges()}}])})(),Pl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"sortShellsAndHoles",value:function(m,y,T){for(var z=m.iterator();z.hasNext();){var re=z.next();re.isHole()?T.add(re):y.add(re)}}},{key:"computePolygons",value:function(m){for(var y=new et,T=m.iterator();T.hasNext();){var z=T.next().toPolygon(this._geometryFactory);y.add(z)}return y}},{key:"placeFreeHoles",value:function(m,y){for(var T=y.iterator();T.hasNext();){var z=T.next();if(z.getShell()===null){var re=E.findEdgeRingContaining(z,m);if(re===null)throw new Qe("unable to assign hole to a shell",z.getCoordinate(0));z.setShell(re)}}}},{key:"buildMinimalEdgeRings",value:function(m,y,T){for(var z=new et,re=m.iterator();re.hasNext();){var ye=re.next();if(ye.getMaxNodeDegree()>2){ye.linkDirectedEdgesForMinimalEdgeRings();var Le=ye.buildMinimalRings(),Ke=this.findShell(Le);Ke!==null?(this.placePolygonHoles(Ke,Le),y.add(Ke)):T.addAll(Le)}else z.add(ye)}return z}},{key:"buildMaximalEdgeRings",value:function(m){for(var y=new et,T=m.iterator();T.hasNext();){var z=T.next();if(z.isInResult()&&z.getLabel().isArea()&&z.getEdgeRing()===null){var re=new tn(z,this._geometryFactory);y.add(re),re.setInResult()}}return y}},{key:"placePolygonHoles",value:function(m,y){for(var T=y.iterator();T.hasNext();){var z=T.next();z.isHole()&&z.setShell(m)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(m){for(var y=0,T=null,z=m.iterator();z.hasNext();){var re=z.next();re.isHole()||(T=re,y++)}return we.isTrue(y<=1,"found two shells in MinimalEdgeRing list"),T}},{key:"add",value:function(){if(arguments.length===1){var m=arguments[0];this.add(m.getEdgeEnds(),m.getNodes())}else if(arguments.length===2){var y=arguments[0],T=arguments[1];Rs.linkResultDirectedEdges(T);var z=this.buildMaximalEdgeRings(y),re=new et,ye=this.buildMinimalEdgeRings(z,this._shellList,re);this.sortShellsAndHoles(ye,this._shellList,re),this.placeFreeHoles(this._shellList,re)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new et;var m=arguments[0];this._geometryFactory=m}},{key:"findEdgeRingContaining",value:function(m,y){for(var T=m.getLinearRing(),z=T.getEnvelopeInternal(),re=T.getCoordinateN(0),ye=null,Le=null,Ke=y.iterator();Ke.hasNext();){var yt=Ke.next(),Yt=yt.getLinearRing(),or=Yt.getEnvelopeInternal();if(!or.equals(z)&&or.contains(z)){re=Ni.ptNotInList(T.getCoordinates(),Yt.getCoordinates());var Nr=!1;Un.isInRing(re,Yt.getCoordinates())&&(Nr=!0),Nr&&(ye===null||Le.contains(or))&&(Le=(ye=yt).getLinearRing().getEnvelopeInternal())}}return ye}}])})(),Xs=(function(){return a((function E(){i(this,E)}),[{key:"getBounds",value:function(){}}])})(),so=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Xs,Y]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var E=arguments[0],m=arguments[1];this._bounds=E,this._item=m}}])})(),Ds=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"poll",value:function(){if(this.isEmpty())return null;var E=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),E}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(E){for(var m=null,y=this._items.get(E);2*E<=this._size&&((m=2*E)!==this._size&&this._items.get(m+1).compareTo(this._items.get(m))<0&&m++,this._items.get(m).compareTo(y)<0);E=m)this._items.set(E,this._items.get(m));this._items.set(E,y)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(E){this._items.add(null),this._size+=1;var m=this._size;for(this._items.set(0,E);E.compareTo(this._items.get(Math.trunc(m/2)))<0;m/=2)this._items.set(m,this._items.get(Math.trunc(m/2)));this._items.set(m,E)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new et,this._items.add(null)}}])})(),Ys=(function(){return a((function E(){i(this,E)}),[{key:"insert",value:function(E,m){}},{key:"remove",value:function(E,m){}},{key:"query",value:function(){}}])})(),Ha=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(E){we.isTrue(this._bounds===null),this._childBoundables.add(E)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Xs,Y]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new et,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this._level=E}}}}])})(),Wa={reverseOrder:function(){return{compare:function(E,m){return m.compareTo(E)}}},min:function(E){return Wa.sort(E),E.get(0)},sort:function(E,m){var y=E.toArray();m?mt.sort(y,m):mt.sort(y);for(var T=E.iterator(),z=0,re=y.length;z<re;z++)T.next(),T.set(y[z])},singletonList:function(E){var m=new et;return m.add(E),m}},Gi=(function(){function E(){i(this,E)}return a(E,null,[{key:"maxDistance",value:function(m,y,T,z,re,ye,Le,Ke){var yt=E.distance(m,y,re,ye);return yt=Math.max(yt,E.distance(m,y,Le,Ke)),yt=Math.max(yt,E.distance(T,z,re,ye)),yt=Math.max(yt,E.distance(T,z,Le,Ke))}},{key:"distance",value:function(m,y,T,z){var re=T-m,ye=z-y;return Math.sqrt(re*re+ye*ye)}},{key:"maximumDistance",value:function(m,y){var T=Math.min(m.getMinX(),y.getMinX()),z=Math.min(m.getMinY(),y.getMinY()),re=Math.max(m.getMaxX(),y.getMaxX()),ye=Math.max(m.getMaxY(),y.getMaxY());return E.distance(T,z,re,ye)}},{key:"minMaxDistance",value:function(m,y){var T=m.getMinX(),z=m.getMinY(),re=m.getMaxX(),ye=m.getMaxY(),Le=y.getMinX(),Ke=y.getMinY(),yt=y.getMaxX(),Yt=y.getMaxY(),or=E.maxDistance(T,z,T,ye,Le,Ke,Le,Yt);return or=Math.min(or,E.maxDistance(T,z,T,ye,Le,Ke,yt,Ke)),or=Math.min(or,E.maxDistance(T,z,T,ye,yt,Yt,Le,Yt)),or=Math.min(or,E.maxDistance(T,z,T,ye,yt,Yt,yt,Ke)),or=Math.min(or,E.maxDistance(T,z,re,z,Le,Ke,Le,Yt)),or=Math.min(or,E.maxDistance(T,z,re,z,Le,Ke,yt,Ke)),or=Math.min(or,E.maxDistance(T,z,re,z,yt,Yt,Le,Yt)),or=Math.min(or,E.maxDistance(T,z,re,z,yt,Yt,yt,Ke)),or=Math.min(or,E.maxDistance(re,ye,T,ye,Le,Ke,Le,Yt)),or=Math.min(or,E.maxDistance(re,ye,T,ye,Le,Ke,yt,Ke)),or=Math.min(or,E.maxDistance(re,ye,T,ye,yt,Yt,Le,Yt)),or=Math.min(or,E.maxDistance(re,ye,T,ye,yt,Yt,yt,Ke)),or=Math.min(or,E.maxDistance(re,ye,re,z,Le,Ke,Le,Yt)),or=Math.min(or,E.maxDistance(re,ye,re,z,Le,Ke,yt,Ke)),or=Math.min(or,E.maxDistance(re,ye,re,z,yt,Yt,Le,Yt)),or=Math.min(or,E.maxDistance(re,ye,re,z,yt,Yt,yt,Ke))}}])})(),Ca=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"maximumDistance",value:function(){return Gi.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(m,y){var T=E.isComposite(this._boundable1),z=E.isComposite(this._boundable2);if(T&&z)return E.area(this._boundable1)>E.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,m,y),null):(this.expand(this._boundable2,this._boundable1,!0,m,y),null);if(T)return this.expand(this._boundable1,this._boundable2,!1,m,y),null;if(z)return this.expand(this._boundable2,this._boundable1,!0,m,y),null;throw new $("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(E.isComposite(this._boundable1)||E.isComposite(this._boundable2))}},{key:"compareTo",value:function(m){var y=m;return this._distance<y._distance?-1:this._distance>y._distance?1:0}},{key:"expand",value:function(m,y,T,z,re){for(var ye=m.getChildBoundables().iterator();ye.hasNext();){var Le=ye.next(),Ke=null;(Ke=T?new E(y,Le,this._itemDistance):new E(Le,y,this._itemDistance)).getDistance()<re&&z.add(Ke)}}},{key:"getBoundable",value:function(m){return m===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var m=arguments[0],y=arguments[1],T=arguments[2];this._boundable1=m,this._boundable2=y,this._itemDistance=T,this._distance=this.distance()}},{key:"area",value:function(m){return m.getBounds().getArea()}},{key:"isComposite",value:function(m){return m instanceof Ha}}])})(),le=(function(){return a((function E(){i(this,E)}),[{key:"visitItem",value:function(E){}}])})(),Ve=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"queryInternal",value:function(){if(pr(arguments[2],le)&&arguments[0]instanceof Object&&arguments[1]instanceof Ha)for(var m=arguments[0],y=arguments[2],T=arguments[1].getChildBoundables(),z=0;z<T.size();z++){var re=T.get(z);this.getIntersectsOp().intersects(re.getBounds(),m)&&(re instanceof Ha?this.queryInternal(m,re,y):re instanceof so?y.visitItem(re.getItem()):we.shouldNeverReachHere())}else if(pr(arguments[2],ar)&&arguments[0]instanceof Object&&arguments[1]instanceof Ha)for(var ye=arguments[0],Le=arguments[2],Ke=arguments[1].getChildBoundables(),yt=0;yt<Ke.size();yt++){var Yt=Ke.get(yt);this.getIntersectsOp().intersects(Yt.getBounds(),ye)&&(Yt instanceof Ha?this.queryInternal(ye,Yt,Le):Yt instanceof so?Le.add(Yt.getItem()):we.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(m){return m.get(m.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var m=0,y=arguments[0].getChildBoundables().iterator();y.hasNext();){var T=y.next();T instanceof Ha?m+=this.size(T):T instanceof so&&(m+=1)}return m}}},{key:"removeItem",value:function(m,y){for(var T=null,z=m.getChildBoundables().iterator();z.hasNext();){var re=z.next();re instanceof so&&re.getItem()===y&&(T=re)}return T!==null&&(m.getChildBoundables().remove(T),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var m=this.itemsTree(this._root);return m===null?new et:m}if(arguments.length===1){for(var y=arguments[0],T=new et,z=y.getChildBoundables().iterator();z.hasNext();){var re=z.next();if(re instanceof Ha){var ye=this.itemsTree(re);ye!==null&&T.add(ye)}else re instanceof so?T.add(re.getItem()):we.shouldNeverReachHere()}return T.size()<=0?null:T}}},{key:"insert",value:function(m,y){we.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new so(m,y))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var m=arguments[0],y=new et;return this.boundablesAtLevel(m,this._root,y),y}if(arguments.length===3){var T=arguments[0],z=arguments[1],re=arguments[2];if(we.isTrue(T>-2),z.getLevel()===T)return re.add(z),null;for(var ye=z.getChildBoundables().iterator();ye.hasNext();){var Le=ye.next();Le instanceof Ha?this.boundablesAtLevel(T,Le,re):(we.isTrue(Le instanceof so),T===-1&&re.add(Le))}return null}}},{key:"query",value:function(){if(arguments.length===1){var m=arguments[0];this.build();var y=new et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.queryInternal(m,this._root,y),y}if(arguments.length===2){var T=arguments[0],z=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),T)&&this.queryInternal(T,this._root,z)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.remove(m,this._root,y)}if(arguments.length===3){var T=arguments[0],z=arguments[1],re=arguments[2],ye=this.removeItem(z,re);if(ye)return!0;for(var Le=null,Ke=z.getChildBoundables().iterator();Ke.hasNext();){var yt=Ke.next();if(this.getIntersectsOp().intersects(yt.getBounds(),T)&&yt instanceof Ha&&(ye=this.remove(T,yt,re))){Le=yt;break}}return Le!==null&&Le.getChildBoundables().isEmpty()&&z.getChildBoundables().remove(Le),ye}}},{key:"createHigherLevels",value:function(m,y){we.isTrue(!m.isEmpty());var T=this.createParentBoundables(m,y+1);return T.size()===1?T.get(0):this.createHigherLevels(T,y+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var m=0,y=arguments[0].getChildBoundables().iterator();y.hasNext();){var T=y.next();if(T instanceof Ha){var z=this.depth(T);z>m&&(m=z)}}return m+1}}},{key:"createParentBoundables",value:function(m,y){we.isTrue(!m.isEmpty());var T=new et;T.add(this.createNode(y));var z=new et(m);Wa.sort(z,this.getComparator());for(var re=z.iterator();re.hasNext();){var ye=re.next();this.lastNode(T).getChildBoundables().size()===this.getNodeCapacity()&&T.add(this.createNode(y)),this.lastNode(T).addChildBoundable(ye)}return T}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[Y]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new et,this._nodeCapacity=null,arguments.length===0)E.constructor_.call(this,E.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var m=arguments[0];we.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}}},{key:"compareDoubles",value:function(m,y){return m>y?1:m<y?-1:0}}])})();Ve.IntersectsOp=function(){},Ve.DEFAULT_NODE_CAPACITY=10;var pt=(function(){return a((function E(){i(this,E)}),[{key:"distance",value:function(E,m){}}])})(),Dt=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"createParentBoundablesFromVerticalSlices",value:function(y,T){we.isTrue(y.length>0);for(var z=new et,re=0;re<y.length;re++)z.addAll(this.createParentBoundablesFromVerticalSlice(y[re],T));return z}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var y=arguments[0],T=arguments[1];return this.nearestNeighbourK(y,Ee.POSITIVE_INFINITY,T)}if(arguments.length===3){var z=arguments[0],re=arguments[2],ye=arguments[1],Le=new Ds;Le.add(z);for(var Ke=new Ds;!Le.isEmpty()&&ye>=0;){var yt=Le.poll(),Yt=yt.getDistance();if(Yt>=ye)break;yt.isLeaves()?Ke.size()<re?Ke.add(yt):(Ke.peek().getDistance()>Yt&&(Ke.poll(),Ke.add(yt)),ye=Ke.peek().getDistance()):yt.expandToQueue(Le,ye)}return m.getItems(Ke)}}},{key:"createNode",value:function(y){return new tr(y)}},{key:"size",value:function(){return arguments.length===0?P(m,"size",this,1).call(this):P(m,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ye))return P(m,"insert",this,1).apply(this,arguments);var y=arguments[0],T=arguments[1];if(y.isNull())return null;P(m,"insert",this,1).call(this,y,T)}},{key:"getIntersectsOp",value:function(){return m.intersectsOp}},{key:"verticalSlices",value:function(y,T){for(var z=Math.trunc(Math.ceil(y.size()/T)),re=new Array(T).fill(null),ye=y.iterator(),Le=0;Le<T;Le++){re[Le]=new et;for(var Ke=0;ye.hasNext()&&Ke<z;){var yt=ye.next();re[Le].add(yt),Ke++}}return re}},{key:"query",value:function(){if(arguments.length===1){var y=arguments[0];return P(m,"query",this,1).call(this,y)}if(arguments.length===2){var T=arguments[0],z=arguments[1];P(m,"query",this,1).call(this,T,z)}}},{key:"getComparator",value:function(){return m.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(y,T){return P(m,"createParentBoundables",this,1).call(this,y,T)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ye){var y=arguments[0],T=arguments[1];return P(m,"remove",this,1).call(this,y,T)}return P(m,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?P(m,"depth",this,1).call(this):P(m,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(y,T){we.isTrue(!y.isEmpty());var z=Math.trunc(Math.ceil(y.size()/this.getNodeCapacity())),re=new et(y);Wa.sort(re,m.xComparator);var ye=this.verticalSlices(re,Math.trunc(Math.ceil(Math.sqrt(z))));return this.createParentBoundablesFromVerticalSlices(ye,T)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(pr(arguments[0],pt)){var y=arguments[0];if(this.isEmpty())return null;var T=new Ca(this.getRoot(),this.getRoot(),y);return this.nearestNeighbour(T)}if(arguments[0]instanceof Ca){var z=arguments[0],re=Ee.POSITIVE_INFINITY,ye=null,Le=new Ds;for(Le.add(z);!Le.isEmpty()&&re>0;){var Ke=Le.poll(),yt=Ke.getDistance();if(yt>=re)break;Ke.isLeaves()?(re=yt,ye=Ke):Ke.expandToQueue(Le,re)}return ye===null?null:[ye.getBoundable(0).getItem(),ye.getBoundable(1).getItem()]}}else{if(arguments.length===2){var Yt=arguments[0],or=arguments[1];if(this.isEmpty()||Yt.isEmpty())return null;var Nr=new Ca(this.getRoot(),Yt.getRoot(),or);return this.nearestNeighbour(Nr)}if(arguments.length===3){var on=arguments[2],wn=new so(arguments[0],arguments[1]),Ln=new Ca(this.getRoot(),wn,on);return this.nearestNeighbour(Ln)[0]}if(arguments.length===4){var bn=arguments[2],Tn=arguments[3],qi=new so(arguments[0],arguments[1]),Hi=new Ca(this.getRoot(),qi,bn);return this.nearestNeighbourK(Hi,Tn)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var y=arguments[0],T=arguments[1],z=Ee.POSITIVE_INFINITY,re=new Ds;for(re.add(y);!re.isEmpty();){var ye=re.poll(),Le=ye.getDistance();if(Le>T)return!1;if(ye.maximumDistance()<=T)return!0;if(ye.isLeaves()){if((z=Le)<=T)return!0}else ye.expandToQueue(re,z)}return!1}if(arguments.length===3){var Ke=arguments[0],yt=arguments[1],Yt=arguments[2],or=new Ca(this.getRoot(),Ke.getRoot(),yt);return this.isWithinDistance(or,Yt)}}},{key:"interfaces_",get:function(){return[Ys,Y]}}],[{key:"constructor_",value:function(){if(arguments.length===0)m.constructor_.call(this,m.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var y=arguments[0];Ve.constructor_.call(this,y)}}},{key:"centreX",value:function(y){return m.avg(y.getMinX(),y.getMaxX())}},{key:"avg",value:function(y,T){return(y+T)/2}},{key:"getItems",value:function(y){for(var T=new Array(y.size()).fill(null),z=0;!y.isEmpty();){var re=y.poll();T[z]=re.getBoundable(0).getItem(),z++}return T}},{key:"centreY",value:function(y){return m.avg(y.getMinY(),y.getMaxY())}}])})(Ve),tr=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"computeBounds",value:function(){for(var y=null,T=this.getChildBoundables().iterator();T.hasNext();){var z=T.next();y===null?y=new Ye(z.getBounds()):y.expandToInclude(z.getBounds())}return y}}],[{key:"constructor_",value:function(){var y=arguments[0];Ha.constructor_.call(this,y)}}])})(Ha);Dt.STRtreeNode=tr,Dt.xComparator=new((function(){return a((function E(){i(this,E)}),[{key:"interfaces_",get:function(){return[Ae]}},{key:"compare",value:function(E,m){return Ve.compareDoubles(Dt.centreX(E.getBounds()),Dt.centreX(m.getBounds()))}}])})()),Dt.yComparator=new((function(){return a((function E(){i(this,E)}),[{key:"interfaces_",get:function(){return[Ae]}},{key:"compare",value:function(E,m){return Ve.compareDoubles(Dt.centreY(E.getBounds()),Dt.centreY(m.getBounds()))}}])})()),Dt.intersectsOp=new((function(){return a((function E(){i(this,E)}),[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(E,m){return E.intersects(m)}}])})()),Dt.DEFAULT_NODE_CAPACITY=10;var Pr=(function(){function E(){i(this,E)}return a(E,null,[{key:"relativeSign",value:function(m,y){return m<y?-1:m>y?1:0}},{key:"compare",value:function(m,y,T){if(y.equals2D(T))return 0;var z=E.relativeSign(y.x,T.x),re=E.relativeSign(y.y,T.y);switch(m){case 0:return E.compareValue(z,re);case 1:return E.compareValue(re,z);case 2:return E.compareValue(re,-z);case 3:return E.compareValue(-z,re);case 4:return E.compareValue(-z,-re);case 5:return E.compareValue(-re,-z);case 6:return E.compareValue(-re,z);case 7:return E.compareValue(z,-re)}return we.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(m,y){return m<0?-1:m>0?1:y<0?-1:y>0?1:0}}])})(),$r=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(E){E.print(this.coord),E.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(E){var m=E;return this.segmentIndex<m.segmentIndex?-1:this.segmentIndex>m.segmentIndex?1:this.coord.equals2D(m.coord)?0:this._isInterior?m._isInterior?Pr.compare(this._segmentOctant,this.coord,m.coord):1:-1}},{key:"isEndPoint",value:function(E){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===E}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var E=arguments[0],m=arguments[1],y=arguments[2],T=arguments[3];this._segString=E,this.coord=new Oe(m),this.segmentIndex=y,this._segmentOctant=T,this._isInterior=!m.equals2D(E.getCoordinate(y))}}])})(),xn=(function(){return a((function E(){i(this,E)}),[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])})(),pn=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getSplitCoordinates",value:function(){var E=new na;this.addEndpoints();for(var m=this.iterator(),y=m.next();m.hasNext();){var T=m.next();this.addEdgeCoordinates(y,T,E),y=T}return E.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var E=new et;this.findCollapsesFromInsertedNodes(E),this.findCollapsesFromExistingVertices(E);for(var m=E.iterator();m.hasNext();){var y=m.next().intValue();this.add(this._edge.getCoordinate(y),y)}}},{key:"createSplitEdgePts",value:function(E,m){var y=m.segmentIndex-E.segmentIndex+2;if(y===2)return[new Oe(E.coord),new Oe(m.coord)];var T=this._edge.getCoordinate(m.segmentIndex),z=m.isInterior()||!m.coord.equals2D(T);z||y--;var re=new Array(y).fill(null),ye=0;re[ye++]=new Oe(E.coord);for(var Le=E.segmentIndex+1;Le<=m.segmentIndex;Le++)re[ye++]=this._edge.getCoordinate(Le);return z&&(re[ye]=new Oe(m.coord)),re}},{key:"print",value:function(E){E.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"findCollapsesFromExistingVertices",value:function(E){for(var m=0;m<this._edge.size()-2;m++){var y=this._edge.getCoordinate(m);this._edge.getCoordinate(m+1);var T=this._edge.getCoordinate(m+2);y.equals2D(T)&&E.add(ir.valueOf(m+1))}}},{key:"addEdgeCoordinates",value:function(E,m,y){var T=this.createSplitEdgePts(E,m);y.add(T,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(E){this.addEndpoints(),this.addCollapsedNodes();for(var m=this.iterator(),y=m.next();m.hasNext();){var T=m.next(),z=this.createSplitEdge(y,T);E.add(z),y=T}}},{key:"findCollapseIndex",value:function(E,m,y){if(!E.coord.equals2D(m.coord))return!1;var T=m.segmentIndex-E.segmentIndex;return m.isInterior()||T--,T===1&&(y[0]=E.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(E){for(var m=new Array(1).fill(null),y=this.iterator(),T=y.next();y.hasNext();){var z=y.next();this.findCollapseIndex(T,z,m)&&E.add(ir.valueOf(m[0])),T=z}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var E=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(E),E)}},{key:"createSplitEdge",value:function(E,m){var y=this.createSplitEdgePts(E,m);return new Li(y,this._edge.getData())}},{key:"add",value:function(E,m){var y=new $r(this._edge,E,m,this._edge.getSegmentOctant(m)),T=this._nodeMap.get(y);return T!==null?(we.isTrue(T.coord.equals2D(E),"Found equal nodes with different coordinates"),T):(this._nodeMap.put(y,y),y)}},{key:"checkSplitEdgesCorrectness",value:function(E){var m=this._edge.getCoordinates(),y=E.get(0).getCoordinate(0);if(!y.equals2D(m[0]))throw new fe("bad split edge start point at "+y);var T=E.get(E.size()-1).getCoordinates(),z=T[T.length-1];if(!z.equals2D(m[m.length-1]))throw new fe("bad split edge end point at "+z)}}],[{key:"constructor_",value:function(){this._nodeMap=new En,this._edge=null;var E=arguments[0];this._edge=E}}])})(),Yn=(function(){function E(){i(this,E)}return a(E,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],y=arguments[1];if(m===0&&y===0)throw new $("Cannot compute the octant for point ( "+m+", "+y+" )");var T=Math.abs(m),z=Math.abs(y);return m>=0?y>=0?T>=z?0:1:T>=z?7:6:y>=0?T>=z?3:2:T>=z?4:5}if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var re=arguments[0],ye=arguments[1],Le=ye.x-re.x,Ke=ye.y-re.y;if(Le===0&&Ke===0)throw new $("Cannot compute the octant for two identical points "+re);return E.octant(Le,Ke)}}}])})(),ei=(function(){return a((function E(){i(this,E)}),[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(E){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(E){}},{key:"getData",value:function(){}}])})(),yi=(function(){return a((function E(){i(this,E)}),[{key:"addIntersection",value:function(E,m){}},{key:"interfaces_",get:function(){return[ei]}}])})(),Li=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(m){return this._pts[m]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(m){return m===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(m),this.getCoordinate(m+1))}},{key:"setData",value:function(m){this._data=m}},{key:"safeOctant",value:function(m,y){return m.equals2D(y)?0:Yn.octant(m,y)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var m=arguments[0],y=arguments[1];this.addIntersectionNode(m,y)}else if(arguments.length===4){var T=arguments[1],z=arguments[3],re=new Oe(arguments[0].getIntersection(z));this.addIntersection(re,T)}}},{key:"toString",value:function(){return qr.toLineString(new Ua(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(m,y){var T=y,z=T+1;if(z<this._pts.length){var re=this._pts[z];m.equals2D(re)&&(T=z)}return this._nodeList.add(m,T)}},{key:"addIntersections",value:function(m,y,T){for(var z=0;z<m.getIntersectionNum();z++)this.addIntersection(m,y,T,z)}},{key:"interfaces_",get:function(){return[yi]}}],[{key:"constructor_",value:function(){this._nodeList=new pn(this),this._pts=null,this._data=null;var m=arguments[0],y=arguments[1];this._pts=m,this._data=y}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var m=arguments[0],y=new et;return E.getNodedSubstrings(m,y),y}if(arguments.length===2)for(var T=arguments[1],z=arguments[0].iterator();z.hasNext();)z.next().getNodeList().addSplitEdges(T)}}])})(),Ii=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof E){var m=arguments[0],y=_e.index(this.p0,this.p1,m.p0),T=_e.index(this.p0,this.p1,m.p1);return y>=0&&T>=0||y<=0&&T<=0?Math.max(y,T):0}if(arguments[0]instanceof Oe){var z=arguments[0];return _e.index(this.p0,this.p1,z)}}},{key:"toGeometry",value:function(m){return m.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(m){if(!(m instanceof E))return!1;var y=m;return this.p0.equals(y.p0)&&this.p1.equals(y.p1)}},{key:"intersection",value:function(m){var y=new Sr;return y.computeIntersection(this.p0,this.p1,m.p0,m.p1),y.hasIntersection()?y.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Oe){var m=arguments[0];if(m.equals(this.p0)||m.equals(this.p1))return new Oe(m);var y=this.projectionFactor(m),T=new Oe;return T.x=this.p0.x+y*(this.p1.x-this.p0.x),T.y=this.p0.y+y*(this.p1.y-this.p0.y),T}if(arguments[0]instanceof E){var z=arguments[0],re=this.projectionFactor(z.p0),ye=this.projectionFactor(z.p1);if(re>=1&&ye>=1||re<=0&&ye<=0)return null;var Le=this.project(z.p0);re<0&&(Le=this.p0),re>1&&(Le=this.p1);var Ke=this.project(z.p1);return ye<0&&(Ke=this.p0),ye>1&&(Ke=this.p1),new E(Le,Ke)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(m){return m===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(m){return Er.pointToLinePerpendicular(m,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return E.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(m){if(m.equals(this.p0))return 0;if(m.equals(this.p1))return 1;var y=this.p1.x-this.p0.x,T=this.p1.y-this.p0.y,z=y*y+T*T;return z<=0?Ee.NaN:((m.x-this.p0.x)*y+(m.y-this.p0.y)*T)/z}},{key:"closestPoints",value:function(m){var y=this.intersection(m);if(y!==null)return[y,y];var T=new Array(2).fill(null),z=Ee.MAX_VALUE,re=null,ye=this.closestPoint(m.p0);z=ye.distance(m.p0),T[0]=ye,T[1]=m.p0;var Le=this.closestPoint(m.p1);(re=Le.distance(m.p1))<z&&(z=re,T[0]=Le,T[1]=m.p1);var Ke=m.closestPoint(this.p0);(re=Ke.distance(this.p0))<z&&(z=re,T[0]=this.p0,T[1]=Ke);var yt=m.closestPoint(this.p1);return(re=yt.distance(this.p1))<z&&(z=re,T[0]=this.p1,T[1]=yt),T}},{key:"closestPoint",value:function(m){var y=this.projectionFactor(m);return y>0&&y<1?this.project(m):this.p0.distance(m)<this.p1.distance(m)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(m){var y=m,T=this.p0.compareTo(y.p0);return T!==0?T:this.p1.compareTo(y.p1)}},{key:"reverse",value:function(){var m=this.p0;this.p0=this.p1,this.p1=m}},{key:"equalsTopo",value:function(m){return this.p0.equals(m.p0)&&this.p1.equals(m.p1)||this.p0.equals(m.p1)&&this.p1.equals(m.p0)}},{key:"lineIntersection",value:function(m){return Bt.intersection(this.p0,this.p1,m.p0,m.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(m,y){var T=this.p0.x+m*(this.p1.x-this.p0.x),z=this.p0.y+m*(this.p1.y-this.p0.y),re=this.p1.x-this.p0.x,ye=this.p1.y-this.p0.y,Le=Math.sqrt(re*re+ye*ye),Ke=0,yt=0;if(y!==0){if(Le<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");Ke=y*re/Le,yt=y*ye/Le}return new Oe(T-yt,z+Ke)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var m=arguments[0];this.setCoordinates(m.p0,m.p1)}else if(arguments.length===2){var y=arguments[0],T=arguments[1];this.p0.x=y.x,this.p0.y=y.y,this.p1.x=T.x,this.p1.y=T.y}}},{key:"segmentFraction",value:function(m){var y=this.projectionFactor(m);return y<0?y=0:(y>1||Ee.isNaN(y))&&(y=1),y}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(m){var y=this.p1.getY()-this.p0.getY(),T=this.p0.getX()-this.p1.getX(),z=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),re=y*y+T*T,ye=y*y-T*T,Le=m.getX(),Ke=m.getY();return new Oe((-ye*Le-2*y*T*Ke-2*y*z)/re,(ye*Ke-2*y*T*Le-2*T*z)/re)}},{key:"distance",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return Er.segmentToSegment(this.p0,this.p1,m.p0,m.p1)}if(arguments[0]instanceof Oe){var y=arguments[0];return Er.pointToSegment(y,this.p0,this.p1)}}},{key:"pointAlong",value:function(m){var y=new Oe;return y.x=this.p0.x+m*(this.p1.x-this.p0.x),y.y=this.p0.y+m*(this.p1.y-this.p0.y),y}},{key:"hashCode",value:function(){var m=Ee.doubleToLongBits(this.p0.x);m^=31*Ee.doubleToLongBits(this.p0.y);var y=Math.trunc(m)^Math.trunc(m>>32),T=Ee.doubleToLongBits(this.p1.x);return T^=31*Ee.doubleToLongBits(this.p1.y),y^(Math.trunc(T)^Math.trunc(T>>32))}},{key:"interfaces_",get:function(){return[U,Y]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)E.constructor_.call(this,new Oe,new Oe);else if(arguments.length===1){var m=arguments[0];E.constructor_.call(this,m.p0,m.p1)}else if(arguments.length===2){var y=arguments[0],T=arguments[1];this.p0=y,this.p1=T}else if(arguments.length===4){var z=arguments[0],re=arguments[1],ye=arguments[2],Le=arguments[3];E.constructor_.call(this,new Oe(z,re),new Oe(ye,Le))}}},{key:"midPoint",value:function(m,y){return new Oe((m.x+y.x)/2,(m.y+y.y)/2)}}])})(),mi=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var E=arguments[1],m=arguments[2],y=arguments[3];arguments[0].getLineSegment(E,this._overlapSeg1),m.getLineSegment(y,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Ii,this._overlapSeg2=new Ii}}])})(),Ea=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getLineSegment",value:function(E,m){m.p0=this._pts[E],m.p1=this._pts[E+1]}},{key:"computeSelect",value:function(E,m,y,T){var z=this._pts[m],re=this._pts[y];if(y-m==1)return T.select(this,m),null;if(!E.intersects(z,re))return null;var ye=Math.trunc((m+y)/2);m<ye&&this.computeSelect(E,m,ye,T),ye<y&&this.computeSelect(E,ye,y,T)}},{key:"getCoordinates",value:function(){for(var E=new Array(this._end-this._start+1).fill(null),m=0,y=this._start;y<=this._end;y++)E[m++]=this._pts[y];return E}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var E=arguments[0],m=arguments[1];this.computeOverlaps(this._start,this._end,E,E._start,E._end,m)}else if(arguments.length===6){var y=arguments[0],T=arguments[1],z=arguments[2],re=arguments[3],ye=arguments[4],Le=arguments[5];if(T-y==1&&ye-re==1)return Le.overlap(this,y,z,re),null;if(!this.overlaps(y,T,z,re,ye))return null;var Ke=Math.trunc((y+T)/2),yt=Math.trunc((re+ye)/2);y<Ke&&(re<yt&&this.computeOverlaps(y,Ke,z,re,yt,Le),yt<ye&&this.computeOverlaps(y,Ke,z,yt,ye,Le)),Ke<T&&(re<yt&&this.computeOverlaps(Ke,T,z,re,yt,Le),yt<ye&&this.computeOverlaps(Ke,T,z,yt,ye,Le))}}},{key:"setId",value:function(E){this._id=E}},{key:"select",value:function(E,m){this.computeSelect(E,this._start,this._end,m)}},{key:"getEnvelope",value:function(){if(this._env===null){var E=this._pts[this._start],m=this._pts[this._end];this._env=new Ye(E,m)}return this._env}},{key:"overlaps",value:function(E,m,y,T,z){return Ye.intersects(this._pts[E],this._pts[m],y._pts[T],y._pts[z])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var E=arguments[0],m=arguments[1],y=arguments[2],T=arguments[3];this._pts=E,this._start=m,this._end=y,this._context=T}}])})(),Qi=(function(){function E(){i(this,E)}return a(E,null,[{key:"findChainEnd",value:function(m,y){for(var T=y;T<m.length-1&&m[T].equals2D(m[T+1]);)T++;if(T>=m.length-1)return m.length-1;for(var z=jn.quadrant(m[T],m[T+1]),re=y+1;re<m.length&&!(!m[re-1].equals2D(m[re])&&jn.quadrant(m[re-1],m[re])!==z);)re++;return re-1}},{key:"getChains",value:function(){if(arguments.length===1){var m=arguments[0];return E.getChains(m,null)}if(arguments.length===2){var y=arguments[0],T=arguments[1],z=new et,re=0;do{var ye=E.findChainEnd(y,re),Le=new Ea(y,re,ye,T);z.add(Le),re=ye}while(re<y.length-1);return z}}}])})(),Fa=(function(){return a((function E(){i(this,E)}),[{key:"computeNodes",value:function(E){}},{key:"getNodedSubstrings",value:function(){}}])})(),Qo=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"setSegmentIntersector",value:function(E){this._segInt=E}},{key:"interfaces_",get:function(){return[Fa]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this.setSegmentIntersector(E)}}}}])})(),Ns=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Li.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(y){for(var T=Qi.getChains(y.getCoordinates(),y).iterator();T.hasNext();){var z=T.next();z.setId(this._idCounter++),this._index.insert(z.getEnvelope(),z),this._monoChains.add(z)}}},{key:"computeNodes",value:function(y){this._nodedSegStrings=y;for(var T=y.iterator();T.hasNext();)this.add(T.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var y=new Xl(this._segInt),T=this._monoChains.iterator();T.hasNext();)for(var z=T.next(),re=this._index.query(z.getEnvelope()).iterator();re.hasNext();){var ye=re.next();if(ye.getId()>z.getId()&&(z.computeOverlaps(ye,y),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new et,this._index=new Dt,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var y=arguments[0];Qo.constructor_.call(this,y)}}}}])})(Qo),Xl=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"overlap",value:function(){if(arguments.length!==4)return P(m,"overlap",this,1).apply(this,arguments);var y=arguments[1],T=arguments[2],z=arguments[3],re=arguments[0].getContext(),ye=T.getContext();this._si.processIntersections(re,y,ye,z)}}],[{key:"constructor_",value:function(){this._si=null;var y=arguments[0];this._si=y}}])})(mi);Ns.SegmentOverlapAction=Xl;var vo=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isDeletable",value:function(m,y,T,z){var re=this._inputLine[m],ye=this._inputLine[y],Le=this._inputLine[T];return!!this.isConcave(re,ye,Le)&&!!this.isShallow(re,ye,Le,z)&&this.isShallowSampled(re,ye,m,T,z)}},{key:"deleteShallowConcavities",value:function(){for(var m=1,y=this.findNextNonDeletedIndex(m),T=this.findNextNonDeletedIndex(y),z=!1;T<this._inputLine.length;){var re=!1;this.isDeletable(m,y,T,this._distanceTol)&&(this._isDeleted[y]=E.DELETE,re=!0,z=!0),m=re?T:y,y=this.findNextNonDeletedIndex(m),T=this.findNextNonDeletedIndex(y)}return z}},{key:"isShallowConcavity",value:function(m,y,T,z){return _e.index(m,y,T)===this._angleOrientation&&Er.pointToSegment(y,m,T)<z}},{key:"isShallowSampled",value:function(m,y,T,z,re){var ye=Math.trunc((z-T)/E.NUM_PTS_TO_CHECK);ye<=0&&(ye=1);for(var Le=T;Le<z;Le+=ye)if(!this.isShallow(m,y,this._inputLine[Le],re))return!1;return!0}},{key:"isConcave",value:function(m,y,T){var z=_e.index(m,y,T)===this._angleOrientation;return z}},{key:"simplify",value:function(m){this._distanceTol=Math.abs(m),m<0&&(this._angleOrientation=_e.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var y=!1;do y=this.deleteShallowConcavities();while(y);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(m){for(var y=m+1;y<this._inputLine.length&&this._isDeleted[y]===E.DELETE;)y++;return y}},{key:"isShallow",value:function(m,y,T,z){return Er.pointToSegment(y,m,T)<z}},{key:"collapseLine",value:function(){for(var m=new na,y=0;y<this._inputLine.length;y++)this._isDeleted[y]!==E.DELETE&&m.add(this._inputLine[y]);return m.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=_e.COUNTERCLOCKWISE;var m=arguments[0];this._inputLine=m}},{key:"simplify",value:function(m,y){return new E(m).simplify(y)}}])})();vo.INIT=0,vo.DELETE=1,vo.KEEP=1,vo.NUM_PTS_TO_CHECK=10;var sl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getCoordinates",value:function(){return this._ptList.toArray(E.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(m){this._precisionModel=m}},{key:"addPt",value:function(m){var y=new Oe(m);if(this._precisionModel.makePrecise(y),this.isRedundant(y))return null;this._ptList.add(y)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(m,y){if(y)for(var T=0;T<m.length;T++)this.addPt(m[T]);else for(var z=m.length-1;z>=0;z--)this.addPt(m[z])}},{key:"isRedundant",value:function(m){if(this._ptList.size()<1)return!1;var y=this._ptList.get(this._ptList.size()-1);return m.distance(y)<this._minimimVertexDistance}},{key:"toString",value:function(){return new go().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var m=new Oe(this._ptList.get(0)),y=this._ptList.get(this._ptList.size()-1);if(m.equals(y))return null;this._ptList.add(m)}},{key:"setMinimumVertexDistance",value:function(m){this._minimimVertexDistance=m}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new et}}])})();sl.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Wi=(function(){function E(){i(this,E)}return a(E,null,[{key:"toDegrees",value:function(m){return 180*m/Math.PI}},{key:"normalize",value:function(m){for(;m>Math.PI;)m-=E.PI_TIMES_2;for(;m<=-Math.PI;)m+=E.PI_TIMES_2;return m}},{key:"angle",value:function(){if(arguments.length===1){var m=arguments[0];return Math.atan2(m.y,m.x)}if(arguments.length===2){var y=arguments[0],T=arguments[1],z=T.x-y.x,re=T.y-y.y;return Math.atan2(re,z)}}},{key:"isAcute",value:function(m,y,T){var z=m.x-y.x,re=m.y-y.y;return z*(T.x-y.x)+re*(T.y-y.y)>0}},{key:"isObtuse",value:function(m,y,T){var z=m.x-y.x,re=m.y-y.y;return z*(T.x-y.x)+re*(T.y-y.y)<0}},{key:"interiorAngle",value:function(m,y,T){var z=E.angle(y,m),re=E.angle(y,T);return Math.abs(re-z)}},{key:"normalizePositive",value:function(m){if(m<0){for(;m<0;)m+=E.PI_TIMES_2;m>=E.PI_TIMES_2&&(m=0)}else{for(;m>=E.PI_TIMES_2;)m-=E.PI_TIMES_2;m<0&&(m=0)}return m}},{key:"angleBetween",value:function(m,y,T){var z=E.angle(y,m),re=E.angle(y,T);return E.diff(z,re)}},{key:"diff",value:function(m,y){var T=null;return(T=m<y?y-m:m-y)>Math.PI&&(T=2*Math.PI-T),T}},{key:"toRadians",value:function(m){return m*Math.PI/180}},{key:"getTurn",value:function(m,y){var T=Math.sin(y-m);return T>0?E.COUNTERCLOCKWISE:T<0?E.CLOCKWISE:E.NONE}},{key:"angleBetweenOriented",value:function(m,y,T){var z=E.angle(y,m),re=E.angle(y,T)-z;return re<=-Math.PI?re+E.PI_TIMES_2:re>Math.PI?re-E.PI_TIMES_2:re}}])})();Wi.PI_TIMES_2=2*Math.PI,Wi.PI_OVER_2=Math.PI/2,Wi.PI_OVER_4=Math.PI/4,Wi.COUNTERCLOCKWISE=_e.COUNTERCLOCKWISE,Wi.CLOCKWISE=_e.CLOCKWISE,Wi.NONE=_e.COLLINEAR;var Zs=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"addNextSegment",value:function(m,y){if(this._s0=this._s1,this._s1=this._s2,this._s2=m,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var T=_e.index(this._s0,this._s1,this._s2),z=T===_e.CLOCKWISE&&this._side===st.LEFT||T===_e.COUNTERCLOCKWISE&&this._side===st.RIGHT;T===0?this.addCollinear(y):z?this.addOutsideTurn(T,y):this.addInsideTurn(T,y)}},{key:"addLineEndCap",value:function(m,y){var T=new Ii(m,y),z=new Ii;this.computeOffsetSegment(T,st.LEFT,this._distance,z);var re=new Ii;this.computeOffsetSegment(T,st.RIGHT,this._distance,re);var ye=y.x-m.x,Le=y.y-m.y,Ke=Math.atan2(Le,ye);switch(this._bufParams.getEndCapStyle()){case F.CAP_ROUND:this._segList.addPt(z.p1),this.addDirectedFillet(y,Ke+Math.PI/2,Ke-Math.PI/2,_e.CLOCKWISE,this._distance),this._segList.addPt(re.p1);break;case F.CAP_FLAT:this._segList.addPt(z.p1),this._segList.addPt(re.p1);break;case F.CAP_SQUARE:var yt=new Oe;yt.x=Math.abs(this._distance)*Math.cos(Ke),yt.y=Math.abs(this._distance)*Math.sin(Ke);var Yt=new Oe(z.p1.x+yt.x,z.p1.y+yt.y),or=new Oe(re.p1.x+yt.x,re.p1.y+yt.y);this._segList.addPt(Yt),this._segList.addPt(or)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(m,y,T,z){var re=Bt.intersection(y.p0,y.p1,T.p0,T.p1);if(re!==null&&(z<=0?1:re.distance(m)/Math.abs(z))<=this._bufParams.getMitreLimit())return this._segList.addPt(re),null;this.addLimitedMitreJoin(y,T,z,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(m,y){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*E.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===F.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===F.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(y&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,m,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(m){this._segList.addPt(new Oe(m.x+this._distance,m.y+this._distance)),this._segList.addPt(new Oe(m.x+this._distance,m.y-this._distance)),this._segList.addPt(new Oe(m.x-this._distance,m.y-this._distance)),this._segList.addPt(new Oe(m.x-this._distance,m.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(m,y){this._segList.addPts(m,y)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(m,y,T,z,re){var ye=y.x-m.x,Le=y.y-m.y,Ke=Math.atan2(Le,ye),yt=T.x-m.x,Yt=T.y-m.y,or=Math.atan2(Yt,yt);z===_e.CLOCKWISE?Ke<=or&&(Ke+=2*Math.PI):Ke>=or&&(Ke-=2*Math.PI),this._segList.addPt(y),this.addDirectedFillet(m,Ke,or,z,re),this._segList.addPt(T)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(m,y,T){this._s1=m,this._s2=y,this._side=T,this._seg1.setCoordinates(m,y),this.computeOffsetSegment(this._seg1,T,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(m,y,T,z){var re=this._seg0.p1,ye=Wi.angle(re,this._seg0.p0),Le=Wi.angleBetweenOriented(this._seg0.p0,re,this._seg1.p1)/2,Ke=Wi.normalize(ye+Le),yt=Wi.normalize(Ke+Math.PI),Yt=z*T,or=T-Yt*Math.abs(Math.sin(Le)),Nr=re.x+Yt*Math.cos(yt),on=re.y+Yt*Math.sin(yt),wn=new Oe(Nr,on),Ln=new Ii(re,wn),bn=Ln.pointAlongOffset(1,or),Tn=Ln.pointAlongOffset(1,-or);this._side===st.LEFT?(this._segList.addPt(bn),this._segList.addPt(Tn)):(this._segList.addPt(Tn),this._segList.addPt(bn))}},{key:"addDirectedFillet",value:function(m,y,T,z,re){var ye=z===_e.CLOCKWISE?-1:1,Le=Math.abs(y-T),Ke=Math.trunc(Le/this._filletAngleQuantum+.5);if(Ke<1)return null;for(var yt=Le/Ke,Yt=new Oe,or=0;or<Ke;or++){var Nr=y+ye*or*yt;Yt.x=m.x+re*Math.cos(Nr),Yt.y=m.y+re*Math.sin(Nr),this._segList.addPt(Yt)}}},{key:"computeOffsetSegment",value:function(m,y,T,z){var re=y===st.LEFT?1:-1,ye=m.p1.x-m.p0.x,Le=m.p1.y-m.p0.y,Ke=Math.sqrt(ye*ye+Le*Le),yt=re*T*ye/Ke,Yt=re*T*Le/Ke;z.p0.x=m.p0.x-Yt,z.p0.y=m.p0.y+yt,z.p1.x=m.p1.x-Yt,z.p1.y=m.p1.y+yt}},{key:"addInsideTurn",value:function(m,y){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*E.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var T=new Oe((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(T);var z=new Oe((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(z)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(m){var y=new Oe(m.x+this._distance,m.y);this._segList.addPt(y),this.addDirectedFillet(m,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(m,y){this._segList.addPt(m.p1),this._segList.addPt(y.p0)}},{key:"init",value:function(m){this._distance=m,this._maxCurveSegmentError=m*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new sl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(m*E.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(m){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===F.JOIN_BEVEL||this._bufParams.getJoinStyle()===F.JOIN_MITRE?(m&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,_e.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ii,this._seg1=new Ii,this._offset0=new Ii,this._offset1=new Ii,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[0],y=arguments[1],T=arguments[2];this._precisionModel=m,this._bufParams=y,this._li=new Sr,this._filletAngleQuantum=Math.PI/2/y.getQuadrantSegments(),y.getQuadrantSegments()>=8&&y.getJoinStyle()===F.JOIN_ROUND&&(this._closingSegLengthFactor=E.MAX_CLOSING_SEG_LEN_FACTOR),this.init(T)}}])})();Zs.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Zs.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Zs.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Zs.MAX_CLOSING_SEG_LEN_FACTOR=80;var Il=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getOffsetCurve",value:function(m,y){if(this._distance=y,y===0)return null;var T=y<0,z=Math.abs(y),re=this.getSegGen(z);m.length<=1?this.computePointCurve(m[0],re):this.computeOffsetCurve(m,T,re);var ye=re.getCoordinates();return T&&Ni.reverse(ye),ye}},{key:"computeSingleSidedBufferCurve",value:function(m,y,T){var z=this.simplifyTolerance(this._distance);if(y){T.addSegments(m,!0);var re=vo.simplify(m,-z),ye=re.length-1;T.initSideSegments(re[ye],re[ye-1],st.LEFT),T.addFirstSegment();for(var Le=ye-2;Le>=0;Le--)T.addNextSegment(re[Le],!0)}else{T.addSegments(m,!1);var Ke=vo.simplify(m,z),yt=Ke.length-1;T.initSideSegments(Ke[0],Ke[1],st.LEFT),T.addFirstSegment();for(var Yt=2;Yt<=yt;Yt++)T.addNextSegment(Ke[Yt],!0)}T.addLastSegment(),T.closeRing()}},{key:"computeRingBufferCurve",value:function(m,y,T){var z=this.simplifyTolerance(this._distance);y===st.RIGHT&&(z=-z);var re=vo.simplify(m,z),ye=re.length-1;T.initSideSegments(re[ye-1],re[0],y);for(var Le=1;Le<=ye;Le++){var Ke=Le!==1;T.addNextSegment(re[Le],Ke)}T.closeRing()}},{key:"computeLineBufferCurve",value:function(m,y){var T=this.simplifyTolerance(this._distance),z=vo.simplify(m,T),re=z.length-1;y.initSideSegments(z[0],z[1],st.LEFT);for(var ye=2;ye<=re;ye++)y.addNextSegment(z[ye],!0);y.addLastSegment(),y.addLineEndCap(z[re-1],z[re]);var Le=vo.simplify(m,-T),Ke=Le.length-1;y.initSideSegments(Le[Ke],Le[Ke-1],st.LEFT);for(var yt=Ke-2;yt>=0;yt--)y.addNextSegment(Le[yt],!0);y.addLastSegment(),y.addLineEndCap(Le[1],Le[0]),y.closeRing()}},{key:"computePointCurve",value:function(m,y){switch(this._bufParams.getEndCapStyle()){case F.CAP_ROUND:y.createCircle(m);break;case F.CAP_SQUARE:y.createSquare(m)}}},{key:"getLineCurve",value:function(m,y){if(this._distance=y,this.isLineOffsetEmpty(y))return null;var T=Math.abs(y),z=this.getSegGen(T);if(m.length<=1)this.computePointCurve(m[0],z);else if(this._bufParams.isSingleSided()){var re=y<0;this.computeSingleSidedBufferCurve(m,re,z)}else this.computeLineBufferCurve(m,z);return z.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(m){return m*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(m,y,T){if(this._distance=T,m.length<=2)return this.getLineCurve(m,T);if(T===0)return E.copyCoordinates(m);var z=this.getSegGen(T);return this.computeRingBufferCurve(m,y,z),z.getCoordinates()}},{key:"computeOffsetCurve",value:function(m,y,T){var z=this.simplifyTolerance(this._distance);if(y){var re=vo.simplify(m,-z),ye=re.length-1;T.initSideSegments(re[ye],re[ye-1],st.LEFT),T.addFirstSegment();for(var Le=ye-2;Le>=0;Le--)T.addNextSegment(re[Le],!0)}else{var Ke=vo.simplify(m,z),yt=Ke.length-1;T.initSideSegments(Ke[0],Ke[1],st.LEFT),T.addFirstSegment();for(var Yt=2;Yt<=yt;Yt++)T.addNextSegment(Ke[Yt],!0)}T.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(m){return m===0||m<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(m){return new Zs(this._precisionModel,this._bufParams,m)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var m=arguments[0],y=arguments[1];this._precisionModel=m,this._bufParams=y}},{key:"copyCoordinates",value:function(m){for(var y=new Array(m.length).fill(null),T=0;T<y.length;T++)y[T]=new Oe(m[T]);return y}}])})(),Xa=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var E=arguments[0],m=new et,y=this._subgraphs.iterator();y.hasNext();){var T=y.next(),z=T.getEnvelope();E.y<z.getMinY()||E.y>z.getMaxY()||this.findStabbedSegments(E,T.getDirectedEdges(),m)}return m}if(arguments.length===3){if(pr(arguments[2],ar)&&arguments[0]instanceof Oe&&arguments[1]instanceof oo){for(var re=arguments[0],ye=arguments[1],Le=arguments[2],Ke=ye.getEdge().getCoordinates(),yt=0;yt<Ke.length-1;yt++)if(this._seg.p0=Ke[yt],this._seg.p1=Ke[yt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<re.x||this._seg.isHorizontal()||re.y<this._seg.p0.y||re.y>this._seg.p1.y||_e.index(this._seg.p0,this._seg.p1,re)===_e.RIGHT)){var Yt=ye.getDepth(st.LEFT);this._seg.p0.equals(Ke[yt])||(Yt=ye.getDepth(st.RIGHT));var or=new Ba(this._seg,Yt);Le.add(or)}}else if(pr(arguments[2],ar)&&arguments[0]instanceof Oe&&pr(arguments[1],ar))for(var Nr=arguments[0],on=arguments[2],wn=arguments[1].iterator();wn.hasNext();){var Ln=wn.next();Ln.isForward()&&this.findStabbedSegments(Nr,Ln,on)}}}},{key:"getDepth",value:function(E){var m=this.findStabbedSegments(E);return m.size()===0?0:Wa.min(m)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Ii;var E=arguments[0];this._subgraphs=E}}])})(),Ba=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"compareTo",value:function(E){var m=E;if(this._upwardSeg.minX()>=m._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=m._upwardSeg.minX())return-1;var y=this._upwardSeg.orientationIndex(m._upwardSeg);return y!==0||(y=-1*m._upwardSeg.orientationIndex(this._upwardSeg))!==0?y:this._upwardSeg.compareTo(m._upwardSeg)}},{key:"compareX",value:function(E,m){var y=E.p0.compareTo(m.p0);return y!==0?y:E.p1.compareTo(m.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var E=arguments[0],m=arguments[1];this._upwardSeg=new Ii(E),this._leftDepth=m}}])})();Xa.DepthSegment=Ba;var ro=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,null,[{key:"constructor_",value:function(){N.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])})(N),Ta=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getY",value:function(){var m=this.y/this.w;if(Ee.isNaN(m)||Ee.isInfinite(m))throw new ro;return m}},{key:"getX",value:function(){var m=this.x/this.w;if(Ee.isNaN(m)||Ee.isInfinite(m))throw new ro;return m}},{key:"getCoordinate",value:function(){var m=new Oe;return m.x=this.getX(),m.y=this.getY(),m}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var m=arguments[0];this.x=m.x,this.y=m.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],T=arguments[1];this.x=y,this.y=T,this.w=1}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var z=arguments[0],re=arguments[1];this.x=z.y*re.w-re.y*z.w,this.y=re.x*z.w-z.x*re.w,this.w=z.x*re.y-re.x*z.y}else if(arguments[0]instanceof Oe&&arguments[1]instanceof Oe){var ye=arguments[0],Le=arguments[1];this.x=ye.y-Le.y,this.y=Le.x-ye.x,this.w=ye.x*Le.y-Le.x*ye.y}}else if(arguments.length===3){var Ke=arguments[0],yt=arguments[1],Yt=arguments[2];this.x=Ke,this.y=yt,this.w=Yt}else if(arguments.length===4){var or=arguments[0],Nr=arguments[1],on=arguments[2],wn=arguments[3],Ln=or.y-Nr.y,bn=Nr.x-or.x,Tn=or.x*Nr.y-Nr.x*or.y,qi=on.y-wn.y,Hi=wn.x-on.x,ha=on.x*wn.y-wn.x*on.y;this.x=bn*ha-Hi*Tn,this.y=qi*Tn-Ln*ha,this.w=Ln*Hi-qi*bn}}}])})(),ko=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"area",value:function(){return E.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return E.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(m){if(m===null)throw new $("Supplied point is null.");return E.interpolateZ(m,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return E.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return E.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return E.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return E.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return E.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return E.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var m=arguments[0],y=arguments[1],T=arguments[2];this.p0=m,this.p1=y,this.p2=T}},{key:"area",value:function(m,y,T){return Math.abs(((T.x-m.x)*(y.y-m.y)-(y.x-m.x)*(T.y-m.y))/2)}},{key:"signedArea",value:function(m,y,T){return((T.x-m.x)*(y.y-m.y)-(y.x-m.x)*(T.y-m.y))/2}},{key:"det",value:function(m,y,T,z){return m*z-y*T}},{key:"interpolateZ",value:function(m,y,T,z){var re=y.x,ye=y.y,Le=T.x-re,Ke=z.x-re,yt=T.y-ye,Yt=z.y-ye,or=Le*Yt-Ke*yt,Nr=m.x-re,on=m.y-ye,wn=(Yt*Nr-Ke*on)/or,Ln=(-yt*Nr+Le*on)/or;return y.getZ()+wn*(T.getZ()-y.getZ())+Ln*(z.getZ()-y.getZ())}},{key:"longestSideLength",value:function(m,y,T){var z=m.distance(y),re=y.distance(T),ye=T.distance(m),Le=z;return re>Le&&(Le=re),ye>Le&&(Le=ye),Le}},{key:"circumcentreDD",value:function(m,y,T){var z=rr.valueOf(m.x).subtract(T.x),re=rr.valueOf(m.y).subtract(T.y),ye=rr.valueOf(y.x).subtract(T.x),Le=rr.valueOf(y.y).subtract(T.y),Ke=rr.determinant(z,re,ye,Le).multiply(2),yt=z.sqr().add(re.sqr()),Yt=ye.sqr().add(Le.sqr()),or=rr.determinant(re,yt,Le,Yt),Nr=rr.determinant(z,yt,ye,Yt),on=rr.valueOf(T.x).subtract(or.divide(Ke)).doubleValue(),wn=rr.valueOf(T.y).add(Nr.divide(Ke)).doubleValue();return new Oe(on,wn)}},{key:"isAcute",value:function(m,y,T){return!!Wi.isAcute(m,y,T)&&!!Wi.isAcute(y,T,m)&&!!Wi.isAcute(T,m,y)}},{key:"circumcentre",value:function(m,y,T){var z=T.x,re=T.y,ye=m.x-z,Le=m.y-re,Ke=y.x-z,yt=y.y-re,Yt=2*E.det(ye,Le,Ke,yt),or=E.det(Le,ye*ye+Le*Le,yt,Ke*Ke+yt*yt),Nr=E.det(ye,ye*ye+Le*Le,Ke,Ke*Ke+yt*yt);return new Oe(z-or/Yt,re+Nr/Yt)}},{key:"perpendicularBisector",value:function(m,y){var T=y.x-m.x,z=y.y-m.y,re=new Ta(m.x+T/2,m.y+z/2,1),ye=new Ta(m.x-z+T/2,m.y+T+z/2,1);return new Ta(re,ye)}},{key:"angleBisector",value:function(m,y,T){var z=y.distance(m),re=z/(z+y.distance(T)),ye=T.x-m.x,Le=T.y-m.y;return new Oe(m.x+re*ye,m.y+re*Le)}},{key:"area3D",value:function(m,y,T){var z=y.x-m.x,re=y.y-m.y,ye=y.getZ()-m.getZ(),Le=T.x-m.x,Ke=T.y-m.y,yt=T.getZ()-m.getZ(),Yt=re*yt-ye*Ke,or=ye*Le-z*yt,Nr=z*Ke-re*Le,on=Yt*Yt+or*or+Nr*Nr,wn=Math.sqrt(on)/2;return wn}},{key:"centroid",value:function(m,y,T){var z=(m.x+y.x+T.x)/3,re=(m.y+y.y+T.y)/3;return new Oe(z,re)}},{key:"inCentre",value:function(m,y,T){var z=y.distance(T),re=m.distance(T),ye=m.distance(y),Le=z+re+ye,Ke=(z*m.x+re*y.x+ye*T.x)/Le,yt=(z*m.y+re*y.y+ye*T.y)/Le;return new Oe(Ke,yt)}}])})(),Yl=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"addRingSide",value:function(E,m,y,T,z){if(m===0&&E.length<_i.MINIMUM_VALID_SIZE)return null;var re=T,ye=z;E.length>=_i.MINIMUM_VALID_SIZE&&_e.isCCW(E)&&(re=z,ye=T,y=st.opposite(y));var Le=this._curveBuilder.getRingCurve(E,y,m);this.addCurve(Le,re,ye)}},{key:"addRingBothSides",value:function(E,m){this.addRingSide(E,m,st.LEFT,Ie.EXTERIOR,Ie.INTERIOR),this.addRingSide(E,m,st.RIGHT,Ie.INTERIOR,Ie.EXTERIOR)}},{key:"addPoint",value:function(E){if(this._distance<=0)return null;var m=E.getCoordinates(),y=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(y,Ie.EXTERIOR,Ie.INTERIOR)}},{key:"addPolygon",value:function(E){var m=this._distance,y=st.LEFT;this._distance<0&&(m=-this._distance,y=st.RIGHT);var T=E.getExteriorRing(),z=Ni.removeRepeatedPoints(T.getCoordinates());if(this._distance<0&&this.isErodedCompletely(T,this._distance)||this._distance<=0&&z.length<3)return null;this.addRingSide(z,m,y,Ie.EXTERIOR,Ie.INTERIOR);for(var re=0;re<E.getNumInteriorRing();re++){var ye=E.getInteriorRingN(re),Le=Ni.removeRepeatedPoints(ye.getCoordinates());this._distance>0&&this.isErodedCompletely(ye,-this._distance)||this.addRingSide(Le,m,st.opposite(y),Ie.INTERIOR,Ie.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(E,m){var y=new ko(E[0],E[1],E[2]),T=y.inCentre();return Er.pointToSegment(T,y.p0,y.p1)<Math.abs(m)}},{key:"addLineString",value:function(E){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var m=Ni.removeRepeatedPoints(E.getCoordinates());if(Ni.isRing(m)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(m,this._distance);else{var y=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(y,Ie.EXTERIOR,Ie.INTERIOR)}}},{key:"addCurve",value:function(E,m,y){if(E===null||E.length<2)return null;var T=new Li(E,new mn(0,Ie.BOUNDARY,m,y));this._curveList.add(T)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(E){if(E.isEmpty())return null;if(E instanceof Ar)this.addPolygon(E);else if(E instanceof Wn)this.addLineString(E);else if(E instanceof Be)this.addPoint(E);else if(E instanceof gn)this.addCollection(E);else if(E instanceof To)this.addCollection(E);else if(E instanceof Nn)this.addCollection(E);else{if(!(E instanceof fn))throw new je(E.getGeometryType());this.addCollection(E)}}},{key:"isErodedCompletely",value:function(E,m){var y=E.getCoordinates();if(y.length<4)return m<0;if(y.length===4)return this.isTriangleErodedCompletely(y,m);var T=E.getEnvelopeInternal(),z=Math.min(T.getHeight(),T.getWidth());return m<0&&2*Math.abs(m)>z}},{key:"addCollection",value:function(E){for(var m=0;m<E.getNumGeometries();m++){var y=E.getGeometryN(m);this.add(y)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new et;var E=arguments[0],m=arguments[1],y=arguments[2];this._inputGeom=E,this._distance=m,this._curveBuilder=y}}])})(),fa=(function(){return a((function E(){i(this,E)}),[{key:"locate",value:function(E){}}])})(),wc=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,E.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new at;var m=this._parent.getGeometryN(this._index++);return m instanceof fn?(this._subcollectionIterator=new E(m),this._subcollectionIterator.next()):m}},{key:"remove",value:function(){throw new je(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[xn]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var m=arguments[0];this._parent=m,this._atStart=!0,this._index=0,this._max=m.getNumGeometries()}},{key:"isAtomic",value:function(m){return!(m instanceof fn)}}])})(),Vo=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"locate",value:function(m){return E.locate(m,this._geom)}},{key:"interfaces_",get:function(){return[fa]}}],[{key:"constructor_",value:function(){this._geom=null;var m=arguments[0];this._geom=m}},{key:"locatePointInPolygon",value:function(m,y){if(y.isEmpty())return Ie.EXTERIOR;var T=y.getExteriorRing(),z=E.locatePointInRing(m,T);if(z!==Ie.INTERIOR)return z;for(var re=0;re<y.getNumInteriorRing();re++){var ye=y.getInteriorRingN(re),Le=E.locatePointInRing(m,ye);if(Le===Ie.BOUNDARY)return Ie.BOUNDARY;if(Le===Ie.INTERIOR)return Ie.EXTERIOR}return Ie.INTERIOR}},{key:"locatePointInRing",value:function(m,y){return y.getEnvelopeInternal().intersects(m)?Un.locateInRing(m,y.getCoordinates()):Ie.EXTERIOR}},{key:"containsPointInPolygon",value:function(m,y){return Ie.EXTERIOR!==E.locatePointInPolygon(m,y)}},{key:"locateInGeometry",value:function(m,y){if(y instanceof Ar)return E.locatePointInPolygon(m,y);if(y instanceof fn)for(var T=new wc(y);T.hasNext();){var z=T.next();if(z!==y){var re=E.locateInGeometry(m,z);if(re!==Ie.EXTERIOR)return re}}return Ie.EXTERIOR}},{key:"isContained",value:function(m,y){return Ie.EXTERIOR!==E.locate(m,y)}},{key:"locate",value:function(m,y){return y.isEmpty()?Ie.EXTERIOR:y.getEnvelopeInternal().intersects(m)?E.locateInGeometry(m,y):Ie.EXTERIOR}}])})(),kl=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getNextCW",value:function(E){this.getEdges();var m=this._edgeList.indexOf(E),y=m-1;return m===0&&(y=this._edgeList.size()-1),this._edgeList.get(y)}},{key:"propagateSideLabels",value:function(E){for(var m=Ie.NONE,y=this.iterator();y.hasNext();){var T=y.next().getLabel();T.isArea(E)&&T.getLocation(E,st.LEFT)!==Ie.NONE&&(m=T.getLocation(E,st.LEFT))}if(m===Ie.NONE)return null;for(var z=m,re=this.iterator();re.hasNext();){var ye=re.next(),Le=ye.getLabel();if(Le.getLocation(E,st.ON)===Ie.NONE&&Le.setLocation(E,st.ON,z),Le.isArea(E)){var Ke=Le.getLocation(E,st.LEFT),yt=Le.getLocation(E,st.RIGHT);if(yt!==Ie.NONE){if(yt!==z)throw new Qe("side location conflict",ye.getCoordinate());Ke===Ie.NONE&&we.shouldNeverReachHere("found single null side (at "+ye.getCoordinate()+")"),z=Ke}else we.isTrue(Le.getLocation(E,st.LEFT)===Ie.NONE,"found single null side"),Le.setLocation(E,st.RIGHT,z),Le.setLocation(E,st.LEFT,z)}}}},{key:"getCoordinate",value:function(){var E=this.iterator();return E.hasNext()?E.next().getCoordinate():null}},{key:"print",value:function(E){Kt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"isAreaLabelsConsistent",value:function(E){return this.computeEdgeEndLabels(E.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(E){var m=this.getEdges();if(m.size()<=0)return!0;var y=m.size()-1,T=m.get(y).getLabel().getLocation(E,st.LEFT);we.isTrue(T!==Ie.NONE,"Found unlabelled area edge");for(var z=T,re=this.iterator();re.hasNext();){var ye=re.next().getLabel();we.isTrue(ye.isArea(E),"Found non-area edge");var Le=ye.getLocation(E,st.LEFT),Ke=ye.getLocation(E,st.RIGHT);if(Le===Ke||Ke!==z)return!1;z=Le}return!0}},{key:"findIndex",value:function(E){this.iterator();for(var m=0;m<this._edgeList.size();m++)if(this._edgeList.get(m)===E)return m;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new et(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(E,m,y){return this._ptInAreaLocation[E]===Ie.NONE&&(this._ptInAreaLocation[E]=Vo.locate(m,y[E].getGeometry())),this._ptInAreaLocation[E]}},{key:"toString",value:function(){var E=new Jt;E.append("EdgeEndStar:   "+this.getCoordinate()),E.append(`
`);for(var m=this.iterator();m.hasNext();){var y=m.next();E.append(y),E.append(`
`)}return E.toString()}},{key:"computeEdgeEndLabels",value:function(E){for(var m=this.iterator();m.hasNext();)m.next().computeLabel(E)}},{key:"computeLabelling",value:function(E){this.computeEdgeEndLabels(E[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var m=[!1,!1],y=this.iterator();y.hasNext();)for(var T=y.next().getLabel(),z=0;z<2;z++)T.isLine(z)&&T.getLocation(z)===Ie.BOUNDARY&&(m[z]=!0);for(var re=this.iterator();re.hasNext();)for(var ye=re.next(),Le=ye.getLabel(),Ke=0;Ke<2;Ke++)if(Le.isAnyNull(Ke)){var yt=Ie.NONE;if(m[Ke])yt=Ie.EXTERIOR;else{var Yt=ye.getCoordinate();yt=this.getLocation(Ke,Yt,E)}Le.setAllLocationsIfNull(Ke,yt)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(E,m){this._edgeMap.put(E,m),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new En,this._edgeList=null,this._ptInAreaLocation=[Ie.NONE,Ie.NONE]}}])})(),La=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var y=null,T=null,z=this._SCANNING_FOR_INCOMING,re=0;re<this._resultAreaEdgeList.size();re++){var ye=this._resultAreaEdgeList.get(re),Le=ye.getSym();if(ye.getLabel().isArea())switch(y===null&&ye.isInResult()&&(y=ye),z){case this._SCANNING_FOR_INCOMING:if(!Le.isInResult())continue;T=Le,z=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!ye.isInResult())continue;T.setNext(ye),z=this._SCANNING_FOR_INCOMING}}if(z===this._LINKING_TO_OUTGOING){if(y===null)throw new Qe("no outgoing dirEdge found",this.getCoordinate());we.isTrue(y.isInResult(),"unable to link last incoming dirEdge"),T.setNext(y)}}},{key:"insert",value:function(y){var T=y;this.insertEdgeEnd(T,T)}},{key:"getRightmostEdge",value:function(){var y=this.getEdges(),T=y.size();if(T<1)return null;var z=y.get(0);if(T===1)return z;var re=y.get(T-1),ye=z.getQuadrant(),Le=re.getQuadrant();return jn.isNorthern(ye)&&jn.isNorthern(Le)?z:jn.isNorthern(ye)||jn.isNorthern(Le)?z.getDy()!==0?z:re.getDy()!==0?re:(we.shouldNeverReachHere("found two horizontal edges incident on node"),null):re}},{key:"print",value:function(y){Kt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var T=this.iterator();T.hasNext();){var z=T.next();y.print("out "),z.print(y),y.println(),y.print("in "),z.getSym().print(y),y.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new et;for(var y=this.iterator();y.hasNext();){var T=y.next();(T.isInResult()||T.getSym().isInResult())&&this._resultAreaEdgeList.add(T)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(y){for(var T=this.iterator();T.hasNext();){var z=T.next().getLabel();z.setAllLocationsIfNull(0,y.getLocation(0)),z.setAllLocationsIfNull(1,y.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var y=null,T=null,z=this._edgeList.size()-1;z>=0;z--){var re=this._edgeList.get(z),ye=re.getSym();T===null&&(T=ye),y!==null&&ye.setNext(y),y=re}T.setNext(y)}},{key:"computeDepths",value:function(){if(arguments.length===1){var y=arguments[0],T=this.findIndex(y),z=y.getDepth(st.LEFT),re=y.getDepth(st.RIGHT),ye=this.computeDepths(T+1,this._edgeList.size(),z);if(this.computeDepths(0,T,ye)!==re)throw new Qe("depth mismatch at "+y.getCoordinate())}else if(arguments.length===3){for(var Le=arguments[1],Ke=arguments[2],yt=arguments[0];yt<Le;yt++){var Yt=this._edgeList.get(yt);Yt.setEdgeDepths(st.RIGHT,Ke),Ke=Yt.getDepth(st.LEFT)}return Ke}}},{key:"mergeSymLabels",value:function(){for(var y=this.iterator();y.hasNext();){var T=y.next();T.getLabel().merge(T.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(y){for(var T=null,z=null,re=this._SCANNING_FOR_INCOMING,ye=this._resultAreaEdgeList.size()-1;ye>=0;ye--){var Le=this._resultAreaEdgeList.get(ye),Ke=Le.getSym();switch(T===null&&Le.getEdgeRing()===y&&(T=Le),re){case this._SCANNING_FOR_INCOMING:if(Ke.getEdgeRing()!==y)continue;z=Ke,re=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(Le.getEdgeRing()!==y)continue;z.setNextMin(Le),re=this._SCANNING_FOR_INCOMING}}re===this._LINKING_TO_OUTGOING&&(we.isTrue(T!==null,"found null for first outgoing dirEdge"),we.isTrue(T.getEdgeRing()===y,"unable to link last incoming dirEdge"),z.setNextMin(T))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var y=0,T=this.iterator();T.hasNext();)T.next().isInResult()&&y++;return y}if(arguments.length===1){for(var z=arguments[0],re=0,ye=this.iterator();ye.hasNext();)ye.next().getEdgeRing()===z&&re++;return re}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var y=Ie.NONE,T=this.iterator();T.hasNext();){var z=T.next(),re=z.getSym();if(!z.isLineEdge()){if(z.isInResult()){y=Ie.INTERIOR;break}if(re.isInResult()){y=Ie.EXTERIOR;break}}}if(y===Ie.NONE)return null;for(var ye=y,Le=this.iterator();Le.hasNext();){var Ke=Le.next(),yt=Ke.getSym();Ke.isLineEdge()?Ke.getEdge().setCovered(ye===Ie.INTERIOR):(Ke.isInResult()&&(ye=Ie.EXTERIOR),yt.isInResult()&&(ye=Ie.INTERIOR))}}},{key:"computeLabelling",value:function(y){P(m,"computeLabelling",this,1).call(this,y),this._label=new mn(Ie.NONE);for(var T=this.iterator();T.hasNext();)for(var z=T.next().getEdge().getLabel(),re=0;re<2;re++){var ye=z.getLocation(re);ye!==Ie.INTERIOR&&ye!==Ie.BOUNDARY||this._label.setLocation(re,Ie.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])})(kl),ps=(function(E){function m(){return i(this,m),n(this,m)}return v(m,E),a(m,[{key:"createNode",value:function(y){return new ba(y,new La)}}])})(Io),fu=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"compareTo",value:function(m){var y=m;return E.compareOriented(this._pts,this._orientation,y._pts,y._orientation)}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var m=arguments[0];this._pts=m,this._orientation=E.orientation(m)}},{key:"orientation",value:function(m){return Ni.increasingDirection(m)===1}},{key:"compareOriented",value:function(m,y,T,z){for(var re=y?1:-1,ye=z?1:-1,Le=y?m.length:-1,Ke=z?T.length:-1,yt=y?0:m.length-1,Yt=z?0:T.length-1;;){var or=m[yt].compareTo(T[Yt]);if(or!==0)return or;var Nr=(yt+=re)===Le,on=(Yt+=ye)===Ke;if(Nr&&!on)return-1;if(!Nr&&on)return 1;if(Nr&&on)return 0}}}])})(),hu=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"print",value:function(E){E.print("MULTILINESTRING ( ");for(var m=0;m<this._edges.size();m++){var y=this._edges.get(m);m>0&&E.print(","),E.print("(");for(var T=y.getCoordinates(),z=0;z<T.length;z++)z>0&&E.print(","),E.print(T[z].x+" "+T[z].y);E.println(")")}E.print(")  ")}},{key:"addAll",value:function(E){for(var m=E.iterator();m.hasNext();)this.add(m.next())}},{key:"findEdgeIndex",value:function(E){for(var m=0;m<this._edges.size();m++)if(this._edges.get(m).equals(E))return m;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(E){return this._edges.get(E)}},{key:"findEqualEdge",value:function(E){var m=new fu(E.getCoordinates());return this._ocaMap.get(m)}},{key:"add",value:function(E){this._edges.add(E);var m=new fu(E.getCoordinates());this._ocaMap.put(m,E)}}],[{key:"constructor_",value:function(){this._edges=new et,this._ocaMap=new En}}])})(),Ks=(function(){return a((function E(){i(this,E)}),[{key:"processIntersections",value:function(E,m,y,T){}},{key:"isDone",value:function(){}}])})(),ll=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isTrivialIntersection",value:function(m,y,T,z){if(m===T&&this._li.getIntersectionNum()===1){if(E.isAdjacentSegments(y,z))return!0;if(m.isClosed()){var re=m.size()-1;if(y===0&&z===re||z===0&&y===re)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(m,y,T,z){if(m===T&&y===z)return null;this.numTests++;var re=m.getCoordinates()[y],ye=m.getCoordinates()[y+1],Le=T.getCoordinates()[z],Ke=T.getCoordinates()[z+1];this._li.computeIntersection(re,ye,Le,Ke),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(m,y,T,z)||(this._hasIntersection=!0,m.addIntersections(this._li,y,0),T.addIntersections(this._li,z,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Ks]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var m=arguments[0];this._li=m}},{key:"isAdjacentSegments",value:function(m,y){return Math.abs(m-y)===1}}])})(),lo=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(E){E.print(this.coord),E.print(" seg # = "+this.segmentIndex),E.println(" dist = "+this.dist)}},{key:"compareTo",value:function(E){var m=E;return this.compare(m.segmentIndex,m.dist)}},{key:"isEndPoint",value:function(E){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===E}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(E,m){return this.segmentIndex<E?-1:this.segmentIndex>E?1:this.dist<m?-1:this.dist>m?1:0}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var E=arguments[0],m=arguments[1],y=arguments[2];this.coord=new Oe(E),this.segmentIndex=m,this.dist=y}}])})(),Ya=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"print",value:function(E){E.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(E){this.addEndpoints();for(var m=this.iterator(),y=m.next();m.hasNext();){var T=m.next(),z=this.createSplitEdge(y,T);E.add(z),y=T}}},{key:"addEndpoints",value:function(){var E=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[E],E,0)}},{key:"createSplitEdge",value:function(E,m){var y=m.segmentIndex-E.segmentIndex+2,T=this.edge.pts[m.segmentIndex],z=m.dist>0||!m.coord.equals2D(T);z||y--;var re=new Array(y).fill(null),ye=0;re[ye++]=new Oe(E.coord);for(var Le=E.segmentIndex+1;Le<=m.segmentIndex;Le++)re[ye++]=this.edge.pts[Le];return z&&(re[ye]=m.coord),new ia(re,new mn(this.edge._label))}},{key:"add",value:function(E,m,y){var T=new lo(E,m,y),z=this._nodeMap.get(T);return z!==null?z:(this._nodeMap.put(T,T),T)}},{key:"isIntersection",value:function(E){for(var m=this.iterator();m.hasNext();)if(m.next().coord.equals(E))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new En,this.edge=null;var E=arguments[0];this.edge=E}}])})(),ms=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])||E.isTrue(this._matrix[Ie.INTERIOR][Ie.BOUNDARY])||E.isTrue(this._matrix[Ie.BOUNDARY][Ie.INTERIOR])||E.isTrue(this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]))&&this._matrix[Ie.EXTERIOR][Ie.INTERIOR]===nr.FALSE&&this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]===nr.FALSE}},{key:"isCoveredBy",value:function(){return(E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])||E.isTrue(this._matrix[Ie.INTERIOR][Ie.BOUNDARY])||E.isTrue(this._matrix[Ie.BOUNDARY][Ie.INTERIOR])||E.isTrue(this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]))&&this._matrix[Ie.INTERIOR][Ie.EXTERIOR]===nr.FALSE&&this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]===nr.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var m=arguments[0],y=0;y<m.length;y++){var T=Math.trunc(y/3),z=y%3;this._matrix[T][z]=nr.toDimensionValue(m.charAt(y))}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Le=arguments[2];this._matrix[re][ye]=Le}}},{key:"isContains",value:function(){return E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&this._matrix[Ie.EXTERIOR][Ie.INTERIOR]===nr.FALSE&&this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]===nr.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var m=arguments[0],y=0;y<m.length;y++){var T=Math.trunc(y/3),z=y%3;this.setAtLeast(T,z,nr.toDimensionValue(m.charAt(y)))}else if(arguments.length===3){var re=arguments[0],ye=arguments[1],Le=arguments[2];this._matrix[re][ye]<Le&&(this._matrix[re][ye]=Le)}}},{key:"setAtLeastIfValid",value:function(m,y,T){m>=0&&y>=0&&this.setAtLeast(m,y,T)}},{key:"isWithin",value:function(){return E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&this._matrix[Ie.INTERIOR][Ie.EXTERIOR]===nr.FALSE&&this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]===nr.FALSE}},{key:"isTouches",value:function(m,y){return m>y?this.isTouches(y,m):(m===nr.A&&y===nr.A||m===nr.L&&y===nr.L||m===nr.L&&y===nr.A||m===nr.P&&y===nr.A||m===nr.P&&y===nr.L)&&this._matrix[Ie.INTERIOR][Ie.INTERIOR]===nr.FALSE&&(E.isTrue(this._matrix[Ie.INTERIOR][Ie.BOUNDARY])||E.isTrue(this._matrix[Ie.BOUNDARY][Ie.INTERIOR])||E.isTrue(this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]))}},{key:"isOverlaps",value:function(m,y){return m===nr.P&&y===nr.P||m===nr.A&&y===nr.A?E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&E.isTrue(this._matrix[Ie.INTERIOR][Ie.EXTERIOR])&&E.isTrue(this._matrix[Ie.EXTERIOR][Ie.INTERIOR]):m===nr.L&&y===nr.L&&this._matrix[Ie.INTERIOR][Ie.INTERIOR]===1&&E.isTrue(this._matrix[Ie.INTERIOR][Ie.EXTERIOR])&&E.isTrue(this._matrix[Ie.EXTERIOR][Ie.INTERIOR])}},{key:"isEquals",value:function(m,y){return m===y&&E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&this._matrix[Ie.INTERIOR][Ie.EXTERIOR]===nr.FALSE&&this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]===nr.FALSE&&this._matrix[Ie.EXTERIOR][Ie.INTERIOR]===nr.FALSE&&this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]===nr.FALSE}},{key:"toString",value:function(){for(var m=new Mi("123456789"),y=0;y<3;y++)for(var T=0;T<3;T++)m.setCharAt(3*y+T,nr.toDimensionSymbol(this._matrix[y][T]));return m.toString()}},{key:"setAll",value:function(m){for(var y=0;y<3;y++)for(var T=0;T<3;T++)this._matrix[y][T]=m}},{key:"get",value:function(m,y){return this._matrix[m][y]}},{key:"transpose",value:function(){var m=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=m,m=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=m,m=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=m,this}},{key:"matches",value:function(m){if(m.length!==9)throw new $("Should be length 9: "+m);for(var y=0;y<3;y++)for(var T=0;T<3;T++)if(!E.matches(this._matrix[y][T],m.charAt(3*y+T)))return!1;return!0}},{key:"add",value:function(m){for(var y=0;y<3;y++)for(var T=0;T<3;T++)this.setAtLeast(y,T,m.get(y,T))}},{key:"isDisjoint",value:function(){return this._matrix[Ie.INTERIOR][Ie.INTERIOR]===nr.FALSE&&this._matrix[Ie.INTERIOR][Ie.BOUNDARY]===nr.FALSE&&this._matrix[Ie.BOUNDARY][Ie.INTERIOR]===nr.FALSE&&this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]===nr.FALSE}},{key:"isCrosses",value:function(m,y){return m===nr.P&&y===nr.L||m===nr.P&&y===nr.A||m===nr.L&&y===nr.A?E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&E.isTrue(this._matrix[Ie.INTERIOR][Ie.EXTERIOR]):m===nr.L&&y===nr.P||m===nr.A&&y===nr.P||m===nr.A&&y===nr.L?E.isTrue(this._matrix[Ie.INTERIOR][Ie.INTERIOR])&&E.isTrue(this._matrix[Ie.EXTERIOR][Ie.INTERIOR]):m===nr.L&&y===nr.L&&this._matrix[Ie.INTERIOR][Ie.INTERIOR]===0}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(nr.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var m=arguments[0];E.constructor_.call(this),this.set(m)}else if(arguments[0]instanceof E){var y=arguments[0];E.constructor_.call(this),this._matrix[Ie.INTERIOR][Ie.INTERIOR]=y._matrix[Ie.INTERIOR][Ie.INTERIOR],this._matrix[Ie.INTERIOR][Ie.BOUNDARY]=y._matrix[Ie.INTERIOR][Ie.BOUNDARY],this._matrix[Ie.INTERIOR][Ie.EXTERIOR]=y._matrix[Ie.INTERIOR][Ie.EXTERIOR],this._matrix[Ie.BOUNDARY][Ie.INTERIOR]=y._matrix[Ie.BOUNDARY][Ie.INTERIOR],this._matrix[Ie.BOUNDARY][Ie.BOUNDARY]=y._matrix[Ie.BOUNDARY][Ie.BOUNDARY],this._matrix[Ie.BOUNDARY][Ie.EXTERIOR]=y._matrix[Ie.BOUNDARY][Ie.EXTERIOR],this._matrix[Ie.EXTERIOR][Ie.INTERIOR]=y._matrix[Ie.EXTERIOR][Ie.INTERIOR],this._matrix[Ie.EXTERIOR][Ie.BOUNDARY]=y._matrix[Ie.EXTERIOR][Ie.BOUNDARY],this._matrix[Ie.EXTERIOR][Ie.EXTERIOR]=y._matrix[Ie.EXTERIOR][Ie.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var m=arguments[0],y=arguments[1];return y===nr.SYM_DONTCARE||y===nr.SYM_TRUE&&(m>=0||m===nr.TRUE)||y===nr.SYM_FALSE&&m===nr.FALSE||y===nr.SYM_P&&m===nr.P||y===nr.SYM_L&&m===nr.L||y===nr.SYM_A&&m===nr.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var T=arguments[1];return new E(arguments[0]).matches(T)}}},{key:"isTrue",value:function(m){return m>=0||m===nr.TRUE}}])})(),no=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(m){return m===null||m.length===0?null:(this.ensureCapacity(this._size+m.length),Kt.arraycopy(m,0,this._data,this._size,m.length),void(this._size+=m.length))}},{key:"ensureCapacity",value:function(m){if(m<=this._data.length)return null;var y=Math.max(m,2*this._data.length);this._data=mt.copyOf(this._data,y)}},{key:"toArray",value:function(){var m=new Array(this._size).fill(null);return Kt.arraycopy(this._data,0,m,0,this._size),m}},{key:"add",value:function(m){this.ensureCapacity(this._size+1),this._data[this._size]=m,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)E.constructor_.call(this,10);else if(arguments.length===1){var m=arguments[0];this._data=new Array(m).fill(null)}}}])})(),ul=(function(){function E(){i(this,E)}return a(E,[{key:"getChainStartIndices",value:function(m){var y=0,T=new no(Math.trunc(m.length/2));T.add(y);do{var z=this.findChainEnd(m,y);T.add(z),y=z}while(y<m.length-1);return T.toArray()}},{key:"findChainEnd",value:function(m,y){for(var T=jn.quadrant(m[y],m[y+1]),z=y+1;z<m.length&&jn.quadrant(m[z-1],m[z])===T;)z++;return z-1}},{key:"OLDgetChainStartIndices",value:function(m){var y=0,T=new et;T.add(y);do{var z=this.findChainEnd(m,y);T.add(z),y=z}while(y<m.length-1);return E.toIntArray(T)}}],[{key:"toIntArray",value:function(m){for(var y=new Array(m.size()).fill(null),T=0;T<y.length;T++)y[T]=m.get(T).intValue();return y}}])})(),Uo=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(E){var m=this.pts[this.startIndex[E]].x,y=this.pts[this.startIndex[E+1]].x;return m>y?m:y}},{key:"getMinX",value:function(E){var m=this.pts[this.startIndex[E]].x,y=this.pts[this.startIndex[E+1]].x;return m<y?m:y}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var E=arguments[0],m=arguments[1],y=arguments[2],T=arguments[3];this.computeIntersectsForChain(this.startIndex[E],this.startIndex[E+1],m,m.startIndex[y],m.startIndex[y+1],T)}else if(arguments.length===6){var z=arguments[0],re=arguments[1],ye=arguments[2],Le=arguments[3],Ke=arguments[4],yt=arguments[5];if(re-z==1&&Ke-Le==1)return yt.addIntersections(this.e,z,ye.e,Le),null;if(!this.overlaps(z,re,ye,Le,Ke))return null;var Yt=Math.trunc((z+re)/2),or=Math.trunc((Le+Ke)/2);z<Yt&&(Le<or&&this.computeIntersectsForChain(z,Yt,ye,Le,or,yt),or<Ke&&this.computeIntersectsForChain(z,Yt,ye,or,Ke,yt)),Yt<re&&(Le<or&&this.computeIntersectsForChain(Yt,re,ye,Le,or,yt),or<Ke&&this.computeIntersectsForChain(Yt,re,ye,or,Ke,yt))}}},{key:"overlaps",value:function(E,m,y,T,z){return Ye.intersects(this.pts[E],this.pts[m],y.pts[T],y.pts[z])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(E,m){for(var y=0;y<this.startIndex.length-1;y++)for(var T=0;T<E.startIndex.length-1;T++)this.computeIntersectsForChain(y,E,T,m)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var E=arguments[0];this.e=E,this.pts=E.getCoordinates();var m=new ul;this.startIndex=m.getChainStartIndices(this.pts)}}])})(),cl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getDepth",value:function(m,y){return this._depth[m][y]}},{key:"setDepth",value:function(m,y,T){this._depth[m][y]=T}},{key:"isNull",value:function(){if(arguments.length===0){for(var m=0;m<2;m++)for(var y=0;y<3;y++)if(this._depth[m][y]!==E.NULL_VALUE)return!1;return!0}if(arguments.length===1){var T=arguments[0];return this._depth[T][1]===E.NULL_VALUE}if(arguments.length===2){var z=arguments[0],re=arguments[1];return this._depth[z][re]===E.NULL_VALUE}}},{key:"normalize",value:function(){for(var m=0;m<2;m++)if(!this.isNull(m)){var y=this._depth[m][1];this._depth[m][2]<y&&(y=this._depth[m][2]),y<0&&(y=0);for(var T=1;T<3;T++){var z=0;this._depth[m][T]>y&&(z=1),this._depth[m][T]=z}}}},{key:"getDelta",value:function(m){return this._depth[m][st.RIGHT]-this._depth[m][st.LEFT]}},{key:"getLocation",value:function(m,y){return this._depth[m][y]<=0?Ie.EXTERIOR:Ie.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var m=arguments[0],y=0;y<2;y++)for(var T=1;T<3;T++){var z=m.getLocation(y,T);z!==Ie.EXTERIOR&&z!==Ie.INTERIOR||(this.isNull(y,T)?this._depth[y][T]=E.depthAtLocation(z):this._depth[y][T]+=E.depthAtLocation(z))}else if(arguments.length===3){var re=arguments[0],ye=arguments[1];arguments[2]===Ie.INTERIOR&&this._depth[re][ye]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var m=0;m<2;m++)for(var y=0;y<3;y++)this._depth[m][y]=E.NULL_VALUE}},{key:"depthAtLocation",value:function(m){return m===Ie.EXTERIOR?0:m===Ie.INTERIOR?1:E.NULL_VALUE}}])})();cl.NULL_VALUE=-1;var ia=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var y=new Array(2).fill(null);return y[0]=this.pts[0],y[1]=this.pts[1],new m(y,mn.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(y){this._isIsolated=y}},{key:"setName",value:function(y){this._name=y}},{key:"equals",value:function(y){if(!(y instanceof m))return!1;var T=y;if(this.pts.length!==T.pts.length)return!1;for(var z=!0,re=!0,ye=this.pts.length,Le=0;Le<this.pts.length;Le++)if(this.pts[Le].equals2D(T.pts[Le])||(z=!1),this.pts[Le].equals2D(T.pts[--ye])||(re=!1),!z&&!re)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var y=arguments[0];return this.pts[y]}}},{key:"print",value:function(y){y.print("edge "+this._name+": "),y.print("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&y.print(","),y.print(this.pts[T].x+" "+this.pts[T].y);y.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(y){m.updateIM(this._label,y)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(y){y.print("edge "+this._name+": ");for(var T=this.pts.length-1;T>=0;T--)y.print(this.pts[T]+" ");y.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Uo(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Ye;for(var y=0;y<this.pts.length;y++)this._env.expandToInclude(this.pts[y])}return this._env}},{key:"addIntersection",value:function(y,T,z,re){var ye=new Oe(y.getIntersection(re)),Le=T,Ke=y.getEdgeDistance(z,re),yt=Le+1;if(yt<this.pts.length){var Yt=this.pts[yt];ye.equals2D(Yt)&&(Le=yt,Ke=0)}this.eiList.add(ye,Le,Ke)}},{key:"toString",value:function(){var y=new Mi;y.append("edge "+this._name+": "),y.append("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&y.append(","),y.append(this.pts[T].x+" "+this.pts[T].y);return y.append(")  "+this._label+" "+this._depthDelta),y.toString()}},{key:"isPointwiseEqual",value:function(y){if(this.pts.length!==y.pts.length)return!1;for(var T=0;T<this.pts.length;T++)if(!this.pts[T].equals2D(y.pts[T]))return!1;return!0}},{key:"setDepthDelta",value:function(y){this._depthDelta=y}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(y,T,z){for(var re=0;re<y.getIntersectionNum();re++)this.addIntersection(y,T,z,re)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Ya(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new cl,this._depthDelta=0,arguments.length===1){var y=arguments[0];m.constructor_.call(this,y,null)}else if(arguments.length===2){var T=arguments[0],z=arguments[1];this.pts=T,this._label=z}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof ms&&arguments[0]instanceof mn))return P(m,"updateIM",this).apply(this,arguments);var y=arguments[0],T=arguments[1];T.setAtLeastIfValid(y.getLocation(0,st.ON),y.getLocation(1,st.ON),1),y.isArea()&&(T.setAtLeastIfValid(y.getLocation(0,st.LEFT),y.getLocation(1,st.LEFT),2),T.setAtLeastIfValid(y.getLocation(0,st.RIGHT),y.getLocation(1,st.RIGHT),2))}}])})(On),Zl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"setWorkingPrecisionModel",value:function(m){this._workingPrecisionModel=m}},{key:"insertUniqueEdge",value:function(m){var y=this._edgeList.findEqualEdge(m);if(y!==null){var T=y.getLabel(),z=m.getLabel();y.isPointwiseEqual(m)||(z=new mn(m.getLabel())).flip(),T.merge(z);var re=E.depthDelta(z),ye=y.getDepthDelta()+re;y.setDepthDelta(ye)}else this._edgeList.add(m),m.setDepthDelta(E.depthDelta(m.getLabel()))}},{key:"buildSubgraphs",value:function(m,y){for(var T=new et,z=m.iterator();z.hasNext();){var re=z.next(),ye=re.getRightmostCoordinate(),Le=new Xa(T).getDepth(ye);re.computeDepth(Le),re.findResultEdges(),T.add(re),y.add(re.getDirectedEdges(),re.getNodes())}}},{key:"createSubgraphs",value:function(m){for(var y=new et,T=m.getNodes().iterator();T.hasNext();){var z=T.next();if(!z.isVisited()){var re=new vt;re.create(z),y.add(re)}}return Wa.sort(y,Wa.reverseOrder()),y}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(m){if(this._workingNoder!==null)return this._workingNoder;var y=new Ns,T=new Sr;return T.setPrecisionModel(m),y.setSegmentIntersector(new ll(T)),y}},{key:"buffer",value:function(m,y){var T=this._workingPrecisionModel;T===null&&(T=m.getPrecisionModel()),this._geomFact=m.getFactory();var z=new Il(T,this._bufParams),re=new Yl(m,y,z).getCurves();if(re.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(re,T),this._graph=new Rs(new ps),this._graph.addEdges(this._edgeList.getEdges());var ye=this.createSubgraphs(this._graph),Le=new Pl(this._geomFact);this.buildSubgraphs(ye,Le);var Ke=Le.getPolygons();return Ke.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Ke)}},{key:"computeNodedEdges",value:function(m,y){var T=this.getNoder(y);T.computeNodes(m);for(var z=T.getNodedSubstrings().iterator();z.hasNext();){var re=z.next(),ye=re.getCoordinates();if(ye.length!==2||!ye[0].equals2D(ye[1])){var Le=re.getData(),Ke=new ia(re.getCoordinates(),new mn(Le));this.insertUniqueEdge(Ke)}}}},{key:"setNoder",value:function(m){this._workingNoder=m}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new hu;var m=arguments[0];this._bufParams=m}},{key:"depthDelta",value:function(m){var y=m.getLocation(0,st.LEFT),T=m.getLocation(0,st.RIGHT);return y===Ie.INTERIOR&&T===Ie.EXTERIOR?1:y===Ie.EXTERIOR&&T===Ie.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(m){for(var y=new go,T=new et;m.hasNext();){var z=m.next(),re=y.createLineString(z.getCoordinates());T.add(re)}return y.buildGeometry(T)}}])})(),Os=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"rescale",value:function(){if(pr(arguments[0],It))for(var m=arguments[0].iterator();m.hasNext();){var y=m.next();this.rescale(y.getCoordinates())}else if(arguments[0]instanceof Array){for(var T=arguments[0],z=0;z<T.length;z++)T[z].x=T[z].x/this._scaleFactor+this._offsetX,T[z].y=T[z].y/this._scaleFactor+this._offsetY;T.length===2&&T[0].equals2D(T[1])&&Kt.out.println(T)}}},{key:"scale",value:function(){if(pr(arguments[0],It)){for(var m=arguments[0],y=new et(m.size()),T=m.iterator();T.hasNext();){var z=T.next();y.add(new Li(this.scale(z.getCoordinates()),z.getData()))}return y}if(arguments[0]instanceof Array){for(var re=arguments[0],ye=new Array(re.length).fill(null),Le=0;Le<re.length;Le++)ye[Le]=new Oe(Math.round((re[Le].x-this._offsetX)*this._scaleFactor),Math.round((re[Le].y-this._offsetY)*this._scaleFactor),re[Le].getZ());return Ni.removeRepeatedPoints(ye)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var m=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(m),m}},{key:"computeNodes",value:function(m){var y=m;this._isScaled&&(y=this.scale(m)),this._noder.computeNodes(y)}},{key:"interfaces_",get:function(){return[Fa]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var m=arguments[0],y=arguments[1];E.constructor_.call(this,m,y,0,0)}else if(arguments.length===4){var T=arguments[0],z=arguments[1];this._noder=T,this._scaleFactor=z,this._isScaled=!this.isIntegerPrecision()}}}])})(),gs=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();){var y=m.next().getCoordinates();this.checkEndPtVertexIntersections(y[0],this._segStrings),this.checkEndPtVertexIntersections(y[y.length-1],this._segStrings)}else if(arguments.length===2){for(var T=arguments[0],z=arguments[1].iterator();z.hasNext();)for(var re=z.next().getCoordinates(),ye=1;ye<re.length-1;ye++)if(re[ye].equals(T))throw new fe("found endpt/interior pt intersection at index "+ye+" :pt "+T)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();)for(var y=m.next(),T=this._segStrings.iterator();T.hasNext();){var z=T.next();this.checkInteriorIntersections(y,z)}else if(arguments.length===2)for(var re=arguments[0],ye=arguments[1],Le=re.getCoordinates(),Ke=ye.getCoordinates(),yt=0;yt<Le.length-1;yt++)for(var Yt=0;Yt<Ke.length-1;Yt++)this.checkInteriorIntersections(re,yt,ye,Yt);else if(arguments.length===4){var or=arguments[0],Nr=arguments[1],on=arguments[2],wn=arguments[3];if(or===on&&Nr===wn)return null;var Ln=or.getCoordinates()[Nr],bn=or.getCoordinates()[Nr+1],Tn=on.getCoordinates()[wn],qi=on.getCoordinates()[wn+1];if(this._li.computeIntersection(Ln,bn,Tn,qi),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Ln,bn)||this.hasInteriorIntersection(this._li,Tn,qi)))throw new fe("found non-noded intersection at "+Ln+"-"+bn+" and "+Tn+"-"+qi)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();){var y=m.next();this.checkCollapses(y)}else if(arguments.length===1)for(var T=arguments[0].getCoordinates(),z=0;z<T.length-2;z++)this.checkCollapse(T[z],T[z+1],T[z+2])}},{key:"hasInteriorIntersection",value:function(m,y,T){for(var z=0;z<m.getIntersectionNum();z++){var re=m.getIntersection(z);if(!re.equals(y)&&!re.equals(T))return!0}return!1}},{key:"checkCollapse",value:function(m,y,T){if(m.equals(T))throw new fe("found non-noded collapse at "+E.fact.createLineString([m,y,T]))}}],[{key:"constructor_",value:function(){this._li=new Sr,this._segStrings=null;var m=arguments[0];this._segStrings=m}}])})();gs.fact=new go;var dl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"intersectsScaled",value:function(m,y){var T=Math.min(m.x,y.x),z=Math.max(m.x,y.x),re=Math.min(m.y,y.y),ye=Math.max(m.y,y.y),Le=this._maxx<T||this._minx>z||this._maxy<re||this._miny>ye;if(Le)return!1;var Ke=this.intersectsToleranceSquare(m,y);return we.isTrue(!(Le&&Ke),"Found bad envelope test"),Ke}},{key:"initCorners",value:function(m){var y=.5;this._minx=m.x-y,this._maxx=m.x+y,this._miny=m.y-y,this._maxy=m.y+y,this._corner[0]=new Oe(this._maxx,this._maxy),this._corner[1]=new Oe(this._minx,this._maxy),this._corner[2]=new Oe(this._minx,this._miny),this._corner[3]=new Oe(this._maxx,this._miny)}},{key:"intersects",value:function(m,y){return this._scaleFactor===1?this.intersectsScaled(m,y):(this.copyScaled(m,this._p0Scaled),this.copyScaled(y,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(m){return Math.round(m*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(m,y){y.x=this.scale(m.x),y.y=this.scale(m.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var m=E.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ye(this._originalPt.x-m,this._originalPt.x+m,this._originalPt.y-m,this._originalPt.y+m)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(m,y){return this._li.computeIntersection(m,y,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,y,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,y,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,y,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(m,y){var T=!1,z=!1;return this._li.computeIntersection(m,y,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(m,y,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(T=!0),this._li.computeIntersection(m,y,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(z=!0),this._li.computeIntersection(m,y,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!T||!z)||!!m.equals(this._pt)||!!y.equals(this._pt))))}},{key:"addSnappedNode",value:function(m,y){var T=m.getCoordinate(y),z=m.getCoordinate(y+1);return!!this.intersects(T,z)&&(m.addIntersection(this.getCoordinate(),y),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var m=arguments[0],y=arguments[1],T=arguments[2];if(this._originalPt=m,this._pt=m,this._scaleFactor=y,this._li=T,y<=0)throw new $("Scale factor must be non-zero");y!==1&&(this._pt=new Oe(this.scale(m.x),this.scale(m.y)),this._p0Scaled=new Oe,this._p1Scaled=new Oe),this.initCorners(this._pt)}}])})();dl.SAFE_ENV_EXPANSION_FACTOR=.75;var Kl=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var E=arguments[1];arguments[0].getLineSegment(E,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Ii}}])})(),ys=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"snap",value:function(){if(arguments.length===1){var E=arguments[0];return this.snap(E,null,-1)}if(arguments.length===3){var m=arguments[0],y=arguments[1],T=arguments[2],z=m.getSafeEnvelope(),re=new Al(m,y,T);return this._index.query(z,new((function(){return a((function ye(){i(this,ye)}),[{key:"interfaces_",get:function(){return[le]}},{key:"visitItem",value:function(ye){ye.select(z,re)}}])})())),re.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var E=arguments[0];this._index=E}}])})(),Al=(function(E){function m(){var y;return i(this,m),y=n(this,m),m.constructor_.apply(y,arguments),y}return v(m,E),a(m,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Ea))return P(m,"select",this,1).apply(this,arguments);var y=arguments[1],T=arguments[0].getContext();if(this._parentEdge===T&&(y===this._hotPixelVertexIndex||y+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(T,y)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var y=arguments[0],T=arguments[1],z=arguments[2];this._hotPixel=y,this._parentEdge=T,this._hotPixelVertexIndex=z}}])})(Kl);ys.HotPixelSnapAction=Al;var fl=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"processIntersections",value:function(E,m,y,T){if(E===y&&m===T)return null;var z=E.getCoordinates()[m],re=E.getCoordinates()[m+1],ye=y.getCoordinates()[T],Le=y.getCoordinates()[T+1];if(this._li.computeIntersection(z,re,ye,Le),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Ke=0;Ke<this._li.getIntersectionNum();Ke++)this._interiorIntersections.add(this._li.getIntersection(Ke));E.addIntersections(this._li,m,0),y.addIntersections(this._li,T,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Ks]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var E=arguments[0];this._li=E,this._interiorIntersections=new et}}])})(),$t=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"checkCorrectness",value:function(E){var m=Li.getNodedSubstrings(E),y=new gs(m);try{y.checkValid()}catch(T){if(!(T instanceof N))throw T;T.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Li.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(E,m){var y=this.findInteriorIntersections(E,m);this.computeIntersectionSnaps(y),this.computeVertexSnaps(E)}},{key:"findInteriorIntersections",value:function(E,m){var y=new fl(m);return this._noder.setSegmentIntersector(y),this._noder.computeNodes(E),y.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(pr(arguments[0],It))for(var E=arguments[0].iterator();E.hasNext();){var m=E.next();this.computeVertexSnaps(m)}else if(arguments[0]instanceof Li)for(var y=arguments[0],T=y.getCoordinates(),z=0;z<T.length;z++){var re=new dl(T[z],this._scaleFactor,this._li);this._pointSnapper.snap(re,y,z)&&y.addIntersection(T[z],z)}}},{key:"computeNodes",value:function(E){this._nodedSegStrings=E,this._noder=new Ns,this._pointSnapper=new ys(this._noder.getIndex()),this.snapRound(E,this._li)}},{key:"computeIntersectionSnaps",value:function(E){for(var m=E.iterator();m.hasNext();){var y=m.next(),T=new dl(y,this._scaleFactor,this._li);this._pointSnapper.snap(T)}}},{key:"interfaces_",get:function(){return[Fa]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var E=arguments[0];this._pm=E,this._li=new Sr,this._li.setPrecisionModel(E),this._scaleFactor=E.getScale()}}])})(),er=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"bufferFixedPrecision",value:function(m){var y=new Os(new $t(new ya(1)),m.getScale()),T=new Zl(this._bufParams);T.setWorkingPrecisionModel(m),T.setNoder(y),this._resultGeometry=T.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var m=E.MAX_PRECISION_DIGITS;m>=0;m--){try{this.bufferReducedPrecision(m)}catch(re){if(!(re instanceof Qe))throw re;this._saveException=re}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var y=arguments[0],T=E.precisionScaleFactor(this._argGeom,this._distance,y),z=new ya(T);this.bufferFixedPrecision(z)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var m=this._argGeom.getFactory().getPrecisionModel();m.getType()===ya.FIXED?this.bufferFixedPrecision(m):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(m){this._bufParams.setQuadrantSegments(m)}},{key:"bufferOriginalPrecision",value:function(){try{var m=new Zl(this._bufParams);this._resultGeometry=m.buffer(this._argGeom,this._distance)}catch(y){if(!(y instanceof fe))throw y;this._saveException=y}}},{key:"getResultGeometry",value:function(m){return this._distance=m,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(m){this._bufParams.setEndCapStyle(m)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new F,this._resultGeometry=null,this._saveException=null,arguments.length===1){var m=arguments[0];this._argGeom=m}else if(arguments.length===2){var y=arguments[0],T=arguments[1];this._argGeom=y,this._bufParams=T}}},{key:"bufferOp",value:function(){if(arguments.length===2){var m=arguments[1];return new E(arguments[0]).getResultGeometry(m)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof rt&&typeof arguments[1]=="number"){var y=arguments[1],T=arguments[2],z=new E(arguments[0]);return z.setQuadrantSegments(T),z.getResultGeometry(y)}if(arguments[2]instanceof F&&arguments[0]instanceof rt&&typeof arguments[1]=="number"){var re=arguments[1];return new E(arguments[0],arguments[2]).getResultGeometry(re)}}else if(arguments.length===4){var ye=arguments[1],Le=arguments[2],Ke=arguments[3],yt=new E(arguments[0]);return yt.setQuadrantSegments(Le),yt.setEndCapStyle(Ke),yt.getResultGeometry(ye)}}},{key:"precisionScaleFactor",value:function(m,y,T){var z=m.getEnvelopeInternal(),re=Zt.max(Math.abs(z.getMaxX()),Math.abs(z.getMaxY()),Math.abs(z.getMinX()),Math.abs(z.getMinY()))+2*(y>0?y:0),ye=T-Math.trunc(Math.log(re)/Math.log(10)+1);return Math.pow(10,ye)}}])})();er.CAP_ROUND=F.CAP_ROUND,er.CAP_BUTT=F.CAP_FLAT,er.CAP_FLAT=F.CAP_FLAT,er.CAP_SQUARE=F.CAP_SQUARE,er.MAX_PRECISION_DIGITS=12;var Jr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],yn=(function(){return a((function E(m){i(this,E),this.geometryFactory=m||new go}),[{key:"read",value:function(E){var m,y=(m=typeof E=="string"?JSON.parse(E):E).type;if(!di[y])throw new Error("Unknown GeoJSON type: "+m.type);return Jr.indexOf(y)!==-1?di[y].call(this,m.coordinates):y==="GeometryCollection"?di[y].call(this,m.geometries):di[y].call(this,m)}},{key:"write",value:function(E){var m=E.getGeometryType();if(!vn[m])throw new Error("Geometry is not supported");return vn[m].call(this,E)}}])})(),di={Feature:function(E){var m={};for(var y in E)m[y]=E[y];if(E.geometry){var T=E.geometry.type;if(!di[T])throw new Error("Unknown GeoJSON type: "+E.type);m.geometry=this.read(E.geometry)}return E.bbox&&(m.bbox=di.bbox.call(this,E.bbox)),m},FeatureCollection:function(E){var m={};if(E.features){m.features=[];for(var y=0;y<E.features.length;++y)m.features.push(this.read(E.features[y]))}return E.bbox&&(m.bbox=this.parse.bbox.call(this,E.bbox)),m},coordinates:function(E){for(var m=[],y=0;y<E.length;++y){var T=E[y];m.push(o(Oe,I(T)))}return m},bbox:function(E){return this.geometryFactory.createLinearRing([new Oe(E[0],E[1]),new Oe(E[2],E[1]),new Oe(E[2],E[3]),new Oe(E[0],E[3]),new Oe(E[0],E[1])])},Point:function(E){var m=o(Oe,I(E));return this.geometryFactory.createPoint(m)},MultiPoint:function(E){for(var m=[],y=0;y<E.length;++y)m.push(di.Point.call(this,E[y]));return this.geometryFactory.createMultiPoint(m)},LineString:function(E){var m=di.coordinates.call(this,E);return this.geometryFactory.createLineString(m)},MultiLineString:function(E){for(var m=[],y=0;y<E.length;++y)m.push(di.LineString.call(this,E[y]));return this.geometryFactory.createMultiLineString(m)},Polygon:function(E){for(var m=di.coordinates.call(this,E[0]),y=this.geometryFactory.createLinearRing(m),T=[],z=1;z<E.length;++z){var re=E[z],ye=di.coordinates.call(this,re),Le=this.geometryFactory.createLinearRing(ye);T.push(Le)}return this.geometryFactory.createPolygon(y,T)},MultiPolygon:function(E){for(var m=[],y=0;y<E.length;++y){var T=E[y];m.push(di.Polygon.call(this,T))}return this.geometryFactory.createMultiPolygon(m)},GeometryCollection:function(E){for(var m=[],y=0;y<E.length;++y){var T=E[y];m.push(this.read(T))}return this.geometryFactory.createGeometryCollection(m)}},vn={coordinate:function(E){var m=[E.x,E.y];return E.z&&m.push(E.z),E.m&&m.push(E.m),m},Point:function(E){return{type:"Point",coordinates:vn.coordinate.call(this,E.getCoordinate())}},MultiPoint:function(E){for(var m=[],y=0;y<E._geometries.length;++y){var T=E._geometries[y],z=vn.Point.call(this,T);m.push(z.coordinates)}return{type:"MultiPoint",coordinates:m}},LineString:function(E){for(var m=[],y=E.getCoordinates(),T=0;T<y.length;++T){var z=y[T];m.push(vn.coordinate.call(this,z))}return{type:"LineString",coordinates:m}},MultiLineString:function(E){for(var m=[],y=0;y<E._geometries.length;++y){var T=E._geometries[y],z=vn.LineString.call(this,T);m.push(z.coordinates)}return{type:"MultiLineString",coordinates:m}},Polygon:function(E){var m=[],y=vn.LineString.call(this,E._shell);m.push(y.coordinates);for(var T=0;T<E._holes.length;++T){var z=E._holes[T],re=vn.LineString.call(this,z);m.push(re.coordinates)}return{type:"Polygon",coordinates:m}},MultiPolygon:function(E){for(var m=[],y=0;y<E._geometries.length;++y){var T=E._geometries[y],z=vn.Polygon.call(this,T);m.push(z.coordinates)}return{type:"MultiPolygon",coordinates:m}},GeometryCollection:function(E){for(var m=[],y=0;y<E._geometries.length;++y){var T=E._geometries[y],z=T.getGeometryType();m.push(vn[z].call(this,T))}return{type:"GeometryCollection",geometries:m}}};return{BufferOp:er,GeoJSONReader:(function(){return a((function E(m){i(this,E),this.parser=new yn(m||new go)}),[{key:"read",value:function(E){return this.parser.read(E)}}])})(),GeoJSONWriter:(function(){return a((function E(){i(this,E),this.parser=new yn(this.geometryFactory)}),[{key:"write",value:function(E){return this.parser.write(E)}}])})()}}))})(y_)),y_.exports}var Ife=Pfe();const kfe=rf(Ife);function Wh(){return new ix}function ix(){this.reset()}ix.prototype={constructor:ix,reset:function(){this.s=this.t=0},add:function(e){DN(Fb,e,this.t),DN(this,Fb.s,this.s),this.s?this.t+=Fb.t:this.s=Fb.t},valueOf:function(){return this.s}};var Fb=new ix;function DN(e,t,r){var n=e.s=t+r,i=n-t,o=n-i;e.t=t-o+(r-i)}var mo=1e-6,wa=Math.PI,Gd=wa/2,NN=wa/4,ef=wa*2,bh=180/wa,Pc=wa/180,wl=Math.abs,Afe=Math.atan,fy=Math.atan2,Yo=Math.cos,Zo=Math.sin,Iy=Math.sqrt;function u$(e){return e>1?0:e<-1?wa:Math.acos(e)}function Yp(e){return e>1?Gd:e<-1?-Gd:Math.asin(e)}function Bv(){}function ax(e,t){e&&FN.hasOwnProperty(e.type)&&FN[e.type](e,t)}var ON={Feature:function(e,t){ax(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)ax(r[n].geometry,t)}},FN={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){VT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)VT(r[n],t,0)},Polygon:function(e,t){BN(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)BN(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)ax(r[n],t)}};function VT(e,t,r){var n=-1,i=e.length-r,o;for(t.lineStart();++n<i;)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function BN(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)VT(e[r],t,1);t.polygonEnd()}function Mfe(e,t){e&&ON.hasOwnProperty(e.type)?ON[e.type](e,t):ax(e,t)}Wh();Wh();function UT(e){return[fy(e[1],e[0]),Yp(e[2])]}function hy(e){var t=e[0],r=e[1],n=Yo(r);return[n*Yo(t),n*Zo(t),Zo(r)]}function Bb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ox(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function o5(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function zb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function GT(e){var t=Iy(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Wh();function c$(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function HT(e,t){return[e>wa?e-ef:e<-wa?e+ef:e,t]}HT.invert=HT;function Lfe(e,t,r){return(e%=ef)?t||r?c$(jN(e),qN(t,r)):jN(e):t||r?qN(t,r):HT}function zN(e){return function(t,r){return t+=e,[t>wa?t-ef:t<-wa?t+ef:t,r]}}function jN(e){var t=zN(e);return t.invert=zN(-e),t}function qN(e,t){var r=Yo(e),n=Zo(e),i=Yo(t),o=Zo(t);function l(a,c){var p=Yo(c),g=Yo(a)*p,v=Zo(a)*p,x=Zo(c),b=x*r+g*n;return[fy(v*i-b*o,g*r-x*n),Yp(b*i+v*o)]}return l.invert=function(a,c){var p=Yo(c),g=Yo(a)*p,v=Zo(a)*p,x=Zo(c),b=x*i-v*o;return[fy(v*i+x*o,g*r+b*n),Yp(b*r-g*n)]},l}function Rfe(e,t,r,n,i,o){if(r){var l=Yo(t),a=Zo(t),c=n*r;i==null?(i=t+n*ef,o=t-c/2):(i=$N(l,i),o=$N(l,o),(n>0?i<o:i>o)&&(i+=n*ef));for(var p,g=i;n>0?g>o:g<o;g-=c)p=UT([l,-a*Yo(g),-a*Zo(g)]),e.point(p[0],p[1])}}function $N(e,t){t=hy(t),t[0]-=e,GT(t);var r=u$(-t[1]);return((-t[2]<0?-r:r)+ef-mo)%ef}function d$(){var e=[],t;return{point:function(r,n){t.push([r,n])},lineStart:function(){e.push(t=[])},lineEnd:Bv,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Dfe(e,t,r,n,i,o){var l=e[0],a=e[1],c=t[0],p=t[1],g=0,v=1,x=c-l,b=p-a,P;if(P=r-l,!(!x&&P>0)){if(P/=x,x<0){if(P<g)return;P<v&&(v=P)}else if(x>0){if(P>v)return;P>g&&(g=P)}if(P=i-l,!(!x&&P<0)){if(P/=x,x<0){if(P>v)return;P>g&&(g=P)}else if(x>0){if(P<g)return;P<v&&(v=P)}if(P=n-a,!(!b&&P>0)){if(P/=b,b<0){if(P<g)return;P<v&&(v=P)}else if(b>0){if(P>v)return;P>g&&(g=P)}if(P=o-a,!(!b&&P<0)){if(P/=b,b<0){if(P>v)return;P>g&&(g=P)}else if(b>0){if(P<g)return;P<v&&(v=P)}return g>0&&(e[0]=l+g*x,e[1]=a+g*b),v<1&&(t[0]=l+v*x,t[1]=a+v*b),!0}}}}}function v_(e,t){return wl(e[0]-t[0])<mo&&wl(e[1]-t[1])<mo}function jb(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function f$(e,t,r,n,i){var o=[],l=[],a,c;if(e.forEach(function(P){if(!((I=P.length-1)<=0)){var I,k=P[0],M=P[I],O;if(v_(k,M)){for(i.lineStart(),a=0;a<I;++a)i.point((k=P[a])[0],k[1]);i.lineEnd();return}o.push(O=new jb(k,P,null,!0)),l.push(O.o=new jb(k,null,O,!1)),o.push(O=new jb(M,P,null,!1)),l.push(O.o=new jb(M,null,O,!0))}}),!!o.length){for(l.sort(t),VN(o),VN(l),a=0,c=l.length;a<c;++a)l[a].e=r=!r;for(var p=o[0],g,v;;){for(var x=p,b=!0;x.v;)if((x=x.n)===p)return;g=x.z,i.lineStart();do{if(x.v=x.o.v=!0,x.e){if(b)for(a=0,c=g.length;a<c;++a)i.point((v=g[a])[0],v[1]);else n(x.x,x.n.x,1,i);x=x.n}else{if(b)for(g=x.p.z,a=g.length-1;a>=0;--a)i.point((v=g[a])[0],v[1]);else n(x.x,x.p.x,-1,i);x=x.p}x=x.o,g=x.z,b=!b}while(!x.v);i.lineEnd()}}}function VN(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function h$(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Nfe(e){return e.length===1&&(e=Ofe(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)<0?n=o+1:i=o}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)>0?i=o:n=o+1}return n}}}function Ofe(e){return function(t,r){return h$(e(t),r)}}Nfe(h$);function p$(e){for(var t=e.length,r,n=-1,i=0,o,l;++n<t;)i+=e[n].length;for(o=new Array(i);--t>=0;)for(l=e[t],r=l.length;--r>=0;)o[--i]=l[r];return o}var zv=1e9,qb=-zv;function Ffe(e,t,r,n){function i(p,g){return e<=p&&p<=r&&t<=g&&g<=n}function o(p,g,v,x){var b=0,P=0;if(p==null||(b=l(p,v))!==(P=l(g,v))||c(p,g)<0^v>0)do x.point(b===0||b===3?e:r,b>1?n:t);while((b=(b+v+4)%4)!==P);else x.point(g[0],g[1])}function l(p,g){return wl(p[0]-e)<mo?g>0?0:3:wl(p[0]-r)<mo?g>0?2:1:wl(p[1]-t)<mo?g>0?1:0:g>0?3:2}function a(p,g){return c(p.x,g.x)}function c(p,g){var v=l(p,1),x=l(g,1);return v!==x?v-x:v===0?g[1]-p[1]:v===1?p[0]-g[0]:v===2?p[1]-g[1]:g[0]-p[0]}return function(p){var g=p,v=d$(),x,b,P,I,k,M,O,F,N,$,j,U={point:H,lineStart:G,lineEnd:ie,polygonStart:ae,polygonEnd:ee};function H(ue,de){i(ue,de)&&g.point(ue,de)}function Y(){for(var ue=0,de=0,Me=b.length;de<Me;++de)for(var ge=b[de],xe=1,Ee=ge.length,Ae=ge[0],fe,Se,we=Ae[0],De=Ae[1];xe<Ee;++xe)fe=we,Se=De,Ae=ge[xe],we=Ae[0],De=Ae[1],Se<=n?De>n&&(we-fe)*(n-Se)>(De-Se)*(e-fe)&&++ue:De<=n&&(we-fe)*(n-Se)<(De-Se)*(e-fe)&&--ue;return ue}function ae(){g=v,x=[],b=[],j=!0}function ee(){var ue=Y(),de=j&&ue,Me=(x=p$(x)).length;(de||Me)&&(p.polygonStart(),de&&(p.lineStart(),o(null,null,1,p),p.lineEnd()),Me&&f$(x,a,ue,o,p),p.polygonEnd()),g=p,x=b=P=null}function G(){U.point=oe,b&&b.push(P=[]),$=!0,N=!1,O=F=NaN}function ie(){x&&(oe(I,k),M&&N&&v.rejoin(),x.push(v.result())),U.point=H,N&&g.lineEnd()}function oe(ue,de){var Me=i(ue,de);if(b&&P.push([ue,de]),$)I=ue,k=de,M=Me,$=!1,Me&&(g.lineStart(),g.point(ue,de));else if(Me&&N)g.point(ue,de);else{var ge=[O=Math.max(qb,Math.min(zv,O)),F=Math.max(qb,Math.min(zv,F))],xe=[ue=Math.max(qb,Math.min(zv,ue)),de=Math.max(qb,Math.min(zv,de))];Dfe(ge,xe,e,t,r,n)?(N||(g.lineStart(),g.point(ge[0],ge[1])),g.point(xe[0],xe[1]),Me||g.lineEnd(),j=!1):Me&&(g.lineStart(),g.point(ue,de),j=!1)}O=ue,F=de,N=Me}return U}}var s5=Wh();function Bfe(e,t){var r=t[0],n=t[1],i=[Zo(r),-Yo(r),0],o=0,l=0;s5.reset();for(var a=0,c=e.length;a<c;++a)if(g=(p=e[a]).length)for(var p,g,v=p[g-1],x=v[0],b=v[1]/2+NN,P=Zo(b),I=Yo(b),k=0;k<g;++k,x=O,P=N,I=$,v=M){var M=p[k],O=M[0],F=M[1]/2+NN,N=Zo(F),$=Yo(F),j=O-x,U=j>=0?1:-1,H=U*j,Y=H>wa,ae=P*N;if(s5.add(fy(ae*U*Zo(H),I*$+ae*Yo(H))),o+=Y?j+U*ef:j,Y^x>=r^O>=r){var ee=ox(hy(v),hy(M));GT(ee);var G=ox(i,ee);GT(G);var ie=(Y^j>=0?-1:1)*Yp(G[2]);(n>ie||n===ie&&(ee[0]||ee[1]))&&(l+=Y^j>=0?1:-1)}}return(o<-mo||o<mo&&s5<-mo)^l&1}Wh();function UN(e){return e}Wh();Wh();var py=1/0,sx=py,D0=-py,lx=D0,GN={point:zfe,lineStart:Bv,lineEnd:Bv,polygonStart:Bv,polygonEnd:Bv,result:function(){var e=[[py,sx],[D0,lx]];return D0=lx=-(sx=py=1/0),e}};function zfe(e,t){e<py&&(py=e),e>D0&&(D0=e),t<sx&&(sx=t),t>lx&&(lx=t)}Wh();function m$(e,t,r,n){return function(i,o){var l=t(o),a=i.invert(n[0],n[1]),c=d$(),p=t(c),g=!1,v,x,b,P={point:I,lineStart:M,lineEnd:O,polygonStart:function(){P.point=F,P.lineStart=N,P.lineEnd=$,x=[],v=[]},polygonEnd:function(){P.point=I,P.lineStart=M,P.lineEnd=O,x=p$(x);var j=Bfe(v,a);x.length?(g||(o.polygonStart(),g=!0),f$(x,qfe,j,r,o)):j&&(g||(o.polygonStart(),g=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),x=v=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function I(j,U){var H=i(j,U);e(j=H[0],U=H[1])&&o.point(j,U)}function k(j,U){var H=i(j,U);l.point(H[0],H[1])}function M(){P.point=k,l.lineStart()}function O(){P.point=I,l.lineEnd()}function F(j,U){b.push([j,U]);var H=i(j,U);p.point(H[0],H[1])}function N(){p.lineStart(),b=[]}function $(){F(b[0][0],b[0][1]),p.lineEnd();var j=p.clean(),U=c.result(),H,Y=U.length,ae,ee,G;if(b.pop(),v.push(b),b=null,!!Y){if(j&1){if(ee=U[0],(ae=ee.length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),H=0;H<ae;++H)o.point((G=ee[H])[0],G[1]);o.lineEnd()}return}Y>1&&j&2&&U.push(U.pop().concat(U.shift())),x.push(U.filter(jfe))}}return P}}function jfe(e){return e.length>1}function qfe(e,t){return((e=e.x)[0]<0?e[1]-Gd-mo:Gd-e[1])-((t=t.x)[0]<0?t[1]-Gd-mo:Gd-t[1])}const HN=m$(function(){return!0},$fe,Ufe,[-wa,-Gd]);function $fe(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,l){var a=o>0?wa:-wa,c=wl(o-t);wl(c-wa)<mo?(e.point(t,r=(r+l)/2>0?Gd:-Gd),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),i=0):n!==a&&c>=wa&&(wl(t-n)<mo&&(t-=n*mo),wl(o-a)<mo&&(o-=a*mo),r=Vfe(t,r,o,l),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=o,r=l),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function Vfe(e,t,r,n){var i,o,l=Zo(e-r);return wl(l)>mo?Afe((Zo(t)*(o=Yo(n))*Zo(r)-Zo(n)*(i=Yo(t))*Zo(e))/(i*o*l)):(t+n)/2}function Ufe(e,t,r,n){var i;if(e==null)i=r*Gd,n.point(-wa,i),n.point(0,i),n.point(wa,i),n.point(wa,0),n.point(wa,-i),n.point(0,-i),n.point(-wa,-i),n.point(-wa,0),n.point(-wa,i);else if(wl(e[0]-t[0])>mo){var o=e[0]<t[0]?wa:-wa;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])}function Gfe(e,t){var r=Yo(e),n=r>0,i=wl(r)>mo;function o(g,v,x,b){Rfe(b,e,t,x,g,v)}function l(g,v){return Yo(g)*Yo(v)>r}function a(g){var v,x,b,P,I;return{lineStart:function(){P=b=!1,I=1},point:function(k,M){var O=[k,M],F,N=l(k,M),$=n?N?0:p(k,M):N?p(k+(k<0?wa:-wa),M):0;if(!v&&(P=b=N)&&g.lineStart(),N!==b&&(F=c(v,O),(!F||v_(v,F)||v_(O,F))&&(O[0]+=mo,O[1]+=mo,N=l(O[0],O[1]))),N!==b)I=0,N?(g.lineStart(),F=c(O,v),g.point(F[0],F[1])):(F=c(v,O),g.point(F[0],F[1]),g.lineEnd()),v=F;else if(i&&v&&n^N){var j;!($&x)&&(j=c(O,v,!0))&&(I=0,n?(g.lineStart(),g.point(j[0][0],j[0][1]),g.point(j[1][0],j[1][1]),g.lineEnd()):(g.point(j[1][0],j[1][1]),g.lineEnd(),g.lineStart(),g.point(j[0][0],j[0][1])))}N&&(!v||!v_(v,O))&&g.point(O[0],O[1]),v=O,b=N,x=$},lineEnd:function(){b&&g.lineEnd(),v=null},clean:function(){return I|(P&&b)<<1}}}function c(g,v,x){var b=hy(g),P=hy(v),I=[1,0,0],k=ox(b,P),M=Bb(k,k),O=k[0],F=M-O*O;if(!F)return!x&&g;var N=r*M/F,$=-r*O/F,j=ox(I,k),U=zb(I,N),H=zb(k,$);o5(U,H);var Y=j,ae=Bb(U,Y),ee=Bb(Y,Y),G=ae*ae-ee*(Bb(U,U)-1);if(!(G<0)){var ie=Iy(G),oe=zb(Y,(-ae-ie)/ee);if(o5(oe,U),oe=UT(oe),!x)return oe;var ue=g[0],de=v[0],Me=g[1],ge=v[1],xe;de<ue&&(xe=ue,ue=de,de=xe);var Ee=de-ue,Ae=wl(Ee-wa)<mo,fe=Ae||Ee<mo;if(!Ae&&ge<Me&&(xe=Me,Me=ge,ge=xe),fe?Ae?Me+ge>0^oe[1]<(wl(oe[0]-ue)<mo?Me:ge):Me<=oe[1]&&oe[1]<=ge:Ee>wa^(ue<=oe[0]&&oe[0]<=de)){var Se=zb(Y,(-ae+ie)/ee);return o5(Se,U),[oe,UT(Se)]}}}function p(g,v){var x=n?e:wa-e,b=0;return g<-x?b|=1:g>x&&(b|=2),v<-x?b|=4:v>x&&(b|=8),b}return m$(l,a,o,n?[0,-e]:[-wa,e-wa])}function g$(e){return function(t){var r=new WT;for(var n in e)r[n]=e[n];return r.stream=t,r}}function WT(){}WT.prototype={constructor:WT,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function y$(e,t,r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),Mfe(r,e.stream(GN));var l=GN.result(),a=Math.min(n/(l[1][0]-l[0][0]),i/(l[1][1]-l[0][1])),c=+t[0][0]+(n-a*(l[1][0]+l[0][0]))/2,p=+t[0][1]+(i-a*(l[1][1]+l[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([c,p])}function Hfe(e,t,r){return y$(e,[[0,0],t],r)}var WN=16,Wfe=Yo(30*Pc);function XN(e,t){return+t?Yfe(e,t):Xfe(e)}function Xfe(e){return g$({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function Yfe(e,t){function r(n,i,o,l,a,c,p,g,v,x,b,P,I,k){var M=p-n,O=g-i,F=M*M+O*O;if(F>4*t&&I--){var N=l+x,$=a+b,j=c+P,U=Iy(N*N+$*$+j*j),H=Yp(j/=U),Y=wl(wl(j)-1)<mo||wl(o-v)<mo?(o+v)/2:fy($,N),ae=e(Y,H),ee=ae[0],G=ae[1],ie=ee-n,oe=G-i,ue=O*ie-M*oe;(ue*ue/F>t||wl((M*ie+O*oe)/F-.5)>.3||l*x+a*b+c*P<Wfe)&&(r(n,i,o,l,a,c,ee,G,Y,N/=U,$/=U,j,I,k),k.point(ee,G),r(ee,G,Y,N,$,j,p,g,v,x,b,P,I,k))}}return function(n){var i,o,l,a,c,p,g,v,x,b,P,I,k={point:M,lineStart:O,lineEnd:N,polygonStart:function(){n.polygonStart(),k.lineStart=$},polygonEnd:function(){n.polygonEnd(),k.lineStart=O}};function M(H,Y){H=e(H,Y),n.point(H[0],H[1])}function O(){v=NaN,k.point=F,n.lineStart()}function F(H,Y){var ae=hy([H,Y]),ee=e(H,Y);r(v,x,g,b,P,I,v=ee[0],x=ee[1],g=H,b=ae[0],P=ae[1],I=ae[2],WN,n),n.point(v,x)}function N(){k.point=M,n.lineEnd()}function $(){O(),k.point=j,k.lineEnd=U}function j(H,Y){F(i=H,Y),o=v,l=x,a=b,c=P,p=I,k.point=F}function U(){r(v,x,g,b,P,I,o,l,i,a,c,p,WN,n),k.lineEnd=N,N()}return k}}var Zfe=g$({point:function(e,t){this.stream.point(e*Pc,t*Pc)}});function Kfe(e){return Jfe(function(){return e})()}function Jfe(e){var t,r=150,n=480,i=250,o,l,a=0,c=0,p=0,g=0,v=0,x,b,P=null,I=HN,k=null,M,O,F,N=UN,$=.5,j=XN(ee,$),U,H;function Y(oe){return oe=b(oe[0]*Pc,oe[1]*Pc),[oe[0]*r+o,l-oe[1]*r]}function ae(oe){return oe=b.invert((oe[0]-o)/r,(l-oe[1])/r),oe&&[oe[0]*bh,oe[1]*bh]}function ee(oe,ue){return oe=t(oe,ue),[oe[0]*r+o,l-oe[1]*r]}Y.stream=function(oe){return U&&H===oe?U:U=Zfe(I(x,j(N(H=oe))))},Y.clipAngle=function(oe){return arguments.length?(I=+oe?Gfe(P=oe*Pc,6*Pc):(P=null,HN),ie()):P*bh},Y.clipExtent=function(oe){return arguments.length?(N=oe==null?(k=M=O=F=null,UN):Ffe(k=+oe[0][0],M=+oe[0][1],O=+oe[1][0],F=+oe[1][1]),ie()):k==null?null:[[k,M],[O,F]]},Y.scale=function(oe){return arguments.length?(r=+oe,G()):r},Y.translate=function(oe){return arguments.length?(n=+oe[0],i=+oe[1],G()):[n,i]},Y.center=function(oe){return arguments.length?(a=oe[0]%360*Pc,c=oe[1]%360*Pc,G()):[a*bh,c*bh]},Y.rotate=function(oe){return arguments.length?(p=oe[0]%360*Pc,g=oe[1]%360*Pc,v=oe.length>2?oe[2]%360*Pc:0,G()):[p*bh,g*bh,v*bh]},Y.precision=function(oe){return arguments.length?(j=XN(ee,$=oe*oe),ie()):Iy($)},Y.fitExtent=function(oe,ue){return y$(Y,oe,ue)},Y.fitSize=function(oe,ue){return Hfe(Y,oe,ue)};function G(){b=c$(x=Lfe(p,g,v),t);var oe=t(a,c);return o=n-oe[0]*r,l=i+oe[1]*r,ie()}function ie(){return U=H=null,Y}return function(){return t=e.apply(this,arguments),Y.invert=t.invert&&ae,G()}}function v$(e){return function(t,r){var n=Yo(t),i=Yo(r),o=e(n*i);return[o*i*Zo(t),o*Zo(r)]}}function b$(e){return function(t,r){var n=Iy(t*t+r*r),i=e(n),o=Zo(i),l=Yo(i);return[fy(t*o,n*l),Yp(n&&r*o/n)]}}var Qfe=v$(function(e){return Iy(2/(1+e))});Qfe.invert=b$(function(e){return 2*Yp(e/2)});var _$=v$(function(e){return(e=u$(e))&&e/Zo(e)});_$.invert=b$(function(e){return e});function ehe(){return Kfe(_$).scale(79.4188).clipAngle(180-.001)}function YN(e,t){return[e,t]}YN.invert=YN;var{BufferOp:the,GeoJSONReader:rhe,GeoJSONWriter:nhe}=kfe;function ihe(e,t,r){r=r||{};var n=r.units||"kilometers",i=r.steps||8;if(!e)throw new Error("geojson is required");if(typeof r!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return B2(e,function(l){var a=b_(l,t,n,i);a&&o.push(a)}),Uf(o);case"FeatureCollection":return TN(e,function(l){var a=b_(l,t,n,i);a&&TN(a,function(c){c&&o.push(c)})}),Uf(o)}return b_(e,t,n,i)}function b_(e,t,r,n){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var l=[];return B2(e,function(I){var k=b_(I,t,r,n);k&&l.push(k)}),Uf(l)}var a=ahe(o),c={type:o.type,coordinates:w$(o.coordinates,a)},p=new rhe,g=p.read(c),v=i$(OI(t,r),"meters"),x=the.bufferOp(g,v,n),b=new nhe;if(x=b.write(x),!x$(x.coordinates)){var P={type:x.type,coordinates:S$(x.coordinates,a)};return Xp(P,i)}}function x$(e){return Array.isArray(e[0])?x$(e[0]):isNaN(e[0])}function w$(e,t){return typeof e[0]!="object"?t(e):e.map(function(r){return w$(r,t)})}function S$(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(r){return S$(r,t)})}function ahe(e){var t=Efe(e).geometry.coordinates,r=[-t[0],-t[1]];return ehe().rotate(r).scale(lu)}function ZN(e,t={}){let r=0,n=0,i=0;return Py(e,function(o){r+=o[0],n+=o[1],i++},!0),Vc([r/i,n/i],t.properties)}var $b={exports:{}},__={exports:{}},ohe=__.exports,KN;function she(){return KN||(KN=1,(function(e,t){(function(r,n){e.exports=n()})(ohe,function(){function r(O,F,N,$,j){(function U(H,Y,ae,ee,G){for(;ee>ae;){if(ee-ae>600){var ie=ee-ae+1,oe=Y-ae+1,ue=Math.log(ie),de=.5*Math.exp(2*ue/3),Me=.5*Math.sqrt(ue*de*(ie-de)/ie)*(oe-ie/2<0?-1:1),ge=Math.max(ae,Math.floor(Y-oe*de/ie+Me)),xe=Math.min(ee,Math.floor(Y+(ie-oe)*de/ie+Me));U(H,Y,ge,xe,G)}var Ee=H[Y],Ae=ae,fe=ee;for(n(H,ae,Y),G(H[ee],Ee)>0&&n(H,ae,ee);Ae<fe;){for(n(H,Ae,fe),Ae++,fe--;G(H[Ae],Ee)<0;)Ae++;for(;G(H[fe],Ee)>0;)fe--}G(H[ae],Ee)===0?n(H,ae,fe):n(H,++fe,ee),fe<=Y&&(ae=fe+1),Y<=fe&&(ee=fe-1)}})(O,F,N||0,$||O.length-1,j||i)}function n(O,F,N){var $=O[F];O[F]=O[N],O[N]=$}function i(O,F){return O<F?-1:O>F?1:0}var o=function(O){O===void 0&&(O=9),this._maxEntries=Math.max(4,O),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(O,F,N){if(!N)return F.indexOf(O);for(var $=0;$<F.length;$++)if(N(O,F[$]))return $;return-1}function a(O,F){c(O,0,O.children.length,F,O)}function c(O,F,N,$,j){j||(j=k(null)),j.minX=1/0,j.minY=1/0,j.maxX=-1/0,j.maxY=-1/0;for(var U=F;U<N;U++){var H=O.children[U];p(j,O.leaf?$(H):H)}return j}function p(O,F){return O.minX=Math.min(O.minX,F.minX),O.minY=Math.min(O.minY,F.minY),O.maxX=Math.max(O.maxX,F.maxX),O.maxY=Math.max(O.maxY,F.maxY),O}function g(O,F){return O.minX-F.minX}function v(O,F){return O.minY-F.minY}function x(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function b(O){return O.maxX-O.minX+(O.maxY-O.minY)}function P(O,F){return O.minX<=F.minX&&O.minY<=F.minY&&F.maxX<=O.maxX&&F.maxY<=O.maxY}function I(O,F){return F.minX<=O.maxX&&F.minY<=O.maxY&&F.maxX>=O.minX&&F.maxY>=O.minY}function k(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M(O,F,N,$,j){for(var U=[F,N];U.length;)if(!((N=U.pop())-(F=U.pop())<=$)){var H=F+Math.ceil((N-F)/$/2)*$;r(O,H,F,N,j),U.push(F,H,H,N)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(O){var F=this.data,N=[];if(!I(O,F))return N;for(var $=this.toBBox,j=[];F;){for(var U=0;U<F.children.length;U++){var H=F.children[U],Y=F.leaf?$(H):H;I(O,Y)&&(F.leaf?N.push(H):P(O,Y)?this._all(H,N):j.push(H))}F=j.pop()}return N},o.prototype.collides=function(O){var F=this.data;if(!I(O,F))return!1;for(var N=[];F;){for(var $=0;$<F.children.length;$++){var j=F.children[$],U=F.leaf?this.toBBox(j):j;if(I(O,U)){if(F.leaf||P(O,U))return!0;N.push(j)}}F=N.pop()}return!1},o.prototype.load=function(O){if(!O||!O.length)return this;if(O.length<this._minEntries){for(var F=0;F<O.length;F++)this.insert(O[F]);return this}var N=this._build(O.slice(),0,O.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var $=this.data;this.data=N,N=$}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},o.prototype.insert=function(O){return O&&this._insert(O,this.data.height-1),this},o.prototype.clear=function(){return this.data=k([]),this},o.prototype.remove=function(O,F){if(!O)return this;for(var N,$,j,U=this.data,H=this.toBBox(O),Y=[],ae=[];U||Y.length;){if(U||(U=Y.pop(),$=Y[Y.length-1],N=ae.pop(),j=!0),U.leaf){var ee=l(O,U.children,F);if(ee!==-1)return U.children.splice(ee,1),Y.push(U),this._condense(Y),this}j||U.leaf||!P(U,H)?$?(N++,U=$.children[N],j=!1):U=null:(Y.push(U),ae.push(N),N=0,$=U,U=U.children[0])}return this},o.prototype.toBBox=function(O){return O},o.prototype.compareMinX=function(O,F){return O.minX-F.minX},o.prototype.compareMinY=function(O,F){return O.minY-F.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(O){return this.data=O,this},o.prototype._all=function(O,F){for(var N=[];O;)O.leaf?F.push.apply(F,O.children):N.push.apply(N,O.children),O=N.pop();return F},o.prototype._build=function(O,F,N,$){var j,U=N-F+1,H=this._maxEntries;if(U<=H)return a(j=k(O.slice(F,N+1)),this.toBBox),j;$||($=Math.ceil(Math.log(U)/Math.log(H)),H=Math.ceil(U/Math.pow(H,$-1))),(j=k([])).leaf=!1,j.height=$;var Y=Math.ceil(U/H),ae=Y*Math.ceil(Math.sqrt(H));M(O,F,N,ae,this.compareMinX);for(var ee=F;ee<=N;ee+=ae){var G=Math.min(ee+ae-1,N);M(O,ee,G,Y,this.compareMinY);for(var ie=ee;ie<=G;ie+=Y){var oe=Math.min(ie+Y-1,G);j.children.push(this._build(O,ie,oe,$-1))}}return a(j,this.toBBox),j},o.prototype._chooseSubtree=function(O,F,N,$){for(;$.push(F),!F.leaf&&$.length-1!==N;){for(var j=1/0,U=1/0,H=void 0,Y=0;Y<F.children.length;Y++){var ae=F.children[Y],ee=x(ae),G=(ie=O,oe=ae,(Math.max(oe.maxX,ie.maxX)-Math.min(oe.minX,ie.minX))*(Math.max(oe.maxY,ie.maxY)-Math.min(oe.minY,ie.minY))-ee);G<U?(U=G,j=ee<j?ee:j,H=ae):G===U&&ee<j&&(j=ee,H=ae)}F=H||F.children[0]}var ie,oe;return F},o.prototype._insert=function(O,F,N){var $=N?O:this.toBBox(O),j=[],U=this._chooseSubtree($,this.data,F,j);for(U.children.push(O),p(U,$);F>=0&&j[F].children.length>this._maxEntries;)this._split(j,F),F--;this._adjustParentBBoxes($,j,F)},o.prototype._split=function(O,F){var N=O[F],$=N.children.length,j=this._minEntries;this._chooseSplitAxis(N,j,$);var U=this._chooseSplitIndex(N,j,$),H=k(N.children.splice(U,N.children.length-U));H.height=N.height,H.leaf=N.leaf,a(N,this.toBBox),a(H,this.toBBox),F?O[F-1].children.push(H):this._splitRoot(N,H)},o.prototype._splitRoot=function(O,F){this.data=k([O,F]),this.data.height=O.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(O,F,N){for(var $,j,U,H,Y,ae,ee,G=1/0,ie=1/0,oe=F;oe<=N-F;oe++){var ue=c(O,0,oe,this.toBBox),de=c(O,oe,N,this.toBBox),Me=(j=ue,U=de,H=void 0,Y=void 0,ae=void 0,ee=void 0,H=Math.max(j.minX,U.minX),Y=Math.max(j.minY,U.minY),ae=Math.min(j.maxX,U.maxX),ee=Math.min(j.maxY,U.maxY),Math.max(0,ae-H)*Math.max(0,ee-Y)),ge=x(ue)+x(de);Me<G?(G=Me,$=oe,ie=ge<ie?ge:ie):Me===G&&ge<ie&&(ie=ge,$=oe)}return $||N-F},o.prototype._chooseSplitAxis=function(O,F,N){var $=O.leaf?this.compareMinX:g,j=O.leaf?this.compareMinY:v;this._allDistMargin(O,F,N,$)<this._allDistMargin(O,F,N,j)&&O.children.sort($)},o.prototype._allDistMargin=function(O,F,N,$){O.children.sort($);for(var j=this.toBBox,U=c(O,0,F,j),H=c(O,N-F,N,j),Y=b(U)+b(H),ae=F;ae<N-F;ae++){var ee=O.children[ae];p(U,O.leaf?j(ee):ee),Y+=b(U)}for(var G=N-F-1;G>=F;G--){var ie=O.children[G];p(H,O.leaf?j(ie):ie),Y+=b(H)}return Y},o.prototype._adjustParentBBoxes=function(O,F,N){for(var $=N;$>=0;$--)p(F[$],O)},o.prototype._condense=function(O){for(var F=O.length-1,N=void 0;F>=0;F--)O[F].children.length===0?F>0?(N=O[F-1].children).splice(N.indexOf(O[F]),1):this.clear():a(O[F],this.toBBox)},o})})(__)),__.exports}class lhe{constructor(t=[],r=uhe){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:n}=this,i=r[t];for(;t>0;){const o=t-1>>1,l=r[o];if(n(i,l)>=0)break;r[t]=l,t=o}r[t]=i}_down(t){const{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let l=(t<<1)+1,a=r[l];const c=l+1;if(c<this.length&&n(r[c],a)<0&&(l=c,a=r[c]),n(a,o)>=0)break;r[t]=a,t=l}r[t]=o}}function uhe(e,t){return e<t?-1:e>t?1:0}const che=Object.freeze(Object.defineProperty({__proto__:null,default:lhe},Symbol.toStringTag,{value:"Module"})),dhe=Vz(che);var hv={exports:{}},l5,JN;function fhe(){return JN||(JN=1,l5=function(t,r,n,i){var o=t[0],l=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var c=(i-n)/2,p=0,g=c-1;p<c;g=p++){var v=r[n+p*2+0],x=r[n+p*2+1],b=r[n+g*2+0],P=r[n+g*2+1],I=x>l!=P>l&&o<(b-v)*(l-x)/(P-x)+v;I&&(a=!a)}return a}),l5}var u5,QN;function hhe(){return QN||(QN=1,u5=function(t,r,n,i){var o=t[0],l=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var c=i-n,p=0,g=c-1;p<c;g=p++){var v=r[p+n][0],x=r[p+n][1],b=r[g+n][0],P=r[g+n][1],I=x>l!=P>l&&o<(b-v)*(l-x)/(P-x)+v;I&&(a=!a)}return a}),u5}var eO;function phe(){if(eO)return hv.exports;eO=1;var e=fhe(),t=hhe();return hv.exports=function(n,i,o,l){return i.length>0&&Array.isArray(i[0])?t(n,i,o,l):e(n,i,o,l)},hv.exports.nested=t,hv.exports.flat=e,hv.exports}var jv={exports:{}},mhe=jv.exports,tO;function ghe(){return tO||(tO=1,(function(e,t){(function(r,n){n(t)})(mhe,function(r){const i=33306690738754706e-32;function o(I,k,M,O,F){let N,$,j,U,H=k[0],Y=O[0],ae=0,ee=0;Y>H==Y>-H?(N=H,H=k[++ae]):(N=Y,Y=O[++ee]);let G=0;if(ae<I&&ee<M)for(Y>H==Y>-H?(j=N-(($=H+N)-H),H=k[++ae]):(j=N-(($=Y+N)-Y),Y=O[++ee]),N=$,j!==0&&(F[G++]=j);ae<I&&ee<M;)Y>H==Y>-H?(j=N-(($=N+H)-(U=$-N))+(H-U),H=k[++ae]):(j=N-(($=N+Y)-(U=$-N))+(Y-U),Y=O[++ee]),N=$,j!==0&&(F[G++]=j);for(;ae<I;)j=N-(($=N+H)-(U=$-N))+(H-U),H=k[++ae],N=$,j!==0&&(F[G++]=j);for(;ee<M;)j=N-(($=N+Y)-(U=$-N))+(Y-U),Y=O[++ee],N=$,j!==0&&(F[G++]=j);return N===0&&G!==0||(F[G++]=N),G}function l(I){return new Float64Array(I)}const a=33306690738754716e-32,c=22204460492503146e-32,p=11093356479670487e-47,g=l(4),v=l(8),x=l(12),b=l(16),P=l(4);r.orient2d=function(I,k,M,O,F,N){const $=(k-N)*(M-F),j=(I-F)*(O-N),U=$-j;if($===0||j===0||$>0!=j>0)return U;const H=Math.abs($+j);return Math.abs(U)>=a*H?U:-(function(Y,ae,ee,G,ie,oe,ue){let de,Me,ge,xe,Ee,Ae,fe,Se,we,De,Re,$e,Oe,it,Ye,rt,Ie,It;const at=Y-ie,je=ee-ie,Ht=ae-oe,Wt=G-oe;Ee=(Ye=(Se=at-(fe=(Ae=134217729*at)-(Ae-at)))*(De=Wt-(we=(Ae=134217729*Wt)-(Ae-Wt)))-((it=at*Wt)-fe*we-Se*we-fe*De))-(Re=Ye-(Ie=(Se=Ht-(fe=(Ae=134217729*Ht)-(Ae-Ht)))*(De=je-(we=(Ae=134217729*je)-(Ae-je)))-((rt=Ht*je)-fe*we-Se*we-fe*De))),g[0]=Ye-(Re+Ee)+(Ee-Ie),Ee=(Oe=it-(($e=it+Re)-(Ee=$e-it))+(Re-Ee))-(Re=Oe-rt),g[1]=Oe-(Re+Ee)+(Ee-rt),Ee=(It=$e+Re)-$e,g[2]=$e-(It-Ee)+(Re-Ee),g[3]=It;let zt=(function(yr,pr){let Jt=pr[0];for(let ir=1;ir<yr;ir++)Jt+=pr[ir];return Jt})(4,g),st=c*ue;if(zt>=st||-zt>=st||(de=Y-(at+(Ee=Y-at))+(Ee-ie),ge=ee-(je+(Ee=ee-je))+(Ee-ie),Me=ae-(Ht+(Ee=ae-Ht))+(Ee-oe),xe=G-(Wt+(Ee=G-Wt))+(Ee-oe),de===0&&Me===0&&ge===0&&xe===0)||(st=p*ue+i*Math.abs(zt),(zt+=at*xe+Wt*de-(Ht*ge+je*Me))>=st||-zt>=st))return zt;Ee=(Ye=(Se=de-(fe=(Ae=134217729*de)-(Ae-de)))*(De=Wt-(we=(Ae=134217729*Wt)-(Ae-Wt)))-((it=de*Wt)-fe*we-Se*we-fe*De))-(Re=Ye-(Ie=(Se=Me-(fe=(Ae=134217729*Me)-(Ae-Me)))*(De=je-(we=(Ae=134217729*je)-(Ae-je)))-((rt=Me*je)-fe*we-Se*we-fe*De))),P[0]=Ye-(Re+Ee)+(Ee-Ie),Ee=(Oe=it-(($e=it+Re)-(Ee=$e-it))+(Re-Ee))-(Re=Oe-rt),P[1]=Oe-(Re+Ee)+(Ee-rt),Ee=(It=$e+Re)-$e,P[2]=$e-(It-Ee)+(Re-Ee),P[3]=It;const sr=o(4,g,4,P,v);Ee=(Ye=(Se=at-(fe=(Ae=134217729*at)-(Ae-at)))*(De=xe-(we=(Ae=134217729*xe)-(Ae-xe)))-((it=at*xe)-fe*we-Se*we-fe*De))-(Re=Ye-(Ie=(Se=Ht-(fe=(Ae=134217729*Ht)-(Ae-Ht)))*(De=ge-(we=(Ae=134217729*ge)-(Ae-ge)))-((rt=Ht*ge)-fe*we-Se*we-fe*De))),P[0]=Ye-(Re+Ee)+(Ee-Ie),Ee=(Oe=it-(($e=it+Re)-(Ee=$e-it))+(Re-Ee))-(Re=Oe-rt),P[1]=Oe-(Re+Ee)+(Ee-rt),Ee=(It=$e+Re)-$e,P[2]=$e-(It-Ee)+(Re-Ee),P[3]=It;const ur=o(sr,v,4,P,x);Ee=(Ye=(Se=de-(fe=(Ae=134217729*de)-(Ae-de)))*(De=xe-(we=(Ae=134217729*xe)-(Ae-xe)))-((it=de*xe)-fe*we-Se*we-fe*De))-(Re=Ye-(Ie=(Se=Me-(fe=(Ae=134217729*Me)-(Ae-Me)))*(De=ge-(we=(Ae=134217729*ge)-(Ae-ge)))-((rt=Me*ge)-fe*we-Se*we-fe*De))),P[0]=Ye-(Re+Ee)+(Ee-Ie),Ee=(Oe=it-(($e=it+Re)-(Ee=$e-it))+(Re-Ee))-(Re=Oe-rt),P[1]=Oe-(Re+Ee)+(Ee-rt),Ee=(It=$e+Re)-$e,P[2]=$e-(It-Ee)+(Re-Ee),P[3]=It;const ar=o(ur,x,4,P,b);return b[ar-1]})(I,k,M,O,F,N,H)},r.orient2dfast=function(I,k,M,O,F,N){return(k-N)*(M-F)-(I-F)*(O-N)},Object.defineProperty(r,"__esModule",{value:!0})})})(jv,jv.exports)),jv.exports}var rO;function yhe(){if(rO)return $b.exports;rO=1;var e=she(),t=dhe,r=phe(),n=ghe().orient2d;t.default&&(t=t.default),$b.exports=i,$b.exports.default=i;function i(N,$,j){$=Math.max(0,$===void 0?2:$),j=j||0;var U=b(N),H=new e(16);H.toBBox=function(fe){return{minX:fe[0],minY:fe[1],maxX:fe[0],maxY:fe[1]}},H.compareMinX=function(fe,Se){return fe[0]-Se[0]},H.compareMinY=function(fe,Se){return fe[1]-Se[1]},H.load(N);for(var Y=[],ae=0,ee;ae<U.length;ae++){var G=U[ae];H.remove(G),ee=P(G,ee),Y.push(ee)}var ie=new e(16);for(ae=0;ae<Y.length;ae++)ie.insert(x(Y[ae]));for(var oe=$*$,ue=j*j;Y.length;){var de=Y.shift(),Me=de.p,ge=de.next.p,xe=I(Me,ge);if(!(xe<ue)){var Ee=xe/oe;G=o(H,de.prev.p,Me,ge,de.next.next.p,Ee,ie),G&&Math.min(I(G,Me),I(G,ge))<=Ee&&(Y.push(de),Y.push(P(G,de)),H.remove(G),ie.remove(de),ie.insert(x(de)),ie.insert(x(de.next)))}}de=ee;var Ae=[];do Ae.push(de.p),de=de.next;while(de!==ee);return Ae.push(de.p),Ae}function o(N,$,j,U,H,Y,ae){for(var ee=new t([],l),G=N.data;G;){for(var ie=0;ie<G.children.length;ie++){var oe=G.children[ie],ue=G.leaf?k(oe,j,U):a(j,U,oe);ue>Y||ee.push({node:oe,dist:ue})}for(;ee.length&&!ee.peek().node.children;){var de=ee.pop(),Me=de.node,ge=k(Me,$,j),xe=k(Me,U,H);if(de.dist<ge&&de.dist<xe&&p(j,Me,ae)&&p(U,Me,ae))return Me}G=ee.pop(),G&&(G=G.node)}return null}function l(N,$){return N.dist-$.dist}function a(N,$,j){if(c(N,j)||c($,j))return 0;var U=M(N[0],N[1],$[0],$[1],j.minX,j.minY,j.maxX,j.minY);if(U===0)return 0;var H=M(N[0],N[1],$[0],$[1],j.minX,j.minY,j.minX,j.maxY);if(H===0)return 0;var Y=M(N[0],N[1],$[0],$[1],j.maxX,j.minY,j.maxX,j.maxY);if(Y===0)return 0;var ae=M(N[0],N[1],$[0],$[1],j.minX,j.maxY,j.maxX,j.maxY);return ae===0?0:Math.min(U,H,Y,ae)}function c(N,$){return N[0]>=$.minX&&N[0]<=$.maxX&&N[1]>=$.minY&&N[1]<=$.maxY}function p(N,$,j){for(var U=Math.min(N[0],$[0]),H=Math.min(N[1],$[1]),Y=Math.max(N[0],$[0]),ae=Math.max(N[1],$[1]),ee=j.search({minX:U,minY:H,maxX:Y,maxY:ae}),G=0;G<ee.length;G++)if(v(ee[G].p,ee[G].next.p,N,$))return!1;return!0}function g(N,$,j){return n(N[0],N[1],$[0],$[1],j[0],j[1])}function v(N,$,j,U){return N!==U&&$!==j&&g(N,$,j)>0!=g(N,$,U)>0&&g(j,U,N)>0!=g(j,U,$)>0}function x(N){var $=N.p,j=N.next.p;return N.minX=Math.min($[0],j[0]),N.minY=Math.min($[1],j[1]),N.maxX=Math.max($[0],j[0]),N.maxY=Math.max($[1],j[1]),N}function b(N){for(var $=N[0],j=N[0],U=N[0],H=N[0],Y=0;Y<N.length;Y++){var ae=N[Y];ae[0]<$[0]&&($=ae),ae[0]>U[0]&&(U=ae),ae[1]<j[1]&&(j=ae),ae[1]>H[1]&&(H=ae)}var ee=[$,j,U,H],G=ee.slice();for(Y=0;Y<N.length;Y++)r(N[Y],ee)||G.push(N[Y]);return F(G)}function P(N,$){var j={p:N,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return $?(j.next=$.next,j.prev=$,$.next.prev=j,$.next=j):(j.prev=j,j.next=j),j}function I(N,$){var j=N[0]-$[0],U=N[1]-$[1];return j*j+U*U}function k(N,$,j){var U=$[0],H=$[1],Y=j[0]-U,ae=j[1]-H;if(Y!==0||ae!==0){var ee=((N[0]-U)*Y+(N[1]-H)*ae)/(Y*Y+ae*ae);ee>1?(U=j[0],H=j[1]):ee>0&&(U+=Y*ee,H+=ae*ee)}return Y=N[0]-U,ae=N[1]-H,Y*Y+ae*ae}function M(N,$,j,U,H,Y,ae,ee){var G=j-N,ie=U-$,oe=ae-H,ue=ee-Y,de=N-H,Me=$-Y,ge=G*G+ie*ie,xe=G*oe+ie*ue,Ee=oe*oe+ue*ue,Ae=G*de+ie*Me,fe=oe*de+ue*Me,Se=ge*Ee-xe*xe,we,De,Re,$e,Oe=Se,it=Se;Se===0?(De=0,Oe=1,$e=fe,it=Ee):(De=xe*fe-Ee*Ae,$e=ge*fe-xe*Ae,De<0?(De=0,$e=fe,it=Ee):De>Oe&&(De=Oe,$e=fe+xe,it=Ee)),$e<0?($e=0,-Ae<0?De=0:-Ae>ge?De=Oe:(De=-Ae,Oe=ge)):$e>it&&($e=it,-Ae+xe<0?De=0:-Ae+xe>ge?De=Oe:(De=-Ae+xe,Oe=ge)),we=De===0?0:De/Oe,Re=$e===0?0:$e/it;var Ye=(1-we)*N+we*j,rt=(1-we)*$+we*U,Ie=(1-Re)*H+Re*ae,It=(1-Re)*Y+Re*ee,at=Ie-Ye,je=It-rt;return at*at+je*je}function O(N,$){return N[0]===$[0]?N[1]-$[1]:N[0]-$[0]}function F(N){N.sort(O);for(var $=[],j=0;j<N.length;j++){for(;$.length>=2&&g($[$.length-2],$[$.length-1],N[j])<=0;)$.pop();$.push(N[j])}for(var U=[],H=N.length-1;H>=0;H--){for(;U.length>=2&&g(U[U.length-2],U[U.length-1],N[H])<=0;)U.pop();U.push(N[H])}return U.pop(),$.pop(),$.concat(U)}return $b.exports}var vhe=yhe();const bhe=rf(vhe);function _he(e,t={}){t.concavity=t.concavity||1/0;const r=[];if(Py(e,i=>{r.push([i[0],i[1]])}),!r.length)return null;const n=bhe(r,t.concavity);return n.length>3?O2([n]):null}function jI(e,t={}){switch(o$(e)){case"Point":return Vc(Bh(e),t.properties);case"Polygon":var r=[];Py(e,function(N){r.push(N)});var n=ZN(e,{properties:t.properties}),i=n.geometry.coordinates,o=0,l=0,a=0,c,p,g,v,x,b,P,I,k=r.map(function(N){return[N[0]-i[0],N[1]-i[1]]});for(c=0;c<r.length-1;c++)p=k[c],v=p[0],b=p[1],g=k[c+1],x=g[0],P=g[1],I=v*P-x*b,a+=I,o+=(v+x)*I,l+=(b+P)*I;if(a===0)return n;var M=a*.5,O=1/(6*M);return Vc([i[0]+O*o,i[1]+O*l],t.properties);default:var F=_he(e);return F?jI(F,{properties:t.properties}):ZN(e,{properties:t.properties})}}function C$(e,t,r={}){const n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[];for(let l=0;l<n;l++)o.push(dy(e,t,l*-360/n,r).geometry.coordinates);return o.push(o[0]),O2([o],i)}function xhe(e){return e}function whe(e){if(e==null)return xhe;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],l=e.translate[1];return function(a,c){c||(t=r=0);var p=2,g=a.length,v=new Array(g);for(v[0]=(t+=a[0])*n+o,v[1]=(r+=a[1])*i+l;p<g;)v[p]=a[p],++p;return v}}function She(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}function Che(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return nO(e,r)})}:nO(e,t)}function nO(e,t){var r=t.id,n=t.bbox,i=t.properties==null?{}:t.properties,o=Ehe(e,t);return r==null&&n==null?{type:"Feature",properties:i,geometry:o}:n==null?{type:"Feature",id:r,properties:i,geometry:o}:{type:"Feature",id:r,bbox:n,properties:i,geometry:o}}function Ehe(e,t){var r=whe(e.transform),n=e.arcs;function i(g,v){v.length&&v.pop();for(var x=n[g<0?~g:g],b=0,P=x.length;b<P;++b)v.push(r(x[b],b));g<0&&She(v,P)}function o(g){return r(g)}function l(g){for(var v=[],x=0,b=g.length;x<b;++x)i(g[x],v);return v.length<2&&v.push(v[0]),v}function a(g){for(var v=l(g);v.length<4;)v.push(v[0]);return v}function c(g){return g.map(a)}function p(g){var v=g.type,x;switch(v){case"GeometryCollection":return{type:v,geometries:g.geometries.map(p)};case"Point":x=o(g.coordinates);break;case"MultiPoint":x=g.coordinates.map(o);break;case"LineString":x=l(g.arcs);break;case"MultiLineString":x=g.arcs.map(l);break;case"Polygon":x=c(g.arcs);break;case"MultiPolygon":x=g.arcs.map(c);break;default:return null}return{type:v,coordinates:x}}return p(t)}function N0(e,t={}){return rfe(e,(r,n)=>{const i=n.geometry.coordinates;return r+F2(i[0],i[1],t)},0)}function The(e,t,r,n,i={}){const o=i.steps||64,l=iO(r),a=iO(n),c=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(l===a)return zl(C$(e,t,i).geometry.coordinates[0],c);const p=l,g=l<a?a:a+360;let v=p;const x=[];let b=0;const P=(g-p)/o;for(;v<=g;)x.push(dy(e,t,v,i).geometry.coordinates),b++,v=p+b*P;return zl(x,c)}function iO(e){let t=e%360;return t<0&&(t+=360),t}function Phe(e,t,r,n){if(n=n||{},!FI(n))throw new Error("options is invalid");var i,o=[];if(e.type==="Feature")i=e.geometry.coordinates;else if(e.type==="LineString")i=e.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var l=i.length,a=0,c,p,g,v=0;v<i.length&&!(t>=a&&v===i.length-1);v++){if(a>t&&o.length===0){if(c=t-a,!c)return o.push(i[v]),zl(o);p=L0(i[v],i[v-1])-180,g=dy(i[v],c,p,n),o.push(g.geometry.coordinates)}if(a>=r)return c=r-a,c?(p=L0(i[v],i[v-1])-180,g=dy(i[v],c,p,n),o.push(g.geometry.coordinates),zl(o)):(o.push(i[v]),zl(o));if(a>=t&&o.push(i[v]),v===i.length-1)return zl(o);a+=F2(i[v],i[v+1],n)}if(a<t&&i.length===l)throw new Error("Start position is beyond line");var x=i[i.length-1];return zl([x,x])}function Ihe(e,t,r){if(r=r||{},!FI(r))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return BI(e,function(l){i&&(l.geometry.coordinates=l.geometry.coordinates.reverse()),khe(l,t,n,function(a){o.push(a)})}),Uf(o)}function khe(e,t,r,n){var i=N0(e,{units:r});if(i<=t)return n(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var l=0;l<o;l++){var a=Phe(e,t*l,t*(l+1),{units:r});n(a,l)}}function ux(e){var t=e[0],r=e[1];return[r[0]-t[0],r[1]-t[1]]}function XT(e,t){return e[0]*t[1]-t[0]*e[1]}function Ahe(e,t){return[e[0]+t[0],e[1]+t[1]]}function Mhe(e,t){return[e[0]-t[0],e[1]-t[1]]}function Lhe(e,t){return[e*t[0],e*t[1]]}function Rhe(e,t){var r=e[0],n=ux(e),i=t[0],o=ux(t),l=XT(n,o),a=Mhe(i,r),c=XT(a,o),p=c/l,g=Ahe(r,Lhe(p,n));return g}function Dhe(e,t){var r=ux(e),n=ux(t);return XT(r,n)===0}function Nhe(e,t){return Dhe(e,t)?!1:Rhe(e,t)}function Ohe(e,t,r){if(r=r||{},!FI(r))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");var i=o$(e),o=e.properties;switch(i){case"LineString":return aO(e,t,n);case"MultiLineString":var l=[];return BI(e,function(a){l.push(aO(a,t,n).geometry.coordinates)}),Zde(l,o);default:throw new Error("geometry "+i+" is not supported")}}function aO(e,t,r){var n=[],i=Kde(t,r),o=a$(e),l=[];return o.forEach(function(a,c){if(c!==o.length-1){var p=Fhe(a,o[c+1],i);if(n.push(p),c>0){var g=n[c-1],v=Nhe(p,g);v!==!1&&(g[1]=v,p[0]=v),l.push(g[0]),c===o.length-2&&(l.push(p[0]),l.push(p[1]))}o.length===2&&(l.push(p[0]),l.push(p[1]))}}),zl(l,e.properties)}function Fhe(e,t,r){var n=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=e[0]+r*(t[1]-e[1])/n,o=t[0]+r*(t[1]-e[1])/n,l=e[1]+r*(e[0]-t[0])/n,a=t[1]+r*(e[0]-t[0])/n;return[[i,l],[o,a]]}function Bhe(e){const r=window.getComputedStyle(e,null).getPropertyValue("transform");let n=0;if(r!=="none"){const i=r.split("(")[1].split(")")[0].split(","),o=parseFloat(i[0]),l=parseFloat(i[1]);n=Math.round(Math.atan2(l,o)*(180/Math.PI))}return n<0?n+360:n}function Vb(e,t,r){const n=getComputedStyle(e),i=[t[0]-r[0],t[1]-r[1]],o=new DOMMatrixReadOnly(n.transform);return[i[0]*o.a+i[1]*o.c+o.e+r[0],i[0]*o.b+i[1]*o.d+o.f+r[1]]}const oO=10;function Ub(e,t){const r=t.unproject(e),n=t.unproject([e[0]+oO,e[1]]),i=r.distanceTo(n);return oO/i}function YT(e){const t=p2({mapId:e.mapId,watch:{layers:!1,viewport:!0}}),r=Q.useRef(null),n=Q.useRef(null),i=Q.useRef(null),o=Q.useRef(document.querySelector(".mapContainer")),l=la({mapId:e.mapId});Q.useEffect(()=>{if(!t?.viewport?.zoom||!l.map)return;const p=Math.round(l.map.map._container.clientWidth/2),g=Math.round(l.map.map._container.clientHeight/2);if(!e.options.scale){const v=1/Ub([p,g],l.map.map);e.setOptions(x=>({...x,scale:[v,v]}))}if(!e.options.center){const v=l.map.map.unproject([p,g]);e.setOptions(x=>({...x,center:[v.lng,v.lat]}))}},[l.map,t.viewport?.zoom]),Q.useEffect(()=>{if(!l.map)return;l.map.map.setPitch(0);const p=l.map.map.getMaxPitch();return l.map.map.setMaxPitch(0),()=>{l.map?.map.setMaxPitch(p)}},[l.map]);const a=Q.useMemo(()=>e.options.orientation==="portrait"?[e.options.width/2,e.options.height/2]:[e.options.height/2,e.options.width/2],[e.options.orientation,e.options.width,e.options.height]),c=Q.useMemo(()=>{if(!l.map||!e.options.scale)return"none";const p=l.map.map.project(e.options.center),g=p.x,v=p.y,x=e.options.scale[0]*Ub([g,v],l.map.map),b=t?.viewport?.bearing?t.viewport?.bearing:0,P=`translate(${Math.floor(p.x-a[0])}px,${Math.floor(p.y-a[1])}px) rotate(${e.options.rotate-b}deg) scale(${x},${x})`;return r.current&&(r.current.style.transform=P),P},[l.map,t.viewport,e.options.scale,e.options.rotate,e.options.center,a]);return Q.useEffect(()=>{i.current?.updateTarget()},[c]),Q.useEffect(()=>{if(!l.map||!e.options.center||!e.options.fixedScale||typeof e.options.fixedScale<"u"&&n.current===e.options.fixedScale)return;n.current=e.options.fixedScale;const p=Vc(e.options.center),g=e.options.fixedScale*(e.options.width/1e3),b=dy(p,g,90,{units:"meters"}),P=l.map.map.project(p.geometry.coordinates),I=l.map.map.project(b.geometry.coordinates),k=Math.round(I.x-P.x)/e.options.width*(1/Ub([P.x,P.y],l.map.map));e.setOptions(M=>({...M,scale:[k,k]}))},[l.map,e.options.width,e.options.center,e.options.fixedScale]),Q.useEffect(()=>{if(r.current&&l.map){let p=e.options.width,g=e.options.height;e.options.orientation==="portrait"?(r.current.style.width=e.options.width+"px",r.current.style.height=e.options.height+"px"):(r.current.style.width=e.options.height+"px",r.current.style.height=e.options.width+"px",p=e.options.height,g=e.options.width),i.current?.updateTarget();const v=l.map.map.unproject(Vb(r.current,[0,0],a)),x=l.map.map.unproject(Vb(r.current,[p,0],a)),b=l.map.map.unproject(Vb(r.current,[0,g],a)),P=l.map.map.unproject(Vb(r.current,[p,g],a)),I={type:"Feature",bbox:[v.lng,v.lat,P.lng,P.lat],geometry:{type:"Polygon",coordinates:[[[v.lng,v.lat],[x.lng,x.lat],[P.lng,P.lat],[b.lng,b.lat],[v.lng,v.lat]]]},properties:{bearing:Bhe(r.current)}};e.geojsonRef.current=I}},[l,c,e.options.orientation,e.geojsonRef,t,r.current,a]),o.current?kv.createPortal(Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"target",ref:r,style:{transform:c,transformOrigin:"center center"}}),Z.jsx(Yde,{ref:i,target:r,container:null,origin:!0,keepRatio:!0,draggable:!0,onDrag:p=>{if(l.map){let g=p.transform.split("translate(");g=g[1].split("px)")[0].split("px, ");const v=l.map?.map.unproject([parseInt(g[0])+a[0],parseInt(g[1])+a[1]]);e.setOptions(x=>({...x,center:[v.lng,v.lat]}))}},scalable:!e.options.fixedScale,onScale:p=>{if(l.map){let g=p.drag.transform.split("scale(");g=g[1].split(")")[0].split(", ");const v=l.map.map.project(e.options.center),x=v.x,b=v.y,P=parseFloat(g[0])*(1/Ub([x,b],l.map.map));e.setOptions(I=>({...I,scale:[P,P]}))}},rotatable:!0,onRotate:p=>{if(l.map&&t.viewport){const v=p.drag.transform.split("rotate(")[1].split("deg)")[0],x=t?.viewport?.bearing?t.viewport.bearing:0;e.setOptions(b=>({...b,rotate:parseFloat(v)+x}))}}})]}),o.current):Z.jsx(Z.Fragment,{})}try{YT.displayName="PdfPreview",YT.__docgenInfo={description:"PdfPreview component renders a transformable (drag, scale, rotate) preview of the desired export or print content",displayName:"PdfPreview",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},geojsonRef:{defaultValue:null,description:"Polygon GeoJson Feature representing the printing area",name:"geojsonRef",required:!0,type:{name:"MutableRefObject<Feature<Geometry, GeoJsonProperties> | undefined>"}},options:{defaultValue:null,description:"a state variable containing the PDF previews current state",name:"options",required:!0,type:{name:"PdfPreviewOptions"}},setOptions:{defaultValue:null,description:"setter function to update the current PDF preview state",name:"setOptions",required:!0,type:{name:"(arg1: (val: PdfPreviewOptions) => PdfPreviewOptions) => void"}}}}}catch{}const zhe=[{value:0,label:"free scale"},{value:250,label:"1/250"},{value:500,label:"1/500"},{value:750,label:"1/750"},{value:1e3,label:"1/1000"},{value:1500,label:"1/1500"},{value:2e3,label:"1/2000"},{value:1e4,label:"1/10000"},{value:1e5,label:"1/100000"}],jhe=[{value:"72dpi",label:"Draft (72dpi)"},{value:"150dpi",label:"Medium (150dpi)"},{value:"300dpi",label:"High (300dpi)"}];function ZT(e){const[t,r]=Q.useState(!1),n=Q.useContext(vj),i=la({mapId:e.mapId}),o=yj({mapId:e.mapId}),l=Q.useCallback(()=>{if(i.map&&o.createExport&&n.template&&n.format&&n.options?.orientation&&n.geojsonRef?.current?.bbox&&n.geojsonRef?.current){r(!0);const p=yc(n.geojsonRef.current);o.createExport({width:n.template.width,height:n.template.height,bbox:p,bboxUnrotated:n.geojsonRef.current.bbox,bearing:n.geojsonRef.current?.properties?.bearing||0,format:n.format.toLowerCase(),orientation:n.options.orientation}).then(g=>g.createPdf()).then(g=>(typeof e.onCreatePdf=="function"&&(g.formData=new FormData(document.getElementById("createPdfFormID")),e.onCreatePdf(g)),r(!1),g.downloadPdf())).catch(g=>{console.log(g),r(!1)})}},[i.map,n]),a=l1("(max-width: 950px)"),c=Q.useMemo(()=>({margin:a?"1px 0 8px 0 ":"5px 0 15px 0 ",...e?.formControlStyles?{...e.formControlStyles}:{}}),[a,e.formControlStyles]);return Z.jsx(Z.Fragment,{children:Z.jsxs("form",{id:"createPdfFormID",children:[Z.jsxs(cc,{fullWidth:!0,sx:c,children:[Z.jsx(ji,{variant:"contained",className:"createPdfButton",onClick:l,disabled:t,sx:{marginBottom:"16px"},children:"create PDF"}),t&&Z.jsx(y2,{size:24,sx:{color:"primary.main",position:"absolute",top:"25%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),Z.jsxs(cc,{fullWidth:!0,sx:c,children:[Z.jsx(Ih,{sx:{marginTop:"3px"},id:"format-select-label",children:"Format"}),Z.jsx(kh,{labelId:"format-select-label",id:"format-select",label:"Format",value:n.format,onChange:p=>{n.setFormat?.(p.target.value)},children:Object.keys(Mg).map(p=>Z.jsx(Np,{value:p,children:p},p))})]}),Z.jsxs(cc,{fullWidth:!0,sx:c,children:[Z.jsx(h7,{id:"orientation-radio-buttons-group-label",children:"Orientation"}),Z.jsxs(One,{row:!0,"aria-labelledby":"orientation-radio-buttons-group-label",name:"orientation-radio-buttons-group",value:n.options?.orientation,onChange:p=>{n.setOptions&&n.setOptions(g=>({...g,orientation:p.target.value}))},children:[Z.jsx(nT,{value:"portrait",control:Z.jsx(hR,{}),label:"Portrait"}),Z.jsx(nT,{value:"landscape",control:Z.jsx(hR,{}),label:"Landscape"})]})]}),Z.jsxs(cc,{fullWidth:!0,sx:c,children:[Z.jsx(Ih,{id:"quality-select-label",children:"Quality"}),Z.jsx(kh,{labelId:"quality-select-label",id:"quality-select",label:"Quality",value:n.quality,onChange:p=>{n.setQuality?.(p.target.value)},children:jhe.map(p=>Z.jsx(Np,{value:p.value,children:p.label},p.value))})]}),Z.jsxs(cc,{fullWidth:!0,sx:c,children:[Z.jsx(Ih,{id:"scale-select-label",children:"Scale"}),Z.jsx(kh,{labelId:"scale-select-label",id:"scale-select",label:"Scale",value:n?.options?.fixedScale,onChange:p=>{n.setOptions?.(g=>({...g,fixedScale:p.target.value}))},children:zhe.map((p,g)=>Z.jsx(Np,{value:p.value,children:p.label},g))})]}),e?.additionalFields,n.options&&n.setOptions&&Z.jsx(YT,{options:n.options,setOptions:n.setOptions,geojsonRef:n.geojsonRef})]})})}try{ZT.displayName="PdfForm",ZT.__docgenInfo={description:"",displayName:"PdfForm",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},onCreatePdf:{defaultValue:null,description:`Function that will be called before the PDF is created.
Allowing to access and manipulate the jspdf instance before the PDF is created.`,name:"onCreatePdf",required:!1,type:{name:"((options: createPdfResolverParams) => createPdfResolverParams) | undefined"}},formControlStyles:{defaultValue:null,description:"sx props that will be applied to the form control components",name:"formControlStyles",required:!1,type:{name:"SxProps | undefined"}},additionalFields:{defaultValue:null,description:`Define additional form fields that will be added to the bottom of the create-PDF form.
Values of form elements added this way are accessible inside the function passed to the onCreatePdf property using options.formData.get('{form_el_name}').
Make sure all form elements added this way have a name property defined to be able to access the value when rendering the PDF.`,name:"additionalFields",required:!1,type:{name:"ReactNode"}}}}}catch{}const sO=e=>Z.jsx(Z.Fragment,{children:Z.jsx(yT,{children:Z.jsx(ZT,{...e})})});try{sO.displayName="MlCreatePdfForm",sO.__docgenInfo={description:"Create PDF Form Component",displayName:"MlCreatePdfForm",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},onCreatePdf:{defaultValue:null,description:`Function that will be called before the PDF is created.
Allowing to access and manipulate the jspdf instance before the PDF is created.`,name:"onCreatePdf",required:!1,type:{name:"((options: createPdfResolverParams) => createPdfResolverParams) | undefined"}},formControlStyles:{defaultValue:null,description:"sx props that will be applied to the form control components",name:"formControlStyles",required:!1,type:{name:"SxProps | undefined"}},additionalFields:{defaultValue:null,description:`Define additional form fields that will be added to the bottom of the create-PDF form.
Values of form elements added this way are accessible inside the function passed to the onCreatePdf property using options.formData.get('{form_el_name}').
Make sure all form elements added this way have a name property defined to be able to access the value when rendering the PDF.`,name:"additionalFields",required:!1,type:{name:"ReactNode"}}}}}catch{}var x_={exports:{}},qhe=x_.exports,lO;function $he(){return lO||(lO=1,(function(e,t){(function(r,n){e.exports=n()})(qhe,(function(){var r=function(J,pe){var Xe={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Ct={on:function(kt,Xt,Or){if(Xe[kt]===void 0)throw new Error("Invalid event type: "+kt);Xe[kt].push({selector:Xt,fn:Or})},render:function(kt){pe.store.featureChanged(kt)}},Rt=function(kt,Xt){for(var Or=Xe[kt],qr=Or.length;qr--;){var Br=Or[qr];if(Br.selector(Xt)){Br.fn.call(Ct,Xt)||pe.store.render(),pe.ui.updateMapClasses();break}}};return J.start.call(Ct),{render:J.render,stop:function(){J.stop&&J.stop()},trash:function(){J.trash&&(J.trash(),pe.store.render())},combineFeatures:function(){J.combineFeatures&&J.combineFeatures()},uncombineFeatures:function(){J.uncombineFeatures&&J.uncombineFeatures()},drag:function(kt){Rt("drag",kt)},click:function(kt){Rt("click",kt)},mousemove:function(kt){Rt("mousemove",kt)},mousedown:function(kt){Rt("mousedown",kt)},mouseup:function(kt){Rt("mouseup",kt)},mouseout:function(kt){Rt("mouseout",kt)},keydown:function(kt){Rt("keydown",kt)},keyup:function(kt){Rt("keyup",kt)},touchstart:function(kt){Rt("touchstart",kt)},touchmove:function(kt){Rt("touchmove",kt)},touchend:function(kt){Rt("touchend",kt)},tap:function(kt){Rt("tap",kt)}}};function n(J){return J&&J.__esModule&&Object.prototype.hasOwnProperty.call(J,"default")?J.default:J}function i(J){if(J.__esModule)return J;var pe=J.default;if(typeof pe=="function"){var Xe=function Ct(){if(this instanceof Ct){var Rt=[null];Rt.push.apply(Rt,arguments);var kt=Function.bind.apply(pe,Rt);return new kt}return pe.apply(this,arguments)};Xe.prototype=pe.prototype}else Xe={};return Object.defineProperty(Xe,"__esModule",{value:!0}),Object.keys(J).forEach((function(Ct){var Rt=Object.getOwnPropertyDescriptor(J,Ct);Object.defineProperty(Xe,Ct,Rt.get?Rt:{enumerable:!0,get:function(){return J[Ct]}})})),Xe}var o={},l={RADIUS:6378137},a=l;function c(J){var pe=0;if(J&&J.length>0){pe+=Math.abs(p(J[0]));for(var Xe=1;Xe<J.length;Xe++)pe-=Math.abs(p(J[Xe]))}return pe}function p(J){var pe,Xe,Ct,Rt,kt,Xt,Or=0,qr=J.length;if(qr>2){for(Xt=0;Xt<qr;Xt++)Xt===qr-2?(Ct=qr-2,Rt=qr-1,kt=0):Xt===qr-1?(Ct=qr-1,Rt=0,kt=1):(Ct=Xt,Rt=Xt+1,kt=Xt+2),pe=J[Ct],Xe=J[Rt],Or+=(g(J[kt][0])-g(pe[0]))*Math.sin(g(Xe[1]));Or=Or*a.RADIUS*a.RADIUS/2}return Or}function g(J){return J*Math.PI/180}o.geometry=function J(pe){var Xe,Ct=0;switch(pe.type){case"Polygon":return c(pe.coordinates);case"MultiPolygon":for(Xe=0;Xe<pe.coordinates.length;Xe++)Ct+=c(pe.coordinates[Xe]);return Ct;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Xe=0;Xe<pe.geometries.length;Xe++)Ct+=J(pe.geometries[Xe]);return Ct}},o.ring=p;var v={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},x={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},b={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},P={POLYGON:"polygon",LINE:"line_string",POINT:"point"},I={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},k={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},M={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},O={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},F={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},N={ACTIVE:"true",INACTIVE:"false"},$=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],j=-85,U=Object.freeze({__proto__:null,classes:v,sources:x,cursors:b,types:P,geojsonTypes:I,modes:k,events:M,updateActions:O,meta:F,activeStates:N,interactions:$,LAT_MIN:-90,LAT_RENDERED_MIN:j,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),H={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Y(J,pe){var Xe=H[J.geometry.type]-H[pe.geometry.type];return Xe===0&&J.geometry.type===I.POLYGON?J.area-pe.area:Xe}function ae(J){return J.map((function(pe){return pe.geometry.type===I.POLYGON&&(pe.area=o.geometry({type:I.FEATURE,property:{},geometry:pe.geometry})),pe})).sort(Y).map((function(pe){return delete pe.area,pe}))}function ee(J,pe){return pe===void 0&&(pe=0),[[J.point.x-pe,J.point.y-pe],[J.point.x+pe,J.point.y+pe]]}function G(J){if(this._items={},this._nums={},this._length=J?J.length:0,J)for(var pe=0,Xe=J.length;pe<Xe;pe++)this.add(J[pe]),J[pe]!==void 0&&(typeof J[pe]=="string"?this._items[J[pe]]=pe:this._nums[J[pe]]=pe)}G.prototype.add=function(J){return this.has(J)||(this._length++,typeof J=="string"?this._items[J]=this._length:this._nums[J]=this._length),this},G.prototype.delete=function(J){return this.has(J)===!1||(this._length--,delete this._items[J],delete this._nums[J]),this},G.prototype.has=function(J){return(typeof J=="string"||typeof J=="number")&&(this._items[J]!==void 0||this._nums[J]!==void 0)},G.prototype.values=function(){var J=this,pe=[];return Object.keys(this._items).forEach((function(Xe){pe.push({k:Xe,v:J._items[Xe]})})),Object.keys(this._nums).forEach((function(Xe){pe.push({k:JSON.parse(Xe),v:J._nums[Xe]})})),pe.sort((function(Xe,Ct){return Xe.v-Ct.v})).map((function(Xe){return Xe.k}))},G.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ie=[F.FEATURE,F.MIDPOINT,F.VERTEX],oe={click:function(J,pe,Xe){return ue(J,pe,Xe,Xe.options.clickBuffer)},touch:function(J,pe,Xe){return ue(J,pe,Xe,Xe.options.touchBuffer)}};function ue(J,pe,Xe,Ct){if(Xe.map===null)return[];var Rt=J?ee(J,Ct):pe,kt={};Xe.options.styles&&(kt.layers=Xe.options.styles.map((function(Br){return Br.id})).filter((function(Br){return Xe.map.getLayer(Br)!=null})));var Xt=Xe.map.queryRenderedFeatures(Rt,kt).filter((function(Br){return ie.indexOf(Br.properties.meta)!==-1})),Or=new G,qr=[];return Xt.forEach((function(Br){var Sr=Br.properties.id;Or.has(Sr)||(Or.add(Sr),qr.push(Br))})),ae(qr)}function de(J,pe){var Xe=oe.click(J,null,pe),Ct={mouse:b.NONE};return Xe[0]&&(Ct.mouse=Xe[0].properties.active===N.ACTIVE?b.MOVE:b.POINTER,Ct.feature=Xe[0].properties.meta),pe.events.currentModeName().indexOf("draw")!==-1&&(Ct.mouse=b.ADD),pe.ui.queueMapClasses(Ct),pe.ui.updateMapClasses(),Xe[0]}function Me(J,pe){var Xe=J.x-pe.x,Ct=J.y-pe.y;return Math.sqrt(Xe*Xe+Ct*Ct)}function ge(J,pe,Xe){Xe===void 0&&(Xe={});var Ct=Xe.fineTolerance!=null?Xe.fineTolerance:4,Rt=Xe.grossTolerance!=null?Xe.grossTolerance:12,kt=Xe.interval!=null?Xe.interval:500;J.point=J.point||pe.point,J.time=J.time||pe.time;var Xt=Me(J.point,pe.point);return Xt<Ct||Xt<Rt&&pe.time-J.time<kt}function xe(J,pe,Xe){Xe===void 0&&(Xe={});var Ct=Xe.tolerance!=null?Xe.tolerance:25,Rt=Xe.interval!=null?Xe.interval:250;return J.point=J.point||pe.point,J.time=J.time||pe.time,Me(J.point,pe.point)<Ct&&pe.time-J.time<Rt}var Ee={exports:{}},Ae=Ee.exports=function(J,pe){if(pe||(pe=16),J===void 0&&(J=128),J<=0)return"0";for(var Xe=Math.log(Math.pow(2,J))/Math.log(pe),Ct=2;Xe===1/0;Ct*=2)Xe=Math.log(Math.pow(2,J/Ct))/Math.log(pe)*Ct;var Rt=Xe-Math.floor(Xe),kt="";for(Ct=0;Ct<Math.floor(Xe);Ct++)kt=Math.floor(Math.random()*pe).toString(pe)+kt;if(Rt){var Xt=Math.pow(pe,Rt);kt=Math.floor(Math.random()*Xt).toString(pe)+kt}var Or=parseInt(kt,pe);return Or!==1/0&&Or>=Math.pow(2,J)?Ae(J,pe):kt};Ae.rack=function(J,pe,Xe){var Ct=function(kt){var Xt=0;do{if(Xt++>10){if(!Xe)throw new Error("too many ID collisions, use more bits");J+=Xe}var Or=Ae(J,pe)}while(Object.hasOwnProperty.call(Rt,Or));return Rt[Or]=kt,Or},Rt=Ct.hats={};return Ct.get=function(kt){return Ct.hats[kt]},Ct.set=function(kt,Xt){return Ct.hats[kt]=Xt,Ct},Ct.bits=J||128,Ct.base=pe||16,Ct};var fe=n(Ee.exports),Se=function(J,pe){this.ctx=J,this.properties=pe.properties||{},this.coordinates=pe.geometry.coordinates,this.id=pe.id||fe(),this.type=pe.geometry.type};Se.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Se.prototype.incomingCoords=function(J){this.setCoordinates(J)},Se.prototype.setCoordinates=function(J){this.coordinates=J,this.changed()},Se.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Se.prototype.setProperty=function(J,pe){this.properties[J]=pe},Se.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:I.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Se.prototype.internal=function(J){var pe={id:this.id,meta:F.FEATURE,"meta:type":this.type,active:N.INACTIVE,mode:J};if(this.ctx.options.userProperties)for(var Xe in this.properties)pe["user_"+Xe]=this.properties[Xe];return{type:I.FEATURE,properties:pe,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var we=function(J,pe){Se.call(this,J,pe)};(we.prototype=Object.create(Se.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},we.prototype.updateCoordinate=function(J,pe,Xe){this.coordinates=arguments.length===3?[pe,Xe]:[J,pe],this.changed()},we.prototype.getCoordinate=function(){return this.getCoordinates()};var De=function(J,pe){Se.call(this,J,pe)};(De.prototype=Object.create(Se.prototype)).isValid=function(){return this.coordinates.length>1},De.prototype.addCoordinate=function(J,pe,Xe){this.changed();var Ct=parseInt(J,10);this.coordinates.splice(Ct,0,[pe,Xe])},De.prototype.getCoordinate=function(J){var pe=parseInt(J,10);return JSON.parse(JSON.stringify(this.coordinates[pe]))},De.prototype.removeCoordinate=function(J){this.changed(),this.coordinates.splice(parseInt(J,10),1)},De.prototype.updateCoordinate=function(J,pe,Xe){var Ct=parseInt(J,10);this.coordinates[Ct]=[pe,Xe],this.changed()};var Re=function(J,pe){Se.call(this,J,pe),this.coordinates=this.coordinates.map((function(Xe){return Xe.slice(0,-1)}))};(Re.prototype=Object.create(Se.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every((function(J){return J.length>2}))},Re.prototype.incomingCoords=function(J){this.coordinates=J.map((function(pe){return pe.slice(0,-1)})),this.changed()},Re.prototype.setCoordinates=function(J){this.coordinates=J,this.changed()},Re.prototype.addCoordinate=function(J,pe,Xe){this.changed();var Ct=J.split(".").map((function(Rt){return parseInt(Rt,10)}));this.coordinates[Ct[0]].splice(Ct[1],0,[pe,Xe])},Re.prototype.removeCoordinate=function(J){this.changed();var pe=J.split(".").map((function(Ct){return parseInt(Ct,10)})),Xe=this.coordinates[pe[0]];Xe&&(Xe.splice(pe[1],1),Xe.length<3&&this.coordinates.splice(pe[0],1))},Re.prototype.getCoordinate=function(J){var pe=J.split(".").map((function(Ct){return parseInt(Ct,10)})),Xe=this.coordinates[pe[0]];return JSON.parse(JSON.stringify(Xe[pe[1]]))},Re.prototype.getCoordinates=function(){return this.coordinates.map((function(J){return J.concat([J[0]])}))},Re.prototype.updateCoordinate=function(J,pe,Xe){this.changed();var Ct=J.split("."),Rt=parseInt(Ct[0],10),kt=parseInt(Ct[1],10);this.coordinates[Rt]===void 0&&(this.coordinates[Rt]=[]),this.coordinates[Rt][kt]=[pe,Xe]};var $e={MultiPoint:we,MultiLineString:De,MultiPolygon:Re},Oe=function(J,pe,Xe,Ct,Rt){var kt=Xe.split("."),Xt=parseInt(kt[0],10),Or=kt[1]?kt.slice(1).join("."):null;return J[Xt][pe](Or,Ct,Rt)},it=function(J,pe){if(Se.call(this,J,pe),delete this.coordinates,this.model=$e[pe.geometry.type],this.model===void 0)throw new TypeError(pe.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(pe.geometry.coordinates)};function Ye(J){this.map=J.map,this.drawConfig=JSON.parse(JSON.stringify(J.options||{})),this._ctx=J}(it.prototype=Object.create(Se.prototype))._coordinatesToFeatures=function(J){var pe=this,Xe=this.model.bind(this);return J.map((function(Ct){return new Xe(pe.ctx,{id:fe(),type:I.FEATURE,properties:{},geometry:{coordinates:Ct,type:pe.type.replace("Multi","")}})}))},it.prototype.isValid=function(){return this.features.every((function(J){return J.isValid()}))},it.prototype.setCoordinates=function(J){this.features=this._coordinatesToFeatures(J),this.changed()},it.prototype.getCoordinate=function(J){return Oe(this.features,"getCoordinate",J)},it.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(J){return J.type===I.POLYGON?J.getCoordinates():J.coordinates}))))},it.prototype.updateCoordinate=function(J,pe,Xe){Oe(this.features,"updateCoordinate",J,pe,Xe),this.changed()},it.prototype.addCoordinate=function(J,pe,Xe){Oe(this.features,"addCoordinate",J,pe,Xe),this.changed()},it.prototype.removeCoordinate=function(J){Oe(this.features,"removeCoordinate",J),this.changed()},it.prototype.getFeatures=function(){return this.features},Ye.prototype.setSelected=function(J){return this._ctx.store.setSelected(J)},Ye.prototype.setSelectedCoordinates=function(J){var pe=this;this._ctx.store.setSelectedCoordinates(J),J.reduce((function(Xe,Ct){return Xe[Ct.feature_id]===void 0&&(Xe[Ct.feature_id]=!0,pe._ctx.store.get(Ct.feature_id).changed()),Xe}),{})},Ye.prototype.getSelected=function(){return this._ctx.store.getSelected()},Ye.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Ye.prototype.isSelected=function(J){return this._ctx.store.isSelected(J)},Ye.prototype.getFeature=function(J){return this._ctx.store.get(J)},Ye.prototype.select=function(J){return this._ctx.store.select(J)},Ye.prototype.deselect=function(J){return this._ctx.store.deselect(J)},Ye.prototype.deleteFeature=function(J,pe){return pe===void 0&&(pe={}),this._ctx.store.delete(J,pe)},Ye.prototype.addFeature=function(J){return this._ctx.store.add(J)},Ye.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Ye.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Ye.prototype.setActionableState=function(J){J===void 0&&(J={});var pe={trash:J.trash||!1,combineFeatures:J.combineFeatures||!1,uncombineFeatures:J.uncombineFeatures||!1};return this._ctx.events.actionable(pe)},Ye.prototype.changeMode=function(J,pe,Xe){return pe===void 0&&(pe={}),Xe===void 0&&(Xe={}),this._ctx.events.changeMode(J,pe,Xe)},Ye.prototype.updateUIClasses=function(J){return this._ctx.ui.queueMapClasses(J)},Ye.prototype.activateUIButton=function(J){return this._ctx.ui.setActiveButton(J)},Ye.prototype.featuresAt=function(J,pe,Xe){if(Xe===void 0&&(Xe="click"),Xe!=="click"&&Xe!=="touch")throw new Error("invalid buffer type");return oe[Xe](J,pe,this._ctx)},Ye.prototype.newFeature=function(J){var pe=J.geometry.type;return pe===I.POINT?new we(this._ctx,J):pe===I.LINE_STRING?new De(this._ctx,J):pe===I.POLYGON?new Re(this._ctx,J):new it(this._ctx,J)},Ye.prototype.isInstanceOf=function(J,pe){if(J===I.POINT)return pe instanceof we;if(J===I.LINE_STRING)return pe instanceof De;if(J===I.POLYGON)return pe instanceof Re;if(J==="MultiFeature")return pe instanceof it;throw new Error("Unknown feature class: "+J)},Ye.prototype.doRender=function(J){return this._ctx.store.featureChanged(J)},Ye.prototype.onSetup=function(){},Ye.prototype.onDrag=function(){},Ye.prototype.onClick=function(){},Ye.prototype.onMouseMove=function(){},Ye.prototype.onMouseDown=function(){},Ye.prototype.onMouseUp=function(){},Ye.prototype.onMouseOut=function(){},Ye.prototype.onKeyUp=function(){},Ye.prototype.onKeyDown=function(){},Ye.prototype.onTouchStart=function(){},Ye.prototype.onTouchMove=function(){},Ye.prototype.onTouchEnd=function(){},Ye.prototype.onTap=function(){},Ye.prototype.onStop=function(){},Ye.prototype.onTrash=function(){},Ye.prototype.onCombineFeature=function(){},Ye.prototype.onUncombineFeature=function(){},Ye.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var rt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ie=Object.keys(rt);function It(J){var pe=Object.keys(J);return function(Xe,Ct){Ct===void 0&&(Ct={});var Rt={},kt=pe.reduce((function(Xt,Or){return Xt[Or]=J[Or],Xt}),new Ye(Xe));return{start:function(){var Xt=this;Rt=kt.onSetup(Ct),Ie.forEach((function(Or){var qr,Br=rt[Or],Sr=function(){return!1};J[Br]&&(Sr=function(){return!0}),Xt.on(Or,Sr,(qr=Br,function(Gr){return kt[qr](Rt,Gr)}))}))},stop:function(){kt.onStop(Rt)},trash:function(){kt.onTrash(Rt)},combineFeatures:function(){kt.onCombineFeatures(Rt)},uncombineFeatures:function(){kt.onUncombineFeatures(Rt)},render:function(Xt,Or){kt.toDisplayFeatures(Rt,Xt,Or)}}}}function at(J){return[].concat(J).filter((function(pe){return pe!==void 0}))}function je(){var J=this;if(!(J.ctx.map&&J.ctx.map.getSource(x.HOT)!==void 0))return qr();var pe=J.ctx.events.currentModeName();J.ctx.ui.queueMapClasses({mode:pe});var Xe=[],Ct=[];J.isDirty?Ct=J.getAllIds():(Xe=J.getChangedIds().filter((function(Br){return J.get(Br)!==void 0})),Ct=J.sources.hot.filter((function(Br){return Br.properties.id&&Xe.indexOf(Br.properties.id)===-1&&J.get(Br.properties.id)!==void 0})).map((function(Br){return Br.properties.id}))),J.sources.hot=[];var Rt=J.sources.cold.length;J.sources.cold=J.isDirty?[]:J.sources.cold.filter((function(Br){var Sr=Br.properties.id||Br.properties.parent;return Xe.indexOf(Sr)===-1}));var kt=Rt!==J.sources.cold.length||Ct.length>0;function Xt(Br,Sr){var Gr=J.get(Br).internal(pe);J.ctx.events.currentModeRender(Gr,(function(Un){J.sources[Sr].push(Un)}))}if(Xe.forEach((function(Br){return Xt(Br,"hot")})),Ct.forEach((function(Br){return Xt(Br,"cold")})),kt&&J.ctx.map.getSource(x.COLD).setData({type:I.FEATURE_COLLECTION,features:J.sources.cold}),J.ctx.map.getSource(x.HOT).setData({type:I.FEATURE_COLLECTION,features:J.sources.hot}),J._emitSelectionChange&&(J.ctx.map.fire(M.SELECTION_CHANGE,{features:J.getSelected().map((function(Br){return Br.toGeoJSON()})),points:J.getSelectedCoordinates().map((function(Br){return{type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:Br.coordinates}}}))}),J._emitSelectionChange=!1),J._deletedFeaturesToEmit.length){var Or=J._deletedFeaturesToEmit.map((function(Br){return Br.toGeoJSON()}));J._deletedFeaturesToEmit=[],J.ctx.map.fire(M.DELETE,{features:Or})}function qr(){J.isDirty=!1,J.clearChangedIds()}qr(),J.ctx.map.fire(M.RENDER,{})}function Ht(J){var pe,Xe=this;this._features={},this._featureIds=new G,this._selectedFeatureIds=new G,this._selectedCoordinates=[],this._changedFeatureIds=new G,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=J,this.sources={hot:[],cold:[]},this.render=function(){pe||(pe=requestAnimationFrame((function(){pe=null,je.call(Xe)})))},this.isDirty=!1}function Wt(J,pe){var Xe=J._selectedCoordinates.filter((function(Ct){return J._selectedFeatureIds.has(Ct.feature_id)}));J._selectedCoordinates.length===Xe.length||pe.silent||(J._emitSelectionChange=!0),J._selectedCoordinates=Xe}Ht.prototype.createRenderBatch=function(){var J=this,pe=this.render,Xe=0;return this.render=function(){Xe++},function(){J.render=pe,Xe>0&&J.render()}},Ht.prototype.setDirty=function(){return this.isDirty=!0,this},Ht.prototype.featureChanged=function(J){return this._changedFeatureIds.add(J),this},Ht.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ht.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ht.prototype.getAllIds=function(){return this._featureIds.values()},Ht.prototype.add=function(J){return this.featureChanged(J.id),this._features[J.id]=J,this._featureIds.add(J.id),this},Ht.prototype.delete=function(J,pe){var Xe=this;return pe===void 0&&(pe={}),at(J).forEach((function(Ct){Xe._featureIds.has(Ct)&&(Xe._featureIds.delete(Ct),Xe._selectedFeatureIds.delete(Ct),pe.silent||Xe._deletedFeaturesToEmit.indexOf(Xe._features[Ct])===-1&&Xe._deletedFeaturesToEmit.push(Xe._features[Ct]),delete Xe._features[Ct],Xe.isDirty=!0)})),Wt(this,pe),this},Ht.prototype.get=function(J){return this._features[J]},Ht.prototype.getAll=function(){var J=this;return Object.keys(this._features).map((function(pe){return J._features[pe]}))},Ht.prototype.select=function(J,pe){var Xe=this;return pe===void 0&&(pe={}),at(J).forEach((function(Ct){Xe._selectedFeatureIds.has(Ct)||(Xe._selectedFeatureIds.add(Ct),Xe._changedFeatureIds.add(Ct),pe.silent||(Xe._emitSelectionChange=!0))})),this},Ht.prototype.deselect=function(J,pe){var Xe=this;return pe===void 0&&(pe={}),at(J).forEach((function(Ct){Xe._selectedFeatureIds.has(Ct)&&(Xe._selectedFeatureIds.delete(Ct),Xe._changedFeatureIds.add(Ct),pe.silent||(Xe._emitSelectionChange=!0))})),Wt(this,pe),this},Ht.prototype.clearSelected=function(J){return J===void 0&&(J={}),this.deselect(this._selectedFeatureIds.values(),{silent:J.silent}),this},Ht.prototype.setSelected=function(J,pe){var Xe=this;return pe===void 0&&(pe={}),J=at(J),this.deselect(this._selectedFeatureIds.values().filter((function(Ct){return J.indexOf(Ct)===-1})),{silent:pe.silent}),this.select(J.filter((function(Ct){return!Xe._selectedFeatureIds.has(Ct)})),{silent:pe.silent}),this},Ht.prototype.setSelectedCoordinates=function(J){return this._selectedCoordinates=J,this._emitSelectionChange=!0,this},Ht.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ht.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ht.prototype.getSelected=function(){var J=this;return this._selectedFeatureIds.values().map((function(pe){return J.get(pe)}))},Ht.prototype.getSelectedCoordinates=function(){var J=this;return this._selectedCoordinates.map((function(pe){return{coordinates:J.get(pe.feature_id).getCoordinate(pe.coord_path)}}))},Ht.prototype.isSelected=function(J){return this._selectedFeatureIds.has(J)},Ht.prototype.setFeatureProperty=function(J,pe,Xe){this.get(J).setProperty(pe,Xe),this.featureChanged(J)},Ht.prototype.storeMapConfig=function(){var J=this;$.forEach((function(pe){J.ctx.map[pe]&&(J._mapInitialConfig[pe]=J.ctx.map[pe].isEnabled())}))},Ht.prototype.restoreMapConfig=function(){var J=this;Object.keys(this._mapInitialConfig).forEach((function(pe){J._mapInitialConfig[pe]?J.ctx.map[pe].enable():J.ctx.map[pe].disable()}))},Ht.prototype.getInitialConfigValue=function(J){return this._mapInitialConfig[J]===void 0||this._mapInitialConfig[J]};var zt=function(){for(var J=arguments,pe={},Xe=0;Xe<arguments.length;Xe++){var Ct=J[Xe];for(var Rt in Ct)st.call(Ct,Rt)&&(pe[Rt]=Ct[Rt])}return pe},st=Object.prototype.hasOwnProperty,sr=n(zt),ur=["mode","feature","mouse"];function ar(J){var pe=null,Xe=null,Ct={onRemove:function(){return J.map.off("load",Ct.connect),clearInterval(Xe),Ct.removeLayers(),J.store.restoreMapConfig(),J.ui.removeButtons(),J.events.removeEventListeners(),J.ui.clearMapClasses(),J.boxZoomInitial&&J.map.boxZoom.enable(),J.map=null,J.container=null,J.store=null,pe&&pe.parentNode&&pe.parentNode.removeChild(pe),pe=null,this},connect:function(){J.map.off("load",Ct.connect),clearInterval(Xe),Ct.addLayers(),J.store.storeMapConfig(),J.events.addEventListeners()},onAdd:function(Rt){var kt=Rt.fire;return Rt.fire=function(Xt,Or){var qr=arguments;return kt.length===1&&arguments.length!==1&&(qr=[sr({},{type:Xt},Or)]),kt.apply(Rt,qr)},J.map=Rt,J.events=(function(Xt){var Or=Object.keys(Xt.options.modes).reduce((function(Cr,tn){return Cr[tn]=It(Xt.options.modes[tn]),Cr}),{}),qr={},Br={},Sr={},Gr=null,Un=null;Sr.drag=function(Cr,tn){tn({point:Cr.point,time:new Date().getTime()})?(Xt.ui.queueMapClasses({mouse:b.DRAG}),Un.drag(Cr)):Cr.originalEvent.stopPropagation()},Sr.mousedrag=function(Cr){Sr.drag(Cr,(function(tn){return!ge(qr,tn)}))},Sr.touchdrag=function(Cr){Sr.drag(Cr,(function(tn){return!xe(Br,tn)}))},Sr.mousemove=function(Cr){if((Cr.originalEvent.buttons!==void 0?Cr.originalEvent.buttons:Cr.originalEvent.which)===1)return Sr.mousedrag(Cr);var tn=de(Cr,Xt);Cr.featureTarget=tn,Un.mousemove(Cr)},Sr.mousedown=function(Cr){qr={time:new Date().getTime(),point:Cr.point};var tn=de(Cr,Xt);Cr.featureTarget=tn,Un.mousedown(Cr)},Sr.mouseup=function(Cr){var tn=de(Cr,Xt);Cr.featureTarget=tn,ge(qr,{point:Cr.point,time:new Date().getTime()})?Un.click(Cr):Un.mouseup(Cr)},Sr.mouseout=function(Cr){Un.mouseout(Cr)},Sr.touchstart=function(Cr){if(Xt.options.touchEnabled){Br={time:new Date().getTime(),point:Cr.point};var tn=oe.touch(Cr,null,Xt)[0];Cr.featureTarget=tn,Un.touchstart(Cr)}},Sr.touchmove=function(Cr){if(Xt.options.touchEnabled)return Un.touchmove(Cr),Sr.touchdrag(Cr)},Sr.touchend=function(Cr){if(Cr.originalEvent.preventDefault(),Xt.options.touchEnabled){var tn=oe.touch(Cr,null,Xt)[0];Cr.featureTarget=tn,xe(Br,{time:new Date().getTime(),point:Cr.point})?Un.tap(Cr):Un.touchend(Cr)}};var pi=function(Cr){return!(Cr===8||Cr===46||Cr>=48&&Cr<=57)};function mn(Cr,tn,On){On===void 0&&(On={}),Un.stop();var ba=Or[Cr];if(ba===void 0)throw new Error(Cr+" is not valid");Gr=Cr;var gi=ba(Xt,tn);Un=r(gi,Xt),On.silent||Xt.map.fire(M.MODE_CHANGE,{mode:Cr}),Xt.store.setDirty(),Xt.store.render()}Sr.keydown=function(Cr){(Cr.srcElement||Cr.target).classList.contains("mapboxgl-canvas")&&(Cr.keyCode!==8&&Cr.keyCode!==46||!Xt.options.controls.trash?pi(Cr.keyCode)?Un.keydown(Cr):Cr.keyCode===49&&Xt.options.controls.point?mn(k.DRAW_POINT):Cr.keyCode===50&&Xt.options.controls.line_string?mn(k.DRAW_LINE_STRING):Cr.keyCode===51&&Xt.options.controls.polygon&&mn(k.DRAW_POLYGON):(Cr.preventDefault(),Un.trash()))},Sr.keyup=function(Cr){pi(Cr.keyCode)&&Un.keyup(Cr)},Sr.zoomend=function(){Xt.store.changeZoom()},Sr.data=function(Cr){if(Cr.dataType==="style"){var tn=Xt.setup,On=Xt.map,ba=Xt.options,gi=Xt.store;ba.styles.some((function(_a){return On.getLayer(_a.id)}))||(tn.addLayers(),gi.setDirty(),gi.render())}};var an={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Gr=Xt.options.defaultMode,Un=r(Or[Gr](Xt),Xt)},changeMode:mn,actionable:function(Cr){var tn=!1;Object.keys(Cr).forEach((function(On){if(an[On]===void 0)throw new Error("Invalid action type");an[On]!==Cr[On]&&(tn=!0),an[On]=Cr[On]})),tn&&Xt.map.fire(M.ACTIONABLE,{actions:an})},currentModeName:function(){return Gr},currentModeRender:function(Cr,tn){return Un.render(Cr,tn)},fire:function(Cr,tn){Sr[Cr]&&Sr[Cr](tn)},addEventListeners:function(){Xt.map.on("mousemove",Sr.mousemove),Xt.map.on("mousedown",Sr.mousedown),Xt.map.on("mouseup",Sr.mouseup),Xt.map.on("data",Sr.data),Xt.map.on("touchmove",Sr.touchmove),Xt.map.on("touchstart",Sr.touchstart),Xt.map.on("touchend",Sr.touchend),Xt.container.addEventListener("mouseout",Sr.mouseout),Xt.options.keybindings&&(Xt.container.addEventListener("keydown",Sr.keydown),Xt.container.addEventListener("keyup",Sr.keyup))},removeEventListeners:function(){Xt.map.off("mousemove",Sr.mousemove),Xt.map.off("mousedown",Sr.mousedown),Xt.map.off("mouseup",Sr.mouseup),Xt.map.off("data",Sr.data),Xt.map.off("touchmove",Sr.touchmove),Xt.map.off("touchstart",Sr.touchstart),Xt.map.off("touchend",Sr.touchend),Xt.container.removeEventListener("mouseout",Sr.mouseout),Xt.options.keybindings&&(Xt.container.removeEventListener("keydown",Sr.keydown),Xt.container.removeEventListener("keyup",Sr.keyup))},trash:function(Cr){Un.trash(Cr)},combineFeatures:function(){Un.combineFeatures()},uncombineFeatures:function(){Un.uncombineFeatures()},getMode:function(){return Gr}}})(J),J.ui=(function(Xt){var Or={},qr=null,Br={mode:null,feature:null,mouse:null},Sr={mode:null,feature:null,mouse:null};function Gr(Cr){Sr=sr(Sr,Cr)}function Un(){var Cr,tn;if(Xt.container){var On=[],ba=[];ur.forEach((function(gi){Sr[gi]!==Br[gi]&&(On.push(gi+"-"+Br[gi]),Sr[gi]!==null&&ba.push(gi+"-"+Sr[gi]))})),On.length>0&&(Cr=Xt.container.classList).remove.apply(Cr,On),ba.length>0&&(tn=Xt.container.classList).add.apply(tn,ba),Br=sr(Br,Sr)}}function pi(Cr,tn){tn===void 0&&(tn={});var On=document.createElement("button");return On.className=v.CONTROL_BUTTON+" "+tn.className,On.setAttribute("title",tn.title),tn.container.appendChild(On),On.addEventListener("click",(function(ba){if(ba.preventDefault(),ba.stopPropagation(),ba.target===qr)return mn(),void tn.onDeactivate();an(Cr),tn.onActivate()}),!0),On}function mn(){qr&&(qr.classList.remove(v.ACTIVE_BUTTON),qr=null)}function an(Cr){mn();var tn=Or[Cr];tn&&tn&&Cr!=="trash"&&(tn.classList.add(v.ACTIVE_BUTTON),qr=tn)}return{setActiveButton:an,queueMapClasses:Gr,updateMapClasses:Un,clearMapClasses:function(){Gr({mode:null,feature:null,mouse:null}),Un()},addButtons:function(){var Cr=Xt.options.controls,tn=document.createElement("div");return tn.className=v.CONTROL_GROUP+" "+v.CONTROL_BASE,Cr&&(Cr[P.LINE]&&(Or[P.LINE]=pi(P.LINE,{container:tn,className:v.CONTROL_BUTTON_LINE,title:"LineString tool "+(Xt.options.keybindings?"(l)":""),onActivate:function(){return Xt.events.changeMode(k.DRAW_LINE_STRING)},onDeactivate:function(){return Xt.events.trash()}})),Cr[P.POLYGON]&&(Or[P.POLYGON]=pi(P.POLYGON,{container:tn,className:v.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Xt.options.keybindings?"(p)":""),onActivate:function(){return Xt.events.changeMode(k.DRAW_POLYGON)},onDeactivate:function(){return Xt.events.trash()}})),Cr[P.POINT]&&(Or[P.POINT]=pi(P.POINT,{container:tn,className:v.CONTROL_BUTTON_POINT,title:"Marker tool "+(Xt.options.keybindings?"(m)":""),onActivate:function(){return Xt.events.changeMode(k.DRAW_POINT)},onDeactivate:function(){return Xt.events.trash()}})),Cr.trash&&(Or.trash=pi("trash",{container:tn,className:v.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Xt.events.trash()}})),Cr.combine_features&&(Or.combine_features=pi("combineFeatures",{container:tn,className:v.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Xt.events.combineFeatures()}})),Cr.uncombine_features&&(Or.uncombine_features=pi("uncombineFeatures",{container:tn,className:v.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Xt.events.uncombineFeatures()}}))),tn},removeButtons:function(){Object.keys(Or).forEach((function(Cr){var tn=Or[Cr];tn.parentNode&&tn.parentNode.removeChild(tn),delete Or[Cr]}))}}})(J),J.container=Rt.getContainer(),J.store=new Ht(J),pe=J.ui.addButtons(),J.options.boxSelect&&(J.boxZoomInitial=Rt.boxZoom.isEnabled(),Rt.boxZoom.disable(),Rt.dragPan.disable(),Rt.dragPan.enable()),Rt.loaded()?Ct.connect():(Rt.on("load",Ct.connect),Xe=setInterval((function(){Rt.loaded()&&Ct.connect()}),16)),J.events.start(),pe},addLayers:function(){J.map.addSource(x.COLD,{data:{type:I.FEATURE_COLLECTION,features:[]},type:"geojson"}),J.map.addSource(x.HOT,{data:{type:I.FEATURE_COLLECTION,features:[]},type:"geojson"}),J.options.styles.forEach((function(Rt){J.map.addLayer(Rt)})),J.store.setDirty(!0),J.store.render()},removeLayers:function(){J.options.styles.forEach((function(Rt){J.map.getLayer(Rt.id)&&J.map.removeLayer(Rt.id)})),J.map.getSource(x.COLD)&&J.map.removeSource(x.COLD),J.map.getSource(x.HOT)&&J.map.removeSource(x.HOT)}};return J.setup=Ct,Ct}var yr=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function pr(J){return function(pe){var Xe=pe.featureTarget;return!!Xe&&!!Xe.properties&&Xe.properties.meta===J}}function Jt(J){return!!J.originalEvent&&!!J.originalEvent.shiftKey&&J.originalEvent.button===0}function ir(J){return!!J.featureTarget&&!!J.featureTarget.properties&&J.featureTarget.properties.active===N.ACTIVE&&J.featureTarget.properties.meta===F.FEATURE}function xr(J){return!!J.featureTarget&&!!J.featureTarget.properties&&J.featureTarget.properties.active===N.INACTIVE&&J.featureTarget.properties.meta===F.FEATURE}function rr(J){return J.featureTarget===void 0}function nt(J){return!!J.featureTarget&&!!J.featureTarget.properties&&J.featureTarget.properties.meta===F.FEATURE}function be(J){var pe=J.featureTarget;return!!pe&&!!pe.properties&&pe.properties.meta===F.VERTEX}function _e(J){return!!J.originalEvent&&J.originalEvent.shiftKey===!0}function Ue(J){return J.keyCode===27}function Qe(J){return J.keyCode===13}var ot=Object.freeze({__proto__:null,isOfMetaType:pr,isShiftMousedown:Jt,isActiveFeature:ir,isInactiveFeature:xr,noTarget:rr,isFeature:nt,isVertex:be,isShiftDown:_e,isEscapeKey:Ue,isEnterKey:Qe,isTrue:function(){return!0}}),et=Lt;function Lt(J,pe){this.x=J,this.y=pe}Lt.prototype={clone:function(){return new Lt(this.x,this.y)},add:function(J){return this.clone()._add(J)},sub:function(J){return this.clone()._sub(J)},multByPoint:function(J){return this.clone()._multByPoint(J)},divByPoint:function(J){return this.clone()._divByPoint(J)},mult:function(J){return this.clone()._mult(J)},div:function(J){return this.clone()._div(J)},rotate:function(J){return this.clone()._rotate(J)},rotateAround:function(J,pe){return this.clone()._rotateAround(J,pe)},matMult:function(J){return this.clone()._matMult(J)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(J){return this.x===J.x&&this.y===J.y},dist:function(J){return Math.sqrt(this.distSqr(J))},distSqr:function(J){var pe=J.x-this.x,Xe=J.y-this.y;return pe*pe+Xe*Xe},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(J){return Math.atan2(this.y-J.y,this.x-J.x)},angleWith:function(J){return this.angleWithSep(J.x,J.y)},angleWithSep:function(J,pe){return Math.atan2(this.x*pe-this.y*J,this.x*J+this.y*pe)},_matMult:function(J){var pe=J[0]*this.x+J[1]*this.y,Xe=J[2]*this.x+J[3]*this.y;return this.x=pe,this.y=Xe,this},_add:function(J){return this.x+=J.x,this.y+=J.y,this},_sub:function(J){return this.x-=J.x,this.y-=J.y,this},_mult:function(J){return this.x*=J,this.y*=J,this},_div:function(J){return this.x/=J,this.y/=J,this},_multByPoint:function(J){return this.x*=J.x,this.y*=J.y,this},_divByPoint:function(J){return this.x/=J.x,this.y/=J.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var J=this.y;return this.y=this.x,this.x=-J,this},_rotate:function(J){var pe=Math.cos(J),Xe=Math.sin(J),Ct=pe*this.x-Xe*this.y,Rt=Xe*this.x+pe*this.y;return this.x=Ct,this.y=Rt,this},_rotateAround:function(J,pe){var Xe=Math.cos(J),Ct=Math.sin(J),Rt=pe.x+Xe*(this.x-pe.x)-Ct*(this.y-pe.y),kt=pe.y+Ct*(this.x-pe.x)+Xe*(this.y-pe.y);return this.x=Rt,this.y=kt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Lt.convert=function(J){return J instanceof Lt?J:Array.isArray(J)?new Lt(J[0],J[1]):J};var vt=n(et);function Bt(J,pe){var Xe=pe.getBoundingClientRect();return new vt(J.clientX-Xe.left-(pe.clientLeft||0),J.clientY-Xe.top-(pe.clientTop||0))}function Kt(J,pe,Xe,Ct){return{type:I.FEATURE,properties:{meta:F.VERTEX,parent:J,coord_path:Xe,active:Ct?N.ACTIVE:N.INACTIVE},geometry:{type:I.POINT,coordinates:pe}}}function Zt(J,pe,Xe){var Ct=pe.geometry.coordinates,Rt=Xe.geometry.coordinates;if(Ct[1]>85||Ct[1]<j||Rt[1]>85||Rt[1]<j)return null;var kt={lng:(Ct[0]+Rt[0])/2,lat:(Ct[1]+Rt[1])/2};return{type:I.FEATURE,properties:{meta:F.MIDPOINT,parent:J,lng:kt.lng,lat:kt.lat,coord_path:Xe.properties.coord_path},geometry:{type:I.POINT,coordinates:[kt.lng,kt.lat]}}}function Er(J,pe,Xe){pe===void 0&&(pe={}),Xe===void 0&&(Xe=null);var Ct,Rt=J.geometry,kt=Rt.type,Xt=Rt.coordinates,Or=J.properties&&J.properties.id,qr=[];function Br(Gr,Un){var pi="",mn=null;Gr.forEach((function(an,Cr){var tn=Un!=null?Un+"."+Cr:String(Cr),On=Kt(Or,an,tn,Sr(tn));if(pe.midpoints&&mn){var ba=Zt(Or,mn,On);ba&&qr.push(ba)}mn=On;var gi=JSON.stringify(an);pi!==gi&&qr.push(On),Cr===0&&(pi=gi)}))}function Sr(Gr){return!!pe.selectedPaths&&pe.selectedPaths.indexOf(Gr)!==-1}return kt===I.POINT?qr.push(Kt(Or,Xt,Xe,Sr(Xe))):kt===I.POLYGON?Xt.forEach((function(Gr,Un){Br(Gr,Xe!==null?Xe+"."+Un:String(Un))})):kt===I.LINE_STRING?Br(Xt,Xe):kt.indexOf(I.MULTI_PREFIX)===0&&(Ct=kt.replace(I.MULTI_PREFIX,""),Xt.forEach((function(Gr,Un){var pi={type:I.FEATURE,properties:J.properties,geometry:{type:Ct,coordinates:Gr}};qr=qr.concat(Er(pi,pe,Un))}))),qr}var bt={enable:function(J){setTimeout((function(){J.map&&J.map.doubleClickZoom&&J._ctx&&J._ctx.store&&J._ctx.store.getInitialConfigValue&&J._ctx.store.getInitialConfigValue("doubleClickZoom")&&J.map.doubleClickZoom.enable()}),0)},disable:function(J){setTimeout((function(){J.map&&J.map.doubleClickZoom&&J.map.doubleClickZoom.disable()}),0)}},vr={exports:{}},Dr=function(J){if(!J||!J.type)return null;var pe=jr[J.type];if(!pe)return null;if(pe==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:J}]};if(pe==="feature")return{type:"FeatureCollection",features:[J]};if(pe==="featurecollection")return J},jr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Ur=n(Dr),nr=Object.freeze({__proto__:null,default:function J(pe){switch(pe&&pe.type||null){case"FeatureCollection":return pe.features=pe.features.reduce((function(Xe,Ct){return Xe.concat(J(Ct))}),[]),pe;case"Feature":return pe.geometry?J(pe.geometry).map((function(Xe){var Ct={type:"Feature",properties:JSON.parse(JSON.stringify(pe.properties)),geometry:Xe};return pe.id!==void 0&&(Ct.id=pe.id),Ct})):[pe];case"MultiPoint":return pe.coordinates.map((function(Xe){return{type:"Point",coordinates:Xe}}));case"MultiPolygon":return pe.coordinates.map((function(Xe){return{type:"Polygon",coordinates:Xe}}));case"MultiLineString":return pe.coordinates.map((function(Xe){return{type:"LineString",coordinates:Xe}}));case"GeometryCollection":return pe.geometries.map(J).reduce((function(Xe,Ct){return Xe.concat(Ct)}),[]);case"Point":case"Polygon":case"LineString":return[pe]}}}),Hn=Dr,en=i(nr),Wn=function(J){return(function pe(Xe){return Array.isArray(Xe)&&Xe.length&&typeof Xe[0]=="number"?[Xe]:Xe.reduce((function(Ct,Rt){return Array.isArray(Rt)&&Array.isArray(Rt[0])?Ct.concat(pe(Rt)):(Ct.push(Rt),Ct)}),[])})(J)};en instanceof Function||(en=en.default);var Pe={exports:{}},Be=Pe.exports=function(J){return new gt(J)};function gt(J){this.value=J}function mt(J,pe,Xe){var Ct=[],Rt=[],kt=!0;return(function Xt(Or){var qr=Xe?wr(Or):Or,Br={},Sr=!0,Gr={node:qr,node_:Or,path:[].concat(Ct),parent:Rt[Rt.length-1],parents:Rt,key:Ct.slice(-1)[0],isRoot:Ct.length===0,level:Ct.length,circular:null,update:function(mn,an){Gr.isRoot||(Gr.parent.node[Gr.key]=mn),Gr.node=mn,an&&(Sr=!1)},delete:function(mn){delete Gr.parent.node[Gr.key],mn&&(Sr=!1)},remove:function(mn){wi(Gr.parent.node)?Gr.parent.node.splice(Gr.key,1):delete Gr.parent.node[Gr.key],mn&&(Sr=!1)},keys:null,before:function(mn){Br.before=mn},after:function(mn){Br.after=mn},pre:function(mn){Br.pre=mn},post:function(mn){Br.post=mn},stop:function(){kt=!1},block:function(){Sr=!1}};if(!kt)return Gr;function Un(){if(typeof Gr.node=="object"&&Gr.node!==null){Gr.keys&&Gr.node_===Gr.node||(Gr.keys=Ar(Gr.node)),Gr.isLeaf=Gr.keys.length==0;for(var mn=0;mn<Rt.length;mn++)if(Rt[mn].node_===Or){Gr.circular=Rt[mn];break}}else Gr.isLeaf=!0,Gr.keys=null;Gr.notLeaf=!Gr.isLeaf,Gr.notRoot=!Gr.isRoot}Un();var pi=pe.call(Gr,Gr.node);return pi!==void 0&&Gr.update&&Gr.update(pi),Br.before&&Br.before.call(Gr,Gr.node),Sr&&(typeof Gr.node!="object"||Gr.node===null||Gr.circular||(Rt.push(Gr),Un(),Lr(Gr.keys,(function(mn,an){Ct.push(mn),Br.pre&&Br.pre.call(Gr,Gr.node[mn],mn);var Cr=Xt(Gr.node[mn]);Xe&&fn.call(Gr.node,mn)&&(Gr.node[mn]=Cr.node),Cr.isLast=an==Gr.keys.length-1,Cr.isFirst=an==0,Br.post&&Br.post.call(Gr,Cr),Ct.pop()})),Rt.pop()),Br.after&&Br.after.call(Gr,Gr.node)),Gr})(J).node}function wr(J){if(typeof J=="object"&&J!==null){var pe;if(wi(J))pe=[];else if(Dn(J)==="[object Date]")pe=new Date(J.getTime?J.getTime():J);else if((function(Rt){return Dn(Rt)==="[object RegExp]"})(J))pe=new RegExp(J);else if((function(Rt){return Dn(Rt)==="[object Error]"})(J))pe={message:J.message};else if((function(Rt){return Dn(Rt)==="[object Boolean]"})(J))pe=new Boolean(J);else if((function(Rt){return Dn(Rt)==="[object Number]"})(J))pe=new Number(J);else if((function(Rt){return Dn(Rt)==="[object String]"})(J))pe=new String(J);else if(Object.create&&Object.getPrototypeOf)pe=Object.create(Object.getPrototypeOf(J));else if(J.constructor===Object)pe={};else{var Xe=J.constructor&&J.constructor.prototype||J.__proto__||{},Ct=function(){};Ct.prototype=Xe,pe=new Ct}return Lr(Ar(J),(function(Rt){pe[Rt]=J[Rt]})),pe}return J}gt.prototype.get=function(J){for(var pe=this.value,Xe=0;Xe<J.length;Xe++){var Ct=J[Xe];if(!pe||!fn.call(pe,Ct)){pe=void 0;break}pe=pe[Ct]}return pe},gt.prototype.has=function(J){for(var pe=this.value,Xe=0;Xe<J.length;Xe++){var Ct=J[Xe];if(!pe||!fn.call(pe,Ct))return!1;pe=pe[Ct]}return!0},gt.prototype.set=function(J,pe){for(var Xe=this.value,Ct=0;Ct<J.length-1;Ct++){var Rt=J[Ct];fn.call(Xe,Rt)||(Xe[Rt]={}),Xe=Xe[Rt]}return Xe[J[Ct]]=pe,pe},gt.prototype.map=function(J){return mt(this.value,J,!0)},gt.prototype.forEach=function(J){return this.value=mt(this.value,J,!1),this.value},gt.prototype.reduce=function(J,pe){var Xe=arguments.length===1,Ct=Xe?this.value:pe;return this.forEach((function(Rt){this.isRoot&&Xe||(Ct=J.call(this,Ct,Rt))})),Ct},gt.prototype.paths=function(){var J=[];return this.forEach((function(pe){J.push(this.path)})),J},gt.prototype.nodes=function(){var J=[];return this.forEach((function(pe){J.push(this.node)})),J},gt.prototype.clone=function(){var J=[],pe=[];return(function Xe(Ct){for(var Rt=0;Rt<J.length;Rt++)if(J[Rt]===Ct)return pe[Rt];if(typeof Ct=="object"&&Ct!==null){var kt=wr(Ct);return J.push(Ct),pe.push(kt),Lr(Ar(Ct),(function(Xt){kt[Xt]=Xe(Ct[Xt])})),J.pop(),pe.pop(),kt}return Ct})(this.value)};var Ar=Object.keys||function(J){var pe=[];for(var Xe in J)pe.push(Xe);return pe};function Dn(J){return Object.prototype.toString.call(J)}var wi=Array.isArray||function(J){return Object.prototype.toString.call(J)==="[object Array]"},Lr=function(J,pe){if(J.forEach)return J.forEach(pe);for(var Xe=0;Xe<J.length;Xe++)pe(J[Xe],Xe,J)};Lr(Ar(gt.prototype),(function(J){Be[J]=function(pe){var Xe=[].slice.call(arguments,1),Ct=new gt(pe);return Ct[J].apply(Ct,Xe)}}));var fn=Object.hasOwnProperty||function(J,pe){return pe in J},gn=Pe.exports,_i=oi;function oi(J){if(!(this instanceof oi))return new oi(J);this._bbox=J||[1/0,1/0,-1/0,-1/0],this._valid=!!J}oi.prototype.include=function(J){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],J[0]),this._bbox[1]=Math.min(this._bbox[1],J[1]),this._bbox[2]=Math.max(this._bbox[2],J[0]),this._bbox[3]=Math.max(this._bbox[3],J[1]),this},oi.prototype.equals=function(J){var pe;return pe=J instanceof oi?J.bbox():J,this._bbox[0]==pe[0]&&this._bbox[1]==pe[1]&&this._bbox[2]==pe[2]&&this._bbox[3]==pe[3]},oi.prototype.center=function(J){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},oi.prototype.union=function(J){var pe;return this._valid=!0,pe=J instanceof oi?J.bbox():J,this._bbox[0]=Math.min(this._bbox[0],pe[0]),this._bbox[1]=Math.min(this._bbox[1],pe[1]),this._bbox[2]=Math.max(this._bbox[2],pe[2]),this._bbox[3]=Math.max(this._bbox[3],pe[3]),this},oi.prototype.bbox=function(){return this._valid?this._bbox:null},oi.prototype.contains=function(J){if(!J)return this._fastContains();if(!this._valid)return null;var pe=J[0],Xe=J[1];return this._bbox[0]<=pe&&this._bbox[1]<=Xe&&this._bbox[2]>=pe&&this._bbox[3]>=Xe},oi.prototype.intersect=function(J){return this._valid?(pe=J instanceof oi?J.bbox():J,!(this._bbox[0]>pe[2]||this._bbox[2]<pe[0]||this._bbox[3]<pe[1]||this._bbox[1]>pe[3])):null;var pe},oi.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var J="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",J)},oi.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Di=function(J){if(!J)return[];var pe=en(Hn(J)),Xe=[];return pe.features.forEach((function(Ct){Ct.geometry&&(Xe=Xe.concat(Wn(Ct.geometry.coordinates)))})),Xe},Pn=gn,ga=_i,na={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Ni=Object.keys(na);function Na(J){for(var pe=ga(),Xe=Di(J),Ct=0;Ct<Xe.length;Ct++)pe.include(Xe[Ct]);return pe}vr.exports=function(J){return Na(J).bbox()},vr.exports.polygon=function(J){return Na(J).polygon()},vr.exports.bboxify=function(J){return Pn(J).map((function(pe){pe&&Ni.some((function(Xe){return!!pe[Xe]&&na[Xe].indexOf(pe.type)!==-1}))&&(pe.bbox=Na(pe).bbox(),this.update(pe))}))};var ua=n(vr.exports),Mi=-90;function Ua(J,pe){var Xe=Mi,Ct=90,Rt=Mi,kt=90,Xt=270,Or=-270;J.forEach((function(Br){var Sr=ua(Br),Gr=Sr[1],Un=Sr[3],pi=Sr[0],mn=Sr[2];Gr>Xe&&(Xe=Gr),Un<Ct&&(Ct=Un),Un>Rt&&(Rt=Un),Gr<kt&&(kt=Gr),pi<Xt&&(Xt=pi),mn>Or&&(Or=mn)}));var qr=pe;return Xe+qr.lat>85&&(qr.lat=85-Xe),Rt+qr.lat>90&&(qr.lat=90-Rt),Ct+qr.lat<-85&&(qr.lat=-85-Ct),kt+qr.lat<Mi&&(qr.lat=Mi-kt),Xt+qr.lng<=-270&&(qr.lng+=360*Math.ceil(Math.abs(qr.lng)/360)),Or+qr.lng>=270&&(qr.lng-=360*Math.ceil(Math.abs(qr.lng)/360)),qr}function Oa(J,pe){var Xe=Ua(J.map((function(Ct){return Ct.toGeoJSON()})),pe);J.forEach((function(Ct){var Rt,kt=Ct.getCoordinates(),Xt=function(qr){var Br={lng:qr[0]+Xe.lng,lat:qr[1]+Xe.lat};return[Br.lng,Br.lat]},Or=function(qr){return qr.map((function(Br){return Xt(Br)}))};Ct.type===I.POINT?Rt=Xt(kt):Ct.type===I.LINE_STRING||Ct.type===I.MULTI_POINT?Rt=kt.map(Xt):Ct.type===I.POLYGON||Ct.type===I.MULTI_LINE_STRING?Rt=kt.map(Or):Ct.type===I.MULTI_POLYGON&&(Rt=kt.map((function(qr){return qr.map((function(Br){return Or(Br)}))}))),Ct.incomingCoords(Rt)}))}var Nn={onSetup:function(J){var pe=this,Xe={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:J.featureIds||[]};return this.setSelected(Xe.initiallySelectedFeatureIds.filter((function(Ct){return pe.getFeature(Ct)!==void 0}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Xe},fireUpdate:function(){this.map.fire(M.UPDATE,{action:O.MOVE,features:this.getSelected().map((function(J){return J.toGeoJSON()}))})},fireActionable:function(){var J=this,pe=this.getSelected(),Xe=pe.filter((function(Or){return J.isInstanceOf("MultiFeature",Or)})),Ct=!1;if(pe.length>1){Ct=!0;var Rt=pe[0].type.replace("Multi","");pe.forEach((function(Or){Or.type.replace("Multi","")!==Rt&&(Ct=!1)}))}var kt=Xe.length>0,Xt=pe.length>0;this.setActionableState({combineFeatures:Ct,uncombineFeatures:kt,trash:Xt})},getUniqueIds:function(J){return J.length?J.map((function(pe){return pe.properties.id})).filter((function(pe){return pe!==void 0})).reduce((function(pe,Xe){return pe.add(Xe),pe}),new G).values():[]},stopExtendedInteractions:function(J){J.boxSelectElement&&(J.boxSelectElement.parentNode&&J.boxSelectElement.parentNode.removeChild(J.boxSelectElement),J.boxSelectElement=null),this.map.dragPan.enable(),J.boxSelecting=!1,J.canBoxSelect=!1,J.dragMoving=!1,J.canDragMove=!1},onStop:function(){bt.enable(this)},onMouseMove:function(J,pe){return nt(pe)&&J.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(J),!0},onMouseOut:function(J){return!J.dragMoving||this.fireUpdate()}};Nn.onTap=Nn.onClick=function(J,pe){return rr(pe)?this.clickAnywhere(J,pe):pr(F.VERTEX)(pe)?this.clickOnVertex(J,pe):nt(pe)?this.clickOnFeature(J,pe):void 0},Nn.clickAnywhere=function(J){var pe=this,Xe=this.getSelectedIds();Xe.length&&(this.clearSelectedFeatures(),Xe.forEach((function(Ct){return pe.doRender(Ct)}))),bt.enable(this),this.stopExtendedInteractions(J)},Nn.clickOnVertex=function(J,pe){this.changeMode(k.DIRECT_SELECT,{featureId:pe.featureTarget.properties.parent,coordPath:pe.featureTarget.properties.coord_path,startPos:pe.lngLat}),this.updateUIClasses({mouse:b.MOVE})},Nn.startOnActiveFeature=function(J,pe){this.stopExtendedInteractions(J),this.map.dragPan.disable(),this.doRender(pe.featureTarget.properties.id),J.canDragMove=!0,J.dragMoveLocation=pe.lngLat},Nn.clickOnFeature=function(J,pe){var Xe=this;bt.disable(this),this.stopExtendedInteractions(J);var Ct=_e(pe),Rt=this.getSelectedIds(),kt=pe.featureTarget.properties.id,Xt=this.isSelected(kt);if(!Ct&&Xt&&this.getFeature(kt).type!==I.POINT)return this.changeMode(k.DIRECT_SELECT,{featureId:kt});Xt&&Ct?(this.deselect(kt),this.updateUIClasses({mouse:b.POINTER}),Rt.length===1&&bt.enable(this)):!Xt&&Ct?(this.select(kt),this.updateUIClasses({mouse:b.MOVE})):Xt||Ct||(Rt.forEach((function(Or){return Xe.doRender(Or)})),this.setSelected(kt),this.updateUIClasses({mouse:b.MOVE})),this.doRender(kt)},Nn.onMouseDown=function(J,pe){return ir(pe)?this.startOnActiveFeature(J,pe):this.drawConfig.boxSelect&&Jt(pe)?this.startBoxSelect(J,pe):void 0},Nn.startBoxSelect=function(J,pe){this.stopExtendedInteractions(J),this.map.dragPan.disable(),J.boxSelectStartLocation=Bt(pe.originalEvent,this.map.getContainer()),J.canBoxSelect=!0},Nn.onTouchStart=function(J,pe){if(ir(pe))return this.startOnActiveFeature(J,pe)},Nn.onDrag=function(J,pe){return J.canDragMove?this.dragMove(J,pe):this.drawConfig.boxSelect&&J.canBoxSelect?this.whileBoxSelect(J,pe):void 0},Nn.whileBoxSelect=function(J,pe){J.boxSelecting=!0,this.updateUIClasses({mouse:b.ADD}),J.boxSelectElement||(J.boxSelectElement=document.createElement("div"),J.boxSelectElement.classList.add(v.BOX_SELECT),this.map.getContainer().appendChild(J.boxSelectElement));var Xe=Bt(pe.originalEvent,this.map.getContainer()),Ct=Math.min(J.boxSelectStartLocation.x,Xe.x),Rt=Math.max(J.boxSelectStartLocation.x,Xe.x),kt=Math.min(J.boxSelectStartLocation.y,Xe.y),Xt=Math.max(J.boxSelectStartLocation.y,Xe.y),Or="translate("+Ct+"px, "+kt+"px)";J.boxSelectElement.style.transform=Or,J.boxSelectElement.style.WebkitTransform=Or,J.boxSelectElement.style.width=Rt-Ct+"px",J.boxSelectElement.style.height=Xt-kt+"px"},Nn.dragMove=function(J,pe){J.dragMoving=!0,pe.originalEvent.stopPropagation();var Xe={lng:pe.lngLat.lng-J.dragMoveLocation.lng,lat:pe.lngLat.lat-J.dragMoveLocation.lat};Oa(this.getSelected(),Xe),J.dragMoveLocation=pe.lngLat},Nn.onTouchEnd=Nn.onMouseUp=function(J,pe){var Xe=this;if(J.dragMoving)this.fireUpdate();else if(J.boxSelecting){var Ct=[J.boxSelectStartLocation,Bt(pe.originalEvent,this.map.getContainer())],Rt=this.featuresAt(null,Ct,"click"),kt=this.getUniqueIds(Rt).filter((function(Xt){return!Xe.isSelected(Xt)}));kt.length&&(this.select(kt),kt.forEach((function(Xt){return Xe.doRender(Xt)})),this.updateUIClasses({mouse:b.MOVE}))}this.stopExtendedInteractions(J)},Nn.toDisplayFeatures=function(J,pe,Xe){pe.properties.active=this.isSelected(pe.properties.id)?N.ACTIVE:N.INACTIVE,Xe(pe),this.fireActionable(),pe.properties.active===N.ACTIVE&&pe.geometry.type!==I.POINT&&Er(pe).forEach(Xe)},Nn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Nn.onCombineFeatures=function(){var J=this.getSelected();if(!(J.length===0||J.length<2)){for(var pe=[],Xe=[],Ct=J[0].type.replace("Multi",""),Rt=0;Rt<J.length;Rt++){var kt=J[Rt];if(kt.type.replace("Multi","")!==Ct)return;kt.type.includes("Multi")?kt.getCoordinates().forEach((function(Or){pe.push(Or)})):pe.push(kt.getCoordinates()),Xe.push(kt.toGeoJSON())}if(Xe.length>1){var Xt=this.newFeature({type:I.FEATURE,properties:Xe[0].properties,geometry:{type:"Multi"+Ct,coordinates:pe}});this.addFeature(Xt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Xt.id]),this.map.fire(M.COMBINE_FEATURES,{createdFeatures:[Xt.toGeoJSON()],deletedFeatures:Xe})}this.fireActionable()}},Nn.onUncombineFeatures=function(){var J=this,pe=this.getSelected();if(pe.length!==0){for(var Xe=[],Ct=[],Rt=function(Xt){var Or=pe[Xt];J.isInstanceOf("MultiFeature",Or)&&(Or.getFeatures().forEach((function(qr){J.addFeature(qr),qr.properties=Or.properties,Xe.push(qr.toGeoJSON()),J.select([qr.id])})),J.deleteFeature(Or.id,{silent:!0}),Ct.push(Or.toGeoJSON()))},kt=0;kt<pe.length;kt++)Rt(kt);Xe.length>1&&this.map.fire(M.UNCOMBINE_FEATURES,{createdFeatures:Xe,deletedFeatures:Ct}),this.fireActionable()}};var Gl=pr(F.VERTEX),Tl=pr(F.MIDPOINT),ya={fireUpdate:function(){this.map.fire(M.UPDATE,{action:O.CHANGE_COORDINATES,features:this.getSelected().map((function(J){return J.toGeoJSON()}))})},fireActionable:function(J){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:J.selectedCoordPaths.length>0})},startDragging:function(J,pe){this.map.dragPan.disable(),J.canDragMove=!0,J.dragMoveLocation=pe.lngLat},stopDragging:function(J){this.map.dragPan.enable(),J.dragMoving=!1,J.canDragMove=!1,J.dragMoveLocation=null},onVertex:function(J,pe){this.startDragging(J,pe);var Xe=pe.featureTarget.properties,Ct=J.selectedCoordPaths.indexOf(Xe.coord_path);_e(pe)||Ct!==-1?_e(pe)&&Ct===-1&&J.selectedCoordPaths.push(Xe.coord_path):J.selectedCoordPaths=[Xe.coord_path];var Rt=this.pathsToCoordinates(J.featureId,J.selectedCoordPaths);this.setSelectedCoordinates(Rt)},onMidpoint:function(J,pe){this.startDragging(J,pe);var Xe=pe.featureTarget.properties;J.feature.addCoordinate(Xe.coord_path,Xe.lng,Xe.lat),this.fireUpdate(),J.selectedCoordPaths=[Xe.coord_path]},pathsToCoordinates:function(J,pe){return pe.map((function(Xe){return{feature_id:J,coord_path:Xe}}))},onFeature:function(J,pe){J.selectedCoordPaths.length===0?this.startDragging(J,pe):this.stopDragging(J)},dragFeature:function(J,pe,Xe){Oa(this.getSelected(),Xe),J.dragMoveLocation=pe.lngLat},dragVertex:function(J,pe,Xe){for(var Ct=J.selectedCoordPaths.map((function(Or){return J.feature.getCoordinate(Or)})),Rt=Ua(Ct.map((function(Or){return{type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:Or}}})),Xe),kt=0;kt<Ct.length;kt++){var Xt=Ct[kt];J.feature.updateCoordinate(J.selectedCoordPaths[kt],Xt[0]+Rt.lng,Xt[1]+Rt.lat)}},clickNoTarget:function(){this.changeMode(k.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(k.SIMPLE_SELECT)},clickActiveFeature:function(J){J.selectedCoordPaths=[],this.clearSelectedCoordinates(),J.feature.changed()},onSetup:function(J){var pe=J.featureId,Xe=this.getFeature(pe);if(!Xe)throw new Error("You must provide a featureId to enter direct_select mode");if(Xe.type===I.POINT)throw new TypeError("direct_select mode doesn't handle point features");var Ct={featureId:pe,feature:Xe,dragMoveLocation:J.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:J.coordPath?[J.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(pe,Ct.selectedCoordPaths)),this.setSelected(pe),bt.disable(this),this.setActionableState({trash:!0}),Ct},onStop:function(){bt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(J,pe,Xe){J.featureId===pe.properties.id?(pe.properties.active=N.ACTIVE,Xe(pe),Er(pe,{map:this.map,midpoints:!0,selectedPaths:J.selectedCoordPaths}).forEach(Xe)):(pe.properties.active=N.INACTIVE,Xe(pe)),this.fireActionable(J)},onTrash:function(J){J.selectedCoordPaths.sort((function(pe,Xe){return Xe.localeCompare(pe,"en",{numeric:!0})})).forEach((function(pe){return J.feature.removeCoordinate(pe)})),this.fireUpdate(),J.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(J),J.feature.isValid()===!1&&(this.deleteFeature([J.featureId]),this.changeMode(k.SIMPLE_SELECT,{}))},onMouseMove:function(J,pe){var Xe=ir(pe),Ct=Gl(pe),Rt=Tl(pe),kt=J.selectedCoordPaths.length===0;return Xe&&kt||Ct&&!kt?this.updateUIClasses({mouse:b.MOVE}):this.updateUIClasses({mouse:b.NONE}),(Ct||Xe||Rt)&&J.dragMoving&&this.fireUpdate(),this.stopDragging(J),!0},onMouseOut:function(J){return J.dragMoving&&this.fireUpdate(),!0}};ya.onTouchStart=ya.onMouseDown=function(J,pe){return Gl(pe)?this.onVertex(J,pe):ir(pe)?this.onFeature(J,pe):Tl(pe)?this.onMidpoint(J,pe):void 0},ya.onDrag=function(J,pe){if(J.canDragMove===!0){J.dragMoving=!0,pe.originalEvent.stopPropagation();var Xe={lng:pe.lngLat.lng-J.dragMoveLocation.lng,lat:pe.lngLat.lat-J.dragMoveLocation.lat};J.selectedCoordPaths.length>0?this.dragVertex(J,pe,Xe):this.dragFeature(J,pe,Xe),J.dragMoveLocation=pe.lngLat}},ya.onClick=function(J,pe){return rr(pe)?this.clickNoTarget(J,pe):ir(pe)?this.clickActiveFeature(J,pe):xr(pe)?this.clickInactive(J,pe):void this.stopDragging(J)},ya.onTap=function(J,pe){return rr(pe)?this.clickNoTarget(J,pe):ir(pe)?this.clickActiveFeature(J,pe):xr(pe)?this.clickInactive(J,pe):void 0},ya.onTouchEnd=ya.onMouseUp=function(J){J.dragMoving&&this.fireUpdate(),this.stopDragging(J)};var ca={};function To(J,pe){return!!J.lngLat&&J.lngLat.lng===pe[0]&&J.lngLat.lat===pe[1]}ca.onSetup=function(){var J=this.newFeature({type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:[]}});return this.addFeature(J),this.clearSelectedFeatures(),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(P.POINT),this.setActionableState({trash:!0}),{point:J}},ca.stopDrawingAndRemove=function(J){this.deleteFeature([J.point.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)},ca.onTap=ca.onClick=function(J,pe){this.updateUIClasses({mouse:b.MOVE}),J.point.updateCoordinate("",pe.lngLat.lng,pe.lngLat.lat),this.map.fire(M.CREATE,{features:[J.point.toGeoJSON()]}),this.changeMode(k.SIMPLE_SELECT,{featureIds:[J.point.id]})},ca.onStop=function(J){this.activateUIButton(),J.point.getCoordinate().length||this.deleteFeature([J.point.id],{silent:!0})},ca.toDisplayFeatures=function(J,pe,Xe){var Ct=pe.properties.id===J.point.id;if(pe.properties.active=Ct?N.ACTIVE:N.INACTIVE,!Ct)return Xe(pe)},ca.onTrash=ca.stopDrawingAndRemove,ca.onKeyUp=function(J,pe){if(Ue(pe)||Qe(pe))return this.stopDrawingAndRemove(J,pe)};var go={onSetup:function(){var J=this.newFeature({type:I.FEATURE,properties:{},geometry:{type:I.POLYGON,coordinates:[[]]}});return this.addFeature(J),this.clearSelectedFeatures(),bt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(P.POLYGON),this.setActionableState({trash:!0}),{polygon:J,currentVertexPosition:0}},clickAnywhere:function(J,pe){if(J.currentVertexPosition>0&&To(pe,J.polygon.coordinates[0][J.currentVertexPosition-1]))return this.changeMode(k.SIMPLE_SELECT,{featureIds:[J.polygon.id]});this.updateUIClasses({mouse:b.ADD}),J.polygon.updateCoordinate("0."+J.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),J.currentVertexPosition++,J.polygon.updateCoordinate("0."+J.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat)},clickOnVertex:function(J){return this.changeMode(k.SIMPLE_SELECT,{featureIds:[J.polygon.id]})},onMouseMove:function(J,pe){J.polygon.updateCoordinate("0."+J.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),be(pe)&&this.updateUIClasses({mouse:b.POINTER})}};go.onTap=go.onClick=function(J,pe){return be(pe)?this.clickOnVertex(J,pe):this.clickAnywhere(J,pe)},go.onKeyUp=function(J,pe){Ue(pe)?(this.deleteFeature([J.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)):Qe(pe)&&this.changeMode(k.SIMPLE_SELECT,{featureIds:[J.polygon.id]})},go.onStop=function(J){this.updateUIClasses({mouse:b.NONE}),bt.enable(this),this.activateUIButton(),this.getFeature(J.polygon.id)!==void 0&&(J.polygon.removeCoordinate("0."+J.currentVertexPosition),J.polygon.isValid()?this.map.fire(M.CREATE,{features:[J.polygon.toGeoJSON()]}):(this.deleteFeature([J.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT,{},{silent:!0})))},go.toDisplayFeatures=function(J,pe,Xe){var Ct=pe.properties.id===J.polygon.id;if(pe.properties.active=Ct?N.ACTIVE:N.INACTIVE,!Ct)return Xe(pe);if(pe.geometry.coordinates.length!==0){var Rt=pe.geometry.coordinates[0].length;if(!(Rt<3)){if(pe.properties.meta=F.FEATURE,Xe(Kt(J.polygon.id,pe.geometry.coordinates[0][0],"0.0",!1)),Rt>3){var kt=pe.geometry.coordinates[0].length-3;Xe(Kt(J.polygon.id,pe.geometry.coordinates[0][kt],"0."+kt,!1))}if(Rt<=4){var Xt=[[pe.geometry.coordinates[0][0][0],pe.geometry.coordinates[0][0][1]],[pe.geometry.coordinates[0][1][0],pe.geometry.coordinates[0][1][1]]];if(Xe({type:I.FEATURE,properties:pe.properties,geometry:{coordinates:Xt,type:I.LINE_STRING}}),Rt===3)return}return Xe(pe)}}},go.onTrash=function(J){this.deleteFeature([J.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)};var qo={onSetup:function(J){var pe,Xe,Ct=(J=J||{}).featureId,Rt="forward";if(Ct){if(!(pe=this.getFeature(Ct)))throw new Error("Could not find a feature with the provided featureId");var kt=J.from;if(kt&&kt.type==="Feature"&&kt.geometry&&kt.geometry.type==="Point"&&(kt=kt.geometry),kt&&kt.type==="Point"&&kt.coordinates&&kt.coordinates.length===2&&(kt=kt.coordinates),!kt||!Array.isArray(kt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Xt=pe.coordinates.length-1;if(pe.coordinates[Xt][0]===kt[0]&&pe.coordinates[Xt][1]===kt[1])Xe=Xt+1,pe.addCoordinate.apply(pe,[Xe].concat(pe.coordinates[Xt]));else{if(pe.coordinates[0][0]!==kt[0]||pe.coordinates[0][1]!==kt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Rt="backwards",Xe=0,pe.addCoordinate.apply(pe,[Xe].concat(pe.coordinates[0]))}}else pe=this.newFeature({type:I.FEATURE,properties:{},geometry:{type:I.LINE_STRING,coordinates:[]}}),Xe=0,this.addFeature(pe);return this.clearSelectedFeatures(),bt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(P.LINE),this.setActionableState({trash:!0}),{line:pe,currentVertexPosition:Xe,direction:Rt}},clickAnywhere:function(J,pe){if(J.currentVertexPosition>0&&To(pe,J.line.coordinates[J.currentVertexPosition-1])||J.direction==="backwards"&&To(pe,J.line.coordinates[J.currentVertexPosition+1]))return this.changeMode(k.SIMPLE_SELECT,{featureIds:[J.line.id]});this.updateUIClasses({mouse:b.ADD}),J.line.updateCoordinate(J.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),J.direction==="forward"?(J.currentVertexPosition++,J.line.updateCoordinate(J.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat)):J.line.addCoordinate(0,pe.lngLat.lng,pe.lngLat.lat)},clickOnVertex:function(J){return this.changeMode(k.SIMPLE_SELECT,{featureIds:[J.line.id]})},onMouseMove:function(J,pe){J.line.updateCoordinate(J.currentVertexPosition,pe.lngLat.lng,pe.lngLat.lat),be(pe)&&this.updateUIClasses({mouse:b.POINTER})}};qo.onTap=qo.onClick=function(J,pe){if(be(pe))return this.clickOnVertex(J,pe);this.clickAnywhere(J,pe)},qo.onKeyUp=function(J,pe){Qe(pe)?this.changeMode(k.SIMPLE_SELECT,{featureIds:[J.line.id]}):Ue(pe)&&(this.deleteFeature([J.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT))},qo.onStop=function(J){bt.enable(this),this.activateUIButton(),this.getFeature(J.line.id)!==void 0&&(J.line.removeCoordinate(""+J.currentVertexPosition),J.line.isValid()?this.map.fire(M.CREATE,{features:[J.line.toGeoJSON()]}):(this.deleteFeature([J.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT,{},{silent:!0})))},qo.onTrash=function(J){this.deleteFeature([J.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)},qo.toDisplayFeatures=function(J,pe,Xe){var Ct=pe.properties.id===J.line.id;if(pe.properties.active=Ct?N.ACTIVE:N.INACTIVE,!Ct)return Xe(pe);pe.geometry.coordinates.length<2||(pe.properties.meta=F.FEATURE,Xe(Kt(J.line.id,pe.geometry.coordinates[J.direction==="forward"?pe.geometry.coordinates.length-2:1],""+(J.direction==="forward"?pe.geometry.coordinates.length-2:1),!1)),Xe(pe))};var Xu={simple_select:Nn,direct_select:ya,draw_point:ca,draw_polygon:go,draw_line_string:qo},da={defaultMode:k.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:yr,modes:Xu,controls:{},userProperties:!1},Yu={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Zu={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ws(J,pe){return J.map((function(Xe){return Xe.source?Xe:sr(Xe,{id:Xe.id+"."+pe,source:pe==="hot"?x.HOT:x.COLD})}))}var Ms={exports:{}};(function(J,pe){var Xe="__lodash_hash_undefined__",Ct=9007199254740991,Rt="[object Arguments]",kt="[object Array]",Xt="[object Boolean]",Or="[object Date]",qr="[object Error]",Br="[object Function]",Sr="[object Map]",Gr="[object Number]",Un="[object Object]",pi="[object Promise]",mn="[object RegExp]",an="[object Set]",Cr="[object String]",tn="[object Symbol]",On="[object WeakMap]",ba="[object ArrayBuffer]",gi="[object DataView]",_a=/^\[object .+?Constructor\]$/,si=/^(?:0|[1-9]\d*)$/,An={};An["[object Float32Array]"]=An["[object Float64Array]"]=An["[object Int8Array]"]=An["[object Int16Array]"]=An["[object Int32Array]"]=An["[object Uint8Array]"]=An["[object Uint8ClampedArray]"]=An["[object Uint16Array]"]=An["[object Uint32Array]"]=!0,An[Rt]=An[kt]=An[ba]=An[Xt]=An[gi]=An[Or]=An[qr]=An[Br]=An[Sr]=An[Gr]=An[Un]=An[mn]=An[an]=An[Cr]=An[On]=!1;var $o=typeof Sh=="object"&&Sh&&Sh.Object===Object&&Sh,Mn=typeof self=="object"&&self&&self.Object===Object&&self,En=$o||Mn||Function("return this")(),Po=pe&&!pe.nodeType&&pe,jn=Po&&J&&!J.nodeType&&J,yo=jn&&jn.exports===Po,oo=yo&&$o.process,Io=(function(){try{return oo&&oo.binding&&oo.binding("util")}catch{}})(),Rs=Io&&Io.isTypedArray;function Pl($t,er){for(var Jr=-1,yn=$t==null?0:$t.length;++Jr<yn;)if(er($t[Jr],Jr,$t))return!0;return!1}function Xs($t){var er=-1,Jr=Array($t.size);return $t.forEach((function(yn,di){Jr[++er]=[di,yn]})),Jr}function so($t){var er=-1,Jr=Array($t.size);return $t.forEach((function(yn){Jr[++er]=yn})),Jr}var Ds,Ys,Ha,Wa=Array.prototype,Gi=Function.prototype,Ca=Object.prototype,le=En["__core-js_shared__"],Ve=Gi.toString,pt=Ca.hasOwnProperty,Dt=(Ds=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+Ds:"",tr=Ca.toString,Pr=RegExp("^"+Ve.call(pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$r=yo?En.Buffer:void 0,xn=En.Symbol,pn=En.Uint8Array,Yn=Ca.propertyIsEnumerable,ei=Wa.splice,yi=xn?xn.toStringTag:void 0,Li=Object.getOwnPropertySymbols,Ii=$r?$r.isBuffer:void 0,mi=(Ys=Object.keys,Ha=Object,function($t){return Ys(Ha($t))}),Ea=Ya(En,"DataView"),Qi=Ya(En,"Map"),Fa=Ya(En,"Promise"),Qo=Ya(En,"Set"),Ns=Ya(En,"WeakMap"),Xl=Ya(Object,"create"),vo=Uo(Ea),sl=Uo(Qi),Wi=Uo(Fa),Zs=Uo(Qo),Il=Uo(Ns),Xa=xn?xn.prototype:void 0,Ba=Xa?Xa.valueOf:void 0;function ro($t){var er=-1,Jr=$t==null?0:$t.length;for(this.clear();++er<Jr;){var yn=$t[er];this.set(yn[0],yn[1])}}function Ta($t){var er=-1,Jr=$t==null?0:$t.length;for(this.clear();++er<Jr;){var yn=$t[er];this.set(yn[0],yn[1])}}function ko($t){var er=-1,Jr=$t==null?0:$t.length;for(this.clear();++er<Jr;){var yn=$t[er];this.set(yn[0],yn[1])}}function Yl($t){var er=-1,Jr=$t==null?0:$t.length;for(this.__data__=new ko;++er<Jr;)this.add($t[er])}function fa($t){var er=this.__data__=new Ta($t);this.size=er.size}function wc($t,er){var Jr=Zl($t),yn=!Jr&&ia($t),di=!Jr&&!yn&&Os($t),vn=!Jr&&!yn&&!di&&Al($t),E=Jr||yn||di||vn,m=E?(function(z,re){for(var ye=-1,Le=Array(z);++ye<z;)Le[ye]=re(ye);return Le})($t.length,String):[],y=m.length;for(var T in $t)!pt.call($t,T)||E&&(T=="length"||di&&(T=="offset"||T=="parent")||vn&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||ul(T,y))||m.push(T);return m}function Vo($t,er){for(var Jr=$t.length;Jr--;)if(cl($t[Jr][0],er))return Jr;return-1}function kl($t){return $t==null?$t===void 0?"[object Undefined]":"[object Null]":yi&&yi in Object($t)?(function(er){var Jr=pt.call(er,yi),yn=er[yi];try{er[yi]=void 0;var di=!0}catch{}var vn=tr.call(er);return di&&(Jr?er[yi]=yn:delete er[yi]),vn})($t):(function(er){return tr.call(er)})($t)}function La($t){return ys($t)&&kl($t)==Rt}function ps($t,er,Jr,yn,di){return $t===er||($t==null||er==null||!ys($t)&&!ys(er)?$t!=$t&&er!=er:(function(vn,E,m,y,T,z){var re=Zl(vn),ye=Zl(E),Le=re?kt:no(vn),Ke=ye?kt:no(E),yt=(Le=Le==Rt?Un:Le)==Un,Yt=(Ke=Ke==Rt?Un:Ke)==Un,or=Le==Ke;if(or&&Os(vn)){if(!Os(E))return!1;re=!0,yt=!1}if(or&&!yt)return z||(z=new fa),re||Al(vn)?Ks(vn,E,m,y,T,z):(function(bn,Tn,qi,Hi,ha,Ra,bo){switch(qi){case gi:if(bn.byteLength!=Tn.byteLength||bn.byteOffset!=Tn.byteOffset)return!1;bn=bn.buffer,Tn=Tn.buffer;case ba:return!(bn.byteLength!=Tn.byteLength||!Ra(new pn(bn),new pn(Tn)));case Xt:case Or:case Gr:return cl(+bn,+Tn);case qr:return bn.name==Tn.name&&bn.message==Tn.message;case mn:case Cr:return bn==Tn+"";case Sr:var es=Xs;case an:var hl=1&Hi;if(es||(es=so),bn.size!=Tn.size&&!hl)return!1;var pu=bo.get(bn);if(pu)return pu==Tn;Hi|=2,bo.set(bn,Tn);var vs=Ks(es(bn),es(Tn),Hi,ha,Ra,bo);return bo.delete(bn),vs;case tn:if(Ba)return Ba.call(bn)==Ba.call(Tn)}return!1})(vn,E,Le,m,y,T,z);if(!(1&m)){var Nr=yt&&pt.call(vn,"__wrapped__"),on=Yt&&pt.call(E,"__wrapped__");if(Nr||on){var wn=Nr?vn.value():vn,Ln=on?E.value():E;return z||(z=new fa),T(wn,Ln,m,y,z)}}return or?(z||(z=new fa),(function(bn,Tn,qi,Hi,ha,Ra){var bo=1&qi,es=ll(bn),hl=es.length,pu=ll(Tn).length;if(hl!=pu&&!bo)return!1;for(var vs=hl;vs--;){var Ao=es[vs];if(!(bo?Ao in Tn:pt.call(Tn,Ao)))return!1}var ku=Ra.get(bn);if(ku&&Ra.get(Tn))return ku==Tn;var Js=!0;Ra.set(bn,Tn),Ra.set(Tn,bn);for(var qn=bo;++vs<hl;){var _o=bn[Ao=es[vs]],Ku=Tn[Ao];if(Hi)var Sc=bo?Hi(Ku,_o,Ao,Tn,bn,Ra):Hi(_o,Ku,Ao,bn,Tn,Ra);if(!(Sc===void 0?_o===Ku||ha(_o,Ku,qi,Hi,Ra):Sc)){Js=!1;break}qn||(qn=Ao=="constructor")}if(Js&&!qn){var pl=bn.constructor,Au=Tn.constructor;pl==Au||!("constructor"in bn)||!("constructor"in Tn)||typeof pl=="function"&&pl instanceof pl&&typeof Au=="function"&&Au instanceof Au||(Js=!1)}return Ra.delete(bn),Ra.delete(Tn),Js})(vn,E,m,y,T,z)):!1})($t,er,Jr,yn,ps,di))}function fu($t){return!(!Kl($t)||(function(er){return!!Dt&&Dt in er})($t))&&(gs($t)?Pr:_a).test(Uo($t))}function hu($t){if(Jr=(er=$t)&&er.constructor,yn=typeof Jr=="function"&&Jr.prototype||Ca,er!==yn)return mi($t);var er,Jr,yn,di=[];for(var vn in Object($t))pt.call($t,vn)&&vn!="constructor"&&di.push(vn);return di}function Ks($t,er,Jr,yn,di,vn){var E=1&Jr,m=$t.length,y=er.length;if(m!=y&&!(E&&y>m))return!1;var T=vn.get($t);if(T&&vn.get(er))return T==er;var z=-1,re=!0,ye=2&Jr?new Yl:void 0;for(vn.set($t,er),vn.set(er,$t);++z<m;){var Le=$t[z],Ke=er[z];if(yn)var yt=E?yn(Ke,Le,z,er,$t,vn):yn(Le,Ke,z,$t,er,vn);if(yt!==void 0){if(yt)continue;re=!1;break}if(ye){if(!Pl(er,(function(Yt,or){if(Nr=or,!ye.has(Nr)&&(Le===Yt||di(Le,Yt,Jr,yn,vn)))return ye.push(or);var Nr}))){re=!1;break}}else if(Le!==Ke&&!di(Le,Ke,Jr,yn,vn)){re=!1;break}}return vn.delete($t),vn.delete(er),re}function ll($t){return(function(er,Jr,yn){var di=Jr(er);return Zl(er)?di:(function(vn,E){for(var m=-1,y=E.length,T=vn.length;++m<y;)vn[T+m]=E[m];return vn})(di,yn(er))})($t,fl,ms)}function lo($t,er){var Jr,yn,di=$t.__data__;return((yn=typeof(Jr=er))=="string"||yn=="number"||yn=="symbol"||yn=="boolean"?Jr!=="__proto__":Jr===null)?di[typeof er=="string"?"string":"hash"]:di.map}function Ya($t,er){var Jr=(function(yn,di){return yn?.[di]})($t,er);return fu(Jr)?Jr:void 0}ro.prototype.clear=function(){this.__data__=Xl?Xl(null):{},this.size=0},ro.prototype.delete=function($t){var er=this.has($t)&&delete this.__data__[$t];return this.size-=er?1:0,er},ro.prototype.get=function($t){var er=this.__data__;if(Xl){var Jr=er[$t];return Jr===Xe?void 0:Jr}return pt.call(er,$t)?er[$t]:void 0},ro.prototype.has=function($t){var er=this.__data__;return Xl?er[$t]!==void 0:pt.call(er,$t)},ro.prototype.set=function($t,er){var Jr=this.__data__;return this.size+=this.has($t)?0:1,Jr[$t]=Xl&&er===void 0?Xe:er,this},Ta.prototype.clear=function(){this.__data__=[],this.size=0},Ta.prototype.delete=function($t){var er=this.__data__,Jr=Vo(er,$t);return!(Jr<0)&&(Jr==er.length-1?er.pop():ei.call(er,Jr,1),--this.size,!0)},Ta.prototype.get=function($t){var er=this.__data__,Jr=Vo(er,$t);return Jr<0?void 0:er[Jr][1]},Ta.prototype.has=function($t){return Vo(this.__data__,$t)>-1},Ta.prototype.set=function($t,er){var Jr=this.__data__,yn=Vo(Jr,$t);return yn<0?(++this.size,Jr.push([$t,er])):Jr[yn][1]=er,this},ko.prototype.clear=function(){this.size=0,this.__data__={hash:new ro,map:new(Qi||Ta),string:new ro}},ko.prototype.delete=function($t){var er=lo(this,$t).delete($t);return this.size-=er?1:0,er},ko.prototype.get=function($t){return lo(this,$t).get($t)},ko.prototype.has=function($t){return lo(this,$t).has($t)},ko.prototype.set=function($t,er){var Jr=lo(this,$t),yn=Jr.size;return Jr.set($t,er),this.size+=Jr.size==yn?0:1,this},Yl.prototype.add=Yl.prototype.push=function($t){return this.__data__.set($t,Xe),this},Yl.prototype.has=function($t){return this.__data__.has($t)},fa.prototype.clear=function(){this.__data__=new Ta,this.size=0},fa.prototype.delete=function($t){var er=this.__data__,Jr=er.delete($t);return this.size=er.size,Jr},fa.prototype.get=function($t){return this.__data__.get($t)},fa.prototype.has=function($t){return this.__data__.has($t)},fa.prototype.set=function($t,er){var Jr=this.__data__;if(Jr instanceof Ta){var yn=Jr.__data__;if(!Qi||yn.length<199)return yn.push([$t,er]),this.size=++Jr.size,this;Jr=this.__data__=new ko(yn)}return Jr.set($t,er),this.size=Jr.size,this};var ms=Li?function($t){return $t==null?[]:($t=Object($t),(function(er,Jr){for(var yn=-1,di=er==null?0:er.length,vn=0,E=[];++yn<di;){var m=er[yn];Jr(m,yn,er)&&(E[vn++]=m)}return E})(Li($t),(function(er){return Yn.call($t,er)})))}:function(){return[]},no=kl;function ul($t,er){return!!(er=er??Ct)&&(typeof $t=="number"||si.test($t))&&$t>-1&&$t%1==0&&$t<er}function Uo($t){if($t!=null){try{return Ve.call($t)}catch{}try{return $t+""}catch{}}return""}function cl($t,er){return $t===er||$t!=$t&&er!=er}(Ea&&no(new Ea(new ArrayBuffer(1)))!=gi||Qi&&no(new Qi)!=Sr||Fa&&no(Fa.resolve())!=pi||Qo&&no(new Qo)!=an||Ns&&no(new Ns)!=On)&&(no=function($t){var er=kl($t),Jr=er==Un?$t.constructor:void 0,yn=Jr?Uo(Jr):"";if(yn)switch(yn){case vo:return gi;case sl:return Sr;case Wi:return pi;case Zs:return an;case Il:return On}return er});var ia=La((function(){return arguments})())?La:function($t){return ys($t)&&pt.call($t,"callee")&&!Yn.call($t,"callee")},Zl=Array.isArray,Os=Ii||function(){return!1};function gs($t){if(!Kl($t))return!1;var er=kl($t);return er==Br||er=="[object GeneratorFunction]"||er=="[object AsyncFunction]"||er=="[object Proxy]"}function dl($t){return typeof $t=="number"&&$t>-1&&$t%1==0&&$t<=Ct}function Kl($t){var er=typeof $t;return $t!=null&&(er=="object"||er=="function")}function ys($t){return $t!=null&&typeof $t=="object"}var Al=Rs?(function($t){return function(er){return $t(er)}})(Rs):function($t){return ys($t)&&dl($t.length)&&!!An[kl($t)]};function fl($t){return(er=$t)!=null&&dl(er.length)&&!gs(er)?wc($t):hu($t);var er}J.exports=function($t,er){return ps($t,er)}})(Ms,Ms.exports);var Ma=n(Ms.exports);function Ga(J,pe){return J.length===pe.length&&JSON.stringify(J.map((function(Xe){return Xe})).sort())===JSON.stringify(pe.map((function(Xe){return Xe})).sort())}var va={Polygon:Re,LineString:De,Point:we,MultiPolygon:it,MultiLineString:it,MultiPoint:it},Ls=Object.freeze({__proto__:null,CommonSelectors:ot,constrainFeatureMovement:Ua,createMidPoint:Zt,createSupplementaryPoints:Er,createVertex:Kt,doubleClickZoom:bt,euclideanDistance:Me,featuresAt:oe,getFeatureAtAndSetCursors:de,isClick:ge,isEventAtCoordinates:To,isTap:xe,mapEventToBoundingBox:ee,ModeHandler:r,moveFeatures:Oa,sortFeatures:ae,stringSetsAreEqual:Ga,StringSet:G,theme:yr,toDenseArray:at}),Hl=function(J,pe){var Xe={options:J=(function(Rt){Rt===void 0&&(Rt={});var kt=sr(Rt);return Rt.controls||(kt.controls={}),Rt.displayControlsDefault===!1?kt.controls=sr(Zu,Rt.controls):kt.controls=sr(Yu,Rt.controls),(kt=sr(da,kt)).styles=Ws(kt.styles,"cold").concat(Ws(kt.styles,"hot")),kt})(J)};pe=(function(Rt,kt){return kt.modes=k,kt.getFeatureIdsAt=function(Xt){return oe.click({point:Xt},null,Rt).map((function(Or){return Or.properties.id}))},kt.getSelectedIds=function(){return Rt.store.getSelectedIds()},kt.getSelected=function(){return{type:I.FEATURE_COLLECTION,features:Rt.store.getSelectedIds().map((function(Xt){return Rt.store.get(Xt)})).map((function(Xt){return Xt.toGeoJSON()}))}},kt.getSelectedPoints=function(){return{type:I.FEATURE_COLLECTION,features:Rt.store.getSelectedCoordinates().map((function(Xt){return{type:I.FEATURE,properties:{},geometry:{type:I.POINT,coordinates:Xt.coordinates}}}))}},kt.set=function(Xt){if(Xt.type===void 0||Xt.type!==I.FEATURE_COLLECTION||!Array.isArray(Xt.features))throw new Error("Invalid FeatureCollection");var Or=Rt.store.createRenderBatch(),qr=Rt.store.getAllIds().slice(),Br=kt.add(Xt),Sr=new G(Br);return(qr=qr.filter((function(Gr){return!Sr.has(Gr)}))).length&&kt.delete(qr),Or(),Br},kt.add=function(Xt){var Or=JSON.parse(JSON.stringify(Ur(Xt))).features.map((function(qr){if(qr.id=qr.id||fe(),qr.geometry===null)throw new Error("Invalid geometry: null");if(Rt.store.get(qr.id)===void 0||Rt.store.get(qr.id).type!==qr.geometry.type){var Br=va[qr.geometry.type];if(Br===void 0)throw new Error("Invalid geometry type: "+qr.geometry.type+".");var Sr=new Br(Rt,qr);Rt.store.add(Sr)}else{var Gr=Rt.store.get(qr.id);Gr.properties=qr.properties,Ma(Gr.properties,qr.properties)||Rt.store.featureChanged(Gr.id),Ma(Gr.getCoordinates(),qr.geometry.coordinates)||Gr.incomingCoords(qr.geometry.coordinates)}return qr.id}));return Rt.store.render(),Or},kt.get=function(Xt){var Or=Rt.store.get(Xt);if(Or)return Or.toGeoJSON()},kt.getAll=function(){return{type:I.FEATURE_COLLECTION,features:Rt.store.getAll().map((function(Xt){return Xt.toGeoJSON()}))}},kt.delete=function(Xt){return Rt.store.delete(Xt,{silent:!0}),kt.getMode()!==k.DIRECT_SELECT||Rt.store.getSelectedIds().length?Rt.store.render():Rt.events.changeMode(k.SIMPLE_SELECT,void 0,{silent:!0}),kt},kt.deleteAll=function(){return Rt.store.delete(Rt.store.getAllIds(),{silent:!0}),kt.getMode()===k.DIRECT_SELECT?Rt.events.changeMode(k.SIMPLE_SELECT,void 0,{silent:!0}):Rt.store.render(),kt},kt.changeMode=function(Xt,Or){return Or===void 0&&(Or={}),Xt===k.SIMPLE_SELECT&&kt.getMode()===k.SIMPLE_SELECT?(Ga(Or.featureIds||[],Rt.store.getSelectedIds())||(Rt.store.setSelected(Or.featureIds,{silent:!0}),Rt.store.render()),kt):(Xt===k.DIRECT_SELECT&&kt.getMode()===k.DIRECT_SELECT&&Or.featureId===Rt.store.getSelectedIds()[0]||Rt.events.changeMode(Xt,Or,{silent:!0}),kt)},kt.getMode=function(){return Rt.events.getMode()},kt.trash=function(){return Rt.events.trash({silent:!0}),kt},kt.combineFeatures=function(){return Rt.events.combineFeatures({silent:!0}),kt},kt.uncombineFeatures=function(){return Rt.events.uncombineFeatures({silent:!0}),kt},kt.setFeatureProperty=function(Xt,Or,qr){return Rt.store.setFeatureProperty(Xt,Or,qr),kt},kt})(Xe,pe),Xe.api=pe;var Ct=ar(Xe);return pe.onAdd=Ct.onAdd,pe.onRemove=Ct.onRemove,pe.types=P,pe.options=J,pe};function Wl(J){Hl(J,this)}return Wl.modes=Xu,Wl.constants=U,Wl.lib=Ls,Wl}))})(x_)),x_.exports}var Vhe=$he();const uO=rf(Vhe);function Uhe(){const e=l1(r=>r.breakpoints.down("md"));return[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.3}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":3}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":4}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":e?5:4,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?7:5,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?10:9,"circle-opacity":1,"circle-color":"#009EE0"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?7.5:6.5,"circle-color":"#009EE0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":e?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":e?8.5:7.5,"circle-color":"#009EE0"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":e?8.5:6.5,"circle-color":"#404040"}}]}const KT=e=>{const t=Q.useRef(null),r=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=Q.useRef(!1),[i,o]=Q.useState(!1),[l,a]=Q.useState(),c=Uhe(),p=Q.useCallback(g=>{console.log("MlFeatureEditor mode change to "+g.mode),typeof e.onFinish=="function"&&g.mode==="simple_select"&&e.onFinish()},[e.onFinish]);return Q.useEffect(()=>{r.map&&!n.current&&(n.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&t.current&&t.current?.remove(),t.current=new uO({displayControlsDefault:!1,defaultMode:e.mode||"simple_select",modes:Object.assign({},uO.modes),userProperties:!0,styles:c}),r.map.addControl(t.current,"top-left",r.componentId),r.map.on("draw.modechange",p,r.componentId),o(!0))},[r.map,e,n,p]),Q.useEffect(()=>{if(!r.map||!i||!t.current)return;const g=v=>{const x=v?.features||[];a(x),e.onChange&&e.onChange(x)};return r.map.on("draw.create",g,r.componentId),r.map.on("draw.update",g,r.componentId),r.map.on("draw.delete",g,r.componentId),()=>{r.map&&(r.map.map.off("draw.create",g),r.map.map.off("draw.update",g),r.map.map.off("draw.delete",g))}},[i,r.map,e.onChange]),Q.useEffect(()=>{t.current&&e.geojson?.geometry&&t.current.set({type:"FeatureCollection",features:[e.geojson]})},[e.geojson,i]),Q.useEffect(()=>{e.mode&&t.current&&t.current?.getMode?.()!==e.mode&&(t.current?.changeMode?.(e.mode),e.mode!=="simple_select"&&e.mode!=="direct_select"&&t.current.set({type:"FeatureCollection",features:[]}))},[e.mode,r.map]),{feature:l,drawToolsReady:i,draw:t.current}};try{KT.displayName="useFeatureEditor",KT.__docgenInfo={description:"GeoJson Feature editor that allows to create or manipulate GeoJson data",displayName:"useFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | undefined"}},onChange:{defaultValue:null,description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((para: Feature<Geometry, GeoJsonProperties>[]) => void) | undefined"}},onFinish:{defaultValue:null,description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`,name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}}}catch{}const cx=e=>(KT({mode:e.mode,geojson:e.geojson,onChange:e.onChange,onFinish:e.onFinish,mapId:e.mapId}),Z.jsx(Z.Fragment,{}));try{cx.displayName="MlFeatureEditor",cx.__docgenInfo={description:"",displayName:"MlFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | undefined"}},onChange:{defaultValue:null,description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((para: Feature<Geometry, GeoJsonProperties>[]) => void) | undefined"}},onFinish:{defaultValue:null,description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`,name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}}}catch{}const JT=e=>(qf({mapId:e.mapId,layerId:e.layerId||"MlFillExtrusionLayer-"+Bu(),options:{id:"",type:"fill-extrusion",source:e.sourceId||"openmaptiles","source-layer":e.sourceLayer||"building",minzoom:e.minZoom||6,paint:{...e.paint}},insertBeforeFirstSymbolLayer:!0}),Z.jsx(Z.Fragment,{}));JT.defaultProps={mapId:void 0,paint:{"fill-extrusion-color":"hsl(196, 61%, 83%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":1}};try{JT.displayName="MlFillExtrusionLayer",JT.__docgenInfo={description:"Adds a fill extrusion layer to the MapLibre instance reference by props.mapId",displayName:"MlFillExtrusionLayer",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component",name:"layerId",required:!1,type:{name:"string | undefined"}},paint:{defaultValue:{value:`{
		'fill-extrusion-color': 'hsl(196, 61%, 83%)',
		'fill-extrusion-height': {
			property: 'render_height',
			type: 'identity',
		},
		'fill-extrusion-base': {
			property: 'render_min_height',
			type: 'identity',
		},
		'fill-extrusion-opacity': 1,
	}`},description:`Paint properties of the config object that is passed to the MapLibreGl.addLayer call. All
available properties are documented in the MapLibreGl documentation
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill-extrusion`,name:"paint",required:!1,type:{name:"object | undefined"}},sourceId:{defaultValue:null,description:`Source id of a vector tile source containing the geometries to use for this fill-extrusion
layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer`,name:"sourceId",required:!1,type:{name:"string | undefined"}},sourceLayer:{defaultValue:null,description:`Layer id from a vector tile source containing the geometries to use for this fill-extrusion
layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer`,name:"sourceLayer",required:!1,type:{name:"string | undefined"}},minZoom:{defaultValue:null,description:`This layer will be hidden for zoom levels lower than defined on this property
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#minzoom`,name:"minZoom",required:!1,type:{name:"number | undefined"}}}}}catch{}const qI=Ei(Z.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"})),QT=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Q.useState(!1),[i,o]=Q.useState(),[l,a]=Q.useState(!1),[c,p]=Q.useState(),[g,v]=Q.useState(0),x=Q.useRef(!1),b=Q.useCallback(M=>{if(!t.map||((!e.centerUserPosition&&!x.current||e.centerUserPosition)&&(e.useFlyTo?t.map.map.flyTo({center:[M.coords.longitude,M.coords.latitude],zoom:18,speed:1,curve:1}):t.map.map.setCenter([M.coords.longitude,M.coords.latitude]),x.current=!0),e.showUserLocation!==void 0&&!e.showUserLocation))return;const O=Vc([M.coords.longitude,M.coords.latitude]);o(O),p(C$(O,M.coords.accuracy/1e3))},[t.map,e]),P=()=>{console.log("Access of user location denied"),a(!0)},I=Q.useMemo(()=>{if(!i)return;const M=.02,O=g-15,F=g+15,j=The(i,M,O,F,{steps:65});return j.geometry.coordinates.push(i.geometry.coordinates),j.geometry.coordinates.slice(0,0),j},[g,i]),k=M=>{M?.alpha&&v(-M.alpha)};return Q.useEffect(()=>{if(r){const M=k;return window.addEventListener("deviceorientation",M),()=>{window.removeEventListener("deviceorientation",M)}}else x.current=!1},[r]),Q.useEffect(()=>{if(t.map&&r){const M=navigator.geolocation.watchPosition(b,P);return()=>{navigator.geolocation.clearWatch(M)}}},[t.map,r,b]),Q.useEffect(()=>{if(c?.type){const M=t.map?.getBounds(),O=[M?._ne.lng,M?._ne.lat,M?._sw.lng,M?._sw.lat],F=yc(c);gfe(kN(O),kN(F))||t.map?.fitBounds(F,{padding:{top:25,bottom:25}})}},[c]),Z.jsxs(Z.Fragment,{children:[r&&i&&Z.jsx(zu,{geojson:c,type:"fill",paint:{"fill-color":"#cbd300","fill-opacity":.3,...e.accuracyPaint},insertBeforeLayer:e.insertBeforeLayer}),r&&I&&Z.jsx(zu,{geojson:I,type:"fill",paint:{"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3,...e.orientationConePaint},insertBeforeLayer:e.insertBeforeLayer}),r&&i&&Z.jsx(zu,{geojson:i,type:"circle",paint:{"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1,...e.circlePaint},insertBeforeLayer:e.insertBeforeLayer}),Z.jsx(ji,{variant:"navtools","data-testid":"mlFollowGpsBtn",sx:{zIndex:1002,color:r?M=>M.palette.GPS.GPSActiveColor:M=>M.palette.GPS.GPSInactiveColor,backgroundColor:r?M=>M.palette.GPS.GPSActiveBackgroundColor:M=>M.palette.navigation.navColor},disabled:l,onClick:()=>{n(!r)},children:Z.jsx(qI,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})]})};try{QT.displayName="MlFollowGps",QT.__docgenInfo={description:`Adds a button that makes the map follow the users GPS position using
navigator.geolocation.watchPosition if activated`,displayName:"MlFollowGps",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},showUserLocation:{defaultValue:null,description:"By default a dot will be shown on the map at the user's location. Set to false to disable.",name:"showUserLocation",required:!1,type:{name:"boolean | undefined"}},showOrientation:{defaultValue:null,description:`By default a cone will be shown on the map at the user's location to indicate the device's orientation.
Set to false to disable.`,name:"showOrientation",required:!1,type:{name:"boolean | undefined"}},showAccuracyCircle:{defaultValue:null,description:`By default, if showUserLocation is true, a transparent circle will be drawn around the user location
indicating the accuracy (95% confidence level) of the user's location. Set to false to disable.`,name:"showAccuracyCircle",required:!1,type:{name:"boolean | undefined"}},useFlyTo:{defaultValue:null,description:`Use the MapLibre.flyTo function to center the map to the current users position if true.
Otherwise the MapLibre.setCenter function is used.`,name:"useFlyTo",required:!1,type:{name:"boolean | undefined"}},centerUserPosition:{defaultValue:null,description:`Center map to current position once updated location data is recieved.
"false" will center the map once on component activation and then display the updated user location on the map.`,name:"centerUserPosition",required:!1,type:{name:"boolean | undefined"}},orientationConePaint:{defaultValue:null,description:`Orientation cone paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the orientation cone polygon.
Use any available paint prop from layer type "fill".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"orientationConePaint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined'}},circlePaint:{defaultValue:null,description:`Position circle paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the position circle.
Use any available paint prop from layer type "circle".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle`,name:"circlePaint",required:!1,type:{name:'{ "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-color"?: DataDrivenPropertyValueSpecification<string> | undefined; ... 8 more ...; "circle-stroke-opacity"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined'}},onColor:{defaultValue:null,description:"Active button font color",name:"onColor",required:!1,type:{name:"string | undefined"}},offColor:{defaultValue:null,description:"Inactive button font color",name:"offColor",required:!1,type:{name:"string | undefined"}},accuracyPaint:{defaultValue:null,description:`Accuracy paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the accuracy polygon.
Use any available paint prop from layer type "fill".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"accuracyPaint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined'}}}}}catch{}const cO=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Q.useState(),i=Q.useRef(e.imageId||"img_"+Bu()),o=Q.useRef(e.layerId||"MlImageMarkerLayer-"+t.componentId);qf({geojson:e.options?.source?.data,layerId:o.current,options:{type:"symbol",layout:{...e.options?.layout,"icon-image":r||i.current},paint:{...e.options?.paint}}});const l=(a,c)=>{a.map&&c.imgSrc&&!a.map.map.hasImage(i.current)&&a.map.map.loadImage(c.imgSrc).then(function(p){if(!p?.data){console.log("image "+c.imgSrc+"could not be loaded");return}!a.map||a.map.map.hasImage(i.current)||(a.map.addImage(i.current,p.data,a.componentId),n(i.current))})};return Q.useEffect(()=>{t.map&&e.imgSrc&&l(t,e)},[e,t]),Z.jsx(Z.Fragment,{})};try{cO.displayName="MlImageMarkerLayer",cO.__docgenInfo={description:"",displayName:"MlImageMarkerLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},imageId:{defaultValue:null,description:"Id of the image that will be added by this component to the maplibre-gl instance",name:"imageId",required:!1,type:{name:"string | undefined"}},imgSrc:{defaultValue:null,description:"Path or URL to a supported raster image",name:"imgSrc",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"{ source?: { type?: string | undefined; data: Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined; } | undefined; layout?: { ...; } | undefined; paint?: { ...; } | undefined; } | undefined"}}}}}catch{}function Ghe(e){switch(e){case"meters":return 1;case"millimeters":return 1e3;case"centimeters":return 100;case"kilometers":return .001;case"miles":return 1/1609.344;case"nauticalmiles":return 1/1852;case"inches":return 39.3701;case"yards":return 1.09361;case"feet":return 3.28084;default:return 1}}function dO(e){switch(e){case"miles":return"mi";case"acres":return"ac";case"kilometers":return"km";case"meters":return"m";case"millimeters":return"mm";case"centimeters":return"cm";case"nauticalmiles":return"nm";case"inches":return"in";case"yards":return"yd";case"feet":return"ft";case"hectares":return"ha";default:return"m"}}const e3=e=>{const[t,r]=Q.useState({value:0,label:""}),[n,i]=Q.useState([]);return Q.useEffect(()=>{if(n[0]){let o=0;if(e.measureType==="polygon"){if(o=nfe(n[0]),e.unit){const l=e.unit;l==="acres"?o=o/4046.8564224:l==="hectares"?o=o/1e4:o=o*Ghe(e.unit)**2}}else o=N0(n[0],{units:e.unit});typeof e.onChange=="function"&&e.onChange({value:o,unit:e.unit,geojson:n[0]}),o>=.1&&r({value:o,label:dO(e.unit)})}},[e.unit,n]),Z.jsxs(Z.Fragment,{children:[Z.jsx(cx,{onChange:o=>{o&&i(o)},mode:e.measureType==="polygon"?"draw_polygon":"draw_line_string",onFinish:e.onFinish}),t.value.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})," ",dO(e.unit),t.label&&e.measureType==="polygon"&&!["hectares","acres"].includes(e.unit||"")?" ":""]})};try{e3.displayName="MlMeasureTool",e3.__docgenInfo={description:"",displayName:"MlMeasureTool",props:{measureType:{defaultValue:null,description:'String that specify if the Tool measures an area ("polygon") or length ("line")',name:"measureType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"line"'},{value:'"polygon"'}]}},unit:{defaultValue:null,description:"String that dictates which unit of measurement is used",name:"unit",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"meters"'},{value:'"metres"'},{value:'"millimeters"'},{value:'"millimetres"'},{value:'"centimeters"'},{value:'"centimetres"'},{value:'"kilometers"'},{value:'"kilometres"'},{value:'"miles"'},{value:'"nauticalmiles"'},{value:'"inches"'},{value:'"yards"'},{value:'"feet"'},{value:'"radians"'},{value:'"degrees"'}]}},onChange:{defaultValue:null,description:`Callback function that is called each time measurment geometry within has changed within MlMeasureTool.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((options: MlMeasureToolOnChangeOptions) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called by the end of drawing geometries.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}const E$=Ei(Z.jsx("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"})),T$=Ei(Z.jsx("path",{d:"m2 9 4 12h12l4-12-10-7z"})),Hhe=_r(gd)({marginTop:"15px"});function t3(e){return Z.jsx(Hhe,{children:e?.children})}try{t3.displayName="LayerList",t3.__docgenInfo={description:"",displayName:"LayerList",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const v1=Ei(Z.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),$I=Ei(Z.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),P$=Ei(Z.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),dx=Ei(Z.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),Whe=rm(zc)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}),Xhe=rm(S0)({minWidth:"30px"}),Yhe=rm(hc)({marginRight:"0px",padding:"0px"}),Zhe=rm(iy)({padding:0,marginRight:"5px"}),Khe=rm(ag)(({open:e})=>({display:e?"block":"none"})),Jhe=rm(gd)({marginLeft:"50px"});function r3({visible:e=!0,name:t,children:r,setVisible:n}){const[i,o]=Q.useState(!1),[l,a]=Q.useState(!0),c=Q.useMemo(()=>e?l:!1,[e,l]),p=Q.useMemo(()=>r?Array.isArray(r)?r.map(g=>ft.cloneElement(g,{visible:c})):ft.cloneElement(r,{visible:c}):Z.jsx(Z.Fragment,{}),[c]);return Z.jsxs(Z.Fragment,{children:[Z.jsxs(Whe,{children:[Z.jsxs(Xhe,{children:[Z.jsx(Yhe,{edge:"end","aria-label":"open",onClick:()=>o(!i),children:i?Z.jsx(dx,{}):Z.jsx(P$,{})}),Z.jsx(Zhe,{disabled:n?!1:!e,checked:n?e:l,onClick:()=>{n?n(g=>!g):a(g=>!g)}})]}),Z.jsx(Mc,{primary:t,variant:"layerlist"})]}),Z.jsx(Khe,{open:i,children:Z.jsx(Jhe,{disablePadding:!0,children:p})})]})}try{r3.displayName="LayerListFolder",r3.__docgenInfo={description:"",displayName:"LayerListFolder",props:{visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"ReactNode"}},setVisible:{defaultValue:null,description:"",name:"setVisible",required:!1,type:{name:"((visible: boolean | ((val: unknown) => boolean)) => void) | undefined"}}}}}catch{}var Ru={},Jm={},c5,fO;function I$(){if(fO)return c5;fO=1;var e=typeof Sh=="object"&&Sh&&Sh.Object===Object&&Sh;return c5=e,c5}var d5,hO;function sf(){if(hO)return d5;hO=1;var e=I$(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return d5=r,d5}var f5,pO;function b1(){if(pO)return f5;pO=1;var e=sf(),t=e.Symbol;return f5=t,f5}var h5,mO;function Qhe(){if(mO)return h5;mO=1;var e=b1(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function o(l){var a=r.call(l,i),c=l[i];try{l[i]=void 0;var p=!0}catch{}var g=n.call(l);return p&&(a?l[i]=c:delete l[i]),g}return h5=o,h5}var p5,gO;function epe(){if(gO)return p5;gO=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return p5=r,p5}var m5,yO;function um(){if(yO)return m5;yO=1;var e=b1(),t=Qhe(),r=epe(),n="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function l(a){return a==null?a===void 0?i:n:o&&o in Object(a)?t(a):r(a)}return m5=l,m5}var g5,vO;function bd(){if(vO)return g5;vO=1;var e=Array.isArray;return g5=e,g5}var y5,bO;function Zf(){if(bO)return y5;bO=1;function e(t){return t!=null&&typeof t=="object"}return y5=e,y5}var v5,_O;function tpe(){if(_O)return v5;_O=1;var e=um(),t=bd(),r=Zf(),n="[object String]";function i(o){return typeof o=="string"||!t(o)&&r(o)&&e(o)==n}return v5=i,v5}var b5,xO;function rpe(){if(xO)return b5;xO=1;function e(t){return function(r,n,i){for(var o=-1,l=Object(r),a=i(r),c=a.length;c--;){var p=a[t?c:++o];if(n(l[p],p,l)===!1)break}return r}}return b5=e,b5}var _5,wO;function npe(){if(wO)return _5;wO=1;var e=rpe(),t=e();return _5=t,_5}var x5,SO;function ipe(){if(SO)return x5;SO=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return x5=e,x5}var w5,CO;function ape(){if(CO)return w5;CO=1;var e=um(),t=Zf(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return w5=n,w5}var S5,EO;function k$(){if(EO)return S5;EO=1;var e=ape(),t=Zf(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(l){return t(l)&&n.call(l,"callee")&&!i.call(l,"callee")};return S5=o,S5}var qv={exports:{}},C5,TO;function ope(){if(TO)return C5;TO=1;function e(){return!1}return C5=e,C5}qv.exports;var PO;function VI(){return PO||(PO=1,(function(e,t){var r=sf(),n=ope(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===i,a=l?r.Buffer:void 0,c=a?a.isBuffer:void 0,p=c||n;e.exports=p})(qv,qv.exports)),qv.exports}var E5,IO;function A$(){if(IO)return E5;IO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var o=typeof n;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return E5=r,E5}var T5,kO;function UI(){if(kO)return T5;kO=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return T5=t,T5}var P5,AO;function spe(){if(AO)return P5;AO=1;var e=um(),t=UI(),r=Zf(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",l="[object Date]",a="[object Error]",c="[object Function]",p="[object Map]",g="[object Number]",v="[object Object]",x="[object RegExp]",b="[object Set]",P="[object String]",I="[object WeakMap]",k="[object ArrayBuffer]",M="[object DataView]",O="[object Float32Array]",F="[object Float64Array]",N="[object Int8Array]",$="[object Int16Array]",j="[object Int32Array]",U="[object Uint8Array]",H="[object Uint8ClampedArray]",Y="[object Uint16Array]",ae="[object Uint32Array]",ee={};ee[O]=ee[F]=ee[N]=ee[$]=ee[j]=ee[U]=ee[H]=ee[Y]=ee[ae]=!0,ee[n]=ee[i]=ee[k]=ee[o]=ee[M]=ee[l]=ee[a]=ee[c]=ee[p]=ee[g]=ee[v]=ee[x]=ee[b]=ee[P]=ee[I]=!1;function G(ie){return r(ie)&&t(ie.length)&&!!ee[e(ie)]}return P5=G,P5}var I5,MO;function GI(){if(MO)return I5;MO=1;function e(t){return function(r){return t(r)}}return I5=e,I5}var $v={exports:{}};$v.exports;var LO;function HI(){return LO||(LO=1,(function(e,t){var r=I$(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o&&r.process,a=(function(){try{var c=i&&i.require&&i.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}})();e.exports=a})($v,$v.exports)),$v.exports}var k5,RO;function M$(){if(RO)return k5;RO=1;var e=spe(),t=GI(),r=HI(),n=r&&r.isTypedArray,i=n?t(n):e;return k5=i,k5}var A5,DO;function L$(){if(DO)return A5;DO=1;var e=ipe(),t=k$(),r=bd(),n=VI(),i=A$(),o=M$(),l=Object.prototype,a=l.hasOwnProperty;function c(p,g){var v=r(p),x=!v&&t(p),b=!v&&!x&&n(p),P=!v&&!x&&!b&&o(p),I=v||x||b||P,k=I?e(p.length,String):[],M=k.length;for(var O in p)(g||a.call(p,O))&&!(I&&(O=="length"||b&&(O=="offset"||O=="parent")||P&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||i(O,M)))&&k.push(O);return k}return A5=c,A5}var M5,NO;function WI(){if(NO)return M5;NO=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return M5=t,M5}var L5,OO;function R$(){if(OO)return L5;OO=1;function e(t,r){return function(n){return t(r(n))}}return L5=e,L5}var R5,FO;function lpe(){if(FO)return R5;FO=1;var e=R$(),t=e(Object.keys,Object);return R5=t,R5}var D5,BO;function upe(){if(BO)return D5;BO=1;var e=WI(),t=lpe(),r=Object.prototype,n=r.hasOwnProperty;function i(o){if(!e(o))return t(o);var l=[];for(var a in Object(o))n.call(o,a)&&a!="constructor"&&l.push(a);return l}return D5=i,D5}var N5,zO;function ky(){if(zO)return N5;zO=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return N5=e,N5}var O5,jO;function D$(){if(jO)return O5;jO=1;var e=um(),t=ky(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function l(a){if(!t(a))return!1;var c=e(a);return c==n||c==i||c==r||c==o}return O5=l,O5}var F5,qO;function j2(){if(qO)return F5;qO=1;var e=D$(),t=UI();function r(n){return n!=null&&t(n.length)&&!e(n)}return F5=r,F5}var B5,$O;function _1(){if($O)return B5;$O=1;var e=L$(),t=upe(),r=j2();function n(i){return r(i)?e(i):t(i)}return B5=n,B5}var z5,VO;function N$(){if(VO)return z5;VO=1;var e=npe(),t=_1();function r(n,i){return n&&e(n,i,t)}return z5=r,z5}var j5,UO;function O$(){if(UO)return j5;UO=1;function e(t){return t}return j5=e,j5}var q5,GO;function cpe(){if(GO)return q5;GO=1;var e=O$();function t(r){return typeof r=="function"?r:e}return q5=t,q5}var $5,HO;function XI(){if(HO)return $5;HO=1;var e=N$(),t=cpe();function r(n,i){return n&&e(n,t(i))}return $5=r,$5}var V5,WO;function YI(){if(WO)return V5;WO=1;var e=R$(),t=e(Object.getPrototypeOf,Object);return V5=t,V5}var U5,XO;function dpe(){if(XO)return U5;XO=1;var e=um(),t=YI(),r=Zf(),n="[object Object]",i=Function.prototype,o=Object.prototype,l=i.toString,a=o.hasOwnProperty,c=l.call(Object);function p(g){if(!r(g)||e(g)!=n)return!1;var v=t(g);if(v===null)return!0;var x=a.call(v,"constructor")&&v.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==c}return U5=p,U5}var G5,YO;function F$(){if(YO)return G5;YO=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=r(t[n],n,t);return o}return G5=e,G5}var H5,ZO;function fpe(){if(ZO)return H5;ZO=1;function e(){this.__data__=[],this.size=0}return H5=e,H5}var W5,KO;function ZI(){if(KO)return W5;KO=1;function e(t,r){return t===r||t!==t&&r!==r}return W5=e,W5}var X5,JO;function q2(){if(JO)return X5;JO=1;var e=ZI();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return X5=t,X5}var Y5,QO;function hpe(){if(QO)return Y5;QO=1;var e=q2(),t=Array.prototype,r=t.splice;function n(i){var o=this.__data__,l=e(o,i);if(l<0)return!1;var a=o.length-1;return l==a?o.pop():r.call(o,l,1),--this.size,!0}return Y5=n,Y5}var Z5,e6;function ppe(){if(e6)return Z5;e6=1;var e=q2();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Z5=t,Z5}var K5,t6;function mpe(){if(t6)return K5;t6=1;var e=q2();function t(r){return e(this.__data__,r)>-1}return K5=t,K5}var J5,r6;function gpe(){if(r6)return J5;r6=1;var e=q2();function t(r,n){var i=this.__data__,o=e(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this}return J5=t,J5}var Q5,n6;function $2(){if(n6)return Q5;n6=1;var e=fpe(),t=hpe(),r=ppe(),n=mpe(),i=gpe();function o(l){var a=-1,c=l==null?0:l.length;for(this.clear();++a<c;){var p=l[a];this.set(p[0],p[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,Q5=o,Q5}var eC,i6;function ype(){if(i6)return eC;i6=1;var e=$2();function t(){this.__data__=new e,this.size=0}return eC=t,eC}var tC,a6;function vpe(){if(a6)return tC;a6=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return tC=e,tC}var rC,o6;function bpe(){if(o6)return rC;o6=1;function e(t){return this.__data__.get(t)}return rC=e,rC}var nC,s6;function _pe(){if(s6)return nC;s6=1;function e(t){return this.__data__.has(t)}return nC=e,nC}var iC,l6;function xpe(){if(l6)return iC;l6=1;var e=sf(),t=e["__core-js_shared__"];return iC=t,iC}var aC,u6;function wpe(){if(u6)return aC;u6=1;var e=xpe(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return aC=r,aC}var oC,c6;function B$(){if(c6)return oC;c6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return oC=r,oC}var sC,d6;function Spe(){if(d6)return sC;d6=1;var e=D$(),t=wpe(),r=ky(),n=B$(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,a=Object.prototype,c=l.toString,p=a.hasOwnProperty,g=RegExp("^"+c.call(p).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(x){if(!r(x)||t(x))return!1;var b=e(x)?g:o;return b.test(n(x))}return sC=v,sC}var lC,f6;function Cpe(){if(f6)return lC;f6=1;function e(t,r){return t?.[r]}return lC=e,lC}var uC,h6;function cm(){if(h6)return uC;h6=1;var e=Spe(),t=Cpe();function r(n,i){var o=t(n,i);return e(o)?o:void 0}return uC=r,uC}var cC,p6;function KI(){if(p6)return cC;p6=1;var e=cm(),t=sf(),r=e(t,"Map");return cC=r,cC}var dC,m6;function V2(){if(m6)return dC;m6=1;var e=cm(),t=e(Object,"create");return dC=t,dC}var fC,g6;function Epe(){if(g6)return fC;g6=1;var e=V2();function t(){this.__data__=e?e(null):{},this.size=0}return fC=t,fC}var hC,y6;function Tpe(){if(y6)return hC;y6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return hC=e,hC}var pC,v6;function Ppe(){if(v6)return pC;v6=1;var e=V2(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(o){var l=this.__data__;if(e){var a=l[o];return a===t?void 0:a}return n.call(l,o)?l[o]:void 0}return pC=i,pC}var mC,b6;function Ipe(){if(b6)return mC;b6=1;var e=V2(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var o=this.__data__;return e?o[i]!==void 0:r.call(o,i)}return mC=n,mC}var gC,_6;function kpe(){if(_6)return gC;_6=1;var e=V2(),t="__lodash_hash_undefined__";function r(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=e&&i===void 0?t:i,this}return gC=r,gC}var yC,x6;function Ape(){if(x6)return yC;x6=1;var e=Epe(),t=Tpe(),r=Ppe(),n=Ipe(),i=kpe();function o(l){var a=-1,c=l==null?0:l.length;for(this.clear();++a<c;){var p=l[a];this.set(p[0],p[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,yC=o,yC}var vC,w6;function Mpe(){if(w6)return vC;w6=1;var e=Ape(),t=$2(),r=KI();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return vC=n,vC}var bC,S6;function Lpe(){if(S6)return bC;S6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return bC=e,bC}var _C,C6;function U2(){if(C6)return _C;C6=1;var e=Lpe();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return _C=t,_C}var xC,E6;function Rpe(){if(E6)return xC;E6=1;var e=U2();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return xC=t,xC}var wC,T6;function Dpe(){if(T6)return wC;T6=1;var e=U2();function t(r){return e(this,r).get(r)}return wC=t,wC}var SC,P6;function Npe(){if(P6)return SC;P6=1;var e=U2();function t(r){return e(this,r).has(r)}return SC=t,SC}var CC,I6;function Ope(){if(I6)return CC;I6=1;var e=U2();function t(r,n){var i=e(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this}return CC=t,CC}var EC,k6;function JI(){if(k6)return EC;k6=1;var e=Mpe(),t=Rpe(),r=Dpe(),n=Npe(),i=Ope();function o(l){var a=-1,c=l==null?0:l.length;for(this.clear();++a<c;){var p=l[a];this.set(p[0],p[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,EC=o,EC}var TC,A6;function Fpe(){if(A6)return TC;A6=1;var e=$2(),t=KI(),r=JI(),n=200;function i(o,l){var a=this.__data__;if(a instanceof e){var c=a.__data__;if(!t||c.length<n-1)return c.push([o,l]),this.size=++a.size,this;a=this.__data__=new r(c)}return a.set(o,l),this.size=a.size,this}return TC=i,TC}var PC,M6;function QI(){if(M6)return PC;M6=1;var e=$2(),t=ype(),r=vpe(),n=bpe(),i=_pe(),o=Fpe();function l(a){var c=this.__data__=new e(a);this.size=c.size}return l.prototype.clear=t,l.prototype.delete=r,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,PC=l,PC}var IC,L6;function Bpe(){if(L6)return IC;L6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return IC=t,IC}var kC,R6;function zpe(){if(R6)return kC;R6=1;function e(t){return this.__data__.has(t)}return kC=e,kC}var AC,D6;function jpe(){if(D6)return AC;D6=1;var e=JI(),t=Bpe(),r=zpe();function n(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new e;++o<l;)this.add(i[o])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,AC=n,AC}var MC,N6;function qpe(){if(N6)return MC;N6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return MC=e,MC}var LC,O6;function $pe(){if(O6)return LC;O6=1;function e(t,r){return t.has(r)}return LC=e,LC}var RC,F6;function z$(){if(F6)return RC;F6=1;var e=jpe(),t=qpe(),r=$pe(),n=1,i=2;function o(l,a,c,p,g,v){var x=c&n,b=l.length,P=a.length;if(b!=P&&!(x&&P>b))return!1;var I=v.get(l),k=v.get(a);if(I&&k)return I==a&&k==l;var M=-1,O=!0,F=c&i?new e:void 0;for(v.set(l,a),v.set(a,l);++M<b;){var N=l[M],$=a[M];if(p)var j=x?p($,N,M,a,l,v):p(N,$,M,l,a,v);if(j!==void 0){if(j)continue;O=!1;break}if(F){if(!t(a,function(U,H){if(!r(F,H)&&(N===U||g(N,U,c,p,v)))return F.push(H)})){O=!1;break}}else if(!(N===$||g(N,$,c,p,v))){O=!1;break}}return v.delete(l),v.delete(a),O}return RC=o,RC}var DC,B6;function j$(){if(B6)return DC;B6=1;var e=sf(),t=e.Uint8Array;return DC=t,DC}var NC,z6;function Vpe(){if(z6)return NC;z6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,o){n[++r]=[o,i]}),n}return NC=e,NC}var OC,j6;function Upe(){if(j6)return OC;j6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return OC=e,OC}var FC,q6;function Gpe(){if(q6)return FC;q6=1;var e=b1(),t=j$(),r=ZI(),n=z$(),i=Vpe(),o=Upe(),l=1,a=2,c="[object Boolean]",p="[object Date]",g="[object Error]",v="[object Map]",x="[object Number]",b="[object RegExp]",P="[object Set]",I="[object String]",k="[object Symbol]",M="[object ArrayBuffer]",O="[object DataView]",F=e?e.prototype:void 0,N=F?F.valueOf:void 0;function $(j,U,H,Y,ae,ee,G){switch(H){case O:if(j.byteLength!=U.byteLength||j.byteOffset!=U.byteOffset)return!1;j=j.buffer,U=U.buffer;case M:return!(j.byteLength!=U.byteLength||!ee(new t(j),new t(U)));case c:case p:case x:return r(+j,+U);case g:return j.name==U.name&&j.message==U.message;case b:case I:return j==U+"";case v:var ie=i;case P:var oe=Y&l;if(ie||(ie=o),j.size!=U.size&&!oe)return!1;var ue=G.get(j);if(ue)return ue==U;Y|=a,G.set(j,U);var de=n(ie(j),ie(U),Y,ae,ee,G);return G.delete(j),de;case k:if(N)return N.call(j)==N.call(U)}return!1}return FC=$,FC}var BC,$6;function q$(){if($6)return BC;$6=1;function e(t,r){for(var n=-1,i=r.length,o=t.length;++n<i;)t[o+n]=r[n];return t}return BC=e,BC}var zC,V6;function $$(){if(V6)return zC;V6=1;var e=q$(),t=bd();function r(n,i,o){var l=i(n);return t(n)?l:e(l,o(n))}return zC=r,zC}var jC,U6;function Hpe(){if(U6)return jC;U6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=0,l=[];++n<i;){var a=t[n];r(a,n,t)&&(l[o++]=a)}return l}return jC=e,jC}var qC,G6;function V$(){if(G6)return qC;G6=1;function e(){return[]}return qC=e,qC}var $C,H6;function ek(){if(H6)return $C;H6=1;var e=Hpe(),t=V$(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(l){return l==null?[]:(l=Object(l),e(i(l),function(a){return n.call(l,a)}))}:t;return $C=o,$C}var VC,W6;function U$(){if(W6)return VC;W6=1;var e=$$(),t=ek(),r=_1();function n(i){return e(i,r,t)}return VC=n,VC}var UC,X6;function Wpe(){if(X6)return UC;X6=1;var e=U$(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(o,l,a,c,p,g){var v=a&t,x=e(o),b=x.length,P=e(l),I=P.length;if(b!=I&&!v)return!1;for(var k=b;k--;){var M=x[k];if(!(v?M in l:n.call(l,M)))return!1}var O=g.get(o),F=g.get(l);if(O&&F)return O==l&&F==o;var N=!0;g.set(o,l),g.set(l,o);for(var $=v;++k<b;){M=x[k];var j=o[M],U=l[M];if(c)var H=v?c(U,j,M,l,o,g):c(j,U,M,o,l,g);if(!(H===void 0?j===U||p(j,U,a,c,g):H)){N=!1;break}$||($=M=="constructor")}if(N&&!$){var Y=o.constructor,ae=l.constructor;Y!=ae&&"constructor"in o&&"constructor"in l&&!(typeof Y=="function"&&Y instanceof Y&&typeof ae=="function"&&ae instanceof ae)&&(N=!1)}return g.delete(o),g.delete(l),N}return UC=i,UC}var GC,Y6;function Xpe(){if(Y6)return GC;Y6=1;var e=cm(),t=sf(),r=e(t,"DataView");return GC=r,GC}var HC,Z6;function Ype(){if(Z6)return HC;Z6=1;var e=cm(),t=sf(),r=e(t,"Promise");return HC=r,HC}var WC,K6;function Zpe(){if(K6)return WC;K6=1;var e=cm(),t=sf(),r=e(t,"Set");return WC=r,WC}var XC,J6;function Kpe(){if(J6)return XC;J6=1;var e=cm(),t=sf(),r=e(t,"WeakMap");return XC=r,XC}var YC,Q6;function G2(){if(Q6)return YC;Q6=1;var e=Xpe(),t=KI(),r=Ype(),n=Zpe(),i=Kpe(),o=um(),l=B$(),a="[object Map]",c="[object Object]",p="[object Promise]",g="[object Set]",v="[object WeakMap]",x="[object DataView]",b=l(e),P=l(t),I=l(r),k=l(n),M=l(i),O=o;return(e&&O(new e(new ArrayBuffer(1)))!=x||t&&O(new t)!=a||r&&O(r.resolve())!=p||n&&O(new n)!=g||i&&O(new i)!=v)&&(O=function(F){var N=o(F),$=N==c?F.constructor:void 0,j=$?l($):"";if(j)switch(j){case b:return x;case P:return a;case I:return p;case k:return g;case M:return v}return N}),YC=O,YC}var ZC,e8;function Jpe(){if(e8)return ZC;e8=1;var e=QI(),t=z$(),r=Gpe(),n=Wpe(),i=G2(),o=bd(),l=VI(),a=M$(),c=1,p="[object Arguments]",g="[object Array]",v="[object Object]",x=Object.prototype,b=x.hasOwnProperty;function P(I,k,M,O,F,N){var $=o(I),j=o(k),U=$?g:i(I),H=j?g:i(k);U=U==p?v:U,H=H==p?v:H;var Y=U==v,ae=H==v,ee=U==H;if(ee&&l(I)){if(!l(k))return!1;$=!0,Y=!1}if(ee&&!Y)return N||(N=new e),$||a(I)?t(I,k,M,O,F,N):r(I,k,U,M,O,F,N);if(!(M&c)){var G=Y&&b.call(I,"__wrapped__"),ie=ae&&b.call(k,"__wrapped__");if(G||ie){var oe=G?I.value():I,ue=ie?k.value():k;return N||(N=new e),F(oe,ue,M,O,N)}}return ee?(N||(N=new e),n(I,k,M,O,F,N)):!1}return ZC=P,ZC}var KC,t8;function G$(){if(t8)return KC;t8=1;var e=Jpe(),t=Zf();function r(n,i,o,l,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,o,l,r,a)}return KC=r,KC}var JC,r8;function Qpe(){if(r8)return JC;r8=1;var e=QI(),t=G$(),r=1,n=2;function i(o,l,a,c){var p=a.length,g=p,v=!c;if(o==null)return!g;for(o=Object(o);p--;){var x=a[p];if(v&&x[2]?x[1]!==o[x[0]]:!(x[0]in o))return!1}for(;++p<g;){x=a[p];var b=x[0],P=o[b],I=x[1];if(v&&x[2]){if(P===void 0&&!(b in o))return!1}else{var k=new e;if(c)var M=c(P,I,b,o,l,k);if(!(M===void 0?t(I,P,r|n,c,k):M))return!1}}return!0}return JC=i,JC}var QC,n8;function H$(){if(n8)return QC;n8=1;var e=ky();function t(r){return r===r&&!e(r)}return QC=t,QC}var eE,i8;function eme(){if(i8)return eE;i8=1;var e=H$(),t=_1();function r(n){for(var i=t(n),o=i.length;o--;){var l=i[o],a=n[l];i[o]=[l,a,e(a)]}return i}return eE=r,eE}var tE,a8;function W$(){if(a8)return tE;a8=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return tE=e,tE}var rE,o8;function tme(){if(o8)return rE;o8=1;var e=Qpe(),t=eme(),r=W$();function n(i){var o=t(i);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(l){return l===i||e(l,i,o)}}return rE=n,rE}var nE,s8;function tk(){if(s8)return nE;s8=1;var e=um(),t=Zf(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return nE=n,nE}var iE,l8;function rk(){if(l8)return iE;l8=1;var e=bd(),t=tk(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,l){if(e(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||t(o)?!0:n.test(o)||!r.test(o)||l!=null&&o in Object(l)}return iE=i,iE}var aE,u8;function rme(){if(u8)return aE;u8=1;var e=JI(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var l=arguments,a=i?i.apply(this,l):l[0],c=o.cache;if(c.has(a))return c.get(a);var p=n.apply(this,l);return o.cache=c.set(a,p)||c,p};return o.cache=new(r.Cache||e),o}return r.Cache=e,aE=r,aE}var oE,c8;function nme(){if(c8)return oE;c8=1;var e=rme(),t=500;function r(n){var i=e(n,function(l){return o.size===t&&o.clear(),l}),o=i.cache;return i}return oE=r,oE}var sE,d8;function ime(){if(d8)return sE;d8=1;var e=nme(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(l,a,c,p){o.push(c?p.replace(r,"$1"):a||l)}),o});return sE=n,sE}var lE,f8;function ame(){if(f8)return lE;f8=1;var e=b1(),t=F$(),r=bd(),n=tk(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function l(a){if(typeof a=="string")return a;if(r(a))return t(a,l)+"";if(n(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return lE=l,lE}var uE,h8;function ome(){if(h8)return uE;h8=1;var e=ame();function t(r){return r==null?"":e(r)}return uE=t,uE}var cE,p8;function X$(){if(p8)return cE;p8=1;var e=bd(),t=rk(),r=ime(),n=ome();function i(o,l){return e(o)?o:t(o,l)?[o]:r(n(o))}return cE=i,cE}var dE,m8;function H2(){if(m8)return dE;m8=1;var e=tk();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return dE=t,dE}var fE,g8;function Y$(){if(g8)return fE;g8=1;var e=X$(),t=H2();function r(n,i){i=e(i,n);for(var o=0,l=i.length;n!=null&&o<l;)n=n[t(i[o++])];return o&&o==l?n:void 0}return fE=r,fE}var hE,y8;function sme(){if(y8)return hE;y8=1;var e=Y$();function t(r,n,i){var o=r==null?void 0:e(r,n);return o===void 0?i:o}return hE=t,hE}var pE,v8;function lme(){if(v8)return pE;v8=1;function e(t,r){return t!=null&&r in Object(t)}return pE=e,pE}var mE,b8;function ume(){if(b8)return mE;b8=1;var e=X$(),t=k$(),r=bd(),n=A$(),i=UI(),o=H2();function l(a,c,p){c=e(c,a);for(var g=-1,v=c.length,x=!1;++g<v;){var b=o(c[g]);if(!(x=a!=null&&p(a,b)))break;a=a[b]}return x||++g!=v?x:(v=a==null?0:a.length,!!v&&i(v)&&n(b,v)&&(r(a)||t(a)))}return mE=l,mE}var gE,_8;function cme(){if(_8)return gE;_8=1;var e=lme(),t=ume();function r(n,i){return n!=null&&t(n,i,e)}return gE=r,gE}var yE,x8;function dme(){if(x8)return yE;x8=1;var e=G$(),t=sme(),r=cme(),n=rk(),i=H$(),o=W$(),l=H2(),a=1,c=2;function p(g,v){return n(g)&&i(v)?o(l(g),v):function(x){var b=t(x,g);return b===void 0&&b===v?r(x,g):e(v,b,a|c)}}return yE=p,yE}var vE,w8;function fme(){if(w8)return vE;w8=1;function e(t){return function(r){return r?.[t]}}return vE=e,vE}var bE,S8;function hme(){if(S8)return bE;S8=1;var e=Y$();function t(r){return function(n){return e(n,r)}}return bE=t,bE}var _E,C8;function pme(){if(C8)return _E;C8=1;var e=fme(),t=hme(),r=rk(),n=H2();function i(o){return r(o)?e(n(o)):t(o)}return _E=i,_E}var xE,E8;function mme(){if(E8)return xE;E8=1;var e=tme(),t=dme(),r=O$(),n=bd(),i=pme();function o(l){return typeof l=="function"?l:l==null?r:typeof l=="object"?n(l)?t(l[0],l[1]):e(l):i(l)}return xE=o,xE}var wE,T8;function gme(){if(T8)return wE;T8=1;var e=j2();function t(r,n){return function(i,o){if(i==null)return i;if(!e(i))return r(i,o);for(var l=i.length,a=n?l:-1,c=Object(i);(n?a--:++a<l)&&o(c[a],a,c)!==!1;);return i}}return wE=t,wE}var SE,P8;function yme(){if(P8)return SE;P8=1;var e=N$(),t=gme(),r=t(e);return SE=r,SE}var CE,I8;function vme(){if(I8)return CE;I8=1;var e=yme(),t=j2();function r(n,i){var o=-1,l=t(n)?Array(n.length):[];return e(n,function(a,c,p){l[++o]=i(a,c,p)}),l}return CE=r,CE}var EE,k8;function bme(){if(k8)return EE;k8=1;var e=F$(),t=mme(),r=vme(),n=bd();function i(o,l){var a=n(o)?e:r;return a(o,t(l,3))}return EE=i,EE}var A8;function _me(){if(A8)return Jm;A8=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.flattenNames=void 0;var e=tpe(),t=c(e),r=XI(),n=c(r),i=dpe(),o=c(i),l=bme(),a=c(l);function c(g){return g&&g.__esModule?g:{default:g}}var p=Jm.flattenNames=function g(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=[];return(0,a.default)(v,function(b){Array.isArray(b)?g(b).map(function(P){return x.push(P)}):(0,o.default)(b)?(0,n.default)(b,function(P,I){P===!0&&x.push(I),x.push(I+"-"+P)}):(0,t.default)(b)&&x.push(b)}),x};return Jm.default=p,Jm}var Qm={},TE,M8;function xme(){if(M8)return TE;M8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return TE=e,TE}var PE,L8;function wme(){if(L8)return PE;L8=1;var e=cm(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return PE=t,PE}var IE,R8;function Z$(){if(R8)return IE;R8=1;var e=wme();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return IE=t,IE}var kE,D8;function K$(){if(D8)return kE;D8=1;var e=Z$(),t=ZI(),r=Object.prototype,n=r.hasOwnProperty;function i(o,l,a){var c=o[l];(!(n.call(o,l)&&t(c,a))||a===void 0&&!(l in o))&&e(o,l,a)}return kE=i,kE}var AE,N8;function W2(){if(N8)return AE;N8=1;var e=K$(),t=Z$();function r(n,i,o,l){var a=!o;o||(o={});for(var c=-1,p=i.length;++c<p;){var g=i[c],v=l?l(o[g],n[g],g,o,n):void 0;v===void 0&&(v=n[g]),a?t(o,g,v):e(o,g,v)}return o}return AE=r,AE}var ME,O8;function Sme(){if(O8)return ME;O8=1;var e=W2(),t=_1();function r(n,i){return n&&e(i,t(i),n)}return ME=r,ME}var LE,F8;function Cme(){if(F8)return LE;F8=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return LE=e,LE}var RE,B8;function Eme(){if(B8)return RE;B8=1;var e=ky(),t=WI(),r=Cme(),n=Object.prototype,i=n.hasOwnProperty;function o(l){if(!e(l))return r(l);var a=t(l),c=[];for(var p in l)p=="constructor"&&(a||!i.call(l,p))||c.push(p);return c}return RE=o,RE}var DE,z8;function nk(){if(z8)return DE;z8=1;var e=L$(),t=Eme(),r=j2();function n(i){return r(i)?e(i,!0):t(i)}return DE=n,DE}var NE,j8;function Tme(){if(j8)return NE;j8=1;var e=W2(),t=nk();function r(n,i){return n&&e(i,t(i),n)}return NE=r,NE}var Vv={exports:{}};Vv.exports;var q8;function Pme(){return q8||(q8=1,(function(e,t){var r=sf(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o?r.Buffer:void 0,a=l?l.allocUnsafe:void 0;function c(p,g){if(g)return p.slice();var v=p.length,x=a?a(v):new p.constructor(v);return p.copy(x),x}e.exports=c})(Vv,Vv.exports)),Vv.exports}var OE,$8;function Ime(){if($8)return OE;$8=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return OE=e,OE}var FE,V8;function kme(){if(V8)return FE;V8=1;var e=W2(),t=ek();function r(n,i){return e(n,t(n),i)}return FE=r,FE}var BE,U8;function J$(){if(U8)return BE;U8=1;var e=q$(),t=YI(),r=ek(),n=V$(),i=Object.getOwnPropertySymbols,o=i?function(l){for(var a=[];l;)e(a,r(l)),l=t(l);return a}:n;return BE=o,BE}var zE,G8;function Ame(){if(G8)return zE;G8=1;var e=W2(),t=J$();function r(n,i){return e(n,t(n),i)}return zE=r,zE}var jE,H8;function Mme(){if(H8)return jE;H8=1;var e=$$(),t=J$(),r=nk();function n(i){return e(i,r,t)}return jE=n,jE}var qE,W8;function Lme(){if(W8)return qE;W8=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return qE=r,qE}var $E,X8;function ik(){if(X8)return $E;X8=1;var e=j$();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return $E=t,$E}var VE,Y8;function Rme(){if(Y8)return VE;Y8=1;var e=ik();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return VE=t,VE}var UE,Z8;function Dme(){if(Z8)return UE;Z8=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return UE=t,UE}var GE,K8;function Nme(){if(K8)return GE;K8=1;var e=b1(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return GE=n,GE}var HE,J8;function Ome(){if(J8)return HE;J8=1;var e=ik();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return HE=t,HE}var WE,Q8;function Fme(){if(Q8)return WE;Q8=1;var e=ik(),t=Rme(),r=Dme(),n=Nme(),i=Ome(),o="[object Boolean]",l="[object Date]",a="[object Map]",c="[object Number]",p="[object RegExp]",g="[object Set]",v="[object String]",x="[object Symbol]",b="[object ArrayBuffer]",P="[object DataView]",I="[object Float32Array]",k="[object Float64Array]",M="[object Int8Array]",O="[object Int16Array]",F="[object Int32Array]",N="[object Uint8Array]",$="[object Uint8ClampedArray]",j="[object Uint16Array]",U="[object Uint32Array]";function H(Y,ae,ee){var G=Y.constructor;switch(ae){case b:return e(Y);case o:case l:return new G(+Y);case P:return t(Y,ee);case I:case k:case M:case O:case F:case N:case $:case j:case U:return i(Y,ee);case a:return new G;case c:case v:return new G(Y);case p:return r(Y);case g:return new G;case x:return n(Y)}}return WE=H,WE}var XE,eF;function Bme(){if(eF)return XE;eF=1;var e=ky(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return XE=r,XE}var YE,tF;function zme(){if(tF)return YE;tF=1;var e=Bme(),t=YI(),r=WI();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return YE=n,YE}var ZE,rF;function jme(){if(rF)return ZE;rF=1;var e=G2(),t=Zf(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return ZE=n,ZE}var KE,nF;function qme(){if(nF)return KE;nF=1;var e=jme(),t=GI(),r=HI(),n=r&&r.isMap,i=n?t(n):e;return KE=i,KE}var JE,iF;function $me(){if(iF)return JE;iF=1;var e=G2(),t=Zf(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return JE=n,JE}var QE,aF;function Vme(){if(aF)return QE;aF=1;var e=$me(),t=GI(),r=HI(),n=r&&r.isSet,i=n?t(n):e;return QE=i,QE}var e4,oF;function Ume(){if(oF)return e4;oF=1;var e=QI(),t=xme(),r=K$(),n=Sme(),i=Tme(),o=Pme(),l=Ime(),a=kme(),c=Ame(),p=U$(),g=Mme(),v=G2(),x=Lme(),b=Fme(),P=zme(),I=bd(),k=VI(),M=qme(),O=ky(),F=Vme(),N=_1(),$=nk(),j=1,U=2,H=4,Y="[object Arguments]",ae="[object Array]",ee="[object Boolean]",G="[object Date]",ie="[object Error]",oe="[object Function]",ue="[object GeneratorFunction]",de="[object Map]",Me="[object Number]",ge="[object Object]",xe="[object RegExp]",Ee="[object Set]",Ae="[object String]",fe="[object Symbol]",Se="[object WeakMap]",we="[object ArrayBuffer]",De="[object DataView]",Re="[object Float32Array]",$e="[object Float64Array]",Oe="[object Int8Array]",it="[object Int16Array]",Ye="[object Int32Array]",rt="[object Uint8Array]",Ie="[object Uint8ClampedArray]",It="[object Uint16Array]",at="[object Uint32Array]",je={};je[Y]=je[ae]=je[we]=je[De]=je[ee]=je[G]=je[Re]=je[$e]=je[Oe]=je[it]=je[Ye]=je[de]=je[Me]=je[ge]=je[xe]=je[Ee]=je[Ae]=je[fe]=je[rt]=je[Ie]=je[It]=je[at]=!0,je[ie]=je[oe]=je[Se]=!1;function Ht(Wt,zt,st,sr,ur,ar){var yr,pr=zt&j,Jt=zt&U,ir=zt&H;if(st&&(yr=ur?st(Wt,sr,ur,ar):st(Wt)),yr!==void 0)return yr;if(!O(Wt))return Wt;var xr=I(Wt);if(xr){if(yr=x(Wt),!pr)return l(Wt,yr)}else{var rr=v(Wt),nt=rr==oe||rr==ue;if(k(Wt))return o(Wt,pr);if(rr==ge||rr==Y||nt&&!ur){if(yr=Jt||nt?{}:P(Wt),!pr)return Jt?c(Wt,i(yr,Wt)):a(Wt,n(yr,Wt))}else{if(!je[rr])return ur?Wt:{};yr=b(Wt,rr,pr)}}ar||(ar=new e);var be=ar.get(Wt);if(be)return be;ar.set(Wt,yr),F(Wt)?Wt.forEach(function(Qe){yr.add(Ht(Qe,zt,st,Qe,Wt,ar))}):M(Wt)&&Wt.forEach(function(Qe,ot){yr.set(ot,Ht(Qe,zt,st,ot,Wt,ar))});var _e=ir?Jt?g:p:Jt?$:N,Ue=xr?void 0:_e(Wt);return t(Ue||Wt,function(Qe,ot){Ue&&(ot=Qe,Qe=Wt[ot]),r(yr,ot,Ht(Qe,zt,st,ot,Wt,ar))}),yr}return e4=Ht,e4}var t4,sF;function Gme(){if(sF)return t4;sF=1;var e=Ume(),t=1,r=4;function n(i){return e(i,t|r)}return t4=n,t4}var lF;function Hme(){if(lF)return Qm;lF=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.mergeClasses=void 0;var e=XI(),t=o(e),r=Gme(),n=o(r),i=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var p=arguments[c];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(a[g]=p[g])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var l=Qm.mergeClasses=function(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],g=c.default&&(0,n.default)(c.default)||{};return p.map(function(v){var x=c[v];return x&&(0,t.default)(x,function(b,P){g[P]||(g[P]={}),g[P]=i({},g[P],x[P])}),v}),g};return Qm.default=l,Qm}var eg={},uF;function Wme(){if(uF)return eg;uF=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.autoprefix=void 0;var e=XI(),t=n(e),r=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(l[p]=c[p])}return l};function n(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var p=c[a];return p||{extend:a}}},o=eg.autoprefix=function(a){var c={};return(0,t.default)(a,function(p,g){var v={};(0,t.default)(p,function(x,b){var P=i[b];P?v=r({},v,P(x)):v[b]=x}),c[g]=v}),c};return eg.default=o,eg}var tg={},cF;function Xme(){if(cF)return tg;cF=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.hover=void 0;var e=Object.assign||function(c){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(c[v]=g[v])}return c},t=Y0(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function i(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function o(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:c}function l(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}var a=tg.hover=function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){l(x,v);function x(){var b,P,I,k;i(this,x);for(var M=arguments.length,O=Array(M),F=0;F<M;F++)O[F]=arguments[F];return k=(P=(I=o(this,(b=x.__proto__||Object.getPrototypeOf(x)).call.apply(b,[this].concat(O))),I),I.state={hover:!1},I.handleMouseOver=function(){return I.setState({hover:!0})},I.handleMouseOut=function(){return I.setState({hover:!1})},I.render=function(){return r.default.createElement(g,{onMouseOver:I.handleMouseOver,onMouseOut:I.handleMouseOut},r.default.createElement(p,e({},I.props,I.state)))},P),o(I,k)}return x})(r.default.Component)};return tg.default=a,tg}var rg={},dF;function Yme(){if(dF)return rg;dF=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.active=void 0;var e=Object.assign||function(c){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(c[v]=g[v])}return c},t=Y0(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function i(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function o(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:c}function l(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}var a=rg.active=function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){l(x,v);function x(){var b,P,I,k;i(this,x);for(var M=arguments.length,O=Array(M),F=0;F<M;F++)O[F]=arguments[F];return k=(P=(I=o(this,(b=x.__proto__||Object.getPrototypeOf(x)).call.apply(b,[this].concat(O))),I),I.state={active:!1},I.handleMouseDown=function(){return I.setState({active:!0})},I.handleMouseUp=function(){return I.setState({active:!1})},I.render=function(){return r.default.createElement(g,{onMouseDown:I.handleMouseDown,onMouseUp:I.handleMouseUp},r.default.createElement(p,e({},I.props,I.state)))},P),o(I,k)}return x})(r.default.Component)};return rg.default=a,rg}var Gb={},fF;function Zme(){if(fF)return Gb;fF=1,Object.defineProperty(Gb,"__esModule",{value:!0});var e=function(r,n){var i={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=c};return r===0&&o("first-child"),r===n-1&&o("last-child"),(r===0||r%2===0)&&o("even"),Math.abs(r%2)===1&&o("odd"),o("nth-child",r),i};return Gb.default=e,Gb}var hF;function Kme(){if(hF)return Ru;hF=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.ReactCSS=Ru.loop=Ru.handleActive=Ru.handleHover=Ru.hover=void 0;var e=_me(),t=x(e),r=Hme(),n=x(r),i=Wme(),o=x(i),l=Xme(),a=x(l),c=Yme(),p=x(c),g=Zme(),v=x(g);function x(P){return P&&P.__esModule?P:{default:P}}Ru.hover=a.default,Ru.handleHover=a.default,Ru.handleActive=p.default,Ru.loop=v.default;var b=Ru.ReactCSS=function(I){for(var k=arguments.length,M=Array(k>1?k-1:0),O=1;O<k;O++)M[O-1]=arguments[O];var F=(0,t.default)(M),N=(0,n.default)(I,F);return(0,o.default)(N)};return Ru.default=b,Ru}var ak=Kme();const Ti=rf(ak);var Jme=function(t,r,n,i,o){var l=o.clientWidth,a=o.clientHeight,c=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,g=c-(o.getBoundingClientRect().left+window.pageXOffset),v=p-(o.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var x=void 0;if(v<0?x=0:v>a?x=1:x=Math.round(v*100/a)/100,r.a!==x)return{h:r.h,s:r.s,l:r.l,a:x,source:"rgb"}}else{var b=void 0;if(g<0?b=0:g>l?b=1:b=Math.round(g*100/l)/100,i!==b)return{h:r.h,s:r.s,l:r.l,a:b,source:"rgb"}}return null},r4={},Qme=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=n*2,o.height=n*2;var l=o.getContext("2d");return l?(l.fillStyle=t,l.fillRect(0,0,o.width,o.height),l.fillStyle=r,l.fillRect(0,0,n,n),l.translate(n,n),l.fillRect(0,0,n,n),o.toDataURL()):null},ege=function(t,r,n,i){var o=t+"-"+r+"-"+n+(i?"-server":"");if(r4[o])return r4[o];var l=Qme(t,r,n,i);return r4[o]=l,l},pF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ay=function(t){var r=t.white,n=t.grey,i=t.size,o=t.renderers,l=t.borderRadius,a=t.boxShadow,c=t.children,p=Ti({default:{grid:{borderRadius:l,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+ege(r,n,i,o.canvas)+") center left"}}});return Q.isValidElement(c)?ft.cloneElement(c,pF({},c.props,{style:pF({},c.props.style,p.grid)})):ft.createElement("div",{style:p.grid})};Ay.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var tge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rge=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function nge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ige(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ok=(function(e){ige(t,e);function t(){var r,n,i,o;nge(this,t);for(var l=arguments.length,a=Array(l),c=0;c<l;c++)a[c]=arguments[c];return o=(n=(i=mF(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(p){var g=Jme(p,i.props.hsl,i.props.direction,i.props.a,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,p)},i.handleMouseDown=function(p){i.handleChange(p),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),mF(i,o)}return rge(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,o=Ti({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:tge({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return ft.createElement("div",{style:o.alpha},ft.createElement("div",{style:o.checkboard},ft.createElement(Ay,{renderers:this.props.renderers})),ft.createElement("div",{style:o.gradient}),ft.createElement("div",{style:o.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ft.createElement("div",{style:o.pointer},this.props.pointer?ft.createElement(this.props.pointer,this.props):ft.createElement("div",{style:o.slider}))))}}]),t})(Q.PureComponent||Q.Component),age=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function oge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function uge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var cge=1,Q$=38,dge=40,fge=[Q$,dge],hge=function(t){return fge.indexOf(t)>-1},pge=function(t){return Number(String(t).replace(/%/g,""))},mge=1,ra=(function(e){uge(t,e);function t(r){sge(this,t);var n=lge(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var o=pge(i.target.value);if(!isNaN(o)&&hge(i.keyCode)){var l=n.getArrowOffset(),a=i.keyCode===Q$?o+l:o-l;n.setUpdatedValue(a,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var o=Math.round(n.props.value+i.movementX);o>=0&&o<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(o),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+mge++,n}return age(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return oge({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||cge}},{key:"setUpdatedValue",value:function(n,i){var o=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(o,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=Ti({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return ft.createElement("div",{style:i.wrap},ft.createElement("input",{id:this.inputId,style:i.input,ref:function(l){return n.input=l},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?ft.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t})(Q.PureComponent||Q.Component),gge=function(t,r,n,i){var o=i.clientWidth,l=i.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,p=a-(i.getBoundingClientRect().left+window.pageXOffset),g=c-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var v=void 0;if(g<0)v=359;else if(g>l)v=0;else{var x=-(g*100/l)+100;v=360*x/100}if(n.h!==v)return{h:v,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var b=void 0;if(p<0)b=0;else if(p>o)b=359;else{var P=p*100/o;b=360*P/100}if(n.h!==b)return{h:b,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},yge=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function vge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function bge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var My=(function(e){bge(t,e);function t(){var r,n,i,o;vge(this,t);for(var l=arguments.length,a=Array(l),c=0;c<l;c++)a[c]=arguments[c];return o=(n=(i=gF(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(p){var g=gge(p,i.props.direction,i.props.hsl,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,p)},i.handleMouseDown=function(p){i.handleChange(p),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),gF(i,o)}return yge(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,o=i===void 0?"horizontal":i,l=Ti({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return ft.createElement("div",{style:l.hue},ft.createElement("div",{className:"hue-"+o,style:l.container,ref:function(c){return n.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ft.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),ft.createElement("div",{style:l.pointer},this.props.pointer?ft.createElement(this.props.pointer,this.props):ft.createElement("div",{style:l.slider}))))}}]),t})(Q.PureComponent||Q.Component);function _ge(){this.__data__=[],this.size=0}function x1(e,t){return e===t||e!==e&&t!==t}function X2(e,t){for(var r=e.length;r--;)if(x1(e[r][0],t))return r;return-1}var xge=Array.prototype,wge=xge.splice;function Sge(e){var t=this.__data__,r=X2(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():wge.call(t,r,1),--this.size,!0}function Cge(e){var t=this.__data__,r=X2(t,e);return r<0?void 0:t[r][1]}function Ege(e){return X2(this.__data__,e)>-1}function Tge(e,t){var r=this.__data__,n=X2(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Kf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kf.prototype.clear=_ge;Kf.prototype.delete=Sge;Kf.prototype.get=Cge;Kf.prototype.has=Ege;Kf.prototype.set=Tge;function Pge(){this.__data__=new Kf,this.size=0}function Ige(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function kge(e){return this.__data__.get(e)}function Age(e){return this.__data__.has(e)}var eV=typeof global=="object"&&global&&global.Object===Object&&global,Mge=typeof self=="object"&&self&&self.Object===Object&&self,_d=eV||Mge||Function("return this")(),zh=_d.Symbol,tV=Object.prototype,Lge=tV.hasOwnProperty,Rge=tV.toString,pv=zh?zh.toStringTag:void 0;function Dge(e){var t=Lge.call(e,pv),r=e[pv];try{e[pv]=void 0;var n=!0}catch{}var i=Rge.call(e);return n&&(t?e[pv]=r:delete e[pv]),i}var Nge=Object.prototype,Oge=Nge.toString;function Fge(e){return Oge.call(e)}var Bge="[object Null]",zge="[object Undefined]",yF=zh?zh.toStringTag:void 0;function dm(e){return e==null?e===void 0?zge:Bge:yF&&yF in Object(e)?Dge(e):Fge(e)}function Uc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var jge="[object AsyncFunction]",qge="[object Function]",$ge="[object GeneratorFunction]",Vge="[object Proxy]";function sk(e){if(!Uc(e))return!1;var t=dm(e);return t==qge||t==$ge||t==jge||t==Vge}var n4=_d["__core-js_shared__"],vF=(function(){var e=/[^.]+$/.exec(n4&&n4.keys&&n4.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Uge(e){return!!vF&&vF in e}var Gge=Function.prototype,Hge=Gge.toString;function fm(e){if(e!=null){try{return Hge.call(e)}catch{}try{return e+""}catch{}}return""}var Wge=/[\\^$.*+?()[\]{}|]/g,Xge=/^\[object .+?Constructor\]$/,Yge=Function.prototype,Zge=Object.prototype,Kge=Yge.toString,Jge=Zge.hasOwnProperty,Qge=RegExp("^"+Kge.call(Jge).replace(Wge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eye(e){if(!Uc(e)||Uge(e))return!1;var t=sk(e)?Qge:Xge;return t.test(fm(e))}function tye(e,t){return e?.[t]}function hm(e,t){var r=tye(e,t);return eye(r)?r:void 0}var O0=hm(_d,"Map"),F0=hm(Object,"create");function rye(){this.__data__=F0?F0(null):{},this.size=0}function nye(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var iye="__lodash_hash_undefined__",aye=Object.prototype,oye=aye.hasOwnProperty;function sye(e){var t=this.__data__;if(F0){var r=t[e];return r===iye?void 0:r}return oye.call(t,e)?t[e]:void 0}var lye=Object.prototype,uye=lye.hasOwnProperty;function cye(e){var t=this.__data__;return F0?t[e]!==void 0:uye.call(t,e)}var dye="__lodash_hash_undefined__";function fye(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=F0&&t===void 0?dye:t,this}function Zp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zp.prototype.clear=rye;Zp.prototype.delete=nye;Zp.prototype.get=sye;Zp.prototype.has=cye;Zp.prototype.set=fye;function hye(){this.size=0,this.__data__={hash:new Zp,map:new(O0||Kf),string:new Zp}}function pye(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Y2(e,t){var r=e.__data__;return pye(t)?r[typeof t=="string"?"string":"hash"]:r.map}function mye(e){var t=Y2(this,e).delete(e);return this.size-=t?1:0,t}function gye(e){return Y2(this,e).get(e)}function yye(e){return Y2(this,e).has(e)}function vye(e,t){var r=Y2(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Jf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jf.prototype.clear=hye;Jf.prototype.delete=mye;Jf.prototype.get=gye;Jf.prototype.has=yye;Jf.prototype.set=vye;var bye=200;function _ye(e,t){var r=this.__data__;if(r instanceof Kf){var n=r.__data__;if(!O0||n.length<bye-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Jf(n)}return r.set(e,t),this.size=r.size,this}function Zd(e){var t=this.__data__=new Kf(e);this.size=t.size}Zd.prototype.clear=Pge;Zd.prototype.delete=Ige;Zd.prototype.get=kge;Zd.prototype.has=Age;Zd.prototype.set=_ye;var fx=(function(){try{var e=hm(Object,"defineProperty");return e({},"",{}),e}catch{}})();function lk(e,t,r){t=="__proto__"&&fx?fx(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function n3(e,t,r){(r!==void 0&&!x1(e[t],r)||r===void 0&&!(t in e))&&lk(e,t,r)}function xye(e){return function(t,r,n){for(var i=-1,o=Object(t),l=n(t),a=l.length;a--;){var c=l[++i];if(r(o[c],c,o)===!1)break}return t}}var rV=xye(),nV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bF=nV&&typeof module=="object"&&module&&!module.nodeType&&module,wye=bF&&bF.exports===nV,_F=wye?_d.Buffer:void 0;_F&&_F.allocUnsafe;function Sye(e,t){return e.slice()}var hx=_d.Uint8Array;function Cye(e){var t=new e.constructor(e.byteLength);return new hx(t).set(new hx(e)),t}function Eye(e,t){var r=Cye(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function Tye(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var xF=Object.create,Pye=(function(){function e(){}return function(t){if(!Uc(t))return{};if(xF)return xF(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function iV(e,t){return function(r){return e(t(r))}}var aV=iV(Object.getPrototypeOf,Object),Iye=Object.prototype;function uk(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Iye;return e===r}function kye(e){return typeof e.constructor=="function"&&!uk(e)?Pye(aV(e)):{}}function jh(e){return e!=null&&typeof e=="object"}var Aye="[object Arguments]";function wF(e){return jh(e)&&dm(e)==Aye}var oV=Object.prototype,Mye=oV.hasOwnProperty,Lye=oV.propertyIsEnumerable,px=wF((function(){return arguments})())?wF:function(e){return jh(e)&&Mye.call(e,"callee")&&!Lye.call(e,"callee")},vc=Array.isArray,Rye=9007199254740991;function ck(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Rye}function Ly(e){return e!=null&&ck(e.length)&&!sk(e)}function Dye(e){return jh(e)&&Ly(e)}function Nye(){return!1}var sV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,SF=sV&&typeof module=="object"&&module&&!module.nodeType&&module,Oye=SF&&SF.exports===sV,CF=Oye?_d.Buffer:void 0,Fye=CF?CF.isBuffer:void 0,mx=Fye||Nye,Bye="[object Object]",zye=Function.prototype,jye=Object.prototype,lV=zye.toString,qye=jye.hasOwnProperty,$ye=lV.call(Object);function Vye(e){if(!jh(e)||dm(e)!=Bye)return!1;var t=aV(e);if(t===null)return!0;var r=qye.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&lV.call(r)==$ye}var Uye="[object Arguments]",Gye="[object Array]",Hye="[object Boolean]",Wye="[object Date]",Xye="[object Error]",Yye="[object Function]",Zye="[object Map]",Kye="[object Number]",Jye="[object Object]",Qye="[object RegExp]",eve="[object Set]",tve="[object String]",rve="[object WeakMap]",nve="[object ArrayBuffer]",ive="[object DataView]",ave="[object Float32Array]",ove="[object Float64Array]",sve="[object Int8Array]",lve="[object Int16Array]",uve="[object Int32Array]",cve="[object Uint8Array]",dve="[object Uint8ClampedArray]",fve="[object Uint16Array]",hve="[object Uint32Array]",wo={};wo[ave]=wo[ove]=wo[sve]=wo[lve]=wo[uve]=wo[cve]=wo[dve]=wo[fve]=wo[hve]=!0;wo[Uye]=wo[Gye]=wo[nve]=wo[Hye]=wo[ive]=wo[Wye]=wo[Xye]=wo[Yye]=wo[Zye]=wo[Kye]=wo[Jye]=wo[Qye]=wo[eve]=wo[tve]=wo[rve]=!1;function pve(e){return jh(e)&&ck(e.length)&&!!wo[dm(e)]}function mve(e){return function(t){return e(t)}}var uV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,d0=uV&&typeof module=="object"&&module&&!module.nodeType&&module,gve=d0&&d0.exports===uV,i4=gve&&eV.process,EF=(function(){try{var e=d0&&d0.require&&d0.require("util").types;return e||i4&&i4.binding&&i4.binding("util")}catch{}})(),TF=EF&&EF.isTypedArray,dk=TF?mve(TF):pve;function i3(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var yve=Object.prototype,vve=yve.hasOwnProperty;function bve(e,t,r){var n=e[t];(!(vve.call(e,t)&&x1(n,r))||r===void 0&&!(t in e))&&lk(e,t,r)}function _ve(e,t,r,n){var i=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var a=t[o],c=void 0;c===void 0&&(c=e[a]),i?lk(r,a,c):bve(r,a,c)}return r}function xve(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var wve=9007199254740991,Sve=/^(?:0|[1-9]\d*)$/;function fk(e,t){var r=typeof e;return t=t??wve,!!t&&(r=="number"||r!="symbol"&&Sve.test(e))&&e>-1&&e%1==0&&e<t}var Cve=Object.prototype,Eve=Cve.hasOwnProperty;function cV(e,t){var r=vc(e),n=!r&&px(e),i=!r&&!n&&mx(e),o=!r&&!n&&!i&&dk(e),l=r||n||i||o,a=l?xve(e.length,String):[],c=a.length;for(var p in e)(t||Eve.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||fk(p,c)))&&a.push(p);return a}function Tve(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Pve=Object.prototype,Ive=Pve.hasOwnProperty;function kve(e){if(!Uc(e))return Tve(e);var t=uk(e),r=[];for(var n in e)n=="constructor"&&(t||!Ive.call(e,n))||r.push(n);return r}function dV(e){return Ly(e)?cV(e,!0):kve(e)}function Ave(e){return _ve(e,dV(e))}function Mve(e,t,r,n,i,o,l){var a=i3(e,r),c=i3(t,r),p=l.get(c);if(p){n3(e,r,p);return}var g=o?o(a,c,r+"",e,t,l):void 0,v=g===void 0;if(v){var x=vc(c),b=!x&&mx(c),P=!x&&!b&&dk(c);g=c,x||b||P?vc(a)?g=a:Dye(a)?g=Tye(a):b?(v=!1,g=Sye(c)):P?(v=!1,g=Eye(c)):g=[]:Vye(c)||px(c)?(g=a,px(a)?g=Ave(a):(!Uc(a)||sk(a))&&(g=kye(c))):v=!1}v&&(l.set(c,g),i(g,c,n,o,l),l.delete(c)),n3(e,r,g)}function fV(e,t,r,n,i){e!==t&&rV(t,function(o,l){if(i||(i=new Zd),Uc(o))Mve(e,t,l,r,fV,n,i);else{var a=n?n(i3(e,l),o,l+"",e,t,i):void 0;a===void 0&&(a=o),n3(e,l,a)}},dV)}function Z2(e){return e}function Lve(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var PF=Math.max;function Rve(e,t,r){return t=PF(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=PF(n.length-t,0),l=Array(o);++i<o;)l[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(l),Lve(e,this,a)}}function Dve(e){return function(){return e}}var Nve=fx?function(e,t){return fx(e,"toString",{configurable:!0,enumerable:!1,value:Dve(t),writable:!0})}:Z2,Ove=800,Fve=16,Bve=Date.now;function zve(e){var t=0,r=0;return function(){var n=Bve(),i=Fve-(n-r);if(r=n,i>0){if(++t>=Ove)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var jve=zve(Nve);function qve(e,t){return jve(Rve(e,t,Z2),e+"")}function $ve(e,t,r){if(!Uc(r))return!1;var n=typeof t;return(n=="number"?Ly(r)&&fk(t,r.length):n=="string"&&t in r)?x1(r[t],e):!1}function Vve(e){return qve(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,l=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,l&&$ve(r[0],r[1],l)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}var Gu=Vve(function(e,t,r){fV(e,t,r)}),w1=function(t){var r=t.zDepth,n=t.radius,i=t.background,o=t.children,l=t.styles,a=l===void 0?{}:l,c=Ti(Gu({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return ft.createElement("div",{style:c.wrap},ft.createElement("div",{style:c.bg}),ft.createElement("div",{style:c.content},o))};w1.propTypes={background:_n.string,zDepth:_n.oneOf([0,1,2,3,4,5]),radius:_n.number,styles:_n.object};w1.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var a4=function(){return _d.Date.now()},Uve=/\s/;function Gve(e){for(var t=e.length;t--&&Uve.test(e.charAt(t)););return t}var Hve=/^\s+/;function Wve(e){return e&&e.slice(0,Gve(e)+1).replace(Hve,"")}var Xve="[object Symbol]";function K2(e){return typeof e=="symbol"||jh(e)&&dm(e)==Xve}var IF=NaN,Yve=/^[-+]0x[0-9a-f]+$/i,Zve=/^0b[01]+$/i,Kve=/^0o[0-7]+$/i,Jve=parseInt;function kF(e){if(typeof e=="number")return e;if(K2(e))return IF;if(Uc(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Uc(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Wve(e);var r=Zve.test(e);return r||Kve.test(e)?Jve(e.slice(2),r?2:8):Yve.test(e)?IF:+e}var Qve="Expected a function",e0e=Math.max,t0e=Math.min;function hV(e,t,r){var n,i,o,l,a,c,p=0,g=!1,v=!1,x=!0;if(typeof e!="function")throw new TypeError(Qve);t=kF(t)||0,Uc(r)&&(g=!!r.leading,v="maxWait"in r,o=v?e0e(kF(r.maxWait)||0,t):o,x="trailing"in r?!!r.trailing:x);function b(j){var U=n,H=i;return n=i=void 0,p=j,l=e.apply(H,U),l}function P(j){return p=j,a=setTimeout(M,t),g?b(j):l}function I(j){var U=j-c,H=j-p,Y=t-U;return v?t0e(Y,o-H):Y}function k(j){var U=j-c,H=j-p;return c===void 0||U>=t||U<0||v&&H>=o}function M(){var j=a4();if(k(j))return O(j);a=setTimeout(M,I(j))}function O(j){return a=void 0,x&&n?b(j):(n=i=void 0,l)}function F(){a!==void 0&&clearTimeout(a),p=0,n=c=i=a=void 0}function N(){return a===void 0?l:O(a4())}function $(){var j=a4(),U=k(j);if(n=arguments,i=this,c=j,U){if(a===void 0)return P(c);if(v)return clearTimeout(a),a=setTimeout(M,t),b(c)}return a===void 0&&(a=setTimeout(M,t)),l}return $.cancel=F,$.flush=N,$}var r0e="Expected a function";function n0e(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(r0e);return Uc(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),hV(e,t,{leading:n,maxWait:t,trailing:i})}var i0e=function(t,r,n){var i=n.getBoundingClientRect(),o=i.width,l=i.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,p=a-(n.getBoundingClientRect().left+window.pageXOffset),g=c-(n.getBoundingClientRect().top+window.pageYOffset);p<0?p=0:p>o&&(p=o),g<0?g=0:g>l&&(g=l);var v=p/o,x=1-g/l;return{h:r.h,s:v,v:x,a:r.a,source:"hsv"}},a0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function o0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function l0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var J2=(function(e){l0e(t,e);function t(r){o0e(this,t);var n=s0e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,i0e(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var o=n.getContainerRenderWindow();o.addEventListener("mousemove",n.handleChange),o.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=n0e(function(i,o,l){i(o,l)},50),n}return a0e(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},o=i.color,l=i.white,a=i.black,c=i.pointer,p=i.circle,g=Ti({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:l,black:a,pointer:c,circle:p}},{custom:!!this.props.style});return ft.createElement("div",{style:g.color,ref:function(x){return n.container=x},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ft.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),ft.createElement("div",{style:g.white,className:"saturation-white"},ft.createElement("div",{style:g.black,className:"saturation-black"}),ft.createElement("div",{style:g.pointer},this.props.pointer?ft.createElement(this.props.pointer,this.props):ft.createElement("div",{style:g.circle}))))}}]),t})(Q.PureComponent||Q.Component);function u0e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var c0e=iV(Object.keys,Object),d0e=Object.prototype,f0e=d0e.hasOwnProperty;function h0e(e){if(!uk(e))return c0e(e);var t=[];for(var r in Object(e))f0e.call(e,r)&&r!="constructor"&&t.push(r);return t}function hk(e){return Ly(e)?cV(e):h0e(e)}function p0e(e,t){return e&&rV(e,t,hk)}function m0e(e,t){return function(r,n){if(r==null)return r;if(!Ly(r))return e(r,n);for(var i=r.length,o=-1,l=Object(r);++o<i&&n(l[o],o,l)!==!1;);return r}}var pV=m0e(p0e);function g0e(e){return typeof e=="function"?e:Z2}function y0e(e,t){var r=vc(e)?u0e:pV;return r(e,g0e(t))}function gx(e){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gx(e)}var v0e=/^\s+/,b0e=/\s+$/;function Kn(e,t){if(e=e||"",t=t||{},e instanceof Kn)return e;if(!(this instanceof Kn))return new Kn(e,t);var r=_0e(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Kn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,o,l,a;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?l=n/12.92:l=Math.pow((n+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*a},setAlpha:function(t){return this._a=mV(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=MF(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=MF(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=AF(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=AF(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return LF(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return C0e(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(zo(this._r,255)*100)+"%",g:Math.round(zo(this._g,255)*100)+"%",b:Math.round(zo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(zo(this._r,255)*100)+"%, "+Math.round(zo(this._g,255)*100)+"%, "+Math.round(zo(this._b,255)*100)+"%)":"rgba("+Math.round(zo(this._r,255)*100)+"%, "+Math.round(zo(this._g,255)*100)+"%, "+Math.round(zo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:O0e[LF(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+RF(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=Kn(t);n="#"+RF(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Kn(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(I0e,arguments)},brighten:function(){return this._applyModification(k0e,arguments)},darken:function(){return this._applyModification(A0e,arguments)},desaturate:function(){return this._applyModification(E0e,arguments)},saturate:function(){return this._applyModification(T0e,arguments)},greyscale:function(){return this._applyModification(P0e,arguments)},spin:function(){return this._applyModification(M0e,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(D0e,arguments)},complement:function(){return this._applyCombination(L0e,arguments)},monochromatic:function(){return this._applyCombination(N0e,arguments)},splitcomplement:function(){return this._applyCombination(R0e,arguments)},triad:function(){return this._applyCombination(DF,[3])},tetrad:function(){return this._applyCombination(DF,[4])}};Kn.fromRatio=function(e,t){if(gx(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=Uv(e[n]));e=r}return Kn(e,t)};function _0e(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,o=null,l=!1,a=!1;return typeof e=="string"&&(e=j0e(e)),gx(e)=="object"&&(Sf(e.r)&&Sf(e.g)&&Sf(e.b)?(t=x0e(e.r,e.g,e.b),l=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Sf(e.h)&&Sf(e.s)&&Sf(e.v)?(n=Uv(e.s),i=Uv(e.v),t=S0e(e.h,n,i),l=!0,a="hsv"):Sf(e.h)&&Sf(e.s)&&Sf(e.l)&&(n=Uv(e.s),o=Uv(e.l),t=w0e(e.h,n,o),l=!0,a="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=mV(r),{ok:l,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function x0e(e,t,r){return{r:zo(e,255)*255,g:zo(t,255)*255,b:zo(r,255)*255}}function AF(e,t,r){e=zo(e,255),t=zo(t,255),r=zo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,l,a=(n+i)/2;if(n==i)o=l=0;else{var c=n-i;switch(l=a>.5?c/(2-n-i):c/(n+i),n){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4;break}o/=6}return{h:o,s:l,l:a}}function w0e(e,t,r){var n,i,o;e=zo(e,360),t=zo(t,100),r=zo(r,100);function l(p,g,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?p+(g-p)*6*v:v<1/2?g:v<2/3?p+(g-p)*(2/3-v)*6:p}if(t===0)n=i=o=r;else{var a=r<.5?r*(1+t):r+t-r*t,c=2*r-a;n=l(c,a,e+1/3),i=l(c,a,e),o=l(c,a,e-1/3)}return{r:n*255,g:i*255,b:o*255}}function MF(e,t,r){e=zo(e,255),t=zo(t,255),r=zo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,l,a=n,c=n-i;if(l=n===0?0:c/n,n==i)o=0;else{switch(n){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4;break}o/=6}return{h:o,s:l,v:a}}function S0e(e,t,r){e=zo(e,360)*6,t=zo(t,100),r=zo(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),l=r*(1-i*t),a=r*(1-(1-i)*t),c=n%6,p=[r,l,o,o,a,r][c],g=[a,r,r,l,o,o][c],v=[o,o,a,r,r,l][c];return{r:p*255,g:g*255,b:v*255}}function LF(e,t,r,n){var i=[sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16)),sd(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function C0e(e,t,r,n,i){var o=[sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16)),sd(Math.round(r).toString(16)),sd(gV(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function RF(e,t,r,n){var i=[sd(gV(n)),sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16)),sd(Math.round(r).toString(16))];return i.join("")}Kn.equals=function(e,t){return!e||!t?!1:Kn(e).toRgbString()==Kn(t).toRgbString()};Kn.random=function(){return Kn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function E0e(e,t){t=t===0?0:t||10;var r=Kn(e).toHsl();return r.s-=t/100,r.s=Q2(r.s),Kn(r)}function T0e(e,t){t=t===0?0:t||10;var r=Kn(e).toHsl();return r.s+=t/100,r.s=Q2(r.s),Kn(r)}function P0e(e){return Kn(e).desaturate(100)}function I0e(e,t){t=t===0?0:t||10;var r=Kn(e).toHsl();return r.l+=t/100,r.l=Q2(r.l),Kn(r)}function k0e(e,t){t=t===0?0:t||10;var r=Kn(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),Kn(r)}function A0e(e,t){t=t===0?0:t||10;var r=Kn(e).toHsl();return r.l-=t/100,r.l=Q2(r.l),Kn(r)}function M0e(e,t){var r=Kn(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,Kn(r)}function L0e(e){var t=Kn(e).toHsl();return t.h=(t.h+180)%360,Kn(t)}function DF(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Kn(e).toHsl(),n=[Kn(e)],i=360/t,o=1;o<t;o++)n.push(Kn({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function R0e(e){var t=Kn(e).toHsl(),r=t.h;return[Kn(e),Kn({h:(r+72)%360,s:t.s,l:t.l}),Kn({h:(r+216)%360,s:t.s,l:t.l})]}function D0e(e,t,r){t=t||6,r=r||30;var n=Kn(e).toHsl(),i=360/r,o=[Kn(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(Kn(n));return o}function N0e(e,t){t=t||6;for(var r=Kn(e).toHsv(),n=r.h,i=r.s,o=r.v,l=[],a=1/t;t--;)l.push(Kn({h:n,s:i,v:o})),o=(o+a)%1;return l}Kn.mix=function(e,t,r){r=r===0?0:r||50;var n=Kn(e).toRgb(),i=Kn(t).toRgb(),o=r/100,l={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return Kn(l)};Kn.readability=function(e,t){var r=Kn(e),n=Kn(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};Kn.isReadable=function(e,t,r){var n=Kn.readability(e,t),i,o;switch(o=!1,i=q0e(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};Kn.mostReadable=function(e,t,r){var n=null,i=0,o,l,a,c;r=r||{},l=r.includeFallbackColors,a=r.level,c=r.size;for(var p=0;p<t.length;p++)o=Kn.readability(e,t[p]),o>i&&(i=o,n=Kn(t[p]));return Kn.isReadable(e,n,{level:a,size:c})||!l?n:(r.includeFallbackColors=!1,Kn.mostReadable(e,["#fff","#000"],r))};var a3=Kn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O0e=Kn.hexNames=F0e(a3);function F0e(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function mV(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function zo(e,t){B0e(e)&&(e="100%");var r=z0e(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Q2(e){return Math.min(1,Math.max(0,e))}function lc(e){return parseInt(e,16)}function B0e(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function z0e(e){return typeof e=="string"&&e.indexOf("%")!=-1}function sd(e){return e.length==1?"0"+e:""+e}function Uv(e){return e<=1&&(e=e*100+"%"),e}function gV(e){return Math.round(parseFloat(e)*255).toString(16)}function NF(e){return lc(e)/255}var rd=(function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Sf(e){return!!rd.CSS_UNIT.exec(e)}function j0e(e){e=e.replace(v0e,"").replace(b0e,"").toLowerCase();var t=!1;if(a3[e])e=a3[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=rd.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=rd.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=rd.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=rd.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=rd.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=rd.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=rd.hex8.exec(e))?{r:lc(r[1]),g:lc(r[2]),b:lc(r[3]),a:NF(r[4]),format:t?"name":"hex8"}:(r=rd.hex6.exec(e))?{r:lc(r[1]),g:lc(r[2]),b:lc(r[3]),format:t?"name":"hex"}:(r=rd.hex4.exec(e))?{r:lc(r[1]+""+r[1]),g:lc(r[2]+""+r[2]),b:lc(r[3]+""+r[3]),a:NF(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=rd.hex3.exec(e))?{r:lc(r[1]+""+r[1]),g:lc(r[2]+""+r[2]),b:lc(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function q0e(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var OF=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return y0e(r,function(o){if(t[o]&&(n+=1,isNaN(t[o])||(i+=1),o==="s"||o==="l")){var l=/^\d+%$/;l.test(t[o])&&(i+=1)}}),n===i?t:!1},Gv=function(t,r){var n=t.hex?Kn(t.hex):Kn(t),i=n.toHsl(),o=n.toHsv(),l=n.toRgb(),a=n.toHex();i.s===0&&(i.h=r||0,o.h=r||0);var c=a==="000000"&&l.a===0;return{hsl:i,hex:c?"transparent":"#"+a,rgb:l,hsv:o,oldHue:t.h||r||i.h,source:t.source}},Xh=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&Kn(t).isValid()},pk=function(t){if(!t)return"#fff";var r=Gv(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},o4=function(t,r){var n=t.replace("","");return Kn(r+" ("+n+")")._ok},mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function V0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function G0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Hu=function(t){var r=(function(n){G0e(i,n);function i(o){V0e(this,i);var l=U0e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return l.handleChange=function(a,c){var p=OF(a);if(p){var g=Gv(a,a.h||l.state.oldHue);l.setState(g),l.props.onChangeComplete&&l.debounce(l.props.onChangeComplete,g,c),l.props.onChange&&l.props.onChange(g,c)}},l.handleSwatchHover=function(a,c){var p=OF(a);if(p){var g=Gv(a,a.h||l.state.oldHue);l.props.onSwatchHover&&l.props.onSwatchHover(g,c)}},l.state=mv({},Gv(o.color,0)),l.debounce=hV(function(a,c,p){a(c,p)},100),l}return $0e(i,[{key:"render",value:function(){var l={};return this.props.onSwatchHover&&(l.onSwatchHover=this.handleSwatchHover),ft.createElement(t,mv({},this.props,this.state,{onChange:this.handleChange},l))}}],[{key:"getDerivedStateFromProps",value:function(l,a){return mv({},Gv(l.color,a.oldHue))}}]),i})(Q.PureComponent||Q.Component);return r.propTypes=mv({},t.propTypes),r.defaultProps=mv({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},H0e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function X0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Y0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Z0e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(n){Y0e(i,n);function i(){var o,l,a,c;X0e(this,i);for(var p=arguments.length,g=Array(p),v=0;v<p;v++)g[v]=arguments[v];return c=(l=(a=FF(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(g))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},l),FF(a,c)}return W0e(i,[{key:"render",value:function(){return ft.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},ft.createElement(t,H0e({},this.props,this.state)))}}]),i})(ft.Component)},BF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0e=13,J0e=function(t){var r=t.color,n=t.style,i=t.onClick,o=i===void 0?function(){}:i,l=t.onHover,a=t.title,c=a===void 0?r:a,p=t.children,g=t.focus,v=t.focusStyle,x=v===void 0?{}:v,b=r==="transparent",P=Ti({default:{swatch:BF({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,g?x:{})}}),I=function(N){return o(r,N)},k=function(N){return N.keyCode===K0e&&o(r,N)},M=function(N){return l(r,N)},O={};return l&&(O.onMouseOver=M),ft.createElement("div",BF({style:P.swatch,onClick:I,title:c,tabIndex:0,onKeyDown:k},O),p,b&&ft.createElement(Ay,{borderRadius:P.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const pm=Z0e(J0e);var Q0e=function(t){var r=t.direction,n=Ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return ft.createElement("div",{style:n.picker})},e1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yV=function(t){var r=t.rgb,n=t.hsl,i=t.width,o=t.height,l=t.onChange,a=t.direction,c=t.style,p=t.renderers,g=t.pointer,v=t.className,x=v===void 0?"":v,b=Ti({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:c}}});return ft.createElement("div",{style:b.picker,className:"alpha-picker "+x},ft.createElement(ok,e1e({},b.alpha,{rgb:r,hsl:n,pointer:g,renderers:p,onChange:l,direction:a})))};yV.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Q0e};Hu(yV);function vV(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var t1e="__lodash_hash_undefined__";function r1e(e){return this.__data__.set(e,t1e),this}function n1e(e){return this.__data__.has(e)}function yx(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Jf;++t<r;)this.add(e[t])}yx.prototype.add=yx.prototype.push=r1e;yx.prototype.has=n1e;function i1e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function a1e(e,t){return e.has(t)}var o1e=1,s1e=2;function bV(e,t,r,n,i,o){var l=r&o1e,a=e.length,c=t.length;if(a!=c&&!(l&&c>a))return!1;var p=o.get(e),g=o.get(t);if(p&&g)return p==t&&g==e;var v=-1,x=!0,b=r&s1e?new yx:void 0;for(o.set(e,t),o.set(t,e);++v<a;){var P=e[v],I=t[v];if(n)var k=l?n(I,P,v,t,e,o):n(P,I,v,e,t,o);if(k!==void 0){if(k)continue;x=!1;break}if(b){if(!i1e(t,function(M,O){if(!a1e(b,O)&&(P===M||i(P,M,r,n,o)))return b.push(O)})){x=!1;break}}else if(!(P===I||i(P,I,r,n,o))){x=!1;break}}return o.delete(e),o.delete(t),x}function l1e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function u1e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var c1e=1,d1e=2,f1e="[object Boolean]",h1e="[object Date]",p1e="[object Error]",m1e="[object Map]",g1e="[object Number]",y1e="[object RegExp]",v1e="[object Set]",b1e="[object String]",_1e="[object Symbol]",x1e="[object ArrayBuffer]",w1e="[object DataView]",zF=zh?zh.prototype:void 0,s4=zF?zF.valueOf:void 0;function S1e(e,t,r,n,i,o,l){switch(r){case w1e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x1e:return!(e.byteLength!=t.byteLength||!o(new hx(e),new hx(t)));case f1e:case h1e:case g1e:return x1(+e,+t);case p1e:return e.name==t.name&&e.message==t.message;case y1e:case b1e:return e==t+"";case m1e:var a=l1e;case v1e:var c=n&c1e;if(a||(a=u1e),e.size!=t.size&&!c)return!1;var p=l.get(e);if(p)return p==t;n|=d1e,l.set(e,t);var g=bV(a(e),a(t),n,i,o,l);return l.delete(e),g;case _1e:if(s4)return s4.call(e)==s4.call(t)}return!1}function C1e(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function E1e(e,t,r){var n=t(e);return vc(e)?n:C1e(n,r(e))}function T1e(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var l=e[r];t(l,r,e)&&(o[i++]=l)}return o}function P1e(){return[]}var I1e=Object.prototype,k1e=I1e.propertyIsEnumerable,jF=Object.getOwnPropertySymbols,A1e=jF?function(e){return e==null?[]:(e=Object(e),T1e(jF(e),function(t){return k1e.call(e,t)}))}:P1e;function qF(e){return E1e(e,hk,A1e)}var M1e=1,L1e=Object.prototype,R1e=L1e.hasOwnProperty;function D1e(e,t,r,n,i,o){var l=r&M1e,a=qF(e),c=a.length,p=qF(t),g=p.length;if(c!=g&&!l)return!1;for(var v=c;v--;){var x=a[v];if(!(l?x in t:R1e.call(t,x)))return!1}var b=o.get(e),P=o.get(t);if(b&&P)return b==t&&P==e;var I=!0;o.set(e,t),o.set(t,e);for(var k=l;++v<c;){x=a[v];var M=e[x],O=t[x];if(n)var F=l?n(O,M,x,t,e,o):n(M,O,x,e,t,o);if(!(F===void 0?M===O||i(M,O,r,n,o):F)){I=!1;break}k||(k=x=="constructor")}if(I&&!k){var N=e.constructor,$=t.constructor;N!=$&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof $=="function"&&$ instanceof $)&&(I=!1)}return o.delete(e),o.delete(t),I}var o3=hm(_d,"DataView"),s3=hm(_d,"Promise"),l3=hm(_d,"Set"),u3=hm(_d,"WeakMap"),$F="[object Map]",N1e="[object Object]",VF="[object Promise]",UF="[object Set]",GF="[object WeakMap]",HF="[object DataView]",O1e=fm(o3),F1e=fm(O0),B1e=fm(s3),z1e=fm(l3),j1e=fm(u3),_h=dm;(o3&&_h(new o3(new ArrayBuffer(1)))!=HF||O0&&_h(new O0)!=$F||s3&&_h(s3.resolve())!=VF||l3&&_h(new l3)!=UF||u3&&_h(new u3)!=GF)&&(_h=function(e){var t=dm(e),r=t==N1e?e.constructor:void 0,n=r?fm(r):"";if(n)switch(n){case O1e:return HF;case F1e:return $F;case B1e:return VF;case z1e:return UF;case j1e:return GF}return t});var q1e=1,WF="[object Arguments]",XF="[object Array]",Hb="[object Object]",$1e=Object.prototype,YF=$1e.hasOwnProperty;function V1e(e,t,r,n,i,o){var l=vc(e),a=vc(t),c=l?XF:_h(e),p=a?XF:_h(t);c=c==WF?Hb:c,p=p==WF?Hb:p;var g=c==Hb,v=p==Hb,x=c==p;if(x&&mx(e)){if(!mx(t))return!1;l=!0,g=!1}if(x&&!g)return o||(o=new Zd),l||dk(e)?bV(e,t,r,n,i,o):S1e(e,t,c,r,n,i,o);if(!(r&q1e)){var b=g&&YF.call(e,"__wrapped__"),P=v&&YF.call(t,"__wrapped__");if(b||P){var I=b?e.value():e,k=P?t.value():t;return o||(o=new Zd),i(I,k,r,n,o)}}return x?(o||(o=new Zd),D1e(e,t,r,n,i,o)):!1}function mk(e,t,r,n,i){return e===t?!0:e==null||t==null||!jh(e)&&!jh(t)?e!==e&&t!==t:V1e(e,t,r,n,mk,i)}var U1e=1,G1e=2;function H1e(e,t,r,n){var i=r.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var l=r[i];if(l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){l=r[i];var a=l[0],c=e[a],p=l[1];if(l[2]){if(c===void 0&&!(a in e))return!1}else{var g=new Zd,v;if(!(v===void 0?mk(p,c,U1e|G1e,n,g):v))return!1}}return!0}function _V(e){return e===e&&!Uc(e)}function W1e(e){for(var t=hk(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,_V(i)]}return t}function xV(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function X1e(e){var t=W1e(e);return t.length==1&&t[0][2]?xV(t[0][0],t[0][1]):function(r){return r===e||H1e(r,e,t)}}var Y1e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z1e=/^\w*$/;function gk(e,t){if(vc(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||K2(e)?!0:Z1e.test(e)||!Y1e.test(e)||t!=null&&e in Object(t)}var K1e="Expected a function";function yk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(K1e);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var l=e.apply(this,n);return r.cache=o.set(i,l)||o,l};return r.cache=new(yk.Cache||Jf),r}yk.Cache=Jf;var J1e=500;function Q1e(e){var t=yk(e,function(n){return r.size===J1e&&r.clear(),n}),r=t.cache;return t}var ebe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tbe=/\\(\\)?/g,rbe=Q1e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ebe,function(r,n,i,o){t.push(i?o.replace(tbe,"$1"):n||r)}),t}),ZF=zh?zh.prototype:void 0,KF=ZF?ZF.toString:void 0;function wV(e){if(typeof e=="string")return e;if(vc(e))return vV(e,wV)+"";if(K2(e))return KF?KF.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function nbe(e){return e==null?"":wV(e)}function SV(e,t){return vc(e)?e:gk(e,t)?[e]:rbe(nbe(e))}function ew(e){if(typeof e=="string"||K2(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function CV(e,t){t=SV(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ew(t[r++])];return r&&r==n?e:void 0}function ibe(e,t,r){var n=e==null?void 0:CV(e,t);return n===void 0?r:n}function abe(e,t){return e!=null&&t in Object(e)}function obe(e,t,r){t=SV(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var l=ew(t[n]);if(!(o=e!=null&&r(e,l)))break;e=e[l]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&ck(i)&&fk(l,i)&&(vc(e)||px(e)))}function sbe(e,t){return e!=null&&obe(e,t,abe)}var lbe=1,ube=2;function cbe(e,t){return gk(e)&&_V(t)?xV(ew(e),t):function(r){var n=ibe(r,e);return n===void 0&&n===t?sbe(r,e):mk(t,n,lbe|ube)}}function dbe(e){return function(t){return t?.[e]}}function fbe(e){return function(t){return CV(t,e)}}function hbe(e){return gk(e)?dbe(ew(e)):fbe(e)}function pbe(e){return typeof e=="function"?e:e==null?Z2:typeof e=="object"?vc(e)?cbe(e[0],e[1]):X1e(e):hbe(e)}function mbe(e,t){var r=-1,n=Ly(e)?Array(e.length):[];return pV(e,function(i,o,l){n[++r]=t(i,o,l)}),n}function mm(e,t){var r=vc(e)?vV:mbe;return r(e,pbe(t))}var gbe=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,o=Ti({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return ft.createElement("div",{style:o.swatches},mm(r,function(l){return ft.createElement(pm,{key:l,color:l,style:o.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+l}})}),ft.createElement("div",{style:o.clear}))},vk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,l=t.width,a=t.triangle,c=t.styles,p=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=i==="transparent",b=function(k,M){Xh(k)&&r({hex:k,source:"hex"},M)},P=Ti(Gu({default:{card:{width:l,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:pk(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},p),{"hide-triangle":a==="hide"});return ft.createElement("div",{style:P.card,className:"block-picker "+v},ft.createElement("div",{style:P.triangle}),ft.createElement("div",{style:P.head},x&&ft.createElement(Ay,{borderRadius:"6px 6px 0 0"}),ft.createElement("div",{style:P.label},i)),ft.createElement("div",{style:P.body},ft.createElement(gbe,{colors:o,onClick:b,onSwatchHover:n}),ft.createElement(ra,{style:{input:P.input},value:i,onChange:b})))};vk.propTypes={width:_n.oneOfType([_n.string,_n.number]),colors:_n.arrayOf(_n.string),triangle:_n.oneOf(["top","hide"]),styles:_n.object};vk.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Hu(vk);var dg={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},fg={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},hg={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},pg={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},mg={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},gg={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},yg={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},vg={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},bg={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},Hv={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},_g={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},xg={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},wg={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Sg={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},Cg={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},Eg={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},Tg={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Pg={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},EV=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,o=t.hover,l=t.active,a=t.circleSize,c=t.circleSpacing,p=Ti({default:{swatch:{width:a,height:a,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:o,active:l});return ft.createElement("div",{style:p.swatch},ft.createElement(pm,{style:p.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:p.Swatch.boxShadow+", 0 0 5px "+r}}))};EV.defaultProps={circleSize:28,circleSpacing:14};const ybe=ak.handleHover(EV);var bk=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,o=t.colors,l=t.hex,a=t.circleSize,c=t.styles,p=c===void 0?{}:c,g=t.circleSpacing,v=t.className,x=v===void 0?"":v,b=Ti(Gu({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-g,marginBottom:-g}}},p)),P=function(k,M){return n({hex:k,source:"hex"},M)};return ft.createElement("div",{style:b.card,className:"circle-picker "+x},mm(o,function(I){return ft.createElement(ybe,{key:I,color:I,onClick:P,onSwatchHover:i,active:l===I.toLowerCase(),circleSize:a,circleSpacing:g})}))};bk.propTypes={width:_n.oneOfType([_n.string,_n.number]),circleSize:_n.number,circleSpacing:_n.number,styles:_n.object};bk.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[dg[500],fg[500],hg[500],pg[500],mg[500],gg[500],yg[500],vg[500],bg[500],Hv[500],_g[500],xg[500],wg[500],Sg[500],Cg[500],Eg[500],Tg[500],Pg[500]],styles:{}};Hu(bk);function JF(e){return e===void 0}var Wb={},QF;function vbe(){if(QF)return Wb;QF=1,Object.defineProperty(Wb,"__esModule",{value:!0});var e=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(l[p]=c[p])}return l},t=Y0(),r=n(t);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,a){var c={};for(var p in l)a.indexOf(p)>=0||Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p]);return c}var o=24;return Wb.default=function(l){var a=l.fill,c=a===void 0?"currentColor":a,p=l.width,g=p===void 0?o:p,v=l.height,x=v===void 0?o:v,b=l.style,P=b===void 0?{}:b,I=i(l,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:c,width:g,height:x},P)},I),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Wb}var bbe=vbe();const _be=rf(bbe);var xbe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function wbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TV=(function(e){Cbe(t,e);function t(r){wbe(this,t);var n=Sbe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,o){i.hex?Xh(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(JF(i.s)?n.props.hsl.s:i.s),l:Number(JF(i.l)?n.props.hsl.l:i.l),source:"hsl"},o))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return xbe(t,[{key:"render",value:function(){var n=this,i=Ti({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=ft.createElement("div",{style:i.fields,className:"flexbox-fix"},ft.createElement("div",{style:i.field},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=ft.createElement("div",{style:i.fields,className:"flexbox-fix"},ft.createElement("div",{style:i.field},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),ft.createElement("div",{style:i.alpha},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=ft.createElement("div",{style:i.fields,className:"flexbox-fix"},ft.createElement("div",{style:i.field},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),ft.createElement("div",{style:i.field},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),ft.createElement("div",{style:i.alpha},ft.createElement(ra,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),ft.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,ft.createElement("div",{style:i.toggle},ft.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},ft.createElement(_be,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t})(ft.Component);TV.defaultProps={view:"hex"};var eB=function(){var t=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return ft.createElement("div",{style:t.picker})},Ebe=function(){var t=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return ft.createElement("div",{style:t.picker})},_k=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,o=t.rgb,l=t.hsl,a=t.hsv,c=t.hex,p=t.renderers,g=t.styles,v=g===void 0?{}:g,x=t.className,b=x===void 0?"":x,P=t.defaultView,I=Ti(Gu({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},v),{disableAlpha:i});return ft.createElement("div",{style:I.picker,className:"chrome-picker "+b},ft.createElement("div",{style:I.saturation},ft.createElement(J2,{style:I.Saturation,hsl:l,hsv:a,pointer:Ebe,onChange:n})),ft.createElement("div",{style:I.body},ft.createElement("div",{style:I.controls,className:"flexbox-fix"},ft.createElement("div",{style:I.color},ft.createElement("div",{style:I.swatch},ft.createElement("div",{style:I.active}),ft.createElement(Ay,{renderers:p}))),ft.createElement("div",{style:I.toggles},ft.createElement("div",{style:I.hue},ft.createElement(My,{style:I.Hue,hsl:l,pointer:eB,onChange:n})),ft.createElement("div",{style:I.alpha},ft.createElement(ok,{style:I.Alpha,rgb:o,hsl:l,pointer:eB,renderers:p,onChange:n})))),ft.createElement(TV,{rgb:o,hsl:l,hex:c,view:P,onChange:n,disableAlpha:i})))};_k.propTypes={width:_n.oneOfType([_n.string,_n.number]),disableAlpha:_n.bool,styles:_n.object,defaultView:_n.oneOf(["hex","rgb","hsl"])};_k.defaultProps={width:225,disableAlpha:!1,styles:{}};const Tbe=Hu(_k);var Pbe=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=t.active,a=Ti({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:pk(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:l,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return ft.createElement(pm,{style:a.color,color:r,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},ft.createElement("div",{style:a.dot}))},Ibe=function(t){var r=t.hex,n=t.rgb,i=t.onChange,o=Ti({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(c,p){c.r||c.g||c.b?i({r:c.r||n.r,g:c.g||n.g,b:c.b||n.b,source:"rgb"},p):i({hex:c.hex,source:"hex"},p)};return ft.createElement("div",{style:o.fields,className:"flexbox-fix"},ft.createElement("div",{style:o.active}),ft.createElement(ra,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:r,onChange:l}),ft.createElement(ra,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:l}),ft.createElement(ra,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:l}),ft.createElement(ra,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:l}))},xk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,o=t.hex,l=t.rgb,a=t.styles,c=a===void 0?{}:a,p=t.className,g=p===void 0?"":p,v=Ti(Gu({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},c)),x=function(P,I){P.hex?Xh(P.hex)&&r({hex:P.hex,source:"hex"},I):r(P,I)};return ft.createElement(w1,{style:v.Compact,styles:c},ft.createElement("div",{style:v.compact,className:"compact-picker "+g},ft.createElement("div",null,mm(i,function(b){return ft.createElement(Pbe,{key:b,color:b,active:b.toLowerCase()===o,onClick:x,onSwatchHover:n})}),ft.createElement("div",{style:v.clear})),ft.createElement(Ibe,{hex:o,rgb:l,onChange:x})))};xk.propTypes={colors:_n.arrayOf(_n.string),styles:_n.object};xk.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Hu(xk);var kbe=function(t){var r=t.hover,n=t.color,i=t.onClick,o=t.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=Ti({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:r});return ft.createElement("div",{style:a.swatch},ft.createElement(pm,{color:n,onClick:i,onHover:o,focusStyle:l}))};const Abe=ak.handleHover(kbe);var wk=function(t){var r=t.width,n=t.colors,i=t.onChange,o=t.onSwatchHover,l=t.triangle,a=t.styles,c=a===void 0?{}:a,p=t.className,g=p===void 0?"":p,v=Ti(Gu({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},c),{"hide-triangle":l==="hide","top-left-triangle":l==="top-left","top-right-triangle":l==="top-right","bottom-left-triangle":l==="bottom-left","bottom-right-triangle":l==="bottom-right"}),x=function(P,I){return i({hex:P,source:"hex"},I)};return ft.createElement("div",{style:v.card,className:"github-picker "+g},ft.createElement("div",{style:v.triangleShadow}),ft.createElement("div",{style:v.triangle}),mm(n,function(b){return ft.createElement(Abe,{color:b,key:b,onClick:x,onSwatchHover:o})}))};wk.propTypes={width:_n.oneOfType([_n.string,_n.number]),colors:_n.arrayOf(_n.string),triangle:_n.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:_n.object};wk.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Hu(wk);var Mbe=function(t){var r=t.direction,n=Ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return ft.createElement("div",{style:n.picker})},Lbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sk=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.hsl,l=t.direction,a=t.pointer,c=t.styles,p=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=Ti(Gu({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},p)),b=function(I){return i({a:1,h:I.h,l:.5,s:1})};return ft.createElement("div",{style:x.picker,className:"hue-picker "+v},ft.createElement(My,Lbe({},x.hue,{hsl:o,pointer:a,onChange:b,direction:l})))};Sk.propTypes={styles:_n.object};Sk.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Mbe,styles:{}};Hu(Sk);var Rbe=function(t){var r=t.onChange,n=t.hex,i=t.rgb,o=t.styles,l=o===void 0?{}:o,a=t.className,c=a===void 0?"":a,p=Ti(Gu({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},l)),g=function(x,b){x.hex?Xh(x.hex)&&r({hex:x.hex,source:"hex"},b):(x.r||x.g||x.b)&&r({r:x.r||i.r,g:x.g||i.g,b:x.b||i.b,source:"rgb"},b)};return ft.createElement(w1,{styles:l},ft.createElement("div",{style:p.material,className:"material-picker "+c},ft.createElement(ra,{style:{wrap:p.HEXwrap,input:p.HEXinput,label:p.HEXlabel},label:"hex",value:n,onChange:g}),ft.createElement("div",{style:p.split,className:"flexbox-fix"},ft.createElement("div",{style:p.third},ft.createElement(ra,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"r",value:i.r,onChange:g})),ft.createElement("div",{style:p.third},ft.createElement(ra,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"g",value:i.g,onChange:g})),ft.createElement("div",{style:p.third},ft.createElement(ra,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"b",value:i.b,onChange:g})))))};Hu(Rbe);var Dbe=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,o=t.hex,l=Ti({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(p,g){p["#"]?Xh(p["#"])&&r({hex:p["#"],source:"hex"},g):p.r||p.g||p.b?r({r:p.r||n.r,g:p.g||n.g,b:p.b||n.b,source:"rgb"},g):(p.h||p.s||p.v)&&r({h:p.h||i.h,s:p.s||i.s,v:p.v||i.v,source:"hsv"},g)};return ft.createElement("div",{style:l.fields},ft.createElement(ra,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),ft.createElement(ra,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),ft.createElement(ra,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),ft.createElement("div",{style:l.divider}),ft.createElement(ra,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:a}),ft.createElement(ra,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:a}),ft.createElement(ra,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:a}),ft.createElement("div",{style:l.divider}),ft.createElement(ra,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),ft.createElement("div",{style:l.fieldSymbols},ft.createElement("div",{style:l.symbol},""),ft.createElement("div",{style:l.symbol},"%"),ft.createElement("div",{style:l.symbol},"%")))},Nbe=function(t){var r=t.hsl,n=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return ft.createElement("div",{style:n.picker})},Obe=function(){var t=Ti({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return ft.createElement("div",{style:t.pointer},ft.createElement("div",{style:t.left},ft.createElement("div",{style:t.leftInside})),ft.createElement("div",{style:t.right},ft.createElement("div",{style:t.rightInside})))},tB=function(t){var r=t.onClick,n=t.label,i=t.children,o=t.active,l=Ti({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return ft.createElement("div",{style:l.button,onClick:r},n||i)},Fbe=function(t){var r=t.rgb,n=t.currentColor,i=Ti({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return ft.createElement("div",null,ft.createElement("div",{style:i.label},"new"),ft.createElement("div",{style:i.swatches},ft.createElement("div",{style:i.new}),ft.createElement("div",{style:i.current})),ft.createElement("div",{style:i.label},"current"))},Bbe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function zbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ck=(function(e){qbe(t,e);function t(r){zbe(this,t);var n=jbe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return Bbe(t,[{key:"render",value:function(){var n=this.props,i=n.styles,o=i===void 0?{}:i,l=n.className,a=l===void 0?"":l,c=Ti(Gu({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return ft.createElement("div",{style:c.picker,className:"photoshop-picker "+a},ft.createElement("div",{style:c.head},this.props.header),ft.createElement("div",{style:c.body,className:"flexbox-fix"},ft.createElement("div",{style:c.saturation},ft.createElement(J2,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Nbe,onChange:this.props.onChange})),ft.createElement("div",{style:c.hue},ft.createElement(My,{direction:"vertical",hsl:this.props.hsl,pointer:Obe,onChange:this.props.onChange})),ft.createElement("div",{style:c.controls},ft.createElement("div",{style:c.top,className:"flexbox-fix"},ft.createElement("div",{style:c.previews},ft.createElement(Fbe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),ft.createElement("div",{style:c.actions},ft.createElement(tB,{label:"OK",onClick:this.props.onAccept,active:!0}),ft.createElement(tB,{label:"Cancel",onClick:this.props.onCancel}),ft.createElement(Dbe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t})(ft.Component);Ck.propTypes={header:_n.string,styles:_n.object};Ck.defaultProps={header:"Color Picker",styles:{}};Hu(Ck);var $be=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,l=t.disableAlpha,a=Ti({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:l}),c=function(g,v){g.hex?Xh(g.hex)&&r({hex:g.hex,source:"hex"},v):g.r||g.g||g.b?r({r:g.r||n.r,g:g.g||n.g,b:g.b||n.b,a:n.a,source:"rgb"},v):g.a&&(g.a<0?g.a=0:g.a>100&&(g.a=100),g.a/=100,r({h:i.h,s:i.s,l:i.l,a:g.a,source:"rgb"},v))};return ft.createElement("div",{style:a.fields,className:"flexbox-fix"},ft.createElement("div",{style:a.double},ft.createElement(ra,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:c})),ft.createElement("div",{style:a.single},ft.createElement(ra,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:c,dragLabel:"true",dragMax:"255"})),ft.createElement("div",{style:a.single},ft.createElement(ra,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:c,dragLabel:"true",dragMax:"255"})),ft.createElement("div",{style:a.single},ft.createElement(ra,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:c,dragLabel:"true",dragMax:"255"})),ft.createElement("div",{style:a.alpha},ft.createElement(ra,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:c,dragLabel:"true",dragMax:"100"})))},Vbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PV=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=Ti({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),a=function(p,g){i({hex:p,source:"hex"},g)};return ft.createElement("div",{style:l.colors,className:"flexbox-fix"},r.map(function(c){var p=typeof c=="string"?{color:c}:c,g=""+p.color+(p.title||"");return ft.createElement("div",{key:g,style:l.swatchWrap},ft.createElement(pm,Vbe({},p,{style:l.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+p.color}})))}))};PV.propTypes={colors:_n.arrayOf(_n.oneOfType([_n.string,_n.shape({color:_n.string,title:_n.string})])).isRequired};var Ube=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ek=function(t){var r=t.width,n=t.rgb,i=t.hex,o=t.hsv,l=t.hsl,a=t.onChange,c=t.onSwatchHover,p=t.disableAlpha,g=t.presetColors,v=t.renderers,x=t.styles,b=x===void 0?{}:x,P=t.className,I=P===void 0?"":P,k=Ti(Gu({default:Ube({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},b),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},b),{disableAlpha:p});return ft.createElement("div",{style:k.picker,className:"sketch-picker "+I},ft.createElement("div",{style:k.saturation},ft.createElement(J2,{style:k.Saturation,hsl:l,hsv:o,onChange:a})),ft.createElement("div",{style:k.controls,className:"flexbox-fix"},ft.createElement("div",{style:k.sliders},ft.createElement("div",{style:k.hue},ft.createElement(My,{style:k.Hue,hsl:l,onChange:a})),ft.createElement("div",{style:k.alpha},ft.createElement(ok,{style:k.Alpha,rgb:n,hsl:l,renderers:v,onChange:a}))),ft.createElement("div",{style:k.color},ft.createElement(Ay,null),ft.createElement("div",{style:k.activeColor}))),ft.createElement($be,{rgb:n,hsl:l,hex:i,onChange:a,disableAlpha:p}),ft.createElement(PV,{colors:g,onClick:a,onSwatchHover:c}))};Ek.propTypes={disableAlpha:_n.bool,width:_n.oneOfType([_n.string,_n.number]),styles:_n.object};Ek.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Hu(Ek);var gv=function(t){var r=t.hsl,n=t.offset,i=t.onClick,o=i===void 0?function(){}:i,l=t.active,a=t.first,c=t.last,p=Ti({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:l,first:a,last:c}),g=function(x){return o({h:r.h,s:.5,l:n,source:"hsl"},x)};return ft.createElement("div",{style:p.swatch,onClick:g})},Gbe=function(t){var r=t.onClick,n=t.hsl,i=Ti({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return ft.createElement("div",{style:i.swatches},ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:r,first:!0})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:r})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:r})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:r})),ft.createElement("div",{style:i.swatch},ft.createElement(gv,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:r,last:!0})),ft.createElement("div",{style:i.clear}))},Hbe=function(){var t=Ti({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return ft.createElement("div",{style:t.picker})},Tk=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,o=t.styles,l=o===void 0?{}:o,a=t.className,c=a===void 0?"":a,p=Ti(Gu({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},l));return ft.createElement("div",{style:p.wrap||{},className:"slider-picker "+c},ft.createElement("div",{style:p.hue},ft.createElement(My,{style:p.Hue,hsl:r,pointer:i,onChange:n})),ft.createElement("div",{style:p.swatches},ft.createElement(Gbe,{hsl:r,onClick:n})))};Tk.propTypes={styles:_n.object};Tk.defaultProps={pointer:Hbe,styles:{}};Hu(Tk);var Xb={},rB;function Wbe(){if(rB)return Xb;rB=1,Object.defineProperty(Xb,"__esModule",{value:!0});var e=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(l[p]=c[p])}return l},t=Y0(),r=n(t);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,a){var c={};for(var p in l)a.indexOf(p)>=0||Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p]);return c}var o=24;return Xb.default=function(l){var a=l.fill,c=a===void 0?"currentColor":a,p=l.width,g=p===void 0?o:p,v=l.height,x=v===void 0?o:v,b=l.style,P=b===void 0?{}:b,I=i(l,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:c,width:g,height:x},P)},I),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Xb}var Xbe=Wbe();const Ybe=rf(Xbe);var Zbe=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,l=t.first,a=t.last,c=t.active,p=Ti({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:pk(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:l,last:a,active:c,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return ft.createElement(pm,{color:r,style:p.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},ft.createElement("div",{style:p.check},ft.createElement(Ybe,null)))},Kbe=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,o=t.active,l=Ti({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return ft.createElement("div",{style:l.group},mm(i,function(a,c){return ft.createElement(Zbe,{key:a,color:a,active:a.toLowerCase()===o,first:c===0,last:c===i.length-1,onClick:r,onSwatchHover:n})}))},Pk=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.onSwatchHover,l=t.colors,a=t.hex,c=t.styles,p=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=Ti(Gu({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},p)),b=function(I,k){return i({hex:I,source:"hex"},k)};return ft.createElement("div",{style:x.picker,className:"swatches-picker "+v},ft.createElement(w1,null,ft.createElement("div",{style:x.overflow},ft.createElement("div",{style:x.body},mm(l,function(P){return ft.createElement(Kbe,{key:P.toString(),group:P,active:a,onClick:b,onSwatchHover:o})}),ft.createElement("div",{style:x.clear})))))};Pk.propTypes={width:_n.oneOfType([_n.string,_n.number]),height:_n.oneOfType([_n.string,_n.number]),colors:_n.arrayOf(_n.arrayOf(_n.string)),styles:_n.object};Pk.defaultProps={width:320,height:240,colors:[[dg[900],dg[700],dg[500],dg[300],dg[100]],[fg[900],fg[700],fg[500],fg[300],fg[100]],[hg[900],hg[700],hg[500],hg[300],hg[100]],[pg[900],pg[700],pg[500],pg[300],pg[100]],[mg[900],mg[700],mg[500],mg[300],mg[100]],[gg[900],gg[700],gg[500],gg[300],gg[100]],[yg[900],yg[700],yg[500],yg[300],yg[100]],[vg[900],vg[700],vg[500],vg[300],vg[100]],[bg[900],bg[700],bg[500],bg[300],bg[100]],["#194D33",Hv[700],Hv[500],Hv[300],Hv[100]],[_g[900],_g[700],_g[500],_g[300],_g[100]],[xg[900],xg[700],xg[500],xg[300],xg[100]],[wg[900],wg[700],wg[500],wg[300],wg[100]],[Sg[900],Sg[700],Sg[500],Sg[300],Sg[100]],[Cg[900],Cg[700],Cg[500],Cg[300],Cg[100]],[Eg[900],Eg[700],Eg[500],Eg[300],Eg[100]],[Tg[900],Tg[700],Tg[500],Tg[300],Tg[100]],[Pg[900],Pg[700],Pg[500],Pg[300],Pg[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Hu(Pk);var Ik=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,l=t.width,a=t.triangle,c=t.styles,p=c===void 0?{}:c,g=t.className,v=g===void 0?"":g,x=Ti(Gu({default:{card:{width:l,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},p),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),b=function(I,k){Xh(I)&&r({hex:I,source:"hex"},k)};return ft.createElement("div",{style:x.card,className:"twitter-picker "+v},ft.createElement("div",{style:x.triangleShadow}),ft.createElement("div",{style:x.triangle}),ft.createElement("div",{style:x.body},mm(o,function(P,I){return ft.createElement(pm,{key:I,color:P,hex:P,style:x.swatch,onClick:b,onHover:n,focusStyle:{boxShadow:"0 0 4px "+P}})}),ft.createElement("div",{style:x.hash},"#"),ft.createElement(ra,{label:null,style:{input:x.input},value:i.replace("#",""),onChange:b}),ft.createElement("div",{style:x.clear})))};Ik.propTypes={width:_n.oneOfType([_n.string,_n.number]),triangle:_n.oneOf(["hide","top-left","top-right"]),colors:_n.arrayOf(_n.string),styles:_n.object};Ik.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Hu(Ik);var kk=function(t){var r=Ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return ft.createElement("div",{style:r.picker})};kk.propTypes={hsl:_n.shape({h:_n.number,s:_n.number,l:_n.number,a:_n.number})};kk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Ak=function(t){var r=Ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return ft.createElement("div",{style:r.picker})};Ak.propTypes={hsl:_n.shape({h:_n.number,s:_n.number,l:_n.number,a:_n.number})};Ak.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Jbe=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,l=t.hsv,a=function(b,P){if(b.hex)Xh(b.hex)&&r({hex:b.hex,source:"hex"},P);else if(b.rgb){var I=b.rgb.split(",");o4(b.rgb,"rgb")&&r({r:I[0],g:I[1],b:I[2],a:1,source:"rgb"},P)}else if(b.hsv){var k=b.hsv.split(",");o4(b.hsv,"hsv")&&(k[2]=k[2].replace("%",""),k[1]=k[1].replace("%",""),k[0]=k[0].replace("",""),k[1]==1?k[1]=.01:k[2]==1&&(k[2]=.01),r({h:Number(k[0]),s:Number(k[1]),v:Number(k[2]),source:"hsv"},P))}else if(b.hsl){var M=b.hsl.split(",");o4(b.hsl,"hsl")&&(M[2]=M[2].replace("%",""),M[1]=M[1].replace("%",""),M[0]=M[0].replace("",""),v[1]==1?v[1]=.01:v[2]==1&&(v[2]=.01),r({h:Number(M[0]),s:Number(M[1]),v:Number(M[2]),source:"hsl"},P))}},c=Ti({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),p=n.r+", "+n.g+", "+n.b,g=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",v=Math.round(l.h)+", "+Math.round(l.s*100)+"%, "+Math.round(l.v*100)+"%";return ft.createElement("div",{style:c.wrap,className:"flexbox-fix"},ft.createElement("div",{style:c.fields},ft.createElement("div",{style:c.double},ft.createElement(ra,{style:{input:c.input,label:c.label},label:"hex",value:o,onChange:a})),ft.createElement("div",{style:c.column},ft.createElement("div",{style:c.single},ft.createElement(ra,{style:{input:c.input2,label:c.label2},label:"rgb",value:p,onChange:a})),ft.createElement("div",{style:c.single},ft.createElement(ra,{style:{input:c.input2,label:c.label2},label:"hsv",value:v,onChange:a})),ft.createElement("div",{style:c.single},ft.createElement(ra,{style:{input:c.input2,label:c.label2},label:"hsl",value:g,onChange:a})))))},Mk=function(t){var r=t.width,n=t.onChange,i=t.rgb,o=t.hsl,l=t.hsv,a=t.hex,c=t.header,p=t.styles,g=p===void 0?{}:p,v=t.className,x=v===void 0?"":v,b=Ti(Gu({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},g));return ft.createElement("div",{style:b.picker,className:"google-picker "+x},ft.createElement("div",{style:b.head},c),ft.createElement("div",{style:b.swatch}),ft.createElement("div",{style:b.saturation},ft.createElement(J2,{hsl:o,hsv:l,pointer:kk,onChange:n})),ft.createElement("div",{style:b.body},ft.createElement("div",{style:b.controls,className:"flexbox-fix"},ft.createElement("div",{style:b.hue},ft.createElement(My,{style:b.Hue,hsl:o,radius:"4px",pointer:Ak,onChange:n}))),ft.createElement(Jbe,{rgb:i,hsl:o,hex:a,hsv:l,onChange:n})))};Mk.propTypes={width:_n.oneOfType([_n.string,_n.number]),styles:_n.object,header:_n.string};Mk.defaultProps={width:652,styles:{},header:"Color picker"};Hu(Mk);const Wv={rgba:e=>`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`,rgb:e=>`rgb(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b})`,hex:e=>e.hex,rgba_rgb:e=>e.rgb.a===1?Wv.rgb(e):Wv.rgba(e),rgba_hex:e=>e.rgb.a===1?Wv.hex(e):Wv.rgba(e)},B0=({convert:e,...t})=>{const[r,n]=Q.useState(!1),i=t?.value||"";return Z.jsxs(Z.Fragment,{children:[Z.jsx(Mf,{container:!0,sx:{flexWrap:"nowrap"},children:Z.jsx(Mf,{size:12,children:Z.jsxs(ji,{variant:"outlined",onClick:()=>n(!0),sx:{minWidth:"100%",padding:"5px",marginBottom:"10px",justifyContent:"flex-start",borderColor:o=>o.palette.text.primary,color:o=>o.palette.text.primary},children:[Z.jsx("div",{style:{width:"25px",height:"25px",marginRight:"10px",backgroundColor:i}}),i]})})}),r&&Z.jsx("div",{style:{position:"relative",marginTop:0},children:Z.jsxs("div",{style:{position:"absolute",zIndex:1e3},children:[Z.jsx("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:()=>{n(!1)}}),Z.jsx(Tbe,{color:i,onChange:o=>{const l=Wv[e](o);t?.onChange?.(l)}})]})})]})};B0.defaultProps={convert:"rgba_hex",label:"Color",name:"color"};try{B0.displayName="ColorPicker",B0.__docgenInfo={description:"",displayName:"ColorPicker",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void) | undefined"}},convert:{defaultValue:{value:"rgba_hex"},description:"",name:"convert",required:!1,type:{name:"enum",value:[{value:'"rgb"'},{value:'"rgba"'},{value:'"rgba_hex"'},{value:'"hex"'},{value:'"rgba_rgb"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | undefined"}}}}}catch{}function c3({propKey:e,value:t,setPaintProps:r}){return Z.jsx(B0,{value:t,label:"Color",onChange:n=>{r(i=>({...i,[e]:n}))}})}try{c3.displayName="PaintPropsColorPicker",c3.__docgenInfo={description:"",displayName:"PaintPropsColorPicker",props:{key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},propKey:{defaultValue:null,description:"",name:"propKey",required:!0,type:{name:"string"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}}}}}catch{}const Qbe=_r(Oc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"}),e_e=_r(po)({marginLeft:"61px"}),IV={"circle-color":"colorpicker","circle-radius":"slider","circle-stroke-color":"colorpicker","circle-stroke-width":"slider","fill-color":"colorpicker","fill-outline-color":"colorpicker","line-color":"colorpicker","line-width":"slider","line-blur":"slider"},t_e=Object.keys(IV),r_e={"circle-stroke-width":{step:1,min:1,max:20},"circle-radius":{step:1,min:1,max:100},"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function vx({paintProps:e={},setPaintProps:t}){const r=Q.useRef(Math.round(Math.random()*1e10)),n=Q.useCallback(i=>{if(t_e.indexOf(i)!==-1&&(typeof e[i]=="number"||typeof e[i]=="string")){const o=Z.jsx(Ko,{id:i+"_label",gutterBottom:!0,children:i});switch(IV[i]){case"slider":return Z.jsxs(ft.Fragment,{children:[o,Z.jsx(HP,{...r_e[i],value:e[i],valueLabelDisplay:"auto",onChange:(l,a)=>{a&&t(c=>({...c,[i]:a}))}})]},i);case"numberfield":return Z.jsxs(ft.Fragment,{children:[o,Z.jsx(C2,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:e[i],onChange:l=>{l?.target?.value&&t(a=>({...a,[i]:parseInt(l.target.value)}))}})]},i);case"colorpicker":return Z.jsxs(ft.Fragment,{children:[o,Z.jsx(po,{sx:{"& > div":{width:"initial !important"}},children:Z.jsx(c3,{value:e[i],propKey:i,setPaintProps:t},i)})]},i)}}return null},[e]);return Z.jsx(Z.Fragment,{children:Z.jsx(Qbe,{children:Z.jsx(zc,{children:Z.jsx(e_e,{children:Object.keys(e).map(i=>n(i))})},r+"_paintPropForm")})})}try{vx.displayName="LayerPropertyForm",vx.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{paintProps:{defaultValue:{value:"{}"},description:"",name:"paintProps",required:!1,type:{name:"paintPropsType"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}},layerType:{defaultValue:null,description:"",name:"layerType",required:!0,type:{name:"string"}}}}}catch{}const bx=_r(zc)(e=>({paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"})),n_e=_r(hc)({padding:"4px",marginTop:"-3px"}),Pf=_r(S0)({minWidth:"30px"}),If=_r(iy)({padding:0});function _x({configurable:e,vtProps:t,setVtProps:r,id:n,...i}){const[o,l]=Q.useState(!1),[a,c]=Q.useState(!0),[p,g]=Q.useState(t.layers[n].paint);return Q.useEffect(()=>{if(!r||typeof t.layers[n]?.layout?.visibility>"u"&&a||!a&&t.layers[n]?.layout?.visibility==="none"||a&&t.layers[n]?.layout?.visibility==="visible")return;const v=[...t.layers];v[n].layout?v[n].layout.visibility=a?"visible":"none":v[n].layout={visibility:a?"visible":"none"},r({...t,layers:v})},[a,n,r,t]),Q.useEffect(()=>{c(!!i.visibleMaster)},[i.visibleMaster]),Q.useEffect(()=>{if(r&&JSON.stringify(p)!==JSON.stringify(t.layers[n].paint)){const v={...p},x=[...t.layers];x[n].paint=v,r({...t,layers:x})}},[p,n,r,t]),Z.jsxs(Z.Fragment,{children:[Z.jsxs(bx,{secondaryAction:e?Z.jsx(n_e,{edge:"end","aria-label":"comments",onClick:()=>{l(v=>!v)},children:Z.jsx($I,{})}):void 0,children:[Z.jsx(Pf,{children:Z.jsx(If,{checked:a,onClick:()=>{c(v=>!v)}})}),Z.jsx(Mc,{primary:t.layers[n].id,variant:"layerlist"})]},n),e&&o&&Z.jsx(vx,{paintProps:p,setPaintProps:g,layerType:t.layers[n].type})]})}_x.defaultProps={configurable:!0};try{bx.displayName="ListItemStyled",bx.__docgenInfo={description:"",displayName:"ListItemStyled",props:{}}}catch{}try{Pf.displayName="CheckboxListItemIcon",Pf.__docgenInfo={description:"",displayName:"CheckboxListItemIcon",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<unknown> | undefined"}}}}}catch{}try{If.displayName="CheckboxStyled",If.__docgenInfo={description:"",displayName:"CheckboxStyled",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | undefined"}},slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<CheckboxSlots> | undefined"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<SwitchBaseProps, keyof IntrinsicElements>, CheckboxRootSlotPropsOverrides, CheckboxOwnerState> | undefined; input?: SlotProps<...> | undefined; } | undefined"}}}}}catch{}try{_x.displayName="LayerListItemVectorLayer",_x.__docgenInfo={description:"",displayName:"LayerListItemVectorLayer",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},configurable:{defaultValue:{value:"true"},description:"",name:"configurable",required:!1,type:{name:"boolean | undefined"}},vtProps:{defaultValue:null,description:"",name:"vtProps",required:!0,type:{name:"MlVectorTileLayerProps"}},setVtProps:{defaultValue:null,description:"",name:"setVtProps",required:!0,type:{name:"((state: unknown) => void) | undefined"}},visibleMaster:{defaultValue:null,description:"",name:"visibleMaster",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function my(e){return Z.jsx(Z.Fragment,{children:Z.jsxs(zP,{open:e.open,onClose:e.onCancel,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Z.jsx(im,{id:"alert-dialog-title",children:e.title}),Z.jsx(jP,{children:Z.jsx(Mte,{id:"alert-dialog-description",children:e.text})}),Z.jsxs(s1,{children:[Z.jsx(ji,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(ji,{onClick:e.onConfirm,autoFocus:!0,children:"Confirm"})]})]})})}my.defaultProps={title:"Confirm",text:"Are you sure?"};try{my.displayName="ConfirmDialog",my.__docgenInfo={description:"",displayName:"ConfirmDialog",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},title:{defaultValue:{value:"Confirm"},description:"",name:"title",required:!1,type:{name:"string"}},text:{defaultValue:{value:"Are you sure?"},description:"",name:"text",required:!1,type:{name:"string"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}function i_e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Q.useMemo(()=>n=>{t.forEach(i=>i(n))},t)}const tw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ry(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Lk(e){return"nodeType"in e}function Wu(e){var t,r;return e?Ry(e)?e:Lk(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Rk(e){const{Document:t}=Wu(e);return e instanceof t}function S1(e){return Ry(e)?!1:e instanceof Wu(e).HTMLElement}function kV(e){return e instanceof Wu(e).SVGElement}function Dy(e){return e?Ry(e)?e.document:Lk(e)?Rk(e)?e:S1(e)||kV(e)?e.ownerDocument:document:document:document}const tf=tw?Q.useLayoutEffect:Q.useEffect;function Dk(e){const t=Q.useRef(e);return tf(()=>{t.current=e}),Q.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}function a_e(){const e=Q.useRef(null),t=Q.useCallback((n,i)=>{e.current=setInterval(n,i)},[]),r=Q.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function z0(e,t){t===void 0&&(t=[e]);const r=Q.useRef(e);return tf(()=>{r.current!==e&&(r.current=e)},t),r}function C1(e,t){const r=Q.useRef();return Q.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function xx(e){const t=Dk(e),r=Q.useRef(null),n=Q.useCallback(i=>{i!==r.current&&t?.(i,r.current),r.current=i},[]);return[r,n]}function d3(e){const t=Q.useRef();return Q.useEffect(()=>{t.current=e},[e]),t.current}let l4={};function E1(e,t){return Q.useMemo(()=>{if(t)return t;const r=l4[e]==null?0:l4[e]+1;return l4[e]=r,e+"-"+r},[e,t])}function AV(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((o,l)=>{const a=Object.entries(l);for(const[c,p]of a){const g=o[c];g!=null&&(o[c]=g+e*p)}return o},{...t})}}const Wg=AV(1),wx=AV(-1);function o_e(e){return"clientX"in e&&"clientY"in e}function Nk(e){if(!e)return!1;const{KeyboardEvent:t}=Wu(e.target);return t&&e instanceof t}function s_e(e){if(!e)return!1;const{TouchEvent:t}=Wu(e.target);return t&&e instanceof t}function f3(e){if(s_e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return o_e(e)?{x:e.clientX,y:e.clientY}:null}const j0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[j0.Translate.toString(e),j0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),nB="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function l_e(e){return e.matches(nB)?e:e.querySelector(nB)}const u_e={display:"none"};function c_e(e){let{id:t,value:r}=e;return ft.createElement("div",{id:t,style:u_e},r)}function d_e(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ft.createElement("div",{id:t,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function f_e(){const[e,t]=Q.useState("");return{announce:Q.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const MV=Q.createContext(null);function h_e(e){const t=Q.useContext(MV);Q.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function p_e(){const[e]=Q.useState(()=>new Set),t=Q.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[Q.useCallback(n=>{let{type:i,event:o}=n;e.forEach(l=>{var a;return(a=l[i])==null?void 0:a.call(l,o)})},[e]),t]}const m_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},g_e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function y_e(e){let{announcements:t=g_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=m_e}=e;const{announce:o,announcement:l}=f_e(),a=E1("DndLiveRegion"),[c,p]=Q.useState(!1);if(Q.useEffect(()=>{p(!0)},[]),h_e(Q.useMemo(()=>({onDragStart(v){let{active:x}=v;o(t.onDragStart({active:x}))},onDragMove(v){let{active:x,over:b}=v;t.onDragMove&&o(t.onDragMove({active:x,over:b}))},onDragOver(v){let{active:x,over:b}=v;o(t.onDragOver({active:x,over:b}))},onDragEnd(v){let{active:x,over:b}=v;o(t.onDragEnd({active:x,over:b}))},onDragCancel(v){let{active:x,over:b}=v;o(t.onDragCancel({active:x,over:b}))}}),[o,t])),!c)return null;const g=ft.createElement(ft.Fragment,null,ft.createElement(c_e,{id:n,value:i.draggable}),ft.createElement(d_e,{id:a,announcement:l}));return r?kf.createPortal(g,r):g}var il;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(il||(il={}));function Sx(){}function iB(e,t){return Q.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function v_e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Q.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const pd=Object.freeze({x:0,y:0});function b_e(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function __e(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function x_e(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function w_e(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function aB(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const S_e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=aB(t,t.left,t.top),o=[];for(const l of n){const{id:a}=l,c=r.get(a);if(c){const p=b_e(aB(c),i);o.push({id:a,data:{droppableContainer:l,value:p}})}}return o.sort(__e)};function C_e(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-n,a=o-r;if(n<i&&r<o){const c=t.width*t.height,p=e.width*e.height,g=l*a,v=g/(c+p-g);return Number(v.toFixed(4))}return 0}const E_e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=[];for(const o of n){const{id:l}=o,a=r.get(l);if(a){const c=C_e(a,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(x_e)};function T_e(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function LV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:pd}function P_e(e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.reduce((l,a)=>({...l,top:l.top+e*a.y,bottom:l.bottom+e*a.y,left:l.left+e*a.x,right:l.right+e*a.x}),{...r})}}const I_e=P_e(1);function k_e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function A_e(e,t,r){const n=k_e(t);if(!n)return e;const{scaleX:i,scaleY:o,x:l,y:a}=n,c=e.left-l-(1-i)*parseFloat(r),p=e.top-a-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),g=i?e.width/i:e.width,v=o?e.height/o:e.height;return{width:g,height:v,top:p,right:c+g,bottom:p+v,left:c}}const M_e={ignoreTransform:!1};function Ny(e,t){t===void 0&&(t=M_e);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:g}=Wu(e).getComputedStyle(e);p&&(r=A_e(r,p,g))}const{top:n,left:i,width:o,height:l,bottom:a,right:c}=r;return{top:n,left:i,width:o,height:l,bottom:a,right:c}}function oB(e){return Ny(e,{ignoreTransform:!0})}function L_e(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function R_e(e,t){return t===void 0&&(t=Wu(e).getComputedStyle(e)),t.position==="fixed"}function D_e(e,t){t===void 0&&(t=Wu(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?r.test(o):!1})}function Ok(e,t){const r=[];function n(i){if(t!=null&&r.length>=t||!i)return r;if(Rk(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!S1(i)||kV(i)||r.includes(i))return r;const o=Wu(e).getComputedStyle(i);return i!==e&&D_e(i,o)&&r.push(i),R_e(i,o)?r:n(i.parentNode)}return e?n(e):r}function RV(e){const[t]=Ok(e,1);return t??null}function u4(e){return!tw||!e?null:Ry(e)?e:Lk(e)?Rk(e)||e===Dy(e).scrollingElement?window:S1(e)?e:null:null}function DV(e){return Ry(e)?e.scrollX:e.scrollLeft}function NV(e){return Ry(e)?e.scrollY:e.scrollTop}function h3(e){return{x:DV(e),y:NV(e)}}var xl;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(xl||(xl={}));function OV(e){return!tw||!e?!1:e===document.scrollingElement}function FV(e){const t={x:0,y:0},r=OV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=n.y,a=e.scrollLeft>=n.x;return{isTop:i,isLeft:o,isBottom:l,isRight:a,maxScroll:n,minScroll:t}}const N_e={x:.2,y:.2};function O_e(e,t,r,n,i){let{top:o,left:l,right:a,bottom:c}=r;n===void 0&&(n=10),i===void 0&&(i=N_e);const{isTop:p,isBottom:g,isLeft:v,isRight:x}=FV(e),b={x:0,y:0},P={x:0,y:0},I={height:t.height*i.y,width:t.width*i.x};return!p&&o<=t.top+I.height?(b.y=xl.Backward,P.y=n*Math.abs((t.top+I.height-o)/I.height)):!g&&c>=t.bottom-I.height&&(b.y=xl.Forward,P.y=n*Math.abs((t.bottom-I.height-c)/I.height)),!x&&a>=t.right-I.width?(b.x=xl.Forward,P.x=n*Math.abs((t.right-I.width-a)/I.width)):!v&&l<=t.left+I.width&&(b.x=xl.Backward,P.x=n*Math.abs((t.left+I.width-l)/I.width)),{direction:b,speed:P}}function F_e(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:r,right:n,bottom:i}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:i,width:e.clientWidth,height:e.clientHeight}}function BV(e){return e.reduce((t,r)=>Wg(t,h3(r)),pd)}function B_e(e){return e.reduce((t,r)=>t+DV(r),0)}function z_e(e){return e.reduce((t,r)=>t+NV(r),0)}function j_e(e,t){if(t===void 0&&(t=Ny),!e)return;const{top:r,left:n,bottom:i,right:o}=t(e);RV(e)&&(i<=0||o<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const q_e=[["x",["left","right"],B_e],["y",["top","bottom"],z_e]];class Fk{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Ok(r),i=BV(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,a]of q_e)for(const c of l)Object.defineProperty(this,c,{get:()=>{const p=a(n),g=i[o]-p;return this.rect[c]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class f0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var i;(i=this.target)==null||i.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function $_e(e){const{EventTarget:t}=Wu(e);return e instanceof t?e:Dy(e)}function c4(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var kc;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(kc||(kc={}));function sB(e){e.preventDefault()}function V_e(e){e.stopPropagation()}var Aa;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Aa||(Aa={}));const zV={start:[Aa.Space,Aa.Enter],cancel:[Aa.Esc],end:[Aa.Space,Aa.Enter,Aa.Tab]},U_e=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Aa.Right:return{...r,x:r.x+25};case Aa.Left:return{...r,x:r.x-25};case Aa.Down:return{...r,y:r.y+25};case Aa.Up:return{...r,y:r.y-25}}};class jV{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new f0(Dy(r)),this.windowListeners=new f0(Wu(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(kc.Resize,this.handleCancel),this.windowListeners.add(kc.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(kc.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&j_e(n),r(pd)}handleKeyDown(t){if(Nk(t)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:o=zV,coordinateGetter:l=U_e,scrollBehavior:a="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:p}=n.current,g=p?{x:p.left,y:p.top}:pd;this.referenceCoordinates||(this.referenceCoordinates=g);const v=l(t,{active:r,context:n.current,currentCoordinates:g});if(v){const x=wx(v,g),b={x:0,y:0},{scrollableAncestors:P}=n.current;for(const I of P){const k=t.code,{isTop:M,isRight:O,isLeft:F,isBottom:N,maxScroll:$,minScroll:j}=FV(I),U=F_e(I),H={x:Math.min(k===Aa.Right?U.right-U.width/2:U.right,Math.max(k===Aa.Right?U.left:U.left+U.width/2,v.x)),y:Math.min(k===Aa.Down?U.bottom-U.height/2:U.bottom,Math.max(k===Aa.Down?U.top:U.top+U.height/2,v.y))},Y=k===Aa.Right&&!O||k===Aa.Left&&!F,ae=k===Aa.Down&&!N||k===Aa.Up&&!M;if(Y&&H.x!==v.x){const ee=I.scrollLeft+x.x,G=k===Aa.Right&&ee<=$.x||k===Aa.Left&&ee>=j.x;if(G&&!x.y){I.scrollTo({left:ee,behavior:a});return}G?b.x=I.scrollLeft-ee:b.x=k===Aa.Right?I.scrollLeft-$.x:I.scrollLeft-j.x,b.x&&I.scrollBy({left:-b.x,behavior:a});break}else if(ae&&H.y!==v.y){const ee=I.scrollTop+x.y,G=k===Aa.Down&&ee<=$.y||k===Aa.Up&&ee>=j.y;if(G&&!x.x){I.scrollTo({top:ee,behavior:a});return}G?b.y=I.scrollTop-ee:b.y=k===Aa.Down?I.scrollTop-$.y:I.scrollTop-j.y,b.y&&I.scrollBy({top:-b.y,behavior:a});break}}this.handleMove(t,Wg(wx(v,this.referenceCoordinates),b))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}jV.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=zV,onActivation:i}=t,{active:o}=r;const{code:l}=e.nativeEvent;if(n.start.includes(l)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function lB(e){return!!(e&&"distance"in e)}function uB(e){return!!(e&&"delay"in e)}class Bk{constructor(t,r,n){var i;n===void 0&&(n=$_e(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:l}=o;this.props=t,this.events=r,this.document=Dy(l),this.documentListeners=new f0(this.document),this.listeners=new f0(n),this.windowListeners=new f0(Wu(l)),this.initialCoordinates=(i=f3(o))!=null?i:pd,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(kc.Resize,this.handleCancel),this.windowListeners.add(kc.DragStart,sB),this.windowListeners.add(kc.VisibilityChange,this.handleCancel),this.windowListeners.add(kc.ContextMenu,sB),this.documentListeners.add(kc.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(uB(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(lB(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:i}=this.props;i(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(kc.Click,V_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(kc.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:a}}=o;if(!i)return;const c=(r=f3(t))!=null?r:pd,p=wx(i,c);if(!n&&a){if(lB(a)){if(a.tolerance!=null&&c4(p,a.tolerance))return this.handleCancel();if(c4(p,a.distance))return this.handleStart()}if(uB(a)&&c4(p,a.tolerance))return this.handleCancel();this.handlePending(a,p);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Aa.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const G_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class zk extends Bk{constructor(t){const{event:r}=t,n=Dy(r.target);super(t,G_e,n)}}zk.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];const H_e={move:{name:"mousemove"},end:{name:"mouseup"}};var p3;(function(e){e[e.RightClick=2]="RightClick"})(p3||(p3={}));class qV extends Bk{constructor(t){super(t,H_e,Dy(t.event.target))}}qV.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===p3.RightClick?!1:(n?.({event:r}),!0)}}];const d4={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class W_e extends Bk{constructor(t){super(t,d4)}static setup(){return window.addEventListener(d4.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(d4.move.name,t)};function t(){}}}W_e.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:i}=r;return i.length>1?!1:(n?.({event:r}),!0)}}];var h0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(h0||(h0={}));var Cx;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Cx||(Cx={}));function X_e(e){let{acceleration:t,activator:r=h0.Pointer,canScroll:n,draggingRect:i,enabled:o,interval:l=5,order:a=Cx.TreeOrder,pointerCoordinates:c,scrollableAncestors:p,scrollableAncestorRects:g,delta:v,threshold:x}=e;const b=Z_e({delta:v,disabled:!o}),[P,I]=a_e(),k=Q.useRef({x:0,y:0}),M=Q.useRef({x:0,y:0}),O=Q.useMemo(()=>{switch(r){case h0.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case h0.DraggableRect:return i}},[r,i,c]),F=Q.useRef(null),N=Q.useCallback(()=>{const j=F.current;if(!j)return;const U=k.current.x*M.current.x,H=k.current.y*M.current.y;j.scrollBy(U,H)},[]),$=Q.useMemo(()=>a===Cx.TreeOrder?[...p].reverse():p,[a,p]);Q.useEffect(()=>{if(!o||!p.length||!O){I();return}for(const j of $){if(n?.(j)===!1)continue;const U=p.indexOf(j),H=g[U];if(!H)continue;const{direction:Y,speed:ae}=O_e(j,H,O,t,x);for(const ee of["x","y"])b[ee][Y[ee]]||(ae[ee]=0,Y[ee]=0);if(ae.x>0||ae.y>0){I(),F.current=j,P(N,l),k.current=ae,M.current=Y;return}}k.current={x:0,y:0},M.current={x:0,y:0},I()},[t,N,n,I,o,l,JSON.stringify(O),JSON.stringify(b),P,p,$,g,JSON.stringify(x)])}const Y_e={x:{[xl.Backward]:!1,[xl.Forward]:!1},y:{[xl.Backward]:!1,[xl.Forward]:!1}};function Z_e(e){let{delta:t,disabled:r}=e;const n=d3(t);return C1(i=>{if(r||!n||!i)return Y_e;const o={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[xl.Backward]:i.x[xl.Backward]||o.x===-1,[xl.Forward]:i.x[xl.Forward]||o.x===1},y:{[xl.Backward]:i.y[xl.Backward]||o.y===-1,[xl.Forward]:i.y[xl.Forward]||o.y===1}}},[r,t,n])}function K_e(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return C1(i=>{var o;return t==null?null:(o=n??i)!=null?o:null},[n,t])}function J_e(e,t){return Q.useMemo(()=>e.reduce((r,n)=>{const{sensor:i}=n,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,n)}));return[...r,...o]},[]),[e,t])}var q0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(q0||(q0={}));var m3;(function(e){e.Optimized="optimized"})(m3||(m3={}));const cB=new Map;function Q_e(e,t){let{dragging:r,dependencies:n,config:i}=t;const[o,l]=Q.useState(null),{frequency:a,measure:c,strategy:p}=i,g=Q.useRef(e),v=k(),x=z0(v),b=Q.useCallback(function(M){M===void 0&&(M=[]),!x.current&&l(O=>O===null?M:O.concat(M.filter(F=>!O.includes(F))))},[x]),P=Q.useRef(null),I=C1(M=>{if(v&&!r)return cB;if(!M||M===cB||g.current!==e||o!=null){const O=new Map;for(let F of e){if(!F)continue;if(o&&o.length>0&&!o.includes(F.id)&&F.rect.current){O.set(F.id,F.rect.current);continue}const N=F.node.current,$=N?new Fk(c(N),N):null;F.rect.current=$,$&&O.set(F.id,$)}return O}return M},[e,o,r,v,c]);return Q.useEffect(()=>{g.current=e},[e]),Q.useEffect(()=>{v||b()},[r,v]),Q.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),Q.useEffect(()=>{v||typeof a!="number"||P.current!==null||(P.current=setTimeout(()=>{b(),P.current=null},a))},[a,v,b,...n]),{droppableRects:I,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(p){case q0.Always:return!1;case q0.BeforeDragging:return r;default:return!r}}}function $V(e,t){return C1(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function exe(e,t){return $V(e,t)}function txe(e){let{callback:t,disabled:r}=e;const n=Dk(t),i=Q.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(n)},[n,r]);return Q.useEffect(()=>()=>i?.disconnect(),[i]),i}function rw(e){let{callback:t,disabled:r}=e;const n=Dk(t),i=Q.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(n)},[r]);return Q.useEffect(()=>()=>i?.disconnect(),[i]),i}function rxe(e){return new Fk(Ny(e),e)}function dB(e,t,r){t===void 0&&(t=rxe);const[n,i]=Q.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=c??r)!=null?p:null}const g=t(e);return JSON.stringify(c)===JSON.stringify(g)?c:g})}const l=txe({callback(c){if(e)for(const p of c){const{type:g,target:v}=p;if(g==="childList"&&v instanceof HTMLElement&&v.contains(e)){o();break}}}}),a=rw({callback:o});return tf(()=>{o(),e?(a?.observe(e),l?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),l?.disconnect())},[e]),n}function nxe(e){const t=$V(e);return LV(e,t)}const fB=[];function ixe(e){const t=Q.useRef(e),r=C1(n=>e?n&&n!==fB&&e&&t.current&&e.parentNode===t.current.parentNode?n:Ok(e):fB,[e]);return Q.useEffect(()=>{t.current=e},[e]),r}function axe(e){const[t,r]=Q.useState(null),n=Q.useRef(e),i=Q.useCallback(o=>{const l=u4(o.target);l&&r(a=>a?(a.set(l,h3(l)),new Map(a)):null)},[]);return Q.useEffect(()=>{const o=n.current;if(e!==o){l(o);const a=e.map(c=>{const p=u4(c);return p?(p.addEventListener("scroll",i,{passive:!0}),[p,h3(p)]):null}).filter(c=>c!=null);r(a.length?new Map(a):null),n.current=e}return()=>{l(e),l(o)};function l(a){a.forEach(c=>{const p=u4(c);p?.removeEventListener("scroll",i)})}},[i,e]),Q.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>Wg(o,l),pd):BV(e):pd,[e,t])}function hB(e,t){t===void 0&&(t=[]);const r=Q.useRef(null);return Q.useEffect(()=>{r.current=null},t),Q.useEffect(()=>{const n=e!==pd;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?wx(e,r.current):pd}function oxe(e){Q.useEffect(()=>{if(!tw)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function sxe(e,t){return Q.useMemo(()=>e.reduce((r,n)=>{let{eventName:i,handler:o}=n;return r[i]=l=>{o(l,t)},r},{}),[e,t])}function VV(e){return Q.useMemo(()=>e?L_e(e):null,[e])}const pB=[];function lxe(e,t){t===void 0&&(t=Ny);const[r]=e,n=VV(r?Wu(r):null),[i,o]=Q.useState(pB);function l(){o(()=>e.length?e.map(c=>OV(c)?n:new Fk(t(c),c)):pB)}const a=rw({callback:l});return tf(()=>{a?.disconnect(),l(),e.forEach(c=>a?.observe(c))},[e]),i}function uxe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return S1(t)?t:e}function cxe(e){let{measure:t}=e;const[r,n]=Q.useState(null),i=Q.useCallback(p=>{for(const{target:g}of p)if(S1(g)){n(v=>{const x=t(g);return v?{...v,width:x.width,height:x.height}:x});break}},[t]),o=rw({callback:i}),l=Q.useCallback(p=>{const g=uxe(p);o?.disconnect(),g&&o?.observe(g),n(g?t(g):null)},[t,o]),[a,c]=xx(l);return Q.useMemo(()=>({nodeRef:a,rect:r,setRef:c}),[r,a,c])}const dxe=[{sensor:zk,options:{}},{sensor:jV,options:{}}],fxe={current:{}},w_={draggable:{measure:oB},droppable:{measure:oB,strategy:q0.WhileDragging,frequency:m3.Optimized},dragOverlay:{measure:Ny}};class p0 extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const hxe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new p0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Sx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:w_,measureDroppableContainers:Sx,windowRect:null,measuringScheduled:!1},pxe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Sx,draggableNodes:new Map,over:null,measureDroppableContainers:Sx},nw=Q.createContext(pxe),UV=Q.createContext(hxe);function mxe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new p0}}}function gxe(e,t){switch(t.type){case il.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case il.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case il.DragEnd:case il.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case il.RegisterDroppable:{const{element:r}=t,{id:n}=r,i=new p0(e.droppable.containers);return i.set(n,r),{...e,droppable:{...e.droppable,containers:i}}}case il.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;const l=new p0(e.droppable.containers);return l.set(r,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case il.UnregisterDroppable:{const{id:r,key:n}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new p0(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function yxe(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:i}=Q.useContext(nw),o=d3(n),l=d3(r?.id);return Q.useEffect(()=>{if(!t&&!n&&o&&l!=null){if(!Nk(o)||document.activeElement===o.target)return;const a=i.get(l);if(!a)return;const{activatorNode:c,node:p}=a;if(!c.current&&!p.current)return;requestAnimationFrame(()=>{for(const g of[c.current,p.current]){if(!g)continue;const v=l_e(g);if(v){v.focus();break}}})}},[n,t,i,l,o]),null}function vxe(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...n}),r):r}function bxe(e){return Q.useMemo(()=>({draggable:{...w_.draggable,...e?.draggable},droppable:{...w_.droppable,...e?.droppable},dragOverlay:{...w_.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function _xe(e){let{activeNode:t,measure:r,initialRect:n,config:i=!0}=e;const o=Q.useRef(!1),{x:l,y:a}=typeof i=="boolean"?{x:i,y:i}:i;tf(()=>{if(!l&&!a||!t){o.current=!1;return}if(o.current||!n)return;const p=t?.node.current;if(!p||p.isConnected===!1)return;const g=r(p),v=LV(g,n);if(l||(v.x=0),a||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=RV(p);x&&x.scrollBy({top:v.y,left:v.x})}},[t,l,a,n,r])}const GV=Q.createContext({...pd,scaleX:1,scaleY:1});var xh;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(xh||(xh={}));const xxe=Q.memo(function(t){var r,n,i,o;let{id:l,accessibility:a,autoScroll:c=!0,children:p,sensors:g=dxe,collisionDetection:v=E_e,measuring:x,modifiers:b,...P}=t;const I=Q.useReducer(gxe,void 0,mxe),[k,M]=I,[O,F]=p_e(),[N,$]=Q.useState(xh.Uninitialized),j=N===xh.Initialized,{draggable:{active:U,nodes:H,translate:Y},droppable:{containers:ae}}=k,ee=U!=null?H.get(U):null,G=Q.useRef({initial:null,translated:null}),ie=Q.useMemo(()=>{var bt;return U!=null?{id:U,data:(bt=ee?.data)!=null?bt:fxe,rect:G}:null},[U,ee]),oe=Q.useRef(null),[ue,de]=Q.useState(null),[Me,ge]=Q.useState(null),xe=z0(P,Object.values(P)),Ee=E1("DndDescribedBy",l),Ae=Q.useMemo(()=>ae.getEnabled(),[ae]),fe=bxe(x),{droppableRects:Se,measureDroppableContainers:we,measuringScheduled:De}=Q_e(Ae,{dragging:j,dependencies:[Y.x,Y.y],config:fe.droppable}),Re=K_e(H,U),$e=Q.useMemo(()=>Me?f3(Me):null,[Me]),Oe=Er(),it=exe(Re,fe.draggable.measure);_xe({activeNode:U!=null?H.get(U):null,config:Oe.layoutShiftCompensation,initialRect:it,measure:fe.draggable.measure});const Ye=dB(Re,fe.draggable.measure,it),rt=dB(Re?Re.parentElement:null),Ie=Q.useRef({activatorEvent:null,active:null,activeNode:Re,collisionRect:null,collisions:null,droppableRects:Se,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:ae,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),It=ae.getNodeFor((r=Ie.current.over)==null?void 0:r.id),at=cxe({measure:fe.dragOverlay.measure}),je=(n=at.nodeRef.current)!=null?n:Re,Ht=j?(i=at.rect)!=null?i:Ye:null,Wt=!!(at.nodeRef.current&&at.rect),zt=nxe(Wt?null:Ye),st=VV(je?Wu(je):null),sr=ixe(j?It??Re:null),ur=lxe(sr),ar=vxe(b,{transform:{x:Y.x-zt.x,y:Y.y-zt.y,scaleX:1,scaleY:1},activatorEvent:Me,active:ie,activeNodeRect:Ye,containerNodeRect:rt,draggingNodeRect:Ht,over:Ie.current.over,overlayNodeRect:at.rect,scrollableAncestors:sr,scrollableAncestorRects:ur,windowRect:st}),yr=$e?Wg($e,Y):null,pr=axe(sr),Jt=hB(pr),ir=hB(pr,[Ye]),xr=Wg(ar,Jt),rr=Ht?I_e(Ht,ar):null,nt=ie&&rr?v({active:ie,collisionRect:rr,droppableRects:Se,droppableContainers:Ae,pointerCoordinates:yr}):null,be=w_e(nt,"id"),[_e,Ue]=Q.useState(null),Qe=Wt?ar:Wg(ar,ir),ot=T_e(Qe,(o=_e?.rect)!=null?o:null,Ye),et=Q.useRef(null),Lt=Q.useCallback((bt,vr)=>{let{sensor:Dr,options:jr}=vr;if(oe.current==null)return;const Ur=H.get(oe.current);if(!Ur)return;const nr=bt.nativeEvent,Hn=new Dr({active:oe.current,activeNode:Ur,event:nr,options:jr,context:Ie,onAbort(Wn){if(!H.get(Wn))return;const{onDragAbort:Be}=xe.current,gt={id:Wn};Be?.(gt),O({type:"onDragAbort",event:gt})},onPending(Wn,Pe,Be,gt){if(!H.get(Wn))return;const{onDragPending:wr}=xe.current,Ar={id:Wn,constraint:Pe,initialCoordinates:Be,offset:gt};wr?.(Ar),O({type:"onDragPending",event:Ar})},onStart(Wn){const Pe=oe.current;if(Pe==null)return;const Be=H.get(Pe);if(!Be)return;const{onDragStart:gt}=xe.current,mt={activatorEvent:nr,active:{id:Pe,data:Be.data,rect:G}};kf.unstable_batchedUpdates(()=>{gt?.(mt),$(xh.Initializing),M({type:il.DragStart,initialCoordinates:Wn,active:Pe}),O({type:"onDragStart",event:mt}),de(et.current),ge(nr)})},onMove(Wn){M({type:il.DragMove,coordinates:Wn})},onEnd:en(il.DragEnd),onCancel:en(il.DragCancel)});et.current=Hn;function en(Wn){return async function(){const{active:Be,collisions:gt,over:mt,scrollAdjustedTranslate:wr}=Ie.current;let Ar=null;if(Be&&wr){const{cancelDrop:Dn}=xe.current;Ar={activatorEvent:nr,active:Be,collisions:gt,delta:wr,over:mt},Wn===il.DragEnd&&typeof Dn=="function"&&await Promise.resolve(Dn(Ar))&&(Wn=il.DragCancel)}oe.current=null,kf.unstable_batchedUpdates(()=>{M({type:Wn}),$(xh.Uninitialized),Ue(null),de(null),ge(null),et.current=null;const Dn=Wn===il.DragEnd?"onDragEnd":"onDragCancel";if(Ar){const wi=xe.current[Dn];wi?.(Ar),O({type:Dn,event:Ar})}})}}},[H]),vt=Q.useCallback((bt,vr)=>(Dr,jr)=>{const Ur=Dr.nativeEvent,nr=H.get(jr);if(oe.current!==null||!nr||Ur.dndKit||Ur.defaultPrevented)return;const Hn={active:nr};bt(Dr,vr.options,Hn)===!0&&(Ur.dndKit={capturedBy:vr.sensor},oe.current=jr,Lt(Dr,vr))},[H,Lt]),Bt=J_e(g,vt);oxe(g),tf(()=>{Ye&&N===xh.Initializing&&$(xh.Initialized)},[Ye,N]),Q.useEffect(()=>{const{onDragMove:bt}=xe.current,{active:vr,activatorEvent:Dr,collisions:jr,over:Ur}=Ie.current;if(!vr||!Dr)return;const nr={active:vr,activatorEvent:Dr,collisions:jr,delta:{x:xr.x,y:xr.y},over:Ur};kf.unstable_batchedUpdates(()=>{bt?.(nr),O({type:"onDragMove",event:nr})})},[xr.x,xr.y]),Q.useEffect(()=>{const{active:bt,activatorEvent:vr,collisions:Dr,droppableContainers:jr,scrollAdjustedTranslate:Ur}=Ie.current;if(!bt||oe.current==null||!vr||!Ur)return;const{onDragOver:nr}=xe.current,Hn=jr.get(be),en=Hn&&Hn.rect.current?{id:Hn.id,rect:Hn.rect.current,data:Hn.data,disabled:Hn.disabled}:null,Wn={active:bt,activatorEvent:vr,collisions:Dr,delta:{x:Ur.x,y:Ur.y},over:en};kf.unstable_batchedUpdates(()=>{Ue(en),nr?.(Wn),O({type:"onDragOver",event:Wn})})},[be]),tf(()=>{Ie.current={activatorEvent:Me,active:ie,activeNode:Re,collisionRect:rr,collisions:nt,droppableRects:Se,draggableNodes:H,draggingNode:je,draggingNodeRect:Ht,droppableContainers:ae,over:_e,scrollableAncestors:sr,scrollAdjustedTranslate:xr},G.current={initial:Ht,translated:rr}},[ie,Re,nt,rr,H,je,Ht,Se,ae,_e,sr,xr]),X_e({...Oe,delta:Y,draggingRect:rr,pointerCoordinates:yr,scrollableAncestors:sr,scrollableAncestorRects:ur});const Kt=Q.useMemo(()=>({active:ie,activeNode:Re,activeNodeRect:Ye,activatorEvent:Me,collisions:nt,containerNodeRect:rt,dragOverlay:at,draggableNodes:H,droppableContainers:ae,droppableRects:Se,over:_e,measureDroppableContainers:we,scrollableAncestors:sr,scrollableAncestorRects:ur,measuringConfiguration:fe,measuringScheduled:De,windowRect:st}),[ie,Re,Ye,Me,nt,rt,at,H,ae,Se,_e,we,sr,ur,fe,De,st]),Zt=Q.useMemo(()=>({activatorEvent:Me,activators:Bt,active:ie,activeNodeRect:Ye,ariaDescribedById:{draggable:Ee},dispatch:M,draggableNodes:H,over:_e,measureDroppableContainers:we}),[Me,Bt,ie,Ye,M,Ee,H,_e,we]);return ft.createElement(MV.Provider,{value:F},ft.createElement(nw.Provider,{value:Zt},ft.createElement(UV.Provider,{value:Kt},ft.createElement(GV.Provider,{value:ot},p)),ft.createElement(yxe,{disabled:a?.restoreFocus===!1})),ft.createElement(y_e,{...a,hiddenTextDescribedById:Ee}));function Er(){const bt=ue?.autoScrollEnabled===!1,vr=typeof c=="object"?c.enabled===!1:c===!1,Dr=j&&!bt&&!vr;return typeof c=="object"?{...c,enabled:Dr}:{enabled:Dr}}}),wxe=Q.createContext(null),mB="button",Sxe="Draggable";function Cxe(e){let{id:t,data:r,disabled:n=!1,attributes:i}=e;const o=E1(Sxe),{activators:l,activatorEvent:a,active:c,activeNodeRect:p,ariaDescribedById:g,draggableNodes:v,over:x}=Q.useContext(nw),{role:b=mB,roleDescription:P="draggable",tabIndex:I=0}=i??{},k=c?.id===t,M=Q.useContext(k?GV:wxe),[O,F]=xx(),[N,$]=xx(),j=sxe(l,t),U=z0(r);tf(()=>(v.set(t,{id:t,key:o,node:O,activatorNode:N,data:U}),()=>{const Y=v.get(t);Y&&Y.key===o&&v.delete(t)}),[v,t]);const H=Q.useMemo(()=>({role:b,tabIndex:I,"aria-disabled":n,"aria-pressed":k&&b===mB?!0:void 0,"aria-roledescription":P,"aria-describedby":g.draggable}),[n,b,I,k,P,g.draggable]);return{active:c,activatorEvent:a,activeNodeRect:p,attributes:H,isDragging:k,listeners:n?void 0:j,node:O,over:x,setNodeRef:F,setActivatorNodeRef:$,transform:M}}function Exe(){return Q.useContext(UV)}const Txe="Droppable",Pxe={timeout:25};function Ixe(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:i}=e;const o=E1(Txe),{active:l,dispatch:a,over:c,measureDroppableContainers:p}=Q.useContext(nw),g=Q.useRef({disabled:r}),v=Q.useRef(!1),x=Q.useRef(null),b=Q.useRef(null),{disabled:P,updateMeasurementsFor:I,timeout:k}={...Pxe,...i},M=z0(I??n),O=Q.useCallback(()=>{if(!v.current){v.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{p(Array.isArray(M.current)?M.current:[M.current]),b.current=null},k)},[k]),F=rw({callback:O,disabled:P||!l}),N=Q.useCallback((H,Y)=>{F&&(Y&&(F.unobserve(Y),v.current=!1),H&&F.observe(H))},[F]),[$,j]=xx(N),U=z0(t);return Q.useEffect(()=>{!F||!$.current||(F.disconnect(),v.current=!1,F.observe($.current))},[$,F]),Q.useEffect(()=>(a({type:il.RegisterDroppable,element:{id:n,key:o,disabled:r,node:$,rect:x,data:U}}),()=>a({type:il.UnregisterDroppable,key:o,id:n})),[n]),Q.useEffect(()=>{r!==g.current.disabled&&(a({type:il.SetDroppableDisabled,id:n,key:o,disabled:r}),g.current.disabled=r)},[n,o,r,a]),{active:l,rect:x,isOver:c?.id===n,node:$,over:c,setNodeRef:j}}function HV(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function kxe(e,t){return e.reduce((r,n,i)=>{const o=t.get(n);return o&&(r[i]=o),r},Array(e.length))}function Yb(e){return e!==null&&e>=0}function Axe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Mxe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const WV=e=>{let{rects:t,activeIndex:r,overIndex:n,index:i}=e;const o=HV(t,n,r),l=t[i],a=o[i];return!a||!l?null:{x:a.left-l.left,y:a.top-l.top,scaleX:a.width/l.width,scaleY:a.height/l.height}},Zb={scaleX:1,scaleY:1},Lxe=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:i,rects:o,overIndex:l}=e;const a=(t=o[r])!=null?t:n;if(!a)return null;if(i===r){const p=o[l];return p?{x:0,y:r<l?p.top+p.height-(a.top+a.height):p.top-a.top,...Zb}:null}const c=Rxe(o,i,r);return i>r&&i<=l?{x:0,y:-a.height-c,...Zb}:i<r&&i>=l?{x:0,y:a.height+c,...Zb}:{x:0,y:0,...Zb}};function Rxe(e,t,r){const n=e[t],i=e[t-1],o=e[t+1];return n?r<t?i?n.top-(i.top+i.height):o?o.top-(n.top+n.height):0:o?o.top-(n.top+n.height):i?n.top-(i.top+i.height):0:0}const XV="Sortable",YV=ft.createContext({activeIndex:-1,containerId:XV,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:WV,disabled:{draggable:!1,droppable:!1}});function Dxe(e){let{children:t,id:r,items:n,strategy:i=WV,disabled:o=!1}=e;const{active:l,dragOverlay:a,droppableRects:c,over:p,measureDroppableContainers:g}=Exe(),v=E1(XV,r),x=a.rect!==null,b=Q.useMemo(()=>n.map(j=>typeof j=="object"&&"id"in j?j.id:j),[n]),P=l!=null,I=l?b.indexOf(l.id):-1,k=p?b.indexOf(p.id):-1,M=Q.useRef(b),O=!Axe(b,M.current),F=k!==-1&&I===-1||O,N=Mxe(o);tf(()=>{O&&P&&g(b)},[O,b,P,g]),Q.useEffect(()=>{M.current=b},[b]);const $=Q.useMemo(()=>({activeIndex:I,containerId:v,disabled:N,disableTransforms:F,items:b,overIndex:k,useDragOverlay:x,sortedRects:kxe(b,c),strategy:i}),[I,v,N.draggable,N.droppable,F,b,k,c,x,i]);return ft.createElement(YV.Provider,{value:$},t)}const Nxe=e=>{let{id:t,items:r,activeIndex:n,overIndex:i}=e;return HV(r,n,i).indexOf(t)},Oxe=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:i,items:o,newIndex:l,previousItems:a,previousContainerId:c,transition:p}=e;return!p||!n||a!==o&&i===l?!1:r?!0:l!==i&&t===c},Fxe={duration:200,easing:"ease"},ZV="transform",Bxe=j0.Transition.toString({property:ZV,duration:0,easing:"linear"}),zxe={roleDescription:"sortable"};function jxe(e){let{disabled:t,index:r,node:n,rect:i}=e;const[o,l]=Q.useState(null),a=Q.useRef(r);return tf(()=>{if(!t&&r!==a.current&&n.current){const c=i.current;if(c){const p=Ny(n.current,{ignoreTransform:!0}),g={x:c.left-p.left,y:c.top-p.top,scaleX:c.width/p.width,scaleY:c.height/p.height};(g.x||g.y)&&l(g)}}r!==a.current&&(a.current=r)},[t,r,n,i]),Q.useEffect(()=>{o&&l(null)},[o]),o}function qxe(e){let{animateLayoutChanges:t=Oxe,attributes:r,disabled:n,data:i,getNewIndex:o=Nxe,id:l,strategy:a,resizeObserverConfig:c,transition:p=Fxe}=e;const{items:g,containerId:v,activeIndex:x,disabled:b,disableTransforms:P,sortedRects:I,overIndex:k,useDragOverlay:M,strategy:O}=Q.useContext(YV),F=$xe(n,b),N=g.indexOf(l),$=Q.useMemo(()=>({sortable:{containerId:v,index:N,items:g},...i}),[v,i,N,g]),j=Q.useMemo(()=>g.slice(g.indexOf(l)),[g,l]),{rect:U,node:H,isOver:Y,setNodeRef:ae}=Ixe({id:l,data:$,disabled:F.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...c}}),{active:ee,activatorEvent:G,activeNodeRect:ie,attributes:oe,setNodeRef:ue,listeners:de,isDragging:Me,over:ge,setActivatorNodeRef:xe,transform:Ee}=Cxe({id:l,data:$,attributes:{...zxe,...r},disabled:F.draggable}),Ae=i_e(ae,ue),fe=!!ee,Se=fe&&!P&&Yb(x)&&Yb(k),we=!M&&Me,De=we&&Se?Ee:null,$e=Se?De??(a??O)({rects:I,activeNodeRect:ie,activeIndex:x,overIndex:k,index:N}):null,Oe=Yb(x)&&Yb(k)?o({id:l,items:g,activeIndex:x,overIndex:k}):N,it=ee?.id,Ye=Q.useRef({activeId:it,items:g,newIndex:Oe,containerId:v}),rt=g!==Ye.current.items,Ie=t({active:ee,containerId:v,isDragging:Me,isSorting:fe,id:l,index:N,items:g,newIndex:Ye.current.newIndex,previousItems:Ye.current.items,previousContainerId:Ye.current.containerId,transition:p,wasDragging:Ye.current.activeId!=null}),It=jxe({disabled:!Ie,index:N,node:H,rect:U});return Q.useEffect(()=>{fe&&Ye.current.newIndex!==Oe&&(Ye.current.newIndex=Oe),v!==Ye.current.containerId&&(Ye.current.containerId=v),g!==Ye.current.items&&(Ye.current.items=g)},[fe,Oe,v,g]),Q.useEffect(()=>{if(it===Ye.current.activeId)return;if(it!=null&&Ye.current.activeId==null){Ye.current.activeId=it;return}const je=setTimeout(()=>{Ye.current.activeId=it},50);return()=>clearTimeout(je)},[it]),{active:ee,activeIndex:x,attributes:oe,data:$,rect:U,index:N,newIndex:Oe,items:g,isOver:Y,isSorting:fe,isDragging:Me,listeners:de,node:H,overIndex:k,over:ge,setNodeRef:Ae,setActivatorNodeRef:xe,setDroppableNodeRef:ae,setDraggableNodeRef:ue,transform:It??$e,transition:at()};function at(){if(It||rt&&Ye.current.newIndex===N)return Bxe;if(!(we&&!Nk(G)||!p)&&(fe||Ie))return j0.Transition.toString({...p,property:ZV})}}function $xe(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(n=e?.droppable)!=null?n:t.droppable}}Aa.Down,Aa.Right,Aa.Up,Aa.Left;function Ex({children:e,layerId:t}){const{attributes:r,listeners:n,setNodeRef:i,transform:o}=qxe({id:t}),l={transform:j0.Transform.toString(o)};return Z.jsx("li",{ref:i,style:l,...r,...n,children:e})}try{Ex.displayName="SortableContainer",Ex.__docgenInfo={description:"",displayName:"SortableContainer",props:{layerId:{defaultValue:null,description:"",name:"layerId",required:!0,type:{name:"string"}}}}}catch{}const Vxe=_r(hc)({padding:"4px",marginTop:"-3px"}),Uxe=_r(hc)({marginLeft:"20px"});function Rf({layerComponent:e,visible:t,type:r,name:n,description:i,configurable:o,setLayerState:l,...a}){const[c,p]=Q.useState(!0),[g,v]=Q.useState(!1),[x,b]=Q.useState(!1),P=Q.useRef(!1),I=Q.useRef(t),[k,M]=Q.useState(e?.props?.paint||e?.props?.options?.paint||O9(e?.props?.type||O_(e.props.geojson))),O=Q.useMemo(()=>t?c:!1,[t,c]);Q.useEffect(()=>{if(!l||!e?.props?.layers||O===I.current)return;I.current=O;const j={...e?.props};switch(e.type.name){case"MlWmsLayer":break;case"MlVectorTileLayer":e?.props?.layers&&!P.current&&(j.layers=e?.props?.layers.map(U=>(U.layout?U.layout.visibility=O?"visible":"none":U.layout={visibility:O?"visible":"none"},U)),console.log("setLayerState",j.layers),l(j));break}},[O,l,e]),Q.useEffect(()=>{!l||P.current||!k||e?.props?.layers||JSON.stringify(k)!==JSON.stringify(e.props?.paint)&&l({...e.props,paint:k})},[k,l,e.props?.paint]);const F=Q.useMemo(()=>{if(e&&r==="layer")switch(e.type.displayName){case"MlWmsLayer":return ft.cloneElement(e,{...e?.props,visible:O});case"MlVectorTileLayer":return ft.cloneElement(e,{...e?.props});default:case"MlGeoJsonLayer":return ft.cloneElement(e,{layout:{visibility:O?"visible":"none"},options:{...e?.props?.options,...l?{}:{paint:k}}})}return Z.jsx(Z.Fragment,{})},[r,e,k,O,e?.props?.layers,l]),N=Q.useMemo(()=>{if(e&&r==="layer"){if(e.props.type)return e.props.type;if(e.props.geojson)return O_(e.props.geojson)}},[e]),$=Z.jsxs(bx,{sx:{...a.listItemSx},secondaryAction:o&&Object.keys(k)?.length>0?Z.jsxs(Z.Fragment,{children:[a?.buttons,Z.jsx(Vxe,{edge:"end","aria-label":"settings",onClick:()=>{v(j=>!j)},children:Z.jsx($I,{})})]}):void 0,children:[Z.jsx(Pf,{children:Z.jsx(If,{disabled:!t,checked:c,onClick:()=>{p(j=>!j)}})}),Z.jsx(Mc,{variant:"layerlist",primary:n,secondary:i,primaryTypographyProps:{overflow:"hidden"}})]});return Z.jsxs(Z.Fragment,{children:[a.sortable&&a.layerId&&!e?.props?.layers&&Z.jsx(Ex,{layerId:a.layerId,children:$}),!a.sortable&&!e?.props?.layers&&$,F,!e?.props?.layers&&Object.keys(k).length>0&&o&&g&&Z.jsxs(Z.Fragment,{children:[a.showDeleteButton&&Z.jsxs(Z.Fragment,{children:[Z.jsx(Uxe,{edge:"end","aria-label":"delete",onClick:()=>{typeof l=="function"&&b(!0)},children:Z.jsx(v1,{})}),x&&Z.jsx(my,{open:x,onConfirm:()=>{typeof l=="function"&&(P.current=!0,l(!1),b(!1))},onCancel:()=>{b(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]}),Z.jsx(vx,{paintProps:k,setPaintProps:M,layerType:N})]}),e?.props?.layers&&Z.jsx(r3,{visible:c,setVisible:p,name:n,children:e?.props?.layers?.map?.((j,U)=>Z.jsx(_x,{vtProps:e?.props,setVtProps:l,id:""+U,visibleMaster:O},""+U))})]})}Rf.defaultProps={type:"layer",visible:!0,showDeleteButton:!1,buttons:Z.jsx(Z.Fragment,{})};try{Rf.displayName="LayerListItem",Rf.__docgenInfo={description:"",displayName:"LayerListItem",props:{layerComponent:{defaultValue:null,description:"",name:"layerComponent",required:!0,type:{name:"Element"}},visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!0,type:{name:"boolean"}},type:{defaultValue:{value:"layer"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},setLayerState:{defaultValue:null,description:"",name:"setLayerState",required:!1,type:{name:"Dispatch<any> | undefined"}},showDeleteButton:{defaultValue:{value:"false"},description:"",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},listItemSx:{defaultValue:null,description:"",name:"listItemSx",required:!1,type:{name:"SxProps | undefined"}},buttons:{defaultValue:{value:"<></>"},description:"",name:"buttons",required:!1,type:{name:"Element | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const KV=Ei(Z.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Gxe=_r("div")(()=>({display:"flex",alignItems:"center"})),Hxe=56,Wxe=_r(po)(({theme:e})=>({width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}));function g3({drawerPaperProps:e,drawerHeaderProps:t,setOpen:r,...n}){const i=l1(c=>c.breakpoints.down("sm")),[o,l]=Q.useState(!1),a=n.drawerBleeding?n.drawerBleeding:Hxe;return Z.jsxs(Z.Fragment,{children:[i?Z.jsxs(po,{sx:{display:{xs:"flex",sm:"none"}},children:[Z.jsx(n9,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:`calc(50% - ${a}px)`,overflow:"visible"}}}),Z.jsxs(Kie,{anchor:"bottom",open:typeof n.open>"u"?o:n.open,onClose:r?()=>{r?.(!1)}:()=>{l(!1)},onOpen:r?()=>{r?.(!0)}:()=>{l(!0)},swipeAreaWidth:a,disableSwipeToOpen:!1,hideBackdrop:!0,ModalProps:{keepMounted:!0,sx:{top:"calc(90%)"}},children:[Z.jsxs(Oc,{sx:{position:"absolute",top:-a,borderTopLeftRadius:8,borderTopRightRadius:8,visibility:"visible",right:0,left:0},children:[Z.jsx(Wxe,{}),Z.jsx(Ko,{variant:"h6",sx:{p:"13px"},children:n.name})]}),Z.jsx(Oc,{sx:{px:"15px",pb:"15px",height:"100%",overflow:"auto",paddingTop:"20px"},children:n.children})]})]}):Z.jsx(po,{sx:{display:{xs:"none",sm:"flex"},mr:1},children:Z.jsxs(qP,{transitionDuration:0,variant:"persistent",anchor:"left",open:typeof n.open>"u"?o:n.open,PaperProps:{...e,sx:{maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"},padding:{sm:"84px 20px 20px 20px",xs:"74px 10px 10px 10px"},width:{xs:"80%",sm:"60%",md:"350px",lg:"350px"},boxSizing:"border-box",...e?.sx}},sx:{flexGrow:1,zIndex:105,position:"absolute",bottom:0,display:"flex",flexDirection:"column",maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"},...o?{}:{left:i?"-90vw":"-20vw"}},...n,children:[Z.jsxs(Gxe,{...t,children:[Z.jsx(Ko,{variant:"h6",children:n.name}),Z.jsx(hc,{onClick:r?()=>{r?.(!1)}:()=>{l(!1)},sx:{position:"absolute",right:"20px"},children:Z.jsx(KV,{})})]}),Z.jsx(po,{children:n.children})]})}),";"]})}try{g3.displayName="Sidebar",g3.__docgenInfo={description:"",displayName:"Sidebar",props:{drawerPaperProps:{defaultValue:null,description:"",name:"drawerPaperProps",required:!1,type:{name:"PaperProps | undefined"}},drawerHeaderProps:{defaultValue:null,description:"",name:"drawerHeaderProps",required:!1,type:{name:"Headers | undefined"}},children:{defaultValue:null,description:"The content of the component.",name:"children",required:!1,type:{name:"ReactNode"}},open:{defaultValue:{value:"false"},description:"If `true`, the component is shown.",name:"open",required:!1,type:{name:"boolean | undefined"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!1,type:{name:"((val: boolean) => void) | undefined"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string | undefined"}},drawerBleeding:{defaultValue:null,description:"",name:"drawerBleeding",required:!1,type:{name:"number | undefined"}},component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | undefined"}},slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<DrawerSlots> | undefined"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<ModalProps, keyof IntrinsicElements>, DrawerRootSlotPropsOverrides, DrawerOwnerState> | undefined; backdrop?: SlotProps<...> | undefined; docked?: SlotProps<...> | undefined; paper?: SlotProps<...> | undefined; transition?: SlotProps<...> | undefined; } | undefined"}}}}}catch{}const gB=e=>{const[t,r]=Q.useState(!0),[n,i]=Q.useState(e.measureType),[o,l]=Q.useState(),a=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[c,p]=Q.useState(),[g,v]=Q.useState("kilometers"),[x,b]=Q.useState([]),[P,I]=Q.useState(!1),k=()=>{g==="kilometers"&&v("miles"),g==="miles"&&v("kilometers")},M=F=>{b(N=>{const $=[...N];return $.splice(F,1),l(void 0),$})},O=F=>{p({measure:F.value,unit:F.unit,geojson:F.geojson})};return Q.useEffect(()=>{P&&(I(!1),c&&b(F=>{const N=[...F];return N.push(c),N}))},[P]),Q.useEffect(()=>{p(void 0)},[g]),Z.jsx(Z.Fragment,{children:Z.jsxs(g3,{open:t,setOpen:r,name:"Multi Measure Tool",children:[Z.jsxs(po,{sx:{flexGrow:1},children:[Z.jsx("br",{}),Z.jsxs(Mf,{container:!0,spacing:4,justifyContent:"flex-start",children:[Z.jsx(Mf,{size:3,children:Z.jsx(Lf,{title:"Measure Area",children:Z.jsx(ji,{variant:"outlined",sx:{backgroundColor:n==="polygon"?F=>F.palette.GPS.GPSActiveColor:F=>F.palette.GPS.GPSActiveBackgroundColor,color:n==="polygon"?F=>F.palette.GPS.GPSActiveBackgroundColor:F=>F.palette.GPS.GPSActiveColor},onClick:()=>{i("polygon"),p(void 0),I(!0)},children:Z.jsx(T$,{})})})}),Z.jsx(Mf,{size:3,children:Z.jsx(Lf,{title:"Measure Distance",children:Z.jsx(ji,{variant:"outlined",sx:{backgroundColor:n==="line"?F=>F.palette.GPS.GPSActiveColor:F=>F.palette.GPS.GPSActiveBackgroundColor,color:n==="line"?F=>F.palette.GPS.GPSActiveBackgroundColor:F=>F.palette.GPS.GPSActiveColor},onClick:()=>{i("line"),p(void 0),I(!0)},children:Z.jsx(E$,{})})})})]})]}),Z.jsx("br",{}),Z.jsx(Mf,{size:4,children:Z.jsxs(cc,{children:[Z.jsx(Ih,{id:"unit-select-label",children:"Unit"}),Z.jsxs(kh,{labelId:"unit-select-label",id:"unit-select",value:g,label:"Unit",onChange:F=>{v(F.target.value),p(void 0),I(!0)},children:[Z.jsx(Np,{value:"kilometers",children:"Kilometers"}),Z.jsx(Np,{value:"miles",children:"Miles"})]})]})}),Z.jsx("br",{}),!P&&Z.jsx(e3,{measureType:n,unit:g,onChange:O,...k,onFinish:()=>{I(!0)}}),Z.jsxs(t3,{children:[x?.map((F,N)=>Z.jsx(Z.Fragment,{children:Z.jsxs(po,{sx:{display:"flex",flexDirection:"column"},children:[Z.jsx("br",{}),Z.jsx(po,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"},marginTop:"25px"},onMouseOver:()=>{l(F.geojson)},onMouseLeave:()=>{l(void 0)},children:Z.jsxs(Q.Fragment,{children:[Z.jsx(Rf,{layerComponent:Z.jsx(zu,{mapId:e.mapId,geojson:F.geojson}),visible:!0,configurable:!0,type:"layer",name:F.geojson.geometry?.type==="LineString"?F.measure.toFixed(3).toString()+" "+F.unit:F.measure.toFixed(3).toString()+" "+F.unit+""},F.measure),Z.jsx(Lf,{title:"Delete",children:Z.jsxs(ji,{onClick:()=>M(N),children:[" ",Z.jsx(v1,{})," "]})}),Z.jsx(Lf,{title:"Center Location",children:Z.jsx(ji,{onClick:()=>{a?.map?.map.setCenter(F.geojson.geometry.type==="Point"?F.geojson.geometry.coordinates:jI(F.geojson).geometry.coordinates)},children:Z.jsx(qI,{})})})]},F.measure+"-"+N)})]},F.measure)})),o&&Z.jsx(zu,{mapId:e.mapId,geojson:{type:"FeatureCollection",features:[o]},layerId:"highlightBorder",defaultPaintOverrides:{circle:{"circle-color":"#dd9900","circle-opacity":.4,"circle-radius":10},line:{"line-color":"#dd9900","line-opacity":.4,"line-width":10},fill:{"fill-color":"#dd9900","fill-opacity":.4}}})]})]})})};try{gB.displayName="MlMultiMeasureTool",gB.__docgenInfo={description:"",displayName:"MlMultiMeasureTool",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:null,description:`Style attribute for the button-style
https://mui.com/system/getting-started/the-sx-prop/`,name:"buttonStyleOverride",required:!1,type:{name:"SxProps | undefined"}},measureType:{defaultValue:null,description:'String that specify if the Tool measures an area ("polygon") or length ("line")',name:"measureType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"line"'},{value:'"polygon"'}]}},multiType:{defaultValue:null,description:"Boolean which decides if the user can switch between measure modes",name:"multiType",required:!1,type:{name:"boolean | undefined"}},unit:{defaultValue:null,description:"String that dictates which unit of measurement is used",name:"unit",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"meters"'},{value:'"metres"'},{value:'"millimeters"'},{value:'"millimetres"'},{value:'"centimeters"'},{value:'"centimetres"'},{value:'"kilometers"'},{value:'"kilometres"'},{value:'"miles"'},{value:'"nauticalmiles"'},{value:'"inches"'},{value:'"yards"'},{value:'"feet"'},{value:'"radians"'},{value:'"degrees"'}]}},onChange:{defaultValue:null,description:`Callback function that is called each time measurment geometry within has changed within MlMeasureTool.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((options: { value: number; unit?: string | undefined; geojson: Feature<Geometry, GeoJsonProperties>; geometries?: [] | undefined; }) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called by the end of drawing geometries.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}const Xxe=Ei(Z.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Yxe=Ei(Z.jsx("path",{d:"M19 13H5v-2h14z"})),y3=({className:e="",title:t,onClick:r,style:n})=>Z.jsxs("svg",{width:"52",height:"53",viewBox:"0 0 52 53",fill:"none",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,children:[t&&Z.jsx("title",{children:t}),Z.jsx("circle",{cx:"26.0001",cy:"26.1843",r:"24",fill:"white",stroke:"#009EE0",strokeWidth:"2"}),Z.jsx("path",{d:"M26.4915 7.59161C26.3524 8.07338 25.6698 8.07338 25.5307 7.59161L24.2998 3.3276C24.2075 3.0079 24.4474 2.68893 24.7802 2.68893H27.242C27.5748 2.68893 27.8147 3.0079 27.7224 3.3276L26.4915 7.59161Z",fill:"#009EE0"}),Z.jsx("path",{d:"M25.5085 44.7598C25.6476 44.278 26.3302 44.278 26.4693 44.7598L27.7002 49.0238C27.7925 49.3435 27.5526 49.6625 27.2198 49.6625H24.758C24.4252 49.6625 24.1853 49.3435 24.2776 49.0238L25.5085 44.7598Z",fill:"#009EE0"}),Z.jsx("path",{d:"M44.6641 26.4915C44.1823 26.3524 44.1823 25.6698 44.6641 25.5307L48.9281 24.2998C49.2478 24.2075 49.5668 24.4474 49.5668 24.7802V27.242C49.5668 27.5747 49.2478 27.8147 48.9281 27.7224L44.6641 26.4915Z",fill:"#009EE0"}),Z.jsx("path",{d:"M7.3959 25.6085C7.87766 25.7476 7.87766 26.4302 7.3959 26.5693L3.13189 27.8002C2.81218 27.8925 2.49321 27.6526 2.49321 27.3198L2.49321 24.858C2.49321 24.5253 2.81218 24.2853 3.13189 24.3776L7.3959 25.6085Z",fill:"#009EE0"})]});try{y3.displayName="CompassBackground",y3.__docgenInfo={description:"",displayName:"CompassBackground",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const v3=({className:e="",title:t,onClick:r,style:n})=>Z.jsxs("svg",{width:"10",height:"40",viewBox:"0 0 10 40",fill:"none",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,children:[t&&Z.jsx("title",{children:t}),Z.jsxs("g",{transform:"translate(0.67544,-1.25e-5)",children:[Z.jsx("path",{d:"m 3.34715,4.52028 c 0.22737,-1.05154 1.72745,-1.05154 1.95482,0 L 8.64912,20 H 0 Z",fill:"#cf003d"}),Z.jsx("path",{d:"m 3.34715,35.4797 c 0.22737,1.0516 1.72745,1.0516 1.95482,0 L 8.64912,20 H 0 Z",fill:"#d3dcf0"})]})]});try{v3.displayName="CompassNeedle",v3.__docgenInfo={description:"",displayName:"CompassNeedle",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const Zxe=_r(po)(({theme:e})=>({zIndex:1e3,cursor:"pointer",transform:"scale(1)",[e.breakpoints.down("md")]:{transform:"scale(1.6)"}})),Kxe=_r(po)(({theme:e})=>({position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",[e.breakpoints.down("md")]:{right:"0px",top:"-52px"},circle:{fill:e.palette.compass.compColor,stroke:e.palette.compass.compStroke},path:{fill:e.palette.compass.compStroke},"&:hover circle":{fill:e.palette.compass.compHover}})),Jxe=_r(po)(({theme:e})=>({display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}})),b3=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Q.useState(0),i=()=>{t.map?.map?.getBearing&&n(Math.round(t.map.map.getBearing()))};Q.useEffect(()=>{if(t.map)return t.map.on("rotate",i,t.componentId),i(),()=>{t.map?.map.off("rotate",i)}},[t.map,e.mapId]);const o=()=>{r==0?t.map?.map.setBearing(-90):r==-90?t.map?.map.setBearing(180):r==180?t.map?.map.setBearing(90):t.map?.map.setBearing(0)};return Z.jsx(Z.Fragment,{children:Z.jsx(Zxe,{sx:{...e.style},children:Z.jsxs(Kxe,{onClick:o,sx:{...e.backgroundStyle},children:[Z.jsx(y3,{style:{position:"absolute",top:0,left:0}}),Z.jsx(Jxe,{onClick:o,sx:{...e.needleStyle},children:Z.jsx(v3,{style:{transform:"rotate("+(r>0?"-"+r:-1*r)+"deg)"}})})]})})})};try{b3.displayName="MlNavigationCompass",b3.__docgenInfo={description:`Navigation component that displays a compass component which indicates the current orientation of the map it is registered for and offers controls to turn the bearing 90 left/right or reset north to point up.

All style props are applied using`,displayName:"MlNavigationCompass",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapHook",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"Style object to adjust css definitions of the component.",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},backgroundStyle:{defaultValue:null,description:"Style object to adjust css definitions of the background.",name:"backgroundStyle",required:!1,type:{name:"CSSProperties | undefined"}},needleStyle:{defaultValue:null,description:"Style object to adjust css definitions of the compass needle.",name:"needleStyle",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const Qxe=Ei(Z.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),e2e=Ei(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),t2e=_r(ji)(({theme:e})=>({zIndex:1e3,color:e.palette.navigation.buttonColor,transform:"scale(1)"})),_3=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Q.useState(e.mode||"mercator");Q.useEffect(()=>{t.map?.map.getProjection?.()?.type!==r&&t.map?.setProjection({type:r})},[t.map]);const i=()=>{if(!t.map)return;const o=r==="globe"?"mercator":"globe";t.map.setProjection({type:o}),n(o)};return Z.jsx(Z.Fragment,{children:Z.jsx(t2e,{variant:"navtools",onClick:i,style:e.style,children:r==="globe"?Z.jsx(e2e,{"data-testid":"PublicIcon",sx:{fontSize:{xs:"1.4em",md:"1em"}}}):Z.jsx(Qxe,{"data-testid":"MapIcon",sx:{fontSize:{xs:"1.4em",md:"1em"}}})})})};try{_3.displayName="MlGlobeButton",_3.__docgenInfo={description:"",displayName:"MlGlobeButton",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"Style object to adjust css definitions of the component.",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},mode:{defaultValue:null,description:"Initial projection mode of the map.",name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"globe"'},{value:'"mercator"'}]}}}}}catch{}const yB=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Q.useState(0),i=l1(p=>p.breakpoints.down("md")),o=du();Q.useEffect(()=>{t.map&&(t.map.on("pitchend",()=>{t.map&&n(t.map.getPitch())},t.componentId),n(t.map.getPitch()))},[t.map,e.mapId]);const l=Q.useCallback(()=>{t.map&&t.map.easeTo({zoom:t.map.getZoom()+.5})},[t.map]),a=Q.useCallback(()=>{t.map&&t.map.easeTo({zoom:t.map.getZoom()-.5})},[t.map]),c=Q.useCallback(()=>{if(!t.map)return;n(t.map.getPitch());const p=t.map.getPitch()!==0?0:60;t.map.easeTo({pitch:p})},[t.map]);return Z.jsxs(po,{sx:{zIndex:501,position:"absolute",display:"flex",flexDirection:"column",right:i?"15px":"25px",bottom:i?"20px":"40px",...i?{margin:"80px 10px 50px 10px"}:{marginTop:"50px"},...e.sx},children:[Z.jsx(b3,{}),e.show3DButton&&Z.jsx(ji,{variant:"navtools",onClick:c,sx:{color:p=>p.palette.navigation.buttonColor},children:r<29?"2D":"3D"}),e.showGlobeButton&&Z.jsx(_3,{}),e.showFollowGpsButton&&Z.jsx(QT,{}),e.showCenterLocationButton&&Z.jsx(aT,{}),Z.jsx(tT,{orientation:"vertical",sx:{border:"none",Button:{minWidth:"20px !important",color:o.palette.navigation.buttonColor},"Button:hover":{border:"none"}},children:e.showZoomButtons&&Z.jsxs(Z.Fragment,{children:[Z.jsx(ji,{variant:"navtools",onClick:l,sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0,position:"relative"},children:Z.jsx(Xxe,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})}),Z.jsx(Oc,{sx:{backgroundColor:"#fff"},children:Z.jsx(rT,{sx:{marginLeft:"6px",marginRight:"6px"}})}),Z.jsx(ji,{variant:"navtools",onClick:a,sx:{margin:0,borderTopLeftRadius:0,borderTopRightRadius:0},children:Z.jsx(Yxe,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})]})}),e.children&&ft.cloneElement(e.children,{})]})};try{yB.displayName="MlNavigationTools",yB.__docgenInfo={description:"",displayName:"MlNavigationTools",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},show3DButton:{defaultValue:null,description:"Show 3D button",name:"show3DButton",required:!1,type:{name:"boolean | undefined"}},showGlobeButton:{defaultValue:null,description:"Show global button",name:"showGlobeButton",required:!1,type:{name:"boolean | undefined"}},showZoomButtons:{defaultValue:null,description:"Show zoom button",name:"showZoomButtons",required:!1,type:{name:"boolean | undefined"}},showFollowGpsButton:{defaultValue:null,description:"Show follow GPS button",name:"showFollowGpsButton",required:!1,type:{name:"boolean | undefined"}},showCenterLocationButton:{defaultValue:null,description:"Show center on current position button",name:"showCenterLocationButton",required:!1,type:{name:"boolean | undefined"}},children:{defaultValue:null,description:"Additional JSX Elements to be rendered below MlNavigationTools buttons",name:"children",required:!1,type:{name:"Element | undefined"}},sx:{defaultValue:null,description:"Style attribute for NavigationTools container",name:"sx",required:!1,type:{name:"SxProps | undefined"}},mediaIsMobile:{defaultValue:null,description:"Style attribute for NavigationTools container",name:"mediaIsMobile",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const Tx=e=>(qf({idPrefix:"MlLayer-",layerId:e.layerId,mapId:e.mapId,geojson:e.geojson||void 0,options:{type:"background",paint:{...e?.options?.type&&e.options.type!=="background"?{}:{"background-color":"rgba(0,0,0,0)"}},...e.options},insertBeforeLayer:e.insertBeforeLayer}),Z.jsx(Z.Fragment,{}));try{Tx.displayName="MlLayer",Tx.__docgenInfo={description:"Basic layer component that create a layer in a MapLibre-gl instance and keeps it updated according to it attribute configuration.",displayName:"MlLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}}}}}catch{}const vB=e=>{const t=Q.useRef(0),r=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[n,i]=Q.useState(0),[o,l]=Q.useState(""),a=Q.useCallback(()=>{if(!r.map||r.map?.map.getZoom()===t.current)return;t.current=r.map?.map.getZoom();const v=e.maxWidth||100,x=r.map.map._container.clientHeight/2,b=r.map.map.unproject([0,x]),P=r.map.map.unproject([v,x]),I=b.distanceTo(P);if(e.unit==="imperial"){const k=3.2808*I;if(k>5280){const M=k/5280;c(v,M,r.map.map._getUIString("ScaleControl.Miles"))}else c(v,k,r.map.map._getUIString("ScaleControl.Feet"))}else if(e.unit==="nautical"){const k=I/1852;c(v,k,r.map.map._getUIString("ScaleControl.NauticalMiles"))}else I>=1e3?c(v,I/1e3,r.map.map._getUIString("ScaleControl.Kilometers")):c(v,I,r.map.map._getUIString("ScaleControl.Meters"))},[r.map,e.unit,e.maxWidth]);Q.useEffect(()=>{if(!r.map)return;const v=a;return r.map.on("move",v,r.componentId),a(),()=>{r.map?.map.off("move",v)}},[r.map,a]);const c=(v,x,b)=>{const P=g(x),I=P/x;i(v*I),l(P+"&nbsp;"+b)},p=v=>{const x=Math.pow(10,Math.ceil(-Math.log(v)/Math.LN10));return Math.round(v*x)/x},g=v=>{const x=Math.pow(10,`${Math.floor(v)}`.length-1);let b=v/x;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:p(b),x*b};return Z.jsx(Z.Fragment,{children:Z.jsx("div",{style:{backgroundColor:"hsla(0,0%,100%,.75)",fontSize:"10px",border:"2px solid #333",borderTop:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box",width:n+"px",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:o}})})};try{vB.displayName="MlScaleReference",vB.__docgenInfo={description:"",displayName:"MlScaleReference",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number | undefined"}},unit:{defaultValue:null,description:"",name:"unit",required:!1,type:{name:"string | undefined"}}}}}catch{}var f4,bB;function r2e(){if(bB)return f4;bB=1;function e(r,n){var i=r.getCenter(),o=r.getZoom(),l=r.getBearing(),a=r.getPitch();n.forEach(function(c){c.jumpTo({center:i,zoom:o,bearing:l,pitch:a})})}function t(){var r,n=arguments.length;if(n===1)r=arguments[0];else{r=[];for(var i=0;i<n;i++)r.push(arguments[i])}var o=[];r.forEach(function(p,g){o[g]=c.bind(null,p,r.filter(function(v,x){return x!==g}))});function l(){r.forEach(function(p,g){p.on("move",o[g])})}function a(){r.forEach(function(p,g){p.off("move",o[g])})}function c(p,g){a(),e(p,g),l()}return l(),function(){a(),o=[],r=[]}}return f4=t,f4}var n2e=r2e();const JV=rf(n2e),_B=e=>{const t=Q.useContext(Vh),r=Q.useRef(!1),n=Q.useRef(()=>{}),[i,o]=Q.useState(50),l=Q.useRef(50),[a,c]=Q.useState(50),p=Q.useRef(50),g=Q.useMemo(()=>e.magnifierRadius||200,[e.magnifierRadius]),v=Q.useCallback(()=>!(!e.map1Id||!e.map2Id||!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[e,t]),x=Q.useRef(()=>{v()&&P({clientX:l.current,clientY:p.current})});Q.useEffect(()=>{window.addEventListener("resize",x.current);const F=x.current;return()=>{window.removeEventListener("resize",F),n.current()}},[]);const b=Q.useCallback(F=>{if(!v())return;const N=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let $=typeof F.touches<"u"&&typeof F.touches[0]<"u"?F.touches[0].clientX:0,j=typeof F.touches<"u"&&typeof F.touches[0]<"u"?F.touches[0].clientY:0;$-=N.x,j-=N.y;const U=parseFloat(($/N.width*100).toFixed(2)),H=parseFloat((j/N.height*100).toFixed(2));(l.current!==U||p.current!==H)&&(o(U),l.current=U,c(H),p.current=H,t.maps[e.map2Id].getContainer().style.clipPath=`circle(${g}px at `+l.current*N.width/100+"px "+p.current*N.height/100+"px)")},[t,v,e,g]),P=Q.useCallback(F=>{if(!v())return;const N=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let $=F.clientX,j=F.clientY;$-=N.x,j-=N.y;const U=parseFloat(($/N.width*100).toFixed(2)),H=parseFloat((j/N.height*100).toFixed(2));(l.current!==U||p.current!==H)&&(o(U),l.current=U,c(H),p.current=H,t.maps[e.map2Id].getContainer().style.clipPath=`circle(${g}px at `+l.current*N.width/100+"px "+p.current*N.height/100+"px)")},[t,v,e,g]);Q.useEffect(()=>{!v()||r.current||(r.current=!0,n.current=JV(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),P({clientX:l.current,clientY:p.current}),P({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2,clientY:t.maps[e.map1Id].getCanvas().clientHeight/2}))},[t.mapIds,t,v,e,P]);const I=F=>{F.nativeEvent instanceof TouchEvent?(document.addEventListener("touchmove",b),document.addEventListener("touchend",k)):(document.addEventListener("mousemove",P),document.addEventListener("mouseup",M))},k=()=>{document.removeEventListener("touchmove",b),document.removeEventListener("touchend",k)},M=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",M)},O=F=>{const N=new WheelEvent(F.type,F);t.map?.map.getCanvas().dispatchEvent(N)};return Z.jsx("div",{style:{position:"absolute",left:i+"%",top:a+"%",borderRadius:"50%",width:g*2-2+"px",height:g*2-2+"px",background:"rgba(0,0,0,0)",border:"2px solid #fafafa",boxShadow:"1px 2px 2px rgba(19, 19, 19, .5), inset 1px 1px 1px rgba(19, 19, 19, .2)",cursor:"pointer",zIndex:"110",marginLeft:g*-1-1+"px",marginTop:g*-1-1+"px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none",...e.magnifierStyle},onTouchStart:I,onMouseDown:I,onWheel:O})};try{_B.displayName="MlLayerMagnify",_B.__docgenInfo={description:`
Hides the MapLibreMap referenced by props.map2Id except for the "magnifier"-circle that reveals
the map and can be dragged around on top of the MapLibreMap referenced by props.map1Id`,displayName:"MlLayerMagnify",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance",name:"map2Id",required:!0,type:{name:"string"}},magnifierRadius:{defaultValue:null,description:'Size of the "magnifier"-circle',name:"magnifierRadius",required:!1,type:{name:"number | undefined"}},magnifierStyle:{defaultValue:null,description:"object (React.CSSProperties) that is added to the magnifier default style",name:"magnifierStyle",required:!0,type:{name:"CSSProperties | undefined"}}}}}catch{}const x3=({className:e="",title:t,onClick:r,style:n,color:i})=>Z.jsxs("svg",{viewBox:"0 0 47 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,color:i,children:[Z.jsx("path",{d:"M29.5 21.25L35.75 15L29.5 8.75V21.25Z",fill:"#009EE0"}),Z.jsx("path",{d:"M17.5 8.75L11.25 15L17.5 21.25V8.75Z",fill:"#009EE0"})]});try{x3.displayName="SwipeIcon",x3.__docgenInfo={description:"",displayName:"SwipeIcon",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}}}}}catch{}const xB=e=>{const t=Q.useContext(Vh),r=Q.useRef(!1),[n,i]=Q.useState(50),o=Q.useRef(0),l=Q.useRef(()=>{}),a=Q.useCallback(()=>!(!e.map1Id||!e.map2Id||!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[t,e.map1Id,e.map2Id]),c=()=>{l.current()},p=Q.useCallback(I=>{if(!a())return;const k=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let M=typeof I.touches<"u"&&typeof I.touches[0]<"u"?I.touches[0].clientX:0;M-=k.x;const O=parseFloat((M/k.width*100).toFixed(2));if(o.current!==O){i(O),o.current=O;const F="rect(0, "+o.current*k.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=F}},[t,a,e.map1Id,e.map2Id]),g=Q.useCallback(I=>{if(!a())return;const k=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let M=I.clientX;M-=k.x;const O=parseFloat((M/k.width*100).toFixed(2));if(o.current!==O){i(O),o.current=O;const F="rect(0, "+o.current*k.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=F}},[t,a,e.map1Id,e.map2Id]);Q.useEffect(()=>c,[]),Q.useEffect(()=>{!a()||r.current||(r.current=!0,l.current=JV(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),g({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2}))},[t.mapIds,t,e,g,a]);const v=I=>{window?.TouchEvent&&I.nativeEvent instanceof window.TouchEvent?(document.addEventListener("touchmove",p),document.addEventListener("touchend",x)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",b))},x=()=>{document.removeEventListener("touchmove",p),document.removeEventListener("touchend",x)},b=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)};function P(){const I=parseFloat(t.maps[e.map2Id].getContainer().style.clip.split(",")[1].replace("px","")),k=t.maps[e.map1Id].getCanvas().getBoundingClientRect().width;if(I<k){const M=parseFloat((I/k*100).toFixed(2));i(M)}else{const M="rect(0, "+k/2+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=M,i(50)}}return Q.useEffect(()=>(window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P)}),[t]),Z.jsx("div",{style:{position:"absolute",left:n+"%",top:"50%",borderRadius:"50%",width:"65px",height:"65px",background:"rgba(234, 235, 241, 0.75)",border:"2px solid rgba(0, 158, 224, 0.75)",cursor:"pointer",zIndex:"110",marginLeft:"-35px",marginTop:"-50px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none",...e.buttonStyle},onTouchStart:v,onMouseDown:v,children:Z.jsx(x3,{color:"#0066ff",style:{width:"65px",height:"65px",justifyContent:"center",zIndex:1100}})})};try{xB.displayName="MlLayerSwipe",xB.__docgenInfo={description:"creates a split view of 2 synchronised maplibre instances",displayName:"MlLayerSwipe",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance.",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance.",name:"map2Id",required:!0,type:{name:"string"}},buttonStyle:{defaultValue:null,description:"object (React.CSSProperties) that is added to the button default style",name:"buttonStyle",required:!0,type:{name:"CSSProperties | undefined"}}}}}catch{}const QV=function(e,t,r,n,i,o,l,a,c){if(typeof n.current[o.current]<"u"){const p=o.current+1===n.current.length?e.geojson:zl([...i.current,...n.current[o.current].geometry.coordinates]);c(p),typeof e.onTransitionFrame=="function"&&e.onTransitionFrame(p),o.current++,r.current&&o.current<n.current.length?a.current=setTimeout(()=>QV(...arguments),l):(typeof e.onTransitionEnd=="function"&&e.onTransitionEnd(e.geojson),r.current=!1)}},i2e=(e,t,r,n,i,o,l,a,c,p)=>{const g=[],v=[];let x=[],b=[];t.current=[];const P=i.current||{geometry:{type:"LineString",coordinates:[]},properties:{},type:"Feature"},I=e.geojson;let k=I,M=P,O=!1;if(typeof k.geometry>"u"&&typeof M.geometry<"u"&&M.geometry.coordinates.length>1)k=zl(M.geometry.coordinates.slice(0,2));else if(typeof M.geometry>"u"&&typeof k.geometry<"u"&&k.geometry.coordinates.length>1)M=zl(k.geometry.coordinates.slice(0,2));else if(typeof M.geometry>"u"&&typeof k.geometry>"u")return;if(k.geometry.coordinates.length<M.geometry.coordinates.length&&(k=P,M=I,O=!0),k&&M)for(let oe=0,ue=k.geometry.coordinates.length;oe<ue;oe++)typeof M.geometry.coordinates[oe]<"u"&&k.geometry.coordinates[oe][0]===M.geometry.coordinates[oe][0]&&k.geometry.coordinates[oe][1]===M.geometry.coordinates[oe][1]?t.current.push(k.geometry.coordinates[oe]):(typeof k.geometry.coordinates[oe]<"u"&&v.push(k.geometry.coordinates[oe]),typeof M.geometry.coordinates[oe]<"u"&&g.push(M.geometry.coordinates[oe]));if(O?(x=g,b=v):(x=v,b=g),x.length<2&&b<2)return;const F=e.transitionTime/o,N=b.length>1?Math.round(N0(zl(b))):0,$=x.length>1?Math.round(N0(zl(x))):0,j=$+N,U=N/j,H=Math.round(F*U),Y=Math.round(N/H*100)/100,ae=$/j,ee=Math.round(F*ae),G=Math.round($/ee*100)/100;let ie;ie=[...wB(b,Y,H)],ie.reverse(),ie=[...ie,...wB(x,G,ee)],ie.push(I),r.current=ie,l.current=1,n.current=!0,c.current=setTimeout(()=>QV(e,a,n,r,t,l,o,c,p),o)},wB=(e,t,r)=>{const n=[];if(e.length>1){const i=Ihe(zl(e),t);let o=i.features[0];for(let l=0;l<r&&(n.push(o),typeof i.features[l]<"u");l++)o=zl([...o.geometry.coordinates,...i.features[l].geometry.coordinates])}return n},a2e=50,SB=e=>{const{geojson:t,...r}=e,n=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),i=Q.useRef(!1),o=Q.useRef(null),l=Q.useRef(!1),a=Q.useRef(void 0),c=Q.useRef(!1),p=Q.useRef([]),g=Q.useRef([]),[v,x]=Q.useState(Uf([]));Q.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]);const b=Q.useCallback(()=>{i2e(e,g,p,l,o,a2e,c,n.map,a,x)},[e,n.map]);Q.useEffect(()=>{!n.map||!i.current||(typeof e.transitionTime<"u"&&e.type==="line"&&o.current&&(l.current=!1,c.current=!1,p.current=[],g.current=[],b()),e.geojson&&(o.current=e.geojson))},[n.map,b,e]);const P=Q.useCallback(()=>{e.type==="line"&&typeof e.transitionTime<"u"&&e.transitionTime&&typeof e.geojson<"u"&&JSON.stringify(o.current)!==JSON.stringify(e.geojson)&&(b(),o.current=e.geojson)},[e,b]);return Q.useEffect(()=>{!n.mapIsReady||!e.geojson||(i.current=!0,P())},[n.mapIsReady,P,e]),Z.jsx(Z.Fragment,{children:Z.jsx(zu,{...r,geojson:v})})};try{SB.displayName="MlTransitionGeoJsonLayer",SB.__docgenInfo={description:'Adds source and layer of types "line", "fill" or "circle" to display GeoJSON data on the map.',displayName:"MlTransitionGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the new layer and source that are added to the MapLibre instance",name:"layerId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}},type:{defaultValue:null,description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"symbol"'},{value:'"fill"'},{value:'"line"'},{value:'"circle"'},{value:'"heatmap"'},{value:'"fill-extrusion"'},{value:'"hillshade"'},{value:'"color-relief"'},{value:'"background"'}]}},paint:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | ... 8 more ... | undefined'}},layout:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`,name:"layout",required:!1,type:{name:'{ "fill-sort-key"?: DataDrivenPropertyValueSpecification<number> | undefined; visibility?: "visible" | "none" | undefined; } | { "line-cap"?: PropertyValueSpecification<...> | undefined; ... 4 more ...; visibility?: "visible" | ... 1 more ... | undefined; } | ... 8 more ... | undefined'}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!1,type:{name:'{ circle?: { "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-color"?: DataDrivenPropertyValueSpecification<string> | undefined; ... 8 more ...; "circle-stroke-opacity"?: DataDrivenPropertyValueSpecification<...> | undefined; } | undefined; fill?: { ...; } | undefined; line?: { ......'}},labelProp:{defaultValue:null,description:"Property name in the GeoJSON object to be used as a label.",name:"labelProp",required:!1,type:{name:"string | undefined"}},labelOptions:{defaultValue:null,description:"Label configuration options.",name:"labelOptions",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},transitionTime:{defaultValue:null,description:"",name:"transitionTime",required:!1,type:{name:"number | undefined"}}}}}catch{}const o2e=(e="top")=>{switch(e){case"bottom":return"translate(-50%, 0%)";case"left":return"translate(-100%, -50%)";case"right":return"translate(0%, -50%)";case"top-left":return"translate(-100%, -100%)";case"top-right":return"translate(0%, -100%)";case"bottom-left":return"translate(-100%, 0%)";case"bottom-right":return"translate(0%, 0%)";default:case"top":return"translate(-50%, -100%)"}};function s2e(e,t,r){const n=parseInt(String(r?.width||14),10),i=parseInt(String(r?.height||14),10),o={};switch(e){case"bottom":o.marginTop=`${t}px`;break;case"left":o.marginLeft=`-${t}px`;break;case"right":o.marginLeft=`${n+t}px`;break;case"top-left":o.marginTop=`-${i+t}px`,o.marginLeft=`-${t}px`;break;case"top-right":o.marginTop=`-${i+t}px`,o.marginLeft=`${n+t}px`;break;case"bottom-left":o.marginTop=`${t}px`,o.marginLeft=`-${t}px`;break;case"bottom-right":o.marginTop=`${t}px`,o.marginLeft=`${n+t}px`;break;case"top":default:o.marginTop=`-${i+t}px`;break}return o}const w3=({passEventsThrough:e=!0,contentOffset:t=5,...r})=>{const n=la({mapId:r.mapId,waitForLayer:r.insertBeforeLayer}),[i,o]=Q.useState(null),l=Q.useRef(null),a=Q.useRef(null);Q.useEffect(()=>{if(!n.map)return;l.current=document.createElement("div");const g={...{width:"12px",height:"12px",background:"linear-gradient(135deg, rgb(186, 208, 218) 0%, rgb(96, 209, 253) 100%)",border:"1px solid rgba(255, 255, 255, 0.7)",boxShadow:"0 2px 6px rgba(90, 0, 0, 0.2), 0 0 0 2px rgba(240, 147, 251, 0.2)",borderRadius:"50%"},...r.markerStyle},v=new $4.Marker({element:l.current,anchor:"center"}).setLngLat([r.lng,r.lat]).addTo(n.map.map);o(v);const x=document.createElement("div");return Object.entries(g).forEach(([b,P])=>{x.style.setProperty(b.replace(/([A-Z])/g,"-$1").toLowerCase(),String(P))}),l.current.appendChild(x),()=>{x.remove(),v.remove(),l.current?.remove()}},[n.map,r.lng,r.lat,r.markerStyle,r.anchor]),Q.useEffect(()=>{i&&i.setLngLat([r.lng,r.lat])},[i,r.lng,r.lat]);function c(){const p=a.current?.contentWindow?.document;if(p&&a.current?.parentElement){const g=p.documentElement.scrollHeight;a.current.parentElement.style.height=`${g}px`}}return l.current&&kf.createPortal(Z.jsx(po,{sx:{position:"absolute",display:"flex",width:"300px",maxHeight:"500px",opacity:e?1:.7,zIndex:-1,transform:o2e(r.anchor),...s2e(r.anchor,t,r.markerStyle),pointerEvents:e?"none":"auto","&:hover":{opacity:1},...r.containerStyle},children:Z.jsx("iframe",{ref:a,onLoad:c,style:{width:"100%",borderStyle:"none",...r.iframeStyle},srcDoc:`<div>
	<style>
		body {
			${Object.entries(r.iframeBodyStyle||{}).map(([p,g])=>`${p.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${g};`).join(" ")}
		}
	</style>
	${r.content||""}
</div>`,sandbox:"allow-same-origin allow-popups-to-escape-sandbox allow-scripts",title:n.componentId})}),l.current)};try{w3.displayName="MlMarker",w3.__docgenInfo={description:"",displayName:"MlMarker",props:{mapId:{defaultValue:null,description:"ID of the map to add the marker to",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"Layer ID before which to insert the marker",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},lng:{defaultValue:null,description:"Longitude of the marker position",name:"lng",required:!0,type:{name:"number"}},lat:{defaultValue:null,description:"Latitude of the marker position",name:"lat",required:!0,type:{name:"number"}},content:{defaultValue:null,description:"HTML content for the marker popup",name:"content",required:!1,type:{name:"string | undefined"}},markerStyle:{defaultValue:null,description:"CSS properties to apply to the marker dot",name:"markerStyle",required:!1,type:{name:"CSSProperties | undefined"}},containerStyle:{defaultValue:null,description:"CSS properties to apply to the content container",name:"containerStyle",required:!1,type:{name:"CSSProperties | undefined"}},iframeStyle:{defaultValue:null,description:"CSS properties to apply to the iframe element",name:"iframeStyle",required:!1,type:{name:"CSSProperties | undefined"}},iframeBodyStyle:{defaultValue:null,description:"CSS properties to apply to the body of the iframe",name:"iframeBodyStyle",required:!1,type:{name:"CSSProperties | undefined"}},contentOffset:{defaultValue:{value:"5"},description:"Offset in pixels between the marker and its content",name:"contentOffset",required:!1,type:{name:"number | undefined"}},passEventsThrough:{defaultValue:{value:"true"},description:"Whether mouse events pass through the marker content",name:"passEventsThrough",required:!1,type:{name:"boolean | undefined"}},anchor:{defaultValue:null,description:"Anchor position of the marker relative to its coordinates",name:"anchor",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"top-left"'},{value:'"top-right"'},{value:'"bottom-left"'},{value:'"bottom-right"'},{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}}}}}catch{}var ta={},bl={},CB;function Oy(){if(CB)return bl;CB=1;function e(M,O,F){if(F===void 0&&(F=Array.prototype),M&&typeof F.find=="function")return F.find.call(M,O);for(var N=0;N<M.length;N++)if(r(M,N)){var $=M[N];if(O.call(void 0,$,N,M))return $}}function t(M,O){return O===void 0&&(O=Object),O&&typeof O.getOwnPropertyDescriptors=="function"&&(M=O.create(null,O.getOwnPropertyDescriptors(M))),O&&typeof O.freeze=="function"?O.freeze(M):M}function r(M,O){return Object.prototype.hasOwnProperty.call(M,O)}function n(M,O){if(M===null||typeof M!="object")throw new TypeError("target is not an object");for(var F in O)r(O,F)&&(M[F]=O[F]);return M}var i=t({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function o(M){return r(i,M.toLowerCase())}var l=t({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(M){return r(l,M.toLowerCase())}var c=t({script:!1,style:!1,textarea:!0,title:!0});function p(M){var O=M.toLowerCase();return r(c,O)&&!c[O]}function g(M){var O=M.toLowerCase();return r(c,O)&&c[O]}function v(M){return M===b.HTML}function x(M){return v(M)||M===b.XML_XHTML_APPLICATION}var b=t({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),P=Object.keys(b).map(function(M){return b[M]});function I(M){return P.indexOf(M)>-1}var k=t({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return bl.assign=n,bl.find=e,bl.freeze=t,bl.HTML_BOOLEAN_ATTRIBUTES=i,bl.HTML_RAW_TEXT_ELEMENTS=c,bl.HTML_VOID_ELEMENTS=l,bl.hasDefaultHTMLNamespace=x,bl.hasOwn=r,bl.isHTMLBooleanAttribute=o,bl.isHTMLRawTextElement=p,bl.isHTMLEscapableRawTextElement=g,bl.isHTMLMimeType=v,bl.isHTMLVoidElement=a,bl.isValidMimeType=I,bl.MIME_TYPE=b,bl.NAMESPACE=k,bl}var ng={},EB;function iw(){if(EB)return ng;EB=1;var e=Oy();function t(x,b){x.prototype=Object.create(Error.prototype,{constructor:{value:x},name:{value:x.name,enumerable:!0,writable:b}})}var r=e.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(r);function i(x){return typeof x=="number"&&x>=1&&x<=25}function o(x){return typeof x=="string"&&x.substring(x.length-r.Error.length)===r.Error}function l(x,b){i(x)?(this.name=n[x],this.message=b||""):(this.message=x,this.name=o(b)?b:r.Error),Error.captureStackTrace&&Error.captureStackTrace(this,l)}t(l,!0),Object.defineProperties(l.prototype,{code:{enumerable:!0,get:function(){var x=n.indexOf(this.name);return i(x)?x:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},c=Object.entries(a),p=0;p<c.length;p++){var g=c[p][0];l[g]=c[p][1]}function v(x,b){this.message=x,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,v)}return t(v),ng.DOMException=l,ng.DOMExceptionName=r,ng.ExceptionCode=a,ng.ParseError=v,ng}var us={},Bi={},TB;function eU(){if(TB)return Bi;TB=1;function e(Dr){try{typeof Dr!="function"&&(Dr=RegExp);var jr=new Dr("","u").exec("");return!!jr&&jr[0].length===2}catch{}return!1}var t=e();function r(Dr){if(Dr.source[0]!=="[")throw new Error(Dr+" can not be used with chars");return Dr.source.slice(1,Dr.source.lastIndexOf("]"))}function n(Dr,jr){if(Dr.source[0]!=="[")throw new Error("/"+Dr.source+"/ can not be used with chars_without");if(!jr||typeof jr!="string")throw new Error(JSON.stringify(jr)+" is not a valid search");if(Dr.source.indexOf(jr)===-1)throw new Error('"'+jr+'" is not is /'+Dr.source+"/");if(jr==="-"&&Dr.source.indexOf(jr)!==1)throw new Error('"'+jr+'" is not at the first postion of /'+Dr.source+"/");return new RegExp(Dr.source.replace(jr,""),t?"u":"")}function i(Dr){var jr=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(Ur){var nr=typeof Ur=="string";if(nr&&jr===void 0&&Ur==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return nr?Ur:Ur.source}).join(""),t?"mu":"m")}function o(Dr){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var l="",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;t&&(a=i("[",r(a),"\\u{10000}-\\u{10FFFF}","]"));var c=/[\x20\x09\x0D\x0A]/,p=r(c),g=i(c,"+"),v=i(c,"*"),x=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;t&&(x=i("[",r(x),"\\u{10000}-\\u{10FFFF}","]"));var b=r(x),P=i("[",b,r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]"),I=i(x,P,"*"),k=i(P,"+"),M=i("&",I,";"),O=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),F=o(M,"|",O),N=i("%",I,";"),$=o(i('"',o(/[^%&"]/,"|",N,"|",F),"*",'"'),"|",i("'",o(/[^%&']/,"|",N,"|",F),"*","'")),j=o('"',o(/[^<&"]/,"|",F),"*",'"',"|","'",o(/[^<&']/,"|",F),"*","'"),U=n(x,":"),H=n(P,":"),Y=i(U,H,"*"),ae=i(Y,o(":",Y),"?"),ee=i("^",ae,"$"),G=i("(",ae,")"),ie=o(/"[^"]*"|'[^']*'/),oe=i(/^<\?/,"(",I,")",o(g,"(",a,"*?)"),"?",/\?>/),ue=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,de=o('"',ue,'*"',"|","'",n(ue,"'"),"*'"),Me="<!--",ge="-->",xe=i(Me,o(n(a,"-"),"|",i("-",n(a,"-"))),"*",ge),Ee="#PCDATA",Ae=o(i(/\(/,v,Ee,o(v,/\|/,v,ae),"*",v,/\)\*/),"|",i(/\(/,v,Ee,v,/\)/)),fe=/[?*+]?/,Se=i(/\([^>]+\)/,fe),we=o("EMPTY","|","ANY","|",Ae,"|",Se),De="<!ELEMENT",Re=i(De,g,o(ae,"|",N),g,o(we,"|",N),v,">"),$e=i("NOTATION",g,/\(/,v,I,o(v,/\|/,v,I),"*",v,/\)/),Oe=i(/\(/,v,k,o(v,/\|/,v,k),"*",v,/\)/),it=o($e,"|",Oe),Ye=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",it),rt=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",g),"?",j)),Ie=o(g,I,g,Ye,g,rt),It="<!ATTLIST",at=i(It,g,I,Ie,"*",v,">"),je="about:legacy-compat",Ht=o('"'+je+'"',"|","'"+je+"'"),Wt="SYSTEM",zt="PUBLIC",st=o(o(Wt,g,ie),"|",o(zt,g,de,g,ie)),sr=i("^",o(o(Wt,g,"(?<SystemLiteralOnly>",ie,")"),"|",o(zt,g,"(?<PubidLiteral>",de,")",g,"(?<SystemLiteral>",ie,")"))),ur=o(g,"NDATA",g,I),ar=o($,"|",o(st,ur,"?")),yr="<!ENTITY",pr=i(yr,g,I,g,ar,v,">"),Jt=o($,"|",st),ir=i(yr,g,"%",g,I,g,Jt,v,">"),xr=o(pr,"|",ir),rr=i(zt,g,de),nt=i("<!NOTATION",g,I,g,o(st,"|",rr),v,">"),be=i(v,"=",v),_e=/1[.]\d+/,Ue=i(g,"version",be,o("'",_e,"'","|",'"',_e,'"')),Qe=/[A-Za-z][-A-Za-z0-9._]*/,ot=o(g,"encoding",be,o('"',Qe,'"',"|","'",Qe,"'")),et=o(g,"standalone",be,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),Lt=i(/^<\?xml/,Ue,ot,"?",et,"?",v,/\?>/),vt="<!DOCTYPE",Bt="<![CDATA[",Kt="]]>",Zt=/<!\[CDATA\[/,Er=/\]\]>/,bt=i(a,"*?",Er),vr=i(Zt,bt);return Bi.chars=r,Bi.chars_without=n,Bi.detectUnicodeSupport=e,Bi.reg=i,Bi.regg=o,Bi.ABOUT_LEGACY_COMPAT=je,Bi.ABOUT_LEGACY_COMPAT_SystemLiteral=Ht,Bi.AttlistDecl=at,Bi.CDATA_START=Bt,Bi.CDATA_END=Kt,Bi.CDSect=vr,Bi.Char=a,Bi.Comment=xe,Bi.COMMENT_START=Me,Bi.COMMENT_END=ge,Bi.DOCTYPE_DECL_START=vt,Bi.elementdecl=Re,Bi.EntityDecl=xr,Bi.EntityValue=$,Bi.ExternalID=st,Bi.ExternalID_match=sr,Bi.Name=I,Bi.NotationDecl=nt,Bi.Reference=F,Bi.PEReference=N,Bi.PI=oe,Bi.PUBLIC=zt,Bi.PubidLiteral=de,Bi.QName=ae,Bi.QName_exact=ee,Bi.QName_group=G,Bi.S=g,Bi.SChar_s=p,Bi.S_OPT=v,Bi.SYSTEM=Wt,Bi.SystemLiteral=ie,Bi.UNICODE_REPLACEMENT_CHARACTER=l,Bi.UNICODE_SUPPORT=t,Bi.XMLDecl=Lt,Bi}var PB;function tU(){if(PB)return us;PB=1;var e=Oy(),t=e.find,r=e.hasDefaultHTMLNamespace,n=e.hasOwn,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,l=e.isHTMLVoidElement,a=e.MIME_TYPE,c=e.NAMESPACE,p=Symbol(),g=iw(),v=g.DOMException,x=g.DOMExceptionName,b=eU();function P(Pe){if(Pe!==p)throw new TypeError("Illegal constructor")}function I(Pe){return Pe!==""}function k(Pe){return Pe?Pe.split(/[\t\n\f\r ]+/).filter(I):[]}function M(Pe,Be){return n(Pe,Be)||(Pe[Be]=!0),Pe}function O(Pe){if(!Pe)return[];var Be=k(Pe);return Object.keys(Be.reduce(M,{}))}function F(Pe){return function(Be){return Pe&&Pe.indexOf(Be)!==-1}}function N(Pe){if(!b.QName_exact.test(Pe))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+Pe+'"')}function $(Pe,Be){N(Be),Pe=Pe||null;var gt=null,mt=Be;if(Be.indexOf(":")>=0){var wr=Be.split(":");gt=wr[0],mt=wr[1]}if(gt!==null&&Pe===null)throw new v(v.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(gt==="xml"&&Pe!==e.NAMESPACE.XML)throw new v(v.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((gt==="xmlns"||Be==="xmlns")&&Pe!==e.NAMESPACE.XMLNS)throw new v(v.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(Pe===e.NAMESPACE.XMLNS&&gt!=="xmlns"&&Be!=="xmlns")throw new v(v.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[Pe,gt,mt]}function j(Pe,Be){for(var gt in Pe)n(Pe,gt)&&(Be[gt]=Pe[gt])}function U(Pe,Be){var gt=Pe.prototype;if(!(gt instanceof Be)){let mt=function(){};mt.prototype=Be.prototype,mt=new mt,j(gt,mt),Pe.prototype=gt=mt}gt.constructor!=Pe&&(typeof Pe!="function"&&console.error("unknown Class:"+Pe),gt.constructor=Pe)}var H={},Y=H.ELEMENT_NODE=1,ae=H.ATTRIBUTE_NODE=2,ee=H.TEXT_NODE=3,G=H.CDATA_SECTION_NODE=4,ie=H.ENTITY_REFERENCE_NODE=5,oe=H.ENTITY_NODE=6,ue=H.PROCESSING_INSTRUCTION_NODE=7,de=H.COMMENT_NODE=8,Me=H.DOCUMENT_NODE=9,ge=H.DOCUMENT_TYPE_NODE=10,xe=H.DOCUMENT_FRAGMENT_NODE=11,Ee=H.NOTATION_NODE=12,Ae=e.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function fe(Pe,Be){if(Be.length<Pe.length)return fe(Be,Pe);var gt=null;for(var mt in Pe){if(Pe[mt]!==Be[mt])return gt;gt=Pe[mt]}return gt}function Se(Pe){return Pe.guid||(Pe.guid=Math.random()),Pe.guid}function we(){}we.prototype={length:0,item:function(Pe){return Pe>=0&&Pe<this.length?this[Pe]:null},toString:function(Pe){for(var Be=[],gt=0;gt<this.length;gt++)nr(this[gt],Be,Pe);return Be.join("")},filter:function(Pe){return Array.prototype.filter.call(this,Pe)},indexOf:function(Pe){return Array.prototype.indexOf.call(this,Pe)}},we.prototype[Symbol.iterator]=function(){var Pe=this,Be=0;return{next:function(){return Be<Pe.length?{value:Pe[Be++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function De(Pe,Be){this._node=Pe,this._refresh=Be,Re(this)}function Re(Pe){var Be=Pe._node._inc||Pe._node.ownerDocument._inc;if(Pe._inc!==Be){var gt=Pe._refresh(Pe._node);if(Wn(Pe,"length",gt.length),!Pe.$$length||gt.length<Pe.$$length)for(var mt=gt.length;mt in Pe;mt++)n(Pe,mt)&&delete Pe[mt];j(gt,Pe),Pe._inc=Be}}De.prototype.item=function(Pe){return Re(this),this[Pe]||null},U(De,we);function $e(){}function Oe(Pe,Be){for(var gt=0;gt<Pe.length;){if(Pe[gt]===Be)return gt;gt++}}function it(Pe,Be,gt,mt){if(mt?Be[Oe(Be,mt)]=gt:(Be[Be.length]=gt,Be.length++),Pe){gt.ownerElement=Pe;var wr=Pe.ownerDocument;wr&&(mt&&Wt(wr,Pe,mt),Ht(wr,Pe,gt))}}function Ye(Pe,Be,gt){var mt=Oe(Be,gt);if(mt>=0){for(var wr=Be.length-1;mt<=wr;)Be[mt]=Be[++mt];if(Be.length=wr,Pe){var Ar=Pe.ownerDocument;Ar&&Wt(Ar,Pe,gt),gt.ownerElement=null}}}$e.prototype={length:0,item:we.prototype.item,getNamedItem:function(Pe){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(Pe=Pe.toLowerCase());for(var Be=0;Be<this.length;){var gt=this[Be];if(gt.nodeName===Pe)return gt;Be++}return null},setNamedItem:function(Pe){var Be=Pe.ownerElement;if(Be&&Be!==this._ownerElement)throw new v(v.INUSE_ATTRIBUTE_ERR);var gt=this.getNamedItemNS(Pe.namespaceURI,Pe.localName);return gt===Pe?Pe:(it(this._ownerElement,this,Pe,gt),gt)},setNamedItemNS:function(Pe){return this.setNamedItem(Pe)},removeNamedItem:function(Pe){var Be=this.getNamedItem(Pe);if(!Be)throw new v(v.NOT_FOUND_ERR,Pe);return Ye(this._ownerElement,this,Be),Be},removeNamedItemNS:function(Pe,Be){var gt=this.getNamedItemNS(Pe,Be);if(!gt)throw new v(v.NOT_FOUND_ERR,Pe?Pe+" : "+Be:Be);return Ye(this._ownerElement,this,gt),gt},getNamedItemNS:function(Pe,Be){Pe||(Pe=null);for(var gt=0;gt<this.length;){var mt=this[gt];if(mt.localName===Be&&mt.namespaceURI===Pe)return mt;gt++}return null}},$e.prototype[Symbol.iterator]=function(){var Pe=this,Be=0;return{next:function(){return Be<Pe.length?{value:Pe[Be++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function rt(){}rt.prototype={hasFeature:function(Pe,Be){return!0},createDocument:function(Pe,Be,gt){var mt=a.XML_APPLICATION;Pe===c.HTML?mt=a.XML_XHTML_APPLICATION:Pe===c.SVG&&(mt=a.XML_SVG_IMAGE);var wr=new je(p,{contentType:mt});if(wr.implementation=this,wr.childNodes=new we,wr.doctype=gt||null,gt&&wr.appendChild(gt),Be){var Ar=wr.createElementNS(Pe,Be);wr.appendChild(Ar)}return wr},createDocumentType:function(Pe,Be,gt,mt){N(Pe);var wr=new vt(p);return wr.name=Pe,wr.nodeName=Pe,wr.publicId=Be||"",wr.systemId=gt||"",wr.internalSubset=mt||"",wr.childNodes=new we,wr},createHTMLDocument:function(Pe){var Be=new je(p,{contentType:a.HTML});if(Be.implementation=this,Be.childNodes=new we,Pe!==!1){Be.doctype=this.createDocumentType("html"),Be.doctype.ownerDocument=Be,Be.appendChild(Be.doctype);var gt=Be.createElement("html");Be.appendChild(gt);var mt=Be.createElement("head");if(gt.appendChild(mt),typeof Pe=="string"){var wr=Be.createElement("title");wr.appendChild(Be.createTextNode(Pe)),mt.appendChild(wr)}gt.appendChild(Be.createElement("body"))}return Be}};function Ie(Pe){P(Pe)}Ie.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var Pe=this.getRootNode();return Pe&&Pe.nodeType===Pe.DOCUMENT_NODE},contains:function(Pe){if(!Pe)return!1;var Be=Pe;do{if(this===Be)return!0;Be=Pe.parentNode}while(Be);return!1},getRootNode:function(Pe){var Be=this;do{if(!Be.parentNode)return Be;Be=Be.parentNode}while(Be)},isEqualNode:function(Pe){if(!Pe||this.nodeType!==Pe.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==Pe.name||this.publicId!==Pe.publicId||this.systemId!==Pe.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==Pe.namespaceURI||this.prefix!==Pe.prefix||this.localName!==Pe.localName||this.attributes.length!==Pe.attributes.length)return!1;for(var Be=0;Be<this.attributes.length;Be++){var gt=this.attributes.item(Be);if(!gt.isEqualNode(Pe.getAttributeNodeNS(gt.namespaceURI,gt.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==Pe.namespaceURI||this.localName!==Pe.localName||this.value!==Pe.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==Pe.target||this.data!==Pe.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==Pe.data)return!1;break}if(this.childNodes.length!==Pe.childNodes.length)return!1;for(var Be=0;Be<this.childNodes.length;Be++)if(!this.childNodes[Be].isEqualNode(Pe.childNodes[Be]))return!1;return!0},isSameNode:function(Pe){return this===Pe},insertBefore:function(Pe,Be){return be(this,Pe,Be)},replaceChild:function(Pe,Be){be(this,Pe,Be,nt),Be&&this.removeChild(Be)},removeChild:function(Pe){return st(this,Pe)},appendChild:function(Pe){return this.insertBefore(Pe,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Pe){return en(this.ownerDocument||this,this,Pe)},normalize:function(){for(var Pe=this.firstChild;Pe;){var Be=Pe.nextSibling;Be&&Be.nodeType==ee&&Pe.nodeType==ee?(this.removeChild(Be),Pe.appendData(Be.data)):(Pe.normalize(),Pe=Be)}},isSupported:function(Pe,Be){return this.ownerDocument.implementation.hasFeature(Pe,Be)},lookupPrefix:function(Pe){for(var Be=this;Be;){var gt=Be._nsMap;if(gt){for(var mt in gt)if(n(gt,mt)&&gt[mt]===Pe)return mt}Be=Be.nodeType==ae?Be.ownerDocument:Be.parentNode}return null},lookupNamespaceURI:function(Pe){for(var Be=this;Be;){var gt=Be._nsMap;if(gt&&n(gt,Pe))return gt[Pe];Be=Be.nodeType==ae?Be.ownerDocument:Be.parentNode}return null},isDefaultNamespace:function(Pe){var Be=this.lookupPrefix(Pe);return Be==null},compareDocumentPosition:function(Pe){if(this===Pe)return 0;var Be=Pe,gt=this,mt=null,wr=null;if(Be instanceof Ue&&(mt=Be,Be=mt.ownerElement),gt instanceof Ue&&(wr=gt,gt=wr.ownerElement,mt&&Be&&gt===Be))for(var Ar=0,Dn;Dn=gt.attributes[Ar];Ar++){if(Dn===mt)return Ae.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Ae.DOCUMENT_POSITION_PRECEDING;if(Dn===wr)return Ae.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Ae.DOCUMENT_POSITION_FOLLOWING}if(!Be||!gt||gt.ownerDocument!==Be.ownerDocument)return Ae.DOCUMENT_POSITION_DISCONNECTED+Ae.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(Se(gt.ownerDocument)>Se(Be.ownerDocument)?Ae.DOCUMENT_POSITION_FOLLOWING:Ae.DOCUMENT_POSITION_PRECEDING);if(wr&&Be===gt)return Ae.DOCUMENT_POSITION_CONTAINS+Ae.DOCUMENT_POSITION_PRECEDING;if(mt&&Be===gt)return Ae.DOCUMENT_POSITION_CONTAINED_BY+Ae.DOCUMENT_POSITION_FOLLOWING;for(var wi=[],Lr=Be.parentNode;Lr;){if(!wr&&Lr===gt)return Ae.DOCUMENT_POSITION_CONTAINED_BY+Ae.DOCUMENT_POSITION_FOLLOWING;wi.push(Lr),Lr=Lr.parentNode}wi.reverse();for(var fn=[],gn=gt.parentNode;gn;){if(!mt&&gn===Be)return Ae.DOCUMENT_POSITION_CONTAINS+Ae.DOCUMENT_POSITION_PRECEDING;fn.push(gn),gn=gn.parentNode}fn.reverse();var _i=fe(wi,fn);for(var oi in _i.childNodes){var Di=_i.childNodes[oi];if(Di===gt)return Ae.DOCUMENT_POSITION_FOLLOWING;if(Di===Be)return Ae.DOCUMENT_POSITION_PRECEDING;if(fn.indexOf(Di)>=0)return Ae.DOCUMENT_POSITION_FOLLOWING;if(wi.indexOf(Di)>=0)return Ae.DOCUMENT_POSITION_PRECEDING}return 0}};function It(Pe){return Pe=="<"&&"&lt;"||Pe==">"&&"&gt;"||Pe=="&"&&"&amp;"||Pe=='"'&&"&quot;"||"&#"+Pe.charCodeAt()+";"}j(H,Ie),j(H,Ie.prototype),j(Ae,Ie),j(Ae,Ie.prototype);function at(Pe,Be){if(Be(Pe))return!0;if(Pe=Pe.firstChild)do if(at(Pe,Be))return!0;while(Pe=Pe.nextSibling)}function je(Pe,Be){P(Pe);var gt=Be||{};this.ownerDocument=this,this.contentType=gt.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function Ht(Pe,Be,gt){Pe&&Pe._inc++;var mt=gt.namespaceURI;mt===c.XMLNS&&(Be._nsMap[gt.prefix?gt.localName:""]=gt.value)}function Wt(Pe,Be,gt,mt){Pe&&Pe._inc++;var wr=gt.namespaceURI;wr===c.XMLNS&&delete Be._nsMap[gt.prefix?gt.localName:""]}function zt(Pe,Be,gt){if(Pe&&Pe._inc){Pe._inc++;var mt=Be.childNodes;if(gt&&!gt.nextSibling)mt[mt.length++]=gt;else{for(var wr=Be.firstChild,Ar=0;wr;)mt[Ar++]=wr,wr=wr.nextSibling;mt.length=Ar,delete mt[mt.length]}}}function st(Pe,Be){if(Pe!==Be.parentNode)throw new v(v.NOT_FOUND_ERR,"child's parent is not parent");var gt=Be.previousSibling,mt=Be.nextSibling;return gt?gt.nextSibling=mt:Pe.firstChild=mt,mt?mt.previousSibling=gt:Pe.lastChild=gt,zt(Pe.ownerDocument,Pe),Be.parentNode=null,Be.previousSibling=null,Be.nextSibling=null,Be}function sr(Pe){return Pe&&(Pe.nodeType===Ie.DOCUMENT_NODE||Pe.nodeType===Ie.DOCUMENT_FRAGMENT_NODE||Pe.nodeType===Ie.ELEMENT_NODE)}function ur(Pe){return Pe&&(Pe.nodeType===Ie.CDATA_SECTION_NODE||Pe.nodeType===Ie.COMMENT_NODE||Pe.nodeType===Ie.DOCUMENT_FRAGMENT_NODE||Pe.nodeType===Ie.DOCUMENT_TYPE_NODE||Pe.nodeType===Ie.ELEMENT_NODE||Pe.nodeType===Ie.PROCESSING_INSTRUCTION_NODE||Pe.nodeType===Ie.TEXT_NODE)}function ar(Pe){return Pe&&Pe.nodeType===Ie.DOCUMENT_TYPE_NODE}function yr(Pe){return Pe&&Pe.nodeType===Ie.ELEMENT_NODE}function pr(Pe){return Pe&&Pe.nodeType===Ie.TEXT_NODE}function Jt(Pe,Be){var gt=Pe.childNodes||[];if(t(gt,yr)||ar(Be))return!1;var mt=t(gt,ar);return!(Be&&mt&&gt.indexOf(mt)>gt.indexOf(Be))}function ir(Pe,Be){var gt=Pe.childNodes||[];function mt(Ar){return yr(Ar)&&Ar!==Be}if(t(gt,mt))return!1;var wr=t(gt,ar);return!(Be&&wr&&gt.indexOf(wr)>gt.indexOf(Be))}function xr(Pe,Be,gt){if(!sr(Pe))throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+Pe.nodeType);if(gt&&gt.parentNode!==Pe)throw new v(v.NOT_FOUND_ERR,"child not in parent");if(!ur(Be)||ar(Be)&&Pe.nodeType!==Ie.DOCUMENT_NODE)throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected node type "+Be.nodeType+" for parent node type "+Pe.nodeType)}function rr(Pe,Be,gt){var mt=Pe.childNodes||[],wr=Be.childNodes||[];if(Be.nodeType===Ie.DOCUMENT_FRAGMENT_NODE){var Ar=wr.filter(yr);if(Ar.length>1||t(wr,pr))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Ar.length===1&&!Jt(Pe,gt))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(yr(Be)&&!Jt(Pe,gt))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ar(Be)){if(t(mt,ar))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Dn=t(mt,yr);if(gt&&mt.indexOf(Dn)<mt.indexOf(gt))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!gt&&Dn)throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function nt(Pe,Be,gt){var mt=Pe.childNodes||[],wr=Be.childNodes||[];if(Be.nodeType===Ie.DOCUMENT_FRAGMENT_NODE){var Ar=wr.filter(yr);if(Ar.length>1||t(wr,pr))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Ar.length===1&&!ir(Pe,gt))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(yr(Be)&&!ir(Pe,gt))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ar(Be)){if(t(mt,function(Lr){return ar(Lr)&&Lr!==gt}))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Dn=t(mt,yr);if(gt&&mt.indexOf(Dn)<mt.indexOf(gt))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function be(Pe,Be,gt,mt){xr(Pe,Be,gt),Pe.nodeType===Ie.DOCUMENT_NODE&&(mt||rr)(Pe,Be,gt);var wr=Be.parentNode;if(wr&&wr.removeChild(Be),Be.nodeType===xe){var Ar=Be.firstChild;if(Ar==null)return Be;var Dn=Be.lastChild}else Ar=Dn=Be;var wi=gt?gt.previousSibling:Pe.lastChild;Ar.previousSibling=wi,Dn.nextSibling=gt,wi?wi.nextSibling=Ar:Pe.firstChild=Ar,gt==null?Pe.lastChild=Dn:gt.previousSibling=Dn;do Ar.parentNode=Pe;while(Ar!==Dn&&(Ar=Ar.nextSibling));return zt(Pe.ownerDocument||Pe,Pe,Be),Be.nodeType==xe&&(Be.firstChild=Be.lastChild=null),Be}je.prototype={implementation:null,nodeName:"#document",nodeType:Me,doctype:null,documentElement:null,_inc:1,insertBefore:function(Pe,Be){if(Pe.nodeType===xe){for(var gt=Pe.firstChild;gt;){var mt=gt.nextSibling;this.insertBefore(gt,Be),gt=mt}return Pe}return be(this,Pe,Be),Pe.ownerDocument=this,this.documentElement===null&&Pe.nodeType===Y&&(this.documentElement=Pe),Pe},removeChild:function(Pe){var Be=st(this,Pe);return Be===this.documentElement&&(this.documentElement=null),Be},replaceChild:function(Pe,Be){be(this,Pe,Be,nt),Pe.ownerDocument=this,Be&&this.removeChild(Be),yr(Pe)&&(this.documentElement=Pe)},importNode:function(Pe,Be){return Hn(this,Pe,Be)},getElementById:function(Pe){var Be=null;return at(this.documentElement,function(gt){if(gt.nodeType==Y&&gt.getAttribute("id")==Pe)return Be=gt,!0}),Be},createElement:function(Pe){var Be=new _e(p);Be.ownerDocument=this,this.type==="html"&&(Pe=Pe.toLowerCase()),r(this.contentType)&&(Be.namespaceURI=c.HTML),Be.nodeName=Pe,Be.tagName=Pe,Be.localName=Pe,Be.childNodes=new we;var gt=Be.attributes=new $e;return gt._ownerElement=Be,Be},createDocumentFragment:function(){var Pe=new Er(p);return Pe.ownerDocument=this,Pe.childNodes=new we,Pe},createTextNode:function(Pe){var Be=new ot(p);return Be.ownerDocument=this,Be.childNodes=new we,Be.appendData(Pe),Be},createComment:function(Pe){var Be=new et(p);return Be.ownerDocument=this,Be.childNodes=new we,Be.appendData(Pe),Be},createCDATASection:function(Pe){var Be=new Lt(p);return Be.ownerDocument=this,Be.childNodes=new we,Be.appendData(Pe),Be},createProcessingInstruction:function(Pe,Be){var gt=new bt(p);return gt.ownerDocument=this,gt.childNodes=new we,gt.nodeName=gt.target=Pe,gt.nodeValue=gt.data=Be,gt},createAttribute:function(Pe){if(!b.QName_exact.test(Pe))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in name "'+Pe+'"');return this.type==="html"&&(Pe=Pe.toLowerCase()),this._createAttribute(Pe)},_createAttribute:function(Pe){var Be=new Ue(p);return Be.ownerDocument=this,Be.childNodes=new we,Be.name=Pe,Be.nodeName=Pe,Be.localName=Pe,Be.specified=!0,Be},createEntityReference:function(Pe){if(!b.Name.test(Pe))throw new v(v.INVALID_CHARACTER_ERR,'not a valid xml name "'+Pe+'"');if(this.type==="html")throw new v("document is an html document",x.NotSupportedError);var Be=new Zt(p);return Be.ownerDocument=this,Be.childNodes=new we,Be.nodeName=Pe,Be},createElementNS:function(Pe,Be){var gt=$(Pe,Be),mt=new _e(p),wr=mt.attributes=new $e;return mt.childNodes=new we,mt.ownerDocument=this,mt.nodeName=Be,mt.tagName=Be,mt.namespaceURI=gt[0],mt.prefix=gt[1],mt.localName=gt[2],wr._ownerElement=mt,mt},createAttributeNS:function(Pe,Be){var gt=$(Pe,Be),mt=new Ue(p);return mt.ownerDocument=this,mt.childNodes=new we,mt.nodeName=Be,mt.name=Be,mt.specified=!0,mt.namespaceURI=gt[0],mt.prefix=gt[1],mt.localName=gt[2],mt}},U(je,Ie);function _e(Pe){P(Pe),this._nsMap=Object.create(null)}_e.prototype={nodeType:Y,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===c.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(Pe){return!!this.getAttributeNode(Pe)},getAttribute:function(Pe){var Be=this.getAttributeNode(Pe);return Be?Be.value:null},getAttributeNode:function(Pe){return this._isInHTMLDocumentAndNamespace()&&(Pe=Pe.toLowerCase()),this.attributes.getNamedItem(Pe)},setAttribute:function(Pe,Be){this._isInHTMLDocumentAndNamespace()&&(Pe=Pe.toLowerCase());var gt=this.getAttributeNode(Pe);gt?gt.value=gt.nodeValue=""+Be:(gt=this.ownerDocument._createAttribute(Pe),gt.value=gt.nodeValue=""+Be,this.setAttributeNode(gt))},removeAttribute:function(Pe){var Be=this.getAttributeNode(Pe);Be&&this.removeAttributeNode(Be)},setAttributeNode:function(Pe){return this.attributes.setNamedItem(Pe)},setAttributeNodeNS:function(Pe){return this.attributes.setNamedItemNS(Pe)},removeAttributeNode:function(Pe){return this.attributes.removeNamedItem(Pe.nodeName)},removeAttributeNS:function(Pe,Be){var gt=this.getAttributeNodeNS(Pe,Be);gt&&this.removeAttributeNode(gt)},hasAttributeNS:function(Pe,Be){return this.getAttributeNodeNS(Pe,Be)!=null},getAttributeNS:function(Pe,Be){var gt=this.getAttributeNodeNS(Pe,Be);return gt?gt.value:null},setAttributeNS:function(Pe,Be,gt){var mt=$(Pe,Be),wr=mt[2],Ar=this.getAttributeNodeNS(Pe,wr);Ar?Ar.value=Ar.nodeValue=""+gt:(Ar=this.ownerDocument.createAttributeNS(Pe,Be),Ar.value=Ar.nodeValue=""+gt,this.setAttributeNode(Ar))},getAttributeNodeNS:function(Pe,Be){return this.attributes.getNamedItemNS(Pe,Be)},getElementsByClassName:function(Pe){var Be=O(Pe);return new De(this,function(gt){var mt=[];return Be.length>0&&at(gt,function(wr){if(wr!==gt&&wr.nodeType===Y){var Ar=wr.getAttribute("class");if(Ar){var Dn=Pe===Ar;if(!Dn){var wi=O(Ar);Dn=Be.every(F(wi))}Dn&&mt.push(wr)}}}),mt})},getElementsByTagName:function(Pe){var Be=(this.nodeType===Me?this:this.ownerDocument).type==="html",gt=Pe.toLowerCase();return new De(this,function(mt){var wr=[];return at(mt,function(Ar){if(!(Ar===mt||Ar.nodeType!==Y))if(Pe==="*")wr.push(Ar);else{var Dn=Ar.getQualifiedName(),wi=Be&&Ar.namespaceURI===c.HTML?gt:Pe;Dn===wi&&wr.push(Ar)}}),wr})},getElementsByTagNameNS:function(Pe,Be){return new De(this,function(gt){var mt=[];return at(gt,function(wr){wr!==gt&&wr.nodeType===Y&&(Pe==="*"||wr.namespaceURI===Pe)&&(Be==="*"||wr.localName==Be)&&mt.push(wr)}),mt})}},je.prototype.getElementsByClassName=_e.prototype.getElementsByClassName,je.prototype.getElementsByTagName=_e.prototype.getElementsByTagName,je.prototype.getElementsByTagNameNS=_e.prototype.getElementsByTagNameNS,U(_e,Ie);function Ue(Pe){P(Pe),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}Ue.prototype.nodeType=ae,U(Ue,Ie);function Qe(Pe){P(Pe)}Qe.prototype={data:"",substringData:function(Pe,Be){return this.data.substring(Pe,Pe+Be)},appendData:function(Pe){Pe=this.data+Pe,this.nodeValue=this.data=Pe,this.length=Pe.length},insertData:function(Pe,Be){this.replaceData(Pe,0,Be)},deleteData:function(Pe,Be){this.replaceData(Pe,Be,"")},replaceData:function(Pe,Be,gt){var mt=this.data.substring(0,Pe),wr=this.data.substring(Pe+Be);gt=mt+gt+wr,this.nodeValue=this.data=gt,this.length=gt.length}},U(Qe,Ie);function ot(Pe){P(Pe)}ot.prototype={nodeName:"#text",nodeType:ee,splitText:function(Pe){var Be=this.data,gt=Be.substring(Pe);Be=Be.substring(0,Pe),this.data=this.nodeValue=Be,this.length=Be.length;var mt=this.ownerDocument.createTextNode(gt);return this.parentNode&&this.parentNode.insertBefore(mt,this.nextSibling),mt}},U(ot,Qe);function et(Pe){P(Pe)}et.prototype={nodeName:"#comment",nodeType:de},U(et,Qe);function Lt(Pe){P(Pe)}Lt.prototype={nodeName:"#cdata-section",nodeType:G},U(Lt,ot);function vt(Pe){P(Pe)}vt.prototype.nodeType=ge,U(vt,Ie);function Bt(Pe){P(Pe)}Bt.prototype.nodeType=Ee,U(Bt,Ie);function Kt(Pe){P(Pe)}Kt.prototype.nodeType=oe,U(Kt,Ie);function Zt(Pe){P(Pe)}Zt.prototype.nodeType=ie,U(Zt,Ie);function Er(Pe){P(Pe)}Er.prototype.nodeName="#document-fragment",Er.prototype.nodeType=xe,U(Er,Ie);function bt(Pe){P(Pe)}bt.prototype.nodeType=ue,U(bt,Qe);function vr(){}vr.prototype.serializeToString=function(Pe,Be){return Dr.call(Pe,Be)},Ie.prototype.toString=Dr;function Dr(Pe){var Be=[],gt=this.nodeType===Me&&this.documentElement||this,mt=gt.prefix,wr=gt.namespaceURI;if(wr&&mt==null){var mt=gt.lookupPrefix(wr);if(mt==null)var Ar=[{namespace:wr,prefix:null}]}return nr(this,Be,Pe,Ar),Be.join("")}function jr(Pe,Be,gt){var mt=Pe.prefix||"",wr=Pe.namespaceURI;if(!wr||mt==="xml"&&wr===c.XML||wr===c.XMLNS)return!1;for(var Ar=gt.length;Ar--;){var Dn=gt[Ar];if(Dn.prefix===mt)return Dn.namespace!==wr}return!0}function Ur(Pe,Be,gt){Pe.push(" ",Be,'="',gt.replace(/[<>&"\t\n\r]/g,It),'"')}function nr(Pe,Be,gt,mt){mt||(mt=[]);var wr=Pe.nodeType===Me?Pe:Pe.ownerDocument,Ar=wr.type==="html";if(gt)if(Pe=gt(Pe),Pe){if(typeof Pe=="string"){Be.push(Pe);return}}else return;switch(Pe.nodeType){case Y:var Dn=Pe.attributes,wi=Dn.length,ua=Pe.firstChild,Lr=Pe.tagName,fn=Lr;if(!Ar&&!Pe.prefix&&Pe.namespaceURI){for(var gn,_i=0;_i<Dn.length;_i++)if(Dn.item(_i).name==="xmlns"){gn=Dn.item(_i).value;break}if(!gn)for(var oi=mt.length-1;oi>=0;oi--){var Di=mt[oi];if(Di.prefix===""&&Di.namespace===Pe.namespaceURI){gn=Di.namespace;break}}if(gn!==Pe.namespaceURI)for(var oi=mt.length-1;oi>=0;oi--){var Di=mt[oi];if(Di.namespace===Pe.namespaceURI){Di.prefix&&(fn=Di.prefix+":"+Lr);break}}}Be.push("<",fn);for(var Pn=0;Pn<wi;Pn++){var ga=Dn.item(Pn);ga.prefix=="xmlns"?mt.push({prefix:ga.localName,namespace:ga.value}):ga.nodeName=="xmlns"&&mt.push({prefix:"",namespace:ga.value})}for(var Pn=0;Pn<wi;Pn++){var ga=Dn.item(Pn);if(jr(ga,Ar,mt)){var na=ga.prefix||"",Ni=ga.namespaceURI;Ur(Be,na?"xmlns:"+na:"xmlns",Ni),mt.push({prefix:na,namespace:Ni})}nr(ga,Be,gt,mt)}if(Lr===fn&&jr(Pe,Ar,mt)){var na=Pe.prefix||"",Ni=Pe.namespaceURI;Ur(Be,na?"xmlns:"+na:"xmlns",Ni),mt.push({prefix:na,namespace:Ni})}var Na=!ua;if(Na&&(Ar||Pe.namespaceURI===c.HTML)&&(Na=l(Lr)),Na)Be.push("/>");else{if(Be.push(">"),Ar&&o(Lr))for(;ua;)ua.data?Be.push(ua.data):nr(ua,Be,gt,mt.slice()),ua=ua.nextSibling;else for(;ua;)nr(ua,Be,gt,mt.slice()),ua=ua.nextSibling;Be.push("</",fn,">")}return;case Me:case xe:for(var ua=Pe.firstChild;ua;)nr(ua,Be,gt,mt.slice()),ua=ua.nextSibling;return;case ae:return Ur(Be,Pe.name,Pe.value);case ee:return Be.push(Pe.data.replace(/[<&>]/g,It));case G:return Be.push(b.CDATA_START,Pe.data,b.CDATA_END);case de:return Be.push(b.COMMENT_START,Pe.data,b.COMMENT_END);case ge:var Mi=Pe.publicId,Ua=Pe.systemId;Be.push(b.DOCTYPE_DECL_START," ",Pe.name),Mi?(Be.push(" ",b.PUBLIC," ",Mi),Ua&&Ua!=="."&&Be.push(" ",Ua)):Ua&&Ua!=="."&&Be.push(" ",b.SYSTEM," ",Ua),Pe.internalSubset&&Be.push(" [",Pe.internalSubset,"]"),Be.push(">");return;case ue:return Be.push("<?",Pe.target," ",Pe.data,"?>");case ie:return Be.push("&",Pe.nodeName,";");default:Be.push("??",Pe.nodeName)}}function Hn(Pe,Be,gt){var mt;switch(Be.nodeType){case Y:mt=Be.cloneNode(!1),mt.ownerDocument=Pe;case xe:break;case ae:gt=!0;break}if(mt||(mt=Be.cloneNode(!1)),mt.ownerDocument=Pe,mt.parentNode=null,gt)for(var wr=Be.firstChild;wr;)mt.appendChild(Hn(Pe,wr,gt)),wr=wr.nextSibling;return mt}function en(Pe,Be,gt){var mt=new Be.constructor(p);for(var wr in Be)if(n(Be,wr)){var Ar=Be[wr];typeof Ar!="object"&&Ar!=mt[wr]&&(mt[wr]=Ar)}switch(Be.childNodes&&(mt.childNodes=new we),mt.ownerDocument=Pe,mt.nodeType){case Y:var Dn=Be.attributes,wi=mt.attributes=new $e,Lr=Dn.length;wi._ownerElement=mt;for(var fn=0;fn<Lr;fn++)mt.setAttributeNode(en(Pe,Dn.item(fn),!0));break;case ae:gt=!0}if(gt)for(var gn=Be.firstChild;gn;)mt.appendChild(en(Pe,gn,gt)),gn=gn.nextSibling;return mt}function Wn(Pe,Be,gt){Pe[Be]=gt}try{if(Object.defineProperty){let Pe=function(Be){switch(Be.nodeType){case Y:case xe:var gt=[];for(Be=Be.firstChild;Be;)Be.nodeType!==7&&Be.nodeType!==8&&gt.push(Pe(Be)),Be=Be.nextSibling;return gt.join("");default:return Be.nodeValue}};Object.defineProperty(De.prototype,"length",{get:function(){return Re(this),this.$$length}}),Object.defineProperty(Ie.prototype,"textContent",{get:function(){return Pe(this)},set:function(Be){switch(this.nodeType){case Y:case xe:for(;this.firstChild;)this.removeChild(this.firstChild);(Be||String(Be))&&this.appendChild(this.ownerDocument.createTextNode(Be));break;default:this.data=Be,this.value=Be,this.nodeValue=Be}}}),Wn=function(Be,gt,mt){Be["$$"+gt]=mt}}}catch{}return us._updateLiveList=Re,us.Attr=Ue,us.CDATASection=Lt,us.CharacterData=Qe,us.Comment=et,us.Document=je,us.DocumentFragment=Er,us.DocumentType=vt,us.DOMImplementation=rt,us.Element=_e,us.Entity=Kt,us.EntityReference=Zt,us.LiveNodeList=De,us.NamedNodeMap=$e,us.Node=Ie,us.NodeList=we,us.Notation=Bt,us.Text=ot,us.ProcessingInstruction=bt,us.XMLSerializer=vr,us}var mp={},h4={},IB;function l2e(){return IB||(IB=1,(function(e){var t=Oy().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(h4)),h4}var yv={},kB;function u2e(){if(kB)return yv;kB=1;var e=Oy(),t=eU(),r=iw(),n=e.isHTMLEscapableRawTextElement,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,l=e.hasOwn,a=e.NAMESPACE,c=r.ParseError,p=r.DOMException,g=0,v=1,x=2,b=3,P=4,I=5,k=6,M=7;function O(){}O.prototype={parse:function(ue,de,Me){var ge=this.domBuilder;ge.startDocument(),Y(de,de=Object.create(null)),N(ue,de,Me,ge,this.errorHandler),ge.endDocument()}};var F=/&#?\w+;?/g;function N(ue,de,Me,ge,xe){var Ee=i(ge.mimeType);ue.indexOf(t.UNICODE_REPLACEMENT_CHARACTER)>=0&&xe.warning("Unicode replacement character detected, source encoding issues?");function Ae(be){if(be>65535){be-=65536;var _e=55296+(be>>10),Ue=56320+(be&1023);return String.fromCharCode(_e,Ue)}else return String.fromCharCode(be)}function fe(be){var _e=be[be.length-1]===";"?be:be+";";if(!Ee&&_e!==be)return xe.error("EntityRef: expecting ;"),be;var Ue=t.Reference.exec(_e);if(!Ue||Ue[0].length!==_e.length)return xe.error("entity not matching Reference production: "+be),be;var Qe=_e.slice(1,-1);return l(Me,Qe)?Me[Qe]:Qe.charAt(0)==="#"?Ae(parseInt(Qe.substring(1).replace("x","0x"))):(xe.error("entity not found:"+be),be)}function Se(be){if(be>rt){var _e=ue.substring(rt,be).replace(F,fe);$e&&Oe(rt),ge.characters(_e,0,be-rt),rt=be}}var we=0,De=0,Re=/\r\n?|\n|$/g,$e=ge.locator;function Oe(be,_e){for(;be>=De&&(_e=Re.exec(ue));)we=De,De=_e.index+_e[0].length,$e.lineNumber++;$e.columnNumber=be-we+1}for(var it=[{currentNSMap:de}],Ye=[],rt=0;;){try{var Ie=ue.indexOf("<",rt);if(Ie<0){if(!Ee&&Ye.length>0)return xe.fatalError("unclosed xml tag(s): "+Ye.join(", "));if(!ue.substring(rt).match(/^\s*$/)){var It=ge.doc,at=It.createTextNode(ue.substring(rt));if(It.documentElement)return xe.error("Extra content at the end of the document");It.appendChild(at),ge.currentElement=at}return}if(Ie>rt){var je=ue.substring(rt,Ie);!Ee&&Ye.length===0&&(je=je.replace(new RegExp(t.S_OPT.source,"g"),""),je&&xe.error("Unexpected content outside root element: '"+je+"'")),Se(Ie)}switch(ue.charAt(Ie+1)){case"/":var Jt=ue.indexOf(">",Ie+2),Ht=ue.substring(Ie+2,Jt>0?Jt:void 0);if(!Ht)return xe.fatalError("end tag name missing");var Wt=Jt>0&&t.reg("^",t.QName_group,t.S_OPT,"$").exec(Ht);if(!Wt)return xe.fatalError('end tag name contains invalid characters: "'+Ht+'"');if(!ge.currentElement&&!ge.doc.documentElement)return;var zt=Ye[Ye.length-1]||ge.currentElement.tagName||ge.doc.documentElement.tagName||"";if(zt!==Wt[1]){var st=Wt[1].toLowerCase();if(!Ee||zt.toLowerCase()!==st)return xe.fatalError('Opening and ending tag mismatch: "'+zt+'" != "'+Ht+'"')}var sr=it.pop();Ye.pop();var ur=sr.localNSMap;if(ge.endElement(sr.uri,sr.localName,zt),ur)for(var ar in ur)l(ur,ar)&&ge.endPrefixMapping(ar);Jt++;break;case"?":$e&&Oe(Ie),Jt=ie(ue,Ie,ge,xe);break;case"!":$e&&Oe(Ie),Jt=G(ue,Ie,ge,xe,Ee);break;default:$e&&Oe(Ie);var yr=new oe,pr=it[it.length-1].currentNSMap,Jt=j(ue,Ie,yr,pr,fe,xe,Ee),ir=yr.length;if(yr.closed||(Ee&&e.isHTMLVoidElement(yr.tagName)?yr.closed=!0:Ye.push(yr.tagName)),$e&&ir){for(var xr=$($e,{}),rr=0;rr<ir;rr++){var nt=yr[rr];Oe(nt.offset),nt.locator=$($e,{})}ge.locator=xr,U(yr,ge,pr)&&it.push(yr),ge.locator=$e}else U(yr,ge,pr)&&it.push(yr);Ee&&!yr.closed?Jt=H(ue,Jt,yr.tagName,fe,ge):Jt++}}catch(be){if(be instanceof c)throw be;if(be instanceof p)throw new c(be.name+": "+be.message,ge.locator,be);xe.error("element parse error: "+be),Jt=-1}Jt>rt?rt=Jt:Se(Math.max(Ie,rt)+1)}}function $(ue,de){return de.lineNumber=ue.lineNumber,de.columnNumber=ue.columnNumber,de}function j(ue,de,Me,ge,xe,Ee,Ae){function fe(Oe,it,Ye){if(l(Me.attributeNames,Oe))return Ee.fatalError("Attribute "+Oe+" redefined");if(!Ae&&it.indexOf("<")>=0)return Ee.fatalError("Unescaped '<' not allowed in attributes values");Me.addValue(Oe,it.replace(/[\t\n\r]/g," ").replace(F,xe),Ye)}for(var Se,we,De=++de,Re=g;;){var $e=ue.charAt(De);switch($e){case"=":if(Re===v)Se=ue.slice(de,De),Re=b;else if(Re===x)Re=b;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Re===b||Re===v)if(Re===v&&(Ee.warning('attribute value must after "="'),Se=ue.slice(de,De)),de=De+1,De=ue.indexOf($e,de),De>0)we=ue.slice(de,De),fe(Se,we,de-1),Re=I;else throw new Error("attribute value no end '"+$e+"' match");else if(Re==P)we=ue.slice(de,De),fe(Se,we,de),Ee.warning('attribute "'+Se+'" missed start quot('+$e+")!!"),de=De+1,Re=I;else throw new Error('attribute value must after "="');break;case"/":switch(Re){case g:Me.setTagName(ue.slice(de,De));case I:case k:case M:Re=M,Me.closed=!0;case P:case v:break;case x:Me.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Ee.error("unexpected end of input"),Re==g&&Me.setTagName(ue.slice(de,De)),De;case">":switch(Re){case g:Me.setTagName(ue.slice(de,De));case I:case k:case M:break;case P:case v:we=ue.slice(de,De),we.slice(-1)==="/"&&(Me.closed=!0,we=we.slice(0,-1));case x:Re===x&&(we=Se),Re==P?(Ee.warning('attribute "'+we+'" missed quot(")!'),fe(Se,we,de)):(Ae||Ee.warning('attribute "'+we+'" missed value!! "'+we+'" instead!!'),fe(we,we,de));break;case b:if(!Ae)return Ee.fatalError(`AttValue: ' or " expected`)}return De;case"":$e=" ";default:if($e<=" ")switch(Re){case g:Me.setTagName(ue.slice(de,De)),Re=k;break;case v:Se=ue.slice(de,De),Re=x;break;case P:var we=ue.slice(de,De);Ee.warning('attribute "'+we+'" missed quot(")!!'),fe(Se,we,de);case I:Re=k;break}else switch(Re){case x:Ae||Ee.warning('attribute "'+Se+'" missed value!! "'+Se+'" instead2!!'),fe(Se,Se,de),de=De,Re=v;break;case I:Ee.warning('attribute space is required"'+Se+'"!!');case k:Re=v,de=De;break;case b:Re=P,de=De;break;case M:throw new Error("elements closed character '/' and '>' must be connected to")}}De++}}function U(ue,de,Me){for(var ge=ue.tagName,xe=null,Re=ue.length;Re--;){var Ee=ue[Re],Ae=Ee.qName,fe=Ee.value,$e=Ae.indexOf(":");if($e>0)var Se=Ee.prefix=Ae.slice(0,$e),we=Ae.slice($e+1),De=Se==="xmlns"&&we;else we=Ae,Se=null,De=Ae==="xmlns"&&"";Ee.localName=we,De!==!1&&(xe==null&&(xe=Object.create(null),Y(Me,Me=Object.create(null))),Me[De]=xe[De]=fe,Ee.uri=a.XMLNS,de.startPrefixMapping(De,fe))}for(var Re=ue.length;Re--;)Ee=ue[Re],Ee.prefix&&(Ee.prefix==="xml"&&(Ee.uri=a.XML),Ee.prefix!=="xmlns"&&(Ee.uri=Me[Ee.prefix]));var $e=ge.indexOf(":");$e>0?(Se=ue.prefix=ge.slice(0,$e),we=ue.localName=ge.slice($e+1)):(Se=null,we=ue.localName=ge);var Oe=ue.uri=Me[Se||""];if(de.startElement(Oe,we,ge,ue),ue.closed){if(de.endElement(Oe,we,ge),xe)for(Se in xe)l(xe,Se)&&de.endPrefixMapping(Se)}else return ue.currentNSMap=Me,ue.localNSMap=xe,!0}function H(ue,de,Me,ge,xe){var Ee=n(Me);if(Ee||o(Me)){var Ae=ue.indexOf("</"+Me+">",de),fe=ue.substring(de+1,Ae);return Ee&&(fe=fe.replace(F,ge)),xe.characters(fe,0,fe.length),Ae}return de+1}function Y(ue,de){for(var Me in ue)l(ue,Me)&&(de[Me]=ue[Me])}function ae(ue,de){var Me=de;function ge(De){return De=De||0,ue.charAt(Me+De)}function xe(De){De=De||1,Me+=De}function Ee(){for(var De=0;Me<ue.length;){var Re=ge();if(Re!==" "&&Re!==`
`&&Re!=="	"&&Re!=="\r")return De;De++,xe()}return-1}function Ae(){return ue.substring(Me)}function fe(De){return ue.substring(Me,Me+De.length)===De}function Se(De){return ue.substring(Me,Me+De.length).toUpperCase()===De.toUpperCase()}function we(De){var Re=t.reg("^",De),$e=Re.exec(Ae());return $e?(xe($e[0].length),$e[0]):null}return{char:ge,getIndex:function(){return Me},getMatch:we,getSource:function(){return ue},skip:xe,skipBlanks:Ee,substringFromIndex:Ae,substringStartsWith:fe,substringStartsWithCaseInsensitive:Se}}function ee(ue,de){function Me(fe,Se){var we=t.PI.exec(fe.substringFromIndex());return we?we[1].toLowerCase()==="xml"?Se.fatalError("xml declaration is only allowed at the start of the document, but found at position "+fe.getIndex()):(fe.skip(we[0].length),we[0]):Se.fatalError("processing instruction is not well-formed at position "+fe.getIndex())}var ge=ue.getSource();if(ue.char()==="["){ue.skip(1);for(var xe=ue.getIndex();ue.getIndex()<ge.length;){if(ue.skipBlanks(),ue.char()==="]"){var Ee=ge.substring(xe,ue.getIndex());return ue.skip(1),Ee}var Ae=null;if(ue.char()==="<"&&ue.char(1)==="!")switch(ue.char(2)){case"E":ue.char(3)==="L"?Ae=ue.getMatch(t.elementdecl):ue.char(3)==="N"&&(Ae=ue.getMatch(t.EntityDecl));break;case"A":Ae=ue.getMatch(t.AttlistDecl);break;case"N":Ae=ue.getMatch(t.NotationDecl);break;case"-":Ae=ue.getMatch(t.Comment);break}else if(ue.char()==="<"&&ue.char(1)==="?")Ae=Me(ue,de);else if(ue.char()==="%")Ae=ue.getMatch(t.PEReference);else return de.fatalError("Error detected in Markup declaration");if(!Ae)return de.fatalError("Error in internal subset at position "+ue.getIndex())}return de.fatalError("doctype internal subset is not well-formed, missing ]")}}function G(ue,de,Me,ge,xe){var Ee=ae(ue,de);switch(xe?Ee.char(2).toUpperCase():Ee.char(2)){case"-":var Ae=Ee.getMatch(t.Comment);return Ae?(Me.comment(Ae,t.COMMENT_START.length,Ae.length-t.COMMENT_START.length-t.COMMENT_END.length),Ee.getIndex()):ge.fatalError("comment is not well-formed at position "+Ee.getIndex());case"[":var fe=Ee.getMatch(t.CDSect);return fe?!xe&&!Me.currentElement?ge.fatalError("CDATA outside of element"):(Me.startCDATA(),Me.characters(fe,t.CDATA_START.length,fe.length-t.CDATA_START.length-t.CDATA_END.length),Me.endCDATA(),Ee.getIndex()):ge.fatalError("Invalid CDATA starting at position "+de);case"D":{if(Me.doc&&Me.doc.documentElement)return ge.fatalError("Doctype not allowed inside or after documentElement at position "+Ee.getIndex());if(xe?!Ee.substringStartsWithCaseInsensitive(t.DOCTYPE_DECL_START):!Ee.substringStartsWith(t.DOCTYPE_DECL_START))return ge.fatalError("Expected "+t.DOCTYPE_DECL_START+" at position "+Ee.getIndex());if(Ee.skip(t.DOCTYPE_DECL_START.length),Ee.skipBlanks()<1)return ge.fatalError("Expected whitespace after "+t.DOCTYPE_DECL_START+" at position "+Ee.getIndex());var Se={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(Se.name=Ee.getMatch(t.Name),!Se.name)return ge.fatalError("doctype name missing or contains unexpected characters at position "+Ee.getIndex());if(xe&&Se.name.toLowerCase()!=="html"&&ge.warning("Unexpected DOCTYPE in HTML document at position "+Ee.getIndex()),Ee.skipBlanks(),Ee.substringStartsWith(t.PUBLIC)||Ee.substringStartsWith(t.SYSTEM)){var we=t.ExternalID_match.exec(Ee.substringFromIndex());if(!we)return ge.fatalError("doctype external id is not well-formed at position "+Ee.getIndex());we.groups.SystemLiteralOnly!==void 0?Se.systemId=we.groups.SystemLiteralOnly:(Se.systemId=we.groups.SystemLiteral,Se.publicId=we.groups.PubidLiteral),Ee.skip(we[0].length)}else if(xe&&Ee.substringStartsWithCaseInsensitive(t.SYSTEM)){if(Ee.skip(t.SYSTEM.length),Ee.skipBlanks()<1)return ge.fatalError("Expected whitespace after "+t.SYSTEM+" at position "+Ee.getIndex());if(Se.systemId=Ee.getMatch(t.ABOUT_LEGACY_COMPAT_SystemLiteral),!Se.systemId)return ge.fatalError("Expected "+t.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+t.SYSTEM+" at position "+Ee.getIndex())}return xe&&Se.systemId&&!t.ABOUT_LEGACY_COMPAT_SystemLiteral.test(Se.systemId)&&ge.warning("Unexpected doctype.systemId in HTML document at position "+Ee.getIndex()),xe||(Ee.skipBlanks(),Se.internalSubset=ee(Ee,ge)),Ee.skipBlanks(),Ee.char()!==">"?ge.fatalError("doctype not terminated with > at position "+Ee.getIndex()):(Ee.skip(1),Me.startDTD(Se.name,Se.publicId,Se.systemId,Se.internalSubset),Me.endDTD(),Ee.getIndex())}default:return ge.fatalError('Not well-formed XML starting with "<!" at position '+de)}}function ie(ue,de,Me,ge){var xe=ue.substring(de).match(t.PI);if(!xe)return ge.fatalError("Invalid processing instruction starting at position "+de);if(xe[1].toLowerCase()==="xml"){if(de>0)return ge.fatalError("processing instruction at position "+de+" is an xml declaration which is only at the start of the document");if(!t.XMLDecl.test(ue.substring(de)))return ge.fatalError("xml declaration is not well-formed")}return Me.processingInstruction(xe[1],xe[2]),de+xe[0].length}function oe(){this.attributeNames=Object.create(null)}return oe.prototype={setTagName:function(ue){if(!t.QName_exact.test(ue))throw new Error("invalid tagName:"+ue);this.tagName=ue},addValue:function(ue,de,Me){if(!t.QName_exact.test(ue))throw new Error("invalid attribute:"+ue);this.attributeNames[ue]=this.length,this[this.length++]={qName:ue,value:de,offset:Me}},length:0,getLocalName:function(ue){return this[ue].localName},getLocator:function(ue){return this[ue].locator},getQName:function(ue){return this[ue].qName},getURI:function(ue){return this[ue].uri},getValue:function(ue){return this[ue].value}},yv.XMLReader=O,yv.parseUtils=ae,yv.parseDoctypeCommentOrCData=G,yv}var AB;function c2e(){if(AB)return mp;AB=1;var e=Oy(),t=tU(),r=iw(),n=l2e(),i=u2e(),o=t.DOMImplementation,l=e.hasDefaultHTMLNamespace,a=e.isHTMLMimeType,c=e.isValidMimeType,p=e.MIME_TYPE,g=e.NAMESPACE,v=r.ParseError,x=i.XMLReader;function b(j){return j.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function P(j){if(j=j||{},j.locator===void 0&&(j.locator=!0),this.assign=j.assign||e.assign,this.domHandler=j.domHandler||I,this.onError=j.onError||j.errorHandler,j.errorHandler&&typeof j.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");j.errorHandler&&j.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=j.normalizeLineEndings||b,this.locator=!!j.locator,this.xmlns=this.assign(Object.create(null),j.xmlns)}P.prototype.parseFromString=function(j,U){if(!c(U))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+U+'" is not valid.');var H=this.assign(Object.create(null),this.xmlns),Y=n.XML_ENTITIES,ae=H[""]||null;l(U)?(Y=n.HTML_ENTITIES,ae=g.HTML):U===p.XML_SVG_IMAGE&&(ae=g.SVG),H[""]=ae,H.xml=H.xml||g.XML;var ee=new this.domHandler({mimeType:U,defaultNamespace:ae,onError:this.onError}),G=this.locator?{}:void 0;this.locator&&ee.setDocumentLocator(G);var ie=new x;ie.errorHandler=ee,ie.domBuilder=ee;var oe=!e.isHTMLMimeType(U);return oe&&typeof j!="string"&&ie.errorHandler.fatalError("source is not a string"),ie.parse(this.normalizeLineEndings(String(j)),H,Y),ee.doc.documentElement||ie.errorHandler.fatalError("missing root element"),ee.doc};function I(j){var U=j||{};this.mimeType=U.mimeType||p.XML_APPLICATION,this.defaultNamespace=U.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=U.onError}function k(j,U){U.lineNumber=j.lineNumber,U.columnNumber=j.columnNumber}I.prototype={startDocument:function(){var j=new o;this.doc=a(this.mimeType)?j.createHTMLDocument(!1):j.createDocument(this.defaultNamespace,"")},startElement:function(j,U,H,Y){var ae=this.doc,ee=ae.createElementNS(j,H||U),G=Y.length;F(this,ee),this.currentElement=ee,this.locator&&k(this.locator,ee);for(var ie=0;ie<G;ie++){var j=Y.getURI(ie),oe=Y.getValue(ie),H=Y.getQName(ie),ue=ae.createAttributeNS(j,H);this.locator&&k(Y.getLocator(ie),ue),ue.value=ue.nodeValue=oe,ee.setAttributeNode(ue)}},endElement:function(j,U,H){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(j,U){},endPrefixMapping:function(j){},processingInstruction:function(j,U){var H=this.doc.createProcessingInstruction(j,U);this.locator&&k(this.locator,H),F(this,H)},ignorableWhitespace:function(j,U,H){},characters:function(j,U,H){if(j=O.apply(this,arguments),j){if(this.cdata)var Y=this.doc.createCDATASection(j);else var Y=this.doc.createTextNode(j);this.currentElement?this.currentElement.appendChild(Y):/^\s*$/.test(j)&&this.doc.appendChild(Y),this.locator&&k(this.locator,Y)}},skippedEntity:function(j){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(j){j&&(j.lineNumber=0),this.locator=j},comment:function(j,U,H){j=O.apply(this,arguments);var Y=this.doc.createComment(j);this.locator&&k(this.locator,Y),F(this,Y)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(j,U,H,Y){var ae=this.doc.implementation;if(ae&&ae.createDocumentType){var ee=ae.createDocumentType(j,U,H,Y);this.locator&&k(this.locator,ee),F(this,ee),this.doc.doctype=ee}},reportError:function(j,U){if(typeof this.onError=="function")try{this.onError(j,U,this)}catch(H){throw new v("Reporting "+j+' "'+U+'" caused '+H,this.locator)}else console.error("[xmldom "+j+"]	"+U,M(this.locator))},warning:function(j){this.reportError("warning",j)},error:function(j){this.reportError("error",j)},fatalError:function(j){throw this.reportError("fatalError",j),new v(j,this.locator)}};function M(j){if(j)return`
@#[line:`+j.lineNumber+",col:"+j.columnNumber+"]"}function O(j,U,H){return typeof j=="string"?j.substr(U,H):j.length>=U+H||U?new java.lang.String(j,U,H)+"":j}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(j){I.prototype[j]=function(){return null}});function F(j,U){j.currentElement?j.currentElement.appendChild(U):j.doc.appendChild(U)}function N(j){if(j==="error")throw"onErrorStopParsing"}function $(){throw"onWarningStopParsing"}return mp.__DOMHandler=I,mp.DOMParser=P,mp.normalizeLineEndings=b,mp.onErrorStopParsing=N,mp.onWarningStopParsing=$,mp}var MB;function d2e(){if(MB)return ta;MB=1;var e=Oy();ta.assign=e.assign,ta.hasDefaultHTMLNamespace=e.hasDefaultHTMLNamespace,ta.isHTMLMimeType=e.isHTMLMimeType,ta.isValidMimeType=e.isValidMimeType,ta.MIME_TYPE=e.MIME_TYPE,ta.NAMESPACE=e.NAMESPACE;var t=iw();ta.DOMException=t.DOMException,ta.DOMExceptionName=t.DOMExceptionName,ta.ExceptionCode=t.ExceptionCode,ta.ParseError=t.ParseError;var r=tU();ta.Attr=r.Attr,ta.CDATASection=r.CDATASection,ta.CharacterData=r.CharacterData,ta.Comment=r.Comment,ta.Document=r.Document,ta.DocumentFragment=r.DocumentFragment,ta.DocumentType=r.DocumentType,ta.DOMImplementation=r.DOMImplementation,ta.Element=r.Element,ta.Entity=r.Entity,ta.EntityReference=r.EntityReference,ta.LiveNodeList=r.LiveNodeList,ta.NamedNodeMap=r.NamedNodeMap,ta.Node=r.Node,ta.NodeList=r.NodeList,ta.Notation=r.Notation,ta.ProcessingInstruction=r.ProcessingInstruction,ta.Text=r.Text,ta.XMLSerializer=r.XMLSerializer;var n=c2e();return ta.DOMParser=n.DOMParser,ta.normalizeLineEndings=n.normalizeLineEndings,ta.onErrorStopParsing=n.onErrorStopParsing,ta.onWarningStopParsing=n.onWarningStopParsing,ta}var f2e=d2e();const rU=(function(){const e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(N){if(!N||!N.length)return 0;for(var $=0,j=0;$<N.length;$++)j=(j<<5)-j+N.charCodeAt($)|0;return j}function i(N,$){return N.getElementsByTagName($)}function o(N,$){return N.getAttribute($)}function l(N,$){return parseFloat(o(N,$))}function a(N,$){const j=i(N,$);return j.length?j[0]:null}function c(N){return N.normalize&&N.normalize(),N}function p(N){for(var $=0,j=[];$<N.length;$++)j[$]=parseFloat(N[$]);return j}function g(N){return N&&c(N),N&&N.textContent||""}function v(N,$){let j={},U,H;for(H=0;H<$.length;H++)U=a(N,$[H]),U&&(j[$[H]]=g(U));return j}function x(N,$){for(const j in $)N[j]=$[j]}function b(N){return p(N.replace(e,"").split(","))}function P(N){const $=N.replace(t,"").split(r),j=[];for(let U=0;U<$.length;U++)j.push(b($[U]));return j}function I(N){let $=[l(N,"lon"),l(N,"lat")],j=a(N,"ele"),U=a(N,"gpxtpx:hr")||a(N,"hr"),H=a(N,"time"),Y;return j&&(Y=parseFloat(g(j)),isNaN(Y)||$.push(Y)),{coordinates:$,time:H?g(H):null,heartRate:U?parseFloat(g(U)):null}}function k(){return{type:"FeatureCollection",features:[]}}let M;if(typeof XMLSerializer<"u")M=new XMLSerializer;else{const N=typeof process=="object"&&!process.browser,$=typeof Titanium=="object";if(typeof exports=="object"&&(N||$))M=f2e.XMLSerializer;else throw new Error("Unable to initialize serializer")}function O(N){return N.xml!==void 0?N.xml:M.serializeToString(N)}return{kml:function(N){const $=k(),j={},U={},H={},Y=["Polygon","LineString","Point","Track","gx:Track"],ae=i(N,"Placemark"),ee=i(N,"Style"),G=i(N,"StyleMap");for(let ge=0;ge<ee.length;ge++){const xe=n(O(ee[ge])).toString(16);j["#"+o(ee[ge],"id")]=xe,U[xe]=ee[ge]}for(let ge=0;ge<G.length;ge++){j["#"+o(G[ge],"id")]=n(O(G[ge])).toString(16);const xe=i(G[ge],"Pair"),Ee={};for(let Ae=0;Ae<xe.length;Ae++)Ee[g(a(xe[Ae],"key"))]=g(a(xe[Ae],"styleUrl"));H["#"+o(G[ge],"id")]=Ee}for(let ge=0;ge<ae.length;ge++)$.features=$.features.concat(Me(ae[ge]));function ie(ge){let xe,Ee;return ge=ge||"",ge.substr(0,1)==="#"&&(ge=ge.substr(1)),(ge.length===6||ge.length===3)&&(xe=ge),ge.length===8&&(Ee=parseInt(ge.substr(0,2),16)/255,xe="#"+ge.substr(6,2)+ge.substr(4,2)+ge.substr(2,2)),[xe,isNaN(Ee)?void 0:Ee]}function oe(ge){return p(ge.split(" "))}function ue(ge){let xe=i(ge,"coord"),Ee=[],Ae=[];xe.length===0&&(xe=i(ge,"gx:coord"));for(let Se=0;Se<xe.length;Se++)Ee.push(oe(g(xe[Se])));const fe=i(ge,"when");for(let Se=0;Se<fe.length;Se++)Ae.push(g(fe[Se]));return{coords:Ee,times:Ae}}function de(ge){let xe,Ee,Ae,fe,Se,we=[],De=[];if(a(ge,"MultiGeometry"))return de(a(ge,"MultiGeometry"));if(a(ge,"MultiTrack"))return de(a(ge,"MultiTrack"));if(a(ge,"gx:MultiTrack"))return de(a(ge,"gx:MultiTrack"));for(Ae=0;Ae<Y.length;Ae++)if(Ee=i(ge,Y[Ae]),Ee){for(fe=0;fe<Ee.length;fe++)if(xe=Ee[fe],Y[Ae]==="Point")we.push({type:"Point",coordinates:b(g(a(xe,"coordinates")))});else if(Y[Ae]==="LineString")we.push({type:"LineString",coordinates:P(g(a(xe,"coordinates")))});else if(Y[Ae]==="Polygon"){const Re=i(xe,"LinearRing"),$e=[];for(Se=0;Se<Re.length;Se++)$e.push(P(g(a(Re[Se],"coordinates"))));we.push({type:"Polygon",coordinates:$e})}else if(Y[Ae]==="Track"||Y[Ae]==="gx:Track"){const Re=ue(xe);we.push({type:"LineString",coordinates:Re.coords}),Re.times.length&&De.push(Re.times)}}return{geoms:we,coordTimes:De}}function Me(ge){let xe=de(ge),Ee,Ae={},fe=g(a(ge,"name")),Se=g(a(ge,"address")),we=g(a(ge,"styleUrl")),De=g(a(ge,"description")),Re=a(ge,"TimeSpan"),$e=a(ge,"TimeStamp"),Oe=a(ge,"ExtendedData"),it=a(ge,"LineStyle"),Ye=a(ge,"PolyStyle"),rt=a(ge,"visibility");if(!xe.geoms.length)return[];if(fe&&(Ae.name=fe),Se&&(Ae.address=Se),we){we[0]!=="#"&&(we="#"+we),Ae.styleUrl=we,j[we]&&(Ae.styleHash=j[we]),H[we]&&(Ae.styleMapHash=H[we],Ae.styleHash=j[H[we].normal]);const It=U[Ae.styleHash];if(It){it||(it=a(It,"LineStyle")),Ye||(Ye=a(It,"PolyStyle"));const at=a(It,"IconStyle");if(at){const je=a(at,"Icon");if(je){const Ht=g(a(je,"href"));Ht&&(Ae.icon=Ht)}}}}if(De&&(Ae.description=De),Re){const It=g(a(Re,"begin")),at=g(a(Re,"end"));Ae.timespan={begin:It,end:at}}if($e&&(Ae.timestamp=g(a($e,"when"))),it){const It=ie(g(a(it,"color"))),at=It[0],je=It[1],Ht=parseFloat(g(a(it,"width")));at&&(Ae.stroke=at),isNaN(je)||(Ae["stroke-opacity"]=je),isNaN(Ht)||(Ae["stroke-width"]=Ht)}if(Ye){const It=ie(g(a(Ye,"color"))),at=It[0],je=It[1],Ht=g(a(Ye,"fill")),Wt=g(a(Ye,"outline"));at&&(Ae.fill=at),isNaN(je)||(Ae["fill-opacity"]=je),Ht&&(Ae["fill-opacity"]=Ht==="1"?Ae["fill-opacity"]||1:0),Wt&&(Ae["stroke-opacity"]=Wt==="1"?Ae["stroke-opacity"]||1:0)}if(Oe){const It=i(Oe,"Data"),at=i(Oe,"SimpleData");for(Ee=0;Ee<It.length;Ee++)Ae[It[Ee].getAttribute("name")]=g(a(It[Ee],"value"));for(Ee=0;Ee<at.length;Ee++)Ae[at[Ee].getAttribute("name")]=g(at[Ee])}rt&&(Ae.visibility=g(rt)),xe.coordTimes.length&&(Ae.coordTimes=xe.coordTimes.length===1?xe.coordTimes[0]:xe.coordTimes);const Ie={type:"Feature",geometry:xe.geoms.length===1?xe.geoms[0]:{type:"GeometryCollection",geometries:xe.geoms},properties:Ae};return o(ge,"id")&&(Ie.id=o(ge,"id")),[Ie]}return $},gpx:function(N){let $,j=i(N,"trk"),U=i(N,"rte"),H=i(N,"wpt"),Y=k(),ae;for($=0;$<j.length;$++)ae=ie(j[$]),ae&&Y.features.push(ae);for($=0;$<U.length;$++)ae=oe(U[$]),ae&&Y.features.push(ae);for($=0;$<H.length;$++)Y.features.push(ue(H[$]));function ee(ge,xe){for(let Ee=0;Ee<xe;Ee++)ge.push(null);return ge}function G(ge,xe){const Ee=i(ge,xe),Ae=[],fe=[],Se=[],we=Ee.length;if(we<2)return{};for(let De=0;De<we;De++){const Re=I(Ee[De]);Ae.push(Re.coordinates),Re.time&&fe.push(Re.time),(Re.heartRate||Se.length)&&(Se.length||ee(Se,De),Se.push(Re.heartRate||null))}return{line:Ae,times:fe,heartRates:Se}}function ie(ge){let xe=i(ge,"trkseg"),Ee=[],Ae=[],fe=[],Se;for(let De=0;De<xe.length;De++)if(Se=G(xe[De],"trkpt"),Se&&(Se.line&&Ee.push(Se.line),Se.times&&Se.times.length&&Ae.push(Se.times),fe.length||Se.heartRates&&Se.heartRates.length)){if(!fe.length)for(let Re=0;Re<De;Re++)fe.push(ee([],Ee[Re].length));Se.heartRates&&Se.heartRates.length?fe.push(Se.heartRates):fe.push(ee([],Se.line.length||0))}if(Ee.length===0)return;const we=Me(ge);return x(we,de(a(ge,"extensions"))),Ae.length&&(we.coordTimes=Ee.length===1?Ae[0]:Ae),fe.length&&(we.heartRates=Ee.length===1?fe[0]:fe),{type:"Feature",properties:we,geometry:{type:Ee.length===1?"LineString":"MultiLineString",coordinates:Ee.length===1?Ee[0]:Ee}}}function oe(ge){const xe=G(ge,"rtept");if(!xe.line)return;const Ee=Me(ge);return x(Ee,de(a(ge,"extensions"))),{type:"Feature",properties:Ee,geometry:{type:"LineString",coordinates:xe.line}}}function ue(ge){const xe=Me(ge);return x(xe,v(ge,["sym"])),{type:"Feature",properties:xe,geometry:{type:"Point",coordinates:I(ge).coordinates}}}function de(ge){const xe={};if(ge){const Ee=a(ge,"line");if(Ee){const Ae=g(a(Ee,"color")),fe=parseFloat(g(a(Ee,"opacity"))),Se=parseFloat(g(a(Ee,"width")));Ae&&(xe.stroke=Ae),isNaN(fe)||(xe["stroke-opacity"]=fe),isNaN(Se)||(xe["stroke-width"]=Se*96/25.4)}}return xe}function Me(ge){const xe=v(ge,["name","cmt","desc","type","time","keywords"]),Ee=i(ge,"link");Ee.length&&(xe.links=[]);for(let Ae=0,fe;Ae<Ee.length;Ae++)fe={href:o(Ee[Ae],"href")},x(fe,v(Ee[Ae],["text","type"])),xe.links.push(fe);return xe}return Y}}})(),Px=e=>{const[t,r]=Q.useState(),[n,i]=Q.useState([]),o=l=>{try{i([]);const c=new DOMParser().parseFromString(l,"application/xml");c.querySelector("metadata")?.childNodes.forEach(v=>{let x=v.textContent;const b=v.nodeName;if(v.nodeName==="link"&&(x=v.getAttribute("href")??""),x?.trim().length){const P={title:b,value:x,id:new Date().getTime()};i(I=>[...I,P])}});const g=rU.gpx(c);r(g)}catch(a){console.log(a)}};return Q.useEffect(()=>{e.data&&o(e.data)},[e.data]),{geojson:t,metadata:n}};Px.defaultProps={data:void 0};try{Px.displayName="useGpx",Px.__docgenInfo={description:"useGpx hook converts GPX data to GeoJSON",displayName:"useGpx",props:{data:{defaultValue:{value:"undefined"},description:"a string containing GPX data that is supposed to be parsed and converted to GeoJSON by this hook",name:"data",required:!1,type:{name:"string | undefined"}}}}}catch{}const Ix=e=>{const t=la({mapId:e.mapId,waitForLayer:e.layerId}),r=Q.useRef(new h2.Popup({closeButton:!1,closeOnClick:!0}));return Q.useEffect(()=>{!t.map||!e.layerId||t.map.on("mouseenter",e.layerId,n=>{if(!t.map)return;const i=n?.features?.[0].geometry.coordinates.slice();let o="";if(n?.features?.[0]&&typeof e.getPopupContent=="function"&&(o=e.getPopupContent(n.features[0])),i?.[0]){for(;Math.abs(n.lngLat.lng-i[0])>180;)i[0]+=n.lngLat.lng>i[0]?360:-360;r.current.setLngLat(i).setHTML(o).addTo(t.map.map)}},t.componentId)},[t.map]),Z.jsx(Z.Fragment,{})};Ix.defaultProps={mapId:void 0};try{Ix.displayName="LayerHoverPopup",Ix.__docgenInfo={description:"useLayerHoverPopup hook registers a mouseenter event to display feature properties in a MapLibre popup if a feature on the configured layer is hovered",displayName:"LayerHoverPopup",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of an existing layer in the mapLibre instance this event will be registered to",name:"layerId",required:!1,type:{name:"string | undefined"}},getPopupContent:{defaultValue:null,description:"",name:"getPopupContent",required:!0,type:{name:"(feature: Feature<Geometry, GeoJsonProperties>) => string"}}}}}catch{}const LB=e=>{const t=Px({data:e.gpxData}),r=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=Q.useRef("gpx-viewer-source-"+Bu()),i=Q.useRef("importer-layer-lines-"+Bu()),o=Q.useRef("importer-layer-points-"+Bu());return Ix({layerId:o.current,getPopupContent:l=>l?.properties?.name}),EP({mapId:e.mapId,sourceId:n.current,source:{type:"geojson",data:t.geojson||Uf([])}}),qf({layerId:i.current,options:{type:"line",paint:{"line-width":4,"line-color":"rgba(212, 55, 23,0.5)"},source:n.current},insertBeforeLayer:e.insertBeforeLayer}),qf({layerId:o.current,options:{type:"circle",paint:{"circle-color":"rgba(72, 77, 99,0.5)","circle-radius":7},filter:["==","$type","Point"],source:n.current},insertBeforeLayer:e.insertBeforeLayer}),Q.useEffect(()=>{if(!r.map||!t.geojson)return;typeof e.onParseGpxData=="function"&&e.onParseGpxData(t);const l=yc(t.geojson);r.map.map.fitBounds(l)},[t]),Z.jsx(Z.Fragment,{})};try{LB.displayName="MlGpxViewer",LB.__docgenInfo={description:"MlGpxViewer visualizes a given GPX Track on the map",displayName:"MlGpxViewer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapHook",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance",name:"idPrefix",required:!1,type:{name:"string | undefined"}},gpxData:{defaultValue:null,description:"",name:"gpxData",required:!0,type:{name:"string | undefined"}},onParseGpxData:{defaultValue:null,description:"",name:"onParseGpxData",required:!0,type:{name:"(arg0: { geojson: FeatureCollection<Geometry, GeoJsonProperties> | undefined; metadata: MetadataType[]; }) => void"}}}}}catch{}const h2e=ft.createContext({}),p2e=h2e.Provider,RB=({children:e})=>{const[t,r]=Q.useState({type:"FeatureCollection",features:[]}),i={data:t,setData:r,getEmptyFeatureCollection:()=>({type:"FeatureCollection",features:[]})};return Z.jsx(p2e,{value:i,children:e})};try{RB.displayName="GeoJsonProvider",RB.__docgenInfo={description:"",displayName:"GeoJsonProvider",props:{}}}catch{}const S3=()=>{const e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e?.layers?e.layers:"[]"),e},p4=S3(),DB=e=>{const t=Q.useContext(Vh),r=Q.useRef(!1),n=Q.useRef(null),[i,o]=Q.useState(void 0),l=Q.useRef({}),a=Q.useRef((e.idPrefix?e.idPrefix:"MlShareMapState-")+Bu()),c=p2({watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),p=Q.useRef(!1),g=Q.useRef(null),v=Q.useRef({viewport:{center:!1,bearing:!1,pitch:!1,zoom:!1},layers:{...l}}),x=Q.useRef({}),b=Q.useCallback(()=>{if(!e.active)return;const k=[];for(const F in c.layers)k.push({id:c.layers[F]?.id,type:c.layers[F]?.type,visible:c.layers[F]?.visible});P();const M=new URLSearchParams({...S3(),...x.current,layers:JSON.stringify(k)});JSON.parse(Object.fromEntries(M).layers).forEach(F=>{l.current[F.id]=!1});const O=new URLSearchParams(window.location.search);M.toString()!==O.toString()&&window.history.pushState({...x.current},document.title,"?"+M.toString())},[c.layers,e.active]);Q.useEffect(()=>{const k=a.current;return x.current=S3(),()=>{n.current&&(n.current.cleanup(k),n.current=null),r.current=!1}},[]),Q.useEffect(()=>{n.current&&b()},[b]),Q.useEffect(()=>{if(!n.current)return;const k=b;return n.current.on("moveend",k,a.current),()=>{n.current?.map.off("moveend",k)}},[b,i]),Q.useEffect(()=>{!t?.mapExists?.(e.mapId)||r.current||(r.current=!0,n.current=t.getMap(e.mapId),o(n.current),x.current.lat&&x.current.lng&&I())},[t.mapIds,t,e.mapId,e.active]),Q.useEffect(()=>{if(c?.layers?.length){typeof g.current>"u"&&(g.current=null,p4?.layers?.forEach(k=>{g.current?.[k.id]&&(g.current[k.id]=!1)}));for(const k in g.current){let M=!0;if(g.current[k]===!1&&(M=!1),M)return}p4.layers&&p4.layers.forEach(k=>{n.current?.map.getLayer(k.id)&&g.current?.[k.id]===!1&&(g.current[k.id]=!0,n.current.map?.getLayer(k.id)?.setLayoutProperty("visibility",k.visible?"visible":"none"))})}},[c.layers,e.mapId,e.active]),Q.useEffect(()=>{i&&c.layers&&(e.active||i.cleanup(a.current))},[e.active,i,c.layers]);const P=()=>{x.current.lat=n.current?.map.getCenter().lat,x.current.lng=n.current?.map.getCenter().lng,x.current.zoom=n.current?.map.getZoom(),x.current.bearing=n.current?.map.getBearing(),x.current.pitch=n.current?.map.getPitch()},I=()=>{v.current.viewport.center||(v.current.viewport.center=!0,x.current.lng&&x.current.lat&&n.current?.map.setCenter([x.current.lng,x.current.lat]),x.current.zoom&&n.current?.map.setZoom(x.current.zoom),x.current.bearing&&n.current?.map.setBearing(x.current.bearing),x.current.pitch&&n.current?.map.setPitch(x.current.pitch)),p.current=!0};return window.onpopstate=k=>{k.state&&k.state.lng&&k.state.lat&&k.state.zoom&&n.current?.map.easeTo({zoom:k.state.zoom,center:[k.state.lng,k.state.lat]})},Z.jsx(Z.Fragment,{})};try{DB.displayName="MlShareMapState",DB.__docgenInfo={description:"",displayName:"MlShareMapState",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"",name:"idPrefix",required:!1,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function m2e(e,t){const r=(l,a,c,p,g)=>{const v=zl([[l,a],[p,g]]),x=Ohe(v,5,{units:"meters"}),b=x.geometry.coordinates[0][0],P=x.geometry.coordinates[0][1],I=x.geometry.coordinates[1][0],k=x.geometry.coordinates[1][1];return O2([[[l,a],[p,g],[I,k],[b,P],[l,a]]],{height:c*t})},n=(l,a,c)=>l*(1-c)+a*c,i=[];return e.line.geometry.coordinates.forEach((l,a)=>{if(e.line.geometry.coordinates[a+1]&&Array.isArray(l)){let p=~~(F2([l[0],l[1]],[e.line.geometry.coordinates[a+1][0],e.line.geometry.coordinates[a+1][1]],{units:"kilometers"})*1e3/10);p=p<1?1:p;for(let g=0;g<p;g++){const v=n(e.line.geometry.coordinates[a][0],e.line.geometry.coordinates[a+1][0],g/p),x=n(e.line.geometry.coordinates[a][1],e.line.geometry.coordinates[a+1][1],g/p),b=n(e.line.geometry.coordinates[a][2]-e.min,e.line.geometry.coordinates[a+1][2]-e.min,g/p),P=n(e.line.geometry.coordinates[a][0],e.line.geometry.coordinates[a+1][0],(g+1)/p),I=n(e.line.geometry.coordinates[a][1],e.line.geometry.coordinates[a+1][1],(g+1)/p),k=r(v,x,b,P,I);i.push(k)}}}),Uf(i)}const NB=["interpolate",["linear"],["get","height"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"yellow"],OB=e=>{const t=Q.useRef("elevationprofile-"+Bu()),r=Q.useRef("elevationprofile-layer-"+Bu()),n=e.elevationFactor||1,i=Q.useMemo(()=>{if(!e?.geojson?.features)return;const a=e.geojson.features?.find(v=>v.geometry.type==="LineString");if(!a||!a.geometry)return;const c=a.geometry.coordinates.map(v=>v[2]),p=Math.min(...c);let g=Math.max(...c)-p;return g=g===0?1:g,{max:g,min:p,line:a}},[e.geojson]),o=Q.useMemo(()=>i?["interpolate",["linear"],["get","height"],0,"rgb(0,255,55)",i.max*n,"rgb(255,0,0)"]:NB,[i,e.elevationFactor]),l=Q.useMemo(()=>!e.geojson?.features||!i?void 0:m2e(i,n),[i,n]);return EP({mapId:e.mapId,sourceId:t.current,source:{type:"geojson",data:l||Uf([])}}),qf({layerId:r.current,options:{source:t.current,type:"fill-extrusion",paint:{"fill-extrusion-height":["get","height"],"fill-extrusion-opacity":.9,"fill-extrusion-color":o||NB}},insertBeforeLayer:e.insertBeforeLayer}),Z.jsx(Z.Fragment,{})};try{OB.displayName="MlSpatialElevationProfile",OB.__docgenInfo={description:"",displayName:"MlSpatialElevationProfile",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties> | geojson | undefined"}},idPrefix:{defaultValue:null,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance",name:"idPrefix",required:!1,type:{name:"string | undefined"}},elevationFactor:{defaultValue:null,description:"Number describes the factor of the height of the elevation",name:"elevationFactor",required:!1,type:{name:"number | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}}}catch{}const Xg=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Q.useRef(e.layerId||"MlVectorTileLayer-"+t.componentId),n=Q.useRef({}),i=Q.useRef({}),o=Q.useRef(!1),l=Q.useCallback(()=>{t.map&&(o.current=!0,t.map.map.getSource(r.current)&&t.cleanup(),t.map.map.getSource(r.current)||t.map.addSource(r.current,{type:"vector",tiles:[e.url||""],attribution:"",minzoom:0,maxzoom:14,...e.sourceOptions},t.componentId),e.layers.forEach(c=>{t.map&&(t.map.addLayer({source:r.current,minzoom:0,maxzoom:22,layout:{},paint:{"line-opacity":.5,"line-color":"rgb(80, 80, 80)","line-width":2},...c},e.insertBeforeLayer,t.componentId),n.current[c.id]=JSON.stringify(c.paint),i.current[c.id]=JSON.stringify(c.layout),t.map.on("styledata",()=>{o.current&&!t.map?.map.getSource(r.current)&&(console.log("Recreate Layer "+r.current),l())},t.componentId))}))},[t.map,e]),a=Q.useCallback(()=>{o.current&&e.layers.forEach(c=>{if(t.map&&t.map.map.getLayer(c.id)){const p=JSON.stringify(c.paint);if(p!==n.current[c.id])for(const v in c.paint)t.map.setPaintProperty(c.id,v,c.paint[v]);n.current[c.id]=p;const g=JSON.stringify(c.layout);if(g!==i.current[c.id])for(const v in c.layout)t.map.setLayoutProperty(c.id,v,c.layout[v]);i.current[c.id]=g}})},[t.map,e.layers]);return Q.useEffect(()=>{o.current||l()},[l]),Q.useEffect(()=>{!t.map||!o.current||l()},[e.layers.length,t.map]),Q.useEffect(()=>{!t.map||!o.current||a()},[e.layers,t.map]),Z.jsx(Z.Fragment,{})};try{Xg.displayName="MlVectorTileLayer",Xg.__docgenInfo={description:`Adds a vector-tile source and 0...n vector-tile-layers to the MapLibre instance referenced by
props.mapId`,displayName:"MlVectorTileLayer",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"VectorSourceSpecification | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | undefined"}},layers:{defaultValue:null,description:"",name:"layers",required:!0,type:{name:"ExtendedLayerSpecification[]"}}}}}catch{}const FB=e=>{const[t,r]=Q.useState(),n=la({mapId:e.mapId}),i=Q.useRef(e.mlGeoJsonLayerProps?.layerId||"MlOgcApiFeature-"+n.componentId),o=()=>{const l=new URL(e.ogcApiUrl);if(e.ogcApiFeatureParams&&Object.entries(e.ogcApiFeatureParams).forEach(([a,c])=>{c!=null&&l.searchParams.append(a,c.toString())}),e.reloadFeaturesOnMapMove){const a=n?.map?.getBounds().getSouthWest(),c=n?.map?.getBounds().getNorthEast(),p=`${a?.lng},${a?.lat},${c?.lng},${c?.lat}`;l.searchParams.append("bbox",p)}return l.toString()};return Q.useEffect(()=>{if(!n.map)return;const l=()=>{const a=o();fetch(a).then(c=>{if(!c.ok)throw new Error("Error fetching OGC features");return c.json()}).then(c=>{r(c)}).catch(c=>{console.log(c),r(void 0)})};return l(),e.reloadFeaturesOnMapMove&&n.map.on("moveend",l),()=>{n?.map?.off&&n.map.off("moveend",l)}},[n.map,e.ogcApiFeatureParams,e.ogcApiUrl]),Q.useEffect(()=>{!n.map||!n.map.map.style.getLayer(i.current)||(e.visible?n.map.map.setLayoutProperty(i.current,"visibility","visible"):n.map.map.setLayoutProperty(i.current,"visibility","none"))},[e.visible,n.map]),Z.jsx(Z.Fragment,{children:t&&Z.jsx(zu,{geojson:t,layerId:i.current,...e.mlGeoJsonLayerProps})})};try{FB.displayName="MlOgcApiFeatures",FB.__docgenInfo={description:"",displayName:"MlOgcApiFeatures",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},ogcApiUrl:{defaultValue:null,description:"The url of OGC API",name:"ogcApiUrl",required:!0,type:{name:"URL"}},ogcApiFeatureParams:{defaultValue:null,description:"The additional query parameters of OGC API",name:"ogcApiFeatureParams",required:!1,type:{name:"OgcApiFeaturesParamsTypes | undefined"}},reloadFeaturesOnMapMove:{defaultValue:null,description:"Fetches the features everytime (based on the current bbox) when the map gets moved",name:"reloadFeaturesOnMapMove",required:!1,type:{name:"boolean | undefined"}},mlGeoJsonLayerProps:{defaultValue:null,description:"Geojson Layer props. But omit 'geojson' because it gets set from the OGC API Feature call",name:"mlGeoJsonLayerProps",required:!1,type:{name:'Omit<MlGeoJsonLayerProps, "geojson"> | undefined'}}}}}catch{}const BB=e=>{const t=Q.useContext(Vh),r=Q.useRef(!1),n=Q.useRef(void 0),i=Q.useRef("MlWmsFeatureInfoPopup-"+Bu());return Q.useEffect(()=>{const o=i.current;return()=>{n.current&&(n.current.cleanup(o),n.current=void 0),r.current=!1}},[]),Q.useEffect(()=>{!t.mapExists(e.mapId)||r.current||(r.current=!0,n.current=t.getMap(e.mapId),n.current.setCenter([7.132122000552613,50.716405378037706]))},[t.mapIds,t,e.mapId]),Z.jsx(Z.Fragment,{})};try{BB.displayName="MlWmsFeatureInfoPopup",BB.__docgenInfo={description:"TODO: Add short & useful description",displayName:"MlWmsFeatureInfoPopup",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const g2e={urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:"256",height:"256",styles:""}},kx=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Q.useRef(!1),n=Q.useRef(e.layerId||"MlWmsLayer-"+t.componentId),i=Q.useMemo(()=>{let l,a=e.url;e.url.indexOf("?")!==-1&&(l=e.url.split("?"),a=l[0]);const c=new URLSearchParams(l?.[1]),p={...g2e.urlParameters,...Object.fromEntries(c),...e.urlParameters},g=new URLSearchParams(p),v=decodeURIComponent(g.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");return a+"?"+v},[e.urlParameters,e.url]),o=Q.useCallback(()=>{t.map&&(r.current=!0,t.map.map.getLayer(n.current)&&t.cleanup(),t.map.addSource(n.current,{type:"raster",tiles:[i],tileSize:256,attribution:e.attribution??"",...e.sourceOptions},t.componentId),t.map.addLayer({id:n.current,type:"raster",source:n.current,...e.layerOptions},e.insertBeforeLayer,t.componentId),t.map.on("styledata",()=>{r.current&&!t.map?.map.getLayer(n.current)&&(console.log("Recreate Layer "+n.current),o())},t.componentId),e.visible===!1&&t.map.map.setLayoutProperty(n.current,"visibility","none"))},[t.map,e,i]);return Q.useEffect(()=>{r.current||o()},[o]),Q.useEffect(()=>{if(!t.map||!t.map?.map?.style?.sourceCaches?.[n.current]||!r.current)return;const l=t.map.map.getSource(n.current);l.tiles=[i],t.map.map.style.sourceCaches[n.current].clearTiles(),t.map.map.style.sourceCaches[n.current].update(t.map.map.transform),t.map.map.triggerRepaint()},[t.map,i]),Q.useEffect(()=>{!t.map||!r.current||(e.visible===void 0||e.visible?t.map.map.setLayoutProperty(n.current,"visibility","visible"):t.map.map.setLayoutProperty(n.current,"visibility","none"))},[e.visible,t.map]),Z.jsx(Z.Fragment,{})};try{kx.displayName="MlWmsLayer",kx.__docgenInfo={description:"Adds a WMS raster source & layer to the maplibre-gl instance",displayName:"MlWmsLayer",props:{urlParameters:{defaultValue:null,description:"",name:"urlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:null,description:"",name:"attribution",required:!1,type:{name:"string | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"RasterSourceSpecification | undefined"}},layerOptions:{defaultValue:null,description:"",name:"layerOptions",required:!1,type:{name:"RasterLayerSpecification | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}}}}}catch{}/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Yi=e=>e!==void 0,nU=(e,t,r)=>t in e?e[t]:e[t]=r;const $0={ELEMENT:1,TEXT:3,CDATA_SECTION:4};class y2e{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return aw(t,r).join("")}}function aw(e,t){return iU(e,t,[]).join("")}function iU(e,t,r){if(e.nodeType===$0.CDATA_SECTION||e.nodeType===$0.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)iU(n,t,r)}return r}function v2e(e,t,r,n){for(var i=b2e(t);i;i=_2e(i)){var o=i.namespaceURI||null,l=e[o];if(Yi(l)){var a=l[i.localName];Yi(a)&&a.call(n,i,r)}}}function b2e(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==$0.ELEMENT;)t=t.nextSibling;return t}function _2e(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==$0.ELEMENT;)t=t.nextSibling;return t}function Vl(e,t,r){return x2e(e,t,r)}function x2e(e,t,r){var n=Yi(r)?r:{},i,o;for(i=0,o=e.length;i<o;++i)n[e[i]]=t;return n}function aU(e,t){return(function(r,n){var i=e.call(Yi(t)?t:this,r,n);if(Yi(i)){var o=n[n.length-1];o.push(i)}})}function El(e,t,r,n,i){return n.push(e),v2e(t,r,n,i),n.pop()}function Zn(e,t,r){return(function(n,i){let o=e.call(Yi(r)?r:this,n,i);if(Yi(o)){var l=i[i.length-1],a=Yi(t)?t:n.localName;l[a]=o}})}function Du(e,t,r){return(function(n,i){var o=e.call(Yi(r)?r:this,n,i);if(Yi(o)){var l=i[i.length-1],a=Yi(t)?t:n.localName,c=nU(l,a,[]);c.push(o)}})}const w2e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function S2e(e){return e.replace(w2e,"")}function Bp(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Yi(t[1])||!1}function Fg(e){return Df(aw(e,!1))}function Df(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function m4(e){return Ax(aw(e,!1))}function Ax(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Sa(e){return S2e(aw(e,!1))}const C2e="http://www.w3.org/1999/xlink";function jk(e){return e.getAttributeNS(C2e,"href")}function E2e(e,t){return El({},J2e,e,t)}function oU(e){return[Df(e.getAttribute("minx")),Df(e.getAttribute("miny")),Df(e.getAttribute("maxx")),Df(e.getAttribute("maxy"))]}function T2e(e,t){const r=oU(e),n=[Df(e.getAttribute("resx")),Df(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function P2e(e,t){const r=oU(e);if(!(!Yi(r[0])||!Yi(r[1])||!Yi(r[2])||!Yi(r[3])))return r}function I2e(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function k2e(e,t){const r=El({},Q2e,e,t);if(!Yi(r))return;const n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,l=r.northBoundLatitude;if(!(!Yi(n)||!Yi(i)||!Yi(o)||!Yi(l)))return[n,i,o,l]}function A2e(e,t){return El({},H2e,e,t)}function M2e(e,t){return El({},W2e,e,t)}function L2e(e,t){return El({},X2e,e,t)}function R2e(e,t){return El({},Y2e,e,t)}function D2e(e,t){return El({},Z2e,e,t)}function N2e(e,t){return El([],K2e,e,t)}function O2e(e,t){const r=Bp(e.getAttribute("queryable"));return El({queryable:Yi(r)?r:!1},uU,e,t)}function F2e(e,t){var r=t[t.length-1];const n=El({},uU,e,t);if(!Yi(n))return;let i=Bp(e.getAttribute("queryable"));Yi(i)||(i=r.queryable),n.queryable=Yi(i)?i:!1;let o=Ax(e.getAttribute("cascaded"));Yi(o)||(o=r.cascaded),n.cascaded=o;let l=Bp(e.getAttribute("opaque"));Yi(l)||(l=r.opaque),n.opaque=Yi(l)?l:!1;let a=Bp(e.getAttribute("noSubsets"));Yi(a)||(a=r.noSubsets),n.noSubsets=Yi(a)?a:!1;let c=Df(e.getAttribute("fixedWidth"));Yi(c)||(c=r.fixedWidth),n.fixedWidth=c;let p=Df(e.getAttribute("fixedHeight"));Yi(p)||(p=r.fixedHeight),n.fixedHeight=p;const g=["Style","CRS","AuthorityURL"];for(let x=0,b=g.length;x<b;x++){const P=g[x],I=r[P];if(Yi(I)){let k=nU(n,P,[]);k=k.concat(I),n[P]=k}}const v=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let x=0,b=v.length;x<b;x++){const P=v[x],I=n[P];if(!Yi(I)){const k=r[P];n[P]=k}}return n}function B2e(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Bp(e.getAttribute("multipleValues")),nearestValue:Bp(e.getAttribute("nearestValue")),current:Bp(e.getAttribute("current")),values:Sa(e)}}function Gf(e,t){return El({},awe,e,t)}function z2e(e,t){return El({},ewe,e,t)}function j2e(e,t){return El({},rwe,e,t)}function q2e(e,t){return El({},nwe,e,t)}function g4(e,t){return El({},twe,e,t)}function sU(e,t){var r=Gf(e,t);if(Yi(r)){const n=[Ax(e.getAttribute("width")),Ax(e.getAttribute("height"))];return r.size=n,r}}function $2e(e,t){var r=Gf(e,t);if(Yi(r))return r.name=e.getAttribute("name"),r}function V2e(e,t){var r=Gf(e,t);if(Yi(r))return r.type=e.getAttribute("type"),r}function U2e(e,t){return El({},iwe,e,t)}function lU(e,t){return El([],owe,e,t)}const Ul=[null,"http://www.opengis.net/wms"],G2e=Vl(Ul,{Service:Zn(M2e),Capability:Zn(A2e)}),H2e=Vl(Ul,{Request:Zn(z2e),Exception:Zn(N2e),Layer:Zn(O2e)}),W2e=Vl(Ul,{Name:Zn(Sa),Title:Zn(Sa),Abstract:Zn(Sa),KeywordList:Zn(lU),OnlineResource:Zn(jk),ContactInformation:Zn(L2e),Fees:Zn(Sa),AccessConstraints:Zn(Sa),LayerLimit:Zn(m4),MaxWidth:Zn(m4),MaxHeight:Zn(m4)}),X2e=Vl(Ul,{ContactPersonPrimary:Zn(R2e),ContactPosition:Zn(Sa),ContactAddress:Zn(D2e),ContactVoiceTelephone:Zn(Sa),ContactFacsimileTelephone:Zn(Sa),ContactElectronicMailAddress:Zn(Sa)}),Y2e=Vl(Ul,{ContactPerson:Zn(Sa),ContactOrganization:Zn(Sa)}),Z2e=Vl(Ul,{AddressType:Zn(Sa),Address:Zn(Sa),City:Zn(Sa),StateOrProvince:Zn(Sa),PostCode:Zn(Sa),Country:Zn(Sa)}),K2e=Vl(Ul,{Format:aU(Sa)}),uU=Vl(Ul,{Name:Zn(Sa),Title:Zn(Sa),Abstract:Zn(Sa),KeywordList:Zn(lU),CRS:Du(Sa),SRS:Du(Sa),EX_GeographicBoundingBox:Zn(k2e),LatLonBoundingBox:Zn(P2e),BoundingBox:Du(T2e),Dimension:Du(B2e),Attribution:Zn(E2e),AuthorityURL:Du($2e),Identifier:Du(Sa),MetadataURL:Du(V2e),DataURL:Du(Gf),FeatureListURL:Du(Gf),Style:Du(U2e),MinScaleDenominator:Zn(Fg),MaxScaleDenominator:Zn(Fg),ScaleHint:Zn(I2e),Layer:Du(F2e)}),J2e=Vl(Ul,{Title:Zn(Sa),OnlineResource:Zn(jk),LogoURL:Zn(sU)}),Q2e=Vl(Ul,{westBoundLongitude:Zn(Fg),eastBoundLongitude:Zn(Fg),southBoundLatitude:Zn(Fg),northBoundLatitude:Zn(Fg)}),ewe=Vl(Ul,{GetCapabilities:Zn(g4),GetMap:Zn(g4),GetFeatureInfo:Zn(g4)}),twe=Vl(Ul,{Format:Du(Sa),DCPType:Du(j2e)}),rwe=Vl(Ul,{HTTP:Zn(q2e)}),nwe=Vl(Ul,{Get:Zn(Gf),Post:Zn(Gf)}),iwe=Vl(Ul,{Name:Zn(Sa),Title:Zn(Sa),Abstract:Zn(Sa),LegendURL:Du(sU),StyleSheetURL:Zn(Gf),StyleURL:Zn(Gf)}),awe=Vl(Ul,{Format:Zn(Sa),OnlineResource:Zn(jk)}),owe=Vl(Ul,{Keyword:aU(Sa)});class swe{constructor(t,r){!r&&typeof window<"u"&&(r=window.DOMParser),this.version=void 0,this._parser=new y2e(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==$0.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),El({version:this.version},G2e,t,[])||null}}function cU(e){const[t,r]=Q.useState(),[n,i]=Q.useState(e.url),[o,l]=Q.useState(""),[a,c]=Q.useState(),[p,g]=Q.useState(),v=()=>{r(void 0),c(void 0),l("")};return Q.useEffect(()=>{if(v(),g(void 0),!n)return;let x,b=n;n.indexOf("?")!==-1&&(x=n.split("?"),b=x[0]);const P=new URLSearchParams(x?.[1]),I={...Object.fromEntries(P),...e.urlParameters},k=new URLSearchParams(I),M=decodeURIComponent(k.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(b+"?"+M).then(O=>{if(O.ok)return O.text();throw Error(O.statusText+" ("+O.status+" - "+O.type+")")}).then(O=>{c(new swe(O,window.DOMParser).toJSON())}).catch(O=>{v(),console.log(O),g(O.message)})},[n,e.urlParameters]),Q.useEffect(()=>{a?.Service&&(l(a.Capability?.Request?.GetMap?.DCPType?.[0]?.HTTP?.Get?.OnlineResource),r(a.Capability?.Request?.GetFeatureInfo?.DCPType?.[0]?.HTTP?.Get?.OnlineResource))},[a]),{capabilities:a,getFeatureInfoUrl:t,wmsUrl:o,error:p,setUrl:i}}cU.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"}};const zB=Ei(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),jB=2*Math.PI*6378137/2,qB=function(e,t={enable:!0,decimal:1}){const r=e.lng,n=e.lat;let i=r*jB/180,o=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return o=o*jB/180,t.enable&&(i=Number(i.toFixed(t.decimal)),o=Number(o.toFixed(t.decimal))),[i,o]},lwe={mapId:void 0,url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"},wmsUrlParameters:{TRANSPARENT:"TRUE"},featureInfoEnabled:!0,zoomToExtent:!1,showDeleteButton:!1},C3=e=>{e={...lwe,...e};const{capabilities:t,error:r,setUrl:n,getFeatureInfoUrl:i,wmsUrl:o}=cU({urlParameters:e.urlParameters}),[l,a]=Q.useState(e?.config?.open||!1),[c,p]=Q.useState(e?.config?.visible||!0),[g,v]=Q.useState(!1),x=la({mapId:e?.mapId}),[b,P]=Q.useState(e?.config?.layers||[]),[I,k]=Q.useState(!1),[M,O]=Q.useState(),[F,N]=Q.useState(void 0);Q.useEffect(()=>{e.config||n(e.url)},[e.url]);const $=Q.useMemo(()=>e?.config?.wmsUrl||o,[e?.config?.wmsUrl,o]),j=Q.useMemo(()=>e?.config?.getFeatureInfoUrl||i,[e?.config?.getFeatureInfoUrl,i]),U=Q.useMemo(()=>t,[t]),H=Q.useMemo(()=>e?.name||e?.config?.name||U?.Service?.Title,[e?.name,e?.config?.name,U?.Service?.Title]),Y=Q.useMemo(()=>e?.setLayers&&e?.config?.layers||b,[e?.config?.layers,b]),ae=Q.useMemo(()=>e?.setLayers||P,[e?.setLayers,P]);Q.useEffect(()=>{e?.onConfigChange?.({layers:Y,getFeatureInfoUrl:j,wmsUrl:$,visible:c,open:l,name:H})},[Y,U,j,$,c,l,H]);const ee=Q.useMemo(()=>Y.filter(de=>de.visible&&de?.Attribution?.Title).map(de=>de?.Attribution?.Title).filter((de,Me,ge)=>ge.indexOf(de)===Me).join(" "),[Y]),G=function(){O(void 0),N(void 0)},ie=Q.useCallback(de=>{if(!x.map)return;G();const Me=x.map.unproject([de.point.x,de.point.y]),ge=Vc([Me.lng,Me.lat]),xe=ihe(ge,50,{units:"meters"}),Ee=xe&&yc(xe),Ae=Ee&&qB({lng:Ee[0],lat:Ee[1]}),fe=Ee&&qB({lng:Ee[2],lat:Ee[3]}),we={REQUEST:"GetFeatureInfo",BBOX:(Ae&&fe&&[Ae[0],Ae[1],fe[0],fe[1]])?.join(","),SERVICE:"WMS",INFO_FORMAT:U?.Capability?.Request?.GetFeatureInfo.Format.indexOf("text/html")!==-1?"text/html":"text/plain",FEATURE_COUNT:"10",LAYERS:Y.map(Ye=>Ye.visible&&Ye.queryable?Ye.Name:void 0).filter(Ye=>Ye),QUERY_LAYERS:Y.map(Ye=>Ye.visible&&Ye.queryable?Ye.Name:void 0).filter(Ye=>Ye),WIDTH:100,HEIGHT:100,srs:"EPSG:3857",CRS:"EPSG:3857",version:"1.3.0",X:50,Y:50,I:50,J:50,buffer:"50"};let De=j,Re;De?.indexOf?.("?")!==-1&&(Re=e?.url?.split("?")||e?.config?.wmsUrl?.split("?"),De=Re?.[0]);const $e=new URLSearchParams(Re?.[1]),Oe={...Object.fromEntries($e),...we},it=new URLSearchParams(Oe);fetch(e.url+"?"+it.toString()).then(Ye=>{if(!Ye.ok)throw new Error("FeatureInfo could not be fetched");return Ye.text()}).then(Ye=>{O(de.lngLat),N(Ye)}).catch(Ye=>console.log(Ye))},[U,j,e,x,Y]),oe=Q.useMemo(()=>(typeof e?.featureInfoActive<"u"&&e.featureInfoActive||I)&&Y?.some(de=>de.visible&&de.queryable)&&!!x.map,[e?.featureInfoActive,I,Y,x.map]);Q.useEffect(()=>{if(!oe){G();return}const de=ie;return x.map.map.on("click",de),()=>{x.map?.map.off?.("click",de)}},[oe,ie,x.map]),Q.useEffect(()=>{if(!U?.Service)return;let de=[];if(U?.Capability?.Layer?.CRS?.indexOf?.("EPSG:3857")===-1&&U?.Capability?.Layer?.CRS?.indexOf?.("CRS:84")===-1)console.log("MlWmsLoader ("+U.Service.Title+"): No WGS 84/Pseudo-Mercator support");else{console.log("MlWmsLoader ("+U.Service.Title+"): WGS 84/Pseudo-Mercator supported");let Me=U?.Capability?.Layer?.Layer.filter(ge=>!ge.Layer?.length).map((ge,xe)=>(xe===0&&(de=ge.EX_GeographicBoundingBox||ge?.LatLonBoundingBox||[]),{visible:U?.Capability?.Layer?.Layer?.length>2?xe>1:!0,Attribution:{Title:""},...(({CRS:Ee,...Ae})=>Ae)(ge)}));U?.Capability?.Layer?.Layer.forEach(ge=>{const xe=ge?.Layer?.filter(Ee=>Ee.CRS?.length).map((Ee,Ae)=>(Ae===0&&(de=Ee.EX_GeographicBoundingBox||Ee?.LatLonBoundingBox||[]),{visible:!1,Attribution:{Title:""},...(({CRS:fe,...Se})=>Se)(Ee)}));xe&&(Me=[...Me,...xe])}),ae(Me),e.zoomToExtent&&x?.map&&de.length>3&&x?.map.fitBounds([[de[0],de[1]],[de[2],de[3]]])}},[U,x.map]);const ue=Z.jsxs(zc,{secondaryAction:Z.jsxs(Z.Fragment,{children:[e.buttons,e.featureInfoEnabled&&Z.jsx(hc,{sx:{padding:"4px",marginTop:"-3px",marginRight:"4px",background:de=>Y?.some(Me=>Me.visible&&Me.queryable)?oe?de.palette.info.light:de.palette.grey[300]:"initial"},"aria-label":"featureinfo",onClick:()=>{typeof e?.setFeatureInfoActive=="function"?e.setFeatureInfoActive(de=>!de):k(de=>!de)},disabled:!Y?.some(de=>de.visible&&de.queryable),children:Z.jsx(zB,{})}),Z.jsx(hc,{edge:e.showDeleteButton?!1:"end",sx:{padding:"4px",marginTop:"-3px",...e.showDeleteButton?{marginRight:"4px"}:{}},"aria-label":"open",onClick:()=>a(de=>!de),children:l?Z.jsx(P$,{}):Z.jsx(dx,{})}),e.showDeleteButton&&Z.jsxs(Z.Fragment,{children:[Z.jsx(hc,{"aria-label":"delete",edge:"end",onClick:()=>{typeof e.onConfigChange=="function"&&v(!0)},sx:{padding:"4px",marginTop:"-3px"},children:Z.jsx(v1,{})}),g&&Z.jsx(my,{open:g,onConfirm:()=>{typeof e.onConfigChange=="function"&&e.onConfigChange(!1)},onCancel:()=>{v(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]})]}),sx:{paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"},children:[Z.jsx(S0,{sx:{minWidth:"30px"},children:Z.jsx(iy,{sx:{padding:0},checked:c,onClick:()=>{p(de=>!de)}})}),Z.jsx(Mc,{primary:H,variant:"layerlist"})]});return Z.jsxs(Z.Fragment,{children:[r&&Z.jsx(Eie,{children:Z.jsx(po,{children:r})}),$&&Z.jsxs(Z.Fragment,{children:[e.layerId&&e.sortable&&Z.jsx(Ex,{layerId:e.layerId,children:ue}),e.layerId&&!e.sortable&&ue,Z.jsxs(po,{sx:{display:l?"block":"none"},children:[Z.jsx(gd,{dense:!0,component:"div",disablePadding:!0,sx:{paddingLeft:"18px"},children:$&&Y?.map?.((de,Me)=>de?.Name?Z.jsxs(zc,{secondaryAction:Z.jsx(Z.Fragment,{children:de?.queryable&&Z.jsx(zB,{})}),children:[Z.jsx(S0,{sx:{minWidth:"30px"},children:Z.jsx(iy,{checked:de.visible,sx:{padding:0},onClick:()=>{const ge=[...Y];ge[Me].visible=!ge[Me].visible,ae([...ge])}})}),Z.jsx(Mc,{primary:de?.Title,variant:"layerlist"})]},de.Name+Me):Z.jsx(Z.Fragment,{}))}),$&&Y?.length&&Z.jsx(kx,{url:$,attribution:ee,visible:c,urlParameters:{...e.wmsUrlParameters,layers:Y?.filter?.(de=>de.visible).map(de=>de.Name).reverse().join(",")},insertBeforeLayer:e?.insertBeforeLayer},x.componentId)]}),e.featureInfoEnabled&&M&&Z.jsx(w3,{...M,content:F})]})]})};try{C3.displayName="MlWmsLoader",C3.__docgenInfo={description:`Loads a WMS getCapabilities xml document and adds a MlWmsLayer component for each layer that is
offered by the WMS.`,displayName:"MlWmsLoader",props:{url:{defaultValue:null,description:"WMS URL",name:"url",required:!1,type:{name:"string | undefined"}},mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},urlParameters:{defaultValue:null,description:"URL parameters that will be used in the getCapabilities request",name:"urlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},wmsUrlParameters:{defaultValue:null,description:"URL parameters that will be added when requesting WMS capabilities",name:"wmsUrlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},zoomToExtent:{defaultValue:null,description:"If true, zooms to the extent of the WMS layer after loading the getCapabilities response",name:"zoomToExtent",required:!1,type:{name:"boolean | undefined"}},name:{defaultValue:null,description:"The name of the ListItem element representing the WmsLoader",name:"name",required:!1,type:{name:"string | undefined"}},featureInfoEnabled:{defaultValue:null,description:"If true, enables the feature info functionality",name:"featureInfoEnabled",required:!1,type:{name:"boolean | undefined"}},featureInfoActive:{defaultValue:null,description:"If true, the feature info functionality is active",name:"featureInfoActive",required:!1,type:{name:"boolean | undefined"}},setFeatureInfoActive:{defaultValue:null,description:"A function to set the feature info active state",name:"setFeatureInfoActive",required:!1,type:{name:"((val: boolean | ((current: boolean) => boolean)) => void) | undefined"}},config:{defaultValue:null,description:"The WMS configuration object",name:"config",required:!1,type:{name:"WmsConfig | undefined"}},onConfigChange:{defaultValue:null,description:"A function to handle changes to the WMS configuration",name:"onConfigChange",required:!1,type:{name:"((config: false | WmsConfig) => void) | undefined"}},setLayers:{defaultValue:null,description:"A function to update a LayerType config array that is passed to this component at props.config.layers",name:"setLayers",required:!1,type:{name:"((layers: LayerType[]) => void) | undefined"}},showDeleteButton:{defaultValue:null,description:"If true, shows the delete button for the WMSLoader",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},buttons:{defaultValue:null,description:"Custom buttons to display for the WMSLoader",name:"buttons",required:!1,type:{name:"Element | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function E3(e){const t={"circle-color":"rgba(0,0,0,0)"},r={"fill-color":"rgba(0,0,0,0)","fill-outline-color":"rgba(0,0,0,0)"},n={"line-color":"rgba(0,0,0,0)"},i=["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,0,e.currentVal,1,e.currentVal+e.fadeOut*e.step,0],o=["interpolate",["linear"],["get",e.timeField],e.currentVal,1,e.currentVal+e.fadeOut*e.step,0],l={"fill-color":e.featuresColor,"fill-opacity":i,"fill-outline-color":["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,"rgba(255, 0, 0, 0)",e.currentVal,"rgb(0,0,0)",e.currentVal+e.fadeIn*e.step,"rgba(255, 0, 0, 0)"]},a={"circle-color":e.featuresColor,"circle-radius":["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,1,e.currentVal,20,e.currentVal+e.fadeOut*e.step,1],"circle-opacity":i},c={"line-color":e.featuresColor,"line-width":3,"line-opacity":i},p={"circle-color":e.featuresColor,"circle-radius":["interpolate",["linear"],["get",e.timeField],e.currentVal,20,e.currentVal+e.fadeOut*e.step,1],"circle-opacity":o},g={"fill-color":e.featuresColor,"fill-opacity":o,"fill-outline-color":["interpolate",["linear"],["get",e.timeField],e.currentVal,"rgb(0,0,0)",e.currentVal+e.fadeIn*e.step,"rgba(255, 0, 0, 0)"]},v={"line-color":e.featuresColor,"line-width":3,"line-opacity":o};if(e.userPaint!==void 0)return e.userPaint;switch(e.type){case"circle":return e.currentVal===e.minVal&&!e.isPlaying?t:e.accumulate?p:a;case"fill":return e.currentVal===e.minVal&&!e.isPlaying?r:e.accumulate?g:l;case"line":return e.currentVal===e.minVal&&!e.isPlaying?n:e.accumulate?v:c;case void 0:return e.currentVal===e.minVal&&!e.isPlaying?t:e.accumulate?p:a}}try{E3.displayName="paintPicker",E3.__docgenInfo={description:"",displayName:"paintPicker",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"fill"'},{value:'"line"'},{value:'"circle"'}]}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},featuresColor:{defaultValue:null,description:"",name:"featuresColor",required:!0,type:{name:"string"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},userPaint:{defaultValue:null,description:"",name:"userPaint",required:!0,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | { ...; } | { ...; } | undefined'}}}}}catch{}function T3(e){const t=e.currentVal-e.fadeIn*e.step,r=e.currentVal+e.fadeIn*e.step,n={"text-color":"rgba(0,0,0,0)"},i={"text-color":e.labelColor,"text-opacity":["interpolate",["linear"],["get",e.timeField],t,0,e.currentVal,1,r,0]},o={"text-color":e.labelColor,"text-opacity":["interpolate",["linear"],["get",e.timeField],e.currentVal,1,r,0]},l=()=>e.currentVal===e.minVal&&!e.isPlaying?n:e.accumulate?o:i,a={"text-field":["get",e.labelField],"text-font":["Metropolis Regular"]};return Z.jsx(Tx,{options:{type:"symbol",layout:e.labelLayout||a,paint:e.labelPaint||l()},geojson:e.data,layerId:"timeControllerLabels"})}try{T3.displayName="MlTemporalControllerLabels",T3.__docgenInfo={description:"",displayName:"MlTemporalControllerLabels",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},labelField:{defaultValue:null,description:"",name:"labelField",required:!0,type:{name:"string"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!0,type:{name:"string"}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},labelLayout:{defaultValue:null,description:"",name:"labelLayout",required:!1,type:{name:"any"}},labelPaint:{defaultValue:null,description:"",name:"labelPaint",required:!1,type:{name:"SymbolLayerSpecification | undefined"}}}}}catch{}const uwe=Ei(Z.jsx("path",{d:"M8 5v14l11-7z"})),cwe=Ei(Z.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"})),dwe=Ei(Z.jsx("path",{d:"M6 6h12v12H6z"})),fwe=Ei(Z.jsx("path",{d:"m4 18 8.5-6L4 6zm9-12v12l8.5-6z"})),hwe=Ei(Z.jsx("path",{d:"M11 18V6l-8.5 6zm.5-6 8.5 6V6z"})),pwe={marginLeft:"15%",marginBottom:"3%",width:"70%",height:"90px",alignItems:"center"},mwe={top:"10%",height:"100px",alignItems:"center"};function P3(e){const[t,r]=Q.useState(e.currentVal),[n,i]=Q.useState(e.isPlaying),o=e.maxVal-e.minVal,l=Q.useRef(null),a=l1(P=>P.breakpoints.down("md"));Q.useEffect(()=>()=>{l.current&&clearInterval(l.current)},[]),Q.useEffect(()=>{e.returnCurrent(t),e.returnPlaying(n)},[t,n]);const c=ft.useCallback(()=>{let P=t-e.minVal;l.current&&clearInterval(l.current),l.current=setInterval(function(){P>=o?(l.current&&clearInterval(l.current),i(!1)):r(I=>I+e.step),P=P+e.step},e.interval)},[e.step,e.maxVal,t]),p=()=>{n?(i(!1),n&&l.current&&clearInterval(l.current)):(i(!0),c())},g=()=>{l.current&&clearInterval(l.current),r(e.minVal),i(!1)},v=()=>{n?(l.current&&clearInterval(l.current),r(t-o/10),c()):r(t-o/10)},x=()=>{n?(l.current&&clearInterval(l.current),r(t+o/10),c()):r(t+o/10)},b=(P,I)=>{n?P&&(l.current&&clearInterval(l.current),r(I),c()):r(I)};return Z.jsx(Z.Fragment,{children:Z.jsxs(qP,{anchor:"bottom",open:e.open||!0,variant:"persistent",sx:{flexShrink:0,"& .MuiDrawer-paper":a?mwe:pwe},children:[Z.jsxs(Mf,{container:!0,alignItems:"center",justifyContent:"space-between",children:[Z.jsxs(Mf,{item:!0,xs:12,sm:10,textAlign:"center",children:[Z.jsx(ji,{onClick:v,children:Z.jsx(hwe,{})}),Z.jsx(ji,{onClick:g,children:Z.jsx(dwe,{})}),Z.jsx(ji,{onClick:p,children:n?Z.jsx(cwe,{}):Z.jsx(uwe,{})}),Z.jsx(ji,{onClick:x,children:Z.jsx(fwe,{})})]}),e.display&&!a&&Z.jsx(Mf,{item:!0,xs:12,sm:5,textAlign:"right",children:Z.jsx(Ko,{variant:"h5",sx:{paddingRight:"25px"},children:Math.floor(t)})})]}),Z.jsx(HP,{sx:{position:"flex",width:"95%",paddingTop:"10px",alignSelf:"center"},"aria-label":"Custom marks",defaultValue:e.minVal,value:t,step:e.step,onChange:b,min:e.minVal,max:e.maxVal}),a&&e.display&&Z.jsx(Ko,{variant:"body1",textAlign:"right",children:Math.floor(t)})]})})}try{P3.displayName="TemporalControllerPlayer",P3.__docgenInfo={description:"",displayName:"TemporalControllerPlayer",props:{currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},interval:{defaultValue:null,description:"",name:"interval",required:!0,type:{name:"number"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},maxVal:{defaultValue:null,description:"",name:"maxVal",required:!0,type:{name:"number"}},returnCurrent:{defaultValue:null,description:"",name:"returnCurrent",required:!0,type:{name:"Dispatch<SetStateAction<number>>"}},returnPlaying:{defaultValue:null,description:"",name:"returnPlaying",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},featuresColor:{defaultValue:null,description:"",name:"featuresColor",required:!0,type:{name:"string"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"boolean"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!0,type:{name:"string"}},labelFadeIn:{defaultValue:null,description:"",name:"labelFadeIn",required:!0,type:{name:"number"}},labelFadeOut:{defaultValue:null,description:"",name:"labelFadeOut",required:!0,type:{name:"number"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"boolean"}}}}}catch{}function gwe(e,t){if(e?.features){const r=[...e.features?e.features:[]];return r.sort((n,i)=>n.properties?.[t]<i.properties?.[t]?1:-1),r[r.length-1]?.properties?.[t]||0}return 0}function ywe(e,t){if(e?.features){const r=[...e?.features?e.features:[]];return r.sort((n,i)=>n.properties?.[t]<i.properties?.[t]?-1:1),r[r.length-1]?.properties?.[t]||0}return 0}function I3(e){const t=la({mapId:e.mapId}),r=Q.useMemo(()=>e.minVal?e.minVal:gwe(e.geojson,e.timeField),[e.minVal,e.geojson,e.timeField]),n=Q.useMemo(()=>e.maxVal?e.maxVal:ywe(e.geojson,e.timeField),[e.maxVal,e.geojson,e.timeField]);return{filteredData:Q.useMemo(()=>{if(e.geojson!==void 0&&t.map&&r&&n)return Uf(e.geojson.features.filter(o=>o.properties?.[e.timeField]>=r&&o.properties?.[e.timeField]<=n))},[e.geojson,t.map,e.timeField]),minVal:r,maxVal:n}}try{I3.displayName="useFilterData",I3.__docgenInfo={description:"",displayName:"useFilterData",props:{geojson:{defaultValue:null,description:"",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},initialVal:{defaultValue:null,description:"",name:"initialVal",required:!1,type:{name:"number | undefined"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!1,type:{name:"number | undefined"}},maxVal:{defaultValue:null,description:"",name:"maxVal",required:!1,type:{name:"number | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!0,type:{name:"string | undefined"}}}}}catch{}const $B=({mapId:e=void 0,insertBeforeLayer:t,geojson:r,ownLayer:n=!0,attribution:i="",type:o="circle",timeField:l,minVal:a,maxVal:c,initialVal:p,accumulate:g=!1,fitBounds:v=!0,paint:x,featuresColor:b,step:P=1,interval:I=200,fadeIn:k=5,fadeOut:M=5,label:O=!0,labelColor:F,labelField:N=[],labelFadeIn:$=5,labelFadeOut:j=5,displayCurrentValue:U=!1,onClick:H,onHover:Y,onLeave:ae,onStateChange:ee})=>{const G=la({mapId:e,waitForLayer:t}),{filteredData:ie,minVal:oe,maxVal:ue}=I3({geojson:r,timeField:l,minVal:a,maxVal:c,mapId:e}),de=du(),[Me,ge]=Q.useState(p||oe),xe=b||de.palette.primary.main,Ee=F||de.palette.text.primary,[Ae,fe]=Q.useState(!1),Se=E3({type:o,timeField:l,currentVal:Me,minVal:oe,isPlaying:Ae,fadeIn:k,fadeOut:M,step:P,featuresColor:xe,accumulate:g,userPaint:x});return Q.useEffect(()=>{!p&&oe?ge(oe):p&&ge(p)},[]),Q.useEffect(()=>{typeof ee=="function"&&ee({current:Me,paint:Se})},[ee]),Q.useEffect(()=>{if(v&&typeof ie<"u"){const we=yc(ie);G.map?.map.fitBounds(we)}},[ie]),Q.useEffect(()=>{if(!G.map)return;let we,De,Re;return H&&(we=H,G.map?.on("click","timeController",we)),Y&&(De=Y,G.map?.on("mouseenter","timeController",De)),ae&&(Re=ae,G.map?.on("mouseleave","timeController",Re)),()=>{we&&G.map?.off("click","timeController",we),De&&G.map?.off("mouseenter","timeController",De),Re&&G.map?.off("mouseleave","timeController",Re)}},[G.map,H,Y,ae]),Z.jsxs(Z.Fragment,{children:[ie&&n&&Z.jsx(zu,{type:o,mapId:e,options:{source:{type:"geojson",attribution:i,data:ie},paint:{...x||Se},layout:{visibility:"visible"}}}),ie&&O&&Z.jsx(T3,{data:ie,currentVal:Me,fadeIn:$,fadeOut:j,step:P,labelField:N,labelColor:Ee,timeField:l,minVal:oe,accumulate:g,isPlaying:Ae}),Z.jsx(P3,{currentVal:Me,isPlaying:Ae,step:P,interval:I,minVal:oe,maxVal:ue,returnCurrent:ge,returnPlaying:fe,open:!1,fadeIn:k,fadeOut:M,featuresColor:xe,labels:O,labelColor:Ee,labelFadeIn:$,labelFadeOut:j,accumulate:g,display:U})]})};try{$B.displayName="MlTemporalController",$B.__docgenInfo={description:"",displayName:"MlTemporalController",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order.
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},ownLayer:{defaultValue:{value:"true"},description:"If true,the component creates and loads a MlGeoJsonLayer to show the data.",name:"ownLayer",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:{value:""},description:"MapLibre attribution shown in the bottom right of the map, if this layer is visible",name:"attribution",required:!1,type:{name:"string | undefined"}},type:{defaultValue:{value:"circle"},description:`Type of the layer that will be added to the MapLibre instance.
Possible values: "line", "circle", "fill"`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"fill"'},{value:'"line"'},{value:'"circle"'}]}},timeField:{defaultValue:null,description:"Property field where the time informations is available.",name:"timeField",required:!0,type:{name:"string"}},minVal:{defaultValue:null,description:`Lowest time value to be shown in the time line.
By default, it is set to the lowest value in the time field.`,name:"minVal",required:!1,type:{name:"number | undefined"}},label:{defaultValue:{value:"true"},description:'When true, a label layer will be added by the component. In that case, the "labelField" propertie is mandatory.',name:"label",required:!1,type:{name:"boolean | undefined"}},labelField:{defaultValue:{value:"[]"},description:"Property field where the label information is available.",name:"labelField",required:!1,type:{name:"string | undefined"}},maxVal:{defaultValue:null,description:`Highest time value to be shown in the time line.
By default, it is set to the highest value in the time field.`,name:"maxVal",required:!1,type:{name:"number | undefined"}},initialVal:{defaultValue:null,description:`the value at which the component is to be loaded.
If not specified, the component starts at the minimum value.`,name:"initialVal",required:!1,type:{name:"number | undefined"}},accumulate:{defaultValue:{value:"false"},description:`When true, the features will be accumulated in the map.
This option ist by default false.`,name:"accumulate",required:!1,type:{name:"boolean | undefined"}},fitBounds:{defaultValue:{value:"true"},description:`When true, the component will fit the map bounds to the shown features.
This option ist by default true.`,name:"fitBounds",required:!1,type:{name:"boolean | undefined"}},showControls:{defaultValue:null,description:"Boolean value that disables and enables the controls drawer.",name:"showControls",required:!1,type:{name:"boolean | undefined"}},paint:{defaultValue:null,description:`Paint property object for the features layer.
Possible props depend on the layer type.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | { ...; } | { ...; } | undefined'}},featuresColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"featuresColor",required:!1,type:{name:"string | undefined"}},step:{defaultValue:{value:"1"},description:`How many units the timeline runs through at each step.
By default it is set to 1.`,name:"step",required:!1,type:{name:"number | undefined"}},interval:{defaultValue:{value:"200"},description:`The time between each addition to the counter, expressed in milliseconds.
By default, 200 ms.`,name:"interval",required:!1,type:{name:"number | undefined"}},fadeIn:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps before the feature starts to appear.
By default it is set to 5 steps.`,name:"fadeIn",required:!1,type:{name:"number | undefined"}},fadeOut:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps the feature fades out after it proper time value.
By default it is set to 5 steps.`,name:"fadeOut",required:!1,type:{name:"number | undefined"}},labelColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"labelColor",required:!1,type:{name:"string | undefined"}},labelLayout:{defaultValue:null,description:`Layout property object, that is passed to the labels layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol`,name:"labelLayout",required:!1,type:{name:"any"}},labelPaint:{defaultValue:null,description:`Paint property object for the features layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol`,name:"labelPaint",required:!1,type:{name:"any"}},labelFadeIn:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps before the labels start to appear.
By default it is set to 5 steps.`,name:"labelFadeIn",required:!1,type:{name:"number | undefined"}},labelFadeOut:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps the labels fade out after their proper time value.
By default it is set to 5 steps.`,name:"labelFadeOut",required:!1,type:{name:"number | undefined"}},displayCurrentValue:{defaultValue:{value:"false"},description:"If true, the current time value will be displayed in the controlls panel.",name:"displayCurrentValue",required:!1,type:{name:"boolean | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onHover:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onStateChange:{defaultValue:null,description:"Callback function defined by the user to recive the current time value and paint property in the parent component.",name:"onStateChange",required:!1,type:{name:"Dispatch<SetStateAction<TemporalControllerValues | undefined>> | undefined"}}}}}catch{}const Mx=e=>{const t=e?.layerIds.toReversed();return Z.jsx(Z.Fragment,{children:t&&t.map((r,n)=>{const i=n>0?t[n-1]:e.insertBeforeLayer;return Z.jsx(Tx,{layerId:r,insertBeforeLayer:i},r)})})};try{Mx.displayName="MlOrderLayers",Mx.__docgenInfo={description:"Creates an invisible layer for each entry in props.layerIds with the id `order-{entry}` and a reliable order",displayName:"MlOrderLayers",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerIds:{defaultValue:null,description:"",name:"layerIds",required:!0,type:{name:"string[]"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}}}catch{}const VB=e=>{const t=la({mapId:"map_1"});return Q.useEffect(()=>{if(t.map)return t.map.map.getSource("terrain")||t.map.map.addSource("terrain",{type:"raster-dem",encoding:"mapbox",maxzoom:12,minzoom:4,...e.sourceOptions}),t.map.map.setTerrain({source:"terrain",exaggeration:1,...e.terrainOptions}),t.map.addLayer({id:"hills",type:"hillshade",source:"terrain",layout:{visibility:"visible"},paint:{"hillshade-shadow-color":"rgba(71,59,36,0.4)"}}),()=>{t.map?.map.setTerrain(null),t.map?.map.getSource("terrain")&&(t.map.map.removeLayer("hills"),t.map.map.removeSource("terrain"))}},[t.map,e.sourceOptions,e.terrainOptions]),Z.jsx(Z.Fragment,{})};try{VB.displayName="MlTerrainLayer",VB.__docgenInfo={description:"Create Terrain Layer Component",displayName:"MlTerrainLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"Source of tiles with possibles options",name:"sourceOptions",required:!1,type:{name:"object | undefined"}},terrainOptions:{defaultValue:null,description:"Options for new exaggeration value",name:"terrainOptions",required:!1,type:{name:"TerrainSpecification | undefined"}}}}}catch{}const vwe=Ei(Z.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),bwe=Ei([Z.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),Z.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),Z.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")]),_we=[{name:"Point",mode:"draw_point",icon:Z.jsx(bwe,{})},{name:"LineString",mode:"draw_line_string",icon:Z.jsx(E$,{})},{name:"Polygon",mode:"draw_polygon",icon:Z.jsx(T$,{})}],UB=e=>{const t=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Q.useState(),[i,o]=Q.useState({activeGeometryIndex:void 0,selectedGeoJson:void 0,geometries:[],drawMode:void 0});console.log(i),Q.useEffect(()=>{typeof e.onChange=="function"&&e.onChange(i)},[i,e.onChange]);const l={...e.buttonStyleOverride},a=v=>{let x;o(b=>(x=b.drawMode,{...b,drawMode:void 0,activeGeometryIndex:void 0,selectedGeoJson:void 0})),requestAnimationFrame(()=>{o(b=>(x==="draw_polygon"||x==="draw_line_string")&&v==="draw_point"?{...b,drawMode:void 0}:{...b,drawMode:v})})},c=v=>{o(x=>{const b=[...x.geometries];return b.splice(b.indexOf(v),1),{...x,drawMode:void 0,geometries:b,activeGeometryIndex:x.activeGeometryIndex?x.activeGeometryIndex-1:void 0}})},p=v=>{e.onShowInstructionChange?.(v.target.checked)},g=()=>Z.jsx(Z.Fragment,{children:_we.map(v=>{const x=P=>i.drawMode===v.mode?P.palette.primary.main:P.palette.navigation.navColor,b=P=>i.drawMode!==v.mode?P.palette.primary.main:P.palette.navigation.navColor;return Z.jsx(Z.Fragment,{children:Z.jsx(Lf,{title:v.name,children:Z.jsx(ji,{sx:{color:b,backgroundColor:x,"&:hover":{backgroundColor:x},...l},onClick:()=>a(v.mode),children:v.icon},v.name)})})})});return Z.jsxs(Z.Fragment,{children:[Z.jsx(ag,{sx:{zIndex:104},children:Z.jsx(tT,{children:Z.jsx(g,{})})}),Z.jsx(ag,{sx:{marginTop:"10px"},children:Z.jsx(f7,{children:Z.jsx(nT,{control:Z.jsx(iy,{size:"small",checked:e.showInstruction,onChange:p}),label:"Show instructions"})})}),i.drawMode&&Z.jsx(cx,{mode:i.drawMode,geojson:i.selectedGeoJson,onChange:v=>{console.log("Features: ",v),v?.[0]&&o(x=>{const b=[...i.geometries];if(typeof x.activeGeometryIndex>"u"){const I=v[0];I&&I.properties?I.properties.id=I.id:console.error("tempFeature or tempFeature.properties is null or undefined"),x.activeGeometryIndex=b.length,b.push(I)}else b[x.activeGeometryIndex]=v[0];return(()=>{if(x.selectedGeoJson&&typeof x.activeGeometryIndex<"u"&&x.geometries[x.activeGeometryIndex]&&x.geometries[x.activeGeometryIndex].geometry.type==="Point"){const I=x.selectedGeoJson?.geometry?.coordinates,k=x.geometries[x.activeGeometryIndex]?.geometry?.coordinates;return JSON.stringify(I)!==JSON.stringify(k)}return!1})()&&(x.drawMode=void 0),{...x,geometries:b}})},onFinish:()=>{o(v=>({...v,drawMode:void 0,activeGeometryIndex:void 0,selectedGeoJson:void 0}))}}),Z.jsxs(gd,{sx:{zIndex:105,marginBottom:"-10px"},children:[i.geometries.map((v,x)=>Z.jsxs(ag,{sx:{display:"flex",flexDirection:"column"},children:[Z.jsx("br",{}),Z.jsxs(ag,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"},marginTop:"25px"},onMouseOver:()=>{n(v)},onMouseLeave:()=>{n(void 0)},children:[!v.properties?.customName&&Z.jsx("input",{type:"text",value:v.properties?.name||"",placeholder:"Assign name",onChange:b=>{const P=b.target.value;o(I=>{const k=[...I.geometries];return k[x].properties||(k[x].properties={}),k[x].properties.name=P,{...I,geometries:k}})},style:{padding:"5px",border:"1px solid #ccc",borderRadius:"4px",outline:"none"},onFocus:b=>b.target.style.borderColor="#009ee0",onBlur:b=>{b.target.style.borderColor="#ccc",o(P=>{const I=[...P.geometries];return I[x].properties||(I[x].properties={}),I[x].properties.customName=!0,{...P,geometries:I}})}}),Z.jsx(Rf,{listItemSx:l,configurable:!0,visible:!0,layerComponent:Z.jsx(zu,{mapId:e.mapId,geojson:v,layerId:String(v.id),defaultPaintOverrides:{fill:{"fill-opacity":.5}}}),type:"layer",name:Z.jsx(Ko,{onClick:()=>{o(b=>{const P=[...b.geometries];return P[x].properties||(P[x].properties={}),P[x].properties.customName=!1,{...b,geometries:P}})},sx:{cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap"},children:v.properties?.name||String(v.id)}),description:v.geometry.type}),Z.jsx(ag,{sx:{padding:"3px 30px"},children:Z.jsxs(tT,{size:"small",children:[Z.jsx(Lf,{title:"Center",children:Z.jsx(ji,{sx:{color:b=>b.palette.primary.main,backgroundColor:b=>b.palette.navigation.navColor,...l},onClick:()=>{t?.map?.map.setCenter(v.geometry.type==="Point"?v.geometry.coordinates:jI(v).geometry.coordinates)},children:Z.jsx(qI,{})})}),Z.jsx(Lf,{title:"Edit",children:Z.jsx(ji,{sx:{color:b=>i.drawMode==="simple_select"&&i.selectedGeoJson?.id===v.id?b.palette.navigation.navColor:b.palette.primary.main,backgroundColor:b=>i.drawMode==="simple_select"&&i.selectedGeoJson?.id===v.id?b.palette.primary.main:b.palette.navigation.navColor,...l},onClick:()=>{o(b=>{const P=b.drawMode==="simple_select"&&b.selectedGeoJson?.id===v.id?void 0:"simple_select";return{...b,selectedGeoJson:v,activeGeometryIndex:b.geometries.indexOf(v),drawMode:P}})},children:Z.jsx(vwe,{})})}),Z.jsx(Lf,{title:"Delete",children:Z.jsx(ji,{sx:{color:b=>b.palette.primary.main,backgroundColor:b=>b.palette.navigation.navColor,...l},onClick:()=>{c(v),n(void 0)},children:Z.jsx(v1,{})})})]})})]})]},v.id)),r&&Z.jsx(zu,{mapId:e.mapId,geojson:{type:"FeatureCollection",features:[r]},layerId:"highlightBorder",defaultPaintOverrides:{circle:{"circle-color":"#000000","circle-opacity":.2,"circle-radius":10},line:{"line-color":"#000000","line-opacity":.2,"line-width":10},fill:{"fill-color":"#000000","fill-opacity":.2}}})]})]})};try{UB.displayName="MlSketchTool",UB.__docgenInfo={description:"Component template",displayName:"MlSketchTool",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:null,description:`Style attribute for the button-style
https://mui.com/system/getting-started/the-sx-prop/`,name:"buttonStyleOverride",required:!1,type:{name:"SxProps | undefined"}},onChange:{defaultValue:null,description:"Callback function that is called each time GeoJson data has changed within MlSketchTool.\nFirst parameter contains all geometries in the `geometries` prop.",name:"onChange",required:!1,type:{name:"((para: SketchStateType) => void) | undefined"}},showInstruction:{defaultValue:null,description:"Determines whether the instruction text should be shown.",name:"showInstruction",required:!1,type:{name:"boolean | undefined"}},onShowInstructionChange:{defaultValue:null,description:'Callback function triggered when the "Show instructions" checkbox is toggled.',name:"onShowInstructionChange",required:!1,type:{name:"((value: boolean) => void) | undefined"}}}}}catch{}const k3=e=>{const t=Q.useRef(!1),r=Q.useRef(e.pause),n=Q.useRef(e.zoom),i=Q.useRef(e.pitch),o=Q.useRef(1),l=Q.useRef(e.speed),a=Q.useRef(null),c=e.kmPerStep||.01,p=N0(e.route),g=e.stepDuration||70,v=la({mapId:e.mapId,waitForLayer:e.insertBeforeLayer});Q.useEffect(()=>{r.current=e.pause,r.current||I()},[e.pause]),Q.useEffect(()=>{v.map&&(n.current=e.zoom,typeof n.current<"u"&&v.map.map.getZoom()!==n.current&&v.map.map.setZoom(n.current))},[v.map,e.zoom]),Q.useEffect(()=>{v.map&&(i.current=e.pitch,typeof i.current<"u"&&i.current!==v.map.map.getPitch()&&v.map.map.setPitch(i.current))},[v.map,e.pitch]),Q.useEffect(()=>{l.current=e.speed},[e.speed]);const x=Q.useCallback(()=>{v.map&&(v.map.map.scrollZoom.disable(),v.map.map.boxZoom.disable(),v.map.map.dragRotate.disable(),v.map.map.dragPan.disable(),v.map.map.keyboard.disable(),v.map.map.doubleClickZoom.disable(),v.map.map.touchZoomRotate.disable())},[v.map]),b=Q.useCallback(()=>{v.map&&(v.map.map.scrollZoom.enable(),v.map.map.boxZoom.enable(),v.map.map.dragRotate.enable(),v.map.map.dragPan.enable(),v.map.map.keyboard.enable(),v.map.map.doubleClickZoom.enable(),v.map.map.touchZoomRotate.enable())},[v.map]);function P(){if(!v.map||!e.route)return;const M=yc(e.route);let O;M&&M.length>3&&(O=[[M[0],M[1]],[M[2],M[3]]],v.map.map.fitBounds(O,{padding:100}))}function I(){if(v.map)if(r.current)b();else{x(),typeof n.current<"u"&&v.map.map.getZoom()!==n.current&&v.map.map.setZoom(n.current);const M=Qde(e.route,o.current*c).geometry.coordinates;o.current*c<p?(v.map.map.easeTo({center:M,bearing:L0(Vc([v.map.map.getCenter().lng,v.map.map.getCenter().lat]),Vc(M)),duration:g,essential:!0}),typeof l.current<"u"?o.current=o.current+l.current:o.current++,console.log("PAN MOVE"),setTimeout(()=>{I()},100)):(v.map.map.setPitch(0),P(),b(),console.log("ENABLE CONTROLS"),o.current=1)}}function k(){v.map&&(P(),b(),o.current=1)}return Q.useEffect(()=>{!v.map||t.current||(t.current=!0,P())},[v.map]),Q.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),{play:I,reset:k}};k3.defaultProps={mapId:void 0,zoom:18};try{k3.displayName="useCameraFollowPath",k3.__docgenInfo={description:"Component template",displayName:"useCameraFollowPath",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},pause:{defaultValue:null,description:"",name:"pause",required:!1,type:{name:"boolean | undefined"}},zoom:{defaultValue:{value:"18"},description:"",name:"zoom",required:!1,type:{name:"number | undefined"}},pitch:{defaultValue:null,description:"",name:"pitch",required:!1,type:{name:"number | undefined"}},speed:{defaultValue:null,description:"",name:"speed",required:!1,type:{name:"number | undefined"}},kmPerStep:{defaultValue:null,description:"",name:"kmPerStep",required:!1,type:{name:"number | undefined"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"any"}},stepDuration:{defaultValue:null,description:"",name:"stepDuration",required:!1,type:{name:"number | undefined"}},timeoutId:{defaultValue:null,description:"",name:"timeoutId",required:!1,type:{name:"number | undefined"}}}}}catch{}const xwe=()=>Q.useContext(CP),Lx=e=>(Q.useEffect(()=>{if(!(!e.protocol||typeof e.handler!="function"))return $4.addProtocol(e.protocol,e.handler),()=>{$4.removeProtocol(e.protocol)}},[e]),{});Lx.defaultProps={mapId:void 0};try{Lx.displayName="useAddProtocol",Lx.__docgenInfo={description:"Enables the use of custom protocols (basically custom tile load functions) in the maplibre-gl-js library.",displayName:"useAddProtocol",props:{protocol:{defaultValue:null,description:"the protocol string, for example `mbtiles`\nIn this example the handler function is called for all tile requests that start with the string `mbtiles://`",name:"protocol",required:!0,type:{name:"string"}},handler:{defaultValue:null,description:"Custom load tile function that will be called when using a source that starts with a custom url schema.",name:"handler",required:!0,type:{name:"AddProtocolAction"}}}}}catch{}function dU(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function wwe(e,t){var r=dU(e);return function(n,i){return t(r(n),i,e)}}function Swe(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function qk(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(p,g){var v,x,b=i(p,function(P,I){if(v)return v(P,I-1);x=P,v=g?wwe(P,g):dU(P)});return b.columns=x,b}function i(p,g){var v={},x={},b=[],P=p.length,I=0,k=0,M,O;function F(){if(I>=P)return x;if(O)return O=!1,v;var $=I,j;if(p.charCodeAt($)===34){for(var U=$;U++<P;)if(p.charCodeAt(U)===34){if(p.charCodeAt(U+1)!==34)break;++U}return I=U+2,j=p.charCodeAt(U+1),j===13?(O=!0,p.charCodeAt(U+2)===10&&++I):j===10&&(O=!0),p.slice($+1,U).replace(/""/g,'"')}for(;I<P;){var H=1;if(j=p.charCodeAt(I++),j===10)O=!0;else if(j===13)O=!0,p.charCodeAt(I)===10&&(++I,++H);else if(j!==r)continue;return p.slice($,I-H)}return p.slice($)}for(;(M=F())!==x;){for(var N=[];M!==v&&M!==x;)N.push(M),M=F();g&&(N=g(N,k++))==null||b.push(N)}return b}function o(p,g){return g==null&&(g=Swe(p)),[g.map(c).join(e)].concat(p.map(function(v){return g.map(function(x){return c(v[x])}).join(e)})).join(`
`)}function l(p){return p.map(a).join(`
`)}function a(p){return p.map(c).join(e)}function c(p){return p==null?"":t.test(p+="")?'"'+p.replace(/\"/g,'""')+'"':p}return{parse:n,parseRows:i,format:o,formatRows:l}}var ow=qk(","),Cwe=ow.parse,Ewe=ow.parseRows,Twe=ow.format,Pwe=ow.formatRows,sw=qk("	"),Iwe=sw.parse,kwe=sw.parseRows,Awe=sw.format,Mwe=sw.formatRows;const Lwe=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Twe,csvFormatRows:Pwe,csvParse:Cwe,csvParseRows:Ewe,dsvFormat:qk,tsvFormat:Awe,tsvFormatRows:Mwe,tsvParse:Iwe,tsvParseRows:kwe},Symbol.toStringTag,{value:"Module"})),Rwe=Vz(Lwe);var gp={exports:{}},GB;function Dwe(){if(GB)return gp.exports;GB=1,gp.exports=e,gp.exports.pair=o,gp.exports.format=r,gp.exports.formatPair=t,gp.exports.coordToDMS=n;function e(a,c){var p=i(a,c);return p===null?null:p.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,c){var p=n(a,c);return p.whole+" "+(p.minutes?p.minutes+"' ":"")+(p.seconds?p.seconds+'" ':"")+p.dir}function n(a,c){var p={lat:["N","S"],lon:["E","W"]}[c]||"",g=p[a>=0?0:1],v=Math.abs(a),x=Math.floor(v),b=v-x,P=b*60,I=Math.floor(P),k=Math.floor((P-I)*60);return{whole:x,minutes:I,seconds:k,dir:g}}function i(a,c){if(c||(c="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var p=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,g=a.match(p);if(!g)return null;var v=g[0],x;if(g[1]&&g[5]?(x=g[1],v=v.slice(0,-1)):x=g[1]||g[5],x&&c.indexOf(x)===-1)return null;var b=g[2]?parseFloat(g[2]):0,P=g[3]?parseFloat(g[3])/60:0,I=g[4]?parseFloat(g[4])/3600:0,k=b<0?-1:1;return(x==="S"||x==="W")&&(k*=-1),{val:(Math.abs(b)+P+I)*k,dim:x,matched:v,remain:a.slice(v.length)}}function o(a,c){a=a.trim();var p=i(a,c);if(!p)return null;a=p.remain.trim();var g=i(a,c);return!g||g.remain?null:p.dim?l(p.val,g.val,p.dim):[p.val,g.val]}function l(a,c,p){if(p==="N"||p==="S")return[a,c];if(p==="W"||p==="E")return[c,a]}return gp.exports}var y4,HB;function Nwe(){if(HB)return y4;HB=1;var e=Rwe,t=Dwe(),r=/(Lat)(itude)?/gi,n=/(L)(on|ng)(gitude)?/i;function i(k,M){var O,F,N;for(var $ in k)F=$.match(M),F&&(!O||F[0].length/$.length>N)&&(N=F[0].length/$.length,O=$);return O}function o(k){return i(k,r)}function l(k){return i(k,n)}function a(k){return!!k.match(r)}function c(k){return!!k.match(n)}function p(k){return typeof k=="object"?Object.keys(k).length:0}function g(k){var M=[",",";","	","|"],O=[];return M.forEach(function(F){var N=e.dsvFormat(F).parse(k);if(N.length>=1){for(var $=p(N[0]),j=0;j<N.length;j++)if(p(N[j])!==$)return;O.push({delimiter:F,arity:Object.keys(N[0]).length})}}),O.length?O.sort(function(F,N){return N.arity-F.arity})[0].delimiter:null}function v(k){return delete k.columns,k}function x(k){var M=g(k);return M?v(e.dsvFormat(M).parse(k)):null}function b(k,M,O){O||(O=M,M={}),M.delimiter=M.delimiter||",";var F=M.latfield||"",N=M.lonfield||"",$=M.crs||"",j=[],U={type:"FeatureCollection",features:j};if($!==""&&(U.crs={type:"name",properties:{name:$}}),M.delimiter==="auto"&&typeof k=="string"&&(M.delimiter=g(k),!M.delimiter)){O({type:"Error",message:"Could not autodetect delimiter"});return}var H=M.numericFields?M.numericFields.split(","):null,Y=typeof k=="string"?e.dsvFormat(M.delimiter).parse(k,function(ge){if(H)for(var xe in ge)H.includes(xe)&&(ge[xe]=+ge[xe]);return ge}):k;if(!Y.length){O(null,U);return}var ae=[],ee;F||(F=o(Y[0])),N||(N=l(Y[0]));var G=!F||!N;if(G){for(ee=0;ee<Y.length;ee++)j.push({type:"Feature",properties:Y[ee],geometry:null});O(ae.length?ae:null,U);return}for(ee=0;ee<Y.length;ee++)if(Y[ee][N]!==void 0&&Y[ee][F]!==void 0){var ie=Y[ee][N],oe=Y[ee][F],ue,de,Me;Me=t(ie,"EW"),Me&&(ie=Me),Me=t(oe,"NS"),Me&&(oe=Me),ue=parseFloat(ie),de=parseFloat(oe),isNaN(ue)||isNaN(de)?ae.push({message:"A row contained an invalid value for latitude or longitude",row:Y[ee],index:ee}):(M.includeLatLon||(delete Y[ee][N],delete Y[ee][F]),j.push({type:"Feature",properties:Y[ee],geometry:{type:"Point",coordinates:[parseFloat(ue),parseFloat(de)]}}))}O(ae.length?ae:null,U)}function P(k){for(var M=k.features,O={type:"Feature",geometry:{type:"LineString",coordinates:[]}},F=0;F<M.length;F++)O.geometry.coordinates.push(M[F].geometry.coordinates);return O.properties=M.reduce(function(N,$){for(var j in $.properties)N[j]||(N[j]=[]),N[j].push($.properties[j]);return N},{}),{type:"FeatureCollection",features:[O]}}function I(k){for(var M=k.features,O={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},F=0;F<M.length;F++)O.geometry.coordinates[0].push(M[F].geometry.coordinates);return O.properties=M.reduce(function(N,$){for(var j in $.properties)N[j]||(N[j]=[]),N[j].push($.properties[j]);return N},{}),{type:"FeatureCollection",features:[O]}}return y4={isLon:c,isLat:a,guessLatHeader:o,guessLonHeader:l,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:x,csv2geojson:b,toLine:P,toPolygon:I},y4}var Owe=Nwe();function lw(e){const t=e.split("?"),r=t[0].split("://"),n=r[0],l=(r.length>2?r[1]+"://"+r[2]:r[1]).split("/").join("/"),a=decodeURI(t[1]),c=Object.fromEntries(new URLSearchParams(a));return{protocolId:n,filename:l,options:c}}async function uw(e){try{return await(await fetch(e)).text()}catch(t){return console.error("File could not be loaded: ",t),t}}async function Fwe(e,t){return await new Promise((n,i)=>{const o=t||{};e.substring(e.length-3)==="tsv"&&(t.delimiter="	"),uw(e).then(a=>{Owe.csv2geojson(a,o,(c,p)=>{c?i(c):n(p)})})})}const Bwe=async e=>{const t=lw(e.url),r=await Fwe(t.filename,t.options);if(r!==void 0)return{data:r};throw new Error("CSV not found "+t.filename)};var Su={},WB;function T1(){if(WB)return Su;WB=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.purgeProps=e,Su.first=t,Su.last=r,Su.coordsToKey=n,Su.addToMap=i,Su.removeFromMap=o,Su.getFirstFromMap=l,Su.isRing=a,Su.ringDirection=c,Su.pointInsidePolygon=p,Su.strArrayArrayToFloat=g,Su.strArrayToFloat=v;function e(x,b){if(x){const P=Object.assign({},x);if(b)for(const I of b)delete P[I];return P}return{}}function t(x){return x[0]}function r(x){return x[x.length-1]}function n(x){return x.join(",")}function i(x,b,P){const I=x[b];I?I.push(P):x[b]=[P]}function o(x,b,P){const I=x[b];let k=-1;I&&(k=I.indexOf(P)),k>=0&&I.splice(k,1)}function l(x,b){const P=x[b];return P&&P.length>0?P[0]:null}function a(x){return x.length>3&&n(t(x))===n(r(x))}function c(x,b,P){b=b||0,P=P||1;const I=x.reduce((Y,ae,ee)=>x[Y][b||0]>ae[b||0]?Y:ee,0),k=I<=0?x.length-2:I-1,M=I>=x.length-1?1:I+1,O=x[k][b],F=x[I][b],N=x[M][b],$=x[k][P],j=x[I][P],U=x[M][P];return(F-O)*(U-$)-(N-O)*(j-$)<0?"clockwise":"counterclockwise"}function p(x,b,P,I){P=P||0,I=I||1;let k=!1;for(let M=0,O=b.length-1;M<b.length;O=M++)(b[M][P]<=x[P]&&x[P]<b[O][P]||b[O][P]<=x[P]&&x[P]<b[M][P])&&x[I]<(b[O][I]-b[M][I])*(x[P]-b[M][P])/(b[O][P]-b[M][P])+b[M][I]&&(k=!k);return k}function g(x){return x.map(v)}function v(x){return x.map(parseFloat)}return Su}var vv={},XB;function zwe(){if(XB)return vv;XB=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.XmlParser=void 0;function e(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function t(i){const o=/^(.+?)\[(.+?)\]>$/g.exec(i);return o?{evt:o[1]+">",exp:o[2]}:{evt:i}}function r(i){const o="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",o)}class n{constructor(o){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,o&&(this.queryParent=!!o.queryParent,this.progressive=o.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(o,l,a){a=a?a+".":"";const c=/<([^ >\/]+)(.*?)>/mg,p=[];let g=c.exec(o);for(;g;){const v=g[1],x={$tag:v},b=a+v,P=g[2].trim();let I=!1;(P.endsWith("/")||v.startsWith("?")||v.startsWith("!"))&&(I=!0);const k=/([^ ]+?)="(.+?)"/g,M=/([^ ]+?)='(.+?)'/g;let O=k.exec(P),F=!1;for(;O;)F=!0,x[O[1]]=O[2],O=k.exec(P);if(!F)for(O=M.exec(P);O;)F=!0,x[O[1]]=O[2],O=M.exec(P);if(!F&&P!==""&&(x.text=P),this.progressive&&this.emit(`<${b}>`,x,l),!I){const N=new RegExp(`([^]+?)</${v}>`,"g");N.lastIndex=c.lastIndex;const $=N.exec(o);if($&&$[1]){c.lastIndex=N.lastIndex;const j=this.parse($[1],x,b);j.length>0?x.$innerNodes=j:x.$innerText=$[1]}}this.queryParent&&l&&this.parentMap.set(x,l),this.progressive&&this.emit(`</${b}>`,x,l),p.push(x),g=c.exec(o)}return p}getParent(o){return this.queryParent?this.parentMap.get(o):null}addListener(o,l){if(e(o)){const a=t(o);a.exp&&(l.condition=r(a.exp)),o=a.evt}this.$addListener(o,l)}removeListener(o,l){e(o)&&(o=t(o).evt),this.$removeListener(o,l)}on(o,l){this.addListener(o,l)}off(o,l){this.removeListener(o,l)}$addListener(o,l){const a=this.evtListeners[o];a?a.push(l):this.evtListeners[o]=[l]}$removeListener(o,l){const a=this.evtListeners[o];let c=-1;a&&(c=a.indexOf(l)),c>=0&&a.splice(c,1)}emit(o,...l){const a=this.evtListeners[o];if(a)for(const c of a)c.condition?c.condition.apply(null,l)===!0&&c.apply(null,l):c.apply(null,l)}}return vv.XmlParser=n,vv}var bv={},_v={},YB;function $k(){if(YB)return _v;YB=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.OsmObject=void 0;class e{constructor(r,n,i){this.type=r,this.id=n,this.refElems=i,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,i&&i.add(this.getCompositeId(),this)}addTags(r){this.tags=Object.assign(this.tags,r),this.hasTag=!0}addTag(r,n){this.tags[r]=n,this.hasTag=!0}addProp(r,n){this.props[r]=n}addProps(r){this.props=Object.assign(this.props,r)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}}return _v.OsmObject=e,_v}var ZB;function fU(){if(ZB)return bv;ZB=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.Node=void 0;const e=$k(),t=T1();class r extends e.OsmObject{constructor(i,o){super("node",i,o)}setLatLng(i){this.latLng=i}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,t.strArrayToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}return bv.Node=r,bv}var yp={},xv={},KB;function hU(){if(KB)return xv;KB=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.LateBinder=void 0;class e{constructor(r,n,i,o){this.container=r,this.valueFunc=n,this.ctx=i,this.args=o}bind(){const r=this.valueFunc.apply(this.ctx,this.args),n=this.container.indexOf(this);if(n<0)return;const i=[n,1];r&&i.push(r),Array.prototype.splice.apply(this.container,i)}}return xv.LateBinder=e,xv}const jwe={},qwe={whitelist:["services","rest_area","escape","elevator"]},$we={blacklist:["coastline","cliff","ridge","arete","tree_row"]},Vwe={},Uwe={whitelist:["riverbank","dock","boatyard","dam"]},Gwe={},Hwe={},Wwe={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},Xwe={whitelist:["station","turntable","roundhouse","platform"]},Ywe={},Zwe={},Kwe={blacklist:["cutline","embankment","pipeline"]},Jwe={whitelist:["plant","substation","generator","transformer"]},Qwe={},eSe={},tSe={blacklist:["taxiway"]},rSe={},nSe={},iSe={},aSe={},oSe={},sSe={},lSe={},uSe={},cSe={},dSe={building:jwe,highway:qwe,natural:$we,landuse:Vwe,waterway:Uwe,amenity:Gwe,leisure:Hwe,barrier:Wwe,railway:Xwe,area:Ywe,boundary:Zwe,man_made:Kwe,power:Jwe,place:Qwe,shop:eSe,aeroway:tSe,tourism:rSe,historic:nSe,public_transport:iSe,office:aSe,"building:part":{},military:oSe,ruins:sSe,"area:highway":{},craft:lSe,golf:uSe,indoor:cSe};var JB;function pU(){if(JB)return yp;JB=1;var e=yp&&yp.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(yp,"__esModule",{value:!0}),yp.Way=void 0;const t=$k(),r=hU(),n=T1(),i=e(dSe);class o extends t.OsmObject{constructor(a,c){super("way",a,c),this.latLngArray=[],this.isPolygon=!1}addLatLng(a){this.latLngArray.push(a)}setLatLngArray(a){this.latLngArray=a}addNodeRef(a){const c=new r.LateBinder(this.latLngArray,p=>{const g=this.refElems.get(`node/${p}`);if(g)return g.refCount++,g.getLatLng()},this,[a]);this.latLngArray.push(c),this.refElems.addBinder(c)}addTags(a){super.addTags(a);for(const[c,p]of Object.entries(a))this.analyzeTag(c,p)}addTag(a,c){super.addTag(a,c),this.analyzeTag(a,c)}toCoordsArray(){return this.latLngArray.map(a=>[a.lon,a.lat])}toFeatureArray(){let a=this.toCoordsArray();if(a.length>1){const c=(0,n.strArrayArrayToFloat)(a),p={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:c}};return this.isPolygon&&(0,n.isRing)(c)?((0,n.ringDirection)(c)!=="counterclockwise"&&c.reverse(),p.geometry={type:"Polygon",coordinates:[c]},[p]):[p]}return[]}analyzeTag(a,c){const p=i.default[a];p&&(this.isPolygon=!0,p.whitelist?this.isPolygon=p.whitelist.indexOf(c)>=0:p.blacklist&&(this.isPolygon=!(p.blacklist.indexOf(c)>=0)))}}return yp.Way=o,yp}var wv={},Sv={},QB;function fSe(){if(QB)return Sv;QB=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.WayCollection=void 0;const e=T1();class t extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(n){const i=n.toCoordsArray();i.length>0&&(this.push(i),(0,e.addToMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.addToMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i))}mergeWays(){const n=[];let i=this.shift();for(;i;){(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i);let o=i,l;do{let a=this.getNextWay(o);l=a.next;let c=a.mergeType;if(l)switch(this.splice(this.indexOf(l),1),(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(l)),l),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(l)),l),c){case 0:o=o.concat(l.slice(1));break;case 1:l.reverse(),o=o.concat(l.slice(1));break;case 2:o.reverse(),o=o.concat(l.slice(1));break;case 3:o=l.concat(o.slice(1));break}}while(l);n.push((0,e.strArrayArrayToFloat)(o)),i=this.shift()}return n}getNextWay(n){const i=(0,e.coordsToKey)((0,e.last)(n)),o=(0,e.coordsToKey)((0,e.first)(n));let l=this.length>0?this[0]:null;if(l){const a=(0,e.coordsToKey)((0,e.first)(l)),c=(0,e.coordsToKey)((0,e.last)(l));if(i===a)return{next:l,mergeType:0};if(i===c)return{next:l,mergeType:1};if(o===a)return{next:l,mergeType:2};if(o===c)return{next:l,mergeType:3}}return l=(0,e.getFirstFromMap)(this.firstMap,i),l?{next:l,mergeType:0}:(l=(0,e.getFirstFromMap)(this.lastMap,i),{next:l,mergeType:1})}toRings(n){const i=this.mergeWays(),o=[];let l=i.shift();for(;l;)(0,e.isRing)(l)&&((0,e.ringDirection)(l)!==n&&l.reverse(),o.push(l)),l=i.shift();return o}}return Sv.WayCollection=t,Sv}var ez;function hSe(){if(ez)return wv;ez=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.Relation=void 0;const e=$k(),t=pU(),r=fU(),n=fSe(),i=hU(),o=T1();class l extends e.OsmObject{constructor(c,p){super("relation",c,p),this.relations=[],this.nodes=[],this.bounds=void 0,this.ways=[],this.roles=[]}setBounds(c){this.bounds=c}addMember(c){switch(c.type){case"relation":let p=new i.LateBinder(this.relations,v=>{const x=this.refElems.get(`relation/${v}`);if(x)return x.refCount++,x},this,[c.ref]);this.relations.push(p),this.refElems.addBinder(p);break;case"way":if(c.role||(c.role=""),c.geometry){const v=new t.Way(c.ref,this.refElems);v.setLatLngArray(c.geometry),v.refCount++,this.ways.push(v),this.roles.push(c.role)}else if(c.nodes){const v=new t.Way(c.ref,this.refElems);for(const x of c.nodes)v.addNodeRef(x);v.refCount++,this.ways.push(v),this.roles.push(c.role)}else{let v=new i.LateBinder(this.ways,x=>{const b=this.refElems.get(`way/${x}`);if(b)return b.refCount++,b},this,[c.ref]);this.ways.push(v),this.roles.push(c.role),this.refElems.addBinder(v)}break;case"node":let g=null;if(c.lat&&c.lon){g=new r.Node(c.ref,this.refElems),g.setLatLng({lon:c.lon,lat:c.lat}),c.tags&&g.addTags(c.tags);for(const[v,x]of Object.entries(c))["id","type","lat","lon"].indexOf(v)<0&&g.addProp(v,x);g.refCount++,this.nodes.push(g)}else{let v=new i.LateBinder(this.nodes,x=>{const b=this.refElems.get(`node/${x}`);if(b)return b.refCount++,b},this,[c.ref]);this.nodes.push(v),this.refElems.addBinder(v)}break}}constructStringGeometry(c){const p=c?c.mergeWays():[];return p.length===0?null:{type:"MultiLineString",coordinates:p}}constructPolygonGeometry(c,p){const g=c?c.toRings("counterclockwise"):[],v=p?p.toRings("clockwise"):[];if(g.length>0){const x=[];let b;for(b of g)x.push([b]);for(b=v.shift();b;){for(const P in g)if((0,o.pointInsidePolygon)((0,o.first)(b),g[P])){x[P].push(b);break}b=v.shift()}return x.length===1?{type:"Polygon",coordinates:x[0]}:{type:"MultiPolygon",coordinates:x}}return null}toFeatureArray(){const c=[],p=[];let g=[];for(const x of this.relations)if(x)for(let b=0;b<x.ways.length;b++){const P=x.ways[b];this.ways.push(P),this.roles.push(x.roles[b])}let v={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete v.bbox,this.roles.some(x=>x==="outer")){const x=new n.WayCollection,b=new n.WayCollection;for(let k=0;k<this.ways.length;k++){const M=this.ways[k],O=this.roles[k];O==="outer"?x.addWay(M):O==="inner"&&b.addWay(M)}let P=Object.assign({},v),I=this.constructPolygonGeometry(x,b);I&&(P.geometry=I,c.push(P))}else{const x=new n.WayCollection;for(let P of this.ways)x.addWay(P);let b=this.constructStringGeometry(x);if(b){let P=Object.assign({},v);P.geometry=b,p.push(P)}}for(let x of this.nodes)g=g.concat(x.toFeatureArray());return[...c,...p,...g]}}return wv.Relation=l,wv}var Cv={},tz;function pSe(){if(tz)return Cv;tz=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.RefElements=void 0;class e extends Map{constructor(){super(),this.binders=[]}add(r,n){this.set(r,n)}addBinder(r){this.binders.push(r)}bindAll(){this.binders.forEach(r=>r.bind())}}return Cv.RefElements=e,Cv}var v4,rz;function mSe(){if(rz)return v4;rz=1;const e=T1(),t=zwe(),r=fU(),n=pU(),i=hSe(),o=pSe();function l(v){if(!v)return{completeFeature:!1,renderTagged:!1,excludeWay:!0};let x=v.excludeWay===void 0||v.excludeWay,b=!!v.completeFeature,P=!!v.renderTagged;return{completeFeature:b,renderTagged:P,excludeWay:x}}function a(v){return v.elements?"json":v.indexOf("<osm")>=0?"xml":v.trim().startsWith("{")?"json-raw":"invalid"}function c(v,x){for(const b of v.elements)switch(b.type){case"node":const P=new r.Node(b.id,x);b.tags&&P.addTags(b.tags),P.addProps((0,e.purgeProps)(b,["id","type","tags","lat","lon"])),P.setLatLng(b);break;case"way":const I=new n.Way(b.id,x);if(b.tags&&I.addTags(b.tags),I.addProps((0,e.purgeProps)(b,["id","type","tags","nodes","geometry"])),b.geometry)I.setLatLngArray(b.geometry);else if(b.nodes)for(const M of b.nodes)I.addNodeRef(M);break;case"relation":const k=new i.Relation(b.id,x);if(b.bounds&&k.setBounds([parseFloat(b.bounds.minlon),parseFloat(b.bounds.minlat),parseFloat(b.bounds.maxlon),parseFloat(b.bounds.maxlat)]),b.tags&&k.addTags(b.tags),k.addProps((0,e.purgeProps)(b,["id","type","tags","bounds","members"])),b.members)for(const M of b.members)k.addMember(M)}}function p(v,x){const b=new t.XmlParser({progressive:!0});b.on("</osm.node>",P=>{const I=new r.Node(P.id,x);for(const[k,M]of Object.entries(P))!k.startsWith("$")&&["id","lon","lat"].indexOf(k)<0&&I.addProp(k,M);if(I.setLatLng(P),P.$innerNodes)for(const k of P.$innerNodes)k.$tag==="tag"&&I.addTag(k.k,k.v)}),b.on("</osm.way>",P=>{const I=new n.Way(P.id,x);for(const[k,M]of Object.entries(P))!k.startsWith("$")&&["id"].indexOf(k)<0&&I.addProp(k,M);if(P.$innerNodes)for(const k of P.$innerNodes)k.$tag==="nd"?k.lon&&k.lat?I.addLatLng(k):k.ref&&I.addNodeRef(k.ref):k.$tag==="tag"&&I.addTag(k.k,k.v)}),b.on("<osm.relation>",P=>new i.Relation(P.id,x)),b.on("</osm.relation.member>",(P,I)=>{const k=x.get(`relation/${I?.id}`),M={type:P.type,role:P.role?P.role:"",ref:P.ref};if(P.lat&&P.lon){M.lat=P.lat,M.lon=P.lon,M.tags={};for(const[O,F]of Object.entries(P))!O.startsWith("$")&&["type","lat","lon"].indexOf(O)<0&&(M[O]=F)}if(P.$innerNodes){const O=[],F=[];for(const N of P.$innerNodes)N.lat&&N.lon?O.push(N):N.ref&&F.push(N.ref);O.length>0?M.geometry=O:F.length>0&&(M.nodes=F)}k.addMember(M)}),b.on("</osm.relation.bounds>",(P,I)=>{x.get(`relation/${I?.id}`).setBounds([parseFloat(P.minlon),parseFloat(P.minlat),parseFloat(P.maxlon),parseFloat(P.maxlat)])}),b.on("</osm.relation.tag>",(P,I)=>{x.get(`relation/${I?.id}`).addTag(P.k,P.v)}),b.parse(v)}function g(v,x){let{completeFeature:b,renderTagged:P,excludeWay:I}=l(x),k=a(v);const M=new o.RefElements;let O=[];k==="json-raw"&&(v=JSON.parse(v),v.elements?k="json":k="invalid"),k==="json"?c(v,M):k==="xml"&&p(v,M),M.bindAll();for(const F of M.values()){if(F.refCount>0&&(!F.hasTag||!P||F instanceof n.Way&&I))continue;const N=F.toFeatureArray();if(F instanceof i.Relation&&!b&&N.length>0)return N[0].geometry;O=O.concat(N)}return{type:"FeatureCollection",features:O}}return v4=g,v4}var gSe=mSe();const ySe=rf(gSe);async function vSe(e){const t=e.options||{};return await new Promise((n,i)=>{uw(e.filename).then(o=>{const l=ySe(o,t);l?n(l):i("Conversion failed")})})}const bSe=async e=>{const t=lw(e.url),r=await vSe(t);if(r!==void 0)return{data:r};throw new Error("OSM File not found "+t.filename)};function _Se(e){const t=[];return e.features.forEach(r=>{r.features?r.features.forEach(n=>{t.push({type:n.type,geometry:n.geometry,properties:n.properties})}):t.push({type:r.type,geometry:r.geometry,properties:r.properties})}),t}async function xSe(e){return await new Promise(r=>{let n={type:"Topology",objects:{key:""},arcs:[]};uw(e.filename).then(i=>{try{n=JSON.parse(i)}catch(l){throw console.error("Error converting topojson",l),"Invalid TopoJson"}let o={type:"FeatureCollection",features:[]};if(n.type==="Topology"&&n.objects!==void 0){const l=n.objects;Object.keys(n.objects).map(a=>{l?.[a].type==="GeometryCollection"?l?.[a].geometries?.forEach(c=>c.properties={fromObject:a,...c.properties}):l?.[a]&&l?.[a]?.type!=="GeometryCollection"&&(l[a].properties={fromObject:a,...l?.[a].properties})}),o={type:"FeatureCollection",features:Object.keys(n.objects).map(a=>Che(n,a))},o.features=_Se(o)}r(o)})})}const wSe=async e=>{const t=lw(e.url),r=await xSe(t);if(r!==void 0)return{data:r};throw new Error("Topojson not found "+t.filename)};function Ps(e,t){return Array.from(e.getElementsByTagName(t))}function Rx(e){return e[0]==="#"?e:`#${e}`}function SSe(e,t,r){return Array.from(e.getElementsByTagNameNS(r,t))}function Jo(e){return e?.normalize(),e?.textContent||""}function Eo(e,t,r){const n=e.getElementsByTagName(t),i=n.length?n[0]:null;return i&&r&&r(i),i}function bc(e,t,r){const n={};if(!e)return n;const i=e.getElementsByTagName(t),o=i.length?i[0]:null;return o&&r?r(o,n):n}function Kp(e,t,r){const n=Jo(Eo(e,t));return n&&r?r(n)||{}:{}}function nz(e,t,r){const n=Number.parseFloat(Jo(Eo(e,t)));if(!Number.isNaN(n))return n&&r?r(n)||{}:{}}function jl(e,t,r){const n=Number.parseFloat(Jo(Eo(e,t)));if(!Number.isNaN(n))return r&&r(n),n}function Jp(e,t){const r={};for(const n of t)Kp(e,n,i=>{r[n]=i});return r}function P1(e){return e?.nodeType===1}function mU(e){let t=[];if(e===null)return t;for(const r of Array.from(e.childNodes)){if(!P1(r))continue;const n=CSe(r.nodeName);if(n==="gpxtpx:TrackPointExtension")t=t.concat(mU(r));else{const i=Jo(r);t.push([n,ESe(i)])}}return t}function CSe(e){return["heart","gpxtpx:hr","hr"].includes(e)?"heart":e}function ESe(e){const t=Number.parseFloat(e);return Number.isNaN(t)?e:t}function gU(e){const t=[Number.parseFloat(e.getAttribute("lon")||""),Number.parseFloat(e.getAttribute("lat")||"")];if(Number.isNaN(t[0])||Number.isNaN(t[1]))return null;jl(e,"ele",n=>{t.push(n)});const r=Eo(e,"time");return{coordinates:t,time:r?Jo(r):null,extendedValues:mU(Eo(e,"extensions"))}}function yU(e){return bc(e,"line",t=>Object.assign({},Kp(t,"color",n=>({stroke:`#${n}`})),nz(t,"opacity",n=>({"stroke-opacity":n})),nz(t,"width",n=>({"stroke-width":n*96/25.4}))))}function Vk(e,t){const r=Jp(t,["name","cmt","desc","type","time","keywords"]);for(const[i,o]of e)for(const l of Array.from(t.getElementsByTagNameNS(o,"*")))r[l.tagName.replace(":","_")]=Jo(l)?.trim();const n=Ps(t,"link");return n.length&&(r.links=n.map(i=>Object.assign({href:i.getAttribute("href")},Jp(i,["text","type"])))),r}function vU(e,t){const r=Ps(e,t),n=[],i=[],o={};for(let l=0;l<r.length;l++){const a=gU(r[l]);if(a){n.push(a.coordinates),a.time&&i.push(a.time);for(const[c,p]of a.extendedValues){const g=c==="heart"?c:`${c.replace("gpxtpx:","")}s`;o[g]||(o[g]=Array(r.length).fill(null)),o[g][l]=p}}}if(!(n.length<2))return{line:n,times:i,extendedValues:o}}function TSe(e,t){const r=vU(t,"rtept");if(r)return{type:"Feature",properties:Object.assign({_gpxType:"rte"},Vk(e,t),yU(Eo(t,"extensions"))),geometry:{type:"LineString",coordinates:r.line}}}function PSe(e,t){const r=Ps(t,"trkseg"),n=[],i=[],o=[];for(const c of r){const p=vU(c,"trkpt");p&&(o.push(p),p.times?.length&&i.push(p.times))}if(o.length===0)return null;const l=o.length>1,a=Object.assign({_gpxType:"trk"},Vk(e,t),yU(Eo(t,"extensions")),i.length?{coordinateProperties:{times:l?i:i[0]}}:{});for(let c=0;c<o.length;c++){const p=o[c];n.push(p.line),a.coordinateProperties||(a.coordinateProperties={});const g=a.coordinateProperties;for(const[v,x]of Object.entries(p.extendedValues))l?(g[v]||(g[v]=o.map(b=>new Array(b.line.length).fill(null))),g[v][c]=x):g[v]=x}return{type:"Feature",properties:a,geometry:l?{type:"MultiLineString",coordinates:n}:{type:"LineString",coordinates:n[0]}}}function ISe(e,t){const r=Object.assign(Vk(e,t),Jp(t,["sym"])),n=gU(t);return n?{type:"Feature",properties:r,geometry:{type:"Point",coordinates:n.coordinates}}:null}function*bU(e){const t=e,r="gpxx",n="http://www.garmin.com/xmlschemas/GpxExtensions/v3",i=[[r,n]],o=t.getElementsByTagName("gpx")[0]?.attributes;if(o)for(const l of Array.from(o))l.name?.startsWith("xmlns:")&&l.value!==n&&i.push([l.name,l.value]);for(const l of Ps(t,"trk")){const a=PSe(i,l);a&&(yield a)}for(const l of Ps(t,"rte")){const a=TSe(i,l);a&&(yield a)}for(const l of Ps(t,"wpt")){const a=ISe(i,l);a&&(yield a)}}function kSe(e){return{type:"FeatureCollection",features:Array.from(bU(e))}}const ASe="http://www.garmin.com/xmlschemas/ActivityExtension/v2",MSe=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],LSe=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]];function _U(e,t){const r=[];for(const[n,i]of t){let o=Eo(e,n);if(!o){const a=e.getElementsByTagNameNS(ASe,n);a.length&&(o=a[0])}const l=Number.parseFloat(Jo(o));Number.isNaN(l)||r.push([i,l])}return r}function RSe(e){const t=[jl(e,"LongitudeDegrees"),jl(e,"LatitudeDegrees")];if(t[0]===void 0||Number.isNaN(t[0])||t[1]===void 0||Number.isNaN(t[1]))return null;const r=Eo(e,"HeartRateBpm"),n=Jo(Eo(e,"Time"));return Eo(e,"AltitudeMeters",i=>{const o=Number.parseFloat(Jo(i));Number.isNaN(o)||t.push(o)}),{coordinates:t,time:n||null,heartRate:r?Number.parseFloat(Jo(r)):null,extensions:_U(e,MSe)}}function DSe(e){const t=Ps(e,"Trackpoint"),r=[],n=[],i=[];if(t.length<2)return null;const o={},l={extendedProperties:o};for(let a=0;a<t.length;a++){const c=RSe(t[a]);if(c===null)continue;r.push(c.coordinates);const{time:p,heartRate:g,extensions:v}=c;p&&n.push(p),g&&i.push(g);for(const[x,b]of v)o[x]||(o[x]=Array(t.length).fill(null)),o[x][a]=b}return r.length<2?null:Object.assign(l,{line:r,times:n,heartRates:i})}function iz(e){const t=Ps(e,"Track"),r=[],n=[],i=[],o=[];let l;const a=Object.assign(Object.fromEntries(_U(e,LSe)),bc(e,"Name",c=>({name:Jo(c)})));for(const c of t)l=DSe(c),l&&(r.push(l.line),l.times.length&&n.push(l.times),l.heartRates.length&&i.push(l.heartRates),o.push(l.extendedProperties));for(let c=0;c<o.length;c++){const p=o[c];for(const g in p)t.length===1?l&&(a[g]=l.extendedProperties[g]):(a[g]||(a[g]=r.map(v=>Array(v.length).fill(null))),a[g][c]=p[g])}return r.length===0?null:((n.length||i.length)&&(a.coordinateProperties=Object.assign(n.length?{times:r.length===1?n[0]:n}:{},i.length?{heart:r.length===1?i[0]:i}:{})),{type:"Feature",properties:a,geometry:r.length===1?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}})}function*xU(e){for(const t of Ps(e,"Lap")){const r=iz(t);r&&(yield r)}for(const t of Ps(e,"Courses")){const r=iz(t);r&&(yield r)}}function NSe(e){return{type:"FeatureCollection",features:Array.from(xU(e))}}function wU(e,t){const r={},n=t==="stroke"||t==="fill"?t:`${t}-color`;return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?r[n]=`#${e}`:e.length===8&&(r[`${t}-opacity`]=Number.parseInt(e.substring(0,2),16)/255,r[n]=`#${e.substring(6,8)}${e.substring(4,6)}${e.substring(2,4)}`),r}function Dx(e,t,r){const n={};return jl(e,t,i=>{n[r]=i}),n}function Uk(e,t){return bc(e,"color",r=>wU(Jo(r),t))}function Gk(e){return bc(e,"Icon",(t,r)=>(Kp(t,"href",n=>{r.icon=n}),r))}function OSe(e){return bc(e,"IconStyle",t=>Object.assign(Uk(t,"icon"),Dx(t,"scale","icon-scale"),Dx(t,"heading","icon-heading"),bc(t,"hotSpot",r=>{const n=Number.parseFloat(r.getAttribute("x")||""),i=Number.parseFloat(r.getAttribute("y")||""),o=r.getAttribute("xunits")||"",l=r.getAttribute("yunits")||"";return!Number.isNaN(n)&&!Number.isNaN(i)?{"icon-offset":[n,i],"icon-offset-units":[o,l]}:{}}),Gk(t)))}function FSe(e){return bc(e,"LabelStyle",t=>Object.assign(Uk(t,"label"),Dx(t,"scale","label-scale")))}function BSe(e){return bc(e,"LineStyle",t=>Object.assign(Uk(t,"stroke"),Dx(t,"width","stroke-width")))}function zSe(e){return bc(e,"PolyStyle",(t,r)=>Object.assign(r,bc(t,"color",n=>wU(Jo(n),"fill")),Kp(t,"fill",n=>{if(n==="0")return{"fill-opacity":0}}),Kp(t,"outline",n=>{if(n==="0")return{"stroke-opacity":0}})))}function cw(e){return Object.assign({},zSe(e),BSe(e),FSe(e),OSe(e))}const jSe=/\s*/g,qSe=/^\s*|\s*$/g,$Se=/\s+/;function SU(e){return e.replace(jSe,"").split(",").map(Number.parseFloat).filter(t=>!Number.isNaN(t)).slice(0,3)}function A3(e){return e.replace(qSe,"").split($Se).map(SU).filter(t=>t.length>=2)}function VSe(e){let t=Ps(e,"coord");t.length===0&&(t=SSe(e,"coord","*"));const r=t.map(n=>Jo(n).split(" ").map(Number.parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:Ps(e,"when").map(n=>Jo(n))}}function CU(e){if(e.length===0)return e;const t=e[0],r=e[e.length-1];let n=!0;for(let i=0;i<Math.max(t.length,r.length);i++)if(t[i]!==r[i]){n=!1;break}return n?e:e.concat([e[0]])}function S_(e){return Jo(Eo(e,"coordinates"))}function EU(e){let t=[],r=[];for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes.item(n);if(P1(i))switch(i.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const o=EU(i);t=t.concat(o.geometries),r=r.concat(o.coordTimes);break}case"Point":{const o=SU(S_(i));o.length>=2&&t.push({type:"Point",coordinates:o});break}case"LinearRing":case"LineString":{const o=A3(S_(i));o.length>=2&&t.push({type:"LineString",coordinates:o});break}case"Polygon":{const o=[];for(const l of Ps(i,"LinearRing")){const a=CU(A3(S_(l)));a.length>=4&&o.push(a)}o.length&&t.push({type:"Polygon",coordinates:o});break}case"Track":case"gx:Track":{const o=VSe(i);if(!o)break;const{times:l,geometry:a}=o;t.push(a),l.length&&r.push(l);break}}}return{geometries:t,coordTimes:r}}const ig=e=>Number(e),M3={string:e=>e,int:ig,uint:ig,short:ig,ushort:ig,float:ig,double:ig,bool:e=>!!e};function Hk(e,t){return bc(e,"ExtendedData",(r,n)=>{for(const i of Ps(r,"Data"))n[i.getAttribute("name")||""]=Jo(Eo(i,"value"));for(const i of Ps(r,"SimpleData")){const o=i.getAttribute("name")||"",l=t[o]||M3.string;n[o]=l(Jo(i))}return n})}function Wk(e){const t=Eo(e,"description");for(const r of Array.from(t?.childNodes||[]))if(r.nodeType===4)return{description:{"@type":"html",value:Jo(r)}};return{}}function Xk(e){return bc(e,"TimeSpan",t=>({timespan:{begin:Jo(Eo(t,"begin")),end:Jo(Eo(t,"end"))}}))}function Yk(e){return bc(e,"TimeStamp",t=>({timestamp:Jo(Eo(t,"when"))}))}function Zk(e,t){return Kp(e,"styleUrl",r=>(r=Rx(r),t[r]?Object.assign({styleUrl:r},t[r]):{styleUrl:r}))}var Tc;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(Tc||(Tc={}));function USe(e){switch(e?.textContent){case Tc.ABSOLUTE:return Tc.ABSOLUTE;case Tc.CLAMP_TO_GROUND:return Tc.CLAMP_TO_GROUND;case Tc.CLAMP_TO_SEAFLOOR:return Tc.CLAMP_TO_SEAFLOOR;case Tc.RELATIVE_TO_GROUND:return Tc.RELATIVE_TO_GROUND;case Tc.RELATIVE_TO_SEAFLOOR:return Tc.RELATIVE_TO_SEAFLOOR}return null}function GSe(e){return Eo(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[CU(A3(S_(e)))]}}:XSe(e)}const HSe=Math.PI/180;function WSe(e,t,r){const n=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[t[0].map(i=>{const o=i[1]-n[1],l=i[0]-n[0],a=Math.sqrt(o**2+l**2),c=Math.atan2(o,l)+r*HSe;return[n[0]+Math.cos(c)*a,n[1]+Math.sin(c)*a]})]}function XSe(e){const t=Eo(e,"LatLonBox");if(t){const r=jl(t,"north"),n=jl(t,"west"),i=jl(t,"east"),o=jl(t,"south"),l=jl(t,"rotation");if(typeof r=="number"&&typeof o=="number"&&typeof n=="number"&&typeof i=="number"){const a=[n,o,i,r];let c=[[[n,r],[i,r],[i,o],[n,o],[n,r]]];return typeof l=="number"&&(c=WSe(a,c,l)),{bbox:a,geometry:{type:"Polygon",coordinates:c}}}}return null}function TU(e,t,r,n){const i=GSe(e),o=i?.geometry||null;if(!o&&n.skipNullGeometry)return null;const l={type:"Feature",geometry:o,properties:Object.assign({"@geometry-type":"groundoverlay"},Jp(e,["name","address","visibility","open","phoneNumber","description"]),Wk(e),Zk(e,t),cw(e),Gk(e),Hk(e,r),Xk(e),Yk(e))};i?.bbox&&(l.bbox=i.bbox),l.properties?.visibility!==void 0&&(l.properties.visibility=l.properties.visibility!=="0");const a=e.getAttribute("id");return a!==null&&a!==""&&(l.id=a),l}function YSe(e){const t=Eo(e,"Region");return t?{coordinateBox:KSe(t),lod:ZSe(e)}:null}function ZSe(e){const t=Eo(e,"Lod");return t?[jl(t,"minLodPixels")??-1,jl(t,"maxLodPixels")??-1,jl(t,"minFadeExtent")??null,jl(t,"maxFadeExtent")??null]:null}function KSe(e){const t=Eo(e,"LatLonAltBox");if(t){const r=jl(t,"north"),n=jl(t,"west"),i=jl(t,"east"),o=jl(t,"south");if(USe(Eo(t,"altitudeMode")||Eo(t,"gx:altitudeMode"))&&console.debug("Encountered an unsupported feature of KML for togeojson: please contact developers for support of altitude mode."),typeof r=="number"&&typeof o=="number"&&typeof n=="number"&&typeof i=="number")return{bbox:[n,o,i,r],geometry:{type:"Polygon",coordinates:[[[n,r],[i,r],[i,o],[n,o],[n,r]]]}}}return null}function JSe(e){const t=Eo(e,"Link");return t?Jp(t,["href","refreshMode","refreshInterval","viewRefreshMode","viewRefreshTime","viewBoundScale","viewFormat","httpQuery"]):{}}function PU(e,t,r,n){const i=YSe(e),o=i?.coordinateBox?.geometry||null;if(!o&&n.skipNullGeometry)return null;const l={type:"Feature",geometry:o,properties:Object.assign({"@geometry-type":"networklink"},Jp(e,["name","address","visibility","open","phoneNumber","styleUrl","refreshVisibility","flyToView","description"]),Wk(e),Zk(e,t),cw(e),Gk(e),Hk(e,r),Xk(e),Yk(e),JSe(e),i?.lod?{lod:i.lod}:{})};i?.coordinateBox?.bbox&&(l.bbox=i.coordinateBox.bbox),l.properties?.visibility!==void 0&&(l.properties.visibility=l.properties.visibility!=="0");const a=e.getAttribute("id");return a!==null&&a!==""&&(l.id=a),l}function QSe(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function IU(e,t,r,n){const{coordTimes:i,geometries:o}=EU(e),l=QSe(o);if(!l&&n.skipNullGeometry)return null;const a={type:"Feature",geometry:l,properties:Object.assign(Jp(e,["name","address","visibility","open","phoneNumber","description"]),Wk(e),Zk(e,t),cw(e),Hk(e,r),Xk(e),Yk(e),i.length?{coordinateProperties:{times:i.length===1?i[0]:i}}:{})};a.properties?.visibility!==void 0&&(a.properties.visibility=a.properties.visibility!=="0");const c=e.getAttribute("id");return c!==null&&c!==""&&(a.id=c),a}function e5e(e){let t=e.getAttribute("id");const r=e.parentNode;return!t&&P1(r)&&r.localName==="CascadingStyle"&&(t=r.getAttribute("kml:id")||r.getAttribute("id")),Rx(t||"")}function kU(e){const t={};for(const r of Ps(e,"Style"))t[e5e(r)]=cw(r);for(const r of Ps(e,"StyleMap")){const n=Rx(r.getAttribute("id")||"");Kp(r,"styleUrl",i=>{i=Rx(i),t[i]&&(t[n]=t[i])})}return t}function AU(e){const t={};for(const r of Ps(e,"SimpleField"))t[r.getAttribute("name")||""]=M3[r.getAttribute("type")||""]||M3.string;return t}const t5e=["name","visibility","open","address","description","phoneNumber","visibility"];function r5e(e){const t={};for(const r of Array.from(e.childNodes))P1(r)&&t5e.includes(r.tagName)&&(t[r.tagName]=Jo(r));return{type:"folder",meta:t,children:[]}}function n5e(e,t={skipNullGeometry:!1}){const r=e,n=kU(r),i=AU(r),o={type:"root",children:[]};function l(a,c,p){if(P1(a))switch(a.tagName){case"GroundOverlay":{const g=TU(a,n,i,p);g&&c.children.push(g);break}case"Placemark":{const g=IU(a,n,i,p);g&&c.children.push(g);break}case"Folder":{const g=r5e(a);c.children.push(g),c=g;break}case"NetworkLink":{const g=PU(a,n,i,p);g&&c.children.push(g);break}}if(a.childNodes)for(let g=0;g<a.childNodes.length;g++)l(a.childNodes[g],c,p)}return l(r,o,t),o}function*MU(e,t={skipNullGeometry:!1}){const r=e,n=kU(r),i=AU(r);for(const o of Ps(r,"Placemark")){const l=IU(o,n,i,t);l&&(yield l)}for(const o of Ps(r,"GroundOverlay")){const l=TU(o,n,i,t);l&&(yield l)}for(const o of Ps(r,"NetworkLink")){const l=PU(o,n,i,t);l&&(yield l)}}function i5e(e,t={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(MU(e,t))}}const a5e=Object.freeze(Object.defineProperty({__proto__:null,gpx:kSe,gpxGen:bU,kml:i5e,kmlGen:MU,kmlWithFolders:n5e,tcx:NSe,tcxGen:xU},Symbol.toStringTag,{value:"Module"}));async function o5e(e){return await new Promise((r,n)=>{uw(e.filename).then(i=>{const o=()=>e.protocolId==="tcx"?a5e[e.protocolId](new DOMParser().parseFromString(i,"text/xml")):rU[e.protocolId](new DOMParser().parseFromString(i,"text/xml"));o()?r(o()):n("Conversion failed")})})}const b4=async e=>{const t=lw(e.url),r=await o5e(t);if(r!==void 0)return{data:r};throw new Error("XML not found "+t.filename)},L3=e=>{const t=la({mapId:void 0}),r=Q.useRef(!1);Q.useEffect(()=>{if(!(!t.map||r.current))return t.map?.loadImage(e.imagePath).then(function(n){if(!n?.data){console.log("image "+e.imagePath+"could not be loaded");return}t.map?.addImage(e.imageId,n.data)}),()=>{t.map?.removeImage(e.imageId)}},[t.map,e])};L3.defaultProps={mapId:void 0};try{L3.displayName="useAddImage",L3.__docgenInfo={description:"",displayName:"useAddImage",props:{imageId:{defaultValue:null,description:"",name:"imageId",required:!0,type:{name:"string"}},imagePath:{defaultValue:null,description:"",name:"imagePath",required:!0,type:{name:"string"}}}}}catch{}const s5e=ft.createContext({}),R3=s5e.Provider;try{R3.displayName="SimpleDataContextProvider",R3.__docgenInfo={description:"",displayName:"SimpleDataContextProvider",props:{}}}catch{}var l5e={value:()=>{}};function LU(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new C_(r)}function C_(e){this._=e}function u5e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}C_.prototype=LU.prototype={constructor:C_,on:function(e,t){var r=this._,n=u5e(e+"",r),i,o=-1,l=n.length;if(arguments.length<2){for(;++o<l;)if((i=(e=n[o]).type)&&(i=c5e(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=n[o]).type)r[i]=az(r[i],e.name,t);else if(t==null)for(i in r)r[i]=az(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new C_(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function c5e(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function az(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=l5e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var D3="http://www.w3.org/1999/xhtml";const oz={svg:"http://www.w3.org/2000/svg",xhtml:D3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dw(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),oz.hasOwnProperty(t)?{space:oz[t],local:e}:e}function d5e(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===D3&&t.documentElement.namespaceURI===D3?t.createElement(e):t.createElementNS(r,e)}}function f5e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function RU(e){var t=dw(e);return(t.local?f5e:d5e)(t)}function h5e(){}function Kk(e){return e==null?h5e:function(){return this.querySelector(e)}}function p5e(e){typeof e!="function"&&(e=Kk(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,a=n[i]=new Array(l),c,p,g=0;g<l;++g)(c=o[g])&&(p=e.call(c,c.__data__,g,o))&&("__data__"in c&&(p.__data__=c.__data__),a[g]=p);return new md(n,this._parents)}function m5e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function g5e(){return[]}function DU(e){return e==null?g5e:function(){return this.querySelectorAll(e)}}function y5e(e){return function(){return m5e(e.apply(this,arguments))}}function v5e(e){typeof e=="function"?e=y5e(e):e=DU(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var l=t[o],a=l.length,c,p=0;p<a;++p)(c=l[p])&&(n.push(e.call(c,c.__data__,p,l)),i.push(c));return new md(n,i)}function NU(e){return function(){return this.matches(e)}}function OU(e){return function(t){return t.matches(e)}}var b5e=Array.prototype.find;function _5e(e){return function(){return b5e.call(this.children,e)}}function x5e(){return this.firstElementChild}function w5e(e){return this.select(e==null?x5e:_5e(typeof e=="function"?e:OU(e)))}var S5e=Array.prototype.filter;function C5e(){return Array.from(this.children)}function E5e(e){return function(){return S5e.call(this.children,e)}}function T5e(e){return this.selectAll(e==null?C5e:E5e(typeof e=="function"?e:OU(e)))}function P5e(e){typeof e!="function"&&(e=NU(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,a=n[i]=[],c,p=0;p<l;++p)(c=o[p])&&e.call(c,c.__data__,p,o)&&a.push(c);return new md(n,this._parents)}function FU(e){return new Array(e.length)}function I5e(){return new md(this._enter||this._groups.map(FU),this._parents)}function Nx(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Nx.prototype={constructor:Nx,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function k5e(e){return function(){return e}}function A5e(e,t,r,n,i,o){for(var l=0,a,c=t.length,p=o.length;l<p;++l)(a=t[l])?(a.__data__=o[l],n[l]=a):r[l]=new Nx(e,o[l]);for(;l<c;++l)(a=t[l])&&(i[l]=a)}function M5e(e,t,r,n,i,o,l){var a,c,p=new Map,g=t.length,v=o.length,x=new Array(g),b;for(a=0;a<g;++a)(c=t[a])&&(x[a]=b=l.call(c,c.__data__,a,t)+"",p.has(b)?i[a]=c:p.set(b,c));for(a=0;a<v;++a)b=l.call(e,o[a],a,o)+"",(c=p.get(b))?(n[a]=c,c.__data__=o[a],p.delete(b)):r[a]=new Nx(e,o[a]);for(a=0;a<g;++a)(c=t[a])&&p.get(x[a])===c&&(i[a]=c)}function L5e(e){return e.__data__}function R5e(e,t){if(!arguments.length)return Array.from(this,L5e);var r=t?M5e:A5e,n=this._parents,i=this._groups;typeof e!="function"&&(e=k5e(e));for(var o=i.length,l=new Array(o),a=new Array(o),c=new Array(o),p=0;p<o;++p){var g=n[p],v=i[p],x=v.length,b=D5e(e.call(g,g&&g.__data__,p,n)),P=b.length,I=a[p]=new Array(P),k=l[p]=new Array(P),M=c[p]=new Array(x);r(g,v,I,k,M,b,t);for(var O=0,F=0,N,$;O<P;++O)if(N=I[O]){for(O>=F&&(F=O+1);!($=k[F])&&++F<P;);N._next=$||null}}return l=new md(l,n),l._enter=a,l._exit=c,l}function D5e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function N5e(){return new md(this._exit||this._groups.map(FU),this._parents)}function O5e(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function F5e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,l=Math.min(i,o),a=new Array(i),c=0;c<l;++c)for(var p=r[c],g=n[c],v=p.length,x=a[c]=new Array(v),b,P=0;P<v;++P)(b=p[P]||g[P])&&(x[P]=b);for(;c<i;++c)a[c]=r[c];return new md(a,this._parents)}function B5e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],l;--i>=0;)(l=n[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function z5e(e){e||(e=j5e);function t(v,x){return v&&x?e(v.__data__,x.__data__):!v-!x}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var l=r[o],a=l.length,c=i[o]=new Array(a),p,g=0;g<a;++g)(p=l[g])&&(c[g]=p);c.sort(t)}return new md(i,this._parents).order()}function j5e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function q5e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $5e(){return Array.from(this)}function V5e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var l=n[i];if(l)return l}return null}function U5e(){let e=0;for(const t of this)++e;return e}function G5e(){return!this.node()}function H5e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,l=i.length,a;o<l;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function W5e(e){return function(){this.removeAttribute(e)}}function X5e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Y5e(e,t){return function(){this.setAttribute(e,t)}}function Z5e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function K5e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function J5e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Q5e(e,t){var r=dw(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?X5e:W5e:typeof t=="function"?r.local?J5e:K5e:r.local?Z5e:Y5e)(r,t))}function BU(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eCe(e){return function(){this.style.removeProperty(e)}}function tCe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function rCe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function nCe(e,t,r){return arguments.length>1?this.each((t==null?eCe:typeof t=="function"?rCe:tCe)(e,t,r??"")):gy(this.node(),e)}function gy(e,t){return e.style.getPropertyValue(t)||BU(e).getComputedStyle(e,null).getPropertyValue(t)}function iCe(e){return function(){delete this[e]}}function aCe(e,t){return function(){this[e]=t}}function oCe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function sCe(e,t){return arguments.length>1?this.each((t==null?iCe:typeof t=="function"?oCe:aCe)(e,t)):this.node()[e]}function zU(e){return e.trim().split(/^|\s+/)}function Jk(e){return e.classList||new jU(e)}function jU(e){this._node=e,this._names=zU(e.getAttribute("class")||"")}jU.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function qU(e,t){for(var r=Jk(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function $U(e,t){for(var r=Jk(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function lCe(e){return function(){qU(this,e)}}function uCe(e){return function(){$U(this,e)}}function cCe(e,t){return function(){(t.apply(this,arguments)?qU:$U)(this,e)}}function dCe(e,t){var r=zU(e+"");if(arguments.length<2){for(var n=Jk(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?cCe:t?lCe:uCe)(r,t))}function fCe(){this.textContent=""}function hCe(e){return function(){this.textContent=e}}function pCe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mCe(e){return arguments.length?this.each(e==null?fCe:(typeof e=="function"?pCe:hCe)(e)):this.node().textContent}function gCe(){this.innerHTML=""}function yCe(e){return function(){this.innerHTML=e}}function vCe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function bCe(e){return arguments.length?this.each(e==null?gCe:(typeof e=="function"?vCe:yCe)(e)):this.node().innerHTML}function _Ce(){this.nextSibling&&this.parentNode.appendChild(this)}function xCe(){return this.each(_Ce)}function wCe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function SCe(){return this.each(wCe)}function CCe(e){var t=typeof e=="function"?e:RU(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ECe(){return null}function TCe(e,t){var r=typeof e=="function"?e:RU(e),n=t==null?ECe:typeof t=="function"?t:Kk(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function PCe(){var e=this.parentNode;e&&e.removeChild(this)}function ICe(){return this.each(PCe)}function kCe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ACe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MCe(e){return this.select(e?ACe:kCe)}function LCe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function RCe(e){return function(t){e.call(this,t,this.__data__)}}function DCe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function NCe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function OCe(e,t,r){return function(){var n=this.__on,i,o=RCe(t);if(n){for(var l=0,a=n.length;l<a;++l)if((i=n[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function FCe(e,t,r){var n=DCe(e+""),i,o=n.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,p=a.length,g;c<p;++c)for(i=0,g=a[c];i<o;++i)if((l=n[i]).type===g.type&&l.name===g.name)return g.value}return}for(a=t?OCe:NCe,i=0;i<o;++i)this.each(a(n[i],t,r));return this}function VU(e,t,r){var n=BU(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function BCe(e,t){return function(){return VU(this,e,t)}}function zCe(e,t){return function(){return VU(this,e,t.apply(this,arguments))}}function jCe(e,t){return this.each((typeof t=="function"?zCe:BCe)(e,t))}function*qCe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,l;i<o;++i)(l=n[i])&&(yield l)}var $Ce=[null];function md(e,t){this._groups=e,this._parents=t}function I1(){return new md([[document.documentElement]],$Ce)}function VCe(){return this}md.prototype=I1.prototype={constructor:md,select:p5e,selectAll:v5e,selectChild:w5e,selectChildren:T5e,filter:P5e,data:R5e,enter:I5e,exit:N5e,join:O5e,merge:F5e,selection:VCe,order:B5e,sort:z5e,call:q5e,nodes:$5e,node:V5e,size:U5e,empty:G5e,each:H5e,attr:Q5e,style:nCe,property:sCe,classed:dCe,text:mCe,html:bCe,raise:xCe,lower:SCe,append:CCe,insert:TCe,remove:ICe,clone:MCe,datum:LCe,on:FCe,dispatch:jCe,[Symbol.iterator]:qCe};function Qk(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function UU(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function k1(){}var V0=.7,Ox=1/V0,Yg="\\s*([+-]?\\d+)\\s*",U0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UCe=/^#([0-9a-f]{3,8})$/,GCe=new RegExp(`^rgb\\(${Yg},${Yg},${Yg}\\)$`),HCe=new RegExp(`^rgb\\(${Kd},${Kd},${Kd}\\)$`),WCe=new RegExp(`^rgba\\(${Yg},${Yg},${Yg},${U0}\\)$`),XCe=new RegExp(`^rgba\\(${Kd},${Kd},${Kd},${U0}\\)$`),YCe=new RegExp(`^hsl\\(${U0},${Kd},${Kd}\\)$`),ZCe=new RegExp(`^hsla\\(${U0},${Kd},${Kd},${U0}\\)$`),sz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qk(k1,G0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lz,formatHex:lz,formatHex8:KCe,formatHsl:JCe,formatRgb:uz,toString:uz});function lz(){return this.rgb().formatHex()}function KCe(){return this.rgb().formatHex8()}function JCe(){return GU(this).formatHsl()}function uz(){return this.rgb().formatRgb()}function G0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=UCe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?cz(t):r===3?new Fu(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Kb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Kb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=GCe.exec(e))?new Fu(t[1],t[2],t[3],1):(t=HCe.exec(e))?new Fu(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=WCe.exec(e))?Kb(t[1],t[2],t[3],t[4]):(t=XCe.exec(e))?Kb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=YCe.exec(e))?hz(t[1],t[2]/100,t[3]/100,1):(t=ZCe.exec(e))?hz(t[1],t[2]/100,t[3]/100,t[4]):sz.hasOwnProperty(e)?cz(sz[e]):e==="transparent"?new Fu(NaN,NaN,NaN,0):null}function cz(e){return new Fu(e>>16&255,e>>8&255,e&255,1)}function Kb(e,t,r,n){return n<=0&&(e=t=r=NaN),new Fu(e,t,r,n)}function QCe(e){return e instanceof k1||(e=G0(e)),e?(e=e.rgb(),new Fu(e.r,e.g,e.b,e.opacity)):new Fu}function N3(e,t,r,n){return arguments.length===1?QCe(e):new Fu(e,t,r,n??1)}function Fu(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Qk(Fu,N3,UU(k1,{brighter(e){return e=e==null?Ox:Math.pow(Ox,e),new Fu(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?V0:Math.pow(V0,e),new Fu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fu(zp(this.r),zp(this.g),zp(this.b),Fx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dz,formatHex:dz,formatHex8:eEe,formatRgb:fz,toString:fz}));function dz(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}`}function eEe(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}${Lp((isNaN(this.opacity)?1:this.opacity)*255)}`}function fz(){const e=Fx(this.opacity);return`${e===1?"rgb(":"rgba("}${zp(this.r)}, ${zp(this.g)}, ${zp(this.b)}${e===1?")":`, ${e})`}`}function Fx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lp(e){return e=zp(e),(e<16?"0":"")+e.toString(16)}function hz(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new id(e,t,r,n)}function GU(e){if(e instanceof id)return new id(e.h,e.s,e.l,e.opacity);if(e instanceof k1||(e=G0(e)),!e)return new id;if(e instanceof id)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),l=NaN,a=o-i,c=(o+i)/2;return a?(t===o?l=(r-n)/a+(r<n)*6:r===o?l=(n-t)/a+2:l=(t-r)/a+4,a/=c<.5?o+i:2-o-i,l*=60):a=c>0&&c<1?0:l,new id(l,a,c,e.opacity)}function tEe(e,t,r,n){return arguments.length===1?GU(e):new id(e,t,r,n??1)}function id(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Qk(id,tEe,UU(k1,{brighter(e){return e=e==null?Ox:Math.pow(Ox,e),new id(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?V0:Math.pow(V0,e),new id(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Fu(_4(e>=240?e-240:e+120,i,n),_4(e,i,n),_4(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new id(pz(this.h),Jb(this.s),Jb(this.l),Fx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Fx(this.opacity);return`${e===1?"hsl(":"hsla("}${pz(this.h)}, ${Jb(this.s)*100}%, ${Jb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pz(e){return e=(e||0)%360,e<0?e+360:e}function Jb(e){return Math.max(0,Math.min(1,e||0))}function _4(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const HU=e=>()=>e;function rEe(e,t){return function(r){return e+r*t}}function nEe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function iEe(e){return(e=+e)==1?WU:function(t,r){return r-t?nEe(t,r,e):HU(isNaN(t)?r:t)}}function WU(e,t){var r=t-e;return r?rEe(e,r):HU(isNaN(e)?t:e)}const mz=(function e(t){var r=iEe(t);function n(i,o){var l=r((i=N3(i)).r,(o=N3(o)).r),a=r(i.g,o.g),c=r(i.b,o.b),p=WU(i.opacity,o.opacity);return function(g){return i.r=l(g),i.g=a(g),i.b=c(g),i.opacity=p(g),i+""}}return n.gamma=e,n})(1);function wh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var O3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x4=new RegExp(O3.source,"g");function aEe(e){return function(){return e}}function oEe(e){return function(t){return e(t)+""}}function sEe(e,t){var r=O3.lastIndex=x4.lastIndex=0,n,i,o,l=-1,a=[],c=[];for(e=e+"",t=t+"";(n=O3.exec(e))&&(i=x4.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[l]?a[l]+=o:a[++l]=o),(n=n[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,c.push({i:l,x:wh(n,i)})),r=x4.lastIndex;return r<t.length&&(o=t.slice(r),a[l]?a[l]+=o:a[++l]=o),a.length<2?c[0]?oEe(c[0].x):aEe(t):(t=c.length,function(p){for(var g=0,v;g<t;++g)a[(v=c[g]).i]=v.x(p);return a.join("")})}var gz=180/Math.PI,F3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function XU(e,t,r,n,i,o){var l,a,c;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,c/=a),e*n<t*r&&(e=-e,t=-t,c=-c,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*gz,skewX:Math.atan(c)*gz,scaleX:l,scaleY:a}}var Qb;function lEe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?F3:XU(t.a,t.b,t.c,t.d,t.e,t.f)}function uEe(e){return e==null||(Qb||(Qb=document.createElementNS("http://www.w3.org/2000/svg","g")),Qb.setAttribute("transform",e),!(e=Qb.transform.baseVal.consolidate()))?F3:(e=e.matrix,XU(e.a,e.b,e.c,e.d,e.e,e.f))}function YU(e,t,r,n){function i(p){return p.length?p.pop()+" ":""}function o(p,g,v,x,b,P){if(p!==v||g!==x){var I=b.push("translate(",null,t,null,r);P.push({i:I-4,x:wh(p,v)},{i:I-2,x:wh(g,x)})}else(v||x)&&b.push("translate("+v+t+x+r)}function l(p,g,v,x){p!==g?(p-g>180?g+=360:g-p>180&&(p+=360),x.push({i:v.push(i(v)+"rotate(",null,n)-2,x:wh(p,g)})):g&&v.push(i(v)+"rotate("+g+n)}function a(p,g,v,x){p!==g?x.push({i:v.push(i(v)+"skewX(",null,n)-2,x:wh(p,g)}):g&&v.push(i(v)+"skewX("+g+n)}function c(p,g,v,x,b,P){if(p!==v||g!==x){var I=b.push(i(b)+"scale(",null,",",null,")");P.push({i:I-4,x:wh(p,v)},{i:I-2,x:wh(g,x)})}else(v!==1||x!==1)&&b.push(i(b)+"scale("+v+","+x+")")}return function(p,g){var v=[],x=[];return p=e(p),g=e(g),o(p.translateX,p.translateY,g.translateX,g.translateY,v,x),l(p.rotate,g.rotate,v,x),a(p.skewX,g.skewX,v,x),c(p.scaleX,p.scaleY,g.scaleX,g.scaleY,v,x),p=g=null,function(b){for(var P=-1,I=x.length,k;++P<I;)v[(k=x[P]).i]=k.x(b);return v.join("")}}}var cEe=YU(lEe,"px, ","px)","deg)"),dEe=YU(uEe,", ",")",")"),yy=0,Xv=0,Ev=0,ZU=1e3,Bx,Yv,zx=0,Qp=0,fw=0,H0=typeof performance=="object"&&performance.now?performance:Date,KU=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eA(){return Qp||(KU(fEe),Qp=H0.now()+fw)}function fEe(){Qp=0}function jx(){this._call=this._time=this._next=null}jx.prototype=JU.prototype={constructor:jx,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?eA():+r)+(t==null?0:+t),!this._next&&Yv!==this&&(Yv?Yv._next=this:Bx=this,Yv=this),this._call=e,this._time=r,B3()},stop:function(){this._call&&(this._call=null,this._time=1/0,B3())}};function JU(e,t,r){var n=new jx;return n.restart(e,t,r),n}function hEe(){eA(),++yy;for(var e=Bx,t;e;)(t=Qp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yy}function yz(){Qp=(zx=H0.now())+fw,yy=Xv=0;try{hEe()}finally{yy=0,mEe(),Qp=0}}function pEe(){var e=H0.now(),t=e-zx;t>ZU&&(fw-=t,zx=e)}function mEe(){for(var e,t=Bx,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Bx=r);Yv=e,B3(n)}function B3(e){if(!yy){Xv&&(Xv=clearTimeout(Xv));var t=e-Qp;t>24?(e<1/0&&(Xv=setTimeout(yz,e-H0.now()-fw)),Ev&&(Ev=clearInterval(Ev))):(Ev||(zx=H0.now(),Ev=setInterval(pEe,ZU)),yy=1,KU(yz))}}function vz(e,t,r){var n=new jx;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var gEe=LU("start","end","cancel","interrupt"),yEe=[],QU=0,bz=1,z3=2,E_=3,_z=4,j3=5,T_=6;function hw(e,t,r,n,i,o){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;vEe(e,r,{name:t,index:n,group:i,on:gEe,tween:yEe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:QU})}function tA(e,t){var r=xd(e,t);if(r.state>QU)throw new Error("too late; already scheduled");return r}function lf(e,t){var r=xd(e,t);if(r.state>E_)throw new Error("too late; already running");return r}function xd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function vEe(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=JU(o,0,r.time);function o(p){r.state=bz,r.timer.restart(l,r.delay,r.time),r.delay<=p&&l(p-r.delay)}function l(p){var g,v,x,b;if(r.state!==bz)return c();for(g in n)if(b=n[g],b.name===r.name){if(b.state===E_)return vz(l);b.state===_z?(b.state=T_,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete n[g]):+g<t&&(b.state=T_,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete n[g])}if(vz(function(){r.state===E_&&(r.state=_z,r.timer.restart(a,r.delay,r.time),a(p))}),r.state=z3,r.on.call("start",e,e.__data__,r.index,r.group),r.state===z3){for(r.state=E_,i=new Array(x=r.tween.length),g=0,v=-1;g<x;++g)(b=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(i[++v]=b);i.length=v+1}}function a(p){for(var g=p<r.duration?r.ease.call(null,p/r.duration):(r.timer.restart(c),r.state=j3,1),v=-1,x=i.length;++v<x;)i[v].call(e,g);r.state===j3&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=T_,r.timer.stop(),delete n[t];for(var p in n)return;delete e.__transition}}function bEe(e,t){var r=e.__transition,n,i,o=!0,l;if(r){t=t==null?null:t+"";for(l in r){if((n=r[l]).name!==t){o=!1;continue}i=n.state>z3&&n.state<j3,n.state=T_,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[l]}o&&delete e.__transition}}function _Ee(e){return this.each(function(){bEe(this,e)})}function xEe(e,t){var r,n;return function(){var i=lf(this,e),o=i.tween;if(o!==r){n=r=o;for(var l=0,a=n.length;l<a;++l)if(n[l].name===t){n=n.slice(),n.splice(l,1);break}}i.tween=n}}function wEe(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=lf(this,e),l=o.tween;if(l!==n){i=(n=l).slice();for(var a={name:t,value:r},c=0,p=i.length;c<p;++c)if(i[c].name===t){i[c]=a;break}c===p&&i.push(a)}o.tween=i}}function SEe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=xd(this.node(),r).tween,i=0,o=n.length,l;i<o;++i)if((l=n[i]).name===e)return l.value;return null}return this.each((t==null?xEe:wEe)(r,e,t))}function rA(e,t,r){var n=e._id;return e.each(function(){var i=lf(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return xd(i,n).value[t]}}function eG(e,t){var r;return(typeof t=="number"?wh:t instanceof G0?mz:(r=G0(t))?(t=r,mz):sEe)(e,t)}function CEe(e){return function(){this.removeAttribute(e)}}function EEe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TEe(e,t,r){var n,i=r+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===n?o:o=t(n=l,r)}}function PEe(e,t,r){var n,i=r+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===n?o:o=t(n=l,r)}}function IEe(e,t,r){var n,i,o;return function(){var l,a=r(this),c;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),c=a+"",l===c?null:l===n&&c===i?o:(i=c,o=t(n=l,a)))}}function kEe(e,t,r){var n,i,o;return function(){var l,a=r(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),c=a+"",l===c?null:l===n&&c===i?o:(i=c,o=t(n=l,a)))}}function AEe(e,t){var r=dw(e),n=r==="transform"?dEe:eG;return this.attrTween(e,typeof t=="function"?(r.local?kEe:IEe)(r,n,rA(this,"attr."+e,t)):t==null?(r.local?EEe:CEe)(r):(r.local?PEe:TEe)(r,n,t))}function MEe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function LEe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function REe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&LEe(e,o)),r}return i._value=t,i}function DEe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&MEe(e,o)),r}return i._value=t,i}function NEe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=dw(e);return this.tween(r,(n.local?REe:DEe)(n,t))}function OEe(e,t){return function(){tA(this,e).delay=+t.apply(this,arguments)}}function FEe(e,t){return t=+t,function(){tA(this,e).delay=t}}function BEe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OEe:FEe)(t,e)):xd(this.node(),t).delay}function zEe(e,t){return function(){lf(this,e).duration=+t.apply(this,arguments)}}function jEe(e,t){return t=+t,function(){lf(this,e).duration=t}}function qEe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zEe:jEe)(t,e)):xd(this.node(),t).duration}function $Ee(e,t){if(typeof t!="function")throw new Error;return function(){lf(this,e).ease=t}}function VEe(e){var t=this._id;return arguments.length?this.each($Ee(t,e)):xd(this.node(),t).ease}function UEe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;lf(this,e).ease=r}}function GEe(e){if(typeof e!="function")throw new Error;return this.each(UEe(this._id,e))}function HEe(e){typeof e!="function"&&(e=NU(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],l=o.length,a=n[i]=[],c,p=0;p<l;++p)(c=o[p])&&e.call(c,c.__data__,p,o)&&a.push(c);return new Hf(n,this._parents,this._name,this._id)}function WEe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),l=new Array(n),a=0;a<o;++a)for(var c=t[a],p=r[a],g=c.length,v=l[a]=new Array(g),x,b=0;b<g;++b)(x=c[b]||p[b])&&(v[b]=x);for(;a<n;++a)l[a]=t[a];return new Hf(l,this._parents,this._name,this._id)}function XEe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function YEe(e,t,r){var n,i,o=XEe(t)?tA:lf;return function(){var l=o(this,e),a=l.on;a!==n&&(i=(n=a).copy()).on(t,r),l.on=i}}function ZEe(e,t){var r=this._id;return arguments.length<2?xd(this.node(),r).on.on(e):this.each(YEe(r,e,t))}function KEe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function JEe(){return this.on("end.remove",KEe(this._id))}function QEe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Kk(e));for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l)for(var a=n[l],c=a.length,p=o[l]=new Array(c),g,v,x=0;x<c;++x)(g=a[x])&&(v=e.call(g,g.__data__,x,a))&&("__data__"in g&&(v.__data__=g.__data__),p[x]=v,hw(p[x],t,r,x,p,xd(g,r)));return new Hf(o,this._parents,t,r)}function e4e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=DU(e));for(var n=this._groups,i=n.length,o=[],l=[],a=0;a<i;++a)for(var c=n[a],p=c.length,g,v=0;v<p;++v)if(g=c[v]){for(var x=e.call(g,g.__data__,v,c),b,P=xd(g,r),I=0,k=x.length;I<k;++I)(b=x[I])&&hw(b,t,r,I,x,P);o.push(x),l.push(g)}return new Hf(o,l,t,r)}var t4e=I1.prototype.constructor;function r4e(){return new t4e(this._groups,this._parents)}function n4e(e,t){var r,n,i;return function(){var o=gy(this,e),l=(this.style.removeProperty(e),gy(this,e));return o===l?null:o===r&&l===n?i:i=t(r=o,n=l)}}function tG(e){return function(){this.style.removeProperty(e)}}function i4e(e,t,r){var n,i=r+"",o;return function(){var l=gy(this,e);return l===i?null:l===n?o:o=t(n=l,r)}}function a4e(e,t,r){var n,i,o;return function(){var l=gy(this,e),a=r(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),gy(this,e))),l===c?null:l===n&&c===i?o:(i=c,o=t(n=l,a))}}function o4e(e,t){var r,n,i,o="style."+t,l="end."+o,a;return function(){var c=lf(this,e),p=c.on,g=c.value[o]==null?a||(a=tG(t)):void 0;(p!==r||i!==g)&&(n=(r=p).copy()).on(l,i=g),c.on=n}}function s4e(e,t,r){var n=(e+="")=="transform"?cEe:eG;return t==null?this.styleTween(e,n4e(e,n)).on("end.style."+e,tG(e)):typeof t=="function"?this.styleTween(e,a4e(e,n,rA(this,"style."+e,t))).each(o4e(this._id,e)):this.styleTween(e,i4e(e,n,t),r).on("end.style."+e,null)}function l4e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function u4e(e,t,r){var n,i;function o(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&l4e(e,l,r)),n}return o._value=t,o}function c4e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,u4e(e,t,r??""))}function d4e(e){return function(){this.textContent=e}}function f4e(e){return function(){var t=e(this);this.textContent=t??""}}function h4e(e){return this.tween("text",typeof e=="function"?f4e(rA(this,"text",e)):d4e(e==null?"":e+""))}function p4e(e){return function(t){this.textContent=e.call(this,t)}}function m4e(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&p4e(i)),t}return n._value=e,n}function g4e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,m4e(e))}function y4e(){for(var e=this._name,t=this._id,r=rG(),n=this._groups,i=n.length,o=0;o<i;++o)for(var l=n[o],a=l.length,c,p=0;p<a;++p)if(c=l[p]){var g=xd(c,t);hw(c,e,r,p,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Hf(n,this._parents,e,r)}function v4e(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,l){var a={value:l},c={value:function(){--i===0&&o()}};r.each(function(){var p=lf(this,n),g=p.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),p.on=t}),i===0&&o()})}var b4e=0;function Hf(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function rG(){return++b4e}var Cf=I1.prototype;Hf.prototype={constructor:Hf,select:QEe,selectAll:e4e,selectChild:Cf.selectChild,selectChildren:Cf.selectChildren,filter:HEe,merge:WEe,selection:r4e,transition:y4e,call:Cf.call,nodes:Cf.nodes,node:Cf.node,size:Cf.size,empty:Cf.empty,each:Cf.each,on:ZEe,attr:AEe,attrTween:NEe,style:s4e,styleTween:c4e,text:h4e,textTween:g4e,remove:JEe,tween:SEe,delay:BEe,duration:qEe,ease:VEe,easeVarying:GEe,end:v4e,[Symbol.iterator]:Cf[Symbol.iterator]};function _4e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var x4e={time:null,delay:0,duration:250,ease:_4e};function w4e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function S4e(e){var t,r;e instanceof Hf?(t=e._id,e=e._name):(t=rG(),(r=x4e).time=eA(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var l=n[o],a=l.length,c,p=0;p<a;++p)(c=l[p])&&hw(c,e,t,p,l,r||w4e(c,t));return new Hf(n,this._parents,e,t)}I1.prototype.interrupt=_Ee;I1.prototype.transition=S4e;var xz={},w4={},S4=34,Tv=10,C4=13;function nG(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function C4e(e,t){var r=nG(e);return function(n,i){return t(r(n),i,e)}}function wz(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function Nu(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function E4e(e){return e<0?"-"+Nu(-e,6):e>9999?"+"+Nu(e,6):Nu(e,4)}function T4e(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":E4e(e.getUTCFullYear())+"-"+Nu(e.getUTCMonth()+1,2)+"-"+Nu(e.getUTCDate(),2)+(i?"T"+Nu(t,2)+":"+Nu(r,2)+":"+Nu(n,2)+"."+Nu(i,3)+"Z":n?"T"+Nu(t,2)+":"+Nu(r,2)+":"+Nu(n,2)+"Z":r||t?"T"+Nu(t,2)+":"+Nu(r,2)+"Z":"")}function P4e(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function n(v,x){var b,P,I=i(v,function(k,M){if(b)return b(k,M-1);P=k,b=x?C4e(k,x):nG(k)});return I.columns=P||[],I}function i(v,x){var b=[],P=v.length,I=0,k=0,M,O=P<=0,F=!1;v.charCodeAt(P-1)===Tv&&--P,v.charCodeAt(P-1)===C4&&--P;function N(){if(O)return w4;if(F)return F=!1,xz;var j,U=I,H;if(v.charCodeAt(U)===S4){for(;I++<P&&v.charCodeAt(I)!==S4||v.charCodeAt(++I)===S4;);return(j=I)>=P?O=!0:(H=v.charCodeAt(I++))===Tv?F=!0:H===C4&&(F=!0,v.charCodeAt(I)===Tv&&++I),v.slice(U+1,j-1).replace(/""/g,'"')}for(;I<P;){if((H=v.charCodeAt(j=I++))===Tv)F=!0;else if(H===C4)F=!0,v.charCodeAt(I)===Tv&&++I;else if(H!==r)continue;return v.slice(U,j)}return O=!0,v.slice(U,P)}for(;(M=N())!==w4;){for(var $=[];M!==xz&&M!==w4;)$.push(M),M=N();x&&($=x($,k++))==null||b.push($)}return b}function o(v,x){return v.map(function(b){return x.map(function(P){return g(b[P])}).join(e)})}function l(v,x){return x==null&&(x=wz(v)),[x.map(g).join(e)].concat(o(v,x)).join(`
`)}function a(v,x){return x==null&&(x=wz(v)),o(v,x).join(`
`)}function c(v){return v.map(p).join(`
`)}function p(v){return v.map(g).join(e)}function g(v){return v==null?"":v instanceof Date?T4e(v):t.test(v+="")?'"'+v.replace(/"/g,'""')+'"':v}return{parse:n,parseRows:i,format:l,formatBody:a,formatRows:c,formatRow:p,formatValue:g}}var I4e=P4e(","),k4e=I4e.parse;function A4e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function iG(e,t){return fetch(e,t).then(A4e)}function M4e(e){return function(t,r,n){return arguments.length===2&&typeof r=="function"&&(n=r,r=void 0),iG(t,r).then(function(i){return e(i,n)})}}var L4e=M4e(k4e);function R4e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function D4e(e,t){return fetch(e,t).then(R4e)}function N4e(e){return(t,r)=>iG(t,r).then(n=>new DOMParser().parseFromString(n,e))}const O4e=N4e("application/xml");function Zv(e,t,r){this.k=e,this.x=t,this.y=r}Zv.prototype={constructor:Zv,scale:function(e){return e===1?this:new Zv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zv.prototype;const Sz=e=>{const[t,r]=Q.useState();Q.useEffect(()=>{if(!e.url)return;let i=null;e.format==="json"?i=D4e(e.url):e.format==="csv"?i=L4e(e.url):e.format==="xml"&&(i=O4e(e.url)),i&&i.then(o=>{if(e.format==="xml"){if(e.nodeType){const l=[];o.querySelectorAll(e.nodeType).forEach(a=>{typeof e.formatData=="function"&&l.push(e.formatData(a))}),r(l)}}else{let l=o;e.data_property&&(l=o[e.data_property]),typeof e.formatData=="function"?r(l.map(e.formatData)):r(l)}typeof e.onData=="function"&&e.onData()})},[e.url,e]);const n={data:t,setData:r};return Z.jsx(R3,{value:n,children:e.children})};try{Sz.displayName="SimpleDataProvider",Sz.__docgenInfo={description:"",displayName:"SimpleDataProvider",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"json"'},{value:'"csv"'},{value:'"xml"'}]}},nodeType:{defaultValue:null,description:"",name:"nodeType",required:!0,type:{name:"string"}},data_property:{defaultValue:null,description:"",name:"data_property",required:!0,type:{name:"string"}},formatData:{defaultValue:null,description:"",name:"formatData",required:!1,type:{name:"((data: any) => any) | undefined"}},onData:{defaultValue:null,description:"",name:"onData",required:!0,type:{name:"() => void"}}}}}catch{}const P_=Ei(Z.jsx("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 10V8h-2v4H8l4 4 4-4z"})),I_=Ei(Z.jsx("path",{d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0 2c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10m-1-10v4h2v-4h3l-4-4-4 4z"})),E4=Ei(Z.jsx("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),F4e=e=>{let{transform:t}=e;return{...t,x:0}},Ef=_r(hc)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});function q3(e){const t=xwe(),r=la({mapId:void 0});function n(v){const x=v.id&&r.map?.getLayer(v.id)?.source?r.map?.getLayer(v.id)?.source:void 0;let b=null;switch(v.type){case"geojson":if(v.config?.geojson)r.map?.fitBounds(yc(v.config?.geojson),e.fitBoundsOptions);else{if(!x)return;const P={type:"FeatureCollection",features:r.map?.querySourceFeatures(x)};P.features.length===0&&(r.map?.zoomTo(1),P.features=r.map?.querySourceFeatures(x)),b=yc(P)}break;case"vt":console.log("vt");break;case"wms":b=v?.config?.config?.layers?.[0]?.EX_GeographicBoundingBox;break;default:return}b&&r.map?.fitBounds(b,e.fitBoundsOptions)}const i=Q.useMemo(()=>["order-background",...[...t.layers].map((x,b)=>"content_order_"+b),"order-labels"],[t.layers]),o=Q.useMemo(()=>e.layers?e.layers:t?.layers?t.layers:[],[e.layers,t.layers]),l=Q.useMemo(()=>e.setLayers?e.setLayers:t.setLayers,[e.setLayers,t.setLayers]),a=iB(zk,{activationConstraint:{distance:5}}),c=iB(qV,{activationConstraint:{distance:5}}),p=v_e(c,a);function g(v){const x=v.active.id,b=v.over?.data?.current?.sortable.index;t.moveLayer(String(x),()=>b)}return Z.jsxs(Z.Fragment,{children:[Z.jsx(Mx,{layerIds:i,insertBeforeLayer:"_background"}),t?.symbolLayers?.length>0&&Z.jsx(Rf,{layerComponent:Z.jsx(Xg,{...t.vtLayerConfig,layers:t.symbolLayers,mapId:e?.mapId,insertBeforeLayer:"order-labels"}),setLayerState:v=>t.setSymbolLayers(v?.layers),visible:!0,configurable:!0,type:"layer",name:"Labels"},"background_labels"),Z.jsx(xxe,{collisionDetection:S_e,sensors:p,onDragEnd:v=>g(v),modifiers:[F4e],children:Z.jsxs(Dxe,{items:o,strategy:Lxe,children:[[...o].map((v,x)=>{if(!v?.id)return null;switch(v.type){case"geojson":return Z.jsx(Rf,{layerId:v.id,sortable:e.sortable,name:v?.name||v?.config?.type+" layer"||"unnamed layer",layerComponent:Z.jsx(zu,{...v.config,mapId:e?.mapId,layerId:v.id,insertBeforeLayer:"content_order_"+(o.length-1-x)}),buttons:Z.jsxs(Z.Fragment,{children:[Z.jsx(Ef,{disabled:x===o.length-1,onClick:()=>{t.moveDown(v.id||"")},children:Z.jsx(P_,{})}),Z.jsx(Ef,{disabled:x===0,onClick:()=>{t.moveUp(v.id||"")},children:Z.jsx(I_,{})}),Z.jsx(Ef,{onClick:()=>n(v),children:Z.jsx(E4,{})})]}),setLayerState:b=>l?.(P=>{const I=[...P];return b===!1?I.splice(x,1):I[x].config=b,I}),configurable:!0,showDeleteButton:!0},v.id);case"wms":return Z.jsx(Z.Fragment,{children:Q.createElement(C3,{...v.config,key:v.id,layerId:v.id,sortable:e.sortable,mapId:e?.mapId,insertBeforeLayer:"content_order_"+(o.length-1-x),onConfigChange:b=>{l?.(P=>{const I=[...P];return b===!1?I.splice(x,1):I[x].config.config=b,I})},featureInfoActive:v?.config?.featureInfoActive||!1,setFeatureInfoActive:b=>{l?.(P=>{const I=[...P];return typeof b=="function"&&(I[x].config.featureInfoActive=b(I[x].config?.featureInfoActive||!1)),I})},showDeleteButton:!0,buttons:Z.jsxs(Z.Fragment,{children:[Z.jsx(Ef,{disabled:x===o.length-1,onClick:()=>{t.moveDown(v.id||"")},children:Z.jsx(P_,{})}),Z.jsx(Ef,{disabled:x===0,onClick:()=>{t.moveUp(v.id||"")},children:Z.jsx(I_,{})}),Z.jsx(Ef,{onClick:()=>n(v),children:Z.jsx(E4,{})})]})})});case"vt":return Z.jsx(ft.Fragment,{children:Z.jsx(Rf,{name:v?.name||v?.type+" layer"||"unnamed layer",layerComponent:Z.jsx(Xg,{layers:v?.config?.layers||[],mapId:v?.config.mapId,sourceOptions:v?.config?.sourceOptions,layerId:v.id,url:v?.config?.url},v.id),buttons:Z.jsxs(Z.Fragment,{children:[Z.jsx(Ef,{disabled:x===o.length-1,onClick:()=>{t.moveDown(v.id||"")},children:Z.jsx(P_,{})},v.id+"_button1"),Z.jsx(Ef,{disabled:x===0,onClick:()=>{t.moveUp(v.id||"")},children:Z.jsx(I_,{})},v.id+"_button2"),Z.jsx(Ef,{onClick:()=>n(v),children:Z.jsx(E4,{})})]}),setLayerState:b=>l?.(P=>{const I=[...P];return b===!1?I.splice(x,1):I[x].config=b,I}),configurable:!0,showDeleteButton:!0},v.id)},v?.id+"_listItem");default:return null}}),t?.backgroundLayers?.length>0&&Z.jsx(Rf,{layerComponent:Z.jsx(Xg,{...t.vtLayerConfig,layers:t.backgroundLayers,mapId:e?.mapId,insertBeforeLayer:"order-background"}),setLayerState:v=>{t.setBackgroundLayers(v?.layers)},visible:!0,configurable:!0,type:"layer",name:"Background"},"background_geometry")]})})]})}q3.defaultProps={mapId:void 0};try{q3.displayName="LayerListItemFactory",q3.__docgenInfo={description:"",displayName:"LayerListItemFactory",props:{mapId:{defaultValue:{value:"undefined"},description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},layers:{defaultValue:null,description:"",name:"layers",required:!0,type:{name:"LayerConfig[]"}},setLayers:{defaultValue:null,description:"",name:"setLayers",required:!1,type:{name:"((layers: LayerConfig[] | ((state: LayerConfig[]) => LayerConfig[])) => void) | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}},fitBoundsOptions:{defaultValue:null,description:"",name:"fitBoundsOptions",required:!1,type:{name:"FitBoundsOptions | undefined"}}}}}catch{}const B4e=Ei(Z.jsx("path",{d:"M14 10H3v2h11zm0-4H3v2h11zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2zM3 16h7v-2H3z"})),z4e=["fill","line","circle"];function $3(e){const[t,r]=ft.useState({type:"circle"}),n=Q.useMemo(()=>!(!t?.type||!t?.geojson),[t]);return Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:"GeoJSON layer"}),Z.jsxs(cc,{fullWidth:!0,children:[Z.jsx(Ih,{id:"type-label",children:"Type"}),Z.jsx(kh,{labelId:"type-label",value:t.type,label:"Type",onChange:i=>r(o=>({...o,type:i.target.value})),children:z4e.map(i=>Z.jsx(Np,{value:i,children:i},i))})]}),Z.jsx(cc,{fullWidth:!0,children:Z.jsxs(ji,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Upload File",Z.jsx("input",{type:"file",hidden:!0,onChange:i=>{i.target.files?.[0].text().then(o=>r(l=>({...l,geojson:JSON.parse(o)})))}})]})}),Z.jsxs(s1,{children:[Z.jsx(ji,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(ji,{disabled:!n,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{$3.displayName="GeoJsonLayerForm",$3.__docgenInfo={description:"",displayName:"GeoJsonLayerForm",props:{config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"MlGeoJsonLayerProps | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlGeoJsonLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const j4e=Ei([Z.jsx("path",{d:"M8 8H6v7c0 1.1.9 2 2 2h9v-2H8z"},"0"),Z.jsx("path",{d:"M20 3h-8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 8h-8V7h8zM4 12H2v7c0 1.1.9 2 2 2h9v-2H4z"},"1")]),qx=e=>Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:e.layerTypes.length>1?"Select a layer type":"Load new layer"}),Z.jsx(gd,{children:e.layerTypes.map((t,r)=>Z.jsx(zc,{disableGutters:!0,children:Z.jsxs(p7,{autoFocus:!0,onClick:()=>{e.onSelect(t)},children:[Z.jsx(g7,{children:Z.jsx(t7,{children:Z.jsx(j4e,{})})}),Z.jsx(Mc,{primary:t})]})},r))})]});qx.defaultProps={};try{qx.displayName="LayerTypeForm",qx.__docgenInfo={description:"",displayName:"LayerTypeForm",props:{onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(type: string) => void"}},layerTypes:{defaultValue:null,description:"",name:"layerTypes",required:!0,type:{name:"string[]"}}}}}catch{}function V3(e){const[t,r]=ft.useState({url:""}),n=Q.useMemo(()=>!!t?.url,[t]);return Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:"WMS layer"}),Z.jsx(jP,{children:Z.jsxs(cc,{fullWidth:!0,sx:{marginTop:"10px"},children:[Z.jsx(Ih,{htmlFor:"wms-url-input",children:"WMS URL"}),Z.jsx(S2,{id:"wms-url-input",label:"WMS URL",value:t.url,onChange:i=>r({...t,url:i.target.value})})]})}),Z.jsxs(s1,{children:[Z.jsx(ji,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(ji,{disabled:!n,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{V3.displayName="WmsLayerForm",V3.__docgenInfo={description:"",displayName:"WmsLayerForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: wmsConfig) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const aG=Ei(Z.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),oG=Ei(Z.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),q4e=["latfield","lonfield","delimiter"];function U3(e){const[t,r]=Q.useState(!1);return Z.jsxs(Z.Fragment,{children:[Z.jsx(Ko,{children:" Options "}),Z.jsx(ji,{onClick:()=>r(!t),children:t?Z.jsx(oG,{}):Z.jsx(aG,{})}),Z.jsx(gd,{children:t&&q4e?.map(n=>Z.jsxs(Z.Fragment,{children:[Z.jsx(zc,{children:Z.jsxs(Ko,{children:[" ",n," "]})}),Z.jsx(zc,{children:Z.jsx(C2,{size:"small",onChange:i=>{const o={};o[n]=i.target.value,e.setter(o)}})})]}))})]})}try{U3.displayName="CSVOptionsFormular",U3.__docgenInfo={description:"",displayName:"CSVOptionsFormular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"any"}}}}}catch{}const $4e=["completeFeature","allFeatures","renderTagged","excludeWay","suppressWay"];function G3(e){const[t,r]=Q.useState(!1);return Z.jsxs(Z.Fragment,{children:[Z.jsx(Ko,{children:" Options "}),Z.jsx(ji,{onClick:()=>r(!t),children:t?Z.jsx(oG,{}):Z.jsx(aG,{})}),Z.jsx(gd,{children:t&&$4e?.map(n=>Z.jsx(Z.Fragment,{children:Z.jsxs(zc,{children:[Z.jsxs(Ko,{children:[" ",n," "]}),Z.jsx(iy,{onChange:i=>{const o={};o[n]=i.target.value==="on",e.setter(o)}})]})}))})]})}try{G3.displayName="OsmOptionsFomular",G3.__docgenInfo={description:"",displayName:"OsmOptionsFomular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"any"}}}}}catch{}const V4e={csv:Bwe,topojson:wSe,osm:bSe,gpx:b4,kml:b4,tcx:b4},U4e=["fill","line","circle"];function H3(e){const[t,r]=Q.useState({type:"circle"}),[n,i]=Q.useState(),[o,l]=Q.useState(),[a,c]=Q.useState({}),p=la({mapId:e.mapId}),g="?"+new URLSearchParams(a).toString();Lx({protocol:e.originType,handler:V4e[e.originType]});const v=Q.useMemo(()=>t?.type?!!(o&&n):!1,[t,o,n]);Q.useEffect(()=>(typeof n<"u"&&typeof o<"u"&&(p.map?.getSource(n)||p.map?.addSource(n,{type:"geojson",data:a?e.originType+"://"+o+g:e.originType+"://"+o}),t.options={source:n}),()=>{}),[n,p.map,o]),Q.useEffect(()=>{o&&n&&p.map?.getLayer(n)&&URL.revokeObjectURL(o)},[n,o,p.map]);function x(b){const P={...a,...b};return c(P)}return Z.jsxs(Z.Fragment,{children:[Z.jsxs(im,{children:["Layer from ",e.originType]}),Z.jsxs(cc,{fullWidth:!0,children:[Z.jsx(Ih,{id:"type-label",children:"Type"}),Z.jsx(kh,{labelId:"type-label",value:t.type,label:"Type",onChange:b=>r(P=>({...P,type:b.target.value})),children:U4e.map(b=>Z.jsx(Np,{value:b,children:b},b))})]}),Z.jsxs(cc,{fullWidth:!0,children:[Z.jsxs(ji,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Select origin file",Z.jsx("input",{type:"file",hidden:!0,accept:e.originType,onChange:b=>{if(i(b.target.files?.[0].name),b.target.files?.[0]){const P=URL.createObjectURL(b.target.files?.[0]);l(P)}}})]}),e.originType==="csv"&&Z.jsx(U3,{setter:x}),e.originType==="osm"&&Z.jsx(G3,{setter:x})]}),Z.jsxs(s1,{children:[Z.jsx(ji,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(ji,{disabled:!v,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{H3.displayName="ProtocolHandlerLayerForm",H3.__docgenInfo={description:"",displayName:"ProtocolHandlerLayerForm",props:{originType:{defaultValue:null,description:"",name:"originType",required:!0,type:{name:"string"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"MlGeoJsonLayerProps | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlGeoJsonLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const G4e=["id","type","metadata","source","source-layer","layout","paint","options"];function W3(e){const[t,r]=Q.useState([]),n={},i=["paint","layout","options","metadata"];Q.useEffect(()=>{e.setter(t)},[t]);const o=()=>Z.jsx(Z.Fragment,{children:G4e.map(a=>Z.jsx(ft.Fragment,{children:Z.jsx(C2,{label:a,onChange:c=>n[a]=c.target.value})},a+"_fragment"))});function l(){i.map(a=>{if(typeof n[a]<"u")try{n[a]=JSON.parse(n[a])}catch{alert("Invalid JSON format, try again")}}),r(a=>a.length>0?[n,...a]:[n])}return Z.jsxs(Z.Fragment,{children:[Z.jsx(cc,{fullWidth:!0,children:Z.jsx(o,{})}),Z.jsx(ji,{onClick:l,children:" Add"})]})}try{W3.displayName="MbtilesLayerPropFormular",W3.__docgenInfo={description:"",displayName:"MbtilesLayerPropFormular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"Dispatch<SetStateAction<LayerSpecification[]>>"}}}}}catch{}const H4e=Ei(Z.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),W4e=Ei(Z.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}));function X3(e){const[t,r]=ft.useState(e.config),[n,i]=Q.useState(),[o,l]=Q.useState(),[a,c]=Q.useState([]),p=la({mapId:e.mapId}),[g,v]=Q.useState(!1);console.log(a);const x=()=>Z.jsx(Z.Fragment,{children:a.map((P,I)=>Z.jsxs(Ko,{variant:"body2",children:[I+1,": ",JSON.stringify(P)]},I))}),b=Q.useMemo(()=>!!n,[n]);return Q.useEffect(()=>{typeof n<"u"&&typeof o<"u"&&r({url:"mbtiles://"+o+"/{z}/{x}/{y}",layers:a,layerId:n,sourceOptions:{type:"vector",minzoom:0,maxzoom:1}})},[n,p.map,o,a]),Z.jsxs(Z.Fragment,{children:[Z.jsx(im,{children:" Layer from mbtiles file"}),Z.jsxs(jP,{children:[Z.jsxs(ji,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Select origin file",Z.jsx("input",{type:"file",hidden:!0,accept:e.originType,onChange:P=>{if(i(P.target.files?.[0].name),P.target.files?.[0]){const I=URL.createObjectURL(P.target.files?.[0]);l(I)}}})]}),Z.jsxs(ZK,{expanded:g,children:[Z.jsxs(gJ,{"aria-controls":"panel1d-content",id:"panel1d-header",children:[Z.jsx(Ko,{children:"MB-Tile Layer properties"}),Z.jsx(ji,{onClick:()=>v(!g),children:g?Z.jsx(W4e,{}):Z.jsx(H4e,{})})]}),Z.jsx(Ko,{variant:"body1",children:" Layers"}),a.length>0?Z.jsx(x,{}):Z.jsx(Ko,{variant:"body2",children:" 0 "}),Z.jsx(W3,{setter:c})]})]}),Z.jsxs(s1,{children:[Z.jsx(ji,{onClick:e.onCancel,children:"Cancel"}),Z.jsx(ji,{disabled:!b,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{X3.displayName="MbtilesLayerForm",X3.__docgenInfo={description:"",displayName:"MbtilesLayerForm",props:{originType:{defaultValue:null,description:"",name:"originType",required:!0,type:{name:"string"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"MlVectorTileLayerProps"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlVectorTileLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const $x=e=>{const[t,r]=Q.useState(e?.config),[n,i]=Q.useState(),o=e.layerTypes,l=o.filter(v=>v!=="wms"&&v!=="geojson"&&v!=="mbtiles"),a=["wms","geojson","vt","csv","mbtiles","topojson","osm","gpx","kml","tcx"],c=v=>{i(v),l.includes(v)?r({type:"geojson",config:{}}):r(v==="mbtiles"?{type:"vt",config:{layers:[]}}:{type:v,config:{}})},p=()=>{e.setOpen(!1),r(void 0)},g=()=>Z.jsx(Z.Fragment,{children:l.map((v,x)=>Z.jsx(Z.Fragment,{children:t?.type==="geojson"&&n===v&&Z.jsx(H3,{originType:v,onSubmit:b=>{e?.onComplete?.({...t,config:b,type:"geojson"}),p()},onCancel:p},x)}))});return Z.jsxs(zP,{open:e.open,onClose:p,children:[!t?.type&&Z.jsx(qx,{onSelect:v=>{a.includes(v)&&c(v)},layerTypes:o}),t?.type==="geojson"&&n==="geojson"&&Z.jsx($3,{onSubmit:v=>{e?.onComplete?.({...t,config:v}),p()},onCancel:p}),t?.type==="wms"&&Z.jsx(V3,{onSubmit:v=>{e?.onComplete?.({...t,config:v}),p()},onCancel:p}),t?.type==="vt"&&n!==void 0&&Z.jsx(X3,{config:t,originType:n,onSubmit:v=>{t&&(e?.onComplete?.({...t,config:v}),p())},onCancel:p}),Z.jsx(g,{},"protocol")]})};$x.defaultProps={};try{$x.displayName="AddLayerPopup",$x.__docgenInfo={description:"",displayName:"AddLayerPopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"LayerConfig | undefined"}},layerTypes:{defaultValue:null,description:"",name:"layerTypes",required:!0,type:{name:"string[]"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(open: boolean) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}}}}}catch{}const Y3=e=>{const[t,r]=ft.useState(!1),n=e.layerTypes||["geojson","wms","csv","topojson","osm","gpx","kml","tcx"];return Z.jsxs(Z.Fragment,{children:[Z.jsx(ji,{variant:"contained",sx:{marginTop:"10px",...e.sx},onClick:()=>r(!0),children:Z.jsx(B4e,{})}),Z.jsx($x,{open:t,setOpen:r,onComplete:e?.onComplete,layerTypes:n})]})};Y3.defaultProps={};try{Y3.displayName="AddLayerButton",Y3.__docgenInfo={description:"",displayName:"AddLayerButton",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},layerTypes:{defaultValue:null,description:`An string array, to filter the supported file types that would be shown to the user
Default is: ['geojson', 'wms', 'csv', 'topojson', 'osm', 'gpx', 'kml', 'tcx']`,name:"layerTypes",required:!1,type:{name:"string[] | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}}}}}catch{}const X4e=Ei(Z.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}));function Cz(e){const t=Q.useRef(null),r=()=>{if(!t.current)return!1;const i=t.current?.files?.[0];if(!i)return!1;const o=new FileReader;o.onload=l=>{l&&typeof e.setData=="function"&&e.setData(l.currentTarget?.result)},o.readAsText(i)},n=()=>{t.current&&t.current.click()};return Z.jsxs(Z.Fragment,{children:[e.buttonComponent?ft.cloneElement(e.buttonComponent,{onClick:n}):Z.jsx(ji,{onClick:n,children:Z.jsx(X4e,{})}),Z.jsx("input",{ref:t,onChange:r,type:"file",accept:e.accept,id:"input",multiple:!0,style:{display:"none"}})]})}try{Cz.displayName="UploadButton",Cz.__docgenInfo={description:"",displayName:"UploadButton",props:{setData:{defaultValue:null,description:"",name:"setData",required:!0,type:{name:"(data: string) => void"}},buttonComponent:{defaultValue:null,description:"",name:"buttonComponent",required:!0,type:{name:"any"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string | undefined"}}}}}catch{}const Vx=e=>{const t=()=>{e.setOpen(!1)};return Z.jsxs(zP,{open:e.open,onClose:t,PaperProps:{sx:{padding:"20px"}},children:[Z.jsx(im,{children:"Select a style"}),Z.jsx(gd,{children:e?.styles?.map(r=>Z.jsx(zc,{disableGutters:!0,children:Z.jsxs(p7,{autoFocus:!0,onClick:()=>{e?.onSelect?.(r)},children:[Z.jsx(g7,{children:Z.jsx(t7,{sx:{width:"50px",height:"50px"},alt:r.name,src:r?.name&&e?.styleThumbnailPaths?.[r.name]})}),Z.jsx(Mc,{primary:r.name})]})},r.name))})]})};Vx.defaultProps={styleThumbnailPaths:{}};try{Vx.displayName="SelectStylePopup",Vx.__docgenInfo={description:"",displayName:"SelectStylePopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(open: boolean) => void"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"StyleSpecification[] | undefined"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((style: StyleSpecification) => void) | undefined"}},styleThumbnailPaths:{defaultValue:{value:"{}"},description:"",name:"styleThumbnailPaths",required:!1,type:{name:"{ [key: string]: string; } | undefined"}}}}}catch{}const sG=Ei(Z.jsx("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"})),Y4e={version:8,name:"Monokai",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:uu.source_openmaptiles_url}},sprite:uu.sprite,glyphs:uu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#AE81FF","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#75715E"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#837f6e"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#918d7e"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#A6C22E","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(166,194,46,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#e0ebad"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#FD971F"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(253,151,31,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(18,5,68,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#A6E22E","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#A6C22E","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#A6C22E","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#66D9EF","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#21c8e8"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#AE81FF","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#E6DB74","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#eee69f","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#fa5892","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#fa5892","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#fa5892","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#fb70a2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(249,38,114,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#b40544","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#b40544","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(249,38,114,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fb70a2","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fb70a2","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#e60657","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(249,38,114,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#F8F8F2","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fc89b2","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(18,5,68,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(18,5,68,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#b40544","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#fa5892","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#F8F8F2","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#b40544","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#E69F66","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E69F66","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},Z4e={version:8,name:"Solarized",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:uu.source_openmaptiles_url}},sprite:uu.sprite,glyphs:uu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#073642"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#2aa198","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#657b83"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#74888f"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#84959c"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#859900","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(133,153,0,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#f2ff99"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#d30102"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(211,1,2,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(58,63,144,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#2aa198","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#859900","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#859900","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#268bd2","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#1a6091"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#2aa198","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#eee8d5","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#fdfcf9","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#9094d3","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#9094d3","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#9094d3","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#a3a6da","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(108,113,196,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#3a3f90","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#3a3f90","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(108,113,196,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#a3a6da","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#a3a6da","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#484fb5","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(108,113,196,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#cb4b16","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e58ab6","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(58,63,144,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(58,63,144,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#3a3f90","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#9094d3","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#cb4b16","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#268bd2","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#268bd2","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#268bd2","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},K4e={version:8,name:"Oceanic Next",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:uu.source_openmaptiles_url}},sprite:uu.sprite,glyphs:uu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#81a1c1","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#a3be8c"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#acc598"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#b5cba3"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#a3be8c","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(163,19,14,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#cbdabe"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#b48ead"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(18,142,173,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(118,51,8,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#81a1c1","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#a3be8c","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#a3be8c","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#8fbcbb","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#5f9f9e"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#81a1c1","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#65737e","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#7e8d98","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#f17626","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#f2853e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(235,219,178,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(214,93,14,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#a6480b","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(214,93,14,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#b48ead","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f49456","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(118,51,8,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(118,51,8,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#b48ead","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#8fbcbb","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},J4e={version:8,name:"Medieval Kingdom",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:uu.source_openmaptiles_url}},sprite:uu.sprite,glyphs:uu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#ffd1a8"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#228B22","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#bfa677"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#c5af85"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#ccb892"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#556B2F","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(85,107,47,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#d1e0b8"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#FFC0CB"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(255,192,203,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(149,46,46,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#228B22","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#556B2F","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#556B2F","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#1E90FF","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#006ad1"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#228B22","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#f9e9cb","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#fefcf9","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#d98383","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d98383","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#d98383","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#df9797","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(139,94,6,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#952e2e","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#952e2e","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(205,92,92,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#df9797","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#df9797","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#bc3a3a","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(205,92,92,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#FFC0CB","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e5aaaa","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(149,46,46,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(149,46,46,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#952e2e","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#d98383","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#FFC0CB","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#A0522D","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#A0522D","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},Q4e={version:8,name:"Gruvbox",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:uu.source_openmaptiles_url}},sprite:uu.sprite,glyphs:uu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#83a598","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#b8bb26"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#bfc23c"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#c6c951"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#b8bb26","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(184,187,38,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#eceeaa"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#fe8019"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(254,128,25,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(118,51,8,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#83a598","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#b8bb26","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#b8bb26","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#83a598","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#5c7f72"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#83a598","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#928374","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#a89c91","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#f17626","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#f2853e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(235,219,178,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(214,93,14,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#a6480b","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(214,93,14,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#fe8019","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f49456","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(118,51,8,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(118,51,8,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#fe8019","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#fb4934","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fb4934","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#83a598","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},Pv="https://mapcomponents.github.io/react-map-components-maplibre/assets/style_thumbnails/",Ez=({sx:e,styles:t=[],defaultStyles:r=!0,styleThumbnailPaths:n})=>{const i=ft.useContext(CP),[o,l]=ft.useState(!1);return Z.jsxs(Z.Fragment,{children:[Z.jsx(ji,{variant:"contained",sx:{marginTop:"10px",...e},onClick:()=>l(!0),children:Z.jsx(sG,{})}),Z.jsx(Vx,{styles:[...r?[Y4e,Z4e,K4e,J4e,Q4e]:[],...t||[]],styleThumbnailPaths:{...n,...r?{Monokai:Pv+"monokai.png",Gruvbox:Pv+"gruvbox.png","Oceanic Next":Pv+"oceanic_next.png",Solarized:Pv+"solarized.png","Medieval Kingdom":Pv+"medieval_kingdom.png"}:{}},open:o,setOpen:l,onSelect:a=>{i.setBackgroundLayers([]),setTimeout(()=>{i.updateStyle(a)},100),l(!1)}})]})};try{Ez.displayName="SelectStyleButton",Ez.__docgenInfo={description:"",displayName:"SelectStyleButton",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: StyleSpecification[]) => void) | undefined"}},styles:{defaultValue:{value:"[]"},description:"",name:"styles",required:!1,type:{name:"StyleSpecification[] | undefined"}},defaultStyles:{defaultValue:{value:"true"},description:"",name:"defaultStyles",required:!1,type:{name:"boolean | undefined"}},styleThumbnailPaths:{defaultValue:null,description:"",name:"styleThumbnailPaths",required:!1,type:{name:"{ [key: string]: string; } | undefined"}}}}}catch{}const eTe=Ei(Z.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),tTe=Ei(Z.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"})),rTe=Ei(Z.jsx("path",{d:"m16.24 11.51 1.57-1.57-3.75-3.75-1.57 1.57-4.14-4.13c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l4.13 4.13L3 17.25V21h3.75l4.76-4.76 4.13 4.13c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83zm-7.06-.44L5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.45 1.45zm7.88 7.89-4.13-4.13 1.9-1.9 1.45 1.45-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27zm3.65-11.92c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.47-.47-1.12-.29-1.41 0l-1.83 1.83 3.75 3.75z"})),nTe=Ei(Z.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"})),iTe=[{icon:Z.jsx(nTe,{}),name:"Create PDF"},{icon:Z.jsx(rTe,{}),name:"Sketch"},{icon:Z.jsx(tTe,{}),name:"Layers"},{icon:Z.jsx(sG,{}),name:"Background"}],aTe=()=>{const[e,t]=Q.useState(!1),r=(i,o)=>{o==="toggle"&&t(!0)},n=()=>t(!1);return Z.jsx(po,{sx:{height:330,transform:"translateZ(0px)",flexGrow:1,position:"absolute",bottom:0,right:0,width:"100px",zIndex:"1000"},children:Z.jsx(Rie,{ariaLabel:"SpeedDial tooltip example",sx:{position:"absolute",bottom:16,right:16},icon:e?Z.jsx(KV,{fontSize:"large"}):Z.jsx(eTe,{fontSize:"large"}),onClick:e?n:r,onOpen:r,open:e,children:iTe.map(i=>Z.jsx(Gie,{icon:i.icon,tooltipTitle:i.name,tooltipOpen:!0,onClick:n,FabProps:{sx:{color:"text.primary"}}},i.name))})})};aTe.defaultProps={mapId:void 0};var T4={exports:{}},P4={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tz;function oTe(){if(Tz)return P4;Tz=1;var e=Y0();function t(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,a=e.useDebugValue;return P4.useSyncExternalStoreWithSelector=function(c,p,g,v,x){var b=i(null);if(b.current===null){var P={hasValue:!1,value:null};b.current=P}else P=b.current;b=l(function(){function k($){if(!M){if(M=!0,O=$,$=v($),x!==void 0&&P.hasValue){var j=P.value;if(x(j,$))return F=j}return F=$}if(j=F,r(O,$))return j;var U=v($);return x!==void 0&&x(j,U)?(O=$,j):(O=$,F=U)}var M=!1,O,F,N=g===void 0?null:g;return[function(){return k(p())},N===null?void 0:function(){return k(N())}]},[p,g,v,x]);var I=n(c,b[0],b[1]);return o(function(){P.hasValue=!0,P.value=I},[I]),a(I),I},P4}var Pz;function sTe(){return Pz||(Pz=1,T4.exports=oTe()),T4.exports}var lTe=sTe();function uTe(e){e()}function cTe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){uTe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Iz={notify(){},get:()=>[]};function dTe(e,t){let r,n=Iz,i=0,o=!1;function l(I){g();const k=n.subscribe(I);let M=!1;return()=>{M||(M=!0,k(),v())}}function a(){n.notify()}function c(){P.onStateChange&&P.onStateChange()}function p(){return o}function g(){i++,r||(r=e.subscribe(c),n=cTe())}function v(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=Iz)}function x(){o||(o=!0,g())}function b(){o&&(o=!1,v())}const P={addNestedSub:l,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:p,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>n};return P}var fTe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hTe=fTe(),pTe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",mTe=pTe(),gTe=()=>hTe||mTe?Q.useLayoutEffect:Q.useEffect,yTe=gTe(),vTe=Symbol.for("react-redux-context"),bTe=typeof globalThis<"u"?globalThis:{};function _Te(){if(!Q.createContext)return{};const e=bTe[vTe]??=new Map;let t=e.get(Q.createContext);return t||(t=Q.createContext(null),e.set(Q.createContext,t)),t}var qh=_Te();function xTe(e){const{children:t,context:r,serverState:n,store:i}=e,o=Q.useMemo(()=>{const c=dTe(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),l=Q.useMemo(()=>i.getState(),[i]);yTe(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,l]);const a=r||qh;return Q.createElement(a.Provider,{value:o},t)}var E3e=xTe;function nA(e=qh){return function(){return Q.useContext(e)}}var lG=nA();function uG(e=qh){const t=e===qh?lG:nA(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var wTe=uG();function STe(e=qh){const t=e===qh?wTe:uG(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var cG=STe(),CTe=(e,t)=>e===t;function ETe(e=qh){const t=e===qh?lG:nA(e),r=(n,i={})=>{const{equalityFn:o=CTe}=typeof i=="function"?{equalityFn:i}:i,l=t(),{store:a,subscription:c,getServerState:p}=l;Q.useRef(!0);const g=Q.useCallback({[n.name](x){return n(x)}}[n.name],[n]),v=lTe.useSyncExternalStoreWithSelector(c.addNestedSub,a.getState,p||a.getState,g,o);return Q.useDebugValue(v),v};return Object.assign(r,{withTypes:()=>r}),r}var jp=ETe();function Fl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var TTe=typeof Symbol=="function"&&Symbol.observable||"@@observable",kz=TTe,I4=()=>Math.random().toString(36).substring(7).split("").join("."),PTe={INIT:`@@redux/INIT${I4()}`,REPLACE:`@@redux/REPLACE${I4()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${I4()}`},Ux=PTe;function iA(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function dG(e,t,r){if(typeof e!="function")throw new Error(Fl(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Fl(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Fl(1));return r(dG)(e,t)}let n=e,i=t,o=new Map,l=o,a=0,c=!1;function p(){l===o&&(l=new Map,o.forEach((k,M)=>{l.set(M,k)}))}function g(){if(c)throw new Error(Fl(3));return i}function v(k){if(typeof k!="function")throw new Error(Fl(4));if(c)throw new Error(Fl(5));let M=!0;p();const O=a++;return l.set(O,k),function(){if(M){if(c)throw new Error(Fl(6));M=!1,p(),l.delete(O),o=null}}}function x(k){if(!iA(k))throw new Error(Fl(7));if(typeof k.type>"u")throw new Error(Fl(8));if(typeof k.type!="string")throw new Error(Fl(17));if(c)throw new Error(Fl(9));try{c=!0,i=n(i,k)}finally{c=!1}return(o=l).forEach(O=>{O()}),k}function b(k){if(typeof k!="function")throw new Error(Fl(10));n=k,x({type:Ux.REPLACE})}function P(){const k=v;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Fl(11));function O(){const N=M;N.next&&N.next(g())}return O(),{unsubscribe:k(O)}},[kz](){return this}}}return x({type:Ux.INIT}),{dispatch:x,subscribe:v,getState:g,replaceReducer:b,[kz]:P}}function ITe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ux.INIT})>"u")throw new Error(Fl(12));if(typeof r(void 0,{type:Ux.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fl(13))})}function kTe(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let i;try{ITe(r)}catch(o){i=o}return function(l={},a){if(i)throw i;let c=!1;const p={};for(let g=0;g<n.length;g++){const v=n[g],x=r[v],b=l[v],P=x(b,a);if(typeof P>"u")throw a&&a.type,new Error(Fl(14));p[v]=P,c=c||P!==b}return c=c||n.length!==Object.keys(l).length,c?p:l}}function Gx(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function ATe(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Fl(15))};const l={getState:i.getState,dispatch:(c,...p)=>o(c,...p)},a=e.map(c=>c(l));return o=Gx(...a)(i.dispatch),{...i,dispatch:o}}}function MTe(e){return iA(e)&&"type"in e&&typeof e.type=="string"}var fG=Symbol.for("immer-nothing"),Az=Symbol.for("immer-draftable"),_c=Symbol.for("immer-state");function ad(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var vy=Object.getPrototypeOf;function em(e){return!!e&&!!e[_c]}function Wf(e){return e?hG(e)||Array.isArray(e)||!!e[Az]||!!e.constructor?.[Az]||A1(e)||mw(e):!1}var LTe=Object.prototype.constructor.toString();function hG(e){if(!e||typeof e!="object")return!1;const t=vy(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===LTe}function Hx(e,t){pw(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function pw(e){const t=e[_c];return t?t.type_:Array.isArray(e)?1:A1(e)?2:mw(e)?3:0}function Z3(e,t){return pw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pG(e,t,r){const n=pw(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function RTe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function A1(e){return e instanceof Map}function mw(e){return e instanceof Set}function xp(e){return e.copy_||e.base_}function K3(e,t){if(A1(e))return new Map(e);if(mw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=hG(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[_c];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const l=i[o],a=n[l];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[l]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[l]})}return Object.create(vy(e),n)}else{const n=vy(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function aA(e,t=!1){return gw(e)||em(e)||!Wf(e)||(pw(e)>1&&Object.defineProperties(e,{set:{value:e_},add:{value:e_},clear:{value:e_},delete:{value:e_}}),Object.freeze(e),t&&Object.values(e).forEach(r=>aA(r,!0))),e}function e_(){ad(2)}function gw(e){return Object.isFrozen(e)}var DTe={};function tm(e){const t=DTe[e];return t||ad(0,e),t}var W0;function mG(){return W0}function NTe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Mz(e,t){t&&(tm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J3(e){Q3(e),e.drafts_.forEach(OTe),e.drafts_=null}function Q3(e){e===W0&&(W0=e.parent_)}function Lz(e){return W0=NTe(W0,e)}function OTe(e){const t=e[_c];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Rz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[_c].modified_&&(J3(t),ad(4)),Wf(e)&&(e=Wx(t,e),t.parent_||Xx(t,e)),t.patches_&&tm("Patches").generateReplacementPatches_(r[_c].base_,e,t.patches_,t.inversePatches_)):e=Wx(t,r,[]),J3(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fG?e:void 0}function Wx(e,t,r){if(gw(t))return t;const n=t[_c];if(!n)return Hx(t,(i,o)=>Dz(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Xx(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,l=!1;n.type_===3&&(o=new Set(i),i.clear(),l=!0),Hx(o,(a,c)=>Dz(e,n,i,a,c,r,l)),Xx(e,i,!1),r&&e.patches_&&tm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Dz(e,t,r,n,i,o,l){if(em(i)){const a=o&&t&&t.type_!==3&&!Z3(t.assigned_,n)?o.concat(n):void 0,c=Wx(e,i,a);if(pG(r,n,c),em(c))e.canAutoFreeze_=!1;else return}else l&&r.add(i);if(Wf(i)&&!gw(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Wx(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(A1(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Xx(e,i)}}function Xx(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&aA(t,r)}function FTe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:mG(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=oA;r&&(i=[n],o=X0);const{revoke:l,proxy:a}=Proxy.revocable(i,o);return n.draft_=a,n.revoke_=l,a}var oA={get(e,t){if(t===_c)return e;const r=xp(e);if(!Z3(r,t))return BTe(e,r,t);const n=r[t];return e.finalized_||!Wf(n)?n:n===k4(e.base_,t)?(A4(e),e.copy_[t]=tP(n,e)):n},has(e,t){return t in xp(e)},ownKeys(e){return Reflect.ownKeys(xp(e))},set(e,t,r){const n=gG(xp(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=k4(xp(e),t),o=i?.[_c];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(RTe(r,i)&&(r!==void 0||Z3(e.base_,t)))return!0;A4(e),eP(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return k4(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,A4(e),eP(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=xp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ad(11)},getPrototypeOf(e){return vy(e.base_)},setPrototypeOf(){ad(12)}},X0={};Hx(oA,(e,t)=>{X0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});X0.deleteProperty=function(e,t){return X0.set.call(this,e,t,void 0)};X0.set=function(e,t,r){return oA.set.call(this,e[0],t,r,e[0])};function k4(e,t){const r=e[_c];return(r?xp(r):e)[t]}function BTe(e,t,r){const n=gG(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function gG(e,t){if(!(t in e))return;let r=vy(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=vy(r)}}function eP(e){e.modified_||(e.modified_=!0,e.parent_&&eP(e.parent_))}function A4(e){e.copy_||(e.copy_=K3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zTe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const l=this;return function(c=o,...p){return l.produce(c,g=>r.call(this,g,...p))}}typeof r!="function"&&ad(6),n!==void 0&&typeof n!="function"&&ad(7);let i;if(Wf(t)){const o=Lz(this),l=tP(t,void 0);let a=!0;try{i=r(l),a=!1}finally{a?J3(o):Q3(o)}return Mz(o,n),Rz(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===fG&&(i=void 0),this.autoFreeze_&&aA(i,!0),n){const o=[],l=[];tm("Patches").generateReplacementPatches_(t,i,o,l),n(o,l)}return i}else ad(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...a)=>this.produceWithPatches(l,c=>t(c,...a));let n,i;return[this.produce(t,r,(l,a)=>{n=l,i=a}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Wf(e)||ad(8),em(e)&&(e=jTe(e));const t=Lz(this),r=tP(e,void 0);return r[_c].isManual_=!0,Q3(t),r}finishDraft(e,t){const r=e&&e[_c];(!r||!r.isManual_)&&ad(9);const{scope_:n}=r;return Mz(n,t),Rz(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=tm("Patches").applyPatches_;return em(e)?n(e,t):this.produce(e,i=>n(i,t))}};function tP(e,t){const r=A1(e)?tm("MapSet").proxyMap_(e,t):mw(e)?tm("MapSet").proxySet_(e,t):FTe(e,t);return(t?t.scope_:mG()).drafts_.push(r),r}function jTe(e){return em(e)||ad(10,e),yG(e)}function yG(e){if(!Wf(e)||gw(e))return e;const t=e[_c];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=K3(e,t.scope_.immer_.useStrictShallowCopy_)}else r=K3(e,!0);return Hx(r,(n,i)=>{pG(r,n,yG(i))}),t&&(t.finalized_=!1),r}var qTe=new zTe,vG=qTe.produce;function bG(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var $Te=bG(),VTe=bG,UTe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Gx:Gx.apply(null,arguments)};function Nz(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Bf(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>MTe(n)&&n.type===e,r}var _G=class Kv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Kv.prototype)}static get[Symbol.species](){return Kv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Kv(...t[0].concat(this)):new Kv(...t.concat(this))}};function Oz(e){return Wf(e)?vG(e,()=>{}):e}function t_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function GTe(e){return typeof e=="boolean"}var HTe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let l=new _G;return r&&(GTe(r)?l.push($Te):l.push(VTe(r.extraArgument))),l},WTe="RTK_autoBatch",Fz=e=>t=>{setTimeout(t,e)},XTe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,l=!1;const a=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Fz(10):e.type==="callback"?e.queueNotification:Fz(e.timeout),p=()=>{l=!1,o&&(o=!1,a.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const v=()=>i&&g(),x=n.subscribe(v);return a.add(g),()=>{x(),a.delete(g)}},dispatch(g){try{return i=!g?.meta?.[WTe],o=!i,o&&(l||(l=!0,c(p))),n.dispatch(g)}finally{i=!0}}})},YTe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new _G(e);return n&&i.push(XTe(typeof n=="object"?n:void 0)),i};function ZTe(e){const t=HTe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(iA(r))a=kTe(r);else throw new Error(Bf(1));let c;typeof n=="function"?c=n(t):c=t();let p=Gx;i&&(p=UTe({trace:!1,...typeof i=="object"&&i}));const g=ATe(...c),v=YTe(g);let x=typeof l=="function"?l(v):v();const b=p(...x);return dG(a,o,b)}function xG(e){const t={},r=[];let n;const i={addCase(o,l){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Bf(28));if(a in t)throw new Error(Bf(29));return t[a]=l,i},addAsyncThunk(o,l){return l.pending&&(t[o.pending.type]=l.pending),l.rejected&&(t[o.rejected.type]=l.rejected),l.fulfilled&&(t[o.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:o.settled,reducer:l.settled}),i},addMatcher(o,l){return r.push({matcher:o,reducer:l}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function KTe(e){return typeof e=="function"}function JTe(e,t){let[r,n,i]=xG(t),o;if(KTe(e))o=()=>Oz(e());else{const a=Oz(e);o=()=>a}function l(a=o(),c){let p=[r[c.type],...n.filter(({matcher:g})=>g(c)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[i]),p.reduce((g,v)=>{if(v)if(em(g)){const b=v(g,c);return b===void 0?g:b}else{if(Wf(g))return vG(g,x=>v(x,c));{const x=v(g,c);if(x===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return g},a)}return l.getInitialState=o,l}var QTe=Symbol.for("rtk-slice-createasyncthunk");function e3e(e,t){return`${e}/${t}`}function t3e({creators:e}={}){const t=e?.asyncThunk?.[QTe];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(Bf(11));const l=(typeof n.reducers=="function"?n.reducers(i3e()):n.reducers)||{},a=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(F,N){const $=typeof F=="string"?F:F.type;if(!$)throw new Error(Bf(12));if($ in c.sliceCaseReducersByType)throw new Error(Bf(13));return c.sliceCaseReducersByType[$]=N,p},addMatcher(F,N){return c.sliceMatchers.push({matcher:F,reducer:N}),p},exposeAction(F,N){return c.actionCreators[F]=N,p},exposeCaseReducer(F,N){return c.sliceCaseReducersByName[F]=N,p}};a.forEach(F=>{const N=l[F],$={reducerName:F,type:e3e(i,F),createNotation:typeof n.reducers=="function"};o3e(N)?l3e($,N,p,t):a3e($,N,p)});function g(){const[F={},N=[],$=void 0]=typeof n.extraReducers=="function"?xG(n.extraReducers):[n.extraReducers],j={...F,...c.sliceCaseReducersByType};return JTe(n.initialState,U=>{for(let H in j)U.addCase(H,j[H]);for(let H of c.sliceMatchers)U.addMatcher(H.matcher,H.reducer);for(let H of N)U.addMatcher(H.matcher,H.reducer);$&&U.addDefaultCase($)})}const v=F=>F,x=new Map,b=new WeakMap;let P;function I(F,N){return P||(P=g()),P(F,N)}function k(){return P||(P=g()),P.getInitialState()}function M(F,N=!1){function $(U){let H=U[F];return typeof H>"u"&&N&&(H=t_(b,$,k)),H}function j(U=v){const H=t_(x,N,()=>new WeakMap);return t_(H,U,()=>{const Y={};for(const[ae,ee]of Object.entries(n.selectors??{}))Y[ae]=r3e(ee,U,()=>t_(b,U,k),N);return Y})}return{reducerPath:F,getSelectors:j,get selectors(){return j($)},selectSlice:$}}const O={name:i,reducer:I,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:k,...M(o),injectInto(F,{reducerPath:N,...$}={}){const j=N??o;return F.inject({reducerPath:j,reducer:I},$),{...O,...M(j,!0)}}};return O}}function r3e(e,t,r,n){function i(o,...l){let a=t(o);return typeof a>"u"&&n&&(a=r()),e(a,...l)}return i.unwrapped=e,i}var n3e=t3e();function i3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function a3e({type:e,reducerName:t,createNotation:r},n,i){let o,l;if("reducer"in n){if(r&&!s3e(n))throw new Error(Bf(17));o=n.reducer,l=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?Nz(e,l):Nz(e))}function o3e(e){return e._reducerDefinitionType==="asyncThunk"}function s3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function l3e({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Bf(18));const{payloadCreator:o,fulfilled:l,pending:a,rejected:c,settled:p,options:g}=r,v=i(e,o,g);n.exposeAction(t,v),l&&n.addCase(v.fulfilled,l),a&&n.addCase(v.pending,a),c&&n.addCase(v.rejected,c),p&&n.addMatcher(v.settled,p),n.exposeCaseReducer(t,{fulfilled:l||r_,pending:a||r_,rejected:c||r_,settled:p||r_})}function r_(){}function Bf(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function wG(e,t,r){t.forEach(n=>{e(n,r),n.layers&&n.layers.length>0&&wG(e,n.layers,n)})}const u3e={mapConfigs:{}},SG=n3e({name:"mapConfig",initialState:u3e,reducers:{setMapConfig:(e,t)=>{const r=t.payload.mapConfig,n=t.payload.key;e.mapConfigs[n]=r},removeMapConfig:(e,t)=>{delete e.mapConfigs[t.payload.key]},setLayerInMapConfig:(e,t)=>{const{mapConfigKey:r,layer:n}=t.payload,i=e.mapConfigs[r];if(i){for(let o=0;o<i.layers.length;o++)if(i.layers[o].uuid===n.uuid){i.layers[o]=n;break}}},removeLayerFromMapConfig:(e,t)=>{const{mapConfigKey:r,layerUuid:n}=t.payload,i=e.mapConfigs[r];if(i){const o=i.layers.findIndex(l=>l.uuid===n);o!==-1&&(delete i.layers[o],wG(function(l,a){a&&a.layers&&(a.layers=a.layers.filter(c=>c.uuid!==n))},i.layerOrder))}},updateLayerOrder:(e,t)=>{const{mapConfigKey:r,newOrder:n}=t.payload,i=e.mapConfigs[r];i&&(i.layerOrder=n)},setMasterVisible(e,t){const{mapConfigKey:r,layerId:n,masterVisible:i}=t.payload,o=e.mapConfigs[r];if(o){const l=o.layers.findIndex(a=>a.uuid===n);if(l!==-1){const a=o.layers[l];if(a){const c=[...o.layers];a.type==="folder"&&o.layerOrder.forEach(p=>{p.uuid===n&&p.layers?.forEach(g=>{const v=o.layers.findIndex(b=>b.uuid===g.uuid),x=c[v];c[v]={...x,masterVisible:i},x?.type==="vt"&&x?.config?.layers&&(x.config.layers=x.config.layers.map(b=>({...b,masterVisible:i})))})}),a.type==="vt"&&a?.config?.layers&&(a.config.layers=a.config.layers.map(p=>({...p,masterVisible:i}))),e.mapConfigs[r].layers=c}}}}}}),CG=(e,t)=>{const r=e.mapConfigs;for(const n in r){const i=r[n],o=i.layers.findIndex(a=>a.uuid===t),l=i.layers[o];if(l)return l}return null},c3e=(e,t)=>{const r=e.mapConfig.mapConfigs[t];if(!r)return[];const n=r.layerOrder,i=[];function o(l){l.forEach(a=>{i.push(a.uuid),a.layers&&a.layers.length>0&&o(a.layers)})}return o(n),i},T3e=ZTe({reducer:{mapConfig:SG.reducer}}),{setMapConfig:P3e,removeMapConfig:I3e,setLayerInMapConfig:EG,removeLayerFromMapConfig:k3e,updateLayerOrder:d3e,setMasterVisible:f3e}=SG.actions,Bz=Ei(Z.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}));function rP(e){return Z.jsx(B0,{value:e.value,label:"Color",onChange:t=>{typeof e.onChange=="function"&&e.onChange(t)}})}try{rP.displayName="PaintPropsColorPicker",rP.__docgenInfo={description:"",displayName:"PaintPropsColorPicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}}}catch{}const h3e=_r(Oc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"}),p3e=_r(po)({marginLeft:"61px"}),TG={"circle-color":"colorpicker","circle-radius":"slider","circle-stroke-color":"colorpicker","circle-stroke-width":"slider","fill-color":"colorpicker","fill-outline-color":"colorpicker","line-color":"colorpicker","line-width":"slider","line-blur":"slider"},m3e=Object.keys(TG),g3e={"circle-stroke-width":{step:1,min:1,max:20},"circle-radius":{step:1,min:1,max:100},"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function nP(e){const t=Q.useRef(Math.round(Math.random()*1e10)),r=CG(jp(a=>a.mapConfig),e.layerUuid),n=cG(),i=Q.useMemo(()=>r?.config?.options?.paint?r?.config?.options?.paint:{},[r?.config?.options?.paint]),o=(a,c)=>{const p={...r,config:{...r?.config,options:{...r?.config?.options,paint:{...r?.config?.options?.paint,[a]:c}}}};n(EG({mapConfigKey:e.mapConfigKey,layer:p}))},l=Q.useCallback(a=>{if(i?.[a]&&m3e.indexOf(a)!==-1&&(typeof i[a]=="number"||typeof i[a]=="string")){const c=Z.jsx(Ko,{id:a+"_label",gutterBottom:!0,children:a});switch(TG[a]){case"slider":return Z.jsxs(ft.Fragment,{children:[c,Z.jsx(HP,{...g3e[a],value:i[a],valueLabelDisplay:"auto",onChange:(p,g)=>{g&&typeof g=="number"&&o(a,g)}})]},a);case"numberfield":return Z.jsxs(ft.Fragment,{children:[c,Z.jsx(C2,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:i[a],onChange:p=>{p?.target?.value&&o(a,parseInt(p.target.value))}})]},a);case"colorpicker":return Z.jsxs(ft.Fragment,{children:[c,Z.jsx(po,{sx:{"& > div":{width:"initial !important"}},children:Z.jsx(rP,{value:i[a],onChange:p=>{o(a,p)}},a)})]},a)}}return null},[i]);return Z.jsx(Z.Fragment,{children:Z.jsx(h3e,{children:Z.jsx(zc,{children:Z.jsx(p3e,{children:i&&Object.keys(i).map(a=>l(a))})},t.current+"_paintPropForm")})})}try{nP.displayName="LayerPropertyForm",nP.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{layerUuid:{defaultValue:null,description:"",name:"layerUuid",required:!0,type:{name:"string"}},mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}}}}}catch{}const y3e=_r(hc)({padding:"4px",marginTop:"-3px"}),v3e=_r(hc)({marginLeft:"20px"}),Iv=_r(zc)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}),M4=_r(S0)({minWidth:"30px"}),n_=_r(hc)({marginRight:"0px",padding:"0px"}),zz=_r(po)(({open:e})=>({display:e?"block":"none"})),jz=_r(gd)({marginLeft:"50px"});function Yx(e){const[t,r]=Q.useState(!1),[n,i]=Q.useState(!1),o=CG(jp(k=>k.mapConfig),e.layerOrderConfig.uuid),[l,a]=Q.useState(!1),c=cG(),p=jp(k=>k.mapConfig.mapConfigs[e.mapConfigKey]);function g(k,M){const O=JSON.parse(JSON.stringify(p.layerOrder)),F=N=>{let $=!1;return N.forEach((j,U)=>{if(!$)if(j.uuid===k){const H=M(U);if(H<0||H>=N.length)throw new Error("New position is out of bounds");const[Y]=N.splice(U,1);N.splice(H,0,Y),$=!0}else j.layers&&F(j.layers)&&($=!0)}),$};F(O),c(d3e({mapConfigKey:e.mapConfigKey,newOrder:O}))}const v=k=>{g(k,M=>M+1)},x=k=>{g(k,M=>M-1)};function b(k,M=""){const O=!k;o&&(P(o,O,M),(o.type==="folder"||o.type==="vt"&&M==="")&&c(f3e({mapConfigKey:e.mapConfigKey,layerId:o.uuid,masterVisible:O})))}function P(k,M,O){let F={...k};if(k?.type==="folder")F={...k,visible:!k.visible};else switch(k?.type){case"geojson":{F={...k,config:{...k.config,options:{...k?.config?.options,layout:{...k?.config?.options?.layout,visibility:M?"visible":"none"}}}};break}case"vt":{let N=!1;const $=k.config.layers.map(j=>j.id===O?(N=!0,{...j,layout:{...j.layout,visibility:M?"visible":"none"}}):j);N?F={...k,config:{...k.config,layers:$}}:F={...k,visible:M,config:{...k.config,layers:$}};break}case"wms":{F={...k,visible:M,config:{...k.config,visible:M}};break}}return c(EG({mapConfigKey:e.mapConfigKey,layer:F})),F}function I(k){let M=!0;if(k?.type==="geojson")return M=k?.config?.options?.layout?.visibility!=="none",Z.jsxs(Z.Fragment,{children:[Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:Z.jsxs(Z.Fragment,{children:[e?.buttons,Z.jsx(n_,{disabled:!1,onClick:()=>{v(k.uuid)},children:Z.jsx(P_,{})}),Z.jsx(n_,{disabled:!1,onClick:()=>{x(k.uuid)},children:Z.jsx(I_,{})}),k.configurable&&Z.jsx(Z.Fragment,{children:Z.jsx(y3e,{edge:"end","aria-label":"settings",onClick:()=>{r(O=>!O)},children:Z.jsx($I,{})})})]}),children:[Z.jsx(Pf,{children:Z.jsx(If,{checked:M,disabled:k.masterVisible===!1,onClick:()=>b(M)})}),Z.jsx(Mc,{variant:"layerlist",primary:k.name||"",secondary:e.description,primaryTypographyProps:{overflow:"hidden"}}),e.buttons]},k.uuid),k.configurable&&t&&Z.jsxs(Z.Fragment,{children:[e.showDeleteButton&&Z.jsxs(Z.Fragment,{children:[Z.jsx(v3e,{edge:"end","aria-label":"delete",onClick:()=>{},children:Z.jsx(v1,{})}),n&&Z.jsx(my,{open:n,onConfirm:()=>{i(!1)},onCancel:()=>{i(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]}),Z.jsx(nP,{layerUuid:k.uuid,mapConfigKey:e.mapConfigKey})]})]});if(k?.type==="vt")return Z.jsxs(Z.Fragment,{children:[Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:void 0,children:[Z.jsxs(M4,{children:[Z.jsx(n_,{edge:"end","aria-label":"open",onClick:()=>a(!l),children:l?Z.jsx(dx,{}):Z.jsx(Bz,{})}),Z.jsx(Pf,{children:Z.jsx(If,{checked:k.visible,disabled:k.masterVisible===!1,onClick:()=>b(k.visible??!1)})})]}),Z.jsx(Mc,{primary:k.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},k.uuid),Z.jsx(zz,{open:l,children:Z.jsx(jz,{disablePadding:!0,children:k.config?.layers?.map(O=>Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:void 0,children:[" ",Z.jsx(M4,{children:Z.jsx(Pf,{children:Z.jsx(If,{checked:(O?.layout?.visibility??"visible")==="visible",disabled:O?.masterVisible===!1,onClick:()=>b(O?.layout?.visibility==="visible",O.id)})})}),Z.jsx(Mc,{variant:"layerlist",primary:O["source-layer"],primaryTypographyProps:{overflow:"hidden"}},O.id)]},O.id))})},k.uuid+"_list")]});if(k?.type==="wms"){const O=k.config?.visible??!0;return Z.jsx(Z.Fragment,{children:Z.jsxs(Iv,{sx:{...e.listItemSx},secondaryAction:void 0,children:[Z.jsx(Pf,{children:Z.jsx(If,{checked:O,disabled:k.masterVisible===!1,onClick:()=>b(O)})}),Z.jsx(Mc,{primary:k.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},k.uuid)})}return k.type==="folder"?Z.jsxs(Z.Fragment,{children:[Z.jsxs(Iv,{sx:{...e.listItemSx},children:[Z.jsxs(M4,{children:[Z.jsx(n_,{edge:"end","aria-label":"open",onClick:()=>a(!l),children:l?Z.jsx(dx,{}):Z.jsx(Bz,{})}),Z.jsx(Pf,{children:Z.jsx(If,{checked:k.visible,disabled:k.masterVisible,onClick:()=>b(k.visible?k.visible:!1)})})]}),Z.jsx(Mc,{primary:k.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},k.uuid),Z.jsx(zz,{open:l,children:Z.jsx(jz,{disablePadding:!0,children:e?.layerOrderConfig?.layers?.map(O=>Z.jsx(Yx,{layerOrderConfig:O,mapConfigKey:e.mapConfigKey},O.uuid))})},k.uuid+"_list")]}):Z.jsx(Z.Fragment,{})}return Z.jsx(Z.Fragment,{children:o&&I(o)})}try{Yx.displayName="LayerTreeListItem",Yx.__docgenInfo={description:"",displayName:"LayerTreeListItem",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string | undefined"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},setLayerState:{defaultValue:null,description:"",name:"setLayerState",required:!1,type:{name:"((state: unknown) => void) | undefined"}},showDeleteButton:{defaultValue:null,description:"",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},listItemSx:{defaultValue:null,description:"",name:"listItemSx",required:!1,type:{name:"SxProps | undefined"}},buttons:{defaultValue:null,description:"",name:"buttons",required:!1,type:{name:"Element | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}},mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}},layerOrderConfig:{defaultValue:null,description:"",name:"layerOrderConfig",required:!0,type:{name:"LayerOrderItem"}}}}}catch{}const b3e=_r(gd)({marginTop:"15px"});function qz(e){const t=jp(r=>r.mapConfig.mapConfigs?.[e.mapConfigKey]?.layerOrder);return Z.jsx(b3e,{children:t?.map?.(r=>Z.jsx(Yx,{layerOrderConfig:r,mapConfigKey:e.mapConfigKey},r.uuid))})}try{qz.displayName="LayerTree",qz.__docgenInfo={description:"",displayName:"LayerTree",props:{mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}}}}}catch{}function $z(e){const t=jp(c=>c.mapConfig.mapConfigs?.[e.mapConfigKey]?.layers),r=jp(c=>c.mapConfig.mapConfigs?.[e.mapConfigKey]?.layerOrder),n=la({mapId:e?.mapId}),i=jp(c=>c3e(c,e.mapConfigKey)),o=Q.useRef([]);Q.useEffect(()=>{if(!n.map||!r)return;const c=(g,v,x)=>{for(let b=0;b<g.length;b++){const P=g[b],I=v?v[b]:null;if(P.uuid!==I?.uuid&&x.getLayer(P.uuid)){const k=b>0?g[b-1].uuid:void 0;x.moveLayer(P.uuid,k)}if(P.layers&&P.layers.length>0){const k=I?.layers||[];c(P.layers,k,x)}}},p=o.current;c(r,p,n.map),o.current=r},[r,n.map]);const l=Q.useMemo(()=>["order-background",...i.map(p=>"layer_id_"+p),"order-labels"],[i]);function a(c){const p=t.findIndex(v=>v.uuid===c.uuid),g=t[p];switch(g?.type){case"geojson":return Z.jsx(zu,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,...g.config,options:{...g.config.options,layout:{...g?.config?.options?.layout,visibility:g.masterVisible===!1?"none":g?.config?.options?.layout?.visibility?g?.config?.options?.layout?.visibility:"visible"}}},g.uuid);case"vt":{const v=g.config.layers.map(x=>{const b={...x};return b.layout&&(b.layout={...b.layout,visibility:b.masterVisible===!1?"none":b.layout.visibility??"visible"}),b});return Z.jsx(Xg,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,url:g.config.url,layers:v},g.uuid)}case"wms":{const v=g.masterVisible===!1?!1:g.config?.visible;return Z.jsx(kx,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,url:g.config?.url||"",urlParameters:g.config?.urlParameters,visible:v},g.uuid)}case"folder":return c?.layers?c.layers.map(v=>a(v)):Z.jsx(Z.Fragment,{});default:return null}}return Z.jsxs(Z.Fragment,{children:[Z.jsx(Mx,{layerIds:l}),r?.map?.(c=>a(c))]})}try{$z.displayName="LayerOnMap",$z.__docgenInfo={description:"",displayName:"LayerOnMap",props:{mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}export{_3 as $,jf as A,ji as B,y2 as C,zP as D,C3e as E,pP as F,ql as G,S3e as H,Qn as I,Jn as J,o2 as K,t1 as L,TL as M,_r as N,ni as O,Oc as P,cc as Q,kh as R,g3 as S,oK as T,iy as U,Mc as V,B0 as W,HP as X,yB as Y,Lx as Z,bSe as _,vK as a,b4 as a$,LB as a0,Cz as a1,cO as a2,_B as a3,kx as a4,xB as a5,YW as a6,Jz as a7,K0 as a8,lP as a9,DB as aA,gd as aB,zc as aC,hc as aD,UB as aE,OB as aF,Px as aG,eT as aH,Mf as aI,KV as aJ,p7 as aK,$B as aL,VB as aM,SB as aN,EP as aO,qf as aP,Xg as aQ,BB as aR,ZK as aS,gJ as aT,dx as aU,C3 as aV,L3 as aW,Hoe as aX,uu as aY,Bwe as aZ,Tx as a_,ag as aa,p2 as ab,Vh as ac,rT as ad,w3 as ae,e3 as af,du as ag,One as ah,nT as ai,hR as aj,Ih as ak,S2 as al,gB as am,b3 as an,Xn as ao,ri as ap,Wr as aq,zn as ar,o7 as as,Hs as at,f7 as au,FB as av,Mx as aw,vB as ax,v0 as ay,nm as az,wR as b,wSe as b0,CP as b1,Lf as b2,Y3 as b3,t3 as b4,q3 as b5,k3 as b6,Ix as b7,Ez as b8,Q4e as b9,r3 as ba,Rf as bb,Y4e as bc,E3e as bd,T3e as be,qz as bf,cG as bg,P3e as bh,$z as bi,aTe as bj,Va as bk,zu as c,aT as d,BD as e,sO as f,cK as g,im as h,jP as i,C2 as j,Ei as k,la as l,yj as m,cx as n,po as o,Ko as p,b7 as q,bX as r,Np as s,JT as t,l1 as u,QT as v,rm as w,gP as x,cn as y,LY as z};
