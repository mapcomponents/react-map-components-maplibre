const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.es-sNvS4eHl.js","./iframe-j72i5ZUO.js","./preload-helper-D9Z9MdNV.js","./iframe-DG6F43G8.css","./index-BpemSb3a.js","./index-C-CykIMM.js"])))=>i.map(i=>d[i]);
import{j as K,P as h0,r as rh}from"./index-BpemSb3a.js";import{V as Cx,r as ee,g as Sf,R as gt,b as A7,c as Jh,a as R1}from"./iframe-j72i5ZUO.js";import{_ as d5}from"./preload-helper-D9Z9MdNV.js";function fh(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const Id="$$material";function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ex.apply(null,arguments)}function FY(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function BY(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var zY=(function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(BY(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=FY(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e})(),bu="-ms-",Tx="-moz-",La="-webkit-",k7="comm",hP="rule",pP="decl",jY="@import",M7="@keyframes",qY="@layer",VY=Math.abs,U2=String.fromCharCode,$Y=Object.assign;function GY(e,t){return Hl(e,0)^45?(((t<<2^Hl(e,0))<<2^Hl(e,1))<<2^Hl(e,2))<<2^Hl(e,3):0}function L7(e){return e.trim()}function UY(e,t){return(e=t.exec(e))?e[0]:e}function Ra(e,t,r){return e.replace(t,r)}function qT(e,t){return e.indexOf(t)}function Hl(e,t){return e.charCodeAt(t)|0}function Q0(e,t,r){return e.slice(t,r)}function lf(e){return e.length}function mP(e){return e.length}function Gb(e,t){return t.push(e),e}function HY(e,t){return e.map(t).join("")}var H2=1,My=1,R7=0,Qu=0,el=0,ev="";function W2(e,t,r,n,i,o,u){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:H2,column:My,length:u,return:""}}function zv(e,t){return $Y(W2("",null,null,"",null,null,0),e,{length:-e.length},t)}function WY(){return el}function XY(){return el=Qu>0?Hl(ev,--Qu):0,My--,el===10&&(My=1,H2--),el}function _c(){return el=Qu<R7?Hl(ev,Qu++):0,My++,el===10&&(My=1,H2++),el}function hf(){return Hl(ev,Qu)}function Q_(){return Qu}function D1(e,t){return Q0(ev,e,t)}function e1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D7(e){return H2=My=1,R7=lf(ev=e),Qu=0,[]}function O7(e){return ev="",e}function ex(e){return L7(D1(Qu-1,VT(e===91?e+2:e===40?e+1:e)))}function YY(e){for(;(el=hf())&&el<33;)_c();return e1(e)>2||e1(el)>3?"":" "}function ZY(e,t){for(;--t&&_c()&&!(el<48||el>102||el>57&&el<65||el>70&&el<97););return D1(e,Q_()+(t<6&&hf()==32&&_c()==32))}function VT(e){for(;_c();)switch(el){case e:return Qu;case 34:case 39:e!==34&&e!==39&&VT(el);break;case 40:e===41&&VT(e);break;case 92:_c();break}return Qu}function KY(e,t){for(;_c()&&e+el!==57;)if(e+el===84&&hf()===47)break;return"/*"+D1(t,Qu-1)+"*"+U2(e===47?e:_c())}function JY(e){for(;!e1(hf());)_c();return D1(e,Qu)}function QY(e){return O7(tx("",null,null,null,[""],e=D7(e),0,[0],e))}function tx(e,t,r,n,i,o,u,a,f){for(var p=0,g=0,b=u,S=0,_=0,P=0,k=1,M=1,D=1,F=0,B="",N=i,$=o,V=n,U=B;M;)switch(P=F,F=_c()){case 40:if(P!=108&&Hl(U,b-1)==58){qT(U+=Ra(ex(F),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:U+=ex(F);break;case 9:case 10:case 13:case 32:U+=YY(P);break;case 92:U+=ZY(Q_()-1,7);continue;case 47:switch(hf()){case 42:case 47:Gb(eZ(KY(_c(),Q_()),t,r),f);break;default:U+="/"}break;case 123*k:a[p++]=lf(U)*D;case 125*k:case 59:case 0:switch(F){case 0:case 125:M=0;case 59+g:D==-1&&(U=Ra(U,/\f/g,"")),_>0&&lf(U)-b&&Gb(_>32?PR(U+";",n,r,b-1):PR(Ra(U," ","")+";",n,r,b-2),f);break;case 59:U+=";";default:if(Gb(V=IR(U,t,r,p,g,i,a,B,N=[],$=[],b),o),F===123)if(g===0)tx(U,t,V,V,N,o,b,a,$);else switch(S===99&&Hl(U,3)===110?100:S){case 100:case 108:case 109:case 115:tx(e,V,V,n&&Gb(IR(e,V,V,0,0,i,a,B,i,N=[],b),$),i,$,b,a,n?N:$);break;default:tx(U,V,V,V,[""],$,0,a,$)}}p=g=_=0,k=D=1,B=U="",b=u;break;case 58:b=1+lf(U),_=P;default:if(k<1){if(F==123)--k;else if(F==125&&k++==0&&XY()==125)continue}switch(U+=U2(F),F*k){case 38:D=g>0?1:(U+="\f",-1);break;case 44:a[p++]=(lf(U)-1)*D,D=1;break;case 64:hf()===45&&(U+=ex(_c())),S=hf(),g=b=lf(B=U+=JY(Q_())),F++;break;case 45:P===45&&lf(U)==2&&(k=0)}}return o}function IR(e,t,r,n,i,o,u,a,f,p,g){for(var b=i-1,S=i===0?o:[""],_=mP(S),P=0,k=0,M=0;P<n;++P)for(var D=0,F=Q0(e,b+1,b=VY(k=u[P])),B=e;D<_;++D)(B=L7(k>0?S[D]+" "+F:Ra(F,/&\f/g,S[D])))&&(f[M++]=B);return W2(e,t,r,i===0?hP:a,f,p,g)}function eZ(e,t,r){return W2(e,t,r,k7,U2(WY()),Q0(e,2,-2),0)}function PR(e,t,r,n){return W2(e,t,r,pP,Q0(e,0,n),Q0(e,n+1,-1),n)}function by(e,t){for(var r="",n=mP(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function tZ(e,t,r,n){switch(e.type){case qY:if(e.children.length)break;case jY:case pP:return e.return=e.return||e.value;case k7:return"";case M7:return e.return=e.value+"{"+by(e.children,n)+"}";case hP:e.value=e.props.join(",")}return lf(r=by(e.children,n))?e.return=e.value+"{"+r+"}":""}function rZ(e){var t=mP(e);return function(r,n,i,o){for(var u="",a=0;a<t;a++)u+=e[a](r,n,i,o)||"";return u}}function nZ(e){return function(t){t.root||(t=t.return)&&e(t)}}function N7(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var iZ=function(t,r,n){for(var i=0,o=0;i=o,o=hf(),i===38&&o===12&&(r[n]=1),!e1(o);)_c();return D1(t,Qu)},aZ=function(t,r){var n=-1,i=44;do switch(e1(i)){case 0:i===38&&hf()===12&&(r[n]=1),t[n]+=iZ(Qu-1,r,n);break;case 2:t[n]+=ex(i);break;case 4:if(i===44){t[++n]=hf()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=U2(i)}while(i=_c());return t},oZ=function(t,r){return O7(aZ(D7(t),r))},AR=new WeakMap,sZ=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!AR.get(n))&&!i){AR.set(t,!0);for(var o=[],u=oZ(r,o),a=n.props,f=0,p=0;f<u.length;f++)for(var g=0;g<a.length;g++,p++)t.props[p]=o[f]?u[f].replace(/&\f/g,a[g]):a[g]+" "+u[f]}}},lZ=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function F7(e,t){switch(GY(e,t)){case 5103:return La+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return La+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return La+e+Tx+e+bu+e+e;case 6828:case 4268:return La+e+bu+e+e;case 6165:return La+e+bu+"flex-"+e+e;case 5187:return La+e+Ra(e,/(\w+).+(:[^]+)/,La+"box-$1$2"+bu+"flex-$1$2")+e;case 5443:return La+e+bu+"flex-item-"+Ra(e,/flex-|-self/,"")+e;case 4675:return La+e+bu+"flex-line-pack"+Ra(e,/align-content|flex-|-self/,"")+e;case 5548:return La+e+bu+Ra(e,"shrink","negative")+e;case 5292:return La+e+bu+Ra(e,"basis","preferred-size")+e;case 6060:return La+"box-"+Ra(e,"-grow","")+La+e+bu+Ra(e,"grow","positive")+e;case 4554:return La+Ra(e,/([^-])(transform)/g,"$1"+La+"$2")+e;case 6187:return Ra(Ra(Ra(e,/(zoom-|grab)/,La+"$1"),/(image-set)/,La+"$1"),e,"")+e;case 5495:case 3959:return Ra(e,/(image-set\([^]*)/,La+"$1$`$1");case 4968:return Ra(Ra(e,/(.+:)(flex-)?(.*)/,La+"box-pack:$3"+bu+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+La+e+e;case 4095:case 3583:case 4068:case 2532:return Ra(e,/(.+)-inline(.+)/,La+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lf(e)-1-t>6)switch(Hl(e,t+1)){case 109:if(Hl(e,t+4)!==45)break;case 102:return Ra(e,/(.+:)(.+)-([^]+)/,"$1"+La+"$2-$3$1"+Tx+(Hl(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~qT(e,"stretch")?F7(Ra(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Hl(e,t+1)!==115)break;case 6444:switch(Hl(e,lf(e)-3-(~qT(e,"!important")&&10))){case 107:return Ra(e,":",":"+La)+e;case 101:return Ra(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+La+(Hl(e,14)===45?"inline-":"")+"box$3$1"+La+"$2$3$1"+bu+"$2box$3")+e}break;case 5936:switch(Hl(e,t+11)){case 114:return La+e+bu+Ra(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return La+e+bu+Ra(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return La+e+bu+Ra(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return La+e+bu+e+e}return e}var uZ=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case pP:t.return=F7(t.value,t.length);break;case M7:return by([zv(t,{value:Ra(t.value,"@","@"+La)})],i);case hP:if(t.length)return HY(t.props,function(o){switch(UY(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return by([zv(t,{props:[Ra(o,/:(read-\w+)/,":"+Tx+"$1")]})],i);case"::placeholder":return by([zv(t,{props:[Ra(o,/:(plac\w+)/,":"+La+"input-$1")]}),zv(t,{props:[Ra(o,/:(plac\w+)/,":"+Tx+"$1")]}),zv(t,{props:[Ra(o,/:(plac\w+)/,bu+"input-$1")]})],i)}return""})}},cZ=[uZ],dZ=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(k){var M=k.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(k),k.setAttribute("data-s",""))})}var i=t.stylisPlugins||cZ,o={},u,a=[];u=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(k){for(var M=k.getAttribute("data-emotion").split(" "),D=1;D<M.length;D++)o[M[D]]=!0;a.push(k)});var f,p=[sZ,lZ];{var g,b=[tZ,nZ(function(k){g.insert(k)})],S=rZ(p.concat(i,b)),_=function(M){return by(QY(M),S)};f=function(M,D,F,B){g=F,_(M?M+"{"+D.styles+"}":D.styles),B&&(P.inserted[D.name]=!0)}}var P={key:r,sheet:new zY({key:r,container:u,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:f};return P.sheet.hydrate(a),P},f5={exports:{}},Ga={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function fZ(){if(kR)return Ga;kR=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,f=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,g=e?Symbol.for("react.forward_ref"):60112,b=e?Symbol.for("react.suspense"):60113,S=e?Symbol.for("react.suspense_list"):60120,_=e?Symbol.for("react.memo"):60115,P=e?Symbol.for("react.lazy"):60116,k=e?Symbol.for("react.block"):60121,M=e?Symbol.for("react.fundamental"):60117,D=e?Symbol.for("react.responder"):60118,F=e?Symbol.for("react.scope"):60119;function B($){if(typeof $=="object"&&$!==null){var V=$.$$typeof;switch(V){case t:switch($=$.type,$){case f:case p:case n:case o:case i:case b:return $;default:switch($=$&&$.$$typeof,$){case a:case g:case P:case _:case u:return $;default:return V}}case r:return V}}}function N($){return B($)===p}return Ga.AsyncMode=f,Ga.ConcurrentMode=p,Ga.ContextConsumer=a,Ga.ContextProvider=u,Ga.Element=t,Ga.ForwardRef=g,Ga.Fragment=n,Ga.Lazy=P,Ga.Memo=_,Ga.Portal=r,Ga.Profiler=o,Ga.StrictMode=i,Ga.Suspense=b,Ga.isAsyncMode=function($){return N($)||B($)===f},Ga.isConcurrentMode=N,Ga.isContextConsumer=function($){return B($)===a},Ga.isContextProvider=function($){return B($)===u},Ga.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===t},Ga.isForwardRef=function($){return B($)===g},Ga.isFragment=function($){return B($)===n},Ga.isLazy=function($){return B($)===P},Ga.isMemo=function($){return B($)===_},Ga.isPortal=function($){return B($)===r},Ga.isProfiler=function($){return B($)===o},Ga.isStrictMode=function($){return B($)===i},Ga.isSuspense=function($){return B($)===b},Ga.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===n||$===p||$===o||$===i||$===b||$===S||typeof $=="object"&&$!==null&&($.$$typeof===P||$.$$typeof===_||$.$$typeof===u||$.$$typeof===a||$.$$typeof===g||$.$$typeof===M||$.$$typeof===D||$.$$typeof===F||$.$$typeof===k)},Ga.typeOf=B,Ga}var MR;function hZ(){return MR||(MR=1,f5.exports=fZ()),f5.exports}var h5,LR;function pZ(){if(LR)return h5;LR=1;var e=hZ(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=n,o[e.Memo]=i;function u(P){return e.isMemo(P)?i:o[P.$$typeof]||t}var a=Object.defineProperty,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,S=Object.prototype;function _(P,k,M){if(typeof k!="string"){if(S){var D=b(k);D&&D!==S&&_(P,D,M)}var F=f(k);p&&(F=F.concat(p(k)));for(var B=u(P),N=u(k),$=0;$<F.length;++$){var V=F[$];if(!r[V]&&!(M&&M[V])&&!(N&&N[V])&&!(B&&B[V])){var U=g(k,V);try{a(P,V,U)}catch{}}}}return P}return h5=_,h5}pZ();var mZ=!0;function B7(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var gP=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||mZ===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},yP=function(t,r,n){gP(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function gZ(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var yZ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vZ=/[A-Z]|^ms/g,bZ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,z7=function(t){return t.charCodeAt(1)===45},RR=function(t){return t!=null&&typeof t!="boolean"},p5=N7(function(e){return z7(e)?e:e.replace(vZ,"-$&").toLowerCase()}),DR=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(bZ,function(n,i,o){return uf={name:i,styles:o,next:uf},i})}return yZ[t]!==1&&!z7(t)&&typeof r=="number"&&r!==0?r+"px":r};function t1(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return uf={name:i.name,styles:i.styles,next:uf},i.name;var o=r;if(o.styles!==void 0){var u=o.next;if(u!==void 0)for(;u!==void 0;)uf={name:u.name,styles:u.styles,next:uf},u=u.next;var a=o.styles+";";return a}return _Z(e,t,r)}case"function":{if(e!==void 0){var f=uf,p=r(e);return uf=f,t1(e,t,p)}break}}var g=r;if(t==null)return g;var b=t[g];return b!==void 0?b:g}function _Z(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=t1(e,t,r[i])+";";else for(var o in r){var u=r[o];if(typeof u!="object"){var a=u;t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":RR(a)&&(n+=p5(o)+":"+DR(o,a)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(t==null||t[u[0]]===void 0))for(var f=0;f<u.length;f++)RR(u[f])&&(n+=p5(o)+":"+DR(o,u[f])+";");else{var p=t1(e,t,u);switch(o){case"animation":case"animationName":{n+=p5(o)+":"+p+";";break}default:n+=o+"{"+p+"}"}}}return n}var OR=/label:\s*([^\s;{]+)\s*(;|$)/g,uf;function O1(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";uf=void 0;var o=e[0];if(o==null||o.raw===void 0)n=!1,i+=t1(r,t,o);else{var u=o;i+=u[0]}for(var a=1;a<e.length;a++)if(i+=t1(r,t,e[a]),n){var f=o;i+=f[a]}OR.lastIndex=0;for(var p="",g;(g=OR.exec(i))!==null;)p+="-"+g[1];var b=gZ(i)+p;return{name:b,styles:i,next:uf}}var xZ=function(t){return t()},j7=Cx.useInsertionEffect?Cx.useInsertionEffect:!1,q7=j7||xZ,NR=j7||ee.useLayoutEffect,V7=ee.createContext(typeof HTMLElement<"u"?dZ({key:"css"}):null);V7.Provider;var vP=function(t){return ee.forwardRef(function(r,n){var i=ee.useContext(V7);return t(r,i,n)})},N1=ee.createContext({}),bP={}.hasOwnProperty,$T="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",wZ=function(t,r){var n={};for(var i in r)bP.call(r,i)&&(n[i]=r[i]);return n[$T]=t,n},SZ=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return gP(r,n,i),q7(function(){return yP(r,n,i)}),null},CZ=vP(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[$T],o=[n],u="";typeof e.className=="string"?u=B7(t.registered,o,e.className):e.className!=null&&(u=e.className+" ");var a=O1(o,void 0,ee.useContext(N1));u+=t.key+"-"+a.name;var f={};for(var p in e)bP.call(e,p)&&p!=="css"&&p!==$T&&(f[p]=e[p]);return f.className=u,r&&(f.ref=r),ee.createElement(ee.Fragment,null,ee.createElement(SZ,{cache:t,serialized:a,isStringTag:typeof i=="string"}),ee.createElement(i,f))}),EZ=CZ,FR=function(t,r){var n=arguments;if(r==null||!bP.call(r,"css"))return ee.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=EZ,o[1]=wZ(t,r);for(var u=2;u<i;u++)o[u]=n[u];return ee.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(FR||(FR={}));var $7=vP(function(e,t){var r=e.styles,n=O1([r],void 0,ee.useContext(N1)),i=ee.useRef();return NR(function(){var o=t.key+"-global",u=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,f=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(u.before=t.sheet.tags[0]),f!==null&&(a=!0,f.setAttribute("data-emotion",o),u.hydrate([f])),i.current=[u,a],function(){u.flush()}},[t]),NR(function(){var o=i.current,u=o[0],a=o[1];if(a){o[1]=!1;return}if(n.next!==void 0&&yP(t,n.next,!0),u.tags.length){var f=u.tags[u.tags.length-1].nextElementSibling;u.before=f,u.flush()}t.insert("",n,u,!1)},[t,n.name]),null});function _P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O1(t)}function F1(){var e=_P.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var TZ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IZ=N7(function(e){return TZ.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),PZ=IZ,AZ=function(t){return t!=="theme"},BR=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?PZ:AZ},zR=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(u){return t.__emotion_forwardProp(u)&&o(u)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},kZ=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return gP(r,n,i),q7(function(){return yP(r,n,i)}),null},MZ=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,u;r!==void 0&&(o=r.label,u=r.target);var a=zR(t,r,n),f=a||BR(i),p=!f("as");return function(){var g=arguments,b=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&b.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)b.push.apply(b,g);else{var S=g[0];b.push(S[0]);for(var _=g.length,P=1;P<_;P++)b.push(g[P],S[P])}var k=vP(function(M,D,F){var B=p&&M.as||i,N="",$=[],V=M;if(M.theme==null){V={};for(var U in M)V[U]=M[U];V.theme=ee.useContext(N1)}typeof M.className=="string"?N=B7(D.registered,$,M.className):M.className!=null&&(N=M.className+" ");var X=O1(b.concat($),D.registered,V);N+=D.key+"-"+X.name,u!==void 0&&(N+=" "+u);var Z=p&&a===void 0?BR(B):f,oe={};for(var re in M)p&&re==="as"||Z(re)&&(oe[re]=M[re]);return oe.className=N,F&&(oe.ref=F),ee.createElement(ee.Fragment,null,ee.createElement(kZ,{cache:D,serialized:X,isStringTag:typeof B=="string"}),ee.createElement(B,oe))});return k.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",k.defaultProps=t.defaultProps,k.__emotion_real=k,k.__emotion_base=i,k.__emotion_styles=b,k.__emotion_forwardProp=a,Object.defineProperty(k,"toString",{value:function(){return"."+u}}),k.withComponent=function(M,D){var F=e(M,Ex({},r,D,{shouldForwardProp:zR(k,D,!0)}));return F.apply(void 0,b)},k}},LZ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],GT=MZ.bind(null);LZ.forEach(function(e){GT[e]=GT(e)});var m5={exports:{}},g5,jR;function RZ(){if(jR)return g5;jR=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return g5=e,g5}var y5,qR;function DZ(){if(qR)return y5;qR=1;var e=RZ();function t(){}function r(){}return r.resetWarningCache=t,y5=function(){function n(u,a,f,p,g,b){if(b!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o},y5}var VR;function OZ(){return VR||(VR=1,m5.exports=DZ()()),m5.exports}var NZ=OZ();const wn=Sf(NZ);function FZ(e){return e==null||Object.keys(e).length===0}function G7(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(FZ(i)?r:i):t;return K.jsx($7,{styles:n})}function U7(e,t){return GT(e,t)}function BZ(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const $R=[];function rp(e){return $R[0]=e,O1($R)}var v5={exports:{}},ro={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function zZ(){if(GR)return ro;GR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function P(k){if(typeof k=="object"&&k!==null){var M=k.$$typeof;switch(M){case e:switch(k=k.type,k){case r:case i:case n:case f:case p:case S:return k;default:switch(k=k&&k.$$typeof,k){case u:case a:case b:case g:return k;case o:return k;default:return M}}case t:return M}}}return ro.ContextConsumer=o,ro.ContextProvider=u,ro.Element=e,ro.ForwardRef=a,ro.Fragment=r,ro.Lazy=b,ro.Memo=g,ro.Portal=t,ro.Profiler=i,ro.StrictMode=n,ro.Suspense=f,ro.SuspenseList=p,ro.isContextConsumer=function(k){return P(k)===o},ro.isContextProvider=function(k){return P(k)===u},ro.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},ro.isForwardRef=function(k){return P(k)===a},ro.isFragment=function(k){return P(k)===r},ro.isLazy=function(k){return P(k)===b},ro.isMemo=function(k){return P(k)===g},ro.isPortal=function(k){return P(k)===t},ro.isProfiler=function(k){return P(k)===i},ro.isStrictMode=function(k){return P(k)===n},ro.isSuspense=function(k){return P(k)===f},ro.isSuspenseList=function(k){return P(k)===p},ro.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===r||k===i||k===n||k===f||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===b||k.$$typeof===g||k.$$typeof===u||k.$$typeof===o||k.$$typeof===a||k.$$typeof===_||k.getModuleId!==void 0)},ro.typeOf=P,ro}var UR;function jZ(){return UR||(UR=1,v5.exports=zZ()),v5.exports}var H7=jZ();function cf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function W7(e){if(ee.isValidElement(e)||H7.isValidElementType(e)||!cf(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=W7(e[r])}),t}function Yl(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return cf(e)&&cf(t)&&Object.keys(t).forEach(i=>{ee.isValidElement(t[i])||H7.isValidElementType(t[i])?n[i]=t[i]:cf(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&cf(e[i])?n[i]=Yl(e[i],t[i],r):r.clone?n[i]=cf(t[i])?W7(t[i]):t[i]:n[i]=t[i]}),n}const qZ=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function VZ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,o=qZ(t),u=Object.keys(o);function a(S){return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r})`}function f(S){return`@media (max-width:${(typeof t[S]=="number"?t[S]:S)-n/100}${r})`}function p(S,_){const P=u.indexOf(_);return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${r}) and (max-width:${(P!==-1&&typeof t[u[P]]=="number"?t[u[P]]:_)-n/100}${r})`}function g(S){return u.indexOf(S)+1<u.length?p(S,u[u.indexOf(S)+1]):a(S)}function b(S){const _=u.indexOf(S);return _===0?a(u[1]):_===u.length-1?f(u[_]):p(S,u[u.indexOf(S)+1]).replace("@media","@media not all and")}return{keys:u,values:o,up:a,down:f,between:p,only:g,not:b,unit:r,...i}}function HR(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(n.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return r.length?r.reduce((n,i)=>{const o=t[i];return delete n[i],n[i]=o,n},{...t}):t}function $Z(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function GZ(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,o=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(o)}function UZ(e){const t=(o,u)=>o.replace("@media",u?`@container ${u}`:"@container");function r(o,u){o.up=(...a)=>t(e.breakpoints.up(...a),u),o.down=(...a)=>t(e.breakpoints.down(...a),u),o.between=(...a)=>t(e.breakpoints.between(...a),u),o.only=(...a)=>t(e.breakpoints.only(...a),u),o.not=(...a)=>{const f=t(e.breakpoints.not(...a),u);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const n={},i=o=>(r(n,o),n);return r(i),{...e,containerQueries:i}}const HZ={borderRadius:4};function N0(e,t){return t?Yl(e,t,{clone:!1}):e}const X2={xs:0,sm:600,md:900,lg:1200,xl:1536},WR={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${X2[e]}px)`},WZ={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:X2[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function hh(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||WR;return t.reduce((u,a,f)=>(u[o.up(o.keys[f])]=r(t[f]),u),{})}if(typeof t=="object"){const o=n.breakpoints||WR;return Object.keys(t).reduce((u,a)=>{if($Z(o.keys,a)){const f=GZ(n.containerQueries?n:WZ,a);f&&(u[f]=r(t[a],a))}else if(Object.keys(o.values||X2).includes(a)){const f=o.up(a);u[f]=r(t[a],a)}else{const f=a;u[f]=t[f]}return u},{})}return r(t)}function X7(e={}){return e.keys?.reduce((r,n)=>{const i=e.up(n);return r[i]={},r},{})||{}}function UT(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function zPe(e,...t){const r=X7(e),n=[r,...t].reduce((i,o)=>Yl(i,o),{});return UT(Object.keys(r),n)}function XZ(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,o)=>{o<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function jPe({values:e,breakpoints:t,base:r}){const n=r||XZ(e,t),i=Object.keys(n);if(i.length===0)return e;let o;return i.reduce((u,a,f)=>(Array.isArray(e)?(u[a]=e[f]!=null?e[f]:e[o],o=f):typeof e=="object"?(u[a]=e[a]!=null?e[a]:e[o],o=a):u[a]=e,u),{})}function Zr(e){if(typeof e!="string")throw new Error(fh(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Y2(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function Ix(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=Y2(e,r)||n,t&&(i=t(i,n,e)),i}function Fs(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=u=>{if(u[t]==null)return null;const a=u[t],f=u.theme,p=Y2(f,n)||{};return hh(u,a,b=>{let S=Ix(p,i,b);return b===S&&typeof b=="string"&&(S=Ix(p,i,`${t}${b==="default"?"":Zr(b)}`,b)),r===!1?S:{[r]:S}})};return o.propTypes={},o.filterProps=[t],o}function YZ(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const ZZ={m:"margin",p:"padding"},KZ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},XR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},JZ=YZ(e=>{if(e.length>2)if(XR[e])e=XR[e];else return[e];const[t,r]=e.split(""),n=ZZ[t],i=KZ[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),xP=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],wP=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...xP,...wP];function B1(e,t,r,n){const i=Y2(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const u=Math.abs(o),a=i[u];return o>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function SP(e){return B1(e,"spacing",8)}function z1(e,t){return typeof t=="string"||t==null?t:e(t)}function QZ(e,t){return r=>e.reduce((n,i)=>(n[i]=z1(t,r),n),{})}function eK(e,t,r,n){if(!t.includes(r))return null;const i=JZ(r),o=QZ(i,n),u=e[r];return hh(e,u,o)}function Y7(e,t){const r=SP(e.theme);return Object.keys(e).map(n=>eK(e,t,n,r)).reduce(N0,{})}function ms(e){return Y7(e,xP)}ms.propTypes={};ms.filterProps=xP;function gs(e){return Y7(e,wP)}gs.propTypes={};gs.filterProps=wP;function Z7(e=8,t=SP({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(o=>{const u=t(o);return typeof u=="number"?`${u}px`:u}).join(" ");return r.mui=!0,r}function Z2(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?N0(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function Uc(e){return typeof e!="number"?e:`${e}px solid`}function od(e,t){return Fs({prop:e,themeKey:"borders",transform:t})}const tK=od("border",Uc),rK=od("borderTop",Uc),nK=od("borderRight",Uc),iK=od("borderBottom",Uc),aK=od("borderLeft",Uc),oK=od("borderColor"),sK=od("borderTopColor"),lK=od("borderRightColor"),uK=od("borderBottomColor"),cK=od("borderLeftColor"),dK=od("outline",Uc),fK=od("outlineColor"),K2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=B1(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:z1(t,n)});return hh(e,e.borderRadius,r)}return null};K2.propTypes={};K2.filterProps=["borderRadius"];Z2(tK,rK,nK,iK,aK,oK,sK,lK,uK,cK,K2,dK,fK);const J2=e=>{if(e.gap!==void 0&&e.gap!==null){const t=B1(e.theme,"spacing",8),r=n=>({gap:z1(t,n)});return hh(e,e.gap,r)}return null};J2.propTypes={};J2.filterProps=["gap"];const Q2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=B1(e.theme,"spacing",8),r=n=>({columnGap:z1(t,n)});return hh(e,e.columnGap,r)}return null};Q2.propTypes={};Q2.filterProps=["columnGap"];const ew=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=B1(e.theme,"spacing",8),r=n=>({rowGap:z1(t,n)});return hh(e,e.rowGap,r)}return null};ew.propTypes={};ew.filterProps=["rowGap"];const hK=Fs({prop:"gridColumn"}),pK=Fs({prop:"gridRow"}),mK=Fs({prop:"gridAutoFlow"}),gK=Fs({prop:"gridAutoColumns"}),yK=Fs({prop:"gridAutoRows"}),vK=Fs({prop:"gridTemplateColumns"}),bK=Fs({prop:"gridTemplateRows"}),_K=Fs({prop:"gridTemplateAreas"}),xK=Fs({prop:"gridArea"});Z2(J2,Q2,ew,hK,pK,mK,gK,yK,vK,bK,_K,xK);function _y(e,t){return t==="grey"?t:e}const wK=Fs({prop:"color",themeKey:"palette",transform:_y}),SK=Fs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:_y}),CK=Fs({prop:"backgroundColor",themeKey:"palette",transform:_y});Z2(wK,SK,CK);function yc(e){return e<=1&&e!==0?`${e*100}%`:e}const EK=Fs({prop:"width",transform:yc}),CP=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{const n=e.theme?.breakpoints?.values?.[r]||X2[r];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:yc(r)}};return hh(e,e.maxWidth,t)}return null};CP.filterProps=["maxWidth"];const TK=Fs({prop:"minWidth",transform:yc}),IK=Fs({prop:"height",transform:yc}),PK=Fs({prop:"maxHeight",transform:yc}),AK=Fs({prop:"minHeight",transform:yc});Fs({prop:"size",cssProperty:"width",transform:yc});Fs({prop:"size",cssProperty:"height",transform:yc});const kK=Fs({prop:"boxSizing"});Z2(EK,CP,TK,IK,PK,AK,kK);const j1={border:{themeKey:"borders",transform:Uc},borderTop:{themeKey:"borders",transform:Uc},borderRight:{themeKey:"borders",transform:Uc},borderBottom:{themeKey:"borders",transform:Uc},borderLeft:{themeKey:"borders",transform:Uc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Uc},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:K2},color:{themeKey:"palette",transform:_y},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:_y},backgroundColor:{themeKey:"palette",transform:_y},p:{style:gs},pt:{style:gs},pr:{style:gs},pb:{style:gs},pl:{style:gs},px:{style:gs},py:{style:gs},padding:{style:gs},paddingTop:{style:gs},paddingRight:{style:gs},paddingBottom:{style:gs},paddingLeft:{style:gs},paddingX:{style:gs},paddingY:{style:gs},paddingInline:{style:gs},paddingInlineStart:{style:gs},paddingInlineEnd:{style:gs},paddingBlock:{style:gs},paddingBlockStart:{style:gs},paddingBlockEnd:{style:gs},m:{style:ms},mt:{style:ms},mr:{style:ms},mb:{style:ms},ml:{style:ms},mx:{style:ms},my:{style:ms},margin:{style:ms},marginTop:{style:ms},marginRight:{style:ms},marginBottom:{style:ms},marginLeft:{style:ms},marginX:{style:ms},marginY:{style:ms},marginInline:{style:ms},marginInlineStart:{style:ms},marginInlineEnd:{style:ms},marginBlock:{style:ms},marginBlockStart:{style:ms},marginBlockEnd:{style:ms},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:J2},rowGap:{style:ew},columnGap:{style:Q2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yc},maxWidth:{style:CP},minWidth:{transform:yc},height:{transform:yc},maxHeight:{transform:yc},minHeight:{transform:yc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function MK(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function LK(e,t){return typeof e=="function"?e(t):e}function RK(){function e(r,n,i,o){const u={[r]:n,theme:i},a=o[r];if(!a)return{[r]:n};const{cssProperty:f=r,themeKey:p,transform:g,style:b}=a;if(n==null)return null;if(p==="typography"&&n==="inherit")return{[r]:n};const S=Y2(i,p)||{};return b?b(u):hh(u,n,P=>{let k=Ix(S,g,P);return P===k&&typeof P=="string"&&(k=Ix(S,g,`${r}${P==="default"?"":Zr(P)}`,P)),f===!1?k:{[f]:k}})}function t(r){const{sx:n,theme:i={},nested:o}=r||{};if(!n)return null;const u=i.unstable_sxConfig??j1;function a(f){let p=f;if(typeof f=="function")p=f(i);else if(typeof f!="object")return f;if(!p)return null;const g=X7(i.breakpoints),b=Object.keys(g);let S=g;return Object.keys(p).forEach(_=>{const P=LK(p[_],i);if(P!=null)if(typeof P=="object")if(u[_])S=N0(S,e(_,P,i,u));else{const k=hh({theme:i},P,M=>({[_]:M}));MK(k,P)?S[_]=t({sx:P,theme:i,nested:!0}):S=N0(S,k)}else S=N0(S,e(_,P,i,u))}),!o&&i.modularCssLayers?{"@layer sx":HR(i,UT(b,S))}:HR(i,UT(b,S))}return Array.isArray(n)?n.map(a):a(n)}return t}const op=RK();op.filterProps=["sx"];function DK(e,t){const r=this;if(r.vars){if(!r.colorSchemes?.[e]||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return r.palette.mode===e?t:{}}function tw(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={},...u}=e,a=VZ(r),f=Z7(i);let p=Yl({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:f,shape:{...HZ,...o}},u);return p=UZ(p),p.applyStyles=DK,p=t.reduce((g,b)=>Yl(g,b),p),p.unstable_sxConfig={...j1,...u?.unstable_sxConfig},p.unstable_sx=function(b){return op({sx:b,theme:this})},p}function OK(e){return Object.keys(e).length===0}function rw(e=null){const t=ee.useContext(N1);return!t||OK(t)?e:t}const NK=tw();function q1(e=NK){return rw(e)}function b5(e){const t=rp(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function K7({styles:e,themeId:t,defaultTheme:r={}}){const n=q1(r),i=t&&n[t]||n;let o=typeof e=="function"?e(i):e;return i.modularCssLayers&&(Array.isArray(o)?o=o.map(u=>b5(typeof u=="function"?u(i):u)):o=b5(o)),K.jsx(G7,{styles:o})}const FK=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??j1;return Object.keys(e).forEach(n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function EP(e){const{sx:t,...r}=e,{systemProps:n,otherProps:i}=FK(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...u)=>{const a=t(...u);return cf(a)?{...n,...a}:n}:o={...n,...t},{...i,sx:o}}const YR=e=>e,BK=()=>{let e=YR;return{configure(t){e=t},generate(t){return e(t)},reset(){e=YR}}},TP=BK();function J7(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=J7(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cn(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=J7(e))&&(n&&(n+=" "),n+=t);return n}function Q7(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=U7("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(op);return ee.forwardRef(function(f,p){const g=q1(r),{className:b,component:S="div",..._}=EP(f);return K.jsx(o,{as:S,ref:p,className:cn(b,i?i(n):n),theme:t&&g[t]||g,..._})})}const zK={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ti(e,t,r="Mui"){const n=zK[t];return n?`${r}-${n}`:`${TP.generate(e)}-${t}`}function Kn(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=ti(e,i,r)}),n}const jK=Kn("MuiBox",["root"]),jg=Q7({defaultClassName:jK.root,generateClassName:TP.generate});function ej(e){const{variants:t,...r}=e,n={variants:t,style:rp(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=rp(i.style))}),n}const qK=tw();function _5(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function lm(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function VK(e){return e?(t,r)=>r[e]:null}function $K(e,t,r){e.theme=UK(e.theme)?r:e.theme[t]||e.theme}function rx(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(i=>rx(e,i,r));if(Array.isArray(n?.variants)){let i;if(n.isProcessed)i=r?lm(n.style,r):n.style;else{const{variants:o,...u}=n;i=r?lm(rp(u),r):u}return tj(e,n.variants,[i],r)}return n?.isProcessed?r?lm(rp(n.style),r):n.style:r?lm(rp(n),r):n}function tj(e,t,r=[],n=void 0){let i;e:for(let o=0;o<t.length;o+=1){const u=t[o];if(typeof u.props=="function"){if(i??={...e,...e.ownerState,ownerState:e.ownerState},!u.props(i))continue}else for(const a in u.props)if(e[a]!==u.props[a]&&e.ownerState?.[a]!==u.props[a])continue e;typeof u.style=="function"?(i??={...e,...e.ownerState,ownerState:e.ownerState},r.push(n?lm(rp(u.style(i)),n):u.style(i))):r.push(n?lm(rp(u.style),n):u.style)}return r}function rj(e={}){const{themeId:t,defaultTheme:r=qK,rootShouldForwardProp:n=_5,slotShouldForwardProp:i=_5}=e;function o(a){$K(a,t,r)}return(a,f={})=>{BZ(a,V=>V.filter(U=>U!==op));const{name:p,slot:g,skipVariantsResolver:b,skipSx:S,overridesResolver:_=VK(WK(g)),...P}=f,k=p&&p.startsWith("Mui")||g?"components":"custom",M=b!==void 0?b:g&&g!=="Root"&&g!=="root"||!1,D=S||!1;let F=_5;g==="Root"||g==="root"?F=n:g?F=i:HK(a)&&(F=void 0);const B=U7(a,{shouldForwardProp:F,label:GK(),...P}),N=V=>{if(V.__emotion_real===V)return V;if(typeof V=="function")return function(X){return rx(X,V,X.theme.modularCssLayers?k:void 0)};if(cf(V)){const U=ej(V);return function(Z){return U.variants?rx(Z,U,Z.theme.modularCssLayers?k:void 0):Z.theme.modularCssLayers?lm(U.style,k):U.style}}return V},$=(...V)=>{const U=[],X=V.map(N),Z=[];if(U.push(o),p&&_&&Z.push(function(ae){const de=ae.theme.components?.[p]?.styleOverrides;if(!de)return null;const fe={};for(const Le in de)fe[Le]=rx(ae,de[Le],ae.theme.modularCssLayers?"theme":void 0);return _(ae,fe)}),p&&!M&&Z.push(function(ae){const de=ae.theme?.components?.[p]?.variants;return de?tj(ae,de,[],ae.theme.modularCssLayers?"theme":void 0):null}),D||Z.push(op),Array.isArray(X[0])){const H=X.shift(),ae=new Array(U.length).fill(""),se=new Array(Z.length).fill("");let de;de=[...ae,...H,...se],de.raw=[...ae,...H.raw,...se],U.unshift(de)}const oe=[...U,...X,...Z],re=B(...oe);return a.muiName&&(re.muiName=a.muiName),re};return B.withConfig&&($.withConfig=B.withConfig),$}}function GK(e,t){return void 0}function UK(e){for(const t in e)return!1;return!0}function HK(e){return typeof e=="string"&&e.charCodeAt(0)>96}function WK(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const Om=rj();function r1(e,t,r=!1){const n={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=i;if(o==="components"||o==="slots")n[o]={...e[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const u=e[o],a=t[o];if(!a)n[o]=u||{};else if(!u)n[o]=a;else{n[o]={...a};for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const p=f;n[o][p]=r1(u[p],a[p],r)}}}else o==="className"&&r&&t.className?n.className=cn(e?.className,t?.className):o==="style"&&r&&t.style?n.style={...e?.style,...t?.style}:n[o]===void 0&&(n[o]=e[o])}return n}function nj(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:r1(t.components[r].defaultProps,n)}function XK({props:e,name:t,defaultTheme:r,themeId:n}){let i=q1(r);return n&&(i=i[n]||i),nj({theme:i,name:t,props:e})}const Zl=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function YK(e,t,r,n,i){const[o,u]=ee.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return Zl(()=>{if(!r)return;const a=r(e),f=()=>{u(a.matches)};return f(),a.addEventListener("change",f),()=>{a.removeEventListener("change",f)}},[e,r]),o}const ZK={...Cx},ij=ZK.useSyncExternalStore;function KK(e,t,r,n,i){const o=ee.useCallback(()=>t,[t]),u=ee.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:g}=n(e);return()=>g}return o},[o,e,n,i,r]),[a,f]=ee.useMemo(()=>{if(r===null)return[o,()=>()=>{}];const g=r(e);return[()=>g.matches,b=>(g.addEventListener("change",b),()=>{g.removeEventListener("change",b)})]},[o,r,e]);return ij(f,a,u)}function aj(e={}){const{themeId:t}=e;return function(n,i={}){let o=rw();o&&t&&(o=o[t]||o);const u=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:f=u?window.matchMedia:null,ssrMatchMedia:p=null,noSsr:g=!1}=nj({name:"MuiUseMediaQuery",props:i,theme:o});let b=typeof n=="function"?n(o):n;return b=b.replace(/^@media( ?)/m,""),b.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(ij!==void 0?KK:YK)(b,a,f,p,g)}}aj();function tm(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function IP(e,t=0,r=1){return tm(e,t,r)}function JK(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function sp(e){if(e.type)return e;if(e.charAt(0)==="#")return sp(JK(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(fh(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(fh(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const QK=e=>{const t=sp(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},p0=(e,t)=>{try{return QK(e)}catch{return e}};function nw(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function oj(e){e=sp(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),u=(p,g=(p+r/30)%12)=>i-o*Math.max(Math.min(g-3,9-g,1),-1);let a="rgb";const f=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return e.type==="hsla"&&(a+="a",f.push(t[3])),nw({type:a,values:f})}function HT(e){e=sp(e);let t=e.type==="hsl"||e.type==="hsla"?sp(oj(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function eJ(e,t){const r=HT(e),n=HT(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function Px(e,t){return e=sp(e),t=IP(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,nw(e)}function Up(e,t,r){try{return Px(e,t)}catch{return e}}function iw(e,t){if(e=sp(e),t=IP(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return nw(e)}function Ya(e,t,r){try{return iw(e,t)}catch{return e}}function aw(e,t){if(e=sp(e),t=IP(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return nw(e)}function Za(e,t,r){try{return aw(e,t)}catch{return e}}function Ax(e,t=.15){return HT(e)>.5?iw(e,t):aw(e,t)}function Ub(e,t,r){try{return Ax(e,t)}catch{return e}}const sj=ee.createContext(null);function PP(){return ee.useContext(sj)}const tJ=typeof Symbol=="function"&&Symbol.for,rJ=tJ?Symbol.for("mui.nested"):"__THEME_NESTED__";function nJ(e,t){return typeof t=="function"?t(e):{...e,...t}}function iJ(e){const{children:t,theme:r}=e,n=PP(),i=ee.useMemo(()=>{const o=n===null?{...r}:nJ(n,r);return o!=null&&(o[rJ]=n!==null),o},[r,n]);return K.jsx(sj.Provider,{value:i,children:t})}const lj=ee.createContext();function aJ({value:e,...t}){return K.jsx(lj.Provider,{value:e??!0,...t})}const V1=()=>ee.useContext(lj)??!1,uj=ee.createContext(void 0);function oJ({value:e,children:t}){return K.jsx(uj.Provider,{value:e,children:t})}function sJ(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?r1(i.defaultProps,n,t.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?r1(i,n,t.components.mergeClassNameAndStyle):n}function lJ({props:e,name:t}){const r=ee.useContext(uj);return sJ({props:e,name:t,theme:{components:r}})}let ZR=0;function uJ(e){const[t,r]=ee.useState(e),n=e||t;return ee.useEffect(()=>{t==null&&(ZR+=1,r(`mui-${ZR}`))},[t]),n}const cJ={...Cx},KR=cJ.useId;function yp(e){if(KR!==void 0){const t=KR();return e??t}return uJ(e)}function dJ(e){const t=rw(),r=yp()||"",{modularCssLayers:n}=e;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!n||t!==null?i="":typeof n=="string"?i=n.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,Zl(()=>{const o=document.querySelector("head");if(!o)return;const u=o.firstChild;if(i){if(u&&u.hasAttribute?.("data-mui-layer-order")&&u.getAttribute("data-mui-layer-order")===r)return;const a=document.createElement("style");a.setAttribute("data-mui-layer-order",r),a.textContent=i,o.prepend(a)}else o.querySelector(`style[data-mui-layer-order="${r}"]`)?.remove()},[i,r]),i?K.jsx(K7,{styles:i}):null}const JR={};function QR(e,t,r,n=!1){return ee.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),u=e?{...t,[e]:o}:o;return n?()=>u:u}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,n])}function cj(e){const{children:t,theme:r,themeId:n}=e,i=rw(JR),o=PP()||JR,u=QR(n,i,r),a=QR(n,o,r,!0),f=(n?u[n]:u).direction==="rtl",p=dJ(u);return K.jsx(iJ,{theme:a,children:K.jsx(N1.Provider,{value:u,children:K.jsx(aJ,{value:f,children:K.jsxs(oJ,{value:n?u[n].components:u.components,children:[p,t]})})})})}const eD={theme:void 0};function fJ(e){let t,r;return function(i){let o=t;return(o===void 0||i.theme!==r)&&(eD.theme=i.theme,o=ej(e(eD)),t=o,r=i.theme),o}}const AP="mode",kP="color-scheme",hJ="data-color-scheme";function pJ(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=AP,colorSchemeStorageKey:o=kP,attribute:u=hJ,colorSchemeNode:a="document.documentElement",nonce:f}=e||{};let p="",g=u;if(u==="class"&&(g=".%s"),u==="data"&&(g="[data-%s]"),g.startsWith(".")){const S=g.substring(1);p+=`${a}.classList.remove('${S}'.replace('%s', light), '${S}'.replace('%s', dark));
      ${a}.classList.add('${S}'.replace('%s', colorScheme));`}const b=g.match(/\[([^[\]]+)\]/);if(b){const[S,_]=b[1].split("=");_||(p+=`${a}.removeAttribute('${S}'.replace('%s', light));
      ${a}.removeAttribute('${S}'.replace('%s', dark));`),p+=`
      ${a}.setAttribute('${S}'.replace('%s', colorScheme), ${_?`${_}.replace('%s', colorScheme)`:'""'});`}else p+=`${a}.setAttribute('${g}', colorScheme);`;return K.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${t}';
  const dark = localStorage.getItem('${o}-dark') || '${n}';
  const light = localStorage.getItem('${o}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${p}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function mJ(){}const gJ=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let n;try{n=t.localStorage.getItem(e)}catch{}return n||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return mJ;const n=i=>{const o=i.newValue;i.key===e&&r(o)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function x5(){}function tD(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function dj(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function yJ(e){return dj(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function vJ(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:o=AP,colorSchemeStorageKey:u=kP,storageWindow:a=typeof window>"u"?void 0:window,storageManager:f=gJ,noSsr:p=!1}=e,g=i.join(","),b=i.length>1,S=ee.useMemo(()=>f?.({key:o,storageWindow:a}),[f,o,a]),_=ee.useMemo(()=>f?.({key:`${u}-light`,storageWindow:a}),[f,u,a]),P=ee.useMemo(()=>f?.({key:`${u}-dark`,storageWindow:a}),[f,u,a]),[k,M]=ee.useState(()=>{const X=S?.get(t)||t,Z=_?.get(r)||r,oe=P?.get(n)||n;return{mode:X,systemMode:tD(X),lightColorScheme:Z,darkColorScheme:oe}}),[D,F]=ee.useState(p||!b);ee.useEffect(()=>{F(!0)},[]);const B=yJ(k),N=ee.useCallback(X=>{M(Z=>{if(X===Z.mode)return Z;const oe=X??t;return S?.set(oe),{...Z,mode:oe,systemMode:tD(oe)}})},[S,t]),$=ee.useCallback(X=>{X?typeof X=="string"?X&&!g.includes(X)?console.error(`\`${X}\` does not exist in \`theme.colorSchemes\`.`):M(Z=>{const oe={...Z};return dj(Z,re=>{re==="light"&&(_?.set(X),oe.lightColorScheme=X),re==="dark"&&(P?.set(X),oe.darkColorScheme=X)}),oe}):M(Z=>{const oe={...Z},re=X.light===null?r:X.light,H=X.dark===null?n:X.dark;return re&&(g.includes(re)?(oe.lightColorScheme=re,_?.set(re)):console.error(`\`${re}\` does not exist in \`theme.colorSchemes\`.`)),H&&(g.includes(H)?(oe.darkColorScheme=H,P?.set(H)):console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`)),oe}):M(Z=>(_?.set(r),P?.set(n),{...Z,lightColorScheme:r,darkColorScheme:n}))},[g,_,P,r,n]),V=ee.useCallback(X=>{k.mode==="system"&&M(Z=>{const oe=X?.matches?"dark":"light";return Z.systemMode===oe?Z:{...Z,systemMode:oe}})},[k.mode]),U=ee.useRef(V);return U.current=V,ee.useEffect(()=>{if(typeof window.matchMedia!="function"||!b)return;const X=(...oe)=>U.current(...oe),Z=window.matchMedia("(prefers-color-scheme: dark)");return Z.addListener(X),X(Z),()=>{Z.removeListener(X)}},[b]),ee.useEffect(()=>{if(b){const X=S?.subscribe(re=>{(!re||["light","dark","system"].includes(re))&&N(re||t)})||x5,Z=_?.subscribe(re=>{(!re||g.match(re))&&$({light:re})})||x5,oe=P?.subscribe(re=>{(!re||g.match(re))&&$({dark:re})})||x5;return()=>{X(),Z(),oe()}}},[$,N,g,t,a,b,S,_,P]),{...k,mode:D?k.mode:void 0,systemMode:D?k.systemMode:void 0,colorScheme:D?B:void 0,setMode:N,setColorScheme:$}}const bJ="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function _J(e){const{themeId:t,theme:r={},modeStorageKey:n=AP,colorSchemeStorageKey:i=kP,disableTransitionOnChange:o=!1,defaultColorScheme:u,resolveTheme:a}=e,f={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},p=ee.createContext(void 0),g=()=>ee.useContext(p)||f,b={},S={};function _(D){const{children:F,theme:B,modeStorageKey:N=n,colorSchemeStorageKey:$=i,disableTransitionOnChange:V=o,storageManager:U,storageWindow:X=typeof window>"u"?void 0:window,documentNode:Z=typeof document>"u"?void 0:document,colorSchemeNode:oe=typeof document>"u"?void 0:document.documentElement,disableNestedContext:re=!1,disableStyleSheetGeneration:H=!1,defaultMode:ae="system",forceThemeRerender:se=!1,noSsr:de}=D,fe=ee.useRef(!1),Le=PP(),ye=ee.useContext(p),xe=!!ye&&!re,Se=ee.useMemo(()=>B||(typeof r=="function"?r():r),[B]),Re=Se[t],he=Re||Se,{colorSchemes:Ee=b,components:we=S,cssVarPrefix:Ne}=he,Fe=Object.keys(Ee).filter(at=>!!Ee[at]).join(","),Xe=ee.useMemo(()=>Fe.split(","),[Fe]),Be=typeof u=="string"?u:u.light,ot=typeof u=="string"?u:u.dark,Ke=Ee[Be]&&Ee[ot]?ae:Ee[he.defaultColorScheme]?.palette?.mode||he.palette?.mode,{mode:it,setMode:ke,systemMode:Nt,lightColorScheme:st,darkColorScheme:$e,colorScheme:Zt,setColorScheme:$t}=vJ({supportedColorSchemes:Xe,defaultLightColorScheme:Be,defaultDarkColorScheme:ot,modeStorageKey:N,colorSchemeStorageKey:$,defaultMode:Ke,storageManager:U,storageWindow:X,noSsr:de});let Wt=it,ht=Zt;xe&&(Wt=ye.mode,ht=ye.colorScheme);let sr=ht||he.defaultColorScheme;he.vars&&!se&&(sr=he.defaultColorScheme);const cr=ee.useMemo(()=>{const at=he.generateThemeVars?.()||he.vars,Ae={...he,components:we,colorSchemes:Ee,cssVarPrefix:Ne,vars:at};if(typeof Ae.generateSpacing=="function"&&(Ae.spacing=Ae.generateSpacing()),sr){const _e=Ee[sr];_e&&typeof _e=="object"&&Object.keys(_e).forEach(je=>{_e[je]&&typeof _e[je]=="object"?Ae[je]={...Ae[je],..._e[je]}:Ae[je]=_e[je]})}return a?a(Ae):Ae},[he,sr,we,Ee,Ne]),ir=he.colorSchemeSelector;Zl(()=>{if(ht&&oe&&ir&&ir!=="media"){const at=ir;let Ae=ir;if(at==="class"&&(Ae=".%s"),at==="data"&&(Ae="[data-%s]"),at?.startsWith("data-")&&!at.includes("%s")&&(Ae=`[${at}="%s"]`),Ae.startsWith("."))oe.classList.remove(...Xe.map(_e=>Ae.substring(1).replace("%s",_e))),oe.classList.add(Ae.substring(1).replace("%s",ht));else{const _e=Ae.replace("%s",ht).match(/\[([^\]]+)\]/);if(_e){const[je,Ge]=_e[1].split("=");Ge||Xe.forEach(He=>{oe.removeAttribute(je.replace(ht,He))}),oe.setAttribute(je,Ge?Ge.replace(/"|'/g,""):"")}else oe.setAttribute(Ae,ht)}}},[ht,ir,oe,Xe]),ee.useEffect(()=>{let at;if(V&&fe.current&&Z){const Ae=Z.createElement("style");Ae.appendChild(Z.createTextNode(bJ)),Z.head.appendChild(Ae),window.getComputedStyle(Z.body),at=setTimeout(()=>{Z.head.removeChild(Ae)},1)}return()=>{clearTimeout(at)}},[ht,V,Z]),ee.useEffect(()=>(fe.current=!0,()=>{fe.current=!1}),[]);const br=ee.useMemo(()=>({allColorSchemes:Xe,colorScheme:ht,darkColorScheme:$e,lightColorScheme:st,mode:Wt,setColorScheme:$t,setMode:ke,systemMode:Nt}),[Xe,ht,$e,st,Wt,$t,ke,Nt,cr.colorSchemeSelector]);let yr=!0;(H||he.cssVariables===!1||xe&&Le?.cssVarPrefix===Ne)&&(yr=!1);const Kt=K.jsxs(ee.Fragment,{children:[K.jsx(cj,{themeId:Re?t:void 0,theme:cr,children:F}),yr&&K.jsx(G7,{styles:cr.generateStyleSheets?.()||[]})]});return xe?Kt:K.jsx(p.Provider,{value:br,children:Kt})}const P=typeof u=="string"?u:u.light,k=typeof u=="string"?u:u.dark;return{CssVarsProvider:_,useColorScheme:g,getInitColorSchemeScript:D=>pJ({colorSchemeStorageKey:i,defaultLightColorScheme:P,defaultDarkColorScheme:k,modeStorageKey:n,...D})}}function xJ(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const rD=(e,t,r,n=[])=>{let i=e;t.forEach((o,u)=>{u===t.length-1?Array.isArray(i)?i[Number(o)]=r:i&&typeof i=="object"&&(i[o]=r):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},wJ=(e,t,r)=>{function n(i,o=[],u=[]){Object.entries(i).forEach(([a,f])=>{(!r||r&&!r([...o,a]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?n(f,[...o,a],Array.isArray(f)?[...u,a]:u):t([...o,a],f,u))})}n(e)},SJ=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function w5(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},o={},u={};return wJ(e,(a,f,p)=>{if((typeof f=="string"||typeof f=="number")&&(!n||!n(a,f))){const g=`--${r?`${r}-`:""}${a.join("-")}`,b=SJ(a,f);Object.assign(i,{[g]:b}),rD(o,a,`var(${g})`,p),rD(u,a,`var(${g}, ${b})`,p)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:u}}function CJ(e,t={}){const{getSelector:r=D,disableCssColorScheme:n,colorSchemeSelector:i,enableContrastVars:o}=t,{colorSchemes:u={},components:a,defaultColorScheme:f="light",...p}=e,{vars:g,css:b,varsWithDefaults:S}=w5(p,t);let _=S;const P={},{[f]:k,...M}=u;if(Object.entries(M||{}).forEach(([N,$])=>{const{vars:V,css:U,varsWithDefaults:X}=w5($,t);_=Yl(_,X),P[N]={css:U,vars:V}}),k){const{css:N,vars:$,varsWithDefaults:V}=w5(k,t);_=Yl(_,V),P[f]={css:N,vars:$}}function D(N,$){let V=i;if(i==="class"&&(V=".%s"),i==="data"&&(V="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(V=`[${i}="%s"]`),N){if(V==="media")return e.defaultColorScheme===N?":root":{[`@media (prefers-color-scheme: ${u[N]?.palette?.mode||N})`]:{":root":$}};if(V)return e.defaultColorScheme===N?`:root, ${V.replace("%s",String(N))}`:V.replace("%s",String(N))}return":root"}return{vars:_,generateThemeVars:()=>{let N={...g};return Object.entries(P).forEach(([,{vars:$}])=>{N=Yl(N,$)}),N},generateStyleSheets:()=>{const N=[],$=e.defaultColorScheme||"light";function V(Z,oe){Object.keys(oe).length&&N.push(typeof Z=="string"?{[Z]:{...oe}}:Z)}V(r(void 0,{...b}),b);const{[$]:U,...X}=P;if(U){const{css:Z}=U,oe=u[$]?.palette?.mode,re=!n&&oe?{colorScheme:oe,...Z}:{...Z};V(r($,{...re}),re)}return Object.entries(X).forEach(([Z,{css:oe}])=>{const re=u[Z]?.palette?.mode,H=!n&&re?{colorScheme:re,...oe}:{...oe};V(r(Z,{...H}),H)}),o&&N.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),N}}}function EJ(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function ri(e,t,r=void 0){const n={};for(const i in e){const o=e[i];let u="",a=!0;for(let f=0;f<o.length;f+=1){const p=o[f];p&&(u+=(a===!0?"":" ")+t(p),a=!1,r&&r[p]&&(u+=" "+r[p]))}n[i]=u}return n}function xy(e,t){return ee.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const TJ=(e,t)=>e.filter(r=>t.includes(r)),tv=(e,t,r)=>{const n=e.keys[0];Array.isArray(t)?t.forEach((i,o)=>{r((u,a)=>{o<=e.keys.length-1&&(o===0?Object.assign(u,a):u[e.up(e.keys[o])]=a)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:TJ(e.keys,Object.keys(t))).forEach(o=>{if(e.keys.includes(o)){const u=t[o];u!==void 0&&r((a,f)=>{n===o?Object.assign(a,f):a[e.up(o)]=f},u)}}):(typeof t=="number"||typeof t=="string")&&r((i,o)=>{Object.assign(i,o)},t)};function kx(e){return`--Grid-${e}Spacing`}function ow(e){return`--Grid-parent-${e}Spacing`}const nD="--Grid-columns",wy="--Grid-parent-columns",IJ=({theme:e,ownerState:t})=>{const r={};return tv(e.breakpoints,t.size,(n,i)=>{let o={};i==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${wy}) - (var(${wy}) - ${i}) * (var(${ow("column")}) / var(${wy})))`}),n(r,o)}),r},PJ=({theme:e,ownerState:t})=>{const r={};return tv(e.breakpoints,t.offset,(n,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${wy}) + var(${ow("column")}) * ${i} / var(${wy}))`}),n(r,o)}),r},AJ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={[nD]:12};return tv(e.breakpoints,t.columns,(n,i)=>{const o=i??12;n(r,{[nD]:o,"> *":{[wy]:o}})}),r},kJ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return tv(e.breakpoints,t.rowSpacing,(n,i)=>{const o=typeof i=="string"?i:e.spacing?.(i);n(r,{[kx("row")]:o,"> *":{[ow("row")]:o}})}),r},MJ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return tv(e.breakpoints,t.columnSpacing,(n,i)=>{const o=typeof i=="string"?i:e.spacing?.(i);n(r,{[kx("column")]:o,"> *":{[ow("column")]:o}})}),r},LJ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return tv(e.breakpoints,t.direction,(n,i)=>{n(r,{flexDirection:i})}),r},RJ=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${kx("row")}) var(${kx("column")})`}}),DJ=e=>{const t=[];return Object.entries(e).forEach(([r,n])=>{n!==!1&&n!==void 0&&t.push(`grid-${r}-${String(n)}`)}),t},OJ=(e,t="xs")=>{function r(n){return n===void 0?!1:typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number"&&n>0}if(r(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const n=[];return Object.entries(e).forEach(([i,o])=>{r(o)&&n.push(`spacing-${i}-${String(o)}`)}),n}return[]},NJ=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,r])=>`direction-${t}-${r}`):[`direction-xs-${String(e)}`];function FJ(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(r=>{e[r]!==void 0&&delete e[r]})}const BJ=tw(),zJ=Om("div",{name:"MuiGrid",slot:"Root"});function jJ(e){return XK({props:e,name:"MuiGrid",defaultTheme:BJ})}function qJ(e={}){const{createStyledComponent:t=zJ,useThemeProps:r=jJ,useTheme:n=q1,componentName:i="MuiGrid"}=e,o=(p,g)=>{const{container:b,direction:S,spacing:_,wrap:P,size:k}=p,M={root:["root",b&&"container",P!=="wrap"&&`wrap-xs-${String(P)}`,...NJ(S),...DJ(k),...b?OJ(_,g.breakpoints.keys[0]):[]]};return ri(M,D=>ti(i,D),{})};function u(p,g,b=()=>!0){const S={};return p===null||(Array.isArray(p)?p.forEach((_,P)=>{_!==null&&b(_)&&g.keys[P]&&(S[g.keys[P]]=_)}):typeof p=="object"?Object.keys(p).forEach(_=>{const P=p[_];P!=null&&b(P)&&(S[_]=P)}):S[g.keys[0]]=p),S}const a=t(AJ,MJ,kJ,IJ,LJ,RJ,PJ),f=ee.forwardRef(function(g,b){const S=n(),_=r(g),P=EP(_);FJ(P,S.breakpoints);const{className:k,children:M,columns:D=12,container:F=!1,component:B="div",direction:N="row",wrap:$="wrap",size:V={},offset:U={},spacing:X=0,rowSpacing:Z=X,columnSpacing:oe=X,unstable_level:re=0,...H}=P,ae=u(V,S.breakpoints,Re=>Re!==!1),se=u(U,S.breakpoints),de=g.columns??(re?void 0:D),fe=g.spacing??(re?void 0:X),Le=g.rowSpacing??g.spacing??(re?void 0:Z),ye=g.columnSpacing??g.spacing??(re?void 0:oe),xe={...P,level:re,columns:de,container:F,direction:N,wrap:$,spacing:fe,rowSpacing:Le,columnSpacing:ye,size:ae,offset:se},Se=o(xe,S);return K.jsx(a,{ref:b,as:B,ownerState:xe,className:cn(Se.root,k),...H,children:ee.Children.map(M,Re=>ee.isValidElement(Re)&&xy(Re,["Grid"])&&F&&Re.props.container?ee.cloneElement(Re,{unstable_level:Re.props?.unstable_level??re+1}):Re)})});return f.muiName="Grid",f}const n1={black:"#000",white:"#fff"},VJ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},xg={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},wg={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},jv={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Sg={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Cg={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Eg={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function fj(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:n1.white,default:n1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const hj=fj();function pj(){return{text:{primary:n1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:n1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const WT=pj();function iD(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=aw(e.main,i):t==="dark"&&(e.dark=iw(e.main,o)))}function aD(e,t,r,n,i){const o=i.light||i,u=i.dark||i*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(o*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(u*100).toFixed(0)}%)`))}function $J(e="light"){return e==="dark"?{main:Sg[200],light:Sg[50],dark:Sg[400]}:{main:Sg[700],light:Sg[400],dark:Sg[800]}}function GJ(e="light"){return e==="dark"?{main:xg[200],light:xg[50],dark:xg[400]}:{main:xg[500],light:xg[300],dark:xg[700]}}function UJ(e="light"){return e==="dark"?{main:wg[500],light:wg[300],dark:wg[700]}:{main:wg[700],light:wg[400],dark:wg[800]}}function HJ(e="light"){return e==="dark"?{main:Cg[400],light:Cg[300],dark:Cg[700]}:{main:Cg[700],light:Cg[500],dark:Cg[900]}}function WJ(e="light"){return e==="dark"?{main:Eg[400],light:Eg[300],dark:Eg[700]}:{main:Eg[800],light:Eg[500],dark:Eg[900]}}function XJ(e="light"){return e==="dark"?{main:jv[400],light:jv[300],dark:jv[700]}:{main:"#ed6c02",light:jv[500],dark:jv[900]}}function YJ(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function MP(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:i,...o}=e,u=e.primary||$J(t),a=e.secondary||GJ(t),f=e.error||UJ(t),p=e.info||HJ(t),g=e.success||WJ(t),b=e.warning||XJ(t);function S(M){return i?YJ(M):eJ(M,WT.text.primary)>=r?WT.text.primary:hj.text.primary}const _=({color:M,name:D,mainShade:F=500,lightShade:B=300,darkShade:N=700})=>{if(M={...M},!M.main&&M[F]&&(M.main=M[F]),!M.hasOwnProperty("main"))throw new Error(fh(11,D?` (${D})`:"",F));if(typeof M.main!="string")throw new Error(fh(12,D?` (${D})`:"",JSON.stringify(M.main)));return i?(aD(i,M,"light",B,n),aD(i,M,"dark",N,n)):(iD(M,"light",B,n),iD(M,"dark",N,n)),M.contrastText||(M.contrastText=S(M.main)),M};let P;return t==="light"?P=fj():t==="dark"&&(P=pj()),Yl({common:{...n1},mode:t,primary:_({color:u,name:"primary"}),secondary:_({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:_({color:f,name:"error"}),warning:_({color:b,name:"warning"}),info:_({color:p,name:"info"}),success:_({color:g,name:"success"}),grey:VJ,contrastThreshold:r,getContrastText:S,augmentColor:_,tonalOffset:n,...P},o)}function ZJ(e){const t={};return Object.entries(e).forEach(n=>{const[i,o]=n;typeof o=="object"&&(t[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}function KJ(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function JJ(e){return Math.round(e*1e5)/1e5}const oD={textTransform:"uppercase"},sD='"Roboto", "Helvetica", "Arial", sans-serif';function mj(e,t){const{fontFamily:r=sD,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:u=500,fontWeightBold:a=700,htmlFontSize:f=16,allVariants:p,pxToRem:g,...b}=typeof t=="function"?t(e):t,S=n/14,_=g||(M=>`${M/f*S}rem`),P=(M,D,F,B,N)=>({fontFamily:r,fontWeight:M,fontSize:_(D),lineHeight:F,...r===sD?{letterSpacing:`${JJ(B/D)}em`}:{},...N,...p}),k={h1:P(i,96,1.167,-1.5),h2:P(i,60,1.2,-.5),h3:P(o,48,1.167,0),h4:P(o,34,1.235,.25),h5:P(o,24,1.334,0),h6:P(u,20,1.6,.15),subtitle1:P(o,16,1.75,.15),subtitle2:P(u,14,1.57,.1),body1:P(o,16,1.5,.15),body2:P(o,14,1.43,.15),button:P(u,14,1.75,.4,oD),caption:P(o,12,1.66,.4),overline:P(o,12,2.66,1,oD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Yl({htmlFontSize:f,pxToRem:_,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:u,fontWeightBold:a,...k},b,{clone:!1})}const QJ=.2,eQ=.14,tQ=.12;function Vo(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${QJ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${eQ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${tQ})`].join(",")}const rQ=["none",Vo(0,2,1,-1,0,1,1,0,0,1,3,0),Vo(0,3,1,-2,0,2,2,0,0,1,5,0),Vo(0,3,3,-2,0,3,4,0,0,1,8,0),Vo(0,2,4,-1,0,4,5,0,0,1,10,0),Vo(0,3,5,-1,0,5,8,0,0,1,14,0),Vo(0,3,5,-1,0,6,10,0,0,1,18,0),Vo(0,4,5,-2,0,7,10,1,0,2,16,1),Vo(0,5,5,-3,0,8,10,1,0,3,14,2),Vo(0,5,6,-3,0,9,12,1,0,3,16,2),Vo(0,6,6,-3,0,10,14,1,0,4,18,3),Vo(0,6,7,-4,0,11,15,1,0,4,20,3),Vo(0,7,8,-4,0,12,17,2,0,5,22,4),Vo(0,7,8,-4,0,13,19,2,0,5,24,4),Vo(0,7,9,-4,0,14,21,2,0,5,26,4),Vo(0,8,9,-5,0,15,22,2,0,6,28,5),Vo(0,8,10,-5,0,16,24,2,0,6,30,5),Vo(0,8,11,-5,0,17,26,2,0,6,32,5),Vo(0,9,11,-5,0,18,28,2,0,7,34,6),Vo(0,9,12,-6,0,19,29,2,0,7,36,6),Vo(0,10,13,-6,0,20,31,3,0,8,38,7),Vo(0,10,13,-6,0,21,33,3,0,8,40,7),Vo(0,10,14,-6,0,22,35,3,0,8,42,7),Vo(0,11,14,-7,0,23,36,3,0,9,44,8),Vo(0,11,15,-7,0,24,38,3,0,9,46,8)],nQ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},gj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function lD(e){return`${Math.round(e)}ms`}function iQ(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function aQ(e){const t={...nQ,...e.easing},r={...gj,...e.duration};return{getAutoHeightDuration:iQ,create:(i=["all"],o={})=>{const{duration:u=r.standard,easing:a=t.easeInOut,delay:f=0,...p}=o;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof u=="string"?u:lD(u)} ${a} ${typeof f=="string"?f:lD(f)}`).join(",")},...e,easing:t,duration:r}}const oQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function sQ(e){return cf(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function yj(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let o=0;o<i.length;o++){const[u,a]=i[o];!sQ(a)||u.startsWith("unstable_")?delete n[u]:cf(a)&&(n[u]={...a},r(n[u]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function uD(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const lQ=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function uQ(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:Px(t,lQ(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${uD(r)})`:aw(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${uD(r)})`:iw(t,r)}})}function XT(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:o={},transitions:u={},typography:a={},shape:f,colorSpace:p,...g}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(fh(20));const b=MP({...o,colorSpace:p}),S=tw(e);let _=Yl(S,{mixins:KJ(S.breakpoints,n),palette:b,shadows:rQ.slice(),typography:mj(b,a),transitions:aQ(u),zIndex:{...oQ}});return _=Yl(_,g),_=t.reduce((P,k)=>Yl(P,k),_),_.unstable_sxConfig={...j1,...g?.unstable_sxConfig},_.unstable_sx=function(k){return op({sx:k,theme:this})},_.toRuntimeSource=yj,uQ(_),_}function YT(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const cQ=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=YT(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function vj(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function bj(e){return e==="dark"?cQ:[]}function dQ(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:i,...o}=e,u=MP({...t,colorSpace:i});return{palette:u,opacity:{...vj(u.mode),...r},overlays:n||bj(u.mode),...o}}function fQ(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const hQ=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],pQ=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const u={};return hQ(e.cssVarPrefix).forEach(a=>{u[a]=r[a],delete r[a]}),o==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:u}}:o?{[o.replace("%s",t)]:u,[`${n}, ${o.replace("%s",t)}`]:r}:{[n]:{...r,...u}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(o)return o.replace("%s",String(t))}return n};function mQ(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Dr(e,t,r){!e[t]&&r&&(e[t]=r)}function m0(e){return typeof e!="string"||!e.startsWith("hsl")?e:oj(e)}function Uf(e,t){`${t}Channel`in e||(e[`${t}Channel`]=p0(m0(e[t])))}function gQ(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const rf=e=>{try{return e()}catch{}},yQ=(e="mui")=>xJ(e);function S5(e,t,r,n,i){if(!r)return;r=r===!0?{}:r;const o=i==="dark"?"dark":"light";if(!n){t[i]=dQ({...r,palette:{mode:o,...r?.palette},colorSpace:e});return}const{palette:u,...a}=XT({...n,palette:{mode:o,...r?.palette},colorSpace:e});return t[i]={...r,palette:u,opacity:{...vj(o),...r?.opacity},overlays:r?.overlays||bj(o)},a}function vQ(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",nativeColor:u=!1,shouldSkipGeneratingVar:a=fQ,colorSchemeSelector:f=r.light&&r.dark?"media":void 0,rootSelector:p=":root",...g}=e,b=Object.keys(r)[0],S=n||(r.light&&b!=="light"?"light":b),_=yQ(o),{[S]:P,light:k,dark:M,...D}=r,F={...D};let B=P;if((S==="dark"&&!("dark"in r)||S==="light"&&!("light"in r))&&(B=!0),!B)throw new Error(fh(21,S));let N;u&&(N="oklch");const $=S5(N,F,B,g,S);k&&!F.light&&S5(N,F,k,void 0,"light"),M&&!F.dark&&S5(N,F,M,void 0,"dark");let V={defaultColorScheme:S,...$,cssVarPrefix:o,colorSchemeSelector:f,rootSelector:p,getCssVar:_,colorSchemes:F,font:{...ZJ($.typography),...$.font},spacing:gQ(g.spacing)};Object.keys(V.colorSchemes).forEach(re=>{const H=V.colorSchemes[re].palette,ae=de=>{const fe=de.split("-"),Le=fe[1],ye=fe[2];return _(de,H[Le][ye])};H.mode==="light"&&(Dr(H.common,"background","#fff"),Dr(H.common,"onBackground","#000")),H.mode==="dark"&&(Dr(H.common,"background","#000"),Dr(H.common,"onBackground","#fff"));function se(de,fe,Le){if(N){let ye;return de===Up&&(ye=`transparent ${((1-Le)*100).toFixed(0)}%`),de===Ya&&(ye=`#000 ${(Le*100).toFixed(0)}%`),de===Za&&(ye=`#fff ${(Le*100).toFixed(0)}%`),`color-mix(in ${N}, ${fe}, ${ye})`}return de(fe,Le)}if(mQ(H,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),H.mode==="light"){Dr(H.Alert,"errorColor",se(Ya,H.error.light,.6)),Dr(H.Alert,"infoColor",se(Ya,H.info.light,.6)),Dr(H.Alert,"successColor",se(Ya,H.success.light,.6)),Dr(H.Alert,"warningColor",se(Ya,H.warning.light,.6)),Dr(H.Alert,"errorFilledBg",ae("palette-error-main")),Dr(H.Alert,"infoFilledBg",ae("palette-info-main")),Dr(H.Alert,"successFilledBg",ae("palette-success-main")),Dr(H.Alert,"warningFilledBg",ae("palette-warning-main")),Dr(H.Alert,"errorFilledColor",rf(()=>H.getContrastText(H.error.main))),Dr(H.Alert,"infoFilledColor",rf(()=>H.getContrastText(H.info.main))),Dr(H.Alert,"successFilledColor",rf(()=>H.getContrastText(H.success.main))),Dr(H.Alert,"warningFilledColor",rf(()=>H.getContrastText(H.warning.main))),Dr(H.Alert,"errorStandardBg",se(Za,H.error.light,.9)),Dr(H.Alert,"infoStandardBg",se(Za,H.info.light,.9)),Dr(H.Alert,"successStandardBg",se(Za,H.success.light,.9)),Dr(H.Alert,"warningStandardBg",se(Za,H.warning.light,.9)),Dr(H.Alert,"errorIconColor",ae("palette-error-main")),Dr(H.Alert,"infoIconColor",ae("palette-info-main")),Dr(H.Alert,"successIconColor",ae("palette-success-main")),Dr(H.Alert,"warningIconColor",ae("palette-warning-main")),Dr(H.AppBar,"defaultBg",ae("palette-grey-100")),Dr(H.Avatar,"defaultBg",ae("palette-grey-400")),Dr(H.Button,"inheritContainedBg",ae("palette-grey-300")),Dr(H.Button,"inheritContainedHoverBg",ae("palette-grey-A100")),Dr(H.Chip,"defaultBorder",ae("palette-grey-400")),Dr(H.Chip,"defaultAvatarColor",ae("palette-grey-700")),Dr(H.Chip,"defaultIconColor",ae("palette-grey-700")),Dr(H.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Dr(H.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Dr(H.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Dr(H.LinearProgress,"primaryBg",se(Za,H.primary.main,.62)),Dr(H.LinearProgress,"secondaryBg",se(Za,H.secondary.main,.62)),Dr(H.LinearProgress,"errorBg",se(Za,H.error.main,.62)),Dr(H.LinearProgress,"infoBg",se(Za,H.info.main,.62)),Dr(H.LinearProgress,"successBg",se(Za,H.success.main,.62)),Dr(H.LinearProgress,"warningBg",se(Za,H.warning.main,.62)),Dr(H.Skeleton,"bg",N?se(Up,H.text.primary,.11):`rgba(${ae("palette-text-primaryChannel")} / 0.11)`),Dr(H.Slider,"primaryTrack",se(Za,H.primary.main,.62)),Dr(H.Slider,"secondaryTrack",se(Za,H.secondary.main,.62)),Dr(H.Slider,"errorTrack",se(Za,H.error.main,.62)),Dr(H.Slider,"infoTrack",se(Za,H.info.main,.62)),Dr(H.Slider,"successTrack",se(Za,H.success.main,.62)),Dr(H.Slider,"warningTrack",se(Za,H.warning.main,.62));const de=N?se(Ya,H.background.default,.6825):Ub(H.background.default,.8);Dr(H.SnackbarContent,"bg",de),Dr(H.SnackbarContent,"color",rf(()=>N?WT.text.primary:H.getContrastText(de))),Dr(H.SpeedDialAction,"fabHoverBg",Ub(H.background.paper,.15)),Dr(H.StepConnector,"border",ae("palette-grey-400")),Dr(H.StepContent,"border",ae("palette-grey-400")),Dr(H.Switch,"defaultColor",ae("palette-common-white")),Dr(H.Switch,"defaultDisabledColor",ae("palette-grey-100")),Dr(H.Switch,"primaryDisabledColor",se(Za,H.primary.main,.62)),Dr(H.Switch,"secondaryDisabledColor",se(Za,H.secondary.main,.62)),Dr(H.Switch,"errorDisabledColor",se(Za,H.error.main,.62)),Dr(H.Switch,"infoDisabledColor",se(Za,H.info.main,.62)),Dr(H.Switch,"successDisabledColor",se(Za,H.success.main,.62)),Dr(H.Switch,"warningDisabledColor",se(Za,H.warning.main,.62)),Dr(H.TableCell,"border",se(Za,se(Up,H.divider,1),.88)),Dr(H.Tooltip,"bg",se(Up,H.grey[700],.92))}if(H.mode==="dark"){Dr(H.Alert,"errorColor",se(Za,H.error.light,.6)),Dr(H.Alert,"infoColor",se(Za,H.info.light,.6)),Dr(H.Alert,"successColor",se(Za,H.success.light,.6)),Dr(H.Alert,"warningColor",se(Za,H.warning.light,.6)),Dr(H.Alert,"errorFilledBg",ae("palette-error-dark")),Dr(H.Alert,"infoFilledBg",ae("palette-info-dark")),Dr(H.Alert,"successFilledBg",ae("palette-success-dark")),Dr(H.Alert,"warningFilledBg",ae("palette-warning-dark")),Dr(H.Alert,"errorFilledColor",rf(()=>H.getContrastText(H.error.dark))),Dr(H.Alert,"infoFilledColor",rf(()=>H.getContrastText(H.info.dark))),Dr(H.Alert,"successFilledColor",rf(()=>H.getContrastText(H.success.dark))),Dr(H.Alert,"warningFilledColor",rf(()=>H.getContrastText(H.warning.dark))),Dr(H.Alert,"errorStandardBg",se(Ya,H.error.light,.9)),Dr(H.Alert,"infoStandardBg",se(Ya,H.info.light,.9)),Dr(H.Alert,"successStandardBg",se(Ya,H.success.light,.9)),Dr(H.Alert,"warningStandardBg",se(Ya,H.warning.light,.9)),Dr(H.Alert,"errorIconColor",ae("palette-error-main")),Dr(H.Alert,"infoIconColor",ae("palette-info-main")),Dr(H.Alert,"successIconColor",ae("palette-success-main")),Dr(H.Alert,"warningIconColor",ae("palette-warning-main")),Dr(H.AppBar,"defaultBg",ae("palette-grey-900")),Dr(H.AppBar,"darkBg",ae("palette-background-paper")),Dr(H.AppBar,"darkColor",ae("palette-text-primary")),Dr(H.Avatar,"defaultBg",ae("palette-grey-600")),Dr(H.Button,"inheritContainedBg",ae("palette-grey-800")),Dr(H.Button,"inheritContainedHoverBg",ae("palette-grey-700")),Dr(H.Chip,"defaultBorder",ae("palette-grey-700")),Dr(H.Chip,"defaultAvatarColor",ae("palette-grey-300")),Dr(H.Chip,"defaultIconColor",ae("palette-grey-300")),Dr(H.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Dr(H.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Dr(H.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Dr(H.LinearProgress,"primaryBg",se(Ya,H.primary.main,.5)),Dr(H.LinearProgress,"secondaryBg",se(Ya,H.secondary.main,.5)),Dr(H.LinearProgress,"errorBg",se(Ya,H.error.main,.5)),Dr(H.LinearProgress,"infoBg",se(Ya,H.info.main,.5)),Dr(H.LinearProgress,"successBg",se(Ya,H.success.main,.5)),Dr(H.LinearProgress,"warningBg",se(Ya,H.warning.main,.5)),Dr(H.Skeleton,"bg",N?se(Up,H.text.primary,.13):`rgba(${ae("palette-text-primaryChannel")} / 0.13)`),Dr(H.Slider,"primaryTrack",se(Ya,H.primary.main,.5)),Dr(H.Slider,"secondaryTrack",se(Ya,H.secondary.main,.5)),Dr(H.Slider,"errorTrack",se(Ya,H.error.main,.5)),Dr(H.Slider,"infoTrack",se(Ya,H.info.main,.5)),Dr(H.Slider,"successTrack",se(Ya,H.success.main,.5)),Dr(H.Slider,"warningTrack",se(Ya,H.warning.main,.5));const de=N?se(Za,H.background.default,.985):Ub(H.background.default,.98);Dr(H.SnackbarContent,"bg",de),Dr(H.SnackbarContent,"color",rf(()=>N?hj.text.primary:H.getContrastText(de))),Dr(H.SpeedDialAction,"fabHoverBg",Ub(H.background.paper,.15)),Dr(H.StepConnector,"border",ae("palette-grey-600")),Dr(H.StepContent,"border",ae("palette-grey-600")),Dr(H.Switch,"defaultColor",ae("palette-grey-300")),Dr(H.Switch,"defaultDisabledColor",ae("palette-grey-600")),Dr(H.Switch,"primaryDisabledColor",se(Ya,H.primary.main,.55)),Dr(H.Switch,"secondaryDisabledColor",se(Ya,H.secondary.main,.55)),Dr(H.Switch,"errorDisabledColor",se(Ya,H.error.main,.55)),Dr(H.Switch,"infoDisabledColor",se(Ya,H.info.main,.55)),Dr(H.Switch,"successDisabledColor",se(Ya,H.success.main,.55)),Dr(H.Switch,"warningDisabledColor",se(Ya,H.warning.main,.55)),Dr(H.TableCell,"border",se(Ya,se(Up,H.divider,1),.68)),Dr(H.Tooltip,"bg",se(Up,H.grey[700],.92))}Uf(H.background,"default"),Uf(H.background,"paper"),Uf(H.common,"background"),Uf(H.common,"onBackground"),Uf(H,"divider"),Object.keys(H).forEach(de=>{const fe=H[de];de!=="tonalOffset"&&fe&&typeof fe=="object"&&(fe.main&&Dr(H[de],"mainChannel",p0(m0(fe.main))),fe.light&&Dr(H[de],"lightChannel",p0(m0(fe.light))),fe.dark&&Dr(H[de],"darkChannel",p0(m0(fe.dark))),fe.contrastText&&Dr(H[de],"contrastTextChannel",p0(m0(fe.contrastText))),de==="text"&&(Uf(H[de],"primary"),Uf(H[de],"secondary")),de==="action"&&(fe.active&&Uf(H[de],"active"),fe.selected&&Uf(H[de],"selected")))})}),V=t.reduce((re,H)=>Yl(re,H),V);const U={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:pQ(V),enableContrastVars:u},{vars:X,generateThemeVars:Z,generateStyleSheets:oe}=CJ(V,U);return V.vars=X,Object.entries(V.colorSchemes[V.defaultColorScheme]).forEach(([re,H])=>{V[re]=H}),V.generateThemeVars=Z,V.generateStyleSheets=oe,V.generateSpacing=function(){return Z7(g.spacing,SP(this))},V.getColorSchemeSelector=EJ(f),V.spacing=V.generateSpacing(),V.shouldSkipGeneratingVar=a,V.unstable_sxConfig={...j1,...g?.unstable_sxConfig},V.unstable_sx=function(H){return op({sx:H,theme:this})},V.toRuntimeSource=yj,V}function cD(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:MP({...r===!0?{}:r.palette,mode:t})})}function rv(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:o=r?.mode,...u}=e,a=o||"light",f=i?.[a],p={...i,...r?{[a]:{...typeof f!="boolean"&&f,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return XT(e,...t);let g=r;"palette"in e||p[a]&&(p[a]!==!0?g=p[a].palette:a==="dark"&&(g={mode:"dark"}));const b=XT({...e,palette:g},...t);return b.defaultColorScheme=a,b.colorSchemes=p,b.palette.mode==="light"&&(b.colorSchemes.light={...p.light!==!0&&p.light,palette:b.palette},cD(b,"dark",p.dark)),b.palette.mode==="dark"&&(b.colorSchemes.dark={...p.dark!==!0&&p.dark,palette:b.palette},cD(b,"light",p.light)),b}return!r&&!("light"in p)&&a==="light"&&(p.light=!0),vQ({...u,colorSchemes:p,defaultColorScheme:a,...typeof n!="boolean"&&n},...t)}const LP=rv();function Su(){const e=q1(LP);return e[Id]||e}function sw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Bs=e=>sw(e)&&e!=="classes",Sr=rj({themeId:Id,defaultTheme:LP,rootShouldForwardProp:Bs});function bQ({theme:e,...t}){const r=Id in e?e[Id]:void 0;return K.jsx(cj,{...t,themeId:r?Id:void 0,theme:r||e})}const Hb={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:_Q}=_J({themeId:Id,theme:()=>rv({cssVariables:!0}),colorSchemeStorageKey:Hb.colorSchemeStorageKey,modeStorageKey:Hb.modeStorageKey,defaultColorScheme:{light:Hb.defaultLightColorScheme,dark:Hb.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:mj(e.palette,e.typography)};return t.unstable_sx=function(n){return op({sx:n,theme:this})},t}}),xQ=_Q;function wQ({theme:e,...t}){const r=ee.useMemo(()=>{if(typeof e=="function")return e;const n=Id in e?e[Id]:e;return"colorSchemes"in n?null:"vars"in n?e:{...e,vars:null}},[e]);return r?K.jsx(bQ,{theme:r,...t}):K.jsx(xQ,{theme:e,...t})}const SQ=rv({palette:{mode:"light"}}),CQ=rv({palette:{mode:"dark"}}),EQ=e=>({...e==="light"?SQ:CQ,palette:{mode:e,...e==="dark"?{primary:{main:"#009EE0"},secondary:{main:"#747577"},background:{paper:"#313131"},text:{primary:"#FFF",contrast:"#000"},topToolbar:{barColor:"#000"},navigation:{buttonColor:"#fff",navColor:"#313131",navHover:"#747577"},GPS:{GPSActiveColor:"#fff",GPSInactiveColor:"#fff",GPSActiveBackgroundColor:"#747577"},compass:{compColor:"#313131",compHover:"#747577",compStroke:"#d3dce1",compNorth:"#cf003f",compSouth:"#d3dcf0"}}:{primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{buttonColor:"#747577",navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#747577",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}}}}),TQ=e=>{const t=EQ(e&&["light","dark"].includes(e)?e:"light");return rv(t,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:t.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:{minWidth:"20px",minHeight:"20px",fontWeight:600,[t.breakpoints.down("md")]:{width:"50px",height:"50px",fontSize:"1.4em"},[t.breakpoints.up("md")]:{width:"30px",height:"30px",fontSize:"1.2em"},color:t.palette.text.primary,backgroundColor:t.palette.navigation.navColor,borderRadius:"23%",margin:"0.15px",marginTop:"4px",":hover":{backgroundColor:t.palette.navigation.navHover}}}]},MuiListItemText:{styleOverrides:{primary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.9rem"}:{},secondary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.7rem"}:{}}}}})};try{MapcomponentsTheme.displayName="MapcomponentsTheme",MapcomponentsTheme.__docgenInfo={description:"",displayName:"MapcomponentsTheme",props:{}}}catch{}const xu={source_openmaptiles_url:"https://wms.wheregroup.com/tileserver/tile/world-0-14.json",sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},Gl=[];for(let e=0;e<256;++e)Gl.push((e+256).toString(16).slice(1));function IQ(e,t=0){return(Gl[e[t+0]]+Gl[e[t+1]]+Gl[e[t+2]]+Gl[e[t+3]]+"-"+Gl[e[t+4]]+Gl[e[t+5]]+"-"+Gl[e[t+6]]+Gl[e[t+7]]+"-"+Gl[e[t+8]]+Gl[e[t+9]]+"-"+Gl[e[t+10]]+Gl[e[t+11]]+Gl[e[t+12]]+Gl[e[t+13]]+Gl[e[t+14]]+Gl[e[t+15]]).toLowerCase()}let C5;const PQ=new Uint8Array(16);function AQ(){if(!C5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");C5=crypto.getRandomValues.bind(crypto)}return C5(PQ)}const kQ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),dD={randomUUID:kQ};function Bu(e,t,r){if(dD.randomUUID&&!e)return dD.randomUUID();e=e||{};const n=e.random??e.rng?.()??AQ();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,IQ(n)}const RP=gt.createContext({});function ZT(e){const[t,r]=gt.useState([]),[n,i]=gt.useState([]),[o,u]=gt.useState([]),[a,f]=gt.useState(xu.sourceOptions_tiles[0]),p=ee.useMemo(()=>({layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[a]}}),[a]),g=k=>{if(!k)return;const M=[],D=[];k.layers.forEach((F,B)=>{F.type==="symbol"?D.push(F):(B===0&&(F.id=k.name||"background"),M.push(F))}),i(M),u(D)};ee.useEffect(()=>{if(t.filter(k=>!k?.id).length){const k=[...t];k.forEach(M=>{M?.id||(M.id=Bu())}),r(k)}},[t]);const b=ee.useCallback((k,M)=>{const D=t?.filter?.(F=>F.id===k);if(D.length>0){const F=[...t],B=D[0],N=t.indexOf(B),$=M(N);$>=0&&$<=t.length-1&&(F.splice(N,1),F.splice($,0,B),r(F))}},[t]),S=ee.useCallback(k=>{b(k,M=>M+1)},[b]),_=ee.useCallback(k=>{b(k,M=>M-1)},[b]),P={layers:t,setLayers:r,backgroundLayers:n,setBackgroundLayers:i,symbolLayers:o,setSymbolLayers:u,updateStyle:g,vtLayerConfig:p,tileUrl:a,setTileUrl:f,moveUp:_,moveDown:S,moveLayer:b};return K.jsx(RP.Provider,{value:P,children:e.children})}try{ZT.displayName="LayerContextProvider",ZT.__docgenInfo={description:"",displayName:"LayerContextProvider",props:{}}}catch{}const vp=gt.createContext({}),fD=({children:e})=>{const[t,r]=ee.useState(void 0),[n,i]=ee.useState([]),o=ee.useRef([]),u=ee.useRef({}),a=g=>{if(g){typeof u.current[g]<"u"&&delete u.current[g];const b=o.current.indexOf(g);b>-1&&o.current.splice(b,1),i([...o.current]),o.current.length===0&&t&&r(void 0)}else a("anonymous_map")},p={map:t,setMap:g=>{if(r(g),n.length===0){const b="anonymous_map";i([...n,b]),u.current[b]=g}},maps:u.current,mapIds:n,registerMap:(g,b)=>{g&&b&&(u.current[g]=b,o.current.push(g),i([...o.current]),(!t||t?.cancelled===!0)&&r(b))},removeMap:a,mapExists:g=>g&&Object.keys(u.current).indexOf(g)===-1?!1:!(!g&&!t),getMap:g=>g&&n.indexOf(g)!==-1?u.current[g]:!g&&t?t:null};return K.jsx(vp.Provider,{value:p,children:K.jsx(ZT,{children:K.jsx(wQ,{theme:TQ("light"),children:e})})})};try{fD.displayName="MapComponentsProvider",fD.__docgenInfo={description:`MapComponentsProvider must be imported and wrapped around component where at least one of its child nodes requires access to a MapLibre-gl or openlayers instance that is registered in this mapContext.
MapComponentsProvider must be used one level higher than the first use of MapContext.

MapComponentsProvider requires at least one use of the MapLibreMap component somewhere down the component tree that will create the MapLibre-gl object and set the reference at MapContext.map. For MapLibre maps it is a good idea to provide a mapId attribute to the MapLibreMap Component even if you are only using a single map instance at start. It will make a later transition to using multiple instances within the same project much easier.`,displayName:"MapComponentsProvider",props:{}}}catch{}var nx={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.16.0/LICENSE.txt
 */var MQ=nx.exports,hD;function LQ(){return hD||(hD=1,(function(e,t){(function(r,n){e.exports=n()})(MQ,(function(){var r={},n={};function i(u,a,f){if(n[u]=f,u==="index"){var p="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",g={};return n.shared(g),n.index(r,g),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),r}}i("shared",["exports"],(function(u){function a(d,s,c,y){return new(c||(c=Promise))((function(w,I){function A(Y){try{j(y.next(Y))}catch(ie){I(ie)}}function O(Y){try{j(y.throw(Y))}catch(ie){I(ie)}}function j(Y){var ie;Y.done?w(Y.value):(ie=Y.value,ie instanceof c?ie:new c((function(ce){ce(ie)}))).then(A,O)}j((y=y.apply(d,s||[])).next())}))}function f(d,s){this.x=d,this.y=s}function p(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var g,b;typeof SuppressedError=="function"&&SuppressedError,f.prototype={clone(){return new f(this.x,this.y)},add(d){return this.clone()._add(d)},sub(d){return this.clone()._sub(d)},multByPoint(d){return this.clone()._multByPoint(d)},divByPoint(d){return this.clone()._divByPoint(d)},mult(d){return this.clone()._mult(d)},div(d){return this.clone()._div(d)},rotate(d){return this.clone()._rotate(d)},rotateAround(d,s){return this.clone()._rotateAround(d,s)},matMult(d){return this.clone()._matMult(d)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(d){return this.x===d.x&&this.y===d.y},dist(d){return Math.sqrt(this.distSqr(d))},distSqr(d){const s=d.x-this.x,c=d.y-this.y;return s*s+c*c},angle(){return Math.atan2(this.y,this.x)},angleTo(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith(d){return this.angleWithSep(d.x,d.y)},angleWithSep(d,s){return Math.atan2(this.x*s-this.y*d,this.x*d+this.y*s)},_matMult(d){const s=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=s,this},_add(d){return this.x+=d.x,this.y+=d.y,this},_sub(d){return this.x-=d.x,this.y-=d.y,this},_mult(d){return this.x*=d,this.y*=d,this},_div(d){return this.x/=d,this.y/=d,this},_multByPoint(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint(d){return this.x/=d.x,this.y/=d.y,this},_unit(){return this._div(this.mag()),this},_perp(){const d=this.y;return this.y=this.x,this.x=-d,this},_rotate(d){const s=Math.cos(d),c=Math.sin(d),y=c*this.x+s*this.y;return this.x=s*this.x-c*this.y,this.y=y,this},_rotateAround(d,s){const c=Math.cos(d),y=Math.sin(d),w=s.y+y*(this.x-s.x)+c*(this.y-s.y);return this.x=s.x+c*(this.x-s.x)-y*(this.y-s.y),this.y=w,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:f},f.convert=function(d){if(d instanceof f)return d;if(Array.isArray(d))return new f(+d[0],+d[1]);if(d.x!==void 0&&d.y!==void 0)return new f(+d.x,+d.y);throw new Error("Expected [x, y] or {x, y} point format")};var S=(function(){if(b)return g;function d(s,c,y,w){this.cx=3*s,this.bx=3*(y-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(w-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=c,this.p2x=y,this.p2y=w}return b=1,g=d,d.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,c){if(c===void 0&&(c=1e-6),s<0)return 0;if(s>1)return 1;for(var y=s,w=0;w<8;w++){var I=this.sampleCurveX(y)-s;if(Math.abs(I)<c)return y;var A=this.sampleCurveDerivativeX(y);if(Math.abs(A)<1e-6)break;y-=I/A}var O=0,j=1;for(y=s,w=0;w<20&&(I=this.sampleCurveX(y),!(Math.abs(I-s)<c));w++)s>I?O=y:j=y,y=.5*(j-O)+O;return y},solve:function(s,c){return this.sampleCurveY(this.solveCurveX(s,c))}},g})(),_=p(S);let P,k;function M(){return P==null&&(P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),P}function D(){if(k==null&&(k=!1,M())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let y=0;y<25;y++){const w=4*y;s.fillStyle=`rgb(${w},${w+1},${w+2})`,s.fillRect(y%5,Math.floor(y/5),1,1)}const c=s.getImageData(0,0,5,5).data;for(let y=0;y<100;y++)if(y%4!=3&&c[y]!==y){k=!0;break}}}return k||!1}var F=1e-6,B=typeof Float32Array<"u"?Float32Array:Array;function N(){var d=new B(9);return B!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function $(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function V(){var d=new B(3);return B!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function U(d){var s=d[0],c=d[1],y=d[2];return Math.sqrt(s*s+c*c+y*y)}function X(d,s,c){var y=new B(3);return y[0]=d,y[1]=s,y[2]=c,y}function Z(d,s,c){return d[0]=s[0]+c[0],d[1]=s[1]+c[1],d[2]=s[2]+c[2],d}function oe(d,s,c){return d[0]=s[0]*c,d[1]=s[1]*c,d[2]=s[2]*c,d}function re(d,s,c){var y=s[0],w=s[1],I=s[2],A=c[0],O=c[1],j=c[2];return d[0]=w*j-I*O,d[1]=I*A-y*j,d[2]=y*O-w*A,d}var H,ae=U;function se(d,s,c){var y=s[0],w=s[1],I=s[2],A=s[3];return d[0]=c[0]*y+c[4]*w+c[8]*I+c[12]*A,d[1]=c[1]*y+c[5]*w+c[9]*I+c[13]*A,d[2]=c[2]*y+c[6]*w+c[10]*I+c[14]*A,d[3]=c[3]*y+c[7]*w+c[11]*I+c[15]*A,d}function de(){var d=new B(4);return B!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function fe(d,s,c,y){var w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",I=Math.PI/360;s*=I,y*=I,c*=I;var A=Math.sin(s),O=Math.cos(s),j=Math.sin(c),Y=Math.cos(c),ie=Math.sin(y),ce=Math.cos(y);switch(w){case"xyz":d[0]=A*Y*ce+O*j*ie,d[1]=O*j*ce-A*Y*ie,d[2]=O*Y*ie+A*j*ce,d[3]=O*Y*ce-A*j*ie;break;case"xzy":d[0]=A*Y*ce-O*j*ie,d[1]=O*j*ce-A*Y*ie,d[2]=O*Y*ie+A*j*ce,d[3]=O*Y*ce+A*j*ie;break;case"yxz":d[0]=A*Y*ce+O*j*ie,d[1]=O*j*ce-A*Y*ie,d[2]=O*Y*ie-A*j*ce,d[3]=O*Y*ce+A*j*ie;break;case"yzx":d[0]=A*Y*ce+O*j*ie,d[1]=O*j*ce+A*Y*ie,d[2]=O*Y*ie-A*j*ce,d[3]=O*Y*ce-A*j*ie;break;case"zxy":d[0]=A*Y*ce-O*j*ie,d[1]=O*j*ce+A*Y*ie,d[2]=O*Y*ie+A*j*ce,d[3]=O*Y*ce-A*j*ie;break;case"zyx":d[0]=A*Y*ce-O*j*ie,d[1]=O*j*ce+A*Y*ie,d[2]=O*Y*ie-A*j*ce,d[3]=O*Y*ce+A*j*ie;break;default:throw new Error("Unknown angle order "+w)}return d}function Le(){var d=new B(2);return B!=Float32Array&&(d[0]=0,d[1]=0),d}function ye(d,s){var c=new B(2);return c[0]=d,c[1]=s,c}V(),H=new B(4),B!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0,H[3]=0),V(),X(1,0,0),X(0,1,0),de(),de(),N(),Le();const xe=8192;function Se(d,s,c){return s*(xe/(d.tileSize*Math.pow(2,c-d.tileID.overscaledZ)))}function Re(d,s){return(d%s+s)%s}function he(d,s,c){return d*(1-c)+s*c}function Ee(d){if(d<=0)return 0;if(d>=1)return 1;const s=d*d,c=s*d;return 4*(d<.5?c:3*(d-s)+c-.75)}function we(d,s,c,y){const w=new _(d,s,c,y);return I=>w.solve(I)}const Ne=we(.25,.1,.25,1);function Fe(d,s,c){return Math.min(c,Math.max(s,d))}function Xe(d,s,c){const y=c-s,w=((d-s)%y+y)%y+s;return w===s?c:w}function Be(d,...s){for(const c of s)for(const y in c)d[y]=c[y];return d}let ot=1;function Ke(d,s,c){const y={};for(const w in d)y[w]=s.call(this,d[w],w,d);return y}function it(d,s,c){const y={};for(const w in d)s.call(this,d[w],w,d)&&(y[w]=d[w]);return y}function ke(d){return Array.isArray(d)?d.map(ke):typeof d=="object"&&d?Ke(d,ke):d}const Nt={};function st(d){Nt[d]||(typeof console<"u"&&console.warn(d),Nt[d]=!0)}function $e(d,s,c){return(c.y-d.y)*(s.x-d.x)>(s.y-d.y)*(c.x-d.x)}function Zt(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let $t=null;function Wt(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function sr(d,s,c,y,w){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const I=new VideoFrame(d,{timestamp:0});try{const A=I?.format;if(!A||!A.startsWith("BGR")&&!A.startsWith("RGB"))throw new Error(`Unrecognized format ${A}`);const O=A.startsWith("BGR"),j=new Uint8ClampedArray(y*w*4);if(yield I.copyTo(j,(function(Y,ie,ce,be,Ce){const Oe=4*Math.max(-ie,0),ze=(Math.max(0,ce)-ce)*be*4+Oe,Ve=4*be,et=Math.max(0,ie),Et=Math.max(0,ce);return{rect:{x:et,y:Et,width:Math.min(Y.width,ie+be)-et,height:Math.min(Y.height,ce+Ce)-Et},layout:[{offset:ze,stride:Ve}]}})(d,s,c,y,w)),O)for(let Y=0;Y<j.length;Y+=4){const ie=j[Y];j[Y]=j[Y+2],j[Y+2]=ie}return j}finally{I.close()}}))}let cr,ir;function br(d,s,c,y){return d.addEventListener(s,c,y),{unsubscribe:()=>{d.removeEventListener(s,c,y)}}}function yr(d){return d*Math.PI/180}function Kt(d){return d/Math.PI*180}const at={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ae={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},_e="AbortError";class je extends Error{constructor(s=_e){super(s instanceof Error?s.message:s),this.name=_e,s instanceof Error&&s.stack&&(this.stack=s.stack)}}function Ge(d){return d.name===_e}const He={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Dt(d){return He.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const St="global-dispatcher";class yt extends Error{constructor(s,c,y,w){super(`AJAXError: ${c} (${s}): ${y}`),this.status=s,this.statusText=c,this.url=y,this.body=w}}const ct=()=>Zt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Jt=function(d,s){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const y=Dt(d.url);if(y)return y(d,s);if(Zt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:St},s)}if(!(/^file:/.test(c=d.url)||/^file:/.test(ct())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(y,w){return a(this,void 0,void 0,(function*(){const I=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:ct(),signal:w.signal});let A,O;y.type!=="json"||I.headers.has("Accept")||I.headers.set("Accept","application/json");try{A=yield fetch(I)}catch(Y){throw Ge(Y)?Y:new yt(0,Y.message,y.url,new Blob)}if(!A.ok){const Y=yield A.blob();throw new yt(A.status,A.statusText,y.url,Y)}O=y.type==="arrayBuffer"||y.type==="image"?A.arrayBuffer():y.type==="json"?A.json():A.text();const j=yield O;return w.signal.throwIfAborted(),{data:j,cacheControl:A.headers.get("Cache-Control"),expires:A.headers.get("Expires")}}))})(d,s);if(Zt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:St},s)}var c;return(function(y,w){return new Promise(((I,A)=>{var O;const j=new XMLHttpRequest;j.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(j.responseType="arraybuffer");for(const Y in y.headers)j.setRequestHeader(Y,y.headers[Y]);y.type==="json"&&(j.responseType="text",!((O=y.headers)===null||O===void 0)&&O.Accept||j.setRequestHeader("Accept","application/json")),j.withCredentials=y.credentials==="include",j.onerror=()=>{A(new Error(j.statusText))},j.onload=()=>{if(!w.signal.aborted)if((j.status>=200&&j.status<300||j.status===0)&&j.response!==null){let Y=j.response;if(y.type==="json")try{Y=JSON.parse(j.response)}catch(ie){return void A(ie)}I({data:Y,cacheControl:j.getResponseHeader("Cache-Control"),expires:j.getResponseHeader("Expires")})}else{const Y=new Blob([j.response],{type:j.getResponseHeader("Content-Type")});A(new yt(j.status,j.statusText,y.url,Y))}},w.signal.addEventListener("abort",(()=>{j.abort(),A(new je(w.signal.reason))})),j.send(y.body)}))})(d,s)};function Vt(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const s=new URL(d),c=window.location;return s.protocol===c.protocol&&s.host===c.host}function xr(d,s,c){c[d]&&c[d].indexOf(s)!==-1||(c[d]=c[d]||[],c[d].push(s))}function _r(d,s,c){if(c&&c[d]){const y=c[d].indexOf(s);y!==-1&&c[d].splice(y,1)}}class Nr{constructor(s,c={}){Be(this,c),this.type=s}}class tn extends Nr{constructor(s,c={}){super("error",Be({error:s},c))}}class Lr{on(s,c){return this._listeners=this._listeners||{},xr(s,c,this._listeners),{unsubscribe:()=>{this.off(s,c)}}}off(s,c){return _r(s,c,this._listeners),_r(s,c,this._oneTimeListeners),this}once(s,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},xr(s,c,this._oneTimeListeners),this):new Promise((y=>this.once(s,y)))}fire(s,c){typeof s=="string"&&(s=new Nr(s,c||{}));const y=s.type;if(this.listens(y)){s.target=this;const w=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const O of w)O.call(this,s);const I=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const O of I)_r(y,O,this._oneTimeListeners),O.call(this,s);const A=this._eventedParent;A&&(Be(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(s))}else s instanceof tn&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,c){return this._eventedParent=s,this._eventedParentData=c,this}}var kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Hr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function kn(d,s){const c={};for(const y in d)y!=="ref"&&(c[y]=d[y]);return Hr.forEach((y=>{y in s&&(c[y]=s[y])})),c}function Ur(d,s){if(Array.isArray(d)){if(!Array.isArray(s)||d.length!==s.length)return!1;for(let c=0;c<d.length;c++)if(!Ur(d[c],s[c]))return!1;return!0}if(typeof d=="object"&&d!==null&&s!==null){if(typeof s!="object"||Object.keys(d).length!==Object.keys(s).length)return!1;for(const c in d)if(!Ur(d[c],s[c]))return!1;return!0}return d===s}function rr(d,s){d.push(s)}function Jn(d,s,c){rr(c,{command:"addSource",args:[d,s[d]]})}function en(d,s,c){rr(s,{command:"removeSource",args:[d]}),c[d]=!0}function Vn(d,s,c,y){en(d,c,y),Jn(d,s,c)}function Me(d,s,c){let y;for(y in d[c])if(Object.prototype.hasOwnProperty.call(d[c],y)&&y!=="data"&&!Ur(d[c][y],s[c][y]))return!1;for(y in s[c])if(Object.prototype.hasOwnProperty.call(s[c],y)&&y!=="data"&&!Ur(d[c][y],s[c][y]))return!1;return!0}function Ue(d,s,c,y,w,I){d=d||{},s=s||{};for(const A in d)Object.prototype.hasOwnProperty.call(d,A)&&(Ur(d[A],s[A])||c.push({command:I,args:[y,A,s[A],w]}));for(const A in s)Object.prototype.hasOwnProperty.call(s,A)&&!Object.prototype.hasOwnProperty.call(d,A)&&(Ur(d[A],s[A])||c.push({command:I,args:[y,A,s[A],w]}))}function Ct(d){return d.id}function Gt(d,s){return d[s.id]=s,d}class zt{constructor(s,c,y,w){this.message=(s?`${s}: `:"")+y,w&&(this.identifier=w),c!=null&&c.__line__&&(this.line=c.__line__)}}function qr(d,...s){for(const c of s)for(const y in c)d[y]=c[y];return d}class En extends Error{constructor(s,c){super(c),this.message=c,this.key=s}}class Pi{constructor(s,c=[]){this.parent=s,this.bindings={};for(const[y,w]of c)this.bindings[y]=w}concat(s){return new Pi(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const gi={kind:"null"},kr={kind:"number"},Sn={kind:"string"},Pn={kind:"boolean"},Un={kind:"color"},Ki={kind:"projectionDefinition"},ea={kind:"object"},An={kind:"value"},Ca={kind:"collator"},Ni={kind:"formatted"},Ho={kind:"padding"},pa={kind:"colorArray"},mo={kind:"numberArray"},Oa={kind:"resolvedImage"},zs={kind:"variableAnchorOffsetCollection"};function fi(d,s){return{kind:"array",itemType:d,N:s}}function Ai(d){if(d.kind==="array"){const s=Ai(d.itemType);return typeof d.N=="number"?`array<${s}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${s}>`}return d.kind}const Ql=[gi,kr,Sn,Pn,Un,Ki,Ni,ea,fi(An),Ho,mo,pa,Oa,zs];function na(d,s){if(s.kind==="error")return null;if(d.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!na(d.itemType,s.itemType))&&(typeof d.N!="number"||d.N===s.N))return null}else{if(d.kind===s.kind)return null;if(d.kind==="value"){for(const c of Ql)if(!na(c,s))return null}}return`Expected ${Ai(d)} but found ${Ai(s)} instead.`}function Na(d,s){return s.some((c=>c.kind===d.kind))}function Wo(d,s){return s.some((c=>c==="null"?d===null:c==="array"?Array.isArray(d):c==="object"?d&&!Array.isArray(d)&&typeof d=="object":c===typeof d))}function ma(d,s){return d.kind==="array"&&s.kind==="array"?d.itemType.kind===s.itemType.kind&&typeof d.N=="number":d.kind===s.kind}const Xo=.96422,fl=.82521,Ea=4/29,oa=6/29,qu=3*oa*oa,js=oa*oa*oa,No=Math.PI/180,Ua=180/Math.PI;function Fo(d){return(d%=360)<0&&(d+=360),d}function Ta([d,s,c,y]){let w,I;const A=ac((.2225045*(d=bs(d))+.7168786*(s=bs(s))+.0606169*(c=bs(c)))/1);d===s&&s===c?w=I=A:(w=ac((.4360747*d+.3850649*s+.1430804*c)/Xo),I=ac((.0139322*d+.0971045*s+.7141733*c)/fl));const O=116*A-16;return[O<0?0:O,500*(w-A),200*(A-I),y]}function bs(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function ac(d){return d>js?Math.pow(d,1/3):d/qu+Ea}function eu([d,s,c,y]){let w=(d+16)/116,I=isNaN(s)?w:w+s/500,A=isNaN(c)?w:w-c/200;return w=1*me(w),I=Xo*me(I),A=fl*me(A),[Q(3.1338561*I-1.6168667*w-.4906146*A),Q(-.9787684*I+1.9161415*w+.033454*A),Q(.0719453*I-.2289914*w+1.4052427*A),y]}function Q(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function me(d){return d>oa?d*d*d:qu*(d-Ea)}const Je=Object.hasOwn||function(d,s){return Object.prototype.hasOwnProperty.call(d,s)};function It(d,s){return Je(d,s)?d[s]:void 0}function jt(d){return parseInt(d.padEnd(2,d),16)/255}function qt(d,s){return Qt(s?d/100:d,0,1)}function Qt(d,s,c){return Math.min(Math.max(s,d),c)}function Vr(d){return!d.some(Number.isNaN)}const Wr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function zr(d,s,c){return d+c*(s-d)}function Kr(d,s,c){return d.map(((y,w)=>zr(y,s[w],c)))}class Cr{constructor(s,c,y,w=1,I=!0){this.r=s,this.g=c,this.b=y,this.a=w,I||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[s,c,y,w]))}static parse(s){if(s instanceof Cr)return s;if(typeof s!="string")return;const c=(function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=It(Wr,y);if(w){const[A,O,j]=w;return[A/255,O/255,j/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const A=y.length<6?1:2;let O=1;return[jt(y.slice(O,O+=A)),jt(y.slice(O,O+=A)),jt(y.slice(O,O+=A)),jt(y.slice(O,O+A)||"ff")]}if(y.startsWith("rgb")){const A=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[O,j,Y,ie,ce,be,Ce,Oe,ze,Ve,et,Et]=A,rt=[ie||" ",Ce||" ",Ve].join("");if(rt==="  "||rt==="  /"||rt===",,"||rt===",,,"){const ut=[Y,be,ze].join(""),At=ut==="%%%"?100:ut===""?255:0;if(At){const Ot=[Qt(+j/At,0,1),Qt(+ce/At,0,1),Qt(+Oe/At,0,1),et?qt(+et,Et):1];if(Vr(Ot))return Ot}}return}}const I=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){const[A,O,j,Y,ie,ce,be,Ce,Oe]=I,ze=[j||" ",ie||" ",be].join("");if(ze==="  "||ze==="  /"||ze===",,"||ze===",,,"){const Ve=[+O,Qt(+Y,0,100),Qt(+ce,0,100),Ce?qt(+Ce,Oe):1];if(Vr(Ve))return(function([et,Et,rt,ut]){function At(Ot){const lr=(Ot+et/30)%12,Ir=Et*Math.min(rt,1-rt);return rt-Ir*Math.max(-1,Math.min(lr-3,9-lr,1))}return et=Fo(et),Et/=100,rt/=100,[At(0),At(8),At(4),ut]})(Ve)}}})(s);return c?new Cr(...c,!1):void 0}get rgb(){const{r:s,g:c,b:y,a:w}=this,I=w||1/0;return this.overwriteGetter("rgb",[s/I,c/I,y/I,w])}get hcl(){return this.overwriteGetter("hcl",(function(s){const[c,y,w,I]=Ta(s),A=Math.sqrt(y*y+w*w);return[Math.round(1e4*A)?Fo(Math.atan2(w,y)*Ua):NaN,A,c,I]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Ta(this.rgb))}overwriteGetter(s,c){return Object.defineProperty(this,s,{value:c}),c}toString(){const[s,c,y,w]=this.rgb;return`rgba(${[s,c,y].map((I=>Math.round(255*I))).join(",")},${w})`}static interpolate(s,c,y,w="rgb"){switch(w){case"rgb":{const[I,A,O,j]=Kr(s.rgb,c.rgb,y);return new Cr(I,A,O,j,!1)}case"hcl":{const[I,A,O,j]=s.hcl,[Y,ie,ce,be]=c.hcl;let Ce,Oe;if(isNaN(I)||isNaN(Y))isNaN(I)?isNaN(Y)?Ce=NaN:(Ce=Y,O!==1&&O!==0||(Oe=ie)):(Ce=I,ce!==1&&ce!==0||(Oe=A));else{let rt=Y-I;Y>I&&rt>180?rt-=360:Y<I&&I-Y>180&&(rt+=360),Ce=I+y*rt}const[ze,Ve,et,Et]=(function([rt,ut,At,Ot]){return rt=isNaN(rt)?0:rt*No,eu([At,Math.cos(rt)*ut,Math.sin(rt)*ut,Ot])})([Ce,Oe??zr(A,ie,y),zr(O,ce,y),zr(j,be,y)]);return new Cr(ze,Ve,et,Et,!1)}case"lab":{const[I,A,O,j]=eu(Kr(s.lab,c.lab,y));return new Cr(I,A,O,j,!1)}}}}Cr.black=new Cr(0,0,0,1),Cr.white=new Cr(1,1,1,1),Cr.transparent=new Cr(0,0,0,0),Cr.red=new Cr(1,0,0,1);class Hn{constructor(s,c,y){this.sensitivity=s?c?"variant":"case":c?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,c){return this.collator.compare(s,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const _i=["bottom","center","top"];class Rn{constructor(s,c,y,w,I,A){this.text=s,this.image=c,this.scale=y,this.fontStack=w,this.textColor=I,this.verticalAlign=A}}class dn{constructor(s){this.sections=s}static fromString(s){return new dn([new Rn(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((s=>s.text.length!==0||s.image&&s.image.name.length!==0))}static factory(s){return s instanceof dn?s:dn.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map((s=>s.text)).join("")}}class Tr{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Tr)return s;if(typeof s=="number")return new Tr([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const c of s)if(typeof c!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Tr(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,c,y){return new Tr(Kr(s.values,c.values,y))}}class rn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof rn)return s;if(typeof s=="number")return new rn([s]);if(Array.isArray(s)){for(const c of s)if(typeof c!="number")return;return new rn(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,c,y){return new rn(Kr(s.values,c.values,y))}}class sn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof sn)return s;if(typeof s=="string"){const y=Cr.parse(s);return y?new sn([y]):void 0}if(!Array.isArray(s))return;const c=[];for(const y of s){if(typeof y!="string")return;const w=Cr.parse(y);if(!w)return;c.push(w)}return new sn(c)}toString(){return JSON.stringify(this.values)}static interpolate(s,c,y,w="rgb"){const I=[];if(s.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let A=0;A<s.values.length;A++)I.push(Cr.interpolate(s.values[A],c.values[A],y,w));return new sn(I)}}class ii extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}const Ri=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class sa{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof sa)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let c=0;c<s.length;c+=2){const y=s[c],w=s[c+1];if(typeof y!="string"||!Ri.has(y)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new sa(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,c,y){const w=s.values,I=c.values;if(w.length!==I.length)throw new ii(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${c.toString()}`);const A=[];for(let O=0;O<w.length;O+=2){if(w[O]!==I[O])throw new ii(`Cannot interpolate values containing mismatched anchors. from[${O}]: ${w[O]}, to[${O}]: ${I[O]}`);A.push(w[O]);const[j,Y]=w[O+1],[ie,ce]=I[O+1];A.push([zr(j,ie,y),zr(Y,ce,y)])}return new sa(A)}}class hi{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new hi({name:s,available:!1}):null}}class ai{constructor(s,c,y){this.from=s,this.to=c,this.transition=y}static interpolate(s,c,y){return new ai(s,c,y)}static parse(s){return s instanceof ai?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new ai(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new ai(s.from,s.to,s.transition):typeof s=="string"?new ai(s,s,1):void 0}}function as(d,s,c,y){return typeof d=="number"&&d>=0&&d<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof c=="number"&&c>=0&&c<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[d,s,c,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[d,s,c,y]:[d,s,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _s(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof ai||d instanceof Cr||d instanceof Hn||d instanceof dn||d instanceof Tr||d instanceof rn||d instanceof sn||d instanceof sa||d instanceof hi)return!0;if(Array.isArray(d)){for(const s of d)if(!_s(s))return!1;return!0}if(typeof d=="object"){for(const s in d)if(!_s(d[s]))return!1;return!0}return!1}function xi(d){if(d===null)return gi;if(typeof d=="string")return Sn;if(typeof d=="boolean")return Pn;if(typeof d=="number")return kr;if(d instanceof Cr)return Un;if(d instanceof ai)return Ki;if(d instanceof Hn)return Ca;if(d instanceof dn)return Ni;if(d instanceof Tr)return Ho;if(d instanceof rn)return mo;if(d instanceof sn)return pa;if(d instanceof sa)return zs;if(d instanceof hi)return Oa;if(Array.isArray(d)){const s=d.length;let c;for(const y of d){const w=xi(y);if(c){if(c===w)continue;c=An;break}c=w}return fi(c||An,s)}return ea}function os(d){const s=typeof d;return d===null?"":s==="string"||s==="number"||s==="boolean"?String(d):d instanceof Cr||d instanceof ai||d instanceof dn||d instanceof Tr||d instanceof rn||d instanceof sn||d instanceof sa||d instanceof hi?d.toString():JSON.stringify(d)}class Xi{constructor(s,c){this.type=s,this.value=c}static parse(s,c){if(s.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!_s(s[1]))return c.error("invalid value");const y=s[1];let w=xi(y);const I=c.expectedType;return w.kind!=="array"||w.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(w=I),new Xi(w,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const tu={string:Sn,number:kr,boolean:Pn,object:ea};class Fa{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let y,w=1;const I=s[0];if(I==="array"){let O,j;if(s.length>2){const Y=s[1];if(typeof Y!="string"||!(Y in tu)||Y==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);O=tu[Y],w++}else O=An;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return c.error('The length argument to "array" must be a positive integer literal',2);j=s[2],w++}y=fi(O,j)}else{if(!tu[I])throw new Error(`Types doesn't contain name = ${I}`);y=tu[I]}const A=[];for(;w<s.length;w++){const O=c.parse(s[w],w,An);if(!O)return null;A.push(O)}return new Fa(y,A)}evaluate(s){for(let c=0;c<this.args.length;c++){const y=this.args[c].evaluate(s);if(!na(this.type,xi(y)))return y;if(c===this.args.length-1)throw new ii(`Expected value to be of type ${Ai(this.type)}, but found ${Ai(xi(y))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}const xs={"to-boolean":Pn,"to-color":Un,"to-number":kr,"to-string":Sn};class So{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const y=s[0];if(!xs[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&s.length!==2)return c.error("Expected one argument.");const w=xs[y],I=[];for(let A=1;A<s.length;A++){const O=c.parse(s[A],A,An);if(!O)return null;I.push(O)}return new So(w,I)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let c,y;for(const w of this.args){if(c=w.evaluate(s),y=null,c instanceof Cr)return c;if(typeof c=="string"){const I=s.parseColor(c);if(I)return I}else if(Array.isArray(c)&&(y=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:as(c[0],c[1],c[2],c[3]),!y))return new Cr(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new ii(y||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const y of this.args){c=y.evaluate(s);const w=Tr.parse(c);if(w)return w}throw new ii(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(const y of this.args){c=y.evaluate(s);const w=rn.parse(c);if(w)return w}throw new ii(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(const y of this.args){c=y.evaluate(s);const w=sn.parse(c);if(w)return w}throw new ii(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const y of this.args){c=y.evaluate(s);const w=sa.parse(c);if(w)return w}throw new ii(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const y of this.args){if(c=y.evaluate(s),c===null)return 0;const w=Number(c);if(!isNaN(w))return w}throw new ii(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return dn.fromString(os(this.args[0].evaluate(s)));case"resolvedImage":return hi.fromString(os(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return os(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}const ru=["Unknown","Point","LineString","Polygon"];class nu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ru[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let c=this._parseColorCache.get(s);return c||(c=Cr.parse(s),this._parseColorCache.set(s,c)),c}}class Ja{constructor(s,c,y=[],w,I=new Pi,A=[]){this.registry=s,this.path=y,this.key=y.map((O=>`[${O}]`)).join(""),this.scope=I,this.errors=A,this.expectedType=w,this._isConstant=c}parse(s,c,y,w,I={}){return c?this.concat(c,y,w)._parse(s,I):this._parse(s,I)}_parse(s,c){function y(w,I,A){return A==="assert"?new Fa(I,[w]):A==="coerce"?new So(I,[w]):w}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=s[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const I=this.registry[w];if(I){let A=I.parse(s,this);if(!A)return null;if(this.expectedType){const O=this.expectedType,j=A.type;if(O.kind!=="string"&&O.kind!=="number"&&O.kind!=="boolean"&&O.kind!=="object"&&O.kind!=="array"||j.kind!=="value"){if(O.kind==="projectionDefinition"&&["string","array"].includes(j.kind)||["color","formatted","resolvedImage"].includes(O.kind)&&["value","string"].includes(j.kind)||["padding","numberArray"].includes(O.kind)&&["value","number","array"].includes(j.kind)||O.kind==="colorArray"&&["value","string","array"].includes(j.kind)||O.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(j.kind))A=y(A,O,c.typeAnnotation||"coerce");else if(this.checkSubtype(O,j))return null}else A=y(A,O,c.typeAnnotation||"assert")}if(!(A instanceof Xi)&&A.type.kind!=="resolvedImage"&&this._isConstant(A)){const O=new nu;try{A=new Xi(A.type,A.evaluate(O))}catch(j){return this.error(j.message),null}}return A}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,c,y){const w=typeof s=="number"?this.path.concat(s):this.path,I=y?this.scope.concat(y):this.scope;return new Ja(this.registry,this._isConstant,w,c||null,I,this.errors)}error(s,...c){const y=`${this.key}${c.map((w=>`[${w}]`)).join("")}`;this.errors.push(new En(y,s))}checkSubtype(s,c){const y=na(s,c);return y&&this.error(y),y}}class ki{constructor(s,c){this.type=c.type,this.bindings=[].concat(s),this.result=c}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const c of this.bindings)s(c[1]);s(this.result)}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const y=[];for(let I=1;I<s.length-1;I+=2){const A=s[I];if(typeof A!="string")return c.error(`Expected string, but found ${typeof A} instead.`,I);if(/[^a-zA-Z0-9_]/.test(A))return c.error("Variable names must contain only alphanumeric characters or '_'.",I);const O=c.parse(s[I+1],I+1);if(!O)return null;y.push([A,O])}const w=c.parse(s[s.length-1],s.length-1,c.expectedType,y);return w?new ki(y,w):null}outputDefined(){return this.result.outputDefined()}}class ws{constructor(s,c){this.type=c.type,this.name=s,this.boundExpression=c}static parse(s,c){if(s.length!==2||typeof s[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const y=s[1];return c.scope.has(y)?new ws(y,c.scope.get(y)):c.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Yn{constructor(s,c,y){this.type=s,this.index=c,this.input=y}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,kr),w=c.parse(s[2],2,fi(c.expectedType||An));return y&&w?new Yn(w.type.itemType,y,w):null}evaluate(s){const c=this.index.evaluate(s),y=this.input.evaluate(s);if(c<0)throw new ii(`Array index out of bounds: ${c} < 0.`);if(c>=y.length)throw new ii(`Array index out of bounds: ${c} > ${y.length-1}.`);if(c!==Math.floor(c))throw new ii(`Array index must be an integer, but found ${c} instead.`);return y[c]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Wn{constructor(s,c){this.type=Pn,this.needle=s,this.haystack=c}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,An),w=c.parse(s[2],2,An);return y&&w?Na(y.type,[Pn,Sn,kr,gi,An])?new Wn(y,w):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(y.type)} instead`):null}evaluate(s){const c=this.needle.evaluate(s),y=this.haystack.evaluate(s);if(!y)return!1;if(!Wo(c,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(xi(c))} instead.`);if(!Wo(y,["string","array"]))throw new ii(`Expected second argument to be of type array or string, but found ${Ai(xi(y))} instead.`);return y.indexOf(c)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class go{constructor(s,c,y){this.type=kr,this.needle=s,this.haystack=c,this.fromIndex=y}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 2 or 3 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,An),w=c.parse(s[2],2,An);if(!y||!w)return null;if(!Na(y.type,[Pn,Sn,kr,gi,An]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(y.type)} instead`);if(s.length===4){const I=c.parse(s[3],3,kr);return I?new go(y,w,I):null}return new go(y,w)}evaluate(s){const c=this.needle.evaluate(s),y=this.haystack.evaluate(s);if(!Wo(c,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(xi(c))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(s)),Wo(y,["string"])){const I=y.indexOf(c,w);return I===-1?-1:[...y.slice(0,I)].length}if(Wo(y,["array"]))return y.indexOf(c,w);throw new ii(`Expected second argument to be of type array or string, but found ${Ai(xi(y))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Zn{constructor(s,c,y,w,I,A){this.inputType=s,this.type=c,this.input=y,this.cases=w,this.outputs=I,this.otherwise=A}static parse(s,c){if(s.length<5)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return c.error("Expected an even number of arguments.");let y,w;c.expectedType&&c.expectedType.kind!=="value"&&(w=c.expectedType);const I={},A=[];for(let Y=2;Y<s.length-1;Y+=2){let ie=s[Y];const ce=s[Y+1];Array.isArray(ie)||(ie=[ie]);const be=c.concat(Y);if(ie.length===0)return be.error("Expected at least one branch label.");for(const Oe of ie){if(typeof Oe!="number"&&typeof Oe!="string")return be.error("Branch labels must be numbers or strings.");if(typeof Oe=="number"&&Math.abs(Oe)>Number.MAX_SAFE_INTEGER)return be.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Oe=="number"&&Math.floor(Oe)!==Oe)return be.error("Numeric branch labels must be integer values.");if(y){if(be.checkSubtype(y,xi(Oe)))return null}else y=xi(Oe);if(I[String(Oe)]!==void 0)return be.error("Branch labels must be unique.");I[String(Oe)]=A.length}const Ce=c.parse(ce,Y,w);if(!Ce)return null;w=w||Ce.type,A.push(Ce)}const O=c.parse(s[1],1,An);if(!O)return null;const j=c.parse(s[s.length-1],s.length-1,w);return j?O.type.kind!=="value"&&c.concat(1).checkSubtype(y,O.type)?null:new Zn(y,w,O,I,A,j):null}evaluate(s){const c=this.input.evaluate(s);return(xi(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))&&this.otherwise.outputDefined()}}class ue{constructor(s,c,y){this.type=s,this.branches=c,this.otherwise=y}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return c.error("Expected an odd number of arguments.");let y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);const w=[];for(let A=1;A<s.length-1;A+=2){const O=c.parse(s[A],A,Pn);if(!O)return null;const j=c.parse(s[A+1],A+1,y);if(!j)return null;w.push([O,j]),y=y||j.type}const I=c.parse(s[s.length-1],s.length-1,y);if(!I)return null;if(!y)throw new Error("Can't infer output type");return new ue(y,w,I)}evaluate(s){for(const[c,y]of this.branches)if(c.evaluate(s))return y.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[c,y]of this.branches)s(c),s(y);s(this.otherwise)}outputDefined(){return this.branches.every((([s,c])=>c.outputDefined()))&&this.otherwise.outputDefined()}}class We{constructor(s,c,y,w){this.type=s,this.input=c,this.beginIndex=y,this.endIndex=w}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 2 or 3 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,An),w=c.parse(s[2],2,kr);if(!y||!w)return null;if(!Na(y.type,[fi(An),Sn,An]))return c.error(`Expected first argument to be of type array or string, but found ${Ai(y.type)} instead`);if(s.length===4){const I=c.parse(s[3],3,kr);return I?new We(y.type,y,w,I):null}return new We(y.type,y,w)}evaluate(s){const c=this.input.evaluate(s),y=this.beginIndex.evaluate(s);let w;if(this.endIndex&&(w=this.endIndex.evaluate(s)),Wo(c,["string"]))return[...c].slice(y,w).join("");if(Wo(c,["array"]))return c.slice(y,w);throw new ii(`Expected first argument to be of type array or string, but found ${Ai(xi(c))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function bt(d,s){const c=d.length-1;let y,w,I=0,A=c,O=0;for(;I<=A;)if(O=Math.floor((I+A)/2),y=d[O],w=d[O+1],y<=s){if(O===c||s<w)return O;I=O+1}else{if(!(y>s))throw new ii("Input is not a number.");A=O-1}return 0}class Ft{constructor(s,c,y){this.type=s,this.input=c,this.labels=[],this.outputs=[];for(const[w,I]of y)this.labels.push(w),this.outputs.push(I)}static parse(s,c){if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");const y=c.parse(s[1],1,kr);if(!y)return null;const w=[];let I=null;c.expectedType&&c.expectedType.kind!=="value"&&(I=c.expectedType);for(let A=1;A<s.length;A+=2){const O=A===1?-1/0:s[A],j=s[A+1],Y=A,ie=A+1;if(typeof O!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(w.length&&w[w.length-1][0]>=O)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Y);const ce=c.parse(j,ie,I);if(!ce)return null;I=I||ce.type,w.push([O,ce])}return new Ft(I,y,w)}evaluate(s){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(s);const w=this.input.evaluate(s);if(w<=c[0])return y[0].evaluate(s);const I=c.length;return w>=c[I-1]?y[I-1].evaluate(s):y[bt(c,w)].evaluate(s)}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))}}function nr(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Pr,$r,Tn=(function(){if($r)return Pr;function d(s,c,y,w){this.cx=3*s,this.bx=3*(y-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(w-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=c,this.p2x=y,this.p2y=w}return $r=1,Pr=d,d.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,c){if(c===void 0&&(c=1e-6),s<0)return 0;if(s>1)return 1;for(var y=s,w=0;w<8;w++){var I=this.sampleCurveX(y)-s;if(Math.abs(I)<c)return y;var A=this.sampleCurveDerivativeX(y);if(Math.abs(A)<1e-6)break;y-=I/A}var O=0,j=1;for(y=s,w=0;w<20&&(I=this.sampleCurveX(y),!(Math.abs(I-s)<c));w++)s>I?O=y:j=y,y=.5*(j-O)+O;return y},solve:function(s,c){return this.sampleCurveY(this.solveCurveX(s,c))}},Pr})(),Dn=nr(Tn);class Mn{constructor(s,c,y,w,I){this.type=s,this.operator=c,this.interpolation=y,this.input=w,this.labels=[],this.outputs=[];for(const[A,O]of I)this.labels.push(A),this.outputs.push(O)}static interpolationFactor(s,c,y,w){let I=0;if(s.name==="exponential")I=ni(c,s.base,y,w);else if(s.name==="linear")I=ni(c,1,y,w);else if(s.name==="cubic-bezier"){const A=s.controlPoints;I=new Dn(A[0],A[1],A[2],A[3]).solve(ni(c,1,y,w))}return I}static parse(s,c){let[y,w,I,...A]=s;if(!Array.isArray(w)||w.length===0)return c.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const Y=w[1];if(typeof Y!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:Y}}else{if(w[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const Y=w.slice(1);if(Y.length!==4||Y.some((ie=>typeof ie!="number"||ie<0||ie>1)))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:Y}}}if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(I=c.parse(I,2,kr),!I)return null;const O=[];let j=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||c.expectedType==pa?c.expectedType&&c.expectedType.kind!=="value"&&(j=c.expectedType):j=Un;for(let Y=0;Y<A.length;Y+=2){const ie=A[Y],ce=A[Y+1],be=Y+3,Ce=Y+4;if(typeof ie!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(O.length&&O[O.length-1][0]>=ie)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',be);const Oe=c.parse(ce,Ce,j);if(!Oe)return null;j=j||Oe.type,O.push([ie,Oe])}return ma(j,kr)||ma(j,Ki)||ma(j,Un)||ma(j,Ho)||ma(j,mo)||ma(j,pa)||ma(j,zs)||ma(j,fi(kr))?new Mn(j,y,w,I,O):c.error(`Type ${Ai(j)} is not interpolatable.`)}evaluate(s){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(s);const w=this.input.evaluate(s);if(w<=c[0])return y[0].evaluate(s);const I=c.length;if(w>=c[I-1])return y[I-1].evaluate(s);const A=bt(c,w),O=Mn.interpolationFactor(this.interpolation,w,c[A],c[A+1]),j=y[A].evaluate(s),Y=y[A+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return zr(j,Y,O);case"color":return Cr.interpolate(j,Y,O);case"padding":return Tr.interpolate(j,Y,O);case"colorArray":return sn.interpolate(j,Y,O);case"numberArray":return rn.interpolate(j,Y,O);case"variableAnchorOffsetCollection":return sa.interpolate(j,Y,O);case"array":return Kr(j,Y,O);case"projectionDefinition":return ai.interpolate(j,Y,O)}case"interpolate-hcl":switch(this.type.kind){case"color":return Cr.interpolate(j,Y,O,"hcl");case"colorArray":return sn.interpolate(j,Y,O,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Cr.interpolate(j,Y,O,"lab");case"colorArray":return sn.interpolate(j,Y,O,"lab")}}}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))}}function ni(d,s,c,y){const w=y-c,I=d-c;return w===0?0:s===1?I/w:(Math.pow(s,I)-1)/(Math.pow(s,w)-1)}const On={color:Cr.interpolate,number:zr,padding:Tr.interpolate,numberArray:rn.interpolate,colorArray:sn.interpolate,variableAnchorOffsetCollection:sa.interpolate,array:Kr};class Mi{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let y=null;const w=c.expectedType;w&&w.kind!=="value"&&(y=w);const I=[];for(const O of s.slice(1)){const j=c.parse(O,1+I.length,y,void 0,{typeAnnotation:"omit"});if(!j)return null;y=y||j.type,I.push(j)}if(!y)throw new Error("No output type");const A=w&&I.some((O=>na(w,O.type)));return new Mi(A?An:y,I)}evaluate(s){let c,y=null,w=0;for(const I of this.args)if(w++,y=I.evaluate(s),y&&y instanceof hi&&!y.available&&(c||(c=y.name),y=null,w===this.args.length&&(y=c)),y!==null)break;return y}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}function Fi(d,s){return d==="=="||d==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Gi(d,s,c,y){return y.compare(s,c)===0}function pi(d,s,c){const y=d!=="=="&&d!=="!=";return class _j{constructor(I,A,O){this.type=Pn,this.lhs=I,this.rhs=A,this.collator=O,this.hasUntypedArgument=I.type.kind==="value"||A.type.kind==="value"}static parse(I,A){if(I.length!==3&&I.length!==4)return A.error("Expected two or three arguments.");const O=I[0];let j=A.parse(I[1],1,An);if(!j)return null;if(!Fi(O,j.type))return A.concat(1).error(`"${O}" comparisons are not supported for type '${Ai(j.type)}'.`);let Y=A.parse(I[2],2,An);if(!Y)return null;if(!Fi(O,Y.type))return A.concat(2).error(`"${O}" comparisons are not supported for type '${Ai(Y.type)}'.`);if(j.type.kind!==Y.type.kind&&j.type.kind!=="value"&&Y.type.kind!=="value")return A.error(`Cannot compare types '${Ai(j.type)}' and '${Ai(Y.type)}'.`);y&&(j.type.kind==="value"&&Y.type.kind!=="value"?j=new Fa(Y.type,[j]):j.type.kind!=="value"&&Y.type.kind==="value"&&(Y=new Fa(j.type,[Y])));let ie=null;if(I.length===4){if(j.type.kind!=="string"&&Y.type.kind!=="string"&&j.type.kind!=="value"&&Y.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(ie=A.parse(I[3],3,Ca),!ie)return null}return new _j(j,Y,ie)}evaluate(I){const A=this.lhs.evaluate(I),O=this.rhs.evaluate(I);if(y&&this.hasUntypedArgument){const j=xi(A),Y=xi(O);if(j.kind!==Y.kind||j.kind!=="string"&&j.kind!=="number")throw new ii(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${j.kind}, ${Y.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const j=xi(A),Y=xi(O);if(j.kind!=="string"||Y.kind!=="string")return s(I,A,O)}return this.collator?c(I,A,O,this.collator.evaluate(I)):s(I,A,O)}eachChild(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)}outputDefined(){return!0}}}const ga=pi("==",(function(d,s,c){return s===c}),Gi),Ia=pi("!=",(function(d,s,c){return s!==c}),(function(d,s,c,y){return!Gi(0,s,c,y)})),Ss=pi("<",(function(d,s,c){return s<c}),(function(d,s,c,y){return y.compare(s,c)<0})),qs=pi(">",(function(d,s,c){return s>c}),(function(d,s,c,y){return y.compare(s,c)>0})),Cs=pi("<=",(function(d,s,c){return s<=c}),(function(d,s,c,y){return y.compare(s,c)<=0})),Co=pi(">=",(function(d,s,c){return s>=c}),(function(d,s,c,y){return y.compare(s,c)>=0}));class Es{constructor(s,c,y){this.type=Ca,this.locale=y,this.caseSensitive=s,this.diacriticSensitive=c}static parse(s,c){if(s.length!==2)return c.error("Expected one argument.");const y=s[1];if(typeof y!="object"||Array.isArray(y))return c.error("Collator options argument must be an object.");const w=c.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,Pn);if(!w)return null;const I=c.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,Pn);if(!I)return null;let A=null;return y.locale&&(A=c.parse(y.locale,1,Sn),!A)?null:new Es(w,I,A)}evaluate(s){return new Hn(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class ya{constructor(s,c,y,w,I){this.type=Sn,this.number=s,this.locale=c,this.currency=y,this.minFractionDigits=w,this.maxFractionDigits=I}static parse(s,c){if(s.length!==3)return c.error("Expected two arguments.");const y=c.parse(s[1],1,kr);if(!y)return null;const w=s[2];if(typeof w!="object"||Array.isArray(w))return c.error("NumberFormat options argument must be an object.");let I=null;if(w.locale&&(I=c.parse(w.locale,1,Sn),!I))return null;let A=null;if(w.currency&&(A=c.parse(w.currency,1,Sn),!A))return null;let O=null;if(w["min-fraction-digits"]&&(O=c.parse(w["min-fraction-digits"],1,kr),!O))return null;let j=null;return w["max-fraction-digits"]&&(j=c.parse(w["max-fraction-digits"],1,kr),!j)?null:new ya(y,I,A,O,j)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Ts{constructor(s){this.type=Ni,this.sections=s}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const y=s[1];if(!Array.isArray(y)&&typeof y=="object")return c.error("First argument must be an image or text section.");const w=[];let I=!1;for(let A=1;A<=s.length-1;++A){const O=s[A];if(I&&typeof O=="object"&&!Array.isArray(O)){I=!1;let j=null;if(O["font-scale"]&&(j=c.parse(O["font-scale"],1,kr),!j))return null;let Y=null;if(O["text-font"]&&(Y=c.parse(O["text-font"],1,fi(Sn)),!Y))return null;let ie=null;if(O["text-color"]&&(ie=c.parse(O["text-color"],1,Un),!ie))return null;let ce=null;if(O["vertical-align"]){if(typeof O["vertical-align"]=="string"&&!_i.includes(O["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${O["vertical-align"]}' instead.`);if(ce=c.parse(O["vertical-align"],1,Sn),!ce)return null}const be=w[w.length-1];be.scale=j,be.font=Y,be.textColor=ie,be.verticalAlign=ce}else{const j=c.parse(s[A],1,An);if(!j)return null;const Y=j.type.kind;if(Y!=="string"&&Y!=="value"&&Y!=="null"&&Y!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,w.push({content:j,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ts(w)}evaluate(s){return new dn(this.sections.map((c=>{const y=c.content.evaluate(s);return xi(y)===Oa?new Rn("",y,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(s):null):new Rn(os(y),null,c.scale?c.scale.evaluate(s):null,c.font?c.font.evaluate(s).join(","):null,c.textColor?c.textColor.evaluate(s):null,c.verticalAlign?c.verticalAlign.evaluate(s):null)})))}eachChild(s){for(const c of this.sections)s(c.content),c.scale&&s(c.scale),c.font&&s(c.font),c.textColor&&s(c.textColor),c.verticalAlign&&s(c.verticalAlign)}outputDefined(){return!1}}class nl{constructor(s){this.type=Oa,this.input=s}static parse(s,c){if(s.length!==2)return c.error("Expected two arguments.");const y=c.parse(s[1],1,Sn);return y?new nl(y):c.error("No image name provided.")}evaluate(s){const c=this.input.evaluate(s),y=hi.fromString(c);return y&&s.availableImages&&(y.available=s.availableImages.indexOf(c)>-1),y}eachChild(s){s(this.input)}outputDefined(){return!1}}class Yo{constructor(s){this.type=kr,this.input=s}static parse(s,c){if(s.length!==2)return c.error(`Expected 1 argument, but found ${s.length-1} instead.`);const y=c.parse(s[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${Ai(y.type)} instead.`):new Yo(y):null}evaluate(s){const c=this.input.evaluate(s);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new ii(`Expected value to be of type string or array, but found ${Ai(xi(c))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const wi=8192;function Eo(d,s){const c=(180+d[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,w=Math.pow(2,s.z);return[Math.round(c*w*wi),Math.round(y*w*wi)]}function xa(d,s){const c=Math.pow(2,s.z);return[(w=(d[0]/wi+s.x)/c,360*w-180),(y=(d[1]/wi+s.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,w}function Bo(d,s){d[0]=Math.min(d[0],s[0]),d[1]=Math.min(d[1],s[1]),d[2]=Math.max(d[2],s[0]),d[3]=Math.max(d[3],s[1])}function ss(d,s){return!(d[0]<=s[0]||d[2]>=s[2]||d[1]<=s[1]||d[3]>=s[3])}function Ba(d,s,c){const y=d[0]-s[0],w=d[1]-s[1],I=d[0]-c[0],A=d[1]-c[1];return y*A-I*w==0&&y*I<=0&&w*A<=0}function Cu(d,s,c,y){return(w=[y[0]-c[0],y[1]-c[1]])[0]*(I=[s[0]-d[0],s[1]-d[1]])[1]-w[1]*I[0]!=0&&!(!Tu(d,s,c,y)||!Tu(c,y,d,s));var w,I}function Rl(d,s,c){for(const y of c)for(let w=0;w<y.length-1;++w)if(Cu(d,s,y[w],y[w+1]))return!0;return!1}function Is(d,s,c=!1){let y=!1;for(const O of s)for(let j=0;j<O.length-1;j++){if(Ba(d,O[j],O[j+1]))return c;(I=O[j])[1]>(w=d)[1]!=(A=O[j+1])[1]>w[1]&&w[0]<(A[0]-I[0])*(w[1]-I[1])/(A[1]-I[1])+I[0]&&(y=!y)}var w,I,A;return y}function Pa(d,s){for(const c of s)if(Is(d,c))return!0;return!1}function ls(d,s){for(const c of d)if(!Is(c,s))return!1;for(let c=0;c<d.length-1;++c)if(Rl(d[c],d[c+1],s))return!1;return!0}function Eu(d,s){for(const c of s)if(ls(d,c))return!0;return!1}function Tu(d,s,c,y){const w=y[0]-c[0],I=y[1]-c[1],A=(d[0]-c[0])*I-w*(d[1]-c[1]),O=(s[0]-c[0])*I-w*(s[1]-c[1]);return A>0&&O<0||A<0&&O>0}function Vs(d,s,c){const y=[];for(let w=0;w<d.length;w++){const I=[];for(let A=0;A<d[w].length;A++){const O=Eo(d[w][A],c);Bo(s,O),I.push(O)}y.push(I)}return y}function Dl(d,s,c){const y=[];for(let w=0;w<d.length;w++){const I=Vs(d[w],s,c);y.push(I)}return y}function yo(d,s,c,y){if(d[0]<c[0]||d[0]>c[2]){const w=.5*y;let I=d[0]-c[0]>w?-y:c[0]-d[0]>w?y:0;I===0&&(I=d[0]-c[2]>w?-y:c[2]-d[0]>w?y:0),d[0]+=I}Bo(s,d)}function Qa(d,s,c,y){const w=Math.pow(2,y.z)*wi,I=[y.x*wi,y.y*wi],A=[];for(const O of d)for(const j of O){const Y=[j.x+I[0],j.y+I[1]];yo(Y,s,c,w),A.push(Y)}return A}function iu(d,s,c,y){const w=Math.pow(2,y.z)*wi,I=[y.x*wi,y.y*wi],A=[];for(const j of d){const Y=[];for(const ie of j){const ce=[ie.x+I[0],ie.y+I[1]];Bo(s,ce),Y.push(ce)}A.push(Y)}if(s[2]-s[0]<=w/2){(O=s)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(const j of A)for(const Y of j)yo(Y,s,c,w)}var O;return A}class Aa{constructor(s,c){this.type=Pn,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(_s(s[1])){const y=s[1];if(y.type==="FeatureCollection"){const w=[];for(const I of y.features){const{type:A,coordinates:O}=I.geometry;A==="Polygon"&&w.push(O),A==="MultiPolygon"&&w.push(...O)}if(w.length)return new Aa(y,{type:"MultiPolygon",coordinates:w})}else if(y.type==="Feature"){const w=y.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Aa(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new Aa(y,y)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return(function(c,y){const w=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],A=c.canonicalID();if(y.type==="Polygon"){const O=Vs(y.coordinates,I,A),j=Qa(c.geometry(),w,I,A);if(!ss(w,I))return!1;for(const Y of j)if(!Is(Y,O))return!1}if(y.type==="MultiPolygon"){const O=Dl(y.coordinates,I,A),j=Qa(c.geometry(),w,I,A);if(!ss(w,I))return!1;for(const Y of j)if(!Pa(Y,O))return!1}return!0})(s,this.geometries);if(s.geometryType()==="LineString")return(function(c,y){const w=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],A=c.canonicalID();if(y.type==="Polygon"){const O=Vs(y.coordinates,I,A),j=iu(c.geometry(),w,I,A);if(!ss(w,I))return!1;for(const Y of j)if(!ls(Y,O))return!1}if(y.type==="MultiPolygon"){const O=Dl(y.coordinates,I,A),j=iu(c.geometry(),w,I,A);if(!ss(w,I))return!1;for(const Y of j)if(!Eu(Y,O))return!1}return!0})(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ol=class{constructor(d=[],s=(c,y)=>c<y?-1:c>y?1:0){if(this.data=d,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:s,compare:c}=this,y=s[d];for(;d>0;){const w=d-1>>1,I=s[w];if(c(y,I)>=0)break;s[d]=I,d=w}s[d]=y}_down(d){const{data:s,compare:c}=this,y=this.length>>1,w=s[d];for(;d<y;){let I=1+(d<<1);const A=I+1;if(A<this.length&&c(s[A],s[I])<0&&(I=A),c(s[I],w)>=0)break;s[d]=s[I],d=I}s[d]=w}};function Ps(d,s,c=0,y=d.length-1,w=ka){for(;y>c;){if(y-c>600){const j=y-c+1,Y=s-c+1,ie=Math.log(j),ce=.5*Math.exp(2*ie/3),be=.5*Math.sqrt(ie*ce*(j-ce)/j)*(Y-j/2<0?-1:1);Ps(d,s,Math.max(c,Math.floor(s-Y*ce/j+be)),Math.min(y,Math.floor(s+(j-Y)*ce/j+be)),w)}const I=d[s];let A=c,O=y;for(Zo(d,c,s),w(d[y],I)>0&&Zo(d,c,y);A<O;){for(Zo(d,A,O),A++,O--;w(d[A],I)<0;)A++;for(;w(d[O],I)>0;)O--}w(d[c],I)===0?Zo(d,c,O):(O++,Zo(d,O,y)),O<=s&&(c=O+1),s<=O&&(y=O-1)}}function Zo(d,s,c){const y=d[s];d[s]=d[c],d[c]=y}function ka(d,s){return d<s?-1:d>s?1:0}function hl(d,s){if(d.length<=1)return[d];const c=[];let y,w;for(const I of d){const A=Gs(I);A!==0&&(I.area=Math.abs(A),w===void 0&&(w=A<0),w===A<0?(y&&c.push(y),y=[I]):y.push(I))}if(y&&c.push(y),s>1)for(let I=0;I<c.length;I++)c[I].length<=s||(Ps(c[I],s,1,c[I].length-1,$s),c[I]=c[I].slice(0,s));return c}function $s(d,s){return s.area-d.area}function Gs(d){let s=0;for(let c,y,w=0,I=d.length,A=I-1;w<I;A=w++)c=d[w],y=d[A],s+=(y.x-c.x)*(c.y+y.y);return s}const pl=1/298.257223563,ml=pl*(2-pl),Us=Math.PI/180;class gl{constructor(s){const c=6378.137*Us*1e3,y=Math.cos(s*Us),w=1/(1-ml*(1-y*y)),I=Math.sqrt(w);this.kx=c*I*y,this.ky=c*I*w*(1-ml)}distance(s,c){const y=this.wrap(s[0]-c[0])*this.kx,w=(s[1]-c[1])*this.ky;return Math.sqrt(y*y+w*w)}pointOnLine(s,c){let y,w,I,A,O=1/0;for(let j=0;j<s.length-1;j++){let Y=s[j][0],ie=s[j][1],ce=this.wrap(s[j+1][0]-Y)*this.kx,be=(s[j+1][1]-ie)*this.ky,Ce=0;ce===0&&be===0||(Ce=(this.wrap(c[0]-Y)*this.kx*ce+(c[1]-ie)*this.ky*be)/(ce*ce+be*be),Ce>1?(Y=s[j+1][0],ie=s[j+1][1]):Ce>0&&(Y+=ce/this.kx*Ce,ie+=be/this.ky*Ce)),ce=this.wrap(c[0]-Y)*this.kx,be=(c[1]-ie)*this.ky;const Oe=ce*ce+be*be;Oe<O&&(O=Oe,y=Y,w=ie,I=j,A=Ce)}return{point:[y,w],index:I,t:Math.max(0,Math.min(1,A))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function au(d,s){return s[0]-d[0]}function er(d){return d[1]-d[0]+1}function fr(d,s){return d[1]>=d[0]&&d[1]<s}function nn(d,s){if(d[0]>d[1])return[null,null];const c=er(d);if(s){if(c===2)return[d,null];const w=Math.floor(c/2);return[[d[0],d[0]+w],[d[0]+w,d[1]]]}if(c===1)return[d,null];const y=Math.floor(c/2)-1;return[[d[0],d[0]+y],[d[0]+y+1,d[1]]]}function bn(d,s){if(!fr(s,d.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let y=s[0];y<=s[1];++y)Bo(c,d[y]);return c}function ci(d){const s=[1/0,1/0,-1/0,-1/0];for(const c of d)for(const y of c)Bo(s,y);return s}function _n(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function E(d,s,c){if(!_n(d)||!_n(s))return NaN;let y=0,w=0;return d[2]<s[0]&&(y=s[0]-d[2]),d[0]>s[2]&&(y=d[0]-s[2]),d[1]>s[3]&&(w=d[1]-s[3]),d[3]<s[1]&&(w=s[1]-d[3]),c.distance([0,0],[y,w])}function m(d,s,c){const y=c.pointOnLine(s,d);return c.distance(d,y.point)}function v(d,s,c,y,w){const I=Math.min(m(d,[c,y],w),m(s,[c,y],w)),A=Math.min(m(c,[d,s],w),m(y,[d,s],w));return Math.min(I,A)}function T(d,s,c,y,w){if(!fr(s,d.length)||!fr(y,c.length))return 1/0;let I=1/0;for(let A=s[0];A<s[1];++A){const O=d[A],j=d[A+1];for(let Y=y[0];Y<y[1];++Y){const ie=c[Y],ce=c[Y+1];if(Cu(O,j,ie,ce))return 0;I=Math.min(I,v(O,j,ie,ce,w))}}return I}function q(d,s,c,y,w){if(!fr(s,d.length)||!fr(y,c.length))return NaN;let I=1/0;for(let A=s[0];A<=s[1];++A)for(let O=y[0];O<=y[1];++O)if(I=Math.min(I,w.distance(d[A],c[O])),I===0)return I;return I}function ne(d,s,c){if(Is(d,s,!0))return 0;let y=1/0;for(const w of s){const I=w[0],A=w[w.length-1];if(I!==A&&(y=Math.min(y,m(d,[A,I],c)),y===0))return y;const O=c.pointOnLine(w,d);if(y=Math.min(y,c.distance(d,O.point)),y===0)return y}return y}function ve(d,s,c,y){if(!fr(s,d.length))return NaN;for(let I=s[0];I<=s[1];++I)if(Is(d[I],c,!0))return 0;let w=1/0;for(let I=s[0];I<s[1];++I){const A=d[I],O=d[I+1];for(const j of c)for(let Y=0,ie=j.length,ce=ie-1;Y<ie;ce=Y++){const be=j[ce],Ce=j[Y];if(Cu(A,O,be,Ce))return 0;w=Math.min(w,v(A,O,be,Ce,y))}}return w}function De(d,s){for(const c of d)for(const y of c)if(Is(y,s,!0))return!0;return!1}function tt(d,s,c,y=1/0){const w=ci(d),I=ci(s);if(y!==1/0&&E(w,I,c)>=y)return y;if(ss(w,I)){if(De(d,s))return 0}else if(De(s,d))return 0;let A=1/0;for(const O of d)for(let j=0,Y=O.length,ie=Y-1;j<Y;ie=j++){const ce=O[ie],be=O[j];for(const Ce of s)for(let Oe=0,ze=Ce.length,Ve=ze-1;Oe<ze;Ve=Oe++){const et=Ce[Ve],Et=Ce[Oe];if(Cu(ce,be,et,Et))return 0;A=Math.min(A,v(ce,be,et,Et,c))}}return A}function dt(d,s,c,y,w,I){if(!I)return;const A=E(bn(y,I),w,c);A<s&&d.push([A,I,[0,0]])}function tr(d,s,c,y,w,I,A){if(!I||!A)return;const O=E(bn(y,I),bn(w,A),c);O<s&&d.push([O,I,A])}function ar(d,s,c,y,w=1/0){let I=Math.min(y.distance(d[0],c[0][0]),w);if(I===0)return I;const A=new Ol([[0,[0,d.length-1],[0,0]]],au),O=ci(c);for(;A.length>0;){const j=A.pop();if(j[0]>=I)continue;const Y=j[1],ie=s?50:100;if(er(Y)<=ie){if(!fr(Y,d.length))return NaN;if(s){const ce=ve(d,Y,c,y);if(isNaN(ce)||ce===0)return ce;I=Math.min(I,ce)}else for(let ce=Y[0];ce<=Y[1];++ce){const be=ne(d[ce],c,y);if(I=Math.min(I,be),I===0)return 0}}else{const ce=nn(Y,s);dt(A,I,y,d,O,ce[0]),dt(A,I,y,d,O,ce[1])}}return I}function Fr(d,s,c,y,w,I=1/0){let A=Math.min(I,w.distance(d[0],c[0]));if(A===0)return A;const O=new Ol([[0,[0,d.length-1],[0,c.length-1]]],au);for(;O.length>0;){const j=O.pop();if(j[0]>=A)continue;const Y=j[1],ie=j[2],ce=s?50:100,be=y?50:100;if(er(Y)<=ce&&er(ie)<=be){if(!fr(Y,d.length)&&fr(ie,c.length))return NaN;let Ce;if(s&&y)Ce=T(d,Y,c,ie,w),A=Math.min(A,Ce);else if(s&&!y){const Oe=d.slice(Y[0],Y[1]+1);for(let ze=ie[0];ze<=ie[1];++ze)if(Ce=m(c[ze],Oe,w),A=Math.min(A,Ce),A===0)return A}else if(!s&&y){const Oe=c.slice(ie[0],ie[1]+1);for(let ze=Y[0];ze<=Y[1];++ze)if(Ce=m(d[ze],Oe,w),A=Math.min(A,Ce),A===0)return A}else Ce=q(d,Y,c,ie,w),A=Math.min(A,Ce)}else{const Ce=nn(Y,s),Oe=nn(ie,y);tr(O,A,w,d,c,Ce[0],Oe[0]),tr(O,A,w,d,c,Ce[0],Oe[1]),tr(O,A,w,d,c,Ce[1],Oe[0]),tr(O,A,w,d,c,Ce[1],Oe[1])}}return A}function fn(d){return d.type==="MultiPolygon"?d.coordinates.map((s=>({type:"Polygon",coordinates:s}))):d.type==="MultiLineString"?d.coordinates.map((s=>({type:"LineString",coordinates:s}))):d.type==="MultiPoint"?d.coordinates.map((s=>({type:"Point",coordinates:s}))):[d]}class Cn{constructor(s,c){this.type=kr,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(_s(s[1])){const y=s[1];if(y.type==="FeatureCollection")return new Cn(y,y.features.map((w=>fn(w.geometry))).flat());if(y.type==="Feature")return new Cn(y,fn(y.geometry));if("type"in y&&"coordinates"in y)return new Cn(y,fn(y))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return(function(c,y){const w=c.geometry(),I=w.flat().map((j=>xa([j.x,j.y],c.canonical)));if(w.length===0)return NaN;const A=new gl(I[0][1]);let O=1/0;for(const j of y){switch(j.type){case"Point":O=Math.min(O,Fr(I,!1,[j.coordinates],!1,A,O));break;case"LineString":O=Math.min(O,Fr(I,!1,j.coordinates,!0,A,O));break;case"Polygon":O=Math.min(O,ar(I,!1,j.coordinates,A,O))}if(O===0)return O}return O})(s,this.geometries);if(s.geometryType()==="LineString")return(function(c,y){const w=c.geometry(),I=w.flat().map((j=>xa([j.x,j.y],c.canonical)));if(w.length===0)return NaN;const A=new gl(I[0][1]);let O=1/0;for(const j of y){switch(j.type){case"Point":O=Math.min(O,Fr(I,!0,[j.coordinates],!1,A,O));break;case"LineString":O=Math.min(O,Fr(I,!0,j.coordinates,!0,A,O));break;case"Polygon":O=Math.min(O,ar(I,!0,j.coordinates,A,O))}if(O===0)return O}return O})(s,this.geometries);if(s.geometryType()==="Polygon")return(function(c,y){const w=c.geometry();if(w.length===0||w[0].length===0)return NaN;const I=hl(w,0).map((j=>j.map((Y=>Y.map((ie=>xa([ie.x,ie.y],c.canonical))))))),A=new gl(I[0][0][0][1]);let O=1/0;for(const j of y)for(const Y of I){switch(j.type){case"Point":O=Math.min(O,ar([j.coordinates],!1,Y,A,O));break;case"LineString":O=Math.min(O,ar(j.coordinates,!0,Y,A,O));break;case"Polygon":O=Math.min(O,tt(Y,j.coordinates,A,O))}if(O===0)return O}return O})(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Bn{constructor(s){this.type=An,this.key=s}static parse(s,c){if(s.length!==2)return c.error(`Expected 1 argument, but found ${s.length-1} instead.`);const y=s[1];return y==null?c.error("Global state property must be defined."):typeof y!="string"?c.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new Bn(y)}evaluate(s){var c;const y=(c=s.globals)===null||c===void 0?void 0:c.globalState;return y&&Object.keys(y).length!==0?It(y,this.key):null}eachChild(){}outputDefined(){return!1}}const In={"==":ga,"!=":Ia,">":qs,"<":Ss,">=":Co,"<=":Cs,array:Fa,at:Yn,boolean:Fa,case:ue,coalesce:Mi,collator:Es,format:Ts,image:nl,in:Wn,"index-of":go,interpolate:Mn,"interpolate-hcl":Mn,"interpolate-lab":Mn,length:Yo,let:ki,literal:Xi,match:Zn,number:Fa,"number-format":ya,object:Fa,slice:We,step:Ft,string:Fa,"to-boolean":So,"to-color":So,"to-number":So,"to-string":So,var:ws,within:Aa,distance:Cn,"global-state":Bn};class gn{constructor(s,c,y,w){this.name=s,this.type=c,this._evaluate=y,this.args=w}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,c){const y=s[0],w=gn.definitions[y];if(!w)return c.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const I=Array.isArray(w)?w[0]:w.type,A=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,O=A.filter((([Y])=>!Array.isArray(Y)||Y.length===s.length-1));let j=null;for(const[Y,ie]of O){j=new Ja(c.registry,To,c.path,null,c.scope);const ce=[];let be=!1;for(let Ce=1;Ce<s.length;Ce++){const Oe=s[Ce],ze=Array.isArray(Y)?Y[Ce-1]:Y.type,Ve=j.parse(Oe,1+ce.length,ze);if(!Ve){be=!0;break}ce.push(Ve)}if(!be)if(Array.isArray(Y)&&Y.length!==ce.length)j.error(`Expected ${Y.length} arguments, but found ${ce.length} instead.`);else{for(let Ce=0;Ce<ce.length;Ce++){const Oe=Array.isArray(Y)?Y[Ce]:Y.type,ze=ce[Ce];j.concat(Ce+1).checkSubtype(Oe,ze.type)}if(j.errors.length===0)return new gn(y,I,ie,ce)}}if(O.length===1)c.errors.push(...j.errors);else{const Y=(O.length?O:A).map((([ce])=>{return be=ce,Array.isArray(be)?`(${be.map(Ai).join(", ")})`:`(${Ai(be.type)}...)`;var be})).join(" | "),ie=[];for(let ce=1;ce<s.length;ce++){const be=c.parse(s[ce],1+ie.length);if(!be)return null;ie.push(Ai(be.type))}c.error(`Expected arguments of type ${Y}, but found (${ie.join(", ")}) instead.`)}return null}static register(s,c){gn.definitions=c;for(const y in c)s[y]=gn}}function Ui(d,[s,c,y,w]){s=s.evaluate(d),c=c.evaluate(d),y=y.evaluate(d);const I=w?w.evaluate(d):1,A=as(s,c,y,I);if(A)throw new ii(A);return new Cr(s/255,c/255,y/255,I,!1)}function Ji(d,s){return d in s}function Ha(d,s){const c=s[d];return c===void 0?null:c}function va(d){return{type:d}}function To(d){if(d instanceof ws)return To(d.boundExpression);if(d instanceof gn&&d.name==="error"||d instanceof Es||d instanceof Aa||d instanceof Cn||d instanceof Bn)return!1;const s=d instanceof So||d instanceof Fa;let c=!0;return d.eachChild((y=>{c=s?c&&To(y):c&&y instanceof Xi})),!!c&&As(d)&&Nl(d,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function As(d){if(d instanceof gn&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof Aa||d instanceof Cn)return!1;let s=!0;return d.eachChild((c=>{s&&!As(c)&&(s=!1)})),s}function il(d){if(d instanceof gn&&d.name==="feature-state")return!1;let s=!0;return d.eachChild((c=>{s&&!il(c)&&(s=!1)})),s}function Nl(d,s){if(d instanceof gn&&s.indexOf(d.name)>=0)return!1;let c=!0;return d.eachChild((y=>{c&&!Nl(y,s)&&(c=!1)})),c}function Fl(d){return{result:"success",value:d}}function us(d){return{result:"error",value:d}}function yl(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function vl(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function oo(d){return!!d.expression&&d.expression.interpolated}function Xn(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function ou(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)&&xi(d)===ea}function sd(d){return d}function kc(d,s){const c=d.stops&&typeof d.stops[0][0]=="object",y=c||!(c||d.property!==void 0),w=d.type||(oo(s)?"exponential":"interval"),I=(function(ie){switch(ie.type){case"color":return Cr.parse;case"padding":return Tr.parse;case"numberArray":return rn.parse;case"colorArray":return sn.parse;default:return null}})(s);if(I&&((d=qr({},d)).stops&&(d.stops=d.stops.map((ie=>[ie[0],I(ie[1])]))),d.default=I(d.default?d.default:s.default)),d.colorSpace&&(A=d.colorSpace)!=="rgb"&&A!=="hcl"&&A!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var A;const O=(function(ie){switch(ie){case"exponential":return Ep;case"interval":return Cp;case"categorical":return Th;case"identity":return Tp;default:throw new Error(`Unknown function type "${ie}"`)}})(w);let j,Y;if(w==="categorical"){j=Object.create(null);for(const ie of d.stops)j[ie[0]]=ie[1];Y=typeof d.stops[0][0]}if(c){const ie={},ce=[];for(let Oe=0;Oe<d.stops.length;Oe++){const ze=d.stops[Oe],Ve=ze[0].zoom;ie[Ve]===void 0&&(ie[Ve]={zoom:Ve,type:d.type,property:d.property,default:d.default,stops:[]},ce.push(Ve)),ie[Ve].stops.push([ze[0].value,ze[1]])}const be=[];for(const Oe of ce)be.push([ie[Oe].zoom,kc(ie[Oe],s)]);const Ce={name:"linear"};return{kind:"composite",interpolationType:Ce,interpolationFactor:Mn.interpolationFactor.bind(void 0,Ce),zoomStops:be.map((Oe=>Oe[0])),evaluate:({zoom:Oe},ze)=>Ep({stops:be,base:d.base},s,Oe).evaluate(Oe,ze)}}if(y){const ie=w==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:ie,interpolationFactor:Mn.interpolationFactor.bind(void 0,ie),zoomStops:d.stops.map((ce=>ce[0])),evaluate:({zoom:ce})=>O(d,s,ce,j,Y)}}return{kind:"source",evaluate(ie,ce){const be=ce&&ce.properties?ce.properties[d.property]:void 0;return be===void 0?Bl(d.default,s.default):O(d,s,be,j,Y)}}}function Bl(d,s,c){return d!==void 0?d:s!==void 0?s:c!==void 0?c:void 0}function Th(d,s,c,y,w){return Bl(typeof c===w?y[c]:void 0,d.default,s.default)}function Cp(d,s,c){if(Xn(c)!=="number")return Bl(d.default,s.default);const y=d.stops.length;if(y===1||c<=d.stops[0][0])return d.stops[0][1];if(c>=d.stops[y-1][0])return d.stops[y-1][1];const w=bt(d.stops.map((I=>I[0])),c);return d.stops[w][1]}function Ep(d,s,c){const y=d.base!==void 0?d.base:1;if(Xn(c)!=="number")return Bl(d.default,s.default);const w=d.stops.length;if(w===1||c<=d.stops[0][0])return d.stops[0][1];if(c>=d.stops[w-1][0])return d.stops[w-1][1];const I=bt(d.stops.map((ie=>ie[0])),c),A=(function(ie,ce,be,Ce){const Oe=Ce-be,ze=ie-be;return Oe===0?0:ce===1?ze/Oe:(Math.pow(ce,ze)-1)/(Math.pow(ce,Oe)-1)})(c,y,d.stops[I][0],d.stops[I+1][0]),O=d.stops[I][1],j=d.stops[I+1][1],Y=On[s.type]||sd;return typeof O.evaluate=="function"?{evaluate(...ie){const ce=O.evaluate.apply(void 0,ie),be=j.evaluate.apply(void 0,ie);if(ce!==void 0&&be!==void 0)return Y(ce,be,A,d.colorSpace)}}:Y(O,j,A,d.colorSpace)}function Tp(d,s,c){switch(s.type){case"color":c=Cr.parse(c);break;case"formatted":c=dn.fromString(c.toString());break;case"resolvedImage":c=hi.fromString(c.toString());break;case"padding":c=Tr.parse(c);break;case"colorArray":c=sn.parse(c);break;case"numberArray":c=rn.parse(c);break;default:Xn(c)===s.type||s.type==="enum"&&s.values[c]||(c=void 0)}return Bl(c,d.default,s.default)}gn.register(In,{error:[{kind:"error"},[Sn],(d,[s])=>{throw new ii(s.evaluate(d))}],typeof:[Sn,[An],(d,[s])=>Ai(xi(s.evaluate(d)))],"to-rgba":[fi(kr,4),[Un],(d,[s])=>{const[c,y,w,I]=s.evaluate(d).rgb;return[255*c,255*y,255*w,I]}],rgb:[Un,[kr,kr,kr],Ui],rgba:[Un,[kr,kr,kr,kr],Ui],has:{type:Pn,overloads:[[[Sn],(d,[s])=>Ji(s.evaluate(d),d.properties())],[[Sn,ea],(d,[s,c])=>Ji(s.evaluate(d),c.evaluate(d))]]},get:{type:An,overloads:[[[Sn],(d,[s])=>Ha(s.evaluate(d),d.properties())],[[Sn,ea],(d,[s,c])=>Ha(s.evaluate(d),c.evaluate(d))]]},"feature-state":[An,[Sn],(d,[s])=>Ha(s.evaluate(d),d.featureState||{})],properties:[ea,[],d=>d.properties()],"geometry-type":[Sn,[],d=>d.geometryType()],id:[An,[],d=>d.id()],zoom:[kr,[],d=>d.globals.zoom],"heatmap-density":[kr,[],d=>d.globals.heatmapDensity||0],elevation:[kr,[],d=>d.globals.elevation||0],"line-progress":[kr,[],d=>d.globals.lineProgress||0],accumulated:[An,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[kr,va(kr),(d,s)=>{let c=0;for(const y of s)c+=y.evaluate(d);return c}],"*":[kr,va(kr),(d,s)=>{let c=1;for(const y of s)c*=y.evaluate(d);return c}],"-":{type:kr,overloads:[[[kr,kr],(d,[s,c])=>s.evaluate(d)-c.evaluate(d)],[[kr],(d,[s])=>-s.evaluate(d)]]},"/":[kr,[kr,kr],(d,[s,c])=>s.evaluate(d)/c.evaluate(d)],"%":[kr,[kr,kr],(d,[s,c])=>s.evaluate(d)%c.evaluate(d)],ln2:[kr,[],()=>Math.LN2],pi:[kr,[],()=>Math.PI],e:[kr,[],()=>Math.E],"^":[kr,[kr,kr],(d,[s,c])=>Math.pow(s.evaluate(d),c.evaluate(d))],sqrt:[kr,[kr],(d,[s])=>Math.sqrt(s.evaluate(d))],log10:[kr,[kr],(d,[s])=>Math.log(s.evaluate(d))/Math.LN10],ln:[kr,[kr],(d,[s])=>Math.log(s.evaluate(d))],log2:[kr,[kr],(d,[s])=>Math.log(s.evaluate(d))/Math.LN2],sin:[kr,[kr],(d,[s])=>Math.sin(s.evaluate(d))],cos:[kr,[kr],(d,[s])=>Math.cos(s.evaluate(d))],tan:[kr,[kr],(d,[s])=>Math.tan(s.evaluate(d))],asin:[kr,[kr],(d,[s])=>Math.asin(s.evaluate(d))],acos:[kr,[kr],(d,[s])=>Math.acos(s.evaluate(d))],atan:[kr,[kr],(d,[s])=>Math.atan(s.evaluate(d))],min:[kr,va(kr),(d,s)=>Math.min(...s.map((c=>c.evaluate(d))))],max:[kr,va(kr),(d,s)=>Math.max(...s.map((c=>c.evaluate(d))))],abs:[kr,[kr],(d,[s])=>Math.abs(s.evaluate(d))],round:[kr,[kr],(d,[s])=>{const c=s.evaluate(d);return c<0?-Math.round(-c):Math.round(c)}],floor:[kr,[kr],(d,[s])=>Math.floor(s.evaluate(d))],ceil:[kr,[kr],(d,[s])=>Math.ceil(s.evaluate(d))],"filter-==":[Pn,[Sn,An],(d,[s,c])=>d.properties()[s.value]===c.value],"filter-id-==":[Pn,[An],(d,[s])=>d.id()===s.value],"filter-type-==":[Pn,[Sn],(d,[s])=>d.geometryType()===s.value],"filter-<":[Pn,[Sn,An],(d,[s,c])=>{const y=d.properties()[s.value],w=c.value;return typeof y==typeof w&&y<w}],"filter-id-<":[Pn,[An],(d,[s])=>{const c=d.id(),y=s.value;return typeof c==typeof y&&c<y}],"filter->":[Pn,[Sn,An],(d,[s,c])=>{const y=d.properties()[s.value],w=c.value;return typeof y==typeof w&&y>w}],"filter-id->":[Pn,[An],(d,[s])=>{const c=d.id(),y=s.value;return typeof c==typeof y&&c>y}],"filter-<=":[Pn,[Sn,An],(d,[s,c])=>{const y=d.properties()[s.value],w=c.value;return typeof y==typeof w&&y<=w}],"filter-id-<=":[Pn,[An],(d,[s])=>{const c=d.id(),y=s.value;return typeof c==typeof y&&c<=y}],"filter->=":[Pn,[Sn,An],(d,[s,c])=>{const y=d.properties()[s.value],w=c.value;return typeof y==typeof w&&y>=w}],"filter-id->=":[Pn,[An],(d,[s])=>{const c=d.id(),y=s.value;return typeof c==typeof y&&c>=y}],"filter-has":[Pn,[An],(d,[s])=>s.value in d.properties()],"filter-has-id":[Pn,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[Pn,[fi(Sn)],(d,[s])=>s.value.indexOf(d.geometryType())>=0],"filter-id-in":[Pn,[fi(An)],(d,[s])=>s.value.indexOf(d.id())>=0],"filter-in-small":[Pn,[Sn,fi(An)],(d,[s,c])=>c.value.indexOf(d.properties()[s.value])>=0],"filter-in-large":[Pn,[Sn,fi(An)],(d,[s,c])=>(function(y,w,I,A){for(;I<=A;){const O=I+A>>1;if(w[O]===y)return!0;w[O]>y?A=O-1:I=O+1}return!1})(d.properties()[s.value],c.value,0,c.value.length-1)],all:{type:Pn,overloads:[[[Pn,Pn],(d,[s,c])=>s.evaluate(d)&&c.evaluate(d)],[va(Pn),(d,s)=>{for(const c of s)if(!c.evaluate(d))return!1;return!0}]]},any:{type:Pn,overloads:[[[Pn,Pn],(d,[s,c])=>s.evaluate(d)||c.evaluate(d)],[va(Pn),(d,s)=>{for(const c of s)if(c.evaluate(d))return!0;return!1}]]},"!":[Pn,[Pn],(d,[s])=>!s.evaluate(d)],"is-supported-script":[Pn,[Sn],(d,[s])=>{const c=d.globals&&d.globals.isSupportedScript;return!c||c(s.evaluate(d))}],upcase:[Sn,[Sn],(d,[s])=>s.evaluate(d).toUpperCase()],downcase:[Sn,[Sn],(d,[s])=>s.evaluate(d).toLowerCase()],concat:[Sn,va(An),(d,s)=>s.map((c=>os(c.evaluate(d)))).join("")],"resolved-locale":[Sn,[Ca],(d,[s])=>s.evaluate(d).resolvedLocale()]});class Af{constructor(s,c,y){this.expression=s,this._warningHistory={},this._evaluator=new nu,this._defaultValue=c?(function(w){if(w.type==="color"&&ou(w.default))return new Cr(0,0,0,0);switch(w.type){case"color":return Cr.parse(w.default)||null;case"padding":return Tr.parse(w.default)||null;case"numberArray":return rn.parse(w.default)||null;case"colorArray":return sn.parse(w.default)||null;case"variableAnchorOffsetCollection":return sa.parse(w.default)||null;case"projectionDefinition":return ai.parse(w.default)||null;default:return w.default===void 0?null:w.default}})(c):null,this._enumValues=c&&c.type==="enum"?c.values:null,this._globalState=y}evaluateWithoutErrorHandling(s,c,y,w,I,A){return this._globalState&&(s=ud(s,this._globalState)),this._evaluator.globals=s,this._evaluator.feature=c,this._evaluator.featureState=y,this._evaluator.canonical=w,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(s,c,y,w,I,A){this._globalState&&(s=ud(s,this._globalState)),this._evaluator.globals=s,this._evaluator.feature=c||null,this._evaluator.featureState=y||null,this._evaluator.canonical=w,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=A||null;try{const O=this.expression.evaluate(this._evaluator);if(O==null||typeof O=="number"&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new ii(`Expected value to be one of ${Object.keys(this._enumValues).map((j=>JSON.stringify(j))).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function oc(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in In}function ld(d,s,c){const y=new Ja(In,To,[],s?(function(I){const A={color:Un,string:Sn,number:kr,enum:Sn,boolean:Pn,formatted:Ni,padding:Ho,numberArray:mo,colorArray:pa,projectionDefinition:Ki,resolvedImage:Oa,variableAnchorOffsetCollection:zs};return I.type==="array"?fi(A[I.value]||An,I.length):A[I.type]})(s):void 0),w=y.parse(d,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return w?Fl(new Af(w,s,c)):us(y.errors)}class Ih{constructor(s,c,y){this.kind=s,this._styleExpression=c,this.isStateDependent=s!=="constant"&&!il(c.expression),this.globalStateRefs=Mc(c.expression),this._globalState=y}evaluateWithoutErrorHandling(s,c,y,w,I,A){return this._globalState&&(s=ud(s,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(s,c,y,w,I,A)}evaluate(s,c,y,w,I,A){return this._globalState&&(s=ud(s,this._globalState)),this._styleExpression.evaluate(s,c,y,w,I,A)}}class Ip{constructor(s,c,y,w,I){this.kind=s,this.zoomStops=y,this._styleExpression=c,this.isStateDependent=s!=="camera"&&!il(c.expression),this.globalStateRefs=Mc(c.expression),this.interpolationType=w,this._globalState=I}evaluateWithoutErrorHandling(s,c,y,w,I,A){return this._globalState&&(s=ud(s,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(s,c,y,w,I,A)}evaluate(s,c,y,w,I,A){return this._globalState&&(s=ud(s,this._globalState)),this._styleExpression.evaluate(s,c,y,w,I,A)}interpolationFactor(s,c,y){return this.interpolationType?Mn.interpolationFactor(this.interpolationType,s,c,y):0}}function Ph(d,s,c){const y=ld(d,s,c);if(y.result==="error")return y;const w=y.value.expression,I=As(w);if(!I&&!yl(s))return us([new En("","data expressions not supported")]);const A=Nl(w,["zoom"]);if(!A&&!vl(s))return us([new En("","zoom expressions not supported")]);const O=kh(w);return O||A?O instanceof En?us([O]):O instanceof Mn&&!oo(s)?us([new En("",'"interpolate" expressions cannot be used with this property')]):Fl(O?new Ip(I?"camera":"composite",y.value,O.labels,O instanceof Mn?O.interpolation:void 0,c):new Ih(I?"constant":"source",y.value,c)):us([new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ah{constructor(s,c){this._parameters=s,this._specification=c,qr(this,kc(this._parameters,this._specification))}static deserialize(s){return new Ah(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function kh(d){let s=null;if(d instanceof ki)s=kh(d.result);else if(d instanceof Mi){for(const c of d.args)if(s=kh(c),s)break}else(d instanceof Ft||d instanceof Mn)&&d.input instanceof gn&&d.input.name==="zoom"&&(s=d);return s instanceof En||d.eachChild((c=>{const y=kh(c);y instanceof En?s=y:!s&&y?s=new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&y&&s!==y&&(s=new En("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),s}function Mc(d,s=new Set){return d instanceof Bn&&s.add(d.key),d.eachChild((c=>{Mc(c,s)})),s}function ud(d,s){const{zoom:c,heatmapDensity:y,elevation:w,lineProgress:I,isSupportedScript:A,accumulated:O}=d??{};return{zoom:c,heatmapDensity:y,elevation:w,lineProgress:I,isSupportedScript:A,accumulated:O,globalState:s}}function Pp(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const s of d.slice(1))if(!Pp(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const Ap={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function cd(d,s){if(d==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Pp(d)||(d=Mf(d));const c=ld(d,Ap,s);if(c.result==="error")throw new Error(c.value.map((y=>`${y.key}: ${y.message}`)).join(", "));return{filter:(y,w,I)=>c.value.evaluate(y,w,{},I),needGeometry:Ym(d),getGlobalStateRefs:()=>Mc(c.value.expression)}}function kf(d,s){return d<s?-1:d>s?1:0}function Ym(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let s=1;s<d.length;s++)if(Ym(d[s]))return!0;return!1}function Mf(d){if(!d)return!0;const s=d[0];return d.length<=1?s!=="any":s==="=="?Lf(d[1],d[2],"=="):s==="!="?Rf(Lf(d[1],d[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Lf(d[1],d[2],s):s==="any"?(c=d.slice(1),["any"].concat(c.map(Mf))):s==="all"?["all"].concat(d.slice(1).map(Mf)):s==="none"?["all"].concat(d.slice(1).map(Mf).map(Rf)):s==="in"?Zm(d[1],d.slice(2)):s==="!in"?Rf(Zm(d[1],d.slice(2))):s==="has"?Km(d[1]):s!=="!has"||Rf(Km(d[1]));var c}function Lf(d,s,c){switch(d){case"$type":return[`filter-type-${c}`,s];case"$id":return[`filter-id-${c}`,s];default:return[`filter-${c}`,d,s]}}function Zm(d,s){if(s.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some((c=>typeof c!=typeof s[0]))?["filter-in-large",d,["literal",s.sort(kf)]]:["filter-in-small",d,["literal",s]]}}function Km(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Rf(d){return["!",d]}function Mh(d){const s=typeof d;if(s==="number"||s==="boolean"||s==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let w="[";for(const I of d)w+=`${Mh(I)},`;return`${w}]`}const c=Object.keys(d).sort();let y="{";for(let w=0;w<c.length;w++)y+=`${JSON.stringify(c[w])}:${Mh(d[c[w]])},`;return`${y}}`}function sc(d){let s="";for(const c of Hr)s+=`/${Mh(d[c])}`;return s}function su(d){const s=d.value;return s?[new zt(d.key,s,"constants have been deprecated as of v8")]:[]}function la(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function dd(d){if(Array.isArray(d))return d.map(dd);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const s={};for(const c in d)s[c]=dd(d[c]);return s}return la(d)}function bl(d){const s=d.key,c=d.value,y=d.valueSpec||{},w=d.objectElementValidators||{},I=d.style,A=d.styleSpec,O=d.validateSpec;let j=[];const Y=Xn(c);if(Y!=="object")return[new zt(s,c,`object expected, ${Y} found`)];for(const ie in c){const ce=ie.split(".")[0],be=It(y,ce)||y["*"];let Ce;if(It(w,ce))Ce=w[ce];else if(It(y,ce)){if(c[ie]===void 0)continue;Ce=O}else if(w["*"])Ce=w["*"];else{if(!y["*"]){j.push(new zt(s,c[ie],`unknown property "${ie}"`));continue}Ce=O}j=j.concat(Ce({key:(s&&`${s}.`)+ie,value:c[ie],valueSpec:be,style:I,styleSpec:A,object:c,objectKey:ie,validateSpec:O},c))}for(const ie in y)w[ie]||y[ie].required&&y[ie].default===void 0&&c[ie]===void 0&&j.push(new zt(s,c,`missing required property "${ie}"`));return j}function Iu(d){const s=d.value,c=d.valueSpec,y=d.style,w=d.styleSpec,I=d.key,A=d.arrayElementValidator||d.validateSpec;if(Xn(s)!=="array")return[new zt(I,s,`array expected, ${Xn(s)} found`)];if(c.length&&s.length!==c.length)return[new zt(I,s,`array length ${c.length} expected, length ${s.length} found`)];let O={type:c.value,values:c.values};w.$version<7&&(O.function=c.function),Xn(c.value)==="object"&&(O=c.value);let j=[];for(let Y=0;Y<s.length;Y++)j=j.concat(A({array:s,arrayIndex:Y,value:s[Y],valueSpec:O,validateSpec:d.validateSpec,style:y,styleSpec:w,key:`${I}[${Y}]`}));return j}function Hs(d){const s=d.key,c=d.value,y=d.valueSpec;let w=Xn(c);return w==="number"&&c!=c&&(w="NaN"),w!=="number"?[new zt(s,c,`number expected, ${w} found`)]:"minimum"in y&&c<y.minimum?[new zt(s,c,`${c} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&c>y.maximum?[new zt(s,c,`${c} is greater than the maximum value ${y.maximum}`)]:[]}function Lh(d){const s=d.valueSpec,c=la(d.value.type);let y,w,I,A={};const O=c!=="categorical"&&d.value.property===void 0,j=!O,Y=Xn(d.value.stops)==="array"&&Xn(d.value.stops[0])==="array"&&Xn(d.value.stops[0][0])==="object",ie=bl({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Ce){if(c==="identity")return[new zt(Ce.key,Ce.value,'identity function may not have a "stops" property')];let Oe=[];const ze=Ce.value;return Oe=Oe.concat(Iu({key:Ce.key,value:ze,valueSpec:Ce.valueSpec,validateSpec:Ce.validateSpec,style:Ce.style,styleSpec:Ce.styleSpec,arrayElementValidator:ce})),Xn(ze)==="array"&&ze.length===0&&Oe.push(new zt(Ce.key,ze,"array must have at least one stop")),Oe},default:function(Ce){return Ce.validateSpec({key:Ce.key,value:Ce.value,valueSpec:s,validateSpec:Ce.validateSpec,style:Ce.style,styleSpec:Ce.styleSpec})}}});return c==="identity"&&O&&ie.push(new zt(d.key,d.value,'missing required property "property"')),c==="identity"||d.value.stops||ie.push(new zt(d.key,d.value,'missing required property "stops"')),c==="exponential"&&d.valueSpec.expression&&!oo(d.valueSpec)&&ie.push(new zt(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(j&&!yl(d.valueSpec)?ie.push(new zt(d.key,d.value,"property functions not supported")):O&&!vl(d.valueSpec)&&ie.push(new zt(d.key,d.value,"zoom functions not supported"))),c!=="categorical"&&!Y||d.value.property!==void 0||ie.push(new zt(d.key,d.value,'"property" property is required')),ie;function ce(Ce){let Oe=[];const ze=Ce.value,Ve=Ce.key;if(Xn(ze)!=="array")return[new zt(Ve,ze,`array expected, ${Xn(ze)} found`)];if(ze.length!==2)return[new zt(Ve,ze,`array length 2 expected, length ${ze.length} found`)];if(Y){if(Xn(ze[0])!=="object")return[new zt(Ve,ze,`object expected, ${Xn(ze[0])} found`)];if(ze[0].zoom===void 0)return[new zt(Ve,ze,"object stop key must have zoom")];if(ze[0].value===void 0)return[new zt(Ve,ze,"object stop key must have value")];if(I&&I>la(ze[0].zoom))return[new zt(Ve,ze[0].zoom,"stop zoom values must appear in ascending order")];la(ze[0].zoom)!==I&&(I=la(ze[0].zoom),w=void 0,A={}),Oe=Oe.concat(bl({key:`${Ve}[0]`,value:ze[0],valueSpec:{zoom:{}},validateSpec:Ce.validateSpec,style:Ce.style,styleSpec:Ce.styleSpec,objectElementValidators:{zoom:Hs,value:be}}))}else Oe=Oe.concat(be({key:`${Ve}[0]`,value:ze[0],validateSpec:Ce.validateSpec,style:Ce.style,styleSpec:Ce.styleSpec},ze));return oc(dd(ze[1]))?Oe.concat([new zt(`${Ve}[1]`,ze[1],"expressions are not allowed in function stops.")]):Oe.concat(Ce.validateSpec({key:`${Ve}[1]`,value:ze[1],valueSpec:s,validateSpec:Ce.validateSpec,style:Ce.style,styleSpec:Ce.styleSpec}))}function be(Ce,Oe){const ze=Xn(Ce.value),Ve=la(Ce.value),et=Ce.value!==null?Ce.value:Oe;if(y){if(ze!==y)return[new zt(Ce.key,et,`${ze} stop domain type must match previous stop domain type ${y}`)]}else y=ze;if(ze!=="number"&&ze!=="string"&&ze!=="boolean")return[new zt(Ce.key,et,"stop domain value must be a number, string, or boolean")];if(ze!=="number"&&c!=="categorical"){let Et=`number expected, ${ze} found`;return yl(s)&&c===void 0&&(Et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new zt(Ce.key,et,Et)]}return c!=="categorical"||ze!=="number"||isFinite(Ve)&&Math.floor(Ve)===Ve?c!=="categorical"&&ze==="number"&&w!==void 0&&Ve<w?[new zt(Ce.key,et,"stop domain values must appear in ascending order")]:(w=Ve,c==="categorical"&&Ve in A?[new zt(Ce.key,et,"stop domain values must be unique")]:(A[Ve]=!0,[])):[new zt(Ce.key,et,`integer expected, found ${Ve}`)]}}function Lc(d){const s=(d.expressionContext==="property"?Ph:ld)(dd(d.value),d.valueSpec);if(s.result==="error")return s.value.map((y=>new zt(`${d.key}${y.key}`,d.value,y.message)));const c=s.value.expression||s.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!c.outputDefined())return[new zt(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!il(c))return[new zt(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!il(c))return[new zt(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Nl(c,["zoom","feature-state"]))return[new zt(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!As(c))return[new zt(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qd(d){const s=d.key,c=d.value,y=Xn(c);return y!=="string"?[new zt(s,c,`color expected, ${y} found`)]:Cr.parse(String(c))?[]:[new zt(s,c,`color expected, "${c}" found`)]}function Rc(d){const s=d.key,c=d.value,y=d.valueSpec,w=[];return Array.isArray(y.values)?y.values.indexOf(la(c))===-1&&w.push(new zt(s,c,`expected one of [${y.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(y.values).indexOf(la(c))===-1&&w.push(new zt(s,c,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(c)} found`)),w}function fd(d){return Pp(dd(d.value))?Lc(qr({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):kp(d)}function kp(d){const s=d.value,c=d.key;if(Xn(s)!=="array")return[new zt(c,s,`array expected, ${Xn(s)} found`)];const y=d.styleSpec;let w,I=[];if(s.length<1)return[new zt(c,s,"filter array must have at least 1 element")];switch(I=I.concat(Rc({key:`${c}[0]`,value:s[0],valueSpec:y.filter_operator,style:d.style,styleSpec:d.styleSpec})),la(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&la(s[1])==="$type"&&I.push(new zt(c,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&I.push(new zt(c,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(w=Xn(s[1]),w!=="string"&&I.push(new zt(`${c}[1]`,s[1],`string expected, ${w} found`)));for(let A=2;A<s.length;A++)w=Xn(s[A]),la(s[1])==="$type"?I=I.concat(Rc({key:`${c}[${A}]`,value:s[A],valueSpec:y.geometry_type,style:d.style,styleSpec:d.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&I.push(new zt(`${c}[${A}]`,s[A],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let A=1;A<s.length;A++)I=I.concat(kp({key:`${c}[${A}]`,value:s[A],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":w=Xn(s[1]),s.length!==2?I.push(new zt(c,s,`filter array for "${s[0]}" operator must have 2 elements`)):w!=="string"&&I.push(new zt(`${c}[1]`,s[1],`string expected, ${w} found`))}return I}function Jm(d,s){const c=d.key,y=d.validateSpec,w=d.style,I=d.styleSpec,A=d.value,O=d.objectKey,j=I[`${s}_${d.layerType}`];if(!j)return[];const Y=O.match(/^(.*)-transition$/);if(s==="paint"&&Y&&j[Y[1]]&&j[Y[1]].transition)return y({key:c,value:A,valueSpec:I.transition,style:w,styleSpec:I});const ie=d.valueSpec||j[O];if(!ie)return[new zt(c,A,`unknown property "${O}"`)];let ce;if(Xn(A)==="string"&&yl(ie)&&!ie.tokens&&(ce=/^{([^}]+)}$/.exec(A)))return[new zt(c,A,`"${O}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ce[1])} }\`.`)];const be=[];return d.layerType==="symbol"&&O==="text-font"&&ou(dd(A))&&la(A.type)==="identity"&&be.push(new zt(c,A,'"text-font" does not support identity functions')),be.concat(y({key:d.key,value:A,valueSpec:ie,style:w,styleSpec:I,expressionContext:"property",propertyType:s,propertyKey:O}))}function Df(d){return Jm(d,"paint")}function Of(d){return Jm(d,"layout")}function Vd(d){let s=[];const c=d.value,y=d.key,w=d.style,I=d.styleSpec;if(Xn(c)!=="object")return[new zt(y,c,`object expected, ${Xn(c)} found`)];c.type||c.ref||s.push(new zt(y,c,'either "type" or "ref" is required'));let A=la(c.type);const O=la(c.ref);if(c.id){const j=la(c.id);for(let Y=0;Y<d.arrayIndex;Y++){const ie=w.layers[Y];la(ie.id)===j&&s.push(new zt(y,c.id,`duplicate layer id "${c.id}", previously used at line ${ie.id.__line__}`))}}if("ref"in c){let j;["type","source","source-layer","filter","layout"].forEach((Y=>{Y in c&&s.push(new zt(y,c[Y],`"${Y}" is prohibited for ref layers`))})),w.layers.forEach((Y=>{la(Y.id)===O&&(j=Y)})),j?j.ref?s.push(new zt(y,c.ref,"ref cannot reference another ref layer")):A=la(j.type):s.push(new zt(y,c.ref,`ref layer "${O}" not found`))}else if(A!=="background")if(c.source){const j=w.sources&&w.sources[c.source],Y=j&&la(j.type);j?Y==="vector"&&A==="raster"?s.push(new zt(y,c.source,`layer "${c.id}" requires a raster source`)):Y!=="raster-dem"&&A==="hillshade"||Y!=="raster-dem"&&A==="color-relief"?s.push(new zt(y,c.source,`layer "${c.id}" requires a raster-dem source`)):Y==="raster"&&A!=="raster"?s.push(new zt(y,c.source,`layer "${c.id}" requires a vector source`)):Y!=="vector"||c["source-layer"]?Y==="raster-dem"&&A!=="hillshade"&&A!=="color-relief"?s.push(new zt(y,c.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):A!=="line"||!c.paint||!c.paint["line-gradient"]||Y==="geojson"&&j.lineMetrics||s.push(new zt(y,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new zt(y,c,`layer "${c.id}" must specify a "source-layer"`)):s.push(new zt(y,c.source,`source "${c.source}" not found`))}else s.push(new zt(y,c,'missing required property "source"'));return s=s.concat(bl({key:y,value:c,valueSpec:I.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${y}.type`,value:c.type,valueSpec:I.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:c,objectKey:"type"}),filter:fd,layout:j=>bl({layer:c,key:j.key,value:j.value,style:j.style,styleSpec:j.styleSpec,validateSpec:j.validateSpec,objectElementValidators:{"*":Y=>Of(qr({layerType:A},Y))}}),paint:j=>bl({layer:c,key:j.key,value:j.value,style:j.style,styleSpec:j.styleSpec,validateSpec:j.validateSpec,objectElementValidators:{"*":Y=>Df(qr({layerType:A},Y))}})}})),s}function Vu(d){const s=d.value,c=d.key,y=Xn(s);return y!=="string"?[new zt(c,s,`string expected, ${y} found`)]:[]}const Mp={promoteId:function({key:d,value:s}){if(Xn(s)==="string")return Vu({key:d,value:s});{const c=[];for(const y in s)c.push(...Vu({key:`${d}.${y}`,value:s[y]}));return c}}};function Rh(d){const s=d.value,c=d.key,y=d.styleSpec,w=d.style,I=d.validateSpec;if(!s.type)return[new zt(c,s,'"type" is required')];const A=la(s.type);let O;switch(A){case"vector":case"raster":return O=bl({key:c,value:s,valueSpec:y[`source_${A.replace("-","_")}`],style:d.style,styleSpec:y,objectElementValidators:Mp,validateSpec:I}),O;case"raster-dem":return O=(function(j){var Y;const ie=(Y=j.sourceName)!==null&&Y!==void 0?Y:"",ce=j.value,be=j.styleSpec,Ce=be.source_raster_dem,Oe=j.style;let ze=[];const Ve=Xn(ce);if(ce===void 0)return ze;if(Ve!=="object")return ze.push(new zt("source_raster_dem",ce,`object expected, ${Ve} found`)),ze;const et=la(ce.encoding)==="custom",Et=["redFactor","greenFactor","blueFactor","baseShift"],rt=j.value.encoding?`"${j.value.encoding}"`:"Default";for(const ut in ce)!et&&Et.includes(ut)?ze.push(new zt(ut,ce[ut],`In "${ie}": "${ut}" is only valid when "encoding" is set to "custom". ${rt} encoding found`)):Ce[ut]?ze=ze.concat(j.validateSpec({key:ut,value:ce[ut],valueSpec:Ce[ut],validateSpec:j.validateSpec,style:Oe,styleSpec:be})):ze.push(new zt(ut,ce[ut],`unknown property "${ut}"`));return ze})({sourceName:c,value:s,style:d.style,styleSpec:y,validateSpec:I}),O;case"geojson":if(O=bl({key:c,value:s,valueSpec:y.source_geojson,style:w,styleSpec:y,validateSpec:I,objectElementValidators:Mp}),s.cluster)for(const j in s.clusterProperties){const[Y,ie]=s.clusterProperties[j],ce=typeof Y=="string"?[Y,["accumulated"],["get",j]]:Y;O.push(...Lc({key:`${c}.${j}.map`,value:ie,expressionContext:"cluster-map"})),O.push(...Lc({key:`${c}.${j}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return O;case"video":return bl({key:c,value:s,valueSpec:y.source_video,style:w,validateSpec:I,styleSpec:y});case"image":return bl({key:c,value:s,valueSpec:y.source_image,style:w,validateSpec:I,styleSpec:y});case"canvas":return[new zt(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rc({key:`${c}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Nf(d){const s=d.value,c=d.styleSpec,y=c.light,w=d.style;let I=[];const A=Xn(s);if(s===void 0)return I;if(A!=="object")return I=I.concat([new zt("light",s,`object expected, ${A} found`)]),I;for(const O in s){const j=O.match(/^(.*)-transition$/);I=I.concat(j&&y[j[1]]&&y[j[1]].transition?d.validateSpec({key:O,value:s[O],valueSpec:c.transition,validateSpec:d.validateSpec,style:w,styleSpec:c}):y[O]?d.validateSpec({key:O,value:s[O],valueSpec:y[O],validateSpec:d.validateSpec,style:w,styleSpec:c}):[new zt(O,s[O],`unknown property "${O}"`)])}return I}function Qm(d){const s=d.value,c=d.styleSpec,y=c.sky,w=d.style,I=Xn(s);if(s===void 0)return[];if(I!=="object")return[new zt("sky",s,`object expected, ${I} found`)];let A=[];for(const O in s)A=A.concat(y[O]?d.validateSpec({key:O,value:s[O],valueSpec:y[O],style:w,styleSpec:c}):[new zt(O,s[O],`unknown property "${O}"`)]);return A}function Lp(d){const s=d.value,c=d.styleSpec,y=c.terrain,w=d.style;let I=[];const A=Xn(s);if(s===void 0)return I;if(A!=="object")return I=I.concat([new zt("terrain",s,`object expected, ${A} found`)]),I;for(const O in s)I=I.concat(y[O]?d.validateSpec({key:O,value:s[O],valueSpec:y[O],validateSpec:d.validateSpec,style:w,styleSpec:c}):[new zt(O,s[O],`unknown property "${O}"`)]);return I}function Rp(d){let s=[];const c=d.value,y=d.key;if(Array.isArray(c)){const w=[],I=[];for(const A in c)c[A].id&&w.includes(c[A].id)&&s.push(new zt(y,c,`all the sprites' ids must be unique, but ${c[A].id} is duplicated`)),w.push(c[A].id),c[A].url&&I.includes(c[A].url)&&s.push(new zt(y,c,`all the sprites' URLs must be unique, but ${c[A].url} is duplicated`)),I.push(c[A].url),s=s.concat(bl({key:`${y}[${A}]`,value:c[A],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return s}return Vu({key:y,value:c})}function eg(d){return!!d&&d.constructor===Object}function Dp(d){return eg(d.value)?[]:[new zt(d.key,d.value,`object expected, ${Xn(d.value)} found`)]}const Dh={"*":()=>[],array:Iu,boolean:function(d){const s=d.value,c=d.key,y=Xn(s);return y!=="boolean"?[new zt(c,s,`boolean expected, ${y} found`)]:[]},number:Hs,color:qd,constants:su,enum:Rc,filter:fd,function:Lh,layer:Vd,object:bl,source:Rh,light:Nf,sky:Qm,terrain:Lp,projection:function(d){const s=d.value,c=d.styleSpec,y=c.projection,w=d.style,I=Xn(s);if(s===void 0)return[];if(I!=="object")return[new zt("projection",s,`object expected, ${I} found`)];let A=[];for(const O in s)A=A.concat(y[O]?d.validateSpec({key:O,value:s[O],valueSpec:y[O],style:w,styleSpec:c}):[new zt(O,s[O],`unknown property "${O}"`)]);return A},projectionDefinition:function(d){const s=d.key;let c=d.value;c=c instanceof String?c.valueOf():c;const y=Xn(c);return y!=="array"||(function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"})(c)||(function(w){return!!["interpolate","step","literal"].includes(w[0])})(c)?["array","string"].includes(y)?[]:[new zt(s,c,`projection expected, invalid type "${y}" found`)]:[new zt(s,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:Vu,formatted:function(d){return Vu(d).length===0?[]:Lc(d)},resolvedImage:function(d){return Vu(d).length===0?[]:Lc(d)},padding:function(d){const s=d.key,c=d.value;if(Xn(c)==="array"){if(c.length<1||c.length>4)return[new zt(s,c,`padding requires 1 to 4 values; ${c.length} values found`)];const y={type:"number"};let w=[];for(let I=0;I<c.length;I++)w=w.concat(d.validateSpec({key:`${s}[${I}]`,value:c[I],validateSpec:d.validateSpec,valueSpec:y}));return w}return Hs({key:s,value:c,valueSpec:{}})},numberArray:function(d){const s=d.key,c=d.value;if(Xn(c)==="array"){const y={type:"number"};if(c.length<1)return[new zt(s,c,"array length at least 1 expected, length 0 found")];let w=[];for(let I=0;I<c.length;I++)w=w.concat(d.validateSpec({key:`${s}[${I}]`,value:c[I],validateSpec:d.validateSpec,valueSpec:y}));return w}return Hs({key:s,value:c,valueSpec:{}})},colorArray:function(d){const s=d.key,c=d.value;if(Xn(c)==="array"){if(c.length<1)return[new zt(s,c,"array length at least 1 expected, length 0 found")];let y=[];for(let w=0;w<c.length;w++)y=y.concat(qd({key:`${s}[${w}]`,value:c[w]}));return y}return qd({key:s,value:c})},variableAnchorOffsetCollection:function(d){const s=d.key,c=d.value,y=Xn(c),w=d.styleSpec;if(y!=="array"||c.length<1||c.length%2!=0)return[new zt(s,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let I=[];for(let A=0;A<c.length;A+=2)I=I.concat(Rc({key:`${s}[${A}]`,value:c[A],valueSpec:w.layout_symbol["text-anchor"]})),I=I.concat(Iu({key:`${s}[${A+1}]`,value:c[A+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:w}));return I},sprite:Rp,state:Dp,fontFaces:function(d){const s=d.key,c=d.value,y=d.validateSpec,w=d.styleSpec,I=d.style;if(!eg(c))return[new zt(s,c,`object expected, ${Xn(c)} found`)];const A=[];for(const O in c){const j=c[O],Y=Xn(j);if(Y==="string")A.push(...Vu({key:`${s}.${O}`,value:j}));else if(Y==="array"){const ie={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[ce,be]of j.entries())A.push(...bl({key:`${s}.${O}[${ce}]`,value:be,valueSpec:ie,styleSpec:w,style:I,validateSpec:y}))}else A.push(new zt(`${s}.${O}`,j,`string or array expected, ${Y} found`))}return A}};function Pu(d){const s=d.value,c=d.valueSpec,y=d.styleSpec;return d.validateSpec=Pu,c.expression&&ou(la(s))?Lh(d):c.expression&&oc(dd(s))?Lc(d):c.type&&Dh[c.type]?Dh[c.type](d):bl(qr({},d,{valueSpec:c.type?y[c.type]:c}))}function tg(d){const s=d.value,c=d.key,y=Vu(d);return y.length||(s.indexOf("{fontstack}")===-1&&y.push(new zt(c,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&y.push(new zt(c,s,'"glyphs" url must include a "{range}" token'))),y}function lu(d,s=kt){let c=[];return c=c.concat(Pu({key:"",value:d,valueSpec:s.$root,styleSpec:s,style:d,validateSpec:Pu,objectElementValidators:{glyphs:tg,"*":()=>[]}})),d.constants&&(c=c.concat(su({key:"constants",value:d.constants}))),G(c)}function uu(d){return function(s){return d(Object.assign({},s,{validateSpec:Pu}))}}function G(d){return[].concat(d).sort(((s,c)=>s.line-c.line))}function J(d){return function(...s){return G(d.apply(this,s))}}lu.source=J(uu(Rh)),lu.sprite=J(uu(Rp)),lu.glyphs=J(uu(tg)),lu.light=J(uu(Nf)),lu.sky=J(uu(Qm)),lu.terrain=J(uu(Lp)),lu.state=J(uu(Dp)),lu.layer=J(uu(Vd)),lu.filter=J(uu(fd)),lu.paintProperty=J(uu(Df)),lu.layoutProperty=J(uu(Of));const ge={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class Pe{constructor(s,c){this._globalState=c,this.setValue(s)}evaluate(){var s;return(s=this._literalValue)!==null&&s!==void 0?s:this._compiledValue.evaluate({})}setValue(s){if(s==null||s==="visible"||s==="none")return this._literalValue=s==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const c=ld(s,ge,this._globalState);if(c.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(c.value.map((y=>`${y.key}: ${y.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=c.value,this._globalStateRefs=Mc(c.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Ye=kt,Qe=lu,nt=Qe.light,lt=Qe.sky,vt=Qe.paintProperty,Tt=Qe.layoutProperty;function Ht(d,s){let c=!1;if(s&&s.length)for(const y of s)d.fire(new tn(new Error(y.message))),c=!0;return c}class pr{constructor(s,c,y){const w=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const A=new Int32Array(this.arrayBuffer);s=A[0],this.d=(c=A[1])+2*(y=A[2]);for(let j=0;j<this.d*this.d;j++){const Y=A[3+j],ie=A[3+j+1];w.push(Y===ie?null:A.subarray(Y,ie))}const O=A[3+w.length+1];this.keys=A.subarray(A[3+w.length],O),this.bboxes=A.subarray(O),this.insert=this._insertReadonly}else{this.d=c+2*y;for(let A=0;A<this.d*this.d;A++)w.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=s,this.padding=y,this.scale=c/s,this.uid=0;const I=y/c*s;this.min=-I,this.max=s+I}insert(s,c,y,w,I){this._forEachCell(c,y,w,I,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(I)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,c,y,w,I,A){this.cells[I].push(A)}query(s,c,y,w,I){const A=this.min,O=this.max;if(s<=A&&c<=A&&O<=y&&O<=w&&!I)return Array.prototype.slice.call(this.keys);{const j=[];return this._forEachCell(s,c,y,w,this._queryCell,j,{},I),j}}_queryCell(s,c,y,w,I,A,O,j){const Y=this.cells[I];if(Y!==null){const ie=this.keys,ce=this.bboxes;for(let be=0;be<Y.length;be++){const Ce=Y[be];if(O[Ce]===void 0){const Oe=4*Ce;(j?j(ce[Oe+0],ce[Oe+1],ce[Oe+2],ce[Oe+3]):s<=ce[Oe+2]&&c<=ce[Oe+3]&&y>=ce[Oe+0]&&w>=ce[Oe+1])?(O[Ce]=!0,A.push(ie[Ce])):O[Ce]=!1}}}}_forEachCell(s,c,y,w,I,A,O,j){const Y=this._convertToCellCoord(s),ie=this._convertToCellCoord(c),ce=this._convertToCellCoord(y),be=this._convertToCellCoord(w);for(let Ce=Y;Ce<=ce;Ce++)for(let Oe=ie;Oe<=be;Oe++){const ze=this.d*Oe+Ce;if((!j||j(this._convertFromCellCoord(Ce),this._convertFromCellCoord(Oe),this._convertFromCellCoord(Ce+1),this._convertFromCellCoord(Oe+1)))&&I.call(this,s,c,y,w,ze,A,O,j))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,c=3+this.cells.length+1+1;let y=0;for(let A=0;A<this.cells.length;A++)y+=this.cells[A].length;const w=new Int32Array(c+y+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let I=c;for(let A=0;A<s.length;A++){const O=s[A];w[3+A]=I,w.set(O,I),I+=O.length}return w[3+s.length]=I,w.set(this.keys,I),I+=this.keys.length,w[3+s.length+1]=I,w.set(this.bboxes,I),I+=this.bboxes.length,w.buffer}static serialize(s,c){const y=s.toArrayBuffer();return c&&c.push(y),{buffer:y}}static deserialize(s){return new pr(s.buffer)}}const wt={};function Pt(d,s,c={}){if(wt[d])throw new Error(`${d} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:d,writeable:!1}),wt[d]={klass:s,omit:c.omit||[],shallow:c.shallow||[]}}Pt("Object",Object),Pt("Set",Set),Pt("TransferableGridIndex",pr),Pt("Color",Cr),Pt("Error",Error),Pt("AJAXError",yt),Pt("ResolvedImage",hi),Pt("StylePropertyFunction",Ah),Pt("StyleExpression",Af,{omit:["_evaluator"]}),Pt("ZoomDependentExpression",Ip),Pt("ZoomConstantExpression",Ih),Pt("CompoundExpression",gn,{omit:["_evaluate"]});for(const d in In)In[d]._classRegistryKey||Pt(`Expression_${d}`,In[d]);function or(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Ar(d){return d.$name||d.constructor._classRegistryKey}function dr(d){return!(function(s){if(s===null||typeof s!="object")return!1;const c=Ar(s);return!(!c||c==="Object")})(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||or(d)||Wt(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function Mr(d,s){if(dr(d))return(or(d)||Wt(d))&&s&&s.push(d),ArrayBuffer.isView(d)&&s&&s.push(d.buffer),d instanceof ImageData&&s&&s.push(d.data.buffer),d;if(Array.isArray(d)){const I=[];for(const A of d)I.push(Mr(A,s));return I}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const c=Ar(d);if(!c)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!wt[c])throw new Error(`${c} is not registered.`);const{klass:y}=wt[c],w=y.serialize?y.serialize(d,s):{};if(y.serialize){if(s&&w===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const I in d){if(!d.hasOwnProperty(I)||wt[c].omit.indexOf(I)>=0)continue;const A=d[I];w[I]=wt[c].shallow.indexOf(I)>=0?A:Mr(A,s)}d instanceof Error&&(w.message=d.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(w.$name=c),w}function Rr(d){if(dr(d))return d;if(Array.isArray(d))return d.map(Rr);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const s=Ar(d)||"Object";if(!wt[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:c}=wt[s];if(!c)throw new Error(`can't deserialize unregistered class ${s}`);if(c.deserialize)return c.deserialize(d);const y=Object.create(c.prototype);for(const w of Object.keys(d)){if(w==="$name")continue;const I=d[w];y[w]=wt[s].shallow.indexOf(w)>=0?I:Rr(I)}return y}class Jr{constructor(){this.first=!0}update(s,c){const y=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=c),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=y,!0))}}function Gr(d){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))}function $n(d){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))}function Ln(d){return/\s/u.test(String.fromCodePoint(d))}function yi(d){for(const s of d)if($n(s.codePointAt(0)))return!0;return!1}function qn(d){for(const s of d)if(!Ci(s.codePointAt(0)))return!1;return!0}function Bi(d){const s=d.map((c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}})).filter((c=>c));return new RegExp(s.join("|"),"u")}const vo=Bi(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ci(d){return!vo.test(String.fromCodePoint(d))}function zn(d){return!($n(d)||(s=d,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(s))));var s}const pn=Bi(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function so(d){return pn.test(String.fromCodePoint(d))}function vi(d,s){return!(!s&&so(d)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(d)))}function Wi(d){for(const s of d)if(so(s.codePointAt(0)))return!0;return!1}const ta=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(ta.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,s){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const c=d.pluginURL,y=new Promise((I=>{this.loadScriptResolve=I}));s(c);const w=new Promise((I=>setTimeout((()=>I()),this.TIMEOUT)));if(yield Promise.race([y,w]),this.isParsed()){const I={pluginStatus:"loaded",pluginURL:c};return this.setState(I),I}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)}))}};class bi{constructor(s,c){this.isSupportedScript=al,this.zoom=s,c?(this.now=c.now||0,this.fadeDuration=c.fadeDuration||0,this.zoomHistory=c.zoomHistory||new Jr,this.transition=c.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jr,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,c=s-Math.floor(s),y=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*c}}}function al(d){return(function(s,c){for(const y of s)if(!vi(y.codePointAt(0),c))return!1;return!0})(d,ta.getRTLTextPluginStatus()==="loaded")}const za="-transition";class Ko{constructor(s,c,y){this.property=s,this.value=c,this.expression=(function(w,I,A){if(ou(w))return new Ah(w,I);if(oc(w)){const O=Ph(w,I,A);if(O.result==="error")throw new Error(O.value.map((j=>`${j.key}: ${j.message}`)).join(", "));return O.value}{let O=w;return I.type==="color"&&typeof w=="string"?O=Cr.parse(w):I.type!=="padding"||typeof w!="number"&&!Array.isArray(w)?I.type!=="numberArray"||typeof w!="number"&&!Array.isArray(w)?I.type!=="colorArray"||typeof w!="string"&&!Array.isArray(w)?I.type==="variableAnchorOffsetCollection"&&Array.isArray(w)?O=sa.parse(w):I.type==="projectionDefinition"&&typeof w=="string"&&(O=ai.parse(w)):O=sn.parse(w):O=rn.parse(w):O=Tr.parse(w),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>O}}})(c===void 0?s.specification.default:c,s.specification,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,c,y){return this.property.possiblyEvaluate(this,s,c,y)}}class cs{constructor(s,c){this.property=s,this.value=new Ko(s,void 0,c)}transitioned(s,c){return new Yi(this.property,this.value,c,Be({},s.transition,this.transition),s.now)}untransitioned(){return new Yi(this.property,this.value,null,{},0)}}class Io{constructor(s,c){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._globalState=c}getValue(s){return ke(this._values[s].value.value)}setValue(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new cs(this._values[s].property,this._globalState)),this._values[s].value=new Ko(this._values[s].property,c===null?void 0:ke(c),this._globalState)}getTransition(s){return ke(this._values[s].transition)}setTransition(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new cs(this._values[s].property,this._globalState)),this._values[s].transition=ke(c)||void 0}serialize(){const s={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(s[c]=y);const w=this.getTransition(c);w!==void 0&&(s[`${c}${za}`]=w)}return s}transitioned(s,c){const y=new ua(this._properties);for(const w of Object.keys(this._values))y._values[w]=this._values[w].transitioned(s,c._values[w]);return y}untransitioned(){const s=new ua(this._properties);for(const c of Object.keys(this._values))s._values[c]=this._values[c].untransitioned();return s}}class Yi{constructor(s,c,y,w,I){this.property=s,this.value=c,this.begin=I+w.delay||0,this.end=this.begin+w.duration||0,s.specification.transition&&(w.delay||w.duration)&&(this.prior=y)}possiblyEvaluate(s,c,y){const w=s.now||0,I=this.value.possiblyEvaluate(s,c,y),A=this.prior;if(A){if(w>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(w<this.begin)return A.possiblyEvaluate(s,c,y);{const O=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(s,c,y),I,Ee(O))}}return I}}class ua{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,c,y){const w=new Po(this._properties);for(const I of Object.keys(this._values))w._values[I]=this._values[I].possiblyEvaluate(s,c,y);return w}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class lo{constructor(s,c){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._globalState=c}hasValue(s){return this._values[s].value!==void 0}getValue(s){return ke(this._values[s].value)}setValue(s,c){this._values[s]=new Ko(this._values[s].property,c===null?void 0:ke(c),this._globalState)}serialize(){const s={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(s[c]=y)}return s}possiblyEvaluate(s,c,y){const w=new Po(this._properties);for(const I of Object.keys(this._values))w._values[I]=this._values[I].possiblyEvaluate(s,c,y);return w}}class Di{constructor(s,c,y){this.property=s,this.value=c,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,c,y,w){return this.property.evaluate(this.value,this.parameters,s,c,y,w)}}class Po{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class yn{constructor(s){this.specification=s}possiblyEvaluate(s,c){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(c)}interpolate(s,c,y){const w=On[this.specification.type];return w?w(s,c,y):s}}class mn{constructor(s,c){this.specification=s,this.overrides=c}possiblyEvaluate(s,c,y,w){return new Di(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(c,null,{},y,w)}:s.expression,c)}interpolate(s,c,y){if(s.value.kind!=="constant"||c.value.kind!=="constant")return s;if(s.value.value===void 0||c.value.value===void 0)return new Di(this,{kind:"constant",value:void 0},s.parameters);const w=On[this.specification.type];if(w){const I=w(s.value.value,c.value.value,y);return new Di(this,{kind:"constant",value:I},s.parameters)}return s}evaluate(s,c,y,w,I,A){return s.kind==="constant"?s.value:s.evaluate(c,y,w,I,A)}}class ds extends mn{possiblyEvaluate(s,c,y,w){if(s.value===void 0)return new Di(this,{kind:"constant",value:void 0},c);if(s.expression.kind==="constant"){const I=s.expression.evaluate(c,null,{},y,w),A=s.property.specification.type==="resolvedImage"&&typeof I!="string"?I.name:I,O=this._calculate(A,A,A,c);return new Di(this,{kind:"constant",value:O},c)}if(s.expression.kind==="camera"){const I=this._calculate(s.expression.evaluate({zoom:c.zoom-1}),s.expression.evaluate({zoom:c.zoom}),s.expression.evaluate({zoom:c.zoom+1}),c);return new Di(this,{kind:"constant",value:I},c)}return new Di(this,s.expression,c)}evaluate(s,c,y,w,I,A){if(s.kind==="source"){const O=s.evaluate(c,y,w,I,A);return this._calculate(O,O,O,c)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(c.zoom)-1},y,w),s.evaluate({zoom:Math.floor(c.zoom)},y,w),s.evaluate({zoom:Math.floor(c.zoom)+1},y,w),c):s.value}_calculate(s,c,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:y,to:c}}interpolate(s){return s}}class ca{constructor(s){this.specification=s}possiblyEvaluate(s,c,y,w){if(s.value!==void 0){if(s.expression.kind==="constant"){const I=s.expression.evaluate(c,null,{},y,w);return this._calculate(I,I,I,c)}return this._calculate(s.expression.evaluate(new bi(Math.floor(c.zoom-1),c)),s.expression.evaluate(new bi(Math.floor(c.zoom),c)),s.expression.evaluate(new bi(Math.floor(c.zoom+1),c)),c)}}_calculate(s,c,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:y,to:c}}interpolate(s){return s}}class bo{constructor(s){this.specification=s}possiblyEvaluate(s,c,y,w){return!!s.expression.evaluate(c,null,{},y,w)}interpolate(){return!1}}class Ma{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in s){const y=s[c];y.specification.overridable&&this.overridableProperties.push(c);const w=this.defaultPropertyValues[c]=new Ko(y,void 0,void 0),I=this.defaultTransitionablePropertyValues[c]=new cs(y,void 0);this.defaultTransitioningPropertyValues[c]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=w.possiblyEvaluate({})}}}Pt("DataDrivenProperty",mn),Pt("DataConstantProperty",yn),Pt("CrossFadedDataDrivenProperty",ds),Pt("CrossFadedProperty",ca),Pt("ColorRampProperty",bo);class ja extends Lr{constructor(s,c,y){if(super(),this.id=s.id,this.type=s.type,this._globalState=y,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(w,I){return new Pe(w,I)})(this.visibility,y),s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=cd(s.filter,y)),c.layout&&(this._unevaluatedLayout=new lo(c.layout,y)),c.paint)){this._transitionablePaint=new Io(c.paint,y);for(const w in s.paint)this.setPaintProperty(w,s.paint[w],{validate:!1});for(const w in s.layout)this.setLayoutProperty(w,s.layout[w],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Po(c.paint)}}setFilter(s){this.filter=s,this._featureFilter=cd(s,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){const s=new Set;for(const c of this._visibilityExpression.getGlobalStateRefs())s.add(c);if(this._unevaluatedLayout)for(const c in this._unevaluatedLayout._values){const y=this._unevaluatedLayout._values[c];for(const w of y.getGlobalStateRefs())s.add(w)}for(const c of this._featureFilter.getGlobalStateRefs())s.add(c);return s}getPaintAffectingGlobalStateRefs(){var s;const c=new globalThis.Map;if(this._transitionablePaint)for(const y in this._transitionablePaint._values){const w=this._transitionablePaint._values[y].value;for(const I of w.getGlobalStateRefs()){const A=(s=c.get(I))!==null&&s!==void 0?s:[];A.push({name:y,value:w.value}),c.set(I,A)}}return c}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(s,c,y={}){if(c==null||!this._validate(Tt,`layers.${this.id}.layout.${s}`,s,c,y))return s==="visibility"?(this.visibility=c,this._visibilityExpression.setValue(c),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(s,c)}getPaintProperty(s){return s.endsWith(za)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,c,y={}){if(c!=null&&this._validate(vt,`layers.${this.id}.paint.${s}`,s,c,y))return!1;if(s.endsWith(za))return this._transitionablePaint.setTransition(s.slice(0,-11),c||void 0),!1;{const w=this._transitionablePaint._values[s],I=w.property.specification["property-type"]==="cross-faded-data-driven",A=w.value.isDataDriven(),O=w.value;this._transitionablePaint.setValue(s,c),this._handleSpecialPaintPropertyUpdate(s);const j=this._transitionablePaint._values[s].value;return j.isDataDriven()||A||I||this._handleOverridablePaintPropertyUpdate(s,O,j)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,c,y){return!1}isHidden(s=this.minzoom,c=!1){return!!(this.minzoom&&s<(c?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&s>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(s,c){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,c)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),it(s,((c,y)=>!(c===void 0||y==="layout"&&!Object.keys(c).length||y==="paint"&&!Object.keys(c).length)))}_validate(s,c,y,w,I={}){return(!I||I.validate!==!1)&&Ht(this,s.call(Qe,{key:c,layerType:this.type,objectKey:y,value:w,styleSpec:kt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const c=this.paint.get(s);if(c instanceof Di&&yl(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let ol;var _l={get paint(){return ol=ol||new Ma({"raster-opacity":new yn(kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new yn(kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yn(kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yn(kt.paint_raster["raster-brightness-max"]),"raster-saturation":new yn(kt.paint_raster["raster-saturation"]),"raster-contrast":new yn(kt.paint_raster["raster-contrast"]),"raster-resampling":new yn(kt.paint_raster["raster-resampling"]),"raster-fade-duration":new yn(kt.paint_raster["raster-fade-duration"])})}};class xl extends ja{constructor(s,c){super(s,_l,c)}}const zl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class da{constructor(s,c){this._structArray=s,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Hi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,c){return s._trim(),c&&(s.isTransferred=!0,c.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const c=Object.create(this.prototype);return c.arrayBuffer=s.arrayBuffer,c.length=s.length,c.capacity=s.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ra(d,s=1){let c=0,y=0;return{members:d.map((w=>{const I=zl[w.type].BYTES_PER_ELEMENT,A=c=jl(c,Math.max(s,I)),O=w.components||1;return y=Math.max(y,I),c+=I*O,{name:w.name,type:w.type,components:O,offset:A}})),size:jl(c,Math.max(y,s)),alignment:s}}function jl(d,s){return Math.ceil(d/s)*s}class ql extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c){const y=this.length;return this.resize(y+1),this.emplace(y,s,c)}emplace(s,c,y){const w=2*s;return this.int16[w+0]=c,this.int16[w+1]=y,s}}ql.prototype.bytesPerElement=4,Pt("StructArrayLayout2i4",ql);class zo extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,c,y)}emplace(s,c,y,w){const I=3*s;return this.int16[I+0]=c,this.int16[I+1]=y,this.int16[I+2]=w,s}}zo.prototype.bytesPerElement=6,Pt("StructArrayLayout3i6",zo);class $d extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,w){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,y,w)}emplace(s,c,y,w,I){const A=4*s;return this.int16[A+0]=c,this.int16[A+1]=y,this.int16[A+2]=w,this.int16[A+3]=I,s}}$d.prototype.bytesPerElement=8,Pt("StructArrayLayout4i8",$d);class Gd extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A){const O=this.length;return this.resize(O+1),this.emplace(O,s,c,y,w,I,A)}emplace(s,c,y,w,I,A,O){const j=6*s;return this.int16[j+0]=c,this.int16[j+1]=y,this.int16[j+2]=w,this.int16[j+3]=I,this.int16[j+4]=A,this.int16[j+5]=O,s}}Gd.prototype.bytesPerElement=12,Pt("StructArrayLayout2i4i12",Gd);class Ud extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A){const O=this.length;return this.resize(O+1),this.emplace(O,s,c,y,w,I,A)}emplace(s,c,y,w,I,A,O){const j=4*s,Y=8*s;return this.int16[j+0]=c,this.int16[j+1]=y,this.uint8[Y+4]=w,this.uint8[Y+5]=I,this.uint8[Y+6]=A,this.uint8[Y+7]=O,s}}Ud.prototype.bytesPerElement=8,Pt("StructArrayLayout2i4ub8",Ud);class lc extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c){const y=this.length;return this.resize(y+1),this.emplace(y,s,c)}emplace(s,c,y){const w=2*s;return this.float32[w+0]=c,this.float32[w+1]=y,s}}lc.prototype.bytesPerElement=8,Pt("StructArrayLayout2f8",lc);class uc extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A,O,j,Y,ie){const ce=this.length;return this.resize(ce+1),this.emplace(ce,s,c,y,w,I,A,O,j,Y,ie)}emplace(s,c,y,w,I,A,O,j,Y,ie,ce){const be=10*s;return this.uint16[be+0]=c,this.uint16[be+1]=y,this.uint16[be+2]=w,this.uint16[be+3]=I,this.uint16[be+4]=A,this.uint16[be+5]=O,this.uint16[be+6]=j,this.uint16[be+7]=Y,this.uint16[be+8]=ie,this.uint16[be+9]=ce,s}}uc.prototype.bytesPerElement=20,Pt("StructArrayLayout10ui20",uc);class Oh extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A,O,j){const Y=this.length;return this.resize(Y+1),this.emplace(Y,s,c,y,w,I,A,O,j)}emplace(s,c,y,w,I,A,O,j,Y){const ie=8*s;return this.uint16[ie+0]=c,this.uint16[ie+1]=y,this.uint16[ie+2]=w,this.uint16[ie+3]=I,this.uint16[ie+4]=A,this.uint16[ie+5]=O,this.uint16[ie+6]=j,this.uint16[ie+7]=Y,s}}Oh.prototype.bytesPerElement=16,Pt("StructArrayLayout8ui16",Oh);class hd extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A,O,j,Y,ie,ce,be){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,s,c,y,w,I,A,O,j,Y,ie,ce,be)}emplace(s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce){const Oe=12*s;return this.int16[Oe+0]=c,this.int16[Oe+1]=y,this.int16[Oe+2]=w,this.int16[Oe+3]=I,this.uint16[Oe+4]=A,this.uint16[Oe+5]=O,this.uint16[Oe+6]=j,this.uint16[Oe+7]=Y,this.int16[Oe+8]=ie,this.int16[Oe+9]=ce,this.int16[Oe+10]=be,this.int16[Oe+11]=Ce,s}}hd.prototype.bytesPerElement=24,Pt("StructArrayLayout4i4ui4i24",hd);class Au extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,c,y)}emplace(s,c,y,w){const I=3*s;return this.float32[I+0]=c,this.float32[I+1]=y,this.float32[I+2]=w,s}}Au.prototype.bytesPerElement=12,Pt("StructArrayLayout3f12",Au);class Ff extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint32[1*s+0]=c,s}}Ff.prototype.bytesPerElement=4,Pt("StructArrayLayout1ul4",Ff);class Op extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A,O,j,Y){const ie=this.length;return this.resize(ie+1),this.emplace(ie,s,c,y,w,I,A,O,j,Y)}emplace(s,c,y,w,I,A,O,j,Y,ie){const ce=10*s,be=5*s;return this.int16[ce+0]=c,this.int16[ce+1]=y,this.int16[ce+2]=w,this.int16[ce+3]=I,this.int16[ce+4]=A,this.int16[ce+5]=O,this.uint32[be+3]=j,this.uint16[ce+8]=Y,this.uint16[ce+9]=ie,s}}Op.prototype.bytesPerElement=20,Pt("StructArrayLayout6i1ul2ui20",Op);class Hd extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A){const O=this.length;return this.resize(O+1),this.emplace(O,s,c,y,w,I,A)}emplace(s,c,y,w,I,A,O){const j=6*s;return this.int16[j+0]=c,this.int16[j+1]=y,this.int16[j+2]=w,this.int16[j+3]=I,this.int16[j+4]=A,this.int16[j+5]=O,s}}Hd.prototype.bytesPerElement=12,Pt("StructArrayLayout2i2i2i12",Hd);class Dc extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I){const A=this.length;return this.resize(A+1),this.emplace(A,s,c,y,w,I)}emplace(s,c,y,w,I,A){const O=4*s,j=8*s;return this.float32[O+0]=c,this.float32[O+1]=y,this.float32[O+2]=w,this.int16[j+6]=I,this.int16[j+7]=A,s}}Dc.prototype.bytesPerElement=16,Pt("StructArrayLayout2f1f2i16",Dc);class Wd extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A){const O=this.length;return this.resize(O+1),this.emplace(O,s,c,y,w,I,A)}emplace(s,c,y,w,I,A,O){const j=16*s,Y=4*s,ie=8*s;return this.uint8[j+0]=c,this.uint8[j+1]=y,this.float32[Y+1]=w,this.float32[Y+2]=I,this.int16[ie+6]=A,this.int16[ie+7]=O,s}}Wd.prototype.bytesPerElement=16,Pt("StructArrayLayout2ub2f2i16",Wd);class Xd extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,c,y)}emplace(s,c,y,w){const I=3*s;return this.uint16[I+0]=c,this.uint16[I+1]=y,this.uint16[I+2]=w,s}}Xd.prototype.bytesPerElement=6,Pt("StructArrayLayout3ui6",Xd);class Oc extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe,ze,Ve,et){const Et=this.length;return this.resize(Et+1),this.emplace(Et,s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe,ze,Ve,et)}emplace(s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe,ze,Ve,et,Et){const rt=24*s,ut=12*s,At=48*s;return this.int16[rt+0]=c,this.int16[rt+1]=y,this.uint16[rt+2]=w,this.uint16[rt+3]=I,this.uint32[ut+2]=A,this.uint32[ut+3]=O,this.uint32[ut+4]=j,this.uint16[rt+10]=Y,this.uint16[rt+11]=ie,this.uint16[rt+12]=ce,this.float32[ut+7]=be,this.float32[ut+8]=Ce,this.uint8[At+36]=Oe,this.uint8[At+37]=ze,this.uint8[At+38]=Ve,this.uint32[ut+10]=et,this.int16[rt+22]=Et,s}}Oc.prototype.bytesPerElement=48,Pt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Oc);class Yd extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe,ze,Ve,et,Et,rt,ut,At,Ot,lr,Ir,wr,Or,an,jr){const Er=this.length;return this.resize(Er+1),this.emplace(Er,s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe,ze,Ve,et,Et,rt,ut,At,Ot,lr,Ir,wr,Or,an,jr)}emplace(s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe,ze,Ve,et,Et,rt,ut,At,Ot,lr,Ir,wr,Or,an,jr,Er){const vr=32*s,vn=16*s;return this.int16[vr+0]=c,this.int16[vr+1]=y,this.int16[vr+2]=w,this.int16[vr+3]=I,this.int16[vr+4]=A,this.int16[vr+5]=O,this.int16[vr+6]=j,this.int16[vr+7]=Y,this.uint16[vr+8]=ie,this.uint16[vr+9]=ce,this.uint16[vr+10]=be,this.uint16[vr+11]=Ce,this.uint16[vr+12]=Oe,this.uint16[vr+13]=ze,this.uint16[vr+14]=Ve,this.uint16[vr+15]=et,this.uint16[vr+16]=Et,this.uint16[vr+17]=rt,this.uint16[vr+18]=ut,this.uint16[vr+19]=At,this.uint16[vr+20]=Ot,this.uint16[vr+21]=lr,this.uint16[vr+22]=Ir,this.uint32[vn+12]=wr,this.float32[vn+13]=Or,this.float32[vn+14]=an,this.uint16[vr+30]=jr,this.uint16[vr+31]=Er,s}}Yd.prototype.bytesPerElement=64,Pt("StructArrayLayout8i15ui1ul2f2ui64",Yd);class Zd extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.float32[1*s+0]=c,s}}Zd.prototype.bytesPerElement=4,Pt("StructArrayLayout1f4",Zd);class Nc extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,c,y)}emplace(s,c,y,w){const I=3*s;return this.uint16[6*s+0]=c,this.float32[I+1]=y,this.float32[I+2]=w,s}}Nc.prototype.bytesPerElement=12,Pt("StructArrayLayout1ui2f12",Nc);class Nh extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y){const w=this.length;return this.resize(w+1),this.emplace(w,s,c,y)}emplace(s,c,y,w){const I=4*s;return this.uint32[2*s+0]=c,this.uint16[I+2]=y,this.uint16[I+3]=w,s}}Nh.prototype.bytesPerElement=8,Pt("StructArrayLayout1ul2ui8",Nh);class L extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c){const y=this.length;return this.resize(y+1),this.emplace(y,s,c)}emplace(s,c,y){const w=2*s;return this.uint16[w+0]=c,this.uint16[w+1]=y,s}}L.prototype.bytesPerElement=4,Pt("StructArrayLayout2ui4",L);class l extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint16[1*s+0]=c,s}}l.prototype.bytesPerElement=2,Pt("StructArrayLayout1ui2",l);class h extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y,w){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,y,w)}emplace(s,c,y,w,I){const A=4*s;return this.float32[A+0]=c,this.float32[A+1]=y,this.float32[A+2]=w,this.float32[A+3]=I,s}}h.prototype.bytesPerElement=16,Pt("StructArrayLayout4f16",h);class x extends da{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}}x.prototype.size=20;class C extends Op{get(s){return new x(this,s)}}Pt("CollisionBoxArray",C);class R extends da{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}R.prototype.size=48;class z extends Oc{get(s){return new R(this,s)}}Pt("PlacedSymbolArray",z);class W extends da{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}W.prototype.size=64;class te extends Yd{get(s){return new W(this,s)}}Pt("SymbolInstanceArray",te);class le extends Zd{getoffsetX(s){return this.float32[1*s+0]}}Pt("GlyphOffsetArray",le);class pe extends zo{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Pt("SymbolLineVertexArray",pe);class Ie extends da{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ie.prototype.size=12;class Te extends Nc{get(s){return new Ie(this,s)}}Pt("TextAnchorOffsetArray",Te);class qe extends da{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qe.prototype.size=8;class Ze extends Nh{get(s){return new qe(this,s)}}Pt("FeatureIndexArray",Ze);class ft extends ql{}class mt extends ql{}class pt extends ql{}class _t extends Gd{}class Lt extends Ud{}class xt extends lc{}class Rt extends uc{}class Bt extends Oh{}class Mt extends hd{}class Xt extends Au{}class gr extends Ff{}class ur extends Hd{}class hr extends Wd{}class mr extends Xd{}class Yr extends L{}const Qr=ra([{name:"a_pos",components:2,type:"Int16"}],4),{members:Br}=Qr;class on{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,c,y,w){const I=this.segments[this.segments.length-1];return s>on.MAX_VERTEX_ARRAY_LENGTH&&st(`Max vertices per segment is ${on.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${on.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!I||I.vertexLength+s>on.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==w?this.createNewSegment(c,y,w):I}createNewSegment(s,c,y){const w={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(w.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(s,c,y){return this.prepareSegment(0,s,c,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const s of this.segments)for(const c in s.vaos)s.vaos[c].destroy()}static simpleSegment(s,c,y,w){return new on([{vertexOffset:s,primitiveOffset:c,vertexLength:y,primitiveLength:w,vaos:{},sortKey:0}])}}function mi(d,s){return 256*(d=Fe(Math.floor(d),0,255))+Fe(Math.floor(s),0,255)}on.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt("SegmentVector",on);const ba=ra([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),eo=ra([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var qa,uo,Va,Ao={exports:{}},co={exports:{}},Ws={exports:{}},Jo=(function(){if(Va)return Ao.exports;Va=1;var d=(qa||(qa=1,co.exports=function(c,y){var w,I,A,O,j,Y,ie,ce;for(I=c.length-(w=3&c.length),A=y,j=3432918353,Y=461845907,ce=0;ce<I;)ie=255&c.charCodeAt(ce)|(255&c.charCodeAt(++ce))<<8|(255&c.charCodeAt(++ce))<<16|(255&c.charCodeAt(++ce))<<24,++ce,A=27492+(65535&(O=5*(65535&(A=(A^=ie=(65535&(ie=(ie=(65535&ie)*j+(((ie>>>16)*j&65535)<<16)&4294967295)<<15|ie>>>17))*Y+(((ie>>>16)*Y&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(ie=0,w){case 3:ie^=(255&c.charCodeAt(ce+2))<<16;case 2:ie^=(255&c.charCodeAt(ce+1))<<8;case 1:A^=ie=(65535&(ie=(ie=(65535&(ie^=255&c.charCodeAt(ce)))*j+(((ie>>>16)*j&65535)<<16)&4294967295)<<15|ie>>>17))*Y+(((ie>>>16)*Y&65535)<<16)&4294967295}return A^=c.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0}),co.exports),s=(uo||(uo=1,Ws.exports=function(c,y){for(var w,I=c.length,A=y^I,O=0;I>=4;)w=1540483477*(65535&(w=255&c.charCodeAt(O)|(255&c.charCodeAt(++O))<<8|(255&c.charCodeAt(++O))<<16|(255&c.charCodeAt(++O))<<24))+((1540483477*(w>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),I-=4,++O;switch(I){case 3:A^=(255&c.charCodeAt(O+2))<<16;case 2:A^=(255&c.charCodeAt(O+1))<<8;case 1:A=1540483477*(65535&(A^=255&c.charCodeAt(O)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0}),Ws.exports);return Ao.exports=d,Ao.exports.murmur3=d,Ao.exports.murmur2=s,Ao.exports})(),jo=p(Jo);class sl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,c,y,w){this.ids.push(Kd(s)),this.positions.push(c,y,w)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Kd(s);let y=0,w=this.ids.length-1;for(;y<w;){const A=y+w>>1;this.ids[A]>=c?w=A:y=A+1}const I=[];for(;this.ids[y]===c;)I.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return I}static serialize(s,c){const y=new Float64Array(s.ids),w=new Uint32Array(s.positions);return pd(y,w,0,y.length-1),c&&c.push(y.buffer,w.buffer),{ids:y,positions:w}}static deserialize(s){const c=new sl;return c.ids=s.ids,c.positions=s.positions,c.indexed=!0,c}}function Kd(d){const s=+d;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:jo(String(d))}function pd(d,s,c,y){for(;c<y;){const w=d[c+y>>1];let I=c-1,A=y+1;for(;;){do I++;while(d[I]<w);do A--;while(d[A]>w);if(I>=A)break;Fc(d,I,A),Fc(s,3*I,3*A),Fc(s,3*I+1,3*A+1),Fc(s,3*I+2,3*A+2)}A-c<y-A?(pd(d,s,c,A),c=A+1):(pd(d,s,A+1,y),y=A)}}function Fc(d,s,c){const y=d[s];d[s]=d[c],d[c]=y}Pt("FeaturePositionMap",sl);class cu{constructor(s,c){this.gl=s.gl,this.location=c}}class Bf extends cu{constructor(s,c){super(s,c),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Np extends cu{constructor(s,c){super(s,c),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class zf extends cu{constructor(s,c){super(s,c),this.current=Cr.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const $u=new Float32Array(16);function Bc(d){return[mi(255*d.r,255*d.g),mi(255*d.b,255*d.a)]}class cc{constructor(s,c,y){this.value=s,this.uniformNames=c.map((w=>`u_${w}`)),this.type=y}setUniform(s,c,y){s.set(y.constantOr(this.value))}getBinding(s,c,y){return this.type==="color"?new zf(s,c):new Bf(s,c)}}class dc{constructor(s,c){this.uniformNames=c.map((y=>`u_${y}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=s.tlbr}setConstantDashPositions(s,c){this.dashTo=[0,s.y,s.height,s.width],this.dashFrom=[0,c.y,c.height,c.width]}setUniform(s,c,y,w){let I=null;w==="u_pattern_to"?I=this.patternTo:w==="u_pattern_from"?I=this.patternFrom:w==="u_dasharray_to"?I=this.dashTo:w==="u_dasharray_from"?I=this.dashFrom:w==="u_pixel_ratio_to"?I=this.pixelRatioTo:w==="u_pixel_ratio_from"&&(I=this.pixelRatioFrom),I!==null&&s.set(I)}getBinding(s,c,y){return y.substr(0,9)==="u_pattern"||y.substr(0,12)==="u_dasharray_"?new Np(s,c):new Bf(s,c)}}class Wa{constructor(s,c,y,w){this.expression=s,this.type=y,this.maxValue=0,this.paintVertexAttributes=c.map((I=>({name:`a_${I}`,type:"Float32",components:y==="color"?2:1,offset:0}))),this.paintVertexArray=new w}populatePaintArray(s,c,y){const w=this.paintVertexArray.length,I=this.expression.evaluate(new bi(0,y),c,{},y.canonical,[],y.formattedSection);this.paintVertexArray.resize(s),this._setPaintValue(w,s,I)}updatePaintArray(s,c,y,w,I){const A=this.expression.evaluate(new bi(0,I),y,w);this._setPaintValue(s,c,A)}_setPaintValue(s,c,y){if(this.type==="color"){const w=Bc(y);for(let I=s;I<c;I++)this.paintVertexArray.emplace(I,w[0],w[1])}else{for(let w=s;w<c;w++)this.paintVertexArray.emplace(w,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class $a{constructor(s,c,y,w,I,A){this.expression=s,this.uniformNames=c.map((O=>`u_${O}_t`)),this.type=y,this.useIntegerZoom=w,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=c.map((O=>({name:`a_${O}`,type:"Float32",components:y==="color"?4:2,offset:0}))),this.paintVertexArray=new A}populatePaintArray(s,c,y){const w=this.expression.evaluate(new bi(this.zoom,y),c,{},y.canonical,[],y.formattedSection),I=this.expression.evaluate(new bi(this.zoom+1,y),c,{},y.canonical,[],y.formattedSection),A=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(A,s,w,I)}updatePaintArray(s,c,y,w,I){const A=this.expression.evaluate(new bi(this.zoom,I),y,w),O=this.expression.evaluate(new bi(this.zoom+1,I),y,w);this._setPaintValue(s,c,A,O)}_setPaintValue(s,c,y,w){if(this.type==="color"){const I=Bc(y),A=Bc(w);for(let O=s;O<c;O++)this.paintVertexArray.emplace(O,I[0],I[1],A[0],A[1])}else{for(let I=s;I<c;I++)this.paintVertexArray.emplace(I,y,w);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(w))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,c){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,w=Fe(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);s.set(w)}getBinding(s,c,y){return new Bf(s,c)}}class ks{constructor(s,c,y,w,I,A){this.expression=s,this.type=c,this.useIntegerZoom=y,this.zoom=w,this.layerId=A,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I}populatePaintArray(s,c,y){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(w,s,this.getPositionIds(c),y)}updatePaintArray(s,c,y,w,I){this._setPaintValues(s,c,this.getPositionIds(y),I)}_setPaintValues(s,c,y,w){const I=this.getPositions(w);if(!I||!y)return;const A=I[y.min],O=I[y.mid],j=I[y.max];if(A&&O&&j)for(let Y=s;Y<c;Y++)this.emplace(this.zoomInPaintVertexArray,Y,O,A),this.emplace(this.zoomOutPaintVertexArray,Y,O,j)}upload(s){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const c=this.getVertexAttributes();this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,c,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,c,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ms extends ks{getPositions(s){return s.imagePositions}getPositionIds(s){return s.patterns&&s.patterns[this.layerId]}getVertexAttributes(){return ba.members}emplace(s,c,y,w){s.emplace(c,y.tlbr[0],y.tlbr[1],y.tlbr[2],y.tlbr[3],w.tlbr[0],w.tlbr[1],w.tlbr[2],w.tlbr[3],y.pixelRatio,w.pixelRatio)}}class mb extends ks{getPositions(s){return s.dashPositions}getPositionIds(s){return s.dashes&&s.dashes[this.layerId]}getVertexAttributes(){return eo.members}emplace(s,c,y,w){s.emplace(c,0,y.y,y.height,y.width,0,w.y,w.height,w.width)}}class gb{constructor(s,c,y){this.binders={},this._buffers=[];const w=[];for(const I in s.paint._values){if(!y(I))continue;const A=s.paint.get(I);if(!(A instanceof Di&&yl(A.property.specification)))continue;const O=fS(I,s.type),j=A.value,Y=A.property.specification.type,ie=A.property.useIntegerZoom,ce=A.property.specification["property-type"],be=ce==="cross-faded"||ce==="cross-faded-data-driven";if(j.kind==="constant")this.binders[I]=be?new dc(j.value,O):new cc(j.value,O,Y),w.push(`/u_${I}`);else if(j.kind==="source"||be){const Ce=yb(I,Y,"source");this.binders[I]=be?I==="line-dasharray"?new mb(j,Y,ie,c,Ce,s.id):new Ms(j,Y,ie,c,Ce,s.id):new Wa(j,O,Y,Ce),w.push(`/a_${I}`)}else{const Ce=yb(I,Y,"composite");this.binders[I]=new $a(j,O,Y,ie,c,Ce),w.push(`/z_${I}`)}}this.cacheKey=w.sort().join("")}getMaxValue(s){const c=this.binders[s];return c instanceof Wa||c instanceof $a?c.maxValue:0}populatePaintArrays(s,c,y){for(const w in this.binders){const I=this.binders[w];(I instanceof Wa||I instanceof $a||I instanceof ks)&&I.populatePaintArray(s,c,y)}}setConstantPatternPositions(s,c){for(const y in this.binders){const w=this.binders[y];w instanceof dc&&w.setConstantPatternPositions(s,c)}}setConstantDashPositions(s,c){for(const y in this.binders){const w=this.binders[y];w instanceof dc&&w.setConstantDashPositions(s,c)}}updatePaintArrays(s,c,y,w,I){let A=!1;for(const O in s){const j=c.getPositions(O);for(const Y of j){const ie=y.feature(Y.index);for(const ce in this.binders){const be=this.binders[ce];if((be instanceof Wa||be instanceof $a||be instanceof ks)&&be.expression.isStateDependent===!0){const Ce=w.paint.get(ce);be.expression=Ce.value,be.updatePaintArray(Y.start,Y.end,ie,s[O],I),A=!0}}}}return A}defines(){const s=[];for(const c in this.binders){const y=this.binders[c];(y instanceof cc||y instanceof dc)&&s.push(...y.uniformNames.map((w=>`#define HAS_UNIFORM_${w}`)))}return s}getBinderAttributes(){const s=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof Wa||y instanceof $a)for(let w=0;w<y.paintVertexAttributes.length;w++)s.push(y.paintVertexAttributes[w].name);else if(y instanceof ks){const w=y.getVertexAttributes();for(const I of w)s.push(I.name)}}return s}getBinderUniforms(){const s=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof cc||y instanceof dc||y instanceof $a)for(const w of y.uniformNames)s.push(w)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,c){const y=[];for(const w in this.binders){const I=this.binders[w];if(I instanceof cc||I instanceof dc||I instanceof $a){for(const A of I.uniformNames)if(c[A]){const O=I.getBinding(s,c[A],A);y.push({name:A,property:w,binding:O})}}}return y}setUniforms(s,c,y,w){for(const{name:I,property:A,binding:O}of c)this.binders[A].setUniform(O,w,y.get(A),I)}updatePaintBuffers(s){this._buffers=[];for(const c in this.binders){const y=this.binders[c];if(s&&y instanceof ks){const w=s.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(y instanceof Wa||y instanceof $a)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(s){for(const c in this.binders){const y=this.binders[c];(y instanceof Wa||y instanceof $a||y instanceof ks)&&y.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const c=this.binders[s];(c instanceof Wa||c instanceof $a||c instanceof ks)&&c.destroy()}}}class jf{constructor(s,c,y=()=>!0){this.programConfigurations={};for(const w of s)this.programConfigurations[w.id]=new gb(w,c,y);this.needsUpload=!1,this._featureMap=new sl,this._bufferOffset=0}populatePaintArrays(s,c,y,w){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(s,c,w);c.id!==void 0&&this._featureMap.add(c.id,y,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,c,y,w){for(const I of y)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(s,this._featureMap,c,I,w)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function fS(d,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${s}-`,"").replace(/-/g,"_")]}function yb(d,s,c){const y={color:{source:lc,composite:h},number:{source:Zd,composite:lc}},w=(function(I){return{"line-pattern":{source:Rt,composite:Rt},"fill-pattern":{source:Rt,composite:Rt},"fill-extrusion-pattern":{source:Rt,composite:Rt},"line-dasharray":{source:Bt,composite:Bt}}[I]})(d);return w&&w[c]||y[s][c]}Pt("ConstantBinder",cc),Pt("CrossFadedConstantBinder",dc),Pt("SourceExpressionBinder",Wa),Pt("CrossFadedPatternBinder",Ms),Pt("CrossFadedDasharrayBinder",mb),Pt("CompositeExpressionBinder",$a),Pt("ProgramConfiguration",gb,{omit:["_buffers"]}),Pt("ProgramConfigurationSet",jf);const vv=Math.pow(2,14)-1,Jd=-vv-1;function Qd(d){const s=xe/d.extent,c=d.loadGeometry();for(let y=0;y<c.length;y++){const w=c[y];for(let I=0;I<w.length;I++){const A=w[I],O=Math.round(A.x*s),j=Math.round(A.y*s);A.x=Fe(O,Jd,vv),A.y=Fe(j,Jd,vv),(O<A.x||O>A.x+1||j<A.y||j>A.y+1)&&st("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function ef(d,s){return{type:d.type,id:d.id,properties:d.properties,geometry:s?Qd(d):[]}}const bv=-32768;function _v(d,s,c,y,w){d.emplaceBack(bv+8*s+y,bv+8*c+w)}class rg{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=s.index,this.hasDependencies=!1,this.layoutVertexArray=new mt,this.indexArray=new mr,this.segments=new on,this.programConfigurations=new jf(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(s,c,y){const w=this.layers[0],I=[];let A=null,O=!1,j=w.type==="heatmap";if(w.type==="circle"){const ie=w;A=ie.layout.get("circle-sort-key"),O=!A.isConstant(),j=j||ie.paint.get("circle-pitch-alignment")==="map"}const Y=j?c.subdivisionGranularity.circle:1;for(const{feature:ie,id:ce,index:be,sourceLayerIndex:Ce}of s){const Oe=this.layers[0]._featureFilter.needGeometry,ze=ef(ie,Oe);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),ze,y))continue;const Ve=O?A.evaluate(ze,{},y):void 0,et={id:ce,properties:ie.properties,type:ie.type,sourceLayerIndex:Ce,index:be,geometry:Oe?ze.geometry:Qd(ie),patterns:{},sortKey:Ve};I.push(et)}O&&I.sort(((ie,ce)=>ie.sortKey-ce.sortKey));for(const ie of I){const{geometry:ce,index:be,sourceLayerIndex:Ce}=ie,Oe=s[be].feature;this.addFeature(ie,ce,be,y,Y),c.featureIndex.insert(Oe,ce,be,Ce,this.index)}}update(s,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Br),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,c,y,w,I=1){let A;switch(I){case 1:A=[0,7];break;case 3:A=[0,2,5,7];break;case 5:A=[0,1,3,4,6,7];break;case 7:A=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${I}; valid values are 1, 3, 5, 7.`)}const O=A.length;for(const j of c)for(const Y of j){const ie=Y.x,ce=Y.y;if(ie<0||ie>=xe||ce<0||ce>=xe)continue;const be=this.segments.prepareSegment(O*O,this.layoutVertexArray,this.indexArray,s.sortKey),Ce=be.vertexLength;for(let Oe=0;Oe<O;Oe++)for(let ze=0;ze<O;ze++)_v(this.layoutVertexArray,ie,ce,A[ze],A[Oe]);for(let Oe=0;Oe<O-1;Oe++)for(let ze=0;ze<O-1;ze++){const Ve=Ce+Oe*O+ze,et=Ce+(Oe+1)*O+ze;this.indexArray.emplaceBack(Ve,et+1,Ve+1),this.indexArray.emplaceBack(Ve,et,et+1)}be.vertexLength+=O*O,be.primitiveLength+=(O-1)*(O-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,{imagePositions:{},canonical:w})}}function ng(d,s){for(let c=0;c<d.length;c++)if(ig(s,d[c]))return!0;for(let c=0;c<s.length;c++)if(ig(d,s[c]))return!0;return!!hS(d,s)}function vb(d,s,c){return!!ig(d,s)||!!pS(s,d,c)}function gM(d,s){if(d.length===1)return vM(s,d[0]);for(let c=0;c<s.length;c++){const y=s[c];for(let w=0;w<y.length;w++)if(ig(d,y[w]))return!0}for(let c=0;c<d.length;c++)if(vM(s,d[c]))return!0;for(let c=0;c<s.length;c++)if(hS(d,s[c]))return!0;return!1}function hW(d,s,c){if(d.length>1){if(hS(d,s))return!0;for(let y=0;y<s.length;y++)if(pS(s[y],d,c))return!0}for(let y=0;y<d.length;y++)if(pS(d[y],s,c))return!0;return!1}function hS(d,s){if(d.length===0||s.length===0)return!1;for(let c=0;c<d.length-1;c++){const y=d[c],w=d[c+1];for(let I=0;I<s.length-1;I++)if(pW(y,w,s[I],s[I+1]))return!0}return!1}function pW(d,s,c,y){return $e(d,c,y)!==$e(s,c,y)&&$e(d,s,c)!==$e(d,s,y)}function pS(d,s,c){const y=c*c;if(s.length===1)return d.distSqr(s[0])<y;for(let w=1;w<s.length;w++)if(yM(d,s[w-1],s[w])<y)return!0;return!1}function yM(d,s,c){const y=s.distSqr(c);if(y===0)return d.distSqr(s);const w=((d.x-s.x)*(c.x-s.x)+(d.y-s.y)*(c.y-s.y))/y;return d.distSqr(w<0?s:w>1?c:c.sub(s)._mult(w)._add(s))}function vM(d,s){let c,y,w,I=!1;for(let A=0;A<d.length;A++){c=d[A];for(let O=0,j=c.length-1;O<c.length;j=O++)y=c[O],w=c[j],y.y>s.y!=w.y>s.y&&s.x<(w.x-y.x)*(s.y-y.y)/(w.y-y.y)+y.x&&(I=!I)}return I}function ig(d,s){let c=!1;for(let y=0,w=d.length-1;y<d.length;w=y++){const I=d[y],A=d[w];I.y>s.y!=A.y>s.y&&s.x<(A.x-I.x)*(s.y-I.y)/(A.y-I.y)+I.x&&(c=!c)}return c}function mW(d,s,c){const y=c[0],w=c[2];if(d.x<y.x&&s.x<y.x||d.x>w.x&&s.x>w.x||d.y<y.y&&s.y<y.y||d.y>w.y&&s.y>w.y)return!1;const I=$e(d,s,c[0]);return I!==$e(d,s,c[1])||I!==$e(d,s,c[2])||I!==$e(d,s,c[3])}function ag(d,s,c){const y=s.paint.get(d).value;return y.kind==="constant"?y.value:c.programConfigurations.get(s.id).getMaxValue(d)}function bb(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function _b(d,s,c,y,w){if(!s[0]&&!s[1])return d;const I=f.convert(s)._mult(w);c==="viewport"&&I._rotate(-y);const A=[];for(let O=0;O<d.length;O++)A.push(d[O].sub(I));return A}function gW(d){const s=[];for(let c=0;c<d.length;c++){const y=d[c],w=s.at(-1);(c===0||w&&!y.equals(w))&&s.push(y)}return s}function yW({queryGeometry:d,size:s},c){return vb(d,c,s)}function vW({queryGeometry:d,size:s,transform:c,unwrappedTileID:y,getElevation:w},I){return vb(d,I,s*(c.projectTileCoordinates(I.x,I.y,y,w).signedDistanceFromCamera/c.cameraToCenterDistance))}function bW({queryGeometry:d,size:s,transform:c,unwrappedTileID:y,getElevation:w},I){const A=c.projectTileCoordinates(I.x,I.y,y,w).signedDistanceFromCamera,O=s*(c.cameraToCenterDistance/A);return vb(d,mS(I,c,y,w),O)}function _W({queryGeometry:d,size:s,transform:c,unwrappedTileID:y,getElevation:w},I){return vb(d,mS(I,c,y,w),s)}function bM({queryGeometry:d,size:s,transform:c,unwrappedTileID:y,getElevation:w,pitchAlignment:I="map",pitchScale:A="map"},O){const j=I==="map"?A==="map"?yW:vW:A==="map"?bW:_W,Y={queryGeometry:d,size:s,transform:c,unwrappedTileID:y,getElevation:w};for(const ie of O)for(const ce of ie)if(j(Y,ce))return!0;return!1}function mS(d,s,c,y){const w=s.projectTileCoordinates(d.x,d.y,c,y).point;return new f((.5*w.x+.5)*s.width,(.5*-w.y+.5)*s.height)}let _M,xM;Pt("CircleBucket",rg,{omit:["layers"]});var xW={get paint(){return xM=xM||new Ma({"circle-radius":new mn(kt.paint_circle["circle-radius"]),"circle-color":new mn(kt.paint_circle["circle-color"]),"circle-blur":new mn(kt.paint_circle["circle-blur"]),"circle-opacity":new mn(kt.paint_circle["circle-opacity"]),"circle-translate":new yn(kt.paint_circle["circle-translate"]),"circle-translate-anchor":new yn(kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yn(kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yn(kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mn(kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mn(kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mn(kt.paint_circle["circle-stroke-opacity"])})},get layout(){return _M=_M||new Ma({"circle-sort-key":new mn(kt.layout_circle["circle-sort-key"])})}};class wW extends ja{constructor(s,c){super(s,xW,c)}createBucket(s){return new rg(s)}queryRadius(s){const c=s;return ag("circle-radius",this,c)+ag("circle-stroke-width",this,c)+bb(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:c,featureState:y,geometry:w,transform:I,pixelsToTileUnits:A,unwrappedTileID:O,getElevation:j}){const Y=_b(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-I.bearingInRadians,A),ie=this.paint.get("circle-radius").evaluate(c,y)+this.paint.get("circle-stroke-width").evaluate(c,y),ce=this.paint.get("circle-pitch-scale"),be=this.paint.get("circle-pitch-alignment");let Ce,Oe;return be==="map"?(Ce=Y,Oe=ie*A):(Ce=(function(ze,Ve,et,Et){return ze.map((rt=>mS(rt,Ve,et,Et)))})(Y,I,O,j),Oe=ie),bM({queryGeometry:Ce,size:Oe,transform:I,unwrappedTileID:O,getElevation:j,pitchAlignment:be,pitchScale:ce},w)}}class wM extends rg{}let SM;Pt("HeatmapBucket",wM,{omit:["layers"]});var SW={get paint(){return SM=SM||new Ma({"heatmap-radius":new mn(kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mn(kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yn(kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bo(kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yn(kt.paint_heatmap["heatmap-opacity"])})}};function gS(d,{width:s,height:c},y,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==s*c*y)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${s*c*y}`)}else w=new Uint8Array(s*c*y);return d.width=s,d.height=c,d.data=w,d}function CM(d,{width:s,height:c},y){if(s===d.width&&c===d.height)return;const w=gS({},{width:s,height:c},y);yS(d,w,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,s),height:Math.min(d.height,c)},y),d.width=s,d.height=c,d.data=w.data}function yS(d,s,c,y,w,I){if(w.width===0||w.height===0)return s;if(w.width>d.width||w.height>d.height||c.x>d.width-w.width||c.y>d.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>s.width||w.height>s.height||y.x>s.width-w.width||y.y>s.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const A=d.data,O=s.data;if(A===O)throw new Error("srcData equals dstData, so image is already copied");for(let j=0;j<w.height;j++){const Y=((c.y+j)*d.width+c.x)*I,ie=((y.y+j)*s.width+y.x)*I;for(let ce=0;ce<w.width*I;ce++)O[ie+ce]=A[Y+ce]}return s}class xv{constructor(s,c){gS(this,s,1,c)}resize(s){CM(this,s,1)}clone(){return new xv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,y,w,I){yS(s,c,y,w,I,1)}}class ku{constructor(s,c){gS(this,s,4,c)}resize(s){CM(this,s,4)}replace(s,c){c?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new ku({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,y,w,I){yS(s,c,y,w,I,4)}setPixel(s,c,y){const w=4*(s*this.width+c);this.data[w+0]=Math.round(255*y.r/y.a),this.data[w+1]=Math.round(255*y.g/y.a),this.data[w+2]=Math.round(255*y.b/y.a),this.data[w+3]=Math.round(255*y.a)}}function EM(d){const s={},c=d.resolution||256,y=d.clips?d.clips.length:1,w=d.image||new ku({width:c,height:y});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const I=(A,O,j)=>{s[d.evaluationKey]=j;const Y=d.expression.evaluate(s);w.setPixel(A/4/c,O/4,Y)};if(d.clips)for(let A=0,O=0;A<y;++A,O+=4*c)for(let j=0,Y=0;j<c;j++,Y+=4){const ie=j/(c-1),{start:ce,end:be}=d.clips[A];I(O,Y,ce*(1-ie)+be*ie)}else for(let A=0,O=0;A<c;A++,O+=4)I(0,O,A/(c-1));return w}Pt("AlphaImage",xv),Pt("RGBAImage",ku);const vS="big-fb";class CW extends ja{createBucket(s){return new wM(s)}constructor(s,c){super(s,SW,c),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=EM({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(vS)&&this.heatmapFbos.delete(vS)}queryRadius(s){return ag("heatmap-radius",this,s)}queryIntersectsFeature({queryGeometry:s,feature:c,featureState:y,geometry:w,transform:I,pixelsToTileUnits:A,unwrappedTileID:O,getElevation:j}){return bM({queryGeometry:s,size:this.paint.get("heatmap-radius").evaluate(c,y)*A,transform:I,unwrappedTileID:O,getElevation:j},w)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let TM;var EW={get paint(){return TM=TM||new Ma({"hillshade-illumination-direction":new yn(kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new yn(kt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new yn(kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yn(kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yn(kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yn(kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yn(kt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new yn(kt.paint_hillshade["hillshade-method"])})}};class TW extends ja{constructor(s,c){super(s,EW,c),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,w=this.paint.get("hillshade-shadow-color").values;const I=Math.max(s.length,c.length,y.length,w.length);s=s.concat(Array(I-s.length).fill(s.at(-1))),c=c.concat(Array(I-c.length).fill(c.at(-1))),y=y.concat(Array(I-y.length).fill(y.at(-1))),w=w.concat(Array(I-w.length).fill(w.at(-1)));const A=c.map(yr);return{directionRadians:s.map(yr),altitudeRadians:A,shadowColor:w,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let IM;var IW={get paint(){return IM=IM||new Ma({"color-relief-opacity":new yn(kt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new bo(kt["paint_color-relief"]["color-relief-color"])})}};class bS{constructor(s,c,y,w){this.context=s,this.format=y,this.texture=s.gl.createTexture(),this.update(c,w)}update(s,c,y){const{width:w,height:I}=s,A=!(this.size&&this.size[0]===w&&this.size[1]===I||y),{context:O}=this,{gl:j}=O;if(this.useMipmap=!!(c&&c.useMipmap),j.bindTexture(j.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===j.RGBA&&(!c||c.premultiply!==!1)),A)this.size=[w,I],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||Wt(s)?j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,j.UNSIGNED_BYTE,s):j.texImage2D(j.TEXTURE_2D,0,this.format,w,I,0,this.format,j.UNSIGNED_BYTE,s.data);else{const{x:Y,y:ie}=y||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||Wt(s)?j.texSubImage2D(j.TEXTURE_2D,0,Y,ie,j.RGBA,j.UNSIGNED_BYTE,s):j.texSubImage2D(j.TEXTURE_2D,0,Y,ie,w,I,j.RGBA,j.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&j.generateMipmap(j.TEXTURE_2D),O.pixelStoreUnpackFlipY.setDefault(),O.pixelStoreUnpack.setDefault(),O.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,c,y){const{context:w}=this,{gl:I}=w;I.bindTexture(I.TEXTURE_2D,this.texture),y!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=I.LINEAR),s!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,s),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,y||s),this.filter=s),c!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,c),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class PM{constructor(s,c,y,w=1,I=1,A=1,O=0){if(this.uid=s,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void st(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const j=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=I,this.blueFactor=A,this.baseShift=O;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Y=0;Y<j;Y++)this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y)],this.data[this._idx(j,Y)]=this.data[this._idx(j-1,Y)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y,0)],this.data[this._idx(Y,j)]=this.data[this._idx(Y,j-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(j,-1)]=this.data[this._idx(j-1,0)],this.data[this._idx(-1,j)]=this.data[this._idx(0,j-1)],this.data[this._idx(j,j)]=this.data[this._idx(j-1,j-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Y=0;Y<j;Y++)for(let ie=0;ie<j;ie++){const ce=this.get(Y,ie);ce>this.max&&(this.max=ce),ce<this.min&&(this.min=ce)}}get(s,c){const y=new Uint8Array(this.data.buffer),w=4*this._idx(s,c);return this.unpack(y[w],y[w+1],y[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,c){if(s<-1||s>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${s}, y: ${c}, dim: ${this.dim}`);return(c+1)*this.stride+(s+1)}unpack(s,c,y){return s*this.redFactor+c*this.greenFactor+y*this.blueFactor-this.baseShift}pack(s){return AM(s,this.getUnpackVector())}getPixels(){return new ku({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,c,y){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let w=c*this.dim,I=c*this.dim+this.dim,A=y*this.dim,O=y*this.dim+this.dim;switch(c){case-1:w=I-1;break;case 1:I=w+1}switch(y){case-1:A=O-1;break;case 1:O=A+1}const j=-c*this.dim,Y=-y*this.dim;for(let ie=A;ie<O;ie++)for(let ce=w;ce<I;ce++)this.data[this._idx(ce,ie)]=s.data[this._idx(ce+j,ie+Y)]}}function AM(d,s){const c=s[0],y=s[1],w=s[2],I=s[3],A=Math.min(c,y,w),O=Math.round((d+I)/A);return{r:Math.floor(O*A/c)%256,g:Math.floor(O*A/y)%256,b:Math.floor(O*A/w)%256}}Pt("DEMData",PM);class PW extends ja{constructor(s,c){super(s,IW,c)}_createColorRamp(s){const c={elevationStops:[],colorStops:[]},y=this._transitionablePaint._values["color-relief-color"].value.expression;if(y instanceof Ih&&y._styleExpression.expression instanceof Mn){this.colorRampExpression=y;const A=y._styleExpression.expression;c.elevationStops=A.labels,c.colorStops=[];for(const O of c.elevationStops)c.colorStops.push(A.evaluate({globals:{elevation:O}}))}if(c.elevationStops.length<1&&(c.elevationStops=[0],c.colorStops=[Cr.transparent]),c.elevationStops.length<2&&(c.elevationStops.push(c.elevationStops[0]+1),c.colorStops.push(c.colorStops[0])),c.elevationStops.length<=s)return c;const w={elevationStops:[],colorStops:[]},I=(c.elevationStops.length-1)/(s-1);for(let A=0;A<c.elevationStops.length-.5;A+=I)w.elevationStops.push(c.elevationStops[Math.round(A)]),w.colorStops.push(c.colorStops[Math.round(A)]);return st(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${s}, provided: ${c.elevationStops.length}`),w}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,c,y){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const w=this._createColorRamp(c),I=new ku({width:w.colorStops.length,height:1}),A=new ku({width:w.colorStops.length,height:1});for(let O=0;O<w.elevationStops.length;O++){const j=AM(w.elevationStops[O],y);A.setPixel(0,O,new Cr(j.r/255,j.g/255,j.b/255,1)),I.setPixel(0,O,w.colorStops[O])}return this.colorRampTextures={elevationTexture:new bS(s,A,s.gl.RGBA),colorTexture:new bS(s,I,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const AW=ra([{name:"a_pos",components:2,type:"Int16"}],4),{members:kW}=AW;function xb(d,s,c){const y=c.patternDependencies;let w=!1;for(const I of s){const A=I.paint.get(`${d}-pattern`);A.isConstant()||(w=!0);const O=A.constantOr(null);O&&(w=!0,y[O.to]=!0,y[O.from]=!0)}return w}function _S(d,s,c,y,w){const{zoom:I}=y,A=w.patternDependencies;for(const O of s){const j=O.paint.get(`${d}-pattern`).value;if(j.kind!=="constant"){let Y=j.evaluate({zoom:I-1},c,{},w.availableImages),ie=j.evaluate({zoom:I},c,{},w.availableImages),ce=j.evaluate({zoom:I+1},c,{},w.availableImages);Y=Y&&Y.name?Y.name:Y,ie=ie&&ie.name?ie.name:ie,ce=ce&&ce.name?ce.name:ce,A[Y]=!0,A[ie]=!0,A[ce]=!0,c.patterns[O.id]={min:Y,mid:ie,max:ce}}}return c}function kM(d,s,c,y,w){let I;if(w===(function(A,O,j,Y){let ie=0;for(let ce=O,be=j-Y;ce<j;ce+=Y)ie+=(A[be]-A[ce])*(A[ce+1]+A[be+1]),be=ce;return ie})(d,s,c,y)>0)for(let A=s;A<c;A+=y)I=DM(A/y|0,d[A],d[A+1],I);else for(let A=c-y;A>=s;A-=y)I=DM(A/y|0,d[A],d[A+1],I);return I&&og(I,I.next)&&(Ev(I),I=I.next),I}function Fp(d,s){if(!d)return d;s||(s=d);let c,y=d;do if(c=!1,y.steiner||!og(y,y.next)&&Qo(y.prev,y,y.next)!==0)y=y.next;else{if(Ev(y),y=s=y.prev,y===y.next)break;c=!0}while(c||y!==s);return s}function wv(d,s,c,y,w,I,A){if(!d)return;!A&&I&&(function(j,Y,ie,ce){let be=j;do be.z===0&&(be.z=xS(be.x,be.y,Y,ie,ce)),be.prevZ=be.prev,be.nextZ=be.next,be=be.next;while(be!==j);be.prevZ.nextZ=null,be.prevZ=null,(function(Ce){let Oe,ze=1;do{let Ve,et=Ce;Ce=null;let Et=null;for(Oe=0;et;){Oe++;let rt=et,ut=0;for(let Ot=0;Ot<ze&&(ut++,rt=rt.nextZ,rt);Ot++);let At=ze;for(;ut>0||At>0&&rt;)ut!==0&&(At===0||!rt||et.z<=rt.z)?(Ve=et,et=et.nextZ,ut--):(Ve=rt,rt=rt.nextZ,At--),Et?Et.nextZ=Ve:Ce=Ve,Ve.prevZ=Et,Et=Ve;et=rt}Et.nextZ=null,ze*=2}while(Oe>1)})(be)})(d,y,w,I);let O=d;for(;d.prev!==d.next;){const j=d.prev,Y=d.next;if(I?LW(d,y,w,I):MW(d))s.push(j.i,d.i,Y.i),Ev(d),d=Y.next,O=Y.next;else if((d=Y)===O){A?A===1?wv(d=RW(Fp(d),s),s,c,y,w,I,2):A===2&&DW(d,s,c,y,w,I):wv(Fp(d),s,c,y,w,I,1);break}}}function MW(d){const s=d.prev,c=d,y=d.next;if(Qo(s,c,y)>=0)return!1;const w=s.x,I=c.x,A=y.x,O=s.y,j=c.y,Y=y.y,ie=Math.min(w,I,A),ce=Math.min(O,j,Y),be=Math.max(w,I,A),Ce=Math.max(O,j,Y);let Oe=y.next;for(;Oe!==s;){if(Oe.x>=ie&&Oe.x<=be&&Oe.y>=ce&&Oe.y<=Ce&&Sv(w,O,I,j,A,Y,Oe.x,Oe.y)&&Qo(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.next}return!0}function LW(d,s,c,y){const w=d.prev,I=d,A=d.next;if(Qo(w,I,A)>=0)return!1;const O=w.x,j=I.x,Y=A.x,ie=w.y,ce=I.y,be=A.y,Ce=Math.min(O,j,Y),Oe=Math.min(ie,ce,be),ze=Math.max(O,j,Y),Ve=Math.max(ie,ce,be),et=xS(Ce,Oe,s,c,y),Et=xS(ze,Ve,s,c,y);let rt=d.prevZ,ut=d.nextZ;for(;rt&&rt.z>=et&&ut&&ut.z<=Et;){if(rt.x>=Ce&&rt.x<=ze&&rt.y>=Oe&&rt.y<=Ve&&rt!==w&&rt!==A&&Sv(O,ie,j,ce,Y,be,rt.x,rt.y)&&Qo(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,ut.x>=Ce&&ut.x<=ze&&ut.y>=Oe&&ut.y<=Ve&&ut!==w&&ut!==A&&Sv(O,ie,j,ce,Y,be,ut.x,ut.y)&&Qo(ut.prev,ut,ut.next)>=0))return!1;ut=ut.nextZ}for(;rt&&rt.z>=et;){if(rt.x>=Ce&&rt.x<=ze&&rt.y>=Oe&&rt.y<=Ve&&rt!==w&&rt!==A&&Sv(O,ie,j,ce,Y,be,rt.x,rt.y)&&Qo(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;ut&&ut.z<=Et;){if(ut.x>=Ce&&ut.x<=ze&&ut.y>=Oe&&ut.y<=Ve&&ut!==w&&ut!==A&&Sv(O,ie,j,ce,Y,be,ut.x,ut.y)&&Qo(ut.prev,ut,ut.next)>=0)return!1;ut=ut.nextZ}return!0}function RW(d,s){let c=d;do{const y=c.prev,w=c.next.next;!og(y,w)&&LM(y,c,c.next,w)&&Cv(y,w)&&Cv(w,y)&&(s.push(y.i,c.i,w.i),Ev(c),Ev(c.next),c=d=w),c=c.next}while(c!==d);return Fp(c)}function DW(d,s,c,y,w,I){let A=d;do{let O=A.next.next;for(;O!==A.prev;){if(A.i!==O.i&&zW(A,O)){let j=RM(A,O);return A=Fp(A,A.next),j=Fp(j,j.next),wv(A,s,c,y,w,I,0),void wv(j,s,c,y,w,I,0)}O=O.next}A=A.next}while(A!==d)}function OW(d,s){let c=d.x-s.x;return c===0&&(c=d.y-s.y,c===0)&&(c=(d.next.y-d.y)/(d.next.x-d.x)-(s.next.y-s.y)/(s.next.x-s.x)),c}function NW(d,s){const c=(function(w,I){let A=I;const O=w.x,j=w.y;let Y,ie=-1/0;if(og(w,A))return A;do{if(og(w,A.next))return A.next;if(j<=A.y&&j>=A.next.y&&A.next.y!==A.y){const ze=A.x+(j-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(ze<=O&&ze>ie&&(ie=ze,Y=A.x<A.next.x?A:A.next,ze===O))return Y}A=A.next}while(A!==I);if(!Y)return null;const ce=Y,be=Y.x,Ce=Y.y;let Oe=1/0;A=Y;do{if(O>=A.x&&A.x>=be&&O!==A.x&&MM(j<Ce?O:ie,j,be,Ce,j<Ce?ie:O,j,A.x,A.y)){const ze=Math.abs(j-A.y)/(O-A.x);Cv(A,w)&&(ze<Oe||ze===Oe&&(A.x>Y.x||A.x===Y.x&&FW(Y,A)))&&(Y=A,Oe=ze)}A=A.next}while(A!==ce);return Y})(d,s);if(!c)return s;const y=RM(c,d);return Fp(y,y.next),Fp(c,c.next)}function FW(d,s){return Qo(d.prev,d,s.prev)<0&&Qo(s.next,d,d.next)<0}function xS(d,s,c,y,w){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-c)*w|0)|d<<8))|d<<4))|d<<2))|d<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-y)*w|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function BW(d){let s=d,c=d;do(s.x<c.x||s.x===c.x&&s.y<c.y)&&(c=s),s=s.next;while(s!==d);return c}function MM(d,s,c,y,w,I,A,O){return(w-A)*(s-O)>=(d-A)*(I-O)&&(d-A)*(y-O)>=(c-A)*(s-O)&&(c-A)*(I-O)>=(w-A)*(y-O)}function Sv(d,s,c,y,w,I,A,O){return!(d===A&&s===O)&&MM(d,s,c,y,w,I,A,O)}function zW(d,s){return d.next.i!==s.i&&d.prev.i!==s.i&&!(function(c,y){let w=c;do{if(w.i!==c.i&&w.next.i!==c.i&&w.i!==y.i&&w.next.i!==y.i&&LM(w,w.next,c,y))return!0;w=w.next}while(w!==c);return!1})(d,s)&&(Cv(d,s)&&Cv(s,d)&&(function(c,y){let w=c,I=!1;const A=(c.x+y.x)/2,O=(c.y+y.y)/2;do w.y>O!=w.next.y>O&&w.next.y!==w.y&&A<(w.next.x-w.x)*(O-w.y)/(w.next.y-w.y)+w.x&&(I=!I),w=w.next;while(w!==c);return I})(d,s)&&(Qo(d.prev,d,s.prev)||Qo(d,s.prev,s))||og(d,s)&&Qo(d.prev,d,d.next)>0&&Qo(s.prev,s,s.next)>0)}function Qo(d,s,c){return(s.y-d.y)*(c.x-s.x)-(s.x-d.x)*(c.y-s.y)}function og(d,s){return d.x===s.x&&d.y===s.y}function LM(d,s,c,y){const w=Sb(Qo(d,s,c)),I=Sb(Qo(d,s,y)),A=Sb(Qo(c,y,d)),O=Sb(Qo(c,y,s));return w!==I&&A!==O||!(w!==0||!wb(d,c,s))||!(I!==0||!wb(d,y,s))||!(A!==0||!wb(c,d,y))||!(O!==0||!wb(c,s,y))}function wb(d,s,c){return s.x<=Math.max(d.x,c.x)&&s.x>=Math.min(d.x,c.x)&&s.y<=Math.max(d.y,c.y)&&s.y>=Math.min(d.y,c.y)}function Sb(d){return d>0?1:d<0?-1:0}function Cv(d,s){return Qo(d.prev,d,d.next)<0?Qo(d,s,d.next)>=0&&Qo(d,d.prev,s)>=0:Qo(d,s,d.prev)<0||Qo(d,d.next,s)<0}function RM(d,s){const c=wS(d.i,d.x,d.y),y=wS(s.i,s.x,s.y),w=d.next,I=s.prev;return d.next=s,s.prev=d,c.next=w,w.prev=c,y.next=c,c.prev=y,I.next=y,y.prev=I,y}function DM(d,s,c,y){const w=wS(d,s,c);return y?(w.next=y.next,w.prev=y,y.next.prev=w,y.next=w):(w.prev=w,w.next=w),w}function Ev(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function wS(d,s,c){return{i:d,x:s,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class sg{constructor(s,c){if(c>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=c}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class Cb{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}Cb.noSubdivision=new Cb({fill:new sg(0,0),line:new sg(0,0),tile:new sg(0,0),stencil:new sg(0,0),circle:1}),Pt("SubdivisionGranularityExpression",sg),Pt("SubdivisionGranularitySetting",Cb);const lg=-32768,Tv=32767;class jW{constructor(s,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=xe/s,this._canonical=c}_getKey(s,c){return(s+=32768)<<16|c+32768}_vertexToIndex(s,c){if(s<-32768||c<-32768||s>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(s),w=0|Math.round(c),I=this._getKey(y,w);if(this._vertexDictionary.has(I))return this._vertexDictionary.get(I);const A=this._vertexBuffer.length/2;return this._vertexDictionary.set(I,A),this._vertexBuffer.push(y,w),A}_subdivideTrianglesScanline(s){if(this._granularity<2)return(function(w,I){const A=[];for(let O=0;O<I.length;O+=3){const j=I[O],Y=I[O+1],ie=I[O+2],ce=w[2*j],be=w[2*j+1];(w[2*Y]-ce)*(w[2*ie+1]-be)-(w[2*Y+1]-be)*(w[2*ie]-ce)>0?(A.push(j),A.push(ie),A.push(Y)):(A.push(j),A.push(Y),A.push(ie))}return A})(this._vertexBuffer,s);const c=[],y=s.length;for(let w=0;w<y;w+=3){const I=[s[w+0],s[w+1],s[w+2]],A=[this._vertexBuffer[2*s[w+0]+0],this._vertexBuffer[2*s[w+0]+1],this._vertexBuffer[2*s[w+1]+0],this._vertexBuffer[2*s[w+1]+1],this._vertexBuffer[2*s[w+2]+0],this._vertexBuffer[2*s[w+2]+1]];let O=1/0,j=1/0,Y=-1/0,ie=-1/0;for(let ze=0;ze<3;ze++){const Ve=A[2*ze],et=A[2*ze+1];O=Math.min(O,Ve),Y=Math.max(Y,Ve),j=Math.min(j,et),ie=Math.max(ie,et)}if(O===Y||j===ie)continue;const ce=Math.floor(O/this._granularityCellSize),be=Math.ceil(Y/this._granularityCellSize),Ce=Math.floor(j/this._granularityCellSize),Oe=Math.ceil(ie/this._granularityCellSize);if(ce!==be||Ce!==Oe)for(let ze=Ce;ze<Oe;ze++){const Ve=this._scanlineGenerateVertexRingForCellRow(ze,A,I);qW(this._vertexBuffer,Ve,c)}else c.push(...I)}return c}_scanlineGenerateVertexRingForCellRow(s,c,y){const w=s*this._granularityCellSize,I=w+this._granularityCellSize,A=[];for(let O=0;O<3;O++){const j=c[2*O],Y=c[2*O+1],ie=c[2*(O+1)%6],ce=c[(2*(O+1)+1)%6],be=c[2*(O+2)%6],Ce=c[(2*(O+2)+1)%6],Oe=ie-j,ze=ce-Y,Ve=Oe===0,et=ze===0,Et=(w-Y)/ze,rt=(I-Y)/ze,ut=Math.min(Et,rt),At=Math.max(Et,rt);if(!et&&(ut>=1||At<=0)||et&&(Y<w||Y>I)){ce>=w&&ce<=I&&A.push(y[(O+1)%3]);continue}!et&&ut>0&&A.push(this._vertexToIndex(j+Oe*ut,Y+ze*ut));const Ot=j+Oe*Math.max(ut,0),lr=j+Oe*Math.min(At,1);Ve||this._generateIntraEdgeVertices(A,j,Y,ie,ce,Ot,lr),!et&&At<1&&A.push(this._vertexToIndex(j+Oe*At,Y+ze*At)),(et||ce>=w&&ce<=I)&&A.push(y[(O+1)%3]),!et&&(ce<=w||ce>=I)&&this._generateInterEdgeVertices(A,j,Y,ie,ce,be,Ce,lr,w,I)}return A}_generateIntraEdgeVertices(s,c,y,w,I,A,O){const j=w-c,Y=I-y,ie=Y===0,ce=ie?Math.min(c,w):Math.min(A,O),be=ie?Math.max(c,w):Math.max(A,O),Ce=Math.floor(ce/this._granularityCellSize)+1,Oe=Math.ceil(be/this._granularityCellSize)-1;if(ie?c<w:A<O)for(let ze=Ce;ze<=Oe;ze++){const Ve=ze*this._granularityCellSize;s.push(this._vertexToIndex(Ve,y+Y*(Ve-c)/j))}else for(let ze=Oe;ze>=Ce;ze--){const Ve=ze*this._granularityCellSize;s.push(this._vertexToIndex(Ve,y+Y*(Ve-c)/j))}}_generateInterEdgeVertices(s,c,y,w,I,A,O,j,Y,ie){const ce=I-y,be=A-w,Ce=O-I,Oe=(Y-I)/Ce,ze=(ie-I)/Ce,Ve=Math.min(Oe,ze),et=Math.max(Oe,ze),Et=w+be*Ve;let rt=Math.floor(Math.min(Et,j)/this._granularityCellSize)+1,ut=Math.ceil(Math.max(Et,j)/this._granularityCellSize)-1,At=j<Et;const Ot=Ce===0;if(Ot&&(O===Y||O===ie))return;if(Ot||Ve>=1||et<=0){const Ir=y-O,wr=A+(c-A)*Math.min((Y-O)/Ir,(ie-O)/Ir);rt=Math.floor(Math.min(wr,j)/this._granularityCellSize)+1,ut=Math.ceil(Math.max(wr,j)/this._granularityCellSize)-1,At=j<wr}const lr=ce>0?ie:Y;if(At)for(let Ir=rt;Ir<=ut;Ir++)s.push(this._vertexToIndex(Ir*this._granularityCellSize,lr));else for(let Ir=ut;Ir>=rt;Ir--)s.push(this._vertexToIndex(Ir*this._granularityCellSize,lr))}_generateOutline(s){const c=[];for(const y of s){const w=Bp(y,this._granularity,!0),I=this._pointArrayToIndices(w),A=[];for(let O=1;O<I.length;O++)A.push(I[O-1]),A.push(I[O]);c.push(A)}return c}_handlePoles(s){let c=!1,y=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(c||y)&&this._fillPoles(s,c,y)}_ensureNoPoleVertices(){const s=this._vertexBuffer;for(let c=0;c<s.length;c+=2){const y=s[c+1];y===lg&&(s[c+1]=-32767),y===Tv&&(s[c+1]=32766)}}_generatePoleQuad(s,c,y,w,I,A){w>I!=(A===lg)?(s.push(c),s.push(y),s.push(this._vertexToIndex(w,A)),s.push(y),s.push(this._vertexToIndex(I,A)),s.push(this._vertexToIndex(w,A))):(s.push(y),s.push(c),s.push(this._vertexToIndex(w,A)),s.push(this._vertexToIndex(I,A)),s.push(y),s.push(this._vertexToIndex(w,A)))}_fillPoles(s,c,y){const w=this._vertexBuffer,I=xe,A=s.length;for(let O=2;O<A;O+=3){const j=s[O-2],Y=s[O-1],ie=s[O],ce=w[2*j],be=w[2*j+1],Ce=w[2*Y],Oe=w[2*Y+1],ze=w[2*ie],Ve=w[2*ie+1];c&&(be===0&&Oe===0&&this._generatePoleQuad(s,j,Y,ce,Ce,lg),Oe===0&&Ve===0&&this._generatePoleQuad(s,Y,ie,Ce,ze,lg),Ve===0&&be===0&&this._generatePoleQuad(s,ie,j,ze,ce,lg)),y&&(be===I&&Oe===I&&this._generatePoleQuad(s,j,Y,ce,Ce,Tv),Oe===I&&Ve===I&&this._generatePoleQuad(s,Y,ie,Ce,ze,Tv),Ve===I&&be===I&&this._generatePoleQuad(s,ie,j,ze,ce,Tv))}}_initializeVertices(s){for(let c=0;c<s.length;c+=2)this._vertexToIndex(s[c],s[c+1])}subdividePolygonInternal(s,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:w}=(function(O){const j=[],Y=[];for(const ie of O)if(ie.length!==0){ie!==O[0]&&j.push(Y.length/2);for(let ce=0;ce<ie.length;ce++)Y.push(ie[ce].x),Y.push(ie[ce].y)}return{flattened:Y,holeIndices:j}})(s);let I;this._initializeVertices(y);try{const O=(function(Y,ie,ce=2){const be=ie&&ie.length,Ce=be?ie[0]*ce:Y.length;let Oe=kM(Y,0,Ce,ce,!0);const ze=[];if(!Oe||Oe.next===Oe.prev)return ze;let Ve,et,Et;if(be&&(Oe=(function(rt,ut,At,Ot){const lr=[];for(let Ir=0,wr=ut.length;Ir<wr;Ir++){const Or=kM(rt,ut[Ir]*Ot,Ir<wr-1?ut[Ir+1]*Ot:rt.length,Ot,!1);Or===Or.next&&(Or.steiner=!0),lr.push(BW(Or))}lr.sort(OW);for(let Ir=0;Ir<lr.length;Ir++)At=NW(lr[Ir],At);return At})(Y,ie,Oe,ce)),Y.length>80*ce){Ve=Y[0],et=Y[1];let rt=Ve,ut=et;for(let At=ce;At<Ce;At+=ce){const Ot=Y[At],lr=Y[At+1];Ot<Ve&&(Ve=Ot),lr<et&&(et=lr),Ot>rt&&(rt=Ot),lr>ut&&(ut=lr)}Et=Math.max(rt-Ve,ut-et),Et=Et!==0?32767/Et:0}return wv(Oe,ze,ce,Ve,et,Et,0),ze})(y,w),j=this._convertIndices(y,O);I=this._subdivideTrianglesScanline(j)}catch(O){console.error(O)}let A=[];return c&&(A=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(I),{verticesFlattened:this._vertexBuffer,indicesTriangles:I,indicesLineList:A}}_convertIndices(s,c){const y=[];for(let w=0;w<c.length;w++)y.push(this._vertexToIndex(s[2*c[w]],s[2*c[w]+1]));return y}_pointArrayToIndices(s){const c=[];for(let y=0;y<s.length;y++){const w=s[y];c.push(this._vertexToIndex(w.x,w.y))}return c}}function OM(d,s,c,y=!0){return new jW(c,s).subdividePolygonInternal(d,y)}function Bp(d,s,c=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const y=d[0],w=d[d.length-1],I=c&&(y.x!==w.x||y.y!==w.y);if(s<2)return I?[...d,d[0]]:[...d];const A=Math.floor(xe/s),O=[];O.push(new f(d[0].x,d[0].y));const j=d.length,Y=I?j:j-1;for(let ie=0;ie<Y;ie++){const ce=d[ie],be=ie<j-1?d[ie+1]:d[0],Ce=ce.x,Oe=ce.y,ze=be.x,Ve=be.y,et=Ce!==ze,Et=Oe!==Ve;if(!et&&!Et)continue;const rt=ze-Ce,ut=Ve-Oe,At=Math.abs(rt),Ot=Math.abs(ut);let lr=Ce,Ir=Oe;for(;;){const Or=rt>0?(Math.floor(lr/A)+1)*A:(Math.ceil(lr/A)-1)*A,an=ut>0?(Math.floor(Ir/A)+1)*A:(Math.ceil(Ir/A)-1)*A,jr=Math.abs(lr-Or),Er=Math.abs(Ir-an),vr=Math.abs(lr-ze),vn=Math.abs(Ir-Ve),hn=et?jr/At:Number.POSITIVE_INFINITY,xn=Et?Er/Ot:Number.POSITIVE_INFINITY;if((vr<=jr||!et)&&(vn<=Er||!Et))break;if(hn<xn&&et||!Et){lr=Or,Ir+=ut*hn;const un=new f(lr,Math.round(Ir));O[O.length-1].x===un.x&&O[O.length-1].y===un.y||O.push(un)}else{lr+=rt*xn,Ir=an;const un=new f(Math.round(lr),Ir);O[O.length-1].x===un.x&&O[O.length-1].y===un.y||O.push(un)}}const wr=new f(ze,Ve);O[O.length-1].x===wr.x&&O[O.length-1].y===wr.y||O.push(wr)}return O}function qW(d,s,c){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,w=d[2*s[0]];for(let j=1;j<s.length;j++){const Y=d[2*s[j]];Y<w&&(w=Y,y=j)}const I=s.length;let A=y,O=(A+1)%I;for(;;){const j=A-1>=0?A-1:I-1,Y=(O+1)%I,ie=d[2*s[j]],ce=d[2*s[Y]],be=d[2*s[A]],Ce=d[2*s[A]+1],Oe=d[2*s[O]+1];let ze=!1;if(ie<ce)ze=!0;else if(ie>ce)ze=!1;else{const Ve=Oe-Ce,et=-(d[2*s[O]]-be),Et=Ce<Oe?1:-1;((ie-be)*Ve+(d[2*s[j]+1]-Ce)*et)*Et>((ce-be)*Ve+(d[2*s[Y]+1]-Ce)*et)*Et&&(ze=!0)}if(ze){const Ve=s[j],et=s[A],Et=s[O];Ve!==et&&Ve!==Et&&et!==Et&&c.push(Et,et,Ve),A--,A<0&&(A=I-1)}else{const Ve=s[Y],et=s[A],Et=s[O];Ve!==et&&Ve!==Et&&et!==Et&&c.push(Et,et,Ve),O++,O>=I&&(O=0)}if(j===Y)break}}function NM(d,s,c,y,w,I,A,O,j){const Y=w.length/2,ie=A&&O&&j;if(Y<on.MAX_VERTEX_ARRAY_LENGTH){const ce=s.prepareSegment(Y,c,y),be=ce.vertexLength;for(let ze=0;ze<I.length;ze+=3)y.emplaceBack(be+I[ze],be+I[ze+1],be+I[ze+2]);let Ce,Oe;ce.vertexLength+=Y,ce.primitiveLength+=I.length/3,ie&&(Oe=A.prepareSegment(Y,c,O),Ce=Oe.vertexLength,Oe.vertexLength+=Y);for(let ze=0;ze<w.length;ze+=2)d(w[ze],w[ze+1]);if(ie)for(let ze=0;ze<j.length;ze++){const Ve=j[ze];for(let et=1;et<Ve.length;et+=2)O.emplaceBack(Ce+Ve[et-1],Ce+Ve[et]);Oe.primitiveLength+=Ve.length/2}}else(function(ce,be,Ce,Oe,ze,Ve){const et=[];for(let Ot=0;Ot<Oe.length/2;Ot++)et.push(-1);const Et={count:0};let rt=0,ut=ce.getOrCreateLatestSegment(be,Ce),At=ut.vertexLength;for(let Ot=2;Ot<ze.length;Ot+=3){const lr=ze[Ot-2],Ir=ze[Ot-1],wr=ze[Ot];let Or=et[lr]<rt,an=et[Ir]<rt,jr=et[wr]<rt;ut.vertexLength+((Or?1:0)+(an?1:0)+(jr?1:0))>on.MAX_VERTEX_ARRAY_LENGTH&&(ut=ce.createNewSegment(be,Ce),rt=Et.count,Or=!0,an=!0,jr=!0,At=0);const Er=Iv(et,Oe,Ve,Et,lr,Or,ut),vr=Iv(et,Oe,Ve,Et,Ir,an,ut),vn=Iv(et,Oe,Ve,Et,wr,jr,ut);Ce.emplaceBack(At+Er-rt,At+vr-rt,At+vn-rt),ut.primitiveLength++}})(s,c,y,w,I,d),ie&&(function(ce,be,Ce,Oe,ze,Ve){const et=[];for(let Ot=0;Ot<Oe.length/2;Ot++)et.push(-1);const Et={count:0};let rt=0,ut=ce.getOrCreateLatestSegment(be,Ce),At=ut.vertexLength;for(let Ot=0;Ot<ze.length;Ot++){const lr=ze[Ot];for(let Ir=1;Ir<ze[Ot].length;Ir+=2){const wr=lr[Ir-1],Or=lr[Ir];let an=et[wr]<rt,jr=et[Or]<rt;ut.vertexLength+((an?1:0)+(jr?1:0))>on.MAX_VERTEX_ARRAY_LENGTH&&(ut=ce.createNewSegment(be,Ce),rt=Et.count,an=!0,jr=!0,At=0);const Er=Iv(et,Oe,Ve,Et,wr,an,ut),vr=Iv(et,Oe,Ve,Et,Or,jr,ut);Ce.emplaceBack(At+Er-rt,At+vr-rt),ut.primitiveLength++}}})(A,c,O,w,j,d),s.forceNewSegmentOnNextPrepare(),A?.forceNewSegmentOnNextPrepare()}function Iv(d,s,c,y,w,I,A){if(I){const O=y.count;return c(s[2*w],s[2*w+1]),d[w]=y.count,y.count++,A.vertexLength++,O}return d[w]}class SS{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=s.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new pt,this.indexArray=new mr,this.indexArray2=new Yr,this.programConfigurations=new jf(s.layers,s.zoom),this.segments=new on,this.segments2=new on,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(s,c,y){this.hasDependencies=xb("fill",this.layers,c);const w=this.layers[0].layout.get("fill-sort-key"),I=!w.isConstant(),A=[];for(const{feature:O,id:j,index:Y,sourceLayerIndex:ie}of s){const ce=this.layers[0]._featureFilter.needGeometry,be=ef(O,ce);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),be,y))continue;const Ce=I?w.evaluate(be,{},y,c.availableImages):void 0,Oe={id:j,properties:O.properties,type:O.type,sourceLayerIndex:ie,index:Y,geometry:ce?be.geometry:Qd(O),patterns:{},sortKey:Ce};A.push(Oe)}I&&A.sort(((O,j)=>O.sortKey-j.sortKey));for(const O of A){const{geometry:j,index:Y,sourceLayerIndex:ie}=O;if(this.hasDependencies){const ce=_S("fill",this.layers,O,{zoom:this.zoom},c);this.patternFeatures.push(ce)}else this.addFeature(O,j,Y,y,{},c.subdivisionGranularity);c.featureIndex.insert(s[Y].feature,j,Y,ie,this.index)}}update(s,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,{imagePositions:y})}addFeatures(s,c,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,c,y,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,kW),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,c,y,w,I,A){for(const O of hl(c,500)){const j=OM(O,w,A.fill.getGranularityForZoomLevel(w.z)),Y=this.layoutVertexArray;NM(((ie,ce)=>{Y.emplaceBack(ie,ce)}),this.segments,this.layoutVertexArray,this.indexArray,j.verticesFlattened,j.indicesTriangles,this.segments2,this.indexArray2,j.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,{imagePositions:I,canonical:w})}}let FM,BM;Pt("FillBucket",SS,{omit:["layers","patternFeatures"]});var VW={get paint(){return BM=BM||new Ma({"fill-antialias":new yn(kt.paint_fill["fill-antialias"]),"fill-opacity":new mn(kt.paint_fill["fill-opacity"]),"fill-color":new mn(kt.paint_fill["fill-color"]),"fill-outline-color":new mn(kt.paint_fill["fill-outline-color"]),"fill-translate":new yn(kt.paint_fill["fill-translate"]),"fill-translate-anchor":new yn(kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ds(kt.paint_fill["fill-pattern"])})},get layout(){return FM=FM||new Ma({"fill-sort-key":new mn(kt.layout_fill["fill-sort-key"])})}};class $W extends ja{constructor(s,c){super(s,VW,c)}recalculate(s,c){super.recalculate(s,c);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new SS(s)}queryRadius(){return bb(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:c,transform:y,pixelsToTileUnits:w}){return gM(_b(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,w),c)}isTileClipped(){return!0}}const GW=ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),UW=ra([{name:"a_centroid",components:2,type:"Int16"}],4),{members:HW}=GW;class Pv{constructor(s,c,y,w,I){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=s,this._geometry=-1,this._keys=w,this._values=I,s.readFields(WW,this,c)}loadGeometry(){const s=this._pbf;s.pos=this._geometry;const c=s.readVarint()+s.pos,y=[];let w,I=1,A=0,O=0,j=0;for(;s.pos<c;){if(A<=0){const Y=s.readVarint();I=7&Y,A=Y>>3}if(A--,I===1||I===2)O+=s.readSVarint(),j+=s.readSVarint(),I===1&&(w&&y.push(w),w=[]),w&&w.push(new f(O,j));else{if(I!==7)throw new Error(`unknown command ${I}`);w&&w.push(w[0].clone())}}return w&&y.push(w),y}bbox(){const s=this._pbf;s.pos=this._geometry;const c=s.readVarint()+s.pos;let y=1,w=0,I=0,A=0,O=1/0,j=-1/0,Y=1/0,ie=-1/0;for(;s.pos<c;){if(w<=0){const ce=s.readVarint();y=7&ce,w=ce>>3}if(w--,y===1||y===2)I+=s.readSVarint(),A+=s.readSVarint(),I<O&&(O=I),I>j&&(j=I),A<Y&&(Y=A),A>ie&&(ie=A);else if(y!==7)throw new Error(`unknown command ${y}`)}return[O,Y,j,ie]}toGeoJSON(s,c,y){const w=this.extent*Math.pow(2,y),I=this.extent*s,A=this.extent*c,O=this.loadGeometry();function j(be){return[360*(be.x+I)/w-180,360/Math.PI*Math.atan(Math.exp((1-2*(be.y+A)/w)*Math.PI))-90]}function Y(be){return be.map(j)}let ie;if(this.type===1){const be=[];for(const Oe of O)be.push(Oe[0]);const Ce=Y(be);ie=be.length===1?{type:"Point",coordinates:Ce[0]}:{type:"MultiPoint",coordinates:Ce}}else if(this.type===2){const be=O.map(Y);ie=be.length===1?{type:"LineString",coordinates:be[0]}:{type:"MultiLineString",coordinates:be}}else{if(this.type!==3)throw new Error("unknown feature type");{const be=zM(O),Ce=[];for(const Oe of be)Ce.push(Oe.map(Y));ie=Ce.length===1?{type:"Polygon",coordinates:Ce[0]}:{type:"MultiPolygon",coordinates:Ce}}}const ce={type:"Feature",geometry:ie,properties:this.properties};return this.id!=null&&(ce.id=this.id),ce}}function WW(d,s,c){d===1?s.id=c.readVarint():d===2?(function(y,w){const I=y.readVarint()+y.pos;for(;y.pos<I;){const A=w._keys[y.readVarint()],O=w._values[y.readVarint()];w.properties[A]=O}})(c,s):d===3?s.type=c.readVarint():d===4&&(s._geometry=c.pos)}function zM(d){const s=d.length;if(s<=1)return[d];const c=[];let y,w;for(let I=0;I<s;I++){const A=XW(d[I]);A!==0&&(w===void 0&&(w=A<0),w===A<0?(y&&c.push(y),y=[d[I]]):y&&y.push(d[I]))}return y&&c.push(y),c}function XW(d){let s=0;for(let c,y,w=0,I=d.length,A=I-1;w<I;A=w++)c=d[w],y=d[A],s+=(y.x-c.x)*(c.y+y.y);return s}Pv.types=["Unknown","Point","LineString","Polygon"];class YW{constructor(s,c){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(ZW,this,c),this.length=this._features.length}feature(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];const c=this._pbf.readVarint()+this._pbf.pos;return new Pv(this._pbf,c,this.extent,this._keys,this._values)}}function ZW(d,s,c){d===15?s.version=c.readVarint():d===1?s.name=c.readString():d===5?s.extent=c.readVarint():d===2?s._features.push(c.pos):d===3?s._keys.push(c.readString()):d===4&&s._values.push((function(y){let w=null;const I=y.readVarint()+y.pos;for(;y.pos<I;){const A=y.readVarint()>>3;w=A===1?y.readString():A===2?y.readFloat():A===3?y.readDouble():A===4?y.readVarint64():A===5?y.readVarint():A===6?y.readSVarint():A===7?y.readBoolean():null}if(w==null)throw new Error("unknown feature value");return w})(c))}class jM{constructor(s,c){this.layers=s.readFields(KW,{},c)}}function KW(d,s,c){if(d===3){const y=new YW(c,c.readVarint()+c.pos);y.length&&(s[y.name]=y)}}const CS=Math.pow(2,13);function Av(d,s,c,y,w,I,A,O){d.emplaceBack(s,c,2*Math.floor(y*CS)+A,w*CS*2,I*CS*2,Math.round(O))}class ES{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=s.index,this.hasDependencies=!1,this.layoutVertexArray=new _t,this.centroidVertexArray=new ft,this.indexArray=new mr,this.programConfigurations=new jf(s.layers,s.zoom),this.segments=new on,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(s,c,y){this.features=[],this.hasDependencies=xb("fill-extrusion",this.layers,c);for(const{feature:w,id:I,index:A,sourceLayerIndex:O}of s){const j=this.layers[0]._featureFilter.needGeometry,Y=ef(w,j);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),Y,y))continue;const ie={id:I,sourceLayerIndex:O,index:A,geometry:j?Y.geometry:Qd(w),properties:w.properties,type:w.type,patterns:{}};this.hasDependencies?this.features.push(_S("fill-extrusion",this.layers,ie,{zoom:this.zoom},c)):this.addFeature(ie,ie.geometry,A,y,{},c.subdivisionGranularity),c.featureIndex.insert(w,ie.geometry,A,O,this.index,!0)}}addFeatures(s,c,y){for(const w of this.features){const{geometry:I}=w;this.addFeature(w,I,w.index,c,y,s.subdivisionGranularity)}}update(s,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,HW),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,UW.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,c,y,w,I,A){for(const O of hl(c,500)){const j={x:0,y:0,sampleCount:0},Y=this.layoutVertexArray.length;this.processPolygon(j,w,s,O,A);const ie=this.layoutVertexArray.length-Y,ce=Math.floor(j.x/j.sampleCount),be=Math.floor(j.y/j.sampleCount);for(let Ce=0;Ce<ie;Ce++)this.centroidVertexArray.emplaceBack(ce,be)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,{imagePositions:I,canonical:w})}processPolygon(s,c,y,w,I){if(w.length<1||qM(w[0]))return;for(const ce of w)ce.length!==0&&JW(s,ce);const A={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},O=I.fill.getGranularityForZoomLevel(c.z),j=Pv.types[y.type]==="Polygon";for(const ce of w){if(ce.length===0||qM(ce))continue;const be=Bp(ce,O,j);this._generateSideFaces(be,A)}if(!j)return;const Y=OM(w,c,O,!1),ie=this.layoutVertexArray;NM(((ce,be)=>{Av(ie,ce,be,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,Y.verticesFlattened,Y.indicesTriangles)}_generateSideFaces(s,c){let y=0;for(let w=1;w<s.length;w++){const I=s[w],A=s[w-1];if(QW(I,A))continue;c.segment.vertexLength+4>on.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const O=I.sub(A)._perp()._unit(),j=A.dist(I);y+j>32768&&(y=0),Av(this.layoutVertexArray,I.x,I.y,O.x,O.y,0,0,y),Av(this.layoutVertexArray,I.x,I.y,O.x,O.y,0,1,y),y+=j,Av(this.layoutVertexArray,A.x,A.y,O.x,O.y,0,0,y),Av(this.layoutVertexArray,A.x,A.y,O.x,O.y,0,1,y);const Y=c.segment.vertexLength;this.indexArray.emplaceBack(Y,Y+2,Y+1),this.indexArray.emplaceBack(Y+1,Y+2,Y+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function JW(d,s){for(let c=0;c<s.length;c++){const y=s[c];c===s.length-1&&s[0].x===y.x&&s[0].y===y.y||(d.x+=y.x,d.y+=y.y,d.sampleCount++)}}function QW(d,s){return d.x===s.x&&(d.x<0||d.x>xe)||d.y===s.y&&(d.y<0||d.y>xe)}function qM(d){return d.every((s=>s.x<0))||d.every((s=>s.x>xe))||d.every((s=>s.y<0))||d.every((s=>s.y>xe))}let VM;Pt("FillExtrusionBucket",ES,{omit:["layers","features"]});var eX={get paint(){return VM=VM||new Ma({"fill-extrusion-opacity":new yn(kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mn(kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yn(kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yn(kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ds(kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mn(kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mn(kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yn(kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class tX extends ja{constructor(s,c){super(s,eX,c)}createBucket(s){return new ES(s)}queryRadius(){return bb(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:c,featureState:y,geometry:w,transform:I,pixelsToTileUnits:A,pixelPosMatrix:O}){const j=_b(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-I.bearingInRadians,A),Y=this.paint.get("fill-extrusion-height").evaluate(c,y),ie=this.paint.get("fill-extrusion-base").evaluate(c,y),ce=(function(Ce,Oe){const ze=[];for(const Ve of Ce){const et=[Ve.x,Ve.y,0,1];se(et,et,Oe),ze.push(new f(et[0]/et[3],et[1]/et[3]))}return ze})(j,O),be=(function(Ce,Oe,ze,Ve){const et=[],Et=[],rt=Ve[8]*Oe,ut=Ve[9]*Oe,At=Ve[10]*Oe,Ot=Ve[11]*Oe,lr=Ve[8]*ze,Ir=Ve[9]*ze,wr=Ve[10]*ze,Or=Ve[11]*ze;for(const an of Ce){const jr=[],Er=[];for(const vr of an){const vn=vr.x,hn=vr.y,xn=Ve[0]*vn+Ve[4]*hn+Ve[12],un=Ve[1]*vn+Ve[5]*hn+Ve[13],Nn=Ve[2]*vn+Ve[6]*hn+Ve[14],Zi=Ve[3]*vn+Ve[7]*hn+Ve[15],Oi=Nn+At,fo=Zi+Ot,Cl=xn+lr,fs=un+Ir,ho=Nn+wr,to=Zi+Or,fa=new f((xn+rt)/fo,(un+ut)/fo);fa.z=Oi/fo,jr.push(fa);const ko=new f(Cl/to,fs/to);ko.z=ho/to,Er.push(ko)}et.push(jr),Et.push(Er)}return[et,Et]})(w,ie,Y,O);return(function(Ce,Oe,ze){let Ve=1/0;gM(ze,Oe)&&(Ve=$M(ze,Oe[0]));for(let et=0;et<Oe.length;et++){const Et=Oe[et],rt=Ce[et];for(let ut=0;ut<Et.length-1;ut++){const At=Et[ut],Ot=[At,Et[ut+1],rt[ut+1],rt[ut],At];ng(ze,Ot)&&(Ve=Math.min(Ve,$M(ze,Ot)))}}return Ve!==1/0&&Ve})(be[0],be[1],ce)}}function kv(d,s){return d.x*s.x+d.y*s.y}function $M(d,s){if(d.length===1){let c=0;const y=s[c++];let w;for(;!w||y.equals(w);)if(w=s[c++],!w)return 1/0;for(;c<s.length;c++){const I=s[c],A=d[0],O=w.sub(y),j=I.sub(y),Y=A.sub(y),ie=kv(O,O),ce=kv(O,j),be=kv(j,j),Ce=kv(Y,O),Oe=kv(Y,j),ze=ie*be-ce*ce,Ve=(be*Ce-ce*Oe)/ze,et=(ie*Oe-ce*Ce)/ze,Et=y.z*(1-Ve-et)+w.z*Ve+I.z*et;if(isFinite(Et))return Et}return 1/0}{let c=1/0;for(const y of s)c=Math.min(c,y.z);return c}}const rX=ra([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:nX}=rX,iX=ra([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:aX}=iX,oX=Math.cos(Math.PI/180*37.5),GM=Math.pow(2,14)/.5;class TS{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=s.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((c=>{this.gradients[c.id]={}})),this.layoutVertexArray=new Lt,this.layoutVertexArray2=new xt,this.indexArray=new mr,this.programConfigurations=new jf(s.layers,s.zoom),this.segments=new on,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(s,c,y){this.hasDependencies=xb("line",this.layers,c)||this.hasLineDasharray(this.layers);const w=this.layers[0].layout.get("line-sort-key"),I=!w.isConstant(),A=[];for(const{feature:O,id:j,index:Y,sourceLayerIndex:ie}of s){const ce=this.layers[0]._featureFilter.needGeometry,be=ef(O,ce);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),be,y))continue;const Ce=I?w.evaluate(be,{},y):void 0,Oe={id:j,properties:O.properties,type:O.type,sourceLayerIndex:ie,index:Y,geometry:ce?be.geometry:Qd(O),patterns:{},dashes:{},sortKey:Ce};A.push(Oe)}I&&A.sort(((O,j)=>O.sortKey-j.sortKey));for(const O of A){const{geometry:j,index:Y,sourceLayerIndex:ie}=O;this.hasDependencies?(xb("line",this.layers,c)?_S("line",this.layers,O,{zoom:this.zoom},c):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,O,this.zoom,c),this.patternFeatures.push(O)):this.addFeature(O,j,Y,y,{},{},c.subdivisionGranularity),c.featureIndex.insert(s[Y].feature,j,Y,ie,this.index)}}update(s,c,y,w){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,{imagePositions:y,dashPositions:w})}addFeatures(s,c,y,w){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,c,y,w,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,aX)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,nX),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,c,y,w,I,A,O){const j=this.layers[0].layout,Y=j.get("line-join").evaluate(s,{}),ie=j.get("line-cap"),ce=j.get("line-miter-limit"),be=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const Ce of c)this.addLine(Ce,s,Y,ie,ce,be,w,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,{imagePositions:I,dashPositions:A,canonical:w})}addLine(s,c,y,w,I,A,O,j){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=Bp(s,O?j.line.getGranularityForZoomLevel(O.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let rt=0;rt<s.length-1;rt++)this.totalDistance+=s[rt].dist(s[rt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Y=Pv.types[c.type]==="Polygon";let ie=s.length;for(;ie>=2&&s[ie-1].equals(s[ie-2]);)ie--;let ce=0;for(;ce<ie-1&&s[ce].equals(s[ce+1]);)ce++;if(ie<(Y?3:2))return;y==="bevel"&&(I=1.05);const be=this.overscaling<=16?122880/(512*this.overscaling):0,Ce=this.segments.prepareSegment(10*ie,this.layoutVertexArray,this.indexArray);let Oe,ze,Ve,et,Et;this.e1=this.e2=-1,Y&&(Oe=s[ie-2],Et=s[ce].sub(Oe)._unit()._perp());for(let rt=ce;rt<ie;rt++){if(Ve=rt===ie-1?Y?s[ce+1]:void 0:s[rt+1],Ve&&s[rt].equals(Ve))continue;Et&&(et=Et),Oe&&(ze=Oe),Oe=s[rt],Et=Ve?Ve.sub(Oe)._unit()._perp():et,et=et||Et;let ut=et.add(Et);ut.x===0&&ut.y===0||ut._unit();const At=et.x*Et.x+et.y*Et.y,Ot=ut.x*Et.x+ut.y*Et.y,lr=Ot!==0?1/Ot:1/0,Ir=2*Math.sqrt(2-2*Ot),wr=Ot<oX&&ze&&Ve,Or=et.x*Et.y-et.y*Et.x>0;if(wr&&rt>ce){const Er=Oe.dist(ze);if(Er>2*be){const vr=Oe.sub(Oe.sub(ze)._mult(be/Er)._round());this.updateDistance(ze,vr),this.addCurrentVertex(vr,et,0,0,Ce),ze=vr}}const an=ze&&Ve;let jr=an?y:Y?"butt":w;if(an&&jr==="round"&&(lr<A?jr="miter":lr<=2&&(jr="fakeround")),jr==="miter"&&lr>I&&(jr="bevel"),jr==="bevel"&&(lr>2&&(jr="flipbevel"),lr<I&&(jr="miter")),ze&&this.updateDistance(ze,Oe),jr==="miter")ut._mult(lr),this.addCurrentVertex(Oe,ut,0,0,Ce);else if(jr==="flipbevel"){if(lr>100)ut=Et.mult(-1);else{const Er=lr*et.add(Et).mag()/et.sub(Et).mag();ut._perp()._mult(Er*(Or?-1:1))}this.addCurrentVertex(Oe,ut,0,0,Ce),this.addCurrentVertex(Oe,ut.mult(-1),0,0,Ce)}else if(jr==="bevel"||jr==="fakeround"){const Er=-Math.sqrt(lr*lr-1),vr=Or?Er:0,vn=Or?0:Er;if(ze&&this.addCurrentVertex(Oe,et,vr,vn,Ce),jr==="fakeround"){const hn=Math.round(180*Ir/Math.PI/20);for(let xn=1;xn<hn;xn++){let un=xn/hn;if(un!==.5){const Zi=un-.5;un+=un*Zi*(un-1)*((1.0904+At*(At*(3.55645-1.43519*At)-3.2452))*Zi*Zi+(.848013+At*(.215638*At-1.06021)))}const Nn=Et.sub(et)._mult(un)._add(et)._unit()._mult(Or?-1:1);this.addHalfVertex(Oe,Nn.x,Nn.y,!1,Or,0,Ce)}}Ve&&this.addCurrentVertex(Oe,Et,-vr,-vn,Ce)}else if(jr==="butt")this.addCurrentVertex(Oe,ut,0,0,Ce);else if(jr==="square"){const Er=ze?1:-1;this.addCurrentVertex(Oe,ut,Er,Er,Ce)}else jr==="round"&&(ze&&(this.addCurrentVertex(Oe,et,0,0,Ce),this.addCurrentVertex(Oe,et,1,1,Ce,!0)),Ve&&(this.addCurrentVertex(Oe,Et,-1,-1,Ce,!0),this.addCurrentVertex(Oe,Et,0,0,Ce)));if(wr&&rt<ie-1){const Er=Oe.dist(Ve);if(Er>2*be){const vr=Oe.add(Ve.sub(Oe)._mult(be/Er)._round());this.updateDistance(Oe,vr),this.addCurrentVertex(vr,Et,0,0,Ce),Oe=vr}}}}addCurrentVertex(s,c,y,w,I,A=!1){const O=c.y*w-c.x,j=-c.y-c.x*w;this.addHalfVertex(s,c.x+c.y*y,c.y-c.x*y,A,!1,y,I),this.addHalfVertex(s,O,j,A,!0,-w,I),this.distance>GM/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,c,y,w,I,A))}addHalfVertex({x:s,y:c},y,w,I,A,O,j){const Y=.5*(this.lineClips?this.scaledDistance*(GM-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(I?1:0),(c<<1)+(A?1:0),Math.round(63*y)+128,Math.round(63*w)+128,1+(O===0?0:O<0?-1:1)|(63&Y)<<2,Y>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ie=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ie,this.e2),j.primitiveLength++),A?this.e2=ie:this.e1=ie}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,c){this.distance+=s.dist(c),this.updateScaledDistance()}hasLineDasharray(s){for(const c of s){const y=c.paint.get("line-dasharray");if(y&&!y.isConstant())return!0}return!1}addLineDashDependencies(s,c,y,w){for(const I of s){const A=I.paint.get("line-dasharray");if(!A||A.value.kind==="constant")continue;const O=I.layout.get("line-cap")==="round",j={dasharray:A.value.evaluate({zoom:y-1},c,{}),round:O},Y={dasharray:A.value.evaluate({zoom:y},c,{}),round:O},ie={dasharray:A.value.evaluate({zoom:y+1},c,{}),round:O},ce=`${j.dasharray.join(",")},${j.round}`,be=`${Y.dasharray.join(",")},${Y.round}`,Ce=`${ie.dasharray.join(",")},${ie.round}`;w.dashDependencies[ce]=j,w.dashDependencies[be]=Y,w.dashDependencies[Ce]=ie,c.dashes[I.id]={min:ce,mid:be,max:Ce}}}}let UM,HM;Pt("LineBucket",TS,{omit:["layers","patternFeatures"]});var WM={get paint(){return HM=HM||new Ma({"line-opacity":new mn(kt.paint_line["line-opacity"]),"line-color":new mn(kt.paint_line["line-color"]),"line-translate":new yn(kt.paint_line["line-translate"]),"line-translate-anchor":new yn(kt.paint_line["line-translate-anchor"]),"line-width":new mn(kt.paint_line["line-width"]),"line-gap-width":new mn(kt.paint_line["line-gap-width"]),"line-offset":new mn(kt.paint_line["line-offset"]),"line-blur":new mn(kt.paint_line["line-blur"]),"line-dasharray":new ds(kt.paint_line["line-dasharray"]),"line-pattern":new ds(kt.paint_line["line-pattern"]),"line-gradient":new bo(kt.paint_line["line-gradient"])})},get layout(){return UM=UM||new Ma({"line-cap":new yn(kt.layout_line["line-cap"]),"line-join":new mn(kt.layout_line["line-join"]),"line-miter-limit":new yn(kt.layout_line["line-miter-limit"]),"line-round-limit":new yn(kt.layout_line["line-round-limit"]),"line-sort-key":new mn(kt.layout_line["line-sort-key"])})}};class sX extends mn{possiblyEvaluate(s,c){return c=new bi(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(s,c)}evaluate(s,c,y,w){return c=Be({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(s,c,y,w)}}let Eb;class lX extends ja{constructor(s,c){super(s,WM,c),this.gradientVersion=0,Eb||(Eb=new sX(WM.paint.properties["line-width"].specification),Eb.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!(function(y){return y._styleExpression!==void 0})(c)&&c._styleExpression.expression instanceof Ft,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,c){super.recalculate(s,c),this.paint._values["line-floorwidth"]=Eb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new TS(s)}queryRadius(s){const c=s,y=XM(ag("line-width",this,c),ag("line-gap-width",this,c)),w=ag("line-offset",this,c);return y/2+Math.abs(w)+bb(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:c,featureState:y,geometry:w,transform:I,pixelsToTileUnits:A}){const O=_b(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-I.bearingInRadians,A),j=A/2*XM(this.paint.get("line-width").evaluate(c,y),this.paint.get("line-gap-width").evaluate(c,y)),Y=this.paint.get("line-offset").evaluate(c,y);return Y&&(w=(function(ie,ce){const be=[];for(let Ce=0;Ce<ie.length;Ce++){const Oe=gW(ie[Ce]),ze=[];for(let Ve=0;Ve<Oe.length;Ve++){const et=Oe[Ve],Et=Oe[Ve-1],rt=Oe[Ve+1],ut=Ve===0?new f(0,0):et.sub(Et)._unit()._perp(),At=Ve===Oe.length-1?new f(0,0):rt.sub(et)._unit()._perp(),Ot=ut._add(At)._unit(),lr=Ot.x*At.x+Ot.y*At.y;lr!==0&&Ot._mult(1/lr),ze.push(Ot._mult(ce)._add(et))}be.push(ze)}return be})(w,Y*A)),(function(ie,ce,be){for(let Ce=0;Ce<ce.length;Ce++){const Oe=ce[Ce];if(ie.length>=3){for(let ze=0;ze<Oe.length;ze++)if(ig(ie,Oe[ze]))return!0}if(hW(ie,Oe,be))return!0}return!1})(O,w,j)}isTileClipped(){return!0}}function XM(d,s){return s>0?s+2*d:d}const uX=ra([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cX=ra([{name:"a_projected_pos",components:3,type:"Float32"}],4);ra([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const dX=ra([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ra([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const YM=ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fX=ra([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hX(d,s,c){return d.sections.forEach((y=>{y.text=(function(w,I,A){const O=I.layout.get("text-transform").evaluate(A,{});return O==="uppercase"?w=w.toLocaleUpperCase():O==="lowercase"&&(w=w.toLocaleLowerCase()),ta.applyArabicShaping&&(w=ta.applyArabicShaping(w)),w})(y.text,s,c)})),d}ra([{name:"triangle",components:3,type:"Uint16"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ra([{type:"Float32",name:"offsetX"}]),ra([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ra([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Xs=24;const Mv={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},pX={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},mX={40:!0};function ZM(d,s,c,y,w,I){if("fontStack"in s){const A=c[s.fontStack],O=A&&A[d];return O?O.metrics.advance*s.scale+w:0}{const A=y[s.imageName];return A?A.displaySize[0]*s.scale*Xs/I+w:0}}function KM(d,s,c,y){const w=Math.pow(d-s,2);return y?d<s?w/2:2*w:w+Math.abs(c)*c}function gX(d,s,c){let y=0;return d===10&&(y-=1e4),c&&(y+=150),d!==40&&d!==65288||(y+=50),s!==41&&s!==65289||(y+=50),y}function JM(d,s,c,y,w,I){let A=null,O=KM(s,c,w,I);for(const j of y){const Y=KM(s-j.x,c,w,I)+j.badness;Y<=O&&(A=j,O=Y)}return{index:d,x:s,priorBreak:A,badness:O}}function QM(d){return d?QM(d.priorBreak).concat(d.index):[]}class ug{constructor(s="",c=[],y=[]){this.text=s,this.sections=c,this.sectionIndex=y,this.imageSectionID=null}static fromFeature(s,c){const y=new ug;for(let w=0;w<s.sections.length;w++){const I=s.sections[w];I.image?y.addImageSection(I):y.addTextSection(I,c)}return y}length(){return[...this.text].length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}verticalizePunctuation(){this.text=(function(s){let c="",y={premature:!0,value:void 0};const w=s[Symbol.iterator]();let I=w.next();const A=s[Symbol.iterator]();A.next();let O=A.next();for(;!I.done;)c+=!O.done&&zn(O.value.codePointAt(0))&&!Mv[O.value]||!y.premature&&zn(y.value.codePointAt(0))&&!Mv[y.value]||!Mv[I.value]?I.value:Mv[I.value],y={value:I.value,premature:!1},I=w.next(),O=A.next();return c})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const s=this.text.match(/^\s*/),c=s?s[0].length:0,y=this.text.match(/\S\s*$/),w=y?y[0].length-1:0;this.text=this.text.substring(c,this.text.length-w),this.sectionIndex=this.sectionIndex.slice(c,this.sectionIndex.length-w)}substring(s,c){const y=[...this.text].slice(s,c).join(""),w=this.sectionIndex.slice(s,c);return new ug(y,this.sections,w)}toCodeUnitIndex(s){return[...this.text].slice(0,s).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((s,c)=>Math.max(s,this.sections[c].scale)),0)}getMaxImageSize(s){let c=0,y=0;for(let w=0;w<this.length();w++){const I=this.getSection(w);if("imageName"in I){const A=s[I.imageName];if(!A)continue;const O=A.displaySize;c=Math.max(c,O[0]),y=Math.max(y,O[1])}}return{maxImageWidth:c,maxImageHeight:y}}addTextSection(s,c){this.text+=s.text,this.sections.push({scale:s.scale||1,verticalAlign:s.verticalAlign||"bottom",fontStack:s.fontStack||c});const y=this.sections.length-1;this.sectionIndex.push(...[...s.text].map((()=>y)))}addImageSection(s){const c=s.image?s.image.name:"";if(c.length===0)return void st("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push({scale:1,verticalAlign:s.verticalAlign||"bottom",imageName:c}),this.sectionIndex.push(this.sections.length-1)):st("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(s,c,y,w,I){const A=[],O=this.determineAverageLineWidth(s,c,y,w,I),j=this.hasZeroWidthSpaces();let Y=0,ie=0;const ce=this.text[Symbol.iterator]();let be=ce.next();const Ce=this.text[Symbol.iterator]();Ce.next();let Oe=Ce.next();const ze=this.text[Symbol.iterator]();ze.next(),ze.next();let Ve=ze.next();for(;!be.done;){const et=this.getSection(ie),Et=be.value.codePointAt(0);if(Ln(Et)||(Y+=ZM(Et,et,y,w,s,I)),!Oe.done){const rt=Gr(Et),ut=Oe.value.codePointAt(0);(pX[Et]||rt||"imageName"in et||!Ve.done&&mX[ut])&&A.push(JM(ie+1,Y,O,A,gX(Et,ut,rt&&j),!1))}ie++,be=ce.next(),Oe=Ce.next(),Ve=ze.next()}return QM(JM(this.length(),Y,O,A,0,!0))}determineAverageLineWidth(s,c,y,w,I){let A=0,O=0;for(const j of this.text){const Y=this.getSection(O);A+=ZM(j.codePointAt(0),Y,y,w,s,I),O++}return A/Math.max(1,Math.ceil(A/c))}}const IS=4294967296,eL=1/IS,tL=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Tb{constructor(s=new Uint8Array(16)){this.buf=ArrayBuffer.isView(s)?s:new Uint8Array(s),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(s,c,y=this.length){for(;this.pos<y;){const w=this.readVarint(),I=w>>3,A=this.pos;this.type=7&w,s(I,c,this),this.pos===A&&this.skip(w)}return c}readMessage(s,c){return this.readFields(s,c,this.readVarint()+this.pos)}readFixed32(){const s=this.dataView.getUint32(this.pos,!0);return this.pos+=4,s}readSFixed32(){const s=this.dataView.getInt32(this.pos,!0);return this.pos+=4,s}readFixed64(){const s=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*IS;return this.pos+=8,s}readSFixed64(){const s=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*IS;return this.pos+=8,s}readFloat(){const s=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,s}readDouble(){const s=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,s}readVarint(s){const c=this.buf;let y,w;return w=c[this.pos++],y=127&w,w<128?y:(w=c[this.pos++],y|=(127&w)<<7,w<128?y:(w=c[this.pos++],y|=(127&w)<<14,w<128?y:(w=c[this.pos++],y|=(127&w)<<21,w<128?y:(w=c[this.pos],y|=(15&w)<<28,(function(I,A,O){const j=O.buf;let Y,ie;if(ie=j[O.pos++],Y=(112&ie)>>4,ie<128||(ie=j[O.pos++],Y|=(127&ie)<<3,ie<128)||(ie=j[O.pos++],Y|=(127&ie)<<10,ie<128)||(ie=j[O.pos++],Y|=(127&ie)<<17,ie<128)||(ie=j[O.pos++],Y|=(127&ie)<<24,ie<128)||(ie=j[O.pos++],Y|=(1&ie)<<31,ie<128))return cg(I,Y,A);throw new Error("Expected varint not more than 10 bytes")})(y,s,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const s=this.readVarint();return s%2==1?(s+1)/-2:s/2}readBoolean(){return!!this.readVarint()}readString(){const s=this.readVarint()+this.pos,c=this.pos;return this.pos=s,s-c>=12&&tL?tL.decode(this.buf.subarray(c,s)):(function(y,w,I){let A="",O=w;for(;O<I;){const j=y[O];let Y,ie,ce,be=null,Ce=j>239?4:j>223?3:j>191?2:1;if(O+Ce>I)break;Ce===1?j<128&&(be=j):Ce===2?(Y=y[O+1],(192&Y)==128&&(be=(31&j)<<6|63&Y,be<=127&&(be=null))):Ce===3?(Y=y[O+1],ie=y[O+2],(192&Y)==128&&(192&ie)==128&&(be=(15&j)<<12|(63&Y)<<6|63&ie,(be<=2047||be>=55296&&be<=57343)&&(be=null))):Ce===4&&(Y=y[O+1],ie=y[O+2],ce=y[O+3],(192&Y)==128&&(192&ie)==128&&(192&ce)==128&&(be=(15&j)<<18|(63&Y)<<12|(63&ie)<<6|63&ce,(be<=65535||be>=1114112)&&(be=null))),be===null?(be=65533,Ce=1):be>65535&&(be-=65536,A+=String.fromCharCode(be>>>10&1023|55296),be=56320|1023&be),A+=String.fromCharCode(be),O+=Ce}return A})(this.buf,c,s)}readBytes(){const s=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,s);return this.pos=s,c}readPackedVarint(s=[],c){const y=this.readPackedEnd();for(;this.pos<y;)s.push(this.readVarint(c));return s}readPackedSVarint(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readSVarint());return s}readPackedBoolean(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readBoolean());return s}readPackedFloat(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readFloat());return s}readPackedDouble(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readDouble());return s}readPackedFixed32(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readFixed32());return s}readPackedSFixed32(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readSFixed32());return s}readPackedFixed64(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readFixed64());return s}readPackedSFixed64(s=[]){const c=this.readPackedEnd();for(;this.pos<c;)s.push(this.readSFixed64());return s}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(s){const c=7&s;if(c===0)for(;this.buf[this.pos++]>127;);else if(c===2)this.pos=this.readVarint()+this.pos;else if(c===5)this.pos+=4;else{if(c!==1)throw new Error(`Unimplemented type: ${c}`);this.pos+=8}}writeTag(s,c){this.writeVarint(s<<3|c)}realloc(s){let c=this.length||16;for(;c<this.pos+s;)c*=2;if(c!==this.length){const y=new Uint8Array(c);y.set(this.buf),this.buf=y,this.dataView=new DataView(y.buffer),this.length=c}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeSFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*eL),!0),this.pos+=8}writeSFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*eL),!0),this.pos+=8}writeVarint(s){(s=+s||0)>268435455||s<0?(function(c,y){let w,I;if(c>=0?(w=c%4294967296|0,I=c/4294967296|0):(w=~(-c%4294967296),I=~(-c/4294967296),4294967295^w?w=w+1|0:(w=0,I=I+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");y.realloc(10),(function(A,O,j){j.buf[j.pos++]=127&A|128,A>>>=7,j.buf[j.pos++]=127&A|128,A>>>=7,j.buf[j.pos++]=127&A|128,A>>>=7,j.buf[j.pos++]=127&A|128,j.buf[j.pos]=127&(A>>>=7)})(w,0,y),(function(A,O){const j=(7&A)<<4;O.buf[O.pos++]|=j|((A>>>=3)?128:0),A&&(O.buf[O.pos++]=127&A|((A>>>=7)?128:0),A&&(O.buf[O.pos++]=127&A|((A>>>=7)?128:0),A&&(O.buf[O.pos++]=127&A|((A>>>=7)?128:0),A&&(O.buf[O.pos++]=127&A|((A>>>=7)?128:0),A&&(O.buf[O.pos++]=127&A)))))})(I,y)})(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))}writeSVarint(s){this.writeVarint(s<0?2*-s-1:2*s)}writeBoolean(s){this.writeVarint(+s)}writeString(s){s=String(s),this.realloc(4*s.length),this.pos++;const c=this.pos;this.pos=(function(w,I,A){for(let O,j,Y=0;Y<I.length;Y++){if(O=I.charCodeAt(Y),O>55295&&O<57344){if(!j){O>56319||Y+1===I.length?(w[A++]=239,w[A++]=191,w[A++]=189):j=O;continue}if(O<56320){w[A++]=239,w[A++]=191,w[A++]=189,j=O;continue}O=j-55296<<10|O-56320|65536,j=null}else j&&(w[A++]=239,w[A++]=191,w[A++]=189,j=null);O<128?w[A++]=O:(O<2048?w[A++]=O>>6|192:(O<65536?w[A++]=O>>12|224:(w[A++]=O>>18|240,w[A++]=O>>12&63|128),w[A++]=O>>6&63|128),w[A++]=63&O|128)}return A})(this.buf,s,this.pos);const y=this.pos-c;y>=128&&rL(c,y,this),this.pos=c-1,this.writeVarint(y),this.pos+=y}writeFloat(s){this.realloc(4),this.dataView.setFloat32(this.pos,s,!0),this.pos+=4}writeDouble(s){this.realloc(8),this.dataView.setFloat64(this.pos,s,!0),this.pos+=8}writeBytes(s){const c=s.length;this.writeVarint(c),this.realloc(c);for(let y=0;y<c;y++)this.buf[this.pos++]=s[y]}writeRawMessage(s,c){this.pos++;const y=this.pos;s(c,this);const w=this.pos-y;w>=128&&rL(y,w,this),this.pos=y-1,this.writeVarint(w),this.pos+=w}writeMessage(s,c,y){this.writeTag(s,2),this.writeRawMessage(c,y)}writePackedVarint(s,c){c.length&&this.writeMessage(s,yX,c)}writePackedSVarint(s,c){c.length&&this.writeMessage(s,vX,c)}writePackedBoolean(s,c){c.length&&this.writeMessage(s,xX,c)}writePackedFloat(s,c){c.length&&this.writeMessage(s,bX,c)}writePackedDouble(s,c){c.length&&this.writeMessage(s,_X,c)}writePackedFixed32(s,c){c.length&&this.writeMessage(s,wX,c)}writePackedSFixed32(s,c){c.length&&this.writeMessage(s,SX,c)}writePackedFixed64(s,c){c.length&&this.writeMessage(s,CX,c)}writePackedSFixed64(s,c){c.length&&this.writeMessage(s,EX,c)}writeBytesField(s,c){this.writeTag(s,2),this.writeBytes(c)}writeFixed32Field(s,c){this.writeTag(s,5),this.writeFixed32(c)}writeSFixed32Field(s,c){this.writeTag(s,5),this.writeSFixed32(c)}writeFixed64Field(s,c){this.writeTag(s,1),this.writeFixed64(c)}writeSFixed64Field(s,c){this.writeTag(s,1),this.writeSFixed64(c)}writeVarintField(s,c){this.writeTag(s,0),this.writeVarint(c)}writeSVarintField(s,c){this.writeTag(s,0),this.writeSVarint(c)}writeStringField(s,c){this.writeTag(s,2),this.writeString(c)}writeFloatField(s,c){this.writeTag(s,5),this.writeFloat(c)}writeDoubleField(s,c){this.writeTag(s,1),this.writeDouble(c)}writeBooleanField(s,c){this.writeVarintField(s,+c)}}function cg(d,s,c){return c?4294967296*s+(d>>>0):4294967296*(s>>>0)+(d>>>0)}function rL(d,s,c){const y=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));c.realloc(y);for(let w=c.pos-1;w>=d;w--)c.buf[w+y]=c.buf[w]}function yX(d,s){for(let c=0;c<d.length;c++)s.writeVarint(d[c])}function vX(d,s){for(let c=0;c<d.length;c++)s.writeSVarint(d[c])}function bX(d,s){for(let c=0;c<d.length;c++)s.writeFloat(d[c])}function _X(d,s){for(let c=0;c<d.length;c++)s.writeDouble(d[c])}function xX(d,s){for(let c=0;c<d.length;c++)s.writeBoolean(d[c])}function wX(d,s){for(let c=0;c<d.length;c++)s.writeFixed32(d[c])}function SX(d,s){for(let c=0;c<d.length;c++)s.writeSFixed32(d[c])}function CX(d,s){for(let c=0;c<d.length;c++)s.writeFixed64(d[c])}function EX(d,s){for(let c=0;c<d.length;c++)s.writeSFixed64(d[c])}function TX(d,s,c){d===1&&c.readMessage(IX,s)}function IX(d,s,c){if(d===3){const{id:y,bitmap:w,width:I,height:A,left:O,top:j,advance:Y}=c.readMessage(PX,{});s.push({id:y,bitmap:new xv({width:I+6,height:A+6},w),metrics:{width:I,height:A,left:O,top:j,advance:Y}})}}function PX(d,s,c){d===1?s.id=c.readVarint():d===2?s.bitmap=c.readBytes():d===3?s.width=c.readVarint():d===4?s.height=c.readVarint():d===5?s.left=c.readSVarint():d===6?s.top=c.readSVarint():d===7&&(s.advance=c.readVarint())}function nL(d){let s=0,c=0;for(const A of d)s+=A.w*A.h,c=Math.max(c,A.w);d.sort(((A,O)=>O.h-A.h));const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),c),h:1/0}];let w=0,I=0;for(const A of d)for(let O=y.length-1;O>=0;O--){const j=y[O];if(!(A.w>j.w||A.h>j.h)){if(A.x=j.x,A.y=j.y,I=Math.max(I,A.y+A.h),w=Math.max(w,A.x+A.w),A.w===j.w&&A.h===j.h){const Y=y.pop();Y&&O<y.length&&(y[O]=Y)}else A.h===j.h?(j.x+=A.w,j.w-=A.w):A.w===j.w?(j.y+=A.h,j.h-=A.h):(y.push({x:j.x+A.w,y:j.y,w:j.w-A.w,h:A.h}),j.y+=A.h,j.h-=A.h);break}}return{w,h:I,fill:s/(w*I)||0}}class PS{constructor(s,{pixelRatio:c,version:y,stretchX:w,stretchY:I,content:A,textFitWidth:O,textFitHeight:j}){this.paddedRect=s,this.pixelRatio=c,this.stretchX=w,this.stretchY=I,this.content=A,this.version=y,this.textFitWidth=O,this.textFitHeight=j}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class iL{constructor(s,c){const y={},w={};this.haveRenderCallbacks=[];const I=[];this.addImages(s,y,I),this.addImages(c,w,I);const{w:A,h:O}=nL(I),j=new ku({width:A||1,height:O||1});for(const Y in s){const ie=s[Y],ce=y[Y].paddedRect;ku.copy(ie.data,j,{x:0,y:0},{x:ce.x+1,y:ce.y+1},ie.data)}for(const Y in c){const ie=c[Y],ce=w[Y].paddedRect,be=ce.x+1,Ce=ce.y+1,Oe=ie.data.width,ze=ie.data.height;ku.copy(ie.data,j,{x:0,y:0},{x:be,y:Ce},ie.data),ku.copy(ie.data,j,{x:0,y:ze-1},{x:be,y:Ce-1},{width:Oe,height:1}),ku.copy(ie.data,j,{x:0,y:0},{x:be,y:Ce+ze},{width:Oe,height:1}),ku.copy(ie.data,j,{x:Oe-1,y:0},{x:be-1,y:Ce},{width:1,height:ze}),ku.copy(ie.data,j,{x:0,y:0},{x:be+Oe,y:Ce},{width:1,height:ze})}this.image=j,this.iconPositions=y,this.patternPositions=w}addImages(s,c,y){for(const w in s){const I=s[w],A={x:0,y:0,w:I.data.width+2,h:I.data.height+2};y.push(A),c[w]=new PS(A,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(s,c){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in s.updatedImages)this.patchUpdatedImage(this.iconPositions[y],s.getImage(y),c),this.patchUpdatedImage(this.patternPositions[y],s.getImage(y),c)}patchUpdatedImage(s,c,y){if(!s||!c||s.version===c.version)return;s.version=c.version;const[w,I]=s.tl;y.update(c.data,void 0,{x:w,y:I})}}var Fh;function Ib(d,s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe){const ze=ug.fromFeature(d,w);let Ve;ce===u.az.vertical&&ze.verticalizePunctuation();let et=ze.determineLineBreaks(Y,I,s,y,Ce);const{processBidirectionalText:Et,processStyledBidirectionalText:rt}=ta;if(Et&&ze.sections.length===1){Ve=[],et=et.map((lr=>ze.toCodeUnitIndex(lr)));const Ot=Et(ze.toString(),et);for(const lr of Ot){const Ir=[...lr].map((()=>0));Ve.push(new ug(lr,ze.sections,Ir))}}else if(rt){Ve=[],et=et.map((wr=>ze.toCodeUnitIndex(wr)));let Ot=0;const lr=[];for(const wr of ze.text)lr.push(...Array(wr.length).fill(ze.sectionIndex[Ot])),Ot++;const Ir=rt(ze.text,lr,et);for(const wr of Ir){const Or=[];let an="";for(const jr of wr[0])Or.push(wr[1][an.length]),an+=jr;Ve.push(new ug(wr[0],ze.sections,Or))}}else Ve=(function(Ot,lr){const Ir=[];let wr=0;for(const Or of lr)Ir.push(Ot.substring(wr,Or)),wr=Or;return wr<Ot.length()&&Ir.push(Ot.substring(wr,Ot.length())),Ir})(ze,et);const ut=[],At={positionedLines:ut,text:ze.toString(),top:ie[1],bottom:ie[1],left:ie[0],right:ie[0],writingMode:ce,iconsInText:!1,verticalizable:!1};return(function(Ot,lr,Ir,wr,Or,an,jr,Er,vr,vn,hn,xn){let un=0,Nn=0,Zi=0,Oi=0;const fo=Er==="right"?1:Er==="left"?0:.5,Cl=Xs/xn;let fs=0;for(const fa of Or){fa.trim();const ko=fa.getMaxScale(),qo={positionedGlyphs:[],lineOffset:0};Ot.positionedLines[fs]=qo;const Xa=qo.positionedGlyphs;let Mu=0;if(!fa.length()){Nn+=an,++fs;continue}const El=AX(wr,fa,Cl);let Lu=0;for(const Ks of fa.text){const _o=fa.getSection(Lu),hs=Ks.codePointAt(0),Mo=kX(vr,hn,hs),Js={glyph:hs,imageName:null,x:un,y:Nn+-17,vertical:Mo,scale:1,fontStack:"",sectionIndex:fa.getSectionIndex(Lu),metrics:null,rect:null};let $f;if("fontStack"in _o){if($f=MX(_o,hs,Mo,El,lr,Ir),!$f)continue;Js.fontStack=_o.fontStack}else{if(Ot.iconsInText=!0,_o.scale*=Cl,$f=LX(_o,Mo,ko,El,wr),!$f)continue;Mu=Math.max(Mu,$f.imageOffset),Js.imageName=_o.imageName}const{rect:yd,metrics:Bv,baselineOffset:Vh}=$f;Js.y+=Vh,Js.scale=_o.scale,Js.metrics=Bv,Js.rect=yd,Xa.push(Js),Mo?(Ot.verticalizable=!0,un+=("imageName"in _o?Bv.advance:Xs)*_o.scale+vn):un+=Bv.advance*_o.scale+vn,Lu++}Xa.length!==0&&(Zi=Math.max(un-vn,Zi),RX(Xa,0,Xa.length-1,fo)),un=0,qo.lineOffset=Math.max(Mu,(ko-1)*Xs);const zc=an*ko+Mu;Nn+=zc,Oi=Math.max(zc,Oi),++fs}const{horizontalAlign:ho,verticalAlign:to}=AS(jr);(function(fa,ko,qo,Xa,Mu,El,Lu,zc,Ks){const _o=(ko-qo)*Mu;let hs=0;hs=El!==Lu?-zc*Xa- -17:-Xa*Ks*Lu+.5*Lu;for(const Mo of fa)for(const Js of Mo.positionedGlyphs)Js.x+=_o,Js.y+=hs})(Ot.positionedLines,fo,ho,to,Zi,Oi,an,Nn,Or.length),Ot.top+=-to*Nn,Ot.bottom=Ot.top+Nn,Ot.left+=-ho*Zi,Ot.right=Ot.left+Zi})(At,s,c,y,Ve,A,O,j,ce,Y,be,Oe),!(function(Ot){for(const lr of Ot)if(lr.positionedGlyphs.length!==0)return!1;return!0})(ut)&&At}function AS(d){let s=.5,c=.5;switch(d){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:s,verticalAlign:c}}function AX(d,s,c){const y=s.getMaxScale()*Xs,{maxImageWidth:w,maxImageHeight:I}=s.getMaxImageSize(d),A=Math.max(y,I*c);return{verticalLineContentWidth:Math.max(y,w*c),horizontalLineContentHeight:A}}function aL(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function kX(d,s,c){return!(d===u.az.horizontal||!s&&!$n(c)||s&&(Ln(c)||(y=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function MX(d,s,c,y,w,I){const A=I[d.fontStack],O=(function(Y,ie,ce,be){if(Y&&Y.rect)return Y;const Ce=ie[ce.fontStack],Oe=Ce&&Ce[be];return Oe?{rect:null,metrics:Oe.metrics}:null})(A&&A[s],w,d,s);if(O===null)return null;let j;if(c)j=y.verticalLineContentWidth-d.scale*Xs;else{const Y=aL(d.verticalAlign);j=(y.horizontalLineContentHeight-d.scale*Xs)*Y}return{rect:O.rect,metrics:O.metrics,baselineOffset:j}}function LX(d,s,c,y,w){const I=w[d.imageName];if(!I)return null;const A=I.paddedRect,O=I.displaySize,j={width:O[0],height:O[1],left:1,top:-3,advance:s?O[1]:O[0]};let Y;if(s)Y=y.verticalLineContentWidth-O[1]*d.scale;else{const ie=aL(d.verticalAlign);Y=(y.horizontalLineContentHeight-O[1]*d.scale)*ie}return{rect:A,metrics:j,baselineOffset:Y,imageOffset:(s?O[0]:O[1])*d.scale-Xs*c}}function RX(d,s,c,y){if(y===0)return;const w=d[c],I=(d[c].x+w.metrics.advance*w.scale)*y;for(let A=s;A<=c;A++)d[A].x-=I}function DX(d,s,c){const{horizontalAlign:y,verticalAlign:w}=AS(c),I=s[0]-d.displaySize[0]*y,A=s[1]-d.displaySize[1]*w;return{image:d,top:A,bottom:A+d.displaySize[1],left:I,right:I+d.displaySize[0]}}function oL(d){var s,c;let y=d.left,w=d.top,I=d.right-y,A=d.bottom-w;const O=(s=d.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",j=(c=d.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",Y=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(j==="proportional"){if(O==="stretchOnly"&&I/A<Y||O==="proportional"){const ie=Math.ceil(A*Y);y*=ie/I,I=ie}}else if(O==="proportional"&&j==="stretchOnly"&&Y!==0&&I/A>Y){const ie=Math.ceil(I/Y);w*=ie/A,A=ie}return{x1:y,y1:w,x2:y+I,y2:w+A}}function sL(d,s,c,y,w,I){const A=d.image;let O;if(A.content){const Ve=A.content,et=A.pixelRatio||1;O=[Ve[0]/et,Ve[1]/et,A.displaySize[0]-Ve[2]/et,A.displaySize[1]-Ve[3]/et]}const j=s.left*I,Y=s.right*I;let ie,ce,be,Ce;c==="width"||c==="both"?(Ce=w[0]+j-y[3],ce=w[0]+Y+y[1]):(Ce=w[0]+(j+Y-A.displaySize[0])/2,ce=Ce+A.displaySize[0]);const Oe=s.top*I,ze=s.bottom*I;return c==="height"||c==="both"?(ie=w[1]+Oe-y[0],be=w[1]+ze+y[2]):(ie=w[1]+(Oe+ze-A.displaySize[1])/2,be=ie+A.displaySize[1]),{image:A,top:ie,right:ce,bottom:be,left:Ce,collisionPadding:O}}Pt("ImagePosition",PS),Pt("ImageAtlas",iL),u.az=void 0,(Fh=u.az||(u.az={}))[Fh.none=0]="none",Fh[Fh.horizontal=1]="horizontal",Fh[Fh.vertical=2]="vertical",Fh[Fh.horizontalOnly=3]="horizontalOnly";const qf=128,Bh=32640;function lL(d,s){const{expression:c}=s;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new bi(d+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:w}=c;let I=0;for(;I<y.length&&y[I]<=d;)I++;I=Math.max(0,I-1);let A=I;for(;A<y.length&&y[A]<d+1;)A++;A=Math.min(y.length-1,A);const O=y[I],j=y[A];return c.kind==="composite"?{kind:"composite",minZoom:O,maxZoom:j,interpolationType:w}:{kind:"camera",minZoom:O,maxZoom:j,minSize:c.evaluate(new bi(O)),maxSize:c.evaluate(new bi(j)),interpolationType:w}}}function kS(d,s,c){let y="never";const w=d.get(s);return w?y=w:d.get(c)&&(y="always"),y}const OX=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Pb(d,s,c,y,w,I,A,O,j,Y,ie,ce,be){const Ce=O?Math.min(Bh,Math.round(O[0])):0,Oe=O?Math.min(Bh,Math.round(O[1])):0;d.emplaceBack(s,c,Math.round(32*y),Math.round(32*w),I,A,(Ce<<1)+(j?1:0),Oe,16*Y,16*ie,256*ce,256*be)}function MS(d,s,c){d.emplaceBack(s.x,s.y,c),d.emplaceBack(s.x,s.y,c),d.emplaceBack(s.x,s.y,c),d.emplaceBack(s.x,s.y,c)}function NX(d){for(const s of d.sections)if(Wi(s.text))return!0;return!1}class LS{constructor(s){this.layoutVertexArray=new Mt,this.indexArray=new mr,this.programConfigurations=s,this.segments=new on,this.dynamicLayoutVertexArray=new Xt,this.opacityVertexArray=new gr,this.hasVisibleVertices=!1,this.placedSymbolArray=new z}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,c,y,w){this.isEmpty()||(y&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,uX.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,cX.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,OX,!0),this.opacityVertexBuffer.itemSize=1),(y||w)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pt("SymbolBuffers",LS);class RS{constructor(s,c,y){this.layoutVertexArray=new s,this.layoutAttributes=c,this.indexArray=new y,this.segments=new on,this.collisionVertexArray=new hr}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,dX.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pt("CollisionBuffers",RS);class dg{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lL(this.zoom,c["text-size"]),this.iconSizeData=lL(this.zoom,c["icon-size"]);const y=this.layers[0].layout,w=y.get("symbol-sort-key"),I=y.get("symbol-z-order");this.canOverlap=kS(y,"text-overlap","text-allow-overlap")!=="never"||kS(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map((A=>u.az[A]))),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id)),this.sourceID=s.sourceID}createArrays(){this.text=new LS(new jf(this.layers,this.zoom,(s=>/^text/.test(s)))),this.icon=new LS(new jf(this.layers,this.zoom,(s=>/^icon/.test(s)))),this.glyphOffsetArray=new le,this.lineVertexArray=new pe,this.symbolInstances=new te,this.textAnchorOffsets=new Te}calculateGlyphDependencies(s,c,y,w,I){for(const A of s)if(c[A.codePointAt(0)]=!0,(y||w)&&I){const O=Mv[A];O&&(c[O.codePointAt(0)]=!0)}}populate(s,c,y){const w=this.layers[0],I=w.layout,A=I.get("text-font"),O=I.get("text-field"),j=I.get("icon-image"),Y=(O.value.kind!=="constant"||O.value.value instanceof dn&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),ie=j.value.kind!=="constant"||!!j.value.value||Object.keys(j.parameters).length>0,ce=I.get("symbol-sort-key");if(this.features=[],!Y&&!ie)return;const be=c.iconDependencies,Ce=c.glyphDependencies,Oe=c.availableImages,ze=new bi(this.zoom);for(const{feature:Ve,id:et,index:Et,sourceLayerIndex:rt}of s){const ut=w._featureFilter.needGeometry,At=ef(Ve,ut);if(!w._featureFilter.filter(ze,At,y))continue;let Ot,lr;if(ut||(At.geometry=Qd(Ve)),Y){const wr=w.getValueAndResolveTokens("text-field",At,y,Oe),Or=dn.factory(wr),an=this.hasRTLText=this.hasRTLText||NX(Or);(!an||ta.getRTLTextPluginStatus()==="unavailable"||an&&ta.isParsed())&&(Ot=hX(Or,w,At))}if(ie){const wr=w.getValueAndResolveTokens("icon-image",At,y,Oe);lr=wr instanceof hi?wr:hi.fromString(wr)}if(!Ot&&!lr)continue;const Ir=this.sortFeaturesByKey?ce.evaluate(At,{},y):void 0;if(this.features.push({id:et,text:Ot,icon:lr,index:Et,sourceLayerIndex:rt,geometry:At.geometry,properties:Ve.properties,type:Pv.types[Ve.type],sortKey:Ir}),lr&&(be[lr.name]=!0),Ot){const wr=A.evaluate(At,{},y).join(","),Or=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.az.vertical)>=0;for(const an of Ot.sections)if(an.image)be[an.image.name]=!0;else{const jr=yi(Ot.toString()),Er=an.fontStack||wr,vr=Ce[Er]=Ce[Er]||{};this.calculateGlyphDependencies(an.text,vr,Or,this.allowVerticalPlacement,jr)}}}I.get("symbol-placement")==="line"&&(this.features=(function(Ve){const et={},Et={},rt=[];let ut=0;function At(wr){rt.push(Ve[wr]),ut++}function Ot(wr,Or,an){const jr=Et[wr];return delete Et[wr],Et[Or]=jr,rt[jr].geometry[0].pop(),rt[jr].geometry[0]=rt[jr].geometry[0].concat(an[0]),jr}function lr(wr,Or,an){const jr=et[Or];return delete et[Or],et[wr]=jr,rt[jr].geometry[0].shift(),rt[jr].geometry[0]=an[0].concat(rt[jr].geometry[0]),jr}function Ir(wr,Or,an){const jr=an?Or[0][Or[0].length-1]:Or[0][0];return`${wr}:${jr.x}:${jr.y}`}for(let wr=0;wr<Ve.length;wr++){const Or=Ve[wr],an=Or.geometry,jr=Or.text?Or.text.toString():null;if(!jr){At(wr);continue}const Er=Ir(jr,an),vr=Ir(jr,an,!0);if(Er in Et&&vr in et&&Et[Er]!==et[vr]){const vn=lr(Er,vr,an),hn=Ot(Er,vr,rt[vn].geometry);delete et[Er],delete Et[vr],Et[Ir(jr,rt[hn].geometry,!0)]=hn,rt[vn].geometry=null}else Er in Et?Ot(Er,vr,an):vr in et?lr(Er,vr,an):(At(wr),et[Er]=ut-1,Et[vr]=ut-1)}return rt.filter((wr=>wr.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Ve,et)=>Ve.sortKey-et.sortKey))}update(s,c,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,c,this.layers,{imagePositions:y}),this.icon.programConfigurations.updatePaintArrays(s,c,this.layers,{imagePositions:y}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,c){const y=this.lineVertexArray.length;if(s.segment!==void 0){let w=s.dist(c[s.segment+1]),I=s.dist(c[s.segment]);const A={};for(let O=s.segment+1;O<c.length;O++)A[O]={x:c[O].x,y:c[O].y,tileUnitDistanceFromAnchor:w},O<c.length-1&&(w+=c[O+1].dist(c[O]));for(let O=s.segment||0;O>=0;O--)A[O]={x:c[O].x,y:c[O].y,tileUnitDistanceFromAnchor:I},O>0&&(I+=c[O-1].dist(c[O]));for(let O=0;O<c.length;O++){const j=A[O];this.lineVertexArray.emplaceBack(j.x,j.y,j.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(s,c,y,w,I,A,O,j,Y,ie,ce,be){const Ce=s.indexArray,Oe=s.layoutVertexArray,ze=s.segments.prepareSegment(4*c.length,Oe,Ce,this.canOverlap?A.sortKey:void 0),Ve=this.glyphOffsetArray.length,et=ze.vertexLength,Et=this.allowVerticalPlacement&&O===u.az.vertical?Math.PI/2:0,rt=A.text&&A.text.sections;for(let ut=0;ut<c.length;ut++){const{tl:At,tr:Ot,bl:lr,br:Ir,tex:wr,pixelOffsetTL:Or,pixelOffsetBR:an,minFontScaleX:jr,minFontScaleY:Er,glyphOffset:vr,isSDF:vn,sectionIndex:hn}=c[ut],xn=ze.vertexLength,un=vr[1];Pb(Oe,j.x,j.y,At.x,un+At.y,wr.x,wr.y,y,vn,Or.x,Or.y,jr,Er),Pb(Oe,j.x,j.y,Ot.x,un+Ot.y,wr.x+wr.w,wr.y,y,vn,an.x,Or.y,jr,Er),Pb(Oe,j.x,j.y,lr.x,un+lr.y,wr.x,wr.y+wr.h,y,vn,Or.x,an.y,jr,Er),Pb(Oe,j.x,j.y,Ir.x,un+Ir.y,wr.x+wr.w,wr.y+wr.h,y,vn,an.x,an.y,jr,Er),MS(s.dynamicLayoutVertexArray,j,Et),Ce.emplaceBack(xn,xn+2,xn+1),Ce.emplaceBack(xn+1,xn+2,xn+3),ze.vertexLength+=4,ze.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vr[0]),ut!==c.length-1&&hn===c[ut+1].sectionIndex||s.programConfigurations.populatePaintArrays(Oe.length,A,A.index,{imagePositions:{},canonical:be,formattedSection:rt&&rt[hn]})}s.placedSymbolArray.emplaceBack(j.x,j.y,Ve,this.glyphOffsetArray.length-Ve,et,Y,ie,j.segment,y?y[0]:0,y?y[1]:0,w[0],w[1],O,0,!1,0,ce)}_addCollisionDebugVertex(s,c,y,w,I,A){return c.emplaceBack(0,0),s.emplaceBack(y.x,y.y,w,I,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(s,c,y,w,I,A,O){const j=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),Y=j.vertexLength,ie=I.layoutVertexArray,ce=I.collisionVertexArray,be=O.anchorX,Ce=O.anchorY;this._addCollisionDebugVertex(ie,ce,A,be,Ce,new f(s,c)),this._addCollisionDebugVertex(ie,ce,A,be,Ce,new f(y,c)),this._addCollisionDebugVertex(ie,ce,A,be,Ce,new f(y,w)),this._addCollisionDebugVertex(ie,ce,A,be,Ce,new f(s,w)),j.vertexLength+=4;const Oe=I.indexArray;Oe.emplaceBack(Y,Y+1),Oe.emplaceBack(Y+1,Y+2),Oe.emplaceBack(Y+2,Y+3),Oe.emplaceBack(Y+3,Y),j.primitiveLength+=4}addDebugCollisionBoxes(s,c,y,w){for(let I=s;I<c;I++){const A=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,w?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new RS(ur,YM.members,Yr),this.iconCollisionBox=new RS(ur,YM.members,Yr);for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(s,c,y,w,I,A,O,j,Y){const ie={};for(let ce=c;ce<y;ce++){const be=s.get(ce);ie.textBox={x1:be.x1,y1:be.y1,x2:be.x2,y2:be.y2,anchorPointX:be.anchorPointX,anchorPointY:be.anchorPointY},ie.textFeatureIndex=be.featureIndex;break}for(let ce=w;ce<I;ce++){const be=s.get(ce);ie.verticalTextBox={x1:be.x1,y1:be.y1,x2:be.x2,y2:be.y2,anchorPointX:be.anchorPointX,anchorPointY:be.anchorPointY},ie.verticalTextFeatureIndex=be.featureIndex;break}for(let ce=A;ce<O;ce++){const be=s.get(ce);ie.iconBox={x1:be.x1,y1:be.y1,x2:be.x2,y2:be.y2,anchorPointX:be.anchorPointX,anchorPointY:be.anchorPointY},ie.iconFeatureIndex=be.featureIndex;break}for(let ce=j;ce<Y;ce++){const be=s.get(ce);ie.verticalIconBox={x1:be.x1,y1:be.y1,x2:be.x2,y2:be.y2,anchorPointX:be.anchorPointX,anchorPointY:be.anchorPointY},ie.verticalIconFeatureIndex=be.featureIndex;break}return ie}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const y=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,c){const y=s.placedSymbolArray.get(c),w=y.vertexStartIndex+4*y.numGlyphs;for(let I=y.vertexStartIndex;I<w;I+=4)s.indexArray.emplaceBack(I,I+2,I+1),s.indexArray.emplaceBack(I+1,I+2,I+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(s),y=Math.cos(s),w=[],I=[],A=[];for(let O=0;O<this.symbolInstances.length;++O){A.push(O);const j=this.symbolInstances.get(O);w.push(0|Math.round(c*j.anchorX+y*j.anchorY)),I.push(j.featureIndex)}return A.sort(((O,j)=>w[O]-w[j]||I[j]-I[O])),A}addToSortKeyRanges(s,c){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===c?y.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const y=this.symbolInstances.get(c);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach(((w,I,A)=>{w>=0&&A.indexOf(w)===I&&this.addIndicesForPlacedSymbol(this.text,w)})),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let uL,cL;Pt("SymbolBucket",dg,{omit:["layers","collisionBoxArray","features","compareText"]}),dg.MAX_GLYPHS=65535,dg.addDynamicAttributes=MS;var DS={get paint(){return cL=cL||new Ma({"icon-opacity":new mn(kt.paint_symbol["icon-opacity"]),"icon-color":new mn(kt.paint_symbol["icon-color"]),"icon-halo-color":new mn(kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new mn(kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mn(kt.paint_symbol["icon-halo-blur"]),"icon-translate":new yn(kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new yn(kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new mn(kt.paint_symbol["text-opacity"]),"text-color":new mn(kt.paint_symbol["text-color"],{runtimeType:Un,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new mn(kt.paint_symbol["text-halo-color"]),"text-halo-width":new mn(kt.paint_symbol["text-halo-width"]),"text-halo-blur":new mn(kt.paint_symbol["text-halo-blur"]),"text-translate":new yn(kt.paint_symbol["text-translate"]),"text-translate-anchor":new yn(kt.paint_symbol["text-translate-anchor"])})},get layout(){return uL=uL||new Ma({"symbol-placement":new yn(kt.layout_symbol["symbol-placement"]),"symbol-spacing":new yn(kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yn(kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mn(kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yn(kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yn(kt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new yn(kt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new yn(kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new yn(kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yn(kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new mn(kt.layout_symbol["icon-size"]),"icon-text-fit":new yn(kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yn(kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new mn(kt.layout_symbol["icon-image"]),"icon-rotate":new mn(kt.layout_symbol["icon-rotate"]),"icon-padding":new mn(kt.layout_symbol["icon-padding"]),"icon-keep-upright":new yn(kt.layout_symbol["icon-keep-upright"]),"icon-offset":new mn(kt.layout_symbol["icon-offset"]),"icon-anchor":new mn(kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yn(kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yn(kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yn(kt.layout_symbol["text-rotation-alignment"]),"text-field":new mn(kt.layout_symbol["text-field"]),"text-font":new mn(kt.layout_symbol["text-font"]),"text-size":new mn(kt.layout_symbol["text-size"]),"text-max-width":new mn(kt.layout_symbol["text-max-width"]),"text-line-height":new yn(kt.layout_symbol["text-line-height"]),"text-letter-spacing":new mn(kt.layout_symbol["text-letter-spacing"]),"text-justify":new mn(kt.layout_symbol["text-justify"]),"text-radial-offset":new mn(kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yn(kt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new mn(kt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new mn(kt.layout_symbol["text-anchor"]),"text-max-angle":new yn(kt.layout_symbol["text-max-angle"]),"text-writing-mode":new yn(kt.layout_symbol["text-writing-mode"]),"text-rotate":new mn(kt.layout_symbol["text-rotate"]),"text-padding":new yn(kt.layout_symbol["text-padding"]),"text-keep-upright":new yn(kt.layout_symbol["text-keep-upright"]),"text-transform":new mn(kt.layout_symbol["text-transform"]),"text-offset":new mn(kt.layout_symbol["text-offset"]),"text-allow-overlap":new yn(kt.layout_symbol["text-allow-overlap"]),"text-overlap":new yn(kt.layout_symbol["text-overlap"]),"text-ignore-placement":new yn(kt.layout_symbol["text-ignore-placement"]),"text-optional":new yn(kt.layout_symbol["text-optional"])})}};class dL{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:gi,this.defaultValue=s}evaluate(s){if(s.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(s.formattedSection))return c.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt("FormatSectionOverride",dL,{omit:["defaultValue"]});class Ab extends ja{constructor(s,c){super(s,DS,c)}recalculate(s,c){if(super.recalculate(s,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const w=[];for(const I of y)w.indexOf(I)<0&&w.push(I);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,c,y,w){const I=this.layout.get(s).evaluate(c,{},y,w),A=this._unevaluatedLayout._values[s];return A.isDataDriven()||oc(A.value)||!I?I:(function(O,j){return j.replace(/{([^{}]+)}/g,((Y,ie)=>O&&ie in O?String(O[ie]):""))})(c.properties,I)}createBucket(s){return new dg(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of DS.paint.overridableProperties){if(!Ab.hasPaintOverride(this.layout,s))continue;const c=this.paint.get(s),y=new dL(c),w=new Af(y,c.property.specification);let I=null;I=c.value.kind==="constant"||c.value.kind==="source"?new Ih("source",w):new Ip("composite",w,c.value.zoomStops),this.paint._values[s]=new Di(c.property,I,c.parameters)}}_handleOverridablePaintPropertyUpdate(s,c,y){return!(!this.layout||c.isDataDriven()||y.isDataDriven())&&Ab.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,c){const y=s.get("text-field"),w=DS.paint.properties[c];let I=!1;const A=O=>{for(const j of O)if(w.overrides&&w.overrides.hasOverride(j))return void(I=!0)};if(y.value.kind==="constant"&&y.value.value instanceof dn)A(y.value.value.sections);else if(y.value.kind==="source"||y.value.kind==="composite"){const O=Y=>{I||(Y instanceof Xi&&xi(Y.value)===Ni?A(Y.value.sections):Y instanceof Ts?A(Y.sections):Y.eachChild(O))},j=y.value;j._styleExpression&&O(j._styleExpression.expression)}return I}}let fL;var FX={get paint(){return fL=fL||new Ma({"background-color":new yn(kt.paint_background["background-color"]),"background-pattern":new ca(kt.paint_background["background-pattern"]),"background-opacity":new yn(kt.paint_background["background-opacity"])})}};class BX extends ja{constructor(s,c){super(s,FX,c)}}class zX extends ja{constructor(s,c){super(s,{},c),this.onAdd=y=>{this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)},this.onRemove=y=>{this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class jX{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const qX={once:!0},OS=63710088e-1;class zh{constructor(s,c){if(isNaN(s)||isNaN(c))throw new Error(`Invalid LngLat object: (${s}, ${c})`);if(this.lng=+s,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zh(Xe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const c=Math.PI/180,y=this.lat*c,w=s.lat*c,I=Math.sin(y)*Math.sin(w)+Math.cos(y)*Math.cos(w)*Math.cos((s.lng-this.lng)*c);return OS*Math.acos(Math.min(I,1))}static convert(s){if(s instanceof zh)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new zh(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new zh(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hL=2*Math.PI*OS;function pL(d){return hL*Math.cos(d*Math.PI/180)}function mL(d){return(180+d)/360}function gL(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function yL(d,s){return d/pL(s)}function vL(d){return 360*d-180}function kb(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function bL(d,s){return d*pL(kb(s))}class Lv{constructor(s,c,y=0){this.x=+s,this.y=+c,this.z=+y}static fromLngLat(s,c=0){const y=zh.convert(s);return new Lv(mL(y.lng),gL(y.lat),yL(c,y.lat))}toLngLat(){return new zh(vL(this.x),kb(this.y))}toAltitude(){return bL(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/hL*(s=kb(this.y),1/Math.cos(s*Math.PI/180));var s}}function _L(d,s,c){var y=2*Math.PI*6378137/256/Math.pow(2,c);return[d*y-2*Math.PI*6378137/2,s*y-2*Math.PI*6378137/2]}class NS{constructor(s,c,y){if(!(function(w,I,A){return!(w<0||w>25||A<0||A>=Math.pow(2,w)||I<0||I>=Math.pow(2,w))})(s,c,y))throw new Error(`x=${c}, y=${y}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=c,this.y=y,this.key=fg(0,s,s,c,y)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,c,y){const w=(function(A,O,j){var Y=_L(256*A,256*(O=Math.pow(2,j)-O-1),j),ie=_L(256*(A+1),256*(O+1),j);return Y[0]+","+Y[1]+","+ie[0]+","+ie[1]})(this.x,this.y,this.z),I=(function(A,O,j){let Y,ie="";for(let ce=A;ce>0;ce--)Y=1<<ce-1,ie+=(O&Y?1:0)+(j&Y?2:0);return ie})(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,I).replace(/{bbox-epsg-3857}/g,w)}isChildOf(s){const c=this.z-s.z;return c>0&&s.x===this.x>>c&&s.y===this.y>>c}getTilePoint(s){const c=Math.pow(2,this.z);return new f((s.x*c-this.x)*xe,(s.y*c-this.y)*xe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xL{constructor(s,c){this.wrap=s,this.canonical=c,this.key=fg(s,c.z,c.z,c.x,c.y)}}class fc{constructor(s,c,y,w,I){if(this.terrainRttPosMatrix32f=null,s<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${y}`);this.overscaledZ=s,this.wrap=c,this.canonical=new NS(y,+w,+I),this.key=fg(c,s,y,w,I)}clone(){return new fc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-s;return s>this.canonical.z?new fc(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fc(s,this.wrap,s,this.canonical.x>>c,this.canonical.y>>c)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(s,c){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-s;return s>this.canonical.z?fg(this.wrap*+c,s,this.canonical.z,this.canonical.x,this.canonical.y):fg(this.wrap*+c,s,s,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(s){if(s.wrap!==this.wrap||this.overscaledZ-s.overscaledZ<=0)return!1;if(s.overscaledZ===0)return this.overscaledZ>0;const c=this.canonical.z-s.canonical.z;return!(c<0)&&s.canonical.x===this.canonical.x>>c&&s.canonical.y===this.canonical.y>>c}children(s){if(this.overscaledZ>=s)return[new fc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,y=2*this.canonical.x,w=2*this.canonical.y;return[new fc(c,this.wrap,c,y,w),new fc(c,this.wrap,c,y+1,w),new fc(c,this.wrap,c,y,w+1),new fc(c,this.wrap,c,y+1,w+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new fc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new fc(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xL(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Lv(s.x-this.wrap,s.y))}}function fg(d,s,c,y,w){(d*=2)<0&&(d=-1*d-1);const I=1<<c;return(I*I*d+I*w+y).toString(36)+c.toString(36)+s.toString(36)}function FS(d,s){return s?d.properties[s]:d.id}function VX(d,s){const c={id:d.id};if(s.removeAllProperties&&(delete d.removeProperties,delete d.addOrUpdateProperties,delete s.removeProperties),s.removeProperties)for(const y of s.removeProperties){const w=d.addOrUpdateProperties.findIndex((I=>I.key===y));w>-1&&d.addOrUpdateProperties.splice(w,1)}return(d.removeAllProperties||s.removeAllProperties)&&(c.removeAllProperties=!0),(d.removeProperties||s.removeProperties)&&(c.removeProperties=[...d.removeProperties||[],...s.removeProperties||[]]),(d.addOrUpdateProperties||s.addOrUpdateProperties)&&(c.addOrUpdateProperties=[...d.addOrUpdateProperties||[],...s.addOrUpdateProperties||[]]),(d.newGeometry||s.newGeometry)&&(c.newGeometry=s.newGeometry||d.newGeometry),c}function wL(d){var s,c;if(!d)return{};const y={};return y.removeAll=d.removeAll,y.remove=new Set(d.remove||[]),y.add=new Map((s=d.add)===null||s===void 0?void 0:s.map((w=>[w.id,w]))),y.update=new Map((c=d.update)===null||c===void 0?void 0:c.map((w=>[w.id,w]))),y}Pt("CanonicalTileID",NS),Pt("OverscaledTileID",fc,{omit:["terrainRttPosMatrix32f"]});class zp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){const c=new zp;return c.extend(s(new f(this.minX,this.minY))),c.extend(s(new f(this.maxX,this.minY))),c.extend(s(new f(this.minX,this.maxY))),c.extend(s(new f(this.maxX,this.maxY))),c}static fromPoints(s){const c=new zp;for(const y of s)c.extend(y);return c}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class SL{constructor(s){this._stringToNumber={},this._numberToString=[];for(let c=0;c<s.length;c++){const y=s[c];this._stringToNumber[y]=c,this._numberToString[c]=y}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class CL{constructor(s,c,y,w,I){this.type="Feature",this._vectorTileFeature=s,this._x=y,this._y=w,this._z=c,this.properties=s.properties,this.id=I}projectPoint(s,c,y,w){return[360*(s.x+c)/w-180,360/Math.PI*Math.atan(Math.exp((1-2*(s.y+y)/w)*Math.PI))-90]}projectLine(s,c,y,w){return s.map((I=>this.projectPoint(I,c,y,w)))}get geometry(){if(this._geometry)return this._geometry;const s=this._vectorTileFeature,c=s.extent*Math.pow(2,this._z),y=s.extent*this._x,w=s.extent*this._y,I=s.loadGeometry();switch(s.type){case 1:{const A=[];for(const j of I)A.push(j[0]);const O=this.projectLine(A,y,w,c);this._geometry=A.length===1?{type:"Point",coordinates:O[0]}:{type:"MultiPoint",coordinates:O};break}case 2:{const A=I.map((O=>this.projectLine(O,y,w,c)));this._geometry=A.length===1?{type:"LineString",coordinates:A[0]}:{type:"MultiLineString",coordinates:A};break}case 3:{const A=zM(I),O=[];for(const j of A)O.push(j.map((Y=>this.projectLine(Y,y,w,c))));this._geometry=O.length===1?{type:"Polygon",coordinates:O[0]}:{type:"MultiPolygon",coordinates:O};break}default:throw new Error(`unknown feature type: ${s.type}`)}return this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&c!=="_x"&&c!=="_y"&&c!=="_z"&&(s[c]=this[c]);return s}}class hg{_name;dataBuffer;nullabilityBuffer;_size;constructor(s,c,y){this._name=s,this.dataBuffer=c,typeof y=="number"?this._size=y:(this.nullabilityBuffer=y,this._size=y.size())}getValue(s){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(s)?null:this.getValueFromBuffer(s)}has(s){return this.nullabilityBuffer&&this.nullabilityBuffer.get(s)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Mb extends hg{}class BS extends Mb{getValueFromBuffer(s){return this.dataBuffer[s]}}class zS extends Mb{getValueFromBuffer(s){return this.dataBuffer[s]}}class EL extends hg{delta;constructor(s,c,y,w){super(s,c,w),this.delta=y}}class jS extends EL{constructor(s,c,y,w){super(s,Int32Array.of(c),y,w)}getValueFromBuffer(s){return this.dataBuffer[0]+s*this.delta}}class qS extends hg{constructor(s,c,y){super(s,Int32Array.of(c),y)}getValueFromBuffer(s){return this.dataBuffer[0]}}class $X{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(s,c,y,w,I=4096){this._name=s,this._geometryVector=c,this._idVector=y,this._propertyVectors=w,this._extent=I}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(s){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((c=>[c.name,c])))),this.propertyVectorsMap.get(s)}*[Symbol.iterator](){const s=this.geometryVector[Symbol.iterator]();let c=0;for(;c<this.numFeatures;){let y;this.idVector&&(y=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(c)):this.idVector.getValue(c));const w=s?.next().value,I={};for(const A of this.propertyVectors){if(!A)continue;const O=A.name,j=A.getValue(c);j!==null&&(I[O]=j)}c++,yield{id:y,geometry:w,properties:I}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const s=[],c=this.geometryVector.getGeometries();for(let y=0;y<this.numFeatures;y++){let w;this.idVector&&(w=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(y)):this.idVector.getValue(y));const I={coordinates:c[y],type:this.geometryVector.geometryType(y)},A={};for(const O of this.propertyVectors){if(!O)continue;const j=O.name,Y=O.getValue(y);Y!==null&&(A[j]=Y)}s.push({id:w,geometry:I,properties:A})}return s}containsMaxSaveIntegerValues(s){return s instanceof BS||s instanceof qS&&s instanceof jS||s instanceof zS}}class GX{value;constructor(s){this.value=s}get(){return this.value}set(s){this.value=s}increment(){return this.value++}add(s){this.value+=s}}var zi,Vf,wl,md,jp,Gu,Ys,Zs,TL,hc;function ll(d,s,c){const y=new Int32Array(c);let w=0,I=s.get();for(let A=0;A<y.length;A++){let O=d[I++],j=127&O;O<128||(O=d[I++],j|=(127&O)<<7,O<128||(O=d[I++],j|=(127&O)<<14,O<128||(O=d[I++],j|=(127&O)<<21,O<128||(O=d[I++],j|=(15&O)<<28)))),y[w++]=j}return s.set(I),y}function Lb(d,s,c){const y=new BigInt64Array(c);for(let w=0;w<y.length;w++)y[w]=HX(d,s);return y}function UX(d,s){let c,y;return y=d[s.get()],s.increment(),c=127&y,y<128?c:(y=d[s.get()],s.increment(),c|=(127&y)<<7,y<128?c:(y=d[s.get()],s.increment(),c|=(127&y)<<14,y<128?c:(y=d[s.get()],s.increment(),c|=(127&y)<<21,y<128?c:(y=d[s.get()],c|=(15&y)<<28,(function(w,I,A){let O,j;if(j=I[A.get()],A.increment(),O=(112&j)>>4,j<128||(j=I[A.get()],A.increment(),O|=(127&j)<<3,j<128)||(j=I[A.get()],A.increment(),O|=(127&j)<<10,j<128)||(j=I[A.get()],A.increment(),O|=(127&j)<<17,j<128)||(j=I[A.get()],A.increment(),O|=(127&j)<<24,j<128)||(j=I[A.get()],A.increment(),O|=(1&j)<<31,j<128))return 4294967296*O+(w>>>0);throw new Error("Expected varint not more than 10 bytes")})(c,d,s)))))}function IL(d,s,c,y){throw new Error("FastPFor is not implemented yet.")}function qp(d){return d>>>1^-(1&d)}function pg(d){return d>>1n^-(1n&d)}function HX(d,s){let c=0n,y=0,w=s.get();for(;w<d.length;){const I=d[w++];if(c|=BigInt(127&I)<<BigInt(y),!(128&I))break;if(y+=7,y>=64)throw new Error("Varint too long")}return s.set(w),c}function PL(d,s,c){const y=new Int32Array(c);let w=0;for(let I=0;I<s;I++){const A=d[I];y.fill(d[I+s],w,w+A),w+=A}return y}function AL(d,s,c){const y=new BigInt64Array(c);let w=0;for(let I=0;I<s;I++){const A=Number(d[I]);y.fill(d[I+s],w,w+A),w+=A}return y}function kL(d,s,c){const y=new Float64Array(c);let w=0;for(let I=0;I<s;I++){const A=d[I];y.fill(d[I+s],w,w+A),w+=A}return y}function VS(d){const s=d.length/4*4;let c=1;if(s>=4)for(let y=d[0];c<s-4;c+=4)y=d[c]+=y,y=d[c+1]+=y,y=d[c+2]+=y,y=d[c+3]+=y;for(;c!=d.length;)d[c]+=d[c-1],++c}function ML(d){d[0]=d[0]>>>1^-(1&d[0]),d[1]=d[1]>>>1^-(1&d[1]);const s=d.length/4*4;let c=2;if(s>=4)for(;c<s-4;c+=4){const y=d[c],w=d[c+1],I=d[c+2],A=d[c+3];d[c]=(y>>>1^-(1&y))+d[c-2],d[c+1]=(w>>>1^-(1&w))+d[c-1],d[c+2]=(I>>>1^-(1&I))+d[c],d[c+3]=(A>>>1^-(1&A))+d[c+1]}for(;c!=d.length;c+=2)d[c]=(d[c]>>>1^-(1&d[c]))+d[c-2],d[c+1]=(d[c+1]>>>1^-(1&d[c+1]))+d[c-1]}(function(d){d.NONE="NONE",d.DELTA="DELTA",d.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",d.RLE="RLE",d.MORTON="MORTON",d.PDE="PDE"})(zi||(zi={})),(function(d){d.NONE="NONE",d.FAST_PFOR="FAST_PFOR",d.VARINT="VARINT",d.ALP="ALP"})(Vf||(Vf={})),(function(d){d.PRESENT="PRESENT",d.DATA="DATA",d.OFFSET="OFFSET",d.LENGTH="LENGTH"})(wl||(wl={}));class $S{_dictionaryType;_offsetType;_lengthType;constructor(s,c,y){this._dictionaryType=s,this._offsetType=c,this._lengthType=y}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function du(d,s){const c=(function(y,w){const I=y[w.get()],A=Object.values(wl)[I>>4];let O=null;switch(A){case wl.DATA:O=new $S(Object.values(md)[15&I]);break;case wl.OFFSET:O=new $S(null,Object.values(jp)[15&I]);break;case wl.LENGTH:O=new $S(null,null,Object.values(Gu)[15&I])}w.increment();const j=y[w.get()],Y=Object.values(zi)[j>>5],ie=Object.values(zi)[j>>2&7],ce=Object.values(Vf)[3&j];w.increment();const be=ll(y,w,2),Ce=be[0];return{physicalStreamType:A,logicalStreamType:O,logicalLevelTechnique1:Y,logicalLevelTechnique2:ie,physicalLevelTechnique:ce,numValues:Ce,byteLength:be[1],decompressedCount:Ce}})(d,s);return c.logicalLevelTechnique1===zi.MORTON?(function(y,w,I){const A=ll(w,I,2);return{physicalStreamType:y.physicalStreamType,logicalStreamType:y.logicalStreamType,logicalLevelTechnique1:y.logicalLevelTechnique1,logicalLevelTechnique2:y.logicalLevelTechnique2,physicalLevelTechnique:y.physicalLevelTechnique,numValues:y.numValues,byteLength:y.byteLength,decompressedCount:y.decompressedCount,numBits:A[0],coordinateShift:A[1]}})(c,d,s):zi.RLE!==c.logicalLevelTechnique1&&zi.RLE!==c.logicalLevelTechnique2||Vf.NONE===c.physicalLevelTechnique?c:(function(y,w,I){const A=ll(w,I,2);return{physicalStreamType:y.physicalStreamType,logicalStreamType:y.logicalStreamType,logicalLevelTechnique1:y.logicalLevelTechnique1,logicalLevelTechnique2:y.logicalLevelTechnique2,physicalLevelTechnique:y.physicalLevelTechnique,numValues:y.numValues,byteLength:y.byteLength,decompressedCount:A[1],runs:A[0],numRleValues:A[1]}})(c,d,s)}(function(d){d.NONE="NONE",d.SINGLE="SINGLE",d.SHARED="SHARED",d.VERTEX="VERTEX",d.MORTON="MORTON",d.FSST="FSST"})(md||(md={})),(function(d){d.VERTEX="VERTEX",d.INDEX="INDEX",d.STRING="STRING",d.KEY="KEY"})(jp||(jp={})),(function(d){d.VAR_BINARY="VAR_BINARY",d.GEOMETRIES="GEOMETRIES",d.PARTS="PARTS",d.RINGS="RINGS",d.TRIANGLES="TRIANGLES",d.SYMBOL="SYMBOL",d.DICTIONARY="DICTIONARY"})(Gu||(Gu={})),(function(d){d[d.FLAT=0]="FLAT",d[d.CONST=1]="CONST",d[d.SEQUENCE=2]="SEQUENCE",d[d.DICTIONARY=3]="DICTIONARY",d[d.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Ys||(Ys={}));class gd{values;_size;constructor(s,c){this.values=s,this._size=c}get(s){const c=Math.floor(s/8);return(this.values[c]>>s%8&1)==1}set(s,c){const y=Math.floor(s/8);this.values[y]=this.values[y]|(c?1:0)<<s%8}getInt(s){const c=Math.floor(s/8);return this.values[c]>>s%8&1}size(){return this._size}getBuffer(){return this.values}}function fu(d,s,c,y,w){return(function(I,A,O){switch(A.logicalLevelTechnique1){case zi.DELTA:return A.logicalLevelTechnique2===zi.RLE?(function(j,Y,ie){const ce=new Int32Array(ie);let be=0,Ce=0;for(let Oe=0;Oe<Y;Oe++){const ze=j[Oe],Ve=qp(j[Oe+Y]);for(let et=0;et<ze;et++)Ce+=Ve,ce[be++]=Ce}return ce})(I,A.runs,A.numRleValues):((function(j){j[0]=j[0]>>>1^-(1&j[0]);const Y=j.length/4*4;let ie=1;if(Y>=4)for(;ie<Y-4;ie+=4){const ce=j[ie],be=j[ie+1],Ce=j[ie+2],Oe=j[ie+3];j[ie]=(ce>>>1^-(1&ce))+j[ie-1],j[ie+1]=(be>>>1^-(1&be))+j[ie],j[ie+2]=(Ce>>>1^-(1&Ce))+j[ie+1],j[ie+3]=(Oe>>>1^-(1&Oe))+j[ie+2]}for(;ie!=j.length;++ie)j[ie]=(j[ie]>>>1^-(1&j[ie]))+j[ie-1]})(I),I);case zi.RLE:return(function(j,Y,ie){return ie?(function(ce,be,Ce){const Oe=new Int32Array(Ce);let ze=0;for(let Ve=0;Ve<be;Ve++){const et=ce[Ve];let Et=ce[Ve+be];Et=Et>>>1^-(1&Et),Oe.fill(Et,ze,ze+et),ze+=et}return Oe})(j,Y.runs,Y.numRleValues):PL(j,Y.runs,Y.numRleValues)})(I,A,O);case zi.MORTON:return VS(I),I;case zi.COMPONENTWISE_DELTA:return ML(I),I;case zi.NONE:return O&&(function(j){for(let Y=0;Y<j.length;Y++){const ie=j[Y];j[Y]=ie>>>1^-(1&ie)}})(I),I;default:throw new Error(`The specified Logical level technique is not supported: ${A.logicalLevelTechnique1}`)}})(Rb(d,s,c),c,y)}function jh(d,s,c){return(function(y,w){if(w.logicalLevelTechnique1===zi.DELTA&&w.logicalLevelTechnique2===zi.NONE)return(function(A){const O=new Int32Array(A.length+1);O[0]=0,O[1]=qp(A[0]);let j=O[1],Y=2;for(;Y!=O.length;++Y){const ie=A[Y-1];j+=ie>>>1^-(1&ie),O[Y]=O[Y-1]+j}return O})(y);if(w.logicalLevelTechnique1===zi.RLE&&w.logicalLevelTechnique2===zi.NONE)return(function(A,O,j){const Y=new Int32Array(j+1);Y[0]=0;let ie=1,ce=Y[0];for(let be=0;be<O;be++){const Ce=A[be],Oe=A[be+O];for(let ze=ie;ze<ie+Ce;ze++)Y[ze]=Oe+ce,ce=Y[ze];ie+=Ce}return Y})(y,w.runs,w.numRleValues);if(w.logicalLevelTechnique1===zi.NONE&&w.logicalLevelTechnique2===zi.NONE){(function(A){let O=0;for(let j=0;j<A.length;j++)A[j]+=O,O=A[j]})(y);const I=new Int32Array(w.numValues+1);return I[0]=0,I.set(y,1),I}if(w.logicalLevelTechnique1===zi.DELTA&&w.logicalLevelTechnique2===zi.RLE){const I=(function(A,O,j){const Y=new Int32Array(j+1);Y[0]=0;let ie=1,ce=Y[0];for(let be=0;be<O;be++){const Ce=A[be];let Oe=A[be+O];Oe=Oe>>>1^-(1&Oe);for(let ze=ie;ze<ie+Ce;ze++)Y[ze]=Oe+ce,ce=Y[ze];ie+=Ce}return Y})(y,w.runs,w.numRleValues);return VS(I),I}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Rb(d,s,c),c)}function Rb(d,s,c){const y=c.physicalLevelTechnique;if(y===Vf.FAST_PFOR)return IL();if(y===Vf.VARINT)return ll(d,s,c.numValues);if(y===Vf.NONE){const w=s.get();s.add(c.byteLength);const I=d.subarray(w,s.get());return new Int32Array(I)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function GS(d,s,c,y){const w=Rb(d,s,c);if(w.length===1){const I=w[0];return y?qp(I):I}return y?(function(I){return qp(I[1])})(w):(function(I){return I[1]})(w)}function LL(d,s,c){return(function(y){if(y.length==2){const w=qp(y[1]);return[w,w]}return[qp(y[2]),qp(y[3])]})(Rb(d,s,c))}function RL(d,s,c){return(function(y){if(y.length==2){const w=pg(y[1]);return[w,w]}return[pg(y[2]),pg(y[3])]})(Lb(d,s,c.numValues))}function DL(d,s,c,y){return(function(w,I,A){switch(I.logicalLevelTechnique1){case zi.DELTA:return I.logicalLevelTechnique2===zi.RLE?(function(O,j,Y){const ie=new BigInt64Array(Y);let ce=0,be=0n;for(let Ce=0;Ce<j;Ce++){const Oe=Number(O[Ce]),ze=pg(O[Ce+j]);for(let Ve=0;Ve<Oe;Ve++)be+=ze,ie[ce++]=be}return ie})(w,I.runs,I.numRleValues):((function(O){O[0]=O[0]>>1n^-(1n&O[0]);const j=O.length/4*4;let Y=1;if(j>=4)for(;Y<j-4;Y+=4){const ie=O[Y],ce=O[Y+1],be=O[Y+2],Ce=O[Y+3];O[Y]=(ie>>1n^-(1n&ie))+O[Y-1],O[Y+1]=(ce>>1n^-(1n&ce))+O[Y],O[Y+2]=(be>>1n^-(1n&be))+O[Y+1],O[Y+3]=(Ce>>1n^-(1n&Ce))+O[Y+2]}for(;Y!=O.length;++Y)O[Y]=(O[Y]>>1n^-(1n&O[Y]))+O[Y-1]})(w),w);case zi.RLE:return(function(O,j,Y){return Y?(function(ie,ce,be){const Ce=new BigInt64Array(be);let Oe=0;for(let ze=0;ze<ce;ze++){const Ve=Number(ie[ze]);let et=ie[ze+ce];et=et>>1n^-(1n&et),Ce.fill(et,Oe,Oe+Ve),Oe+=Ve}return Ce})(O,j.runs,j.numRleValues):AL(O,j.runs,j.numRleValues)})(w,I,A);case zi.NONE:return A&&(function(O){for(let j=0;j<O.length;j++){const Y=O[j];O[j]=Y>>1n^-(1n&Y)}})(w),w;default:throw new Error(`The specified Logical level technique is not supported: ${I.logicalLevelTechnique1}`)}})(Lb(d,s,c.numValues),c,y)}function OL(d,s,c,y){const w=Lb(d,s,c.numValues);if(w.length===1){const I=w[0];return y?pg(I):I}return y?(function(I){return pg(I[1])})(w):(function(I){return I[1]})(w)}function US(d,s,c,y,w){return(function(I,A,O,j){switch(A.logicalLevelTechnique1){case zi.DELTA:return A.logicalLevelTechnique2===zi.RLE&&(I=PL(I,A.runs,A.numRleValues)),(function(Y,ie){const ce=new Int32Array(Y.size());let be=0;Y.get(0)?(ce[0]=Y.get(0)?ie[0]>>>1^-(1&ie[0]):0,be=1):ce[0]=0;let Ce=1;for(;Ce!=ce.length;++Ce)ce[Ce]=Y.get(Ce)?ce[Ce-1]+(ie[be]>>>1^-(1&ie[be++])):ce[Ce-1];return ce})(j,I);case zi.RLE:return(function(Y,ie,ce,be){const Ce=ie;return ce?(function(Oe,ze,Ve){const et=new Int32Array(Oe.size());let Et=0;for(let rt=0;rt<Ve;rt++){const ut=ze[rt];let At=ze[rt+Ve];At=At>>>1^-(1&At);for(let Ot=Et;Ot<Et+ut;Ot++)Oe.get(Ot)?et[Ot]=At:(et[Ot]=0,Et++);Et+=ut}return et})(be,Y,Ce.runs):(function(Oe,ze,Ve){const et=new Int32Array(Oe.size());let Et=0;for(let rt=0;rt<Ve;rt++){const ut=ze[rt],At=ze[rt+Ve];for(let Ot=Et;Ot<Et+ut;Ot++)Oe.get(Ot)?et[Ot]=At:(et[Ot]=0,Et++);Et+=ut}return et})(be,Y,Ce.runs)})(I,A,O,j);case zi.MORTON:return VS(I),I;case zi.COMPONENTWISE_DELTA:return ML(I),I;case zi.NONE:return I=O?(function(Y,ie){const ce=new Int32Array(Y.size());let be=0,Ce=0;for(;Ce!=ce.length;++Ce)if(Y.get(Ce)){const Oe=ie[be++];ce[Ce]=Oe>>>1^-(1&Oe)}else ce[Ce]=0;return ce})(j,I):(function(Y,ie){const ce=new Int32Array(Y.size());let be=0,Ce=0;for(;Ce!=ce.length;++Ce)ce[Ce]=Y.get(Ce)?ie[be++]:0;return ce})(j,I),I;default:throw new Error("The specified Logical level technique is not supported")}})(c.physicalLevelTechnique===Vf.FAST_PFOR?IL():ll(d,s,c.numValues),c,y,w)}function Db(d,s,c,y){const w=d.logicalLevelTechnique1;if(w===zi.RLE)return d.runs===1?Ys.CONST:Ys.FLAT;const I=s instanceof gd?s.size():s;if(w===zi.DELTA&&d.logicalLevelTechnique2===zi.RLE){const A=d.runs,O=2;if(d.numRleValues!==I)return Ys.FLAT;if(A===1)return Ys.SEQUENCE;if(A===2){const j=y.get();let Y;if(d.physicalLevelTechnique===Vf.VARINT)Y=ll(c,y,4);else{const ie=y.get();Y=new Int32Array(c.buffer,c.byteOffset+ie,4)}if(y.set(j),Y[2]===O&&Y[3]===O)return Ys.SEQUENCE}}return d.numValues===1?Ys.CONST:Ys.FLAT}class NL extends Mb{getValueFromBuffer(s){return this.dataBuffer[s]}}class FL extends EL{constructor(s,c,y,w){super(s,BigInt64Array.of(c),y,w)}getValueFromBuffer(s){return this.dataBuffer[0]+BigInt(s)*this.delta}}class mg{_geometryOffsets;_partOffsets;_ringOffsets;constructor(s,c,y){this._geometryOffsets=s,this._partOffsets=c,this._ringOffsets=y}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function HS(d,s,c){return{x:BL(d,s)-c,y:BL(d>>1,s)-c}}function BL(d,s){let c=0;for(let y=0;y<s;y++)c|=(d&1<<2*y)>>y;return c}(function(d){d[d.POINT=0]="POINT",d[d.LINESTRING=1]="LINESTRING",d[d.POLYGON=2]="POLYGON",d[d.MULTIPOINT=3]="MULTIPOINT",d[d.MULTILINESTRING=4]="MULTILINESTRING",d[d.MULTIPOLYGON=5]="MULTIPOLYGON"})(Zs||(Zs={})),(function(d){d[d.POINT=0]="POINT",d[d.LINESTRING=1]="LINESTRING",d[d.POLYGON=2]="POLYGON"})(TL||(TL={})),(function(d){d[d.MORTON=0]="MORTON",d[d.VEC_2=1]="VEC_2",d[d.VEC_3=2]="VEC_3"})(hc||(hc={}));class WX{createPoint(s){return[[s]]}createMultiPoint(s){return s.map((c=>[c]))}createLineString(s){return[s]}createMultiLineString(s){return s}createPolygon(s,c){return[s].concat(c)}createMultiPolygon(s){return s.flat()}}function zL(d){const s=new Array(d.numGeometries);let c=1,y=1,w=1,I=0;const A=new WX;let O=0,j=0;const Y=d.mortonSettings,ie=d.topologyVector,ce=ie.geometryOffsets,be=ie.partOffsets,Ce=ie.ringOffsets,Oe=d.vertexOffsets,ze=d.containsPolygonGeometry(),Ve=d.vertexBuffer;for(let et=0;et<d.numGeometries;et++){const Et=d.geometryType(et);if(Et===Zs.POINT){if(Oe&&Oe.length!==0)if(d.vertexBufferType===hc.VEC_2){const rt=2*Oe[j++],ut=new f(Ve[rt],Ve[rt+1]);s[I++]=A.createPoint(ut)}else{const rt=HS(Ve[Oe[j++]],Y.numBits,Y.coordinateShift),ut=new f(rt.x,rt.y);s[I++]=A.createPoint(ut)}else{const rt=new f(Ve[O++],Ve[O++]);s[I++]=A.createPoint(rt)}ce&&w++,be&&c++,Ce&&y++}else if(Et===Zs.MULTIPOINT){const rt=ce[w]-ce[w-1];w++;const ut=new Array(rt);if(Oe&&Oe.length!==0){for(let At=0;At<rt;At++){const Ot=2*Oe[j++];ut[At]=new f(Ve[Ot],Ve[Ot+1])}s[I++]=A.createMultiPoint(ut)}else{for(let At=0;At<rt;At++){const Ot=Ve[O++],lr=Ve[O++];ut[At]=new f(Ot,lr)}s[I++]=A.createMultiPoint(ut)}}else if(Et===Zs.LINESTRING){let rt,ut=0;ze?(ut=Ce[y]-Ce[y-1],y++):ut=be[c]-be[c-1],c++,Oe&&Oe.length!==0?(rt=d.vertexBufferType===hc.VEC_2?XS(Ve,Oe,j,ut,!1):YS(Ve,Oe,j,ut,!1,Y),j+=ut):(rt=WS(Ve,O,ut,!1),O+=2*ut),s[I++]=A.createLineString(rt),ce&&w++}else if(Et===Zs.POLYGON){const rt=be[c]-be[c-1];c++;const ut=new Array(rt-1);let At=Ce[y]-Ce[y-1];if(y++,Oe&&Oe.length!==0){const Ot=d.vertexBufferType===hc.VEC_2?Nb(Ve,Oe,j,At):Fb(Ve,Oe,j,At,0,Y);j+=At;for(let lr=0;lr<ut.length;lr++)At=Ce[y]-Ce[y-1],y++,ut[lr]=d.vertexBufferType===hc.VEC_2?Nb(Ve,Oe,j,At):Fb(Ve,Oe,j,At,0,Y),j+=At;s[I++]=A.createPolygon(Ot,ut)}else{const Ot=Ob(Ve,O,At);O+=2*At;for(let lr=0;lr<ut.length;lr++)At=Ce[y]-Ce[y-1],y++,ut[lr]=Ob(Ve,O,At),O+=2*At;s[I++]=A.createPolygon(Ot,ut)}ce&&w++}else if(Et===Zs.MULTILINESTRING){const rt=ce[w]-ce[w-1];w++;const ut=new Array(rt);if(Oe&&Oe.length!==0){for(let At=0;At<rt;At++){let Ot=0;ze?(Ot=Ce[y]-Ce[y-1],y++):Ot=be[c]-be[c-1],c++;const lr=d.vertexBufferType===hc.VEC_2?XS(Ve,Oe,j,Ot,!1):YS(Ve,Oe,j,Ot,!1,Y);ut[At]=lr,j+=Ot}s[I++]=A.createMultiLineString(ut)}else{for(let At=0;At<rt;At++){let Ot=0;ze?(Ot=Ce[y]-Ce[y-1],y++):Ot=be[c]-be[c-1],c++,ut[At]=WS(Ve,O,Ot,!1),O+=2*Ot}s[I++]=A.createMultiLineString(ut)}}else{if(Et!==Zs.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const rt=ce[w]-ce[w-1];w++;const ut=new Array(rt);let At=0;if(Oe&&Oe.length!==0){for(let Ot=0;Ot<rt;Ot++){const lr=be[c]-be[c-1];c++;const Ir=new Array(lr-1);At=Ce[y]-Ce[y-1],y++;const wr=d.vertexBufferType===hc.VEC_2?Nb(Ve,Oe,j,At):Fb(Ve,Oe,j,At,0,Y);j+=At;for(let Or=0;Or<Ir.length;Or++)At=Ce[y]-Ce[y-1],y++,Ir[Or]=d.vertexBufferType===hc.VEC_2?Nb(Ve,Oe,j,At):Fb(Ve,Oe,j,At,0,Y),j+=At;ut[Ot]=A.createPolygon(wr,Ir)}s[I++]=A.createMultiPolygon(ut)}else{for(let Ot=0;Ot<rt;Ot++){const lr=be[c]-be[c-1];c++;const Ir=new Array(lr-1);At=Ce[y]-Ce[y-1],y++;const wr=Ob(Ve,O,At);O+=2*At;for(let Or=0;Or<Ir.length;Or++){const an=Ce[y]-Ce[y-1];y++,Ir[Or]=Ob(Ve,O,an),O+=2*an}ut[Ot]=A.createPolygon(wr,Ir)}s[I++]=A.createMultiPolygon(ut)}}}}return s}function Ob(d,s,c){return WS(d,s,c,!0)}function Nb(d,s,c,y){return XS(d,s,c,y,!0)}function Fb(d,s,c,y,w,I){return YS(d,s,c,y,!0,I)}function WS(d,s,c,y){const w=new Array(y?c+1:c);for(let I=0;I<2*c;I+=2)w[I/2]=new f(d[s+I],d[s+I+1]);return y&&(w[w.length-1]=w[0]),w}function XS(d,s,c,y,w){const I=new Array(w?y+1:y);for(let A=0;A<2*y;A+=2){const O=2*s[c+A/2];I[A/2]=new f(d[O],d[O+1])}return w&&(I[I.length-1]=I[0]),I}function YS(d,s,c,y,w,I){const A=new Array(w?y+1:y);for(let O=0;O<y;O++){const j=HS(d[s[c+O]],I.numBits,I.coordinateShift);A[O]=new f(j.x,j.y)}return w&&(A[A.length-1]=A[0]),A}class jL{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(s,c,y,w,I){this._vertexBufferType=s,this._topologyVector=c,this._vertexOffsets=y,this._vertexBuffer=w,this._mortonSettings=I}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const s=zL(this);let c=0;for(;c<this.numGeometries;)yield{coordinates:s[c],type:this.geometryType(c)},c++}getSimpleEncodedVertex(s){const c=this.vertexOffsets?2*this.vertexOffsets[s]:2*s;return[this.vertexBuffer[c],this.vertexBuffer[c+1]]}getVertex(s){if(this.vertexOffsets&&this.mortonSettings){const y=HS(this.vertexBuffer[this.vertexOffsets[s]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[y.x,y.y]}const c=this.vertexOffsets?2*this.vertexOffsets[s]:2*s;return[this.vertexBuffer[c],this.vertexBuffer[c+1]]}getGeometries(){return zL(this)}get mortonSettings(){return this._mortonSettings}}class qL extends jL{_numGeometries;_geometryType;constructor(s,c,y,w,I,A,O){super(y,w,I,A,O),this._numGeometries=s,this._geometryType=c}geometryType(s){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Zs.POLYGON||this._geometryType===Zs.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class VL extends jL{_geometryTypes;constructor(s,c,y,w,I,A){super(s,y,w,I,A),this._geometryTypes=c}geometryType(s){return this._geometryTypes[s]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let s=0;s<this.numGeometries;s++)if(this.geometryType(s)===Zs.POLYGON||this.geometryType(s)===Zs.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class $L{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(s,c,y,w){this._triangleOffsets=s,this._indexBuffer=c,this._vertexBuffer=y,this._topologyVector=w}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const s=new Array(this.numGeometries),c=this._topologyVector,y=c.partOffsets,w=c.ringOffsets,I=c.geometryOffsets;let A=0,O=1,j=1,Y=1;for(let ie=0;ie<this.numGeometries;ie++)switch(this.geometryType(ie)){case Zs.POLYGON:{const ce=y[O]-y[O-1];O++;const be=[];for(let Ce=0;Ce<ce;Ce++){const Oe=w[j]-w[j-1];j++;const ze=[];for(let Ve=0;Ve<Oe;Ve++){const et=this._vertexBuffer[A++],Et=this._vertexBuffer[A++];ze.push(new f(et,Et))}ze.length>0&&ze.push(ze[0]),be.push(ze)}s[ie]=be,I&&Y++}break;case Zs.MULTIPOLYGON:{const ce=I[Y]-I[Y-1];Y++;const be=[];for(let Ce=0;Ce<ce;Ce++){const Oe=y[O]-y[O-1];O++;for(let ze=0;ze<Oe;ze++){const Ve=w[j]-w[j-1];j++;const et=[];for(let Et=0;Et<Ve;Et++){const rt=this._vertexBuffer[A++],ut=this._vertexBuffer[A++];et.push(new f(rt,ut))}et.length>0&&et.push(et[0]),be.push(et)}}s[ie]=be}}return s}[Symbol.iterator](){return null}}function GL(d,s,c,y,w,I){return new XX(d,s,c,y,w,I)}class XX extends $L{_numGeometries;_geometryType;constructor(s,c,y,w,I,A){super(y,w,I,A),this._numGeometries=s,this._geometryType=c}geometryType(s){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function UL(d,s,c,y,w){return new YX(d,s,c,y,w)}class YX extends $L{_geometryTypes;constructor(s,c,y,w,I){super(c,y,w,I),this._geometryTypes=s}geometryType(s){return this._geometryTypes[s]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function ZX(d,s,c,y,w){const I=du(d,c);let A=null,O=null,j=null,Y=null,ie=null,ce=null,be=null,Ce=null;if(Db(I,y,d,c)===Ys.CONST){const ze=GS(d,c,I,!1);for(let Ve=0;Ve<s-1;Ve++){const et=du(d,c);switch(et.physicalStreamType){case wl.LENGTH:switch(et.logicalStreamType.lengthType){case Gu.GEOMETRIES:A=jh(d,c,et);break;case Gu.PARTS:O=jh(d,c,et);break;case Gu.RINGS:j=jh(d,c,et);break;case Gu.TRIANGLES:be=jh(d,c,et)}break;case wl.OFFSET:switch(et.logicalStreamType.offsetType){case jp.VERTEX:Y=fu(d,c,et,!1);break;case jp.INDEX:Ce=fu(d,c,et,!1)}break;case wl.DATA:md.VERTEX===et.logicalStreamType.dictionaryType?ie=fu(d,c,et,!0):(ce={numBits:et.numBits,coordinateShift:et.coordinateShift},ie=fu(d,c,et,!1))}}return Ce!==null?A!=null||O!=null?GL(y,ze,be,Ce,ie,new mg(A,O,j)):GL(y,ze,be,Ce,ie):ce===null?(function(Ve,et,Et,rt,ut){return new qL(Ve,et,hc.VEC_2,Et,rt,ut)})(y,ze,new mg(A,O,j),Y,ie):(function(Ve,et,Et,rt,ut,At){return new qL(Ve,et,hc.MORTON,Et,rt,ut,At)})(y,ze,new mg(A,O,j),Y,ie,ce)}const Oe=fu(d,c,I,!1);for(let ze=0;ze<s-1;ze++){const Ve=du(d,c);switch(Ve.physicalStreamType){case wl.LENGTH:switch(Ve.logicalStreamType.lengthType){case Gu.GEOMETRIES:A=fu(d,c,Ve,!1);break;case Gu.PARTS:O=fu(d,c,Ve,!1);break;case Gu.RINGS:j=fu(d,c,Ve,!1);break;case Gu.TRIANGLES:be=jh(d,c,Ve)}break;case wl.OFFSET:switch(Ve.logicalStreamType.offsetType){case jp.VERTEX:Y=fu(d,c,Ve,!1);break;case jp.INDEX:Ce=fu(d,c,Ve,!1)}break;case wl.DATA:md.VERTEX===Ve.logicalStreamType.dictionaryType?ie=fu(d,c,Ve,!0):(ce={numBits:Ve.numBits,coordinateShift:Ve.coordinateShift},ie=fu(d,c,Ve,!1))}}return Ce!==null&&O===null?UL(Oe,be,Ce,ie):(A!==null?(A=ZS(Oe,A,2),O!==null&&j!==null?(O=HL(Oe,A,O,!1),j=(function(ze,Ve,et,Et){const rt=new Int32Array(et[et.length-1]+1);let ut=0;rt[0]=ut;let At=1,Ot=1,lr=0;for(let Ir=0;Ir<ze.length;Ir++){const wr=ze[Ir],Or=Ve[Ir+1]-Ve[Ir];if(wr!==0&&wr!==3)for(let an=0;an<Or;an++){const jr=et[At]-et[At-1];At++;for(let Er=0;Er<jr;Er++)ut=rt[Ot++]=ut+Et[lr++]}else for(let an=0;an<Or;an++)rt[Ot++]=++ut,At++}return rt})(Oe,A,O,j)):O!==null&&(O=(function(ze,Ve,et){const Et=new Int32Array(Ve[Ve.length-1]+1);let rt=0;Et[0]=rt;let ut=1,At=0;for(let Ot=0;Ot<ze.length;Ot++){const lr=ze[Ot],Ir=Ve[Ot+1]-Ve[Ot];if(lr===4||lr===1)for(let wr=0;wr<Ir;wr++)rt=Et[ut++]=rt+et[At++];else for(let wr=0;wr<Ir;wr++)Et[ut++]=++rt}return Et})(Oe,A,O))):O!==null&&j!==null?(O=ZS(Oe,O,1),j=HL(Oe,O,j,!0)):O!==null&&(O=ZS(Oe,O,0)),Ce!==null?UL(Oe,be,Ce,ie,new mg(A,O,j)):ce===null?(function(ze,Ve,et,Et){return new VL(hc.VEC_2,ze,Ve,et,Et)})(Oe,new mg(A,O,j),Y,ie):(function(ze,Ve,et,Et,rt){return new VL(hc.MORTON,ze,Ve,et,Et,rt)})(Oe,new mg(A,O,j),Y,ie,ce))}function ZS(d,s,c){const y=new Int32Array(d.length+1);let w=0;y[0]=w;let I=0;for(let A=0;A<d.length;A++)w=y[A+1]=w+(d[A]>c?s[I++]:1);return y}function HL(d,s,c,y){const w=new Int32Array(s[s.length-1]+1);let I=0;w[0]=I;let A=1,O=0;for(let j=0;j<d.length;j++){const Y=d[j],ie=s[j+1]-s[j];if(Y===5||Y===2||y&&(Y===4||Y===1))for(let ce=0;ce<ie;ce++)I=w[A++]=I+c[O++];else for(let ce=0;ce<ie;ce++)w[A++]=++I}return w}class KX extends hg{dataVector;constructor(s,c,y){super(s,c.getBuffer(),y),this.dataVector=c}getValueFromBuffer(s){return this.dataVector.get(s)}}class JX extends Mb{getValueFromBuffer(s){return this.dataBuffer[s]}}class WL extends hg{constructor(s,c,y){super(s,BigInt64Array.of(c),y)}getValueFromBuffer(s){return this.dataBuffer[0]}}function Rv(d,s,c){return XL(d,Math.ceil(s/8),c)}function XL(d,s,c){const y=new Uint8Array(s);let w=0;for(;w<s;){const I=d[c.increment()];if(I<=127){const A=I+3,O=d[c.increment()],j=w+A;y.fill(O,w,j),w=j}else{const A=256-I;for(let O=0;O<A;O++)y[w++]=d[c.increment()]}}return y}const QX=new TextDecoder;function KS(d,s,c){return c-s>=12?QX.decode(d.subarray(s,c)):(function(y,w,I){let A="",O=w;for(;O<I;){const j=y[O];let Y,ie,ce,be=null,Ce=j>239?4:j>223?3:j>191?2:1;if(O+Ce>I)break;Ce===1?j<128&&(be=j):Ce===2?(Y=y[O+1],(192&Y)==128&&(be=(31&j)<<6|63&Y,be<=127&&(be=null))):Ce===3?(Y=y[O+1],ie=y[O+2],(192&Y)==128&&(192&ie)==128&&(be=(15&j)<<12|(63&Y)<<6|63&ie,(be<=2047||be>=55296&&be<=57343)&&(be=null))):Ce===4&&(Y=y[O+1],ie=y[O+2],ce=y[O+3],(192&Y)==128&&(192&ie)==128&&(192&ce)==128&&(be=(15&j)<<18|(63&Y)<<12|(63&ie)<<6|63&ce,(be<=65535||be>=1114112)&&(be=null))),be===null?(be=65533,Ce=1):be>65535&&(be-=65536,A+=String.fromCharCode(be>>>10&1023|55296),be=56320|1023&be),A+=String.fromCharCode(be),O+=Ce}return A})(d,s,c)}class JS extends hg{offsetBuffer;constructor(s,c,y,w){super(s,y,w),this.offsetBuffer=c}}class YL extends JS{textEncoder;constructor(s,c,y,w){super(s,c,y,w??c.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(s){return KS(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class gg extends JS{indexBuffer;textEncoder;constructor(s,c,y,w,I){super(s,y,w,I??c.length),this.indexBuffer=c,this.indexBuffer=c,this.textEncoder=new TextEncoder}getValueFromBuffer(s){const c=this.indexBuffer[s];return KS(this.dataBuffer,this.offsetBuffer[c],this.offsetBuffer[c+1])}}class ZL extends JS{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(s,c,y,w,I,A,O){super(s,y,w,O),this.indexBuffer=c,this.symbolOffsetBuffer=I,this.symbolTableBuffer=A,this.textEncoder=new TextEncoder}getValueFromBuffer(s){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(y,w,I){const A=[],O=new Array(w.length).fill(0);for(let j=1;j<w.length;j++)O[j]=O[j-1]+w[j-1];for(let j=0;j<I.length;j++)if(I[j]===255)A.push(I[++j]);else{const Y=w[I[j]],ie=O[I[j]];for(let ce=0;ce<Y;ce++)A.push(y[ie+ce])}return new Uint8Array(A)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const c=this.indexBuffer[s];return KS(this.decodedDictionary,this.offsetBuffer[c],this.offsetBuffer[c+1])}offsetToLengthBuffer(s){const c=new Uint32Array(s.length-1);let y=s[0];for(let w=1;w<s.length;w++){const I=s[w];c[w-1]=I-y,y=I}return c}}function eY(d,s,c,y,w,I){return c.type==="scalarType"?(function(A,O,j,Y,ie,ce){let be=null,Ce=0;if(A===0)return null;if(ce.nullable){const ze=du(O,j);Ce=ze.numValues;const Ve=j.get(),et=Rv(O,Ce,j);j.set(Ve+ze.byteLength),be=new gd(et,ze.numValues)}const Oe=be??Y;switch(ie.physicalType){case 4:case 3:return(function(ze,Ve,et,Et,rt){const ut=du(ze,Ve),At=Db(ut,rt,ze,Ve),Ot=Et.physicalType===3;if(At===Ys.FLAT){const lr=Dv(rt)?US(ze,Ve,ut,Ot,rt):fu(ze,Ve,ut,Ot);return new BS(et.name,lr,rt)}if(At===Ys.SEQUENCE){const lr=LL(ze,Ve,ut);return new jS(et.name,lr[0],lr[1],ut.numRleValues)}{const lr=GS(ze,Ve,ut,Ot);return new qS(et.name,lr,rt)}})(O,j,ce,ie,Oe);case 9:return(function(ze,Ve,et,Et,rt){let ut=null,At=null,Ot=null,lr=null,Ir=null,wr=null,Or=null,an=null;for(let jr=0;jr<Et;jr++){const Er=du(Ve,et);if(Er.byteLength!==0)switch(Er.physicalStreamType){case wl.PRESENT:{const vr=Rv(Ve,Er.numValues,et);wr=new gd(vr,Er.numValues);break}case wl.OFFSET:At=rt!=null||wr!=null?US(Ve,et,Er,!1,rt??wr):fu(Ve,et,Er,!1);break;case wl.LENGTH:{const vr=jh(Ve,et,Er);Gu.DICTIONARY===Er.logicalStreamType.lengthType?ut=vr:Gu.SYMBOL===Er.logicalStreamType.lengthType?lr=vr:Or=vr;break}case wl.DATA:{const vr=Ve.subarray(et.get(),et.get()+Er.byteLength);et.add(Er.byteLength);const vn=Er.logicalStreamType.dictionaryType;md.FSST===vn?Ir=vr:md.SINGLE===vn||md.SHARED===vn?Ot=vr:md.NONE===vn&&(an=vr);break}}}return(function(jr,Er,vr,vn,hn,xn,un){return Er?new ZL(jr,vr,vn,hn,xn,Er,un):null})(ze,Ir,At,ut,Ot,lr,rt??wr)??(function(jr,Er,vr,vn,hn){return Er?hn?new gg(jr,vr,vn,Er,hn):new gg(jr,vr,vn,Er):null})(ze,Ot,At,ut,rt??wr)??(function(jr,Er,vr,vn,hn){if(!Er||!vr)return null;if(vn)return hn?new gg(jr,vn,Er,vr,hn):new gg(jr,vn,Er,vr);if(hn&&hn.size()!==Er.length-1){const xn=new Int32Array(hn.size());let un=0;for(let Nn=0;Nn<hn.size();Nn++)xn[Nn]=hn.get(Nn)?un++:0;return new gg(jr,xn,Er,vr,hn)}return hn?new YL(jr,Er,vr,hn):new YL(jr,Er,vr)})(ze,Or,an,At,rt??wr)})(ce.name,O,j,ce.nullable?A-1:A,be);case 0:return(function(ze,Ve,et,Et,rt){const ut=du(ze,Ve),At=ut.numValues,Ot=Ve.get(),lr=Dv(rt)?(function(wr,Or,an,jr){const Er=XL(wr,Math.ceil(Or/8),an),vr=new gd(Er,Or),vn=jr.size(),hn=new gd(new Uint8Array(vn),vn);let xn=0;for(let un=0;un<jr.size();un++){const Nn=!!jr.get(un)&&vr.get(xn++);hn.set(un,Nn)}return hn.getBuffer()})(ze,At,Ve,rt):Rv(ze,At,Ve);Ve.set(Ot+ut.byteLength);const Ir=new gd(lr,At);return new KX(et.name,Ir,rt)})(O,j,ce,0,Oe);case 6:case 5:return(function(ze,Ve,et,Et,rt){const ut=du(ze,Ve),At=Db(ut,Et,ze,Ve),Ot=rt.physicalType===5;if(At===Ys.FLAT){const lr=Dv(Et)?(function(Ir,wr,Or,an,jr){return(function(Er,vr,vn,hn){switch(vr.logicalLevelTechnique1){case zi.DELTA:return vr.logicalLevelTechnique2===zi.RLE&&(Er=AL(Er,vr.runs,vr.numRleValues)),(function(xn,un){const Nn=new BigInt64Array(xn.size());let Zi=0;xn.get(0)?(Nn[0]=xn.get(0)?un[0]>>1n^-(1n&un[0]):0n,Zi=1):Nn[0]=0n;let Oi=1;for(;Oi!=Nn.length;++Oi)Nn[Oi]=xn.get(Oi)?Nn[Oi-1]+(un[Zi]>>1n^-(1n&un[Zi++])):Nn[Oi-1];return Nn})(hn,Er);case zi.RLE:return(function(xn,un,Nn,Zi){const Oi=un;return Nn?(function(fo,Cl,fs){const ho=new BigInt64Array(fo.size());let to=0;for(let fa=0;fa<fs;fa++){const ko=Number(Cl[fa]);let qo=Cl[fa+fs];qo=qo>>1n^-(1n&qo);for(let Xa=to;Xa<to+ko;Xa++)fo.get(Xa)?ho[Xa]=qo:(ho[Xa]=0n,to++);to+=ko}return ho})(Zi,xn,Oi.runs):(function(fo,Cl,fs){const ho=new BigInt64Array(fo.size());let to=0;for(let fa=0;fa<fs;fa++){const ko=Number(Cl[fa]),qo=Cl[fa+fs];for(let Xa=to;Xa<to+ko;Xa++)fo.get(Xa)?ho[Xa]=qo:(ho[Xa]=0n,to++);to+=ko}return ho})(Zi,xn,Oi.runs)})(Er,vr,vn,hn);case zi.NONE:return Er=vn?(function(xn,un){const Nn=new BigInt64Array(xn.size());let Zi=0,Oi=0;for(;Oi!=Nn.length;++Oi)if(xn.get(Oi)){const fo=un[Zi++];Nn[Oi]=fo>>1n^-(1n&fo)}else Nn[Oi]=0n;return Nn})(hn,Er):(function(xn,un){const Nn=new BigInt64Array(xn.size());let Zi=0,Oi=0;for(;Oi!=Nn.length;++Oi)Nn[Oi]=xn.get(Oi)?un[Zi++]:0n;return Nn})(hn,Er),Er;default:throw new Error("The specified Logical level technique is not supported")}})(Lb(Ir,wr,Or.numValues),Or,an,jr)})(ze,Ve,ut,Ot,Et):DL(ze,Ve,ut,Ot);return new NL(et.name,lr,Et)}if(At===Ys.SEQUENCE){const lr=RL(ze,Ve,ut);return new FL(et.name,lr[0],lr[1],ut.numRleValues)}{const lr=OL(ze,Ve,ut,Ot);return new WL(et.name,lr,Et)}})(O,j,ce,Oe,ie);case 7:return(function(ze,Ve,et,Et){const rt=du(ze,Ve),ut=Dv(Et)?(function(At,Ot,lr,Ir){const wr=Ot.get(),Or=wr+Ir*Float32Array.BYTES_PER_ELEMENT,an=new Uint8Array(At.subarray(wr,Or)).buffer,jr=new Float32Array(an);Ot.set(Or);const Er=lr.size(),vr=new Float32Array(Er);let vn=0;for(let hn=0;hn<Er;hn++)vr[hn]=lr.get(hn)?jr[vn++]:0;return vr})(ze,Ve,Et,rt.numValues):(function(At,Ot,lr){const Ir=Ot.get(),wr=Ir+lr*Float32Array.BYTES_PER_ELEMENT,Or=new Uint8Array(At.subarray(Ir,wr)).buffer,an=new Float32Array(Or);return Ot.set(wr),an})(ze,Ve,rt.numValues);return new JX(et.name,ut,Et)})(O,j,ce,Oe);case 8:return(function(ze,Ve,et,Et){const rt=du(ze,Ve),ut=Dv(Et)?(function(At,Ot,lr,Ir){const wr=Ot.get(),Or=wr+Ir*Float64Array.BYTES_PER_ELEMENT,an=new Uint8Array(At.subarray(wr,Or)).buffer,jr=new Float64Array(an);Ot.set(Or);const Er=lr.size(),vr=new Float64Array(Er);let vn=0;for(let hn=0;hn<Er;hn++)vr[hn]=lr.get(hn)?jr[vn++]:0;return vr})(ze,Ve,Et,rt.numValues):(function(At,Ot,lr){const Ir=Ot.get(),wr=Ir+lr*Float64Array.BYTES_PER_ELEMENT,Or=new Uint8Array(At.subarray(Ir,wr)).buffer,an=new Float64Array(Or);return Ot.set(wr),an})(ze,Ve,rt.numValues);return new zS(et.name,ut,Et)})(O,j,ce,Oe);default:throw new Error(`The specified data type for the field is currently not supported: ${ie}`)}})(y,d,s,w,c.scalarType,c):y!=1?null:(function(A,O,j,Y){let ie=null,ce=null,be=null,Ce=null,Oe=!1;for(;!Oe;){const Et=du(A,O);switch(Et.physicalStreamType){case wl.LENGTH:Gu.DICTIONARY===Et.logicalStreamType.lengthType?ie=jh(A,O,Et):be=jh(A,O,Et);break;case wl.DATA:md.SINGLE===Et.logicalStreamType.dictionaryType||md.SHARED===Et.logicalStreamType.dictionaryType?(ce=A.subarray(O.get(),O.get()+Et.byteLength),Oe=!0):Ce=A.subarray(O.get(),O.get()+Et.byteLength),O.add(Et.byteLength)}}const ze=j.complexType.children,Ve=[];let et=0;for(const Et of ze){const rt=ll(A,O,1)[0];if(rt==0)continue;const ut=`${j.name}${Et.name==="default"?"":":"+Et.name}`;if(rt!==2||Et.type!=="scalarField"||Et.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const At=du(A,O),Ot=Rv(A,At.numValues,O),lr=du(A,O),Ir=lr.decompressedCount!==Y?US(A,O,lr,!1,new gd(Ot,At.numValues)):fu(A,O,lr,!1);Ve[et++]=Ce?new ZL(ut,Ir,ie,ce,be,Ce,new gd(Ot,At.numValues)):new gg(ut,Ir,ie,ce,new gd(Ot,At.numValues))}return Ve})(d,s,c,w)}function Dv(d){return d instanceof gd}function tY(d){if(d.name==="id")return!1;if(d.type==="scalarType"){const s=d.scalarType;if(s.type==="physicalType")switch(s.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(s.type==="logicalType")return!1}else if(d.type==="complexType"){const s=d.complexType;if(s.type==="physicalType")switch(s.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",d),!1}const rY=new TextDecoder;function KL(d,s){const c=ll(d,s,1)[0];if(c===0)return"";const y=s.get(),w=d.subarray(y,y+c);return s.add(c),rY.decode(w)}function JL(d,s){const c=ll(d,s,1)[0]>>>0,y=!!(4&c),w=!!(2&c),I=ll(d,s,1)[0]>>>0,A={};if(1&c&&(A.nullable=!0),w){const O={};if(y?(O.type="logicalType",O.logicalType=I):(O.type="physicalType",O.physicalType=I),8&c){const j=ll(d,s,1)[0]>>>0;O.children=new Array(j);for(let Y=0;Y<j;Y++)O.children[Y]=JL(d,s)}A.type="complexField",A.complexField=O}else{const O={};y?(O.type="logicalType",O.logicalType=I):(O.type="physicalType",O.physicalType=I),A.type="scalarField",A.scalarField=O}return A}function nY(d,s){const c=ll(d,s,1)[0]>>>0,y=(function(w){switch(w){case 0:case 1:case 2:case 3:{const I={};I.nullable=!!(1&w),I.columnScope=0;const A={};return A.physicalType=w>1?6:4,A.type="physicalType",I.scalarType=A,I.type="scalarType",I}case 4:{const I={nullable:!1,columnScope:0},A={type:"physicalType",physicalType:0};return I.type="complexType",I.complexType=A,I}case 30:{const I={nullable:!1,columnScope:0},A={type:"physicalType",physicalType:1};return I.type="complexType",I.complexType=A,I}default:return(function(I){let A=null;switch(I){case 10:case 11:A=0;break;case 12:case 13:A=1;break;case 14:case 15:A=2;break;case 16:case 17:A=3;break;case 18:case 19:A=4;break;case 20:case 21:A=5;break;case 22:case 23:A=6;break;case 24:case 25:A=7;break;case 26:case 27:A=8;break;case 28:case 29:A=9;break;default:return null}const O={};O.nullable=!!(1&I),O.columnScope=0;const j={type:"physicalType"};return j.physicalType=A,O.type="scalarType",O.scalarType=j,O})(w)}})(c);if(!y)throw new Error(`Unsupported column type code: ${c}`);if((function(w){return w>=10})(c)?y.name=KL(d,s):c>=0&&c<=3?y.name="id":c===4&&(y.name="geometry"),(function(w){return w===30})(c)){const w=ll(d,s,1)[0]>>>0,I=y.complexType;I.children=new Array(w);for(let A=0;A<w;A++)I.children[A]=JL(d,s)}return y}function iY(d,s){const c={featureTables:[]},y={};y.name=KL(d,s);const w=ll(d,s,1)[0]>>>0,I=ll(d,s,1)[0]>>>0;y.columns=new Array(I);for(let A=0;A<I;A++)y.columns[A]=nY(d,s);return c.featureTables.push(y),[c,w]}function aY(d,s,c,y,w,I,A=!1){const O=s.scalarType.physicalType,j=Db(w,I,d,c);if(O===4)switch(j){case Ys.FLAT:{const Y=fu(d,c,w,!1);return new BS(y,Y,I)}case Ys.SEQUENCE:{const Y=LL(d,c,w);return new jS(y,Y[0],Y[1],w.numRleValues)}case Ys.CONST:{const Y=GS(d,c,w,!1);return new qS(y,Y,I)}}else switch(j){case Ys.FLAT:{if(A){const ie=(function(ce,be,Ce,Oe){const ze=(function(Ve,et,Et){const rt=new Float64Array(et);for(let ut=0;ut<et;ut++)rt[ut]=UX(Ve,Et);return rt})(ce,Ce.numValues,be);return(function(Ve,et,Et){switch(et.logicalLevelTechnique1){case zi.DELTA:return et.logicalLevelTechnique2===zi.RLE&&(Ve=kL(Ve,et.runs,et.numRleValues)),(function(rt){rt[0]=rt[0]%2==1?(rt[0]+1)/-2:rt[0]/2;const ut=rt.length/4*4;let At=1;if(ut>=4)for(;At<ut-4;At+=4){const Ot=rt[At],lr=rt[At+1],Ir=rt[At+2],wr=rt[At+3];rt[At]=(Ot%2==1?(Ot+1)/-2:Ot/2)+rt[At-1],rt[At+1]=(lr%2==1?(lr+1)/-2:lr/2)+rt[At],rt[At+2]=(Ir%2==1?(Ir+1)/-2:Ir/2)+rt[At+1],rt[At+3]=(wr%2==1?(wr+1)/-2:wr/2)+rt[At+2]}for(;At!=rt.length;++At)rt[At]=(rt[At]%2==1?(rt[At]+1)/-2:rt[At]/2)+rt[At-1]})(Ve),Ve;case zi.RLE:return(function(rt,ut,At){return kL(rt,ut.runs,ut.numRleValues)})(Ve,et);case zi.NONE:return Ve;default:throw new Error(`The specified Logical level technique is not supported: ${et.logicalLevelTechnique1}`)}})(ze,Ce)})(d,c,w);return new zS(y,ie,I)}const Y=DL(d,c,w,!1);return new NL(y,Y,I)}case Ys.SEQUENCE:{const Y=RL(d,c,w);return new FL(y,Y[0],Y[1],w.numRleValues)}case Ys.CONST:{const Y=OL(d,c,w,!1);return new WL(y,Y,I)}}throw new Error("Vector type not supported for id column.")}class oY{constructor(s,c){var y;switch(this._featureData=s,this.properties=this._featureData.properties||{},(y=this._featureData.geometry)===null||y===void 0?void 0:y.type){case Zs.POINT:case Zs.MULTIPOINT:this.type=1;break;case Zs.LINESTRING:case Zs.MULTILINESTRING:this.type=2;break;case Zs.POLYGON:case Zs.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=c,this.id=Number(this._featureData.id)}loadGeometry(){const s=[];for(const c of this._featureData.geometry.coordinates){const y=[];for(const w of c)y.push(new f(w.x,w.y));s.push(y)}return s}}class sY{constructor(s){this.features=[],this.featureTable=s,this.name=s.name,this.extent=s.extent,this.version=2,this.features=s.getFeatures(),this.length=this.features.length}feature(s){return new oY(this.features[s],this.extent)}}class QL{constructor(s){this.layers={};const c=(function(y,w,I=!0){const A=new GX(0),O=[];for(;A.get()<y.length;){const j=ll(y,A,1)[0]>>>0,Y=A.get()+j;if(Y>y.length)throw new Error(`Block overruns tile: ${Y} > ${y.length}`);if(ll(y,A,1)[0]>>>0!=1){A.set(Y);continue}const ie=iY(y,A),ce=ie[1],be=ie[0].featureTables[0];let Ce=null,Oe=null;const ze=[];let Ve=0;for(const Et of be.columns){const rt=Et.name;if(rt==="id"){let ut=null;if(Et.nullable){const Ot=du(y,A),lr=A.get(),Ir=Rv(y,Ot.numValues,A);A.set(lr+Ot.byteLength),ut=new gd(Ir,Ot.numValues)}const At=du(y,A);Ve=At.decompressedCount,Ce=aY(y,Et,A,rt,At,ut??Ve,I)}else if(rt==="geometry"){const ut=ll(y,A,1)[0];if(Ve===0){const At=A.get();Ve=du(y,A).decompressedCount,A.set(At)}Oe=ZX(y,ut,A,Ve)}else{const ut=tY(Et)?ll(y,A,1)[0]:1;if(ut===0&&Et.type==="scalarType")continue;const At=eY(y,A,Et,ut,Ve);if(At)if(Array.isArray(At))for(const Ot of At)ze.push(Ot);else ze.push(At)}}const et=new $X(be.name,Oe,Ce,ze,ce);O.push(et),A.set(Y)}return O})(new Uint8Array(s));this.layers=c.reduce(((y,w)=>Object.assign(Object.assign({},y),{[w.name]:new sY(w)})),{})}}class lY{constructor(s,c){this.feature=s,this.type=s.type,this.properties=s.tags?s.tags:{},this.extent=c,"id"in s&&(typeof s.id=="string"?this.id=parseInt(s.id,10):typeof s.id!="number"||isNaN(s.id)||(this.id=s.id))}loadGeometry(){const s=[],c=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const y of c){const w=[];for(const I of y)w.push(new f(I[0],I[1]));s.push(w)}return s}}const Ov="_geojsonTileLayer";function uY(d,s){s.writeVarintField(15,d.version||1),s.writeStringField(1,d.name||""),s.writeVarintField(5,d.extent||4096);const c={keys:[],values:[],keycache:{},valuecache:{}};for(let I=0;I<d.length;I++)c.feature=d.feature(I),s.writeMessage(2,cY,c);const y=c.keys;for(const I of y)s.writeStringField(3,I);const w=c.values;for(const I of w)s.writeMessage(4,hY,I)}function cY(d,s){if(!d.feature)return;const c=d.feature;c.id!==void 0&&s.writeVarintField(1,c.id),s.writeMessage(2,dY,d),s.writeVarintField(3,c.type),s.writeMessage(4,fY,c)}function dY(d,s){for(const c in d.feature?.properties){let y=d.feature.properties[c],w=d.keycache[c];if(y==null)continue;w===void 0&&(d.keys.push(c),w=d.keys.length-1,d.keycache[c]=w),s.writeVarint(w),typeof y!="string"&&typeof y!="boolean"&&typeof y!="number"&&(y=JSON.stringify(y));const I=typeof y+":"+y;let A=d.valuecache[I];A===void 0&&(d.values.push(y),A=d.values.length-1,d.valuecache[I]=A),s.writeVarint(A)}}function QS(d,s){return(s<<3)+(7&d)}function eR(d){return d<<1^d>>31}function fY(d,s){const c=d.loadGeometry(),y=d.type;let w=0,I=0;for(const A of c){let O=1;y===1&&(O=A.length),s.writeVarint(QS(1,O));const j=y===3?A.length-1:A.length;for(let Y=0;Y<j;Y++){Y===1&&y!==1&&s.writeVarint(QS(2,j-1));const ie=A[Y].x-w,ce=A[Y].y-I;s.writeVarint(eR(ie)),s.writeVarint(eR(ce)),w+=ie,I+=ce}d.type===3&&s.writeVarint(QS(7,1))}}function hY(d,s){const c=typeof d;c==="string"?s.writeStringField(1,d):c==="boolean"?s.writeBooleanField(7,d):c==="number"&&(d%1!=0?s.writeDoubleField(3,d):d<0?s.writeSVarintField(6,d):s.writeVarintField(5,d))}class tR{constructor(s,c){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new pr(xe,16,0),this.grid3D=new pr(xe,16,0),this.featureIndexArray=new Ze,this.promoteId=c}insert(s,c,y,w,I,A){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,w,I);const j=A?this.grid3D:this.grid;for(let Y=0;Y<c.length;Y++){const ie=c[Y],ce=[1/0,1/0,-1/0,-1/0];for(let be=0;be<ie.length;be++){const Ce=ie[be];ce[0]=Math.min(ce[0],Ce.x),ce[1]=Math.min(ce[1],Ce.y),ce[2]=Math.max(ce[2],Ce.x),ce[3]=Math.max(ce[3],Ce.y)}ce[0]<xe&&ce[1]<xe&&ce[2]>=0&&ce[3]>=0&&j.insert(O,ce[0],ce[1],ce[2],ce[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new jM(new Tb(this.rawTileData)).layers:new QL(this.rawTileData).layers,this.sourceLayerCoder=new SL(this.vtLayers?Object.keys(this.vtLayers).sort():[Ov])),this.vtLayers}query(s,c,y,w){this.loadVTLayers();const I=s.params,A=xe/s.tileSize/s.scale,O=cd(I.filter,I.globalState),j=s.queryGeometry,Y=s.queryPadding*A,ie=zp.fromPoints(j),ce=this.grid.query(ie.minX-Y,ie.minY-Y,ie.maxX+Y,ie.maxY+Y),be=zp.fromPoints(s.cameraQueryGeometry).expandBy(Y),Ce=this.grid3D.query(be.minX,be.minY,be.maxX,be.maxY,((Ve,et,Et,rt)=>(function(ut,At,Ot,lr,Ir){for(const Or of ut)if(At<=Or.x&&Ot<=Or.y&&lr>=Or.x&&Ir>=Or.y)return!0;const wr=[new f(At,Ot),new f(At,Ir),new f(lr,Ir),new f(lr,Ot)];if(ut.length>2){for(const Or of wr)if(ig(ut,Or))return!0}for(let Or=0;Or<ut.length-1;Or++)if(mW(ut[Or],ut[Or+1],wr))return!0;return!1})(s.cameraQueryGeometry,Ve-Y,et-Y,Et+Y,rt+Y)));for(const Ve of Ce)ce.push(Ve);ce.sort(pY);const Oe={};let ze;for(let Ve=0;Ve<ce.length;Ve++){const et=ce[Ve];if(et===ze)continue;ze=et;const Et=this.featureIndexArray.get(et);let rt=null;this.loadMatchingFeature(Oe,Et.bucketIndex,Et.sourceLayerIndex,Et.featureIndex,O,I.layers,I.availableImages,c,y,w,((ut,At,Ot)=>(rt||(rt=Qd(ut)),At.queryIntersectsFeature({queryGeometry:j,feature:ut,featureState:Ot,geometry:rt,zoom:this.z,transform:s.transform,pixelsToTileUnits:A,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation}))))}return Oe}loadMatchingFeature(s,c,y,w,I,A,O,j,Y,ie,ce){const be=this.bucketLayerIDs[c];if(A&&!be.some((Ve=>A.has(Ve))))return;const Ce=this.sourceLayerCoder.decode(y),Oe=this.vtLayers[Ce].feature(w);if(I.needGeometry){const Ve=ef(Oe,!0);if(!I.filter(new bi(this.tileID.overscaledZ),Ve,this.tileID.canonical))return}else if(!I.filter(new bi(this.tileID.overscaledZ),Oe))return;const ze=this.getId(Oe,Ce);for(let Ve=0;Ve<be.length;Ve++){const et=be[Ve];if(A&&!A.has(et))continue;const Et=j[et];if(!Et)continue;let rt={};ze&&ie&&(rt=ie.getState(Et.sourceLayer||Ov,ze));const ut=Be({},Y[et]);ut.paint=rR(ut.paint,Et.paint,Oe,rt,O),ut.layout=rR(ut.layout,Et.layout,Oe,rt,O);const At=!ce||ce(Oe,Et,rt);if(!At)continue;const Ot=new CL(Oe,this.z,this.x,this.y,ze);Ot.layer=ut;let lr=s[et];lr===void 0&&(lr=s[et]=[]),lr.push({featureIndex:w,feature:Ot,intersectionZ:At})}}lookupSymbolFeatures(s,c,y,w,I,A,O,j){const Y={};this.loadVTLayers();const ie=cd(I.filterSpec,I.globalState);for(const ce of s)this.loadMatchingFeature(Y,y,w,ce,ie,A,O,j,c);return Y}hasLayer(s){for(const c of this.bucketLayerIDs)for(const y of c)if(s===y)return!0;return!1}getId(s,c){var y;let w=s.id;return this.promoteId&&(w=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((y=s.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(w=Number(s.properties.cluster_id))),w}}function rR(d,s,c,y,w){return Ke(d,((I,A)=>{const O=s instanceof Po?s.get(A):null;return O&&O.evaluate?O.evaluate(c,y,w):O}))}function pY(d,s){return s-d}function nR(d,s,c,y,w){const I=[];for(let A=0;A<d.length;A++){const O=d[A];let j;for(let Y=0;Y<O.length-1;Y++){let ie=O[Y],ce=O[Y+1];ie.x<s&&ce.x<s||(ie.x<s?ie=new f(s,ie.y+(s-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round():ce.x<s&&(ce=new f(s,ie.y+(s-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round()),ie.y<c&&ce.y<c||(ie.y<c?ie=new f(ie.x+(c-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),c)._round():ce.y<c&&(ce=new f(ie.x+(c-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),c)._round()),ie.x>=y&&ce.x>=y||(ie.x>=y?ie=new f(y,ie.y+(y-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round():ce.x>=y&&(ce=new f(y,ie.y+(y-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round()),ie.y>=w&&ce.y>=w||(ie.y>=w?ie=new f(ie.x+(w-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),w)._round():ce.y>=w&&(ce=new f(ie.x+(w-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),w)._round()),j&&ie.equals(j[j.length-1])||(j=[ie],I.push(j)),j.push(ce)))))}}return I}function iR(d,s,c,y,w){switch(s){case 1:return(function(I,A,O,j){const Y=[];for(const ie of I)for(const ce of ie){const be=j===0?ce.x:ce.y;be>=A&&be<=O&&Y.push([ce])}return Y})(d,c,y,w);case 2:return aR(d,c,y,w,!1);case 3:return aR(d,c,y,w,!0)}return[]}function mY(d,s,c,y,w){const I=y===0?gY:yY;let A=[];const O=[];for(let ie=0;ie<d.length-1;ie++){const ce=d[ie],be=d[ie+1],Ce=y===0?ce.x:ce.y,Oe=y===0?be.x:be.y;let ze=!1;Ce<s?Oe>s&&A.push(I(ce,be,s)):Ce>c?Oe<c&&A.push(I(ce,be,c)):A.push(ce),Oe<s&&Ce>=s&&(A.push(I(ce,be,s)),ze=!0),Oe>c&&Ce<=c&&(A.push(I(ce,be,c)),ze=!0),!w&&ze&&(O.push(A),A=[])}const j=d.length-1,Y=y===0?d[j].x:d[j].y;return Y>=s&&Y<=c&&A.push(d[j]),w&&A.length>0&&!A[0].equals(A[A.length-1])&&A.push(new f(A[0].x,A[0].y)),A.length>0&&O.push(A),O}function aR(d,s,c,y,w){const I=[];for(const A of d){const O=mY(A,s,c,y,w);O.length>0&&I.push(...O)}return I}function gY(d,s,c){return new f(c,d.y+(c-d.x)/(s.x-d.x)*(s.y-d.y))}function yY(d,s,c){return new f(d.x+(c-d.y)/(s.y-d.y)*(s.x-d.x),c)}Pt("FeatureIndex",tR,{omit:["rawTileData","sourceLayerCoder"]});class qh extends f{constructor(s,c,y,w){super(s,c),this.angle=y,w!==void 0&&(this.segment=w)}clone(){return new qh(this.x,this.y,this.angle,this.segment)}}function oR(d,s,c,y,w){if(s.segment===void 0||c===0)return!0;let I=s,A=s.segment+1,O=0;for(;O>-c/2;){if(A--,A<0)return!1;O-=d[A].dist(I),I=d[A]}O+=d[A].dist(d[A+1]),A++;const j=[];let Y=0;for(;O<c/2;){const ie=d[A],ce=d[A+1];if(!ce)return!1;let be=d[A-1].angleTo(ie)-ie.angleTo(ce);for(be=Math.abs((be+3*Math.PI)%(2*Math.PI)-Math.PI),j.push({distance:O,angleDelta:be}),Y+=be;O-j[0].distance>y;)Y-=j.shift().angleDelta;if(Y>w)return!1;A++,O+=ie.dist(ce)}return!0}function sR(d){let s=0;for(let c=0;c<d.length-1;c++)s+=d[c].dist(d[c+1]);return s}function lR(d,s,c){return d?.6*s*c:0}function uR(d,s){return Math.max(d?d.right-d.left:0,s?s.right-s.left:0)}function vY(d,s,c,y,w,I){const A=lR(c,w,I),O=uR(c,y)*I;let j=0;const Y=sR(d)/2;for(let ie=0;ie<d.length-1;ie++){const ce=d[ie],be=d[ie+1],Ce=ce.dist(be);if(j+Ce>Y){const Oe=(Y-j)/Ce,ze=On.number(ce.x,be.x,Oe),Ve=On.number(ce.y,be.y,Oe),et=new qh(ze,Ve,be.angleTo(ce),ie);return et._round(),!A||oR(d,et,O,A,s)?et:void 0}j+=Ce}}function bY(d,s,c,y,w,I,A,O,j){const Y=lR(y,I,A),ie=uR(y,w),ce=ie*A,be=d[0].x===0||d[0].x===j||d[0].y===0||d[0].y===j;return s-ce<s/4&&(s=ce+s/4),cR(d,be?s/2*O%s:(ie/2+2*I)*A*O%s,s,Y,c,ce,be,!1,j)}function cR(d,s,c,y,w,I,A,O,j){const Y=I/2,ie=sR(d);let ce=0,be=s-c,Ce=[];for(let Oe=0;Oe<d.length-1;Oe++){const ze=d[Oe],Ve=d[Oe+1],et=ze.dist(Ve),Et=Ve.angleTo(ze);for(;be+c<ce+et;){be+=c;const rt=(be-ce)/et,ut=On.number(ze.x,Ve.x,rt),At=On.number(ze.y,Ve.y,rt);if(ut>=0&&ut<j&&At>=0&&At<j&&be-Y>=0&&be+Y<=ie){const Ot=new qh(ut,At,Et,Oe);Ot._round(),y&&!oR(d,Ot,I,y,w)||Ce.push(Ot)}}ce+=et}return O||Ce.length||A||(Ce=cR(d,ce/2,c,y,w,I,A,!0,j)),Ce}function dR(d,s,c,y){const w=[],I=d.image,A=I.pixelRatio,O=I.paddedRect.w-2,j=I.paddedRect.h-2;let Y={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const ie=I.stretchX||[[0,O]],ce=I.stretchY||[[0,j]],be=(vr,vn)=>vr+vn[1]-vn[0],Ce=ie.reduce(be,0),Oe=ce.reduce(be,0),ze=O-Ce,Ve=j-Oe;let et=0,Et=Ce,rt=0,ut=Oe,At=0,Ot=ze,lr=0,Ir=Ve;if(I.content&&y){const vr=I.content,vn=vr[2]-vr[0],hn=vr[3]-vr[1];(I.textFitWidth||I.textFitHeight)&&(Y=oL(d)),et=Bb(ie,0,vr[0]),rt=Bb(ce,0,vr[1]),Et=Bb(ie,vr[0],vr[2]),ut=Bb(ce,vr[1],vr[3]),At=vr[0]-et,lr=vr[1]-rt,Ot=vn-Et,Ir=hn-ut}const wr=Y.x1,Or=Y.y1,an=Y.x2-wr,jr=Y.y2-Or,Er=(vr,vn,hn,xn)=>{const un=zb(vr.stretch-et,Et,an,wr),Nn=jb(vr.fixed-At,Ot,vr.stretch,Ce),Zi=zb(vn.stretch-rt,ut,jr,Or),Oi=jb(vn.fixed-lr,Ir,vn.stretch,Oe),fo=zb(hn.stretch-et,Et,an,wr),Cl=jb(hn.fixed-At,Ot,hn.stretch,Ce),fs=zb(xn.stretch-rt,ut,jr,Or),ho=jb(xn.fixed-lr,Ir,xn.stretch,Oe),to=new f(un,Zi),fa=new f(fo,Zi),ko=new f(fo,fs),qo=new f(un,fs),Xa=new f(Nn/A,Oi/A),Mu=new f(Cl/A,ho/A),El=s*Math.PI/180;if(El){const Ks=Math.sin(El),_o=Math.cos(El),hs=[_o,-Ks,Ks,_o];to._matMult(hs),fa._matMult(hs),qo._matMult(hs),ko._matMult(hs)}const Lu=vr.stretch+vr.fixed,zc=vn.stretch+vn.fixed;return{tl:to,tr:fa,bl:qo,br:ko,tex:{x:I.paddedRect.x+1+Lu,y:I.paddedRect.y+1+zc,w:hn.stretch+hn.fixed-Lu,h:xn.stretch+xn.fixed-zc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xa,pixelOffsetBR:Mu,minFontScaleX:Ot/A/an,minFontScaleY:Ir/A/jr,isSDF:c}};if(y&&(I.stretchX||I.stretchY)){const vr=fR(ie,ze,Ce),vn=fR(ce,Ve,Oe);for(let hn=0;hn<vr.length-1;hn++){const xn=vr[hn],un=vr[hn+1];for(let Nn=0;Nn<vn.length-1;Nn++)w.push(Er(xn,vn[Nn],un,vn[Nn+1]))}}else w.push(Er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:j+1}));return w}function Bb(d,s,c){let y=0;for(const w of d)y+=Math.max(s,Math.min(c,w[1]))-Math.max(s,Math.min(c,w[0]));return y}function fR(d,s,c){const y=[{fixed:-1,stretch:0}];for(const[w,I]of d){const A=y[y.length-1];y.push({fixed:w-A.stretch,stretch:A.stretch}),y.push({fixed:w-A.stretch,stretch:A.stretch+(I-w)})}return y.push({fixed:s+1,stretch:c}),y}function zb(d,s,c,y){return d/s*c+y}function jb(d,s,c,y){return d-s*c/y}Pt("Anchor",qh);class qb{constructor(s,c,y,w,I,A,O,j,Y,ie){var ce;if(this.boxStartIndex=s.length,Y){let be=A.top,Ce=A.bottom;const Oe=A.collisionPadding;Oe&&(be-=Oe[1],Ce+=Oe[3]);let ze=Ce-be;ze>0&&(ze=Math.max(10,ze),this.circleDiameter=ze)}else{const be=!((ce=A.image)===null||ce===void 0)&&ce.content&&(A.image.textFitWidth||A.image.textFitHeight)?oL(A):{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};be.y1=be.y1*O-j[0],be.y2=be.y2*O+j[2],be.x1=be.x1*O-j[3],be.x2=be.x2*O+j[1];const Ce=A.collisionPadding;if(Ce&&(be.x1-=Ce[0]*O,be.y1-=Ce[1]*O,be.x2+=Ce[2]*O,be.y2+=Ce[3]*O),ie){const Oe=new f(be.x1,be.y1),ze=new f(be.x2,be.y1),Ve=new f(be.x1,be.y2),et=new f(be.x2,be.y2),Et=ie*Math.PI/180;Oe._rotate(Et),ze._rotate(Et),Ve._rotate(Et),et._rotate(Et),be.x1=Math.min(Oe.x,ze.x,Ve.x,et.x),be.x2=Math.max(Oe.x,ze.x,Ve.x,et.x),be.y1=Math.min(Oe.y,ze.y,Ve.y,et.y),be.y2=Math.max(Oe.y,ze.y,Ve.y,et.y)}s.emplaceBack(c.x,c.y,be.x1,be.y1,be.x2,be.y2,y,w,I)}this.boxEndIndex=s.length}}class _Y{constructor(s=[],c=(y,w)=>y<w?-1:y>w?1:0){if(this.data=s,this.length=this.data.length,this.compare=c,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:c,compare:y}=this,w=c[s];for(;s>0;){const I=s-1>>1,A=c[I];if(y(w,A)>=0)break;c[s]=A,s=I}c[s]=w}_down(s){const{data:c,compare:y}=this,w=this.length>>1,I=c[s];for(;s<w;){let A=1+(s<<1);const O=A+1;if(O<this.length&&y(c[O],c[A])<0&&(A=O),y(c[A],I)>=0)break;c[s]=c[A],s=A}c[s]=I}}function xY(d,s=1,c=!1){const y=zp.fromPoints(d[0]),w=Math.min(y.width(),y.height());let I=w/2;const A=new _Y([],wY),{minX:O,minY:j,maxX:Y,maxY:ie}=y;if(w===0)return new f(O,j);for(let Ce=O;Ce<Y;Ce+=w)for(let Oe=j;Oe<ie;Oe+=w)A.push(new yg(Ce+I,Oe+I,I,d));let ce=(function(Ce){let Oe=0,ze=0,Ve=0;const et=Ce[0];for(let Et=0,rt=et.length,ut=rt-1;Et<rt;ut=Et++){const At=et[Et],Ot=et[ut],lr=At.x*Ot.y-Ot.x*At.y;ze+=(At.x+Ot.x)*lr,Ve+=(At.y+Ot.y)*lr,Oe+=3*lr}return new yg(ze/Oe,Ve/Oe,0,Ce)})(d),be=A.length;for(;A.length;){const Ce=A.pop();(Ce.d>ce.d||!ce.d)&&(ce=Ce,c&&console.log("found best %d after %d probes",Math.round(1e4*Ce.d)/1e4,be)),Ce.max-ce.d<=s||(I=Ce.h/2,A.push(new yg(Ce.p.x-I,Ce.p.y-I,I,d)),A.push(new yg(Ce.p.x+I,Ce.p.y-I,I,d)),A.push(new yg(Ce.p.x-I,Ce.p.y+I,I,d)),A.push(new yg(Ce.p.x+I,Ce.p.y+I,I,d)),be+=4)}return c&&(console.log(`num probes: ${be}`),console.log(`best distance: ${ce.d}`)),ce.p}function wY(d,s){return s.max-d.max}function yg(d,s,c,y){this.p=new f(d,s),this.h=c,this.d=(function(w,I){let A=!1,O=1/0;for(let j=0;j<I.length;j++){const Y=I[j];for(let ie=0,ce=Y.length,be=ce-1;ie<ce;be=ie++){const Ce=Y[ie],Oe=Y[be];Ce.y>w.y!=Oe.y>w.y&&w.x<(Oe.x-Ce.x)*(w.y-Ce.y)/(Oe.y-Ce.y)+Ce.x&&(A=!A),O=Math.min(O,yM(w,Ce,Oe))}}return(A?1:-1)*Math.sqrt(O)})(this.p,y),this.max=this.d+this.h*Math.SQRT2}var Sl;u.aP=void 0,(Sl=u.aP||(u.aP={}))[Sl.center=1]="center",Sl[Sl.left=2]="left",Sl[Sl.right=3]="right",Sl[Sl.top=4]="top",Sl[Sl.bottom=5]="bottom",Sl[Sl["top-left"]=6]="top-left",Sl[Sl["top-right"]=7]="top-right",Sl[Sl["bottom-left"]=8]="bottom-left",Sl[Sl["bottom-right"]=9]="bottom-right";const e5=Number.POSITIVE_INFINITY;function hR(d,s){return s[1]!==e5?(function(c,y,w){let I=0,A=0;switch(y=Math.abs(y),w=Math.abs(w),c){case"top-right":case"top-left":case"top":A=w-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-w}switch(c){case"top-right":case"bottom-right":case"right":I=-y;break;case"top-left":case"bottom-left":case"left":I=y}return[I,A]})(d,s[0],s[1]):(function(c,y){let w=0,I=0;y<0&&(y=0);const A=y/Math.SQRT2;switch(c){case"top-right":case"top-left":I=A-7;break;case"bottom-right":case"bottom-left":I=7-A;break;case"bottom":I=7-y;break;case"top":I=y-7}switch(c){case"top-right":case"bottom-right":w=-A;break;case"top-left":case"bottom-left":w=A;break;case"left":w=y;break;case"right":w=-y}return[w,I]})(d,s[0])}function pR(d,s,c){var y;const w=d.layout,I=(y=w.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(s,{},c);if(I){const O=I.values,j=[];for(let Y=0;Y<O.length;Y+=2){const ie=j[Y]=O[Y],ce=O[Y+1].map((be=>be*Xs));ie.startsWith("top")?ce[1]-=7:ie.startsWith("bottom")&&(ce[1]+=7),j[Y+1]=ce}return new sa(j)}const A=w.get("text-variable-anchor");if(A){let O;O=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(s,{},c)*Xs,e5]:w.get("text-offset").evaluate(s,{},c).map((Y=>Y*Xs));const j=[];for(const Y of A)j.push(Y,hR(Y,O));return new sa(j)}return null}function t5(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function SY(d,s,c,y,w,I,A,O,j,Y,ie,ce){let be=I.textMaxSize.evaluate(s,{});be===void 0&&(be=A);const Ce=d.layers[0].layout,Oe=Ce.get("icon-offset").evaluate(s,{},ie),ze=gR(c.horizontal),Ve=A/24,et=d.tilePixelRatio*Ve,Et=d.tilePixelRatio*be/24,rt=d.tilePixelRatio*O,ut=d.tilePixelRatio*Ce.get("symbol-spacing"),At=Ce.get("text-padding")*d.tilePixelRatio,Ot=(function(hn,xn,un,Nn=1){const Zi=hn.get("icon-padding").evaluate(xn,{},un),Oi=Zi&&Zi.values;return[Oi[0]*Nn,Oi[1]*Nn,Oi[2]*Nn,Oi[3]*Nn]})(Ce,s,ie,d.tilePixelRatio),lr=Ce.get("text-max-angle")/180*Math.PI,Ir=Ce.get("text-rotation-alignment")!=="viewport"&&Ce.get("symbol-placement")!=="point",wr=Ce.get("icon-rotation-alignment")==="map"&&Ce.get("symbol-placement")!=="point",Or=Ce.get("symbol-placement"),an=ut/2,jr=Ce.get("icon-text-fit");let Er;y&&jr!=="none"&&(d.allowVerticalPlacement&&c.vertical&&(Er=sL(y,c.vertical,jr,Ce.get("icon-text-fit-padding"),Oe,Ve)),ze&&(y=sL(y,ze,jr,Ce.get("icon-text-fit-padding"),Oe,Ve)));const vr=ie?ce.line.getGranularityForZoomLevel(ie.z):1,vn=(hn,xn)=>{xn.x<0||xn.x>=xe||xn.y<0||xn.y>=xe||(function(un,Nn,Zi,Oi,fo,Cl,fs,ho,to,fa,ko,qo,Xa,Mu,El,Lu,zc,Ks,_o,hs,Mo,Js,$f,yd,Bv){const Vh=un.addToLineVertexArray(Nn,Zi);let Vp,vg,bg,_g,_R=0,xR=0,wR=0,SR=0,u5=-1,c5=-1;const Gf={};let CR=jo("");if(un.allowVerticalPlacement&&Oi.vertical){const Vl=ho.layout.get("text-rotate").evaluate(Mo,{},yd)+90;bg=new qb(to,Nn,fa,ko,qo,Oi.vertical,Xa,Mu,El,Vl),fs&&(_g=new qb(to,Nn,fa,ko,qo,fs,zc,Ks,El,Vl))}if(fo){const Vl=ho.layout.get("icon-rotate").evaluate(Mo,{}),pc=ho.layout.get("icon-text-fit")!=="none",$p=dR(fo,Vl,$f,pc),bd=fs?dR(fs,Vl,$f,pc):void 0;vg=new qb(to,Nn,fa,ko,qo,fo,zc,Ks,!1,Vl),_R=4*$p.length;const Gp=un.iconSizeData;let tf=null;Gp.kind==="source"?(tf=[qf*ho.layout.get("icon-size").evaluate(Mo,{})],tf[0]>Bh&&st(`${un.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Gp.kind==="composite"&&(tf=[qf*Js.compositeIconSizes[0].evaluate(Mo,{},yd),qf*Js.compositeIconSizes[1].evaluate(Mo,{},yd)],(tf[0]>Bh||tf[1]>Bh)&&st(`${un.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),un.addSymbols(un.icon,$p,tf,hs,_o,Mo,u.az.none,Nn,Vh.lineStartIndex,Vh.lineLength,-1,yd),u5=un.icon.placedSymbolArray.length-1,bd&&(xR=4*bd.length,un.addSymbols(un.icon,bd,tf,hs,_o,Mo,u.az.vertical,Nn,Vh.lineStartIndex,Vh.lineLength,-1,yd),c5=un.icon.placedSymbolArray.length-1)}const ER=Object.keys(Oi.horizontal);for(const Vl of ER){const pc=Oi.horizontal[Vl];if(!Vp){CR=jo(pc.text);const bd=ho.layout.get("text-rotate").evaluate(Mo,{},yd);Vp=new qb(to,Nn,fa,ko,qo,pc,Xa,Mu,El,bd)}const $p=pc.positionedLines.length===1;if(wR+=mR(un,Nn,pc,Cl,ho,El,Mo,Lu,Vh,Oi.vertical?u.az.horizontal:u.az.horizontalOnly,$p?ER:[Vl],Gf,u5,Js,yd),$p)break}Oi.vertical&&(SR+=mR(un,Nn,Oi.vertical,Cl,ho,El,Mo,Lu,Vh,u.az.vertical,["vertical"],Gf,c5,Js,yd));const TY=Vp?Vp.boxStartIndex:un.collisionBoxArray.length,IY=Vp?Vp.boxEndIndex:un.collisionBoxArray.length,PY=bg?bg.boxStartIndex:un.collisionBoxArray.length,AY=bg?bg.boxEndIndex:un.collisionBoxArray.length,kY=vg?vg.boxStartIndex:un.collisionBoxArray.length,MY=vg?vg.boxEndIndex:un.collisionBoxArray.length,LY=_g?_g.boxStartIndex:un.collisionBoxArray.length,RY=_g?_g.boxEndIndex:un.collisionBoxArray.length;let vd=-1;const $b=(Vl,pc)=>Vl&&Vl.circleDiameter?Math.max(Vl.circleDiameter,pc):pc;vd=$b(Vp,vd),vd=$b(bg,vd),vd=$b(vg,vd),vd=$b(_g,vd);const TR=vd>-1?1:0;TR&&(vd*=Bv/Xs),un.glyphOffsetArray.length>=dg.MAX_GLYPHS&&st("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mo.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,Mo.sortKey);const DY=pR(ho,Mo,yd),[OY,NY]=(function(Vl,pc){const $p=Vl.length,bd=pc?.values;if(bd?.length>0)for(let Gp=0;Gp<bd.length;Gp+=2){const tf=bd[Gp+1];Vl.emplaceBack(u.aP[bd[Gp]],tf[0],tf[1])}return[$p,Vl.length]})(un.textAnchorOffsets,DY);un.symbolInstances.emplaceBack(Nn.x,Nn.y,Gf.right>=0?Gf.right:-1,Gf.center>=0?Gf.center:-1,Gf.left>=0?Gf.left:-1,Gf.vertical||-1,u5,c5,CR,TY,IY,PY,AY,kY,MY,LY,RY,fa,wR,SR,_R,xR,TR,0,Xa,vd,OY,NY)})(d,xn,hn,c,y,w,Er,d.layers[0],d.collisionBoxArray,s.index,s.sourceLayerIndex,d.index,et,[At,At,At,At],Ir,j,rt,Ot,wr,Oe,s,I,Y,ie,A)};if(Or==="line")for(const hn of nR(s.geometry,0,0,xe,xe)){const xn=Bp(hn,vr),un=bY(xn,ut,lr,c.vertical||ze,y,24,Et,d.overscaling,xe);for(const Nn of un)ze&&CY(d,ze.text,an,Nn)||vn(xn,Nn)}else if(Or==="line-center"){for(const hn of s.geometry)if(hn.length>1){const xn=Bp(hn,vr),un=vY(xn,lr,c.vertical||ze,y,24,Et);un&&vn(xn,un)}}else if(s.type==="Polygon")for(const hn of hl(s.geometry,0)){const xn=xY(hn,16);vn(Bp(hn[0],vr,!0),new qh(xn.x,xn.y,0))}else if(s.type==="LineString")for(const hn of s.geometry){const xn=Bp(hn,vr);vn(xn,new qh(xn[0].x,xn[0].y,0))}else if(s.type==="Point")for(const hn of s.geometry)for(const xn of hn)vn([xn],new qh(xn.x,xn.y,0))}function mR(d,s,c,y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe){const ze=(function(Et,rt,ut,At,Ot,lr,Ir,wr){const Or=At.layout.get("text-rotate").evaluate(lr,{})*Math.PI/180,an=[];for(const jr of rt.positionedLines)for(const Er of jr.positionedGlyphs){if(!Er.rect)continue;const vr=Er.rect||{};let vn=4,hn=!0,xn=1,un=0;const Nn=(Ot||wr)&&Er.vertical,Zi=Er.metrics.advance*Er.scale/2;if(wr&&rt.verticalizable&&(un=jr.lineOffset/2-(Er.imageName?-(Xs-Er.metrics.width*Er.scale)/2:(Er.scale-1)*Xs)),Er.imageName){const Ks=Ir[Er.imageName];hn=Ks.sdf,xn=Ks.pixelRatio,vn=1/xn}const Oi=Ot?[Er.x+Zi,Er.y]:[0,0];let fo=Ot?[0,0]:[Er.x+Zi+ut[0],Er.y+ut[1]-un],Cl=[0,0];Nn&&(Cl=fo,fo=[0,0]);const fs=Er.metrics.isDoubleResolution?2:1,ho=(Er.metrics.left-vn)*Er.scale-Zi+fo[0],to=(-Er.metrics.top-vn)*Er.scale+fo[1],fa=ho+vr.w/fs*Er.scale/xn,ko=to+vr.h/fs*Er.scale/xn,qo=new f(ho,to),Xa=new f(fa,to),Mu=new f(ho,ko),El=new f(fa,ko);if(Nn){const Ks=new f(-Zi,Zi- -17),_o=-Math.PI/2,hs=12-Zi,Mo=new f(22-hs,-(Er.imageName?hs:0)),Js=new f(...Cl);qo._rotateAround(_o,Ks)._add(Mo)._add(Js),Xa._rotateAround(_o,Ks)._add(Mo)._add(Js),Mu._rotateAround(_o,Ks)._add(Mo)._add(Js),El._rotateAround(_o,Ks)._add(Mo)._add(Js)}if(Or){const Ks=Math.sin(Or),_o=Math.cos(Or),hs=[_o,-Ks,Ks,_o];qo._matMult(hs),Xa._matMult(hs),Mu._matMult(hs),El._matMult(hs)}const Lu=new f(0,0),zc=new f(0,0);an.push({tl:qo,tr:Xa,bl:Mu,br:El,tex:vr,writingMode:rt.writingMode,glyphOffset:Oi,sectionIndex:Er.sectionIndex,isSDF:hn,pixelOffsetTL:Lu,pixelOffsetBR:zc,minFontScaleX:0,minFontScaleY:0})}return an})(0,c,O,w,I,A,y,d.allowVerticalPlacement),Ve=d.textSizeData;let et=null;Ve.kind==="source"?(et=[qf*w.layout.get("text-size").evaluate(A,{})],et[0]>Bh&&st(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ve.kind==="composite"&&(et=[qf*Ce.compositeTextSizes[0].evaluate(A,{},Oe),qf*Ce.compositeTextSizes[1].evaluate(A,{},Oe)],(et[0]>Bh||et[1]>Bh)&&st(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),d.addSymbols(d.text,ze,et,O,I,A,Y,s,j.lineStartIndex,j.lineLength,be,Oe);for(const Et of ie)ce[Et]=d.text.placedSymbolArray.length-1;return 4*ze.length}function gR(d){for(const s in d)return d[s];return null}function CY(d,s,c,y){const w=d.compareText;if(s in w){const I=w[s];for(let A=I.length-1;A>=0;A--)if(y.dist(I[A])<c)return!0}else w[s]=[];return w[s].push(y),!1}const yR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class r5{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,y]=new Uint8Array(s,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=y>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const I=yR[15&y];if(!I)throw new Error("Unrecognized array type.");const[A]=new Uint16Array(s,2,1),[O]=new Uint32Array(s,4,1);return new r5(O,A,I,s)}constructor(s,c=64,y=Float64Array,w){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=y,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const I=yR.indexOf(this.ArrayType),A=2*s*this.ArrayType.BYTES_PER_ELEMENT,O=s*this.IndexArrayType.BYTES_PER_ELEMENT,j=(8-O%8)%8;if(I<0)throw new Error(`Unexpected typed array class: ${y}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+O+j,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+A+O+j),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+O+j,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+I]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=s)}add(s,c){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=s,this.coords[this._pos++]=c,y}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return n5(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,c,y,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:I,coords:A,nodeSize:O}=this,j=[0,I.length-1,0],Y=[];for(;j.length;){const ie=j.pop()||0,ce=j.pop()||0,be=j.pop()||0;if(ce-be<=O){for(let Ve=be;Ve<=ce;Ve++){const et=A[2*Ve],Et=A[2*Ve+1];et>=s&&et<=y&&Et>=c&&Et<=w&&Y.push(I[Ve])}continue}const Ce=be+ce>>1,Oe=A[2*Ce],ze=A[2*Ce+1];Oe>=s&&Oe<=y&&ze>=c&&ze<=w&&Y.push(I[Ce]),(ie===0?s<=Oe:c<=ze)&&(j.push(be),j.push(Ce-1),j.push(1-ie)),(ie===0?y>=Oe:w>=ze)&&(j.push(Ce+1),j.push(ce),j.push(1-ie))}return Y}within(s,c,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:I,nodeSize:A}=this,O=[0,w.length-1,0],j=[],Y=y*y;for(;O.length;){const ie=O.pop()||0,ce=O.pop()||0,be=O.pop()||0;if(ce-be<=A){for(let Ve=be;Ve<=ce;Ve++)bR(I[2*Ve],I[2*Ve+1],s,c)<=Y&&j.push(w[Ve]);continue}const Ce=be+ce>>1,Oe=I[2*Ce],ze=I[2*Ce+1];bR(Oe,ze,s,c)<=Y&&j.push(w[Ce]),(ie===0?s-y<=Oe:c-y<=ze)&&(O.push(be),O.push(Ce-1),O.push(1-ie)),(ie===0?s+y>=Oe:c+y>=ze)&&(O.push(Ce+1),O.push(ce),O.push(1-ie))}return j}}function n5(d,s,c,y,w,I){if(w-y<=c)return;const A=y+w>>1;vR(d,s,A,y,w,I),n5(d,s,c,y,A-1,1-I),n5(d,s,c,A+1,w,1-I)}function vR(d,s,c,y,w,I){for(;w>y;){if(w-y>600){const Y=w-y+1,ie=c-y+1,ce=Math.log(Y),be=.5*Math.exp(2*ce/3),Ce=.5*Math.sqrt(ce*be*(Y-be)/Y)*(ie-Y/2<0?-1:1);vR(d,s,c,Math.max(y,Math.floor(c-ie*be/Y+Ce)),Math.min(w,Math.floor(c+(Y-ie)*be/Y+Ce)),I)}const A=s[2*c+I];let O=y,j=w;for(Nv(d,s,y,c),s[2*w+I]>A&&Nv(d,s,y,w);O<j;){for(Nv(d,s,O,j),O++,j--;s[2*O+I]<A;)O++;for(;s[2*j+I]>A;)j--}s[2*y+I]===A?Nv(d,s,y,j):(j++,Nv(d,s,j,w)),j<=c&&(y=j+1),c<=j&&(w=j-1)}}function Nv(d,s,c,y){i5(d,c,y),i5(s,2*c,2*y),i5(s,2*c+1,2*y+1)}function i5(d,s,c){const y=d[s];d[s]=d[c],d[c]=y}function bR(d,s,c,y){const w=d-c,I=s-y;return w*w+I*I}var a5;u.cH=void 0,(a5=u.cH||(u.cH={})).create="create",a5.load="load",a5.fullLoad="fullLoad";let Vb=null,Fv=[];const o5=1e3/60,s5="loadTime",l5="fullLoadTime",EY={mark(d){performance.mark(d)},frame(d){const s=d;Vb!=null&&Fv.push(s-Vb),Vb=s},clearMetrics(){Vb=null,Fv=[],performance.clearMeasures(s5),performance.clearMeasures(l5);for(const d in u.cH)performance.clearMarks(u.cH[d])},getPerformanceMetrics(){performance.measure(s5,u.cH.create,u.cH.load),performance.measure(l5,u.cH.create,u.cH.fullLoad);const d=performance.getEntriesByName(s5)[0].duration,s=performance.getEntriesByName(l5)[0].duration,c=Fv.length,y=1/(Fv.reduce(((I,A)=>I+A),0)/c/1e3),w=Fv.filter((I=>I>o5)).reduce(((I,A)=>I+(A-o5)/o5),0);return{loadTime:d,fullLoadTime:s,fps:y,percentDroppedFrames:w/(c+w)*100,totalFrames:c}}};u.$=M,u.A=B,u.B=Ht,u.C=Qe,u.D=yn,u.E=Lr,u.F=function([d,s,c]){return s+=90,s*=Math.PI/180,c*=Math.PI/180,{x:d*Math.cos(s)*Math.sin(c),y:d*Math.sin(s)*Math.sin(c),z:d*Math.cos(c)}},u.G=On,u.H=bi,u.I=PS,u.J=lt,u.K=function(d){if($t==null){const s=d.navigator?d.navigator.userAgent:null;$t=!!d.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return $t},u.L=class{constructor(d,s){this.target=d,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new jX((()=>this.process())),this.subscription=br(this.target,"message",(c=>this.receive(c)),!1),this.globalScope=Zt(self)?d:window}registerMessageHandler(d,s){this.messageHandlers[d]=s}unregisterMessageHandler(d){delete this.messageHandlers[d]}sendAsync(d,s){return new Promise(((c,y)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10),I=s?br(s.signal,"abort",(()=>{I?.unsubscribe(),delete this.resolveRejects[w];const j={id:w,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(j)}),qX):null;this.resolveRejects[w]={resolve:j=>{I?.unsubscribe(),c(j)},reject:j=>{I?.unsubscribe(),y(j)}};const A=[],O=Object.assign(Object.assign({},d),{id:w,sourceMapId:this.mapId,origin:location.origin,data:Mr(d.data,A)});this.target.postMessage(O,{transfer:A})}))}receive(d){const s=d.data,c=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[c];const y=this.abortControllers[c];return delete this.abortControllers[c],void(y&&y.abort())}if(Zt(self)||s.mustQueue)return this.tasks[c]=s,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,s)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),s=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(d,s)}processTask(d,s){return a(this,void 0,void 0,(function*(){if(s.type==="<response>"){const w=this.resolveRejects[d];return delete this.resolveRejects[d],w?void(s.error?w.reject(Rr(s.error)):w.resolve(Rr(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=Rr(s.data),y=new AbortController;this.abortControllers[d]=y;try{const w=yield this.messageHandlers[s.type](s.sourceMapId,c,y);this.completeTask(d,null,w)}catch(w){this.completeTask(d,w)}}))}completeTask(d,s,c){const y=[];delete this.abortControllers[d];const w={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Mr(s):null,data:Mr(c,y)};this.target.postMessage(w,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.M=St,u.N=function(){var d=new B(16);return B!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},u.O=function(d,s,c){var y,w,I,A,O,j,Y,ie,ce,be,Ce,Oe,ze=c[0],Ve=c[1],et=c[2];return s===d?(d[12]=s[0]*ze+s[4]*Ve+s[8]*et+s[12],d[13]=s[1]*ze+s[5]*Ve+s[9]*et+s[13],d[14]=s[2]*ze+s[6]*Ve+s[10]*et+s[14],d[15]=s[3]*ze+s[7]*Ve+s[11]*et+s[15]):(w=s[1],I=s[2],A=s[3],O=s[4],j=s[5],Y=s[6],ie=s[7],ce=s[8],be=s[9],Ce=s[10],Oe=s[11],d[0]=y=s[0],d[1]=w,d[2]=I,d[3]=A,d[4]=O,d[5]=j,d[6]=Y,d[7]=ie,d[8]=ce,d[9]=be,d[10]=Ce,d[11]=Oe,d[12]=y*ze+O*Ve+ce*et+s[12],d[13]=w*ze+j*Ve+be*et+s[13],d[14]=I*ze+Y*Ve+Ce*et+s[14],d[15]=A*ze+ie*Ve+Oe*et+s[15]),d},u.P=f,u.Q=function(d,s,c){var y=c[0],w=c[1],I=c[2];return d[0]=s[0]*y,d[1]=s[1]*y,d[2]=s[2]*y,d[3]=s[3]*y,d[4]=s[4]*w,d[5]=s[5]*w,d[6]=s[6]*w,d[7]=s[7]*w,d[8]=s[8]*I,d[9]=s[9]*I,d[10]=s[10]*I,d[11]=s[11]*I,d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15],d},u.R=ku,u.S=function(d,s,c){var y=s[0],w=s[1],I=s[2],A=s[3],O=s[4],j=s[5],Y=s[6],ie=s[7],ce=s[8],be=s[9],Ce=s[10],Oe=s[11],ze=s[12],Ve=s[13],et=s[14],Et=s[15],rt=c[0],ut=c[1],At=c[2],Ot=c[3];return d[0]=rt*y+ut*O+At*ce+Ot*ze,d[1]=rt*w+ut*j+At*be+Ot*Ve,d[2]=rt*I+ut*Y+At*Ce+Ot*et,d[3]=rt*A+ut*ie+At*Oe+Ot*Et,d[4]=(rt=c[4])*y+(ut=c[5])*O+(At=c[6])*ce+(Ot=c[7])*ze,d[5]=rt*w+ut*j+At*be+Ot*Ve,d[6]=rt*I+ut*Y+At*Ce+Ot*et,d[7]=rt*A+ut*ie+At*Oe+Ot*Et,d[8]=(rt=c[8])*y+(ut=c[9])*O+(At=c[10])*ce+(Ot=c[11])*ze,d[9]=rt*w+ut*j+At*be+Ot*Ve,d[10]=rt*I+ut*Y+At*Ce+Ot*et,d[11]=rt*A+ut*ie+At*Oe+Ot*Et,d[12]=(rt=c[12])*y+(ut=c[13])*O+(At=c[14])*ce+(Ot=c[15])*ze,d[13]=rt*w+ut*j+At*be+Ot*Ve,d[14]=rt*I+ut*Y+At*Ce+Ot*et,d[15]=rt*A+ut*ie+At*Oe+Ot*Et,d},u.T=bS,u.U=function(d,s){const c={};for(let y=0;y<s.length;y++){const w=s[y];w in d&&(c[w]=d[w])}return c},u.V=zh,u.W=Xe,u.X=gL,u.Y=mL,u.Z=Ge,u._=a,u.a=je,u.a$=oe,u.a0=D,u.a1=sr,u.a2=fc,u.a3=vL,u.a4=kb,u.a5=xe,u.a6=function(d,s,c){if(!d)return s||{};if(!s)return d||{};const y=wL(d),w=wL(s);(function(A,O){O.removeAll&&(A.add.clear(),A.update.clear(),A.remove.clear(),O.remove.clear());for(const j of O.remove)A.add.delete(j),A.update.delete(j);for(const[j,Y]of O.update){const ie=A.update.get(j);ie&&(O.update.set(j,VX(ie,Y)),A.update.delete(j))}})(y,w);const I={};if((y.removeAll||w.removeAll)&&(I.removeAll=!0),I.remove=new Set([...y.remove,...w.remove]),I.add=new Map([...y.add,...w.add]),I.update=new Map([...y.update,...w.update]),I.remove.size&&I.add.size)for(const A of I.add.keys())I.remove.delete(A);return(function(A){const O={};return A.removeAll&&(O.removeAll=A.removeAll),A.remove&&(O.remove=Array.from(A.remove)),A.add&&(O.add=Array.from(A.add.values())),A.update&&(O.update=Array.from(A.update.values())),O})(I)},u.a7=function(d,s){const c=new Map;if(d==null||d.type==null)return c;if(d.type==="Feature"){const y=FS(d,s);return y==null?void 0:(c.set(y,d),c)}if(d.type==="FeatureCollection"){const y=new Set;for(const w of d.features){const I=FS(w,s);if(I==null||y.has(I))return;y.add(I),c.set(I,w)}return c}},u.a8=function(d,s,c){var y,w;const I=[];if(s.removeAll)d.clear();else if(s.remove)for(const A of s.remove){const O=d.get(A);O&&(I.push(O.geometry),d.delete(A))}if(s.add)for(const A of s.add){const O=FS(A,c);if(O==null)continue;const j=d.get(O);j&&I.push(j.geometry),I.push(A.geometry),d.set(O,A)}if(s.update)for(const A of s.update){const O=d.get(A.id);if(!O)continue;const j=!!A.newGeometry,Y=A.removeAllProperties||((y=A.removeProperties)===null||y===void 0?void 0:y.length)>0||((w=A.addOrUpdateProperties)===null||w===void 0?void 0:w.length)>0;if(!j&&!Y)continue;I.push(O.geometry);const ie=Object.assign({},O);if(d.set(A.id,ie),j&&(I.push(A.newGeometry),ie.geometry=A.newGeometry),Y){if(ie.properties=A.removeAllProperties?{}:Object.assign({},ie.properties||{}),A.removeProperties)for(const ce of A.removeProperties)delete ie.properties[ce];if(A.addOrUpdateProperties)for(const{key:ce,value:be}of A.addOrUpdateProperties)ie.properties[ce]=be}}return I},u.a9=Lv,u.aA=function(d,{uSize:s,uSizeT:c},{lowerSize:y,upperSize:w}){return d.kind==="source"?y/qf:d.kind==="composite"?On.number(y/qf,w/qf,c):s},u.aB=function(d,s){var c=s[0],y=s[1],w=s[2],I=s[3],A=s[4],O=s[5],j=s[6],Y=s[7],ie=s[8],ce=s[9],be=s[10],Ce=s[11],Oe=s[12],ze=s[13],Ve=s[14],et=s[15],Et=c*O-y*A,rt=c*j-w*A,ut=c*Y-I*A,At=y*j-w*O,Ot=y*Y-I*O,lr=w*Y-I*j,Ir=ie*ze-ce*Oe,wr=ie*Ve-be*Oe,Or=ie*et-Ce*Oe,an=ce*Ve-be*ze,jr=ce*et-Ce*ze,Er=be*et-Ce*Ve,vr=Et*Er-rt*jr+ut*an+At*Or-Ot*wr+lr*Ir;return vr?(d[0]=(O*Er-j*jr+Y*an)*(vr=1/vr),d[1]=(w*jr-y*Er-I*an)*vr,d[2]=(ze*lr-Ve*Ot+et*At)*vr,d[3]=(be*Ot-ce*lr-Ce*At)*vr,d[4]=(j*Or-A*Er-Y*wr)*vr,d[5]=(c*Er-w*Or+I*wr)*vr,d[6]=(Ve*ut-Oe*lr-et*rt)*vr,d[7]=(ie*lr-be*ut+Ce*rt)*vr,d[8]=(A*jr-O*Or+Y*Ir)*vr,d[9]=(y*Or-c*jr-I*Ir)*vr,d[10]=(Oe*Ot-ze*ut+et*Et)*vr,d[11]=(ce*ut-ie*Ot-Ce*Et)*vr,d[12]=(O*wr-A*an-j*Ir)*vr,d[13]=(c*an-y*wr+w*Ir)*vr,d[14]=(ze*rt-Oe*At-Ve*Et)*vr,d[15]=(ie*At-ce*rt+be*Et)*vr,d):null},u.aC=Le,u.aD=function(d){var s=d[0],c=d[1];return Math.sqrt(s*s+c*c)},u.aE=function(d){return d[0]=0,d[1]=0,d},u.aF=function(d,s,c){return d[0]=s[0]*c,d[1]=s[1]*c,d},u.aG=MS,u.aH=se,u.aI=function(d,s,c,y){const w=s.y-d.y,I=s.x-d.x,A=y.y-c.y,O=y.x-c.x,j=A*I-O*w;if(j===0)return null;const Y=(O*(d.y-c.y)-A*(d.x-c.x))/j;return new f(d.x+Y*I,d.y+Y*w)},u.aJ=nR,u.aK=ng,u.aL=function(d){let s=1/0,c=1/0,y=-1/0,w=-1/0;for(const I of d)s=Math.min(s,I.x),c=Math.min(c,I.y),y=Math.max(y,I.x),w=Math.max(w,I.y);return[s,c,y,w]},u.aM=Xs,u.aN=Se,u.aO=function(d,s,c,y,w=!1){if(!c[0]&&!c[1])return[0,0];const I=w?y==="map"?-d.bearingInRadians:0:y==="viewport"?d.bearingInRadians:0;if(I){const A=Math.sin(I),O=Math.cos(I);c=[c[0]*O-c[1]*A,c[0]*A+c[1]*O]}return[w?c[0]:Se(s,c[0],d.zoom),w?c[1]:Se(s,c[1],d.zoom)]},u.aQ=kS,u.aR=t5,u.aS=AS,u.aT=r5,u.aU=ra,u.aV=Cb,u.aW=ft,u.aX=on,u.aY=mr,u.aZ=Kt,u.a_=bL,u.aa=zp,u.ab=25,u.ac=NS,u.ad=d=>{const s=window.document.createElement("video");return s.muted=!0,new Promise((c=>{s.onloadstart=()=>{c(s)};for(const y of d){const w=window.document.createElement("source");Vt(y)||(s.crossOrigin="Anonymous"),w.src=y,s.appendChild(w)}}))},u.ae=zt,u.af=function(){return ot++},u.ag=C,u.ah=dg,u.ai=Ov,u.aj=cd,u.ak=ef,u.al=CL,u.am=function(d){const s={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((c,y,w,I)=>{const A=w||I;return s[y]=!A||A.toLowerCase(),""})),s["max-age"]){const c=parseInt(s["max-age"],10);isNaN(c)?delete s["max-age"]:s["max-age"]=c}return s},u.an=Fe,u.ao=85.051129,u.ap=yr,u.aq=function(d){return Math.pow(2,d)},u.ar=$,u.as=yL,u.at=function(d){return Math.log(d)/Math.LN2},u.au=function(d){var s=d[0],c=d[1];return s*s+c*c},u.av=function(d){if(!d.length)return new Set;const s=Math.max(...d.map((j=>j.canonical.z)));let c=1/0,y=-1/0,w=1/0,I=-1/0;const A=[];for(const j of d){const{x:Y,y:ie,z:ce}=j.canonical,be=Math.pow(2,s-ce),Ce=Y*be,Oe=ie*be;A.push({id:j,x:Ce,y:Oe}),Ce<c&&(c=Ce),Ce>y&&(y=Ce),Oe<w&&(w=Oe),Oe>I&&(I=Oe)}const O=new Set;for(const j of A)j.x!==c&&j.x!==y&&j.y!==w&&j.y!==I||O.add(j.id);return O},u.aw=function(d,s){const c=Math.abs(2*d.wrap)-+(d.wrap<0),y=Math.abs(2*s.wrap)-+(s.wrap<0);return d.overscaledZ-s.overscaledZ||y-c||s.canonical.y-d.canonical.y||s.canonical.x-d.canonical.x},u.ax=class{constructor(d,s){this.max=d,this.onRemove=s,this.reset()}reset(){for(const d in this.data)for(const s of this.data[d])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(d,s,c){const y=d.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const w={value:s,timeout:void 0};if(c!==void 0&&(w.timeout=setTimeout((()=>{this.remove(d,w)}),c)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const s=this.data[d].shift();return s.timeout&&clearTimeout(s.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),s.value}getByKey(d){const s=this.data[d];return s?s[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,s){if(!this.has(d))return this;const c=d.wrapped().key,y=s===void 0?0:this.data[c].indexOf(s),w=this.data[c][y];return this.data[c].splice(y,1),w.timeout&&clearTimeout(w.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(w.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(d){const s=[];for(const c in this.data)for(const y of this.data[c])d(y.value)||s.push(y);for(const c of s)this.remove(c.value.tileID,c)}},u.ay=function(d,s){let c=0,y=0;if(d.kind==="constant")y=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:w,minZoom:I,maxZoom:A}=d,O=w?Fe(Mn.interpolationFactor(w,s,I,A),0,1):0;d.kind==="camera"?y=On.number(d.minSize,d.maxSize,O):c=O}return{uSizeT:c,uSize:y}},u.b=Wt,u.b$=zf,u.b0=Z,u.b1=function(d){var s=new B(3);return s[0]=d[0],s[1]=d[1],s[2]=d[2],s},u.b2=function(d,s,c){return d[0]=s[0]-c[0],d[1]=s[1]-c[1],d[2]=s[2]-c[2],d},u.b3=function(d,s){var c=s[0],y=s[1],w=s[2],I=c*c+y*y+w*w;return I>0&&(I=1/Math.sqrt(I)),d[0]=s[0]*I,d[1]=s[1]*I,d[2]=s[2]*I,d},u.b4=re,u.b5=function(d,s){return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]},u.b6=function(d,s,c){return d[0]=s[0]*c[0],d[1]=s[1]*c[1],d[2]=s[2]*c[2],d[3]=s[3]*c[3],d},u.b7=U,u.b8=function(d,s,c){const y=s[0]*c[0]+s[1]*c[1]+s[2]*c[2];return y===0?null:(-(d[0]*c[0]+d[1]*c[1]+d[2]*c[2])-c[3])/y},u.b9=ae,u.bA=function(d,s,c,y){return d[0]=s[0]+c[0]*y,d[1]=s[1]+c[1]*y,d[2]=s[2]+c[2]*y,d},u.bB=fe,u.bC=function(d,s,c){var y=c[0],w=c[1],I=c[2],A=c[3],O=s[0],j=s[1],Y=s[2],ie=w*Y-I*j,ce=I*O-y*Y,be=y*j-w*O;return d[0]=O+A*(ie+=ie)+w*(be+=be)-I*(ce+=ce),d[1]=j+A*ce+I*ie-y*be,d[2]=Y+A*be+y*ce-w*ie,d},u.bD=function(d,s,c){const y=(function(j){var Y=j[3],ie=j[4],ce=j[5],be=j[6],Ce=j[7],Oe=j[8];return j[0]*(Oe*ie-ce*Ce)+j[1]*(-Oe*Y+ce*be)+j[2]*(Ce*Y-ie*be)})([d[0],d[1],d[2],s[0],s[1],s[2],c[0],c[1],c[2]]);if(y===0)return null;const w=re([],[s[0],s[1],s[2]],[c[0],c[1],c[2]]),I=re([],[c[0],c[1],c[2]],[d[0],d[1],d[2]]),A=re([],[d[0],d[1],d[2]],[s[0],s[1],s[2]]),O=oe([],w,-d[3]);return Z(O,O,oe([],I,-s[3])),Z(O,O,oe([],A,-c[3])),oe(O,O,1/y),O},u.bE=OS,u.bF=function(){return new Float64Array(4)},u.bG=function(d,s,c,y){var w=[],I=[];return w[0]=s[0]-c[0],w[1]=s[1]-c[1],w[2]=s[2]-c[2],I[0]=w[0]*Math.cos(y)-w[1]*Math.sin(y),I[1]=w[0]*Math.sin(y)+w[1]*Math.cos(y),I[2]=w[2],d[0]=I[0]+c[0],d[1]=I[1]+c[1],d[2]=I[2]+c[2],d},u.bH=function(d,s,c,y){var w=[],I=[];return w[0]=s[0]-c[0],w[1]=s[1]-c[1],w[2]=s[2]-c[2],I[0]=w[0],I[1]=w[1]*Math.cos(y)-w[2]*Math.sin(y),I[2]=w[1]*Math.sin(y)+w[2]*Math.cos(y),d[0]=I[0]+c[0],d[1]=I[1]+c[1],d[2]=I[2]+c[2],d},u.bI=function(d,s,c,y){var w=[],I=[];return w[0]=s[0]-c[0],w[1]=s[1]-c[1],w[2]=s[2]-c[2],I[0]=w[2]*Math.sin(y)+w[0]*Math.cos(y),I[1]=w[1],I[2]=w[2]*Math.cos(y)-w[0]*Math.sin(y),d[0]=I[0]+c[0],d[1]=I[1]+c[1],d[2]=I[2]+c[2],d},u.bJ=function(d,s,c){var y=Math.sin(c),w=Math.cos(c),I=s[0],A=s[1],O=s[2],j=s[3],Y=s[8],ie=s[9],ce=s[10],be=s[11];return s!==d&&(d[4]=s[4],d[5]=s[5],d[6]=s[6],d[7]=s[7],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[0]=I*w-Y*y,d[1]=A*w-ie*y,d[2]=O*w-ce*y,d[3]=j*w-be*y,d[8]=I*y+Y*w,d[9]=A*y+ie*w,d[10]=O*y+ce*w,d[11]=j*y+be*w,d},u.bK=function(d,s){const c=Re(d,360),y=Re(s,360),w=y-c,I=y>c?w-360:w+360;return Math.abs(w)<Math.abs(I)?w:I},u.bL=function(d){return d[0]=0,d[1]=0,d[2]=0,d},u.bM=function(d,s,c,y){const w=Math.sqrt(d*d+s*s),I=Math.sqrt(c*c+y*y);d/=w,s/=w,c/=I,y/=I;const A=Math.acos(d*c+s*y);return-s*c+d*y>0?A:-A},u.bN=function(d,s){const c=Re(d,2*Math.PI),y=Re(s,2*Math.PI);return Math.min(Math.abs(c-y),Math.abs(c-y+2*Math.PI),Math.abs(c-y-2*Math.PI))},u.bO=function(){const d={},s=kt.$version;for(const c in kt.$root){const y=kt.$root[c];if(y.required){let w=null;w=c==="version"?s:y.type==="array"?[]:{},w!=null&&(d[c]=w)}}return d},u.bP=ct,u.bQ=Jr,u.bR=function d(s,c){if(Array.isArray(s)){if(!Array.isArray(c)||s.length!==c.length)return!1;for(let y=0;y<s.length;y++)if(!d(s[y],c[y]))return!1;return!0}if(typeof s=="object"&&s!==null&&c!==null){if(typeof c!="object"||Object.keys(s).length!==Object.keys(c).length)return!1;for(const y in s)if(!d(s[y],c[y]))return!1;return!0}return s===c},u.bS=function(d){d=d.slice();const s=Object.create(null);for(let c=0;c<d.length;c++)s[d[c].id]=d[c];for(let c=0;c<d.length;c++)"ref"in d[c]&&(d[c]=kn(d[c],s[d[c].ref]));return d},u.bT=function(d,s){if(d.type==="custom")return new zX(d,s);switch(d.type){case"background":return new BX(d,s);case"circle":return new wW(d,s);case"color-relief":return new PW(d,s);case"fill":return new $W(d,s);case"fill-extrusion":return new tX(d,s);case"heatmap":return new CW(d,s);case"hillshade":return new TW(d,s);case"line":return new lX(d,s);case"raster":return new xl(d,s);case"symbol":return new Ab(d,s)}},u.bU=d=>d.type==="raster",u.bV=ke,u.bW=function(d,s){if(!d)return[{command:"setStyle",args:[s]}];let c=[];try{if(!Ur(d.version,s.version))return[{command:"setStyle",args:[s]}];Ur(d.center,s.center)||c.push({command:"setCenter",args:[s.center]}),Ur(d.state,s.state)||c.push({command:"setGlobalState",args:[s.state]}),Ur(d.centerAltitude,s.centerAltitude)||c.push({command:"setCenterAltitude",args:[s.centerAltitude]}),Ur(d.zoom,s.zoom)||c.push({command:"setZoom",args:[s.zoom]}),Ur(d.bearing,s.bearing)||c.push({command:"setBearing",args:[s.bearing]}),Ur(d.pitch,s.pitch)||c.push({command:"setPitch",args:[s.pitch]}),Ur(d.roll,s.roll)||c.push({command:"setRoll",args:[s.roll]}),Ur(d.sprite,s.sprite)||c.push({command:"setSprite",args:[s.sprite]}),Ur(d.glyphs,s.glyphs)||c.push({command:"setGlyphs",args:[s.glyphs]}),Ur(d.transition,s.transition)||c.push({command:"setTransition",args:[s.transition]}),Ur(d.light,s.light)||c.push({command:"setLight",args:[s.light]}),Ur(d.terrain,s.terrain)||c.push({command:"setTerrain",args:[s.terrain]}),Ur(d.sky,s.sky)||c.push({command:"setSky",args:[s.sky]}),Ur(d.projection,s.projection)||c.push({command:"setProjection",args:[s.projection]});const y={},w=[];(function(A,O,j,Y){let ie;for(ie in O=O||{},A=A||{})Object.prototype.hasOwnProperty.call(A,ie)&&(Object.prototype.hasOwnProperty.call(O,ie)||en(ie,j,Y));for(ie in O)Object.prototype.hasOwnProperty.call(O,ie)&&(Object.prototype.hasOwnProperty.call(A,ie)?Ur(A[ie],O[ie])||(A[ie].type==="geojson"&&O[ie].type==="geojson"&&Me(A,O,ie)?rr(j,{command:"setGeoJSONSourceData",args:[ie,O[ie].data]}):Vn(ie,O,j,Y)):Jn(ie,O,j))})(d.sources,s.sources,w,y);const I=[];d.layers&&d.layers.forEach((A=>{"source"in A&&y[A.source]?c.push({command:"removeLayer",args:[A.id]}):I.push(A)})),c=c.concat(w),(function(A,O,j){O=O||[];const Y=(A=A||[]).map(Ct),ie=O.map(Ct),ce=A.reduce(Gt,{}),be=O.reduce(Gt,{}),Ce=Y.slice(),Oe=Object.create(null);let ze,Ve,et,Et,rt;for(let ut=0,At=0;ut<Y.length;ut++)ze=Y[ut],Object.prototype.hasOwnProperty.call(be,ze)?At++:(rr(j,{command:"removeLayer",args:[ze]}),Ce.splice(Ce.indexOf(ze,At),1));for(let ut=0,At=0;ut<ie.length;ut++)ze=ie[ie.length-1-ut],Ce[Ce.length-1-ut]!==ze&&(Object.prototype.hasOwnProperty.call(ce,ze)?(rr(j,{command:"removeLayer",args:[ze]}),Ce.splice(Ce.lastIndexOf(ze,Ce.length-At),1)):At++,Et=Ce[Ce.length-ut],rr(j,{command:"addLayer",args:[be[ze],Et]}),Ce.splice(Ce.length-ut,0,ze),Oe[ze]=!0);for(let ut=0;ut<ie.length;ut++)if(ze=ie[ut],Ve=ce[ze],et=be[ze],!Oe[ze]&&!Ur(Ve,et))if(Ur(Ve.source,et.source)&&Ur(Ve["source-layer"],et["source-layer"])&&Ur(Ve.type,et.type)){for(rt in Ue(Ve.layout,et.layout,j,ze,null,"setLayoutProperty"),Ue(Ve.paint,et.paint,j,ze,null,"setPaintProperty"),Ur(Ve.filter,et.filter)||rr(j,{command:"setFilter",args:[ze,et.filter]}),Ur(Ve.minzoom,et.minzoom)&&Ur(Ve.maxzoom,et.maxzoom)||rr(j,{command:"setLayerZoomRange",args:[ze,et.minzoom,et.maxzoom]}),Ve)Object.prototype.hasOwnProperty.call(Ve,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?Ue(Ve[rt],et[rt],j,ze,rt.slice(6),"setPaintProperty"):Ur(Ve[rt],et[rt])||rr(j,{command:"setLayerProperty",args:[ze,rt,et[rt]]}));for(rt in et)Object.prototype.hasOwnProperty.call(et,rt)&&!Object.prototype.hasOwnProperty.call(Ve,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?Ue(Ve[rt],et[rt],j,ze,rt.slice(6),"setPaintProperty"):Ur(Ve[rt],et[rt])||rr(j,{command:"setLayerProperty",args:[ze,rt,et[rt]]}))}else rr(j,{command:"removeLayer",args:[ze]}),Et=Ce[Ce.lastIndexOf(ze)+1],rr(j,{command:"addLayer",args:[et,Et]})})(I,s.layers,c)}catch(y){console.warn("Unable to compute style diff:",y),c=[{command:"setStyle",args:[s]}]}return c},u.bX=function(d){const s=[],c=d.id;return c===void 0&&s.push({message:`layers.${c}: missing required property "id"`}),d.render===void 0&&s.push({message:`layers.${c}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&s.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),s},u.bY=Ke,u.bZ=it,u.b_=class extends cu{constructor(d,s){super(d,s),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},u.ba=function(d,s,c){return d[0]=s[0]*c,d[1]=s[1]*c,d[2]=s[2]*c,d[3]=s[3]*c,d},u.bb=function(d,s){return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]+d[3]},u.bc=xL,u.bd=fg,u.be=function(d,s,c,y,w){var I=1/Math.tan(s/2);if(d[0]=I/c,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=I,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,w!=null&&w!==1/0){var A=1/(y-w);d[10]=(w+y)*A,d[14]=2*w*y*A}else d[10]=-1,d[14]=-2*y;return d},u.bf=function(d){var s=new B(16);return s[0]=d[0],s[1]=d[1],s[2]=d[2],s[3]=d[3],s[4]=d[4],s[5]=d[5],s[6]=d[6],s[7]=d[7],s[8]=d[8],s[9]=d[9],s[10]=d[10],s[11]=d[11],s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15],s},u.bg=function(d,s,c){var y=Math.sin(c),w=Math.cos(c),I=s[0],A=s[1],O=s[2],j=s[3],Y=s[4],ie=s[5],ce=s[6],be=s[7];return s!==d&&(d[8]=s[8],d[9]=s[9],d[10]=s[10],d[11]=s[11],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[0]=I*w+Y*y,d[1]=A*w+ie*y,d[2]=O*w+ce*y,d[3]=j*w+be*y,d[4]=Y*w-I*y,d[5]=ie*w-A*y,d[6]=ce*w-O*y,d[7]=be*w-j*y,d},u.bh=function(d,s,c){var y=Math.sin(c),w=Math.cos(c),I=s[4],A=s[5],O=s[6],j=s[7],Y=s[8],ie=s[9],ce=s[10],be=s[11];return s!==d&&(d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[3],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[4]=I*w+Y*y,d[5]=A*w+ie*y,d[6]=O*w+ce*y,d[7]=j*w+be*y,d[8]=Y*w-I*y,d[9]=ie*w-A*y,d[10]=ce*w-O*y,d[11]=be*w-j*y,d},u.bi=function(){const d=new Float32Array(16);return $(d),d},u.bj=function(){const d=new Float64Array(16);return $(d),d},u.bk=function(){return new Float64Array(16)},u.bl=function(d,s,c){const y=new Float64Array(4);return fe(y,d,s-90,c),y},u.bm=function(d,s,c,y){var w,I,A,O,j,Y=s[0],ie=s[1],ce=s[2],be=s[3],Ce=c[0],Oe=c[1],ze=c[2],Ve=c[3];return(I=Y*Ce+ie*Oe+ce*ze+be*Ve)<0&&(I=-I,Ce=-Ce,Oe=-Oe,ze=-ze,Ve=-Ve),1-I>F?(w=Math.acos(I),A=Math.sin(w),O=Math.sin((1-y)*w)/A,j=Math.sin(y*w)/A):(O=1-y,j=y),d[0]=O*Y+j*Ce,d[1]=O*ie+j*Oe,d[2]=O*ce+j*ze,d[3]=O*be+j*Ve,d},u.bn=function(d){const s=new Float64Array(9);(function(I,A){var O=A[0],j=A[1],Y=A[2],ie=A[3],ce=O+O,be=j+j,Ce=Y+Y,Oe=O*ce,ze=j*ce,Ve=j*be,et=Y*ce,Et=Y*be,rt=Y*Ce,ut=ie*ce,At=ie*be,Ot=ie*Ce;I[0]=1-Ve-rt,I[3]=ze-Ot,I[6]=et+At,I[1]=ze+Ot,I[4]=1-Oe-rt,I[7]=Et-ut,I[2]=et-At,I[5]=Et+ut,I[8]=1-Oe-Ve})(s,d);const c=Kt(-Math.asin(Fe(s[2],-1,1)));let y,w;return Math.hypot(s[5],s[8])<.001?(y=0,w=-Kt(Math.atan2(s[3],s[4]))):(y=Kt(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),w=Kt(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:y,pitch:c+90,bearing:w}},u.bo=function(d,s){return d.roll==s.roll&&d.pitch==s.pitch&&d.bearing==s.bearing},u.bp=Cr,u.bq=Bf,u.br=lg,u.bs=Tv,u.bt=sg,u.bu=he,u.bv=Ee,u.bw=ai,u.bx=function(d,s,c,y,w){return he(y,w,Fe((d-s)/(c-s),0,1))},u.by=Re,u.bz=function(){return new Float64Array(3)},u.c=He,u.c$=function(d,s,c,y,w){return a(this,void 0,void 0,(function*(){if(D())try{return yield sr(d,s,c,y,w)}catch{}return(function(I,A,O,j,Y){const ie=I.width,ce=I.height;cr&&ir||(cr=new OffscreenCanvas(ie,ce),ir=cr.getContext("2d",{willReadFrequently:!0})),cr.width=ie,cr.height=ce,ir.drawImage(I,0,0,ie,ce);const be=ir.getImageData(A,O,j,Y);return ir.clearRect(0,0,ie,ce),be.data})(d,s,c,y,w)}))},u.c0=class extends cu{constructor(d,s){super(d,s),this.current=$u}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let s=1;s<16;s++)if(d[s]!==this.current[s]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},u.c1=Np,u.c2=class extends cu{constructor(d,s){super(d,s),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},u.c3=class extends cu{constructor(d,s){super(d,s),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},u.c4=N,u.c5=function(d,s){var c=Math.sin(s),y=Math.cos(s);return d[0]=y,d[1]=c,d[2]=0,d[3]=-c,d[4]=y,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},u.c6=function(d,s,c){var y=s[0],w=s[1],I=s[2];return d[0]=y*c[0]+w*c[3]+I*c[6],d[1]=y*c[1]+w*c[4]+I*c[7],d[2]=y*c[2]+w*c[5]+I*c[8],d},u.c7=function(d,s,c,y,w,I,A){var O=1/(s-c),j=1/(y-w),Y=1/(I-A);return d[0]=-2*O,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*j,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*Y,d[11]=0,d[12]=(s+c)*O,d[13]=(w+y)*j,d[14]=(A+I)*Y,d[15]=1,d},u.c8=class extends cu{constructor(d,s){super(d,s),this.current=new Array}set(d){if(d!=this.current){this.current=d;const s=new Float32Array(4*d.length);for(let c=0;c<d.length;c++)s[4*c]=d[c].r,s[4*c+1]=d[c].g,s[4*c+2]=d[c].b,s[4*c+3]=d[c].a;this.gl.uniform4fv(this.location,s)}}},u.c9=class extends cu{constructor(d,s){super(d,s),this.current=new Array}set(d){if(d!=this.current){this.current=d;const s=new Float32Array(d);this.gl.uniform1fv(this.location,s)}}},u.cA=function(d,s){return at[s]&&"touches"in d},u.cB=function(d){return at[d]||Ae[d]},u.cC=function(d,s,c){var y=s[0],w=s[1];return d[0]=c[0]*y+c[4]*w+c[12],d[1]=c[1]*y+c[5]*w+c[13],d},u.cD=function(d,s){const{x:c,y}=Lv.fromLngLat(s);return!(d<0||d>25||y<0||y>=1||c<0||c>=1)},u.cE=function(d,s){return d[0]=s[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=s[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=s[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},u.cF=class extends zo{},u.cG=EY,u.cI=yt,u.cJ=function(d,s){He.REGISTERED_PROTOCOLS[d]=s},u.cK=function(d){delete He.REGISTERED_PROTOCOLS[d]},u.cL=function(d,s){const c={};for(let w=0;w<d.length;w++){const I=s&&s[d[w].id]||sc(d[w]);s&&(s[d[w].id]=I);let A=c[I];A||(A=c[I]=[]),A.push(d[w])}const y=[];for(const w in c)y.push(c[w]);return y},u.cM=Pt,u.cN=SL,u.cO=tR,u.cP=iL,u.cQ=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=xe/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const s=d.bucket.layers[0],c=s.layout,y=s._unevaluatedLayout._values,w={layoutIconSize:y["icon-size"].possiblyEvaluate(new bi(d.bucket.zoom+1),d.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new bi(d.bucket.zoom+1),d.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new bi(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ie}=d.bucket.textSizeData;w.compositeTextSizes=[y["text-size"].possiblyEvaluate(new bi(Y),d.canonical),y["text-size"].possiblyEvaluate(new bi(ie),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ie}=d.bucket.iconSizeData;w.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new bi(Y),d.canonical),y["icon-size"].possiblyEvaluate(new bi(ie),d.canonical)]}const I=c.get("text-line-height")*Xs,A=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",O=c.get("text-keep-upright"),j=c.get("text-size");for(const Y of d.bucket.features){const ie=c.get("text-font").evaluate(Y,{},d.canonical).join(","),ce=j.evaluate(Y,{},d.canonical),be=w.layoutTextSize.evaluate(Y,{},d.canonical),Ce=w.layoutIconSize.evaluate(Y,{},d.canonical),Oe={horizontal:{},vertical:void 0},ze=Y.text;let Ve,et=[0,0];if(ze){const ut=ze.toString(),At=c.get("text-letter-spacing").evaluate(Y,{},d.canonical)*Xs,Ot=qn(ut)?At:0,lr=c.get("text-anchor").evaluate(Y,{},d.canonical),Ir=pR(s,Y,d.canonical);if(!Ir){const jr=c.get("text-radial-offset").evaluate(Y,{},d.canonical);et=jr?hR(lr,[jr*Xs,e5]):c.get("text-offset").evaluate(Y,{},d.canonical).map((Er=>Er*Xs))}let wr=A?"center":c.get("text-justify").evaluate(Y,{},d.canonical);const Or=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(Y,{},d.canonical)*Xs:1/0,an=()=>{d.bucket.allowVerticalPlacement&&yi(ut)&&(Oe.vertical=Ib(ze,d.glyphMap,d.glyphPositions,d.imagePositions,ie,Or,I,lr,"left",Ot,et,u.az.vertical,!0,be,ce))};if(!A&&Ir){const jr=new Set;if(wr==="auto")for(let vr=0;vr<Ir.values.length;vr+=2)jr.add(t5(Ir.values[vr]));else jr.add(wr);let Er=!1;for(const vr of jr)if(!Oe.horizontal[vr])if(Er)Oe.horizontal[vr]=Oe.horizontal[0];else{const vn=Ib(ze,d.glyphMap,d.glyphPositions,d.imagePositions,ie,Or,I,"center",vr,Ot,et,u.az.horizontal,!1,be,ce);vn&&(Oe.horizontal[vr]=vn,Er=vn.positionedLines.length===1)}an()}else{wr==="auto"&&(wr=t5(lr));const jr=Ib(ze,d.glyphMap,d.glyphPositions,d.imagePositions,ie,Or,I,lr,wr,Ot,et,u.az.horizontal,!1,be,ce);jr&&(Oe.horizontal[wr]=jr),an(),yi(ut)&&A&&O&&(Oe.vertical=Ib(ze,d.glyphMap,d.glyphPositions,d.imagePositions,ie,Or,I,lr,wr,Ot,et,u.az.vertical,!1,be,ce))}}let Et=!1;if(Y.icon&&Y.icon.name){const ut=d.imageMap[Y.icon.name];ut&&(Ve=DX(d.imagePositions[Y.icon.name],c.get("icon-offset").evaluate(Y,{},d.canonical),c.get("icon-anchor").evaluate(Y,{},d.canonical)),Et=!!ut.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Et:d.bucket.sdfIcons!==Et&&st("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ut.pixelRatio!==d.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const rt=gR(Oe.horizontal)||Oe.vertical;d.bucket.iconsInText=!!rt&&rt.iconsInText,(rt||Ve)&&SY(d.bucket,Y,Oe,Ve,d.imageMap,w,be,Ce,et,Et,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},u.cR=SS,u.cS=ES,u.cT=TS,u.cU=function(d){const s=new Tb;return(function(c,y){for(const w in c.layers)y.writeMessage(3,uY,c.layers[w])})(d,s),s.finish()},u.cV=function(d,s,c,y,w,I){let A=iR(d,s,c,w,0);return A=iR(A,s,y,I,1),A},u.cW=class{constructor(d){this.maxEntries=d,this.map=new Map}get(d){const s=this.map.get(d);return s!==void 0&&(this.map.delete(d),this.map.set(d,s)),s}set(d,s){if(this.map.has(d))this.map.delete(d);else if(this.map.size>=this.maxEntries){const c=this.map.keys().next().value;this.map.delete(c)}this.map.set(d,s)}clear(){this.map.clear()}},u.cX=jM,u.cY=Tb,u.cZ=QL,u.c_=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},u.ca=class extends Dc{},u.cb=fX,u.cc=class extends Xd{},u.cd=vS,u.ce=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},u.cf=EM,u.cg=function(d,s,c){var y=s[0],w=s[1],I=s[2],A=c[3]*y+c[7]*w+c[11]*I+c[15];return d[0]=(c[0]*y+c[4]*w+c[8]*I+c[12])/(A=A||1),d[1]=(c[1]*y+c[5]*w+c[9]*I+c[13])/A,d[2]=(c[2]*y+c[6]*w+c[10]*I+c[14])/A,d},u.ch=class extends $d{},u.ci=class extends l{},u.cj=function(d,s){return d[0]===s[0]&&d[1]===s[1]&&d[2]===s[2]&&d[3]===s[3]&&d[4]===s[4]&&d[5]===s[5]&&d[6]===s[6]&&d[7]===s[7]&&d[8]===s[8]&&d[9]===s[9]&&d[10]===s[10]&&d[11]===s[11]&&d[12]===s[12]&&d[13]===s[13]&&d[14]===s[14]&&d[15]===s[15]},u.ck=function(d,s){var c=d[0],y=d[1],w=d[2],I=d[3],A=d[4],O=d[5],j=d[6],Y=d[7],ie=d[8],ce=d[9],be=d[10],Ce=d[11],Oe=d[12],ze=d[13],Ve=d[14],et=d[15],Et=s[0],rt=s[1],ut=s[2],At=s[3],Ot=s[4],lr=s[5],Ir=s[6],wr=s[7],Or=s[8],an=s[9],jr=s[10],Er=s[11],vr=s[12],vn=s[13],hn=s[14],xn=s[15];return Math.abs(c-Et)<=F*Math.max(1,Math.abs(c),Math.abs(Et))&&Math.abs(y-rt)<=F*Math.max(1,Math.abs(y),Math.abs(rt))&&Math.abs(w-ut)<=F*Math.max(1,Math.abs(w),Math.abs(ut))&&Math.abs(I-At)<=F*Math.max(1,Math.abs(I),Math.abs(At))&&Math.abs(A-Ot)<=F*Math.max(1,Math.abs(A),Math.abs(Ot))&&Math.abs(O-lr)<=F*Math.max(1,Math.abs(O),Math.abs(lr))&&Math.abs(j-Ir)<=F*Math.max(1,Math.abs(j),Math.abs(Ir))&&Math.abs(Y-wr)<=F*Math.max(1,Math.abs(Y),Math.abs(wr))&&Math.abs(ie-Or)<=F*Math.max(1,Math.abs(ie),Math.abs(Or))&&Math.abs(ce-an)<=F*Math.max(1,Math.abs(ce),Math.abs(an))&&Math.abs(be-jr)<=F*Math.max(1,Math.abs(be),Math.abs(jr))&&Math.abs(Ce-Er)<=F*Math.max(1,Math.abs(Ce),Math.abs(Er))&&Math.abs(Oe-vr)<=F*Math.max(1,Math.abs(Oe),Math.abs(vr))&&Math.abs(ze-vn)<=F*Math.max(1,Math.abs(ze),Math.abs(vn))&&Math.abs(Ve-hn)<=F*Math.max(1,Math.abs(Ve),Math.abs(hn))&&Math.abs(et-xn)<=F*Math.max(1,Math.abs(et),Math.abs(xn))},u.cl=function(d,s){return d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[3],d[4]=s[4],d[5]=s[5],d[6]=s[6],d[7]=s[7],d[8]=s[8],d[9]=s[9],d[10]=s[10],d[11]=s[11],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15],d},u.cm=d=>d.type==="symbol",u.cn=d=>d.type==="circle",u.co=d=>d.type==="heatmap",u.cp=d=>d.type==="line",u.cq=d=>d.type==="fill",u.cr=d=>d.type==="fill-extrusion",u.cs=d=>d.type==="hillshade",u.ct=d=>d.type==="color-relief",u.cu=d=>d.type==="background",u.cv=d=>d.type==="custom",u.cw=we,u.cx=function(d,s,c){const y=ye(s.x-c.x,s.y-c.y),w=ye(d.x-c.x,d.y-c.y),I=Math.atan2(y[0]*w[1]-y[1]*w[0],(function(A,O){return A[0]*O[0]+A[1]*O[1]})(y,w));return Kt(I)},u.cy=Ne,u.cz=function(d,s){return Ae[s]&&(d instanceof MouseEvent||d instanceof WheelEvent)},u.d=Vt,u.d0=PM,u.d1=p,u.d2=class{constructor(d,s){this.layers={[Ov]:this},this.name=Ov,this.version=s?s.version:1,this.extent=s?s.extent:4096,this.length=d.length,this.features=d}feature(d){return new lY(this.features[d],this.extent)}},u.d3=ld,u.d4=ta,u.e=Be,u.f=d=>a(void 0,void 0,void 0,(function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(s)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),u.g=Dt,u.h=d=>new Promise(((s,c)=>{const y=new Image;y.onload=()=>{s(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame((()=>{y.src=ht}))},y.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(d)],{type:"image/png"});y.src=d.byteLength?URL.createObjectURL(w):ht})),u.i=Zt,u.j=(d,s)=>Jt(Be(d,{type:"json"}),s),u.k=tn,u.l=Nr,u.m=Jt,u.n=(d,s)=>Jt(Be(d,{type:"arrayBuffer"}),s),u.o=function(d){return new Tb(d).readFields(TX,[])},u.p=nL,u.q=function(d){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))},u.r=xv,u.s=br,u.t=Ma,u.u=kt,u.v=Ye,u.w=st,u.x=Io,u.y=nt,u.z=za})),i("worker",["./shared"],(function(u){class a{constructor(Ae,_e){this.keyCache={},Ae&&this.replace(Ae,_e)}replace(Ae,_e){this._layerConfigs={},this._layers={},this.update(Ae,[],_e)}update(Ae,_e,je){for(const He of Ae){this._layerConfigs[He.id]=He;const Dt=this._layers[He.id]=u.bT(He,je);Dt._featureFilter=u.aj(Dt.filter,je),this.keyCache[He.id]&&delete this.keyCache[He.id]}for(const He of _e)delete this.keyCache[He],delete this._layerConfigs[He],delete this._layers[He];this.familiesBySource={};const Ge=u.cL(Object.values(this._layerConfigs),this.keyCache);for(const He of Ge){const Dt=He.map((xr=>this._layers[xr.id])),St=Dt[0];if(St.isHidden())continue;const yt=St.source||"";let ct=this.familiesBySource[yt];ct||(ct=this.familiesBySource[yt]={});const Jt=St.sourceLayer||u.ai;let Vt=ct[Jt];Vt||(Vt=ct[Jt]=[]),Vt.push(Dt)}}}class f{constructor(Ae){const _e={},je=[];for(const St in Ae){const yt=Ae[St],ct=_e[St]={};for(const Jt in yt){const Vt=yt[+Jt];if(!Vt||Vt.bitmap.width===0||Vt.bitmap.height===0)continue;const xr={x:0,y:0,w:Vt.bitmap.width+2,h:Vt.bitmap.height+2};je.push(xr),ct[Jt]={rect:xr,metrics:Vt.metrics}}}const{w:Ge,h:He}=u.p(je),Dt=new u.r({width:Ge||1,height:He||1});for(const St in Ae){const yt=Ae[St];for(const ct in yt){const Jt=yt[+ct];if(!Jt||Jt.bitmap.width===0||Jt.bitmap.height===0)continue;const Vt=_e[St][ct].rect;u.r.copy(Jt.bitmap,Dt,{x:0,y:0},{x:Vt.x+1,y:Vt.y+1},Jt.bitmap)}}this.image=Dt,this.positions=_e}}u.cM("GlyphAtlas",f);class p{constructor(Ae){this.tileID=new u.a2(Ae.tileID.overscaledZ,Ae.tileID.wrap,Ae.tileID.canonical.z,Ae.tileID.canonical.x,Ae.tileID.canonical.y),this.uid=Ae.uid,this.zoom=Ae.zoom,this.pixelRatio=Ae.pixelRatio,this.tileSize=Ae.tileSize,this.source=Ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ae.showCollisionBoxes,this.collectResourceTiming=!!Ae.collectResourceTiming,this.returnDependencies=!!Ae.returnDependencies,this.promoteId=Ae.promoteId,this.inFlightDependencies=[]}parse(Ae,_e,je,Ge,He){return u._(this,void 0,void 0,(function*(){this.status="parsing",this.data=Ae,this.collisionBoxArray=new u.ag;const Dt=new u.cN(Object.keys(Ae.layers).sort()),St=new u.cO(this.tileID,this.promoteId);St.bucketLayerIDs=[];const yt={},ct={featureIndex:St,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:je,subdivisionGranularity:He},Jt=_e.familiesBySource[this.source];for(const Me in Jt){const Ue=Ae.layers[Me];if(!Ue)continue;Ue.version===1&&u.w(`Vector tile source "${this.source}" layer "${Me}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ct=Dt.encode(Me),Gt=[];for(let zt=0;zt<Ue.length;zt++){const qr=Ue.feature(zt),En=St.getId(qr,Me);Gt.push({feature:qr,id:En,index:zt,sourceLayerIndex:Ct})}for(const zt of Jt[Me]){const qr=zt[0];qr.source!==this.source&&u.w(`layer.source = ${qr.source} does not equal this.source = ${this.source}`),qr.isHidden(this.zoom,!0)||(g(zt,this.zoom,je),(yt[qr.id]=qr.createBucket({index:St.bucketLayerIDs.length,layers:zt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ct,sourceID:this.source})).populate(Gt,ct,this.tileID.canonical),St.bucketLayerIDs.push(zt.map((En=>En.id))))}}const Vt=u.bY(ct.glyphDependencies,(Me=>Object.keys(Me).map(Number)));this.inFlightDependencies.forEach((Me=>Me?.abort())),this.inFlightDependencies=[];let xr=Promise.resolve({});if(Object.keys(Vt).length){const Me=new AbortController;this.inFlightDependencies.push(Me),xr=Ge.sendAsync({type:"GG",data:{stacks:Vt,source:this.source,tileID:this.tileID,type:"glyphs"}},Me)}const _r=Object.keys(ct.iconDependencies);let Nr=Promise.resolve({});if(_r.length){const Me=new AbortController;this.inFlightDependencies.push(Me),Nr=Ge.sendAsync({type:"GI",data:{icons:_r,source:this.source,tileID:this.tileID,type:"icons"}},Me)}const tn=Object.keys(ct.patternDependencies);let Lr=Promise.resolve({});if(tn.length){const Me=new AbortController;this.inFlightDependencies.push(Me),Lr=Ge.sendAsync({type:"GI",data:{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"}},Me)}const kt=ct.dashDependencies;let Hr=Promise.resolve({});if(Object.keys(kt).length){const Me=new AbortController;this.inFlightDependencies.push(Me),Hr=Ge.sendAsync({type:"GDA",data:{dashes:kt}},Me)}const[kn,Ur,rr,Jn]=yield Promise.all([xr,Nr,Lr,Hr]),en=new f(kn),Vn=new u.cP(Ur,rr);for(const Me in yt){const Ue=yt[Me];Ue instanceof u.ah?(g(Ue.layers,this.zoom,je),u.cQ({bucket:Ue,glyphMap:kn,glyphPositions:en.positions,imageMap:Ur,imagePositions:Vn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ct.subdivisionGranularity})):Ue.hasDependencies&&(Ue instanceof u.cR||Ue instanceof u.cS||Ue instanceof u.cT)&&(g(Ue.layers,this.zoom,je),Ue.addFeatures(ct,this.tileID.canonical,Vn.patternPositions,Jn))}return this.status="done",{buckets:Object.values(yt).filter((Me=>!Me.isEmpty())),featureIndex:St,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:en.image,imageAtlas:Vn,dashPositions:Jn,glyphMap:this.returnDependencies?kn:null,iconMap:this.returnDependencies?Ur:null,glyphPositions:this.returnDependencies?en.positions:null}}))}}function g(at,Ae,_e){const je=new u.H(Ae);for(const Ge of at)Ge.recalculate(je,_e)}class b{constructor(Ae,_e,je,Ge,He){this.type=Ae,this.properties=je||{},this.extent=He,this.pointsArray=_e,this.id=Ge}loadGeometry(){return this.pointsArray.map((Ae=>Ae.map((_e=>new u.P(_e.x,_e.y)))))}}class S{constructor(Ae,_e,je){this.version=2,this._myFeatures=Ae,this.name=_e,this.length=Ae.length,this.extent=je}feature(Ae){return this._myFeatures[Ae]}}class _{constructor(){this.layers={}}addLayer(Ae){this.layers[Ae.name]=Ae}}function P(at){let Ae=u.cU(at);return Ae.byteOffset===0&&Ae.byteLength===Ae.buffer.byteLength||(Ae=new Uint8Array(Ae)),{vectorTile:at,rawData:Ae.buffer}}function k(at,Ae,_e){const{extent:je}=at,Ge=Math.pow(2,_e.z-Ae.z),He=(_e.x-Ae.x*Ge)*je,Dt=(_e.y-Ae.y*Ge)*je,St=[];for(let yt=0;yt<at.length;yt++){const ct=at.feature(yt);let Jt=ct.loadGeometry();for(const xr of Jt)for(const _r of xr)_r.x=_r.x*Ge-He,_r.y=_r.y*Ge-Dt;const Vt=128;Jt=u.cV(Jt,ct.type,-Vt,-Vt,je+Vt,je+Vt),Jt.length!==0&&St.push(new b(ct.type,Jt,ct.properties,ct.id,je))}return new S(St,at.name,je)}class M{constructor(Ae,_e,je){this.actor=Ae,this.layerIndex=_e,this.availableImages=je,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new u.cW(1e3)}loadVectorTile(Ae,_e){return u._(this,void 0,void 0,(function*(){const je=yield u.n(Ae.request,_e);try{return{vectorTile:Ae.encoding!=="mlt"?new u.cX(new u.cY(je.data)):new u.cZ(je.data),rawData:je.data,cacheControl:je.cacheControl,expires:je.expires}}catch(Ge){const He=new Uint8Array(je.data);let Dt=`Unable to parse the tile at ${Ae.request.url}, `;throw Dt+=He[0]===31&&He[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ge.message}`,new Error(Dt)}}))}loadTile(Ae){return u._(this,void 0,void 0,(function*(){const{uid:_e,overzoomParameters:je}=Ae;je&&(Ae.request=je.overzoomRequest);const Ge=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new u.c_(Ae.request),He=new p(Ae);this.loading[_e]=He;const Dt=new AbortController;He.abort=Dt;try{const St=yield this.loadVectorTile(Ae,Dt);if(delete this.loading[_e],!St)return null;if(je){const xr=this._getOverzoomTile(Ae,St.vectorTile);St.rawData=xr.rawData,St.vectorTile=xr.vectorTile}const yt=St.rawData,ct={};St.expires&&(ct.expires=St.expires),St.cacheControl&&(ct.cacheControl=St.cacheControl);const Jt={};if(Ge){const xr=Ge.finish();xr&&(Jt.resourceTiming=JSON.parse(JSON.stringify(xr)))}He.vectorTile=St.vectorTile;const Vt=He.parse(St.vectorTile,this.layerIndex,this.availableImages,this.actor,Ae.subdivisionGranularity);this.loaded[_e]=He,this.fetching[_e]={rawTileData:yt,cacheControl:ct,resourceTiming:Jt};try{const xr=yield Vt;return u.e({rawTileData:yt.slice(0),encoding:Ae.encoding},xr,ct,Jt)}finally{delete this.fetching[_e]}}catch(St){throw delete this.loading[_e],He.status="done",this.loaded[_e]=He,St}}))}_getOverzoomTile(Ae,_e){const{tileID:je,source:Ge,overzoomParameters:He}=Ae,{maxZoomTileID:Dt}=He,St=`${Dt.key}_${je.key}`,yt=this.overzoomedTileResultCache.get(St);if(yt)return yt;const ct=new _,Jt=this.layerIndex.familiesBySource[Ge];for(const xr in Jt){const _r=_e.layers[xr];if(!_r)continue;const Nr=k(_r,Dt,je.canonical);Nr.length>0&&ct.addLayer(Nr)}const Vt=P(ct);return this.overzoomedTileResultCache.set(St,Vt),Vt}reloadTile(Ae){return u._(this,void 0,void 0,(function*(){const _e=Ae.uid;if(!this.loaded||!this.loaded[_e])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const je=this.loaded[_e];if(je.showCollisionBoxes=Ae.showCollisionBoxes,je.status==="parsing"){const Ge=yield je.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,Ae.subdivisionGranularity);let He;if(this.fetching[_e]){const{rawTileData:Dt,cacheControl:St,resourceTiming:yt}=this.fetching[_e];delete this.fetching[_e],He=u.e({rawTileData:Dt.slice(0),encoding:Ae.encoding},Ge,St,yt)}else He=Ge;return He}if(je.status==="done"&&je.vectorTile)return je.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,Ae.subdivisionGranularity)}))}abortTile(Ae){return u._(this,void 0,void 0,(function*(){const _e=this.loading,je=Ae.uid;_e&&_e[je]&&_e[je].abort&&(_e[je].abort.abort(),delete _e[je])}))}removeTile(Ae){return u._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[Ae.uid]&&delete this.loaded[Ae.uid]}))}}class D{constructor(){this.loaded={}}loadTile(Ae){return u._(this,void 0,void 0,(function*(){const{uid:_e,encoding:je,rawImageData:Ge,redFactor:He,greenFactor:Dt,blueFactor:St,baseShift:yt}=Ae,ct=Ge.width+2,Jt=Ge.height+2,Vt=u.b(Ge)?new u.R({width:ct,height:Jt},yield u.c$(Ge,-1,-1,ct,Jt)):Ge,xr=new u.d0(_e,Vt,je,He,Dt,St,yt);return this.loaded=this.loaded||{},this.loaded[_e]=xr,xr}))}removeTile(Ae){const _e=this.loaded,je=Ae.uid;_e&&_e[je]&&delete _e[je]}}var F,B,N=(function(){if(B)return F;function at(_e,je){if(_e.length!==0){Ae(_e[0],je);for(var Ge=1;Ge<_e.length;Ge++)Ae(_e[Ge],!je)}}function Ae(_e,je){for(var Ge=0,He=0,Dt=0,St=_e.length,yt=St-1;Dt<St;yt=Dt++){var ct=(_e[Dt][0]-_e[yt][0])*(_e[yt][1]+_e[Dt][1]),Jt=Ge+ct;He+=Math.abs(Ge)>=Math.abs(ct)?Ge-Jt+ct:ct-Jt+Ge,Ge=Jt}Ge+He>=0!=!!je&&_e.reverse()}return B=1,F=function _e(je,Ge){var He,Dt=je&&je.type;if(Dt==="FeatureCollection")for(He=0;He<je.features.length;He++)_e(je.features[He],Ge);else if(Dt==="GeometryCollection")for(He=0;He<je.geometries.length;He++)_e(je.geometries[He],Ge);else if(Dt==="Feature")_e(je.geometry,Ge);else if(Dt==="Polygon")at(je.coordinates,Ge);else if(Dt==="MultiPolygon")for(He=0;He<je.coordinates.length;He++)at(je.coordinates[He],Ge);return je}})(),$=u.d1(N);const V={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:at=>at},U=Math.fround||(X=new Float32Array(1),at=>(X[0]=+at,X[0]));var X;class Z{constructor(Ae){this.options=Object.assign(Object.create(V),Ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ae){const{log:_e,minZoom:je,maxZoom:Ge}=this.options;_e&&console.time("total time");const He=`prepare ${Ae.length} points`;_e&&console.time(He),this.points=Ae;const Dt=[];for(let yt=0;yt<Ae.length;yt++){const ct=Ae[yt];if(!ct.geometry)continue;const[Jt,Vt]=ct.geometry.coordinates,xr=U(H(Jt)),_r=U(ae(Vt));Dt.push(xr,_r,1/0,yt,-1,1),this.options.reduce&&Dt.push(0)}let St=this.trees[Ge+1]=this._createTree(Dt);_e&&console.timeEnd(He);for(let yt=Ge;yt>=je;yt--){const ct=+Date.now();St=this.trees[yt]=this._createTree(this._cluster(St,yt)),_e&&console.log("z%d: %d clusters in %dms",yt,St.numItems,+Date.now()-ct)}return _e&&console.timeEnd("total time"),this}getClusters(Ae,_e){let je=((Ae[0]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Ae[1]));let He=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180;const Dt=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)je=-180,He=180;else if(je>He){const Vt=this.getClusters([je,Ge,180,Dt],_e),xr=this.getClusters([-180,Ge,He,Dt],_e);return Vt.concat(xr)}const St=this.trees[this._limitZoom(_e)],yt=St.range(H(je),ae(Dt),H(He),ae(Ge)),ct=St.data,Jt=[];for(const Vt of yt){const xr=this.stride*Vt;Jt.push(ct[xr+5]>1?oe(ct,xr,this.clusterProps):this.points[ct[xr+3]])}return Jt}getChildren(Ae){const _e=this._getOriginId(Ae),je=this._getOriginZoom(Ae),Ge="No cluster with the specified id.",He=this.trees[je];if(!He)throw new Error(Ge);const Dt=He.data;if(_e*this.stride>=Dt.length)throw new Error(Ge);const St=this.options.radius/(this.options.extent*Math.pow(2,je-1)),yt=He.within(Dt[_e*this.stride],Dt[_e*this.stride+1],St),ct=[];for(const Jt of yt){const Vt=Jt*this.stride;Dt[Vt+4]===Ae&&ct.push(Dt[Vt+5]>1?oe(Dt,Vt,this.clusterProps):this.points[Dt[Vt+3]])}if(ct.length===0)throw new Error(Ge);return ct}getLeaves(Ae,_e,je){const Ge=[];return this._appendLeaves(Ge,Ae,_e=_e||10,je=je||0,0),Ge}getTile(Ae,_e,je){const Ge=this.trees[this._limitZoom(Ae)],He=Math.pow(2,Ae),{extent:Dt,radius:St}=this.options,yt=St/Dt,ct=(je-yt)/He,Jt=(je+1+yt)/He,Vt={features:[]};return this._addTileFeatures(Ge.range((_e-yt)/He,ct,(_e+1+yt)/He,Jt),Ge.data,_e,je,He,Vt),_e===0&&this._addTileFeatures(Ge.range(1-yt/He,ct,1,Jt),Ge.data,He,je,He,Vt),_e===He-1&&this._addTileFeatures(Ge.range(0,ct,yt/He,Jt),Ge.data,-1,je,He,Vt),Vt.features.length?Vt:null}getClusterExpansionZoom(Ae){let _e=this._getOriginZoom(Ae)-1;for(;_e<=this.options.maxZoom;){const je=this.getChildren(Ae);if(_e++,je.length!==1)break;Ae=je[0].properties.cluster_id}return _e}_appendLeaves(Ae,_e,je,Ge,He){const Dt=this.getChildren(_e);for(const St of Dt){const yt=St.properties;if(yt&&yt.cluster?He+yt.point_count<=Ge?He+=yt.point_count:He=this._appendLeaves(Ae,yt.cluster_id,je,Ge,He):He<Ge?He++:Ae.push(St),Ae.length===je)break}return He}_createTree(Ae){const _e=new u.aT(Ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let je=0;je<Ae.length;je+=this.stride)_e.add(Ae[je],Ae[je+1]);return _e.finish(),_e.data=Ae,_e}_addTileFeatures(Ae,_e,je,Ge,He,Dt){for(const St of Ae){const yt=St*this.stride,ct=_e[yt+5]>1;let Jt,Vt,xr;if(ct)Jt=re(_e,yt,this.clusterProps),Vt=_e[yt],xr=_e[yt+1];else{const tn=this.points[_e[yt+3]];Jt=tn.properties;const[Lr,kt]=tn.geometry.coordinates;Vt=H(Lr),xr=ae(kt)}const _r={type:1,geometry:[[Math.round(this.options.extent*(Vt*He-je)),Math.round(this.options.extent*(xr*He-Ge))]],tags:Jt};let Nr;Nr=ct||this.options.generateId?_e[yt+3]:this.points[_e[yt+3]].id,Nr!==void 0&&(_r.id=Nr),Dt.features.push(_r)}}_limitZoom(Ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ae),this.options.maxZoom+1))}_cluster(Ae,_e){const{radius:je,extent:Ge,reduce:He,minPoints:Dt}=this.options,St=je/(Ge*Math.pow(2,_e)),yt=Ae.data,ct=[],Jt=this.stride;for(let Vt=0;Vt<yt.length;Vt+=Jt){if(yt[Vt+2]<=_e)continue;yt[Vt+2]=_e;const xr=yt[Vt],_r=yt[Vt+1],Nr=Ae.within(yt[Vt],yt[Vt+1],St),tn=yt[Vt+5];let Lr=tn;for(const kt of Nr){const Hr=kt*Jt;yt[Hr+2]>_e&&(Lr+=yt[Hr+5])}if(Lr>tn&&Lr>=Dt){let kt,Hr=xr*tn,kn=_r*tn,Ur=-1;const rr=(Vt/Jt<<5)+(_e+1)+this.points.length;for(const Jn of Nr){const en=Jn*Jt;if(yt[en+2]<=_e)continue;yt[en+2]=_e;const Vn=yt[en+5];Hr+=yt[en]*Vn,kn+=yt[en+1]*Vn,yt[en+4]=rr,He&&(kt||(kt=this._map(yt,Vt,!0),Ur=this.clusterProps.length,this.clusterProps.push(kt)),He(kt,this._map(yt,en)))}yt[Vt+4]=rr,ct.push(Hr/Lr,kn/Lr,1/0,rr,-1,Lr),He&&ct.push(Ur)}else{for(let kt=0;kt<Jt;kt++)ct.push(yt[Vt+kt]);if(Lr>1)for(const kt of Nr){const Hr=kt*Jt;if(!(yt[Hr+2]<=_e)){yt[Hr+2]=_e;for(let kn=0;kn<Jt;kn++)ct.push(yt[Hr+kn])}}}}return ct}_getOriginId(Ae){return Ae-this.points.length>>5}_getOriginZoom(Ae){return(Ae-this.points.length)%32}_map(Ae,_e,je){if(Ae[_e+5]>1){const Dt=this.clusterProps[Ae[_e+6]];return je?Object.assign({},Dt):Dt}const Ge=this.points[Ae[_e+3]].properties,He=this.options.map(Ge);return je&&He===Ge?Object.assign({},He):He}}function oe(at,Ae,_e){return{type:"Feature",id:at[Ae+3],properties:re(at,Ae,_e),geometry:{type:"Point",coordinates:[(je=at[Ae],360*(je-.5)),se(at[Ae+1])]}};var je}function re(at,Ae,_e){const je=at[Ae+5],Ge=je>=1e4?`${Math.round(je/1e3)}k`:je>=1e3?Math.round(je/100)/10+"k":je,He=at[Ae+6],Dt=He===-1?{}:Object.assign({},_e[He]);return Object.assign(Dt,{cluster:!0,cluster_id:at[Ae+3],point_count:je,point_count_abbreviated:Ge})}function H(at){return at/360+.5}function ae(at){const Ae=Math.sin(at*Math.PI/180),_e=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return _e<0?0:_e>1?1:_e}function se(at){const Ae=(180-360*at)*Math.PI/180;return 360*Math.atan(Math.exp(Ae))/Math.PI-90}function de(at,Ae,_e,je){let Ge=je;const He=Ae+(_e-Ae>>1);let Dt,St=_e-Ae;const yt=at[Ae],ct=at[Ae+1],Jt=at[_e],Vt=at[_e+1];for(let xr=Ae+3;xr<_e;xr+=3){const _r=fe(at[xr],at[xr+1],yt,ct,Jt,Vt);if(_r>Ge)Dt=xr,Ge=_r;else if(_r===Ge){const Nr=Math.abs(xr-He);Nr<St&&(Dt=xr,St=Nr)}}Ge>je&&(Dt-Ae>3&&de(at,Ae,Dt,je),at[Dt+2]=Ge,_e-Dt>3&&de(at,Dt,_e,je))}function fe(at,Ae,_e,je,Ge,He){let Dt=Ge-_e,St=He-je;if(Dt!==0||St!==0){const yt=((at-_e)*Dt+(Ae-je)*St)/(Dt*Dt+St*St);yt>1?(_e=Ge,je=He):yt>0&&(_e+=Dt*yt,je+=St*yt)}return Dt=at-_e,St=Ae-je,Dt*Dt+St*St}function Le(at,Ae,_e,je){const Ge={id:at??null,type:Ae,geometry:_e,tags:je,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")ye(Ge,_e);else if(Ae==="Polygon")ye(Ge,_e[0]);else if(Ae==="MultiLineString")for(const He of _e)ye(Ge,He);else if(Ae==="MultiPolygon")for(const He of _e)ye(Ge,He[0]);return Ge}function ye(at,Ae){for(let _e=0;_e<Ae.length;_e+=3)at.minX=Math.min(at.minX,Ae[_e]),at.minY=Math.min(at.minY,Ae[_e+1]),at.maxX=Math.max(at.maxX,Ae[_e]),at.maxY=Math.max(at.maxY,Ae[_e+1])}function xe(at,Ae,_e,je){if(!Ae.geometry)return;const Ge=Ae.geometry.coordinates;if(Ge&&Ge.length===0)return;const He=Ae.geometry.type,Dt=Math.pow(_e.tolerance/((1<<_e.maxZoom)*_e.extent),2);let St=[],yt=Ae.id;if(_e.promoteId?yt=Ae.properties[_e.promoteId]:_e.generateId&&(yt=je||0),He==="Point")Se(Ge,St);else if(He==="MultiPoint")for(const ct of Ge)Se(ct,St);else if(He==="LineString")Re(Ge,St,Dt,!1);else if(He==="MultiLineString"){if(_e.lineMetrics){for(const ct of Ge)St=[],Re(ct,St,Dt,!1),at.push(Le(yt,"LineString",St,Ae.properties));return}he(Ge,St,Dt,!1)}else if(He==="Polygon")he(Ge,St,Dt,!0);else{if(He!=="MultiPolygon"){if(He==="GeometryCollection"){for(const ct of Ae.geometry.geometries)xe(at,{id:yt,geometry:ct,properties:Ae.properties},_e,je);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ct of Ge){const Jt=[];he(ct,Jt,Dt,!0),St.push(Jt)}}at.push(Le(yt,He,St,Ae.properties))}function Se(at,Ae){Ae.push(Ee(at[0]),we(at[1]),0)}function Re(at,Ae,_e,je){let Ge,He,Dt=0;for(let yt=0;yt<at.length;yt++){const ct=Ee(at[yt][0]),Jt=we(at[yt][1]);Ae.push(ct,Jt,0),yt>0&&(Dt+=je?(Ge*Jt-ct*He)/2:Math.sqrt(Math.pow(ct-Ge,2)+Math.pow(Jt-He,2))),Ge=ct,He=Jt}const St=Ae.length-3;Ae[2]=1,de(Ae,0,St,_e),Ae[St+2]=1,Ae.size=Math.abs(Dt),Ae.start=0,Ae.end=Ae.size}function he(at,Ae,_e,je){for(let Ge=0;Ge<at.length;Ge++){const He=[];Re(at[Ge],He,_e,je),Ae.push(He)}}function Ee(at){return at/360+.5}function we(at){const Ae=Math.sin(at*Math.PI/180),_e=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return _e<0?0:_e>1?1:_e}function Ne(at,Ae,_e,je,Ge,He,Dt,St){if(je/=Ae,He>=(_e/=Ae)&&Dt<je)return at;if(Dt<_e||He>=je)return null;const yt=[];for(const ct of at){const Jt=ct.geometry;let Vt=ct.type;const xr=Ge===0?ct.minX:ct.minY,_r=Ge===0?ct.maxX:ct.maxY;if(xr>=_e&&_r<je){yt.push(ct);continue}if(_r<_e||xr>=je)continue;let Nr=[];if(Vt==="Point"||Vt==="MultiPoint")Fe(Jt,Nr,_e,je,Ge);else if(Vt==="LineString")Xe(Jt,Nr,_e,je,Ge,!1,St.lineMetrics);else if(Vt==="MultiLineString")ot(Jt,Nr,_e,je,Ge,!1);else if(Vt==="Polygon")ot(Jt,Nr,_e,je,Ge,!0);else if(Vt==="MultiPolygon")for(const tn of Jt){const Lr=[];ot(tn,Lr,_e,je,Ge,!0),Lr.length&&Nr.push(Lr)}if(Nr.length){if(St.lineMetrics&&Vt==="LineString"){for(const tn of Nr)yt.push(Le(ct.id,Vt,tn,ct.tags));continue}Vt!=="LineString"&&Vt!=="MultiLineString"||(Nr.length===1?(Vt="LineString",Nr=Nr[0]):Vt="MultiLineString"),Vt!=="Point"&&Vt!=="MultiPoint"||(Vt=Nr.length===3?"Point":"MultiPoint"),yt.push(Le(ct.id,Vt,Nr,ct.tags))}}return yt.length?yt:null}function Fe(at,Ae,_e,je,Ge){for(let He=0;He<at.length;He+=3){const Dt=at[He+Ge];Dt>=_e&&Dt<=je&&Ke(Ae,at[He],at[He+1],at[He+2])}}function Xe(at,Ae,_e,je,Ge,He,Dt){let St=Be(at);const yt=Ge===0?it:ke;let ct,Jt,Vt=at.start;for(let Lr=0;Lr<at.length-3;Lr+=3){const kt=at[Lr],Hr=at[Lr+1],kn=at[Lr+2],Ur=at[Lr+3],rr=at[Lr+4],Jn=Ge===0?kt:Hr,en=Ge===0?Ur:rr;let Vn=!1;Dt&&(ct=Math.sqrt(Math.pow(kt-Ur,2)+Math.pow(Hr-rr,2))),Jn<_e?en>_e&&(Jt=yt(St,kt,Hr,Ur,rr,_e),Dt&&(St.start=Vt+ct*Jt)):Jn>je?en<je&&(Jt=yt(St,kt,Hr,Ur,rr,je),Dt&&(St.start=Vt+ct*Jt)):Ke(St,kt,Hr,kn),en<_e&&Jn>=_e&&(Jt=yt(St,kt,Hr,Ur,rr,_e),Vn=!0),en>je&&Jn<=je&&(Jt=yt(St,kt,Hr,Ur,rr,je),Vn=!0),!He&&Vn&&(Dt&&(St.end=Vt+ct*Jt),Ae.push(St),St=Be(at)),Dt&&(Vt+=ct)}let xr=at.length-3;const _r=at[xr],Nr=at[xr+1],tn=Ge===0?_r:Nr;tn>=_e&&tn<=je&&Ke(St,_r,Nr,at[xr+2]),xr=St.length-3,He&&xr>=3&&(St[xr]!==St[0]||St[xr+1]!==St[1])&&Ke(St,St[0],St[1],St[2]),St.length&&Ae.push(St)}function Be(at){const Ae=[];return Ae.size=at.size,Ae.start=at.start,Ae.end=at.end,Ae}function ot(at,Ae,_e,je,Ge,He){for(const Dt of at)Xe(Dt,Ae,_e,je,Ge,He,!1)}function Ke(at,Ae,_e,je){at.push(Ae,_e,je)}function it(at,Ae,_e,je,Ge,He){const Dt=(He-Ae)/(je-Ae);return Ke(at,He,_e+(Ge-_e)*Dt,1),Dt}function ke(at,Ae,_e,je,Ge,He){const Dt=(He-_e)/(Ge-_e);return Ke(at,Ae+(je-Ae)*Dt,He,1),Dt}function Nt(at,Ae){const _e=[];for(let je=0;je<at.length;je++){const Ge=at[je],He=Ge.type;let Dt;if(He==="Point"||He==="MultiPoint"||He==="LineString")Dt=st(Ge.geometry,Ae);else if(He==="MultiLineString"||He==="Polygon"){Dt=[];for(const St of Ge.geometry)Dt.push(st(St,Ae))}else if(He==="MultiPolygon"){Dt=[];for(const St of Ge.geometry){const yt=[];for(const ct of St)yt.push(st(ct,Ae));Dt.push(yt)}}_e.push(Le(Ge.id,He,Dt,Ge.tags))}return _e}function st(at,Ae){const _e=[];_e.size=at.size,at.start!==void 0&&(_e.start=at.start,_e.end=at.end);for(let je=0;je<at.length;je+=3)_e.push(at[je]+Ae,at[je+1],at[je+2]);return _e}function $e(at,Ae){if(at.transformed)return at;const _e=1<<at.z,je=at.x,Ge=at.y;for(const He of at.features){const Dt=He.geometry,St=He.type;if(He.geometry=[],St===1)for(let yt=0;yt<Dt.length;yt+=2)He.geometry.push(Zt(Dt[yt],Dt[yt+1],Ae,_e,je,Ge));else for(let yt=0;yt<Dt.length;yt++){const ct=[];for(let Jt=0;Jt<Dt[yt].length;Jt+=2)ct.push(Zt(Dt[yt][Jt],Dt[yt][Jt+1],Ae,_e,je,Ge));He.geometry.push(ct)}}return at.transformed=!0,at}function Zt(at,Ae,_e,je,Ge,He){return[Math.round(_e*(at*je-Ge)),Math.round(_e*(Ae*je-He))]}function $t(at,Ae,_e,je,Ge){const He=Ae===Ge.maxZoom?0:Ge.tolerance/((1<<Ae)*Ge.extent),Dt={features:[],numPoints:0,numSimplified:0,numFeatures:at.length,source:null,x:_e,y:je,z:Ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const St of at)Wt(Dt,St,He,Ge);return Dt}function Wt(at,Ae,_e,je){const Ge=Ae.geometry,He=Ae.type,Dt=[];if(at.minX=Math.min(at.minX,Ae.minX),at.minY=Math.min(at.minY,Ae.minY),at.maxX=Math.max(at.maxX,Ae.maxX),at.maxY=Math.max(at.maxY,Ae.maxY),He==="Point"||He==="MultiPoint")for(let St=0;St<Ge.length;St+=3)Dt.push(Ge[St],Ge[St+1]),at.numPoints++,at.numSimplified++;else if(He==="LineString")ht(Dt,Ge,at,_e,!1,!1);else if(He==="MultiLineString"||He==="Polygon")for(let St=0;St<Ge.length;St++)ht(Dt,Ge[St],at,_e,He==="Polygon",St===0);else if(He==="MultiPolygon")for(let St=0;St<Ge.length;St++){const yt=Ge[St];for(let ct=0;ct<yt.length;ct++)ht(Dt,yt[ct],at,_e,!0,ct===0)}if(Dt.length){let St=Ae.tags||null;if(He==="LineString"&&je.lineMetrics){St={};for(const ct in Ae.tags)St[ct]=Ae.tags[ct];St.mapbox_clip_start=Ge.start/Ge.size,St.mapbox_clip_end=Ge.end/Ge.size}const yt={geometry:Dt,type:He==="Polygon"||He==="MultiPolygon"?3:He==="LineString"||He==="MultiLineString"?2:1,tags:St};Ae.id!==null&&(yt.id=Ae.id),at.features.push(yt)}}function ht(at,Ae,_e,je,Ge,He){const Dt=je*je;if(je>0&&Ae.size<(Ge?Dt:je))return void(_e.numPoints+=Ae.length/3);const St=[];for(let yt=0;yt<Ae.length;yt+=3)(je===0||Ae[yt+2]>Dt)&&(_e.numSimplified++,St.push(Ae[yt],Ae[yt+1])),_e.numPoints++;Ge&&(function(yt,ct){let Jt=0;for(let Vt=0,xr=yt.length,_r=xr-2;Vt<xr;_r=Vt,Vt+=2)Jt+=(yt[Vt]-yt[_r])*(yt[Vt+1]+yt[_r+1]);if(Jt>0===ct)for(let Vt=0,xr=yt.length;Vt<xr/2;Vt+=2){const _r=yt[Vt],Nr=yt[Vt+1];yt[Vt]=yt[xr-2-Vt],yt[Vt+1]=yt[xr-1-Vt],yt[xr-2-Vt]=_r,yt[xr-1-Vt]=Nr}})(St,He),at.push(St)}const sr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class cr{constructor(Ae,_e){const je=(_e=this.options=(function(He,Dt){for(const St in Dt)He[St]=Dt[St];return He})(Object.create(sr),_e)).debug;if(je&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ge=(function(He,Dt){const St=[];if(He.type==="FeatureCollection")for(let yt=0;yt<He.features.length;yt++)xe(St,He.features[yt],Dt,yt);else xe(St,He.type==="Feature"?He:{geometry:He},Dt);return St})(Ae,_e);this.tiles={},this.tileCoords=[],je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ge=(function(He,Dt){const St=Dt.buffer/Dt.extent;let yt=He;const ct=Ne(He,1,-1-St,St,0,-1,2,Dt),Jt=Ne(He,1,1-St,2+St,0,-1,2,Dt);return(ct||Jt)&&(yt=Ne(He,1,-St,1+St,0,-1,2,Dt)||[],ct&&(yt=Nt(ct,1).concat(yt)),Jt&&(yt=yt.concat(Nt(Jt,-1)))),yt})(Ge,_e),Ge.length&&this.splitTile(Ge,0,0,0),je&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Ae,_e,je,Ge,He,Dt,St){const yt=[Ae,_e,je,Ge],ct=this.options,Jt=ct.debug;for(;yt.length;){Ge=yt.pop(),je=yt.pop(),_e=yt.pop(),Ae=yt.pop();const Vt=1<<_e,xr=ir(_e,je,Ge);let _r=this.tiles[xr];if(!_r&&(Jt>1&&console.time("creation"),_r=this.tiles[xr]=$t(Ae,_e,je,Ge,ct),this.tileCoords.push({z:_e,x:je,y:Ge}),Jt)){Jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,je,Ge,_r.numFeatures,_r.numPoints,_r.numSimplified),console.timeEnd("creation"));const Vn=`z${_e}`;this.stats[Vn]=(this.stats[Vn]||0)+1,this.total++}if(_r.source=Ae,He==null){if(_e===ct.indexMaxZoom||_r.numPoints<=ct.indexMaxPoints)continue}else{if(_e===ct.maxZoom||_e===He)continue;if(He!=null){const Vn=He-_e;if(je!==Dt>>Vn||Ge!==St>>Vn)continue}}if(_r.source=null,Ae.length===0)continue;Jt>1&&console.time("clipping");const Nr=.5*ct.buffer/ct.extent,tn=.5-Nr,Lr=.5+Nr,kt=1+Nr;let Hr=null,kn=null,Ur=null,rr=null,Jn=Ne(Ae,Vt,je-Nr,je+Lr,0,_r.minX,_r.maxX,ct),en=Ne(Ae,Vt,je+tn,je+kt,0,_r.minX,_r.maxX,ct);Ae=null,Jn&&(Hr=Ne(Jn,Vt,Ge-Nr,Ge+Lr,1,_r.minY,_r.maxY,ct),kn=Ne(Jn,Vt,Ge+tn,Ge+kt,1,_r.minY,_r.maxY,ct),Jn=null),en&&(Ur=Ne(en,Vt,Ge-Nr,Ge+Lr,1,_r.minY,_r.maxY,ct),rr=Ne(en,Vt,Ge+tn,Ge+kt,1,_r.minY,_r.maxY,ct),en=null),Jt>1&&console.timeEnd("clipping"),yt.push(Hr||[],_e+1,2*je,2*Ge),yt.push(kn||[],_e+1,2*je,2*Ge+1),yt.push(Ur||[],_e+1,2*je+1,2*Ge),yt.push(rr||[],_e+1,2*je+1,2*Ge+1)}}getTile(Ae,_e,je){Ae=+Ae,_e=+_e,je=+je;const Ge=this.options,{extent:He,debug:Dt}=Ge;if(Ae<0||Ae>24)return null;const St=1<<Ae,yt=ir(Ae,_e=_e+St&St-1,je);if(this.tiles[yt])return $e(this.tiles[yt],He);Dt>1&&console.log("drilling down to z%d-%d-%d",Ae,_e,je);let ct,Jt=Ae,Vt=_e,xr=je;for(;!ct&&Jt>0;)Jt--,Vt>>=1,xr>>=1,ct=this.tiles[ir(Jt,Vt,xr)];return ct&&ct.source?(Dt>1&&(console.log("found parent tile z%d-%d-%d",Jt,Vt,xr),console.time("drilling down")),this.splitTile(ct.source,Jt,Vt,xr,Ae,_e,je),Dt>1&&console.timeEnd("drilling down"),this.tiles[yt]?$e(this.tiles[yt],He):null):null}}function ir(at,Ae,_e){return 32*((1<<at)*_e+Ae)+at}class br extends M{constructor(Ae,_e,je,Ge=yr){super(Ae,_e,je),this._dataUpdateable=new Map,this._createGeoJSONIndex=Ge}loadVectorTile(Ae,_e){return u._(this,void 0,void 0,(function*(){const je=Ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ge=this._geoJSONIndex.getTile(je.z,je.x,je.y);return Ge?P(new u.d2(Ge.features,{version:2,extent:u.a5})):null}))}loadData(Ae){return u._(this,void 0,void 0,(function*(){var _e;(_e=this._pendingRequest)===null||_e===void 0||_e.abort();const je=this._startPerformance(Ae);this._pendingRequest=new AbortController;try{(!this._pendingData||Ae.request||Ae.data||Ae.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(Ae,this._pendingRequest));const Ge=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Ge,Ae),this.loaded={};const He={};return Ae.request&&(He.data=Ge),this._finishPerformance(je,Ae,He),He}catch(Ge){if(delete this._pendingRequest,u.Z(Ge))return{abandoned:!0};throw Ge}}))}_startPerformance(Ae){var _e;if(!((_e=Ae?.request)===null||_e===void 0)&&_e.collectResourceTiming)return new u.c_(Ae.request)}_finishPerformance(Ae,_e,je){if(!Ae)return;const Ge=Ae.finish();Ge&&(je.resourceTiming={},je.resourceTiming[_e.source]=JSON.parse(JSON.stringify(Ge)))}getData(){return u._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(Ae){const _e=this.loaded;return _e&&_e[Ae.uid]?super.reloadTile(Ae):this.loadTile(Ae)}loadAndProcessGeoJSON(Ae,_e){return u._(this,void 0,void 0,(function*(){let je;if(Ae.request?je=yield this.loadGeoJSONFromUrl(Ae.request,Ae.promoteId,_e):Ae.data?je=this._loadGeoJSONFromObject(Ae.data,Ae.promoteId):Ae.dataDiff&&(je=this._loadGeoJSONFromDiff(Ae.dataDiff,Ae.promoteId,Ae.source)),delete this._pendingRequest,typeof je!="object")throw new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`);return $(je,!0),Ae.filter&&(je=this._filterGeoJSON(je,Ae.filter)),je}))}loadGeoJSONFromUrl(Ae,_e,je){return u._(this,void 0,void 0,(function*(){const Ge=yield u.j(Ae,je);return this._dataUpdateable=u.a7(Ge.data,_e),Ge.data}))}_loadGeoJSONFromObject(Ae,_e){return this._dataUpdateable=u.a7(Ae,_e),Ae}_loadGeoJSONFromDiff(Ae,_e,je){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${je}`);u.a8(this._dataUpdateable,Ae,_e);const Ge=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Ge)}_filterGeoJSON(Ae,_e){const je=u.d3(_e,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map((He=>`${He.key}: ${He.message}`)).join(", "));const Ge=Ae.features.filter((He=>je.value.evaluate({zoom:0},He)));return this._toFeatureCollection(Ge)}_toFeatureCollection(Ae){return{type:"FeatureCollection",features:Ae}}removeSource(Ae){return u._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(Ae){return this._geoJSONIndex.getClusterExpansionZoom(Ae.clusterId)}getClusterChildren(Ae){return this._geoJSONIndex.getChildren(Ae.clusterId)}getClusterLeaves(Ae){return this._geoJSONIndex.getLeaves(Ae.clusterId,Ae.limit,Ae.offset)}}function yr(at,Ae){return Ae.cluster?new Z((function({superclusterOptions:_e,clusterProperties:je}){if(!je||!_e)return _e;const Ge={},He={},Dt={accumulated:null,zoom:0},St={properties:null},yt=Object.keys(je);for(const ct of yt){const[Jt,Vt]=je[ct],xr=u.d3(Vt),_r=u.d3(typeof Jt=="string"?[Jt,["accumulated"],["get",ct]]:Jt);Ge[ct]=xr.value,He[ct]=_r.value}return _e.map=ct=>{St.properties=ct;const Jt={};for(const Vt of yt)Jt[Vt]=Ge[Vt].evaluate(Dt,St);return Jt},_e.reduce=(ct,Jt)=>{St.properties=Jt;for(const Vt of yt)Dt.accumulated=ct[Vt],ct[Vt]=He[Vt].evaluate(Dt,St)},_e})(Ae)).load(at.features):(function(_e,je){return new cr(_e,je)})(at,Ae.geojsonVtOptions)}class Kt{constructor(Ae){this.self=Ae,this.actor=new u.L(Ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(_e,je)=>{if(this.externalWorkerSourceTypes[_e])throw new Error(`Worker source with name "${_e}" already registered.`);this.externalWorkerSourceTypes[_e]=je},this.self.addProtocol=u.cJ,this.self.removeProtocol=u.cK,this.self.registerRTLTextPlugin=_e=>{u.d4.setMethods(_e)},this.actor.registerMessageHandler("LDT",((_e,je)=>this._getDEMWorkerSource(_e,je.source).loadTile(je))),this.actor.registerMessageHandler("RDT",((_e,je)=>u._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(_e,je.source).removeTile(je)})))),this.actor.registerMessageHandler("GCEZ",((_e,je)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(_e,je.type,je.source).getClusterExpansionZoom(je)})))),this.actor.registerMessageHandler("GCC",((_e,je)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(_e,je.type,je.source).getClusterChildren(je)})))),this.actor.registerMessageHandler("GCL",((_e,je)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(_e,je.type,je.source).getClusterLeaves(je)})))),this.actor.registerMessageHandler("LD",((_e,je)=>this._getWorkerSource(_e,je.type,je.source).loadData(je))),this.actor.registerMessageHandler("GD",((_e,je)=>this._getWorkerSource(_e,je.type,je.source).getData())),this.actor.registerMessageHandler("LT",((_e,je)=>this._getWorkerSource(_e,je.type,je.source).loadTile(je))),this.actor.registerMessageHandler("RT",((_e,je)=>this._getWorkerSource(_e,je.type,je.source).reloadTile(je))),this.actor.registerMessageHandler("AT",((_e,je)=>this._getWorkerSource(_e,je.type,je.source).abortTile(je))),this.actor.registerMessageHandler("RMT",((_e,je)=>this._getWorkerSource(_e,je.type,je.source).removeTile(je))),this.actor.registerMessageHandler("RS",((_e,je)=>u._(this,void 0,void 0,(function*(){if(!this.workerSources[_e]||!this.workerSources[_e][je.type]||!this.workerSources[_e][je.type][je.source])return;const Ge=this.workerSources[_e][je.type][je.source];delete this.workerSources[_e][je.type][je.source],Ge.removeSource!==void 0&&Ge.removeSource(je)})))),this.actor.registerMessageHandler("RM",(_e=>u._(this,void 0,void 0,(function*(){delete this.layerIndexes[_e],delete this.availableImages[_e],delete this.workerSources[_e],delete this.demWorkerSources[_e],this.globalStates.delete(_e)})))),this.actor.registerMessageHandler("SR",((_e,je)=>u._(this,void 0,void 0,(function*(){this.referrer=je})))),this.actor.registerMessageHandler("SRPS",((_e,je)=>this._syncRTLPluginState(_e,je))),this.actor.registerMessageHandler("IS",((_e,je)=>u._(this,void 0,void 0,(function*(){this.self.importScripts(je)})))),this.actor.registerMessageHandler("SI",((_e,je)=>this._setImages(_e,je))),this.actor.registerMessageHandler("UL",((_e,je)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(_e).update(je.layers,je.removedIds,this._getGlobalState(_e))})))),this.actor.registerMessageHandler("UGS",((_e,je)=>u._(this,void 0,void 0,(function*(){const Ge=this._getGlobalState(_e);for(const He in je)Ge[He]=je[He]})))),this.actor.registerMessageHandler("SL",((_e,je)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(_e).replace(je,this._getGlobalState(_e))}))))}_getGlobalState(Ae){let _e=this.globalStates.get(Ae);return _e||(_e={},this.globalStates.set(Ae,_e)),_e}_setImages(Ae,_e){return u._(this,void 0,void 0,(function*(){this.availableImages[Ae]=_e;for(const je in this.workerSources[Ae]){const Ge=this.workerSources[Ae][je];for(const He in Ge)Ge[He].availableImages=_e}}))}_syncRTLPluginState(Ae,_e){return u._(this,void 0,void 0,(function*(){return yield u.d4.syncState(_e,this.self.importScripts)}))}_getAvailableImages(Ae){let _e=this.availableImages[Ae];return _e||(_e=[]),_e}_getLayerIndex(Ae){let _e=this.layerIndexes[Ae];return _e||(_e=this.layerIndexes[Ae]=new a),_e}_getWorkerSource(Ae,_e,je){if(this.workerSources[Ae]||(this.workerSources[Ae]={}),this.workerSources[Ae][_e]||(this.workerSources[Ae][_e]={}),!this.workerSources[Ae][_e][je]){const Ge={sendAsync:(He,Dt)=>(He.targetMapId=Ae,this.actor.sendAsync(He,Dt))};switch(_e){case"vector":this.workerSources[Ae][_e][je]=new M(Ge,this._getLayerIndex(Ae),this._getAvailableImages(Ae));break;case"geojson":this.workerSources[Ae][_e][je]=new br(Ge,this._getLayerIndex(Ae),this._getAvailableImages(Ae));break;default:this.workerSources[Ae][_e][je]=new this.externalWorkerSourceTypes[_e](Ge,this._getLayerIndex(Ae),this._getAvailableImages(Ae))}}return this.workerSources[Ae][_e][je]}_getDEMWorkerSource(Ae,_e){return this.demWorkerSources[Ae]||(this.demWorkerSources[Ae]={}),this.demWorkerSources[Ae][_e]||(this.demWorkerSources[Ae][_e]=new D),this.demWorkerSources[Ae][_e]}}return u.i(self)&&(self.worker=new Kt(self)),Kt})),i("index",["exports","./shared"],(function(u,a){var f="5.16.0";function p(){var L=new a.A(4);return a.A!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L}let g,b,S;const _={frame(L,l,h){const x=requestAnimationFrame((R=>{C(),l(R)})),{unsubscribe:C}=a.s(L.signal,"abort",(()=>{C(),cancelAnimationFrame(x),h(new a.a(L.signal.reason))}),!1)},frameAsync(L){return new Promise(((l,h)=>{this.frame(L,l,h)}))},getImageData(L,l=0){return this.getImageCanvasContext(L).getImageData(-l,-l,L.width+2*l,L.height+2*l)},getImageCanvasContext(L){const l=window.document.createElement("canvas"),h=l.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return l.width=L.width,l.height=L.height,h.drawImage(L,0,0,L.width,L.height),h},resolveURL:L=>(g||(g=document.createElement("a")),g.href=L,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return S!==void 0?S:!!matchMedia&&(b==null&&(b=matchMedia("(prefers-reduced-motion: reduce)")),b.matches)},set prefersReducedMotion(L){S=L}},P=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(L){this._frozenAt=L}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function k(){return P.getCurrentTime()}class M{static testProp(l){if(!M.docStyle)return l[0];for(let h=0;h<l.length;h++)if(l[h]in M.docStyle)return l[h];return l[0]}static create(l,h,x){const C=window.document.createElement(l);return h!==void 0&&(C.className=h),x&&x.appendChild(C),C}static createNS(l,h){return window.document.createElementNS(l,h)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(l,h){l.style[M.transformProp]=h}static addEventListener(l,h,x,C={}){l.addEventListener(h,x,"passive"in C?C:C.capture)}static removeEventListener(l,h,x,C={}){l.removeEventListener(h,x,"passive"in C?C:C.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",M.suppressClickInternal,!0)}),0)}static getScale(l){const h=l.getBoundingClientRect();return{x:h.width/l.offsetWidth||1,y:h.height/l.offsetHeight||1,boundingClientRect:h}}static getPoint(l,h,x){const C=h.boundingClientRect;return new a.P((x.clientX-C.left)/h.x-l.clientLeft,(x.clientY-C.top)/h.y-l.clientTop)}static mousePos(l,h){const x=M.getScale(l);return M.getPoint(l,x,h)}static touchPos(l,h){const x=[],C=M.getScale(l);for(let R=0;R<h.length;R++)x.push(M.getPoint(l,C,h[R]));return x}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const h=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),x=h.querySelectorAll("script");for(const C of x)C.remove();return M.clean(h),h.innerHTML}static isPossiblyDangerous(l,h){const x=h.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!x.includes("javascript:")&&!x.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const h=l.children;for(const x of h)M.removeAttributes(x),M.clean(x)}static removeAttributes(l){for(const{name:h,value:x}of l.attributes)M.isPossiblyDangerous(h,x)&&l.removeAttribute(h)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const D={supported:!1,testSupport:function(L){!N&&B&&($?V(L):F=L)}};let F,B,N=!1,$=!1;function V(L){const l=L.createTexture();L.bindTexture(L.TEXTURE_2D,l);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,B),L.isContextLost())return;D.supported=!0}catch{}L.deleteTexture(l),N=!0}var U;typeof document<"u"&&(B=document.createElement("img"),B.onload=()=>{F&&V(F),F=null,$=!0},B.onerror=()=>{N=!0,F=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(L){let l,h,x,C;L.resetRequestQueue=()=>{l=[],h=0,x=0,C={}},L.addThrottleControl=te=>{const le=x++;return C[le]=te,le},L.removeThrottleControl=te=>{delete C[te],z()},L.getImage=(te,le,pe=!0)=>new Promise(((Ie,Te)=>{D.supported&&(te.headers||(te.headers={}),te.headers.accept="image/webp,*/*"),a.e(te,{type:"image"}),l.push({abortController:le,requestParameters:te,supportImageRefresh:pe,state:"queued",onError:qe=>{Te(qe)},onSuccess:qe=>{Ie(qe)}}),z()}));const R=te=>a._(this,void 0,void 0,(function*(){te.state="running";const{requestParameters:le,supportImageRefresh:pe,onError:Ie,onSuccess:Te,abortController:qe}=te,Ze=pe===!1&&!a.i(self)&&!a.g(le.url)&&(!le.headers||Object.keys(le.headers).reduce(((pt,_t)=>pt&&_t==="accept"),!0));h++;const ft=Ze?W(le,qe):a.m(le,qe);try{const pt=yield ft;delete te.abortController,te.state="completed",pt.data instanceof HTMLImageElement||a.b(pt.data)?Te(pt):pt.data&&Te({data:yield(mt=pt.data,typeof createImageBitmap=="function"?a.f(mt):a.h(mt)),cacheControl:pt.cacheControl,expires:pt.expires})}catch(pt){delete te.abortController,Ie(pt)}finally{h--,z()}var mt})),z=()=>{const te=(()=>{for(const le of Object.keys(C))if(C[le]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let le=h;le<te&&l.length>0;le++){const pe=l.shift();pe.abortController.signal.aborted?le--:R(pe)}},W=(te,le)=>new Promise(((pe,Ie)=>{const Te=new Image,qe=te.url,Ze=te.credentials;Ze&&Ze==="include"?Te.crossOrigin="use-credentials":(Ze&&Ze==="same-origin"||!a.d(qe))&&(Te.crossOrigin="anonymous"),le.signal.addEventListener("abort",(()=>{Te.src="",Ie(new a.a(le.signal.reason))})),Te.fetchPriority="high",Te.onload=()=>{Te.onerror=Te.onload=null,pe({data:Te})},Te.onerror=()=>{Te.onerror=Te.onload=null,le.signal.aborted||Ie(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Te.src=qe}))})(U||(U={})),U.resetRequestQueue();class X{constructor(l){this._transformRequestFn=l??null}transformRequest(l,h){return this._transformRequestFn&&this._transformRequestFn(l,h)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function Z(L){const l=[];if(typeof L=="string")l.push({id:"default",url:L});else if(L&&L.length>0){const h=[];for(const{id:x,url:C}of L){const R=`${x}${C}`;h.indexOf(R)===-1&&(h.push(R),l.push({id:x,url:C}))}}return l}function oe(L,l,h){try{const x=new URL(L);return x.pathname+=`${l}${h}`,x.toString()}catch{throw new Error(`Invalid sprite URL "${L}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function re(L){const{userImage:l}=L;return!!(l&&l.render&&l.render())&&(L.data.replace(new Uint8Array(l.data.buffer)),!0)}class H extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const l of Object.keys(this.images))this.removeImage(l);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:h,promiseResolve:x}of this.requestors)x(this._getImagesForIds(h));this.requestors=[]}}getImage(l){const h=this.images[l];if(h&&!h.data&&h.spriteData){const x=h.spriteData;h.data=new a.R({width:x.width,height:x.height},x.context.getImageData(x.x,x.y,x.width,x.height).data),h.spriteData=null}return h}addImage(l,h){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,h)&&(this.images[l]=h)}_validate(l,h){let x=!0;const C=h.data||h.spriteData;return this._validateStretch(h.stretchX,C&&C.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),x=!1),this._validateStretch(h.stretchY,C&&C.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),x=!1),this._validateContent(h.content,h)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),x=!1),x}_validateStretch(l,h){if(!l)return!0;let x=0;for(const C of l){if(C[0]<x||C[1]<C[0]||h<C[1])return!1;x=C[1]}return!0}_validateContent(l,h){if(!l)return!0;if(l.length!==4)return!1;const x=h.spriteData,C=x&&x.width||h.data.width,R=x&&x.height||h.data.height;return!(l[0]<0||C<l[0]||l[1]<0||R<l[1]||l[2]<0||C<l[2]||l[3]<0||R<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,h,x=!0){const C=this.getImage(l);if(x&&(C.data.width!==h.data.width||C.data.height!==h.data.height))throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=C.version+1,this.images[l]=h,this.updatedImages[l]=!0}removeImage(l){const h=this.images[l];delete this.images[l],delete this.patterns[l],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((h,x)=>{let C=!0;if(!this.isLoaded())for(const R of l)this.images[R]||(C=!1);this.isLoaded()||C?h(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:h})}))}_getImagesForIds(l){const h={};for(const x of l){let C=this.getImage(x);C||(this.fire(new a.l("styleimagemissing",{id:x})),C=this.getImage(x)),C?h[x]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,textFitWidth:C.textFitWidth,textFitHeight:C.textFitHeight,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){const{width:l,height:h}=this.atlasImage;return{width:l,height:h}}getPattern(l){const h=this.patterns[l],x=this.getImage(l);if(!x)return null;if(h&&h.position.version===x.version)return h.position;if(h)h.position.version=x.version;else{const C={w:x.data.width+2,h:x.data.height+2,x:0,y:0},R=new a.I(C,x);this.patterns[l]={bin:C,position:R}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const h=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(l,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const R in this.patterns)l.push(this.patterns[R].bin);const{w:h,h:x}=a.p(l),C=this.atlasImage;C.resize({width:h||1,height:x||1});for(const R in this.patterns){const{bin:z}=this.patterns[R],W=z.x+1,te=z.y+1,le=this.getImage(R).data,pe=le.width,Ie=le.height;a.R.copy(le,C,{x:0,y:0},{x:W,y:te},{width:pe,height:Ie}),a.R.copy(le,C,{x:0,y:Ie-1},{x:W,y:te-1},{width:pe,height:1}),a.R.copy(le,C,{x:0,y:0},{x:W,y:te+Ie},{width:pe,height:1}),a.R.copy(le,C,{x:pe-1,y:0},{x:W-1,y:te},{width:1,height:Ie}),a.R.copy(le,C,{x:0,y:0},{x:W+pe,y:te},{width:1,height:Ie})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const h of l){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const x=this.getImage(h);x||a.w(`Image with ID: "${h}" was not found`),re(x)&&this.updateImage(h,x)}}cloneImages(){const l={};for(const h in this.images){const x=this.images[h];l[h]=Object.assign(Object.assign({},x),{data:x.data?x.data.clone():null})}return l}}const ae=1e20;function se(L,l,h,x,C,R,z,W,te){for(let le=l;le<l+x;le++)de(L,h*R+le,R,C,z,W,te);for(let le=h;le<h+C;le++)de(L,le*R+l,1,x,z,W,te)}function de(L,l,h,x,C,R,z){R[0]=0,z[0]=-ae,z[1]=ae,C[0]=L[l];for(let W=1,te=0,le=0;W<x;W++){C[W]=L[l+W*h];const pe=W*W;do{const Ie=R[te];le=(C[W]-C[Ie]+pe-Ie*Ie)/(W-Ie)/2}while(le<=z[te]&&--te>-1);te++,R[te]=W,z[te]=le,z[te+1]=ae}for(let W=0,te=0;W<x;W++){for(;z[te+1]<W;)te++;const le=R[te],pe=W-le;L[l+W*h]=C[le]+pe*pe}}const fe=a.v.layout_symbol["text-font"].default.join(",");class Le{constructor(l,h,x){this.requestManager=l,this.localIdeographFontFamily=h,this.entries={},this.lang=x}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const h=[];for(const R in l)for(const z of l[R])h.push(this._getAndCacheGlyphsPromise(R,z));const x=yield Promise.all(h),C={};for(const{stack:R,id:z,glyph:W}of x)C[R]||(C[R]={}),C[R][z]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics};return C}))}_getAndCacheGlyphsPromise(l,h){return a._(this,void 0,void 0,(function*(){let x=this.entries[l];x||(x=this.entries[l]={glyphs:{},requests:{},ranges:{}});let C=x.glyphs[h];return C!==void 0?{stack:l,id:h,glyph:C}:!this.url||this._charUsesLocalIdeographFontFamily(h)?(C=x.glyphs[h]=this._drawGlyph(x,l,h),{stack:l,id:h,glyph:C}):yield this._downloadAndCacheRangePromise(l,h)}))}_downloadAndCacheRangePromise(l,h){return a._(this,void 0,void 0,(function*(){const x=this.entries[l],C=Math.floor(h/256);if(x.ranges[C])return{stack:l,id:h,glyph:null};if(!x.requests[C]){const R=Le.loadGlyphRange(l,C,this.url,this.requestManager);x.requests[C]=R}try{const R=yield x.requests[C];for(const z in R)x.glyphs[+z]=R[+z];return x.ranges[C]=!0,{stack:l,id:h,glyph:R[h]||null}}catch(R){const z=x.glyphs[h]=this._drawGlyph(x,l,h);return this._warnOnMissingGlyphRange(z,C,h,R),{stack:l,id:h,glyph:z}}}))}_warnOnMissingGlyphRange(l,h,x,C){const R=256*h,z=R+255,W=x.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${h}, ${R}-${z}. Rendering codepoint U+${W} locally instead. ${C}`)}_charUsesLocalIdeographFontFamily(l){return!!this.localIdeographFontFamily&&a.q(l)}_drawGlyph(l,h,x){const C=h===fe&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(x),R=C?"ideographTinySDF":"tinySDF";l[R]||(l[R]=this._createTinySDF(C?this.localIdeographFontFamily:h));const z=l[R].draw(String.fromCodePoint(x)),W=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(x));return{id:x,bitmap:new a.r({width:z.width||60,height:z.height||60},z.data),metrics:{width:W?0:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:W?0:z.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(l){const h=l?l.split(","):[];h.push("sans-serif");const x=h.map((C=>/[-\w]+/.test(C)?C:`'${CSS.escape(C)}'`)).join(",");return new Le.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:x,fontWeight:this._fontWeight(h[0]),fontStyle:this._fontStyle(h[0]),lang:this.lang})}_fontStyle(l){return/italic/i.test(l)?"italic":/oblique/i.test(l)?"oblique":"normal"}_fontWeight(l){const h={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let x;for(const[C,R]of Object.entries(h))new RegExp(`\\b${C}\\b`,"i").test(l)&&(x=`${R}`);return x}destroy(){for(const l in this.entries){const h=this.entries[l];h.tinySDF&&(h.tinySDF=null),h.ideographTinySDF&&(h.ideographTinySDF=null),h.glyphs={},h.requests={},h.ranges={}}this.entries={}}}Le.loadGlyphRange=function(L,l,h,x){return a._(this,void 0,void 0,(function*(){const C=256*l,R=C+255,z=x.transformRequest(h.replace("{fontstack}",L).replace("{range}",`${C}-${R}`),"Glyphs"),W=yield a.n(z,new AbortController);if(!W||!W.data)throw new Error(`Could not load glyph range. range: ${l}, ${C}-${R}`);const te={};for(const le of a.o(W.data))te[le.id]=le;return te}))},Le.TinySDF=class{constructor({fontSize:L=24,buffer:l=3,radius:h=8,cutoff:x=.25,fontFamily:C="sans-serif",fontWeight:R="normal",fontStyle:z="normal",lang:W=null}={}){this.buffer=l,this.cutoff=x,this.radius=h,this.lang=W;const te=this.size=L+4*l,le=this._createCanvas(te),pe=this.ctx=le.getContext("2d",{willReadFrequently:!0});pe.font=`${z} ${R} ${L}px ${C}`,pe.textBaseline="alphabetic",pe.textAlign="left",pe.fillStyle="black",this.gridOuter=new Float64Array(te*te),this.gridInner=new Float64Array(te*te),this.f=new Float64Array(te),this.z=new Float64Array(te+1),this.v=new Uint16Array(te)}_createCanvas(L){const l=document.createElement("canvas");return l.width=l.height=L,l}draw(L){const{width:l,actualBoundingBoxAscent:h,actualBoundingBoxDescent:x,actualBoundingBoxLeft:C,actualBoundingBoxRight:R}=this.ctx.measureText(L),z=Math.ceil(h),W=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(R-C))),te=Math.min(this.size-this.buffer,z+Math.ceil(x)),le=W+2*this.buffer,pe=te+2*this.buffer,Ie=Math.max(le*pe,0),Te=new Uint8ClampedArray(Ie),qe={data:Te,width:le,height:pe,glyphWidth:W,glyphHeight:te,glyphTop:z,glyphLeft:0,glyphAdvance:l};if(W===0||te===0)return qe;const{ctx:Ze,buffer:ft,gridInner:mt,gridOuter:pt}=this;this.lang&&(Ze.lang=this.lang),Ze.clearRect(ft,ft,W,te),Ze.fillText(L,ft,ft+z);const _t=Ze.getImageData(ft,ft,W,te);pt.fill(ae,0,Ie),mt.fill(0,0,Ie);for(let Lt=0;Lt<te;Lt++)for(let xt=0;xt<W;xt++){const Rt=_t.data[4*(Lt*W+xt)+3]/255;if(Rt===0)continue;const Bt=(Lt+ft)*le+xt+ft;if(Rt===1)pt[Bt]=0,mt[Bt]=ae;else{const Mt=.5-Rt;pt[Bt]=Mt>0?Mt*Mt:0,mt[Bt]=Mt<0?Mt*Mt:0}}se(pt,0,0,le,pe,le,this.f,this.v,this.z),se(mt,ft,ft,W,te,le,this.f,this.v,this.z);for(let Lt=0;Lt<Ie;Lt++){const xt=Math.sqrt(pt[Lt])-Math.sqrt(mt[Lt]);Te[Lt]=Math.round(255-255*(xt/this.radius+this.cutoff))}return qe}};class ye{constructor(){this.specification=a.u.light.position}possiblyEvaluate(l,h){return a.F(l.expression.evaluate(h))}interpolate(l,h,x){return{x:a.G.number(l.x,h.x,x),y:a.G.number(l.y,h.y,x),z:a.G.number(l.z,h.z,x)}}}let xe;class Se extends a.E{constructor(l){super(),xe=xe||new a.t({anchor:new a.D(a.u.light.anchor),position:new ye,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(xe,void 0),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h={}){if(!this._validate(a.y,l,h))for(const x in l){const C=l[x];x.endsWith(a.z)?this._transitionable.setTransition(x.slice(0,-a.z.length),C):this._transitionable.setValue(x,C)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,x){return(!x||x.validate!==!1)&&a.B(this,l.call(a.C,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}const Re=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class he extends a.E{constructor(l){super(),this._transitionable=new a.x(Re,void 0),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(l,h={}){if(!this._validate(a.J,l,h)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const x in l){const C=l[x];x.endsWith(a.z)?this._transitionable.setTransition(x.slice(0,-a.z.length),C):this._transitionable.setValue(x,C)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,x={}){return x?.validate!==!1&&a.B(this,l.call(a.C,a.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Ee{constructor(l,h){this.width=l,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,h){const x=l.join(",")+String(h);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(l,h)),this.dashEntry[x]}getDashRanges(l,h,x){const C=[];let R=l.length%2==1?-l[l.length-1]*x:0,z=l[0]*x,W=!0;C.push({left:R,right:z,isDash:W,zeroLength:l[0]===0});let te=l[0];for(let le=1;le<l.length;le++){W=!W;const pe=l[le];R=te*x,te+=pe,z=te*x,C.push({left:R,right:z,isDash:W,zeroLength:pe===0})}return C}addRoundDash(l,h,x){const C=h/2;for(let R=-x;R<=x;R++){const z=this.width*(this.nextRow+x+R);let W=0,te=l[W];for(let le=0;le<this.width;le++){le/te.right>1&&(te=l[++W]);const pe=Math.abs(le-te.left),Ie=Math.abs(le-te.right),Te=Math.min(pe,Ie);let qe;const Ze=R/x*(C+1);if(te.isDash){const ft=C-Math.abs(Ze);qe=Math.sqrt(Te*Te+ft*ft)}else qe=C-Math.sqrt(Te*Te+Ze*Ze);this.data[z+le]=Math.max(0,Math.min(255,qe+128))}}}addRegularDash(l){for(let W=l.length-1;W>=0;--W){const te=l[W],le=l[W+1];te.zeroLength?l.splice(W,1):le&&le.isDash===te.isDash&&(le.left=te.left,l.splice(W,1))}const h=l[0],x=l[l.length-1];h.isDash===x.isDash&&(h.left=x.left-this.width,x.right=h.right+this.width);const C=this.width*this.nextRow;let R=0,z=l[R];for(let W=0;W<this.width;W++){W/z.right>1&&(z=l[++R]);const te=Math.abs(W-z.left),le=Math.abs(W-z.right),pe=Math.min(te,le);this.data[C+W]=Math.max(0,Math.min(255,(z.isDash?pe:-pe)+128))}}addDash(l,h){const x=h?7:0,C=2*x+1;if(this.nextRow+C>this.height)return a.w("LineAtlas out of space"),null;let R=0;for(let W=0;W<l.length;W++)R+=l[W];if(R!==0){const W=this.width/R,te=this.getDashRanges(l,this.width,W);h?this.addRoundDash(te,W,x):this.addRegularDash(te)}const z={y:this.nextRow+x,height:2*x,width:R};return this.nextRow+=C,this.dirty=!0,z}bind(l){const h=l.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}const we="maplibre_preloaded_worker_pool";class Ne{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Ne.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((h=>{h.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[we]}numActive(){return Object.keys(this.active).length}}const Fe=Math.floor(_.hardwareConcurrency/2);let Xe,Be;function ot(){return Xe||(Xe=new Ne),Xe}Ne.workerCount=a.K(globalThis)?Math.max(Math.min(Fe,3),1):1;class Ke{constructor(l,h){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=h;const x=this.workerPool.acquire(h);for(let C=0;C<x.length;C++){const R=new a.L(x[C],h);R.name=`Worker ${C}`,this.actors.push(R)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,h){const x=[];for(const C of this.actors)x.push(C.sendAsync({type:l,data:h}));return Promise.all(x)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((h=>{h.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,h){for(const x of this.actors)x.registerMessageHandler(l,h)}unregisterMessageHandler(l){for(const h of this.actors)h.unregisterMessageHandler(l)}}function it(){return Be||(Be=new Ke(ot(),a.M),Be.registerMessageHandler("GR",((L,l,h)=>a.m(l,h)))),Be}function ke(L,l){const h=a.N();return a.O(h,h,[1,1,0]),a.Q(h,h,[.5*L.width,.5*L.height,1]),L.calculatePosMatrix?a.S(h,h,L.calculatePosMatrix(l.toUnwrapped())):h}function Nt(L,l,h,x,C,R,z){var W;const te=(function(Te,qe,Ze){if(Te)for(const ft of Te){const mt=qe[ft];if(mt&&mt.source===Ze&&mt.type==="fill-extrusion")return!0}else for(const ft in qe){const mt=qe[ft];if(mt.source===Ze&&mt.type==="fill-extrusion")return!0}return!1})((W=C?.layers)!==null&&W!==void 0?W:null,l,L.id),le=R.maxPitchScaleFactor(),pe=L.tilesIn(x,le,te);pe.sort(st);const Ie=[];for(const Te of pe)Ie.push({wrappedTileID:Te.tileID.wrapped().key,queryResults:Te.tile.queryRenderedFeatures(l,h,L.getState(),Te.queryGeometry,Te.cameraQueryGeometry,Te.scale,C,R,le,ke(R,Te.tileID),z?(qe,Ze)=>z(Te.tileID,qe,Ze):void 0)});return(function(Te,qe){for(const Ze in Te)for(const ft of Te[Ze])$e(ft,qe);return Te})((function(Te){const qe={},Ze={};for(const ft of Te){const mt=ft.queryResults,pt=ft.wrappedTileID,_t=Ze[pt]=Ze[pt]||{};for(const Lt in mt){const xt=mt[Lt],Rt=_t[Lt]=_t[Lt]||{},Bt=qe[Lt]=qe[Lt]||[];for(const Mt of xt)Rt[Mt.featureIndex]||(Rt[Mt.featureIndex]=!0,Bt.push(Mt))}}return qe})(Ie),L)}function st(L,l){const h=L.tileID,x=l.tileID;return h.overscaledZ-x.overscaledZ||h.canonical.y-x.canonical.y||h.wrap-x.wrap||h.canonical.x-x.canonical.x}function $e(L,l){const h=L.feature,x=l.getFeatureState(h.layer["source-layer"],h.id);h.source=h.layer.source,h.layer["source-layer"]&&(h.sourceLayer=h.layer["source-layer"]),h.state=x}function Zt(L,l,h){return a._(this,void 0,void 0,(function*(){let x=L;if(L.url?x=(yield a.j(l.transformRequest(L.url,"Source"),h)).data:yield _.frameAsync(h),!x)return null;const C=a.U(a.e(x,L),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in x&&x.vector_layers&&(C.vectorLayerIds=x.vector_layers.map((R=>R.id))),C}))}class $t{constructor(l,h){l&&(h?this.setSouthWest(l).setNorthEast(h):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.V?new a.V(l.lng,l.lat):a.V.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.V?new a.V(l.lng,l.lat):a.V.convert(l),this}extend(l){const h=this._sw,x=this._ne;let C,R;if(l instanceof a.V)C=l,R=l;else{if(!(l instanceof $t))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend($t.convert(l)):this.extend(a.V.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.V.convert(l)):this;if(C=l._sw,R=l._ne,!C||!R)return this}return h||x?(h.lng=Math.min(C.lng,h.lng),h.lat=Math.min(C.lat,h.lat),x.lng=Math.max(R.lng,x.lng),x.lat=Math.max(R.lat,x.lat)):(this._sw=new a.V(C.lng,C.lat),this._ne=new a.V(R.lng,R.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:h,lat:x}=a.V.convert(l);let C=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&C}intersects(l){if(!((l=$t.convert(l)).getNorth()>=this.getSouth()&&l.getSouth()<=this.getNorth()))return!1;const h=Math.abs(this.getEast()-this.getWest()),x=Math.abs(l.getEast()-l.getWest());if(h>=360||x>=360)return!0;const C=a.W(this.getWest(),-180,180),R=a.W(this.getEast(),-180,180),z=a.W(l.getWest(),-180,180),W=a.W(l.getEast(),-180,180),te=C>=R,le=z>=W;return!(!te||!le)||(te?W>=C||z<=R:le?R>=z||C<=W:z<=R&&W>=C)}static convert(l){return l instanceof $t?l:l&&new $t(l)}static fromLngLat(l,h=0){const x=360*h/40075017,C=x/Math.cos(Math.PI/180*l.lat);return new $t(new a.V(l.lng-C,l.lat-x),new a.V(l.lng+C,l.lat+x))}adjustAntiMeridian(){const l=new a.V(this._sw.lng,this._sw.lat),h=new a.V(this._ne.lng,this._ne.lat);return new $t(l,l.lng>h.lng?new a.V(h.lng+360,h.lat):h)}}class Wt{constructor(l,h,x){this.bounds=$t.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=x||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),x=Math.floor(a.Y(this.bounds.getWest())*h),C=Math.floor(a.X(this.bounds.getNorth())*h),R=Math.ceil(a.Y(this.bounds.getEast())*h),z=Math.ceil(a.X(this.bounds.getSouth())*h);return l.x>=x&&l.x<R&&l.y>=C&&l.y<z}}class ht extends a.E{constructor(l,h,x,C){if(super(),this.id=l,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(h,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield Zt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new Wt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,a.Z(l)||this.fire(new a.k(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x={request:this.map._requestManager.transformRequest(h,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(l)};x.request.collectResourceTiming=this._collectResourceTiming;let C="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((R,z)=>{l.reloadPromise={resolve:R,reject:z}}))}else l.actor=this.dispatcher.getActor(),C="LT";l.abortController=new AbortController;try{const R=yield l.actor.sendAsync({type:C,data:x},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,R)}catch(R){if(delete l.abortController,l.aborted)return;if(R&&R.status!==404)throw R;this._afterTileLoadWorkerResponse(l,null)}}))}_getOverzoomParameters(l){if(l.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const h=l.tileID.scaledTo(this.maxzoom).canonical,x=h.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:h,overzoomRequest:this.map._requestManager.transformRequest(x,"Tile")}}_afterTileLoadWorkerResponse(l,h){if(h&&h.resourceTiming&&(l.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&l.setExpiryData(h),l.loadVectorData(h,this.map.painter),l.reloadPromise){const x=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(x.resolve).catch(x.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class sr extends a.E{constructor(l,h,x,C){super(),this.id=l,this.dispatcher=x,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},h),a.e(this,a.U(h,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const h=yield Zt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,h&&(a.e(this,h),h.bounds&&(this.tileBounds=new Wt(h.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(h){this._tileJSONRequest=null,this._loaded=!0,a.Z(h)||this.fire(new a.k(h))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const x=yield U.getImage(this.map._requestManager.transformRequest(h,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(x&&x.data){this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&l.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});const C=this.map.painter.context,R=C.gl,z=x.data;l.texture=this.map.painter.getTileTexture(z.width),l.texture?l.texture.update(z,{useMipmap:!0}):(l.texture=new a.T(C,z,R.RGBA,{useMipmap:!0}),l.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(x){if(delete l.abortController,l.aborted)l.state="unloaded";else if(x)throw l.state="errored",x}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class cr extends sr{constructor(l,h,x,C){super(l,h,x,C),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x=this.map._requestManager.transformRequest(h,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const C=yield U.getImage(x,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){const R=C.data;this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const z=a.b(R)&&a.$()?R:yield this.readImageNow(R),W={type:this.type,uid:l.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const te=yield l.actor.sendAsync({type:"LDT",data:W});l.dem=te,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.a0()){const h=l.width+2,x=l.height+2;try{return new a.R({width:h,height:x},yield a.a1(l,-1,-1,h,x))}catch{}}return _.getImageData(l,1)}))}_getNeighboringTiles(l){const h=l.canonical,x=Math.pow(2,h.z),C=(h.x-1+x)%x,R=h.x===0?l.wrap-1:l.wrap,z=(h.x+1+x)%x,W=h.x+1===x?l.wrap+1:l.wrap,te={};return te[new a.a2(l.overscaledZ,R,h.z,C,h.y).key]={backfilled:!1},te[new a.a2(l.overscaledZ,W,h.z,z,h.y).key]={backfilled:!1},h.y>0&&(te[new a.a2(l.overscaledZ,R,h.z,C,h.y-1).key]={backfilled:!1},te[new a.a2(l.overscaledZ,l.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},te[new a.a2(l.overscaledZ,W,h.z,z,h.y-1).key]={backfilled:!1}),h.y+1<x&&(te[new a.a2(l.overscaledZ,R,h.z,C,h.y+1).key]={backfilled:!1},te[new a.a2(l.overscaledZ,l.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},te[new a.a2(l.overscaledZ,W,h.z,z,h.y+1).key]={backfilled:!1}),te}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}function ir(L){return L.type==="GeometryCollection"?L.geometries.map((l=>l.coordinates)).flat(1/0):L.coordinates.flat(1/0)}function br(L){const l=new $t;let h;switch(L.type){case"FeatureCollection":h=L.features.map((x=>ir(x.geometry))).flat(1/0);break;case"Feature":h=ir(L.geometry);break;default:h=ir(L)}if(h.length==0)return l;for(let x=0;x<h.length-1;x+=2)l.extend([h[x],h[x+1]]);return l}class yr extends a.E{constructor(l,h,x,C){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:h.data},this.actor=x.getActor(),this.setEventedParent(C),this._data=typeof h.data=="string"?{url:h.data}:{geojson:h.data},this._options=a.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId,h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(h.buffer!==void 0?h.buffer:128),tolerance:this._pixelsToTileUnits(h.tolerance!==void 0?h.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(h.clusterMaxZoom),minPoints:Math.max(2,h.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(h.clusterRadius||50),log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(l){return l*(a.a5/this.tileSize)}_getClusterMaxZoom(l){const h=l?Math.round(l):this.maxzoom-1;return Number.isInteger(l)||l===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${l}" rounded to "${h}"`),h}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l,h){this._data=typeof l=="string"?{url:l}:{geojson:l},this._pendingWorkerUpdate={data:l};const x=this._updateWorkerData();return h?x:this}updateData(l,h){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,l);const x=this._updateWorkerData();return h?x:this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return br(yield this.getData())}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(l.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,h,x){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:h,offset:x}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:l,diff:h}=this._pendingWorkerUpdate,x=a.e({type:this.type},this.workerOptions);l!==void 0?(typeof l=="string"?(x.request=this.map._requestManager.transformRequest(_.resolveURL(l),"Source"),x.request.collectResourceTiming=this._collectResourceTiming):x.data=l,this._pendingWorkerUpdate.data=void 0):h&&(x.dataDiff=h,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:x});if(this._isUpdatingWorker=!1,this._removed||C.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));C.data&&(this._data={geojson:C.data});const R=this._applyDiffToSource(h),z=this._getShouldReloadTileOptions(R);let W=null;C.resourceTiming&&C.resourceTiming[this.id]&&(W=C.resourceTiming[this.id].slice(0));const te={dataType:"source"};this._collectResourceTiming&&W&&W.length>0&&a.e(te,{resourceTiming:W}),this.fire(new a.l("data",Object.assign(Object.assign({},te),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},te),{sourceDataType:"content",shouldReloadTileOptions:z})))}catch(C){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(C))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(l){if(!l)return;const h=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const C=a.a7(this._data.geojson,h);if(!C)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:C}}if(!this._data.updateable)return;const x=a.a8(this._data.updateable,l,h);return l.removeAll||this._options.cluster?void 0:x}_getShouldReloadTileOptions(l){if(l)return{affectedBounds:l.filter(Boolean).map((h=>br(h)))}}shouldReloadTile(l,{affectedBounds:h}){if(l.state==="loading")return!0;if(l.state==="unloaded")return!1;const{buffer:x,extent:C}=this.workerOptions.geojsonVtOptions,R=(function({x:z,y:W,z:te},le=0){const pe=a.a3((z-le)/Math.pow(2,te)),Ie=a.a4((W+1+le)/Math.pow(2,te)),Te=a.a3((z+1+le)/Math.pow(2,te)),qe=a.a4((W-le)/Math.pow(2,te));return new $t([pe,Ie],[Te,qe])})(l.tileID.canonical,x/C);for(const z of h)if(R.intersects(z))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.actor?"RT":"LT";l.actor=this.actor;const x={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const C=yield this.actor.sendAsync({type:h,data:x},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(C,this.map.painter,h==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Kt extends a.E{constructor(l,h,x,C){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=x,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=h}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const h=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,l&&(this.coordinates=l),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,a.Z(h)||this.fire(new a.k(h))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const h=l.map(a.a9.fromLngLat);var x;return this.tileID=(function(C){const R=a.aa.fromPoints(C),z=R.width(),W=R.height(),te=Math.max(z,W),le=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),pe=Math.pow(2,le);return new a.ac(le,Math.floor((R.minX+R.maxX)/2*pe),Math.floor((R.minY+R.maxY)/2*pe))})(h),this.terrainTileRanges=this._getOverlappingTileRanges(h),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=h.map((C=>this.tileID.getTilePoint(C)._round())),this.flippedWindingOrder=((x=this.tileCoords)[1].x-x[0].x)*(x[2].y-x[0].y)-(x[1].y-x[0].y)*(x[2].x-x[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,h=l.gl;this.texture||(this.texture=new a.T(l,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let x=!1;for(const C in this.tiles){const R=this.tiles[C];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){const{minX:h,minY:x,maxX:C,maxY:R}=a.aa.fromPoints(l),z={};for(let W=0;W<=a.ab;W++){const te=Math.pow(2,W),le=Math.floor(h*te),pe=Math.floor(x*te),Ie=Math.floor(C*te),Te=Math.floor(R*te),qe=(le%te+te)%te,Ze=Ie%te,ft=Math.floor(le/te),mt=Math.floor(Ie/te);z[W]={minWrap:ft,maxWrap:mt,minTileXWrapped:qe,maxTileXWrapped:Ze,minTileY:pe,maxTileY:Te}}return z}}class at extends Kt{constructor(l,h,x,C){super(l,h,x,C),this.roundZoom=!0,this.type="video",this.options=h}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const h of l.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{const h=yield a.ad(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new a.k(h))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const h=this.video.seekable;l<h.start(0)||l>h.end(0)?this.fire(new a.k(new a.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,h=l.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(l,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let x=!1;for(const C in this.tiles){const R=this.tiles[C];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ae extends Kt{constructor(l,h,x,C){super(l,h,x,C),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some((R=>!Array.isArray(R)||R.length!==2||R.some((z=>typeof z!="number"))))||this.fire(new a.k(new a.ae(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ae(`sources.${l}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new a.k(new a.ae(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ae(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ae(`sources.${l}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,x=h.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(h,this.canvas,x.RGBA,{premultiply:!0}),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE));let C=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const _e={},je=L=>{switch(L){case"geojson":return yr;case"image":return Kt;case"raster":return sr;case"raster-dem":return cr;case"vector":return ht;case"video":return at;case"canvas":return Ae}return _e[L]},Ge="RTLPluginLoaded";class He extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=it()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((h=>{throw this.status="error",h}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(h,x=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=_.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!x)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Ge))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Dt=null;function St(){return Dt||(Dt=new He),Dt}var yt,ct;(function(L){L[L.Base=0]="Base",L[L.Parent=1]="Parent"})(yt||(yt={})),(function(L){L[L.Departing=0]="Departing",L[L.Incoming=1]="Incoming"})(ct||(ct={}));class Jt{constructor(l,h){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=l,this.uid=a.af(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(l){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(l||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:l,fadingDirection:h,fadingParentID:x,fadeEndTime:C}){this.resetFadeLogic(),this.fadingRole=l,this.fadingDirection=h,this.fadingParentID=x,this.fadeEndTime=C}setSelfFadeLogic(l){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=l}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=k(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,h,x){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData,this.latestFeatureIndex.encoding=l.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(C,R){const z={};if(!R)return z;for(const W of C){const te=W.layerIds.map((le=>R.getLayer(le))).filter(Boolean);if(te.length!==0){W.layers=te,W.stateDependentLayerIds&&(W.stateDependentLayers=W.stateDependentLayerIds.map((le=>te.filter((pe=>pe.id===le))[0])));for(const le of te)z[le.id]=W}}return z})(l.buckets,h?.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const R=this.buckets[C];if(R instanceof a.ah){if(this.hasSymbolBuckets=!0,!x)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const R=this.buckets[C];if(R instanceof a.ah&&R.hasRTLText){this.hasRTLText=!0,St().lazyLoad();break}}this.queryPadding=0;for(const C in this.buckets){const R=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(C).queryRadius(R))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),this.dashPositions=l.dashPositions}else this.collisionBoxArray=new a.ag}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const x in this.buckets){const C=this.buckets[x];C.uploadPending()&&C.upload(l)}const h=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(l,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,h,x,C,R,z,W,te,le,pe,Ie){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:R,scale:z,tileSize:this.tileSize,pixelPosMatrix:pe,transform:te,params:W,queryPadding:this.queryPadding*le,getElevation:Ie},l,h,x):{}}querySourceFeatures(l,h){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const C=x.loadVTLayers(),R=h&&h.sourceLayer?h.sourceLayer:"",z=C[a.ai]||C[R];if(!z)return;const W=a.aj(h?.filter,h?.globalState),{z:te,x:le,y:pe}=this.tileID.canonical,Ie={z:te,x:le,y:pe};for(let Te=0;Te<z.length;Te++){const qe=z.feature(Te);if(W.needGeometry){const mt=a.ak(qe,!0);if(!W.filter(new a.H(this.tileID.overscaledZ),mt,this.tileID.canonical))continue}else if(!W.filter(new a.H(this.tileID.overscaledZ),qe))continue;const Ze=x.getId(qe,R),ft=new a.al(qe,te,le,pe,Ze);ft.tile=Ie,l.push(ft)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const h=this.expirationTime;if(l.cacheControl){const x=a.am(l.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const x=Date.now();let C=!1;if(this.expirationTime>x)C=!1;else if(h)if(this.expirationTime<h)C=!0;else{const R=this.expirationTime-h;R?this.expirationTime=x+Math.max(R,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const x=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!h.style.hasLayer(C))continue;const R=this.buckets[C],z=R.layers[0].sourceLayer||a.ai,W=x[z],te=l[z];if(!W||!te||Object.keys(te).length===0)continue;R.update(te,W,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const le=h&&h.style&&h.style.getLayer(C);le&&(this.queryPadding=Math.max(this.queryPadding,le.queryRadius(R)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<k()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(l){this.symbolFadeHoldUntil=k()+l}setDependencies(l,h){const x={};for(const C of h)x[C]=!0;this.dependencies[l]=x}hasDependency(l,h){for(const x of l){const C=this.dependencies[x];if(C){for(const R of h)if(C[R])return!0}}return!1}}class Vt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,h,x){const C=String(h);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][C]=this.stateChanges[l][C]||{},a.e(this.stateChanges[l][C],x),this.deletedStates[l]===null){this.deletedStates[l]={};for(const R in this.state[l])R!==C&&(this.deletedStates[l][R]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][C]===null){this.deletedStates[l][C]={};for(const R in this.state[l][C])x[R]||(this.deletedStates[l][C][R]=null)}else for(const R in x)this.deletedStates[l]&&this.deletedStates[l][C]&&this.deletedStates[l][C][R]===null&&delete this.deletedStates[l][C][R]}removeFeatureState(l,h,x){if(this.deletedStates[l]===null)return;const C=String(h);if(this.deletedStates[l]=this.deletedStates[l]||{},x&&h!==void 0)this.deletedStates[l][C]!==null&&(this.deletedStates[l][C]=this.deletedStates[l][C]||{},this.deletedStates[l][C][x]=null);else if(h!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][C])for(x in this.deletedStates[l][C]={},this.stateChanges[l][C])this.deletedStates[l][C][x]=null;else this.deletedStates[l][C]=null;else this.deletedStates[l]=null}getState(l,h){const x=String(h),C=a.e({},(this.state[l]||{})[x],(this.stateChanges[l]||{})[x]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const R=this.deletedStates[l][h];if(R===null)return{};for(const z in R)delete C[z]}return C}initializeTileState(l,h){l.setFeatureState(this.state,h)}coalesceChanges(l,h){const x={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const R={};for(const z in this.stateChanges[C])this.state[C][z]||(this.state[C][z]={}),a.e(this.state[C][z],this.stateChanges[C][z]),R[z]=this.state[C][z];x[C]=R}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const R={};if(this.deletedStates[C]===null)for(const z in this.state[C])R[z]={},this.state[C][z]={};else for(const z in this.deletedStates[C]){if(this.deletedStates[C][z]===null)this.state[C][z]={};else for(const W of Object.keys(this.deletedStates[C][z]))delete this.state[C][z][W];R[z]=this.state[C][z]}x[C]=x[C]||{},a.e(x[C],R)}this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0&&l.setFeatureState(x,h)}}const xr=89.25;function _r(L,l){const h=a.an(l.lat,-a.ao,a.ao);return new a.P(a.Y(l.lng)*L,a.X(h)*L)}function Nr(L,l){return new a.a9(l.x/L,l.y/L).toLngLat()}function tn(L){return L.cameraToCenterDistance*Math.min(.85*Math.tan(a.ap(90-L.pitch)),Math.tan(a.ap(xr-L.pitch)))}function Lr(L,l){const h=L.canonical,x=l/a.aq(h.z),C=h.x+Math.pow(2,h.z)*L.wrap,R=a.ar(new Float64Array(16));return a.O(R,R,[C*x,h.y*x,0]),a.Q(R,R,[x/a.a5,x/a.a5,1]),R}function kt(L,l,h,x,C){const R=a.a9.fromLngLat(L,l),z=C*a.as(1,L.lat),{x:W,y:te,z:le}=Hr(h,x);return new a.a9(R.x+z*-W,R.y+z*-te,R.z+z*-le)}function Hr(L,l){const h=a.ap(L),x=a.ap(l),C=Math.cos(-h),R=Math.sin(h);return{x:R*Math.sin(x),y:-R*Math.cos(x),z:C}}function kn(L,l,h){const x=l.intersectsFrustum(L);if(!h||x===0)return x;const C=l.intersectsPlane(h);return C===0?0:x===2&&C===2?2:1}function Ur(L,l,h){let x=0;const C=(h-l)/10;for(let R=0;R<10;R++)x+=C*Math.pow(Math.cos(l+(R+.5)/10*(h-l)),L);return x}function rr(L,l){return function(h,x,C,R,z){const W=2*((L-1)/a.at(Math.cos(a.ap(xr-z))/Math.cos(a.ap(xr)))-1),te=Math.acos(C/R),le=2*Ur(W-1,0,a.ap(z/2)),pe=Math.min(a.ap(xr),te+a.ap(z/2)),Ie=Ur(W-1,Math.min(pe,te-a.ap(z/2)),pe),Te=Math.atan(x/C),qe=Math.hypot(x,C);let Ze=h;return Ze+=a.at(R/qe/Math.max(.5,Math.cos(a.ap(z/2)))),Ze+=W*a.at(Math.cos(Te))/2,Ze-=a.at(Math.max(1,Ie/le/l))/2,Ze}}const Jn=rr(9.314,3);function en(L,l){const h=(l.roundZoom?Math.round:Math.floor)(L.zoom+a.at(L.tileSize/l.tileSize));return Math.max(0,h)}function Vn(L,l){const h=L.getCameraFrustum(),x=L.getClippingPlane(),C=L.screenPointToMercatorCoordinate(L.getCameraPoint()),R=a.a9.fromLngLat(L.center,L.elevation);C.z=R.z+Math.cos(L.pitchInRadians)*L.cameraToCenterDistance/L.worldSize;const z=L.getCoveringTilesDetailsProvider(),W=z.allowVariableZoom(L,l),te=en(L,l),le=l.minzoom||0,pe=l.maxzoom!==void 0?l.maxzoom:L.maxZoom,Ie=Math.min(Math.max(0,te),pe),Te=Math.pow(2,Ie),qe=[Te*C.x,Te*C.y,0],Ze=[Te*R.x,Te*R.y,0],ft=Math.hypot(R.x-C.x,R.y-C.y),mt=Math.abs(R.z-C.z),pt=Math.hypot(ft,mt),_t=Rt=>({zoom:0,x:0,y:0,wrap:Rt,fullyVisible:!1}),Lt=[],xt=[];if(L.renderWorldCopies&&z.allowWorldCopies())for(let Rt=1;Rt<=3;Rt++)Lt.push(_t(-Rt)),Lt.push(_t(Rt));for(Lt.push(_t(0));Lt.length>0;){const Rt=Lt.pop(),Bt=Rt.x,Mt=Rt.y;let Xt=Rt.fullyVisible;const gr={x:Bt,y:Mt,z:Rt.zoom},ur=z.getTileBoundingVolume(gr,Rt.wrap,L.elevation,l);if(!Xt){const Qr=kn(h,ur,x);if(Qr===0)continue;Xt=Qr===2}const hr=z.distanceToTile2d(C.x,C.y,gr,ur);let mr=te;W&&(mr=(l.calculateTileZoom||Jn)(L.zoom+a.at(L.tileSize/l.tileSize),hr,mt,pt,L.fov)),mr=(l.roundZoom?Math.round:Math.floor)(mr),mr=Math.max(0,mr);const Yr=Math.min(mr,pe);if(Rt.wrap=z.getWrap(R,gr,Rt.wrap),Rt.zoom>=Yr){if(Rt.zoom<le)continue;const Qr=Ie-Rt.zoom,Br=qe[0]-.5-(Bt<<Qr),on=qe[1]-.5-(Mt<<Qr),mi=l.reparseOverscaled?Math.max(Rt.zoom,mr):Rt.zoom;xt.push({tileID:new a.a2(Rt.zoom===pe?mi:Rt.zoom,Rt.wrap,Rt.zoom,Bt,Mt),distanceSq:a.au([Ze[0]-.5-Bt,Ze[1]-.5-Mt]),tileDistanceToCamera:Math.sqrt(Br*Br+on*on)})}else for(let Qr=0;Qr<4;Qr++)Lt.push({zoom:Rt.zoom+1,x:(Bt<<1)+Qr%2,y:(Mt<<1)+(Qr>>1),wrap:Rt.wrap,fullyVisible:Xt})}return xt.sort(((Rt,Bt)=>Rt.distanceSq-Bt.distanceSq)).map((Rt=>Rt.tileID))}const Me=a.aa.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function Ue(L){return L==="raster"||L==="image"||L==="video"}function Ct(L,l,h,x,C,R,z){if(!l.hasData())return!1;const{tileID:W,fadingRole:te,fadingDirection:le,fadingParentID:pe}=l;if(te===yt.Base&&le===ct.Incoming&&pe)return h[pe.key]=pe,!0;const Ie=Math.max(W.overscaledZ-C,R);for(let Te=W.overscaledZ-1;Te>=Ie;Te--){const qe=W.scaledTo(Te),Ze=L.getLoadedTile(qe);if(Ze)return l.setCrossFadeLogic({fadingRole:yt.Base,fadingDirection:ct.Incoming,fadingParentID:Ze.tileID,fadeEndTime:x+z}),Ze.setCrossFadeLogic({fadingRole:yt.Parent,fadingDirection:ct.Departing,fadeEndTime:x+z}),h[qe.key]=qe,!0}return!1}function Gt(L,l,h,x,C,R){if(!l.hasData())return!1;const z=l.tileID.children(C);let W=zt(L,l,z,h,x,C,R);if(W)return!0;for(const te of z)zt(L,l,te.children(C),h,x,C,R)&&(W=!0);return W}function zt(L,l,h,x,C,R,z){if(h[0].overscaledZ>=R)return!1;let W=!1;for(const te of h){const le=L.getLoadedTile(te);if(!le)continue;const{fadingRole:pe,fadingDirection:Ie,fadingParentID:Te}=le;pe===yt.Base&&Ie===ct.Departing&&Te||(le.setCrossFadeLogic({fadingRole:yt.Base,fadingDirection:ct.Departing,fadingParentID:l.tileID,fadeEndTime:C+z}),l.setCrossFadeLogic({fadingRole:yt.Parent,fadingDirection:ct.Incoming,fadeEndTime:C+z})),x[te.key]=te,W=!0}return W}function qr(L,l,h,x){const C=L.tileID;return!!L.selfFading||!L.hasData()&&!!l.has(C)&&(L.setSelfFadeLogic(h+x),!0)}function En(L,l){var h;L.needsHillshadePrepare=!0,L.needsTerrainPrepare=!0;let x=l.tileID.canonical.x-L.tileID.canonical.x;const C=l.tileID.canonical.y-L.tileID.canonical.y,R=Math.pow(2,L.tileID.canonical.z),z=l.tileID.key;x===0&&C===0||Math.abs(C)>1||(Math.abs(x)>1&&(Math.abs(x+R)===1?x+=R:Math.abs(x-R)===1&&(x-=R)),l.dem&&L.dem&&(L.dem.backfillBorder(l.dem,x,C),!((h=L.neighboringTiles)===null||h===void 0)&&h[z]&&(L.neighboringTiles[z].backfilled=!0)))}class Pi{constructor(){this._tiles={}}handleWrapJump(l){const h={};for(const x in this._tiles){const C=this._tiles[x];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+l),h[C.tileID.key]=C}this._tiles=h}setFeatureState(l,h){for(const x in this._tiles)this._tiles[x].setFeatureState(l,h)}getAllTiles(){return Object.values(this._tiles)}getAllIds(l=!1){return l?Object.values(this._tiles).map((h=>h.tileID)).sort(a.aw).map((h=>h.key)):Object.keys(this._tiles)}getTileById(l){return this._tiles[l]}setTile(l,h){this._tiles[l]=h}deleteTileById(l){delete this._tiles[l]}getLoadedTile(l){const h=this.getTileById(l.key);return h?.hasData()?h:null}isIdRenderable(l,h=!1){var x;return(x=this.getTileById(l))===null||x===void 0?void 0:x.isRenderable(h)}getRenderableIds(l=0,h){const x=[];for(const C of this.getAllIds())this.isIdRenderable(C,h)&&x.push(this.getTileById(C));return h?x.sort(((C,R)=>{const z=C.tileID,W=R.tileID,te=new a.P(z.canonical.x,z.canonical.y)._rotate(-l),le=new a.P(W.canonical.x,W.canonical.y)._rotate(-l);return z.overscaledZ-W.overscaledZ||le.y-te.y||le.x-te.x})).map((C=>C.tileID.key)):x.map((C=>C.tileID)).sort(a.aw).map((C=>C.key))}}class gi extends a.E{constructor(l,h,x){super(),this.id=l,this.dispatcher=x,this.on("data",(C=>this._dataHandler(C))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((C,R,z,W)=>{const te=new(je(R.type))(C,R,z,W);if(te.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${te.id}`);return te})(l,h,x,this),this._inViewTiles=new Pi,this._outOfViewCache=new a.ax(0,(C=>this._unloadTile(C))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Vt,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){for(const h of this._inViewTiles.getAllTiles())h.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l),this._inViewTiles=new Pi}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l of this._inViewTiles.getAllTiles())if(l.state!=="loaded"&&l.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,h,x){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,h,x)}catch(C){l.state="errored",C.status!==404?this._source.fire(new a.k(C,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const h of this._inViewTiles.getAllTiles())h.upload(l),h.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(l){var h;return this._inViewTiles.getRenderableIds((h=this.transform)===null||h===void 0?void 0:h.bearingInRadians,l)}hasRenderableParent(l){const h=l.overscaledZ-1;if(h>=this._source.minzoom){const x=this.getLoadedTile(l.scaledTo(h));if(x)return this._inViewTiles.isIdRenderable(x.tileID.key)}return!1}reload(l,h=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const x of this._inViewTiles.getAllIds()){const C=this._inViewTiles.getTileById(x);h&&!this._source.shouldReloadTile(C,h)||(l?this._reloadTile(x,"expired"):C.state!=="errored"&&this._reloadTile(x,"reloading"))}}}_reloadTile(l,h){return a._(this,void 0,void 0,(function*(){const x=this._inViewTiles.getTileById(l);x&&(x.state!=="loading"&&(x.state=h),yield this._loadTile(x,l,h))}))}_tileLoaded(l,h,x){l.timeAdded=k(),l.selfFading&&(l.fadeEndTime=l.timeAdded+this._rasterFadeDuration),x==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(h,l),this.getSource().type==="raster-dem"&&l.dem&&(function(C,R){var z,W;const te=R.getRenderableIds();for(const le of te){if(!C.neighboringTiles||!C.neighboringTiles[le])continue;const pe=R.getTileById(le);C.neighboringTiles[le].backfilled||En(C,pe),!((W=(z=pe.neighboringTiles)===null||z===void 0?void 0:z[C.tileID.key])===null||W===void 0)&&W.backfilled||En(pe,C)}})(l,this._inViewTiles),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._inViewTiles.getTileById(l)}_retainLoadedChildren(l,h){const x=this._getLoadedDescendents(h),C=new Set;for(const R of h){const z=x[R.key];if(!z?.length){C.add(R);continue}const W=R.overscaledZ+gi.maxOverzooming,te=z.filter((Ie=>Ie.tileID.overscaledZ<=W));if(!te.length){C.add(R);continue}const le=Math.min(...te.map((Ie=>Ie.tileID.overscaledZ))),pe=te.filter((Ie=>Ie.tileID.overscaledZ===le)).map((Ie=>Ie.tileID));for(const Ie of pe)l[Ie.key]=Ie;this._areDescendentsComplete(pe,le,R.overscaledZ)||C.add(R)}return C}_getLoadedDescendents(l){var h;const x={};for(const C of this._inViewTiles.getAllTiles().filter((R=>R.hasData())))for(const R of l)C.tileID.isChildOf(R)&&(x[h=R.key]||(x[h]=[])).push(C);return x}_areDescendentsComplete(l,h,x){return l.length===1&&l[0].isOverscaled()?l[0].overscaledZ===h:Math.pow(4,h-x)===l.length}getLoadedTile(l){return this._inViewTiles.getLoadedTile(l)}updateCacheSize(l){const h=Math.ceil(l.width/this._source.tileSize)+1,x=Math.ceil(l.height/this._source.tileSize)+1,C=Math.floor(h*x*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._outOfViewCache.setMaxSize(R)}handleWrapJump(l){const h=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);this._prevLng=l,h&&(this._inViewTiles.handleWrapJump(h),this._resetTileReloadTimers())}update(l,h){if(!this._sourceLoaded||this._paused)return;let x;this.transform=l,this.terrain=h,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?x=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((te=>new a.a2(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y))):(x=Vn(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?l.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(x=x.filter((te=>this._source.hasTile(te))))):x=[],this.usedForTerrain&&(x=this._addTerrainIdealTiles(x));const C=x.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=en(l,this._source),z=this._updateRetainedTiles(x,R),W=Ue(this._source.type);W&&this._rasterFadeDuration>0&&!h&&(function(te,le,pe,Ie,Te,qe,Ze){const ft=k(),mt=a.av(le);for(const pt of le){const _t=te.getTileById(pt.key);_t.fadingDirection!==ct.Departing&&_t.fadeOpacity!==0||_t.resetFadeLogic(),Ct(te,_t,pe,ft,Ie,Te,Ze)||Gt(te,_t,pe,ft,qe,Ze)||qr(_t,mt,ft,Ze)||_t.resetFadeLogic()}})(this._inViewTiles,x,z,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),W?this._cleanUpRasterTiles(z):this._cleanUpVectorTiles(z)}_cleanUpRasterTiles(l){for(const h of this._inViewTiles.getAllIds())l[h]||this._removeTile(h)}_cleanUpVectorTiles(l){for(const h of this._inViewTiles.getAllIds()){const x=this._inViewTiles.getTileById(h);l[h]?x.clearSymbolFadeHold():x.hasSymbolBuckets?x.holdingForSymbolFade()?x.symbolFadeFinished()&&this._removeTile(h):x.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(h)}}_addTerrainIdealTiles(l){const h=[];for(const x of l)if(x.canonical.z>this._source.minzoom){const C=x.scaledTo(x.canonical.z-1);h.push(C);const R=x.scaledTo(Math.max(this._source.minzoom,Math.min(x.canonical.z,5)));h.push(R)}return l.concat(h)}releaseSymbolFadeTiles(){for(const l of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(l).holdingForSymbolFade()&&this._removeTile(l)}_updateRetainedTiles(l,h){var x;const C=new Set;for(const le of l)this._addTile(le).hasData()||C.add(le);const R=l.reduce(((le,pe)=>(le[pe.key]=pe,le)),{}),z=this._retainLoadedChildren(R,C),W={},te=Math.max(h-gi.maxUnderzooming,this._source.minzoom);for(const le of z){let pe=this._inViewTiles.getTileById(le.key),Ie=pe?.wasRequested();for(let Te=le.overscaledZ-1;Te>=te;--Te){const qe=le.scaledTo(Te);if(W[qe.key])break;if(W[qe.key]=!0,pe=this.getTile(qe),!pe&&Ie&&(pe=this._addTile(qe)),pe){const Ze=pe.hasData();if((Ze||!(!((x=this.map)===null||x===void 0)&&x.cancelPendingTileRequestsWhileZooming)||Ie)&&(R[qe.key]=qe),Ie=pe.wasRequested(),Ze)break}}}return R}_addTile(l){let h=this._inViewTiles.getTileById(l.key);if(h)return h;h=this._outOfViewCache.getAndRemove(l),h&&(h.resetFadeLogic(),this._setTileReloadTimer(l.key,h),h.tileID=l,this._state.initializeTileState(h,this.map?this.map.painter:null));const x=h;return h||(h=new Jt(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(h,l.key,h.state)),h.uses++,this._inViewTiles.setTile(l.key,h),x||this._source.fire(new a.l("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(l,h){this._clearTileReloadTimer(l);const x=h.getExpiryTimeout();x&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),x))}_clearTileReloadTimer(l){const h=this._timers[l];h&&(clearTimeout(h),delete this._timers[l])}_resetTileReloadTimers(){for(const l in this._timers)clearTimeout(this._timers[l]),delete this._timers[l];for(const l of this._inViewTiles.getAllIds()){const h=this._inViewTiles.getTileById(l);this._setTileReloadTimer(l,h)}}refreshTiles(l){for(const h of this._inViewTiles.getAllIds()){const x=this._inViewTiles.getTileById(h);(this._inViewTiles.isIdRenderable(h)||x.state=="errored")&&l.some((C=>C.equals(x.tileID.canonical)))&&this._reloadTile(h,"expired")}}_removeTile(l){const h=this._inViewTiles.getTileById(l);h&&(h.uses--,this._inViewTiles.deleteTileById(l),this._clearTileReloadTimer(l),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._outOfViewCache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(l){l.dataType==="source"&&(l.sourceDataType!=="metadata"?l.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(l.sourceDataChanged,l.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l of this._inViewTiles.getAllIds())this._removeTile(l);this._outOfViewCache.reset()}tilesIn(l,h,x){const C=[],R=this.transform;if(!R)return C;const z=R.getCoveringTilesDetailsProvider().allowWorldCopies(),W=x?R.getCameraQueryGeometry(l):l,te=qe=>R.screenPointToMercatorCoordinate(qe,this.terrain),le=this.transformBbox(l,te,!z),pe=this.transformBbox(W,te,!z),Ie=this.getIds(),Te=a.aa.fromPoints(pe);for(let qe=0;qe<Ie.length;qe++){const Ze=this._inViewTiles.getTileById(Ie[qe]);if(Ze.holdingForSymbolFade())continue;const ft=z?[Ze.tileID]:[Ze.tileID.unwrapTo(-1),Ze.tileID.unwrapTo(0)],mt=Math.pow(2,R.zoom-Ze.tileID.overscaledZ),pt=h*Ze.queryPadding*a.a5/Ze.tileSize/mt;for(const _t of ft){const Lt=Te.map((xt=>_t.getTilePoint(new a.a9(xt.x,xt.y))));if(Lt.expandBy(pt),Lt.intersects(Me)){const xt=le.map((Bt=>_t.getTilePoint(Bt))),Rt=pe.map((Bt=>_t.getTilePoint(Bt)));C.push({tile:Ze,tileID:z?_t:_t.unwrapTo(0),queryGeometry:xt,cameraQueryGeometry:Rt,scale:mt})}}}return C}transformBbox(l,h,x){let C=l.map(h);if(x){const R=a.aa.fromPoints(l);R.shrinkBy(.001*Math.min(R.width(),R.height()));const z=R.map(h);a.aa.fromPoints(C).covers(z)||(C=C.map((W=>W.x>.5?new a.a9(W.x-1,W.y,W.z):W)))}return C}getVisibleCoordinates(l){const h=this.getRenderableIds(l).map((x=>this._inViewTiles.getTileById(x).tileID));return this.transform&&this.transform.populateCache(h),h}hasTransition(){return!!this._source.hasTransition()||!(!Ue(this._source.type)||!(function(l,h){if(h<=0)return!1;const x=k();for(const C of l.getAllTiles())if(C.fadeEndTime>=x)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(l){this._rasterFadeDuration=l}setFeatureState(l,h,x){this._state.updateState(l=l||a.ai,h,x)}removeFeatureState(l,h,x){this._state.removeFeatureState(l=l||a.ai,h,x)}getFeatureState(l,h){return this._state.getState(l=l||a.ai,h)}setDependencies(l,h,x){const C=this._inViewTiles.getTileById(l);C&&C.setDependencies(h,x)}reloadTilesForDependencies(l,h){for(const x of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(x).hasDependency(l,h)&&this._reloadTile(x,"reloading");this._outOfViewCache.filter((x=>!x.hasDependency(l,h)))}areTilesLoaded(){for(const l of this._inViewTiles.getAllTiles())if(l.state!=="loaded"&&l.state!=="errored")return!1;return!0}}gi.maxUnderzooming=10,gi.maxOverzooming=3;class kr{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.an(l,0,1);let h=1,x=this._distances[h];const C=l*this.paddedLength+this.padding;for(;x<C&&h<this._distances.length;)x=this._distances[++h];const R=h-1,z=this._distances[R],W=x-z,te=W>0?(C-z)/W:0;return this.points[R].mult(1-te).add(this.points[h].mult(te))}}function Sn(L,l){let h=!0;return L==="always"||L!=="never"&&l!=="never"||(h=!1),h}class Pn{constructor(l,h,x){const C=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(l/x),this.yCellCount=Math.ceil(h/x);for(let z=0;z<this.xCellCount*this.yCellCount;z++)C.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,x,C,R){this._forEachCell(h,x,C,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(x),this.bboxes.push(C),this.bboxes.push(R)}insertCircle(l,h,x,C){this._forEachCell(h-C,x-C,h+C,x+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(x),this.circles.push(C)}_insertBoxCell(l,h,x,C,R,z){this.boxCells[R].push(z)}_insertCircleCell(l,h,x,C,R,z){this.circleCells[R].push(z)}_query(l,h,x,C,R,z,W){if(x<0||l>this.width||C<0||h>this.height)return[];const te=[];if(l<=0&&h<=0&&this.width<=x&&this.height<=C){if(R)return[{key:null,x1:l,y1:h,x2:x,y2:C}];for(let le=0;le<this.boxKeys.length;le++)te.push({key:this.boxKeys[le],x1:this.bboxes[4*le],y1:this.bboxes[4*le+1],x2:this.bboxes[4*le+2],y2:this.bboxes[4*le+3]});for(let le=0;le<this.circleKeys.length;le++){const pe=this.circles[3*le],Ie=this.circles[3*le+1],Te=this.circles[3*le+2];te.push({key:this.circleKeys[le],x1:pe-Te,y1:Ie-Te,x2:pe+Te,y2:Ie+Te})}}else this._forEachCell(l,h,x,C,this._queryCell,te,{hitTest:R,overlapMode:z,seenUids:{box:{},circle:{}}},W);return te}query(l,h,x,C){return this._query(l,h,x,C,!1,null)}hitTest(l,h,x,C,R,z){return this._query(l,h,x,C,!0,R,z).length>0}hitTestCircle(l,h,x,C,R){const z=l-x,W=l+x,te=h-x,le=h+x;if(W<0||z>this.width||le<0||te>this.height)return!1;const pe=[];return this._forEachCell(z,te,W,le,this._queryCellCircle,pe,{hitTest:!0,overlapMode:C,circle:{x:l,y:h,radius:x},seenUids:{box:{},circle:{}}},R),pe.length>0}_queryCell(l,h,x,C,R,z,W,te){const{seenUids:le,hitTest:pe,overlapMode:Ie}=W,Te=this.boxCells[R];if(Te!==null){const Ze=this.bboxes;for(const ft of Te)if(!le.box[ft]){le.box[ft]=!0;const mt=4*ft,pt=this.boxKeys[ft];if(l<=Ze[mt+2]&&h<=Ze[mt+3]&&x>=Ze[mt+0]&&C>=Ze[mt+1]&&(!te||te(pt))&&(!pe||!Sn(Ie,pt.overlapMode))&&(z.push({key:pt,x1:Ze[mt],y1:Ze[mt+1],x2:Ze[mt+2],y2:Ze[mt+3]}),pe))return!0}}const qe=this.circleCells[R];if(qe!==null){const Ze=this.circles;for(const ft of qe)if(!le.circle[ft]){le.circle[ft]=!0;const mt=3*ft,pt=this.circleKeys[ft];if(this._circleAndRectCollide(Ze[mt],Ze[mt+1],Ze[mt+2],l,h,x,C)&&(!te||te(pt))&&(!pe||!Sn(Ie,pt.overlapMode))){const _t=Ze[mt],Lt=Ze[mt+1],xt=Ze[mt+2];if(z.push({key:pt,x1:_t-xt,y1:Lt-xt,x2:_t+xt,y2:Lt+xt}),pe)return!0}}}return!1}_queryCellCircle(l,h,x,C,R,z,W,te){const{circle:le,seenUids:pe,overlapMode:Ie}=W,Te=this.boxCells[R];if(Te!==null){const Ze=this.bboxes;for(const ft of Te)if(!pe.box[ft]){pe.box[ft]=!0;const mt=4*ft,pt=this.boxKeys[ft];if(this._circleAndRectCollide(le.x,le.y,le.radius,Ze[mt+0],Ze[mt+1],Ze[mt+2],Ze[mt+3])&&(!te||te(pt))&&!Sn(Ie,pt.overlapMode))return z.push(!0),!0}}const qe=this.circleCells[R];if(qe!==null){const Ze=this.circles;for(const ft of qe)if(!pe.circle[ft]){pe.circle[ft]=!0;const mt=3*ft,pt=this.circleKeys[ft];if(this._circlesCollide(Ze[mt],Ze[mt+1],Ze[mt+2],le.x,le.y,le.radius)&&(!te||te(pt))&&!Sn(Ie,pt.overlapMode))return z.push(!0),!0}}}_forEachCell(l,h,x,C,R,z,W,te){const le=this._convertToXCellCoord(l),pe=this._convertToYCellCoord(h),Ie=this._convertToXCellCoord(x),Te=this._convertToYCellCoord(C);for(let qe=le;qe<=Ie;qe++)for(let Ze=pe;Ze<=Te;Ze++)if(R.call(this,l,h,x,C,this.xCellCount*Ze+qe,z,W,te))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,x,C,R,z){const W=C-l,te=R-h,le=x+z;return le*le>W*W+te*te}_circleAndRectCollide(l,h,x,C,R,z,W){const te=(z-C)/2,le=Math.abs(l-(C+te));if(le>te+x)return!1;const pe=(W-R)/2,Ie=Math.abs(h-(R+pe));if(Ie>pe+x)return!1;if(le<=te||Ie<=pe)return!0;const Te=le-te,qe=Ie-pe;return Te*Te+qe*qe<=x*x}}function Un(L,l,h){const x=a.N();if(!L){const{vecSouth:Ie,vecEast:Te}=ea(l),qe=p();qe[0]=Te[0],qe[1]=Te[1],qe[2]=Ie[0],qe[3]=Ie[1],C=qe,(pe=(z=(R=qe)[0])*(le=R[3])-(te=R[2])*(W=R[1]))&&(C[0]=le*(pe=1/pe),C[1]=-W*pe,C[2]=-te*pe,C[3]=z*pe),x[0]=qe[0],x[1]=qe[1],x[4]=qe[2],x[5]=qe[3]}var C,R,z,W,te,le,pe;return a.Q(x,x,[1/h,1/h,1]),x}function Ki(L,l,h,x){if(L){const C=a.N();if(!l){const{vecSouth:R,vecEast:z}=ea(h);C[0]=z[0],C[1]=z[1],C[4]=R[0],C[5]=R[1]}return a.Q(C,C,[x,x,1]),C}return h.pixelsToClipSpaceMatrix}function ea(L){const l=Math.cos(L.rollInRadians),h=Math.sin(L.rollInRadians),x=Math.cos(L.pitchInRadians),C=Math.cos(L.bearingInRadians),R=Math.sin(L.bearingInRadians),z=a.aC();z[0]=-C*x*h-R*l,z[1]=-R*x*h+C*l;const W=a.aD(z);W<1e-9?a.aE(z):a.aF(z,z,1/W);const te=a.aC();te[0]=C*x*l-R*h,te[1]=R*x*l+C*h;const le=a.aD(te);return le<1e-9?a.aE(te):a.aF(te,te,1/le),{vecEast:te,vecSouth:z}}function An(L,l,h,x){let C;x?(C=[L,l,x(L,l),1],a.aH(C,C,h)):(C=[L,l,0,1],Ea(C,C,h));const R=C[3];return{point:new a.P(C[0]/R,C[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}function Ca(L,l){return .5+L/l*.5}function Ni(L,l){return L.x>=-l[0]&&L.x<=l[0]&&L.y>=-l[1]&&L.y<=l[1]}function Ho(L,l,h,x,C,R,z,W,te,le,pe,Ie,Te){const qe=h?L.textSizeData:L.iconSizeData,Ze=a.ay(qe,l.transform.zoom),ft=[256/l.width*2+1,256/l.height*2+1],mt=h?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;mt.clear();const pt=L.lineVertexArray,_t=h?L.text.placedSymbolArray:L.icon.placedSymbolArray,Lt=l.transform.width/l.transform.height;let xt=!1;for(let Rt=0;Rt<_t.length;Rt++){const Bt=_t.get(Rt);if(Bt.hidden||Bt.writingMode===a.az.vertical&&!xt){fl(Bt.numGlyphs,mt);continue}xt=!1;const Mt=new a.P(Bt.anchorX,Bt.anchorY),Xt={getElevation:Te,pitchedLabelPlaneMatrix:x,lineVertexArray:pt,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:Mt,unwrappedTileID:te,width:le,height:pe,translation:Ie},gr=na(Bt.anchorX,Bt.anchorY,Xt);if(!Ni(gr.point,ft)){fl(Bt.numGlyphs,mt);continue}const ur=Ca(l.transform.cameraToCenterDistance,gr.signedDistanceFromCamera),hr=a.aA(qe,Ze,Bt),mr=R?hr*l.transform.getPitchedTextCorrection(Bt.anchorX,Bt.anchorY,te)/ur:hr*ur,Yr=Oa({projectionContext:Xt,pitchedLabelPlaneMatrixInverse:C,symbol:Bt,fontSize:mr,flip:!1,keepUpright:z,glyphOffsetArray:L.glyphOffsetArray,dynamicLayoutVertexArray:mt,aspectRatio:Lt,rotateToLine:W});xt=Yr.useVertical,(Yr.notEnoughRoom||xt||Yr.needsFlipping&&Oa({projectionContext:Xt,pitchedLabelPlaneMatrixInverse:C,symbol:Bt,fontSize:mr,flip:!0,keepUpright:z,glyphOffsetArray:L.glyphOffsetArray,dynamicLayoutVertexArray:mt,aspectRatio:Lt,rotateToLine:W}).notEnoughRoom)&&fl(Bt.numGlyphs,mt)}h?L.text.dynamicLayoutVertexBuffer.updateData(mt):L.icon.dynamicLayoutVertexBuffer.updateData(mt)}function pa(L,l,h,x,C,R,z,W){const te=R.glyphStartIndex+R.numGlyphs,le=R.lineStartIndex,pe=R.lineStartIndex+R.lineLength,Ie=l.getoffsetX(R.glyphStartIndex),Te=l.getoffsetX(te-1),qe=ma(L*Ie,h,x,C,R.segment,le,pe,W,z);if(!qe)return null;const Ze=ma(L*Te,h,x,C,R.segment,le,pe,W,z);return Ze?W.projectionCache.anyProjectionOccluded?null:{first:qe,last:Ze}:null}function mo(L,l,h,x){return L===a.az.horizontal&&Math.abs(h.y-l.y)>Math.abs(h.x-l.x)*x?{useVertical:!0}:(L===a.az.vertical?l.y<h.y:l.x>h.x)?{needsFlipping:!0}:null}function Oa(L){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:h,symbol:x,fontSize:C,flip:R,keepUpright:z,glyphOffsetArray:W,dynamicLayoutVertexArray:te,aspectRatio:le,rotateToLine:pe}=L,Ie=C/24,Te=x.lineOffsetX*Ie,qe=x.lineOffsetY*Ie;let Ze;if(x.numGlyphs>1){const ft=x.glyphStartIndex+x.numGlyphs,mt=x.lineStartIndex,pt=x.lineStartIndex+x.lineLength,_t=pa(Ie,W,Te,qe,R,x,pe,l);if(!_t)return{notEnoughRoom:!0};const Lt=Ql(_t.first.point.x,_t.first.point.y,l,h),xt=Ql(_t.last.point.x,_t.last.point.y,l,h);if(z&&!R){const Rt=mo(x.writingMode,Lt,xt,le);if(Rt)return Rt}Ze=[_t.first];for(let Rt=x.glyphStartIndex+1;Rt<ft-1;Rt++){const Bt=ma(Ie*W.getoffsetX(Rt),Te,qe,R,x.segment,mt,pt,l,pe);if(!Bt)return{notEnoughRoom:!0};Ze.push(Bt)}Ze.push(_t.last)}else{if(z&&!R){const mt=Ai(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,pt=x.lineStartIndex+x.segment+1,_t=new a.P(l.lineVertexArray.getx(pt),l.lineVertexArray.gety(pt)),Lt=Ai(_t.x,_t.y,l),xt=Lt.signedDistanceFromCamera>0?Lt.point:zs(l.tileAnchorPoint,_t,mt,1,l),Rt=Ql(mt.x,mt.y,l,h),Bt=Ql(xt.x,xt.y,l,h),Mt=mo(x.writingMode,Rt,Bt,le);if(Mt)return Mt}const ft=ma(Ie*W.getoffsetX(x.glyphStartIndex),Te,qe,R,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,l,pe);if(!ft||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ze=[ft]}for(const ft of Ze)a.aG(te,ft.point,ft.angle);return{}}function zs(L,l,h,x,C){const R=L.add(L.sub(l)._unit()),z=Ai(R.x,R.y,C).point,W=h.sub(z);return h.add(W._mult(x/W.mag()))}function fi(L,l,h){const x=l.projectionCache;if(x.projections[L])return x.projections[L];const C=new a.P(l.lineVertexArray.getx(L),l.lineVertexArray.gety(L)),R=Ai(C.x,C.y,l);if(R.signedDistanceFromCamera>0)return x.projections[L]=R.point,x.anyProjectionOccluded=x.anyProjectionOccluded||R.isOccluded,R.point;const z=L-h.direction;return zs(h.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(z),l.lineVertexArray.gety(z)),C,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,l)}function Ai(L,l,h){const x=L+h.translation[0],C=l+h.translation[1];let R;return h.pitchWithMap?(R=An(x,C,h.pitchedLabelPlaneMatrix,h.getElevation),R.isOccluded=!1):(R=h.transform.projectTileCoordinates(x,C,h.unwrappedTileID,h.getElevation),R.point.x=(.5*R.point.x+.5)*h.width,R.point.y=(.5*-R.point.y+.5)*h.height),R}function Ql(L,l,h,x){if(h.pitchWithMap){const C=[L,l,0,1];return a.aH(C,C,x),h.transform.projectTileCoordinates(C[0]/C[3],C[1]/C[3],h.unwrappedTileID,h.getElevation).point}return{x:L/h.width*2-1,y:1-l/h.height*2}}function na(L,l,h){return h.transform.projectTileCoordinates(L,l,h.unwrappedTileID,h.getElevation)}function Na(L,l,h){return L._unit()._perp()._mult(l*h)}function Wo(L,l,h,x,C,R,z,W,te){if(W.projectionCache.offsets[L])return W.projectionCache.offsets[L];const le=h.add(l);if(L+te.direction<x||L+te.direction>=C)return W.projectionCache.offsets[L]=le,le;const pe=fi(L+te.direction,W,te),Ie=Na(pe.sub(h),z,te.direction),Te=h.add(Ie),qe=pe.add(Ie);return W.projectionCache.offsets[L]=a.aI(R,le,Te,qe)||le,W.projectionCache.offsets[L]}function ma(L,l,h,x,C,R,z,W,te){const le=x?L-l:L+l;let pe=le>0?1:-1,Ie=0;x&&(pe*=-1,Ie=Math.PI),pe<0&&(Ie+=Math.PI);let Te,qe=pe>0?R+C:R+C+1;W.projectionCache.cachedAnchorPoint?Te=W.projectionCache.cachedAnchorPoint:(Te=Ai(W.tileAnchorPoint.x,W.tileAnchorPoint.y,W).point,W.projectionCache.cachedAnchorPoint=Te);let Ze,ft,mt=Te,pt=Te,_t=0,Lt=0;const xt=Math.abs(le),Rt=[];let Bt;for(;_t+Lt<=xt;){if(qe+=pe,qe<R||qe>=z)return null;_t+=Lt,pt=mt,ft=Ze;const gr={absOffsetX:xt,direction:pe,distanceFromAnchor:_t,previousVertex:pt};if(mt=fi(qe,W,gr),h===0)Rt.push(pt),Bt=mt.sub(pt);else{let ur;const hr=mt.sub(pt);ur=hr.mag()===0?Na(fi(qe+pe,W,gr).sub(mt),h,pe):Na(hr,h,pe),ft||(ft=pt.add(ur)),Ze=Wo(qe,ur,mt,R,z,ft,h,W,gr),Rt.push(ft),Bt=Ze.sub(ft)}Lt=Bt.mag()}const Mt=Bt._mult((xt-_t)/Lt)._add(ft||pt),Xt=Ie+Math.atan2(mt.y-pt.y,mt.x-pt.x);return Rt.push(Mt),{point:Mt,angle:te?Xt:0,path:Rt}}const Xo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function fl(L,l){for(let h=0;h<L;h++){const x=l.length;l.resize(x+4),l.float32.set(Xo,3*x)}}function Ea(L,l,h){const x=l[0],C=l[1];return L[0]=h[0]*x+h[4]*C+h[12],L[1]=h[1]*x+h[5]*C+h[13],L[3]=h[3]*x+h[7]*C+h[15],L}const oa=100;class qu{constructor(l,h=new Pn(l.width+200,l.height+200,25),x=new Pn(l.width+200,l.height+200,25)){this.transform=l,this.grid=h,this.ignoredGrid=x,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+oa,this.screenBottomBoundary=l.height+oa,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,h,x,C,R,z,W,te,le,pe,Ie,Te){const qe=this.projectAndGetPerspectiveRatio(l.anchorPointX+te[0],l.anchorPointY+te[1],R,pe,Te),Ze=x*qe.perspectiveRatio;let ft;if(z||W)ft=this._projectCollisionBox(l,Ze,C,R,z,W,te,qe,pe,Ie,Te);else{const Bt=qe.x+(Ie?Ie.x*Ze:0),Mt=qe.y+(Ie?Ie.y*Ze:0);ft={allPointsOccluded:!1,box:[Bt+l.x1*Ze,Mt+l.y1*Ze,Bt+l.x2*Ze,Mt+l.y2*Ze]}}const[mt,pt,_t,Lt]=ft.box,xt=z?ft.allPointsOccluded:qe.isOccluded;let Rt=xt;return Rt||(Rt=qe.perspectiveRatio<this.perspectiveRatioCutoff),Rt||(Rt=!this.isInsideGrid(mt,pt,_t,Lt)),Rt||h!=="always"&&this.grid.hitTest(mt,pt,_t,Lt,h,le)?{box:[mt,pt,_t,Lt],placeable:!1,offscreen:!1,occluded:xt}:{box:[mt,pt,_t,Lt],placeable:!0,offscreen:this.isOffscreen(mt,pt,_t,Lt),occluded:xt}}placeCollisionCircles(l,h,x,C,R,z,W,te,le,pe,Ie,Te,qe,Ze){const ft=[],mt=new a.P(h.anchorX,h.anchorY),pt=this.getPerspectiveRatio(mt.x,mt.y,z,Ze),_t=(le?R*this.transform.getPitchedTextCorrection(h.anchorX,h.anchorY,z)/pt:R*pt)/a.aM,Lt={getElevation:Ze,pitchedLabelPlaneMatrix:W,lineVertexArray:x,pitchWithMap:le,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:mt,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:qe},xt=pa(_t,C,h.lineOffsetX*_t,h.lineOffsetY*_t,!1,h,!1,Lt);let Rt=!1,Bt=!1,Mt=!0;if(xt){const Xt=.5*Ie*pt+Te,gr=new a.P(-100,-100),ur=new a.P(this.screenRightBoundary,this.screenBottomBoundary),hr=new kr,mr=xt.first,Yr=xt.last;let Qr=[];for(let mi=mr.path.length-1;mi>=1;mi--)Qr.push(mr.path[mi]);for(let mi=1;mi<Yr.path.length;mi++)Qr.push(Yr.path[mi]);const Br=2.5*Xt;if(le){const mi=this.projectPathToScreenSpace(Qr,Lt);Qr=mi.some((ba=>ba.signedDistanceFromCamera<=0))?[]:mi.map((ba=>ba.point))}let on=[];if(Qr.length>0){const mi=Qr[0].clone(),ba=Qr[0].clone();for(let eo=1;eo<Qr.length;eo++)mi.x=Math.min(mi.x,Qr[eo].x),mi.y=Math.min(mi.y,Qr[eo].y),ba.x=Math.max(ba.x,Qr[eo].x),ba.y=Math.max(ba.y,Qr[eo].y);on=mi.x>=gr.x&&ba.x<=ur.x&&mi.y>=gr.y&&ba.y<=ur.y?[Qr]:ba.x<gr.x||mi.x>ur.x||ba.y<gr.y||mi.y>ur.y?[]:a.aJ([Qr],gr.x,gr.y,ur.x,ur.y)}for(const mi of on){hr.reset(mi,.25*Xt);let ba=0;ba=hr.length<=.5*Xt?1:Math.ceil(hr.paddedLength/Br)+1;for(let eo=0;eo<ba;eo++){const qa=eo/Math.max(ba-1,1),uo=hr.lerp(qa),Va=uo.x+oa,Ao=uo.y+oa;ft.push(Va,Ao,Xt,0);const co=Va-Xt,Ws=Ao-Xt,Jo=Va+Xt,jo=Ao+Xt;if(Mt=Mt&&this.isOffscreen(co,Ws,Jo,jo),Bt=Bt||this.isInsideGrid(co,Ws,Jo,jo),l!=="always"&&this.grid.hitTestCircle(Va,Ao,Xt,l,pe)&&(Rt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Rt}}}}return{circles:!te&&Rt||!Bt||pt<this.perspectiveRatioCutoff?[]:ft,offscreen:Mt,collisionDetected:Rt}}projectPathToScreenSpace(l,h){const x=(function(C,R){const z=a.N();return a.aB(z,R.pitchedLabelPlaneMatrix),C.map((W=>{const te=An(W.x,W.y,z,R.getElevation),le=R.transform.projectTileCoordinates(te.point.x,te.point.y,R.unwrappedTileID,R.getElevation);return le.point.x=(.5*le.point.x+.5)*R.width,le.point.y=(.5*-le.point.y+.5)*R.height,le}))})(l,h);return(function(C){let R=0,z=0,W=0,te=0;for(let le=0;le<C.length;le++)C[le].isOccluded?(W=le+1,te=0):(te++,te>z&&(z=te,R=W));return C.slice(R,R+z)})(x)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[],x=new a.aa;for(const Ie of l){const Te=new a.P(Ie.x+oa,Ie.y+oa);x.extend(Te),h.push(Te)}const{minX:C,minY:R,maxX:z,maxY:W}=x,te=this.grid.query(C,R,z,W).concat(this.ignoredGrid.query(C,R,z,W)),le={},pe={};for(const Ie of te){const Te=Ie.key;if(le[Te.bucketInstanceId]===void 0&&(le[Te.bucketInstanceId]={}),le[Te.bucketInstanceId][Te.featureIndex])continue;const qe=[new a.P(Ie.x1,Ie.y1),new a.P(Ie.x2,Ie.y1),new a.P(Ie.x2,Ie.y2),new a.P(Ie.x1,Ie.y2)];a.aK(h,qe)&&(le[Te.bucketInstanceId][Te.featureIndex]=!0,pe[Te.bucketInstanceId]===void 0&&(pe[Te.bucketInstanceId]=[]),pe[Te.bucketInstanceId].push(Te.featureIndex))}return pe}insertCollisionBox(l,h,x,C,R,z){(x?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:R,collisionGroupID:z,overlapMode:h},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,x,C,R,z){const W=x?this.ignoredGrid:this.grid,te={bucketInstanceId:C,featureIndex:R,collisionGroupID:z,overlapMode:h};for(let le=0;le<l.length;le+=4)W.insertCircle(te,l[le],l[le+1],l[le+2])}projectAndGetPerspectiveRatio(l,h,x,C,R){if(R){let z;C?(z=[l,h,C(l,h),1],a.aH(z,z,R)):(z=[l,h,0,1],Ea(z,z,R));const W=z[3];return{x:(z[0]/W+1)/2*this.transform.width+oa,y:(-z[1]/W+1)/2*this.transform.height+oa,perspectiveRatio:.5+this.transform.cameraToCenterDistance/W*.5,isOccluded:!1,signedDistanceFromCamera:W}}{const z=this.transform.projectTileCoordinates(l,h,x,C);return{x:(z.point.x+1)/2*this.transform.width+oa,y:(1-z.point.y)/2*this.transform.height+oa,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(l,h,x,C){const R=this.transform.projectTileCoordinates(l,h,x,C);return .5+this.transform.cameraToCenterDistance/R.signedDistanceFromCamera*.5}isOffscreen(l,h,x,C){return x<oa||l>=this.screenRightBoundary||C<oa||h>this.screenBottomBoundary}isInsideGrid(l,h,x,C){return x>=0&&l<this.gridRightBoundary&&C>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=a.ar([]);return a.O(l,l,[-100,-100,0]),l}_projectCollisionBox(l,h,x,C,R,z,W,te,le,pe,Ie){let Te=1,qe=0,Ze=0,ft=1;const mt=l.anchorPointX+W[0],pt=l.anchorPointY+W[1];if(z&&!R){const Qr=this.projectAndGetPerspectiveRatio(mt+1,pt,C,le,Ie),Br=Qr.x-te.x,on=Math.atan((Qr.y-te.y)/Br)+(Br<0?Math.PI:0),mi=Math.sin(on),ba=Math.cos(on);Te=ba,qe=mi,Ze=-mi,ft=ba}else if(!z&&R){const Qr=ea(this.transform);Te=Qr.vecEast[0],qe=Qr.vecEast[1],Ze=Qr.vecSouth[0],ft=Qr.vecSouth[1]}let _t=te.x,Lt=te.y,xt=h;R&&(_t=mt,Lt=pt,xt=Math.pow(2,-(this.transform.zoom-x.overscaledZ)),xt*=this.transform.getPitchedTextCorrection(mt,pt,C),pe||(xt*=a.an(.5+te.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),pe&&(_t+=Te*pe.x*xt+Ze*pe.y*xt,Lt+=qe*pe.x*xt+ft*pe.y*xt);const Rt=l.x1*xt,Bt=l.x2*xt,Mt=(Rt+Bt)/2,Xt=l.y1*xt,gr=l.y2*xt,ur=(Xt+gr)/2,hr=[{offsetX:Rt,offsetY:Xt},{offsetX:Mt,offsetY:Xt},{offsetX:Bt,offsetY:Xt},{offsetX:Bt,offsetY:ur},{offsetX:Bt,offsetY:gr},{offsetX:Mt,offsetY:gr},{offsetX:Rt,offsetY:gr},{offsetX:Rt,offsetY:ur}];let mr=[];for(const{offsetX:Qr,offsetY:Br}of hr)mr.push(new a.P(_t+Te*Qr+Ze*Br,Lt+qe*Qr+ft*Br));let Yr=!1;if(R){const Qr=mr.map((Br=>this.projectAndGetPerspectiveRatio(Br.x,Br.y,C,le,Ie)));Yr=Qr.some((Br=>!Br.isOccluded)),mr=Qr.map((Br=>new a.P(Br.x,Br.y)))}else Yr=!0;return{box:a.aL(mr),allPointsOccluded:!Yr}}}class js{constructor(l,h,x,C){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):C&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class No{constructor(l,h,x,C,R){this.text=new js(l?l.text:null,h,x,R),this.icon=new js(l?l.icon:null,h,C,R)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ua{constructor(l,h,x){this.text=l,this.icon=h,this.skipFade=x}}class Fo{constructor(l,h,x,C,R){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=x,this.bucketIndex=C,this.tileID=R}}class Ta{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:x=>x.collisionGroupID===h}}return this.collisionGroups[l]}}function bs(L,l,h,x,C){const{horizontalAlign:R,verticalAlign:z}=a.aS(L);return new a.P(-(R-.5)*l+x[0]*C,-(z-.5)*h+x[1]*C)}class ac{constructor(l,h,x,C,R){this.transform=l.clone(),this.terrain=h,this.collisionIndex=new qu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=x,this.retainedQueryData={},this.collisionGroups=new Ta(C),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const h=this.terrain;return h?(x,C)=>h.getElevation(l,x,C):null}getBucketParts(l,h,x,C){const R=x.getBucket(h),z=x.latestFeatureIndex;if(!R||!z||h.id!==R.layerIds[0])return;const W=x.collisionBoxArray,te=R.layers[0].layout,le=R.layers[0].paint,pe=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),Ie=x.tileSize/a.a5,Te=x.tileID.toUnwrapped(),qe=te.get("text-rotation-alignment")==="map",Ze=a.aN(x,1,this.transform.zoom),ft=a.aO(this.collisionIndex.transform,x,le.get("text-translate"),le.get("text-translate-anchor")),mt=a.aO(this.collisionIndex.transform,x,le.get("icon-translate"),le.get("icon-translate-anchor")),pt=Un(qe,this.transform,Ze);this.retainedQueryData[R.bucketInstanceId]=new Fo(R.bucketInstanceId,z,R.sourceLayerIndex,R.index,x.tileID);const _t={bucket:R,layout:te,translationText:ft,translationIcon:mt,unwrappedTileID:Te,pitchedLabelPlaneMatrix:pt,scale:pe,textPixelRatio:Ie,holdingForFade:x.holdingForSymbolFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:a.ay(R.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(C)for(const Lt of R.sortKeyRanges){const{sortKey:xt,symbolInstanceStart:Rt,symbolInstanceEnd:Bt}=Lt;l.push({sortKey:xt,symbolInstanceStart:Rt,symbolInstanceEnd:Bt,parameters:_t})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:_t})}attemptAnchorPlacement(l,h,x,C,R,z,W,te,le,pe,Ie,Te,qe,Ze,ft,mt,pt,_t,Lt,xt){const Rt=a.aP[l.textAnchor],Bt=[l.textOffset0,l.textOffset1],Mt=bs(Rt,x,C,Bt,R),Xt=this.collisionIndex.placeCollisionBox(h,Te,te,le,pe,W,z,mt,Ie.predicate,Lt,Mt,xt);if((!_t||this.collisionIndex.placeCollisionBox(_t,Te,te,le,pe,W,z,pt,Ie.predicate,Lt,Mt,xt).placeable)&&Xt.placeable){let gr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(gr=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:Bt,width:x,height:C,anchor:Rt,textBoxScale:R,prevAnchor:gr},this.markUsedJustification(Ze,Rt,qe,ft),Ze.allowVerticalPlacement&&(this.markUsedOrientation(Ze,ft,qe),this.placedOrientations[qe.crossTileID]=ft),{shift:Mt,placedGlyphBoxes:Xt}}}placeLayerBucketPart(l,h,x){const{bucket:C,layout:R,translationText:z,translationIcon:W,unwrappedTileID:te,pitchedLabelPlaneMatrix:le,textPixelRatio:pe,holdingForFade:Ie,collisionBoxArray:Te,partiallyEvaluatedTextSize:qe,collisionGroup:Ze}=l.parameters,ft=R.get("text-optional"),mt=R.get("icon-optional"),pt=a.aQ(R,"text-overlap","text-allow-overlap"),_t=pt==="always",Lt=a.aQ(R,"icon-overlap","icon-allow-overlap"),xt=Lt==="always",Rt=R.get("text-rotation-alignment")==="map",Bt=R.get("text-pitch-alignment")==="map",Mt=R.get("icon-text-fit")!=="none",Xt=R.get("symbol-z-order")==="viewport-y",gr=_t&&(xt||!C.hasIconData()||mt),ur=xt&&(_t||!C.hasTextData()||ft);!C.collisionArrays&&Te&&C.deserializeCollisionBoxes(Te);const hr=this.retainedQueryData[C.bucketInstanceId].tileID,mr=this._getTerrainElevationFunc(hr),Yr=this.transform.getFastPathSimpleProjectionMatrix(hr),Qr=(Br,on,mi)=>{var ba,eo;if(h[Br.crossTileID])return;if(Ie)return void(this.placements[Br.crossTileID]=new Ua(!1,!1,!1));let qa=!1,uo=!1,Va=!0,Ao=null,co={box:null,placeable:!1,offscreen:null,occluded:!1},Ws={placeable:!1},Jo=null,jo=null,sl=null,Kd=0,pd=0,Fc=0;on.textFeatureIndex?Kd=on.textFeatureIndex:Br.useRuntimeCollisionCircles&&(Kd=Br.featureIndex),on.verticalTextFeatureIndex&&(pd=on.verticalTextFeatureIndex);const cu=on.textBox;if(cu){const $u=Wa=>{let $a=a.az.horizontal;if(C.allowVerticalPlacement&&!Wa&&this.prevPlacement){const ks=this.prevPlacement.placedOrientations[Br.crossTileID];ks&&(this.placedOrientations[Br.crossTileID]=ks,$a=ks,this.markUsedOrientation(C,$a,Br))}return $a},Bc=(Wa,$a)=>{if(C.allowVerticalPlacement&&Br.numVerticalGlyphVertices>0&&on.verticalTextBox){for(const ks of C.writingModes)if(ks===a.az.vertical?(co=$a(),Ws=co):co=Wa(),co&&co.placeable)break}else co=Wa()},cc=Br.textAnchorOffsetStartIndex,dc=Br.textAnchorOffsetEndIndex;if(dc===cc){const Wa=($a,ks)=>{const Ms=this.collisionIndex.placeCollisionBox($a,pt,pe,hr,te,Bt,Rt,z,Ze.predicate,mr,void 0,Yr);return Ms&&Ms.placeable&&(this.markUsedOrientation(C,ks,Br),this.placedOrientations[Br.crossTileID]=ks),Ms};Bc((()=>Wa(cu,a.az.horizontal)),(()=>{const $a=on.verticalTextBox;return C.allowVerticalPlacement&&Br.numVerticalGlyphVertices>0&&$a?Wa($a,a.az.vertical):{box:null,offscreen:null}})),$u(co&&co.placeable)}else{let Wa=a.aP[(eo=(ba=this.prevPlacement)===null||ba===void 0?void 0:ba.variableOffsets[Br.crossTileID])===null||eo===void 0?void 0:eo.anchor];const $a=(Ms,mb,gb)=>{const jf=Ms.x2-Ms.x1,fS=Ms.y2-Ms.y1,yb=Br.textBoxScale,vv=Mt&&Lt==="never"?mb:null;let Jd=null,Qd=pt==="never"?1:2,ef="never";Wa&&Qd++;for(let bv=0;bv<Qd;bv++){for(let _v=cc;_v<dc;_v++){const rg=C.textAnchorOffsets.get(_v);if(Wa&&rg.textAnchor!==Wa)continue;const ng=this.attemptAnchorPlacement(rg,Ms,jf,fS,yb,Rt,Bt,pe,hr,te,Ze,ef,Br,C,gb,z,W,vv,mr);if(ng&&(Jd=ng.placedGlyphBoxes,Jd&&Jd.placeable))return qa=!0,Ao=ng.shift,Jd}Wa?Wa=null:ef=pt}return x&&!Jd&&(Jd={box:this.collisionIndex.placeCollisionBox(cu,"always",pe,hr,te,Bt,Rt,z,Ze.predicate,mr,void 0,Yr).box,offscreen:!1,placeable:!1,occluded:!1}),Jd};Bc((()=>$a(cu,on.iconBox,a.az.horizontal)),(()=>{const Ms=on.verticalTextBox;return C.allowVerticalPlacement&&(!co||!co.placeable)&&Br.numVerticalGlyphVertices>0&&Ms?$a(Ms,on.verticalIconBox,a.az.vertical):{box:null,occluded:!0,offscreen:null}})),co&&(qa=co.placeable,Va=co.offscreen);const ks=$u(co&&co.placeable);if(!qa&&this.prevPlacement){const Ms=this.prevPlacement.variableOffsets[Br.crossTileID];Ms&&(this.variableOffsets[Br.crossTileID]=Ms,this.markUsedJustification(C,Ms.anchor,Br,ks))}}}if(Jo=co,qa=Jo&&Jo.placeable,Va=Jo&&Jo.offscreen,Br.useRuntimeCollisionCircles&&Br.centerJustifiedTextSymbolIndex>=0){const $u=C.text.placedSymbolArray.get(Br.centerJustifiedTextSymbolIndex),Bc=a.aA(C.textSizeData,qe,$u),cc=R.get("text-padding");jo=this.collisionIndex.placeCollisionCircles(pt,$u,C.lineVertexArray,C.glyphOffsetArray,Bc,te,le,x,Bt,Ze.predicate,Br.collisionCircleDiameter,cc,z,mr),jo.circles.length&&jo.collisionDetected&&!x&&a.w("Collisions detected, but collision boxes are not shown"),qa=_t||jo.circles.length>0&&!jo.collisionDetected,Va=Va&&jo.offscreen}if(on.iconFeatureIndex&&(Fc=on.iconFeatureIndex),on.iconBox){const $u=Bc=>this.collisionIndex.placeCollisionBox(Bc,Lt,pe,hr,te,Bt,Rt,W,Ze.predicate,mr,Mt&&Ao?Ao:void 0,Yr);Ws&&Ws.placeable&&on.verticalIconBox?(sl=$u(on.verticalIconBox),uo=sl.placeable):(sl=$u(on.iconBox),uo=sl.placeable),Va=Va&&sl.offscreen}const Bf=ft||Br.numHorizontalGlyphVertices===0&&Br.numVerticalGlyphVertices===0,Np=mt||Br.numIconVertices===0;Bf||Np?Np?Bf||(uo=uo&&qa):qa=uo&&qa:uo=qa=uo&&qa;const zf=uo&&sl.placeable;if(qa&&Jo.placeable&&this.collisionIndex.insertCollisionBox(Jo.box,pt,R.get("text-ignore-placement"),C.bucketInstanceId,Ws&&Ws.placeable&&pd?pd:Kd,Ze.ID),zf&&this.collisionIndex.insertCollisionBox(sl.box,Lt,R.get("icon-ignore-placement"),C.bucketInstanceId,Fc,Ze.ID),jo&&qa&&this.collisionIndex.insertCollisionCircles(jo.circles,pt,R.get("text-ignore-placement"),C.bucketInstanceId,Kd,Ze.ID),x&&this.storeCollisionData(C.bucketInstanceId,mi,on,Jo,sl,jo),Br.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Br.crossTileID]=new Ua((qa||gr)&&!Jo?.occluded,(uo||ur)&&!sl?.occluded,Va||C.justReloaded),h[Br.crossTileID]=!0};if(Xt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Br=C.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let on=Br.length-1;on>=0;--on){const mi=Br[on];Qr(C.symbolInstances.get(mi),C.collisionArrays[mi],mi)}}else for(let Br=l.symbolInstanceStart;Br<l.symbolInstanceEnd;Br++)Qr(C.symbolInstances.get(Br),C.collisionArrays[Br],Br);C.justReloaded=!1}storeCollisionData(l,h,x,C,R,z){if(x.textBox||x.iconBox){let W,te;this.collisionBoxArrays.has(l)?W=this.collisionBoxArrays.get(l):(W=new Map,this.collisionBoxArrays.set(l,W)),W.has(h)?te=W.get(h):(te={text:null,icon:null},W.set(h,te)),x.textBox&&(te.text=C.box),x.iconBox&&(te.icon=R.box)}if(z){let W=this.collisionCircleArrays[l];W===void 0&&(W=this.collisionCircleArrays[l]=[]);for(let te=0;te<z.circles.length;te+=4)W.push(z.circles[te+0]-oa),W.push(z.circles[te+1]-oa),W.push(z.circles[te+2]),W.push(z.collisionDetected?1:0)}}markUsedJustification(l,h,x,C){let R;R=C===a.az.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[a.aR(h)];const z=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];for(const W of z)W>=0&&(l.text.placedSymbolArray.get(W).crossTileID=R>=0&&W!==R?0:x.crossTileID)}markUsedOrientation(l,h,x){const C=h===a.az.horizontal||h===a.az.horizontalOnly?h:0,R=h===a.az.vertical?h:0,z=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];for(const W of z)l.text.placedSymbolArray.get(W).placedOrientation=C;x.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=R)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let x=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const C=h?h.symbolFadeChange(l):1,R=h?h.opacities:{},z=h?h.variableOffsets:{},W=h?h.placedOrientations:{};for(const te in this.placements){const le=this.placements[te],pe=R[te];pe?(this.opacities[te]=new No(pe,C,le.text,le.icon),x=x||le.text!==pe.text.placed||le.icon!==pe.icon.placed):(this.opacities[te]=new No(null,C,le.text,le.icon,le.skipFade),x=x||le.text||le.icon)}for(const te in R){const le=R[te];if(!this.opacities[te]){const pe=new No(le,C,!1,!1);pe.isHidden()||(this.opacities[te]=pe,x=x||le.text.placed||le.icon.placed)}}for(const te in z)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=z[te]);for(const te in W)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=W[te]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");x?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const x={};for(const C of h){const R=C.getBucket(l);R&&C.latestFeatureIndex&&l.id===R.layerIds[0]&&this.updateBucketOpacities(R,C.tileID,x,C.collisionBoxArray)}}updateBucketOpacities(l,h,x,C){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const R=l.layers[0],z=R.layout,W=new No(null,0,!1,!1,!0),te=z.get("text-allow-overlap"),le=z.get("icon-allow-overlap"),pe=R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ie=z.get("text-rotation-alignment")==="map",Te=z.get("text-pitch-alignment")==="map",qe=z.get("icon-text-fit")!=="none",Ze=new No(null,0,te&&(le||!l.hasIconData()||z.get("icon-optional")),le&&(te||!l.hasTextData()||z.get("text-optional")),!0);!l.collisionArrays&&C&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(C);const ft=(pt,_t,Lt)=>{for(let xt=0;xt<_t/4;xt++)pt.opacityVertexArray.emplaceBack(Lt);pt.hasVisibleVertices=pt.hasVisibleVertices||Lt!==Wr},mt=this.collisionBoxArrays.get(l.bucketInstanceId);for(let pt=0;pt<l.symbolInstances.length;pt++){const _t=l.symbolInstances.get(pt),{numHorizontalGlyphVertices:Lt,numVerticalGlyphVertices:xt,crossTileID:Rt}=_t;let Bt=this.opacities[Rt];x[Rt]?Bt=W:Bt||(Bt=Ze,this.opacities[Rt]=Bt),x[Rt]=!0;const Mt=_t.numIconVertices>0,Xt=this.placedOrientations[_t.crossTileID],gr=Xt===a.az.vertical,ur=Xt===a.az.horizontal||Xt===a.az.horizontalOnly;if(Lt>0||xt>0){const mr=Vr(Bt.text);ft(l.text,Lt,gr?Wr:mr),ft(l.text,xt,ur?Wr:mr);const Yr=Bt.text.isHidden();[_t.rightJustifiedTextSymbolIndex,_t.centerJustifiedTextSymbolIndex,_t.leftJustifiedTextSymbolIndex].forEach((on=>{on>=0&&(l.text.placedSymbolArray.get(on).hidden=Yr||gr?1:0)})),_t.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(_t.verticalPlacedTextSymbolIndex).hidden=Yr||ur?1:0);const Qr=this.variableOffsets[_t.crossTileID];Qr&&this.markUsedJustification(l,Qr.anchor,_t,Xt);const Br=this.placedOrientations[_t.crossTileID];Br&&(this.markUsedJustification(l,"left",_t,Br),this.markUsedOrientation(l,Br,_t))}if(Mt){const mr=Vr(Bt.icon),Yr=!(qe&&_t.verticalPlacedIconSymbolIndex&&gr);_t.placedIconSymbolIndex>=0&&(ft(l.icon,_t.numIconVertices,Yr?mr:Wr),l.icon.placedSymbolArray.get(_t.placedIconSymbolIndex).hidden=Bt.icon.isHidden()),_t.verticalPlacedIconSymbolIndex>=0&&(ft(l.icon,_t.numVerticalIconVertices,Yr?Wr:mr),l.icon.placedSymbolArray.get(_t.verticalPlacedIconSymbolIndex).hidden=Bt.icon.isHidden())}const hr=mt&&mt.has(pt)?mt.get(pt):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const mr=l.collisionArrays[pt];if(mr){let Yr=new a.P(0,0);if(mr.textBox||mr.verticalTextBox){let Qr=!0;if(pe){const Br=this.variableOffsets[Rt];Br?(Yr=bs(Br.anchor,Br.width,Br.height,Br.textOffset,Br.textBoxScale),Ie&&Yr._rotate(Te?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Qr=!1}if(mr.textBox||mr.verticalTextBox){let Br;mr.textBox&&(Br=gr),mr.verticalTextBox&&(Br=ur),eu(l.textCollisionBox.collisionVertexArray,Bt.text.placed,!Qr||Br,hr.text,Yr.x,Yr.y)}}if(mr.iconBox||mr.verticalIconBox){const Qr=!!(!ur&&mr.verticalIconBox);let Br;mr.iconBox&&(Br=Qr),mr.verticalIconBox&&(Br=!Qr),eu(l.iconCollisionBox.collisionVertexArray,Bt.icon.placed,Br,hr.icon,qe?Yr.x:0,qe?Yr.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const x=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*x>l}setStale(){this.stale=!0}}function eu(L,l,h,x,C,R){x&&x.length!==0||(x=[0,0,0,0]);const z=x[0]-oa,W=x[1]-oa,te=x[2]-oa,le=x[3]-oa;L.emplaceBack(l?1:0,h?1:0,C||0,R||0,z,W),L.emplaceBack(l?1:0,h?1:0,C||0,R||0,te,W),L.emplaceBack(l?1:0,h?1:0,C||0,R||0,te,le),L.emplaceBack(l?1:0,h?1:0,C||0,R||0,z,le)}const Q=Math.pow(2,25),me=Math.pow(2,24),Je=Math.pow(2,17),It=Math.pow(2,16),jt=Math.pow(2,9),qt=Math.pow(2,8),Qt=Math.pow(2,1);function Vr(L){if(L.opacity===0&&!L.placed)return 0;if(L.opacity===1&&L.placed)return 4294967295;const l=L.placed?1:0,h=Math.floor(127*L.opacity);return h*Q+l*me+h*Je+l*It+h*jt+l*qt+h*Qt+l}const Wr=0;class zr{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,h,x,C,R){const z=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(z,C,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort(((W,te)=>W.sortKey-te.sortKey)));this._currentPartIndex<z.length;)if(h.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,R())return!0;return!1}}class Kr{constructor(l,h,x,C,R,z,W,te){this.placement=new ac(l,h,z,W,te),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(l,h,x){const C=k(),R=()=>!this._forceFullPlacement&&k()-C>2;for(;this._currentPlacementIndex>=0;){const z=h[l[this._currentPlacementIndex]],W=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=W)&&(!z.maxzoom||z.maxzoom>W)){if(this._inProgressLayer||(this._inProgressLayer=new zr(z)),this._inProgressLayer.continuePlacement(x[z.source],this.placement,this._showCollisionBoxes,z,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Cr=512/a.a5/2;class Hn{constructor(l,h,x){this.tileID=l,this.bucketInstanceId=x,this._symbolsByKey={};const C=new Map;for(let R=0;R<h.length;R++){const z=h.get(R),W=z.key,te=C.get(W);te?te.push(z):C.set(W,[z])}for(const[R,z]of C){const W={positions:z.map((te=>({x:Math.floor(te.anchorX*Cr),y:Math.floor(te.anchorY*Cr)}))),crossTileIDs:z.map((te=>te.crossTileID))};if(W.positions.length>128){const te=new a.aT(W.positions.length,16,Uint16Array);for(const{x:le,y:pe}of W.positions)te.add(le,pe);te.finish(),delete W.positions,W.index=te}this._symbolsByKey[R]=W}}getScaledCoordinates(l,h){const{x,y:C,z:R}=this.tileID.canonical,{x:z,y:W,z:te}=h.canonical,le=Cr/Math.pow(2,te-R),pe=(W*a.a5+l.anchorY)*le,Ie=C*a.a5*Cr;return{x:Math.floor((z*a.a5+l.anchorX)*le-x*a.a5*Cr),y:Math.floor(pe-Ie)}}findMatches(l,h,x){const C=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let R=0;R<l.length;R++){const z=l.get(R);if(z.crossTileID)continue;const W=this._symbolsByKey[z.key];if(!W)continue;const te=this.getScaledCoordinates(z,h);if(W.index){const le=W.index.range(te.x-C,te.y-C,te.x+C,te.y+C).sort();for(const pe of le){const Ie=W.crossTileIDs[pe];if(!x[Ie]){x[Ie]=!0,z.crossTileID=Ie;break}}}else if(W.positions)for(let le=0;le<W.positions.length;le++){const pe=W.positions[le],Ie=W.crossTileIDs[le];if(Math.abs(pe.x-te.x)<=C&&Math.abs(pe.y-te.y)<=C&&!x[Ie]){x[Ie]=!0,z.crossTileID=Ie;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class _i{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const x in this.indexes){const C=this.indexes[x],R={};for(const z in C){const W=C[z];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+h),R[W.tileID.key]=W}this.indexes[x]=R}this.lng=l}addBucket(l,h,x){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let R=0;R<h.symbolInstances.length;R++)h.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const C=this.usedCrossTileIDs[l.overscaledZ];for(const R in this.indexes){const z=this.indexes[R];if(Number(R)>l.overscaledZ)for(const W in z){const te=z[W];te.tileID.isChildOf(l)&&te.findMatches(h.symbolInstances,l,C)}else{const W=z[l.scaledTo(Number(R)).key];W&&W.findMatches(h.symbolInstances,l,C)}}for(let R=0;R<h.symbolInstances.length;R++){const z=h.symbolInstances.get(R);z.crossTileID||(z.crossTileID=x.generate(),C[z.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Hn(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const x of h.getCrossTileIDsLists())for(const C of x)delete this.usedCrossTileIDs[l][C]}removeStaleBuckets(l){let h=!1;for(const x in this.indexes){const C=this.indexes[x];for(const R in C)l[C[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,C[R]),delete C[R],h=!0)}return h}}class dn{constructor(){this.layerIndexes={},this.crossTileIDs=new _i,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,x){let C=this.layerIndexes[l.id];C===void 0&&(C=this.layerIndexes[l.id]=new Rn);let R=!1;const z={};C.handleWrapJump(x);for(const W of h){const te=W.getBucket(l);te&&l.id===te.layerIds[0]&&(te.bucketInstanceId||(te.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(W.tileID,te,this.crossTileIDs)&&(R=!0),z[te.bucketInstanceId]=!0)}return C.removeStaleBuckets(z)&&(R=!0),R}pruneUnusedLayers(l){const h={};l.forEach((x=>{h[x]=!0}));for(const x in this.layerIndexes)h[x]||delete this.layerIndexes[x]}}var Tr="void main() {fragColor=vec4(1.0);}";const rn={prelude:sn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:sn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:sn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:sn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:sn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:sn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:sn(Tr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:sn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:sn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:sn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:sn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:sn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:sn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:sn(Tr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:sn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:sn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:sn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:sn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:sn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:sn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:sn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:sn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:sn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:sn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:sn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:sn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:sn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:sn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:sn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:sn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:sn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:sn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:sn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:sn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:sn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:sn(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:sn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function sn(L,l){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=l.match(/in ([\w]+) ([\w]+)/g),C=L.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=R?R.concat(C):C,W={};return{fragmentSource:L=L.replace(h,((te,le,pe,Ie,Te)=>(W[Te]=!0,le==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
in ${pe} ${Ie} ${Te};
#else
uniform ${pe} ${Ie} u_${Te};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Te}
    ${pe} ${Ie} ${Te} = u_${Te};
#endif
`))),vertexSource:l=l.replace(h,((te,le,pe,Ie,Te)=>{const qe=Ie==="float"?"vec2":"vec4",Ze=Te.match(/color/)?"color":qe;return W[Te]?le==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
uniform lowp float u_${Te}_t;
in ${pe} ${qe} a_${Te};
out ${pe} ${Ie} ${Te};
#else
uniform ${pe} ${Ie} u_${Te};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Te}
    ${Te} = a_${Te};
#else
    ${pe} ${Ie} ${Te} = u_${Te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Te}
    ${Te} = unpack_mix_${Ze}(a_${Te}, u_${Te}_t);
#else
    ${pe} ${Ie} ${Te} = u_${Te};
#endif
`:le==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
uniform lowp float u_${Te}_t;
in ${pe} ${qe} a_${Te};
#else
uniform ${pe} ${Ie} u_${Te};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Te}
    ${pe} ${Ie} ${Te} = a_${Te};
#else
    ${pe} ${Ie} ${Te} = u_${Te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Te}
    ${pe} ${Ie} ${Te} = unpack_mix_${Ze}(a_${Te}, u_${Te}_t);
#else
    ${pe} ${Ie} ${Te} = u_${Te};
#endif
`})),staticAttributes:x,staticUniforms:z}}class ii{constructor(l,h,x){this.vertexBuffer=l,this.indexBuffer=h,this.segments=x}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ri=a.aU([{name:"a_pos",type:"Int16",components:2}]);const sa="#define PROJECTION_MERCATOR",hi="mercator";class ai{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return hi}get shaderDefine(){return sa}get shaderPreludeCode(){return rn.projectionMercator}get vertexShaderPreludeCode(){return rn.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,h,x,C,R){if(this._cachedMesh)return this._cachedMesh;const z=new a.aW;z.emplaceBack(0,0),z.emplaceBack(a.a5,0),z.emplaceBack(0,a.a5),z.emplaceBack(a.a5,a.a5);const W=l.createVertexBuffer(z,Ri.members),te=a.aX.simpleSegment(0,0,4,2),le=new a.aY;le.emplaceBack(1,0,2),le.emplaceBack(1,2,3);const pe=l.createIndexBuffer(le);return this._cachedMesh=new ii(W,pe,te),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}class as{constructor(l=0,h=0,x=0,C=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(x)||x<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=x,this.right=C}interpolate(l,h,x){return h.top!=null&&l.top!=null&&(this.top=a.G.number(l.top,h.top,x)),h.bottom!=null&&l.bottom!=null&&(this.bottom=a.G.number(l.bottom,h.bottom,x)),h.left!=null&&l.left!=null&&(this.left=a.G.number(l.left,h.left,x)),h.right!=null&&l.right!=null&&(this.right=a.G.number(l.right,h.right,x)),this}getCenter(l,h){const x=a.an((this.left+l-this.right)/2,0,l),C=a.an((this.top+h-this.bottom)/2,0,h);return new a.P(x,C)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new as(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function _s(L,l){if(!L.renderWorldCopies||L.lngRange)return;const h=l.lng-L.center.lng;l.lng+=h>180?-360:h<-180?360:0}function xi(L){return Math.max(0,Math.floor(L))}class os{constructor(l,h){var x;this.applyConstrain=(C,R)=>this._constrainOverride!==null?this._constrainOverride(C,R):this._callbacks.defaultConstrain(C,R),this._callbacks=l,this._tileSize=512,this._renderWorldCopies=h?.renderWorldCopies===void 0||!!h?.renderWorldCopies,this._minZoom=h?.minZoom||0,this._maxZoom=h?.maxZoom||22,this._minPitch=h?.minPitch==null?0:h?.minPitch,this._maxPitch=h?.maxPitch==null?60:h?.maxPitch,this._constrainOverride=(x=h?.constrainOverride)!==null&&x!==void 0?x:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=xi(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new as,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,h,x){this._constrainOverride=l.constrainOverride,this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=xi(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new as(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!x&&l.autoCalculateNearFarZ,h&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get constrainOverride(){return this._constrainOverride}setConstrainOverride(l){l===void 0&&(l=null),this._constrainOverride!==l&&(this._constrainOverride=l,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const h=a.W(l,-180,180)*Math.PI/180;var x,C,R,z,W,te,le,pe,Ie;this._bearingInRadians!==h&&(this._unmodified=!1,this._bearingInRadians=h,this._calcMatrices(),this._rotationMatrix=p(),x=this._rotationMatrix,R=-this._bearingInRadians,z=(C=this._rotationMatrix)[0],W=C[1],te=C[2],le=C[3],pe=Math.sin(R),Ie=Math.cos(R),x[0]=z*Ie+te*pe,x[1]=W*Ie+le*pe,x[2]=z*-pe+te*Ie,x[3]=W*-pe+le*Ie)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const h=a.an(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==h&&(this._unmodified=!1,this._pitchInRadians=h,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const h=l/180*Math.PI;this._rollInRadians!==h&&(this._unmodified=!1,this._rollInRadians=h,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aZ(this._fovInRadians)}setFov(l){l=a.an(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ap(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const h=this.applyConstrain(this._center,l).zoom;this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this._tileZoom=Math.max(0,Math.floor(h)),this._scale=a.aq(h),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,h){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=h,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,x){this._unmodified=!1,this._edgeInsets.interpolate(l,h,x),this.constrainInternal(),this._calcMatrices()}resize(l,h,x=!0){this._width=l,this._height=h,x&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new $t([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ao,a.ao])}getCameraQueryGeometry(l,h){if(h.length===1)return[h[0],l];{const{minX:x,minY:C,maxX:R,maxY:z}=a.aa.fromPoints(h).extend(l);return[new a.P(x,C),new a.P(R,C),new a.P(R,z),new a.P(x,z),new a.P(x,C)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:h,zoom:x}=this.applyConstrain(this.center,this.zoom);this.setCenter(h),this.setZoom(x),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.ar(new Float64Array(16));a.Q(l,l,[this._width/2,-this._height/2,1]),a.O(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.ar(new Float64Array(16)),a.Q(l,l,[1,-1,1]),a.O(l,l,[-1,-1,0]),a.Q(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,h,x,C){const R=x!==void 0?x:this.bearing,z=C=C!==void 0?C:this.pitch,{distanceToCenter:W,clampedElevation:te}=this._distanceToCenterFromAltElevationPitch(h,this.elevation,z),{x:le,y:pe}=Hr(z,R),Ie=a.a9.fromLngLat(l,h);let Te,qe,Ze=a.a_(1,Ie.y),ft=0;do{if(ft+=1,ft>10)break;qe=W/Ze,Te=new a.a9(Ie.x+le*qe,Ie.y+pe*qe),Ze=1/Te.meterInMercatorCoordinateUnits()}while(Math.abs(W-qe*Ze)>1e-12);return{center:Te.toLngLat(),elevation:te,zoom:a.at(this.height/2/Math.tan(this.fovInRadians/2)/qe/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const h=1/this.worldSize,x=a.as(1,this.center.lat)*this.worldSize,C=a.a9.fromLngLat(this.center,this.elevation),R=C.x/h,z=C.y/h,W=C.z/h,te=this.pitch,le=this.bearing,{x:pe,y:Ie,z:Te}=Hr(te,le),qe=this.cameraToCenterDistance,Ze=R+qe*-pe,ft=z+qe*-Ie,mt=W+qe*Te,{distanceToCenter:pt,clampedElevation:_t}=this._distanceToCenterFromAltElevationPitch(mt/x,l,te),Lt=pt*x,xt=new a.a9((Ze+pe*Lt)*h,(ft+Ie*Lt)*h,0).toLngLat(),Rt=a.as(1,xt.lat),Bt=a.at(this.height/2/Math.tan(this.fovInRadians/2)/pt/Rt/this.tileSize);this._elevation=_t,this._center=xt,this.setZoom(Bt)}_distanceToCenterFromAltElevationPitch(l,h,x){const C=-Math.cos(a.ap(x)),R=l-h;let z,W=h;return C*R>=0||Math.abs(C)<.1?(z=1e4,W=l+z*C):z=-R/C,{distanceToCenter:z,clampedElevation:W}}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.as(1,this.center.lat)*this.worldSize;return kt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const h=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/h,l.canonical.y/h,1/h/a.a5,1/h/a.a5]}}class Xi{constructor(l,h){this.min=l,this.max=h,this.center=a.a$([],a.b0([],this.min,this.max),.5)}quadrant(l){const h=[l%2==0,l<2],x=a.b1(this.min),C=a.b1(this.max);for(let R=0;R<h.length;R++)x[R]=h[R]?this.min[R]:this.center[R],C[R]=h[R]?this.center[R]:this.max[R];return C[2]=this.max[2],new Xi(x,C)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let h=!0;for(let x=0;x<l.planes.length;x++){const C=this.intersectsPlane(l.planes[x]);if(C===0)return 0;C===1&&(h=!1)}return h?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let h=l[3],x=l[3];for(let C=0;C<3;C++)l[C]>0?(h+=l[C]*this.min[C],x+=l[C]*this.max[C]):(x+=l[C]*this.min[C],h+=l[C]*this.max[C]);return h>=0?2:x<0?0:1}}class tu{distanceToTile2d(l,h,x,C){const R=C.distanceX([l,h]),z=C.distanceY([l,h]);return Math.hypot(R,z)}getWrap(l,h,x){return x}getTileBoundingVolume(l,h,x,C){var R,z;let W=0,te=0;if(C?.terrain){const pe=new a.a2(l.z,h,l.z,l.x,l.y),Ie=C.terrain.getMinMaxElevation(pe);W=(R=Ie.minElevation)!==null&&R!==void 0?R:Math.min(0,x),te=(z=Ie.maxElevation)!==null&&z!==void 0?z:Math.max(0,x)}const le=1<<l.z;return new Xi([h+l.x/le,l.y/le,W],[h+(l.x+1)/le,(l.y+1)/le,te])}allowVariableZoom(l,h){const x=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,C=a.an(78.5-x/2,0,60);return!!h.terrain||l.pitch>C}allowWorldCopies(){return!0}prepareNextFrame(){}}class Fa{constructor(l,h,x){this.points=l,this.planes=h,this.aabb=x}static fromInvProjectionMatrix(l,h=1,x=0,C,R){const z=R?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],W=Math.pow(2,x),te=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((Te=>(function(qe,Ze,ft,mt){const pt=a.aH([],qe,Ze),_t=1/pt[3]/ft*mt;return a.b6(pt,pt,[_t,_t,1/pt[3],_t])})(Te,l,h,W)));C&&(function(Te,qe,Ze,ft){const mt=ft?4:0,pt=ft?0:4;let _t=0;const Lt=[],xt=[];for(let Mt=0;Mt<4;Mt++){const Xt=a.b2([],Te[Mt+pt],Te[Mt+mt]),gr=a.b7(Xt);a.a$(Xt,Xt,1/gr),Lt.push(gr),xt.push(Xt)}for(let Mt=0;Mt<4;Mt++){const Xt=a.b8(Te[Mt+mt],xt[Mt],Ze);_t=Xt!==null&&Xt>=0?Math.max(_t,Xt):Math.max(_t,Lt[Mt])}const Rt=(function(Mt,Xt){const gr=a.b2([],Mt[Xt[0]],Mt[Xt[1]]),ur=a.b2([],Mt[Xt[2]],Mt[Xt[1]]),hr=[0,0,0,0];return a.b3(hr,a.b4([],gr,ur)),hr[3]=-a.b5(hr,Mt[Xt[0]]),hr})(Te,qe),Bt=(function(Mt,Xt){const gr=a.b9(Mt),ur=a.ba([],Mt,1/gr),hr=a.b2([],Xt,a.a$([],ur,a.b5(Xt,ur))),mr=a.b9(hr);if(mr>0){const Yr=Math.sqrt(1-ur[3]*ur[3]),Qr=a.a$([],ur,-ur[3]),Br=a.b0([],Qr,a.a$([],hr,Yr/mr));return a.bb(Xt,Br)}return null})(Ze,Rt);if(Bt!==null){const Mt=Bt/a.b5(xt[0],Rt);_t=Math.min(_t,Mt)}for(let Mt=0;Mt<4;Mt++){const Xt=Math.min(_t,Lt[Mt]);Te[Mt+pt]=[Te[Mt+mt][0]+xt[Mt][0]*Xt,Te[Mt+mt][1]+xt[Mt][1]*Xt,Te[Mt+mt][2]+xt[Mt][2]*Xt,1]}})(te,z[0],C,R);const le=z.map((Te=>{const qe=a.b2([],te[Te[0]],te[Te[1]]),Ze=a.b2([],te[Te[2]],te[Te[1]]),ft=a.b3([],a.b4([],qe,Ze)),mt=-a.b5(ft,te[Te[1]]);return ft.concat(mt)})),pe=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Ie=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Te of te)for(let qe=0;qe<3;qe++)pe[qe]=Math.min(pe[qe],Te[qe]),Ie[qe]=Math.max(Ie[qe],Te[qe]);return new Fa(te,le,new Xi(pe,Ie))}}class xs{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,h,x){return this._helper.interpolatePadding(l,h,x)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,h,x=!0){this._helper.resize(l,h,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrainOverride(l){this._helper.setConstrainOverride(l)}overrideNearFarZ(l,h){this._helper.overrideNearFarZ(l,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,h){}constructor(l){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(h,x)=>{x=a.an(+x,this.minZoom,this.maxZoom);const C={center:new a.V(h.lng,h.lat),zoom:x};let R=this._helper._lngRange;if(!this._helper._renderWorldCopies&&R===null){const xt=179.9999999999;R=[-xt,xt]}const z=this.tileSize*a.aq(C.zoom);let W=0,te=z,le=0,pe=z,Ie=0,Te=0;const{x:qe,y:Ze}=this.size;if(this._helper._latRange){const xt=this._helper._latRange;W=a.X(xt[1])*z,te=a.X(xt[0])*z,te-W<Ze&&(Ie=Ze/(te-W))}R&&(le=a.W(a.Y(R[0])*z,0,z),pe=a.W(a.Y(R[1])*z,0,z),pe<le&&(pe+=z),pe-le<qe&&(Te=qe/(pe-le)));const{x:ft,y:mt}=_r(z,h);let pt,_t;const Lt=Math.max(Te||0,Ie||0);if(Lt){const xt=new a.P(Te?(pe+le)/2:ft,Ie?(te+W)/2:mt);return C.center=Nr(z,xt).wrap(),C.zoom+=a.at(Lt),C}if(this._helper._latRange){const xt=Ze/2;mt-xt<W&&(_t=W+xt),mt+xt>te&&(_t=te-xt)}if(R){const xt=(le+pe)/2;let Rt=ft;this._helper._renderWorldCopies&&(Rt=a.W(ft,xt-z/2,xt+z/2));const Bt=qe/2;Rt-Bt<le&&(pt=le+Bt),Rt+Bt>pe&&(pt=pe-Bt)}if(pt!==void 0||_t!==void 0){const xt=new a.P(pt??ft,_t??mt);C.center=Nr(z,xt).wrap()}return C},this.applyConstrain=(h,x)=>this._helper.applyConstrain(h,x),this._helper=new os({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,x)=>this.defaultConstrain(h,x)},l),this._coveringTilesDetailsProvider=new tu}clone(){const l=new xs;return l.apply(this,!1),l}apply(l,h,x){this._helper.apply(l,h,x)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const h=[new a.bc(0,l)];if(this._helper._renderWorldCopies){const x=this.screenPointToMercatorCoordinate(new a.P(0,0)),C=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),R=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),W=Math.floor(Math.min(x.x,C.x,R.x,z.x)),te=Math.floor(Math.max(x.x,C.x,R.x,z.x)),le=1;for(let pe=W-le;pe<=te+le;pe++)pe!==0&&h.push(new a.bc(pe,l))}return h}getCameraFrustum(){return Fa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const h=this.screenPointToLocation(this.centerPoint,l),x=l?l.getElevationForLngLatZoom(h,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(x)}setLocationAtPoint(l,h){const x=a.as(this.elevation,this.center.lat),C=this.screenPointToMercatorCoordinateAtZ(h,x),R=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,x),z=a.a9.fromLngLat(l),W=new a.a9(z.x-(C.x-R.x),z.y-(C.y-R.y));this.setCenter(W?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,h){return h?this.coordinatePoint(a.a9.fromLngLat(l),h.getElevationForLngLat(l,this),this._pixelMatrix3D):this.coordinatePoint(a.a9.fromLngLat(l))}screenPointToLocation(l,h){var x;return(x=this.screenPointToMercatorCoordinate(l,h))===null||x===void 0?void 0:x.toLngLat()}screenPointToMercatorCoordinate(l,h){if(h){const x=h.pointCoordinate(l);if(x!=null)return x}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,h){const x=h||0,C=[l.x,l.y,0,1],R=[l.x,l.y,1,1];a.aH(C,C,this._pixelMatrixInverse),a.aH(R,R,this._pixelMatrixInverse);const z=C[3],W=R[3],te=C[1]/z,le=R[1]/W,pe=C[2]/z,Ie=R[2]/W,Te=pe===Ie?0:(x-pe)/(Ie-pe);return new a.a9(a.G.number(C[0]/z,R[0]/W,Te)/this.worldSize,a.G.number(te,le,Te)/this.worldSize,x)}coordinatePoint(l,h=0,x=this._pixelMatrix){const C=[l.x*this.worldSize,l.y*this.worldSize,h,1];return a.aH(C,C,x),new a.P(C[0]/C[3],C[1]/C[3])}getBounds(){const l=Math.max(0,this._helper._height/2-tn(this));return new $t().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,h){return h?h.pointCoordinate(l)!=null:l.y>this.height/2-tn(this)}calculatePosMatrix(l,h=!1,x){var C;const R=(C=l.key)!==null&&C!==void 0?C:a.bd(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),z=h?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(R)){const le=z.get(R);return x?le.f32:le.f64}const W=Lr(l,this.worldSize);a.S(W,h?this._alignedProjMatrix:this._viewProjMatrix,W);const te={f64:W,f32:new Float32Array(W)};return z.set(R,te),x?te.f32:te.f64}calculateFogMatrix(l){const h=l.key,x=this._fogMatrixCacheF32;if(x.has(h))return x.get(h);const C=Lr(l,this.worldSize);return a.S(C,this._fogMatrix,C),x.set(h,new Float32Array(C)),x.get(h)}calculateCenterFromCameraLngLatAlt(l,h,x,C){return this._helper.calculateCenterFromCameraLngLatAlt(l,h,x,C)}_calculateNearFarZIfNeeded(l,h,x){if(!this._helper.autoCalculateNearFarZ)return;const C=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),R=l-C*this._helper._pixelPerMeter/Math.cos(h),z=C<0?R:l,W=Math.PI/2+this.pitchInRadians,te=a.ap(this.fov)*(Math.abs(Math.cos(a.ap(this.roll)))*this.height+Math.abs(Math.sin(a.ap(this.roll)))*this.width)/this.height*(.5+x.y/this.height),le=Math.sin(te)*z/Math.sin(a.an(Math.PI-W-te,.01,Math.PI-.01)),pe=tn(this),Ie=Math.atan(pe/this._helper.cameraToCenterDistance),Te=a.ap(.75),qe=Ie>Te?2*Ie*(.5+x.y/(2*pe)):Te,Ze=Math.sin(qe)*z/Math.sin(a.an(Math.PI-W-qe,.01,Math.PI-.01)),ft=Math.min(le,Ze);this._helper._farZ=1.01*(Math.cos(Math.PI/2-h)*ft+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,h=_r(this.worldSize,this.center),x=h.x,C=h.y;this._helper._pixelPerMeter=a.as(1,this.center.lat)*this.worldSize;const R=a.ap(Math.min(this.pitch,xr)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(R));let W;this._calculateNearFarZIfNeeded(z,R,l),W=new Float64Array(16),a.be(W,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aB(this._invProjMatrix,W),W[8]=2*-l.x/this._helper._width,W[9]=2*l.y/this._helper._height,this._projectionMatrix=a.bf(W),a.Q(W,W,[1,-1,1]),a.O(W,W,[0,0,-this._helper.cameraToCenterDistance]),a.bg(W,W,-this.rollInRadians),a.bh(W,W,this.pitchInRadians),a.bg(W,W,-this.bearingInRadians),a.O(W,W,[-x,-C,0]),this._mercatorMatrix=a.Q([],W,[this.worldSize,this.worldSize,this.worldSize]),a.Q(W,W,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,W),a.O(W,W,[0,0,-this.elevation]),this._viewProjMatrix=W,this._invViewProjMatrix=a.aB([],W);const te=[0,0,-1,1];a.aH(te,te,this._invViewProjMatrix),this._cameraPosition=[te[0]/te[3],te[1]/te[3],te[2]/te[3]],this._fogMatrix=new Float64Array(16),a.be(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-x,-C,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,W);const le=this._helper._width%2/2,pe=this._helper._height%2/2,Ie=Math.cos(this.bearingInRadians),Te=Math.sin(-this.bearingInRadians),qe=x-Math.round(x)+Ie*le+Te*pe,Ze=C-Math.round(C)+Ie*pe+Te*le,ft=new Float64Array(W);if(a.O(ft,ft,[qe>.5?qe-1:qe,Ze>.5?Ze-1:Ze,0]),this._alignedProjMatrix=ft,W=a.aB(new Float64Array(16),this._pixelMatrix),!W)throw new Error("failed to invert matrix");this._pixelMatrixInverse=W,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),h=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.aH(h,h,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.as(1,this.center.lat)*this.worldSize;return kt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,h){const x=a.a9.fromLngLat(l),C=[x.x*this.worldSize,x.y*this.worldSize,h,1];return a.aH(C,C,this._viewProjMatrix),C[2]/C[3]}getProjectionData(l){const{overscaledTileID:h,aligned:x,applyTerrainMatrix:C}=l,R=this._helper.getMercatorTileCoordinates(h),z=h?this.calculatePosMatrix(h,x,!0):null;let W;return W=h&&h.terrainRttPosMatrix32f&&C?h.terrainRttPosMatrix32f:z||a.bi(),{mainMatrix:W,tileMercatorCoords:R,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:W}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,h,x){return 1}transformLightDirection(l){return a.b1(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,h,x,C){const R=this.calculatePosMatrix(x);let z;C?(z=[l,h,C(l,h),1],a.aH(z,z,R)):(z=[l,h,0,1],Ea(z,z,R));const W=z[3];return{point:new a.P(z[0]/W,z[1]/W),signedDistanceFromCamera:W,isOccluded:!1}}populateCache(l){for(const h of l)this.calculatePosMatrix(h)}getMatrixForModel(l,h){const x=a.a9.fromLngLat(l,h),C=x.meterInMercatorCoordinateUnits(),R=a.bj();return a.O(R,R,[x.x,x.y,x.z]),a.bg(R,R,Math.PI),a.bh(R,R,Math.PI/2),a.Q(R,R,[-C,C,C]),R}getProjectionDataForCustomLayer(l=!0){const h=new a.a2(0,0,0,0,0),x=this.getProjectionData({overscaledTileID:h,applyGlobeMatrix:l}),C=Lr(h,this.worldSize);a.S(C,this._viewProjMatrix,C),x.tileMercatorCoords=[0,0,1,1];const R=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],z=a.bk();return a.Q(z,C,R),x.fallbackMatrix=z,x.mainMatrix=z,x}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function So(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ru(L){if(L.useSlerp)if(L.k<1){const l=a.bl(L.startEulerAngles.roll,L.startEulerAngles.pitch,L.startEulerAngles.bearing),h=a.bl(L.endEulerAngles.roll,L.endEulerAngles.pitch,L.endEulerAngles.bearing),x=new Float64Array(4);a.bm(x,l,h,L.k);const C=a.bn(x);L.tr.setRoll(C.roll),L.tr.setPitch(C.pitch),L.tr.setBearing(C.bearing)}else L.tr.setRoll(L.endEulerAngles.roll),L.tr.setPitch(L.endEulerAngles.pitch),L.tr.setBearing(L.endEulerAngles.bearing);else L.tr.setRoll(a.G.number(L.startEulerAngles.roll,L.endEulerAngles.roll,L.k)),L.tr.setPitch(a.G.number(L.startEulerAngles.pitch,L.endEulerAngles.pitch,L.k)),L.tr.setBearing(a.G.number(L.startEulerAngles.bearing,L.endEulerAngles.bearing,L.k))}function nu(L,l,h,x,C){const R=C.padding,z=_r(C.worldSize,h.getNorthWest()),W=_r(C.worldSize,h.getNorthEast()),te=_r(C.worldSize,h.getSouthEast()),le=_r(C.worldSize,h.getSouthWest()),pe=a.ap(-x),Ie=z.rotate(pe),Te=W.rotate(pe),qe=te.rotate(pe),Ze=le.rotate(pe),ft=new a.P(Math.max(Ie.x,Te.x,Ze.x,qe.x),Math.max(Ie.y,Te.y,Ze.y,qe.y)),mt=new a.P(Math.min(Ie.x,Te.x,Ze.x,qe.x),Math.min(Ie.y,Te.y,Ze.y,qe.y)),pt=ft.sub(mt),_t=(C.width-(R.left+R.right+l.left+l.right))/pt.x,Lt=(C.height-(R.top+R.bottom+l.top+l.bottom))/pt.y;if(Lt<0||_t<0)return void So();const xt=Math.min(a.at(C.scale*Math.min(_t,Lt)),L.maxZoom),Rt=a.P.convert(L.offset),Bt=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ap(x)),Mt=Rt.add(Bt).mult(C.scale/a.aq(xt));return{center:Nr(C.worldSize,z.add(te).div(2).sub(Mt)),zoom:xt,bearing:x}}class Ja{get useGlobeControls(){return!1}handlePanInertia(l,h){const x=l.mag(),C=Math.abs(tn(h));return{easingOffset:l.mult(Math.min(.75*C/x,1)),easingCenter:h.center}}handleMapControlsRollPitchBearingZoom(l,h){l.bearingDelta&&h.setBearing(h.bearing+l.bearingDelta),l.pitchDelta&&h.setPitch(h.pitch+l.pitchDelta),l.rollDelta&&h.setRoll(h.roll+l.rollDelta),l.zoomDelta&&h.setZoom(h.zoom+l.zoomDelta)}handleMapControlsPan(l,h,x){l.around.distSqr(h.centerPoint)<.01||h.setLocationAtPoint(x,l.around)}cameraForBoxAndBearing(l,h,x,C,R){return nu(l,h,x,C,R)}handleJumpToCenterZoom(l,h){l.zoom!==(h.zoom!==void 0?+h.zoom:l.zoom)&&l.setZoom(+h.zoom),h.center!==void 0&&l.setCenter(a.V.convert(h.center))}handleEaseTo(l,h){const x=l.zoom,C=l.padding,R={roll:l.roll,pitch:l.pitch,bearing:l.bearing},z={roll:h.roll===void 0?l.roll:h.roll,pitch:h.pitch===void 0?l.pitch:h.pitch,bearing:h.bearing===void 0?l.bearing:h.bearing},W=h.zoom!==void 0,te=!l.isPaddingEqual(h.padding);let le=!1;const pe=W?+h.zoom:l.zoom;let Ie=l.centerPoint.add(h.offsetAsPoint);const Te=l.screenPointToLocation(Ie),{center:qe,zoom:Ze}=l.applyConstrain(a.V.convert(h.center||Te),pe??x);_s(l,qe);const ft=_r(l.worldSize,Te),mt=_r(l.worldSize,qe).sub(ft),pt=a.aq(Ze-x);return le=Ze!==x,{easeFunc:_t=>{if(le&&l.setZoom(a.G.number(x,Ze,_t)),a.bo(R,z)||ru({startEulerAngles:R,endEulerAngles:z,tr:l,k:_t,useSlerp:R.roll!=z.roll}),te&&(l.interpolatePadding(C,h.padding,_t),Ie=l.centerPoint.add(h.offsetAsPoint)),h.around)l.setLocationAtPoint(h.around,h.aroundPoint);else{const Lt=a.aq(l.zoom-x),xt=Ze>x?Math.min(2,pt):Math.max(.5,pt),Rt=Math.pow(xt,1-_t),Bt=Nr(l.worldSize,ft.add(mt.mult(_t*Rt)).mult(Lt));l.setLocationAtPoint(l.renderWorldCopies?Bt.wrap():Bt,Ie)}},isZooming:le,elevationCenter:qe}}handleFlyTo(l,h){const x=h.zoom!==void 0,C=l.zoom,R=l.applyConstrain(a.V.convert(h.center||h.locationAtOffset),x?+h.zoom:C),z=R.center,W=R.zoom;_s(l,z);const te=_r(l.worldSize,h.locationAtOffset),le=_r(l.worldSize,z).sub(te),pe=le.mag(),Ie=a.aq(W-C);let Te;if(h.minZoom!==void 0){const qe=Math.min(+h.minZoom,C,W),Ze=l.applyConstrain(z,qe).zoom;Te=a.aq(Ze-C)}return{easeFunc:(qe,Ze,ft,mt)=>{l.setZoom(qe===1?W:C+a.at(Ze));const pt=qe===1?z:Nr(l.worldSize,te.add(le.mult(ft)).mult(Ze));l.setLocationAtPoint(l.renderWorldCopies?pt.wrap():pt,mt)},scaleOfZoom:Ie,targetCenter:z,scaleOfMinZoom:Te,pixelPathLength:pe}}}class ki{constructor(l,h,x){this.blendFunction=l,this.blendColor=h,this.mask=x}}ki.Replace=[1,0],ki.disabled=new ki(ki.Replace,a.bp.transparent,[!1,!1,!1,!1]),ki.unblended=new ki(ki.Replace,a.bp.transparent,[!0,!0,!0,!0]),ki.alphaBlended=new ki([1,771],a.bp.transparent,[!0,!0,!0,!0]);const ws=2305;class Yn{constructor(l,h,x){this.enable=l,this.mode=h,this.frontFace=x}}Yn.disabled=new Yn(!1,1029,ws),Yn.backCCW=new Yn(!0,1029,ws),Yn.frontCCW=new Yn(!0,1028,ws);class Wn{constructor(l,h,x){this.func=l,this.mask=h,this.range=x}}Wn.ReadOnly=!1,Wn.ReadWrite=!0,Wn.disabled=new Wn(519,Wn.ReadOnly,[0,1]);const go=7680;class Zn{constructor(l,h,x,C,R,z){this.test=l,this.ref=h,this.mask=x,this.fail=C,this.depthFail=R,this.pass=z}}Zn.disabled=new Zn({func:519,mask:0},0,0,go,go,go);const ue=new WeakMap;function We(L){var l;if(ue.has(L))return ue.get(L);{const h=(l=L.getParameter(L.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return ue.set(L,h),h}}class bt{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const h=l.context,x=h.gl;this._texFormat=x.RGBA,this._texType=x.UNSIGNED_BYTE;const C=new a.aW;C.emplaceBack(-1,-1),C.emplaceBack(2,-1),C.emplaceBack(-1,2);const R=new a.aY;R.emplaceBack(0,1,2),this._fullscreenTriangle=new ii(h.createVertexBuffer(C,Ri.members),h.createIndexBuffer(R),a.aX.simpleSegment(0,0,C.length,R.length)),this._resultBuffer=new Uint8Array(4),h.activeTexture.set(x.TEXTURE1);const z=x.createTexture();x.bindTexture(x.TEXTURE_2D,z),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=h.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),We(x)&&(this._pbo=x.createBuffer(),x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.bufferData(x.PIXEL_PACK_BUFFER,4,x.STREAM_READ),x.bindBuffer(x.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,h){const x=this._updateCount;return this._readbackQueue?x>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():x>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,h),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,h=l.gl;l.activeTexture.set(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,h){const x=this._cachedRenderContext.context,C=x.gl;if(this._bindFramebuffer(),x.viewport.set([0,0,this._texWidth,this._texHeight]),x.clear({color:a.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(x,C.TRIANGLES,Wn.disabled,Zn.disabled,ki.unblended,Yn.disabled,((R,z)=>({u_input:R,u_output_expected:z}))(l,h),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&We(C)){C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.readBuffer(C.COLOR_ATTACHMENT0),C.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),C.bindBuffer(C.PIXEL_PACK_BUFFER,null);const R=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:R}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&We(l)){const h=l.clientWaitSync(this._readbackQueue.sync,0,0);if(h===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(h===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=bt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let h=0;return h+=l[0]/256,h+=l[1]/65536,h+=l[2]/16777216,l[3]<127&&(h=-h),h/128}}const Ft=a.a5/128;function nr(L,l){const h=L.granularity!==void 0?Math.max(L.granularity,1):1,x=h+(L.generateBorders?2:0),C=h+(L.extendToNorthPole||L.generateBorders?1:0)+(L.extendToSouthPole||L.generateBorders?1:0),R=x+1,z=C+1,W=L.generateBorders?-1:0,te=L.generateBorders||L.extendToNorthPole?-1:0,le=h+(L.generateBorders?1:0),pe=h+(L.generateBorders||L.extendToSouthPole?1:0),Ie=R*z,Te=x*C*6,qe=R*z>65536;if(qe&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ze=qe||l==="32bit",ft=new Int16Array(2*Ie);let mt=0;for(let Lt=te;Lt<=pe;Lt++)for(let xt=W;xt<=le;xt++){let Rt=xt/h*a.a5;xt===-1&&(Rt=-Ft),xt===h+1&&(Rt=a.a5+Ft);let Bt=Lt/h*a.a5;Lt===-1&&(Bt=L.extendToNorthPole?a.br:-Ft),Lt===h+1&&(Bt=L.extendToSouthPole?a.bs:a.a5+Ft),ft[mt++]=Rt,ft[mt++]=Bt}const pt=Ze?new Uint32Array(Te):new Uint16Array(Te);let _t=0;for(let Lt=0;Lt<C;Lt++)for(let xt=0;xt<x;xt++){const Rt=xt+1+Lt*R,Bt=xt+(Lt+1)*R,Mt=xt+1+(Lt+1)*R;pt[_t++]=xt+Lt*R,pt[_t++]=Bt,pt[_t++]=Rt,pt[_t++]=Rt,pt[_t++]=Bt,pt[_t++]=Mt}return{vertices:ft.buffer.slice(0),indices:pt.buffer.slice(0),uses32bitIndices:Ze}}const Pr=new a.aV({fill:new a.bt(128,2),line:new a.bt(512,0),tile:new a.bt(128,32),stencil:new a.bt(128,1),circle:3});class $r{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return rn.projectionGlobe}get vertexShaderPreludeCode(){return rn.projectionMercator.vertexSource}get subdivisionGranularity(){return Pr}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new bt(l));const h=a.X(this._errorQueryLatitudeDegrees),x=2*Math.atan(Math.exp(Math.PI-h*Math.PI*2))-.5*Math.PI,C=this._errorMeasurement.updateErrorLoop(h,x),R=k();C!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=C,this._errorMeasurementLastChangeTime=R);const z=Math.min(Math.max((R-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bv(z))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,h,x,C,R){const z=(R==="stencil"?Pr.stencil:Pr.tile).getGranularityForZoomLevel(h.z);return this._getMesh(l,{granularity:z,generateBorders:x,extendToNorthPole:h.y===0&&C,extendToSouthPole:h.y===(1<<h.z)-1&&C})}_getMesh(l,h){const x=this._getMeshKey(h);if(x in this._tileMeshCache)return this._tileMeshCache[x];const C=(function(R,z){const W=nr(z,"16bit"),te=a.aW.deserialize({arrayBuffer:W.vertices,length:W.vertices.byteLength/2/2}),le=a.aY.deserialize({arrayBuffer:W.indices,length:W.indices.byteLength/2/3});return new ii(R.createVertexBuffer(te,Ri.members),R.createIndexBuffer(le),a.aX.simpleSegment(0,0,te.length,le.length))})(l,h);return this._tileMeshCache[x]=C,C}recalculate(l){}hasTransition(){const l=k();let h=!1;return h=h||(l-this._errorMeasurementLastChangeTime)/1e3<.7,h=h||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,h}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const Tn=new a.t({type:new a.D(a.u.projection.type)});class Dn extends a.E{constructor(l){super(),this._transitionable=new a.x(Tn,void 0),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new ai,this._verticalPerspectiveProjection=new $r}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.bw){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,h,x,C,R){return this.currentProjection.getMeshFromTileID(l,h,x,C,R)}setProjection(l){this._transitionable.setValue("type",l?.type||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function Mn(L){const l=Mi(L.worldSize,L.center.lat);return 2*Math.PI*l}function ni(L,l,h,x,C){const R=1/(1<<C),z=l/a.a5*R+x*R,W=a.by((L/a.a5*R+h*R)*Math.PI*2+Math.PI,2*Math.PI),te=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,le=Math.cos(te),pe=new Float64Array(3);return pe[0]=Math.sin(W)*le,pe[1]=Math.sin(te),pe[2]=Math.cos(W)*le,pe}function On(L){return(function(l,h){const x=Math.cos(h),C=new Float64Array(3);return C[0]=Math.sin(l)*x,C[1]=Math.sin(h),C[2]=Math.cos(l)*x,C})(L.lng*Math.PI/180,L.lat*Math.PI/180)}function Mi(L,l){return L/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Fi(L){const l=Math.asin(L[1])/Math.PI*180,h=Math.sqrt(L[0]*L[0]+L[2]*L[2]);if(h>1e-6){const x=L[0]/h,C=Math.acos(L[2]/h),R=(x>0?C:-C)/Math.PI*180;return new a.V(a.W(R,-180,180),l)}return new a.V(0,l)}function Gi(L){return Math.cos(L*Math.PI/180)}function pi(L,l){const h=Gi(L),x=Gi(l);return a.at(x/h)}function ga(L,l){const h=L.rotate(l.bearingInRadians),x=l.zoom+pi(l.center.lat,0),C=a.bu(1/Gi(l.center.lat),1/Gi(Math.min(Math.abs(l.center.lat),60)),a.bx(x,7,3,0,1)),R=360/Mn({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.V(l.center.lng-h.x*R*C,a.an(l.center.lat+h.y*R,-a.ao,a.ao))}function Ia(L){const l=.5*L,h=Math.sin(l),x=Math.cos(l);return Math.log(h+x)-Math.log(x-h)}function Ss(L,l,h,x){const C=L.lat+h*x;if(Math.abs(h)>1){const R=(Math.sign(L.lat+h)!==Math.sign(L.lat)?-Math.abs(L.lat):Math.abs(L.lat))*Math.PI/180,z=Math.abs(L.lat+h)*Math.PI/180,W=Ia(R+x*(z-R)),te=Ia(R),le=Ia(z);return new a.V(L.lng+l*((W-te)/(le-te)),C)}return new a.V(L.lng+l*x,C)}class qs{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=l}swapBuffers(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(l,h,x,C){const R=`${l.z}_${l.x}_${l.y}_${C?.terrain?"t":""}`,z=this._cache.get(R);if(z)return z;const W=this._cachePrevious.get(R);if(W)return this._cache.set(R,W),W;const te=this._boundingVolumeFactory(l,h,x,C);return this._cache.set(R,te),this._hadAnyChanges=!0,te}}class Cs{constructor(l,h,x,C){this.min=x,this.max=C,this.points=l,this.planes=h}static fromAabb(l,h){const x=[];for(let C=0;C<8;C++)x.push([1&~C?l[0]:h[0],(C>>1&1)==1?h[1]:l[1],(C>>2&1)==1?h[2]:l[2]]);return new Cs(x,[[-1,0,0,h[0]],[1,0,0,-l[0]],[0,-1,0,h[1]],[0,1,0,-l[1]],[0,0,-1,h[2]],[0,0,1,-l[2]]],l,h)}static fromCenterSizeAngles(l,h,x){const C=a.bB([],x[0],x[1],x[2]),R=a.bC([],[h[0],0,0],C),z=a.bC([],[0,h[1],0],C),W=a.bC([],[0,0,h[2]],C),te=[...l],le=[...l];for(let Ie=0;Ie<8;Ie++)for(let Te=0;Te<3;Te++){const qe=l[Te]+R[Te]*(1&~Ie?-1:1)+z[Te]*((Ie>>1&1)==1?1:-1)+W[Te]*((Ie>>2&1)==1?1:-1);te[Te]=Math.min(te[Te],qe),le[Te]=Math.max(le[Te],qe)}const pe=[];for(let Ie=0;Ie<8;Ie++){const Te=[...l];a.b0(Te,Te,a.a$([],R,1&~Ie?-1:1)),a.b0(Te,Te,a.a$([],z,(Ie>>1&1)==1?1:-1)),a.b0(Te,Te,a.a$([],W,(Ie>>2&1)==1?1:-1)),pe.push(Te)}return new Cs(pe,[[...R,-a.b5(R,pe[0])],[...z,-a.b5(z,pe[0])],[...W,-a.b5(W,pe[0])],[-R[0],-R[1],-R[2],-a.b5(R,pe[7])],[-z[0],-z[1],-z[2],-a.b5(z,pe[7])],[-W[0],-W[1],-W[2],-a.b5(W,pe[7])]],te,le)}intersectsFrustum(l){let h=!0;const x=this.points.length,C=this.planes.length,R=l.planes.length,z=l.points.length;for(let W=0;W<R;W++){const te=l.planes[W];let le=0;for(let pe=0;pe<x;pe++){const Ie=this.points[pe];te[0]*Ie[0]+te[1]*Ie[1]+te[2]*Ie[2]+te[3]>=0&&le++}if(le===0)return 0;le<x&&(h=!1)}if(h)return 2;for(let W=0;W<C;W++){const te=this.planes[W];let le=0;for(let pe=0;pe<z;pe++){const Ie=l.points[pe];te[0]*Ie[0]+te[1]*Ie[1]+te[2]*Ie[2]+te[3]>=0&&le++}if(le===0)return 0}return 1}intersectsPlane(l){const h=this.points.length;let x=0;for(let C=0;C<h;C++){const R=this.points[C];l[0]*R[0]+l[1]*R[1]+l[2]*R[2]+l[3]>=0&&x++}return x===h?2:x===0?0:1}}function Co(L,l,h){const x=L-l;return x<0?-x:Math.max(0,x-h)}function Es(L,l,h,x,C){const R=L-h;let z;return z=R<0?Math.min(-R,1+R-C):R>1?Math.min(Math.max(R-C,0),1-R):0,Math.max(z,Co(l,x,C))}class ya{constructor(){this._boundingVolumeCache=new qs(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(l,h,x,C){const R=1<<x.z,z=1/R,W=x.x/R,te=x.y/R;let le=2;return le=Math.min(le,Es(l,h,W,te,z)),le=Math.min(le,Es(l,h,W+.5,-te-z,z)),le=Math.min(le,Es(l,h,W+.5,2-te-z,z)),le}getWrap(l,h,x){const C=1<<h.z,R=1/C,z=h.x/C,W=Co(l.x,z,R),te=Co(l.x,z-1,R),le=Co(l.x,z+1,R),pe=Math.min(W,te,le);return pe===le?1:pe===te?-1:0}allowVariableZoom(l,h){return en(l,h)>4}allowWorldCopies(){return!1}getTileBoundingVolume(l,h,x,C){return this._boundingVolumeCache.getTileBoundingVolume(l,h,x,C)}_computeTileBoundingVolume(l,h,x,C){var R,z;let W=0,te=0;if(C?.terrain){const le=new a.a2(l.z,h,l.z,l.x,l.y),pe=C.terrain.getMinMaxElevation(le);W=(R=pe.minElevation)!==null&&R!==void 0?R:Math.min(0,x),te=(z=pe.maxElevation)!==null&&z!==void 0?z:Math.max(0,x)}if(W/=a.bE,te/=a.bE,W+=1,te+=1,l.z<=0)return Cs.fromAabb([-te,-te,-te],[te,te,te]);if(l.z===1)return Cs.fromAabb([l.x===0?-te:0,l.y===0?0:-te,-te],[l.x===0?0:te,l.y===0?te:0,te]);{const le=[ni(0,0,l.x,l.y,l.z),ni(a.a5,0,l.x,l.y,l.z),ni(a.a5,a.a5,l.x,l.y,l.z),ni(0,a.a5,l.x,l.y,l.z)],pe=[];for(const hr of le)pe.push(a.a$([],hr,te));if(te!==W)for(const hr of le)pe.push(a.a$([],hr,W));l.y===0&&pe.push([0,1,0]),l.y===(1<<l.z)-1&&pe.push([0,-1,0]);const Ie=[1,1,1],Te=[-1,-1,-1];for(const hr of pe)for(let mr=0;mr<3;mr++)Ie[mr]=Math.min(Ie[mr],hr[mr]),Te[mr]=Math.max(Te[mr],hr[mr]);const qe=ni(a.a5/2,a.a5/2,l.x,l.y,l.z),Ze=a.b4([],[0,1,0],qe);a.b3(Ze,Ze);const ft=a.b4([],qe,Ze);a.b3(ft,ft);const mt=a.b4([],le[2],le[1]);a.b3(mt,mt);const pt=a.b4([],le[0],le[3]);a.b3(pt,pt),pe.push(a.a$([],qe,te)),l.y>=(1<<l.z)/2&&pe.push(a.a$([],ni(a.a5/2,0,l.x,l.y,l.z),te)),l.y<(1<<l.z)/2&&pe.push(a.a$([],ni(a.a5/2,a.a5,l.x,l.y,l.z),te));const _t=Ts(qe,pe),Lt=Ts(ft,pe),xt=[-qe[0],-qe[1],-qe[2],_t.max],Rt=[qe[0],qe[1],qe[2],-_t.min],Bt=[-ft[0],-ft[1],-ft[2],Lt.max],Mt=[ft[0],ft[1],ft[2],-Lt.min],Xt=[...mt,0],gr=[...pt,0],ur=[];return l.y===0?ur.push(a.bD(gr,Xt,xt),a.bD(gr,Xt,Rt)):ur.push(a.bD(Bt,Xt,xt),a.bD(Bt,Xt,Rt),a.bD(Bt,gr,xt),a.bD(Bt,gr,Rt)),l.y===(1<<l.z)-1?ur.push(a.bD(gr,Xt,xt),a.bD(gr,Xt,Rt)):ur.push(a.bD(Mt,Xt,xt),a.bD(Mt,Xt,Rt),a.bD(Mt,gr,xt),a.bD(Mt,gr,Rt)),new Cs(ur,[xt,Rt,Bt,Mt,Xt,gr],Ie,Te)}}}function Ts(L,l){let h=1/0,x=-1/0;for(const C of l){const R=a.b5(L,C);h=Math.min(h,R),x=Math.max(x,R)}return{min:h,max:x}}class nl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,h,x){return this._helper.interpolatePadding(l,h,x)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,h){this._helper.resize(l,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrainOverride(l){this._helper.setConstrainOverride(l)}overrideNearFarZ(l,h){this._helper.overrideNearFarZ(l,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(l){this._cachedClippingPlane=a.bF(),this._projectionMatrix=a.bj(),this._globeViewProjMatrix32f=a.bi(),this._globeViewProjMatrixNoCorrection=a.bj(),this._globeViewProjMatrixNoCorrectionInverted=a.bj(),this._globeProjMatrixInverted=a.bj(),this._cameraPosition=a.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(h,x)=>{const C=a.an(h.lat,-a.ao,a.ao),R=a.an(+x,this.minZoom+pi(0,C),this.maxZoom);return{center:new a.V(h.lng,C),zoom:R}},this.applyConstrain=(h,x)=>this._helper.applyConstrain(h,x),this._helper=new os({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,x)=>this.defaultConstrain(h,x)},l),this._coveringTilesDetailsProvider=new ya}clone(){const l=new nl;return l.apply(this,!1),l}apply(l,h,x){this._globeLatitudeErrorCorrectionRadians=x||0,this._helper.apply(l,h)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bz();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:h,applyGlobeMatrix:x}=l,C=this._helper.getMercatorTileCoordinates(h);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:C,clippingPlane:this._cachedClippingPlane,projectionTransition:x?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const h=this.pitchInRadians,x=this.cameraToCenterDistance/l,C=Math.sin(h)*x,R=Math.cos(h)*x+1,z=1/Math.sqrt(C*C+R*R)*1;let W=-C,te=R;const le=Math.sqrt(W*W+te*te);W/=le,te/=le;const pe=[0,W,te];a.bG(pe,pe,[0,0,0],-this.bearingInRadians),a.bH(pe,pe,[0,0,0],-1*this.center.lat*Math.PI/180),a.bI(pe,pe,[0,0,0],this.center.lng*Math.PI/180);const Ie=1/a.b7(pe);return a.a$(pe,pe,Ie),[...pe,-z*Ie]}isLocationOccluded(l){return!this.isSurfacePointVisible(On(l))}transformLightDirection(l){const h=this._helper._center.lng*Math.PI/180,x=this._helper._center.lat*Math.PI/180,C=Math.cos(x),R=[Math.sin(h)*C,Math.sin(x),Math.cos(h)*C],z=[R[2],0,-R[0]],W=[0,0,0];a.b4(W,z,R),a.b3(z,z),a.b3(W,W);const te=[0,0,0];return a.b3(te,[z[0]*l[0]+W[0]*l[1]+R[0]*l[2],z[1]*l[0]+W[1]*l[1]+R[1]*l[2],z[2]*l[0]+W[2]*l[1]+R[2]*l[2]]),te}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,h,x){const C=(function(W,te,le){const pe=1/(1<<le.z);return new a.a9(W/a.a5*pe+le.x*pe,te/a.a5*pe+le.y*pe)})(l,h,x.canonical),R=(z=C.y,[a.by(C.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(R[1])}projectTileCoordinates(l,h,x,C){const R=x.canonical,z=ni(l,h,R.x,R.y,R.z),W=1+(C?C(l,h):0)/a.bE,te=[z[0]*W,z[1]*W,z[2]*W,1];a.aH(te,te,this._globeViewProjMatrixNoCorrection);const le=this._cachedClippingPlane,pe=le[0]*z[0]+le[1]*z[1]+le[2]*z[2]+le[3]<0;return{point:new a.P(te[0]/te[3],te[1]/te[3]),signedDistanceFromCamera:te[3],isOccluded:pe}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=Mi(this.worldSize,this.center.lat),h=a.bk(),x=a.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.be(h,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const C=this.centerOffset;h[8]=2*-C.x/this._helper._width,h[9]=2*C.y/this._helper._height,this._projectionMatrix=a.bf(h),this._globeProjMatrixInverted=a.bk(),a.aB(this._globeProjMatrixInverted,h),a.O(h,h,[0,0,-this.cameraToCenterDistance]),a.bg(h,h,this.rollInRadians),a.bh(h,h,-this.pitchInRadians),a.bg(h,h,this.bearingInRadians),a.O(h,h,[0,0,-l]);const R=a.bz();R[0]=l,R[1]=l,R[2]=l,a.bh(x,h,this.center.lat*Math.PI/180),a.bJ(x,x,-this.center.lng*Math.PI/180),a.Q(x,x,R),this._globeViewProjMatrixNoCorrection=x,a.bh(h,h,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bJ(h,h,-this.center.lng*Math.PI/180),a.Q(h,h,R),this._globeViewProjMatrix32f=new Float32Array(h),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),a.aB(this._globeViewProjMatrixNoCorrectionInverted,x);const z=a.bz();this._cameraPosition=a.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bG(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),a.bH(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),a.bG(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),a.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bH(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),a.bI(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const W=a.bf(this._globeViewProjMatrixNoCorrectionInverted);a.Q(W,W,[1,1,-1]),this._cachedFrustum=Fa.fromInvProjectionMatrix(W,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const h=a.bk();return a.ar(h),h}getVisibleUnwrappedCoordinates(l){return[new a.bc(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,h){if(!this._globeViewProjMatrixNoCorrection)return 1;const x=On(l);a.a$(x,x,1+h/a.bE);const C=a.bF();return a.aH(C,[x[0],x[1],x[2],1],this._globeViewProjMatrixNoCorrection),C[2]/C[3]}populateCache(l){}getBounds(){const l=.5*this.width,h=.5*this.height,x=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,h),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,h)],C=[];for(const Ie of x)C.push(this.unprojectScreenPoint(Ie));let R=0,z=0,W=0,te=0;const le=this.center;for(const Ie of C){const Te=a.bK(le.lng,Ie.lng),qe=a.bK(le.lat,Ie.lat);Te<z&&(z=Te),Te>R&&(R=Te),qe<te&&(te=qe),qe>W&&(W=qe)}const pe=[le.lng+z,le.lat+te,le.lng+R,le.lat+W];return this.isSurfacePointOnScreen([0,1,0])&&(pe[3]=90,pe[0]=-180,pe[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(pe[1]=-90,pe[0]=-180,pe[2]=180),new $t(pe)}calculateCenterFromCameraLngLatAlt(l,h,x,C){return this._helper.calculateCenterFromCameraLngLatAlt(l,h,x,C)}setLocationAtPoint(l,h){const x=On(this.unprojectScreenPoint(h)),C=On(l),R=a.bz();a.bL(R);const z=a.bz();a.bI(z,x,R,-this.center.lng*Math.PI/180),a.bH(z,z,R,this.center.lat*Math.PI/180);const W=C[0]*C[0]+C[2]*C[2],te=z[0]*z[0];if(W<te)return;const le=Math.sqrt(W-te),pe=-le,Ie=a.bM(C[0],C[2],z[0],le),Te=a.bM(C[0],C[2],z[0],pe),qe=a.bz();a.bI(qe,C,R,-Ie);const Ze=a.bM(qe[1],qe[2],z[1],z[2]),ft=a.bz();a.bI(ft,C,R,-Te);const mt=a.bM(ft[1],ft[2],z[1],z[2]),pt=.5*Math.PI,_t=Ze>=-pt&&Ze<=pt,Lt=mt>=-pt&&mt<=pt;let xt,Rt;if(_t&&Lt){const gr=this.center.lng*Math.PI/180,ur=this.center.lat*Math.PI/180;a.bN(Ie,gr)+a.bN(Ze,ur)<a.bN(Te,gr)+a.bN(mt,ur)?(xt=Ie,Rt=Ze):(xt=Te,Rt=mt)}else if(_t)xt=Ie,Rt=Ze;else{if(!Lt)return;xt=Te,Rt=mt}const Bt=xt/Math.PI*180,Mt=Rt/Math.PI*180,Xt=this.center.lat;this.setCenter(new a.V(Bt,a.an(Mt,-90,90))),this.setZoom(this.zoom+pi(Xt,this.center.lat))}locationToScreenPoint(l,h){const x=On(l);if(h){const C=h.getElevationForLngLatZoom(l,this._helper._tileZoom);a.a$(x,x,1+C/a.bE)}return this._projectSurfacePointToScreen(x)}_projectSurfacePointToScreen(l){const h=a.bF();return a.aH(h,[...l,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],new a.P((.5*h[0]+.5)*this.width,(.5*-h[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,h){if(h){const x=h.pointCoordinate(l);if(x)return x}return a.a9.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,h){var x;return(x=this.screenPointToMercatorCoordinate(l,h))===null||x===void 0?void 0:x.toLngLat()}isPointOnMapSurface(l,h){const x=this._cameraPosition,C=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(x,C)}getRayDirectionFromPixel(l){const h=a.bF();h[0]=l.x/this.width*2-1,h[1]=-1*(l.y/this.height*2-1),h[2]=1,h[3]=1,a.aH(h,h,this._globeViewProjMatrixNoCorrectionInverted),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3];const x=a.bz();x[0]=h[0]-this._cameraPosition[0],x[1]=h[1]-this._cameraPosition[1],x[2]=h[2]-this._cameraPosition[2];const C=a.bz();return a.b3(C,x),C}isSurfacePointVisible(l){const h=this._cachedClippingPlane;return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]+h[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const h=a.bF();return a.aH(h,[...l,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3],h[0]>-1&&h[0]<1&&h[1]>-1&&h[1]<1&&h[2]>-1&&h[2]<1}rayPlanetIntersection(l,h){const x=a.b5(l,h),C=a.bz(),R=a.bz();a.a$(R,h,x),a.b2(C,l,R);const z=1-a.b5(C,C);if(z<0)return null;const W=a.b5(l,l)-1,te=-x+(x<0?1:-1)*Math.sqrt(z),le=W/te,pe=te;return{tMin:Math.min(le,pe),tMax:Math.max(le,pe)}}unprojectScreenPoint(l){const h=this._cameraPosition,x=this.getRayDirectionFromPixel(l),C=this.rayPlanetIntersection(h,x);if(C){const pe=a.bz();a.b0(pe,h,[x[0]*C.tMin,x[1]*C.tMin,x[2]*C.tMin]);const Ie=a.bz();return a.b3(Ie,pe),Fi(Ie)}const R=this._cachedClippingPlane,z=R[0]*x[0]+R[1]*x[1]+R[2]*x[2],W=-a.bb(R,h)/z,te=a.bz();if(W>0)a.b0(te,h,[x[0]*W,x[1]*W,x[2]*W]);else{const pe=a.bz();a.b0(pe,h,[2*x[0],2*x[1],2*x[2]]);const Ie=a.bb(this._cachedClippingPlane,pe);a.b2(te,pe,[this._cachedClippingPlane[0]*Ie,this._cachedClippingPlane[1]*Ie,this._cachedClippingPlane[2]*Ie])}const le=(function(pe){const Ie=a.bz();return Ie[0]=pe[0]*-pe[3],Ie[1]=pe[1]*-pe[3],Ie[2]=pe[2]*-pe[3],{center:Ie,radius:Math.sqrt(1-pe[3]*pe[3])}})(R);return Fi((function(pe,Ie,Te){const qe=a.bz();a.b2(qe,Te,pe);const Ze=a.bz();return a.bA(Ze,pe,qe,Ie/a.b9(qe)),Ze})(le.center,le.radius,te))}getMatrixForModel(l,h){const x=a.V.convert(l),C=1/a.bE,R=a.bj();return a.bJ(R,R,x.lng/180*Math.PI),a.bh(R,R,-x.lat/180*Math.PI),a.O(R,R,[0,0,1+h/a.bE]),a.bh(R,R,.5*Math.PI),a.Q(R,R,[C,C,C]),R}getProjectionDataForCustomLayer(l=!0){const h=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:l});return h.tileMercatorCoords=[0,0,1,1],h}getFastPathSimpleProjectionMatrix(l){}}class Yo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,h,x){return this._helper.interpolatePadding(l,h,x)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,h,x=!0){this._helper.resize(l,h,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrainOverride(l){this._helper.setConstrainOverride(l)}overrideNearFarZ(l,h){this._helper.overrideNearFarZ(l,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,h){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=h,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(l){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(h,x)=>this.currentTransform.defaultConstrain(h,x),this.applyConstrain=(h,x)=>this._helper.applyConstrain(h,x),this._helper=new os({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,x)=>this.defaultConstrain(h,x)},l),this._globeness=1,this._mercatorTransform=new xs,this._verticalPerspectiveTransform=new nl}clone(){const l=new Yo;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this,!1),l}apply(l,h){this._helper.apply(l,h),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const h=this._mercatorTransform.getProjectionData(l),x=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?x.mainMatrix:h.mainMatrix,clippingPlane:x.clippingPlane,tileMercatorCoords:x.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:h.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,h,x){const C=this._mercatorTransform.getPitchedTextCorrection(l,h,x),R=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,h,x);return a.bu(C,R,this._globeness)}projectTileCoordinates(l,h,x,C){return this.currentTransform.projectTileCoordinates(l,h,x,C)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,h){return this.currentTransform.lngLatToCameraDepth(l,h)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(l,h,x,C){return this._helper.calculateCenterFromCameraLngLatAlt(l,h,x,C)}setLocationAtPoint(l,h){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,h),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(l,h),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(l,h){return this.currentTransform.locationToScreenPoint(l,h)}screenPointToMercatorCoordinate(l,h){return this.currentTransform.screenPointToMercatorCoordinate(l,h)}screenPointToLocation(l,h){return this.currentTransform.screenPointToLocation(l,h)}isPointOnMapSurface(l,h){return this.currentTransform.isPointOnMapSurface(l,h)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,h){return this.currentTransform.getMatrixForModel(l,h)}getProjectionDataForCustomLayer(l=!0){const h=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return h;const x=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return x.fallbackMatrix=h.mainMatrix,x}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class wi{get useGlobeControls(){return!0}handlePanInertia(l,h){const x=ga(l,h);return Math.abs(x.lng-h.center.lng)>180&&(x.lng=h.center.lng+179.5*Math.sign(x.lng-h.center.lng)),{easingCenter:x,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,h){const x=l.around,C=h.screenPointToLocation(x);l.bearingDelta&&h.setBearing(h.bearing+l.bearingDelta),l.pitchDelta&&h.setPitch(h.pitch+l.pitchDelta),l.rollDelta&&h.setRoll(h.roll+l.rollDelta);const R=h.zoom;l.zoomDelta&&h.setZoom(h.zoom+l.zoomDelta);const z=h.zoom-R;if(z===0)return;const W=a.bK(h.center.lng,C.lng),te=W/(Math.abs(W/180)+1),le=a.bK(h.center.lat,C.lat),pe=h.getRayDirectionFromPixel(x),Ie=h.cameraPosition,Te=-1*a.b5(Ie,pe),qe=a.bz();a.b0(qe,Ie,[pe[0]*Te,pe[1]*Te,pe[2]*Te]);const Ze=a.b7(qe)-1,ft=Math.exp(.5*-Math.max(Ze-.3,0)),mt=Mi(h.worldSize,h.center.lat)/Math.min(h.width,h.height),pt=a.bx(mt,.9,.5,1,.25),_t=(1-a.aq(-z))*Math.min(ft,pt),Lt=h.center.lat,xt=h.zoom,Rt=new a.V(h.center.lng+te*_t,a.an(h.center.lat+le*_t,-a.ao,a.ao));h.setLocationAtPoint(C,x);const Bt=h.center,Mt=a.bx(Math.abs(W),45,85,0,1),Xt=a.bx(mt,.75,.35,0,1),gr=Math.pow(Math.max(Mt,Xt),.25),ur=a.bK(Bt.lng,Rt.lng),hr=a.bK(Bt.lat,Rt.lat);h.setCenter(new a.V(Bt.lng+ur*gr,Bt.lat+hr*gr).wrap()),h.setZoom(xt+pi(Lt,h.center.lat))}handleMapControlsPan(l,h,x){if(!l.panDelta)return;const C=h.center.lat,R=h.zoom;h.setCenter(ga(l.panDelta,h).wrap()),h.setZoom(R+pi(C,h.center.lat))}cameraForBoxAndBearing(l,h,x,C,R){const z=nu(l,h,x,C,R),W=h.left/R.width*2-1,te=(R.width-h.right)/R.width*2-1,le=h.top/R.height*-2+1,pe=(R.height-h.bottom)/R.height*-2+1,Ie=a.bK(x.getWest(),x.getEast())<0,Te=Ie?x.getEast():x.getWest(),qe=Ie?x.getWest():x.getEast(),Ze=Math.max(x.getNorth(),x.getSouth()),ft=Math.min(x.getNorth(),x.getSouth()),mt=Te+.5*a.bK(Te,qe),pt=Ze+.5*a.bK(Ze,ft),_t=R.clone();_t.setCenter(z.center),_t.setBearing(z.bearing),_t.setPitch(0),_t.setRoll(0),_t.setZoom(z.zoom);const Lt=_t.modelViewProjectionMatrix,xt=[On(x.getNorthWest()),On(x.getNorthEast()),On(x.getSouthWest()),On(x.getSouthEast()),On(new a.V(qe,pt)),On(new a.V(Te,pt)),On(new a.V(mt,Ze)),On(new a.V(mt,ft))],Rt=On(z.center);let Bt=Number.POSITIVE_INFINITY;for(const Mt of xt)W<0&&(Bt=wi.getLesserNonNegativeNonNull(Bt,wi.solveVectorScale(Mt,Rt,Lt,"x",W))),te>0&&(Bt=wi.getLesserNonNegativeNonNull(Bt,wi.solveVectorScale(Mt,Rt,Lt,"x",te))),le>0&&(Bt=wi.getLesserNonNegativeNonNull(Bt,wi.solveVectorScale(Mt,Rt,Lt,"y",le))),pe<0&&(Bt=wi.getLesserNonNegativeNonNull(Bt,wi.solveVectorScale(Mt,Rt,Lt,"y",pe)));if(Number.isFinite(Bt)&&Bt!==0)return z.zoom=_t.zoom+a.at(Bt),z;So()}handleJumpToCenterZoom(l,h){const x=l.center.lat,C=l.applyConstrain(h.center?a.V.convert(h.center):l.center,l.zoom).center;l.setCenter(C.wrap());const R=h.zoom!==void 0?+h.zoom:l.zoom+pi(x,C.lat);l.zoom!==R&&l.setZoom(R)}handleEaseTo(l,h){const x=l.zoom,C=l.center,R=l.padding,z={roll:l.roll,pitch:l.pitch,bearing:l.bearing},W={roll:h.roll===void 0?l.roll:h.roll,pitch:h.pitch===void 0?l.pitch:h.pitch,bearing:h.bearing===void 0?l.bearing:h.bearing},te=h.zoom!==void 0,le=!l.isPaddingEqual(h.padding);let pe=!1;const Ie=h.center?a.V.convert(h.center):C,Te=l.applyConstrain(Ie,x).center;_s(l,Te);const qe=l.clone();qe.setCenter(Te),qe.setZoom(te?+h.zoom:x+pi(C.lat,Ie.lat)),qe.setBearing(h.bearing);const Ze=new a.P(a.an(l.centerPoint.x+h.offsetAsPoint.x,0,l.width),a.an(l.centerPoint.y+h.offsetAsPoint.y,0,l.height));qe.setLocationAtPoint(Te,Ze);const ft=(h.offset&&h.offsetAsPoint.mag())>0?qe.center:Te,mt=te?+h.zoom:x+pi(C.lat,ft.lat),pt=x+pi(C.lat,0),_t=mt+pi(ft.lat,0),Lt=a.bK(C.lng,ft.lng),xt=a.bK(C.lat,ft.lat),Rt=a.aq(_t-pt);return pe=mt!==x,{easeFunc:Bt=>{if(a.bo(z,W)||ru({startEulerAngles:z,endEulerAngles:W,tr:l,k:Bt,useSlerp:z.roll!=W.roll}),le&&l.interpolatePadding(R,h.padding,Bt),h.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(h.around,h.aroundPoint);else{const Mt=_t>pt?Math.min(2,Rt):Math.max(.5,Rt),Xt=Math.pow(Mt,1-Bt),gr=Ss(C,Lt,xt,Bt*Xt);l.setCenter(gr.wrap())}if(pe){const Mt=a.G.number(pt,_t,Bt)+pi(0,l.center.lat);l.setZoom(Mt)}},isZooming:pe,elevationCenter:ft}}handleFlyTo(l,h){const x=h.zoom!==void 0,C=l.center,R=l.zoom,z=l.padding,W=!l.isPaddingEqual(h.padding),te=l.applyConstrain(a.V.convert(h.center||h.locationAtOffset),R).center,le=x?+h.zoom:l.zoom+pi(l.center.lat,te.lat),pe=l.clone();pe.setCenter(te),pe.setZoom(le),pe.setBearing(h.bearing);const Ie=new a.P(a.an(l.centerPoint.x+h.offsetAsPoint.x,0,l.width),a.an(l.centerPoint.y+h.offsetAsPoint.y,0,l.height));pe.setLocationAtPoint(te,Ie);const Te=pe.center;_s(l,Te);const qe=(function(xt,Rt,Bt){const Mt=On(Rt),Xt=On(Bt),gr=a.b5(Mt,Xt),ur=Math.acos(gr),hr=Mn(xt);return ur/(2*Math.PI)*hr})(l,C,Te),Ze=R+pi(C.lat,0),ft=le+pi(Te.lat,0),mt=a.aq(ft-Ze);let pt;if(typeof h.minZoom=="number"){const xt=+h.minZoom+pi(Te.lat,0),Rt=Math.min(xt,Ze,ft)+pi(0,Te.lat),Bt=l.applyConstrain(Te,Rt).zoom+pi(Te.lat,0);pt=a.aq(Bt-Ze)}const _t=a.bK(C.lng,Te.lng),Lt=a.bK(C.lat,Te.lat);return{easeFunc:(xt,Rt,Bt,Mt)=>{const Xt=Ss(C,_t,Lt,Bt);W&&l.interpolatePadding(z,h.padding,xt);const gr=xt===1?Te:Xt;l.setCenter(gr.wrap());const ur=Ze+a.at(Rt);l.setZoom(xt===1?le:ur+pi(0,gr.lat))},scaleOfZoom:mt,targetCenter:Te,scaleOfMinZoom:pt,pixelPathLength:qe}}static solveVectorScale(l,h,x,C,R){const z=C==="x"?[x[0],x[4],x[8],x[12]]:[x[1],x[5],x[9],x[13]],W=[x[3],x[7],x[11],x[15]],te=l[0]*z[0]+l[1]*z[1]+l[2]*z[2],le=l[0]*W[0]+l[1]*W[1]+l[2]*W[2],pe=h[0]*z[0]+h[1]*z[1]+h[2]*z[2],Ie=h[0]*W[0]+h[1]*W[1]+h[2]*W[2];return pe+R*le===te+R*Ie||W[3]*(te-pe)+z[3]*(Ie-le)+te*Ie==pe*le?null:(pe+z[3]-R*Ie-R*W[3])/(pe-te-R*Ie+R*le)}static getLesserNonNegativeNonNull(l,h){return h!==null&&h>=0&&h<l?h:l}}class Eo{constructor(l){this._globe=l,this._mercatorCameraHelper=new Ja,this._verticalPerspectiveCameraHelper=new wi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,h){return this.currentHelper.handlePanInertia(l,h)}handleMapControlsRollPitchBearingZoom(l,h){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,h)}handleMapControlsPan(l,h,x){this.currentHelper.handleMapControlsPan(l,h,x)}cameraForBoxAndBearing(l,h,x,C,R){return this.currentHelper.cameraForBoxAndBearing(l,h,x,C,R)}handleJumpToCenterZoom(l,h){this.currentHelper.handleJumpToCenterZoom(l,h)}handleEaseTo(l,h){return this.currentHelper.handleEaseTo(l,h)}handleFlyTo(l,h){return this.currentHelper.handleFlyTo(l,h)}}const xa=(L,l)=>a.B(L,l&&l.filter((h=>h.identifier!=="source.canvas"))),Bo=a.bO();class ss extends a.E{constructor(l,h={}){var x,C;super(),this._rtlPluginLoaded=()=>{for(const z in this.tileManagers){const W=this.tileManagers[z].getSource().type;W!=="vector"&&W!=="geojson"||this.tileManagers[z].reload()}},this.map=l,this.dispatcher=new Ke(ot(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((z,W)=>this.getGlyphs(z,W))),this.dispatcher.registerMessageHandler("GI",((z,W)=>this.getImages(z,W))),this.dispatcher.registerMessageHandler("GDA",((z,W)=>this.getDashes(z,W))),this.imageManager=new H,this.imageManager.setEventedParent(this);const R=((x=l._container)===null||x===void 0?void 0:x.lang)||typeof document<"u"&&((C=document.documentElement)===null||C===void 0?void 0:C.lang)||void 0;this.glyphManager=new Le(l._requestManager,h.localIdeographFontFamily,R),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new dn,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bP()),St().on(Ge,this._rtlPluginLoaded),this.on("data",(z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const W=this.tileManagers[z.sourceId];if(!W)return;const te=W.getSource();if(te&&te.vectorLayerIds)for(const le in this._layers){const pe=this._layers[le];pe.source===te.id&&this._validateLayer(pe)}}))}_setInitialValues(){var l;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((l=this.crossTileSymbolIndex)===null||l===void 0?void 0:l.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(l,h){var x,C,R;this._checkLoaded();const z=h===null?(R=(C=(x=this.stylesheet.state)===null||x===void 0?void 0:x[l])===null||C===void 0?void 0:C.default)!==null&&R!==void 0?R:null:h;if(a.bR(z,this._globalState[l]))return this;this._globalState[l]=z,this._applyGlobalStateChanges([l])}getGlobalState(){return this._globalState}setGlobalState(l){this._checkLoaded();const h=[];for(const x in l)!a.bR(this._globalState[x],l[x].default)&&(h.push(x),this._globalState[x]=l[x].default);this._applyGlobalStateChanges(h)}_applyGlobalStateChanges(l){if(l.length===0)return;const h=new Set,x={};for(const C of l){x[C]=this._globalState[C];for(const R in this._layers){const z=this._layers[R],W=z.getLayoutAffectingGlobalStateRefs(),te=z.getPaintAffectingGlobalStateRefs(),le=z.getVisibilityAffectingGlobalStateRefs();if(W.has(C)&&h.add(z.source),te.has(C))for(const{name:pe,value:Ie}of te.get(C))this._updatePaintProperty(z,pe,Ie);le?.has(C)&&(z.recalculateVisibility(),this._updateLayer(z))}}this.dispatcher.broadcast("UGS",x);for(const C in this.tileManagers)h.has(C)&&(this._reloadSource(C),this._changed=!0)}loadURL(l,h={},x){this.fire(new a.l("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const C=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const R=this._loadStyleRequest;a.j(C,this._loadStyleRequest).then((z=>{this._loadStyleRequest=null,this._load(z.data,h,x)})).catch((z=>{this._loadStyleRequest=null,z&&!R.signal.aborted&&this.fire(new a.k(z))}))}loadJSON(l,h={},x){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,_.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(l,h,x)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Bo,{validate:!1})}_load(l,h,x){var C,R;let z=h.transformStyle?h.transformStyle(x,l):l;if(!h.validate||!xa(this,a.C(z))){z=Object.assign({},z),this._loaded=!0,this.stylesheet=z;for(const W in z.sources)this.addSource(W,z.sources[W],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new Se(this.stylesheet.light),this._setProjectionInternal(((C=this.stylesheet.projection)===null||C===void 0?void 0:C.type)||"mercator"),this.sky=new he(this.stylesheet.sky),this.map.setTerrain((R=this.stylesheet.terrain)!==null&&R!==void 0?R:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var l,h,x;const C=a.bS(this.stylesheet.layers);this.setGlobalState((l=this.stylesheet.state)!==null&&l!==void 0?l:null),this.dispatcher.broadcast("SL",C),this._order=C.map((R=>R.id)),this._layers={},this._serializedLayers=null;for(const R of C){const z=a.bT(R,this._globalState);if(z.setEventedParent(this,{layer:{id:R.id}}),this._layers[R.id]=z,a.bU(z)&&this.tileManagers[z.source]){const W=(x=(h=R.paint)===null||h===void 0?void 0:h["raster-fade-duration"])!==null&&x!==void 0?x:z.paint.get("raster-fade-duration");this.tileManagers[z.source].setRasterFadeDuration(W)}}}_loadSprite(l,h=!1,x=void 0){this.imageManager.setLoaded(!1);const C=new AbortController;let R;this._spriteRequest=C,(function(z,W,te,le){return a._(this,void 0,void 0,(function*(){const pe=Z(z),Ie=te>1?"@2x":"",Te={},qe={};for(const{id:Ze,url:ft}of pe){const mt=W.transformRequest(oe(ft,Ie,".json"),"SpriteJSON");Te[Ze]=a.j(mt,le);const pt=W.transformRequest(oe(ft,Ie,".png"),"SpriteImage");qe[Ze]=U.getImage(pt,le)}return yield Promise.all([...Object.values(Te),...Object.values(qe)]),(function(Ze,ft){return a._(this,void 0,void 0,(function*(){const mt={};for(const pt in Ze){mt[pt]={};const _t=_.getImageCanvasContext((yield ft[pt]).data),Lt=(yield Ze[pt]).data;for(const xt in Lt){const{width:Rt,height:Bt,x:Mt,y:Xt,sdf:gr,pixelRatio:ur,stretchX:hr,stretchY:mr,content:Yr,textFitWidth:Qr,textFitHeight:Br}=Lt[xt];mt[pt][xt]={data:null,pixelRatio:ur,sdf:gr,stretchX:hr,stretchY:mr,content:Yr,textFitWidth:Qr,textFitHeight:Br,spriteData:{width:Rt,height:Bt,x:Mt,y:Xt,context:_t}}}}return mt}))})(Te,qe)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((z=>{if(this._spriteRequest=null,z)for(const W in z){this._spritesImagesIds[W]=[];const te=this._spritesImagesIds[W]?this._spritesImagesIds[W].filter((le=>!(le in z))):[];for(const le of te)this.imageManager.removeImage(le),this._changedImages[le]=!0;for(const le in z[W]){const pe=W==="default"?le:`${W}:${le}`;this._spritesImagesIds[W].push(pe),pe in this.imageManager.images?this.imageManager.updateImage(pe,z[W][le],!1):this.imageManager.addImage(pe,z[W][le]),h&&(this._changedImages[pe]=!0)}}})).catch((z=>{this._spriteRequest=null,R=z,C.signal.aborted||this.fire(new a.k(R))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),x&&x(R)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const h=this.tileManagers[l.source];if(!h)return;const x=l.sourceLayer;if(!x)return;const C=h.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(x)===-1)&&this.fire(new a.k(new Error(`Source layer "${x}" does not exist on source "${C.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.tileManagers)if(!this.tileManagers[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,h=!1){const x=this._serializedAllLayers();if(!l||l.length===0)return Object.values(h?a.bV(x):x);const C=[];for(const R of l)if(x[R]){const z=h?a.bV(x[R]):x[R];C.push(z)}return C}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const h=Object.keys(this._layers);for(const x of h){const C=this._layers[x];C.type!=="custom"&&(l[x]=C.serialize())}return l}hasTransitions(){var l,h,x;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((h=this.sky)===null||h===void 0)&&h.hasTransition()||!((x=this.projection)===null||x===void 0)&&x.hasTransition())return!0;for(const C in this.tileManagers)if(this.tileManagers[C].hasTransition())return!0;for(const C in this._layers)if(this._layers[C].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const h=this._changed;if(h){const C=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(C.length||R.length)&&this._updateWorkerLayers(C,R);for(const z in this._updatedSources){const W=this._updatedSources[z];if(W==="reload")this._reloadSource(z);else{if(W!=="clear")throw new Error(`Invalid action ${W}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const x={};for(const C in this.tileManagers){const R=this.tileManagers[C];x[C]=R.used,R.used=!1}for(const C of this._order){const R=this._layers[C];R.recalculate(l,this._availableImages),!R.isHidden(l.zoom)&&R.source&&(this.tileManagers[R.source].used=!0)}for(const C in x){const R=this.tileManagers[C];!!x[C]!=!!R.used&&R.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,h&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const h in this.tileManagers)this.tileManagers[h].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.tileManagers)this.tileManagers[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,h={}){var x;this._checkLoaded();const C=this.serialize();if(l=h.transformStyle?h.transformStyle(C,l):l,((x=h.validate)===null||x===void 0||x)&&xa(this,a.C(l)))return!1;(l=a.bV(l)).layers=a.bS(l.layers);const R=a.bW(C,l),z=this._getOperationsToPerform(R);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const W of z.operations)W();return this.stylesheet=l,this._serializedLayers=null,this.fire(new a.l("style.load",{style:this})),!0}_getOperationsToPerform(l){const h=[],x=[];for(const C of l)switch(C.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":h.push((()=>this.addLayer.apply(this,C.args)));break;case"removeLayer":h.push((()=>this.removeLayer.apply(this,C.args)));break;case"setPaintProperty":h.push((()=>this.setPaintProperty.apply(this,C.args)));break;case"setLayoutProperty":h.push((()=>this.setLayoutProperty.apply(this,C.args)));break;case"setFilter":h.push((()=>this.setFilter.apply(this,C.args)));break;case"addSource":h.push((()=>this.addSource.apply(this,C.args)));break;case"removeSource":h.push((()=>this.removeSource.apply(this,C.args)));break;case"setLayerZoomRange":h.push((()=>this.setLayerZoomRange.apply(this,C.args)));break;case"setLight":h.push((()=>this.setLight.apply(this,C.args)));break;case"setGeoJSONSourceData":h.push((()=>this.setGeoJSONSourceData.apply(this,C.args)));break;case"setGlyphs":h.push((()=>this.setGlyphs.apply(this,C.args)));break;case"setSprite":h.push((()=>this.setSprite.apply(this,C.args)));break;case"setTerrain":h.push((()=>this.map.setTerrain.apply(this,C.args)));break;case"setSky":h.push((()=>this.setSky.apply(this,C.args)));break;case"setProjection":this.setProjection.apply(this,C.args);break;case"setGlobalState":h.push((()=>this.setGlobalState.apply(this,C.args)));break;case"setTransition":h.push((()=>{}));break;default:x.push(C.command)}return{operations:h,unimplemented:x}}addImage(l,h){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,h),this._afterImageUpdated(l)}updateImage(l,h){this.imageManager.updateImage(l,h)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,h,x={}){if(this._checkLoaded(),this.tileManagers[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.C.source,`sources.${l}`,h,null,x))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const C=this.tileManagers[l]=new gi(l,h,this.dispatcher);C.style=this,C.setEventedParent(this,(()=>({isSourceLoaded:C.loaded(),source:C.serialize(),sourceId:l}))),C.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.tileManagers[l]===void 0)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));const h=this.tileManagers[l];delete this.tileManagers[l],delete this._updatedSources[l],h.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,h){if(this._checkLoaded(),this.tileManagers[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const x=this.tileManagers[l].getSource();if(x.type!=="geojson")throw new Error(`geojsonSource.type is ${x.type}, which is !== 'geojson`);x.setData(h),this._changed=!0}getSource(l){return this.tileManagers[l]&&this.tileManagers[l].getSource()}addLayer(l,h,x={}){this._checkLoaded();const C=l.id;if(this.getLayer(C))return void this.fire(new a.k(new Error(`Layer "${C}" already exists on this map.`)));let R;if(l.type==="custom"){if(xa(this,a.bX(l)))return;R=a.bT(l,this._globalState)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(C,l.source),l=a.bV(l),l=a.e(l,{source:C})),this._validate(a.C.layer,`layers.${C}`,l,{arrayIndex:-1},x))return;R=a.bT(l,this._globalState),this._validateLayer(R),R.setEventedParent(this,{layer:{id:C}})}const z=h?this._order.indexOf(h):this._order.length;if(h&&z===-1)this.fire(new a.k(new Error(`Cannot add layer "${C}" before non-existing layer "${h}".`)));else{if(this._order.splice(z,0,C),this._layerOrderChanged=!0,this._layers[C]=R,this._removedLayers[C]&&R.source&&R.type!=="custom"){const W=this._removedLayers[C];delete this._removedLayers[C],W.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",this.tileManagers[R.source].pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map)}}moveLayer(l,h){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===h)return;const x=this._order.indexOf(l);this._order.splice(x,1);const C=h?this._order.indexOf(h):this._order.length;h&&C===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${h}".`))):(this._order.splice(C,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const h=this._layers[l];if(!h)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));h.setEventedParent(null);const x=this._order.indexOf(l);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=h,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],h.onRemove&&h.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,h,x){this._checkLoaded();const C=this.getLayer(l);C?C.minzoom===h&&C.maxzoom===x||(h!=null&&(C.minzoom=h),x!=null&&(C.maxzoom=x),this._updateLayer(C)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,h,x={}){this._checkLoaded();const C=this.getLayer(l);if(C){if(!a.bR(C.filter,h))return h==null?(C.setFilter(void 0),void this._updateLayer(C)):void(this._validate(a.C.filter,`layers.${C.id}.filter`,h,null,x)||(C.setFilter(a.bV(h)),this._updateLayer(C)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bV(this.getLayer(l).filter)}setLayoutProperty(l,h,x,C={}){this._checkLoaded();const R=this.getLayer(l);R?a.bR(R.getLayoutProperty(h),x)||(R.setLayoutProperty(h,x,C),this._updateLayer(R)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,h){const x=this.getLayer(l);if(x)return x.getLayoutProperty(h);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,h,x,C={}){this._checkLoaded();const R=this.getLayer(l);R?a.bR(R.getPaintProperty(h),x)||this._updatePaintProperty(R,h,x,C):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}_updatePaintProperty(l,h,x,C={}){l.setPaintProperty(h,x,C)&&this._updateLayer(l),a.bU(l)&&h==="raster-fade-duration"&&this.tileManagers[l.source].setRasterFadeDuration(x),this._changed=!0,this._updatedPaintProps[l.id]=!0,this._serializedLayers=null}getPaintProperty(l,h){return this.getLayer(l).getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const x=l.source,C=l.sourceLayer,R=this.tileManagers[x];if(R===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const z=R.getSource().type;z==="geojson"&&C?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||C?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),R.setFeatureState(C,l.id,h)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,h){this._checkLoaded();const x=l.source,C=this.tileManagers[x];if(C===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const R=C.getSource().type,z=R==="vector"?l.sourceLayer:void 0;R!=="vector"||z?h&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(z,l.id,h):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const h=l.source,x=l.sourceLayer,C=this.tileManagers[h];if(C!==void 0)return C.getSource().type!=="vector"||x?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),C.getFeatureState(x,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bY(this.tileManagers,(R=>R.serialize())),h=this._serializeByIds(this._order,!0),x=this.map.getTerrain()||void 0,C=this.stylesheet;return a.bZ({version:C.version,name:C.name,metadata:C.metadata,light:C.light,sky:C.sky,center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,sprite:C.sprite,glyphs:C.glyphs,transition:C.transition,projection:C.projection,sources:l,layers:h,terrain:x},(R=>R!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.tileManagers[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.tileManagers[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const h=z=>this._layers[z].type==="fill-extrusion",x={},C=[];for(let z=this._order.length-1;z>=0;z--){const W=this._order[z];if(h(W)){x[W]=z;for(const te of l){const le=te[W];if(le)for(const pe of le)C.push(pe)}}}C.sort(((z,W)=>W.intersectionZ-z.intersectionZ));const R=[];for(let z=this._order.length-1;z>=0;z--){const W=this._order[z];if(h(W))for(let te=C.length-1;te>=0;te--){const le=C[te].feature;if(x[le.layer.id]<z)break;R.push(le),C.pop()}else for(const te of l){const le=te[W];if(le)for(const pe of le)R.push(pe.feature)}}return R}queryRenderedFeatures(l,h,x){h&&h.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",h.filter,null,h);const C={};if(h&&h.layers){if(!(Array.isArray(h.layers)||h.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const le of h.layers){const pe=this._layers[le];if(!pe)return this.fire(new a.k(new Error(`The layer '${le}' does not exist in the map's style and cannot be queried for features.`))),[];C[pe.source]=!0}}const R=[];h.availableImages=this._availableImages;const z=this._serializedAllLayers(),W=h.layers instanceof Set?h.layers:Array.isArray(h.layers)?new Set(h.layers):null,te=Object.assign(Object.assign({},h),{layers:W,globalState:this._globalState});for(const le in this.tileManagers)h.layers&&!C[le]||R.push(Nt(this.tileManagers[le],this._layers,z,l,te,x,this.map.terrain?(pe,Ie,Te)=>this.map.terrain.getElevation(pe,Ie,Te):void 0));return this.placement&&R.push((function(le,pe,Ie,Te,qe,Ze,ft){const mt={},pt=Ze.queryRenderedSymbols(Te),_t=[];for(const Lt of Object.keys(pt).map(Number))_t.push(ft[Lt]);_t.sort(st);for(const Lt of _t){const xt=Lt.featureIndex.lookupSymbolFeatures(pt[Lt.bucketInstanceId],pe,Lt.bucketIndex,Lt.sourceLayerIndex,{filterSpec:qe.filter,globalState:qe.globalState},qe.layers,qe.availableImages,le);for(const Rt in xt){const Bt=mt[Rt]=mt[Rt]||[],Mt=xt[Rt];Mt.sort(((Xt,gr)=>{const ur=Lt.featureSortOrder;if(ur){const hr=ur.indexOf(Xt.featureIndex);return ur.indexOf(gr.featureIndex)-hr}return gr.featureIndex-Xt.featureIndex}));for(const Xt of Mt)Bt.push(Xt)}}return(function(Lt,xt,Rt){for(const Bt in Lt)for(const Mt of Lt[Bt])$e(Mt,Rt[xt[Bt].source]);return Lt})(mt,le,Ie)})(this._layers,z,this.tileManagers,l,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(l,h){h?.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",h.filter,null,h);const x=this.tileManagers[l];return x?(function(C,R){const z=C.getRenderableIds().map((le=>C.getTileByID(le))),W=[],te={};for(let le=0;le<z.length;le++){const pe=z[le],Ie=pe.tileID.canonical.key;te[Ie]||(te[Ie]=!0,pe.querySourceFeatures(W,R))}return W})(x,h?Object.assign(Object.assign({},h),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(l,h={}){this._checkLoaded();const x=this.light.getLight();let C=!1;for(const z in l)if(!a.bR(l[z],x[z])){C=!0;break}if(!C)return;const R={now:k(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,h),this.light.updateTransitions(R)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,h={}){this._checkLoaded();const x=this.getSky();let C=!1;if(!l&&!x)return;if(l&&!x)C=!0;else if(!l&&x)C=!0;else for(const z in l)if(!a.bR(l[z],x[z])){C=!0;break}if(!C)return;const R={now:k(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,h),this.sky.updateTransitions(R)}_setProjectionInternal(l){const h=(function(x,C){const R={constrainOverride:C};if(Array.isArray(x)){const z=new Dn({type:x});return{projection:z,transform:new Yo(R),cameraHelper:new Eo(z)}}switch(x){case"mercator":return{projection:new ai,transform:new xs(R),cameraHelper:new Ja};case"globe":{const z=new Dn({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:z,transform:new Yo(R),cameraHelper:new Eo(z)}}case"vertical-perspective":return{projection:new $r,transform:new nl(R),cameraHelper:new wi};default:return a.w(`Unknown projection name: ${x}. Falling back to mercator projection.`),{projection:new ai,transform:new xs(R),cameraHelper:new Ja}}})(l,this.map.transformConstrain);this.projection=h.projection,this.map.migrateProjection(h.transform,h.cameraHelper);for(const x in this.tileManagers)this.tileManagers[x].reload()}_validate(l,h,x,C,R={}){return(!R||R.validate!==!1)&&xa(this,l.call(a.C,a.e({key:h,style:this.serialize(),value:x,styleSpec:a.u},C)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),St().off(Ge,this._rtlPluginLoaded);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.tileManagers){const x=this.tileManagers[h];x.setEventedParent(null),x.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.tileManagers[l].clearTiles()}_reloadSource(l){this.tileManagers[l].resume(),this.tileManagers[l].reload()}_updateSources(l){for(const h in this.tileManagers)this.tileManagers[h].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.tileManagers)this._reloadSource(l)}_updatePlacement(l,h,x,C,R=!1){let z=!1,W=!1;const te={};for(const le of this._order){const pe=this._layers[le];if(pe.type!=="symbol")continue;if(!te[pe.source]){const Te=this.tileManagers[pe.source];te[pe.source]=Te.getRenderableIds(!0).map((qe=>Te.getTileByID(qe))).sort(((qe,Ze)=>Ze.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(Ze.tileID)?-1:1)))}const Ie=this.crossTileSymbolIndex.addLayer(pe,te[pe.source],l.center.lng);z=z||Ie}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((R=R||this._layerOrderChanged||x===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k(),l.zoom))&&(this.pauseablePlacement=new Kr(l,this.map.terrain,this._order,R,h,x,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k()),W=!0),z&&this.pauseablePlacement.placement.setStale()),W||z)for(const le of this._order){const pe=this._layers[le];pe.type==="symbol"&&this.placement.updateLayerOpacities(pe,te[pe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k())}_releaseSymbolFadeTiles(){for(const l in this.tileManagers)this.tileManagers[l].releaseSymbolFadeTiles()}getImages(l,h){return a._(this,void 0,void 0,(function*(){const x=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();const C=this.tileManagers[h.source];return C&&C.setDependencies(h.tileID.key,h.type,h.icons),x}))}getGlyphs(l,h){return a._(this,void 0,void 0,(function*(){const x=yield this.glyphManager.getGlyphs(h.stacks),C=this.tileManagers[h.source];return C&&C.setDependencies(h.tileID.key,h.type,[""]),x}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,h={}){this._checkLoaded(),l&&this._validate(a.C.glyphs,"glyphs",l,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}getDashes(l,h){return a._(this,void 0,void 0,(function*(){const x={};for(const[C,R]of Object.entries(h.dashes))x[C]=this.lineAtlas.getDash(R.dasharray,R.round);return x}))}addSprite(l,h,x={},C){this._checkLoaded();const R=[{id:l,url:h}],z=[...Z(this.stylesheet.sprite),...R];this._validate(a.C.sprite,"sprite",z,null,x)||(this.stylesheet.sprite=z,this._loadSprite(R,!0,C))}removeSprite(l){this._checkLoaded();const h=Z(this.stylesheet.sprite);if(h.find((x=>x.id===l))){if(this._spritesImagesIds[l])for(const x of this._spritesImagesIds[l])this.imageManager.removeImage(x),this._changedImages[x]=!0;h.splice(h.findIndex((x=>x.id===l)),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(l,h={},x){this._checkLoaded(),l&&this._validate(a.C.sprite,"sprite",l,null,h)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,x):(this._unloadSprite(),x&&x(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const l in this.tileManagers){const h=this.tileManagers[l];h.setEventedParent(null),h.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const l in this._layers){const h=this._layers[l];h.setEventedParent(null),h.onRemove&&h.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Ba=a.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Cu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,h,x,C,R,z,W,te,le){this.context=l;let pe=this.boundPaintVertexBuffers.length!==C.length;for(let Ie=0;!pe&&Ie<C.length;Ie++)this.boundPaintVertexBuffers[Ie]!==C[Ie]&&(pe=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==x||pe||this.boundIndexBuffer!==R||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==W||this.boundDynamicVertexBuffer2!==te||this.boundDynamicVertexBuffer3!==le?this.freshBind(h,x,C,R,z,W,te,le):(l.bindVertexArray.set(this.vao),W&&W.bind(),R&&R.dynamicDraw&&R.bind(),te&&te.bind(),le&&le.bind())}freshBind(l,h,x,C,R,z,W,te){const le=l.numAttributes,pe=this.context,Ie=pe.gl;this.vao&&this.destroy(),this.vao=pe.createVertexArray(),pe.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=C,this.boundVertexOffset=R,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=W,this.boundDynamicVertexBuffer3=te,h.enableAttributes(Ie,l);for(const Te of x)Te.enableAttributes(Ie,l);z&&z.enableAttributes(Ie,l),W&&W.enableAttributes(Ie,l),te&&te.enableAttributes(Ie,l),h.bind(),h.setVertexAttribPointers(Ie,l,R);for(const Te of x)Te.bind(),Te.setVertexAttribPointers(Ie,l,R);z&&(z.bind(),z.setVertexAttribPointers(Ie,l,R)),C&&C.bind(),W&&(W.bind(),W.setVertexAttribPointers(Ie,l,R)),te&&(te.bind(),te.setVertexAttribPointers(Ie,l,R)),pe.currentNumAttributes=le}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Rl=(L,l,h,x,C)=>({u_texture:0,u_ele_delta:L,u_fog_matrix:l,u_fog_color:h?h.properties.get("fog-color"):a.bp.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:C?0:h?h.calculateFogBlendOpacity(x):0,u_horizon_color:h?h.properties.get("horizon-color"):a.bp.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1,u_is_globe_mode:C?1:0}),Is={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Pa(L){const l=[];for(let h=0;h<L.length;h++){if(L[h]===null)continue;const x=L[h].split(" ");l.push(x.pop())}return l}class ls{constructor(l,h,x,C,R,z,W,te,le=[]){const pe=l.gl;this.program=pe.createProgram();const Ie=Pa(h.staticAttributes),Te=x?x.getBinderAttributes():[],qe=Ie.concat(Te),Ze=rn.prelude.staticUniforms?Pa(rn.prelude.staticUniforms):[],ft=W.staticUniforms?Pa(W.staticUniforms):[],mt=h.staticUniforms?Pa(h.staticUniforms):[],pt=x?x.getBinderUniforms():[],_t=Ze.concat(ft).concat(mt).concat(pt),Lt=[];for(const ur of _t)Lt.indexOf(ur)<0&&Lt.push(ur);const xt=x?x.defines():[];We(pe)&&xt.unshift("#version 300 es"),R&&xt.push("#define OVERDRAW_INSPECTOR;"),z&&xt.push("#define TERRAIN3D;"),te&&xt.push(te),le&&xt.push(...le);let Rt=xt.concat(rn.prelude.fragmentSource,W.fragmentSource,h.fragmentSource).join(`
`),Bt=xt.concat(rn.prelude.vertexSource,W.vertexSource,h.vertexSource).join(`
`);We(pe)||(Rt=(function(ur){return ur.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Rt),Bt=(function(ur){return ur.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Bt));const Mt=pe.createShader(pe.FRAGMENT_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);if(pe.shaderSource(Mt,Rt),pe.compileShader(Mt),!pe.getShaderParameter(Mt,pe.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${pe.getShaderInfoLog(Mt)}`);pe.attachShader(this.program,Mt);const Xt=pe.createShader(pe.VERTEX_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);if(pe.shaderSource(Xt,Bt),pe.compileShader(Xt),!pe.getShaderParameter(Xt,pe.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${pe.getShaderInfoLog(Xt)}`);pe.attachShader(this.program,Xt),this.attributes={};const gr={};this.numAttributes=qe.length;for(let ur=0;ur<this.numAttributes;ur++)qe[ur]&&(pe.bindAttribLocation(this.program,ur,qe[ur]),this.attributes[qe[ur]]=ur);if(pe.linkProgram(this.program),!pe.getProgramParameter(this.program,pe.LINK_STATUS))throw new Error(`Program failed to link: ${pe.getProgramInfoLog(this.program)}`);pe.deleteShader(Xt),pe.deleteShader(Mt);for(let ur=0;ur<Lt.length;ur++){const hr=Lt[ur];if(hr&&!gr[hr]){const mr=pe.getUniformLocation(this.program,hr);mr&&(gr[hr]=mr)}}this.fixedUniforms=C(l,gr),this.terrainUniforms=((ur,hr)=>({u_depth:new a.b_(ur,hr.u_depth),u_terrain:new a.b_(ur,hr.u_terrain),u_terrain_dim:new a.bq(ur,hr.u_terrain_dim),u_terrain_matrix:new a.c0(ur,hr.u_terrain_matrix),u_terrain_unpack:new a.c1(ur,hr.u_terrain_unpack),u_terrain_exaggeration:new a.bq(ur,hr.u_terrain_exaggeration)}))(l,gr),this.projectionUniforms=((ur,hr)=>({u_projection_matrix:new a.c0(ur,hr.u_projection_matrix),u_projection_tile_mercator_coords:new a.c1(ur,hr.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c1(ur,hr.u_projection_clipping_plane),u_projection_transition:new a.bq(ur,hr.u_projection_transition),u_projection_fallback_matrix:new a.c0(ur,hr.u_projection_fallback_matrix)}))(l,gr),this.binderUniforms=x?x.getUniforms(l,gr):[]}draw(l,h,x,C,R,z,W,te,le,pe,Ie,Te,qe,Ze,ft,mt,pt,_t,Lt){const xt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(x),l.setStencilMode(C),l.setColorMode(R),l.setCullFace(z),te){l.activeTexture.set(xt.TEXTURE2),xt.bindTexture(xt.TEXTURE_2D,te.depthTexture),l.activeTexture.set(xt.TEXTURE3),xt.bindTexture(xt.TEXTURE_2D,te.texture);for(const Bt in this.terrainUniforms)this.terrainUniforms[Bt].set(te[Bt])}if(le)for(const Bt in le)this.projectionUniforms[Is[Bt]].set(le[Bt]);if(W)for(const Bt in this.fixedUniforms)this.fixedUniforms[Bt].set(W[Bt]);mt&&mt.setUniforms(l,this.binderUniforms,Ze,{zoom:ft});let Rt=0;switch(h){case xt.LINES:Rt=2;break;case xt.TRIANGLES:Rt=3;break;case xt.LINE_STRIP:Rt=1}for(const Bt of qe.get()){const Mt=Bt.vaos||(Bt.vaos={});(Mt[pe]||(Mt[pe]=new Cu)).bind(l,this,Ie,mt?mt.getPaintVertexBuffers():[],Te,Bt.vertexOffset,pt,_t,Lt),xt.drawElements(h,Bt.primitiveLength*Rt,xt.UNSIGNED_SHORT,Bt.primitiveOffset*Rt*2)}}}function Eu(L,l,h){const x=1/a.aN(h,1,l.transform.tileZoom),C=Math.pow(2,h.tileID.overscaledZ),R=h.tileSize*Math.pow(2,l.transform.tileZoom)/C,z=R*(h.tileID.canonical.x+h.tileID.wrap*C),W=R*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[x,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[z>>16,W>>16],u_pixel_coord_lower:[65535&z,65535&W]}}const Tu=(L,l,h,x)=>{const C=L.style.light,R=C.properties.get("position"),z=[R.x,R.y,R.z],W=a.c4();C.properties.get("anchor")==="viewport"&&a.c5(W,L.transform.bearingInRadians),a.c6(z,z,W);const te=L.transform.transformLightDirection(z),le=C.properties.get("color");return{u_lightpos:z,u_lightpos_globe:te,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[le.r,le.g,le.b],u_vertical_gradient:+l,u_opacity:h,u_fill_translate:x}},Vs=(L,l,h,x,C,R,z)=>a.e(Tu(L,l,h,x),Eu(R,L,z),{u_height_factor:-Math.pow(2,C.overscaledZ)/z.tileSize/8}),Dl=(L,l,h,x)=>a.e(Eu(l,L,h),{u_fill_translate:x}),yo=(L,l)=>({u_world:L,u_fill_translate:l}),Qa=(L,l,h,x,C)=>a.e(Dl(L,l,h,C),{u_world:x}),iu=(L,l,h,x,C)=>{const R=L.transform;let z,W,te=0;if(h.paint.get("circle-pitch-alignment")==="map"){const le=a.aN(l,1,R.zoom);z=!0,W=[le,le],te=le/(a.a5*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*C}else z=!1,W=R.pixelsToGLUnits;return{u_camera_to_center_distance:R.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:L.pixelRatio,u_extrude_scale:W,u_globe_extrude_scale:te,u_translate:x}},Aa=L=>({u_pixel_extrude_scale:[1/L.width,1/L.height]}),Ol=L=>({u_viewport_size:[L.width,L.height]}),Ps=(L,l=1)=>({u_color:L,u_overlay:0,u_overlay_scale:l}),Zo=(L,l,h,x)=>{const C=a.aN(L,1,l)/(a.a5*Math.pow(2,L.tileID.overscaledZ))*2*Math.PI*x;return{u_extrude_scale:a.aN(L,1,l),u_intensity:h,u_globe_extrude_scale:C}},ka=(L,l,h,x)=>{const C=a.N();a.c7(C,0,L.width,L.height,0,0,1);const R=L.context.gl;return{u_matrix:C,u_world:[R.drawingBufferWidth,R.drawingBufferHeight],u_image:h,u_color_ramp:x,u_opacity:l.paint.get("heatmap-opacity")}},hl=(L,l,h)=>{const x=h.paint.get("hillshade-accent-color");let C;switch(h.paint.get("hillshade-method")){case"basic":C=4;break;case"combined":C=1;break;case"igor":C=2;break;case"multidirectional":C=3;break;default:C=0}const R=h.getIlluminationProperties();for(let z=0;z<R.directionRadians.length;z++)h.paint.get("hillshade-illumination-anchor")==="viewport"&&(R.directionRadians[z]+=L.transform.bearingInRadians);return{u_image:0,u_latrange:Gs(0,l.tileID),u_exaggeration:h.paint.get("hillshade-exaggeration"),u_altitudes:R.altitudeRadians,u_azimuths:R.directionRadians,u_accent:x,u_method:C,u_highlights:R.highlightColor,u_shadows:R.shadowColor}},$s=(L,l)=>{const h=l.stride,x=a.N();return a.c7(x,0,a.a5,-a.a5,0,0,1),a.O(x,x,[0,-a.a5,0]),{u_matrix:x,u_image:1,u_dimension:[h,h],u_zoom:L.overscaledZ,u_unpack:l.getUnpackVector()}};function Gs(L,l){const h=Math.pow(2,l.canonical.z),x=l.canonical.y;return[new a.a9(0,x/h).toLngLat().lat,new a.a9(0,(x+1)/h).toLngLat().lat]}const pl=(L,l,h=0)=>({u_image:0,u_unpack:l.getUnpackVector(),u_dimension:[l.stride,l.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:h,u_opacity:L.paint.get("color-relief-opacity")}),ml=(L,l,h,x)=>{const C=L.transform;return{u_translation:nn(L,l,h),u_ratio:x/a.aN(l,1,C.zoom),u_device_pixel_ratio:L.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Us=(L,l,h,x,C)=>a.e(ml(L,l,h,x),{u_image:0,u_image_height:C}),gl=(L,l,h,x,C)=>{const R=L.transform,z=fr(l,R);return{u_translation:nn(L,l,h),u_texsize:l.imageAtlasTexture.size,u_ratio:x/a.aN(l,1,R.zoom),u_device_pixel_ratio:L.pixelRatio,u_image:0,u_scale:[z,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},au=(L,l,h,x,C)=>{const R=fr(l,L.transform);return a.e(ml(L,l,h,x),{u_tileratio:R,u_crossfade_from:C.fromScale,u_crossfade_to:C.toScale,u_image:0,u_mix:C.t,u_lineatlas_width:L.lineAtlas.width,u_lineatlas_height:L.lineAtlas.height})},er=(L,l,h,x,C,R)=>{const z=fr(l,L.transform);return a.e(ml(L,l,h,x),{u_image:0,u_image_height:R,u_tileratio:z,u_crossfade_from:C.fromScale,u_crossfade_to:C.toScale,u_image_dash:1,u_mix:C.t,u_lineatlas_width:L.lineAtlas.width,u_lineatlas_height:L.lineAtlas.height})};function fr(L,l){return 1/a.aN(L,1,l.tileZoom)}function nn(L,l,h){return a.aO(L.transform,l,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const bn=(L,l,h,x,C)=>{return{u_tl_parent:L,u_scale_parent:l,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(z=x.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(R=x.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:ci(x.paint.get("raster-hue-rotate")),u_coords_top:[C[0].x,C[0].y,C[1].x,C[1].y],u_coords_bottom:[C[3].x,C[3].y,C[2].x,C[2].y]};var R,z};function ci(L){L*=Math.PI/180;const l=Math.sin(L),h=Math.cos(L);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const _n=(L,l,h,x,C,R,z,W,te,le,pe,Ie,Te)=>{const qe=z.transform;return{u_is_size_zoom_constant:+(L==="constant"||L==="source"),u_is_size_feature_constant:+(L==="constant"||L==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:qe.cameraToCenterDistance,u_pitch:qe.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:qe.width/qe.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:W,u_coord_matrix:te,u_is_text:+pe,u_pitch_with_map:+x,u_is_along_line:C,u_is_variable_anchor:R,u_texsize:Ie,u_texture:0,u_translation:le,u_pitched_scale:Te}},E=(L,l,h,x,C,R,z,W,te,le,pe,Ie,Te,qe)=>{const Ze=z.transform;return a.e(_n(L,l,h,x,C,R,z,W,te,le,pe,Ie,qe),{u_gamma_scale:x?Math.cos(Ze.pitch*Math.PI/180)*Ze.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},m=(L,l,h,x,C,R,z,W,te,le,pe,Ie,Te)=>a.e(E(L,l,h,x,C,R,z,W,te,le,!0,pe,0,Te),{u_texsize_icon:Ie,u_texture_icon:1}),v=(L,l)=>({u_opacity:L,u_color:l}),T=(L,l,h,x,C)=>a.e((function(R,z,W,te){const le=W.imageManager.getPattern(R.from.toString()),pe=W.imageManager.getPattern(R.to.toString()),{width:Ie,height:Te}=W.imageManager.getPixelSize(),qe=Math.pow(2,te.tileID.overscaledZ),Ze=te.tileSize*Math.pow(2,W.transform.tileZoom)/qe,ft=Ze*(te.tileID.canonical.x+te.tileID.wrap*qe),mt=Ze*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:le.tl,u_pattern_br_a:le.br,u_pattern_tl_b:pe.tl,u_pattern_br_b:pe.br,u_texsize:[Ie,Te],u_mix:z.t,u_pattern_size_a:le.displaySize,u_pattern_size_b:pe.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/a.aN(te,1,W.transform.tileZoom),u_pixel_coord_upper:[ft>>16,mt>>16],u_pixel_coord_lower:[65535&ft,65535&mt]}})(h,C,l,x),{u_opacity:L}),q=(L,l)=>{},ne={fillExtrusion:(L,l)=>({u_lightpos:new a.c2(L,l.u_lightpos),u_lightpos_globe:new a.c2(L,l.u_lightpos_globe),u_lightintensity:new a.bq(L,l.u_lightintensity),u_lightcolor:new a.c2(L,l.u_lightcolor),u_vertical_gradient:new a.bq(L,l.u_vertical_gradient),u_opacity:new a.bq(L,l.u_opacity),u_fill_translate:new a.c3(L,l.u_fill_translate)}),fillExtrusionPattern:(L,l)=>({u_lightpos:new a.c2(L,l.u_lightpos),u_lightpos_globe:new a.c2(L,l.u_lightpos_globe),u_lightintensity:new a.bq(L,l.u_lightintensity),u_lightcolor:new a.c2(L,l.u_lightcolor),u_vertical_gradient:new a.bq(L,l.u_vertical_gradient),u_height_factor:new a.bq(L,l.u_height_factor),u_opacity:new a.bq(L,l.u_opacity),u_fill_translate:new a.c3(L,l.u_fill_translate),u_image:new a.b_(L,l.u_image),u_texsize:new a.c3(L,l.u_texsize),u_pixel_coord_upper:new a.c3(L,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(L,l.u_pixel_coord_lower),u_scale:new a.c2(L,l.u_scale),u_fade:new a.bq(L,l.u_fade)}),fill:(L,l)=>({u_fill_translate:new a.c3(L,l.u_fill_translate)}),fillPattern:(L,l)=>({u_image:new a.b_(L,l.u_image),u_texsize:new a.c3(L,l.u_texsize),u_pixel_coord_upper:new a.c3(L,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(L,l.u_pixel_coord_lower),u_scale:new a.c2(L,l.u_scale),u_fade:new a.bq(L,l.u_fade),u_fill_translate:new a.c3(L,l.u_fill_translate)}),fillOutline:(L,l)=>({u_world:new a.c3(L,l.u_world),u_fill_translate:new a.c3(L,l.u_fill_translate)}),fillOutlinePattern:(L,l)=>({u_world:new a.c3(L,l.u_world),u_image:new a.b_(L,l.u_image),u_texsize:new a.c3(L,l.u_texsize),u_pixel_coord_upper:new a.c3(L,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(L,l.u_pixel_coord_lower),u_scale:new a.c2(L,l.u_scale),u_fade:new a.bq(L,l.u_fade),u_fill_translate:new a.c3(L,l.u_fill_translate)}),circle:(L,l)=>({u_camera_to_center_distance:new a.bq(L,l.u_camera_to_center_distance),u_scale_with_map:new a.b_(L,l.u_scale_with_map),u_pitch_with_map:new a.b_(L,l.u_pitch_with_map),u_extrude_scale:new a.c3(L,l.u_extrude_scale),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.bq(L,l.u_globe_extrude_scale),u_translate:new a.c3(L,l.u_translate)}),collisionBox:(L,l)=>({u_pixel_extrude_scale:new a.c3(L,l.u_pixel_extrude_scale)}),collisionCircle:(L,l)=>({u_viewport_size:new a.c3(L,l.u_viewport_size)}),debug:(L,l)=>({u_color:new a.b$(L,l.u_color),u_overlay:new a.b_(L,l.u_overlay),u_overlay_scale:new a.bq(L,l.u_overlay_scale)}),depth:q,clippingMask:q,heatmap:(L,l)=>({u_extrude_scale:new a.bq(L,l.u_extrude_scale),u_intensity:new a.bq(L,l.u_intensity),u_globe_extrude_scale:new a.bq(L,l.u_globe_extrude_scale)}),heatmapTexture:(L,l)=>({u_matrix:new a.c0(L,l.u_matrix),u_world:new a.c3(L,l.u_world),u_image:new a.b_(L,l.u_image),u_color_ramp:new a.b_(L,l.u_color_ramp),u_opacity:new a.bq(L,l.u_opacity)}),hillshade:(L,l)=>({u_image:new a.b_(L,l.u_image),u_latrange:new a.c3(L,l.u_latrange),u_exaggeration:new a.bq(L,l.u_exaggeration),u_altitudes:new a.c9(L,l.u_altitudes),u_azimuths:new a.c9(L,l.u_azimuths),u_accent:new a.b$(L,l.u_accent),u_method:new a.b_(L,l.u_method),u_shadows:new a.c8(L,l.u_shadows),u_highlights:new a.c8(L,l.u_highlights)}),hillshadePrepare:(L,l)=>({u_matrix:new a.c0(L,l.u_matrix),u_image:new a.b_(L,l.u_image),u_dimension:new a.c3(L,l.u_dimension),u_zoom:new a.bq(L,l.u_zoom),u_unpack:new a.c1(L,l.u_unpack)}),colorRelief:(L,l)=>({u_image:new a.b_(L,l.u_image),u_unpack:new a.c1(L,l.u_unpack),u_dimension:new a.c3(L,l.u_dimension),u_elevation_stops:new a.b_(L,l.u_elevation_stops),u_color_stops:new a.b_(L,l.u_color_stops),u_color_ramp_size:new a.b_(L,l.u_color_ramp_size),u_opacity:new a.bq(L,l.u_opacity)}),line:(L,l)=>({u_translation:new a.c3(L,l.u_translation),u_ratio:new a.bq(L,l.u_ratio),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(L,l.u_units_to_pixels)}),lineGradient:(L,l)=>({u_translation:new a.c3(L,l.u_translation),u_ratio:new a.bq(L,l.u_ratio),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(L,l.u_units_to_pixels),u_image:new a.b_(L,l.u_image),u_image_height:new a.bq(L,l.u_image_height)}),linePattern:(L,l)=>({u_translation:new a.c3(L,l.u_translation),u_texsize:new a.c3(L,l.u_texsize),u_ratio:new a.bq(L,l.u_ratio),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_image:new a.b_(L,l.u_image),u_units_to_pixels:new a.c3(L,l.u_units_to_pixels),u_scale:new a.c2(L,l.u_scale),u_fade:new a.bq(L,l.u_fade)}),lineSDF:(L,l)=>({u_translation:new a.c3(L,l.u_translation),u_ratio:new a.bq(L,l.u_ratio),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(L,l.u_units_to_pixels),u_image:new a.b_(L,l.u_image),u_mix:new a.bq(L,l.u_mix),u_tileratio:new a.bq(L,l.u_tileratio),u_crossfade_from:new a.bq(L,l.u_crossfade_from),u_crossfade_to:new a.bq(L,l.u_crossfade_to),u_lineatlas_width:new a.bq(L,l.u_lineatlas_width),u_lineatlas_height:new a.bq(L,l.u_lineatlas_height)}),lineGradientSDF:(L,l)=>({u_translation:new a.c3(L,l.u_translation),u_ratio:new a.bq(L,l.u_ratio),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(L,l.u_units_to_pixels),u_image:new a.b_(L,l.u_image),u_image_height:new a.bq(L,l.u_image_height),u_tileratio:new a.bq(L,l.u_tileratio),u_crossfade_from:new a.bq(L,l.u_crossfade_from),u_crossfade_to:new a.bq(L,l.u_crossfade_to),u_image_dash:new a.b_(L,l.u_image_dash),u_mix:new a.bq(L,l.u_mix),u_lineatlas_width:new a.bq(L,l.u_lineatlas_width),u_lineatlas_height:new a.bq(L,l.u_lineatlas_height)}),raster:(L,l)=>({u_tl_parent:new a.c3(L,l.u_tl_parent),u_scale_parent:new a.bq(L,l.u_scale_parent),u_buffer_scale:new a.bq(L,l.u_buffer_scale),u_fade_t:new a.bq(L,l.u_fade_t),u_opacity:new a.bq(L,l.u_opacity),u_image0:new a.b_(L,l.u_image0),u_image1:new a.b_(L,l.u_image1),u_brightness_low:new a.bq(L,l.u_brightness_low),u_brightness_high:new a.bq(L,l.u_brightness_high),u_saturation_factor:new a.bq(L,l.u_saturation_factor),u_contrast_factor:new a.bq(L,l.u_contrast_factor),u_spin_weights:new a.c2(L,l.u_spin_weights),u_coords_top:new a.c1(L,l.u_coords_top),u_coords_bottom:new a.c1(L,l.u_coords_bottom)}),symbolIcon:(L,l)=>({u_is_size_zoom_constant:new a.b_(L,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(L,l.u_is_size_feature_constant),u_size_t:new a.bq(L,l.u_size_t),u_size:new a.bq(L,l.u_size),u_camera_to_center_distance:new a.bq(L,l.u_camera_to_center_distance),u_pitch:new a.bq(L,l.u_pitch),u_rotate_symbol:new a.b_(L,l.u_rotate_symbol),u_aspect_ratio:new a.bq(L,l.u_aspect_ratio),u_fade_change:new a.bq(L,l.u_fade_change),u_label_plane_matrix:new a.c0(L,l.u_label_plane_matrix),u_coord_matrix:new a.c0(L,l.u_coord_matrix),u_is_text:new a.b_(L,l.u_is_text),u_pitch_with_map:new a.b_(L,l.u_pitch_with_map),u_is_along_line:new a.b_(L,l.u_is_along_line),u_is_variable_anchor:new a.b_(L,l.u_is_variable_anchor),u_texsize:new a.c3(L,l.u_texsize),u_texture:new a.b_(L,l.u_texture),u_translation:new a.c3(L,l.u_translation),u_pitched_scale:new a.bq(L,l.u_pitched_scale)}),symbolSDF:(L,l)=>({u_is_size_zoom_constant:new a.b_(L,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(L,l.u_is_size_feature_constant),u_size_t:new a.bq(L,l.u_size_t),u_size:new a.bq(L,l.u_size),u_camera_to_center_distance:new a.bq(L,l.u_camera_to_center_distance),u_pitch:new a.bq(L,l.u_pitch),u_rotate_symbol:new a.b_(L,l.u_rotate_symbol),u_aspect_ratio:new a.bq(L,l.u_aspect_ratio),u_fade_change:new a.bq(L,l.u_fade_change),u_label_plane_matrix:new a.c0(L,l.u_label_plane_matrix),u_coord_matrix:new a.c0(L,l.u_coord_matrix),u_is_text:new a.b_(L,l.u_is_text),u_pitch_with_map:new a.b_(L,l.u_pitch_with_map),u_is_along_line:new a.b_(L,l.u_is_along_line),u_is_variable_anchor:new a.b_(L,l.u_is_variable_anchor),u_texsize:new a.c3(L,l.u_texsize),u_texture:new a.b_(L,l.u_texture),u_gamma_scale:new a.bq(L,l.u_gamma_scale),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_is_halo:new a.b_(L,l.u_is_halo),u_translation:new a.c3(L,l.u_translation),u_pitched_scale:new a.bq(L,l.u_pitched_scale)}),symbolTextAndIcon:(L,l)=>({u_is_size_zoom_constant:new a.b_(L,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(L,l.u_is_size_feature_constant),u_size_t:new a.bq(L,l.u_size_t),u_size:new a.bq(L,l.u_size),u_camera_to_center_distance:new a.bq(L,l.u_camera_to_center_distance),u_pitch:new a.bq(L,l.u_pitch),u_rotate_symbol:new a.b_(L,l.u_rotate_symbol),u_aspect_ratio:new a.bq(L,l.u_aspect_ratio),u_fade_change:new a.bq(L,l.u_fade_change),u_label_plane_matrix:new a.c0(L,l.u_label_plane_matrix),u_coord_matrix:new a.c0(L,l.u_coord_matrix),u_is_text:new a.b_(L,l.u_is_text),u_pitch_with_map:new a.b_(L,l.u_pitch_with_map),u_is_along_line:new a.b_(L,l.u_is_along_line),u_is_variable_anchor:new a.b_(L,l.u_is_variable_anchor),u_texsize:new a.c3(L,l.u_texsize),u_texsize_icon:new a.c3(L,l.u_texsize_icon),u_texture:new a.b_(L,l.u_texture),u_texture_icon:new a.b_(L,l.u_texture_icon),u_gamma_scale:new a.bq(L,l.u_gamma_scale),u_device_pixel_ratio:new a.bq(L,l.u_device_pixel_ratio),u_is_halo:new a.b_(L,l.u_is_halo),u_translation:new a.c3(L,l.u_translation),u_pitched_scale:new a.bq(L,l.u_pitched_scale)}),background:(L,l)=>({u_opacity:new a.bq(L,l.u_opacity),u_color:new a.b$(L,l.u_color)}),backgroundPattern:(L,l)=>({u_opacity:new a.bq(L,l.u_opacity),u_image:new a.b_(L,l.u_image),u_pattern_tl_a:new a.c3(L,l.u_pattern_tl_a),u_pattern_br_a:new a.c3(L,l.u_pattern_br_a),u_pattern_tl_b:new a.c3(L,l.u_pattern_tl_b),u_pattern_br_b:new a.c3(L,l.u_pattern_br_b),u_texsize:new a.c3(L,l.u_texsize),u_mix:new a.bq(L,l.u_mix),u_pattern_size_a:new a.c3(L,l.u_pattern_size_a),u_pattern_size_b:new a.c3(L,l.u_pattern_size_b),u_scale_a:new a.bq(L,l.u_scale_a),u_scale_b:new a.bq(L,l.u_scale_b),u_pixel_coord_upper:new a.c3(L,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(L,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bq(L,l.u_tile_units_to_pixels)}),terrain:(L,l)=>({u_texture:new a.b_(L,l.u_texture),u_ele_delta:new a.bq(L,l.u_ele_delta),u_fog_matrix:new a.c0(L,l.u_fog_matrix),u_fog_color:new a.b$(L,l.u_fog_color),u_fog_ground_blend:new a.bq(L,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bq(L,l.u_fog_ground_blend_opacity),u_horizon_color:new a.b$(L,l.u_horizon_color),u_horizon_fog_blend:new a.bq(L,l.u_horizon_fog_blend),u_is_globe_mode:new a.bq(L,l.u_is_globe_mode)}),terrainDepth:(L,l)=>({u_ele_delta:new a.bq(L,l.u_ele_delta)}),terrainCoords:(L,l)=>({u_texture:new a.b_(L,l.u_texture),u_terrain_coords_id:new a.bq(L,l.u_terrain_coords_id),u_ele_delta:new a.bq(L,l.u_ele_delta)}),projectionErrorMeasurement:(L,l)=>({u_input:new a.bq(L,l.u_input),u_output_expected:new a.bq(L,l.u_output_expected)}),atmosphere:(L,l)=>({u_sun_pos:new a.c2(L,l.u_sun_pos),u_atmosphere_blend:new a.bq(L,l.u_atmosphere_blend),u_globe_position:new a.c2(L,l.u_globe_position),u_globe_radius:new a.bq(L,l.u_globe_radius),u_inv_proj_matrix:new a.c0(L,l.u_inv_proj_matrix)}),sky:(L,l)=>({u_sky_color:new a.b$(L,l.u_sky_color),u_horizon_color:new a.b$(L,l.u_horizon_color),u_horizon:new a.c3(L,l.u_horizon),u_horizon_normal:new a.c3(L,l.u_horizon_normal),u_sky_horizon_blend:new a.bq(L,l.u_sky_horizon_blend),u_sky_blend:new a.bq(L,l.u_sky_blend)})};class ve{constructor(l,h,x){this.context=l;const C=l.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const De={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class tt{constructor(l,h,x,C){this.length=h.length,this.attributes=x,this.itemSize=h.bytesPerElement,this.dynamicDraw=C,this.context=l;const R=l.gl;this.buffer=R.createBuffer(),l.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let x=0;x<this.attributes.length;x++){const C=h.attributes[this.attributes[x].name];C!==void 0&&l.enableVertexAttribArray(C)}}setVertexAttribPointers(l,h,x){for(let C=0;C<this.attributes.length;C++){const R=this.attributes[C],z=h.attributes[R.name];z!==void 0&&l.vertexAttribPointer(z,R.components,l[De[R.type]],!1,this.itemSize,R.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class dt{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class tr extends dt{getDefault(){return a.bp.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class ar extends dt{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Fr extends dt{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class fn extends dt{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Cn extends dt{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Bn extends dt{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class In extends dt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class gn extends dt{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Ui extends dt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class Ji extends dt{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ha extends dt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class va extends dt{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class To extends dt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class As extends dt{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class il extends dt{getDefault(){return a.bp.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Nl extends dt{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Fl extends dt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class us extends dt{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class yl extends dt{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class vl extends dt{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class oo extends dt{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Xn extends dt{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ou extends dt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class sd extends dt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class kc extends dt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Bl extends dt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Th extends dt{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Cp extends dt{getDefault(){return null}set(l){var h;if(l===this.current&&!this.dirty)return;const x=this.gl;We(x)?x.bindVertexArray(l):(h=x.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Ep extends dt{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Tp extends dt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Af extends dt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class oc extends dt{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class ld extends oc{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ih extends oc{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ip extends oc{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const Ph="Framebuffer is not complete";class Ah{constructor(l,h,x,C,R){this.context=l,this.width=h,this.height=x;const z=l.gl,W=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new ld(l,W),C)this.depthAttachment=R?new Ip(l,W):new Ih(l,W);else if(R)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(Ph)}destroy(){const l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){const x=this.depthAttachment.get();x&&l.deleteRenderbuffer(x)}l.deleteFramebuffer(this.framebuffer)}}class kh{constructor(l){var h,x;if(this.gl=l,this.clearColor=new tr(this),this.clearDepth=new ar(this),this.clearStencil=new Fr(this),this.colorMask=new fn(this),this.depthMask=new Cn(this),this.stencilMask=new Bn(this),this.stencilFunc=new In(this),this.stencilOp=new gn(this),this.stencilTest=new Ui(this),this.depthRange=new Ji(this),this.depthTest=new Ha(this),this.depthFunc=new va(this),this.blend=new To(this),this.blendFunc=new As(this),this.blendColor=new il(this),this.blendEquation=new Nl(this),this.cullFace=new Fl(this),this.cullFaceSide=new us(this),this.frontFace=new yl(this),this.program=new vl(this),this.activeTexture=new oo(this),this.viewport=new Xn(this),this.bindFramebuffer=new ou(this),this.bindRenderbuffer=new sd(this),this.bindTexture=new kc(this),this.bindVertexBuffer=new Bl(this),this.bindElementBuffer=new Th(this),this.bindVertexArray=new Cp(this),this.pixelStoreUnpack=new Ep(this),this.pixelStoreUnpackPremultiplyAlpha=new Tp(this),this.pixelStoreUnpackFlipY=new Af(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),We(l)){this.HALF_FLOAT=l.HALF_FLOAT;const C=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=l.RGBA16F)!==null&&h!==void 0?h:C?.RGBA16F_EXT,this.RGB16F=(x=l.RGB16F)!==null&&x!==void 0?x:C?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const C=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=C?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h){return new ve(this,l,h)}createVertexBuffer(l,h,x){return new tt(this,l,h,x)}createRenderbuffer(l,h,x){const C=this.gl,R=C.createRenderbuffer();return this.bindRenderbuffer.set(R),C.renderbufferStorage(C.RENDERBUFFER,l,h,x),this.bindRenderbuffer.set(null),R}createFramebuffer(l,h,x,C){return new Ah(this,l,h,x,C)}clear({color:l,depth:h,stencil:x}){const C=this.gl;let R=0;l&&(R|=C.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(R|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),x!==void 0&&(R|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),C.clear(R)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bR(l.blendFunction,ki.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return We(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var h;return We(this.gl)?this.gl.deleteVertexArray(l):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let Mc;function ud(L,l,h,x,C){const R=L.context,z=L.transform,W=R.gl,te=L.useProgram("collisionBox"),le=[];let pe=0,Ie=0;for(let pt=0;pt<x.length;pt++){const _t=x[pt],Lt=l.getTile(_t).getBucket(h);if(!Lt)continue;const xt=C?Lt.textCollisionBox:Lt.iconCollisionBox,Rt=Lt.collisionCircleArray;Rt.length>0&&(le.push({circleArray:Rt,circleOffset:Ie,coord:_t}),pe+=Rt.length/4,Ie=pe),xt&&te.draw(R,W.LINES,Wn.disabled,Zn.disabled,L.colorModeForRenderPass(),Yn.disabled,Aa(L.transform),L.style.map.terrain&&L.style.map.terrain.getTerrainData(_t),z.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,null,L.transform.zoom,null,null,xt.collisionVertexBuffer)}if(!C||!le.length)return;const Te=L.useProgram("collisionCircle"),qe=new a.ca;qe.resize(4*pe),qe._trim();let Ze=0;for(const pt of le)for(let _t=0;_t<pt.circleArray.length/4;_t++){const Lt=4*_t,xt=pt.circleArray[Lt+0],Rt=pt.circleArray[Lt+1],Bt=pt.circleArray[Lt+2],Mt=pt.circleArray[Lt+3];qe.emplace(Ze++,xt,Rt,Bt,Mt,0),qe.emplace(Ze++,xt,Rt,Bt,Mt,1),qe.emplace(Ze++,xt,Rt,Bt,Mt,2),qe.emplace(Ze++,xt,Rt,Bt,Mt,3)}(!Mc||Mc.length<2*pe)&&(Mc=(function(pt){const _t=2*pt,Lt=new a.cc;Lt.resize(_t),Lt._trim();for(let xt=0;xt<_t;xt++){const Rt=6*xt;Lt.uint16[Rt+0]=4*xt+0,Lt.uint16[Rt+1]=4*xt+1,Lt.uint16[Rt+2]=4*xt+2,Lt.uint16[Rt+3]=4*xt+2,Lt.uint16[Rt+4]=4*xt+3,Lt.uint16[Rt+5]=4*xt+0}return Lt})(pe));const ft=R.createIndexBuffer(Mc,!0),mt=R.createVertexBuffer(qe,a.cb.members,!0);for(const pt of le){const _t=Ol(L.transform);Te.draw(R,W.TRIANGLES,Wn.disabled,Zn.disabled,L.colorModeForRenderPass(),Yn.disabled,_t,L.style.map.terrain&&L.style.map.terrain.getTerrainData(pt.coord),null,h.id,mt,ft,a.aX.simpleSegment(0,2*pt.circleOffset,pt.circleArray.length,pt.circleArray.length/2),null,L.transform.zoom,null,null,null)}mt.destroy(),ft.destroy()}const Pp=a.ar(new Float32Array(16));function Ap(L,l,h,x,C,R){const{horizontalAlign:z,verticalAlign:W}=a.aS(L);return new a.P((-(z-.5)*l/C+x[0])*R,(-(W-.5)*h/C+x[1])*R)}function cd(L,l,h,x,C,R){const z=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let W=x.mult(R);h||(W=W.rotate(-C));const te=z.add(W);return An(te.x,te.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(h){const W=Ai(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(L),te=Math.atan(W.y/W.x)+(W.x<0?Math.PI:0);return L.add(x.rotate(te))}return L.add(x)}function kf(L,l,h,x,C,R,z,W,te,le,pe,Ie){const Te=L.text.placedSymbolArray,qe=L.text.dynamicLayoutVertexArray,Ze=L.icon.dynamicLayoutVertexArray,ft={};qe.clear();for(let mt=0;mt<Te.length;mt++){const pt=Te.get(mt),_t=pt.hidden||!pt.crossTileID||L.allowVerticalPlacement&&!pt.placedOrientation?null:x[pt.crossTileID];if(_t){const Lt=new a.P(pt.anchorX,pt.anchorY),xt={getElevation:Ie,width:C.width,height:C.height,pitchedLabelPlaneMatrix:R,pitchWithMap:h,transform:C,tileAnchorPoint:Lt,translation:le,unwrappedTileID:pe},Rt=h?na(Lt.x,Lt.y,xt):Ai(Lt.x,Lt.y,xt),Bt=Ca(C.cameraToCenterDistance,Rt.signedDistanceFromCamera);let Mt=a.aA(L.textSizeData,W,pt)*Bt/a.aM;h&&(Mt*=L.tilePixelRatio/z);const{width:Xt,height:gr,anchor:ur,textOffset:hr,textBoxScale:mr}=_t,Yr=Ap(ur,Xt,gr,hr,mr,Mt),Qr=C.getPitchedTextCorrection(Lt.x+le[0],Lt.y+le[1],pe),Br=cd(Rt.point,xt,l,Yr,-C.bearingInRadians,Qr),on=L.allowVerticalPlacement&&pt.placedOrientation===a.az.vertical?Math.PI/2:0;for(let mi=0;mi<pt.numGlyphs;mi++)a.aG(qe,Br,on);te&&pt.associatedIconIndex>=0&&(ft[pt.associatedIconIndex]={shiftedAnchor:Br,angle:on})}else fl(pt.numGlyphs,qe)}if(te){Ze.clear();const mt=L.icon.placedSymbolArray;for(let pt=0;pt<mt.length;pt++){const _t=mt.get(pt);if(_t.hidden)fl(_t.numGlyphs,Ze);else{const Lt=ft[pt];if(Lt)for(let xt=0;xt<_t.numGlyphs;xt++)a.aG(Ze,Lt.shiftedAnchor,Lt.angle);else fl(_t.numGlyphs,Ze)}}L.icon.dynamicLayoutVertexBuffer.updateData(Ze)}L.text.dynamicLayoutVertexBuffer.updateData(qe)}function Ym(L,l,h){return h.iconsInText&&l?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Mf(L,l,h,x,C,R,z,W,te,le,pe,Ie,Te){const qe=L.context,Ze=qe.gl,ft=L.transform,mt=W==="map",pt=te==="map",_t=W!=="viewport"&&h.layout.get("symbol-placement")!=="point",Lt=mt&&!pt&&!_t,xt=!h.layout.get("symbol-sort-key").isConstant();let Rt=!1;const Bt=L.getDepthModeForSublayer(0,Wn.ReadOnly),Mt=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Xt=[],gr=ft.getCircleRadiusCorrection();for(const ur of x){const hr=l.getTile(ur),mr=hr.getBucket(h);if(!mr)continue;const Yr=C?mr.text:mr.icon;if(!Yr||!Yr.segments.get().length||!Yr.hasVisibleVertices)continue;const Qr=Yr.programConfigurations.get(h.id),Br=C||mr.sdfIcons,on=C?mr.textSizeData:mr.iconSizeData,mi=pt||ft.pitch!==0,ba=L.useProgram(Ym(Br,C,mr),Qr),eo=a.ay(on,ft.zoom),qa=L.style.map.terrain&&L.style.map.terrain.getTerrainData(ur);let uo,Va,Ao,co,Ws=[0,0],Jo=null;if(C)Va=hr.glyphAtlasTexture,Ao=Ze.LINEAR,uo=hr.glyphAtlasTexture.size,mr.iconsInText&&(Ws=hr.imageAtlasTexture.size,Jo=hr.imageAtlasTexture,co=mi||L.options.rotating||L.options.zooming||on.kind==="composite"||on.kind==="camera"?Ze.LINEAR:Ze.NEAREST);else{const Wa=h.layout.get("icon-size").constantOr(0)!==1||mr.iconsNeedLinear;Va=hr.imageAtlasTexture,Ao=Br||L.options.rotating||L.options.zooming||Wa||mi?Ze.LINEAR:Ze.NEAREST,uo=hr.imageAtlasTexture.size}const jo=a.aN(hr,1,L.transform.zoom),sl=Un(mt,L.transform,jo),Kd=a.N();a.aB(Kd,sl);const pd=Ki(pt,mt,L.transform,jo),Fc=a.aO(ft,hr,R,z),cu=ft.getProjectionData({overscaledTileID:ur,applyGlobeMatrix:!Te,applyTerrainMatrix:!0}),Bf=Mt&&mr.hasTextData(),Np=h.layout.get("icon-text-fit")!=="none"&&Bf&&mr.hasIconData();if(_t){const Wa=L.style.map.terrain?(ks,Ms)=>L.style.map.terrain.getElevation(ur,ks,Ms):null,$a=h.layout.get("text-rotation-alignment")==="map";Ho(mr,L,C,sl,Kd,pt,le,$a,ur.toUnwrapped(),ft.width,ft.height,Fc,Wa)}const zf=C&&Mt||Np,$u=_t||zf?Pp:pt?sl:L.transform.clipSpaceToPixelsMatrix,Bc=Br&&h.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let cc;cc=Br?mr.iconsInText?m(on.kind,eo,Lt,pt,_t,zf,L,$u,pd,Fc,uo,Ws,gr):E(on.kind,eo,Lt,pt,_t,zf,L,$u,pd,Fc,C,uo,0,gr):_n(on.kind,eo,Lt,pt,_t,zf,L,$u,pd,Fc,C,uo,gr);const dc={program:ba,buffers:Yr,uniformValues:cc,projectionData:cu,atlasTexture:Va,atlasTextureIcon:Jo,atlasInterpolation:Ao,atlasInterpolationIcon:co,isSDF:Br,hasHalo:Bc};if(xt&&mr.canOverlap){Rt=!0;const Wa=Yr.segments.get();for(const $a of Wa)Xt.push({segments:new a.aX([$a]),sortKey:$a.sortKey,state:dc,terrainData:qa})}else Xt.push({segments:Yr.segments,sortKey:0,state:dc,terrainData:qa})}Rt&&Xt.sort(((ur,hr)=>ur.sortKey-hr.sortKey));for(const ur of Xt){const hr=ur.state;if(qe.activeTexture.set(Ze.TEXTURE0),hr.atlasTexture.bind(hr.atlasInterpolation,Ze.CLAMP_TO_EDGE),hr.atlasTextureIcon&&(qe.activeTexture.set(Ze.TEXTURE1),hr.atlasTextureIcon&&hr.atlasTextureIcon.bind(hr.atlasInterpolationIcon,Ze.CLAMP_TO_EDGE)),hr.isSDF){const mr=hr.uniformValues;hr.hasHalo&&(mr.u_is_halo=1,Lf(hr.buffers,ur.segments,h,L,hr.program,Bt,pe,Ie,mr,hr.projectionData,ur.terrainData)),mr.u_is_halo=0}Lf(hr.buffers,ur.segments,h,L,hr.program,Bt,pe,Ie,hr.uniformValues,hr.projectionData,ur.terrainData)}}function Lf(L,l,h,x,C,R,z,W,te,le,pe){const Ie=x.context;C.draw(Ie,Ie.gl.TRIANGLES,R,z,W,Yn.backCCW,te,pe,le,h.id,L.layoutVertexBuffer,L.indexBuffer,l,h.paint,x.transform.zoom,L.programConfigurations.get(h.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Zm(L,l,h,x,C){const R=L.context,z=R.gl,W=Zn.disabled,te=new ki([z.ONE,z.ONE],a.bp.transparent,[!0,!0,!0,!0]),le=l.getBucket(h);if(!le)return;const pe=x.key;let Ie=h.heatmapFbos.get(pe);Ie||(Ie=Rf(R,l.tileSize,l.tileSize),h.heatmapFbos.set(pe,Ie)),R.bindFramebuffer.set(Ie.framebuffer),R.viewport.set([0,0,l.tileSize,l.tileSize]),R.clear({color:a.bp.transparent});const Te=le.programConfigurations.get(h.id),qe=L.useProgram("heatmap",Te,!C),Ze=L.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ft=L.style.map.terrain.getTerrainData(x);qe.draw(R,z.TRIANGLES,Wn.disabled,W,te,Yn.disabled,Zo(l,L.transform.zoom,h.paint.get("heatmap-intensity"),1),ft,Ze,h.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,h.paint,L.transform.zoom,Te)}function Km(L,l,h,x,C){const R=L.context,z=R.gl,W=L.transform;R.setColorMode(L.colorModeForRenderPass());const te=Mh(R,l),le=h.key,pe=l.heatmapFbos.get(le);if(!pe)return;R.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,pe.colorAttachment.get()),R.activeTexture.set(z.TEXTURE1),te.bind(z.LINEAR,z.CLAMP_TO_EDGE);const Ie=W.getProjectionData({overscaledTileID:h,applyTerrainMatrix:C,applyGlobeMatrix:!x});L.useProgram("heatmapTexture").draw(R,z.TRIANGLES,Wn.disabled,Zn.disabled,L.colorModeForRenderPass(),Yn.disabled,ka(L,l,0,1),null,Ie,l.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments,l.paint,W.zoom),pe.destroy(),l.heatmapFbos.delete(le)}function Rf(L,l,h){var x,C;const R=L.gl,z=R.createTexture();R.bindTexture(R.TEXTURE_2D,z),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR);const W=(x=L.HALF_FLOAT)!==null&&x!==void 0?x:R.UNSIGNED_BYTE,te=(C=L.RGBA16F)!==null&&C!==void 0?C:R.RGBA;R.texImage2D(R.TEXTURE_2D,0,te,l,h,0,R.RGBA,W,null);const le=L.createFramebuffer(l,h,!1,!1);return le.colorAttachment.set(z),le}function Mh(L,l){return l.colorRampTexture||(l.colorRampTexture=new a.T(L,l.colorRamp,L.gl.RGBA)),l.colorRampTexture}function sc(L,l,h,x,C,R,z,W){let te=256;if(C.stepInterpolant){const le=l.getSource().maxzoom,pe=z.canonical.z===le?Math.ceil(1<<L.transform.maxZoom-z.canonical.z):1;te=a.an(a.ce(R.maxLineLength/a.a5*1024*pe),256,h.maxTextureSize)}return W.gradient=a.cf({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:te,image:W.gradient||void 0,clips:R.lineClipsArray}),W.texture?W.texture.update(W.gradient):W.texture=new a.T(h,W.gradient,x.RGBA),W.version=C.gradientVersion,W.texture}function su(L,l,h,x,C){L.activeTexture.set(l.TEXTURE0),h.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),x.updatePaintBuffers(C)}function la(L,l,h,x,C,R){(C||L.lineAtlas.dirty)&&(l.activeTexture.set(h.TEXTURE0),L.lineAtlas.bind(l)),x.updatePaintBuffers(R)}function dd(L,l,h,x,C,R,z){const W=R.gradients[C.id];let te=W.texture;C.gradientVersion!==W.version&&(te=sc(L,l,h,x,C,R,z,W)),h.activeTexture.set(x.TEXTURE0),te.bind(C.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE)}function bl(L,l,h,x,C,R,z,W,te){const le=R.gradients[C.id];let pe=le.texture;C.gradientVersion!==le.version&&(pe=sc(L,l,h,x,C,R,z,le)),h.activeTexture.set(x.TEXTURE0),pe.bind(C.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE),h.activeTexture.set(x.TEXTURE1),L.lineAtlas.bind(h),W.updatePaintBuffers(te)}function Iu(L,l,h,x,C){if(!h||!x||!x.imageAtlas)return;const R=x.imageAtlas.patternPositions;let z=R[h.to.toString()],W=R[h.from.toString()];if(!z&&W&&(z=W),!W&&z&&(W=z),!z||!W){const te=C.getPaintProperty(l);z=R[te],W=R[te]}z&&W&&L.setConstantPatternPositions(z,W)}function Hs(L,l,h,x,C,R,z,W){const te=L.context.gl,le="fill-pattern",pe=h.paint.get(le),Ie=pe&&pe.constantOr(1),Te=h.getCrossfadeParameters();let qe,Ze,ft,mt,pt;const _t=L.transform,Lt=h.paint.get("fill-translate"),xt=h.paint.get("fill-translate-anchor");z?(Ze=Ie&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=te.LINES):(Ze=Ie?"fillPattern":"fill",qe=te.TRIANGLES);const Rt=pe.constantOr(null);for(const Bt of x){const Mt=l.getTile(Bt);if(Ie&&!Mt.patternsLoaded())continue;const Xt=Mt.getBucket(h);if(!Xt)continue;const gr=Xt.programConfigurations.get(h.id),ur=L.useProgram(Ze,gr),hr=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Bt);Ie&&(L.context.activeTexture.set(te.TEXTURE0),Mt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),gr.updatePaintBuffers(Te)),Iu(gr,le,Rt,Mt,h);const mr=_t.getProjectionData({overscaledTileID:Bt,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Yr=a.aO(_t,Mt,Lt,xt);if(z){mt=Xt.indexBuffer2,pt=Xt.segments2;const Br=[te.drawingBufferWidth,te.drawingBufferHeight];ft=Ze==="fillOutlinePattern"&&Ie?Qa(L,Te,Mt,Br,Yr):yo(Br,Yr)}else mt=Xt.indexBuffer,pt=Xt.segments,ft=Ie?Dl(L,Te,Mt,Yr):{u_fill_translate:Yr};const Qr=L.stencilModeForClipping(Bt);ur.draw(L.context,qe,C,Qr,R,Yn.backCCW,ft,hr,mr,h.id,Xt.layoutVertexBuffer,mt,pt,h.paint,L.transform.zoom,gr)}}function Lh(L,l,h,x,C,R,z,W){const te=L.context,le=te.gl,pe="fill-extrusion-pattern",Ie=h.paint.get(pe),Te=Ie.constantOr(1),qe=h.getCrossfadeParameters(),Ze=h.paint.get("fill-extrusion-opacity"),ft=Ie.constantOr(null),mt=L.transform;for(const pt of x){const _t=l.getTile(pt),Lt=_t.getBucket(h);if(!Lt)continue;const xt=L.style.map.terrain&&L.style.map.terrain.getTerrainData(pt),Rt=Lt.programConfigurations.get(h.id),Bt=L.useProgram(Te?"fillExtrusionPattern":"fillExtrusion",Rt);Te&&(L.context.activeTexture.set(le.TEXTURE0),_t.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),Rt.updatePaintBuffers(qe));const Mt=mt.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!W,applyTerrainMatrix:!0});Iu(Rt,pe,ft,_t,h);const Xt=a.aO(mt,_t,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),gr=h.paint.get("fill-extrusion-vertical-gradient"),ur=Te?Vs(L,gr,Ze,Xt,pt,qe,_t):Tu(L,gr,Ze,Xt);Bt.draw(te,te.gl.TRIANGLES,C,R,z,Yn.backCCW,ur,xt,Mt,h.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,h.paint,L.transform.zoom,Rt,L.style.map.terrain&&Lt.centroidVertexBuffer)}}function Lc(L,l,h,x,C,R,z,W,te){var le;const pe=L.style.projection,Ie=L.context,Te=L.transform,qe=Ie.gl,Ze=[`#define NUM_ILLUMINATION_SOURCES ${h.paint.get("hillshade-highlight-color").values.length}`],ft=L.useProgram("hillshade",null,!1,Ze),mt=!L.options.moving;for(const pt of x){const _t=l.getTile(pt),Lt=_t.fbo;if(!Lt)continue;const xt=pe.getMeshFromTileID(Ie,pt.canonical,W,!0,"raster"),Rt=(le=L.style.map.terrain)===null||le===void 0?void 0:le.getTerrainData(pt);Ie.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,Lt.colorAttachment.get());const Bt=Te.getProjectionData({overscaledTileID:pt,aligned:mt,applyGlobeMatrix:!te,applyTerrainMatrix:!0});ft.draw(Ie,qe.TRIANGLES,R,C[pt.overscaledZ],z,Yn.backCCW,hl(L,_t,h),Rt,Bt,h.id,xt.vertexBuffer,xt.indexBuffer,xt.segments)}}function qd(L,l,h,x,C,R,z,W,te){var le;const pe=L.style.projection,Ie=L.context,Te=L.transform,qe=Ie.gl,Ze=L.useProgram("colorRelief"),ft=!L.options.moving;let mt=!0,pt=0;for(const _t of x){const Lt=l.getTile(_t),xt=Lt.dem;if(mt){const ur=qe.getParameter(qe.MAX_TEXTURE_SIZE),{elevationTexture:hr,colorTexture:mr}=h.getColorRampTextures(Ie,ur,xt.getUnpackVector());Ie.activeTexture.set(qe.TEXTURE1),hr.bind(qe.NEAREST,qe.CLAMP_TO_EDGE),Ie.activeTexture.set(qe.TEXTURE4),mr.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),mt=!1,pt=hr.size[0]}if(!xt||!xt.data)continue;const Rt=xt.stride,Bt=xt.getPixels();if(Ie.activeTexture.set(qe.TEXTURE0),Ie.pixelStoreUnpackPremultiplyAlpha.set(!1),Lt.demTexture=Lt.demTexture||L.getTileTexture(Rt),Lt.demTexture){const ur=Lt.demTexture;ur.update(Bt,{premultiply:!1}),ur.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}else Lt.demTexture=new a.T(Ie,Bt,qe.RGBA,{premultiply:!1}),Lt.demTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE);const Mt=pe.getMeshFromTileID(Ie,_t.canonical,W,!0,"raster"),Xt=(le=L.style.map.terrain)===null||le===void 0?void 0:le.getTerrainData(_t),gr=Te.getProjectionData({overscaledTileID:_t,aligned:ft,applyGlobeMatrix:!te,applyTerrainMatrix:!0});Ze.draw(Ie,qe.TRIANGLES,R,C[_t.overscaledZ],z,Yn.backCCW,pl(h,Lt.dem,pt),Xt,gr,h.id,Mt.vertexBuffer,Mt.indexBuffer,Mt.segments)}}const Rc=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function fd(L,l,h,x,C,R,z,W,te=!1,le=!1){const pe=x[x.length-1].overscaledZ,Ie=L.context,Te=Ie.gl,qe=L.useProgram("raster"),Ze=L.transform,ft=L.style.projection,mt=L.colorModeForRenderPass(),pt=!L.options.moving,_t=h.paint.get("raster-opacity"),Lt=h.paint.get("raster-resampling"),xt=h.paint.get("raster-fade-duration"),Rt=!!L.style.map.terrain;for(const Bt of x){const Mt=L.getDepthModeForSublayer(Bt.overscaledZ-pe,_t===1?Wn.ReadWrite:Wn.ReadOnly,Te.LESS),Xt=l.getTile(Bt),gr=Lt==="nearest"?Te.NEAREST:Te.LINEAR;Ie.activeTexture.set(Te.TEXTURE0),Xt.texture.bind(gr,Te.CLAMP_TO_EDGE,Te.LINEAR_MIPMAP_NEAREST),Ie.activeTexture.set(Te.TEXTURE1);const{parentTile:ur,parentScaleBy:hr,parentTopLeft:mr,fadeValues:Yr}=kp(Xt,l,xt,Rt);Xt.fadeOpacity=Yr.tileOpacity,ur?(ur.fadeOpacity=Yr.parentTileOpacity,ur.texture.bind(gr,Te.CLAMP_TO_EDGE,Te.LINEAR_MIPMAP_NEAREST)):Xt.texture.bind(gr,Te.CLAMP_TO_EDGE,Te.LINEAR_MIPMAP_NEAREST),Xt.texture.useMipmap&&Ie.extTextureFilterAnisotropic&&L.transform.pitch>20&&Te.texParameterf(Te.TEXTURE_2D,Ie.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ie.extTextureFilterAnisotropicMax);const Qr=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Bt),Br=Ze.getProjectionData({overscaledTileID:Bt,aligned:pt,applyGlobeMatrix:!le,applyTerrainMatrix:!0}),on=bn(mr,hr,Yr.fadeMix,h,W),mi=ft.getMeshFromTileID(Ie,Bt.canonical,R,z,"raster");qe.draw(Ie,Te.TRIANGLES,Mt,C?C[Bt.overscaledZ]:Zn.disabled,mt,te?Yn.frontCCW:Yn.backCCW,on,Qr,Br,h.id,mi.vertexBuffer,mi.indexBuffer,mi.segments)}}function kp(L,l,h,x){const C={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(h===0||x)return C;if(L.fadingParentID){const R=l.getLoadedTile(L.fadingParentID);if(!R)return C;const z=Math.pow(2,R.tileID.overscaledZ-L.tileID.overscaledZ),W=[L.tileID.canonical.x*z%1,L.tileID.canonical.y*z%1],te=(function(le,pe,Ie){const Te=k(),qe=(Te-pe.timeAdded)/Ie,Ze=le.fadingDirection===ct.Incoming,ft=a.an((Te-le.timeAdded)/Ie,0,1),mt=a.an(1-qe,0,1),pt=Ze?ft:mt;return{tileOpacity:pt,parentTileOpacity:Ze?mt:ft,fadeMix:{opacity:1,mix:1-pt}}})(L,R,h);return{parentTile:R,parentScaleBy:z,parentTopLeft:W,fadeValues:te}}if(L.selfFading){const R=(function(z,W){const te=(k()-z.timeAdded)/W,le=a.an(te,0,1);return{tileOpacity:le,fadeMix:{opacity:le,mix:0}}})(L,h);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:R}}return C}const Jm=new a.bp(1,0,0,1),Df=new a.bp(0,1,0,1),Of=new a.bp(0,0,1,1),Vd=new a.bp(1,0,1,1),Vu=new a.bp(0,1,1,1);function Mp(L,l,h,x){Nf(L,0,l+h/2,L.transform.width,h,x)}function Rh(L,l,h,x){Nf(L,l-h/2,0,h,L.transform.height,x)}function Nf(L,l,h,x,C,R){const z=L.context,W=z.gl;W.enable(W.SCISSOR_TEST),W.scissor(l*L.pixelRatio,h*L.pixelRatio,x*L.pixelRatio,C*L.pixelRatio),z.clear({color:R}),W.disable(W.SCISSOR_TEST)}function Qm(L,l,h){const x=L.context,C=x.gl,R=L.useProgram("debug"),z=Wn.disabled,W=Zn.disabled,te=L.colorModeForRenderPass(),le="$debug",pe=L.style.map.terrain&&L.style.map.terrain.getTerrainData(h);x.activeTexture.set(C.TEXTURE0);const Ie=l.getTileByID(h.key).latestRawTileData,Te=Math.floor((Ie&&Ie.byteLength||0)/1024),qe=l.getTile(h).tileSize,Ze=512/Math.min(qe,512)*(h.overscaledZ/L.transform.zoom)*.5;let ft=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(ft+=` => ${h.overscaledZ}`),(function(pt,_t){pt.initDebugOverlayCanvas();const Lt=pt.debugOverlayCanvas,xt=pt.context.gl,Rt=pt.debugOverlayCanvas.getContext("2d");Rt.clearRect(0,0,Lt.width,Lt.height),Rt.shadowColor="white",Rt.shadowBlur=2,Rt.lineWidth=1.5,Rt.strokeStyle="white",Rt.textBaseline="top",Rt.font="bold 36px Open Sans, sans-serif",Rt.fillText(_t,5,5),Rt.strokeText(_t,5,5),pt.debugOverlayTexture.update(Lt),pt.debugOverlayTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE)})(L,`${ft} ${Te}kB`);const mt=L.transform.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(x,C.TRIANGLES,z,W,ki.alphaBlended,Yn.disabled,Ps(a.bp.transparent,Ze),null,mt,le,L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments),R.draw(x,C.LINE_STRIP,z,W,te,Yn.disabled,Ps(a.bp.red),pe,mt,le,L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments)}function Lp(L,l,h,x){const{isRenderingGlobe:C}=x,R=L.context,z=R.gl,W=L.transform,te=L.colorModeForRenderPass(),le=L.getDepthModeFor3D(),pe=L.useProgram("terrain");R.bindFramebuffer.set(null),R.viewport.set([0,0,L.width,L.height]);for(const Ie of h){const Te=l.getTerrainMesh(Ie.tileID),qe=L.renderToTexture.getTexture(Ie),Ze=l.getTerrainData(Ie.tileID);R.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,qe.texture);const ft=l.getMeshFrameDelta(W.zoom),mt=W.calculateFogMatrix(Ie.tileID.toUnwrapped()),pt=Rl(ft,mt,L.style.sky,W.pitch,C),_t=W.getProjectionData({overscaledTileID:Ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});pe.draw(R,z.TRIANGLES,le,Zn.disabled,te,Yn.backCCW,pt,Ze,_t,"terrain",Te.vertexBuffer,Te.indexBuffer,Te.segments)}}function Rp(L,l){if(!l.mesh){const h=new a.aW;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(1,1),h.emplaceBack(-1,1);const x=new a.aY;x.emplaceBack(0,1,2),x.emplaceBack(0,2,3),l.mesh=new ii(L.createVertexBuffer(h,Ri.members),L.createIndexBuffer(x),a.aX.simpleSegment(0,0,h.length,x.length))}return l.mesh}class eg{constructor(l,h){this.context=new kh(l),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=gi.maxOverzooming+gi.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dn}resize(l,h,x){if(this.width=Math.floor(l*x),this.height=Math.floor(h*x),this.pixelRatio=x,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const l=this.context,h=new a.aW;h.emplaceBack(0,0),h.emplaceBack(a.a5,0),h.emplaceBack(0,a.a5),h.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=l.createVertexBuffer(h,Ri.members),this.tileExtentSegments=a.aX.simpleSegment(0,0,4,2);const x=new a.aW;x.emplaceBack(0,0),x.emplaceBack(a.a5,0),x.emplaceBack(0,a.a5),x.emplaceBack(a.a5,a.a5),this.debugBuffer=l.createVertexBuffer(x,Ri.members),this.debugSegments=a.aX.simpleSegment(0,0,4,5);const C=new a.ch;C.emplaceBack(0,0,0,0),C.emplaceBack(a.a5,0,a.a5,0),C.emplaceBack(0,a.a5,0,a.a5),C.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=l.createVertexBuffer(C,Ba.members),this.rasterBoundsSegments=a.aX.simpleSegment(0,0,4,2);const R=new a.aW;R.emplaceBack(0,0),R.emplaceBack(a.a5,0),R.emplaceBack(0,a.a5),R.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(R,Ri.members),this.rasterBoundsSegmentsPosOnly=a.aX.simpleSegment(0,0,4,5);const z=new a.aW;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(z,Ri.members),this.viewportSegments=a.aX.simpleSegment(0,0,4,2);const W=new a.ci;W.emplaceBack(0),W.emplaceBack(1),W.emplaceBack(3),W.emplaceBack(2),W.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(W);const te=new a.aY;te.emplaceBack(1,0,2),te.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(te);const le=this.context.gl;this.stencilClearMode=new Zn({func:le.ALWAYS,mask:0},0,255,le.ZERO,le.ZERO,le.ZERO),this.tileExtentMesh=new ii(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const x=a.N();a.c7(x,0,this.width,this.height,0,0,1),a.Q(x,x,[h.drawingBufferWidth,h.drawingBufferHeight,0]);const C={mainMatrix:x,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:x};this.useProgram("clippingMask",null,!0).draw(l,h.TRIANGLES,Wn.disabled,this.stencilClearMode,ki.disabled,Yn.disabled,null,null,C,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,h,x){if(this.currentStencilSource===l.source||!l.isTileClipped()||!h||!h.length)return;this.currentStencilSource=l.source,this.nextStencilID+h.length>256&&this.clearStencil();const C=this.context;C.setColorMode(ki.disabled),C.setDepthMode(Wn.disabled);const R={};for(const z of h)R[z.key]=this.nextStencilID++;this._renderTileMasks(R,h,x,!0),this._renderTileMasks(R,h,x,!1),this._tileClippingMaskIDs=R}_renderTileMasks(l,h,x,C){const R=this.context,z=R.gl,W=this.style.projection,te=this.transform,le=this.useProgram("clippingMask");for(const pe of h){const Ie=l[pe.key],Te=this.style.map.terrain&&this.style.map.terrain.getTerrainData(pe),qe=W.getMeshFromTileID(this.context,pe.canonical,C,!0,"stencil"),Ze=te.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!x,applyTerrainMatrix:!0});le.draw(R,z.TRIANGLES,Wn.disabled,new Zn({func:z.ALWAYS,mask:0},Ie,255,z.KEEP,z.KEEP,z.REPLACE),ki.disabled,x?Yn.disabled:Yn.backCCW,null,Te,Ze,"$clipping",qe.vertexBuffer,qe.indexBuffer,qe.segments)}}_renderTilesDepthBuffer(){const l=this.context,h=l.gl,x=this.style.projection,C=this.transform,R=this.useProgram("depth"),z=this.getDepthModeFor3D(),W=Vn(C,{tileSize:C.tileSize});for(const te of W){const le=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),pe=x.getMeshFromTileID(this.context,te.canonical,!0,!0,"raster"),Ie=C.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(l,h.TRIANGLES,z,Zn.disabled,ki.disabled,Yn.backCCW,null,le,Ie,"$clipping",pe.vertexBuffer,pe.indexBuffer,pe.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new Zn({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){const h=this.context.gl;return new Zn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const h=this.context.gl,x=l.sort(((z,W)=>W.overscaledZ-z.overscaledZ)),C=x[x.length-1].overscaledZ,R=x[0].overscaledZ-C+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const z={};for(let W=0;W<R;W++)z[W+C]=new Zn({func:h.GEQUAL,mask:255},W+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=R,[z,x]}return[{[C]:Zn.disabled},x]}stencilConfigForOverlapTwoPass(l){const h=this.context.gl,x=l.sort(((z,W)=>W.overscaledZ-z.overscaledZ)),C=x[x.length-1].overscaledZ,R=x[0].overscaledZ-C+1;if(this.clearStencil(),R>1){const z={},W={};for(let te=0;te<R;te++)z[te+C]=new Zn({func:h.GREATER,mask:255},R+1+te,255,h.KEEP,h.KEEP,h.REPLACE),W[te+C]=new Zn({func:h.GREATER,mask:255},1+te,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID=2*R+1,[z,W,x]}return this.nextStencilID=3,[{[C]:new Zn({func:h.GREATER,mask:255},2,255,h.KEEP,h.KEEP,h.REPLACE)},{[C]:new Zn({func:h.GREATER,mask:255},1,255,h.KEEP,h.KEEP,h.REPLACE)},x]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new ki([l.CONSTANT_COLOR,l.ONE],new a.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ki.unblended:ki.alphaBlended}getDepthModeForSublayer(l,h,x){if(!this.opaquePassEnabledForLayer())return Wn.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Wn(x||this.context.gl.LEQUAL,h,[C,C])}getDepthModeFor3D(){return new Wn(this.context.gl.LEQUAL,Wn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){var x,C;this.style=l,this.options=h,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(k()),this.imageManager.beginFrame();const R=this.style._order,z=this.style.tileManagers,W={},te={},le={},pe={isRenderingToTexture:!1,isRenderingGlobe:((x=l.projection)===null||x===void 0?void 0:x.transitionState)>0};for(const Te in z){const qe=z[Te];qe.used&&qe.prepare(this.context),W[Te]=qe.getVisibleCoordinates(!1),te[Te]=W[Te].slice().reverse(),le[Te]=qe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Te=0;Te<R.length;Te++)if(this.style._layers[R[Te]].is3D()){this.opaquePassCutoff=Te;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Te of R){const qe=this.style._layers[Te];if(!qe.hasOffscreenPass()||qe.isHidden(this.transform.zoom))continue;const Ze=te[qe.source];(qe.type==="custom"||Ze.length)&&this.renderLayer(this,z[qe.source],qe,Ze,pe)}if((C=this.style.projection)===null||C===void 0||C.updateGPUdependent({context:this.context,useProgram:Te=>this.useProgram(Te)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?a.bp.black:a.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(Te,qe){const Ze=Te.context,ft=Ze.gl,mt=((Bt,Mt,Xt)=>{const gr=Math.cos(Mt.rollInRadians),ur=Math.sin(Mt.rollInRadians),hr=tn(Mt),mr=Mt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Bt.properties.get("sky-color"),u_horizon_color:Bt.properties.get("horizon-color"),u_horizon:[(Mt.width/2-hr*ur)*Xt,(Mt.height/2+hr*gr)*Xt],u_horizon_normal:[-ur,gr],u_sky_horizon_blend:Bt.properties.get("sky-horizon-blend")*Mt.height/2*Xt,u_sky_blend:mr}})(qe,Te.style.map.transform,Te.pixelRatio),pt=new Wn(ft.LEQUAL,Wn.ReadWrite,[0,1]),_t=Zn.disabled,Lt=Te.colorModeForRenderPass(),xt=Te.useProgram("sky"),Rt=Rp(Ze,qe);xt.draw(Ze,ft.TRIANGLES,pt,_t,Lt,Yn.disabled,mt,null,void 0,"sky",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)})(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const Te=this.style._layers[R[this.currentLayer]],qe=z[Te.source],Ze=W[Te.source];this._renderTileClippingMasks(Te,Ze,!1),this.renderLayer(this,qe,Te,Ze,pe)}this.renderPass="translucent";let Ie=!1;for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const Te=this.style._layers[R[this.currentLayer]],qe=z[Te.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Te,pe))continue;this.opaquePassEnabledForLayer()||Ie||(Ie=!0,pe.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ze=(Te.type==="symbol"?le:te)[Te.source];this._renderTileClippingMasks(Te,W[Te.source],!!this.renderToTexture),this.renderLayer(this,qe,Te,Ze,pe)}if(pe.isRenderingGlobe&&(function(Te,qe,Ze){const ft=Te.context,mt=ft.gl,pt=Te.useProgram("atmosphere"),_t=new Wn(mt.LEQUAL,Wn.ReadOnly,[0,1]),Lt=Te.transform,xt=(function(mr,Yr){const Qr=mr.properties.get("position"),Br=[-Qr.x,-Qr.y,-Qr.z],on=a.ar(new Float64Array(16));return mr.properties.get("anchor")==="map"&&(a.bg(on,on,Yr.rollInRadians),a.bh(on,on,-Yr.pitchInRadians),a.bg(on,on,Yr.bearingInRadians),a.bh(on,on,Yr.center.lat*Math.PI/180),a.bJ(on,on,-Yr.center.lng*Math.PI/180)),a.cg(Br,Br,on),Br})(Ze,Te.transform),Rt=Lt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Bt=qe.properties.get("atmosphere-blend")*Rt.projectionTransition;if(Bt===0)return;const Mt=Mi(Lt.worldSize,Lt.center.lat),Xt=Lt.inverseProjectionMatrix,gr=new Float64Array(4);gr[3]=1,a.aH(gr,gr,Lt.modelViewProjectionMatrix),gr[0]/=gr[3],gr[1]/=gr[3],gr[2]/=gr[3],gr[3]=1,a.aH(gr,gr,Xt),gr[0]/=gr[3],gr[1]/=gr[3],gr[2]/=gr[3],gr[3]=1;const ur=((mr,Yr,Qr,Br,on)=>({u_sun_pos:mr,u_atmosphere_blend:Yr,u_globe_position:Qr,u_globe_radius:Br,u_inv_proj_matrix:on}))(xt,Bt,[gr[0],gr[1],gr[2]],Mt,Xt),hr=Rp(ft,qe);pt.draw(ft,mt.TRIANGLES,_t,Zn.disabled,ki.alphaBlended,Yn.disabled,ur,null,null,"atmosphere",hr.vertexBuffer,hr.indexBuffer,hr.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Te=(function(qe,Ze){let ft=null;const mt=Object.values(qe._layers).flatMap((xt=>xt.source&&!xt.isHidden(Ze)?[qe.tileManagers[xt.source]]:[])),pt=mt.filter((xt=>xt.getSource().type==="vector")),_t=mt.filter((xt=>xt.getSource().type!=="vector")),Lt=xt=>{(!ft||ft.getSource().maxzoom<xt.getSource().maxzoom)&&(ft=xt)};return pt.forEach((xt=>Lt(xt))),ft||_t.forEach((xt=>Lt(xt))),ft})(this.style,this.transform.zoom);Te&&(function(qe,Ze,ft){for(let mt=0;mt<ft.length;mt++)Qm(qe,Ze,ft[mt])})(this,Te,Te.getVisibleCoordinates())}this.options.showPadding&&(function(Te){const qe=Te.transform.padding;Mp(Te,Te.transform.height-(qe.top||0),3,Jm),Mp(Te,qe.bottom||0,3,Df),Rh(Te,qe.left||0,3,Of),Rh(Te,Te.transform.width-(qe.right||0),3,Vd);const Ze=Te.transform.centerPoint;(function(ft,mt,pt,_t){Nf(ft,mt-1,pt-10,2,20,_t),Nf(ft,mt-10,pt-1,20,2,_t)})(Te,Ze.x,Te.transform.height-Ze.y,Vu)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const h=this.terrainFacilitator.matrix,x=this.transform.modelViewProjectionMatrix;let C=this.terrainFacilitator.dirty;C||(C=l?!a.cj(h,x):!a.ck(h,x)),C||(C=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),C&&(a.cl(h,x),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(R,z){const W=R.context,te=W.gl,le=R.transform,pe=ki.unblended,Ie=new Wn(te.LEQUAL,Wn.ReadWrite,[0,1]),Te=z.tileManager.getRenderableTiles(),qe=R.useProgram("terrainDepth");W.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),W.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),W.clear({color:a.bp.transparent,depth:1});for(const Ze of Te){const ft=z.getTerrainMesh(Ze.tileID),mt=z.getTerrainData(Ze.tileID),pt=le.getProjectionData({overscaledTileID:Ze.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),_t={u_ele_delta:z.getMeshFrameDelta(le.zoom)};qe.draw(W,te.TRIANGLES,Ie,Zn.disabled,pe,Yn.backCCW,_t,mt,pt,"terrain",ft.vertexBuffer,ft.indexBuffer,ft.segments)}W.bindFramebuffer.set(null),W.viewport.set([0,0,R.width,R.height])})(this,this.style.map.terrain),(function(R,z){const W=R.context,te=W.gl,le=R.transform,pe=ki.unblended,Ie=new Wn(te.LEQUAL,Wn.ReadWrite,[0,1]),Te=z.getCoordsTexture(),qe=z.tileManager.getRenderableTiles(),Ze=R.useProgram("terrainCoords");W.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),W.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),W.clear({color:a.bp.transparent,depth:1}),z.coordsIndex=[];for(const ft of qe){const mt=z.getTerrainMesh(ft.tileID),pt=z.getTerrainData(ft.tileID);W.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,Te.texture);const _t={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(le.zoom)},Lt=le.getProjectionData({overscaledTileID:ft.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ze.draw(W,te.TRIANGLES,Ie,Zn.disabled,pe,Yn.backCCW,_t,pt,Lt,"terrain",mt.vertexBuffer,mt.indexBuffer,mt.segments),z.coordsIndex.push(ft.tileID.key)}W.bindFramebuffer.set(null),W.viewport.set([0,0,R.width,R.height])})(this,this.style.map.terrain))}renderLayer(l,h,x,C,R){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||(C||[]).length)&&(this.id=x.id,a.cm(x)?(function(z,W,te,le,pe,Ie){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=Ie,qe=Zn.disabled,Ze=z.colorModeForRenderPass();(te._unevaluatedLayout.hasValue("text-variable-anchor")||te._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ft,mt,pt,_t,Lt,xt,Rt,Bt,Mt){const Xt=mt.transform,gr=mt.style.map.terrain,ur=Lt==="map",hr=xt==="map";for(const mr of ft){const Yr=_t.getTile(mr),Qr=Yr.getBucket(pt);if(!Qr||!Qr.text||!Qr.text.segments.get().length)continue;const Br=a.ay(Qr.textSizeData,Xt.zoom),on=a.aN(Yr,1,mt.transform.zoom),mi=Un(ur,mt.transform,on),ba=pt.layout.get("icon-text-fit")!=="none"&&Qr.hasIconData();if(Br){const eo=Math.pow(2,Xt.zoom-Yr.tileID.overscaledZ),qa=gr?(uo,Va)=>gr.getElevation(mr,uo,Va):null;kf(Qr,ur,hr,Mt,Xt,mi,eo,Br,ba,a.aO(Xt,Yr,Rt,Bt),mr.toUnwrapped(),qa)}}})(le,z,te,W,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),pe),te.paint.get("icon-opacity").constantOr(1)!==0&&Mf(z,W,te,le,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),qe,Ze,Te),te.paint.get("text-opacity").constantOr(1)!==0&&Mf(z,W,te,le,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),qe,Ze,Te),W.map.showCollisionBoxes&&(ud(z,W,te,le,!0),ud(z,W,te,le,!1))})(l,h,x,C,this.style.placement.variableOffsets,R):a.cn(x)?(function(z,W,te,le,pe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Ie}=pe,Te=te.paint.get("circle-opacity"),qe=te.paint.get("circle-stroke-width"),Ze=te.paint.get("circle-stroke-opacity"),ft=!te.layout.get("circle-sort-key").isConstant();if(Te.constantOr(1)===0&&(qe.constantOr(1)===0||Ze.constantOr(1)===0))return;const mt=z.context,pt=mt.gl,_t=z.transform,Lt=z.getDepthModeForSublayer(0,Wn.ReadOnly),xt=Zn.disabled,Rt=z.colorModeForRenderPass(),Bt=[],Mt=_t.getCircleRadiusCorrection();for(let Xt=0;Xt<le.length;Xt++){const gr=le[Xt],ur=W.getTile(gr),hr=ur.getBucket(te);if(!hr)continue;const mr=te.paint.get("circle-translate"),Yr=te.paint.get("circle-translate-anchor"),Qr=a.aO(_t,ur,mr,Yr),Br=hr.programConfigurations.get(te.id),on=z.useProgram("circle",Br),mi=hr.layoutVertexBuffer,ba=hr.indexBuffer,eo=z.style.map.terrain&&z.style.map.terrain.getTerrainData(gr),qa={programConfiguration:Br,program:on,layoutVertexBuffer:mi,indexBuffer:ba,uniformValues:iu(z,ur,te,Qr,Mt),terrainData:eo,projectionData:_t.getProjectionData({overscaledTileID:gr,applyGlobeMatrix:!Ie,applyTerrainMatrix:!0})};if(ft){const uo=hr.segments.get();for(const Va of uo)Bt.push({segments:new a.aX([Va]),sortKey:Va.sortKey,state:qa})}else Bt.push({segments:hr.segments,sortKey:0,state:qa})}ft&&Bt.sort(((Xt,gr)=>Xt.sortKey-gr.sortKey));for(const Xt of Bt){const{programConfiguration:gr,program:ur,layoutVertexBuffer:hr,indexBuffer:mr,uniformValues:Yr,terrainData:Qr,projectionData:Br}=Xt.state;ur.draw(mt,pt.TRIANGLES,Lt,xt,Rt,Yn.backCCW,Yr,Qr,Br,te.id,hr,mr,Xt.segments,te.paint,z.transform.zoom,gr)}})(l,h,x,C,R):a.co(x)?(function(z,W,te,le,pe){if(te.paint.get("heatmap-opacity")===0)return;const Ie=z.context,{isRenderingToTexture:Te,isRenderingGlobe:qe}=pe;if(z.style.map.terrain){for(const Ze of le){const ft=W.getTile(Ze);W.hasRenderableParent(Ze)||(z.renderPass==="offscreen"?Zm(z,ft,te,Ze,qe):z.renderPass==="translucent"&&Km(z,te,Ze,Te,qe))}Ie.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?(function(Ze,ft,mt,pt){const _t=Ze.context,Lt=_t.gl,xt=Ze.transform,Rt=Zn.disabled,Bt=new ki([Lt.ONE,Lt.ONE],a.bp.transparent,[!0,!0,!0,!0]);(function(Mt,Xt,gr){const ur=Mt.gl;Mt.activeTexture.set(ur.TEXTURE1),Mt.viewport.set([0,0,Xt.width/4,Xt.height/4]);let hr=gr.heatmapFbos.get(a.cd);hr?(ur.bindTexture(ur.TEXTURE_2D,hr.colorAttachment.get()),Mt.bindFramebuffer.set(hr.framebuffer)):(hr=Rf(Mt,Xt.width/4,Xt.height/4),gr.heatmapFbos.set(a.cd,hr))})(_t,Ze,mt),_t.clear({color:a.bp.transparent});for(let Mt=0;Mt<pt.length;Mt++){const Xt=pt[Mt];if(ft.hasRenderableParent(Xt))continue;const gr=ft.getTile(Xt),ur=gr.getBucket(mt);if(!ur)continue;const hr=ur.programConfigurations.get(mt.id),mr=Ze.useProgram("heatmap",hr),Yr=xt.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Qr=xt.getCircleRadiusCorrection();mr.draw(_t,Lt.TRIANGLES,Wn.disabled,Rt,Bt,Yn.backCCW,Zo(gr,xt.zoom,mt.paint.get("heatmap-intensity"),Qr),null,Yr,mt.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,mt.paint,xt.zoom,hr)}_t.viewport.set([0,0,Ze.width,Ze.height])})(z,W,te,le):z.renderPass==="translucent"&&(function(Ze,ft){const mt=Ze.context,pt=mt.gl;mt.setColorMode(Ze.colorModeForRenderPass());const _t=ft.heatmapFbos.get(a.cd);_t&&(mt.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,_t.colorAttachment.get()),mt.activeTexture.set(pt.TEXTURE1),Mh(mt,ft).bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Ze.useProgram("heatmapTexture").draw(mt,pt.TRIANGLES,Wn.disabled,Zn.disabled,Ze.colorModeForRenderPass(),Yn.disabled,ka(Ze,ft,0,1),null,null,ft.id,Ze.viewportBuffer,Ze.quadTriangleIndexBuffer,Ze.viewportSegments,ft.paint,Ze.transform.zoom))})(z,te)})(l,h,x,C,R):a.cp(x)?(function(z,W,te,le,pe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Ie}=pe,Te=te.paint.get("line-opacity"),qe=te.paint.get("line-width");if(Te.constantOr(1)===0||qe.constantOr(1)===0)return;const Ze=z.getDepthModeForSublayer(0,Wn.ReadOnly),ft=z.colorModeForRenderPass(),mt=te.paint.get("line-dasharray"),pt=mt.constantOr(1),_t=te.paint.get("line-pattern"),Lt=_t.constantOr(1),xt=te.paint.get("line-gradient"),Rt=te.getCrossfadeParameters();let Bt;Bt=Lt?"linePattern":pt&&xt?"lineGradientSDF":pt?"lineSDF":xt?"lineGradient":"line";const Mt=z.context,Xt=Mt.gl,gr=z.transform;let ur=!0;for(const hr of le){const mr=W.getTile(hr);if(Lt&&!mr.patternsLoaded())continue;const Yr=mr.getBucket(te);if(!Yr)continue;const Qr=Yr.programConfigurations.get(te.id),Br=z.context.program.get(),on=z.useProgram(Bt,Qr),mi=ur||on.program!==Br,ba=z.style.map.terrain&&z.style.map.terrain.getTerrainData(hr),eo=_t.constantOr(null),qa=mt&&mt.constantOr(null);if(eo&&mr.imageAtlas){const Ws=mr.imageAtlas,Jo=Ws.patternPositions[eo.to.toString()],jo=Ws.patternPositions[eo.from.toString()];Jo&&jo&&Qr.setConstantPatternPositions(Jo,jo)}else if(qa){const Ws=te.layout.get("line-cap")==="round",Jo=z.lineAtlas.getDash(qa.to,Ws),jo=z.lineAtlas.getDash(qa.from,Ws);Qr.setConstantDashPositions(Jo,jo)}const uo=gr.getProjectionData({overscaledTileID:hr,applyGlobeMatrix:!Ie,applyTerrainMatrix:!0}),Va=gr.getPixelScale();let Ao;Lt?(Ao=gl(z,mr,te,Va,Rt),su(Mt,Xt,mr,Qr,Rt)):pt&&xt?(Ao=er(z,mr,te,Va,Rt,Yr.lineClipsArray.length),bl(z,W,Mt,Xt,te,Yr,hr,Qr,Rt)):pt?(Ao=au(z,mr,te,Va,Rt),la(z,Mt,Xt,Qr,mi,Rt)):xt?(Ao=Us(z,mr,te,Va,Yr.lineClipsArray.length),dd(z,W,Mt,Xt,te,Yr,hr)):Ao=ml(z,mr,te,Va);const co=z.stencilModeForClipping(hr);on.draw(Mt,Xt.TRIANGLES,Ze,co,ft,Yn.disabled,Ao,ba,uo,te.id,Yr.layoutVertexBuffer,Yr.indexBuffer,Yr.segments,te.paint,z.transform.zoom,Qr,Yr.layoutVertexBuffer2),ur=!1}})(l,h,x,C,R):a.cq(x)?(function(z,W,te,le,pe){const Ie=te.paint.get("fill-color"),Te=te.paint.get("fill-opacity");if(Te.constantOr(1)===0)return;const{isRenderingToTexture:qe}=pe,Ze=z.colorModeForRenderPass(),ft=te.paint.get("fill-pattern"),mt=z.opaquePassEnabledForLayer()&&!ft.constantOr(1)&&Ie.constantOr(a.bp.transparent).a===1&&Te.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===mt){const pt=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?Wn.ReadWrite:Wn.ReadOnly);Hs(z,W,te,le,pt,Ze,!1,qe)}if(z.renderPass==="translucent"&&te.paint.get("fill-antialias")){const pt=z.getDepthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,Wn.ReadOnly);Hs(z,W,te,le,pt,Ze,!0,qe)}})(l,h,x,C,R):a.cr(x)?(function(z,W,te,le,pe){const Ie=te.paint.get("fill-extrusion-opacity");if(Ie===0)return;const{isRenderingToTexture:Te}=pe;if(z.renderPass==="translucent"){const qe=new Wn(z.context.gl.LEQUAL,Wn.ReadWrite,z.depthRangeFor3D);if(Ie!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))Lh(z,W,te,le,qe,Zn.disabled,ki.disabled,Te),Lh(z,W,te,le,qe,z.stencilModeFor3D(),z.colorModeForRenderPass(),Te);else{const Ze=z.colorModeForRenderPass();Lh(z,W,te,le,qe,Zn.disabled,Ze,Te)}}})(l,h,x,C,R):a.cs(x)?(function(z,W,te,le,pe){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:Ie}=pe,Te=z.context,qe=z.style.projection.useSubdivision,Ze=z.getDepthModeForSublayer(0,Wn.ReadOnly),ft=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(mt,pt,_t,Lt,xt,Rt,Bt){const Mt=mt.context,Xt=Mt.gl;for(const gr of _t){const ur=pt.getTile(gr),hr=ur.dem;if(!hr||!hr.data||!ur.needsHillshadePrepare)continue;const mr=hr.dim,Yr=hr.stride,Qr=hr.getPixels();if(Mt.activeTexture.set(Xt.TEXTURE1),Mt.pixelStoreUnpackPremultiplyAlpha.set(!1),ur.demTexture=ur.demTexture||mt.getTileTexture(Yr),ur.demTexture){const on=ur.demTexture;on.update(Qr,{premultiply:!1}),on.bind(Xt.NEAREST,Xt.CLAMP_TO_EDGE)}else ur.demTexture=new a.T(Mt,Qr,Xt.RGBA,{premultiply:!1}),ur.demTexture.bind(Xt.NEAREST,Xt.CLAMP_TO_EDGE);Mt.activeTexture.set(Xt.TEXTURE0);let Br=ur.fbo;if(!Br){const on=new a.T(Mt,{width:mr,height:mr,data:null},Xt.RGBA);on.bind(Xt.LINEAR,Xt.CLAMP_TO_EDGE),Br=ur.fbo=Mt.createFramebuffer(mr,mr,!0,!1),Br.colorAttachment.set(on.texture)}Mt.bindFramebuffer.set(Br.framebuffer),Mt.viewport.set([0,0,mr,mr]),mt.useProgram("hillshadePrepare").draw(Mt,Xt.TRIANGLES,xt,Rt,Bt,Yn.disabled,$s(ur.tileID,hr),null,null,Lt.id,mt.rasterBoundsBuffer,mt.quadTriangleIndexBuffer,mt.rasterBoundsSegments),ur.needsHillshadePrepare=!1}})(z,W,le,te,Ze,Zn.disabled,ft),Te.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(qe){const[mt,pt,_t]=z.stencilConfigForOverlapTwoPass(le);Lc(z,W,te,_t,mt,Ze,ft,!1,Ie),Lc(z,W,te,_t,pt,Ze,ft,!0,Ie)}else{const[mt,pt]=z.getStencilConfigForOverlapAndUpdateStencilID(le);Lc(z,W,te,pt,mt,Ze,ft,!1,Ie)}})(l,h,x,C,R):a.ct(x)?(function(z,W,te,le,pe){if(z.renderPass!=="translucent"||!le.length)return;const{isRenderingToTexture:Ie}=pe,Te=z.style.projection.useSubdivision,qe=z.getDepthModeForSublayer(0,Wn.ReadOnly),Ze=z.colorModeForRenderPass();if(Te){const[ft,mt,pt]=z.stencilConfigForOverlapTwoPass(le);qd(z,W,te,pt,ft,qe,Ze,!1,Ie),qd(z,W,te,pt,mt,qe,Ze,!0,Ie)}else{const[ft,mt]=z.getStencilConfigForOverlapAndUpdateStencilID(le);qd(z,W,te,mt,ft,qe,Ze,!1,Ie)}})(l,h,x,C,R):a.bU(x)?(function(z,W,te,le,pe){if(z.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!le.length)return;const{isRenderingToTexture:Ie}=pe,Te=W.getSource(),qe=z.style.projection.useSubdivision;if(Te instanceof Kt)fd(z,W,te,le,null,!1,!1,Te.tileCoords,Te.flippedWindingOrder,Ie);else if(qe){const[Ze,ft,mt]=z.stencilConfigForOverlapTwoPass(le);fd(z,W,te,mt,Ze,!1,!0,Rc,!1,Ie),fd(z,W,te,mt,ft,!0,!0,Rc,!1,Ie)}else{const[Ze,ft]=z.getStencilConfigForOverlapAndUpdateStencilID(le);fd(z,W,te,ft,Ze,!1,!0,Rc,!1,Ie)}})(l,h,x,C,R):a.cu(x)?(function(z,W,te,le,pe){const Ie=te.paint.get("background-color"),Te=te.paint.get("background-opacity");if(Te===0)return;const{isRenderingToTexture:qe}=pe,Ze=z.context,ft=Ze.gl,mt=z.style.projection,pt=z.transform,_t=pt.tileSize,Lt=te.paint.get("background-pattern");if(z.isPatternMissing(Lt))return;const xt=!Lt&&Ie.a===1&&Te===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==xt)return;const Rt=Zn.disabled,Bt=z.getDepthModeForSublayer(0,xt==="opaque"?Wn.ReadWrite:Wn.ReadOnly),Mt=z.colorModeForRenderPass(),Xt=z.useProgram(Lt?"backgroundPattern":"background"),gr=le||Vn(pt,{tileSize:_t,terrain:z.style.map.terrain});Lt&&(Ze.activeTexture.set(ft.TEXTURE0),z.imageManager.bind(z.context));const ur=te.getCrossfadeParameters();for(const hr of gr){const mr=pt.getProjectionData({overscaledTileID:hr,applyGlobeMatrix:!qe,applyTerrainMatrix:!0}),Yr=Lt?T(Te,z,Lt,{tileID:hr,tileSize:_t},ur):v(Te,Ie),Qr=z.style.map.terrain&&z.style.map.terrain.getTerrainData(hr),Br=mt.getMeshFromTileID(Ze,hr.canonical,!1,!0,"raster");Xt.draw(Ze,ft.TRIANGLES,Bt,Rt,Mt,Yn.backCCW,Yr,Qr,mr,te.id,Br.vertexBuffer,Br.indexBuffer,Br.segments)}})(l,0,x,C,R):a.cv(x)&&(function(z,W,te,le){const{isRenderingGlobe:pe}=le,Ie=z.context,Te=te.implementation,qe=z.style.projection,Ze=z.transform,ft=Ze.getProjectionDataForCustomLayer(pe),mt={farZ:Ze.farZ,nearZ:Ze.nearZ,fov:Ze.fov*Math.PI/180,modelViewProjectionMatrix:Ze.modelViewProjectionMatrix,projectionMatrix:Ze.projectionMatrix,shaderData:{variantName:qe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${qe.shaderPreludeCode.vertexSource}`,define:qe.shaderDefine},defaultProjectionData:ft},pt=Te.renderingMode?Te.renderingMode:"2d";if(z.renderPass==="offscreen"){const _t=Te.prerender;_t&&(z.setCustomLayerDefaults(),Ie.setColorMode(z.colorModeForRenderPass()),_t.call(Te,Ie.gl,mt),Ie.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),Ie.setColorMode(z.colorModeForRenderPass()),Ie.setStencilMode(Zn.disabled);const _t=pt==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,Wn.ReadOnly);Ie.setDepthMode(_t),Te.render(Ie.gl,mt),Ie.setDirty(),z.setBaseState(),Ie.bindFramebuffer.set(null)}})(l,0,x,R))}saveTileTexture(l){const h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const h=this.imageManager.getPattern(l.from.toString()),x=this.imageManager.getPattern(l.to.toString());return!h||!x}useProgram(l,h,x=!1,C=[]){this.cache=this.cache||{};const R=!!this.style.map.terrain,z=this.style.projection,W=x?rn.projectionMercator:z.shaderPreludeCode,te=x?sa:z.shaderDefine,le=l+(h?h.cacheKey:"")+`/${x?hi:z.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(R?"/terrain":"")+(C?`/${C.join("/")}`:"");return this.cache[le]||(this.cache[le]=new ls(this.context,rn[l],h,ne[l],this._showOverdrawInspector,R,W,te,C)),this.cache[le]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var l,h;if(this._tileTextures){for(const x in this._tileTextures){const C=this._tileTextures[x];if(C)for(const R of C)R.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((l=this.tileExtentMesh.vertexBuffer)===null||l===void 0||l.destroy()),this.tileExtentMesh&&((h=this.tileExtentMesh.indexBuffer)===null||h===void 0||h.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const x in this.cache){const C=this.cache[x];C&&C.program&&this.context.gl.deleteProgram(C.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:h}=this.context.gl;return this.width!==l||this.height!==h}}function Dp(L,l){let h,x=!1,C=null,R=null;const z=()=>{C=null,x&&(L.apply(R,h),C=setTimeout(z,l),x=!1)};return(...W)=>(x=!0,R=this,h=W,C||z(),C)}class Dh{constructor(l){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let x;return h.split("&").map((C=>C.split("="))).forEach((C=>{C[0]===this._hashName&&(x=C)})),(x&&x[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(!this._isValidHash(h))return!1;const x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:x,pitch:+(h[4]||0)}),!0},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{const h=this._getCurrentHash();if(h.length===0)return;const x=h.join("/");let C=x;C.split("&").length>0&&(C=C.split("&")[0]),this._hashName&&(C=`${this._hashName}=${x}`);let R=window.location.hash.replace(C,"");R.startsWith("#&")?R=R.slice(0,1)+R.slice(2):R==="#"&&(R="");let z=window.location.href.replace(/(#.+)?$/,R);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=Dp(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const h=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,C=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,C),z=Math.round(h.lng*R)/R,W=Math.round(h.lat*R)/R,te=this._map.getBearing(),le=this._map.getPitch();let pe="";if(pe+=l?`/${z}/${W}/${x}`:`${x}/${W}/${z}`,(te||le)&&(pe+="/"+Math.round(10*te)/10),le&&(pe+=`/${Math.round(le)}`),this._hashName){const Ie=this._hashName;let Te=!1;const qe=window.location.hash.slice(1).split("&").map((Ze=>{const ft=Ze.split("=")[0];return ft===Ie?(Te=!0,`${ft}=${pe}`):Ze})).filter((Ze=>Ze));return Te||qe.push(`${Ie}=${pe}`),`#${qe.join("&")}`}return`#${pe}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.V(+l[2],+l[1])}catch{return!1}const h=+l[0],x=+(l[3]||0),C=+(l[4]||0);return h>=this._map.getMinZoom()&&h<=this._map.getMaxZoom()&&x>=-180&&x<=180&&C>=this._map.getMinPitch()&&C<=this._map.getMaxPitch()}}const Pu={linearity:.3,easing:a.cw(0,0,.3,1)},tg=a.e({deceleration:2500,maxSpeed:1400},Pu),lu=a.e({deceleration:20,maxSpeed:1400},Pu),uu=a.e({deceleration:1e3,maxSpeed:360},Pu),G=a.e({deceleration:1e3,maxSpeed:90},Pu),J=a.e({deceleration:1e3,maxSpeed:360},Pu);class ge{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=k();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)h.zoom+=R.zoomDelta||0,h.bearing+=R.bearingDelta||0,h.pitch+=R.pitchDelta||0,h.roll+=R.rollDelta||0,R.panDelta&&h.pan._add(R.panDelta),R.around&&(h.around=R.around),R.pinchAround&&(h.pinchAround=R.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(h.pan.mag()){const R=Ye(h.pan.mag(),x,a.e({},tg,l||{})),z=h.pan.mult(R.amount/h.pan.mag()),W=this._map.cameraHelper.handlePanInertia(z,this._map.transform);C.center=W.easingCenter,C.offset=W.easingOffset,Pe(C,R)}if(h.zoom){const R=Ye(h.zoom,x,lu);C.zoom=this._map.transform.zoom+R.amount,Pe(C,R)}if(h.bearing){const R=Ye(h.bearing,x,uu);C.bearing=this._map.transform.bearing+a.an(R.amount,-179,179),Pe(C,R)}if(h.pitch){const R=Ye(h.pitch,x,G);C.pitch=this._map.transform.pitch+R.amount,Pe(C,R)}if(h.roll){const R=Ye(h.roll,x,J);C.roll=this._map.transform.roll+a.an(R.amount,-179,179),Pe(C,R)}if(C.zoom||C.bearing){const R=h.pinchAround===void 0?h.around:h.pinchAround;C.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),a.e(C,{noMoveStart:!0})}}function Pe(L,l){(!L.duration||L.duration<l.duration)&&(L.duration=l.duration,L.easing=l.easing)}function Ye(L,l,h){const{maxSpeed:x,linearity:C,deceleration:R}=h,z=a.an(L*C/(l/1e3),-x,x),W=Math.abs(z)/(R*C);return{easing:h.easing,duration:1e3*W,amount:z*(W/2)}}class Qe extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,x,C={}){x=x instanceof MouseEvent?x:new MouseEvent(l,x);const R=M.mousePos(h.getCanvas(),x),z=h.unproject(R);super(l,a.e({point:R,lngLat:z,originalEvent:x},C)),this._defaultPrevented=!1,this.target=h}}class nt extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,x){const C=l==="touchend"?x.changedTouches:x.touches,R=M.touchPos(h.getCanvasContainer(),C),z=R.map((te=>h.unproject(te))),W=R.reduce(((te,le,pe,Ie)=>te.add(le.div(Ie.length))),new a.P(0,0));super(l,{points:R,point:W,lngLats:z,lngLat:h.unproject(W),originalEvent:x}),this._defaultPrevented=!1}}class lt extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,x){super(l,{originalEvent:x}),this._defaultPrevented=!1}}class vt{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new lt(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new Qe(l.type,this._map,l))}mouseup(l){this._map.fire(new Qe(l.type,this._map,l))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Qe(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Qe(l.type,this._map,l))}mouseover(l){this._map.fire(new Qe(l.type,this._map,l))}mouseout(l){this._map.fire(new Qe(l.type,this._map,l))}touchstart(l){return this._firePreventable(new nt(l.type,this._map,l))}touchmove(l){this._map.fire(new nt(l.type,this._map,l))}touchend(l){this._map.fire(new nt(l.type,this._map,l))}touchcancel(l){this._map.fire(new nt(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tt{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Qe(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qe("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Qe(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ht{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class pr{constructor(l,h){this._map=l,this._tr=new Ht(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(M.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const x=h;if(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=x,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const R=Math.min(C.x,x.x),z=Math.max(C.x,x.x),W=Math.min(C.y,x.y),te=Math.max(C.y,x.y);M.setTransform(this._box,`translate(${R}px,${W}px)`),this._box.style.width=z-R+"px",this._box.style.height=te-W+"px"}mouseupWindow(l,h){if(!this._active||l.button!==0)return;const x=this._startPos,C=h;if(this.reset(),M.suppressClick(),x.x!==C.x||x.y!==C.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:R=>R.fitScreenCoordinates(x,C,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new a.l(l,{originalEvent:h}))}}function wt(L,l){if(L.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${L.length}, points ${l.length}`);const h={};for(let x=0;x<L.length;x++)h[L[x].identifier]=l[x];return h}class Pt{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,h,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),x.length===this.numTouches&&(this.centroid=(function(C){const R=new a.P(0,0);for(const z of C)R._add(z);return R.div(C.length)})(h),this.touches=wt(x,h)))}touchmove(l,h,x){if(this.aborted||!this.centroid)return;const C=wt(x,h);for(const R in this.touches){const z=C[R];(!z||z.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(l,h,x){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class or{constructor(l){this.singleTap=new Pt(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,h,x){this.singleTap.touchstart(l,h,x)}touchmove(l,h,x){this.singleTap.touchmove(l,h,x)}touchend(l,h,x){const C=this.singleTap.touchend(l,h,x);if(C){const R=l.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(C)<30;if(R&&z||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class Ar{constructor(l){this._tr=new Ht(l),this._zoomIn=new or({numTouches:1,numTaps:2}),this._zoomOut=new or({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,x){this._zoomIn.touchstart(l,h,x),this._zoomOut.touchstart(l,h,x)}touchmove(l,h,x){this._zoomIn.touchmove(l,h,x),this._zoomOut.touchmove(l,h,x)}touchend(l,h,x){const C=this._zoomIn.touchend(l,h,x),R=this._zoomOut.touchend(l,h,x),z=this._tr;return C?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(C)},{originalEvent:l})}):R?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(R)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dr{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const h=this._moveFunction(...l);if(h.bearingDelta||h.pitchDelta||h.rollDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(l,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(h)?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,h){if(!this.isEnabled())return;const x=this._lastPoint;if(!x)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const C=Array.isArray(h)?h[0]:h;return!this._moved&&C.dist(x)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=C,this._move(x,C))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&M.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Mr=0,Rr=2,Jr={[Mr]:1,[Rr]:2};class Gr{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const h=M.mouseButton(l);this._eventButton=h}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(h,x){const C=Jr[x];return h.buttons===void 0||(h.buttons&C)!==C})(l,this._eventButton)}isValidEndEvent(l){return M.mouseButton(l)===this._eventButton}}class $n{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class Ln{constructor(l=new Gr({checkCorrectEvent:()=>!0}),h=new $n){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=h}_executeRelevantHandler(l,h,x){return l instanceof MouseEvent?h(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?x(l):void 0}startMove(l){this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.startMove(h)),(h=>this.oneFingerTouchMoveStateManager.startMove(h)))}endMove(l){this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.endMove(h)),(h=>this.oneFingerTouchMoveStateManager.endMove(h)))}isValidStartEvent(l){return this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.isValidStartEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidStartEvent(h)))}isValidMoveEvent(l){return this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.isValidMoveEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(h)))}isValidEndEvent(l){return this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.isValidEndEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidEndEvent(h)))}}const yi=L=>{L.mousedown=L.dragStart,L.mousemoveWindow=L.dragMove,L.mouseup=L.dragEnd,L.contextmenu=l=>{l.preventDefault()}};class qn{constructor(l,h){this._clickTolerance=l.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,h,x){return this._calculateTransform(l,h,x)}touchmove(l,h,x){if(this._active){if(!this._shouldBePrevented(x.length))return l.preventDefault(),this._calculateTransform(l,h,x);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,h,x){this._calculateTransform(l,h,x),this._active&&this._shouldBePrevented(x.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,x){x.length>0&&(this._active=!0);const C=wt(x,h),R=new a.P(0,0),z=new a.P(0,0);let W=0;for(const le in C){const pe=C[le],Ie=this._touches[le];Ie&&(R._add(pe),z._add(pe.sub(Ie)),W++,C[le]=pe)}if(this._touches=C,this._shouldBePrevented(W)||!z.mag())return;const te=z.div(W);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(W),panDelta:te}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,h,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,x){if(!this._firstTwoTouches)return;l.preventDefault();const[C,R]=this._firstTwoTouches,z=vo(x,h,C),W=vo(x,h,R);if(!z||!W)return;const te=this._aroundCenter?null:z.add(W).div(2);return this._move([z,W],te,l)}touchend(l,h,x){if(!this._firstTwoTouches)return;const[C,R]=this._firstTwoTouches,z=vo(x,h,C),W=vo(x,h,R);z&&W||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function vo(L,l,h){for(let x=0;x<L.length;x++)if(L[x].identifier===h)return l[x]}function Ci(L,l){return Math.log(L/l)/Math.LN2}class zn extends Bi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const x=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Ci(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ci(this._distance,x),pinchAround:h}}}function pn(L,l){return 180*L.angleWith(l)/Math.PI}class so extends Bi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h,x){const C=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:pn(this._vector,C),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,x=pn(l,this._startVector);return Math.abs(x)<h}}function vi(L){return Math.abs(L.y)>Math.abs(L.x)}class Wi extends Bi{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,h,x){super.touchstart(l,h,x),this._currentTouchCount=x.length}_start(l){this._lastPoints=l,vi(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,x){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const C=l[0].sub(this._lastPoints[0]),R=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,R,x.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(C.y+R.y)/2*-.5}):void 0}gestureBeginsVertically(l,h,x){if(this._valid!==void 0)return this._valid;const C=l.mag()>=2,R=h.mag()>=2;if(!C&&!R)return;if(!C||!R)return this._firstMove===void 0&&(this._firstMove=x),x-this._firstMove<100&&void 0;const z=l.y>0==h.y>0;return vi(l)&&vi(h)&&z}}const ta={panStep:100,bearingStep:15,pitchStep:10};class bi{constructor(l){this._tr=new Ht(l);const h=ta;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,x=0,C=0,R=0,z=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?x=-1:(l.preventDefault(),R=-1);break;case 39:l.shiftKey?x=1:(l.preventDefault(),R=1);break;case 38:l.shiftKey?C=1:(l.preventDefault(),z=-1);break;case 40:l.shiftKey?C=-1:(l.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(x=0,C=0),{cameraAnimation:W=>{const te=this._tr;W.easeTo({duration:300,easeId:"keyboardHandler",easing:al,zoom:h?Math.round(te.zoom)+h*(l.shiftKey?2:1):te.zoom,bearing:te.bearing+x*this._bearingStep,pitch:te.pitch+C*this._pitchStep,offset:[-R*this._panStep,-z*this._panStep],center:te.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function al(L){return L*(2-L)}const za=4.000244140625,Ko=1/450;class cs{constructor(l,h){this._onTimeout=x=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(x)},this._map=l,this._tr=new Ht(l),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ko}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let h=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const x=k(),C=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,h!==0&&h%za==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(C*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=M.mousePos(this._map.getCanvas(),l),x=this._tr;this._aroundPoint=this._aroundCenter?x.transform.locationToScreenPoint(a.V.convert(x.center)):h,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const W=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=W),typeof this._targetZoom=="number"&&(this._targetZoom+=W)}if(this._delta!==0){const W=this._type==="wheel"&&Math.abs(this._delta)>za?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*W)));this._delta<0&&te!==0&&(te=1/te);const le=typeof this._targetZoom!="number"?l.scale:a.aq(this._targetZoom);this._targetZoom=l.applyConstrain(l.getCameraLngLat(),a.at(le*te)).zoom,this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,x=this._startZoom,C=this._easing;let R,z=!1;if(this._type==="wheel"&&x&&C){const W=k()-this._lastWheelEventTime,te=Math.min((W+5)/200,1),le=C(te);R=a.G.number(x,h,le),te<1?this._frameId||(this._frameId=!0):z=!0}else R=h,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=R,{noInertia:!0,needsRenderFrame:!z,zoomDelta:R-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=a.cy;if(this._prevEase){const x=this._prevEase,C=(k()-x.start)/x.duration,R=x.easing(C+.01)-x.easing(C),z=.27/Math.sqrt(R*R+1e-4)*.01,W=Math.sqrt(.0729-z*z);h=a.cw(z,W,.25,1)}return this._prevEase={start:k(),duration:l,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Io{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yi{constructor(l){this._tr=new Ht(l),this.reset()}reset(){this._active=!1}dblclick(l,h){return l.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ua{constructor(){this._tap=new or({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,h,x){if(!this._swipePoint)if(this._tapTime){const C=h[0],R=l.timeStamp-this._tapTime<500,z=this._tapPoint.dist(C)<30;R&&z?x.length>0&&(this._swipePoint=C,this._swipeTouch=x[0].identifier):this.reset()}else this._tap.touchstart(l,h,x)}touchmove(l,h,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const C=h[0],R=C.y-this._swipePoint.y;return this._swipePoint=C,l.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(l,h,x)}touchend(l,h,x){if(this._tapTime)this._swipePoint&&x.length===0&&this.reset();else{const C=this._tap.touchend(l,h,x);C&&(this._tapTime=l.timeStamp,this._tapPoint=C)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lo{constructor(l,h,x){this._el=l,this._mousePan=h,this._touchPan=x}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Di{constructor(l,h,x,C){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=h,this._mousePitch=x,this._mouseRoll=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Po{constructor(l,h,x,C){this._el=l,this._touchZoom=h,this._touchRotate=x,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class yn{constructor(l,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",l);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const x=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),C=document.createElement("div");C.className="maplibregl-desktop-message",C.textContent=h,this._container.appendChild(C);const R=document.createElement("div");R.className="maplibregl-mobile-message",R.textContent=x,this._container.appendChild(R),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,h){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const mn=L=>L.zoom||L.drag||L.roll||L.pitch||L.rotate;class ds extends a.l{}function ca(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta||L.rollDelta}class bo{constructor(l,h){this.handleWindowEvent=C=>{this.handleEvent(C,`${C.type}Window`)},this.handleEvent=(C,R)=>{if(C.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=C.type==="renderFrame"?void 0:C,W={needsRenderFrame:!1},te={},le={};for(const{handlerName:Te,handler:qe,allowed:Ze}of this._handlers){if(!qe.isEnabled())continue;let ft;if(this._blockedByActive(le,Ze,Te))qe.reset();else if(qe[R||C.type]){if(a.cz(C,R||C.type)){const mt=M.mousePos(this._map.getCanvas(),C);ft=qe[R||C.type](C,mt)}else if(a.cA(C,R||C.type)){const mt=this._getMapTouches(C.touches),pt=M.touchPos(this._map.getCanvas(),mt);ft=qe[R||C.type](C,pt,mt)}else a.cB(R||C.type)||(ft=qe[R||C.type](C));this.mergeHandlerResult(W,te,ft,Te,z),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()}(ft||qe.isActive())&&(le[Te]=qe)}const pe={};for(const Te in this._previousActiveHandlers)le[Te]||(pe[Te]=z);this._previousActiveHandlers=le,(Object.keys(pe).length||ca(W))&&(this._changes.push([W,te,pe]),this._triggerRenderFrame()),(Object.keys(le).length||ca(W))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ie}=W;Ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ie(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ge(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,R,z]of this._listeners)M.addEventListener(C,R,C===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[l,h,x]of this._listeners)M.removeEventListener(l,h,l===document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(l){const h=this._map,x=h.getCanvasContainer();this._add("mapEvent",new vt(h,l));const C=h.boxZoom=new pr(h,l);this._add("boxZoom",C),l.interactive&&l.boxZoom&&C.enable();const R=h.cooperativeGestures=new yn(h,l.cooperativeGestures);this._add("cooperativeGestures",R),l.cooperativeGestures&&R.enable();const z=new Ar(h),W=new Yi(h);h.doubleClickZoom=new Io(W,z),this._add("tapZoom",z),this._add("clickZoom",W),l.interactive&&l.doubleClickZoom&&h.doubleClickZoom.enable();const te=new ua;this._add("tapDragZoom",te);const le=h.touchPitch=new Wi(h);this._add("touchPitch",le),l.interactive&&l.touchPitch&&h.touchPitch.enable(l.touchPitch);const pe=()=>h.project(h.getCenter()),Ie=(function({enable:xt,clickTolerance:Rt,aroundCenter:Bt=!0,minPixelCenterThreshold:Mt=100,rotateDegreesPerPixelMoved:Xt=.8},gr){const ur=new Gr({checkCorrectEvent:hr=>M.mouseButton(hr)===0&&hr.ctrlKey||M.mouseButton(hr)===2&&!hr.ctrlKey});return new dr({clickTolerance:Rt,move:(hr,mr)=>{const Yr=gr();if(Bt&&Math.abs(Yr.y-hr.y)>Mt)return{bearingDelta:a.cx(new a.P(hr.x,mr.y),mr,Yr)};let Qr=(mr.x-hr.x)*Xt;return Bt&&mr.y<Yr.y&&(Qr=-Qr),{bearingDelta:Qr}},moveStateManager:ur,enable:xt,assignEvents:yi})})(l,pe),Te=(function({enable:xt,clickTolerance:Rt,pitchDegreesPerPixelMoved:Bt=-.5}){const Mt=new Gr({checkCorrectEvent:Xt=>M.mouseButton(Xt)===0&&Xt.ctrlKey||M.mouseButton(Xt)===2});return new dr({clickTolerance:Rt,move:(Xt,gr)=>({pitchDelta:(gr.y-Xt.y)*Bt}),moveStateManager:Mt,enable:xt,assignEvents:yi})})(l),qe=(function({enable:xt,clickTolerance:Rt,rollDegreesPerPixelMoved:Bt=.3},Mt){const Xt=new Gr({checkCorrectEvent:gr=>M.mouseButton(gr)===2&&gr.ctrlKey});return new dr({clickTolerance:Rt,move:(gr,ur)=>{const hr=Mt();let mr=(ur.x-gr.x)*Bt;return ur.y<hr.y&&(mr=-mr),{rollDelta:mr}},moveStateManager:Xt,enable:xt,assignEvents:yi})})(l,pe);h.dragRotate=new Di(l,Ie,Te,qe),this._add("mouseRotate",Ie,["mousePitch"]),this._add("mousePitch",Te,["mouseRotate","mouseRoll"]),this._add("mouseRoll",qe,["mousePitch"]),l.interactive&&l.dragRotate&&h.dragRotate.enable();const Ze=(function({enable:xt,clickTolerance:Rt}){const Bt=new Gr({checkCorrectEvent:Mt=>M.mouseButton(Mt)===0&&!Mt.ctrlKey});return new dr({clickTolerance:Rt,move:(Mt,Xt)=>({around:Xt,panDelta:Xt.sub(Mt)}),activateOnStart:!0,moveStateManager:Bt,enable:xt,assignEvents:yi})})(l),ft=new qn(l,h);h.dragPan=new lo(x,Ze,ft),this._add("mousePan",Ze),this._add("touchPan",ft,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&h.dragPan.enable(l.dragPan);const mt=new so,pt=new zn;h.touchZoomRotate=new Po(x,pt,mt,te),this._add("touchRotate",mt,["touchPan","touchZoom"]),this._add("touchZoom",pt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&h.touchZoomRotate.enable(l.touchZoomRotate),this._add("blockableMapEvent",new Tt(h));const _t=h.scrollZoom=new cs(h,(()=>this._triggerRenderFrame()));this._add("scrollZoom",_t,["mousePan"]),l.interactive&&l.scrollZoom&&h.scrollZoom.enable(l.scrollZoom);const Lt=h.keyboard=new bi(h);this._add("keyboard",Lt),l.interactive&&l.keyboard&&h.keyboard.enable()}_add(l,h,x){this._handlers.push({handlerName:l,handler:h,allowed:x}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!mn(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,h,x){for(const C in l)if(C!==x&&(!h||h.indexOf(C)<0))return!0;return!1}_getMapTouches(l){const h=[];for(const x of l)this._el.contains(x.target)&&h.push(x);return h}mergeHandlerResult(l,h,x,C,R){if(!x)return;a.e(l,x);const z={handlerName:C,originalEvent:x.originalEvent||R};x.zoomDelta!==void 0&&(h.zoom=z),x.panDelta!==void 0&&(h.drag=z),x.rollDelta!==void 0&&(h.roll=z),x.pitchDelta!==void 0&&(h.pitch=z),x.bearingDelta!==void 0&&(h.rotate=z)}_applyChanges(){const l={},h={},x={};for(const[C,R,z]of this._changes)C.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(C.panDelta)),C.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+C.pitchDelta),C.rollDelta&&(l.rollDelta=(l.rollDelta||0)+C.rollDelta),C.around!==void 0&&(l.around=C.around),C.pinchAround!==void 0&&(l.pinchAround=C.pinchAround),C.noInertia&&(l.noInertia=C.noInertia),a.e(h,R),a.e(x,z);this._updateMapTransform(l,h,x),this._changes=[]}_updateMapTransform(l,h,x){const C=this._map,R=C._getTransformForUpdate(),z=C.terrain;if(!(ca(l)||z&&this._terrainMovement))return this._fireEvents(h,x,!0);C._stop(!0);let{panDelta:W,zoomDelta:te,bearingDelta:le,pitchDelta:pe,rollDelta:Ie,around:Te,pinchAround:qe}=l;qe!==void 0&&(Te=qe),Te=Te||C.transform.centerPoint,z&&!R.isPointOnMapSurface(Te)&&(Te=R.centerPoint);const Ze={panDelta:W,zoomDelta:te,rollDelta:Ie,pitchDelta:pe,bearingDelta:le,around:Te};this._map.cameraHelper.useGlobeControls&&!R.isPointOnMapSurface(Te)&&(Te=R.centerPoint);const ft=Te.distSqr(R.centerPoint)<.01?R.center:R.screenPointToLocation(W?Te.sub(W):Te);this._handleMapControls({terrain:z,tr:R,deltasForHelper:Ze,preZoomAroundLoc:ft,combinedEventsInProgress:h,panDelta:W}),C._applyUpdatedTransform(R),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,x,!0)}_handleMapControls({terrain:l,tr:h,deltasForHelper:x,preZoomAroundLoc:C,combinedEventsInProgress:R,panDelta:z}){const W=this._map.cameraHelper;if(W.handleMapControlsRollPitchBearingZoom(x,h),l)return W.useGlobeControls?(this._terrainMovement||!R.drag&&!R.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void W.handleMapControlsPan(x,h,C)):this._terrainMovement||!R.drag&&!R.zoom?void(R.drag&&this._terrainMovement&&z?h.setCenter(h.screenPointToLocation(h.centerPoint.sub(z))):W.handleMapControlsPan(x,h,C)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void W.handleMapControlsPan(x,h,C));W.handleMapControlsPan(x,h,C)}_fireEvents(l,h,x){const C=mn(this._eventsInProgress),R=mn(l),z={};for(const Ie in l){const{originalEvent:Te}=l[Ie];this._eventsInProgress[Ie]||(z[`${Ie}start`]=Te),this._eventsInProgress[Ie]=l[Ie]}!C&&R&&this._fireEvent("movestart",R.originalEvent);for(const Ie in z)this._fireEvent(Ie,z[Ie]);R&&this._fireEvent("move",R.originalEvent);for(const Ie in l){const{originalEvent:Te}=l[Ie];this._fireEvent(Ie,Te)}const W={};let te;for(const Ie in this._eventsInProgress){const{handlerName:Te,originalEvent:qe}=this._eventsInProgress[Ie];this._handlersById[Te].isActive()||(delete this._eventsInProgress[Ie],te=h[Te]||qe,W[`${Ie}end`]=te)}for(const Ie in W)this._fireEvent(Ie,W[Ie]);const le=mn(this._eventsInProgress),pe=(C||R)&&!le;if(pe&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ie=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ie.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ie)}if(x&&pe){this._updatingCamera=!0;const Ie=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Te=qe=>qe!==0&&-this._bearingSnap<qe&&qe<this._bearingSnap;!Ie||!Ie.essential&&_.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:te})),Te(this._map.getBearing())&&this._map.resetNorth()):(Te(Ie.bearing||this._map.getBearing())&&(Ie.bearing=0),Ie.freezeElevation=!0,this._map.easeTo(Ie,{originalEvent:te})),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new a.l(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new ds("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ma extends a.E{constructor(l,h,x){super(),this._renderFrameCallback=()=>{const C=Math.min((k()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=x.bearingSnap,this.cameraHelper=h,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(l,h){l.apply(this.transform,!0),this.transform=l,this.cameraHelper=h}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,h){return this.jumpTo({elevation:l},h),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,h,x){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},h),x)}panTo(l,h,x){return this.easeTo(a.e({center:l},h),x)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,x){return this.easeTo(a.e({zoom:l},h),x)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,h){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)).fire(new a.l("moveend",h))),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,x){return this.easeTo(a.e({bearing:l},h),x)}resetNorth(l,h){return this.rotateTo(0,a.e({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}getRoll(){return this.transform.roll}setRoll(l,h){return this.jumpTo({roll:l},h),this}cameraForBounds(l,h){l=$t.convert(l).adjustAntiMeridian();const x=h&&h.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),x,h)}_cameraForBoxAndBearing(l,h,x,C){const R={top:0,bottom:0,right:0,left:0};if(typeof(C=a.e({padding:R,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const le=C.padding;C.padding={top:le,bottom:le,right:le,left:le}}const z=a.e(R,C.padding);C.padding=z;const W=this.transform,te=new $t(l,h);return this.cameraHelper.cameraForBoxAndBearing(C,z,te,x,W)}fitBounds(l,h,x){return this._fitInternal(this.cameraForBounds(l,h),h,x)}fitScreenCoordinates(l,h,x,C,R){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(h)),x,C),C,R)}_fitInternal(l,h,x){return l?(delete(h=a.e(l,h)).padding,h.linear?this.easeTo(h,x):this.flyTo(h,x)):this}jumpTo(l,h){this.stop();const x=this._getTransformForUpdate();let C=!1,R=!1,z=!1;const W=x.zoom;this.cameraHelper.handleJumpToCenterZoom(x,l);const te=x.zoom!==W;return"elevation"in l&&x.elevation!==+l.elevation&&x.setElevation(+l.elevation),"bearing"in l&&x.bearing!==+l.bearing&&(C=!0,x.setBearing(+l.bearing)),"pitch"in l&&x.pitch!==+l.pitch&&(R=!0,x.setPitch(+l.pitch)),"roll"in l&&x.roll!==+l.roll&&(z=!0,x.setRoll(+l.roll)),l.padding==null||x.isPaddingEqual(l.padding)||x.setPadding(l.padding),this._applyUpdatedTransform(x),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)),te&&this.fire(new a.l("zoomstart",h)).fire(new a.l("zoom",h)).fire(new a.l("zoomend",h)),C&&this.fire(new a.l("rotatestart",h)).fire(new a.l("rotate",h)).fire(new a.l("rotateend",h)),R&&this.fire(new a.l("pitchstart",h)).fire(new a.l("pitch",h)).fire(new a.l("pitchend",h)),z&&this.fire(new a.l("rollstart",h)).fire(new a.l("roll",h)).fire(new a.l("rollend",h)),this.fire(new a.l("moveend",h))}calculateCameraOptionsFromTo(l,h,x,C=0){const R=a.a9.fromLngLat(l,h),z=a.a9.fromLngLat(x,C),W=z.x-R.x,te=z.y-R.y,le=z.z-R.z,pe=Math.hypot(W,te,le);if(pe===0)throw new Error("Can't calculate camera options with same From and To");const Ie=Math.hypot(W,te),Te=a.at(this.transform.cameraToCenterDistance/pe/this.transform.tileSize),qe=180*Math.atan2(W,-te)/Math.PI;let Ze=180*Math.acos(Ie/pe)/Math.PI;return Ze=le<0?90-Ze:90+Ze,{center:z.toLngLat(),elevation:C,zoom:Te,pitch:Ze,bearing:qe}}calculateCameraOptionsFromCameraLngLatAltRotation(l,h,x,C,R){const z=this.transform.calculateCenterFromCameraLngLatAlt(l,h,x,C);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:x,pitch:C,roll:R}}easeTo(l,h){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.cy},l)).animate===!1||!l.essential&&_.prefersReducedMotion)&&(l.duration=0);const x=this._getTransformForUpdate(),C=this.getBearing(),R=x.pitch,z=x.roll,W="bearing"in l?this._normalizeBearing(l.bearing,C):C,te="pitch"in l?+l.pitch:R,le="roll"in l?this._normalizeBearing(l.roll,z):z,pe="padding"in l?l.padding:x.padding,Ie=a.P.convert(l.offset);let Te,qe;l.around&&(Te=a.V.convert(l.around),qe=x.locationToScreenPoint(Te));const Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ft=this.cameraHelper.handleEaseTo(x,{bearing:W,pitch:te,roll:le,padding:pe,around:Te,aroundPoint:qe,offsetAsPoint:Ie,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||C!==W,this._pitching=this._pitching||te!==R,this._rolling=this._rolling||le!==z,this._padding=!x.isPaddingEqual(pe),this._zooming=this._zooming||ft.isZooming,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,Ze),this.terrain&&this._prepareElevation(ft.elevationCenter),this._ease((mt=>{ft.easeFunc(mt),this.terrain&&!l.freezeElevation&&this._updateElevation(mt),this._applyUpdatedTransform(x),this._fireMoveEvents(h)}),(mt=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(h,mt)}),l),this}_prepareEase(l,h,x={}){this._moving=!0,h||x.moving||this.fire(new a.l("movestart",l)),this._zooming&&!x.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!x.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!x.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!x.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&h!==this._elevationTarget){const x=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(x-(h-(x*l+this._elevationStart))/(1-l)),this._elevationTarget=h}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const h=l.getCameraLngLat(),x=l.getCameraAltitude(),C=this.terrain?this.terrain.getElevationForLngLatZoom(h,l.zoom):0;if(x<C){const R=this.calculateCameraOptionsFromTo(h,C,l.center,l.elevation);return{pitch:R.pitch,zoom:R.zoom}}return{}}_applyUpdatedTransform(l){const h=[];if(h.push((C=>this._elevateCameraIfInsideTerrain(C))),this.transformCameraUpdate&&h.push((C=>this.transformCameraUpdate(C))),!h.length)return;const x=l.clone();for(const C of h){const R=x.clone(),{center:z,zoom:W,roll:te,pitch:le,bearing:pe,elevation:Ie}=C(R);z&&R.setCenter(z),Ie!==void 0&&R.setElevation(Ie),W!==void 0&&R.setZoom(W),te!==void 0&&R.setRoll(te),le!==void 0&&R.setPitch(le),pe!==void 0&&R.setBearing(pe),x.apply(R,!1)}this.transform.apply(x,!1)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const x=this._zooming,C=this._rotating,R=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,x&&this.fire(new a.l("zoomend",l)),C&&this.fire(new a.l("rotateend",l)),R&&this.fire(new a.l("pitchend",l)),z&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,h){if(!l.essential&&_.prefersReducedMotion){const mr=a.U(l,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(mr,h)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cy},l);const x=this._getTransformForUpdate(),C=x.bearing,R=x.pitch,z=x.roll,W=x.padding,te="bearing"in l?this._normalizeBearing(l.bearing,C):C,le="pitch"in l?+l.pitch:R,pe="roll"in l?this._normalizeBearing(l.roll,z):z,Ie="padding"in l?l.padding:x.padding,Te=a.P.convert(l.offset);let qe=x.centerPoint.add(Te);const Ze=x.screenPointToLocation(qe),ft=this.cameraHelper.handleFlyTo(x,{bearing:te,pitch:le,roll:pe,padding:Ie,locationAtOffset:Ze,offsetAsPoint:Te,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let mt=l.curve;const pt=Math.max(x.width,x.height),_t=pt/ft.scaleOfZoom,Lt=ft.pixelPathLength;typeof ft.scaleOfMinZoom=="number"&&(mt=Math.sqrt(pt/ft.scaleOfMinZoom/Lt*2));const xt=mt*mt;function Rt(mr){const Yr=(_t*_t-pt*pt+(mr?-1:1)*xt*xt*Lt*Lt)/(2*(mr?_t:pt)*xt*Lt);return Math.log(Math.sqrt(Yr*Yr+1)-Yr)}function Bt(mr){return(Math.exp(mr)-Math.exp(-mr))/2}function Mt(mr){return(Math.exp(mr)+Math.exp(-mr))/2}const Xt=Rt(!1);let gr=function(mr){return Mt(Xt)/Mt(Xt+mt*mr)},ur=function(mr){return pt*((Mt(Xt)*(Bt(Yr=Xt+mt*mr)/Mt(Yr))-Bt(Xt))/xt)/Lt;var Yr},hr=(Rt(!0)-Xt)/mt;if(Math.abs(Lt)<2e-6||!isFinite(hr)){if(Math.abs(pt-_t)<1e-6)return this.easeTo(l,h);const mr=_t<pt?-1:1;hr=Math.abs(Math.log(_t/pt))/mt,ur=()=>0,gr=Yr=>Math.exp(mr*mt*Yr)}return l.duration="duration"in l?+l.duration:1e3*hr/("screenSpeed"in l?+l.screenSpeed/mt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=C!==te,this._pitching=le!==R,this._rolling=pe!==z,this._padding=!x.isPaddingEqual(Ie),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(ft.targetCenter),this._ease((mr=>{const Yr=mr*hr,Qr=1/gr(Yr),Br=ur(Yr);this._rotating&&x.setBearing(a.G.number(C,te,mr)),this._pitching&&x.setPitch(a.G.number(R,le,mr)),this._rolling&&x.setRoll(a.G.number(z,pe,mr)),this._padding&&(x.interpolatePadding(W,Ie,mr),qe=x.centerPoint.add(Te)),ft.easeFunc(mr,Qr,Br,qe),this.terrain&&!l.freezeElevation&&this._updateElevation(mr),this._applyUpdatedTransform(x),this._fireMoveEvents(h)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(h)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){var x;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,h)}return l||(x=this.handlers)===null||x===void 0||x.stop(!1),this}_ease(l,h,x){x.animate===!1||x.duration===0?(l(1),h()):(this._easeStart=k(),this._easeOptions=x,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,h){l=a.W(l,-180,180);const x=Math.abs(l-h);return Math.abs(l-360-h)<x&&(l-=360),Math.abs(l+360-h)<x&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(l),this.transform):null}}const ja={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ol{constructor(l=ja){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const x=this._map._getUIString(`AttributionControl.${h}`);l.title=x,l.setAttribute("aria-label",x)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((C=>typeof C!="string"?"":C))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const h=this._map.style.tileManagers;for(const C in h){const R=h[C];if(R.used||R.usedForTerrain){const z=R.getSource();z.attribution&&l.indexOf(z.attribution)<0&&l.push(z.attribution)}}l=l.filter((C=>String(C).trim())),l.sort(((C,R)=>C.length-R.length)),l=l.filter(((C,R)=>{for(let z=R+1;z<l.length;z++)if(l[z].indexOf(C)>=0)return!1;return!0}));const x=l.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,l.length?(this._innerContainer.innerHTML=M.sanitize(x),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class _l{constructor(l={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const x=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&x.classList.add("maplibregl-compact"):x.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const h=M.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class xl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,x=h?this._queue.concat(h):this._queue;for(const C of x)if(C.id===l)return void(C.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const x of h)if(!x.cancelled&&(x.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var zl=a.aU([{name:"a_pos3d",type:"Int16",components:3}]);class da extends a.E{constructor(l){super(),this._lastTilesetChange=k(),this.tileManager=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(l,h){this.tileManager.update(l,h),this._renderableTilesKeys=[];const x={};for(const C of Vn(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h,calculateTileZoom:this.tileManager._source.calculateTileZoom}))x[C.key]=!0,this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.terrainRttPosMatrix32f=new Float64Array(16),a.c7(C.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[C.key]=new Jt(C,this.tileSize),this._lastTilesetChange=k());for(const C in this._tiles)x[C]||delete this._tiles[C]}freeRtt(l){for(const h in this._tiles){const x=this._tiles[h];(!l||x.tileID.equals(l)||x.tileID.isChildOf(l)||l.isChildOf(x.tileID))&&(x.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,h){return h?this._getTerrainCoordsForTileRanges(l,h):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const h={};for(const x of this._renderableTilesKeys){const C=this._tiles[x].tileID,R=l.clone(),z=a.bk();if(C.canonical.equals(l.canonical))a.c7(z,0,a.a5,a.a5,0,0,1);else if(C.canonical.isChildOf(l.canonical)){const W=C.canonical.z-l.canonical.z,te=C.canonical.x-(C.canonical.x>>W<<W),le=C.canonical.y-(C.canonical.y>>W<<W),pe=a.a5>>W;a.c7(z,0,pe,pe,0,0,1),a.O(z,z,[-te*pe,-le*pe,0])}else{if(!l.canonical.isChildOf(C.canonical))continue;{const W=l.canonical.z-C.canonical.z,te=l.canonical.x-(l.canonical.x>>W<<W),le=l.canonical.y-(l.canonical.y>>W<<W),pe=a.a5>>W;a.c7(z,0,a.a5,a.a5,0,0,1),a.O(z,z,[te*pe,le*pe,0]),a.Q(z,z,[1/2**W,1/2**W,0])}}R.terrainRttPosMatrix32f=new Float32Array(z),h[x]=R}return h}_getTerrainCoordsForTileRanges(l,h){const x={};for(const C of this._renderableTilesKeys){const R=this._tiles[C].tileID;if(!this._isWithinTileRanges(R,h))continue;const z=l.clone(),W=a.bk();if(R.canonical.z===l.canonical.z){const te=l.canonical.x-R.canonical.x+l.wrap*(1<<l.canonical.z),le=l.canonical.y-R.canonical.y;a.c7(W,0,a.a5,a.a5,0,0,1),a.O(W,W,[te*a.a5,le*a.a5,0])}else if(R.canonical.z>l.canonical.z){const te=R.canonical.z-l.canonical.z,le=R.canonical.x-(R.canonical.x>>te<<te)+l.wrap*(1<<R.canonical.z),pe=R.canonical.y-(R.canonical.y>>te<<te),Ie=l.canonical.x-(R.canonical.x>>te),Te=l.canonical.y-(R.canonical.y>>te),qe=a.a5>>te;a.c7(W,0,qe,qe,0,0,1),a.O(W,W,[-le*qe+Ie*a.a5,-pe*qe+Te*a.a5,0])}else{const te=l.canonical.z-R.canonical.z,le=l.canonical.x-(l.canonical.x>>te<<te)+l.wrap*(1<<l.canonical.z),pe=l.canonical.y-(l.canonical.y>>te<<te),Ie=(l.canonical.x>>te)-R.canonical.x,Te=(l.canonical.y>>te)-R.canonical.y,qe=a.a5<<te;a.c7(W,0,qe,qe,0,0,1),a.O(W,W,[le*a.a5+Ie*qe,pe*a.a5+Te*qe,0])}z.terrainRttPosMatrix32f=new Float32Array(W),x[C]=z}return x}getSourceTile(l,h){const x=this.tileManager._source;let C=l.overscaledZ-this.deltaZoom;if(C>x.maxzoom&&(C=x.maxzoom),C<x.minzoom)return;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(C).key);let R=this.findTileInCaches(this._sourceTileCache[l.key]);if(!R?.dem&&h)for(;C>=x.minzoom&&!R?.dem;)R=this.findTileInCaches(l.scaledTo(C--).key);return R}findTileInCaches(l){let h=this.tileManager.getTileByID(l);return h||(h=this.tileManager._outOfViewCache.getByKey(l),h)}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,h){const x=h[l.canonical.z];return!!x&&(l.wrap>x.minWrap||l.wrap<x.maxWrap||l.canonical.x>=x.minTileXWrapped&&l.canonical.x<=x.maxTileXWrapped&&l.canonical.y>=x.minTileY&&l.canonical.y<=x.maxTileY)}}class Hi{constructor(l,h,x){this._meshCache={},this.painter=l,this.tileManager=new da(h),this.options=x,this.exaggeration=typeof x.exaggeration=="number"?x.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,h,x,C=a.a5){var R;if(!(h>=0&&h<C&&x>=0&&x<C))return 0;const z=this.getTerrainData(l),W=(R=z.tile)===null||R===void 0?void 0:R.dem;if(!W)return 0;const te=a.cC([],[h/C*a.a5,x/C*a.a5],z.u_terrain_matrix),le=[te[0]*W.dim,te[1]*W.dim],pe=Math.floor(le[0]),Ie=Math.floor(le[1]),Te=le[0]-pe,qe=le[1]-Ie;return W.get(pe,Ie)*(1-Te)*(1-qe)+W.get(pe+1,Ie)*Te*(1-qe)+W.get(pe,Ie+1)*(1-Te)*qe+W.get(pe+1,Ie+1)*Te*qe}getElevationForLngLatZoom(l,h){if(!a.cD(h,l.wrap()))return 0;const{tileID:x,mercatorX:C,mercatorY:R}=this._getOverscaledTileIDFromLngLatZoom(l,h);return this.getElevation(x,C%a.a5,R%a.a5,a.a5)}getElevationForLngLat(l,h){const x=Vn(h,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let C=0;for(const R of x)R.canonical.z>C&&(C=Math.min(R.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(l,C)}getElevation(l,h,x,C=a.a5){return this.getDEMElevation(l,h,x,C)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const C=this.painter.context,R=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(C,R,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(C,new a.R({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ar([])}const h=this.tileManager.getSourceTile(l,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const C=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new a.T(C,h.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),h.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const x=h&&h.toString()+h.tileID.key+l.key;if(x&&!this._demMatrixCache[x]){const C=this.tileManager.getSource().maxzoom;let R=l.canonical.z-h.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=C?R=l.canonical.z-C:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=l.canonical.x-(l.canonical.x>>R<<R),W=l.canonical.y-(l.canonical.y>>R<<R),te=a.cE(new Float64Array(16),[1/(a.a5<<R),1/(a.a5<<R),0]);a.O(te,te,[z*a.a5,W*a.a5,0]),this._demMatrixCache[l.key]={matrix:te,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:x?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(l){const h=this.painter,x=h.width/devicePixelRatio,C=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===x&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(h.context,{width:x,height:C,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(h.context,{width:x,height:C,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(x,C,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,x,C))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let R=0,z=0;R<this._coordsTextureSize;R++)for(let W=0;W<this._coordsTextureSize;W++,z+=4)h[z+0]=255&W,h[z+1]=255&R,h[z+2]=W>>8<<4|R>>8,h[z+3]=0;const x=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),C=new a.T(l,x,l.gl.RGBA,{premultiply:!1});return C.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const h=new Uint8Array(4),x=this.painter.context,C=x.gl,R=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),W=Math.round(this.painter.height/devicePixelRatio);x.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(R,W-z-1,1,1,C.RGBA,C.UNSIGNED_BYTE,h),x.bindFramebuffer.set(null);const te=h[0]+(h[2]>>4<<8),le=h[1]+((15&h[2])<<8),pe=this.coordsIndex[255-h[3]],Ie=pe&&this.tileManager.getTileByID(pe);if(!Ie)return null;const Te=this._coordsTextureSize,qe=(1<<Ie.tileID.canonical.z)*Te;return new a.a9((Ie.tileID.canonical.x*Te+te)/qe+Ie.tileID.wrap,(Ie.tileID.canonical.y*Te+le)/qe,this.getElevation(Ie.tileID,te,le,Te))}depthAtPoint(l){const h=new Uint8Array(4),x=this.painter.context,C=x.gl;return x.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),C.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,h),x.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(l){var h;const x=((h=this.painter.style.projection)===null||h===void 0?void 0:h.transitionState)>0,C=x&&l.canonical.y===0,R=x&&l.canonical.y===(1<<l.canonical.z)-1,z=`m_${C?"n":""}_${R?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const W=this.painter.context,te=new a.cF,le=new a.aY,pe=this.meshSize,Ie=a.a5/pe,Te=pe*pe;for(let Mt=0;Mt<=pe;Mt++)for(let Xt=0;Xt<=pe;Xt++)te.emplaceBack(Xt*Ie,Mt*Ie,0);for(let Mt=0;Mt<Te;Mt+=pe+1)for(let Xt=0;Xt<pe;Xt++)le.emplaceBack(Xt+Mt,pe+Xt+Mt+1,pe+Xt+Mt+2),le.emplaceBack(Xt+Mt,pe+Xt+Mt+2,Xt+Mt+1);const qe=te.length,Ze=qe+(pe+1),ft=(pe+1)*pe,mt=C?a.br:0,pt=C?0:1,_t=R?a.bs:a.a5,Lt=R?0:1;for(let Mt=0;Mt<=pe;Mt++)te.emplaceBack(Mt*Ie,mt,pt);for(let Mt=0;Mt<=pe;Mt++)te.emplaceBack(Mt*Ie,_t,Lt);for(let Mt=0;Mt<pe;Mt++)le.emplaceBack(ft+Mt,Ze+Mt,Ze+Mt+1),le.emplaceBack(ft+Mt,Ze+Mt+1,ft+Mt+1),le.emplaceBack(0+Mt,qe+Mt+1,qe+Mt),le.emplaceBack(0+Mt,0+Mt+1,qe+Mt+1);const xt=te.length,Rt=xt+2*(pe+1);for(const Mt of[0,1])for(let Xt=0;Xt<=pe;Xt++)for(const gr of[0,1])te.emplaceBack(Mt*a.a5,Xt*Ie,gr);for(let Mt=0;Mt<2*pe;Mt+=2)le.emplaceBack(xt+Mt,xt+Mt+1,xt+Mt+3),le.emplaceBack(xt+Mt,xt+Mt+3,xt+Mt+2),le.emplaceBack(Rt+Mt,Rt+Mt+3,Rt+Mt+1),le.emplaceBack(Rt+Mt,Rt+Mt+2,Rt+Mt+3);const Bt=new ii(W.createVertexBuffer(te,zl.members),W.createIndexBuffer(le),a.aX.simpleSegment(0,0,te.length,le.length));return this._meshCache[z]=Bt,Bt}getMeshFrameDelta(l){return 2*Math.PI*a.bE/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,h){var x;if(!a.cD(h,l.wrap()))return 0;const{tileID:C}=this._getOverscaledTileIDFromLngLatZoom(l,h);return(x=this.getMinMaxElevation(C).minElevation)!==null&&x!==void 0?x:0}getMinMaxElevation(l){const h=this.getTerrainData(l).tile,x={minElevation:null,maxElevation:null};return h&&h.dem&&(x.minElevation=h.dem.min*this.exaggeration,x.maxElevation=h.dem.max*this.exaggeration),x}_getOverscaledTileIDFromLngLatZoom(l,h){const x=a.a9.fromLngLat(l.wrap()),C=(1<<h)*a.a5,R=x.x*C,z=x.y*C,W=Math.floor(R/a.a5),te=Math.floor(z/a.a5);return{tileID:new a.a2(h,0,h,W,te),mercatorX:R,mercatorY:z}}}class ra{constructor(l,h,x){this._context=l,this._size=h,this._tileSize=x,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),x=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return x.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(x.texture),{id:l,fbo:h,texture:x,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((h=>l.id!==h)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const jl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ql{constructor(l,h){this.painter=l,this.terrain=h,this.pool=new ra(l.context,30,h.tileManager.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=l._order.filter((x=>!l._layers[x].isHidden(h))),this._coordsAscending={};for(const x in l.tileManagers){this._coordsAscending[x]={};const C=l.tileManagers[x].getVisibleCoordinates(),R=l.tileManagers[x].getSource(),z=R instanceof Kt?R.terrainTileRanges:null;for(const W of C){const te=this.terrain.tileManager.getTerrainCoords(W,z);for(const le in te)this._coordsAscending[x][le]||(this._coordsAscending[x][le]=[]),this._coordsAscending[x][le].push(te[le])}}this._coordsAscendingStr={};for(const x of l._order){const C=l._layers[x],R=C.source;if(jl[C.type]&&!this._coordsAscendingStr[R]){this._coordsAscendingStr[R]={};for(const z in this._coordsAscending[R])this._coordsAscendingStr[R][z]=this._coordsAscending[R][z].map((W=>W.key)).sort().join()}}for(const x of this._renderableTiles)for(const C in this._coordsAscendingStr){const R=this._coordsAscendingStr[C][x.tileID.key];R&&R!==x.rttCoords[C]&&(x.rtt=[])}}renderLayer(l,h){if(l.isHidden(this.painter.transform.zoom))return!1;const x=Object.assign(Object.assign({},h),{isRenderingToTexture:!0}),C=l.type,R=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(jl[C]&&(this._prevType&&jl[this._prevType]||this._stacks.push([]),this._prevType=C,this._stacks[this._stacks.length-1].push(l.id),!z))return!0;if(jl[this._prevType]||jl[C]&&z){this._prevType=C;const W=this._stacks.length-1,te=this._stacks[W]||[];for(const le of this._renderableTiles){if(this.pool.isFull()&&(Lp(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(le),le.rtt[W]){const Ie=this.pool.getObjectForId(le.rtt[W].id);if(Ie.stamp===le.rtt[W].stamp){this.pool.useObject(Ie);continue}}const pe=this.pool.getOrCreateFreeObject();this.pool.useObject(pe),this.pool.stampObject(pe),le.rtt[W]={id:pe.id,stamp:pe.stamp},R.context.bindFramebuffer.set(pe.fbo.framebuffer),R.context.clear({color:a.bp.transparent,stencil:0}),R.currentStencilSource=void 0;for(let Ie=0;Ie<te.length;Ie++){const Te=R.style._layers[te[Ie]],qe=Te.source?this._coordsAscending[Te.source][le.tileID.key]:[le.tileID];R.context.viewport.set([0,0,pe.fbo.width,pe.fbo.height]),R._renderTileClippingMasks(Te,qe,!0),R.renderLayer(R,R.style.tileManagers[Te.source],Te,qe,x),Te.source&&(le.rttCoords[Te.source]=this._coordsAscendingStr[Te.source][le.tileID.key])}}return Lp(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects(),jl[C]}return!1}}const zo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},$d=f,Gd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ja,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Ud={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class lc{constructor(l,h,x=!1){this.mousedown=R=>{this.startMove(R,M.mousePos(this.element,R)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=R=>{this.move(R,M.mousePos(this.element,R))},this.mouseup=R=>{this._rotatePitchHandler.dragEnd(R),this.offTemp()},this.touchstart=R=>{R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,R.targetTouches)[0],this.startMove(R,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=R=>{R.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,R.targetTouches)[0],this.move(R,this._lastPos))},this.touchend=R=>{R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=h;const C=new Ln;this._rotatePitchHandler=new dr({clickTolerance:3,move:(R,z)=>{const W=h.getBoundingClientRect(),te=new a.P((W.bottom-W.top)/2,(W.right-W.left)/2);return{bearingDelta:a.cx(new a.P(R.x,z.y),z,te),pitchDelta:x?-.5*(z.y-R.y):void 0}},moveStateManager:C,enable:!0,assignEvents:()=>{}}),this.map=l,M.addEventListener(h,"mousedown",this.mousedown),M.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(h,"touchcancel",this.reset)}startMove(l,h){this._rotatePitchHandler.dragStart(l,h),M.disableDrag()}move(l,h){const x=this.map,{bearingDelta:C,pitchDelta:R}=this._rotatePitchHandler.dragMove(l,h)||{};C&&x.setBearing(x.getBearing()+C),R&&x.setPitch(x.getPitch()+R)}off(){const l=this.element;M.removeEventListener(l,"mousedown",this.mousedown),M.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let uc;function Oh(L,l,h,x=!1){if(x||!h.getCoveringTilesDetailsProvider().allowWorldCopies())return L?.wrap();const C=new a.V(L.lng,L.lat);if(L=new a.V(L.lng,L.lat),l){const R=new a.V(L.lng-360,L.lat),z=new a.V(L.lng+360,L.lat),W=h.locationToScreenPoint(L).distSqr(l);h.locationToScreenPoint(R).distSqr(l)<W?L=R:h.locationToScreenPoint(z).distSqr(l)<W&&(L=z)}for(;Math.abs(L.lng-h.center.lng)>180;){const R=h.locationToScreenPoint(L);if(R.x>=0&&R.y>=0&&R.x<=h.width&&R.y<=h.height)break;L.lng>h.center.lng?L.lng-=360:L.lng+=360}return L.lng!==C.lng&&h.isPointOnMapSurface(h.locationToScreenPoint(L))?L:C}const hd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Au(L,l,h){const x=L.classList;for(const C in hd)x.remove(`maplibregl-${h}-anchor-${C}`);x.add(`maplibregl-${h}-anchor-${l}`)}class Ff extends a.E{constructor(l){if(super(),this._onKeyPress=h=>{const x=h.code,C=h.charCode||h.keyCode;x!=="Space"&&x!=="Enter"&&C!==32&&C!==13||this.togglePopup()},this._onMapClick=h=>{const x=h.originalEvent.target,C=this._element;this._popup&&(x===C||C.contains(x))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const x=this._map.loaded()&&!this._map.isMoving();(h?.type==="terrain"||h?.type==="render"&&!x)&&this._map.once("render",this._update),this._lngLat=Oh(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let R="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?R="rotateX(0deg)":this._pitchAlignment==="map"&&(R=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${hd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${R} ${C}`),_.frameAsync(new AbortController).then((()=>{this._updateOpacity(h&&h.type==="moveend")})).catch((()=>{}))},this._onMove=h=>{if(!this._isDragging){const x=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l?.opacity,l?.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const h=M.createNS("http://www.w3.org/2000/svg","svg"),x=41,C=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${x}px`),h.setAttributeNS(null,"width",`${C}px`),h.setAttributeNS(null,"viewBox",`0 0 ${C} ${x}`);const R=M.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");const z=M.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const W=M.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(3.0, 29.0)"),W.setAttributeNS(null,"fill","#000000");const te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pt of te){const _t=M.createNS("http://www.w3.org/2000/svg","ellipse");_t.setAttributeNS(null,"opacity","0.04"),_t.setAttributeNS(null,"cx","10.5"),_t.setAttributeNS(null,"cy","5.80029008"),_t.setAttributeNS(null,"rx",pt.rx),_t.setAttributeNS(null,"ry",pt.ry),W.appendChild(_t)}const le=M.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"fill",this._color);const pe=M.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),le.appendChild(pe);const Ie=M.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"fill","#000000");const Te=M.createNS("http://www.w3.org/2000/svg","path");Te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ie.appendChild(Te);const qe=M.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),qe.setAttributeNS(null,"fill","#FFFFFF");const Ze=M.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ft=M.createNS("http://www.w3.org/2000/svg","circle");ft.setAttributeNS(null,"fill","#000000"),ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"cx","5.5"),ft.setAttributeNS(null,"cy","5.5"),ft.setAttributeNS(null,"r","5.4999962");const mt=M.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#FFFFFF"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962"),Ze.appendChild(ft),Ze.appendChild(mt),z.appendChild(W),z.appendChild(le),z.appendChild(Ie),z.appendChild(qe),z.appendChild(Ze),h.appendChild(z),h.setAttributeNS(null,"height",x*this._scale+"px"),h.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(h),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(h=>{h.preventDefault()})),this._element.addEventListener("mousedown",(h=>{h.preventDefault()})),Au(this._element,this._anchor,"marker"),l&&l.className)for(const h of l.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.V.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const C=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var h,x;const C=(h=this._map)===null||h===void 0?void 0:h.terrain,R=this._map.transform.isLocationOccluded(this._lngLat);if(!C||R){const qe=R?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==qe&&(this._element.style.opacity=qe))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const z=this._map,W=z.terrain.depthAtPoint(this._pos),te=z.terrain.getElevationForLngLat(this._lngLat,z.transform);if(z.transform.lngLatToCameraDepth(this._lngLat,te)-W<.006)return void(this._element.style.opacity=this._opacity);const le=-this._offset.y/z.transform.pixelsPerMeter,pe=Math.sin(z.getPitch()*Math.PI/180)*le,Ie=z.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),Te=z.transform.lngLatToCameraDepth(this._lngLat,te+pe)-Ie>.006;!((x=this._popup)===null||x===void 0)&&x.isOpen()&&Te&&this._popup.remove(),this._element.style.opacity=Te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,h){return(this._opacity===void 0||l===void 0&&h===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}const Op={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Hd=0,Dc=!1;const Wd={maxWidth:100,unit:"metric"};function Xd(L,l,h){const x=h&&h.maxWidth||100,C=L._container.clientHeight/2,R=L._container.clientWidth/2,z=L.unproject([R-x/2,C]),W=L.unproject([R+x/2,C]),te=Math.round(L.project(W).x-L.project(z).x),le=Math.min(x,te,L._container.clientWidth),pe=z.distanceTo(W);if(h&&h.unit==="imperial"){const Ie=3.2808*pe;Ie>5280?Oc(l,le,Ie/5280,L._getUIString("ScaleControl.Miles")):Oc(l,le,Ie,L._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?Oc(l,le,pe/1852,L._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?Oc(l,le,pe/1e3,L._getUIString("ScaleControl.Kilometers")):Oc(l,le,pe,L._getUIString("ScaleControl.Meters"))}function Oc(L,l,h,x){const C=(function(R){const z=Math.pow(10,`${Math.floor(R)}`.length-1);let W=R/z;return W=W>=10?10:W>=5?5:W>=3?3:W>=2?2:W>=1?1:(function(te){const le=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*le)/le})(W),z*W})(h);L.style.width=l*(C/h)+"px",L.innerHTML=`${C}&nbsp;${x}`}const Yd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},Zd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Nc(L){if(L){if(typeof L=="number"){const l=Math.round(Math.abs(L)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,L),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-L),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(L,0),right:new a.P(-L,0)}}if(L instanceof a.P||Array.isArray(L)){const l=a.P.convert(L);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(L.center||[0,0]),top:a.P.convert(L.top||[0,0]),"top-left":a.P.convert(L["top-left"]||[0,0]),"top-right":a.P.convert(L["top-right"]||[0,0]),bottom:a.P.convert(L.bottom||[0,0]),"bottom-left":a.P.convert(L["bottom-left"]||[0,0]),"bottom-right":a.P.convert(L["bottom-right"]||[0,0]),left:a.P.convert(L.left||[0,0]),right:a.P.convert(L.right||[0,0])}}return Nc(new a.P(0,0))}const Nh=f;u.AJAXError=a.cI,u.Event=a.l,u.Evented=a.E,u.LngLat=a.V,u.MercatorCoordinate=a.a9,u.Point=a.P,u.addProtocol=a.cJ,u.config=a.c,u.removeProtocol=a.cK,u.AttributionControl=ol,u.BoxZoomHandler=pr,u.CanvasSource=Ae,u.CooperativeGesturesHandler=yn,u.DoubleClickZoomHandler=Io,u.DragPanHandler=lo,u.DragRotateHandler=Di,u.EdgeInsets=as,u.FullscreenControl=class extends a.E{constructor(L={}){super(),this._onFullscreenChange=()=>{var l;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=h?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,L&&L.container&&(L.container instanceof HTMLElement?this._container=L.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const L=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",L).setAttribute("aria-hidden","true"),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=yr,u.GeolocateControl=class extends a.E{constructor(L){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const h=new a.V(l.coords.longitude,l.coords.latitude),x=l.coords.accuracy,C=this._map.getBearing(),R=a.e({bearing:C},this.options.fitBoundsOptions),z=$t.fromLngLat(h,x);this._map.fitBounds(z,R,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const h=new a.V(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=l.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=l=>{if(this._map){if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&Dc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ff({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ff({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(h=>{const x=h?.[0]instanceof ResizeObserverEntry;h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||x||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},Op,L)}onAdd(L){return this._map=L,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(uc!==void 0&&!l)return uc;if(window.navigator.permissions===void 0)return uc=!!window.navigator.geolocation,uc;try{uc=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{uc=!!window.navigator.geolocation}return uc}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Hd=0,Dc=!1}_isOutOfMapMaxBounds(L){const l=this._map.getMaxBounds(),h=L.coords;return l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const L=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&L))return;const l=this._map.project(L),h=this._map.unproject([l.x+100,l.y]),x=L.distanceTo(h)/100,C=2*this._accuracy/x;this._circleElement.style.width=`${C.toFixed(2)}px`,this._circleElement.style.height=`${C.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Hd--,Dc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let L;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Hd++,Hd>1?(L={maximumAge:6e5,timeout:0},Dc=!0):(L=this.options.positionOptions,Dc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,L)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.GlobeControl=class{constructor(){this._toggleProjection=()=>{var L;const l=(L=this._map.getProjection())===null||L===void 0?void 0:L.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var L;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((L=this._map.getProjection())===null||L===void 0?void 0:L.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(L){return this._map=L,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=M.create("button","maplibregl-ctrl-globe",this._container),M.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},u.Hash=Dh,u.ImageSource=Kt,u.KeyboardHandler=bi,u.LngLatBounds=$t,u.LogoControl=_l,u.Map=class extends Ma{constructor(L){var l,h;a.cG.mark(a.cH.create);const x=Object.assign(Object.assign(Object.assign({},Gd),L),{canvasContextAttributes:Object.assign(Object.assign({},Gd.canvasContextAttributes),L.canvasContextAttributes)});if(x.minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const C=new xs,R=new Ja;if(x.minZoom!==void 0&&C.setMinZoom(x.minZoom),x.maxZoom!==void 0&&C.setMaxZoom(x.maxZoom),x.minPitch!==void 0&&C.setMinPitch(x.minPitch),x.maxPitch!==void 0&&C.setMaxPitch(x.maxPitch),x.renderWorldCopies!==void 0&&C.setRenderWorldCopies(x.renderWorldCopies),x.transformConstrain!==null&&C.setConstrainOverride(x.transformConstrain),super(C,R,{bearingSnap:x.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new xl,this._controls=[],this._mapId=a.af(),this._lostContextStyle={style:null,images:null},this._contextLost=W=>{W.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const te of Object.values(this.style._layers))if(te.type==="custom"&&console.warn(`Custom layer with id '${te.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),te._listeners)for(const[le]of Object.entries(te._listeners))console.warn(`Custom layer with id '${te.id}' had event listeners for event '${le}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:W}))},this._contextRestored=W=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new a.l("webglcontextrestored",{originalEvent:W}))},this._onMapScroll=W=>{if(W.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},x.canvasContextAttributes),this._trackResize=x.trackResize===!0,this._bearingSnap=x.bearingSnap,this._centerClampedToGround=x.centerClampedToGround,this._refreshExpiredTiles=x.refreshExpiredTiles===!0,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions===!0,this._collectResourceTiming=x.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},zo),x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this._zoomLevelsToOverscale=x.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=x.transformCameraUpdate,this.transformConstrain=x.transformConstrain,this.cancelPendingTileRequestsWhileZooming=x.cancelPendingTileRequestsWhileZooming===!0,x.reduceMotion!==void 0&&(_.prefersReducedMotion=x.reduceMotion),this._imageQueueHandle=U.addThrottleControl((()=>this.isMoving())),this._requestManager=new X(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let W=!1;const te=Dp((le=>{this._trackResize&&!this._removed&&(this.resize(le),this.redraw())}),50);this._resizeObserver=new ResizeObserver((le=>{W?te(le):W=!0})),this._resizeObserver.observe(this._container)}this.handlers=new bo(this,x),this._hash=x.hash&&new Dh(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,roll:x.roll}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,a.e({},x.fitBoundsOptions,{duration:0}))));const z=typeof x.style=="string"||((h=(l=x.style)===null||l===void 0?void 0:l.projection)===null||h===void 0?void 0:h.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new ol(typeof x.attributionControl=="boolean"?void 0:x.attributionControl)),x.maplibreLogo&&this.addControl(new _l,x.logoPosition),this.on("style.load",(()=>{if(z||this._resizeTransform(),this.transform.unmodified){const W=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(W)}})),this.on("data",(W=>{this._update(W.dataType==="style"),this.fire(new a.l(`${W.dataType}data`,W))})),this.on("dataloading",(W=>{this.fire(new a.l(`${W.dataType}dataloading`,W))})),this.on("dataabort",(W=>{this.fire(new a.l("sourcedataabort",W))}))}_getMapId(){return this._mapId}setGlobalStateProperty(L,l){return this.style.setGlobalStateProperty(L,l),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(L,l){if(l===void 0&&(l=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=L.onAdd(this);this._controls.push(L);const x=this._controlPositions[l];return l.indexOf("bottom")!==-1?x.insertBefore(h,x.firstChild):x.appendChild(h),this}removeControl(L){if(!L||!L.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(L);return l>-1&&this._controls.splice(l,1),L.onRemove(this),this}hasControl(L){return this._controls.indexOf(L)>-1}coveringTiles(L){return Vn(this.transform,L)}calculateCameraOptionsFromTo(L,l,h,x){return x==null&&this.terrain&&(x=this.terrain.getElevationForLngLat(h,this.transform)),super.calculateCameraOptionsFromTo(L,l,h,x)}resize(L,l=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(l);const h=!this._moving;return h&&(this.stop(),this.fire(new a.l("movestart",L)).fire(new a.l("move",L))),this.fire(new a.l("resize",L)),h&&this.fire(new a.l("moveend",L)),this}_resizeInternal(L=!0){const[l,h]=this._containerDimensions(),x=this._getClampedPixelRatio(l,h);if(this._resizeCanvas(l,h,x),this.painter.resize(l,h,x),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const R=this._getClampedPixelRatio(l,h);this._resizeCanvas(l,h,R),this.painter.resize(l,h,R)}this._resizeTransform(L)}_resizeTransform(L=!0){var l;const[h,x]=this._containerDimensions();this.transform.resize(h,x,L),(l=this._requestedCameraState)===null||l===void 0||l.resize(h,x,L)}_getClampedPixelRatio(L,l){const{0:h,1:x}=this._maxCanvasSize,C=this.getPixelRatio(),R=L*C,z=l*C;return Math.min(R>h?h/R:1,z>x?x/z:1)*C}getPixelRatio(){var L;return(L=this._overridePixelRatio)!==null&&L!==void 0?L:devicePixelRatio}setPixelRatio(L){this._overridePixelRatio=L,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(L){return this.transform.setMaxBounds($t.convert(L)),this._update()}setMinZoom(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom){const l=this._getTransformForUpdate();return l.setMinZoom(L),this._applyUpdatedTransform(l),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(L){if((L=L??22)>=this.transform.minZoom){const l=this._getTransformForUpdate();return l.setMaxZoom(L),this._applyUpdatedTransform(l),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.setMinPitch(L),this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(L){if((L=L??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(L>=this.transform.minPitch)return this.transform.setMaxPitch(L),this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(L){return this.transform.setRenderWorldCopies(L),this._update()}setTransformConstrain(L){return this.transform.setConstrainOverride(L),this._update()}project(L){return this.transform.locationToScreenPoint(a.V.convert(L),this.style&&this.terrain)}unproject(L){return this.transform.screenPointToLocation(a.P.convert(L),this.terrain)}isMoving(){var L;return this._moving||((L=this.handlers)===null||L===void 0?void 0:L.isMoving())}isZooming(){var L;return this._zooming||((L=this.handlers)===null||L===void 0?void 0:L.isZooming())}isRotating(){var L;return this._rotating||((L=this.handlers)===null||L===void 0?void 0:L.isRotating())}_createDelegatedListener(L,l,h){if(L==="mouseenter"||L==="mouseover"){let x=!1;return{layers:l,listener:h,delegates:{mousemove:R=>{const z=l.filter((te=>this.getLayer(te))),W=z.length!==0?this.queryRenderedFeatures(R.point,{layers:z}):[];W.length?x||(x=!0,h.call(this,new Qe(L,this,R.originalEvent,{features:W}))):x=!1},mouseout:()=>{x=!1}}}}if(L==="mouseleave"||L==="mouseout"){let x=!1;return{layers:l,listener:h,delegates:{mousemove:z=>{const W=l.filter((te=>this.getLayer(te)));(W.length!==0?this.queryRenderedFeatures(z.point,{layers:W}):[]).length?x=!0:x&&(x=!1,h.call(this,new Qe(L,this,z.originalEvent)))},mouseout:z=>{x&&(x=!1,h.call(this,new Qe(L,this,z.originalEvent)))}}}}{const x=C=>{const R=l.filter((W=>this.getLayer(W))),z=R.length!==0?this.queryRenderedFeatures(C.point,{layers:R}):[];z.length&&(C.features=z,h.call(this,C),delete C.features)};return{layers:l,listener:h,delegates:{[L]:x}}}}_saveDelegatedListener(L,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(l)}_removeDelegatedListener(L,l,h){if(!this._delegatedListeners||!this._delegatedListeners[L])return;const x=this._delegatedListeners[L];for(let C=0;C<x.length;C++){const R=x[C];if(R.listener===h&&R.layers.length===l.length&&R.layers.every((z=>l.includes(z)))){for(const z in R.delegates)this.off(z,R.delegates[z]);return void x.splice(C,1)}}}on(L,l,h){if(h===void 0)return super.on(L,l);const x=typeof l=="string"?[l]:l,C=this._createDelegatedListener(L,x,h);this._saveDelegatedListener(L,C);for(const R in C.delegates)this.on(R,C.delegates[R]);return{unsubscribe:()=>{this._removeDelegatedListener(L,x,h)}}}once(L,l,h){if(h===void 0)return super.once(L,l);const x=typeof l=="string"?[l]:l,C=this._createDelegatedListener(L,x,h);for(const R in C.delegates){const z=C.delegates[R];C.delegates[R]=(...W)=>{this._removeDelegatedListener(L,x,h),z(...W)}}this._saveDelegatedListener(L,C);for(const R in C.delegates)this.once(R,C.delegates[R]);return this}off(L,l,h){return h===void 0?super.off(L,l):(this._removeDelegatedListener(L,typeof l=="string"?[l]:l,h),this)}queryRenderedFeatures(L,l){if(!this.style)return[];let h;const x=L instanceof a.P||Array.isArray(L),C=x?L:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(x?{}:L)||{},C instanceof a.P||typeof C[0]=="number")h=[a.P.convert(C)];else{const R=a.P.convert(C[0]),z=a.P.convert(C[1]);h=[R,new a.P(z.x,R.y),z,new a.P(R.x,z.y),R]}return this.style.queryRenderedFeatures(h,l,this.transform)}querySourceFeatures(L,l){return this.style.querySourceFeatures(L,l)}setStyle(L,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(L,l))}setTransformRequest(L){return this._requestManager.setTransformRequest(L),this}_getUIString(L){const l=this._locale[L];if(l==null)throw new Error(`Missing UI string '${L}'`);return l}_updateStyle(L,l){var h,x;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(L,l)));const C=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!L)),L?(this.style=new ss(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L,l,C):this.style.loadJSON(L,l,C),this):((x=(h=this.style)===null||h===void 0?void 0:h.projection)===null||x===void 0||x.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ss(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(L,l){if(typeof L=="string"){const h=this._requestManager.transformRequest(L,"Style");a.j(h,new AbortController).then((x=>{this._updateDiff(x.data,l)})).catch((x=>{x&&this.fire(new a.k(x))}))}else typeof L=="object"&&this._updateDiff(L,l)}_updateDiff(L,l){try{this.style.setState(L,l)&&this._update(!0)}catch(h){a.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(L,l)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(L,l){return this._lazyInitEmptyStyle(),this.style.addSource(L,l),this._update(!0)}isSourceLoaded(L){const l=this.style&&this.style.tileManagers[L];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${L}'`)))}setTerrain(L){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),L){const l=this.style.tileManagers[L.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${L.source}`);this.terrain===null&&l.reload();for(const h in this.style._layers){const x=this.style._layers[h];x.type==="hillshade"&&x.source===L.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),x.type==="color-relief"&&x.source===L.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Hi(this.painter,l,L),this.painter.renderToTexture=new ql(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=h=>{var x;h.dataType==="style"?this.terrain.tileManager.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==L.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((x=h.source)===null||x===void 0?void 0:x.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:L})),this}getTerrain(){var L,l;return(l=(L=this.terrain)===null||L===void 0?void 0:L.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const L=this.style&&this.style.tileManagers;for(const l of Object.values(L))if(!l.areTilesLoaded())return!1;return!0}removeSource(L){return this.style.removeSource(L),this._update(!0)}getSource(L){return this.style.getSource(L)}setSourceTileLodParams(L,l,h){if(h){const x=this.getSource(h);if(!x)throw new Error(`There is no source with ID "${h}", cannot set LOD parameters`);x.calculateTileZoom=rr(Math.max(1,L),Math.max(1,l))}else for(const x in this.style.tileManagers)this.style.tileManagers[x].getSource().calculateTileZoom=rr(Math.max(1,L),Math.max(1,l));return this._update(!0),this}refreshTiles(L,l){const h=this.style.tileManagers[L];if(!h)throw new Error(`There is no tile manager with ID "${L}", cannot refresh tile`);l===void 0?h.reload(!0):h.refreshTiles(l.map((x=>new a.ac(x.z,x.x,x.y))))}addImage(L,l,h={}){const{pixelRatio:x=1,sdf:C=!1,stretchX:R,stretchY:z,content:W,textFitWidth:te,textFitHeight:le}=h;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:Ie,data:Te}=l,qe=l;return this.style.addImage(L,{data:new a.R({width:pe,height:Ie},new Uint8Array(Te)),pixelRatio:x,stretchX:R,stretchY:z,content:W,textFitWidth:te,textFitHeight:le,sdf:C,version:0,userImage:qe}),qe.onAdd&&qe.onAdd(this,L),this}}{const{width:pe,height:Ie,data:Te}=_.getImageData(l);this.style.addImage(L,{data:new a.R({width:pe,height:Ie},Te),pixelRatio:x,stretchX:R,stretchY:z,content:W,textFitWidth:te,textFitHeight:le,sdf:C,version:0})}}updateImage(L,l){const h=this.style.getImage(L);if(!h)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=l instanceof HTMLImageElement||a.b(l)?_.getImageData(l):l,{width:C,height:R,data:z}=x;if(C===void 0||R===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==h.data.width||R!==h.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const W=!(l instanceof HTMLImageElement||a.b(l));return h.data.replace(z,W),this.style.updateImage(L,h),this}getImage(L){return this.style.getImage(L)}hasImage(L){return L?!!this.style.getImage(L):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(L){this.style.removeImage(L)}loadImage(L){return U.getImage(this._requestManager.transformRequest(L,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(L,l){return this._lazyInitEmptyStyle(),this.style.addLayer(L,l),this._update(!0)}moveLayer(L,l){return this.style.moveLayer(L,l),this._update(!0)}removeLayer(L){return this.style.removeLayer(L),this._update(!0)}getLayer(L){return this.style.getLayer(L)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(L,l,h){return this.style.setLayerZoomRange(L,l,h),this._update(!0)}setFilter(L,l,h={}){return this.style.setFilter(L,l,h),this._update(!0)}getFilter(L){return this.style.getFilter(L)}setPaintProperty(L,l,h,x={}){return this.style.setPaintProperty(L,l,h,x),this._update(!0)}getPaintProperty(L,l){return this.style.getPaintProperty(L,l)}setLayoutProperty(L,l,h,x={}){return this.style.setLayoutProperty(L,l,h,x),this._update(!0)}getLayoutProperty(L,l){return this.style.getLayoutProperty(L,l)}setGlyphs(L,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(L,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(L,l,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(L,l,h,(x=>{x||this._update(!0)})),this}removeSprite(L){return this._lazyInitEmptyStyle(),this.style.removeSprite(L),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(L,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(L,l,(h=>{h||this._update(!0)})),this}setLight(L,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(L,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(L,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(L,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(L,l){return this.style.setFeatureState(L,l),this._update()}removeFeatureState(L,l){return this.style.removeFeatureState(L,l),this._update()}getFeatureState(L){return this.style.getFeatureState(L)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let L=0,l=0;return this._container&&(L=this._container.clientWidth||400,l=this._container.clientHeight||300),[L,l]}_setupContainer(){const L=this._container;L.classList.add("maplibregl-map");const l=this._canvasContainer=M.create("div","maplibregl-canvas-container",L);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),x=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],x);const C=this._controlContainer=M.create("div","maplibregl-control-container",L),R=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((z=>{R[z]=M.create("div",`maplibregl-ctrl-${z} `,C)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(L,l,h){this._canvas.width=Math.floor(h*L),this._canvas.height=Math.floor(h*l),this._canvas.style.width=`${L}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const L=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",(x=>{l={requestedAttributes:L},x&&(l.statusMessage=x.statusMessage,l.type=x.type)}),{once:!0});let h=null;if(h=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,L):this._canvas.getContext("webgl2",L)||this._canvas.getContext("webgl",L),!h){const x="Failed to initialize WebGL";throw l?(l.message=x,new Error(JSON.stringify(l))):new Error(x)}this.painter=new eg(h,this.transform),D.testSupport(h)}migrateProjection(L,l){super.migrateProjection(L,l),this.painter.transform=L,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(L){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(L){return this._update(),this._renderTaskQueue.add(L)}_cancelRenderFrame(L){this._renderTaskQueue.remove(L)}_render(L){var l,h,x,C,R;const z=this._idleTriggered?this._fadeDuration:0,W=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),this._removed)return;let te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ie=this.transform.zoom,Te=k();this.style.zoomHistory.update(Ie,Te);const qe=new a.H(Ie,{now:Te,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ze=qe.crossFadingFactor();Ze===1&&Ze===this._crossFadingFactor||(te=!0,this._crossFadingFactor=Ze),this.style.update(qe)}const le=((h=this.style.projection)===null||h===void 0?void 0:h.transitionState)>0!==W;(x=this.style.projection)===null||x===void 0||x.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((C=this.style.projection)===null||C===void 0?void 0:C.transitionState,(R=this.style.projection)===null||R===void 0?void 0:R.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||le)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,le),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cG.mark(a.cH.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const pe=this._sourcesDirty||this._styleDirty||this._placementDirty;return pe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||pe||(this._fullyLoaded=!0,a.cG.mark(a.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var L;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(L=this._resizeObserver)===null||L===void 0||L.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l?.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cG.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,_.frame(this._frameRequest,(L=>{a.cG.frame(L),this._frameRequest=null;try{this._render(L)}catch(l){if(!a.Z(l)&&!(function(h){return h.message===Ph})(l))throw l}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())}get showPadding(){return!!this._showPadding}set showPadding(L){this._showPadding!==L&&(this._showPadding=L,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())}get repaint(){return!!this._repaint}set repaint(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(L){this._vertices=L,this._update()}get version(){return $d}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(L){return this._lazyInitEmptyStyle(),this.style.setProjection(L),this._update(!0)}},u.MapMouseEvent=Qe,u.MapTouchEvent=nt,u.MapWheelEvent=lt,u.Marker=Ff,u.NavigationControl=class{constructor(L){this._updateZoomButtons=()=>{const l=this._map.getZoom(),h=l===this._map.getMaxZoom(),x=l===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,h)=>{const x=this._map._getUIString(`NavigationControl.${h}`);l.title=x,l.setAttribute("aria-label",x)},this.options=a.e({},Ud,L),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(L,l){const h=M.create("button",L,this._container);return h.type="button",h.addEventListener("click",l),h}},u.Popup=class extends a.E{constructor(L){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Oh(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!l)return;const h=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let x=this.options.anchor;const C=Nc(this.options.offset);if(!x){const z=this._container.offsetWidth,W=this._container.offsetHeight,te=(function(pe){var Ie,Te,qe,Ze;return pe?{top:(Ie=pe.top)!==null&&Ie!==void 0?Ie:0,right:(Te=pe.right)!==null&&Te!==void 0?Te:0,bottom:(qe=pe.bottom)!==null&&qe!==void 0?qe:0,left:(Ze=pe.left)!==null&&Ze!==void 0?Ze:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let le;le=h.y+C.bottom.y<W+te.top?["top"]:h.y>this._map.transform.height-W-te.bottom?["bottom"]:[],h.x<z/2+te.left?le.push("left"):h.x>this._map.transform.width-z/2-te.right&&le.push("right"),x=le.length===0?"bottom":le.join("-")}let R=h.add(C[x]);this.options.subpixelPositioning||(R=R.round()),M.setTransform(this._container,`${hd[x]} translate(${R.x}px,${R.y}px)`),Au(this._container,x,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Yd),L)}addTo(L){return this._map&&this.remove(),this._map=L,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(L){return this._lngLat=a.V.convert(L),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(L){return this.setDOMContent(document.createTextNode(L))}setHTML(L){const l=document.createDocumentFragment(),h=document.createElement("body");let x;for(h.innerHTML=L;x=h.firstChild,x;)l.appendChild(x);return this.setDOMContent(l)}getMaxWidth(){var L;return(L=this._container)===null||L===void 0?void 0:L.style.maxWidth}setMaxWidth(L){return this.options.maxWidth=L,this._update(),this}setDOMContent(L){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(L),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(L){return this._container&&this._container.classList.add(L),this}removeClassName(L){return this._container&&this._container.classList.remove(L),this}setOffset(L){return this.options.offset=L,this._update(),this}toggleClassName(L){if(this._container)return this._container.classList.toggle(L)}setSubpixelPositioning(L){this.options.subpixelPositioning=L}setPadding(L){this.options.padding=L,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const L=this._container.querySelector(Zd);L&&L.focus()}},u.RasterDEMTileSource=cr,u.RasterTileSource=sr,u.ScaleControl=class{constructor(L){this._onMove=()=>{Xd(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Xd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Wd),L)}getDefaultPosition(){return"bottom-left"}onAdd(L){return this._map=L,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=cs,u.Style=ss,u.TerrainControl=class{constructor(L){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=L}onAdd(L){return this._map=L,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=Wi,u.TwoFingersTouchRotateHandler=so,u.TwoFingersTouchZoomHandler=zn,u.TwoFingersTouchZoomRotateHandler=Po,u.VectorTileSource=ht,u.VideoSource=at,u.addSourceType=(L,l)=>a._(void 0,void 0,void 0,(function*(){if(je(L))throw new Error(`A source type called "${L}" already exists.`);((h,x)=>{_e[h]=x})(L,l)})),u.clearPrewarmedResources=function(){const L=Xe;L&&(L.isPreloaded()&&L.numActive()===1?(L.release(we),Xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.createTileMesh=nr,u.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return St().getRTLTextPluginStatus()},u.getVersion=function(){return Nh},u.getWorkerCount=function(){return Ne.workerCount},u.getWorkerUrl=function(){return a.c.WORKER_URL},u.importScriptInWorkers=function(L){return it().broadcast("IS",L)},u.isTimeFrozen=function(){return P.isFrozen()},u.now=k,u.prewarm=function(){ot().acquire(we)},u.restoreNow=function(){P.restoreNow()},u.setMaxParallelImageRequests=function(L){a.c.MAX_PARALLEL_IMAGE_REQUESTS=L},u.setNow=function(L){P.setNow(L)},u.setRTLTextPlugin=function(L,l){return St().setRTLTextPlugin(L,l)},u.setWorkerCount=function(L){Ne.workerCount=L},u.setWorkerUrl=function(L){a.c.WORKER_URL=L}}));var o=r;return o}))})(nx)),nx.exports}var lw=LQ();const KT=Sf(lw);class RQ{registeredElements;baseLayers;firstSymbolLayer;eventHandlers;wrapper;initRegisteredElements;addNativeMaplibreFunctionsAndProps;map;style;styleJson;addSource;addControl;on;cleanup;constructor(t){const r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:(a,f,p,g)=>{if(!r.eventHandlers[a])return;typeof p=="string"&&(g=p,p={}),r.eventHandlers[a].push({handler:f,options:p});const b=[a,f];g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].wrapperEvents.push(b))},off:(a,f)=>{r.eventHandlers[a]&&(r.eventHandlers[a]=r.eventHandlers[a].filter(p=>Object.is(p.handler,f)?!1:p))},fire:(a,f)=>{if(!r.eventHandlers[a])return;const p=f||window,g=new Event(a);r.eventHandlers[a].forEach(function(b){b.handler.call(p,g,r,f)})},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:a=>{if(a)return{id:a.id,type:a.type,visible:a.visibility!=="none",baseLayer:r.baseLayers.indexOf(a.id)!==-1}},buildLayerObjects:()=>r.map.style._order.map(a=>r.wrapper.buildLayerObject(r.map.style._layers[a])).filter(a=>typeof a<"u"),refreshLayerState:()=>{r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:()=>typeof r.map.getCenter=="function"?{center:(({lng:a,lat:f})=>({lng:a,lat:f}))(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},refreshViewport:()=>{r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=(a,f)=>{(typeof r.registeredElements[a]>"u"||typeof f<"u"&&f)&&(r.registeredElements[a]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=(a,f,p)=>r.map.style?(p&&typeof p=="string"&&typeof a.id<"u"&&(r.initRegisteredElements(p),r.registeredElements[p].layers.push(a.id),a?.source&&typeof a?.source!="string"&&r.registeredElements[p].sources.push(a.id)),r.map.addLayer(a,f),r.wrapper.fire("addlayer",{layer_id:a.id}),this):this,this.addSource=(a,f,p)=>r.map.style?(p&&typeof p=="string"&&typeof a<"u"&&(r.initRegisteredElements(p),r.registeredElements[p].sources.push(a)),r.map.addSource(a,f),r.wrapper.fire("addsource",{source_id:a}),this):this,this.addImage=(a,f,p,g)=>r.map.style?typeof p=="string"&&typeof g>"u"?r.addImage(a,f,void 0,p):(g&&typeof g=="string"&&typeof a<"u"&&(r.initRegisteredElements(g),r.registeredElements[g].images.push(a)),r.map.addImage(a,f,p),this):this,this.on=(a,f,p,g)=>{if(typeof p=="string"&&typeof f=="function")return r.on.call(r,a,void 0,f,p);let b=[a,f,p];return f||(b=[a,p]),g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].events.push(b)),r.map.on(...b),this},this.addControl=(a,f,p)=>(p&&typeof p=="string"&&(r.initRegisteredElements(p),r.registeredElements[p].controls.push(a)),r.map.addControl(a,f),this),this.cleanup=a=>{r.map.style&&typeof r.registeredElements[a]<"u"&&(r.registeredElements[a].layers.forEach(f=>{r.map.style.getLayer(f)&&r.map.style.removeLayer(f)}),r.registeredElements[a].sources.forEach(f=>{r.map.style.getSource(f)&&r.map.style.removeSource(f)}),r.registeredElements[a].images.forEach(f=>{r.map.hasImage(f)&&r.map.style.removeImage(f)}),r.registeredElements[a].events.forEach(f=>{r.map.off(...f)}),r.registeredElements[a].controls.forEach(f=>{r.map.removeControl(f)}),r.registeredElements[a].wrapperEvents.forEach(f=>{r.wrapper.off(...f)}),r.initRegisteredElements(a,!0))},["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach(a=>{this[a]=(...f)=>(r.map&&r.map.style&&typeof r.map.style[a]=="function"&&r.map.style[a](...f),r.map._update?r.map._update(!0):void 0)}),["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach(a=>{this[a]=(...f)=>r.map&&r.map.style?r.map.style[a](...f):!1}),this.addNativeMaplibreFunctionsAndProps=()=>{Object.getOwnPropertyNames(Object.getPrototypeOf(this.map)).forEach(a=>{typeof this[a]>"u"&&(this[a]=(...f)=>r.map[a](...f))}),Object.keys(this.map).forEach(a=>{typeof this[a]>"u"&&(this[a]=r.map[a])})},["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach(a=>{this[a]=(...f)=>{if(typeof r.map[a]=="function")return r.map[a].call(r.map,...f)}}),(async()=>{typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1&&await fetch(t.mapOptions.style).then(a=>{if(a.ok)return a.json();throw new Error("error loading map style.json")}).then(a=>{a.layers.forEach(f=>{r.baseLayers.push(f.id),!r.firstSymbolLayer&&f.type==="symbol"&&(r.firstSymbolLayer=f.id)}),r.styleJson=a,t.mapOptions.style=a}).catch(a=>{console.log(a)}),r.map=new lw.Map(t.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",()=>{r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",()=>{r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",()=>{r.wrapper.refreshLayerState()}),r.map.on("data",()=>{r.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(r.map,r)})()}}const xj={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},DQ=e=>{const t=ee.useRef(null),r=ee.useRef(null),n=ee.useContext(vp),i=ee.useRef(e.mapId),o=ee.useRef(!1),u=ee.useRef(e.options?.style);return ee.useEffect(()=>{const a=i.current;return()=>{o.current=!1,n.removeMap(a),t.current&&(t.current.map?.remove?.(),t.current.cancelled=!0,t.current=null)}},[]),ee.useEffect(()=>{o.current||r.current&&(o.current=!0,e?.options?.style&&(u.current=JSON.stringify(e.options.style)),t.current=new RQ({mapOptions:{style:"",...e.options,...e?.options?.style?{}:{style:xj?.options?.style},container:r.current},onReady:(a,f)=>{a.once("load",()=>{f?.cancelled?a.remove():(window._map=a,e.mapId?n.registerMap(e.mapId,f):n.setMap(f))})}}))},[e.options,e.mapId]),ee.useEffect(()=>{if(t.current?.map&&e?.options?.style){const a=JSON.stringify(e.options.style);u.current!==a&&(u.current=a,t.current.map.setStyle(e.options.style))}},[e?.options?.style]),K.jsx("div",{ref:r,className:"mapContainer",style:e.style})};DQ.defaultProps=xj;function uw(e){const t=ee.useContext(vp),r=ee.useRef(!1),n=ee.useRef(null),[i,o]=ee.useState(),u=ee.useRef(void 0),[a,f]=ee.useState([]),p=ee.useRef(""),g=ee.useRef(Bu()),b=ee.useCallback(_=>!e?.filter?.includeBaseLayers&&_?.baseLayer?!1:typeof e.filter?.matchLayerIds<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(_.id):_.id.includes(e.filter.matchLayerIds):!0,[e.filter]),S=ee.useCallback(()=>{if(!n.current)return;const _=n.current.wrapper.layerState.filter(b),P=JSON.stringify(_);p.current!==P&&(p.current=P,f(_))},[b]);return ee.useEffect(()=>{const _=g.current;return()=>{n.current&&(n.current.cleanup(_),n.current=null),r.current=!1}},[]),ee.useEffect(()=>{if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}e?.watch?.viewport&&(o(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",()=>{u.current!==n.current?.wrapper.viewportStateString&&o(n.current?.wrapper.viewportState)},g.current)),e?.watch?.layers&&(S(),n.current.wrapper.on("layerchange",S,{includeBaseLayers:e?.filter?.includeBaseLayers,matchLayerIds:e?.filter?.matchLayerIds},g.current))}},[t.mapIds,t,e.mapId,S,e]),{layers:a,viewport:i}}uw.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function ha(e){const t=ee.useContext(vp),[r,n]=ee.useState({map:void 0,ready:!1}),i=uw({mapId:e?.mapId,watch:{viewport:!1,layers:!!e?.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),o=ee.useRef(null),u=ee.useRef(Bu()),a=()=>{o.current&&o.current.cleanup(u.current)};return ee.useEffect(()=>()=>{a(),o.current=null},[]),ee.useEffect(()=>{if(o.current&&o.current.cancelled===!0&&(o.current=null,n({map:void 0,ready:!1})),!(o.current||!t.mapExists(e?.mapId))){if(e?.waitForLayer){let f=!1;if(i?.layers?.forEach(p=>{p.id===e?.waitForLayer&&(f=!0)}),!f)return}o.current=t.getMap(e?.mapId),n({map:o.current,ready:!0})}},[t.mapIds,i.layers,t,e]),{map:r.map,mapIsReady:r.ready,componentId:u.current,layers:i.layers,cleanup:a}}const pD=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function OQ(e){return typeof e.options.source=="string"?{source:e.options.source}:e.geojson&&(!e.options?.source||typeof e?.options?.source!="string"&&e.options?.source?.attribution&&!e.options?.source?.type)?{source:{type:"geojson",data:e.geojson||"",attribution:typeof e?.options?.source!="string"&&e.options.source?.attribution?e.options.source?.attribution:""}}:{}}function NQ(e,t){if(e?.insertBeforeLayer)return e.insertBeforeLayer;if(e?.insertBeforeFirstSymbolLayer)return t?.map?.firstSymbolLayer}function ph(e){const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=ee.useRef(""),n=ee.useRef(""),i=ee.useRef(""),[o,u]=ee.useState(),a=ee.useRef(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+t.componentId),f=ee.useCallback(()=>{if(!t.map||t?.map.cancelled||(t.map.map.getLayer(a.current)&&t.cleanup(),typeof e?.options?.source!="string"&&t.map.map.getSource(a.current)&&t.map.map.removeSource(a.current),typeof e.options.source=="string"&&(e.options.source===""||!t.map.map.getSource(e.options.source)))||typeof e?.options?.source!="string"&&!e.geojson&&!e?.options?.source?.data&&e?.options?.type!=="background"||typeof e.options.type>"u")return;try{t.map.addLayer({...e.options,...OQ(e),id:a.current},NQ(e,t),t.componentId)}catch(b){console.error("Failed to add layer:",b)}u(()=>t.map?.map.getLayer(a.current));const p=()=>{t.map?.map.getLayer(a.current)||f()};t.map.on("styledata",p,t.componentId);const g=(b,S,{source_id:_})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===_&&f()};t.map.wrapper.on("addsource",g,t.componentId),n.current=JSON.stringify(e.options?.paint),i.current=JSON.stringify(e.options?.layout),r.current=e.options.type},[e,t]);return ee.useEffect(()=>{t.map&&(!e.geojson&&!e.options.source&&e?.options?.type!=="background"||t.map?.cancelled===!1&&t?.map?.map?.getLayer?.(a.current)&&(pD.indexOf(e.options.type)===-1||pD.indexOf(e.options.type)!==-1&&e.options.type===r.current)||f())},[t.map,t.mapIsReady,e,f]),ee.useEffect(()=>{t.map?.cancelled===!0||!t.map?.map?.getSource?.(a.current)||t.map.map.getSource(a.current)?.setData?.(e.geojson)},[e.geojson,t.map,e.options.type]),ee.useEffect(()=>{if(t.map?.cancelled===!0||!t.map||!t.map?.map?.getLayer?.(a.current)||e.options.type!==r.current)return;let p;const g=JSON.stringify(e.options.layout);if(e.options.layout&&g!==i.current){const S=JSON.parse(i.current);for(p in e.options.layout)e.options.layout?.[p]&&e.options.layout[p]!==S[p]&&t.map.map.setLayoutProperty(a.current,p,e.options.layout[p]);i.current=g}const b=JSON.stringify(e.options.paint);if(b!==n.current){const S=JSON.parse(n.current);for(p in e.options.paint)e.options.paint?.[p]&&e.options.paint[p]!==S[p]&&t.map.map.setPaintProperty(a.current,p,e.options.paint[p]);n.current=b}},[e.options,t.map]),ee.useEffect(()=>{!e.insertBeforeLayer||!t.map||!t.map.getLayer(e.insertBeforeLayer)||!t.map.getLayer(a.current)||t.map.moveLayer(a.current,e.insertBeforeLayer)},[t.map,e.insertBeforeLayer]),ee.useEffect(()=>()=>{t.cleanup()},[]),ee.useEffect(()=>{if(typeof e?.options?.source!="string"||!t.map)return;const p=()=>{typeof e?.options?.source=="string"&&t?.map?.getSource?.(e.options.source)&&!t.map.getLayer(a.current)&&f()};t.map.on("sourcedataloading",p);const g=(b,S,{source_id:_})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===_&&f()};return t.map.wrapper.on("addsource",g),()=>{t?.map&&(t.map.off("sourcedataloading",p),t.map.wrapper.off("addsource",g))}},[t.map,e.options?.source]),ee.useEffect(()=>{if(!e.onClick||!t?.map||!t?.map?.getLayer?.(a.current))return;const p=e.onClick;return t.map?.on("click",a.current,p),()=>{p&&t?.map&&t.map?.off("click",a.current,p)}},[t.map,e.onClick]),ee.useEffect(()=>{if(!e.onHover||!t?.map||!t?.map?.getLayer?.(a.current))return;const p=e.onHover;return t.map?.on("mousemove",a.current,p),()=>{p&&t?.map&&t.map?.off("mousemove",a.current,p)}},[t.map,e.onHover]),ee.useEffect(()=>{if(!e.onLeave||!t?.map||!t?.map?.getLayer?.(a.current))return;const p=e.onLeave;return t.map?.on("mouseleave",a.current,p),()=>{p&&t?.map&&t.map?.off("mouseleave",a.current,p)}},[t.map,e.onLeave]),{map:t.map,layer:o,layerId:a.current,componentId:t.componentId,mapHook:t}}ph.defaultProps={};const wj=(e,t)=>{switch(e){case"fill":return t?.fill?t.fill:{"fill-color":"#009EE0","fill-outline-color":"#009EE0"};case"line":return t?.line?(console.log(t.line),t.line):{"line-color":"#009EE0","line-width":4,"line-blur":0};case"circle":return t?.circle?t.circle:{"circle-color":"#009EE0","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-radius":5};default:return{}}},mD={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},Mx=e=>e?.type==="Feature"?mD?.[e?.geometry?.type]?mD[e.geometry.type]:"circle":e?.type==="FeatureCollection"?e.features.length?Mx(e.features[0]):"circle":"fill";function DP(e){const t=ha({mapId:e.mapId}),[r,n]=ee.useState(),i=ee.useRef(e.sourceId||(e.idPrefix?e.idPrefix:"Source-")+t.componentId),o=ee.useCallback(()=>{if(t.map&&t.map?.style?._layers){for(const[a,f]of Object.entries(t.map.style._layers))f.source===i.current&&t.map.removeLayer(a);t.map.getSource(i.current)&&t.map.removeSource(i.current)}},[t.map]),u=ee.useCallback(()=>{t.map&&(e.source.type==="geojson"&&!e.source.data||(t.map.map.getSource(i.current)&&o(),t.map?.addSource(i.current,{...e.source}),n(t.map.map.getSource(i.current))))},[e,t,o]);return ee.useEffect(()=>{t.map?.map?.getSource(i.current)&&t.map.map.getSource(i.current)?.setData?.(e.source.data)},[e.source?.data]),ee.useEffect(()=>{t?.map?.map?.getSource?.(e.sourceId)&&e.sourceId===i.current||(i.current=e.sourceId,u())},[t.map,e,u]),ee.useEffect(()=>{if(!t.map)return;const a=()=>{t?.map?.getSource?.(e.sourceId)||u()};return t.map.on("styledata",a),()=>{t?.map&&t.map.off("styledata",a)}},[t.map,u]),ee.useEffect(()=>()=>{o()},[o]),{map:t.map,source:r,componentId:t.componentId,mapHook:t}}const Zu=e=>{const t=e.type||Mx(e.geojson),r=ee.useRef(e.layerId||"MlGeoJsonLayer-"+Bu()),n=`label-${r.current}`;return ee.useEffect(()=>{e.layerId?r.current=e.layerId:r.current="MlGeoJsonLayer-"+Bu()},[e.layerId]),DP({mapId:e.mapId,sourceId:"source-"+r.current,source:{type:"geojson",data:e.geojson,...typeof e?.options?.source<"u"&&typeof e?.options?.source!="string"?e.options.source:{}}}),ph({mapId:e.mapId,layerId:r.current,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},paint:{...e.paint||wj(t,e.defaultPaintOverrides),...e?.options?.paint},layout:{...e?.layout||{},...e?.options?.layout},type:t},insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),ph({mapId:e.mapId,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},id:n,type:"symbol",maxzoom:24,minzoom:1,...e?.labelOptions?e.labelOptions:{},...e?.options?.filter?{filter:e.options.filter}:{},layout:{"text-font":["Open Sans Regular"],"text-field":`{${e.labelProp}}`,"text-size":12,"text-anchor":"top",...e?.labelOptions?.layout?e.labelOptions.layout:{},visibility:e?.layout?.visibility??e?.options?.layout?.visibility??"visible"},paint:{"text-halo-width":1,"text-halo-color":"#fefefe","text-color":"#121212",...e?.labelOptions?.paint?e.labelOptions.paint:{}}}}),K.jsx(K.Fragment,{})};try{Zu.displayName="MlGeoJsonLayer",Zu.__docgenInfo={description:"Adds source and layer to display GeoJSON data on the map.",displayName:"MlGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the new layer and source that are added to the MapLibre instance",name:"layerId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}},type:{defaultValue:null,description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"symbol"'},{value:'"fill"'},{value:'"line"'},{value:'"circle"'},{value:'"heatmap"'},{value:'"fill-extrusion"'},{value:'"hillshade"'},{value:'"color-relief"'},{value:'"background"'}]}},paint:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 9 more ...; "fill-pattern-transition"?: TransitionSpecification | undefined; } | ... 8 more ... | undefined'}},layout:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`,name:"layout",required:!1,type:{name:'{ "fill-sort-key"?: DataDrivenPropertyValueSpecification<number> | undefined; visibility?: VisibilitySpecification | undefined; } | ... 9 more ... | undefined'}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!1,type:{name:'{ circle?: { "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-radius-transition"?: TransitionSpecification | undefined; ... 16 more ...; "circle-stroke-opacity-transition"?: TransitionSpecification | undefined; } | undefined; fill?: { ...; } | undefined; line?: { ...; } | undefined...'}},labelProp:{defaultValue:null,description:"Property name in the GeoJSON object to be used as a label.",name:"labelProp",required:!1,type:{name:"string | undefined"}},labelOptions:{defaultValue:null,description:"Label configuration options.",name:"labelOptions",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}}}}}catch{}function JT(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function FQ(e){return K.jsx(K7,{...e,defaultTheme:LP,themeId:Id})}function BQ(e){return function(r){return K.jsx(FQ,{styles:typeof e=="function"?n=>e({theme:n,...r}):e})}}function zQ(){return EP}const jn=fJ;function li(e){return lJ(e)}function jQ(e){return ti("MuiSvgIcon",e)}Kn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const qQ=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${Zr(t)}`,`fontSize${Zr(r)}`]};return ri(i,jQ,n)},VQ=Sr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Zr(r.color)}`],t[`fontSize${Zr(r.fontSize)}`]]}})(jn(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),QT=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:u="inherit",component:a="svg",fontSize:f="medium",htmlColor:p,inheritViewBox:g=!1,titleAccess:b,viewBox:S="0 0 24 24",..._}=n,P=ee.isValidElement(i)&&i.type==="svg",k={...n,color:u,component:a,fontSize:f,instanceFontSize:t.fontSize,inheritViewBox:g,viewBox:S,hasSvgAsChild:P},M={};g||(M.viewBox=S);const D=qQ(k);return K.jsxs(VQ,{as:a,className:cn(D.root,o),focusable:"false",color:p,"aria-hidden":b?void 0:!0,role:b?"img":void 0,ref:r,...M,..._,...P&&i.props,ownerState:k,children:[P?i.props.children:i,b?K.jsx("title",{children:b}):null]})});QT.muiName="SvgIcon";function Ei(e,t){function r(n,i){return K.jsx(QT,{"data-testid":void 0,ref:i,...n,children:e})}return r.muiName=QT.muiName,ee.memo(ee.forwardRef(r))}function OP(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function Uo(e){return e&&e.ownerDocument||document}function zu(e){return Uo(e).defaultView||window}function gD(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function lp(e){const{controlled:t,default:r,name:n,state:i="value"}=e,{current:o}=ee.useRef(t!==void 0),[u,a]=ee.useState(r),f=o?t:u,p=ee.useCallback(g=>{o||a(g)},[]);return[f,p]}function kl(e){const t=ee.useRef(e);return Zl(()=>{t.current=e}),ee.useRef((...r)=>(0,t.current)(...r)).current}function ao(...e){const t=ee.useRef(void 0),r=ee.useCallback(n=>{const i=e.map(o=>{if(o==null)return null;if(typeof o=="function"){const u=o,a=u(n);return typeof a=="function"?a:()=>{u(null)}}return o.current=n,()=>{o.current=null}});return()=>{i.forEach(o=>o?.())}},e);return ee.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function $Q(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function Ly(e,t){if(!e)return t;function r(u,a){const f={};return Object.keys(a).forEach(p=>{$Q(p,a[p])&&typeof u[p]=="function"&&(f[p]=(...g)=>{u[p](...g),a[p](...g)})}),f}if(typeof e=="function"||typeof t=="function")return u=>{const a=typeof t=="function"?t(u):t,f=typeof e=="function"?e({...u,...a}):e,p=cn(u?.className,a?.className,f?.className),g=r(f,a);return{...a,...f,...g,...!!p&&{className:p},...a?.style&&f?.style&&{style:{...a.style,...f.style}},...a?.sx&&f?.sx&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(f.sx)?f.sx:[f.sx]]}}};const n=t,i=r(e,n),o=cn(n?.className,e?.className);return{...t,...e,...i,...!!o&&{className:o},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function Sj(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function e3(e,t){return e3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},e3(e,t)}function Cj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e3(e,t)}const yD={disabled:!1},Lx=gt.createContext(null);var GQ=function(t){return t.scrollTop},g0="unmounted",Kp="exited",Jp="entering",qg="entered",t3="exiting",Ac=(function(e){Cj(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var u=i,a=u&&!u.isMounting?n.enter:n.appear,f;return o.appearStatus=null,n.in?a?(f=Kp,o.appearStatus=Jp):f=qg:n.unmountOnExit||n.mountOnEnter?f=g0:f=Kp,o.state={status:f},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var u=i.in;return u&&o.status===g0?{status:Kp}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var u=this.state.status;this.props.in?u!==Jp&&u!==qg&&(o=Jp):(u===Jp||u===qg)&&(o=t3)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,u,a;return o=u=a=i,i!=null&&typeof i!="number"&&(o=i.exit,u=i.enter,a=i.appear!==void 0?i.appear:u),{exit:o,enter:u,appear:a}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Jp){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:h0.findDOMNode(this);u&&GQ(u)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kp&&this.setState({status:g0})},r.performEnter=function(i){var o=this,u=this.props.enter,a=this.context?this.context.isMounting:i,f=this.props.nodeRef?[a]:[h0.findDOMNode(this),a],p=f[0],g=f[1],b=this.getTimeouts(),S=a?b.appear:b.enter;if(!i&&!u||yD.disabled){this.safeSetState({status:qg},function(){o.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:Jp},function(){o.props.onEntering(p,g),o.onTransitionEnd(S,function(){o.safeSetState({status:qg},function(){o.props.onEntered(p,g)})})})},r.performExit=function(){var i=this,o=this.props.exit,u=this.getTimeouts(),a=this.props.nodeRef?void 0:h0.findDOMNode(this);if(!o||yD.disabled){this.safeSetState({status:Kp},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:t3},function(){i.props.onExiting(a),i.onTransitionEnd(u.exit,function(){i.safeSetState({status:Kp},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,u=!0;return this.nextCallback=function(a){u&&(u=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:h0.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!u||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],p=f[0],g=f[1];this.props.addEndListener(p,g)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===g0)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=Sj(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return gt.createElement(Lx.Provider,{value:null},typeof u=="function"?u(i,a):gt.cloneElement(gt.Children.only(u),a))},t})(gt.Component);Ac.contextType=Lx;Ac.propTypes={};function Tg(){}Ac.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Tg,onEntering:Tg,onEntered:Tg,onExit:Tg,onExiting:Tg,onExited:Tg};Ac.UNMOUNTED=g0;Ac.EXITED=Kp;Ac.ENTERING=Jp;Ac.ENTERED=qg;Ac.EXITING=t3;function UQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NP(e,t){var r=function(o){return t&&ee.isValidElement(o)?t(o):o},n=Object.create(null);return e&&ee.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function HQ(e,t){e=e||{},t=t||{};function r(g){return g in t?t[g]:e[g]}var n=Object.create(null),i=[];for(var o in e)o in t?i.length&&(n[o]=i,i=[]):i.push(o);var u,a={};for(var f in t){if(n[f])for(u=0;u<n[f].length;u++){var p=n[f][u];a[n[f][u]]=r(p)}a[f]=r(f)}for(u=0;u<i.length;u++)a[i[u]]=r(i[u]);return a}function um(e,t,r){return r[t]!=null?r[t]:e.props[t]}function WQ(e,t){return NP(e.children,function(r){return ee.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:um(r,"appear",e),enter:um(r,"enter",e),exit:um(r,"exit",e)})})}function XQ(e,t,r){var n=NP(e.children),i=HQ(t,n);return Object.keys(i).forEach(function(o){var u=i[o];if(ee.isValidElement(u)){var a=o in t,f=o in n,p=t[o],g=ee.isValidElement(p)&&!p.props.in;f&&(!a||g)?i[o]=ee.cloneElement(u,{onExited:r.bind(null,u),in:!0,exit:um(u,"exit",e),enter:um(u,"enter",e)}):!f&&a&&!g?i[o]=ee.cloneElement(u,{in:!1}):f&&a&&ee.isValidElement(p)&&(i[o]=ee.cloneElement(u,{onExited:r.bind(null,u),in:p.props.in,exit:um(u,"exit",e),enter:um(u,"enter",e)}))}}),i}var YQ=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},ZQ={component:"div",childFactory:function(t){return t}},FP=(function(e){Cj(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var u=o.handleExited.bind(UQ(o));return o.state={contextValue:{isMounting:!0},handleExited:u,firstRender:!0},o}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var u=o.children,a=o.handleExited,f=o.firstRender;return{children:f?WQ(i,a):XQ(i,u,a),firstRender:!1}},r.handleExited=function(i,o){var u=NP(this.props.children);i.key in u||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var f=Ex({},a.children);return delete f[i.key],{children:f}}))},r.render=function(){var i=this.props,o=i.component,u=i.childFactory,a=Sj(i,["component","childFactory"]),f=this.state.contextValue,p=YQ(this.state.children).map(u);return delete a.appear,delete a.enter,delete a.exit,o===null?gt.createElement(Lx.Provider,{value:f},p):gt.createElement(Lx.Provider,{value:f},gt.createElement(o,a,p))},t})(gt.Component);FP.propTypes={};FP.defaultProps=ZQ;const vD={};function Ej(e,t){const r=ee.useRef(vD);return r.current===vD&&(r.current=e(t)),r}const KQ=[];function JQ(e){ee.useEffect(e,KQ)}class cw{static create(){return new cw}currentId=null;start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function nh(){const e=Ej(cw.create).current;return JQ(e.disposeEffect),e}const dw=e=>e.scrollTop;function Ad(e,t){const{timeout:r,easing:n,style:i={}}=e;return{duration:i.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:i.transitionDelay}}function QQ(e){return ti("MuiCollapse",e)}Kn("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const eee=e=>{const{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return ri(n,QQ,r)},tee=Sr("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(jn(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),ree=Sr("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),nee=Sr("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),r3=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiCollapse"}),{addEndListener:i,children:o,className:u,collapsedSize:a="0px",component:f,easing:p,in:g,onEnter:b,onEntered:S,onEntering:_,onExit:P,onExited:k,onExiting:M,orientation:D="vertical",style:F,timeout:B=gj.standard,TransitionComponent:N=Ac,...$}=n,V={...n,orientation:D,collapsedSize:a},U=eee(V),X=Su(),Z=nh(),oe=ee.useRef(null),re=ee.useRef(),H=typeof a=="number"?`${a}px`:a,ae=D==="horizontal",se=ae?"width":"height",de=ee.useRef(null),fe=ao(r,de),Le=Fe=>Xe=>{if(Fe){const Be=de.current;Xe===void 0?Fe(Be):Fe(Be,Xe)}},ye=()=>oe.current?oe.current[ae?"clientWidth":"clientHeight"]:0,xe=Le((Fe,Xe)=>{oe.current&&ae&&(oe.current.style.position="absolute"),Fe.style[se]=H,b&&b(Fe,Xe)}),Se=Le((Fe,Xe)=>{const Be=ye();oe.current&&ae&&(oe.current.style.position="");const{duration:ot,easing:Ke}=Ad({style:F,timeout:B,easing:p},{mode:"enter"});if(B==="auto"){const it=X.transitions.getAutoHeightDuration(Be);Fe.style.transitionDuration=`${it}ms`,re.current=it}else Fe.style.transitionDuration=typeof ot=="string"?ot:`${ot}ms`;Fe.style[se]=`${Be}px`,Fe.style.transitionTimingFunction=Ke,_&&_(Fe,Xe)}),Re=Le((Fe,Xe)=>{Fe.style[se]="auto",S&&S(Fe,Xe)}),he=Le(Fe=>{Fe.style[se]=`${ye()}px`,P&&P(Fe)}),Ee=Le(k),we=Le(Fe=>{const Xe=ye(),{duration:Be,easing:ot}=Ad({style:F,timeout:B,easing:p},{mode:"exit"});if(B==="auto"){const Ke=X.transitions.getAutoHeightDuration(Xe);Fe.style.transitionDuration=`${Ke}ms`,re.current=Ke}else Fe.style.transitionDuration=typeof Be=="string"?Be:`${Be}ms`;Fe.style[se]=H,Fe.style.transitionTimingFunction=ot,M&&M(Fe)}),Ne=Fe=>{B==="auto"&&Z.start(re.current||0,Fe),i&&i(de.current,Fe)};return K.jsx(N,{in:g,onEnter:xe,onEntered:Re,onEntering:Se,onExit:he,onExited:Ee,onExiting:we,addEndListener:Ne,nodeRef:de,timeout:B==="auto"?null:B,...$,children:(Fe,{ownerState:Xe,...Be})=>K.jsx(tee,{as:f,className:cn(U.root,u,{entered:U.entered,exited:!g&&H==="0px"&&U.hidden}[Fe]),style:{[ae?"minWidth":"minHeight"]:H,...F},ref:fe,ownerState:{...V,state:Fe},...Be,children:K.jsx(ree,{ownerState:{...V,state:Fe},className:U.wrapper,ref:oe,children:K.jsx(nee,{ownerState:{...V,state:Fe},className:U.wrapperInner,children:o})})})})});r3&&(r3.muiSupportAuto=!0);function iee(e){return ti("MuiPaper",e)}Kn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const aee=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return ri(o,iee,i)},oee=Sr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(jn(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Kc=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiPaper"}),i=Su(),{className:o,component:u="div",elevation:a=1,square:f=!1,variant:p="elevation",...g}=n,b={...n,component:u,elevation:a,square:f,variant:p},S=aee(b);return K.jsx(oee,{as:u,ownerState:b,className:cn(S.root,o),ref:r,...g,style:{...p==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Px("#fff",YT(a))}, ${Px("#fff",YT(a))})`}},...g.style}})}),Tj=ee.createContext({});function pf(e){return typeof e=="string"}function Ij(e,t,r){return e===void 0||pf(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function Pj(e,t,r){return typeof e=="function"?e(t,r):e}function fm(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function bD(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function Aj(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const _=cn(r?.className,o,i?.className,n?.className),P={...r?.style,...i?.style,...n?.style},k={...r,...i,...n};return _.length>0&&(k.className=_),Object.keys(P).length>0&&(k.style=P),{props:k,internalRef:void 0}}const u=fm({...i,...n}),a=bD(n),f=bD(i),p=t(u),g=cn(p?.className,r?.className,o,i?.className,n?.className),b={...p?.style,...r?.style,...i?.style,...n?.style},S={...p,...r,...f,...a};return g.length>0&&(S.className=g),Object.keys(b).length>0&&(S.style=b),{props:S,internalRef:p.ref}}function si(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:o,internalForwardedProps:u,shouldForwardComponentProp:a=!1,...f}=t,{component:p,slots:g={[e]:void 0},slotProps:b={[e]:void 0},...S}=o,_=g[e]||n,P=Pj(b[e],i),{props:{component:k,...M},internalRef:D}=Aj({className:r,...f,externalForwardedProps:e==="root"?S:void 0,externalSlotProps:P}),F=ao(D,P?.ref,t.ref),B=e==="root"?k||p:k,N=Ij(_,{...e==="root"&&!p&&!g[e]&&u,...e!=="root"&&!g[e]&&u,...M,...B&&!a&&{as:B},...B&&a&&{component:B},ref:F},i);return[_,N]}function see(e){return ti("MuiAccordion",e)}const Wb=Kn("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),lee=e=>{const{classes:t,square:r,expanded:n,disabled:i,disableGutters:o}=e;return ri({root:["root",!r&&"rounded",n&&"expanded",i&&"disabled",!o&&"gutters"],heading:["heading"],region:["region"]},see,t)},uee=Sr(Kc,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Wb.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(jn(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Wb.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Wb.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),jn(({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${Wb.expanded}`]:{margin:"16px 0"}}}]}))),cee=Sr("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),dee=Sr("div",{name:"MuiAccordion",slot:"Region"})({}),fee=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:u=!1,disabled:a=!1,disableGutters:f=!1,expanded:p,onChange:g,square:b=!1,slots:S={},slotProps:_={},TransitionComponent:P,TransitionProps:k,...M}=n,[D,F]=lp({controlled:p,default:u,name:"Accordion",state:"expanded"}),B=ee.useCallback(Se=>{F(!D),g&&g(Se,!D)},[D,g,F]),[N,...$]=ee.Children.toArray(i),V=ee.useMemo(()=>({expanded:D,disabled:a,disableGutters:f,toggle:B}),[D,a,f,B]),U={...n,square:b,disabled:a,disableGutters:f,expanded:D},X=lee(U),Z={transition:P,...S},oe={transition:k,..._},re={slots:Z,slotProps:oe},[H,ae]=si("root",{elementType:uee,externalForwardedProps:{...re,...M},className:cn(X.root,o),shouldForwardComponentProp:!0,ownerState:U,ref:r,additionalProps:{square:b}}),[se,de]=si("heading",{elementType:cee,externalForwardedProps:re,className:X.heading,ownerState:U}),[fe,Le]=si("transition",{elementType:r3,externalForwardedProps:re,ownerState:U}),[ye,xe]=si("region",{elementType:dee,externalForwardedProps:re,ownerState:U,className:X.region,additionalProps:{"aria-labelledby":N.props.id,id:N.props["aria-controls"],role:"region"}});return K.jsxs(H,{...ae,children:[K.jsx(se,{...de,children:K.jsx(Tj.Provider,{value:V,children:N})}),K.jsx(fe,{in:D,timeout:"auto",...Le,children:K.jsx(ye,{...xe,children:$})})]})});function Ry(e){try{return e.matches(":focus-visible")}catch{}return!1}class Rx{static create(){return new Rx}static use(){const t=Ej(Rx.create).current,[r,n]=ee.useState(!1);return t.shouldMount=r,t.setShouldMount=n,ee.useEffect(t.mountEffect,[r]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=pee(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function hee(){return Rx.use()}function pee(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function mee(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:u,in:a,onExited:f,timeout:p}=e,[g,b]=ee.useState(!1),S=cn(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),_={width:u,height:u,top:-(u/2)+o,left:-(u/2)+i},P=cn(r.child,g&&r.childLeaving,n&&r.childPulsate);return!a&&!g&&b(!0),ee.useEffect(()=>{if(!a&&f!=null){const k=setTimeout(f,p);return()=>{clearTimeout(k)}}},[f,a,p]),K.jsx("span",{className:S,style:_,children:K.jsx("span",{className:P})})}const $c=Kn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),n3=550,gee=80,yee=F1`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,vee=F1`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,bee=F1`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,_ee=Sr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),xee=Sr(mee,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${$c.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${yee};
    animation-duration: ${n3}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${$c.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${$c.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${$c.childLeaving} {
    opacity: 0;
    animation-name: ${vee};
    animation-duration: ${n3}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${$c.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${bee};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,wee=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:u,...a}=n,[f,p]=ee.useState([]),g=ee.useRef(0),b=ee.useRef(null);ee.useEffect(()=>{b.current&&(b.current(),b.current=null)},[f]);const S=ee.useRef(!1),_=nh(),P=ee.useRef(null),k=ee.useRef(null),M=ee.useCallback(N=>{const{pulsate:$,rippleX:V,rippleY:U,rippleSize:X,cb:Z}=N;p(oe=>[...oe,K.jsx(xee,{classes:{ripple:cn(o.ripple,$c.ripple),rippleVisible:cn(o.rippleVisible,$c.rippleVisible),ripplePulsate:cn(o.ripplePulsate,$c.ripplePulsate),child:cn(o.child,$c.child),childLeaving:cn(o.childLeaving,$c.childLeaving),childPulsate:cn(o.childPulsate,$c.childPulsate)},timeout:n3,pulsate:$,rippleX:V,rippleY:U,rippleSize:X},g.current)]),g.current+=1,b.current=Z},[o]),D=ee.useCallback((N={},$={},V=()=>{})=>{const{pulsate:U=!1,center:X=i||$.pulsate,fakeElement:Z=!1}=$;if(N?.type==="mousedown"&&S.current){S.current=!1;return}N?.type==="touchstart"&&(S.current=!0);const oe=Z?null:k.current,re=oe?oe.getBoundingClientRect():{width:0,height:0,left:0,top:0};let H,ae,se;if(X||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)H=Math.round(re.width/2),ae=Math.round(re.height/2);else{const{clientX:de,clientY:fe}=N.touches&&N.touches.length>0?N.touches[0]:N;H=Math.round(de-re.left),ae=Math.round(fe-re.top)}if(X)se=Math.sqrt((2*re.width**2+re.height**2)/3),se%2===0&&(se+=1);else{const de=Math.max(Math.abs((oe?oe.clientWidth:0)-H),H)*2+2,fe=Math.max(Math.abs((oe?oe.clientHeight:0)-ae),ae)*2+2;se=Math.sqrt(de**2+fe**2)}N?.touches?P.current===null&&(P.current=()=>{M({pulsate:U,rippleX:H,rippleY:ae,rippleSize:se,cb:V})},_.start(gee,()=>{P.current&&(P.current(),P.current=null)})):M({pulsate:U,rippleX:H,rippleY:ae,rippleSize:se,cb:V})},[i,M,_]),F=ee.useCallback(()=>{D({},{pulsate:!0})},[D]),B=ee.useCallback((N,$)=>{if(_.clear(),N?.type==="touchend"&&P.current){P.current(),P.current=null,_.start(0,()=>{B(N,$)});return}P.current=null,p(V=>V.length>0?V.slice(1):V),b.current=$},[_]);return ee.useImperativeHandle(r,()=>({pulsate:F,start:D,stop:B}),[F,D,B]),K.jsx(_ee,{className:cn($c.root,o.root,u),ref:k,...a,children:K.jsx(FP,{component:null,exit:!0,children:f})})});function See(e){return ti("MuiButtonBase",e)}const Cee=Kn("MuiButtonBase",["root","disabled","focusVisible"]),Eee=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,u=ri({root:["root",t&&"disabled",r&&"focusVisible"]},See,i);return r&&n&&(u.root+=` ${n}`),u},Tee=Sr("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Cee.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Nm=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:u,className:a,component:f="button",disabled:p=!1,disableRipple:g=!1,disableTouchRipple:b=!1,focusRipple:S=!1,focusVisibleClassName:_,LinkComponent:P="a",onBlur:k,onClick:M,onContextMenu:D,onDragLeave:F,onFocus:B,onFocusVisible:N,onKeyDown:$,onKeyUp:V,onMouseDown:U,onMouseLeave:X,onMouseUp:Z,onTouchEnd:oe,onTouchMove:re,onTouchStart:H,tabIndex:ae=0,TouchRippleProps:se,touchRippleRef:de,type:fe,...Le}=n,ye=ee.useRef(null),xe=hee(),Se=ao(xe.ref,de),[Re,he]=ee.useState(!1);p&&Re&&he(!1),ee.useImperativeHandle(i,()=>({focusVisible:()=>{he(!0),ye.current.focus()}}),[]);const Ee=xe.shouldMount&&!g&&!p;ee.useEffect(()=>{Re&&S&&!g&&xe.pulsate()},[g,S,Re,xe]);const we=Hf(xe,"start",U,b),Ne=Hf(xe,"stop",D,b),Fe=Hf(xe,"stop",F,b),Xe=Hf(xe,"stop",Z,b),Be=Hf(xe,"stop",ir=>{Re&&ir.preventDefault(),X&&X(ir)},b),ot=Hf(xe,"start",H,b),Ke=Hf(xe,"stop",oe,b),it=Hf(xe,"stop",re,b),ke=Hf(xe,"stop",ir=>{Ry(ir.target)||he(!1),k&&k(ir)},!1),Nt=kl(ir=>{ye.current||(ye.current=ir.currentTarget),Ry(ir.target)&&(he(!0),N&&N(ir)),B&&B(ir)}),st=()=>{const ir=ye.current;return f&&f!=="button"&&!(ir.tagName==="A"&&ir.href)},$e=kl(ir=>{S&&!ir.repeat&&Re&&ir.key===" "&&xe.stop(ir,()=>{xe.start(ir)}),ir.target===ir.currentTarget&&st()&&ir.key===" "&&ir.preventDefault(),$&&$(ir),ir.target===ir.currentTarget&&st()&&ir.key==="Enter"&&!p&&(ir.preventDefault(),M&&M(ir))}),Zt=kl(ir=>{S&&ir.key===" "&&Re&&!ir.defaultPrevented&&xe.stop(ir,()=>{xe.pulsate(ir)}),V&&V(ir),M&&ir.target===ir.currentTarget&&st()&&ir.key===" "&&!ir.defaultPrevented&&M(ir)});let $t=f;$t==="button"&&(Le.href||Le.to)&&($t=P);const Wt={};$t==="button"?(Wt.type=fe===void 0?"button":fe,Wt.disabled=p):(!Le.href&&!Le.to&&(Wt.role="button"),p&&(Wt["aria-disabled"]=p));const ht=ao(r,ye),sr={...n,centerRipple:o,component:f,disabled:p,disableRipple:g,disableTouchRipple:b,focusRipple:S,tabIndex:ae,focusVisible:Re},cr=Eee(sr);return K.jsxs(Tee,{as:$t,className:cn(cr.root,a),ownerState:sr,onBlur:ke,onClick:M,onContextMenu:Ne,onFocus:Nt,onKeyDown:$e,onKeyUp:Zt,onMouseDown:we,onMouseLeave:Be,onMouseUp:Xe,onDragLeave:Fe,onTouchEnd:Ke,onTouchMove:it,onTouchStart:ot,ref:ht,tabIndex:p?-1:ae,type:fe,...Wt,...Le,children:[u,Ee?K.jsx(wee,{ref:Se,center:o,...se}):null]})});function Hf(e,t,r,n=!1){return kl(i=>(r&&r(i),n||e[t](i),!0))}function Iee(e){return ti("MuiAccordionSummary",e)}const uy=Kn("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Pee=e=>{const{classes:t,expanded:r,disabled:n,disableGutters:i}=e;return ri({root:["root",r&&"expanded",n&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},Iee,t)},Aee=Sr(Nm,{name:"MuiAccordionSummary",slot:"Root"})(jn(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${uy.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${uy.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${uy.disabled})`]:{cursor:"pointer"},variants:[{props:r=>!r.disableGutters,style:{[`&.${uy.expanded}`]:{minHeight:64}}}]}})),kee=Sr("span",{name:"MuiAccordionSummary",slot:"Content"})(jn(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${uy.expanded}`]:{margin:"20px 0"}}}]}))),Mee=Sr("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(jn(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${uy.expanded}`]:{transform:"rotate(180deg)"}}))),Lee=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:u,focusVisibleClassName:a,onClick:f,slots:p,slotProps:g,...b}=n,{disabled:S=!1,disableGutters:_,expanded:P,toggle:k}=ee.useContext(Tj),M=oe=>{k&&k(oe),f&&f(oe)},D={...n,expanded:P,disabled:S,disableGutters:_},F=Pee(D),B={slots:p,slotProps:g},[N,$]=si("root",{ref:r,shouldForwardComponentProp:!0,className:cn(F.root,o),elementType:Aee,externalForwardedProps:{...B,...b},ownerState:D,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:S,"aria-expanded":P,focusVisibleClassName:cn(F.focusVisible,a)},getSlotProps:oe=>({...oe,onClick:re=>{oe.onClick?.(re),M(re)}})}),[V,U]=si("content",{className:F.content,elementType:kee,externalForwardedProps:B,ownerState:D}),[X,Z]=si("expandIconWrapper",{className:F.expandIconWrapper,elementType:Mee,externalForwardedProps:B,ownerState:D});return K.jsxs(N,{...$,children:[K.jsx(V,{...U,children:i}),u&&K.jsx(X,{...Z,children:u})]})});function Ree(e){return typeof e.main=="string"}function Dee(e,t=[]){if(!Ree(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function rl(e=[]){return([,t])=>t&&Dee(t,e)}function Oee(e){return ti("MuiCircularProgress",e)}Kn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const $h=44,i3=F1`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,a3=F1`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Nee=typeof i3!="string"?_P`
        animation: ${i3} 1.4s linear infinite;
      `:null,Fee=typeof a3!="string"?_P`
        animation: ${a3} 1.4s ease-in-out infinite;
      `:null,Bee=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${Zr(n)}`],svg:["svg"],circle:["circle",`circle${Zr(r)}`,i&&"circleDisableShrink"]};return ri(o,Oee,t)},zee=Sr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${Zr(r.color)}`]]}})(jn(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Nee||{animation:`${i3} 1.4s linear infinite`}},...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),jee=Sr("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),qee=Sr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${Zr(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(jn(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Fee||{animation:`${a3} 1.4s ease-in-out infinite`}}]}))),fw=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:u=!1,size:a=40,style:f,thickness:p=3.6,value:g=0,variant:b="indeterminate",...S}=n,_={...n,color:o,disableShrink:u,size:a,thickness:p,value:g,variant:b},P=Bee(_),k={},M={},D={};if(b==="determinate"){const F=2*Math.PI*(($h-p)/2);k.strokeDasharray=F.toFixed(3),D["aria-valuenow"]=Math.round(g),k.strokeDashoffset=`${((100-g)/100*F).toFixed(3)}px`,M.transform="rotate(-90deg)"}return K.jsx(zee,{className:cn(P.root,i),style:{width:a,height:a,...M,...f},ownerState:_,ref:r,role:"progressbar",...D,...S,children:K.jsx(jee,{className:P.svg,ownerState:_,viewBox:`${$h/2} ${$h/2} ${$h} ${$h}`,children:K.jsx(qee,{className:P.circle,style:k,ownerState:_,cx:$h,cy:$h,r:($h-p)/2,fill:"none",strokeWidth:p})})})});function Vee(e){return ti("MuiIconButton",e)}const _D=Kn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),$ee=e=>{const{classes:t,disabled:r,color:n,edge:i,size:o,loading:u}=e,a={root:["root",u&&"loading",r&&"disabled",n!=="default"&&`color${Zr(n)}`,i&&`edge${Zr(i)}`,`size${Zr(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return ri(a,Vee,t)},Gee=Sr(Nm,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${Zr(r.color)}`],r.edge&&t[`edge${Zr(r.edge)}`],t[`size${Zr(r.size)}`]]}})(jn(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),jn(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${_D.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${_D.loading}`]:{color:"transparent"}}))),Uee=Sr("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),xc=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:u,color:a="default",disabled:f=!1,disableFocusRipple:p=!1,size:g="medium",id:b,loading:S=null,loadingIndicator:_,...P}=n,k=yp(b),M=_??K.jsx(fw,{"aria-labelledby":k,color:"inherit",size:16}),D={...n,edge:i,color:a,disabled:f,disableFocusRipple:p,loading:S,loadingIndicator:M,size:g},F=$ee(D);return K.jsxs(Gee,{id:S?k:b,className:cn(F.root,u),centerRipple:!0,focusRipple:!p,disabled:f||S,ref:r,...P,ownerState:D,children:[typeof S=="boolean"&&K.jsx("span",{className:F.loadingWrapper,style:{display:"contents"},children:K.jsx(Uee,{className:F.loadingIndicator,ownerState:D,children:S&&M})}),o]})});function Hee(e){return ti("MuiTypography",e)}const xD=Kn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Wee={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Xee=zQ(),Yee=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:u}=e,a={root:["root",o,e.align!=="inherit"&&`align${Zr(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return ri(a,Hee,u)},Zee=Sr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${Zr(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(jn(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Zr(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),wD={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ns=ee.forwardRef(function(t,r){const{color:n,...i}=li({props:t,name:"MuiTypography"}),o=!Wee[n],u=Xee({...i,...o&&{color:n}}),{align:a="inherit",className:f,component:p,gutterBottom:g=!1,noWrap:b=!1,paragraph:S=!1,variant:_="body1",variantMapping:P=wD,...k}=u,M={...u,align:a,color:n,className:f,component:p,gutterBottom:g,noWrap:b,paragraph:S,variant:_,variantMapping:P},D=p||(S?"p":P[_]||wD[_])||"span",F=Yee(M);return K.jsx(Zee,{as:D,ref:r,className:cn(F.root,f),...k,ownerState:M,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...k.style}})});function Kee(e){return ti("MuiAppBar",e)}Kn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Jee=e=>{const{color:t,position:r,classes:n}=e,i={root:["root",`color${Zr(t)}`,`position${Zr(r)}`]};return ri(i,Kee,n)},SD=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,Qee=Sr(Kc,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${Zr(r.position)}`],t[`color${Zr(r.color)}`]]}})(jn(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(rl(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?SD(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?SD(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),ete=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:u=!1,position:a="fixed",...f}=n,p={...n,color:o,position:a,enableColorOnDark:u},g=Jee(p);return K.jsx(Qee,{square:!0,component:"header",ownerState:p,elevation:4,className:cn(g.root,i,a==="fixed"&&"mui-fixed"),ref:r,...f})});var Ku="top",Jc="bottom",Qc="right",Ju="left",BP="auto",$1=[Ku,Jc,Qc,Ju],Dy="start",i1="end",tte="clippingParents",kj="viewport",qv="popper",rte="reference",CD=$1.reduce(function(e,t){return e.concat([t+"-"+Dy,t+"-"+i1])},[]),Mj=[].concat($1,[BP]).reduce(function(e,t){return e.concat([t,t+"-"+Dy,t+"-"+i1])},[]),nte="beforeRead",ite="read",ate="afterRead",ote="beforeMain",ste="main",lte="afterMain",ute="beforeWrite",cte="write",dte="afterWrite",fte=[nte,ite,ate,ote,ste,lte,ute,cte,dte];function bf(e){return e?(e.nodeName||"").toLowerCase():null}function wc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function _m(e){var t=wc(e).Element;return e instanceof t||e instanceof Element}function Xc(e){var t=wc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function zP(e){if(typeof ShadowRoot>"u")return!1;var t=wc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function hte(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!Xc(o)||!bf(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(u){var a=i[u];a===!1?o.removeAttribute(u):o.setAttribute(u,a===!0?"":a)}))})}function pte(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},u=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=u.reduce(function(f,p){return f[p]="",f},{});!Xc(i)||!bf(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(f){i.removeAttribute(f)}))})}}const mte={name:"applyStyles",enabled:!0,phase:"write",fn:hte,effect:pte,requires:["computeStyles"]};function mf(e){return e.split("-")[0]}var hm=Math.max,Dx=Math.min,Oy=Math.round;function o3(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Lj(){return!/^((?!chrome|android).)*safari/i.test(o3())}function Ny(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&Xc(e)&&(i=e.offsetWidth>0&&Oy(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Oy(n.height)/e.offsetHeight||1);var u=_m(e)?wc(e):window,a=u.visualViewport,f=!Lj()&&r,p=(n.left+(f&&a?a.offsetLeft:0))/i,g=(n.top+(f&&a?a.offsetTop:0))/o,b=n.width/i,S=n.height/o;return{width:b,height:S,top:g,right:p+b,bottom:g+S,left:p,x:p,y:g}}function jP(e){var t=Ny(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Rj(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&zP(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function mh(e){return wc(e).getComputedStyle(e)}function gte(e){return["table","td","th"].indexOf(bf(e))>=0}function bp(e){return((_m(e)?e.ownerDocument:e.document)||window.document).documentElement}function hw(e){return bf(e)==="html"?e:e.assignedSlot||e.parentNode||(zP(e)?e.host:null)||bp(e)}function ED(e){return!Xc(e)||mh(e).position==="fixed"?null:e.offsetParent}function yte(e){var t=/firefox/i.test(o3()),r=/Trident/i.test(o3());if(r&&Xc(e)){var n=mh(e);if(n.position==="fixed")return null}var i=hw(e);for(zP(i)&&(i=i.host);Xc(i)&&["html","body"].indexOf(bf(i))<0;){var o=mh(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function G1(e){for(var t=wc(e),r=ED(e);r&&gte(r)&&mh(r).position==="static";)r=ED(r);return r&&(bf(r)==="html"||bf(r)==="body"&&mh(r).position==="static")?t:r||yte(e)||t}function qP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function F0(e,t,r){return hm(e,Dx(t,r))}function vte(e,t,r){var n=F0(e,t,r);return n>r?r:n}function Dj(){return{top:0,right:0,bottom:0,left:0}}function Oj(e){return Object.assign({},Dj(),e)}function Nj(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var bte=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Oj(typeof t!="number"?t:Nj(t,$1))};function _te(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,u=r.modifiersData.popperOffsets,a=mf(r.placement),f=qP(a),p=[Ju,Qc].indexOf(a)>=0,g=p?"height":"width";if(!(!o||!u)){var b=bte(i.padding,r),S=jP(o),_=f==="y"?Ku:Ju,P=f==="y"?Jc:Qc,k=r.rects.reference[g]+r.rects.reference[f]-u[f]-r.rects.popper[g],M=u[f]-r.rects.reference[f],D=G1(o),F=D?f==="y"?D.clientHeight||0:D.clientWidth||0:0,B=k/2-M/2,N=b[_],$=F-S[g]-b[P],V=F/2-S[g]/2+B,U=F0(N,V,$),X=f;r.modifiersData[n]=(t={},t[X]=U,t.centerOffset=U-V,t)}}function xte(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Rj(t.elements.popper,i)&&(t.elements.arrow=i))}const wte={name:"arrow",enabled:!0,phase:"main",fn:_te,effect:xte,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fy(e){return e.split("-")[1]}var Ste={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cte(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Oy(r*i)/i||0,y:Oy(n*i)/i||0}}function TD(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,u=e.offsets,a=e.position,f=e.gpuAcceleration,p=e.adaptive,g=e.roundOffsets,b=e.isFixed,S=u.x,_=S===void 0?0:S,P=u.y,k=P===void 0?0:P,M=typeof g=="function"?g({x:_,y:k}):{x:_,y:k};_=M.x,k=M.y;var D=u.hasOwnProperty("x"),F=u.hasOwnProperty("y"),B=Ju,N=Ku,$=window;if(p){var V=G1(r),U="clientHeight",X="clientWidth";if(V===wc(r)&&(V=bp(r),mh(V).position!=="static"&&a==="absolute"&&(U="scrollHeight",X="scrollWidth")),V=V,i===Ku||(i===Ju||i===Qc)&&o===i1){N=Jc;var Z=b&&V===$&&$.visualViewport?$.visualViewport.height:V[U];k-=Z-n.height,k*=f?1:-1}if(i===Ju||(i===Ku||i===Jc)&&o===i1){B=Qc;var oe=b&&V===$&&$.visualViewport?$.visualViewport.width:V[X];_-=oe-n.width,_*=f?1:-1}}var re=Object.assign({position:a},p&&Ste),H=g===!0?Cte({x:_,y:k},wc(r)):{x:_,y:k};if(_=H.x,k=H.y,f){var ae;return Object.assign({},re,(ae={},ae[N]=F?"0":"",ae[B]=D?"0":"",ae.transform=($.devicePixelRatio||1)<=1?"translate("+_+"px, "+k+"px)":"translate3d("+_+"px, "+k+"px, 0)",ae))}return Object.assign({},re,(t={},t[N]=F?k+"px":"",t[B]=D?_+"px":"",t.transform="",t))}function Ete(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,u=o===void 0?!0:o,a=r.roundOffsets,f=a===void 0?!0:a,p={placement:mf(t.placement),variation:Fy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,TD(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:u,roundOffsets:f})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,TD(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Tte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ete,data:{}};var Xb={passive:!0};function Ite(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,u=n.resize,a=u===void 0?!0:u,f=wc(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&p.forEach(function(g){g.addEventListener("scroll",r.update,Xb)}),a&&f.addEventListener("resize",r.update,Xb),function(){o&&p.forEach(function(g){g.removeEventListener("scroll",r.update,Xb)}),a&&f.removeEventListener("resize",r.update,Xb)}}const Pte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ite,data:{}};var Ate={left:"right",right:"left",bottom:"top",top:"bottom"};function ix(e){return e.replace(/left|right|bottom|top/g,function(t){return Ate[t]})}var kte={start:"end",end:"start"};function ID(e){return e.replace(/start|end/g,function(t){return kte[t]})}function VP(e){var t=wc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function $P(e){return Ny(bp(e)).left+VP(e).scrollLeft}function Mte(e,t){var r=wc(e),n=bp(e),i=r.visualViewport,o=n.clientWidth,u=n.clientHeight,a=0,f=0;if(i){o=i.width,u=i.height;var p=Lj();(p||!p&&t==="fixed")&&(a=i.offsetLeft,f=i.offsetTop)}return{width:o,height:u,x:a+$P(e),y:f}}function Lte(e){var t,r=bp(e),n=VP(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=hm(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),u=hm(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+$P(e),f=-n.scrollTop;return mh(i||r).direction==="rtl"&&(a+=hm(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:u,x:a,y:f}}function GP(e){var t=mh(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function Fj(e){return["html","body","#document"].indexOf(bf(e))>=0?e.ownerDocument.body:Xc(e)&&GP(e)?e:Fj(hw(e))}function B0(e,t){var r;t===void 0&&(t=[]);var n=Fj(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=wc(n),u=i?[o].concat(o.visualViewport||[],GP(n)?n:[]):n,a=t.concat(u);return i?a:a.concat(B0(hw(u)))}function s3(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Rte(e,t){var r=Ny(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function PD(e,t,r){return t===kj?s3(Mte(e,r)):_m(t)?Rte(t,r):s3(Lte(bp(e)))}function Dte(e){var t=B0(hw(e)),r=["absolute","fixed"].indexOf(mh(e).position)>=0,n=r&&Xc(e)?G1(e):e;return _m(n)?t.filter(function(i){return _m(i)&&Rj(i,n)&&bf(i)!=="body"}):[]}function Ote(e,t,r,n){var i=t==="clippingParents"?Dte(e):[].concat(t),o=[].concat(i,[r]),u=o[0],a=o.reduce(function(f,p){var g=PD(e,p,n);return f.top=hm(g.top,f.top),f.right=Dx(g.right,f.right),f.bottom=Dx(g.bottom,f.bottom),f.left=hm(g.left,f.left),f},PD(e,u,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Bj(e){var t=e.reference,r=e.element,n=e.placement,i=n?mf(n):null,o=n?Fy(n):null,u=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,f;switch(i){case Ku:f={x:u,y:t.y-r.height};break;case Jc:f={x:u,y:t.y+t.height};break;case Qc:f={x:t.x+t.width,y:a};break;case Ju:f={x:t.x-r.width,y:a};break;default:f={x:t.x,y:t.y}}var p=i?qP(i):null;if(p!=null){var g=p==="y"?"height":"width";switch(o){case Dy:f[p]=f[p]-(t[g]/2-r[g]/2);break;case i1:f[p]=f[p]+(t[g]/2-r[g]/2);break}}return f}function a1(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,u=o===void 0?e.strategy:o,a=r.boundary,f=a===void 0?tte:a,p=r.rootBoundary,g=p===void 0?kj:p,b=r.elementContext,S=b===void 0?qv:b,_=r.altBoundary,P=_===void 0?!1:_,k=r.padding,M=k===void 0?0:k,D=Oj(typeof M!="number"?M:Nj(M,$1)),F=S===qv?rte:qv,B=e.rects.popper,N=e.elements[P?F:S],$=Ote(_m(N)?N:N.contextElement||bp(e.elements.popper),f,g,u),V=Ny(e.elements.reference),U=Bj({reference:V,element:B,placement:i}),X=s3(Object.assign({},B,U)),Z=S===qv?X:V,oe={top:$.top-Z.top+D.top,bottom:Z.bottom-$.bottom+D.bottom,left:$.left-Z.left+D.left,right:Z.right-$.right+D.right},re=e.modifiersData.offset;if(S===qv&&re){var H=re[i];Object.keys(oe).forEach(function(ae){var se=[Qc,Jc].indexOf(ae)>=0?1:-1,de=[Ku,Jc].indexOf(ae)>=0?"y":"x";oe[ae]+=H[de]*se})}return oe}function Nte(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,u=r.padding,a=r.flipVariations,f=r.allowedAutoPlacements,p=f===void 0?Mj:f,g=Fy(n),b=g?a?CD:CD.filter(function(P){return Fy(P)===g}):$1,S=b.filter(function(P){return p.indexOf(P)>=0});S.length===0&&(S=b);var _=S.reduce(function(P,k){return P[k]=a1(e,{placement:k,boundary:i,rootBoundary:o,padding:u})[mf(k)],P},{});return Object.keys(_).sort(function(P,k){return _[P]-_[k]})}function Fte(e){if(mf(e)===BP)return[];var t=ix(e);return[ID(e),t,ID(t)]}function Bte(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!0:u,f=r.fallbackPlacements,p=r.padding,g=r.boundary,b=r.rootBoundary,S=r.altBoundary,_=r.flipVariations,P=_===void 0?!0:_,k=r.allowedAutoPlacements,M=t.options.placement,D=mf(M),F=D===M,B=f||(F||!P?[ix(M)]:Fte(M)),N=[M].concat(B).reduce(function(we,Ne){return we.concat(mf(Ne)===BP?Nte(t,{placement:Ne,boundary:g,rootBoundary:b,padding:p,flipVariations:P,allowedAutoPlacements:k}):Ne)},[]),$=t.rects.reference,V=t.rects.popper,U=new Map,X=!0,Z=N[0],oe=0;oe<N.length;oe++){var re=N[oe],H=mf(re),ae=Fy(re)===Dy,se=[Ku,Jc].indexOf(H)>=0,de=se?"width":"height",fe=a1(t,{placement:re,boundary:g,rootBoundary:b,altBoundary:S,padding:p}),Le=se?ae?Qc:Ju:ae?Jc:Ku;$[de]>V[de]&&(Le=ix(Le));var ye=ix(Le),xe=[];if(o&&xe.push(fe[H]<=0),a&&xe.push(fe[Le]<=0,fe[ye]<=0),xe.every(function(we){return we})){Z=re,X=!1;break}U.set(re,xe)}if(X)for(var Se=P?3:1,Re=function(Ne){var Fe=N.find(function(Xe){var Be=U.get(Xe);if(Be)return Be.slice(0,Ne).every(function(ot){return ot})});if(Fe)return Z=Fe,"break"},he=Se;he>0;he--){var Ee=Re(he);if(Ee==="break")break}t.placement!==Z&&(t.modifiersData[n]._skip=!0,t.placement=Z,t.reset=!0)}}const zte={name:"flip",enabled:!0,phase:"main",fn:Bte,requiresIfExists:["offset"],data:{_skip:!1}};function AD(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function kD(e){return[Ku,Qc,Jc,Ju].some(function(t){return e[t]>=0})}function jte(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,u=a1(t,{elementContext:"reference"}),a=a1(t,{altBoundary:!0}),f=AD(u,n),p=AD(a,i,o),g=kD(f),b=kD(p);t.modifiersData[r]={referenceClippingOffsets:f,popperEscapeOffsets:p,isReferenceHidden:g,hasPopperEscaped:b},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":b})}const qte={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:jte};function Vte(e,t,r){var n=mf(e),i=[Ju,Ku].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,u=o[0],a=o[1];return u=u||0,a=(a||0)*i,[Ju,Qc].indexOf(n)>=0?{x:a,y:u}:{x:u,y:a}}function $te(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,u=Mj.reduce(function(g,b){return g[b]=Vte(b,t.rects,o),g},{}),a=u[t.placement],f=a.x,p=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=p),t.modifiersData[n]=u}const Gte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:$te};function Ute(e){var t=e.state,r=e.name;t.modifiersData[r]=Bj({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Hte={name:"popperOffsets",enabled:!0,phase:"read",fn:Ute,data:{}};function Wte(e){return e==="x"?"y":"x"}function Xte(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!1:u,f=r.boundary,p=r.rootBoundary,g=r.altBoundary,b=r.padding,S=r.tether,_=S===void 0?!0:S,P=r.tetherOffset,k=P===void 0?0:P,M=a1(t,{boundary:f,rootBoundary:p,padding:b,altBoundary:g}),D=mf(t.placement),F=Fy(t.placement),B=!F,N=qP(D),$=Wte(N),V=t.modifiersData.popperOffsets,U=t.rects.reference,X=t.rects.popper,Z=typeof k=="function"?k(Object.assign({},t.rects,{placement:t.placement})):k,oe=typeof Z=="number"?{mainAxis:Z,altAxis:Z}:Object.assign({mainAxis:0,altAxis:0},Z),re=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if(V){if(o){var ae,se=N==="y"?Ku:Ju,de=N==="y"?Jc:Qc,fe=N==="y"?"height":"width",Le=V[N],ye=Le+M[se],xe=Le-M[de],Se=_?-X[fe]/2:0,Re=F===Dy?U[fe]:X[fe],he=F===Dy?-X[fe]:-U[fe],Ee=t.elements.arrow,we=_&&Ee?jP(Ee):{width:0,height:0},Ne=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Dj(),Fe=Ne[se],Xe=Ne[de],Be=F0(0,U[fe],we[fe]),ot=B?U[fe]/2-Se-Be-Fe-oe.mainAxis:Re-Be-Fe-oe.mainAxis,Ke=B?-U[fe]/2+Se+Be+Xe+oe.mainAxis:he+Be+Xe+oe.mainAxis,it=t.elements.arrow&&G1(t.elements.arrow),ke=it?N==="y"?it.clientTop||0:it.clientLeft||0:0,Nt=(ae=re?.[N])!=null?ae:0,st=Le+ot-Nt-ke,$e=Le+Ke-Nt,Zt=F0(_?Dx(ye,st):ye,Le,_?hm(xe,$e):xe);V[N]=Zt,H[N]=Zt-Le}if(a){var $t,Wt=N==="x"?Ku:Ju,ht=N==="x"?Jc:Qc,sr=V[$],cr=$==="y"?"height":"width",ir=sr+M[Wt],br=sr-M[ht],yr=[Ku,Ju].indexOf(D)!==-1,Kt=($t=re?.[$])!=null?$t:0,at=yr?ir:sr-U[cr]-X[cr]-Kt+oe.altAxis,Ae=yr?sr+U[cr]+X[cr]-Kt-oe.altAxis:br,_e=_&&yr?vte(at,sr,Ae):F0(_?at:ir,sr,_?Ae:br);V[$]=_e,H[$]=_e-sr}t.modifiersData[n]=H}}const Yte={name:"preventOverflow",enabled:!0,phase:"main",fn:Xte,requiresIfExists:["offset"]};function Zte(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Kte(e){return e===wc(e)||!Xc(e)?VP(e):Zte(e)}function Jte(e){var t=e.getBoundingClientRect(),r=Oy(t.width)/e.offsetWidth||1,n=Oy(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Qte(e,t,r){r===void 0&&(r=!1);var n=Xc(t),i=Xc(t)&&Jte(t),o=bp(t),u=Ny(e,i,r),a={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(n||!n&&!r)&&((bf(t)!=="body"||GP(o))&&(a=Kte(t)),Xc(t)?(f=Ny(t,!0),f.x+=t.clientLeft,f.y+=t.clientTop):o&&(f.x=$P(o))),{x:u.left+a.scrollLeft-f.x,y:u.top+a.scrollTop-f.y,width:u.width,height:u.height}}function ere(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var u=[].concat(o.requires||[],o.requiresIfExists||[]);u.forEach(function(a){if(!r.has(a)){var f=t.get(a);f&&i(f)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function tre(e){var t=ere(e);return fte.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function rre(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function nre(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var MD={placement:"bottom",modifiers:[],strategy:"absolute"};function LD(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function ire(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?MD:i;return function(a,f,p){p===void 0&&(p=o);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},MD,o),modifiersData:{},elements:{reference:a,popper:f},attributes:{},styles:{}},b=[],S=!1,_={state:g,setOptions:function(D){var F=typeof D=="function"?D(g.options):D;k(),g.options=Object.assign({},o,g.options,F),g.scrollParents={reference:_m(a)?B0(a):a.contextElement?B0(a.contextElement):[],popper:B0(f)};var B=tre(nre([].concat(n,g.options.modifiers)));return g.orderedModifiers=B.filter(function(N){return N.enabled}),P(),_.update()},forceUpdate:function(){if(!S){var D=g.elements,F=D.reference,B=D.popper;if(LD(F,B)){g.rects={reference:Qte(F,G1(B),g.options.strategy==="fixed"),popper:jP(B)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(oe){return g.modifiersData[oe.name]=Object.assign({},oe.data)});for(var N=0;N<g.orderedModifiers.length;N++){if(g.reset===!0){g.reset=!1,N=-1;continue}var $=g.orderedModifiers[N],V=$.fn,U=$.options,X=U===void 0?{}:U,Z=$.name;typeof V=="function"&&(g=V({state:g,options:X,name:Z,instance:_})||g)}}}},update:rre(function(){return new Promise(function(M){_.forceUpdate(),M(g)})}),destroy:function(){k(),S=!0}};if(!LD(a,f))return _;_.setOptions(p).then(function(M){!S&&p.onFirstUpdate&&p.onFirstUpdate(M)});function P(){g.orderedModifiers.forEach(function(M){var D=M.name,F=M.options,B=F===void 0?{}:F,N=M.effect;if(typeof N=="function"){var $=N({state:g,name:D,instance:_,options:B}),V=function(){};b.push($||V)}})}function k(){b.forEach(function(M){return M()}),b=[]}return _}}var are=[Pte,Hte,Tte,mte,Gte,zte,Yte,wte,qte],ore=ire({defaultModifiers:are});function sf(e){const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...o}=e,u=i?{}:Pj(r,n),{props:a,internalRef:f}=Aj({...o,externalSlotProps:u}),p=ao(f,u?.ref,e.additionalProps?.ref);return Ij(t,{...a,ref:p},n)}function xh(e){return parseInt(ee.version,10)>=19?e?.props?.ref||null:e?.ref||null}function sre(e){return typeof e=="function"?e():e}const zj=ee.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[u,a]=ee.useState(null),f=ao(ee.isValidElement(n)?xh(n):null,r);if(Zl(()=>{o||a(sre(i)||document.body)},[i,o]),Zl(()=>{if(u&&!o)return gD(r,u),()=>{gD(r,null)}},[r,u,o]),o){if(ee.isValidElement(n)){const p={ref:f};return ee.cloneElement(n,p)}return n}return u&&rh.createPortal(n,u)});function lre(e){return ti("MuiPopper",e)}Kn("MuiPopper",["root"]);function ure(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function l3(e){return typeof e=="function"?e():e}function cre(e){return e.nodeType!==void 0}const dre=e=>{const{classes:t}=e;return ri({root:["root"]},lre,t)},fre={},hre=ee.forwardRef(function(t,r){const{anchorEl:n,children:i,direction:o,disablePortal:u,modifiers:a,open:f,placement:p,popperOptions:g,popperRef:b,slotProps:S={},slots:_={},TransitionProps:P,ownerState:k,...M}=t,D=ee.useRef(null),F=ao(D,r),B=ee.useRef(null),N=ao(B,b),$=ee.useRef(N);Zl(()=>{$.current=N},[N]),ee.useImperativeHandle(b,()=>B.current,[]);const V=ure(p,o),[U,X]=ee.useState(V),[Z,oe]=ee.useState(l3(n));ee.useEffect(()=>{B.current&&B.current.forceUpdate()}),ee.useEffect(()=>{n&&oe(l3(n))},[n]),Zl(()=>{if(!Z||!f)return;const de=ye=>{X(ye.placement)};let fe=[{name:"preventOverflow",options:{altBoundary:u}},{name:"flip",options:{altBoundary:u}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ye})=>{de(ye)}}];a!=null&&(fe=fe.concat(a)),g&&g.modifiers!=null&&(fe=fe.concat(g.modifiers));const Le=ore(Z,D.current,{placement:V,...g,modifiers:fe});return $.current(Le),()=>{Le.destroy(),$.current(null)}},[Z,u,a,f,g,V]);const re={placement:U};P!==null&&(re.TransitionProps=P);const H=dre(t),ae=_.root??"div",se=sf({elementType:ae,externalSlotProps:S.root,externalForwardedProps:M,additionalProps:{role:"tooltip",ref:F},ownerState:t,className:H.root});return K.jsx(ae,{...se,children:typeof i=="function"?i(re):i})}),pre=ee.forwardRef(function(t,r){const{anchorEl:n,children:i,container:o,direction:u="ltr",disablePortal:a=!1,keepMounted:f=!1,modifiers:p,open:g,placement:b="bottom",popperOptions:S=fre,popperRef:_,style:P,transition:k=!1,slotProps:M={},slots:D={},...F}=t,[B,N]=ee.useState(!0),$=()=>{N(!1)},V=()=>{N(!0)};if(!f&&!g&&(!k||B))return null;let U;if(o)U=o;else if(n){const oe=l3(n);U=oe&&cre(oe)?Uo(oe).body:Uo(null).body}const X=!g&&f&&(!k||B)?"none":void 0,Z=k?{in:g,onEnter:$,onExited:V}:void 0;return K.jsx(zj,{disablePortal:a,container:U,children:K.jsx(hre,{anchorEl:n,direction:u,disablePortal:a,modifiers:p,ref:r,open:k?!B:g,placement:b,popperOptions:S,popperRef:_,slotProps:M,slots:D,...F,style:{position:"fixed",top:0,left:0,display:X,...P},TransitionProps:Z,children:i})})}),mre=Sr(pre,{name:"MuiPopper",slot:"Root"})({}),jj=ee.forwardRef(function(t,r){const n=V1(),i=li({props:t,name:"MuiPopper"}),{anchorEl:o,component:u,components:a,componentsProps:f,container:p,disablePortal:g,keepMounted:b,modifiers:S,open:_,placement:P,popperOptions:k,popperRef:M,transition:D,slots:F,slotProps:B,...N}=i,$=F?.root??a?.Root,V={anchorEl:o,container:p,disablePortal:g,keepMounted:b,modifiers:S,open:_,placement:P,popperOptions:k,popperRef:M,transition:D,...N};return K.jsx(mre,{as:u,direction:n?"rtl":"ltr",slots:{root:$},slotProps:B??f,...V,ref:r})});function Yb(e){return parseInt(e,10)||0}const gre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function yre(e){for(const t in e)return!1;return!0}function RD(e){return yre(e)||e.outerHeightStyle===0&&!e.overflowing}const vre=ee.forwardRef(function(t,r){const{onChange:n,maxRows:i,minRows:o=1,style:u,value:a,...f}=t,{current:p}=ee.useRef(a!=null),g=ee.useRef(null),b=ao(r,g),S=ee.useRef(null),_=ee.useRef(null),P=ee.useCallback(()=>{const B=g.current,N=_.current;if(!B||!N)return;const V=zu(B).getComputedStyle(B);if(V.width==="0px")return{outerHeightStyle:0,overflowing:!1};N.style.width=V.width,N.value=B.value||t.placeholder||"x",N.value.slice(-1)===`
`&&(N.value+=" ");const U=V.boxSizing,X=Yb(V.paddingBottom)+Yb(V.paddingTop),Z=Yb(V.borderBottomWidth)+Yb(V.borderTopWidth),oe=N.scrollHeight;N.value="x";const re=N.scrollHeight;let H=oe;o&&(H=Math.max(Number(o)*re,H)),i&&(H=Math.min(Number(i)*re,H)),H=Math.max(H,re);const ae=H+(U==="border-box"?X+Z:0),se=Math.abs(H-oe)<=1;return{outerHeightStyle:ae,overflowing:se}},[i,o,t.placeholder]),k=kl(()=>{const B=g.current,N=P();if(!B||!N||RD(N))return!1;const $=N.outerHeightStyle;return S.current!=null&&S.current!==$}),M=ee.useCallback(()=>{const B=g.current,N=P();if(!B||!N||RD(N))return;const $=N.outerHeightStyle;S.current!==$&&(S.current=$,B.style.height=`${$}px`),B.style.overflow=N.overflowing?"hidden":""},[P]),D=ee.useRef(-1);Zl(()=>{const B=OP(M),N=g?.current;if(!N)return;const $=zu(N);$.addEventListener("resize",B);let V;return typeof ResizeObserver<"u"&&(V=new ResizeObserver(()=>{k()&&(V.unobserve(N),cancelAnimationFrame(D.current),M(),D.current=requestAnimationFrame(()=>{V.observe(N)}))}),V.observe(N)),()=>{B.clear(),cancelAnimationFrame(D.current),$.removeEventListener("resize",B),V&&V.disconnect()}},[P,M,k]),Zl(()=>{M()});const F=B=>{p||M();const N=B.target,$=N.value.length,V=N.value.endsWith(`
`),U=N.selectionStart===$;V&&U&&N.setSelectionRange($,$),n&&n(B)};return K.jsxs(ee.Fragment,{children:[K.jsx("textarea",{value:a,onChange:F,ref:b,rows:o,style:u,...f}),K.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:_,tabIndex:-1,style:{...gre.shadow,...u,paddingTop:0,paddingBottom:0}})]})});function _p({props:e,states:t,muiFormControl:r}){return t.reduce((n,i)=>(n[i]=e[i],r&&typeof e[i]>"u"&&(n[i]=r[i]),n),{})}const UP=ee.createContext(void 0);function Cf(){return ee.useContext(UP)}function DD(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Ox(e,t=!1){return e&&(DD(e.value)&&e.value!==""||t&&DD(e.defaultValue)&&e.defaultValue!=="")}function bre(e){return e.startAdornment}function _re(e){return ti("MuiInputBase",e)}const By=Kn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var OD;const pw=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${Zr(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},mw=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},xre=e=>{const{classes:t,color:r,disabled:n,error:i,endAdornment:o,focused:u,formControl:a,fullWidth:f,hiddenLabel:p,multiline:g,readOnly:b,size:S,startAdornment:_,type:P}=e,k={root:["root",`color${Zr(r)}`,n&&"disabled",i&&"error",f&&"fullWidth",u&&"focused",a&&"formControl",S&&S!=="medium"&&`size${Zr(S)}`,g&&"multiline",_&&"adornedStart",o&&"adornedEnd",p&&"hiddenLabel",b&&"readOnly"],input:["input",n&&"disabled",P==="search"&&"inputTypeSearch",g&&"inputMultiline",S==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",_&&"inputAdornedStart",o&&"inputAdornedEnd",b&&"readOnly"]};return ri(k,_re,t)},gw=Sr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:pw})(jn(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${By.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),yw=Sr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:mw})(jn(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${By.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${By.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),ND=BQ({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),HP=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:u,className:a,color:f,components:p={},componentsProps:g={},defaultValue:b,disabled:S,disableInjectingGlobalStyles:_,endAdornment:P,error:k,fullWidth:M=!1,id:D,inputComponent:F="input",inputProps:B={},inputRef:N,margin:$,maxRows:V,minRows:U,multiline:X=!1,name:Z,onBlur:oe,onChange:re,onClick:H,onFocus:ae,onKeyDown:se,onKeyUp:de,placeholder:fe,readOnly:Le,renderSuffix:ye,rows:xe,size:Se,slotProps:Re={},slots:he={},startAdornment:Ee,type:we="text",value:Ne,...Fe}=n,Xe=B.value!=null?B.value:Ne,{current:Be}=ee.useRef(Xe!=null),ot=ee.useRef(),Ke=ee.useCallback(He=>{},[]),it=ao(ot,N,B.ref,Ke),[ke,Nt]=ee.useState(!1),st=Cf(),$e=_p({props:n,muiFormControl:st,states:["color","disabled","error","hiddenLabel","size","required","filled"]});$e.focused=st?st.focused:ke,ee.useEffect(()=>{!st&&S&&ke&&(Nt(!1),oe&&oe())},[st,S,ke,oe]);const Zt=st&&st.onFilled,$t=st&&st.onEmpty,Wt=ee.useCallback(He=>{Ox(He)?Zt&&Zt():$t&&$t()},[Zt,$t]);Zl(()=>{Be&&Wt({value:Xe})},[Xe,Wt,Be]);const ht=He=>{ae&&ae(He),B.onFocus&&B.onFocus(He),st&&st.onFocus?st.onFocus(He):Nt(!0)},sr=He=>{oe&&oe(He),B.onBlur&&B.onBlur(He),st&&st.onBlur?st.onBlur(He):Nt(!1)},cr=(He,...Dt)=>{if(!Be){const St=He.target||ot.current;if(St==null)throw new Error(fh(1));Wt({value:St.value})}B.onChange&&B.onChange(He,...Dt),re&&re(He,...Dt)};ee.useEffect(()=>{Wt(ot.current)},[]);const ir=He=>{ot.current&&He.currentTarget===He.target&&ot.current.focus(),H&&H(He)};let br=F,yr=B;X&&br==="input"&&(xe?yr={type:void 0,minRows:xe,maxRows:xe,...yr}:yr={type:void 0,maxRows:V,minRows:U,...yr},br=vre);const Kt=He=>{Wt(He.animationName==="mui-auto-fill-cancel"?ot.current:{value:"x"})};ee.useEffect(()=>{st&&st.setAdornedStart(!!Ee)},[st,Ee]);const at={...n,color:$e.color||"primary",disabled:$e.disabled,endAdornment:P,error:$e.error,focused:$e.focused,formControl:st,fullWidth:M,hiddenLabel:$e.hiddenLabel,multiline:X,size:$e.size,startAdornment:Ee,type:we},Ae=xre(at),_e=he.root||p.Root||gw,je=Re.root||g.root||{},Ge=he.input||p.Input||yw;return yr={...yr,...Re.input??g.input},K.jsxs(ee.Fragment,{children:[!_&&typeof ND=="function"&&(OD||(OD=K.jsx(ND,{}))),K.jsxs(_e,{...je,ref:r,onClick:ir,...Fe,...!pf(_e)&&{ownerState:{...at,...je.ownerState}},className:cn(Ae.root,je.className,a,Le&&"MuiInputBase-readOnly"),children:[Ee,K.jsx(UP.Provider,{value:null,children:K.jsx(Ge,{"aria-invalid":$e.error,"aria-describedby":i,autoComplete:o,autoFocus:u,defaultValue:b,disabled:$e.disabled,id:D,onAnimationStart:Kt,name:Z,placeholder:fe,readOnly:Le,required:$e.required,rows:xe,value:Xe,onKeyDown:se,onKeyUp:de,type:we,...yr,...!pf(Ge)&&{as:br,ownerState:{...at,...yr.ownerState}},ref:it,className:cn(Ae.input,yr.className,Le&&"MuiInputBase-readOnly"),onBlur:sr,onChange:cr,onFocus:ht})}),P,ye?ye({...$e,startAdornment:Ee}):null]})]})});function wre(e){return ti("MuiInput",e)}const Vv={...By,...Kn("MuiInput",["root","underline","input"])};function Sre(e){return ti("MuiOutlinedInput",e)}const nf={...By,...Kn("MuiOutlinedInput",["root","notchedOutline","input"])};function Cre(e){return ti("MuiFilledInput",e)}const Hp={...By,...Kn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Ere=Ei(K.jsx("path",{d:"M7 10l5 5 5-5z"})),Tre=Ei(K.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Ire(e){return ti("MuiAvatar",e)}Kn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Pre=e=>{const{classes:t,variant:r,colorDefault:n}=e;return ri({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Ire,t)},Are=Sr("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(jn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),kre=Sr("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Mre=Sr(Tre,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function Lre({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[i,o]=ee.useState(!1);return ee.useEffect(()=>{if(!r&&!n)return;o(!1);let u=!0;const a=new Image;return a.onload=()=>{u&&o("loaded")},a.onerror=()=>{u&&o("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=r,n&&(a.srcset=n),()=>{u=!1}},[e,t,r,n]),i}const qj=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiAvatar"}),{alt:i,children:o,className:u,component:a="div",slots:f={},slotProps:p={},imgProps:g,sizes:b,src:S,srcSet:_,variant:P="circular",...k}=n;let M=null;const D={...n,component:a,variant:P},F=Lre({...g,...typeof p.img=="function"?p.img(D):p.img,src:S,srcSet:_}),B=S||_,N=B&&F!=="error";D.colorDefault=!N,delete D.ownerState;const $=Pre(D),[V,U]=si("root",{ref:r,className:cn($.root,u),elementType:Are,externalForwardedProps:{slots:f,slotProps:p,component:a,...k},ownerState:D}),[X,Z]=si("img",{className:$.img,elementType:kre,externalForwardedProps:{slots:f,slotProps:{img:{...g,...p.img}}},additionalProps:{alt:i,src:S,srcSet:_,sizes:b},ownerState:D}),[oe,re]=si("fallback",{className:$.fallback,elementType:Mre,externalForwardedProps:{slots:f,slotProps:p},shouldForwardComponentProp:!0,ownerState:D});return N?M=K.jsx(X,{...Z}):o||o===0?M=o:B&&i?M=i[0]:M=K.jsx(oe,{...re}),K.jsx(V,{...U,children:M})}),Rre={entering:{opacity:1},entered:{opacity:1}},u3=ee.forwardRef(function(t,r){const n=Su(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:u=!0,children:a,easing:f,in:p,onEnter:g,onEntered:b,onEntering:S,onExit:_,onExited:P,onExiting:k,style:M,timeout:D=i,TransitionComponent:F=Ac,...B}=t,N=ee.useRef(null),$=ao(N,xh(a),r),V=se=>de=>{if(se){const fe=N.current;de===void 0?se(fe):se(fe,de)}},U=V(S),X=V((se,de)=>{dw(se);const fe=Ad({style:M,timeout:D,easing:f},{mode:"enter"});se.style.webkitTransition=n.transitions.create("opacity",fe),se.style.transition=n.transitions.create("opacity",fe),g&&g(se,de)}),Z=V(b),oe=V(k),re=V(se=>{const de=Ad({style:M,timeout:D,easing:f},{mode:"exit"});se.style.webkitTransition=n.transitions.create("opacity",de),se.style.transition=n.transitions.create("opacity",de),_&&_(se)}),H=V(P),ae=se=>{o&&o(N.current,se)};return K.jsx(F,{appear:u,in:p,nodeRef:N,onEnter:X,onEntered:Z,onEntering:U,onExit:re,onExited:H,onExiting:oe,addEndListener:ae,timeout:D,...B,children:(se,{ownerState:de,...fe})=>ee.cloneElement(a,{style:{opacity:0,visibility:se==="exited"&&!p?"hidden":void 0,...Rre[se],...M,...a.props.style},ref:$,...fe})})});function Dre(e){return ti("MuiBackdrop",e)}Kn("MuiBackdrop",["root","invisible"]);const Ore=e=>{const{classes:t,invisible:r}=e;return ri({root:["root",r&&"invisible"]},Dre,t)},Nre=Sr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Vj=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiBackdrop"}),{children:i,className:o,component:u="div",invisible:a=!1,open:f,components:p={},componentsProps:g={},slotProps:b={},slots:S={},TransitionComponent:_,transitionDuration:P,...k}=n,M={...n,component:u,invisible:a},D=Ore(M),F={transition:_,root:p.Root,...S},B={...g,...b},N={component:u,slots:F,slotProps:B},[$,V]=si("root",{elementType:Nre,externalForwardedProps:N,className:cn(D.root,o),ownerState:M}),[U,X]=si("transition",{elementType:u3,externalForwardedProps:N,ownerState:M});return K.jsx(U,{in:f,timeout:P,...k,...X,children:K.jsx($,{"aria-hidden":!0,...V,classes:D,ref:r,children:i})})}),Fre=Kn("MuiBox",["root"]),Bre=rv(),xo=Q7({themeId:Id,defaultTheme:Bre,defaultClassName:Fre.root,generateClassName:TP.generate});function zre(e){return ti("MuiButton",e)}const Wp=Kn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),$j=ee.createContext({}),Gj=ee.createContext(void 0),jre=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,loading:u,loadingPosition:a,classes:f}=e,p={root:["root",u&&"loading",o,`${o}${Zr(t)}`,`size${Zr(i)}`,`${o}Size${Zr(i)}`,`color${Zr(t)}`,r&&"disableElevation",n&&"fullWidth",u&&`loadingPosition${Zr(a)}`],startIcon:["icon","startIcon",`iconSize${Zr(i)}`],endIcon:["icon","endIcon",`iconSize${Zr(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},g=ri(p,zre,f);return{...f,...g}},Uj=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],qre=Sr(Nm,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${Zr(r.color)}`],t[`size${Zr(r.size)}`],t[`${r.variant}Size${Zr(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(jn(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Wp.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Wp.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Wp.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Wp.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(rl()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Wp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Wp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Wp.loading}`]:{color:"transparent"}}}]}})),Vre=Sr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${Zr(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Uj]})),$re=Sr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${Zr(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Uj]})),Gre=Sr("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),FD=Sr("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),$i=ee.forwardRef(function(t,r){const n=ee.useContext($j),i=ee.useContext(Gj),o=r1(n,t),u=li({props:o,name:"MuiButton"}),{children:a,color:f="primary",component:p="button",className:g,disabled:b=!1,disableElevation:S=!1,disableFocusRipple:_=!1,endIcon:P,focusVisibleClassName:k,fullWidth:M=!1,id:D,loading:F=null,loadingIndicator:B,loadingPosition:N="center",size:$="medium",startIcon:V,type:U,variant:X="text",...Z}=u,oe=yp(D),re=B??K.jsx(fw,{"aria-labelledby":oe,color:"inherit",size:16}),H={...u,color:f,component:p,disabled:b,disableElevation:S,disableFocusRipple:_,fullWidth:M,loading:F,loadingIndicator:re,loadingPosition:N,size:$,type:U,variant:X},ae=jre(H),se=(V||F&&N==="start")&&K.jsx(Vre,{className:ae.startIcon,ownerState:H,children:V||K.jsx(FD,{className:ae.loadingIconPlaceholder,ownerState:H})}),de=(P||F&&N==="end")&&K.jsx($re,{className:ae.endIcon,ownerState:H,children:P||K.jsx(FD,{className:ae.loadingIconPlaceholder,ownerState:H})}),fe=i||"",Le=typeof F=="boolean"?K.jsx("span",{className:ae.loadingWrapper,style:{display:"contents"},children:F&&K.jsx(Gre,{className:ae.loadingIndicator,ownerState:H,children:re})}):null;return K.jsxs(qre,{ownerState:H,className:cn(n.className,ae.root,g,fe),component:p,disabled:b||F,focusRipple:!_,focusVisibleClassName:cn(ae.focusVisible,k),ref:r,type:U,id:F?oe:D,...Z,classes:ae,children:[se,N!=="end"&&Le,a,N==="end"&&Le,de]})});function Ure(e){return ee.Children.toArray(e).filter(t=>ee.isValidElement(t))}function Hre(e){return ti("MuiButtonGroup",e)}const Vi=Kn("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Wre=(e,t)=>{const{ownerState:r}=e;return[{[`& .${Vi.grouped}`]:t.grouped},{[`& .${Vi.grouped}`]:t[`grouped${Zr(r.orientation)}`]},{[`& .${Vi.grouped}`]:t[`grouped${Zr(r.variant)}`]},{[`& .${Vi.grouped}`]:t[`grouped${Zr(r.variant)}${Zr(r.orientation)}`]},{[`& .${Vi.grouped}`]:t[`grouped${Zr(r.variant)}${Zr(r.color)}`]},{[`& .${Vi.firstButton}`]:t.firstButton},{[`& .${Vi.lastButton}`]:t.lastButton},{[`& .${Vi.middleButton}`]:t.middleButton},t.root,t[r.variant],r.disableElevation===!0&&t.disableElevation,r.fullWidth&&t.fullWidth,r.orientation==="vertical"&&t.vertical]},Xre=e=>{const{classes:t,color:r,disabled:n,disableElevation:i,fullWidth:o,orientation:u,variant:a}=e,f={root:["root",a,u,o&&"fullWidth",i&&"disableElevation",`color${Zr(r)}`],grouped:["grouped",`grouped${Zr(u)}`,`grouped${Zr(a)}`,`grouped${Zr(a)}${Zr(u)}`,`grouped${Zr(a)}${Zr(r)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ri(f,Hre,t)},Yre=Sr("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Wre})(jn(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Vi.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Vi.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(rl()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${Vi.lastButton},& .${Vi.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Vi.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Vi.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(rl(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${Vi.firstButton},& .${Vi.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${Vi.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),c3=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiButtonGroup"}),{children:i,className:o,color:u="primary",component:a="div",disabled:f=!1,disableElevation:p=!1,disableFocusRipple:g=!1,disableRipple:b=!1,fullWidth:S=!1,orientation:_="horizontal",size:P="medium",variant:k="outlined",...M}=n,D={...n,color:u,component:a,disabled:f,disableElevation:p,disableFocusRipple:g,disableRipple:b,fullWidth:S,orientation:_,size:P,variant:k},F=Xre(D),B=ee.useMemo(()=>({className:F.grouped,color:u,disabled:f,disableElevation:p,disableFocusRipple:g,disableRipple:b,fullWidth:S,size:P,variant:k}),[u,f,p,g,b,S,P,k,F.grouped]),N=Ure(i),$=N.length,V=U=>{const X=U===0,Z=U===$-1;return X&&Z?"":X?F.firstButton:Z?F.lastButton:F.middleButton};return K.jsx(Yre,{as:a,role:"group",className:cn(F.root,o),ref:r,ownerState:D,...M,children:K.jsx($j.Provider,{value:B,children:N.map((U,X)=>K.jsx(Gj.Provider,{value:V(X),children:U},X))})})});function Zre(e){return ti("PrivateSwitchBase",e)}Kn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Kre=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${Zr(i)}`],input:["input"]};return ri(o,Zre,t)},Jre=Sr(Nm,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),Qre=Sr("input",{name:"MuiSwitchBase",shouldForwardProp:Bs})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Hj=ee.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,defaultChecked:u,disabled:a,disableFocusRipple:f=!1,edge:p=!1,icon:g,id:b,inputProps:S,inputRef:_,name:P,onBlur:k,onChange:M,onFocus:D,readOnly:F,required:B=!1,tabIndex:N,type:$,value:V,slots:U={},slotProps:X={},...Z}=t,[oe,re]=lp({controlled:i,default:!!u,name:"SwitchBase",state:"checked"}),H=Cf(),ae=Ne=>{D&&D(Ne),H&&H.onFocus&&H.onFocus(Ne)},se=Ne=>{k&&k(Ne),H&&H.onBlur&&H.onBlur(Ne)},de=Ne=>{if(Ne.nativeEvent.defaultPrevented)return;const Fe=Ne.target.checked;re(Fe),M&&M(Ne,Fe)};let fe=a;H&&typeof fe>"u"&&(fe=H.disabled);const Le=$==="checkbox"||$==="radio",ye={...t,checked:oe,disabled:fe,disableFocusRipple:f,edge:p},xe=Kre(ye),Se={slots:U,slotProps:{input:S,...X}},[Re,he]=si("root",{ref:r,elementType:Jre,className:xe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Se,component:"span",...Z},getSlotProps:Ne=>({...Ne,onFocus:Fe=>{Ne.onFocus?.(Fe),ae(Fe)},onBlur:Fe=>{Ne.onBlur?.(Fe),se(Fe)}}),ownerState:ye,additionalProps:{centerRipple:!0,focusRipple:!f,disabled:fe,role:void 0,tabIndex:null}}),[Ee,we]=si("input",{ref:_,elementType:Qre,className:xe.input,externalForwardedProps:Se,getSlotProps:Ne=>({...Ne,onChange:Fe=>{Ne.onChange?.(Fe),de(Fe)}}),ownerState:ye,additionalProps:{autoFocus:n,checked:i,defaultChecked:u,disabled:fe,id:Le?b:void 0,name:P,readOnly:F,required:B,tabIndex:N,type:$,...$==="checkbox"&&V===void 0?{}:{value:V}}});return K.jsxs(Re,{...he,children:[K.jsx(Ee,{...we}),oe?o:g]})}),ene=Ei(K.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),tne=Ei(K.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),rne=Ei(K.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function nne(e){return ti("MuiCheckbox",e)}const E5=Kn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),ine=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,o={root:["root",r&&"indeterminate",`color${Zr(n)}`,`size${Zr(i)}`]},u=ri(o,nne,t);return{...t,...u}},ane=Sr(Hj,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${Zr(r.size)}`],r.color!=="default"&&t[`color${Zr(r.color)}`]]}})(jn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{[`&.${E5.checked}, &.${E5.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${E5.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),one=K.jsx(tne,{}),sne=K.jsx(ene,{}),lne=K.jsx(rne,{}),zy=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiCheckbox"}),{checkedIcon:i=one,color:o="primary",icon:u=sne,indeterminate:a=!1,indeterminateIcon:f=lne,inputProps:p,size:g="medium",disableRipple:b=!1,className:S,slots:_={},slotProps:P={},...k}=n,M=a?f:u,D=a?f:i,F={...n,disableRipple:b,color:o,indeterminate:a,size:g},B=ine(F),N=P.input??p,[$,V]=si("root",{ref:r,elementType:ane,className:cn(B.root,S),shouldForwardComponentProp:!0,externalForwardedProps:{slots:_,slotProps:P,...k},ownerState:F,additionalProps:{type:"checkbox",icon:ee.cloneElement(M,{fontSize:M.props.fontSize??g}),checkedIcon:ee.cloneElement(D,{fontSize:D.props.fontSize??g}),disableRipple:b,slots:_,slotProps:{input:Ly(typeof N=="function"?N(F):N,{"data-indeterminate":a})}}});return K.jsx($,{...V,classes:B})});function BD(e){return e.substring(2).toLowerCase()}function une(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function cne(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,u=ee.useRef(!1),a=ee.useRef(null),f=ee.useRef(!1),p=ee.useRef(!1);ee.useEffect(()=>(setTimeout(()=>{f.current=!0},0),()=>{f.current=!1}),[]);const g=ao(xh(t),a),b=kl(P=>{const k=p.current;p.current=!1;const M=Uo(a.current);if(!f.current||!a.current||"clientX"in P&&une(P,M))return;if(u.current){u.current=!1;return}let D;P.composedPath?D=P.composedPath().includes(a.current):D=!M.documentElement.contains(P.target)||a.current.contains(P.target),!D&&(r||!k)&&i(P)}),S=P=>k=>{p.current=!0;const M=t.props[P];M&&M(k)},_={ref:g};return o!==!1&&(_[o]=S(o)),ee.useEffect(()=>{if(o!==!1){const P=BD(o),k=Uo(a.current),M=()=>{u.current=!0};return k.addEventListener(P,b),k.addEventListener("touchmove",M),()=>{k.removeEventListener(P,b),k.removeEventListener("touchmove",M)}}},[b,o]),n!==!1&&(_[n]=S(n)),ee.useEffect(()=>{if(n!==!1){const P=BD(n),k=Uo(a.current);return k.addEventListener(P,b),()=>{k.removeEventListener(P,b)}}},[b,n]),ee.cloneElement(t,_)}function Wj(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function dne(e){const t=Uo(e);return t.body===e?zu(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function z0(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function zD(e){return parseInt(zu(e).getComputedStyle(e).paddingRight,10)||0}function fne(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function jD(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,u=>{const a=!o.includes(u),f=!fne(u);a&&f&&z0(u,i)})}function T5(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function hne(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(dne(n)){const u=Wj(zu(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${zD(n)+u}px`;const a=Uo(n).querySelectorAll(".mui-fixed");[].forEach.call(a,f=>{r.push({value:f.style.paddingRight,property:"padding-right",el:f}),f.style.paddingRight=`${zD(f)+u}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=Uo(n).body;else{const u=n.parentElement,a=zu(n);o=u?.nodeName==="HTML"&&a.getComputedStyle(u).overflowY==="scroll"?u:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:u,property:a})=>{o?u.style.setProperty(a,o):u.style.removeProperty(a)})}}function pne(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class mne{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&z0(t.modalRef,!1);const i=pne(r);jD(r,t.mount,t.modalRef,i,!0);const o=T5(this.containers,u=>u.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=T5(this.containers,o=>o.modals.includes(t)),i=this.containers[n];i.restore||(i.restore=hne(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=T5(this.containers,u=>u.modals.includes(t)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&z0(t.modalRef,r),jD(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const u=o.modals[o.modals.length-1];u.modalRef&&z0(u.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const gne=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function yne(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function vne(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function bne(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||vne(e))}function _ne(e){const t=[],r=[];return Array.from(e.querySelectorAll(gne)).forEach((n,i)=>{const o=yne(n);o===-1||!bne(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function xne(){return!0}function wne(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=_ne,isEnabled:u=xne,open:a}=e,f=ee.useRef(!1),p=ee.useRef(null),g=ee.useRef(null),b=ee.useRef(null),S=ee.useRef(null),_=ee.useRef(!1),P=ee.useRef(null),k=ao(xh(t),P),M=ee.useRef(null);ee.useEffect(()=>{!a||!P.current||(_.current=!r)},[r,a]),ee.useEffect(()=>{if(!a||!P.current)return;const B=Uo(P.current);return P.current.contains(B.activeElement)||(P.current.hasAttribute("tabIndex")||P.current.setAttribute("tabIndex","-1"),_.current&&P.current.focus()),()=>{i||(b.current&&b.current.focus&&(f.current=!0,b.current.focus()),b.current=null)}},[a]),ee.useEffect(()=>{if(!a||!P.current)return;const B=Uo(P.current),N=U=>{M.current=U,!(n||!u()||U.key!=="Tab")&&B.activeElement===P.current&&U.shiftKey&&(f.current=!0,g.current&&g.current.focus())},$=()=>{const U=P.current;if(U===null)return;if(!B.hasFocus()||!u()||f.current){f.current=!1;return}if(U.contains(B.activeElement)||n&&B.activeElement!==p.current&&B.activeElement!==g.current)return;if(B.activeElement!==S.current)S.current=null;else if(S.current!==null)return;if(!_.current)return;let X=[];if((B.activeElement===p.current||B.activeElement===g.current)&&(X=o(P.current)),X.length>0){const Z=!!(M.current?.shiftKey&&M.current?.key==="Tab"),oe=X[0],re=X[X.length-1];typeof oe!="string"&&typeof re!="string"&&(Z?re.focus():oe.focus())}else U.focus()};B.addEventListener("focusin",$),B.addEventListener("keydown",N,!0);const V=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&$()},50);return()=>{clearInterval(V),B.removeEventListener("focusin",$),B.removeEventListener("keydown",N,!0)}},[r,n,i,u,a,o]);const D=B=>{b.current===null&&(b.current=B.relatedTarget),_.current=!0,S.current=B.target;const N=t.props.onFocus;N&&N(B)},F=B=>{b.current===null&&(b.current=B.relatedTarget),_.current=!0};return K.jsxs(ee.Fragment,{children:[K.jsx("div",{tabIndex:a?0:-1,onFocus:F,ref:p,"data-testid":"sentinelStart"}),ee.cloneElement(t,{ref:k,onFocus:D}),K.jsx("div",{tabIndex:a?0:-1,onFocus:F,ref:g,"data-testid":"sentinelEnd"})]})}function Sne(e){return typeof e=="function"?e():e}function Cne(e){return e?e.props.hasOwnProperty("in"):!1}const qD=()=>{},Zb=new mne;function Ene(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:u,children:a,onClose:f,open:p,rootRef:g}=e,b=ee.useRef({}),S=ee.useRef(null),_=ee.useRef(null),P=ao(_,g),[k,M]=ee.useState(!p),D=Cne(a);let F=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(F=!1);const B=()=>Uo(S.current),N=()=>(b.current.modalRef=_.current,b.current.mount=S.current,b.current),$=()=>{Zb.mount(N(),{disableScrollLock:n}),_.current&&(_.current.scrollTop=0)},V=kl(()=>{const de=Sne(t)||B().body;Zb.add(N(),de),_.current&&$()}),U=()=>Zb.isTopModal(N()),X=kl(de=>{S.current=de,de&&(p&&U()?$():_.current&&z0(_.current,F))}),Z=ee.useCallback(()=>{Zb.remove(N(),F)},[F]);ee.useEffect(()=>()=>{Z()},[Z]),ee.useEffect(()=>{p?V():(!D||!i)&&Z()},[p,Z,D,i,V]);const oe=de=>fe=>{de.onKeyDown?.(fe),!(fe.key!=="Escape"||fe.which===229||!U())&&(r||(fe.stopPropagation(),f&&f(fe,"escapeKeyDown")))},re=de=>fe=>{de.onClick?.(fe),fe.target===fe.currentTarget&&f&&f(fe,"backdropClick")};return{getRootProps:(de={})=>{const fe=fm(e);delete fe.onTransitionEnter,delete fe.onTransitionExited;const Le={...fe,...de};return{role:"presentation",...Le,onKeyDown:oe(Le),ref:P}},getBackdropProps:(de={})=>{const fe=de;return{"aria-hidden":!0,...fe,onClick:re(fe),open:p}},getTransitionProps:()=>{const de=()=>{M(!1),o&&o()},fe=()=>{M(!0),u&&u(),i&&Z()};return{onEnter:JT(de,a?.props.onEnter??qD),onExited:JT(fe,a?.props.onExited??qD)}},rootRef:P,portalRef:X,isTopModal:U,exited:k,hasTransition:D}}function Tne(e){return ti("MuiModal",e)}Kn("MuiModal",["root","hidden","backdrop"]);const Ine=e=>{const{open:t,exited:r,classes:n}=e;return ri({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},Tne,n)},Pne=Sr("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(jn(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),Ane=Sr(Vj,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),WP=ee.forwardRef(function(t,r){const n=li({name:"MuiModal",props:t}),{BackdropComponent:i=Ane,BackdropProps:o,classes:u,className:a,closeAfterTransition:f=!1,children:p,container:g,component:b,components:S={},componentsProps:_={},disableAutoFocus:P=!1,disableEnforceFocus:k=!1,disableEscapeKeyDown:M=!1,disablePortal:D=!1,disableRestoreFocus:F=!1,disableScrollLock:B=!1,hideBackdrop:N=!1,keepMounted:$=!1,onClose:V,onTransitionEnter:U,onTransitionExited:X,open:Z,slotProps:oe={},slots:re={},theme:H,...ae}=n,se={...n,closeAfterTransition:f,disableAutoFocus:P,disableEnforceFocus:k,disableEscapeKeyDown:M,disablePortal:D,disableRestoreFocus:F,disableScrollLock:B,hideBackdrop:N,keepMounted:$},{getRootProps:de,getBackdropProps:fe,getTransitionProps:Le,portalRef:ye,isTopModal:xe,exited:Se,hasTransition:Re}=Ene({...se,rootRef:r}),he={...se,exited:Se},Ee=Ine(he),we={};if(p.props.tabIndex===void 0&&(we.tabIndex="-1"),Re){const{onEnter:Ke,onExited:it}=Le();we.onEnter=Ke,we.onExited=it}const Ne={slots:{root:S.Root,backdrop:S.Backdrop,...re},slotProps:{..._,...oe}},[Fe,Xe]=si("root",{ref:r,elementType:Pne,externalForwardedProps:{...Ne,...ae,component:b},getSlotProps:de,ownerState:he,className:cn(a,Ee?.root,!he.open&&he.exited&&Ee?.hidden)}),[Be,ot]=si("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:Ne,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:Ke=>fe({...Ke,onClick:it=>{Ke?.onClick&&Ke.onClick(it)}}),className:cn(o?.className,Ee?.backdrop),ownerState:he});return!$&&!Z&&(!Re||Se)?null:K.jsx(zj,{ref:ye,container:g,disablePortal:D,children:K.jsxs(Fe,{...Xe,children:[!N&&i?K.jsx(Be,{...ot}):null,K.jsx(wne,{disableEnforceFocus:k,disableAutoFocus:P,disableRestoreFocus:F,isEnabled:xe,open:Z,children:ee.cloneElement(p,we)})]})})});function kne(e){return ti("MuiDialog",e)}const I5=Kn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Xj=ee.createContext({}),Mne=Sr(Vj,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Lne=e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:i,fullScreen:o}=e,u={root:["root"],container:["container",`scroll${Zr(r)}`],paper:["paper",`paperScroll${Zr(r)}`,`paperWidth${Zr(String(n))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return ri(u,kne,t)},Rne=Sr(WP,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Dne=Sr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${Zr(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),One=Sr(Kc,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${Zr(r.scroll)}`],t[`paperWidth${Zr(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(jn(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${I5.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${I5.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${I5.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),XP=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiDialog"}),i=Su(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":u,"aria-labelledby":a,"aria-modal":f=!0,BackdropComponent:p,BackdropProps:g,children:b,className:S,disableEscapeKeyDown:_=!1,fullScreen:P=!1,fullWidth:k=!1,maxWidth:M="sm",onClick:D,onClose:F,open:B,PaperComponent:N=Kc,PaperProps:$={},scroll:V="paper",slots:U={},slotProps:X={},TransitionComponent:Z=u3,transitionDuration:oe=o,TransitionProps:re,...H}=n,ae={...n,disableEscapeKeyDown:_,fullScreen:P,fullWidth:k,maxWidth:M,scroll:V},se=Lne(ae),de=ee.useRef(),fe=Nt=>{de.current=Nt.target===Nt.currentTarget},Le=Nt=>{D&&D(Nt),de.current&&(de.current=null,F&&F(Nt,"backdropClick"))},ye=yp(a),xe=ee.useMemo(()=>({titleId:ye}),[ye]),Se={transition:Z,...U},Re={transition:re,paper:$,backdrop:g,...X},he={slots:Se,slotProps:Re},[Ee,we]=si("root",{elementType:Rne,shouldForwardComponentProp:!0,externalForwardedProps:he,ownerState:ae,className:cn(se.root,S),ref:r}),[Ne,Fe]=si("backdrop",{elementType:Mne,shouldForwardComponentProp:!0,externalForwardedProps:he,ownerState:ae}),[Xe,Be]=si("paper",{elementType:One,shouldForwardComponentProp:!0,externalForwardedProps:he,ownerState:ae,className:cn(se.paper,$.className)}),[ot,Ke]=si("container",{elementType:Dne,externalForwardedProps:he,ownerState:ae,className:se.container}),[it,ke]=si("transition",{elementType:u3,externalForwardedProps:he,ownerState:ae,additionalProps:{appear:!0,in:B,timeout:oe,role:"presentation"}});return K.jsx(Ee,{closeAfterTransition:!0,slots:{backdrop:Ne},slotProps:{backdrop:{transitionDuration:oe,as:p,...Fe}},disableEscapeKeyDown:_,onClose:F,open:B,onClick:Le,...we,...H,children:K.jsx(it,{...ke,children:K.jsx(ot,{onMouseDown:fe,...Ke,children:K.jsx(Xe,{as:N,elevation:24,role:"dialog","aria-describedby":u,"aria-labelledby":ye,"aria-modal":f,...Be,children:K.jsx(Xj.Provider,{value:xe,children:b})})})})})});function Nne(e){return ti("MuiDialogActions",e)}Kn("MuiDialogActions",["root","spacing"]);const Fne=e=>{const{classes:t,disableSpacing:r}=e;return ri({root:["root",!r&&"spacing"]},Nne,t)},Bne=Sr("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),U1=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...u}=n,a={...n,disableSpacing:o},f=Fne(a);return K.jsx(Bne,{className:cn(f.root,i),ownerState:a,ref:r,...u})});function zne(e){return ti("MuiDialogContent",e)}Kn("MuiDialogContent",["root","dividers"]);function jne(e){return ti("MuiDialogTitle",e)}const qne=Kn("MuiDialogTitle",["root"]),Vne=e=>{const{classes:t,dividers:r}=e;return ri({root:["root",r&&"dividers"]},zne,t)},$ne=Sr("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(jn(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${qne.root} + &`]:{paddingTop:0}}}]}))),YP=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...u}=n,a={...n,dividers:o},f=Vne(a);return K.jsx($ne,{className:cn(f.root,i),ownerState:a,ref:r,...u})});function Gne(e){return ti("MuiDialogContentText",e)}Kn("MuiDialogContentText",["root"]);const Une=e=>{const{classes:t}=e,n=ri({root:["root"]},Gne,t);return{...t,...n}},Hne=Sr(ns,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Wne=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiDialogContentText"}),{children:i,className:o,...u}=n,a=Une(u);return K.jsx(Hne,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:u,className:cn(a.root,o),...n,classes:a})}),Xne=e=>{const{classes:t}=e;return ri({root:["root"]},jne,t)},Yne=Sr(ns,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Fm=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiDialogTitle"}),{className:i,id:o,...u}=n,a=n,f=Xne(a),{titleId:p=o}=ee.useContext(Xj);return K.jsx(Yne,{component:"h2",className:cn(f.root,i),ownerState:a,ref:r,variant:"h6",id:o??p,...u})});function Zne(e){return ti("MuiDivider",e)}const VD=Kn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Kne=e=>{const{absolute:t,children:r,classes:n,flexItem:i,light:o,orientation:u,textAlign:a,variant:f}=e;return ri({root:["root",t&&"absolute",f,o&&"light",u==="vertical"&&"vertical",i&&"flexItem",r&&"withChildren",r&&u==="vertical"&&"withChildrenVertical",a==="right"&&u!=="vertical"&&"textAlignRight",a==="left"&&u!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",u==="vertical"&&"wrapperVertical"]},Zne,n)},Jne=Sr("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(jn(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Qne=Sr("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(jn(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),d3=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiDivider"}),{absolute:i=!1,children:o,className:u,orientation:a="horizontal",component:f=o||a==="vertical"?"div":"hr",flexItem:p=!1,light:g=!1,role:b=f!=="hr"?"separator":void 0,textAlign:S="center",variant:_="fullWidth",...P}=n,k={...n,absolute:i,component:f,flexItem:p,light:g,orientation:a,role:b,textAlign:S,variant:_},M=Kne(k);return K.jsx(Jne,{as:f,className:cn(M.root,u),role:b,ref:r,ownerState:k,"aria-orientation":b==="separator"&&(f!=="hr"||a==="vertical")?a:void 0,...P,children:o?K.jsx(Qne,{className:M.wrapper,ownerState:k,children:o}):null})});d3&&(d3.muiSkipListHighlight=!0);function eie(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),o=zu(t);let u;if(t.fakeTransform)u=t.fakeTransform;else{const p=o.getComputedStyle(t);u=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}let a=0,f=0;if(u&&u!=="none"&&typeof u=="string"){const p=u.split("(")[1].split(")")[0].split(",");a=parseInt(p[4],10),f=parseInt(p[5],10)}return e==="left"?i?`translateX(${i.right+a-n.left}px)`:`translateX(${o.innerWidth+a-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:e==="up"?i?`translateY(${i.bottom+f-n.top}px)`:`translateY(${o.innerHeight+f-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-f}px)`:`translateY(-${n.top+n.height-f}px)`}function tie(e){return typeof e=="function"?e():e}function Kb(e,t,r){const n=tie(r),i=eie(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const rie=ee.forwardRef(function(t,r){const n=Su(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:u,appear:a=!0,children:f,container:p,direction:g="down",easing:b=i,in:S,onEnter:_,onEntered:P,onEntering:k,onExit:M,onExited:D,onExiting:F,style:B,timeout:N=o,TransitionComponent:$=Ac,...V}=t,U=ee.useRef(null),X=ao(xh(f),U,r),Z=ye=>xe=>{ye&&(xe===void 0?ye(U.current):ye(U.current,xe))},oe=Z((ye,xe)=>{Kb(g,ye,p),dw(ye),_&&_(ye,xe)}),re=Z((ye,xe)=>{const Se=Ad({timeout:N,style:B,easing:b},{mode:"enter"});ye.style.webkitTransition=n.transitions.create("-webkit-transform",{...Se}),ye.style.transition=n.transitions.create("transform",{...Se}),ye.style.webkitTransform="none",ye.style.transform="none",k&&k(ye,xe)}),H=Z(P),ae=Z(F),se=Z(ye=>{const xe=Ad({timeout:N,style:B,easing:b},{mode:"exit"});ye.style.webkitTransition=n.transitions.create("-webkit-transform",xe),ye.style.transition=n.transitions.create("transform",xe),Kb(g,ye,p),M&&M(ye)}),de=Z(ye=>{ye.style.webkitTransition="",ye.style.transition="",D&&D(ye)}),fe=ye=>{u&&u(U.current,ye)},Le=ee.useCallback(()=>{U.current&&Kb(g,U.current,p)},[g,p]);return ee.useEffect(()=>{if(S||g==="down"||g==="right")return;const ye=OP(()=>{U.current&&Kb(g,U.current,p)}),xe=zu(U.current);return xe.addEventListener("resize",ye),()=>{ye.clear(),xe.removeEventListener("resize",ye)}},[g,S,p]),ee.useEffect(()=>{S||Le()},[S,Le]),K.jsx($,{nodeRef:U,onEnter:oe,onEntered:H,onEntering:re,onExit:se,onExited:de,onExiting:ae,addEndListener:fe,appear:a,in:S,timeout:N,...V,children:(ye,{ownerState:xe,...Se})=>ee.cloneElement(f,{ref:X,style:{visibility:ye==="exited"&&!S?"hidden":void 0,...B,...f.props.style},...Se})})});function nie(e){return ti("MuiDrawer",e)}Kn("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Yj=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},iie=e=>{const{classes:t,anchor:r,variant:n}=e,i={root:["root",`anchor${Zr(r)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Zr(r)}`,n!=="temporary"&&`paperAnchorDocked${Zr(r)}`]};return ri(i,nie,t)},aie=Sr(WP,{name:"MuiDrawer",slot:"Root",overridesResolver:Yj})(jn(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),oie=Sr("div",{shouldForwardProp:Bs,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Yj})({flex:"0 0 auto"}),sie=Sr(Kc,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${Zr(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${Zr(r.anchor)}`]]}})(jn(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),Zj={left:"right",right:"left",top:"down",bottom:"up"};function rm(e){return["left","right"].includes(e)}function y0({direction:e},t){return e==="rtl"&&rm(t)?Zj[t]:t}const ZP=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiDrawer"}),i=Su(),o=V1(),u={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:f,children:p,className:g,elevation:b=16,hideBackdrop:S=!1,ModalProps:{BackdropProps:_,...P}={},onClose:k,open:M=!1,PaperProps:D={},SlideProps:F,TransitionComponent:B,transitionDuration:N=u,variant:$="temporary",slots:V={},slotProps:U={},...X}=n,Z=ee.useRef(!1);ee.useEffect(()=>{Z.current=!0},[]);const oe=y0({direction:o?"rtl":"ltr"},a),H={...n,anchor:a,elevation:b,open:M,variant:$,...X},ae=iie(H),se={slots:{transition:B,...V},slotProps:{paper:D,transition:F,...U,backdrop:Ly(U.backdrop||{...f,..._},{transitionDuration:N})}},[de,fe]=si("root",{ref:r,elementType:aie,className:cn(ae.root,ae.modal,g),shouldForwardComponentProp:!0,ownerState:H,externalForwardedProps:{...se,...X,...P},additionalProps:{open:M,onClose:k,hideBackdrop:S,slots:{backdrop:se.slots.backdrop},slotProps:{backdrop:se.slotProps.backdrop}}}),[Le,ye]=si("paper",{elementType:sie,shouldForwardComponentProp:!0,className:cn(ae.paper,D.className),ownerState:H,externalForwardedProps:se,additionalProps:{elevation:$==="temporary"?b:0,square:!0,...$==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[xe,Se]=si("docked",{elementType:oie,ref:r,className:cn(ae.root,ae.docked,g),ownerState:H,externalForwardedProps:se,additionalProps:X}),[Re,he]=si("transition",{elementType:rie,ownerState:H,externalForwardedProps:se,additionalProps:{in:M,direction:Zj[oe],timeout:N,appear:Z.current}}),Ee=K.jsx(Le,{...ye,children:p});if($==="permanent")return K.jsx(xe,{...Se,children:Ee});const we=K.jsx(Re,{...he,children:Ee});return $==="persistent"?K.jsx(xe,{...Se,children:we}):K.jsx(de,{...fe,children:we})});function lie(e){return ti("MuiFab",e)}const $D=Kn("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),uie=e=>{const{color:t,variant:r,classes:n,size:i}=e,o={root:["root",r,`size${Zr(i)}`,t==="inherit"?"colorInherit":t]},u=ri(o,lie,n);return{...n,...u}},cie=Sr(Nm,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Bs(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${Zr(r.size)}`],r.color==="inherit"&&t.colorInherit,t[Zr(r.size)],t[r.color]]}})(jn(({theme:e})=>({...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:e.palette.getContrastText?.(e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${$D.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})),jn(({theme:e})=>({variants:[...Object.entries(e.palette).filter(rl(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),jn(({theme:e})=>({[`&.${$D.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),Kj=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiFab"}),{children:i,className:o,color:u="default",component:a="button",disabled:f=!1,disableFocusRipple:p=!1,focusVisibleClassName:g,size:b="large",variant:S="circular",..._}=n,P={...n,color:u,component:a,disabled:f,disableFocusRipple:p,size:b,variant:S},k=uie(P);return K.jsx(cie,{className:cn(k.root,o),component:a,disabled:f,focusRipple:!p,focusVisibleClassName:cn(k.focusVisible,g),ownerState:P,ref:r,..._,classes:k,children:i})}),die=e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:i,size:o,hiddenLabel:u,multiline:a}=e,f={root:["root",!r&&"underline",n&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${Zr(o)}`,u&&"hiddenLabel",a&&"multiline"],input:["input"]},p=ri(f,Cre,t);return{...t,...p}},fie=Sr(gw,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...pw(e,t),!r.disableUnderline&&t.underline]}})(jn(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${Hp.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${Hp.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:u})=>!u.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Hp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Hp.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Hp.disabled}, .${Hp.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Hp.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(rl()).map(([u])=>({props:{disableUnderline:!1,color:u},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[u]?.main}`}}})),{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:12}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:12}},{props:({ownerState:u})=>u.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:u,size:a})=>u.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel&&u.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),hie=Sr(yw,{name:"MuiFilledInput",slot:"Input",overridesResolver:mw})(jn(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),KP=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:u,fullWidth:a=!1,hiddenLabel:f,inputComponent:p="input",multiline:g=!1,slotProps:b,slots:S={},type:_="text",...P}=n,k={...n,disableUnderline:i,fullWidth:a,inputComponent:p,multiline:g,type:_},M=die(n),D={root:{ownerState:k},input:{ownerState:k}},F=b??u?Yl(D,b??u):D,B=S.root??o.Root??fie,N=S.input??o.Input??hie;return K.jsx(HP,{slots:{root:B,input:N},slotProps:F,fullWidth:a,inputComponent:p,multiline:g,ref:r,type:_,...P,classes:M})});KP.muiName="Input";function pie(e){return ti("MuiFormControl",e)}Kn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const mie=e=>{const{classes:t,margin:r,fullWidth:n}=e,i={root:["root",r!=="none"&&`margin${Zr(r)}`,n&&"fullWidth"]};return ri(i,pie,t)},gie=Sr("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${Zr(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),vc=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiFormControl"}),{children:i,className:o,color:u="primary",component:a="div",disabled:f=!1,error:p=!1,focused:g,fullWidth:b=!1,hiddenLabel:S=!1,margin:_="none",required:P=!1,size:k="medium",variant:M="outlined",...D}=n,F={...n,color:u,component:a,disabled:f,error:p,fullWidth:b,hiddenLabel:S,margin:_,required:P,size:k,variant:M},B=mie(F),[N,$]=ee.useState(()=>{let de=!1;return i&&ee.Children.forEach(i,fe=>{if(!xy(fe,["Input","Select"]))return;const Le=xy(fe,["Select"])?fe.props.input:fe;Le&&bre(Le.props)&&(de=!0)}),de}),[V,U]=ee.useState(()=>{let de=!1;return i&&ee.Children.forEach(i,fe=>{xy(fe,["Input","Select"])&&(Ox(fe.props,!0)||Ox(fe.props.inputProps,!0))&&(de=!0)}),de}),[X,Z]=ee.useState(!1);f&&X&&Z(!1);const oe=g!==void 0&&!f?g:X;let re;ee.useRef(!1);const H=ee.useCallback(()=>{U(!0)},[]),ae=ee.useCallback(()=>{U(!1)},[]),se=ee.useMemo(()=>({adornedStart:N,setAdornedStart:$,color:u,disabled:f,error:p,filled:V,focused:oe,fullWidth:b,hiddenLabel:S,size:k,onBlur:()=>{Z(!1)},onFocus:()=>{Z(!0)},onEmpty:ae,onFilled:H,registerEffect:re,required:P,variant:M}),[N,u,f,p,V,oe,b,S,re,ae,H,P,k,M]);return K.jsx(UP.Provider,{value:se,children:K.jsx(gie,{as:a,ownerState:F,className:cn(B.root,o),ref:r,...D,children:i})})});function yie(e){return ti("MuiFormControlLabel",e)}const v0=Kn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),vie=e=>{const{classes:t,disabled:r,labelPlacement:n,error:i,required:o}=e,u={root:["root",r&&"disabled",`labelPlacement${Zr(n)}`,i&&"error",o&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",i&&"error"]};return ri(u,yie,t)},bie=Sr("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${v0.label}`]:t.label},t.root,t[`labelPlacement${Zr(r.labelPlacement)}`]]}})(jn(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${v0.disabled}`]:{cursor:"default"},[`& .${v0.label}`]:{[`&.${v0.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),_ie=Sr("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(jn(({theme:e})=>({[`&.${v0.error}`]:{color:(e.vars||e).palette.error.main}}))),f3=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiFormControlLabel"}),{checked:i,className:o,componentsProps:u={},control:a,disabled:f,disableTypography:p,inputRef:g,label:b,labelPlacement:S="end",name:_,onChange:P,required:k,slots:M={},slotProps:D={},value:F,...B}=n,N=Cf(),$=f??a.props.disabled??N?.disabled,V=k??a.props.required,U={disabled:$,required:V};["checked","name","onChange","value","inputRef"].forEach(de=>{typeof a.props[de]>"u"&&typeof n[de]<"u"&&(U[de]=n[de])});const X=_p({props:n,muiFormControl:N,states:["error"]}),Z={...n,disabled:$,labelPlacement:S,required:V,error:X.error},oe=vie(Z),re={slots:M,slotProps:{...u,...D}},[H,ae]=si("typography",{elementType:ns,externalForwardedProps:re,ownerState:Z});let se=b;return se!=null&&se.type!==ns&&!p&&(se=K.jsx(H,{component:"span",...ae,className:cn(oe.label,ae?.className),children:se})),K.jsxs(bie,{className:cn(oe.root,o),ownerState:Z,ref:r,...B,children:[ee.cloneElement(a,U),V?K.jsxs("div",{children:[se,K.jsxs(_ie,{ownerState:Z,"aria-hidden":!0,className:oe.asterisk,children:["","*"]})]}):se]})});function xie(e){return ti("MuiFormGroup",e)}Kn("MuiFormGroup",["root","row","error"]);const wie=e=>{const{classes:t,row:r,error:n}=e;return ri({root:["root",r&&"row",n&&"error"]},xie,t)},Sie=Sr("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Jj=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiFormGroup"}),{className:i,row:o=!1,...u}=n,a=Cf(),f=_p({props:n,muiFormControl:a,states:["error"]}),p={...n,row:o,error:f.error},g=wie(p);return K.jsx(Sie,{className:cn(g.root,i),ownerState:p,ref:r,...u})});function Cie(e){return ti("MuiFormHelperText",e)}const GD=Kn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var UD;const Eie=e=>{const{classes:t,contained:r,size:n,disabled:i,error:o,filled:u,focused:a,required:f}=e,p={root:["root",i&&"disabled",o&&"error",n&&`size${Zr(n)}`,r&&"contained",a&&"focused",u&&"filled",f&&"required"]};return ri(p,Cie,t)},Tie=Sr("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${Zr(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(jn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${GD.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${GD.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),Iie=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:u="p",disabled:a,error:f,filled:p,focused:g,margin:b,required:S,variant:_,...P}=n,k=Cf(),M=_p({props:n,muiFormControl:k,states:["variant","size","disabled","error","filled","focused","required"]}),D={...n,component:u,contained:M.variant==="filled"||M.variant==="outlined",variant:M.variant,size:M.size,disabled:M.disabled,error:M.error,filled:M.filled,focused:M.focused,required:M.required};delete D.ownerState;const F=Eie(D);return K.jsx(Tie,{as:u,className:cn(F.root,o),ref:r,...P,ownerState:D,children:i===" "?UD||(UD=K.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function Pie(e){return ti("MuiFormLabel",e)}const j0=Kn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Aie=e=>{const{classes:t,color:r,focused:n,disabled:i,error:o,filled:u,required:a}=e,f={root:["root",`color${Zr(r)}`,i&&"disabled",o&&"error",u&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return ri(f,Pie,t)},kie=Sr("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(jn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{[`&.${j0.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${j0.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${j0.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),Mie=Sr("span",{name:"MuiFormLabel",slot:"Asterisk"})(jn(({theme:e})=>({[`&.${j0.error}`]:{color:(e.vars||e).palette.error.main}}))),Qj=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiFormLabel"}),{children:i,className:o,color:u,component:a="label",disabled:f,error:p,filled:g,focused:b,required:S,..._}=n,P=Cf(),k=_p({props:n,muiFormControl:P,states:["color","required","focused","disabled","error","filled"]}),M={...n,color:k.color||"primary",component:a,disabled:k.disabled,error:k.error,filled:k.filled,focused:k.focused,required:k.required},D=Aie(M);return K.jsxs(kie,{as:a,ownerState:M,className:cn(D.root,o),ref:r,..._,children:[i,k.required&&K.jsxs(Mie,{ownerState:M,"aria-hidden":!0,className:D.asterisk,children:["","*"]})]})}),ih=qJ({createStyledComponent:Sr("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>li({props:e,name:"MuiGrid"}),useTheme:Su});function h3(e){return`scale(${e}, ${e**2})`}const Lie={entering:{opacity:1,transform:h3(1)},entered:{opacity:1,transform:"none"}},P5=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),o1=ee.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:o,easing:u,in:a,onEnter:f,onEntered:p,onEntering:g,onExit:b,onExited:S,onExiting:_,style:P,timeout:k="auto",TransitionComponent:M=Ac,...D}=t,F=nh(),B=ee.useRef(),N=Su(),$=ee.useRef(null),V=ao($,xh(o),r),U=de=>fe=>{if(de){const Le=$.current;fe===void 0?de(Le):de(Le,fe)}},X=U(g),Z=U((de,fe)=>{dw(de);const{duration:Le,delay:ye,easing:xe}=Ad({style:P,timeout:k,easing:u},{mode:"enter"});let Se;k==="auto"?(Se=N.transitions.getAutoHeightDuration(de.clientHeight),B.current=Se):Se=Le,de.style.transition=[N.transitions.create("opacity",{duration:Se,delay:ye}),N.transitions.create("transform",{duration:P5?Se:Se*.666,delay:ye,easing:xe})].join(","),f&&f(de,fe)}),oe=U(p),re=U(_),H=U(de=>{const{duration:fe,delay:Le,easing:ye}=Ad({style:P,timeout:k,easing:u},{mode:"exit"});let xe;k==="auto"?(xe=N.transitions.getAutoHeightDuration(de.clientHeight),B.current=xe):xe=fe,de.style.transition=[N.transitions.create("opacity",{duration:xe,delay:Le}),N.transitions.create("transform",{duration:P5?xe:xe*.666,delay:P5?Le:Le||xe*.333,easing:ye})].join(","),de.style.opacity=0,de.style.transform=h3(.75),b&&b(de)}),ae=U(S),se=de=>{k==="auto"&&F.start(B.current||0,de),n&&n($.current,de)};return K.jsx(M,{appear:i,in:a,nodeRef:$,onEnter:Z,onEntered:oe,onEntering:X,onExit:H,onExited:ae,onExiting:re,addEndListener:se,timeout:k==="auto"?null:k,...D,children:(de,{ownerState:fe,...Le})=>ee.cloneElement(o,{style:{opacity:0,transform:h3(.75),visibility:de==="exited"&&!a?"hidden":void 0,...Lie[de],...P,...o.props.style},ref:V,...Le})})});o1&&(o1.muiSupportAuto=!0);const Rie=e=>{const{classes:t,disableUnderline:r}=e,i=ri({root:["root",!r&&"underline"],input:["input"]},wre,t);return{...t,...i}},Die=Sr(gw,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...pw(e,t),!r.disableUnderline&&t.underline]}})(jn(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Vv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Vv.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Vv.disabled}, .${Vv.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Vv.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(rl()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),Oie=Sr(yw,{name:"MuiInput",slot:"Input",overridesResolver:mw})({}),JP=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:u,fullWidth:a=!1,inputComponent:f="input",multiline:p=!1,slotProps:g,slots:b={},type:S="text",..._}=n,P=Rie(n),M={root:{ownerState:{disableUnderline:i}}},D=g??u?Yl(g??u,M):M,F=b.root??o.Root??Die,B=b.input??o.Input??Oie;return K.jsx(HP,{slots:{root:F,input:B},slotProps:D,fullWidth:a,inputComponent:f,multiline:p,ref:r,type:S,..._,classes:P})});JP.muiName="Input";function Nie(e){return ti("MuiInputLabel",e)}Kn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Fie=e=>{const{classes:t,formControl:r,size:n,shrink:i,disableAnimation:o,variant:u,required:a}=e,f={root:["root",r&&"formControl",!o&&"animated",i&&"shrink",n&&n!=="medium"&&`size${Zr(n)}`,u],asterisk:[a&&"asterisk"]},p=ri(f,Nie,t);return{...t,...p}},Bie=Sr(Qj,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${j0.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(jn(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:n})=>t==="filled"&&r.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),np=ee.forwardRef(function(t,r){const n=li({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:o,shrink:u,variant:a,className:f,...p}=n,g=Cf();let b=u;typeof b>"u"&&g&&(b=g.filled||g.focused||g.adornedStart);const S=_p({props:n,muiFormControl:g,states:["size","variant","required","focused"]}),_={...n,disableAnimation:i,formControl:g,shrink:b,size:S.size,variant:S.variant,required:S.required,focused:S.focused},P=Fie(_);return K.jsx(Bie,{"data-shrink":b,ref:r,className:cn(P.root,f),...p,ownerState:_,classes:P})}),Yc=ee.createContext({});function zie(e){return ti("MuiList",e)}Kn("MuiList",["root","padding","dense","subheader"]);const jie=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return ri({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},zie,t)},qie=Sr("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),Od=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiList"}),{children:i,className:o,component:u="ul",dense:a=!1,disablePadding:f=!1,subheader:p,...g}=n,b=ee.useMemo(()=>({dense:a}),[a]),S={...n,component:u,dense:a,disablePadding:f},_=jie(S);return K.jsx(Yc.Provider,{value:b,children:K.jsxs(qie,{as:u,className:cn(_.root,o),ref:r,ownerState:S,...g,children:[p,i]})})});function Vie(e){return ti("MuiListItem",e)}Kn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function $ie(e){return ti("MuiListItemButton",e)}const Vg=Kn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Gie=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]},Uie=e=>{const{alignItems:t,classes:r,dense:n,disabled:i,disableGutters:o,divider:u,selected:a}=e,p=ri({root:["root",n&&"dense",!o&&"gutters",u&&"divider",i&&"disabled",t==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},$ie,r);return{...r,...p}},Hie=Sr(Nm,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Gie})(jn(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Vg.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${Vg.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${Vg.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${Vg.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Vg.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),eq=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:u="div",children:a,dense:f=!1,disableGutters:p=!1,divider:g=!1,focusVisibleClassName:b,selected:S=!1,className:_,...P}=n,k=ee.useContext(Yc),M=ee.useMemo(()=>({dense:f||k.dense||!1,alignItems:i,disableGutters:p}),[i,k.dense,f,p]),D=ee.useRef(null);Zl(()=>{o&&D.current&&D.current.focus()},[o]);const F={...n,alignItems:i,dense:M.dense,disableGutters:p,divider:g,selected:S},B=Uie(F),N=ao(D,r);return K.jsx(Yc.Provider,{value:M,children:K.jsx(Hie,{ref:N,href:P.href||P.to,component:(P.href||P.to)&&u==="div"?"button":u,focusVisibleClassName:cn(B.focusVisible,b),ownerState:F,className:cn(B.root,_),...P,classes:B,children:a})})});function Wie(e){return ti("MuiListItemSecondaryAction",e)}Kn("MuiListItemSecondaryAction",["root","disableGutters"]);const Xie=e=>{const{disableGutters:t,classes:r}=e;return ri({root:["root",t&&"disableGutters"]},Wie,r)},Yie=Sr("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),tq=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...o}=n,u=ee.useContext(Yc),a={...n,disableGutters:u.disableGutters},f=Xie(a);return K.jsx(Yie,{className:cn(f.root,i),ownerState:a,ref:r,...o})});tq.muiName="ListItemSecondaryAction";const Zie=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},Kie=e=>{const{alignItems:t,classes:r,dense:n,disableGutters:i,disablePadding:o,divider:u,hasSecondaryAction:a}=e;return ri({root:["root",n&&"dense",!i&&"gutters",!o&&"padding",u&&"divider",t==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},Vie,r)},Jie=Sr("div",{name:"MuiListItem",slot:"Root",overridesResolver:Zie})(jn(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${Vg.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Qie=Sr("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),ed=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiListItem"}),{alignItems:i="center",children:o,className:u,component:a,components:f={},componentsProps:p={},ContainerComponent:g="li",ContainerProps:{className:b,...S}={},dense:_=!1,disableGutters:P=!1,disablePadding:k=!1,divider:M=!1,secondaryAction:D,slotProps:F={},slots:B={},...N}=n,$=ee.useContext(Yc),V=ee.useMemo(()=>({dense:_||$.dense||!1,alignItems:i,disableGutters:P}),[i,$.dense,_,P]),U=ee.useRef(null),X=ee.Children.toArray(o),Z=X.length&&xy(X[X.length-1],["ListItemSecondaryAction"]),oe={...n,alignItems:i,dense:V.dense,disableGutters:P,disablePadding:k,divider:M,hasSecondaryAction:Z},re=Kie(oe),H=ao(U,r),ae=B.root||f.Root||Jie,se=F.root||p.root||{},de={className:cn(re.root,se.className,u),...N};let fe=a||"li";return Z?(fe=!de.component&&!a?"div":fe,g==="li"&&(fe==="li"?fe="div":de.component==="li"&&(de.component="div")),K.jsx(Yc.Provider,{value:V,children:K.jsxs(Qie,{as:g,className:cn(re.container,b),ref:H,ownerState:oe,...S,children:[K.jsx(ae,{...se,...!pf(ae)&&{as:fe,ownerState:{...oe,...se.ownerState}},...de,children:X}),X.pop()]})})):K.jsx(Yc.Provider,{value:V,children:K.jsxs(ae,{...se,as:fe,ref:H,...!pf(ae)&&{ownerState:{...oe,...se.ownerState}},...de,children:[X,D&&K.jsx(tq,{children:D})]})})});function eae(e){return ti("MuiListItemAvatar",e)}Kn("MuiListItemAvatar",["root","alignItemsFlexStart"]);const tae=e=>{const{alignItems:t,classes:r}=e;return ri({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},eae,r)},rae=Sr("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),rq=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiListItemAvatar"}),{className:i,...o}=n,u=ee.useContext(Yc),a={...n,alignItems:u.alignItems},f=tae(a);return K.jsx(rae,{className:cn(f.root,i),ownerState:a,ref:r,...o})});function nae(e){return ti("MuiListItemIcon",e)}const HD=Kn("MuiListItemIcon",["root","alignItemsFlexStart"]),iae=e=>{const{alignItems:t,classes:r}=e;return ri({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},nae,r)},aae=Sr("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(jn(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),s1=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiListItemIcon"}),{className:i,...o}=n,u=ee.useContext(Yc),a={...n,alignItems:u.alignItems},f=iae(a);return K.jsx(aae,{className:cn(f.root,i),ownerState:a,ref:r,...o})});function oae(e){return ti("MuiListItemText",e)}const cy=Kn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),sae=e=>{const{classes:t,inset:r,primary:n,secondary:i,dense:o}=e;return ri({root:["root",r&&"inset",o&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},oae,t)},lae=Sr("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${cy.primary}`]:t.primary},{[`& .${cy.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${xD.root}:where(& .${cy.primary})`]:{display:"block"},[`.${xD.root}:where(& .${cy.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Hc=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:u=!1,inset:a=!1,primary:f,primaryTypographyProps:p,secondary:g,secondaryTypographyProps:b,slots:S={},slotProps:_={},...P}=n,{dense:k}=ee.useContext(Yc);let M=f??i,D=g;const F={...n,disableTypography:u,inset:a,primary:!!M,secondary:!!D,dense:k},B=sae(F),N={slots:S,slotProps:{primary:p,secondary:b,..._}},[$,V]=si("root",{className:cn(B.root,o),elementType:lae,externalForwardedProps:{...N,...P},ownerState:F,ref:r}),[U,X]=si("primary",{className:B.primary,elementType:ns,externalForwardedProps:N,ownerState:F}),[Z,oe]=si("secondary",{className:B.secondary,elementType:ns,externalForwardedProps:N,ownerState:F});return M!=null&&M.type!==ns&&!u&&(M=K.jsx(U,{variant:k?"body2":"body1",component:X?.variant?void 0:"span",...X,children:M})),D!=null&&D.type!==ns&&!u&&(D=K.jsx(Z,{variant:"body2",color:"textSecondary",...oe,children:D})),K.jsxs($,{...V,children:[M,D]})});function A5(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function WD(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function nq(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function $v(e,t,r,n,i,o){let u=!1,a=i(e,t,t?r:!1);for(;a;){if(a===e.firstChild){if(u)return!1;u=!0}const f=n?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!nq(a,o)||f)a=i(e,a,r);else return a.focus(),!0}return!1}const uae=ee.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:u,className:a,disabledItemsFocusable:f=!1,disableListWrap:p=!1,onKeyDown:g,variant:b="selectedMenu",...S}=t,_=ee.useRef(null),P=ee.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Zl(()=>{i&&_.current.focus()},[i]),ee.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(B,{direction:N})=>{const $=!_.current.style.width;if(B.clientHeight<_.current.clientHeight&&$){const V=`${Wj(zu(B))}px`;_.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=V,_.current.style.width=`calc(100% + ${V})`}return _.current}}),[]);const k=B=>{const N=_.current,$=B.key;if(B.ctrlKey||B.metaKey||B.altKey){g&&g(B);return}const U=Uo(N).activeElement;if($==="ArrowDown")B.preventDefault(),$v(N,U,p,f,A5);else if($==="ArrowUp")B.preventDefault(),$v(N,U,p,f,WD);else if($==="Home")B.preventDefault(),$v(N,null,p,f,A5);else if($==="End")B.preventDefault(),$v(N,null,p,f,WD);else if($.length===1){const X=P.current,Z=$.toLowerCase(),oe=performance.now();X.keys.length>0&&(oe-X.lastTime>500?(X.keys=[],X.repeating=!0,X.previousKeyMatched=!0):X.repeating&&Z!==X.keys[0]&&(X.repeating=!1)),X.lastTime=oe,X.keys.push(Z);const re=U&&!X.repeating&&nq(U,X);X.previousKeyMatched&&(re||$v(N,U,!1,f,A5,X))?B.preventDefault():X.previousKeyMatched=!1}g&&g(B)},M=ao(_,r);let D=-1;ee.Children.forEach(u,(B,N)=>{if(!ee.isValidElement(B)){D===N&&(D+=1,D>=u.length&&(D=-1));return}B.props.disabled||(b==="selectedMenu"&&B.props.selected||D===-1)&&(D=N),D===N&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&(D+=1,D>=u.length&&(D=-1))});const F=ee.Children.map(u,(B,N)=>{if(N===D){const $={};return o&&($.autoFocus=!0),B.props.tabIndex===void 0&&b==="selectedMenu"&&($.tabIndex=0),ee.cloneElement(B,$)}return B});return K.jsx(Od,{role:"menu",ref:M,className:a,onKeyDown:k,tabIndex:i?0:-1,...S,children:F})});function cae(e){return ti("MuiPopover",e)}Kn("MuiPopover",["root","paper"]);function XD(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function YD(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function ZD(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Jb(e){return typeof e=="function"?e():e}const dae=e=>{const{classes:t}=e;return ri({root:["root"],paper:["paper"]},cae,t)},fae=Sr(WP,{name:"MuiPopover",slot:"Root"})({}),iq=Sr(Kc,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),hae=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:u={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:f="anchorEl",children:p,className:g,container:b,elevation:S=8,marginThreshold:_=16,open:P,PaperProps:k={},slots:M={},slotProps:D={},transformOrigin:F={vertical:"top",horizontal:"left"},TransitionComponent:B,transitionDuration:N="auto",TransitionProps:$={},disableScrollLock:V=!1,...U}=n,X=ee.useRef(),Z={...n,anchorOrigin:u,anchorReference:f,elevation:S,marginThreshold:_,transformOrigin:F,TransitionComponent:B,transitionDuration:N,TransitionProps:$},oe=dae(Z),re=ee.useCallback(()=>{if(f==="anchorPosition")return a;const Ke=Jb(o),ke=(Ke&&Ke.nodeType===1?Ke:Uo(X.current).body).getBoundingClientRect();return{top:ke.top+XD(ke,u.vertical),left:ke.left+YD(ke,u.horizontal)}},[o,u.horizontal,u.vertical,a,f]),H=ee.useCallback(Ke=>({vertical:XD(Ke,F.vertical),horizontal:YD(Ke,F.horizontal)}),[F.horizontal,F.vertical]),ae=ee.useCallback(Ke=>{const it={width:Ke.offsetWidth,height:Ke.offsetHeight},ke=H(it);if(f==="none")return{top:null,left:null,transformOrigin:ZD(ke)};const Nt=re();let st=Nt.top-ke.vertical,$e=Nt.left-ke.horizontal;const Zt=st+it.height,$t=$e+it.width,Wt=zu(Jb(o)),ht=Wt.innerHeight-_,sr=Wt.innerWidth-_;if(_!==null&&st<_){const cr=st-_;st-=cr,ke.vertical+=cr}else if(_!==null&&Zt>ht){const cr=Zt-ht;st-=cr,ke.vertical+=cr}if(_!==null&&$e<_){const cr=$e-_;$e-=cr,ke.horizontal+=cr}else if($t>sr){const cr=$t-sr;$e-=cr,ke.horizontal+=cr}return{top:`${Math.round(st)}px`,left:`${Math.round($e)}px`,transformOrigin:ZD(ke)}},[o,f,re,H,_]),[se,de]=ee.useState(P),fe=ee.useCallback(()=>{const Ke=X.current;if(!Ke)return;const it=ae(Ke);it.top!==null&&Ke.style.setProperty("top",it.top),it.left!==null&&(Ke.style.left=it.left),Ke.style.transformOrigin=it.transformOrigin,de(!0)},[ae]);ee.useEffect(()=>(V&&window.addEventListener("scroll",fe),()=>window.removeEventListener("scroll",fe)),[o,V,fe]);const Le=()=>{fe()},ye=()=>{de(!1)};ee.useEffect(()=>{P&&fe()}),ee.useImperativeHandle(i,()=>P?{updatePosition:()=>{fe()}}:null,[P,fe]),ee.useEffect(()=>{if(!P)return;const Ke=OP(()=>{fe()}),it=zu(Jb(o));return it.addEventListener("resize",Ke),()=>{Ke.clear(),it.removeEventListener("resize",Ke)}},[o,P,fe]);let xe=N;const Se={slots:{transition:B,...M},slotProps:{transition:$,paper:k,...D}},[Re,he]=si("transition",{elementType:o1,externalForwardedProps:Se,ownerState:Z,getSlotProps:Ke=>({...Ke,onEntering:(it,ke)=>{Ke.onEntering?.(it,ke),Le()},onExited:it=>{Ke.onExited?.(it),ye()}}),additionalProps:{appear:!0,in:P}});N==="auto"&&!Re.muiSupportAuto&&(xe=void 0);const Ee=b||(o?Uo(Jb(o)).body:void 0),[we,{slots:Ne,slotProps:Fe,...Xe}]=si("root",{ref:r,elementType:fae,externalForwardedProps:{...Se,...U},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:M.backdrop},slotProps:{backdrop:Ly(typeof D.backdrop=="function"?D.backdrop(Z):D.backdrop,{invisible:!0})},container:Ee,open:P},ownerState:Z,className:cn(oe.root,g)}),[Be,ot]=si("paper",{ref:X,className:oe.paper,elementType:iq,externalForwardedProps:Se,shouldForwardComponentProp:!0,additionalProps:{elevation:S,style:se?void 0:{opacity:0}},ownerState:Z});return K.jsx(we,{...Xe,...!pf(we)&&{slots:Ne,slotProps:Fe,disableScrollLock:V},children:K.jsx(Re,{...he,timeout:xe,children:K.jsx(Be,{...ot,children:p})})})});function pae(e){return ti("MuiMenu",e)}Kn("MuiMenu",["root","paper","list"]);const mae={vertical:"top",horizontal:"right"},gae={vertical:"top",horizontal:"left"},yae=e=>{const{classes:t}=e;return ri({root:["root"],paper:["paper"],list:["list"]},pae,t)},vae=Sr(hae,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),bae=Sr(iq,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),_ae=Sr(uae,{name:"MuiMenu",slot:"List"})({outline:0}),aq=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:u,disableAutoFocusItem:a=!1,MenuListProps:f={},onClose:p,open:g,PaperProps:b={},PopoverClasses:S,transitionDuration:_="auto",TransitionProps:{onEntering:P,...k}={},variant:M="selectedMenu",slots:D={},slotProps:F={},...B}=n,N=V1(),$={...n,autoFocus:i,disableAutoFocusItem:a,MenuListProps:f,onEntering:P,PaperProps:b,transitionDuration:_,TransitionProps:k,variant:M},V=yae($),U=i&&!a&&g,X=ee.useRef(null),Z=(xe,Se)=>{X.current&&X.current.adjustStyleForScrollbar(xe,{direction:N?"rtl":"ltr"}),P&&P(xe,Se)},oe=xe=>{xe.key==="Tab"&&(xe.preventDefault(),p&&p(xe,"tabKeyDown"))};let re=-1;ee.Children.map(o,(xe,Se)=>{ee.isValidElement(xe)&&(xe.props.disabled||(M==="selectedMenu"&&xe.props.selected||re===-1)&&(re=Se))});const H={slots:D,slotProps:{list:f,transition:k,paper:b,...F}},ae=sf({elementType:D.root,externalSlotProps:F.root,ownerState:$,className:[V.root,u]}),[se,de]=si("paper",{className:V.paper,elementType:bae,externalForwardedProps:H,shouldForwardComponentProp:!0,ownerState:$}),[fe,Le]=si("list",{className:cn(V.list,f.className),elementType:_ae,shouldForwardComponentProp:!0,externalForwardedProps:H,getSlotProps:xe=>({...xe,onKeyDown:Se=>{oe(Se),xe.onKeyDown?.(Se)}}),ownerState:$}),ye=typeof H.slotProps.transition=="function"?H.slotProps.transition($):H.slotProps.transition;return K.jsx(vae,{onClose:p,anchorOrigin:{vertical:"bottom",horizontal:N?"right":"left"},transformOrigin:N?mae:gae,slots:{root:D.root,paper:se,backdrop:D.backdrop,...D.transition&&{transition:D.transition}},slotProps:{root:ae,paper:de,backdrop:typeof F.backdrop=="function"?F.backdrop($):F.backdrop,transition:{...ye,onEntering:(...xe)=>{Z(...xe),ye?.onEntering?.(...xe)}}},open:g,ref:r,transitionDuration:_,ownerState:$,...B,classes:S,children:K.jsx(fe,{actions:X,autoFocus:i&&(re===-1||a),autoFocusItem:U,variant:M,...Le,children:o})})});function xae(e){return ti("MuiMenuItem",e)}const Gv=Kn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),wae=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},Sae=e=>{const{disabled:t,dense:r,divider:n,disableGutters:i,selected:o,classes:u}=e,f=ri({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",o&&"selected"]},xae,u);return{...u,...f}},Cae=Sr(Nm,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:wae})(jn(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Gv.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${Gv.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${Gv.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${Gv.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Gv.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${VD.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${VD.inset}`]:{marginLeft:52},[`& .${cy.root}`]:{marginTop:0,marginBottom:0},[`& .${cy.inset}`]:{paddingLeft:36},[`& .${HD.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${HD.root} svg`]:{fontSize:"1.25rem"}}}]}))),pm=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:u=!1,divider:a=!1,disableGutters:f=!1,focusVisibleClassName:p,role:g="menuitem",tabIndex:b,className:S,..._}=n,P=ee.useContext(Yc),k=ee.useMemo(()=>({dense:u||P.dense||!1,disableGutters:f}),[P.dense,u,f]),M=ee.useRef(null);Zl(()=>{i&&M.current&&M.current.focus()},[i]);const D={...n,dense:k.dense,divider:a,disableGutters:f},F=Sae(n),B=ao(M,r);let N;return n.disabled||(N=b!==void 0?b:-1),K.jsx(Yc.Provider,{value:k,children:K.jsx(Cae,{ref:B,role:g,tabIndex:N,component:o,focusVisibleClassName:cn(F.focusVisible,p),className:cn(F.root,S),..._,ownerState:D,classes:F})})});function Eae(e){return ti("MuiNativeSelect",e)}const QP=Kn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Tae=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${Zr(r)}`,o&&"iconOpen",n&&"disabled"]};return ri(a,Eae,t)},oq=Sr("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${QP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Iae=Sr(oq,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Bs,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${QP.multiple}`]:t.multiple}]}})({}),sq=Sr("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${QP.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Pae=Sr(sq,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${Zr(r.variant)}`],r.open&&t.iconOpen]}})({}),Aae=ee.forwardRef(function(t,r){const{className:n,disabled:i,error:o,IconComponent:u,inputRef:a,variant:f="standard",...p}=t,g={...t,disabled:i,variant:f,error:o},b=Tae(g);return K.jsxs(ee.Fragment,{children:[K.jsx(Iae,{ownerState:g,className:cn(b.select,n),disabled:i,ref:a||r,...p}),t.multiple?null:K.jsx(Pae,{as:u,ownerState:g,className:b.icon})]})});function kae(e){const{children:t,defer:r=!1,fallback:n=null}=e,[i,o]=ee.useState(!1);return Zl(()=>{r||o(!0)},[r]),ee.useEffect(()=>{r&&o(!0)},[r]),i?t:n}var KD;const Mae=Sr("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Bs})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Lae=Sr("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Bs})(jn(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function Rae(e){const{children:t,classes:r,className:n,label:i,notched:o,...u}=e,a=i!=null&&i!=="",f={...e,notched:o,withLabel:a};return K.jsx(Mae,{"aria-hidden":!0,className:n,ownerState:f,...u,children:K.jsx(Lae,{ownerState:f,children:a?K.jsx("span",{children:i}):KD||(KD=K.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const Dae=e=>{const{classes:t}=e,n=ri({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Sre,t);return{...t,...n}},Oae=Sr(gw,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:pw})(jn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${nf.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${nf.focused} .${nf.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(rl()).map(([r])=>({props:{color:r},style:{[`&.${nf.focused} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${nf.error} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${nf.disabled} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:n})=>r.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),Nae=Sr(Rae,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(jn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),Fae=Sr(yw,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:mw})(jn(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),vw=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:u="input",label:a,multiline:f=!1,notched:p,slots:g={},slotProps:b={},type:S="text",..._}=n,P=Dae(n),k=Cf(),M=_p({props:n,muiFormControl:k,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),D={...n,color:M.color||"primary",disabled:M.disabled,error:M.error,focused:M.focused,formControl:k,fullWidth:o,hiddenLabel:M.hiddenLabel,multiline:f,size:M.size,type:S},F=g.root??i.Root??Oae,B=g.input??i.Input??Fae,[N,$]=si("notchedOutline",{elementType:Nae,className:P.notchedOutline,shouldForwardComponentProp:!0,ownerState:D,externalForwardedProps:{slots:g,slotProps:b},additionalProps:{label:a!=null&&a!==""&&M.required?K.jsxs(ee.Fragment,{children:[a,"","*"]}):a}});return K.jsx(HP,{slots:{root:F,input:B},slotProps:b,renderSuffix:V=>K.jsx(N,{...$,notched:typeof p<"u"?p:!!(V.startAdornment||V.filled||V.focused)}),fullWidth:o,inputComponent:u,multiline:f,ref:r,type:S,..._,classes:{...P,notchedOutline:null}})});vw.muiName="Input";const Bae=Ei(K.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),zae=Ei(K.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),jae=Sr("span",{name:"MuiRadioButtonIcon",shouldForwardProp:Bs})({position:"relative",display:"flex"}),qae=Sr(Bae,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Vae=Sr(zae,{name:"MuiRadioButtonIcon"})(jn(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function lq(e){const{checked:t=!1,classes:r={},fontSize:n}=e,i={...e,checked:t};return K.jsxs(jae,{className:r.root,ownerState:i,children:[K.jsx(qae,{fontSize:n,className:r.background,ownerState:i}),K.jsx(Vae,{fontSize:n,className:r.dot,ownerState:i})]})}const uq=ee.createContext(void 0);function $ae(){return ee.useContext(uq)}function Gae(e){return ti("MuiRadio",e)}const JD=Kn("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Uae=e=>{const{classes:t,color:r,size:n}=e,i={root:["root",`color${Zr(r)}`,n!=="medium"&&`size${Zr(n)}`]};return{...t,...ri(i,Gae,t)}},Hae=Sr(Hj,{shouldForwardProp:e=>Bs(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size!=="medium"&&t[`size${Zr(r.size)}`],t[`color${Zr(r.color)}`]]}})(jn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${JD.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${JD.checked}`]:{color:(e.vars||e).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Wae(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const Xae=K.jsx(lq,{checked:!0}),Yae=K.jsx(lq,{}),QD=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiRadio"}),{checked:i,checkedIcon:o=Xae,color:u="primary",icon:a=Yae,name:f,onChange:p,size:g="medium",className:b,disabled:S,disableRipple:_=!1,slots:P={},slotProps:k={},inputProps:M,...D}=n,F=Cf();let B=S;F&&typeof B>"u"&&(B=F.disabled),B??=!1;const N={...n,disabled:B,disableRipple:_,color:u,size:g},$=Uae(N),V=$ae();let U=i;const X=JT(p,V&&V.onChange);let Z=f;V&&(typeof U>"u"&&(U=Wae(V.value,n.value)),typeof Z>"u"&&(Z=V.name));const oe=k.input??M,[re,H]=si("root",{ref:r,elementType:Hae,className:cn($.root,b),shouldForwardComponentProp:!0,externalForwardedProps:{slots:P,slotProps:k,...D},getSlotProps:ae=>({...ae,onChange:(se,...de)=>{ae.onChange?.(se,...de),X(se,...de)}}),ownerState:N,additionalProps:{type:"radio",icon:ee.cloneElement(a,{fontSize:a.props.fontSize??g}),checkedIcon:ee.cloneElement(o,{fontSize:o.props.fontSize??g}),disabled:B,name:Z,checked:U,slots:P,slotProps:{input:typeof oe=="function"?oe(N):oe}}});return K.jsx(re,{...H,classes:$})});function Zae(e){return ti("MuiRadioGroup",e)}Kn("MuiRadioGroup",["root","row","error"]);const Kae=e=>{const{classes:t,row:r,error:n}=e;return ri({root:["root",r&&"row",n&&"error"]},Zae,t)},Jae=ee.forwardRef(function(t,r){const{actions:n,children:i,className:o,defaultValue:u,name:a,onChange:f,value:p,...g}=t,b=ee.useRef(null),S=Kae(t),[_,P]=lp({controlled:p,default:u,name:"RadioGroup"});ee.useImperativeHandle(n,()=>({focus:()=>{let F=b.current.querySelector("input:not(:disabled):checked");F||(F=b.current.querySelector("input:not(:disabled)")),F&&F.focus()}}),[]);const k=ao(r,b),M=yp(a),D=ee.useMemo(()=>({name:M,onChange(F){P(F.target.value),f&&f(F,F.target.value)},value:_}),[M,f,P,_]);return K.jsx(uq.Provider,{value:D,children:K.jsx(Jj,{role:"radiogroup",ref:k,className:cn(S.root,o),...g,children:i})})}),Qae={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function cq(e){return ti("MuiSelect",e)}const Uv=Kn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var eO;const eoe=Sr(oq,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${Uv.select}`]:t.select},{[`&.${Uv.select}`]:t[r.variant]},{[`&.${Uv.error}`]:t.error},{[`&.${Uv.multiple}`]:t.multiple}]}})({[`&.${Uv.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),toe=Sr(sq,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${Zr(r.variant)}`],r.open&&t.iconOpen]}})({}),roe=Sr("input",{shouldForwardProp:e=>sw(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function tO(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function noe(e){return e==null||typeof e=="string"&&!e.trim()}const ioe=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${Zr(r)}`,o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return ri(a,cq,t)},aoe=ee.forwardRef(function(t,r){const{"aria-describedby":n,"aria-label":i,autoFocus:o,autoWidth:u,children:a,className:f,defaultOpen:p,defaultValue:g,disabled:b,displayEmpty:S,error:_=!1,IconComponent:P,inputRef:k,labelId:M,MenuProps:D={},multiple:F,name:B,onBlur:N,onChange:$,onClose:V,onFocus:U,onOpen:X,open:Z,readOnly:oe,renderValue:re,required:H,SelectDisplayProps:ae={},tabIndex:se,type:de,value:fe,variant:Le="standard",...ye}=t,[xe,Se]=lp({controlled:fe,default:g,name:"Select"}),[Re,he]=lp({controlled:Z,default:p,name:"Select"}),Ee=ee.useRef(null),we=ee.useRef(null),[Ne,Fe]=ee.useState(null),{current:Xe}=ee.useRef(Z!=null),[Be,ot]=ee.useState(),Ke=ao(r,k),it=ee.useCallback(ct=>{we.current=ct,ct&&Fe(ct)},[]),ke=Ne?.parentNode;ee.useImperativeHandle(Ke,()=>({focus:()=>{we.current.focus()},node:Ee.current,value:xe}),[xe]),ee.useEffect(()=>{p&&Re&&Ne&&!Xe&&(ot(u?null:ke.clientWidth),we.current.focus())},[Ne,u]),ee.useEffect(()=>{o&&we.current.focus()},[o]),ee.useEffect(()=>{if(!M)return;const ct=Uo(we.current).getElementById(M);if(ct){const Jt=()=>{getSelection().isCollapsed&&we.current.focus()};return ct.addEventListener("click",Jt),()=>{ct.removeEventListener("click",Jt)}}},[M]);const Nt=(ct,Jt)=>{ct?X&&X(Jt):V&&V(Jt),Xe||(ot(u?null:ke.clientWidth),he(ct))},st=ct=>{ct.button===0&&(ct.preventDefault(),we.current.focus(),Nt(!0,ct))},$e=ct=>{Nt(!1,ct)},Zt=ee.Children.toArray(a),$t=ct=>{const Jt=Zt.find(Vt=>Vt.props.value===ct.target.value);Jt!==void 0&&(Se(Jt.props.value),$&&$(ct,Jt))},Wt=ct=>Jt=>{let Vt;if(Jt.currentTarget.hasAttribute("tabindex")){if(F){Vt=Array.isArray(xe)?xe.slice():[];const xr=xe.indexOf(ct.props.value);xr===-1?Vt.push(ct.props.value):Vt.splice(xr,1)}else Vt=ct.props.value;if(ct.props.onClick&&ct.props.onClick(Jt),xe!==Vt&&(Se(Vt),$)){const xr=Jt.nativeEvent||Jt,_r=new xr.constructor(xr.type,xr);Object.defineProperty(_r,"target",{writable:!0,value:{value:Vt,name:B}}),$(_r,ct)}F||Nt(!1,Jt)}},ht=ct=>{oe||[" ","ArrowUp","ArrowDown","Enter"].includes(ct.key)&&(ct.preventDefault(),Nt(!0,ct))},sr=Ne!==null&&Re,cr=ct=>{!sr&&N&&(Object.defineProperty(ct,"target",{writable:!0,value:{value:xe,name:B}}),N(ct))};delete ye["aria-invalid"];let ir,br;const yr=[];let Kt=!1;(Ox({value:xe})||S)&&(re?ir=re(xe):Kt=!0);const at=Zt.map(ct=>{if(!ee.isValidElement(ct))return null;let Jt;if(F){if(!Array.isArray(xe))throw new Error(fh(2));Jt=xe.some(Vt=>tO(Vt,ct.props.value)),Jt&&Kt&&yr.push(ct.props.children)}else Jt=tO(xe,ct.props.value),Jt&&Kt&&(br=ct.props.children);return ee.cloneElement(ct,{"aria-selected":Jt?"true":"false",onClick:Wt(ct),onKeyUp:Vt=>{Vt.key===" "&&Vt.preventDefault(),ct.props.onKeyUp&&ct.props.onKeyUp(Vt)},role:"option",selected:Jt,value:void 0,"data-value":ct.props.value})});Kt&&(F?yr.length===0?ir=null:ir=yr.reduce((ct,Jt,Vt)=>(ct.push(Jt),Vt<yr.length-1&&ct.push(", "),ct),[]):ir=br);let Ae=Be;!u&&Xe&&Ne&&(Ae=ke.clientWidth);let _e;typeof se<"u"?_e=se:_e=b?null:0;const je=ae.id||(B?`mui-component-select-${B}`:void 0),Ge={...t,variant:Le,value:xe,open:sr,error:_},He=ioe(Ge),Dt={...D.PaperProps,...typeof D.slotProps?.paper=="function"?D.slotProps.paper(Ge):D.slotProps?.paper},St={...D.MenuListProps,...typeof D.slotProps?.list=="function"?D.slotProps.list(Ge):D.slotProps?.list},yt=yp();return K.jsxs(ee.Fragment,{children:[K.jsx(eoe,{as:"div",ref:it,tabIndex:_e,role:"combobox","aria-controls":sr?yt:void 0,"aria-disabled":b?"true":void 0,"aria-expanded":sr?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[M,je].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":H?"true":void 0,"aria-invalid":_?"true":void 0,onKeyDown:ht,onMouseDown:b||oe?null:st,onBlur:cr,onFocus:U,...ae,ownerState:Ge,className:cn(ae.className,He.select,f),id:je,children:noe(ir)?eO||(eO=K.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ir}),K.jsx(roe,{"aria-invalid":_,value:Array.isArray(xe)?xe.join(","):xe,name:B,ref:Ee,"aria-hidden":!0,onChange:$t,tabIndex:-1,disabled:b,className:He.nativeInput,autoFocus:o,required:H,...ye,ownerState:Ge}),K.jsx(toe,{as:P,className:He.icon,ownerState:Ge}),K.jsx(aq,{id:`menu-${B||""}`,anchorEl:ke,open:sr,onClose:$e,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...D,slotProps:{...D.slotProps,list:{"aria-labelledby":M,role:"listbox","aria-multiselectable":F?"true":void 0,disableListWrap:!0,id:yt,...St},paper:{...Dt,style:{minWidth:Ae,...Dt!=null?Dt.style:null}}},children:at})]})}),ooe=e=>{const{classes:t}=e,n=ri({root:["root"]},cq,t);return{...t,...n}},eA={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>Bs(e)&&e!=="variant"},soe=Sr(JP,eA)(""),loe=Sr(vw,eA)(""),uoe=Sr(KP,eA)(""),ip=ee.forwardRef(function(t,r){const n=li({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:u={},className:a,defaultOpen:f=!1,displayEmpty:p=!1,IconComponent:g=Ere,id:b,input:S,inputProps:_,label:P,labelId:k,MenuProps:M,multiple:D=!1,native:F=!1,onClose:B,onOpen:N,open:$,renderValue:V,SelectDisplayProps:U,variant:X="outlined",...Z}=n,oe=F?Aae:aoe,re=Cf(),H=_p({props:n,muiFormControl:re,states:["variant","error"]}),ae=H.variant||X,se={...n,variant:ae,classes:u},de=ooe(se),{root:fe,...Le}=de,ye=S||{standard:K.jsx(soe,{ownerState:se}),outlined:K.jsx(loe,{label:P,ownerState:se}),filled:K.jsx(uoe,{ownerState:se})}[ae],xe=ao(r,xh(ye));return K.jsx(ee.Fragment,{children:ee.cloneElement(ye,{inputComponent:oe,inputProps:{children:o,error:H.error,IconComponent:g,variant:ae,type:void 0,multiple:D,...F?{id:b}:{autoWidth:i,defaultOpen:f,displayEmpty:p,labelId:k,MenuProps:M,onClose:B,onOpen:N,open:$,renderValue:V,SelectDisplayProps:{id:b,...U}},..._,classes:_?Yl(Le,_.classes):Le,...S?S.props.inputProps:{}},...(D&&F||p)&&ae==="outlined"?{notched:!0}:{},ref:xe,className:cn(ye.props.className,a,de.root),...!S&&{variant:ae},...Z})})});ip.muiName="Select";function coe(e,t,r=(n,i)=>n===i){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}const doe=2;function Ig(e,t,r,n,i){return r===1?Math.min(e+t,i):Math.max(e-t,n)}function dq(e,t){return e-t}function rO(e,t){const{index:r}=e.reduce((n,i,o)=>{const u=Math.abs(t-i);return n===null||u<n.distance||u===n.distance?{distance:u,index:o}:n},null)??{};return r}function Qb(e,t){if(t.current!==void 0&&e.changedTouches){const r=e;for(let n=0;n<r.changedTouches.length;n+=1){const i=r.changedTouches[n];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Nx(e,t,r){return(e-t)*100/(r-t)}function foe(e,t,r){return(r-t)*e+t}function hoe(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),n=r[0].split(".")[1];return(n?n.length:0)+parseInt(r[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function poe(e,t,r){const n=Math.round((e-r)/t)*t+r;return Number(n.toFixed(hoe(t)))}function nO({values:e,newValue:t,index:r}){const n=e.slice();return n[r]=t,n.sort(dq)}function e_({sliderRef:e,activeIndex:t,setActive:r}){const n=Uo(e.current);(!e.current?.contains(n.activeElement)||Number(n?.activeElement?.getAttribute("data-index"))!==t)&&e.current?.querySelector(`[type="range"][data-index="${t}"]`).focus(),r&&r(t)}function t_(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?coe(e,t):!1}const moe={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},goe=e=>e;let r_;function iO(){return r_===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?r_=CSS.supports("touch-action","none"):r_=!0),r_}function yoe(e){const{"aria-labelledby":t,defaultValue:r,disabled:n=!1,disableSwap:i=!1,isRtl:o=!1,marks:u=!1,max:a=100,min:f=0,name:p,onChange:g,onChangeCommitted:b,orientation:S="horizontal",rootRef:_,scale:P=goe,step:k=1,shiftStep:M=10,tabIndex:D,value:F}=e,B=ee.useRef(void 0),[N,$]=ee.useState(-1),[V,U]=ee.useState(-1),[X,Z]=ee.useState(!1),oe=ee.useRef(0),re=ee.useRef(null),[H,ae]=lp({controlled:F,default:r??f,name:"Slider"}),se=g&&((Kt,at,Ae)=>{const _e=Kt.nativeEvent||Kt,je=new _e.constructor(_e.type,_e);Object.defineProperty(je,"target",{writable:!0,value:{value:at,name:p}}),re.current=at,g(je,at,Ae)}),de=Array.isArray(H);let fe=de?H.slice().sort(dq):[H];fe=fe.map(Kt=>Kt==null?f:tm(Kt,f,a));const Le=u===!0&&k!==null?[...Array(Math.floor((a-f)/k)+1)].map((Kt,at)=>({value:f+k*at})):u||[],ye=Le.map(Kt=>Kt.value),[xe,Se]=ee.useState(-1),Re=ee.useRef(null),he=ao(_,Re),Ee=Kt=>at=>{const Ae=Number(at.currentTarget.getAttribute("data-index"));Ry(at.target)&&Se(Ae),U(Ae),Kt?.onFocus?.(at)},we=Kt=>at=>{Ry(at.target)||Se(-1),U(-1),Kt?.onBlur?.(at)},Ne=(Kt,at)=>{const Ae=Number(Kt.currentTarget.getAttribute("data-index")),_e=fe[Ae],je=ye.indexOf(_e);let Ge=at;if(Le&&k==null){const He=ye[ye.length-1];Ge>=He?Ge=He:Ge<=ye[0]?Ge=ye[0]:Ge=Ge<_e?ye[je-1]:ye[je+1]}if(Ge=tm(Ge,f,a),de){i&&(Ge=tm(Ge,fe[Ae-1]||-1/0,fe[Ae+1]||1/0));const He=Ge;Ge=nO({values:fe,newValue:Ge,index:Ae});let Dt=Ae;i||(Dt=Ge.indexOf(He)),e_({sliderRef:Re,activeIndex:Dt})}ae(Ge),Se(Ae),se&&!t_(Ge,H)&&se(Kt,Ge,Ae),b&&b(Kt,re.current??Ge)},Fe=Kt=>at=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(at.key)){at.preventDefault();const Ae=Number(at.currentTarget.getAttribute("data-index")),_e=fe[Ae];let je=null;if(k!=null){const Ge=at.shiftKey?M:k;switch(at.key){case"ArrowUp":je=Ig(_e,Ge,1,f,a);break;case"ArrowRight":je=Ig(_e,Ge,o?-1:1,f,a);break;case"ArrowDown":je=Ig(_e,Ge,-1,f,a);break;case"ArrowLeft":je=Ig(_e,Ge,o?1:-1,f,a);break;case"PageUp":je=Ig(_e,M,1,f,a);break;case"PageDown":je=Ig(_e,M,-1,f,a);break;case"Home":je=f;break;case"End":je=a;break}}else if(Le){const Ge=ye[ye.length-1],He=ye.indexOf(_e),Dt=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],St=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Dt.includes(at.key)?He===0?je=ye[0]:je=ye[He-1]:St.includes(at.key)&&(He===ye.length-1?je=Ge:je=ye[He+1])}je!=null&&Ne(at,je)}Kt?.onKeyDown?.(at)};Zl(()=>{n&&Re.current.contains(document.activeElement)&&document.activeElement?.blur()},[n]),n&&N!==-1&&$(-1),n&&xe!==-1&&Se(-1);const Xe=Kt=>at=>{Kt.onChange?.(at),Ne(at,at.target.valueAsNumber)},Be=ee.useRef(void 0);let ot=S;o&&S==="horizontal"&&(ot+="-reverse");const Ke=({finger:Kt,move:at=!1})=>{const{current:Ae}=Re,{width:_e,height:je,bottom:Ge,left:He}=Ae.getBoundingClientRect();let Dt;ot.startsWith("vertical")?Dt=(Ge-Kt.y)/je:Dt=(Kt.x-He)/_e,ot.includes("-reverse")&&(Dt=1-Dt);let St;if(St=foe(Dt,f,a),k)St=poe(St,k,f);else{const ct=rO(ye,St);St=ye[ct]}St=tm(St,f,a);let yt=0;if(de){at?yt=Be.current:yt=rO(fe,St),i&&(St=tm(St,fe[yt-1]||-1/0,fe[yt+1]||1/0));const ct=St;St=nO({values:fe,newValue:St,index:yt}),i&&at||(yt=St.indexOf(ct),Be.current=yt)}return{newValue:St,activeIndex:yt}},it=kl(Kt=>{const at=Qb(Kt,B);if(!at)return;if(oe.current+=1,Kt.type==="mousemove"&&Kt.buttons===0){ke(Kt);return}const{newValue:Ae,activeIndex:_e}=Ke({finger:at,move:!0});e_({sliderRef:Re,activeIndex:_e,setActive:$}),ae(Ae),!X&&oe.current>doe&&Z(!0),se&&!t_(Ae,H)&&se(Kt,Ae,_e)}),ke=kl(Kt=>{const at=Qb(Kt,B);if(Z(!1),!at)return;const{newValue:Ae}=Ke({finger:at,move:!0});$(-1),Kt.type==="touchend"&&U(-1),b&&b(Kt,re.current??Ae),B.current=void 0,st()}),Nt=kl(Kt=>{if(n)return;iO()||Kt.preventDefault();const at=Kt.changedTouches[0];at!=null&&(B.current=at.identifier);const Ae=Qb(Kt,B);if(Ae!==!1){const{newValue:je,activeIndex:Ge}=Ke({finger:Ae});e_({sliderRef:Re,activeIndex:Ge,setActive:$}),ae(je),se&&!t_(je,H)&&se(Kt,je,Ge)}oe.current=0;const _e=Uo(Re.current);_e.addEventListener("touchmove",it,{passive:!0}),_e.addEventListener("touchend",ke,{passive:!0})}),st=ee.useCallback(()=>{const Kt=Uo(Re.current);Kt.removeEventListener("mousemove",it),Kt.removeEventListener("mouseup",ke),Kt.removeEventListener("touchmove",it),Kt.removeEventListener("touchend",ke)},[ke,it]);ee.useEffect(()=>{const{current:Kt}=Re;return Kt.addEventListener("touchstart",Nt,{passive:iO()}),()=>{Kt.removeEventListener("touchstart",Nt),st()}},[st,Nt]),ee.useEffect(()=>{n&&st()},[n,st]);const $e=Kt=>at=>{if(Kt.onMouseDown?.(at),n||at.defaultPrevented||at.button!==0)return;at.preventDefault();const Ae=Qb(at,B);if(Ae!==!1){const{newValue:je,activeIndex:Ge}=Ke({finger:Ae});e_({sliderRef:Re,activeIndex:Ge,setActive:$}),ae(je),se&&!t_(je,H)&&se(at,je,Ge)}oe.current=0;const _e=Uo(Re.current);_e.addEventListener("mousemove",it,{passive:!0}),_e.addEventListener("mouseup",ke)},Zt=Nx(de?fe[0]:f,f,a),$t=Nx(fe[fe.length-1],f,a)-Zt,Wt=(Kt={})=>{const at=fm(Kt),Ae={onMouseDown:$e(at||{})},_e={...at,...Ae};return{...Kt,ref:he,..._e}},ht=Kt=>at=>{Kt.onMouseOver?.(at);const Ae=Number(at.currentTarget.getAttribute("data-index"));U(Ae)},sr=Kt=>at=>{Kt.onMouseLeave?.(at),U(-1)},cr=(Kt={})=>{const at=fm(Kt),Ae={onMouseOver:ht(at||{}),onMouseLeave:sr(at||{})};return{...Kt,...at,...Ae}},ir=Kt=>({pointerEvents:N!==-1&&N!==Kt?"none":void 0});let br;return S==="vertical"&&(br=o?"vertical-rl":"vertical-lr"),{active:N,axis:ot,axisProps:moe,dragging:X,focusedThumbIndex:xe,getHiddenInputProps:(Kt={})=>{const at=fm(Kt),Ae={onChange:Xe(at||{}),onFocus:Ee(at||{}),onBlur:we(at||{}),onKeyDown:Fe(at||{})},_e={...at,...Ae};return{tabIndex:D,"aria-labelledby":t,"aria-orientation":S,"aria-valuemax":P(a),"aria-valuemin":P(f),name:p,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:n,...Kt,..._e,style:{...Qae,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:br}}},getRootProps:Wt,getThumbProps:cr,marks:Le,open:V,range:de,rootRef:he,trackLeap:$t,trackOffset:Zt,values:fe,getThumbStyle:ir}}const voe=e=>!e||!pf(e);function boe(e){return ti("MuiSlider",e)}const Wc=Kn("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),_oe=e=>{const{open:t}=e;return{offset:cn(t&&Wc.valueLabelOpen),circle:Wc.valueLabelCircle,label:Wc.valueLabelLabel}};function xoe(e){const{children:t,className:r,value:n}=e,i=_oe(e);return t?ee.cloneElement(t,{className:t.props.className},K.jsxs(ee.Fragment,{children:[t.props.children,K.jsx("span",{className:cn(i.offset,r),"aria-hidden":!0,children:K.jsx("span",{className:i.circle,children:K.jsx("span",{className:i.label,children:n})})})]})):null}function aO(e){return e}const woe=Sr("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${Zr(r.color)}`],r.size!=="medium"&&t[`size${Zr(r.size)}`],r.marked&&t.marked,r.orientation==="vertical"&&t.vertical,r.track==="inverted"&&t.trackInverted,r.track===!1&&t.trackFalse]}})(jn(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Wc.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Wc.dragging}`]:{[`& .${Wc.thumb}, & .${Wc.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Soe=Sr("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Coe=Sr("span",{name:"MuiSlider",slot:"Track"})(jn(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),Eoe=Sr("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.thumb,t[`thumbColor${Zr(r.color)}`],r.size!=="medium"&&t[`thumbSize${Zr(r.size)}`]]}})(jn(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Wc.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(rl()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${Wc.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Wc.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]}))),Toe=Sr(xoe,{name:"MuiSlider",slot:"ValueLabel"})(jn(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Wc.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Wc.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Ioe=Sr("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>sw(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:r}=e;return[t.mark,r&&t.markActive]}})(jn(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),Poe=Sr("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>sw(e)&&e!=="markLabelActive"})(jn(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),Aoe=e=>{const{disabled:t,dragging:r,marked:n,orientation:i,track:o,classes:u,color:a,size:f}=e,p={root:["root",t&&"disabled",r&&"dragging",n&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",a&&`color${Zr(a)}`,f&&`size${Zr(f)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",f&&`thumbSize${Zr(f)}`,a&&`thumbColor${Zr(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ri(p,boe,u)},koe=({children:e})=>e,tA=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiSlider"}),i=V1(),{"aria-label":o,"aria-valuetext":u,"aria-labelledby":a,component:f="span",components:p={},componentsProps:g={},color:b="primary",classes:S,className:_,disableSwap:P=!1,disabled:k=!1,getAriaLabel:M,getAriaValueText:D,marks:F=!1,max:B=100,min:N=0,name:$,onChange:V,onChangeCommitted:U,orientation:X="horizontal",shiftStep:Z=10,size:oe="medium",step:re=1,scale:H=aO,slotProps:ae,slots:se,tabIndex:de,track:fe="normal",value:Le,valueLabelDisplay:ye="off",valueLabelFormat:xe=aO,...Se}=n,Re={...n,isRtl:i,max:B,min:N,classes:S,disabled:k,disableSwap:P,orientation:X,marks:F,color:b,size:oe,step:re,shiftStep:Z,scale:H,track:fe,valueLabelDisplay:ye,valueLabelFormat:xe},{axisProps:he,getRootProps:Ee,getHiddenInputProps:we,getThumbProps:Ne,open:Fe,active:Xe,axis:Be,focusedThumbIndex:ot,range:Ke,dragging:it,marks:ke,values:Nt,trackOffset:st,trackLeap:$e,getThumbStyle:Zt}=yoe({...Re,rootRef:r});Re.marked=ke.length>0&&ke.some(Lr=>Lr.label),Re.dragging=it,Re.focusedThumbIndex=ot;const $t=Aoe(Re),Wt=se?.root??p.Root??woe,ht=se?.rail??p.Rail??Soe,sr=se?.track??p.Track??Coe,cr=se?.thumb??p.Thumb??Eoe,ir=se?.valueLabel??p.ValueLabel??Toe,br=se?.mark??p.Mark??Ioe,yr=se?.markLabel??p.MarkLabel??Poe,Kt=se?.input??p.Input??"input",at=ae?.root??g.root,Ae=ae?.rail??g.rail,_e=ae?.track??g.track,je=ae?.thumb??g.thumb,Ge=ae?.valueLabel??g.valueLabel,He=ae?.mark??g.mark,Dt=ae?.markLabel??g.markLabel,St=ae?.input??g.input,yt=sf({elementType:Wt,getSlotProps:Ee,externalSlotProps:at,externalForwardedProps:Se,additionalProps:{...voe(Wt)&&{as:f}},ownerState:{...Re,...at?.ownerState},className:[$t.root,_]}),ct=sf({elementType:ht,externalSlotProps:Ae,ownerState:Re,className:$t.rail}),Jt=sf({elementType:sr,externalSlotProps:_e,additionalProps:{style:{...he[Be].offset(st),...he[Be].leap($e)}},ownerState:{...Re,..._e?.ownerState},className:$t.track}),Vt=sf({elementType:cr,getSlotProps:Ne,externalSlotProps:je,ownerState:{...Re,...je?.ownerState},className:$t.thumb}),xr=sf({elementType:ir,externalSlotProps:Ge,ownerState:{...Re,...Ge?.ownerState},className:$t.valueLabel}),_r=sf({elementType:br,externalSlotProps:He,ownerState:Re,className:$t.mark}),Nr=sf({elementType:yr,externalSlotProps:Dt,ownerState:Re,className:$t.markLabel}),tn=sf({elementType:Kt,getSlotProps:we,externalSlotProps:St,ownerState:Re});return K.jsxs(Wt,{...yt,children:[K.jsx(ht,{...ct}),K.jsx(sr,{...Jt}),ke.filter(Lr=>Lr.value>=N&&Lr.value<=B).map((Lr,kt)=>{const Hr=Nx(Lr.value,N,B),kn=he[Be].offset(Hr);let Ur;return fe===!1?Ur=Nt.includes(Lr.value):Ur=fe==="normal"&&(Ke?Lr.value>=Nt[0]&&Lr.value<=Nt[Nt.length-1]:Lr.value<=Nt[0])||fe==="inverted"&&(Ke?Lr.value<=Nt[0]||Lr.value>=Nt[Nt.length-1]:Lr.value>=Nt[0]),K.jsxs(ee.Fragment,{children:[K.jsx(br,{"data-index":kt,..._r,...!pf(br)&&{markActive:Ur},style:{...kn,..._r.style},className:cn(_r.className,Ur&&$t.markActive)}),Lr.label!=null?K.jsx(yr,{"aria-hidden":!0,"data-index":kt,...Nr,...!pf(yr)&&{markLabelActive:Ur},style:{...kn,...Nr.style},className:cn($t.markLabel,Nr.className,Ur&&$t.markLabelActive),children:Lr.label}):null]},kt)}),Nt.map((Lr,kt)=>{const Hr=Nx(Lr,N,B),kn=he[Be].offset(Hr),Ur=ye==="off"?koe:ir;return K.jsx(Ur,{...!pf(Ur)&&{valueLabelFormat:xe,valueLabelDisplay:ye,value:typeof xe=="function"?xe(H(Lr),kt):xe,index:kt,open:Fe===kt||Xe===kt||ye==="on",disabled:k},...xr,children:K.jsx(cr,{"data-index":kt,...Vt,className:cn($t.thumb,Vt.className,Xe===kt&&$t.active,ot===kt&&$t.focusVisible),style:{...kn,...Zt(kt),...Vt.style},children:K.jsx(Kt,{"data-index":kt,"aria-label":M?M(kt):o,"aria-valuenow":H(Lr),"aria-labelledby":a,"aria-valuetext":D?D(H(Lr),kt):u,value:Nt[kt],...tn})})},kt)})]})});function Moe(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:i,resumeHideDuration:o}=e,u=nh();ee.useEffect(()=>{if(!i)return;function D(F){F.defaultPrevented||F.key==="Escape"&&n?.(F,"escapeKeyDown")}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[i,n]);const a=kl((D,F)=>{n?.(D,F)}),f=kl(D=>{!n||D==null||u.start(D,()=>{a(null,"timeout")})});ee.useEffect(()=>(i&&f(t),u.clear),[i,t,f,u]);const p=D=>{n?.(D,"clickaway")},g=u.clear,b=ee.useCallback(()=>{t!=null&&f(o??t*.5)},[t,o,f]),S=D=>F=>{const B=D.onBlur;B?.(F),b()},_=D=>F=>{const B=D.onFocus;B?.(F),g()},P=D=>F=>{const B=D.onMouseEnter;B?.(F),g()},k=D=>F=>{const B=D.onMouseLeave;B?.(F),b()};return ee.useEffect(()=>{if(!r&&i)return window.addEventListener("focus",b),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",b),window.removeEventListener("blur",g)}},[r,i,b,g]),{getRootProps:(D={})=>{const F={...fm(e),...fm(D)};return{role:"presentation",...D,...F,onBlur:S(F),onFocus:_(F),onMouseEnter:P(F),onMouseLeave:k(F)}},onClickAway:p}}function Loe(e){return ti("MuiSnackbarContent",e)}Kn("MuiSnackbarContent",["root","message","action"]);const Roe=e=>{const{classes:t}=e;return ri({root:["root"],action:["action"],message:["message"]},Loe,t)},Doe=Sr(Kc,{name:"MuiSnackbarContent",slot:"Root"})(jn(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(Ax(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:Ax(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Ooe=Sr("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),Noe=Sr("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Foe=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiSnackbarContent"}),{action:i,className:o,message:u,role:a="alert",...f}=n,p=n,g=Roe(p);return K.jsxs(Doe,{role:a,elevation:6,className:cn(g.root,o),ownerState:p,ref:r,...f,children:[K.jsx(Ooe,{className:g.message,ownerState:p,children:u}),i?K.jsx(Noe,{className:g.action,ownerState:p,children:i}):null]})});function Boe(e){return ti("MuiSnackbar",e)}Kn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const zoe=e=>{const{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${Zr(r.vertical)}${Zr(r.horizontal)}`]};return ri(n,Boe,t)},joe=Sr("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${Zr(r.anchorOrigin.vertical)}${Zr(r.anchorOrigin.horizontal)}`]]}})(jn(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),qoe=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiSnackbar"}),i=Su(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:u,anchorOrigin:{vertical:a,horizontal:f}={vertical:"bottom",horizontal:"left"},autoHideDuration:p=null,children:g,className:b,ClickAwayListenerProps:S,ContentProps:_,disableWindowBlurListener:P=!1,message:k,onBlur:M,onClose:D,onFocus:F,onMouseEnter:B,onMouseLeave:N,open:$,resumeHideDuration:V,slots:U={},slotProps:X={},TransitionComponent:Z,transitionDuration:oe=o,TransitionProps:{onEnter:re,onExited:H,...ae}={},...se}=n,de={...n,anchorOrigin:{vertical:a,horizontal:f},autoHideDuration:p,disableWindowBlurListener:P,TransitionComponent:Z,transitionDuration:oe},fe=zoe(de),{getRootProps:Le,onClickAway:ye}=Moe({...de}),[xe,Se]=ee.useState(!0),Re=Nt=>{Se(!0),H&&H(Nt)},he=(Nt,st)=>{Se(!1),re&&re(Nt,st)},Ee={slots:{transition:Z,...U},slotProps:{content:_,clickAwayListener:S,transition:ae,...X}},[we,Ne]=si("root",{ref:r,className:[fe.root,b],elementType:joe,getSlotProps:Le,externalForwardedProps:{...Ee,...se},ownerState:de}),[Fe,{ownerState:Xe,...Be}]=si("clickAwayListener",{elementType:cne,externalForwardedProps:Ee,getSlotProps:Nt=>({onClickAway:(...st)=>{const $e=st[0];Nt.onClickAway?.(...st),!$e?.defaultMuiPrevented&&ye(...st)}}),ownerState:de}),[ot,Ke]=si("content",{elementType:Foe,shouldForwardComponentProp:!0,externalForwardedProps:Ee,additionalProps:{message:k,action:u},ownerState:de}),[it,ke]=si("transition",{elementType:o1,externalForwardedProps:Ee,getSlotProps:Nt=>({onEnter:(...st)=>{Nt.onEnter?.(...st),he(...st)},onExited:(...st)=>{Nt.onExited?.(...st),Re(...st)}}),additionalProps:{appear:!0,in:$,timeout:oe,direction:a==="top"?"down":"up"},ownerState:de});return!$&&xe?null:K.jsx(Fe,{...Be,...U.clickAwayListener&&{ownerState:Xe},children:K.jsx(we,{...Ne,children:K.jsx(it,{...ke,children:g||K.jsx(ot,{...Ke})})})})}),Voe={entering:{transform:"none"},entered:{transform:"none"}},$oe=ee.forwardRef(function(t,r){const n=Su(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:u=!0,children:a,easing:f,in:p,onEnter:g,onEntered:b,onEntering:S,onExit:_,onExited:P,onExiting:k,style:M,timeout:D=i,TransitionComponent:F=Ac,...B}=t,N=ee.useRef(null),$=ao(N,xh(a),r),V=se=>de=>{if(se){const fe=N.current;de===void 0?se(fe):se(fe,de)}},U=V(S),X=V((se,de)=>{dw(se);const fe=Ad({style:M,timeout:D,easing:f},{mode:"enter"});se.style.webkitTransition=n.transitions.create("transform",fe),se.style.transition=n.transitions.create("transform",fe),g&&g(se,de)}),Z=V(b),oe=V(k),re=V(se=>{const de=Ad({style:M,timeout:D,easing:f},{mode:"exit"});se.style.webkitTransition=n.transitions.create("transform",de),se.style.transition=n.transitions.create("transform",de),_&&_(se)}),H=V(P),ae=se=>{o&&o(N.current,se)};return K.jsx(F,{appear:u,in:p,nodeRef:N,onEnter:X,onEntered:Z,onEntering:U,onExit:re,onExited:H,onExiting:oe,addEndListener:ae,timeout:D,...B,children:(se,{ownerState:de,...fe})=>ee.cloneElement(a,{style:{transform:"scale(0)",visibility:se==="exited"&&!p?"hidden":void 0,...Voe[se],...M,...a.props.style},ref:$,...fe})})});function Goe(e){return ti("MuiSpeedDial",e)}const n_=Kn("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),Uoe=e=>{const{classes:t,open:r,direction:n}=e,i={root:["root",`direction${Zr(n)}`],fab:["fab"],actions:["actions",!r&&"actionsClosed"]};return ri(i,Goe,t)};function Hv(e){if(e==="up"||e==="down")return"vertical";if(e==="right"||e==="left")return"horizontal"}const Gh=32,i_=16,Hoe=Sr("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`direction${Zr(r.direction)}`]]}})(jn(({theme:e})=>({zIndex:(e.vars||e).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none",variants:[{props:{direction:"up"},style:{flexDirection:"column-reverse",[`& .${n_.actions}`]:{flexDirection:"column-reverse",marginBottom:-Gh,paddingBottom:i_+Gh}}},{props:{direction:"down"},style:{flexDirection:"column",[`& .${n_.actions}`]:{flexDirection:"column",marginTop:-Gh,paddingTop:i_+Gh}}},{props:{direction:"left"},style:{flexDirection:"row-reverse",[`& .${n_.actions}`]:{flexDirection:"row-reverse",marginRight:-Gh,paddingRight:i_+Gh}}},{props:{direction:"right"},style:{flexDirection:"row",[`& .${n_.actions}`]:{flexDirection:"row",marginLeft:-Gh,paddingLeft:i_+Gh}}}]}))),Woe=Sr(Kj,{name:"MuiSpeedDial",slot:"Fab"})({pointerEvents:"auto"}),Xoe=Sr("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.actions,!r.open&&t.actionsClosed]}})({display:"flex",pointerEvents:"auto",variants:[{props:({ownerState:e})=>!e.open,style:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}]}),Yoe=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiSpeedDial"}),i=Su(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:u,FabProps:{ref:a,...f}={},children:p,className:g,direction:b="up",hidden:S=!1,icon:_,onBlur:P,onClose:k,onFocus:M,onKeyDown:D,onMouseEnter:F,onMouseLeave:B,onOpen:N,open:$,openIcon:V,slots:U={},slotProps:X={},TransitionComponent:Z,TransitionProps:oe,transitionDuration:re=o,...H}=n,[ae,se]=lp({controlled:$,default:!1,name:"SpeedDial",state:"open"}),de={...n,open:ae,direction:b},fe=Uoe(de),Le=nh(),ye=ee.useRef(0),xe=ee.useRef(),Se=ee.useRef([]);Se.current=[Se.current[0]];const Re=ee.useCallback(Wt=>{Se.current[0]=Wt},[]),he=ao(a,Re),Ee=(Wt,ht,sr)=>cr=>{Se.current[Wt+1]=cr,ht&&ht(cr),sr&&sr(cr)},we=Wt=>{D&&D(Wt);const ht=Wt.key.replace("Arrow","").toLowerCase(),{current:sr=ht}=xe;if(Wt.key==="Escape"){se(!1),Se.current[0].focus(),k&&k(Wt,"escapeKeyDown");return}if(Hv(ht)===Hv(sr)&&Hv(ht)!==void 0){Wt.preventDefault();const cr=ht===sr?1:-1,ir=tm(ye.current+cr,0,Se.current.length-1);Se.current[ir].focus(),ye.current=ir,xe.current=sr}};ee.useEffect(()=>{ae||(ye.current=0,xe.current=void 0)},[ae]);const Ne=Wt=>{Wt.type==="mouseleave"&&B&&B(Wt),Wt.type==="blur"&&P&&P(Wt),Le.clear(),Wt.type==="blur"?Le.start(0,()=>{se(!1),k&&k(Wt,"blur")}):(se(!1),k&&k(Wt,"mouseLeave"))},Fe=Wt=>{f.onClick&&f.onClick(Wt),Le.clear(),ae?(se(!1),k&&k(Wt,"toggle")):(se(!0),N&&N(Wt,"toggle"))},Xe=Wt=>{Wt.type==="mouseenter"&&F&&F(Wt),Wt.type==="focus"&&M&&M(Wt),Le.clear(),ae||Le.start(0,()=>{se(!0),N&&N(Wt,{focus:"focus",mouseenter:"mouseEnter"}[Wt.type])})},Be=u.replace(/^[^a-z]+|[^\w:.-]+/gi,""),ot=ee.Children.toArray(p).filter(Wt=>ee.isValidElement(Wt)),Ke=ot.map((Wt,ht)=>{const{FabProps:{ref:sr}={},slotProps:cr={},tooltipPlacement:ir}=Wt.props,{fab:{ref:br,...yr}={},...Kt}=cr,at=ir||(Hv(b)==="vertical"?"left":"top");return ee.cloneElement(Wt,{slotProps:{fab:{...yr,ref:Ee(ht,sr,br)},...Kt},delay:30*(ae?ht:ot.length-ht),open:ae,tooltipPlacement:at,id:`${Be}-action-${ht}`})}),it={transition:Z,...U},ke={transition:oe,...X},Nt={slots:it,slotProps:ke},[st,$e]=si("root",{elementType:Hoe,externalForwardedProps:{...Nt,...H},ownerState:de,ref:r,className:cn(fe.root,g),additionalProps:{role:"presentation"},getSlotProps:Wt=>({...Wt,onKeyDown:ht=>{Wt.onKeyDown?.(ht),we(ht)},onBlur:ht=>{Wt.onBlur?.(ht),Ne(ht)},onFocus:ht=>{Wt.onFocus?.(ht),Xe(ht)},onMouseEnter:ht=>{Wt.onMouseEnter?.(ht),Xe(ht)},onMouseLeave:ht=>{Wt.onMouseLeave?.(ht),Ne(ht)}})}),[Zt,$t]=si("transition",{elementType:$oe,externalForwardedProps:Nt,ownerState:de});return K.jsxs(st,{...$e,children:[K.jsx(Zt,{in:!S,timeout:re,unmountOnExit:!0,...$t,children:K.jsx(Woe,{color:"primary","aria-label":u,"aria-haspopup":"true","aria-expanded":ae,"aria-controls":`${Be}-actions`,...f,onClick:Fe,className:cn(fe.fab,f.className),ref:he,ownerState:de,children:ee.isValidElement(_)&&xy(_,["SpeedDialIcon"])?ee.cloneElement(_,{open:ae}):_})}),K.jsx(Xoe,{id:`${Be}-actions`,role:"menu","aria-orientation":Hv(b),className:cn(fe.actions,!ae&&fe.actionsClosed),ownerState:de,children:Ke})]})});function Zoe(e){return ti("MuiTooltip",e)}const ys=Kn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Koe(e){return Math.round(e*1e5)/1e5}const Joe=e=>{const{classes:t,disableInteractive:r,arrow:n,touch:i,placement:o}=e,u={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${Zr(o.split("-")[0])}`],arrow:["arrow"]};return ri(u,Zoe,t)},Qoe=Sr(jj,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(jn(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${ys.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ys.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ys.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${ys.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ys.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ys.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ys.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ys.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),ese=Sr("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${Zr(r.placement.split("-")[0])}`]]}})(jn(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${ys.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${ys.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${ys.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${ys.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Koe(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${ys.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${ys.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${ys.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${ys.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${ys.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${ys.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${ys.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${ys.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ys.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ys.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),tse=Sr("span",{name:"MuiTooltip",slot:"Arrow"})(jn(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let a_=!1;const oO=new cw;let Wv={x:0,y:0};function o_(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const ah=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiTooltip"}),{arrow:i=!1,children:o,classes:u,components:a={},componentsProps:f={},describeChild:p=!1,disableFocusListener:g=!1,disableHoverListener:b=!1,disableInteractive:S=!1,disableTouchListener:_=!1,enterDelay:P=100,enterNextDelay:k=0,enterTouchDelay:M=700,followCursor:D=!1,id:F,leaveDelay:B=0,leaveTouchDelay:N=1500,onClose:$,onOpen:V,open:U,placement:X="bottom",PopperComponent:Z,PopperProps:oe={},slotProps:re={},slots:H={},title:ae,TransitionComponent:se,TransitionProps:de,...fe}=n,Le=ee.isValidElement(o)?o:K.jsx("span",{children:o}),ye=Su(),xe=V1(),[Se,Re]=ee.useState(),[he,Ee]=ee.useState(null),we=ee.useRef(!1),Ne=S||D,Fe=nh(),Xe=nh(),Be=nh(),ot=nh(),[Ke,it]=lp({controlled:U,default:!1,name:"Tooltip",state:"open"});let ke=Ke;const Nt=yp(F),st=ee.useRef(),$e=kl(()=>{st.current!==void 0&&(document.body.style.WebkitUserSelect=st.current,st.current=void 0),ot.clear()});ee.useEffect(()=>$e,[$e]);const Zt=rr=>{oO.clear(),a_=!0,it(!0),V&&!ke&&V(rr)},$t=kl(rr=>{oO.start(800+B,()=>{a_=!1}),it(!1),$&&ke&&$(rr),Fe.start(ye.transitions.duration.shortest,()=>{we.current=!1})}),Wt=rr=>{we.current&&rr.type!=="touchstart"||(Se&&Se.removeAttribute("title"),Xe.clear(),Be.clear(),P||a_&&k?Xe.start(a_?k:P,()=>{Zt(rr)}):Zt(rr))},ht=rr=>{Xe.clear(),Be.start(B,()=>{$t(rr)})},[,sr]=ee.useState(!1),cr=rr=>{Ry(rr.target)||(sr(!1),ht(rr))},ir=rr=>{Se||Re(rr.currentTarget),Ry(rr.target)&&(sr(!0),Wt(rr))},br=rr=>{we.current=!0;const Jn=Le.props;Jn.onTouchStart&&Jn.onTouchStart(rr)},yr=rr=>{br(rr),Be.clear(),Fe.clear(),$e(),st.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ot.start(M,()=>{document.body.style.WebkitUserSelect=st.current,Wt(rr)})},Kt=rr=>{Le.props.onTouchEnd&&Le.props.onTouchEnd(rr),$e(),Be.start(N,()=>{$t(rr)})};ee.useEffect(()=>{if(!ke)return;function rr(Jn){Jn.key==="Escape"&&$t(Jn)}return document.addEventListener("keydown",rr),()=>{document.removeEventListener("keydown",rr)}},[$t,ke]);const at=ao(xh(Le),Re,r);!ae&&ae!==0&&(ke=!1);const Ae=ee.useRef(),_e=rr=>{const Jn=Le.props;Jn.onMouseMove&&Jn.onMouseMove(rr),Wv={x:rr.clientX,y:rr.clientY},Ae.current&&Ae.current.update()},je={},Ge=typeof ae=="string";p?(je.title=!ke&&Ge&&!b?ae:null,je["aria-describedby"]=ke?Nt:null):(je["aria-label"]=Ge?ae:null,je["aria-labelledby"]=ke&&!Ge?Nt:null);const He={...je,...fe,...Le.props,className:cn(fe.className,Le.props.className),onTouchStart:br,ref:at,...D?{onMouseMove:_e}:{}},Dt={};_||(He.onTouchStart=yr,He.onTouchEnd=Kt),b||(He.onMouseOver=o_(Wt,He.onMouseOver),He.onMouseLeave=o_(ht,He.onMouseLeave),Ne||(Dt.onMouseOver=Wt,Dt.onMouseLeave=ht)),g||(He.onFocus=o_(ir,He.onFocus),He.onBlur=o_(cr,He.onBlur),Ne||(Dt.onFocus=ir,Dt.onBlur=cr));const St={...n,isRtl:xe,arrow:i,disableInteractive:Ne,placement:X,PopperComponentProp:Z,touch:we.current},yt=typeof re.popper=="function"?re.popper(St):re.popper,ct=ee.useMemo(()=>{let rr=[{name:"arrow",enabled:!!he,options:{element:he,padding:4}}];return oe.popperOptions?.modifiers&&(rr=rr.concat(oe.popperOptions.modifiers)),yt?.popperOptions?.modifiers&&(rr=rr.concat(yt.popperOptions.modifiers)),{...oe.popperOptions,...yt?.popperOptions,modifiers:rr}},[he,oe.popperOptions,yt?.popperOptions]),Jt=Joe(St),Vt=typeof re.transition=="function"?re.transition(St):re.transition,xr={slots:{popper:a.Popper,transition:a.Transition??se,tooltip:a.Tooltip,arrow:a.Arrow,...H},slotProps:{arrow:re.arrow??f.arrow,popper:{...oe,...yt??f.popper},tooltip:re.tooltip??f.tooltip,transition:{...de,...Vt??f.transition}}},[_r,Nr]=si("popper",{elementType:Qoe,externalForwardedProps:xr,ownerState:St,className:cn(Jt.popper,oe?.className)}),[tn,Lr]=si("transition",{elementType:o1,externalForwardedProps:xr,ownerState:St}),[kt,Hr]=si("tooltip",{elementType:ese,className:Jt.tooltip,externalForwardedProps:xr,ownerState:St}),[kn,Ur]=si("arrow",{elementType:tse,className:Jt.arrow,externalForwardedProps:xr,ownerState:St,ref:Ee});return K.jsxs(ee.Fragment,{children:[ee.cloneElement(Le,He),K.jsx(_r,{as:Z??jj,placement:X,anchorEl:D?{getBoundingClientRect:()=>({top:Wv.y,left:Wv.x,right:Wv.x,bottom:Wv.y,width:0,height:0})}:Se,popperRef:Ae,open:Se?ke:!1,id:Nt,transition:!0,...Dt,...Nr,popperOptions:ct,children:({TransitionProps:rr})=>K.jsx(tn,{timeout:ye.transitions.duration.shorter,...rr,...Lr,children:K.jsxs(kt,{...Hr,children:[ae,i?K.jsx(kn,{...Ur}):null]})})})]})});function rse(e){return ti("MuiSpeedDialAction",e)}const s_=Kn("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),nse=e=>{const{open:t,tooltipPlacement:r,classes:n}=e,i={fab:["fab",!t&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${Zr(r)}`,!t&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return ri(i,rse,n)},ise=Sr(Kj,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.fab,!r.open&&t.fabClosed]}})(jn(({theme:e})=>({margin:8,color:(e.vars||e).palette.text.secondary,backgroundColor:(e.vars||e).palette.background.paper,"&:hover":{backgroundColor:e.vars?e.vars.palette.SpeedDialAction.fabHoverBg:Ax(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1,variants:[{props:({ownerState:t})=>!t.open,style:{opacity:0,transform:"scale(0)"}}]}))),ase=Sr("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.staticTooltip,!r.open&&t.staticTooltipClosed,t[`tooltipPlacement${Zr(r.tooltipPlacement)}`]]}})(jn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",[`& .${s_.staticTooltipLabel}`]:{transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},variants:[{props:({ownerState:t})=>!t.open,style:{[`& .${s_.staticTooltipLabel}`]:{opacity:0,transform:"scale(0.5)"}}},{props:{tooltipPlacement:"left"},style:{[`& .${s_.staticTooltipLabel}`]:{transformOrigin:"100% 50%",right:"100%",marginRight:8}}},{props:{tooltipPlacement:"right"},style:{[`& .${s_.staticTooltipLabel}`]:{transformOrigin:"0% 50%",left:"100%",marginLeft:8}}}]}))),ose=Sr("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel"})(jn(({theme:e})=>({position:"absolute",...e.typography.body1,backgroundColor:(e.vars||e).palette.background.paper,borderRadius:(e.vars||e).shape.borderRadius,boxShadow:(e.vars||e).shadows[1],color:(e.vars||e).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"}))),sse=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiSpeedDialAction"}),{className:i,delay:o=0,FabProps:u={},icon:a,id:f,open:p,TooltipClasses:g,tooltipOpen:b=!1,tooltipPlacement:S="left",tooltipTitle:_,slots:P={},slotProps:k={},...M}=n,D={...n,tooltipPlacement:S},F=nse(D),B={slots:P,slotProps:{fab:u,...k,tooltip:Ly(typeof k.tooltip=="function"?k.tooltip(D):k.tooltip,{title:_,open:b,placement:S,classes:g})}},[N,$]=ee.useState(B.slotProps.tooltip?.open),V=()=>{$(!1)},U=()=>{$(!0)},X={transitionDelay:`${o}ms`},[Z,oe]=si("fab",{elementType:ise,externalForwardedProps:B,ownerState:D,shouldForwardComponentProp:!0,className:cn(F.fab,i),additionalProps:{style:X,tabIndex:-1,role:"menuitem",size:"small"}}),[re,H]=si("tooltip",{elementType:ah,externalForwardedProps:B,shouldForwardComponentProp:!0,ref:r,additionalProps:{id:f},ownerState:D,getSlotProps:ye=>({...ye,onClose:xe=>{ye.onClose?.(xe),V()},onOpen:xe=>{ye.onOpen?.(xe),U()}})}),[ae,se]=si("staticTooltip",{elementType:ase,externalForwardedProps:B,ownerState:D,ref:r,className:F.staticTooltip,additionalProps:{id:f}}),[de,fe]=si("staticTooltipLabel",{elementType:ose,externalForwardedProps:B,ownerState:D,className:F.staticTooltipLabel,additionalProps:{style:X,id:`${f}-label`}}),Le=K.jsx(Z,{...oe,children:a});return H.open?K.jsxs(ae,{...se,...M,children:[K.jsx(de,{...fe,children:H.title}),ee.cloneElement(Le,{"aria-labelledby":`${f}-label`})]}):(!p&&N&&$(!1),K.jsx(re,{...H,title:H.title,open:p&&N,placement:H.placement,classes:H.classes,...M,children:Le}))}),lse=Sr("div",{name:"MuiSwipeArea",shouldForwardProp:Bs})(jn(({theme:e})=>({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1,variants:[{props:{anchor:"left"},style:{right:"auto"}},{props:{anchor:"right"},style:{left:"auto",right:0}},{props:{anchor:"top"},style:{bottom:"auto",right:0}},{props:{anchor:"bottom"},style:{top:"auto",bottom:0,right:0}}]}))),use=ee.forwardRef(function(t,r){const{anchor:n,classes:i={},className:o,width:u,style:a,...f}=t,p=t;return K.jsx(lse,{className:cn("PrivateSwipeArea-root",i.root,i[`anchor${Zr(n)}`],o),ref:r,style:{[rm(n)?"width":"height"]:u,...a},ownerState:p,...f})}),l_=3,k5=20;let Wf=null;function M5(e,t,r){return e==="right"?r.body.offsetWidth-t[0].pageX:t[0].pageX}function L5(e,t,r){return e==="bottom"?r.innerHeight-t[0].clientY:t[0].clientY}function Xv(e,t){return e?t.clientWidth:t.clientHeight}function sO(e,t,r,n){return Math.min(Math.max(r?t-e:n+t-e,0),n)}function cse(e,t){const r=[];for(;e&&e!==t.parentElement;){const n=zu(t).getComputedStyle(e);n.getPropertyValue("position")==="absolute"||n.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&r.push(e),e=e.parentElement}return r}function dse({domTreeShapes:e,start:t,current:r,anchor:n}){const i={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(o=>{let u=r>=t;(n==="top"||n==="left")&&(u=!u);const a=n==="left"||n==="right"?"x":"y",f=Math.round(o[i.scrollPosition[a]]),p=f>0,g=f+o[i.clientLength[a]]<o[i.scrollLength[a]];return!!(u&&g||!u&&p)})}const fse=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),hse=ee.forwardRef(function(t,r){const n=li({name:"MuiSwipeableDrawer",props:t}),i=Su(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:u="left",disableBackdropTransition:a=!1,disableDiscovery:f=!1,disableSwipeToOpen:p=fse,hideBackdrop:g,hysteresis:b=.52,allowSwipeInChildren:S=!1,minFlingVelocity:_=450,ModalProps:{BackdropProps:P,...k}={},onClose:M,onOpen:D,open:F=!1,PaperProps:B={},SwipeAreaProps:N,swipeAreaWidth:$=20,transitionDuration:V=o,variant:U="temporary",slots:X={},slotProps:Z={},...oe}=n,[re,H]=ee.useState(!1),ae=ee.useRef({isSwiping:null}),se=ee.useRef(),de=ee.useRef(),fe=ee.useRef(),Le=ao(B.ref,fe),ye=ee.useRef(!1),xe=ee.useRef();Zl(()=>{xe.current=null},[F]);const Se=ee.useCallback((Xe,Be={})=>{const{mode:ot=null,changeTransition:Ke=!0}=Be,it=y0(i,u),ke=["right","bottom"].includes(it)?1:-1,Nt=rm(u),st=Nt?`translate(${ke*Xe}px, 0)`:`translate(0, ${ke*Xe}px)`,$e=fe.current.style;$e.webkitTransform=st,$e.transform=st;let Zt="";if(ot&&(Zt=i.transitions.create("all",Ad({easing:void 0,style:void 0,timeout:V},{mode:ot}))),Ke&&($e.webkitTransition=Zt,$e.transition=Zt),!a&&!g){const $t=de.current.style;$t.opacity=1-Xe/Xv(Nt,fe.current),Ke&&($t.webkitTransition=Zt,$t.transition=Zt)}},[u,a,g,i,V]),Re=kl(Xe=>{if(!ye.current)return;if(Wf=null,ye.current=!1,rh.flushSync(()=>{H(!1)}),!ae.current.isSwiping){ae.current.isSwiping=null;return}ae.current.isSwiping=null;const Be=y0(i,u),ot=rm(u);let Ke;ot?Ke=M5(Be,Xe.changedTouches,Uo(Xe.currentTarget)):Ke=L5(Be,Xe.changedTouches,zu(Xe.currentTarget));const it=ot?ae.current.startX:ae.current.startY,ke=Xv(ot,fe.current),Nt=sO(Ke,it,F,ke),st=Nt/ke;if(Math.abs(ae.current.velocity)>_&&(xe.current=Math.abs((ke-Nt)/ae.current.velocity)*1e3),F){ae.current.velocity>_||st>b?M():Se(0,{mode:"exit"});return}ae.current.velocity<-_||1-st>b?D():Se(Xv(ot,fe.current),{mode:"enter"})}),he=(Xe=!1)=>{if(!re){(Xe||!(f&&S))&&rh.flushSync(()=>{H(!0)});const Be=rm(u);!F&&fe.current&&Se(Xv(Be,fe.current)+(f?15:-k5),{changeTransition:!1}),ae.current.velocity=0,ae.current.lastTime=null,ae.current.lastTranslate=null,ae.current.paperHit=!1,ye.current=!0}},Ee=kl(Xe=>{if(!fe.current||!ye.current||Wf!==null&&Wf!==ae.current)return;he(!0);const Be=y0(i,u),ot=rm(u),Ke=M5(Be,Xe.touches,Uo(Xe.currentTarget)),it=L5(Be,Xe.touches,zu(Xe.currentTarget));if(F&&fe.current.contains(Xe.target)&&Wf===null){const Zt=cse(Xe.target,fe.current);if(dse({domTreeShapes:Zt,start:ot?ae.current.startX:ae.current.startY,current:ot?Ke:it,anchor:u})){Wf=!0;return}Wf=ae.current}if(ae.current.isSwiping==null){const Zt=Math.abs(Ke-ae.current.startX),$t=Math.abs(it-ae.current.startY),Wt=ot?Zt>$t&&Zt>l_:$t>Zt&&$t>l_;if(Wt&&Xe.cancelable&&Xe.preventDefault(),Wt===!0||(ot?$t>l_:Zt>l_)){if(ae.current.isSwiping=Wt,!Wt){Re(Xe);return}ae.current.startX=Ke,ae.current.startY=it,!f&&!F&&(ot?ae.current.startX-=k5:ae.current.startY-=k5)}}if(!ae.current.isSwiping)return;const ke=Xv(ot,fe.current);let Nt=ot?ae.current.startX:ae.current.startY;F&&!ae.current.paperHit&&(Nt=Math.min(Nt,ke));const st=sO(ot?Ke:it,Nt,F,ke);if(F)if(ae.current.paperHit)st===0&&(ae.current.startX=Ke,ae.current.startY=it);else if(ot?Ke<ke:it<ke)ae.current.paperHit=!0,ae.current.startX=Ke,ae.current.startY=it;else return;ae.current.lastTranslate===null&&(ae.current.lastTranslate=st,ae.current.lastTime=performance.now()+1);const $e=(st-ae.current.lastTranslate)/(performance.now()-ae.current.lastTime)*1e3;ae.current.velocity=ae.current.velocity*.4+$e*.6,ae.current.lastTranslate=st,ae.current.lastTime=performance.now(),Xe.cancelable&&Xe.preventDefault(),Se(st)}),we=kl(Xe=>{if(Xe.defaultPrevented||Xe.defaultMuiPrevented||F&&(g||!de.current.contains(Xe.target))&&!fe.current.contains(Xe.target))return;const Be=y0(i,u),ot=rm(u),Ke=M5(Be,Xe.touches,Uo(Xe.currentTarget)),it=L5(Be,Xe.touches,zu(Xe.currentTarget));if(!F){if(p||!(Xe.target===se.current||fe.current?.contains(Xe.target)&&(typeof S=="function"?S(Xe,se.current,fe.current):S)))return;if(ot){if(Ke>$)return}else if(it>$)return}Xe.defaultMuiPrevented=!0,Wf=null,ae.current.startX=Ke,ae.current.startY=it,he()});ee.useEffect(()=>{if(U==="temporary"){const Xe=Uo(fe.current);return Xe.addEventListener("touchstart",we),Xe.addEventListener("touchmove",Ee,{passive:!F}),Xe.addEventListener("touchend",Re),()=>{Xe.removeEventListener("touchstart",we),Xe.removeEventListener("touchmove",Ee,{passive:!F}),Xe.removeEventListener("touchend",Re)}}},[U,F,we,Ee,Re]),ee.useEffect(()=>()=>{Wf===ae.current&&(Wf=null)},[]),ee.useEffect(()=>{F||H(!1)},[F]);const[Ne,Fe]=si("swipeArea",{ref:se,elementType:use,ownerState:n,externalForwardedProps:{slots:X,slotProps:{swipeArea:N,...Z}},additionalProps:{width:$,anchor:u}});return K.jsxs(ee.Fragment,{children:[K.jsx(ZP,{open:U==="temporary"&&re?!0:F,variant:U,ModalProps:{BackdropProps:{...P,ref:de},...U==="temporary"&&{keepMounted:!0},...k},hideBackdrop:g,anchor:u,transitionDuration:xe.current||V,onClose:M,ref:r,slots:X,slotProps:{...Z,backdrop:Ly(Z.backdrop??P,{ref:de}),paper:Ly(Z.paper??B,{style:{pointerEvents:U==="temporary"&&!F&&!S?"none":""},ref:Le})},...oe}),!p&&U==="temporary"&&K.jsx(kae,{children:K.jsx(Ne,{...Fe})})]})});function pse(e){return ti("MuiToolbar",e)}Kn("MuiToolbar",["root","gutters","regular","dense"]);const mse=e=>{const{classes:t,disableGutters:r,variant:n}=e;return ri({root:["root",!r&&"gutters",n]},pse,t)},gse=Sr("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(jn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),yse=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:u=!1,variant:a="regular",...f}=n,p={...n,component:o,disableGutters:u,variant:a},g=mse(p);return K.jsx(gse,{as:o,className:cn(g.root,i),ref:r,ownerState:p,...f})});function vse(e){return ti("MuiTextField",e)}Kn("MuiTextField",["root"]);const bse={standard:JP,filled:KP,outlined:vw},_se=e=>{const{classes:t}=e;return ri({root:["root"]},vse,t)},xse=Sr(vc,{name:"MuiTextField",slot:"Root"})({}),bw=ee.forwardRef(function(t,r){const n=li({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:u,className:a,color:f="primary",defaultValue:p,disabled:g=!1,error:b=!1,FormHelperTextProps:S,fullWidth:_=!1,helperText:P,id:k,InputLabelProps:M,inputProps:D,InputProps:F,inputRef:B,label:N,maxRows:$,minRows:V,multiline:U=!1,name:X,onBlur:Z,onChange:oe,onFocus:re,placeholder:H,required:ae=!1,rows:se,select:de=!1,SelectProps:fe,slots:Le={},slotProps:ye={},type:xe,value:Se,variant:Re="outlined",...he}=n,Ee={...n,autoFocus:o,color:f,disabled:g,error:b,fullWidth:_,multiline:U,required:ae,select:de,variant:Re},we=_se(Ee),Ne=yp(k),Fe=P&&Ne?`${Ne}-helper-text`:void 0,Xe=N&&Ne?`${Ne}-label`:void 0,Be=bse[Re],ot={slots:Le,slotProps:{input:F,inputLabel:M,htmlInput:D,formHelperText:S,select:fe,...ye}},Ke={},it=ot.slotProps.inputLabel;Re==="outlined"&&(it&&typeof it.shrink<"u"&&(Ke.notched=it.shrink),Ke.label=N),de&&((!fe||!fe.native)&&(Ke.id=void 0),Ke["aria-describedby"]=void 0);const[ke,Nt]=si("root",{elementType:xse,shouldForwardComponentProp:!0,externalForwardedProps:{...ot,...he},ownerState:Ee,className:cn(we.root,a),ref:r,additionalProps:{disabled:g,error:b,fullWidth:_,required:ae,color:f,variant:Re}}),[st,$e]=si("input",{elementType:Be,externalForwardedProps:ot,additionalProps:Ke,ownerState:Ee}),[Zt,$t]=si("inputLabel",{elementType:np,externalForwardedProps:ot,ownerState:Ee}),[Wt,ht]=si("htmlInput",{elementType:"input",externalForwardedProps:ot,ownerState:Ee}),[sr,cr]=si("formHelperText",{elementType:Iie,externalForwardedProps:ot,ownerState:Ee}),[ir,br]=si("select",{elementType:ip,externalForwardedProps:ot,ownerState:Ee}),yr=K.jsx(st,{"aria-describedby":Fe,autoComplete:i,autoFocus:o,defaultValue:p,fullWidth:_,multiline:U,name:X,rows:se,maxRows:$,minRows:V,type:xe,value:Se,id:Ne,inputRef:B,onBlur:Z,onChange:oe,onFocus:re,placeholder:H,inputProps:ht,slots:{input:Le.htmlInput?Wt:void 0},...$e});return K.jsxs(ke,{...Nt,children:[N!=null&&N!==""&&K.jsx(Zt,{htmlFor:Ne,id:Xe,...$t,children:N}),de?K.jsx(ir,{"aria-describedby":Fe,id:Ne,labelId:Xe,value:Se,input:yr,...br,children:u}):yr,P&&K.jsx(sr,{id:Fe,...cr,children:P})]})}),H1=aj({themeId:Id}),wse=Ei(K.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),rA="https://mapcomponents.github.io/react-map-components-maplibre/react-maplibre/",Sse=rA+"assets/WG-MapComponents-Logo_rgb.svg",Cse=rA+"assets/WG-MapComponents-Logo_rgb-weisse-schrift.svg",Ese=rA+"assets/mapcomponents_logo.png";function lO(e){const t=Su(),[r,n]=ee.useState(null),i=u=>{n(u.currentTarget)},o=()=>{n(null)};return K.jsx(ete,{sx:{minHeight:"62px",position:"absolute",zIndex:1300,top:0},children:K.jsxs(yse,{disableGutters:!0,children:[e.logo||K.jsxs(K.Fragment,{children:[K.jsx(xo,{sx:{marginLeft:"25px",display:{xs:"none",md:"flex"},flexGrow:{md:"30"}},children:K.jsx("img",{src:t.palette.mode==="dark"?Cse:Sse,style:{width:"100%",maxWidth:"250px"}})}),K.jsx(xo,{sx:{marginLeft:"25px",display:{xs:"flex",sm:"flex",md:"none"},flexGrow:{xs:"500"},mr:{sm:"0px"}},children:K.jsx("img",{src:Ese,width:"50px",height:"50px"})})]}),K.jsx(xo,{sx:{flexGrow:1,display:{xs:"flex"}},children:e.unmovableButtons}),e.buttons?K.jsxs(xo,{sx:{flexGrow:22,display:{xs:"flex",sm:"none"}},children:[K.jsx(xc,{onClick:i,children:K.jsx(wse,{})}),K.jsx(aq,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!r,onClose:o,PaperProps:{elevation:24,sx:{overflow:"visible",mt:"15px"}},sx:{display:{xs:"block",sm:"none"}},children:K.jsx(xo,{sx:{paddingLeft:"10px",paddingRight:"10px"},onClick:o,children:e.buttons})})]}):"",K.jsx(xo,{sx:{marginRight:"25px",display:{xs:"none",sm:"flex"}},children:e.buttons})]})})}try{lO.displayName="TopToolbar",lO.__docgenInfo={description:"",displayName:"TopToolbar",props:{unmovableButtons:{defaultValue:null,description:"",name:"unmovableButtons",required:!1,type:{name:"ReactNode"}},buttons:{defaultValue:null,description:"",name:"buttons",required:!1,type:{name:"ReactNode"}},logo:{defaultValue:null,description:"",name:"logo",required:!1,type:{name:"ReactNode"}}}}}catch{}const Tse=Ei(K.jsx("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),p3=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=ee.useState(!1),i=()=>{navigator.geolocation.getCurrentPosition(o,u)},o=ee.useCallback(a=>{t.map?.map.setCenter?.([a.coords.longitude,a.coords.latitude])},[t.map]),u=()=>{console.log("Access of user location denied"),n(!0)};return K.jsx(K.Fragment,{children:K.jsx($i,{variant:"navtools",sx:a=>({zIndex:1002,color:r?e.offColor??a.palette.navigation.buttonColor:e.onColor??a.palette.navigation.buttonColor}),onClick:i,disabled:r,children:K.jsx(Tse,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})})};try{p3.displayName="MlCenterPosition",p3.__docgenInfo={description:"Component template",displayName:"MlCenterPosition",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},onColor:{defaultValue:null,description:"Active button font color",name:"onColor",required:!1,type:{name:"string | undefined"}},offColor:{defaultValue:null,description:"Inactive button font color",name:"offColor",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"CSS style object that is applied to the button component",name:"style",required:!1,type:{name:"SxProps<Theme> | undefined"}}}}}catch{}const uO=e=>{const t=ha({mapId:e.mapId});return console.log(t.componentId+" remove this log"),K.jsx(K.Fragment,{})};try{uO.displayName="MlComponentTemplate",uO.__docgenInfo={description:"Component description",displayName:"MlComponentTemplate",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const Ise=Ei(K.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}));function Ka(e){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(e)}var kd=Uint8Array,bc=Uint16Array,nA=Int32Array,iA=new kd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),aA=new kd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cO=new kd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fq=function(e,t){for(var r=new bc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new nA(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},hq=fq(iA,2),Pse=hq.b,m3=hq.r;Pse[28]=258,m3[258]=28;var Ase=fq(aA,0),dO=Ase.r,g3=new bc(32768);for(var Do=0;Do<32768;++Do){var Uh=(Do&43690)>>1|(Do&21845)<<1;Uh=(Uh&52428)>>2|(Uh&13107)<<2,Uh=(Uh&61680)>>4|(Uh&3855)<<4,g3[Do]=((Uh&65280)>>8|(Uh&255)<<8)>>1}var q0=(function(e,t,r){for(var n=e.length,i=0,o=new bc(t);i<n;++i)e[i]&&++o[e[i]-1];var u=new bc(t);for(i=1;i<t;++i)u[i]=u[i-1]+o[i-1]<<1;var a;if(r){a=new bc(1<<t);var f=15-t;for(i=0;i<n;++i)if(e[i])for(var p=i<<4|e[i],g=t-e[i],b=u[e[i]-1]++<<g,S=b|(1<<g)-1;b<=S;++b)a[g3[b]>>f]=p}else for(a=new bc(n),i=0;i<n;++i)e[i]&&(a[i]=g3[u[e[i]-1]++]>>15-e[i]);return a}),xm=new kd(288);for(var Do=0;Do<144;++Do)xm[Do]=8;for(var Do=144;Do<256;++Do)xm[Do]=9;for(var Do=256;Do<280;++Do)xm[Do]=7;for(var Do=280;Do<288;++Do)xm[Do]=8;var Fx=new kd(32);for(var Do=0;Do<32;++Do)Fx[Do]=5;var kse=q0(xm,9,0),Mse=q0(Fx,5,0),pq=function(e){return(e+7)/8|0},Lse=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new kd(e.subarray(t,r))},Xf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Yv=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},R5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return{t:gq,l:0};if(i==1){var u=new kd(r[0].s+1);return u[r[0].s]=1,{t:u,l:1}}r.sort(function($,V){return $.f-V.f}),r.push({s:-1,f:25001});var a=r[0],f=r[1],p=0,g=1,b=2;for(r[0]={s:-1,f:a.f+f.f,l:a,r:f};g!=i-1;)a=r[r[p].f<r[b].f?p++:b++],f=r[p!=g&&r[p].f<r[b].f?p++:b++],r[g++]={s:-1,f:a.f+f.f,l:a,r:f};for(var S=o[0].s,n=1;n<i;++n)o[n].s>S&&(S=o[n].s);var _=new bc(S+1),P=y3(r[g-1],_,0);if(P>t){var n=0,k=0,M=P-t,D=1<<M;for(o.sort(function(V,U){return _[U.s]-_[V.s]||V.f-U.f});n<i;++n){var F=o[n].s;if(_[F]>t)k+=D-(1<<P-_[F]),_[F]=t;else break}for(k>>=M;k>0;){var B=o[n].s;_[B]<t?k-=1<<t-_[B]++-1:++n}for(;n>=0&&k;--n){var N=o[n].s;_[N]==t&&(--_[N],++k)}P=t}return{t:new kd(_),l:P}},y3=function(e,t,r){return e.s==-1?Math.max(y3(e.l,t,r+1),y3(e.r,t,r+1)):t[e.s]=r},fO=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new bc(++t),n=0,i=e[0],o=1,u=function(f){r[n++]=f},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(i),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(i);o=1,i=e[a]}return{c:r.subarray(0,n),n:t}},Zv=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},mq=function(e,t,r){var n=r.length,i=pq(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},hO=function(e,t,r,n,i,o,u,a,f,p,g){Xf(t,g++,r),++i[256];for(var b=R5(i,15),S=b.t,_=b.l,P=R5(o,15),k=P.t,M=P.l,D=fO(S),F=D.c,B=D.n,N=fO(k),$=N.c,V=N.n,U=new bc(19),X=0;X<F.length;++X)++U[F[X]&31];for(var X=0;X<$.length;++X)++U[$[X]&31];for(var Z=R5(U,7),oe=Z.t,re=Z.l,H=19;H>4&&!oe[cO[H-1]];--H);var ae=p+5<<3,se=Zv(i,xm)+Zv(o,Fx)+u,de=Zv(i,S)+Zv(o,k)+u+14+3*H+Zv(U,oe)+2*U[16]+3*U[17]+7*U[18];if(f>=0&&ae<=se&&ae<=de)return mq(t,g,e.subarray(f,f+p));var fe,Le,ye,xe;if(Xf(t,g,1+(de<se)),g+=2,de<se){fe=q0(S,_,0),Le=S,ye=q0(k,M,0),xe=k;var Se=q0(oe,re,0);Xf(t,g,B-257),Xf(t,g+5,V-1),Xf(t,g+10,H-4),g+=14;for(var X=0;X<H;++X)Xf(t,g+3*X,oe[cO[X]]);g+=3*H;for(var Re=[F,$],he=0;he<2;++he)for(var Ee=Re[he],X=0;X<Ee.length;++X){var we=Ee[X]&31;Xf(t,g,Se[we]),g+=oe[we],we>15&&(Xf(t,g,Ee[X]>>5&127),g+=Ee[X]>>12)}}else fe=kse,Le=xm,ye=Mse,xe=Fx;for(var X=0;X<a;++X){var Ne=n[X];if(Ne>255){var we=Ne>>18&31;Yv(t,g,fe[we+257]),g+=Le[we+257],we>7&&(Xf(t,g,Ne>>23&31),g+=iA[we]);var Fe=Ne&31;Yv(t,g,ye[Fe]),g+=xe[Fe],Fe>3&&(Yv(t,g,Ne>>5&8191),g+=aA[Fe])}else Yv(t,g,fe[Ne]),g+=Le[Ne]}return Yv(t,g,fe[256]),g+Le[256]},Rse=new nA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gq=new kd(0),Dse=function(e,t,r,n,i,o){var u=o.z||e.length,a=new kd(n+u+5*(1+Math.ceil(u/7e3))+i),f=a.subarray(n,a.length-i),p=o.l,g=(o.r||0)&7;if(t){g&&(f[0]=o.r>>3);for(var b=Rse[t-1],S=b>>13,_=b&8191,P=(1<<r)-1,k=o.p||new bc(32768),M=o.h||new bc(P+1),D=Math.ceil(r/3),F=2*D,B=function(st){return(e[st]^e[st+1]<<D^e[st+2]<<F)&P},N=new nA(25e3),$=new bc(288),V=new bc(32),U=0,X=0,Z=o.i||0,oe=0,re=o.w||0,H=0;Z+2<u;++Z){var ae=B(Z),se=Z&32767,de=M[ae];if(k[se]=de,M[ae]=se,re<=Z){var fe=u-Z;if((U>7e3||oe>24576)&&(fe>423||!p)){g=hO(e,f,0,N,$,V,X,oe,H,Z-H,g),oe=U=X=0,H=Z;for(var Le=0;Le<286;++Le)$[Le]=0;for(var Le=0;Le<30;++Le)V[Le]=0}var ye=2,xe=0,Se=_,Re=se-de&32767;if(fe>2&&ae==B(Z-Re))for(var he=Math.min(S,fe)-1,Ee=Math.min(32767,Z),we=Math.min(258,fe);Re<=Ee&&--Se&&se!=de;){if(e[Z+ye]==e[Z+ye-Re]){for(var Ne=0;Ne<we&&e[Z+Ne]==e[Z+Ne-Re];++Ne);if(Ne>ye){if(ye=Ne,xe=Re,Ne>he)break;for(var Fe=Math.min(Re,Ne-2),Xe=0,Le=0;Le<Fe;++Le){var Be=Z-Re+Le&32767,ot=k[Be],Ke=Be-ot&32767;Ke>Xe&&(Xe=Ke,de=Be)}}}se=de,de=k[se],Re+=se-de&32767}if(xe){N[oe++]=268435456|m3[ye]<<18|dO[xe];var it=m3[ye]&31,ke=dO[xe]&31;X+=iA[it]+aA[ke],++$[257+it],++V[ke],re=Z+ye,++U}else N[oe++]=e[Z],++$[e[Z]]}}for(Z=Math.max(Z,re);Z<u;++Z)N[oe++]=e[Z],++$[e[Z]];g=hO(e,f,p,N,$,V,X,oe,H,Z-H,g),p||(o.r=g&7|f[g/8|0]<<3,g-=7,o.h=M,o.p=k,o.i=Z,o.w=re)}else{for(var Z=o.w||0;Z<u+p;Z+=65535){var Nt=Z+65535;Nt>=u&&(f[g/8|0]=p,Nt=u),g=mq(f,g+1,e.subarray(Z,Nt))}o.i=u}return Lse(a,0,n+pq(g)+i)},yq=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length|0,u=0;u!=o;){for(var a=Math.min(u+2655,o);u<a;++u)i+=n+=r[u];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Ose=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),u=new kd(o.length+e.length);u.set(o),u.set(e,o.length),e=u,i.w=o.length}return Dse(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},vq=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Nse=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=yq();i.p(t.dictionary),vq(e,2,i.d())}};function v3(e,t){t||(t={});var r=yq();r.p(e);var n=Ose(e,t,t.dictionary?6:2,4);return Nse(n,t),vq(n,n.length-4,r.d()),n}var Fse=typeof TextDecoder<"u"&&new TextDecoder,Bse=0;try{Fse.decode(gq,{stream:!0}),Bse=1}catch{}function zse(e){if(Array.isArray(e))return e}function jse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,u,a=[],f=!0,p=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(f=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);f=!0);}catch(g){p=!0,i=g}finally{try{if(!f&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw i}}return a}}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qse(e,t){if(e){if(typeof e=="string")return pO(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pO(e,t):void 0}}function Vse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mO(e,t){return zse(e)||jse(e,t)||qse(e,t)||Vse()}function gO(e,t="utf8"){return new TextDecoder(t).decode(e)}const $se=new TextEncoder;function Gse(e){return $se.encode(e)}const Use=1024*8,Hse=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),D5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class oA{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=Use,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,o=t.byteLength-i;let u=i;(ArrayBuffer.isView(t)||t instanceof oA)&&(t.byteLength!==t.buffer.byteLength&&(u=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=D5[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===Hse&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+n));a.reverse();const f=new D5[r](a.buffer);return this.offset+=n,f.reverse(),f}const u=new D5[r](o);return this.offset+=n,u}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return gO(this.readBytes(t))}decodeText(t=1,r="utf8"){return gO(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Gse(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function nv(e){let t=e.length;for(;--t>=0;)e[t]=0}const Wse=3,Xse=258,bq=29,Yse=256,Zse=Yse+1+bq,_q=30,Kse=512,Jse=new Array((Zse+2)*2);nv(Jse);const Qse=new Array(_q*2);nv(Qse);const ele=new Array(Kse);nv(ele);const tle=new Array(Xse-Wse+1);nv(tle);const rle=new Array(bq);nv(rle);const nle=new Array(_q);nv(nle);const ile=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,u=0;for(;r!==0;){u=r>2e3?2e3:r,r-=u;do i=i+t[n++]|0,o=o+i|0;while(--u);i%=65521,o%=65521}return i|o<<16|0};var b3=ile;const ale=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},ole=new Uint32Array(ale()),sle=(e,t,r,n)=>{const i=ole,o=n+r;e^=-1;for(let u=n;u<o;u++)e=e>>>8^i[(e^t[u])&255];return e^-1};var af=sle,_3={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},xq={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const lle=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ule=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)lle(r,n)&&(e[n]=r[n])}}return e},cle=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let u=e[n];r.set(u,i),i+=u.length}return r},wq={assign:ule,flattenChunks:cle};let Sq=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Sq=!1}const l1=new Uint8Array(256);for(let e=0;e<256;e++)l1[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;l1[254]=l1[254]=1;var dle=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,u=e.length,a=0;for(i=0;i<u;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const fle=(e,t)=>{if(t<65534&&e.subarray&&Sq)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var hle=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let u=e[n++];if(u<128){o[i++]=u;continue}let a=l1[u];if(a>4){o[i++]=65533,n+=a-1;continue}for(u&=a===2?31:a===3?15:7;a>1&&n<r;)u=u<<6|e[n++]&63,a--;if(a>1){o[i++]=65533;continue}u<65536?o[i++]=u:(u-=65536,o[i++]=55296|u>>10&1023,o[i++]=56320|u&1023)}return fle(o,i)},ple=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+l1[e[r]]>t?r:t},x3={string2buf:dle,buf2string:hle,utf8border:ple};function mle(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var gle=mle;const u_=16209,yle=16191;var vle=function(t,r){let n,i,o,u,a,f,p,g,b,S,_,P,k,M,D,F,B,N,$,V,U,X,Z,oe;const re=t.state;n=t.next_in,Z=t.input,i=n+(t.avail_in-5),o=t.next_out,oe=t.output,u=o-(r-t.avail_out),a=o+(t.avail_out-257),f=re.dmax,p=re.wsize,g=re.whave,b=re.wnext,S=re.window,_=re.hold,P=re.bits,k=re.lencode,M=re.distcode,D=(1<<re.lenbits)-1,F=(1<<re.distbits)-1;e:do{P<15&&(_+=Z[n++]<<P,P+=8,_+=Z[n++]<<P,P+=8),B=k[_&D];t:for(;;){if(N=B>>>24,_>>>=N,P-=N,N=B>>>16&255,N===0)oe[o++]=B&65535;else if(N&16){$=B&65535,N&=15,N&&(P<N&&(_+=Z[n++]<<P,P+=8),$+=_&(1<<N)-1,_>>>=N,P-=N),P<15&&(_+=Z[n++]<<P,P+=8,_+=Z[n++]<<P,P+=8),B=M[_&F];r:for(;;){if(N=B>>>24,_>>>=N,P-=N,N=B>>>16&255,N&16){if(V=B&65535,N&=15,P<N&&(_+=Z[n++]<<P,P+=8,P<N&&(_+=Z[n++]<<P,P+=8)),V+=_&(1<<N)-1,V>f){t.msg="invalid distance too far back",re.mode=u_;break e}if(_>>>=N,P-=N,N=o-u,V>N){if(N=V-N,N>g&&re.sane){t.msg="invalid distance too far back",re.mode=u_;break e}if(U=0,X=S,b===0){if(U+=p-N,N<$){$-=N;do oe[o++]=S[U++];while(--N);U=o-V,X=oe}}else if(b<N){if(U+=p+b-N,N-=b,N<$){$-=N;do oe[o++]=S[U++];while(--N);if(U=0,b<$){N=b,$-=N;do oe[o++]=S[U++];while(--N);U=o-V,X=oe}}}else if(U+=b-N,N<$){$-=N;do oe[o++]=S[U++];while(--N);U=o-V,X=oe}for(;$>2;)oe[o++]=X[U++],oe[o++]=X[U++],oe[o++]=X[U++],$-=3;$&&(oe[o++]=X[U++],$>1&&(oe[o++]=X[U++]))}else{U=o-V;do oe[o++]=oe[U++],oe[o++]=oe[U++],oe[o++]=oe[U++],$-=3;while($>2);$&&(oe[o++]=oe[U++],$>1&&(oe[o++]=oe[U++]))}}else if((N&64)===0){B=M[(B&65535)+(_&(1<<N)-1)];continue r}else{t.msg="invalid distance code",re.mode=u_;break e}break}}else if((N&64)===0){B=k[(B&65535)+(_&(1<<N)-1)];continue t}else if(N&32){re.mode=yle;break e}else{t.msg="invalid literal/length code",re.mode=u_;break e}break}}while(n<i&&o<a);$=P>>3,n-=$,P-=$<<3,_&=(1<<P)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),re.hold=_,re.bits=P};const Pg=15,yO=852,vO=592,bO=0,O5=1,_O=2,ble=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_le=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xle=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),wle=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Sle=(e,t,r,n,i,o,u,a)=>{const f=a.bits;let p=0,g=0,b=0,S=0,_=0,P=0,k=0,M=0,D=0,F=0,B,N,$,V,U,X=null,Z;const oe=new Uint16Array(Pg+1),re=new Uint16Array(Pg+1);let H=null,ae,se,de;for(p=0;p<=Pg;p++)oe[p]=0;for(g=0;g<n;g++)oe[t[r+g]]++;for(_=f,S=Pg;S>=1&&oe[S]===0;S--);if(_>S&&(_=S),S===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(b=1;b<S&&oe[b]===0;b++);for(_<b&&(_=b),M=1,p=1;p<=Pg;p++)if(M<<=1,M-=oe[p],M<0)return-1;if(M>0&&(e===bO||S!==1))return-1;for(re[1]=0,p=1;p<Pg;p++)re[p+1]=re[p]+oe[p];for(g=0;g<n;g++)t[r+g]!==0&&(u[re[t[r+g]]++]=g);if(e===bO?(X=H=u,Z=20):e===O5?(X=ble,H=_le,Z=257):(X=xle,H=wle,Z=0),F=0,g=0,p=b,U=o,P=_,k=0,$=-1,D=1<<_,V=D-1,e===O5&&D>yO||e===_O&&D>vO)return 1;for(;;){ae=p-k,u[g]+1<Z?(se=0,de=u[g]):u[g]>=Z?(se=H[u[g]-Z],de=X[u[g]-Z]):(se=96,de=0),B=1<<p-k,N=1<<P,b=N;do N-=B,i[U+(F>>k)+N]=ae<<24|se<<16|de|0;while(N!==0);for(B=1<<p-1;F&B;)B>>=1;if(B!==0?(F&=B-1,F+=B):F=0,g++,--oe[p]===0){if(p===S)break;p=t[r+u[g]]}if(p>_&&(F&V)!==$){for(k===0&&(k=_),U+=b,P=p-k,M=1<<P;P+k<S&&(M-=oe[P+k],!(M<=0));)P++,M<<=1;if(D+=1<<P,e===O5&&D>yO||e===_O&&D>vO)return 1;$=F&V,i[$]=_<<24|P<<16|U-o|0}}return F!==0&&(i[U+F]=p-k<<24|64<<16|0),a.bits=_,0};var V0=Sle;const Cle=0,Cq=1,Eq=2,{Z_FINISH:xO,Z_BLOCK:Ele,Z_TREES:c_,Z_OK:wm,Z_STREAM_END:Tle,Z_NEED_DICT:Ile,Z_STREAM_ERROR:td,Z_DATA_ERROR:Tq,Z_MEM_ERROR:Iq,Z_BUF_ERROR:Ple,Z_DEFLATED:wO}=xq,_w=16180,SO=16181,CO=16182,EO=16183,TO=16184,IO=16185,PO=16186,AO=16187,kO=16188,MO=16189,Bx=16190,Yf=16191,N5=16192,LO=16193,F5=16194,RO=16195,DO=16196,OO=16197,NO=16198,d_=16199,f_=16200,FO=16201,BO=16202,zO=16203,jO=16204,qO=16205,B5=16206,VO=16207,$O=16208,$o=16209,Pq=16210,Aq=16211,Ale=852,kle=592,Mle=15,Lle=Mle,GO=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Rle(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bm=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<_w||t.mode>Aq?1:0},kq=e=>{if(Bm(e))return td;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=_w,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Ale),t.distcode=t.distdyn=new Int32Array(kle),t.sane=1,t.back=-1,wm},Mq=e=>{if(Bm(e))return td;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,kq(e)},Lq=(e,t)=>{let r;if(Bm(e))return td;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?td:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Mq(e))},Rq=(e,t)=>{if(!e)return td;const r=new Rle;e.state=r,r.strm=e,r.window=null,r.mode=_w;const n=Lq(e,t);return n!==wm&&(e.state=null),n},Dle=e=>Rq(e,Lle);let UO=!0,z5,j5;const Ole=e=>{if(UO){z5=new Int32Array(512),j5=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(V0(Cq,e.lens,0,288,z5,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;V0(Eq,e.lens,0,32,j5,0,e.work,{bits:5}),UO=!1}e.lencode=z5,e.lenbits=9,e.distcode=j5,e.distbits=5},Dq=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Nle=(e,t)=>{let r,n,i,o,u,a,f,p,g,b,S,_,P,k,M=0,D,F,B,N,$,V,U,X;const Z=new Uint8Array(4);let oe,re;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bm(e)||!e.output||!e.input&&e.avail_in!==0)return td;r=e.state,r.mode===Yf&&(r.mode=N5),u=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,p=r.hold,g=r.bits,b=a,S=f,X=wm;e:for(;;)switch(r.mode){case _w:if(r.wrap===0){r.mode=N5;break}for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.wrap&2&&p===35615){r.wbits===0&&(r.wbits=15),r.check=0,Z[0]=p&255,Z[1]=p>>>8&255,r.check=af(r.check,Z,2,0),p=0,g=0,r.mode=SO;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((p&255)<<8)+(p>>8))%31){e.msg="incorrect header check",r.mode=$o;break}if((p&15)!==wO){e.msg="unknown compression method",r.mode=$o;break}if(p>>>=4,g-=4,U=(p&15)+8,r.wbits===0&&(r.wbits=U),U>15||U>r.wbits){e.msg="invalid window size",r.mode=$o;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=p&512?MO:Yf,p=0,g=0;break;case SO:for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.flags=p,(r.flags&255)!==wO){e.msg="unknown compression method",r.mode=$o;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=$o;break}r.head&&(r.head.text=p>>8&1),r.flags&512&&r.wrap&4&&(Z[0]=p&255,Z[1]=p>>>8&255,r.check=af(r.check,Z,2,0)),p=0,g=0,r.mode=CO;case CO:for(;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.head&&(r.head.time=p),r.flags&512&&r.wrap&4&&(Z[0]=p&255,Z[1]=p>>>8&255,Z[2]=p>>>16&255,Z[3]=p>>>24&255,r.check=af(r.check,Z,4,0)),p=0,g=0,r.mode=EO;case EO:for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.head&&(r.head.xflags=p&255,r.head.os=p>>8),r.flags&512&&r.wrap&4&&(Z[0]=p&255,Z[1]=p>>>8&255,r.check=af(r.check,Z,2,0)),p=0,g=0,r.mode=TO;case TO:if(r.flags&1024){for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.length=p,r.head&&(r.head.extra_len=p),r.flags&512&&r.wrap&4&&(Z[0]=p&255,Z[1]=p>>>8&255,r.check=af(r.check,Z,2,0)),p=0,g=0}else r.head&&(r.head.extra=null);r.mode=IO;case IO:if(r.flags&1024&&(_=r.length,_>a&&(_=a),_&&(r.head&&(U=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+_),U)),r.flags&512&&r.wrap&4&&(r.check=af(r.check,n,_,o)),a-=_,o+=_,r.length-=_),r.length))break e;r.length=0,r.mode=PO;case PO:if(r.flags&2048){if(a===0)break e;_=0;do U=n[o+_++],r.head&&U&&r.length<65536&&(r.head.name+=String.fromCharCode(U));while(U&&_<a);if(r.flags&512&&r.wrap&4&&(r.check=af(r.check,n,_,o)),a-=_,o+=_,U)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=AO;case AO:if(r.flags&4096){if(a===0)break e;_=0;do U=n[o+_++],r.head&&U&&r.length<65536&&(r.head.comment+=String.fromCharCode(U));while(U&&_<a);if(r.flags&512&&r.wrap&4&&(r.check=af(r.check,n,_,o)),a-=_,o+=_,U)break e}else r.head&&(r.head.comment=null);r.mode=kO;case kO:if(r.flags&512){for(;g<16;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.wrap&4&&p!==(r.check&65535)){e.msg="header crc mismatch",r.mode=$o;break}p=0,g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Yf;break;case MO:for(;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}e.adler=r.check=GO(p),p=0,g=0,r.mode=Bx;case Bx:if(r.havedict===0)return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=a,r.hold=p,r.bits=g,Ile;e.adler=r.check=1,r.mode=Yf;case Yf:if(t===Ele||t===c_)break e;case N5:if(r.last){p>>>=g&7,g-=g&7,r.mode=B5;break}for(;g<3;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}switch(r.last=p&1,p>>>=1,g-=1,p&3){case 0:r.mode=LO;break;case 1:if(Ole(r),r.mode=d_,t===c_){p>>>=2,g-=2;break e}break;case 2:r.mode=DO;break;case 3:e.msg="invalid block type",r.mode=$o}p>>>=2,g-=2;break;case LO:for(p>>>=g&7,g-=g&7;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if((p&65535)!==(p>>>16^65535)){e.msg="invalid stored block lengths",r.mode=$o;break}if(r.length=p&65535,p=0,g=0,r.mode=F5,t===c_)break e;case F5:r.mode=RO;case RO:if(_=r.length,_){if(_>a&&(_=a),_>f&&(_=f),_===0)break e;i.set(n.subarray(o,o+_),u),a-=_,o+=_,f-=_,u+=_,r.length-=_;break}r.mode=Yf;break;case DO:for(;g<14;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.nlen=(p&31)+257,p>>>=5,g-=5,r.ndist=(p&31)+1,p>>>=5,g-=5,r.ncode=(p&15)+4,p>>>=4,g-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=$o;break}r.have=0,r.mode=OO;case OO:for(;r.have<r.ncode;){for(;g<3;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.lens[H[r.have++]]=p&7,p>>>=3,g-=3}for(;r.have<19;)r.lens[H[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,oe={bits:r.lenbits},X=V0(Cle,r.lens,0,19,r.lencode,0,r.work,oe),r.lenbits=oe.bits,X){e.msg="invalid code lengths set",r.mode=$o;break}r.have=0,r.mode=NO;case NO:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[p&(1<<r.lenbits)-1],D=M>>>24,F=M>>>16&255,B=M&65535,!(D<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(B<16)p>>>=D,g-=D,r.lens[r.have++]=B;else{if(B===16){for(re=D+2;g<re;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(p>>>=D,g-=D,r.have===0){e.msg="invalid bit length repeat",r.mode=$o;break}U=r.lens[r.have-1],_=3+(p&3),p>>>=2,g-=2}else if(B===17){for(re=D+3;g<re;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=D,g-=D,U=0,_=3+(p&7),p>>>=3,g-=3}else{for(re=D+7;g<re;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=D,g-=D,U=0,_=11+(p&127),p>>>=7,g-=7}if(r.have+_>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=$o;break}for(;_--;)r.lens[r.have++]=U}}if(r.mode===$o)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=$o;break}if(r.lenbits=9,oe={bits:r.lenbits},X=V0(Cq,r.lens,0,r.nlen,r.lencode,0,r.work,oe),r.lenbits=oe.bits,X){e.msg="invalid literal/lengths set",r.mode=$o;break}if(r.distbits=6,r.distcode=r.distdyn,oe={bits:r.distbits},X=V0(Eq,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,oe),r.distbits=oe.bits,X){e.msg="invalid distances set",r.mode=$o;break}if(r.mode=d_,t===c_)break e;case d_:r.mode=f_;case f_:if(a>=6&&f>=258){e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=a,r.hold=p,r.bits=g,vle(e,S),u=e.next_out,i=e.output,f=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,p=r.hold,g=r.bits,r.mode===Yf&&(r.back=-1);break}for(r.back=0;M=r.lencode[p&(1<<r.lenbits)-1],D=M>>>24,F=M>>>16&255,B=M&65535,!(D<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(F&&(F&240)===0){for(N=D,$=F,V=B;M=r.lencode[V+((p&(1<<N+$)-1)>>N)],D=M>>>24,F=M>>>16&255,B=M&65535,!(N+D<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=N,g-=N,r.back+=N}if(p>>>=D,g-=D,r.back+=D,r.length=B,F===0){r.mode=qO;break}if(F&32){r.back=-1,r.mode=Yf;break}if(F&64){e.msg="invalid literal/length code",r.mode=$o;break}r.extra=F&15,r.mode=FO;case FO:if(r.extra){for(re=r.extra;g<re;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.length+=p&(1<<r.extra)-1,p>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=BO;case BO:for(;M=r.distcode[p&(1<<r.distbits)-1],D=M>>>24,F=M>>>16&255,B=M&65535,!(D<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if((F&240)===0){for(N=D,$=F,V=B;M=r.distcode[V+((p&(1<<N+$)-1)>>N)],D=M>>>24,F=M>>>16&255,B=M&65535,!(N+D<=g);){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}p>>>=N,g-=N,r.back+=N}if(p>>>=D,g-=D,r.back+=D,F&64){e.msg="invalid distance code",r.mode=$o;break}r.offset=B,r.extra=F&15,r.mode=zO;case zO:if(r.extra){for(re=r.extra;g<re;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}r.offset+=p&(1<<r.extra)-1,p>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=$o;break}r.mode=jO;case jO:if(f===0)break e;if(_=S-f,r.offset>_){if(_=r.offset-_,_>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=$o;break}_>r.wnext?(_-=r.wnext,P=r.wsize-_):P=r.wnext-_,_>r.length&&(_=r.length),k=r.window}else k=i,P=u-r.offset,_=r.length;_>f&&(_=f),f-=_,r.length-=_;do i[u++]=k[P++];while(--_);r.length===0&&(r.mode=f_);break;case qO:if(f===0)break e;i[u++]=r.length,f--,r.mode=f_;break;case B5:if(r.wrap){for(;g<32;){if(a===0)break e;a--,p|=n[o++]<<g,g+=8}if(S-=f,e.total_out+=S,r.total+=S,r.wrap&4&&S&&(e.adler=r.check=r.flags?af(r.check,i,S,u-S):b3(r.check,i,S,u-S)),S=f,r.wrap&4&&(r.flags?p:GO(p))!==r.check){e.msg="incorrect data check",r.mode=$o;break}p=0,g=0}r.mode=VO;case VO:if(r.wrap&&r.flags){for(;g<32;){if(a===0)break e;a--,p+=n[o++]<<g,g+=8}if(r.wrap&4&&p!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=$o;break}p=0,g=0}r.mode=$O;case $O:X=Tle;break e;case $o:X=Tq;break e;case Pq:return Iq;case Aq:default:return td}return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=a,r.hold=p,r.bits=g,(r.wsize||S!==e.avail_out&&r.mode<$o&&(r.mode<B5||t!==xO))&&Dq(e,e.output,e.next_out,S-e.avail_out),b-=e.avail_in,S-=e.avail_out,e.total_in+=b,e.total_out+=S,r.total+=S,r.wrap&4&&S&&(e.adler=r.check=r.flags?af(r.check,i,S,e.next_out-S):b3(r.check,i,S,e.next_out-S)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Yf?128:0)+(r.mode===d_||r.mode===F5?256:0),(b===0&&S===0||t===xO)&&X===wm&&(X=Ple),X},Fle=e=>{if(Bm(e))return td;let t=e.state;return t.window&&(t.window=null),e.state=null,wm},Ble=(e,t)=>{if(Bm(e))return td;const r=e.state;return(r.wrap&2)===0?td:(r.head=t,t.done=!1,wm)},zle=(e,t)=>{const r=t.length;let n,i,o;return Bm(e)||(n=e.state,n.wrap!==0&&n.mode!==Bx)?td:n.mode===Bx&&(i=1,i=b3(i,t,r,0),i!==n.check)?Tq:(o=Dq(e,t,r,r),o?(n.mode=Pq,Iq):(n.havedict=1,wm))};var jle=Mq,qle=Lq,Vle=kq,$le=Dle,Gle=Rq,Ule=Nle,Hle=Fle,Wle=Ble,Xle=zle,Yle="pako inflate (from Nodeca project)",Qf={inflateReset:jle,inflateReset2:qle,inflateResetKeep:Vle,inflateInit:$le,inflateInit2:Gle,inflate:Ule,inflateEnd:Hle,inflateGetHeader:Wle,inflateSetDictionary:Xle,inflateInfo:Yle};function Zle(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Kle=Zle;const Oq=Object.prototype.toString,{Z_NO_FLUSH:Jle,Z_FINISH:Qle,Z_OK:u1,Z_STREAM_END:q5,Z_NEED_DICT:V5,Z_STREAM_ERROR:eue,Z_DATA_ERROR:HO,Z_MEM_ERROR:tue}=xq;function W1(e){this.options=wq.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gle,this.strm.avail_out=0;let r=Qf.inflateInit2(this.strm,t.windowBits);if(r!==u1)throw new Error(_3[r]);if(this.header=new Kle,Qf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=x3.string2buf(t.dictionary):Oq.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Qf.inflateSetDictionary(this.strm,t.dictionary),r!==u1)))throw new Error(_3[r])}W1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,u,a;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?Qle:Jle,Oq.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Qf.inflate(r,u),o===V5&&i&&(o=Qf.inflateSetDictionary(r,i),o===u1?o=Qf.inflate(r,u):o===HO&&(o=V5));r.avail_in>0&&o===q5&&r.state.wrap>0&&e[r.next_in]!==0;)Qf.inflateReset(r),o=Qf.inflate(r,u);switch(o){case eue:case HO:case V5:case tue:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===q5))if(this.options.to==="string"){let f=x3.utf8border(r.output,r.next_out),p=r.next_out-f,g=x3.buf2string(r.output,f);r.next_out=p,r.avail_out=n-p,p&&r.output.set(r.output.subarray(f,f+p),0),this.onData(g)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===u1&&a===0)){if(o===q5)return o=Qf.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};W1.prototype.onData=function(e){this.chunks.push(e)};W1.prototype.onEnd=function(e){e===u1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wq.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function rue(e,t){const r=new W1(t);if(r.push(e),r.err)throw r.msg||_3[r.err];return r.result}var nue=W1,iue=rue,aue={Inflate:nue,inflate:iue};const{Inflate:oue,inflate:sue}=aue;var WO=oue,lue=sue;const Nq=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Nq[e]=t}const XO=4294967295;function uue(e,t,r){let n=e;for(let i=0;i<r;i++)n=Nq[(n^t[i])&255]^n>>>8;return n}function cue(e,t){return(uue(XO,e,t)^XO)>>>0}function YO(e,t,r){const n=e.readUint32(),i=cue(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function Fq(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function Bq(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function zq(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function jq(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=e[o]+(r[o]>>1)&255;for(;o<n;o++)t[o]=e[o]+(t[o-i]+r[o]>>1)&255}}function qq(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=e[o]+r[o]&255;for(;o<n;o++)t[o]=e[o]+due(t[o-i],r[o],r[o-i])&255}}function due(e,t,r){const n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),u=Math.abs(n-r);return i<=o&&i<=u?e:o<=u?t:r}function fue(e,t,r,n,i,o){switch(e){case 0:Fq(t,r,i);break;case 1:Bq(t,r,i,o);break;case 2:zq(t,r,n,i);break;case 3:jq(t,r,n,i,o);break;case 4:qq(t,r,n,i,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}const hue=new Uint16Array([255]),pue=new Uint8Array(hue.buffer),mue=pue[0]===255;function gue(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,f=new Uint8Array(n*r*a);let p=0;for(let g=0;g<7;g++){const b=u[g],S=Math.ceil((r-b.x)/b.xStep),_=Math.ceil((n-b.y)/b.yStep);if(S<=0||_<=0)continue;const P=S*a,k=new Uint8Array(P);for(let M=0;M<_;M++){const D=t[p++],F=t.subarray(p,p+P);p+=P;const B=new Uint8Array(P);fue(D,F,B,k,P,a),k.set(B);for(let N=0;N<S;N++){const $=b.x+N*b.xStep,V=b.y+M*b.yStep;if(!($>=r||V>=n))for(let U=0;U<a;U++)f[(V*r+$)*a+U]=B[N*a+U]}}}if(o===16){const g=new Uint16Array(f.buffer);if(mue)for(let b=0;b<g.length;b++)g[b]=yue(g[b]);return g}else return f}function yue(e){return(e&255)<<8|e>>8&255}const vue=new Uint16Array([255]),bue=new Uint8Array(vue.buffer),_ue=bue[0]===255,xue=new Uint8Array(0);function ZO(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,u=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*r),f=new Uint8Array(n*a);let p=xue,g=0,b,S;for(let _=0;_<n;_++){switch(b=t.subarray(g+1,g+1+a),S=f.subarray(_*a,(_+1)*a),t[g]){case 0:Fq(b,S,a);break;case 1:Bq(b,S,a,u);break;case 2:zq(b,S,p,a);break;case 3:jq(b,S,p,a,u);break;case 4:qq(b,S,p,a,u);break;default:throw new Error(`Unsupported filter: ${t[g]}`)}p=S,g+=a+1}if(o===16){const _=new Uint16Array(f.buffer);if(_ue)for(let P=0;P<_.length;P++)_[P]=wue(_[P]);return _}else return f}function wue(e){return(e&255)<<8|e>>8&255}const ax=Uint8Array.of(137,80,78,71,13,10,26,10);function KO(e){if(!Sue(e.readBytes(ax.length)))throw new Error("wrong PNG signature")}function Sue(e){if(e.length<ax.length)return!1;for(let t=0;t<ax.length;t++)if(e[t]!==ax[t])return!1;return!0}const Cue="tEXt",Eue=0,Vq=new TextDecoder("latin1");function Tue(e){if(Pue(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Iue=/^[\u0000-\u00FF]*$/;function Pue(e){if(!Iue.test(e))throw new Error("invalid latin1 text")}function Aue(e,t,r){const n=$q(t);e[n]=kue(t,r-n.length-1)}function $q(e){for(e.mark();e.readByte()!==Eue;);const t=e.offset;e.reset();const r=Vq.decode(e.readBytes(t-e.offset-1));return e.skip(1),Tue(r),r}function kue(e,t){return Vq.decode(e.readBytes(t))}const mc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},$5={UNKNOWN:-1,DEFLATE:0},JO={UNKNOWN:-1,ADAPTIVE:0},G5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},h_={NONE:0,BACKGROUND:1,PREVIOUS:2},U5={SOURCE:0,OVER:1};class Mue extends oA{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new WO,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=$5.UNKNOWN,this._filterMethod=JO.UNKNOWN,this._interlaceMethod=G5.UNKNOWN,this._colorType=mc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(KO(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(KO(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case Cue:Aue(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?YO(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?YO(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=Lue(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case mc.GREYSCALE:n=1;break;case mc.TRUECOLOUR:n=3;break;case mc.INDEXED_COLOUR:n=1;break;case mc.GREYSCALE_ALPHA:n=2;break;case mc.TRUECOLOUR_ALPHA:n=4;break;case mc.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==$5.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case mc.GREYSCALE:case mc.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case mc.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case mc.UNKNOWN:case mc.GREYSCALE_ALPHA:case mc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=$q(this),n=this.readUint8();if(n!==$5.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:lue(i)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=ZO({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case h_.NONE:break;case h_.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const u=(i*t.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)n.data[u+a]=0}break;case h_.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,i=(o,u)=>{const a=((o+r.yOffset)*this._png.width+r.xOffset+u)*this._png.channels,f=(o*r.width+u)*this._png.channels;return{index:a,frameIndex:f}};switch(r.blendOp){case U5.SOURCE:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:f}=i(o,u);for(let p=0;p<this._png.channels;p++)t.data[a+p]=r.data[f+p]}break;case U5.OVER:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:f}=i(o,u);for(let p=0;p<this._png.channels;p++){const g=r.data[f+this._png.channels-1]/n,b=p%(this._png.channels-1)===0?1:r.data[f+p],S=Math.floor(g*b+(1-g)*t.data[a+p]);t.data[a+p]+=S}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==JO.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===G5.NO_INTERLACE)this._png.data=ZO({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===G5.ADAM7)this._png.data=gue({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:h_.NONE,blendOp:U5.SOURCE,data:t}),this._inflator=new WO,this._writingDataChunks=!1}}function Lue(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var QO;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(QO||(QO={}));function Rue(e,t){return new Mue(e,t).decode()}var Si=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function H5(){Si.console&&typeof Si.console.log=="function"&&Si.console.log.apply(Si.console,arguments)}var po={log:H5,warn:function(e){Si.console&&(typeof Si.console.warn=="function"?Si.console.warn.apply(Si.console,arguments):H5.call(null,arguments))},error:function(e){Si.console&&(typeof Si.console.error=="function"?Si.console.error.apply(Si.console,arguments):H5(e))}};function W5(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Qp(n.response,t,r)},n.onerror=function(){po.error("could not download file")},n.send()}function eN(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function p_(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Qp=Si.saveAs||((typeof window>"u"?"undefined":Ka(window))!=="object"||window!==Si?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Si.URL||Si.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?eN(i.href)?W5(e,t,r):p_(i,i.target="_blank"):p_(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){p_(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(eN(e))W5(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){p_(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Ka(o)!=="object"&&(po.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return W5(e,t,r);var i=e.type==="application/octet-stream",o=/constructor/i.test(Si.HTMLElement)||Si.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&o)&&(typeof FileReader>"u"?"undefined":Ka(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var g=a.result;g=u?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},a.readAsDataURL(e)}else{var f=Si.URL||Si.webkitURL,p=f.createObjectURL(e);n?n.location=p:location.href=p,n=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Gq(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,u=i.exec(e);u&&(t=o(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return a.length==1&&(a="0"+a),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+a+f+p}}var ox=Si.atob.bind(Si),tN=Si.btoa.bind(Si);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function X5(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r=hu(r,n,i,o,t[0],7,-680876936),o=hu(o,r,n,i,t[1],12,-389564586),i=hu(i,o,r,n,t[2],17,606105819),n=hu(n,i,o,r,t[3],22,-1044525330),r=hu(r,n,i,o,t[4],7,-176418897),o=hu(o,r,n,i,t[5],12,1200080426),i=hu(i,o,r,n,t[6],17,-1473231341),n=hu(n,i,o,r,t[7],22,-45705983),r=hu(r,n,i,o,t[8],7,1770035416),o=hu(o,r,n,i,t[9],12,-1958414417),i=hu(i,o,r,n,t[10],17,-42063),n=hu(n,i,o,r,t[11],22,-1990404162),r=hu(r,n,i,o,t[12],7,1804603682),o=hu(o,r,n,i,t[13],12,-40341101),i=hu(i,o,r,n,t[14],17,-1502002290),r=pu(r,n=hu(n,i,o,r,t[15],22,1236535329),i,o,t[1],5,-165796510),o=pu(o,r,n,i,t[6],9,-1069501632),i=pu(i,o,r,n,t[11],14,643717713),n=pu(n,i,o,r,t[0],20,-373897302),r=pu(r,n,i,o,t[5],5,-701558691),o=pu(o,r,n,i,t[10],9,38016083),i=pu(i,o,r,n,t[15],14,-660478335),n=pu(n,i,o,r,t[4],20,-405537848),r=pu(r,n,i,o,t[9],5,568446438),o=pu(o,r,n,i,t[14],9,-1019803690),i=pu(i,o,r,n,t[3],14,-187363961),n=pu(n,i,o,r,t[8],20,1163531501),r=pu(r,n,i,o,t[13],5,-1444681467),o=pu(o,r,n,i,t[2],9,-51403784),i=pu(i,o,r,n,t[7],14,1735328473),r=mu(r,n=pu(n,i,o,r,t[12],20,-1926607734),i,o,t[5],4,-378558),o=mu(o,r,n,i,t[8],11,-2022574463),i=mu(i,o,r,n,t[11],16,1839030562),n=mu(n,i,o,r,t[14],23,-35309556),r=mu(r,n,i,o,t[1],4,-1530992060),o=mu(o,r,n,i,t[4],11,1272893353),i=mu(i,o,r,n,t[7],16,-155497632),n=mu(n,i,o,r,t[10],23,-1094730640),r=mu(r,n,i,o,t[13],4,681279174),o=mu(o,r,n,i,t[0],11,-358537222),i=mu(i,o,r,n,t[3],16,-722521979),n=mu(n,i,o,r,t[6],23,76029189),r=mu(r,n,i,o,t[9],4,-640364487),o=mu(o,r,n,i,t[12],11,-421815835),i=mu(i,o,r,n,t[15],16,530742520),r=gu(r,n=mu(n,i,o,r,t[2],23,-995338651),i,o,t[0],6,-198630844),o=gu(o,r,n,i,t[7],10,1126891415),i=gu(i,o,r,n,t[14],15,-1416354905),n=gu(n,i,o,r,t[5],21,-57434055),r=gu(r,n,i,o,t[12],6,1700485571),o=gu(o,r,n,i,t[3],10,-1894986606),i=gu(i,o,r,n,t[10],15,-1051523),n=gu(n,i,o,r,t[1],21,-2054922799),r=gu(r,n,i,o,t[8],6,1873313359),o=gu(o,r,n,i,t[15],10,-30611744),i=gu(i,o,r,n,t[6],15,-1560198380),n=gu(n,i,o,r,t[13],21,1309151649),r=gu(r,n,i,o,t[4],6,-145523070),o=gu(o,r,n,i,t[11],10,-1120210379),i=gu(i,o,r,n,t[2],15,718787259),n=gu(n,i,o,r,t[9],21,-343485551),e[0]=Qh(r,e[0]),e[1]=Qh(n,e[1]),e[2]=Qh(i,e[2]),e[3]=Qh(o,e[3])}function xw(e,t,r,n,i,o){return t=Qh(Qh(t,e),Qh(n,o)),Qh(t<<i|t>>>32-i,r)}function hu(e,t,r,n,i,o,u){return xw(t&r|~t&n,e,t,i,o,u)}function pu(e,t,r,n,i,o,u){return xw(t&n|r&~n,e,t,i,o,u)}function mu(e,t,r,n,i,o,u){return xw(t^r^n,e,t,i,o,u)}function gu(e,t,r,n,i,o,u){return xw(r^(t|~n),e,t,i,o,u)}function Uq(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)X5(n,Due(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(X5(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,X5(n,i),n}function Due(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var rN="0123456789abcdef".split("");function Oue(e){for(var t="",r=0;r<4;r++)t+=rN[e>>8*r+4&15]+rN[e>>8*r&15];return t}function Nue(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function w3(e){return Uq(e).map(Nue).join("")}var Fue=(function(e){for(var t=0;t<e.length;t++)e[t]=Oue(e[t]);return e.join("")})(Uq("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qh(e,t){if(Fue){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function S3(e,t){var r,n,i,o;if(e!==r){for(var u=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),a=[],f=0;f<256;f++)a[f]=f;var p=0;for(f=0;f<256;f++){var g=a[f];p=(p+g+u.charCodeAt(f))%256,a[f]=a[p],a[p]=g}r=e,n=a}else a=n;var b=t.length,S=0,_=0,P="";for(f=0;f<b;f++)_=(_+(g=a[S=(S+1)%256]))%256,a[S]=a[_],a[_]=g,u=a[(a[S]+a[_])%256],P+=String.fromCharCode(t.charCodeAt(f)^u);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var nN={print:4,modify:8,copy:16,"annot-forms":32};function $g(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(nN.perm!==void 0)throw new Error("Invalid permission: "+a);i+=nN[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),u=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^i)),this.encryptionKey=w3(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=S3(this.encryptionKey,this.padding)}function Gg(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function iN(e){if(Ka(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var o=Math.random().toString(35);return t[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[r]){var u=t[r][o];try{u[0].apply(e,n)}catch(a){Si.console&&po.error("jsPDF PubSub Error",a.message,a)}u[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function zx(e){if(!(this instanceof zx))return new zx(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Hq(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function nm(e,t,r,n,i){if(!(this instanceof nm))return new nm(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Hq.call(this,n,i)}function dy(e,t,r,n,i){if(!(this instanceof dy))return new dy(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Hq.call(this,n,i)}function oi(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],u=[],a=1,f=16,p="S",g=null;Ka(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,o=e.compress||e.compressPdf||o,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),p=e.defaultPathOperation||"S"),u=e.filters||(o===!0?["FlateEncode"]:u),n=n||"mm",r=(""+(r||"P")).toLowerCase();var b=e.putOnlyUsedFonts||!1,S={},_={internal:{},__private__:{}};_.__private__.PubSub=iN;var P="1.3",k=_.__private__.getPdfVersion=function(){return P};_.__private__.setPdfVersion=function(ue){P=ue};var M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return M};var D=_.__private__.getPageFormat=function(ue){return M[ue]};i=i||"a4";var F="compat",B="advanced",N=F;function $(){this.saveGraphicsState(),$e(new en(Ge,0,0,-Ge,0,go()*Ge).toString()+" cm"),this.setFontSize(this.getFontSize()/Ge),p="n",N=B}function V(){this.restoreGraphicsState(),p="S",N=F}var U=_.__private__.combineFontStyleAndFontWeight=function(ue,We){if(ue=="bold"&&We=="normal"||ue=="bold"&&We==400||ue=="normal"&&We=="italic"||ue=="bold"&&We=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return We&&(ue=We==400||We==="normal"?ue==="italic"?"italic":"normal":We!=700&&We!=="bold"||ue!=="normal"?(We==700?"bold":We)+""+ue:"bold"),ue};_.advancedAPI=function(ue){var We=N===F;return We&&$.call(this),typeof ue!="function"||(ue(this),We&&V.call(this)),this},_.compatAPI=function(ue){var We=N===B;return We&&V.call(this),typeof ue!="function"||(ue(this),We&&$.call(this)),this},_.isAdvancedAPI=function(){return N===B};var X,Z=function(ue){if(N!==B)throw new Error(ue+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},oe=_.roundToPrecision=_.__private__.roundToPrecision=function(ue,We){var bt=t||We;if(isNaN(ue)||isNaN(bt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ue.toFixed(bt).replace(/0+$/,"")};X=_.hpf=_.__private__.hpf=typeof f=="number"?function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(ue,f)}:f==="smart"?function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(ue,ue>-1&&ue<1?16:5)}:function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(ue,16)};var re=_.f2=_.__private__.f2=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.f2");return oe(ue,2)},H=_.__private__.f3=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.f3");return oe(ue,3)},ae=_.scale=_.__private__.scale=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.scale");return N===F?ue*Ge:N===B?ue:void 0},se=function(ue){return ae((function(We){return N===F?go()-We:N===B?We:void 0})(ue))};_.__private__.setPrecision=_.setPrecision=function(ue){typeof parseInt(ue,10)=="number"&&(t=parseInt(ue,10))};var de,fe="00000000000000000000000000000000",Le=_.__private__.getFileId=function(){return fe},ye=_.__private__.setFileId=function(ue){return fe=ue!==void 0&&/^[a-fA-F0-9]{32}$/.test(ue)?ue.toUpperCase():fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Ta=new $g(g.userPermissions,g.userPassword,g.ownerPassword,fe)),fe};_.setFileId=function(ue){return ye(ue),this},_.getFileId=function(){return Le()};var xe=_.__private__.convertDateToPDFDate=function(ue){var We=ue.getTimezoneOffset(),bt=We<0?"+":"-",Ft=Math.floor(Math.abs(We/60)),nr=Math.abs(We%60),Pr=[bt,we(Ft),"'",we(nr),"'"].join("");return["D:",ue.getFullYear(),we(ue.getMonth()+1),we(ue.getDate()),we(ue.getHours()),we(ue.getMinutes()),we(ue.getSeconds()),Pr].join("")},Se=_.__private__.convertPDFDateToDate=function(ue){var We=parseInt(ue.substr(2,4),10),bt=parseInt(ue.substr(6,2),10)-1,Ft=parseInt(ue.substr(8,2),10),nr=parseInt(ue.substr(10,2),10),Pr=parseInt(ue.substr(12,2),10),$r=parseInt(ue.substr(14,2),10);return new Date(We,bt,Ft,nr,Pr,$r,0)},Re=_.__private__.setCreationDate=function(ue){var We;if(ue===void 0&&(ue=new Date),ue instanceof Date)We=xe(ue);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ue))throw new Error("Invalid argument passed to jsPDF.setCreationDate");We=ue}return de=We},he=_.__private__.getCreationDate=function(ue){var We=de;return ue==="jsDate"&&(We=Se(de)),We};_.setCreationDate=function(ue){return Re(ue),this},_.getCreationDate=function(ue){return he(ue)};var Ee,we=_.__private__.padd2=function(ue){return("0"+parseInt(ue)).slice(-2)},Ne=_.__private__.padd2Hex=function(ue){return("00"+(ue=ue.toString())).substr(ue.length)},Fe=0,Xe=[],Be=[],ot=0,Ke=[],it=[],ke=!1,Nt=Be;_.__private__.setCustomOutputDestination=function(ue){ke=!0,Nt=ue};var st=function(ue){ke||(Nt=ue)};_.__private__.resetCustomOutputDestination=function(){ke=!1,Nt=Be};var $e=_.__private__.out=function(ue){return ue=ue.toString(),ot+=ue.length+1,Nt.push(ue),Nt},Zt=_.__private__.write=function(ue){return $e(arguments.length===1?ue.toString():Array.prototype.join.call(arguments," "))},$t=_.__private__.getArrayBuffer=function(ue){for(var We=ue.length,bt=new ArrayBuffer(We),Ft=new Uint8Array(bt);We--;)Ft[We]=ue.charCodeAt(We);return bt},Wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return Wt};var ht=e.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(ue){return ht=N===B?ue/Ge:ue,this};var sr,cr=_.__private__.getFontSize=_.getFontSize=function(){return N===F?ht:ht*Ge},ir=e.R2L||!1;_.__private__.setR2L=_.setR2L=function(ue){return ir=ue,this},_.__private__.getR2L=_.getR2L=function(){return ir};var br,yr=_.__private__.setZoomMode=function(ue){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ue))sr=ue;else if(isNaN(ue)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(ue)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ue+'" is not recognized.');sr=ue}else sr=parseInt(ue,10)};_.__private__.getZoomMode=function(){return sr};var Kt,at=_.__private__.setPageMode=function(ue){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ue)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ue+'" is not recognized.');br=ue};_.__private__.getPageMode=function(){return br};var Ae=_.__private__.setLayoutMode=function(ue){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ue)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ue+'" is not recognized.');Kt=ue};_.__private__.getLayoutMode=function(){return Kt},_.__private__.setDisplayMode=_.setDisplayMode=function(ue,We,bt){return yr(ue),Ae(We),at(bt),this};var _e={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(ue){if(Object.keys(_e).indexOf(ue)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _e[ue]},_.__private__.getDocumentProperties=function(){return _e},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(ue){for(var We in _e)_e.hasOwnProperty(We)&&ue[We]&&(_e[We]=ue[We]);return this},_.__private__.setDocumentProperty=function(ue,We){if(Object.keys(_e).indexOf(ue)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _e[ue]=We};var je,Ge,He,Dt,St,yt={},ct={},Jt=[],Vt={},xr={},_r={},Nr={},tn=null,Lr=0,kt=[],Hr=new iN(_),kn=e.hotfixes||[],Ur={},rr={},Jn=[],en=function ue(We,bt,Ft,nr,Pr,$r){if(!(this instanceof ue))return new ue(We,bt,Ft,nr,Pr,$r);isNaN(We)&&(We=1),isNaN(bt)&&(bt=0),isNaN(Ft)&&(Ft=0),isNaN(nr)&&(nr=1),isNaN(Pr)&&(Pr=0),isNaN($r)&&($r=0),this._matrix=[We,bt,Ft,nr,Pr,$r]};Object.defineProperty(en.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ue){this._matrix[0]=ue}}),Object.defineProperty(en.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ue){this._matrix[1]=ue}}),Object.defineProperty(en.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ue){this._matrix[2]=ue}}),Object.defineProperty(en.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ue){this._matrix[3]=ue}}),Object.defineProperty(en.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ue){this._matrix[4]=ue}}),Object.defineProperty(en.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ue){this._matrix[5]=ue}}),Object.defineProperty(en.prototype,"a",{get:function(){return this._matrix[0]},set:function(ue){this._matrix[0]=ue}}),Object.defineProperty(en.prototype,"b",{get:function(){return this._matrix[1]},set:function(ue){this._matrix[1]=ue}}),Object.defineProperty(en.prototype,"c",{get:function(){return this._matrix[2]},set:function(ue){this._matrix[2]=ue}}),Object.defineProperty(en.prototype,"d",{get:function(){return this._matrix[3]},set:function(ue){this._matrix[3]=ue}}),Object.defineProperty(en.prototype,"e",{get:function(){return this._matrix[4]},set:function(ue){this._matrix[4]=ue}}),Object.defineProperty(en.prototype,"f",{get:function(){return this._matrix[5]},set:function(ue){this._matrix[5]=ue}}),Object.defineProperty(en.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(en.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(en.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(en.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),en.prototype.join=function(ue){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(X).join(ue)},en.prototype.multiply=function(ue){var We=ue.sx*this.sx+ue.shy*this.shx,bt=ue.sx*this.shy+ue.shy*this.sy,Ft=ue.shx*this.sx+ue.sy*this.shx,nr=ue.shx*this.shy+ue.sy*this.sy,Pr=ue.tx*this.sx+ue.ty*this.shx+this.tx,$r=ue.tx*this.shy+ue.ty*this.sy+this.ty;return new en(We,bt,Ft,nr,Pr,$r)},en.prototype.decompose=function(){var ue=this.sx,We=this.shy,bt=this.shx,Ft=this.sy,nr=this.tx,Pr=this.ty,$r=Math.sqrt(ue*ue+We*We),Tn=(ue/=$r)*bt+(We/=$r)*Ft;bt-=ue*Tn,Ft-=We*Tn;var Dn=Math.sqrt(bt*bt+Ft*Ft);return Tn/=Dn,ue*(Ft/=Dn)<We*(bt/=Dn)&&(ue=-ue,We=-We,Tn=-Tn,$r=-$r),{scale:new en($r,0,0,Dn,0,0),translate:new en(1,0,0,1,nr,Pr),rotate:new en(ue,We,-We,ue,0,0),skew:new en(1,0,Tn,1,0,0)}},en.prototype.toString=function(ue){return this.join(" ")},en.prototype.inversed=function(){var ue=this.sx,We=this.shy,bt=this.shx,Ft=this.sy,nr=this.tx,Pr=this.ty,$r=1/(ue*Ft-We*bt),Tn=Ft*$r,Dn=-We*$r,Mn=-bt*$r,ni=ue*$r;return new en(Tn,Dn,Mn,ni,-Tn*nr-Mn*Pr,-Dn*nr-ni*Pr)},en.prototype.applyToPoint=function(ue){var We=ue.x*this.sx+ue.y*this.shx+this.tx,bt=ue.x*this.shy+ue.y*this.sy+this.ty;return new ru(We,bt)},en.prototype.applyToRectangle=function(ue){var We=this.applyToPoint(ue),bt=this.applyToPoint(new ru(ue.x+ue.w,ue.y+ue.h));return new nu(We.x,We.y,bt.x-We.x,bt.y-We.y)},en.prototype.clone=function(){var ue=this.sx,We=this.shy,bt=this.shx,Ft=this.sy,nr=this.tx,Pr=this.ty;return new en(ue,We,bt,Ft,nr,Pr)},_.Matrix=en;var Vn=_.matrixMult=function(ue,We){return We.multiply(ue)},Me=new en(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=Me;var Ue=function(ue,We){if(!xr[ue]){var bt=(We instanceof nm?"Sh":"P")+(Object.keys(Vt).length+1).toString(10);We.id=bt,xr[ue]=bt,Vt[bt]=We,Hr.publish("addPattern",We)}};_.ShadingPattern=nm,_.TilingPattern=dy,_.addShadingPattern=function(ue,We){return Z("addShadingPattern()"),Ue(ue,We),this},_.beginTilingPattern=function(ue){Z("beginTilingPattern()"),ki(ue.boundingBox[0],ue.boundingBox[1],ue.boundingBox[2]-ue.boundingBox[0],ue.boundingBox[3]-ue.boundingBox[1],ue.matrix)},_.endTilingPattern=function(ue,We){Z("endTilingPattern()"),We.stream=it[Ee].join(`
`),Ue(ue,We),Hr.publish("endTilingPattern",We),Jn.pop().restore()};var Ct,Gt=_.__private__.newObject=function(){var ue=zt();return qr(ue,!0),ue},zt=_.__private__.newObjectDeferred=function(){return Fe++,Xe[Fe]=function(){return ot},Fe},qr=function(ue,We){return We=typeof We=="boolean"&&We,Xe[ue]=ot,We&&$e(ue+" 0 obj"),ue},En=_.__private__.newAdditionalObject=function(){var ue={objId:zt(),content:""};return Ke.push(ue),ue},Pi=zt(),gi=zt(),kr=_.__private__.decodeColorString=function(ue){var We=ue.split(" ");if(We.length!==2||We[1]!=="g"&&We[1]!=="G")We.length!==5||We[4]!=="k"&&We[4]!=="K"||(We=[(1-We[0])*(1-We[3]),(1-We[1])*(1-We[3]),(1-We[2])*(1-We[3]),"r"]);else{var bt=parseFloat(We[0]);We=[bt,bt,bt,"r"]}for(var Ft="#",nr=0;nr<3;nr++)Ft+=("0"+Math.floor(255*parseFloat(We[nr])).toString(16)).slice(-2);return Ft},Sn=_.__private__.encodeColorString=function(ue){var We;typeof ue=="string"&&(ue={ch1:ue});var bt=ue.ch1,Ft=ue.ch2,nr=ue.ch3,Pr=ue.ch4,$r=ue.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof bt=="string"&&bt.charAt(0)!=="#"){var Tn=new Gq(bt);if(Tn.ok)bt=Tn.toHex();else if(!/^\d*\.?\d*$/.test(bt))throw new Error('Invalid color "'+bt+'" passed to jsPDF.encodeColorString.')}if(typeof bt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(bt)&&(bt="#"+bt[1]+bt[1]+bt[2]+bt[2]+bt[3]+bt[3]),typeof bt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(bt)){var Dn=parseInt(bt.substr(1),16);bt=Dn>>16&255,Ft=Dn>>8&255,nr=255&Dn}if(Ft===void 0||Pr===void 0&&bt===Ft&&Ft===nr)We=typeof bt=="string"?bt+" "+$r[0]:ue.precision===2?re(bt/255)+" "+$r[0]:H(bt/255)+" "+$r[0];else if(Pr===void 0||Ka(Pr)==="object"){if(Pr&&!isNaN(Pr.a)&&Pr.a===0)return["1.","1.","1.",$r[1]].join(" ");We=typeof bt=="string"?[bt,Ft,nr,$r[1]].join(" "):ue.precision===2?[re(bt/255),re(Ft/255),re(nr/255),$r[1]].join(" "):[H(bt/255),H(Ft/255),H(nr/255),$r[1]].join(" ")}else We=typeof bt=="string"?[bt,Ft,nr,Pr,$r[2]].join(" "):ue.precision===2?[re(bt),re(Ft),re(nr),re(Pr),$r[2]].join(" "):[H(bt),H(Ft),H(nr),H(Pr),$r[2]].join(" ");return We},Pn=_.__private__.getFilters=function(){return u},Un=_.__private__.putStream=function(ue){var We=(ue=ue||{}).data||"",bt=ue.filters||Pn(),Ft=ue.alreadyAppliedFilters||[],nr=ue.addLength1||!1,Pr=We.length,$r=ue.objectId,Tn=function(pi){return pi};if(g!==null&&$r===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(Tn=Ta.encryptor($r,0));var Dn={};bt===!0&&(bt=["FlateEncode"]);var Mn=ue.additionalKeyValues||[],ni=(Dn=oi.API.processDataByFilters!==void 0?oi.API.processDataByFilters(We,bt):{data:We,reverseChain:[]}).reverseChain+(Array.isArray(Ft)?Ft.join(" "):Ft.toString());if(Dn.data.length!==0&&(Mn.push({key:"Length",value:Dn.data.length}),nr===!0&&Mn.push({key:"Length1",value:Pr})),ni.length!=0)if(ni.split("/").length-1==1)Mn.push({key:"Filter",value:ni});else{Mn.push({key:"Filter",value:"["+ni+"]"});for(var On=0;On<Mn.length;On+=1)if(Mn[On].key==="DecodeParms"){for(var Mi=[],Fi=0;Fi<Dn.reverseChain.split("/").length-1;Fi+=1)Mi.push("null");Mi.push(Mn[On].value),Mn[On].value="["+Mi.join(" ")+"]"}}$e("<<");for(var Gi=0;Gi<Mn.length;Gi++)$e("/"+Mn[Gi].key+" "+Mn[Gi].value);$e(">>"),Dn.data.length!==0&&($e("stream"),$e(Tn(Dn.data)),$e("endstream"))},Ki=_.__private__.putPage=function(ue){var We=ue.number,bt=ue.data,Ft=ue.objId,nr=ue.contentsObjId;qr(Ft,!0),$e("<</Type /Page"),$e("/Parent "+ue.rootDictionaryObjId+" 0 R"),$e("/Resources "+ue.resourceDictionaryObjId+" 0 R"),$e("/MediaBox ["+parseFloat(X(ue.mediaBox.bottomLeftX))+" "+parseFloat(X(ue.mediaBox.bottomLeftY))+" "+X(ue.mediaBox.topRightX)+" "+X(ue.mediaBox.topRightY)+"]"),ue.cropBox!==null&&$e("/CropBox ["+X(ue.cropBox.bottomLeftX)+" "+X(ue.cropBox.bottomLeftY)+" "+X(ue.cropBox.topRightX)+" "+X(ue.cropBox.topRightY)+"]"),ue.bleedBox!==null&&$e("/BleedBox ["+X(ue.bleedBox.bottomLeftX)+" "+X(ue.bleedBox.bottomLeftY)+" "+X(ue.bleedBox.topRightX)+" "+X(ue.bleedBox.topRightY)+"]"),ue.trimBox!==null&&$e("/TrimBox ["+X(ue.trimBox.bottomLeftX)+" "+X(ue.trimBox.bottomLeftY)+" "+X(ue.trimBox.topRightX)+" "+X(ue.trimBox.topRightY)+"]"),ue.artBox!==null&&$e("/ArtBox ["+X(ue.artBox.bottomLeftX)+" "+X(ue.artBox.bottomLeftY)+" "+X(ue.artBox.topRightX)+" "+X(ue.artBox.topRightY)+"]"),typeof ue.userUnit=="number"&&ue.userUnit!==1&&$e("/UserUnit "+ue.userUnit),Hr.publish("putPage",{objId:Ft,pageContext:kt[We],pageNumber:We,page:bt}),$e("/Contents "+nr+" 0 R"),$e(">>"),$e("endobj");var Pr=bt.join(`
`);return N===B&&(Pr+=`
Q`),qr(nr,!0),Un({data:Pr,filters:Pn(),objectId:nr}),$e("endobj"),Ft},ea=_.__private__.putPages=function(){var ue,We,bt=[];for(ue=1;ue<=Lr;ue++)kt[ue].objId=zt(),kt[ue].contentsObjId=zt();for(ue=1;ue<=Lr;ue++)bt.push(Ki({number:ue,data:it[ue],objId:kt[ue].objId,contentsObjId:kt[ue].contentsObjId,mediaBox:kt[ue].mediaBox,cropBox:kt[ue].cropBox,bleedBox:kt[ue].bleedBox,trimBox:kt[ue].trimBox,artBox:kt[ue].artBox,userUnit:kt[ue].userUnit,rootDictionaryObjId:Pi,resourceDictionaryObjId:gi}));qr(Pi,!0),$e("<</Type /Pages");var Ft="/Kids [";for(We=0;We<Lr;We++)Ft+=bt[We]+" 0 R ";$e(Ft+"]"),$e("/Count "+Lr),$e(">>"),$e("endobj"),Hr.publish("postPutPages")},An=function(ue){Hr.publish("putFont",{font:ue,out:$e,newObject:Gt,putStream:Un}),ue.isAlreadyPutted!==!0&&(ue.objectNumber=Gt(),$e("<<"),$e("/Type /Font"),$e("/BaseFont /"+Gg(ue.postScriptName)),$e("/Subtype /Type1"),typeof ue.encoding=="string"&&$e("/Encoding /"+ue.encoding),$e("/FirstChar 32"),$e("/LastChar 255"),$e(">>"),$e("endobj"))},Ca=function(ue){ue.objectNumber=Gt();var We=[];We.push({key:"Type",value:"/XObject"}),We.push({key:"Subtype",value:"/Form"}),We.push({key:"BBox",value:"["+[X(ue.x),X(ue.y),X(ue.x+ue.width),X(ue.y+ue.height)].join(" ")+"]"}),We.push({key:"Matrix",value:"["+ue.matrix.toString()+"]"});var bt=ue.pages[1].join(`
`);Un({data:bt,additionalKeyValues:We,objectId:ue.objectNumber}),$e("endobj")},Ni=function(ue,We){We||(We=21);var bt=Gt(),Ft=(function($r,Tn){var Dn,Mn=[],ni=1/(Tn-1);for(Dn=0;Dn<1;Dn+=ni)Mn.push(Dn);if(Mn.push(1),$r[0].offset!=0){var On={offset:0,color:$r[0].color};$r.unshift(On)}if($r[$r.length-1].offset!=1){var Mi={offset:1,color:$r[$r.length-1].color};$r.push(Mi)}for(var Fi="",Gi=0,pi=0;pi<Mn.length;pi++){for(Dn=Mn[pi];Dn>$r[Gi+1].offset;)Gi++;var ga=$r[Gi].offset,Ia=(Dn-ga)/($r[Gi+1].offset-ga),Ss=$r[Gi].color,qs=$r[Gi+1].color;Fi+=Ne(Math.round((1-Ia)*Ss[0]+Ia*qs[0]).toString(16))+Ne(Math.round((1-Ia)*Ss[1]+Ia*qs[1]).toString(16))+Ne(Math.round((1-Ia)*Ss[2]+Ia*qs[2]).toString(16))}return Fi.trim()})(ue.colors,We),nr=[];nr.push({key:"FunctionType",value:"0"}),nr.push({key:"Domain",value:"[0.0 1.0]"}),nr.push({key:"Size",value:"["+We+"]"}),nr.push({key:"BitsPerSample",value:"8"}),nr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Un({data:Ft,additionalKeyValues:nr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:bt}),$e("endobj"),ue.objectNumber=Gt(),$e("<< /ShadingType "+ue.type),$e("/ColorSpace /DeviceRGB");var Pr="/Coords ["+X(parseFloat(ue.coords[0]))+" "+X(parseFloat(ue.coords[1]))+" ";ue.type===2?Pr+=X(parseFloat(ue.coords[2]))+" "+X(parseFloat(ue.coords[3])):Pr+=X(parseFloat(ue.coords[2]))+" "+X(parseFloat(ue.coords[3]))+" "+X(parseFloat(ue.coords[4]))+" "+X(parseFloat(ue.coords[5])),$e(Pr+="]"),ue.matrix&&$e("/Matrix ["+ue.matrix.toString()+"]"),$e("/Function "+bt+" 0 R"),$e("/Extend [true true]"),$e(">>"),$e("endobj")},Ho=function(ue,We){var bt=zt(),Ft=Gt();We.push({resourcesOid:bt,objectOid:Ft}),ue.objectNumber=Ft;var nr=[];nr.push({key:"Type",value:"/Pattern"}),nr.push({key:"PatternType",value:"1"}),nr.push({key:"PaintType",value:"1"}),nr.push({key:"TilingType",value:"1"}),nr.push({key:"BBox",value:"["+ue.boundingBox.map(X).join(" ")+"]"}),nr.push({key:"XStep",value:X(ue.xStep)}),nr.push({key:"YStep",value:X(ue.yStep)}),nr.push({key:"Resources",value:bt+" 0 R"}),ue.matrix&&nr.push({key:"Matrix",value:"["+ue.matrix.toString()+"]"}),Un({data:ue.stream,additionalKeyValues:nr,objectId:ue.objectNumber}),$e("endobj")},pa=function(ue){for(var We in ue.objectNumber=Gt(),$e("<<"),ue)switch(We){case"opacity":$e("/ca "+re(ue[We]));break;case"stroke-opacity":$e("/CA "+re(ue[We]))}$e(">>"),$e("endobj")},mo=function(ue){qr(ue.resourcesOid,!0),$e("<<"),$e("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var We in $e("/Font <<"),yt)yt.hasOwnProperty(We)&&(b===!1||b===!0&&S.hasOwnProperty(We))&&$e("/"+We+" "+yt[We].objectNumber+" 0 R");$e(">>")})(),(function(){if(Object.keys(Vt).length>0){for(var We in $e("/Shading <<"),Vt)Vt.hasOwnProperty(We)&&Vt[We]instanceof nm&&Vt[We].objectNumber>=0&&$e("/"+We+" "+Vt[We].objectNumber+" 0 R");Hr.publish("putShadingPatternDict"),$e(">>")}})(),(function(We){if(Object.keys(Vt).length>0){for(var bt in $e("/Pattern <<"),Vt)Vt.hasOwnProperty(bt)&&Vt[bt]instanceof _.TilingPattern&&Vt[bt].objectNumber>=0&&Vt[bt].objectNumber<We&&$e("/"+bt+" "+Vt[bt].objectNumber+" 0 R");Hr.publish("putTilingPatternDict"),$e(">>")}})(ue.objectOid),(function(){if(Object.keys(_r).length>0){var We;for(We in $e("/ExtGState <<"),_r)_r.hasOwnProperty(We)&&_r[We].objectNumber>=0&&$e("/"+We+" "+_r[We].objectNumber+" 0 R");Hr.publish("putGStateDict"),$e(">>")}})(),(function(){for(var We in $e("/XObject <<"),Ur)Ur.hasOwnProperty(We)&&Ur[We].objectNumber>=0&&$e("/"+We+" "+Ur[We].objectNumber+" 0 R");Hr.publish("putXobjectDict"),$e(">>")})(),$e(">>"),$e("endobj")},Oa=function(ue){ct[ue.fontName]=ct[ue.fontName]||{},ct[ue.fontName][ue.fontStyle]=ue.id},zs=function(ue,We,bt,Ft,nr){var Pr={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:ue,fontName:We,fontStyle:bt,encoding:Ft,isStandardFont:nr||!1,metadata:{}};return Hr.publish("addFont",{font:Pr,instance:this}),yt[Pr.id]=Pr,Oa(Pr),Pr.id},fi=_.__private__.pdfEscape=_.pdfEscape=function(ue,We){return(function(bt,Ft){var nr,Pr,$r,Tn,Dn,Mn,ni,On,Mi;if($r=(Ft=Ft||{}).sourceEncoding||"Unicode",Dn=Ft.outputEncoding,(Ft.autoencode||Dn)&&yt[je].metadata&&yt[je].metadata[$r]&&yt[je].metadata[$r].encoding&&(Tn=yt[je].metadata[$r].encoding,!Dn&&yt[je].encoding&&(Dn=yt[je].encoding),!Dn&&Tn.codePages&&(Dn=Tn.codePages[0]),typeof Dn=="string"&&(Dn=Tn[Dn]),Dn)){for(ni=!1,Mn=[],nr=0,Pr=bt.length;nr<Pr;nr++)(On=Dn[bt.charCodeAt(nr)])?Mn.push(String.fromCharCode(On)):Mn.push(bt[nr]),Mn[nr].charCodeAt(0)>>8&&(ni=!0);bt=Mn.join("")}for(nr=bt.length;ni===void 0&&nr!==0;)bt.charCodeAt(nr-1)>>8&&(ni=!0),nr--;if(!ni)return bt;for(Mn=Ft.noBOM?[]:[254,255],nr=0,Pr=bt.length;nr<Pr;nr++){if((Mi=(On=bt.charCodeAt(nr))>>8)>>8)throw new Error("Character at position "+nr+" of string '"+bt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Mn.push(Mi),Mn.push(On-(Mi<<8))}return String.fromCharCode.apply(void 0,Mn)})(ue,We).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ai=_.__private__.beginPage=function(ue){it[++Lr]=[],kt[Lr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ue[0]),topRightY:Number(ue[1])}},Na(Lr),st(it[Ee])},Ql=function(ue,We){var bt,Ft,nr;switch(r=We||r,typeof ue=="string"&&(bt=D(ue.toLowerCase()),Array.isArray(bt)&&(Ft=bt[0],nr=bt[1])),Array.isArray(ue)&&(Ft=ue[0]*Ge,nr=ue[1]*Ge),isNaN(Ft)&&(Ft=i[0],nr=i[1]),(Ft>14400||nr>14400)&&(po.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ft=Math.min(14400,Ft),nr=Math.min(14400,nr)),i=[Ft,nr],r.substr(0,1)){case"l":nr>Ft&&(i=[nr,Ft]);break;case"p":Ft>nr&&(i=[nr,Ft])}Ai(i),Tr(Rn),$e(as),Fa!==0&&$e(Fa+" J"),xs!==0&&$e(xs+" j"),Hr.publish("addPage",{pageNumber:Lr})},na=function(ue){ue>0&&ue<=Lr&&(it.splice(ue,1),kt.splice(ue,1),Lr--,Ee>Lr&&(Ee=Lr),this.setPage(Ee))},Na=function(ue){ue>0&&ue<=Lr&&(Ee=ue)},Wo=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return it.length-1},ma=function(ue,We,bt){var Ft,nr=void 0;return bt=bt||{},ue=ue!==void 0?ue:yt[je].fontName,We=We!==void 0?We:yt[je].fontStyle,Ft=ue.toLowerCase(),ct[Ft]!==void 0&&ct[Ft][We]!==void 0?nr=ct[Ft][We]:ct[ue]!==void 0&&ct[ue][We]!==void 0?nr=ct[ue][We]:bt.disableWarning===!1&&po.warn("Unable to look up font label for font '"+ue+"', '"+We+"'. Refer to getFontList() for available fonts."),nr||bt.noFallback||(nr=ct.times[We])==null&&(nr=ct.times.normal),nr},Xo=_.__private__.putInfo=function(){var ue=Gt(),We=function(Ft){return Ft};for(var bt in g!==null&&(We=Ta.encryptor(ue,0)),$e("<<"),$e("/Producer ("+fi(We("jsPDF "+oi.version))+")"),_e)_e.hasOwnProperty(bt)&&_e[bt]&&$e("/"+bt.substr(0,1).toUpperCase()+bt.substr(1)+" ("+fi(We(_e[bt]))+")");$e("/CreationDate ("+fi(We(de))+")"),$e(">>"),$e("endobj")},fl=_.__private__.putCatalog=function(ue){var We=(ue=ue||{}).rootDictionaryObjId||Pi;switch(Gt(),$e("<<"),$e("/Type /Catalog"),$e("/Pages "+We+" 0 R"),sr||(sr="fullwidth"),sr){case"fullwidth":$e("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$e("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$e("/OpenAction [3 0 R /Fit]");break;case"original":$e("/OpenAction [3 0 R /XYZ null null 1]");break;default:var bt=""+sr;bt.substr(bt.length-1)==="%"&&(sr=parseInt(sr)/100),typeof sr=="number"&&$e("/OpenAction [3 0 R /XYZ null null "+re(sr)+"]")}switch(Kt||(Kt="continuous"),Kt){case"continuous":$e("/PageLayout /OneColumn");break;case"single":$e("/PageLayout /SinglePage");break;case"two":case"twoleft":$e("/PageLayout /TwoColumnLeft");break;case"tworight":$e("/PageLayout /TwoColumnRight")}br&&$e("/PageMode /"+br),Hr.publish("putCatalog"),$e(">>"),$e("endobj")},Ea=_.__private__.putTrailer=function(){$e("trailer"),$e("<<"),$e("/Size "+(Fe+1)),$e("/Root "+Fe+" 0 R"),$e("/Info "+(Fe-1)+" 0 R"),g!==null&&$e("/Encrypt "+Ta.oid+" 0 R"),$e("/ID [ <"+fe+"> <"+fe+"> ]"),$e(">>")},oa=_.__private__.putHeader=function(){$e("%PDF-"+P),$e("%")},qu=_.__private__.putXRef=function(){var ue="0000000000";$e("xref"),$e("0 "+(Fe+1)),$e("0000000000 65535 f ");for(var We=1;We<=Fe;We++)typeof Xe[We]=="function"?$e((ue+Xe[We]()).slice(-10)+" 00000 n "):Xe[We]!==void 0?$e((ue+Xe[We]).slice(-10)+" 00000 n "):$e("0000000000 00000 n ")},js=_.__private__.buildDocument=function(){var ue;Fe=0,ot=0,Be=[],Xe=[],Ke=[],Pi=zt(),gi=zt(),st(Be),Hr.publish("buildDocument"),oa(),ea(),(function(){Hr.publish("putAdditionalObjects");for(var bt=0;bt<Ke.length;bt++){var Ft=Ke[bt];qr(Ft.objId,!0),$e(Ft.content),$e("endobj")}Hr.publish("postPutAdditionalObjects")})(),ue=[],(function(){for(var bt in yt)yt.hasOwnProperty(bt)&&(b===!1||b===!0&&S.hasOwnProperty(bt))&&An(yt[bt])})(),(function(){var bt;for(bt in _r)_r.hasOwnProperty(bt)&&pa(_r[bt])})(),(function(){for(var bt in Ur)Ur.hasOwnProperty(bt)&&Ca(Ur[bt])})(),(function(bt){var Ft;for(Ft in Vt)Vt.hasOwnProperty(Ft)&&(Vt[Ft]instanceof nm?Ni(Vt[Ft]):Vt[Ft]instanceof dy&&Ho(Vt[Ft],bt))})(ue),Hr.publish("putResources"),ue.forEach(mo),mo({resourcesOid:gi,objectOid:Number.MAX_SAFE_INTEGER}),Hr.publish("postPutResources"),g!==null&&(Ta.oid=Gt(),$e("<<"),$e("/Filter /Standard"),$e("/V "+Ta.v),$e("/R "+Ta.r),$e("/U <"+Ta.toHexString(Ta.U)+">"),$e("/O <"+Ta.toHexString(Ta.O)+">"),$e("/P "+Ta.P),$e(">>"),$e("endobj")),Xo(),fl();var We=ot;return qu(),Ea(),$e("startxref"),$e(""+We),$e("%%EOF"),st(it[Ee]),Be.join(`
`)},No=_.__private__.getBlob=function(ue){return new Blob([$t(ue)],{type:"application/pdf"})},Ua=_.output=_.__private__.output=(Ct=function(ue,We){switch(typeof(We=We||{})=="string"?We={filename:We}:We.filename=We.filename||"generated.pdf",ue){case void 0:return js();case"save":_.save(We.filename);break;case"arraybuffer":return $t(js());case"blob":return No(js());case"bloburi":case"bloburl":if(Si.URL!==void 0&&typeof Si.URL.createObjectURL=="function")return Si.URL&&Si.URL.createObjectURL(No(js()))||void 0;po.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var bt="",Ft=js();try{bt=tN(Ft)}catch{bt=tN(unescape(encodeURIComponent(Ft)))}return"data:application/pdf;filename="+We.filename+";base64,"+bt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Si)==="[object Window]"){var nr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';We.pdfObjectUrl&&(nr=We.pdfObjectUrl,Pr="");var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+nr+'"'+Pr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(We)+");<\/script></body></html>",Tn=Si.open();return Tn!==null&&Tn.document.write($r),Tn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Si)==="[object Window]"){var Dn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(We.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+We.filename+'" width="500px" height="400px" /></body></html>',Mn=Si.open();if(Mn!==null){Mn.document.write(Dn);var ni=this;Mn.document.documentElement.querySelector("#pdfViewer").onload=function(){Mn.document.title=We.filename,Mn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ni.output("bloburl"))}}return Mn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Si)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",We)+'"></iframe></body></html>',Mi=Si.open();if(Mi!==null&&(Mi.document.write(On),Mi.document.title=We.filename),Mi||typeof safari>"u")return Mi;break;case"datauri":case"dataurl":return Si.document.location.href=this.output("datauristring",We);default:return null}},Ct.foo=function(){try{return Ct.apply(this,arguments)}catch(bt){var ue=bt.stack||"";~ue.indexOf(" at ")&&(ue=ue.split(" at ")[1]);var We="Error in function "+ue.split(`
`)[0].split("<")[0]+": "+bt.message;if(!Si.console)throw new Error(We);Si.console.error(We,bt),Si.alert&&alert(We)}},Ct.foo.bar=Ct,Ct.foo),Fo=function(ue){return Array.isArray(kn)===!0&&kn.indexOf(ue)>-1};switch(n){case"pt":Ge=1;break;case"mm":Ge=72/25.4;break;case"cm":Ge=72/2.54;break;case"in":Ge=72;break;case"px":Ge=Fo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ge=12;break;case"ex":Ge=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ge=n}var Ta=null;Re(),ye();var bs=_.__private__.getPageInfo=_.getPageInfo=function(ue){if(isNaN(ue)||ue%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[ue].objId,pageNumber:ue,pageContext:kt[ue]}},ac=_.__private__.getPageInfoByObjId=function(ue){if(isNaN(ue)||ue%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var We in kt)if(kt[We].objId===ue)break;return bs(We)},eu=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:kt[Ee].objId,pageNumber:Ee,pageContext:kt[Ee]}};_.addPage=function(){return Ql.apply(this,arguments),this},_.setPage=function(){return Na.apply(this,arguments),st.call(this,it[Ee]),this},_.insertPage=function(ue){return this.addPage(),this.movePage(Ee,ue),this},_.movePage=function(ue,We){var bt,Ft;if(ue>We){bt=it[ue],Ft=kt[ue];for(var nr=ue;nr>We;nr--)it[nr]=it[nr-1],kt[nr]=kt[nr-1];it[We]=bt,kt[We]=Ft,this.setPage(We)}else if(ue<We){bt=it[ue],Ft=kt[ue];for(var Pr=ue;Pr<We;Pr++)it[Pr]=it[Pr+1],kt[Pr]=kt[Pr+1];it[We]=bt,kt[We]=Ft,this.setPage(We)}return this},_.deletePage=function(){return na.apply(this,arguments),this},_.__private__.text=_.text=function(ue,We,bt,Ft,nr){var Pr,$r,Tn,Dn,Mn,ni,On,Mi,Fi,Gi=(Ft=Ft||{}).scope||this;if(typeof ue=="number"&&typeof We=="number"&&(typeof bt=="string"||Array.isArray(bt))){var pi=bt;bt=We,We=ue,ue=pi}if(arguments[3]instanceof en==0?(Tn=arguments[4],Dn=arguments[5],Ka(On=arguments[3])==="object"&&On!==null||(typeof Tn=="string"&&(Dn=Tn,Tn=null),typeof On=="string"&&(Dn=On,On=null),typeof On=="number"&&(Tn=On,On=null),Ft={flags:On,angle:Tn,align:Dn})):(Z("The transform parameter of text() with a Matrix value"),Fi=nr),isNaN(We)||isNaN(bt)||ue==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ue.length===0)return Gi;var ga,Ia="",Ss=typeof Ft.lineHeightFactor=="number"?Ft.lineHeightFactor:_i,qs=Gi.internal.scaleFactor;function Cs(_n){return _n=_n.split("	").join(Array(Ft.TabLen||9).join(" ")),fi(_n,On)}function Co(_n){for(var E,m=_n.concat(),v=[],T=m.length;T--;)typeof(E=m.shift())=="string"?v.push(E):Array.isArray(_n)&&(E.length===1||E[1]===void 0&&E[2]===void 0)?v.push(E[0]):v.push([E[0],E[1],E[2]]);return v}function Es(_n,E){var m;if(typeof _n=="string")m=E(_n)[0];else if(Array.isArray(_n)){for(var v,T,q=_n.concat(),ne=[],ve=q.length;ve--;)typeof(v=q.shift())=="string"?ne.push(E(v)[0]):Array.isArray(v)&&typeof v[0]=="string"&&(T=E(v[0],v[1],v[2]),ne.push([T[0],T[1],T[2]]));m=ne}return m}var ya=!1,Ts=!0;if(typeof ue=="string")ya=!0;else if(Array.isArray(ue)){var nl=ue.concat();$r=[];for(var Yo,wi=nl.length;wi--;)(typeof(Yo=nl.shift())!="string"||Array.isArray(Yo)&&typeof Yo[0]!="string")&&(Ts=!1);ya=Ts}if(ya===!1)throw new Error('Type of text must be string or Array. "'+ue+'" is not recognized.');typeof ue=="string"&&(ue=ue.match(/[\r?\n]/)?ue.split(/\r\n|\r|\n/g):[ue]);var Eo=ht/Gi.internal.scaleFactor,xa=Eo*(Ss-1);switch(Ft.baseline){case"bottom":bt-=xa;break;case"top":bt+=Eo-xa;break;case"hanging":bt+=Eo-2*xa;break;case"middle":bt+=Eo/2-xa}if((ni=Ft.maxWidth||0)>0&&(typeof ue=="string"?ue=Gi.splitTextToSize(ue,ni):Object.prototype.toString.call(ue)==="[object Array]"&&(ue=ue.reduce(function(_n,E){return _n.concat(Gi.splitTextToSize(E,ni))},[]))),Pr={text:ue,x:We,y:bt,options:Ft,mutex:{pdfEscape:fi,activeFontKey:je,fonts:yt,activeFontSize:ht}},Hr.publish("preProcessText",Pr),ue=Pr.text,Tn=(Ft=Pr.options).angle,Fi instanceof en==0&&Tn&&typeof Tn=="number"){Tn*=Math.PI/180,Ft.rotationDirection===0&&(Tn=-Tn),N===B&&(Tn=-Tn);var Bo=Math.cos(Tn),ss=Math.sin(Tn);Fi=new en(Bo,ss,-ss,Bo,0,0)}else Tn&&Tn instanceof en&&(Fi=Tn);N!==B||Fi||(Fi=Me),(Mn=Ft.charSpace||Xi)!==void 0&&(Ia+=X(ae(Mn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mi=Ft.horizontalScale)!==void 0&&(Ia+=X(100*Mi)+` Tz
`),Ft.lang;var Ba=-1,Cu=Ft.renderingMode!==void 0?Ft.renderingMode:Ft.stroke,Rl=Gi.internal.getCurrentPageInfo().pageContext;switch(Cu){case 0:case!1:case"fill":Ba=0;break;case 1:case!0:case"stroke":Ba=1;break;case 2:case"fillThenStroke":Ba=2;break;case 3:case"invisible":Ba=3;break;case 4:case"fillAndAddForClipping":Ba=4;break;case 5:case"strokeAndAddPathForClipping":Ba=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ba=6;break;case 7:case"addToPathForClipping":Ba=7}var Is=Rl.usedRenderingMode!==void 0?Rl.usedRenderingMode:-1;Ba!==-1?Ia+=Ba+` Tr
`:Is!==-1&&(Ia+=`0 Tr
`),Ba!==-1&&(Rl.usedRenderingMode=Ba),Dn=Ft.align||"left";var Pa,ls=ht*Ss,Eu=Gi.internal.pageSize.getWidth(),Tu=yt[je];Mn=Ft.charSpace||Xi,ni=Ft.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},Ft.flags);var Vs=[],Dl=function(_n){return Gi.getStringUnitWidth(_n,{font:Tu,charSpace:Mn,fontSize:ht,doKerning:!1})*ht/qs};if(Object.prototype.toString.call(ue)==="[object Array]"){var yo;$r=Co(ue),Dn!=="left"&&(Pa=$r.map(Dl));var Qa,iu=0;if(Dn==="right"){We-=Pa[0],ue=[],wi=$r.length;for(var Aa=0;Aa<wi;Aa++)Aa===0?(Qa=Ri(We),yo=sa(bt)):(Qa=ae(iu-Pa[Aa]),yo=-ls),ue.push([$r[Aa],Qa,yo]),iu=Pa[Aa]}else if(Dn==="center"){We-=Pa[0]/2,ue=[],wi=$r.length;for(var Ol=0;Ol<wi;Ol++)Ol===0?(Qa=Ri(We),yo=sa(bt)):(Qa=ae((iu-Pa[Ol])/2),yo=-ls),ue.push([$r[Ol],Qa,yo]),iu=Pa[Ol]}else if(Dn==="left"){ue=[],wi=$r.length;for(var Ps=0;Ps<wi;Ps++)ue.push($r[Ps])}else if(Dn==="justify"&&Tu.encoding==="Identity-H"){ue=[],wi=$r.length,ni=ni!==0?ni:Eu;for(var Zo=0,ka=0;ka<wi;ka++)if(yo=ka===0?sa(bt):-ls,Qa=ka===0?Ri(We):Zo,ka<wi-1){var hl=ae((ni-Pa[ka])/($r[ka].split(" ").length-1)),$s=$r[ka].split(" ");ue.push([$s[0]+" ",Qa,yo]),Zo=0;for(var Gs=1;Gs<$s.length;Gs++){var pl=(Dl($s[Gs-1]+" "+$s[Gs])-Dl($s[Gs]))*qs+hl;Gs==$s.length-1?ue.push([$s[Gs],pl,0]):ue.push([$s[Gs]+" ",pl,0]),Zo-=pl}}else ue.push([$r[ka],Qa,yo]);ue.push(["",Zo,0])}else{if(Dn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ue=[],wi=$r.length,ni=ni!==0?ni:Eu,ka=0;ka<wi;ka++)yo=ka===0?sa(bt):-ls,Qa=ka===0?Ri(We):0,ka<wi-1?Vs.push(X(ae((ni-Pa[ka])/($r[ka].split(" ").length-1)))):Vs.push(0),ue.push([$r[ka],Qa,yo])}}(typeof Ft.R2L=="boolean"?Ft.R2L:ir)===!0&&(ue=Es(ue,function(_n,E,m){return[_n.split("").reverse().join(""),E,m]})),Pr={text:ue,x:We,y:bt,options:Ft,mutex:{pdfEscape:fi,activeFontKey:je,fonts:yt,activeFontSize:ht}},Hr.publish("postProcessText",Pr),ue=Pr.text,ga=Pr.mutex.isHex||!1;var ml=yt[je].encoding;ml!=="WinAnsiEncoding"&&ml!=="StandardEncoding"||(ue=Es(ue,function(_n,E,m){return[Cs(_n),E,m]})),$r=Co(ue),ue=[];for(var Us,gl,au,er=Array.isArray($r[0])?1:0,fr="",nn=function(_n,E,m){var v="";return m instanceof en?(m=typeof Ft.angle=="number"?Vn(m,new en(1,0,0,1,_n,E)):Vn(new en(1,0,0,1,_n,E),m),N===B&&(m=Vn(new en(1,0,0,-1,0,0),m)),v=m.join(" ")+` Tm
`):v=X(_n)+" "+X(E)+` Td
`,v},bn=0;bn<$r.length;bn++){switch(fr="",er){case 1:au=(ga?"<":"(")+$r[bn][0]+(ga?">":")"),Us=parseFloat($r[bn][1]),gl=parseFloat($r[bn][2]);break;case 0:au=(ga?"<":"(")+$r[bn]+(ga?">":")"),Us=Ri(We),gl=sa(bt)}Vs!==void 0&&Vs[bn]!==void 0&&(fr=Vs[bn]+` Tw
`),bn===0?ue.push(fr+nn(Us,gl,Fi)+au):er===0?ue.push(fr+au):er===1&&ue.push(fr+nn(Us,gl,Fi)+au)}ue=er===0?ue.join(` Tj
T* `):ue.join(` Tj
`),ue+=` Tj
`;var ci=`BT
/`;return ci+=je+" "+ht+` Tf
`,ci+=X(ht*Ss)+` TL
`,ci+=xi+`
`,ci+=Ia,ci+=ue,$e(ci+="ET"),S[je]=!0,Gi};var Q=_.__private__.clip=_.clip=function(ue){return $e(ue==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Q("evenodd")},_.__private__.discardPath=_.discardPath=function(){return $e("n"),this};var me=_.__private__.isValidStyle=function(ue){var We=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ue)!==-1&&(We=!0),We};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(ue){return me(ue)&&(p=ue),this};var Je=_.__private__.getStyle=_.getStyle=function(ue){var We=p;switch(ue){case"D":case"S":We="S";break;case"F":We="f";break;case"FD":case"DF":We="B";break;case"f":case"f*":case"B":case"B*":We=ue}return We},It=_.close=function(){return $e("h"),this};_.stroke=function(){return $e("S"),this},_.fill=function(ue){return jt("f",ue),this},_.fillEvenOdd=function(ue){return jt("f*",ue),this},_.fillStroke=function(ue){return jt("B",ue),this},_.fillStrokeEvenOdd=function(ue){return jt("B*",ue),this};var jt=function(ue,We){Ka(We)==="object"?Vr(We,ue):$e(ue)},qt=function(ue){ue===null||N===B&&ue===void 0||(ue=Je(ue),$e(ue))};function Qt(ue,We,bt,Ft,nr){var Pr=new dy(We||this.boundingBox,bt||this.xStep,Ft||this.yStep,this.gState,nr||this.matrix);Pr.stream=this.stream;var $r=ue+"$$"+this.cloneIndex+++"$$";return Ue($r,Pr),Pr}var Vr=function(ue,We){var bt=xr[ue.key],Ft=Vt[bt];if(Ft instanceof nm)$e("q"),$e(Wr(We)),Ft.gState&&_.setGState(Ft.gState),$e(ue.matrix.toString()+" cm"),$e("/"+bt+" sh"),$e("Q");else if(Ft instanceof dy){var nr=new en(1,0,0,-1,0,go());ue.matrix&&(nr=nr.multiply(ue.matrix||Me),bt=Qt.call(Ft,ue.key,ue.boundingBox,ue.xStep,ue.yStep,nr).id),$e("q"),$e("/Pattern cs"),$e("/"+bt+" scn"),Ft.gState&&_.setGState(Ft.gState),$e(We),$e("Q")}},Wr=function(ue){switch(ue){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},zr=_.moveTo=function(ue,We){return $e(X(ae(ue))+" "+X(se(We))+" m"),this},Kr=_.lineTo=function(ue,We){return $e(X(ae(ue))+" "+X(se(We))+" l"),this},Cr=_.curveTo=function(ue,We,bt,Ft,nr,Pr){return $e([X(ae(ue)),X(se(We)),X(ae(bt)),X(se(Ft)),X(ae(nr)),X(se(Pr)),"c"].join(" ")),this};_.__private__.line=_.line=function(ue,We,bt,Ft,nr){if(isNaN(ue)||isNaN(We)||isNaN(bt)||isNaN(Ft)||!me(nr))throw new Error("Invalid arguments passed to jsPDF.line");return N===F?this.lines([[bt-ue,Ft-We]],ue,We,[1,1],nr||"S"):this.lines([[bt-ue,Ft-We]],ue,We,[1,1]).stroke()},_.__private__.lines=_.lines=function(ue,We,bt,Ft,nr,Pr){var $r,Tn,Dn,Mn,ni,On,Mi,Fi,Gi,pi,ga,Ia;if(typeof ue=="number"&&(Ia=bt,bt=We,We=ue,ue=Ia),Ft=Ft||[1,1],Pr=Pr||!1,isNaN(We)||isNaN(bt)||!Array.isArray(ue)||!Array.isArray(Ft)||!me(nr)||typeof Pr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(zr(We,bt),$r=Ft[0],Tn=Ft[1],Mn=ue.length,pi=We,ga=bt,Dn=0;Dn<Mn;Dn++)(ni=ue[Dn]).length===2?(pi=ni[0]*$r+pi,ga=ni[1]*Tn+ga,Kr(pi,ga)):(On=ni[0]*$r+pi,Mi=ni[1]*Tn+ga,Fi=ni[2]*$r+pi,Gi=ni[3]*Tn+ga,pi=ni[4]*$r+pi,ga=ni[5]*Tn+ga,Cr(On,Mi,Fi,Gi,pi,ga));return Pr&&It(),qt(nr),this},_.path=function(ue){for(var We=0;We<ue.length;We++){var bt=ue[We],Ft=bt.c;switch(bt.op){case"m":zr(Ft[0],Ft[1]);break;case"l":Kr(Ft[0],Ft[1]);break;case"c":Cr.apply(this,Ft);break;case"h":It()}}return this},_.__private__.rect=_.rect=function(ue,We,bt,Ft,nr){if(isNaN(ue)||isNaN(We)||isNaN(bt)||isNaN(Ft)||!me(nr))throw new Error("Invalid arguments passed to jsPDF.rect");return N===F&&(Ft=-Ft),$e([X(ae(ue)),X(se(We)),X(ae(bt)),X(ae(Ft)),"re"].join(" ")),qt(nr),this},_.__private__.triangle=_.triangle=function(ue,We,bt,Ft,nr,Pr,$r){if(isNaN(ue)||isNaN(We)||isNaN(bt)||isNaN(Ft)||isNaN(nr)||isNaN(Pr)||!me($r))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[bt-ue,Ft-We],[nr-bt,Pr-Ft],[ue-nr,We-Pr]],ue,We,[1,1],$r,!0),this},_.__private__.roundedRect=_.roundedRect=function(ue,We,bt,Ft,nr,Pr,$r){if(isNaN(ue)||isNaN(We)||isNaN(bt)||isNaN(Ft)||isNaN(nr)||isNaN(Pr)||!me($r))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Tn=4/3*(Math.SQRT2-1);return nr=Math.min(nr,.5*bt),Pr=Math.min(Pr,.5*Ft),this.lines([[bt-2*nr,0],[nr*Tn,0,nr,Pr-Pr*Tn,nr,Pr],[0,Ft-2*Pr],[0,Pr*Tn,-nr*Tn,Pr,-nr,Pr],[2*nr-bt,0],[-nr*Tn,0,-nr,-Pr*Tn,-nr,-Pr],[0,2*Pr-Ft],[0,-Pr*Tn,nr*Tn,-Pr,nr,-Pr]],ue+nr,We,[1,1],$r,!0),this},_.__private__.ellipse=_.ellipse=function(ue,We,bt,Ft,nr){if(isNaN(ue)||isNaN(We)||isNaN(bt)||isNaN(Ft)||!me(nr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pr=4/3*(Math.SQRT2-1)*bt,$r=4/3*(Math.SQRT2-1)*Ft;return zr(ue+bt,We),Cr(ue+bt,We-$r,ue+Pr,We-Ft,ue,We-Ft),Cr(ue-Pr,We-Ft,ue-bt,We-$r,ue-bt,We),Cr(ue-bt,We+$r,ue-Pr,We+Ft,ue,We+Ft),Cr(ue+Pr,We+Ft,ue+bt,We+$r,ue+bt,We),qt(nr),this},_.__private__.circle=_.circle=function(ue,We,bt,Ft){if(isNaN(ue)||isNaN(We)||isNaN(bt)||!me(Ft))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ue,We,bt,bt,Ft)},_.setFont=function(ue,We,bt){return bt&&(We=U(We,bt)),je=ma(ue,We,{disableWarning:!1}),this};var Hn=_.__private__.getFont=_.getFont=function(){return yt[ma.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var ue,We,bt={};for(ue in ct)if(ct.hasOwnProperty(ue))for(We in bt[ue]=[],ct[ue])ct[ue].hasOwnProperty(We)&&bt[ue].push(We);return bt},_.addFont=function(ue,We,bt,Ft,nr){var Pr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pr.indexOf(arguments[3])!==-1?nr=arguments[3]:arguments[3]&&Pr.indexOf(arguments[3])==-1&&(bt=U(bt,Ft)),zs.call(this,ue,We,bt,nr=nr||"Identity-H")};var _i,Rn=e.lineWidth||.200025,dn=_.__private__.getLineWidth=_.getLineWidth=function(){return Rn},Tr=_.__private__.setLineWidth=_.setLineWidth=function(ue){return Rn=ue,$e(X(ae(ue))+" w"),this};_.__private__.setLineDash=oi.API.setLineDash=oi.API.setLineDashPattern=function(ue,We){if(ue=ue||[],We=We||0,isNaN(We)||!Array.isArray(ue))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ue=ue.map(function(bt){return X(ae(bt))}).join(" "),We=X(ae(We)),$e("["+ue+"] "+We+" d"),this};var rn=_.__private__.getLineHeight=_.getLineHeight=function(){return ht*_i};_.__private__.getLineHeight=_.getLineHeight=function(){return ht*_i};var sn=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(ue){return typeof(ue=ue||1.15)=="number"&&(_i=ue),this},ii=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return _i};sn(e.lineHeight);var Ri=_.__private__.getHorizontalCoordinate=function(ue){return ae(ue)},sa=_.__private__.getVerticalCoordinate=function(ue){return N===B?ue:kt[Ee].mediaBox.topRightY-kt[Ee].mediaBox.bottomLeftY-ae(ue)},hi=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(ue){return X(Ri(ue))},ai=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(ue){return X(sa(ue))},as=e.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return kr(as)},_.__private__.setStrokeColor=_.setDrawColor=function(ue,We,bt,Ft){return as=Sn({ch1:ue,ch2:We,ch3:bt,ch4:Ft,pdfColorType:"draw",precision:2}),$e(as),this};var _s=e.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return kr(_s)},_.__private__.setFillColor=_.setFillColor=function(ue,We,bt,Ft){return _s=Sn({ch1:ue,ch2:We,ch3:bt,ch4:Ft,pdfColorType:"fill",precision:2}),$e(_s),this};var xi=e.textColor||"0 g",os=_.__private__.getTextColor=_.getTextColor=function(){return kr(xi)};_.__private__.setTextColor=_.setTextColor=function(ue,We,bt,Ft){return xi=Sn({ch1:ue,ch2:We,ch3:bt,ch4:Ft,pdfColorType:"text",precision:3}),this};var Xi=e.charSpace,tu=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Xi||0)};_.__private__.setCharSpace=_.setCharSpace=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xi=ue,this};var Fa=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(ue){var We=_.CapJoinStyles[ue];if(We===void 0)throw new Error("Line cap style of '"+ue+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fa=We,$e(We+" J"),this};var xs=0;_.__private__.setLineJoin=_.setLineJoin=function(ue){var We=_.CapJoinStyles[ue];if(We===void 0)throw new Error("Line join style of '"+ue+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xs=We,$e(We+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(ue){if(ue=ue||0,isNaN(ue))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $e(X(ae(ue))+" M"),this},_.GState=zx,_.setGState=function(ue){(ue=typeof ue=="string"?_r[Nr[ue]]:So(null,ue)).equals(tn)||($e("/"+ue.id+" gs"),tn=ue)};var So=function(ue,We){if(!ue||!Nr[ue]){var bt=!1;for(var Ft in _r)if(_r.hasOwnProperty(Ft)&&_r[Ft].equals(We)){bt=!0;break}if(bt)We=_r[Ft];else{var nr="GS"+(Object.keys(_r).length+1).toString(10);_r[nr]=We,We.id=nr}return ue&&(Nr[ue]=We.id),Hr.publish("addGState",We),We}};_.addGState=function(ue,We){return So(ue,We),this},_.saveGraphicsState=function(){return $e("q"),Jt.push({key:je,size:ht,color:xi}),this},_.restoreGraphicsState=function(){$e("Q");var ue=Jt.pop();return je=ue.key,ht=ue.size,xi=ue.color,tn=null,this},_.setCurrentTransformationMatrix=function(ue){return $e(ue.toString()+" cm"),this},_.comment=function(ue){return $e("#"+ue),this};var ru=function(ue,We){var bt=ue||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return bt},set:function(Pr){isNaN(Pr)||(bt=parseFloat(Pr))}});var Ft=We||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ft},set:function(Pr){isNaN(Pr)||(Ft=parseFloat(Pr))}});var nr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return nr},set:function(Pr){nr=Pr.toString()}}),this},nu=function(ue,We,bt,Ft){ru.call(this,ue,We),this.type="rect";var nr=bt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return nr},set:function($r){isNaN($r)||(nr=parseFloat($r))}});var Pr=Ft||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pr},set:function($r){isNaN($r)||(Pr=parseFloat($r))}}),this},Ja=function(){this.page=Lr,this.currentPage=Ee,this.pages=it.slice(0),this.pagesContext=kt.slice(0),this.x=He,this.y=Dt,this.matrix=St,this.width=Yn(Ee),this.height=go(Ee),this.outputDestination=Nt,this.id="",this.objectNumber=-1};Ja.prototype.restore=function(){Lr=this.page,Ee=this.currentPage,kt=this.pagesContext,it=this.pages,He=this.x,Dt=this.y,St=this.matrix,Wn(Ee,this.width),Zn(Ee,this.height),Nt=this.outputDestination};var ki=function(ue,We,bt,Ft,nr){Jn.push(new Ja),Lr=Ee=0,it=[],He=ue,Dt=We,St=nr,Ai([bt,Ft])};for(var ws in _.beginFormObject=function(ue,We,bt,Ft,nr){return ki(ue,We,bt,Ft,nr),this},_.endFormObject=function(ue){return(function(We){if(rr[We])Jn.pop().restore();else{var bt=new Ja,Ft="Xo"+(Object.keys(Ur).length+1).toString(10);bt.id=Ft,rr[We]=Ft,Ur[Ft]=bt,Hr.publish("addFormObject",bt),Jn.pop().restore()}})(ue),this},_.doFormObject=function(ue,We){var bt=Ur[rr[ue]];return $e("q"),$e(We.toString()+" cm"),$e("/"+bt.id+" Do"),$e("Q"),this},_.getFormObject=function(ue){var We=Ur[rr[ue]];return{x:We.x,y:We.y,width:We.width,height:We.height,matrix:We.matrix}},_.save=function(ue,We){return ue=ue||"generated.pdf",(We=We||{}).returnPromise=We.returnPromise||!1,We.returnPromise===!1?(Qp(No(js()),ue),typeof Qp.unload=="function"&&Si.setTimeout&&setTimeout(Qp.unload,911),this):new Promise(function(bt,Ft){try{var nr=Qp(No(js()),ue);typeof Qp.unload=="function"&&Si.setTimeout&&setTimeout(Qp.unload,911),bt(nr)}catch(Pr){Ft(Pr.message)}})},oi.API)oi.API.hasOwnProperty(ws)&&(ws==="events"&&oi.API.events.length?(function(ue,We){var bt,Ft,nr;for(nr=We.length-1;nr!==-1;nr--)bt=We[nr][0],Ft=We[nr][1],ue.subscribe.apply(ue,[bt].concat(typeof Ft=="function"?[Ft]:Ft))})(Hr,oi.API.events):_[ws]=oi.API[ws]);var Yn=_.getPageWidth=function(ue){return(kt[ue=ue||Ee].mediaBox.topRightX-kt[ue].mediaBox.bottomLeftX)/Ge},Wn=_.setPageWidth=function(ue,We){kt[ue].mediaBox.topRightX=We*Ge+kt[ue].mediaBox.bottomLeftX},go=_.getPageHeight=function(ue){return(kt[ue=ue||Ee].mediaBox.topRightY-kt[ue].mediaBox.bottomLeftY)/Ge},Zn=_.setPageHeight=function(ue,We){kt[ue].mediaBox.topRightY=We*Ge+kt[ue].mediaBox.bottomLeftY};return _.internal={pdfEscape:fi,getStyle:Je,getFont:Hn,getFontSize:cr,getCharSpace:tu,getTextColor:os,getLineHeight:rn,getLineHeightFactor:ii,getLineWidth:dn,write:Zt,getHorizontalCoordinate:Ri,getVerticalCoordinate:sa,getCoordinateString:hi,getVerticalCoordinateString:ai,collections:{},newObject:Gt,newAdditionalObject:En,newObjectDeferred:zt,newObjectDeferredBegin:qr,getFilters:Pn,putStream:Un,events:Hr,scaleFactor:Ge,pageSize:{getWidth:function(){return Yn(Ee)},setWidth:function(ue){Wn(Ee,ue)},getHeight:function(){return go(Ee)},setHeight:function(ue){Zn(Ee,ue)}},encryptionOptions:g,encryption:Ta,getEncryptor:function(ue){return g!==null?Ta.encryptor(ue,0):function(We){return We}},output:Ua,getNumberOfPages:Wo,pages:it,out:$e,f2:re,f3:H,getPageInfo:bs,getPageInfoByObjId:ac,getCurrentPageInfo:eu,getPDFVersion:k,Point:ru,Rectangle:nu,Matrix:en,hasHotfix:Fo},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return Yn(Ee)},set:function(ue){Wn(Ee,ue)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return go(Ee)},set:function(ue){Zn(Ee,ue)},enumerable:!0,configurable:!0}),(function(ue){for(var We=0,bt=Wt.length;We<bt;We++){var Ft=zs.call(this,ue[We][0],ue[We][1],ue[We][2],Wt[We][3],!0);b===!1&&(S[Ft]=!0);var nr=ue[We][0].split("-");Oa({id:Ft,fontName:nr[0],fontStyle:nr[1]||""})}Hr.publish("addFonts",{fonts:yt,dictionary:ct})}).call(_,Wt),je="F1",Ql(i,r),Hr.publish("initialized"),_}$g.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},$g.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$g.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},$g.prototype.processOwnerPassword=function(e,t){return S3(w3(t).substr(0,5),e)},$g.prototype.encryptor=function(e,t){var r=w3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return S3(r,n)}},zx.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ka(e)!==Ka(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},oi.API={events:[]},oi.version="3.0.2";var vs=oi.API,sA=1,zm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ag=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Li=function(e){return e.toFixed(2)},Hh=function(e){return e.toFixed(5)};vs.__acroform__={};var tc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},aN=function(e){return e*sA},of=function(e){var t=new Xq,r=Gn.internal.getHeight(e)||0,n=Gn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Li(n)),Number(Li(r))],t},Bue=vs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},zue=vs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},jue=vs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ls=vs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jue(e,t-1)},Rs=vs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bue(e,t-1)},Ds=vs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zue(e,t-1)},que=vs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],o=e[1],u=e[2],a=e[3],f={};return f.lowerLeft_X=r(i)||0,f.lowerLeft_Y=n(o+a)||0,f.upperRight_X=r(i+u)||0,f.upperRight_Y=n(o)||0,[Number(Li(f.lowerLeft_X)),Number(Li(f.lowerLeft_Y)),Number(Li(f.upperRight_X)),Number(Li(f.upperRight_Y))]},Vue=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=C3(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Li(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=of(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},C3=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(re){return re.split(`
`)}):i.map(function(re){return[re]});var o=r,u=Gn.internal.getHeight(e)||0;u=u<0?-u:u;var a=Gn.internal.getWidth(e)||0;a=a<0?-a:a;var f=function(re,H,ae){if(re+1<i.length){var se=H+" "+i[re+1][0];return m_(se,e,ae).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var p,g,b=m_("3",e,o).height,S=e.multiline?u-o:(u-b)/2,_=S+=2,P=0,k=0,M=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+m_(t,e,o=12).width+", FieldWidth:"+a+`
`;break}for(var D="",F=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var N=!1;if(i[B].length!==1&&M!==i[B].length-1){if((b+2)*(F+2)+2>u)continue e;D+=i[B][M],N=!0,k=B,B--}else{D=(D+=i[B][M]+" ").substr(D.length-1)==" "?D.substr(0,D.length-1):D;var $=parseInt(B),V=f($,D,o),U=B>=i.length-1;if(V&&!U){D+=" ",M=0;continue}if(V||U){if(U)k=$;else if(e.multiline&&(b+2)*(F+2)+2>u)continue e}else{if(!e.multiline||(b+2)*(F+2)+2>u)continue e;k=$}}for(var X="",Z=P;Z<=k;Z++){var oe=i[Z];if(e.multiline){if(Z===k){X+=oe[M]+" ",M=(M+1)%oe.length;continue}if(Z===P){X+=oe[oe.length-1]+" ";continue}}X+=oe[0]+" "}switch(X=X.substr(X.length-1)==" "?X.substr(0,X.length-1):X,g=m_(X,e,o).width,e.textAlign){case"right":p=a-g-2;break;case"center":p=(a-g)/2;break;default:p=2}t+=Li(p)+" "+Li(_)+` Td
`,t+="("+zm(X)+`) Tj
`,t+=-Li(p)+` 0 Td
`,_=-(o+2),g=0,P=N?k:k+1,F++,D=""}break}return n.text=t,n.fontSize=o,n},m_=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},$ue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Gue=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Uue=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Nd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify($ue)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");sA=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Yq,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&Gue(o,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var u in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(u)){var a=n[u],f=[],p=a.Rect;if(a.Rect&&(a.Rect=que(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Gn.createDefaultAppearanceStream(a),Ka(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(f=a.getKeyValueListForStream()),a.Rect=p,a.hasAppearanceStream&&!a.appearanceStreamContent){var g=Vue(a);f.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(a.appearanceStreamContent){var b="";for(var S in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(S)){var _=a.appearanceStreamContent[S];if(b+="/"+S+" ",b+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var u in _)if(_.hasOwnProperty(u)){var P=_[u];typeof P=="function"&&(P=P.call(i,a)),b+="/"+u+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=_)=="function"&&(P=P.call(i,a)),b+="/"+u+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:a.objId}),i.internal.out("endobj")}o&&(function(k,M){for(var D in k)if(k.hasOwnProperty(D)){var F=D,B=k[D];M.internal.newObjectDeferredBegin(B.objId,!0),Ka(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete k[F]}})(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Wq=vs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(u){return u};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),Ka(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+zm(n(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Y5=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+zm(n(e))+")"},df=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};df.prototype.toString=function(){return this.objId+" 0 R"},df.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},df.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:Wq(i,this.objId,this.scope)}):i instanceof df?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var Xq=function(){df.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};tc(Xq,df);var Yq=function(){df.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+zm(r(e))+")"}},set:function(r){e=r}})};tc(Yq,df);var Nd=function e(){df.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute F supplied.');t=D}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ls(t,3)},set:function(D){D?this.F=Rs(t,3):this.F=Ds(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute Ff supplied.');r=D}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(D){n=D!==void 0?D:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(D){n[0]=D}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(D){n[1]=D}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(D){n[2]=D}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(D){n[3]=D}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(D){switch(D){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=D;break;default:throw new Error('Invalid value "'+D+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof jx)return;o="FieldObject"+e.FieldNum++}var D=function(F){return F};return this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),"("+zm(D(o))+")"},set:function(D){o=D.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(D){o=D}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(D){u=D}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(D){a=D}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(D){f=D}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/sA:p},set:function(D){p=D}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(D){g=D}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof jx||this instanceof mm))return Y5(b,this.objId,this.scope)},set:function(D){D=D.toString(),b=D}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Il==0?Y5(S,this.objId,this.scope):S},set:function(D){D=D.toString(),S=this instanceof Il==0?D.substr(0,1)==="("?Ag(D.substr(1,D.length-2)):Ag(D):D}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Il==1?Ag(S.substr(1,S.length-1)):S},set:function(D){D=D.toString(),S=this instanceof Il==1?"/"+D:D}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(D){this.V=D}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Il==0?Y5(_,this.objId,this.scope):_},set:function(D){D=D.toString(),_=this instanceof Il==0?D.substr(0,1)==="("?Ag(D.substr(1,D.length-2)):Ag(D):D}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Il==1?Ag(_.substr(1,_.length-1)):_},set:function(D){D=D.toString(),_=this instanceof Il==1?"/"+D:D}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(D){D=!!D,k=D}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(D){P=D}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,1)},set:function(D){D?this.Ff=Rs(this.Ff,1):this.Ff=Ds(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,2)},set:function(D){D?this.Ff=Rs(this.Ff,2):this.Ff=Ds(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,3)},set:function(D){D?this.Ff=Rs(this.Ff,3):this.Ff=Ds(this.Ff,3)}});var M=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(M!==null)return M},set:function(D){if([0,1,2].indexOf(D)===-1)throw new Error('Invalid value "'+D+'" for attribute Q supplied.');M=D}}),Object.defineProperty(this,"textAlign",{get:function(){var D;switch(M){case 0:default:D="left";break;case 1:D="center";break;case 2:D="right"}return D},configurable:!0,enumerable:!0,set:function(D){switch(D){case"right":case 2:M=2;break;case"center":case 1:M=1;break;default:M=0}}})};tc(Nd,df);var Sy=function(){Nd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Wq(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(o,u,a){a||(a=1);for(var f,p=[];f=u.exec(o);)p.push(f[a]);return p})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,18)},set:function(r){r?this.Ff=Rs(this.Ff,18):this.Ff=Ds(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Rs(this.Ff,19):this.Ff=Ds(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,20)},set:function(r){r?(this.Ff=Rs(this.Ff,20),t.sort()):this.Ff=Ds(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,22)},set:function(r){r?this.Ff=Rs(this.Ff,22):this.Ff=Ds(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,23)},set:function(r){r?this.Ff=Rs(this.Ff,23):this.Ff=Ds(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,27)},set:function(r){r?this.Ff=Rs(this.Ff,27):this.Ff=Ds(this.Ff,27)}}),this.hasAppearanceStream=!1};tc(Sy,Nd);var Cy=function(){Sy.call(this),this.fontName="helvetica",this.combo=!1};tc(Cy,Sy);var Ey=function(){Cy.call(this),this.combo=!0};tc(Ey,Cy);var sx=function(){Ey.call(this),this.edit=!0};tc(sx,Ey);var Il=function(){Nd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,15)},set:function(r){r?this.Ff=Rs(this.Ff,15):this.Ff=Ds(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,16)},set:function(r){r?this.Ff=Rs(this.Ff,16):this.Ff=Ds(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,17)},set:function(r){r?this.Ff=Rs(this.Ff,17):this.Ff=Ds(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,26)},set:function(r){r?this.Ff=Rs(this.Ff,26):this.Ff=Ds(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+zm(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Ka(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};tc(Il,Nd);var lx=function(){Il.call(this),this.pushButton=!0};tc(lx,Il);var Ty=function(){Il.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};tc(Ty,Il);var jx=function(){var e,t;Nd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),n)u.push("/"+o+" ("+zm(i(n[o]))+")");return u.push(">>"),u.join(`
`)},set:function(i){Ka(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Gn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tc(jx,Nd),Ty.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ty.prototype.createOption=function(e){var t=new jx;return t.Parent=this,t.optionName=e,this.Kids.push(t),Hue.call(this.scope,t),t};var ux=function(){Il.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Gn.CheckBox.createAppearanceStream()};tc(ux,Il);var mm=function(){Nd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,13)},set:function(t){t?this.Ff=Rs(this.Ff,13):this.Ff=Ds(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,21)},set:function(t){t?this.Ff=Rs(this.Ff,21):this.Ff=Ds(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,23)},set:function(t){t?this.Ff=Rs(this.Ff,23):this.Ff=Ds(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,24)},set:function(t){t?this.Ff=Rs(this.Ff,24):this.Ff=Ds(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,25)},set:function(t){t?this.Ff=Rs(this.Ff,25):this.Ff=Ds(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,26)},set:function(t){t?this.Ff=Rs(this.Ff,26):this.Ff=Ds(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tc(mm,Nd);var cx=function(){mm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ls(this.Ff,14)},set:function(e){e?this.Ff=Rs(this.Ff,14):this.Ff=Ds(this.Ff,14)}}),this.password=!0};tc(cx,mm);var Gn={CheckBox:{createAppearanceStream:function(){return{N:{On:Gn.CheckBox.YesNormal},D:{On:Gn.CheckBox.YesPushDown,Off:Gn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=C3(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Li(Gn.internal.getWidth(e))+" "+Li(Gn.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Li(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=of(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],o=Gn.internal.getHeight(e),u=Gn.internal.getWidth(e),a=C3(e,e.caption);return i.push("1 g"),i.push("0 0 "+Li(u)+" "+Li(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Li(u-1)+" "+Li(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Li(a.fontSize)+" Tf "+n),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Li(Gn.internal.getWidth(e))+" "+Li(Gn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Gn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Gn.RadioButton.Circle.YesNormal,t.D[e]=Gn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=of(e);t.scope=e.scope;var r=[],n=Gn.internal.getWidth(e)<=Gn.internal.getHeight(e)?Gn.internal.getWidth(e)/4:Gn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Gn.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Hh(Gn.internal.getWidth(e)/2)+" "+Hh(Gn.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[],n=Gn.internal.getWidth(e)<=Gn.internal.getHeight(e)?Gn.internal.getWidth(e)/4:Gn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Gn.internal.Bezier_C).toFixed(5)),u=Number((n*Gn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hh(Gn.internal.getWidth(e)/2)+" "+Hh(Gn.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Hh(Gn.internal.getWidth(e)/2)+" "+Hh(Gn.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),r.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),r.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),r.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[],n=Gn.internal.getWidth(e)<=Gn.internal.getHeight(e)?Gn.internal.getWidth(e)/4:Gn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*Gn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hh(Gn.internal.getWidth(e)/2)+" "+Hh(Gn.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Gn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Gn.RadioButton.Cross.YesNormal,t.D[e]=Gn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=of(e);t.scope=e.scope;var r=[],n=Gn.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Li(Gn.internal.getWidth(e)-2)+" "+Li(Gn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Li(n.x1.x)+" "+Li(n.x1.y)+" m"),r.push(Li(n.x2.x)+" "+Li(n.x2.y)+" l"),r.push(Li(n.x4.x)+" "+Li(n.x4.y)+" m"),r.push(Li(n.x3.x)+" "+Li(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=of(e);t.scope=e.scope;var r=Gn.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Li(Gn.internal.getWidth(e))+" "+Li(Gn.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Li(Gn.internal.getWidth(e)-2)+" "+Li(Gn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Li(r.x1.x)+" "+Li(r.x1.y)+" m"),n.push(Li(r.x2.x)+" "+Li(r.x2.y)+" l"),n.push(Li(r.x4.x)+" "+Li(r.x4.y)+" m"),n.push(Li(r.x3.x)+" "+Li(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Li(Gn.internal.getWidth(e))+" "+Li(Gn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Gn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Gn.internal.getWidth(e),r=Gn.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Gn.internal.getWidth=function(e){var t=0;return Ka(e)==="object"&&(t=aN(e.Rect[2])),t},Gn.internal.getHeight=function(e){var t=0;return Ka(e)==="object"&&(t=aN(e.Rect[3])),t};var Hue=vs.addField=function(e){if(Uue(this,e),!(e instanceof Nd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};vs.AcroFormChoiceField=Sy,vs.AcroFormListBox=Cy,vs.AcroFormComboBox=Ey,vs.AcroFormEditBox=sx,vs.AcroFormButton=Il,vs.AcroFormPushButton=lx,vs.AcroFormRadioButton=Ty,vs.AcroFormCheckBox=ux,vs.AcroFormTextField=mm,vs.AcroFormPasswordField=cx,vs.AcroFormAppearance=Gn,vs.AcroForm={ChoiceField:Sy,ListBox:Cy,ComboBox:Ey,EditBox:sx,Button:Il,PushButton:lx,RadioButton:Ty,CheckBox:ux,TextField:mm,PasswordField:cx,Appearance:Gn},oi.AcroForm={ChoiceField:Sy,ListBox:Cy,ComboBox:Ey,EditBox:sx,Button:Il,PushButton:lx,RadioButton:Ty,CheckBox:ux,TextField:mm,PasswordField:cx,Appearance:Gn};oi.AcroForm;function Zq(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(re,H){var ae,se,de,fe,Le,ye=r;if((H=H||r)==="RGBA"||re.data!==void 0&&re.data instanceof Uint8ClampedArray&&"height"in re&&"width"in re)return"RGBA";if(V(re))for(Le in n)for(de=n[Le],ae=0;ae<de.length;ae+=1){for(fe=!0,se=0;se<de[ae].length;se+=1)if(de[ae][se]!==void 0&&de[ae][se]!==re[se]){fe=!1;break}if(fe===!0){ye=Le;break}}else for(Le in n)for(de=n[Le],ae=0;ae<de.length;ae+=1){for(fe=!0,se=0;se<de[ae].length;se+=1)if(de[ae][se]!==void 0&&de[ae][se]!==re.charCodeAt(se)){fe=!1;break}if(fe===!0){ye=Le;break}}return ye===r&&H!==r&&(ye=H),ye},o=function re(H){for(var ae=this.internal.write,se=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var fe=[];if(fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Image"}),fe.push({key:"Width",value:H.width}),fe.push({key:"Height",value:H.height}),H.colorSpace===D.INDEXED?fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(fe.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===D.DEVICE_CMYK&&fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),fe.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&fe.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var Le="",ye=0,xe=H.transparency.length;ye<xe;ye++)Le+=H.transparency[ye]+" "+H.transparency[ye]+" ";fe.push({key:"Mask",value:"["+Le+"]"})}H.sMask!==void 0&&fe.push({key:"SMask",value:H.objectId+1+" 0 R"});var Se=H.filter!==void 0?["/"+H.filter]:void 0;if(se({data:H.data,additionalKeyValues:fe,alreadyAppliedFilters:Se,objectId:H.objectId}),ae("endobj"),"sMask"in H&&H.sMask!==void 0){var Re=(H.predictor!=null?"/Predictor "+H.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+H.width,he={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:Re,data:H.sMask};"filter"in H&&(he.filter=H.filter),re.call(this,he)}if(H.colorSpace===D.INDEXED){var Ee=this.internal.newObject();se({data:X(new Uint8Array(H.palette)),objectId:Ee}),ae("endobj")}},u=function(){var re=this.internal.collections[t+"images"];for(var H in re)o.call(this,re[H])},a=function(){var re,H=this.internal.collections[t+"images"],ae=this.internal.write;for(var se in H)ae("/I"+(re=H[se]).index,re.objectId,"0","R")},f=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",a))},p=function(){var re=this.internal.collections[t+"images"];return f.call(this),re},g=function(){return Object.keys(this.internal.collections[t+"images"]).length},b=function(re){return typeof e["process"+re.toUpperCase()]=="function"},S=function(re){return Ka(re)==="object"&&re.nodeType===1},_=function(re,H){if(re.nodeName==="IMG"&&re.hasAttribute("src")){var ae=""+re.getAttribute("src");if(ae.indexOf("data:image/")===0)return ox(unescape(ae).split("base64,").pop());var se=e.loadFile(ae,!0);if(se!==void 0)return se}if(re.nodeName==="CANVAS"){if(re.width===0||re.height===0)throw new Error("Given canvas must have data. Canvas width: "+re.width+", height: "+re.height);var de;switch(H){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return ox(re.toDataURL(de,1).split("base64,").pop())}},P=function(re){var H=this.internal.collections[t+"images"];if(H){for(var ae in H)if(re===H[ae].alias)return H[ae]}},k=function(re,H,ae){return re||H||(re=-96,H=-96),re<0&&(re=-1*ae.width*72/re/this.internal.scaleFactor),H<0&&(H=-1*ae.height*72/H/this.internal.scaleFactor),re===0&&(re=H*ae.width/ae.height),H===0&&(H=re*ae.height/ae.width),[re,H]},M=function(re,H,ae,se,de,fe){var Le=k.call(this,ae,se,de),ye=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Se=p.call(this);if(ae=Le[0],se=Le[1],Se[de.index]=de,fe){fe*=Math.PI/180;var Re=Math.cos(fe),he=Math.sin(fe),Ee=function(Ne){return Ne.toFixed(4)},we=[Ee(Re),Ee(he),Ee(-1*he),Ee(Re),0,0,"cm"]}this.internal.write("q"),fe?(this.internal.write([1,"0","0",1,ye(re),xe(H+se),"cm"].join(" ")),this.internal.write(we.join(" ")),this.internal.write([ye(ae),"0","0",ye(se),"0","0","cm"].join(" "))):this.internal.write([ye(ae),"0","0",ye(se),ye(re),xe(H+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},D=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=e.__addimage__.sHashCode=function(re){var H,ae,se=0;if(typeof re=="string")for(ae=re.length,H=0;H<ae;H++)se=(se<<5)-se+re.charCodeAt(H),se|=0;else if(V(re))for(ae=re.byteLength/2,H=0;H<ae;H++)se=(se<<5)-se+re[H],se|=0;return se},N=e.__addimage__.validateStringAsBase64=function(re){(re=re||"").toString().trim();var H=!0;return re.length===0&&(H=!1),re.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(re.substr(0,re.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(re.substr(-2))===!1&&(H=!1),H},$=e.__addimage__.extractImageFromDataUrl=function(re){if(re==null||!(re=re.trim()).startsWith("data:"))return null;var H=re.indexOf(",");return H<0?null:re.substring(0,H).trim().endsWith("base64")?re.substring(H+1):null};e.__addimage__.isArrayBuffer=function(re){return re instanceof ArrayBuffer};var V=e.__addimage__.isArrayBufferView=function(re){return re instanceof Int8Array||re instanceof Uint8Array||re instanceof Uint8ClampedArray||re instanceof Int16Array||re instanceof Uint16Array||re instanceof Int32Array||re instanceof Uint32Array||re instanceof Float32Array||re instanceof Float64Array},U=e.__addimage__.binaryStringToUint8Array=function(re){for(var H=re.length,ae=new Uint8Array(H),se=0;se<H;se++)ae[se]=re.charCodeAt(se);return ae},X=e.__addimage__.arrayBufferToBinaryString=function(re){for(var H="",ae=V(re)?re:new Uint8Array(re),se=0;se<ae.length;se+=8192)H+=String.fromCharCode.apply(null,ae.subarray(se,se+8192));return H};e.addImage=function(){var re,H,ae,se,de,fe,Le,ye,xe;if(typeof arguments[1]=="number"?(H=r,ae=arguments[1],se=arguments[2],de=arguments[3],fe=arguments[4],Le=arguments[5],ye=arguments[6],xe=arguments[7]):(H=arguments[1],ae=arguments[2],se=arguments[3],de=arguments[4],fe=arguments[5],Le=arguments[6],ye=arguments[7],xe=arguments[8]),Ka(re=arguments[0])==="object"&&!S(re)&&"imageData"in re){var Se=re;re=Se.imageData,H=Se.format||H||r,ae=Se.x||ae||0,se=Se.y||se||0,de=Se.w||Se.width||de,fe=Se.h||Se.height||fe,Le=Se.alias||Le,ye=Se.compression||ye,xe=Se.rotation||Se.angle||xe}var Re=this.internal.getFilters();if(ye===void 0&&Re.indexOf("FlateEncode")!==-1&&(ye="SLOW"),isNaN(ae)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var he=Z.call(this,re,H,Le,ye);return M.call(this,ae,se,de,fe,he,xe),this};var Z=function(re,H,ae,se){var de,fe,Le;if(typeof re=="string"&&i(re)===r){re=unescape(re);var ye=oe(re,!1);(ye!==""||(ye=e.loadFile(re,!0))!==void 0)&&(re=ye)}if(S(re)&&(re=_(re,H)),H=i(re,H),!b(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((Le=ae)==null||Le.length===0)&&(ae=(function(xe){return typeof xe=="string"||V(xe)?B(xe):V(xe.data)?B(xe.data):null})(re)),(de=P.call(this,ae))||(re instanceof Uint8Array||H==="RGBA"||(fe=re,re=U(re)),de=this["process"+H.toUpperCase()](re,g.call(this),ae,(function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in e.image_compression?xe:F.NONE})(se),fe)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},oe=e.__addimage__.convertBase64ToBinaryString=function(re,H){H=typeof H!="boolean"||H;var ae,se="";if(typeof re=="string"){var de;ae=(de=$(re))!==null&&de!==void 0?de:re;try{se=ox(ae)}catch(fe){if(H)throw N(ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};e.getImageProperties=function(re){var H,ae,se="";if(S(re)&&(re=_(re)),typeof re=="string"&&i(re)===r&&((se=oe(re,!1))===""&&(se=e.loadFile(re)||""),re=se),ae=i(re),!b(ae))throw new Error("addImage does not support files of type '"+ae+"', please ensure that a plugin for '"+ae+"' support is added.");if(re instanceof Uint8Array||(re=U(re)),!(H=this["process"+ae.toUpperCase()](re)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=ae,H}})(oi.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};oi.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,o,u=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(r.objId),p=r.pageContext.annotations,g=!1,b=0;b<p.length&&!g;b++)switch((n=p[b]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var S=0;S<p.length;S++){n=p[S];var _=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),M=this.internal.newAdditionalObject(),D=this.internal.getEncryptor(k.objId),F=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+_(D(n.contents))+")",o+=" /Popup "+M.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+_(D(F))+") >>",k.content=o;var B=k.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+u(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+B,n.open&&(o+=" /Open true"),o+=" >>",M.content=o,this.internal.write(k.objId,"0 R",M.objId,"0 R");break;case"freetext":i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var N=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var $=this.annotations._nameMap[n.options.name];n.options.pageNumber=$.page,n.options.top=$.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var V=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+V+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,o,u){var a=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:f(r),y:p(n),w:f(r+i),h:p(n+o)},options:u,type:"link"})},e.textWithLink=function(r,n,i,o){var u,a,f=this.getTextWidth(r),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var g=this.splitTextToSize(r,a).length;u=Math.ceil(p*g)}else a=f,u=p;return this.text(r,n,i,o),i+=.2*p,o.align==="center"&&(n-=f/2),o.align==="right"&&(n-=f),this.link(n,i-p,a,u,o),f},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(oi.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},u=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},a=e.__arabicParser__.isArabicEndLetter=function(k){return u(k)&&o(k)&&t[k.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(k){return u(k)&&i.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return u(k)&&o(k)&&t[k.charCodeAt(0)].length>=1};var p=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return u(k)&&o(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return u(k)&&o(k)&&t[k.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return u(k)&&o(k)&&t[k.charCodeAt(0)].length==4},b=e.__arabicParser__.resolveLigatures=function(k){var M=0,D=r,F="",B=0;for(M=0;M<k.length;M+=1)D[k.charCodeAt(M)]!==void 0?(B++,typeof(D=D[k.charCodeAt(M)])=="number"&&(F+=String.fromCharCode(D),D=r,B=0),M===k.length-1&&(D=r,F+=k.charAt(M-(B-1)),M-=B-1,B=0)):(D=r,F+=k.charAt(M-B),M-=B,B=0);return F};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&n[k.charCodeAt(0)]!==void 0};var S=e.__arabicParser__.getCorrectForm=function(k,M,D){return u(k)?o(k)===!1?-1:!p(k)||!u(M)&&!u(D)||!u(D)&&a(M)||a(k)&&!u(M)||a(k)&&f(M)||a(k)&&a(M)?0:g(k)&&u(M)&&!a(M)&&u(D)&&p(D)?3:a(k)||!u(D)?1:2:-1},_=function(k){var M=0,D=0,F=0,B="",N="",$="",V=(k=k||"").split("\\s+"),U=[];for(M=0;M<V.length;M+=1){for(U.push(""),D=0;D<V[M].length;D+=1)B=V[M][D],N=V[M][D-1],$=V[M][D+1],u(B)?(F=S(B,N,$),U[M]+=F!==-1?String.fromCharCode(t[B.charCodeAt(0)][F]):B):U[M]+=B;U[M]=b(U[M])}return U.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var k,M=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,D=[];if(Array.isArray(M)){var F=0;for(D=[],F=0;F<M.length;F+=1)Array.isArray(M[F])?D.push([_(M[F][0]),M[F][1],M[F][2]]):D.push([_(M[F])]);k=D}else k=_(M);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",P])})(oi.API),oi.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(a){u=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(oi.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(k){b=k}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(k){S=k}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(k){P=k}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return n.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,p){n.call(this);var g=(p=p||{}).fontSize||this.getFontSize(),b=p.font||this.getFont(),S=p.scaleFactor||this.internal.scaleFactor,_=0,P=0,k=0,M=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var D=p.maxWidth;D>0?typeof f=="string"?f=this.splitTextToSize(f,D):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(B,N){return B.concat(M.splitTextToSize(N,D))},[])):f=Array.isArray(f)?f:[f];for(var F=0;F<f.length;F++)_<(k=this.getStringUnitWidth(f[F],{font:b})*g)&&(_=k);return _!==0&&(P=f.length),{w:_/=S,h:Math.max((P*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/S,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var f=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=e.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var p=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,b=this.internal.__cell__.margins||t,S=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,_&&S&&(this.printHeaderRow(f.lineNumber,!0),f.y+=S[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,r===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-g,f.y+g,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+g,{align:"center",baseline:"top",maxWidth:f.width-g-g}):this.text(f.text,f.x+g,f.y+g,{align:"left",baseline:"top",maxWidth:f.width-g-g})),this.internal.__cell__.lastCell=f,this};e.table=function(f,p,g,b,S){if(n.call(this),!g)throw new Error("No data for PDF table.");var _,P,k,M,D=[],F=[],B=[],N={},$={},V=[],U=[],X=(S=S||{}).autoSize||!1,Z=S.printHeaders!==!1,oe=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,re=S.margins||Object.assign({width:this.getPageWidth()},t),H=typeof S.padding=="number"?S.padding:3,ae=S.headerBackgroundColor||"#c8c8c8",se=S.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=re,this.internal.__cell__.table_font_size=oe,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=ae,this.internal.__cell__.headerTextColor=se,this.setFontSize(oe),b==null)F=D=Object.keys(g[0]),B=D.map(function(){return"left"});else if(Array.isArray(b)&&Ka(b[0])==="object")for(D=b.map(function(Se){return Se.name}),F=b.map(function(Se){return Se.prompt||Se.name||""}),B=b.map(function(Se){return Se.align||"left"}),_=0;_<b.length;_+=1)$[b[_].name]=.7499990551181103*b[_].width;else Array.isArray(b)&&typeof b[0]=="string"&&(F=D=b,B=D.map(function(){return"left"}));if(X||Array.isArray(b)&&typeof b[0]=="string")for(_=0;_<D.length;_+=1){for(N[M=D[_]]=g.map(function(Se){return Se[M]}),this.setFont(void 0,"bold"),V.push(this.getTextDimensions(F[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=N[M],this.setFont(void 0,"normal"),k=0;k<P.length;k+=1)V.push(this.getTextDimensions(P[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);$[M]=Math.max.apply(null,V)+H+H,V=[]}if(Z){var de={};for(_=0;_<D.length;_+=1)de[D[_]]={},de[D[_]].text=F[_],de[D[_]].align=B[_];var fe=a.call(this,de,$);U=D.map(function(Se){return new o(f,p,$[Se],fe,de[Se].text,void 0,de[Se].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var Le=b.reduce(function(Se,Re){return Se[Re.name]=Re.align,Se},{});for(_=0;_<g.length;_+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:_,data:g[_]},this);var ye=a.call(this,g[_],$);for(k=0;k<D.length;k+=1){var xe=g[_][D[k]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:_,col:k,data:xe},this),u.call(this,new o(f,p,$[D[k]],ye,xe,_+2,Le[D[k]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var a=function(f,p){var g=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(f).map(function(_){var P=f[_];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,p[_]-g-g)},this).map(function(_){return this.getLineHeightFactor()*_.length*b/S+g+g},this).reduce(function(_,P){return Math.max(_,P)},0)};e.setTableHeaderRow=function(f){n.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,p){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){g=this.internal.__cell__.tableHeaderRow[_].clone(),p&&(g.y=this.internal.__cell__.margins.top||0,S.push(g)),g.lineNumber=f;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,g),this.setTextColor(P)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),r=!1}})(oi.API);var Kq={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Jq=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],E3=Zq(Jq),Qq=[100,200,300,400,500,600,700,800,900],Wue=Zq(Qq);function Z5(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(o){return Kq[o=o||"normal"]?o:"normal"})(e.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(e.weight),i=(function(o){return typeof E3[o=o||"normal"]=="number"?o:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function oN(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var Xue={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lN(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function uN(e){return e.trimLeft()}function Yue(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Zue(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var g_,cN,dN,kg,y_,fN,hN,pN,K5=["times"];function mN(e,t,r,n){var i=4,o=yN;switch(n){case oi.API.image_compression.FAST:i=1,o=gN;break;case oi.API.image_compression.MEDIUM:i=6,o=vN;break;case oi.API.image_compression.SLOW:i=9,o=bN}e=(function(a,f,p,g){for(var b,S=a.length/f,_=new Uint8Array(a.length+S),P=[Kue,gN,yN,vN,bN],k=0;k<S;k+=1){var M=k*f,D=a.subarray(M,M+f);if(g)_.set(g(D,p,b),M+k);else{for(var F=P.length,B=[],N=0;N<F;N+=1)B[N]=P[N](D,p,b);var $=Que(B.concat());_.set(B[$],M+k)}b=D}return _})(e,t,r,o);var u=v3(e,{level:i});return oi.API.__addimage__.arrayBufferToBinaryString(u)}function Kue(e){var t=Array.apply([],e);return t.unshift(0),t}function gN(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var o=e[i-t]||0;n[i+1]=e[i]-o+256&255}return n}function yN(e,t,r){var n=e.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var u=r&&r[o]||0;i[o+1]=e[o]-u+256&255}return i}function vN(e,t,r){var n=e.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var u=e[o-t]||0,a=r&&r[o]||0;i[o+1]=e[o]+256-(u+a>>>1)&255}return i}function bN(e,t,r){var n=e.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var u=Jue(e[o-t]||0,r&&r[o]||0,r&&r[o-t]||0);i[o+1]=e[o]-u+256&255}return i}function Jue(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),o=Math.abs(e+t-r-r);return n<=i&&n<=o?e:i<=o?t:r}function Que(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function J5(e,t,r){var n=t*r,i=Math.floor(n/8),o=16-(n-8*i+r),u=(1<<r)-1;return eV(e,i)>>o&u}function _N(e,t,r,n){var i=r*n,o=Math.floor(i/8),u=16-(i-8*o+n),a=(1<<n)-1,f=(t&a)<<u;(function(p,g,b){if(g+1<p.byteLength)p.setUint16(g,b,!1);else{var S=b>>8&255;p.setUint8(g,S)}})(e,o,eV(e,o)&~(a<<u)&65535|f)}function eV(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function ece(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,u=1<<1+(7&i);e[t++],e[t++];var a=null,f=null;o&&(a=t,f=u,t+=3*u);var p=!0,g=[],b=0,S=null,_=0,P=null;for(this.width=r,this.height=n;p&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];b=e[t++]|e[t++]<<8,S=e[t++],1&k||(S=null),_=k>>2&7,t++;break;case 254:for(;;){if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var M=e[t++]|e[t++]<<8,D=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,B=e[t++]|e[t++]<<8,N=e[t++],$=N>>6&1,V=1<<1+(7&N),U=a,X=f,Z=!1;N>>7&&(Z=!0,U=t,X=V,t+=3*V);var oe=t;for(t++;;){var re;if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}g.push({x:M,y:D,width:F,height:B,has_local_palette:Z,palette_offset:U,palette_size:X,data_offset:oe,data_length:t-oe,transparent_index:S,interlaced:!!$,delay:b,disposal:_});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return P},this.frameInfo=function(H){if(H<0||H>=g.length)throw new Error("Frame index out of range.");return g[H]},this.decodeAndBlitFrameBGRA=function(H,ae){var se=this.frameInfo(H),de=se.width*se.height,fe=new Uint8Array(de);xN(e,se.data_offset,fe,de);var Le=se.palette_offset,ye=se.transparent_index;ye===null&&(ye=256);var xe=se.width,Se=r-xe,Re=xe,he=4*(se.y*r+se.x),Ee=4*((se.y+se.height)*r+se.x),we=he,Ne=4*Se;se.interlaced===!0&&(Ne+=4*r*7);for(var Fe=8,Xe=0,Be=fe.length;Xe<Be;++Xe){var ot=fe[Xe];if(Re===0&&(Re=xe,(we+=Ne)>=Ee&&(Ne=4*Se+4*r*(Fe-1),we=he+(xe+Se)*(Fe<<1),Fe>>=1)),ot===ye)we+=4;else{var Ke=e[Le+3*ot],it=e[Le+3*ot+1],ke=e[Le+3*ot+2];ae[we++]=ke,ae[we++]=it,ae[we++]=Ke,ae[we++]=255}--Re}},this.decodeAndBlitFrameRGBA=function(H,ae){var se=this.frameInfo(H),de=se.width*se.height,fe=new Uint8Array(de);xN(e,se.data_offset,fe,de);var Le=se.palette_offset,ye=se.transparent_index;ye===null&&(ye=256);var xe=se.width,Se=r-xe,Re=xe,he=4*(se.y*r+se.x),Ee=4*((se.y+se.height)*r+se.x),we=he,Ne=4*Se;se.interlaced===!0&&(Ne+=4*r*7);for(var Fe=8,Xe=0,Be=fe.length;Xe<Be;++Xe){var ot=fe[Xe];if(Re===0&&(Re=xe,(we+=Ne)>=Ee&&(Ne=4*Se+4*r*(Fe-1),we=he+(xe+Se)*(Fe<<1),Fe>>=1)),ot===ye)we+=4;else{var Ke=e[Le+3*ot],it=e[Le+3*ot+1],ke=e[Le+3*ot+2];ae[we++]=Ke,ae[we++]=it,ae[we++]=ke,ae[we++]=255}--Re}}}function xN(e,t,r,n){for(var i=e[t++],o=1<<i,u=o+1,a=u+1,f=i+1,p=(1<<f)-1,g=0,b=0,S=0,_=e[t++],P=new Int32Array(4096),k=null;;){for(;g<16&&_!==0;)b|=e[t++]<<g,g+=8,_===1?_=e[t++]:--_;if(g<f)break;var M=b&p;if(b>>=f,g-=f,M!==o){if(M===u)break;for(var D=M<a?M:k,F=0,B=D;B>o;)B=P[B]>>8,++F;var N=B;if(S+F+(D!==M?1:0)>n)return void po.log("Warning, gif stream longer than expected.");r[S++]=N;var $=S+=F;for(D!==M&&(r[S++]=N),B=D;F--;)B=P[B],r[--$]=255&B,B>>=8;k!==null&&a<4096&&(P[a++]=k<<8|N,a>=p+1&&f<12&&(++f,p=p<<1|1)),k=M}else a=u+1,p=(1<<(f=i+1))-1,k=null}return S!==n&&po.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Q5(e){var t,r,n,i,o,u=Math.floor,a=new Array(64),f=new Array(64),p=new Array(64),g=new Array(64),b=new Array(65535),S=new Array(65535),_=new Array(64),P=new Array(64),k=[],M=0,D=7,F=new Array(64),B=new Array(64),N=new Array(64),$=new Array(256),V=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],X=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],re=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function fe(he,Ee){for(var we=0,Ne=0,Fe=new Array,Xe=1;Xe<=16;Xe++){for(var Be=1;Be<=he[Xe];Be++)Fe[Ee[Ne]]=[],Fe[Ee[Ne]][0]=we,Fe[Ee[Ne]][1]=Xe,Ne++,we++;we*=2}return Fe}function Le(he){for(var Ee=he[0],we=he[1]-1;we>=0;)Ee&1<<we&&(M|=1<<D),we--,--D<0&&(M==255?(ye(255),ye(0)):ye(M),D=7,M=0)}function ye(he){k.push(he)}function xe(he){ye(he>>8&255),ye(255&he)}function Se(he,Ee,we,Ne,Fe){for(var Xe,Be=Fe[0],ot=Fe[240],Ke=(function(ht,sr){var cr,ir,br,yr,Kt,at,Ae,_e,je,Ge,He=0;for(je=0;je<8;++je){cr=ht[He],ir=ht[He+1],br=ht[He+2],yr=ht[He+3],Kt=ht[He+4],at=ht[He+5],Ae=ht[He+6];var Dt=cr+(_e=ht[He+7]),St=cr-_e,yt=ir+Ae,ct=ir-Ae,Jt=br+at,Vt=br-at,xr=yr+Kt,_r=yr-Kt,Nr=Dt+xr,tn=Dt-xr,Lr=yt+Jt,kt=yt-Jt;ht[He]=Nr+Lr,ht[He+4]=Nr-Lr;var Hr=.707106781*(kt+tn);ht[He+2]=tn+Hr,ht[He+6]=tn-Hr;var kn=.382683433*((Nr=_r+Vt)-(kt=ct+St)),Ur=.5411961*Nr+kn,rr=1.306562965*kt+kn,Jn=.707106781*(Lr=Vt+ct),en=St+Jn,Vn=St-Jn;ht[He+5]=Vn+Ur,ht[He+3]=Vn-Ur,ht[He+1]=en+rr,ht[He+7]=en-rr,He+=8}for(He=0,je=0;je<8;++je){cr=ht[He],ir=ht[He+8],br=ht[He+16],yr=ht[He+24],Kt=ht[He+32],at=ht[He+40],Ae=ht[He+48];var Me=cr+(_e=ht[He+56]),Ue=cr-_e,Ct=ir+Ae,Gt=ir-Ae,zt=br+at,qr=br-at,En=yr+Kt,Pi=yr-Kt,gi=Me+En,kr=Me-En,Sn=Ct+zt,Pn=Ct-zt;ht[He]=gi+Sn,ht[He+32]=gi-Sn;var Un=.707106781*(Pn+kr);ht[He+16]=kr+Un,ht[He+48]=kr-Un;var Ki=.382683433*((gi=Pi+qr)-(Pn=Gt+Ue)),ea=.5411961*gi+Ki,An=1.306562965*Pn+Ki,Ca=.707106781*(Sn=qr+Gt),Ni=Ue+Ca,Ho=Ue-Ca;ht[He+40]=Ho+ea,ht[He+24]=Ho-ea,ht[He+8]=Ni+An,ht[He+56]=Ni-An,He++}for(je=0;je<64;++je)Ge=ht[je]*sr[je],_[je]=Ge>0?Ge+.5|0:Ge-.5|0;return _})(he,Ee),it=0;it<64;++it)P[U[it]]=Ke[it];var ke=P[0]-we;we=P[0],ke==0?Le(Ne[0]):(Le(Ne[S[Xe=32767+ke]]),Le(b[Xe]));for(var Nt=63;Nt>0&&P[Nt]==0;)Nt--;if(Nt==0)return Le(Be),we;for(var st,$e=1;$e<=Nt;){for(var Zt=$e;P[$e]==0&&$e<=Nt;)++$e;var $t=$e-Zt;if($t>=16){st=$t>>4;for(var Wt=1;Wt<=st;++Wt)Le(ot);$t&=15}Xe=32767+P[$e],Le(Fe[($t<<4)+S[Xe]]),Le(b[Xe]),$e++}return Nt!=63&&Le(Be),we}function Re(he){he=Math.min(Math.max(he,1),100),o!=he&&((function(Ee){for(var we=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ne=0;Ne<64;Ne++){var Fe=u((we[Ne]*Ee+50)/100);Fe=Math.min(Math.max(Fe,1),255),a[U[Ne]]=Fe}for(var Xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Be=0;Be<64;Be++){var ot=u((Xe[Be]*Ee+50)/100);ot=Math.min(Math.max(ot,1),255),f[U[Be]]=ot}for(var Ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],it=0,ke=0;ke<8;ke++)for(var Nt=0;Nt<8;Nt++)p[it]=1/(a[U[it]]*Ke[ke]*Ke[Nt]*8),g[it]=1/(f[U[it]]*Ke[ke]*Ke[Nt]*8),it++})(he<50?Math.floor(5e3/he):Math.floor(200-2*he)),o=he)}this.encode=function(he,Ee){Ee&&Re(Ee),k=new Array,M=0,D=7,xe(65496),xe(65504),xe(16),ye(74),ye(70),ye(73),ye(70),ye(0),ye(1),ye(1),ye(0),xe(1),xe(1),ye(0),ye(0),(function(){xe(65499),xe(132),ye(0);for(var ir=0;ir<64;ir++)ye(a[ir]);ye(1);for(var br=0;br<64;br++)ye(f[br])})(),(function(ir,br){xe(65472),xe(17),ye(8),xe(br),xe(ir),ye(3),ye(1),ye(17),ye(0),ye(2),ye(17),ye(1),ye(3),ye(17),ye(1)})(he.width,he.height),(function(){xe(65476),xe(418),ye(0);for(var ir=0;ir<16;ir++)ye(X[ir+1]);for(var br=0;br<=11;br++)ye(Z[br]);ye(16);for(var yr=0;yr<16;yr++)ye(oe[yr+1]);for(var Kt=0;Kt<=161;Kt++)ye(re[Kt]);ye(1);for(var at=0;at<16;at++)ye(H[at+1]);for(var Ae=0;Ae<=11;Ae++)ye(ae[Ae]);ye(17);for(var _e=0;_e<16;_e++)ye(se[_e+1]);for(var je=0;je<=161;je++)ye(de[je])})(),xe(65498),xe(12),ye(3),ye(1),ye(0),ye(2),ye(17),ye(3),ye(17),ye(0),ye(63),ye(0);var we=0,Ne=0,Fe=0;M=0,D=7,this.encode.displayName="_encode_";for(var Xe,Be,ot,Ke,it,ke,Nt,st,$e,Zt=he.data,$t=he.width,Wt=he.height,ht=4*$t,sr=0;sr<Wt;){for(Xe=0;Xe<ht;){for(it=ht*sr+Xe,Nt=-1,st=0,$e=0;$e<64;$e++)ke=it+(st=$e>>3)*ht+(Nt=4*(7&$e)),sr+st>=Wt&&(ke-=ht*(sr+1+st-Wt)),Xe+Nt>=ht&&(ke-=Xe+Nt-ht+4),Be=Zt[ke++],ot=Zt[ke++],Ke=Zt[ke++],F[$e]=(V[Be]+V[ot+256|0]+V[Ke+512|0]>>16)-128,B[$e]=(V[Be+768|0]+V[ot+1024|0]+V[Ke+1280|0]>>16)-128,N[$e]=(V[Be+1280|0]+V[ot+1536|0]+V[Ke+1792|0]>>16)-128;we=Se(F,p,we,t,n),Ne=Se(B,g,Ne,r,i),Fe=Se(N,g,Fe,r,i),Xe+=32}sr+=8}if(D>=0){var cr=[];cr[1]=D+1,cr[0]=(1<<D+1)-1,Le(cr)}return xe(65497),new Uint8Array(k)},e=e||50,(function(){for(var he=String.fromCharCode,Ee=0;Ee<256;Ee++)$[Ee]=he(Ee)})(),t=fe(X,Z),r=fe(H,ae),n=fe(oe,re),i=fe(se,de),(function(){for(var he=1,Ee=2,we=1;we<=15;we++){for(var Ne=he;Ne<Ee;Ne++)S[32767+Ne]=we,b[32767+Ne]=[],b[32767+Ne][1]=we,b[32767+Ne][0]=Ne;for(var Fe=-(Ee-1);Fe<=-he;Fe++)S[32767+Fe]=we,b[32767+Fe]=[],b[32767+Fe][1]=we,b[32767+Fe][0]=Ee-1+Fe;he<<=1,Ee<<=1}})(),(function(){for(var he=0;he<256;he++)V[he]=19595*he,V[he+256|0]=38470*he,V[he+512|0]=7471*he+32768,V[he+768|0]=-11059*he,V[he+1024|0]=-21709*he,V[he+1280|0]=32768*he+8421375,V[he+1536|0]=-27439*he,V[he+1792|0]=-5329*he})(),Re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _d(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function wN(e){function t(Z){if(!Z)throw Error("assert :P")}function r(Z,oe,re){for(var H=0;4>H;H++)if(Z[oe+H]!=re.charCodeAt(H))return!0;return!1}function n(Z,oe,re,H,ae){for(var se=0;se<ae;se++)Z[oe+se]=re[H+se]}function i(Z,oe,re,H){for(var ae=0;ae<H;ae++)Z[oe+ae]=re}function o(Z){return new Int32Array(Z)}function u(Z,oe){for(var re=[],H=0;H<Z;H++)re.push(new oe);return re}function a(Z,oe){var re=[];return(function H(ae,se,de){for(var fe=de[se],Le=0;Le<fe&&(ae.push(de.length>se+1?[]:new oe),!(de.length<se+1));Le++)H(ae[Le],se+1,de)})(re,0,Z),re}var f=function(){var Z=this;function oe(G,J){for(var ge=1<<J-1>>>0;G&ge;)ge>>>=1;return ge?(G&ge-1)+ge:G}function re(G,J,ge,Pe,Ye){t(!(Pe%ge));do G[J+(Pe-=ge)]=Ye;while(0<Pe)}function H(G,J,ge,Pe,Ye){if(t(2328>=Ye),512>=Ye)var Qe=o(512);else if((Qe=o(Ye))==null)return 0;return(function(nt,lt,vt,Tt,Ht,pr){var wt,Pt,or=lt,Ar=1<<vt,dr=o(16),Mr=o(16);for(t(Ht!=0),t(Tt!=null),t(nt!=null),t(0<vt),Pt=0;Pt<Ht;++Pt){if(15<Tt[Pt])return 0;++dr[Tt[Pt]]}if(dr[0]==Ht)return 0;for(Mr[1]=0,wt=1;15>wt;++wt){if(dr[wt]>1<<wt)return 0;Mr[wt+1]=Mr[wt]+dr[wt]}for(Pt=0;Pt<Ht;++Pt)wt=Tt[Pt],0<Tt[Pt]&&(pr[Mr[wt]++]=Pt);if(Mr[15]==1)return(Tt=new ae).g=0,Tt.value=pr[0],re(nt,or,1,Ar,Tt),Ar;var Rr,Jr=-1,Gr=Ar-1,$n=0,Ln=1,yi=1,qn=1<<vt;for(Pt=0,wt=1,Ht=2;wt<=vt;++wt,Ht<<=1){if(Ln+=yi<<=1,0>(yi-=dr[wt]))return 0;for(;0<dr[wt];--dr[wt])(Tt=new ae).g=wt,Tt.value=pr[Pt++],re(nt,or+$n,Ht,qn,Tt),$n=oe($n,wt)}for(wt=vt+1,Ht=2;15>=wt;++wt,Ht<<=1){if(Ln+=yi<<=1,0>(yi-=dr[wt]))return 0;for(;0<dr[wt];--dr[wt]){if(Tt=new ae,($n&Gr)!=Jr){for(or+=qn,Rr=1<<(Jr=wt)-vt;15>Jr&&!(0>=(Rr-=dr[Jr]));)++Jr,Rr<<=1;Ar+=qn=1<<(Rr=Jr-vt),nt[lt+(Jr=$n&Gr)].g=Rr+vt,nt[lt+Jr].value=or-lt-Jr}Tt.g=wt-vt,Tt.value=pr[Pt++],re(nt,or+($n>>vt),Ht,qn,Tt),$n=oe($n,wt)}}return Ln!=2*Mr[15]-1?0:Ar})(G,J,ge,Pe,Ye,Qe)}function ae(){this.value=this.g=0}function se(){this.value=this.g=0}function de(){this.G=u(5,ae),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Aa,se)}function fe(G,J,ge,Pe){t(G!=null),t(J!=null),t(2147483648>Pe),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=J,G.pa=ge,G.Jd=J,G.Yc=ge+Pe,G.Zc=4<=Pe?ge+Pe-4+1:ge,Be(G)}function Le(G,J){for(var ge=0;0<J--;)ge|=Ke(G,128)<<J;return ge}function ye(G,J){var ge=Le(G,J);return ot(G)?-ge:ge}function xe(G,J,ge,Pe){var Ye,Qe=0;for(t(G!=null),t(J!=null),t(4294967288>Pe),G.Sb=Pe,G.Ra=0,G.u=0,G.h=0,4<Pe&&(Pe=4),Ye=0;Ye<Pe;++Ye)Qe+=J[ge+Ye]<<8*Ye;G.Ra=Qe,G.bb=Pe,G.oa=J,G.pa=ge}function Se(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<Zo-8>>>0,++G.bb,G.u-=8;Ne(G)&&(G.h=1,G.u=0)}function Re(G,J){if(t(0<=J),!G.h&&J<=Ps){var ge=we(G)&Ol[J];return G.u+=J,Se(G),ge}return G.h=1,G.u=0}function he(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function we(G){return G.Ra>>>(G.u&Zo-1)>>>0}function Ne(G){return t(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>Zo}function Fe(G,J){G.u=J,G.h=Ne(G)}function Xe(G){G.u>=ka&&(t(G.u>=ka),Se(G))}function Be(G){t(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(t(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function ot(G){return Le(G,1)}function Ke(G,J){var ge=G.Ca;0>G.b&&Be(G);var Pe=G.b,Ye=ge*J>>>8,Qe=(G.I>>>Pe>Ye)+0;for(Qe?(ge-=Ye,G.I-=Ye+1<<Pe>>>0):ge=Ye+1,Pe=ge,Ye=0;256<=Pe;)Ye+=8,Pe>>=8;return Pe=7^Ye+hl[Pe],G.b-=Pe,G.Ca=(ge<<Pe)-1,Qe}function it(G,J,ge){G[J+0]=ge>>24&255,G[J+1]=ge>>16&255,G[J+2]=ge>>8&255,G[J+3]=255&ge}function ke(G,J){return G[J+0]|G[J+1]<<8}function Nt(G,J){return ke(G,J)|G[J+2]<<16}function st(G,J){return ke(G,J)|ke(G,J+2)<<16}function $e(G,J){var ge=1<<J;return t(G!=null),t(0<J),G.X=o(ge),G.X==null?0:(G.Mb=32-J,G.Xa=J,1)}function Zt(G,J){t(G!=null),t(J!=null),t(G.Xa==J.Xa),n(J.X,0,G.X,0,1<<J.Xa)}function $t(){this.X=[],this.Xa=this.Mb=0}function Wt(G,J,ge,Pe){t(ge!=null),t(Pe!=null);var Ye=ge[0],Qe=Pe[0];return Ye==0&&(Ye=(G*Qe+J/2)/J),Qe==0&&(Qe=(J*Ye+G/2)/G),0>=Ye||0>=Qe?0:(ge[0]=Ye,Pe[0]=Qe,1)}function ht(G,J){return G+(1<<J)-1>>>J}function sr(G,J){return((4278255360&G)+(4278255360&J)>>>0&4278255360)+((16711935&G)+(16711935&J)>>>0&16711935)>>>0}function cr(G,J){Z[J]=function(ge,Pe,Ye,Qe,nt,lt,vt){var Tt;for(Tt=0;Tt<nt;++Tt){var Ht=Z[G](lt[vt+Tt-1],Ye,Qe+Tt);lt[vt+Tt]=sr(ge[Pe+Tt],Ht)}}}function ir(){this.ud=this.hd=this.jd=0}function br(G,J){return((4278124286&(G^J))>>>1)+(G&J)>>>0}function yr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function Kt(G,J){return yr(G+(G-J+.5>>1))}function at(G,J,ge){return Math.abs(J-ge)-Math.abs(G-ge)}function Ae(G,J,ge,Pe,Ye,Qe,nt){for(Pe=Qe[nt-1],ge=0;ge<Ye;++ge)Qe[nt+ge]=Pe=sr(G[J+ge],Pe)}function _e(G,J,ge,Pe,Ye){var Qe;for(Qe=0;Qe<ge;++Qe){var nt=G[J+Qe],lt=nt>>8&255,vt=16711935&(vt=(vt=16711935&nt)+((lt<<16)+lt));Pe[Ye+Qe]=(4278255360&nt)+vt>>>0}}function je(G,J){J.jd=255&G,J.hd=G>>8&255,J.ud=G>>16&255}function Ge(G,J,ge,Pe,Ye,Qe){var nt;for(nt=0;nt<Pe;++nt){var lt=J[ge+nt],vt=lt>>>8,Tt=lt,Ht=255&(Ht=(Ht=lt>>>16)+((G.jd<<24>>24)*(vt<<24>>24)>>>5));Tt=255&(Tt=(Tt+=(G.hd<<24>>24)*(vt<<24>>24)>>>5)+((G.ud<<24>>24)*(Ht<<24>>24)>>>5)),Ye[Qe+nt]=(4278255360&lt)+(Ht<<16)+Tt}}function He(G,J,ge,Pe,Ye){Z[J]=function(Qe,nt,lt,vt,Tt,Ht,pr,wt,Pt){for(vt=pr;vt<wt;++vt)for(pr=0;pr<Pt;++pr)Tt[Ht++]=Ye(lt[Pe(Qe[nt++])])},Z[G]=function(Qe,nt,lt,vt,Tt,Ht,pr){var wt=8>>Qe.b,Pt=Qe.Ea,or=Qe.K[0],Ar=Qe.w;if(8>wt)for(Qe=(1<<Qe.b)-1,Ar=(1<<wt)-1;nt<lt;++nt){var dr,Mr=0;for(dr=0;dr<Pt;++dr)dr&Qe||(Mr=Pe(vt[Tt++])),Ht[pr++]=Ye(or[Mr&Ar]),Mr>>=wt}else Z["VP8LMapColor"+ge](vt,Tt,or,Ar,Ht,pr,nt,lt,Pt)}}function Dt(G,J,ge,Pe,Ye){for(ge=J+ge;J<ge;){var Qe=G[J++];Pe[Ye++]=Qe>>16&255,Pe[Ye++]=Qe>>8&255,Pe[Ye++]=255&Qe}}function St(G,J,ge,Pe,Ye){for(ge=J+ge;J<ge;){var Qe=G[J++];Pe[Ye++]=Qe>>16&255,Pe[Ye++]=Qe>>8&255,Pe[Ye++]=255&Qe,Pe[Ye++]=Qe>>24&255}}function yt(G,J,ge,Pe,Ye){for(ge=J+ge;J<ge;){var Qe=(nt=G[J++])>>16&240|nt>>12&15,nt=240&nt|nt>>28&15;Pe[Ye++]=Qe,Pe[Ye++]=nt}}function ct(G,J,ge,Pe,Ye){for(ge=J+ge;J<ge;){var Qe=(nt=G[J++])>>16&248|nt>>13&7,nt=nt>>5&224|nt>>3&31;Pe[Ye++]=Qe,Pe[Ye++]=nt}}function Jt(G,J,ge,Pe,Ye){for(ge=J+ge;J<ge;){var Qe=G[J++];Pe[Ye++]=255&Qe,Pe[Ye++]=Qe>>8&255,Pe[Ye++]=Qe>>16&255}}function Vt(G,J,ge,Pe,Ye,Qe){if(Qe==0)for(ge=J+ge;J<ge;)it(Pe,((Qe=G[J++])[0]>>24|Qe[1]>>8&65280|Qe[2]<<8&16711680|Qe[3]<<24)>>>0),Ye+=32;else n(Pe,Ye,G,J,ge)}function xr(G,J){Z[J][0]=Z[G+"0"],Z[J][1]=Z[G+"1"],Z[J][2]=Z[G+"2"],Z[J][3]=Z[G+"3"],Z[J][4]=Z[G+"4"],Z[J][5]=Z[G+"5"],Z[J][6]=Z[G+"6"],Z[J][7]=Z[G+"7"],Z[J][8]=Z[G+"8"],Z[J][9]=Z[G+"9"],Z[J][10]=Z[G+"10"],Z[J][11]=Z[G+"11"],Z[J][12]=Z[G+"12"],Z[J][13]=Z[G+"13"],Z[J][14]=Z[G+"0"],Z[J][15]=Z[G+"0"]}function _r(G){return G==Tp||G==Af||G==oc||G==ld}function Nr(){this.eb=[],this.size=this.A=this.fb=0}function tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Lr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Nr,this.f.kb=new tn,this.sd=null}function kt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Hr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kn(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function Ur(G,J){var ge=G.T,Pe=J.ba.f.RGBA,Ye=Pe.eb,Qe=Pe.fb+G.ka*Pe.A,nt=Hs[J.ba.S],lt=G.y,vt=G.O,Tt=G.f,Ht=G.N,pr=G.ea,wt=G.W,Pt=J.cc,or=J.dc,Ar=J.Mc,dr=J.Nc,Mr=G.ka,Rr=G.ka+G.T,Jr=G.U,Gr=Jr+1>>1;for(Mr==0?nt(lt,vt,null,null,Tt,Ht,pr,wt,Tt,Ht,pr,wt,Ye,Qe,null,null,Jr):(nt(J.ec,J.fc,lt,vt,Pt,or,Ar,dr,Tt,Ht,pr,wt,Ye,Qe-Pe.A,Ye,Qe,Jr),++ge);Mr+2<Rr;Mr+=2)Pt=Tt,or=Ht,Ar=pr,dr=wt,Ht+=G.Rc,wt+=G.Rc,Qe+=2*Pe.A,nt(lt,(vt+=2*G.fa)-G.fa,lt,vt,Pt,or,Ar,dr,Tt,Ht,pr,wt,Ye,Qe-Pe.A,Ye,Qe,Jr);return vt+=G.fa,G.j+Rr<G.o?(n(J.ec,J.fc,lt,vt,Jr),n(J.cc,J.dc,Tt,Ht,Gr),n(J.Mc,J.Nc,pr,wt,Gr),ge--):1&Rr||nt(lt,vt,null,null,Tt,Ht,pr,wt,Tt,Ht,pr,wt,Ye,Qe+Pe.A,null,null,Jr),ge}function rr(G,J,ge){var Pe=G.F,Ye=[G.J];if(Pe!=null){var Qe=G.U,nt=J.ba.S,lt=nt==Th||nt==oc;J=J.ba.f.RGBA;var vt=[0],Tt=G.ka;vt[0]=G.T,G.Kb&&(Tt==0?--vt[0]:(--Tt,Ye[0]-=G.width),G.j+G.ka+G.T==G.o&&(vt[0]=G.o-G.j-Tt));var Ht=J.eb;Tt=J.fb+Tt*J.A,G=va(Pe,Ye[0],G.width,Qe,vt,Ht,Tt+(lt?0:3),J.A),t(ge==vt),G&&_r(nt)&&Ji(Ht,Tt,lt,Qe,vt,J.A)}return 0}function Jn(G){var J=G.ma,ge=J.ba.S,Pe=11>ge,Ye=ge==sd||ge==Bl||ge==Th||ge==Cp||ge==12||_r(ge);if(J.memory=null,J.Ib=null,J.Jb=null,J.Nd=null,!yo(J.Oa,G,Ye?11:12))return 0;if(Ye&&_r(ge)&&Ts(),G.da)alert("todo:use_scaling");else{if(Pe){if(J.Ib=kn,G.Kb){if(ge=G.U+1>>1,J.memory=o(G.U+2*ge),J.memory==null)return 0;J.ec=J.memory,J.fc=0,J.cc=J.ec,J.dc=J.fc+G.U,J.Mc=J.cc,J.Nc=J.dc+ge,J.Ib=Ur,Ts()}}else alert("todo:EmitYUV");Ye&&(J.Jb=rr,Pe&&Es())}if(Pe&&!Rh){for(G=0;256>G;++G)Nf[G]=89858*(G-128)+Of>>Df,Rp[G]=-22014*(G-128)+Of,Lp[G]=-45773*(G-128),Qm[G]=113618*(G-128)+Of>>Df;for(G=Vd;G<Vu;++G)J=76283*(G-16)+Of>>Df,eg[G-Vd]=Pa(J,255),Dp[G-Vd]=Pa(J+8>>4,15);Rh=1}return 1}function en(G){var J=G.ma,ge=G.U,Pe=G.T;return t(!(1&G.ka)),0>=ge||0>=Pe?0:(ge=J.Ib(G,J),J.Jb!=null&&J.Jb(G,J,ge),J.Dc+=ge,1)}function Vn(G){G.ma.memory=null}function Me(G,J,ge,Pe){return Re(G,8)!=47?0:(J[0]=Re(G,14)+1,ge[0]=Re(G,14)+1,Pe[0]=Re(G,1),Re(G,3)!=0?0:!G.h)}function Ue(G,J){if(4>G)return G+1;var ge=G-2>>1;return(2+(1&G)<<ge)+Re(J,ge)+1}function Ct(G,J){return 120<J?J-120:1<=(ge=((ge=Mc[J-1])>>4)*G+(8-(15&ge)))?ge:1;var ge}function Gt(G,J,ge){var Pe=we(ge),Ye=G[J+=255&Pe].g-8;return 0<Ye&&(Fe(ge,ge.u+8),Pe=we(ge),J+=G[J].value,J+=Pe&(1<<Ye)-1),Fe(ge,ge.u+G[J].g),G[J].value}function zt(G,J,ge){return ge.g+=G.g,ge.value+=G.value<<J>>>0,t(8>=ge.g),G.g}function qr(G,J,ge){var Pe=G.xc;return t((J=Pe==0?0:G.vc[G.md*(ge>>Pe)+(J>>Pe)])<G.Wb),G.Ya[J]}function En(G,J,ge,Pe){var Ye=G.ab,Qe=G.c*J,nt=G.C;J=nt+J;var lt=ge,vt=Pe;for(Pe=G.Ta,ge=G.Ua;0<Ye--;){var Tt=G.gc[Ye],Ht=nt,pr=J,wt=lt,Pt=vt,or=(vt=Pe,lt=ge,Tt.Ea);switch(t(Ht<pr),t(pr<=Tt.nc),Tt.hc){case 2:pl(wt,Pt,(pr-Ht)*or,vt,lt);break;case 0:var Ar=Ht,dr=pr,Mr=vt,Rr=lt,Jr=(qn=Tt).Ea;Ar==0&&($s(wt,Pt,null,null,1,Mr,Rr),Ae(wt,Pt+1,0,0,Jr-1,Mr,Rr+1),Pt+=Jr,Rr+=Jr,++Ar);for(var Gr=1<<qn.b,$n=Gr-1,Ln=ht(Jr,qn.b),yi=qn.K,qn=qn.w+(Ar>>qn.b)*Ln;Ar<dr;){var Bi=yi,vo=qn,Ci=1;for(Gs(wt,Pt,Mr,Rr-Jr,1,Mr,Rr);Ci<Jr;){var zn=(Ci&~$n)+Gr;zn>Jr&&(zn=Jr),(0,er[Bi[vo++]>>8&15])(wt,Pt+ +Ci,Mr,Rr+Ci-Jr,zn-Ci,Mr,Rr+Ci),Ci=zn}Pt+=Jr,Rr+=Jr,++Ar&$n||(qn+=Ln)}pr!=Tt.nc&&n(vt,lt-or,vt,lt+(pr-Ht-1)*or,or);break;case 1:for(or=wt,dr=Pt,Jr=(wt=Tt.Ea)-(Rr=wt&~(Mr=(Pt=1<<Tt.b)-1)),Ar=ht(wt,Tt.b),Gr=Tt.K,Tt=Tt.w+(Ht>>Tt.b)*Ar;Ht<pr;){for($n=Gr,Ln=Tt,yi=new ir,qn=dr+Rr,Bi=dr+wt;dr<qn;)je($n[Ln++],yi),fr(yi,or,dr,Pt,vt,lt),dr+=Pt,lt+=Pt;dr<Bi&&(je($n[Ln++],yi),fr(yi,or,dr,Jr,vt,lt),dr+=Jr,lt+=Jr),++Ht&Mr||(Tt+=Ar)}break;case 3:if(wt==vt&&Pt==lt&&0<Tt.b){for(dr=vt,wt=or=lt+(pr-Ht)*or-(Rr=(pr-Ht)*ht(Tt.Ea,Tt.b)),Pt=vt,Mr=lt,Ar=[],Rr=(Jr=Rr)-1;0<=Rr;--Rr)Ar[Rr]=Pt[Mr+Rr];for(Rr=Jr-1;0<=Rr;--Rr)dr[wt+Rr]=Ar[Rr];ml(Tt,Ht,pr,vt,or,vt,lt)}else ml(Tt,Ht,pr,wt,Pt,vt,lt)}lt=Pe,vt=ge}vt!=ge&&n(Pe,ge,lt,vt,Qe)}function Pi(G,J){var ge=G.V,Pe=G.Ba+G.c*G.C,Ye=J-G.C;if(t(J<=G.l.o),t(16>=Ye),0<Ye){var Qe=G.l,nt=G.Ta,lt=G.Ua,vt=Qe.width;if(En(G,Ye,ge,Pe),Ye=lt=[lt],t((ge=G.C)<(Pe=J)),t(Qe.v<Qe.va),Pe>Qe.o&&(Pe=Qe.o),ge<Qe.j){var Tt=Qe.j-ge;ge=Qe.j,Ye[0]+=Tt*vt}if(ge>=Pe?ge=0:(Ye[0]+=4*Qe.v,Qe.ka=ge-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=Pe-ge,ge=1),ge){if(lt=lt[0],11>(ge=G.ca).S){var Ht=ge.f.RGBA,pr=(Pe=ge.S,Ye=Qe.U,Qe=Qe.T,Tt=Ht.eb,Ht.A),wt=Qe;for(Ht=Ht.fb+G.Ma*Ht.A;0<wt--;){var Pt=nt,or=lt,Ar=Ye,dr=Tt,Mr=Ht;switch(Pe){case ou:nn(Pt,or,Ar,dr,Mr);break;case sd:bn(Pt,or,Ar,dr,Mr);break;case Tp:bn(Pt,or,Ar,dr,Mr),Ji(dr,Mr,0,Ar,1,0);break;case kc:E(Pt,or,Ar,dr,Mr);break;case Bl:Vt(Pt,or,Ar,dr,Mr,1);break;case Af:Vt(Pt,or,Ar,dr,Mr,1),Ji(dr,Mr,0,Ar,1,0);break;case Th:Vt(Pt,or,Ar,dr,Mr,0);break;case oc:Vt(Pt,or,Ar,dr,Mr,0),Ji(dr,Mr,1,Ar,1,0);break;case Cp:ci(Pt,or,Ar,dr,Mr);break;case ld:ci(Pt,or,Ar,dr,Mr),Ha(dr,Mr,Ar,1,0);break;case Ep:_n(Pt,or,Ar,dr,Mr);break;default:t(0)}lt+=vt,Ht+=pr}G.Ma+=Qe}else alert("todo:EmitRescaledRowsYUVA");t(G.Ma<=ge.height)}}G.C=J,t(G.C<=G.i)}function gi(G){var J;if(0<G.ua)return 0;for(J=0;J<G.Wb;++J){var ge=G.Ya[J].G,Pe=G.Ya[J].H;if(0<ge[1][Pe[1]+0].g||0<ge[2][Pe[2]+0].g||0<ge[3][Pe[3]+0].g)return 0}return 1}function kr(G,J,ge,Pe,Ye,Qe){if(G.Z!=0){var nt=G.qd,lt=G.rd;for(t(Iu[G.Z]!=null);J<ge;++J)Iu[G.Z](nt,lt,Pe,Ye,Pe,Ye,Qe),nt=Pe,lt=Ye,Ye+=Qe;G.qd=nt,G.rd=lt}}function Sn(G,J){var ge=G.l.ma,Pe=ge.Z==0||ge.Z==1?G.l.j:G.C;if(Pe=G.C<Pe?Pe:G.C,t(J<=G.l.o),J>Pe){var Ye=G.l.width,Qe=ge.ca,nt=ge.tb+Ye*Pe,lt=G.V,vt=G.Ba+G.c*Pe,Tt=G.gc;t(G.ab==1),t(Tt[0].hc==3),gl(Tt[0],Pe,J,lt,vt,Qe,nt),kr(ge,Pe,J,Qe,nt,Ye)}G.C=G.Ma=J}function Pn(G,J,ge,Pe,Ye,Qe,nt){var lt=G.$/Pe,vt=G.$%Pe,Tt=G.m,Ht=G.s,pr=ge+G.$,wt=pr;Ye=ge+Pe*Ye;var Pt=ge+Pe*Qe,or=280+Ht.ua,Ar=G.Pb?lt:16777216,dr=0<Ht.ua?Ht.Wa:null,Mr=Ht.wc,Rr=pr<Pt?qr(Ht,vt,lt):null;t(G.C<Qe),t(Pt<=Ye);var Jr=!1;e:for(;;){for(;Jr||pr<Pt;){var Gr=0;if(lt>=Ar){var $n=pr-ge;t((Ar=G).Pb),Ar.wd=Ar.m,Ar.xd=$n,0<Ar.s.ua&&Zt(Ar.s.Wa,Ar.s.vb),Ar=lt+Pp}if(vt&Mr||(Rr=qr(Ht,vt,lt)),t(Rr!=null),Rr.Qb&&(J[pr]=Rr.qb,Jr=!0),!Jr)if(Xe(Tt),Rr.jc){Gr=Tt,$n=J;var Ln=pr,yi=Rr.pd[we(Gr)&Aa-1];t(Rr.jc),256>yi.g?(Fe(Gr,Gr.u+yi.g),$n[Ln]=yi.value,Gr=0):(Fe(Gr,Gr.u+yi.g-256),t(256<=yi.value),Gr=yi.value),Gr==0&&(Jr=!0)}else Gr=Gt(Rr.G[0],Rr.H[0],Tt);if(Tt.h)break;if(Jr||256>Gr){if(!Jr)if(Rr.nd)J[pr]=(Rr.qb|Gr<<8)>>>0;else{if(Xe(Tt),Jr=Gt(Rr.G[1],Rr.H[1],Tt),Xe(Tt),$n=Gt(Rr.G[2],Rr.H[2],Tt),Ln=Gt(Rr.G[3],Rr.H[3],Tt),Tt.h)break;J[pr]=(Ln<<24|Jr<<16|Gr<<8|$n)>>>0}if(Jr=!1,++pr,++vt>=Pe&&(vt=0,++lt,nt!=null&&lt<=Qe&&!(lt%16)&&nt(G,lt),dr!=null))for(;wt<pr;)Gr=J[wt++],dr.X[(506832829*Gr&4294967295)>>>dr.Mb]=Gr}else if(280>Gr){if(Gr=Ue(Gr-256,Tt),$n=Gt(Rr.G[4],Rr.H[4],Tt),Xe(Tt),$n=Ct(Pe,$n=Ue($n,Tt)),Tt.h)break;if(pr-ge<$n||Ye-pr<Gr)break e;for(Ln=0;Ln<Gr;++Ln)J[pr+Ln]=J[pr+Ln-$n];for(pr+=Gr,vt+=Gr;vt>=Pe;)vt-=Pe,++lt,nt!=null&&lt<=Qe&&!(lt%16)&&nt(G,lt);if(t(pr<=Ye),vt&Mr&&(Rr=qr(Ht,vt,lt)),dr!=null)for(;wt<pr;)Gr=J[wt++],dr.X[(506832829*Gr&4294967295)>>>dr.Mb]=Gr}else{if(!(Gr<or))break e;for(Jr=Gr-280,t(dr!=null);wt<pr;)Gr=J[wt++],dr.X[(506832829*Gr&4294967295)>>>dr.Mb]=Gr;Gr=pr,t(!(Jr>>>($n=dr).Xa)),J[Gr]=$n.X[Jr],Jr=!0}Jr||t(Tt.h==Ne(Tt))}if(G.Pb&&Tt.h&&pr<Ye)t(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&Zt(G.s.vb,G.s.Wa);else{if(Tt.h)break e;nt?.(G,lt>Qe?Qe:lt),G.a=0,G.$=pr-ge}return 1}return G.a=3,0}function Un(G){t(G!=null),G.vc=null,G.yc=null,G.Ya=null;var J=G.Wa;J!=null&&(J.X=null),G.vb=null,t(G!=null)}function Ki(){var G=new Mi;return G==null?null:(G.a=0,G.xb=bl,xr("Predictor","VP8LPredictors"),xr("Predictor","VP8LPredictors_C"),xr("PredictorAdd","VP8LPredictorsAdd"),xr("PredictorAdd","VP8LPredictorsAdd_C"),pl=_e,fr=Ge,nn=Dt,bn=St,ci=yt,_n=ct,E=Jt,Z.VP8LMapColor32b=Us,Z.VP8LMapColor8b=au,G)}function ea(G,J,ge,Pe,Ye){var Qe=1,nt=[G],lt=[J],vt=Pe.m,Tt=Pe.s,Ht=null,pr=0;e:for(;;){if(ge)for(;Qe&&Re(vt,1);){var wt=nt,Pt=lt,or=Pe,Ar=1,dr=or.m,Mr=or.gc[or.ab],Rr=Re(dr,2);if(or.Oc&1<<Rr)Qe=0;else{switch(or.Oc|=1<<Rr,Mr.hc=Rr,Mr.Ea=wt[0],Mr.nc=Pt[0],Mr.K=[null],++or.ab,t(4>=or.ab),Rr){case 0:case 1:Mr.b=Re(dr,3)+2,Ar=ea(ht(Mr.Ea,Mr.b),ht(Mr.nc,Mr.b),0,or,Mr.K),Mr.K=Mr.K[0];break;case 3:var Jr,Gr=Re(dr,8)+1,$n=16<Gr?0:4<Gr?1:2<Gr?2:3;if(wt[0]=ht(Mr.Ea,$n),Mr.b=$n,Jr=Ar=ea(Gr,1,0,or,Mr.K)){var Ln,yi=Gr,qn=Mr,Bi=1<<(8>>qn.b),vo=o(Bi);if(vo==null)Jr=0;else{var Ci=qn.K[0],zn=qn.w;for(vo[0]=qn.K[0][0],Ln=1;Ln<1*yi;++Ln)vo[Ln]=sr(Ci[zn+Ln],vo[Ln-1]);for(;Ln<4*Bi;++Ln)vo[Ln]=0;qn.K[0]=null,qn.K[0]=vo,Jr=1}}Ar=Jr;break;case 2:break;default:t(0)}Qe=Ar}}if(nt=nt[0],lt=lt[0],Qe&&Re(vt,1)&&!(Qe=1<=(pr=Re(vt,4))&&11>=pr)){Pe.a=3;break e}var pn;if(pn=Qe)t:{var so,vi,Wi,ta=Pe,bi=nt,al=lt,za=pr,Ko=ge,cs=ta.m,Io=ta.s,Yi=[null],ua=1,lo=0,Di=ud[za];r:for(;;){if(Ko&&Re(cs,1)){var Po=Re(cs,3)+2,yn=ht(bi,Po),mn=ht(al,Po),ds=yn*mn;if(!ea(yn,mn,0,ta,Yi))break r;for(Yi=Yi[0],Io.xc=Po,so=0;so<ds;++so){var ca=Yi[so]>>8&65535;Yi[so]=ca,ca>=ua&&(ua=ca+1)}}if(cs.h)break r;for(vi=0;5>vi;++vi){var bo=Ph[vi];!vi&&0<za&&(bo+=1<<za),lo<bo&&(lo=bo)}var Ma=u(ua*Di,ae),ja=ua,ol=u(ja,de);if(ol==null)var _l=null;else t(65536>=ja),_l=ol;var xl=o(lo);if(_l==null||xl==null||Ma==null){ta.a=1;break r}var zl=Ma;for(so=Wi=0;so<ua;++so){var da=_l[so],Hi=da.G,ra=da.H,jl=0,ql=1,zo=0;for(vi=0;5>vi;++vi){bo=Ph[vi],Hi[vi]=zl,ra[vi]=Wi,!vi&&0<za&&(bo+=1<<za);i:{var $d,Gd=bo,Ud=ta,lc=xl,uc=zl,Oh=Wi,hd=0,Au=Ud.m,Ff=Re(Au,1);if(i(lc,0,0,Gd),Ff){var Op=Re(Au,1)+1,Hd=Re(Au,1),Dc=Re(Au,Hd==0?1:8);lc[Dc]=1,Op==2&&(lc[Dc=Re(Au,8)]=1);var Wd=1}else{var Xd=o(19),Oc=Re(Au,4)+4;if(19<Oc){Ud.a=3;var Yd=0;break i}for($d=0;$d<Oc;++$d)Xd[kh[$d]]=Re(Au,3);var Zd=void 0,Nc=void 0,Nh=Ud,L=Xd,l=Gd,h=lc,x=0,C=Nh.m,R=8,z=u(128,ae);n:for(;H(z,0,7,L,19);){if(Re(C,1)){var W=2+2*Re(C,3);if((Zd=2+Re(C,W))>l)break n}else Zd=l;for(Nc=0;Nc<l&&Zd--;){Xe(C);var te=z[0+(127&we(C))];Fe(C,C.u+te.g);var le=te.value;if(16>le)h[Nc++]=le,le!=0&&(R=le);else{var pe=le==16,Ie=le-16,Te=Ip[Ie],qe=Re(C,Ih[Ie])+Te;if(Nc+qe>l)break n;for(var Ze=pe?R:0;0<qe--;)h[Nc++]=Ze}}x=1;break n}x||(Nh.a=3),Wd=x}(Wd=Wd&&!Au.h)&&(hd=H(uc,Oh,8,lc,Gd)),Wd&&hd!=0?Yd=hd:(Ud.a=3,Yd=0)}if(Yd==0)break r;if(ql&&Ah[vi]==1&&(ql=zl[Wi].g==0),jl+=zl[Wi].g,Wi+=Yd,3>=vi){var ft,mt=xl[0];for(ft=1;ft<bo;++ft)xl[ft]>mt&&(mt=xl[ft]);zo+=mt}}if(da.nd=ql,da.Qb=0,ql&&(da.qb=(Hi[3][ra[3]+0].value<<24|Hi[1][ra[1]+0].value<<16|Hi[2][ra[2]+0].value)>>>0,jl==0&&256>Hi[0][ra[0]+0].value&&(da.Qb=1,da.qb+=Hi[0][ra[0]+0].value<<8)),da.jc=!da.Qb&&6>zo,da.jc){var pt,_t=da;for(pt=0;pt<Aa;++pt){var Lt=pt,xt=_t.pd[Lt],Rt=_t.G[0][_t.H[0]+Lt];256<=Rt.value?(xt.g=Rt.g+256,xt.value=Rt.value):(xt.g=0,xt.value=0,Lt>>=zt(Rt,8,xt),Lt>>=zt(_t.G[1][_t.H[1]+Lt],16,xt),Lt>>=zt(_t.G[2][_t.H[2]+Lt],0,xt),zt(_t.G[3][_t.H[3]+Lt],24,xt))}}}Io.vc=Yi,Io.Wb=ua,Io.Ya=_l,Io.yc=Ma,pn=1;break t}pn=0}if(!(Qe=pn)){Pe.a=3;break e}if(0<pr){if(Tt.ua=1<<pr,!$e(Tt.Wa,pr)){Pe.a=1,Qe=0;break e}}else Tt.ua=0;var Bt=Pe,Mt=nt,Xt=lt,gr=Bt.s,ur=gr.xc;if(Bt.c=Mt,Bt.i=Xt,gr.md=ht(Mt,ur),gr.wc=ur==0?-1:(1<<ur)-1,ge){Pe.xb=dd;break e}if((Ht=o(nt*lt))==null){Pe.a=1,Qe=0;break e}Qe=(Qe=Pn(Pe,Ht,0,nt,lt,lt,null))&&!vt.h;break e}return Qe?(Ye!=null?Ye[0]=Ht:(t(Ht==null),t(ge)),Pe.$=0,ge||Un(Tt)):Un(Tt),Qe}function An(G,J){var ge=G.c*G.i,Pe=ge+J+16*J;return t(G.c<=J),G.V=o(Pe),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+ge+J,1)}function Ca(G,J){var ge=G.C,Pe=J-ge,Ye=G.V,Qe=G.Ba+G.c*ge;for(t(J<=G.l.o);0<Pe;){var nt=16<Pe?16:Pe,lt=G.l.ma,vt=G.l.width,Tt=vt*nt,Ht=lt.ca,pr=lt.tb+vt*ge,wt=G.Ta,Pt=G.Ua;En(G,nt,Ye,Qe),To(wt,Pt,Ht,pr,Tt),kr(lt,ge,ge+nt,Ht,pr,vt),Pe-=nt,Ye+=nt*G.c,ge+=nt}t(ge==J),G.C=G.Ma=J}function Ni(){this.ub=this.yd=this.td=this.Rb=0}function Ho(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pa(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function mo(){this.Yb=(function(){var G=[];return(function J(ge,Pe,Ye){for(var Qe=Ye[Pe],nt=0;nt<Qe&&(ge.push(Ye.length>Pe+1?[]:0),!(Ye.length<Pe+1));nt++)J(ge[nt],Pe+1,Ye)})(G,0,[3,11]),G})()}function Oa(){this.jb=o(3),this.Wc=a([4,8],mo),this.Xc=a([4,17],mo)}function zs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function fi(){this.ld=this.La=this.dd=this.tc=0}function Ai(){this.Na=this.la=0}function Ql(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function na(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Na(){this.uc=this.M=this.Nb=0,this.wa=Array(new fi),this.Y=0,this.ya=Array(new na),this.aa=0,this.l=new Xo}function Wo(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ma(){this.cb=this.a=0,this.sc="",this.m=new he,this.Od=new Ni,this.Kc=new Ho,this.ed=new zs,this.Qa=new pa,this.Ic=this.$c=this.Aa=0,this.D=new Na,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,he),this.ia=0,this.pb=u(4,Ql),this.Pa=new Oa,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wo),this.Hd=0,this.rb=Array(new Ai),this.sb=0,this.wa=Array(new fi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new na),this.L=this.aa=0,this.gd=a([4,2],fi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fl(){var G=new ma;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,kf||(kf=js)),G}function Ea(G,J,ge){return G.a==0&&(G.a=J,G.sc=ge,G.cb=0),0}function oa(G,J,ge){return 3<=ge&&G[J+0]==157&&G[J+1]==1&&G[J+2]==42}function qu(G,J){if(G==null)return 0;if(G.a=0,G.sc="OK",J==null)return Ea(G,2,"null VP8Io passed to VP8GetHeaders()");var ge=J.data,Pe=J.w,Ye=J.ha;if(4>Ye)return Ea(G,7,"Truncated header.");var Qe=ge[Pe+0]|ge[Pe+1]<<8|ge[Pe+2]<<16,nt=G.Od;if(nt.Rb=!(1&Qe),nt.td=Qe>>1&7,nt.yd=Qe>>4&1,nt.ub=Qe>>5,3<nt.td)return Ea(G,3,"Incorrect keyframe parameters.");if(!nt.yd)return Ea(G,4,"Frame not displayable.");Pe+=3,Ye-=3;var lt=G.Kc;if(nt.Rb){if(7>Ye)return Ea(G,7,"cannot parse picture header");if(!oa(ge,Pe,Ye))return Ea(G,3,"Bad code word");lt.c=16383&(ge[Pe+4]<<8|ge[Pe+3]),lt.Td=ge[Pe+4]>>6,lt.i=16383&(ge[Pe+6]<<8|ge[Pe+5]),lt.Ud=ge[Pe+6]>>6,Pe+=7,Ye-=7,G.za=lt.c+15>>4,G.Ub=lt.i+15>>4,J.width=lt.c,J.height=lt.i,J.Da=0,J.j=0,J.v=0,J.va=J.width,J.o=J.height,J.da=0,J.ib=J.width,J.hb=J.height,J.U=J.width,J.T=J.height,i((Qe=G.Pa).jb,0,255,Qe.jb.length),t((Qe=G.Qa)!=null),Qe.Cb=0,Qe.Bb=0,Qe.Fb=1,i(Qe.Zb,0,0,Qe.Zb.length),i(Qe.Lb,0,0,Qe.Lb)}if(nt.ub>Ye)return Ea(G,7,"bad partition length");fe(Qe=G.m,ge,Pe,nt.ub),Pe+=nt.ub,Ye-=nt.ub,nt.Rb&&(lt.Ld=ot(Qe),lt.Kd=ot(Qe)),lt=G.Qa;var vt,Tt=G.Pa;if(t(Qe!=null),t(lt!=null),lt.Cb=ot(Qe),lt.Cb){if(lt.Bb=ot(Qe),ot(Qe)){for(lt.Fb=ot(Qe),vt=0;4>vt;++vt)lt.Zb[vt]=ot(Qe)?ye(Qe,7):0;for(vt=0;4>vt;++vt)lt.Lb[vt]=ot(Qe)?ye(Qe,6):0}if(lt.Bb)for(vt=0;3>vt;++vt)Tt.jb[vt]=ot(Qe)?Le(Qe,8):255}else lt.Bb=0;if(Qe.Ka)return Ea(G,3,"cannot parse segment header");if((lt=G.ed).zd=ot(Qe),lt.Tb=Le(Qe,6),lt.wb=Le(Qe,3),lt.Pc=ot(Qe),lt.Pc&&ot(Qe)){for(Tt=0;4>Tt;++Tt)ot(Qe)&&(lt.vd[Tt]=ye(Qe,6));for(Tt=0;4>Tt;++Tt)ot(Qe)&&(lt.od[Tt]=ye(Qe,6))}if(G.L=lt.Tb==0?0:lt.zd?1:2,Qe.Ka)return Ea(G,3,"cannot parse filter header");var Ht=Ye;if(Ye=vt=Pe,Pe=vt+Ht,lt=Ht,G.Xb=(1<<Le(G.m,2))-1,Ht<3*(Tt=G.Xb))ge=7;else{for(vt+=3*Tt,lt-=3*Tt,Ht=0;Ht<Tt;++Ht){var pr=ge[Ye+0]|ge[Ye+1]<<8|ge[Ye+2]<<16;pr>lt&&(pr=lt),fe(G.Jc[+Ht],ge,vt,pr),vt+=pr,lt-=pr,Ye+=3}fe(G.Jc[+Tt],ge,vt,lt),ge=vt<Pe?0:5}if(ge!=0)return Ea(G,ge,"cannot parse partitions");for(ge=Le(vt=G.m,7),Ye=ot(vt)?ye(vt,4):0,Pe=ot(vt)?ye(vt,4):0,lt=ot(vt)?ye(vt,4):0,Tt=ot(vt)?ye(vt,4):0,vt=ot(vt)?ye(vt,4):0,Ht=G.Qa,pr=0;4>pr;++pr){if(Ht.Cb){var wt=Ht.Zb[pr];Ht.Fb||(wt+=ge)}else{if(0<pr){G.pb[pr]=G.pb[0];continue}wt=ge}var Pt=G.pb[pr];Pt.Sc[0]=Ap[Pa(wt+Ye,127)],Pt.Sc[1]=cd[Pa(wt+0,127)],Pt.Eb[0]=2*Ap[Pa(wt+Pe,127)],Pt.Eb[1]=101581*cd[Pa(wt+lt,127)]>>16,8>Pt.Eb[1]&&(Pt.Eb[1]=8),Pt.Qc[0]=Ap[Pa(wt+Tt,117)],Pt.Qc[1]=cd[Pa(wt+vt,127)],Pt.lc=wt+vt}if(!nt.Rb)return Ea(G,4,"Not a key frame.");for(ot(Qe),nt=G.Pa,ge=0;4>ge;++ge){for(Ye=0;8>Ye;++Ye)for(Pe=0;3>Pe;++Pe)for(lt=0;11>lt;++lt)Tt=Ke(Qe,Rf[ge][Ye][Pe][lt])?Le(Qe,8):Zm[ge][Ye][Pe][lt],nt.Wc[ge][Ye].Yb[Pe][lt]=Tt;for(Ye=0;17>Ye;++Ye)nt.Xc[ge][Ye]=nt.Wc[ge][Mh[Ye]]}return G.kc=ot(Qe),G.kc&&(G.Bd=Le(Qe,8)),G.cb=1}function js(G,J,ge,Pe,Ye,Qe,nt){var lt=J[Ye].Yb[ge];for(ge=0;16>Ye;++Ye){if(!Ke(G,lt[ge+0]))return Ye;for(;!Ke(G,lt[ge+1]);)if(lt=J[++Ye].Yb[0],ge=0,Ye==16)return 16;var vt=J[Ye+1].Yb;if(Ke(G,lt[ge+2])){var Tt=G,Ht=0;if(Ke(Tt,(wt=lt)[(pr=ge)+3]))if(Ke(Tt,wt[pr+6])){for(lt=0,pr=2*(Ht=Ke(Tt,wt[pr+8]))+(wt=Ke(Tt,wt[pr+9+Ht])),Ht=0,wt=Ym[pr];wt[lt];++lt)Ht+=Ht+Ke(Tt,wt[lt]);Ht+=3+(8<<pr)}else Ke(Tt,wt[pr+7])?(Ht=7+2*Ke(Tt,165),Ht+=Ke(Tt,145)):Ht=5+Ke(Tt,159);else Ht=Ke(Tt,wt[pr+4])?3+Ke(Tt,wt[pr+5]):2;lt=vt[2]}else Ht=1,lt=vt[1];vt=nt+Mf[Ye],0>(Tt=G).b&&Be(Tt);var pr,wt=Tt.b,Pt=(pr=Tt.Ca>>1)-(Tt.I>>wt)>>31;--Tt.b,Tt.Ca+=Pt,Tt.Ca|=1,Tt.I-=(pr+1&Pt)<<wt,Qe[vt]=((Ht^Pt)-Pt)*Pe[(0<Ye)+0]}return 16}function No(G){var J=G.rb[G.sb-1];J.la=0,J.Na=0,i(G.zc,0,0,G.zc.length),G.ja=0}function Ua(G,J,ge,Pe,Ye){Ye=G[J+ge+32*Pe]+(Ye>>3),G[J+ge+32*Pe]=-256&Ye?0>Ye?0:255:Ye}function Fo(G,J,ge,Pe,Ye,Qe){Ua(G,J,0,ge,Pe+Ye),Ua(G,J,1,ge,Pe+Qe),Ua(G,J,2,ge,Pe-Qe),Ua(G,J,3,ge,Pe-Ye)}function Ta(G){return(20091*G>>16)+G}function bs(G,J,ge,Pe){var Ye,Qe=0,nt=o(16);for(Ye=0;4>Ye;++Ye){var lt=G[J+0]+G[J+8],vt=G[J+0]-G[J+8],Tt=(35468*G[J+4]>>16)-Ta(G[J+12]),Ht=Ta(G[J+4])+(35468*G[J+12]>>16);nt[Qe+0]=lt+Ht,nt[Qe+1]=vt+Tt,nt[Qe+2]=vt-Tt,nt[Qe+3]=lt-Ht,Qe+=4,J++}for(Ye=Qe=0;4>Ye;++Ye)lt=(G=nt[Qe+0]+4)+nt[Qe+8],vt=G-nt[Qe+8],Tt=(35468*nt[Qe+4]>>16)-Ta(nt[Qe+12]),Ua(ge,Pe,0,0,lt+(Ht=Ta(nt[Qe+4])+(35468*nt[Qe+12]>>16))),Ua(ge,Pe,1,0,vt+Tt),Ua(ge,Pe,2,0,vt-Tt),Ua(ge,Pe,3,0,lt-Ht),Qe++,Pe+=32}function ac(G,J,ge,Pe){var Ye=G[J+0]+4,Qe=35468*G[J+4]>>16,nt=Ta(G[J+4]),lt=35468*G[J+1]>>16;Fo(ge,Pe,0,Ye+nt,G=Ta(G[J+1]),lt),Fo(ge,Pe,1,Ye+Qe,G,lt),Fo(ge,Pe,2,Ye-Qe,G,lt),Fo(ge,Pe,3,Ye-nt,G,lt)}function eu(G,J,ge,Pe,Ye){bs(G,J,ge,Pe),Ye&&bs(G,J+16,ge,Pe+4)}function Q(G,J,ge,Pe){v(G,J+0,ge,Pe,1),v(G,J+32,ge,Pe+128,1)}function me(G,J,ge,Pe){var Ye;for(G=G[J+0]+4,Ye=0;4>Ye;++Ye)for(J=0;4>J;++J)Ua(ge,Pe,J,Ye,G)}function Je(G,J,ge,Pe){G[J+0]&&ne(G,J+0,ge,Pe),G[J+16]&&ne(G,J+16,ge,Pe+4),G[J+32]&&ne(G,J+32,ge,Pe+128),G[J+48]&&ne(G,J+48,ge,Pe+128+4)}function It(G,J,ge,Pe){var Ye,Qe=o(16);for(Ye=0;4>Ye;++Ye){var nt=G[J+0+Ye]+G[J+12+Ye],lt=G[J+4+Ye]+G[J+8+Ye],vt=G[J+4+Ye]-G[J+8+Ye],Tt=G[J+0+Ye]-G[J+12+Ye];Qe[0+Ye]=nt+lt,Qe[8+Ye]=nt-lt,Qe[4+Ye]=Tt+vt,Qe[12+Ye]=Tt-vt}for(Ye=0;4>Ye;++Ye)nt=(G=Qe[0+4*Ye]+3)+Qe[3+4*Ye],lt=Qe[1+4*Ye]+Qe[2+4*Ye],vt=Qe[1+4*Ye]-Qe[2+4*Ye],Tt=G-Qe[3+4*Ye],ge[Pe+0]=nt+lt>>3,ge[Pe+16]=Tt+vt>>3,ge[Pe+32]=nt-lt>>3,ge[Pe+48]=Tt-vt>>3,Pe+=64}function jt(G,J,ge){var Pe,Ye=J-32,Qe=oo,nt=255-G[Ye-1];for(Pe=0;Pe<ge;++Pe){var lt,vt=Qe,Tt=nt+G[J-1];for(lt=0;lt<ge;++lt)G[J+lt]=vt[Tt+G[Ye+lt]];J+=32}}function qt(G,J){jt(G,J,4)}function Qt(G,J){jt(G,J,8)}function Vr(G,J){jt(G,J,16)}function Wr(G,J){var ge;for(ge=0;16>ge;++ge)n(G,J+32*ge,G,J-32,16)}function zr(G,J){var ge;for(ge=16;0<ge;--ge)i(G,J,G[J-1],16),J+=32}function Kr(G,J,ge){var Pe;for(Pe=0;16>Pe;++Pe)i(J,ge+32*Pe,G,16)}function Cr(G,J){var ge,Pe=16;for(ge=0;16>ge;++ge)Pe+=G[J-1+32*ge]+G[J+ge-32];Kr(Pe>>5,G,J)}function Hn(G,J){var ge,Pe=8;for(ge=0;16>ge;++ge)Pe+=G[J-1+32*ge];Kr(Pe>>4,G,J)}function _i(G,J){var ge,Pe=8;for(ge=0;16>ge;++ge)Pe+=G[J+ge-32];Kr(Pe>>4,G,J)}function Rn(G,J){Kr(128,G,J)}function dn(G,J,ge){return G+2*J+ge+2>>2}function Tr(G,J){var ge,Pe=J-32;for(Pe=new Uint8Array([dn(G[Pe-1],G[Pe+0],G[Pe+1]),dn(G[Pe+0],G[Pe+1],G[Pe+2]),dn(G[Pe+1],G[Pe+2],G[Pe+3]),dn(G[Pe+2],G[Pe+3],G[Pe+4])]),ge=0;4>ge;++ge)n(G,J+32*ge,Pe,0,Pe.length)}function rn(G,J){var ge=G[J-1],Pe=G[J-1+32],Ye=G[J-1+64],Qe=G[J-1+96];it(G,J+0,16843009*dn(G[J-1-32],ge,Pe)),it(G,J+32,16843009*dn(ge,Pe,Ye)),it(G,J+64,16843009*dn(Pe,Ye,Qe)),it(G,J+96,16843009*dn(Ye,Qe,Qe))}function sn(G,J){var ge,Pe=4;for(ge=0;4>ge;++ge)Pe+=G[J+ge-32]+G[J-1+32*ge];for(Pe>>=3,ge=0;4>ge;++ge)i(G,J+32*ge,Pe,4)}function ii(G,J){var ge=G[J-1+0],Pe=G[J-1+32],Ye=G[J-1+64],Qe=G[J-1-32],nt=G[J+0-32],lt=G[J+1-32],vt=G[J+2-32],Tt=G[J+3-32];G[J+0+96]=dn(Pe,Ye,G[J-1+96]),G[J+1+96]=G[J+0+64]=dn(ge,Pe,Ye),G[J+2+96]=G[J+1+64]=G[J+0+32]=dn(Qe,ge,Pe),G[J+3+96]=G[J+2+64]=G[J+1+32]=G[J+0+0]=dn(nt,Qe,ge),G[J+3+64]=G[J+2+32]=G[J+1+0]=dn(lt,nt,Qe),G[J+3+32]=G[J+2+0]=dn(vt,lt,nt),G[J+3+0]=dn(Tt,vt,lt)}function Ri(G,J){var ge=G[J+1-32],Pe=G[J+2-32],Ye=G[J+3-32],Qe=G[J+4-32],nt=G[J+5-32],lt=G[J+6-32],vt=G[J+7-32];G[J+0+0]=dn(G[J+0-32],ge,Pe),G[J+1+0]=G[J+0+32]=dn(ge,Pe,Ye),G[J+2+0]=G[J+1+32]=G[J+0+64]=dn(Pe,Ye,Qe),G[J+3+0]=G[J+2+32]=G[J+1+64]=G[J+0+96]=dn(Ye,Qe,nt),G[J+3+32]=G[J+2+64]=G[J+1+96]=dn(Qe,nt,lt),G[J+3+64]=G[J+2+96]=dn(nt,lt,vt),G[J+3+96]=dn(lt,vt,vt)}function sa(G,J){var ge=G[J-1+0],Pe=G[J-1+32],Ye=G[J-1+64],Qe=G[J-1-32],nt=G[J+0-32],lt=G[J+1-32],vt=G[J+2-32],Tt=G[J+3-32];G[J+0+0]=G[J+1+64]=Qe+nt+1>>1,G[J+1+0]=G[J+2+64]=nt+lt+1>>1,G[J+2+0]=G[J+3+64]=lt+vt+1>>1,G[J+3+0]=vt+Tt+1>>1,G[J+0+96]=dn(Ye,Pe,ge),G[J+0+64]=dn(Pe,ge,Qe),G[J+0+32]=G[J+1+96]=dn(ge,Qe,nt),G[J+1+32]=G[J+2+96]=dn(Qe,nt,lt),G[J+2+32]=G[J+3+96]=dn(nt,lt,vt),G[J+3+32]=dn(lt,vt,Tt)}function hi(G,J){var ge=G[J+0-32],Pe=G[J+1-32],Ye=G[J+2-32],Qe=G[J+3-32],nt=G[J+4-32],lt=G[J+5-32],vt=G[J+6-32],Tt=G[J+7-32];G[J+0+0]=ge+Pe+1>>1,G[J+1+0]=G[J+0+64]=Pe+Ye+1>>1,G[J+2+0]=G[J+1+64]=Ye+Qe+1>>1,G[J+3+0]=G[J+2+64]=Qe+nt+1>>1,G[J+0+32]=dn(ge,Pe,Ye),G[J+1+32]=G[J+0+96]=dn(Pe,Ye,Qe),G[J+2+32]=G[J+1+96]=dn(Ye,Qe,nt),G[J+3+32]=G[J+2+96]=dn(Qe,nt,lt),G[J+3+64]=dn(nt,lt,vt),G[J+3+96]=dn(lt,vt,Tt)}function ai(G,J){var ge=G[J-1+0],Pe=G[J-1+32],Ye=G[J-1+64],Qe=G[J-1+96];G[J+0+0]=ge+Pe+1>>1,G[J+2+0]=G[J+0+32]=Pe+Ye+1>>1,G[J+2+32]=G[J+0+64]=Ye+Qe+1>>1,G[J+1+0]=dn(ge,Pe,Ye),G[J+3+0]=G[J+1+32]=dn(Pe,Ye,Qe),G[J+3+32]=G[J+1+64]=dn(Ye,Qe,Qe),G[J+3+64]=G[J+2+64]=G[J+0+96]=G[J+1+96]=G[J+2+96]=G[J+3+96]=Qe}function as(G,J){var ge=G[J-1+0],Pe=G[J-1+32],Ye=G[J-1+64],Qe=G[J-1+96],nt=G[J-1-32],lt=G[J+0-32],vt=G[J+1-32],Tt=G[J+2-32];G[J+0+0]=G[J+2+32]=ge+nt+1>>1,G[J+0+32]=G[J+2+64]=Pe+ge+1>>1,G[J+0+64]=G[J+2+96]=Ye+Pe+1>>1,G[J+0+96]=Qe+Ye+1>>1,G[J+3+0]=dn(lt,vt,Tt),G[J+2+0]=dn(nt,lt,vt),G[J+1+0]=G[J+3+32]=dn(ge,nt,lt),G[J+1+32]=G[J+3+64]=dn(Pe,ge,nt),G[J+1+64]=G[J+3+96]=dn(Ye,Pe,ge),G[J+1+96]=dn(Qe,Ye,Pe)}function _s(G,J){var ge;for(ge=0;8>ge;++ge)n(G,J+32*ge,G,J-32,8)}function xi(G,J){var ge;for(ge=0;8>ge;++ge)i(G,J,G[J-1],8),J+=32}function os(G,J,ge){var Pe;for(Pe=0;8>Pe;++Pe)i(J,ge+32*Pe,G,8)}function Xi(G,J){var ge,Pe=8;for(ge=0;8>ge;++ge)Pe+=G[J+ge-32]+G[J-1+32*ge];os(Pe>>4,G,J)}function tu(G,J){var ge,Pe=4;for(ge=0;8>ge;++ge)Pe+=G[J+ge-32];os(Pe>>3,G,J)}function Fa(G,J){var ge,Pe=4;for(ge=0;8>ge;++ge)Pe+=G[J-1+32*ge];os(Pe>>3,G,J)}function xs(G,J){os(128,G,J)}function So(G,J,ge){var Pe=G[J-ge],Ye=G[J+0],Qe=3*(Ye-Pe)+yl[1020+G[J-2*ge]-G[J+ge]],nt=vl[112+(Qe+4>>3)];G[J-ge]=oo[255+Pe+vl[112+(Qe+3>>3)]],G[J+0]=oo[255+Ye-nt]}function ru(G,J,ge,Pe){var Ye=G[J+0],Qe=G[J+ge];return Xn[255+G[J-2*ge]-G[J-ge]]>Pe||Xn[255+Qe-Ye]>Pe}function nu(G,J,ge,Pe){return 4*Xn[255+G[J-ge]-G[J+0]]+Xn[255+G[J-2*ge]-G[J+ge]]<=Pe}function Ja(G,J,ge,Pe,Ye){var Qe=G[J-3*ge],nt=G[J-2*ge],lt=G[J-ge],vt=G[J+0],Tt=G[J+ge],Ht=G[J+2*ge],pr=G[J+3*ge];return 4*Xn[255+lt-vt]+Xn[255+nt-Tt]>Pe?0:Xn[255+G[J-4*ge]-Qe]<=Ye&&Xn[255+Qe-nt]<=Ye&&Xn[255+nt-lt]<=Ye&&Xn[255+pr-Ht]<=Ye&&Xn[255+Ht-Tt]<=Ye&&Xn[255+Tt-vt]<=Ye}function ki(G,J,ge,Pe){var Ye=2*Pe+1;for(Pe=0;16>Pe;++Pe)nu(G,J+Pe,ge,Ye)&&So(G,J+Pe,ge)}function ws(G,J,ge,Pe){var Ye=2*Pe+1;for(Pe=0;16>Pe;++Pe)nu(G,J+Pe*ge,1,Ye)&&So(G,J+Pe*ge,1)}function Yn(G,J,ge,Pe){var Ye;for(Ye=3;0<Ye;--Ye)ki(G,J+=4*ge,ge,Pe)}function Wn(G,J,ge,Pe){var Ye;for(Ye=3;0<Ye;--Ye)ws(G,J+=4,ge,Pe)}function go(G,J,ge,Pe,Ye,Qe,nt,lt){for(Qe=2*Qe+1;0<Ye--;){if(Ja(G,J,ge,Qe,nt))if(ru(G,J,ge,lt))So(G,J,ge);else{var vt=G,Tt=J,Ht=ge,pr=vt[Tt-2*Ht],wt=vt[Tt-Ht],Pt=vt[Tt+0],or=vt[Tt+Ht],Ar=vt[Tt+2*Ht],dr=27*(Rr=yl[1020+3*(Pt-wt)+yl[1020+pr-or]])+63>>7,Mr=18*Rr+63>>7,Rr=9*Rr+63>>7;vt[Tt-3*Ht]=oo[255+vt[Tt-3*Ht]+Rr],vt[Tt-2*Ht]=oo[255+pr+Mr],vt[Tt-Ht]=oo[255+wt+dr],vt[Tt+0]=oo[255+Pt-dr],vt[Tt+Ht]=oo[255+or-Mr],vt[Tt+2*Ht]=oo[255+Ar-Rr]}J+=Pe}}function Zn(G,J,ge,Pe,Ye,Qe,nt,lt){for(Qe=2*Qe+1;0<Ye--;){if(Ja(G,J,ge,Qe,nt))if(ru(G,J,ge,lt))So(G,J,ge);else{var vt=G,Tt=J,Ht=ge,pr=vt[Tt-Ht],wt=vt[Tt+0],Pt=vt[Tt+Ht],or=vl[112+(4+(Ar=3*(wt-pr))>>3)],Ar=vl[112+(Ar+3>>3)],dr=or+1>>1;vt[Tt-2*Ht]=oo[255+vt[Tt-2*Ht]+dr],vt[Tt-Ht]=oo[255+pr+Ar],vt[Tt+0]=oo[255+wt-or],vt[Tt+Ht]=oo[255+Pt-dr]}J+=Pe}}function ue(G,J,ge,Pe,Ye,Qe){go(G,J,ge,1,16,Pe,Ye,Qe)}function We(G,J,ge,Pe,Ye,Qe){go(G,J,1,ge,16,Pe,Ye,Qe)}function bt(G,J,ge,Pe,Ye,Qe){var nt;for(nt=3;0<nt;--nt)Zn(G,J+=4*ge,ge,1,16,Pe,Ye,Qe)}function Ft(G,J,ge,Pe,Ye,Qe){var nt;for(nt=3;0<nt;--nt)Zn(G,J+=4,1,ge,16,Pe,Ye,Qe)}function nr(G,J,ge,Pe,Ye,Qe,nt,lt){go(G,J,Ye,1,8,Qe,nt,lt),go(ge,Pe,Ye,1,8,Qe,nt,lt)}function Pr(G,J,ge,Pe,Ye,Qe,nt,lt){go(G,J,1,Ye,8,Qe,nt,lt),go(ge,Pe,1,Ye,8,Qe,nt,lt)}function $r(G,J,ge,Pe,Ye,Qe,nt,lt){Zn(G,J+4*Ye,Ye,1,8,Qe,nt,lt),Zn(ge,Pe+4*Ye,Ye,1,8,Qe,nt,lt)}function Tn(G,J,ge,Pe,Ye,Qe,nt,lt){Zn(G,J+4,1,Ye,8,Qe,nt,lt),Zn(ge,Pe+4,1,Ye,8,Qe,nt,lt)}function Dn(){this.ba=new Lr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Hr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Mn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ni(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function On(){this.ua=0,this.Wa=new $t,this.vb=new $t,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new ae}function Mi(){this.xb=this.a=0,this.l=new Xo,this.ca=new Lr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ee,this.Pb=0,this.wd=new Ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new On,this.ab=0,this.gc=u(4,ni),this.Oc=0}function Fi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gi(G,J,ge,Pe,Ye,Qe,nt){for(G=G==null?0:G[J+0],J=0;J<nt;++J)Ye[Qe+J]=G+ge[Pe+J]&255,G=Ye[Qe+J]}function pi(G,J,ge,Pe,Ye,Qe,nt){var lt;if(G==null)Gi(null,null,ge,Pe,Ye,Qe,nt);else for(lt=0;lt<nt;++lt)Ye[Qe+lt]=G[J+lt]+ge[Pe+lt]&255}function ga(G,J,ge,Pe,Ye,Qe,nt){if(G==null)Gi(null,null,ge,Pe,Ye,Qe,nt);else{var lt,vt=G[J+0],Tt=vt,Ht=vt;for(lt=0;lt<nt;++lt)Tt=Ht+(vt=G[J+lt])-Tt,Ht=ge[Pe+lt]+(-256&Tt?0>Tt?0:255:Tt)&255,Tt=vt,Ye[Qe+lt]=Ht}}function Ia(G,J,ge,Pe){var Ye=J.width,Qe=J.o;if(t(G!=null&&J!=null),0>ge||0>=Pe||ge+Pe>Qe)return null;if(!G.Cc){if(G.ga==null){var nt;if(G.ga=new Fi,(nt=G.ga==null)||(nt=J.width*J.o,t(G.Gb.length==0),G.Gb=o(nt),G.Uc=0,G.Gb==null?nt=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,nt=1),nt=!nt),!nt){nt=G.ga;var lt=G.Fa,vt=G.P,Tt=G.qc,Ht=G.mb,pr=G.nb,wt=vt+1,Pt=Tt-1,or=nt.l;if(t(lt!=null&&Ht!=null&&J!=null),Iu[0]=null,Iu[1]=Gi,Iu[2]=pi,Iu[3]=ga,nt.ca=Ht,nt.tb=pr,nt.c=J.width,nt.i=J.height,t(0<nt.c&&0<nt.i),1>=Tt)J=0;else if(nt.$a=3&lt[vt+0],nt.Z=lt[vt+0]>>2&3,nt.Lc=lt[vt+0]>>4&3,vt=lt[vt+0]>>6&3,0>nt.$a||1<nt.$a||4<=nt.Z||1<nt.Lc||vt)J=0;else if(or.put=en,or.ac=Jn,or.bc=Vn,or.ma=nt,or.width=J.width,or.height=J.height,or.Da=J.Da,or.v=J.v,or.va=J.va,or.j=J.j,or.o=J.o,nt.$a)e:{t(nt.$a==1),J=Ki();t:for(;;){if(J==null){J=0;break e}if(t(nt!=null),nt.mc=J,J.c=nt.c,J.i=nt.i,J.l=nt.l,J.l.ma=nt,J.l.width=nt.c,J.l.height=nt.i,J.a=0,xe(J.m,lt,wt,Pt),!ea(nt.c,nt.i,1,J,null)||(J.ab==1&&J.gc[0].hc==3&&gi(J.s)?(nt.ic=1,lt=J.c*J.i,J.Ta=null,J.Ua=0,J.V=o(lt),J.Ba=0,J.V==null?(J.a=1,J=0):J=1):(nt.ic=0,J=An(J,nt.c)),!J))break t;J=1;break e}nt.mc=null,J=0}else J=Pt>=nt.c*nt.i;nt=!J}if(nt)return null;G.ga.Lc!=1?G.Ga=0:Pe=Qe-ge}t(G.ga!=null),t(ge+Pe<=Qe);e:{if(J=(lt=G.ga).c,Qe=lt.l.o,lt.$a==0){if(wt=G.rc,Pt=G.Vc,or=G.Fa,vt=G.P+1+ge*J,Tt=G.mb,Ht=G.nb+ge*J,t(vt<=G.P+G.qc),lt.Z!=0)for(t(Iu[lt.Z]!=null),nt=0;nt<Pe;++nt)Iu[lt.Z](wt,Pt,or,vt,Tt,Ht,J),wt=Tt,Pt=Ht,Ht+=J,vt+=J;else for(nt=0;nt<Pe;++nt)n(Tt,Ht,or,vt,J),wt=Tt,Pt=Ht,Ht+=J,vt+=J;G.rc=wt,G.Vc=Pt}else{if(t(lt.mc!=null),J=ge+Pe,t((nt=lt.mc)!=null),t(J<=nt.i),nt.C>=J)J=1;else if(lt.ic||Es(),lt.ic){lt=nt.V,wt=nt.Ba,Pt=nt.c;var Ar=nt.i,dr=(or=1,vt=nt.$/Pt,Tt=nt.$%Pt,Ht=nt.m,pr=nt.s,nt.$),Mr=Pt*Ar,Rr=Pt*J,Jr=pr.wc,Gr=dr<Rr?qr(pr,Tt,vt):null;t(dr<=Mr),t(J<=Ar),t(gi(pr));t:for(;;){for(;!Ht.h&&dr<Rr;){if(Tt&Jr||(Gr=qr(pr,Tt,vt)),t(Gr!=null),Xe(Ht),256>(Ar=Gt(Gr.G[0],Gr.H[0],Ht)))lt[wt+dr]=Ar,++dr,++Tt>=Pt&&(Tt=0,++vt<=J&&!(vt%16)&&Sn(nt,vt));else{if(!(280>Ar)){or=0;break t}Ar=Ue(Ar-256,Ht);var $n,Ln=Gt(Gr.G[4],Gr.H[4],Ht);if(Xe(Ht),!(dr>=(Ln=Ct(Pt,Ln=Ue(Ln,Ht)))&&Mr-dr>=Ar)){or=0;break t}for($n=0;$n<Ar;++$n)lt[wt+dr+$n]=lt[wt+dr+$n-Ln];for(dr+=Ar,Tt+=Ar;Tt>=Pt;)Tt-=Pt,++vt<=J&&!(vt%16)&&Sn(nt,vt);dr<Rr&&Tt&Jr&&(Gr=qr(pr,Tt,vt))}t(Ht.h==Ne(Ht))}Sn(nt,vt>J?J:vt);break t}!or||Ht.h&&dr<Mr?(or=0,nt.a=Ht.h?5:3):nt.$=dr,J=or}else J=Pn(nt,nt.V,nt.Ba,nt.c,nt.i,J,Ca);if(!J){Pe=0;break e}}ge+Pe>=Qe&&(G.Cc=1),Pe=1}if(!Pe)return null;if(G.Cc&&((Pe=G.ga)!=null&&(Pe.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+ge*Ye}function Ss(G,J,ge,Pe,Ye,Qe){for(;0<Ye--;){var nt,lt=G,vt=J+(ge?1:0),Tt=G,Ht=J+(ge?0:3);for(nt=0;nt<Pe;++nt){var pr=Tt[Ht+4*nt];pr!=255&&(pr*=32897,lt[vt+4*nt+0]=lt[vt+4*nt+0]*pr>>23,lt[vt+4*nt+1]=lt[vt+4*nt+1]*pr>>23,lt[vt+4*nt+2]=lt[vt+4*nt+2]*pr>>23)}J+=Qe}}function qs(G,J,ge,Pe,Ye){for(;0<Pe--;){var Qe;for(Qe=0;Qe<ge;++Qe){var nt=G[J+2*Qe+0],lt=15&(Tt=G[J+2*Qe+1]),vt=4369*lt,Tt=(240&Tt|Tt>>4)*vt>>16;G[J+2*Qe+0]=(240&nt|nt>>4)*vt>>16&240|(15&nt|nt<<4)*vt>>16>>4&15,G[J+2*Qe+1]=240&Tt|lt}J+=Ye}}function Cs(G,J,ge,Pe,Ye,Qe,nt,lt){var vt,Tt,Ht=255;for(Tt=0;Tt<Ye;++Tt){for(vt=0;vt<Pe;++vt){var pr=G[J+vt];Qe[nt+4*vt]=pr,Ht&=pr}J+=ge,nt+=lt}return Ht!=255}function Co(G,J,ge,Pe,Ye){var Qe;for(Qe=0;Qe<Ye;++Qe)ge[Pe+Qe]=G[J+Qe]>>8}function Es(){Ji=Ss,Ha=qs,va=Cs,To=Co}function ya(G,J,ge){Z[G]=function(Pe,Ye,Qe,nt,lt,vt,Tt,Ht,pr,wt,Pt,or,Ar,dr,Mr,Rr,Jr){var Gr,$n=Jr-1>>1,Ln=lt[vt+0]|Tt[Ht+0]<<16,yi=pr[wt+0]|Pt[or+0]<<16;t(Pe!=null);var qn=3*Ln+yi+131074>>2;for(J(Pe[Ye+0],255&qn,qn>>16,Ar,dr),Qe!=null&&(qn=3*yi+Ln+131074>>2,J(Qe[nt+0],255&qn,qn>>16,Mr,Rr)),Gr=1;Gr<=$n;++Gr){var Bi=lt[vt+Gr]|Tt[Ht+Gr]<<16,vo=pr[wt+Gr]|Pt[or+Gr]<<16,Ci=Ln+Bi+yi+vo+524296,zn=Ci+2*(Bi+yi)>>3;qn=zn+Ln>>1,Ln=(Ci=Ci+2*(Ln+vo)>>3)+Bi>>1,J(Pe[Ye+2*Gr-1],255&qn,qn>>16,Ar,dr+(2*Gr-1)*ge),J(Pe[Ye+2*Gr-0],255&Ln,Ln>>16,Ar,dr+(2*Gr-0)*ge),Qe!=null&&(qn=Ci+yi>>1,Ln=zn+vo>>1,J(Qe[nt+2*Gr-1],255&qn,qn>>16,Mr,Rr+(2*Gr-1)*ge),J(Qe[nt+2*Gr+0],255&Ln,Ln>>16,Mr,Rr+(2*Gr+0)*ge)),Ln=Bi,yi=vo}1&Jr||(qn=3*Ln+yi+131074>>2,J(Pe[Ye+Jr-1],255&qn,qn>>16,Ar,dr+(Jr-1)*ge),Qe!=null&&(qn=3*yi+Ln+131074>>2,J(Qe[nt+Jr-1],255&qn,qn>>16,Mr,Rr+(Jr-1)*ge)))}}function Ts(){Hs[ou]=Lh,Hs[sd]=qd,Hs[kc]=Lc,Hs[Bl]=Rc,Hs[Th]=fd,Hs[Cp]=kp,Hs[Ep]=Jm,Hs[Tp]=qd,Hs[Af]=Rc,Hs[oc]=fd,Hs[ld]=kp}function nl(G){return G&-16384?0>G?0:255:G>>Mp}function Yo(G,J){return nl((19077*G>>8)+(26149*J>>8)-14234)}function wi(G,J,ge){return nl((19077*G>>8)-(6419*J>>8)-(13320*ge>>8)+8708)}function Eo(G,J){return nl((19077*G>>8)+(33050*J>>8)-17685)}function xa(G,J,ge,Pe,Ye){Pe[Ye+0]=Yo(G,ge),Pe[Ye+1]=wi(G,J,ge),Pe[Ye+2]=Eo(G,J)}function Bo(G,J,ge,Pe,Ye){Pe[Ye+0]=Eo(G,J),Pe[Ye+1]=wi(G,J,ge),Pe[Ye+2]=Yo(G,ge)}function ss(G,J,ge,Pe,Ye){var Qe=wi(G,J,ge);J=Qe<<3&224|Eo(G,J)>>3,Pe[Ye+0]=248&Yo(G,ge)|Qe>>5,Pe[Ye+1]=J}function Ba(G,J,ge,Pe,Ye){var Qe=240&Eo(G,J)|15;Pe[Ye+0]=240&Yo(G,ge)|wi(G,J,ge)>>4,Pe[Ye+1]=Qe}function Cu(G,J,ge,Pe,Ye){Pe[Ye+0]=255,xa(G,J,ge,Pe,Ye+1)}function Rl(G,J,ge,Pe,Ye){Bo(G,J,ge,Pe,Ye),Pe[Ye+3]=255}function Is(G,J,ge,Pe,Ye){xa(G,J,ge,Pe,Ye),Pe[Ye+3]=255}function Pa(G,J){return 0>G?0:G>J?J:G}function ls(G,J,ge){Z[G]=function(Pe,Ye,Qe,nt,lt,vt,Tt,Ht,pr){for(var wt=Ht+(-2&pr)*ge;Ht!=wt;)J(Pe[Ye+0],Qe[nt+0],lt[vt+0],Tt,Ht),J(Pe[Ye+1],Qe[nt+0],lt[vt+0],Tt,Ht+ge),Ye+=2,++nt,++vt,Ht+=2*ge;1&pr&&J(Pe[Ye+0],Qe[nt+0],lt[vt+0],Tt,Ht)}}function Eu(G,J,ge){return ge==0?G==0?J==0?6:5:J==0?4:0:ge}function Tu(G,J,ge,Pe,Ye){switch(G>>>30){case 3:v(J,ge,Pe,Ye,0);break;case 2:T(J,ge,Pe,Ye);break;case 1:ne(J,ge,Pe,Ye)}}function Vs(G,J){var ge,Pe,Ye=J.M,Qe=J.Nb,nt=G.oc,lt=G.pc+40,vt=G.oc,Tt=G.pc+584,Ht=G.oc,pr=G.pc+600;for(ge=0;16>ge;++ge)nt[lt+32*ge-1]=129;for(ge=0;8>ge;++ge)vt[Tt+32*ge-1]=129,Ht[pr+32*ge-1]=129;for(0<Ye?nt[lt-1-32]=vt[Tt-1-32]=Ht[pr-1-32]=129:(i(nt,lt-32-1,127,21),i(vt,Tt-32-1,127,9),i(Ht,pr-32-1,127,9)),Pe=0;Pe<G.za;++Pe){var wt=J.ya[J.aa+Pe];if(0<Pe){for(ge=-1;16>ge;++ge)n(nt,lt+32*ge-4,nt,lt+32*ge+12,4);for(ge=-1;8>ge;++ge)n(vt,Tt+32*ge-4,vt,Tt+32*ge+4,4),n(Ht,pr+32*ge-4,Ht,pr+32*ge+4,4)}var Pt=G.Gd,or=G.Hd+Pe,Ar=wt.ad,dr=wt.Hc;if(0<Ye&&(n(nt,lt-32,Pt[or].y,0,16),n(vt,Tt-32,Pt[or].f,0,8),n(Ht,pr-32,Pt[or].ea,0,8)),wt.Za){var Mr=nt,Rr=lt-32+16;for(0<Ye&&(Pe>=G.za-1?i(Mr,Rr,Pt[or].y[15],4):n(Mr,Rr,Pt[or+1].y,0,4)),ge=0;4>ge;ge++)Mr[Rr+128+ge]=Mr[Rr+256+ge]=Mr[Rr+384+ge]=Mr[Rr+0+ge];for(ge=0;16>ge;++ge,dr<<=2)Mr=nt,Rr=lt+Dh[ge],su[wt.Ob[ge]](Mr,Rr),Tu(dr,Ar,16*+ge,Mr,Rr)}else if(Mr=Eu(Pe,Ye,wt.Ob[0]),sc[Mr](nt,lt),dr!=0)for(ge=0;16>ge;++ge,dr<<=2)Tu(dr,Ar,16*+ge,nt,lt+Dh[ge]);for(ge=wt.Gc,Mr=Eu(Pe,Ye,wt.Dd),la[Mr](vt,Tt),la[Mr](Ht,pr),dr=Ar,Mr=vt,Rr=Tt,255&(wt=0|ge)&&(170&wt?q(dr,256,Mr,Rr):ve(dr,256,Mr,Rr)),wt=Ht,dr=pr,255&(ge>>=8)&&(170&ge?q(Ar,320,wt,dr):ve(Ar,320,wt,dr)),Ye<G.Ub-1&&(n(Pt[or].y,0,nt,lt+480,16),n(Pt[or].f,0,vt,Tt+224,8),n(Pt[or].ea,0,Ht,pr+224,8)),ge=8*Qe*G.B,Pt=G.sa,or=G.ta+16*Pe+16*Qe*G.R,Ar=G.qa,wt=G.ra+8*Pe+ge,dr=G.Ha,Mr=G.Ia+8*Pe+ge,ge=0;16>ge;++ge)n(Pt,or+ge*G.R,nt,lt+32*ge,16);for(ge=0;8>ge;++ge)n(Ar,wt+ge*G.B,vt,Tt+32*ge,8),n(dr,Mr+ge*G.B,Ht,pr+32*ge,8)}}function Dl(G,J,ge,Pe,Ye,Qe,nt,lt,vt){var Tt=[0],Ht=[0],pr=0,wt=vt!=null?vt.kd:0,Pt=vt??new Mn;if(G==null||12>ge)return 7;Pt.data=G,Pt.w=J,Pt.ha=ge,J=[J],ge=[ge],Pt.gb=[Pt.gb];e:{var or=J,Ar=ge,dr=Pt.gb;if(t(G!=null),t(Ar!=null),t(dr!=null),dr[0]=0,12<=Ar[0]&&!r(G,or[0],"RIFF")){if(r(G,or[0]+8,"WEBP")){dr=3;break e}var Mr=st(G,or[0]+4);if(12>Mr||4294967286<Mr){dr=3;break e}if(wt&&Mr>Ar[0]-8){dr=7;break e}dr[0]=Mr,or[0]+=12,Ar[0]-=12}dr=0}if(dr!=0)return dr;for(Mr=0<Pt.gb[0],ge=ge[0];;){e:{var Rr=G;Ar=J,dr=ge;var Jr=Tt,Gr=Ht,$n=or=[0];if((qn=pr=[pr])[0]=0,8>dr[0])dr=7;else{if(!r(Rr,Ar[0],"VP8X")){if(st(Rr,Ar[0]+4)!=10){dr=3;break e}if(18>dr[0]){dr=7;break e}var Ln=st(Rr,Ar[0]+8),yi=1+Nt(Rr,Ar[0]+12);if(2147483648<=yi*(Rr=1+Nt(Rr,Ar[0]+15))){dr=3;break e}$n!=null&&($n[0]=Ln),Jr!=null&&(Jr[0]=yi),Gr!=null&&(Gr[0]=Rr),Ar[0]+=18,dr[0]-=18,qn[0]=1}dr=0}}if(pr=pr[0],or=or[0],dr!=0)return dr;if(Ar=!!(2&or),!Mr&&pr)return 3;if(Qe!=null&&(Qe[0]=!!(16&or)),nt!=null&&(nt[0]=Ar),lt!=null&&(lt[0]=0),nt=Tt[0],or=Ht[0],pr&&Ar&&vt==null){dr=0;break}if(4>ge){dr=7;break}if(Mr&&pr||!Mr&&!pr&&!r(G,J[0],"ALPH")){ge=[ge],Pt.na=[Pt.na],Pt.P=[Pt.P],Pt.Sa=[Pt.Sa];e:{Ln=G,dr=J,Mr=ge;var qn=Pt.gb;Jr=Pt.na,Gr=Pt.P,$n=Pt.Sa,yi=22,t(Ln!=null),t(Mr!=null),Rr=dr[0];var Bi=Mr[0];for(t(Jr!=null),t($n!=null),Jr[0]=null,Gr[0]=null,$n[0]=0;;){if(dr[0]=Rr,Mr[0]=Bi,8>Bi){dr=7;break e}var vo=st(Ln,Rr+4);if(4294967286<vo){dr=3;break e}var Ci=8+vo+1&-2;if(yi+=Ci,0<qn&&yi>qn){dr=3;break e}if(!r(Ln,Rr,"VP8 ")||!r(Ln,Rr,"VP8L")){dr=0;break e}if(Bi[0]<Ci){dr=7;break e}r(Ln,Rr,"ALPH")||(Jr[0]=Ln,Gr[0]=Rr+8,$n[0]=vo),Rr+=Ci,Bi-=Ci}}if(ge=ge[0],Pt.na=Pt.na[0],Pt.P=Pt.P[0],Pt.Sa=Pt.Sa[0],dr!=0)break}ge=[ge],Pt.Ja=[Pt.Ja],Pt.xa=[Pt.xa];e:if(qn=G,dr=J,Mr=ge,Jr=Pt.gb[0],Gr=Pt.Ja,$n=Pt.xa,Ln=dr[0],Rr=!r(qn,Ln,"VP8 "),yi=!r(qn,Ln,"VP8L"),t(qn!=null),t(Mr!=null),t(Gr!=null),t($n!=null),8>Mr[0])dr=7;else{if(Rr||yi){if(qn=st(qn,Ln+4),12<=Jr&&qn>Jr-12){dr=3;break e}if(wt&&qn>Mr[0]-8){dr=7;break e}Gr[0]=qn,dr[0]+=8,Mr[0]-=8,$n[0]=yi}else $n[0]=5<=Mr[0]&&qn[Ln+0]==47&&!(qn[Ln+4]>>5),Gr[0]=Mr[0];dr=0}if(ge=ge[0],Pt.Ja=Pt.Ja[0],Pt.xa=Pt.xa[0],J=J[0],dr!=0)break;if(4294967286<Pt.Ja)return 3;if(lt==null||Ar||(lt[0]=Pt.xa?2:1),nt=[nt],or=[or],Pt.xa){if(5>ge){dr=7;break}lt=nt,wt=or,Ar=Qe,G==null||5>ge?G=0:5<=ge&&G[J+0]==47&&!(G[J+4]>>5)?(Mr=[0],qn=[0],Jr=[0],xe(Gr=new Ee,G,J,ge),Me(Gr,Mr,qn,Jr)?(lt!=null&&(lt[0]=Mr[0]),wt!=null&&(wt[0]=qn[0]),Ar!=null&&(Ar[0]=Jr[0]),G=1):G=0):G=0}else{if(10>ge){dr=7;break}lt=or,G==null||10>ge||!oa(G,J+3,ge-3)?G=0:(wt=G[J+0]|G[J+1]<<8|G[J+2]<<16,Ar=16383&(G[J+7]<<8|G[J+6]),G=16383&(G[J+9]<<8|G[J+8]),1&wt||3<(wt>>1&7)||!(wt>>4&1)||wt>>5>=Pt.Ja||!Ar||!G?G=0:(nt&&(nt[0]=Ar),lt&&(lt[0]=G),G=1))}if(!G||(nt=nt[0],or=or[0],pr&&(Tt[0]!=nt||Ht[0]!=or)))return 3;vt!=null&&(vt[0]=Pt,vt.offset=J-vt.w,t(4294967286>J-vt.w),t(vt.offset==vt.ha-ge));break}return dr==0||dr==7&&pr&&vt==null?(Qe!=null&&(Qe[0]|=Pt.na!=null&&0<Pt.na.length),Pe!=null&&(Pe[0]=nt),Ye!=null&&(Ye[0]=or),0):dr}function yo(G,J,ge){var Pe=J.width,Ye=J.height,Qe=0,nt=0,lt=Pe,vt=Ye;if(J.Da=G!=null&&0<G.Da,J.Da&&(lt=G.cd,vt=G.bd,Qe=G.v,nt=G.j,11>ge||(Qe&=-2,nt&=-2),0>Qe||0>nt||0>=lt||0>=vt||Qe+lt>Pe||nt+vt>Ye))return 0;if(J.v=Qe,J.j=nt,J.va=Qe+lt,J.o=nt+vt,J.U=lt,J.T=vt,J.da=G!=null&&0<G.da,J.da){if(!Wt(lt,vt,ge=[G.ib],Qe=[G.hb]))return 0;J.ib=ge[0],J.hb=Qe[0]}return J.ob=G!=null&&G.ob,J.Kb=G==null||!G.Sd,J.da&&(J.ob=J.ib<3*Pe/4&&J.hb<3*Ye/4,J.Kb=0),1}function Qa(G){if(G==null)return 2;if(11>G.S){var J=G.f.RGBA;J.fb+=(G.height-1)*J.A,J.A=-J.A}else J=G.f.kb,G=G.height,J.O+=(G-1)*J.fa,J.fa=-J.fa,J.N+=(G-1>>1)*J.Ab,J.Ab=-J.Ab,J.W+=(G-1>>1)*J.Db,J.Db=-J.Db,J.F!=null&&(J.J+=(G-1)*J.lb,J.lb=-J.lb);return 0}function iu(G,J,ge,Pe){if(Pe==null||0>=G||0>=J)return 2;if(ge!=null){if(ge.Da){var Ye=ge.cd,Qe=ge.bd,nt=-2&ge.v,lt=-2&ge.j;if(0>nt||0>lt||0>=Ye||0>=Qe||nt+Ye>G||lt+Qe>J)return 2;G=Ye,J=Qe}if(ge.da){if(!Wt(G,J,Ye=[ge.ib],Qe=[ge.hb]))return 2;G=Ye[0],J=Qe[0]}}Pe.width=G,Pe.height=J;e:{var vt=Pe.width,Tt=Pe.height;if(G=Pe.S,0>=vt||0>=Tt||!(G>=ou&&13>G))G=2;else{if(0>=Pe.Rd&&Pe.sd==null){nt=Qe=Ye=J=0;var Ht=(lt=vt*uu[G])*Tt;if(11>G||(Qe=(Tt+1)/2*(J=(vt+1)/2),G==12&&(nt=(Ye=vt)*Tt)),(Tt=o(Ht+2*Qe+nt))==null){G=1;break e}Pe.sd=Tt,11>G?((vt=Pe.f.RGBA).eb=Tt,vt.fb=0,vt.A=lt,vt.size=Ht):((vt=Pe.f.kb).y=Tt,vt.O=0,vt.fa=lt,vt.Fd=Ht,vt.f=Tt,vt.N=0+Ht,vt.Ab=J,vt.Cd=Qe,vt.ea=Tt,vt.W=0+Ht+Qe,vt.Db=J,vt.Ed=Qe,G==12&&(vt.F=Tt,vt.J=0+Ht+2*Qe),vt.Tc=nt,vt.lb=Ye)}if(J=1,Ye=Pe.S,Qe=Pe.width,nt=Pe.height,Ye>=ou&&13>Ye)if(11>Ye)G=Pe.f.RGBA,J&=(lt=Math.abs(G.A))*(nt-1)+Qe<=G.size,J&=lt>=Qe*uu[Ye],J&=G.eb!=null;else{G=Pe.f.kb,lt=(Qe+1)/2,Ht=(nt+1)/2,vt=Math.abs(G.fa),Tt=Math.abs(G.Ab);var pr=Math.abs(G.Db),wt=Math.abs(G.lb),Pt=wt*(nt-1)+Qe;J&=vt*(nt-1)+Qe<=G.Fd,J&=Tt*(Ht-1)+lt<=G.Cd,J=(J&=pr*(Ht-1)+lt<=G.Ed)&vt>=Qe&Tt>=lt&pr>=lt,J&=G.y!=null,J&=G.f!=null,J&=G.ea!=null,Ye==12&&(J&=wt>=Qe,J&=Pt<=G.Tc,J&=G.F!=null)}else J=0;G=J?0:2}}return G!=0||ge!=null&&ge.fd&&(G=Qa(Pe)),G}var Aa=64,Ol=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ps=24,Zo=32,ka=8,hl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];cr("Predictor0","PredictorAdd0"),Z.Predictor0=function(){return 4278190080},Z.Predictor1=function(G){return G},Z.Predictor2=function(G,J,ge){return J[ge+0]},Z.Predictor3=function(G,J,ge){return J[ge+1]},Z.Predictor4=function(G,J,ge){return J[ge-1]},Z.Predictor5=function(G,J,ge){return br(br(G,J[ge+1]),J[ge+0])},Z.Predictor6=function(G,J,ge){return br(G,J[ge-1])},Z.Predictor7=function(G,J,ge){return br(G,J[ge+0])},Z.Predictor8=function(G,J,ge){return br(J[ge-1],J[ge+0])},Z.Predictor9=function(G,J,ge){return br(J[ge+0],J[ge+1])},Z.Predictor10=function(G,J,ge){return br(br(G,J[ge-1]),br(J[ge+0],J[ge+1]))},Z.Predictor11=function(G,J,ge){var Pe=J[ge+0];return 0>=at(Pe>>24&255,G>>24&255,(J=J[ge-1])>>24&255)+at(Pe>>16&255,G>>16&255,J>>16&255)+at(Pe>>8&255,G>>8&255,J>>8&255)+at(255&Pe,255&G,255&J)?Pe:G},Z.Predictor12=function(G,J,ge){var Pe=J[ge+0];return(yr((G>>24&255)+(Pe>>24&255)-((J=J[ge-1])>>24&255))<<24|yr((G>>16&255)+(Pe>>16&255)-(J>>16&255))<<16|yr((G>>8&255)+(Pe>>8&255)-(J>>8&255))<<8|yr((255&G)+(255&Pe)-(255&J)))>>>0},Z.Predictor13=function(G,J,ge){var Pe=J[ge-1];return(Kt((G=br(G,J[ge+0]))>>24&255,Pe>>24&255)<<24|Kt(G>>16&255,Pe>>16&255)<<16|Kt(G>>8&255,Pe>>8&255)<<8|Kt(255&G,255&Pe))>>>0};var $s=Z.PredictorAdd0;Z.PredictorAdd1=Ae,cr("Predictor2","PredictorAdd2"),cr("Predictor3","PredictorAdd3"),cr("Predictor4","PredictorAdd4"),cr("Predictor5","PredictorAdd5"),cr("Predictor6","PredictorAdd6"),cr("Predictor7","PredictorAdd7"),cr("Predictor8","PredictorAdd8"),cr("Predictor9","PredictorAdd9"),cr("Predictor10","PredictorAdd10"),cr("Predictor11","PredictorAdd11"),cr("Predictor12","PredictorAdd12"),cr("Predictor13","PredictorAdd13");var Gs=Z.PredictorAdd2;He("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),He("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var pl,ml=Z.ColorIndexInverseTransform,Us=Z.MapARGB,gl=Z.VP8LColorIndexInverseTransformAlpha,au=Z.MapAlpha,er=Z.VP8LPredictorsAdd=[];er.length=16,(Z.VP8LPredictors=[]).length=16,(Z.VP8LPredictorsAdd_C=[]).length=16,(Z.VP8LPredictors_C=[]).length=16;var fr,nn,bn,ci,_n,E,m,v,T,q,ne,ve,De,tt,dt,tr,ar,Fr,fn,Cn,Bn,In,gn,Ui,Ji,Ha,va,To,As=o(511),il=o(2041),Nl=o(225),Fl=o(767),us=0,yl=il,vl=Nl,oo=Fl,Xn=As,ou=0,sd=1,kc=2,Bl=3,Th=4,Cp=5,Ep=6,Tp=7,Af=8,oc=9,ld=10,Ih=[2,3,7],Ip=[3,3,11],Ph=[280,256,256,256,40],Ah=[0,1,1,1,0],kh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Mc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ud=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Pp=8,Ap=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],cd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],kf=null,Ym=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zm=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Km=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Mh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],sc=[],su=[],la=[],dd=1,bl=2,Iu=[],Hs=[];ya("UpsampleRgbLinePair",xa,3),ya("UpsampleBgrLinePair",Bo,3),ya("UpsampleRgbaLinePair",Is,4),ya("UpsampleBgraLinePair",Rl,4),ya("UpsampleArgbLinePair",Cu,4),ya("UpsampleRgba4444LinePair",Ba,2),ya("UpsampleRgb565LinePair",ss,2);var Lh=Z.UpsampleRgbLinePair,Lc=Z.UpsampleBgrLinePair,qd=Z.UpsampleRgbaLinePair,Rc=Z.UpsampleBgraLinePair,fd=Z.UpsampleArgbLinePair,kp=Z.UpsampleRgba4444LinePair,Jm=Z.UpsampleRgb565LinePair,Df=16,Of=1<<Df-1,Vd=-227,Vu=482,Mp=6,Rh=0,Nf=o(256),Qm=o(256),Lp=o(256),Rp=o(256),eg=o(Vu-Vd),Dp=o(Vu-Vd);ls("YuvToRgbRow",xa,3),ls("YuvToBgrRow",Bo,3),ls("YuvToRgbaRow",Is,4),ls("YuvToBgraRow",Rl,4),ls("YuvToArgbRow",Cu,4),ls("YuvToRgba4444Row",Ba,2),ls("YuvToRgb565Row",ss,2);var Dh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pu=[0,2,8],tg=[8,7,6,4,4,2,2,2,1,1,1,1],lu=1;this.WebPDecodeRGBA=function(G,J,ge,Pe,Ye){var Qe=sd,nt=new Dn,lt=new Lr;nt.ba=lt,lt.S=Qe,lt.width=[lt.width],lt.height=[lt.height];var vt=lt.width,Tt=lt.height,Ht=new kt;if(Ht==null||G==null)var pr=2;else t(Ht!=null),pr=Dl(G,J,ge,Ht.width,Ht.height,Ht.Pd,Ht.Qd,Ht.format,null);if(pr!=0?vt=0:(vt!=null&&(vt[0]=Ht.width[0]),Tt!=null&&(Tt[0]=Ht.height[0]),vt=1),vt){lt.width=lt.width[0],lt.height=lt.height[0],Pe!=null&&(Pe[0]=lt.width),Ye!=null&&(Ye[0]=lt.height);e:{if(Pe=new Xo,(Ye=new Mn).data=G,Ye.w=J,Ye.ha=ge,Ye.kd=1,J=[0],t(Ye!=null),((G=Dl(Ye.data,Ye.w,Ye.ha,null,null,null,J,null,Ye))==0||G==7)&&J[0]&&(G=4),(J=G)==0){if(t(nt!=null),Pe.data=Ye.data,Pe.w=Ye.w+Ye.offset,Pe.ha=Ye.ha-Ye.offset,Pe.put=en,Pe.ac=Jn,Pe.bc=Vn,Pe.ma=nt,Ye.xa){if((G=Ki())==null){nt=1;break e}if((function(wt,Pt){var or=[0],Ar=[0],dr=[0];t:for(;;){if(wt==null)return 0;if(Pt==null)return wt.a=2,0;if(wt.l=Pt,wt.a=0,xe(wt.m,Pt.data,Pt.w,Pt.ha),!Me(wt.m,or,Ar,dr)){wt.a=3;break t}if(wt.xb=bl,Pt.width=or[0],Pt.height=Ar[0],!ea(or[0],Ar[0],1,wt,null))break t;return 1}return t(wt.a!=0),0})(G,Pe)){if(Pe=(J=iu(Pe.width,Pe.height,nt.Oa,nt.ba))==0){t:{Pe=G;r:for(;;){if(Pe==null){Pe=0;break t}if(t(Pe.s.yc!=null),t(Pe.s.Ya!=null),t(0<Pe.s.Wb),t((ge=Pe.l)!=null),t((Ye=ge.ma)!=null),Pe.xb!=0){if(Pe.ca=Ye.ba,Pe.tb=Ye.tb,t(Pe.ca!=null),!yo(Ye.Oa,ge,Bl)){Pe.a=2;break r}if(!An(Pe,ge.width)||ge.da)break r;if((ge.da||_r(Pe.ca.S))&&Es(),11>Pe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Pe.ca.f.kb.F!=null&&Es()),Pe.Pb&&0<Pe.s.ua&&Pe.s.vb.X==null&&!$e(Pe.s.vb,Pe.s.Wa.Xa)){Pe.a=1;break r}Pe.xb=0}if(!Pn(Pe,Pe.V,Pe.Ba,Pe.c,Pe.i,ge.o,Pi))break r;Ye.Dc=Pe.Ma,Pe=1;break t}t(Pe.a!=0),Pe=0}Pe=!Pe}Pe&&(J=G.a)}else J=G.a}else{if((G=new fl)==null){nt=1;break e}if(G.Fa=Ye.na,G.P=Ye.P,G.qc=Ye.Sa,qu(G,Pe)){if((J=iu(Pe.width,Pe.height,nt.Oa,nt.ba))==0){if(G.Aa=0,ge=nt.Oa,t((Ye=G)!=null),ge!=null){if(0<(vt=0>(vt=ge.Md)?0:100<vt?255:255*vt/100)){for(Tt=Ht=0;4>Tt;++Tt)12>(pr=Ye.pb[Tt]).lc&&(pr.ia=vt*tg[0>pr.lc?0:pr.lc]>>3),Ht|=pr.ia;Ht&&(alert("todo:VP8InitRandom"),Ye.ia=1)}Ye.Ga=ge.Id,100<Ye.Ga?Ye.Ga=100:0>Ye.Ga&&(Ye.Ga=0)}(function(wt,Pt){if(wt==null)return 0;if(Pt==null)return Ea(wt,2,"NULL VP8Io parameter in VP8Decode().");if(!wt.cb&&!qu(wt,Pt))return 0;if(t(wt.cb),Pt.ac==null||Pt.ac(Pt)){Pt.ob&&(wt.L=0);var or=Pu[wt.L];if(wt.L==2?(wt.yb=0,wt.zb=0):(wt.yb=Pt.v-or>>4,wt.zb=Pt.j-or>>4,0>wt.yb&&(wt.yb=0),0>wt.zb&&(wt.zb=0)),wt.Va=Pt.o+15+or>>4,wt.Hb=Pt.va+15+or>>4,wt.Hb>wt.za&&(wt.Hb=wt.za),wt.Va>wt.Ub&&(wt.Va=wt.Ub),0<wt.L){var Ar=wt.ed;for(or=0;4>or;++or){var dr;if(wt.Qa.Cb){var Mr=wt.Qa.Lb[or];wt.Qa.Fb||(Mr+=Ar.Tb)}else Mr=Ar.Tb;for(dr=0;1>=dr;++dr){var Rr=wt.gd[or][dr],Jr=Mr;if(Ar.Pc&&(Jr+=Ar.vd[0],dr&&(Jr+=Ar.od[0])),0<(Jr=0>Jr?0:63<Jr?63:Jr)){var Gr=Jr;0<Ar.wb&&(Gr=4<Ar.wb?Gr>>2:Gr>>1)>9-Ar.wb&&(Gr=9-Ar.wb),1>Gr&&(Gr=1),Rr.dd=Gr,Rr.tc=2*Jr+Gr,Rr.ld=40<=Jr?2:15<=Jr?1:0}else Rr.tc=0;Rr.La=dr}}}or=0}else Ea(wt,6,"Frame setup failed"),or=wt.a;if(or=or==0){if(or){wt.$c=0,0<wt.Aa||(wt.Ic=lu);t:{or=wt.Ic,Ar=4*(Gr=wt.za);var $n=32*Gr,Ln=Gr+1,yi=0<wt.L?Gr*(0<wt.Aa?2:1):0,qn=(wt.Aa==2?2:1)*Gr;if((Rr=Ar+832+(dr=3*(16*or+Pu[wt.L])/2*$n)+(Mr=wt.Fa!=null&&0<wt.Fa.length?wt.Kc.c*wt.Kc.i:0))!=Rr)or=0;else{if(Rr>wt.Vb){if(wt.Vb=0,wt.Ec=o(Rr),wt.Fc=0,wt.Ec==null){or=Ea(wt,1,"no memory during frame initialization.");break t}wt.Vb=Rr}Rr=wt.Ec,Jr=wt.Fc,wt.Ac=Rr,wt.Bc=Jr,Jr+=Ar,wt.Gd=u($n,Wo),wt.Hd=0,wt.rb=u(Ln+1,Ai),wt.sb=1,wt.wa=yi?u(yi,fi):null,wt.Y=0,wt.D.Nb=0,wt.D.wa=wt.wa,wt.D.Y=wt.Y,0<wt.Aa&&(wt.D.Y+=Gr),t(!0),wt.oc=Rr,wt.pc=Jr,Jr+=832,wt.ya=u(qn,na),wt.aa=0,wt.D.ya=wt.ya,wt.D.aa=wt.aa,wt.Aa==2&&(wt.D.aa+=Gr),wt.R=16*Gr,wt.B=8*Gr,Gr=($n=Pu[wt.L])*wt.R,$n=$n/2*wt.B,wt.sa=Rr,wt.ta=Jr+Gr,wt.qa=wt.sa,wt.ra=wt.ta+16*or*wt.R+$n,wt.Ha=wt.qa,wt.Ia=wt.ra+8*or*wt.B+$n,wt.$c=0,Jr+=dr,wt.mb=Mr?Rr:null,wt.nb=Mr?Jr:null,t(Jr+Mr<=wt.Fc+wt.Vb),No(wt),i(wt.Ac,wt.Bc,0,Ar),or=1}}if(or){if(Pt.ka=0,Pt.y=wt.sa,Pt.O=wt.ta,Pt.f=wt.qa,Pt.N=wt.ra,Pt.ea=wt.Ha,Pt.Vd=wt.Ia,Pt.fa=wt.R,Pt.Rc=wt.B,Pt.F=null,Pt.J=0,!us){for(or=-255;255>=or;++or)As[255+or]=0>or?-or:or;for(or=-1020;1020>=or;++or)il[1020+or]=-128>or?-128:127<or?127:or;for(or=-112;112>=or;++or)Nl[112+or]=-16>or?-16:15<or?15:or;for(or=-255;510>=or;++or)Fl[255+or]=0>or?0:255<or?255:or;us=1}m=It,v=eu,q=Q,ne=me,ve=Je,T=ac,De=ue,tt=We,dt=nr,tr=Pr,ar=bt,Fr=Ft,fn=$r,Cn=Tn,Bn=ki,In=ws,gn=Yn,Ui=Wn,su[0]=sn,su[1]=qt,su[2]=Tr,su[3]=rn,su[4]=ii,su[5]=sa,su[6]=Ri,su[7]=hi,su[8]=as,su[9]=ai,sc[0]=Cr,sc[1]=Vr,sc[2]=Wr,sc[3]=zr,sc[4]=Hn,sc[5]=_i,sc[6]=Rn,la[0]=Xi,la[1]=Qt,la[2]=_s,la[3]=xi,la[4]=Fa,la[5]=tu,la[6]=xs,or=1}else or=0}or&&(or=(function(Bi,vo){for(Bi.M=0;Bi.M<Bi.Va;++Bi.M){var Ci,zn=Bi.Jc[Bi.M&Bi.Xb],pn=Bi.m,so=Bi;for(Ci=0;Ci<so.za;++Ci){var vi=pn,Wi=so,ta=Wi.Ac,bi=Wi.Bc+4*Ci,al=Wi.zc,za=Wi.ya[Wi.aa+Ci];if(Wi.Qa.Bb?za.$b=Ke(vi,Wi.Pa.jb[0])?2+Ke(vi,Wi.Pa.jb[2]):Ke(vi,Wi.Pa.jb[1]):za.$b=0,Wi.kc&&(za.Ad=Ke(vi,Wi.Bd)),za.Za=!Ke(vi,145)+0,za.Za){var Ko=za.Ob,cs=0;for(Wi=0;4>Wi;++Wi){var Io,Yi=al[0+Wi];for(Io=0;4>Io;++Io){Yi=Km[ta[bi+Io]][Yi];for(var ua=Lf[Ke(vi,Yi[0])];0<ua;)ua=Lf[2*ua+Ke(vi,Yi[ua])];Yi=-ua,ta[bi+Io]=Yi}n(Ko,cs,ta,bi,4),cs+=4,al[0+Wi]=Yi}}else Yi=Ke(vi,156)?Ke(vi,128)?1:3:Ke(vi,163)?2:0,za.Ob[0]=Yi,i(ta,bi,Yi,4),i(al,0,Yi,4);za.Dd=Ke(vi,142)?Ke(vi,114)?Ke(vi,183)?1:3:2:0}if(so.m.Ka)return Ea(Bi,7,"Premature end-of-partition0 encountered.");for(;Bi.ja<Bi.za;++Bi.ja){if(so=zn,vi=(pn=Bi).rb[pn.sb-1],ta=pn.rb[pn.sb+pn.ja],Ci=pn.ya[pn.aa+pn.ja],bi=pn.kc?Ci.Ad:0)vi.la=ta.la=0,Ci.Za||(vi.Na=ta.Na=0),Ci.Hc=0,Ci.Gc=0,Ci.ia=0;else{var lo,Di;if(vi=ta,ta=so,bi=pn.Pa.Xc,al=pn.ya[pn.aa+pn.ja],za=pn.pb[al.$b],Wi=al.ad,Ko=0,cs=pn.rb[pn.sb-1],Yi=Io=0,i(Wi,Ko,0,384),al.Za)var Po=0,yn=bi[3];else{ua=o(16);var mn=vi.Na+cs.Na;if(mn=kf(ta,bi[1],mn,za.Eb,0,ua,0),vi.Na=cs.Na=(0<mn)+0,1<mn)m(ua,0,Wi,Ko);else{var ds=ua[0]+3>>3;for(ua=0;256>ua;ua+=16)Wi[Ko+ua]=ds}Po=1,yn=bi[0]}var ca=15&vi.la,bo=15&cs.la;for(ua=0;4>ua;++ua){var Ma=1&bo;for(ds=Di=0;4>ds;++ds)ca=ca>>1|(Ma=(mn=kf(ta,yn,mn=Ma+(1&ca),za.Sc,Po,Wi,Ko))>Po)<<7,Di=Di<<2|(3<mn?3:1<mn?2:Wi[Ko+0]!=0),Ko+=16;ca>>=4,bo=bo>>1|Ma<<7,Io=(Io<<8|Di)>>>0}for(yn=ca,Po=bo>>4,lo=0;4>lo;lo+=2){for(Di=0,ca=vi.la>>4+lo,bo=cs.la>>4+lo,ua=0;2>ua;++ua){for(Ma=1&bo,ds=0;2>ds;++ds)mn=Ma+(1&ca),ca=ca>>1|(Ma=0<(mn=kf(ta,bi[2],mn,za.Qc,0,Wi,Ko)))<<3,Di=Di<<2|(3<mn?3:1<mn?2:Wi[Ko+0]!=0),Ko+=16;ca>>=2,bo=bo>>1|Ma<<5}Yi|=Di<<4*lo,yn|=ca<<4<<lo,Po|=(240&bo)<<lo}vi.la=yn,cs.la=Po,al.Hc=Io,al.Gc=Yi,al.ia=43690&Yi?0:za.ia,bi=!(Io|Yi)}if(0<pn.L&&(pn.wa[pn.Y+pn.ja]=pn.gd[Ci.$b][Ci.Za],pn.wa[pn.Y+pn.ja].La|=!bi),so.Ka)return Ea(Bi,7,"Premature end-of-file encountered.")}if(No(Bi),pn=vo,so=1,Ci=(zn=Bi).D,vi=0<zn.L&&zn.M>=zn.zb&&zn.M<=zn.Va,zn.Aa==0)t:{if(Ci.M=zn.M,Ci.uc=vi,Vs(zn,Ci),so=1,Ci=(Di=zn.D).Nb,vi=(Yi=Pu[zn.L])*zn.R,ta=Yi/2*zn.B,ua=16*Ci*zn.R,ds=8*Ci*zn.B,bi=zn.sa,al=zn.ta-vi+ua,za=zn.qa,Wi=zn.ra-ta+ds,Ko=zn.Ha,cs=zn.Ia-ta+ds,bo=(ca=Di.M)==0,Io=ca>=zn.Va-1,zn.Aa==2&&Vs(zn,Di),Di.uc)for(Ma=(mn=zn).D.M,t(mn.D.uc),Di=mn.yb;Di<mn.Hb;++Di){Po=Di,yn=Ma;var ja=(ol=(zo=mn).D).Nb;lo=zo.R;var ol=ol.wa[ol.Y+Po],_l=zo.sa,xl=zo.ta+16*ja*lo+16*Po,zl=ol.dd,da=ol.tc;if(da!=0)if(t(3<=da),zo.L==1)0<Po&&In(_l,xl,lo,da+4),ol.La&&Ui(_l,xl,lo,da),0<yn&&Bn(_l,xl,lo,da+4),ol.La&&gn(_l,xl,lo,da);else{var Hi=zo.B,ra=zo.qa,jl=zo.ra+8*ja*Hi+8*Po,ql=zo.Ha,zo=zo.Ia+8*ja*Hi+8*Po;ja=ol.ld,0<Po&&(tt(_l,xl,lo,da+4,zl,ja),tr(ra,jl,ql,zo,Hi,da+4,zl,ja)),ol.La&&(Fr(_l,xl,lo,da,zl,ja),Cn(ra,jl,ql,zo,Hi,da,zl,ja)),0<yn&&(De(_l,xl,lo,da+4,zl,ja),dt(ra,jl,ql,zo,Hi,da+4,zl,ja)),ol.La&&(ar(_l,xl,lo,da,zl,ja),fn(ra,jl,ql,zo,Hi,da,zl,ja))}}if(zn.ia&&alert("todo:DitherRow"),pn.put!=null){if(Di=16*ca,ca=16*(ca+1),bo?(pn.y=zn.sa,pn.O=zn.ta+ua,pn.f=zn.qa,pn.N=zn.ra+ds,pn.ea=zn.Ha,pn.W=zn.Ia+ds):(Di-=Yi,pn.y=bi,pn.O=al,pn.f=za,pn.N=Wi,pn.ea=Ko,pn.W=cs),Io||(ca-=Yi),ca>pn.o&&(ca=pn.o),pn.F=null,pn.J=null,zn.Fa!=null&&0<zn.Fa.length&&Di<ca&&(pn.J=Ia(zn,pn,Di,ca-Di),pn.F=zn.mb,pn.F==null&&pn.F.length==0)){so=Ea(zn,3,"Could not decode alpha data.");break t}Di<pn.j&&(Yi=pn.j-Di,Di=pn.j,t(!(1&Yi)),pn.O+=zn.R*Yi,pn.N+=zn.B*(Yi>>1),pn.W+=zn.B*(Yi>>1),pn.F!=null&&(pn.J+=pn.width*Yi)),Di<ca&&(pn.O+=pn.v,pn.N+=pn.v>>1,pn.W+=pn.v>>1,pn.F!=null&&(pn.J+=pn.v),pn.ka=Di-pn.j,pn.U=pn.va-pn.v,pn.T=ca-Di,so=pn.put(pn))}Ci+1!=zn.Ic||Io||(n(zn.sa,zn.ta-vi,bi,al+16*zn.R,vi),n(zn.qa,zn.ra-ta,za,Wi+8*zn.B,ta),n(zn.Ha,zn.Ia-ta,Ko,cs+8*zn.B,ta))}if(!so)return Ea(Bi,6,"Output aborted.")}return 1})(wt,Pt)),Pt.bc!=null&&Pt.bc(Pt),or&=1}return or?(wt.cb=0,or):0})(G,Pe)||(J=G.a)}}else J=G.a}J==0&&nt.Oa!=null&&nt.Oa.fd&&(J=Qa(nt.ba))}nt=J}Qe=nt!=0?null:11>Qe?lt.f.RGBA.eb:lt.f.kb.y}else Qe=null;return Qe};var uu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(Z,oe){for(var re="",H=0;H<4;H++)re+=String.fromCharCode(Z[oe++]);return re}function g(Z,oe){return Z[oe+0]|Z[oe+1]<<8}function b(Z,oe){return(Z[oe+0]|Z[oe+1]<<8|Z[oe+2]<<16)>>>0}function S(Z,oe){return(Z[oe+0]|Z[oe+1]<<8|Z[oe+2]<<16|Z[oe+3]<<24)>>>0}new f;var _=[0],P=[0],k=[],M=new f,D=e,F=(function(Z,oe){var re={},H=0,ae=!1,se=0,de=0;if(re.frames=[],!(function(he,Ee){for(var we=0;we<4;we++)if(he[Ee+we]!="RIFF".charCodeAt(we))return!0;return!1})(Z,oe)){for(S(Z,oe+=4),oe+=8;oe<Z.length;){var fe=p(Z,oe),Le=S(Z,oe+=4);oe+=4;var ye=Le+(1&Le);switch(fe){case"VP8 ":case"VP8L":re.frames[H]===void 0&&(re.frames[H]={}),(Re=re.frames[H]).src_off=ae?de:oe-8,Re.src_size=se+Le+8,H++,ae&&(ae=!1,se=0,de=0);break;case"VP8X":(Re=re.header={}).feature_flags=Z[oe];var xe=oe+4;Re.canvas_width=1+b(Z,xe),xe+=3,Re.canvas_height=1+b(Z,xe),xe+=3;break;case"ALPH":ae=!0,se=ye+8,de=oe-8;break;case"ANIM":(Re=re.header).bgcolor=S(Z,oe),xe=oe+4,Re.loop_count=g(Z,xe),xe+=2;break;case"ANMF":var Se,Re;(Re=re.frames[H]={}).offset_x=2*b(Z,oe),oe+=3,Re.offset_y=2*b(Z,oe),oe+=3,Re.width=1+b(Z,oe),oe+=3,Re.height=1+b(Z,oe),oe+=3,Re.duration=b(Z,oe),oe+=3,Se=Z[oe++],Re.dispose=1&Se,Re.blend=Se>>1&1}fe!="ANMF"&&(oe+=ye)}return re}})(D,0);F.response=D,F.rgbaoutput=!0,F.dataurl=!1;var B=F.header?F.header:null,N=F.frames?F.frames:null;if(B){B.loop_counter=B.loop_count,_=[B.canvas_height],P=[B.canvas_width];for(var $=0;$<N.length&&N[$].blend!=0;$++);}var V=N[0],U=M.WebPDecodeRGBA(D,V.src_off,V.src_size,P,_);V.rgba=U,V.imgwidth=P[0],V.imgheight=_[0];for(var X=0;X<P[0]*_[0]*4;X++)k[X]=U[X];return this.width=P,this.height=_,this.data=k,this}(function(e){var t,r,n,i,o,u,a,f,p,g=function(he){return he=he||{},this.isStrokeTransparent=he.isStrokeTransparent||!1,this.strokeOpacity=he.strokeOpacity||1,this.strokeStyle=he.strokeStyle||"#000000",this.fillStyle=he.fillStyle||"#000000",this.isFillTransparent=he.isFillTransparent||!1,this.fillOpacity=he.fillOpacity||1,this.font=he.font||"10px sans-serif",this.textBaseline=he.textBaseline||"alphabetic",this.textAlign=he.textAlign||"left",this.lineWidth=he.lineWidth||1,this.lineJoin=he.lineJoin||"miter",this.lineCap=he.lineCap||"butt",this.path=he.path||[],this.transform=he.transform!==void 0?he.transform.clone():new f,this.globalCompositeOperation=he.globalCompositeOperation||"normal",this.globalAlpha=he.globalAlpha||1,this.clip_path=he.clip_path||[],this.currentPoint=he.currentPoint||new u,this.miterLimit=he.miterLimit||10,this.lastPoint=he.lastPoint||new u,this.lineDashOffset=he.lineDashOffset||0,this.lineDash=he.lineDash||[],this.margin=he.margin||[0,0,0,0],this.prevPageLastElemOffset=he.prevPageLastElemOffset||0,this.ignoreClearRect=typeof he.ignoreClearRect!="boolean"||he.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new b(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,a=this.internal.Rectangle,f=this.internal.Matrix,p=new g}]);var b=function(he){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ee=he;Object.defineProperty(this,"pdf",{get:function(){return Ee}});var we=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return we},set:function(st){we=!!st}});var Ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ne},set:function(st){Ne=!!st}});var Fe=0;Object.defineProperty(this,"posX",{get:function(){return Fe},set:function(st){isNaN(st)||(Fe=st)}});var Xe=0;Object.defineProperty(this,"posY",{get:function(){return Xe},set:function(st){isNaN(st)||(Xe=st)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(st){var $e;typeof st=="number"?$e=[st,st,st,st]:(($e=new Array(4))[0]=st[0],$e[1]=st.length>=2?st[1]:$e[0],$e[2]=st.length>=3?st[2]:$e[0],$e[3]=st.length>=4?st[3]:$e[1]),p.margin=$e}});var Be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Be},set:function(st){Be=st}});var ot=0;Object.defineProperty(this,"lastBreak",{get:function(){return ot},set:function(st){ot=st}});var Ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ke},set:function(st){Ke=st}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(st){st instanceof g&&(p=st)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(st){p.path=st}});var it=[];Object.defineProperty(this,"ctxStack",{get:function(){return it},set:function(st){it=st}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(st){var $e;$e=S(st),this.ctx.fillStyle=$e.style,this.ctx.isFillTransparent=$e.a===0,this.ctx.fillOpacity=$e.a,this.pdf.setFillColor($e.r,$e.g,$e.b,{a:$e.a}),this.pdf.setTextColor($e.r,$e.g,$e.b,{a:$e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(st){var $e=S(st);this.ctx.strokeStyle=$e.style,this.ctx.isStrokeTransparent=$e.a===0,this.ctx.strokeOpacity=$e.a,$e.a===0?this.pdf.setDrawColor(255,255,255):($e.a,this.pdf.setDrawColor($e.r,$e.g,$e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(st){["butt","round","square"].indexOf(st)!==-1&&(this.ctx.lineCap=st,this.pdf.setLineCap(st))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(st){isNaN(st)||(this.ctx.lineWidth=st,this.pdf.setLineWidth(st))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(st){["bevel","round","miter"].indexOf(st)!==-1&&(this.ctx.lineJoin=st,this.pdf.setLineJoin(st))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(st){isNaN(st)||(this.ctx.miterLimit=st,this.pdf.setMiterLimit(st))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(st){this.ctx.textBaseline=st}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(st){["right","end","center","left","start"].indexOf(st)!==-1&&(this.ctx.textAlign=st)}});var ke=null,Nt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Nt},set:function(st){ke=null,Nt=st}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(st){var $e;if(this.ctx.font=st,($e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(st))!==null){var Zt=$e[1];$e[2];var $t=$e[3],Wt=$e[4];$e[5];var ht=$e[6],sr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Wt)[2];Wt=Math.floor(sr==="px"?parseFloat(Wt)*this.pdf.internal.scaleFactor:sr==="em"?parseFloat(Wt)*this.pdf.getFontSize():parseFloat(Wt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Wt);var cr=(function(Ge){var He,Dt,St=[],yt=Ge.trim();if(yt==="")return K5;if(yt in sN)return[sN[yt]];for(;yt!=="";){switch(Dt=null,He=(yt=uN(yt)).charAt(0)){case'"':case"'":Dt=Yue(yt.substring(1),He);break;default:Dt=Zue(yt)}if(Dt===null||(St.push(Dt[0]),(yt=uN(Dt[1]))!==""&&yt.charAt(0)!==","))return K5;yt=yt.replace(/^,/,"")}return St})(ht);if(this.fontFaces){var ir=(function(Ge,He){if(ke===null){var Dt=(function(St){var yt=[];return Object.keys(St).forEach(function(ct){St[ct].forEach(function(Jt){var Vt=null;switch(Jt){case"bold":Vt={family:ct,weight:"bold"};break;case"italic":Vt={family:ct,style:"italic"};break;case"bolditalic":Vt={family:ct,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:ct}}Vt!==null&&(Vt.ref={name:ct,style:Jt},yt.push(Vt))})}),yt})(Ge.getFontList());ke=(function(St){for(var yt={},ct=0;ct<St.length;++ct){var Jt=Z5(St[ct]),Vt=Jt.family,xr=Jt.stretch,_r=Jt.style,Nr=Jt.weight;yt[Vt]=yt[Vt]||{},yt[Vt][xr]=yt[Vt][xr]||{},yt[Vt][xr][_r]=yt[Vt][xr][_r]||{},yt[Vt][xr][_r][Nr]=Jt}return yt})(Dt.concat(He))}return ke})(this.pdf,this.fontFaces),br=cr.map(function(Ge){return{family:Ge,stretch:"normal",weight:$t,style:Zt}}),yr=(function(Ge,He,Dt){for(var St=(Dt=Dt||{}).defaultFontFamily||"times",yt=Object.assign({},Xue,Dt.genericFontFamilies||{}),ct=null,Jt=null,Vt=0;Vt<He.length;++Vt)if(yt[(ct=Z5(He[Vt])).family]&&(ct.family=yt[ct.family]),Ge.hasOwnProperty(ct.family)){Jt=Ge[ct.family];break}if(!(Jt=Jt||Ge[St]))throw new Error("Could not find a font-family for the rule '"+lN(ct)+"' and default family '"+St+"'.");if(Jt=(function(xr,_r){if(_r[xr])return _r[xr];var Nr=E3[xr],tn=Nr<=E3.normal?-1:1,Lr=oN(_r,Jq,Nr,tn);if(!Lr)throw new Error("Could not find a matching font-stretch value for "+xr);return Lr})(ct.stretch,Jt),Jt=(function(xr,_r){if(_r[xr])return _r[xr];for(var Nr=Kq[xr],tn=0;tn<Nr.length;++tn)if(_r[Nr[tn]])return _r[Nr[tn]];throw new Error("Could not find a matching font-style for "+xr)})(ct.style,Jt),!(Jt=(function(xr,_r){if(_r[xr])return _r[xr];if(xr===400&&_r[500])return _r[500];if(xr===500&&_r[400])return _r[400];var Nr=Wue[xr],tn=oN(_r,Qq,Nr,xr<400?-1:1);if(!tn)throw new Error("Could not find a matching font-weight for value "+xr);return tn})(ct.weight,Jt)))throw new Error("Failed to resolve a font for the rule '"+lN(ct)+"'.");return Jt})(ir,br);this.pdf.setFont(yr.ref.name,yr.ref.style)}else{var Kt="";($t==="bold"||parseInt($t,10)>=700||Zt==="bold")&&(Kt="bold"),Zt==="italic"&&(Kt+="italic"),Kt.length===0&&(Kt="normal");for(var at="",Ae={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_e=0;_e<cr.length;_e++){if(this.pdf.internal.getFont(cr[_e],Kt,{noFallback:!0,disableWarning:!0})!==void 0){at=cr[_e];break}if(Kt==="bolditalic"&&this.pdf.internal.getFont(cr[_e],"bold",{noFallback:!0,disableWarning:!0})!==void 0)at=cr[_e],Kt="bold";else if(this.pdf.internal.getFont(cr[_e],"normal",{noFallback:!0,disableWarning:!0})!==void 0){at=cr[_e],Kt="normal";break}}if(at===""){for(var je=0;je<cr.length;je++)if(Ae[cr[je]]){at=Ae[cr[je]];break}}at=at===""?"Times":at,this.pdf.setFont(at,Kt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(st){this.ctx.globalCompositeOperation=st}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(st){this.ctx.globalAlpha=st}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(st){this.ctx.lineDashOffset=st,Re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(st){this.ctx.lineDash=st,Re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(st){this.ctx.ignoreClearRect=!!st}})};b.prototype.setLineDash=function(he){this.lineDash=he},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){N.call(this,"fill",!1)},b.prototype.stroke=function(){N.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(he,Ee){if(isNaN(he)||isNaN(Ee))throw po.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var we=this.ctx.transform.applyToPoint(new u(he,Ee));this.path.push({type:"mt",x:we.x,y:we.y}),this.ctx.lastPoint=new u(he,Ee)},b.prototype.closePath=function(){var he=new u(0,0),Ee=0;for(Ee=this.path.length-1;Ee!==-1;Ee--)if(this.path[Ee].type==="begin"&&Ka(this.path[Ee+1])==="object"&&typeof this.path[Ee+1].x=="number"){he=new u(this.path[Ee+1].x,this.path[Ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(he.x,he.y)},b.prototype.lineTo=function(he,Ee){if(isNaN(he)||isNaN(Ee))throw po.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var we=this.ctx.transform.applyToPoint(new u(he,Ee));this.path.push({type:"lt",x:we.x,y:we.y}),this.ctx.lastPoint=new u(we.x,we.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},b.prototype.quadraticCurveTo=function(he,Ee,we,Ne){if(isNaN(we)||isNaN(Ne)||isNaN(he)||isNaN(Ee))throw po.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Fe=this.ctx.transform.applyToPoint(new u(we,Ne)),Xe=this.ctx.transform.applyToPoint(new u(he,Ee));this.path.push({type:"qct",x1:Xe.x,y1:Xe.y,x:Fe.x,y:Fe.y}),this.ctx.lastPoint=new u(Fe.x,Fe.y)},b.prototype.bezierCurveTo=function(he,Ee,we,Ne,Fe,Xe){if(isNaN(Fe)||isNaN(Xe)||isNaN(he)||isNaN(Ee)||isNaN(we)||isNaN(Ne))throw po.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Be=this.ctx.transform.applyToPoint(new u(Fe,Xe)),ot=this.ctx.transform.applyToPoint(new u(he,Ee)),Ke=this.ctx.transform.applyToPoint(new u(we,Ne));this.path.push({type:"bct",x1:ot.x,y1:ot.y,x2:Ke.x,y2:Ke.y,x:Be.x,y:Be.y}),this.ctx.lastPoint=new u(Be.x,Be.y)},b.prototype.arc=function(he,Ee,we,Ne,Fe,Xe){if(isNaN(he)||isNaN(Ee)||isNaN(we)||isNaN(Ne)||isNaN(Fe))throw po.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Xe=!!Xe,!this.ctx.transform.isIdentity){var Be=this.ctx.transform.applyToPoint(new u(he,Ee));he=Be.x,Ee=Be.y;var ot=this.ctx.transform.applyToPoint(new u(0,we)),Ke=this.ctx.transform.applyToPoint(new u(0,0));we=Math.sqrt(Math.pow(ot.x-Ke.x,2)+Math.pow(ot.y-Ke.y,2))}Math.abs(Fe-Ne)>=2*Math.PI&&(Ne=0,Fe=2*Math.PI),this.path.push({type:"arc",x:he,y:Ee,radius:we,startAngle:Ne,endAngle:Fe,counterclockwise:Xe})},b.prototype.arcTo=function(he,Ee,we,Ne,Fe){throw new Error("arcTo not implemented.")},b.prototype.rect=function(he,Ee,we,Ne){if(isNaN(he)||isNaN(Ee)||isNaN(we)||isNaN(Ne))throw po.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(he,Ee),this.lineTo(he+we,Ee),this.lineTo(he+we,Ee+Ne),this.lineTo(he,Ee+Ne),this.lineTo(he,Ee),this.lineTo(he+we,Ee),this.lineTo(he,Ee)},b.prototype.fillRect=function(he,Ee,we,Ne){if(isNaN(he)||isNaN(Ee)||isNaN(we)||isNaN(Ne))throw po.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var Fe={};this.lineCap!=="butt"&&(Fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(he,Ee,we,Ne),this.fill(),Fe.hasOwnProperty("lineCap")&&(this.lineCap=Fe.lineCap),Fe.hasOwnProperty("lineJoin")&&(this.lineJoin=Fe.lineJoin)}},b.prototype.strokeRect=function(he,Ee,we,Ne){if(isNaN(he)||isNaN(Ee)||isNaN(we)||isNaN(Ne))throw po.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(he,Ee,we,Ne),this.stroke())},b.prototype.clearRect=function(he,Ee,we,Ne){if(isNaN(he)||isNaN(Ee)||isNaN(we)||isNaN(Ne))throw po.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(he,Ee,we,Ne))},b.prototype.save=function(he){he=typeof he!="boolean"||he;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,we=0;we<this.pdf.internal.getNumberOfPages();we++)this.pdf.setPage(we+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ee),he){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ne=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ne}},b.prototype.restore=function(he){he=typeof he!="boolean"||he;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,we=0;we<this.pdf.internal.getNumberOfPages();we++)this.pdf.setPage(we+1),this.pdf.internal.out("Q");this.pdf.setPage(Ee),he&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(he){var Ee,we,Ne,Fe;if(he.isCanvasGradient===!0&&(he=he.getColor()),!he)return{r:0,g:0,b:0,a:0,style:he};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(he))Ee=0,we=0,Ne=0,Fe=0;else{var Xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(he);if(Xe!==null)Ee=parseInt(Xe[1]),we=parseInt(Xe[2]),Ne=parseInt(Xe[3]),Fe=1;else if((Xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(he))!==null)Ee=parseInt(Xe[1]),we=parseInt(Xe[2]),Ne=parseInt(Xe[3]),Fe=parseFloat(Xe[4]);else{if(Fe=1,typeof he=="string"&&he.charAt(0)!=="#"){var Be=new Gq(he);he=Be.ok?Be.toHex():"#000000"}he.length===4?(Ee=he.substring(1,2),Ee+=Ee,we=he.substring(2,3),we+=we,Ne=he.substring(3,4),Ne+=Ne):(Ee=he.substring(1,3),we=he.substring(3,5),Ne=he.substring(5,7)),Ee=parseInt(Ee,16),we=parseInt(we,16),Ne=parseInt(Ne,16)}}return{r:Ee,g:we,b:Ne,a:Fe,style:he}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(he,Ee,we,Ne){if(isNaN(Ee)||isNaN(we)||typeof he!="string")throw po.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ne=isNaN(Ne)?void 0:Ne,!_.call(this)){var Fe=ye(this.ctx.transform.rotation),Xe=this.ctx.transform.scaleX;H.call(this,{text:he,x:Ee,y:we,scale:Xe,angle:Fe,align:this.textAlign,maxWidth:Ne})}},b.prototype.strokeText=function(he,Ee,we,Ne){if(isNaN(Ee)||isNaN(we)||typeof he!="string")throw po.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){Ne=isNaN(Ne)?void 0:Ne;var Fe=ye(this.ctx.transform.rotation),Xe=this.ctx.transform.scaleX;H.call(this,{text:he,x:Ee,y:we,scale:Xe,renderingMode:"stroke",angle:Fe,align:this.textAlign,maxWidth:Ne})}},b.prototype.measureText=function(he){if(typeof he!="string")throw po.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ee=this.pdf,we=this.pdf.internal.scaleFactor,Ne=Ee.internal.getFontSize(),Fe=Ee.getStringUnitWidth(he)*Ne/Ee.internal.scaleFactor;return new function(Xe){var Be=(Xe=Xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Be}}),this}({width:Fe*=Math.round(96*we/72*1e4)/1e4})},b.prototype.scale=function(he,Ee){if(isNaN(he)||isNaN(Ee))throw po.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var we=new f(he,0,0,Ee,0,0);this.ctx.transform=this.ctx.transform.multiply(we)},b.prototype.rotate=function(he){if(isNaN(he))throw po.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ee=new f(Math.cos(he),Math.sin(he),-Math.sin(he),Math.cos(he),0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},b.prototype.translate=function(he,Ee){if(isNaN(he)||isNaN(Ee))throw po.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var we=new f(1,0,0,1,he,Ee);this.ctx.transform=this.ctx.transform.multiply(we)},b.prototype.transform=function(he,Ee,we,Ne,Fe,Xe){if(isNaN(he)||isNaN(Ee)||isNaN(we)||isNaN(Ne)||isNaN(Fe)||isNaN(Xe))throw po.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Be=new f(he,Ee,we,Ne,Fe,Xe);this.ctx.transform=this.ctx.transform.multiply(Be)},b.prototype.setTransform=function(he,Ee,we,Ne,Fe,Xe){he=isNaN(he)?1:he,Ee=isNaN(Ee)?0:Ee,we=isNaN(we)?0:we,Ne=isNaN(Ne)?1:Ne,Fe=isNaN(Fe)?0:Fe,Xe=isNaN(Xe)?0:Xe,this.ctx.transform=new f(he,Ee,we,Ne,Fe,Xe)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(he,Ee,we,Ne,Fe,Xe,Be,ot,Ke){var it=this.pdf.getImageProperties(he),ke=1,Nt=1,st=1,$e=1;Ne!==void 0&&ot!==void 0&&(st=ot/Ne,$e=Ke/Fe,ke=it.width/Ne*ot/Ne,Nt=it.height/Fe*Ke/Fe),Xe===void 0&&(Xe=Ee,Be=we,Ee=0,we=0),Ne!==void 0&&ot===void 0&&(ot=Ne,Ke=Fe),Ne===void 0&&ot===void 0&&(ot=it.width,Ke=it.height);for(var Zt,$t=this.ctx.transform.decompose(),Wt=ye($t.rotate.shx),ht=new f,sr=(ht=(ht=(ht=ht.multiply($t.translate)).multiply($t.skew)).multiply($t.scale)).applyToRectangle(new a(Xe-Ee*st,Be-we*$e,Ne*ke,Fe*Nt)),cr=M.call(this,sr),ir=[],br=0;br<cr.length;br+=1)ir.indexOf(cr[br])===-1&&ir.push(cr[br]);if(B(ir),this.autoPaging)for(var yr=ir[0],Kt=ir[ir.length-1],at=yr;at<Kt+1;at++){this.pdf.setPage(at);var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_e=at===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],He=at===1?0:je+(at-2)*Ge;if(this.ctx.clip_path.length!==0){var Dt=this.path;Zt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Zt,this.posX+this.margin[3],-He+_e+this.ctx.prevPageLastElemOffset),$.call(this,"fill",!0),this.path=Dt}var St=JSON.parse(JSON.stringify(sr));St=F([St],this.posX+this.margin[3],-He+_e+this.ctx.prevPageLastElemOffset)[0];var yt=(at>yr||at<Kt)&&k.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,Ge,null).clip().discardPath()),this.pdf.addImage(he,"JPEG",St.x,St.y,St.w,St.h,null,null,Wt),yt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(he,"JPEG",sr.x,sr.y,sr.w,sr.h,null,null,Wt)};var M=function(he,Ee,we){var Ne=[];Ee=Ee||this.pdf.internal.pageSize.width,we=we||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Fe=this.posY+this.ctx.prevPageLastElemOffset;switch(he.type){default:case"mt":case"lt":Ne.push(Math.floor((he.y+Fe)/we)+1);break;case"arc":Ne.push(Math.floor((he.y+Fe-he.radius)/we)+1),Ne.push(Math.floor((he.y+Fe+he.radius)/we)+1);break;case"qct":var Xe=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,he.x1,he.y1,he.x,he.y);Ne.push(Math.floor((Xe.y+Fe)/we)+1),Ne.push(Math.floor((Xe.y+Xe.h+Fe)/we)+1);break;case"bct":var Be=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,he.x1,he.y1,he.x2,he.y2,he.x,he.y);Ne.push(Math.floor((Be.y+Fe)/we)+1),Ne.push(Math.floor((Be.y+Be.h+Fe)/we)+1);break;case"rect":Ne.push(Math.floor((he.y+Fe)/we)+1),Ne.push(Math.floor((he.y+he.h+Fe)/we)+1)}for(var ot=0;ot<Ne.length;ot+=1)for(;this.pdf.internal.getNumberOfPages()<Ne[ot];)D.call(this);return Ne},D=function(){var he=this.fillStyle,Ee=this.strokeStyle,we=this.font,Ne=this.lineCap,Fe=this.lineWidth,Xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=he,this.strokeStyle=Ee,this.font=we,this.lineCap=Ne,this.lineWidth=Fe,this.lineJoin=Xe},F=function(he,Ee,we){for(var Ne=0;Ne<he.length;Ne++)switch(he[Ne].type){case"bct":he[Ne].x2+=Ee,he[Ne].y2+=we;case"qct":he[Ne].x1+=Ee,he[Ne].y1+=we;default:he[Ne].x+=Ee,he[Ne].y+=we}return he},B=function(he){return he.sort(function(Ee,we){return Ee-we})},N=function(he,Ee){for(var we,Ne,Fe=this.fillStyle,Xe=this.strokeStyle,Be=this.lineCap,ot=this.lineWidth,Ke=Math.abs(ot*this.ctx.transform.scaleX),it=this.lineJoin,ke=JSON.parse(JSON.stringify(this.path)),Nt=JSON.parse(JSON.stringify(this.path)),st=[],$e=0;$e<Nt.length;$e++)if(Nt[$e].x!==void 0)for(var Zt=M.call(this,Nt[$e]),$t=0;$t<Zt.length;$t+=1)st.indexOf(Zt[$t])===-1&&st.push(Zt[$t]);for(var Wt=0;Wt<st.length;Wt++)for(;this.pdf.internal.getNumberOfPages()<st[Wt];)D.call(this);if(B(st),this.autoPaging)for(var ht=st[0],sr=st[st.length-1],cr=ht;cr<sr+1;cr++){this.pdf.setPage(cr),this.fillStyle=Fe,this.strokeStyle=Xe,this.lineCap=Be,this.lineWidth=Ke,this.lineJoin=it;var ir=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],br=cr===1?this.posY+this.margin[0]:this.margin[0],yr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=cr===1?0:yr+(cr-2)*Kt;if(this.ctx.clip_path.length!==0){var Ae=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(we,this.posX+this.margin[3],-at+br+this.ctx.prevPageLastElemOffset),$.call(this,he,!0),this.path=Ae}if(Ne=JSON.parse(JSON.stringify(ke)),this.path=F(Ne,this.posX+this.margin[3],-at+br+this.ctx.prevPageLastElemOffset),Ee===!1||cr===0){var _e=(cr>ht||cr<sr)&&k.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ir,Kt,null).clip().discardPath()),$.call(this,he,Ee),_e&&this.pdf.restoreGraphicsState()}this.lineWidth=ot}else this.lineWidth=Ke,$.call(this,he,Ee),this.lineWidth=ot;this.path=ke},$=function(he,Ee){if((he!=="stroke"||Ee||!P.call(this))&&(he==="stroke"||Ee||!_.call(this))){for(var we,Ne,Fe=[],Xe=this.path,Be=0;Be<Xe.length;Be++){var ot=Xe[Be];switch(ot.type){case"begin":Fe.push({begin:!0});break;case"close":Fe.push({close:!0});break;case"mt":Fe.push({start:ot,deltas:[],abs:[]});break;case"lt":var Ke=Fe.length;if(Xe[Be-1]&&!isNaN(Xe[Be-1].x)&&(we=[ot.x-Xe[Be-1].x,ot.y-Xe[Be-1].y],Ke>0)){for(;Ke>=0;Ke--)if(Fe[Ke-1].close!==!0&&Fe[Ke-1].begin!==!0){Fe[Ke-1].deltas.push(we),Fe[Ke-1].abs.push(ot);break}}break;case"bct":we=[ot.x1-Xe[Be-1].x,ot.y1-Xe[Be-1].y,ot.x2-Xe[Be-1].x,ot.y2-Xe[Be-1].y,ot.x-Xe[Be-1].x,ot.y-Xe[Be-1].y],Fe[Fe.length-1].deltas.push(we);break;case"qct":var it=Xe[Be-1].x+2/3*(ot.x1-Xe[Be-1].x),ke=Xe[Be-1].y+2/3*(ot.y1-Xe[Be-1].y),Nt=ot.x+2/3*(ot.x1-ot.x),st=ot.y+2/3*(ot.y1-ot.y),$e=ot.x,Zt=ot.y;we=[it-Xe[Be-1].x,ke-Xe[Be-1].y,Nt-Xe[Be-1].x,st-Xe[Be-1].y,$e-Xe[Be-1].x,Zt-Xe[Be-1].y],Fe[Fe.length-1].deltas.push(we);break;case"arc":Fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(Fe[Fe.length-1].abs)&&Fe[Fe.length-1].abs.push(ot)}}Ne=Ee?null:he==="stroke"?"stroke":"fill";for(var $t=!1,Wt=0;Wt<Fe.length;Wt++)if(Fe[Wt].arc)for(var ht=Fe[Wt].abs,sr=0;sr<ht.length;sr++){var cr=ht[sr];cr.type==="arc"?X.call(this,cr.x,cr.y,cr.radius,cr.startAngle,cr.endAngle,cr.counterclockwise,void 0,Ee,!$t):ae.call(this,cr.x,cr.y),$t=!0}else if(Fe[Wt].close===!0)this.pdf.internal.out("h"),$t=!1;else if(Fe[Wt].begin!==!0){var ir=Fe[Wt].start.x,br=Fe[Wt].start.y;se.call(this,Fe[Wt].deltas,ir,br),$t=!0}Ne&&Z.call(this,Ne),Ee&&oe.call(this)}},V=function(he){var Ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,we=Ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return he-we;case"top":return he+Ee-we;case"hanging":return he+Ee-2*we;case"middle":return he+Ee/2-we;default:return he}},U=function(he){return he+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var he=function(){};return he.colorStops=[],he.addColorStop=function(Ee,we){this.colorStops.push([Ee,we])},he.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},he.isCanvasGradient=!0,he},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var X=function(he,Ee,we,Ne,Fe,Xe,Be,ot,Ke){for(var it=fe.call(this,we,Ne,Fe,Xe),ke=0;ke<it.length;ke++){var Nt=it[ke];ke===0&&(Ke?re.call(this,Nt.x1+he,Nt.y1+Ee):ae.call(this,Nt.x1+he,Nt.y1+Ee)),de.call(this,he,Ee,Nt.x2,Nt.y2,Nt.x3,Nt.y3,Nt.x4,Nt.y4)}ot?oe.call(this):Z.call(this,Be)},Z=function(he){switch(he){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},oe=function(){this.pdf.clip(),this.pdf.discardPath()},re=function(he,Ee){this.pdf.internal.out(r(he)+" "+n(Ee)+" m")},H=function(he){var Ee;switch(he.align){case"right":case"end":Ee="right";break;case"center":Ee="center";break;default:Ee="left"}var we=this.pdf.getTextDimensions(he.text),Ne=V.call(this,he.y),Fe=U.call(this,Ne)-we.h,Xe=this.ctx.transform.applyToPoint(new u(he.x,Ne)),Be=this.ctx.transform.decompose(),ot=new f;ot=(ot=(ot=ot.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale);for(var Ke,it,ke,Nt=this.ctx.transform.applyToRectangle(new a(he.x,Ne,we.w,we.h)),st=ot.applyToRectangle(new a(he.x,Fe,we.w,we.h)),$e=M.call(this,st),Zt=[],$t=0;$t<$e.length;$t+=1)Zt.indexOf($e[$t])===-1&&Zt.push($e[$t]);if(B(Zt),this.autoPaging)for(var Wt=Zt[0],ht=Zt[Zt.length-1],sr=Wt;sr<ht+1;sr++){this.pdf.setPage(sr);var cr=sr===1?this.posY+this.margin[0]:this.margin[0],ir=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],br=this.pdf.internal.pageSize.height-this.margin[2],yr=br-this.margin[0],Kt=this.pdf.internal.pageSize.width-this.margin[1],at=Kt-this.margin[3],Ae=sr===1?0:ir+(sr-2)*yr;if(this.ctx.clip_path.length!==0){var _e=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ke,this.posX+this.margin[3],-1*Ae+cr),$.call(this,"fill",!0),this.path=_e}var je=F([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-Ae+cr+this.ctx.prevPageLastElemOffset)[0];he.scale>=.01&&(it=this.pdf.internal.getFontSize(),this.pdf.setFontSize(it*he.scale),ke=this.lineWidth,this.lineWidth=ke*he.scale);var Ge=this.autoPaging!=="text";if(Ge||je.y+je.h<=br){if(Ge||je.y>=cr&&je.x<=Kt){var He=Ge?he.text:this.pdf.splitTextToSize(he.text,he.maxWidth||Kt-je.x)[0],Dt=F([JSON.parse(JSON.stringify(Nt))],this.posX+this.margin[3],-Ae+cr+this.ctx.prevPageLastElemOffset)[0],St=Ge&&(sr>Wt||sr<ht)&&k.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,yr,null).clip().discardPath()),this.pdf.text(He,Dt.x,Dt.y,{angle:he.angle,align:Ee,renderingMode:he.renderingMode}),St&&this.pdf.restoreGraphicsState()}}else je.y<br&&(this.ctx.prevPageLastElemOffset+=br-je.y);he.scale>=.01&&(this.pdf.setFontSize(it),this.lineWidth=ke)}else he.scale>=.01&&(it=this.pdf.internal.getFontSize(),this.pdf.setFontSize(it*he.scale),ke=this.lineWidth,this.lineWidth=ke*he.scale),this.pdf.text(he.text,Xe.x+this.posX,Xe.y+this.posY,{angle:he.angle,align:Ee,renderingMode:he.renderingMode,maxWidth:he.maxWidth}),he.scale>=.01&&(this.pdf.setFontSize(it),this.lineWidth=ke)},ae=function(he,Ee,we,Ne){we=we||0,Ne=Ne||0,this.pdf.internal.out(r(he+we)+" "+n(Ee+Ne)+" l")},se=function(he,Ee,we){return this.pdf.lines(he,Ee,we,null,null)},de=function(he,Ee,we,Ne,Fe,Xe,Be,ot){this.pdf.internal.out([t(i(we+he)),t(o(Ne+Ee)),t(i(Fe+he)),t(o(Xe+Ee)),t(i(Be+he)),t(o(ot+Ee)),"c"].join(" "))},fe=function(he,Ee,we,Ne){for(var Fe=2*Math.PI,Xe=Math.PI/2;Ee>we;)Ee-=Fe;var Be=Math.abs(we-Ee);Be<Fe&&Ne&&(Be=Fe-Be);for(var ot=[],Ke=Ne?-1:1,it=Ee;Be>1e-5;){var ke=it+Ke*Math.min(Be,Xe);ot.push(Le.call(this,he,it,ke)),Be-=Math.abs(ke-it),it=ke}return ot},Le=function(he,Ee,we){var Ne=(we-Ee)/2,Fe=he*Math.cos(Ne),Xe=he*Math.sin(Ne),Be=Fe,ot=-Xe,Ke=Be*Be+ot*ot,it=Ke+Be*Fe+ot*Xe,ke=4/3*(Math.sqrt(2*Ke*it)-it)/(Be*Xe-ot*Fe),Nt=Be-ke*ot,st=ot+ke*Be,$e=Nt,Zt=-st,$t=Ne+Ee,Wt=Math.cos($t),ht=Math.sin($t);return{x1:he*Math.cos(Ee),y1:he*Math.sin(Ee),x2:Nt*Wt-st*ht,y2:Nt*ht+st*Wt,x3:$e*Wt-Zt*ht,y3:$e*ht+Zt*Wt,x4:he*Math.cos(we),y4:he*Math.sin(we)}},ye=function(he){return 180*he/Math.PI},xe=function(he,Ee,we,Ne,Fe,Xe){var Be=he+.5*(we-he),ot=Ee+.5*(Ne-Ee),Ke=Fe+.5*(we-Fe),it=Xe+.5*(Ne-Xe),ke=Math.min(he,Fe,Be,Ke),Nt=Math.max(he,Fe,Be,Ke),st=Math.min(Ee,Xe,ot,it),$e=Math.max(Ee,Xe,ot,it);return new a(ke,st,Nt-ke,$e-st)},Se=function(he,Ee,we,Ne,Fe,Xe,Be,ot){var Ke,it,ke,Nt,st,$e,Zt,$t,Wt,ht,sr,cr,ir,br,yr=we-he,Kt=Ne-Ee,at=Fe-we,Ae=Xe-Ne,_e=Be-Fe,je=ot-Xe;for(it=0;it<41;it++)Wt=(Zt=(ke=he+(Ke=it/40)*yr)+Ke*((st=we+Ke*at)-ke))+Ke*(st+Ke*(Fe+Ke*_e-st)-Zt),ht=($t=(Nt=Ee+Ke*Kt)+Ke*(($e=Ne+Ke*Ae)-Nt))+Ke*($e+Ke*(Xe+Ke*je-$e)-$t),it==0?(sr=Wt,cr=ht,ir=Wt,br=ht):(sr=Math.min(sr,Wt),cr=Math.min(cr,ht),ir=Math.max(ir,Wt),br=Math.max(br,ht));return new a(Math.round(sr),Math.round(cr),Math.round(ir-sr),Math.round(br-cr))},Re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var he,Ee,we=(he=this.ctx.lineDash,Ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:he,lineDashOffset:Ee}));this.prevLineDash!==we&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=we)}}})(oi.API),(function(e){var t=function(u){var a,f,p,g,b,S,_,P,k,M;for(f=[],p=0,g=(u+=a="\0\0\0\0".slice(u.length%4||4)).length;g>p;p+=4)(b=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(S=(b=((b=((b=((b=(b-(M=b%85))/85)-(k=b%85))/85)-(P=b%85))/85)-(_=b%85))/85)%85,f.push(S+33,_+33,P+33,k+33,M+33)):f.push(122);return(function(D,F){for(var B=F;B>0;B--)D.pop()})(f,a.length),String.fromCharCode.apply(String,f)+"~>"},r=function(u){var a,f,p,g,b,S=String,_="length",P=255,k="charCodeAt",M="slice",D="replace";for(u[M](-2),u=u[M](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),p=[],g=0,b=(u+=a="uuuuu"[M](u[_]%5||5))[_];b>g;g+=5)f=52200625*(u[k](g)-33)+614125*(u[k](g+1)-33)+7225*(u[k](g+2)-33)+85*(u[k](g+3)-33)+(u[k](g+4)-33),p.push(P&f>>24,P&f>>16,P&f>>8,P&f);return(function(F,B){for(var N=B;N>0;N--)F.pop()})(p,a[_]),S.fromCharCode.apply(S,p)},n=function(u){return u.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(u){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),a.test(u)===!1)return"";for(var f="",p=0;p<u.length;p+=2)f+=String.fromCharCode("0x"+(u[p]+u[p+1]));return f},o=function(u){for(var a=new Uint8Array(u.length),f=u.length;f--;)a[f]=u.charCodeAt(f);return(a=v3(a)).reduce(function(p,g){return p+String.fromCharCode(g)},"")};e.processDataByFilters=function(u,a){var f=0,p=u||"",g=[];for(typeof(a=a||[])=="string"&&(a=[a]),f=0;f<a.length;f+=1)switch(a[f]){case"ASCII85Decode":case"/ASCII85Decode":p=r(p),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=t(p),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=i(p),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=n(p),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[f]+'" is not implemented')}return{data:p,reverseChain:g.reverse().join(" ")}}})(oi.API),(function(e){e.loadFile=function(t,r,n){return(function(i,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var a=void 0;try{a=(function(f,p,g){var b=new XMLHttpRequest,S=0,_=function(P){var k=P.length,M=[],D=String.fromCharCode;for(S=0;S<k;S+=1)M.push(D(255&P.charCodeAt(S)));return M.join("")};if(b.open("GET",f,!p),b.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(b.onload=function(){b.status===200?g(_(this.responseText)):g(void 0)}),b.send(null),p&&b.status===200)return _(b.responseText)})(i,o,u)}catch{}return a})(t,r,n)},e.loadImageFile=e.loadFile})(oi.API),(function(e){function t(){return(Si.html2canvas?Promise.resolve(Si.html2canvas):d5(()=>import("./html2canvas.esm-B0tyYwQk.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(Si.DOMPurify?Promise.resolve(Si.DOMPurify):d5(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var f=Ka(a);return f==="undefined"?"undefined":f==="string"||a instanceof String?"string":f==="number"||a instanceof Number?"number":f==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":f==="object"?"object":"unknown"},i=function(a,f){var p=document.createElement(a);for(var g in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[g]=f.style[g];return p},o=function a(f,p){for(var g=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),b=f.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||g.appendChild(a(b,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(g.width=f.width,g.height=f.height,g.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(g.value=f.value),g.addEventListener("load",function(){g.scrollTop=f.scrollTop,g.scrollLeft=f.scrollLeft},!0)),g},u=function a(f){var p=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),g=a.convert(Promise.resolve(),p);return(g=g.setProgress(1,a,1,[a])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(a,f){return a.__proto__=f||u.prototype,a},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(a,f){return this.then(function(){switch(f=f||(function(p){switch(n(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),f){case"string":return this.then(r).then(function(p){return this.set({src:i("div",{innerHTML:a,dompurify:p})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},u.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(f){var p=this.opt.jsPDF,g=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=g,g)for(var _=0;_<g.length;++_){var P=g[_],k=P.src.find(function(M){return M.format==="truetype"});k&&p.addFont(k.url,P.ref.name,P.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,p.context2d.save(!0),f(this.prop.container,S)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(a,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(a,f):this.outputPdf(a,f)},u.prototype.outputPdf=function(a,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,f)})},u.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},u.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(a){if(n(a)!=="object")return this;var f=Object.keys(a||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=a[p]};switch(p){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[p]=a[p]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(a,f){return this.then(function(){var p=a in u.template.prop?this.prop[a]:this.opt[a];return f?f(p):p})},u.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},u.prototype.setPageSize=function(a){function f(p,g){return Math.floor(p*g/72*96)}return this.then(function(){(a=a||oi.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:f(a.inner.width,a.k),height:f(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},u.prototype.setProgress=function(a,f,p,g){return a!=null&&(this.progress.val=a),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(a,f,p,g){return this.setProgress(a?this.progress.val+a:null,f||null,p?this.progress.n+p:null,g?this.progress.stack.concat(g):null)},u.prototype.then=function(a,f){var p=this;return this.thenCore(a,f,function(g,b){return p.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(S){return p.updateProgress(null,g),S}).then(g,b).then(function(S){return p.updateProgress(1),S})})},u.prototype.thenCore=function(a,f,p){p=p||Promise.prototype.then;var g=this;a&&(a=a.bind(g)),f&&(f=f.bind(g));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:u.convert(Object.assign({},g),Promise.prototype),S=p.call(b,a,f);return u.convert(S,g.__proto__)},u.prototype.thenExternal=function(a,f){return Promise.prototype.then.call(this,a,f)},u.prototype.thenList=function(a){var f=this;return a.forEach(function(p){f=f.thenCore(p)}),f},u.prototype.catch=function(a){a&&(a=a.bind(this));var f=Promise.prototype.catch.call(this,a);return u.convert(f,this)},u.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},u.prototype.error=function(a){return this.then(function(){throw new Error(a)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,oi.getPageSize=function(a,f,p){if(Ka(a)==="object"){var g=a;a=g.orientation,f=g.unit||f,p=g.format||p}f=f||"mm",p=p||"a4",a=(""+(a||"P")).toLowerCase();var b,S=(""+p).toLowerCase(),_={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+f}var P,k=0,M=0;if(_.hasOwnProperty(S))k=_[S][1]/b,M=_[S][0]/b;else try{k=p[1],M=p[0]}catch{throw new Error("Invalid format: "+p)}if(a==="p"||a==="portrait")a="p",M>k&&(P=M,M=k,k=P);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",k>M&&(P=M,M=k,k=P)}return{width:M,height:k,unit:f,k:b,orientation:a}},e.html=function(a,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Z5):null;var p=new u(f);return f.worker?p:p.from(a).doCallback()}})(oi.API),oi.API.addJS=function(e){return dN=e,this.internal.events.subscribe("postPutResources",function(){g_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(g_+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),cN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+dN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){g_!==void 0&&cN!==void 0&&this.internal.out("/Names <</JavaScript "+g_+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var u=i[o],a=n.exec(u);if(a!=null){var f=a[1];r.internal.newObjectDeferredBegin(f,!1)}r.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,g=[];for(o=0;o<p;o++){var b=r.internal.newObject();g.push(b);var S=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var _=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<g.length;o++)r.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+_+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var u={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(u),u},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var u=n.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var a=this.count=this.count_r({count:0},u);if(a>0&&this.line("/Count "+a),u.options&&u.options.pageNumber){var f=r.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var p=0;p<n.children.length;p++)this.renderItems(n.children[p])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(oi.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,o,u,a){var f,p=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=u||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,f=(function(b){for(var S,_=256*b.charCodeAt(4)+b.charCodeAt(5),P=b.length,k={width:0,height:0,numcomponents:1},M=4;M<P;M+=2){if(M+=_,t.indexOf(b.charCodeAt(M+1))!==-1){S=256*b.charCodeAt(M+5)+b.charCodeAt(M+6),k={width:256*b.charCodeAt(M+7)+b.charCodeAt(M+8),height:S,numcomponents:b.charCodeAt(M+9)};break}_=256*b.charCodeAt(M+2)+b.charCodeAt(M+3)}return k})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),f.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}g={data:r,width:f.width,height:f.height,colorSpace:a,bitsPerComponent:8,filter:p,index:n,alias:i}}return g}})(oi.API),oi.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,o=Rue(e,{checkCrc:!0}),u=o.width,a=o.height,f=o.channels,p=o.palette,g=o.depth;i=p&&f===1?(function(U){for(var X=U.width,Z=U.height,oe=U.data,re=U.palette,H=U.depth,ae=!1,se=[],de=[],fe=void 0,Le=!1,ye=0,xe=0;xe<re.length;xe++){var Se=mO(re[xe],4),Re=Se[0],he=Se[1],Ee=Se[2],we=Se[3];se.push(Re,he,Ee),we!=null&&(we===0?(ye++,de.length<1&&de.push(xe)):we<255&&(Le=!0))}if(Le||ye>1){ae=!0,de=void 0;var Ne=X*Z;fe=new Uint8Array(Ne);for(var Fe=new DataView(oe.buffer),Xe=0;Xe<Ne;Xe++){var Be=J5(Fe,Xe,H),ot=mO(re[Be],4)[3];fe[Xe]=ot}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:oe,alphaBytes:fe,needSMask:ae,palette:se,mask:de}})(o):f===2||f===4?(function(U){for(var X=U.data,Z=U.width,oe=U.height,re=U.channels,H=U.depth,ae=re===2?"DeviceGray":"DeviceRGB",se=re-1,de=Z*oe,fe=se,Le=de*fe,ye=1*de,xe=Math.ceil(Le*H/8),Se=Math.ceil(ye*H/8),Re=new Uint8Array(xe),he=new Uint8Array(Se),Ee=new DataView(X.buffer),we=new DataView(Re.buffer),Ne=new DataView(he.buffer),Fe=!1,Xe=0;Xe<de;Xe++){for(var Be=Xe*re,ot=0;ot<fe;ot++)_N(we,J5(Ee,Be+ot,H),Xe*fe+ot,H);var Ke=J5(Ee,Be+fe,H);Ke<(1<<H)-1&&(Fe=!0),_N(Ne,Ke,1*Xe,H)}return{colorSpace:ae,colorsPerPixel:se,colorBytes:Re,alphaBytes:he,needSMask:Fe}})(o):(function(U){var X=U.data,Z=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Z,colorsPerPixel:Z==="DeviceGray"?1:3,colorBytes:X instanceof Uint8Array?X:new Uint8Array(X.buffer),needSMask:!1}})(o);var b,S,_,P=i,k=P.colorSpace,M=P.colorsPerPixel,D=P.colorBytes,F=P.alphaBytes,B=P.needSMask,N=P.palette,$=P.mask,V=null;return n!==oi.API.image_compression.NONE&&typeof v3=="function"?(V=(function(U){var X;switch(U){case oi.API.image_compression.FAST:X=11;break;case oi.API.image_compression.MEDIUM:X=13;break;case oi.API.image_compression.SLOW:X=14;break;default:X=12}return X})(n),b=this.decode.FLATE_DECODE,S="/Predictor ".concat(V," "),e=mN(D,u*M,M,n),B&&(_=mN(F,u,1,n))):(b=void 0,S="",e=D,B&&(_=F)),S+="/Colors ".concat(M," /BitsPerComponent ").concat(g," /Columns ").concat(u),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(_&&this.__addimage__.isArrayBuffer(_)||this.__addimage__.isArrayBufferView(_))&&(_=this.__addimage__.arrayBufferToBinaryString(_)),{alias:r,data:e,index:t,filter:b,decodeParameters:S,transparency:$,palette:N,sMask:_,predictor:V,width:u,height:a,bitsPerComponent:g,colorSpace:k}}},(function(e){e.processGIF89A=function(t,r,n,i){var o=new ece(t),u=o.width,a=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:u,height:a},g=new Q5(100).encode(p,100);return e.processJPEG.call(this,g,r,n,i)},e.processGIF87A=e.processGIF89A})(oi.API),_d.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_d.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){po.log("bit decode error:"+r)}},_d.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var f=this.palette[o>>7-a&1];this.data[u+4*a]=f.blue,this.data[u+4*a+1]=f.green,this.data[u+4*a+2]=f.red,this.data[u+4*a+3]=255}r!==0&&(this.pos+=4-r)}},_d.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+2*i*4,a=o>>4,f=15&o,p=this.palette[a];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*i+1>=this.width)break;p=this.palette[f],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},_d.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var u=this.palette[i];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},_d.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,f=(o>>10&t)/t*255|0,p=o>>15?255:0,g=n*this.width*4+4*i;this.data[g]=f,this.data[g+1]=a,this.data[g+2]=u,this.data[g+3]=p}this.pos+=e}},_d.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(u&t)/t*255|0,f=(u>>5&r)/r*255|0,p=(u>>11)/t*255|0,g=i*this.width*4+4*o;this.data[g]=p,this.data[g+1]=f,this.data[g+2]=a,this.data[g+3]=255}this.pos+=e}},_d.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=n,this.data[u+3]=255}this.pos+=this.width%4}},_d.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=u}},_d.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,i){var o=new _d(t,!1),u=o.width,a=o.height,f={data:o.getData(),width:u,height:a},p=new Q5(100).encode(f,100);return e.processJPEG.call(this,p,r,n,i)}})(oi.API),wN.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,i){var o=new wN(t),u=o.width,a=o.height,f={data:o.getData(),width:u,height:a},p=new Q5(100).encode(f,100);return e.processJPEG.call(this,p,r,n,i)}})(oi.API),oi.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,o=new Uint8Array(i/4*3),u=new Uint8Array(i/4),a=0,f=0,p=0;p<i;p+=4){var g=n[p],b=n[p+1],S=n[p+2],_=n[p+3];o[a++]=g,o[a++]=b,o[a++]=S,u[f++]=_}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:P,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},oi.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kg=oi.API,y_=kg.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,f=a.fof?a.fof:1,p=t.kerning?t.kerning:i.metadata.Unicode.kerning,g=p.fof?p.fof:1,b=t.doKerning!==!1,S=0,_=e.length,P=0,k=a[0]||f,M=[];for(r=0;r<_;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?M.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+u*(1e3/o)||0)/1e3):(S=b&&Ka(p[n])==="object"&&!isNaN(parseInt(p[n][P],10))?p[n][P]/g:0,M.push((a[n]||k)/f+S)),P=n;return M},fN=kg.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return kg.processArabic&&(e=kg.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:y_.apply(this,arguments).reduce(function(o,u){return o+u},0)},hN=function(e,t,r,n){for(var i=[],o=0,u=e.length,a=0;o!==u&&a+t[o]<r;)a+=t[o],o++;i.push(e.slice(0,o));var f=o;for(a=0;o!==u;)a+t[o]>n&&(i.push(e.slice(f,o)),a=0,f=o),a+=t[o],o++;return f!==o&&i.push(e.slice(f,o)),i},pN=function(e,t,r){r||(r={});var n,i,o,u,a,f,p,g=[],b=[g],S=r.textIndent||0,_=0,P=0,k=e.split(" "),M=y_.apply(this,[" ",r])[0];if(f=r.lineIndent===-1?k[0].length+2:r.lineIndent||0){var D=Array(f).join(" "),F=[];k.map(function(N){(N=N.split(/\s*\n/)).length>1?F=F.concat(N.map(function($,V){return(V&&$.length?`
`:"")+$})):F.push(N[0])}),k=F,f=fN.apply(this,[D,r])}for(o=0,u=k.length;o<u;o++){var B=0;if(n=k[o],f&&n[0]==`
`&&(n=n.substr(1),B=1),S+_+(P=(i=y_.apply(this,[n,r])).reduce(function(N,$){return N+$},0))>t||B){if(P>t){for(a=hN.apply(this,[n,i,t-(S+_),t]),g.push(a.shift()),g=[a.pop()];a.length;)b.push([a.shift()]);P=i.slice(n.length-(g[0]?g[0].length:0)).reduce(function(N,$){return N+$},0)}else g=[n];b.push(g),S=P+f,_=M}else g.push(n),S+=_+P,_=M}return p=f?function(N,$){return($?D:"")+N.join(" ")}:function(N){return N.join(" ")},b.map(p)},kg.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var b=this.internal.getFont(g.fontName,g.fontStyle),S="Unicode";return b.metadata[S]?{widths:b.metadata[S].widths||{0:1},kerning:b.metadata[S].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var a,f,p=[];for(a=0,f=n.length;a<f;a++)p=p.concat(pN.apply(this,[n[a],u,o]));return p},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[r[o]]=t[o],i[t[o]]=r[o];var u=function(S){return"0x"+parseInt(S,10).toString(16)},a=e.__fontmetrics__.compress=function(S){var _,P,k,M,D=["{"];for(var F in S){if(_=S[F],isNaN(parseInt(F,10))?P="'"+F+"'":(F=parseInt(F,10),P=(P=u(F).slice(2)).slice(0,-1)+i[P.slice(-1)]),typeof _=="number")_<0?(k=u(_).slice(3),M="-"):(k=u(_).slice(2),M=""),k=M+k.slice(0,-1)+i[k.slice(-1)];else{if(Ka(_)!=="object")throw new Error("Don't know what to do with value type "+Ka(_)+".");k=a(_)}D.push(P+k)}return D.push("}"),D.join("")},f=e.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var _,P,k,M,D={},F=1,B=D,N=[],$="",V="",U=S.length-1,X=1;X<U;X+=1)(M=S[X])=="'"?_?(k=_.join(""),_=void 0):_=[]:_?_.push(M):M=="{"?(N.push([B,k]),B={},k=void 0):M=="}"?((P=N.pop())[0][P[1]]=B,k=void 0,B=P[0]):M=="-"?F=-1:k===void 0?n.hasOwnProperty(M)?($+=n[M],k=parseInt($,16)*F,F=1,$=""):$+=M:n.hasOwnProperty(M)?(V+=n[M],B[k]=parseInt(V,16)*F,F=1,k=void 0,V=""):V+=M;return D},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(S){var _=S.font,P=b.Unicode[_.postScriptName];P&&(_.metadata.Unicode={},_.metadata.Unicode.widths=P.widths,_.metadata.Unicode.kerning=P.kerning);var k=g.Unicode[_.postScriptName];k&&(_.metadata.Unicode.encoding=k,_.encoding=k.codePages[0])}])})(oi.API),(function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(u,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(ox(a)),u.metadata=e.API.TTFFont.open(a),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(i,n)}}])})(oi),oi.API.addSvgAsImage=function(e,t,r,n,i,o,u,a){if(isNaN(t)||isNaN(r))throw po.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw po.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=n,f.height=i;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Si.canvg?Promise.resolve(Si.canvg):d5(()=>import("./index.es-sNvS4eHl.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)).catch(function(S){return Promise.reject(new Error("Could not load canvg: "+S))}).then(function(S){return S.default?S.default:S}).then(function(S){return S.fromString(p,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(g)}).then(function(){b.addImage(f.toDataURL("image/jpeg",1),t,r,n,i,u,a)})},oi.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},oi.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(u),f=[],p=0,g=0,b=0;function S(P,k){var M,D=!1;for(M=0;M<P.length;M+=1)P[M]===k&&(D=!0);return D}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var _=a.length;for(b=0;b<_;b+=1)r[a[b]].value=r[a[b]].defaultValue,r[a[b]].explicitSet=!1}if(Ka(e)==="object"){for(i in e)if(o=e[i],S(a,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&S(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(p=0;p<o.length;p+=1)if(n=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(g=0;g<o[p].length;g+=1)typeof o[p][g]!="number"&&(n=!1);n===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}r[i].value="["+f.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,k=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?k.push("/"+P+" /"+r[P].value):k.push("/"+P+" "+r[P].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+a.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(i+o+u+a+f),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(oi.API),(function(e){var t=e.API,r=t.pdfEscape16=function(o,u){for(var a,f=u.metadata.Unicode.widths,p=["","0","00","000","0000"],g=[""],b=0,S=o.length;b<S;++b){if(a=u.metadata.characterToGlyph(o.charCodeAt(b)),u.metadata.glyIdsUsed.push(a),u.metadata.toUnicode[a]=o.charCodeAt(b),f.indexOf(a)==-1&&(f.push(a),f.push([parseInt(u.metadata.widthOfGlyph(a),10)])),a=="0")return g.join("");a=a.toString(16),g.push(p[4-a.length],a)}return g.join("")},n=function(o){var u,a,f,p,g,b,S;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,S=(a=Object.keys(o).sort(function(_,P){return _-P})).length;b<S;b++)u=a[b],f.length>=100&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+p+">"));return f.length&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(u){var a=u.font,f=u.out,p=u.newObject,g=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var b=a.metadata.Unicode.widths,S=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),_="",P=0;P<S.length;P++)_+=String.fromCharCode(S[P]);var k=p();g({data:_,addLength1:!0,objectId:k}),f("endobj");var M=p();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:M}),f("endobj");var D=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Gg(a.fontName)),f("/FontFile2 "+k+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),f("/Flags "+a.metadata.flags),f("/StemV "+a.metadata.stemV),f("/ItalicAngle "+a.metadata.italicAngle),f("/Ascent "+a.metadata.ascender),f("/Descent "+a.metadata.decender),f("/CapHeight "+a.metadata.capHeight),f(">>"),f("endobj");var F=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+Gg(a.fontName)),f("/FontDescriptor "+D+" 0 R"),f("/W "+e.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+a.encoding+")"),f(">>"),f(">>"),f("endobj"),a.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+M+" 0 R"),f("/BaseFont /"+Gg(a.fontName)),f("/Encoding /"+a.encoding),f("/DescendantFonts ["+F+" 0 R]"),f(">>"),f("endobj"),a.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(u){var a=u.font,f=u.out,p=u.newObject,g=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var b=a.metadata.rawData,S="",_=0;_<b.length;_++)S+=String.fromCharCode(b[_]);var P=p();g({data:S,addLength1:!0,objectId:P}),f("endobj");var k=p();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var M=p();f("<<"),f("/Descent "+a.metadata.decender),f("/CapHeight "+a.metadata.capHeight),f("/StemV "+a.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+P+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),f("/FontName /"+Gg(a.fontName)),f("/ItalicAngle "+a.metadata.italicAngle),f("/Ascent "+a.metadata.ascender),f(">>"),f("endobj"),a.objectNumber=p();for(var D=0;D<a.metadata.hmtx.widths.length;D++)a.metadata.hmtx.widths[D]=parseInt(a.metadata.hmtx.widths[D]*(1e3/a.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Gg(a.fontName)+"/FontDescriptor "+M+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),f("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var u,a=o.text||"",f=o.x,p=o.y,g=o.options||{},b=o.mutex||{},S=b.pdfEscape,_=b.activeFontKey,P=b.fonts,k=_,M="",D=0,F="",B=P[k].encoding;if(P[k].encoding!=="Identity-H")return{text:a,x:f,y:p,options:g,mutex:b};for(F=a,k=_,Array.isArray(a)&&(F=a[0]),D=0;D<F.length;D+=1)P[k].metadata.hasOwnProperty("cmap")&&(u=P[k].metadata.cmap.unicode.codeMap[F[D].charCodeAt(0)]),u||F[D].charCodeAt(0)<256&&P[k].metadata.hasOwnProperty("Unicode")?M+=F[D]:M+="";var N="";return parseInt(k.slice(1))<14||B==="WinAnsiEncoding"?N=S(M,k).split("").map(function($){return $.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(N=r(M,P[k])),b.isHex=!0,{text:N,x:f,y:p,options:g,mutex:b}};t.events.push(["postProcessText",function(o){var u=o.text||"",a=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?a.push([i(Object.assign({},f,{text:u[p][0]})).text,u[p][1],u[p][2]]):a.push(i(Object.assign({},f,{text:u[p]})).text);o.text=a}else o.text=i(Object.assign({},f,{text:u})).text}])})(oi),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(oi.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,o,u,a,f,p,g,b=t,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},M=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],D=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,B=0;this.__bidiEngine__={};var N=function(re){var H=re.charCodeAt(),ae=H>>8,se=k[ae];return se!==void 0?b[256*se+(255&H)]:ae===252||ae===253?"AL":D.test(ae)?"L":ae===8?"R":"N"},$=function(re){for(var H,ae=0;ae<re.length;ae++){if((H=N(re.charAt(ae)))==="L")return!1;if(H==="R")return!0}return!1},V=function(re,H,ae,se){var de,fe,Le,ye,xe=H[se];switch(xe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"N":case"AN":break;case"EN":F&&(xe="AN");break;case"AL":F=!0,xe="R";break;case"WS":case"BN":xe="N";break;case"CS":se<1||se+1>=H.length||(de=ae[se-1])!=="EN"&&de!=="AN"||(fe=H[se+1])!=="EN"&&fe!=="AN"?xe="N":F&&(fe="AN"),xe=fe===de?fe:"N";break;case"ES":xe=(de=se>0?ae[se-1]:"B")==="EN"&&se+1<H.length&&H[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&ae[se-1]==="EN"){xe="EN";break}if(F){xe="N";break}for(Le=se+1,ye=H.length;Le<ye&&H[Le]==="ET";)Le++;xe=Le<ye&&H[Le]==="EN"?"EN":"N";break;case"NSM":if(u&&!a){for(ye=H.length,Le=se+1;Le<ye&&H[Le]==="NSM";)Le++;if(Le<ye){var Se=re[se],Re=Se>=1425&&Se<=2303||Se===64286;if(de=H[Le],Re&&(de==="R"||de==="AL")){xe="R";break}}}xe=se<1||(de=H[se-1])==="B"?"N":ae[se-1];break;case"B":F=!1,i=!0,xe=B;break;case"S":o=!0,xe="N"}return xe},U=function(re,H,ae){var se=re.split("");return ae&&X(se,ae,{hiLevel:B}),se.reverse(),H&&H.reverse(),se.join("")},X=function(re,H,ae){var se,de,fe,Le,ye,xe=-1,Se=re.length,Re=0,he=[],Ee=B?_:S,we=[];for(F=!1,i=!1,o=!1,de=0;de<Se;de++)we[de]=N(re[de]);for(fe=0;fe<Se;fe++){if(ye=Re,he[fe]=V(re,we,he,fe),se=240&(Re=Ee[ye][P[he[fe]]]),Re&=15,H[fe]=Le=Ee[Re][5],se>0)if(se===16){for(de=xe;de<fe;de++)H[de]=1;xe=-1}else xe=-1;if(Ee[Re][6])xe===-1&&(xe=fe);else if(xe>-1){for(de=xe;de<fe;de++)H[de]=Le;xe=-1}we[fe]==="B"&&(H[fe]=0),ae.hiLevel|=Le}o&&(function(Ne,Fe,Xe){for(var Be=0;Be<Xe;Be++)if(Ne[Be]==="S"){Fe[Be]=B;for(var ot=Be-1;ot>=0&&Ne[ot]==="WS";ot--)Fe[ot]=B}})(we,H,Se)},Z=function(re,H,ae,se,de){if(!(de.hiLevel<re)){if(re===1&&B===1&&!i)return H.reverse(),void(ae&&ae.reverse());for(var fe,Le,ye,xe,Se=H.length,Re=0;Re<Se;){if(se[Re]>=re){for(ye=Re+1;ye<Se&&se[ye]>=re;)ye++;for(xe=Re,Le=ye-1;xe<Le;xe++,Le--)fe=H[xe],H[xe]=H[Le],H[Le]=fe,ae&&(fe=ae[xe],ae[xe]=ae[Le],ae[Le]=fe);Re=ye}Re++}}},oe=function(re,H,ae){var se=re.split(""),de={hiLevel:B};return ae||(ae=[]),X(se,ae,de),(function(fe,Le,ye){if(ye.hiLevel!==0&&g)for(var xe,Se=0;Se<fe.length;Se++)Le[Se]===1&&(xe=M.indexOf(fe[Se]))>=0&&(fe[Se]=M[xe+1])})(se,ae,de),Z(2,se,H,ae,de),Z(1,se,H,ae,de),se.join("")};return this.__bidiEngine__.doBidiReorder=function(re,H,ae){if((function(de,fe){if(fe)for(var Le=0;Le<de.length;Le++)fe[Le]=Le;a===void 0&&(a=$(de)),p===void 0&&(p=$(de))})(re,H),u||!f||p)if(u&&f&&a^p)B=a?1:0,re=U(re,H,ae);else if(!u&&f&&p)B=a?1:0,re=oe(re,H,ae),re=U(re,H);else if(!u||a||f||p){if(u&&!f&&a^p)re=U(re,H),a?(B=0,re=oe(re,H,ae)):(B=1,re=oe(re,H,ae),re=U(re,H));else if(u&&a&&!f&&p)B=1,re=oe(re,H,ae),re=U(re,H);else if(!u&&!f&&a^p){var se=g;a?(B=1,re=oe(re,H,ae),B=0,g=!1,re=oe(re,H,ae),g=se):(B=0,re=oe(re,H,ae),re=U(re,H),B=1,g=!1,re=oe(re,H,ae),g=se,re=U(re,H))}}else B=0,re=oe(re,H,ae);else B=a?1:0,re=oe(re,H,ae);return re},this.__bidiEngine__.setOptions=function(re){re&&(u=re.isInputVisual,f=re.isOutputVisual,a=re.isInputRtl,p=re.isOutputRtl,g=re.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(u=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?u.push([r.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):u.push([r.doBidiReorder(i[a])]);n.text=u}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(oi),oi.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new up(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new mce(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new tce(this.contents),this.head=new nce(this),this.name=new lce(this),this.cmap=new tV(this),this.toUnicode={},this.hhea=new ice(this),this.maxp=new uce(this),this.hmtx=new cce(this),this.post=new oce(this),this.os2=new ace(this),this.loca=new pce(this),this.glyf=new dce(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,a,f,p;for(p=[],u=0,a=(f=this.bbox).length;u<a;u++)t=f[u],p.push(Math.round(t*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,o,u,a;for(u=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=t.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return u*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var Fd,up=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,o,u,a,f;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),u=this.readByte(),a=this.readByte(),f=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^u)+256*(255^a)+(255^f)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*u+256*a+f},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(this.writeByte(r));return o},e})(),tce=(function(){var e;function t(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,o,u,a,f,p,g,b,S,_,P,k;for(k in _=Object.keys(r).length,f=Math.log(2),b=16*Math.floor(Math.log(_)/f),u=Math.floor(b/f),g=16*_-b,(i=new up).writeInt(this.scalarType),i.writeShort(_),i.writeShort(b),i.writeShort(u),i.writeShort(g),o=16*_,p=i.pos+o,a=null,P=[],r)for(S=r[k],i.writeString(k),i.writeInt(e(S)),i.writeInt(p),i.writeInt(S.length),P=P.concat(S),k==="head"&&(a=p),p+=S.length;p%4;)P.push(0),p++;return i.write(P),n=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(n),i.data},e=function(r){var n,i,o,u;for(r=rV.call(r);r.length%4;)r.push(0);for(o=new up(r),i=0,n=0,u=r.length;n<u;n=n+=4)i+=o.readUInt32();return 4294967295&i},t})(),rce={}.hasOwnProperty,Ef=function(e,t){for(var r in t)rce.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Fd=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var nce=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new up).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),SN=(function(){function e(t,r){var n,i,o,u,a,f,p,g,b,S,_,P,k,M,D,F,B;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),b=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=t.readByte();break;case 4:for(_=t.readUInt16(),S=_/2,t.pos+=6,o=(function(){var N,$;for($=[],f=N=0;0<=S?N<S:N>S;f=0<=S?++N:--N)$.push(t.readUInt16());return $})(),t.pos+=2,k=(function(){var N,$;for($=[],f=N=0;0<=S?N<S:N>S;f=0<=S?++N:--N)$.push(t.readUInt16());return $})(),p=(function(){var N,$;for($=[],f=N=0;0<=S?N<S:N>S;f=0<=S?++N:--N)$.push(t.readUInt16());return $})(),g=(function(){var N,$;for($=[],f=N=0;0<=S?N<S:N>S;f=0<=S?++N:--N)$.push(t.readUInt16());return $})(),i=(this.length-t.pos+this.offset)/2,a=(function(){var N,$;for($=[],f=N=0;0<=i?N<i:N>i;f=0<=i?++N:--N)$.push(t.readUInt16());return $})(),f=D=0,B=o.length;D<B;f=++D)for(M=o[f],n=F=P=k[f];P<=M?F<=M:F>=M;n=P<=M?++F:--F)g[f]===0?u=n+p[f]:(u=a[g[f]/2+(n-P)-(S-f)]||0)!==0&&(u+=p[f]),this.codeMap[n]=65535&u}t.pos=b}return e.encode=function(t,r){var n,i,o,u,a,f,p,g,b,S,_,P,k,M,D,F,B,N,$,V,U,X,Z,oe,re,H,ae,se,de,fe,Le,ye,xe,Se,Re,he,Ee,we,Ne,Fe,Xe,Be,ot,Ke,it,ke;switch(se=new up,u=Object.keys(t).sort(function(Nt,st){return Nt-st}),r){case"macroman":for(k=0,M=(function(){var Nt=[];for(P=0;P<256;++P)Nt.push(0);return Nt})(),F={0:0},o={},de=0,xe=u.length;de<xe;de++)F[ot=t[i=u[de]]]==null&&(F[ot]=++k),o[i]={old:t[i],new:F[t[i]]},M[i]=F[t[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(M),{charMap:o,subtable:se.data,maxGlyphID:k+1};case"unicode":for(H=[],b=[],B=0,F={},n={},D=p=null,fe=0,Se=u.length;fe<Se;fe++)F[$=t[i=u[fe]]]==null&&(F[$]=++B),n[i]={old:$,new:F[$]},a=F[$]-i,D!=null&&a===p||(D&&b.push(D),H.push(i),p=a),D=i;for(D&&b.push(D),b.push(65535),H.push(65535),oe=2*(Z=H.length),X=2*Math.pow(Math.log(Z)/Math.LN2,2),S=Math.log(X/2)/Math.LN2,U=2*Z-X,f=[],V=[],_=[],P=Le=0,Re=H.length;Le<Re;P=++Le){if(re=H[P],g=b[P],re===65535){f.push(0),V.push(0);break}if(re-(ae=n[re].new)>=32768)for(f.push(0),V.push(2*(_.length+Z-P)),i=ye=re;re<=g?ye<=g:ye>=g;i=re<=g?++ye:--ye)_.push(n[i].new);else f.push(ae-re),V.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*Z+2*_.length),se.writeUInt16(0),se.writeUInt16(oe),se.writeUInt16(X),se.writeUInt16(S),se.writeUInt16(U),Xe=0,he=b.length;Xe<he;Xe++)i=b[Xe],se.writeUInt16(i);for(se.writeUInt16(0),Be=0,Ee=H.length;Be<Ee;Be++)i=H[Be],se.writeUInt16(i);for(Ke=0,we=f.length;Ke<we;Ke++)a=f[Ke],se.writeUInt16(a);for(it=0,Ne=V.length;it<Ne;it++)N=V[it],se.writeUInt16(N);for(ke=0,Fe=_.length;ke<Fe;ke++)k=_[ke],se.writeUInt16(k);return{charMap:n,subtable:se.data,maxGlyphID:B+1}}},e})(),tV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new SN(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=SN.encode(t,r),(i=new up).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e})(),ice=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),ace=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),oce=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var u,a,f;for(f=[],o=u=0,a=this.file.maxp.numGlyphs;0<=a?u<a:u>a;o=0<=a?++u:--u)f.push(t.readUInt32());return f}).call(this)}},e})(),sce=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},lce=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,o,u,a,f,p,g,b,S;for(t.pos=this.offset,t.readShort(),r=t.readShort(),a=t.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(f={},o=g=0,b=n.length;g<b;o=++g)i=n[o],t.pos=i.offset,p=t.readString(i.length),u=new sce(p,i),f[S=i.nameID]==null&&(f[S]=[]),f[i.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e})(),uce=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),cce=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,o,u,a,f;for(t.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,g;for(g=[],r=p=0;0<=i?p<i:p>i;r=0<=i?++p:--p)g.push(t.readInt16());return g})(),this.widths=(function(){var p,g,b,S;for(S=[],p=0,g=(b=this.metrics).length;p<g;p++)o=b[p],S.push(o.advance);return S}).call(this),n=this.widths[this.widths.length-1],f=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)f.push(this.widths.push(n));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),rV=[].slice,dce=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,o,u,a,f,p,g,b;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,u=(a=new up(r.read(i))).readShort(),p=a.readShort(),b=a.readShort(),f=a.readShort(),g=a.readShort(),this.cache[t]=u===-1?new hce(a,p,b,f,g):new fce(a,u,p,b,f,g),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,o,u,a,f;for(u=[],o=[],a=0,f=r.length;a<f;a++)i=t[r[a]],o.push(u.length),i&&(u=u.concat(i.encode(n)));return o.push(u.length),{table:u,offsets:o}},e})(),fce=(function(){function e(t,r,n,i,o,u){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=u,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),hce=(function(){function e(t,r,n,i,o){var u,a;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;a=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&a;)u.pos+=1&a?4:2,128&a?u.pos+=8:64&a?u.pos+=4:8&a&&(u.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new up(rV.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),pce=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Fd),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,u=0;u<n.length;++u)if(n[u]=i,o<r.length&&r[o]==u){++o,n[u]=i;var a=this.offsets[u],f=this.offsets[u+1]-a;f>0&&(i+=f)}for(var p=new Array(4*n.length),g=0;g<n.length;++g)p[4*g+3]=255&n[g],p[4*g+2]=(65280&n[g])>>8,p[4*g+1]=(16711680&n[g])>>16,p[4*g]=(4278190080&n[g])>>24;return p},e})(),mce=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)n=o[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,o,u,a,f;for(i={},u=0,a=t.length;u<a;u++)i[o=t[u]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in f=this.glyphsFor(r))n=f[o],i[o]=n;return i},e.prototype.encode=function(t,r){var n,i,o,u,a,f,p,g,b,S,_,P,k,M,D;for(i in n=tV.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),_={0:0},D=n.charMap)_[(f=D[i]).old]=f.new;for(P in S=n.maxGlyphID,u)P in _||(_[P]=S++);return g=(function(F){var B,N;for(B in N={},F)N[F[B]]=B;return N})(_),b=Object.keys(g).sort(function(F,B){return F-B}),k=(function(){var F,B,N;for(N=[],F=0,B=b.length;F<B;F++)a=b[F],N.push(g[a]);return N})(),o=this.font.glyf.encode(u,k,_),p=this.font.loca.encode(o.offsets,k),M={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(M["OS/2"]=this.font.os2.raw()),this.font.directory.encode(M)},e})();oi.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,o,u;if(Array.isArray(r))return"["+(function(){var a,f,p;for(p=[],a=0,f=r.length;a<f;a++)n=r[a],p.push(t.convert(n));return p})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)u=r[i],o.push("/"+i+" "+t.convert(u));return o.push(">>"),o.join(`
`)}return""+r},t})();const gce=e=>{const t=e.width,r=e.height,n=document.createElement("div");n.className="hidden-map",n.style.width="0px",n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n);const i=document.createElement("div");i.style.width=t+"px",i.style.height=r+"px",n.appendChild(i);const o=e.map.map.getStyle();for(const f in o.sources){const p=o.sources[f];Object.keys(p).forEach(g=>{p[g]||delete p[g]})}const u=new lw.Map({container:i,center:e.map.map.getCenter(),zoom:e.map.map.getZoom(),bearing:0,pitch:0,interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,style:o}),a=u._cameraForBoxAndBearing([e.bboxUnrotated[0],e.bboxUnrotated[1]],[e.bboxUnrotated[2],e.bboxUnrotated[3]],e.bearing+e.map.map.getBearing());return u._fitInternal(a),new Promise(f=>{console.log("before idle"),u.once("idle",function(){const p={...e,renderMap:u,hiddenContainer:n,createPdf:g=>yce({...e,renderMap:u,hiddenContainer:n,...g}),createPng:g=>bce({...e,renderMap:u,hiddenContainer:n,...g})};f(p)})})};function yce(e){const t=new oi({orientation:e?.orientation==="portrait"?"p":"l",unit:"mm",compress:!0,format:e.format});return Object.defineProperty(window,"devicePixelRatio",{get:function(){return 300/96}}),new Promise(r=>{t.addImage(e.renderMap.getCanvas().toDataURL("image/png"),"png",0,0,t.internal.pageSize.getWidth(),t.internal.pageSize.getHeight(),void 0,"FAST"),e.renderMap.remove(),e.hiddenContainer.parentNode?.removeChild(e.hiddenContainer);const n={...e,pdf:t,downloadPdf:i=>vce({...n,...i}),formData:new FormData};r(n)})}function vce(e){return e.pdf.save("Map.pdf"),new Promise(function(t){t({...e})})}function bce(e){return new Promise(t=>{const r=e.renderMap.getCanvas().toDataURL("image/png"),n={...e,png:r,downloadPng:i=>_ce({...n,...i})};t(n)})}function _ce(e){const t=document.createElement("a");return t.download=e?.name?e.name+".png":"map.png",t.href=e.png,document.body.appendChild(t),t.click(),document.body.removeChild(t),new Promise(function(r){r({...e})})}function nV(e){const t=ha({mapId:e.mapId});return{createExport:ee.useMemo(()=>{if(t.map)return n=>gce({map:t.map,...n})},[t.map])}}const CN=e=>{const t=ha({mapId:e.mapId}),r=nV({mapId:e.mapId}),[n,i]=gt.useState(!1);return K.jsx(K.Fragment,{children:K.jsx($i,{color:"primary",variant:"contained",onClick:()=>{if(t.map&&r?.createExport){i(!0);const o=t.map.getBounds(),u=[o.getWest(),o.getSouth(),o.getEast(),o.getNorth()];r.createExport({width:595*1.4,height:842*1.4,bbox:u,bboxUnrotated:u,bearing:t.map.getBearing(),format:"a4",orientation:"portrait",...e.exportOptions}).then(a=>a.createPdf()).then(a=>(i(!1),a.downloadPdf())).catch(a=>{console.log(a),i(!1)})}},children:n?K.jsx(fw,{size:24,sx:{color:"#fff"}}):K.jsx(Ise,{})})})};try{CN.displayName="MlCreatePdfButton",CN.__docgenInfo={description:"Renders a button that will create a PDF version of the current map view (dimensions adjusted to fit Din A4 Paper).",displayName:"MlCreatePdfButton",props:{mapId:{defaultValue:null,description:"ID of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},exportOptions:{defaultValue:null,description:"Option overrides for the createExport function",name:"exportOptions",required:!1,type:{name:"createExportOptions | undefined"}}}}}catch{}const fy={A4:{"300dpi":{width:2480,height:3508},"150dpi":{width:1240,height:1754},"72dpi":{width:595,height:842}},A3:{"300dpi":{width:3505,height:4961},"150dpi":{width:1754,height:2480},"72dpi":{width:842,height:1191}},A2:{"300dpi":{width:4961,height:7016},"150dpi":{width:2480,height:3508},"72dpi":{width:1191,height:1684}},A1:{"300dpi":{width:7016,height:9933},"150dpi":{width:3508,height:4967},"72dpi":{width:1684,height:2384}},A0:{"300dpi":{width:9933,height:14043},"150dpi":{width:4967,height:7022},"72dpi":{width:2384,height:3370}}},iV=gt.createContext({}),xce=fy.A4["72dpi"],T3=({children:e})=>{const[t,r]=ee.useState("A4"),[n,i]=ee.useState("72dpi"),[o,u]=ee.useState({center:void 0,scale:void 0,rotate:0,width:210,height:297,orientation:"portrait",fixedScale:0}),a=ee.useRef(null),f=ee.useMemo(()=>typeof fy[t][n]<"u"?o.orientation==="portrait"?fy[t][n]:{width:fy[t][n].height,height:fy[t][n].width}:xce,[t,n,o.orientation]),p={options:o,setOptions:u,format:t,setFormat:r,quality:n,setQuality:i,geojsonRef:a,template:f};return K.jsx(iV.Provider,{value:p,children:e})};try{T3.displayName="PdfContextProvider",T3.__docgenInfo={description:"",displayName:"PdfContextProvider",props:{}}}catch{}function lA(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function aV(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function oV(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function uA(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function wce(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function Sce(e,t){var r=uA("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function I3(e){return e.replace(/_/g,".")}function b0(e,t){var r=null,n="-1";return lA(e,function(i){var o=uA("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!o||i.brand?!1:(r=i,n=o[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=Sce(i.versionTest.toLowerCase(),t)||n),n=I3(n),!0)}),{preset:r,version:n}}function v_(e,t){var r={brand:"",version:"-1"};return lA(e,function(n){var i=sV(t,n);return i?(r.brand=n.id,r.version=n.versionAlias||i.version,r.version!=="-1"):!1}),r}function sV(e,t){return aV(e,function(r){var n=r.brand;return uA(""+t.test,n.toLowerCase())})}var lV=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],uV=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],P3=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],cV=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],dV=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function fV(e){return!!b0(cV,e).preset}function Cce(e){var t=oV(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:fV(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=b0(lV,t),u=o.preset,a=o.version,f=b0(dV,t),p=f.preset,g=f.version,b=b0(uV,t);if(n.chromium=!!b.preset,n.chromiumVersion=b.version,!n.chromium){var S=b0(P3,t);n.webkit=!!S.preset,n.webkitVersion=S.version}return p&&(i.name=p.id,i.version=g,i.majorVersion=parseInt(g,10)),u&&(n.name=u.id,n.version=a,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}function Ece(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=t.mobile||!1,i=r[0],o=(t.platform||navigator.platform).toLowerCase(),u={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!v_(cV,r).brand||fV(oV())},a={name:"unknown",version:"-1",majorVersion:-1};u.webkit=!u.chromium&&lA(P3,function(S){return sV(r,S)});var f=v_(uV,r);if(u.chromium=!!f.brand,u.chromiumVersion=f.version||"-1",!u.chromium){var p=v_(P3,r);u.webkit=!!p.brand,u.webkitVersion=p.version||"-1"}var g=aV(dV,function(S){return new RegExp(""+S.test,"g").exec(o)});a.name=g?g.id:"";{var b=v_(lV,r);u.name=b.brand||u.name,u.version=b.brand&&e?e.uaFullVersion:b.version}return u.webkit&&(a.name=n?"ios":"mac"),a.name==="ios"&&u.webview&&(u.version="-1"),a.version=I3(a.version),u.version=I3(u.version),a.majorVersion=parseInt(a.version,10),u.majorVersion=parseInt(u.version,10),{browser:u,os:a,isMobile:n,isHints:!0}}function Tce(e){return wce()?Ece():Cce(e)}function Ice(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(i){return i?""+e+i:""}).join(" ")}).join(" ")}function Pce(e,t){return t.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function gm(e,t){return function(r){r&&(e[t]=r)}}function hV(e,t,r){return function(n){n&&(e[t][r]=n)}}function Ace(e,t){return t===void 0&&(t={}),function(r,n){e.forEach(function(i){var o=t[i]||i;o in r||(r[o]=function(){for(var u,a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];var p=(u=this[n])[i].apply(u,a);return p===this[n]?this:p})})}}var kce="function",Mce="object",Lce="string",Rce="number",cA="undefined",pV=typeof window!==cA,Dce=typeof document!==cA&&document,Oce=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],tl=1e-7,b_={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Nce(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,i++)n[i]=o[u];return n}function qx(e,t,r,n){return(e*n+t*r)/(r+n)}function dA(e){return typeof e===cA}function Md(e){return e&&typeof e===Mce}function Ml(e){return Array.isArray(e)}function wh(e){return typeof e===Lce}function c1(e){return typeof e===Rce}function fA(e){return typeof e===kce}function Fce(e,t){var r=e===""||e==" ",n=t===""||t==" ";return n&&r||e===t}function mV(e,t,r,n,i){var o=hA(e,t,r);return o?r:Bce(e,t,r+1,n,i)}function hA(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function Bce(e,t,r,n,i){for(var o=function(p){var g=t[p].trim();if(g===e.close&&!hA(e,t,p))return{value:p};var b=p,S=Sc(i,function(_){var P=_.open;return P===g});if(S&&(b=mV(S,t,p,n,i)),b===-1)return u=p,"break";p=b,u=p},u,a=r;a<n;++a){var f=o(a);if(a=u,typeof f=="object")return f.value;if(f==="break")break}return-1}function pA(e,t){var r=wh(t)?{separator:t}:t,n=r.separator,i=n===void 0?",":n,o=r.isSeparateFirst,u=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,f=a===void 0?u:a,p=r.openCloseCharacters,g=p===void 0?Oce:p,b=g.map(function(U){var X=U.open,Z=U.close;return X===Z?X:X+"|"+Z}).join("|"),S="(\\s*"+i+"\\s*|"+b+"|\\s+)",_=new RegExp(S,"g"),P=e.split(_).filter(function(U){return U&&U!=="undefined"}),k=P.length,M=[],D=[];function F(){return D.length?(M.push(D.join("")),D=[],!0):!1}for(var B=function(U){var X=P[U].trim(),Z=U,oe=Sc(g,function(ae){var se=ae.open;return se===X}),re=Sc(g,function(ae){var se=ae.close;return se===X});if(oe){if(Z=mV(oe,P,U,k,g),Z!==-1&&f)return F()&&o||(M.push(P.slice(U,Z+1).join("")),U=Z,o)?(N=U,"break"):(N=U,"continue")}else if(re&&!hA(re,P,U)){var H=Nce(g);return H.splice(g.indexOf(re),1),{value:pA(e,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:u,isSeparateOpenClose:f,openCloseCharacters:H})}}else if(Fce(X,i)&&!u)return F(),o?(N=U,"break"):(N=U,"continue");Z===-1&&(Z=k-1),D.push(P.slice(U,Z+1).join("")),U=Z,N=U},N,$=0;$<k;++$){var V=B($);if($=N,typeof V=="object")return V.value;if(V==="break")break}return D.length&&M.push(D.join("")),M}function cp(e){return pA(e,"")}function cm(e){return pA(e,",")}function gV(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function X1(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2],i=t[3];return{prefix:r,unit:i,value:parseFloat(n)}}function zce(e,t){return e.replace(/([a-z])([A-Z])/g,function(r,n,i){return""+n+t+i.toLowerCase()})}function d1(){return Date.now?Date.now():new Date().getTime()}function gh(e,t,r){r===void 0&&(r=-1);for(var n=e.length,i=0;i<n;++i)if(t(e[i],i,e))return i;return r}function Sc(e,t,r){var n=gh(e,t);return n>-1?e[n]:r}var yV=(function(){var e=d1(),t=pV&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=d1(),i=setTimeout(function(){r(n-e)},1e3/60);return i}})(),jce=(function(){var e=pV&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}})();function iv(e){return Object.keys(e)}function no(e,t){var r=X1(e),n=r.value,i=r.unit;if(Md(t)){var o=t[i];if(o){if(fA(o))return o(n);if(b_[i])return b_[i](n,o)}}else if(i==="%")return n*t/100;return b_[i]?b_[i](n):n}function A3(e,t,r){return Math.max(t,Math.min(e,r))}function EN(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[Ii(t[0],tl),Ii(t[0]/n,tl)],[Ii(t[1]*n,tl),Ii(t[1],tl)]].filter(function(i){return i.every(function(o,u){var a=t[u],f=Ii(a,tl);return r?o<=a||o<=f:o>=a||o>=f})})[0]||e}function vV(e,t,r,n){if(!n)return e.map(function(_,P){return A3(_,t[P],r[P])});var i=e[0],o=e[1],u=n===!0?i/o:n,a=EN(e,t,!1,u),f=a[0],p=a[1],g=EN(e,r,!0,u),b=g[0],S=g[1];return i<f||o<p?(i=f,o=p):(i>b||o>S)&&(i=b,o=S),[i,o]}function qce(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return r}function k3(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function Ns(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function Vce(e){return[0,1].map(function(t){return k3(e.map(function(r){return r[t]}))})}function TN(e){var t=Vce(e),r=Ns(t,e[0]),n=Ns(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function lh(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function Ii(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function IN(e,t){return e.forEach(function(r,n){e[n]=Ii(e[n],t)}),e}function $ce(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function Gce(e){return e.reduce(function(t,r){return t.concat(r)},[])}function cl(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function bV(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function _V(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function yu(e,t,r,n){e.addEventListener(t,r,n)}function $l(e,t,r,n){e.removeEventListener(t,r,n)}function mA(e){return e?.ownerDocument||Dce}function gA(e){return mA(e).documentElement}function xp(e){return mA(e).body}function ap(e){var t;return((t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function xV(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function yA(e){return Md(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}function Uce(e,t,r,n,i,o){for(var u=0;u<i;++u){var a=r+u*i,f=n+u*i;e[a]+=e[f]*o,t[a]+=t[f]*o}}function Hce(e,t,r,n,i){for(var o=0;o<i;++o){var u=r+o*i,a=n+o*i,f=e[u],p=t[u];e[u]=e[a],e[a]=f,t[u]=t[a],t[a]=p}}function Wce(e,t,r,n,i){for(var o=0;o<n;++o){var u=r+o*n;e[u]/=i,t[u]/=i}}function wV(e,t,r){for(var n=e.slice(),i=0;i<r;++i)n[i*r+t-1]=0,n[(t-1)*r+i]=0;return n[(t-1)*(r+1)]=1,n}function _f(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=Ro(t),i=0;i<t;++i){var o=t*i+i;if(!Ii(r[o],tl)){for(var u=i+1;u<t;++u)if(r[t*i+u]){Hce(r,n,i,u,t);break}}if(!Ii(r[o],tl))return[];Wce(r,n,i,t,r[o]);for(var u=0;u<t;++u){var a=u,f=u+i*t,p=r[f];!Ii(p,tl)||i===u||Uce(r,n,a,i,t,-p)}}return n}function Xce(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=0;n<t;++n)for(var i=0;i<t;++i)r[i*t+n]=e[t*n+i];return r}function SV(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=e[t*t-1],i=0;i<t-1;++i)r[i]=e[t*(t-1)+i]/n;return r[t-1]=0,r}function Yce(e,t){for(var r=Ro(t),n=0;n<t-1;++n)r[t*(t-1)+n]=e[n]||0;return r}function Sm(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function Ld(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=Ro(r),i=Math.min(t,r),o=0;o<i-1;++o){for(var u=0;u<i-1;++u)n[o*r+u]=e[o*t+u];n[(o+1)*r-1]=e[(o+1)*t-1],n[(r-1)*r+o]=e[(t-1)*t+o]}return n[r*r-1]=e[t*t-1],n}function Vx(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Ro(e);return t.forEach(function(i){n=io(n,i,e)}),n}function io(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],i=e.length/r,o=t.length/i;if(i){if(!o)return e}else return t;for(var u=0;u<r;++u)for(var a=0;a<o;++a){n[a*r+u]=0;for(var f=0;f<i;++f)n[a*r+u]+=e[f*r+u]*t[a*i+f]}return n}function _a(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]+t[i];return n}function di(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]-t[i];return n}function Zce(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function CV(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function wu(e,t,r){r===void 0&&(r=t.length);var n=io(e,t,r),i=n[r-1];return n.map(function(o){return o/i})}function Kce(e,t){return io(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function Jce(e,t){return io(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function Qce(e,t){return io(e,Z1(t,4))}function __(e,t){var r=t[0],n=r===void 0?1:r,i=t[1],o=i===void 0?1:i,u=t[2],a=u===void 0?1:u;return io(e,[n,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function Y1(e,t){return wu(Z1(t,3),Sm(e,3))}function eC(e,t){var r=t[0],n=r===void 0?0:r,i=t[1],o=i===void 0?0:i,u=t[2],a=u===void 0?0:u;return io(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,o,a,1],4)}function PN(e,t){return io(e,t,4)}function Z1(e,t){var r=Math.cos(e),n=Math.sin(e),i=Ro(t);return i[0]=r,i[1]=n,i[t]=-n,i[t+1]=r,i}function Ro(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function vA(e,t){for(var r=Ro(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[(t+1)*i]=e[i];return r}function Cm(e,t){for(var r=Ro(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[t*(t-1)+i]=e[i];return r}function bA(e,t,r,n,i,o,u,a){var f=e[0],p=e[1],g=t[0],b=t[1],S=r[0],_=r[1],P=n[0],k=n[1],M=i[0],D=i[1],F=o[0],B=o[1],N=u[0],$=u[1],V=a[0],U=a[1],X=[f,0,g,0,S,0,P,0,p,0,b,0,_,0,k,0,1,0,1,0,1,0,1,0,0,f,0,g,0,S,0,P,0,p,0,b,0,_,0,k,0,1,0,1,0,1,0,1,-M*f,-D*f,-F*g,-B*g,-N*S,-$*S,-V*P,-U*P,-M*p,-D*p,-F*b,-B*b,-N*_,-$*_,-V*k,-U*k],Z=_f(X,8);if(!Z.length)return[];var oe=io(Z,[M,D,F,B,N,$,V,U],8);return oe[8]=1,Ld(Xce(oe),3,4)}var $0=function(){return $0=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},$0.apply(this,arguments)};function ede(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function f1(e,t){return t===void 0&&(t=0),Ug(jy(e,t))}function tde(e,t){var r=wu(e,[t[0],t[1]||0,t[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function Ug(e){var t=ede();return e.forEach(function(r){var n=r.matrixFunction,i=r.functionValue;n&&(t=n(t,i))}),t}function jy(e,t){t===void 0&&(t=0);var r=Ml(e)?e:cp(e);return r.map(function(n){var i=gV(n),o=i.prefix,u=i.value,a=null,f=o,p="";if(o==="translate"||o==="translateX"||o==="translate3d"){var g=Md(t)?$0($0({},t),{"o%":t["%"]}):{"%":t,"o%":t},b=cm(u).map(function(ae,se){return se===0&&"x%"in g?g["%"]=t["x%"]:se===1&&"y%"in g?g["%"]=t["y%"]:g["%"]=t["o%"],no(ae,g)}),S=b[0],_=b[1],P=_===void 0?0:_,k=b[2],M=k===void 0?0:k;a=eC,p=[S,P,M]}else if(o==="translateY"){var D=Md(t)?$0({"%":t["y%"]},t):{"%":t},P=no(u,D);a=eC,p=[0,P,0]}else if(o==="translateZ"){var M=parseFloat(u);a=eC,p=[0,0,M]}else if(o==="scale"||o==="scale3d"){var F=cm(u).map(function(ae){return parseFloat(ae)}),B=F[0],N=F[1],$=N===void 0?B:N,V=F[2],U=V===void 0?1:V;a=__,p=[B,$,U]}else if(o==="scaleX"){var B=parseFloat(u);a=__,p=[B,1,1]}else if(o==="scaleY"){var $=parseFloat(u);a=__,p=[1,$,1]}else if(o==="scaleZ"){var U=parseFloat(u);a=__,p=[1,1,U]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var X=X1(u),Z=X.unit,oe=X.value,re=Z==="rad"?oe:oe*Math.PI/180;o==="rotate"||o==="rotateZ"?(f="rotateZ",a=Qce):o==="rotateX"?a=Kce:o==="rotateY"&&(a=Jce),p=re}else if(o==="matrix3d")a=PN,p=cm(u).map(function(ae){return parseFloat(ae)});else if(o==="matrix"){var H=cm(u).map(function(ae){return parseFloat(ae)});a=PN,p=[H[0],H[1],0,0,H[2],H[3],0,0,0,0,1,0,H[4],H[5],0,1]}else f="";return{name:o,functionName:f,value:u,matrixFunction:a,functionValue:p}})}var rde=(function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var i=this.keys,o=this.values,u=i.indexOf(r),a=u===-1?i.length:u;i[a]=r,o[a]=n},e})(),nde=(function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e})(),ide=typeof Map=="function",ade=(function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e})();function ode(e,t){var r=[],n=[];return e.forEach(function(i){var o=i[0],u=i[1],a=new ade;r[o]=a,n[u]=a}),r.forEach(function(i,o){i.connect(r[o-1])}),e.filter(function(i,o){return!t[o]}).map(function(i,o){var u=i[0],a=i[1];if(u===a)return[0,0];var f=r[u],p=n[a-1],g=f.getIndex();f.disconnect(),p?f.connect(p,p.next):f.connect(void 0,r[0]);var b=f.getIndex();return[g,b]})}var sde=(function(){function e(r,n,i,o,u,a,f,p){this.prevList=r,this.list=n,this.added=i,this.removed=o,this.changed=u,this.maintained=a,this.changedBeforeAdded=f,this.fixed=p}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=ode(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(o,u){var a=o[0],f=o[1],p=n[u],g=p[0],b=p[1];if(a!==f)return i.push([g,b]),!0}),this.cachePureChanged=i},e})();function _A(e,t,r){var n=ide?Map:r?nde:rde,i=r||function(F){return F},o=[],u=[],a=[],f=e.map(i),p=t.map(i),g=new n,b=new n,S=[],_=[],P={},k=[],M=0,D=0;return f.forEach(function(F,B){g.set(F,B)}),p.forEach(function(F,B){b.set(F,B)}),f.forEach(function(F,B){var N=b.get(F);typeof N>"u"?(++D,u.push(B)):P[N]=D}),p.forEach(function(F,B){var N=g.get(F);typeof N>"u"?(o.push(B),++M):(a.push([N,B]),D=P[B]||0,S.push([N-D,B-M]),_.push(B===N),N!==B&&k.push([N,B]))}),u.reverse(),new sde(e,t,o,u,k,a,S,_)}var lde=(function(){function e(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var n=[].slice.call(r),i=_A(this.list,n,this.findKeyCallback);return this.list=n,i},e})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var M3=function(e,t){return M3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},M3(e,t)};function ude(e,t){M3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var EV=typeof Map=="function"?void 0:(function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}})(),TV=(function(e){ude(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,EV)||this}return t})(lde);function cde(e,t){return _A(e,t,EV)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var L3=function(){return L3=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},L3.apply(this,arguments)};function dde(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,i++)n[i]=o[u];return n}var xA=(function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(Md(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(!r)this._events={};else if(Md(r))for(var i in r)this.off(i);else if(!n)this._events[r]=[];else{var o=this._events[r];if(o){var u=gh(o,function(a){return a.listener===n});u>-1&&o.splice(u,1)}}return this},t.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(o){i._addEvent(r,o,{once:!0})})},t.emit=function(r,n){var i=this;n===void 0&&(n={});var o=this._events[r];if(!r||!o)return!0;var u=!1;return n.eventType=r,n.stop=function(){u=!0},n.currentTarget=this,dde(o).forEach(function(a){a.listener(n),a.once&&i.off(r,a.listener)}),!u},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,i){var o=this._events;o[r]=o[r]||[];var u=o[r];u.push(L3({listener:n},i))},e})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R3=function(e,t){return R3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},R3(e,t)};function fde(e,t){R3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var hy=function(){return hy=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},hy.apply(this,arguments)};function hde(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function AN(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function x_(e){if(e){if(wh(e))return document.querySelector(e)}else return null;if(fA(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var pde=(function(e){fde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(o){n.checkScroll({container:i.container,inputEvent:o})}})},n}var r=t.prototype;return r.dragStart=function(n,i){var o=x_(i.container);if(!o){this._flag=!1;return}var u=0,a=0,f=0,p=0;if(o===document.body)f=window.innerWidth,p=window.innerHeight;else{var g=o.getBoundingClientRect();u=g.top,a=g.left,f=g.width,p=g.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:u,left:a,width:f,height:p},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},r.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var o=n.clientX,u=n.clientY,a=i.threshold,f=a===void 0?0:a,p=this,g=p._startRect,b=p._startPos;this._currentOptions=i;var S=[0,0];return g.top>u-f?(b[1]>g.top||u<b[1])&&(S[1]=-1):g.top+g.height<u+f&&(b[1]<g.top+g.height||u>b[1])&&(S[1]=1),g.left>o-f?(b[0]>g.left||o<b[0])&&(S[0]=-1):g.left+g.width<o+f&&(b[0]<g.left+g.width||o>b[0])&&(S[0]=1),!S[0]&&!S[1]?!1:this._continueDrag(hy(hy({},i),{direction:S,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var i=this;if(this._isWait)return!1;var o=n.prevScrollPos,u=o===void 0?this._prevScrollPos:o,a=n.direction,f=n.throttleTime,p=f===void 0?0:f,g=n.inputEvent,b=n.isDrag,S=this._getScrollPosition(a||[0,0],n),_=S[0]-u[0],P=S[1]-u[1],k=a||[_?Math.abs(_)/_:0,P?Math.abs(P)/P:0];return this._prevScrollPos=S,this._lock=!1,!_&&!P?!1:(this.emit("move",{offsetX:k[0]?_:0,offsetY:k[1]?P:0,inputEvent:g}),p&&b&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},p)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,i){var o=i.container,u=i.getScrollPosition,a=u===void 0?hde:u;return a({container:x_(o),direction:n})},r._continueDrag=function(n){var i=this,o,u=n.container,a=n.direction,f=n.throttleTime,p=n.useScroll,g=n.isDrag,b=n.inputEvent;if(!(!this._flag||g&&this._isWait)){var S=d1(),_=Math.max(f+this._prevTime-S,0);if(_>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},_),!1;this._prevTime=S;var P=this._getScrollPosition(a,n);this._prevScrollPos=P,g&&(this._isWait=!0),p||(this._lock=!0);var k={container:x_(u),direction:a,inputEvent:b};return(o=n.requestScroll)===null||o===void 0||o.call(n,k),this.emit("scroll",k),this._isWait=!1,p||this.checkScroll(hy(hy({},n),{prevScrollPos:P,direction:a,inputEvent:b}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var o=i===!0?AN:i,u=x_(n.container);i===!0&&(u===document.body||u===document.documentElement)?this._unregister=AN(window,this._onScroll):this._unregister=o(u,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t})(xA);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function mde(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,i++)n[i]=o[u];return n}function Xu(e){return Ii(e,tl)}function gde(e,t){return e.every(function(r,n){return Xu(r-t[n])===0})}function yde(e,t){return!Xu(e[0]-t[0])&&!Xu(e[1]-t[1])}function IV(e){return e.length<3?0:Math.abs(qce(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function kN(e,t){var r=t.width,n=t.height,i=t.left,o=t.top,u=Em(e),a=u.minX,f=u.minY,p=u.maxX,g=u.maxY,b=r/(p-a),S=n/(g-f);return e.map(function(_){return[i+(_[0]-a)*b,o+(_[1]-f)*S]})}function Em(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function D3(e,t,r){var n=e[0],i=e[1],o=Em(t),u=o.minX,a=o.maxX,f=[[u,i],[a,i]],p=$x(f[0],f[1]),g=O3(t),b=[];if(g.forEach(function(P){var k=$x(P[0],P[1]),M=P[0];if(gde(p,k))b.push({pos:e,line:P,type:"line"});else{var D=PV(wA(p,k),[f,P]);D.forEach(function(F){P.some(function(B){return yde(B,F)})?b.push({pos:F,line:P,type:"point"}):Xu(M[1]-i)!==0&&b.push({pos:F,line:P,type:"intersection"})})}}),Sc(b,function(P){return P[0]===n}))return!0;var S=0,_={};return b.forEach(function(P){var k=P.pos,M=P.type,D=P.line;if(!(k[0]>n))if(M==="intersection")++S;else{if(M==="line")return;if(M==="point"){var F=Sc(D,function($){return $[1]!==i}),B=_[k[0]],N=F[1]>i?1:-1;B?B!==N&&++S:_[k[0]]=N}}}),S%2===1}function $x(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],u=i-r,a=o-n;Math.abs(u)<tl&&(u=0),Math.abs(a)<tl&&(a=0);var f=0,p=0,g=0;return u?a?(f=-a/u,p=1,g=-f*r-n):(p=1,g=-n):a&&(f=-1,g=r),[f,p,g]}function wA(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],u=t[1],a=t[2],f=r===0&&o===0,p=n===0&&u===0,g=[];if(f&&p)return[];if(f){var b=-i/n,S=-a/u;return b!==S?[]:[[-1/0,b],[1/0,b]]}else if(p){var _=-i/r,P=-a/o;return _!==P?[]:[[_,-1/0],[_,1/0]]}else if(r===0){var k=-i/n,M=-(u*k+a)/o;g=[[M,k]]}else if(o===0){var k=-a/u,M=-(n*k+i)/r;g=[[M,k]]}else if(n===0){var M=-i/r,k=-(o*M+a)/u;g=[[M,k]]}else if(u===0){var M=-a/o,k=-(r*M+i)/n;g=[[M,k]]}else{var M=(n*a-u*i)/(u*r-n*o),k=-(r*M+i)/n;g=[[M,k]]}return g.map(function(D){return[D[0],D[1]]})}function PV(e,t){var r=t.map(function(b){return[0,1].map(function(S){return[Math.min(b[0][S],b[1][S]),Math.max(b[0][S],b[1][S])]})}),n=[];if(e.length===2){var i=e[0],o=i[0],u=i[1];if(Xu(o-e[1][0])){if(!Xu(u-e[1][1])){var p=Math.max.apply(Math,r.map(function(b){return b[0][0]})),g=Math.min.apply(Math,r.map(function(b){return b[0][1]}));if(Xu(p-g)>0)return[];n=[[p,u],[g,u]]}}else{var a=Math.max.apply(Math,r.map(function(b){return b[1][0]})),f=Math.min.apply(Math,r.map(function(b){return b[1][1]}));if(Xu(a-f)>0)return[];n=[[o,a],[o,f]]}}return n.length||(n=e.filter(function(b){var S=b[0],_=b[1];return r.every(function(P){return 0<=Xu(S-P[0][0])&&0<=Xu(P[0][1]-S)&&0<=Xu(_-P[1][0])&&0<=Xu(P[1][1]-_)})})),n.map(function(b){return[Xu(b[0]),Xu(b[1])]})}function O3(e){return mde(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function vde(e,t){var r=e.slice(),n=t.slice();TN(r)===-1&&r.reverse(),TN(n)===-1&&n.reverse();var i=O3(r),o=O3(n),u=i.map(function(g){return $x(g[0],g[1])}),a=o.map(function(g){return $x(g[0],g[1])}),f=[];u.forEach(function(g,b){var S=i[b],_=[];a.forEach(function(P,k){var M=wA(g,P),D=PV(M,[S,o[k]]);_.push.apply(_,D.map(function(F){return{index1:b,index2:k,pos:F,type:"intersection"}}))}),_.sort(function(P,k){return lh(S[0],P.pos)-lh(S[0],k.pos)}),f.push.apply(f,_),D3(S[1],n)&&f.push({index1:b,index2:-1,pos:S[1],type:"inside"})}),o.forEach(function(g,b){if(D3(g[1],r)){var S=!1,_=gh(f,function(P){var k=P.index2;return k===b?(S=!0,!1):!!S});_===-1&&(S=!1,_=gh(f,function(P){var k=P.index1,M=P.index2;return k===-1&&M+1===b?(S=!0,!1):!!S})),_===-1?f.push({index1:-1,index2:b,pos:g[1],type:"inside"}):f.splice(_,0,{index1:-1,index2:b,pos:g[1],type:"inside"})}});var p={};return f.filter(function(g){var b=g.pos,S=b[0]+"x"+b[1];return p[S]?!1:(p[S]=!0,!0)})}function bde(e,t){var r=vde(e,t);return r.map(function(n){var i=n.pos;return i})}function _de(e,t){var r=bde(e,t);return IV(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var N3=function(e,t){return N3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},N3(e,t)};function xde(e,t){N3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Qs=function(){return Qs=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Qs.apply(this,arguments)};function wde(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function tC(e){return wde([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function Sde(e){return e.touches&&e.touches.length>=2}function w_(e){return e?e.touches?Ede(e.touches):[AV(e)]:[]}function Cde(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function MN(e,t,r){var n=r.length,i=G0(e,n),o=i.clientX,u=i.clientY,a=i.originalClientX,f=i.originalClientY,p=G0(t,n),g=p.clientX,b=p.clientY,S=G0(r,n),_=S.clientX,P=S.clientY,k=o-g,M=u-b,D=o-_,F=u-P;return{clientX:a,clientY:f,deltaX:k,deltaY:M,distX:D,distY:F}}function rC(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function Ede(e){for(var t=Math.min(e.length,2),r=[],n=0;n<t;++n)r.push(AV(e[n]));return r}function AV(e){return{clientX:e.clientX,clientY:e.clientY}}function G0(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),i=0;i<n;++i){var o=e[i];r.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,r.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,r.clientX+=o.clientX,r.clientY+=o.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var nC=(function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),tC(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),tC(t)-tC(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=MN(t||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,o=n.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,i=Math.min(this.length,r.length),o=[],u=0;u<i;++u)o[u]=MN([t[u]],[r[u]],[n[u]]);return o},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=G0(t,this.length),i=G0(this.prevClients,this.length),o=n.clientX-i.clientX,u=n.clientY-i.clientY;return Math.sqrt(o*o+u*u)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),rC(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),rC(t)/rC(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e})(),LN=["textarea","input"],Tde=(function(e){xde(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(S,_){if(_===void 0&&(_=!0),!(!i.flag&&S.cancelable===!1)){var P=S.type.indexOf("drag")>=-1;if(!(i.flag&&P)){i._isDragAPI=!0;var k=i.options,M=k.container,D=k.pinchOutside,F=k.preventWheelClick,B=k.preventRightClick,N=k.preventDefault,$=k.checkInput,V=k.dragFocusedInput,U=k.preventClickEventOnDragStart,X=k.preventClickEventOnDrag,Z=k.preventClickEventByCondition,oe=i._useTouch,re=!i.flag;if(i._isSecondaryButton=S.which===3||S.button===2,F&&(S.which===2||S.button===1)||B&&(S.which===3||S.button===2))return i.stop(),!1;if(re){var H=i._window.document.activeElement,ae=S.target;if(ae){var se=ae.tagName.toLowerCase(),de=LN.indexOf(se)>-1,fe=ae.isContentEditable;if(de||fe){if($||!V&&H===ae)return!1;if(H&&(H===ae||fe&&H.isContentEditable&&H.contains(ae)))if(V)ae.blur();else return!1}else if((N||S.type==="touchstart")&&H){var Le=H.tagName.toLowerCase();(H.isContentEditable||LN.indexOf(Le)>-1)&&H.blur()}(U||X||Z)&&yu(i._window,"click",i._onClick,!0)}i.clientStores=[new nC(w_(S))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=_,i._dragFlag=!0,i._prevInputEvent=S,i.data={},i.doubleFlag=d1()-i.prevTime<200,i._isMouseEvent=Cde(S),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ye=i._preventMouseEvent||i.emit("dragStart",Qs(Qs({data:i.data,datas:i.data,inputEvent:S,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:_,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){S.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ye===!1&&i.stop(),i._isMouseEvent&&i.flag&&N&&S.preventDefault()}if(!i.flag)return!1;var xe=0;if(re?(i._attchDragEvent(),oe&&D&&(xe=setTimeout(function(){yu(M,"touchstart",i.onDragStart,{passive:!1})}))):oe&&D&&$l(M,"touchstart",i.onDragStart),i.flag&&Sde(S)){if(clearTimeout(xe),re&&S.touches.length!==S.changedTouches.length)return;i.pinchFlag||i.onPinchStart(S)}}}},i.onDrag=function(S,_){if(i.flag){var P=i.options.preventDefault;!i._isMouseEvent&&P&&S.preventDefault(),i._prevInputEvent=S;var k=w_(S),M=i.moveClients(k,S,!1);if(i._dragFlag){if(i.pinchFlag||M.deltaX||M.deltaY){var D=i._preventMouseEvent||i.emit("drag",Qs(Qs({},M),{isScroll:!!_,inputEvent:S}));if(D===!1){i.stop();return}}i.pinchFlag&&i.onPinch(S,k)}i.getCurrentStore().getPosition(k,!0)}},i.onDragEnd=function(S){if(i.flag){var _=i.options,P=_.pinchOutside,k=_.container,M=_.preventClickEventOnDrag,D=_.preventClickEventOnDragStart,F=_.preventClickEventByCondition,B=i.isDrag;(M||D||F)&&requestAnimationFrame(function(){i._allowClickEvent()}),!F&&!D&&M&&!B&&i._allowClickEvent(),i._useTouch&&P&&$l(k,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(S);var N=S?.touches?w_(S):[],$=N.length;$===0||!i.options.keepDragging?i.flag=!1:i._addStore(new nC(N));var V=i._getPosition(),U=d1(),X=!B&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=B||X?0:U,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Qs({data:i.data,datas:i.data,isDouble:X,isDrag:B,isClick:!B,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:S,isTrusted:i._isTrusted},V)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){$l(i._window,"click",i._onClick,!0)},i._onClick=function(S){i._allowClickEvent(),i._allowMouseEvent();var _=i.options.preventClickEventByCondition;_?.(S)||(S.stopPropagation(),S.preventDefault())},i._onContextMenu=function(S){var _=i.options;_.preventRightClick?i.onDragEnd(S):S.preventDefault()},i._passCallback=function(){};var o=[].concat(r),u=o[0];i._window=xV(u)?u:ap(u),i.options=Qs({checkInput:!1,container:u&&!("document"in u)?ap(u):u,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var a=i.options,f=a.container,p=a.events,g=a.checkWindowBlur;if(i._useDrag=p.indexOf("drag")>-1,i._useTouch=p.indexOf("touch")>-1,i._useMouse=p.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach(function(S){yu(S,"dragstart",i.onDragStart)}),i._useMouse&&(o.forEach(function(S){yu(S,"mousedown",i.onDragStart),yu(S,"mousemove",i._passCallback)}),yu(f,"contextmenu",i._onContextMenu)),g&&yu(ap(),"blur",i.onBlur),i._useTouch){var b={passive:!1};o.forEach(function(S){yu(S,"touchstart",i.onDragStart,b),yu(S,"touchmove",i._passCallback,b)})}return i}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(r,n),o&&this.onDrag(i,!0))},t.prototype.move=function(r,n){var i=r[0],o=r[1],u=this.getCurrentStore(),a=u.prevClients;return this.moveClients(a.map(function(f){var p=f.clientX,g=f.clientY;return{clientX:p+i,clientY:g+o,originalClientX:p,originalClientY:g}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var i in r)n[i]=r[i];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Qs(Qs({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,i=this.options.container;this.off(),$l(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(o){$l(o,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(o){$l(o,"mousedown",r.onDragStart)}),$l(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(o){$l(o,"touchstart",r.onDragStart)}),$l(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var o=new nC(w_(r));this.pinchFlag=!0,this._addStore(o);var u=this.emit("pinchStart",Qs(Qs({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));u===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Qs(Qs({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Qs(Qs({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,i){var o=this._getPosition(r,i),u=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!u&&this.isDrag&&(a=!0),Qs(Qs({data:this.data,datas:this.data},o),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:a})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var i=this.getCurrentStore(),o=i.getPosition(r,n),u=this.clientStores.slice(1).reduce(function(p,g){var b=g.getPosition();return p.distX+=b.distX,p.distY+=b.distY,p},o),a=u.distX,f=u.distY;return Qs(Qs({},o),{distX:a,distY:f})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(yu(n,"dragover",this.onDrag,i),yu(r,"dragend",this.onDragEnd)),this._useMouse&&(yu(n,"mousemove",this.onDrag),yu(r,"mouseup",this.onDragEnd)),this._useTouch&&(yu(n,"touchmove",this.onDrag,i),yu(r,"touchend",this.onDragEnd,i),yu(r,"touchcancel",this.onDragEnd,i))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&($l(n,"dragover",this.onDrag),$l(r,"dragend",this.onDragEnd)),this._useMouse&&($l(n,"mousemove",this.onDrag),$l(r,"mouseup",this.onDragEnd)),this._useTouch&&($l(n,"touchstart",this.onDragStart),$l(n,"touchmove",this.onDrag),$l(r,"touchend",this.onDragEnd),$l(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t})(xA);function Ide(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var Pde=Ide;function Ade(e){return Pde(e).toString(36)}function kde(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function Mde(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var o=i.trim();return(o?cm(o):[""]).map(function(u){var a=u.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(e))):a?".".concat(e," ").concat(a):".".concat(e)}).join(", ")+" {"})}function Lde(e,t,r,n,i){var o=mA(n),u=o.createElement("style");return u.setAttribute("type","text/css"),u.setAttribute("data-styled-id",e),u.setAttribute("data-styled-count","1"),r.nonce&&u.setAttribute("nonce",r.nonce),u.innerHTML=Mde(e,t,r),(i||o.head||o.body).appendChild(u),u}function Rde(e){var t="rCS"+Ade(e);return{className:t,inject:function(r,n){n===void 0&&(n={});var i=kde(r),o=(i||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!o)o=Lde(t,e,n,r,i);else{var u=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(u+1))}return{destroy:function(){var a,f=parseFloat(o.getAttribute("data-styled-count"))||0;f<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(f-1))}}}}}var F3=function(){return F3=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},F3.apply(this,arguments)};function Dde(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function kV(e,t){var r=Rde(t),n=r.className;return ee.forwardRef(function(i,o){var u=i.className,a=u===void 0?"":u;i.cspNonce;var f=Dde(i,["className","cspNonce"]),p=ee.useRef();return ee.useImperativeHandle(o,function(){return p.current},[]),ee.useEffect(function(){var g=r.inject(p.current,{nonce:i.cspNonce});return function(){g.destroy()}},[]),ee.createElement(e,F3({ref:p,"data-styled-id":n,className:"".concat(a," ").concat(n)},f))})}var B3=function(e,t){return B3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},B3(e,t)};function K1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");B3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ut=function(){return Ut=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ut.apply(this,arguments)};function Ode(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Nde(e,t,r,n){var i=arguments.length,o=i<3?t:n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(u=e[a])&&(o=(i<3?u(o):i>3?u(t,r,o):u(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function Fde(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yt(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return o}function ln(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function J1(e,t){return Ut({events:[],props:[],name:e},t)}var Bde=["n","w","s","e"],SA=["n","w","s","e","nw","ne","sw","se"];function zde(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function jde(e){var t=zde(1,e),r=Math.round(e/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var av=Tce(),MV=av.browser.webkit,LV=MV&&(function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1})(),RV=av.browser.name,DV=parseInt(av.browser.version,10),qde=RV==="chrome",Vde=av.browser.chromium,$de=parseInt(av.browser.chromiumVersion,10)||0,Gde=qde&&DV>=109||Vde&&$de>=109,Ude=RV==="firefox",Hde=parseInt(av.browser.webkitVersion,10)>=612||DV>=15,CA="moveable-",Wde=SA.map(function(e){var t="",r="",n="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(o,";"),i="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",i="top"),e.indexOf("w")>-1&&(r="left: ".concat(o,";"),n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),Xde=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Wde,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(jde(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(LV?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Yde=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],z3=1e-4,ju=1e-7,S_=1e-9,j3=Math.pow(10,10),RN=-j3,Zde={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},EA={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},OV={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Kde=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Q1(e,t,r,n,i,o){var u,a;o===void 0&&(o="draggable");var f=(a=(u=t.gestos[o])===null||u===void 0?void 0:u.move(r,e.inputEvent))!==null&&a!==void 0?a:{},p=f.originalDatas||f.datas,g=p[o]||(p[o]={});return Ut(Ut({},f),{isPinch:!!n,parentEvent:!0,datas:g,originalDatas:e.originalDatas})}var qy=(function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),Ut(Ut({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var n,i,o=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0;else{var u=this.isDrag;n=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!u&&this.isDrag&&(o=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:r,isFirstDrag:o,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e})();function Iy(e,t,r,n){var i=e.length===16,o=i?4:3,u=qm(e,r,n,o),a=Yt(u,4),f=Yt(a[0],2),p=f[0],g=f[1],b=Yt(a[1],2),S=b[0],_=b[1],P=Yt(a[2],2),k=P[0],M=P[1],D=Yt(a[3],2),F=D[0],B=D[1],N=Yt(es(e,t,o),2),$=N[0],V=N[1],U=Math.min(p,S,k,F),X=Math.min(g,_,M,B),Z=Math.max(p,S,k,F),oe=Math.max(g,_,M,B);p=p-U||0,S=S-U||0,k=k-U||0,F=F-U||0,g=g-X||0,_=_-X||0,M=M-X||0,B=B-X||0,$=$-U||0,V=V-X||0;var re=e[0],H=e[o+1],ae=Nu(re*H);return{left:U,top:X,right:Z,bottom:oe,origin:[$,V],pos1:[p,g],pos2:[S,_],pos3:[k,M],pos4:[F,B],direction:ae}}function NV(e,t){var r=t.clientX,n=t.clientY,i=t.datas,o=e.state,u=o.moveableClientRect,a=o.rootMatrix,f=o.is3d,p=o.pos1,g=u.left,b=u.top,S=f?4:3,_=Yt(di(Gy(a,[r-g,n-b],S),p),2),P=_[0],k=_[1],M=Yt(Tf({datas:i,distX:P,distY:k}),2),D=M[0],F=M[1];return[D,F]}function jm(e,t){var r=t.datas,n=e.state,i=n.allMatrix,o=n.beforeMatrix,u=n.is3d,a=n.left,f=n.top,p=n.origin,g=n.offsetMatrix,b=n.targetMatrix,S=n.transformOrigin,_=u?4:3;r.is3d=u,r.matrix=i,r.targetMatrix=b,r.beforeMatrix=o,r.offsetMatrix=g,r.transformOrigin=S,r.inverseMatrix=_f(i,_),r.inverseBeforeMatrix=_f(o,_),r.absoluteOrigin=Sm(_a([a,f],p),_),r.startDragBeforeDist=wu(r.inverseBeforeMatrix,r.absoluteOrigin,_),r.startDragDist=wu(r.inverseMatrix,r.absoluteOrigin,_)}function Jde(e){return Iy(e.datas.beforeTransform,[50,50],100,100).direction}function ww(e,t,r){var n=t.datas,i=t.originalDatas.beforeRenderable,o=n.transformIndex,u=i.nextTransforms,a=u.length,f=i.nextTransformAppendedIndexes,p=-1;o===-1?(r==="translate"?p=0:r==="rotate"&&(p=gh(u,function(_){return _.match(/scale\(/g)})),p===-1&&(p=u.length),n.transformIndex=p):Sc(f,function(_){return _.index===o&&_.functionName===r})?p=o:p=o+f.filter(function(_){return _.index<o}).length;var g=Che(u,e.state,p),b=g.targetFunction,S=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=g.beforeFunctionTexts,n.afterFunctionTexts=g.afterFunctionTexts,n.beforeTransform=g.beforeFunctionMatrix,n.beforeTransform2=g.beforeFunctionMatrix2,n.targetTansform=g.targetFunctionMatrix,n.afterTransform=g.afterFunctionMatrix,n.afterTransform2=g.afterFunctionMatrix2,n.targetAllTransform=g.allFunctionMatrix,b.functionName===S?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):a>p&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=ln(ln([],Yt(f),!1),[{functionName:r,index:p,isAppend:!0}],!1))}function Sw(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function Qde(e){var t=e.datas,r=e.distX,n=e.distY,i=Yt(BV({datas:t,distX:r,distY:n}),2),o=i[0],u=i[1],a=FV(t,Yce([o,u],4));return wu(a,Sm([0,0,0],4),4)}function FV(e,t,r){var n=e.beforeTransform,i=e.afterTransform,o=e.beforeTransform2,u=e.afterTransform2,a=e.targetAllTransform,f=r?io(a,t,4):io(t,a,4),p=io(_f(r?o:n,4),f,4),g=io(p,_f(r?u:i,4),4);return g}function BV(e){var t=e.datas,r=e.distX,n=e.distY,i=t.inverseBeforeMatrix,o=t.is3d,u=t.startDragBeforeDist,a=t.absoluteOrigin,f=o?4:3;return di(wu(i,_a(a,[r,n]),f),u)}function Tf(e,t){var r=e.datas,n=e.distX,i=e.distY,o=r.inverseBeforeMatrix,u=r.inverseMatrix,a=r.is3d,f=r.startDragBeforeDist,p=r.startDragDist,g=r.absoluteOrigin,b=a?4:3;return di(wu(t?o:u,_a(g,[n,i]),b),t?f:p)}function efe(e,t){var r=e.datas,n=e.distX,i=e.distY;r.beforeMatrix;var o=r.matrix,u=r.is3d;r.startDragBeforeDist;var a=r.startDragDist,f=r.absoluteOrigin,p=u?4:3;return di(wu(o,_a(a,[n,i]),p),f)}function tfe(e,t,r,n,i,o){return n===void 0&&(n=t),i===void 0&&(i=r),o===void 0&&(o=[0,0]),e?e.map(function(u,a){var f=X1(u),p=f.value,g=f.unit,b=a?i:n,S=a?r:t;if(u==="%"||isNaN(p)){var _=b?o[a]/b:0;return S*_}else if(g!=="%")return p;return S*p/100}):o}function zV(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function rfe(e,t){return zV(t).map(function(r){return e[r]})}function iC(e,t){var r=(t+1)/2;return[qx(e[0][0],e[1][0],r,1-r),qx(e[0][1],e[1][1],r,1-r)]}function dl(e,t){var r=iC([e[0],e[1]],t[0]),n=iC([e[2],e[3]],t[0]);return iC([r,n],t[1])}function nfe(e,t,r,n,i,o){var u=qm(t,r,n,i),a=dl(u,o),f=e[0]-a[0],p=e[1]-a[1];return[f,p]}function eb(e,t,r,n){return io(e,H0(t,n,r),n)}function ife(e,t,r,n){var i=e.transformOrigin,o=e.offsetMatrix,u=e.is3d,a=u?4:3,f;if(wh(r)){var p=t.beforeTransform,g=t.afterTransform;n?f=Ld(f1(r),4,a):f=Ld(io(io(p,f1([r]),4),g,4),4,a)}else f=r;return eb(o,f,i,a)}function afe(e,t){var r=e.transformOrigin,n=e.offsetMatrix,i=e.is3d,o=e.targetMatrix,u=e.targetAllTransform,a=i?4:3;return eb(n,io(u||o,vA(t,a),a),r,a)}function Cw(e,t){var r=ov(t);return{setTransform:function(n,i){i===void 0&&(i=-1),r.startTransforms=Ml(n)?n:cp(n),q3(e,t,i)},setTransformIndex:function(n){q3(e,t,n)}}}function Ew(e,t,r){var n=ov(t),i=n.startTransforms;q3(e,t,gh(i,function(o){return o.indexOf("".concat(r,"("))===0}))}function q3(e,t,r){var n=ov(t),i=t.datas;if(i.transformIndex=r,r!==-1){var o=n.startTransforms[r];if(o){var u=e.state,a=jy([o],{"x%":function(f){return f/100*u.offsetWidth},"y%":function(f){return f/100*u.offsetHeight}});i.startValue=a[0].functionValue}}}function TA(e,t){var r=ov(e);r.nextTransforms=cp(t)}function ov(e){return e.originalDatas.beforeRenderable}function Gx(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function C_(e){return(Gx(e)||[]).join(" ")}function E_(e){return ov(e).nextStyle}function jV(e,t,r,n,i){TA(i,t);var o=Ou.drag(e,Q1(i,e.state,r,n)),u=o?o.transform:t;return Ut(Ut({transform:t,drag:o},Fu({transform:u},i)),{afterTransform:u})}function IA(e,t,r,n,i,o){var u=ife(e.state,i,t,o),a=lfe(e,r,n,u);return a}function qV(e,t,r,n,i,o,u){var a=IA(e,t,r,i,o,u),f=e.state,p=f.left,g=f.top,b=e.props.groupable,S=b?p:0,_=b?g:0,P=di(n,a);return di(P,[S,_])}function ofe(e,t,r,n,i,o,u){var a=qV(e,t,r,n,i,o,u);return a}function sfe(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function lfe(e,t,r,n){n===void 0&&(n=e.state.allMatrix);var i=e.state,o=i.width,u=i.height,a=i.is3d,f=a?4:3,p=[o/2*(1+t[0])+r[0],u/2*(1+t[1])+r[1]];return es(n,p,f)}function ufe(e,t,r){var n=r.fixedDirection,i=r.fixedPosition,o=r.fixedOffset;return qV(e,"rotate(".concat(t,"deg)"),n,i,o,r)}function cfe(e,t,r,n,i,o){var u=e.props.groupable,a=e.state,f=a.transformOrigin,p=a.offsetMatrix,g=a.is3d,b=a.width,S=a.height,_=a.left,P=a.top,k=o.fixedDirection,M=o.nextTargetMatrix||a.targetMatrix,D=g?4:3,F=tfe(i,t,r,b,S,f),B=u?_:0,N=u?P:0,$=eb(p,M,F,D),V=nfe(n,$,t,r,D,k);return di(V,[B,N])}function dfe(e,t){return dl(nd(e.state),t)}function ffe(e,t){var r=e.targetGesto,n=e.controlGesto,i;return r?.isFlag()&&(i=r.getEventData()[t]),!i&&n?.isFlag()&&(i=n.getEventData()[t]),i||{}}function hfe(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function pfe(e){var t=e("scale"),r=e("rotate"),n=e("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&i.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&i.push("scale(".concat(t.split(/\s+/).join(","),")")),i}function VV(e,t,r){for(var n=e,i=[],o=gA(e)||xp(e),u=!r&&e===t||e===o,a=u,f=!1,p=3,g,b,S,_=!1,P=p1(t,t,!0).offsetParent,k=1;n&&!a;){a=u;var M=ec(n),D=M("position"),F=f$(n),B=D==="fixed",N=pfe(M),$=Zce(dhe(F)),V=void 0,U=!1,X=!1,Z=0,oe=0,re=0,H=0,ae={hasTransform:!1,fixedContainer:null};B&&(_=!0,ae=ghe(n),P=ae.fixedContainer);var se=$.length;!f&&(se===16||N.length)&&(f=!0,p=4,W3(i),S&&(S=Ld(S,3,4))),f&&se===9&&($=Ld($,3,4));var de=mhe(n,e),fe=de.tagName,Le=de.hasOffset,ye=de.isSVG,xe=de.origin,Se=de.targetOrigin,Re=de.offset,he=Yt(Re,2),Ee=he[0],we=he[1];fe==="svg"&&!n.ownerSVGElement&&S&&(i.push({type:"target",target:n,matrix:yhe(n,p)}),i.push({type:"offset",target:n,matrix:Ro(p)}));var Ne=parseFloat(M("zoom"))||1;if(B)V=ae.fixedContainer,U=!0;else{var Fe=p1(n,t,!1,!0,M),Xe=Fe.offsetZoom;if(V=Fe.offsetParent,U=Fe.isEnd,X=Fe.isStatic,k*=Xe,(Fe.isCustomElement||Xe!==1)&&X)Ee-=V.offsetLeft,we-=V.offsetTop;else if(Ude||Gde){var Be=Fe.parentSlotElement;if(Be){for(var ot=V,Ke=0,it=0;ot&&hfe(ot);)Ke+=ot.offsetLeft,it+=ot.offsetTop,ot=ot.offsetParent;Ee-=Ke,we-=it}}}if(MV&&!Hde&&Le&&!ye&&X&&(D==="relative"||D==="static")&&(Ee-=V.offsetLeft,we-=V.offsetTop,u=u||U),B)Le&&ae.hasTransform&&(re=V.clientLeft,H=V.clientTop);else if(Le&&P!==V&&(Z=V.clientLeft,oe=V.clientTop),Le&&V===o){var ke=h$(n,!1);Ee+=ke[0],we+=ke[1]}if(i.push({type:"target",target:n,matrix:H0($,p,xe)}),N.length&&(i.push({type:"offset",target:n,matrix:Ro(p)}),i.push({type:"target",target:n,matrix:H0(f1(N),p,xe)})),Le){var Nt=n===e,st=Nt?0:n.scrollLeft,$e=Nt?0:n.scrollTop;i.push({type:"offset",target:n,matrix:Cm([Ee-st+Z-re,we-$e+oe-H],p)})}else i.push({type:"offset",target:n,origin:xe});if(Ne!==1&&i.push({type:"zoom",target:n,matrix:H0(vA([Ne,Ne],p),p,[0,0])}),S||(S=$),g||(g=xe),b||(b=Se),a||B)break;n=V,u=U,(!r||n===o)&&(a=u)}return S||(S=Ro(p)),g||(g=[0,0]),b||(b=[0,0]),{zoom:k,offsetContainer:P,matrixes:i,targetMatrix:S,transformOrigin:g,targetOrigin:b,is3d:f,hasFixed:_}}var im=null,am=null,py=null;function Vy(e){e?(window.Map&&(im=new Map,am=new Map),py=[]):(im=null,py=null,am=null)}function mfe(e){var t=am?.get(e);if(t)return t;var r=W0(e,!0);return am&&am.set(e,r),r}function gfe(e,t){if(py){var r=Sc(py,function(i){return i[0][0]==e&&i[0][1]==t});if(r)return r[1]}var n=VV(e,t,!0);return py&&py.push([[e,t],n]),n}function ec(e){var t=im?.get(e);if(!t){var r=ap(e).getComputedStyle(e);if(!im)return function(o){return r[o]};t={style:r,cached:{}},im.set(e,t)}var n=t.cached,i=t.style;return function(o){return o in n||(n[o]=i[o]),n[o]}}function Pd(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return e.moveables.map(function(u,a){return o[a]=o[a]||{},o[a][t]=o[a][t]||{},Ut(Ut({},r),{isRequestChild:!0,datas:o[a][t],originalDatas:o[a]})})}function aC(e,t,r,n,i,o,u){var a=!!r.match(/Start$/g),f=!!r.match(/End$/g),p=i.isPinch,g=i.datas,b=Pd(e,t.name,i),S=e.moveables,_=[],P=b.map(function(k,M){var D=S[M],F=D.state,B=F.gestos,N=k;if(a)N=new qy(u).dragStart(n,k),_.push(N);else{if(B[u]||(B[u]=g.childGestos[M]),!B[u])return;N=Q1(k,F,n,p,o,u),_.push(N)}var $=t[r](D,Ut(Ut({},N),{parentFlag:!0}));return f&&(B[u]=null),$});return a&&(g.childGestos=S.map(function(k){return k.state.gestos[u]})),{eventParams:P,childEvents:_}}function uh(e,t,r,n,i,o){i===void 0&&(i=function(g,b){return b});var u=!!r.match(/End$/g),a=Pd(e,t.name,n),f=e.moveables,p=a.map(function(g,b){var S=f[b],_=g;_=i(S,g);var P=t[r](S,Ut(Ut({},_),{parentFlag:!0}));return u&&(S.state.gestos={}),P});return p}function Ux(e,t,r,n){var i=r.fixedDirection,o=r.fixedPosition,u=n.datas.startPositions||nd(t.state),a=dl(u,i),f=Yt(wu(Z1(-e.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),p=f[0],g=f[1];return n.datas.originalX=p,n.datas.originalY=g,n}function $V(e,t,r,n){var i=e.getState(),o=i.renderPoses,u=i.rotation,a=i.direction,f=Tm(e.props,t).zoom,p=U0(u/Math.PI*180),g={},b=e.renderState;b.renderDirectionMap||(b.renderDirectionMap={});var S=b.renderDirectionMap;r.forEach(function(P){var k=P.dir;g[k]=!0});var _=Nu(a);return r.map(function(P){var k=P.data,M=P.classNames,D=P.dir,F=EA[D];if(!F||!g[D])return null;S[D]=!0;var B=(Ii(p,15)+_*OV[D]+720)%180,N={};return iv(k).forEach(function($){N["data-".concat($)]=k[$]}),n.createElement("div",Ut({className:ui.apply(void 0,ln(["control","direction",D,t],Yt(M),!1)),"data-rotation":B,"data-direction":D},N,{key:"direction-".concat(D),style:Yx.apply(void 0,ln([u,f],Yt(F.map(function($){return o[$]})),!1))}))})}function GV(e,t,r,n){var i=Tm(e.props,r),o=i.renderDirections,u=o===void 0?t:o,a=i.displayAroundControls;if(!u)return[];var f=u===!0?SA:u;return ln(ln([],Yt(a?XV(e,n,r,f):[]),!1),Yt($V(e,r,f.map(function(p){return{data:{},classNames:[],dir:p}}),n)),!1)}function h1(e,t,r,n,i,o){for(var u=[],a=6;a<arguments.length;a++)u[a-6]=arguments[a];var f=Ns(r,n),p=t?Ii(f/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(o),className:ui.apply(void 0,ln(["line","direction",t?"edge":"",t],Yt(u),!1)),"data-rotation":p,"data-line-key":o,"data-direction":t,style:x0(r,n,i,f)})}function UV(e,t,r,n,i){var o=r===!0?Bde:r;return o.map(function(u,a){var f=Yt(EA[u],2),p=f[0],g=f[1];if(g!=null)return h1(e,u,n[p],n[g],i,"".concat(t,"Edge").concat(a),t)}).filter(Boolean)}function HV(e){return function(t,r){var n=Tm(t.props,e).edge;return n&&(n===!0||n.length)?ln(ln([],Yt(UV(r,e,n,t.getState().renderPoses,t.props.zoom)),!1),Yt(yfe(t,e,r)),!1):WV(t,e,r)}}function WV(e,t,r){return GV(e,SA,t,r)}function yfe(e,t,r){return GV(e,["nw","ne","sw","se"],t,r)}function XV(e,t,r,n){var i=e.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=e.getState(),u=o.renderPoses,a=o.rotation,f=o.direction,p=i.renderDirectionMap,g=e.props.zoom,b=Nu(f),S=a/Math.PI*180;return(n||iv(p)).map(function(_){var P=EA[_];if(!P)return null;var k=(Ii(S,15)+b*OV[_]+720)%180,M=["around-control"];return r&&M.push("direction",r),t.createElement("div",{className:ui.apply(void 0,ln([],Yt(M),!1)),"data-rotation":k,"data-direction":_,key:"direction-around-".concat(_),style:Yx.apply(void 0,ln([a,g],Yt(P.map(function(D){return u[D]})),!1))})})}function PA(e,t,r){var n=e||{},i=n.position,o=i===void 0?"client":i,u=n.left,a=u===void 0?-1/0:u,f=n.top,p=f===void 0?-1/0:f,g=n.right,b=g===void 0?1/0:g,S=n.bottom,_=S===void 0?1/0:S,P={position:o,left:a,top:p,right:b,bottom:_};return{vertical:DN(P,t,!0),horizontal:DN(P,r,!1)}}function Tw(e,t){var r=e.state,n=r.containerClientRect,i=n.clientHeight,o=n.clientWidth,u=n.clientLeft,a=n.clientTop,f=r.snapOffset,p=f.left,g=f.top,b=f.right,S=f.bottom,_=t||e.props.bounds||{},P=_.position||"client",k=P==="css",M=_.left,D=M===void 0?-1/0:M,F=_.top,B=F===void 0?-1/0:F,N=_.right,$=N===void 0?k?-1/0:1/0:N,V=_.bottom,U=V===void 0?k?-1/0:1/0:V;return k&&($=o+b-p-$,U=i+S-g-U),{left:D+p-u,right:$+p-u,top:B+g-a,bottom:U+g-a}}function vfe(e,t,r){var n=Tw(e),i=n.left,o=n.top,u=n.right,a=n.bottom,f=Yt(r,2),p=f[0],g=f[1],b=Yt(di(r,t),2),S=b[0],_=b[1];Xr(S)<ju&&(S=0),Xr(_)<ju&&(_=0);var P=_>0,k=S>0,M={isBound:!1,offset:0,pos:0},D={isBound:!1,offset:0,pos:0};if(S===0&&_===0)return{vertical:M,horizontal:D};if(S===0)P?a<g&&(D.pos=a,D.offset=g-a):o>g&&(D.pos=o,D.offset=g-o);else if(_===0)k?u<p&&(M.pos=u,M.offset=p-u):i>p&&(M.pos=i,M.offset=p-i);else{var F=_/S,B=r[1]-F*p,N=0,$=0,V=!1;k&&u<=p?(N=F*u+B,$=u,V=!0):!k&&p<=i&&(N=F*i+B,$=i,V=!0),V&&(N<o||N>a)&&(V=!1),V||(P&&a<=g?(N=a,$=(N-B)/F,V=!0):!P&&g<=o&&(N=o,$=(N-B)/F,V=!0)),V&&(M.isBound=!0,M.pos=$,M.offset=p-$,D.isBound=!0,D.pos=N,D.offset=g-N)}return{vertical:M,horizontal:D}}function DN(e,t,r){var n=e[r?"left":"top"],i=e[r?"right":"bottom"],o=Math.min.apply(Math,ln([],Yt(t),!1)),u=Math.max.apply(Math,ln([],Yt(t),!1)),a=[];return n+1>o&&a.push({direction:"start",isBound:!0,offset:o-n,pos:n}),i-1<u&&a.push({direction:"end",isBound:!0,offset:u-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(f,p){return Xr(p.offset)-Xr(f.offset)})}function ON(e,t,r){var n=r?e.map(function(i){return Y1(i,r)}):e;return n.some(function(i){return i[0]<t.left&&Xr(i[0]-t.left)>.1||i[0]>t.right&&Xr(i[0]-t.right)>.1||i[1]<t.top&&Xr(i[1]-t.top)>.1||i[1]>t.bottom&&Xr(i[1]-t.bottom)>.1})}function bfe(e,t,r){var n=rd(e),i=Math.sqrt(n*n-t*t)||0;return[i,-i].sort(function(o,u){return Xr(o-e[r?0:1])-Xr(u-e[r?0:1])}).map(function(o){return Ns([0,0],r?[o,t]:[t,o])})}function _fe(e,t,r,n,i){if(!e.props.bounds)return[];var o=i*Math.PI/180,u=Tw(e),a=u.left,f=u.top,p=u.right,g=u.bottom,b=a-n[0],S=p-n[0],_=f-n[1],P=g-n[1],k={left:b,top:_,right:S,bottom:P};if(!ON(r,k,0))return[];var M=[];return[[b,0],[S,0],[_,1],[P,1]].forEach(function(D){var F=Yt(D,2),B=F[0],N=F[1];r.forEach(function($){var V=Ns([0,0],$);M.push.apply(M,ln([],Yt(bfe($,B,N).map(function(U){return o+U-V}).filter(function(U){return!ON(t,k,U)}).map(function(U){return Ii(U*180/Math.PI,ju)})),!1))})}),M}var xfe=["left","right","center"],wfe=["top","bottom","middle"],NN={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},dp={start:"left",end:"right",center:"center"},fp={start:"top",end:"bottom",center:"middle"};function my(){return{left:!1,top:!1,right:!1,bottom:!1}}function sv(e,t){var r=e.props,n=r.snappable,i=r.bounds,o=r.innerBounds,u=r.verticalGuidelines,a=r.horizontalGuidelines,f=r.snapGridWidth,p=r.snapGridHeight,g=e.state,b=g.guidelines,S=g.enableSnap;return!n||!S||t&&n!==!0&&n.indexOf(t)<0?!1:!!(f||p||i||o||b&&b.length||u&&u.length||a&&a.length)}function AA(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function Sfe(e,t){var r=AA(e),n={};for(var i in r)i in t&&r[i]&&(n[i]=t[i]);return n}function kA(e,t){var r=Sfe(e,t),n=wfe.filter(function(o){return o in r}),i=xfe.filter(function(o){return o in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(o){return r[o]}),vertical:i.map(function(o){return r[o]})}}function Cfe(e,t,r){var n=es(e,[t.clientLeft,t.clientTop],r);return[t.left+n[0],t.top+n[1]]}function Efe(e){var t=Yt(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];Math.abs(i)<tl&&(i=0),Math.abs(o)<tl&&(o=0);var u=0,a=0,f=0;return i?o?(u=-o/i,a=1,f=u*r[0]-r[1]):(a=1,f=-r[1]):(u=-1,f=r[0]),[u,a,f].map(function(p){return Ii(p,tl)})}var YV="snapRotationThreshold",ZV="snapRotationDegrees",KV="snapHorizontalThreshold",JV="snapVerticalThreshold";function Iw(e,t,r,n,i,o,u){var a;n===void 0&&(n=[]),i===void 0&&(i=[]);var f=e.props,p=((a=e.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],g=KN(u,f[KV],5),b=KN(o,f[JV],5);return QV(e.state.guidelines,t,r,n,i,g,b,p)}function QV(e,t,r,n,i,o,u,a){return{vertical:BN(e,"vertical",t,u*a[0],n),horizontal:BN(e,"horizontal",r,o*a[1],i)}}function Tfe(e,t,r){var n=Yt(r,2),i=n[0],o=n[1],u=Yt(t,2),a=u[0],f=u[1],p=Yt(di(r,t),2),g=p[0],b=p[1],S=b>0,_=g>0;g=Zx(g),b=Zx(b);var P={isSnap:!1,offset:0,pos:0},k={isSnap:!1,offset:0,pos:0};if(g===0&&b===0)return{vertical:P,horizontal:k};var M=Iw(e,g?[i]:[],b?[o]:[],[],[],void 0,void 0),D=M.vertical,F=M.horizontal;D.posInfos.filter(function(fe){var Le=fe.pos;return _?Le>=a:Le<=a}),F.posInfos.filter(function(fe){var Le=fe.pos;return S?Le>=f:Le<=f}),D.isSnap=D.posInfos.length>0,F.isSnap=F.posInfos.length>0;var B=V3(D),N=B.isSnap,$=B.guideline,V=V3(F),U=V.isSnap,X=V.guideline,Z=U?X.pos[1]:0,oe=N?$.pos[0]:0;if(g===0)U&&(k.isSnap=!0,k.pos=X.pos[1],k.offset=o-k.pos);else if(b===0)N&&(P.isSnap=!0,P.pos=oe,P.offset=i-oe);else{var re=b/g,H=r[1]-re*i,ae=0,se=0,de=!1;N?(se=oe,ae=re*se+H,de=!0):U&&(ae=Z,se=(ae-H)/re,de=!0),de&&(P.isSnap=!0,P.pos=se,P.offset=i-se,k.isSnap=!0,k.pos=ae,k.offset=o-ae)}return{vertical:P,horizontal:k}}function ep(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function FN(e,t,r,n){var i=kA(e.props.snapDirections,t),o=Iw(e,i.vertical,i.horizontal,i.verticalNames.map(function(f){return ep(f)}),i.horizontalNames.map(function(f){return ep(f)}),r,n),u=ep(i.horizontalNames[o.horizontal.index]),a=ep(i.verticalNames[o.vertical.index]);return{vertical:Ut(Ut({},o.vertical),{direction:a}),horizontal:Ut(Ut({},o.horizontal),{direction:u})}}function V3(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,u=n.guideline;return{isSnap:t,offset:i,dist:o,pos:r.pos,guideline:u}}function BN(e,t,r,n,i){var o,u;if(i===void 0&&(i=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=t==="vertical",f=a?0:1,p=r.map(function(b,S){var _=i[S]||"",P=e.map(function(k){var M=k.pos,D=b-M[f];return{offset:D,dist:Xr(D),guideline:k,direction:_}}).filter(function(k){var M=k.guideline,D=k.dist,F=M.type;return!(F!==t||D>n)}).sort(function(k,M){return k.dist-M.dist});return{pos:b,index:S,guidelineInfos:P,direction:_}}).filter(function(b){return b.guidelineInfos.length>0}).sort(function(b,S){return b.guidelineInfos[0].dist-S.guidelineInfos[0].dist}),g=p.length>0;return{isSnap:g,index:g?p[0].index:-1,direction:(u=(o=p[0])===null||o===void 0?void 0:o.direction)!==null&&u!==void 0?u:"",posInfos:p}}function Ife(e,t,r,n,i){var o=[];r[0]&&r[1]?o=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(S,_,P){var k=P[_+1]||P[0];o.push(S),o.push([(S[0]+k[0])/2,(S[1]+k[1])/2])}):e.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],r):(o.push.apply(o,ln([],Yt(rfe([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var u=o.map(function(S){return dl(t,S)}),a=u.map(function(S){return S[0]}),f=u.map(function(S){return S[1]}),p=Iw(e,a,f,o.map(function(S){return ep(S[0])}),o.map(function(S){return ep(S[1])}),n,i),g=ep(o.map(function(S){return S[0]})[p.vertical.index]),b=ep(o.map(function(S){return S[1]})[p.horizontal.index]);return{vertical:Ut(Ut({},p.vertical),{direction:g}),horizontal:Ut(Ut({},p.horizontal),{direction:b})}}function e$(e,t){var r=Xr(e.offset),n=Xr(t.offset);return e.isBound&&t.isBound?n-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?n-r:e.isSnap?-1:t.isSnap||r<ju?1:n<ju?-1:r-n}function Hx(e,t){return e.slice().sort(function(r,n){var i=r.sign[t],o=n.sign[t],u=r.offset[t],a=n.offset[t];if(i){if(!o)return-1}else return 1;return e$({isBound:r.isBound,isSnap:r.isSnap,offset:u},{isBound:n.isBound,isSnap:n.isSnap,offset:a})})[0]}function Pfe(e,t,r){var n=[];if(r)Xr(t[0])!==1||Xr(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),n.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var i=e[0]?e:[1,1];[1,-1].forEach(function(u){[1,-1].forEach(function(a){var f=[u*i[0],a*i[1]];t[0]===f[0]&&t[1]===f[1]||n.push([t,f])})})}else if(e[0]){var o=Xr(t[0])===1?[1]:[1,-1];o.forEach(function(u){n.push([[t[0],-1],[u*e[0],-1]],[[t[0],0],[u*e[0],0]],[[t[0],1],[u*e[0],1]])})}else if(e[1]){var o=Xr(t[1])===1?[1]:[1,-1];o.forEach(function(a){n.push([[-1,t[1]],[-1,a*e[1]]],[[0,t[1]],[0,a*e[1]]],[[1,t[1]],[1,a*e[1]]])})}return n}function t$(e,t){var r=k3([t[0][0],t[1][0]]),n=k3([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:n<=e[1]}}function MA(e,t){var r=Yt(t,2),n=r[0],i=r[1],o=i[0]-n[0],u=i[1]-n[1];Xr(o)<ju&&(o=0),Xr(u)<ju&&(u=0);var a,f;if(!o)a=n[0],f=e[0];else if(!u)a=n[1],f=e[1];else{var p=u/o;a=p*(e[0]-n[0])+n[1],f=e[1]}return a-f}function r$(e,t,r,n){return n===void 0&&(n=ju),e.every(function(i){var o=MA(i,t),u=o<=0;return u===r||Xr(o)<=n})}function zN(e,t,r,n,i){return i===void 0&&(i=0),n&&t-i<=e||!n&&e<=r+i?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function Afe(e,t){var r=t.line,n=t.centerSign,i=t.verticalSign,o=t.horizontalSign,u=t.lineConstants,a=e.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var f=a.left,p=a.top,g=a.width,b=a.height,S=[[f,p],[f,p+b]],_=[[f,p],[f+g,p]],P=[[f+g,p],[f+g,p+b]],k=[[f,p+b],[f+g,p+b]];if(r$([[f,p],[f+g,p],[f,p+b],[f+g,p+b]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var M=tp(r,u,_,i),D=tp(r,u,k,i),F=tp(r,u,S,o),B=tp(r,u,P,o),N=M.isBound&&D.isBound,$=M.isBound||D.isBound,V=F.isBound&&B.isBound,U=F.isBound||B.isBound,X=$y(M.offset,D.offset),Z=$y(F.offset,B.offset),oe=[0,0],re=!1,H=!1;return Xr(Z)<Xr(X)?(oe=[X,0],re=$,H=N):(oe=[0,Z],re=U,H=V),{isAllBound:H,isVerticalBound:$,isHorizontalBound:U,isBound:re,offset:oe}}function tp(e,t,r,n,i,o){var u=Yt(t,2),a=u[0],f=u[1],p=e[0],g=r[0],b=r[1],S=Zx(b[1]-g[1]),_=Zx(b[0]-g[0]),P=f,k=a,M=-a/f;if(_){if(!S){if(o&&!P)return{isBound:!1,offset:0};if(k){var N=(g[1]-p[1])/M+p[0];return zN(N,g[0],b[0],n,i)}else{var F=g[1]-p[1],B=Xr(F)<=(i||0);return{isBound:B,offset:B?F:0}}}}else{if(o&&!k)return{isBound:!1,offset:0};if(P){var D=M*(g[0]-p[0])+p[1];return zN(D,g[1],b[1],n,i)}else{var F=g[0]-p[0],B=Xr(F)<=(i||0);return{isBound:B,offset:B?F:0}}}return{isBound:!1,offset:0}}function n$(e,t,r){return t.map(function(n){var i=Afe(e,n),o=i.isBound,u=i.offset,a=i.isVerticalBound,f=i.isHorizontalBound,p=n.multiple,g=Tf({datas:r,distX:u[0],distY:u[1]}).map(function(b,S){return b*(p[S]?2/p[S]:0)});return{sign:p,isBound:o,isVerticalBound:a,isHorizontalBound:f,isSnap:!1,offset:g}})}function kfe(e,t,r){var n,i=LA(e,t,[0,0],!1).map(function(S){return Ut(Ut({},S),{multiple:S.multiple.map(function(_){return Xr(_)*2})})}),o=n$(e,i,r),u=Hx(o,0),a=Hx(o,1),f=0,p=0,g=u.isVerticalBound||a.isVerticalBound,b=u.isHorizontalBound||a.isHorizontalBound;return(g||b)&&(n=Yt(efe({datas:r,distX:-u.offset[0],distY:-a.offset[1]}),2),f=n[0],p=n[1]),{vertical:{isBound:g,offset:f},horizontal:{isBound:b,offset:p}}}function Mfe(e,t){var r=[],n=e[0],i=e[1];return n&&i?r.push([[0,i*2],e,[-n,i]],[[n*2,0],e,[n,-i]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),t&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,i*2],[1,i],[-1,i]]),t&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function LA(e,t,r,n){var i=e.state,o=i.allMatrix,u=i.is3d,a=qm(o,100,100,u?4:3),f=dl(a,[0,0]);return Mfe(r,n).map(function(p){var g=Yt(p,3),b=g[0],S=g[1],_=g[2],P=[dl(a,S),dl(a,_)],k=Efe(P),M=t$(f,P),D=M.vertical,F=M.horizontal,B=MA(f,P)<=0;return{multiple:b,centerSign:B,verticalSign:D,horizontalSign:F,lineConstants:k,line:[dl(t,S),dl(t,_)]}})}function jN(e,t,r,n){var i=n?e.map(function(o){return Y1(o,n)}):e;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(o){var u=MA(r,o)<=0;return!r$(t,o,u)})}function Lfe(e){var t=Yt(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return Xr(r[0]);if(!o)return Xr(r[1]);var u=o/i;return Xr((-u*r[0]+r[1])/Math.sqrt(Math.pow(u,2)+1))}function Rfe(e){var t=Yt(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return[r[0],0];if(!o)return[0,r[1]];var u=o/i,a=-u*r[0]+r[1];return[-a/(u+1/u),a/(u*u+1)]}function Dfe(e,t,r,n,i){var o=e.props.innerBounds,u=i*Math.PI/180;if(!o)return[];var a=o.left,f=o.top,p=o.width,g=o.height,b=a-n[0],S=a+p-n[0],_=f-n[1],P=f+g-n[1],k=[[b,_],[S,_],[b,P],[S,P]],M=dl(r,[0,0]);if(!jN(r,k,M,0))return[];var D=[],F=k.map(function(B){return[rd(B),Ns([0,0],B)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(B){var N=Ns([0,0],Rfe(B)),$=Lfe(B);D.push.apply(D,ln([],Yt(F.filter(function(V){var U=Yt(V,1),X=U[0];return X&&$<=X}).map(function(V){var U=Yt(V,2),X=U[0],Z=U[1],oe=Math.acos(X?$/X:0),re=Z+oe,H=Z-oe;return[u+re-N,u+H-N]}).reduce(function(V,U){return V.push.apply(V,ln([],Yt(U),!1)),V},[]).filter(function(V){return!jN(t,k,M,V)}).map(function(V){return Ii(V*180/Math.PI,ju)})),!1))}),D}function Ofe(e){var t=e.props.innerBounds,r=my();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var n=e.getRect(),i=n.pos1,o=n.pos2,u=n.pos3,a=n.pos4,f=[i,o,u,a],p=dl(f,[0,0]),g=t.left,b=t.top,S=t.width,_=t.height,P=[[g,b],[g,b+_]],k=[[g,b],[g+S,b]],M=[[g+S,b],[g+S,b+_]],D=[[g,b+_],[g+S,b+_]],F=LA(e,f,[0,0],!1),B=[],N=[];return F.forEach(function($){var V=$.line,U=$.lineConstants,X=t$(p,V),Z=X.horizontal,oe=X.vertical,re=tp(V,U,k,oe,1,!0),H=tp(V,U,D,oe,1,!0),ae=tp(V,U,P,Z,1,!0),se=tp(V,U,M,Z,1,!0);re.isBound&&!r.top&&(B.push(b),r.top=!0),H.isBound&&!r.bottom&&(B.push(b+_),r.bottom=!0),ae.isBound&&!r.left&&(N.push(g),r.left=!0),se.isBound&&!r.right&&(N.push(g+S),r.right=!0)}),{boundMap:r,horizontal:B,vertical:N}}function Nfe(e,t,r,n){var i=t[0]-e[0],o=t[1]-e[1];if(Xr(i)<tl&&(i=0),Xr(o)<tl&&(o=0),!i)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var u=o/i,a=e[1]-u*e[0];if(n){var f=u*(t[0]+r)+a;return[r,f-t[1]]}else{var p=(t[1]+r-a)/u;return[p-t[0],r]}}function $3(e,t,r,n,i){var o=Nfe(e,t,r,n);if(!o)return{isOutside:!1,offset:[0,0]};var u=lh(e,t),a=lh(o,e),f=lh(o,t),p=a>u||f>u,g=Yt(Tf({datas:i,distX:o[0],distY:o[1]}),2),b=g[0],S=g[1];return{offset:[b,S],isOutside:p}}function Wx(e,t){return e.isBound?e.offset:t.isSnap?V3(t).offset:0}function Ffe(e,t,r,n,i){var o=Yt(t,2),u=o[0],a=o[1],f=Yt(r,2),p=f[0],g=f[1],b=Yt(n,2),S=b[0],_=b[1],P=Yt(i,2),k=P[0],M=P[1],D=-k,F=-M;if(e&&u&&a){D=0,F=0;var B=[];if(p&&g?B.push([0,M],[k,0]):p?B.push([k,0]):g?B.push([0,M]):S&&_?B.push([0,M],[k,0]):S?B.push([k,0]):_&&B.push([0,M]),B.length){B.sort(function(U,X){return rd(di([u,a],U))-rd(di([u,a],X))});var N=B[0];if(N[0]&&Xr(u)>tl)D=-N[0],F=a*Xr(u+D)/Xr(u)-a;else if(N[1]&&Xr(a)>tl){var $=a;F=-N[1],D=u*Xr(a+F)/Xr($)-u}if(e&&g&&p)if(Xr(D)>tl&&Xr(D)<Xr(k)){var V=Xr(k)/Xr(D);D*=V,F*=V}else if(Xr(F)>tl&&Xr(F)<Xr(M)){var V=Xr(M)/Xr(F);D*=V,F*=V}else D=$y(-k,D),F=$y(-M,F)}}else D=u||p?-k:0,F=a||g?-M:0;return[D,F]}function Bfe(e,t,r,n,i,o){if(!sv(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var u=OA(o.absolutePoses,[t,r]),a=Zc(u),f=a.left,p=a.right,g=a.top,b=a.bottom,S={horizontal:u.map(function(se){return se[1]}),vertical:u.map(function(se){return se[0]})},_=AA(e.props.snapDirections),P=kA(_,{left:f,right:p,top:g,bottom:b,center:(f+p)/2,middle:(g+b)/2}),k=Pw(e,i,P,S),M=k.vertical,D=k.horizontal,F=kfe(e,u,o),B=F.vertical,N=F.horizontal,$=M.isSnap,V=D.isSnap,U=M.isBound||B.isBound,X=D.isBound||N.isBound,Z=$y(M.offset,B.offset),oe=$y(D.offset,N.offset),re=Yt(Ffe(n,[t,r],[U,X],[$,V],[Z,oe]),2),H=re[0],ae=re[1];return[{isBound:U,isSnap:$,offset:H},{isBound:X,isSnap:V,offset:ae}]}function Pw(e,t,r,n){n===void 0&&(n=r);var i=PA(Tw(e),n.vertical,n.horizontal),o=i.horizontal,u=i.vertical,a=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Iw(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),f=a.horizontal,p=a.vertical,g=Wx(o[0],f),b=Wx(u[0],p),S=Xr(g),_=Xr(b);return{horizontal:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:g,dist:S,bounds:o,snap:f},vertical:{isBound:u[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:b,dist:_,bounds:u,snap:p}}}function qN(e,t,r,n,i,o,u){u===void 0&&(u=[1,1]);var a=PA(t,r,n),f=a.horizontal,p=a.vertical,g=QV(e,r,n,[],[],i,o,u),b=g.horizontal,S=g.vertical,_=Wx(f[0],b),P=Wx(p[0],S),k=Xr(_),M=Xr(P);return{horizontal:{isBound:f[0].isBound,isSnap:b.isSnap,snapIndex:b.index,offset:_,dist:k,bounds:f,snap:b},vertical:{isBound:p[0].isBound,isSnap:S.isSnap,snapIndex:S.index,offset:P,dist:M,bounds:p,snap:S}}}function zfe(e,t,r,n){var i=Ns(e,t)/Math.PI*180,o=r.vertical,u=o.isBound,a=o.isSnap,f=o.dist,p=r.horizontal,g=p.isBound,b=p.isSnap,S=p.dist,_=i%180,P=_<3||_>177,k=_>87&&_<93;return S<f&&(u||a&&!k&&(!n||!P))?"vertical":g||b&&!P&&(!n||!k)?"horizontal":""}function jfe(e,t,r,n,i,o){return r.map(function(u){var a=Yt(u,2),f=a[0],p=a[1],g=dl(t,f),b=dl(t,p),S=n?qfe(e,g,b,i):Pw(e,i,{vertical:[b[0]],horizontal:[b[1]]}),_=S.horizontal,P=_.offset,k=_.isBound,M=_.isSnap,D=S.vertical,F=D.offset,B=D.isBound,N=D.isSnap,$=di(p,f);if(!F&&!P)return{isBound:B||k,isSnap:N||M,sign:$,offset:[0,0]};var V=zfe(g,b,S,n);if(!V)return{sign:$,isBound:!1,isSnap:!1,offset:[0,0]};var U=V==="vertical",X=[0,0];return!n&&Xr(p[0])===1&&Xr(p[1])===1&&f[0]!==p[0]&&f[1]!==p[1]?X=Tf({datas:o,distX:-F,distY:-P}):X=$3(g,b,-(U?F:P),U,o).offset,X=X.map(function(Z,oe){return Z*($[oe]?2/$[oe]:0)}),{sign:$,isBound:U?B:k,isSnap:U?N:M,offset:X}})}function VN(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function qfe(e,t,r,n){var i=vfe(e,t,r),o=i.horizontal,u=i.vertical,a=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Tfe(e,t,r),f=a.horizontal,p=a.vertical,g=VN(o,f),b=VN(u,p),S=Xr(g),_=Xr(b);return{horizontal:{isBound:o.isBound,isSnap:f.isSnap,offset:g,dist:S},vertical:{isBound:u.isBound,isSnap:p.isSnap,offset:b,dist:_}}}function Vfe(e,t,r,n,i){var o=[-r[0],-r[1]],u=e.state,a=u.width,f=u.height,p=e.props.bounds,g=1/0,b=1/0;if(p){var S=[[r[0],-r[1]],[-r[0],r[1]]],_=p.left,P=_===void 0?-1/0:_,k=p.top,M=k===void 0?-1/0:k,D=p.right,F=D===void 0?1/0:D,B=p.bottom,N=B===void 0?1/0:B;S.forEach(function($){var V=$[0]!==o[0],U=$[1]!==o[1],X=dl(t,$),Z=Ns(n,X)*360/Math.PI;if(U){var oe=X.slice();(Xr(Z-360)<2||Xr(Z-180)<2)&&(oe[1]=n[1]);var re=$3(n,oe,(n[1]<X[1]?N:M)-X[1],!1,i),H=Yt(re.offset,2),ae=H[1],se=re.isOutside;isNaN(ae)||(b=f+(se?1:-1)*Xr(ae))}if(V){var oe=X.slice();(Xr(Z-90)<2||Xr(Z-270)<2)&&(oe[0]=n[0]);var de=$3(n,oe,(n[0]<X[0]?F:P)-X[0],!0,i),fe=Yt(de.offset,1),Le=fe[0],ye=de.isOutside;isNaN(Le)||(g=a+(ye?1:-1)*Xr(Le))}})}return{maxWidth:g,maxHeight:b}}var Ou={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,o=r.zoom,u=e.getState(),a=u.dragInfo,f=u.beforeOrigin;if(n||!i||!a)return[];var p=a.dist;if(!p[0]&&!p[1])return[];var g=rd(p),b=Ns(p,[0,0]);return[t.createElement("div",{className:ui("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(g,"px"),transform:"translate(".concat(f[0],"px, ").concat(f[1],"px) rotate(").concat(b,"rad) scaleY(").concat(o,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,i=t.parentGesto,o=e.state,u=o.gestos,a=o.style;if(u.draggable)return!1;u.draggable=i||e.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],jm(e,t),Ew(e,t,"translate"),she(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var f=ji(e,t,Ut({set:function(g){r.startValue=g}},Cw(e,t))),p=n||Fn(e,"onDragStart",f);return p!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(u.draggable=null,r.isPinch=!1),r.isDrag?f:!1},drag:function(e,t){if(t){ww(e,t,"translate");var r=t.datas,n=t.parentEvent,i=t.parentFlag,o=t.isPinch,u=t.deltaOffset,a=t.useSnap,f=t.isRequest,p=t.isGroup,g=t.parentThrottleDrag,b=t.distX,S=t.distY,_=r.isDrag,P=r.prevDist,k=r.prevBeforeDist,M=r.startValue;if(_){u&&(b+=u[0],S+=u[1]);var D=e.props,F=D.parentMoveable,B=p?0:D.throttleDrag||g||0,N=n?0:D.throttleDragRotate||0,$=0,V=!1,U=!1,X=!1,Z=!1;if(!n&&N>0&&(b||S)){var oe=D.startDragRotate||0,re=Ii(oe+Ns([0,0],[b,S])*180/Math.PI,N)-oe,H=S*Math.abs(Math.cos((re-90)/180*Math.PI)),ae=b*Math.abs(Math.cos(re/180*Math.PI)),se=rd([ae,H]);$=re*Math.PI/180,b=se*Math.cos($),S=se*Math.sin($)}if(!o&&!n&&!i){var de=Yt(Bfe(e,b,S,N,!a&&f||u,r),2),fe=de[0],Le=de[1];V=fe.isSnap,U=fe.isBound,X=Le.isSnap,Z=Le.isBound;var ye=fe.offset,xe=Le.offset;b+=ye,S+=xe}var Se=_a(BV({datas:r,distX:b,distY:S}),M),Re=_a(Qde({datas:r,distX:b,distY:S}),M);IN(Re,ju),IN(Se,ju),N||(!V&&!U&&(Re[0]=Ii(Re[0],B),Se[0]=Ii(Se[0],B)),!X&&!Z&&(Re[1]=Ii(Re[1],B),Se[1]=Ii(Se[1],B)));var he=di(Se,M),Ee=di(Re,M),we=di(Ee,P),Ne=di(he,k);r.prevDist=Ee,r.prevBeforeDist=he,r.passDelta=we,r.passDist=Ee;var Fe=r.left+he[0],Xe=r.top+he[1],Be=r.right-he[0],ot=r.bottom-he[1],Ke=Sw(r,"translate(".concat(Re[0],"px, ").concat(Re[1],"px)"),"translate(".concat(Ee[0],"px, ").concat(Ee[1],"px)"));if(TA(t,Ke),e.state.dragInfo.dist=n?[0,0]:Ee,!(!n&&!F&&we.every(function($e){return!$e})&&Ne.some(function($e){return!$e}))){var it=e.state,ke=it.width,Nt=it.height,st=ji(e,t,Ut({transform:Ke,dist:Ee,delta:we,translate:Re,beforeDist:he,beforeDelta:Ne,beforeTranslate:Se,left:Fe,top:Xe,right:Be,bottom:ot,width:ke,height:Nt,isPinch:o},Fu({transform:Ke},t)));return!n&&Fn(e,"onDrag",st),st}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(e,Ut(Ut({},t),{deltaOffset:n}))):!1},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=Cc(e,t,{});return!r&&Fn(e,"onDragEnd",i),i}},dragGroupStart:function(e,t){var r,n,i=t.datas,o=t.clientX,u=t.clientY,a=this.dragStart(e,t);if(!a)return!1;var f=aC(e,this,"dragStart",[o||0,u||0],t,!1,"draggable"),p=f.childEvents,g=f.eventParams,b=Ut(Ut({},a),{targets:e.props.targets,events:g}),S=Fn(e,"onDragGroupStart",b);i.isDrag=S!==!1;var _=(n=(r=p[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return i.throttleOffset=[_[0]%1,_[1]%1],i.isDrag?a:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var n=this.drag(e,Ut(Ut({},t),{parentThrottleDrag:e.props.throttleDrag})),i=t.datas.passDelta,o=aC(e,this,"drag",i,t,!1,"draggable").eventParams;if(n){var u=Ut({targets:e.props.targets,events:o},n);return Fn(e,"onDragGroup",u),u}}},dragGroupEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(e,t);var i=aC(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return Fn(e,"onDragGroupEnd",Cc(e,t,{targets:e.props.targets,events:i})),r}},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=!1;return{isControl:!1,requestStart:function(u){return o=u.useSnap,{datas:t,useSnap:o}},request:function(u){return"x"in u?n=u.x-r.left:"deltaX"in u&&(n+=u.deltaX),"y"in u?i=u.y-r.top:"deltaY"in u&&(i+=u.deltaY),{datas:t,distX:n,distY:i,useSnap:o}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:o}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function i$(e,t){var r=dl(e,t),n=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:n}}function $fe(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,u=n?4:3,a=[i/2*(1+t[0]),o/2*(1+t[1])],f=es(r,a,u),p=[0,0];return{fixedPosition:f,fixedDirection:t,fixedOffset:p}}function a$(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,u=n?4:3,a=sfe(t,i,o),f=es(r,t,u),p=[i?0:t[0],o?0:t[1]];return{fixedPosition:f,fixedDirection:a,fixedOffset:p}}var $N=BA("resizable"),G3={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:HV("resizable"),dragControlCondition:$N,viewClassName:FA("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,i=t.isPinch,o=t.isGroup,u=t.parentDirection,a=t.parentGesto,f=t.datas,p=t.parentFixedDirection,g=t.parentEvent,b=v$(u,i,n,f),S=e.state,_=S.target,P=S.width,k=S.height,M=S.gestos;if(!b||!_||M.resizable)return!1;M.resizable=a||e.controlGesto,!i&&jm(e,t),f.datas={},f.direction=b,f.startOffsetWidth=P,f.startOffsetHeight=k,f.prevWidth=0,f.prevHeight=0,f.minSize=[0,0],f.startWidth=S.inlineCSSWidth||S.cssWidth,f.startHeight=S.inlineCSSHeight||S.cssHeight,f.maxSize=[1/0,1/0],o||(f.minSize=[S.minOffsetWidth,S.minOffsetHeight],f.maxSize=[S.maxOffsetWidth,S.maxOffsetHeight]);var D=e.props.transformOrigin||"% %";f.transformOrigin=wh(D)?D.split(" "):D,f.startOffsetMatrix=S.offsetMatrix,f.startTransformOrigin=S.transformOrigin,f.isWidth=(r=t?.parentIsWidth)!==null&&r!==void 0?r:!b[0]&&!b[1]||b[0]||!b[1];function F(Z){f.ratio=Z&&isFinite(Z)?Z:0}f.startPositions=nd(e.state);function B(Z){var oe=i$(f.startPositions,Z);f.fixedDirection=oe.fixedDirection,f.fixedPosition=oe.fixedPosition,f.fixedOffset=oe.fixedOffset}function N(Z){var oe=a$(e.state,Z);f.fixedDirection=oe.fixedDirection,f.fixedPosition=oe.fixedPosition,f.fixedOffset=oe.fixedOffset}function $(Z){f.minSize=[no("".concat(Z[0]),0)||0,no("".concat(Z[1]),0)||0]}function V(Z){var oe=[Z[0]||1/0,Z[1]||1/0];(!c1(oe[0])||isFinite(oe[0]))&&(oe[0]=no("".concat(oe[0]),0)||1/0),(!c1(oe[1])||isFinite(oe[1]))&&(oe[1]=no("".concat(oe[1]),0)||1/0),f.maxSize=oe}F(P/k),B(p||[-b[0],-b[1]]),f.setFixedDirection=B,f.setFixedPosition=N,f.setMin=$,f.setMax=V;var U=ji(e,t,{direction:b,startRatio:f.ratio,set:function(Z){var oe=Yt(Z,2),re=oe[0],H=oe[1];f.startWidth=re,f.startHeight=H},setMin:$,setMax:V,setRatio:F,setFixedDirection:B,setFixedPosition:N,setOrigin:function(Z){f.transformOrigin=Z},dragStart:Ou.dragStart(e,new qy().dragStart([0,0],t))}),X=g||Fn(e,"onResizeStart",U);return f.startFixedDirection=f.fixedDirection,f.startFixedPosition=f.fixedPosition,X!==!1&&(f.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:b}),f.isResize?U:!1},dragControl:function(e,t){var r,n=t.datas,i=t.parentFlag,o=t.isPinch,u=t.parentKeepRatio,a=t.dragClient,f=t.parentDist,p=t.useSnap,g=t.isRequest,b=t.isGroup,S=t.parentEvent,_=t.resolveMatrix,P=n.isResize,k=n.transformOrigin,M=n.startWidth,D=n.startHeight,F=n.prevWidth,B=n.prevHeight,N=n.minSize,$=n.maxSize,V=n.ratio,U=n.startOffsetWidth,X=n.startOffsetHeight,Z=n.isWidth;if(!P)return;if(_){var oe=e.state.is3d,re=n.startOffsetMatrix,H=n.startTransformOrigin,ae=oe?4:3,se=f1(Gx(t)),de=Math.sqrt(se.length);ae!==de&&(se=Ld(se,de,ae));var fe=eb(re,se,H,ae),Le=qm(fe,U,X,ae);n.startPositions=Le,n.nextTargetMatrix=se,n.nextAllMatrix=fe}var ye=Tm(e.props,"resizable"),xe=ye.resizeFormat,Se=ye.throttleResize,Re=Se===void 0?i?0:1:Se,he=ye.parentMoveable,Ee=ye.keepRatioFinally,we=n.direction,Ne=we,Fe=0,Xe=0;!we[0]&&!we[1]&&(Ne=[1,1]);var Be=V&&(u??ye.keepRatio)||!1;function ot(){var yr=n.fixedDirection,Kt=C$(Ne,Be,n,t);Fe=Kt.distWidth,Xe=Kt.distHeight;var at=Ne[0]-yr[0]||Be?Math.max(U+Fe,ju):U,Ae=Ne[1]-yr[1]||Be?Math.max(X+Xe,ju):X;return Be&&U&&X&&(Z?Ae=at/V:at=Ae*V),[at,Ae]}var Ke=Yt(ot(),2),it=Ke[0],ke=Ke[1];S||(n.setFixedDirection(n.fixedDirection),Fn(e,"onBeforeResize",ji(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(yr){var Kt;return n.setFixedDirection(yr),Kt=Yt(ot(),2),it=Kt[0],ke=Kt[1],[it,ke]},setFixedPosition:function(yr){var Kt;return n.setFixedPosition(yr),Kt=Yt(ot(),2),it=Kt[0],ke=Kt[1],[it,ke]},boundingWidth:it,boundingHeight:ke,setSize:function(yr){var Kt;Kt=Yt(yr,2),it=Kt[0],ke=Kt[1]}},!0)));var Nt=a;a||(!i&&o?Nt=dfe(e,[0,0]):Nt=n.fixedPosition);var st=[0,0];o||(st=ahe(e,it,ke,we,Nt,!p&&g,n)),f&&(!f[0]&&(st[0]=0),!f[1]&&(st[1]=0));function $e(){var yr;xe&&(yr=Yt(xe([it,ke]),2),it=yr[0],ke=yr[1]),it=Ii(it,Re),ke=Ii(ke,Re)}if(Be){Ne[0]&&Ne[1]&&st[0]&&st[1]&&(Xr(st[0])>Xr(st[1])?st[1]=0:st[0]=0);var Zt=!st[0]&&!st[1];Zt&&$e(),Ne[0]&&!Ne[1]||st[0]&&!st[1]||Zt&&Z?(it+=st[0],ke=it/V):(!Ne[0]&&Ne[1]||!st[0]&&st[1]||Zt&&!Z)&&(ke+=st[1],it=ke*V)}else it+=st[0],ke+=st[1],it=Math.max(0,it),ke=Math.max(0,ke);r=Yt(vV([it,ke],N,$,Be?V:!1),2),it=r[0],ke=r[1],$e(),Be&&(b||Ee)&&(Z?ke=it/V:it=ke*V),Fe=it-U,Xe=ke-X;var $t=[Fe-F,Xe-B];n.prevWidth=Fe,n.prevHeight=Xe;var Wt=cfe(e,it,ke,Nt,k,n);if(!(!he&&$t.every(function(yr){return!yr})&&Wt.every(function(yr){return!yr}))){var ht=Ou.drag(e,Q1(t,e.state,Wt,!!o,!1,"draggable")),sr=ht.transform,cr=M+Fe,ir=D+Xe,br=ji(e,t,Ut({width:cr,height:ir,offsetWidth:Math.round(it),offsetHeight:Math.round(ke),startRatio:V,boundingWidth:it,boundingHeight:ke,direction:we,dist:[Fe,Xe],delta:$t,isPinch:!!o,drag:ht},_$({style:{width:"".concat(cr,"px"),height:"".concat(ir,"px")},transform:sr},ht,t)));return!S&&Fn(e,"onResize",br),br}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,u=r.prevWidth,a=r.prevHeight;if(!(!n||e.props.checkResizableError===!1)){var f=e.state,p=f.width,g=f.height,b=p-(i+u),S=g-(o+a),_=Xr(b)>3,P=Xr(S)>3;if(_&&(r.startWidth+=b,r.startOffsetWidth+=b,r.prevWidth+=b),P&&(r.startHeight+=S,r.startOffsetHeight+=S,r.prevHeight+=S),_||P)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var i=Cc(e,t,{});return!n&&Fn(e,"onResizeEnd",i),i}},dragGroupControlCondition:$N,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,Ut(Ut({},t),{isGroup:!0}));if(!n)return!1;var i=Pd(e,"resizable",t),o=r.startOffsetWidth,u=r.startOffsetHeight;function a(){var _=r.minSize;i.forEach(function(P){var k=P.datas,M=k.minSize,D=k.startOffsetWidth,F=k.startOffsetHeight,B=o*(D?M[0]/D:0),N=u*(F?M[1]/F:0);_[0]=Math.max(_[0],B),_[1]=Math.max(_[1],N)})}function f(){var _=r.maxSize;i.forEach(function(P){var k=P.datas,M=k.maxSize,D=k.startOffsetWidth,F=k.startOffsetHeight,B=o*(D?M[0]/D:0),N=u*(F?M[1]/F:0);_[0]=Math.min(_[0],B),_[1]=Math.min(_[1],N)})}var p=uh(e,this,"dragControlStart",t,function(_,P){return Ux(e,_,r,P)});a(),f();var g=function(_){n.setFixedDirection(_),p.forEach(function(P,k){P.setFixedDirection(_),Ux(e,P.moveable,r,i[k])})};r.setFixedDirection=g;var b=Ut(Ut({},n),{targets:e.props.targets,events:p.map(function(_){return Ut(Ut({},_),{setMin:function(P){_.setMin(P),a()},setMax:function(P){_.setMax(P),f()}})}),setFixedDirection:g,setMin:function(_){n.setMin(_),a()},setMax:function(_){n.setMax(_),f()}}),S=Fn(e,"onResizeGroupStart",b);return r.isResize=S!==!1,r.isResize?n:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=Tm(e.props,"resizable");kw(e,"onBeforeResize",function(_){Fn(e,"onBeforeResizeGroup",ji(e,t,Ut(Ut({},_),{targets:n.targets}),!0))});var i=this.dragControl(e,Ut(Ut({},t),{isGroup:!0}));if(i){var o=i.boundingWidth,u=i.boundingHeight,a=i.dist,f=n.keepRatio,p=[o/(o-a[0]),u/(u-a[1])],g=r.fixedPosition,b=uh(e,this,"dragControl",t,function(_,P){var k=Yt(wu(Z1(e.rotation/180*Math.PI,3),[P.datas.originalX*p[0],P.datas.originalY*p[1],1],3),2),M=k[0],D=k[1];return Ut(Ut({},P),{parentDist:null,parentScale:p,dragClient:_a(g,[M,D]),parentKeepRatio:f})}),S=Ut({targets:n.targets,events:b},i);return Fn(e,"onResizeGroup",S),S}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(e,t);var i=uh(e,this,"dragControlEnd",t),o=Cc(e,t,{targets:e.props.targets,events:i});return Fn(e,"onResizeGroupEnd",o),r}},request:function(e){var t={},r=0,n=0,i=!1,o=e.getRect();return{isControl:!0,requestStart:function(u){var a;return i=u.useSnap,{datas:t,parentDirection:u.direction||[1,1],parentIsWidth:(a=u?.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(u){return"offsetWidth"in u?r=u.offsetWidth-o.offsetWidth:"deltaWidth"in u&&(r+=u.deltaWidth),"offsetHeight"in u?n=u.offsetHeight-o.offsetHeight:"deltaHeight"in u&&(n+=u.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:u.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.resizable=null}};function oC(e,t,r,n,i){var o=e.props.groupable,u=e.state,a=u.is3d?4:3,f=t.origin,p=es(e.state.rootMatrix,di([f[0],f[1]],o?[0,0]:[u.left,u.top]),a),g=_a([i.left,i.top],p);t.startAbsoluteOrigin=g,t.prevDeg=Ns(g,[r,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=lh(g,[r,n])}function dx(e,t,r){var n=r.defaultDeg,i=r.prevDeg,o=i%360,u=Math.floor(i/360);o<0&&(o+=360),o>e&&o>270&&e<90?++u:o<e&&o<90&&e>270&&--u;var a=t*(u*360+e-n);return r.prevDeg=n+a,a}function sC(e,t,r,n){return dx(Ns(n.startAbsoluteOrigin,[e,t])/Math.PI*180,r,n)}function lC(e,t,r,n,i,o){var u=e.props.throttleRotate,a=u===void 0?0:u,f=r.prevSnapDeg,p=0,g=!1;if(o){var b=ihe(e,t,n,i+n);g=b.isSnap,p=i+b.dist}g||(p=Ii(i+n,a));var S=p-i;return r.prevSnapDeg=S,[S-f,S,p]}function o$(e,t,r){var n=Yt(t,4),i=n[0],o=n[1],u=n[2],a=n[3];if(e==="none")return[];if(Ml(e))return e.map(function(M){return o$(M,[i,o,u,a],r)[0]});var f=Yt((e||"top").split("-"),2),p=f[0],g=f[1],b=[i,o];p==="left"?b=[u,i]:p==="right"?b=[o,a]:p==="bottom"&&(b=[a,u]);var S=[(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2],_=g$(b,r);if(g){var P=g==="top"||g==="left",k=p==="bottom"||p==="left";S=b[P&&!k||!P&&k?0:1]}return[[S,_]]}function U3(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(cl(r,ui("rotation-control"))||e.props.rotateAroundControls&&cl(r,ui("around-control"))||cl(r,ui("control"))&&cl(r,ui("rotatable")))return!0;var n=e.props.rotationTarget;return n?zA(n,!0).some(function(i){return i?r===i||r.contains(i):!1}):!1}var Gfe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Ufe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Gfe],viewClassName:function(e){return e.isDragging("rotatable")?ui("view-rotation-dragging"):""},render:function(e,t){var r=Tm(e.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,o=r.zoom,u=r.renderDirections,a=r.rotateAroundControls,f=r.resolveAblesWithRotatable,p=e.getState(),g=p.renderPoses,b=p.direction;if(!n)return null;var S=o$(i,g,b),_=[];if(S.forEach(function(D,F){var B=Yt(D,2),N=B[0],$=B[1];_.push(t.createElement("div",{key:"rotation".concat(F),className:ui("rotation"),style:{transform:"translate(-50%) translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat($,"rad)")}},t.createElement("div",{className:ui("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),t.createElement("div",{className:ui("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),u){var P=iv(f||{}),k={};P.forEach(function(D){f[D].forEach(function(F){k[F]=D})});var M=[];Ml(u)&&(M=u.map(function(D){var F=k[D];return{data:F?{resolve:F}:{},classNames:F?["move"]:[],dir:D}})),_.push.apply(_,ln([],Yt($V(e,"rotatable",M,t)),!1))}return a&&_.push.apply(_,ln([],Yt(XV(e,t)),!1)),_},dragControlCondition:U3,dragControlStart:function(e,t){var r,n,i=t.datas,o=t.clientX,u=t.clientY,a=t.parentRotate,f=t.parentFlag,p=t.isPinch,g=t.isRequest,b=e.state,S=b.target,_=b.left,P=b.top,k=b.direction,M=b.beforeDirection,D=b.targetTransform,F=b.moveableClientRect,B=b.offsetMatrix,N=b.targetMatrix,$=b.allMatrix,V=b.width,U=b.height;if(!g&&!S)return!1;var X=e.getRect();i.rect=X,i.transform=D,i.left=_,i.top=P;var Z=function(Ne){var Fe=a$(e.state,Ne);i.fixedDirection=Fe.fixedDirection,i.fixedOffset=Fe.fixedOffset,i.fixedPosition=Fe.fixedPosition,Re&&Re.setFixedPosition(Ne)},oe=function(Ne){var Fe=$fe(e.state,Ne);i.fixedDirection=Fe.fixedDirection,i.fixedOffset=Fe.fixedOffset,i.fixedPosition=Fe.fixedPosition,Re&&Re.setFixedDirection(Ne)},re=o,H=u;if(g||p||f){var ae=a||0;i.beforeInfo={origin:X.beforeOrigin,prevDeg:ae,defaultDeg:ae,prevSnapDeg:0,startDist:0},i.afterInfo=Ut(Ut({},i.beforeInfo),{origin:X.origin}),i.absoluteInfo=Ut(Ut({},i.beforeInfo),{origin:X.origin,startValue:ae})}else{var se=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(se){var de=se.getAttribute("data-direction")||"",fe=Zde[de];if(fe){i.isControl=!0,i.isAroundControl=cl(se,ui("around-control")),i.controlDirection=fe;var Le=se.getAttribute("data-resolve");Le&&(i.resolveAble=Le);var ye=_he(b.rootMatrix,b.renderPoses,F);r=Yt(dl(ye,fe),2),re=r[0],H=r[1]}}i.beforeInfo={origin:X.beforeOrigin},i.afterInfo={origin:X.origin},i.absoluteInfo={origin:X.origin,startValue:X.rotation};var xe=Z;Z=function(Ne){var Fe=b.is3d?4:3,Xe=Yt(_a(SV(N,Fe),Ne),2),Be=Xe[0],ot=Xe[1],Ke=wu(B,Sm([Be,ot],Fe)),it=wu($,Sm([Ne[0],Ne[1]],Fe));xe(Ne);var ke=b.posDelta;i.beforeInfo.origin=di(Ke,ke),i.afterInfo.origin=di(it,ke),i.absoluteInfo.origin=di(it,ke),oC(e,i.beforeInfo,re,H,F),oC(e,i.afterInfo,re,H,F),oC(e,i.absoluteInfo,re,H,F)},oe=function(Ne){var Fe=dl([[0,0],[V,0],[0,U],[V,U]],Ne);Z(Fe)}}i.startClientX=re,i.startClientY=H,i.direction=k,i.beforeDirection=M,i.startValue=0,i.datas={},Ew(e,t,"rotate");var Se=!1,Re=!1;if(i.isControl&&i.resolveAble){var he=i.resolveAble;he==="resizable"&&(Re=G3.dragControlStart(e,Ut(Ut({},new qy("resizable").dragStart([0,0],t)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}Re||(Se=Ou.dragStart(e,new qy().dragStart([0,0],t))),Z(xhe(e));var Ee=ji(e,t,Ut(Ut({set:function(Ne){i.startValue=Ne*Math.PI/180},setFixedDirection:oe,setFixedPosition:Z},Cw(e,t)),{dragStart:Se,resizeStart:Re})),we=Fn(e,"onRotateStart",Ee);return i.isRotate=we!==!1,b.snapRenderInfo={request:t.isRequest},i.isRotate?Ee:!1},dragControl:function(e,t){var r,n,i,o=t.datas,u=t.clientDistX,a=t.clientDistY,f=t.parentRotate,p=t.parentFlag,g=t.isPinch,b=t.groupDelta,S=t.resolveMatrix,_=o.beforeDirection,P=o.beforeInfo,k=o.afterInfo,M=o.absoluteInfo,D=o.isRotate,F=o.startValue,B=o.rect,N=o.startClientX,$=o.startClientY;if(D){ww(e,t,"rotate");var V=Jde(t),U=_*V,X=e.props.parentMoveable,Z=0,oe,re,H=0,ae,se,de=0,fe,Le,ye=180/Math.PI*F,xe=M.startValue,Se=!1,Re=N+u,he=$+a;if(!p&&"parentDist"in t){var Ee=t.parentDist;oe=Ee,ae=Ee,fe=Ee}else g||p?(oe=dx(f,_,P),ae=dx(f,U,k),fe=dx(f,U,M)):(oe=sC(Re,he,_,P),ae=sC(Re,he,U,k),fe=sC(Re,he,U,M),Se=!0);if(re=ye+oe,se=ye+ae,Le=xe+fe,Fn(e,"onBeforeRotate",ji(e,t,{beforeRotation:re,rotation:se,absoluteRotation:Le,setRotation:function(Nt){ae=Nt-ye,oe=ae,fe=ae}},!0)),r=Yt(lC(e,B,P,oe,ye,Se),3),Z=r[0],oe=r[1],re=r[2],n=Yt(lC(e,B,k,ae,ye,Se),3),H=n[0],ae=n[1],se=n[2],i=Yt(lC(e,B,M,fe,xe,Se),3),de=i[0],fe=i[1],Le=i[2],!(!de&&!H&&!Z&&!X&&!S)){var we=Sw(o,"rotate(".concat(se,"deg)"),"rotate(".concat(ae,"deg)"));S&&(o.fixedPosition=IA(e,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var Ne=ufe(e,ae,o),Fe=di(_a(b||[0,0],Ne),o.prevInverseDist||[0,0]);o.prevInverseDist=Ne,o.requestValue=null;var Xe=jV(e,we,Fe,g,t),Be=Xe,ot=lh([Re,he],M.startAbsoluteOrigin)-M.startDist,Ke=void 0;if(o.resolveAble==="resizable"){var it=G3.dragControl(e,Ut(Ut({},Q1(t,e.state,[t.deltaX,t.deltaY],!!g,!1,"resizable")),{resolveMatrix:!0,parentDistance:ot}));it&&(Ke=it,Be=_$(Be,it,t))}var ke=ji(e,t,Ut(Ut({delta:H,dist:ae,rotate:se,rotation:se,beforeDist:oe,beforeDelta:Z,beforeRotate:re,beforeRotation:re,absoluteDist:fe,absoluteDelta:de,absoluteRotate:Le,absoluteRotation:Le,isPinch:!!g,resize:Ke},Xe),Be));return Fn(e,"onRotate",ke),ke}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var n=Cc(e,t,{});return Fn(e,"onRotateEnd",n),n}},dragGroupControlCondition:U3,dragGroupControlStart:function(e,t){var r=t.datas,n=e.state,i=n.left,o=n.top,u=n.beforeOrigin,a=this.dragControlStart(e,t);if(!a)return!1;a.set(r.beforeDirection*e.rotation);var f=uh(e,this,"dragControlStart",t,function(b,S){var _=b.state,P=_.left,k=_.top,M=_.beforeOrigin,D=_a(di([P,k],[i,o]),di(M,u));return S.datas.startGroupClient=D,S.datas.groupClient=D,Ut(Ut({},S),{parentRotate:0})}),p=Ut(Ut({},a),{targets:e.props.targets,events:f}),g=Fn(e,"onRotateGroupStart",p);return r.isRotate=g!==!1,r.isRotate?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){kw(e,"onBeforeRotate",function(p){Fn(e,"onBeforeRotateGroup",ji(e,t,Ut(Ut({},p),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=r.beforeDirection,o=n.beforeDist,u=o/180*Math.PI,a=uh(e,this,"dragControl",t,function(p,g){var b=g.datas.startGroupClient,S=Yt(g.datas.groupClient,2),_=S[0],P=S[1],k=Yt(Y1(b,u*i),2),M=k[0],D=k[1],F=[M-_,D-P];return g.datas.groupClient=[M,D],Ut(Ut({},g),{parentRotate:o,groupDelta:F})});e.rotation=i*n.beforeRotation;var f=Ut({targets:e.props.targets,events:a,set:function(p){e.rotation=p},setGroupRotation:function(p){e.rotation=p}},n);return Fn(e,"onRotateGroup",f),f}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(e,t);var i=uh(e,this,"dragControlEnd",t),o=Cc(e,t,{targets:e.props.targets,events:i});return Fn(e,"onRotateGroupEnd",o),r}},request:function(e){var t={},r=0,n=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(i){return"deltaRotate"in i?r+=i.deltaRotate:"rotate"in i&&(r=i.rotate-n),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Hfe(e,t){var r,n=e.direction,i=e.classNames,o=e.size,u=e.pos,a=e.zoom,f=e.key,p=n==="horizontal",g=p?"Y":"X";return t.createElement("div",{key:f,className:i.join(" "),style:(r={},r[p?"width":"height"]="".concat(o),r.transform="translate(".concat(u[0],", ").concat(u[1],") translate").concat(g,"(-50%) scale").concat(g,"(").concat(a,")"),r)})}function RA(e,t){return Hfe(Ut(Ut({},e),{classNames:ln([ui("line","guideline",e.direction)],Yt(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(Ii(r,.1),"px")})}),t)}function GN(e,t,r,n,i,o,u,a){var f=e.props.zoom;return r.map(function(p,g){var b=p.type,S=p.pos,_=[0,0];return _[u]=n,_[u?0:1]=-i+S,RA({key:"".concat(t,"TargetGuideline").concat(g),classNames:[ui("target","bold",b)],posValue:_,sizeValue:o,zoom:f,direction:t},a)})}function UN(e,t,r,n,i,o){var u=e.props,a=u.zoom,f=u.isDisplayInnerSnapDigit,p=t==="horizontal"?dp:fp,g=i[p.start],b=i[p.end];return r.filter(function(S){var _=S.hide,P=S.elementRect;if(_)return!1;if(f&&P){var k=P.rect;if(k[p.start]<=g&&b<=k[p.end])return!1}return!0}).map(function(S,_){var P=S.pos,k=S.size,M=S.element,D=S.className,F=[-n[0]+P[0],-n[1]+P[1]];return RA({key:"".concat(t,"-default-guideline-").concat(_),classNames:M?[ui("bold"),D]:[ui("normal"),D],direction:t,posValue:F,sizeValue:k,zoom:a},o)})}function _0(e,t,r,n,i,o,u,a){var f,p=e.props,g=p.snapDigit,b=g===void 0?0:g,S=p.isDisplaySnapDigit,_=S===void 0?!0:S,P=p.snapDistFormat,k=P===void 0?function($,V){return $}:P,M=p.zoom,D=t==="horizontal"?"X":"Y",F=t==="vertical"?"height":"width",B=Math.abs(i),N=_?parseFloat(B.toFixed(b)):0;return a.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(n),className:ui("guideline-group",t),style:(f={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},f[F]="".concat(B,"px"),f)},RA({direction:t,classNames:[ui(r),u],size:"100%",posValue:[0,0],sizeValue:B,zoom:M},a),a.createElement("div",{className:ui("size-value","gap"),style:{transform:"translate".concat(D,"(-50%) scale(").concat(M,")")}},N>0?k(N,t):""))}function Wfe(e,t,r,n){var i=e==="vertical"?0:1,o=e==="vertical"?1:0,u=i?dp:fp,a=r[u.start],f=r[u.end];return x$(t,function(p){return p.pos[i]}).map(function(p){var g=[],b=[],S=[];return p.forEach(function(_){var P,k,M=_.element,D=_.elementRect.rect;if(D[u.end]<a)g.push(_);else if(f<D[u.start])b.push(_);else if(D[u.start]<=a&&f<=D[u.end]&&n){var F=_.pos,B={element:M,rect:Ut(Ut({},D),(P={},P[u.end]=D[u.start],P))},N={element:M,rect:Ut(Ut({},D),(k={},k[u.start]=D[u.end],k))},$=[0,0],V=[0,0];$[i]=F[i],$[o]=F[o],V[i]=F[i],V[o]=F[o]+_.size,g.push({type:e,pos:$,size:0,elementRect:B,direction:"",elementDirection:"end"}),b.push({type:e,pos:V,size:0,elementRect:N,direction:"",elementDirection:"start"})}}),g.sort(function(_,P){return P.pos[o]-_.pos[o]}),b.sort(function(_,P){return _.pos[o]-P.pos[o]}),{total:p,start:g,end:b,inner:S}})}function Xfe(e,t,r,n,i){var o=e.props.isDisplayInnerSnapDigit,u=[];return["vertical","horizontal"].forEach(function(a){var f=t.filter(function(M){return M.type===a}),p=a==="vertical"?1:0,g=p?0:1,b=Wfe(a,f,n,o),S=p?fp:dp,_=p?dp:fp,P=n[S.start],k=n[S.end];b.forEach(function(M){var D=M.total,F=M.start,B=M.end,N=M.inner,$=r[g]+D[0].pos[g]-n[_.start],V=n;F.forEach(function(U){var X=U.elementRect.rect,Z=V[S.start]-X[S.end];if(Z>0){var oe=[0,0];oe[p]=r[p]+V[S.start]-P-Z,oe[g]=$,u.push(_0(e,a,"dashed",u.length,Z,oe,U.className,i))}V=X}),V=n,B.forEach(function(U){var X=U.elementRect.rect,Z=X[S.start]-V[S.end];if(Z>0){var oe=[0,0];oe[p]=r[p]+V[S.end]-P,oe[g]=$,u.push(_0(e,a,"dashed",u.length,Z,oe,U.className,i))}V=X}),N.forEach(function(U){var X=U.elementRect.rect,Z=P-X[S.start],oe=X[S.end]-k,re=[0,0],H=[0,0];re[p]=r[p]-Z,re[g]=$,H[p]=r[p]+k-P,H[g]=$,u.push(_0(e,a,"dashed",u.length,Z,re,U.className,i)),u.push(_0(e,a,"dashed",u.length,oe,H,U.className,i))})})}),u}function Yfe(e,t,r,n,i){var o=[];return["horizontal","vertical"].forEach(function(u){var a=t.filter(function(M){return M.type===u}).slice(0,1),f=u==="vertical"?0:1,p=f?0:1,g=f?fp:dp,b=f?dp:fp,S=n[g.start],_=n[g.end],P=n[b.start],k=n[b.end];a.forEach(function(M){var D=M.gap,F=M.gapRects,B=Math.max.apply(Math,ln([P],Yt(F.map(function(V){var U=V.rect;return U[b.start]})),!1)),N=Math.min.apply(Math,ln([k],Yt(F.map(function(V){var U=V.rect;return U[b.end]})),!1)),$=(B+N)/2;B===N||$===(P+k)/2||F.forEach(function(V){var U=V.rect,X=V.className,Z=[r[0],r[1]];if(U[g.end]<S)Z[f]+=U[g.end]-S;else if(_<U[g.start])Z[f]+=U[g.start]-S-D;else return;Z[p]+=$-P,o.push(_0(e,f?"vertical":"horizontal","gap",o.length,D,Z,X,i))})})}),o}function H3(e){var t,r,n=e.state,i=n.containerClientRect,o=n.hasFixed,u=i.overflow,a=i.scrollHeight,f=i.scrollWidth,p=i.clientHeight,g=i.clientWidth,b=i.clientLeft,S=i.clientTop,_=e.props,P=_.snapGap,k=P===void 0?!0:P,M=_.verticalGuidelines,D=_.horizontalGuidelines,F=_.snapThreshold,B=F===void 0?5:F,N=_.maxSnapElementGuidelineDistance,$=N===void 0?1/0:N,V=_.isDisplayGridGuidelines,U=Zc(nd(e.state)),X=U.top,Z=U.left,oe=U.bottom,re=U.right,H={top:X,left:Z,bottom:oe,right:re,center:(Z+re)/2,middle:(X+oe)/2},ae=Qfe(e),se=ln([],Yt(ae),!1),de=((r=(t=n.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(xe){return xe*B});k&&se.push.apply(se,ln([],Yt(Zfe(e,H,de)),!1));var fe=Ut({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(se.push.apply(se,ln([],Yt(Jfe(e,u?f:g,u?a:p,b,S,fe,V)),!1)),o){var Le=i.left,ye=i.top;fe.left+=Le,fe.top+=ye,fe.right+=Le,fe.bottom+=ye}return se.push.apply(se,ln([],Yt(l$(D||!1,M||!1,u?f:g,u?a:p,b,S,fe)),!1)),se=se.filter(function(xe){var Se=xe.element,Re=xe.elementRect,he=xe.type;if(!Se||!Re)return!0;var Ee=Re.rect;return s$(H,Ee,he,$)}),se}function Zfe(e,t,r){var n=e.props,i=n.maxSnapElementGuidelineDistance,o=i===void 0?1/0:i,u=n.maxSnapElementGapDistance,a=u===void 0?1/0:u,f=e.state.elementRects,p=[];return[["vertical",dp,fp],["horizontal",fp,dp]].forEach(function(g){var b=Yt(g,3),S=b[0],_=b[1],P=b[2],k=t[_.start],M=t[_.end],D=t[_.center],F=t[P.start],B=t[P.end],N={left:r[0],top:r[1]};function $(X){var Z=X.rect,oe=N[_.start];return Z[_.end]<k+oe?k-Z[_.end]:M-oe<Z[_.start]?Z[_.start]-M:-1}var V=f.filter(function(X){var Z=X.rect;return Z[P.start]>B||Z[P.end]<F?!1:$(X)>0}).sort(function(X,Z){return $(X)-$(Z)}),U=[];V.forEach(function(X){V.forEach(function(Z){if(X!==Z){var oe=X.rect,re=Z.rect,H=oe[P.start],ae=oe[P.end],se=re[P.start],de=re[P.end];H>de||se>ae||U.push([X,Z])}})}),U.forEach(function(X){var Z=Yt(X,2),oe=Z[0],re=Z[1],H=oe.rect,ae=re.rect,se=H[_.start],de=H[_.end],fe=ae[_.start],Le=ae[_.end],ye=N[_.start],xe=0,Se=0,Re=!1,he=!1,Ee=!1;if(de<=k&&M<=fe){if(he=!0,xe=(fe-de-(M-k))/2,Se=de+xe+(M-k)/2,Xr(Se-D)>ye)return}else if(de<fe&&Le<k+ye){if(Re=!0,xe=fe-de,Se=Le+xe,Xr(Se-k)>ye)return}else if(de<fe&&M-ye<se){if(Ee=!0,xe=fe-de,Se=se-xe,Xr(Se-M)>ye)return}else return;xe&&s$(t,ae,S,o)&&(xe>a||p.push({type:S,pos:S==="vertical"?[Se,0]:[0,Se],element:re.element,size:0,className:re.className,isStart:Re,isCenter:he,isEnd:Ee,gap:xe,hide:!0,gapRects:[oe,re],direction:"",elementDirection:""}))})}),p}function Kfe(e,t,r,n){var i,o,u=e.props,a=e.state,f=u.snapGridAll,p=u.snapGridWidth,g=p===void 0?0:p,b=u.snapGridHeight,S=b===void 0?0:b,_=a.snapRenderInfo,P=_&&(((i=_.direction)===null||i===void 0?void 0:i[0])||((o=_.direction)===null||o===void 0?void 0:o[1])),k=e.moveables;if(f&&k&&P&&(g||S)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var M=e.getRect(),D=M.children,F=_.direction;if(D){var B=F.map(function($,V){var U=V===0?{snapSize:g,posName:"left",sizeName:"width",clientOffset:n.left-t}:{snapSize:S,posName:"top",sizeName:"height",clientOffset:n.top-r},X=U.snapSize,Z=U.posName,oe=U.sizeName,re=U.clientOffset;if(!X)return{dir:$,multiple:1,snapSize:X,snapOffset:0};var H=M[oe],ae=M[Z],se=Gce(D.map(function(Re){return[Re[Z]-ae,Re[oe],H-Re[oe]-Re[Z]+ae]})).filter(function(Re){return Re}).sort(function(Re,he){return Re-he}),de=se[0],fe=se.map(function(Re){return Ii(Re/de,.1)*X}),Le=1,ye=Ii(H/de,.1);for(Le=1;Le<=10&&!fe.every(function(Re){return Re*Le%1===0});++Le);var xe=(-$+1)/2,Se=qx(ae-re,ae-re+H,xe,1-xe);return{multiple:ye*Le,dir:$,snapSize:X,snapOffset:Math.round(Se/X)}}),N=B.map(function($){return $.multiple||1});a.snapThresholdInfo.multiples=N,a.snapThresholdInfo.offset=B.map(function($){return $.snapOffset}),B.forEach(function($,V){$.snapSize})}}else a.snapThresholdInfo=null}function Jfe(e,t,r,n,i,o,u){n===void 0&&(n=0),i===void 0&&(i=0);var a=e.props,f=e.state,p=a.snapGridWidth,g=p===void 0?0:p,b=a.snapGridHeight,S=b===void 0?0:b,_=[],P=o.left,k=o.top,M=[0,0];Kfe(e,n,i,o);var D=f.snapThresholdInfo,F=g,B=S;if(D&&(g*=D.multiples[0]||1,S*=D.multiples[1]||1,M=D.offset),S){for(var N=function(V){_.push({type:"horizontal",pos:[P,Ii(M[1]*B+V-i+k,.1)],className:ui("grid-guideline"),size:t,hide:!u,direction:"",grid:!0})},$=0;$<=r*2;$+=S)N($);for(var $=-S;$>=-r;$-=S)N($)}if(g){for(var N=function(U){_.push({type:"vertical",pos:[Ii(M[0]*F+U-n+P,.1),k],className:ui("grid-guideline"),size:r,hide:!u,direction:"",grid:!0})},$=0;$<=t*2;$+=g)N($);for(var $=-g;$>=-t;$-=g)N($)}return _}function s$(e,t,r,n){return r==="horizontal"?Xr(e.right-t.left)<=n||Xr(e.left-t.right)<=n||e.left<=t.right&&t.left<=e.right:r==="vertical"?Xr(e.bottom-t.top)<=n||Xr(e.top-t.bottom)<=n||e.top<=t.bottom&&t.top<=e.bottom:!0}function Qfe(e){var t=e.state,r=e.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return t.elementRects=[],[];var i=(t.elementRects||[]).filter(function(S){return!S.refresh}),o=n.map(function(S){return Md(S)&&"element"in S?Ut(Ut({},S),{element:gf(S.element,!0)}):{element:gf(S,!0)}}).filter(function(S){return S.element}),u=cde(i.map(function(S){return S.element}),o.map(function(S){return S.element})),a=u.maintained,f=u.added,p=[];a.forEach(function(S){var _=Yt(S,2),P=_[0],k=_[1];p[k]=i[P]}),ehe(e,f.map(function(S){return o[S]})).map(function(S,_){p[f[_]]=S}),t.elementRects=p;var g=AA(e.props.elementSnapDirections),b=[];return p.forEach(function(S){var _=S.element,P=S.top,k=P===void 0?g.top:P,M=S.left,D=M===void 0?g.left:M,F=S.right,B=F===void 0?g.right:F,N=S.bottom,$=N===void 0?g.bottom:N,V=S.center,U=V===void 0?g.center:V,X=S.middle,Z=X===void 0?g.middle:X,oe=S.className,re=S.rect,H=kA({top:k,right:B,left:D,bottom:$,center:U,middle:Z},re),ae=H.horizontal,se=H.vertical,de=H.horizontalNames,fe=H.verticalNames,Le=re.top,ye=re.left,xe=re.right-ye,Se=re.bottom-Le,Re=[xe,Se];se.forEach(function(he,Ee){b.push({type:"vertical",element:_,pos:[Ii(he,.1),Le],size:Se,sizes:Re,className:oe,elementRect:S,elementDirection:NN[fe[Ee]]||fe[Ee],direction:""})}),ae.forEach(function(he,Ee){b.push({type:"horizontal",element:_,pos:[ye,Ii(he,.1)],size:xe,sizes:Re,className:oe,elementRect:S,elementDirection:NN[de[Ee]]||de[Ee],direction:""})})}),b}function HN(e,t){return e?e.map(function(r){var n=Md(r)?r:{pos:r},i=n.pos;return c1(i)?n:Ut(Ut({},n),{pos:no(i,t)})}):[]}function l$(e,t,r,n,i,o,u){i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u={left:0,top:0,right:0,bottom:0});var a=[],f=u.left,p=u.top,g=u.bottom,b=u.right,S=r+b-f,_=n+g-p;return HN(e,_).forEach(function(P){a.push({type:"horizontal",pos:[f,Ii(P.pos-o+p,.1)],size:S,className:P.className,direction:""})}),HN(t,S).forEach(function(P){a.push({type:"vertical",pos:[Ii(P.pos-i+f,.1),p],size:_,className:P.className,direction:""})}),a}function ehe(e,t){if(!t.length)return[];var r=e.props.groupable,n=e.state,i=n.containerClientRect,o=n.rootMatrix,u=n.is3d,a=n.offsetDelta,f=u?4:3,p=Yt(Cfe(o,i,f),2),g=p[0],b=p[1],S=r?0:a[0],_=r?0:a[1];return t.map(function(P){var k=P.element.getBoundingClientRect(),M=k.left-g-S,D=k.top-b-_,F=D+k.height,B=M+k.width,N=Yt(Gy(o,[M,D],f),2),$=N[0],V=N[1],U=Yt(Gy(o,[B,F],f),2),X=U[0],Z=U[1];return Ut(Ut({},P),{rect:{left:$,right:X,top:V,bottom:Z,center:($+X)/2,middle:(V+Z)/2}})})}function T_(e){var t=e.state,r=t.container,n=e.props.snapContainer||r;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var i=t.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==n){var u=gf(n,!0);if(u){var a=W0(u),f=JN(t,[a.left-i.left,a.top-i.top]),p=JN(t,[a.right-i.right,a.bottom-i.bottom]);o.left=Ii(f[0],1e-5),o.top=Ii(f[1],1e-5),o.right=Ii(p[0],1e-5),o.bottom=Ii(p[1],1e-5)}}return t.snapContainer=n,t.snapOffset=o,t.guidelines=H3(e),t.enableSnap=!0,!0}function u$(e,t,r,n,i,o){var u=qm(e,t,r,o?4:3),a=dl(u,n);return OA(u,di(i,a))}function WN(e){return e?e/Xr(e):0}function the(e,t,r,n,i,o){var u=o.fixedDirection,a=Pfe(r,u,n),f=LA(e,t,r,n),p=ln(ln([],Yt(jfe(e,t,a,n,i,o)),!1),Yt(n$(e,f,o)),!1),g=Hx(p,0),b=Hx(p,1);return{width:{isBound:g.isBound,offset:g.offset[0]},height:{isBound:b.isBound,offset:b.offset[1]}}}function rhe(e,t,r,n,i,o,u,a,f){var p=dl(t,u),g=Pw(e,a,{vertical:[p[0]],horizontal:[p[1]]}),b=g.horizontal.offset,S=g.vertical.offset;if(Ii(S,z3)||Ii(b,z3)){var _=Yt(Tf({datas:f,distX:-S,distY:-b}),2),P=_[0],k=_[1],M=Math.min(i||1/0,r+u[0]*P),D=Math.min(o||1/0,n+u[1]*k);return[M-r,D-n]}return[0,0]}function c$(e,t,r,n,i,o,u,a){for(var f=nd(e.state),p=e.props.keepRatio,g=0,b=0,S=0;S<2;++S){var _=t(g,b),P=the(e,_,i,p,u,a),k=P.width,M=P.height,D=k.isBound,F=M.isBound,B=k.offset,N=M.offset;if(S===1&&(D||(B=0),F||(N=0)),S===0&&u&&!D&&!F)return[0,0];if(p){var $=Xr(B)*(r?1/r:1),V=Xr(N)*(n?1/n:1),U=D&&F?$<V:F||!D&&$<V;U?B=r*N/n:N=n*B/r}g+=B,b+=N}if(!p&&i[0]&&i[1]){var X=Vfe(e,f,i,o,a),Z=X.maxWidth,oe=X.maxHeight,re=Yt(rhe(e,t(g,b).map(function(se){return se.map(function(de){return Ii(de,z3)})}),r+g,n+b,Z,oe,i,u,a),2),B=re[0],N=re[1];g+=B,b+=N}return[g,b]}function U0(e){return e<0&&(e=e%360+360),e%=360,e}function nhe(e,t){t=U0(t);var r=Math.floor(e/360),n=r*360+360-t,i=r*360+t;return Xr(e-n)<Xr(e-i)?n:i}function uC(e,t){e=U0(e),t=U0(t);var r=U0(e-t);return Math.min(r,360-r)}function ihe(e,t,r,n){var i,o=e.props,u=(i=o[YV])!==null&&i!==void 0?i:5,a=o[ZV];if(sv(e,"rotatable")){var f=t.pos1,p=t.pos2,g=t.pos3,b=t.pos4,S=t.origin,_=r*Math.PI/180,P=[f,p,g,b].map(function(N){return di(N,S)}),k=P.map(function(N){return Y1(N,_)}),M=ln(ln([],Yt(_fe(e,P,k,S,r)),!1),Yt(Dfe(e,P,k,S,r)),!1);M.sort(function(N,$){return Xr(N-r)-Xr($-r)});var D=M.length>0;if(D)return{isSnap:D,dist:D?M[0]:r}}if(a?.length&&u){var F=a.slice().sort(function(N,$){return uC(N,n)-uC($,n)}),B=F[0];if(uC(B,n)<=u)return{isSnap:!0,dist:r+nhe(n,B)-n}}return{isSnap:!1,dist:r}}function ahe(e,t,r,n,i,o,u){if(!sv(e,"resizable"))return[0,0];var a=u.fixedDirection,f=u.nextAllMatrix,p=e.state,g=p.allMatrix,b=p.is3d;return c$(e,function(S,_){return u$(f||g,t+S,r+_,a,i,b)},t,r,n,i,o,u)}function ohe(e,t,r,n,i){if(!sv(e,"scalable"))return[0,0];var o=i.startOffsetWidth,u=i.startOffsetHeight,a=i.fixedPosition,f=i.fixedDirection,p=i.is3d,g=c$(e,function(b,S){return u$(afe(i,_a(t,[b/o,S/u])),o,u,f,a,p)},o,u,r,a,n,i);return[g[0]/o,g[1]/u]}function she(e,t){t.absolutePoses=nd(e.state)}function XN(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(n){var i=n.guideline;Sc(t,function(o){return o.guideline===i})||(i.direction="",t.push({guideline:i,posInfo:r}))})}),t.map(function(r){var n=r.guideline,i=r.posInfo;return Ut(Ut({},n),{direction:i.direction})})}function YN(e,t,r,n,i,o){var u=PA(Tw(e,o),t,r),a=u.vertical,f=u.horizontal,p=my();a.forEach(function(P){P.isBound&&(P.direction==="start"&&(p.left=!0),P.direction==="end"&&(p.right=!0),n.push({type:"bounds",pos:P.pos}))}),f.forEach(function(P){P.isBound&&(P.direction==="start"&&(p.top=!0),P.direction==="end"&&(p.bottom=!0),i.push({type:"bounds",pos:P.pos}))});var g=Ofe(e),b=g.boundMap,S=g.vertical,_=g.horizontal;return S.forEach(function(P){gh(n,function(k){var M=k.type,D=k.pos;return M==="bounds"&&D===P})>=0||n.push({type:"bounds",pos:P})}),_.forEach(function(P){gh(i,function(k){var M=k.type,D=k.pos;return M==="bounds"&&D===P})>=0||i.push({type:"bounds",pos:P})}),{boundMap:p,innerBoundMap:b}}var lhe=BA("",["resizable","scalable"]),uhe={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",YV,ZV,KV,JV,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,n=r.top,i=r.left,o=r.pos1,u=r.pos2,a=r.pos3,f=r.pos4,p=r.snapRenderInfo,g=e.props.snapRenderThreshold,b=g===void 0?1:g;if(!p||!p.render||!sv(e,""))return yy(e,"boundMap",my(),function(we){return JSON.stringify(we)}),yy(e,"innerBoundMap",my(),function(we){return JSON.stringify(we)}),[];r.guidelines=H3(e);var S=Math.min(o[0],u[0],a[0],f[0]),_=Math.min(o[1],u[1],a[1],f[1]),P=p.externalPoses||[],k=nd(e.state),M=[],D=[],F=[],B=[],N=[],$=Zc(k),V=$.width,U=$.height,X=$.top,Z=$.left,oe=$.bottom,re=$.right,H={left:Z,right:re,top:X,bottom:oe,center:(Z+re)/2,middle:(X+oe)/2},ae=P.length>0,se=ae?Zc(P):{};if(!p.request){if(p.direction&&N.push(Ife(e,k,p.direction,b,b)),p.snap){var de=Zc(k);p.center&&(de.middle=(de.top+de.bottom)/2,de.center=(de.left+de.right)/2),N.push(FN(e,de,b,b))}ae&&(p.center&&(se.middle=(se.top+se.bottom)/2,se.center=(se.left+se.right)/2),N.push(FN(e,se,b,b))),N.forEach(function(we){var Ne=we.vertical.posInfos,Fe=we.horizontal.posInfos;M.push.apply(M,ln([],Yt(Ne.filter(function(Xe){var Be=Xe.guidelineInfos;return Be.some(function(ot){var Ke=ot.guideline;return!Ke.hide})}).map(function(Xe){return{type:"snap",pos:Xe.pos}})),!1)),D.push.apply(D,ln([],Yt(Fe.filter(function(Xe){var Be=Xe.guidelineInfos;return Be.some(function(ot){var Ke=ot.guideline;return!Ke.hide})}).map(function(Xe){return{type:"snap",pos:Xe.pos}})),!1)),F.push.apply(F,ln([],Yt(XN(Ne)),!1)),B.push.apply(B,ln([],Yt(XN(Fe)),!1))})}var fe=YN(e,[Z,re],[X,oe],M,D),Le=fe.boundMap,ye=fe.innerBoundMap;ae&&YN(e,[se.left,se.right],[se.top,se.bottom],M,D,p.externalBounds);var xe=ln(ln([],Yt(F),!1),Yt(B),!1),Se=xe.filter(function(we){return we.element&&!we.gapRects}),Re=xe.filter(function(we){return we.gapRects}).sort(function(we,Ne){return we.gap-Ne.gap});Fn(e,"onSnap",{guidelines:xe.filter(function(we){var Ne=we.element;return!Ne}),elements:Se,gaps:Re},!0);var he=yy(e,"boundMap",Le,function(we){return JSON.stringify(we)},my()),Ee=yy(e,"innerBoundMap",ye,function(we){return JSON.stringify(we)},my());return(Le===he||ye===Ee)&&Fn(e,"onBound",{bounds:Le,innerBounds:ye},!0),ln(ln(ln(ln(ln(ln([],Yt(Xfe(e,Se,[S,_],H,t)),!1),Yt(Yfe(e,Re,[S,_],H,t)),!1),Yt(UN(e,"horizontal",B,[i,n],H,t)),!1),Yt(UN(e,"vertical",F,[i,n],H,t)),!1),Yt(GN(e,"horizontal",D,S,n,V,0,t)),!1),Yt(GN(e,"vertical",M,_,i,U,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},T_(e)},drag:function(e){var t=e.state;T_(e)||(t.guidelines=H3(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(lhe(e,t)||U3(e,t))return!0;if(!t.isRequest&&t.inputEvent)return cl(t.inputEvent.target,ui("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,T_(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,T_(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function che(e,t){return[e[0]*t[0],e[1]*t[1]]}function ui(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ice.apply(void 0,ln([CA],Yt(e),!1))}function d$(e){e()}function dhe(e){return!e||e==="none"?[1,0,0,1,0,0]:Md(e)?e:f1(e)}function H0(e,t,r){return Vx(t,Cm(r,t),e,Cm(r.map(function(n){return-n}),t))}function fhe(e,t,r){if(t==="%"){var n=DA(e.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function hhe(e){var t=phe(NA(e,":before"));return t.map(function(r,n){var i=X1(r),o=i.value,u=i.unit;return o*fhe(e,u,n===0)})}function Xx(e){return e?e.split(" "):["0","0"]}function phe(e){return Xx(e.transformOrigin)}function f$(e){var t=ec(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var n=e.transform,i=n.baseVal;if(!i)return"";var o=i.length;if(!o)return"";for(var u=[],a=function(p){var g=i[p].matrix;u.push("matrix(".concat(["a","b","c","d","e","f"].map(function(b){return g[b]}).join(", "),")"))},f=0;f<o;++f)a(f);return u.join(" ")}return""}function p1(e,t,r,n,i){var o,u,a=gA(e)||xp(e),f=!1,p,g;if(!e||r)p=e;else{var b=(o=e?.assignedSlot)===null||o===void 0?void 0:o.parentElement,S=e.parentElement;b?(f=!0,g=S,p=b):p=S}for(var _=!1,P=e===t||p===t,k="relative",M=1,D=parseFloat(i?.("zoom"))||1,F=i?.("position");p&&p!==a;){t===p&&(P=!0);var B=ec(p),N=p.tagName.toLowerCase(),$=f$(p),V=B("willChange"),U=parseFloat(B("zoom"))||1;if(k=B("position"),n&&U!==1){M=U;break}if(!r&&n&&D!==1&&F&&F!=="absolute"||N==="svg"||N==="foreignobject"||k!=="static"||$&&$!=="none"||V==="transform")break;var X=(u=e?.assignedSlot)===null||u===void 0?void 0:u.parentNode,Z=p.parentNode;X&&(f=!0,g=Z);var oe=Z;if(oe&&oe.nodeType===11){p=oe.host,_=!0,k=ec(p)("position");break}p=oe,k="relative"}return{offsetZoom:M,hasSlot:f,parentSlotElement:g,isCustomElement:_,isStatic:k==="static",isEnd:P||!p||p===a,offsetParent:p||a}}function mhe(e,t){var r,n=e.tagName.toLowerCase(),i=e.offsetLeft,o=e.offsetTop,u=ec(e),a=dA(i),f=!a,p,g;return!f&&(n!=="svg"||e.ownerSVGElement)?(p=LV?hhe(e):Xx(u("transformOrigin")).map(function(b){return parseFloat(b)}),g=p.slice(),f=!0,n==="svg"?(i=0,o=0):(r=Yt(vhe(e,p,e===t&&t.tagName.toLowerCase()==="g"),4),i=r[0],o=r[1],p[0]=r[2],p[1]=r[3])):(p=Xx(u("transformOrigin")).map(function(b){return parseFloat(b)}),g=p.slice()),{tagName:n,isSVG:a,hasOffset:f,offset:[i||0,o||0],origin:p,targetOrigin:g}}function h$(e,t){var r=ec(e),n=ec(xp(e)),i=n("position");if(!t&&(!i||i==="static"))return[0,0];var o=parseInt(n("marginLeft"),10),u=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(u=0),(r("left")!=="auto"||r("right")!=="auto")&&(o=0)),[o,u]}function W3(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=Ld(r,3,4))})}function ghe(e){for(var t=e.parentElement,r=!1,n=xp(e);t;){var i=NA(t).transform;if(i&&i!=="none"){r=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:r}}function Aw(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(CV(e,!t).join(","),")")}function DA(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||r,clientWidth:t,clientHeight:r}}function yhe(e,t){var r,n=DA(e),i=n.width,o=n.height,u=n.clientWidth,a=n.clientHeight,f=u/i,p=a/o,g=e.preserveAspectRatio.baseVal,b=g.align,S=g.meetOrSlice,_=[0,0],P=[f,p],k=[0,0];if(b!==1){var M=(b-2)%3,D=Math.floor((b-2)/3);_[0]=i*M/2,_[1]=o*D/2;var F=S===2?Math.max(p,f):Math.min(f,p);P[0]=F,P[1]=F,k[0]=(u-i)/2*M,k[1]=(a-o)/2*D}var B=vA(P,t);return r=Yt(k,2),B[t*(t-1)]=r[0],B[t*(t-1)+1]=r[1],H0(B,t,_)}function vhe(e,t,r){var n=e.tagName.toLowerCase();if(!e.getBBox||!r&&n==="g")return[0,0,0,0];var i=ec(e),o=i("transform-box")==="fill-box",u=e.getBBox(),a=DA(e.ownerSVGElement),f=u.x,p=u.y;n==="foreignobject"&&!f&&!p&&(f=parseFloat(e.getAttribute("x"))||0,p=parseFloat(e.getAttribute("y"))||0);var g=f-a.x,b=p-a.y,S=o?t[0]:t[0]-g,_=o?t[1]:t[1]-b;return[g,b,S,_]}function es(e,t,r){return wu(e,Sm(t,r),r)}function qm(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(i){return es(e,i,n)})}function Zc(e){var t=e.map(function(p){return p[0]}),r=e.map(function(p){return p[1]}),n=Math.min.apply(Math,ln([],Yt(t),!1)),i=Math.min.apply(Math,ln([],Yt(r),!1)),o=Math.max.apply(Math,ln([],Yt(t),!1)),u=Math.max.apply(Math,ln([],Yt(r),!1)),a=o-n,f=u-i;return{left:n,top:i,right:o,bottom:u,width:a,height:f}}function ZN(e,t,r,n){var i=qm(e,t,r,n);return Zc(i)}function bhe(e,t,r,n,i){var o,u=e.target,a=e.origin,f=t.matrix,p=m$(u),g=p.offsetWidth,b=p.offsetHeight,S=r.getBoundingClientRect(),_=[0,0];r===xp(r)&&(_=h$(u,!0));for(var P=u.getBoundingClientRect(),k=P.left-S.left+r.scrollLeft-(r.clientLeft||0)+_[0],M=P.top-S.top+r.scrollTop-(r.clientTop||0)+_[1],D=P.width,F=P.height,B=Vx(n,i,f),N=ZN(B,g,b,n),$=N.left,V=N.top,U=N.width,X=N.height,Z=es(B,a,n),oe=di(Z,[$,V]),re=[k+oe[0]*D/U,M+oe[1]*F/X],H=[0,0],ae=0;++ae<10;){var se=_f(i,n);o=Yt(di(es(se,re,n),es(se,Z,n)),2),H[0]=o[0],H[1]=o[1];var de=Vx(n,i,Cm(H,n),f),fe=ZN(de,g,b,n),Le=fe.left,ye=fe.top,xe=Le-k,Se=ye-M;if(Xr(xe)<2&&Xr(Se)<2)break;re[0]-=xe,re[1]-=Se}return H.map(function(Re){return Math.round(Re)})}function _he(e,t,r){var n=e.length===16,i=n?4:3,o=t.map(function(f){return es(e,f,i)}),u=r.left,a=r.top;return o.map(function(f){return[f[0]+u,f[1]+a]})}function rd(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function p$(e,t){return rd([t[0]-e[0],t[1]-e[1]])}function x0(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=Ns(e,t));var i=p$(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function Yx(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,o=r.reduce(function(a,f){return a+f[0]},0)/i,u=r.reduce(function(a,f){return a+f[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(u,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function Tm(e,t){var r=e[t];return Md(r)?Ut(Ut({},e),r):e}function m$(e){var t=e&&!dA(e.offsetWidth),r=0,n=0,i=0,o=0,u=0,a=0,f=0,p=0,g=0,b=0,S=0,_=0,P=1/0,k=1/0,M=1/0,D=1/0,F=0,B=0,N=!1;if(e)if(!t&&e.ownerSVGElement){var $=e.getBBox();N=!0,r=$.width,n=$.height,u=r,a=n,f=r,p=n,i=r,o=n}else{var V=ec(e),U=e.style,X=V("boxSizing")==="border-box",Z=parseFloat(V("borderLeftWidth"))||0,oe=parseFloat(V("borderRightWidth"))||0,re=parseFloat(V("borderTopWidth"))||0,H=parseFloat(V("borderBottomWidth"))||0,ae=parseFloat(V("paddingLeft"))||0,se=parseFloat(V("paddingRight"))||0,de=parseFloat(V("paddingTop"))||0,fe=parseFloat(V("paddingBottom"))||0,Le=ae+se,ye=de+fe,xe=Z+oe,Se=re+H,Re=Le+xe,he=ye+Se,Ee=V("position"),we=0,Ne=0;if("clientLeft"in e){var Fe=null;if(Ee==="absolute"){var Xe=p1(e,xp(e));Fe=Xe.offsetParent}else Fe=e.parentElement;if(Fe){var Be=ec(Fe);we=parseFloat(Be("width")),Ne=parseFloat(Be("height"))}}g=Math.max(Le,no(V("minWidth"),we)||0),b=Math.max(ye,no(V("minHeight"),Ne)||0),P=no(V("maxWidth"),we),k=no(V("maxHeight"),Ne),isNaN(P)&&(P=1/0),isNaN(k)&&(k=1/0),F=no(U.width,0)||0,B=no(U.height,0)||0,u=parseFloat(V("width"))||0,a=parseFloat(V("height"))||0,f=Xr(u-F)<1?A3(g,F||u,P):u,p=Xr(a-B)<1?A3(b,B||a,k):a,r=f,n=p,i=f,o=p,X?(M=P,D=k,S=g,_=b,f=r-Re,p=n-he):(M=P+Re,D=k+he,S=g+Re,_=b+he,r=f+Re,n=p+he),i=f+Le,o=p+ye}return{svg:N,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:o,contentWidth:f,contentHeight:p,inlineCSSWidth:F,inlineCSSHeight:B,cssWidth:u,cssHeight:a,minWidth:g,minHeight:b,maxWidth:P,maxHeight:k,minOffsetWidth:S,minOffsetHeight:_,maxOffsetWidth:M,maxOffsetHeight:D}}function g$(e,t){return Ns(t>0?e[0]:e[1],t>0?e[1]:e[0])}function I_(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function y$(e,t){var r=e===xp(e)||e===gA(e),n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=ec(e)("overflow")!=="visible",Ut(Ut({},t),n)}function cC(e,t,r,n){var i=e.left,o=e.right,u=e.top,a=e.bottom,f=t.top,p=t.left,g={left:p+i,top:f+u,right:p+o,bottom:f+a,width:o-i,height:a-u};return r&&n?y$(r,g):g}function W0(e,t){var r=0,n=0,i=0,o=0;if(e){var u=e.getBoundingClientRect();r=u.left,n=u.top,i=u.width,o=u.height}var a={left:r,top:n,width:i,height:o,right:r+i,bottom:n+o};return e&&t?y$(e,a):a}function xhe(e){var t=e.props,r=t.groupable,n=t.svgOrigin,i=e.getState(),o=i.offsetWidth,u=i.offsetHeight,a=i.svg,f=i.transformOrigin;return!r&&a&&n?jA(n,o,u):f}function v$(e,t,r,n){var i;if(e)i=e;else if(t)i=[0,0];else{var o=r.target;i=b$(o,n)}return i}function b$(e,t){if(e){var r=e.getAttribute("data-rotation")||"",n=e.getAttribute("data-direction");if(t.deg=r,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function OA(e,t){return[_a(t,e[0]),_a(t,e[1]),_a(t,e[2]),_a(t,e[3])]}function nd(e){var t=e.left,r=e.top,n=e.pos1,i=e.pos2,o=e.pos3,u=e.pos4;return OA([n,i,o,u],[t,r])}function X3(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function gy(e,t){var r=t?"controlGesto":"targetGesto",n=e[r];n?.isIdle()===!1&&X3(e,t),n?.unset(),e[r]=null}function Fu(e,t){if(t){var r=ov(t);r.nextStyle=Ut(Ut({},r.nextStyle),e)}return{style:e,cssText:iv(e).map(function(n){return"".concat(zce(n,"-"),": ").concat(e[n],";")}).join("")}}function _$(e,t,r){var n=t.afterTransform||t.transform;return Ut(Ut({},Fu(Ut(Ut(Ut({},e.style),t.style),{transform:n}),r)),{afterTransform:n,transform:e.transform})}function ji(e,t,r,n){var i=t.datas;i.datas||(i.datas={});var o=Ut(Ut({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:i.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var u;(u=t.stop)===null||u===void 0||u.call(t)}});return i.isStartEvent?n||(i.lastEvent=o):i.isStartEvent=!0,o}function Cc(e,t,r){var n=t.datas,i="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),Ut(Ut({isDrag:i},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function kw(e,t,r){e._emitter.on(t,r)}function Fn(e,t,r,n,i){return e.triggerEvent(t,r,n,i)}function NA(e,t){return ap(e).getComputedStyle(e,t)}function P_(e,t,r){var n={},i={};return e.filter(function(o){var u=o.name;if(n[u]||!t.some(function(a){return o[a]}))return!1;if(!r&&o.ableGroup){if(i[o.ableGroup])return!1;i[o.ableGroup]=!0}return n[u]=!0,!0})}function Y3(e,t){return e===t||e==null&&t==null}function KN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var i=e[n];if(!dA(i))return i}return e[r]}function x$(e,t){var r=[],n=[];return e.forEach(function(i,o){var u=t(i,o,e),a=n.indexOf(u),f=r[a]||[];a===-1&&(n.push(u),r.push(f)),f.push(i)}),r}function whe(e,t){var r=[],n={};return e.forEach(function(i,o){var u=t(i,o,e),a=n[u];a||(a=[],n[u]=a,r.push(a)),a.push(i)}),r}function w$(e){return e.reduce(function(t,r){return t.concat(r)},[])}function $y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return Xr(n)-Xr(r)}),e[0]}function Gy(e,t,r){return wu(_f(e,r),Sm(t,r),r)}function She(e,t){var r,n=e.is3d,i=e.rootMatrix,o=n?4:3;return r=Yt(Gy(i,[t.distX,t.distY],o),2),t.distX=r[0],t.distY=r[1],t}function jc(e,t,r,n){if(!r[0]&&!r[1])return t;var i=es(e,[WN(r[0]||1),0],n),o=es(e,[0,WN(r[1]||1)],n),u=es(e,[r[0]/rd(i),r[1]/rd(o)],n);return _a(t,u)}function wd(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function Zx(e){return Xr(e)<=ju?0:e}function FA(e){return function(t){if(!t.isDragging(e))return"";var r=ffe(t,e),n=r.deg;return n?ui("view-control-rotation".concat(n)):""}}function BA(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return t.some(function(o){return n.requestAble===o})?n.parentDirection:!1;var i=n.inputEvent.target;return cl(i,ui("direction"))&&(!e||cl(i,ui(e)))}}function Che(e,t,r){var n,i=jy(e,{"x%":function($){return $/100*t.offsetWidth},"y%":function($){return $/100*t.offsetHeight}}),o=e.slice(0,r<0?void 0:r),u=e.slice(0,r<0?void 0:r+1),a=e[r]||"",f=r<0?[]:e.slice(r),p=r<0?[]:e.slice(r+1),g=i.slice(0,r<0?void 0:r),b=i.slice(0,r<0?void 0:r+1),S=(n=i[r])!==null&&n!==void 0?n:jy([""])[0],_=r<0?[]:i.slice(r),P=r<0?[]:i.slice(r+1),k=S?[S]:[],M=Ug(g),D=Ug(b),F=Ug(_),B=Ug(P),N=io(M,F,4);return{transforms:e,beforeFunctionMatrix:M,beforeFunctionMatrix2:D,targetFunctionMatrix:Ug(k),afterFunctionMatrix:F,afterFunctionMatrix2:B,allFunctionMatrix:N,beforeFunctions:g,beforeFunctions2:b,targetFunction:k[0],afterFunctions:_,afterFunctions2:P,beforeFunctionTexts:o,beforeFunctionTexts2:u,targetFunctionText:a,afterFunctionTexts:f,afterFunctionTexts2:p}}function Ehe(e){return!e||!Md(e)||yA(e)?!1:Ml(e)||"length"in e}function gf(e,t){return e?yA(e)?e:wh(e)?t?document.querySelector(e):e:fA(e)?e():xV(e)?e:"current"in e?e.current:e:null}function zA(e,t){if(!e)return[];var r=Ehe(e)?[].slice.call(e):[e];return r.reduce(function(n,i){return wh(i)&&t?ln(ln([],Yt(n),!1),Yt([].slice.call(document.querySelectorAll(i))),!1):(Ml(i)?n.push(zA(i,t)):n.push(gf(i,t)),n)},[])}function The(e,t,r){var n=Ns(e,t)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function JN(e,t){var r=e.rootMatrix,n=e.is3d,i=n?4:3,o=_f(r,i);return n||(o=Ld(o,3,4)),o[12]=0,o[13]=0,o[14]=0,tde(o,t)}function S$(e,t,r,n,i){var o=Yt(e,2),u=o[0],a=o[1],f=0,p=0;if(i&&u&&a){var g=Ns([0,0],t),b=Ns([0,0],n),S=rd(t),_=Math.cos(g-b)*S;if(!n[0])p=_,f=p*r;else if(!n[1])f=_,p=f/r;else{var P=n[0]*u,k=n[1]*a,M=Math.atan2(P+t[0],k+t[1]),D=Math.atan2(P,k);M<0&&(M+=Math.PI*2),D<0&&(D+=Math.PI*2);var F=0;Xr(M-D)<Math.PI/2||Xr(M-D)>Math.PI/2*3||(D+=Math.PI),F=M-D,F>Math.PI*2?F-=Math.PI*2:F>Math.PI?F=2*Math.PI-F:F<-Math.PI&&(F=-2*Math.PI-F);var B=rd([P+t[0],k+t[1]])*Math.cos(F);f=B*Math.sin(D)-P,p=B*Math.cos(D)-k,n[0]<0&&(f*=-1),n[1]<0&&(p*=-1)}}else f=n[0]*t[0],p=n[1]*t[1];return[f,p]}function C$(e,t,r,n){var i,o=r.ratio,u=r.startOffsetWidth,a=r.startOffsetHeight,f=0,p=0,g=n.distX,b=n.distY,S=n.pinchScale,_=n.parentDistance,P=n.parentDist,k=n.parentScale,M=r.fixedDirection,D=[0,1].map(function(U){return Xr(e[U]-M[U])}),F=[0,1].map(function(U){var X=D[U];return X!==0&&(X=2/X),X});if(P)f=P[0],p=P[1],t&&(f?p||(p=f/o):f=p*o);else if(c1(S))f=(S-1)*u,p=(S-1)*a;else if(k)f=(k[0]-1)*u,p=(k[1]-1)*a;else if(_){var B=u*D[0],N=a*D[1],$=rd([B,N]);f=_/$*B*F[0],p=_/$*N*F[1]}else{var V=Tf({datas:r,distX:g,distY:b});V=F.map(function(U,X){return V[X]*U}),i=Yt(S$([u,a],V,o,e,t),2),f=i[0],p=i[1]}return{distWidth:f,distHeight:p}}function Z3(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=Yt(e.split(" "),2),n=r[0],i=r[1],o=Z3(n||""),u=Z3(i||""),a=Ut(Ut({},o),u),f={x:"50%",y:"50%"};return a.x&&(f.x=a.x),a.y&&(f.y=a.y),a.value&&(a.x&&!a.y&&(f.y=a.value),!a.x&&a.y&&(f.x=a.value)),f}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function jA(e,t,r){var n=Z3(e,!0),i=n.x,o=n.y;return[no(i,t)||0,no(o,r)||0]}function Ihe(e,t,r){var n=e.map(function(o){return di(o,t)}),i=n.map(function(o){return Y1(o,r)});return{prev:n,next:i,result:i.map(function(o){return _a(o,t)})}}function E$(e,t){return e.length===t.length&&e.every(function(r,n){var i=t[n],o=Ml(r),u=Ml(i);return o&&u?E$(r,i):!o&&!u?r===i:!1})}function yy(e,t,r,n,i){var o=e._store,u=o[t];if(!(t in o))if(i!=null)o[t]=i,u=i;else return o[t]=r,r;return u===r||n(u)===n(r)?u:(o[t]=r,r)}function Nu(e){return e>=0?1:-1}function Xr(e){return Math.abs(e)}function dC(e,t){return $ce(e).map(function(r){return t(r)})}function T$(e){return c1(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var Phe=J1("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,i=t.angle,o=t.originalDatas,u=e.props,a=u.pinchable,f=u.ables;if(!a)return!1;var p="onPinch".concat(n?"Group":"","Start"),g="drag".concat(n?"Group":"","ControlStart"),b=(a===!0?e.controlAbles:f.filter(function(k){return a.indexOf(k.name)>-1})).filter(function(k){return k.canPinch&&k[g]}),S=ji(e,t,{});n&&(S.targets=n);var _=Fn(e,p,S);r.isPinch=_!==!1,r.ables=b;var P=r.isPinch;return P?(b.forEach(function(k){if(o[k.name]=o[k.name]||{},!!k[g]){var M=Ut(Ut({},t),{datas:o[k.name],parentRotate:i,isPinch:!0});k[g](e,M)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},P):!1},pinch:function(e,t){var r=t.datas,n=t.scale,i=t.distance,o=t.originalDatas,u=t.inputEvent,a=t.targets,f=t.angle;if(r.isPinch){var p=i*(1-1/n),g=ji(e,t,{});a&&(g.targets=a);var b="onPinch".concat(a?"Group":"");Fn(e,b,g);var S=r.ables,_="drag".concat(a?"Group":"","Control");return S.forEach(function(P){P[_]&&P[_](e,Ut(Ut({},t),{datas:o[P.name],inputEvent:u,resolveMatrix:!0,pinchScale:n,parentDistance:p,parentRotate:f,isPinch:!0}))}),g}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.targets,u=t.originalDatas;if(r.isPinch){var a="onPinch".concat(o?"Group":"","End"),f=Cc(e,t,{isDrag:n});o&&(f.targets=o),Fn(e,a,f);var p=r.ables,g="drag".concat(o?"Group":"","ControlEnd");return p.forEach(function(b){b[g]&&b[g](e,Ut(Ut({},t),{isDrag:n,datas:u[b.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,Ut(Ut({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,Ut(Ut({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,Ut(Ut({},t),{targets:e.props.targets}))}}),QN=BA("scalable"),Ahe={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:HV("scalable"),dragControlCondition:QN,viewClassName:FA("scalable"),dragControlStart:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.parentDirection,u=v$(o,n,i,r),a=e.state,f=a.width,p=a.height,g=a.targetTransform,b=a.target,S=a.pos1,_=a.pos2,P=a.pos4;if(!u||!b)return!1;n||jm(e,t),r.datas={},r.transform=g,r.prevDist=[1,1],r.direction=u,r.startOffsetWidth=f,r.startOffsetHeight=p,r.startValue=[1,1];var k=!u[0]&&!u[1]||u[0]||!u[1];Ew(e,t,"scale"),r.isWidth=k;function M(V){r.ratio=V&&isFinite(V)?V:0}r.startPositions=nd(e.state);function D(V){var U=i$(r.startPositions,V);r.fixedDirection=U.fixedDirection,r.fixedPosition=U.fixedPosition,r.fixedOffset=U.fixedOffset}r.setFixedDirection=D,M(lh(S,_)/lh(_,P)),D([-u[0],-u[1]]);var F=function(V){r.minScaleSize=V},B=function(V){r.maxScaleSize=V};F([-1/0,-1/0]),B([1/0,1/0]);var N=ji(e,t,Ut(Ut({direction:u,set:function(V){r.startValue=V},setRatio:M,setFixedDirection:D,setMinScaleSize:F,setMaxScaleSize:B},Cw(e,t)),{dragStart:Ou.dragStart(e,new qy().dragStart([0,0],t))})),$=Fn(e,"onScaleStart",N);return r.startFixedDirection=r.fixedDirection,$!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:u}),r.isScale?N:!1},dragControl:function(e,t){ww(e,t,"scale");var r=t.datas,n=t.parentKeepRatio,i=t.parentFlag,o=t.isPinch,u=t.dragClient,a=t.isRequest,f=t.useSnap,p=t.resolveMatrix,g=r.prevDist,b=r.direction,S=r.startOffsetWidth,_=r.startOffsetHeight,P=r.isScale,k=r.startValue,M=r.isWidth,D=r.ratio;if(!P)return!1;var F=e.props,B=F.throttleScale,N=F.parentMoveable,$=b;!b[0]&&!b[1]&&($=[1,1]);var V=D&&(n??F.keepRatio)||!1,U=e.state,X=[k[0],k[1]];function Z(){var it=C$($,V,r,t),ke=it.distWidth,Nt=it.distHeight,st=S?(S+ke)/S:1,$e=_?(_+Nt)/_:1;k[0]||(X[0]=ke/S),k[1]||(X[1]=Nt/_);var Zt=($[0]||V?st:1)*X[0],$t=($[1]||V?$e:1)*X[1];return Zt===0&&(Zt=Nu(g[0])*S_),$t===0&&($t=Nu(g[1])*S_),[Zt,$t]}var oe=Z();if(!o&&e.props.groupable){var re=U.snapRenderInfo||{},H=re.direction;Ml(H)&&(H[0]||H[1])&&(U.snapRenderInfo={direction:b,request:t.isRequest})}Fn(e,"onBeforeScale",ji(e,t,{scale:oe,setFixedDirection:function(it){return r.setFixedDirection(it),oe=Z(),oe},startFixedDirection:r.startFixedDirection,setScale:function(it){oe=it}},!0));var ae=[oe[0]/X[0],oe[1]/X[1]],se=u,de=[0,0],fe=Nu(ae[0]*ae[1]),Le=!u&&!i&&o;if(Le||p?se=IA(e,r.targetAllTransform,[0,0],[0,0],r):u||(se=r.fixedPosition),o||(de=ohe(e,ae,b,!f&&a,r)),V){$[0]&&$[1]&&de[0]&&de[1]&&(Math.abs(de[0]*S)>Math.abs(de[1]*_)?de[1]=0:de[0]=0);var ye=!de[0]&&!de[1];if(ye&&(M?ae[0]=Ii(ae[0]*X[0],B)/X[0]:ae[1]=Ii(ae[1]*X[1],B)/X[1]),$[0]&&!$[1]||de[0]&&!de[1]||ye&&M){ae[0]+=de[0];var xe=S*ae[0]*X[0]/D;ae[1]=Nu(fe*ae[0])*Xr(xe/_/X[1])}else if(!$[0]&&$[1]||!de[0]&&de[1]||ye&&!M){ae[1]+=de[1];var Se=_*ae[1]*X[1]*D;ae[0]=Nu(fe*ae[1])*Xr(Se/S/X[0])}}else ae[0]+=de[0],ae[1]+=de[1],de[0]||(ae[0]=Ii(ae[0]*X[0],B)/X[0]),de[1]||(ae[1]=Ii(ae[1]*X[1],B)/X[1]);ae[0]===0&&(ae[0]=Nu(g[0])*S_),ae[1]===0&&(ae[1]=Nu(g[1])*S_),oe=che(ae,[X[0],X[1]]);var Re=[S,_],he=[S*oe[0],_*oe[1]];he=vV(he,r.minScaleSize,r.maxScaleSize,V?D:!1),oe=dC(2,function(it){return Re[it]?he[it]/Re[it]:he[it]}),ae=dC(2,function(it){return oe[it]/X[it]});var Ee=dC(2,function(it){return g[it]?ae[it]/g[it]:ae[it]}),we="scale(".concat(ae.join(", "),")"),Ne="scale(".concat(oe.join(", "),")"),Fe=Sw(r,Ne,we),Xe=!k[0]||!k[1],Be=ofe(e,Xe?Ne:we,r.fixedDirection,se,r.fixedOffset,r,Xe),ot=Le?Be:di(Be,r.prevInverseDist||[0,0]);if(r.prevDist=ae,r.prevInverseDist=Be,oe[0]===g[0]&&oe[1]===g[1]&&ot.every(function(it){return!it})&&!N&&!Le)return!1;var Ke=ji(e,t,Ut({offsetWidth:S,offsetHeight:_,direction:b,scale:oe,dist:ae,delta:Ee,isPinch:!!o},jV(e,Fe,ot,o,t)));return Fn(e,"onScale",Ke),Ke},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var n=Cc(e,t,{});return Fn(e,"onScaleEnd",n),n},dragGroupControlCondition:QN,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,t);if(!n)return!1;var i=Pd(e,"resizable",t);r.moveableScale=e.scale;var o=uh(e,this,"dragControlStart",t,function(p,g){return Ux(e,p,r,g)}),u=function(p){n.setFixedDirection(p),o.forEach(function(g,b){g.setFixedDirection(p),Ux(e,g.moveable,r,i[b])})};r.setFixedDirection=u;var a=Ut(Ut({},n),{targets:e.props.targets,events:o,setFixedDirection:u}),f=Fn(e,"onScaleGroupStart",a);return r.isScale=f!==!1,r.isScale?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){kw(e,"onBeforeScale",function(g){Fn(e,"onBeforeScaleGroup",ji(e,t,Ut(Ut({},g),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=n.dist,o=r.moveableScale;e.scale=[i[0]*o[0],i[1]*o[1]];var u=e.props.keepRatio,a=r.fixedPosition,f=uh(e,this,"dragControl",t,function(g,b){var S=Yt(wu(Z1(e.rotation/180*Math.PI,3),[b.datas.originalX*i[0],b.datas.originalY*i[1],1],3),2),_=S[0],P=S[1];return Ut(Ut({},b),{parentDist:null,parentScale:i,parentKeepRatio:u,dragClient:_a(a,[_,P])})}),p=Ut({targets:e.props.targets,events:f},n);return Fn(e,"onScaleGroup",p),p}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(e,t);var i=uh(e,this,"dragControlEnd",t),o=Cc(e,t,{targets:e.props.targets,events:i});return Fn(e,"onScaleGroupEnd",o),r}},request:function(){var e={},t=0,r=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:e,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return t+=i.deltaWidth,r+=i.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}}};function Wh(e,t){return e.map(function(r,n){return qx(r,t[n],1,2)})}function e6(e,t,r){var n=Ns(e,t),i=Ns(e,r),o=i-n;return o>=0?o:o+2*Math.PI}function khe(e,t){var r=e6(e[0],e[1],e[2]),n=e6(t[0],t[1],t[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}var Mhe={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:FA("warpable"),render:function(e,t){var r=e.props,n=r.resizable,i=r.scalable,o=r.warpable,u=r.zoom;if(n||i||!o)return[];var a=e.state,f=a.pos1,p=a.pos2,g=a.pos3,b=a.pos4,S=Wh(f,p),_=Wh(p,f),P=Wh(f,g),k=Wh(g,f),M=Wh(g,b),D=Wh(b,g),F=Wh(p,b),B=Wh(b,p);return ln([t.createElement("div",{className:ui("line"),key:"middeLine1",style:x0(S,M,u)}),t.createElement("div",{className:ui("line"),key:"middeLine2",style:x0(_,D,u)}),t.createElement("div",{className:ui("line"),key:"middeLine3",style:x0(P,F,u)}),t.createElement("div",{className:ui("line"),key:"middeLine4",style:x0(k,B,u)})],Yt(WV(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return cl(r,ui("direction"))&&cl(r,ui("warpable"))},dragControlStart:function(e,t){var r=t.datas,n=t.inputEvent,i=e.props.target,o=n.target,u=b$(o,r);if(!u||!i)return!1;var a=e.state,f=a.transformOrigin,p=a.is3d,g=a.targetTransform,b=a.targetMatrix,S=a.width,_=a.height,P=a.left,k=a.top;r.datas={},r.targetTransform=g,r.warpTargetMatrix=p?b:Ld(b,3,4),r.targetInverseMatrix=wV(_f(r.warpTargetMatrix,4),3,4),r.direction=u,r.left=P,r.top=k,r.poses=[[0,0],[S,0],[0,_],[S,_]].map(function(F){return di(F,f)}),r.nextPoses=r.poses.map(function(F){var B=Yt(F,2),N=B[0],$=B[1];return wu(r.warpTargetMatrix,[N,$,0,1],4)}),r.startValue=Ro(4),r.prevMatrix=Ro(4),r.absolutePoses=nd(a),r.posIndexes=zV(u),jm(e,t),Ew(e,t,"matrix3d"),a.snapRenderInfo={request:t.isRequest,direction:u};var M=ji(e,t,Ut({set:function(F){r.startValue=F}},Cw(e,t))),D=Fn(e,"onWarpStart",M);return D!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,n=t.isRequest,i=t.distX,o=t.distY,u=r.targetInverseMatrix,a=r.prevMatrix,f=r.isWarp,p=r.startValue,g=r.poses,b=r.posIndexes,S=r.absolutePoses;if(!f)return!1;if(ww(e,t,"matrix3d"),sv(e,"warpable")){var _=b.map(function(Z){return S[Z]});_.length>1&&_.push([(_[0][0]+_[1][0])/2,(_[0][1]+_[1][1])/2]);var P=Pw(e,n,{horizontal:_.map(function(Z){return Z[1]+o}),vertical:_.map(function(Z){return Z[0]+i})}),k=P.horizontal,M=P.vertical;o-=k.offset,i-=M.offset}var D=Tf({datas:r,distX:i,distY:o},!0),F=r.nextPoses.slice();if(b.forEach(function(Z){F[Z]=_a(F[Z],D)}),!Yde.every(function(Z){return khe(Z.map(function(oe){return g[oe]}),Z.map(function(oe){return F[oe]}))}))return!1;var B=bA(g[0],g[2],g[1],g[3],F[0],F[2],F[1],F[3]);if(!B.length)return!1;var N=io(u,B,4),$=FV(r,N,!0),V=io(_f(a,4),$,4);r.prevMatrix=$;var U=io(p,$,4),X=Sw(r,"matrix3d(".concat(U.join(", "),")"),"matrix3d(".concat($.join(", "),")"));return TA(t,X),Fn(e,"onWarp",ji(e,t,Ut({delta:V,matrix:U,dist:$,multiply:io,transform:X},Fu({transform:X},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,n=t.isDrag;return r.isWarp?(r.isWarp=!1,Fn(e,"onWarpEnd",Cc(e,t,{})),n):!1}},Lhe=ui("area-pieces"),A_=ui("area-piece"),I$=ui("avoid"),Rhe=ui("view-dragging");function fC(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,i=r.height;_V(t,I$),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function t6(e){return e.createElement("div",{key:"area_pieces",className:Lhe},e.createElement("div",{className:A_}),e.createElement("div",{className:A_}),e.createElement("div",{className:A_}),e.createElement("div",{className:A_}))}var P$={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,n=r.target,i=r.dragArea,o=r.groupable,u=r.passDragArea,a=e.getState(),f=a.width,p=a.height,g=a.renderPoses,b=u?ui("area","pass"):ui("area");if(o)return[t.createElement("div",{key:"area",ref:gm(e,"areaElement"),className:b}),t6(t)];if(!n||!i)return[];var S=bA([0,0],[f,0],[0,p],[f,p],g[0],g[1],g[2],g[3]),_=S.length?Aw(S,!0):"none";return[t.createElement("div",{key:"area",ref:gm(e,"areaElement"),className:b,style:{top:"0px",left:"0px",width:"".concat(f,"px"),height:"".concat(p,"px"),transformOrigin:"0 0",transform:_}}),t6(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,i=t.clientY,o=t.inputEvent;if(!o)return!1;r.isDragArea=!1;var u=e.areaElement,a=e.state,f=a.moveableClientRect,p=a.renderPoses,g=a.rootMatrix,b=a.is3d,S=f.left,_=f.top,P=Zc(p),k=P.left,M=P.top,D=P.width,F=P.height,B=b?4:3,N=Yt(Gy(g,[n-S,i-_],B),2),$=N[0],V=N[1];$-=k,V-=M;var U=[{left:k,top:M,width:D,height:V-10},{left:k,top:M,width:$-10,height:F},{left:k,top:M+V+10,width:D,height:F-V-10},{left:k+$+10,top:M,width:D-$-10,height:F}],X=[].slice.call(u.nextElementSibling.children);U.forEach(function(Z,oe){X[oe].style.cssText="left: ".concat(Z.left,"px;top: ").concat(Z.top,"px; width: ").concat(Z.width,"px; height: ").concat(Z.height,"px;")}),bV(u,I$),a.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,fC(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||fC(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){fC(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&yV(function(){t.disableNativeEvent=!1})}},Dhe=J1("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,n=r.zoom,i=r.svgOrigin,o=r.groupable,u=e.getState(),a=u.beforeOrigin,f=u.rotation,p=u.svg,g=u.allMatrix,b=u.is3d,S=u.left,_=u.top,P=u.offsetWidth,k=u.offsetHeight,M;if(!o&&p&&i){var D=Yt(jA(i,P,k),2),F=D[0],B=D[1],N=b?4:3,$=es(g,[F,B],N);M=Yx(f,n,di($,[S,_]))}else M=Yx(f,n,a);return[t.createElement("div",{className:ui("control","origin"),style:M,key:"beforeOrigin"})]}});function Ohe(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Nhe={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,n=r.scrollContainer,i=n===void 0?e.getContainer():n,o=r.scrollOptions,u=new pde,a=gf(i,!0);t.datas.dragScroll=u,e.state.dragScroll=u;var f=t.isControl?"controlGesto":"targetGesto",p=t.targets;u.on("scroll",function(g){var b=g.container,S=g.direction,_=ji(e,t,{scrollContainer:b,direction:S}),P=p?"onScrollGroup":"onScroll";p&&(_.targets=p),Fn(e,P,_)}).on("move",function(g){var b=g.offsetX,S=g.offsetY,_=g.inputEvent;e[f].scrollBy(b,S,_.inputEvent,!1)}).on("scrollDrag",function(g){var b=g.next;b(e[f].getCurrentEvent())}),u.dragStart(t,Ut({container:a},o))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var n=e.props,i=n.scrollContainer,o=i===void 0?e.getContainer():i,u=n.scrollThreshold,a=u===void 0?0:u,f=n.scrollThrottleTime,p=f===void 0?0:f,g=n.getScrollPosition,b=g===void 0?Ohe:g,S=n.scrollOptions;return r.drag(t,Ut({container:o,threshold:a,throttleTime:p,getScrollPosition:function(_){return b({scrollContainer:_.container,direction:_.direction})}},S)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,Ut(Ut({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,Ut(Ut({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,Ut(Ut({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,Ut(Ut({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},A$={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Fhe=J1("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=T$(r.padding||{}),i=n.left,o=n.top,u=n.right,a=n.bottom,f=e.getState(),p=f.renderPoses,g=f.pos1,b=f.pos2,S=f.pos3,_=f.pos4,P=[g,b,S,_],k=[];return i>0&&k.push([0,2]),o>0&&k.push([0,1]),u>0&&k.push([1,3]),a>0&&k.push([2,3]),k.map(function(M,D){var F=Yt(M,2),B=F[0],N=F[1],$=P[B],V=P[N],U=p[B],X=p[N],Z=bA([0,0],[100,0],[0,100],[100,100],$,V,U,X);if(Z.length)return t.createElement("div",{key:"padding".concat(D),className:ui("padding"),style:{transform:Aw(Z,!0)}})})}}),r6=["nw","ne","se","sw"];function k_(e,t){var r=e[0]+e[1],n=r>t?t/r:1;return e[0]*=n,e[1]=t-e[1]*n,e}var Bhe=[1,2,5,6],zhe=[0,3,4,7],om=[1,-1,-1,1],sm=[1,1,-1,-1];function qA(e,t,r,n,i,o,u,a){i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=r),a===void 0&&(a=n);var f=[],p=!1,g=e.filter(function(S){return!S.virtual}),b=g.map(function(S){var _=S.horizontal,P=S.vertical,k=S.pos;if(P&&!p&&(p=!0,f.push("/")),p){var M=Math.max(0,P===1?k[1]-o:a-k[1]);return f.push(wd(M,n,t)),M}else{var M=Math.max(0,_===1?k[0]-i:u-k[0]);return f.push(wd(M,r,t)),M}});return{radiusPoses:g,styles:f,raws:b}}function k$(e){for(var t=[0,0],r=[0,0],n=e.length,i=0;i<n;++i){var o=e[i];o.sub&&(o.horizontal&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1,r[0]=i+1),o.vertical&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function M$(e,t,r,n,i,o,u){var a,f,p,g;o===void 0&&(o=[0,0]),u===void 0&&(u=!1);var b=e.indexOf("/"),S=(b>-1?e.slice(0,b):e).length,_=e.slice(0,S),P=e.slice(S+1),k=_.length,M=P.length,D=M>0,F=Yt(_,4),B=F[0],N=B===void 0?"0px":B,$=F[1],V=$===void 0?N:$,U=F[2],X=U===void 0?N:U,Z=F[3],oe=Z===void 0?V:Z,re=Yt(P,4),H=re[0],ae=H===void 0?N:H,se=re[1],de=se===void 0?D?ae:V:se,fe=re[2],Le=fe===void 0?D?ae:X:fe,ye=re[3],xe=ye===void 0?D?de:oe:ye,Se=[N,V,X,oe].map(function(Fe){return no(Fe,t)}),Re=[ae,de,Le,xe].map(function(Fe){return no(Fe,r)}),he=Se.slice(),Ee=Re.slice();a=Yt(k_([he[0],he[1]],t),2),he[0]=a[0],he[1]=a[1],f=Yt(k_([he[3],he[2]],t),2),he[3]=f[0],he[2]=f[1],p=Yt(k_([Ee[0],Ee[3]],r),2),Ee[0]=p[0],Ee[3]=p[1],g=Yt(k_([Ee[1],Ee[2]],r),2),Ee[1]=g[0],Ee[2]=g[1];var we=u?he:he.slice(0,Math.max(o[0],k)),Ne=u?Ee:Ee.slice(0,Math.max(o[1],M));return ln(ln([],Yt(we.map(function(Fe,Xe){var Be=r6[Xe];return{virtual:Xe>=k,horizontal:om[Xe],vertical:0,pos:[n+Fe,i+(sm[Xe]===-1?r:0)],sub:!0,raw:Se[Xe],direction:Be}})),!1),Yt(Ne.map(function(Fe,Xe){var Be=r6[Xe];return{virtual:Xe>=M,horizontal:0,vertical:sm[Xe],pos:[n+(om[Xe]===-1?t:0),i+Fe],sub:!0,raw:Re[Xe],direction:Be}})),!1)}function jhe(e,t,r,n,i){i===void 0&&(i=t.length);var o=k$(e.slice(n)),u=o.horizontalRange,a=o.verticalRange,f=r-n,p=0;if(f===0)p=i;else if(f>0&&f<u[1])p=u[1]-f;else if(f>=a[0])p=a[0]+a[1]-f;else return;e.splice(r,p),t.splice(r,p)}function qhe(e,t,r,n,i,o,u,a,f,p,g){p===void 0&&(p=0),g===void 0&&(g=0);var b=k$(e.slice(r)),S=b.horizontalRange,_=b.verticalRange;if(n>-1)for(var P=om[n]===1?o-p:a-o,k=S[1];k<=n;++k){var M=sm[k]===1?g:f,D=0;if(n===k?D=o:k===0?D=p+P:om[k]===-1&&(D=a-(t[r][0]-p)),e.splice(r+k,0,{horizontal:om[k],vertical:0,pos:[D,M]}),t.splice(r+k,0,[D,M]),k===0)break}else if(i>-1){var F=sm[i]===1?u-g:f-u;if(S[1]===0&&_[1]===0){var B=[p+F,g];e.push({horizontal:om[0],vertical:0,pos:B}),t.push(B)}for(var N=_[0],k=_[1];k<=i;++k){var D=om[k]===1?p:a,M=0;if(i===k?M=u:k===0?M=g+F:sm[k]===1?M=t[r+N][1]:sm[k]===-1&&(M=f-(t[r+N][1]-g)),e.push({horizontal:0,vertical:sm[k],pos:[D,M]}),t.push([D,M]),k===0)break}}}function Vhe(e,t){t===void 0&&(t=e.map(function(i){return i.raw}));var r=e.map(function(i,o){return i.horizontal?t[o]:null}).filter(function(i){return i!=null}),n=e.map(function(i,o){return i.vertical?t[o]:null}).filter(function(i){return i!=null});return{horizontals:r,verticals:n}}var $he=[[0,-1,"n"],[1,0,"e"]],Ghe=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function VA(e,t,r){var n=e.props.clipRelative,i=e.state,o=i.width,u=i.height,a=t,f=a.type,p=a.poses,g=f==="rect",b=f==="circle";if(f==="polygon")return r.map(function(V){return"".concat(wd(V[0],o,n)," ").concat(wd(V[1],u,n))});if(g||f==="inset"){var S=r[1][1],_=r[3][0],P=r[7][0],k=r[5][1];if(g)return[S,_,k,P].map(function(V){return"".concat(V,"px")});var M=[S,o-_,u-k,P].map(function(V,U){return wd(V,U%2?o:u,n)});if(r.length>8){var D=Yt(di(r[4],r[0]),2),F=D[0],B=D[1];M.push.apply(M,ln(["round"],Yt(qA(p.slice(8).map(function(V,U){return Ut(Ut({},V),{pos:r[U]})}),n,F,B,P,S,_,k).styles),!1))}return M}else if(b||f==="ellipse"){var N=r[0],$=wd(Xr(r[1][1]-N[1]),b?Math.sqrt((o*o+u*u)/2):u,n),M=b?[$]:[wd(Xr(r[2][0]-N[0]),o,n),$];return M.push("at",wd(N[0],o,n),wd(N[1],u,n)),M}}function Kx(e,t,r,n){var i=[n,(n+t)/2,t],o=[e,(e+r)/2,r];return Ghe.map(function(u){var a=Yt(u,3),f=a[0],p=a[1],g=a[2],b=i[f+1],S=o[p+1];return{vertical:Xr(p),horizontal:Xr(f),direction:g,pos:[b,S]}})}function L$(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(n){var i=n.pos;t[0]=Math.min(t[0],i[0]),t[1]=Math.max(t[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])}),[Xr(t[1]-t[0]),Xr(r[1]-r[0])]}function n6(e,t,r,n,i){var o,u,a,f,p,g,b,S,_;if(e){var P=i;if(!P){var k=ec(e),M=k("clipPath");P=M!=="none"?M:k("clip")}if(!((!P||P==="none"||P==="auto")&&(P=n,!P))){var D=gV(P),F=D.prefix,B=F===void 0?P:F,N=D.value,$=N===void 0?"":N,V=B==="circle",U=" ";if(B==="polygon"){var X=cm($||"0% 0%, 100% 0%, 100% 100%, 0% 100%");U=",";var Z=X.map(function(cr){var ir=Yt(cr.split(" "),2),br=ir[0],yr=ir[1];return{vertical:1,horizontal:1,pos:[no(br,t),no(yr,r)]}}),oe=Em(Z.map(function(cr){return cr.pos}));return{type:B,clipText:P,poses:Z,splitter:U,left:oe.minX,right:oe.maxX,top:oe.minY,bottom:oe.maxY}}else if(V||B==="ellipse"){var re="",H="",ae=0,se=0,X=cp($);if(V){var de="";o=Yt(X,4),u=o[0],de=u===void 0?"50%":u,a=o[2],re=a===void 0?"50%":a,f=o[3],H=f===void 0?"50%":f,ae=no(de,Math.sqrt((t*t+r*r)/2)),se=ae}else{var fe="",Le="";p=Yt(X,5),g=p[0],fe=g===void 0?"50%":g,b=p[1],Le=b===void 0?"50%":b,S=p[3],re=S===void 0?"50%":S,_=p[4],H=_===void 0?"50%":_,ae=no(fe,t),se=no(Le,r)}var ye=[no(re,t),no(H,r)],Z=ln([{vertical:1,horizontal:1,pos:ye,direction:"nesw"}],Yt($he.slice(0,V?1:2).map(function(br){return{vertical:Xr(br[1]),horizontal:br[0],direction:br[2],sub:!0,pos:[ye[0]+br[0]*ae,ye[1]+br[1]*se]}})),!1);return{type:B,clipText:P,radiusX:ae,radiusY:se,left:ye[0]-ae,top:ye[1]-se,right:ye[0]+ae,bottom:ye[1]+se,poses:Z,splitter:U}}else if(B==="inset"){var X=cp($||"0 0 0 0"),xe=X.indexOf("round"),Se=(xe>-1?X.slice(0,xe):X).length,Re=X.slice(Se+1),he=Yt(X.slice(0,Se),4),Ee=he[0],we=he[1],Ne=we===void 0?Ee:we,Fe=he[2],Xe=Fe===void 0?Ee:Fe,Be=he[3],ot=Be===void 0?Ne:Be,Ke=Yt([Ee,Xe].map(function(br){return no(br,r)}),2),it=Ke[0],ke=Ke[1],Nt=Yt([ot,Ne].map(function(br){return no(br,t)}),2),st=Nt[0],$e=Nt[1],Zt=t-$e,$t=r-ke,Wt=M$(Re,Zt-st,$t-it,st,it),Z=ln(ln([],Yt(Kx(it,Zt,$t,st)),!1),Yt(Wt),!1);return{type:"inset",clipText:P,poses:Z,top:it,left:st,right:Zt,bottom:$t,radius:Re,splitter:U}}else if(B==="rect"){var X=cm($||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));U=",";var ht=Yt(X.map(function(at){var Ae=X1(at).value;return Ae}),4),sr=ht[0],$e=ht[1],ke=ht[2],st=ht[3],Z=Kx(sr,$e,ke,st);return{type:"rect",clipText:P,poses:Z,top:sr,right:$e,bottom:ke,left:st,values:X,splitter:U}}}}}function Uhe(e,t,r,n,i){var o=e[t],u=o.direction,a=o.sub,f=e.map(function(){return[0,0]}),p=u?u.split(""):[];if(n&&t<8){var g=p.filter(function(ae){return ae==="w"||ae==="e"}),b=p.filter(function(ae){return ae==="n"||ae==="s"}),S=g[0],_=b[0];f[t]=r;var P=Yt(L$(e),2),k=P[0],M=P[1],D=k&&M?k/M:0;if(D&&i){var F=(t+4)%8,B=e[F].pos,N=[0,0];u.indexOf("w")>-1?N[0]=-1:u.indexOf("e")>-1&&(N[0]=1),u.indexOf("n")>-1?N[1]=-1:u.indexOf("s")>-1&&(N[1]=1);var $=S$([k,M],r,D,N,!0),V=k+$[0],U=M+$[1],X=B[1],Z=B[1],oe=B[0],re=B[0];N[0]===-1?oe=re-V:N[0]===1?re=oe+V:(oe=oe-V/2,re=re+V/2),N[1]===-1?X=Z-U:(N[1]===1||(X=Z-U/2),Z=X+U);var H=Kx(X,re,Z,oe);e.forEach(function(ae,se){f[se][0]=H[se].pos[0]-ae.pos[0],f[se][1]=H[se].pos[1]-ae.pos[1]})}else e.forEach(function(ae,se){var de=ae.direction;de&&(de.indexOf(S)>-1&&(f[se][0]=r[0]),de.indexOf(_)>-1&&(f[se][1]=r[1]))}),S&&(f[1][0]=r[0]/2,f[5][0]=r[0]/2),_&&(f[3][1]=r[1]/2,f[7][1]=r[1]/2)}else u&&!a?p.forEach(function(ae){var se=ae==="n"||ae==="s";e.forEach(function(de,fe){var Le=de.direction,ye=de.horizontal,xe=de.vertical;!Le||Le.indexOf(ae)===-1||(f[fe]=[se||!ye?0:r[0],!se||!xe?0:r[1]])})}):f[t]=r;return f}function Hhe(e,t){var r=Yt(NV(e,t),2),n=r[0],i=r[1],o=t.datas,u=o.clipPath,a=o.clipIndex,f=u,p=f.type,g=f.poses,b=f.splitter,S=g.map(function(F){return F.pos});if(p==="polygon")S.splice(a,0,[n,i]);else if(p==="inset"){var _=Bhe.indexOf(a),P=zhe.indexOf(a),k=g.length;if(qhe(g,S,8,_,P,n,i,S[4][0],S[4][1],S[0][0],S[0][1]),k===g.length)return}else return;var M=VA(e,u,S),D="".concat(p,"(").concat(M.join(b),")");Fn(e,"onClip",ji(e,t,Ut({clipEventType:"added",clipType:p,poses:S,clipStyles:M,clipStyle:D,distX:0,distY:0},Fu({clipPath:D},t))))}function Whe(e,t){var r=t.datas,n=r.clipPath,i=r.clipIndex,o=n,u=o.type,a=o.poses,f=o.splitter,p=a.map(function(_){return _.pos}),g=p.length;if(u==="polygon")a.splice(i,1),p.splice(i,1);else if(u==="inset"){if(i<8||(jhe(a,p,i,8,g),g===a.length))return}else return;var b=VA(e,n,p),S="".concat(u,"(").concat(b.join(f),")");Fn(e,"onClip",ji(e,t,Ut({clipEventType:"removed",clipType:u,poses:p,clipStyles:b,clipStyle:S,distX:0,distY:0},Fu({clipPath:S},t))))}var Xhe={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,n=r.customClipPath,i=r.defaultClipPath,o=r.clipArea,u=r.zoom,a=r.groupable,f=e.getState(),p=f.target,g=f.width,b=f.height,S=f.allMatrix,_=f.is3d,P=f.left,k=f.top,M=f.pos1,D=f.pos2,F=f.pos3,B=f.pos4,N=f.clipPathState,$=f.snapBoundInfos,V=f.rotation;if(!p||a)return[];var U=n6(p,g,b,i||"inset",N||n);if(!U)return[];var X=_?4:3,Z=U.type,oe=U.poses,re=oe.map(function($e){var Zt=es(S,$e.pos,X);return[Zt[0]-P,Zt[1]-k]}),H=[],ae=[],se=Z==="rect",de=Z==="inset",fe=Z==="polygon";if(se||de||fe){var Le=de?re.slice(0,8):re;ae=Le.map(function($e,Zt){var $t=Zt===0?Le[Le.length-1]:Le[Zt-1],Wt=Ns($t,$e),ht=p$($t,$e);return t.createElement("div",{key:"clipLine".concat(Zt),className:ui("line","clip-line","snap-control"),"data-clip-index":Zt,style:{width:"".concat(ht,"px"),transform:"translate(".concat($t[0],"px, ").concat($t[1],"px) rotate(").concat(Wt,"rad) scaleY(").concat(u,")")}})})}if(H=re.map(function($e,Zt){return t.createElement("div",{key:"clipControl".concat(Zt),className:ui("control","clip-control","snap-control"),"data-clip-index":Zt,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(V,"rad) scale(").concat(u,")")}})}),de&&H.push.apply(H,ln([],Yt(re.slice(8).map(function($e,Zt){return t.createElement("div",{key:"clipRadiusControl".concat(Zt),className:ui("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Zt,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(V,"rad) scale(").concat(u,")")}})})),!1)),Z==="circle"||Z==="ellipse"){var ye=U.left,xe=U.top,Se=U.radiusX,Re=U.radiusY,he=Yt(di(es(S,[ye,xe],X),es(S,[0,0],X)),2),Ee=he[0],we=he[1],Ne="none";if(!o){for(var Fe=Math.max(10,Se/5,Re/5),Xe=[],Be=0;Be<=Fe;++Be){var ot=Math.PI*2/Fe*Be;Xe.push([Se+(Se-u)*Math.cos(ot),Re+(Re-u)*Math.sin(ot)])}Xe.push([Se,-2]),Xe.push([-2,-2]),Xe.push([-2,Re*2+2]),Xe.push([Se*2+2,Re*2+2]),Xe.push([Se*2+2,-2]),Xe.push([Se,-2]),Ne="polygon(".concat(Xe.map(function($e){return"".concat($e[0],"px ").concat($e[1],"px")}).join(", "),")")}H.push(t.createElement("div",{key:"clipEllipse",className:ui("clip-ellipse","snap-control"),style:{width:"".concat(Se*2,"px"),height:"".concat(Re*2,"px"),clipPath:Ne,transform:"translate(".concat(-P+Ee,"px, ").concat(-k+we,"px) ").concat(Aw(S))}}))}if(o){var Ke=Zc(ln([M,D,F,B],Yt(re),!1)),it=Ke.width,ke=Ke.height,Nt=Ke.left,st=Ke.top;if(fe||se||de){var Xe=de?re.slice(0,8):re;H.push(t.createElement("div",{key:"clipArea",className:ui("clip-area","snap-control"),style:{width:"".concat(it,"px"),height:"".concat(ke,"px"),transform:"translate(".concat(Nt,"px, ").concat(st,"px)"),clipPath:"polygon(".concat(Xe.map(function(Zt){return"".concat(Zt[0]-Nt,"px ").concat(Zt[1]-st,"px")}).join(", "),")")}}))}}return $&&["vertical","horizontal"].forEach(function($e){var Zt=$[$e],$t=$e==="horizontal";Zt.isSnap&&ae.push.apply(ae,ln([],Yt(Zt.snap.posInfos.map(function(Wt,ht){var sr=Wt.pos,cr=di(es(S,$t?[0,sr]:[sr,0],X),[P,k]),ir=di(es(S,$t?[g,sr]:[sr,b],X),[P,k]);return h1(t,"",cr,ir,u,"clip".concat($e,"snap").concat(ht),"guideline")})),!1)),Zt.isBound&&ae.push.apply(ae,ln([],Yt(Zt.bounds.map(function(Wt,ht){var sr=Wt.pos,cr=di(es(S,$t?[0,sr]:[sr,0],X),[P,k]),ir=di(es(S,$t?[g,sr]:[sr,b],X),[P,k]);return h1(t,"",cr,ir,u,"clip".concat($e,"bounds").concat(ht),"guideline","bounds","bold")})),!1))}),ln(ln([],Yt(H),!1),Yt(ae),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,n=r.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,Ut(Ut({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,n=e.props,i=n.defaultClipPath,o=n.customClipPath,u=r.target,a=r.width,f=r.height,p=t.inputEvent?t.inputEvent.target:null,g=p&&p.getAttribute("class")||"",b=t.datas,S=n6(u,a,f,i||"inset",o);if(!S)return!1;var _=S.clipText,P=S.type,k=S.poses,M=Fn(e,"onClipStart",ji(e,t,{clipType:P,clipStyle:_,poses:k.map(function(D){return D.pos})}));return M===!1?(b.isClipStart=!1,!1):(b.isControl=g&&g.indexOf("clip-control")>-1,b.isLine=g.indexOf("clip-line")>-1,b.isArea=g.indexOf("clip-area")>-1||g.indexOf("clip-ellipse")>-1,b.clipIndex=p?parseInt(p.getAttribute("data-clip-index"),10):-1,b.clipPath=S,b.isClipStart=!0,r.clipPathState=_,jm(e,t),!0)},dragControl:function(e,t){var r,n,i,o=t.datas,u=t.originalDatas,a=t.isDragTarget;if(!o.isClipStart)return!1;var f=o,p=f.isControl,g=f.isLine,b=f.isArea,S=f.clipIndex,_=f.clipPath;if(!_)return!1;var P=Tm(e.props,"clippable"),k=P.keepRatio,M=0,D=0,F=u.draggable,B=Tf(t);a&&F?(r=Yt(F.prevBeforeDist,2),M=r[0],D=r[1]):(n=Yt(B,2),M=n[0],D=n[1]);var N=[M,D],$=e.state,V=$.width,U=$.height,X=!b&&!p&&!g,Z=_.type,oe=_.poses,re=_.splitter,H=oe.map(function(Nr){return Nr.pos});X&&(M=-M,D=-D);var ae=!p||oe[S].direction==="nesw",se=Z==="inset"||Z==="rect",de=oe.map(function(){return[0,0]});if(p&&!ae){var fe=oe[S],Le=fe.horizontal,ye=fe.vertical,xe=[M*Xr(Le),D*Xr(ye)];de=Uhe(oe,S,xe,se,k)}else ae&&(de=H.map(function(){return[M,D]}));var Se=H.map(function(Nr,tn){return _a(Nr,de[tn])}),Re=ln([],Yt(Se),!1);$.snapBoundInfos=null;var he=_.type==="circle",Ee=_.type==="ellipse";if(he||Ee){var we=Zc(Se),Ne=Xr(we.bottom-we.top),Fe=Xr(Ee?we.right-we.left:Ne),Xe=Se[0][1]+Ne,Be=Se[0][0]-Fe,ot=Se[0][0]+Fe;he&&(Re.push([ot,we.bottom]),de.push([1,0])),Re.push([we.left,Xe]),de.push([0,1]),Re.push([Be,we.bottom]),de.push([1,0])}var Ke=l$((P.clipHorizontalGuidelines||[]).map(function(Nr){return no("".concat(Nr),U)}),(P.clipVerticalGuidelines||[]).map(function(Nr){return no("".concat(Nr),V)}),V,U),it=[],ke=[];if(he||Ee)it=[Re[4][0],Re[2][0]],ke=[Re[1][1],Re[3][1]];else if(se){var Nt=[Re[0],Re[2],Re[4],Re[6]],st=[de[0],de[2],de[4],de[6]];it=Nt.filter(function(Nr,tn){return st[tn][0]}).map(function(Nr){return Nr[0]}),ke=Nt.filter(function(Nr,tn){return st[tn][1]}).map(function(Nr){return Nr[1]})}else it=Re.filter(function(Nr,tn){return de[tn][0]}).map(function(Nr){return Nr[0]}),ke=Re.filter(function(Nr,tn){return de[tn][1]}).map(function(Nr){return Nr[1]});var $e=[0,0],Zt=qN(Ke,P.clipTargetBounds&&{left:0,top:0,right:V,bottom:U},it,ke,5,5),$t=Zt.horizontal,Wt=Zt.vertical,ht=$t.offset,sr=Wt.offset;if($t.isBound&&($e[1]+=ht),Wt.isBound&&($e[0]+=sr),(Ee||he)&&de[0][0]===0&&de[0][1]===0){var we=Zc(Se),cr=we.bottom-we.top,ir=Ee?we.right-we.left:cr,br=Wt.isBound?Xr(sr):Wt.snapIndex===0?-sr:sr,yr=$t.isBound?Xr(ht):$t.snapIndex===0?-ht:ht;ir-=br,cr-=yr,he&&(cr=e$(Wt,$t)>0?cr:ir,ir=cr);var Kt=Re[0];Re[1][1]=Kt[1]-cr,Re[2][0]=Kt[0]+ir,Re[3][1]=Kt[1]+cr,Re[4][0]=Kt[0]-ir}else if(se&&k&&p){var at=Yt(L$(oe),2),Ae=at[0],_e=at[1],je=Ae&&_e?Ae/_e:0,Ge=oe[S],He=Ge.direction||"",Dt=Re[1][1],Xe=Re[5][1],Be=Re[7][0],ot=Re[3][0];Xr(ht)<=Xr(sr)?ht=Nu(ht)*Xr(sr)/je:sr=Nu(sr)*Xr(ht)*je,He.indexOf("w")>-1?Be-=sr:He.indexOf("e")>-1?ot-=sr:(Be+=sr/2,ot-=sr/2),He.indexOf("n")>-1?Dt-=ht:He.indexOf("s")>-1?Xe-=ht:(Dt+=ht/2,Xe-=ht/2);var St=Kx(Dt,ot,Xe,Be);Re.forEach(function(kt,Hr){var kn;kn=Yt(St[Hr].pos,2),kt[0]=kn[0],kt[1]=kn[1]})}else Re.forEach(function(Nr,tn){var Lr=de[tn];Lr[0]&&(Nr[0]-=sr),Lr[1]&&(Nr[1]-=ht)});var yt=VA(e,_,Se),ct="".concat(Z,"(").concat(yt.join(re),")");if($.clipPathState=ct,he||Ee)it=[Re[4][0],Re[2][0]],ke=[Re[1][1],Re[3][1]];else if(se){var Nt=[Re[0],Re[2],Re[4],Re[6]];it=Nt.map(function(tn){return tn[0]}),ke=Nt.map(function(tn){return tn[1]})}else it=Re.map(function(Nr){return Nr[0]}),ke=Re.map(function(Nr){return Nr[1]});if($.snapBoundInfos=qN(Ke,P.clipTargetBounds&&{left:0,top:0,right:V,bottom:U},it,ke,1,1),F){var Jt=$.is3d,Vt=$.allMatrix,xr=Jt?4:3,_r=$e;a&&(_r=[N[0]+$e[0]-B[0],N[1]+$e[1]-B[1]]),F.deltaOffset=io(Vt,[_r[0],_r[1],0,0],xr)}return Fn(e,"onClip",ji(e,t,Ut({clipEventType:"changed",clipType:Z,poses:Se,clipStyle:ct,clipStyles:yt,distX:M,distY:D},Fu((i={},i[Z==="rect"?"clip":"clipPath"]=ct,i),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,n=t.datas,i=t.isDouble,o=n.isLine,u=n.isClipStart,a=n.isControl;return u?(Fn(e,"onClipEnd",Cc(e,t,{})),i&&(a?Whe(e,t):o&&Hhe(e,t)),i||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},Yhe={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":cl(t.inputEvent.target,ui("origin"))},dragControlStart:function(e,t){var r=t.datas;jm(e,t);var n=ji(e,t,{dragStart:Ou.dragStart(e,new qy().dragStart([0,0],t))}),i=Fn(e,"onDragOriginStart",n);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,i===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(e,t){var r=t.datas,n=t.isPinch,i=t.isRequest;if(!r.isDragOrigin)return!1;var o=Yt(Tf(t),2),u=o[0],a=o[1],f=e.state,p=f.width,g=f.height,b=f.offsetMatrix,S=f.targetMatrix,_=f.is3d,P=e.props.originRelative,k=P===void 0?!0:P,M=_?4:3,D=[u,a];if(i){var F=t.distOrigin;(F[0]||F[1])&&(D=F)}var B=_a(r.startOrigin,D),N=_a(r.startTargetOrigin,D),$=di(D,r.prevOrigin),V=eb(b,S,B,M),U=e.getRect(),X=Zc(qm(V,p,g,M)),Z=[U.left-X.left,U.top-X.top];r.prevOrigin=D;var oe=[wd(N[0],p,k),wd(N[1],g,k)].join(" "),re=Ou.drag(e,Q1(t,e.state,Z,!!n)),H=ji(e,t,Ut(Ut({width:p,height:g,origin:B,dist:D,delta:$,transformOrigin:oe,drag:re},Fu({transformOrigin:oe,transform:re.transform},t)),{afterTransform:re.transform}));return Fn(e,"onDragOrigin",H),H},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(Fn(e,"onDragOriginEnd",Cc(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=r.transformOrigin,u=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(a){return"deltaOrigin"in a?(u[0]+=a.deltaOrigin[0],u[1]+=a.deltaOrigin[1]):"origin"in a?(u[0]=a.origin[0]-o[0],u[1]=a.origin[1]-o[1]):("x"in a?n=a.x-r.left:"deltaX"in a&&(n+=a.deltaX),"y"in a?i=a.y-r.top:"deltaY"in a&&(i+=a.deltaY)),{datas:t,distX:n,distY:i,distOrigin:u}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Zhe(e,t,r,n){var i=e.filter(function(f){var p=f.virtual,g=f.horizontal;return g&&!p}).length,o=e.filter(function(f){var p=f.virtual,g=f.vertical;return g&&!p}).length,u=-1;if(t===0&&(i===0?u=0:i===1&&(u=1)),t===2&&(i<=2?u=2:i<=3&&(u=3)),t===3&&(o===0?u=4:o<4&&(u=7)),t===1&&(o<=1?u=5:o<=2&&(u=6)),!(u===-1||!e[u].virtual)){var a=e[u];Khe(e,u),u<4?a.pos[0]=r:a.pos[1]=n}}function Khe(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function Jhe(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function i6(e,t,r,n,i){n===void 0&&(n=[0,0]);var o=[];return!e||e==="0px"?o=[]:o=cp(e),M$(o,t,r,0,0,n,i)}function a6(e,t,r,n,i){var o=e.state,u=o.width,a=o.height,f=qA(i,e.props.roundRelative,u,a),p=f.raws,g=f.styles,b=f.radiusPoses,S=Vhe(b,p),_=S.horizontals,P=S.verticals,k=g.join(" ");o.borderRadiusState=k;var M=ji(e,t,Ut({horizontals:_,verticals:P,borderRadius:k,width:u,height:a,delta:n,dist:r},Fu({borderRadius:k},t)));return Fn(e,"onRound",M),M}function o6(e){var t,r,n=e.getState().style,i=n.borderRadius||"";if(!i&&e.props.groupable){var o=e.moveables[0],u=e.getTargets()[0];u&&(o?.props.target===u?(i=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=i):(i=NA(u).borderRadius,n.borderRadius=i))}return i}var Qhe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?ui("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),n=r.target,i=r.width,o=r.height,u=r.allMatrix,a=r.is3d,f=r.left,p=r.top,g=r.borderRadiusState,b=e.props,S=b.minRoundControls,_=S===void 0?[0,0]:S,P=b.maxRoundControls,k=P===void 0?[4,4]:P,M=b.zoom,D=b.roundPadding,F=D===void 0?0:D,B=b.isDisplayShadowRoundControls,N=b.groupable;if(!n)return null;var $=g||o6(e),V=a?4:3,U=i6($,i,o,_,!0);if(!U)return null;var X=0,Z=0,oe=N?[0,0]:[f,p];return U.map(function(re,H){var ae=re.horizontal,se=re.vertical,de=re.direction||"",fe=ln([],Yt(re.pos),!1);Z+=Math.abs(ae),X+=Math.abs(se),ae&&de.indexOf("n")>-1&&(fe[1]-=F),se&&de.indexOf("w")>-1&&(fe[0]-=F),ae&&de.indexOf("s")>-1&&(fe[1]+=F),se&&de.indexOf("e")>-1&&(fe[0]+=F);var Le=di(es(u,fe,V),oe),ye=B&&B!=="horizontal",xe=re.vertical?X<=k[1]&&(ye||!re.virtual):Z<=k[0]&&(B||!re.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(H),className:ui("control","border-radius",re.vertical?"vertical":"",re.virtual?"virtual":""),"data-radius-index":H,style:{display:xe?"block":"none",transform:"translate(".concat(Le[0],"px, ").concat(Le[1],"px) scale(").concat(M,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,n=t.datas,i=r.target,o=i.getAttribute("class")||"",u=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,f=u?parseInt(i.getAttribute("data-radius-index"),10):-1,p=-1;if(a){var g=i.getAttribute("data-line-key")||"";g&&(p=parseInt(g.replace(/render-line-/g,""),10),isNaN(p)&&(p=-1))}if(!u&&!a)return!1;var b=ji(e,t,{}),S=Fn(e,"onRoundStart",b);if(S===!1)return!1;n.lineIndex=p,n.controlIndex=f,n.isControl=u,n.isLine=a,jm(e,t);var _=e.props,P=_.roundRelative,k=_.minRoundControls,M=k===void 0?[0,0]:k,D=e.state,F=D.width,B=D.height;n.isRound=!0,n.prevDist=[0,0];var N=o6(e),$=i6(N||"",F,B,M,!0)||[];return n.controlPoses=$,D.borderRadiusState=qA($,P,F,B).styles.join(" "),b},dragControl:function(e,t){var r=t.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,o=Yt(Tf(t),2),u=o[0],a=o[1],f=[u,a],p=di(f,r.prevDist),g=e.props.maxRoundControls,b=g===void 0?[4,4]:g,S=e.state,_=S.width,P=S.height,k=n[i],M=k.vertical,D=k.horizontal,F=n.map(function(N){var $=N.horizontal,V=N.vertical,U=[$*D*f[0],V*M*f[1]];if($){if(b[0]===1)return U;if(b[0]<4&&$!==D)return U}else{if(b[1]===0)return U[1]=V*D*f[0]/_*P,U;if(M){if(b[1]===1)return U;if(b[1]<4&&V!==M)return U}}return[0,0]});F[i]=f;var B=n.map(function(N,$){return Ut(Ut({},N),{pos:_a(N.pos,F[$])})});return i<4?B.slice(0,i+1).forEach(function(N){N.virtual=!1}):B.slice(4,i+1).forEach(function(N){N.virtual=!1}),r.prevDist=[u,a],a6(e,t,f,p,B)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var n=t.datas,i=t.isDouble;if(!n.isRound)return!1;var o=n.isControl,u=n.controlIndex,a=n.isLine,f=n.lineIndex,p=n.controlPoses,g=p.filter(function(D){var F=D.virtual;return F}).length,b=e.props.roundClickable,S=b===void 0?!0:b;if(i&&S){if(o&&(S===!0||S==="control"))Jhe(p,u);else if(a&&(S===!0||S==="line")){var _=Yt(NV(e,t),2),P=_[0],k=_[1];Zhe(p,f,P,k)}g!==p.filter(function(D){var F=D.virtual;return F}).length&&a6(e,t,[0,0],[0,0],p)}var M=Cc(e,t,{});return Fn(e,"onRoundEnd",M),r.borderRadiusState="",M},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=Pd(e,"roundable",t),u=Ut({targets:e.props.targets,events:o.map(function(a,f){return Ut(Ut({},a),{target:i[f],moveable:n[f],currentTarget:n[f]})})},r);return Fn(e,"onRoundGroupStart",u),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=Pd(e,"roundable",t),u=Ut({targets:e.props.targets,events:o.map(function(a,f){return Ut(Ut(Ut({},a),{target:i[f],moveable:n[f],currentTarget:n[f]}),Fu({borderRadius:r.borderRadius},a))})},r);return Fn(e,"onRoundGroup",u),u},dragGroupControlEnd:function(e,t){var r=e.moveables,n=e.props.targets,i=Pd(e,"roundable",t);kw(e,"onRound",function(a){var f=Ut({targets:e.props.targets,events:i.map(function(p,g){return Ut(Ut(Ut({},p),{target:n[g],moveable:r[g],currentTarget:r[g]}),Fu({borderRadius:a.borderRadius},p))})},a);Fn(e,"onRoundGroup",f)});var o=this.dragControlEnd(e,t);if(!o)return!1;var u=Ut({targets:e.props.targets,events:i.map(function(a,f){var p;return Ut(Ut({},a),{target:n[f],moveable:r[f],currentTarget:r[f],lastEvent:(p=a.datas)===null||p===void 0?void 0:p.lastEvent})})},o);return Fn(e,"onRoundGroupEnd",u),u},unset:function(e){e.state.borderRadiusState=""}};function epe(e,t){var r=t?4:3,n=Ro(r),i="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return e===i||e==="matrix(1,0,0,1,0,0)"}var R$={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,i=r.targetMatrix,o=r.inlineTransform,u=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(CV(i,!0),")"),a=!o||o==="none"?u:o;t.datas.startTransforms=epe(a,n)?[]:cp(a)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return ji(e,t,{setTransform:function(r){t.datas.startTransforms=Ml(r)?r:cp(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return ji(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),Fn(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),Fn(e,"onBeforeRender",ji(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),Fn(e,"onBeforeRenderEnd",ji(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=Pd(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(u,a){var f=i[a];return r.setTransform(f,u),r.resetStyle(u),r.fillDragStartParams(f,u)});Fn(e,"onBeforeRenderGroupStart",ji(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:o}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=Pd(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(u,a){var f=i[a];return r.resetStyle(u),r.fillDragParams(f,u)});Fn(e,"onBeforeRenderGroup",ji(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:o}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),Fn(e,"onBeforeRenderGroupEnd",ji(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},D$={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){Fn(e,"onRenderStart",ji(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){Fn(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){Fn(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){Fn(e,"onRenderGroupStart",ji(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=Pd(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(u,a){var f=i[a];return r.fillDragParams(f,u)});Fn(e,"onRenderGroup",ji(e,t,Ut(Ut({isPinch:!!t.isPinch,targets:e.props.targets,transform:C_(t),transformObject:{}},Fu(E_(t))),{events:o})))},dragGroupEnd:function(e,t){var r=this,n=Pd(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(u,a){var f=i[a];return r.fillDragEndParams(f,u)});Fn(e,"onRenderGroupEnd",ji(e,t,Ut({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:o,transformObject:{},transform:C_(t)},Fu(E_(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return jy(Gx(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),ji(e,t,Ut({isPinch:!!t.isPinch,transformObject:r,transform:C_(t)},Fu(E_(t))))},fillDragEndParams:function(e,t){var r={};return jy(Gx(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),ji(e,t,Ut({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:C_(t)},Fu(E_(t))))}};function X0(e,t,r,n,i,o,u){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=i==="Start",f=i==="End",p=i==="After",g=e.state.target,b=o.isRequest,S=n.indexOf("Control")>-1;if(!g||a&&S&&!b&&e.areaElement===o.inputEvent.target)return!1;var _=ln([],Yt(t),!1);if(b){var P=o.requestAble;_.some(function(H){return H.name===P})||_.push.apply(_,ln([],Yt(e.props.ables.filter(function(H){return H.name===P})),!1))}if(!_.length||_.every(function(H){return H.dragRelation}))return!1;var k=o.inputEvent,M;f&&k&&(M=document.elementFromPoint(o.clientX,o.clientY)||k.target);var D=!1,F=function(){var H;D=!0,(H=o.stop)===null||H===void 0||H.call(o)},B=a&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());B&&e.updateRect(i,!0,!1);var N=o.datas,$=S?"controlGesto":"targetGesto",V=e[$],U=function(H,ae,se){if(!(ae in H)||V!==e[$])return!1;var de=H.name,fe=N[de]||(N[de]={});if(a&&(fe.isEventStart=!se||!H[se]||H[se](e,o)),!fe.isEventStart)return!1;var Le=H[ae](e,Ut(Ut({},o),{stop:F,datas:fe,originalDatas:N,inputTarget:M}));return e._emitter.off(),a&&Le===!1&&(fe.isEventStart=!1),Le};B&&_.forEach(function(H){H.unset&&H.unset(e)}),U(R$,"drag".concat(n).concat(i));var X=0,Z=0;r.forEach(function(H){if(D)return!1;var ae="".concat(H).concat(n).concat(i),se="".concat(H).concat(n,"Condition");i===""&&!b&&She(e.state,o);var de=_.filter(function(ye){return ye[ae]});de=de.filter(function(ye,xe){return ye.name&&de.indexOf(ye)===xe});var fe=de.filter(function(ye){return U(ye,ae,se)}),Le=fe.length;D&&++X,Le&&++Z,!D&&a&&de.length&&!Le&&(X+=de.filter(function(ye){var xe=ye.name,Se=N[xe];return Se.isEventStart?ye.dragRelation!=="strong":!1}).length?1:0)}),(!p||Z)&&U(D$,"drag".concat(n).concat(i));var oe=V!==e[$]||X===r.length;if((f||D||oe)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(H){H.state.gestos={}}),_.forEach(function(H){H.unset&&H.unset(e)})),a&&!oe&&!b&&Z&&e.props.preventDefault&&o?.preventDefault(),e.isUnmounted||oe)return!1;if(!a&&Z&&!u||f){var re=e.props.flushSync||d$;re(function(){e.updateRect(f?i:"",!0,!1),e.forceUpdate()})}return!a&&!f&&!p&&Z&&!u&&X0(e,t,r,n,i+"After",o),!0}function $A(e,t){return function(r,n){var i;n===void 0&&(n=r.inputEvent.target);var o=n,u=e.areaElement,a=e._dragTarget;return!a||!t&&(!((i=e.controlGesto)===null||i===void 0)&&i.isFlag())?!1:o===a||a.contains(o)||o===u||!e.isMoveableElement(o)&&!e.controlBox.contains(o)||cl(o,"moveable-area")||cl(o,"moveable-padding")||cl(o,"moveable-edgeDraggable")}}function O$(e,t,r){var n=e.controlBox,i=[],o=e.props,u=o.dragArea,a=e.state.target,f=o.dragTarget;i.push(n),(!u||f)&&i.push(t),!u&&f&&a&&t!==a&&o.dragTargetSelf&&i.push(a);var p=$A(e);return F$(e,i,"targetAbles",r,{dragStart:p,pinchStart:p})}function N$(e,t){var r=e.controlBox,n=[];n.push(r);var i=$A(e,!0),o=function(u,a){if(a===void 0&&(a=u.inputEvent.target),a===r)return!0;var f=i(u,a);return!f};return F$(e,n,"controlAbles",t,{dragStart:o,pinchStart:o})}function F$(e,t,r,n,i){i===void 0&&(i={});var o=r==="targetAbles",u=e.props,a=u.pinchOutside,f=u.pinchThreshold,p=u.preventClickEventOnDrag,g=u.preventClickDefault,b=u.checkInput,S=u.dragFocusedInput,_=u.preventDefault,P=_===void 0?!0:_,k=u.preventRightClick,M=k===void 0?!0:k,D=u.preventWheelClick,F=D===void 0?!0:D,B=u.dragContainer,N=gf(B,!0),$={preventDefault:P,preventRightClick:M,preventWheelClick:F,container:N||ap(e.getControlBoxElement()),pinchThreshold:f,pinchOutside:a,preventClickEventOnDrag:o?p:!1,preventClickEventOnDragStart:o?g:!1,preventClickEventByCondition:o?null:function(X){return e.controlBox.contains(X.target)},checkInput:o?b:!1,dragFocusedInput:S},V=new Tde(t,$),U=n==="Control";return["drag","pinch"].forEach(function(X){["Start","","End"].forEach(function(Z){V.on("".concat(X).concat(Z),function(oe){var re,H=oe.eventType,ae=X==="drag"&&oe.isPinch;if(i[H]&&!i[H](oe)){oe.stop();return}if(!ae){var se=X==="drag"?[X]:["drag",X],de=ln([],Yt(e[r]),!1),fe=X0(e,de,se,n,Z,oe);fe?(e.props.stopPropagation||Z==="Start"&&U)&&((re=oe?.inputEvent)===null||re===void 0||re.stopPropagation()):oe.stop()}})})}),V}var tpe=(function(){function e(t,r,n){var i=this;this.target=t,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(o){var u=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(f){f[u](a,{inputEvent:o})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e})();function rpe(e,t,r,n){var i;r===void 0&&(r=t);var o=VV(e,t),u=o.matrixes,a=o.is3d,f=o.targetMatrix,p=o.transformOrigin,g=o.targetOrigin,b=o.offsetContainer,S=o.hasFixed,_=o.zoom,P=gfe(b,r),k=P.matrixes,M=P.is3d,D=P.offsetContainer,F=P.zoom,B=n,N=4,$=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,V=f,U=Ro(N),X=Ro(N),Z=Ro(N),oe=Ro(N),re=u.length,H=k.map(function(xe){return Ut(Ut({},xe),{matrix:xe.matrix?ln([],Yt(xe.matrix),!1):void 0})}).reverse();u.reverse(),!a&&B&&(V=Ld(V,3,4),W3(u)),!M&&B&&W3(H),H.forEach(function(xe){X=io(X,xe.matrix,N)});var ae=r||xp(e),se=((i=H[0])===null||i===void 0?void 0:i.target)||p1(ae,ae,!0).offsetParent,de=H.slice(1).reduce(function(xe,Se){return io(xe,Se.matrix,N)},Ro(N));u.forEach(function(xe,Se){if(re-2===Se&&(Z=U.slice()),re-1===Se&&(oe=U.slice()),!xe.matrix){var Re=u[Se+1],he=bhe(xe,Re,se,N,io(de,U,N));xe.matrix=Cm(he,N)}U=io(U,xe.matrix,N)});var fe=!$&&a;V||(V=Ro(fe?4:3));var Le=Aw($&&V.length===16?Ld(V,4,3):V,fe),ye=X;return X=wV(X,N,N),{hasZoom:_!==1||F!==1,hasFixed:S,matrixes:u,rootMatrix:X,originalRootMatrix:ye,beforeMatrix:Z,offsetMatrix:oe,allMatrix:U,targetMatrix:V,targetTransform:Le,inlineTransform:e.style.transform,transformOrigin:p,targetOrigin:g,is3d:B,offsetContainer:b,offsetRootContainer:D}}function npe(e,t,r,n){r===void 0&&(r=t);var i=0,o=0,u=0,a={},f=m$(e);if(e&&(i=f.offsetWidth,o=f.offsetHeight),e){var p=rpe(e,t,r,n),g=Iy(p.allMatrix,p.transformOrigin,i,o);a=Ut(Ut({},p),g);var b=Iy(p.allMatrix,[50,50],100,100);u=g$([b.pos1,b.pos2],b.direction)}var S=4;return Ut(Ut(Ut({hasZoom:!1,width:i,height:o,rotation:u},f),{originalRootMatrix:Ro(S),rootMatrix:Ro(S),beforeMatrix:Ro(S),offsetMatrix:Ro(S),allMatrix:Ro(S),targetMatrix:Ro(S),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function K3(e,t,r,n,i,o){o===void 0&&(o=[]);var u=1,a=[0,0],f=I_(),p=I_(),g=I_(),b=I_(),S=[0,0],_={},P=npe(t,r,i,!0);if(t){var k=ec(t);o.forEach(function(H){_[H]=k(H)});var M=P.is3d?4:3,D=Iy(P.offsetMatrix,_a(P.transformOrigin,SV(P.targetMatrix,M)),P.width,P.height);u=D.direction,a=_a(D.origin,[D.left-P.left,D.top-P.top]),b=W0(P.offsetRootContainer);var F=p1(n,n,!0).offsetParent||P.offsetRootContainer;if(P.hasZoom){var B=Iy(io(P.originalRootMatrix,P.allMatrix),P.transformOrigin,P.width,P.height),N=Iy(P.originalRootMatrix,Xx(ec(F)("transformOrigin")).map(function(H){return parseFloat(H)}),F.offsetWidth,F.offsetHeight);if(f=cC(B,b),g=cC(N,b,F,!0),e){var $=B.left,V=B.top;p=cC({left:$,top:V,bottom:V,right:V},b)}}else{f=W0(t),g=mfe(F),e&&(p=W0(e));var U=g.left,X=g.top,Z=g.clientLeft,oe=g.clientTop,re=[f.left-U,f.top-X];S=di(Gy(P.rootMatrix,re,4),[Z+P.left,oe+P.top])}}return Ut({targetClientRect:f,containerClientRect:g,moveableClientRect:p,rootContainerClientRect:b,beforeDirection:u,beforeOrigin:a,originalBeforeOrigin:a,target:t,style:_,offsetDelta:S},P)}function s6(e){var t=e.pos1,r=e.pos2,n=e.pos3,i=e.pos4;if(!t||!r||!n||!i)return null;var o=Em([t,r,n,i]),u=[o.minX,o.minY],a=di(e.origin,u);return t=di(t,u),r=di(r,u),n=di(n,u),i=di(i,u),Ut(Ut({},e),{left:e.left,top:e.top,posDelta:u,pos1:t,pos2:r,pos3:n,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var Uy=(function(e){K1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=Ut({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},K3(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new xA,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}jce(r._observerId),r._observerId=yV(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return t.prototype.render=function(){var r=this.props,n=this.getState(),i=r.parentPosition,o=r.className,u=r.target,a=r.zoom,f=r.cspNonce,p=r.translateZ,g=r.cssStyled,b=r.groupable,S=r.linePadding,_=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var P=Yt(i||[0,0],2),k=P[0],M=P[1],D=n.left,F=n.top,B=n.target,N=n.direction,$=n.hasFixed,V=n.offsetDelta,U=r.targets,X=this.isDragging(),Z={};this.getEnabledAbles().forEach(function(de){Z["data-able-".concat(de.name.toLowerCase())]=!0});var oe=this._getAbleClassName(),re=U&&U.length&&(B||b)||u||!this._hasFirstTarget&&this.state.isPersisted,H=this.controlBox||this.props.firstRenderState||this.props.persistData,ae=[D-k,F-M];!b&&r.useAccuratePosition&&(ae[0]+=V[0],ae[1]+=V[1]);var se={position:$?"fixed":"absolute",display:re?"block":"none",visibility:H?"visible":"hidden",transform:"translate3d(".concat(ae[0],"px, ").concat(ae[1],"px, ").concat(p,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return S&&(se["--moveable-line-padding"]=S),_&&(se["--moveable-control-padding"]=_),ee.createElement(g,Ut({cspNonce:f,ref:gm(this,"controlBox"),className:"".concat(ui("control-box",N===-1?"reverse":"",X?"dragging":"")," ").concat(oe," ").concat(o)},Z,{onClick:this._onPreventClick,style:se}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,i=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),gy(this,!1),gy(this,!0);var o=this.events;for(var u in o){var a=o[u];a&&a.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var n=this.props.ables||[];return Sc(n,function(i){return i.name===r})},t.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,i=r.wrapperMoveable,o=r.container;return o||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(CA)>-1},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=this.targetGesto,o=this.controlGesto;return i&&$A(this)({inputEvent:r},n)?i.isFlag()||i.triggerDragStart(r):o&&this.isMoveableElement(n)&&(o.isFlag()||o.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var n=this.state,i=n.target,o=n.pos1,u=n.pos2,a=n.pos3,f=n.pos4,p=n.targetClientRect;if(!i)return 0;var g;if(yA(r)){var b=r.getBoundingClientRect();g={left:b.left,top:b.top,width:b.width,height:b.height}}else g=Ut({width:0,height:0},r);var S=g.left,_=g.top,P=g.width,k=g.height,M=kN([o,u,f,a],p),D=_de(M,[[S,_],[S+P,_],[S+P,_+k],[S,_+k]]),F=IV(M);return!D||!F?0:Math.min(100,D/F*100)},t.prototype.isInside=function(r,n){var i=this.state,o=i.target,u=i.pos1,a=i.pos2,f=i.pos3,p=i.pos4,g=i.targetClientRect;return o?D3([r,n],kN([u,a,p,f],g)):!1},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0);var o=this.props,u=!o.parentPosition&&!o.wrapperMoveable;u&&Vy(!0);var a=o.parentMoveable,f=this.state,p=f.target||o.target,g=this.getContainer(),b=a?a._rootContainer:this._rootContainer,S=K3(this.controlBox,p,g,g,b||g,this._getRequestStyles());if(!p&&this._hasFirstTarget&&o.persistData){var _=s6(o.persistData);for(var P in _)S[P]=_[P]}u&&Vy(),this.updateState(S,a?!1:i)},t.prototype.isDragging=function(r){var n,i,o=this.targetGesto,u=this.controlGesto;if(o?.isFlag()){if(!r)return!0;var a=o.getEventData();return!!(!((n=a[r])===null||n===void 0)&&n.isEventStart)}if(u?.isFlag()){if(!r)return!0;var a=u.getEventData();return!!(!((i=a[r])===null||i===void 0)&&i.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,n=nd(this.state),i=Yt(n,4),o=i[0],u=i[1],a=i[2],f=i[3],p=Zc(n),g=r.width,b=r.height,S=p.width,_=p.height,P=p.left,k=p.top,M=[r.left,r.top],D=_a(M,r.origin),F=_a(M,r.beforeOrigin),B=r.transformOrigin;return{width:S,height:_,left:P,top:k,pos1:o,pos2:u,pos3:a,pos4:f,offsetWidth:g,offsetHeight:b,beforeOrigin:F,origin:D,transformOrigin:B,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;n?.isIdle()===!1&&X3(this,!1),n?.stop()}if(!r||r==="control"){var n=this.controlGesto;n?.isIdle()===!1&&X3(this,!0),n?.stop()}},t.prototype.getRotation=function(){var r=this.state,n=r.pos1,i=r.pos2,o=r.direction;return The(n,i,o)},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this,u=o.props,a=u.parentMoveable||u.wrapperMoveable||o,f=a.props.ables,p=u.groupable,g=Sc(f,function(D){return D.name===r});if(this.isDragging()||!g||!g.request)return{request:function(){return this},requestEnd:function(){return this}};var b=g.request(o),S=i||n.isInstant,_=b.isControl?"controlAbles":"targetAbles",P="".concat(p?"Group":"").concat(b.isControl?"Control":""),k=ln([],Yt(a[_]),!1),M={request:function(D){return X0(o,k,["drag"],P,"",Ut(Ut({},b.request(D)),{requestAble:r,isRequest:!0}),S),M},requestEnd:function(){return X0(o,k,["drag"],P,"End",Ut(Ut({},b.requestEnd()),{requestAble:r,isRequest:!0}),S),M}};return X0(o,k,["drag"],P,"Start",Ut(Ut({},b.requestStart(n)),{requestAble:r,isRequest:!0}),S),S?M.request(n).requestEnd():M},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,i=n.padding,o=r.originalBeforeOrigin,u=r.transformOrigin,a=r.allMatrix,f=r.is3d,p=r.pos1,g=r.pos2,b=r.pos3,S=r.pos4,_=r.left,P=r.top,k=r.isPersisted,M=n.zoom||1;if(!i&&M<=1){r.renderPoses=[p,g,b,S],r.renderLines=[[p,g],[g,S],[S,b],[b,p]];return}var D=T$(i||{}),F=D.left,B=D.top,N=D.bottom,$=D.right,V=f?4:3,U=[];k?U=u:this.controlBox&&n.groupable?U=o:U=_a(o,[_,P]);var X=Vx(V,Cm(U.map(function(se){return-se}),V),a,Cm(u,V)),Z=jc(X,p,[-F,-B],V),oe=jc(X,g,[$,-B],V),re=jc(X,b,[-F,N],V),H=jc(X,S,[$,N],V);r.renderPoses=[Z,oe,re,H],r.renderLines=[[Z,oe],[oe,H],[H,re],[re,Z]];{var ae=M/2;r.renderLines=[[jc(X,p,[-F-ae,-B],V),jc(X,g,[$+ae,-B],V)],[jc(X,g,[$,-B-ae],V),jc(X,S,[$,N+ae],V)],[jc(X,S,[$+ae,N],V),jc(X,b,[-F-ae,N],V)],[jc(X,b,[-F,N+ae],V),jc(X,p,[-F,-B-ae],V)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,i=r.container,o=r.parentMoveable,u=this.state,a=u.target,f=u.container;if(!(!a&&!n)){this.updateAbles();var p=!Y3(a,n),g=p||!Y3(f,i);if(g){var b=i||this.controlBox;b&&this.unsetAbles(),this.updateState({target:n,container:i}),!o&&b&&this.updateRect("End",!1,!1),this._isPropTargetChanged=p}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,n){var i=this.props;if(this._emitter.trigger(r,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(r,n,!0);var o=i[r];return o&&o(n)},t.prototype.useCSS=function(r,n){var i=this.props.customStyledMap,o=r+n;return i[o]||(i[o]=kV(r,n)),i[o]},t.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=n.persistData,u=n.firstRenderState;if(u&&!i)return u;if(!this._hasFirstTarget&&o){var a=s6(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},t.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var i=this.props,o=i.triggerAblesSimultaneously,u=this.getEnabledAbles(r),a="drag".concat(n,"Start"),f="pinch".concat(n,"Start"),p="drag".concat(n,"ControlStart"),g=P_(u,[a,f],o),b=P_(u,[p],o);this.enabledAbles=u,this.targetAbles=g,this.controlAbles=b},t.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var o in r)i[o]=r[o]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},t.prototype.renderAbles=function(){var r=this,n=this.props,i=n.triggerAblesSimultaneously,o={createElement:ee.createElement};return this.renderState={},whe(w$(P_(this.getEnabledAbles(),["render"],i).map(function(u){var a=u.render;return a(r,o)||[]})).filter(function(u){return u}),function(u){var a=u.key;return a}).map(function(u){return u[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,u,a=(u=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&u!==void 0?u:[];return ln(ln([],Yt(n),!1),Yt(a),!1)},ln([],Yt(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,i=this._dragTarget,o=!r&&this.targetGesto||this._isTargetChanged(!0);o&&(gy(this,!1),this.updateState({gestos:{}})),n||gy(this,!0),i&&r&&!this.targetGesto&&(this.targetGesto=O$(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=N$(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=gf(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,n=r,i=n.zoom,o=n.hideDefaultLines,u=n.hideChildMoveableDefaultLines,a=n.parentMoveable;if(o||a&&u)return[];var f=this.getState(),p={createElement:ee.createElement};return f.renderLines.map(function(g,b){return h1(p,"",g[0],g[1],i,"render-line-".concat(b))})},t.prototype._isTargetChanged=function(r){var n=this.props,i=n.dragTarget||n.target,o=this._prevOriginalDragTarget,u=this._prevDragArea,a=n.dragArea,f=!a&&o!==i,p=(r||a)&&u!==a;return f||p||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,o=this.events,u=iv(o);if(this._isTargetChanged())for(var a in o){var f=o[a];f&&f.destroy(),o[a]=null}if(i){var p=this.enabledAbles;u.forEach(function(g){var b=P_(p,[g]),S=b.length>0,_=o[g];if(!S){_&&(_.destroy(),o[g]=null);return}_||(_=new tpe(i,r,g),o[g]=_),_.setAbles(b)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=gf(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=gf(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(ln(ln([],Yt(this._getAbleViewClassNames()),!1),[this.isDragging()?Rhe:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,i=x$(r.filter(Boolean),function(p){return p}).map(function(p){var g=Yt(p,1),b=g[0];return b}),o=this._viewClassNames,u=_A(o,i),a=u.removed,f=u.added;a.forEach(function(p){_V(n,o[p])}),f.forEach(function(p){bV(n,i[p])}),this._viewClassNames=i},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var i=this.getEnabledAbles(),o=this.targetGesto,u=this.controlGesto,a=o?.isFlag()?o.getEventData():{},f=u?.isFlag()?u.getEventData():{};return i.map(function(p){var g,b,S,_=p.name,P=((g=p.className)===null||g===void 0?void 0:g.call(p,n))||"";return(!((b=a[_])===null||b===void 0)&&b.isEventStart||!((S=f[_])===null||S===void 0)&&S.isEventStart)&&(P+=" ".concat(ui("".concat(_).concat(r,"-dragging")))),P.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var n,i=this.props,o=i.target,u=ap(this.getControlBoxElement());if(!u.ResizeObserver||!o||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===o&&this._reiszeObserver)){var a=new u.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},t.prototype._updateMutationObserver=function(r){var n=this,i,o=this.props,u=o.target,a=ap(this.getControlBoxElement());if(!a.MutationObserver||!u||!o.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===u&&this._mutationObserver)){var f=new a.MutationObserver(function(p){var g,b;try{for(var S=Fde(p),_=S.next();!_.done;_=S.next()){var P=_.value;P.type==="attributes"&&P.attributeName==="style"&&n.checkUpdateRect()}}catch(k){g={error:k}}finally{try{_&&!_.done&&(b=S.return)&&b.call(S)}finally{if(g)throw g.error}}});f.observe(u,{attributes:!0}),this._mutationObserver=f}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:d$,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t})(ee.PureComponent),GA={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,n=e.props,i=n.targets||[],o=e.getState(),u=o.left,a=o.top,f=o.isPersisted,p=n.zoom||1,g=e.renderGroupRects,b=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];f?i=b.map(function(){return null}):b=[];var S=yy(e,"parentPosition",[u,a],function(P){return P.join(",")}),_=yy(e,"requestStyles",e.getRequestChildStyles(),function(P){return P.join(",")});return e.moveables=e.moveables.slice(0,i.length),ln(ln([],Yt(i.map(function(P,k){return t.createElement(Uy,{key:"moveable"+k,ref:hV(e,"moveables",k),target:P,origin:!1,requestStyles:_,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[u,a],persistData:b[k],zoom:p})})),!1),Yt(w$(g.map(function(P,k){var M=P.pos1,D=P.pos2,F=P.pos3,B=P.pos4,N=[M,D,F,B];return[[0,1],[1,3],[3,2],[2,0]].map(function($,V){var U=Yt($,2),X=U[0],Z=U[1];return h1(t,"",di(N[X],S),di(N[Z],S),p,"group-rect-".concat(k,"-").concat(V))})}))),!1)}},ipe=J1("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,i=t.inputTarget,o=e.isMoveableElement(i),u=!o&&e.controlBox.contains(i);if(!(!n||!i||t.isDrag||e.isMoveableElement(i)||u)){var a=r.contains(i);Fn(e,"onClick",ji(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:e.props.target,containsTarget:a}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(!(!r||!n||t.isDrag||e.isMoveableElement(n)||t.datas.inputTarget===n)){var i=e.props.targets,o=i.indexOf(n),u=o>-1,a=!1;o===-1&&(o=gh(i,function(f){return f.contains(n)}),a=o>-1),Fn(e,"onClickGroup",ji(e,t,{isDouble:t.isDouble,targets:i,inputTarget:n,targetIndex:o,isTarget:u,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function Mg(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),Ut(Ut({},e),{datas:t})}var ape=J1("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?UV(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&cl(i,ui("direction"))&&cl(i,ui("edge"))&&cl(i,ui("edgeDraggable"))},dragStart:function(e,t){return Ou.dragStart(e,Mg(t))},drag:function(e,t){return Ou.drag(e,Mg(t))},dragEnd:function(e,t){return Ou.dragEnd(e,Mg(t))},dragGroupCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&cl(i,ui("direction"))&&cl(i,ui("line"))},dragGroupStart:function(e,t){return Ou.dragGroupStart(e,Mg(t))},dragGroup:function(e,t){return Ou.dragGroup(e,Mg(t))},dragGroupEnd:function(e,t){return Ou.dragGroupEnd(e,Mg(t))},unset:function(e){return Ou.unset(e)}}),B$={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},ope=[R$,A$,uhe,Phe,Ou,ape,G3,Ahe,Mhe,Ufe,Nhe,Fhe,Dhe,Yhe,Xhe,Qhe,GA,B$,ipe,P$,D$];function l6(e,t){var r=Yt(e,3),n=r[0],i=r[1],o=r[2];return(n*t[0]+i*t[1]+o)/Math.sqrt(n*n+i*i)}function M_(e,t){var r=Yt(e,2),n=r[0],i=r[1];return-n*t[0]-i*t[1]}function u6(e,t){return Math.max.apply(Math,ln([],Yt(e.map(function(r){var n=Yt(r,4),i=n[0],o=n[1],u=n[2],a=n[3];return Math.max(i[t],o[t],u[t],a[t])})),!1))}function c6(e,t){return Math.min.apply(Math,ln([],Yt(e.map(function(r){var n=Yt(r,4),i=n[0],o=n[1],u=n[2],a=n[3];return Math.min(i[t],o[t],u[t],a[t])})),!1))}function spe(e,t){var r,n,i,o=[0,0],u=[0,0],a=[0,0],f=[0,0],p=0,g=0;if(!e.length)return{pos1:o,pos2:u,pos3:a,pos4:f,minX:0,minY:0,maxX:0,maxY:0,width:p,height:g,rotation:t};var b=Ii(t,ju);if(b%90){var S=b/180*Math.PI,_=Math.tan(S),P=-1/_,k=[j3,RN],M=[[0,0],[0,0]],D=[j3,RN],F=[[0,0],[0,0]];e.forEach(function(Ee){Ee.forEach(function(we){var Ne=l6([-_,1,0],we),Fe=l6([-P,1,0],we);k[0]>Ne&&(M[0]=we,k[0]=Ne),k[1]<Ne&&(M[1]=we,k[1]=Ne),D[0]>Fe&&(F[0]=we,D[0]=Fe),D[1]<Fe&&(F[1]=we,D[1]=Fe)})});var B=Yt(M,2),N=B[0],$=B[1],V=Yt(F,2),U=V[0],X=V[1],Z=[-_,1,M_([-_,1],N)],oe=[-_,1,M_([-_,1],$)],re=[-P,1,M_([-P,1],U)],H=[-P,1,M_([-P,1],X)];r=Yt([[Z,re],[Z,H],[oe,re],[oe,H]].map(function(Ee){var we=Yt(Ee,2),Ne=we[0],Fe=we[1];return wA(Ne,Fe)[0]}),4),o=r[0],u=r[1],a=r[2],f=r[3],p=D[1]-D[0],g=k[1]-k[0]}else{var ae=c6(e,0),se=c6(e,1),de=u6(e,0),fe=u6(e,1);if(o=[ae,se],u=[de,se],a=[ae,fe],f=[de,fe],p=de-ae,g=fe-se,b%180){var Le=[a,o,f,u];n=Yt(Le,4),o=n[0],u=n[1],a=n[2],f=n[3],p=fe-se,g=de-ae}}if(b%360>180){var Le=[f,a,u,o];i=Yt(Le,4),o=i[0],u=i[1],a=i[2],f=i[3]}var ye=Em([o,u,a,f]),xe=ye.minX,Se=ye.minY,Re=ye.maxX,he=ye.maxY;return{pos1:o,pos2:u,pos3:a,pos4:f,width:p,height:g,minX:xe,minY:Se,maxX:Re,maxY:he,rotation:t}}function z$(e,t){var r=t.map(function(n){if(Ml(n)){var i=z$(e,n),o=i.length;return o>1?i:o===1?i[0]:null}else{var u=Sc(e,function(a){var f=a.manager;return f.props.target===n});return u?(u.finded=!0,u.manager):null}}).filter(Boolean);return r.length===1&&Ml(r[0])?r[0]:r}var lpe=(function(e){K1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new TV,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){var o;i===void 0&&(i=!0);var u=this.state;if(!this.controlBox||u.isPersisted)return;Vy(!0),this.moveables.forEach(function(Be){Be.updateRect(r,!1,!1)});var a=this.props,f=this.moveables,p=u.target||a.target,g=f.map(function(Be){return{finded:!1,manager:Be}}),b=this.props.targetGroups||[],S=z$(g,b),_=a.useDefaultGroupRotate;S.push.apply(S,ln([],Yt(g.filter(function(Be){var ot=Be.finded;return!ot}).map(function(Be){var ot=Be.manager;return ot})),!1));var P=[],k=!n||r!==""&&a.updateGroup,M=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var D=(o=a.persistData)===null||o===void 0?void 0:o.rotation;D!=null&&(M=D)}function F(Be,ot,Ke){var it=Be.map(function(Wt){if(Ml(Wt)){var ht=F(Wt,ot),sr=[ht.pos1,ht.pos2,ht.pos3,ht.pos4];return P.push(ht),{poses:sr,rotation:ht.rotation}}else return{poses:nd(Wt.state),rotation:Wt.getRotation()}}),ke=it.map(function(Wt){var ht=Wt.rotation;return ht}),Nt=0,st=ke[0],$e=ke.every(function(Wt){return Math.abs(st-Wt)<.1});k?Nt=!_&&$e?st:M:Nt=!_&&!Ke&&$e?st:ot;var Zt=it.map(function(Wt){var ht=Wt.poses;return ht}),$t=spe(Zt,Nt);return $t}var B=F(S,this.rotation,!0);k&&(this.rotation=B.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=b,this.renderGroupRects=P;var N=this.transformOrigin,$=this.rotation,V=this.scale,U=B.width,X=B.height,Z=B.minX,oe=B.minY,re=Ihe([[0,0],[U,0],[0,X],[U,X]],jA(N,U,X),this.rotation/180*Math.PI),H=Em(re.result),ae=H.minX,se=H.minY,de=" rotate(".concat($,"deg)")+" scale(".concat(Nu(V[0]),", ").concat(Nu(V[1]),")"),fe="translate(".concat(-ae,"px, ").concat(-se,"px)").concat(de);this.controlBox.style.transform="translate3d(".concat(Z,"px, ").concat(oe,"px, ").concat(this.props.translateZ||0,")"),p.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(N,";")+"width:".concat(U,"px;height:").concat(X,"px;")+"transform: ".concat(fe),u.width=U,u.height=X;var Le=this.getContainer(),ye=K3(this.controlBox,p,this.controlBox,this.getContainer(),this._rootContainer||Le,[]),xe=[ye.left,ye.top],Se=Yt(nd(ye),4),Re=Se[0],he=Se[1],Ee=Se[2],we=Se[3],Ne=Em([Re,he,Ee,we]),Fe=[Ne.minX,Ne.minY],Xe=Nu(V[0]*V[1]);ye.pos1=di(Re,Fe),ye.pos2=di(he,Fe),ye.pos3=di(Ee,Fe),ye.pos4=di(we,Fe),ye.left=Z-ye.left+Fe[0],ye.top=oe-ye.top+Fe[1],ye.origin=di(_a(xe,ye.origin),Fe),ye.beforeOrigin=di(_a(xe,ye.beforeOrigin),Fe),ye.originalBeforeOrigin=_a(xe,ye.originalBeforeOrigin),ye.transformOrigin=di(_a(xe,ye.transformOrigin),Fe),p.style.transform="translate(".concat(-ae-Fe[0],"px, ").concat(-se-Fe[1],"px)")+de,Vy(),this.updateState(Ut(Ut({},ye),{posDelta:Fe,direction:Xe,beforeDirection:Xe}),i)},t.prototype.getRect=function(){return Ut(Ut({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,n,i){if(i||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,u,a=(u=(o=i.requestChildStyle)===null||o===void 0?void 0:o.call(i))!==null&&u!==void 0?u:[];return ln(ln([],Yt(n),!1),Yt(a),!1)},[]);return r},t.prototype.getMoveables=function(){return ln([],Yt(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,ln(ln([],Yt(this.props.ables),!1),[GA],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=gf(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,n=this.props,i=this._prevDragTarget,o=n.dragTarget||this.areaElement,u=n.targets,a=this.differ.update(u),f=a.added,p=a.changed,g=a.removed,b=f.length||g.length;(b||this._prevOriginalDragTarget!==this._originalDragTarget)&&(gy(this,!1),gy(this,!0),this.updateState({gestos:{}})),i!==o&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=O$(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=N$(this,"GroupControl")));var S=!Y3(r.container,n.container);S&&(r.container=n.container),(S||b||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||p.length||u.length&&!E$(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!b},t.prototype._updateObserver=function(){},t.defaultProps=Ut(Ut({},Uy.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t})(Uy),upe=(function(e){K1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,n,i=this.props,o=i.cspNonce,u=i.cssStyled,a=i.persistData,f=i.targets||[],p=f.length,g=this.isUnmounted||!p,b=(n=a?.children)!==null&&n!==void 0?n:[];return g&&!p&&b.length?f=b.map(function(){return null}):g||(b=[]),ee.createElement(u,{cspNonce:o,ref:gm(this,"controlBox"),className:ui("control-box")},f.map(function(S,_){var P,k,M=(k=(P=i.individualGroupableProps)===null||P===void 0?void 0:P.call(i,S,_))!==null&&k!==void 0?k:{};return ee.createElement(Uy,Ut({key:"moveable"+_,ref:hV(r,"moveables",_)},i,M,{target:S,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:b[_]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0),Vy(!0),this.moveables.forEach(function(o){o.updateRect(r,n,i)}),Vy()},t.prototype.getRect=function(){return Ut(Ut({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this.moveables.map(function(f){return f.request(r,Ut(Ut({},n),{isInstant:!1}),!1)}),u=i||n.isInstant,a={request:function(f){return o.forEach(function(p){return p.request(f)}),this},requestEnd:function(){return o.forEach(function(f){return f.requestEnd()}),this}};return u?a.request(n).requestEnd():a},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=n,o=Sc(this.moveables,function(u){var a=u.getTargets()[0],f=u.getControlBoxElement(),p=u.getDragElement();return!a||!p?!1:p===i||p.contains(i)||p!==a&&a===i||a.contains(i)||f===i||f.contains(i)});return o&&o.dragStart(r,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return ln([],Yt(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t})(Uy);function j$(e,t){var r=[];return e.forEach(function(n){if(n){if(wh(n)){t[n]&&r.push.apply(r,ln([],Yt(t[n]),!1));return}Ml(n)?r.push.apply(r,ln([],Yt(j$(n,t)),!1)):r.push(n)}}),r}function q$(e,t){var r=[];return e.forEach(function(n){if(n){if(wh(n)){t[n]&&r.push.apply(r,ln([],Yt(t[n]),!1));return}Ml(n)?r.push(q$(n,t)):r.push(n)}}),r}function V$(e,t){return e.length!==t.length||e.some(function(r,n){var i=t[n];return!r&&!i?!1:r!=i?Ml(r)&&Ml(i)?V$(r,i):!0:!1})}var cpe=(function(e){K1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new TV,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(o){var u=o.css;u&&u.forEach(function(a){r[a]=!0})});var i=iv(r).join(`
`);this.defaultStyled=kV("div",Pce(CA,Xde+i))},t.getTotalAbles=function(){return ln([A$,GA,B$,P$],Yt(this.defaultAbles),!1)},t.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,o=i.ables,u=i.props,a=Ode(i,["ables","props"]),f=Yt(this._updateRefs(!0),2),p=f[0],g=f[1],b=j$(p,g),S=b.length>1,_=n.getTotalAbles(),P=ln(ln([],Yt(_),!1),Yt(o||[]),!1),k=Ut(Ut(Ut({},a),u||{}),{ables:P,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=b;var M=null,D=this.moveable,F=a.persistData;if(F?.children&&(S=!0),a.individualGroupable)return ee.createElement(upe,Ut({key:"individual-group",ref:gm(this,"moveable")},k,{target:null,targets:b}));if(S){var B=q$(p,g);if(D&&!D.props.groupable&&!D.props.individualGroupable){var N=D.props.target;N&&b.indexOf(N)>-1&&(M=Ut({},D.state))}return ee.createElement(lpe,Ut({key:"group",ref:gm(this,"moveable")},k,(r=a.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:b,targetGroups:B,firstRenderState:M}))}else{var $=b[0];if(D&&(D.props.groupable||D.props.individualGroupable)){var V=D.moveables||[],U=Sc(V,function(X){return X.props.target===$});U&&(M=Ut({},U.state))}return ee.createElement(Uy,Ut({key:"single",ref:gm(this,"moveable")},k,{target:$,firstRenderState:M}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(i){n=i})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var n=this.refTargets,i=zA(this.props.target||this.props.targets),o=typeof document<"u",u=V$(n,i),a=this.selectorMap,f={};return this.refTargets.forEach(function p(g){if(wh(g)){var b=a[g];b?f[g]=a[g]:o&&(u=!0,f[g]=[].slice.call(document.querySelectorAll(g)))}else Ml(g)&&g.forEach(p)}),this._tmpRefTargets=i,this._tmpSelectorMap=f,[i,f,!r&&u]},t.prototype._checkChangeTargets=function(){var r,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),u=o.added,a=o.removed,f=u.length||a.length;f&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var p=Yt(this._updateRefs(),3),g=p[0],b=p[1],S=p[2];this.refTargets=g,this.selectorMap=b,S&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,Nde([Ace(Kde)],t.prototype,"moveable",void 0),t})(ee.PureComponent),dpe=(function(e){K1(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=ope,t})(cpe),_u=63710088e-1,$$={centimeters:_u*100,centimetres:_u*100,degrees:360/(2*Math.PI),feet:_u*3.28084,inches:_u*39.37,kilometers:_u/1e3,kilometres:_u/1e3,meters:_u,metres:_u,miles:_u/1609.344,millimeters:_u*1e3,millimetres:_u*1e3,nauticalmiles:_u/1852,radians:1,yards:_u*1.0936};function Im(e,t,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function id(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d6(e[0])||!d6(e[1]))throw new Error("coordinates must contain numbers");return Im({type:"Point",coordinates:e},t,r)}function Mw(e,t,r={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return Im({type:"Polygon",coordinates:e},t,r)}function Wl(e,t,r={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Im({type:"LineString",coordinates:e},t,r)}function yh(e,t={}){const r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function fpe(e,t,r={}){return Im({type:"MultiLineString",coordinates:e},t,r)}function G$(e,t="kilometers"){const r=$$[t];if(!r)throw new Error(t+" units is invalid");return e*r}function UA(e,t="kilometers"){const r=$$[t];if(!r)throw new Error(t+" units is invalid");return e/r}function hpe(e,t){return Jx(UA(e,t))}function Jx(e){return e%(2*Math.PI)*180/Math.PI}function Ed(e){return e%360*Math.PI/180}function d6(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function HA(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function hp(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function U$(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function m1(e){return e.type==="Feature"?e.geometry:e}function H$(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function g1(e,t,r={}){if(r.final===!0)return ppe(e,t);const n=hp(e),i=hp(t),o=Ed(n[0]),u=Ed(i[0]),a=Ed(n[1]),f=Ed(i[1]),p=Math.sin(u-o)*Math.cos(f),g=Math.cos(a)*Math.sin(f)-Math.sin(a)*Math.cos(f)*Math.cos(u-o);return Jx(Math.atan2(p,g))}function ppe(e,t){let r=g1(t,e);return r=(r+180)%360,r}function Hy(e,t,r,n={}){const i=hp(e),o=Ed(i[0]),u=Ed(i[1]),a=Ed(r),f=UA(t,n.units),p=Math.asin(Math.sin(u)*Math.cos(f)+Math.cos(u)*Math.sin(f)*Math.cos(a)),g=o+Math.atan2(Math.sin(a)*Math.sin(f)*Math.cos(u),Math.cos(f)-Math.sin(u)*Math.sin(p)),b=Jx(g),S=Jx(p);return id([b,S],n.properties)}function Lw(e,t,r={}){var n=hp(e),i=hp(t),o=Ed(i[1]-n[1]),u=Ed(i[0]-n[0]),a=Ed(n[1]),f=Ed(i[1]),p=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(a)*Math.cos(f);return G$(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),r.units)}function mpe(e,t,r={}){const i=m1(e).coordinates;let o=0;for(let u=0;u<i.length&&!(t>=o&&u===i.length-1);u++)if(o>=t){const a=t-o;if(a){const f=g1(i[u],i[u-1])-180;return Hy(i[u],a,f,r)}else return id(i[u])}else o+=Lw(i[u],i[u+1],r);return id(i[i.length-1])}function lv(e,t,r){if(e!==null)for(var n,i,o,u,a,f,p,g=0,b=0,S,_=e.type,P=_==="FeatureCollection",k=_==="Feature",M=P?e.features.length:1,D=0;D<M;D++){p=P?e.features[D].geometry:k?e.geometry:e,S=p?p.type==="GeometryCollection":!1,a=S?p.geometries.length:1;for(var F=0;F<a;F++){var B=0,N=0;if(u=S?p.geometries[F]:p,u!==null){f=u.coordinates;var $=u.type;switch(g=r&&($==="Polygon"||$==="MultiPolygon")?1:0,$){case null:break;case"Point":if(t(f,b,D,B,N)===!1)return!1;b++,B++;break;case"LineString":case"MultiPoint":for(n=0;n<f.length;n++){if(t(f[n],b,D,B,N)===!1)return!1;b++,$==="MultiPoint"&&B++}$==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(n=0;n<f.length;n++){for(i=0;i<f[n].length-g;i++){if(t(f[n][i],b,D,B,N)===!1)return!1;b++}$==="MultiLineString"&&B++,$==="Polygon"&&N++}$==="Polygon"&&B++;break;case"MultiPolygon":for(n=0;n<f.length;n++){for(N=0,i=0;i<f[n].length;i++){for(o=0;o<f[n][i].length-g;o++){if(t(f[n][i][o],b,D,B,N)===!1)return!1;b++}N++}B++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(lv(u.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f6(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Rw(e,t){var r,n,i,o,u,a,f,p,g,b,S=0,_=e.type==="FeatureCollection",P=e.type==="Feature",k=_?e.features.length:1;for(r=0;r<k;r++){for(a=_?e.features[r].geometry:P?e.geometry:e,p=_?e.features[r].properties:P?e.properties:{},g=_?e.features[r].bbox:P?e.bbox:void 0,b=_?e.features[r].id:P?e.id:void 0,f=a?a.type==="GeometryCollection":!1,u=f?a.geometries.length:1,i=0;i<u;i++){if(o=f?a.geometries[i]:a,o===null){if(t(null,S,p,g,b)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,S,p,g,b)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],S,p,g,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function gpe(e,t,r){var n=r;return Rw(e,function(i,o,u,a,f){n=t(n,i,o,u,a,f)}),n}function WA(e,t){Rw(e,function(r,n,i,o,u){var a=r===null?null:r.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Im(r,i,{bbox:o,id:u}),n,0)===!1?!1:void 0}var f;switch(a){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var p=0;p<r.coordinates.length;p++){var g=r.coordinates[p],b={type:f,coordinates:g};if(t(Im(b,i),n,p)===!1)return!1}})}function ype(e,t){WA(e,function(r,n,i){var o=0;if(r.geometry){var u=r.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var a,f=0,p=0,g=0;if(lv(r,function(b,S,_,P,k){if(a===void 0||n>f||P>p||k>g){a=b,f=n,p=P,g=k,o=0;return}var M=Wl([a,b],r.properties);if(t(M,n,i,k,o)===!1)return!1;o++,a=b})===!1)return!1}}})}function vpe(e,t,r){var n=r,i=!1;return ype(e,function(o,u,a,f,p){i===!1&&r===void 0?n=o:n=t(n,o,u,a,f,p),i=!0}),n}function bpe(e){return gpe(e,(t,r)=>t+_pe(r),0)}function _pe(e){let t=0,r;switch(e.type){case"Polygon":return h6(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=h6(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function h6(e){let t=0;if(e&&e.length>0){t+=Math.abs(p6(e[0]));for(let r=1;r<e.length;r++)t-=Math.abs(p6(e[r]))}return t}var xpe=_u*_u/2,hC=Math.PI/180;function p6(e){const t=e.length-1;if(t<=2)return 0;let r=0,n=0;for(;n<t;){const i=e[n],o=e[n+1===t?0:n+1],u=e[n+2>=t?(n+2)%t:n+2],a=i[0]*hC,f=o[1]*hC,p=u[0]*hC;r+=(p-a)*Math.sin(f),n++}return r*xpe}function Ec(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const r=[1/0,1/0,-1/0,-1/0];return lv(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}function m6(e,t={}){const r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const u=[r,n];return Mw([[u,[i,n],[i,o],[r,o],u]],t.properties,{bbox:e,id:t.id})}const ch=11102230246251565e-32,vu=134217729,wpe=(3+8*ch)*ch;function pC(e,t,r,n,i){let o,u,a,f,p=t[0],g=n[0],b=0,S=0;g>p==g>-p?(o=p,p=t[++b]):(o=g,g=n[++S]);let _=0;if(b<e&&S<r)for(g>p==g>-p?(u=p+o,a=o-(u-p),p=t[++b]):(u=g+o,a=o-(u-g),g=n[++S]),o=u,a!==0&&(i[_++]=a);b<e&&S<r;)g>p==g>-p?(u=o+p,f=u-o,a=o-(u-f)+(p-f),p=t[++b]):(u=o+g,f=u-o,a=o-(u-f)+(g-f),g=n[++S]),o=u,a!==0&&(i[_++]=a);for(;b<e;)u=o+p,f=u-o,a=o-(u-f)+(p-f),p=t[++b],o=u,a!==0&&(i[_++]=a);for(;S<r;)u=o+g,f=u-o,a=o-(u-f)+(g-f),g=n[++S],o=u,a!==0&&(i[_++]=a);return(o!==0||_===0)&&(i[_++]=o),_}function Spe(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function tb(e){return new Float64Array(e)}const Cpe=(3+16*ch)*ch,Epe=(2+12*ch)*ch,Tpe=(9+64*ch)*ch*ch,Lg=tb(4),g6=tb(8),y6=tb(12),v6=tb(16),Ru=tb(4);function Ipe(e,t,r,n,i,o,u){let a,f,p,g,b,S,_,P,k,M,D,F,B,N,$,V,U,X;const Z=e-i,oe=r-i,re=t-o,H=n-o;N=Z*H,S=vu*Z,_=S-(S-Z),P=Z-_,S=vu*H,k=S-(S-H),M=H-k,$=P*M-(N-_*k-P*k-_*M),V=re*oe,S=vu*re,_=S-(S-re),P=re-_,S=vu*oe,k=S-(S-oe),M=oe-k,U=P*M-(V-_*k-P*k-_*M),D=$-U,b=$-D,Lg[0]=$-(D+b)+(b-U),F=N+D,b=F-N,B=N-(F-b)+(D-b),D=B-V,b=B-D,Lg[1]=B-(D+b)+(b-V),X=F+D,b=X-F,Lg[2]=F-(X-b)+(D-b),Lg[3]=X;let ae=Spe(4,Lg),se=Epe*u;if(ae>=se||-ae>=se||(b=e-Z,a=e-(Z+b)+(b-i),b=r-oe,p=r-(oe+b)+(b-i),b=t-re,f=t-(re+b)+(b-o),b=n-H,g=n-(H+b)+(b-o),a===0&&f===0&&p===0&&g===0)||(se=Tpe*u+wpe*Math.abs(ae),ae+=Z*g+H*a-(re*p+oe*f),ae>=se||-ae>=se))return ae;N=a*H,S=vu*a,_=S-(S-a),P=a-_,S=vu*H,k=S-(S-H),M=H-k,$=P*M-(N-_*k-P*k-_*M),V=f*oe,S=vu*f,_=S-(S-f),P=f-_,S=vu*oe,k=S-(S-oe),M=oe-k,U=P*M-(V-_*k-P*k-_*M),D=$-U,b=$-D,Ru[0]=$-(D+b)+(b-U),F=N+D,b=F-N,B=N-(F-b)+(D-b),D=B-V,b=B-D,Ru[1]=B-(D+b)+(b-V),X=F+D,b=X-F,Ru[2]=F-(X-b)+(D-b),Ru[3]=X;const de=pC(4,Lg,4,Ru,g6);N=Z*g,S=vu*Z,_=S-(S-Z),P=Z-_,S=vu*g,k=S-(S-g),M=g-k,$=P*M-(N-_*k-P*k-_*M),V=re*p,S=vu*re,_=S-(S-re),P=re-_,S=vu*p,k=S-(S-p),M=p-k,U=P*M-(V-_*k-P*k-_*M),D=$-U,b=$-D,Ru[0]=$-(D+b)+(b-U),F=N+D,b=F-N,B=N-(F-b)+(D-b),D=B-V,b=B-D,Ru[1]=B-(D+b)+(b-V),X=F+D,b=X-F,Ru[2]=F-(X-b)+(D-b),Ru[3]=X;const fe=pC(de,g6,4,Ru,y6);N=a*g,S=vu*a,_=S-(S-a),P=a-_,S=vu*g,k=S-(S-g),M=g-k,$=P*M-(N-_*k-P*k-_*M),V=f*p,S=vu*f,_=S-(S-f),P=f-_,S=vu*p,k=S-(S-p),M=p-k,U=P*M-(V-_*k-P*k-_*M),D=$-U,b=$-D,Ru[0]=$-(D+b)+(b-U),F=N+D,b=F-N,B=N-(F-b)+(D-b),D=B-V,b=B-D,Ru[1]=B-(D+b)+(b-V),X=F+D,b=X-F,Ru[2]=F-(X-b)+(D-b),Ru[3]=X;const Le=pC(fe,y6,4,Ru,v6);return v6[Le-1]}function Ppe(e,t,r,n,i,o){const u=(t-o)*(r-i),a=(e-i)*(n-o),f=u-a,p=Math.abs(u+a);return Math.abs(f)>=Cpe*p?f:-Ipe(e,t,r,n,i,o,p)}function Ape(e,t){var r,n,i=0,o,u,a,f,p,g,b,S=e[0],_=e[1],P=t.length;for(r=0;r<P;r++){n=0;var k=t[r],M=k.length-1;if(g=k[0],g[0]!==k[M][0]&&g[1]!==k[M][1])throw new Error("First and last coordinates in a ring must be the same");for(u=g[0]-S,a=g[1]-_,n;n<M;n++){if(b=k[n+1],f=b[0]-S,p=b[1]-_,a===0&&p===0){if(f<=0&&u>=0||u<=0&&f>=0)return 0}else if(p>=0&&a<=0||p<=0&&a>=0){if(o=Ppe(u,f,a,p,0,0),o===0)return 0;(o>0&&p>0&&a<=0||o<0&&p<=0&&a>0)&&i++}g=b,a=p,u=f}}return i%2!==0}function Dw(e,t,r={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const n=hp(e),i=m1(t),o=i.type,u=t.bbox;let a=i.coordinates;if(u&&kpe(n,u)===!1)return!1;o==="Polygon"&&(a=[a]);let f=!1;for(var p=0;p<a.length;++p){const g=Ape(n,a[p]);if(g===0)return!r.ignoreBoundary;g&&(f=!0)}return f}function kpe(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function y1(e,t,r={}){const n=hp(e),i=U$(t);for(let o=0;o<i.length-1;o++){let u=!1;if(r.ignoreEndVertices&&(o===0&&(u="start"),o===i.length-2&&(u="end"),o===0&&o+1===i.length-1&&(u="both")),Mpe(i[o],i[o+1],n,u,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function Mpe(e,t,r,n,i){const o=r[0],u=r[1],a=e[0],f=e[1],p=t[0],g=t[1],b=r[0]-a,S=r[1]-f,_=p-a,P=g-f,k=b*P-S*_;if(i!==null){if(Math.abs(k)>i)return!1}else if(k!==0)return!1;if(Math.abs(_)===Math.abs(P)&&Math.abs(_)===0)return n?!1:r[0]===e[0]&&r[1]===e[1];if(n){if(n==="start")return Math.abs(_)>=Math.abs(P)?_>0?a<o&&o<=p:p<=o&&o<a:P>0?f<u&&u<=g:g<=u&&u<f;if(n==="end")return Math.abs(_)>=Math.abs(P)?_>0?a<=o&&o<p:p<o&&o<=a:P>0?f<=u&&u<g:g<u&&u<=f;if(n==="both")return Math.abs(_)>=Math.abs(P)?_>0?a<o&&o<p:p<o&&o<a:P>0?f<u&&u<g:g<u&&u<f}else return Math.abs(_)>=Math.abs(P)?_>0?a<=o&&o<=p:p<=o&&o<=a:P>0?f<=u&&u<=g:g<=u&&u<=f;return!1}function Lpe(e,t){const r=m1(e),n=m1(t),i=r.type,o=n.type,u=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return XA(u,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return Dpe(r,n);case"MultiPoint":return Ope(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return y1(n,r,{ignoreEndVertices:!0});case"LineString":return Bpe(r,n);case"MultiPoint":return Npe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return Dw(n,r,{ignoreBoundary:!0});case"LineString":return zpe(r,n);case"Polygon":return W$(r,n);case"MultiPoint":return Fpe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Polygon":return Rpe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Rpe(e,t){return e.coordinates.some(r=>W$({type:"Polygon",coordinates:r},t))}function Dpe(e,t){let r,n=!1;for(r=0;r<e.coordinates.length;r++)if(XA(e.coordinates[r],t.coordinates)){n=!0;break}return n}function Ope(e,t){for(const r of t.coordinates){let n=!1;for(const i of e.coordinates)if(XA(r,i)){n=!0;break}if(!n)return!1}return!0}function Npe(e,t){let r=!1;for(const n of t.coordinates)if(y1(n,e,{ignoreEndVertices:!0})&&(r=!0),!y1(n,e))return!1;return!!r}function Fpe(e,t){for(const r of t.coordinates)if(!Dw(r,e,{ignoreBoundary:!0}))return!1;return!0}function Bpe(e,t){let r=!1;for(const n of t.coordinates)if(y1({type:"Point",coordinates:n},e,{ignoreEndVertices:!0})&&(r=!0),!y1({type:"Point",coordinates:n},e,{ignoreEndVertices:!1}))return!1;return r}function zpe(e,t){let r=!1,n=0;const i=Ec(e),o=Ec(t);if(!X$(i,o))return!1;for(n;n<t.coordinates.length-1;n++){const u=jpe(t.coordinates[n],t.coordinates[n+1]);if(Dw({type:"Point",coordinates:u},e,{ignoreBoundary:!0})){r=!0;break}}return r}function W$(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;const r=Ec(e),n=Ec(t);if(!X$(r,n))return!1;const i=m1(t).coordinates;for(const o of i)for(const u of o)if(!Dw(u,e))return!1;return!0}function X$(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function XA(e,t){return e[0]===t[0]&&e[1]===t[1]}function jpe(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function qpe(e,t={}){const r=Ec(e),n=(r[0]+r[2])/2,i=(r[1]+r[3])/2;return id([n,i],t.properties,t)}var fx={exports:{}},Vpe=fx.exports,b6;function $pe(){return b6||(b6=1,(function(e,t){(function(r,n){e.exports=n()})(Vpe,(function(){function r(E,m){(m==null||m>E.length)&&(m=E.length);for(var v=0,T=Array(m);v<m;v++)T[v]=E[v];return T}function n(E,m,v){return m=g(m),(function(T,q){if(q&&(typeof q=="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne})(T)})(E,S()?Reflect.construct(m,v||[],g(E).constructor):m.apply(E,v))}function i(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")}function o(E,m,v){if(S())return Reflect.construct.apply(null,arguments);var T=[null];T.push.apply(T,m);var q=new(E.bind.apply(E,T));return v&&_(q,v.prototype),q}function u(E,m){for(var v=0;v<m.length;v++){var T=m[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,M(T.key),T)}}function a(E,m,v){return m&&u(E.prototype,m),v&&u(E,v),Object.defineProperty(E,"prototype",{writable:!1}),E}function f(E,m){var v=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!v){if(Array.isArray(E)||(v=D(E))||m){v&&(E=v);var T=0,q=function(){};return{s:q,n:function(){return T>=E.length?{done:!0}:{done:!1,value:E[T++]}},e:function(tt){throw tt},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,ve=!0,De=!1;return{s:function(){v=v.call(E)},n:function(){var tt=v.next();return ve=tt.done,tt},e:function(tt){De=!0,ne=tt},f:function(){try{ve||v.return==null||v.return()}finally{if(De)throw ne}}}}function p(){return p=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(E,m,v){var T=(function(ne,ve){for(;!{}.hasOwnProperty.call(ne,ve)&&(ne=g(ne))!==null;);return ne})(E,m);if(T){var q=Object.getOwnPropertyDescriptor(T,m);return q.get?q.get.call(arguments.length<3?E:v):q.value}},p.apply(null,arguments)}function g(E){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},g(E)}function b(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),m&&_(E,m)}function S(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(S=function(){return!!E})()}function _(E,m){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,T){return v.__proto__=T,v},_(E,m)}function P(E,m,v,T){var q=p(g(1&T?E.prototype:E),m,v);return 2&T&&typeof q=="function"?function(ne){return q.apply(v,ne)}:q}function k(E){return(function(m){if(Array.isArray(m))return r(m)})(E)||(function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)})(E)||D(E)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function M(E){var m=(function(v,T){if(typeof v!="object"||!v)return v;var q=v[Symbol.toPrimitive];if(q!==void 0){var ne=q.call(v,T);if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)})(E,"string");return typeof m=="symbol"?m:m+""}function D(E,m){if(E){if(typeof E=="string")return r(E,m);var v={}.toString.call(E).slice(8,-1);return v==="Object"&&E.constructor&&(v=E.constructor.name),v==="Map"||v==="Set"?Array.from(E):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?r(E,m):void 0}}function F(E){var m=typeof Map=="function"?new Map:void 0;return F=function(v){if(v===null||!(function(q){try{return Function.toString.call(q).indexOf("[native code]")!==-1}catch{return typeof q=="function"}})(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(m!==void 0){if(m.has(v))return m.get(v);m.set(v,T)}function T(){return o(v,arguments,g(this).constructor)}return T.prototype=Object.create(v.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_(T,v)},F(E)}var B=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(m){this._quadrantSegments=m,this._quadrantSegments===0&&(this._joinStyle=E.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=E.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),m<=0&&(this._quadrantSegments=1),this._joinStyle!==E.JOIN_ROUND&&(this._quadrantSegments=E.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(m){this._joinStyle=m}},{key:"setSimplifyFactor",value:function(m){this._simplifyFactor=m<0?0:m}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(m){this._endCapStyle=m}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(m){this._mitreLimit=m}},{key:"setSingleSided",value:function(m){this._isSingleSided=m}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=E.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=E.CAP_ROUND,this._joinStyle=E.JOIN_ROUND,this._mitreLimit=E.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=E.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this.setQuadrantSegments(m)}else if(arguments.length===2){var v=arguments[0],T=arguments[1];this.setQuadrantSegments(v),this.setEndCapStyle(T)}else if(arguments.length===4){var q=arguments[0],ne=arguments[1],ve=arguments[2],De=arguments[3];this.setQuadrantSegments(q),this.setEndCapStyle(ne),this.setJoinStyle(ve),this.setMitreLimit(De)}}}},{key:"bufferDistanceError",value:function(m){var v=Math.PI/2/m;return 1-Math.cos(v/2)}}])})();B.CAP_ROUND=1,B.CAP_FLAT=2,B.CAP_SQUARE=3,B.JOIN_ROUND=1,B.JOIN_MITRE=2,B.JOIN_BEVEL=3,B.DEFAULT_QUADRANT_SEGMENTS=8,B.DEFAULT_MITRE_LIMIT=5,B.DEFAULT_SIMPLIFY_FACTOR=.01;var N=(function(E){function m(v){var T;return i(this,m),(T=n(this,m,[v])).name=Object.keys({Exception:m})[0],T}return b(m,E),a(m,[{key:"toString",value:function(){return this.message}}])})(F(Error)),$=(function(E){function m(v){var T;return i(this,m),(T=n(this,m,[v])).name=Object.keys({IllegalArgumentException:m})[0],T}return b(m,E),a(m)})(N),V=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E){}}])})();function U(){}function X(){}function Z(){}var oe,re,H,ae,se,de,fe,Le,ye=(function(){return a((function E(){i(this,E)}),null,[{key:"equalsWithTolerance",value:function(E,m,v){return Math.abs(E-m)<=v}}])})(),xe=(function(){return a((function E(m,v){i(this,E),this.low=v||0,this.high=m||0}),null,[{key:"toBinaryString",value:function(E){var m,v="";for(m=2147483648;m>0;m>>>=1)v+=(E.high&m)===m?"1":"0";for(m=2147483648;m>0;m>>>=1)v+=(E.low&m)===m?"1":"0";return v}}])})();function Se(){}function Re(){}Se.NaN=NaN,Se.isNaN=function(E){return Number.isNaN(E)},Se.isInfinite=function(E){return!Number.isFinite(E)},Se.MAX_VALUE=Number.MAX_VALUE,Se.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Se.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(de=2146435072,fe=new Float64Array(1),Le=new Int32Array(fe.buffer),Se.doubleToLongBits=function(E){fe[0]=E;var m=0|Le[0],v=0|Le[1];return(v&de)===de&&1048575&v&&m!==0&&(m=0,v=2146959360),new xe(v,m)},Se.longBitsToDouble=function(E){return Le[0]=E.low,Le[1]=E.high,fe[0]}):(oe=1023,re=Math.log2,H=Math.floor,ae=Math.pow,se=(function(){for(var E=53;E>0;E--){var m=ae(2,E)-1;if(H(re(m))+1===E)return m}return 0})(),Se.doubleToLongBits=function(E){var m,v,T,q,ne,ve,De,tt,dt;if(E<0||1/E===Number.NEGATIVE_INFINITY?(ve=1<<31,E=-E):ve=0,E===0)return new xe(tt=ve,dt=0);if(E===1/0)return new xe(tt=2146435072|ve,dt=0);if(E!=E)return new xe(tt=2146959360,dt=0);if(q=0,dt=0,(m=H(E))>1)if(m<=se)(q=H(re(m)))<=20?(dt=0,tt=m<<20-q&1048575):(dt=m%(v=ae(2,T=q-20))<<32-T,tt=m/v&1048575);else for(T=m,dt=0;(T=H(v=T/2))!==0;)q++,dt>>>=1,dt|=(1&tt)<<31,tt>>>=1,v!==T&&(tt|=524288);if(De=q+oe,ne=m===0,m=E-m,q<52&&m!==0)for(T=0;;){if((v=2*m)>=1?(m=v-1,ne?(De--,ne=!1):(T<<=1,T|=1,q++)):(m=v,ne?--De==0&&(q++,ne=!1):(T<<=1,q++)),q===20)tt|=T,T=0;else if(q===52){dt|=T;break}if(v===1){q<20?tt|=T<<20-q:q<52&&(dt|=T<<52-q);break}}return tt|=De<<20,new xe(tt|=ve,dt)},Se.longBitsToDouble=function(E){var m,v,T,q,ne=E.high,ve=E.low,De=ne&1<<31?-1:1;for(T=((2146435072&ne)>>20)-oe,q=0,v=1<<19,m=1;m<=20;m++)ne&v&&(q+=ae(2,-m)),v>>>=1;for(v=1<<31,m=21;m<=52;m++)ve&v&&(q+=ae(2,-m)),v>>>=1;if(T===-1023){if(q===0)return 0*De;T=-1022}else{if(T===1024)return q===0?De/0:NaN;q+=1}return De*q*ae(2,T)});var he=(function(E){function m(v){var T;return i(this,m),(T=n(this,m,[v])).name=Object.keys({RuntimeException:m})[0],T}return b(m,E),a(m)})(N),Ee=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,null,[{key:"constructor_",value:function(){if(arguments.length===0)he.constructor_.call(this);else if(arguments.length===1){var v=arguments[0];he.constructor_.call(this,v)}}}])})(he),we=(function(){function E(){i(this,E)}return a(E,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)E.shouldNeverReachHere(null);else if(arguments.length===1){var m=arguments[0];throw new Ee("Should never reach here"+(m!==null?": "+m:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var m=arguments[0];E.isTrue(m,null)}else if(arguments.length===2){var v=arguments[1];if(!arguments[0])throw v===null?new Ee:new Ee(v)}}},{key:"equals",value:function(){if(arguments.length===2){var m=arguments[0],v=arguments[1];E.equals(m,v,null)}else if(arguments.length===3){var T=arguments[0],q=arguments[1],ne=arguments[2];if(!q.equals(T))throw new Ee("Expected "+T+" but encountered "+q+(ne!==null?": "+ne:""))}}}])})(),Ne=new ArrayBuffer(8),Fe=new Float64Array(Ne),Xe=new Int32Array(Ne),Be=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getM",value:function(){return Se.NaN}},{key:"setOrdinate",value:function(m,v){switch(m){case E.X:this.x=v;break;case E.Y:this.y=v;break;case E.Z:this.setZ(v);break;default:throw new $("Invalid ordinate index: "+m)}}},{key:"equals2D",value:function(){if(arguments.length===1){var m=arguments[0];return this.x===m.x&&this.y===m.y}if(arguments.length===2){var v=arguments[0],T=arguments[1];return!!ye.equalsWithTolerance(this.x,v.x,T)&&!!ye.equalsWithTolerance(this.y,v.y,T)}}},{key:"setM",value:function(m){throw new $("Invalid ordinate index: "+E.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(m){switch(m){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.getZ()}throw new $("Invalid ordinate index: "+m)}},{key:"equals3D",value:function(m){return this.x===m.x&&this.y===m.y&&(this.getZ()===m.getZ()||Se.isNaN(this.getZ())&&Se.isNaN(m.getZ()))}},{key:"equals",value:function(m){return m instanceof E&&this.equals2D(m)}},{key:"equalInZ",value:function(m,v){return ye.equalsWithTolerance(this.getZ(),m.getZ(),v)}},{key:"setX",value:function(m){this.x=m}},{key:"compareTo",value:function(m){var v=m;return this.x<v.x?-1:this.x>v.x?1:this.y<v.y?-1:this.y>v.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(m){this.z=m}},{key:"clone",value:function(){try{return null}catch(m){if(m instanceof CloneNotSupportedException)return we.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw m}}},{key:"copy",value:function(){return new E(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(m){var v=this.x-m.x,T=this.y-m.y,q=this.getZ()-m.getZ();return Math.sqrt(v*v+T*T+q*q)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(m){this.y=m}},{key:"distance",value:function(m){var v=this.x-m.x,T=this.y-m.y;return Math.sqrt(v*v+T*T)}},{key:"hashCode",value:function(){var m=17;return m=37*(m=37*m+E.hashCode(this.x))+E.hashCode(this.y)}},{key:"setCoordinate",value:function(m){this.x=m.x,this.y=m.y,this.z=m.getZ()}},{key:"interfaces_",get:function(){return[U,X,Z]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)E.constructor_.call(this,0,0);else if(arguments.length===1){var m=arguments[0];E.constructor_.call(this,m.x,m.y,m.getZ())}else if(arguments.length===2){var v=arguments[0],T=arguments[1];E.constructor_.call(this,v,T,E.NULL_ORDINATE)}else if(arguments.length===3){var q=arguments[0],ne=arguments[1],ve=arguments[2];this.x=q,this.y=ne,this.z=ve}}},{key:"hashCode",value:function(m){return Fe[0]=m,Xe[0]^Xe[1]}}])})(),ot=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"compare",value:function(m,v){var T=E.compare(m.x,v.x);if(T!==0)return T;var q=E.compare(m.y,v.y);return q!==0?q:this._dimensionsToTest<=2?0:E.compare(m.getZ(),v.getZ())}},{key:"interfaces_",get:function(){return[Re]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)E.constructor_.call(this,2);else if(arguments.length===1){var m=arguments[0];if(m!==2&&m!==3)throw new $("only 2 or 3 dimensions may be specified");this._dimensionsToTest=m}}},{key:"compare",value:function(m,v){return m<v?-1:m>v?1:Se.isNaN(m)?Se.isNaN(v)?0:-1:Se.isNaN(v)?1:0}}])})();Be.DimensionalComparator=ot,Be.NULL_ORDINATE=Se.NaN,Be.X=0,Be.Y=1,Be.Z=2,Be.M=3;var Ke=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(m){if(!(m instanceof E))return!1;var v=m;return this.isNull()?v.isNull():this._maxx===v.getMaxX()&&this._maxy===v.getMaxY()&&this._minx===v.getMinX()&&this._miny===v.getMinY()}},{key:"intersection",value:function(m){if(this.isNull()||m.isNull()||!this.intersects(m))return new E;var v=this._minx>m._minx?this._minx:m._minx,T=this._miny>m._miny?this._miny:m._miny;return new E(v,this._maxx<m._maxx?this._maxx:m._maxx,T,this._maxy<m._maxy?this._maxy:m._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof Be){var m=arguments[0];return this.covers(m.x,m.y)}if(arguments[0]instanceof E){var v=arguments[0];return!this.isNull()&&!v.isNull()&&v.getMinX()>=this._minx&&v.getMaxX()<=this._maxx&&v.getMinY()>=this._miny&&v.getMaxY()<=this._maxy}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];return!this.isNull()&&T>=this._minx&&T<=this._maxx&&q>=this._miny&&q<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return!this.isNull()&&!m.isNull()&&!(m._minx>this._maxx||m._maxx<this._minx||m._miny>this._maxy||m._maxy<this._miny)}if(arguments[0]instanceof Be){var v=arguments[0];return this.intersects(v.x,v.y)}}else if(arguments.length===2){if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var T=arguments[0],q=arguments[1];return!this.isNull()&&!((T.x<q.x?T.x:q.x)>this._maxx)&&!((T.x>q.x?T.x:q.x)<this._minx)&&!((T.y<q.y?T.y:q.y)>this._maxy)&&!((T.y>q.y?T.y:q.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var ne=arguments[0],ve=arguments[1];return!this.isNull()&&!(ne>this._maxx||ne<this._minx||ve>this._maxy||ve<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var m=this.getWidth(),v=this.getHeight();return Math.sqrt(m*m+v*v)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof Be){var m=arguments[0];this.expandToInclude(m.x,m.y)}else if(arguments[0]instanceof E){var v=arguments[0];if(v.isNull())return null;this.isNull()?(this._minx=v.getMinX(),this._maxx=v.getMaxX(),this._miny=v.getMinY(),this._maxy=v.getMaxY()):(v._minx<this._minx&&(this._minx=v._minx),v._maxx>this._maxx&&(this._maxx=v._maxx),v._miny<this._miny&&(this._miny=v._miny),v._maxy>this._maxy&&(this._maxy=v._maxy))}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];this.isNull()?(this._minx=T,this._maxx=T,this._miny=q,this._maxy=q):(T<this._minx&&(this._minx=T),T>this._maxx&&(this._maxx=T),q<this._miny&&(this._miny=q),q>this._maxy&&(this._maxy=q))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var m=this.getWidth(),v=this.getHeight();return m<v?m:v}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(m){var v=m;return this.isNull()?v.isNull()?0:-1:v.isNull()?1:this._minx<v._minx?-1:this._minx>v._minx?1:this._miny<v._miny?-1:this._miny>v._miny?1:this._maxx<v._maxx?-1:this._maxx>v._maxx?1:this._maxy<v._maxy?-1:this._maxy>v._maxy?1:0}},{key:"translate",value:function(m,v){if(this.isNull())return null;this.init(this.getMinX()+m,this.getMaxX()+m,this.getMinY()+v,this.getMaxY()+v)}},{key:"copy",value:function(){return new E(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(m){return!(!this.isNull()&&!m.isNull())||m._minx>this._maxx||m._maxx<this._minx||m._miny>this._maxy||m._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var m=this.getWidth(),v=this.getHeight();return m>v?m:v}},{key:"expandBy",value:function(){if(arguments.length===1){var m=arguments[0];this.expandBy(m,m)}else if(arguments.length===2){var v=arguments[0],T=arguments[1];if(this.isNull())return null;this._minx-=v,this._maxx+=v,this._miny-=T,this._maxy+=T,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.covers(m)}if(arguments[0]instanceof Be){var v=arguments[0];return this.covers(v)}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];return this.covers(T,q)}}},{key:"centre",value:function(){return this.isNull()?null:new Be((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Be){var m=arguments[0];this.init(m.x,m.x,m.y,m.y)}else if(arguments[0]instanceof E){var v=arguments[0];this._minx=v._minx,this._maxx=v._maxx,this._miny=v._miny,this._maxy=v._maxy}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];this.init(T.x,q.x,T.y,q.y)}else if(arguments.length===4){var ne=arguments[0],ve=arguments[1],De=arguments[2],tt=arguments[3];ne<ve?(this._minx=ne,this._maxx=ve):(this._minx=ve,this._maxx=ne),De<tt?(this._miny=De,this._maxy=tt):(this._miny=tt,this._maxy=De)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(m){if(this.intersects(m))return 0;var v=0;this._maxx<m._minx?v=m._minx-this._maxx:this._minx>m._maxx&&(v=this._minx-m._maxx);var T=0;return this._maxy<m._miny?T=m._miny-this._maxy:this._miny>m._maxy&&(T=this._miny-m._maxy),v===0?T:T===0?v:Math.sqrt(v*v+T*T)}},{key:"hashCode",value:function(){var m=17;return m=37*(m=37*(m=37*(m=37*m+Be.hashCode(this._minx))+Be.hashCode(this._maxx))+Be.hashCode(this._miny))+Be.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[U,Z]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Be){var m=arguments[0];this.init(m.x,m.x,m.y,m.y)}else if(arguments[0]instanceof E){var v=arguments[0];this.init(v)}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];this.init(T.x,q.x,T.y,q.y)}else if(arguments.length===4){var ne=arguments[0],ve=arguments[1],De=arguments[2],tt=arguments[3];this.init(ne,ve,De,tt)}}},{key:"intersects",value:function(){if(arguments.length===3){var m=arguments[0],v=arguments[1],T=arguments[2];return T.x>=(m.x<v.x?m.x:v.x)&&T.x<=(m.x>v.x?m.x:v.x)&&T.y>=(m.y<v.y?m.y:v.y)&&T.y<=(m.y>v.y?m.y:v.y)}if(arguments.length===4){var q=arguments[0],ne=arguments[1],ve=arguments[2],De=arguments[3],tt=Math.min(ve.x,De.x),dt=Math.max(ve.x,De.x),tr=Math.min(q.x,ne.x),ar=Math.max(q.x,ne.x);return!(tr>dt)&&!(ar<tt)&&(tt=Math.min(ve.y,De.y),dt=Math.max(ve.y,De.y),tr=Math.min(q.y,ne.y),ar=Math.max(q.y,ne.y),!(tr>dt)&&!(ar<tt))}}}])})(),it=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(m){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(m){return this===m||this.equalsExact(m,0)}},{key:"geometryChanged",value:function(){this.apply(E.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(m){return m!==null&&this.norm().equalsExact(m.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var m;if(arguments.length===1){var v=arguments[0];return m=v,this.getTypeCode()!==m.getTypeCode()?this.getTypeCode()-m.getTypeCode():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(v)}if(arguments.length===2){var T=arguments[0],q=arguments[1];return m=T,this.getTypeCode()!==m.getTypeCode()?this.getTypeCode()-m.getTypeCode():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(T,q)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(m){if(m.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION)throw new $("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(m,v,T){return T===0?m.equals(v):m.distance(v)<=T}},{key:"norm",value:function(){var m=this.copy();return m.normalize(),m}},{key:"reverse",value:function(){var m=this.reverseInternal();return this.envelope!=null&&(m.envelope=this.envelope.copy()),m.setSRID(this.getSRID()),m}},{key:"copy",value:function(){var m=this.copyInternal();return m.envelope=this._envelope==null?null:this._envelope.copy(),m._SRID=this._SRID,m._userData=this._userData,m}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Ke(this._envelope)}},{key:"setSRID",value:function(m){this._SRID=m}},{key:"setUserData",value:function(m){this._userData=m}},{key:"compare",value:function(m,v){for(var T=m.iterator(),q=v.iterator();T.hasNext()&&q.hasNext();){var ne=T.next(),ve=q.next(),De=ne.compareTo(ve);if(De!==0)return De}return T.hasNext()?1:q.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(m){return this.getClass()===m.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===E.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===E.TYPECODE_MULTIPOINT||this.getTypeCode()===E.TYPECODE_MULTILINESTRING||this.getTypeCode()===E.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[X,U,Z]}},{key:"getClass",value:function(){return E}}],[{key:"hasNonEmptyElements",value:function(m){for(var v=0;v<m.length;v++)if(!m[v].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(m){for(var v=0;v<m.length;v++)if(m[v]===null)return!0;return!1}}])})();it.constructor_=function(E){E&&(this._envelope=null,this._userData=null,this._factory=E,this._SRID=E.getSRID())},it.TYPECODE_POINT=0,it.TYPECODE_MULTIPOINT=1,it.TYPECODE_LINESTRING=2,it.TYPECODE_LINEARRING=3,it.TYPECODE_MULTILINESTRING=4,it.TYPECODE_POLYGON=5,it.TYPECODE_MULTIPOLYGON=6,it.TYPECODE_GEOMETRYCOLLECTION=7,it.TYPENAME_POINT="Point",it.TYPENAME_MULTIPOINT="MultiPoint",it.TYPENAME_LINESTRING="LineString",it.TYPENAME_LINEARRING="LinearRing",it.TYPENAME_MULTILINESTRING="MultiLineString",it.TYPENAME_POLYGON="Polygon",it.TYPENAME_MULTIPOLYGON="MultiPolygon",it.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",it.geometryChangedFilter={get interfaces_(){return[V]},filter:function(E){E.geometryChangedAction()}};var ke=(function(){function E(){i(this,E)}return a(E,null,[{key:"toLocationSymbol",value:function(m){switch(m){case E.EXTERIOR:return"e";case E.BOUNDARY:return"b";case E.INTERIOR:return"i";case E.NONE:return"-"}throw new $("Unknown location value: "+m)}}])})();ke.INTERIOR=0,ke.BOUNDARY=1,ke.EXTERIOR=2,ke.NONE=-1;var Nt=(function(){return a((function E(){i(this,E)}),[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])})(),st=(function(E){function m(v){var T;return i(this,m),(T=n(this,m,[v])).name=Object.keys({NoSuchElementException:m})[0],T}return b(m,E),a(m)})(N),$e=(function(E){function m(v){var T;return i(this,m),(T=n(this,m,[v])).name=Object.keys({UnsupportedOperationException:m})[0],T}return b(m,E),a(m)})(N),Zt=(function(E){function m(){return i(this,m),n(this,m,arguments)}return b(m,E),a(m,[{key:"contains",value:function(){}}])})(Nt),$t=(function(E){function m(v){var T;return i(this,m),(T=n(this,m)).map=new Map,v instanceof Nt&&T.addAll(v),T}return b(m,E),a(m,[{key:"contains",value:function(v){var T=v.hashCode?v.hashCode():v;return!!this.map.has(T)}},{key:"add",value:function(v){var T=v.hashCode?v.hashCode():v;return!this.map.has(T)&&!!this.map.set(T,v)}},{key:"addAll",value:function(v){var T,q=f(v);try{for(q.s();!(T=q.n()).done;){var ne=T.value;this.add(ne)}}catch(ve){q.e(ve)}finally{q.f()}return!0}},{key:"remove",value:function(){throw new $e}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Wt(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])})(Zt),Wt=(function(){return a((function E(m){i(this,E),this.iterator=m.values();var v=this.iterator.next(),T=v.done,q=v.value;this.done=T,this.value=q}),[{key:"next",value:function(){if(this.done)throw new st;var E=this.value,m=this.iterator.next(),v=m.done,T=m.value;return this.done=v,this.value=T,E}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new $e}}])})(),ht=(function(){function E(){i(this,E)}return a(E,null,[{key:"opposite",value:function(m){return m===E.LEFT?E.RIGHT:m===E.RIGHT?E.LEFT:m}}])})();ht.ON=0,ht.LEFT=1,ht.RIGHT=2;var sr=(function(E){function m(v){var T;return i(this,m),(T=n(this,m,[v])).name=Object.keys({EmptyStackException:m})[0],T}return b(m,E),a(m)})(N),cr=(function(E){function m(v){var T;return i(this,m),(T=n(this,m,[v])).name=Object.keys({IndexOutOfBoundsException:m})[0],T}return b(m,E),a(m)})(N),ir=(function(E){function m(){return i(this,m),n(this,m,arguments)}return b(m,E),a(m,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])})(Nt),br=(function(E){function m(){var v;return i(this,m),(v=n(this,m)).array=[],v}return b(m,E),a(m,[{key:"add",value:function(v){return this.array.push(v),!0}},{key:"get",value:function(v){if(v<0||v>=this.size())throw new cr;return this.array[v]}},{key:"push",value:function(v){return this.array.push(v),v}},{key:"pop",value:function(){if(this.array.length===0)throw new sr;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new sr;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(v){return this.array.indexOf(v)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])})(ir);function yr(E,m){return E.interfaces_&&E.interfaces_.indexOf(m)>-1}var Kt=(function(){return a((function E(m){i(this,E),this.str=m}),[{key:"append",value:function(E){this.str+=E}},{key:"setCharAt",value:function(E,m){this.str=this.str.substr(0,E)+m+this.str.substr(E+1)}},{key:"toString",value:function(){return this.str}}])})(),at=(function(){function E(m){i(this,E),this.value=m}return a(E,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(m){return this.value<m?-1:this.value>m?1:0}}],[{key:"compare",value:function(m,v){return m<v?-1:m>v?1:0}},{key:"isNan",value:function(m){return Number.isNaN(m)}},{key:"valueOf",value:function(m){return new E(m)}}])})(),Ae=(function(){return a((function E(){i(this,E)}),null,[{key:"isWhitespace",value:function(E){return E<=32&&E>=0||E===127}},{key:"toUpperCase",value:function(E){return E.toUpperCase()}}])})(),_e=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"le",value:function(m){return this._hi<m._hi||this._hi===m._hi&&this._lo<=m._lo}},{key:"extractSignificantDigits",value:function(m,v){var T=this.abs(),q=E.magnitude(T._hi),ne=E.TEN.pow(q);(T=T.divide(ne)).gt(E.TEN)?(T=T.divide(E.TEN),q+=1):T.lt(E.ONE)&&(T=T.multiply(E.TEN),q-=1);for(var ve=q+1,De=new Kt,tt=E.MAX_PRINT_DIGITS-1,dt=0;dt<=tt;dt++){m&&dt===ve&&De.append(".");var tr=Math.trunc(T._hi);if(tr<0)break;var ar=!1,Fr=0;tr>9?(ar=!0,Fr="9"):Fr="0"+tr,De.append(Fr),T=T.subtract(E.valueOf(tr)).multiply(E.TEN),ar&&T.selfAdd(E.TEN);var fn=!0,Cn=E.magnitude(T._hi);if(Cn<0&&Math.abs(Cn)>=tt-dt&&(fn=!1),!fn)break}return v[0]=q,De.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return this.add(m.negate())}if(typeof arguments[0]=="number"){var v=arguments[0];return this.add(-v)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof E){var m=arguments[0];return this._hi===m._hi&&this._lo===m._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return this.isNaN()?this:this.selfAdd(-m._hi,-m._lo)}if(typeof arguments[0]=="number"){var v=arguments[0];return this.isNaN()?this:this.selfAdd(-v,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(m){return this.le(m)?this:m}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.selfDivide(m._hi,m._lo)}if(typeof arguments[0]=="number"){var v=arguments[0];return this.selfDivide(v,0)}}else if(arguments.length===2){var T,q,ne,ve,De=arguments[0],tt=arguments[1],dt=null,tr=null,ar=null,Fr=null;return ne=this._hi/De,Fr=(dt=(ar=E.SPLIT*ne)-(dt=ar-ne))*(tr=(Fr=E.SPLIT*De)-(tr=Fr-De))-(ve=ne*De)+dt*(q=De-tr)+(T=ne-dt)*tr+T*q,Fr=ne+(ar=(this._hi-ve-Fr+this._lo-ne*tt)/De),this._hi=Fr,this._lo=ne-Fr+ar,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof E){var m,v,T,q,ne=arguments[0],ve=null,De=null,tt=null,dt=null;return m=(T=this._hi/ne._hi)-(ve=(tt=E.SPLIT*T)-(ve=tt-T)),dt=ve*(De=(dt=E.SPLIT*ne._hi)-(De=dt-ne._hi))-(q=T*ne._hi)+ve*(v=ne._hi-De)+m*De+m*v,new E(dt=T+(tt=(this._hi-q-dt+this._lo-T*ne._lo)/ne._hi),T-dt+tt)}if(typeof arguments[0]=="number"){var tr=arguments[0];return Se.isNaN(tr)?E.createNaN():E.copy(this).selfDivide(tr,0)}}},{key:"ge",value:function(m){return this._hi>m._hi||this._hi===m._hi&&this._lo>=m._lo}},{key:"pow",value:function(m){if(m===0)return E.valueOf(1);var v=new E(this),T=E.valueOf(1),q=Math.abs(m);if(q>1)for(;q>0;)q%2==1&&T.selfMultiply(v),(q/=2)>0&&(v=v.sqr());else T=v;return m<0?T.reciprocal():T}},{key:"ceil",value:function(){if(this.isNaN())return E.NaN;var m=Math.ceil(this._hi),v=0;return m===this._hi&&(v=Math.ceil(this._lo)),new E(m,v)}},{key:"compareTo",value:function(m){var v=m;return this._hi<v._hi?-1:this._hi>v._hi?1:this._lo<v._lo?-1:this._lo>v._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return this.init(m),this}if(typeof arguments[0]=="number"){var v=arguments[0];return this.init(v),this}}},{key:"max",value:function(m){return this.ge(m)?this:m}},{key:"sqrt",value:function(){if(this.isZero())return E.valueOf(0);if(this.isNegative())return E.NaN;var m=1/Math.sqrt(this._hi),v=this._hi*m,T=E.valueOf(v),q=this.subtract(T.sqr())._hi*(.5*m);return T.add(q)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.selfAdd(m._hi,m._lo)}if(typeof arguments[0]=="number"){var v,T,q,ne,ve,De=arguments[0],tt=null;return tt=(q=this._hi+De)-(ne=q-this._hi),T=(ve=(tt=De-ne+(this._hi-tt))+this._lo)+(q-(v=q+ve)),this._hi=v+T,this._lo=T+(v-this._hi),this}}else if(arguments.length===2){var dt,tr,ar,Fr,fn=arguments[0],Cn=arguments[1],Bn=null,In=null,gn=null;ar=this._hi+fn,tr=this._lo+Cn,In=ar-(gn=ar-this._hi),Bn=tr-(Fr=tr-this._lo);var Ui=(dt=ar+(gn=(In=fn-gn+(this._hi-In))+tr))+(gn=(Bn=Cn-Fr+(this._lo-Bn))+(gn+(ar-dt))),Ji=gn+(dt-Ui);return this._hi=Ui,this._lo=Ji,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof E){var m=arguments[0];return this.selfMultiply(m._hi,m._lo)}if(typeof arguments[0]=="number"){var v=arguments[0];return this.selfMultiply(v,0)}}else if(arguments.length===2){var T,q,ne=arguments[0],ve=arguments[1],De=null,tt=null,dt=null,tr=null;De=(dt=E.SPLIT*this._hi)-this._hi,tr=E.SPLIT*ne,De=dt-De,T=this._hi-De,tt=tr-ne;var ar=(dt=this._hi*ne)+(tr=De*(tt=tr-tt)-dt+De*(q=ne-tt)+T*tt+T*q+(this._hi*ve+this._lo*ne)),Fr=tr+(De=dt-ar);return this._hi=ar,this._lo=Fr,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return E.NaN;var m=Math.floor(this._hi),v=0;return m===this._hi&&(v=Math.floor(this._lo)),new E(m,v)}},{key:"negate",value:function(){return this.isNaN()?this:new E(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(m){if(m instanceof CloneNotSupportedException)return null;throw m}}},{key:"multiply",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return m.isNaN()?E.createNaN():E.copy(this).selfMultiply(m)}if(typeof arguments[0]=="number"){var v=arguments[0];return Se.isNaN(v)?E.createNaN():E.copy(this).selfMultiply(v,0)}}},{key:"isNaN",value:function(){return Se.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var m=E.magnitude(this._hi);return m>=-3&&m<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var m=this.getSpecialNumberString();if(m!==null)return m;var v=new Array(1).fill(null),T=this.extractSignificantDigits(!0,v),q=v[0]+1,ne=T;if(T.charAt(0)===".")ne="0"+T;else if(q<0)ne="0."+E.stringOfChar("0",-q)+T;else if(T.indexOf(".")===-1){var ve=q-T.length;ne=T+E.stringOfChar("0",ve)+".0"}return this.isNegative()?"-"+ne:ne}},{key:"reciprocal",value:function(){var m,v,T,q,ne=null,ve=null,De=null,tt=null;m=(T=1/this._hi)-(ne=(De=E.SPLIT*T)-(ne=De-T)),ve=(tt=E.SPLIT*this._hi)-this._hi;var dt=T+(De=(1-(q=T*this._hi)-(tt=ne*(ve=tt-ve)-q+ne*(v=this._hi-ve)+m*ve+m*v)-T*this._lo)/this._hi);return new E(dt,T-dt+De)}},{key:"toSciNotation",value:function(){if(this.isZero())return E.SCI_NOT_ZERO;var m=this.getSpecialNumberString();if(m!==null)return m;var v=new Array(1).fill(null),T=this.extractSignificantDigits(!1,v),q=E.SCI_NOT_EXPONENT_CHAR+v[0];if(T.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+T);var ne="";T.length>1&&(ne=T.substring(1));var ve=T.charAt(0)+"."+ne;return this.isNegative()?"-"+ve+q:ve+q}},{key:"abs",value:function(){return this.isNaN()?E.NaN:this.isNegative()?this.negate():new E(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(m){return this._hi<m._hi||this._hi===m._hi&&this._lo<m._lo}},{key:"add",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return E.copy(this).selfAdd(m)}if(typeof arguments[0]=="number"){var v=arguments[0];return E.copy(this).selfAdd(v)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var m=arguments[0];this._hi=m,this._lo=0}else if(arguments[0]instanceof E){var v=arguments[0];this._hi=v._hi,this._lo=v._lo}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];this._hi=T,this._lo=q}}},{key:"gt",value:function(m){return this._hi>m._hi||this._hi===m._hi&&this._lo>m._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?E.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[Z,U,X]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var m=arguments[0];this.init(m)}else if(arguments[0]instanceof E){var v=arguments[0];this.init(v)}else if(typeof arguments[0]=="string"){var T=arguments[0];E.constructor_.call(this,E.parse(T))}}else if(arguments.length===2){var q=arguments[0],ne=arguments[1];this.init(q,ne)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],v=arguments[1],T=arguments[2],q=arguments[3];return E.determinant(E.valueOf(m),E.valueOf(v),E.valueOf(T),E.valueOf(q))}if(arguments[3]instanceof E&&arguments[2]instanceof E&&arguments[0]instanceof E&&arguments[1]instanceof E){var ne=arguments[1],ve=arguments[2],De=arguments[3];return arguments[0].multiply(De).selfSubtract(ne.multiply(ve))}}},{key:"sqr",value:function(m){return E.valueOf(m).selfMultiply(m)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var m=arguments[0];return E.parse(m)}if(typeof arguments[0]=="number")return new E(arguments[0])}},{key:"sqrt",value:function(m){return E.valueOf(m).sqrt()}},{key:"parse",value:function(m){for(var v=0,T=m.length;Ae.isWhitespace(m.charAt(v));)v++;var q=!1;if(v<T){var ne=m.charAt(v);ne!=="-"&&ne!=="+"||(v++,ne==="-"&&(q=!0))}for(var ve=new E,De=0,tt=0,dt=0,tr=!1;!(v>=T);){var ar=m.charAt(v);if(v++,Ae.isDigit(ar)){var Fr=ar-"0";ve.selfMultiply(E.TEN),ve.selfAdd(Fr),De++}else{if(ar!=="."){if(ar==="e"||ar==="E"){var fn=m.substring(v);try{dt=at.parseInt(fn)}catch(Ui){throw Ui instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+fn+" in string "+m):Ui}break}throw new NumberFormatException("Unexpected character '"+ar+"' at position "+v+" in string "+m)}tt=De,tr=!0}}var Cn=ve;tr||(tt=De);var Bn=De-tt-dt;if(Bn===0)Cn=ve;else if(Bn>0){var In=E.TEN.pow(Bn);Cn=ve.divide(In)}else if(Bn<0){var gn=E.TEN.pow(-Bn);Cn=ve.multiply(gn)}return q?Cn.negate():Cn}},{key:"createNaN",value:function(){return new E(Se.NaN,Se.NaN)}},{key:"copy",value:function(m){return new E(m)}},{key:"magnitude",value:function(m){var v=Math.abs(m),T=Math.log(v)/Math.log(10),q=Math.trunc(Math.floor(T));return 10*Math.pow(10,q)<=v&&(q+=1),q}},{key:"stringOfChar",value:function(m,v){for(var T=new Kt,q=0;q<v;q++)T.append(m);return T.toString()}}])})();_e.PI=new _e(3.141592653589793,12246467991473532e-32),_e.TWO_PI=new _e(6.283185307179586,24492935982947064e-32),_e.PI_2=new _e(1.5707963267948966,6123233995736766e-32),_e.E=new _e(2.718281828459045,14456468917292502e-32),_e.NaN=new _e(Se.NaN,Se.NaN),_e.EPS=123259516440783e-46,_e.SPLIT=134217729,_e.MAX_PRINT_DIGITS=32,_e.TEN=_e.valueOf(10),_e.ONE=_e.valueOf(1),_e.SCI_NOT_EXPONENT_CHAR="E",_e.SCI_NOT_ZERO="0.0E0";var je=(function(){function E(){i(this,E)}return a(E,null,[{key:"orientationIndex",value:function(m,v,T){var q=E.orientationIndexFilter(m,v,T);if(q<=1)return q;var ne=_e.valueOf(v.x).selfAdd(-m.x),ve=_e.valueOf(v.y).selfAdd(-m.y),De=_e.valueOf(T.x).selfAdd(-v.x),tt=_e.valueOf(T.y).selfAdd(-v.y);return ne.selfMultiply(tt).selfSubtract(ve.selfMultiply(De)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof _e&&arguments[2]instanceof _e&&arguments[0]instanceof _e&&arguments[1]instanceof _e){var m=arguments[1],v=arguments[2],T=arguments[3];return arguments[0].multiply(T).selfSubtract(m.multiply(v)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var q=arguments[0],ne=arguments[1],ve=arguments[2],De=arguments[3],tt=_e.valueOf(q),dt=_e.valueOf(ne),tr=_e.valueOf(ve),ar=_e.valueOf(De);return tt.multiply(ar).selfSubtract(dt.multiply(tr)).signum()}}},{key:"intersection",value:function(m,v,T,q){var ne=new _e(m.y).selfSubtract(v.y),ve=new _e(v.x).selfSubtract(m.x),De=new _e(m.x).selfMultiply(v.y).selfSubtract(new _e(v.x).selfMultiply(m.y)),tt=new _e(T.y).selfSubtract(q.y),dt=new _e(q.x).selfSubtract(T.x),tr=new _e(T.x).selfMultiply(q.y).selfSubtract(new _e(q.x).selfMultiply(T.y)),ar=ve.multiply(tr).selfSubtract(dt.multiply(De)),Fr=tt.multiply(De).selfSubtract(ne.multiply(tr)),fn=ne.multiply(dt).selfSubtract(tt.multiply(ve)),Cn=ar.selfDivide(fn).doubleValue(),Bn=Fr.selfDivide(fn).doubleValue();return Se.isNaN(Cn)||Se.isInfinite(Cn)||Se.isNaN(Bn)||Se.isInfinite(Bn)?null:new Be(Cn,Bn)}},{key:"orientationIndexFilter",value:function(m,v,T){var q=null,ne=(m.x-T.x)*(v.y-T.y),ve=(m.y-T.y)*(v.x-T.x),De=ne-ve;if(ne>0){if(ve<=0)return E.signum(De);q=ne+ve}else{if(!(ne<0)||ve>=0)return E.signum(De);q=-ne-ve}var tt=E.DP_SAFE_EPSILON*q;return De>=tt||-De>=tt?E.signum(De):2}},{key:"signum",value:function(m){return m>0?1:m<0?-1:0}}])})();je.DP_SAFE_EPSILON=1e-15;var Ge=(function(){return a((function E(){i(this,E)}),[{key:"getM",value:function(E){if(this.hasM()){var m=this.getDimension()-this.getMeasures();return this.getOrdinate(E,m)}return Se.NaN}},{key:"setOrdinate",value:function(E,m,v){}},{key:"getZ",value:function(E){return this.hasZ()?this.getOrdinate(E,2):Se.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(E,m){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(E){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(E){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(E){}},{key:"copy",value:function(){}},{key:"getY",value:function(E){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[X]}}])})();Ge.X=0,Ge.Y=1,Ge.Z=2,Ge.M=3;var He=(function(){function E(){i(this,E)}return a(E,null,[{key:"index",value:function(m,v,T){return je.orientationIndex(m,v,T)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var m=arguments[0],v=m.length-1;if(v<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var T=m[0],q=0,ne=1;ne<=v;ne++){var ve=m[ne];ve.y>T.y&&(T=ve,q=ne)}var De=q;do(De-=1)<0&&(De=v);while(m[De].equals2D(T)&&De!==q);var tt=q;do tt=(tt+1)%v;while(m[tt].equals2D(T)&&tt!==q);var dt=m[De],tr=m[tt];if(dt.equals2D(T)||tr.equals2D(T)||dt.equals2D(tr))return!1;var ar=E.index(dt,T,tr);return ar===0?dt.x>tr.x:ar>0}if(yr(arguments[0],Ge)){var Fr=arguments[0],fn=Fr.size()-1;if(fn<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var Cn=Fr.getCoordinate(0),Bn=0,In=1;In<=fn;In++){var gn=Fr.getCoordinate(In);gn.y>Cn.y&&(Cn=gn,Bn=In)}var Ui=null,Ji=Bn;do(Ji-=1)<0&&(Ji=fn),Ui=Fr.getCoordinate(Ji);while(Ui.equals2D(Cn)&&Ji!==Bn);var Ha=null,va=Bn;do va=(va+1)%fn,Ha=Fr.getCoordinate(va);while(Ha.equals2D(Cn)&&va!==Bn);if(Ui.equals2D(Cn)||Ha.equals2D(Cn)||Ui.equals2D(Ha))return!1;var To=E.index(Ui,Cn,Ha);return To===0?Ui.x>Ha.x:To>0}}}])})();He.CLOCKWISE=-1,He.RIGHT=He.CLOCKWISE,He.COUNTERCLOCKWISE=1,He.LEFT=He.COUNTERCLOCKWISE,He.COLLINEAR=0,He.STRAIGHT=He.COLLINEAR;var Dt=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(E,m){var v=this.getRightmostSideOfSegment(E,m);return v<0&&(v=this.getRightmostSideOfSegment(E,m-1)),v<0&&(this._minCoord=null,this.checkForRightmostCoordinate(E)),v}},{key:"findRightmostEdgeAtVertex",value:function(){var E=this._minDe.getEdge().getCoordinates();we.isTrue(this._minIndex>0&&this._minIndex<E.length,"rightmost point expected to be interior vertex of edge");var m=E[this._minIndex-1],v=E[this._minIndex+1],T=He.index(this._minCoord,v,m),q=!1;(m.y<this._minCoord.y&&v.y<this._minCoord.y&&T===He.COUNTERCLOCKWISE||m.y>this._minCoord.y&&v.y>this._minCoord.y&&T===He.CLOCKWISE)&&(q=!0),q&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(E,m){var v=E.getEdge().getCoordinates();if(m<0||m+1>=v.length||v[m].y===v[m+1].y)return-1;var T=ht.LEFT;return v[m].y<v[m+1].y&&(T=ht.RIGHT),T}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(E){for(var m=E.getEdge().getCoordinates(),v=0;v<m.length-1;v++)(this._minCoord===null||m[v].x>this._minCoord.x)&&(this._minDe=E,this._minIndex=v,this._minCoord=m[v])}},{key:"findRightmostEdgeAtNode",value:function(){var E=this._minDe.getNode().getEdges();this._minDe=E.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(E){for(var m=E.iterator();m.hasNext();){var v=m.next();v.isForward()&&this.checkForRightmostCoordinate(v)}we.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ht.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])})(),St=(function(E){function m(v,T){var q;return i(this,m),(q=n(this,m,[T?v+" [ "+T+" ]":v])).pt=T?new Be(T):void 0,q.name=Object.keys({TopologyException:m})[0],q}return b(m,E),a(m,[{key:"getCoordinate",value:function(){return this.pt}}])})(he),yt=(function(){return a((function E(){i(this,E),this.array=[]}),[{key:"addLast",value:function(E){this.array.push(E)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])})(),ct=(function(E){function m(v){var T;return i(this,m),(T=n(this,m)).array=[],v instanceof Nt&&T.addAll(v),T}return b(m,E),a(m,[{key:"interfaces_",get:function(){return[ir,Nt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(v){return arguments.length===1?this.array.push(v):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(v){var T,q=f(v);try{for(q.s();!(T=q.n()).done;){var ne=T.value;this.array.push(ne)}}catch(ve){q.e(ve)}finally{q.f()}}},{key:"set",value:function(v,T){var q=this.array[v];return this.array[v]=T,q}},{key:"iterator",value:function(){return new Jt(this)}},{key:"get",value:function(v){if(v<0||v>=this.size())throw new cr;return this.array[v]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(v){v?this.array.sort((function(T,q){return v.compare(T,q)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(v){for(var T=0,q=this.array.length;T<q;T++)if(this.array[T]===v)return!!this.array.splice(T,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])})(ir),Jt=(function(){return a((function E(m){i(this,E),this.arrayList=m,this.position=0}),[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new st;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(E){return this.arrayList.set(this.position-1,E)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])})(),Vt=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"clearVisitedEdges",value:function(){for(var E=this._dirEdgeList.iterator();E.hasNext();)E.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(E){for(var m=null,v=E.getEdges().iterator();v.hasNext();){var T=v.next();if(T.isVisited()||T.getSym().isVisited()){m=T;break}}if(m===null)throw new St("unable to find edge to compute depths at "+E.getCoordinate());E.getEdges().computeDepths(m);for(var q=E.getEdges().iterator();q.hasNext();){var ne=q.next();ne.setVisited(!0),this.copySymDepths(ne)}}},{key:"computeDepth",value:function(E){this.clearVisitedEdges();var m=this._finder.getEdge();m.getNode(),m.getLabel(),m.setEdgeDepths(ht.RIGHT,E),this.copySymDepths(m),this.computeDepths(m)}},{key:"create",value:function(E){this.addReachable(E),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var E=this._dirEdgeList.iterator();E.hasNext();){var m=E.next();m.getDepth(ht.RIGHT)>=1&&m.getDepth(ht.LEFT)<=0&&!m.isInteriorAreaEdge()&&m.setInResult(!0)}}},{key:"computeDepths",value:function(E){var m=new $t,v=new yt,T=E.getNode();for(v.addLast(T),m.add(T),E.setVisited(!0);!v.isEmpty();){var q=v.removeFirst();m.add(q),this.computeNodeDepth(q);for(var ne=q.getEdges().iterator();ne.hasNext();){var ve=ne.next().getSym();if(!ve.isVisited()){var De=ve.getNode();m.contains(De)||(v.addLast(De),m.add(De))}}}}},{key:"compareTo",value:function(E){var m=E;return this._rightMostCoord.x<m._rightMostCoord.x?-1:this._rightMostCoord.x>m._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var E=new Ke,m=this._dirEdgeList.iterator();m.hasNext();)for(var v=m.next().getEdge().getCoordinates(),T=0;T<v.length-1;T++)E.expandToInclude(v[T]);this._env=E}return this._env}},{key:"addReachable",value:function(E){var m=new br;for(m.add(E);!m.empty();){var v=m.pop();this.add(v,m)}}},{key:"copySymDepths",value:function(E){var m=E.getSym();m.setDepth(ht.LEFT,E.getDepth(ht.RIGHT)),m.setDepth(ht.RIGHT,E.getDepth(ht.LEFT))}},{key:"add",value:function(E,m){E.setVisited(!0),this._nodes.add(E);for(var v=E.getEdges().iterator();v.hasNext();){var T=v.next();this._dirEdgeList.add(T);var q=T.getSym().getNode();q.isVisited()||m.push(q)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new ct,this._nodes=new ct,this._rightMostCoord=null,this._env=null,this._finder=new Dt}}])})(),xr=(function(){return a((function E(){i(this,E)}),null,[{key:"intersection",value:function(E,m,v,T){var q=E.x<m.x?E.x:m.x,ne=E.y<m.y?E.y:m.y,ve=E.x>m.x?E.x:m.x,De=E.y>m.y?E.y:m.y,tt=v.x<T.x?v.x:T.x,dt=v.y<T.y?v.y:T.y,tr=v.x>T.x?v.x:T.x,ar=v.y>T.y?v.y:T.y,Fr=((q>tt?q:tt)+(ve<tr?ve:tr))/2,fn=((ne>dt?ne:dt)+(De<ar?De:ar))/2,Cn=E.x-Fr,Bn=E.y-fn,In=m.x-Fr,gn=m.y-fn,Ui=v.x-Fr,Ji=v.y-fn,Ha=T.x-Fr,va=T.y-fn,To=Bn-gn,As=In-Cn,il=Cn*gn-In*Bn,Nl=Ji-va,Fl=Ha-Ui,us=Ui*va-Ha*Ji,yl=To*Fl-Nl*As,vl=(As*us-Fl*il)/yl,oo=(Nl*il-To*us)/yl;return Se.isNaN(vl)||Se.isInfinite(vl)||Se.isNaN(oo)||Se.isInfinite(oo)?null:new Be(vl+Fr,oo+fn)}}])})(),_r=(function(){return a((function E(){i(this,E)}),null,[{key:"arraycopy",value:function(E,m,v,T,q){for(var ne=0,ve=m;ve<m+q;ve++)v[T+ne]=E[ve],ne++}},{key:"getProperty",value:function(E){return{"line.separator":`
`}[E]}}])})(),Nr=(function(){function E(){i(this,E)}return a(E,null,[{key:"log10",value:function(m){var v=Math.log(m);return Se.isInfinite(v)||Se.isNaN(v)?v:v/E.LOG_10}},{key:"min",value:function(m,v,T,q){var ne=m;return v<ne&&(ne=v),T<ne&&(ne=T),q<ne&&(ne=q),ne}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],v=arguments[1],T=arguments[2];return m<v?v:m>T?T:m}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var q=arguments[0],ne=arguments[1],ve=arguments[2];return q<ne?ne:q>ve?ve:q}}},{key:"wrap",value:function(m,v){return m<0?v- -m%v:m%v}},{key:"max",value:function(){if(arguments.length===3){var m=arguments[1],v=arguments[2],T=arguments[0];return m>T&&(T=m),v>T&&(T=v),T}if(arguments.length===4){var q=arguments[1],ne=arguments[2],ve=arguments[3],De=arguments[0];return q>De&&(De=q),ne>De&&(De=ne),ve>De&&(De=ve),De}}},{key:"average",value:function(m,v){return(m+v)/2}}])})();Nr.LOG_10=Math.log(10);var tn=(function(){function E(){i(this,E)}return a(E,null,[{key:"segmentToSegment",value:function(m,v,T,q){if(m.equals(v))return E.pointToSegment(m,T,q);if(T.equals(q))return E.pointToSegment(q,m,v);var ne=!1;if(Ke.intersects(m,v,T,q)){var ve=(v.x-m.x)*(q.y-T.y)-(v.y-m.y)*(q.x-T.x);if(ve===0)ne=!0;else{var De=(m.y-T.y)*(q.x-T.x)-(m.x-T.x)*(q.y-T.y),tt=((m.y-T.y)*(v.x-m.x)-(m.x-T.x)*(v.y-m.y))/ve,dt=De/ve;(dt<0||dt>1||tt<0||tt>1)&&(ne=!0)}}else ne=!0;return ne?Nr.min(E.pointToSegment(m,T,q),E.pointToSegment(v,T,q),E.pointToSegment(T,m,v),E.pointToSegment(q,m,v)):0}},{key:"pointToSegment",value:function(m,v,T){if(v.x===T.x&&v.y===T.y)return m.distance(v);var q=(T.x-v.x)*(T.x-v.x)+(T.y-v.y)*(T.y-v.y),ne=((m.x-v.x)*(T.x-v.x)+(m.y-v.y)*(T.y-v.y))/q;if(ne<=0)return m.distance(v);if(ne>=1)return m.distance(T);var ve=((v.y-m.y)*(T.x-v.x)-(v.x-m.x)*(T.y-v.y))/q;return Math.abs(ve)*Math.sqrt(q)}},{key:"pointToLinePerpendicular",value:function(m,v,T){var q=(T.x-v.x)*(T.x-v.x)+(T.y-v.y)*(T.y-v.y),ne=((v.y-m.y)*(T.x-v.x)-(v.x-m.x)*(T.y-v.y))/q;return Math.abs(ne)*Math.sqrt(q)}},{key:"pointToSegmentString",value:function(m,v){if(v.length===0)throw new $("Line array must contain at least one vertex");for(var T=m.distance(v[0]),q=0;q<v.length-1;q++){var ne=E.pointToSegment(m,v[q],v[q+1]);ne<T&&(T=ne)}return T}}])})(),Lr=(function(){return a((function E(){i(this,E)}),[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||yr(arguments[0],Ge);else if(arguments.length!==2){if(arguments.length===3){var E=arguments[0],m=arguments[1];return this.create(E,m)}}}}])})(),kt=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E){}}])})(),Hr=(function(){return a((function E(){i(this,E)}),null,[{key:"ofLine",value:function(E){var m=E.size();if(m<=1)return 0;var v=0,T=new Be;E.getCoordinate(0,T);for(var q=T.x,ne=T.y,ve=1;ve<m;ve++){E.getCoordinate(ve,T);var De=T.x,tt=T.y,dt=De-q,tr=tt-ne;v+=Math.sqrt(dt*dt+tr*tr),q=De,ne=tt}return v}}])})(),kn=a((function E(){i(this,E)})),Ur=(function(){function E(){i(this,E)}return a(E,null,[{key:"copyCoord",value:function(m,v,T,q){for(var ne=Math.min(m.getDimension(),T.getDimension()),ve=0;ve<ne;ve++)T.setOrdinate(q,ve,m.getOrdinate(v,ve))}},{key:"isRing",value:function(m){var v=m.size();return v===0||!(v<=3)&&m.getOrdinate(0,Ge.X)===m.getOrdinate(v-1,Ge.X)&&m.getOrdinate(0,Ge.Y)===m.getOrdinate(v-1,Ge.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(yr(arguments[0],Ge)&&Number.isInteger(arguments[1])){var m=arguments[0],v=arguments[1];E.scroll(m,v,E.isRing(m))}else if(yr(arguments[0],Ge)&&arguments[1]instanceof Be){var T=arguments[0],q=arguments[1],ne=E.indexOf(q,T);if(ne<=0)return null;E.scroll(T,ne)}}else if(arguments.length===3){var ve=arguments[0],De=arguments[1],tt=arguments[2];if(De<=0)return null;for(var dt=ve.copy(),tr=tt?ve.size()-1:ve.size(),ar=0;ar<tr;ar++)for(var Fr=0;Fr<ve.getDimension();Fr++)ve.setOrdinate(ar,Fr,dt.getOrdinate((De+ar)%tr,Fr));if(tt)for(var fn=0;fn<ve.getDimension();fn++)ve.setOrdinate(tr,fn,ve.getOrdinate(0,fn))}}},{key:"isEqual",value:function(m,v){var T=m.size();if(T!==v.size())return!1;for(var q=Math.min(m.getDimension(),v.getDimension()),ne=0;ne<T;ne++)for(var ve=0;ve<q;ve++){var De=m.getOrdinate(ne,ve),tt=v.getOrdinate(ne,ve);if(m.getOrdinate(ne,ve)!==v.getOrdinate(ne,ve)&&(!Se.isNaN(De)||!Se.isNaN(tt)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var m=arguments[0];return E.minCoordinateIndex(m,0,m.size()-1)}if(arguments.length===3){for(var v=arguments[0],T=arguments[2],q=-1,ne=null,ve=arguments[1];ve<=T;ve++){var De=v.getCoordinate(ve);(ne===null||ne.compareTo(De)>0)&&(ne=De,q=ve)}return q}}},{key:"extend",value:function(m,v,T){var q=m.create(T,v.getDimension()),ne=v.size();if(E.copy(v,0,q,0,ne),ne>0)for(var ve=ne;ve<T;ve++)E.copy(v,ne-1,q,ve,1);return q}},{key:"reverse",value:function(m){for(var v=m.size()-1,T=Math.trunc(v/2),q=0;q<=T;q++)E.swap(m,q,v-q)}},{key:"swap",value:function(m,v,T){if(v===T)return null;for(var q=0;q<m.getDimension();q++){var ne=m.getOrdinate(v,q);m.setOrdinate(v,q,m.getOrdinate(T,q)),m.setOrdinate(T,q,ne)}}},{key:"copy",value:function(m,v,T,q,ne){for(var ve=0;ve<ne;ve++)E.copyCoord(m,v+ve,T,q+ve)}},{key:"ensureValidRing",value:function(m,v){var T=v.size();return T===0?v:T<=3?E.createClosedRing(m,v,4):v.getOrdinate(0,Ge.X)===v.getOrdinate(T-1,Ge.X)&&v.getOrdinate(0,Ge.Y)===v.getOrdinate(T-1,Ge.Y)?v:E.createClosedRing(m,v,T+1)}},{key:"indexOf",value:function(m,v){for(var T=0;T<v.size();T++)if(m.x===v.getOrdinate(T,Ge.X)&&m.y===v.getOrdinate(T,Ge.Y))return T;return-1}},{key:"createClosedRing",value:function(m,v,T){var q=m.create(T,v.getDimension()),ne=v.size();E.copy(v,0,q,0,ne);for(var ve=ne;ve<T;ve++)E.copy(v,0,q,ve,1);return q}},{key:"minCoordinate",value:function(m){for(var v=null,T=0;T<m.size();T++){var q=m.getCoordinate(T);(v===null||v.compareTo(q)>0)&&(v=q)}return v}}])})(),rr=(function(){function E(){i(this,E)}return a(E,null,[{key:"toDimensionSymbol",value:function(m){switch(m){case E.FALSE:return E.SYM_FALSE;case E.TRUE:return E.SYM_TRUE;case E.DONTCARE:return E.SYM_DONTCARE;case E.P:return E.SYM_P;case E.L:return E.SYM_L;case E.A:return E.SYM_A}throw new $("Unknown dimension value: "+m)}},{key:"toDimensionValue",value:function(m){switch(Ae.toUpperCase(m)){case E.SYM_FALSE:return E.FALSE;case E.SYM_TRUE:return E.TRUE;case E.SYM_DONTCARE:return E.DONTCARE;case E.SYM_P:return E.P;case E.SYM_L:return E.L;case E.SYM_A:return E.A}throw new $("Unknown dimension symbol: "+m)}}])})();rr.P=0,rr.L=1,rr.A=2,rr.FALSE=-1,rr.TRUE=-2,rr.DONTCARE=-3,rr.SYM_FALSE="F",rr.SYM_TRUE="T",rr.SYM_DONTCARE="*",rr.SYM_P="0",rr.SYM_L="1",rr.SYM_A="2";var Jn=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E){}}])})(),en=(function(){return a((function E(){i(this,E)}),[{key:"filter",value:function(E,m){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])})(),Vn=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Ke:this._points.expandEnvelope(new Ke)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new m(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var v=arguments[0],T=arguments[1];if(!this.isEquivalentClass(v))return!1;var q=v;if(this._points.size()!==q._points.size())return!1;for(var ne=0;ne<this._points.size();ne++)if(!this.equal(this._points.getCoordinate(ne),q._points.getCoordinate(ne),T))return!1;return!0}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var v=0;v<Math.trunc(this._points.size()/2);v++){var T=this._points.size()-1-v;if(!this._points.getCoordinate(v).equals(this._points.getCoordinate(T))){if(this._points.getCoordinate(v).compareTo(this._points.getCoordinate(T))>0){var q=this._points.copy();Ur.reverse(q),this._points=q}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?rr.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var v=this._points.copy();return Ur.reverse(v),this.getFactory().createLineString(v)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return it.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Hr.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var v=arguments[0],T=0,q=0;T<this._points.size()&&q<v._points.size();){var ne=this._points.getCoordinate(T).compareTo(v._points.getCoordinate(q));if(ne!==0)return ne;T++,q++}return T<this._points.size()?1:q<v._points.size()?-1:0}if(arguments.length===2){var ve=arguments[0];return arguments[1].compare(this._points,ve._points)}}},{key:"apply",value:function(){if(yr(arguments[0],kt))for(var v=arguments[0],T=0;T<this._points.size();T++)v.filter(this._points.getCoordinate(T));else if(yr(arguments[0],en)){var q=arguments[0];if(this._points.size()===0)return null;for(var ne=0;ne<this._points.size()&&(q.filter(this._points,ne),!q.isDone());ne++);q.isGeometryChanged()&&this.geometryChanged()}else yr(arguments[0],Jn)?arguments[0].filter(this):yr(arguments[0],V)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new $e}},{key:"isEquivalentClass",value:function(v){return v instanceof m}},{key:"getCoordinateN",value:function(v){return this._points.getCoordinate(v)}},{key:"getGeometryType",value:function(){return it.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(v){if(v===null&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),v.size()===1)throw new $("Invalid number of points in LineString (found "+v.size()+" - must be 0 or >= 2)");this._points=v}},{key:"isCoordinate",value:function(v){for(var T=0;T<this._points.size();T++)if(this._points.getCoordinate(T).equals(v))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(v){return this.getFactory().createPoint(this._points.getCoordinate(v))}},{key:"interfaces_",get:function(){return[kn]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var v=arguments[0],T=arguments[1];it.constructor_.call(this,T),this.init(v)}}}}])})(it),Me=a((function E(){i(this,E)})),Ue=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Ke;var v=new Ke;return v.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),v}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new m(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var v=arguments[0],T=arguments[1];return!!this.isEquivalentClass(v)&&(!(!this.isEmpty()||!v.isEmpty())||this.isEmpty()===v.isEmpty()&&this.equal(v.getCoordinate(),this.getCoordinate(),T))}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return rr.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return it.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var v=arguments[0];return this.getCoordinate().compareTo(v.getCoordinate())}if(arguments.length===2){var T=arguments[0];return arguments[1].compare(this._coordinates,T._coordinates)}}},{key:"apply",value:function(){if(yr(arguments[0],kt)){var v=arguments[0];if(this.isEmpty())return null;v.filter(this.getCoordinate())}else if(yr(arguments[0],en)){var T=arguments[0];if(this.isEmpty())return null;T.filter(this._coordinates,0),T.isGeometryChanged()&&this.geometryChanged()}else yr(arguments[0],Jn)?arguments[0].filter(this):yr(arguments[0],V)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return it.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(v){v===null&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),we.isTrue(v.size()<=1),this._coordinates=v}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Me]}}],[{key:"constructor_",value:function(){this._coordinates=null;var v=arguments[0],T=arguments[1];it.constructor_.call(this,T),this.init(v)}}])})(it),Ct=(function(){function E(){i(this,E)}return a(E,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var m=arguments[0];return Math.abs(E.ofRingSigned(m))}if(yr(arguments[0],Ge)){var v=arguments[0];return Math.abs(E.ofRingSigned(v))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var m=arguments[0];if(m.length<3)return 0;for(var v=0,T=m[0].x,q=1;q<m.length-1;q++){var ne=m[q].x-T,ve=m[q+1].y;v+=ne*(m[q-1].y-ve)}return v/2}if(yr(arguments[0],Ge)){var De=arguments[0],tt=De.size();if(tt<3)return 0;var dt=new Be,tr=new Be,ar=new Be;De.getCoordinate(0,tr),De.getCoordinate(1,ar);var Fr=tr.x;ar.x-=Fr;for(var fn=0,Cn=1;Cn<tt-1;Cn++)dt.y=tr.y,tr.x=ar.x,tr.y=ar.y,De.getCoordinate(Cn+1,ar),ar.x-=Fr,fn+=tr.x*(dt.y-ar.y);return fn/2}}}])})(),Gt=(function(){return a((function E(){i(this,E)}),null,[{key:"sort",value:function(){var E=arguments,m=arguments[0];if(arguments.length===1)m.sort((function(Fr,fn){return Fr.compareTo(fn)}));else if(arguments.length===2)m.sort((function(Fr,fn){return E[1].compare(Fr,fn)}));else if(arguments.length===3){var v=m.slice(arguments[1],arguments[2]);v.sort();var T=m.slice(0,arguments[1]).concat(v,m.slice(arguments[2],m.length));m.splice(0,m.length);var q,ne=f(T);try{for(ne.s();!(q=ne.n()).done;){var ve=q.value;m.push(ve)}}catch(Fr){ne.e(Fr)}finally{ne.f()}}else if(arguments.length===4){var De=m.slice(arguments[1],arguments[2]);De.sort((function(Fr,fn){return E[3].compare(Fr,fn)}));var tt=m.slice(0,arguments[1]).concat(De,m.slice(arguments[2],m.length));m.splice(0,m.length);var dt,tr=f(tt);try{for(tr.s();!(dt=tr.n()).done;){var ar=dt.value;m.push(ar)}}catch(Fr){tr.e(Fr)}finally{tr.f()}}}},{key:"asList",value:function(E){var m,v=new ct,T=f(E);try{for(T.s();!(m=T.n()).done;){var q=m.value;v.add(q)}}catch(ne){T.e(ne)}finally{T.f()}return v}},{key:"copyOf",value:function(E,m){return E.slice(0,m)}}])})(),zt=a((function E(){i(this,E)})),qr=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var v=new Array(this.getNumPoints()).fill(null),T=-1,q=this._shell.getCoordinates(),ne=0;ne<q.length;ne++)v[++T]=q[ne];for(var ve=0;ve<this._holes.length;ve++)for(var De=this._holes[ve].getCoordinates(),tt=0;tt<De.length;tt++)v[++T]=De[tt];return v}},{key:"getArea",value:function(){var v=0;v+=Ct.ofRing(this._shell.getCoordinateSequence());for(var T=0;T<this._holes.length;T++)v-=Ct.ofRing(this._holes[T].getCoordinateSequence());return v}},{key:"copyInternal",value:function(){for(var v=this._shell.copy(),T=new Array(this._holes.length).fill(null),q=0;q<this._holes.length;q++)T[q]=this._holes[q].copy();return new m(v,T,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var v=this._shell.getCoordinateSequence(),T=this.getEnvelopeInternal(),q=0;q<5;q++){var ne=v.getX(q);if(ne!==T.getMinX()&&ne!==T.getMaxX())return!1;var ve=v.getY(q);if(ve!==T.getMinY()&&ve!==T.getMaxY())return!1}for(var De=v.getX(0),tt=v.getY(0),dt=1;dt<=4;dt++){var tr=v.getX(dt),ar=v.getY(dt);if(tr!==De==(ar!==tt))return!1;De=tr,tt=ar}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var v=arguments[0],T=arguments[1];if(!this.isEquivalentClass(v))return!1;var q=v,ne=this._shell,ve=q._shell;if(!ne.equalsExact(ve,T)||this._holes.length!==q._holes.length)return!1;for(var De=0;De<this._holes.length;De++)if(!this._holes[De].equalsExact(q._holes[De],T))return!1;return!0}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var v=0;v<this._holes.length;v++)this._holes[v]=this.normalized(this._holes[v],!1);Gt.sort(this._holes)}else if(arguments.length===2){var T=arguments[0],q=arguments[1];if(T.isEmpty())return null;var ne=T.getCoordinateSequence(),ve=Ur.minCoordinateIndex(ne,0,ne.size()-2);Ur.scroll(ne,ve,!0),He.isCCW(ne)===q&&Ur.reverse(ne)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var v=this.getExteriorRing().reverse(),T=new Array(this.getNumInteriorRing()).fill(null),q=0;q<T.length;q++)T[q]=this.getInteriorRingN(q).reverse();return this.getFactory().createPolygon(v,T)}},{key:"getTypeCode",value:function(){return it.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var v=0;v+=this._shell.getLength();for(var T=0;T<this._holes.length;T++)v+=this._holes[T].getLength();return v}},{key:"getNumPoints",value:function(){for(var v=this._shell.getNumPoints(),T=0;T<this._holes.length;T++)v+=this._holes[T].getNumPoints();return v}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(v,T){var q=v.copy();return this.normalize(q,T),q}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var v=arguments[0],T=this._shell,q=v._shell;return T.compareToSameClass(q)}if(arguments.length===2){var ne=arguments[1],ve=arguments[0],De=this._shell,tt=ve._shell,dt=De.compareToSameClass(tt,ne);if(dt!==0)return dt;for(var tr=this.getNumInteriorRing(),ar=ve.getNumInteriorRing(),Fr=0;Fr<tr&&Fr<ar;){var fn=this.getInteriorRingN(Fr),Cn=ve.getInteriorRingN(Fr),Bn=fn.compareToSameClass(Cn,ne);if(Bn!==0)return Bn;Fr++}return Fr<tr?1:Fr<ar?-1:0}}},{key:"apply",value:function(){if(yr(arguments[0],kt)){var v=arguments[0];this._shell.apply(v);for(var T=0;T<this._holes.length;T++)this._holes[T].apply(v)}else if(yr(arguments[0],en)){var q=arguments[0];if(this._shell.apply(q),!q.isDone())for(var ne=0;ne<this._holes.length&&(this._holes[ne].apply(q),!q.isDone());ne++);q.isGeometryChanged()&&this.geometryChanged()}else if(yr(arguments[0],Jn))arguments[0].filter(this);else if(yr(arguments[0],V)){var ve=arguments[0];ve.filter(this),this._shell.apply(ve);for(var De=0;De<this._holes.length;De++)this._holes[De].apply(ve)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var v=new Array(this._holes.length+1).fill(null);v[0]=this._shell;for(var T=0;T<this._holes.length;T++)v[T+1]=this._holes[T];return v.length<=1?this.getFactory().createLinearRing(v[0].getCoordinateSequence()):this.getFactory().createMultiLineString(v)}},{key:"getGeometryType",value:function(){return it.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(v){return this._holes[v]}},{key:"interfaces_",get:function(){return[zt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var v=arguments[0],T=arguments[1],q=arguments[2];if(it.constructor_.call(this,q),v===null&&(v=this.getFactory().createLinearRing()),T===null&&(T=[]),it.hasNullElements(T))throw new $("holes must not contain null elements");if(v.isEmpty()&&it.hasNonEmptyElements(T))throw new $("shell is empty but holes are not");this._shell=v,this._holes=T}}])})(it),En=(function(E){function m(){return i(this,m),n(this,m,arguments)}return b(m,E),a(m)})(Zt),Pi=(function(E){function m(v){var T;return i(this,m),(T=n(this,m)).array=[],v instanceof Nt&&T.addAll(v),T}return b(m,E),a(m,[{key:"contains",value:function(v){var T,q=f(this.array);try{for(q.s();!(T=q.n()).done;)if(T.value.compareTo(v)===0)return!0}catch(ne){q.e(ne)}finally{q.f()}return!1}},{key:"add",value:function(v){if(this.contains(v))return!1;for(var T=0,q=this.array.length;T<q;T++)if(this.array[T].compareTo(v)===1)return!!this.array.splice(T,0,v);return this.array.push(v),!0}},{key:"addAll",value:function(v){var T,q=f(v);try{for(q.s();!(T=q.n()).done;){var ne=T.value;this.add(ne)}}catch(ve){q.e(ve)}finally{q.f()}return!0}},{key:"remove",value:function(){throw new $e}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new gi(this.array)}}])})(En),gi=(function(){return a((function E(m){i(this,E),this.array=m,this.position=0}),[{key:"next",value:function(){if(this.position===this.array.length)throw new st;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new $e}}])})(),kr=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"computeEnvelopeInternal",value:function(){for(var v=new Ke,T=0;T<this._geometries.length;T++)v.expandToInclude(this._geometries[T].getEnvelopeInternal());return v}},{key:"getGeometryN",value:function(v){return this._geometries[v]}},{key:"getCoordinates",value:function(){for(var v=new Array(this.getNumPoints()).fill(null),T=-1,q=0;q<this._geometries.length;q++)for(var ne=this._geometries[q].getCoordinates(),ve=0;ve<ne.length;ve++)v[++T]=ne[ve];return v}},{key:"getArea",value:function(){for(var v=0,T=0;T<this._geometries.length;T++)v+=this._geometries[T].getArea();return v}},{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),T=0;T<v.length;T++)v[T]=this._geometries[T].copy();return new m(v,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var v=arguments[0],T=arguments[1];if(!this.isEquivalentClass(v))return!1;var q=v;if(this._geometries.length!==q._geometries.length)return!1;for(var ne=0;ne<this._geometries.length;ne++)if(!this._geometries[ne].equalsExact(q._geometries[ne],T))return!1;return!0}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var v=0;v<this._geometries.length;v++)this._geometries[v].normalize();Gt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var v=rr.FALSE,T=0;T<this._geometries.length;T++)v=Math.max(v,this._geometries[T].getBoundaryDimension());return v}},{key:"reverseInternal",value:function(){for(var v=this._geometries.length,T=new ct(v),q=0;q<v;q++)T.add(this._geometries[q].reverse());return this.getFactory().buildGeometry(T)}},{key:"getTypeCode",value:function(){return it.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var v=rr.FALSE,T=0;T<this._geometries.length;T++)v=Math.max(v,this._geometries[T].getDimension());return v}},{key:"getLength",value:function(){for(var v=0,T=0;T<this._geometries.length;T++)v+=this._geometries[T].getLength();return v}},{key:"getNumPoints",value:function(){for(var v=0,T=0;T<this._geometries.length;T++)v+=this._geometries[T].getNumPoints();return v}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var v=arguments[0],T=new Pi(Gt.asList(this._geometries)),q=new Pi(Gt.asList(v._geometries));return this.compare(T,q)}if(arguments.length===2){for(var ne=arguments[1],ve=arguments[0],De=this.getNumGeometries(),tt=ve.getNumGeometries(),dt=0;dt<De&&dt<tt;){var tr=this.getGeometryN(dt),ar=ve.getGeometryN(dt),Fr=tr.compareToSameClass(ar,ne);if(Fr!==0)return Fr;dt++}return dt<De?1:dt<tt?-1:0}}},{key:"apply",value:function(){if(yr(arguments[0],kt))for(var v=arguments[0],T=0;T<this._geometries.length;T++)this._geometries[T].apply(v);else if(yr(arguments[0],en)){var q=arguments[0];if(this._geometries.length===0)return null;for(var ne=0;ne<this._geometries.length&&(this._geometries[ne].apply(q),!q.isDone());ne++);q.isGeometryChanged()&&this.geometryChanged()}else if(yr(arguments[0],Jn)){var ve=arguments[0];ve.filter(this);for(var De=0;De<this._geometries.length;De++)this._geometries[De].apply(ve)}else if(yr(arguments[0],V)){var tt=arguments[0];tt.filter(this);for(var dt=0;dt<this._geometries.length;dt++)this._geometries[dt].apply(tt)}}},{key:"getBoundary",value:function(){return it.checkNotGeometryCollection(this),we.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return it.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var v=arguments[0],T=arguments[1];if(it.constructor_.call(this,T),v===null&&(v=[]),it.hasNullElements(v))throw new $("geometries must not contain null elements");this._geometries=v}}}}])})(it),Sn=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),T=0;T<v.length;T++)v[T]=this._geometries[T].copy();return new m(v,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var v=arguments[0],T=arguments[1];return!!this.isEquivalentClass(v)&&P(m,"equalsExact",this,1).call(this,v,T)}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var v=arguments[0];return this._geometries[v].getCoordinate()}return P(m,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return rr.FALSE}},{key:"getTypeCode",value:function(){return it.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return it.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Me]}}],[{key:"constructor_",value:function(){var v=arguments[0],T=arguments[1];kr.constructor_.call(this,v,T)}}])})(kr),Pn=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"copyInternal",value:function(){return new m(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return rr.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||P(m,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var v=this._points.copy();return Ur.reverse(v),this.getFactory().createLinearRing(v)}},{key:"getTypeCode",value:function(){return it.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!P(m,"isClosed",this,1).call(this))throw new $("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<m.MINIMUM_VALID_SIZE)throw new $("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return it.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var v=arguments[0],T=arguments[1];Vn.constructor_.call(this,v,T),this.validateConstruction()}}])})(Vn);Pn.MINIMUM_VALID_SIZE=4;var Un=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"setOrdinate",value:function(v,T){switch(v){case m.X:this.x=T;break;case m.Y:this.y=T;break;default:throw new $("Invalid ordinate index: "+v)}}},{key:"getZ",value:function(){return Be.NULL_ORDINATE}},{key:"getOrdinate",value:function(v){switch(v){case m.X:return this.x;case m.Y:return this.y}throw new $("Invalid ordinate index: "+v)}},{key:"setZ",value:function(v){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(v){this.x=v.x,this.y=v.y,this.z=v.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)Be.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof m){var v=arguments[0];Be.constructor_.call(this,v.x,v.y)}else if(arguments[0]instanceof Be){var T=arguments[0];Be.constructor_.call(this,T.x,T.y)}}else if(arguments.length===2){var q=arguments[0],ne=arguments[1];Be.constructor_.call(this,q,ne,Be.NULL_ORDINATE)}}}])})(Be);Un.X=0,Un.Y=1,Un.Z=-1,Un.M=-1;var Ki=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(v,T){switch(v){case m.X:this.x=T;break;case m.Y:this.y=T;break;case m.M:this._m=T;break;default:throw new $("Invalid ordinate index: "+v)}}},{key:"setM",value:function(v){this._m=v}},{key:"getZ",value:function(){return Be.NULL_ORDINATE}},{key:"getOrdinate",value:function(v){switch(v){case m.X:return this.x;case m.Y:return this.y;case m.M:return this._m}throw new $("Invalid ordinate index: "+v)}},{key:"setZ",value:function(v){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(v){this.x=v.x,this.y=v.y,this.z=v.getZ(),this._m=v.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Be.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof m){var v=arguments[0];Be.constructor_.call(this,v.x,v.y),this._m=v._m}else if(arguments[0]instanceof Be){var T=arguments[0];Be.constructor_.call(this,T.x,T.y),this._m=this.getM()}}else if(arguments.length===3){var q=arguments[0],ne=arguments[1],ve=arguments[2];Be.constructor_.call(this,q,ne,Be.NULL_ORDINATE),this._m=ve}}}])})(Be);Ki.X=0,Ki.Y=1,Ki.Z=-1,Ki.M=2;var ea=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(v,T){switch(v){case Be.X:this.x=T;break;case Be.Y:this.y=T;break;case Be.Z:this.z=T;break;case Be.M:this._m=T;break;default:throw new $("Invalid ordinate index: "+v)}}},{key:"setM",value:function(v){this._m=v}},{key:"getOrdinate",value:function(v){switch(v){case Be.X:return this.x;case Be.Y:return this.y;case Be.Z:return this.getZ();case Be.M:return this.getM()}throw new $("Invalid ordinate index: "+v)}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(v){this.x=v.x,this.y=v.y,this.z=v.getZ(),this._m=v.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Be.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof m){var v=arguments[0];Be.constructor_.call(this,v),this._m=v._m}else if(arguments[0]instanceof Be){var T=arguments[0];Be.constructor_.call(this,T),this._m=this.getM()}}else if(arguments.length===4){var q=arguments[0],ne=arguments[1],ve=arguments[2],De=arguments[3];Be.constructor_.call(this,q,ne,ve),this._m=De}}}])})(Be),An=(function(){function E(){i(this,E)}return a(E,null,[{key:"measures",value:function(m){return m instanceof Un?0:m instanceof Ki||m instanceof ea?1:0}},{key:"dimension",value:function(m){return m instanceof Un?2:m instanceof Ki?3:m instanceof ea?4:3}},{key:"create",value:function(){if(arguments.length===1){var m=arguments[0];return E.create(m,0)}if(arguments.length===2){var v=arguments[0],T=arguments[1];return v===2?new Un:v===3&&T===0?new Be:v===3&&T===1?new Ki:v===4&&T===1?new ea:new Be}}}])})(),Ca=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"getCoordinate",value:function(v){return this.get(v)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&yr(arguments[0],Nt)){for(var v=arguments[1],T=!1,q=arguments[0].iterator();q.hasNext();)this.add(q.next(),v),T=!0;return T}return P(m,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var v=P(m,"clone",this,1).call(this),T=0;T<this.size();T++)v.add(T,this.get(T).clone());return v}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(m.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(m.coordArrayType);for(var v=this.size(),T=new Array(v).fill(null),q=0;q<v;q++)T[q]=this.get(v-q-1);return T}}},{key:"add",value:function(){if(arguments.length===1){var v=arguments[0];return P(m,"add",this,1).call(this,v)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var T=arguments[0],q=arguments[1];return this.add(T,q,!0),!0}if(arguments[0]instanceof Be&&typeof arguments[1]=="boolean"){var ne=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(ne))return null;P(m,"add",this,1).call(this,ne)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var ve=arguments[0],De=arguments[1];return this.add(ve,De),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var tt=arguments[0],dt=arguments[1];if(arguments[2])for(var tr=0;tr<tt.length;tr++)this.add(tt[tr],dt);else for(var ar=tt.length-1;ar>=0;ar--)this.add(tt[ar],dt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Be){var Fr=arguments[0],fn=arguments[1];if(!arguments[2]){var Cn=this.size();if(Cn>0&&(Fr>0&&this.get(Fr-1).equals2D(fn)||Fr<Cn&&this.get(Fr).equals2D(fn)))return null}P(m,"add",this,1).call(this,Fr,fn)}}else if(arguments.length===4){var Bn=arguments[0],In=arguments[1],gn=arguments[2],Ui=arguments[3],Ji=1;gn>Ui&&(Ji=-1);for(var Ha=gn;Ha!==Ui;Ha+=Ji)this.add(Bn[Ha],In);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var v=this.get(0).copy();this.add(v,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var v=arguments[0];this.ensureCapacity(v.length),this.add(v,!0)}else if(arguments.length===2){var T=arguments[0],q=arguments[1];this.ensureCapacity(T.length),this.add(T,q)}}}}])})(ct);Ca.coordArrayType=new Array(0).fill(null);var Ni=(function(){function E(){i(this,E)}return a(E,null,[{key:"isRing",value:function(m){return!(m.length<4)&&!!m[0].equals2D(m[m.length-1])}},{key:"ptNotInList",value:function(m,v){for(var T=0;T<m.length;T++){var q=m[T];if(E.indexOf(q,v)<0)return q}return null}},{key:"scroll",value:function(m,v){var T=E.indexOf(v,m);if(T<0)return null;var q=new Array(m.length).fill(null);_r.arraycopy(m,T,q,0,m.length-T),_r.arraycopy(m,0,q,m.length-T,T),_r.arraycopy(q,0,m,0,m.length)}},{key:"equals",value:function(){if(arguments.length===2){var m=arguments[0],v=arguments[1];if(m===v)return!0;if(m===null||v===null||m.length!==v.length)return!1;for(var T=0;T<m.length;T++)if(!m[T].equals(v[T]))return!1;return!0}if(arguments.length===3){var q=arguments[0],ne=arguments[1],ve=arguments[2];if(q===ne)return!0;if(q===null||ne===null||q.length!==ne.length)return!1;for(var De=0;De<q.length;De++)if(ve.compare(q[De],ne[De])!==0)return!1;return!0}}},{key:"intersection",value:function(m,v){for(var T=new Ca,q=0;q<m.length;q++)v.intersects(m[q])&&T.add(m[q],!0);return T.toCoordinateArray()}},{key:"measures",value:function(m){if(m===null||m.length===0)return 0;var v,T=0,q=f(m);try{for(q.s();!(v=q.n()).done;){var ne=v.value;T=Math.max(T,An.measures(ne))}}catch(ve){q.e(ve)}finally{q.f()}return T}},{key:"hasRepeatedPoints",value:function(m){for(var v=1;v<m.length;v++)if(m[v-1].equals(m[v]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(m){return E.hasRepeatedPoints(m)?new Ca(m,!1).toCoordinateArray():m}},{key:"reverse",value:function(m){for(var v=m.length-1,T=Math.trunc(v/2),q=0;q<=T;q++){var ne=m[q];m[q]=m[v-q],m[v-q]=ne}}},{key:"removeNull",value:function(m){for(var v=0,T=0;T<m.length;T++)m[T]!==null&&v++;var q=new Array(v).fill(null);if(v===0)return q;for(var ne=0,ve=0;ve<m.length;ve++)m[ve]!==null&&(q[ne++]=m[ve]);return q}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var m=arguments[0],v=new Array(m.length).fill(null),T=0;T<m.length;T++)v[T]=m[T].copy();return v}if(arguments.length===5)for(var q=arguments[0],ne=arguments[1],ve=arguments[2],De=arguments[3],tt=arguments[4],dt=0;dt<tt;dt++)ve[De+dt]=q[ne+dt].copy()}},{key:"isEqualReversed",value:function(m,v){for(var T=0;T<m.length;T++){var q=m[T],ne=v[m.length-T-1];if(q.compareTo(ne)!==0)return!1}return!0}},{key:"envelope",value:function(m){for(var v=new Ke,T=0;T<m.length;T++)v.expandToInclude(m[T]);return v}},{key:"toCoordinateArray",value:function(m){return m.toArray(E.coordArrayType)}},{key:"dimension",value:function(m){if(m===null||m.length===0)return 3;var v,T=0,q=f(m);try{for(q.s();!(v=q.n()).done;){var ne=v.value;T=Math.max(T,An.dimension(ne))}}catch(ve){q.e(ve)}finally{q.f()}return T}},{key:"atLeastNCoordinatesOrNothing",value:function(m,v){return v.length>=m?v:[]}},{key:"indexOf",value:function(m,v){for(var T=0;T<v.length;T++)if(m.equals(v[T]))return T;return-1}},{key:"increasingDirection",value:function(m){for(var v=0;v<Math.trunc(m.length/2);v++){var T=m.length-1-v,q=m[v].compareTo(m[T]);if(q!==0)return q}return 1}},{key:"compare",value:function(m,v){for(var T=0;T<m.length&&T<v.length;){var q=m[T].compareTo(v[T]);if(q!==0)return q;T++}return T<v.length?-1:T<m.length?1:0}},{key:"minCoordinate",value:function(m){for(var v=null,T=0;T<m.length;T++)(v===null||v.compareTo(m[T])>0)&&(v=m[T]);return v}},{key:"extract",value:function(m,v,T){v=Nr.clamp(v,0,m.length);var q=(T=Nr.clamp(T,-1,m.length))-v+1;T<0&&(q=0),v>=m.length&&(q=0),T<v&&(q=0);var ne=new Array(q).fill(null);if(q===0)return ne;for(var ve=0,De=v;De<=T;De++)ne[ve++]=m[De];return ne}}])})(),Ho=(function(){return a((function E(){i(this,E)}),[{key:"compare",value:function(E,m){var v=E,T=m;return Ni.compare(v,T)}},{key:"interfaces_",get:function(){return[Re]}}])})(),pa=(function(){return a((function E(){i(this,E)}),[{key:"compare",value:function(E,m){var v=E,T=m;if(v.length<T.length)return-1;if(v.length>T.length)return 1;if(v.length===0)return 0;var q=Ni.compare(v,T);return Ni.isEqualReversed(v,T)?0:q}},{key:"OLDcompare",value:function(E,m){var v=E,T=m;if(v.length<T.length)return-1;if(v.length>T.length)return 1;if(v.length===0)return 0;for(var q=Ni.increasingDirection(v),ne=Ni.increasingDirection(T),ve=q>0?0:v.length-1,De=ne>0?0:v.length-1,tt=0;tt<v.length;tt++){var dt=v[ve].compareTo(T[De]);if(dt!==0)return dt;ve+=q,De+=ne}return 0}},{key:"interfaces_",get:function(){return[Re]}}])})();Ni.ForwardComparator=Ho,Ni.BidirectionalComparator=pa,Ni.coordArrayType=new Array(0).fill(null);var mo=(function(){return a((function E(m){i(this,E),this.str=m}),[{key:"append",value:function(E){this.str+=E}},{key:"setCharAt",value:function(E,m){this.str=this.str.substr(0,E)+m+this.str.substr(E+1)}},{key:"toString",value:function(){return this.str}}])})(),Oa=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getM",value:function(m){return this.hasM()?this._coordinates[m].getM():Se.NaN}},{key:"setOrdinate",value:function(m,v,T){switch(v){case Ge.X:this._coordinates[m].x=T;break;case Ge.Y:this._coordinates[m].y=T;break;default:this._coordinates[m].setOrdinate(v,T)}}},{key:"getZ",value:function(m){return this.hasZ()?this._coordinates[m].getZ():Se.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(m,v){switch(v){case Ge.X:return this._coordinates[m].x;case Ge.Y:return this._coordinates[m].y;default:return this._coordinates[m].getOrdinate(v)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var m=arguments[0];return this._coordinates[m]}if(arguments.length===2){var v=arguments[0];arguments[1].setCoordinate(this._coordinates[v])}}},{key:"getCoordinateCopy",value:function(m){var v=this.createCoordinate();return v.setCoordinate(this._coordinates[m]),v}},{key:"createCoordinate",value:function(){return An.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(m){return this._coordinates[m].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(m){for(var v=0;v<this._coordinates.length;v++)m.expandToInclude(this._coordinates[v]);return m}},{key:"copy",value:function(){for(var m=new Array(this.size()).fill(null),v=0;v<this._coordinates.length;v++){var T=this.createCoordinate();T.setCoordinate(this._coordinates[v]),m[v]=T}return new E(m,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var m=new mo(17*this._coordinates.length);m.append("("),m.append(this._coordinates[0]);for(var v=1;v<this._coordinates.length;v++)m.append(", "),m.append(this._coordinates[v]);return m.append(")"),m.toString()}return"()"}},{key:"getY",value:function(m){return this._coordinates[m].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[Ge,Z]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];E.constructor_.call(this,m,Ni.dimension(m),Ni.measures(m))}else if(Number.isInteger(arguments[0])){var v=arguments[0];this._coordinates=new Array(v).fill(null);for(var T=0;T<v;T++)this._coordinates[T]=new Be}else if(yr(arguments[0],Ge)){var q=arguments[0];if(q===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=q.getDimension(),this._measures=q.getMeasures(),this._coordinates=new Array(q.size()).fill(null);for(var ne=0;ne<this._coordinates.length;ne++)this._coordinates[ne]=q.getCoordinateCopy(ne)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ve=arguments[0],De=arguments[1];E.constructor_.call(this,ve,De,Ni.measures(ve))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var tt=arguments[0],dt=arguments[1];this._coordinates=new Array(tt).fill(null),this._dimension=dt;for(var tr=0;tr<tt;tr++)this._coordinates[tr]=An.create(dt)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ar=arguments[0],Fr=arguments[1],fn=arguments[2];this._dimension=Fr,this._measures=fn,this._coordinates=ar===null?new Array(0).fill(null):ar}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Cn=arguments[0],Bn=arguments[1],In=arguments[2];this._coordinates=new Array(Cn).fill(null),this._dimension=Bn,this._measures=In;for(var gn=0;gn<Cn;gn++)this._coordinates[gn]=this.createCoordinate()}}}}])})(),zs=(function(){function E(){i(this,E)}return a(E,[{key:"readResolve",value:function(){return E.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Oa(arguments[0]);if(yr(arguments[0],Ge))return new Oa(arguments[0])}else{if(arguments.length===2){var m=arguments[1];return m>3&&(m=3),m<2&&(m=2),new Oa(arguments[0],m)}if(arguments.length===3){var v=arguments[2],T=arguments[1]-v;return v>1&&(v=1),T>3&&(T=3),T<2&&(T=2),new Oa(arguments[0],T+v,v)}}}},{key:"interfaces_",get:function(){return[Lr,Z]}}],[{key:"instance",value:function(){return E.instanceObject}}])})();zs.instanceObject=new zs;var fi=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),T=0;T<v.length;T++)v[T]=this._geometries[T].copy();return new m(v,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var v=arguments[0],T=arguments[1];return!!this.isEquivalentClass(v)&&P(m,"equalsExact",this,1).call(this,v,T)}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return it.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var v=new ct,T=0;T<this._geometries.length;T++)for(var q=this._geometries[T].getBoundary(),ne=0;ne<q.getNumGeometries();ne++)v.add(q.getGeometryN(ne));var ve=new Array(v.size()).fill(null);return this.getFactory().createMultiLineString(v.toArray(ve))}},{key:"getGeometryType",value:function(){return it.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[zt]}}],[{key:"constructor_",value:function(){var v=arguments[0],T=arguments[1];kr.constructor_.call(this,v,T)}}])})(kr),Ai=(function(){return a((function E(){i(this,E)}),[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])})(),Ql=(function(E){function m(){var v;return i(this,m),(v=n(this,m)).map=new Map,v}return b(m,E),a(m,[{key:"get",value:function(v){return this.map.get(v)||null}},{key:"put",value:function(v,T){return this.map.set(v,T),T}},{key:"values",value:function(){for(var v=new ct,T=this.map.values(),q=T.next();!q.done;)v.add(q.value),q=T.next();return v}},{key:"entrySet",value:function(){var v=new $t;return this.map.entries().forEach((function(T){return v.add(T)})),v}},{key:"size",value:function(){return this.map.size()}}])})(Ai),na=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"equals",value:function(m){if(!(m instanceof E))return!1;var v=m;return this._modelType===v._modelType&&this._scale===v._scale}},{key:"compareTo",value:function(m){var v=m,T=this.getMaximumSignificantDigits(),q=v.getMaximumSignificantDigits();return at.compare(T,q)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===E.FLOATING||this._modelType===E.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var m="UNKNOWN";return this._modelType===E.FLOATING?m="Floating":this._modelType===E.FLOATING_SINGLE?m="Floating-Single":this._modelType===E.FIXED&&(m="Fixed (Scale="+this.getScale()+")"),m}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var m=arguments[0];return Se.isNaN(m)||this._modelType===E.FLOATING_SINGLE?m:this._modelType===E.FIXED?Math.round(m*this._scale)/this._scale:m}if(arguments[0]instanceof Be){var v=arguments[0];if(this._modelType===E.FLOATING)return null;v.x=this.makePrecise(v.x),v.y=this.makePrecise(v.y)}}},{key:"getMaximumSignificantDigits",value:function(){var m=16;return this._modelType===E.FLOATING?m=16:this._modelType===E.FLOATING_SINGLE?m=6:this._modelType===E.FIXED&&(m=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),m}},{key:"setScale",value:function(m){this._scale=Math.abs(m)}},{key:"interfaces_",get:function(){return[Z,U]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=E.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Na){var m=arguments[0];this._modelType=m,m===E.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var v=arguments[0];this._modelType=E.FIXED,this.setScale(v)}else if(arguments[0]instanceof E){var T=arguments[0];this._modelType=T._modelType,this._scale=T._scale}}}},{key:"mostPrecise",value:function(m,v){return m.compareTo(v)>=0?m:v}}])})(),Na=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"readResolve",value:function(){return E.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[Z]}}],[{key:"constructor_",value:function(){this._name=null;var m=arguments[0];this._name=m,E.nameToTypeMap.put(m,this)}}])})();Na.nameToTypeMap=new Ql,na.Type=Na,na.FIXED=new Na("FIXED"),na.FLOATING=new Na("FLOATING"),na.FLOATING_SINGLE=new Na("FLOATING SINGLE"),na.maximumPreciseValue=9007199254740992;var Wo=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"copyInternal",value:function(){for(var v=new Array(this._geometries.length).fill(null),T=0;T<v.length;T++)v[T]=this._geometries[T].copy();return new m(v,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var v=arguments[0],T=arguments[1];return!!this.isEquivalentClass(v)&&P(m,"equalsExact",this,1).call(this,v,T)}return P(m,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?rr.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return it.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new $e}},{key:"getGeometryType",value:function(){return it.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[kn]}}],[{key:"constructor_",value:function(){var v=arguments[0],T=arguments[1];kr.constructor_.call(this,v,T)}}])})(kr),ma=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"createEmpty",value:function(m){switch(m){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new $("Invalid dimension: "+m)}}},{key:"toGeometry",value:function(m){return m.isNull()?this.createPoint():m.getMinX()===m.getMaxX()&&m.getMinY()===m.getMaxY()?this.createPoint(new Be(m.getMinX(),m.getMinY())):m.getMinX()===m.getMaxX()||m.getMinY()===m.getMaxY()?this.createLineString([new Be(m.getMinX(),m.getMinY()),new Be(m.getMaxX(),m.getMaxY())]):this.createPolygon(this.createLinearRing([new Be(m.getMinX(),m.getMinY()),new Be(m.getMinX(),m.getMaxY()),new Be(m.getMaxX(),m.getMaxY()),new Be(m.getMaxX(),m.getMinY()),new Be(m.getMinX(),m.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];return this.createLineString(m!==null?this.getCoordinateSequenceFactory().create(m):null)}if(yr(arguments[0],Ge))return new Vn(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new Wo(null,this):arguments.length===1?new Wo(arguments[0],this):void 0}},{key:"buildGeometry",value:function(m){for(var v=null,T=!1,q=!1,ne=m.iterator();ne.hasNext();){var ve=ne.next(),De=ve.getTypeCode();v===null&&(v=De),De!==v&&(T=!0),ve instanceof kr&&(q=!0)}if(v===null)return this.createGeometryCollection();if(T||q)return this.createGeometryCollection(E.toGeometryArray(m));var tt=m.iterator().next();if(m.size()>1){if(tt instanceof qr)return this.createMultiPolygon(E.toPolygonArray(m));if(tt instanceof Vn)return this.createMultiLineString(E.toLineStringArray(m));if(tt instanceof Ue)return this.createMultiPoint(E.toPointArray(m));we.shouldNeverReachHere("Unhandled geometry type: "+tt.getGeometryType())}return tt}},{key:"createMultiPointFromCoords",value:function(m){return this.createMultiPoint(m!==null?this.getCoordinateSequenceFactory().create(m):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Be){var m=arguments[0];return this.createPoint(m!==null?this.getCoordinateSequenceFactory().create([m]):null)}if(yr(arguments[0],Ge))return new Ue(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(yr(arguments[0],Ge)){var m=arguments[0];return this.createPolygon(this.createLinearRing(m))}if(arguments[0]instanceof Array){var v=arguments[0];return this.createPolygon(this.createLinearRing(v))}if(arguments[0]instanceof Pn){var T=arguments[0];return this.createPolygon(T,null)}}else if(arguments.length===2)return new qr(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new kr(null,this):arguments.length===1?new kr(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];return this.createLinearRing(m!==null?this.getCoordinateSequenceFactory().create(m):null)}if(yr(arguments[0],Ge))return new Pn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new fi(null,this):arguments.length===1?new fi(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Sn(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Sn(arguments[0],this);if(yr(arguments[0],Ge)){var m=arguments[0];if(m===null)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(m.size()).fill(null),T=0;T<m.size();T++){var q=this.getCoordinateSequenceFactory().create(1,m.getDimension(),m.getMeasures());Ur.copy(m,T,q,0,1),v[T]=this.createPoint(q)}return this.createMultiPoint(v)}}}},{key:"interfaces_",get:function(){return[Z]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)E.constructor_.call(this,new na,0);else if(arguments.length===1){if(yr(arguments[0],Lr)){var m=arguments[0];E.constructor_.call(this,new na,0,m)}else if(arguments[0]instanceof na){var v=arguments[0];E.constructor_.call(this,v,0,E.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];E.constructor_.call(this,T,q,E.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var ne=arguments[0],ve=arguments[1],De=arguments[2];this._precisionModel=ne,this._coordinateSequenceFactory=De,this._SRID=ve}}},{key:"toMultiPolygonArray",value:function(m){var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"toGeometryArray",value:function(m){if(m===null)return null;var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return zs.instance()}},{key:"toMultiLineStringArray",value:function(m){var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"toLineStringArray",value:function(m){var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"toMultiPointArray",value:function(m){var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"toLinearRingArray",value:function(m){var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"toPointArray",value:function(m){var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"toPolygonArray",value:function(m){var v=new Array(m.size()).fill(null);return m.toArray(v)}},{key:"createPointFromInternalCoord",value:function(m,v){return v.getPrecisionModel().makePrecise(m),v.getFactory().createPoint(m)}}])})(),Xo="XY",fl="XYZ",Ea="XYM",oa="XYZM",qu={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},js="EMPTY",No=1,Ua=2,Fo=3,Ta=4,bs=5,ac=6;for(var eu in qu)qu[eu].toUpperCase();var Q=(function(){return a((function E(m){i(this,E),this.wkt=m,this.index_=-1}),[{key:"isAlpha_",value:function(E){return E>="a"&&E<="z"||E>="A"&&E<="Z"}},{key:"isNumeric_",value:function(E,m){return E>="0"&&E<="9"||E=="."&&!(m!==void 0&&m)}},{key:"isWhiteSpace_",value:function(E){return E==" "||E=="	"||E=="\r"||E==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var E,m=this.nextChar_(),v=this.index_,T=m;if(m=="(")E=Ua;else if(m==",")E=bs;else if(m==")")E=Fo;else if(this.isNumeric_(m)||m=="-")E=Ta,T=this.readNumber_();else if(this.isAlpha_(m))E=No,T=this.readText_();else{if(this.isWhiteSpace_(m))return this.nextToken();if(m!=="")throw new Error("Unexpected character: "+m);E=ac}return{position:v,value:T,type:E}}},{key:"readNumber_",value:function(){var E,m=this.index_,v=!1,T=!1;do E=="."?v=!0:E!="e"&&E!="E"||(T=!0),E=this.nextChar_();while(this.isNumeric_(E,v)||!T&&(E=="e"||E=="E")||T&&(E=="-"||E=="+"));return parseFloat(this.wkt.substring(m,this.index_--))}},{key:"readText_",value:function(){var E,m=this.index_;do E=this.nextChar_();while(this.isAlpha_(E));return this.wkt.substring(m,this.index_--).toUpperCase()}}])})(),me=(function(){return a((function E(m,v){i(this,E),this.lexer_=m,this.token_,this.layout_=Xo,this.factory=v}),[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(E){return this.token_.type==E}},{key:"match",value:function(E){var m=this.isTokenType(E);return m&&this.consume_(),m}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var E=Xo,m=this.token_;if(this.isTokenType(No)){var v=m.value;v==="Z"?E=fl:v==="M"?E=Ea:v==="ZM"&&(E=oa),E!==Xo&&this.consume_()}return E}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Ua)){var E=[];do E.push(this.parseGeometry_());while(this.match(bs));if(this.match(Fo))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Ua)){var E=this.parsePoint_();if(this.match(Fo))return E}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Ua)){var E=this.parsePointList_();if(this.match(Fo))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Ua)){var E=this.parseLineStringTextList_();if(this.match(Fo))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var E;if(this.match(Ua)){if(E=this.token_.type==Ua?this.parsePointTextList_():this.parsePointList_(),this.match(Fo))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Ua)){var E=this.parseLineStringTextList_();if(this.match(Fo))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Ua)){var E=this.parsePolygonTextList_();if(this.match(Fo))return E}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var E=[],m=this.layout_.length,v=0;v<m;++v){var T=this.token_;if(!this.match(Ta))break;E.push(T.value)}if(E.length==m)return E;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var E=[this.parsePoint_()];this.match(bs);)E.push(this.parsePoint_());return E}},{key:"parsePointTextList_",value:function(){for(var E=[this.parsePointText_()];this.match(bs);)E.push(this.parsePointText_());return E}},{key:"parseLineStringTextList_",value:function(){for(var E=[this.parseLineStringText_()];this.match(bs);)E.push(this.parseLineStringText_());return E}},{key:"parsePolygonTextList_",value:function(){for(var E=[this.parsePolygonText_()];this.match(bs);)E.push(this.parsePolygonText_());return E}},{key:"isEmptyGeometry_",value:function(){var E=this.isTokenType(No)&&this.token_.value==js;return E&&this.consume_(),E}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var E=this.factory,m=function(Bn){return o(Be,k(Bn))},v=function(Bn){var In=Bn.map((function(gn){return E.createLinearRing(gn.map(m))}));return In.length>1?E.createPolygon(In[0],In.slice(1)):E.createPolygon(In[0])},T=this.token_;if(this.match(No)){var q=T.value;if(this.layout_=this.parseGeometryLayout_(),q=="GEOMETRYCOLLECTION"){var ne=this.parseGeometryCollectionText_();return E.createGeometryCollection(ne)}switch(q){case"POINT":var ve=this.parsePointText_();return ve?E.createPoint(o(Be,k(ve))):E.createPoint();case"LINESTRING":var De=this.parseLineStringText_().map(m);return E.createLineString(De);case"LINEARRING":var tt=this.parseLineStringText_().map(m);return E.createLinearRing(tt);case"POLYGON":var dt=this.parsePolygonText_();return dt&&dt.length!==0?v(dt):E.createPolygon();case"MULTIPOINT":var tr=this.parseMultiPointText_();if(!tr||tr.length===0)return E.createMultiPoint();var ar=tr.map(m).map((function(Bn){return E.createPoint(Bn)}));return E.createMultiPoint(ar);case"MULTILINESTRING":var Fr=this.parseMultiLineStringText_().map((function(Bn){return E.createLineString(Bn.map(m))}));return E.createMultiLineString(Fr);case"MULTIPOLYGON":var fn=this.parseMultiPolygonText_();if(!fn||fn.length===0)return E.createMultiPolygon();var Cn=fn.map(v);return E.createMultiPolygon(Cn);default:throw new Error("Invalid geometry type: "+q)}}throw new Error(this.formatErrorMessage_())}}])})();function Je(E){if(E.isEmpty())return"";var m=E.getCoordinate(),v=[m.x,m.y];return m.z===void 0||Number.isNaN(m.z)||v.push(m.z),m.m===void 0||Number.isNaN(m.m)||v.push(m.m),v.join(" ")}function It(E){for(var m=E.getCoordinates().map((function(ne){var ve=[ne.x,ne.y];return ne.z===void 0||Number.isNaN(ne.z)||ve.push(ne.z),ne.m===void 0||Number.isNaN(ne.m)||ve.push(ne.m),ve})),v=[],T=0,q=m.length;T<q;++T)v.push(m[T].join(" "));return v.join(", ")}function jt(E){var m=[];m.push("("+It(E.getExteriorRing())+")");for(var v=0,T=E.getNumInteriorRing();v<T;++v)m.push("("+It(E.getInteriorRingN(v))+")");return m.join(", ")}var qt={Point:Je,LineString:It,LinearRing:It,Polygon:jt,MultiPoint:function(E){for(var m=[],v=0,T=E.getNumGeometries();v<T;++v)m.push("("+Je(E.getGeometryN(v))+")");return m.join(", ")},MultiLineString:function(E){for(var m=[],v=0,T=E.getNumGeometries();v<T;++v)m.push("("+It(E.getGeometryN(v))+")");return m.join(", ")},MultiPolygon:function(E){for(var m=[],v=0,T=E.getNumGeometries();v<T;++v)m.push("("+jt(E.getGeometryN(v))+")");return m.join(", ")},GeometryCollection:function(E){for(var m=[],v=0,T=E.getNumGeometries();v<T;++v)m.push(Qt(E.getGeometryN(v)));return m.join(", ")}};function Qt(E){var m=E.getGeometryType(),v=qt[m];m=m.toUpperCase();var T=(function(q){var ne="";if(q.isEmpty())return ne;var ve=q.getCoordinate();return ve.z===void 0||Number.isNaN(ve.z)||(ne+="Z"),ve.m===void 0||Number.isNaN(ve.m)||(ne+="M"),ne})(E);return T.length>0&&(m+=" "+T),E.isEmpty()?m+" "+js:m+" ("+v(E)+")"}var Vr=(function(){return a((function E(m){i(this,E),this.geometryFactory=m||new ma,this.precisionModel=this.geometryFactory.getPrecisionModel()}),[{key:"read",value:function(E){var m=new Q(E);return new me(m,this.geometryFactory).parse()}},{key:"write",value:function(E){return Qt(E)}}])})(),Wr=(function(){return a((function E(m){i(this,E),this.parser=new Vr(m)}),[{key:"write",value:function(E){return this.parser.write(E)}}],[{key:"toLineString",value:function(E,m){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+E.x+" "+E.y+", "+m.x+" "+m.y+" )"}}])})(),zr=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getIndexAlongSegment",value:function(m,v){return this.computeIntLineIndex(),this._intLineIndex[m][v]}},{key:"getTopologySummary",value:function(){var m=new mo;return this.isEndPoint()&&m.append(" endpoint"),this._isProper&&m.append(" proper"),this.isCollinear()&&m.append(" collinear"),m.toString()}},{key:"computeIntersection",value:function(m,v,T,q){this._inputLines[0][0]=m,this._inputLines[0][1]=v,this._inputLines[1][0]=T,this._inputLines[1][1]=q,this._result=this.computeIntersect(m,v,T,q)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var m=arguments[0];this.getEdgeDistance(m,0)>this.getEdgeDistance(m,1)?(this._intLineIndex[m][0]=0,this._intLineIndex[m][1]=1):(this._intLineIndex[m][0]=1,this._intLineIndex[m][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(m){this._precisionModel=m}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var m=arguments[0],v=0;v<this._result;v++)if(!this._intPt[v].equals2D(this._inputLines[m][0])&&!this._intPt[v].equals2D(this._inputLines[m][1]))return!0;return!1}}},{key:"getIntersection",value:function(m){return this._intPt[m]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==E.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(m,v){return E.computeEdgeDistance(this._intPt[v],this._inputLines[m][0],this._inputLines[m][1])}},{key:"isCollinear",value:function(){return this._result===E.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Wr.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Wr.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(m,v){return this._inputLines[m][v]}},{key:"isIntersection",value:function(m){for(var v=0;v<this._result;v++)if(this._intPt[v].equals2D(m))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(m,v){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[m][v]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Be,this._intPt[1]=new Be,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(m,v,T){var q=Math.abs(T.x-v.x),ne=Math.abs(T.y-v.y),ve=-1;if(m.equals(v))ve=0;else if(m.equals(T))ve=q>ne?q:ne;else{var De=Math.abs(m.x-v.x),tt=Math.abs(m.y-v.y);(ve=q>ne?De:tt)!==0||m.equals(v)||(ve=Math.max(De,tt))}return we.isTrue(!(ve===0&&!m.equals(v)),"Bad distance calculation"),ve}},{key:"nonRobustComputeEdgeDistance",value:function(m,v,T){var q=m.x-v.x,ne=m.y-v.y,ve=Math.sqrt(q*q+ne*ne);return we.isTrue(!(ve===0&&!m.equals(v)),"Invalid distance calculation"),ve}}])})();zr.DONT_INTERSECT=0,zr.DO_INTERSECT=1,zr.COLLINEAR=2,zr.NO_INTERSECTION=0,zr.POINT_INTERSECTION=1,zr.COLLINEAR_INTERSECTION=2;var Kr=(function(E){function m(){return i(this,m),n(this,m)}return b(m,E),a(m,[{key:"isInSegmentEnvelopes",value:function(v){var T=new Ke(this._inputLines[0][0],this._inputLines[0][1]),q=new Ke(this._inputLines[1][0],this._inputLines[1][1]);return T.contains(v)&&q.contains(v)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return P(m,"computeIntersection",this,1).apply(this,arguments);var v=arguments[0],T=arguments[1],q=arguments[2];if(this._isProper=!1,Ke.intersects(T,q,v)&&He.index(T,q,v)===0&&He.index(q,T,v)===0)return this._isProper=!0,(v.equals(T)||v.equals(q))&&(this._isProper=!1),this._result=zr.POINT_INTERSECTION,null;this._result=zr.NO_INTERSECTION}},{key:"intersection",value:function(v,T,q,ne){var ve=this.intersectionSafe(v,T,q,ne);return this.isInSegmentEnvelopes(ve)||(ve=new Be(m.nearestEndpoint(v,T,q,ne))),this._precisionModel!==null&&this._precisionModel.makePrecise(ve),ve}},{key:"checkDD",value:function(v,T,q,ne,ve){var De=je.intersection(v,T,q,ne),tt=this.isInSegmentEnvelopes(De);_r.out.println("DD in env = "+tt+"  --------------------- "+De),ve.distance(De)>1e-4&&_r.out.println("Distance = "+ve.distance(De))}},{key:"intersectionSafe",value:function(v,T,q,ne){var ve=xr.intersection(v,T,q,ne);return ve===null&&(ve=m.nearestEndpoint(v,T,q,ne)),ve}},{key:"computeCollinearIntersection",value:function(v,T,q,ne){var ve=Ke.intersects(v,T,q),De=Ke.intersects(v,T,ne),tt=Ke.intersects(q,ne,v),dt=Ke.intersects(q,ne,T);return ve&&De?(this._intPt[0]=q,this._intPt[1]=ne,zr.COLLINEAR_INTERSECTION):tt&&dt?(this._intPt[0]=v,this._intPt[1]=T,zr.COLLINEAR_INTERSECTION):ve&&tt?(this._intPt[0]=q,this._intPt[1]=v,!q.equals(v)||De||dt?zr.COLLINEAR_INTERSECTION:zr.POINT_INTERSECTION):ve&&dt?(this._intPt[0]=q,this._intPt[1]=T,!q.equals(T)||De||tt?zr.COLLINEAR_INTERSECTION:zr.POINT_INTERSECTION):De&&tt?(this._intPt[0]=ne,this._intPt[1]=v,!ne.equals(v)||ve||dt?zr.COLLINEAR_INTERSECTION:zr.POINT_INTERSECTION):De&&dt?(this._intPt[0]=ne,this._intPt[1]=T,!ne.equals(T)||ve||tt?zr.COLLINEAR_INTERSECTION:zr.POINT_INTERSECTION):zr.NO_INTERSECTION}},{key:"computeIntersect",value:function(v,T,q,ne){if(this._isProper=!1,!Ke.intersects(v,T,q,ne))return zr.NO_INTERSECTION;var ve=He.index(v,T,q),De=He.index(v,T,ne);if(ve>0&&De>0||ve<0&&De<0)return zr.NO_INTERSECTION;var tt=He.index(q,ne,v),dt=He.index(q,ne,T);return tt>0&&dt>0||tt<0&&dt<0?zr.NO_INTERSECTION:ve===0&&De===0&&tt===0&&dt===0?this.computeCollinearIntersection(v,T,q,ne):(ve===0||De===0||tt===0||dt===0?(this._isProper=!1,v.equals2D(q)||v.equals2D(ne)?this._intPt[0]=v:T.equals2D(q)||T.equals2D(ne)?this._intPt[0]=T:ve===0?this._intPt[0]=new Be(q):De===0?this._intPt[0]=new Be(ne):tt===0?this._intPt[0]=new Be(v):dt===0&&(this._intPt[0]=new Be(T))):(this._isProper=!0,this._intPt[0]=this.intersection(v,T,q,ne)),zr.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(v,T,q,ne){var ve=v,De=tn.pointToSegment(v,q,ne),tt=tn.pointToSegment(T,q,ne);return tt<De&&(De=tt,ve=T),(tt=tn.pointToSegment(q,v,T))<De&&(De=tt,ve=q),(tt=tn.pointToSegment(ne,v,T))<De&&(De=tt,ve=ne),ve}}])})(zr),Cr=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"countSegment",value:function(m,v){if(m.x<this._p.x&&v.x<this._p.x)return null;if(this._p.x===v.x&&this._p.y===v.y)return this._isPointOnSegment=!0,null;if(m.y===this._p.y&&v.y===this._p.y){var T=m.x,q=v.x;return T>q&&(T=v.x,q=m.x),this._p.x>=T&&this._p.x<=q&&(this._isPointOnSegment=!0),null}if(m.y>this._p.y&&v.y<=this._p.y||v.y>this._p.y&&m.y<=this._p.y){var ne=He.index(m,v,this._p);if(ne===He.COLLINEAR)return this._isPointOnSegment=!0,null;v.y<m.y&&(ne=-ne),ne===He.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==ke.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?ke.BOUNDARY:this._crossingCount%2==1?ke.INTERIOR:ke.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var m=arguments[0];this._p=m}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Be&&yr(arguments[1],Ge)){for(var m=arguments[1],v=new E(arguments[0]),T=new Be,q=new Be,ne=1;ne<m.size();ne++)if(m.getCoordinate(ne,T),m.getCoordinate(ne-1,q),v.countSegment(T,q),v.isOnSegment())return v.getLocation();return v.getLocation()}if(arguments[0]instanceof Be&&arguments[1]instanceof Array){for(var ve=arguments[1],De=new E(arguments[0]),tt=1;tt<ve.length;tt++){var dt=ve[tt],tr=ve[tt-1];if(De.countSegment(dt,tr),De.isOnSegment())return De.getLocation()}return De.getLocation()}}}])})(),Hn=(function(){function E(){i(this,E)}return a(E,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Be&&yr(arguments[1],Ge)){for(var m=arguments[0],v=arguments[1],T=new Kr,q=new Be,ne=new Be,ve=v.size(),De=1;De<ve;De++)if(v.getCoordinate(De-1,q),v.getCoordinate(De,ne),T.computeIntersection(m,q,ne),T.hasIntersection())return!0;return!1}if(arguments[0]instanceof Be&&arguments[1]instanceof Array){for(var tt=arguments[0],dt=arguments[1],tr=new Kr,ar=1;ar<dt.length;ar++){var Fr=dt[ar-1],fn=dt[ar];if(tr.computeIntersection(tt,Fr,fn),tr.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(m,v){return Cr.locatePointInRing(m,v)}},{key:"isInRing",value:function(m,v){return E.locateInRing(m,v)!==ke.EXTERIOR}}])})(),_i=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"setAllLocations",value:function(m){for(var v=0;v<this.location.length;v++)this.location[v]=m}},{key:"isNull",value:function(){for(var m=0;m<this.location.length;m++)if(this.location[m]!==ke.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(m){for(var v=0;v<this.location.length;v++)this.location[v]===ke.NONE&&(this.location[v]=m)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(m){if(m.location.length>this.location.length){var v=new Array(3).fill(null);v[ht.ON]=this.location[ht.ON],v[ht.LEFT]=ke.NONE,v[ht.RIGHT]=ke.NONE,this.location=v}for(var T=0;T<this.location.length;T++)this.location[T]===ke.NONE&&T<m.location.length&&(this.location[T]=m.location[T])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var m=this.location[ht.LEFT];this.location[ht.LEFT]=this.location[ht.RIGHT],this.location[ht.RIGHT]=m}},{key:"toString",value:function(){var m=new Kt;return this.location.length>1&&m.append(ke.toLocationSymbol(this.location[ht.LEFT])),m.append(ke.toLocationSymbol(this.location[ht.ON])),this.location.length>1&&m.append(ke.toLocationSymbol(this.location[ht.RIGHT])),m.toString()}},{key:"setLocations",value:function(m,v,T){this.location[ht.ON]=m,this.location[ht.LEFT]=v,this.location[ht.RIGHT]=T}},{key:"get",value:function(m){return m<this.location.length?this.location[m]:ke.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var m=0;m<this.location.length;m++)if(this.location[m]===ke.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var m=arguments[0];this.setLocation(ht.ON,m)}else if(arguments.length===2){var v=arguments[0],T=arguments[1];this.location[v]=T}}},{key:"init",value:function(m){this.location=new Array(m).fill(null),this.setAllLocations(ke.NONE)}},{key:"isEqualOnSide",value:function(m,v){return this.location[v]===m.location[v]}},{key:"allPositionsEqual",value:function(m){for(var v=0;v<this.location.length;v++)if(this.location[v]!==m)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];this.init(m.length)}else if(Number.isInteger(arguments[0])){var v=arguments[0];this.init(1),this.location[ht.ON]=v}else if(arguments[0]instanceof E){var T=arguments[0];if(this.init(T.location.length),T!==null)for(var q=0;q<this.location.length;q++)this.location[q]=T.location[q]}}else if(arguments.length===3){var ne=arguments[0],ve=arguments[1],De=arguments[2];this.init(3),this.location[ht.ON]=ne,this.location[ht.LEFT]=ve,this.location[ht.RIGHT]=De}}}])})(),Rn=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getGeometryCount",value:function(){var m=0;return this.elt[0].isNull()||m++,this.elt[1].isNull()||m++,m}},{key:"setAllLocations",value:function(m,v){this.elt[m].setAllLocations(v)}},{key:"isNull",value:function(m){return this.elt[m].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var m=arguments[0];this.setAllLocationsIfNull(0,m),this.setAllLocationsIfNull(1,m)}else if(arguments.length===2){var v=arguments[0],T=arguments[1];this.elt[v].setAllLocationsIfNull(T)}}},{key:"isLine",value:function(m){return this.elt[m].isLine()}},{key:"merge",value:function(m){for(var v=0;v<2;v++)this.elt[v]===null&&m.elt[v]!==null?this.elt[v]=new _i(m.elt[v]):this.elt[v].merge(m.elt[v])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var m=arguments[0];return this.elt[m].get(ht.ON)}if(arguments.length===2){var v=arguments[0],T=arguments[1];return this.elt[v].get(T)}}},{key:"toString",value:function(){var m=new Kt;return this.elt[0]!==null&&(m.append("A:"),m.append(this.elt[0].toString())),this.elt[1]!==null&&(m.append(" B:"),m.append(this.elt[1].toString())),m.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var m=arguments[0];return this.elt[m].isArea()}}},{key:"isAnyNull",value:function(m){return this.elt[m].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var m=arguments[0],v=arguments[1];this.elt[m].setLocation(ht.ON,v)}else if(arguments.length===3){var T=arguments[0],q=arguments[1],ne=arguments[2];this.elt[T].setLocation(q,ne)}}},{key:"isEqualOnSide",value:function(m,v){return this.elt[0].isEqualOnSide(m.elt[0],v)&&this.elt[1].isEqualOnSide(m.elt[1],v)}},{key:"allPositionsEqual",value:function(m,v){return this.elt[m].allPositionsEqual(v)}},{key:"toLine",value:function(m){this.elt[m].isArea()&&(this.elt[m]=new _i(this.elt[m].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var m=arguments[0];this.elt[0]=new _i(m),this.elt[1]=new _i(m)}else if(arguments[0]instanceof E){var v=arguments[0];this.elt[0]=new _i(v.elt[0]),this.elt[1]=new _i(v.elt[1])}}else if(arguments.length===2){var T=arguments[0],q=arguments[1];this.elt[0]=new _i(ke.NONE),this.elt[1]=new _i(ke.NONE),this.elt[T].setLocation(q)}else if(arguments.length===3){var ne=arguments[0],ve=arguments[1],De=arguments[2];this.elt[0]=new _i(ne,ve,De),this.elt[1]=new _i(ne,ve,De)}else if(arguments.length===4){var tt=arguments[0],dt=arguments[1],tr=arguments[2],ar=arguments[3];this.elt[0]=new _i(ke.NONE,ke.NONE,ke.NONE),this.elt[1]=new _i(ke.NONE,ke.NONE,ke.NONE),this.elt[tt].setLocations(dt,tr,ar)}}},{key:"toLineLabel",value:function(m){for(var v=new E(ke.NONE),T=0;T<2;T++)v.setLocation(T,m.getLocation(T));return v}}])})(),dn=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var E=new Array(this._pts.size()).fill(null),m=0;m<this._pts.size();m++)E[m]=this._pts.get(m);this._ring=this._geometryFactory.createLinearRing(E),this._isHole=He.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(E){this._startDe=E;var m=E,v=!0;do{if(m===null)throw new St("Found null DirectedEdge");if(m.getEdgeRing()===this)throw new St("Directed Edge visited twice during ring-building at "+m.getCoordinate());this._edges.add(m);var T=m.getLabel();we.isTrue(T.isArea()),this.mergeLabel(T),this.addPoints(m.getEdge(),m.isForward(),v),v=!1,this.setEdgeRing(m,this),m=this.getNext(m)}while(m!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(E){return this._pts.get(E)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var E=this._startDe;do{var m=E.getNode().getEdges().getOutgoingDegree(this);m>this._maxNodeDegree&&(this._maxNodeDegree=m),E=this.getNext(E)}while(E!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(E,m,v){var T=E.getCoordinates();if(m){var q=1;v&&(q=0);for(var ne=q;ne<T.length;ne++)this._pts.add(T[ne])}else{var ve=T.length-2;v&&(ve=T.length-1);for(var De=ve;De>=0;De--)this._pts.add(T[De])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var E=this._startDe;do E.getEdge().setInResult(!0),E=E.getNext();while(E!==this._startDe)}},{key:"containsPoint",value:function(E){var m=this.getLinearRing();if(!m.getEnvelopeInternal().contains(E)||!Hn.isInRing(E,m.getCoordinates()))return!1;for(var v=this._holes.iterator();v.hasNext();)if(v.next().containsPoint(E))return!1;return!0}},{key:"addHole",value:function(E){this._holes.add(E)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var E=arguments[0];this.mergeLabel(E,0),this.mergeLabel(E,1)}else if(arguments.length===2){var m=arguments[1],v=arguments[0].getLocation(m,ht.RIGHT);if(v===ke.NONE)return null;if(this._label.getLocation(m)===ke.NONE)return this._label.setLocation(m,v),null}}},{key:"setShell",value:function(E){this._shell=E,E!==null&&E.addHole(this)}},{key:"toPolygon",value:function(E){for(var m=new Array(this._holes.size()).fill(null),v=0;v<this._holes.size();v++)m[v]=this._holes.get(v).getLinearRing();return E.createPolygon(this.getLinearRing(),m)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new ct,this._pts=new ct,this._label=new Rn(ke.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ct,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var E=arguments[0],m=arguments[1];this._geometryFactory=m,this.computePoints(E),this.computeRing()}}}}])})(),Tr=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"setEdgeRing",value:function(v,T){v.setMinEdgeRing(T)}},{key:"getNext",value:function(v){return v.getNextMin()}}],[{key:"constructor_",value:function(){var v=arguments[0],T=arguments[1];dn.constructor_.call(this,v,T)}}])})(dn),rn=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"buildMinimalRings",value:function(){var v=new ct,T=this._startDe;do{if(T.getMinEdgeRing()===null){var q=new Tr(T,this._geometryFactory);v.add(q)}T=T.getNext()}while(T!==this._startDe);return v}},{key:"setEdgeRing",value:function(v,T){v.setEdgeRing(T)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var v=this._startDe;do v.getNode().getEdges().linkMinimalDirectedEdges(this),v=v.getNext();while(v!==this._startDe)}},{key:"getNext",value:function(v){return v.getNext()}}],[{key:"constructor_",value:function(){var v=arguments[0],T=arguments[1];dn.constructor_.call(this,v,T)}}])})(dn),sn=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"setVisited",value:function(E){this._isVisited=E}},{key:"setInResult",value:function(E){this._isInResult=E}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(E){this._label=E}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(E){this._isCovered=E,this._isCoveredSet=!0}},{key:"updateIM",value:function(E){we.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(E)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this._label=E}}}}])})(),ii=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"isIncidentEdgeInResult",value:function(){for(var v=this.getEdges().getEdges().iterator();v.hasNext();)if(v.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(v){v.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(v){}},{key:"computeMergedLocation",value:function(v,T){var q=ke.NONE;if(q=this._label.getLocation(T),!v.isNull(T)){var ne=v.getLocation(T);q!==ke.BOUNDARY&&(q=ne)}return q}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return P(m,"setLabel",this,1).apply(this,arguments);var v=arguments[0],T=arguments[1];this._label===null?this._label=new Rn(v,T):this._label.setLocation(v,T)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof m){var v=arguments[0];this.mergeLabel(v._label)}else if(arguments[0]instanceof Rn)for(var T=arguments[0],q=0;q<2;q++){var ne=this.computeMergedLocation(T,q);this._label.getLocation(q)===ke.NONE&&this._label.setLocation(q,ne)}}},{key:"add",value:function(v){this._edges.insert(v),v.setNode(this)}},{key:"setLabelBoundary",value:function(v){if(this._label===null)return null;var T=ke.NONE;this._label!==null&&(T=this._label.getLocation(v));var q=null;switch(T){case ke.BOUNDARY:q=ke.INTERIOR;break;case ke.INTERIOR:default:q=ke.BOUNDARY}this._label.setLocation(v,q)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var v=arguments[0],T=arguments[1];this._coord=v,this._edges=T,this._label=new Rn(0,ke.NONE)}}])})(sn),Ri=(function(E){function m(){return i(this,m),n(this,m,arguments)}return b(m,E),a(m)})(Ai);function sa(E){return E==null?0:E.color}function hi(E){return E==null?null:E.parent}function ai(E,m){E!==null&&(E.color=m)}function as(E){return E==null?null:E.left}function _s(E){return E==null?null:E.right}var xi=(function(E){function m(){var v;return i(this,m),(v=n(this,m)).root_=null,v.size_=0,v}return b(m,E),a(m,[{key:"get",value:function(v){for(var T=this.root_;T!==null;){var q=v.compareTo(T.key);if(q<0)T=T.left;else{if(!(q>0))return T.value;T=T.right}}return null}},{key:"put",value:function(v,T){if(this.root_===null)return this.root_={key:v,value:T,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var q,ne,ve=this.root_;do if(q=ve,(ne=v.compareTo(ve.key))<0)ve=ve.left;else{if(!(ne>0)){var De=ve.value;return ve.value=T,De}ve=ve.right}while(ve!==null);var tt={key:v,left:null,right:null,value:T,parent:q,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return ne<0?q.left=tt:q.right=tt,this.fixAfterInsertion(tt),this.size_++,null}},{key:"fixAfterInsertion",value:function(v){var T;for(v.color=1;v!=null&&v!==this.root_&&v.parent.color===1;)hi(v)===as(hi(hi(v)))?sa(T=_s(hi(hi(v))))===1?(ai(hi(v),0),ai(T,0),ai(hi(hi(v)),1),v=hi(hi(v))):(v===_s(hi(v))&&(v=hi(v),this.rotateLeft(v)),ai(hi(v),0),ai(hi(hi(v)),1),this.rotateRight(hi(hi(v)))):sa(T=as(hi(hi(v))))===1?(ai(hi(v),0),ai(T,0),ai(hi(hi(v)),1),v=hi(hi(v))):(v===as(hi(v))&&(v=hi(v),this.rotateRight(v)),ai(hi(v),0),ai(hi(hi(v)),1),this.rotateLeft(hi(hi(v))));this.root_.color=0}},{key:"values",value:function(){var v=new ct,T=this.getFirstEntry();if(T!==null)for(v.add(T.value);(T=m.successor(T))!==null;)v.add(T.value);return v}},{key:"entrySet",value:function(){var v=new $t,T=this.getFirstEntry();if(T!==null)for(v.add(T);(T=m.successor(T))!==null;)v.add(T);return v}},{key:"rotateLeft",value:function(v){if(v!=null){var T=v.right;v.right=T.left,T.left!=null&&(T.left.parent=v),T.parent=v.parent,v.parent==null?this.root_=T:v.parent.left===v?v.parent.left=T:v.parent.right=T,T.left=v,v.parent=T}}},{key:"rotateRight",value:function(v){if(v!=null){var T=v.left;v.left=T.right,T.right!=null&&(T.right.parent=v),T.parent=v.parent,v.parent==null?this.root_=T:v.parent.right===v?v.parent.right=T:v.parent.left=T,T.right=v,v.parent=T}}},{key:"getFirstEntry",value:function(){var v=this.root_;if(v!=null)for(;v.left!=null;)v=v.left;return v}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(v){for(var T=this.root_;T!==null;){var q=v.compareTo(T.key);if(q<0)T=T.left;else{if(!(q>0))return!0;T=T.right}}return!1}}],[{key:"successor",value:function(v){var T;if(v===null)return null;if(v.right!==null){for(T=v.right;T.left!==null;)T=T.left;return T}T=v.parent;for(var q=v;T!==null&&q===T.right;)q=T,T=T.parent;return T}}])})(Ri),os=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"find",value:function(E){return this.nodeMap.get(E)}},{key:"addNode",value:function(){if(arguments[0]instanceof Be){var E=arguments[0],m=this.nodeMap.get(E);return m===null&&(m=this.nodeFact.createNode(E),this.nodeMap.put(E,m)),m}if(arguments[0]instanceof ii){var v=arguments[0],T=this.nodeMap.get(v.getCoordinate());return T===null?(this.nodeMap.put(v.getCoordinate(),v),v):(T.mergeLabel(v),T)}}},{key:"print",value:function(E){for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(E){for(var m=new ct,v=this.iterator();v.hasNext();){var T=v.next();T.getLabel().getLocation(E)===ke.BOUNDARY&&m.add(T)}return m}},{key:"add",value:function(E){var m=E.getCoordinate();this.addNode(m).add(E)}}],[{key:"constructor_",value:function(){this.nodeMap=new xi,this.nodeFact=null;var E=arguments[0];this.nodeFact=E}}])})(),Xi=(function(){function E(){i(this,E)}return a(E,null,[{key:"isNorthern",value:function(m){return m===E.NE||m===E.NW}},{key:"isOpposite",value:function(m,v){return m!==v&&(m-v+4)%4===2}},{key:"commonHalfPlane",value:function(m,v){if(m===v)return m;if((m-v+4)%4===2)return-1;var T=m<v?m:v;return T===0&&(m>v?m:v)===3?3:T}},{key:"isInHalfPlane",value:function(m,v){return v===E.SE?m===E.SE||m===E.SW:m===v||m===v+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],v=arguments[1];if(m===0&&v===0)throw new $("Cannot compute the quadrant for point ( "+m+", "+v+" )");return m>=0?v>=0?E.NE:E.SE:v>=0?E.NW:E.SW}if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var T=arguments[0],q=arguments[1];if(q.x===T.x&&q.y===T.y)throw new $("Cannot compute the quadrant for two identical points "+T);return q.x>=T.x?q.y>=T.y?E.NE:E.SE:q.y>=T.y?E.NW:E.SW}}}])})();Xi.NE=0,Xi.NW=1,Xi.SW=2,Xi.SE=3;var tu=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"compareDirection",value:function(m){return this._dx===m._dx&&this._dy===m._dy?0:this._quadrant>m._quadrant?1:this._quadrant<m._quadrant?-1:He.index(m._p0,m._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(m){this._node=m}},{key:"print",value:function(m){var v=Math.atan2(this._dy,this._dx),T=this.getClass().getName(),q=T.lastIndexOf("."),ne=T.substring(q+1);m.print("  "+ne+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+v+"   "+this._label)}},{key:"compareTo",value:function(m){var v=m;return this.compareDirection(v)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var m=Math.atan2(this._dy,this._dx),v=this.getClass().getName(),T=v.lastIndexOf(".");return"  "+v.substring(T+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+m+"   "+this._label}},{key:"computeLabel",value:function(m){}},{key:"init",value:function(m,v){this._p0=m,this._p1=v,this._dx=v.x-m.x,this._dy=v.y-m.y,this._quadrant=Xi.quadrant(this._dx,this._dy),we.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var m=arguments[0];this._edge=m}else if(arguments.length===3){var v=arguments[0],T=arguments[1],q=arguments[2];E.constructor_.call(this,v,T,q,null)}else if(arguments.length===4){var ne=arguments[0],ve=arguments[1],De=arguments[2],tt=arguments[3];E.constructor_.call(this,ne),this.init(ve,De),this._label=tt}}}])})(),Fa=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(v){return this._depth[v]}},{key:"setVisited",value:function(v){this._isVisited=v}},{key:"computeDirectedLabel",value:function(){this._label=new Rn(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(v,T){if(this._depth[v]!==-999&&this._depth[v]!==T)throw new St("assigned depths do not match",this.getCoordinate());this._depth[v]=T}},{key:"isInteriorAreaEdge",value:function(){for(var v=!0,T=0;T<2;T++)this._label.isArea(T)&&this._label.getLocation(T,ht.LEFT)===ke.INTERIOR&&this._label.getLocation(T,ht.RIGHT)===ke.INTERIOR||(v=!1);return v}},{key:"setNextMin",value:function(v){this._nextMin=v}},{key:"print",value:function(v){P(m,"print",this,1).call(this,v),v.print(" "+this._depth[ht.LEFT]+"/"+this._depth[ht.RIGHT]),v.print(" ("+this.getDepthDelta()+")"),this._isInResult&&v.print(" inResult")}},{key:"setMinEdgeRing",value:function(v){this._minEdgeRing=v}},{key:"isLineEdge",value:function(){var v=this._label.isLine(0)||this._label.isLine(1),T=!this._label.isArea(0)||this._label.allPositionsEqual(0,ke.EXTERIOR),q=!this._label.isArea(1)||this._label.allPositionsEqual(1,ke.EXTERIOR);return v&&T&&q}},{key:"setEdgeRing",value:function(v){this._edgeRing=v}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var v=this._edge.getDepthDelta();return this._isForward||(v=-v),v}},{key:"setInResult",value:function(v){this._isInResult=v}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(v){this.print(v),v.print(" "),this._isForward?this._edge.print(v):this._edge.printReverse(v)}},{key:"setSym",value:function(v){this._sym=v}},{key:"setVisitedEdge",value:function(v){this.setVisited(v),this._sym.setVisited(v)}},{key:"setEdgeDepths",value:function(v,T){var q=this.getEdge().getDepthDelta();this._isForward||(q=-q);var ne=1;v===ht.LEFT&&(ne=-1);var ve=ht.opposite(v),De=T+q*ne;this.setDepth(v,T),this.setDepth(ve,De)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(v){this._next=v}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var v=arguments[0],T=arguments[1];if(tu.constructor_.call(this,v),this._isForward=T,T)this.init(v.getCoordinate(0),v.getCoordinate(1));else{var q=v.getNumPoints()-1;this.init(v.getCoordinate(q),v.getCoordinate(q-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(v,T){return v===ke.EXTERIOR&&T===ke.INTERIOR?1:v===ke.INTERIOR&&T===ke.EXTERIOR?-1:0}}])})(tu),xs=(function(){return a((function E(){i(this,E)}),[{key:"createNode",value:function(E){return new ii(E,null)}}])})(),So=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"printEdges",value:function(E){E.println("Edges:");for(var m=0;m<this._edges.size();m++){E.println("edge "+m+":");var v=this._edges.get(m);v.print(E),v.eiList.print(E)}}},{key:"find",value:function(E){return this._nodes.find(E)}},{key:"addNode",value:function(){if(arguments[0]instanceof ii){var E=arguments[0];return this._nodes.addNode(E)}if(arguments[0]instanceof Be){var m=arguments[0];return this._nodes.addNode(m)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var E=this._nodes.iterator();E.hasNext();)E.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(E){_r.out.println(E)}},{key:"isBoundaryNode",value:function(E,m){var v=this._nodes.find(m);if(v===null)return!1;var T=v.getLabel();return T!==null&&T.getLocation(E)===ke.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var E=this._nodes.iterator();E.hasNext();)E.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(E,m,v,T){return!!E.equals(v)&&He.index(E,m,T)===He.COLLINEAR&&Xi.quadrant(E,m)===Xi.quadrant(v,T)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(E){_r.out.print(E)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(E,m){for(var v=0;v<this._edges.size();v++){var T=this._edges.get(v),q=T.getCoordinates();if(this.matchInSameDirection(E,m,q[0],q[1])||this.matchInSameDirection(E,m,q[q.length-1],q[q.length-2]))return T}return null}},{key:"insertEdge",value:function(E){this._edges.add(E)}},{key:"findEdgeEnd",value:function(E){for(var m=this.getEdgeEnds().iterator();m.hasNext();){var v=m.next();if(v.getEdge()===E)return v}return null}},{key:"addEdges",value:function(E){for(var m=E.iterator();m.hasNext();){var v=m.next();this._edges.add(v);var T=new Fa(v,!0),q=new Fa(v,!1);T.setSym(q),q.setSym(T),this.add(T),this.add(q)}}},{key:"add",value:function(E){this._nodes.add(E),this._edgeEndList.add(E)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(E,m){for(var v=0;v<this._edges.size();v++){var T=this._edges.get(v),q=T.getCoordinates();if(E.equals(q[0])&&m.equals(q[1]))return T}return null}}],[{key:"constructor_",value:function(){if(this._edges=new ct,this._nodes=null,this._edgeEndList=new ct,arguments.length===0)this._nodes=new os(new xs);else if(arguments.length===1){var E=arguments[0];this._nodes=new os(E)}}},{key:"linkResultDirectedEdges",value:function(E){for(var m=E.iterator();m.hasNext();)m.next().getEdges().linkResultDirectedEdges()}}])})(),ru=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"sortShellsAndHoles",value:function(m,v,T){for(var q=m.iterator();q.hasNext();){var ne=q.next();ne.isHole()?T.add(ne):v.add(ne)}}},{key:"computePolygons",value:function(m){for(var v=new ct,T=m.iterator();T.hasNext();){var q=T.next().toPolygon(this._geometryFactory);v.add(q)}return v}},{key:"placeFreeHoles",value:function(m,v){for(var T=v.iterator();T.hasNext();){var q=T.next();if(q.getShell()===null){var ne=E.findEdgeRingContaining(q,m);if(ne===null)throw new St("unable to assign hole to a shell",q.getCoordinate(0));q.setShell(ne)}}}},{key:"buildMinimalEdgeRings",value:function(m,v,T){for(var q=new ct,ne=m.iterator();ne.hasNext();){var ve=ne.next();if(ve.getMaxNodeDegree()>2){ve.linkDirectedEdgesForMinimalEdgeRings();var De=ve.buildMinimalRings(),tt=this.findShell(De);tt!==null?(this.placePolygonHoles(tt,De),v.add(tt)):T.addAll(De)}else q.add(ve)}return q}},{key:"buildMaximalEdgeRings",value:function(m){for(var v=new ct,T=m.iterator();T.hasNext();){var q=T.next();if(q.isInResult()&&q.getLabel().isArea()&&q.getEdgeRing()===null){var ne=new rn(q,this._geometryFactory);v.add(ne),ne.setInResult()}}return v}},{key:"placePolygonHoles",value:function(m,v){for(var T=v.iterator();T.hasNext();){var q=T.next();q.isHole()&&q.setShell(m)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(m){for(var v=0,T=null,q=m.iterator();q.hasNext();){var ne=q.next();ne.isHole()||(T=ne,v++)}return we.isTrue(v<=1,"found two shells in MinimalEdgeRing list"),T}},{key:"add",value:function(){if(arguments.length===1){var m=arguments[0];this.add(m.getEdgeEnds(),m.getNodes())}else if(arguments.length===2){var v=arguments[0],T=arguments[1];So.linkResultDirectedEdges(T);var q=this.buildMaximalEdgeRings(v),ne=new ct,ve=this.buildMinimalEdgeRings(q,this._shellList,ne);this.sortShellsAndHoles(ve,this._shellList,ne),this.placeFreeHoles(this._shellList,ne)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new ct;var m=arguments[0];this._geometryFactory=m}},{key:"findEdgeRingContaining",value:function(m,v){for(var T=m.getLinearRing(),q=T.getEnvelopeInternal(),ne=T.getCoordinateN(0),ve=null,De=null,tt=v.iterator();tt.hasNext();){var dt=tt.next(),tr=dt.getLinearRing(),ar=tr.getEnvelopeInternal();if(!ar.equals(q)&&ar.contains(q)){ne=Ni.ptNotInList(T.getCoordinates(),tr.getCoordinates());var Fr=!1;Hn.isInRing(ne,tr.getCoordinates())&&(Fr=!0),Fr&&(ve===null||De.contains(ar))&&(De=(ve=dt).getLinearRing().getEnvelopeInternal())}}return ve}}])})(),nu=(function(){return a((function E(){i(this,E)}),[{key:"getBounds",value:function(){}}])})(),Ja=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[nu,Z]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var E=arguments[0],m=arguments[1];this._bounds=E,this._item=m}}])})(),ki=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"poll",value:function(){if(this.isEmpty())return null;var E=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),E}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(E){for(var m=null,v=this._items.get(E);2*E<=this._size&&((m=2*E)!==this._size&&this._items.get(m+1).compareTo(this._items.get(m))<0&&m++,this._items.get(m).compareTo(v)<0);E=m)this._items.set(E,this._items.get(m));this._items.set(E,v)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(E){this._items.add(null),this._size+=1;var m=this._size;for(this._items.set(0,E);E.compareTo(this._items.get(Math.trunc(m/2)))<0;m/=2)this._items.set(m,this._items.get(Math.trunc(m/2)));this._items.set(m,E)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new ct,this._items.add(null)}}])})(),ws=(function(){return a((function E(){i(this,E)}),[{key:"insert",value:function(E,m){}},{key:"remove",value:function(E,m){}},{key:"query",value:function(){}}])})(),Yn=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(E){we.isTrue(this._bounds===null),this._childBoundables.add(E)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[nu,Z]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new ct,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this._level=E}}}}])})(),Wn={reverseOrder:function(){return{compare:function(E,m){return m.compareTo(E)}}},min:function(E){return Wn.sort(E),E.get(0)},sort:function(E,m){var v=E.toArray();m?Gt.sort(v,m):Gt.sort(v);for(var T=E.iterator(),q=0,ne=v.length;q<ne;q++)T.next(),T.set(v[q])},singletonList:function(E){var m=new ct;return m.add(E),m}},go=(function(){function E(){i(this,E)}return a(E,null,[{key:"maxDistance",value:function(m,v,T,q,ne,ve,De,tt){var dt=E.distance(m,v,ne,ve);return dt=Math.max(dt,E.distance(m,v,De,tt)),dt=Math.max(dt,E.distance(T,q,ne,ve)),dt=Math.max(dt,E.distance(T,q,De,tt))}},{key:"distance",value:function(m,v,T,q){var ne=T-m,ve=q-v;return Math.sqrt(ne*ne+ve*ve)}},{key:"maximumDistance",value:function(m,v){var T=Math.min(m.getMinX(),v.getMinX()),q=Math.min(m.getMinY(),v.getMinY()),ne=Math.max(m.getMaxX(),v.getMaxX()),ve=Math.max(m.getMaxY(),v.getMaxY());return E.distance(T,q,ne,ve)}},{key:"minMaxDistance",value:function(m,v){var T=m.getMinX(),q=m.getMinY(),ne=m.getMaxX(),ve=m.getMaxY(),De=v.getMinX(),tt=v.getMinY(),dt=v.getMaxX(),tr=v.getMaxY(),ar=E.maxDistance(T,q,T,ve,De,tt,De,tr);return ar=Math.min(ar,E.maxDistance(T,q,T,ve,De,tt,dt,tt)),ar=Math.min(ar,E.maxDistance(T,q,T,ve,dt,tr,De,tr)),ar=Math.min(ar,E.maxDistance(T,q,T,ve,dt,tr,dt,tt)),ar=Math.min(ar,E.maxDistance(T,q,ne,q,De,tt,De,tr)),ar=Math.min(ar,E.maxDistance(T,q,ne,q,De,tt,dt,tt)),ar=Math.min(ar,E.maxDistance(T,q,ne,q,dt,tr,De,tr)),ar=Math.min(ar,E.maxDistance(T,q,ne,q,dt,tr,dt,tt)),ar=Math.min(ar,E.maxDistance(ne,ve,T,ve,De,tt,De,tr)),ar=Math.min(ar,E.maxDistance(ne,ve,T,ve,De,tt,dt,tt)),ar=Math.min(ar,E.maxDistance(ne,ve,T,ve,dt,tr,De,tr)),ar=Math.min(ar,E.maxDistance(ne,ve,T,ve,dt,tr,dt,tt)),ar=Math.min(ar,E.maxDistance(ne,ve,ne,q,De,tt,De,tr)),ar=Math.min(ar,E.maxDistance(ne,ve,ne,q,De,tt,dt,tt)),ar=Math.min(ar,E.maxDistance(ne,ve,ne,q,dt,tr,De,tr)),ar=Math.min(ar,E.maxDistance(ne,ve,ne,q,dt,tr,dt,tt))}}])})(),Zn=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"maximumDistance",value:function(){return go.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(m,v){var T=E.isComposite(this._boundable1),q=E.isComposite(this._boundable2);if(T&&q)return E.area(this._boundable1)>E.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,m,v),null):(this.expand(this._boundable2,this._boundable1,!0,m,v),null);if(T)return this.expand(this._boundable1,this._boundable2,!1,m,v),null;if(q)return this.expand(this._boundable2,this._boundable1,!0,m,v),null;throw new $("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(E.isComposite(this._boundable1)||E.isComposite(this._boundable2))}},{key:"compareTo",value:function(m){var v=m;return this._distance<v._distance?-1:this._distance>v._distance?1:0}},{key:"expand",value:function(m,v,T,q,ne){for(var ve=m.getChildBoundables().iterator();ve.hasNext();){var De=ve.next(),tt=null;(tt=T?new E(v,De,this._itemDistance):new E(De,v,this._itemDistance)).getDistance()<ne&&q.add(tt)}}},{key:"getBoundable",value:function(m){return m===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var m=arguments[0],v=arguments[1],T=arguments[2];this._boundable1=m,this._boundable2=v,this._itemDistance=T,this._distance=this.distance()}},{key:"area",value:function(m){return m.getBounds().getArea()}},{key:"isComposite",value:function(m){return m instanceof Yn}}])})(),ue=(function(){return a((function E(){i(this,E)}),[{key:"visitItem",value:function(E){}}])})(),We=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"queryInternal",value:function(){if(yr(arguments[2],ue)&&arguments[0]instanceof Object&&arguments[1]instanceof Yn)for(var m=arguments[0],v=arguments[2],T=arguments[1].getChildBoundables(),q=0;q<T.size();q++){var ne=T.get(q);this.getIntersectsOp().intersects(ne.getBounds(),m)&&(ne instanceof Yn?this.queryInternal(m,ne,v):ne instanceof Ja?v.visitItem(ne.getItem()):we.shouldNeverReachHere())}else if(yr(arguments[2],ir)&&arguments[0]instanceof Object&&arguments[1]instanceof Yn)for(var ve=arguments[0],De=arguments[2],tt=arguments[1].getChildBoundables(),dt=0;dt<tt.size();dt++){var tr=tt.get(dt);this.getIntersectsOp().intersects(tr.getBounds(),ve)&&(tr instanceof Yn?this.queryInternal(ve,tr,De):tr instanceof Ja?De.add(tr.getItem()):we.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(m){return m.get(m.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var m=0,v=arguments[0].getChildBoundables().iterator();v.hasNext();){var T=v.next();T instanceof Yn?m+=this.size(T):T instanceof Ja&&(m+=1)}return m}}},{key:"removeItem",value:function(m,v){for(var T=null,q=m.getChildBoundables().iterator();q.hasNext();){var ne=q.next();ne instanceof Ja&&ne.getItem()===v&&(T=ne)}return T!==null&&(m.getChildBoundables().remove(T),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var m=this.itemsTree(this._root);return m===null?new ct:m}if(arguments.length===1){for(var v=arguments[0],T=new ct,q=v.getChildBoundables().iterator();q.hasNext();){var ne=q.next();if(ne instanceof Yn){var ve=this.itemsTree(ne);ve!==null&&T.add(ve)}else ne instanceof Ja?T.add(ne.getItem()):we.shouldNeverReachHere()}return T.size()<=0?null:T}}},{key:"insert",value:function(m,v){we.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ja(m,v))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var m=arguments[0],v=new ct;return this.boundablesAtLevel(m,this._root,v),v}if(arguments.length===3){var T=arguments[0],q=arguments[1],ne=arguments[2];if(we.isTrue(T>-2),q.getLevel()===T)return ne.add(q),null;for(var ve=q.getChildBoundables().iterator();ve.hasNext();){var De=ve.next();De instanceof Yn?this.boundablesAtLevel(T,De,ne):(we.isTrue(De instanceof Ja),T===-1&&ne.add(De))}return null}}},{key:"query",value:function(){if(arguments.length===1){var m=arguments[0];this.build();var v=new ct;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.queryInternal(m,this._root,v),v}if(arguments.length===2){var T=arguments[0],q=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),T)&&this.queryInternal(T,this._root,q)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var m=arguments[0],v=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.remove(m,this._root,v)}if(arguments.length===3){var T=arguments[0],q=arguments[1],ne=arguments[2],ve=this.removeItem(q,ne);if(ve)return!0;for(var De=null,tt=q.getChildBoundables().iterator();tt.hasNext();){var dt=tt.next();if(this.getIntersectsOp().intersects(dt.getBounds(),T)&&dt instanceof Yn&&(ve=this.remove(T,dt,ne))){De=dt;break}}return De!==null&&De.getChildBoundables().isEmpty()&&q.getChildBoundables().remove(De),ve}}},{key:"createHigherLevels",value:function(m,v){we.isTrue(!m.isEmpty());var T=this.createParentBoundables(m,v+1);return T.size()===1?T.get(0):this.createHigherLevels(T,v+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var m=0,v=arguments[0].getChildBoundables().iterator();v.hasNext();){var T=v.next();if(T instanceof Yn){var q=this.depth(T);q>m&&(m=q)}}return m+1}}},{key:"createParentBoundables",value:function(m,v){we.isTrue(!m.isEmpty());var T=new ct;T.add(this.createNode(v));var q=new ct(m);Wn.sort(q,this.getComparator());for(var ne=q.iterator();ne.hasNext();){var ve=ne.next();this.lastNode(T).getChildBoundables().size()===this.getNodeCapacity()&&T.add(this.createNode(v)),this.lastNode(T).addChildBoundable(ve)}return T}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[Z]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new ct,this._nodeCapacity=null,arguments.length===0)E.constructor_.call(this,E.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var m=arguments[0];we.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}}},{key:"compareDoubles",value:function(m,v){return m>v?1:m<v?-1:0}}])})();We.IntersectsOp=function(){},We.DEFAULT_NODE_CAPACITY=10;var bt=(function(){return a((function E(){i(this,E)}),[{key:"distance",value:function(E,m){}}])})(),Ft=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"createParentBoundablesFromVerticalSlices",value:function(v,T){we.isTrue(v.length>0);for(var q=new ct,ne=0;ne<v.length;ne++)q.addAll(this.createParentBoundablesFromVerticalSlice(v[ne],T));return q}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var v=arguments[0],T=arguments[1];return this.nearestNeighbourK(v,Se.POSITIVE_INFINITY,T)}if(arguments.length===3){var q=arguments[0],ne=arguments[2],ve=arguments[1],De=new ki;De.add(q);for(var tt=new ki;!De.isEmpty()&&ve>=0;){var dt=De.poll(),tr=dt.getDistance();if(tr>=ve)break;dt.isLeaves()?tt.size()<ne?tt.add(dt):(tt.peek().getDistance()>tr&&(tt.poll(),tt.add(dt)),ve=tt.peek().getDistance()):dt.expandToQueue(De,ve)}return m.getItems(tt)}}},{key:"createNode",value:function(v){return new nr(v)}},{key:"size",value:function(){return arguments.length===0?P(m,"size",this,1).call(this):P(m,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ke))return P(m,"insert",this,1).apply(this,arguments);var v=arguments[0],T=arguments[1];if(v.isNull())return null;P(m,"insert",this,1).call(this,v,T)}},{key:"getIntersectsOp",value:function(){return m.intersectsOp}},{key:"verticalSlices",value:function(v,T){for(var q=Math.trunc(Math.ceil(v.size()/T)),ne=new Array(T).fill(null),ve=v.iterator(),De=0;De<T;De++){ne[De]=new ct;for(var tt=0;ve.hasNext()&&tt<q;){var dt=ve.next();ne[De].add(dt),tt++}}return ne}},{key:"query",value:function(){if(arguments.length===1){var v=arguments[0];return P(m,"query",this,1).call(this,v)}if(arguments.length===2){var T=arguments[0],q=arguments[1];P(m,"query",this,1).call(this,T,q)}}},{key:"getComparator",value:function(){return m.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(v,T){return P(m,"createParentBoundables",this,1).call(this,v,T)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ke){var v=arguments[0],T=arguments[1];return P(m,"remove",this,1).call(this,v,T)}return P(m,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?P(m,"depth",this,1).call(this):P(m,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(v,T){we.isTrue(!v.isEmpty());var q=Math.trunc(Math.ceil(v.size()/this.getNodeCapacity())),ne=new ct(v);Wn.sort(ne,m.xComparator);var ve=this.verticalSlices(ne,Math.trunc(Math.ceil(Math.sqrt(q))));return this.createParentBoundablesFromVerticalSlices(ve,T)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(yr(arguments[0],bt)){var v=arguments[0];if(this.isEmpty())return null;var T=new Zn(this.getRoot(),this.getRoot(),v);return this.nearestNeighbour(T)}if(arguments[0]instanceof Zn){var q=arguments[0],ne=Se.POSITIVE_INFINITY,ve=null,De=new ki;for(De.add(q);!De.isEmpty()&&ne>0;){var tt=De.poll(),dt=tt.getDistance();if(dt>=ne)break;tt.isLeaves()?(ne=dt,ve=tt):tt.expandToQueue(De,ne)}return ve===null?null:[ve.getBoundable(0).getItem(),ve.getBoundable(1).getItem()]}}else{if(arguments.length===2){var tr=arguments[0],ar=arguments[1];if(this.isEmpty()||tr.isEmpty())return null;var Fr=new Zn(this.getRoot(),tr.getRoot(),ar);return this.nearestNeighbour(Fr)}if(arguments.length===3){var fn=arguments[2],Cn=new Ja(arguments[0],arguments[1]),Bn=new Zn(this.getRoot(),Cn,fn);return this.nearestNeighbour(Bn)[0]}if(arguments.length===4){var In=arguments[2],gn=arguments[3],Ui=new Ja(arguments[0],arguments[1]),Ji=new Zn(this.getRoot(),Ui,In);return this.nearestNeighbourK(Ji,gn)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var v=arguments[0],T=arguments[1],q=Se.POSITIVE_INFINITY,ne=new ki;for(ne.add(v);!ne.isEmpty();){var ve=ne.poll(),De=ve.getDistance();if(De>T)return!1;if(ve.maximumDistance()<=T)return!0;if(ve.isLeaves()){if((q=De)<=T)return!0}else ve.expandToQueue(ne,q)}return!1}if(arguments.length===3){var tt=arguments[0],dt=arguments[1],tr=arguments[2],ar=new Zn(this.getRoot(),tt.getRoot(),dt);return this.isWithinDistance(ar,tr)}}},{key:"interfaces_",get:function(){return[ws,Z]}}],[{key:"constructor_",value:function(){if(arguments.length===0)m.constructor_.call(this,m.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var v=arguments[0];We.constructor_.call(this,v)}}},{key:"centreX",value:function(v){return m.avg(v.getMinX(),v.getMaxX())}},{key:"avg",value:function(v,T){return(v+T)/2}},{key:"getItems",value:function(v){for(var T=new Array(v.size()).fill(null),q=0;!v.isEmpty();){var ne=v.poll();T[q]=ne.getBoundable(0).getItem(),q++}return T}},{key:"centreY",value:function(v){return m.avg(v.getMinY(),v.getMaxY())}}])})(We),nr=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"computeBounds",value:function(){for(var v=null,T=this.getChildBoundables().iterator();T.hasNext();){var q=T.next();v===null?v=new Ke(q.getBounds()):v.expandToInclude(q.getBounds())}return v}}],[{key:"constructor_",value:function(){var v=arguments[0];Yn.constructor_.call(this,v)}}])})(Yn);Ft.STRtreeNode=nr,Ft.xComparator=new((function(){return a((function E(){i(this,E)}),[{key:"interfaces_",get:function(){return[Re]}},{key:"compare",value:function(E,m){return We.compareDoubles(Ft.centreX(E.getBounds()),Ft.centreX(m.getBounds()))}}])})()),Ft.yComparator=new((function(){return a((function E(){i(this,E)}),[{key:"interfaces_",get:function(){return[Re]}},{key:"compare",value:function(E,m){return We.compareDoubles(Ft.centreY(E.getBounds()),Ft.centreY(m.getBounds()))}}])})()),Ft.intersectsOp=new((function(){return a((function E(){i(this,E)}),[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(E,m){return E.intersects(m)}}])})()),Ft.DEFAULT_NODE_CAPACITY=10;var Pr=(function(){function E(){i(this,E)}return a(E,null,[{key:"relativeSign",value:function(m,v){return m<v?-1:m>v?1:0}},{key:"compare",value:function(m,v,T){if(v.equals2D(T))return 0;var q=E.relativeSign(v.x,T.x),ne=E.relativeSign(v.y,T.y);switch(m){case 0:return E.compareValue(q,ne);case 1:return E.compareValue(ne,q);case 2:return E.compareValue(ne,-q);case 3:return E.compareValue(-q,ne);case 4:return E.compareValue(-q,-ne);case 5:return E.compareValue(-ne,-q);case 6:return E.compareValue(-ne,q);case 7:return E.compareValue(q,-ne)}return we.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(m,v){return m<0?-1:m>0?1:v<0?-1:v>0?1:0}}])})(),$r=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(E){E.print(this.coord),E.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(E){var m=E;return this.segmentIndex<m.segmentIndex?-1:this.segmentIndex>m.segmentIndex?1:this.coord.equals2D(m.coord)?0:this._isInterior?m._isInterior?Pr.compare(this._segmentOctant,this.coord,m.coord):1:-1}},{key:"isEndPoint",value:function(E){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===E}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var E=arguments[0],m=arguments[1],v=arguments[2],T=arguments[3];this._segString=E,this.coord=new Be(m),this.segmentIndex=v,this._segmentOctant=T,this._isInterior=!m.equals2D(E.getCoordinate(v))}}])})(),Tn=(function(){return a((function E(){i(this,E)}),[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])})(),Dn=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getSplitCoordinates",value:function(){var E=new Ca;this.addEndpoints();for(var m=this.iterator(),v=m.next();m.hasNext();){var T=m.next();this.addEdgeCoordinates(v,T,E),v=T}return E.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var E=new ct;this.findCollapsesFromInsertedNodes(E),this.findCollapsesFromExistingVertices(E);for(var m=E.iterator();m.hasNext();){var v=m.next().intValue();this.add(this._edge.getCoordinate(v),v)}}},{key:"createSplitEdgePts",value:function(E,m){var v=m.segmentIndex-E.segmentIndex+2;if(v===2)return[new Be(E.coord),new Be(m.coord)];var T=this._edge.getCoordinate(m.segmentIndex),q=m.isInterior()||!m.coord.equals2D(T);q||v--;var ne=new Array(v).fill(null),ve=0;ne[ve++]=new Be(E.coord);for(var De=E.segmentIndex+1;De<=m.segmentIndex;De++)ne[ve++]=this._edge.getCoordinate(De);return q&&(ne[ve]=new Be(m.coord)),ne}},{key:"print",value:function(E){E.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"findCollapsesFromExistingVertices",value:function(E){for(var m=0;m<this._edge.size()-2;m++){var v=this._edge.getCoordinate(m);this._edge.getCoordinate(m+1);var T=this._edge.getCoordinate(m+2);v.equals2D(T)&&E.add(at.valueOf(m+1))}}},{key:"addEdgeCoordinates",value:function(E,m,v){var T=this.createSplitEdgePts(E,m);v.add(T,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(E){this.addEndpoints(),this.addCollapsedNodes();for(var m=this.iterator(),v=m.next();m.hasNext();){var T=m.next(),q=this.createSplitEdge(v,T);E.add(q),v=T}}},{key:"findCollapseIndex",value:function(E,m,v){if(!E.coord.equals2D(m.coord))return!1;var T=m.segmentIndex-E.segmentIndex;return m.isInterior()||T--,T===1&&(v[0]=E.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(E){for(var m=new Array(1).fill(null),v=this.iterator(),T=v.next();v.hasNext();){var q=v.next();this.findCollapseIndex(T,q,m)&&E.add(at.valueOf(m[0])),T=q}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var E=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(E),E)}},{key:"createSplitEdge",value:function(E,m){var v=this.createSplitEdgePts(E,m);return new Mi(v,this._edge.getData())}},{key:"add",value:function(E,m){var v=new $r(this._edge,E,m,this._edge.getSegmentOctant(m)),T=this._nodeMap.get(v);return T!==null?(we.isTrue(T.coord.equals2D(E),"Found equal nodes with different coordinates"),T):(this._nodeMap.put(v,v),v)}},{key:"checkSplitEdgesCorrectness",value:function(E){var m=this._edge.getCoordinates(),v=E.get(0).getCoordinate(0);if(!v.equals2D(m[0]))throw new he("bad split edge start point at "+v);var T=E.get(E.size()-1).getCoordinates(),q=T[T.length-1];if(!q.equals2D(m[m.length-1]))throw new he("bad split edge end point at "+q)}}],[{key:"constructor_",value:function(){this._nodeMap=new xi,this._edge=null;var E=arguments[0];this._edge=E}}])})(),Mn=(function(){function E(){i(this,E)}return a(E,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var m=arguments[0],v=arguments[1];if(m===0&&v===0)throw new $("Cannot compute the octant for point ( "+m+", "+v+" )");var T=Math.abs(m),q=Math.abs(v);return m>=0?v>=0?T>=q?0:1:T>=q?7:6:v>=0?T>=q?3:2:T>=q?4:5}if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var ne=arguments[0],ve=arguments[1],De=ve.x-ne.x,tt=ve.y-ne.y;if(De===0&&tt===0)throw new $("Cannot compute the octant for two identical points "+ne);return E.octant(De,tt)}}}])})(),ni=(function(){return a((function E(){i(this,E)}),[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(E){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(E){}},{key:"getData",value:function(){}}])})(),On=(function(){return a((function E(){i(this,E)}),[{key:"addIntersection",value:function(E,m){}},{key:"interfaces_",get:function(){return[ni]}}])})(),Mi=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(m){return this._pts[m]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(m){return m===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(m),this.getCoordinate(m+1))}},{key:"setData",value:function(m){this._data=m}},{key:"safeOctant",value:function(m,v){return m.equals2D(v)?0:Mn.octant(m,v)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var m=arguments[0],v=arguments[1];this.addIntersectionNode(m,v)}else if(arguments.length===4){var T=arguments[1],q=arguments[3],ne=new Be(arguments[0].getIntersection(q));this.addIntersection(ne,T)}}},{key:"toString",value:function(){return Wr.toLineString(new Oa(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(m,v){var T=v,q=T+1;if(q<this._pts.length){var ne=this._pts[q];m.equals2D(ne)&&(T=q)}return this._nodeList.add(m,T)}},{key:"addIntersections",value:function(m,v,T){for(var q=0;q<m.getIntersectionNum();q++)this.addIntersection(m,v,T,q)}},{key:"interfaces_",get:function(){return[On]}}],[{key:"constructor_",value:function(){this._nodeList=new Dn(this),this._pts=null,this._data=null;var m=arguments[0],v=arguments[1];this._pts=m,this._data=v}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var m=arguments[0],v=new ct;return E.getNodedSubstrings(m,v),v}if(arguments.length===2)for(var T=arguments[1],q=arguments[0].iterator();q.hasNext();)q.next().getNodeList().addSplitEdges(T)}}])})(),Fi=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof E){var m=arguments[0],v=He.index(this.p0,this.p1,m.p0),T=He.index(this.p0,this.p1,m.p1);return v>=0&&T>=0||v<=0&&T<=0?Math.max(v,T):0}if(arguments[0]instanceof Be){var q=arguments[0];return He.index(this.p0,this.p1,q)}}},{key:"toGeometry",value:function(m){return m.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(m){if(!(m instanceof E))return!1;var v=m;return this.p0.equals(v.p0)&&this.p1.equals(v.p1)}},{key:"intersection",value:function(m){var v=new Kr;return v.computeIntersection(this.p0,this.p1,m.p0,m.p1),v.hasIntersection()?v.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Be){var m=arguments[0];if(m.equals(this.p0)||m.equals(this.p1))return new Be(m);var v=this.projectionFactor(m),T=new Be;return T.x=this.p0.x+v*(this.p1.x-this.p0.x),T.y=this.p0.y+v*(this.p1.y-this.p0.y),T}if(arguments[0]instanceof E){var q=arguments[0],ne=this.projectionFactor(q.p0),ve=this.projectionFactor(q.p1);if(ne>=1&&ve>=1||ne<=0&&ve<=0)return null;var De=this.project(q.p0);ne<0&&(De=this.p0),ne>1&&(De=this.p1);var tt=this.project(q.p1);return ve<0&&(tt=this.p0),ve>1&&(tt=this.p1),new E(De,tt)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(m){return m===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(m){return tn.pointToLinePerpendicular(m,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return E.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(m){if(m.equals(this.p0))return 0;if(m.equals(this.p1))return 1;var v=this.p1.x-this.p0.x,T=this.p1.y-this.p0.y,q=v*v+T*T;return q<=0?Se.NaN:((m.x-this.p0.x)*v+(m.y-this.p0.y)*T)/q}},{key:"closestPoints",value:function(m){var v=this.intersection(m);if(v!==null)return[v,v];var T=new Array(2).fill(null),q=Se.MAX_VALUE,ne=null,ve=this.closestPoint(m.p0);q=ve.distance(m.p0),T[0]=ve,T[1]=m.p0;var De=this.closestPoint(m.p1);(ne=De.distance(m.p1))<q&&(q=ne,T[0]=De,T[1]=m.p1);var tt=m.closestPoint(this.p0);(ne=tt.distance(this.p0))<q&&(q=ne,T[0]=this.p0,T[1]=tt);var dt=m.closestPoint(this.p1);return(ne=dt.distance(this.p1))<q&&(q=ne,T[0]=this.p1,T[1]=dt),T}},{key:"closestPoint",value:function(m){var v=this.projectionFactor(m);return v>0&&v<1?this.project(m):this.p0.distance(m)<this.p1.distance(m)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(m){var v=m,T=this.p0.compareTo(v.p0);return T!==0?T:this.p1.compareTo(v.p1)}},{key:"reverse",value:function(){var m=this.p0;this.p0=this.p1,this.p1=m}},{key:"equalsTopo",value:function(m){return this.p0.equals(m.p0)&&this.p1.equals(m.p1)||this.p0.equals(m.p1)&&this.p1.equals(m.p0)}},{key:"lineIntersection",value:function(m){return xr.intersection(this.p0,this.p1,m.p0,m.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(m,v){var T=this.p0.x+m*(this.p1.x-this.p0.x),q=this.p0.y+m*(this.p1.y-this.p0.y),ne=this.p1.x-this.p0.x,ve=this.p1.y-this.p0.y,De=Math.sqrt(ne*ne+ve*ve),tt=0,dt=0;if(v!==0){if(De<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");tt=v*ne/De,dt=v*ve/De}return new Be(T-dt,q+tt)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var m=arguments[0];this.setCoordinates(m.p0,m.p1)}else if(arguments.length===2){var v=arguments[0],T=arguments[1];this.p0.x=v.x,this.p0.y=v.y,this.p1.x=T.x,this.p1.y=T.y}}},{key:"segmentFraction",value:function(m){var v=this.projectionFactor(m);return v<0?v=0:(v>1||Se.isNaN(v))&&(v=1),v}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(m){var v=this.p1.getY()-this.p0.getY(),T=this.p0.getX()-this.p1.getX(),q=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),ne=v*v+T*T,ve=v*v-T*T,De=m.getX(),tt=m.getY();return new Be((-ve*De-2*v*T*tt-2*v*q)/ne,(ve*tt-2*v*T*De-2*T*q)/ne)}},{key:"distance",value:function(){if(arguments[0]instanceof E){var m=arguments[0];return tn.segmentToSegment(this.p0,this.p1,m.p0,m.p1)}if(arguments[0]instanceof Be){var v=arguments[0];return tn.pointToSegment(v,this.p0,this.p1)}}},{key:"pointAlong",value:function(m){var v=new Be;return v.x=this.p0.x+m*(this.p1.x-this.p0.x),v.y=this.p0.y+m*(this.p1.y-this.p0.y),v}},{key:"hashCode",value:function(){var m=Se.doubleToLongBits(this.p0.x);m^=31*Se.doubleToLongBits(this.p0.y);var v=Math.trunc(m)^Math.trunc(m>>32),T=Se.doubleToLongBits(this.p1.x);return T^=31*Se.doubleToLongBits(this.p1.y),v^(Math.trunc(T)^Math.trunc(T>>32))}},{key:"interfaces_",get:function(){return[U,Z]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)E.constructor_.call(this,new Be,new Be);else if(arguments.length===1){var m=arguments[0];E.constructor_.call(this,m.p0,m.p1)}else if(arguments.length===2){var v=arguments[0],T=arguments[1];this.p0=v,this.p1=T}else if(arguments.length===4){var q=arguments[0],ne=arguments[1],ve=arguments[2],De=arguments[3];E.constructor_.call(this,new Be(q,ne),new Be(ve,De))}}},{key:"midPoint",value:function(m,v){return new Be((m.x+v.x)/2,(m.y+v.y)/2)}}])})(),Gi=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var E=arguments[1],m=arguments[2],v=arguments[3];arguments[0].getLineSegment(E,this._overlapSeg1),m.getLineSegment(v,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Fi,this._overlapSeg2=new Fi}}])})(),pi=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getLineSegment",value:function(E,m){m.p0=this._pts[E],m.p1=this._pts[E+1]}},{key:"computeSelect",value:function(E,m,v,T){var q=this._pts[m],ne=this._pts[v];if(v-m==1)return T.select(this,m),null;if(!E.intersects(q,ne))return null;var ve=Math.trunc((m+v)/2);m<ve&&this.computeSelect(E,m,ve,T),ve<v&&this.computeSelect(E,ve,v,T)}},{key:"getCoordinates",value:function(){for(var E=new Array(this._end-this._start+1).fill(null),m=0,v=this._start;v<=this._end;v++)E[m++]=this._pts[v];return E}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var E=arguments[0],m=arguments[1];this.computeOverlaps(this._start,this._end,E,E._start,E._end,m)}else if(arguments.length===6){var v=arguments[0],T=arguments[1],q=arguments[2],ne=arguments[3],ve=arguments[4],De=arguments[5];if(T-v==1&&ve-ne==1)return De.overlap(this,v,q,ne),null;if(!this.overlaps(v,T,q,ne,ve))return null;var tt=Math.trunc((v+T)/2),dt=Math.trunc((ne+ve)/2);v<tt&&(ne<dt&&this.computeOverlaps(v,tt,q,ne,dt,De),dt<ve&&this.computeOverlaps(v,tt,q,dt,ve,De)),tt<T&&(ne<dt&&this.computeOverlaps(tt,T,q,ne,dt,De),dt<ve&&this.computeOverlaps(tt,T,q,dt,ve,De))}}},{key:"setId",value:function(E){this._id=E}},{key:"select",value:function(E,m){this.computeSelect(E,this._start,this._end,m)}},{key:"getEnvelope",value:function(){if(this._env===null){var E=this._pts[this._start],m=this._pts[this._end];this._env=new Ke(E,m)}return this._env}},{key:"overlaps",value:function(E,m,v,T,q){return Ke.intersects(this._pts[E],this._pts[m],v._pts[T],v._pts[q])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var E=arguments[0],m=arguments[1],v=arguments[2],T=arguments[3];this._pts=E,this._start=m,this._end=v,this._context=T}}])})(),ga=(function(){function E(){i(this,E)}return a(E,null,[{key:"findChainEnd",value:function(m,v){for(var T=v;T<m.length-1&&m[T].equals2D(m[T+1]);)T++;if(T>=m.length-1)return m.length-1;for(var q=Xi.quadrant(m[T],m[T+1]),ne=v+1;ne<m.length&&!(!m[ne-1].equals2D(m[ne])&&Xi.quadrant(m[ne-1],m[ne])!==q);)ne++;return ne-1}},{key:"getChains",value:function(){if(arguments.length===1){var m=arguments[0];return E.getChains(m,null)}if(arguments.length===2){var v=arguments[0],T=arguments[1],q=new ct,ne=0;do{var ve=E.findChainEnd(v,ne),De=new pi(v,ne,ve,T);q.add(De),ne=ve}while(ne<v.length-1);return q}}}])})(),Ia=(function(){return a((function E(){i(this,E)}),[{key:"computeNodes",value:function(E){}},{key:"getNodedSubstrings",value:function(){}}])})(),Ss=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"setSegmentIntersector",value:function(E){this._segInt=E}},{key:"interfaces_",get:function(){return[Ia]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var E=arguments[0];this.setSegmentIntersector(E)}}}}])})(),qs=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Mi.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(v){for(var T=ga.getChains(v.getCoordinates(),v).iterator();T.hasNext();){var q=T.next();q.setId(this._idCounter++),this._index.insert(q.getEnvelope(),q),this._monoChains.add(q)}}},{key:"computeNodes",value:function(v){this._nodedSegStrings=v;for(var T=v.iterator();T.hasNext();)this.add(T.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var v=new Cs(this._segInt),T=this._monoChains.iterator();T.hasNext();)for(var q=T.next(),ne=this._index.query(q.getEnvelope()).iterator();ne.hasNext();){var ve=ne.next();if(ve.getId()>q.getId()&&(q.computeOverlaps(ve,v),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new ct,this._index=new Ft,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var v=arguments[0];Ss.constructor_.call(this,v)}}}}])})(Ss),Cs=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"overlap",value:function(){if(arguments.length!==4)return P(m,"overlap",this,1).apply(this,arguments);var v=arguments[1],T=arguments[2],q=arguments[3],ne=arguments[0].getContext(),ve=T.getContext();this._si.processIntersections(ne,v,ve,q)}}],[{key:"constructor_",value:function(){this._si=null;var v=arguments[0];this._si=v}}])})(Gi);qs.SegmentOverlapAction=Cs;var Co=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isDeletable",value:function(m,v,T,q){var ne=this._inputLine[m],ve=this._inputLine[v],De=this._inputLine[T];return!!this.isConcave(ne,ve,De)&&!!this.isShallow(ne,ve,De,q)&&this.isShallowSampled(ne,ve,m,T,q)}},{key:"deleteShallowConcavities",value:function(){for(var m=1,v=this.findNextNonDeletedIndex(m),T=this.findNextNonDeletedIndex(v),q=!1;T<this._inputLine.length;){var ne=!1;this.isDeletable(m,v,T,this._distanceTol)&&(this._isDeleted[v]=E.DELETE,ne=!0,q=!0),m=ne?T:v,v=this.findNextNonDeletedIndex(m),T=this.findNextNonDeletedIndex(v)}return q}},{key:"isShallowConcavity",value:function(m,v,T,q){return He.index(m,v,T)===this._angleOrientation&&tn.pointToSegment(v,m,T)<q}},{key:"isShallowSampled",value:function(m,v,T,q,ne){var ve=Math.trunc((q-T)/E.NUM_PTS_TO_CHECK);ve<=0&&(ve=1);for(var De=T;De<q;De+=ve)if(!this.isShallow(m,v,this._inputLine[De],ne))return!1;return!0}},{key:"isConcave",value:function(m,v,T){var q=He.index(m,v,T)===this._angleOrientation;return q}},{key:"simplify",value:function(m){this._distanceTol=Math.abs(m),m<0&&(this._angleOrientation=He.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var v=!1;do v=this.deleteShallowConcavities();while(v);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(m){for(var v=m+1;v<this._inputLine.length&&this._isDeleted[v]===E.DELETE;)v++;return v}},{key:"isShallow",value:function(m,v,T,q){return tn.pointToSegment(v,m,T)<q}},{key:"collapseLine",value:function(){for(var m=new Ca,v=0;v<this._inputLine.length;v++)this._isDeleted[v]!==E.DELETE&&m.add(this._inputLine[v]);return m.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=He.COUNTERCLOCKWISE;var m=arguments[0];this._inputLine=m}},{key:"simplify",value:function(m,v){return new E(m).simplify(v)}}])})();Co.INIT=0,Co.DELETE=1,Co.KEEP=1,Co.NUM_PTS_TO_CHECK=10;var Es=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getCoordinates",value:function(){return this._ptList.toArray(E.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(m){this._precisionModel=m}},{key:"addPt",value:function(m){var v=new Be(m);if(this._precisionModel.makePrecise(v),this.isRedundant(v))return null;this._ptList.add(v)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(m,v){if(v)for(var T=0;T<m.length;T++)this.addPt(m[T]);else for(var q=m.length-1;q>=0;q--)this.addPt(m[q])}},{key:"isRedundant",value:function(m){if(this._ptList.size()<1)return!1;var v=this._ptList.get(this._ptList.size()-1);return m.distance(v)<this._minimimVertexDistance}},{key:"toString",value:function(){return new ma().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var m=new Be(this._ptList.get(0)),v=this._ptList.get(this._ptList.size()-1);if(m.equals(v))return null;this._ptList.add(m)}},{key:"setMinimumVertexDistance",value:function(m){this._minimimVertexDistance=m}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ct}}])})();Es.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var ya=(function(){function E(){i(this,E)}return a(E,null,[{key:"toDegrees",value:function(m){return 180*m/Math.PI}},{key:"normalize",value:function(m){for(;m>Math.PI;)m-=E.PI_TIMES_2;for(;m<=-Math.PI;)m+=E.PI_TIMES_2;return m}},{key:"angle",value:function(){if(arguments.length===1){var m=arguments[0];return Math.atan2(m.y,m.x)}if(arguments.length===2){var v=arguments[0],T=arguments[1],q=T.x-v.x,ne=T.y-v.y;return Math.atan2(ne,q)}}},{key:"isAcute",value:function(m,v,T){var q=m.x-v.x,ne=m.y-v.y;return q*(T.x-v.x)+ne*(T.y-v.y)>0}},{key:"isObtuse",value:function(m,v,T){var q=m.x-v.x,ne=m.y-v.y;return q*(T.x-v.x)+ne*(T.y-v.y)<0}},{key:"interiorAngle",value:function(m,v,T){var q=E.angle(v,m),ne=E.angle(v,T);return Math.abs(ne-q)}},{key:"normalizePositive",value:function(m){if(m<0){for(;m<0;)m+=E.PI_TIMES_2;m>=E.PI_TIMES_2&&(m=0)}else{for(;m>=E.PI_TIMES_2;)m-=E.PI_TIMES_2;m<0&&(m=0)}return m}},{key:"angleBetween",value:function(m,v,T){var q=E.angle(v,m),ne=E.angle(v,T);return E.diff(q,ne)}},{key:"diff",value:function(m,v){var T=null;return(T=m<v?v-m:m-v)>Math.PI&&(T=2*Math.PI-T),T}},{key:"toRadians",value:function(m){return m*Math.PI/180}},{key:"getTurn",value:function(m,v){var T=Math.sin(v-m);return T>0?E.COUNTERCLOCKWISE:T<0?E.CLOCKWISE:E.NONE}},{key:"angleBetweenOriented",value:function(m,v,T){var q=E.angle(v,m),ne=E.angle(v,T)-q;return ne<=-Math.PI?ne+E.PI_TIMES_2:ne>Math.PI?ne-E.PI_TIMES_2:ne}}])})();ya.PI_TIMES_2=2*Math.PI,ya.PI_OVER_2=Math.PI/2,ya.PI_OVER_4=Math.PI/4,ya.COUNTERCLOCKWISE=He.COUNTERCLOCKWISE,ya.CLOCKWISE=He.CLOCKWISE,ya.NONE=He.COLLINEAR;var Ts=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"addNextSegment",value:function(m,v){if(this._s0=this._s1,this._s1=this._s2,this._s2=m,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var T=He.index(this._s0,this._s1,this._s2),q=T===He.CLOCKWISE&&this._side===ht.LEFT||T===He.COUNTERCLOCKWISE&&this._side===ht.RIGHT;T===0?this.addCollinear(v):q?this.addOutsideTurn(T,v):this.addInsideTurn(T,v)}},{key:"addLineEndCap",value:function(m,v){var T=new Fi(m,v),q=new Fi;this.computeOffsetSegment(T,ht.LEFT,this._distance,q);var ne=new Fi;this.computeOffsetSegment(T,ht.RIGHT,this._distance,ne);var ve=v.x-m.x,De=v.y-m.y,tt=Math.atan2(De,ve);switch(this._bufParams.getEndCapStyle()){case B.CAP_ROUND:this._segList.addPt(q.p1),this.addDirectedFillet(v,tt+Math.PI/2,tt-Math.PI/2,He.CLOCKWISE,this._distance),this._segList.addPt(ne.p1);break;case B.CAP_FLAT:this._segList.addPt(q.p1),this._segList.addPt(ne.p1);break;case B.CAP_SQUARE:var dt=new Be;dt.x=Math.abs(this._distance)*Math.cos(tt),dt.y=Math.abs(this._distance)*Math.sin(tt);var tr=new Be(q.p1.x+dt.x,q.p1.y+dt.y),ar=new Be(ne.p1.x+dt.x,ne.p1.y+dt.y);this._segList.addPt(tr),this._segList.addPt(ar)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(m,v,T,q){var ne=xr.intersection(v.p0,v.p1,T.p0,T.p1);if(ne!==null&&(q<=0?1:ne.distance(m)/Math.abs(q))<=this._bufParams.getMitreLimit())return this._segList.addPt(ne),null;this.addLimitedMitreJoin(v,T,q,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(m,v){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*E.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===B.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===B.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(v&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,m,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(m){this._segList.addPt(new Be(m.x+this._distance,m.y+this._distance)),this._segList.addPt(new Be(m.x+this._distance,m.y-this._distance)),this._segList.addPt(new Be(m.x-this._distance,m.y-this._distance)),this._segList.addPt(new Be(m.x-this._distance,m.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(m,v){this._segList.addPts(m,v)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(m,v,T,q,ne){var ve=v.x-m.x,De=v.y-m.y,tt=Math.atan2(De,ve),dt=T.x-m.x,tr=T.y-m.y,ar=Math.atan2(tr,dt);q===He.CLOCKWISE?tt<=ar&&(tt+=2*Math.PI):tt>=ar&&(tt-=2*Math.PI),this._segList.addPt(v),this.addDirectedFillet(m,tt,ar,q,ne),this._segList.addPt(T)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(m,v,T){this._s1=m,this._s2=v,this._side=T,this._seg1.setCoordinates(m,v),this.computeOffsetSegment(this._seg1,T,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(m,v,T,q){var ne=this._seg0.p1,ve=ya.angle(ne,this._seg0.p0),De=ya.angleBetweenOriented(this._seg0.p0,ne,this._seg1.p1)/2,tt=ya.normalize(ve+De),dt=ya.normalize(tt+Math.PI),tr=q*T,ar=T-tr*Math.abs(Math.sin(De)),Fr=ne.x+tr*Math.cos(dt),fn=ne.y+tr*Math.sin(dt),Cn=new Be(Fr,fn),Bn=new Fi(ne,Cn),In=Bn.pointAlongOffset(1,ar),gn=Bn.pointAlongOffset(1,-ar);this._side===ht.LEFT?(this._segList.addPt(In),this._segList.addPt(gn)):(this._segList.addPt(gn),this._segList.addPt(In))}},{key:"addDirectedFillet",value:function(m,v,T,q,ne){var ve=q===He.CLOCKWISE?-1:1,De=Math.abs(v-T),tt=Math.trunc(De/this._filletAngleQuantum+.5);if(tt<1)return null;for(var dt=De/tt,tr=new Be,ar=0;ar<tt;ar++){var Fr=v+ve*ar*dt;tr.x=m.x+ne*Math.cos(Fr),tr.y=m.y+ne*Math.sin(Fr),this._segList.addPt(tr)}}},{key:"computeOffsetSegment",value:function(m,v,T,q){var ne=v===ht.LEFT?1:-1,ve=m.p1.x-m.p0.x,De=m.p1.y-m.p0.y,tt=Math.sqrt(ve*ve+De*De),dt=ne*T*ve/tt,tr=ne*T*De/tt;q.p0.x=m.p0.x-tr,q.p0.y=m.p0.y+dt,q.p1.x=m.p1.x-tr,q.p1.y=m.p1.y+dt}},{key:"addInsideTurn",value:function(m,v){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*E.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var T=new Be((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(T);var q=new Be((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(q)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(m){var v=new Be(m.x+this._distance,m.y);this._segList.addPt(v),this.addDirectedFillet(m,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(m,v){this._segList.addPt(m.p1),this._segList.addPt(v.p0)}},{key:"init",value:function(m){this._distance=m,this._maxCurveSegmentError=m*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Es,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(m*E.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(m){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===B.JOIN_BEVEL||this._bufParams.getJoinStyle()===B.JOIN_MITRE?(m&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,He.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Fi,this._seg1=new Fi,this._offset0=new Fi,this._offset1=new Fi,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[0],v=arguments[1],T=arguments[2];this._precisionModel=m,this._bufParams=v,this._li=new Kr,this._filletAngleQuantum=Math.PI/2/v.getQuadrantSegments(),v.getQuadrantSegments()>=8&&v.getJoinStyle()===B.JOIN_ROUND&&(this._closingSegLengthFactor=E.MAX_CLOSING_SEG_LEN_FACTOR),this.init(T)}}])})();Ts.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ts.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ts.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ts.MAX_CLOSING_SEG_LEN_FACTOR=80;var nl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getOffsetCurve",value:function(m,v){if(this._distance=v,v===0)return null;var T=v<0,q=Math.abs(v),ne=this.getSegGen(q);m.length<=1?this.computePointCurve(m[0],ne):this.computeOffsetCurve(m,T,ne);var ve=ne.getCoordinates();return T&&Ni.reverse(ve),ve}},{key:"computeSingleSidedBufferCurve",value:function(m,v,T){var q=this.simplifyTolerance(this._distance);if(v){T.addSegments(m,!0);var ne=Co.simplify(m,-q),ve=ne.length-1;T.initSideSegments(ne[ve],ne[ve-1],ht.LEFT),T.addFirstSegment();for(var De=ve-2;De>=0;De--)T.addNextSegment(ne[De],!0)}else{T.addSegments(m,!1);var tt=Co.simplify(m,q),dt=tt.length-1;T.initSideSegments(tt[0],tt[1],ht.LEFT),T.addFirstSegment();for(var tr=2;tr<=dt;tr++)T.addNextSegment(tt[tr],!0)}T.addLastSegment(),T.closeRing()}},{key:"computeRingBufferCurve",value:function(m,v,T){var q=this.simplifyTolerance(this._distance);v===ht.RIGHT&&(q=-q);var ne=Co.simplify(m,q),ve=ne.length-1;T.initSideSegments(ne[ve-1],ne[0],v);for(var De=1;De<=ve;De++){var tt=De!==1;T.addNextSegment(ne[De],tt)}T.closeRing()}},{key:"computeLineBufferCurve",value:function(m,v){var T=this.simplifyTolerance(this._distance),q=Co.simplify(m,T),ne=q.length-1;v.initSideSegments(q[0],q[1],ht.LEFT);for(var ve=2;ve<=ne;ve++)v.addNextSegment(q[ve],!0);v.addLastSegment(),v.addLineEndCap(q[ne-1],q[ne]);var De=Co.simplify(m,-T),tt=De.length-1;v.initSideSegments(De[tt],De[tt-1],ht.LEFT);for(var dt=tt-2;dt>=0;dt--)v.addNextSegment(De[dt],!0);v.addLastSegment(),v.addLineEndCap(De[1],De[0]),v.closeRing()}},{key:"computePointCurve",value:function(m,v){switch(this._bufParams.getEndCapStyle()){case B.CAP_ROUND:v.createCircle(m);break;case B.CAP_SQUARE:v.createSquare(m)}}},{key:"getLineCurve",value:function(m,v){if(this._distance=v,this.isLineOffsetEmpty(v))return null;var T=Math.abs(v),q=this.getSegGen(T);if(m.length<=1)this.computePointCurve(m[0],q);else if(this._bufParams.isSingleSided()){var ne=v<0;this.computeSingleSidedBufferCurve(m,ne,q)}else this.computeLineBufferCurve(m,q);return q.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(m){return m*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(m,v,T){if(this._distance=T,m.length<=2)return this.getLineCurve(m,T);if(T===0)return E.copyCoordinates(m);var q=this.getSegGen(T);return this.computeRingBufferCurve(m,v,q),q.getCoordinates()}},{key:"computeOffsetCurve",value:function(m,v,T){var q=this.simplifyTolerance(this._distance);if(v){var ne=Co.simplify(m,-q),ve=ne.length-1;T.initSideSegments(ne[ve],ne[ve-1],ht.LEFT),T.addFirstSegment();for(var De=ve-2;De>=0;De--)T.addNextSegment(ne[De],!0)}else{var tt=Co.simplify(m,q),dt=tt.length-1;T.initSideSegments(tt[0],tt[1],ht.LEFT),T.addFirstSegment();for(var tr=2;tr<=dt;tr++)T.addNextSegment(tt[tr],!0)}T.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(m){return m===0||m<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(m){return new Ts(this._precisionModel,this._bufParams,m)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var m=arguments[0],v=arguments[1];this._precisionModel=m,this._bufParams=v}},{key:"copyCoordinates",value:function(m){for(var v=new Array(m.length).fill(null),T=0;T<v.length;T++)v[T]=new Be(m[T]);return v}}])})(),Yo=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var E=arguments[0],m=new ct,v=this._subgraphs.iterator();v.hasNext();){var T=v.next(),q=T.getEnvelope();E.y<q.getMinY()||E.y>q.getMaxY()||this.findStabbedSegments(E,T.getDirectedEdges(),m)}return m}if(arguments.length===3){if(yr(arguments[2],ir)&&arguments[0]instanceof Be&&arguments[1]instanceof Fa){for(var ne=arguments[0],ve=arguments[1],De=arguments[2],tt=ve.getEdge().getCoordinates(),dt=0;dt<tt.length-1;dt++)if(this._seg.p0=tt[dt],this._seg.p1=tt[dt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<ne.x||this._seg.isHorizontal()||ne.y<this._seg.p0.y||ne.y>this._seg.p1.y||He.index(this._seg.p0,this._seg.p1,ne)===He.RIGHT)){var tr=ve.getDepth(ht.LEFT);this._seg.p0.equals(tt[dt])||(tr=ve.getDepth(ht.RIGHT));var ar=new wi(this._seg,tr);De.add(ar)}}else if(yr(arguments[2],ir)&&arguments[0]instanceof Be&&yr(arguments[1],ir))for(var Fr=arguments[0],fn=arguments[2],Cn=arguments[1].iterator();Cn.hasNext();){var Bn=Cn.next();Bn.isForward()&&this.findStabbedSegments(Fr,Bn,fn)}}}},{key:"getDepth",value:function(E){var m=this.findStabbedSegments(E);return m.size()===0?0:Wn.min(m)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Fi;var E=arguments[0];this._subgraphs=E}}])})(),wi=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"compareTo",value:function(E){var m=E;if(this._upwardSeg.minX()>=m._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=m._upwardSeg.minX())return-1;var v=this._upwardSeg.orientationIndex(m._upwardSeg);return v!==0||(v=-1*m._upwardSeg.orientationIndex(this._upwardSeg))!==0?v:this._upwardSeg.compareTo(m._upwardSeg)}},{key:"compareX",value:function(E,m){var v=E.p0.compareTo(m.p0);return v!==0?v:E.p1.compareTo(m.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var E=arguments[0],m=arguments[1];this._upwardSeg=new Fi(E),this._leftDepth=m}}])})();Yo.DepthSegment=wi;var Eo=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,null,[{key:"constructor_",value:function(){N.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])})(N),xa=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getY",value:function(){var m=this.y/this.w;if(Se.isNaN(m)||Se.isInfinite(m))throw new Eo;return m}},{key:"getX",value:function(){var m=this.x/this.w;if(Se.isNaN(m)||Se.isInfinite(m))throw new Eo;return m}},{key:"getCoordinate",value:function(){var m=new Be;return m.x=this.getX(),m.y=this.getY(),m}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var m=arguments[0];this.x=m.x,this.y=m.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var v=arguments[0],T=arguments[1];this.x=v,this.y=T,this.w=1}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var q=arguments[0],ne=arguments[1];this.x=q.y*ne.w-ne.y*q.w,this.y=ne.x*q.w-q.x*ne.w,this.w=q.x*ne.y-ne.x*q.y}else if(arguments[0]instanceof Be&&arguments[1]instanceof Be){var ve=arguments[0],De=arguments[1];this.x=ve.y-De.y,this.y=De.x-ve.x,this.w=ve.x*De.y-De.x*ve.y}}else if(arguments.length===3){var tt=arguments[0],dt=arguments[1],tr=arguments[2];this.x=tt,this.y=dt,this.w=tr}else if(arguments.length===4){var ar=arguments[0],Fr=arguments[1],fn=arguments[2],Cn=arguments[3],Bn=ar.y-Fr.y,In=Fr.x-ar.x,gn=ar.x*Fr.y-Fr.x*ar.y,Ui=fn.y-Cn.y,Ji=Cn.x-fn.x,Ha=fn.x*Cn.y-Cn.x*fn.y;this.x=In*Ha-Ji*gn,this.y=Ui*gn-Bn*Ha,this.w=Bn*Ji-Ui*In}}}])})(),Bo=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"area",value:function(){return E.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return E.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(m){if(m===null)throw new $("Supplied point is null.");return E.interpolateZ(m,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return E.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return E.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return E.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return E.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return E.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return E.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var m=arguments[0],v=arguments[1],T=arguments[2];this.p0=m,this.p1=v,this.p2=T}},{key:"area",value:function(m,v,T){return Math.abs(((T.x-m.x)*(v.y-m.y)-(v.x-m.x)*(T.y-m.y))/2)}},{key:"signedArea",value:function(m,v,T){return((T.x-m.x)*(v.y-m.y)-(v.x-m.x)*(T.y-m.y))/2}},{key:"det",value:function(m,v,T,q){return m*q-v*T}},{key:"interpolateZ",value:function(m,v,T,q){var ne=v.x,ve=v.y,De=T.x-ne,tt=q.x-ne,dt=T.y-ve,tr=q.y-ve,ar=De*tr-tt*dt,Fr=m.x-ne,fn=m.y-ve,Cn=(tr*Fr-tt*fn)/ar,Bn=(-dt*Fr+De*fn)/ar;return v.getZ()+Cn*(T.getZ()-v.getZ())+Bn*(q.getZ()-v.getZ())}},{key:"longestSideLength",value:function(m,v,T){var q=m.distance(v),ne=v.distance(T),ve=T.distance(m),De=q;return ne>De&&(De=ne),ve>De&&(De=ve),De}},{key:"circumcentreDD",value:function(m,v,T){var q=_e.valueOf(m.x).subtract(T.x),ne=_e.valueOf(m.y).subtract(T.y),ve=_e.valueOf(v.x).subtract(T.x),De=_e.valueOf(v.y).subtract(T.y),tt=_e.determinant(q,ne,ve,De).multiply(2),dt=q.sqr().add(ne.sqr()),tr=ve.sqr().add(De.sqr()),ar=_e.determinant(ne,dt,De,tr),Fr=_e.determinant(q,dt,ve,tr),fn=_e.valueOf(T.x).subtract(ar.divide(tt)).doubleValue(),Cn=_e.valueOf(T.y).add(Fr.divide(tt)).doubleValue();return new Be(fn,Cn)}},{key:"isAcute",value:function(m,v,T){return!!ya.isAcute(m,v,T)&&!!ya.isAcute(v,T,m)&&!!ya.isAcute(T,m,v)}},{key:"circumcentre",value:function(m,v,T){var q=T.x,ne=T.y,ve=m.x-q,De=m.y-ne,tt=v.x-q,dt=v.y-ne,tr=2*E.det(ve,De,tt,dt),ar=E.det(De,ve*ve+De*De,dt,tt*tt+dt*dt),Fr=E.det(ve,ve*ve+De*De,tt,tt*tt+dt*dt);return new Be(q-ar/tr,ne+Fr/tr)}},{key:"perpendicularBisector",value:function(m,v){var T=v.x-m.x,q=v.y-m.y,ne=new xa(m.x+T/2,m.y+q/2,1),ve=new xa(m.x-q+T/2,m.y+T+q/2,1);return new xa(ne,ve)}},{key:"angleBisector",value:function(m,v,T){var q=v.distance(m),ne=q/(q+v.distance(T)),ve=T.x-m.x,De=T.y-m.y;return new Be(m.x+ne*ve,m.y+ne*De)}},{key:"area3D",value:function(m,v,T){var q=v.x-m.x,ne=v.y-m.y,ve=v.getZ()-m.getZ(),De=T.x-m.x,tt=T.y-m.y,dt=T.getZ()-m.getZ(),tr=ne*dt-ve*tt,ar=ve*De-q*dt,Fr=q*tt-ne*De,fn=tr*tr+ar*ar+Fr*Fr,Cn=Math.sqrt(fn)/2;return Cn}},{key:"centroid",value:function(m,v,T){var q=(m.x+v.x+T.x)/3,ne=(m.y+v.y+T.y)/3;return new Be(q,ne)}},{key:"inCentre",value:function(m,v,T){var q=v.distance(T),ne=m.distance(T),ve=m.distance(v),De=q+ne+ve,tt=(q*m.x+ne*v.x+ve*T.x)/De,dt=(q*m.y+ne*v.y+ve*T.y)/De;return new Be(tt,dt)}}])})(),ss=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"addRingSide",value:function(E,m,v,T,q){if(m===0&&E.length<Pn.MINIMUM_VALID_SIZE)return null;var ne=T,ve=q;E.length>=Pn.MINIMUM_VALID_SIZE&&He.isCCW(E)&&(ne=q,ve=T,v=ht.opposite(v));var De=this._curveBuilder.getRingCurve(E,v,m);this.addCurve(De,ne,ve)}},{key:"addRingBothSides",value:function(E,m){this.addRingSide(E,m,ht.LEFT,ke.EXTERIOR,ke.INTERIOR),this.addRingSide(E,m,ht.RIGHT,ke.INTERIOR,ke.EXTERIOR)}},{key:"addPoint",value:function(E){if(this._distance<=0)return null;var m=E.getCoordinates(),v=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(v,ke.EXTERIOR,ke.INTERIOR)}},{key:"addPolygon",value:function(E){var m=this._distance,v=ht.LEFT;this._distance<0&&(m=-this._distance,v=ht.RIGHT);var T=E.getExteriorRing(),q=Ni.removeRepeatedPoints(T.getCoordinates());if(this._distance<0&&this.isErodedCompletely(T,this._distance)||this._distance<=0&&q.length<3)return null;this.addRingSide(q,m,v,ke.EXTERIOR,ke.INTERIOR);for(var ne=0;ne<E.getNumInteriorRing();ne++){var ve=E.getInteriorRingN(ne),De=Ni.removeRepeatedPoints(ve.getCoordinates());this._distance>0&&this.isErodedCompletely(ve,-this._distance)||this.addRingSide(De,m,ht.opposite(v),ke.INTERIOR,ke.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(E,m){var v=new Bo(E[0],E[1],E[2]),T=v.inCentre();return tn.pointToSegment(T,v.p0,v.p1)<Math.abs(m)}},{key:"addLineString",value:function(E){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var m=Ni.removeRepeatedPoints(E.getCoordinates());if(Ni.isRing(m)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(m,this._distance);else{var v=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(v,ke.EXTERIOR,ke.INTERIOR)}}},{key:"addCurve",value:function(E,m,v){if(E===null||E.length<2)return null;var T=new Mi(E,new Rn(0,ke.BOUNDARY,m,v));this._curveList.add(T)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(E){if(E.isEmpty())return null;if(E instanceof qr)this.addPolygon(E);else if(E instanceof Vn)this.addLineString(E);else if(E instanceof Ue)this.addPoint(E);else if(E instanceof Sn)this.addCollection(E);else if(E instanceof Wo)this.addCollection(E);else if(E instanceof fi)this.addCollection(E);else{if(!(E instanceof kr))throw new $e(E.getGeometryType());this.addCollection(E)}}},{key:"isErodedCompletely",value:function(E,m){var v=E.getCoordinates();if(v.length<4)return m<0;if(v.length===4)return this.isTriangleErodedCompletely(v,m);var T=E.getEnvelopeInternal(),q=Math.min(T.getHeight(),T.getWidth());return m<0&&2*Math.abs(m)>q}},{key:"addCollection",value:function(E){for(var m=0;m<E.getNumGeometries();m++){var v=E.getGeometryN(m);this.add(v)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ct;var E=arguments[0],m=arguments[1],v=arguments[2];this._inputGeom=E,this._distance=m,this._curveBuilder=v}}])})(),Ba=(function(){return a((function E(){i(this,E)}),[{key:"locate",value:function(E){}}])})(),Cu=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,E.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new st;var m=this._parent.getGeometryN(this._index++);return m instanceof kr?(this._subcollectionIterator=new E(m),this._subcollectionIterator.next()):m}},{key:"remove",value:function(){throw new $e(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Tn]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var m=arguments[0];this._parent=m,this._atStart=!0,this._index=0,this._max=m.getNumGeometries()}},{key:"isAtomic",value:function(m){return!(m instanceof kr)}}])})(),Rl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"locate",value:function(m){return E.locate(m,this._geom)}},{key:"interfaces_",get:function(){return[Ba]}}],[{key:"constructor_",value:function(){this._geom=null;var m=arguments[0];this._geom=m}},{key:"locatePointInPolygon",value:function(m,v){if(v.isEmpty())return ke.EXTERIOR;var T=v.getExteriorRing(),q=E.locatePointInRing(m,T);if(q!==ke.INTERIOR)return q;for(var ne=0;ne<v.getNumInteriorRing();ne++){var ve=v.getInteriorRingN(ne),De=E.locatePointInRing(m,ve);if(De===ke.BOUNDARY)return ke.BOUNDARY;if(De===ke.INTERIOR)return ke.EXTERIOR}return ke.INTERIOR}},{key:"locatePointInRing",value:function(m,v){return v.getEnvelopeInternal().intersects(m)?Hn.locateInRing(m,v.getCoordinates()):ke.EXTERIOR}},{key:"containsPointInPolygon",value:function(m,v){return ke.EXTERIOR!==E.locatePointInPolygon(m,v)}},{key:"locateInGeometry",value:function(m,v){if(v instanceof qr)return E.locatePointInPolygon(m,v);if(v instanceof kr)for(var T=new Cu(v);T.hasNext();){var q=T.next();if(q!==v){var ne=E.locateInGeometry(m,q);if(ne!==ke.EXTERIOR)return ne}}return ke.EXTERIOR}},{key:"isContained",value:function(m,v){return ke.EXTERIOR!==E.locate(m,v)}},{key:"locate",value:function(m,v){return v.isEmpty()?ke.EXTERIOR:v.getEnvelopeInternal().intersects(m)?E.locateInGeometry(m,v):ke.EXTERIOR}}])})(),Is=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getNextCW",value:function(E){this.getEdges();var m=this._edgeList.indexOf(E),v=m-1;return m===0&&(v=this._edgeList.size()-1),this._edgeList.get(v)}},{key:"propagateSideLabels",value:function(E){for(var m=ke.NONE,v=this.iterator();v.hasNext();){var T=v.next().getLabel();T.isArea(E)&&T.getLocation(E,ht.LEFT)!==ke.NONE&&(m=T.getLocation(E,ht.LEFT))}if(m===ke.NONE)return null;for(var q=m,ne=this.iterator();ne.hasNext();){var ve=ne.next(),De=ve.getLabel();if(De.getLocation(E,ht.ON)===ke.NONE&&De.setLocation(E,ht.ON,q),De.isArea(E)){var tt=De.getLocation(E,ht.LEFT),dt=De.getLocation(E,ht.RIGHT);if(dt!==ke.NONE){if(dt!==q)throw new St("side location conflict",ve.getCoordinate());tt===ke.NONE&&we.shouldNeverReachHere("found single null side (at "+ve.getCoordinate()+")"),q=tt}else we.isTrue(De.getLocation(E,ht.LEFT)===ke.NONE,"found single null side"),De.setLocation(E,ht.RIGHT,q),De.setLocation(E,ht.LEFT,q)}}}},{key:"getCoordinate",value:function(){var E=this.iterator();return E.hasNext()?E.next().getCoordinate():null}},{key:"print",value:function(E){_r.out.println("EdgeEndStar:   "+this.getCoordinate());for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"isAreaLabelsConsistent",value:function(E){return this.computeEdgeEndLabels(E.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(E){var m=this.getEdges();if(m.size()<=0)return!0;var v=m.size()-1,T=m.get(v).getLabel().getLocation(E,ht.LEFT);we.isTrue(T!==ke.NONE,"Found unlabelled area edge");for(var q=T,ne=this.iterator();ne.hasNext();){var ve=ne.next().getLabel();we.isTrue(ve.isArea(E),"Found non-area edge");var De=ve.getLocation(E,ht.LEFT),tt=ve.getLocation(E,ht.RIGHT);if(De===tt||tt!==q)return!1;q=De}return!0}},{key:"findIndex",value:function(E){this.iterator();for(var m=0;m<this._edgeList.size();m++)if(this._edgeList.get(m)===E)return m;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new ct(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(E,m,v){return this._ptInAreaLocation[E]===ke.NONE&&(this._ptInAreaLocation[E]=Rl.locate(m,v[E].getGeometry())),this._ptInAreaLocation[E]}},{key:"toString",value:function(){var E=new Kt;E.append("EdgeEndStar:   "+this.getCoordinate()),E.append(`
`);for(var m=this.iterator();m.hasNext();){var v=m.next();E.append(v),E.append(`
`)}return E.toString()}},{key:"computeEdgeEndLabels",value:function(E){for(var m=this.iterator();m.hasNext();)m.next().computeLabel(E)}},{key:"computeLabelling",value:function(E){this.computeEdgeEndLabels(E[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var m=[!1,!1],v=this.iterator();v.hasNext();)for(var T=v.next().getLabel(),q=0;q<2;q++)T.isLine(q)&&T.getLocation(q)===ke.BOUNDARY&&(m[q]=!0);for(var ne=this.iterator();ne.hasNext();)for(var ve=ne.next(),De=ve.getLabel(),tt=0;tt<2;tt++)if(De.isAnyNull(tt)){var dt=ke.NONE;if(m[tt])dt=ke.EXTERIOR;else{var tr=ve.getCoordinate();dt=this.getLocation(tt,tr,E)}De.setAllLocationsIfNull(tt,dt)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(E,m){this._edgeMap.put(E,m),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new xi,this._edgeList=null,this._ptInAreaLocation=[ke.NONE,ke.NONE]}}])})(),Pa=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var v=null,T=null,q=this._SCANNING_FOR_INCOMING,ne=0;ne<this._resultAreaEdgeList.size();ne++){var ve=this._resultAreaEdgeList.get(ne),De=ve.getSym();if(ve.getLabel().isArea())switch(v===null&&ve.isInResult()&&(v=ve),q){case this._SCANNING_FOR_INCOMING:if(!De.isInResult())continue;T=De,q=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!ve.isInResult())continue;T.setNext(ve),q=this._SCANNING_FOR_INCOMING}}if(q===this._LINKING_TO_OUTGOING){if(v===null)throw new St("no outgoing dirEdge found",this.getCoordinate());we.isTrue(v.isInResult(),"unable to link last incoming dirEdge"),T.setNext(v)}}},{key:"insert",value:function(v){var T=v;this.insertEdgeEnd(T,T)}},{key:"getRightmostEdge",value:function(){var v=this.getEdges(),T=v.size();if(T<1)return null;var q=v.get(0);if(T===1)return q;var ne=v.get(T-1),ve=q.getQuadrant(),De=ne.getQuadrant();return Xi.isNorthern(ve)&&Xi.isNorthern(De)?q:Xi.isNorthern(ve)||Xi.isNorthern(De)?q.getDy()!==0?q:ne.getDy()!==0?ne:(we.shouldNeverReachHere("found two horizontal edges incident on node"),null):ne}},{key:"print",value:function(v){_r.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var T=this.iterator();T.hasNext();){var q=T.next();v.print("out "),q.print(v),v.println(),v.print("in "),q.getSym().print(v),v.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ct;for(var v=this.iterator();v.hasNext();){var T=v.next();(T.isInResult()||T.getSym().isInResult())&&this._resultAreaEdgeList.add(T)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(v){for(var T=this.iterator();T.hasNext();){var q=T.next().getLabel();q.setAllLocationsIfNull(0,v.getLocation(0)),q.setAllLocationsIfNull(1,v.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var v=null,T=null,q=this._edgeList.size()-1;q>=0;q--){var ne=this._edgeList.get(q),ve=ne.getSym();T===null&&(T=ve),v!==null&&ve.setNext(v),v=ne}T.setNext(v)}},{key:"computeDepths",value:function(){if(arguments.length===1){var v=arguments[0],T=this.findIndex(v),q=v.getDepth(ht.LEFT),ne=v.getDepth(ht.RIGHT),ve=this.computeDepths(T+1,this._edgeList.size(),q);if(this.computeDepths(0,T,ve)!==ne)throw new St("depth mismatch at "+v.getCoordinate())}else if(arguments.length===3){for(var De=arguments[1],tt=arguments[2],dt=arguments[0];dt<De;dt++){var tr=this._edgeList.get(dt);tr.setEdgeDepths(ht.RIGHT,tt),tt=tr.getDepth(ht.LEFT)}return tt}}},{key:"mergeSymLabels",value:function(){for(var v=this.iterator();v.hasNext();){var T=v.next();T.getLabel().merge(T.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(v){for(var T=null,q=null,ne=this._SCANNING_FOR_INCOMING,ve=this._resultAreaEdgeList.size()-1;ve>=0;ve--){var De=this._resultAreaEdgeList.get(ve),tt=De.getSym();switch(T===null&&De.getEdgeRing()===v&&(T=De),ne){case this._SCANNING_FOR_INCOMING:if(tt.getEdgeRing()!==v)continue;q=tt,ne=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(De.getEdgeRing()!==v)continue;q.setNextMin(De),ne=this._SCANNING_FOR_INCOMING}}ne===this._LINKING_TO_OUTGOING&&(we.isTrue(T!==null,"found null for first outgoing dirEdge"),we.isTrue(T.getEdgeRing()===v,"unable to link last incoming dirEdge"),q.setNextMin(T))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var v=0,T=this.iterator();T.hasNext();)T.next().isInResult()&&v++;return v}if(arguments.length===1){for(var q=arguments[0],ne=0,ve=this.iterator();ve.hasNext();)ve.next().getEdgeRing()===q&&ne++;return ne}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var v=ke.NONE,T=this.iterator();T.hasNext();){var q=T.next(),ne=q.getSym();if(!q.isLineEdge()){if(q.isInResult()){v=ke.INTERIOR;break}if(ne.isInResult()){v=ke.EXTERIOR;break}}}if(v===ke.NONE)return null;for(var ve=v,De=this.iterator();De.hasNext();){var tt=De.next(),dt=tt.getSym();tt.isLineEdge()?tt.getEdge().setCovered(ve===ke.INTERIOR):(tt.isInResult()&&(ve=ke.EXTERIOR),dt.isInResult()&&(ve=ke.INTERIOR))}}},{key:"computeLabelling",value:function(v){P(m,"computeLabelling",this,1).call(this,v),this._label=new Rn(ke.NONE);for(var T=this.iterator();T.hasNext();)for(var q=T.next().getEdge().getLabel(),ne=0;ne<2;ne++){var ve=q.getLocation(ne);ve!==ke.INTERIOR&&ve!==ke.BOUNDARY||this._label.setLocation(ne,ke.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])})(Is),ls=(function(E){function m(){return i(this,m),n(this,m)}return b(m,E),a(m,[{key:"createNode",value:function(v){return new ii(v,new Pa)}}])})(xs),Eu=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"compareTo",value:function(m){var v=m;return E.compareOriented(this._pts,this._orientation,v._pts,v._orientation)}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var m=arguments[0];this._pts=m,this._orientation=E.orientation(m)}},{key:"orientation",value:function(m){return Ni.increasingDirection(m)===1}},{key:"compareOriented",value:function(m,v,T,q){for(var ne=v?1:-1,ve=q?1:-1,De=v?m.length:-1,tt=q?T.length:-1,dt=v?0:m.length-1,tr=q?0:T.length-1;;){var ar=m[dt].compareTo(T[tr]);if(ar!==0)return ar;var Fr=(dt+=ne)===De,fn=(tr+=ve)===tt;if(Fr&&!fn)return-1;if(!Fr&&fn)return 1;if(Fr&&fn)return 0}}}])})(),Tu=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"print",value:function(E){E.print("MULTILINESTRING ( ");for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m);m>0&&E.print(","),E.print("(");for(var T=v.getCoordinates(),q=0;q<T.length;q++)q>0&&E.print(","),E.print(T[q].x+" "+T[q].y);E.println(")")}E.print(")  ")}},{key:"addAll",value:function(E){for(var m=E.iterator();m.hasNext();)this.add(m.next())}},{key:"findEdgeIndex",value:function(E){for(var m=0;m<this._edges.size();m++)if(this._edges.get(m).equals(E))return m;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(E){return this._edges.get(E)}},{key:"findEqualEdge",value:function(E){var m=new Eu(E.getCoordinates());return this._ocaMap.get(m)}},{key:"add",value:function(E){this._edges.add(E);var m=new Eu(E.getCoordinates());this._ocaMap.put(m,E)}}],[{key:"constructor_",value:function(){this._edges=new ct,this._ocaMap=new xi}}])})(),Vs=(function(){return a((function E(){i(this,E)}),[{key:"processIntersections",value:function(E,m,v,T){}},{key:"isDone",value:function(){}}])})(),Dl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isTrivialIntersection",value:function(m,v,T,q){if(m===T&&this._li.getIntersectionNum()===1){if(E.isAdjacentSegments(v,q))return!0;if(m.isClosed()){var ne=m.size()-1;if(v===0&&q===ne||q===0&&v===ne)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(m,v,T,q){if(m===T&&v===q)return null;this.numTests++;var ne=m.getCoordinates()[v],ve=m.getCoordinates()[v+1],De=T.getCoordinates()[q],tt=T.getCoordinates()[q+1];this._li.computeIntersection(ne,ve,De,tt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(m,v,T,q)||(this._hasIntersection=!0,m.addIntersections(this._li,v,0),T.addIntersections(this._li,q,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Vs]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var m=arguments[0];this._li=m}},{key:"isAdjacentSegments",value:function(m,v){return Math.abs(m-v)===1}}])})(),yo=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(E){E.print(this.coord),E.print(" seg # = "+this.segmentIndex),E.println(" dist = "+this.dist)}},{key:"compareTo",value:function(E){var m=E;return this.compare(m.segmentIndex,m.dist)}},{key:"isEndPoint",value:function(E){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===E}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(E,m){return this.segmentIndex<E?-1:this.segmentIndex>E?1:this.dist<m?-1:this.dist>m?1:0}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var E=arguments[0],m=arguments[1],v=arguments[2];this.coord=new Be(E),this.segmentIndex=m,this.dist=v}}])})(),Qa=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"print",value:function(E){E.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(E)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(E){this.addEndpoints();for(var m=this.iterator(),v=m.next();m.hasNext();){var T=m.next(),q=this.createSplitEdge(v,T);E.add(q),v=T}}},{key:"addEndpoints",value:function(){var E=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[E],E,0)}},{key:"createSplitEdge",value:function(E,m){var v=m.segmentIndex-E.segmentIndex+2,T=this.edge.pts[m.segmentIndex],q=m.dist>0||!m.coord.equals2D(T);q||v--;var ne=new Array(v).fill(null),ve=0;ne[ve++]=new Be(E.coord);for(var De=E.segmentIndex+1;De<=m.segmentIndex;De++)ne[ve++]=this.edge.pts[De];return q&&(ne[ve]=m.coord),new ka(ne,new Rn(this.edge._label))}},{key:"add",value:function(E,m,v){var T=new yo(E,m,v),q=this._nodeMap.get(T);return q!==null?q:(this._nodeMap.put(T,T),T)}},{key:"isIntersection",value:function(E){for(var m=this.iterator();m.hasNext();)if(m.next().coord.equals(E))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new xi,this.edge=null;var E=arguments[0];this.edge=E}}])})(),iu=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])||E.isTrue(this._matrix[ke.INTERIOR][ke.BOUNDARY])||E.isTrue(this._matrix[ke.BOUNDARY][ke.INTERIOR])||E.isTrue(this._matrix[ke.BOUNDARY][ke.BOUNDARY]))&&this._matrix[ke.EXTERIOR][ke.INTERIOR]===rr.FALSE&&this._matrix[ke.EXTERIOR][ke.BOUNDARY]===rr.FALSE}},{key:"isCoveredBy",value:function(){return(E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])||E.isTrue(this._matrix[ke.INTERIOR][ke.BOUNDARY])||E.isTrue(this._matrix[ke.BOUNDARY][ke.INTERIOR])||E.isTrue(this._matrix[ke.BOUNDARY][ke.BOUNDARY]))&&this._matrix[ke.INTERIOR][ke.EXTERIOR]===rr.FALSE&&this._matrix[ke.BOUNDARY][ke.EXTERIOR]===rr.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var m=arguments[0],v=0;v<m.length;v++){var T=Math.trunc(v/3),q=v%3;this._matrix[T][q]=rr.toDimensionValue(m.charAt(v))}else if(arguments.length===3){var ne=arguments[0],ve=arguments[1],De=arguments[2];this._matrix[ne][ve]=De}}},{key:"isContains",value:function(){return E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])&&this._matrix[ke.EXTERIOR][ke.INTERIOR]===rr.FALSE&&this._matrix[ke.EXTERIOR][ke.BOUNDARY]===rr.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var m=arguments[0],v=0;v<m.length;v++){var T=Math.trunc(v/3),q=v%3;this.setAtLeast(T,q,rr.toDimensionValue(m.charAt(v)))}else if(arguments.length===3){var ne=arguments[0],ve=arguments[1],De=arguments[2];this._matrix[ne][ve]<De&&(this._matrix[ne][ve]=De)}}},{key:"setAtLeastIfValid",value:function(m,v,T){m>=0&&v>=0&&this.setAtLeast(m,v,T)}},{key:"isWithin",value:function(){return E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])&&this._matrix[ke.INTERIOR][ke.EXTERIOR]===rr.FALSE&&this._matrix[ke.BOUNDARY][ke.EXTERIOR]===rr.FALSE}},{key:"isTouches",value:function(m,v){return m>v?this.isTouches(v,m):(m===rr.A&&v===rr.A||m===rr.L&&v===rr.L||m===rr.L&&v===rr.A||m===rr.P&&v===rr.A||m===rr.P&&v===rr.L)&&this._matrix[ke.INTERIOR][ke.INTERIOR]===rr.FALSE&&(E.isTrue(this._matrix[ke.INTERIOR][ke.BOUNDARY])||E.isTrue(this._matrix[ke.BOUNDARY][ke.INTERIOR])||E.isTrue(this._matrix[ke.BOUNDARY][ke.BOUNDARY]))}},{key:"isOverlaps",value:function(m,v){return m===rr.P&&v===rr.P||m===rr.A&&v===rr.A?E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])&&E.isTrue(this._matrix[ke.INTERIOR][ke.EXTERIOR])&&E.isTrue(this._matrix[ke.EXTERIOR][ke.INTERIOR]):m===rr.L&&v===rr.L&&this._matrix[ke.INTERIOR][ke.INTERIOR]===1&&E.isTrue(this._matrix[ke.INTERIOR][ke.EXTERIOR])&&E.isTrue(this._matrix[ke.EXTERIOR][ke.INTERIOR])}},{key:"isEquals",value:function(m,v){return m===v&&E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])&&this._matrix[ke.INTERIOR][ke.EXTERIOR]===rr.FALSE&&this._matrix[ke.BOUNDARY][ke.EXTERIOR]===rr.FALSE&&this._matrix[ke.EXTERIOR][ke.INTERIOR]===rr.FALSE&&this._matrix[ke.EXTERIOR][ke.BOUNDARY]===rr.FALSE}},{key:"toString",value:function(){for(var m=new mo("123456789"),v=0;v<3;v++)for(var T=0;T<3;T++)m.setCharAt(3*v+T,rr.toDimensionSymbol(this._matrix[v][T]));return m.toString()}},{key:"setAll",value:function(m){for(var v=0;v<3;v++)for(var T=0;T<3;T++)this._matrix[v][T]=m}},{key:"get",value:function(m,v){return this._matrix[m][v]}},{key:"transpose",value:function(){var m=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=m,m=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=m,m=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=m,this}},{key:"matches",value:function(m){if(m.length!==9)throw new $("Should be length 9: "+m);for(var v=0;v<3;v++)for(var T=0;T<3;T++)if(!E.matches(this._matrix[v][T],m.charAt(3*v+T)))return!1;return!0}},{key:"add",value:function(m){for(var v=0;v<3;v++)for(var T=0;T<3;T++)this.setAtLeast(v,T,m.get(v,T))}},{key:"isDisjoint",value:function(){return this._matrix[ke.INTERIOR][ke.INTERIOR]===rr.FALSE&&this._matrix[ke.INTERIOR][ke.BOUNDARY]===rr.FALSE&&this._matrix[ke.BOUNDARY][ke.INTERIOR]===rr.FALSE&&this._matrix[ke.BOUNDARY][ke.BOUNDARY]===rr.FALSE}},{key:"isCrosses",value:function(m,v){return m===rr.P&&v===rr.L||m===rr.P&&v===rr.A||m===rr.L&&v===rr.A?E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])&&E.isTrue(this._matrix[ke.INTERIOR][ke.EXTERIOR]):m===rr.L&&v===rr.P||m===rr.A&&v===rr.P||m===rr.A&&v===rr.L?E.isTrue(this._matrix[ke.INTERIOR][ke.INTERIOR])&&E.isTrue(this._matrix[ke.EXTERIOR][ke.INTERIOR]):m===rr.L&&v===rr.L&&this._matrix[ke.INTERIOR][ke.INTERIOR]===0}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(rr.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var m=arguments[0];E.constructor_.call(this),this.set(m)}else if(arguments[0]instanceof E){var v=arguments[0];E.constructor_.call(this),this._matrix[ke.INTERIOR][ke.INTERIOR]=v._matrix[ke.INTERIOR][ke.INTERIOR],this._matrix[ke.INTERIOR][ke.BOUNDARY]=v._matrix[ke.INTERIOR][ke.BOUNDARY],this._matrix[ke.INTERIOR][ke.EXTERIOR]=v._matrix[ke.INTERIOR][ke.EXTERIOR],this._matrix[ke.BOUNDARY][ke.INTERIOR]=v._matrix[ke.BOUNDARY][ke.INTERIOR],this._matrix[ke.BOUNDARY][ke.BOUNDARY]=v._matrix[ke.BOUNDARY][ke.BOUNDARY],this._matrix[ke.BOUNDARY][ke.EXTERIOR]=v._matrix[ke.BOUNDARY][ke.EXTERIOR],this._matrix[ke.EXTERIOR][ke.INTERIOR]=v._matrix[ke.EXTERIOR][ke.INTERIOR],this._matrix[ke.EXTERIOR][ke.BOUNDARY]=v._matrix[ke.EXTERIOR][ke.BOUNDARY],this._matrix[ke.EXTERIOR][ke.EXTERIOR]=v._matrix[ke.EXTERIOR][ke.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var m=arguments[0],v=arguments[1];return v===rr.SYM_DONTCARE||v===rr.SYM_TRUE&&(m>=0||m===rr.TRUE)||v===rr.SYM_FALSE&&m===rr.FALSE||v===rr.SYM_P&&m===rr.P||v===rr.SYM_L&&m===rr.L||v===rr.SYM_A&&m===rr.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var T=arguments[1];return new E(arguments[0]).matches(T)}}},{key:"isTrue",value:function(m){return m>=0||m===rr.TRUE}}])})(),Aa=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(m){return m===null||m.length===0?null:(this.ensureCapacity(this._size+m.length),_r.arraycopy(m,0,this._data,this._size,m.length),void(this._size+=m.length))}},{key:"ensureCapacity",value:function(m){if(m<=this._data.length)return null;var v=Math.max(m,2*this._data.length);this._data=Gt.copyOf(this._data,v)}},{key:"toArray",value:function(){var m=new Array(this._size).fill(null);return _r.arraycopy(this._data,0,m,0,this._size),m}},{key:"add",value:function(m){this.ensureCapacity(this._size+1),this._data[this._size]=m,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)E.constructor_.call(this,10);else if(arguments.length===1){var m=arguments[0];this._data=new Array(m).fill(null)}}}])})(),Ol=(function(){function E(){i(this,E)}return a(E,[{key:"getChainStartIndices",value:function(m){var v=0,T=new Aa(Math.trunc(m.length/2));T.add(v);do{var q=this.findChainEnd(m,v);T.add(q),v=q}while(v<m.length-1);return T.toArray()}},{key:"findChainEnd",value:function(m,v){for(var T=Xi.quadrant(m[v],m[v+1]),q=v+1;q<m.length&&Xi.quadrant(m[q-1],m[q])===T;)q++;return q-1}},{key:"OLDgetChainStartIndices",value:function(m){var v=0,T=new ct;T.add(v);do{var q=this.findChainEnd(m,v);T.add(q),v=q}while(v<m.length-1);return E.toIntArray(T)}}],[{key:"toIntArray",value:function(m){for(var v=new Array(m.size()).fill(null),T=0;T<v.length;T++)v[T]=m.get(T).intValue();return v}}])})(),Ps=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(E){var m=this.pts[this.startIndex[E]].x,v=this.pts[this.startIndex[E+1]].x;return m>v?m:v}},{key:"getMinX",value:function(E){var m=this.pts[this.startIndex[E]].x,v=this.pts[this.startIndex[E+1]].x;return m<v?m:v}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var E=arguments[0],m=arguments[1],v=arguments[2],T=arguments[3];this.computeIntersectsForChain(this.startIndex[E],this.startIndex[E+1],m,m.startIndex[v],m.startIndex[v+1],T)}else if(arguments.length===6){var q=arguments[0],ne=arguments[1],ve=arguments[2],De=arguments[3],tt=arguments[4],dt=arguments[5];if(ne-q==1&&tt-De==1)return dt.addIntersections(this.e,q,ve.e,De),null;if(!this.overlaps(q,ne,ve,De,tt))return null;var tr=Math.trunc((q+ne)/2),ar=Math.trunc((De+tt)/2);q<tr&&(De<ar&&this.computeIntersectsForChain(q,tr,ve,De,ar,dt),ar<tt&&this.computeIntersectsForChain(q,tr,ve,ar,tt,dt)),tr<ne&&(De<ar&&this.computeIntersectsForChain(tr,ne,ve,De,ar,dt),ar<tt&&this.computeIntersectsForChain(tr,ne,ve,ar,tt,dt))}}},{key:"overlaps",value:function(E,m,v,T,q){return Ke.intersects(this.pts[E],this.pts[m],v.pts[T],v.pts[q])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(E,m){for(var v=0;v<this.startIndex.length-1;v++)for(var T=0;T<E.startIndex.length-1;T++)this.computeIntersectsForChain(v,E,T,m)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var E=arguments[0];this.e=E,this.pts=E.getCoordinates();var m=new Ol;this.startIndex=m.getChainStartIndices(this.pts)}}])})(),Zo=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"getDepth",value:function(m,v){return this._depth[m][v]}},{key:"setDepth",value:function(m,v,T){this._depth[m][v]=T}},{key:"isNull",value:function(){if(arguments.length===0){for(var m=0;m<2;m++)for(var v=0;v<3;v++)if(this._depth[m][v]!==E.NULL_VALUE)return!1;return!0}if(arguments.length===1){var T=arguments[0];return this._depth[T][1]===E.NULL_VALUE}if(arguments.length===2){var q=arguments[0],ne=arguments[1];return this._depth[q][ne]===E.NULL_VALUE}}},{key:"normalize",value:function(){for(var m=0;m<2;m++)if(!this.isNull(m)){var v=this._depth[m][1];this._depth[m][2]<v&&(v=this._depth[m][2]),v<0&&(v=0);for(var T=1;T<3;T++){var q=0;this._depth[m][T]>v&&(q=1),this._depth[m][T]=q}}}},{key:"getDelta",value:function(m){return this._depth[m][ht.RIGHT]-this._depth[m][ht.LEFT]}},{key:"getLocation",value:function(m,v){return this._depth[m][v]<=0?ke.EXTERIOR:ke.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var m=arguments[0],v=0;v<2;v++)for(var T=1;T<3;T++){var q=m.getLocation(v,T);q!==ke.EXTERIOR&&q!==ke.INTERIOR||(this.isNull(v,T)?this._depth[v][T]=E.depthAtLocation(q):this._depth[v][T]+=E.depthAtLocation(q))}else if(arguments.length===3){var ne=arguments[0],ve=arguments[1];arguments[2]===ke.INTERIOR&&this._depth[ne][ve]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var m=0;m<2;m++)for(var v=0;v<3;v++)this._depth[m][v]=E.NULL_VALUE}},{key:"depthAtLocation",value:function(m){return m===ke.EXTERIOR?0:m===ke.INTERIOR?1:E.NULL_VALUE}}])})();Zo.NULL_VALUE=-1;var ka=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var v=new Array(2).fill(null);return v[0]=this.pts[0],v[1]=this.pts[1],new m(v,Rn.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(v){this._isIsolated=v}},{key:"setName",value:function(v){this._name=v}},{key:"equals",value:function(v){if(!(v instanceof m))return!1;var T=v;if(this.pts.length!==T.pts.length)return!1;for(var q=!0,ne=!0,ve=this.pts.length,De=0;De<this.pts.length;De++)if(this.pts[De].equals2D(T.pts[De])||(q=!1),this.pts[De].equals2D(T.pts[--ve])||(ne=!1),!q&&!ne)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var v=arguments[0];return this.pts[v]}}},{key:"print",value:function(v){v.print("edge "+this._name+": "),v.print("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&v.print(","),v.print(this.pts[T].x+" "+this.pts[T].y);v.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(v){m.updateIM(this._label,v)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(v){v.print("edge "+this._name+": ");for(var T=this.pts.length-1;T>=0;T--)v.print(this.pts[T]+" ");v.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Ps(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Ke;for(var v=0;v<this.pts.length;v++)this._env.expandToInclude(this.pts[v])}return this._env}},{key:"addIntersection",value:function(v,T,q,ne){var ve=new Be(v.getIntersection(ne)),De=T,tt=v.getEdgeDistance(q,ne),dt=De+1;if(dt<this.pts.length){var tr=this.pts[dt];ve.equals2D(tr)&&(De=dt,tt=0)}this.eiList.add(ve,De,tt)}},{key:"toString",value:function(){var v=new mo;v.append("edge "+this._name+": "),v.append("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&v.append(","),v.append(this.pts[T].x+" "+this.pts[T].y);return v.append(")  "+this._label+" "+this._depthDelta),v.toString()}},{key:"isPointwiseEqual",value:function(v){if(this.pts.length!==v.pts.length)return!1;for(var T=0;T<this.pts.length;T++)if(!this.pts[T].equals2D(v.pts[T]))return!1;return!0}},{key:"setDepthDelta",value:function(v){this._depthDelta=v}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(v,T,q){for(var ne=0;ne<v.getIntersectionNum();ne++)this.addIntersection(v,T,q,ne)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Qa(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Zo,this._depthDelta=0,arguments.length===1){var v=arguments[0];m.constructor_.call(this,v,null)}else if(arguments.length===2){var T=arguments[0],q=arguments[1];this.pts=T,this._label=q}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof iu&&arguments[0]instanceof Rn))return P(m,"updateIM",this).apply(this,arguments);var v=arguments[0],T=arguments[1];T.setAtLeastIfValid(v.getLocation(0,ht.ON),v.getLocation(1,ht.ON),1),v.isArea()&&(T.setAtLeastIfValid(v.getLocation(0,ht.LEFT),v.getLocation(1,ht.LEFT),2),T.setAtLeastIfValid(v.getLocation(0,ht.RIGHT),v.getLocation(1,ht.RIGHT),2))}}])})(sn),hl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"setWorkingPrecisionModel",value:function(m){this._workingPrecisionModel=m}},{key:"insertUniqueEdge",value:function(m){var v=this._edgeList.findEqualEdge(m);if(v!==null){var T=v.getLabel(),q=m.getLabel();v.isPointwiseEqual(m)||(q=new Rn(m.getLabel())).flip(),T.merge(q);var ne=E.depthDelta(q),ve=v.getDepthDelta()+ne;v.setDepthDelta(ve)}else this._edgeList.add(m),m.setDepthDelta(E.depthDelta(m.getLabel()))}},{key:"buildSubgraphs",value:function(m,v){for(var T=new ct,q=m.iterator();q.hasNext();){var ne=q.next(),ve=ne.getRightmostCoordinate(),De=new Yo(T).getDepth(ve);ne.computeDepth(De),ne.findResultEdges(),T.add(ne),v.add(ne.getDirectedEdges(),ne.getNodes())}}},{key:"createSubgraphs",value:function(m){for(var v=new ct,T=m.getNodes().iterator();T.hasNext();){var q=T.next();if(!q.isVisited()){var ne=new Vt;ne.create(q),v.add(ne)}}return Wn.sort(v,Wn.reverseOrder()),v}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(m){if(this._workingNoder!==null)return this._workingNoder;var v=new qs,T=new Kr;return T.setPrecisionModel(m),v.setSegmentIntersector(new Dl(T)),v}},{key:"buffer",value:function(m,v){var T=this._workingPrecisionModel;T===null&&(T=m.getPrecisionModel()),this._geomFact=m.getFactory();var q=new nl(T,this._bufParams),ne=new ss(m,v,q).getCurves();if(ne.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(ne,T),this._graph=new So(new ls),this._graph.addEdges(this._edgeList.getEdges());var ve=this.createSubgraphs(this._graph),De=new ru(this._geomFact);this.buildSubgraphs(ve,De);var tt=De.getPolygons();return tt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(tt)}},{key:"computeNodedEdges",value:function(m,v){var T=this.getNoder(v);T.computeNodes(m);for(var q=T.getNodedSubstrings().iterator();q.hasNext();){var ne=q.next(),ve=ne.getCoordinates();if(ve.length!==2||!ve[0].equals2D(ve[1])){var De=ne.getData(),tt=new ka(ne.getCoordinates(),new Rn(De));this.insertUniqueEdge(tt)}}}},{key:"setNoder",value:function(m){this._workingNoder=m}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Tu;var m=arguments[0];this._bufParams=m}},{key:"depthDelta",value:function(m){var v=m.getLocation(0,ht.LEFT),T=m.getLocation(0,ht.RIGHT);return v===ke.INTERIOR&&T===ke.EXTERIOR?1:v===ke.EXTERIOR&&T===ke.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(m){for(var v=new ma,T=new ct;m.hasNext();){var q=m.next(),ne=v.createLineString(q.getCoordinates());T.add(ne)}return v.buildGeometry(T)}}])})(),$s=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"rescale",value:function(){if(yr(arguments[0],Nt))for(var m=arguments[0].iterator();m.hasNext();){var v=m.next();this.rescale(v.getCoordinates())}else if(arguments[0]instanceof Array){for(var T=arguments[0],q=0;q<T.length;q++)T[q].x=T[q].x/this._scaleFactor+this._offsetX,T[q].y=T[q].y/this._scaleFactor+this._offsetY;T.length===2&&T[0].equals2D(T[1])&&_r.out.println(T)}}},{key:"scale",value:function(){if(yr(arguments[0],Nt)){for(var m=arguments[0],v=new ct(m.size()),T=m.iterator();T.hasNext();){var q=T.next();v.add(new Mi(this.scale(q.getCoordinates()),q.getData()))}return v}if(arguments[0]instanceof Array){for(var ne=arguments[0],ve=new Array(ne.length).fill(null),De=0;De<ne.length;De++)ve[De]=new Be(Math.round((ne[De].x-this._offsetX)*this._scaleFactor),Math.round((ne[De].y-this._offsetY)*this._scaleFactor),ne[De].getZ());return Ni.removeRepeatedPoints(ve)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var m=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(m),m}},{key:"computeNodes",value:function(m){var v=m;this._isScaled&&(v=this.scale(m)),this._noder.computeNodes(v)}},{key:"interfaces_",get:function(){return[Ia]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var m=arguments[0],v=arguments[1];E.constructor_.call(this,m,v,0,0)}else if(arguments.length===4){var T=arguments[0],q=arguments[1];this._noder=T,this._scaleFactor=q,this._isScaled=!this.isIntegerPrecision()}}}])})(),Gs=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();){var v=m.next().getCoordinates();this.checkEndPtVertexIntersections(v[0],this._segStrings),this.checkEndPtVertexIntersections(v[v.length-1],this._segStrings)}else if(arguments.length===2){for(var T=arguments[0],q=arguments[1].iterator();q.hasNext();)for(var ne=q.next().getCoordinates(),ve=1;ve<ne.length-1;ve++)if(ne[ve].equals(T))throw new he("found endpt/interior pt intersection at index "+ve+" :pt "+T)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();)for(var v=m.next(),T=this._segStrings.iterator();T.hasNext();){var q=T.next();this.checkInteriorIntersections(v,q)}else if(arguments.length===2)for(var ne=arguments[0],ve=arguments[1],De=ne.getCoordinates(),tt=ve.getCoordinates(),dt=0;dt<De.length-1;dt++)for(var tr=0;tr<tt.length-1;tr++)this.checkInteriorIntersections(ne,dt,ve,tr);else if(arguments.length===4){var ar=arguments[0],Fr=arguments[1],fn=arguments[2],Cn=arguments[3];if(ar===fn&&Fr===Cn)return null;var Bn=ar.getCoordinates()[Fr],In=ar.getCoordinates()[Fr+1],gn=fn.getCoordinates()[Cn],Ui=fn.getCoordinates()[Cn+1];if(this._li.computeIntersection(Bn,In,gn,Ui),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Bn,In)||this.hasInteriorIntersection(this._li,gn,Ui)))throw new he("found non-noded intersection at "+Bn+"-"+In+" and "+gn+"-"+Ui)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var m=this._segStrings.iterator();m.hasNext();){var v=m.next();this.checkCollapses(v)}else if(arguments.length===1)for(var T=arguments[0].getCoordinates(),q=0;q<T.length-2;q++)this.checkCollapse(T[q],T[q+1],T[q+2])}},{key:"hasInteriorIntersection",value:function(m,v,T){for(var q=0;q<m.getIntersectionNum();q++){var ne=m.getIntersection(q);if(!ne.equals(v)&&!ne.equals(T))return!0}return!1}},{key:"checkCollapse",value:function(m,v,T){if(m.equals(T))throw new he("found non-noded collapse at "+E.fact.createLineString([m,v,T]))}}],[{key:"constructor_",value:function(){this._li=new Kr,this._segStrings=null;var m=arguments[0];this._segStrings=m}}])})();Gs.fact=new ma;var pl=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"intersectsScaled",value:function(m,v){var T=Math.min(m.x,v.x),q=Math.max(m.x,v.x),ne=Math.min(m.y,v.y),ve=Math.max(m.y,v.y),De=this._maxx<T||this._minx>q||this._maxy<ne||this._miny>ve;if(De)return!1;var tt=this.intersectsToleranceSquare(m,v);return we.isTrue(!(De&&tt),"Found bad envelope test"),tt}},{key:"initCorners",value:function(m){var v=.5;this._minx=m.x-v,this._maxx=m.x+v,this._miny=m.y-v,this._maxy=m.y+v,this._corner[0]=new Be(this._maxx,this._maxy),this._corner[1]=new Be(this._minx,this._maxy),this._corner[2]=new Be(this._minx,this._miny),this._corner[3]=new Be(this._maxx,this._miny)}},{key:"intersects",value:function(m,v){return this._scaleFactor===1?this.intersectsScaled(m,v):(this.copyScaled(m,this._p0Scaled),this.copyScaled(v,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(m){return Math.round(m*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(m,v){v.x=this.scale(m.x),v.y=this.scale(m.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var m=E.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ke(this._originalPt.x-m,this._originalPt.x+m,this._originalPt.y-m,this._originalPt.y+m)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(m,v){return this._li.computeIntersection(m,v,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,v,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,v,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(m,v,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(m,v){var T=!1,q=!1;return this._li.computeIntersection(m,v,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(m,v,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(T=!0),this._li.computeIntersection(m,v,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(q=!0),this._li.computeIntersection(m,v,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!T||!q)||!!m.equals(this._pt)||!!v.equals(this._pt))))}},{key:"addSnappedNode",value:function(m,v){var T=m.getCoordinate(v),q=m.getCoordinate(v+1);return!!this.intersects(T,q)&&(m.addIntersection(this.getCoordinate(),v),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var m=arguments[0],v=arguments[1],T=arguments[2];if(this._originalPt=m,this._pt=m,this._scaleFactor=v,this._li=T,v<=0)throw new $("Scale factor must be non-zero");v!==1&&(this._pt=new Be(this.scale(m.x),this.scale(m.y)),this._p0Scaled=new Be,this._p1Scaled=new Be),this.initCorners(this._pt)}}])})();pl.SAFE_ENV_EXPANSION_FACTOR=.75;var ml=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var E=arguments[1];arguments[0].getLineSegment(E,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Fi}}])})(),Us=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"snap",value:function(){if(arguments.length===1){var E=arguments[0];return this.snap(E,null,-1)}if(arguments.length===3){var m=arguments[0],v=arguments[1],T=arguments[2],q=m.getSafeEnvelope(),ne=new gl(m,v,T);return this._index.query(q,new((function(){return a((function ve(){i(this,ve)}),[{key:"interfaces_",get:function(){return[ue]}},{key:"visitItem",value:function(ve){ve.select(q,ne)}}])})())),ne.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var E=arguments[0];this._index=E}}])})(),gl=(function(E){function m(){var v;return i(this,m),v=n(this,m),m.constructor_.apply(v,arguments),v}return b(m,E),a(m,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof pi))return P(m,"select",this,1).apply(this,arguments);var v=arguments[1],T=arguments[0].getContext();if(this._parentEdge===T&&(v===this._hotPixelVertexIndex||v+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(T,v)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var v=arguments[0],T=arguments[1],q=arguments[2];this._hotPixel=v,this._parentEdge=T,this._hotPixelVertexIndex=q}}])})(ml);Us.HotPixelSnapAction=gl;var au=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"processIntersections",value:function(E,m,v,T){if(E===v&&m===T)return null;var q=E.getCoordinates()[m],ne=E.getCoordinates()[m+1],ve=v.getCoordinates()[T],De=v.getCoordinates()[T+1];if(this._li.computeIntersection(q,ne,ve,De),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var tt=0;tt<this._li.getIntersectionNum();tt++)this._interiorIntersections.add(this._li.getIntersection(tt));E.addIntersections(this._li,m,0),v.addIntersections(this._li,T,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Vs]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var E=arguments[0];this._li=E,this._interiorIntersections=new ct}}])})(),er=(function(){return a((function E(){i(this,E),E.constructor_.apply(this,arguments)}),[{key:"checkCorrectness",value:function(E){var m=Mi.getNodedSubstrings(E),v=new Gs(m);try{v.checkValid()}catch(T){if(!(T instanceof N))throw T;T.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Mi.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(E,m){var v=this.findInteriorIntersections(E,m);this.computeIntersectionSnaps(v),this.computeVertexSnaps(E)}},{key:"findInteriorIntersections",value:function(E,m){var v=new au(m);return this._noder.setSegmentIntersector(v),this._noder.computeNodes(E),v.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(yr(arguments[0],Nt))for(var E=arguments[0].iterator();E.hasNext();){var m=E.next();this.computeVertexSnaps(m)}else if(arguments[0]instanceof Mi)for(var v=arguments[0],T=v.getCoordinates(),q=0;q<T.length;q++){var ne=new pl(T[q],this._scaleFactor,this._li);this._pointSnapper.snap(ne,v,q)&&v.addIntersection(T[q],q)}}},{key:"computeNodes",value:function(E){this._nodedSegStrings=E,this._noder=new qs,this._pointSnapper=new Us(this._noder.getIndex()),this.snapRound(E,this._li)}},{key:"computeIntersectionSnaps",value:function(E){for(var m=E.iterator();m.hasNext();){var v=m.next(),T=new pl(v,this._scaleFactor,this._li);this._pointSnapper.snap(T)}}},{key:"interfaces_",get:function(){return[Ia]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var E=arguments[0];this._pm=E,this._li=new Kr,this._li.setPrecisionModel(E),this._scaleFactor=E.getScale()}}])})(),fr=(function(){function E(){i(this,E),E.constructor_.apply(this,arguments)}return a(E,[{key:"bufferFixedPrecision",value:function(m){var v=new $s(new er(new na(1)),m.getScale()),T=new hl(this._bufParams);T.setWorkingPrecisionModel(m),T.setNoder(v),this._resultGeometry=T.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var m=E.MAX_PRECISION_DIGITS;m>=0;m--){try{this.bufferReducedPrecision(m)}catch(ne){if(!(ne instanceof St))throw ne;this._saveException=ne}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var v=arguments[0],T=E.precisionScaleFactor(this._argGeom,this._distance,v),q=new na(T);this.bufferFixedPrecision(q)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var m=this._argGeom.getFactory().getPrecisionModel();m.getType()===na.FIXED?this.bufferFixedPrecision(m):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(m){this._bufParams.setQuadrantSegments(m)}},{key:"bufferOriginalPrecision",value:function(){try{var m=new hl(this._bufParams);this._resultGeometry=m.buffer(this._argGeom,this._distance)}catch(v){if(!(v instanceof he))throw v;this._saveException=v}}},{key:"getResultGeometry",value:function(m){return this._distance=m,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(m){this._bufParams.setEndCapStyle(m)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new B,this._resultGeometry=null,this._saveException=null,arguments.length===1){var m=arguments[0];this._argGeom=m}else if(arguments.length===2){var v=arguments[0],T=arguments[1];this._argGeom=v,this._bufParams=T}}},{key:"bufferOp",value:function(){if(arguments.length===2){var m=arguments[1];return new E(arguments[0]).getResultGeometry(m)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof it&&typeof arguments[1]=="number"){var v=arguments[1],T=arguments[2],q=new E(arguments[0]);return q.setQuadrantSegments(T),q.getResultGeometry(v)}if(arguments[2]instanceof B&&arguments[0]instanceof it&&typeof arguments[1]=="number"){var ne=arguments[1];return new E(arguments[0],arguments[2]).getResultGeometry(ne)}}else if(arguments.length===4){var ve=arguments[1],De=arguments[2],tt=arguments[3],dt=new E(arguments[0]);return dt.setQuadrantSegments(De),dt.setEndCapStyle(tt),dt.getResultGeometry(ve)}}},{key:"precisionScaleFactor",value:function(m,v,T){var q=m.getEnvelopeInternal(),ne=Nr.max(Math.abs(q.getMaxX()),Math.abs(q.getMaxY()),Math.abs(q.getMinX()),Math.abs(q.getMinY()))+2*(v>0?v:0),ve=T-Math.trunc(Math.log(ne)/Math.log(10)+1);return Math.pow(10,ve)}}])})();fr.CAP_ROUND=B.CAP_ROUND,fr.CAP_BUTT=B.CAP_FLAT,fr.CAP_FLAT=B.CAP_FLAT,fr.CAP_SQUARE=B.CAP_SQUARE,fr.MAX_PRECISION_DIGITS=12;var nn=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],bn=(function(){return a((function E(m){i(this,E),this.geometryFactory=m||new ma}),[{key:"read",value:function(E){var m,v=(m=typeof E=="string"?JSON.parse(E):E).type;if(!ci[v])throw new Error("Unknown GeoJSON type: "+m.type);return nn.indexOf(v)!==-1?ci[v].call(this,m.coordinates):v==="GeometryCollection"?ci[v].call(this,m.geometries):ci[v].call(this,m)}},{key:"write",value:function(E){var m=E.getGeometryType();if(!_n[m])throw new Error("Geometry is not supported");return _n[m].call(this,E)}}])})(),ci={Feature:function(E){var m={};for(var v in E)m[v]=E[v];if(E.geometry){var T=E.geometry.type;if(!ci[T])throw new Error("Unknown GeoJSON type: "+E.type);m.geometry=this.read(E.geometry)}return E.bbox&&(m.bbox=ci.bbox.call(this,E.bbox)),m},FeatureCollection:function(E){var m={};if(E.features){m.features=[];for(var v=0;v<E.features.length;++v)m.features.push(this.read(E.features[v]))}return E.bbox&&(m.bbox=this.parse.bbox.call(this,E.bbox)),m},coordinates:function(E){for(var m=[],v=0;v<E.length;++v){var T=E[v];m.push(o(Be,k(T)))}return m},bbox:function(E){return this.geometryFactory.createLinearRing([new Be(E[0],E[1]),new Be(E[2],E[1]),new Be(E[2],E[3]),new Be(E[0],E[3]),new Be(E[0],E[1])])},Point:function(E){var m=o(Be,k(E));return this.geometryFactory.createPoint(m)},MultiPoint:function(E){for(var m=[],v=0;v<E.length;++v)m.push(ci.Point.call(this,E[v]));return this.geometryFactory.createMultiPoint(m)},LineString:function(E){var m=ci.coordinates.call(this,E);return this.geometryFactory.createLineString(m)},MultiLineString:function(E){for(var m=[],v=0;v<E.length;++v)m.push(ci.LineString.call(this,E[v]));return this.geometryFactory.createMultiLineString(m)},Polygon:function(E){for(var m=ci.coordinates.call(this,E[0]),v=this.geometryFactory.createLinearRing(m),T=[],q=1;q<E.length;++q){var ne=E[q],ve=ci.coordinates.call(this,ne),De=this.geometryFactory.createLinearRing(ve);T.push(De)}return this.geometryFactory.createPolygon(v,T)},MultiPolygon:function(E){for(var m=[],v=0;v<E.length;++v){var T=E[v];m.push(ci.Polygon.call(this,T))}return this.geometryFactory.createMultiPolygon(m)},GeometryCollection:function(E){for(var m=[],v=0;v<E.length;++v){var T=E[v];m.push(this.read(T))}return this.geometryFactory.createGeometryCollection(m)}},_n={coordinate:function(E){var m=[E.x,E.y];return E.z&&m.push(E.z),E.m&&m.push(E.m),m},Point:function(E){return{type:"Point",coordinates:_n.coordinate.call(this,E.getCoordinate())}},MultiPoint:function(E){for(var m=[],v=0;v<E._geometries.length;++v){var T=E._geometries[v],q=_n.Point.call(this,T);m.push(q.coordinates)}return{type:"MultiPoint",coordinates:m}},LineString:function(E){for(var m=[],v=E.getCoordinates(),T=0;T<v.length;++T){var q=v[T];m.push(_n.coordinate.call(this,q))}return{type:"LineString",coordinates:m}},MultiLineString:function(E){for(var m=[],v=0;v<E._geometries.length;++v){var T=E._geometries[v],q=_n.LineString.call(this,T);m.push(q.coordinates)}return{type:"MultiLineString",coordinates:m}},Polygon:function(E){var m=[],v=_n.LineString.call(this,E._shell);m.push(v.coordinates);for(var T=0;T<E._holes.length;++T){var q=E._holes[T],ne=_n.LineString.call(this,q);m.push(ne.coordinates)}return{type:"Polygon",coordinates:m}},MultiPolygon:function(E){for(var m=[],v=0;v<E._geometries.length;++v){var T=E._geometries[v],q=_n.Polygon.call(this,T);m.push(q.coordinates)}return{type:"MultiPolygon",coordinates:m}},GeometryCollection:function(E){for(var m=[],v=0;v<E._geometries.length;++v){var T=E._geometries[v],q=T.getGeometryType();m.push(_n[q].call(this,T))}return{type:"GeometryCollection",geometries:m}}};return{BufferOp:fr,GeoJSONReader:(function(){return a((function E(m){i(this,E),this.parser=new bn(m||new ma)}),[{key:"read",value:function(E){return this.parser.read(E)}}])})(),GeoJSONWriter:(function(){return a((function E(){i(this,E),this.parser=new bn(this.geometryFactory)}),[{key:"write",value:function(E){return this.parser.write(E)}}])})()}}))})(fx)),fx.exports}var Gpe=$pe();const Upe=Sf(Gpe);function wp(){return new Qx}function Qx(){this.reset()}Qx.prototype={constructor:Qx,reset:function(){this.s=this.t=0},add:function(e){_6(L_,e,this.t),_6(this,L_.s,this.s),this.s?this.t+=L_.t:this.s=L_.t},valueOf:function(){return this.s}};var L_=new Qx;function _6(e,t,r){var n=e.s=t+r,i=n-t,o=n-i;e.t=t-o+(r-i)}var wo=1e-6,wa=Math.PI,ff=wa/2,x6=wa/4,xf=wa*2,Xh=180/wa,Vc=wa/180,Al=Math.abs,Hpe=Math.atan,Wy=Math.atan2,ts=Math.cos,rs=Math.sin,uv=Math.sqrt;function Y$(e){return e>1?0:e<-1?wa:Math.acos(e)}function Pm(e){return e>1?ff:e<-1?-ff:Math.asin(e)}function w0(){}function e2(e,t){e&&S6.hasOwnProperty(e.type)&&S6[e.type](e,t)}var w6={Feature:function(e,t){e2(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)e2(r[n].geometry,t)}},S6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){J3(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)J3(r[n],t,0)},Polygon:function(e,t){C6(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)C6(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)e2(r[n],t)}};function J3(e,t,r){var n=-1,i=e.length-r,o;for(t.lineStart();++n<i;)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function C6(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)J3(e[r],t,1);t.polygonEnd()}function Wpe(e,t){e&&w6.hasOwnProperty(e.type)?w6[e.type](e,t):e2(e,t)}wp();wp();function Q3(e){return[Wy(e[1],e[0]),Pm(e[2])]}function Xy(e){var t=e[0],r=e[1],n=ts(r);return[n*ts(t),n*rs(t),rs(r)]}function R_(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function t2(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mC(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function D_(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function eI(e){var t=uv(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}wp();function Z$(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function tI(e,t){return[e>wa?e-xf:e<-wa?e+xf:e,t]}tI.invert=tI;function Xpe(e,t,r){return(e%=xf)?t||r?Z$(T6(e),I6(t,r)):T6(e):t||r?I6(t,r):tI}function E6(e){return function(t,r){return t+=e,[t>wa?t-xf:t<-wa?t+xf:t,r]}}function T6(e){var t=E6(e);return t.invert=E6(-e),t}function I6(e,t){var r=ts(e),n=rs(e),i=ts(t),o=rs(t);function u(a,f){var p=ts(f),g=ts(a)*p,b=rs(a)*p,S=rs(f),_=S*r+g*n;return[Wy(b*i-_*o,g*r-S*n),Pm(_*i+b*o)]}return u.invert=function(a,f){var p=ts(f),g=ts(a)*p,b=rs(a)*p,S=rs(f),_=S*i-b*o;return[Wy(b*i+S*o,g*r+_*n),Pm(_*r-g*n)]},u}function Ype(e,t,r,n,i,o){if(r){var u=ts(t),a=rs(t),f=n*r;i==null?(i=t+n*xf,o=t-f/2):(i=P6(u,i),o=P6(u,o),(n>0?i<o:i>o)&&(i+=n*xf));for(var p,g=i;n>0?g>o:g<o;g-=f)p=Q3([u,-a*ts(g),-a*rs(g)]),e.point(p[0],p[1])}}function P6(e,t){t=Xy(t),t[0]-=e,eI(t);var r=Y$(-t[1]);return((-t[2]<0?-r:r)+xf-wo)%xf}function K$(){var e=[],t;return{point:function(r,n){t.push([r,n])},lineStart:function(){e.push(t=[])},lineEnd:w0,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Zpe(e,t,r,n,i,o){var u=e[0],a=e[1],f=t[0],p=t[1],g=0,b=1,S=f-u,_=p-a,P;if(P=r-u,!(!S&&P>0)){if(P/=S,S<0){if(P<g)return;P<b&&(b=P)}else if(S>0){if(P>b)return;P>g&&(g=P)}if(P=i-u,!(!S&&P<0)){if(P/=S,S<0){if(P>b)return;P>g&&(g=P)}else if(S>0){if(P<g)return;P<b&&(b=P)}if(P=n-a,!(!_&&P>0)){if(P/=_,_<0){if(P<g)return;P<b&&(b=P)}else if(_>0){if(P>b)return;P>g&&(g=P)}if(P=o-a,!(!_&&P<0)){if(P/=_,_<0){if(P>b)return;P>g&&(g=P)}else if(_>0){if(P<g)return;P<b&&(b=P)}return g>0&&(e[0]=u+g*S,e[1]=a+g*_),b<1&&(t[0]=u+b*S,t[1]=a+b*_),!0}}}}}function hx(e,t){return Al(e[0]-t[0])<wo&&Al(e[1]-t[1])<wo}function O_(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function J$(e,t,r,n,i){var o=[],u=[],a,f;if(e.forEach(function(P){if(!((k=P.length-1)<=0)){var k,M=P[0],D=P[k],F;if(hx(M,D)){for(i.lineStart(),a=0;a<k;++a)i.point((M=P[a])[0],M[1]);i.lineEnd();return}o.push(F=new O_(M,P,null,!0)),u.push(F.o=new O_(M,null,F,!1)),o.push(F=new O_(D,P,null,!1)),u.push(F.o=new O_(D,null,F,!0))}}),!!o.length){for(u.sort(t),A6(o),A6(u),a=0,f=u.length;a<f;++a)u[a].e=r=!r;for(var p=o[0],g,b;;){for(var S=p,_=!0;S.v;)if((S=S.n)===p)return;g=S.z,i.lineStart();do{if(S.v=S.o.v=!0,S.e){if(_)for(a=0,f=g.length;a<f;++a)i.point((b=g[a])[0],b[1]);else n(S.x,S.n.x,1,i);S=S.n}else{if(_)for(g=S.p.z,a=g.length-1;a>=0;--a)i.point((b=g[a])[0],b[1]);else n(S.x,S.p.x,-1,i);S=S.p}S=S.o,g=S.z,_=!_}while(!S.v);i.lineEnd()}}}function A6(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function Q$(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Kpe(e){return e.length===1&&(e=Jpe(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)<0?n=o+1:i=o}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)>0?i=o:n=o+1}return n}}}function Jpe(e){return function(t,r){return Q$(e(t),r)}}Kpe(Q$);function eG(e){for(var t=e.length,r,n=-1,i=0,o,u;++n<t;)i+=e[n].length;for(o=new Array(i);--t>=0;)for(u=e[t],r=u.length;--r>=0;)o[--i]=u[r];return o}var S0=1e9,N_=-S0;function Qpe(e,t,r,n){function i(p,g){return e<=p&&p<=r&&t<=g&&g<=n}function o(p,g,b,S){var _=0,P=0;if(p==null||(_=u(p,b))!==(P=u(g,b))||f(p,g)<0^b>0)do S.point(_===0||_===3?e:r,_>1?n:t);while((_=(_+b+4)%4)!==P);else S.point(g[0],g[1])}function u(p,g){return Al(p[0]-e)<wo?g>0?0:3:Al(p[0]-r)<wo?g>0?2:1:Al(p[1]-t)<wo?g>0?1:0:g>0?3:2}function a(p,g){return f(p.x,g.x)}function f(p,g){var b=u(p,1),S=u(g,1);return b!==S?b-S:b===0?g[1]-p[1]:b===1?p[0]-g[0]:b===2?p[1]-g[1]:g[0]-p[0]}return function(p){var g=p,b=K$(),S,_,P,k,M,D,F,B,N,$,V,U={point:X,lineStart:H,lineEnd:ae,polygonStart:oe,polygonEnd:re};function X(de,fe){i(de,fe)&&g.point(de,fe)}function Z(){for(var de=0,fe=0,Le=_.length;fe<Le;++fe)for(var ye=_[fe],xe=1,Se=ye.length,Re=ye[0],he,Ee,we=Re[0],Ne=Re[1];xe<Se;++xe)he=we,Ee=Ne,Re=ye[xe],we=Re[0],Ne=Re[1],Ee<=n?Ne>n&&(we-he)*(n-Ee)>(Ne-Ee)*(e-he)&&++de:Ne<=n&&(we-he)*(n-Ee)<(Ne-Ee)*(e-he)&&--de;return de}function oe(){g=b,S=[],_=[],V=!0}function re(){var de=Z(),fe=V&&de,Le=(S=eG(S)).length;(fe||Le)&&(p.polygonStart(),fe&&(p.lineStart(),o(null,null,1,p),p.lineEnd()),Le&&J$(S,a,de,o,p),p.polygonEnd()),g=p,S=_=P=null}function H(){U.point=se,_&&_.push(P=[]),$=!0,N=!1,F=B=NaN}function ae(){S&&(se(k,M),D&&N&&b.rejoin(),S.push(b.result())),U.point=X,N&&g.lineEnd()}function se(de,fe){var Le=i(de,fe);if(_&&P.push([de,fe]),$)k=de,M=fe,D=Le,$=!1,Le&&(g.lineStart(),g.point(de,fe));else if(Le&&N)g.point(de,fe);else{var ye=[F=Math.max(N_,Math.min(S0,F)),B=Math.max(N_,Math.min(S0,B))],xe=[de=Math.max(N_,Math.min(S0,de)),fe=Math.max(N_,Math.min(S0,fe))];Zpe(ye,xe,e,t,r,n)?(N||(g.lineStart(),g.point(ye[0],ye[1])),g.point(xe[0],xe[1]),Le||g.lineEnd(),V=!1):Le&&(g.lineStart(),g.point(de,fe),V=!1)}F=de,B=fe,N=Le}return U}}var gC=wp();function eme(e,t){var r=t[0],n=t[1],i=[rs(r),-ts(r),0],o=0,u=0;gC.reset();for(var a=0,f=e.length;a<f;++a)if(g=(p=e[a]).length)for(var p,g,b=p[g-1],S=b[0],_=b[1]/2+x6,P=rs(_),k=ts(_),M=0;M<g;++M,S=F,P=N,k=$,b=D){var D=p[M],F=D[0],B=D[1]/2+x6,N=rs(B),$=ts(B),V=F-S,U=V>=0?1:-1,X=U*V,Z=X>wa,oe=P*N;if(gC.add(Wy(oe*U*rs(X),k*$+oe*ts(X))),o+=Z?V+U*xf:V,Z^S>=r^F>=r){var re=t2(Xy(b),Xy(D));eI(re);var H=t2(i,re);eI(H);var ae=(Z^V>=0?-1:1)*Pm(H[2]);(n>ae||n===ae&&(re[0]||re[1]))&&(u+=Z^V>=0?1:-1)}}return(o<-wo||o<wo&&gC<-wo)^u&1}wp();function k6(e){return e}wp();wp();var Yy=1/0,r2=Yy,v1=-Yy,n2=v1,M6={point:tme,lineStart:w0,lineEnd:w0,polygonStart:w0,polygonEnd:w0,result:function(){var e=[[Yy,r2],[v1,n2]];return v1=n2=-(r2=Yy=1/0),e}};function tme(e,t){e<Yy&&(Yy=e),e>v1&&(v1=e),t<r2&&(r2=t),t>n2&&(n2=t)}wp();function tG(e,t,r,n){return function(i,o){var u=t(o),a=i.invert(n[0],n[1]),f=K$(),p=t(f),g=!1,b,S,_,P={point:k,lineStart:D,lineEnd:F,polygonStart:function(){P.point=B,P.lineStart=N,P.lineEnd=$,S=[],b=[]},polygonEnd:function(){P.point=k,P.lineStart=D,P.lineEnd=F,S=eG(S);var V=eme(b,a);S.length?(g||(o.polygonStart(),g=!0),J$(S,nme,V,r,o)):V&&(g||(o.polygonStart(),g=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),S=b=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function k(V,U){var X=i(V,U);e(V=X[0],U=X[1])&&o.point(V,U)}function M(V,U){var X=i(V,U);u.point(X[0],X[1])}function D(){P.point=M,u.lineStart()}function F(){P.point=k,u.lineEnd()}function B(V,U){_.push([V,U]);var X=i(V,U);p.point(X[0],X[1])}function N(){p.lineStart(),_=[]}function $(){B(_[0][0],_[0][1]),p.lineEnd();var V=p.clean(),U=f.result(),X,Z=U.length,oe,re,H;if(_.pop(),b.push(_),_=null,!!Z){if(V&1){if(re=U[0],(oe=re.length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),X=0;X<oe;++X)o.point((H=re[X])[0],H[1]);o.lineEnd()}return}Z>1&&V&2&&U.push(U.pop().concat(U.shift())),S.push(U.filter(rme))}}return P}}function rme(e){return e.length>1}function nme(e,t){return((e=e.x)[0]<0?e[1]-ff-wo:ff-e[1])-((t=t.x)[0]<0?t[1]-ff-wo:ff-t[1])}const L6=tG(function(){return!0},ime,ome,[-wa,-ff]);function ime(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,u){var a=o>0?wa:-wa,f=Al(o-t);Al(f-wa)<wo?(e.point(t,r=(r+u)/2>0?ff:-ff),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),i=0):n!==a&&f>=wa&&(Al(t-n)<wo&&(t-=n*wo),Al(o-a)<wo&&(o-=a*wo),r=ame(t,r,o,u),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=o,r=u),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function ame(e,t,r,n){var i,o,u=rs(e-r);return Al(u)>wo?Hpe((rs(t)*(o=ts(n))*rs(r)-rs(n)*(i=ts(t))*rs(e))/(i*o*u)):(t+n)/2}function ome(e,t,r,n){var i;if(e==null)i=r*ff,n.point(-wa,i),n.point(0,i),n.point(wa,i),n.point(wa,0),n.point(wa,-i),n.point(0,-i),n.point(-wa,-i),n.point(-wa,0),n.point(-wa,i);else if(Al(e[0]-t[0])>wo){var o=e[0]<t[0]?wa:-wa;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])}function sme(e,t){var r=ts(e),n=r>0,i=Al(r)>wo;function o(g,b,S,_){Ype(_,e,t,S,g,b)}function u(g,b){return ts(g)*ts(b)>r}function a(g){var b,S,_,P,k;return{lineStart:function(){P=_=!1,k=1},point:function(M,D){var F=[M,D],B,N=u(M,D),$=n?N?0:p(M,D):N?p(M+(M<0?wa:-wa),D):0;if(!b&&(P=_=N)&&g.lineStart(),N!==_&&(B=f(b,F),(!B||hx(b,B)||hx(F,B))&&(F[0]+=wo,F[1]+=wo,N=u(F[0],F[1]))),N!==_)k=0,N?(g.lineStart(),B=f(F,b),g.point(B[0],B[1])):(B=f(b,F),g.point(B[0],B[1]),g.lineEnd()),b=B;else if(i&&b&&n^N){var V;!($&S)&&(V=f(F,b,!0))&&(k=0,n?(g.lineStart(),g.point(V[0][0],V[0][1]),g.point(V[1][0],V[1][1]),g.lineEnd()):(g.point(V[1][0],V[1][1]),g.lineEnd(),g.lineStart(),g.point(V[0][0],V[0][1])))}N&&(!b||!hx(b,F))&&g.point(F[0],F[1]),b=F,_=N,S=$},lineEnd:function(){_&&g.lineEnd(),b=null},clean:function(){return k|(P&&_)<<1}}}function f(g,b,S){var _=Xy(g),P=Xy(b),k=[1,0,0],M=t2(_,P),D=R_(M,M),F=M[0],B=D-F*F;if(!B)return!S&&g;var N=r*D/B,$=-r*F/B,V=t2(k,M),U=D_(k,N),X=D_(M,$);mC(U,X);var Z=V,oe=R_(U,Z),re=R_(Z,Z),H=oe*oe-re*(R_(U,U)-1);if(!(H<0)){var ae=uv(H),se=D_(Z,(-oe-ae)/re);if(mC(se,U),se=Q3(se),!S)return se;var de=g[0],fe=b[0],Le=g[1],ye=b[1],xe;fe<de&&(xe=de,de=fe,fe=xe);var Se=fe-de,Re=Al(Se-wa)<wo,he=Re||Se<wo;if(!Re&&ye<Le&&(xe=Le,Le=ye,ye=xe),he?Re?Le+ye>0^se[1]<(Al(se[0]-de)<wo?Le:ye):Le<=se[1]&&se[1]<=ye:Se>wa^(de<=se[0]&&se[0]<=fe)){var Ee=D_(Z,(-oe+ae)/re);return mC(Ee,U),[se,Q3(Ee)]}}}function p(g,b){var S=n?e:wa-e,_=0;return g<-S?_|=1:g>S&&(_|=2),b<-S?_|=4:b>S&&(_|=8),_}return tG(u,a,o,n?[0,-e]:[-wa,e-wa])}function rG(e){return function(t){var r=new rI;for(var n in e)r[n]=e[n];return r.stream=t,r}}function rI(){}rI.prototype={constructor:rI,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function nG(e,t,r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),Wpe(r,e.stream(M6));var u=M6.result(),a=Math.min(n/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),f=+t[0][0]+(n-a*(u[1][0]+u[0][0]))/2,p=+t[0][1]+(i-a*(u[1][1]+u[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([f,p])}function lme(e,t,r){return nG(e,[[0,0],t],r)}var R6=16,ume=ts(30*Vc);function D6(e,t){return+t?dme(e,t):cme(e)}function cme(e){return rG({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function dme(e,t){function r(n,i,o,u,a,f,p,g,b,S,_,P,k,M){var D=p-n,F=g-i,B=D*D+F*F;if(B>4*t&&k--){var N=u+S,$=a+_,V=f+P,U=uv(N*N+$*$+V*V),X=Pm(V/=U),Z=Al(Al(V)-1)<wo||Al(o-b)<wo?(o+b)/2:Wy($,N),oe=e(Z,X),re=oe[0],H=oe[1],ae=re-n,se=H-i,de=F*ae-D*se;(de*de/B>t||Al((D*ae+F*se)/B-.5)>.3||u*S+a*_+f*P<ume)&&(r(n,i,o,u,a,f,re,H,Z,N/=U,$/=U,V,k,M),M.point(re,H),r(re,H,Z,N,$,V,p,g,b,S,_,P,k,M))}}return function(n){var i,o,u,a,f,p,g,b,S,_,P,k,M={point:D,lineStart:F,lineEnd:N,polygonStart:function(){n.polygonStart(),M.lineStart=$},polygonEnd:function(){n.polygonEnd(),M.lineStart=F}};function D(X,Z){X=e(X,Z),n.point(X[0],X[1])}function F(){b=NaN,M.point=B,n.lineStart()}function B(X,Z){var oe=Xy([X,Z]),re=e(X,Z);r(b,S,g,_,P,k,b=re[0],S=re[1],g=X,_=oe[0],P=oe[1],k=oe[2],R6,n),n.point(b,S)}function N(){M.point=D,n.lineEnd()}function $(){F(),M.point=V,M.lineEnd=U}function V(X,Z){B(i=X,Z),o=b,u=S,a=_,f=P,p=k,M.point=B}function U(){r(b,S,g,_,P,k,o,u,i,a,f,p,R6,n),M.lineEnd=N,N()}return M}}var fme=rG({point:function(e,t){this.stream.point(e*Vc,t*Vc)}});function hme(e){return pme(function(){return e})()}function pme(e){var t,r=150,n=480,i=250,o,u,a=0,f=0,p=0,g=0,b=0,S,_,P=null,k=L6,M=null,D,F,B,N=k6,$=.5,V=D6(re,$),U,X;function Z(se){return se=_(se[0]*Vc,se[1]*Vc),[se[0]*r+o,u-se[1]*r]}function oe(se){return se=_.invert((se[0]-o)/r,(u-se[1])/r),se&&[se[0]*Xh,se[1]*Xh]}function re(se,de){return se=t(se,de),[se[0]*r+o,u-se[1]*r]}Z.stream=function(se){return U&&X===se?U:U=fme(k(S,V(N(X=se))))},Z.clipAngle=function(se){return arguments.length?(k=+se?sme(P=se*Vc,6*Vc):(P=null,L6),ae()):P*Xh},Z.clipExtent=function(se){return arguments.length?(N=se==null?(M=D=F=B=null,k6):Qpe(M=+se[0][0],D=+se[0][1],F=+se[1][0],B=+se[1][1]),ae()):M==null?null:[[M,D],[F,B]]},Z.scale=function(se){return arguments.length?(r=+se,H()):r},Z.translate=function(se){return arguments.length?(n=+se[0],i=+se[1],H()):[n,i]},Z.center=function(se){return arguments.length?(a=se[0]%360*Vc,f=se[1]%360*Vc,H()):[a*Xh,f*Xh]},Z.rotate=function(se){return arguments.length?(p=se[0]%360*Vc,g=se[1]%360*Vc,b=se.length>2?se[2]%360*Vc:0,H()):[p*Xh,g*Xh,b*Xh]},Z.precision=function(se){return arguments.length?(V=D6(re,$=se*se),ae()):uv($)},Z.fitExtent=function(se,de){return nG(Z,se,de)},Z.fitSize=function(se,de){return lme(Z,se,de)};function H(){_=Z$(S=Xpe(p,g,b),t);var se=t(a,f);return o=n-se[0]*r,u=i+se[1]*r,ae()}function ae(){return U=X=null,Z}return function(){return t=e.apply(this,arguments),Z.invert=t.invert&&oe,H()}}function iG(e){return function(t,r){var n=ts(t),i=ts(r),o=e(n*i);return[o*i*rs(t),o*rs(r)]}}function aG(e){return function(t,r){var n=uv(t*t+r*r),i=e(n),o=rs(i),u=ts(i);return[Wy(t*o,n*u),Pm(n&&r*o/n)]}}var mme=iG(function(e){return uv(2/(1+e))});mme.invert=aG(function(e){return 2*Pm(e/2)});var oG=iG(function(e){return(e=Y$(e))&&e/rs(e)});oG.invert=aG(function(e){return e});function gme(){return hme(oG).scale(79.4188).clipAngle(180-.001)}function O6(e,t){return[e,t]}O6.invert=O6;var{BufferOp:yme,GeoJSONReader:vme,GeoJSONWriter:bme}=Upe;function _me(e,t,r){r=r||{};var n=r.units||"kilometers",i=r.steps||8;if(!e)throw new Error("geojson is required");if(typeof r!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return Rw(e,function(u){var a=px(u,t,n,i);a&&o.push(a)}),yh(o);case"FeatureCollection":return f6(e,function(u){var a=px(u,t,n,i);a&&f6(a,function(f){f&&o.push(f)})}),yh(o)}return px(e,t,n,i)}function px(e,t,r,n){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var u=[];return Rw(e,function(k){var M=px(k,t,r,n);M&&u.push(M)}),yh(u)}var a=xme(o),f={type:o.type,coordinates:lG(o.coordinates,a)},p=new vme,g=p.read(f),b=G$(UA(t,r),"meters"),S=yme.bufferOp(g,b,n),_=new bme;if(S=_.write(S),!sG(S.coordinates)){var P={type:S.type,coordinates:uG(S.coordinates,a)};return Im(P,i)}}function sG(e){return Array.isArray(e[0])?sG(e[0]):isNaN(e[0])}function lG(e,t){return typeof e[0]!="object"?t(e):e.map(function(r){return lG(r,t)})}function uG(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(r){return uG(r,t)})}function xme(e){var t=qpe(e).geometry.coordinates,r=[-t[0],-t[1]];return gme().rotate(r).scale(_u)}function N6(e,t={}){let r=0,n=0,i=0;return lv(e,function(o){r+=o[0],n+=o[1],i++},!0),id([r/i,n/i],t.properties)}var F_={exports:{}},mx={exports:{}},wme=mx.exports,F6;function Sme(){return F6||(F6=1,(function(e,t){(function(r,n){e.exports=n()})(wme,function(){function r(F,B,N,$,V){(function U(X,Z,oe,re,H){for(;re>oe;){if(re-oe>600){var ae=re-oe+1,se=Z-oe+1,de=Math.log(ae),fe=.5*Math.exp(2*de/3),Le=.5*Math.sqrt(de*fe*(ae-fe)/ae)*(se-ae/2<0?-1:1),ye=Math.max(oe,Math.floor(Z-se*fe/ae+Le)),xe=Math.min(re,Math.floor(Z+(ae-se)*fe/ae+Le));U(X,Z,ye,xe,H)}var Se=X[Z],Re=oe,he=re;for(n(X,oe,Z),H(X[re],Se)>0&&n(X,oe,re);Re<he;){for(n(X,Re,he),Re++,he--;H(X[Re],Se)<0;)Re++;for(;H(X[he],Se)>0;)he--}H(X[oe],Se)===0?n(X,oe,he):n(X,++he,re),he<=Z&&(oe=he+1),Z<=he&&(re=he-1)}})(F,B,N||0,$||F.length-1,V||i)}function n(F,B,N){var $=F[B];F[B]=F[N],F[N]=$}function i(F,B){return F<B?-1:F>B?1:0}var o=function(F){F===void 0&&(F=9),this._maxEntries=Math.max(4,F),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function u(F,B,N){if(!N)return B.indexOf(F);for(var $=0;$<B.length;$++)if(N(F,B[$]))return $;return-1}function a(F,B){f(F,0,F.children.length,B,F)}function f(F,B,N,$,V){V||(V=M(null)),V.minX=1/0,V.minY=1/0,V.maxX=-1/0,V.maxY=-1/0;for(var U=B;U<N;U++){var X=F.children[U];p(V,F.leaf?$(X):X)}return V}function p(F,B){return F.minX=Math.min(F.minX,B.minX),F.minY=Math.min(F.minY,B.minY),F.maxX=Math.max(F.maxX,B.maxX),F.maxY=Math.max(F.maxY,B.maxY),F}function g(F,B){return F.minX-B.minX}function b(F,B){return F.minY-B.minY}function S(F){return(F.maxX-F.minX)*(F.maxY-F.minY)}function _(F){return F.maxX-F.minX+(F.maxY-F.minY)}function P(F,B){return F.minX<=B.minX&&F.minY<=B.minY&&B.maxX<=F.maxX&&B.maxY<=F.maxY}function k(F,B){return B.minX<=F.maxX&&B.minY<=F.maxY&&B.maxX>=F.minX&&B.maxY>=F.minY}function M(F){return{children:F,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(F,B,N,$,V){for(var U=[B,N];U.length;)if(!((N=U.pop())-(B=U.pop())<=$)){var X=B+Math.ceil((N-B)/$/2)*$;r(F,X,B,N,V),U.push(B,X,X,N)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(F){var B=this.data,N=[];if(!k(F,B))return N;for(var $=this.toBBox,V=[];B;){for(var U=0;U<B.children.length;U++){var X=B.children[U],Z=B.leaf?$(X):X;k(F,Z)&&(B.leaf?N.push(X):P(F,Z)?this._all(X,N):V.push(X))}B=V.pop()}return N},o.prototype.collides=function(F){var B=this.data;if(!k(F,B))return!1;for(var N=[];B;){for(var $=0;$<B.children.length;$++){var V=B.children[$],U=B.leaf?this.toBBox(V):V;if(k(F,U)){if(B.leaf||P(F,U))return!0;N.push(V)}}B=N.pop()}return!1},o.prototype.load=function(F){if(!F||!F.length)return this;if(F.length<this._minEntries){for(var B=0;B<F.length;B++)this.insert(F[B]);return this}var N=this._build(F.slice(),0,F.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var $=this.data;this.data=N,N=$}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},o.prototype.insert=function(F){return F&&this._insert(F,this.data.height-1),this},o.prototype.clear=function(){return this.data=M([]),this},o.prototype.remove=function(F,B){if(!F)return this;for(var N,$,V,U=this.data,X=this.toBBox(F),Z=[],oe=[];U||Z.length;){if(U||(U=Z.pop(),$=Z[Z.length-1],N=oe.pop(),V=!0),U.leaf){var re=u(F,U.children,B);if(re!==-1)return U.children.splice(re,1),Z.push(U),this._condense(Z),this}V||U.leaf||!P(U,X)?$?(N++,U=$.children[N],V=!1):U=null:(Z.push(U),oe.push(N),N=0,$=U,U=U.children[0])}return this},o.prototype.toBBox=function(F){return F},o.prototype.compareMinX=function(F,B){return F.minX-B.minX},o.prototype.compareMinY=function(F,B){return F.minY-B.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(F){return this.data=F,this},o.prototype._all=function(F,B){for(var N=[];F;)F.leaf?B.push.apply(B,F.children):N.push.apply(N,F.children),F=N.pop();return B},o.prototype._build=function(F,B,N,$){var V,U=N-B+1,X=this._maxEntries;if(U<=X)return a(V=M(F.slice(B,N+1)),this.toBBox),V;$||($=Math.ceil(Math.log(U)/Math.log(X)),X=Math.ceil(U/Math.pow(X,$-1))),(V=M([])).leaf=!1,V.height=$;var Z=Math.ceil(U/X),oe=Z*Math.ceil(Math.sqrt(X));D(F,B,N,oe,this.compareMinX);for(var re=B;re<=N;re+=oe){var H=Math.min(re+oe-1,N);D(F,re,H,Z,this.compareMinY);for(var ae=re;ae<=H;ae+=Z){var se=Math.min(ae+Z-1,H);V.children.push(this._build(F,ae,se,$-1))}}return a(V,this.toBBox),V},o.prototype._chooseSubtree=function(F,B,N,$){for(;$.push(B),!B.leaf&&$.length-1!==N;){for(var V=1/0,U=1/0,X=void 0,Z=0;Z<B.children.length;Z++){var oe=B.children[Z],re=S(oe),H=(ae=F,se=oe,(Math.max(se.maxX,ae.maxX)-Math.min(se.minX,ae.minX))*(Math.max(se.maxY,ae.maxY)-Math.min(se.minY,ae.minY))-re);H<U?(U=H,V=re<V?re:V,X=oe):H===U&&re<V&&(V=re,X=oe)}B=X||B.children[0]}var ae,se;return B},o.prototype._insert=function(F,B,N){var $=N?F:this.toBBox(F),V=[],U=this._chooseSubtree($,this.data,B,V);for(U.children.push(F),p(U,$);B>=0&&V[B].children.length>this._maxEntries;)this._split(V,B),B--;this._adjustParentBBoxes($,V,B)},o.prototype._split=function(F,B){var N=F[B],$=N.children.length,V=this._minEntries;this._chooseSplitAxis(N,V,$);var U=this._chooseSplitIndex(N,V,$),X=M(N.children.splice(U,N.children.length-U));X.height=N.height,X.leaf=N.leaf,a(N,this.toBBox),a(X,this.toBBox),B?F[B-1].children.push(X):this._splitRoot(N,X)},o.prototype._splitRoot=function(F,B){this.data=M([F,B]),this.data.height=F.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(F,B,N){for(var $,V,U,X,Z,oe,re,H=1/0,ae=1/0,se=B;se<=N-B;se++){var de=f(F,0,se,this.toBBox),fe=f(F,se,N,this.toBBox),Le=(V=de,U=fe,X=void 0,Z=void 0,oe=void 0,re=void 0,X=Math.max(V.minX,U.minX),Z=Math.max(V.minY,U.minY),oe=Math.min(V.maxX,U.maxX),re=Math.min(V.maxY,U.maxY),Math.max(0,oe-X)*Math.max(0,re-Z)),ye=S(de)+S(fe);Le<H?(H=Le,$=se,ae=ye<ae?ye:ae):Le===H&&ye<ae&&(ae=ye,$=se)}return $||N-B},o.prototype._chooseSplitAxis=function(F,B,N){var $=F.leaf?this.compareMinX:g,V=F.leaf?this.compareMinY:b;this._allDistMargin(F,B,N,$)<this._allDistMargin(F,B,N,V)&&F.children.sort($)},o.prototype._allDistMargin=function(F,B,N,$){F.children.sort($);for(var V=this.toBBox,U=f(F,0,B,V),X=f(F,N-B,N,V),Z=_(U)+_(X),oe=B;oe<N-B;oe++){var re=F.children[oe];p(U,F.leaf?V(re):re),Z+=_(U)}for(var H=N-B-1;H>=B;H--){var ae=F.children[H];p(X,F.leaf?V(ae):ae),Z+=_(X)}return Z},o.prototype._adjustParentBBoxes=function(F,B,N){for(var $=N;$>=0;$--)p(B[$],F)},o.prototype._condense=function(F){for(var B=F.length-1,N=void 0;B>=0;B--)F[B].children.length===0?B>0?(N=F[B-1].children).splice(N.indexOf(F[B]),1):this.clear():a(F[B],this.toBBox)},o})})(mx)),mx.exports}class Cme{constructor(t=[],r=Eme){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:n}=this,i=r[t];for(;t>0;){const o=t-1>>1,u=r[o];if(n(i,u)>=0)break;r[t]=u,t=o}r[t]=i}_down(t){const{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let u=(t<<1)+1,a=r[u];const f=u+1;if(f<this.length&&n(r[f],a)<0&&(u=f,a=r[f]),n(a,o)>=0)break;r[t]=a,t=u}r[t]=o}}function Eme(e,t){return e<t?-1:e>t?1:0}const Tme=Object.freeze(Object.defineProperty({__proto__:null,default:Cme},Symbol.toStringTag,{value:"Module"})),Ime=A7(Tme);var Kv={exports:{}},yC,B6;function Pme(){return B6||(B6=1,yC=function(t,r,n,i){var o=t[0],u=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var f=(i-n)/2,p=0,g=f-1;p<f;g=p++){var b=r[n+p*2+0],S=r[n+p*2+1],_=r[n+g*2+0],P=r[n+g*2+1],k=S>u!=P>u&&o<(_-b)*(u-S)/(P-S)+b;k&&(a=!a)}return a}),yC}var vC,z6;function Ame(){return z6||(z6=1,vC=function(t,r,n,i){var o=t[0],u=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var f=i-n,p=0,g=f-1;p<f;g=p++){var b=r[p+n][0],S=r[p+n][1],_=r[g+n][0],P=r[g+n][1],k=S>u!=P>u&&o<(_-b)*(u-S)/(P-S)+b;k&&(a=!a)}return a}),vC}var j6;function kme(){if(j6)return Kv.exports;j6=1;var e=Pme(),t=Ame();return Kv.exports=function(n,i,o,u){return i.length>0&&Array.isArray(i[0])?t(n,i,o,u):e(n,i,o,u)},Kv.exports.nested=t,Kv.exports.flat=e,Kv.exports}var C0={exports:{}},Mme=C0.exports,q6;function Lme(){return q6||(q6=1,(function(e,t){(function(r,n){n(t)})(Mme,function(r){const i=33306690738754706e-32;function o(k,M,D,F,B){let N,$,V,U,X=M[0],Z=F[0],oe=0,re=0;Z>X==Z>-X?(N=X,X=M[++oe]):(N=Z,Z=F[++re]);let H=0;if(oe<k&&re<D)for(Z>X==Z>-X?(V=N-(($=X+N)-X),X=M[++oe]):(V=N-(($=Z+N)-Z),Z=F[++re]),N=$,V!==0&&(B[H++]=V);oe<k&&re<D;)Z>X==Z>-X?(V=N-(($=N+X)-(U=$-N))+(X-U),X=M[++oe]):(V=N-(($=N+Z)-(U=$-N))+(Z-U),Z=F[++re]),N=$,V!==0&&(B[H++]=V);for(;oe<k;)V=N-(($=N+X)-(U=$-N))+(X-U),X=M[++oe],N=$,V!==0&&(B[H++]=V);for(;re<D;)V=N-(($=N+Z)-(U=$-N))+(Z-U),Z=F[++re],N=$,V!==0&&(B[H++]=V);return N===0&&H!==0||(B[H++]=N),H}function u(k){return new Float64Array(k)}const a=33306690738754716e-32,f=22204460492503146e-32,p=11093356479670487e-47,g=u(4),b=u(8),S=u(12),_=u(16),P=u(4);r.orient2d=function(k,M,D,F,B,N){const $=(M-N)*(D-B),V=(k-B)*(F-N),U=$-V;if($===0||V===0||$>0!=V>0)return U;const X=Math.abs($+V);return Math.abs(U)>=a*X?U:-(function(Z,oe,re,H,ae,se,de){let fe,Le,ye,xe,Se,Re,he,Ee,we,Ne,Fe,Xe,Be,ot,Ke,it,ke,Nt;const st=Z-ae,$e=re-ae,Zt=oe-se,$t=H-se;Se=(Ke=(Ee=st-(he=(Re=134217729*st)-(Re-st)))*(Ne=$t-(we=(Re=134217729*$t)-(Re-$t)))-((ot=st*$t)-he*we-Ee*we-he*Ne))-(Fe=Ke-(ke=(Ee=Zt-(he=(Re=134217729*Zt)-(Re-Zt)))*(Ne=$e-(we=(Re=134217729*$e)-(Re-$e)))-((it=Zt*$e)-he*we-Ee*we-he*Ne))),g[0]=Ke-(Fe+Se)+(Se-ke),Se=(Be=ot-((Xe=ot+Fe)-(Se=Xe-ot))+(Fe-Se))-(Fe=Be-it),g[1]=Be-(Fe+Se)+(Se-it),Se=(Nt=Xe+Fe)-Xe,g[2]=Xe-(Nt-Se)+(Fe-Se),g[3]=Nt;let Wt=(function(br,yr){let Kt=yr[0];for(let at=1;at<br;at++)Kt+=yr[at];return Kt})(4,g),ht=f*de;if(Wt>=ht||-Wt>=ht||(fe=Z-(st+(Se=Z-st))+(Se-ae),ye=re-($e+(Se=re-$e))+(Se-ae),Le=oe-(Zt+(Se=oe-Zt))+(Se-se),xe=H-($t+(Se=H-$t))+(Se-se),fe===0&&Le===0&&ye===0&&xe===0)||(ht=p*de+i*Math.abs(Wt),(Wt+=st*xe+$t*fe-(Zt*ye+$e*Le))>=ht||-Wt>=ht))return Wt;Se=(Ke=(Ee=fe-(he=(Re=134217729*fe)-(Re-fe)))*(Ne=$t-(we=(Re=134217729*$t)-(Re-$t)))-((ot=fe*$t)-he*we-Ee*we-he*Ne))-(Fe=Ke-(ke=(Ee=Le-(he=(Re=134217729*Le)-(Re-Le)))*(Ne=$e-(we=(Re=134217729*$e)-(Re-$e)))-((it=Le*$e)-he*we-Ee*we-he*Ne))),P[0]=Ke-(Fe+Se)+(Se-ke),Se=(Be=ot-((Xe=ot+Fe)-(Se=Xe-ot))+(Fe-Se))-(Fe=Be-it),P[1]=Be-(Fe+Se)+(Se-it),Se=(Nt=Xe+Fe)-Xe,P[2]=Xe-(Nt-Se)+(Fe-Se),P[3]=Nt;const sr=o(4,g,4,P,b);Se=(Ke=(Ee=st-(he=(Re=134217729*st)-(Re-st)))*(Ne=xe-(we=(Re=134217729*xe)-(Re-xe)))-((ot=st*xe)-he*we-Ee*we-he*Ne))-(Fe=Ke-(ke=(Ee=Zt-(he=(Re=134217729*Zt)-(Re-Zt)))*(Ne=ye-(we=(Re=134217729*ye)-(Re-ye)))-((it=Zt*ye)-he*we-Ee*we-he*Ne))),P[0]=Ke-(Fe+Se)+(Se-ke),Se=(Be=ot-((Xe=ot+Fe)-(Se=Xe-ot))+(Fe-Se))-(Fe=Be-it),P[1]=Be-(Fe+Se)+(Se-it),Se=(Nt=Xe+Fe)-Xe,P[2]=Xe-(Nt-Se)+(Fe-Se),P[3]=Nt;const cr=o(sr,b,4,P,S);Se=(Ke=(Ee=fe-(he=(Re=134217729*fe)-(Re-fe)))*(Ne=xe-(we=(Re=134217729*xe)-(Re-xe)))-((ot=fe*xe)-he*we-Ee*we-he*Ne))-(Fe=Ke-(ke=(Ee=Le-(he=(Re=134217729*Le)-(Re-Le)))*(Ne=ye-(we=(Re=134217729*ye)-(Re-ye)))-((it=Le*ye)-he*we-Ee*we-he*Ne))),P[0]=Ke-(Fe+Se)+(Se-ke),Se=(Be=ot-((Xe=ot+Fe)-(Se=Xe-ot))+(Fe-Se))-(Fe=Be-it),P[1]=Be-(Fe+Se)+(Se-it),Se=(Nt=Xe+Fe)-Xe,P[2]=Xe-(Nt-Se)+(Fe-Se),P[3]=Nt;const ir=o(cr,S,4,P,_);return _[ir-1]})(k,M,D,F,B,N,X)},r.orient2dfast=function(k,M,D,F,B,N){return(M-N)*(D-B)-(k-B)*(F-N)},Object.defineProperty(r,"__esModule",{value:!0})})})(C0,C0.exports)),C0.exports}var V6;function Rme(){if(V6)return F_.exports;V6=1;var e=Sme(),t=Ime,r=kme(),n=Lme().orient2d;t.default&&(t=t.default),F_.exports=i,F_.exports.default=i;function i(N,$,V){$=Math.max(0,$===void 0?2:$),V=V||0;var U=_(N),X=new e(16);X.toBBox=function(he){return{minX:he[0],minY:he[1],maxX:he[0],maxY:he[1]}},X.compareMinX=function(he,Ee){return he[0]-Ee[0]},X.compareMinY=function(he,Ee){return he[1]-Ee[1]},X.load(N);for(var Z=[],oe=0,re;oe<U.length;oe++){var H=U[oe];X.remove(H),re=P(H,re),Z.push(re)}var ae=new e(16);for(oe=0;oe<Z.length;oe++)ae.insert(S(Z[oe]));for(var se=$*$,de=V*V;Z.length;){var fe=Z.shift(),Le=fe.p,ye=fe.next.p,xe=k(Le,ye);if(!(xe<de)){var Se=xe/se;H=o(X,fe.prev.p,Le,ye,fe.next.next.p,Se,ae),H&&Math.min(k(H,Le),k(H,ye))<=Se&&(Z.push(fe),Z.push(P(H,fe)),X.remove(H),ae.remove(fe),ae.insert(S(fe)),ae.insert(S(fe.next)))}}fe=re;var Re=[];do Re.push(fe.p),fe=fe.next;while(fe!==re);return Re.push(fe.p),Re}function o(N,$,V,U,X,Z,oe){for(var re=new t([],u),H=N.data;H;){for(var ae=0;ae<H.children.length;ae++){var se=H.children[ae],de=H.leaf?M(se,V,U):a(V,U,se);de>Z||re.push({node:se,dist:de})}for(;re.length&&!re.peek().node.children;){var fe=re.pop(),Le=fe.node,ye=M(Le,$,V),xe=M(Le,U,X);if(fe.dist<ye&&fe.dist<xe&&p(V,Le,oe)&&p(U,Le,oe))return Le}H=re.pop(),H&&(H=H.node)}return null}function u(N,$){return N.dist-$.dist}function a(N,$,V){if(f(N,V)||f($,V))return 0;var U=D(N[0],N[1],$[0],$[1],V.minX,V.minY,V.maxX,V.minY);if(U===0)return 0;var X=D(N[0],N[1],$[0],$[1],V.minX,V.minY,V.minX,V.maxY);if(X===0)return 0;var Z=D(N[0],N[1],$[0],$[1],V.maxX,V.minY,V.maxX,V.maxY);if(Z===0)return 0;var oe=D(N[0],N[1],$[0],$[1],V.minX,V.maxY,V.maxX,V.maxY);return oe===0?0:Math.min(U,X,Z,oe)}function f(N,$){return N[0]>=$.minX&&N[0]<=$.maxX&&N[1]>=$.minY&&N[1]<=$.maxY}function p(N,$,V){for(var U=Math.min(N[0],$[0]),X=Math.min(N[1],$[1]),Z=Math.max(N[0],$[0]),oe=Math.max(N[1],$[1]),re=V.search({minX:U,minY:X,maxX:Z,maxY:oe}),H=0;H<re.length;H++)if(b(re[H].p,re[H].next.p,N,$))return!1;return!0}function g(N,$,V){return n(N[0],N[1],$[0],$[1],V[0],V[1])}function b(N,$,V,U){return N!==U&&$!==V&&g(N,$,V)>0!=g(N,$,U)>0&&g(V,U,N)>0!=g(V,U,$)>0}function S(N){var $=N.p,V=N.next.p;return N.minX=Math.min($[0],V[0]),N.minY=Math.min($[1],V[1]),N.maxX=Math.max($[0],V[0]),N.maxY=Math.max($[1],V[1]),N}function _(N){for(var $=N[0],V=N[0],U=N[0],X=N[0],Z=0;Z<N.length;Z++){var oe=N[Z];oe[0]<$[0]&&($=oe),oe[0]>U[0]&&(U=oe),oe[1]<V[1]&&(V=oe),oe[1]>X[1]&&(X=oe)}var re=[$,V,U,X],H=re.slice();for(Z=0;Z<N.length;Z++)r(N[Z],re)||H.push(N[Z]);return B(H)}function P(N,$){var V={p:N,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return $?(V.next=$.next,V.prev=$,$.next.prev=V,$.next=V):(V.prev=V,V.next=V),V}function k(N,$){var V=N[0]-$[0],U=N[1]-$[1];return V*V+U*U}function M(N,$,V){var U=$[0],X=$[1],Z=V[0]-U,oe=V[1]-X;if(Z!==0||oe!==0){var re=((N[0]-U)*Z+(N[1]-X)*oe)/(Z*Z+oe*oe);re>1?(U=V[0],X=V[1]):re>0&&(U+=Z*re,X+=oe*re)}return Z=N[0]-U,oe=N[1]-X,Z*Z+oe*oe}function D(N,$,V,U,X,Z,oe,re){var H=V-N,ae=U-$,se=oe-X,de=re-Z,fe=N-X,Le=$-Z,ye=H*H+ae*ae,xe=H*se+ae*de,Se=se*se+de*de,Re=H*fe+ae*Le,he=se*fe+de*Le,Ee=ye*Se-xe*xe,we,Ne,Fe,Xe,Be=Ee,ot=Ee;Ee===0?(Ne=0,Be=1,Xe=he,ot=Se):(Ne=xe*he-Se*Re,Xe=ye*he-xe*Re,Ne<0?(Ne=0,Xe=he,ot=Se):Ne>Be&&(Ne=Be,Xe=he+xe,ot=Se)),Xe<0?(Xe=0,-Re<0?Ne=0:-Re>ye?Ne=Be:(Ne=-Re,Be=ye)):Xe>ot&&(Xe=ot,-Re+xe<0?Ne=0:-Re+xe>ye?Ne=Be:(Ne=-Re+xe,Be=ye)),we=Ne===0?0:Ne/Be,Fe=Xe===0?0:Xe/ot;var Ke=(1-we)*N+we*V,it=(1-we)*$+we*U,ke=(1-Fe)*X+Fe*oe,Nt=(1-Fe)*Z+Fe*re,st=ke-Ke,$e=Nt-it;return st*st+$e*$e}function F(N,$){return N[0]===$[0]?N[1]-$[1]:N[0]-$[0]}function B(N){N.sort(F);for(var $=[],V=0;V<N.length;V++){for(;$.length>=2&&g($[$.length-2],$[$.length-1],N[V])<=0;)$.pop();$.push(N[V])}for(var U=[],X=N.length-1;X>=0;X--){for(;U.length>=2&&g(U[U.length-2],U[U.length-1],N[X])<=0;)U.pop();U.push(N[X])}return U.pop(),$.pop(),$.concat(U)}return F_.exports}var Dme=Rme();const Ome=Sf(Dme);function Nme(e,t={}){t.concavity=t.concavity||1/0;const r=[];if(lv(e,i=>{r.push([i[0],i[1]])}),!r.length)return null;const n=Ome(r,t.concavity);return n.length>3?Mw([n]):null}function YA(e,t={}){switch(H$(e)){case"Point":return id(hp(e),t.properties);case"Polygon":var r=[];lv(e,function(N){r.push(N)});var n=N6(e,{properties:t.properties}),i=n.geometry.coordinates,o=0,u=0,a=0,f,p,g,b,S,_,P,k,M=r.map(function(N){return[N[0]-i[0],N[1]-i[1]]});for(f=0;f<r.length-1;f++)p=M[f],b=p[0],_=p[1],g=M[f+1],S=g[0],P=g[1],k=b*P-S*_,a+=k,o+=(b+S)*k,u+=(_+P)*k;if(a===0)return n;var D=a*.5,F=1/(6*D);return id([i[0]+F*o,i[1]+F*u],t.properties);default:var B=Nme(e);return B?YA(B,{properties:t.properties}):N6(e,{properties:t.properties})}}function cG(e,t,r={}){const n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[];for(let u=0;u<n;u++)o.push(Hy(e,t,u*-360/n,r).geometry.coordinates);return o.push(o[0]),Mw([o],i)}function Fme(e){return e}function Bme(e){if(e==null)return Fme;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],u=e.translate[1];return function(a,f){f||(t=r=0);var p=2,g=a.length,b=new Array(g);for(b[0]=(t+=a[0])*n+o,b[1]=(r+=a[1])*i+u;p<g;)b[p]=a[p],++p;return b}}function zme(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}function jme(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return $6(e,r)})}:$6(e,t)}function $6(e,t){var r=t.id,n=t.bbox,i=t.properties==null?{}:t.properties,o=qme(e,t);return r==null&&n==null?{type:"Feature",properties:i,geometry:o}:n==null?{type:"Feature",id:r,properties:i,geometry:o}:{type:"Feature",id:r,bbox:n,properties:i,geometry:o}}function qme(e,t){var r=Bme(e.transform),n=e.arcs;function i(g,b){b.length&&b.pop();for(var S=n[g<0?~g:g],_=0,P=S.length;_<P;++_)b.push(r(S[_],_));g<0&&zme(b,P)}function o(g){return r(g)}function u(g){for(var b=[],S=0,_=g.length;S<_;++S)i(g[S],b);return b.length<2&&b.push(b[0]),b}function a(g){for(var b=u(g);b.length<4;)b.push(b[0]);return b}function f(g){return g.map(a)}function p(g){var b=g.type,S;switch(b){case"GeometryCollection":return{type:b,geometries:g.geometries.map(p)};case"Point":S=o(g.coordinates);break;case"MultiPoint":S=g.coordinates.map(o);break;case"LineString":S=u(g.arcs);break;case"MultiLineString":S=g.arcs.map(u);break;case"Polygon":S=f(g.arcs);break;case"MultiPolygon":S=g.arcs.map(f);break;default:return null}return{type:b,coordinates:S}}return p(t)}function b1(e,t={}){return vpe(e,(r,n)=>{const i=n.geometry.coordinates;return r+Lw(i[0],i[1],t)},0)}function Vme(e,t,r,n,i={}){const o=i.steps||64,u=G6(r),a=G6(n),f=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(u===a)return Wl(cG(e,t,i).geometry.coordinates[0],f);const p=u,g=u<a?a:a+360;let b=p;const S=[];let _=0;const P=(g-p)/o;for(;b<=g;)S.push(Hy(e,t,b,i).geometry.coordinates),_++,b=p+_*P;return Wl(S,f)}function G6(e){let t=e%360;return t<0&&(t+=360),t}function $me(e,t,r,n){if(n=n||{},!HA(n))throw new Error("options is invalid");var i,o=[];if(e.type==="Feature")i=e.geometry.coordinates;else if(e.type==="LineString")i=e.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var u=i.length,a=0,f,p,g,b=0;b<i.length&&!(t>=a&&b===i.length-1);b++){if(a>t&&o.length===0){if(f=t-a,!f)return o.push(i[b]),Wl(o);p=g1(i[b],i[b-1])-180,g=Hy(i[b],f,p,n),o.push(g.geometry.coordinates)}if(a>=r)return f=r-a,f?(p=g1(i[b],i[b-1])-180,g=Hy(i[b],f,p,n),o.push(g.geometry.coordinates),Wl(o)):(o.push(i[b]),Wl(o));if(a>=t&&o.push(i[b]),b===i.length-1)return Wl(o);a+=Lw(i[b],i[b+1],n)}if(a<t&&i.length===u)throw new Error("Start position is beyond line");var S=i[i.length-1];return Wl([S,S])}function Gme(e,t,r){if(r=r||{},!HA(r))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return WA(e,function(u){i&&(u.geometry.coordinates=u.geometry.coordinates.reverse()),Ume(u,t,n,function(a){o.push(a)})}),yh(o)}function Ume(e,t,r,n){var i=b1(e,{units:r});if(i<=t)return n(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var u=0;u<o;u++){var a=$me(e,t*u,t*(u+1),{units:r});n(a,u)}}function i2(e){var t=e[0],r=e[1];return[r[0]-t[0],r[1]-t[1]]}function nI(e,t){return e[0]*t[1]-t[0]*e[1]}function Hme(e,t){return[e[0]+t[0],e[1]+t[1]]}function Wme(e,t){return[e[0]-t[0],e[1]-t[1]]}function Xme(e,t){return[e*t[0],e*t[1]]}function Yme(e,t){var r=e[0],n=i2(e),i=t[0],o=i2(t),u=nI(n,o),a=Wme(i,r),f=nI(a,o),p=f/u,g=Hme(r,Xme(p,n));return g}function Zme(e,t){var r=i2(e),n=i2(t);return nI(r,n)===0}function Kme(e,t){return Zme(e,t)?!1:Yme(e,t)}function Jme(e,t,r){if(r=r||{},!HA(r))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");var i=H$(e),o=e.properties;switch(i){case"LineString":return U6(e,t,n);case"MultiLineString":var u=[];return WA(e,function(a){u.push(U6(a,t,n).geometry.coordinates)}),fpe(u,o);default:throw new Error("geometry "+i+" is not supported")}}function U6(e,t,r){var n=[],i=hpe(t,r),o=U$(e),u=[];return o.forEach(function(a,f){if(f!==o.length-1){var p=Qme(a,o[f+1],i);if(n.push(p),f>0){var g=n[f-1],b=Kme(p,g);b!==!1&&(g[1]=b,p[0]=b),u.push(g[0]),f===o.length-2&&(u.push(p[0]),u.push(p[1]))}o.length===2&&(u.push(p[0]),u.push(p[1]))}}),Wl(u,e.properties)}function Qme(e,t,r){var n=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=e[0]+r*(t[1]-e[1])/n,o=t[0]+r*(t[1]-e[1])/n,u=e[1]+r*(e[0]-t[0])/n,a=t[1]+r*(e[0]-t[0])/n;return[[i,u],[o,a]]}function ege(e){const r=window.getComputedStyle(e,null).getPropertyValue("transform");let n=0;if(r!=="none"){const i=r.split("(")[1].split(")")[0].split(","),o=parseFloat(i[0]),u=parseFloat(i[1]);n=Math.round(Math.atan2(u,o)*(180/Math.PI))}return n<0?n+360:n}function B_(e,t,r){const n=getComputedStyle(e),i=[t[0]-r[0],t[1]-r[1]],o=new DOMMatrixReadOnly(n.transform);return[i[0]*o.a+i[1]*o.c+o.e+r[0],i[0]*o.b+i[1]*o.d+o.f+r[1]]}const H6=10;function z_(e,t){const r=t.unproject(e),n=t.unproject([e[0]+H6,e[1]]),i=r.distanceTo(n);return H6/i}function iI(e){const t=uw({mapId:e.mapId,watch:{layers:!1,viewport:!0}}),r=ee.useRef(null),n=ee.useRef(null),i=ee.useRef(null),o=ee.useRef(document.querySelector(".mapContainer")),u=ha({mapId:e.mapId});ee.useEffect(()=>{if(!t?.viewport?.zoom||!u.map)return;const p=Math.round(u.map.map._container.clientWidth/2),g=Math.round(u.map.map._container.clientHeight/2);if(!e.options.scale){const b=1/z_([p,g],u.map.map);e.setOptions(S=>({...S,scale:[b,b]}))}if(!e.options.center){const b=u.map.map.unproject([p,g]);e.setOptions(S=>({...S,center:[b.lng,b.lat]}))}},[u.map,t.viewport?.zoom]),ee.useEffect(()=>{if(!u.map)return;u.map.map.setPitch(0);const p=u.map.map.getMaxPitch();return u.map.map.setMaxPitch(0),()=>{u.map?.map.setMaxPitch(p)}},[u.map]);const a=ee.useMemo(()=>e.options.orientation==="portrait"?[e.options.width/2,e.options.height/2]:[e.options.height/2,e.options.width/2],[e.options.orientation,e.options.width,e.options.height]),f=ee.useMemo(()=>{if(!u.map||!e.options.scale)return"none";const p=u.map.map.project(e.options.center),g=p.x,b=p.y,S=e.options.scale[0]*z_([g,b],u.map.map),_=t?.viewport?.bearing?t.viewport?.bearing:0,P=`translate(${Math.floor(p.x-a[0])}px,${Math.floor(p.y-a[1])}px) rotate(${e.options.rotate-_}deg) scale(${S},${S})`;return r.current&&(r.current.style.transform=P),P},[u.map,t.viewport,e.options.scale,e.options.rotate,e.options.center,a]);return ee.useEffect(()=>{i.current?.updateTarget()},[f]),ee.useEffect(()=>{if(!u.map||!e.options.center||!e.options.fixedScale||typeof e.options.fixedScale<"u"&&n.current===e.options.fixedScale)return;n.current=e.options.fixedScale;const p=id(e.options.center),g=e.options.fixedScale*(e.options.width/1e3),_=Hy(p,g,90,{units:"meters"}),P=u.map.map.project(p.geometry.coordinates),k=u.map.map.project(_.geometry.coordinates),M=Math.round(k.x-P.x)/e.options.width*(1/z_([P.x,P.y],u.map.map));e.setOptions(D=>({...D,scale:[M,M]}))},[u.map,e.options.width,e.options.center,e.options.fixedScale]),ee.useEffect(()=>{if(r.current&&u.map){let p=e.options.width,g=e.options.height;e.options.orientation==="portrait"?(r.current.style.width=e.options.width+"px",r.current.style.height=e.options.height+"px"):(r.current.style.width=e.options.height+"px",r.current.style.height=e.options.width+"px",p=e.options.height,g=e.options.width),i.current?.updateTarget();const b=u.map.map.unproject(B_(r.current,[0,0],a)),S=u.map.map.unproject(B_(r.current,[p,0],a)),_=u.map.map.unproject(B_(r.current,[0,g],a)),P=u.map.map.unproject(B_(r.current,[p,g],a)),k={type:"Feature",bbox:[b.lng,b.lat,P.lng,P.lat],geometry:{type:"Polygon",coordinates:[[[b.lng,b.lat],[S.lng,S.lat],[P.lng,P.lat],[_.lng,_.lat],[b.lng,b.lat]]]},properties:{bearing:ege(r.current)}};e.geojsonRef.current=k}},[u,f,e.options.orientation,e.geojsonRef,t,r.current,a]),o.current?h0.createPortal(K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"target",ref:r,style:{transform:f,transformOrigin:"center center"}}),K.jsx(dpe,{ref:i,target:r,container:null,origin:!0,keepRatio:!0,draggable:!0,onDrag:p=>{if(u.map){let g=p.transform.split("translate(");g=g[1].split("px)")[0].split("px, ");const b=u.map?.map.unproject([parseInt(g[0])+a[0],parseInt(g[1])+a[1]]);e.setOptions(S=>({...S,center:[b.lng,b.lat]}))}},scalable:!e.options.fixedScale,onScale:p=>{if(u.map){let g=p.drag.transform.split("scale(");g=g[1].split(")")[0].split(", ");const b=u.map.map.project(e.options.center),S=b.x,_=b.y,P=parseFloat(g[0])*(1/z_([S,_],u.map.map));e.setOptions(k=>({...k,scale:[P,P]}))}},rotatable:!0,onRotate:p=>{if(u.map&&t.viewport){const b=p.drag.transform.split("rotate(")[1].split("deg)")[0],S=t?.viewport?.bearing?t.viewport.bearing:0;e.setOptions(_=>({..._,rotate:parseFloat(b)+S}))}}})]}),o.current):K.jsx(K.Fragment,{})}try{iI.displayName="PdfPreview",iI.__docgenInfo={description:"PdfPreview component renders a transformable (drag, scale, rotate) preview of the desired export or print content",displayName:"PdfPreview",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},geojsonRef:{defaultValue:null,description:"Polygon GeoJson Feature representing the printing area",name:"geojsonRef",required:!0,type:{name:"MutableRefObject<Feature<Geometry, GeoJsonProperties> | undefined>"}},options:{defaultValue:null,description:"a state variable containing the PDF previews current state",name:"options",required:!0,type:{name:"PdfPreviewOptions"}},setOptions:{defaultValue:null,description:"setter function to update the current PDF preview state",name:"setOptions",required:!0,type:{name:"(arg1: (val: PdfPreviewOptions) => PdfPreviewOptions) => void"}}}}}catch{}const tge=[{value:0,label:"free scale"},{value:250,label:"1/250"},{value:500,label:"1/500"},{value:750,label:"1/750"},{value:1e3,label:"1/1000"},{value:1500,label:"1/1500"},{value:2e3,label:"1/2000"},{value:1e4,label:"1/10000"},{value:1e5,label:"1/100000"}],rge=[{value:"72dpi",label:"Draft (72dpi)"},{value:"150dpi",label:"Medium (150dpi)"},{value:"300dpi",label:"High (300dpi)"}];function aI(e){const[t,r]=ee.useState(!1),n=ee.useContext(iV),i=ha({mapId:e.mapId}),o=nV({mapId:e.mapId}),u=ee.useCallback(()=>{if(i.map&&o.createExport&&n.template&&n.format&&n.options?.orientation&&n.geojsonRef?.current?.bbox&&n.geojsonRef?.current){r(!0);const p=Ec(n.geojsonRef.current);o.createExport({width:n.template.width,height:n.template.height,bbox:p,bboxUnrotated:n.geojsonRef.current.bbox,bearing:n.geojsonRef.current?.properties?.bearing||0,format:n.format.toLowerCase(),orientation:n.options.orientation}).then(g=>g.createPdf()).then(g=>(typeof e.onCreatePdf=="function"&&(g.formData=new FormData(document.getElementById("createPdfFormID")),e.onCreatePdf(g)),r(!1),g.downloadPdf())).catch(g=>{console.log(g),r(!1)})}},[i.map,n]),a=H1("(max-width: 950px)"),f=ee.useMemo(()=>({margin:a?"1px 0 8px 0 ":"5px 0 15px 0 ",...e?.formControlStyles?{...e.formControlStyles}:{}}),[a,e.formControlStyles]);return K.jsx(K.Fragment,{children:K.jsxs("form",{id:"createPdfFormID",children:[K.jsxs(vc,{fullWidth:!0,sx:f,children:[K.jsx($i,{variant:"contained",className:"createPdfButton",onClick:u,disabled:t,sx:{marginBottom:"16px"},children:"create PDF"}),t&&K.jsx(fw,{size:24,sx:{color:"primary.main",position:"absolute",top:"25%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),K.jsxs(vc,{fullWidth:!0,sx:f,children:[K.jsx(np,{sx:{marginTop:"3px"},id:"format-select-label",children:"Format"}),K.jsx(ip,{labelId:"format-select-label",id:"format-select",label:"Format",value:n.format,onChange:p=>{n.setFormat?.(p.target.value)},children:Object.keys(fy).map(p=>K.jsx(pm,{value:p,children:p},p))})]}),K.jsxs(vc,{fullWidth:!0,sx:f,children:[K.jsx(Qj,{id:"orientation-radio-buttons-group-label",children:"Orientation"}),K.jsxs(Jae,{row:!0,"aria-labelledby":"orientation-radio-buttons-group-label",name:"orientation-radio-buttons-group",value:n.options?.orientation,onChange:p=>{n.setOptions&&n.setOptions(g=>({...g,orientation:p.target.value}))},children:[K.jsx(f3,{value:"portrait",control:K.jsx(QD,{}),label:"Portrait"}),K.jsx(f3,{value:"landscape",control:K.jsx(QD,{}),label:"Landscape"})]})]}),K.jsxs(vc,{fullWidth:!0,sx:f,children:[K.jsx(np,{id:"quality-select-label",children:"Quality"}),K.jsx(ip,{labelId:"quality-select-label",id:"quality-select",label:"Quality",value:n.quality,onChange:p=>{n.setQuality?.(p.target.value)},children:rge.map(p=>K.jsx(pm,{value:p.value,children:p.label},p.value))})]}),K.jsxs(vc,{fullWidth:!0,sx:f,children:[K.jsx(np,{id:"scale-select-label",children:"Scale"}),K.jsx(ip,{labelId:"scale-select-label",id:"scale-select",label:"Scale",value:n?.options?.fixedScale,onChange:p=>{n.setOptions?.(g=>({...g,fixedScale:p.target.value}))},children:tge.map((p,g)=>K.jsx(pm,{value:p.value,children:p.label},g))})]}),e?.additionalFields,n.options&&n.setOptions&&K.jsx(iI,{options:n.options,setOptions:n.setOptions,geojsonRef:n.geojsonRef})]})})}try{aI.displayName="PdfForm",aI.__docgenInfo={description:"",displayName:"PdfForm",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},onCreatePdf:{defaultValue:null,description:`Function that will be called before the PDF is created.
Allowing to access and manipulate the jspdf instance before the PDF is created.`,name:"onCreatePdf",required:!1,type:{name:"((options: createPdfResolverParams) => createPdfResolverParams) | undefined"}},formControlStyles:{defaultValue:null,description:"sx props that will be applied to the form control components",name:"formControlStyles",required:!1,type:{name:"SxProps | undefined"}},additionalFields:{defaultValue:null,description:`Define additional form fields that will be added to the bottom of the create-PDF form.
Values of form elements added this way are accessible inside the function passed to the onCreatePdf property using options.formData.get('{form_el_name}').
Make sure all form elements added this way have a name property defined to be able to access the value when rendering the PDF.`,name:"additionalFields",required:!1,type:{name:"ReactNode"}}}}}catch{}const W6=e=>K.jsx(K.Fragment,{children:K.jsx(T3,{children:K.jsx(aI,{...e})})});try{W6.displayName="MlCreatePdfForm",W6.__docgenInfo={description:"Create PDF Form Component",displayName:"MlCreatePdfForm",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},onCreatePdf:{defaultValue:null,description:`Function that will be called before the PDF is created.
Allowing to access and manipulate the jspdf instance before the PDF is created.`,name:"onCreatePdf",required:!1,type:{name:"((options: createPdfResolverParams) => createPdfResolverParams) | undefined"}},formControlStyles:{defaultValue:null,description:"sx props that will be applied to the form control components",name:"formControlStyles",required:!1,type:{name:"SxProps | undefined"}},additionalFields:{defaultValue:null,description:`Define additional form fields that will be added to the bottom of the create-PDF form.
Values of form elements added this way are accessible inside the function passed to the onCreatePdf property using options.formData.get('{form_el_name}').
Make sure all form elements added this way have a name property defined to be able to access the value when rendering the PDF.`,name:"additionalFields",required:!1,type:{name:"ReactNode"}}}}}catch{}var gx={exports:{}},nge=gx.exports,X6;function ige(){return X6||(X6=1,(function(e,t){(function(r,n){e.exports=n()})(nge,(function(){var r=function(Q,me){var Je={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},It={on:function(qt,Qt,Vr){if(Je[qt]===void 0)throw new Error("Invalid event type: "+qt);Je[qt].push({selector:Qt,fn:Vr})},render:function(qt){me.store.featureChanged(qt)}},jt=function(qt,Qt){for(var Vr=Je[qt],Wr=Vr.length;Wr--;){var zr=Vr[Wr];if(zr.selector(Qt)){zr.fn.call(It,Qt)||me.store.render(),me.ui.updateMapClasses();break}}};return Q.start.call(It),{render:Q.render,stop:function(){Q.stop&&Q.stop()},trash:function(){Q.trash&&(Q.trash(),me.store.render())},combineFeatures:function(){Q.combineFeatures&&Q.combineFeatures()},uncombineFeatures:function(){Q.uncombineFeatures&&Q.uncombineFeatures()},drag:function(qt){jt("drag",qt)},click:function(qt){jt("click",qt)},mousemove:function(qt){jt("mousemove",qt)},mousedown:function(qt){jt("mousedown",qt)},mouseup:function(qt){jt("mouseup",qt)},mouseout:function(qt){jt("mouseout",qt)},keydown:function(qt){jt("keydown",qt)},keyup:function(qt){jt("keyup",qt)},touchstart:function(qt){jt("touchstart",qt)},touchmove:function(qt){jt("touchmove",qt)},touchend:function(qt){jt("touchend",qt)},tap:function(qt){jt("tap",qt)}}};function n(Q){return Q&&Q.__esModule&&Object.prototype.hasOwnProperty.call(Q,"default")?Q.default:Q}function i(Q){if(Q.__esModule)return Q;var me=Q.default;if(typeof me=="function"){var Je=function It(){if(this instanceof It){var jt=[null];jt.push.apply(jt,arguments);var qt=Function.bind.apply(me,jt);return new qt}return me.apply(this,arguments)};Je.prototype=me.prototype}else Je={};return Object.defineProperty(Je,"__esModule",{value:!0}),Object.keys(Q).forEach((function(It){var jt=Object.getOwnPropertyDescriptor(Q,It);Object.defineProperty(Je,It,jt.get?jt:{enumerable:!0,get:function(){return Q[It]}})})),Je}var o={},u={RADIUS:6378137},a=u;function f(Q){var me=0;if(Q&&Q.length>0){me+=Math.abs(p(Q[0]));for(var Je=1;Je<Q.length;Je++)me-=Math.abs(p(Q[Je]))}return me}function p(Q){var me,Je,It,jt,qt,Qt,Vr=0,Wr=Q.length;if(Wr>2){for(Qt=0;Qt<Wr;Qt++)Qt===Wr-2?(It=Wr-2,jt=Wr-1,qt=0):Qt===Wr-1?(It=Wr-1,jt=0,qt=1):(It=Qt,jt=Qt+1,qt=Qt+2),me=Q[It],Je=Q[jt],Vr+=(g(Q[qt][0])-g(me[0]))*Math.sin(g(Je[1]));Vr=Vr*a.RADIUS*a.RADIUS/2}return Vr}function g(Q){return Q*Math.PI/180}o.geometry=function Q(me){var Je,It=0;switch(me.type){case"Polygon":return f(me.coordinates);case"MultiPolygon":for(Je=0;Je<me.coordinates.length;Je++)It+=f(me.coordinates[Je]);return It;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Je=0;Je<me.geometries.length;Je++)It+=Q(me.geometries[Je]);return It}},o.ring=p;var b={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},S={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},_={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},P={POLYGON:"polygon",LINE:"line_string",POINT:"point"},k={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},M={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},D={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},F={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},B={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},N={ACTIVE:"true",INACTIVE:"false"},$=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],V=-85,U=Object.freeze({__proto__:null,classes:b,sources:S,cursors:_,types:P,geojsonTypes:k,modes:M,events:D,updateActions:F,meta:B,activeStates:N,interactions:$,LAT_MIN:-90,LAT_RENDERED_MIN:V,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),X={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Z(Q,me){var Je=X[Q.geometry.type]-X[me.geometry.type];return Je===0&&Q.geometry.type===k.POLYGON?Q.area-me.area:Je}function oe(Q){return Q.map((function(me){return me.geometry.type===k.POLYGON&&(me.area=o.geometry({type:k.FEATURE,property:{},geometry:me.geometry})),me})).sort(Z).map((function(me){return delete me.area,me}))}function re(Q,me){return me===void 0&&(me=0),[[Q.point.x-me,Q.point.y-me],[Q.point.x+me,Q.point.y+me]]}function H(Q){if(this._items={},this._nums={},this._length=Q?Q.length:0,Q)for(var me=0,Je=Q.length;me<Je;me++)this.add(Q[me]),Q[me]!==void 0&&(typeof Q[me]=="string"?this._items[Q[me]]=me:this._nums[Q[me]]=me)}H.prototype.add=function(Q){return this.has(Q)||(this._length++,typeof Q=="string"?this._items[Q]=this._length:this._nums[Q]=this._length),this},H.prototype.delete=function(Q){return this.has(Q)===!1||(this._length--,delete this._items[Q],delete this._nums[Q]),this},H.prototype.has=function(Q){return(typeof Q=="string"||typeof Q=="number")&&(this._items[Q]!==void 0||this._nums[Q]!==void 0)},H.prototype.values=function(){var Q=this,me=[];return Object.keys(this._items).forEach((function(Je){me.push({k:Je,v:Q._items[Je]})})),Object.keys(this._nums).forEach((function(Je){me.push({k:JSON.parse(Je),v:Q._nums[Je]})})),me.sort((function(Je,It){return Je.v-It.v})).map((function(Je){return Je.k}))},H.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ae=[B.FEATURE,B.MIDPOINT,B.VERTEX],se={click:function(Q,me,Je){return de(Q,me,Je,Je.options.clickBuffer)},touch:function(Q,me,Je){return de(Q,me,Je,Je.options.touchBuffer)}};function de(Q,me,Je,It){if(Je.map===null)return[];var jt=Q?re(Q,It):me,qt={};Je.options.styles&&(qt.layers=Je.options.styles.map((function(zr){return zr.id})).filter((function(zr){return Je.map.getLayer(zr)!=null})));var Qt=Je.map.queryRenderedFeatures(jt,qt).filter((function(zr){return ae.indexOf(zr.properties.meta)!==-1})),Vr=new H,Wr=[];return Qt.forEach((function(zr){var Kr=zr.properties.id;Vr.has(Kr)||(Vr.add(Kr),Wr.push(zr))})),oe(Wr)}function fe(Q,me){var Je=se.click(Q,null,me),It={mouse:_.NONE};return Je[0]&&(It.mouse=Je[0].properties.active===N.ACTIVE?_.MOVE:_.POINTER,It.feature=Je[0].properties.meta),me.events.currentModeName().indexOf("draw")!==-1&&(It.mouse=_.ADD),me.ui.queueMapClasses(It),me.ui.updateMapClasses(),Je[0]}function Le(Q,me){var Je=Q.x-me.x,It=Q.y-me.y;return Math.sqrt(Je*Je+It*It)}function ye(Q,me,Je){Je===void 0&&(Je={});var It=Je.fineTolerance!=null?Je.fineTolerance:4,jt=Je.grossTolerance!=null?Je.grossTolerance:12,qt=Je.interval!=null?Je.interval:500;Q.point=Q.point||me.point,Q.time=Q.time||me.time;var Qt=Le(Q.point,me.point);return Qt<It||Qt<jt&&me.time-Q.time<qt}function xe(Q,me,Je){Je===void 0&&(Je={});var It=Je.tolerance!=null?Je.tolerance:25,jt=Je.interval!=null?Je.interval:250;return Q.point=Q.point||me.point,Q.time=Q.time||me.time,Le(Q.point,me.point)<It&&me.time-Q.time<jt}var Se={exports:{}},Re=Se.exports=function(Q,me){if(me||(me=16),Q===void 0&&(Q=128),Q<=0)return"0";for(var Je=Math.log(Math.pow(2,Q))/Math.log(me),It=2;Je===1/0;It*=2)Je=Math.log(Math.pow(2,Q/It))/Math.log(me)*It;var jt=Je-Math.floor(Je),qt="";for(It=0;It<Math.floor(Je);It++)qt=Math.floor(Math.random()*me).toString(me)+qt;if(jt){var Qt=Math.pow(me,jt);qt=Math.floor(Math.random()*Qt).toString(me)+qt}var Vr=parseInt(qt,me);return Vr!==1/0&&Vr>=Math.pow(2,Q)?Re(Q,me):qt};Re.rack=function(Q,me,Je){var It=function(qt){var Qt=0;do{if(Qt++>10){if(!Je)throw new Error("too many ID collisions, use more bits");Q+=Je}var Vr=Re(Q,me)}while(Object.hasOwnProperty.call(jt,Vr));return jt[Vr]=qt,Vr},jt=It.hats={};return It.get=function(qt){return It.hats[qt]},It.set=function(qt,Qt){return It.hats[qt]=Qt,It},It.bits=Q||128,It.base=me||16,It};var he=n(Se.exports),Ee=function(Q,me){this.ctx=Q,this.properties=me.properties||{},this.coordinates=me.geometry.coordinates,this.id=me.id||he(),this.type=me.geometry.type};Ee.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Ee.prototype.incomingCoords=function(Q){this.setCoordinates(Q)},Ee.prototype.setCoordinates=function(Q){this.coordinates=Q,this.changed()},Ee.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Ee.prototype.setProperty=function(Q,me){this.properties[Q]=me},Ee.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:k.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Ee.prototype.internal=function(Q){var me={id:this.id,meta:B.FEATURE,"meta:type":this.type,active:N.INACTIVE,mode:Q};if(this.ctx.options.userProperties)for(var Je in this.properties)me["user_"+Je]=this.properties[Je];return{type:k.FEATURE,properties:me,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var we=function(Q,me){Ee.call(this,Q,me)};(we.prototype=Object.create(Ee.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},we.prototype.updateCoordinate=function(Q,me,Je){this.coordinates=arguments.length===3?[me,Je]:[Q,me],this.changed()},we.prototype.getCoordinate=function(){return this.getCoordinates()};var Ne=function(Q,me){Ee.call(this,Q,me)};(Ne.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length>1},Ne.prototype.addCoordinate=function(Q,me,Je){this.changed();var It=parseInt(Q,10);this.coordinates.splice(It,0,[me,Je])},Ne.prototype.getCoordinate=function(Q){var me=parseInt(Q,10);return JSON.parse(JSON.stringify(this.coordinates[me]))},Ne.prototype.removeCoordinate=function(Q){this.changed(),this.coordinates.splice(parseInt(Q,10),1)},Ne.prototype.updateCoordinate=function(Q,me,Je){var It=parseInt(Q,10);this.coordinates[It]=[me,Je],this.changed()};var Fe=function(Q,me){Ee.call(this,Q,me),this.coordinates=this.coordinates.map((function(Je){return Je.slice(0,-1)}))};(Fe.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every((function(Q){return Q.length>2}))},Fe.prototype.incomingCoords=function(Q){this.coordinates=Q.map((function(me){return me.slice(0,-1)})),this.changed()},Fe.prototype.setCoordinates=function(Q){this.coordinates=Q,this.changed()},Fe.prototype.addCoordinate=function(Q,me,Je){this.changed();var It=Q.split(".").map((function(jt){return parseInt(jt,10)}));this.coordinates[It[0]].splice(It[1],0,[me,Je])},Fe.prototype.removeCoordinate=function(Q){this.changed();var me=Q.split(".").map((function(It){return parseInt(It,10)})),Je=this.coordinates[me[0]];Je&&(Je.splice(me[1],1),Je.length<3&&this.coordinates.splice(me[0],1))},Fe.prototype.getCoordinate=function(Q){var me=Q.split(".").map((function(It){return parseInt(It,10)})),Je=this.coordinates[me[0]];return JSON.parse(JSON.stringify(Je[me[1]]))},Fe.prototype.getCoordinates=function(){return this.coordinates.map((function(Q){return Q.concat([Q[0]])}))},Fe.prototype.updateCoordinate=function(Q,me,Je){this.changed();var It=Q.split("."),jt=parseInt(It[0],10),qt=parseInt(It[1],10);this.coordinates[jt]===void 0&&(this.coordinates[jt]=[]),this.coordinates[jt][qt]=[me,Je]};var Xe={MultiPoint:we,MultiLineString:Ne,MultiPolygon:Fe},Be=function(Q,me,Je,It,jt){var qt=Je.split("."),Qt=parseInt(qt[0],10),Vr=qt[1]?qt.slice(1).join("."):null;return Q[Qt][me](Vr,It,jt)},ot=function(Q,me){if(Ee.call(this,Q,me),delete this.coordinates,this.model=Xe[me.geometry.type],this.model===void 0)throw new TypeError(me.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(me.geometry.coordinates)};function Ke(Q){this.map=Q.map,this.drawConfig=JSON.parse(JSON.stringify(Q.options||{})),this._ctx=Q}(ot.prototype=Object.create(Ee.prototype))._coordinatesToFeatures=function(Q){var me=this,Je=this.model.bind(this);return Q.map((function(It){return new Je(me.ctx,{id:he(),type:k.FEATURE,properties:{},geometry:{coordinates:It,type:me.type.replace("Multi","")}})}))},ot.prototype.isValid=function(){return this.features.every((function(Q){return Q.isValid()}))},ot.prototype.setCoordinates=function(Q){this.features=this._coordinatesToFeatures(Q),this.changed()},ot.prototype.getCoordinate=function(Q){return Be(this.features,"getCoordinate",Q)},ot.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(Q){return Q.type===k.POLYGON?Q.getCoordinates():Q.coordinates}))))},ot.prototype.updateCoordinate=function(Q,me,Je){Be(this.features,"updateCoordinate",Q,me,Je),this.changed()},ot.prototype.addCoordinate=function(Q,me,Je){Be(this.features,"addCoordinate",Q,me,Je),this.changed()},ot.prototype.removeCoordinate=function(Q){Be(this.features,"removeCoordinate",Q),this.changed()},ot.prototype.getFeatures=function(){return this.features},Ke.prototype.setSelected=function(Q){return this._ctx.store.setSelected(Q)},Ke.prototype.setSelectedCoordinates=function(Q){var me=this;this._ctx.store.setSelectedCoordinates(Q),Q.reduce((function(Je,It){return Je[It.feature_id]===void 0&&(Je[It.feature_id]=!0,me._ctx.store.get(It.feature_id).changed()),Je}),{})},Ke.prototype.getSelected=function(){return this._ctx.store.getSelected()},Ke.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Ke.prototype.isSelected=function(Q){return this._ctx.store.isSelected(Q)},Ke.prototype.getFeature=function(Q){return this._ctx.store.get(Q)},Ke.prototype.select=function(Q){return this._ctx.store.select(Q)},Ke.prototype.deselect=function(Q){return this._ctx.store.deselect(Q)},Ke.prototype.deleteFeature=function(Q,me){return me===void 0&&(me={}),this._ctx.store.delete(Q,me)},Ke.prototype.addFeature=function(Q){return this._ctx.store.add(Q)},Ke.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Ke.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Ke.prototype.setActionableState=function(Q){Q===void 0&&(Q={});var me={trash:Q.trash||!1,combineFeatures:Q.combineFeatures||!1,uncombineFeatures:Q.uncombineFeatures||!1};return this._ctx.events.actionable(me)},Ke.prototype.changeMode=function(Q,me,Je){return me===void 0&&(me={}),Je===void 0&&(Je={}),this._ctx.events.changeMode(Q,me,Je)},Ke.prototype.updateUIClasses=function(Q){return this._ctx.ui.queueMapClasses(Q)},Ke.prototype.activateUIButton=function(Q){return this._ctx.ui.setActiveButton(Q)},Ke.prototype.featuresAt=function(Q,me,Je){if(Je===void 0&&(Je="click"),Je!=="click"&&Je!=="touch")throw new Error("invalid buffer type");return se[Je](Q,me,this._ctx)},Ke.prototype.newFeature=function(Q){var me=Q.geometry.type;return me===k.POINT?new we(this._ctx,Q):me===k.LINE_STRING?new Ne(this._ctx,Q):me===k.POLYGON?new Fe(this._ctx,Q):new ot(this._ctx,Q)},Ke.prototype.isInstanceOf=function(Q,me){if(Q===k.POINT)return me instanceof we;if(Q===k.LINE_STRING)return me instanceof Ne;if(Q===k.POLYGON)return me instanceof Fe;if(Q==="MultiFeature")return me instanceof ot;throw new Error("Unknown feature class: "+Q)},Ke.prototype.doRender=function(Q){return this._ctx.store.featureChanged(Q)},Ke.prototype.onSetup=function(){},Ke.prototype.onDrag=function(){},Ke.prototype.onClick=function(){},Ke.prototype.onMouseMove=function(){},Ke.prototype.onMouseDown=function(){},Ke.prototype.onMouseUp=function(){},Ke.prototype.onMouseOut=function(){},Ke.prototype.onKeyUp=function(){},Ke.prototype.onKeyDown=function(){},Ke.prototype.onTouchStart=function(){},Ke.prototype.onTouchMove=function(){},Ke.prototype.onTouchEnd=function(){},Ke.prototype.onTap=function(){},Ke.prototype.onStop=function(){},Ke.prototype.onTrash=function(){},Ke.prototype.onCombineFeature=function(){},Ke.prototype.onUncombineFeature=function(){},Ke.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var it={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},ke=Object.keys(it);function Nt(Q){var me=Object.keys(Q);return function(Je,It){It===void 0&&(It={});var jt={},qt=me.reduce((function(Qt,Vr){return Qt[Vr]=Q[Vr],Qt}),new Ke(Je));return{start:function(){var Qt=this;jt=qt.onSetup(It),ke.forEach((function(Vr){var Wr,zr=it[Vr],Kr=function(){return!1};Q[zr]&&(Kr=function(){return!0}),Qt.on(Vr,Kr,(Wr=zr,function(Cr){return qt[Wr](jt,Cr)}))}))},stop:function(){qt.onStop(jt)},trash:function(){qt.onTrash(jt)},combineFeatures:function(){qt.onCombineFeatures(jt)},uncombineFeatures:function(){qt.onUncombineFeatures(jt)},render:function(Qt,Vr){qt.toDisplayFeatures(jt,Qt,Vr)}}}}function st(Q){return[].concat(Q).filter((function(me){return me!==void 0}))}function $e(){var Q=this;if(!(Q.ctx.map&&Q.ctx.map.getSource(S.HOT)!==void 0))return Wr();var me=Q.ctx.events.currentModeName();Q.ctx.ui.queueMapClasses({mode:me});var Je=[],It=[];Q.isDirty?It=Q.getAllIds():(Je=Q.getChangedIds().filter((function(zr){return Q.get(zr)!==void 0})),It=Q.sources.hot.filter((function(zr){return zr.properties.id&&Je.indexOf(zr.properties.id)===-1&&Q.get(zr.properties.id)!==void 0})).map((function(zr){return zr.properties.id}))),Q.sources.hot=[];var jt=Q.sources.cold.length;Q.sources.cold=Q.isDirty?[]:Q.sources.cold.filter((function(zr){var Kr=zr.properties.id||zr.properties.parent;return Je.indexOf(Kr)===-1}));var qt=jt!==Q.sources.cold.length||It.length>0;function Qt(zr,Kr){var Cr=Q.get(zr).internal(me);Q.ctx.events.currentModeRender(Cr,(function(Hn){Q.sources[Kr].push(Hn)}))}if(Je.forEach((function(zr){return Qt(zr,"hot")})),It.forEach((function(zr){return Qt(zr,"cold")})),qt&&Q.ctx.map.getSource(S.COLD).setData({type:k.FEATURE_COLLECTION,features:Q.sources.cold}),Q.ctx.map.getSource(S.HOT).setData({type:k.FEATURE_COLLECTION,features:Q.sources.hot}),Q._emitSelectionChange&&(Q.ctx.map.fire(D.SELECTION_CHANGE,{features:Q.getSelected().map((function(zr){return zr.toGeoJSON()})),points:Q.getSelectedCoordinates().map((function(zr){return{type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:zr.coordinates}}}))}),Q._emitSelectionChange=!1),Q._deletedFeaturesToEmit.length){var Vr=Q._deletedFeaturesToEmit.map((function(zr){return zr.toGeoJSON()}));Q._deletedFeaturesToEmit=[],Q.ctx.map.fire(D.DELETE,{features:Vr})}function Wr(){Q.isDirty=!1,Q.clearChangedIds()}Wr(),Q.ctx.map.fire(D.RENDER,{})}function Zt(Q){var me,Je=this;this._features={},this._featureIds=new H,this._selectedFeatureIds=new H,this._selectedCoordinates=[],this._changedFeatureIds=new H,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=Q,this.sources={hot:[],cold:[]},this.render=function(){me||(me=requestAnimationFrame((function(){me=null,$e.call(Je)})))},this.isDirty=!1}function $t(Q,me){var Je=Q._selectedCoordinates.filter((function(It){return Q._selectedFeatureIds.has(It.feature_id)}));Q._selectedCoordinates.length===Je.length||me.silent||(Q._emitSelectionChange=!0),Q._selectedCoordinates=Je}Zt.prototype.createRenderBatch=function(){var Q=this,me=this.render,Je=0;return this.render=function(){Je++},function(){Q.render=me,Je>0&&Q.render()}},Zt.prototype.setDirty=function(){return this.isDirty=!0,this},Zt.prototype.featureChanged=function(Q){return this._changedFeatureIds.add(Q),this},Zt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Zt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Zt.prototype.getAllIds=function(){return this._featureIds.values()},Zt.prototype.add=function(Q){return this.featureChanged(Q.id),this._features[Q.id]=Q,this._featureIds.add(Q.id),this},Zt.prototype.delete=function(Q,me){var Je=this;return me===void 0&&(me={}),st(Q).forEach((function(It){Je._featureIds.has(It)&&(Je._featureIds.delete(It),Je._selectedFeatureIds.delete(It),me.silent||Je._deletedFeaturesToEmit.indexOf(Je._features[It])===-1&&Je._deletedFeaturesToEmit.push(Je._features[It]),delete Je._features[It],Je.isDirty=!0)})),$t(this,me),this},Zt.prototype.get=function(Q){return this._features[Q]},Zt.prototype.getAll=function(){var Q=this;return Object.keys(this._features).map((function(me){return Q._features[me]}))},Zt.prototype.select=function(Q,me){var Je=this;return me===void 0&&(me={}),st(Q).forEach((function(It){Je._selectedFeatureIds.has(It)||(Je._selectedFeatureIds.add(It),Je._changedFeatureIds.add(It),me.silent||(Je._emitSelectionChange=!0))})),this},Zt.prototype.deselect=function(Q,me){var Je=this;return me===void 0&&(me={}),st(Q).forEach((function(It){Je._selectedFeatureIds.has(It)&&(Je._selectedFeatureIds.delete(It),Je._changedFeatureIds.add(It),me.silent||(Je._emitSelectionChange=!0))})),$t(this,me),this},Zt.prototype.clearSelected=function(Q){return Q===void 0&&(Q={}),this.deselect(this._selectedFeatureIds.values(),{silent:Q.silent}),this},Zt.prototype.setSelected=function(Q,me){var Je=this;return me===void 0&&(me={}),Q=st(Q),this.deselect(this._selectedFeatureIds.values().filter((function(It){return Q.indexOf(It)===-1})),{silent:me.silent}),this.select(Q.filter((function(It){return!Je._selectedFeatureIds.has(It)})),{silent:me.silent}),this},Zt.prototype.setSelectedCoordinates=function(Q){return this._selectedCoordinates=Q,this._emitSelectionChange=!0,this},Zt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Zt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Zt.prototype.getSelected=function(){var Q=this;return this._selectedFeatureIds.values().map((function(me){return Q.get(me)}))},Zt.prototype.getSelectedCoordinates=function(){var Q=this;return this._selectedCoordinates.map((function(me){return{coordinates:Q.get(me.feature_id).getCoordinate(me.coord_path)}}))},Zt.prototype.isSelected=function(Q){return this._selectedFeatureIds.has(Q)},Zt.prototype.setFeatureProperty=function(Q,me,Je){this.get(Q).setProperty(me,Je),this.featureChanged(Q)},Zt.prototype.storeMapConfig=function(){var Q=this;$.forEach((function(me){Q.ctx.map[me]&&(Q._mapInitialConfig[me]=Q.ctx.map[me].isEnabled())}))},Zt.prototype.restoreMapConfig=function(){var Q=this;Object.keys(this._mapInitialConfig).forEach((function(me){Q._mapInitialConfig[me]?Q.ctx.map[me].enable():Q.ctx.map[me].disable()}))},Zt.prototype.getInitialConfigValue=function(Q){return this._mapInitialConfig[Q]===void 0||this._mapInitialConfig[Q]};var Wt=function(){for(var Q=arguments,me={},Je=0;Je<arguments.length;Je++){var It=Q[Je];for(var jt in It)ht.call(It,jt)&&(me[jt]=It[jt])}return me},ht=Object.prototype.hasOwnProperty,sr=n(Wt),cr=["mode","feature","mouse"];function ir(Q){var me=null,Je=null,It={onRemove:function(){return Q.map.off("load",It.connect),clearInterval(Je),It.removeLayers(),Q.store.restoreMapConfig(),Q.ui.removeButtons(),Q.events.removeEventListeners(),Q.ui.clearMapClasses(),Q.boxZoomInitial&&Q.map.boxZoom.enable(),Q.map=null,Q.container=null,Q.store=null,me&&me.parentNode&&me.parentNode.removeChild(me),me=null,this},connect:function(){Q.map.off("load",It.connect),clearInterval(Je),It.addLayers(),Q.store.storeMapConfig(),Q.events.addEventListeners()},onAdd:function(jt){var qt=jt.fire;return jt.fire=function(Qt,Vr){var Wr=arguments;return qt.length===1&&arguments.length!==1&&(Wr=[sr({},{type:Qt},Vr)]),qt.apply(jt,Wr)},Q.map=jt,Q.events=(function(Qt){var Vr=Object.keys(Qt.options.modes).reduce((function(Tr,rn){return Tr[rn]=Nt(Qt.options.modes[rn]),Tr}),{}),Wr={},zr={},Kr={},Cr=null,Hn=null;Kr.drag=function(Tr,rn){rn({point:Tr.point,time:new Date().getTime()})?(Qt.ui.queueMapClasses({mouse:_.DRAG}),Hn.drag(Tr)):Tr.originalEvent.stopPropagation()},Kr.mousedrag=function(Tr){Kr.drag(Tr,(function(rn){return!ye(Wr,rn)}))},Kr.touchdrag=function(Tr){Kr.drag(Tr,(function(rn){return!xe(zr,rn)}))},Kr.mousemove=function(Tr){if((Tr.originalEvent.buttons!==void 0?Tr.originalEvent.buttons:Tr.originalEvent.which)===1)return Kr.mousedrag(Tr);var rn=fe(Tr,Qt);Tr.featureTarget=rn,Hn.mousemove(Tr)},Kr.mousedown=function(Tr){Wr={time:new Date().getTime(),point:Tr.point};var rn=fe(Tr,Qt);Tr.featureTarget=rn,Hn.mousedown(Tr)},Kr.mouseup=function(Tr){var rn=fe(Tr,Qt);Tr.featureTarget=rn,ye(Wr,{point:Tr.point,time:new Date().getTime()})?Hn.click(Tr):Hn.mouseup(Tr)},Kr.mouseout=function(Tr){Hn.mouseout(Tr)},Kr.touchstart=function(Tr){if(Qt.options.touchEnabled){zr={time:new Date().getTime(),point:Tr.point};var rn=se.touch(Tr,null,Qt)[0];Tr.featureTarget=rn,Hn.touchstart(Tr)}},Kr.touchmove=function(Tr){if(Qt.options.touchEnabled)return Hn.touchmove(Tr),Kr.touchdrag(Tr)},Kr.touchend=function(Tr){if(Tr.originalEvent.preventDefault(),Qt.options.touchEnabled){var rn=se.touch(Tr,null,Qt)[0];Tr.featureTarget=rn,xe(zr,{time:new Date().getTime(),point:Tr.point})?Hn.tap(Tr):Hn.touchend(Tr)}};var _i=function(Tr){return!(Tr===8||Tr===46||Tr>=48&&Tr<=57)};function Rn(Tr,rn,sn){sn===void 0&&(sn={}),Hn.stop();var ii=Vr[Tr];if(ii===void 0)throw new Error(Tr+" is not valid");Cr=Tr;var Ri=ii(Qt,rn);Hn=r(Ri,Qt),sn.silent||Qt.map.fire(D.MODE_CHANGE,{mode:Tr}),Qt.store.setDirty(),Qt.store.render()}Kr.keydown=function(Tr){(Tr.srcElement||Tr.target).classList.contains("mapboxgl-canvas")&&(Tr.keyCode!==8&&Tr.keyCode!==46||!Qt.options.controls.trash?_i(Tr.keyCode)?Hn.keydown(Tr):Tr.keyCode===49&&Qt.options.controls.point?Rn(M.DRAW_POINT):Tr.keyCode===50&&Qt.options.controls.line_string?Rn(M.DRAW_LINE_STRING):Tr.keyCode===51&&Qt.options.controls.polygon&&Rn(M.DRAW_POLYGON):(Tr.preventDefault(),Hn.trash()))},Kr.keyup=function(Tr){_i(Tr.keyCode)&&Hn.keyup(Tr)},Kr.zoomend=function(){Qt.store.changeZoom()},Kr.data=function(Tr){if(Tr.dataType==="style"){var rn=Qt.setup,sn=Qt.map,ii=Qt.options,Ri=Qt.store;ii.styles.some((function(sa){return sn.getLayer(sa.id)}))||(rn.addLayers(),Ri.setDirty(),Ri.render())}};var dn={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Cr=Qt.options.defaultMode,Hn=r(Vr[Cr](Qt),Qt)},changeMode:Rn,actionable:function(Tr){var rn=!1;Object.keys(Tr).forEach((function(sn){if(dn[sn]===void 0)throw new Error("Invalid action type");dn[sn]!==Tr[sn]&&(rn=!0),dn[sn]=Tr[sn]})),rn&&Qt.map.fire(D.ACTIONABLE,{actions:dn})},currentModeName:function(){return Cr},currentModeRender:function(Tr,rn){return Hn.render(Tr,rn)},fire:function(Tr,rn){Kr[Tr]&&Kr[Tr](rn)},addEventListeners:function(){Qt.map.on("mousemove",Kr.mousemove),Qt.map.on("mousedown",Kr.mousedown),Qt.map.on("mouseup",Kr.mouseup),Qt.map.on("data",Kr.data),Qt.map.on("touchmove",Kr.touchmove),Qt.map.on("touchstart",Kr.touchstart),Qt.map.on("touchend",Kr.touchend),Qt.container.addEventListener("mouseout",Kr.mouseout),Qt.options.keybindings&&(Qt.container.addEventListener("keydown",Kr.keydown),Qt.container.addEventListener("keyup",Kr.keyup))},removeEventListeners:function(){Qt.map.off("mousemove",Kr.mousemove),Qt.map.off("mousedown",Kr.mousedown),Qt.map.off("mouseup",Kr.mouseup),Qt.map.off("data",Kr.data),Qt.map.off("touchmove",Kr.touchmove),Qt.map.off("touchstart",Kr.touchstart),Qt.map.off("touchend",Kr.touchend),Qt.container.removeEventListener("mouseout",Kr.mouseout),Qt.options.keybindings&&(Qt.container.removeEventListener("keydown",Kr.keydown),Qt.container.removeEventListener("keyup",Kr.keyup))},trash:function(Tr){Hn.trash(Tr)},combineFeatures:function(){Hn.combineFeatures()},uncombineFeatures:function(){Hn.uncombineFeatures()},getMode:function(){return Cr}}})(Q),Q.ui=(function(Qt){var Vr={},Wr=null,zr={mode:null,feature:null,mouse:null},Kr={mode:null,feature:null,mouse:null};function Cr(Tr){Kr=sr(Kr,Tr)}function Hn(){var Tr,rn;if(Qt.container){var sn=[],ii=[];cr.forEach((function(Ri){Kr[Ri]!==zr[Ri]&&(sn.push(Ri+"-"+zr[Ri]),Kr[Ri]!==null&&ii.push(Ri+"-"+Kr[Ri]))})),sn.length>0&&(Tr=Qt.container.classList).remove.apply(Tr,sn),ii.length>0&&(rn=Qt.container.classList).add.apply(rn,ii),zr=sr(zr,Kr)}}function _i(Tr,rn){rn===void 0&&(rn={});var sn=document.createElement("button");return sn.className=b.CONTROL_BUTTON+" "+rn.className,sn.setAttribute("title",rn.title),rn.container.appendChild(sn),sn.addEventListener("click",(function(ii){if(ii.preventDefault(),ii.stopPropagation(),ii.target===Wr)return Rn(),void rn.onDeactivate();dn(Tr),rn.onActivate()}),!0),sn}function Rn(){Wr&&(Wr.classList.remove(b.ACTIVE_BUTTON),Wr=null)}function dn(Tr){Rn();var rn=Vr[Tr];rn&&rn&&Tr!=="trash"&&(rn.classList.add(b.ACTIVE_BUTTON),Wr=rn)}return{setActiveButton:dn,queueMapClasses:Cr,updateMapClasses:Hn,clearMapClasses:function(){Cr({mode:null,feature:null,mouse:null}),Hn()},addButtons:function(){var Tr=Qt.options.controls,rn=document.createElement("div");return rn.className=b.CONTROL_GROUP+" "+b.CONTROL_BASE,Tr&&(Tr[P.LINE]&&(Vr[P.LINE]=_i(P.LINE,{container:rn,className:b.CONTROL_BUTTON_LINE,title:"LineString tool "+(Qt.options.keybindings?"(l)":""),onActivate:function(){return Qt.events.changeMode(M.DRAW_LINE_STRING)},onDeactivate:function(){return Qt.events.trash()}})),Tr[P.POLYGON]&&(Vr[P.POLYGON]=_i(P.POLYGON,{container:rn,className:b.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Qt.options.keybindings?"(p)":""),onActivate:function(){return Qt.events.changeMode(M.DRAW_POLYGON)},onDeactivate:function(){return Qt.events.trash()}})),Tr[P.POINT]&&(Vr[P.POINT]=_i(P.POINT,{container:rn,className:b.CONTROL_BUTTON_POINT,title:"Marker tool "+(Qt.options.keybindings?"(m)":""),onActivate:function(){return Qt.events.changeMode(M.DRAW_POINT)},onDeactivate:function(){return Qt.events.trash()}})),Tr.trash&&(Vr.trash=_i("trash",{container:rn,className:b.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Qt.events.trash()}})),Tr.combine_features&&(Vr.combine_features=_i("combineFeatures",{container:rn,className:b.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Qt.events.combineFeatures()}})),Tr.uncombine_features&&(Vr.uncombine_features=_i("uncombineFeatures",{container:rn,className:b.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Qt.events.uncombineFeatures()}}))),rn},removeButtons:function(){Object.keys(Vr).forEach((function(Tr){var rn=Vr[Tr];rn.parentNode&&rn.parentNode.removeChild(rn),delete Vr[Tr]}))}}})(Q),Q.container=jt.getContainer(),Q.store=new Zt(Q),me=Q.ui.addButtons(),Q.options.boxSelect&&(Q.boxZoomInitial=jt.boxZoom.isEnabled(),jt.boxZoom.disable(),jt.dragPan.disable(),jt.dragPan.enable()),jt.loaded()?It.connect():(jt.on("load",It.connect),Je=setInterval((function(){jt.loaded()&&It.connect()}),16)),Q.events.start(),me},addLayers:function(){Q.map.addSource(S.COLD,{data:{type:k.FEATURE_COLLECTION,features:[]},type:"geojson"}),Q.map.addSource(S.HOT,{data:{type:k.FEATURE_COLLECTION,features:[]},type:"geojson"}),Q.options.styles.forEach((function(jt){Q.map.addLayer(jt)})),Q.store.setDirty(!0),Q.store.render()},removeLayers:function(){Q.options.styles.forEach((function(jt){Q.map.getLayer(jt.id)&&Q.map.removeLayer(jt.id)})),Q.map.getSource(S.COLD)&&Q.map.removeSource(S.COLD),Q.map.getSource(S.HOT)&&Q.map.removeSource(S.HOT)}};return Q.setup=It,It}var br=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function yr(Q){return function(me){var Je=me.featureTarget;return!!Je&&!!Je.properties&&Je.properties.meta===Q}}function Kt(Q){return!!Q.originalEvent&&!!Q.originalEvent.shiftKey&&Q.originalEvent.button===0}function at(Q){return!!Q.featureTarget&&!!Q.featureTarget.properties&&Q.featureTarget.properties.active===N.ACTIVE&&Q.featureTarget.properties.meta===B.FEATURE}function Ae(Q){return!!Q.featureTarget&&!!Q.featureTarget.properties&&Q.featureTarget.properties.active===N.INACTIVE&&Q.featureTarget.properties.meta===B.FEATURE}function _e(Q){return Q.featureTarget===void 0}function je(Q){return!!Q.featureTarget&&!!Q.featureTarget.properties&&Q.featureTarget.properties.meta===B.FEATURE}function Ge(Q){var me=Q.featureTarget;return!!me&&!!me.properties&&me.properties.meta===B.VERTEX}function He(Q){return!!Q.originalEvent&&Q.originalEvent.shiftKey===!0}function Dt(Q){return Q.keyCode===27}function St(Q){return Q.keyCode===13}var yt=Object.freeze({__proto__:null,isOfMetaType:yr,isShiftMousedown:Kt,isActiveFeature:at,isInactiveFeature:Ae,noTarget:_e,isFeature:je,isVertex:Ge,isShiftDown:He,isEscapeKey:Dt,isEnterKey:St,isTrue:function(){return!0}}),ct=Jt;function Jt(Q,me){this.x=Q,this.y=me}Jt.prototype={clone:function(){return new Jt(this.x,this.y)},add:function(Q){return this.clone()._add(Q)},sub:function(Q){return this.clone()._sub(Q)},multByPoint:function(Q){return this.clone()._multByPoint(Q)},divByPoint:function(Q){return this.clone()._divByPoint(Q)},mult:function(Q){return this.clone()._mult(Q)},div:function(Q){return this.clone()._div(Q)},rotate:function(Q){return this.clone()._rotate(Q)},rotateAround:function(Q,me){return this.clone()._rotateAround(Q,me)},matMult:function(Q){return this.clone()._matMult(Q)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(Q){return this.x===Q.x&&this.y===Q.y},dist:function(Q){return Math.sqrt(this.distSqr(Q))},distSqr:function(Q){var me=Q.x-this.x,Je=Q.y-this.y;return me*me+Je*Je},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(Q){return Math.atan2(this.y-Q.y,this.x-Q.x)},angleWith:function(Q){return this.angleWithSep(Q.x,Q.y)},angleWithSep:function(Q,me){return Math.atan2(this.x*me-this.y*Q,this.x*Q+this.y*me)},_matMult:function(Q){var me=Q[0]*this.x+Q[1]*this.y,Je=Q[2]*this.x+Q[3]*this.y;return this.x=me,this.y=Je,this},_add:function(Q){return this.x+=Q.x,this.y+=Q.y,this},_sub:function(Q){return this.x-=Q.x,this.y-=Q.y,this},_mult:function(Q){return this.x*=Q,this.y*=Q,this},_div:function(Q){return this.x/=Q,this.y/=Q,this},_multByPoint:function(Q){return this.x*=Q.x,this.y*=Q.y,this},_divByPoint:function(Q){return this.x/=Q.x,this.y/=Q.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var Q=this.y;return this.y=this.x,this.x=-Q,this},_rotate:function(Q){var me=Math.cos(Q),Je=Math.sin(Q),It=me*this.x-Je*this.y,jt=Je*this.x+me*this.y;return this.x=It,this.y=jt,this},_rotateAround:function(Q,me){var Je=Math.cos(Q),It=Math.sin(Q),jt=me.x+Je*(this.x-me.x)-It*(this.y-me.y),qt=me.y+It*(this.x-me.x)+Je*(this.y-me.y);return this.x=jt,this.y=qt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Jt.convert=function(Q){return Q instanceof Jt?Q:Array.isArray(Q)?new Jt(Q[0],Q[1]):Q};var Vt=n(ct);function xr(Q,me){var Je=me.getBoundingClientRect();return new Vt(Q.clientX-Je.left-(me.clientLeft||0),Q.clientY-Je.top-(me.clientTop||0))}function _r(Q,me,Je,It){return{type:k.FEATURE,properties:{meta:B.VERTEX,parent:Q,coord_path:Je,active:It?N.ACTIVE:N.INACTIVE},geometry:{type:k.POINT,coordinates:me}}}function Nr(Q,me,Je){var It=me.geometry.coordinates,jt=Je.geometry.coordinates;if(It[1]>85||It[1]<V||jt[1]>85||jt[1]<V)return null;var qt={lng:(It[0]+jt[0])/2,lat:(It[1]+jt[1])/2};return{type:k.FEATURE,properties:{meta:B.MIDPOINT,parent:Q,lng:qt.lng,lat:qt.lat,coord_path:Je.properties.coord_path},geometry:{type:k.POINT,coordinates:[qt.lng,qt.lat]}}}function tn(Q,me,Je){me===void 0&&(me={}),Je===void 0&&(Je=null);var It,jt=Q.geometry,qt=jt.type,Qt=jt.coordinates,Vr=Q.properties&&Q.properties.id,Wr=[];function zr(Cr,Hn){var _i="",Rn=null;Cr.forEach((function(dn,Tr){var rn=Hn!=null?Hn+"."+Tr:String(Tr),sn=_r(Vr,dn,rn,Kr(rn));if(me.midpoints&&Rn){var ii=Nr(Vr,Rn,sn);ii&&Wr.push(ii)}Rn=sn;var Ri=JSON.stringify(dn);_i!==Ri&&Wr.push(sn),Tr===0&&(_i=Ri)}))}function Kr(Cr){return!!me.selectedPaths&&me.selectedPaths.indexOf(Cr)!==-1}return qt===k.POINT?Wr.push(_r(Vr,Qt,Je,Kr(Je))):qt===k.POLYGON?Qt.forEach((function(Cr,Hn){zr(Cr,Je!==null?Je+"."+Hn:String(Hn))})):qt===k.LINE_STRING?zr(Qt,Je):qt.indexOf(k.MULTI_PREFIX)===0&&(It=qt.replace(k.MULTI_PREFIX,""),Qt.forEach((function(Cr,Hn){var _i={type:k.FEATURE,properties:Q.properties,geometry:{type:It,coordinates:Cr}};Wr=Wr.concat(tn(_i,me,Hn))}))),Wr}var Lr={enable:function(Q){setTimeout((function(){Q.map&&Q.map.doubleClickZoom&&Q._ctx&&Q._ctx.store&&Q._ctx.store.getInitialConfigValue&&Q._ctx.store.getInitialConfigValue("doubleClickZoom")&&Q.map.doubleClickZoom.enable()}),0)},disable:function(Q){setTimeout((function(){Q.map&&Q.map.doubleClickZoom&&Q.map.doubleClickZoom.disable()}),0)}},kt={exports:{}},Hr=function(Q){if(!Q||!Q.type)return null;var me=kn[Q.type];if(!me)return null;if(me==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:Q}]};if(me==="feature")return{type:"FeatureCollection",features:[Q]};if(me==="featurecollection")return Q},kn={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Ur=n(Hr),rr=Object.freeze({__proto__:null,default:function Q(me){switch(me&&me.type||null){case"FeatureCollection":return me.features=me.features.reduce((function(Je,It){return Je.concat(Q(It))}),[]),me;case"Feature":return me.geometry?Q(me.geometry).map((function(Je){var It={type:"Feature",properties:JSON.parse(JSON.stringify(me.properties)),geometry:Je};return me.id!==void 0&&(It.id=me.id),It})):[me];case"MultiPoint":return me.coordinates.map((function(Je){return{type:"Point",coordinates:Je}}));case"MultiPolygon":return me.coordinates.map((function(Je){return{type:"Polygon",coordinates:Je}}));case"MultiLineString":return me.coordinates.map((function(Je){return{type:"LineString",coordinates:Je}}));case"GeometryCollection":return me.geometries.map(Q).reduce((function(Je,It){return Je.concat(It)}),[]);case"Point":case"Polygon":case"LineString":return[me]}}}),Jn=Hr,en=i(rr),Vn=function(Q){return(function me(Je){return Array.isArray(Je)&&Je.length&&typeof Je[0]=="number"?[Je]:Je.reduce((function(It,jt){return Array.isArray(jt)&&Array.isArray(jt[0])?It.concat(me(jt)):(It.push(jt),It)}),[])})(Q)};en instanceof Function||(en=en.default);var Me={exports:{}},Ue=Me.exports=function(Q){return new Ct(Q)};function Ct(Q){this.value=Q}function Gt(Q,me,Je){var It=[],jt=[],qt=!0;return(function Qt(Vr){var Wr=Je?zt(Vr):Vr,zr={},Kr=!0,Cr={node:Wr,node_:Vr,path:[].concat(It),parent:jt[jt.length-1],parents:jt,key:It.slice(-1)[0],isRoot:It.length===0,level:It.length,circular:null,update:function(Rn,dn){Cr.isRoot||(Cr.parent.node[Cr.key]=Rn),Cr.node=Rn,dn&&(Kr=!1)},delete:function(Rn){delete Cr.parent.node[Cr.key],Rn&&(Kr=!1)},remove:function(Rn){Pi(Cr.parent.node)?Cr.parent.node.splice(Cr.key,1):delete Cr.parent.node[Cr.key],Rn&&(Kr=!1)},keys:null,before:function(Rn){zr.before=Rn},after:function(Rn){zr.after=Rn},pre:function(Rn){zr.pre=Rn},post:function(Rn){zr.post=Rn},stop:function(){qt=!1},block:function(){Kr=!1}};if(!qt)return Cr;function Hn(){if(typeof Cr.node=="object"&&Cr.node!==null){Cr.keys&&Cr.node_===Cr.node||(Cr.keys=qr(Cr.node)),Cr.isLeaf=Cr.keys.length==0;for(var Rn=0;Rn<jt.length;Rn++)if(jt[Rn].node_===Vr){Cr.circular=jt[Rn];break}}else Cr.isLeaf=!0,Cr.keys=null;Cr.notLeaf=!Cr.isLeaf,Cr.notRoot=!Cr.isRoot}Hn();var _i=me.call(Cr,Cr.node);return _i!==void 0&&Cr.update&&Cr.update(_i),zr.before&&zr.before.call(Cr,Cr.node),Kr&&(typeof Cr.node!="object"||Cr.node===null||Cr.circular||(jt.push(Cr),Hn(),gi(Cr.keys,(function(Rn,dn){It.push(Rn),zr.pre&&zr.pre.call(Cr,Cr.node[Rn],Rn);var Tr=Qt(Cr.node[Rn]);Je&&kr.call(Cr.node,Rn)&&(Cr.node[Rn]=Tr.node),Tr.isLast=dn==Cr.keys.length-1,Tr.isFirst=dn==0,zr.post&&zr.post.call(Cr,Tr),It.pop()})),jt.pop()),zr.after&&zr.after.call(Cr,Cr.node)),Cr})(Q).node}function zt(Q){if(typeof Q=="object"&&Q!==null){var me;if(Pi(Q))me=[];else if(En(Q)==="[object Date]")me=new Date(Q.getTime?Q.getTime():Q);else if((function(jt){return En(jt)==="[object RegExp]"})(Q))me=new RegExp(Q);else if((function(jt){return En(jt)==="[object Error]"})(Q))me={message:Q.message};else if((function(jt){return En(jt)==="[object Boolean]"})(Q))me=new Boolean(Q);else if((function(jt){return En(jt)==="[object Number]"})(Q))me=new Number(Q);else if((function(jt){return En(jt)==="[object String]"})(Q))me=new String(Q);else if(Object.create&&Object.getPrototypeOf)me=Object.create(Object.getPrototypeOf(Q));else if(Q.constructor===Object)me={};else{var Je=Q.constructor&&Q.constructor.prototype||Q.__proto__||{},It=function(){};It.prototype=Je,me=new It}return gi(qr(Q),(function(jt){me[jt]=Q[jt]})),me}return Q}Ct.prototype.get=function(Q){for(var me=this.value,Je=0;Je<Q.length;Je++){var It=Q[Je];if(!me||!kr.call(me,It)){me=void 0;break}me=me[It]}return me},Ct.prototype.has=function(Q){for(var me=this.value,Je=0;Je<Q.length;Je++){var It=Q[Je];if(!me||!kr.call(me,It))return!1;me=me[It]}return!0},Ct.prototype.set=function(Q,me){for(var Je=this.value,It=0;It<Q.length-1;It++){var jt=Q[It];kr.call(Je,jt)||(Je[jt]={}),Je=Je[jt]}return Je[Q[It]]=me,me},Ct.prototype.map=function(Q){return Gt(this.value,Q,!0)},Ct.prototype.forEach=function(Q){return this.value=Gt(this.value,Q,!1),this.value},Ct.prototype.reduce=function(Q,me){var Je=arguments.length===1,It=Je?this.value:me;return this.forEach((function(jt){this.isRoot&&Je||(It=Q.call(this,It,jt))})),It},Ct.prototype.paths=function(){var Q=[];return this.forEach((function(me){Q.push(this.path)})),Q},Ct.prototype.nodes=function(){var Q=[];return this.forEach((function(me){Q.push(this.node)})),Q},Ct.prototype.clone=function(){var Q=[],me=[];return(function Je(It){for(var jt=0;jt<Q.length;jt++)if(Q[jt]===It)return me[jt];if(typeof It=="object"&&It!==null){var qt=zt(It);return Q.push(It),me.push(qt),gi(qr(It),(function(Qt){qt[Qt]=Je(It[Qt])})),Q.pop(),me.pop(),qt}return It})(this.value)};var qr=Object.keys||function(Q){var me=[];for(var Je in Q)me.push(Je);return me};function En(Q){return Object.prototype.toString.call(Q)}var Pi=Array.isArray||function(Q){return Object.prototype.toString.call(Q)==="[object Array]"},gi=function(Q,me){if(Q.forEach)return Q.forEach(me);for(var Je=0;Je<Q.length;Je++)me(Q[Je],Je,Q)};gi(qr(Ct.prototype),(function(Q){Ue[Q]=function(me){var Je=[].slice.call(arguments,1),It=new Ct(me);return It[Q].apply(It,Je)}}));var kr=Object.hasOwnProperty||function(Q,me){return me in Q},Sn=Me.exports,Pn=Un;function Un(Q){if(!(this instanceof Un))return new Un(Q);this._bbox=Q||[1/0,1/0,-1/0,-1/0],this._valid=!!Q}Un.prototype.include=function(Q){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],Q[0]),this._bbox[1]=Math.min(this._bbox[1],Q[1]),this._bbox[2]=Math.max(this._bbox[2],Q[0]),this._bbox[3]=Math.max(this._bbox[3],Q[1]),this},Un.prototype.equals=function(Q){var me;return me=Q instanceof Un?Q.bbox():Q,this._bbox[0]==me[0]&&this._bbox[1]==me[1]&&this._bbox[2]==me[2]&&this._bbox[3]==me[3]},Un.prototype.center=function(Q){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Un.prototype.union=function(Q){var me;return this._valid=!0,me=Q instanceof Un?Q.bbox():Q,this._bbox[0]=Math.min(this._bbox[0],me[0]),this._bbox[1]=Math.min(this._bbox[1],me[1]),this._bbox[2]=Math.max(this._bbox[2],me[2]),this._bbox[3]=Math.max(this._bbox[3],me[3]),this},Un.prototype.bbox=function(){return this._valid?this._bbox:null},Un.prototype.contains=function(Q){if(!Q)return this._fastContains();if(!this._valid)return null;var me=Q[0],Je=Q[1];return this._bbox[0]<=me&&this._bbox[1]<=Je&&this._bbox[2]>=me&&this._bbox[3]>=Je},Un.prototype.intersect=function(Q){return this._valid?(me=Q instanceof Un?Q.bbox():Q,!(this._bbox[0]>me[2]||this._bbox[2]<me[0]||this._bbox[3]<me[1]||this._bbox[1]>me[3])):null;var me},Un.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var Q="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",Q)},Un.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ki=function(Q){if(!Q)return[];var me=en(Jn(Q)),Je=[];return me.features.forEach((function(It){It.geometry&&(Je=Je.concat(Vn(It.geometry.coordinates)))})),Je},ea=Sn,An=Pn,Ca={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Ni=Object.keys(Ca);function Ho(Q){for(var me=An(),Je=Ki(Q),It=0;It<Je.length;It++)me.include(Je[It]);return me}kt.exports=function(Q){return Ho(Q).bbox()},kt.exports.polygon=function(Q){return Ho(Q).polygon()},kt.exports.bboxify=function(Q){return ea(Q).map((function(me){me&&Ni.some((function(Je){return!!me[Je]&&Ca[Je].indexOf(me.type)!==-1}))&&(me.bbox=Ho(me).bbox(),this.update(me))}))};var pa=n(kt.exports),mo=-90;function Oa(Q,me){var Je=mo,It=90,jt=mo,qt=90,Qt=270,Vr=-270;Q.forEach((function(zr){var Kr=pa(zr),Cr=Kr[1],Hn=Kr[3],_i=Kr[0],Rn=Kr[2];Cr>Je&&(Je=Cr),Hn<It&&(It=Hn),Hn>jt&&(jt=Hn),Cr<qt&&(qt=Cr),_i<Qt&&(Qt=_i),Rn>Vr&&(Vr=Rn)}));var Wr=me;return Je+Wr.lat>85&&(Wr.lat=85-Je),jt+Wr.lat>90&&(Wr.lat=90-jt),It+Wr.lat<-85&&(Wr.lat=-85-It),qt+Wr.lat<mo&&(Wr.lat=mo-qt),Qt+Wr.lng<=-270&&(Wr.lng+=360*Math.ceil(Math.abs(Wr.lng)/360)),Vr+Wr.lng>=270&&(Wr.lng-=360*Math.ceil(Math.abs(Wr.lng)/360)),Wr}function zs(Q,me){var Je=Oa(Q.map((function(It){return It.toGeoJSON()})),me);Q.forEach((function(It){var jt,qt=It.getCoordinates(),Qt=function(Wr){var zr={lng:Wr[0]+Je.lng,lat:Wr[1]+Je.lat};return[zr.lng,zr.lat]},Vr=function(Wr){return Wr.map((function(zr){return Qt(zr)}))};It.type===k.POINT?jt=Qt(qt):It.type===k.LINE_STRING||It.type===k.MULTI_POINT?jt=qt.map(Qt):It.type===k.POLYGON||It.type===k.MULTI_LINE_STRING?jt=qt.map(Vr):It.type===k.MULTI_POLYGON&&(jt=qt.map((function(Wr){return Wr.map((function(zr){return Vr(zr)}))}))),It.incomingCoords(jt)}))}var fi={onSetup:function(Q){var me=this,Je={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:Q.featureIds||[]};return this.setSelected(Je.initiallySelectedFeatureIds.filter((function(It){return me.getFeature(It)!==void 0}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Je},fireUpdate:function(){this.map.fire(D.UPDATE,{action:F.MOVE,features:this.getSelected().map((function(Q){return Q.toGeoJSON()}))})},fireActionable:function(){var Q=this,me=this.getSelected(),Je=me.filter((function(Vr){return Q.isInstanceOf("MultiFeature",Vr)})),It=!1;if(me.length>1){It=!0;var jt=me[0].type.replace("Multi","");me.forEach((function(Vr){Vr.type.replace("Multi","")!==jt&&(It=!1)}))}var qt=Je.length>0,Qt=me.length>0;this.setActionableState({combineFeatures:It,uncombineFeatures:qt,trash:Qt})},getUniqueIds:function(Q){return Q.length?Q.map((function(me){return me.properties.id})).filter((function(me){return me!==void 0})).reduce((function(me,Je){return me.add(Je),me}),new H).values():[]},stopExtendedInteractions:function(Q){Q.boxSelectElement&&(Q.boxSelectElement.parentNode&&Q.boxSelectElement.parentNode.removeChild(Q.boxSelectElement),Q.boxSelectElement=null),this.map.dragPan.enable(),Q.boxSelecting=!1,Q.canBoxSelect=!1,Q.dragMoving=!1,Q.canDragMove=!1},onStop:function(){Lr.enable(this)},onMouseMove:function(Q,me){return je(me)&&Q.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(Q),!0},onMouseOut:function(Q){return!Q.dragMoving||this.fireUpdate()}};fi.onTap=fi.onClick=function(Q,me){return _e(me)?this.clickAnywhere(Q,me):yr(B.VERTEX)(me)?this.clickOnVertex(Q,me):je(me)?this.clickOnFeature(Q,me):void 0},fi.clickAnywhere=function(Q){var me=this,Je=this.getSelectedIds();Je.length&&(this.clearSelectedFeatures(),Je.forEach((function(It){return me.doRender(It)}))),Lr.enable(this),this.stopExtendedInteractions(Q)},fi.clickOnVertex=function(Q,me){this.changeMode(M.DIRECT_SELECT,{featureId:me.featureTarget.properties.parent,coordPath:me.featureTarget.properties.coord_path,startPos:me.lngLat}),this.updateUIClasses({mouse:_.MOVE})},fi.startOnActiveFeature=function(Q,me){this.stopExtendedInteractions(Q),this.map.dragPan.disable(),this.doRender(me.featureTarget.properties.id),Q.canDragMove=!0,Q.dragMoveLocation=me.lngLat},fi.clickOnFeature=function(Q,me){var Je=this;Lr.disable(this),this.stopExtendedInteractions(Q);var It=He(me),jt=this.getSelectedIds(),qt=me.featureTarget.properties.id,Qt=this.isSelected(qt);if(!It&&Qt&&this.getFeature(qt).type!==k.POINT)return this.changeMode(M.DIRECT_SELECT,{featureId:qt});Qt&&It?(this.deselect(qt),this.updateUIClasses({mouse:_.POINTER}),jt.length===1&&Lr.enable(this)):!Qt&&It?(this.select(qt),this.updateUIClasses({mouse:_.MOVE})):Qt||It||(jt.forEach((function(Vr){return Je.doRender(Vr)})),this.setSelected(qt),this.updateUIClasses({mouse:_.MOVE})),this.doRender(qt)},fi.onMouseDown=function(Q,me){return at(me)?this.startOnActiveFeature(Q,me):this.drawConfig.boxSelect&&Kt(me)?this.startBoxSelect(Q,me):void 0},fi.startBoxSelect=function(Q,me){this.stopExtendedInteractions(Q),this.map.dragPan.disable(),Q.boxSelectStartLocation=xr(me.originalEvent,this.map.getContainer()),Q.canBoxSelect=!0},fi.onTouchStart=function(Q,me){if(at(me))return this.startOnActiveFeature(Q,me)},fi.onDrag=function(Q,me){return Q.canDragMove?this.dragMove(Q,me):this.drawConfig.boxSelect&&Q.canBoxSelect?this.whileBoxSelect(Q,me):void 0},fi.whileBoxSelect=function(Q,me){Q.boxSelecting=!0,this.updateUIClasses({mouse:_.ADD}),Q.boxSelectElement||(Q.boxSelectElement=document.createElement("div"),Q.boxSelectElement.classList.add(b.BOX_SELECT),this.map.getContainer().appendChild(Q.boxSelectElement));var Je=xr(me.originalEvent,this.map.getContainer()),It=Math.min(Q.boxSelectStartLocation.x,Je.x),jt=Math.max(Q.boxSelectStartLocation.x,Je.x),qt=Math.min(Q.boxSelectStartLocation.y,Je.y),Qt=Math.max(Q.boxSelectStartLocation.y,Je.y),Vr="translate("+It+"px, "+qt+"px)";Q.boxSelectElement.style.transform=Vr,Q.boxSelectElement.style.WebkitTransform=Vr,Q.boxSelectElement.style.width=jt-It+"px",Q.boxSelectElement.style.height=Qt-qt+"px"},fi.dragMove=function(Q,me){Q.dragMoving=!0,me.originalEvent.stopPropagation();var Je={lng:me.lngLat.lng-Q.dragMoveLocation.lng,lat:me.lngLat.lat-Q.dragMoveLocation.lat};zs(this.getSelected(),Je),Q.dragMoveLocation=me.lngLat},fi.onTouchEnd=fi.onMouseUp=function(Q,me){var Je=this;if(Q.dragMoving)this.fireUpdate();else if(Q.boxSelecting){var It=[Q.boxSelectStartLocation,xr(me.originalEvent,this.map.getContainer())],jt=this.featuresAt(null,It,"click"),qt=this.getUniqueIds(jt).filter((function(Qt){return!Je.isSelected(Qt)}));qt.length&&(this.select(qt),qt.forEach((function(Qt){return Je.doRender(Qt)})),this.updateUIClasses({mouse:_.MOVE}))}this.stopExtendedInteractions(Q)},fi.toDisplayFeatures=function(Q,me,Je){me.properties.active=this.isSelected(me.properties.id)?N.ACTIVE:N.INACTIVE,Je(me),this.fireActionable(),me.properties.active===N.ACTIVE&&me.geometry.type!==k.POINT&&tn(me).forEach(Je)},fi.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},fi.onCombineFeatures=function(){var Q=this.getSelected();if(!(Q.length===0||Q.length<2)){for(var me=[],Je=[],It=Q[0].type.replace("Multi",""),jt=0;jt<Q.length;jt++){var qt=Q[jt];if(qt.type.replace("Multi","")!==It)return;qt.type.includes("Multi")?qt.getCoordinates().forEach((function(Vr){me.push(Vr)})):me.push(qt.getCoordinates()),Je.push(qt.toGeoJSON())}if(Je.length>1){var Qt=this.newFeature({type:k.FEATURE,properties:Je[0].properties,geometry:{type:"Multi"+It,coordinates:me}});this.addFeature(Qt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Qt.id]),this.map.fire(D.COMBINE_FEATURES,{createdFeatures:[Qt.toGeoJSON()],deletedFeatures:Je})}this.fireActionable()}},fi.onUncombineFeatures=function(){var Q=this,me=this.getSelected();if(me.length!==0){for(var Je=[],It=[],jt=function(Qt){var Vr=me[Qt];Q.isInstanceOf("MultiFeature",Vr)&&(Vr.getFeatures().forEach((function(Wr){Q.addFeature(Wr),Wr.properties=Vr.properties,Je.push(Wr.toGeoJSON()),Q.select([Wr.id])})),Q.deleteFeature(Vr.id,{silent:!0}),It.push(Vr.toGeoJSON()))},qt=0;qt<me.length;qt++)jt(qt);Je.length>1&&this.map.fire(D.UNCOMBINE_FEATURES,{createdFeatures:Je,deletedFeatures:It}),this.fireActionable()}};var Ai=yr(B.VERTEX),Ql=yr(B.MIDPOINT),na={fireUpdate:function(){this.map.fire(D.UPDATE,{action:F.CHANGE_COORDINATES,features:this.getSelected().map((function(Q){return Q.toGeoJSON()}))})},fireActionable:function(Q){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:Q.selectedCoordPaths.length>0})},startDragging:function(Q,me){this.map.dragPan.disable(),Q.canDragMove=!0,Q.dragMoveLocation=me.lngLat},stopDragging:function(Q){this.map.dragPan.enable(),Q.dragMoving=!1,Q.canDragMove=!1,Q.dragMoveLocation=null},onVertex:function(Q,me){this.startDragging(Q,me);var Je=me.featureTarget.properties,It=Q.selectedCoordPaths.indexOf(Je.coord_path);He(me)||It!==-1?He(me)&&It===-1&&Q.selectedCoordPaths.push(Je.coord_path):Q.selectedCoordPaths=[Je.coord_path];var jt=this.pathsToCoordinates(Q.featureId,Q.selectedCoordPaths);this.setSelectedCoordinates(jt)},onMidpoint:function(Q,me){this.startDragging(Q,me);var Je=me.featureTarget.properties;Q.feature.addCoordinate(Je.coord_path,Je.lng,Je.lat),this.fireUpdate(),Q.selectedCoordPaths=[Je.coord_path]},pathsToCoordinates:function(Q,me){return me.map((function(Je){return{feature_id:Q,coord_path:Je}}))},onFeature:function(Q,me){Q.selectedCoordPaths.length===0?this.startDragging(Q,me):this.stopDragging(Q)},dragFeature:function(Q,me,Je){zs(this.getSelected(),Je),Q.dragMoveLocation=me.lngLat},dragVertex:function(Q,me,Je){for(var It=Q.selectedCoordPaths.map((function(Vr){return Q.feature.getCoordinate(Vr)})),jt=Oa(It.map((function(Vr){return{type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:Vr}}})),Je),qt=0;qt<It.length;qt++){var Qt=It[qt];Q.feature.updateCoordinate(Q.selectedCoordPaths[qt],Qt[0]+jt.lng,Qt[1]+jt.lat)}},clickNoTarget:function(){this.changeMode(M.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(M.SIMPLE_SELECT)},clickActiveFeature:function(Q){Q.selectedCoordPaths=[],this.clearSelectedCoordinates(),Q.feature.changed()},onSetup:function(Q){var me=Q.featureId,Je=this.getFeature(me);if(!Je)throw new Error("You must provide a featureId to enter direct_select mode");if(Je.type===k.POINT)throw new TypeError("direct_select mode doesn't handle point features");var It={featureId:me,feature:Je,dragMoveLocation:Q.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:Q.coordPath?[Q.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(me,It.selectedCoordPaths)),this.setSelected(me),Lr.disable(this),this.setActionableState({trash:!0}),It},onStop:function(){Lr.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(Q,me,Je){Q.featureId===me.properties.id?(me.properties.active=N.ACTIVE,Je(me),tn(me,{map:this.map,midpoints:!0,selectedPaths:Q.selectedCoordPaths}).forEach(Je)):(me.properties.active=N.INACTIVE,Je(me)),this.fireActionable(Q)},onTrash:function(Q){Q.selectedCoordPaths.sort((function(me,Je){return Je.localeCompare(me,"en",{numeric:!0})})).forEach((function(me){return Q.feature.removeCoordinate(me)})),this.fireUpdate(),Q.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(Q),Q.feature.isValid()===!1&&(this.deleteFeature([Q.featureId]),this.changeMode(M.SIMPLE_SELECT,{}))},onMouseMove:function(Q,me){var Je=at(me),It=Ai(me),jt=Ql(me),qt=Q.selectedCoordPaths.length===0;return Je&&qt||It&&!qt?this.updateUIClasses({mouse:_.MOVE}):this.updateUIClasses({mouse:_.NONE}),(It||Je||jt)&&Q.dragMoving&&this.fireUpdate(),this.stopDragging(Q),!0},onMouseOut:function(Q){return Q.dragMoving&&this.fireUpdate(),!0}};na.onTouchStart=na.onMouseDown=function(Q,me){return Ai(me)?this.onVertex(Q,me):at(me)?this.onFeature(Q,me):Ql(me)?this.onMidpoint(Q,me):void 0},na.onDrag=function(Q,me){if(Q.canDragMove===!0){Q.dragMoving=!0,me.originalEvent.stopPropagation();var Je={lng:me.lngLat.lng-Q.dragMoveLocation.lng,lat:me.lngLat.lat-Q.dragMoveLocation.lat};Q.selectedCoordPaths.length>0?this.dragVertex(Q,me,Je):this.dragFeature(Q,me,Je),Q.dragMoveLocation=me.lngLat}},na.onClick=function(Q,me){return _e(me)?this.clickNoTarget(Q,me):at(me)?this.clickActiveFeature(Q,me):Ae(me)?this.clickInactive(Q,me):void this.stopDragging(Q)},na.onTap=function(Q,me){return _e(me)?this.clickNoTarget(Q,me):at(me)?this.clickActiveFeature(Q,me):Ae(me)?this.clickInactive(Q,me):void 0},na.onTouchEnd=na.onMouseUp=function(Q){Q.dragMoving&&this.fireUpdate(),this.stopDragging(Q)};var Na={};function Wo(Q,me){return!!Q.lngLat&&Q.lngLat.lng===me[0]&&Q.lngLat.lat===me[1]}Na.onSetup=function(){var Q=this.newFeature({type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:[]}});return this.addFeature(Q),this.clearSelectedFeatures(),this.updateUIClasses({mouse:_.ADD}),this.activateUIButton(P.POINT),this.setActionableState({trash:!0}),{point:Q}},Na.stopDrawingAndRemove=function(Q){this.deleteFeature([Q.point.id],{silent:!0}),this.changeMode(M.SIMPLE_SELECT)},Na.onTap=Na.onClick=function(Q,me){this.updateUIClasses({mouse:_.MOVE}),Q.point.updateCoordinate("",me.lngLat.lng,me.lngLat.lat),this.map.fire(D.CREATE,{features:[Q.point.toGeoJSON()]}),this.changeMode(M.SIMPLE_SELECT,{featureIds:[Q.point.id]})},Na.onStop=function(Q){this.activateUIButton(),Q.point.getCoordinate().length||this.deleteFeature([Q.point.id],{silent:!0})},Na.toDisplayFeatures=function(Q,me,Je){var It=me.properties.id===Q.point.id;if(me.properties.active=It?N.ACTIVE:N.INACTIVE,!It)return Je(me)},Na.onTrash=Na.stopDrawingAndRemove,Na.onKeyUp=function(Q,me){if(Dt(me)||St(me))return this.stopDrawingAndRemove(Q,me)};var ma={onSetup:function(){var Q=this.newFeature({type:k.FEATURE,properties:{},geometry:{type:k.POLYGON,coordinates:[[]]}});return this.addFeature(Q),this.clearSelectedFeatures(),Lr.disable(this),this.updateUIClasses({mouse:_.ADD}),this.activateUIButton(P.POLYGON),this.setActionableState({trash:!0}),{polygon:Q,currentVertexPosition:0}},clickAnywhere:function(Q,me){if(Q.currentVertexPosition>0&&Wo(me,Q.polygon.coordinates[0][Q.currentVertexPosition-1]))return this.changeMode(M.SIMPLE_SELECT,{featureIds:[Q.polygon.id]});this.updateUIClasses({mouse:_.ADD}),Q.polygon.updateCoordinate("0."+Q.currentVertexPosition,me.lngLat.lng,me.lngLat.lat),Q.currentVertexPosition++,Q.polygon.updateCoordinate("0."+Q.currentVertexPosition,me.lngLat.lng,me.lngLat.lat)},clickOnVertex:function(Q){return this.changeMode(M.SIMPLE_SELECT,{featureIds:[Q.polygon.id]})},onMouseMove:function(Q,me){Q.polygon.updateCoordinate("0."+Q.currentVertexPosition,me.lngLat.lng,me.lngLat.lat),Ge(me)&&this.updateUIClasses({mouse:_.POINTER})}};ma.onTap=ma.onClick=function(Q,me){return Ge(me)?this.clickOnVertex(Q,me):this.clickAnywhere(Q,me)},ma.onKeyUp=function(Q,me){Dt(me)?(this.deleteFeature([Q.polygon.id],{silent:!0}),this.changeMode(M.SIMPLE_SELECT)):St(me)&&this.changeMode(M.SIMPLE_SELECT,{featureIds:[Q.polygon.id]})},ma.onStop=function(Q){this.updateUIClasses({mouse:_.NONE}),Lr.enable(this),this.activateUIButton(),this.getFeature(Q.polygon.id)!==void 0&&(Q.polygon.removeCoordinate("0."+Q.currentVertexPosition),Q.polygon.isValid()?this.map.fire(D.CREATE,{features:[Q.polygon.toGeoJSON()]}):(this.deleteFeature([Q.polygon.id],{silent:!0}),this.changeMode(M.SIMPLE_SELECT,{},{silent:!0})))},ma.toDisplayFeatures=function(Q,me,Je){var It=me.properties.id===Q.polygon.id;if(me.properties.active=It?N.ACTIVE:N.INACTIVE,!It)return Je(me);if(me.geometry.coordinates.length!==0){var jt=me.geometry.coordinates[0].length;if(!(jt<3)){if(me.properties.meta=B.FEATURE,Je(_r(Q.polygon.id,me.geometry.coordinates[0][0],"0.0",!1)),jt>3){var qt=me.geometry.coordinates[0].length-3;Je(_r(Q.polygon.id,me.geometry.coordinates[0][qt],"0."+qt,!1))}if(jt<=4){var Qt=[[me.geometry.coordinates[0][0][0],me.geometry.coordinates[0][0][1]],[me.geometry.coordinates[0][1][0],me.geometry.coordinates[0][1][1]]];if(Je({type:k.FEATURE,properties:me.properties,geometry:{coordinates:Qt,type:k.LINE_STRING}}),jt===3)return}return Je(me)}}},ma.onTrash=function(Q){this.deleteFeature([Q.polygon.id],{silent:!0}),this.changeMode(M.SIMPLE_SELECT)};var Xo={onSetup:function(Q){var me,Je,It=(Q=Q||{}).featureId,jt="forward";if(It){if(!(me=this.getFeature(It)))throw new Error("Could not find a feature with the provided featureId");var qt=Q.from;if(qt&&qt.type==="Feature"&&qt.geometry&&qt.geometry.type==="Point"&&(qt=qt.geometry),qt&&qt.type==="Point"&&qt.coordinates&&qt.coordinates.length===2&&(qt=qt.coordinates),!qt||!Array.isArray(qt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Qt=me.coordinates.length-1;if(me.coordinates[Qt][0]===qt[0]&&me.coordinates[Qt][1]===qt[1])Je=Qt+1,me.addCoordinate.apply(me,[Je].concat(me.coordinates[Qt]));else{if(me.coordinates[0][0]!==qt[0]||me.coordinates[0][1]!==qt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");jt="backwards",Je=0,me.addCoordinate.apply(me,[Je].concat(me.coordinates[0]))}}else me=this.newFeature({type:k.FEATURE,properties:{},geometry:{type:k.LINE_STRING,coordinates:[]}}),Je=0,this.addFeature(me);return this.clearSelectedFeatures(),Lr.disable(this),this.updateUIClasses({mouse:_.ADD}),this.activateUIButton(P.LINE),this.setActionableState({trash:!0}),{line:me,currentVertexPosition:Je,direction:jt}},clickAnywhere:function(Q,me){if(Q.currentVertexPosition>0&&Wo(me,Q.line.coordinates[Q.currentVertexPosition-1])||Q.direction==="backwards"&&Wo(me,Q.line.coordinates[Q.currentVertexPosition+1]))return this.changeMode(M.SIMPLE_SELECT,{featureIds:[Q.line.id]});this.updateUIClasses({mouse:_.ADD}),Q.line.updateCoordinate(Q.currentVertexPosition,me.lngLat.lng,me.lngLat.lat),Q.direction==="forward"?(Q.currentVertexPosition++,Q.line.updateCoordinate(Q.currentVertexPosition,me.lngLat.lng,me.lngLat.lat)):Q.line.addCoordinate(0,me.lngLat.lng,me.lngLat.lat)},clickOnVertex:function(Q){return this.changeMode(M.SIMPLE_SELECT,{featureIds:[Q.line.id]})},onMouseMove:function(Q,me){Q.line.updateCoordinate(Q.currentVertexPosition,me.lngLat.lng,me.lngLat.lat),Ge(me)&&this.updateUIClasses({mouse:_.POINTER})}};Xo.onTap=Xo.onClick=function(Q,me){if(Ge(me))return this.clickOnVertex(Q,me);this.clickAnywhere(Q,me)},Xo.onKeyUp=function(Q,me){St(me)?this.changeMode(M.SIMPLE_SELECT,{featureIds:[Q.line.id]}):Dt(me)&&(this.deleteFeature([Q.line.id],{silent:!0}),this.changeMode(M.SIMPLE_SELECT))},Xo.onStop=function(Q){Lr.enable(this),this.activateUIButton(),this.getFeature(Q.line.id)!==void 0&&(Q.line.removeCoordinate(""+Q.currentVertexPosition),Q.line.isValid()?this.map.fire(D.CREATE,{features:[Q.line.toGeoJSON()]}):(this.deleteFeature([Q.line.id],{silent:!0}),this.changeMode(M.SIMPLE_SELECT,{},{silent:!0})))},Xo.onTrash=function(Q){this.deleteFeature([Q.line.id],{silent:!0}),this.changeMode(M.SIMPLE_SELECT)},Xo.toDisplayFeatures=function(Q,me,Je){var It=me.properties.id===Q.line.id;if(me.properties.active=It?N.ACTIVE:N.INACTIVE,!It)return Je(me);me.geometry.coordinates.length<2||(me.properties.meta=B.FEATURE,Je(_r(Q.line.id,me.geometry.coordinates[Q.direction==="forward"?me.geometry.coordinates.length-2:1],""+(Q.direction==="forward"?me.geometry.coordinates.length-2:1),!1)),Je(me))};var fl={simple_select:fi,direct_select:na,draw_point:Na,draw_polygon:ma,draw_line_string:Xo},Ea={defaultMode:M.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:br,modes:fl,controls:{},userProperties:!1},oa={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},qu={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function js(Q,me){return Q.map((function(Je){return Je.source?Je:sr(Je,{id:Je.id+"."+me,source:me==="hot"?S.HOT:S.COLD})}))}var No={exports:{}};(function(Q,me){var Je="__lodash_hash_undefined__",It=9007199254740991,jt="[object Arguments]",qt="[object Array]",Qt="[object Boolean]",Vr="[object Date]",Wr="[object Error]",zr="[object Function]",Kr="[object Map]",Cr="[object Number]",Hn="[object Object]",_i="[object Promise]",Rn="[object RegExp]",dn="[object Set]",Tr="[object String]",rn="[object Symbol]",sn="[object WeakMap]",ii="[object ArrayBuffer]",Ri="[object DataView]",sa=/^\[object .+?Constructor\]$/,hi=/^(?:0|[1-9]\d*)$/,ai={};ai["[object Float32Array]"]=ai["[object Float64Array]"]=ai["[object Int8Array]"]=ai["[object Int16Array]"]=ai["[object Int32Array]"]=ai["[object Uint8Array]"]=ai["[object Uint8ClampedArray]"]=ai["[object Uint16Array]"]=ai["[object Uint32Array]"]=!0,ai[jt]=ai[qt]=ai[ii]=ai[Qt]=ai[Ri]=ai[Vr]=ai[Wr]=ai[zr]=ai[Kr]=ai[Cr]=ai[Hn]=ai[Rn]=ai[dn]=ai[Tr]=ai[sn]=!1;var as=typeof Jh=="object"&&Jh&&Jh.Object===Object&&Jh,_s=typeof self=="object"&&self&&self.Object===Object&&self,xi=as||_s||Function("return this")(),os=me&&!me.nodeType&&me,Xi=os&&Q&&!Q.nodeType&&Q,tu=Xi&&Xi.exports===os,Fa=tu&&as.process,xs=(function(){try{return Fa&&Fa.binding&&Fa.binding("util")}catch{}})(),So=xs&&xs.isTypedArray;function ru(er,fr){for(var nn=-1,bn=er==null?0:er.length;++nn<bn;)if(fr(er[nn],nn,er))return!0;return!1}function nu(er){var fr=-1,nn=Array(er.size);return er.forEach((function(bn,ci){nn[++fr]=[ci,bn]})),nn}function Ja(er){var fr=-1,nn=Array(er.size);return er.forEach((function(bn){nn[++fr]=bn})),nn}var ki,ws,Yn,Wn=Array.prototype,go=Function.prototype,Zn=Object.prototype,ue=xi["__core-js_shared__"],We=go.toString,bt=Zn.hasOwnProperty,Ft=(ki=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+ki:"",nr=Zn.toString,Pr=RegExp("^"+We.call(bt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$r=tu?xi.Buffer:void 0,Tn=xi.Symbol,Dn=xi.Uint8Array,Mn=Zn.propertyIsEnumerable,ni=Wn.splice,On=Tn?Tn.toStringTag:void 0,Mi=Object.getOwnPropertySymbols,Fi=$r?$r.isBuffer:void 0,Gi=(ws=Object.keys,Yn=Object,function(er){return ws(Yn(er))}),pi=Qa(xi,"DataView"),ga=Qa(xi,"Map"),Ia=Qa(xi,"Promise"),Ss=Qa(xi,"Set"),qs=Qa(xi,"WeakMap"),Cs=Qa(Object,"create"),Co=Ps(pi),Es=Ps(ga),ya=Ps(Ia),Ts=Ps(Ss),nl=Ps(qs),Yo=Tn?Tn.prototype:void 0,wi=Yo?Yo.valueOf:void 0;function Eo(er){var fr=-1,nn=er==null?0:er.length;for(this.clear();++fr<nn;){var bn=er[fr];this.set(bn[0],bn[1])}}function xa(er){var fr=-1,nn=er==null?0:er.length;for(this.clear();++fr<nn;){var bn=er[fr];this.set(bn[0],bn[1])}}function Bo(er){var fr=-1,nn=er==null?0:er.length;for(this.clear();++fr<nn;){var bn=er[fr];this.set(bn[0],bn[1])}}function ss(er){var fr=-1,nn=er==null?0:er.length;for(this.__data__=new Bo;++fr<nn;)this.add(er[fr])}function Ba(er){var fr=this.__data__=new xa(er);this.size=fr.size}function Cu(er,fr){var nn=hl(er),bn=!nn&&ka(er),ci=!nn&&!bn&&$s(er),_n=!nn&&!bn&&!ci&&gl(er),E=nn||bn||ci||_n,m=E?(function(q,ne){for(var ve=-1,De=Array(q);++ve<q;)De[ve]=ne(ve);return De})(er.length,String):[],v=m.length;for(var T in er)!bt.call(er,T)||E&&(T=="length"||ci&&(T=="offset"||T=="parent")||_n&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||Ol(T,v))||m.push(T);return m}function Rl(er,fr){for(var nn=er.length;nn--;)if(Zo(er[nn][0],fr))return nn;return-1}function Is(er){return er==null?er===void 0?"[object Undefined]":"[object Null]":On&&On in Object(er)?(function(fr){var nn=bt.call(fr,On),bn=fr[On];try{fr[On]=void 0;var ci=!0}catch{}var _n=nr.call(fr);return ci&&(nn?fr[On]=bn:delete fr[On]),_n})(er):(function(fr){return nr.call(fr)})(er)}function Pa(er){return Us(er)&&Is(er)==jt}function ls(er,fr,nn,bn,ci){return er===fr||(er==null||fr==null||!Us(er)&&!Us(fr)?er!=er&&fr!=fr:(function(_n,E,m,v,T,q){var ne=hl(_n),ve=hl(E),De=ne?qt:Aa(_n),tt=ve?qt:Aa(E),dt=(De=De==jt?Hn:De)==Hn,tr=(tt=tt==jt?Hn:tt)==Hn,ar=De==tt;if(ar&&$s(_n)){if(!$s(E))return!1;ne=!0,dt=!1}if(ar&&!dt)return q||(q=new Ba),ne||gl(_n)?Vs(_n,E,m,v,T,q):(function(In,gn,Ui,Ji,Ha,va,To){switch(Ui){case Ri:if(In.byteLength!=gn.byteLength||In.byteOffset!=gn.byteOffset)return!1;In=In.buffer,gn=gn.buffer;case ii:return!(In.byteLength!=gn.byteLength||!va(new Dn(In),new Dn(gn)));case Qt:case Vr:case Cr:return Zo(+In,+gn);case Wr:return In.name==gn.name&&In.message==gn.message;case Rn:case Tr:return In==gn+"";case Kr:var As=nu;case dn:var il=1&Ji;if(As||(As=Ja),In.size!=gn.size&&!il)return!1;var Nl=To.get(In);if(Nl)return Nl==gn;Ji|=2,To.set(In,gn);var Fl=Vs(As(In),As(gn),Ji,Ha,va,To);return To.delete(In),Fl;case rn:if(wi)return wi.call(In)==wi.call(gn)}return!1})(_n,E,De,m,v,T,q);if(!(1&m)){var Fr=dt&&bt.call(_n,"__wrapped__"),fn=tr&&bt.call(E,"__wrapped__");if(Fr||fn){var Cn=Fr?_n.value():_n,Bn=fn?E.value():E;return q||(q=new Ba),T(Cn,Bn,m,v,q)}}return ar?(q||(q=new Ba),(function(In,gn,Ui,Ji,Ha,va){var To=1&Ui,As=Dl(In),il=As.length,Nl=Dl(gn).length;if(il!=Nl&&!To)return!1;for(var Fl=il;Fl--;){var us=As[Fl];if(!(To?us in gn:bt.call(gn,us)))return!1}var yl=va.get(In);if(yl&&va.get(gn))return yl==gn;var vl=!0;va.set(In,gn),va.set(gn,In);for(var oo=To;++Fl<il;){var Xn=In[us=As[Fl]],ou=gn[us];if(Ji)var sd=To?Ji(ou,Xn,us,gn,In,va):Ji(Xn,ou,us,In,gn,va);if(!(sd===void 0?Xn===ou||Ha(Xn,ou,Ui,Ji,va):sd)){vl=!1;break}oo||(oo=us=="constructor")}if(vl&&!oo){var kc=In.constructor,Bl=gn.constructor;kc==Bl||!("constructor"in In)||!("constructor"in gn)||typeof kc=="function"&&kc instanceof kc&&typeof Bl=="function"&&Bl instanceof Bl||(vl=!1)}return va.delete(In),va.delete(gn),vl})(_n,E,m,v,T,q)):!1})(er,fr,nn,bn,ls,ci))}function Eu(er){return!(!ml(er)||(function(fr){return!!Ft&&Ft in fr})(er))&&(Gs(er)?Pr:sa).test(Ps(er))}function Tu(er){if(nn=(fr=er)&&fr.constructor,bn=typeof nn=="function"&&nn.prototype||Zn,fr!==bn)return Gi(er);var fr,nn,bn,ci=[];for(var _n in Object(er))bt.call(er,_n)&&_n!="constructor"&&ci.push(_n);return ci}function Vs(er,fr,nn,bn,ci,_n){var E=1&nn,m=er.length,v=fr.length;if(m!=v&&!(E&&v>m))return!1;var T=_n.get(er);if(T&&_n.get(fr))return T==fr;var q=-1,ne=!0,ve=2&nn?new ss:void 0;for(_n.set(er,fr),_n.set(fr,er);++q<m;){var De=er[q],tt=fr[q];if(bn)var dt=E?bn(tt,De,q,fr,er,_n):bn(De,tt,q,er,fr,_n);if(dt!==void 0){if(dt)continue;ne=!1;break}if(ve){if(!ru(fr,(function(tr,ar){if(Fr=ar,!ve.has(Fr)&&(De===tr||ci(De,tr,nn,bn,_n)))return ve.push(ar);var Fr}))){ne=!1;break}}else if(De!==tt&&!ci(De,tt,nn,bn,_n)){ne=!1;break}}return _n.delete(er),_n.delete(fr),ne}function Dl(er){return(function(fr,nn,bn){var ci=nn(fr);return hl(fr)?ci:(function(_n,E){for(var m=-1,v=E.length,T=_n.length;++m<v;)_n[T+m]=E[m];return _n})(ci,bn(fr))})(er,au,iu)}function yo(er,fr){var nn,bn,ci=er.__data__;return((bn=typeof(nn=fr))=="string"||bn=="number"||bn=="symbol"||bn=="boolean"?nn!=="__proto__":nn===null)?ci[typeof fr=="string"?"string":"hash"]:ci.map}function Qa(er,fr){var nn=(function(bn,ci){return bn?.[ci]})(er,fr);return Eu(nn)?nn:void 0}Eo.prototype.clear=function(){this.__data__=Cs?Cs(null):{},this.size=0},Eo.prototype.delete=function(er){var fr=this.has(er)&&delete this.__data__[er];return this.size-=fr?1:0,fr},Eo.prototype.get=function(er){var fr=this.__data__;if(Cs){var nn=fr[er];return nn===Je?void 0:nn}return bt.call(fr,er)?fr[er]:void 0},Eo.prototype.has=function(er){var fr=this.__data__;return Cs?fr[er]!==void 0:bt.call(fr,er)},Eo.prototype.set=function(er,fr){var nn=this.__data__;return this.size+=this.has(er)?0:1,nn[er]=Cs&&fr===void 0?Je:fr,this},xa.prototype.clear=function(){this.__data__=[],this.size=0},xa.prototype.delete=function(er){var fr=this.__data__,nn=Rl(fr,er);return!(nn<0)&&(nn==fr.length-1?fr.pop():ni.call(fr,nn,1),--this.size,!0)},xa.prototype.get=function(er){var fr=this.__data__,nn=Rl(fr,er);return nn<0?void 0:fr[nn][1]},xa.prototype.has=function(er){return Rl(this.__data__,er)>-1},xa.prototype.set=function(er,fr){var nn=this.__data__,bn=Rl(nn,er);return bn<0?(++this.size,nn.push([er,fr])):nn[bn][1]=fr,this},Bo.prototype.clear=function(){this.size=0,this.__data__={hash:new Eo,map:new(ga||xa),string:new Eo}},Bo.prototype.delete=function(er){var fr=yo(this,er).delete(er);return this.size-=fr?1:0,fr},Bo.prototype.get=function(er){return yo(this,er).get(er)},Bo.prototype.has=function(er){return yo(this,er).has(er)},Bo.prototype.set=function(er,fr){var nn=yo(this,er),bn=nn.size;return nn.set(er,fr),this.size+=nn.size==bn?0:1,this},ss.prototype.add=ss.prototype.push=function(er){return this.__data__.set(er,Je),this},ss.prototype.has=function(er){return this.__data__.has(er)},Ba.prototype.clear=function(){this.__data__=new xa,this.size=0},Ba.prototype.delete=function(er){var fr=this.__data__,nn=fr.delete(er);return this.size=fr.size,nn},Ba.prototype.get=function(er){return this.__data__.get(er)},Ba.prototype.has=function(er){return this.__data__.has(er)},Ba.prototype.set=function(er,fr){var nn=this.__data__;if(nn instanceof xa){var bn=nn.__data__;if(!ga||bn.length<199)return bn.push([er,fr]),this.size=++nn.size,this;nn=this.__data__=new Bo(bn)}return nn.set(er,fr),this.size=nn.size,this};var iu=Mi?function(er){return er==null?[]:(er=Object(er),(function(fr,nn){for(var bn=-1,ci=fr==null?0:fr.length,_n=0,E=[];++bn<ci;){var m=fr[bn];nn(m,bn,fr)&&(E[_n++]=m)}return E})(Mi(er),(function(fr){return Mn.call(er,fr)})))}:function(){return[]},Aa=Is;function Ol(er,fr){return!!(fr=fr??It)&&(typeof er=="number"||hi.test(er))&&er>-1&&er%1==0&&er<fr}function Ps(er){if(er!=null){try{return We.call(er)}catch{}try{return er+""}catch{}}return""}function Zo(er,fr){return er===fr||er!=er&&fr!=fr}(pi&&Aa(new pi(new ArrayBuffer(1)))!=Ri||ga&&Aa(new ga)!=Kr||Ia&&Aa(Ia.resolve())!=_i||Ss&&Aa(new Ss)!=dn||qs&&Aa(new qs)!=sn)&&(Aa=function(er){var fr=Is(er),nn=fr==Hn?er.constructor:void 0,bn=nn?Ps(nn):"";if(bn)switch(bn){case Co:return Ri;case Es:return Kr;case ya:return _i;case Ts:return dn;case nl:return sn}return fr});var ka=Pa((function(){return arguments})())?Pa:function(er){return Us(er)&&bt.call(er,"callee")&&!Mn.call(er,"callee")},hl=Array.isArray,$s=Fi||function(){return!1};function Gs(er){if(!ml(er))return!1;var fr=Is(er);return fr==zr||fr=="[object GeneratorFunction]"||fr=="[object AsyncFunction]"||fr=="[object Proxy]"}function pl(er){return typeof er=="number"&&er>-1&&er%1==0&&er<=It}function ml(er){var fr=typeof er;return er!=null&&(fr=="object"||fr=="function")}function Us(er){return er!=null&&typeof er=="object"}var gl=So?(function(er){return function(fr){return er(fr)}})(So):function(er){return Us(er)&&pl(er.length)&&!!ai[Is(er)]};function au(er){return(fr=er)!=null&&pl(fr.length)&&!Gs(fr)?Cu(er):Tu(er);var fr}Q.exports=function(er,fr){return ls(er,fr)}})(No,No.exports);var Ua=n(No.exports);function Fo(Q,me){return Q.length===me.length&&JSON.stringify(Q.map((function(Je){return Je})).sort())===JSON.stringify(me.map((function(Je){return Je})).sort())}var Ta={Polygon:Fe,LineString:Ne,Point:we,MultiPolygon:ot,MultiLineString:ot,MultiPoint:ot},bs=Object.freeze({__proto__:null,CommonSelectors:yt,constrainFeatureMovement:Oa,createMidPoint:Nr,createSupplementaryPoints:tn,createVertex:_r,doubleClickZoom:Lr,euclideanDistance:Le,featuresAt:se,getFeatureAtAndSetCursors:fe,isClick:ye,isEventAtCoordinates:Wo,isTap:xe,mapEventToBoundingBox:re,ModeHandler:r,moveFeatures:zs,sortFeatures:oe,stringSetsAreEqual:Fo,StringSet:H,theme:br,toDenseArray:st}),ac=function(Q,me){var Je={options:Q=(function(jt){jt===void 0&&(jt={});var qt=sr(jt);return jt.controls||(qt.controls={}),jt.displayControlsDefault===!1?qt.controls=sr(qu,jt.controls):qt.controls=sr(oa,jt.controls),(qt=sr(Ea,qt)).styles=js(qt.styles,"cold").concat(js(qt.styles,"hot")),qt})(Q)};me=(function(jt,qt){return qt.modes=M,qt.getFeatureIdsAt=function(Qt){return se.click({point:Qt},null,jt).map((function(Vr){return Vr.properties.id}))},qt.getSelectedIds=function(){return jt.store.getSelectedIds()},qt.getSelected=function(){return{type:k.FEATURE_COLLECTION,features:jt.store.getSelectedIds().map((function(Qt){return jt.store.get(Qt)})).map((function(Qt){return Qt.toGeoJSON()}))}},qt.getSelectedPoints=function(){return{type:k.FEATURE_COLLECTION,features:jt.store.getSelectedCoordinates().map((function(Qt){return{type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:Qt.coordinates}}}))}},qt.set=function(Qt){if(Qt.type===void 0||Qt.type!==k.FEATURE_COLLECTION||!Array.isArray(Qt.features))throw new Error("Invalid FeatureCollection");var Vr=jt.store.createRenderBatch(),Wr=jt.store.getAllIds().slice(),zr=qt.add(Qt),Kr=new H(zr);return(Wr=Wr.filter((function(Cr){return!Kr.has(Cr)}))).length&&qt.delete(Wr),Vr(),zr},qt.add=function(Qt){var Vr=JSON.parse(JSON.stringify(Ur(Qt))).features.map((function(Wr){if(Wr.id=Wr.id||he(),Wr.geometry===null)throw new Error("Invalid geometry: null");if(jt.store.get(Wr.id)===void 0||jt.store.get(Wr.id).type!==Wr.geometry.type){var zr=Ta[Wr.geometry.type];if(zr===void 0)throw new Error("Invalid geometry type: "+Wr.geometry.type+".");var Kr=new zr(jt,Wr);jt.store.add(Kr)}else{var Cr=jt.store.get(Wr.id);Cr.properties=Wr.properties,Ua(Cr.properties,Wr.properties)||jt.store.featureChanged(Cr.id),Ua(Cr.getCoordinates(),Wr.geometry.coordinates)||Cr.incomingCoords(Wr.geometry.coordinates)}return Wr.id}));return jt.store.render(),Vr},qt.get=function(Qt){var Vr=jt.store.get(Qt);if(Vr)return Vr.toGeoJSON()},qt.getAll=function(){return{type:k.FEATURE_COLLECTION,features:jt.store.getAll().map((function(Qt){return Qt.toGeoJSON()}))}},qt.delete=function(Qt){return jt.store.delete(Qt,{silent:!0}),qt.getMode()!==M.DIRECT_SELECT||jt.store.getSelectedIds().length?jt.store.render():jt.events.changeMode(M.SIMPLE_SELECT,void 0,{silent:!0}),qt},qt.deleteAll=function(){return jt.store.delete(jt.store.getAllIds(),{silent:!0}),qt.getMode()===M.DIRECT_SELECT?jt.events.changeMode(M.SIMPLE_SELECT,void 0,{silent:!0}):jt.store.render(),qt},qt.changeMode=function(Qt,Vr){return Vr===void 0&&(Vr={}),Qt===M.SIMPLE_SELECT&&qt.getMode()===M.SIMPLE_SELECT?(Fo(Vr.featureIds||[],jt.store.getSelectedIds())||(jt.store.setSelected(Vr.featureIds,{silent:!0}),jt.store.render()),qt):(Qt===M.DIRECT_SELECT&&qt.getMode()===M.DIRECT_SELECT&&Vr.featureId===jt.store.getSelectedIds()[0]||jt.events.changeMode(Qt,Vr,{silent:!0}),qt)},qt.getMode=function(){return jt.events.getMode()},qt.trash=function(){return jt.events.trash({silent:!0}),qt},qt.combineFeatures=function(){return jt.events.combineFeatures({silent:!0}),qt},qt.uncombineFeatures=function(){return jt.events.uncombineFeatures({silent:!0}),qt},qt.setFeatureProperty=function(Qt,Vr,Wr){return jt.store.setFeatureProperty(Qt,Vr,Wr),qt},qt})(Je,me),Je.api=me;var It=ir(Je);return me.onAdd=It.onAdd,me.onRemove=It.onRemove,me.types=P,me.options=Q,me};function eu(Q){ac(Q,this)}return eu.modes=fl,eu.constants=U,eu.lib=bs,eu}))})(gx)),gx.exports}var age=ige();const Y6=Sf(age);function oge(){const e=H1(r=>r.breakpoints.down("md"));return[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.3}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":3}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":4}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":e?5:4,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?7:5,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?10:9,"circle-opacity":1,"circle-color":"#009EE0"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?7.5:6.5,"circle-color":"#009EE0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":e?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":e?8.5:7.5,"circle-color":"#009EE0"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":e?8.5:6.5,"circle-color":"#404040"}}]}const oI=e=>{const t=ee.useRef(null),r=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=ee.useRef(!1),[i,o]=ee.useState(!1),[u,a]=ee.useState(),f=oge(),p=ee.useCallback(g=>{console.log("MlFeatureEditor mode change to "+g.mode),typeof e.onFinish=="function"&&g.mode==="simple_select"&&e.onFinish()},[e.onFinish]);return ee.useEffect(()=>{r.map&&!n.current&&(n.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&t.current&&t.current?.remove(),t.current=new Y6({displayControlsDefault:!1,defaultMode:e.mode||"simple_select",modes:Object.assign({},Y6.modes),userProperties:!0,styles:f}),r.map.addControl(t.current,"top-left",r.componentId),r.map.on("draw.modechange",p,r.componentId),o(!0))},[r.map,e,n,p]),ee.useEffect(()=>{if(!r.map||!i||!t.current)return;const g=b=>{const S=b?.features||[];a(S),e.onChange&&e.onChange(S)};return r.map.on("draw.create",g,r.componentId),r.map.on("draw.update",g,r.componentId),r.map.on("draw.delete",g,r.componentId),()=>{r.map&&(r.map.map.off("draw.create",g),r.map.map.off("draw.update",g),r.map.map.off("draw.delete",g))}},[i,r.map,e.onChange]),ee.useEffect(()=>{t.current&&e.geojson?.geometry&&t.current.set({type:"FeatureCollection",features:[e.geojson]})},[e.geojson,i]),ee.useEffect(()=>{e.mode&&t.current&&t.current?.getMode?.()!==e.mode&&(t.current?.changeMode?.(e.mode),e.mode!=="simple_select"&&e.mode!=="direct_select"&&t.current.set({type:"FeatureCollection",features:[]}))},[e.mode,r.map]),{feature:u,drawToolsReady:i,draw:t.current}};try{oI.displayName="useFeatureEditor",oI.__docgenInfo={description:"GeoJson Feature editor that allows to create or manipulate GeoJson data",displayName:"useFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | undefined"}},onChange:{defaultValue:null,description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((para: Feature<Geometry, GeoJsonProperties>[]) => void) | undefined"}},onFinish:{defaultValue:null,description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`,name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}}}catch{}const a2=e=>(oI({mode:e.mode,geojson:e.geojson,onChange:e.onChange,onFinish:e.onFinish,mapId:e.mapId}),K.jsx(K.Fragment,{}));try{a2.displayName="MlFeatureEditor",a2.__docgenInfo={description:"",displayName:"MlFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | undefined"}},onChange:{defaultValue:null,description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((para: Feature<Geometry, GeoJsonProperties>[]) => void) | undefined"}},onFinish:{defaultValue:null,description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`,name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`,name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}}}catch{}const sI=e=>(ph({mapId:e.mapId,layerId:e.layerId||"MlFillExtrusionLayer-"+Bu(),options:{id:"",type:"fill-extrusion",source:e.sourceId||"openmaptiles","source-layer":e.sourceLayer||"building",minzoom:e.minZoom||6,paint:{...e.paint}},insertBeforeFirstSymbolLayer:!0}),K.jsx(K.Fragment,{}));sI.defaultProps={mapId:void 0,paint:{"fill-extrusion-color":"hsl(196, 61%, 83%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":1}};try{sI.displayName="MlFillExtrusionLayer",sI.__docgenInfo={description:"Adds a fill extrusion layer to the MapLibre instance reference by props.mapId",displayName:"MlFillExtrusionLayer",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component",name:"layerId",required:!1,type:{name:"string | undefined"}},paint:{defaultValue:{value:`{
		'fill-extrusion-color': 'hsl(196, 61%, 83%)',
		'fill-extrusion-height': {
			property: 'render_height',
			type: 'identity',
		},
		'fill-extrusion-base': {
			property: 'render_min_height',
			type: 'identity',
		},
		'fill-extrusion-opacity': 1,
	}`},description:`Paint properties of the config object that is passed to the MapLibreGl.addLayer call. All
available properties are documented in the MapLibreGl documentation
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill-extrusion`,name:"paint",required:!1,type:{name:"object | undefined"}},sourceId:{defaultValue:null,description:`Source id of a vector tile source containing the geometries to use for this fill-extrusion
layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer`,name:"sourceId",required:!1,type:{name:"string | undefined"}},sourceLayer:{defaultValue:null,description:`Layer id from a vector tile source containing the geometries to use for this fill-extrusion
layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer`,name:"sourceLayer",required:!1,type:{name:"string | undefined"}},minZoom:{defaultValue:null,description:`This layer will be hidden for zoom levels lower than defined on this property
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#minzoom`,name:"minZoom",required:!1,type:{name:"number | undefined"}}}}}catch{}const ZA=Ei(K.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"})),lI=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=ee.useState(!1),[i,o]=ee.useState(),[u,a]=ee.useState(!1),[f,p]=ee.useState(),[g,b]=ee.useState(0),S=ee.useRef(!1),_=ee.useCallback(D=>{if(!t.map||((!e.centerUserPosition&&!S.current||e.centerUserPosition)&&(e.useFlyTo?t.map.map.flyTo({center:[D.coords.longitude,D.coords.latitude],zoom:18,speed:1,curve:1}):t.map.map.setCenter([D.coords.longitude,D.coords.latitude]),S.current=!0),e.showUserLocation!==void 0&&!e.showUserLocation))return;const F=id([D.coords.longitude,D.coords.latitude]);o(F),p(cG(F,D.coords.accuracy/1e3))},[t.map,e]),P=()=>{console.log("Access of user location denied"),a(!0)},k=ee.useMemo(()=>{if(!i)return;const D=.02,F=g-15,B=g+15,V=Vme(i,D,F,B,{steps:65});return V.geometry.coordinates.push(i.geometry.coordinates),V.geometry.coordinates.slice(0,0),V},[g,i]),M=D=>{D?.alpha&&b(-D.alpha)};return ee.useEffect(()=>{if(r){const D=M;return window.addEventListener("deviceorientation",D),()=>{window.removeEventListener("deviceorientation",D)}}else S.current=!1},[r]),ee.useEffect(()=>{if(t.map&&r){const D=navigator.geolocation.watchPosition(_,P);return()=>{navigator.geolocation.clearWatch(D)}}},[t.map,r,_]),ee.useEffect(()=>{if(f?.type){const D=t.map?.getBounds(),F=[D?._ne.lng,D?._ne.lat,D?._sw.lng,D?._sw.lat],B=Ec(f);Lpe(m6(F),m6(B))||t.map?.fitBounds(B,{padding:{top:25,bottom:25}})}},[f]),K.jsxs(K.Fragment,{children:[r&&i&&K.jsx(Zu,{geojson:f,type:"fill",paint:{"fill-color":"#cbd300","fill-opacity":.3,...e.accuracyPaint},insertBeforeLayer:e.insertBeforeLayer}),r&&k&&K.jsx(Zu,{geojson:k,type:"fill",paint:{"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3,...e.orientationConePaint},insertBeforeLayer:e.insertBeforeLayer}),r&&i&&K.jsx(Zu,{geojson:i,type:"circle",paint:{"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1,...e.circlePaint},insertBeforeLayer:e.insertBeforeLayer}),K.jsx($i,{variant:"navtools","data-testid":"mlFollowGpsBtn",sx:{zIndex:1002,color:r?D=>D.palette.GPS.GPSActiveColor:D=>D.palette.GPS.GPSInactiveColor,backgroundColor:r?D=>D.palette.GPS.GPSActiveBackgroundColor:D=>D.palette.navigation.navColor},disabled:u,onClick:()=>{n(!r)},children:K.jsx(ZA,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})]})};try{lI.displayName="MlFollowGps",lI.__docgenInfo={description:`Adds a button that makes the map follow the users GPS position using
navigator.geolocation.watchPosition if activated`,displayName:"MlFollowGps",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},showUserLocation:{defaultValue:null,description:"By default a dot will be shown on the map at the user's location. Set to false to disable.",name:"showUserLocation",required:!1,type:{name:"boolean | undefined"}},showOrientation:{defaultValue:null,description:`By default a cone will be shown on the map at the user's location to indicate the device's orientation.
Set to false to disable.`,name:"showOrientation",required:!1,type:{name:"boolean | undefined"}},showAccuracyCircle:{defaultValue:null,description:`By default, if showUserLocation is true, a transparent circle will be drawn around the user location
indicating the accuracy (95% confidence level) of the user's location. Set to false to disable.`,name:"showAccuracyCircle",required:!1,type:{name:"boolean | undefined"}},useFlyTo:{defaultValue:null,description:`Use the MapLibre.flyTo function to center the map to the current users position if true.
Otherwise the MapLibre.setCenter function is used.`,name:"useFlyTo",required:!1,type:{name:"boolean | undefined"}},centerUserPosition:{defaultValue:null,description:`Center map to current position once updated location data is recieved.
"false" will center the map once on component activation and then display the updated user location on the map.`,name:"centerUserPosition",required:!1,type:{name:"boolean | undefined"}},orientationConePaint:{defaultValue:null,description:`Orientation cone paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the orientation cone polygon.
Use any available paint prop from layer type "fill".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"orientationConePaint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 9 more ...; "fill-pattern-transition"?: TransitionSpecification | undefined; } | undefined'}},circlePaint:{defaultValue:null,description:`Position circle paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the position circle.
Use any available paint prop from layer type "circle".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle`,name:"circlePaint",required:!1,type:{name:'{ "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-radius-transition"?: TransitionSpecification | undefined; ... 16 more ...; "circle-stroke-opacity-transition"?: TransitionSpecification | undefined; } | undefined'}},onColor:{defaultValue:null,description:"Active button font color",name:"onColor",required:!1,type:{name:"string | undefined"}},offColor:{defaultValue:null,description:"Inactive button font color",name:"offColor",required:!1,type:{name:"string | undefined"}},accuracyPaint:{defaultValue:null,description:`Accuracy paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the accuracy polygon.
Use any available paint prop from layer type "fill".
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"accuracyPaint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 9 more ...; "fill-pattern-transition"?: TransitionSpecification | undefined; } | undefined'}}}}}catch{}const Z6=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=ee.useState(),i=ee.useRef(e.imageId||"img_"+Bu()),o=ee.useRef(e.layerId||"MlImageMarkerLayer-"+t.componentId);ph({geojson:e.options?.source?.data,layerId:o.current,options:{type:"symbol",layout:{...e.options?.layout,"icon-image":r||i.current},paint:{...e.options?.paint}}});const u=(a,f)=>{a.map&&f.imgSrc&&!a.map.map.hasImage(i.current)&&a.map.map.loadImage(f.imgSrc).then(function(p){if(!p?.data){console.log("image "+f.imgSrc+"could not be loaded");return}!a.map||a.map.map.hasImage(i.current)||(a.map.addImage(i.current,p.data,a.componentId),n(i.current))})};return ee.useEffect(()=>{t.map&&e.imgSrc&&u(t,e)},[e,t]),K.jsx(K.Fragment,{})};try{Z6.displayName="MlImageMarkerLayer",Z6.__docgenInfo={description:"",displayName:"MlImageMarkerLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},imageId:{defaultValue:null,description:"Id of the image that will be added by this component to the maplibre-gl instance",name:"imageId",required:!1,type:{name:"string | undefined"}},imgSrc:{defaultValue:null,description:"Path or URL to a supported raster image",name:"imgSrc",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"{ source?: { type?: string | undefined; data: Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined; } | undefined; layout?: { ...; } | undefined; paint?: { ...; } | undefined; } | undefined"}}}}}catch{}function sge(e){switch(e){case"meters":return 1;case"millimeters":return 1e3;case"centimeters":return 100;case"kilometers":return .001;case"miles":return 1/1609.344;case"nauticalmiles":return 1/1852;case"inches":return 39.3701;case"yards":return 1.09361;case"feet":return 3.28084;default:return 1}}function K6(e){switch(e){case"miles":return"mi";case"acres":return"ac";case"kilometers":return"km";case"meters":return"m";case"millimeters":return"mm";case"centimeters":return"cm";case"nauticalmiles":return"nm";case"inches":return"in";case"yards":return"yd";case"feet":return"ft";case"hectares":return"ha";default:return"m"}}const uI=e=>{const[t,r]=ee.useState({value:0,label:""}),[n,i]=ee.useState([]);return ee.useEffect(()=>{if(n[0]){let o=0;if(e.measureType==="polygon"){if(o=bpe(n[0]),e.unit){const u=e.unit;u==="acres"?o=o/4046.8564224:u==="hectares"?o=o/1e4:o=o*sge(e.unit)**2}}else o=b1(n[0],{units:e.unit});typeof e.onChange=="function"&&e.onChange({value:o,unit:e.unit,geojson:n[0]}),o>=.1&&r({value:o,label:K6(e.unit)})}},[e.unit,n]),K.jsxs(K.Fragment,{children:[K.jsx(a2,{onChange:o=>{o&&i(o)},mode:e.measureType==="polygon"?"draw_polygon":"draw_line_string",onFinish:e.onFinish}),t.value.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})," ",K6(e.unit),t.label&&e.measureType==="polygon"&&!["hectares","acres"].includes(e.unit||"")?" ":""]})};try{uI.displayName="MlMeasureTool",uI.__docgenInfo={description:"",displayName:"MlMeasureTool",props:{measureType:{defaultValue:null,description:'String that specify if the Tool measures an area ("polygon") or length ("line")',name:"measureType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"line"'},{value:'"polygon"'}]}},unit:{defaultValue:null,description:"String that dictates which unit of measurement is used",name:"unit",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"meters"'},{value:'"metres"'},{value:'"millimeters"'},{value:'"millimetres"'},{value:'"centimeters"'},{value:'"centimetres"'},{value:'"kilometers"'},{value:'"kilometres"'},{value:'"miles"'},{value:'"nauticalmiles"'},{value:'"inches"'},{value:'"yards"'},{value:'"feet"'},{value:'"radians"'},{value:'"degrees"'}]}},onChange:{defaultValue:null,description:`Callback function that is called each time measurment geometry within has changed within MlMeasureTool.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((options: MlMeasureToolOnChangeOptions) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called by the end of drawing geometries.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}const dG=Ei(K.jsx("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"})),fG=Ei(K.jsx("path",{d:"m2 9 4 12h12l4-12-10-7z"})),lge=Sr(Od)({marginTop:"15px"});function cI(e){return K.jsx(lge,{children:e?.children})}try{cI.displayName="LayerList",cI.__docgenInfo={description:"",displayName:"LayerList",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const rb=Ei(K.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),KA=Ei(K.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),hG=Ei(K.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),o2=Ei(K.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),uge=Om(ed)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}),cge=Om(s1)({minWidth:"30px"}),dge=Om(xc)({marginRight:"0px",padding:"0px"}),fge=Om(zy)({padding:0,marginRight:"5px"}),hge=Om(jg)(({open:e})=>({display:e?"block":"none"})),pge=Om(Od)({marginLeft:"50px"});function dI({visible:e=!0,name:t,children:r,setVisible:n}){const[i,o]=ee.useState(!1),[u,a]=ee.useState(!0),f=ee.useMemo(()=>e?u:!1,[e,u]),p=ee.useMemo(()=>r?Array.isArray(r)?r.map(g=>gt.cloneElement(g,{visible:f})):gt.cloneElement(r,{visible:f}):K.jsx(K.Fragment,{}),[f]);return K.jsxs(K.Fragment,{children:[K.jsxs(uge,{children:[K.jsxs(cge,{children:[K.jsx(dge,{edge:"end","aria-label":"open",onClick:()=>o(!i),children:i?K.jsx(o2,{}):K.jsx(hG,{})}),K.jsx(fge,{disabled:n?!1:!e,checked:n?e:u,onClick:()=>{n?n(g=>!g):a(g=>!g)}})]}),K.jsx(Hc,{primary:t,variant:"layerlist"})]}),K.jsx(hge,{open:i,children:K.jsx(pge,{disablePadding:!0,children:p})})]})}try{dI.displayName="LayerListFolder",dI.__docgenInfo={description:"",displayName:"LayerListFolder",props:{visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"ReactNode"}},setVisible:{defaultValue:null,description:"",name:"setVisible",required:!1,type:{name:"((visible: boolean | ((val: unknown) => boolean)) => void) | undefined"}}}}}catch{}var Uu={},Rg={},bC,J6;function pG(){if(J6)return bC;J6=1;var e=typeof Jh=="object"&&Jh&&Jh.Object===Object&&Jh;return bC=e,bC}var _C,Q6;function If(){if(Q6)return _C;Q6=1;var e=pG(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return _C=r,_C}var xC,eF;function nb(){if(eF)return xC;eF=1;var e=If(),t=e.Symbol;return xC=t,xC}var wC,tF;function mge(){if(tF)return wC;tF=1;var e=nb(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function o(u){var a=r.call(u,i),f=u[i];try{u[i]=void 0;var p=!0}catch{}var g=n.call(u);return p&&(a?u[i]=f:delete u[i]),g}return wC=o,wC}var SC,rF;function gge(){if(rF)return SC;rF=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return SC=r,SC}var CC,nF;function Vm(){if(nF)return CC;nF=1;var e=nb(),t=mge(),r=gge(),n="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function u(a){return a==null?a===void 0?i:n:o&&o in Object(a)?t(a):r(a)}return CC=u,CC}var EC,iF;function Bd(){if(iF)return EC;iF=1;var e=Array.isArray;return EC=e,EC}var TC,aF;function Sh(){if(aF)return TC;aF=1;function e(t){return t!=null&&typeof t=="object"}return TC=e,TC}var IC,oF;function yge(){if(oF)return IC;oF=1;var e=Vm(),t=Bd(),r=Sh(),n="[object String]";function i(o){return typeof o=="string"||!t(o)&&r(o)&&e(o)==n}return IC=i,IC}var PC,sF;function vge(){if(sF)return PC;sF=1;function e(t){return function(r,n,i){for(var o=-1,u=Object(r),a=i(r),f=a.length;f--;){var p=a[t?f:++o];if(n(u[p],p,u)===!1)break}return r}}return PC=e,PC}var AC,lF;function bge(){if(lF)return AC;lF=1;var e=vge(),t=e();return AC=t,AC}var kC,uF;function _ge(){if(uF)return kC;uF=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return kC=e,kC}var MC,cF;function xge(){if(cF)return MC;cF=1;var e=Vm(),t=Sh(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return MC=n,MC}var LC,dF;function mG(){if(dF)return LC;dF=1;var e=xge(),t=Sh(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(u){return t(u)&&n.call(u,"callee")&&!i.call(u,"callee")};return LC=o,LC}var E0={exports:{}},RC,fF;function wge(){if(fF)return RC;fF=1;function e(){return!1}return RC=e,RC}E0.exports;var hF;function JA(){return hF||(hF=1,(function(e,t){var r=If(),n=wge(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,u=o&&o.exports===i,a=u?r.Buffer:void 0,f=a?a.isBuffer:void 0,p=f||n;e.exports=p})(E0,E0.exports)),E0.exports}var DC,pF;function gG(){if(pF)return DC;pF=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var o=typeof n;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return DC=r,DC}var OC,mF;function QA(){if(mF)return OC;mF=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return OC=t,OC}var NC,gF;function Sge(){if(gF)return NC;gF=1;var e=Vm(),t=QA(),r=Sh(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",u="[object Date]",a="[object Error]",f="[object Function]",p="[object Map]",g="[object Number]",b="[object Object]",S="[object RegExp]",_="[object Set]",P="[object String]",k="[object WeakMap]",M="[object ArrayBuffer]",D="[object DataView]",F="[object Float32Array]",B="[object Float64Array]",N="[object Int8Array]",$="[object Int16Array]",V="[object Int32Array]",U="[object Uint8Array]",X="[object Uint8ClampedArray]",Z="[object Uint16Array]",oe="[object Uint32Array]",re={};re[F]=re[B]=re[N]=re[$]=re[V]=re[U]=re[X]=re[Z]=re[oe]=!0,re[n]=re[i]=re[M]=re[o]=re[D]=re[u]=re[a]=re[f]=re[p]=re[g]=re[b]=re[S]=re[_]=re[P]=re[k]=!1;function H(ae){return r(ae)&&t(ae.length)&&!!re[e(ae)]}return NC=H,NC}var FC,yF;function ek(){if(yF)return FC;yF=1;function e(t){return function(r){return t(r)}}return FC=e,FC}var T0={exports:{}};T0.exports;var vF;function tk(){return vF||(vF=1,(function(e,t){var r=pG(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o&&r.process,a=(function(){try{var f=i&&i.require&&i.require("util").types;return f||u&&u.binding&&u.binding("util")}catch{}})();e.exports=a})(T0,T0.exports)),T0.exports}var BC,bF;function yG(){if(bF)return BC;bF=1;var e=Sge(),t=ek(),r=tk(),n=r&&r.isTypedArray,i=n?t(n):e;return BC=i,BC}var zC,_F;function vG(){if(_F)return zC;_F=1;var e=_ge(),t=mG(),r=Bd(),n=JA(),i=gG(),o=yG(),u=Object.prototype,a=u.hasOwnProperty;function f(p,g){var b=r(p),S=!b&&t(p),_=!b&&!S&&n(p),P=!b&&!S&&!_&&o(p),k=b||S||_||P,M=k?e(p.length,String):[],D=M.length;for(var F in p)(g||a.call(p,F))&&!(k&&(F=="length"||_&&(F=="offset"||F=="parent")||P&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||i(F,D)))&&M.push(F);return M}return zC=f,zC}var jC,xF;function rk(){if(xF)return jC;xF=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return jC=t,jC}var qC,wF;function bG(){if(wF)return qC;wF=1;function e(t,r){return function(n){return t(r(n))}}return qC=e,qC}var VC,SF;function Cge(){if(SF)return VC;SF=1;var e=bG(),t=e(Object.keys,Object);return VC=t,VC}var $C,CF;function Ege(){if(CF)return $C;CF=1;var e=rk(),t=Cge(),r=Object.prototype,n=r.hasOwnProperty;function i(o){if(!e(o))return t(o);var u=[];for(var a in Object(o))n.call(o,a)&&a!="constructor"&&u.push(a);return u}return $C=i,$C}var GC,EF;function cv(){if(EF)return GC;EF=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return GC=e,GC}var UC,TF;function _G(){if(TF)return UC;TF=1;var e=Vm(),t=cv(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function u(a){if(!t(a))return!1;var f=e(a);return f==n||f==i||f==r||f==o}return UC=u,UC}var HC,IF;function Ow(){if(IF)return HC;IF=1;var e=_G(),t=QA();function r(n){return n!=null&&t(n.length)&&!e(n)}return HC=r,HC}var WC,PF;function ib(){if(PF)return WC;PF=1;var e=vG(),t=Ege(),r=Ow();function n(i){return r(i)?e(i):t(i)}return WC=n,WC}var XC,AF;function xG(){if(AF)return XC;AF=1;var e=bge(),t=ib();function r(n,i){return n&&e(n,i,t)}return XC=r,XC}var YC,kF;function wG(){if(kF)return YC;kF=1;function e(t){return t}return YC=e,YC}var ZC,MF;function Tge(){if(MF)return ZC;MF=1;var e=wG();function t(r){return typeof r=="function"?r:e}return ZC=t,ZC}var KC,LF;function nk(){if(LF)return KC;LF=1;var e=xG(),t=Tge();function r(n,i){return n&&e(n,t(i))}return KC=r,KC}var JC,RF;function ik(){if(RF)return JC;RF=1;var e=bG(),t=e(Object.getPrototypeOf,Object);return JC=t,JC}var QC,DF;function Ige(){if(DF)return QC;DF=1;var e=Vm(),t=ik(),r=Sh(),n="[object Object]",i=Function.prototype,o=Object.prototype,u=i.toString,a=o.hasOwnProperty,f=u.call(Object);function p(g){if(!r(g)||e(g)!=n)return!1;var b=t(g);if(b===null)return!0;var S=a.call(b,"constructor")&&b.constructor;return typeof S=="function"&&S instanceof S&&u.call(S)==f}return QC=p,QC}var eE,OF;function SG(){if(OF)return eE;OF=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=r(t[n],n,t);return o}return eE=e,eE}var tE,NF;function Pge(){if(NF)return tE;NF=1;function e(){this.__data__=[],this.size=0}return tE=e,tE}var rE,FF;function ak(){if(FF)return rE;FF=1;function e(t,r){return t===r||t!==t&&r!==r}return rE=e,rE}var nE,BF;function Nw(){if(BF)return nE;BF=1;var e=ak();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return nE=t,nE}var iE,zF;function Age(){if(zF)return iE;zF=1;var e=Nw(),t=Array.prototype,r=t.splice;function n(i){var o=this.__data__,u=e(o,i);if(u<0)return!1;var a=o.length-1;return u==a?o.pop():r.call(o,u,1),--this.size,!0}return iE=n,iE}var aE,jF;function kge(){if(jF)return aE;jF=1;var e=Nw();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return aE=t,aE}var oE,qF;function Mge(){if(qF)return oE;qF=1;var e=Nw();function t(r){return e(this.__data__,r)>-1}return oE=t,oE}var sE,VF;function Lge(){if(VF)return sE;VF=1;var e=Nw();function t(r,n){var i=this.__data__,o=e(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this}return sE=t,sE}var lE,$F;function Fw(){if($F)return lE;$F=1;var e=Pge(),t=Age(),r=kge(),n=Mge(),i=Lge();function o(u){var a=-1,f=u==null?0:u.length;for(this.clear();++a<f;){var p=u[a];this.set(p[0],p[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,lE=o,lE}var uE,GF;function Rge(){if(GF)return uE;GF=1;var e=Fw();function t(){this.__data__=new e,this.size=0}return uE=t,uE}var cE,UF;function Dge(){if(UF)return cE;UF=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return cE=e,cE}var dE,HF;function Oge(){if(HF)return dE;HF=1;function e(t){return this.__data__.get(t)}return dE=e,dE}var fE,WF;function Nge(){if(WF)return fE;WF=1;function e(t){return this.__data__.has(t)}return fE=e,fE}var hE,XF;function Fge(){if(XF)return hE;XF=1;var e=If(),t=e["__core-js_shared__"];return hE=t,hE}var pE,YF;function Bge(){if(YF)return pE;YF=1;var e=Fge(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return pE=r,pE}var mE,ZF;function CG(){if(ZF)return mE;ZF=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return mE=r,mE}var gE,KF;function zge(){if(KF)return gE;KF=1;var e=_G(),t=Bge(),r=cv(),n=CG(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,u=Function.prototype,a=Object.prototype,f=u.toString,p=a.hasOwnProperty,g=RegExp("^"+f.call(p).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function b(S){if(!r(S)||t(S))return!1;var _=e(S)?g:o;return _.test(n(S))}return gE=b,gE}var yE,JF;function jge(){if(JF)return yE;JF=1;function e(t,r){return t?.[r]}return yE=e,yE}var vE,QF;function $m(){if(QF)return vE;QF=1;var e=zge(),t=jge();function r(n,i){var o=t(n,i);return e(o)?o:void 0}return vE=r,vE}var bE,e8;function ok(){if(e8)return bE;e8=1;var e=$m(),t=If(),r=e(t,"Map");return bE=r,bE}var _E,t8;function Bw(){if(t8)return _E;t8=1;var e=$m(),t=e(Object,"create");return _E=t,_E}var xE,r8;function qge(){if(r8)return xE;r8=1;var e=Bw();function t(){this.__data__=e?e(null):{},this.size=0}return xE=t,xE}var wE,n8;function Vge(){if(n8)return wE;n8=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return wE=e,wE}var SE,i8;function $ge(){if(i8)return SE;i8=1;var e=Bw(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(o){var u=this.__data__;if(e){var a=u[o];return a===t?void 0:a}return n.call(u,o)?u[o]:void 0}return SE=i,SE}var CE,a8;function Gge(){if(a8)return CE;a8=1;var e=Bw(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var o=this.__data__;return e?o[i]!==void 0:r.call(o,i)}return CE=n,CE}var EE,o8;function Uge(){if(o8)return EE;o8=1;var e=Bw(),t="__lodash_hash_undefined__";function r(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=e&&i===void 0?t:i,this}return EE=r,EE}var TE,s8;function Hge(){if(s8)return TE;s8=1;var e=qge(),t=Vge(),r=$ge(),n=Gge(),i=Uge();function o(u){var a=-1,f=u==null?0:u.length;for(this.clear();++a<f;){var p=u[a];this.set(p[0],p[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,TE=o,TE}var IE,l8;function Wge(){if(l8)return IE;l8=1;var e=Hge(),t=Fw(),r=ok();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return IE=n,IE}var PE,u8;function Xge(){if(u8)return PE;u8=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return PE=e,PE}var AE,c8;function zw(){if(c8)return AE;c8=1;var e=Xge();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return AE=t,AE}var kE,d8;function Yge(){if(d8)return kE;d8=1;var e=zw();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return kE=t,kE}var ME,f8;function Zge(){if(f8)return ME;f8=1;var e=zw();function t(r){return e(this,r).get(r)}return ME=t,ME}var LE,h8;function Kge(){if(h8)return LE;h8=1;var e=zw();function t(r){return e(this,r).has(r)}return LE=t,LE}var RE,p8;function Jge(){if(p8)return RE;p8=1;var e=zw();function t(r,n){var i=e(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this}return RE=t,RE}var DE,m8;function sk(){if(m8)return DE;m8=1;var e=Wge(),t=Yge(),r=Zge(),n=Kge(),i=Jge();function o(u){var a=-1,f=u==null?0:u.length;for(this.clear();++a<f;){var p=u[a];this.set(p[0],p[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,DE=o,DE}var OE,g8;function Qge(){if(g8)return OE;g8=1;var e=Fw(),t=ok(),r=sk(),n=200;function i(o,u){var a=this.__data__;if(a instanceof e){var f=a.__data__;if(!t||f.length<n-1)return f.push([o,u]),this.size=++a.size,this;a=this.__data__=new r(f)}return a.set(o,u),this.size=a.size,this}return OE=i,OE}var NE,y8;function lk(){if(y8)return NE;y8=1;var e=Fw(),t=Rge(),r=Dge(),n=Oge(),i=Nge(),o=Qge();function u(a){var f=this.__data__=new e(a);this.size=f.size}return u.prototype.clear=t,u.prototype.delete=r,u.prototype.get=n,u.prototype.has=i,u.prototype.set=o,NE=u,NE}var FE,v8;function eye(){if(v8)return FE;v8=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return FE=t,FE}var BE,b8;function tye(){if(b8)return BE;b8=1;function e(t){return this.__data__.has(t)}return BE=e,BE}var zE,_8;function rye(){if(_8)return zE;_8=1;var e=sk(),t=eye(),r=tye();function n(i){var o=-1,u=i==null?0:i.length;for(this.__data__=new e;++o<u;)this.add(i[o])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,zE=n,zE}var jE,x8;function nye(){if(x8)return jE;x8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return jE=e,jE}var qE,w8;function iye(){if(w8)return qE;w8=1;function e(t,r){return t.has(r)}return qE=e,qE}var VE,S8;function EG(){if(S8)return VE;S8=1;var e=rye(),t=nye(),r=iye(),n=1,i=2;function o(u,a,f,p,g,b){var S=f&n,_=u.length,P=a.length;if(_!=P&&!(S&&P>_))return!1;var k=b.get(u),M=b.get(a);if(k&&M)return k==a&&M==u;var D=-1,F=!0,B=f&i?new e:void 0;for(b.set(u,a),b.set(a,u);++D<_;){var N=u[D],$=a[D];if(p)var V=S?p($,N,D,a,u,b):p(N,$,D,u,a,b);if(V!==void 0){if(V)continue;F=!1;break}if(B){if(!t(a,function(U,X){if(!r(B,X)&&(N===U||g(N,U,f,p,b)))return B.push(X)})){F=!1;break}}else if(!(N===$||g(N,$,f,p,b))){F=!1;break}}return b.delete(u),b.delete(a),F}return VE=o,VE}var $E,C8;function TG(){if(C8)return $E;C8=1;var e=If(),t=e.Uint8Array;return $E=t,$E}var GE,E8;function aye(){if(E8)return GE;E8=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,o){n[++r]=[o,i]}),n}return GE=e,GE}var UE,T8;function oye(){if(T8)return UE;T8=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return UE=e,UE}var HE,I8;function sye(){if(I8)return HE;I8=1;var e=nb(),t=TG(),r=ak(),n=EG(),i=aye(),o=oye(),u=1,a=2,f="[object Boolean]",p="[object Date]",g="[object Error]",b="[object Map]",S="[object Number]",_="[object RegExp]",P="[object Set]",k="[object String]",M="[object Symbol]",D="[object ArrayBuffer]",F="[object DataView]",B=e?e.prototype:void 0,N=B?B.valueOf:void 0;function $(V,U,X,Z,oe,re,H){switch(X){case F:if(V.byteLength!=U.byteLength||V.byteOffset!=U.byteOffset)return!1;V=V.buffer,U=U.buffer;case D:return!(V.byteLength!=U.byteLength||!re(new t(V),new t(U)));case f:case p:case S:return r(+V,+U);case g:return V.name==U.name&&V.message==U.message;case _:case k:return V==U+"";case b:var ae=i;case P:var se=Z&u;if(ae||(ae=o),V.size!=U.size&&!se)return!1;var de=H.get(V);if(de)return de==U;Z|=a,H.set(V,U);var fe=n(ae(V),ae(U),Z,oe,re,H);return H.delete(V),fe;case M:if(N)return N.call(V)==N.call(U)}return!1}return HE=$,HE}var WE,P8;function IG(){if(P8)return WE;P8=1;function e(t,r){for(var n=-1,i=r.length,o=t.length;++n<i;)t[o+n]=r[n];return t}return WE=e,WE}var XE,A8;function PG(){if(A8)return XE;A8=1;var e=IG(),t=Bd();function r(n,i,o){var u=i(n);return t(n)?u:e(u,o(n))}return XE=r,XE}var YE,k8;function lye(){if(k8)return YE;k8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=0,u=[];++n<i;){var a=t[n];r(a,n,t)&&(u[o++]=a)}return u}return YE=e,YE}var ZE,M8;function AG(){if(M8)return ZE;M8=1;function e(){return[]}return ZE=e,ZE}var KE,L8;function uk(){if(L8)return KE;L8=1;var e=lye(),t=AG(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(u){return u==null?[]:(u=Object(u),e(i(u),function(a){return n.call(u,a)}))}:t;return KE=o,KE}var JE,R8;function kG(){if(R8)return JE;R8=1;var e=PG(),t=uk(),r=ib();function n(i){return e(i,r,t)}return JE=n,JE}var QE,D8;function uye(){if(D8)return QE;D8=1;var e=kG(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(o,u,a,f,p,g){var b=a&t,S=e(o),_=S.length,P=e(u),k=P.length;if(_!=k&&!b)return!1;for(var M=_;M--;){var D=S[M];if(!(b?D in u:n.call(u,D)))return!1}var F=g.get(o),B=g.get(u);if(F&&B)return F==u&&B==o;var N=!0;g.set(o,u),g.set(u,o);for(var $=b;++M<_;){D=S[M];var V=o[D],U=u[D];if(f)var X=b?f(U,V,D,u,o,g):f(V,U,D,o,u,g);if(!(X===void 0?V===U||p(V,U,a,f,g):X)){N=!1;break}$||($=D=="constructor")}if(N&&!$){var Z=o.constructor,oe=u.constructor;Z!=oe&&"constructor"in o&&"constructor"in u&&!(typeof Z=="function"&&Z instanceof Z&&typeof oe=="function"&&oe instanceof oe)&&(N=!1)}return g.delete(o),g.delete(u),N}return QE=i,QE}var e4,O8;function cye(){if(O8)return e4;O8=1;var e=$m(),t=If(),r=e(t,"DataView");return e4=r,e4}var t4,N8;function dye(){if(N8)return t4;N8=1;var e=$m(),t=If(),r=e(t,"Promise");return t4=r,t4}var r4,F8;function fye(){if(F8)return r4;F8=1;var e=$m(),t=If(),r=e(t,"Set");return r4=r,r4}var n4,B8;function hye(){if(B8)return n4;B8=1;var e=$m(),t=If(),r=e(t,"WeakMap");return n4=r,n4}var i4,z8;function jw(){if(z8)return i4;z8=1;var e=cye(),t=ok(),r=dye(),n=fye(),i=hye(),o=Vm(),u=CG(),a="[object Map]",f="[object Object]",p="[object Promise]",g="[object Set]",b="[object WeakMap]",S="[object DataView]",_=u(e),P=u(t),k=u(r),M=u(n),D=u(i),F=o;return(e&&F(new e(new ArrayBuffer(1)))!=S||t&&F(new t)!=a||r&&F(r.resolve())!=p||n&&F(new n)!=g||i&&F(new i)!=b)&&(F=function(B){var N=o(B),$=N==f?B.constructor:void 0,V=$?u($):"";if(V)switch(V){case _:return S;case P:return a;case k:return p;case M:return g;case D:return b}return N}),i4=F,i4}var a4,j8;function pye(){if(j8)return a4;j8=1;var e=lk(),t=EG(),r=sye(),n=uye(),i=jw(),o=Bd(),u=JA(),a=yG(),f=1,p="[object Arguments]",g="[object Array]",b="[object Object]",S=Object.prototype,_=S.hasOwnProperty;function P(k,M,D,F,B,N){var $=o(k),V=o(M),U=$?g:i(k),X=V?g:i(M);U=U==p?b:U,X=X==p?b:X;var Z=U==b,oe=X==b,re=U==X;if(re&&u(k)){if(!u(M))return!1;$=!0,Z=!1}if(re&&!Z)return N||(N=new e),$||a(k)?t(k,M,D,F,B,N):r(k,M,U,D,F,B,N);if(!(D&f)){var H=Z&&_.call(k,"__wrapped__"),ae=oe&&_.call(M,"__wrapped__");if(H||ae){var se=H?k.value():k,de=ae?M.value():M;return N||(N=new e),B(se,de,D,F,N)}}return re?(N||(N=new e),n(k,M,D,F,B,N)):!1}return a4=P,a4}var o4,q8;function MG(){if(q8)return o4;q8=1;var e=pye(),t=Sh();function r(n,i,o,u,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,o,u,r,a)}return o4=r,o4}var s4,V8;function mye(){if(V8)return s4;V8=1;var e=lk(),t=MG(),r=1,n=2;function i(o,u,a,f){var p=a.length,g=p,b=!f;if(o==null)return!g;for(o=Object(o);p--;){var S=a[p];if(b&&S[2]?S[1]!==o[S[0]]:!(S[0]in o))return!1}for(;++p<g;){S=a[p];var _=S[0],P=o[_],k=S[1];if(b&&S[2]){if(P===void 0&&!(_ in o))return!1}else{var M=new e;if(f)var D=f(P,k,_,o,u,M);if(!(D===void 0?t(k,P,r|n,f,M):D))return!1}}return!0}return s4=i,s4}var l4,$8;function LG(){if($8)return l4;$8=1;var e=cv();function t(r){return r===r&&!e(r)}return l4=t,l4}var u4,G8;function gye(){if(G8)return u4;G8=1;var e=LG(),t=ib();function r(n){for(var i=t(n),o=i.length;o--;){var u=i[o],a=n[u];i[o]=[u,a,e(a)]}return i}return u4=r,u4}var c4,U8;function RG(){if(U8)return c4;U8=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return c4=e,c4}var d4,H8;function yye(){if(H8)return d4;H8=1;var e=mye(),t=gye(),r=RG();function n(i){var o=t(i);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(u){return u===i||e(u,i,o)}}return d4=n,d4}var f4,W8;function ck(){if(W8)return f4;W8=1;var e=Vm(),t=Sh(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return f4=n,f4}var h4,X8;function dk(){if(X8)return h4;X8=1;var e=Bd(),t=ck(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,u){if(e(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||t(o)?!0:n.test(o)||!r.test(o)||u!=null&&o in Object(u)}return h4=i,h4}var p4,Y8;function vye(){if(Y8)return p4;Y8=1;var e=sk(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var u=arguments,a=i?i.apply(this,u):u[0],f=o.cache;if(f.has(a))return f.get(a);var p=n.apply(this,u);return o.cache=f.set(a,p)||f,p};return o.cache=new(r.Cache||e),o}return r.Cache=e,p4=r,p4}var m4,Z8;function bye(){if(Z8)return m4;Z8=1;var e=vye(),t=500;function r(n){var i=e(n,function(u){return o.size===t&&o.clear(),u}),o=i.cache;return i}return m4=r,m4}var g4,K8;function _ye(){if(K8)return g4;K8=1;var e=bye(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(u,a,f,p){o.push(f?p.replace(r,"$1"):a||u)}),o});return g4=n,g4}var y4,J8;function xye(){if(J8)return y4;J8=1;var e=nb(),t=SG(),r=Bd(),n=ck(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function u(a){if(typeof a=="string")return a;if(r(a))return t(a,u)+"";if(n(a))return o?o.call(a):"";var f=a+"";return f=="0"&&1/a==-1/0?"-0":f}return y4=u,y4}var v4,Q8;function wye(){if(Q8)return v4;Q8=1;var e=xye();function t(r){return r==null?"":e(r)}return v4=t,v4}var b4,eB;function DG(){if(eB)return b4;eB=1;var e=Bd(),t=dk(),r=_ye(),n=wye();function i(o,u){return e(o)?o:t(o,u)?[o]:r(n(o))}return b4=i,b4}var _4,tB;function qw(){if(tB)return _4;tB=1;var e=ck();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return _4=t,_4}var x4,rB;function OG(){if(rB)return x4;rB=1;var e=DG(),t=qw();function r(n,i){i=e(i,n);for(var o=0,u=i.length;n!=null&&o<u;)n=n[t(i[o++])];return o&&o==u?n:void 0}return x4=r,x4}var w4,nB;function Sye(){if(nB)return w4;nB=1;var e=OG();function t(r,n,i){var o=r==null?void 0:e(r,n);return o===void 0?i:o}return w4=t,w4}var S4,iB;function Cye(){if(iB)return S4;iB=1;function e(t,r){return t!=null&&r in Object(t)}return S4=e,S4}var C4,aB;function Eye(){if(aB)return C4;aB=1;var e=DG(),t=mG(),r=Bd(),n=gG(),i=QA(),o=qw();function u(a,f,p){f=e(f,a);for(var g=-1,b=f.length,S=!1;++g<b;){var _=o(f[g]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++g!=b?S:(b=a==null?0:a.length,!!b&&i(b)&&n(_,b)&&(r(a)||t(a)))}return C4=u,C4}var E4,oB;function Tye(){if(oB)return E4;oB=1;var e=Cye(),t=Eye();function r(n,i){return n!=null&&t(n,i,e)}return E4=r,E4}var T4,sB;function Iye(){if(sB)return T4;sB=1;var e=MG(),t=Sye(),r=Tye(),n=dk(),i=LG(),o=RG(),u=qw(),a=1,f=2;function p(g,b){return n(g)&&i(b)?o(u(g),b):function(S){var _=t(S,g);return _===void 0&&_===b?r(S,g):e(b,_,a|f)}}return T4=p,T4}var I4,lB;function Pye(){if(lB)return I4;lB=1;function e(t){return function(r){return r?.[t]}}return I4=e,I4}var P4,uB;function Aye(){if(uB)return P4;uB=1;var e=OG();function t(r){return function(n){return e(n,r)}}return P4=t,P4}var A4,cB;function kye(){if(cB)return A4;cB=1;var e=Pye(),t=Aye(),r=dk(),n=qw();function i(o){return r(o)?e(n(o)):t(o)}return A4=i,A4}var k4,dB;function Mye(){if(dB)return k4;dB=1;var e=yye(),t=Iye(),r=wG(),n=Bd(),i=kye();function o(u){return typeof u=="function"?u:u==null?r:typeof u=="object"?n(u)?t(u[0],u[1]):e(u):i(u)}return k4=o,k4}var M4,fB;function Lye(){if(fB)return M4;fB=1;var e=Ow();function t(r,n){return function(i,o){if(i==null)return i;if(!e(i))return r(i,o);for(var u=i.length,a=n?u:-1,f=Object(i);(n?a--:++a<u)&&o(f[a],a,f)!==!1;);return i}}return M4=t,M4}var L4,hB;function Rye(){if(hB)return L4;hB=1;var e=xG(),t=Lye(),r=t(e);return L4=r,L4}var R4,pB;function Dye(){if(pB)return R4;pB=1;var e=Rye(),t=Ow();function r(n,i){var o=-1,u=t(n)?Array(n.length):[];return e(n,function(a,f,p){u[++o]=i(a,f,p)}),u}return R4=r,R4}var D4,mB;function Oye(){if(mB)return D4;mB=1;var e=SG(),t=Mye(),r=Dye(),n=Bd();function i(o,u){var a=n(o)?e:r;return a(o,t(u,3))}return D4=i,D4}var gB;function Nye(){if(gB)return Rg;gB=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.flattenNames=void 0;var e=yge(),t=f(e),r=nk(),n=f(r),i=Ige(),o=f(i),u=Oye(),a=f(u);function f(g){return g&&g.__esModule?g:{default:g}}var p=Rg.flattenNames=function g(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=[];return(0,a.default)(b,function(_){Array.isArray(_)?g(_).map(function(P){return S.push(P)}):(0,o.default)(_)?(0,n.default)(_,function(P,k){P===!0&&S.push(k),S.push(k+"-"+P)}):(0,t.default)(_)&&S.push(_)}),S};return Rg.default=p,Rg}var Dg={},O4,yB;function Fye(){if(yB)return O4;yB=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return O4=e,O4}var N4,vB;function Bye(){if(vB)return N4;vB=1;var e=$m(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return N4=t,N4}var F4,bB;function NG(){if(bB)return F4;bB=1;var e=Bye();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return F4=t,F4}var B4,_B;function FG(){if(_B)return B4;_B=1;var e=NG(),t=ak(),r=Object.prototype,n=r.hasOwnProperty;function i(o,u,a){var f=o[u];(!(n.call(o,u)&&t(f,a))||a===void 0&&!(u in o))&&e(o,u,a)}return B4=i,B4}var z4,xB;function Vw(){if(xB)return z4;xB=1;var e=FG(),t=NG();function r(n,i,o,u){var a=!o;o||(o={});for(var f=-1,p=i.length;++f<p;){var g=i[f],b=u?u(o[g],n[g],g,o,n):void 0;b===void 0&&(b=n[g]),a?t(o,g,b):e(o,g,b)}return o}return z4=r,z4}var j4,wB;function zye(){if(wB)return j4;wB=1;var e=Vw(),t=ib();function r(n,i){return n&&e(i,t(i),n)}return j4=r,j4}var q4,SB;function jye(){if(SB)return q4;SB=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return q4=e,q4}var V4,CB;function qye(){if(CB)return V4;CB=1;var e=cv(),t=rk(),r=jye(),n=Object.prototype,i=n.hasOwnProperty;function o(u){if(!e(u))return r(u);var a=t(u),f=[];for(var p in u)p=="constructor"&&(a||!i.call(u,p))||f.push(p);return f}return V4=o,V4}var $4,EB;function fk(){if(EB)return $4;EB=1;var e=vG(),t=qye(),r=Ow();function n(i){return r(i)?e(i,!0):t(i)}return $4=n,$4}var G4,TB;function Vye(){if(TB)return G4;TB=1;var e=Vw(),t=fk();function r(n,i){return n&&e(i,t(i),n)}return G4=r,G4}var I0={exports:{}};I0.exports;var IB;function $ye(){return IB||(IB=1,(function(e,t){var r=If(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o?r.Buffer:void 0,a=u?u.allocUnsafe:void 0;function f(p,g){if(g)return p.slice();var b=p.length,S=a?a(b):new p.constructor(b);return p.copy(S),S}e.exports=f})(I0,I0.exports)),I0.exports}var U4,PB;function Gye(){if(PB)return U4;PB=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return U4=e,U4}var H4,AB;function Uye(){if(AB)return H4;AB=1;var e=Vw(),t=uk();function r(n,i){return e(n,t(n),i)}return H4=r,H4}var W4,kB;function BG(){if(kB)return W4;kB=1;var e=IG(),t=ik(),r=uk(),n=AG(),i=Object.getOwnPropertySymbols,o=i?function(u){for(var a=[];u;)e(a,r(u)),u=t(u);return a}:n;return W4=o,W4}var X4,MB;function Hye(){if(MB)return X4;MB=1;var e=Vw(),t=BG();function r(n,i){return e(n,t(n),i)}return X4=r,X4}var Y4,LB;function Wye(){if(LB)return Y4;LB=1;var e=PG(),t=BG(),r=fk();function n(i){return e(i,r,t)}return Y4=n,Y4}var Z4,RB;function Xye(){if(RB)return Z4;RB=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return Z4=r,Z4}var K4,DB;function hk(){if(DB)return K4;DB=1;var e=TG();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return K4=t,K4}var J4,OB;function Yye(){if(OB)return J4;OB=1;var e=hk();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return J4=t,J4}var Q4,NB;function Zye(){if(NB)return Q4;NB=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return Q4=t,Q4}var eT,FB;function Kye(){if(FB)return eT;FB=1;var e=nb(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return eT=n,eT}var tT,BB;function Jye(){if(BB)return tT;BB=1;var e=hk();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return tT=t,tT}var rT,zB;function Qye(){if(zB)return rT;zB=1;var e=hk(),t=Yye(),r=Zye(),n=Kye(),i=Jye(),o="[object Boolean]",u="[object Date]",a="[object Map]",f="[object Number]",p="[object RegExp]",g="[object Set]",b="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",P="[object DataView]",k="[object Float32Array]",M="[object Float64Array]",D="[object Int8Array]",F="[object Int16Array]",B="[object Int32Array]",N="[object Uint8Array]",$="[object Uint8ClampedArray]",V="[object Uint16Array]",U="[object Uint32Array]";function X(Z,oe,re){var H=Z.constructor;switch(oe){case _:return e(Z);case o:case u:return new H(+Z);case P:return t(Z,re);case k:case M:case D:case F:case B:case N:case $:case V:case U:return i(Z,re);case a:return new H;case f:case b:return new H(Z);case p:return r(Z);case g:return new H;case S:return n(Z)}}return rT=X,rT}var nT,jB;function eve(){if(jB)return nT;jB=1;var e=cv(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return nT=r,nT}var iT,qB;function tve(){if(qB)return iT;qB=1;var e=eve(),t=ik(),r=rk();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return iT=n,iT}var aT,VB;function rve(){if(VB)return aT;VB=1;var e=jw(),t=Sh(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return aT=n,aT}var oT,$B;function nve(){if($B)return oT;$B=1;var e=rve(),t=ek(),r=tk(),n=r&&r.isMap,i=n?t(n):e;return oT=i,oT}var sT,GB;function ive(){if(GB)return sT;GB=1;var e=jw(),t=Sh(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return sT=n,sT}var lT,UB;function ave(){if(UB)return lT;UB=1;var e=ive(),t=ek(),r=tk(),n=r&&r.isSet,i=n?t(n):e;return lT=i,lT}var uT,HB;function ove(){if(HB)return uT;HB=1;var e=lk(),t=Fye(),r=FG(),n=zye(),i=Vye(),o=$ye(),u=Gye(),a=Uye(),f=Hye(),p=kG(),g=Wye(),b=jw(),S=Xye(),_=Qye(),P=tve(),k=Bd(),M=JA(),D=nve(),F=cv(),B=ave(),N=ib(),$=fk(),V=1,U=2,X=4,Z="[object Arguments]",oe="[object Array]",re="[object Boolean]",H="[object Date]",ae="[object Error]",se="[object Function]",de="[object GeneratorFunction]",fe="[object Map]",Le="[object Number]",ye="[object Object]",xe="[object RegExp]",Se="[object Set]",Re="[object String]",he="[object Symbol]",Ee="[object WeakMap]",we="[object ArrayBuffer]",Ne="[object DataView]",Fe="[object Float32Array]",Xe="[object Float64Array]",Be="[object Int8Array]",ot="[object Int16Array]",Ke="[object Int32Array]",it="[object Uint8Array]",ke="[object Uint8ClampedArray]",Nt="[object Uint16Array]",st="[object Uint32Array]",$e={};$e[Z]=$e[oe]=$e[we]=$e[Ne]=$e[re]=$e[H]=$e[Fe]=$e[Xe]=$e[Be]=$e[ot]=$e[Ke]=$e[fe]=$e[Le]=$e[ye]=$e[xe]=$e[Se]=$e[Re]=$e[he]=$e[it]=$e[ke]=$e[Nt]=$e[st]=!0,$e[ae]=$e[se]=$e[Ee]=!1;function Zt($t,Wt,ht,sr,cr,ir){var br,yr=Wt&V,Kt=Wt&U,at=Wt&X;if(ht&&(br=cr?ht($t,sr,cr,ir):ht($t)),br!==void 0)return br;if(!F($t))return $t;var Ae=k($t);if(Ae){if(br=S($t),!yr)return u($t,br)}else{var _e=b($t),je=_e==se||_e==de;if(M($t))return o($t,yr);if(_e==ye||_e==Z||je&&!cr){if(br=Kt||je?{}:P($t),!yr)return Kt?f($t,i(br,$t)):a($t,n(br,$t))}else{if(!$e[_e])return cr?$t:{};br=_($t,_e,yr)}}ir||(ir=new e);var Ge=ir.get($t);if(Ge)return Ge;ir.set($t,br),B($t)?$t.forEach(function(St){br.add(Zt(St,Wt,ht,St,$t,ir))}):D($t)&&$t.forEach(function(St,yt){br.set(yt,Zt(St,Wt,ht,yt,$t,ir))});var He=at?Kt?g:p:Kt?$:N,Dt=Ae?void 0:He($t);return t(Dt||$t,function(St,yt){Dt&&(yt=St,St=$t[yt]),r(br,yt,Zt(St,Wt,ht,yt,$t,ir))}),br}return uT=Zt,uT}var cT,WB;function sve(){if(WB)return cT;WB=1;var e=ove(),t=1,r=4;function n(i){return e(i,t|r)}return cT=n,cT}var XB;function lve(){if(XB)return Dg;XB=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.mergeClasses=void 0;var e=nk(),t=o(e),r=sve(),n=o(r),i=Object.assign||function(a){for(var f=1;f<arguments.length;f++){var p=arguments[f];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(a[g]=p[g])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var u=Dg.mergeClasses=function(f){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],g=f.default&&(0,n.default)(f.default)||{};return p.map(function(b){var S=f[b];return S&&(0,t.default)(S,function(_,P){g[P]||(g[P]={}),g[P]=i({},g[P],S[P])}),b}),g};return Dg.default=u,Dg}var Og={},YB;function uve(){if(YB)return Og;YB=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.autoprefix=void 0;var e=nk(),t=n(e),r=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var f=arguments[a];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])}return u};function n(u){return u&&u.__esModule?u:{default:u}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var f=a&&a.split(" ");return{position:"absolute",top:f&&f[0],right:f&&f[1],bottom:f&&f[2],left:f&&f[3]}},extend:function(a,f){var p=f[a];return p||{extend:a}}},o=Og.autoprefix=function(a){var f={};return(0,t.default)(a,function(p,g){var b={};(0,t.default)(p,function(S,_){var P=i[_];P?b=r({},b,P(S)):b[_]=S}),f[g]=b}),f};return Og.default=o,Og}var Ng={},ZB;function cve(){if(ZB)return Ng;ZB=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.hover=void 0;var e=Object.assign||function(f){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(f[b]=g[b])}return f},t=R1(),r=n(t);function n(f){return f&&f.__esModule?f:{default:f}}function i(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function o(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var a=Ng.hover=function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(b){u(S,b);function S(){var _,P,k,M;i(this,S);for(var D=arguments.length,F=Array(D),B=0;B<D;B++)F[B]=arguments[B];return M=(P=(k=o(this,(_=S.__proto__||Object.getPrototypeOf(S)).call.apply(_,[this].concat(F))),k),k.state={hover:!1},k.handleMouseOver=function(){return k.setState({hover:!0})},k.handleMouseOut=function(){return k.setState({hover:!1})},k.render=function(){return r.default.createElement(g,{onMouseOver:k.handleMouseOver,onMouseOut:k.handleMouseOut},r.default.createElement(p,e({},k.props,k.state)))},P),o(k,M)}return S})(r.default.Component)};return Ng.default=a,Ng}var Fg={},KB;function dve(){if(KB)return Fg;KB=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.active=void 0;var e=Object.assign||function(f){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(f[b]=g[b])}return f},t=R1(),r=n(t);function n(f){return f&&f.__esModule?f:{default:f}}function i(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function o(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var a=Fg.active=function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(b){u(S,b);function S(){var _,P,k,M;i(this,S);for(var D=arguments.length,F=Array(D),B=0;B<D;B++)F[B]=arguments[B];return M=(P=(k=o(this,(_=S.__proto__||Object.getPrototypeOf(S)).call.apply(_,[this].concat(F))),k),k.state={active:!1},k.handleMouseDown=function(){return k.setState({active:!0})},k.handleMouseUp=function(){return k.setState({active:!1})},k.render=function(){return r.default.createElement(g,{onMouseDown:k.handleMouseDown,onMouseUp:k.handleMouseUp},r.default.createElement(p,e({},k.props,k.state)))},P),o(k,M)}return S})(r.default.Component)};return Fg.default=a,Fg}var j_={},JB;function fve(){if(JB)return j_;JB=1,Object.defineProperty(j_,"__esModule",{value:!0});var e=function(r,n){var i={},o=function(a){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=f};return r===0&&o("first-child"),r===n-1&&o("last-child"),(r===0||r%2===0)&&o("even"),Math.abs(r%2)===1&&o("odd"),o("nth-child",r),i};return j_.default=e,j_}var QB;function hve(){if(QB)return Uu;QB=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.ReactCSS=Uu.loop=Uu.handleActive=Uu.handleHover=Uu.hover=void 0;var e=Nye(),t=S(e),r=lve(),n=S(r),i=uve(),o=S(i),u=cve(),a=S(u),f=dve(),p=S(f),g=fve(),b=S(g);function S(P){return P&&P.__esModule?P:{default:P}}Uu.hover=a.default,Uu.handleHover=a.default,Uu.handleActive=p.default,Uu.loop=b.default;var _=Uu.ReactCSS=function(k){for(var M=arguments.length,D=Array(M>1?M-1:0),F=1;F<M;F++)D[F-1]=arguments[F];var B=(0,t.default)(D),N=(0,n.default)(k,B);return(0,o.default)(N)};return Uu.default=_,Uu}var pk=hve();const Ti=Sf(pk);var pve=function(t,r,n,i,o){var u=o.clientWidth,a=o.clientHeight,f=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,g=f-(o.getBoundingClientRect().left+window.pageXOffset),b=p-(o.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var S=void 0;if(b<0?S=0:b>a?S=1:S=Math.round(b*100/a)/100,r.a!==S)return{h:r.h,s:r.s,l:r.l,a:S,source:"rgb"}}else{var _=void 0;if(g<0?_=0:g>u?_=1:_=Math.round(g*100/u)/100,i!==_)return{h:r.h,s:r.s,l:r.l,a:_,source:"rgb"}}return null},dT={},mve=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=n*2,o.height=n*2;var u=o.getContext("2d");return u?(u.fillStyle=t,u.fillRect(0,0,o.width,o.height),u.fillStyle=r,u.fillRect(0,0,n,n),u.translate(n,n),u.fillRect(0,0,n,n),o.toDataURL()):null},gve=function(t,r,n,i){var o=t+"-"+r+"-"+n+(i?"-server":"");if(dT[o])return dT[o];var u=mve(t,r,n,i);return dT[o]=u,u},ez=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dv=function(t){var r=t.white,n=t.grey,i=t.size,o=t.renderers,u=t.borderRadius,a=t.boxShadow,f=t.children,p=Ti({default:{grid:{borderRadius:u,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+gve(r,n,i,o.canvas)+") center left"}}});return ee.isValidElement(f)?gt.cloneElement(f,ez({},f.props,{style:ez({},f.props.style,p.grid)})):gt.createElement("div",{style:p.grid})};dv.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var yve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vve=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function bve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tz(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function _ve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var mk=(function(e){_ve(t,e);function t(){var r,n,i,o;bve(this,t);for(var u=arguments.length,a=Array(u),f=0;f<u;f++)a[f]=arguments[f];return o=(n=(i=tz(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(p){var g=pve(p,i.props.hsl,i.props.direction,i.props.a,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,p)},i.handleMouseDown=function(p){i.handleChange(p),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),tz(i,o)}return vve(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,o=Ti({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:yve({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return gt.createElement("div",{style:o.alpha},gt.createElement("div",{style:o.checkboard},gt.createElement(dv,{renderers:this.props.renderers})),gt.createElement("div",{style:o.gradient}),gt.createElement("div",{style:o.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},gt.createElement("div",{style:o.pointer},this.props.pointer?gt.createElement(this.props.pointer,this.props):gt.createElement("div",{style:o.slider}))))}}]),t})(ee.PureComponent||ee.Component),xve=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function wve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Eve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Tve=1,zG=38,Ive=40,Pve=[zG,Ive],Ave=function(t){return Pve.indexOf(t)>-1},kve=function(t){return Number(String(t).replace(/%/g,""))},Mve=1,aa=(function(e){Eve(t,e);function t(r){Sve(this,t);var n=Cve(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var o=kve(i.target.value);if(!isNaN(o)&&Ave(i.keyCode)){var u=n.getArrowOffset(),a=i.keyCode===zG?o+u:o-u;n.setUpdatedValue(a,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var o=Math.round(n.props.value+i.movementX);o>=0&&o<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(o),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+Mve++,n}return xve(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return wve({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Tve}},{key:"setUpdatedValue",value:function(n,i){var o=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(o,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=Ti({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return gt.createElement("div",{style:i.wrap},gt.createElement("input",{id:this.inputId,style:i.input,ref:function(u){return n.input=u},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?gt.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t})(ee.PureComponent||ee.Component),Lve=function(t,r,n,i){var o=i.clientWidth,u=i.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,f=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,p=a-(i.getBoundingClientRect().left+window.pageXOffset),g=f-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var b=void 0;if(g<0)b=359;else if(g>u)b=0;else{var S=-(g*100/u)+100;b=360*S/100}if(n.h!==b)return{h:b,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var _=void 0;if(p<0)_=0;else if(p>o)_=359;else{var P=p*100/o;_=360*P/100}if(n.h!==_)return{h:_,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},Rve=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Dve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rz(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ove(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fv=(function(e){Ove(t,e);function t(){var r,n,i,o;Dve(this,t);for(var u=arguments.length,a=Array(u),f=0;f<u;f++)a[f]=arguments[f];return o=(n=(i=rz(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(p){var g=Lve(p,i.props.direction,i.props.hsl,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,p)},i.handleMouseDown=function(p){i.handleChange(p),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),rz(i,o)}return Rve(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,o=i===void 0?"horizontal":i,u=Ti({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return gt.createElement("div",{style:u.hue},gt.createElement("div",{className:"hue-"+o,style:u.container,ref:function(f){return n.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},gt.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),gt.createElement("div",{style:u.pointer},this.props.pointer?gt.createElement(this.props.pointer,this.props):gt.createElement("div",{style:u.slider}))))}}]),t})(ee.PureComponent||ee.Component);function Nve(){this.__data__=[],this.size=0}function ab(e,t){return e===t||e!==e&&t!==t}function $w(e,t){for(var r=e.length;r--;)if(ab(e[r][0],t))return r;return-1}var Fve=Array.prototype,Bve=Fve.splice;function zve(e){var t=this.__data__,r=$w(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Bve.call(t,r,1),--this.size,!0}function jve(e){var t=this.__data__,r=$w(t,e);return r<0?void 0:t[r][1]}function qve(e){return $w(this.__data__,e)>-1}function Vve(e,t){var r=this.__data__,n=$w(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Ch(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ch.prototype.clear=Nve;Ch.prototype.delete=zve;Ch.prototype.get=jve;Ch.prototype.has=qve;Ch.prototype.set=Vve;function $ve(){this.__data__=new Ch,this.size=0}function Gve(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Uve(e){return this.__data__.get(e)}function Hve(e){return this.__data__.has(e)}var jG=typeof global=="object"&&global&&global.Object===Object&&global,Wve=typeof self=="object"&&self&&self.Object===Object&&self,zd=jG||Wve||Function("return this")(),pp=zd.Symbol,qG=Object.prototype,Xve=qG.hasOwnProperty,Yve=qG.toString,Jv=pp?pp.toStringTag:void 0;function Zve(e){var t=Xve.call(e,Jv),r=e[Jv];try{e[Jv]=void 0;var n=!0}catch{}var i=Yve.call(e);return n&&(t?e[Jv]=r:delete e[Jv]),i}var Kve=Object.prototype,Jve=Kve.toString;function Qve(e){return Jve.call(e)}var e0e="[object Null]",t0e="[object Undefined]",nz=pp?pp.toStringTag:void 0;function Gm(e){return e==null?e===void 0?t0e:e0e:nz&&nz in Object(e)?Zve(e):Qve(e)}function ad(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var r0e="[object AsyncFunction]",n0e="[object Function]",i0e="[object GeneratorFunction]",a0e="[object Proxy]";function gk(e){if(!ad(e))return!1;var t=Gm(e);return t==n0e||t==i0e||t==r0e||t==a0e}var fT=zd["__core-js_shared__"],iz=(function(){var e=/[^.]+$/.exec(fT&&fT.keys&&fT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function o0e(e){return!!iz&&iz in e}var s0e=Function.prototype,l0e=s0e.toString;function Um(e){if(e!=null){try{return l0e.call(e)}catch{}try{return e+""}catch{}}return""}var u0e=/[\\^$.*+?()[\]{}|]/g,c0e=/^\[object .+?Constructor\]$/,d0e=Function.prototype,f0e=Object.prototype,h0e=d0e.toString,p0e=f0e.hasOwnProperty,m0e=RegExp("^"+h0e.call(p0e).replace(u0e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g0e(e){if(!ad(e)||o0e(e))return!1;var t=gk(e)?m0e:c0e;return t.test(Um(e))}function y0e(e,t){return e?.[t]}function Hm(e,t){var r=y0e(e,t);return g0e(r)?r:void 0}var _1=Hm(zd,"Map"),x1=Hm(Object,"create");function v0e(){this.__data__=x1?x1(null):{},this.size=0}function b0e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _0e="__lodash_hash_undefined__",x0e=Object.prototype,w0e=x0e.hasOwnProperty;function S0e(e){var t=this.__data__;if(x1){var r=t[e];return r===_0e?void 0:r}return w0e.call(t,e)?t[e]:void 0}var C0e=Object.prototype,E0e=C0e.hasOwnProperty;function T0e(e){var t=this.__data__;return x1?t[e]!==void 0:E0e.call(t,e)}var I0e="__lodash_hash_undefined__";function P0e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=x1&&t===void 0?I0e:t,this}function Am(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Am.prototype.clear=v0e;Am.prototype.delete=b0e;Am.prototype.get=S0e;Am.prototype.has=T0e;Am.prototype.set=P0e;function A0e(){this.size=0,this.__data__={hash:new Am,map:new(_1||Ch),string:new Am}}function k0e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Gw(e,t){var r=e.__data__;return k0e(t)?r[typeof t=="string"?"string":"hash"]:r.map}function M0e(e){var t=Gw(this,e).delete(e);return this.size-=t?1:0,t}function L0e(e){return Gw(this,e).get(e)}function R0e(e){return Gw(this,e).has(e)}function D0e(e,t){var r=Gw(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Eh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Eh.prototype.clear=A0e;Eh.prototype.delete=M0e;Eh.prototype.get=L0e;Eh.prototype.has=R0e;Eh.prototype.set=D0e;var O0e=200;function N0e(e,t){var r=this.__data__;if(r instanceof Ch){var n=r.__data__;if(!_1||n.length<O0e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Eh(n)}return r.set(e,t),this.size=r.size,this}function yf(e){var t=this.__data__=new Ch(e);this.size=t.size}yf.prototype.clear=$ve;yf.prototype.delete=Gve;yf.prototype.get=Uve;yf.prototype.has=Hve;yf.prototype.set=N0e;var s2=(function(){try{var e=Hm(Object,"defineProperty");return e({},"",{}),e}catch{}})();function yk(e,t,r){t=="__proto__"&&s2?s2(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function fI(e,t,r){(r!==void 0&&!ab(e[t],r)||r===void 0&&!(t in e))&&yk(e,t,r)}function F0e(e){return function(t,r,n){for(var i=-1,o=Object(t),u=n(t),a=u.length;a--;){var f=u[++i];if(r(o[f],f,o)===!1)break}return t}}var VG=F0e(),$G=typeof exports=="object"&&exports&&!exports.nodeType&&exports,az=$G&&typeof module=="object"&&module&&!module.nodeType&&module,B0e=az&&az.exports===$G,oz=B0e?zd.Buffer:void 0;oz&&oz.allocUnsafe;function z0e(e,t){return e.slice()}var l2=zd.Uint8Array;function j0e(e){var t=new e.constructor(e.byteLength);return new l2(t).set(new l2(e)),t}function q0e(e,t){var r=j0e(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function V0e(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var sz=Object.create,$0e=(function(){function e(){}return function(t){if(!ad(t))return{};if(sz)return sz(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function GG(e,t){return function(r){return e(t(r))}}var UG=GG(Object.getPrototypeOf,Object),G0e=Object.prototype;function vk(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||G0e;return e===r}function U0e(e){return typeof e.constructor=="function"&&!vk(e)?$0e(UG(e)):{}}function mp(e){return e!=null&&typeof e=="object"}var H0e="[object Arguments]";function lz(e){return mp(e)&&Gm(e)==H0e}var HG=Object.prototype,W0e=HG.hasOwnProperty,X0e=HG.propertyIsEnumerable,u2=lz((function(){return arguments})())?lz:function(e){return mp(e)&&W0e.call(e,"callee")&&!X0e.call(e,"callee")},Tc=Array.isArray,Y0e=9007199254740991;function bk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Y0e}function hv(e){return e!=null&&bk(e.length)&&!gk(e)}function Z0e(e){return mp(e)&&hv(e)}function K0e(){return!1}var WG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,uz=WG&&typeof module=="object"&&module&&!module.nodeType&&module,J0e=uz&&uz.exports===WG,cz=J0e?zd.Buffer:void 0,Q0e=cz?cz.isBuffer:void 0,c2=Q0e||K0e,e1e="[object Object]",t1e=Function.prototype,r1e=Object.prototype,XG=t1e.toString,n1e=r1e.hasOwnProperty,i1e=XG.call(Object);function a1e(e){if(!mp(e)||Gm(e)!=e1e)return!1;var t=UG(e);if(t===null)return!0;var r=n1e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&XG.call(r)==i1e}var o1e="[object Arguments]",s1e="[object Array]",l1e="[object Boolean]",u1e="[object Date]",c1e="[object Error]",d1e="[object Function]",f1e="[object Map]",h1e="[object Number]",p1e="[object Object]",m1e="[object RegExp]",g1e="[object Set]",y1e="[object String]",v1e="[object WeakMap]",b1e="[object ArrayBuffer]",_1e="[object DataView]",x1e="[object Float32Array]",w1e="[object Float64Array]",S1e="[object Int8Array]",C1e="[object Int16Array]",E1e="[object Int32Array]",T1e="[object Uint8Array]",I1e="[object Uint8ClampedArray]",P1e="[object Uint16Array]",A1e="[object Uint32Array]",Lo={};Lo[x1e]=Lo[w1e]=Lo[S1e]=Lo[C1e]=Lo[E1e]=Lo[T1e]=Lo[I1e]=Lo[P1e]=Lo[A1e]=!0;Lo[o1e]=Lo[s1e]=Lo[b1e]=Lo[l1e]=Lo[_1e]=Lo[u1e]=Lo[c1e]=Lo[d1e]=Lo[f1e]=Lo[h1e]=Lo[p1e]=Lo[m1e]=Lo[g1e]=Lo[y1e]=Lo[v1e]=!1;function k1e(e){return mp(e)&&bk(e.length)&&!!Lo[Gm(e)]}function M1e(e){return function(t){return e(t)}}var YG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Y0=YG&&typeof module=="object"&&module&&!module.nodeType&&module,L1e=Y0&&Y0.exports===YG,hT=L1e&&jG.process,dz=(function(){try{var e=Y0&&Y0.require&&Y0.require("util").types;return e||hT&&hT.binding&&hT.binding("util")}catch{}})(),fz=dz&&dz.isTypedArray,_k=fz?M1e(fz):k1e;function hI(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var R1e=Object.prototype,D1e=R1e.hasOwnProperty;function O1e(e,t,r){var n=e[t];(!(D1e.call(e,t)&&ab(n,r))||r===void 0&&!(t in e))&&yk(e,t,r)}function N1e(e,t,r,n){var i=!r;r||(r={});for(var o=-1,u=t.length;++o<u;){var a=t[o],f=void 0;f===void 0&&(f=e[a]),i?yk(r,a,f):O1e(r,a,f)}return r}function F1e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var B1e=9007199254740991,z1e=/^(?:0|[1-9]\d*)$/;function xk(e,t){var r=typeof e;return t=t??B1e,!!t&&(r=="number"||r!="symbol"&&z1e.test(e))&&e>-1&&e%1==0&&e<t}var j1e=Object.prototype,q1e=j1e.hasOwnProperty;function ZG(e,t){var r=Tc(e),n=!r&&u2(e),i=!r&&!n&&c2(e),o=!r&&!n&&!i&&_k(e),u=r||n||i||o,a=u?F1e(e.length,String):[],f=a.length;for(var p in e)(t||q1e.call(e,p))&&!(u&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||xk(p,f)))&&a.push(p);return a}function V1e(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var $1e=Object.prototype,G1e=$1e.hasOwnProperty;function U1e(e){if(!ad(e))return V1e(e);var t=vk(e),r=[];for(var n in e)n=="constructor"&&(t||!G1e.call(e,n))||r.push(n);return r}function KG(e){return hv(e)?ZG(e,!0):U1e(e)}function H1e(e){return N1e(e,KG(e))}function W1e(e,t,r,n,i,o,u){var a=hI(e,r),f=hI(t,r),p=u.get(f);if(p){fI(e,r,p);return}var g=o?o(a,f,r+"",e,t,u):void 0,b=g===void 0;if(b){var S=Tc(f),_=!S&&c2(f),P=!S&&!_&&_k(f);g=f,S||_||P?Tc(a)?g=a:Z0e(a)?g=V0e(a):_?(b=!1,g=z0e(f)):P?(b=!1,g=q0e(f)):g=[]:a1e(f)||u2(f)?(g=a,u2(a)?g=H1e(a):(!ad(a)||gk(a))&&(g=U0e(f))):b=!1}b&&(u.set(f,g),i(g,f,n,o,u),u.delete(f)),fI(e,r,g)}function JG(e,t,r,n,i){e!==t&&VG(t,function(o,u){if(i||(i=new yf),ad(o))W1e(e,t,u,r,JG,n,i);else{var a=n?n(hI(e,u),o,u+"",e,t,i):void 0;a===void 0&&(a=o),fI(e,u,a)}},KG)}function Uw(e){return e}function X1e(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var hz=Math.max;function Y1e(e,t,r){return t=hz(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=hz(n.length-t,0),u=Array(o);++i<o;)u[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(u),X1e(e,this,a)}}function Z1e(e){return function(){return e}}var K1e=s2?function(e,t){return s2(e,"toString",{configurable:!0,enumerable:!1,value:Z1e(t),writable:!0})}:Uw,J1e=800,Q1e=16,ebe=Date.now;function tbe(e){var t=0,r=0;return function(){var n=ebe(),i=Q1e-(n-r);if(r=n,i>0){if(++t>=J1e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var rbe=tbe(K1e);function nbe(e,t){return rbe(Y1e(e,t,Uw),e+"")}function ibe(e,t,r){if(!ad(r))return!1;var n=typeof t;return(n=="number"?hv(r)&&xk(t,r.length):n=="string"&&t in r)?ab(r[t],e):!1}function abe(e){return nbe(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,u=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,u&&ibe(r[0],r[1],u)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}var rc=abe(function(e,t,r){JG(e,t,r)}),ob=function(t){var r=t.zDepth,n=t.radius,i=t.background,o=t.children,u=t.styles,a=u===void 0?{}:u,f=Ti(rc({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return gt.createElement("div",{style:f.wrap},gt.createElement("div",{style:f.bg}),gt.createElement("div",{style:f.content},o))};ob.propTypes={background:wn.string,zDepth:wn.oneOf([0,1,2,3,4,5]),radius:wn.number,styles:wn.object};ob.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var pT=function(){return zd.Date.now()},obe=/\s/;function sbe(e){for(var t=e.length;t--&&obe.test(e.charAt(t)););return t}var lbe=/^\s+/;function ube(e){return e&&e.slice(0,sbe(e)+1).replace(lbe,"")}var cbe="[object Symbol]";function Hw(e){return typeof e=="symbol"||mp(e)&&Gm(e)==cbe}var pz=NaN,dbe=/^[-+]0x[0-9a-f]+$/i,fbe=/^0b[01]+$/i,hbe=/^0o[0-7]+$/i,pbe=parseInt;function mz(e){if(typeof e=="number")return e;if(Hw(e))return pz;if(ad(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ad(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ube(e);var r=fbe.test(e);return r||hbe.test(e)?pbe(e.slice(2),r?2:8):dbe.test(e)?pz:+e}var mbe="Expected a function",gbe=Math.max,ybe=Math.min;function QG(e,t,r){var n,i,o,u,a,f,p=0,g=!1,b=!1,S=!0;if(typeof e!="function")throw new TypeError(mbe);t=mz(t)||0,ad(r)&&(g=!!r.leading,b="maxWait"in r,o=b?gbe(mz(r.maxWait)||0,t):o,S="trailing"in r?!!r.trailing:S);function _(V){var U=n,X=i;return n=i=void 0,p=V,u=e.apply(X,U),u}function P(V){return p=V,a=setTimeout(D,t),g?_(V):u}function k(V){var U=V-f,X=V-p,Z=t-U;return b?ybe(Z,o-X):Z}function M(V){var U=V-f,X=V-p;return f===void 0||U>=t||U<0||b&&X>=o}function D(){var V=pT();if(M(V))return F(V);a=setTimeout(D,k(V))}function F(V){return a=void 0,S&&n?_(V):(n=i=void 0,u)}function B(){a!==void 0&&clearTimeout(a),p=0,n=f=i=a=void 0}function N(){return a===void 0?u:F(pT())}function $(){var V=pT(),U=M(V);if(n=arguments,i=this,f=V,U){if(a===void 0)return P(f);if(b)return clearTimeout(a),a=setTimeout(D,t),_(f)}return a===void 0&&(a=setTimeout(D,t)),u}return $.cancel=B,$.flush=N,$}var vbe="Expected a function";function bbe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(vbe);return ad(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),QG(e,t,{leading:n,maxWait:t,trailing:i})}var _be=function(t,r,n){var i=n.getBoundingClientRect(),o=i.width,u=i.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,f=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,p=a-(n.getBoundingClientRect().left+window.pageXOffset),g=f-(n.getBoundingClientRect().top+window.pageYOffset);p<0?p=0:p>o&&(p=o),g<0?g=0:g>u&&(g=u);var b=p/o,S=1-g/u;return{h:r.h,s:b,v:S,a:r.a,source:"hsv"}},xbe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function wbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ww=(function(e){Cbe(t,e);function t(r){wbe(this,t);var n=Sbe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,_be(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var o=n.getContainerRenderWindow();o.addEventListener("mousemove",n.handleChange),o.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=bbe(function(i,o,u){i(o,u)},50),n}return xbe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},o=i.color,u=i.white,a=i.black,f=i.pointer,p=i.circle,g=Ti({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:u,black:a,pointer:f,circle:p}},{custom:!!this.props.style});return gt.createElement("div",{style:g.color,ref:function(S){return n.container=S},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},gt.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),gt.createElement("div",{style:g.white,className:"saturation-white"},gt.createElement("div",{style:g.black,className:"saturation-black"}),gt.createElement("div",{style:g.pointer},this.props.pointer?gt.createElement(this.props.pointer,this.props):gt.createElement("div",{style:g.circle}))))}}]),t})(ee.PureComponent||ee.Component);function Ebe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Tbe=GG(Object.keys,Object),Ibe=Object.prototype,Pbe=Ibe.hasOwnProperty;function Abe(e){if(!vk(e))return Tbe(e);var t=[];for(var r in Object(e))Pbe.call(e,r)&&r!="constructor"&&t.push(r);return t}function wk(e){return hv(e)?ZG(e):Abe(e)}function kbe(e,t){return e&&VG(e,t,wk)}function Mbe(e,t){return function(r,n){if(r==null)return r;if(!hv(r))return e(r,n);for(var i=r.length,o=-1,u=Object(r);++o<i&&n(u[o],o,u)!==!1;);return r}}var eU=Mbe(kbe);function Lbe(e){return typeof e=="function"?e:Uw}function Rbe(e,t){var r=Tc(e)?Ebe:eU;return r(e,Lbe(t))}function d2(e){"@babel/helpers - typeof";return d2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d2(e)}var Dbe=/^\s+/,Obe=/\s+$/;function ei(e,t){if(e=e||"",t=t||{},e instanceof ei)return e;if(!(this instanceof ei))return new ei(e,t);var r=Nbe(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ei.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,o,u,a;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?u=n/12.92:u=Math.pow((n+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*u+.0722*a},setAlpha:function(t){return this._a=tU(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=yz(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=yz(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=gz(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=gz(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return vz(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return jbe(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Go(this._r,255)*100)+"%",g:Math.round(Go(this._g,255)*100)+"%",b:Math.round(Go(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Go(this._r,255)*100)+"%, "+Math.round(Go(this._g,255)*100)+"%, "+Math.round(Go(this._b,255)*100)+"%)":"rgba("+Math.round(Go(this._r,255)*100)+"%, "+Math.round(Go(this._g,255)*100)+"%, "+Math.round(Go(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Jbe[vz(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+bz(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=ei(t);n="#"+bz(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return ei(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Gbe,arguments)},brighten:function(){return this._applyModification(Ube,arguments)},darken:function(){return this._applyModification(Hbe,arguments)},desaturate:function(){return this._applyModification(qbe,arguments)},saturate:function(){return this._applyModification(Vbe,arguments)},greyscale:function(){return this._applyModification($be,arguments)},spin:function(){return this._applyModification(Wbe,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Zbe,arguments)},complement:function(){return this._applyCombination(Xbe,arguments)},monochromatic:function(){return this._applyCombination(Kbe,arguments)},splitcomplement:function(){return this._applyCombination(Ybe,arguments)},triad:function(){return this._applyCombination(_z,[3])},tetrad:function(){return this._applyCombination(_z,[4])}};ei.fromRatio=function(e,t){if(d2(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=P0(e[n]));e=r}return ei(e,t)};function Nbe(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,o=null,u=!1,a=!1;return typeof e=="string"&&(e=r_e(e)),d2(e)=="object"&&(Zf(e.r)&&Zf(e.g)&&Zf(e.b)?(t=Fbe(e.r,e.g,e.b),u=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Zf(e.h)&&Zf(e.s)&&Zf(e.v)?(n=P0(e.s),i=P0(e.v),t=zbe(e.h,n,i),u=!0,a="hsv"):Zf(e.h)&&Zf(e.s)&&Zf(e.l)&&(n=P0(e.s),o=P0(e.l),t=Bbe(e.h,n,o),u=!0,a="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=tU(r),{ok:u,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function Fbe(e,t,r){return{r:Go(e,255)*255,g:Go(t,255)*255,b:Go(r,255)*255}}function gz(e,t,r){e=Go(e,255),t=Go(t,255),r=Go(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,u,a=(n+i)/2;if(n==i)o=u=0;else{var f=n-i;switch(u=a>.5?f/(2-n-i):f/(n+i),n){case e:o=(t-r)/f+(t<r?6:0);break;case t:o=(r-e)/f+2;break;case r:o=(e-t)/f+4;break}o/=6}return{h:o,s:u,l:a}}function Bbe(e,t,r){var n,i,o;e=Go(e,360),t=Go(t,100),r=Go(r,100);function u(p,g,b){return b<0&&(b+=1),b>1&&(b-=1),b<1/6?p+(g-p)*6*b:b<1/2?g:b<2/3?p+(g-p)*(2/3-b)*6:p}if(t===0)n=i=o=r;else{var a=r<.5?r*(1+t):r+t-r*t,f=2*r-a;n=u(f,a,e+1/3),i=u(f,a,e),o=u(f,a,e-1/3)}return{r:n*255,g:i*255,b:o*255}}function yz(e,t,r){e=Go(e,255),t=Go(t,255),r=Go(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,u,a=n,f=n-i;if(u=n===0?0:f/n,n==i)o=0;else{switch(n){case e:o=(t-r)/f+(t<r?6:0);break;case t:o=(r-e)/f+2;break;case r:o=(e-t)/f+4;break}o/=6}return{h:o,s:u,v:a}}function zbe(e,t,r){e=Go(e,360)*6,t=Go(t,100),r=Go(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),u=r*(1-i*t),a=r*(1-(1-i)*t),f=n%6,p=[r,u,o,o,a,r][f],g=[a,r,r,u,o,o][f],b=[o,o,a,r,r,u][f];return{r:p*255,g:g*255,b:b*255}}function vz(e,t,r,n){var i=[Td(Math.round(e).toString(16)),Td(Math.round(t).toString(16)),Td(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function jbe(e,t,r,n,i){var o=[Td(Math.round(e).toString(16)),Td(Math.round(t).toString(16)),Td(Math.round(r).toString(16)),Td(rU(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function bz(e,t,r,n){var i=[Td(rU(n)),Td(Math.round(e).toString(16)),Td(Math.round(t).toString(16)),Td(Math.round(r).toString(16))];return i.join("")}ei.equals=function(e,t){return!e||!t?!1:ei(e).toRgbString()==ei(t).toRgbString()};ei.random=function(){return ei.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function qbe(e,t){t=t===0?0:t||10;var r=ei(e).toHsl();return r.s-=t/100,r.s=Xw(r.s),ei(r)}function Vbe(e,t){t=t===0?0:t||10;var r=ei(e).toHsl();return r.s+=t/100,r.s=Xw(r.s),ei(r)}function $be(e){return ei(e).desaturate(100)}function Gbe(e,t){t=t===0?0:t||10;var r=ei(e).toHsl();return r.l+=t/100,r.l=Xw(r.l),ei(r)}function Ube(e,t){t=t===0?0:t||10;var r=ei(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),ei(r)}function Hbe(e,t){t=t===0?0:t||10;var r=ei(e).toHsl();return r.l-=t/100,r.l=Xw(r.l),ei(r)}function Wbe(e,t){var r=ei(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,ei(r)}function Xbe(e){var t=ei(e).toHsl();return t.h=(t.h+180)%360,ei(t)}function _z(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ei(e).toHsl(),n=[ei(e)],i=360/t,o=1;o<t;o++)n.push(ei({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function Ybe(e){var t=ei(e).toHsl(),r=t.h;return[ei(e),ei({h:(r+72)%360,s:t.s,l:t.l}),ei({h:(r+216)%360,s:t.s,l:t.l})]}function Zbe(e,t,r){t=t||6,r=r||30;var n=ei(e).toHsl(),i=360/r,o=[ei(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(ei(n));return o}function Kbe(e,t){t=t||6;for(var r=ei(e).toHsv(),n=r.h,i=r.s,o=r.v,u=[],a=1/t;t--;)u.push(ei({h:n,s:i,v:o})),o=(o+a)%1;return u}ei.mix=function(e,t,r){r=r===0?0:r||50;var n=ei(e).toRgb(),i=ei(t).toRgb(),o=r/100,u={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return ei(u)};ei.readability=function(e,t){var r=ei(e),n=ei(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};ei.isReadable=function(e,t,r){var n=ei.readability(e,t),i,o;switch(o=!1,i=n_e(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};ei.mostReadable=function(e,t,r){var n=null,i=0,o,u,a,f;r=r||{},u=r.includeFallbackColors,a=r.level,f=r.size;for(var p=0;p<t.length;p++)o=ei.readability(e,t[p]),o>i&&(i=o,n=ei(t[p]));return ei.isReadable(e,n,{level:a,size:f})||!u?n:(r.includeFallbackColors=!1,ei.mostReadable(e,["#fff","#000"],r))};var pI=ei.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Jbe=ei.hexNames=Qbe(pI);function Qbe(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function tU(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Go(e,t){e_e(e)&&(e="100%");var r=t_e(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Xw(e){return Math.min(1,Math.max(0,e))}function gc(e){return parseInt(e,16)}function e_e(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function t_e(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Td(e){return e.length==1?"0"+e:""+e}function P0(e){return e<=1&&(e=e*100+"%"),e}function rU(e){return Math.round(parseFloat(e)*255).toString(16)}function xz(e){return gc(e)/255}var xd=(function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Zf(e){return!!xd.CSS_UNIT.exec(e)}function r_e(e){e=e.replace(Dbe,"").replace(Obe,"").toLowerCase();var t=!1;if(pI[e])e=pI[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=xd.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=xd.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=xd.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=xd.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=xd.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=xd.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=xd.hex8.exec(e))?{r:gc(r[1]),g:gc(r[2]),b:gc(r[3]),a:xz(r[4]),format:t?"name":"hex8"}:(r=xd.hex6.exec(e))?{r:gc(r[1]),g:gc(r[2]),b:gc(r[3]),format:t?"name":"hex"}:(r=xd.hex4.exec(e))?{r:gc(r[1]+""+r[1]),g:gc(r[2]+""+r[2]),b:gc(r[3]+""+r[3]),a:xz(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=xd.hex3.exec(e))?{r:gc(r[1]+""+r[1]),g:gc(r[2]+""+r[2]),b:gc(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function n_e(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var wz=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return Rbe(r,function(o){if(t[o]&&(n+=1,isNaN(t[o])||(i+=1),o==="s"||o==="l")){var u=/^\d+%$/;u.test(t[o])&&(i+=1)}}),n===i?t:!1},A0=function(t,r){var n=t.hex?ei(t.hex):ei(t),i=n.toHsl(),o=n.toHsv(),u=n.toRgb(),a=n.toHex();i.s===0&&(i.h=r||0,o.h=r||0);var f=a==="000000"&&u.a===0;return{hsl:i,hex:f?"transparent":"#"+a,rgb:u,hsv:o,oldHue:t.h||r||i.h,source:t.source}},Sp=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&ei(t).isValid()},Sk=function(t){if(!t)return"#fff";var r=A0(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},mT=function(t,r){var n=t.replace("","");return ei(r+" ("+n+")")._ok},Qv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i_e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function a_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o_e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function s_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var nc=function(t){var r=(function(n){s_e(i,n);function i(o){a_e(this,i);var u=o_e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return u.handleChange=function(a,f){var p=wz(a);if(p){var g=A0(a,a.h||u.state.oldHue);u.setState(g),u.props.onChangeComplete&&u.debounce(u.props.onChangeComplete,g,f),u.props.onChange&&u.props.onChange(g,f)}},u.handleSwatchHover=function(a,f){var p=wz(a);if(p){var g=A0(a,a.h||u.state.oldHue);u.props.onSwatchHover&&u.props.onSwatchHover(g,f)}},u.state=Qv({},A0(o.color,0)),u.debounce=QG(function(a,f,p){a(f,p)},100),u}return i_e(i,[{key:"render",value:function(){var u={};return this.props.onSwatchHover&&(u.onSwatchHover=this.handleSwatchHover),gt.createElement(t,Qv({},this.props,this.state,{onChange:this.handleChange},u))}}],[{key:"getDerivedStateFromProps",value:function(u,a){return Qv({},A0(u.color,a.oldHue))}}]),i})(ee.PureComponent||ee.Component);return r.propTypes=Qv({},t.propTypes),r.defaultProps=Qv({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},l_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u_e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function c_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sz(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function d_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f_e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(n){d_e(i,n);function i(){var o,u,a,f;c_e(this,i);for(var p=arguments.length,g=Array(p),b=0;b<p;b++)g[b]=arguments[b];return f=(u=(a=Sz(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(g))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},u),Sz(a,f)}return u_e(i,[{key:"render",value:function(){return gt.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},gt.createElement(t,l_e({},this.props,this.state)))}}]),i})(gt.Component)},Cz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h_e=13,p_e=function(t){var r=t.color,n=t.style,i=t.onClick,o=i===void 0?function(){}:i,u=t.onHover,a=t.title,f=a===void 0?r:a,p=t.children,g=t.focus,b=t.focusStyle,S=b===void 0?{}:b,_=r==="transparent",P=Ti({default:{swatch:Cz({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,g?S:{})}}),k=function(N){return o(r,N)},M=function(N){return N.keyCode===h_e&&o(r,N)},D=function(N){return u(r,N)},F={};return u&&(F.onMouseOver=D),gt.createElement("div",Cz({style:P.swatch,onClick:k,title:f,tabIndex:0,onKeyDown:M},F),p,_&&gt.createElement(dv,{borderRadius:P.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Wm=f_e(p_e);var m_e=function(t){var r=t.direction,n=Ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return gt.createElement("div",{style:n.picker})},g_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nU=function(t){var r=t.rgb,n=t.hsl,i=t.width,o=t.height,u=t.onChange,a=t.direction,f=t.style,p=t.renderers,g=t.pointer,b=t.className,S=b===void 0?"":b,_=Ti({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:f}}});return gt.createElement("div",{style:_.picker,className:"alpha-picker "+S},gt.createElement(mk,g_e({},_.alpha,{rgb:r,hsl:n,pointer:g,renderers:p,onChange:u,direction:a})))};nU.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:m_e};nc(nU);function iU(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var y_e="__lodash_hash_undefined__";function v_e(e){return this.__data__.set(e,y_e),this}function b_e(e){return this.__data__.has(e)}function f2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Eh;++t<r;)this.add(e[t])}f2.prototype.add=f2.prototype.push=v_e;f2.prototype.has=b_e;function __e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function x_e(e,t){return e.has(t)}var w_e=1,S_e=2;function aU(e,t,r,n,i,o){var u=r&w_e,a=e.length,f=t.length;if(a!=f&&!(u&&f>a))return!1;var p=o.get(e),g=o.get(t);if(p&&g)return p==t&&g==e;var b=-1,S=!0,_=r&S_e?new f2:void 0;for(o.set(e,t),o.set(t,e);++b<a;){var P=e[b],k=t[b];if(n)var M=u?n(k,P,b,t,e,o):n(P,k,b,e,t,o);if(M!==void 0){if(M)continue;S=!1;break}if(_){if(!__e(t,function(D,F){if(!x_e(_,F)&&(P===D||i(P,D,r,n,o)))return _.push(F)})){S=!1;break}}else if(!(P===k||i(P,k,r,n,o))){S=!1;break}}return o.delete(e),o.delete(t),S}function C_e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function E_e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var T_e=1,I_e=2,P_e="[object Boolean]",A_e="[object Date]",k_e="[object Error]",M_e="[object Map]",L_e="[object Number]",R_e="[object RegExp]",D_e="[object Set]",O_e="[object String]",N_e="[object Symbol]",F_e="[object ArrayBuffer]",B_e="[object DataView]",Ez=pp?pp.prototype:void 0,gT=Ez?Ez.valueOf:void 0;function z_e(e,t,r,n,i,o,u){switch(r){case B_e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case F_e:return!(e.byteLength!=t.byteLength||!o(new l2(e),new l2(t)));case P_e:case A_e:case L_e:return ab(+e,+t);case k_e:return e.name==t.name&&e.message==t.message;case R_e:case O_e:return e==t+"";case M_e:var a=C_e;case D_e:var f=n&T_e;if(a||(a=E_e),e.size!=t.size&&!f)return!1;var p=u.get(e);if(p)return p==t;n|=I_e,u.set(e,t);var g=aU(a(e),a(t),n,i,o,u);return u.delete(e),g;case N_e:if(gT)return gT.call(e)==gT.call(t)}return!1}function j_e(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function q_e(e,t,r){var n=t(e);return Tc(e)?n:j_e(n,r(e))}function V_e(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var u=e[r];t(u,r,e)&&(o[i++]=u)}return o}function $_e(){return[]}var G_e=Object.prototype,U_e=G_e.propertyIsEnumerable,Tz=Object.getOwnPropertySymbols,H_e=Tz?function(e){return e==null?[]:(e=Object(e),V_e(Tz(e),function(t){return U_e.call(e,t)}))}:$_e;function Iz(e){return q_e(e,wk,H_e)}var W_e=1,X_e=Object.prototype,Y_e=X_e.hasOwnProperty;function Z_e(e,t,r,n,i,o){var u=r&W_e,a=Iz(e),f=a.length,p=Iz(t),g=p.length;if(f!=g&&!u)return!1;for(var b=f;b--;){var S=a[b];if(!(u?S in t:Y_e.call(t,S)))return!1}var _=o.get(e),P=o.get(t);if(_&&P)return _==t&&P==e;var k=!0;o.set(e,t),o.set(t,e);for(var M=u;++b<f;){S=a[b];var D=e[S],F=t[S];if(n)var B=u?n(F,D,S,t,e,o):n(D,F,S,e,t,o);if(!(B===void 0?D===F||i(D,F,r,n,o):B)){k=!1;break}M||(M=S=="constructor")}if(k&&!M){var N=e.constructor,$=t.constructor;N!=$&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof $=="function"&&$ instanceof $)&&(k=!1)}return o.delete(e),o.delete(t),k}var mI=Hm(zd,"DataView"),gI=Hm(zd,"Promise"),yI=Hm(zd,"Set"),vI=Hm(zd,"WeakMap"),Pz="[object Map]",K_e="[object Object]",Az="[object Promise]",kz="[object Set]",Mz="[object WeakMap]",Lz="[object DataView]",J_e=Um(mI),Q_e=Um(_1),exe=Um(gI),txe=Um(yI),rxe=Um(vI),Yh=Gm;(mI&&Yh(new mI(new ArrayBuffer(1)))!=Lz||_1&&Yh(new _1)!=Pz||gI&&Yh(gI.resolve())!=Az||yI&&Yh(new yI)!=kz||vI&&Yh(new vI)!=Mz)&&(Yh=function(e){var t=Gm(e),r=t==K_e?e.constructor:void 0,n=r?Um(r):"";if(n)switch(n){case J_e:return Lz;case Q_e:return Pz;case exe:return Az;case txe:return kz;case rxe:return Mz}return t});var nxe=1,Rz="[object Arguments]",Dz="[object Array]",q_="[object Object]",ixe=Object.prototype,Oz=ixe.hasOwnProperty;function axe(e,t,r,n,i,o){var u=Tc(e),a=Tc(t),f=u?Dz:Yh(e),p=a?Dz:Yh(t);f=f==Rz?q_:f,p=p==Rz?q_:p;var g=f==q_,b=p==q_,S=f==p;if(S&&c2(e)){if(!c2(t))return!1;u=!0,g=!1}if(S&&!g)return o||(o=new yf),u||_k(e)?aU(e,t,r,n,i,o):z_e(e,t,f,r,n,i,o);if(!(r&nxe)){var _=g&&Oz.call(e,"__wrapped__"),P=b&&Oz.call(t,"__wrapped__");if(_||P){var k=_?e.value():e,M=P?t.value():t;return o||(o=new yf),i(k,M,r,n,o)}}return S?(o||(o=new yf),Z_e(e,t,r,n,i,o)):!1}function Ck(e,t,r,n,i){return e===t?!0:e==null||t==null||!mp(e)&&!mp(t)?e!==e&&t!==t:axe(e,t,r,n,Ck,i)}var oxe=1,sxe=2;function lxe(e,t,r,n){var i=r.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var u=r[i];if(u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){u=r[i];var a=u[0],f=e[a],p=u[1];if(u[2]){if(f===void 0&&!(a in e))return!1}else{var g=new yf,b;if(!(b===void 0?Ck(p,f,oxe|sxe,n,g):b))return!1}}return!0}function oU(e){return e===e&&!ad(e)}function uxe(e){for(var t=wk(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,oU(i)]}return t}function sU(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function cxe(e){var t=uxe(e);return t.length==1&&t[0][2]?sU(t[0][0],t[0][1]):function(r){return r===e||lxe(r,e,t)}}var dxe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fxe=/^\w*$/;function Ek(e,t){if(Tc(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Hw(e)?!0:fxe.test(e)||!dxe.test(e)||t!=null&&e in Object(t)}var hxe="Expected a function";function Tk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(hxe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(Tk.Cache||Eh),r}Tk.Cache=Eh;var pxe=500;function mxe(e){var t=Tk(e,function(n){return r.size===pxe&&r.clear(),n}),r=t.cache;return t}var gxe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yxe=/\\(\\)?/g,vxe=mxe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(gxe,function(r,n,i,o){t.push(i?o.replace(yxe,"$1"):n||r)}),t}),Nz=pp?pp.prototype:void 0,Fz=Nz?Nz.toString:void 0;function lU(e){if(typeof e=="string")return e;if(Tc(e))return iU(e,lU)+"";if(Hw(e))return Fz?Fz.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function bxe(e){return e==null?"":lU(e)}function uU(e,t){return Tc(e)?e:Ek(e,t)?[e]:vxe(bxe(e))}function Yw(e){if(typeof e=="string"||Hw(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function cU(e,t){t=uU(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Yw(t[r++])];return r&&r==n?e:void 0}function _xe(e,t,r){var n=e==null?void 0:cU(e,t);return n===void 0?r:n}function xxe(e,t){return e!=null&&t in Object(e)}function wxe(e,t,r){t=uU(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var u=Yw(t[n]);if(!(o=e!=null&&r(e,u)))break;e=e[u]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&bk(i)&&xk(u,i)&&(Tc(e)||u2(e)))}function Sxe(e,t){return e!=null&&wxe(e,t,xxe)}var Cxe=1,Exe=2;function Txe(e,t){return Ek(e)&&oU(t)?sU(Yw(e),t):function(r){var n=_xe(r,e);return n===void 0&&n===t?Sxe(r,e):Ck(t,n,Cxe|Exe)}}function Ixe(e){return function(t){return t?.[e]}}function Pxe(e){return function(t){return cU(t,e)}}function Axe(e){return Ek(e)?Ixe(Yw(e)):Pxe(e)}function kxe(e){return typeof e=="function"?e:e==null?Uw:typeof e=="object"?Tc(e)?Txe(e[0],e[1]):cxe(e):Axe(e)}function Mxe(e,t){var r=-1,n=hv(e)?Array(e.length):[];return eU(e,function(i,o,u){n[++r]=t(i,o,u)}),n}function Xm(e,t){var r=Tc(e)?iU:Mxe;return r(e,kxe(t))}var Lxe=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,o=Ti({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return gt.createElement("div",{style:o.swatches},Xm(r,function(u){return gt.createElement(Wm,{key:u,color:u,style:o.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+u}})}),gt.createElement("div",{style:o.clear}))},Ik=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,u=t.width,a=t.triangle,f=t.styles,p=f===void 0?{}:f,g=t.className,b=g===void 0?"":g,S=i==="transparent",_=function(M,D){Sp(M)&&r({hex:M,source:"hex"},D)},P=Ti(rc({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Sk(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},p),{"hide-triangle":a==="hide"});return gt.createElement("div",{style:P.card,className:"block-picker "+b},gt.createElement("div",{style:P.triangle}),gt.createElement("div",{style:P.head},S&&gt.createElement(dv,{borderRadius:"6px 6px 0 0"}),gt.createElement("div",{style:P.label},i)),gt.createElement("div",{style:P.body},gt.createElement(Lxe,{colors:o,onClick:_,onSwatchHover:n}),gt.createElement(aa,{style:{input:P.input},value:i,onChange:_})))};Ik.propTypes={width:wn.oneOfType([wn.string,wn.number]),colors:wn.arrayOf(wn.string),triangle:wn.oneOf(["top","hide"]),styles:wn.object};Ik.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};nc(Ik);var Hg={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Wg={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},Xg={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},Yg={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Zg={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Kg={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Jg={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Qg={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},ey={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},k0={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},ty={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},ry={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},ny={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},iy={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},ay={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},oy={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},sy={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},ly={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},dU=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,o=t.hover,u=t.active,a=t.circleSize,f=t.circleSpacing,p=Ti({default:{swatch:{width:a,height:a,marginRight:f,marginBottom:f,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:o,active:u});return gt.createElement("div",{style:p.swatch},gt.createElement(Wm,{style:p.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:p.Swatch.boxShadow+", 0 0 5px "+r}}))};dU.defaultProps={circleSize:28,circleSpacing:14};const Rxe=pk.handleHover(dU);var Pk=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,o=t.colors,u=t.hex,a=t.circleSize,f=t.styles,p=f===void 0?{}:f,g=t.circleSpacing,b=t.className,S=b===void 0?"":b,_=Ti(rc({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-g,marginBottom:-g}}},p)),P=function(M,D){return n({hex:M,source:"hex"},D)};return gt.createElement("div",{style:_.card,className:"circle-picker "+S},Xm(o,function(k){return gt.createElement(Rxe,{key:k,color:k,onClick:P,onSwatchHover:i,active:u===k.toLowerCase(),circleSize:a,circleSpacing:g})}))};Pk.propTypes={width:wn.oneOfType([wn.string,wn.number]),circleSize:wn.number,circleSpacing:wn.number,styles:wn.object};Pk.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Hg[500],Wg[500],Xg[500],Yg[500],Zg[500],Kg[500],Jg[500],Qg[500],ey[500],k0[500],ty[500],ry[500],ny[500],iy[500],ay[500],oy[500],sy[500],ly[500]],styles:{}};nc(Pk);function Bz(e){return e===void 0}var V_={},zz;function Dxe(){if(zz)return V_;zz=1,Object.defineProperty(V_,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var f=arguments[a];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])}return u},t=R1(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var f={};for(var p in u)a.indexOf(p)>=0||Object.prototype.hasOwnProperty.call(u,p)&&(f[p]=u[p]);return f}var o=24;return V_.default=function(u){var a=u.fill,f=a===void 0?"currentColor":a,p=u.width,g=p===void 0?o:p,b=u.height,S=b===void 0?o:b,_=u.style,P=_===void 0?{}:_,k=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:f,width:g,height:S},P)},k),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},V_}var Oxe=Dxe();const Nxe=Sf(Oxe);var Fxe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Bxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zxe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function jxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fU=(function(e){jxe(t,e);function t(r){Bxe(this,t);var n=zxe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,o){i.hex?Sp(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(Bz(i.s)?n.props.hsl.s:i.s),l:Number(Bz(i.l)?n.props.hsl.l:i.l),source:"hsl"},o))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return Fxe(t,[{key:"render",value:function(){var n=this,i=Ti({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=gt.createElement("div",{style:i.fields,className:"flexbox-fix"},gt.createElement("div",{style:i.field},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=gt.createElement("div",{style:i.fields,className:"flexbox-fix"},gt.createElement("div",{style:i.field},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),gt.createElement("div",{style:i.field},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),gt.createElement("div",{style:i.field},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),gt.createElement("div",{style:i.alpha},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=gt.createElement("div",{style:i.fields,className:"flexbox-fix"},gt.createElement("div",{style:i.field},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),gt.createElement("div",{style:i.field},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),gt.createElement("div",{style:i.field},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),gt.createElement("div",{style:i.alpha},gt.createElement(aa,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),gt.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,gt.createElement("div",{style:i.toggle},gt.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},gt.createElement(Nxe,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t})(gt.Component);fU.defaultProps={view:"hex"};var jz=function(){var t=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return gt.createElement("div",{style:t.picker})},qxe=function(){var t=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return gt.createElement("div",{style:t.picker})},Ak=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,o=t.rgb,u=t.hsl,a=t.hsv,f=t.hex,p=t.renderers,g=t.styles,b=g===void 0?{}:g,S=t.className,_=S===void 0?"":S,P=t.defaultView,k=Ti(rc({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},b),{disableAlpha:i});return gt.createElement("div",{style:k.picker,className:"chrome-picker "+_},gt.createElement("div",{style:k.saturation},gt.createElement(Ww,{style:k.Saturation,hsl:u,hsv:a,pointer:qxe,onChange:n})),gt.createElement("div",{style:k.body},gt.createElement("div",{style:k.controls,className:"flexbox-fix"},gt.createElement("div",{style:k.color},gt.createElement("div",{style:k.swatch},gt.createElement("div",{style:k.active}),gt.createElement(dv,{renderers:p}))),gt.createElement("div",{style:k.toggles},gt.createElement("div",{style:k.hue},gt.createElement(fv,{style:k.Hue,hsl:u,pointer:jz,onChange:n})),gt.createElement("div",{style:k.alpha},gt.createElement(mk,{style:k.Alpha,rgb:o,hsl:u,pointer:jz,renderers:p,onChange:n})))),gt.createElement(fU,{rgb:o,hsl:u,hex:f,view:P,onChange:n,disableAlpha:i})))};Ak.propTypes={width:wn.oneOfType([wn.string,wn.number]),disableAlpha:wn.bool,styles:wn.object,defaultView:wn.oneOf(["hex","rgb","hsl"])};Ak.defaultProps={width:225,disableAlpha:!1,styles:{}};const Vxe=nc(Ak);var $xe=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=t.active,a=Ti({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Sk(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return gt.createElement(Wm,{style:a.color,color:r,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},gt.createElement("div",{style:a.dot}))},Gxe=function(t){var r=t.hex,n=t.rgb,i=t.onChange,o=Ti({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),u=function(f,p){f.r||f.g||f.b?i({r:f.r||n.r,g:f.g||n.g,b:f.b||n.b,source:"rgb"},p):i({hex:f.hex,source:"hex"},p)};return gt.createElement("div",{style:o.fields,className:"flexbox-fix"},gt.createElement("div",{style:o.active}),gt.createElement(aa,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:r,onChange:u}),gt.createElement(aa,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:u}),gt.createElement(aa,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:u}),gt.createElement(aa,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:u}))},kk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,o=t.hex,u=t.rgb,a=t.styles,f=a===void 0?{}:a,p=t.className,g=p===void 0?"":p,b=Ti(rc({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},f)),S=function(P,k){P.hex?Sp(P.hex)&&r({hex:P.hex,source:"hex"},k):r(P,k)};return gt.createElement(ob,{style:b.Compact,styles:f},gt.createElement("div",{style:b.compact,className:"compact-picker "+g},gt.createElement("div",null,Xm(i,function(_){return gt.createElement($xe,{key:_,color:_,active:_.toLowerCase()===o,onClick:S,onSwatchHover:n})}),gt.createElement("div",{style:b.clear})),gt.createElement(Gxe,{hex:o,rgb:u,onChange:S})))};kk.propTypes={colors:wn.arrayOf(wn.string),styles:wn.object};kk.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};nc(kk);var Uxe=function(t){var r=t.hover,n=t.color,i=t.onClick,o=t.onSwatchHover,u={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=Ti({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:u}},{hover:r});return gt.createElement("div",{style:a.swatch},gt.createElement(Wm,{color:n,onClick:i,onHover:o,focusStyle:u}))};const Hxe=pk.handleHover(Uxe);var Mk=function(t){var r=t.width,n=t.colors,i=t.onChange,o=t.onSwatchHover,u=t.triangle,a=t.styles,f=a===void 0?{}:a,p=t.className,g=p===void 0?"":p,b=Ti(rc({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},f),{"hide-triangle":u==="hide","top-left-triangle":u==="top-left","top-right-triangle":u==="top-right","bottom-left-triangle":u==="bottom-left","bottom-right-triangle":u==="bottom-right"}),S=function(P,k){return i({hex:P,source:"hex"},k)};return gt.createElement("div",{style:b.card,className:"github-picker "+g},gt.createElement("div",{style:b.triangleShadow}),gt.createElement("div",{style:b.triangle}),Xm(n,function(_){return gt.createElement(Hxe,{color:_,key:_,onClick:S,onSwatchHover:o})}))};Mk.propTypes={width:wn.oneOfType([wn.string,wn.number]),colors:wn.arrayOf(wn.string),triangle:wn.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:wn.object};Mk.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};nc(Mk);var Wxe=function(t){var r=t.direction,n=Ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return gt.createElement("div",{style:n.picker})},Xxe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lk=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.hsl,u=t.direction,a=t.pointer,f=t.styles,p=f===void 0?{}:f,g=t.className,b=g===void 0?"":g,S=Ti(rc({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},p)),_=function(k){return i({a:1,h:k.h,l:.5,s:1})};return gt.createElement("div",{style:S.picker,className:"hue-picker "+b},gt.createElement(fv,Xxe({},S.hue,{hsl:o,pointer:a,onChange:_,direction:u})))};Lk.propTypes={styles:wn.object};Lk.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Wxe,styles:{}};nc(Lk);var Yxe=function(t){var r=t.onChange,n=t.hex,i=t.rgb,o=t.styles,u=o===void 0?{}:o,a=t.className,f=a===void 0?"":a,p=Ti(rc({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},u)),g=function(S,_){S.hex?Sp(S.hex)&&r({hex:S.hex,source:"hex"},_):(S.r||S.g||S.b)&&r({r:S.r||i.r,g:S.g||i.g,b:S.b||i.b,source:"rgb"},_)};return gt.createElement(ob,{styles:u},gt.createElement("div",{style:p.material,className:"material-picker "+f},gt.createElement(aa,{style:{wrap:p.HEXwrap,input:p.HEXinput,label:p.HEXlabel},label:"hex",value:n,onChange:g}),gt.createElement("div",{style:p.split,className:"flexbox-fix"},gt.createElement("div",{style:p.third},gt.createElement(aa,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"r",value:i.r,onChange:g})),gt.createElement("div",{style:p.third},gt.createElement(aa,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"g",value:i.g,onChange:g})),gt.createElement("div",{style:p.third},gt.createElement(aa,{style:{wrap:p.RGBwrap,input:p.RGBinput,label:p.RGBlabel},label:"b",value:i.b,onChange:g})))))};nc(Yxe);var Zxe=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,o=t.hex,u=Ti({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(p,g){p["#"]?Sp(p["#"])&&r({hex:p["#"],source:"hex"},g):p.r||p.g||p.b?r({r:p.r||n.r,g:p.g||n.g,b:p.b||n.b,source:"rgb"},g):(p.h||p.s||p.v)&&r({h:p.h||i.h,s:p.s||i.s,v:p.v||i.v,source:"hsv"},g)};return gt.createElement("div",{style:u.fields},gt.createElement(aa,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),gt.createElement(aa,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),gt.createElement(aa,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),gt.createElement("div",{style:u.divider}),gt.createElement(aa,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:a}),gt.createElement(aa,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:a}),gt.createElement(aa,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:a}),gt.createElement("div",{style:u.divider}),gt.createElement(aa,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),gt.createElement("div",{style:u.fieldSymbols},gt.createElement("div",{style:u.symbol},""),gt.createElement("div",{style:u.symbol},"%"),gt.createElement("div",{style:u.symbol},"%")))},Kxe=function(t){var r=t.hsl,n=Ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return gt.createElement("div",{style:n.picker})},Jxe=function(){var t=Ti({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return gt.createElement("div",{style:t.pointer},gt.createElement("div",{style:t.left},gt.createElement("div",{style:t.leftInside})),gt.createElement("div",{style:t.right},gt.createElement("div",{style:t.rightInside})))},qz=function(t){var r=t.onClick,n=t.label,i=t.children,o=t.active,u=Ti({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return gt.createElement("div",{style:u.button,onClick:r},n||i)},Qxe=function(t){var r=t.rgb,n=t.currentColor,i=Ti({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return gt.createElement("div",null,gt.createElement("div",{style:i.label},"new"),gt.createElement("div",{style:i.swatches},gt.createElement("div",{style:i.new}),gt.createElement("div",{style:i.current})),gt.createElement("div",{style:i.label},"current"))},e2e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function t2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r2e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function n2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Rk=(function(e){n2e(t,e);function t(r){t2e(this,t);var n=r2e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return e2e(t,[{key:"render",value:function(){var n=this.props,i=n.styles,o=i===void 0?{}:i,u=n.className,a=u===void 0?"":u,f=Ti(rc({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return gt.createElement("div",{style:f.picker,className:"photoshop-picker "+a},gt.createElement("div",{style:f.head},this.props.header),gt.createElement("div",{style:f.body,className:"flexbox-fix"},gt.createElement("div",{style:f.saturation},gt.createElement(Ww,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Kxe,onChange:this.props.onChange})),gt.createElement("div",{style:f.hue},gt.createElement(fv,{direction:"vertical",hsl:this.props.hsl,pointer:Jxe,onChange:this.props.onChange})),gt.createElement("div",{style:f.controls},gt.createElement("div",{style:f.top,className:"flexbox-fix"},gt.createElement("div",{style:f.previews},gt.createElement(Qxe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),gt.createElement("div",{style:f.actions},gt.createElement(qz,{label:"OK",onClick:this.props.onAccept,active:!0}),gt.createElement(qz,{label:"Cancel",onClick:this.props.onCancel}),gt.createElement(Zxe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t})(gt.Component);Rk.propTypes={header:wn.string,styles:wn.object};Rk.defaultProps={header:"Color Picker",styles:{}};nc(Rk);var i2e=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,u=t.disableAlpha,a=Ti({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),f=function(g,b){g.hex?Sp(g.hex)&&r({hex:g.hex,source:"hex"},b):g.r||g.g||g.b?r({r:g.r||n.r,g:g.g||n.g,b:g.b||n.b,a:n.a,source:"rgb"},b):g.a&&(g.a<0?g.a=0:g.a>100&&(g.a=100),g.a/=100,r({h:i.h,s:i.s,l:i.l,a:g.a,source:"rgb"},b))};return gt.createElement("div",{style:a.fields,className:"flexbox-fix"},gt.createElement("div",{style:a.double},gt.createElement(aa,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:f})),gt.createElement("div",{style:a.single},gt.createElement(aa,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:f,dragLabel:"true",dragMax:"255"})),gt.createElement("div",{style:a.single},gt.createElement(aa,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:f,dragLabel:"true",dragMax:"255"})),gt.createElement("div",{style:a.single},gt.createElement(aa,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:f,dragLabel:"true",dragMax:"255"})),gt.createElement("div",{style:a.alpha},gt.createElement(aa,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:f,dragLabel:"true",dragMax:"100"})))},a2e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hU=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=Ti({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),a=function(p,g){i({hex:p,source:"hex"},g)};return gt.createElement("div",{style:u.colors,className:"flexbox-fix"},r.map(function(f){var p=typeof f=="string"?{color:f}:f,g=""+p.color+(p.title||"");return gt.createElement("div",{key:g,style:u.swatchWrap},gt.createElement(Wm,a2e({},p,{style:u.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+p.color}})))}))};hU.propTypes={colors:wn.arrayOf(wn.oneOfType([wn.string,wn.shape({color:wn.string,title:wn.string})])).isRequired};var o2e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dk=function(t){var r=t.width,n=t.rgb,i=t.hex,o=t.hsv,u=t.hsl,a=t.onChange,f=t.onSwatchHover,p=t.disableAlpha,g=t.presetColors,b=t.renderers,S=t.styles,_=S===void 0?{}:S,P=t.className,k=P===void 0?"":P,M=Ti(rc({default:o2e({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},_),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},_),{disableAlpha:p});return gt.createElement("div",{style:M.picker,className:"sketch-picker "+k},gt.createElement("div",{style:M.saturation},gt.createElement(Ww,{style:M.Saturation,hsl:u,hsv:o,onChange:a})),gt.createElement("div",{style:M.controls,className:"flexbox-fix"},gt.createElement("div",{style:M.sliders},gt.createElement("div",{style:M.hue},gt.createElement(fv,{style:M.Hue,hsl:u,onChange:a})),gt.createElement("div",{style:M.alpha},gt.createElement(mk,{style:M.Alpha,rgb:n,hsl:u,renderers:b,onChange:a}))),gt.createElement("div",{style:M.color},gt.createElement(dv,null),gt.createElement("div",{style:M.activeColor}))),gt.createElement(i2e,{rgb:n,hsl:u,hex:i,onChange:a,disableAlpha:p}),gt.createElement(hU,{colors:g,onClick:a,onSwatchHover:f}))};Dk.propTypes={disableAlpha:wn.bool,width:wn.oneOfType([wn.string,wn.number]),styles:wn.object};Dk.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};nc(Dk);var e0=function(t){var r=t.hsl,n=t.offset,i=t.onClick,o=i===void 0?function(){}:i,u=t.active,a=t.first,f=t.last,p=Ti({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:u,first:a,last:f}),g=function(S){return o({h:r.h,s:.5,l:n,source:"hsl"},S)};return gt.createElement("div",{style:p.swatch,onClick:g})},s2e=function(t){var r=t.onClick,n=t.hsl,i=Ti({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return gt.createElement("div",{style:i.swatches},gt.createElement("div",{style:i.swatch},gt.createElement(e0,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:r,first:!0})),gt.createElement("div",{style:i.swatch},gt.createElement(e0,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:r})),gt.createElement("div",{style:i.swatch},gt.createElement(e0,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:r})),gt.createElement("div",{style:i.swatch},gt.createElement(e0,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:r})),gt.createElement("div",{style:i.swatch},gt.createElement(e0,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:r,last:!0})),gt.createElement("div",{style:i.clear}))},l2e=function(){var t=Ti({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return gt.createElement("div",{style:t.picker})},Ok=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,o=t.styles,u=o===void 0?{}:o,a=t.className,f=a===void 0?"":a,p=Ti(rc({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},u));return gt.createElement("div",{style:p.wrap||{},className:"slider-picker "+f},gt.createElement("div",{style:p.hue},gt.createElement(fv,{style:p.Hue,hsl:r,pointer:i,onChange:n})),gt.createElement("div",{style:p.swatches},gt.createElement(s2e,{hsl:r,onClick:n})))};Ok.propTypes={styles:wn.object};Ok.defaultProps={pointer:l2e,styles:{}};nc(Ok);var $_={},Vz;function u2e(){if(Vz)return $_;Vz=1,Object.defineProperty($_,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var f=arguments[a];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])}return u},t=R1(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var f={};for(var p in u)a.indexOf(p)>=0||Object.prototype.hasOwnProperty.call(u,p)&&(f[p]=u[p]);return f}var o=24;return $_.default=function(u){var a=u.fill,f=a===void 0?"currentColor":a,p=u.width,g=p===void 0?o:p,b=u.height,S=b===void 0?o:b,_=u.style,P=_===void 0?{}:_,k=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:f,width:g,height:S},P)},k),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},$_}var c2e=u2e();const d2e=Sf(c2e);var f2e=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=t.first,a=t.last,f=t.active,p=Ti({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:Sk(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:u,last:a,active:f,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return gt.createElement(Wm,{color:r,style:p.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},gt.createElement("div",{style:p.check},gt.createElement(d2e,null)))},h2e=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,o=t.active,u=Ti({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return gt.createElement("div",{style:u.group},Xm(i,function(a,f){return gt.createElement(f2e,{key:a,color:a,active:a.toLowerCase()===o,first:f===0,last:f===i.length-1,onClick:r,onSwatchHover:n})}))},Nk=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.onSwatchHover,u=t.colors,a=t.hex,f=t.styles,p=f===void 0?{}:f,g=t.className,b=g===void 0?"":g,S=Ti(rc({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},p)),_=function(k,M){return i({hex:k,source:"hex"},M)};return gt.createElement("div",{style:S.picker,className:"swatches-picker "+b},gt.createElement(ob,null,gt.createElement("div",{style:S.overflow},gt.createElement("div",{style:S.body},Xm(u,function(P){return gt.createElement(h2e,{key:P.toString(),group:P,active:a,onClick:_,onSwatchHover:o})}),gt.createElement("div",{style:S.clear})))))};Nk.propTypes={width:wn.oneOfType([wn.string,wn.number]),height:wn.oneOfType([wn.string,wn.number]),colors:wn.arrayOf(wn.arrayOf(wn.string)),styles:wn.object};Nk.defaultProps={width:320,height:240,colors:[[Hg[900],Hg[700],Hg[500],Hg[300],Hg[100]],[Wg[900],Wg[700],Wg[500],Wg[300],Wg[100]],[Xg[900],Xg[700],Xg[500],Xg[300],Xg[100]],[Yg[900],Yg[700],Yg[500],Yg[300],Yg[100]],[Zg[900],Zg[700],Zg[500],Zg[300],Zg[100]],[Kg[900],Kg[700],Kg[500],Kg[300],Kg[100]],[Jg[900],Jg[700],Jg[500],Jg[300],Jg[100]],[Qg[900],Qg[700],Qg[500],Qg[300],Qg[100]],[ey[900],ey[700],ey[500],ey[300],ey[100]],["#194D33",k0[700],k0[500],k0[300],k0[100]],[ty[900],ty[700],ty[500],ty[300],ty[100]],[ry[900],ry[700],ry[500],ry[300],ry[100]],[ny[900],ny[700],ny[500],ny[300],ny[100]],[iy[900],iy[700],iy[500],iy[300],iy[100]],[ay[900],ay[700],ay[500],ay[300],ay[100]],[oy[900],oy[700],oy[500],oy[300],oy[100]],[sy[900],sy[700],sy[500],sy[300],sy[100]],[ly[900],ly[700],ly[500],ly[300],ly[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};nc(Nk);var Fk=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,u=t.width,a=t.triangle,f=t.styles,p=f===void 0?{}:f,g=t.className,b=g===void 0?"":g,S=Ti(rc({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},p),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),_=function(k,M){Sp(k)&&r({hex:k,source:"hex"},M)};return gt.createElement("div",{style:S.card,className:"twitter-picker "+b},gt.createElement("div",{style:S.triangleShadow}),gt.createElement("div",{style:S.triangle}),gt.createElement("div",{style:S.body},Xm(o,function(P,k){return gt.createElement(Wm,{key:k,color:P,hex:P,style:S.swatch,onClick:_,onHover:n,focusStyle:{boxShadow:"0 0 4px "+P}})}),gt.createElement("div",{style:S.hash},"#"),gt.createElement(aa,{label:null,style:{input:S.input},value:i.replace("#",""),onChange:_}),gt.createElement("div",{style:S.clear})))};Fk.propTypes={width:wn.oneOfType([wn.string,wn.number]),triangle:wn.oneOf(["hide","top-left","top-right"]),colors:wn.arrayOf(wn.string),styles:wn.object};Fk.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};nc(Fk);var Bk=function(t){var r=Ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return gt.createElement("div",{style:r.picker})};Bk.propTypes={hsl:wn.shape({h:wn.number,s:wn.number,l:wn.number,a:wn.number})};Bk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var zk=function(t){var r=Ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return gt.createElement("div",{style:r.picker})};zk.propTypes={hsl:wn.shape({h:wn.number,s:wn.number,l:wn.number,a:wn.number})};zk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var p2e=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,u=t.hsv,a=function(_,P){if(_.hex)Sp(_.hex)&&r({hex:_.hex,source:"hex"},P);else if(_.rgb){var k=_.rgb.split(",");mT(_.rgb,"rgb")&&r({r:k[0],g:k[1],b:k[2],a:1,source:"rgb"},P)}else if(_.hsv){var M=_.hsv.split(",");mT(_.hsv,"hsv")&&(M[2]=M[2].replace("%",""),M[1]=M[1].replace("%",""),M[0]=M[0].replace("",""),M[1]==1?M[1]=.01:M[2]==1&&(M[2]=.01),r({h:Number(M[0]),s:Number(M[1]),v:Number(M[2]),source:"hsv"},P))}else if(_.hsl){var D=_.hsl.split(",");mT(_.hsl,"hsl")&&(D[2]=D[2].replace("%",""),D[1]=D[1].replace("%",""),D[0]=D[0].replace("",""),b[1]==1?b[1]=.01:b[2]==1&&(b[2]=.01),r({h:Number(D[0]),s:Number(D[1]),v:Number(D[2]),source:"hsl"},P))}},f=Ti({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),p=n.r+", "+n.g+", "+n.b,g=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",b=Math.round(u.h)+", "+Math.round(u.s*100)+"%, "+Math.round(u.v*100)+"%";return gt.createElement("div",{style:f.wrap,className:"flexbox-fix"},gt.createElement("div",{style:f.fields},gt.createElement("div",{style:f.double},gt.createElement(aa,{style:{input:f.input,label:f.label},label:"hex",value:o,onChange:a})),gt.createElement("div",{style:f.column},gt.createElement("div",{style:f.single},gt.createElement(aa,{style:{input:f.input2,label:f.label2},label:"rgb",value:p,onChange:a})),gt.createElement("div",{style:f.single},gt.createElement(aa,{style:{input:f.input2,label:f.label2},label:"hsv",value:b,onChange:a})),gt.createElement("div",{style:f.single},gt.createElement(aa,{style:{input:f.input2,label:f.label2},label:"hsl",value:g,onChange:a})))))},jk=function(t){var r=t.width,n=t.onChange,i=t.rgb,o=t.hsl,u=t.hsv,a=t.hex,f=t.header,p=t.styles,g=p===void 0?{}:p,b=t.className,S=b===void 0?"":b,_=Ti(rc({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},g));return gt.createElement("div",{style:_.picker,className:"google-picker "+S},gt.createElement("div",{style:_.head},f),gt.createElement("div",{style:_.swatch}),gt.createElement("div",{style:_.saturation},gt.createElement(Ww,{hsl:o,hsv:u,pointer:Bk,onChange:n})),gt.createElement("div",{style:_.body},gt.createElement("div",{style:_.controls,className:"flexbox-fix"},gt.createElement("div",{style:_.hue},gt.createElement(fv,{style:_.Hue,hsl:o,radius:"4px",pointer:zk,onChange:n}))),gt.createElement(p2e,{rgb:i,hsl:o,hex:a,hsv:u,onChange:n})))};jk.propTypes={width:wn.oneOfType([wn.string,wn.number]),styles:wn.object,header:wn.string};jk.defaultProps={width:652,styles:{},header:"Color picker"};nc(jk);const M0={rgba:e=>`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`,rgb:e=>`rgb(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b})`,hex:e=>e.hex,rgba_rgb:e=>e.rgb.a===1?M0.rgb(e):M0.rgba(e),rgba_hex:e=>e.rgb.a===1?M0.hex(e):M0.rgba(e)},w1=({convert:e,...t})=>{const[r,n]=ee.useState(!1),i=t?.value||"";return K.jsxs(K.Fragment,{children:[K.jsx(ih,{container:!0,sx:{flexWrap:"nowrap"},children:K.jsx(ih,{size:12,children:K.jsxs($i,{variant:"outlined",onClick:()=>n(!0),sx:{minWidth:"100%",padding:"5px",marginBottom:"10px",justifyContent:"flex-start",borderColor:o=>o.palette.text.primary,color:o=>o.palette.text.primary},children:[K.jsx("div",{style:{width:"25px",height:"25px",marginRight:"10px",backgroundColor:i}}),i]})})}),r&&K.jsx("div",{style:{position:"relative",marginTop:0},children:K.jsxs("div",{style:{position:"absolute",zIndex:1e3},children:[K.jsx("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:()=>{n(!1)}}),K.jsx(Vxe,{color:i,onChange:o=>{const u=M0[e](o);t?.onChange?.(u)}})]})})]})};w1.defaultProps={convert:"rgba_hex",label:"Color",name:"color"};try{w1.displayName="ColorPicker",w1.__docgenInfo={description:"",displayName:"ColorPicker",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void) | undefined"}},convert:{defaultValue:{value:"rgba_hex"},description:"",name:"convert",required:!1,type:{name:"enum",value:[{value:'"rgb"'},{value:'"rgba"'},{value:'"rgba_hex"'},{value:'"hex"'},{value:'"rgba_rgb"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | undefined"}}}}}catch{}function bI({propKey:e,value:t,setPaintProps:r}){return K.jsx(w1,{value:t,label:"Color",onChange:n=>{r(i=>({...i,[e]:n}))}})}try{bI.displayName="PaintPropsColorPicker",bI.__docgenInfo={description:"",displayName:"PaintPropsColorPicker",props:{key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},propKey:{defaultValue:null,description:"",name:"propKey",required:!0,type:{name:"string"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}}}}}catch{}const m2e=Sr(Kc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"}),g2e=Sr(xo)({marginLeft:"61px"}),pU={"circle-color":"colorpicker","circle-radius":"slider","circle-stroke-color":"colorpicker","circle-stroke-width":"slider","fill-color":"colorpicker","fill-outline-color":"colorpicker","line-color":"colorpicker","line-width":"slider","line-blur":"slider"},y2e=Object.keys(pU),v2e={"circle-stroke-width":{step:1,min:1,max:20},"circle-radius":{step:1,min:1,max:100},"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function h2({paintProps:e={},setPaintProps:t}){const r=ee.useRef(Math.round(Math.random()*1e10)),n=ee.useCallback(i=>{if(y2e.indexOf(i)!==-1&&(typeof e[i]=="number"||typeof e[i]=="string")){const o=K.jsx(ns,{id:i+"_label",gutterBottom:!0,children:i});switch(pU[i]){case"slider":return K.jsxs(gt.Fragment,{children:[o,K.jsx(tA,{...v2e[i],value:e[i],valueLabelDisplay:"auto",onChange:(u,a)=>{a&&t(f=>({...f,[i]:a}))}})]},i);case"numberfield":return K.jsxs(gt.Fragment,{children:[o,K.jsx(bw,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:e[i],onChange:u=>{u?.target?.value&&t(a=>({...a,[i]:parseInt(u.target.value)}))}})]},i);case"colorpicker":return K.jsxs(gt.Fragment,{children:[o,K.jsx(xo,{sx:{"& > div":{width:"initial !important"}},children:K.jsx(bI,{value:e[i],propKey:i,setPaintProps:t},i)})]},i)}}return null},[e]);return K.jsx(K.Fragment,{children:K.jsx(m2e,{children:K.jsx(ed,{children:K.jsx(g2e,{children:Object.keys(e).map(i=>n(i))})},r+"_paintPropForm")})})}try{h2.displayName="LayerPropertyForm",h2.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{paintProps:{defaultValue:{value:"{}"},description:"",name:"paintProps",required:!1,type:{name:"paintPropsType"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}},layerType:{defaultValue:null,description:"",name:"layerType",required:!0,type:{name:"string"}}}}}catch{}const p2=Sr(ed)(e=>({paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"})),b2e=Sr(xc)({padding:"4px",marginTop:"-3px"}),eh=Sr(s1)({minWidth:"30px"}),th=Sr(zy)({padding:0});function m2({configurable:e,vtProps:t,setVtProps:r,id:n,...i}){const[o,u]=ee.useState(!1),[a,f]=ee.useState(!0),[p,g]=ee.useState(t.layers[n].paint);return ee.useEffect(()=>{if(!r||typeof t.layers[n]?.layout?.visibility>"u"&&a||!a&&t.layers[n]?.layout?.visibility==="none"||a&&t.layers[n]?.layout?.visibility==="visible")return;const b=[...t.layers];b[n].layout?b[n].layout.visibility=a?"visible":"none":b[n].layout={visibility:a?"visible":"none"},r({...t,layers:b})},[a,n,r,t]),ee.useEffect(()=>{f(!!i.visibleMaster)},[i.visibleMaster]),ee.useEffect(()=>{if(r&&JSON.stringify(p)!==JSON.stringify(t.layers[n].paint)){const b={...p},S=[...t.layers];S[n].paint=b,r({...t,layers:S})}},[p,n,r,t]),K.jsxs(K.Fragment,{children:[K.jsxs(p2,{secondaryAction:e?K.jsx(b2e,{edge:"end","aria-label":"comments",onClick:()=>{u(b=>!b)},children:K.jsx(KA,{})}):void 0,children:[K.jsx(eh,{children:K.jsx(th,{checked:a,onClick:()=>{f(b=>!b)}})}),K.jsx(Hc,{primary:t.layers[n].id,variant:"layerlist"})]},n),e&&o&&K.jsx(h2,{paintProps:p,setPaintProps:g,layerType:t.layers[n].type})]})}m2.defaultProps={configurable:!0};try{p2.displayName="ListItemStyled",p2.__docgenInfo={description:"",displayName:"ListItemStyled",props:{}}}catch{}try{eh.displayName="CheckboxListItemIcon",eh.__docgenInfo={description:"",displayName:"CheckboxListItemIcon",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<unknown> | undefined"}}}}}catch{}try{th.displayName="CheckboxStyled",th.__docgenInfo={description:"",displayName:"CheckboxStyled",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | undefined"}},slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<CheckboxSlots> | undefined"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<SwitchBaseProps, keyof IntrinsicElements>, CheckboxRootSlotPropsOverrides, CheckboxOwnerState> | undefined; input?: SlotProps<...> | undefined; } | undefined"}}}}}catch{}try{m2.displayName="LayerListItemVectorLayer",m2.__docgenInfo={description:"",displayName:"LayerListItemVectorLayer",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},configurable:{defaultValue:{value:"true"},description:"",name:"configurable",required:!1,type:{name:"boolean | undefined"}},vtProps:{defaultValue:null,description:"",name:"vtProps",required:!0,type:{name:"MlVectorTileLayerProps"}},setVtProps:{defaultValue:null,description:"",name:"setVtProps",required:!0,type:{name:"((state: unknown) => void) | undefined"}},visibleMaster:{defaultValue:null,description:"",name:"visibleMaster",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function Zy(e){return K.jsx(K.Fragment,{children:K.jsxs(XP,{open:e.open,onClose:e.onCancel,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[K.jsx(Fm,{id:"alert-dialog-title",children:e.title}),K.jsx(YP,{children:K.jsx(Wne,{id:"alert-dialog-description",children:e.text})}),K.jsxs(U1,{children:[K.jsx($i,{onClick:e.onCancel,children:"Cancel"}),K.jsx($i,{onClick:e.onConfirm,autoFocus:!0,children:"Confirm"})]})]})})}Zy.defaultProps={title:"Confirm",text:"Are you sure?"};try{Zy.displayName="ConfirmDialog",Zy.__docgenInfo={description:"",displayName:"ConfirmDialog",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},title:{defaultValue:{value:"Confirm"},description:"",name:"title",required:!1,type:{name:"string"}},text:{defaultValue:{value:"Are you sure?"},description:"",name:"text",required:!1,type:{name:"string"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}function _2e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ee.useMemo(()=>n=>{t.forEach(i=>i(n))},t)}const Zw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pv(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function qk(e){return"nodeType"in e}function ic(e){var t,r;return e?pv(e)?e:qk(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Vk(e){const{Document:t}=ic(e);return e instanceof t}function sb(e){return pv(e)?!1:e instanceof ic(e).HTMLElement}function mU(e){return e instanceof ic(e).SVGElement}function mv(e){return e?pv(e)?e.document:qk(e)?Vk(e)?e:sb(e)||mU(e)?e.ownerDocument:document:document:document}const wf=Zw?ee.useLayoutEffect:ee.useEffect;function $k(e){const t=ee.useRef(e);return wf(()=>{t.current=e}),ee.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}function x2e(){const e=ee.useRef(null),t=ee.useCallback((n,i)=>{e.current=setInterval(n,i)},[]),r=ee.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function S1(e,t){t===void 0&&(t=[e]);const r=ee.useRef(e);return wf(()=>{r.current!==e&&(r.current=e)},t),r}function lb(e,t){const r=ee.useRef();return ee.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function g2(e){const t=$k(e),r=ee.useRef(null),n=ee.useCallback(i=>{i!==r.current&&t?.(i,r.current),r.current=i},[]);return[r,n]}function _I(e){const t=ee.useRef();return ee.useEffect(()=>{t.current=e},[e]),t.current}let yT={};function ub(e,t){return ee.useMemo(()=>{if(t)return t;const r=yT[e]==null?0:yT[e]+1;return yT[e]=r,e+"-"+r},[e,t])}function gU(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((o,u)=>{const a=Object.entries(u);for(const[f,p]of a){const g=o[f];g!=null&&(o[f]=g+e*p)}return o},{...t})}}const Py=gU(1),y2=gU(-1);function w2e(e){return"clientX"in e&&"clientY"in e}function Gk(e){if(!e)return!1;const{KeyboardEvent:t}=ic(e.target);return t&&e instanceof t}function S2e(e){if(!e)return!1;const{TouchEvent:t}=ic(e.target);return t&&e instanceof t}function xI(e){if(S2e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return w2e(e)?{x:e.clientX,y:e.clientY}:null}const C1=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[C1.Translate.toString(e),C1.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),$z="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function C2e(e){return e.matches($z)?e:e.querySelector($z)}const E2e={display:"none"};function T2e(e){let{id:t,value:r}=e;return gt.createElement("div",{id:t,style:E2e},r)}function I2e(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function P2e(){const[e,t]=ee.useState("");return{announce:ee.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const yU=ee.createContext(null);function A2e(e){const t=ee.useContext(yU);ee.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function k2e(){const[e]=ee.useState(()=>new Set),t=ee.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[ee.useCallback(n=>{let{type:i,event:o}=n;e.forEach(u=>{var a;return(a=u[i])==null?void 0:a.call(u,o)})},[e]),t]}const M2e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},L2e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function R2e(e){let{announcements:t=L2e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=M2e}=e;const{announce:o,announcement:u}=P2e(),a=ub("DndLiveRegion"),[f,p]=ee.useState(!1);if(ee.useEffect(()=>{p(!0)},[]),A2e(ee.useMemo(()=>({onDragStart(b){let{active:S}=b;o(t.onDragStart({active:S}))},onDragMove(b){let{active:S,over:_}=b;t.onDragMove&&o(t.onDragMove({active:S,over:_}))},onDragOver(b){let{active:S,over:_}=b;o(t.onDragOver({active:S,over:_}))},onDragEnd(b){let{active:S,over:_}=b;o(t.onDragEnd({active:S,over:_}))},onDragCancel(b){let{active:S,over:_}=b;o(t.onDragCancel({active:S,over:_}))}}),[o,t])),!f)return null;const g=gt.createElement(gt.Fragment,null,gt.createElement(T2e,{id:n,value:i.draggable}),gt.createElement(I2e,{id:a,announcement:u}));return r?rh.createPortal(g,r):g}var ul;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ul||(ul={}));function v2(){}function Gz(e,t){return ee.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function D2e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ee.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const Rd=Object.freeze({x:0,y:0});function O2e(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function N2e(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function F2e(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function B2e(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function Uz(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const z2e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=Uz(t,t.left,t.top),o=[];for(const u of n){const{id:a}=u,f=r.get(a);if(f){const p=O2e(Uz(f),i);o.push({id:a,data:{droppableContainer:u,value:p}})}}return o.sort(N2e)};function j2e(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),u=i-n,a=o-r;if(n<i&&r<o){const f=t.width*t.height,p=e.width*e.height,g=u*a,b=g/(f+p-g);return Number(b.toFixed(4))}return 0}const q2e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=[];for(const o of n){const{id:u}=o,a=r.get(u);if(a){const f=j2e(a,t);f>0&&i.push({id:u,data:{droppableContainer:o,value:f}})}}return i.sort(F2e)};function V2e(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function vU(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Rd}function $2e(e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.reduce((u,a)=>({...u,top:u.top+e*a.y,bottom:u.bottom+e*a.y,left:u.left+e*a.x,right:u.right+e*a.x}),{...r})}}const G2e=$2e(1);function U2e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function H2e(e,t,r){const n=U2e(t);if(!n)return e;const{scaleX:i,scaleY:o,x:u,y:a}=n,f=e.left-u-(1-i)*parseFloat(r),p=e.top-a-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),g=i?e.width/i:e.width,b=o?e.height/o:e.height;return{width:g,height:b,top:p,right:f+g,bottom:p+b,left:f}}const W2e={ignoreTransform:!1};function gv(e,t){t===void 0&&(t=W2e);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:g}=ic(e).getComputedStyle(e);p&&(r=H2e(r,p,g))}const{top:n,left:i,width:o,height:u,bottom:a,right:f}=r;return{top:n,left:i,width:o,height:u,bottom:a,right:f}}function Hz(e){return gv(e,{ignoreTransform:!0})}function X2e(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function Y2e(e,t){return t===void 0&&(t=ic(e).getComputedStyle(e)),t.position==="fixed"}function Z2e(e,t){t===void 0&&(t=ic(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?r.test(o):!1})}function Uk(e,t){const r=[];function n(i){if(t!=null&&r.length>=t||!i)return r;if(Vk(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!sb(i)||mU(i)||r.includes(i))return r;const o=ic(e).getComputedStyle(i);return i!==e&&Z2e(i,o)&&r.push(i),Y2e(i,o)?r:n(i.parentNode)}return e?n(e):r}function bU(e){const[t]=Uk(e,1);return t??null}function vT(e){return!Zw||!e?null:pv(e)?e:qk(e)?Vk(e)||e===mv(e).scrollingElement?window:sb(e)?e:null:null}function _U(e){return pv(e)?e.scrollX:e.scrollLeft}function xU(e){return pv(e)?e.scrollY:e.scrollTop}function wI(e){return{x:_U(e),y:xU(e)}}var Pl;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Pl||(Pl={}));function wU(e){return!Zw||!e?!1:e===document.scrollingElement}function SU(e){const t={x:0,y:0},r=wU(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,u=e.scrollTop>=n.y,a=e.scrollLeft>=n.x;return{isTop:i,isLeft:o,isBottom:u,isRight:a,maxScroll:n,minScroll:t}}const K2e={x:.2,y:.2};function J2e(e,t,r,n,i){let{top:o,left:u,right:a,bottom:f}=r;n===void 0&&(n=10),i===void 0&&(i=K2e);const{isTop:p,isBottom:g,isLeft:b,isRight:S}=SU(e),_={x:0,y:0},P={x:0,y:0},k={height:t.height*i.y,width:t.width*i.x};return!p&&o<=t.top+k.height?(_.y=Pl.Backward,P.y=n*Math.abs((t.top+k.height-o)/k.height)):!g&&f>=t.bottom-k.height&&(_.y=Pl.Forward,P.y=n*Math.abs((t.bottom-k.height-f)/k.height)),!S&&a>=t.right-k.width?(_.x=Pl.Forward,P.x=n*Math.abs((t.right-k.width-a)/k.width)):!b&&u<=t.left+k.width&&(_.x=Pl.Backward,P.x=n*Math.abs((t.left+k.width-u)/k.width)),{direction:_,speed:P}}function Q2e(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:u}=window;return{top:0,left:0,right:o,bottom:u,width:o,height:u}}const{top:t,left:r,right:n,bottom:i}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:i,width:e.clientWidth,height:e.clientHeight}}function CU(e){return e.reduce((t,r)=>Py(t,wI(r)),Rd)}function ewe(e){return e.reduce((t,r)=>t+_U(r),0)}function twe(e){return e.reduce((t,r)=>t+xU(r),0)}function rwe(e,t){if(t===void 0&&(t=gv),!e)return;const{top:r,left:n,bottom:i,right:o}=t(e);bU(e)&&(i<=0||o<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const nwe=[["x",["left","right"],ewe],["y",["top","bottom"],twe]];class Hk{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Uk(r),i=CU(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,u,a]of nwe)for(const f of u)Object.defineProperty(this,f,{get:()=>{const p=a(n),g=i[o]-p;return this.rect[f]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Z0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var i;(i=this.target)==null||i.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function iwe(e){const{EventTarget:t}=ic(e);return e instanceof t?e:mv(e)}function bT(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Gc;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Gc||(Gc={}));function Wz(e){e.preventDefault()}function awe(e){e.stopPropagation()}var Da;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Da||(Da={}));const EU={start:[Da.Space,Da.Enter],cancel:[Da.Esc],end:[Da.Space,Da.Enter,Da.Tab]},owe=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Da.Right:return{...r,x:r.x+25};case Da.Left:return{...r,x:r.x-25};case Da.Down:return{...r,y:r.y+25};case Da.Up:return{...r,y:r.y-25}}};class TU{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Z0(mv(r)),this.windowListeners=new Z0(ic(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Gc.Resize,this.handleCancel),this.windowListeners.add(Gc.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Gc.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&rwe(n),r(Rd)}handleKeyDown(t){if(Gk(t)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:o=EU,coordinateGetter:u=owe,scrollBehavior:a="smooth"}=i,{code:f}=t;if(o.end.includes(f)){this.handleEnd(t);return}if(o.cancel.includes(f)){this.handleCancel(t);return}const{collisionRect:p}=n.current,g=p?{x:p.left,y:p.top}:Rd;this.referenceCoordinates||(this.referenceCoordinates=g);const b=u(t,{active:r,context:n.current,currentCoordinates:g});if(b){const S=y2(b,g),_={x:0,y:0},{scrollableAncestors:P}=n.current;for(const k of P){const M=t.code,{isTop:D,isRight:F,isLeft:B,isBottom:N,maxScroll:$,minScroll:V}=SU(k),U=Q2e(k),X={x:Math.min(M===Da.Right?U.right-U.width/2:U.right,Math.max(M===Da.Right?U.left:U.left+U.width/2,b.x)),y:Math.min(M===Da.Down?U.bottom-U.height/2:U.bottom,Math.max(M===Da.Down?U.top:U.top+U.height/2,b.y))},Z=M===Da.Right&&!F||M===Da.Left&&!B,oe=M===Da.Down&&!N||M===Da.Up&&!D;if(Z&&X.x!==b.x){const re=k.scrollLeft+S.x,H=M===Da.Right&&re<=$.x||M===Da.Left&&re>=V.x;if(H&&!S.y){k.scrollTo({left:re,behavior:a});return}H?_.x=k.scrollLeft-re:_.x=M===Da.Right?k.scrollLeft-$.x:k.scrollLeft-V.x,_.x&&k.scrollBy({left:-_.x,behavior:a});break}else if(oe&&X.y!==b.y){const re=k.scrollTop+S.y,H=M===Da.Down&&re<=$.y||M===Da.Up&&re>=V.y;if(H&&!S.x){k.scrollTo({top:re,behavior:a});return}H?_.y=k.scrollTop-re:_.y=M===Da.Down?k.scrollTop-$.y:k.scrollTop-V.y,_.y&&k.scrollBy({top:-_.y,behavior:a});break}}this.handleMove(t,Py(y2(b,this.referenceCoordinates),_))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}TU.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=EU,onActivation:i}=t,{active:o}=r;const{code:u}=e.nativeEvent;if(n.start.includes(u)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function Xz(e){return!!(e&&"distance"in e)}function Yz(e){return!!(e&&"delay"in e)}class Wk{constructor(t,r,n){var i;n===void 0&&(n=iwe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:u}=o;this.props=t,this.events=r,this.document=mv(u),this.documentListeners=new Z0(this.document),this.listeners=new Z0(n),this.windowListeners=new Z0(ic(u)),this.initialCoordinates=(i=xI(o))!=null?i:Rd,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Gc.Resize,this.handleCancel),this.windowListeners.add(Gc.DragStart,Wz),this.windowListeners.add(Gc.VisibilityChange,this.handleCancel),this.windowListeners.add(Gc.ContextMenu,Wz),this.documentListeners.add(Gc.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Yz(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Xz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:i}=this.props;i(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Gc.Click,awe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Gc.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:i,props:o}=this,{onMove:u,options:{activationConstraint:a}}=o;if(!i)return;const f=(r=xI(t))!=null?r:Rd,p=y2(i,f);if(!n&&a){if(Xz(a)){if(a.tolerance!=null&&bT(p,a.tolerance))return this.handleCancel();if(bT(p,a.distance))return this.handleStart()}if(Yz(a)&&bT(p,a.tolerance))return this.handleCancel();this.handlePending(a,p);return}t.cancelable&&t.preventDefault(),u(f)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Da.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const swe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Xk extends Wk{constructor(t){const{event:r}=t,n=mv(r.target);super(t,swe,n)}}Xk.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];const lwe={move:{name:"mousemove"},end:{name:"mouseup"}};var SI;(function(e){e[e.RightClick=2]="RightClick"})(SI||(SI={}));class IU extends Wk{constructor(t){super(t,lwe,mv(t.event.target))}}IU.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===SI.RightClick?!1:(n?.({event:r}),!0)}}];const _T={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class uwe extends Wk{constructor(t){super(t,_T)}static setup(){return window.addEventListener(_T.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(_T.move.name,t)};function t(){}}}uwe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:i}=r;return i.length>1?!1:(n?.({event:r}),!0)}}];var K0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(K0||(K0={}));var b2;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(b2||(b2={}));function cwe(e){let{acceleration:t,activator:r=K0.Pointer,canScroll:n,draggingRect:i,enabled:o,interval:u=5,order:a=b2.TreeOrder,pointerCoordinates:f,scrollableAncestors:p,scrollableAncestorRects:g,delta:b,threshold:S}=e;const _=fwe({delta:b,disabled:!o}),[P,k]=x2e(),M=ee.useRef({x:0,y:0}),D=ee.useRef({x:0,y:0}),F=ee.useMemo(()=>{switch(r){case K0.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case K0.DraggableRect:return i}},[r,i,f]),B=ee.useRef(null),N=ee.useCallback(()=>{const V=B.current;if(!V)return;const U=M.current.x*D.current.x,X=M.current.y*D.current.y;V.scrollBy(U,X)},[]),$=ee.useMemo(()=>a===b2.TreeOrder?[...p].reverse():p,[a,p]);ee.useEffect(()=>{if(!o||!p.length||!F){k();return}for(const V of $){if(n?.(V)===!1)continue;const U=p.indexOf(V),X=g[U];if(!X)continue;const{direction:Z,speed:oe}=J2e(V,X,F,t,S);for(const re of["x","y"])_[re][Z[re]]||(oe[re]=0,Z[re]=0);if(oe.x>0||oe.y>0){k(),B.current=V,P(N,u),M.current=oe,D.current=Z;return}}M.current={x:0,y:0},D.current={x:0,y:0},k()},[t,N,n,k,o,u,JSON.stringify(F),JSON.stringify(_),P,p,$,g,JSON.stringify(S)])}const dwe={x:{[Pl.Backward]:!1,[Pl.Forward]:!1},y:{[Pl.Backward]:!1,[Pl.Forward]:!1}};function fwe(e){let{delta:t,disabled:r}=e;const n=_I(t);return lb(i=>{if(r||!n||!i)return dwe;const o={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Pl.Backward]:i.x[Pl.Backward]||o.x===-1,[Pl.Forward]:i.x[Pl.Forward]||o.x===1},y:{[Pl.Backward]:i.y[Pl.Backward]||o.y===-1,[Pl.Forward]:i.y[Pl.Forward]||o.y===1}}},[r,t,n])}function hwe(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return lb(i=>{var o;return t==null?null:(o=n??i)!=null?o:null},[n,t])}function pwe(e,t){return ee.useMemo(()=>e.reduce((r,n)=>{const{sensor:i}=n,o=i.activators.map(u=>({eventName:u.eventName,handler:t(u.handler,n)}));return[...r,...o]},[]),[e,t])}var E1;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(E1||(E1={}));var CI;(function(e){e.Optimized="optimized"})(CI||(CI={}));const Zz=new Map;function mwe(e,t){let{dragging:r,dependencies:n,config:i}=t;const[o,u]=ee.useState(null),{frequency:a,measure:f,strategy:p}=i,g=ee.useRef(e),b=M(),S=S1(b),_=ee.useCallback(function(D){D===void 0&&(D=[]),!S.current&&u(F=>F===null?D:F.concat(D.filter(B=>!F.includes(B))))},[S]),P=ee.useRef(null),k=lb(D=>{if(b&&!r)return Zz;if(!D||D===Zz||g.current!==e||o!=null){const F=new Map;for(let B of e){if(!B)continue;if(o&&o.length>0&&!o.includes(B.id)&&B.rect.current){F.set(B.id,B.rect.current);continue}const N=B.node.current,$=N?new Hk(f(N),N):null;B.rect.current=$,$&&F.set(B.id,$)}return F}return D},[e,o,r,b,f]);return ee.useEffect(()=>{g.current=e},[e]),ee.useEffect(()=>{b||_()},[r,b]),ee.useEffect(()=>{o&&o.length>0&&u(null)},[JSON.stringify(o)]),ee.useEffect(()=>{b||typeof a!="number"||P.current!==null||(P.current=setTimeout(()=>{_(),P.current=null},a))},[a,b,_,...n]),{droppableRects:k,measureDroppableContainers:_,measuringScheduled:o!=null};function M(){switch(p){case E1.Always:return!1;case E1.BeforeDragging:return r;default:return!r}}}function PU(e,t){return lb(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function gwe(e,t){return PU(e,t)}function ywe(e){let{callback:t,disabled:r}=e;const n=$k(t),i=ee.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(n)},[n,r]);return ee.useEffect(()=>()=>i?.disconnect(),[i]),i}function Kw(e){let{callback:t,disabled:r}=e;const n=$k(t),i=ee.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(n)},[r]);return ee.useEffect(()=>()=>i?.disconnect(),[i]),i}function vwe(e){return new Hk(gv(e),e)}function Kz(e,t,r){t===void 0&&(t=vwe);const[n,i]=ee.useState(null);function o(){i(f=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=f??r)!=null?p:null}const g=t(e);return JSON.stringify(f)===JSON.stringify(g)?f:g})}const u=ywe({callback(f){if(e)for(const p of f){const{type:g,target:b}=p;if(g==="childList"&&b instanceof HTMLElement&&b.contains(e)){o();break}}}}),a=Kw({callback:o});return wf(()=>{o(),e?(a?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),u?.disconnect())},[e]),n}function bwe(e){const t=PU(e);return vU(e,t)}const Jz=[];function _we(e){const t=ee.useRef(e),r=lb(n=>e?n&&n!==Jz&&e&&t.current&&e.parentNode===t.current.parentNode?n:Uk(e):Jz,[e]);return ee.useEffect(()=>{t.current=e},[e]),r}function xwe(e){const[t,r]=ee.useState(null),n=ee.useRef(e),i=ee.useCallback(o=>{const u=vT(o.target);u&&r(a=>a?(a.set(u,wI(u)),new Map(a)):null)},[]);return ee.useEffect(()=>{const o=n.current;if(e!==o){u(o);const a=e.map(f=>{const p=vT(f);return p?(p.addEventListener("scroll",i,{passive:!0}),[p,wI(p)]):null}).filter(f=>f!=null);r(a.length?new Map(a):null),n.current=e}return()=>{u(e),u(o)};function u(a){a.forEach(f=>{const p=vT(f);p?.removeEventListener("scroll",i)})}},[i,e]),ee.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,u)=>Py(o,u),Rd):CU(e):Rd,[e,t])}function Qz(e,t){t===void 0&&(t=[]);const r=ee.useRef(null);return ee.useEffect(()=>{r.current=null},t),ee.useEffect(()=>{const n=e!==Rd;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?y2(e,r.current):Rd}function wwe(e){ee.useEffect(()=>{if(!Zw)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function Swe(e,t){return ee.useMemo(()=>e.reduce((r,n)=>{let{eventName:i,handler:o}=n;return r[i]=u=>{o(u,t)},r},{}),[e,t])}function AU(e){return ee.useMemo(()=>e?X2e(e):null,[e])}const e9=[];function Cwe(e,t){t===void 0&&(t=gv);const[r]=e,n=AU(r?ic(r):null),[i,o]=ee.useState(e9);function u(){o(()=>e.length?e.map(f=>wU(f)?n:new Hk(t(f),f)):e9)}const a=Kw({callback:u});return wf(()=>{a?.disconnect(),u(),e.forEach(f=>a?.observe(f))},[e]),i}function Ewe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return sb(t)?t:e}function Twe(e){let{measure:t}=e;const[r,n]=ee.useState(null),i=ee.useCallback(p=>{for(const{target:g}of p)if(sb(g)){n(b=>{const S=t(g);return b?{...b,width:S.width,height:S.height}:S});break}},[t]),o=Kw({callback:i}),u=ee.useCallback(p=>{const g=Ewe(p);o?.disconnect(),g&&o?.observe(g),n(g?t(g):null)},[t,o]),[a,f]=g2(u);return ee.useMemo(()=>({nodeRef:a,rect:r,setRef:f}),[r,a,f])}const Iwe=[{sensor:Xk,options:{}},{sensor:TU,options:{}}],Pwe={current:{}},yx={draggable:{measure:Hz},droppable:{measure:Hz,strategy:E1.WhileDragging,frequency:CI.Optimized},dragOverlay:{measure:gv}};class J0 extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const Awe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new J0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:v2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:yx,measureDroppableContainers:v2,windowRect:null,measuringScheduled:!1},kwe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:v2,draggableNodes:new Map,over:null,measureDroppableContainers:v2},Jw=ee.createContext(kwe),kU=ee.createContext(Awe);function Mwe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new J0}}}function Lwe(e,t){switch(t.type){case ul.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ul.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ul.DragEnd:case ul.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ul.RegisterDroppable:{const{element:r}=t,{id:n}=r,i=new J0(e.droppable.containers);return i.set(n,r),{...e,droppable:{...e.droppable,containers:i}}}case ul.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;const u=new J0(e.droppable.containers);return u.set(r,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:u}}}case ul.UnregisterDroppable:{const{id:r,key:n}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new J0(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Rwe(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:i}=ee.useContext(Jw),o=_I(n),u=_I(r?.id);return ee.useEffect(()=>{if(!t&&!n&&o&&u!=null){if(!Gk(o)||document.activeElement===o.target)return;const a=i.get(u);if(!a)return;const{activatorNode:f,node:p}=a;if(!f.current&&!p.current)return;requestAnimationFrame(()=>{for(const g of[f.current,p.current]){if(!g)continue;const b=C2e(g);if(b){b.focus();break}}})}},[n,t,i,u,o]),null}function Dwe(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...n}),r):r}function Owe(e){return ee.useMemo(()=>({draggable:{...yx.draggable,...e?.draggable},droppable:{...yx.droppable,...e?.droppable},dragOverlay:{...yx.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Nwe(e){let{activeNode:t,measure:r,initialRect:n,config:i=!0}=e;const o=ee.useRef(!1),{x:u,y:a}=typeof i=="boolean"?{x:i,y:i}:i;wf(()=>{if(!u&&!a||!t){o.current=!1;return}if(o.current||!n)return;const p=t?.node.current;if(!p||p.isConnected===!1)return;const g=r(p),b=vU(g,n);if(u||(b.x=0),a||(b.y=0),o.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const S=bU(p);S&&S.scrollBy({top:b.y,left:b.x})}},[t,u,a,n,r])}const MU=ee.createContext({...Rd,scaleX:1,scaleY:1});var Zh;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Zh||(Zh={}));const Fwe=ee.memo(function(t){var r,n,i,o;let{id:u,accessibility:a,autoScroll:f=!0,children:p,sensors:g=Iwe,collisionDetection:b=q2e,measuring:S,modifiers:_,...P}=t;const k=ee.useReducer(Lwe,void 0,Mwe),[M,D]=k,[F,B]=k2e(),[N,$]=ee.useState(Zh.Uninitialized),V=N===Zh.Initialized,{draggable:{active:U,nodes:X,translate:Z},droppable:{containers:oe}}=M,re=U!=null?X.get(U):null,H=ee.useRef({initial:null,translated:null}),ae=ee.useMemo(()=>{var Lr;return U!=null?{id:U,data:(Lr=re?.data)!=null?Lr:Pwe,rect:H}:null},[U,re]),se=ee.useRef(null),[de,fe]=ee.useState(null),[Le,ye]=ee.useState(null),xe=S1(P,Object.values(P)),Se=ub("DndDescribedBy",u),Re=ee.useMemo(()=>oe.getEnabled(),[oe]),he=Owe(S),{droppableRects:Ee,measureDroppableContainers:we,measuringScheduled:Ne}=mwe(Re,{dragging:V,dependencies:[Z.x,Z.y],config:he.droppable}),Fe=hwe(X,U),Xe=ee.useMemo(()=>Le?xI(Le):null,[Le]),Be=tn(),ot=gwe(Fe,he.draggable.measure);Nwe({activeNode:U!=null?X.get(U):null,config:Be.layoutShiftCompensation,initialRect:ot,measure:he.draggable.measure});const Ke=Kz(Fe,he.draggable.measure,ot),it=Kz(Fe?Fe.parentElement:null),ke=ee.useRef({activatorEvent:null,active:null,activeNode:Fe,collisionRect:null,collisions:null,droppableRects:Ee,draggableNodes:X,draggingNode:null,draggingNodeRect:null,droppableContainers:oe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Nt=oe.getNodeFor((r=ke.current.over)==null?void 0:r.id),st=Twe({measure:he.dragOverlay.measure}),$e=(n=st.nodeRef.current)!=null?n:Fe,Zt=V?(i=st.rect)!=null?i:Ke:null,$t=!!(st.nodeRef.current&&st.rect),Wt=bwe($t?null:Ke),ht=AU($e?ic($e):null),sr=_we(V?Nt??Fe:null),cr=Cwe(sr),ir=Dwe(_,{transform:{x:Z.x-Wt.x,y:Z.y-Wt.y,scaleX:1,scaleY:1},activatorEvent:Le,active:ae,activeNodeRect:Ke,containerNodeRect:it,draggingNodeRect:Zt,over:ke.current.over,overlayNodeRect:st.rect,scrollableAncestors:sr,scrollableAncestorRects:cr,windowRect:ht}),br=Xe?Py(Xe,Z):null,yr=xwe(sr),Kt=Qz(yr),at=Qz(yr,[Ke]),Ae=Py(ir,Kt),_e=Zt?G2e(Zt,ir):null,je=ae&&_e?b({active:ae,collisionRect:_e,droppableRects:Ee,droppableContainers:Re,pointerCoordinates:br}):null,Ge=B2e(je,"id"),[He,Dt]=ee.useState(null),St=$t?ir:Py(ir,at),yt=V2e(St,(o=He?.rect)!=null?o:null,Ke),ct=ee.useRef(null),Jt=ee.useCallback((Lr,kt)=>{let{sensor:Hr,options:kn}=kt;if(se.current==null)return;const Ur=X.get(se.current);if(!Ur)return;const rr=Lr.nativeEvent,Jn=new Hr({active:se.current,activeNode:Ur,event:rr,options:kn,context:ke,onAbort(Vn){if(!X.get(Vn))return;const{onDragAbort:Ue}=xe.current,Ct={id:Vn};Ue?.(Ct),F({type:"onDragAbort",event:Ct})},onPending(Vn,Me,Ue,Ct){if(!X.get(Vn))return;const{onDragPending:zt}=xe.current,qr={id:Vn,constraint:Me,initialCoordinates:Ue,offset:Ct};zt?.(qr),F({type:"onDragPending",event:qr})},onStart(Vn){const Me=se.current;if(Me==null)return;const Ue=X.get(Me);if(!Ue)return;const{onDragStart:Ct}=xe.current,Gt={activatorEvent:rr,active:{id:Me,data:Ue.data,rect:H}};rh.unstable_batchedUpdates(()=>{Ct?.(Gt),$(Zh.Initializing),D({type:ul.DragStart,initialCoordinates:Vn,active:Me}),F({type:"onDragStart",event:Gt}),fe(ct.current),ye(rr)})},onMove(Vn){D({type:ul.DragMove,coordinates:Vn})},onEnd:en(ul.DragEnd),onCancel:en(ul.DragCancel)});ct.current=Jn;function en(Vn){return async function(){const{active:Ue,collisions:Ct,over:Gt,scrollAdjustedTranslate:zt}=ke.current;let qr=null;if(Ue&&zt){const{cancelDrop:En}=xe.current;qr={activatorEvent:rr,active:Ue,collisions:Ct,delta:zt,over:Gt},Vn===ul.DragEnd&&typeof En=="function"&&await Promise.resolve(En(qr))&&(Vn=ul.DragCancel)}se.current=null,rh.unstable_batchedUpdates(()=>{D({type:Vn}),$(Zh.Uninitialized),Dt(null),fe(null),ye(null),ct.current=null;const En=Vn===ul.DragEnd?"onDragEnd":"onDragCancel";if(qr){const Pi=xe.current[En];Pi?.(qr),F({type:En,event:qr})}})}}},[X]),Vt=ee.useCallback((Lr,kt)=>(Hr,kn)=>{const Ur=Hr.nativeEvent,rr=X.get(kn);if(se.current!==null||!rr||Ur.dndKit||Ur.defaultPrevented)return;const Jn={active:rr};Lr(Hr,kt.options,Jn)===!0&&(Ur.dndKit={capturedBy:kt.sensor},se.current=kn,Jt(Hr,kt))},[X,Jt]),xr=pwe(g,Vt);wwe(g),wf(()=>{Ke&&N===Zh.Initializing&&$(Zh.Initialized)},[Ke,N]),ee.useEffect(()=>{const{onDragMove:Lr}=xe.current,{active:kt,activatorEvent:Hr,collisions:kn,over:Ur}=ke.current;if(!kt||!Hr)return;const rr={active:kt,activatorEvent:Hr,collisions:kn,delta:{x:Ae.x,y:Ae.y},over:Ur};rh.unstable_batchedUpdates(()=>{Lr?.(rr),F({type:"onDragMove",event:rr})})},[Ae.x,Ae.y]),ee.useEffect(()=>{const{active:Lr,activatorEvent:kt,collisions:Hr,droppableContainers:kn,scrollAdjustedTranslate:Ur}=ke.current;if(!Lr||se.current==null||!kt||!Ur)return;const{onDragOver:rr}=xe.current,Jn=kn.get(Ge),en=Jn&&Jn.rect.current?{id:Jn.id,rect:Jn.rect.current,data:Jn.data,disabled:Jn.disabled}:null,Vn={active:Lr,activatorEvent:kt,collisions:Hr,delta:{x:Ur.x,y:Ur.y},over:en};rh.unstable_batchedUpdates(()=>{Dt(en),rr?.(Vn),F({type:"onDragOver",event:Vn})})},[Ge]),wf(()=>{ke.current={activatorEvent:Le,active:ae,activeNode:Fe,collisionRect:_e,collisions:je,droppableRects:Ee,draggableNodes:X,draggingNode:$e,draggingNodeRect:Zt,droppableContainers:oe,over:He,scrollableAncestors:sr,scrollAdjustedTranslate:Ae},H.current={initial:Zt,translated:_e}},[ae,Fe,je,_e,X,$e,Zt,Ee,oe,He,sr,Ae]),cwe({...Be,delta:Z,draggingRect:_e,pointerCoordinates:br,scrollableAncestors:sr,scrollableAncestorRects:cr});const _r=ee.useMemo(()=>({active:ae,activeNode:Fe,activeNodeRect:Ke,activatorEvent:Le,collisions:je,containerNodeRect:it,dragOverlay:st,draggableNodes:X,droppableContainers:oe,droppableRects:Ee,over:He,measureDroppableContainers:we,scrollableAncestors:sr,scrollableAncestorRects:cr,measuringConfiguration:he,measuringScheduled:Ne,windowRect:ht}),[ae,Fe,Ke,Le,je,it,st,X,oe,Ee,He,we,sr,cr,he,Ne,ht]),Nr=ee.useMemo(()=>({activatorEvent:Le,activators:xr,active:ae,activeNodeRect:Ke,ariaDescribedById:{draggable:Se},dispatch:D,draggableNodes:X,over:He,measureDroppableContainers:we}),[Le,xr,ae,Ke,D,Se,X,He,we]);return gt.createElement(yU.Provider,{value:B},gt.createElement(Jw.Provider,{value:Nr},gt.createElement(kU.Provider,{value:_r},gt.createElement(MU.Provider,{value:yt},p)),gt.createElement(Rwe,{disabled:a?.restoreFocus===!1})),gt.createElement(R2e,{...a,hiddenTextDescribedById:Se}));function tn(){const Lr=de?.autoScrollEnabled===!1,kt=typeof f=="object"?f.enabled===!1:f===!1,Hr=V&&!Lr&&!kt;return typeof f=="object"?{...f,enabled:Hr}:{enabled:Hr}}}),Bwe=ee.createContext(null),t9="button",zwe="Draggable";function jwe(e){let{id:t,data:r,disabled:n=!1,attributes:i}=e;const o=ub(zwe),{activators:u,activatorEvent:a,active:f,activeNodeRect:p,ariaDescribedById:g,draggableNodes:b,over:S}=ee.useContext(Jw),{role:_=t9,roleDescription:P="draggable",tabIndex:k=0}=i??{},M=f?.id===t,D=ee.useContext(M?MU:Bwe),[F,B]=g2(),[N,$]=g2(),V=Swe(u,t),U=S1(r);wf(()=>(b.set(t,{id:t,key:o,node:F,activatorNode:N,data:U}),()=>{const Z=b.get(t);Z&&Z.key===o&&b.delete(t)}),[b,t]);const X=ee.useMemo(()=>({role:_,tabIndex:k,"aria-disabled":n,"aria-pressed":M&&_===t9?!0:void 0,"aria-roledescription":P,"aria-describedby":g.draggable}),[n,_,k,M,P,g.draggable]);return{active:f,activatorEvent:a,activeNodeRect:p,attributes:X,isDragging:M,listeners:n?void 0:V,node:F,over:S,setNodeRef:B,setActivatorNodeRef:$,transform:D}}function qwe(){return ee.useContext(kU)}const Vwe="Droppable",$we={timeout:25};function Gwe(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:i}=e;const o=ub(Vwe),{active:u,dispatch:a,over:f,measureDroppableContainers:p}=ee.useContext(Jw),g=ee.useRef({disabled:r}),b=ee.useRef(!1),S=ee.useRef(null),_=ee.useRef(null),{disabled:P,updateMeasurementsFor:k,timeout:M}={...$we,...i},D=S1(k??n),F=ee.useCallback(()=>{if(!b.current){b.current=!0;return}_.current!=null&&clearTimeout(_.current),_.current=setTimeout(()=>{p(Array.isArray(D.current)?D.current:[D.current]),_.current=null},M)},[M]),B=Kw({callback:F,disabled:P||!u}),N=ee.useCallback((X,Z)=>{B&&(Z&&(B.unobserve(Z),b.current=!1),X&&B.observe(X))},[B]),[$,V]=g2(N),U=S1(t);return ee.useEffect(()=>{!B||!$.current||(B.disconnect(),b.current=!1,B.observe($.current))},[$,B]),ee.useEffect(()=>(a({type:ul.RegisterDroppable,element:{id:n,key:o,disabled:r,node:$,rect:S,data:U}}),()=>a({type:ul.UnregisterDroppable,key:o,id:n})),[n]),ee.useEffect(()=>{r!==g.current.disabled&&(a({type:ul.SetDroppableDisabled,id:n,key:o,disabled:r}),g.current.disabled=r)},[n,o,r,a]),{active:u,rect:S,isOver:f?.id===n,node:$,over:f,setNodeRef:V}}function LU(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Uwe(e,t){return e.reduce((r,n,i)=>{const o=t.get(n);return o&&(r[i]=o),r},Array(e.length))}function G_(e){return e!==null&&e>=0}function Hwe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Wwe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const RU=e=>{let{rects:t,activeIndex:r,overIndex:n,index:i}=e;const o=LU(t,n,r),u=t[i],a=o[i];return!a||!u?null:{x:a.left-u.left,y:a.top-u.top,scaleX:a.width/u.width,scaleY:a.height/u.height}},U_={scaleX:1,scaleY:1},Xwe=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:i,rects:o,overIndex:u}=e;const a=(t=o[r])!=null?t:n;if(!a)return null;if(i===r){const p=o[u];return p?{x:0,y:r<u?p.top+p.height-(a.top+a.height):p.top-a.top,...U_}:null}const f=Ywe(o,i,r);return i>r&&i<=u?{x:0,y:-a.height-f,...U_}:i<r&&i>=u?{x:0,y:a.height+f,...U_}:{x:0,y:0,...U_}};function Ywe(e,t,r){const n=e[t],i=e[t-1],o=e[t+1];return n?r<t?i?n.top-(i.top+i.height):o?o.top-(n.top+n.height):0:o?o.top-(n.top+n.height):i?n.top-(i.top+i.height):0:0}const DU="Sortable",OU=gt.createContext({activeIndex:-1,containerId:DU,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:RU,disabled:{draggable:!1,droppable:!1}});function Zwe(e){let{children:t,id:r,items:n,strategy:i=RU,disabled:o=!1}=e;const{active:u,dragOverlay:a,droppableRects:f,over:p,measureDroppableContainers:g}=qwe(),b=ub(DU,r),S=a.rect!==null,_=ee.useMemo(()=>n.map(V=>typeof V=="object"&&"id"in V?V.id:V),[n]),P=u!=null,k=u?_.indexOf(u.id):-1,M=p?_.indexOf(p.id):-1,D=ee.useRef(_),F=!Hwe(_,D.current),B=M!==-1&&k===-1||F,N=Wwe(o);wf(()=>{F&&P&&g(_)},[F,_,P,g]),ee.useEffect(()=>{D.current=_},[_]);const $=ee.useMemo(()=>({activeIndex:k,containerId:b,disabled:N,disableTransforms:B,items:_,overIndex:M,useDragOverlay:S,sortedRects:Uwe(_,f),strategy:i}),[k,b,N.draggable,N.droppable,B,_,M,f,S,i]);return gt.createElement(OU.Provider,{value:$},t)}const Kwe=e=>{let{id:t,items:r,activeIndex:n,overIndex:i}=e;return LU(r,n,i).indexOf(t)},Jwe=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:i,items:o,newIndex:u,previousItems:a,previousContainerId:f,transition:p}=e;return!p||!n||a!==o&&i===u?!1:r?!0:u!==i&&t===f},Qwe={duration:200,easing:"ease"},NU="transform",eSe=C1.Transition.toString({property:NU,duration:0,easing:"linear"}),tSe={roleDescription:"sortable"};function rSe(e){let{disabled:t,index:r,node:n,rect:i}=e;const[o,u]=ee.useState(null),a=ee.useRef(r);return wf(()=>{if(!t&&r!==a.current&&n.current){const f=i.current;if(f){const p=gv(n.current,{ignoreTransform:!0}),g={x:f.left-p.left,y:f.top-p.top,scaleX:f.width/p.width,scaleY:f.height/p.height};(g.x||g.y)&&u(g)}}r!==a.current&&(a.current=r)},[t,r,n,i]),ee.useEffect(()=>{o&&u(null)},[o]),o}function nSe(e){let{animateLayoutChanges:t=Jwe,attributes:r,disabled:n,data:i,getNewIndex:o=Kwe,id:u,strategy:a,resizeObserverConfig:f,transition:p=Qwe}=e;const{items:g,containerId:b,activeIndex:S,disabled:_,disableTransforms:P,sortedRects:k,overIndex:M,useDragOverlay:D,strategy:F}=ee.useContext(OU),B=iSe(n,_),N=g.indexOf(u),$=ee.useMemo(()=>({sortable:{containerId:b,index:N,items:g},...i}),[b,i,N,g]),V=ee.useMemo(()=>g.slice(g.indexOf(u)),[g,u]),{rect:U,node:X,isOver:Z,setNodeRef:oe}=Gwe({id:u,data:$,disabled:B.droppable,resizeObserverConfig:{updateMeasurementsFor:V,...f}}),{active:re,activatorEvent:H,activeNodeRect:ae,attributes:se,setNodeRef:de,listeners:fe,isDragging:Le,over:ye,setActivatorNodeRef:xe,transform:Se}=jwe({id:u,data:$,attributes:{...tSe,...r},disabled:B.draggable}),Re=_2e(oe,de),he=!!re,Ee=he&&!P&&G_(S)&&G_(M),we=!D&&Le,Ne=we&&Ee?Se:null,Xe=Ee?Ne??(a??F)({rects:k,activeNodeRect:ae,activeIndex:S,overIndex:M,index:N}):null,Be=G_(S)&&G_(M)?o({id:u,items:g,activeIndex:S,overIndex:M}):N,ot=re?.id,Ke=ee.useRef({activeId:ot,items:g,newIndex:Be,containerId:b}),it=g!==Ke.current.items,ke=t({active:re,containerId:b,isDragging:Le,isSorting:he,id:u,index:N,items:g,newIndex:Ke.current.newIndex,previousItems:Ke.current.items,previousContainerId:Ke.current.containerId,transition:p,wasDragging:Ke.current.activeId!=null}),Nt=rSe({disabled:!ke,index:N,node:X,rect:U});return ee.useEffect(()=>{he&&Ke.current.newIndex!==Be&&(Ke.current.newIndex=Be),b!==Ke.current.containerId&&(Ke.current.containerId=b),g!==Ke.current.items&&(Ke.current.items=g)},[he,Be,b,g]),ee.useEffect(()=>{if(ot===Ke.current.activeId)return;if(ot!=null&&Ke.current.activeId==null){Ke.current.activeId=ot;return}const $e=setTimeout(()=>{Ke.current.activeId=ot},50);return()=>clearTimeout($e)},[ot]),{active:re,activeIndex:S,attributes:se,data:$,rect:U,index:N,newIndex:Be,items:g,isOver:Z,isSorting:he,isDragging:Le,listeners:fe,node:X,overIndex:M,over:ye,setNodeRef:Re,setActivatorNodeRef:xe,setDroppableNodeRef:oe,setDraggableNodeRef:de,transform:Nt??Xe,transition:st()};function st(){if(Nt||it&&Ke.current.newIndex===N)return eSe;if(!(we&&!Gk(H)||!p)&&(he||ke))return C1.Transition.toString({...p,property:NU})}}function iSe(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(n=e?.droppable)!=null?n:t.droppable}}Da.Down,Da.Right,Da.Up,Da.Left;function _2({children:e}){const t=ee.useRef(Bu()),{attributes:r,listeners:n,setNodeRef:i,transform:o}=nSe({id:t.current}),u={transform:C1.Transform.toString(o)};return K.jsx("li",{ref:i,style:u,...r,...n,children:e})}try{_2.displayName="SortableContainer",_2.__docgenInfo={description:"",displayName:"SortableContainer",props:{}}}catch{}const aSe=Sr(xc)({padding:"4px",marginTop:"-3px"}),oSe=Sr(xc)({marginLeft:"20px"});function oh({layerComponent:e,visible:t,type:r,name:n,description:i,configurable:o,setLayerState:u,...a}){const[f,p]=ee.useState(!0),[g,b]=ee.useState(!1),[S,_]=ee.useState(!1),P=ee.useRef(!1),k=ee.useRef(t),[M,D]=ee.useState(e?.props?.paint||e?.props?.options?.paint||wj(e?.props?.type||Mx(e.props.geojson))),F=ee.useMemo(()=>t?f:!1,[t,f]);ee.useEffect(()=>{if(!u||!e?.props?.layers||F===k.current)return;k.current=F;const V={...e?.props};switch(e.type.name){case"MlWmsLayer":break;case"MlVectorTileLayer":e?.props?.layers&&!P.current&&(V.layers=e?.props?.layers.map(U=>(U.layout?U.layout.visibility=F?"visible":"none":U.layout={visibility:F?"visible":"none"},U)),console.log("setLayerState",V.layers),u(V));break}},[F,u,e]),ee.useEffect(()=>{!u||P.current||!M||e?.props?.layers||JSON.stringify(M)!==JSON.stringify(e.props?.paint)&&u({...e.props,paint:M})},[M,u,e.props?.paint]);const B=ee.useMemo(()=>{if(e&&r==="layer")switch(e.type.displayName){case"MlWmsLayer":return gt.cloneElement(e,{...e?.props,visible:F});case"MlVectorTileLayer":return gt.cloneElement(e,{...e?.props});default:case"MlGeoJsonLayer":return gt.cloneElement(e,{layout:{visibility:F?"visible":"none"},options:{...e?.props?.options,...u?{}:{paint:M}}})}return K.jsx(K.Fragment,{})},[r,e,M,F,e?.props?.layers,u]),N=ee.useMemo(()=>{if(e&&r==="layer"){if(e.props.type)return e.props.type;if(e.props.geojson)return Mx(e.props.geojson)}},[e]),$=K.jsxs(p2,{sx:{...a.listItemSx},secondaryAction:o&&Object.keys(M)?.length>0?K.jsxs(K.Fragment,{children:[a?.buttons,K.jsx(aSe,{edge:"end","aria-label":"settings",onClick:()=>{b(V=>!V)},children:K.jsx(KA,{})})]}):void 0,children:[K.jsx(eh,{children:K.jsx(th,{disabled:!t,checked:f,onClick:()=>{p(V=>!V)}})}),K.jsx(Hc,{variant:"layerlist",primary:n,secondary:i,primaryTypographyProps:{overflow:"hidden"}})]});return K.jsxs(K.Fragment,{children:[a.sortable&&a.layerId&&!e?.props?.layers&&K.jsx(_2,{children:$}),!a.sortable&&!e?.props?.layers&&$,B,!e?.props?.layers&&Object.keys(M).length>0&&o&&g&&K.jsxs(K.Fragment,{children:[a.showDeleteButton&&K.jsxs(K.Fragment,{children:[K.jsx(oSe,{edge:"end","aria-label":"delete",onClick:()=>{typeof u=="function"&&_(!0)},children:K.jsx(rb,{})}),S&&K.jsx(Zy,{open:S,onConfirm:()=>{typeof u=="function"&&(P.current=!0,u(!1),_(!1))},onCancel:()=>{_(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]}),K.jsx(h2,{paintProps:M,setPaintProps:D,layerType:N})]}),e?.props?.layers&&K.jsx(dI,{visible:f,setVisible:p,name:n,children:e?.props?.layers?.map?.((V,U)=>K.jsx(m2,{vtProps:e?.props,setVtProps:u,id:""+U,visibleMaster:F},""+U))})]})}oh.defaultProps={type:"layer",visible:!0,showDeleteButton:!1,buttons:K.jsx(K.Fragment,{})};try{oh.displayName="LayerListItem",oh.__docgenInfo={description:"",displayName:"LayerListItem",props:{layerComponent:{defaultValue:null,description:"",name:"layerComponent",required:!0,type:{name:"Element"}},visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!0,type:{name:"boolean"}},type:{defaultValue:{value:"layer"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},setLayerState:{defaultValue:null,description:"",name:"setLayerState",required:!1,type:{name:"Dispatch<any> | undefined"}},showDeleteButton:{defaultValue:{value:"false"},description:"",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},listItemSx:{defaultValue:null,description:"",name:"listItemSx",required:!1,type:{name:"SxProps | undefined"}},buttons:{defaultValue:{value:"<></>"},description:"",name:"buttons",required:!1,type:{name:"Element | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const FU=Ei(K.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),sSe=Sr("div")(()=>({display:"flex",alignItems:"center"})),lSe=56,uSe=Sr(xo)(({theme:e})=>({width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}));function EI({drawerPaperProps:e,drawerHeaderProps:t,setOpen:r,...n}){const i=H1(f=>f.breakpoints.down("sm")),[o,u]=ee.useState(!1),a=n.drawerBleeding?n.drawerBleeding:lSe;return K.jsxs(K.Fragment,{children:[i?K.jsxs(xo,{sx:{display:{xs:"flex",sm:"none"}},children:[K.jsx($7,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:`calc(50% - ${a}px)`,overflow:"visible"}}}),K.jsxs(hse,{anchor:"bottom",open:typeof n.open>"u"?o:n.open,onClose:r?()=>{r?.(!1)}:()=>{u(!1)},onOpen:r?()=>{r?.(!0)}:()=>{u(!0)},swipeAreaWidth:a,disableSwipeToOpen:!1,hideBackdrop:!0,ModalProps:{keepMounted:!0,sx:{top:"calc(90%)"}},children:[K.jsxs(Kc,{sx:{position:"absolute",top:-a,borderTopLeftRadius:8,borderTopRightRadius:8,visibility:"visible",right:0,left:0},children:[K.jsx(uSe,{}),K.jsx(ns,{variant:"h6",sx:{p:"13px"},children:n.name})]}),K.jsx(Kc,{sx:{px:"15px",pb:"15px",height:"100%",overflow:"auto",paddingTop:"20px"},children:n.children})]})]}):K.jsx(xo,{sx:{display:{xs:"none",sm:"flex"},mr:1},children:K.jsxs(ZP,{transitionDuration:0,variant:"persistent",anchor:"left",open:typeof n.open>"u"?o:n.open,PaperProps:{...e,sx:{maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"},padding:{sm:"84px 20px 20px 20px",xs:"74px 10px 10px 10px"},width:{xs:"80%",sm:"60%",md:"350px",lg:"350px"},boxSizing:"border-box",...e?.sx}},sx:{flexGrow:1,zIndex:105,position:"absolute",bottom:0,display:"flex",flexDirection:"column",maxWidth:{lg:"30%",md:"40%",sm:"50%",xs:"78%"},...o?{}:{left:i?"-90vw":"-20vw"}},...n,children:[K.jsxs(sSe,{...t,children:[K.jsx(ns,{variant:"h6",children:n.name}),K.jsx(xc,{onClick:r?()=>{r?.(!1)}:()=>{u(!1)},sx:{position:"absolute",right:"20px"},children:K.jsx(FU,{})})]}),K.jsx(xo,{children:n.children})]})}),";"]})}try{EI.displayName="Sidebar",EI.__docgenInfo={description:"",displayName:"Sidebar",props:{drawerPaperProps:{defaultValue:null,description:"",name:"drawerPaperProps",required:!1,type:{name:"PaperProps | undefined"}},drawerHeaderProps:{defaultValue:null,description:"",name:"drawerHeaderProps",required:!1,type:{name:"Headers | undefined"}},children:{defaultValue:null,description:"The content of the component.",name:"children",required:!1,type:{name:"ReactNode"}},open:{defaultValue:{value:"false"},description:"If `true`, the component is shown.",name:"open",required:!1,type:{name:"boolean | undefined"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!1,type:{name:"((val: boolean) => void) | undefined"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string | undefined"}},drawerBleeding:{defaultValue:null,description:"",name:"drawerBleeding",required:!1,type:{name:"number | undefined"}},component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | undefined"}},slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<DrawerSlots> | undefined"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<ModalProps, keyof IntrinsicElements>, DrawerRootSlotPropsOverrides, DrawerOwnerState> | undefined; backdrop?: SlotProps<...> | undefined; docked?: SlotProps<...> | undefined; paper?: SlotProps<...> | undefined; transition?: SlotProps<...> | undefined; } | undefined"}}}}}catch{}const r9=e=>{const[t,r]=ee.useState(!0),[n,i]=ee.useState(e.measureType),[o,u]=ee.useState(),a=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[f,p]=ee.useState(),[g,b]=ee.useState("kilometers"),[S,_]=ee.useState([]),[P,k]=ee.useState(!1),M=()=>{g==="kilometers"&&b("miles"),g==="miles"&&b("kilometers")},D=B=>{_(N=>{const $=[...N];return $.splice(B,1),u(void 0),$})},F=B=>{p({measure:B.value,unit:B.unit,geojson:B.geojson})};return ee.useEffect(()=>{P&&(k(!1),f&&_(B=>{const N=[...B];return N.push(f),N}))},[P]),ee.useEffect(()=>{p(void 0)},[g]),K.jsx(K.Fragment,{children:K.jsxs(EI,{open:t,setOpen:r,name:"Multi Measure Tool",children:[K.jsxs(xo,{sx:{flexGrow:1},children:[K.jsx("br",{}),K.jsxs(ih,{container:!0,spacing:4,justifyContent:"flex-start",children:[K.jsx(ih,{size:3,children:K.jsx(ah,{title:"Measure Area",children:K.jsx($i,{variant:"outlined",sx:{backgroundColor:n==="polygon"?B=>B.palette.GPS.GPSActiveColor:B=>B.palette.GPS.GPSActiveBackgroundColor,color:n==="polygon"?B=>B.palette.GPS.GPSActiveBackgroundColor:B=>B.palette.GPS.GPSActiveColor},onClick:()=>{i("polygon"),p(void 0),k(!0)},children:K.jsx(fG,{})})})}),K.jsx(ih,{size:3,children:K.jsx(ah,{title:"Measure Distance",children:K.jsx($i,{variant:"outlined",sx:{backgroundColor:n==="line"?B=>B.palette.GPS.GPSActiveColor:B=>B.palette.GPS.GPSActiveBackgroundColor,color:n==="line"?B=>B.palette.GPS.GPSActiveBackgroundColor:B=>B.palette.GPS.GPSActiveColor},onClick:()=>{i("line"),p(void 0),k(!0)},children:K.jsx(dG,{})})})})]})]}),K.jsx("br",{}),K.jsx(ih,{size:4,children:K.jsxs(vc,{children:[K.jsx(np,{id:"unit-select-label",children:"Unit"}),K.jsxs(ip,{labelId:"unit-select-label",id:"unit-select",value:g,label:"Unit",onChange:B=>{b(B.target.value),p(void 0),k(!0)},children:[K.jsx(pm,{value:"kilometers",children:"Kilometers"}),K.jsx(pm,{value:"miles",children:"Miles"})]})]})}),K.jsx("br",{}),!P&&K.jsx(uI,{measureType:n,unit:g,onChange:F,...M,onFinish:()=>{k(!0)}}),K.jsxs(cI,{children:[S?.map((B,N)=>K.jsx(K.Fragment,{children:K.jsxs(xo,{sx:{display:"flex",flexDirection:"column"},children:[K.jsx("br",{}),K.jsx(xo,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"},marginTop:"25px"},onMouseOver:()=>{u(B.geojson)},onMouseLeave:()=>{u(void 0)},children:K.jsxs(ee.Fragment,{children:[K.jsx(oh,{layerComponent:K.jsx(Zu,{mapId:e.mapId,geojson:B.geojson}),visible:!0,configurable:!0,type:"layer",name:B.geojson.geometry?.type==="LineString"?B.measure.toFixed(3).toString()+" "+B.unit:B.measure.toFixed(3).toString()+" "+B.unit+""},B.measure),K.jsx(ah,{title:"Delete",children:K.jsxs($i,{onClick:()=>D(N),children:[" ",K.jsx(rb,{})," "]})}),K.jsx(ah,{title:"Center Location",children:K.jsx($i,{onClick:()=>{a?.map?.map.setCenter(B.geojson.geometry.type==="Point"?B.geojson.geometry.coordinates:YA(B.geojson).geometry.coordinates)},children:K.jsx(ZA,{})})})]},B.measure+"-"+N)})]},B.measure)})),o&&K.jsx(Zu,{mapId:e.mapId,geojson:{type:"FeatureCollection",features:[o]},layerId:"highlightBorder",defaultPaintOverrides:{circle:{"circle-color":"#dd9900","circle-opacity":.4,"circle-radius":10},line:{"line-color":"#dd9900","line-opacity":.4,"line-width":10},fill:{"fill-color":"#dd9900","fill-opacity":.4}}})]})]})})};try{r9.displayName="MlMultiMeasureTool",r9.__docgenInfo={description:"",displayName:"MlMultiMeasureTool",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:null,description:`Style attribute for the button-style
https://mui.com/system/getting-started/the-sx-prop/`,name:"buttonStyleOverride",required:!1,type:{name:"SxProps | undefined"}},measureType:{defaultValue:null,description:'String that specify if the Tool measures an area ("polygon") or length ("line")',name:"measureType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"line"'},{value:'"polygon"'}]}},multiType:{defaultValue:null,description:"Boolean which decides if the user can switch between measure modes",name:"multiType",required:!1,type:{name:"boolean | undefined"}},unit:{defaultValue:null,description:"String that dictates which unit of measurement is used",name:"unit",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"meters"'},{value:'"metres"'},{value:'"millimeters"'},{value:'"millimetres"'},{value:'"centimeters"'},{value:'"centimetres"'},{value:'"kilometers"'},{value:'"kilometres"'},{value:'"miles"'},{value:'"nauticalmiles"'},{value:'"inches"'},{value:'"yards"'},{value:'"feet"'},{value:'"radians"'},{value:'"degrees"'}]}},onChange:{defaultValue:null,description:`Callback function that is called each time measurment geometry within has changed within MlMeasureTool.
First parameter is the new GeoJson feature.`,name:"onChange",required:!1,type:{name:"((options: { value: number; unit?: string | undefined; geojson: Feature<Geometry, GeoJsonProperties>; geometries?: [] | undefined; }) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called by the end of drawing geometries.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}const cSe=Ei(K.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),dSe=Ei(K.jsx("path",{d:"M19 13H5v-2h14z"})),TI=({className:e="",title:t,onClick:r,style:n})=>K.jsxs("svg",{width:"52",height:"53",viewBox:"0 0 52 53",fill:"none",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,children:[t&&K.jsx("title",{children:t}),K.jsx("circle",{cx:"26.0001",cy:"26.1843",r:"24",fill:"white",stroke:"#009EE0",strokeWidth:"2"}),K.jsx("path",{d:"M26.4915 7.59161C26.3524 8.07338 25.6698 8.07338 25.5307 7.59161L24.2998 3.3276C24.2075 3.0079 24.4474 2.68893 24.7802 2.68893H27.242C27.5748 2.68893 27.8147 3.0079 27.7224 3.3276L26.4915 7.59161Z",fill:"#009EE0"}),K.jsx("path",{d:"M25.5085 44.7598C25.6476 44.278 26.3302 44.278 26.4693 44.7598L27.7002 49.0238C27.7925 49.3435 27.5526 49.6625 27.2198 49.6625H24.758C24.4252 49.6625 24.1853 49.3435 24.2776 49.0238L25.5085 44.7598Z",fill:"#009EE0"}),K.jsx("path",{d:"M44.6641 26.4915C44.1823 26.3524 44.1823 25.6698 44.6641 25.5307L48.9281 24.2998C49.2478 24.2075 49.5668 24.4474 49.5668 24.7802V27.242C49.5668 27.5747 49.2478 27.8147 48.9281 27.7224L44.6641 26.4915Z",fill:"#009EE0"}),K.jsx("path",{d:"M7.3959 25.6085C7.87766 25.7476 7.87766 26.4302 7.3959 26.5693L3.13189 27.8002C2.81218 27.8925 2.49321 27.6526 2.49321 27.3198L2.49321 24.858C2.49321 24.5253 2.81218 24.2853 3.13189 24.3776L7.3959 25.6085Z",fill:"#009EE0"})]});try{TI.displayName="CompassBackground",TI.__docgenInfo={description:"",displayName:"CompassBackground",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const II=({className:e="",title:t,onClick:r,style:n})=>K.jsxs("svg",{width:"10",height:"40",viewBox:"0 0 10 40",fill:"none",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,children:[t&&K.jsx("title",{children:t}),K.jsxs("g",{transform:"translate(0.67544,-1.25e-5)",children:[K.jsx("path",{d:"m 3.34715,4.52028 c 0.22737,-1.05154 1.72745,-1.05154 1.95482,0 L 8.64912,20 H 0 Z",fill:"#cf003d"}),K.jsx("path",{d:"m 3.34715,35.4797 c 0.22737,1.0516 1.72745,1.0516 1.95482,0 L 8.64912,20 H 0 Z",fill:"#d3dcf0"})]})]});try{II.displayName="CompassNeedle",II.__docgenInfo={description:"",displayName:"CompassNeedle",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const fSe=Sr(xo)(({theme:e})=>({zIndex:1e3,cursor:"pointer",transform:"scale(1)",[e.breakpoints.down("md")]:{transform:"scale(1.6)"}})),hSe=Sr(xo)(({theme:e})=>({position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",[e.breakpoints.down("md")]:{right:"0px",top:"-52px"},circle:{fill:e.palette.compass.compColor,stroke:e.palette.compass.compStroke},path:{fill:e.palette.compass.compStroke},"&:hover circle":{fill:e.palette.compass.compHover}})),pSe=Sr(xo)(({theme:e})=>({display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}})),PI=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=ee.useState(0),i=()=>{t.map?.map?.getBearing&&n(Math.round(t.map.map.getBearing()))};ee.useEffect(()=>{if(t.map)return t.map.on("rotate",i,t.componentId),i(),()=>{t.map?.map.off("rotate",i)}},[t.map,e.mapId]);const o=()=>{r==0?t.map?.map.setBearing(-90):r==-90?t.map?.map.setBearing(180):r==180?t.map?.map.setBearing(90):t.map?.map.setBearing(0)};return K.jsx(K.Fragment,{children:K.jsx(fSe,{sx:{...e.style},children:K.jsxs(hSe,{onClick:o,sx:{...e.backgroundStyle},children:[K.jsx(TI,{style:{position:"absolute",top:0,left:0}}),K.jsx(pSe,{onClick:o,sx:{...e.needleStyle},children:K.jsx(II,{style:{transform:"rotate("+(r>0?"-"+r:-1*r)+"deg)"}})})]})})})};try{PI.displayName="MlNavigationCompass",PI.__docgenInfo={description:`Navigation component that displays a compass component which indicates the current orientation of the map it is registered for and offers controls to turn the bearing 90 left/right or reset north to point up.

All style props are applied using`,displayName:"MlNavigationCompass",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapHook",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"Style object to adjust css definitions of the component.",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},backgroundStyle:{defaultValue:null,description:"Style object to adjust css definitions of the background.",name:"backgroundStyle",required:!1,type:{name:"CSSProperties | undefined"}},needleStyle:{defaultValue:null,description:"Style object to adjust css definitions of the compass needle.",name:"needleStyle",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}const mSe=Ei(K.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),gSe=Ei(K.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),ySe=Sr($i)(({theme:e})=>({zIndex:1e3,color:e.palette.navigation.buttonColor,transform:"scale(1)"})),AI=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=ee.useState(e.mode||"mercator");ee.useEffect(()=>{t.map?.map.getProjection?.()?.type!==r&&t.map?.setProjection({type:r})},[t.map]);const i=()=>{if(!t.map)return;const o=r==="globe"?"mercator":"globe";t.map.setProjection({type:o}),n(o)};return K.jsx(K.Fragment,{children:K.jsx(ySe,{variant:"navtools",onClick:i,style:e.style,children:r==="globe"?K.jsx(gSe,{"data-testid":"PublicIcon",sx:{fontSize:{xs:"1.4em",md:"1em"}}}):K.jsx(mSe,{"data-testid":"MapIcon",sx:{fontSize:{xs:"1.4em",md:"1em"}}})})})};try{AI.displayName="MlGlobeButton",AI.__docgenInfo={description:"",displayName:"MlGlobeButton",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"Style object to adjust css definitions of the component.",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},mode:{defaultValue:null,description:"Initial projection mode of the map.",name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"globe"'},{value:'"mercator"'}]}}}}}catch{}const n9=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=ee.useState(0),i=H1(p=>p.breakpoints.down("md")),o=Su();ee.useEffect(()=>{t.map&&(t.map.on("pitchend",()=>{t.map&&n(t.map.getPitch())},t.componentId),n(t.map.getPitch()))},[t.map,e.mapId]);const u=ee.useCallback(()=>{t.map&&t.map.easeTo({zoom:t.map.getZoom()+.5})},[t.map]),a=ee.useCallback(()=>{t.map&&t.map.easeTo({zoom:t.map.getZoom()-.5})},[t.map]),f=ee.useCallback(()=>{if(!t.map)return;n(t.map.getPitch());const p=t.map.getPitch()!==0?0:60;t.map.easeTo({pitch:p})},[t.map]);return K.jsxs(xo,{sx:{zIndex:501,position:"absolute",display:"flex",flexDirection:"column",right:i?"15px":"25px",bottom:i?"20px":"40px",...i?{margin:"80px 10px 50px 10px"}:{marginTop:"50px"},...e.sx},children:[K.jsx(PI,{}),e.show3DButton&&K.jsx($i,{variant:"navtools",onClick:f,sx:{color:p=>p.palette.navigation.buttonColor},children:r<29?"2D":"3D"}),e.showGlobeButton&&K.jsx(AI,{}),e.showFollowGpsButton&&K.jsx(lI,{}),e.showCenterLocationButton&&K.jsx(p3,{}),K.jsx(c3,{orientation:"vertical",sx:{border:"none",Button:{minWidth:"20px !important",color:o.palette.navigation.buttonColor},"Button:hover":{border:"none"}},children:e.showZoomButtons&&K.jsxs(K.Fragment,{children:[K.jsx($i,{variant:"navtools",onClick:u,sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0,position:"relative"},children:K.jsx(cSe,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})}),K.jsx(Kc,{sx:{backgroundColor:"#fff"},children:K.jsx(d3,{sx:{marginLeft:"6px",marginRight:"6px"}})}),K.jsx($i,{variant:"navtools",onClick:a,sx:{margin:0,borderTopLeftRadius:0,borderTopRightRadius:0},children:K.jsx(dSe,{sx:{fontSize:{xs:"1.4em",md:"1em"}}})})]})}),e.children&&gt.cloneElement(e.children,{})]})};try{n9.displayName="MlNavigationTools",n9.__docgenInfo={description:"",displayName:"MlNavigationTools",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},show3DButton:{defaultValue:null,description:"Show 3D button",name:"show3DButton",required:!1,type:{name:"boolean | undefined"}},showGlobeButton:{defaultValue:null,description:"Show global button",name:"showGlobeButton",required:!1,type:{name:"boolean | undefined"}},showZoomButtons:{defaultValue:null,description:"Show zoom button",name:"showZoomButtons",required:!1,type:{name:"boolean | undefined"}},showFollowGpsButton:{defaultValue:null,description:"Show follow GPS button",name:"showFollowGpsButton",required:!1,type:{name:"boolean | undefined"}},showCenterLocationButton:{defaultValue:null,description:"Show center on current position button",name:"showCenterLocationButton",required:!1,type:{name:"boolean | undefined"}},children:{defaultValue:null,description:"Additional JSX Elements to be rendered below MlNavigationTools buttons",name:"children",required:!1,type:{name:"Element | undefined"}},sx:{defaultValue:null,description:"Style attribute for NavigationTools container",name:"sx",required:!1,type:{name:"SxProps | undefined"}},mediaIsMobile:{defaultValue:null,description:"Style attribute for NavigationTools container",name:"mediaIsMobile",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const x2=e=>(ph({idPrefix:"MlLayer-",layerId:e.layerId,mapId:e.mapId,geojson:e.geojson||void 0,options:{type:"background",paint:{...e?.options?.type&&e.options.type!=="background"?{}:{"background-color":"rgba(0,0,0,0)"}},...e.options},insertBeforeLayer:e.insertBeforeLayer}),K.jsx(K.Fragment,{}));try{x2.displayName="MlLayer",x2.__docgenInfo={description:"Basic layer component that create a layer in a MapLibre-gl instance and keeps it updated according to it attribute configuration.",displayName:"MlLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}}}}}catch{}const i9=e=>{const t=ee.useRef(0),r=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[n,i]=ee.useState(0),[o,u]=ee.useState(""),a=ee.useCallback(()=>{if(!r.map||r.map?.map.getZoom()===t.current)return;t.current=r.map?.map.getZoom();const b=e.maxWidth||100,S=r.map.map._container.clientHeight/2,_=r.map.map.unproject([0,S]),P=r.map.map.unproject([b,S]),k=_.distanceTo(P);if(e.unit==="imperial"){const M=3.2808*k;if(M>5280){const D=M/5280;f(b,D,r.map.map._getUIString("ScaleControl.Miles"))}else f(b,M,r.map.map._getUIString("ScaleControl.Feet"))}else if(e.unit==="nautical"){const M=k/1852;f(b,M,r.map.map._getUIString("ScaleControl.NauticalMiles"))}else k>=1e3?f(b,k/1e3,r.map.map._getUIString("ScaleControl.Kilometers")):f(b,k,r.map.map._getUIString("ScaleControl.Meters"))},[r.map,e.unit,e.maxWidth]);ee.useEffect(()=>{if(!r.map)return;const b=a;return r.map.on("move",b,r.componentId),a(),()=>{r.map?.map.off("move",b)}},[r.map,a]);const f=(b,S,_)=>{const P=g(S),k=P/S;i(b*k),u(P+"&nbsp;"+_)},p=b=>{const S=Math.pow(10,Math.ceil(-Math.log(b)/Math.LN10));return Math.round(b*S)/S},g=b=>{const S=Math.pow(10,`${Math.floor(b)}`.length-1);let _=b/S;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:_>=1?1:p(_),S*_};return K.jsx(K.Fragment,{children:K.jsx("div",{style:{backgroundColor:"hsla(0,0%,100%,.75)",fontSize:"10px",border:"2px solid #333",borderTop:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box",width:n+"px",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:o}})})};try{i9.displayName="MlScaleReference",i9.__docgenInfo={description:"",displayName:"MlScaleReference",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number | undefined"}},unit:{defaultValue:null,description:"",name:"unit",required:!1,type:{name:"string | undefined"}}}}}catch{}var xT,a9;function vSe(){if(a9)return xT;a9=1;function e(r,n){var i=r.getCenter(),o=r.getZoom(),u=r.getBearing(),a=r.getPitch();n.forEach(function(f){f.jumpTo({center:i,zoom:o,bearing:u,pitch:a})})}function t(){var r,n=arguments.length;if(n===1)r=arguments[0];else{r=[];for(var i=0;i<n;i++)r.push(arguments[i])}var o=[];r.forEach(function(p,g){o[g]=f.bind(null,p,r.filter(function(b,S){return S!==g}))});function u(){r.forEach(function(p,g){p.on("move",o[g])})}function a(){r.forEach(function(p,g){p.off("move",o[g])})}function f(p,g){a(),e(p,g),u()}return u(),function(){a(),o=[],r=[]}}return xT=t,xT}var bSe=vSe();const BU=Sf(bSe),o9=e=>{const t=ee.useContext(vp),r=ee.useRef(!1),n=ee.useRef(()=>{}),[i,o]=ee.useState(50),u=ee.useRef(50),[a,f]=ee.useState(50),p=ee.useRef(50),g=ee.useMemo(()=>e.magnifierRadius||200,[e.magnifierRadius]),b=ee.useCallback(()=>!(!e.map1Id||!e.map2Id||!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[e,t]),S=ee.useRef(()=>{b()&&P({clientX:u.current,clientY:p.current})});ee.useEffect(()=>{window.addEventListener("resize",S.current);const B=S.current;return()=>{window.removeEventListener("resize",B),n.current()}},[]);const _=ee.useCallback(B=>{if(!b())return;const N=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let $=typeof B.touches<"u"&&typeof B.touches[0]<"u"?B.touches[0].clientX:0,V=typeof B.touches<"u"&&typeof B.touches[0]<"u"?B.touches[0].clientY:0;$-=N.x,V-=N.y;const U=parseFloat(($/N.width*100).toFixed(2)),X=parseFloat((V/N.height*100).toFixed(2));(u.current!==U||p.current!==X)&&(o(U),u.current=U,f(X),p.current=X,t.maps[e.map2Id].getContainer().style.clipPath=`circle(${g}px at `+u.current*N.width/100+"px "+p.current*N.height/100+"px)")},[t,b,e,g]),P=ee.useCallback(B=>{if(!b())return;const N=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let $=B.clientX,V=B.clientY;$-=N.x,V-=N.y;const U=parseFloat(($/N.width*100).toFixed(2)),X=parseFloat((V/N.height*100).toFixed(2));(u.current!==U||p.current!==X)&&(o(U),u.current=U,f(X),p.current=X,t.maps[e.map2Id].getContainer().style.clipPath=`circle(${g}px at `+u.current*N.width/100+"px "+p.current*N.height/100+"px)")},[t,b,e,g]);ee.useEffect(()=>{!b()||r.current||(r.current=!0,n.current=BU(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),P({clientX:u.current,clientY:p.current}),P({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2,clientY:t.maps[e.map1Id].getCanvas().clientHeight/2}))},[t.mapIds,t,b,e,P]);const k=B=>{B.nativeEvent instanceof TouchEvent?(document.addEventListener("touchmove",_),document.addEventListener("touchend",M)):(document.addEventListener("mousemove",P),document.addEventListener("mouseup",D))},M=()=>{document.removeEventListener("touchmove",_),document.removeEventListener("touchend",M)},D=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",D)},F=B=>{const N=new WheelEvent(B.type,B);t.map?.map.getCanvas().dispatchEvent(N)};return K.jsx("div",{style:{position:"absolute",left:i+"%",top:a+"%",borderRadius:"50%",width:g*2-2+"px",height:g*2-2+"px",background:"rgba(0,0,0,0)",border:"2px solid #fafafa",boxShadow:"1px 2px 2px rgba(19, 19, 19, .5), inset 1px 1px 1px rgba(19, 19, 19, .2)",cursor:"pointer",zIndex:"110",marginLeft:g*-1-1+"px",marginTop:g*-1-1+"px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none",...e.magnifierStyle},onTouchStart:k,onMouseDown:k,onWheel:F})};try{o9.displayName="MlLayerMagnify",o9.__docgenInfo={description:`
Hides the MapLibreMap referenced by props.map2Id except for the "magnifier"-circle that reveals
the map and can be dragged around on top of the MapLibreMap referenced by props.map1Id`,displayName:"MlLayerMagnify",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance",name:"map2Id",required:!0,type:{name:"string"}},magnifierRadius:{defaultValue:null,description:'Size of the "magnifier"-circle',name:"magnifierRadius",required:!1,type:{name:"number | undefined"}},magnifierStyle:{defaultValue:null,description:"object (React.CSSProperties) that is added to the magnifier default style",name:"magnifierStyle",required:!0,type:{name:"CSSProperties | undefined"}}}}}catch{}const kI=({className:e="",title:t,onClick:r,style:n,color:i})=>K.jsxs("svg",{viewBox:"0 0 47 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,onClick:r,role:t?"img":"presentation","aria-hidden":!t,style:n,color:i,children:[K.jsx("path",{d:"M29.5 21.25L35.75 15L29.5 8.75V21.25Z",fill:"#009EE0"}),K.jsx("path",{d:"M17.5 8.75L11.25 15L17.5 21.25V8.75Z",fill:"#009EE0"})]});try{kI.displayName="SwipeIcon",kI.__docgenInfo={description:"",displayName:"SwipeIcon",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void) | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | undefined"}}}}}catch{}const s9=e=>{const t=ee.useContext(vp),r=ee.useRef(!1),[n,i]=ee.useState(50),o=ee.useRef(0),u=ee.useRef(()=>{}),a=ee.useCallback(()=>!(!e.map1Id||!e.map2Id||!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[t,e.map1Id,e.map2Id]),f=()=>{u.current()},p=ee.useCallback(k=>{if(!a())return;const M=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let D=typeof k.touches<"u"&&typeof k.touches[0]<"u"?k.touches[0].clientX:0;D-=M.x;const F=parseFloat((D/M.width*100).toFixed(2));if(o.current!==F){i(F),o.current=F;const B="rect(0, "+o.current*M.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=B}},[t,a,e.map1Id,e.map2Id]),g=ee.useCallback(k=>{if(!a())return;const M=t.maps[e.map1Id].getCanvas().getBoundingClientRect();let D=k.clientX;D-=M.x;const F=parseFloat((D/M.width*100).toFixed(2));if(o.current!==F){i(F),o.current=F;const B="rect(0, "+o.current*M.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=B}},[t,a,e.map1Id,e.map2Id]);ee.useEffect(()=>f,[]),ee.useEffect(()=>{!a()||r.current||(r.current=!0,u.current=BU(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),g({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2}))},[t.mapIds,t,e,g,a]);const b=k=>{window?.TouchEvent&&k.nativeEvent instanceof window.TouchEvent?(document.addEventListener("touchmove",p),document.addEventListener("touchend",S)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",_))},S=()=>{document.removeEventListener("touchmove",p),document.removeEventListener("touchend",S)},_=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",_)};function P(){const k=parseFloat(t.maps[e.map2Id].getContainer().style.clip.split(",")[1].replace("px","")),M=t.maps[e.map1Id].getCanvas().getBoundingClientRect().width;if(k<M){const D=parseFloat((k/M*100).toFixed(2));i(D)}else{const D="rect(0, "+M/2+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=D,i(50)}}return ee.useEffect(()=>(window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P)}),[t]),K.jsx("div",{style:{position:"absolute",left:n+"%",top:"50%",borderRadius:"50%",width:"65px",height:"65px",background:"rgba(234, 235, 241, 0.75)",border:"2px solid rgba(0, 158, 224, 0.75)",cursor:"pointer",zIndex:"110",marginLeft:"-35px",marginTop:"-50px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none",...e.buttonStyle},onTouchStart:b,onMouseDown:b,children:K.jsx(kI,{color:"#0066ff",style:{width:"65px",height:"65px",justifyContent:"center",zIndex:1100}})})};try{s9.displayName="MlLayerSwipe",s9.__docgenInfo={description:"creates a split view of 2 synchronised maplibre instances",displayName:"MlLayerSwipe",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance.",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance.",name:"map2Id",required:!0,type:{name:"string"}},buttonStyle:{defaultValue:null,description:"object (React.CSSProperties) that is added to the button default style",name:"buttonStyle",required:!0,type:{name:"CSSProperties | undefined"}}}}}catch{}const zU=function(e,t,r,n,i,o,u,a,f){if(typeof n.current[o.current]<"u"){const p=o.current+1===n.current.length?e.geojson:Wl([...i.current,...n.current[o.current].geometry.coordinates]);f(p),typeof e.onTransitionFrame=="function"&&e.onTransitionFrame(p),o.current++,r.current&&o.current<n.current.length?a.current=setTimeout(()=>zU(...arguments),u):(typeof e.onTransitionEnd=="function"&&e.onTransitionEnd(e.geojson),r.current=!1)}},_Se=(e,t,r,n,i,o,u,a,f,p)=>{const g=[],b=[];let S=[],_=[];t.current=[];const P=i.current||{geometry:{type:"LineString",coordinates:[]},properties:{},type:"Feature"},k=e.geojson;let M=k,D=P,F=!1;if(typeof M.geometry>"u"&&typeof D.geometry<"u"&&D.geometry.coordinates.length>1)M=Wl(D.geometry.coordinates.slice(0,2));else if(typeof D.geometry>"u"&&typeof M.geometry<"u"&&M.geometry.coordinates.length>1)D=Wl(M.geometry.coordinates.slice(0,2));else if(typeof D.geometry>"u"&&typeof M.geometry>"u")return;if(M.geometry.coordinates.length<D.geometry.coordinates.length&&(M=P,D=k,F=!0),M&&D)for(let se=0,de=M.geometry.coordinates.length;se<de;se++)typeof D.geometry.coordinates[se]<"u"&&M.geometry.coordinates[se][0]===D.geometry.coordinates[se][0]&&M.geometry.coordinates[se][1]===D.geometry.coordinates[se][1]?t.current.push(M.geometry.coordinates[se]):(typeof M.geometry.coordinates[se]<"u"&&b.push(M.geometry.coordinates[se]),typeof D.geometry.coordinates[se]<"u"&&g.push(D.geometry.coordinates[se]));if(F?(S=g,_=b):(S=b,_=g),S.length<2&&_<2)return;const B=e.transitionTime/o,N=_.length>1?Math.round(b1(Wl(_))):0,$=S.length>1?Math.round(b1(Wl(S))):0,V=$+N,U=N/V,X=Math.round(B*U),Z=Math.round(N/X*100)/100,oe=$/V,re=Math.round(B*oe),H=Math.round($/re*100)/100;let ae;ae=[...l9(_,Z,X)],ae.reverse(),ae=[...ae,...l9(S,H,re)],ae.push(k),r.current=ae,u.current=1,n.current=!0,f.current=setTimeout(()=>zU(e,a,n,r,t,u,o,f,p),o)},l9=(e,t,r)=>{const n=[];if(e.length>1){const i=Gme(Wl(e),t);let o=i.features[0];for(let u=0;u<r&&(n.push(o),typeof i.features[u]<"u");u++)o=Wl([...o.geometry.coordinates,...i.features[u].geometry.coordinates])}return n},xSe=50,u9=e=>{const{geojson:t,...r}=e,n=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),i=ee.useRef(!1),o=ee.useRef(null),u=ee.useRef(!1),a=ee.useRef(void 0),f=ee.useRef(!1),p=ee.useRef([]),g=ee.useRef([]),[b,S]=ee.useState(yh([]));ee.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]);const _=ee.useCallback(()=>{_Se(e,g,p,u,o,xSe,f,n.map,a,S)},[e,n.map]);ee.useEffect(()=>{!n.map||!i.current||(typeof e.transitionTime<"u"&&e.type==="line"&&o.current&&(u.current=!1,f.current=!1,p.current=[],g.current=[],_()),e.geojson&&(o.current=e.geojson))},[n.map,_,e]);const P=ee.useCallback(()=>{e.type==="line"&&typeof e.transitionTime<"u"&&e.transitionTime&&typeof e.geojson<"u"&&JSON.stringify(o.current)!==JSON.stringify(e.geojson)&&(_(),o.current=e.geojson)},[e,_]);return ee.useEffect(()=>{!n.mapIsReady||!e.geojson||(i.current=!0,P())},[n.mapIsReady,P,e]),K.jsx(K.Fragment,{children:K.jsx(Zu,{...r,geojson:b})})};try{u9.displayName="MlTransitionGeoJsonLayer",u9.__docgenInfo={description:'Adds source and layer of types "line", "fill" or "circle" to display GeoJSON data on the map.',displayName:"MlTransitionGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the new layer and source that are added to the MapLibre instance",name:"layerId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!1,type:{name:"Feature<Geometry, GeoJsonProperties> | FeatureCollection<Geometry, GeoJsonProperties> | undefined"}},type:{defaultValue:null,description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"symbol"'},{value:'"fill"'},{value:'"line"'},{value:'"circle"'},{value:'"heatmap"'},{value:'"fill-extrusion"'},{value:'"hillshade"'},{value:'"color-relief"'},{value:'"background"'}]}},paint:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 9 more ...; "fill-pattern-transition"?: TransitionSpecification | undefined; } | ... 8 more ... | undefined'}},layout:{defaultValue:null,description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`,name:"layout",required:!1,type:{name:'{ "fill-sort-key"?: DataDrivenPropertyValueSpecification<number> | undefined; visibility?: VisibilitySpecification | undefined; } | ... 9 more ... | undefined'}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!1,type:{name:'{ circle?: { "circle-radius"?: DataDrivenPropertyValueSpecification<number> | undefined; "circle-radius-transition"?: TransitionSpecification | undefined; ... 16 more ...; "circle-stroke-opacity-transition"?: TransitionSpecification | undefined; } | undefined; fill?: { ...; } | undefined; line?: { ...; } | undefined...'}},labelProp:{defaultValue:null,description:"Property name in the GeoJSON object to be used as a label.",name:"labelProp",required:!1,type:{name:"string | undefined"}},labelOptions:{defaultValue:null,description:"Label configuration options.",name:"labelOptions",required:!1,type:{name:"Partial<LayerSpecification & { source?: string | GeoJSONSourceSpecification | undefined; id?: string | undefined; filter?: FilterSpecification | undefined; }> | undefined"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},transitionTime:{defaultValue:null,description:"",name:"transitionTime",required:!1,type:{name:"number | undefined"}}}}}catch{}const wSe=(e="top")=>{switch(e){case"bottom":return"translate(-50%, 0%)";case"left":return"translate(-100%, -50%)";case"right":return"translate(0%, -50%)";case"top-left":return"translate(-100%, -100%)";case"top-right":return"translate(0%, -100%)";case"bottom-left":return"translate(-100%, 0%)";case"bottom-right":return"translate(0%, 0%)";default:case"top":return"translate(-50%, -100%)"}};function SSe(e,t,r){const n=parseInt(String(r?.width||14),10),i=parseInt(String(r?.height||14),10),o={};switch(e){case"bottom":o.marginTop=`${t}px`;break;case"left":o.marginLeft=`-${t}px`;break;case"right":o.marginLeft=`${n+t}px`;break;case"top-left":o.marginTop=`-${i+t}px`,o.marginLeft=`-${t}px`;break;case"top-right":o.marginTop=`-${i+t}px`,o.marginLeft=`${n+t}px`;break;case"bottom-left":o.marginTop=`${t}px`,o.marginLeft=`-${t}px`;break;case"bottom-right":o.marginTop=`${t}px`,o.marginLeft=`${n+t}px`;break;case"top":default:o.marginTop=`-${i+t}px`;break}return o}const MI=({passEventsThrough:e=!0,contentOffset:t=5,...r})=>{const n=ha({mapId:r.mapId,waitForLayer:r.insertBeforeLayer}),[i,o]=ee.useState(null),u=ee.useRef(null),a=ee.useRef(null);ee.useEffect(()=>{if(!n.map)return;u.current=document.createElement("div");const g={...{width:"12px",height:"12px",background:"linear-gradient(135deg, rgb(186, 208, 218) 0%, rgb(96, 209, 253) 100%)",border:"1px solid rgba(255, 255, 255, 0.7)",boxShadow:"0 2px 6px rgba(90, 0, 0, 0.2), 0 0 0 2px rgba(240, 147, 251, 0.2)",borderRadius:"50%"},...r.markerStyle},b=new KT.Marker({element:u.current,anchor:"center"}).setLngLat([r.lng,r.lat]).addTo(n.map.map);o(b);const S=document.createElement("div");return Object.entries(g).forEach(([_,P])=>{S.style.setProperty(_.replace(/([A-Z])/g,"-$1").toLowerCase(),String(P))}),u.current.appendChild(S),()=>{S.remove(),b.remove(),u.current?.remove()}},[n.map,r.lng,r.lat,r.markerStyle,r.anchor]),ee.useEffect(()=>{i&&i.setLngLat([r.lng,r.lat])},[i,r.lng,r.lat]);function f(){const p=a.current?.contentWindow?.document;if(p&&a.current?.parentElement){const g=p.documentElement.scrollHeight;a.current.parentElement.style.height=`${g}px`}}return u.current&&rh.createPortal(K.jsx(xo,{sx:{position:"absolute",display:"flex",width:"300px",maxHeight:"500px",opacity:e?1:.7,zIndex:-1,transform:wSe(r.anchor),...SSe(r.anchor,t,r.markerStyle),pointerEvents:e?"none":"auto","&:hover":{opacity:1},...r.containerStyle},children:K.jsx("iframe",{ref:a,onLoad:f,style:{width:"100%",borderStyle:"none",...r.iframeStyle},srcDoc:`<div>
	<style>
		body {
			${Object.entries(r.iframeBodyStyle||{}).map(([p,g])=>`${p.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${g};`).join(" ")}
		}
	</style>
	${r.content||""}
</div>`,sandbox:"allow-same-origin allow-popups-to-escape-sandbox allow-scripts",title:n.componentId})}),u.current)};try{MI.displayName="MlMarker",MI.__docgenInfo={description:"",displayName:"MlMarker",props:{mapId:{defaultValue:null,description:"ID of the map to add the marker to",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"Layer ID before which to insert the marker",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},lng:{defaultValue:null,description:"Longitude of the marker position",name:"lng",required:!0,type:{name:"number"}},lat:{defaultValue:null,description:"Latitude of the marker position",name:"lat",required:!0,type:{name:"number"}},content:{defaultValue:null,description:"HTML content for the marker popup",name:"content",required:!1,type:{name:"string | undefined"}},markerStyle:{defaultValue:null,description:"CSS properties to apply to the marker dot",name:"markerStyle",required:!1,type:{name:"CSSProperties | undefined"}},containerStyle:{defaultValue:null,description:"CSS properties to apply to the content container",name:"containerStyle",required:!1,type:{name:"CSSProperties | undefined"}},iframeStyle:{defaultValue:null,description:"CSS properties to apply to the iframe element",name:"iframeStyle",required:!1,type:{name:"CSSProperties | undefined"}},iframeBodyStyle:{defaultValue:null,description:"CSS properties to apply to the body of the iframe",name:"iframeBodyStyle",required:!1,type:{name:"CSSProperties | undefined"}},contentOffset:{defaultValue:{value:"5"},description:"Offset in pixels between the marker and its content",name:"contentOffset",required:!1,type:{name:"number | undefined"}},passEventsThrough:{defaultValue:{value:"true"},description:"Whether mouse events pass through the marker content",name:"passEventsThrough",required:!1,type:{name:"boolean | undefined"}},anchor:{defaultValue:null,description:"Anchor position of the marker relative to its coordinates",name:"anchor",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"top-left"'},{value:'"top-right"'},{value:'"bottom-left"'},{value:'"bottom-right"'}]}}}}}catch{}var ia={},Tl={},c9;function yv(){if(c9)return Tl;c9=1;function e(D,F,B){if(B===void 0&&(B=Array.prototype),D&&typeof B.find=="function")return B.find.call(D,F);for(var N=0;N<D.length;N++)if(r(D,N)){var $=D[N];if(F.call(void 0,$,N,D))return $}}function t(D,F){return F===void 0&&(F=Object),F&&typeof F.getOwnPropertyDescriptors=="function"&&(D=F.create(null,F.getOwnPropertyDescriptors(D))),F&&typeof F.freeze=="function"?F.freeze(D):D}function r(D,F){return Object.prototype.hasOwnProperty.call(D,F)}function n(D,F){if(D===null||typeof D!="object")throw new TypeError("target is not an object");for(var B in F)r(F,B)&&(D[B]=F[B]);return D}var i=t({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function o(D){return r(i,D.toLowerCase())}var u=t({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(D){return r(u,D.toLowerCase())}var f=t({script:!1,style:!1,textarea:!0,title:!0});function p(D){var F=D.toLowerCase();return r(f,F)&&!f[F]}function g(D){var F=D.toLowerCase();return r(f,F)&&f[F]}function b(D){return D===_.HTML}function S(D){return b(D)||D===_.XML_XHTML_APPLICATION}var _=t({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),P=Object.keys(_).map(function(D){return _[D]});function k(D){return P.indexOf(D)>-1}var M=t({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Tl.assign=n,Tl.find=e,Tl.freeze=t,Tl.HTML_BOOLEAN_ATTRIBUTES=i,Tl.HTML_RAW_TEXT_ELEMENTS=f,Tl.HTML_VOID_ELEMENTS=u,Tl.hasDefaultHTMLNamespace=S,Tl.hasOwn=r,Tl.isHTMLBooleanAttribute=o,Tl.isHTMLRawTextElement=p,Tl.isHTMLEscapableRawTextElement=g,Tl.isHTMLMimeType=b,Tl.isHTMLVoidElement=a,Tl.isValidMimeType=k,Tl.MIME_TYPE=_,Tl.NAMESPACE=M,Tl}var Bg={},d9;function Qw(){if(d9)return Bg;d9=1;var e=yv();function t(S,_){S.prototype=Object.create(Error.prototype,{constructor:{value:S},name:{value:S.name,enumerable:!0,writable:_}})}var r=e.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(r);function i(S){return typeof S=="number"&&S>=1&&S<=25}function o(S){return typeof S=="string"&&S.substring(S.length-r.Error.length)===r.Error}function u(S,_){i(S)?(this.name=n[S],this.message=_||""):(this.message=S,this.name=o(_)?_:r.Error),Error.captureStackTrace&&Error.captureStackTrace(this,u)}t(u,!0),Object.defineProperties(u.prototype,{code:{enumerable:!0,get:function(){var S=n.indexOf(this.name);return i(S)?S:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},f=Object.entries(a),p=0;p<f.length;p++){var g=f[p][0];u[g]=f[p][1]}function b(S,_){this.message=S,this.locator=_,Error.captureStackTrace&&Error.captureStackTrace(this,b)}return t(b),Bg.DOMException=u,Bg.DOMExceptionName=r,Bg.ExceptionCode=a,Bg.ParseError=b,Bg}var ps={},qi={},f9;function jU(){if(f9)return qi;f9=1;function e(Hr){try{typeof Hr!="function"&&(Hr=RegExp);var kn=new Hr("","u").exec("");return!!kn&&kn[0].length===2}catch{}return!1}var t=e();function r(Hr){if(Hr.source[0]!=="[")throw new Error(Hr+" can not be used with chars");return Hr.source.slice(1,Hr.source.lastIndexOf("]"))}function n(Hr,kn){if(Hr.source[0]!=="[")throw new Error("/"+Hr.source+"/ can not be used with chars_without");if(!kn||typeof kn!="string")throw new Error(JSON.stringify(kn)+" is not a valid search");if(Hr.source.indexOf(kn)===-1)throw new Error('"'+kn+'" is not is /'+Hr.source+"/");if(kn==="-"&&Hr.source.indexOf(kn)!==1)throw new Error('"'+kn+'" is not at the first postion of /'+Hr.source+"/");return new RegExp(Hr.source.replace(kn,""),t?"u":"")}function i(Hr){var kn=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(Ur){var rr=typeof Ur=="string";if(rr&&kn===void 0&&Ur==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return rr?Ur:Ur.source}).join(""),t?"mu":"m")}function o(Hr){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var u="",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;t&&(a=i("[",r(a),"\\u{10000}-\\u{10FFFF}","]"));var f=/[\x20\x09\x0D\x0A]/,p=r(f),g=i(f,"+"),b=i(f,"*"),S=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;t&&(S=i("[",r(S),"\\u{10000}-\\u{10FFFF}","]"));var _=r(S),P=i("[",_,r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]"),k=i(S,P,"*"),M=i(P,"+"),D=i("&",k,";"),F=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),B=o(D,"|",F),N=i("%",k,";"),$=o(i('"',o(/[^%&"]/,"|",N,"|",B),"*",'"'),"|",i("'",o(/[^%&']/,"|",N,"|",B),"*","'")),V=o('"',o(/[^<&"]/,"|",B),"*",'"',"|","'",o(/[^<&']/,"|",B),"*","'"),U=n(S,":"),X=n(P,":"),Z=i(U,X,"*"),oe=i(Z,o(":",Z),"?"),re=i("^",oe,"$"),H=i("(",oe,")"),ae=o(/"[^"]*"|'[^']*'/),se=i(/^<\?/,"(",k,")",o(g,"(",a,"*?)"),"?",/\?>/),de=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,fe=o('"',de,'*"',"|","'",n(de,"'"),"*'"),Le="<!--",ye="-->",xe=i(Le,o(n(a,"-"),"|",i("-",n(a,"-"))),"*",ye),Se="#PCDATA",Re=o(i(/\(/,b,Se,o(b,/\|/,b,oe),"*",b,/\)\*/),"|",i(/\(/,b,Se,b,/\)/)),he=/[?*+]?/,Ee=i(/\([^>]+\)/,he),we=o("EMPTY","|","ANY","|",Re,"|",Ee),Ne="<!ELEMENT",Fe=i(Ne,g,o(oe,"|",N),g,o(we,"|",N),b,">"),Xe=i("NOTATION",g,/\(/,b,k,o(b,/\|/,b,k),"*",b,/\)/),Be=i(/\(/,b,M,o(b,/\|/,b,M),"*",b,/\)/),ot=o(Xe,"|",Be),Ke=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",ot),it=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",g),"?",V)),ke=o(g,k,g,Ke,g,it),Nt="<!ATTLIST",st=i(Nt,g,k,ke,"*",b,">"),$e="about:legacy-compat",Zt=o('"'+$e+'"',"|","'"+$e+"'"),$t="SYSTEM",Wt="PUBLIC",ht=o(o($t,g,ae),"|",o(Wt,g,fe,g,ae)),sr=i("^",o(o($t,g,"(?<SystemLiteralOnly>",ae,")"),"|",o(Wt,g,"(?<PubidLiteral>",fe,")",g,"(?<SystemLiteral>",ae,")"))),cr=o(g,"NDATA",g,k),ir=o($,"|",o(ht,cr,"?")),br="<!ENTITY",yr=i(br,g,k,g,ir,b,">"),Kt=o($,"|",ht),at=i(br,g,"%",g,k,g,Kt,b,">"),Ae=o(yr,"|",at),_e=i(Wt,g,fe),je=i("<!NOTATION",g,k,g,o(ht,"|",_e),b,">"),Ge=i(b,"=",b),He=/1[.]\d+/,Dt=i(g,"version",Ge,o("'",He,"'","|",'"',He,'"')),St=/[A-Za-z][-A-Za-z0-9._]*/,yt=o(g,"encoding",Ge,o('"',St,'"',"|","'",St,"'")),ct=o(g,"standalone",Ge,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),Jt=i(/^<\?xml/,Dt,yt,"?",ct,"?",b,/\?>/),Vt="<!DOCTYPE",xr="<![CDATA[",_r="]]>",Nr=/<!\[CDATA\[/,tn=/\]\]>/,Lr=i(a,"*?",tn),kt=i(Nr,Lr);return qi.chars=r,qi.chars_without=n,qi.detectUnicodeSupport=e,qi.reg=i,qi.regg=o,qi.ABOUT_LEGACY_COMPAT=$e,qi.ABOUT_LEGACY_COMPAT_SystemLiteral=Zt,qi.AttlistDecl=st,qi.CDATA_START=xr,qi.CDATA_END=_r,qi.CDSect=kt,qi.Char=a,qi.Comment=xe,qi.COMMENT_START=Le,qi.COMMENT_END=ye,qi.DOCTYPE_DECL_START=Vt,qi.elementdecl=Fe,qi.EntityDecl=Ae,qi.EntityValue=$,qi.ExternalID=ht,qi.ExternalID_match=sr,qi.Name=k,qi.NotationDecl=je,qi.Reference=B,qi.PEReference=N,qi.PI=se,qi.PUBLIC=Wt,qi.PubidLiteral=fe,qi.QName=oe,qi.QName_exact=re,qi.QName_group=H,qi.S=g,qi.SChar_s=p,qi.S_OPT=b,qi.SYSTEM=$t,qi.SystemLiteral=ae,qi.UNICODE_REPLACEMENT_CHARACTER=u,qi.UNICODE_SUPPORT=t,qi.XMLDecl=Jt,qi}var h9;function qU(){if(h9)return ps;h9=1;var e=yv(),t=e.find,r=e.hasDefaultHTMLNamespace,n=e.hasOwn,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,u=e.isHTMLVoidElement,a=e.MIME_TYPE,f=e.NAMESPACE,p=Symbol(),g=Qw(),b=g.DOMException,S=g.DOMExceptionName,_=jU();function P(Me){if(Me!==p)throw new TypeError("Illegal constructor")}function k(Me){return Me!==""}function M(Me){return Me?Me.split(/[\t\n\f\r ]+/).filter(k):[]}function D(Me,Ue){return n(Me,Ue)||(Me[Ue]=!0),Me}function F(Me){if(!Me)return[];var Ue=M(Me);return Object.keys(Ue.reduce(D,{}))}function B(Me){return function(Ue){return Me&&Me.indexOf(Ue)!==-1}}function N(Me){if(!_.QName_exact.test(Me))throw new b(b.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+Me+'"')}function $(Me,Ue){N(Ue),Me=Me||null;var Ct=null,Gt=Ue;if(Ue.indexOf(":")>=0){var zt=Ue.split(":");Ct=zt[0],Gt=zt[1]}if(Ct!==null&&Me===null)throw new b(b.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(Ct==="xml"&&Me!==e.NAMESPACE.XML)throw new b(b.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((Ct==="xmlns"||Ue==="xmlns")&&Me!==e.NAMESPACE.XMLNS)throw new b(b.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(Me===e.NAMESPACE.XMLNS&&Ct!=="xmlns"&&Ue!=="xmlns")throw new b(b.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[Me,Ct,Gt]}function V(Me,Ue){for(var Ct in Me)n(Me,Ct)&&(Ue[Ct]=Me[Ct])}function U(Me,Ue){var Ct=Me.prototype;if(!(Ct instanceof Ue)){let Gt=function(){};Gt.prototype=Ue.prototype,Gt=new Gt,V(Ct,Gt),Me.prototype=Ct=Gt}Ct.constructor!=Me&&(typeof Me!="function"&&console.error("unknown Class:"+Me),Ct.constructor=Me)}var X={},Z=X.ELEMENT_NODE=1,oe=X.ATTRIBUTE_NODE=2,re=X.TEXT_NODE=3,H=X.CDATA_SECTION_NODE=4,ae=X.ENTITY_REFERENCE_NODE=5,se=X.ENTITY_NODE=6,de=X.PROCESSING_INSTRUCTION_NODE=7,fe=X.COMMENT_NODE=8,Le=X.DOCUMENT_NODE=9,ye=X.DOCUMENT_TYPE_NODE=10,xe=X.DOCUMENT_FRAGMENT_NODE=11,Se=X.NOTATION_NODE=12,Re=e.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function he(Me,Ue){if(Ue.length<Me.length)return he(Ue,Me);var Ct=null;for(var Gt in Me){if(Me[Gt]!==Ue[Gt])return Ct;Ct=Me[Gt]}return Ct}function Ee(Me){return Me.guid||(Me.guid=Math.random()),Me.guid}function we(){}we.prototype={length:0,item:function(Me){return Me>=0&&Me<this.length?this[Me]:null},toString:function(Me){for(var Ue=[],Ct=0;Ct<this.length;Ct++)rr(this[Ct],Ue,Me);return Ue.join("")},filter:function(Me){return Array.prototype.filter.call(this,Me)},indexOf:function(Me){return Array.prototype.indexOf.call(this,Me)}},we.prototype[Symbol.iterator]=function(){var Me=this,Ue=0;return{next:function(){return Ue<Me.length?{value:Me[Ue++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Ne(Me,Ue){this._node=Me,this._refresh=Ue,Fe(this)}function Fe(Me){var Ue=Me._node._inc||Me._node.ownerDocument._inc;if(Me._inc!==Ue){var Ct=Me._refresh(Me._node);if(Vn(Me,"length",Ct.length),!Me.$$length||Ct.length<Me.$$length)for(var Gt=Ct.length;Gt in Me;Gt++)n(Me,Gt)&&delete Me[Gt];V(Ct,Me),Me._inc=Ue}}Ne.prototype.item=function(Me){return Fe(this),this[Me]||null},U(Ne,we);function Xe(){}function Be(Me,Ue){for(var Ct=0;Ct<Me.length;){if(Me[Ct]===Ue)return Ct;Ct++}}function ot(Me,Ue,Ct,Gt){if(Gt?Ue[Be(Ue,Gt)]=Ct:(Ue[Ue.length]=Ct,Ue.length++),Me){Ct.ownerElement=Me;var zt=Me.ownerDocument;zt&&(Gt&&$t(zt,Me,Gt),Zt(zt,Me,Ct))}}function Ke(Me,Ue,Ct){var Gt=Be(Ue,Ct);if(Gt>=0){for(var zt=Ue.length-1;Gt<=zt;)Ue[Gt]=Ue[++Gt];if(Ue.length=zt,Me){var qr=Me.ownerDocument;qr&&$t(qr,Me,Ct),Ct.ownerElement=null}}}Xe.prototype={length:0,item:we.prototype.item,getNamedItem:function(Me){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(Me=Me.toLowerCase());for(var Ue=0;Ue<this.length;){var Ct=this[Ue];if(Ct.nodeName===Me)return Ct;Ue++}return null},setNamedItem:function(Me){var Ue=Me.ownerElement;if(Ue&&Ue!==this._ownerElement)throw new b(b.INUSE_ATTRIBUTE_ERR);var Ct=this.getNamedItemNS(Me.namespaceURI,Me.localName);return Ct===Me?Me:(ot(this._ownerElement,this,Me,Ct),Ct)},setNamedItemNS:function(Me){return this.setNamedItem(Me)},removeNamedItem:function(Me){var Ue=this.getNamedItem(Me);if(!Ue)throw new b(b.NOT_FOUND_ERR,Me);return Ke(this._ownerElement,this,Ue),Ue},removeNamedItemNS:function(Me,Ue){var Ct=this.getNamedItemNS(Me,Ue);if(!Ct)throw new b(b.NOT_FOUND_ERR,Me?Me+" : "+Ue:Ue);return Ke(this._ownerElement,this,Ct),Ct},getNamedItemNS:function(Me,Ue){Me||(Me=null);for(var Ct=0;Ct<this.length;){var Gt=this[Ct];if(Gt.localName===Ue&&Gt.namespaceURI===Me)return Gt;Ct++}return null}},Xe.prototype[Symbol.iterator]=function(){var Me=this,Ue=0;return{next:function(){return Ue<Me.length?{value:Me[Ue++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function it(){}it.prototype={hasFeature:function(Me,Ue){return!0},createDocument:function(Me,Ue,Ct){var Gt=a.XML_APPLICATION;Me===f.HTML?Gt=a.XML_XHTML_APPLICATION:Me===f.SVG&&(Gt=a.XML_SVG_IMAGE);var zt=new $e(p,{contentType:Gt});if(zt.implementation=this,zt.childNodes=new we,zt.doctype=Ct||null,Ct&&zt.appendChild(Ct),Ue){var qr=zt.createElementNS(Me,Ue);zt.appendChild(qr)}return zt},createDocumentType:function(Me,Ue,Ct,Gt){N(Me);var zt=new Vt(p);return zt.name=Me,zt.nodeName=Me,zt.publicId=Ue||"",zt.systemId=Ct||"",zt.internalSubset=Gt||"",zt.childNodes=new we,zt},createHTMLDocument:function(Me){var Ue=new $e(p,{contentType:a.HTML});if(Ue.implementation=this,Ue.childNodes=new we,Me!==!1){Ue.doctype=this.createDocumentType("html"),Ue.doctype.ownerDocument=Ue,Ue.appendChild(Ue.doctype);var Ct=Ue.createElement("html");Ue.appendChild(Ct);var Gt=Ue.createElement("head");if(Ct.appendChild(Gt),typeof Me=="string"){var zt=Ue.createElement("title");zt.appendChild(Ue.createTextNode(Me)),Gt.appendChild(zt)}Ct.appendChild(Ue.createElement("body"))}return Ue}};function ke(Me){P(Me)}ke.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var Me=this.getRootNode();return Me&&Me.nodeType===Me.DOCUMENT_NODE},contains:function(Me){if(!Me)return!1;var Ue=Me;do{if(this===Ue)return!0;Ue=Me.parentNode}while(Ue);return!1},getRootNode:function(Me){var Ue=this;do{if(!Ue.parentNode)return Ue;Ue=Ue.parentNode}while(Ue)},isEqualNode:function(Me){if(!Me||this.nodeType!==Me.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==Me.name||this.publicId!==Me.publicId||this.systemId!==Me.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==Me.namespaceURI||this.prefix!==Me.prefix||this.localName!==Me.localName||this.attributes.length!==Me.attributes.length)return!1;for(var Ue=0;Ue<this.attributes.length;Ue++){var Ct=this.attributes.item(Ue);if(!Ct.isEqualNode(Me.getAttributeNodeNS(Ct.namespaceURI,Ct.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==Me.namespaceURI||this.localName!==Me.localName||this.value!==Me.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==Me.target||this.data!==Me.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==Me.data)return!1;break}if(this.childNodes.length!==Me.childNodes.length)return!1;for(var Ue=0;Ue<this.childNodes.length;Ue++)if(!this.childNodes[Ue].isEqualNode(Me.childNodes[Ue]))return!1;return!0},isSameNode:function(Me){return this===Me},insertBefore:function(Me,Ue){return Ge(this,Me,Ue)},replaceChild:function(Me,Ue){Ge(this,Me,Ue,je),Ue&&this.removeChild(Ue)},removeChild:function(Me){return ht(this,Me)},appendChild:function(Me){return this.insertBefore(Me,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Me){return en(this.ownerDocument||this,this,Me)},normalize:function(){for(var Me=this.firstChild;Me;){var Ue=Me.nextSibling;Ue&&Ue.nodeType==re&&Me.nodeType==re?(this.removeChild(Ue),Me.appendData(Ue.data)):(Me.normalize(),Me=Ue)}},isSupported:function(Me,Ue){return this.ownerDocument.implementation.hasFeature(Me,Ue)},lookupPrefix:function(Me){for(var Ue=this;Ue;){var Ct=Ue._nsMap;if(Ct){for(var Gt in Ct)if(n(Ct,Gt)&&Ct[Gt]===Me)return Gt}Ue=Ue.nodeType==oe?Ue.ownerDocument:Ue.parentNode}return null},lookupNamespaceURI:function(Me){for(var Ue=this;Ue;){var Ct=Ue._nsMap;if(Ct&&n(Ct,Me))return Ct[Me];Ue=Ue.nodeType==oe?Ue.ownerDocument:Ue.parentNode}return null},isDefaultNamespace:function(Me){var Ue=this.lookupPrefix(Me);return Ue==null},compareDocumentPosition:function(Me){if(this===Me)return 0;var Ue=Me,Ct=this,Gt=null,zt=null;if(Ue instanceof Dt&&(Gt=Ue,Ue=Gt.ownerElement),Ct instanceof Dt&&(zt=Ct,Ct=zt.ownerElement,Gt&&Ue&&Ct===Ue))for(var qr=0,En;En=Ct.attributes[qr];qr++){if(En===Gt)return Re.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Re.DOCUMENT_POSITION_PRECEDING;if(En===zt)return Re.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Re.DOCUMENT_POSITION_FOLLOWING}if(!Ue||!Ct||Ct.ownerDocument!==Ue.ownerDocument)return Re.DOCUMENT_POSITION_DISCONNECTED+Re.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(Ee(Ct.ownerDocument)>Ee(Ue.ownerDocument)?Re.DOCUMENT_POSITION_FOLLOWING:Re.DOCUMENT_POSITION_PRECEDING);if(zt&&Ue===Ct)return Re.DOCUMENT_POSITION_CONTAINS+Re.DOCUMENT_POSITION_PRECEDING;if(Gt&&Ue===Ct)return Re.DOCUMENT_POSITION_CONTAINED_BY+Re.DOCUMENT_POSITION_FOLLOWING;for(var Pi=[],gi=Ue.parentNode;gi;){if(!zt&&gi===Ct)return Re.DOCUMENT_POSITION_CONTAINED_BY+Re.DOCUMENT_POSITION_FOLLOWING;Pi.push(gi),gi=gi.parentNode}Pi.reverse();for(var kr=[],Sn=Ct.parentNode;Sn;){if(!Gt&&Sn===Ue)return Re.DOCUMENT_POSITION_CONTAINS+Re.DOCUMENT_POSITION_PRECEDING;kr.push(Sn),Sn=Sn.parentNode}kr.reverse();var Pn=he(Pi,kr);for(var Un in Pn.childNodes){var Ki=Pn.childNodes[Un];if(Ki===Ct)return Re.DOCUMENT_POSITION_FOLLOWING;if(Ki===Ue)return Re.DOCUMENT_POSITION_PRECEDING;if(kr.indexOf(Ki)>=0)return Re.DOCUMENT_POSITION_FOLLOWING;if(Pi.indexOf(Ki)>=0)return Re.DOCUMENT_POSITION_PRECEDING}return 0}};function Nt(Me){return Me=="<"&&"&lt;"||Me==">"&&"&gt;"||Me=="&"&&"&amp;"||Me=='"'&&"&quot;"||"&#"+Me.charCodeAt()+";"}V(X,ke),V(X,ke.prototype),V(Re,ke),V(Re,ke.prototype);function st(Me,Ue){if(Ue(Me))return!0;if(Me=Me.firstChild)do if(st(Me,Ue))return!0;while(Me=Me.nextSibling)}function $e(Me,Ue){P(Me);var Ct=Ue||{};this.ownerDocument=this,this.contentType=Ct.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function Zt(Me,Ue,Ct){Me&&Me._inc++;var Gt=Ct.namespaceURI;Gt===f.XMLNS&&(Ue._nsMap[Ct.prefix?Ct.localName:""]=Ct.value)}function $t(Me,Ue,Ct,Gt){Me&&Me._inc++;var zt=Ct.namespaceURI;zt===f.XMLNS&&delete Ue._nsMap[Ct.prefix?Ct.localName:""]}function Wt(Me,Ue,Ct){if(Me&&Me._inc){Me._inc++;var Gt=Ue.childNodes;if(Ct&&!Ct.nextSibling)Gt[Gt.length++]=Ct;else{for(var zt=Ue.firstChild,qr=0;zt;)Gt[qr++]=zt,zt=zt.nextSibling;Gt.length=qr,delete Gt[Gt.length]}}}function ht(Me,Ue){if(Me!==Ue.parentNode)throw new b(b.NOT_FOUND_ERR,"child's parent is not parent");var Ct=Ue.previousSibling,Gt=Ue.nextSibling;return Ct?Ct.nextSibling=Gt:Me.firstChild=Gt,Gt?Gt.previousSibling=Ct:Me.lastChild=Ct,Wt(Me.ownerDocument,Me),Ue.parentNode=null,Ue.previousSibling=null,Ue.nextSibling=null,Ue}function sr(Me){return Me&&(Me.nodeType===ke.DOCUMENT_NODE||Me.nodeType===ke.DOCUMENT_FRAGMENT_NODE||Me.nodeType===ke.ELEMENT_NODE)}function cr(Me){return Me&&(Me.nodeType===ke.CDATA_SECTION_NODE||Me.nodeType===ke.COMMENT_NODE||Me.nodeType===ke.DOCUMENT_FRAGMENT_NODE||Me.nodeType===ke.DOCUMENT_TYPE_NODE||Me.nodeType===ke.ELEMENT_NODE||Me.nodeType===ke.PROCESSING_INSTRUCTION_NODE||Me.nodeType===ke.TEXT_NODE)}function ir(Me){return Me&&Me.nodeType===ke.DOCUMENT_TYPE_NODE}function br(Me){return Me&&Me.nodeType===ke.ELEMENT_NODE}function yr(Me){return Me&&Me.nodeType===ke.TEXT_NODE}function Kt(Me,Ue){var Ct=Me.childNodes||[];if(t(Ct,br)||ir(Ue))return!1;var Gt=t(Ct,ir);return!(Ue&&Gt&&Ct.indexOf(Gt)>Ct.indexOf(Ue))}function at(Me,Ue){var Ct=Me.childNodes||[];function Gt(qr){return br(qr)&&qr!==Ue}if(t(Ct,Gt))return!1;var zt=t(Ct,ir);return!(Ue&&zt&&Ct.indexOf(zt)>Ct.indexOf(Ue))}function Ae(Me,Ue,Ct){if(!sr(Me))throw new b(b.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+Me.nodeType);if(Ct&&Ct.parentNode!==Me)throw new b(b.NOT_FOUND_ERR,"child not in parent");if(!cr(Ue)||ir(Ue)&&Me.nodeType!==ke.DOCUMENT_NODE)throw new b(b.HIERARCHY_REQUEST_ERR,"Unexpected node type "+Ue.nodeType+" for parent node type "+Me.nodeType)}function _e(Me,Ue,Ct){var Gt=Me.childNodes||[],zt=Ue.childNodes||[];if(Ue.nodeType===ke.DOCUMENT_FRAGMENT_NODE){var qr=zt.filter(br);if(qr.length>1||t(zt,yr))throw new b(b.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(qr.length===1&&!Kt(Me,Ct))throw new b(b.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(br(Ue)&&!Kt(Me,Ct))throw new b(b.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ir(Ue)){if(t(Gt,ir))throw new b(b.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var En=t(Gt,br);if(Ct&&Gt.indexOf(En)<Gt.indexOf(Ct))throw new b(b.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!Ct&&En)throw new b(b.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function je(Me,Ue,Ct){var Gt=Me.childNodes||[],zt=Ue.childNodes||[];if(Ue.nodeType===ke.DOCUMENT_FRAGMENT_NODE){var qr=zt.filter(br);if(qr.length>1||t(zt,yr))throw new b(b.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(qr.length===1&&!at(Me,Ct))throw new b(b.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(br(Ue)&&!at(Me,Ct))throw new b(b.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ir(Ue)){if(t(Gt,function(gi){return ir(gi)&&gi!==Ct}))throw new b(b.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var En=t(Gt,br);if(Ct&&Gt.indexOf(En)<Gt.indexOf(Ct))throw new b(b.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function Ge(Me,Ue,Ct,Gt){Ae(Me,Ue,Ct),Me.nodeType===ke.DOCUMENT_NODE&&(Gt||_e)(Me,Ue,Ct);var zt=Ue.parentNode;if(zt&&zt.removeChild(Ue),Ue.nodeType===xe){var qr=Ue.firstChild;if(qr==null)return Ue;var En=Ue.lastChild}else qr=En=Ue;var Pi=Ct?Ct.previousSibling:Me.lastChild;qr.previousSibling=Pi,En.nextSibling=Ct,Pi?Pi.nextSibling=qr:Me.firstChild=qr,Ct==null?Me.lastChild=En:Ct.previousSibling=En;do qr.parentNode=Me;while(qr!==En&&(qr=qr.nextSibling));return Wt(Me.ownerDocument||Me,Me,Ue),Ue.nodeType==xe&&(Ue.firstChild=Ue.lastChild=null),Ue}$e.prototype={implementation:null,nodeName:"#document",nodeType:Le,doctype:null,documentElement:null,_inc:1,insertBefore:function(Me,Ue){if(Me.nodeType===xe){for(var Ct=Me.firstChild;Ct;){var Gt=Ct.nextSibling;this.insertBefore(Ct,Ue),Ct=Gt}return Me}return Ge(this,Me,Ue),Me.ownerDocument=this,this.documentElement===null&&Me.nodeType===Z&&(this.documentElement=Me),Me},removeChild:function(Me){var Ue=ht(this,Me);return Ue===this.documentElement&&(this.documentElement=null),Ue},replaceChild:function(Me,Ue){Ge(this,Me,Ue,je),Me.ownerDocument=this,Ue&&this.removeChild(Ue),br(Me)&&(this.documentElement=Me)},importNode:function(Me,Ue){return Jn(this,Me,Ue)},getElementById:function(Me){var Ue=null;return st(this.documentElement,function(Ct){if(Ct.nodeType==Z&&Ct.getAttribute("id")==Me)return Ue=Ct,!0}),Ue},createElement:function(Me){var Ue=new He(p);Ue.ownerDocument=this,this.type==="html"&&(Me=Me.toLowerCase()),r(this.contentType)&&(Ue.namespaceURI=f.HTML),Ue.nodeName=Me,Ue.tagName=Me,Ue.localName=Me,Ue.childNodes=new we;var Ct=Ue.attributes=new Xe;return Ct._ownerElement=Ue,Ue},createDocumentFragment:function(){var Me=new tn(p);return Me.ownerDocument=this,Me.childNodes=new we,Me},createTextNode:function(Me){var Ue=new yt(p);return Ue.ownerDocument=this,Ue.childNodes=new we,Ue.appendData(Me),Ue},createComment:function(Me){var Ue=new ct(p);return Ue.ownerDocument=this,Ue.childNodes=new we,Ue.appendData(Me),Ue},createCDATASection:function(Me){var Ue=new Jt(p);return Ue.ownerDocument=this,Ue.childNodes=new we,Ue.appendData(Me),Ue},createProcessingInstruction:function(Me,Ue){var Ct=new Lr(p);return Ct.ownerDocument=this,Ct.childNodes=new we,Ct.nodeName=Ct.target=Me,Ct.nodeValue=Ct.data=Ue,Ct},createAttribute:function(Me){if(!_.QName_exact.test(Me))throw new b(b.INVALID_CHARACTER_ERR,'invalid character in name "'+Me+'"');return this.type==="html"&&(Me=Me.toLowerCase()),this._createAttribute(Me)},_createAttribute:function(Me){var Ue=new Dt(p);return Ue.ownerDocument=this,Ue.childNodes=new we,Ue.name=Me,Ue.nodeName=Me,Ue.localName=Me,Ue.specified=!0,Ue},createEntityReference:function(Me){if(!_.Name.test(Me))throw new b(b.INVALID_CHARACTER_ERR,'not a valid xml name "'+Me+'"');if(this.type==="html")throw new b("document is an html document",S.NotSupportedError);var Ue=new Nr(p);return Ue.ownerDocument=this,Ue.childNodes=new we,Ue.nodeName=Me,Ue},createElementNS:function(Me,Ue){var Ct=$(Me,Ue),Gt=new He(p),zt=Gt.attributes=new Xe;return Gt.childNodes=new we,Gt.ownerDocument=this,Gt.nodeName=Ue,Gt.tagName=Ue,Gt.namespaceURI=Ct[0],Gt.prefix=Ct[1],Gt.localName=Ct[2],zt._ownerElement=Gt,Gt},createAttributeNS:function(Me,Ue){var Ct=$(Me,Ue),Gt=new Dt(p);return Gt.ownerDocument=this,Gt.childNodes=new we,Gt.nodeName=Ue,Gt.name=Ue,Gt.specified=!0,Gt.namespaceURI=Ct[0],Gt.prefix=Ct[1],Gt.localName=Ct[2],Gt}},U($e,ke);function He(Me){P(Me),this._nsMap=Object.create(null)}He.prototype={nodeType:Z,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===f.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(Me){return!!this.getAttributeNode(Me)},getAttribute:function(Me){var Ue=this.getAttributeNode(Me);return Ue?Ue.value:null},getAttributeNode:function(Me){return this._isInHTMLDocumentAndNamespace()&&(Me=Me.toLowerCase()),this.attributes.getNamedItem(Me)},setAttribute:function(Me,Ue){this._isInHTMLDocumentAndNamespace()&&(Me=Me.toLowerCase());var Ct=this.getAttributeNode(Me);Ct?Ct.value=Ct.nodeValue=""+Ue:(Ct=this.ownerDocument._createAttribute(Me),Ct.value=Ct.nodeValue=""+Ue,this.setAttributeNode(Ct))},removeAttribute:function(Me){var Ue=this.getAttributeNode(Me);Ue&&this.removeAttributeNode(Ue)},setAttributeNode:function(Me){return this.attributes.setNamedItem(Me)},setAttributeNodeNS:function(Me){return this.attributes.setNamedItemNS(Me)},removeAttributeNode:function(Me){return this.attributes.removeNamedItem(Me.nodeName)},removeAttributeNS:function(Me,Ue){var Ct=this.getAttributeNodeNS(Me,Ue);Ct&&this.removeAttributeNode(Ct)},hasAttributeNS:function(Me,Ue){return this.getAttributeNodeNS(Me,Ue)!=null},getAttributeNS:function(Me,Ue){var Ct=this.getAttributeNodeNS(Me,Ue);return Ct?Ct.value:null},setAttributeNS:function(Me,Ue,Ct){var Gt=$(Me,Ue),zt=Gt[2],qr=this.getAttributeNodeNS(Me,zt);qr?qr.value=qr.nodeValue=""+Ct:(qr=this.ownerDocument.createAttributeNS(Me,Ue),qr.value=qr.nodeValue=""+Ct,this.setAttributeNode(qr))},getAttributeNodeNS:function(Me,Ue){return this.attributes.getNamedItemNS(Me,Ue)},getElementsByClassName:function(Me){var Ue=F(Me);return new Ne(this,function(Ct){var Gt=[];return Ue.length>0&&st(Ct,function(zt){if(zt!==Ct&&zt.nodeType===Z){var qr=zt.getAttribute("class");if(qr){var En=Me===qr;if(!En){var Pi=F(qr);En=Ue.every(B(Pi))}En&&Gt.push(zt)}}}),Gt})},getElementsByTagName:function(Me){var Ue=(this.nodeType===Le?this:this.ownerDocument).type==="html",Ct=Me.toLowerCase();return new Ne(this,function(Gt){var zt=[];return st(Gt,function(qr){if(!(qr===Gt||qr.nodeType!==Z))if(Me==="*")zt.push(qr);else{var En=qr.getQualifiedName(),Pi=Ue&&qr.namespaceURI===f.HTML?Ct:Me;En===Pi&&zt.push(qr)}}),zt})},getElementsByTagNameNS:function(Me,Ue){return new Ne(this,function(Ct){var Gt=[];return st(Ct,function(zt){zt!==Ct&&zt.nodeType===Z&&(Me==="*"||zt.namespaceURI===Me)&&(Ue==="*"||zt.localName==Ue)&&Gt.push(zt)}),Gt})}},$e.prototype.getElementsByClassName=He.prototype.getElementsByClassName,$e.prototype.getElementsByTagName=He.prototype.getElementsByTagName,$e.prototype.getElementsByTagNameNS=He.prototype.getElementsByTagNameNS,U(He,ke);function Dt(Me){P(Me),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}Dt.prototype.nodeType=oe,U(Dt,ke);function St(Me){P(Me)}St.prototype={data:"",substringData:function(Me,Ue){return this.data.substring(Me,Me+Ue)},appendData:function(Me){Me=this.data+Me,this.nodeValue=this.data=Me,this.length=Me.length},insertData:function(Me,Ue){this.replaceData(Me,0,Ue)},deleteData:function(Me,Ue){this.replaceData(Me,Ue,"")},replaceData:function(Me,Ue,Ct){var Gt=this.data.substring(0,Me),zt=this.data.substring(Me+Ue);Ct=Gt+Ct+zt,this.nodeValue=this.data=Ct,this.length=Ct.length}},U(St,ke);function yt(Me){P(Me)}yt.prototype={nodeName:"#text",nodeType:re,splitText:function(Me){var Ue=this.data,Ct=Ue.substring(Me);Ue=Ue.substring(0,Me),this.data=this.nodeValue=Ue,this.length=Ue.length;var Gt=this.ownerDocument.createTextNode(Ct);return this.parentNode&&this.parentNode.insertBefore(Gt,this.nextSibling),Gt}},U(yt,St);function ct(Me){P(Me)}ct.prototype={nodeName:"#comment",nodeType:fe},U(ct,St);function Jt(Me){P(Me)}Jt.prototype={nodeName:"#cdata-section",nodeType:H},U(Jt,yt);function Vt(Me){P(Me)}Vt.prototype.nodeType=ye,U(Vt,ke);function xr(Me){P(Me)}xr.prototype.nodeType=Se,U(xr,ke);function _r(Me){P(Me)}_r.prototype.nodeType=se,U(_r,ke);function Nr(Me){P(Me)}Nr.prototype.nodeType=ae,U(Nr,ke);function tn(Me){P(Me)}tn.prototype.nodeName="#document-fragment",tn.prototype.nodeType=xe,U(tn,ke);function Lr(Me){P(Me)}Lr.prototype.nodeType=de,U(Lr,St);function kt(){}kt.prototype.serializeToString=function(Me,Ue){return Hr.call(Me,Ue)},ke.prototype.toString=Hr;function Hr(Me){var Ue=[],Ct=this.nodeType===Le&&this.documentElement||this,Gt=Ct.prefix,zt=Ct.namespaceURI;if(zt&&Gt==null){var Gt=Ct.lookupPrefix(zt);if(Gt==null)var qr=[{namespace:zt,prefix:null}]}return rr(this,Ue,Me,qr),Ue.join("")}function kn(Me,Ue,Ct){var Gt=Me.prefix||"",zt=Me.namespaceURI;if(!zt||Gt==="xml"&&zt===f.XML||zt===f.XMLNS)return!1;for(var qr=Ct.length;qr--;){var En=Ct[qr];if(En.prefix===Gt)return En.namespace!==zt}return!0}function Ur(Me,Ue,Ct){Me.push(" ",Ue,'="',Ct.replace(/[<>&"\t\n\r]/g,Nt),'"')}function rr(Me,Ue,Ct,Gt){Gt||(Gt=[]);var zt=Me.nodeType===Le?Me:Me.ownerDocument,qr=zt.type==="html";if(Ct)if(Me=Ct(Me),Me){if(typeof Me=="string"){Ue.push(Me);return}}else return;switch(Me.nodeType){case Z:var En=Me.attributes,Pi=En.length,pa=Me.firstChild,gi=Me.tagName,kr=gi;if(!qr&&!Me.prefix&&Me.namespaceURI){for(var Sn,Pn=0;Pn<En.length;Pn++)if(En.item(Pn).name==="xmlns"){Sn=En.item(Pn).value;break}if(!Sn)for(var Un=Gt.length-1;Un>=0;Un--){var Ki=Gt[Un];if(Ki.prefix===""&&Ki.namespace===Me.namespaceURI){Sn=Ki.namespace;break}}if(Sn!==Me.namespaceURI)for(var Un=Gt.length-1;Un>=0;Un--){var Ki=Gt[Un];if(Ki.namespace===Me.namespaceURI){Ki.prefix&&(kr=Ki.prefix+":"+gi);break}}}Ue.push("<",kr);for(var ea=0;ea<Pi;ea++){var An=En.item(ea);An.prefix=="xmlns"?Gt.push({prefix:An.localName,namespace:An.value}):An.nodeName=="xmlns"&&Gt.push({prefix:"",namespace:An.value})}for(var ea=0;ea<Pi;ea++){var An=En.item(ea);if(kn(An,qr,Gt)){var Ca=An.prefix||"",Ni=An.namespaceURI;Ur(Ue,Ca?"xmlns:"+Ca:"xmlns",Ni),Gt.push({prefix:Ca,namespace:Ni})}rr(An,Ue,Ct,Gt)}if(gi===kr&&kn(Me,qr,Gt)){var Ca=Me.prefix||"",Ni=Me.namespaceURI;Ur(Ue,Ca?"xmlns:"+Ca:"xmlns",Ni),Gt.push({prefix:Ca,namespace:Ni})}var Ho=!pa;if(Ho&&(qr||Me.namespaceURI===f.HTML)&&(Ho=u(gi)),Ho)Ue.push("/>");else{if(Ue.push(">"),qr&&o(gi))for(;pa;)pa.data?Ue.push(pa.data):rr(pa,Ue,Ct,Gt.slice()),pa=pa.nextSibling;else for(;pa;)rr(pa,Ue,Ct,Gt.slice()),pa=pa.nextSibling;Ue.push("</",kr,">")}return;case Le:case xe:for(var pa=Me.firstChild;pa;)rr(pa,Ue,Ct,Gt.slice()),pa=pa.nextSibling;return;case oe:return Ur(Ue,Me.name,Me.value);case re:return Ue.push(Me.data.replace(/[<&>]/g,Nt));case H:return Ue.push(_.CDATA_START,Me.data,_.CDATA_END);case fe:return Ue.push(_.COMMENT_START,Me.data,_.COMMENT_END);case ye:var mo=Me.publicId,Oa=Me.systemId;Ue.push(_.DOCTYPE_DECL_START," ",Me.name),mo?(Ue.push(" ",_.PUBLIC," ",mo),Oa&&Oa!=="."&&Ue.push(" ",Oa)):Oa&&Oa!=="."&&Ue.push(" ",_.SYSTEM," ",Oa),Me.internalSubset&&Ue.push(" [",Me.internalSubset,"]"),Ue.push(">");return;case de:return Ue.push("<?",Me.target," ",Me.data,"?>");case ae:return Ue.push("&",Me.nodeName,";");default:Ue.push("??",Me.nodeName)}}function Jn(Me,Ue,Ct){var Gt;switch(Ue.nodeType){case Z:Gt=Ue.cloneNode(!1),Gt.ownerDocument=Me;case xe:break;case oe:Ct=!0;break}if(Gt||(Gt=Ue.cloneNode(!1)),Gt.ownerDocument=Me,Gt.parentNode=null,Ct)for(var zt=Ue.firstChild;zt;)Gt.appendChild(Jn(Me,zt,Ct)),zt=zt.nextSibling;return Gt}function en(Me,Ue,Ct){var Gt=new Ue.constructor(p);for(var zt in Ue)if(n(Ue,zt)){var qr=Ue[zt];typeof qr!="object"&&qr!=Gt[zt]&&(Gt[zt]=qr)}switch(Ue.childNodes&&(Gt.childNodes=new we),Gt.ownerDocument=Me,Gt.nodeType){case Z:var En=Ue.attributes,Pi=Gt.attributes=new Xe,gi=En.length;Pi._ownerElement=Gt;for(var kr=0;kr<gi;kr++)Gt.setAttributeNode(en(Me,En.item(kr),!0));break;case oe:Ct=!0}if(Ct)for(var Sn=Ue.firstChild;Sn;)Gt.appendChild(en(Me,Sn,Ct)),Sn=Sn.nextSibling;return Gt}function Vn(Me,Ue,Ct){Me[Ue]=Ct}try{if(Object.defineProperty){let Me=function(Ue){switch(Ue.nodeType){case Z:case xe:var Ct=[];for(Ue=Ue.firstChild;Ue;)Ue.nodeType!==7&&Ue.nodeType!==8&&Ct.push(Me(Ue)),Ue=Ue.nextSibling;return Ct.join("");default:return Ue.nodeValue}};Object.defineProperty(Ne.prototype,"length",{get:function(){return Fe(this),this.$$length}}),Object.defineProperty(ke.prototype,"textContent",{get:function(){return Me(this)},set:function(Ue){switch(this.nodeType){case Z:case xe:for(;this.firstChild;)this.removeChild(this.firstChild);(Ue||String(Ue))&&this.appendChild(this.ownerDocument.createTextNode(Ue));break;default:this.data=Ue,this.value=Ue,this.nodeValue=Ue}}}),Vn=function(Ue,Ct,Gt){Ue["$$"+Ct]=Gt}}}catch{}return ps._updateLiveList=Fe,ps.Attr=Dt,ps.CDATASection=Jt,ps.CharacterData=St,ps.Comment=ct,ps.Document=$e,ps.DocumentFragment=tn,ps.DocumentType=Vt,ps.DOMImplementation=it,ps.Element=He,ps.Entity=_r,ps.EntityReference=Nr,ps.LiveNodeList=Ne,ps.NamedNodeMap=Xe,ps.Node=ke,ps.NodeList=we,ps.Notation=xr,ps.Text=yt,ps.ProcessingInstruction=Lr,ps.XMLSerializer=kt,ps}var Xp={},wT={},p9;function CSe(){return p9||(p9=1,(function(e){var t=yv().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(wT)),wT}var t0={},m9;function ESe(){if(m9)return t0;m9=1;var e=yv(),t=jU(),r=Qw(),n=e.isHTMLEscapableRawTextElement,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,u=e.hasOwn,a=e.NAMESPACE,f=r.ParseError,p=r.DOMException,g=0,b=1,S=2,_=3,P=4,k=5,M=6,D=7;function F(){}F.prototype={parse:function(de,fe,Le){var ye=this.domBuilder;ye.startDocument(),Z(fe,fe=Object.create(null)),N(de,fe,Le,ye,this.errorHandler),ye.endDocument()}};var B=/&#?\w+;?/g;function N(de,fe,Le,ye,xe){var Se=i(ye.mimeType);de.indexOf(t.UNICODE_REPLACEMENT_CHARACTER)>=0&&xe.warning("Unicode replacement character detected, source encoding issues?");function Re(Ge){if(Ge>65535){Ge-=65536;var He=55296+(Ge>>10),Dt=56320+(Ge&1023);return String.fromCharCode(He,Dt)}else return String.fromCharCode(Ge)}function he(Ge){var He=Ge[Ge.length-1]===";"?Ge:Ge+";";if(!Se&&He!==Ge)return xe.error("EntityRef: expecting ;"),Ge;var Dt=t.Reference.exec(He);if(!Dt||Dt[0].length!==He.length)return xe.error("entity not matching Reference production: "+Ge),Ge;var St=He.slice(1,-1);return u(Le,St)?Le[St]:St.charAt(0)==="#"?Re(parseInt(St.substring(1).replace("x","0x"))):(xe.error("entity not found:"+Ge),Ge)}function Ee(Ge){if(Ge>it){var He=de.substring(it,Ge).replace(B,he);Xe&&Be(it),ye.characters(He,0,Ge-it),it=Ge}}var we=0,Ne=0,Fe=/\r\n?|\n|$/g,Xe=ye.locator;function Be(Ge,He){for(;Ge>=Ne&&(He=Fe.exec(de));)we=Ne,Ne=He.index+He[0].length,Xe.lineNumber++;Xe.columnNumber=Ge-we+1}for(var ot=[{currentNSMap:fe}],Ke=[],it=0;;){try{var ke=de.indexOf("<",it);if(ke<0){if(!Se&&Ke.length>0)return xe.fatalError("unclosed xml tag(s): "+Ke.join(", "));if(!de.substring(it).match(/^\s*$/)){var Nt=ye.doc,st=Nt.createTextNode(de.substring(it));if(Nt.documentElement)return xe.error("Extra content at the end of the document");Nt.appendChild(st),ye.currentElement=st}return}if(ke>it){var $e=de.substring(it,ke);!Se&&Ke.length===0&&($e=$e.replace(new RegExp(t.S_OPT.source,"g"),""),$e&&xe.error("Unexpected content outside root element: '"+$e+"'")),Ee(ke)}switch(de.charAt(ke+1)){case"/":var Kt=de.indexOf(">",ke+2),Zt=de.substring(ke+2,Kt>0?Kt:void 0);if(!Zt)return xe.fatalError("end tag name missing");var $t=Kt>0&&t.reg("^",t.QName_group,t.S_OPT,"$").exec(Zt);if(!$t)return xe.fatalError('end tag name contains invalid characters: "'+Zt+'"');if(!ye.currentElement&&!ye.doc.documentElement)return;var Wt=Ke[Ke.length-1]||ye.currentElement.tagName||ye.doc.documentElement.tagName||"";if(Wt!==$t[1]){var ht=$t[1].toLowerCase();if(!Se||Wt.toLowerCase()!==ht)return xe.fatalError('Opening and ending tag mismatch: "'+Wt+'" != "'+Zt+'"')}var sr=ot.pop();Ke.pop();var cr=sr.localNSMap;if(ye.endElement(sr.uri,sr.localName,Wt),cr)for(var ir in cr)u(cr,ir)&&ye.endPrefixMapping(ir);Kt++;break;case"?":Xe&&Be(ke),Kt=ae(de,ke,ye,xe);break;case"!":Xe&&Be(ke),Kt=H(de,ke,ye,xe,Se);break;default:Xe&&Be(ke);var br=new se,yr=ot[ot.length-1].currentNSMap,Kt=V(de,ke,br,yr,he,xe,Se),at=br.length;if(br.closed||(Se&&e.isHTMLVoidElement(br.tagName)?br.closed=!0:Ke.push(br.tagName)),Xe&&at){for(var Ae=$(Xe,{}),_e=0;_e<at;_e++){var je=br[_e];Be(je.offset),je.locator=$(Xe,{})}ye.locator=Ae,U(br,ye,yr)&&ot.push(br),ye.locator=Xe}else U(br,ye,yr)&&ot.push(br);Se&&!br.closed?Kt=X(de,Kt,br.tagName,he,ye):Kt++}}catch(Ge){if(Ge instanceof f)throw Ge;if(Ge instanceof p)throw new f(Ge.name+": "+Ge.message,ye.locator,Ge);xe.error("element parse error: "+Ge),Kt=-1}Kt>it?it=Kt:Ee(Math.max(ke,it)+1)}}function $(de,fe){return fe.lineNumber=de.lineNumber,fe.columnNumber=de.columnNumber,fe}function V(de,fe,Le,ye,xe,Se,Re){function he(Be,ot,Ke){if(u(Le.attributeNames,Be))return Se.fatalError("Attribute "+Be+" redefined");if(!Re&&ot.indexOf("<")>=0)return Se.fatalError("Unescaped '<' not allowed in attributes values");Le.addValue(Be,ot.replace(/[\t\n\r]/g," ").replace(B,xe),Ke)}for(var Ee,we,Ne=++fe,Fe=g;;){var Xe=de.charAt(Ne);switch(Xe){case"=":if(Fe===b)Ee=de.slice(fe,Ne),Fe=_;else if(Fe===S)Fe=_;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Fe===_||Fe===b)if(Fe===b&&(Se.warning('attribute value must after "="'),Ee=de.slice(fe,Ne)),fe=Ne+1,Ne=de.indexOf(Xe,fe),Ne>0)we=de.slice(fe,Ne),he(Ee,we,fe-1),Fe=k;else throw new Error("attribute value no end '"+Xe+"' match");else if(Fe==P)we=de.slice(fe,Ne),he(Ee,we,fe),Se.warning('attribute "'+Ee+'" missed start quot('+Xe+")!!"),fe=Ne+1,Fe=k;else throw new Error('attribute value must after "="');break;case"/":switch(Fe){case g:Le.setTagName(de.slice(fe,Ne));case k:case M:case D:Fe=D,Le.closed=!0;case P:case b:break;case S:Le.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Se.error("unexpected end of input"),Fe==g&&Le.setTagName(de.slice(fe,Ne)),Ne;case">":switch(Fe){case g:Le.setTagName(de.slice(fe,Ne));case k:case M:case D:break;case P:case b:we=de.slice(fe,Ne),we.slice(-1)==="/"&&(Le.closed=!0,we=we.slice(0,-1));case S:Fe===S&&(we=Ee),Fe==P?(Se.warning('attribute "'+we+'" missed quot(")!'),he(Ee,we,fe)):(Re||Se.warning('attribute "'+we+'" missed value!! "'+we+'" instead!!'),he(we,we,fe));break;case _:if(!Re)return Se.fatalError(`AttValue: ' or " expected`)}return Ne;case"":Xe=" ";default:if(Xe<=" ")switch(Fe){case g:Le.setTagName(de.slice(fe,Ne)),Fe=M;break;case b:Ee=de.slice(fe,Ne),Fe=S;break;case P:var we=de.slice(fe,Ne);Se.warning('attribute "'+we+'" missed quot(")!!'),he(Ee,we,fe);case k:Fe=M;break}else switch(Fe){case S:Re||Se.warning('attribute "'+Ee+'" missed value!! "'+Ee+'" instead2!!'),he(Ee,Ee,fe),fe=Ne,Fe=b;break;case k:Se.warning('attribute space is required"'+Ee+'"!!');case M:Fe=b,fe=Ne;break;case _:Fe=P,fe=Ne;break;case D:throw new Error("elements closed character '/' and '>' must be connected to")}}Ne++}}function U(de,fe,Le){for(var ye=de.tagName,xe=null,Fe=de.length;Fe--;){var Se=de[Fe],Re=Se.qName,he=Se.value,Xe=Re.indexOf(":");if(Xe>0)var Ee=Se.prefix=Re.slice(0,Xe),we=Re.slice(Xe+1),Ne=Ee==="xmlns"&&we;else we=Re,Ee=null,Ne=Re==="xmlns"&&"";Se.localName=we,Ne!==!1&&(xe==null&&(xe=Object.create(null),Z(Le,Le=Object.create(null))),Le[Ne]=xe[Ne]=he,Se.uri=a.XMLNS,fe.startPrefixMapping(Ne,he))}for(var Fe=de.length;Fe--;)Se=de[Fe],Se.prefix&&(Se.prefix==="xml"&&(Se.uri=a.XML),Se.prefix!=="xmlns"&&(Se.uri=Le[Se.prefix]));var Xe=ye.indexOf(":");Xe>0?(Ee=de.prefix=ye.slice(0,Xe),we=de.localName=ye.slice(Xe+1)):(Ee=null,we=de.localName=ye);var Be=de.uri=Le[Ee||""];if(fe.startElement(Be,we,ye,de),de.closed){if(fe.endElement(Be,we,ye),xe)for(Ee in xe)u(xe,Ee)&&fe.endPrefixMapping(Ee)}else return de.currentNSMap=Le,de.localNSMap=xe,!0}function X(de,fe,Le,ye,xe){var Se=n(Le);if(Se||o(Le)){var Re=de.indexOf("</"+Le+">",fe),he=de.substring(fe+1,Re);return Se&&(he=he.replace(B,ye)),xe.characters(he,0,he.length),Re}return fe+1}function Z(de,fe){for(var Le in de)u(de,Le)&&(fe[Le]=de[Le])}function oe(de,fe){var Le=fe;function ye(Ne){return Ne=Ne||0,de.charAt(Le+Ne)}function xe(Ne){Ne=Ne||1,Le+=Ne}function Se(){for(var Ne=0;Le<de.length;){var Fe=ye();if(Fe!==" "&&Fe!==`
`&&Fe!=="	"&&Fe!=="\r")return Ne;Ne++,xe()}return-1}function Re(){return de.substring(Le)}function he(Ne){return de.substring(Le,Le+Ne.length)===Ne}function Ee(Ne){return de.substring(Le,Le+Ne.length).toUpperCase()===Ne.toUpperCase()}function we(Ne){var Fe=t.reg("^",Ne),Xe=Fe.exec(Re());return Xe?(xe(Xe[0].length),Xe[0]):null}return{char:ye,getIndex:function(){return Le},getMatch:we,getSource:function(){return de},skip:xe,skipBlanks:Se,substringFromIndex:Re,substringStartsWith:he,substringStartsWithCaseInsensitive:Ee}}function re(de,fe){function Le(he,Ee){var we=t.PI.exec(he.substringFromIndex());return we?we[1].toLowerCase()==="xml"?Ee.fatalError("xml declaration is only allowed at the start of the document, but found at position "+he.getIndex()):(he.skip(we[0].length),we[0]):Ee.fatalError("processing instruction is not well-formed at position "+he.getIndex())}var ye=de.getSource();if(de.char()==="["){de.skip(1);for(var xe=de.getIndex();de.getIndex()<ye.length;){if(de.skipBlanks(),de.char()==="]"){var Se=ye.substring(xe,de.getIndex());return de.skip(1),Se}var Re=null;if(de.char()==="<"&&de.char(1)==="!")switch(de.char(2)){case"E":de.char(3)==="L"?Re=de.getMatch(t.elementdecl):de.char(3)==="N"&&(Re=de.getMatch(t.EntityDecl));break;case"A":Re=de.getMatch(t.AttlistDecl);break;case"N":Re=de.getMatch(t.NotationDecl);break;case"-":Re=de.getMatch(t.Comment);break}else if(de.char()==="<"&&de.char(1)==="?")Re=Le(de,fe);else if(de.char()==="%")Re=de.getMatch(t.PEReference);else return fe.fatalError("Error detected in Markup declaration");if(!Re)return fe.fatalError("Error in internal subset at position "+de.getIndex())}return fe.fatalError("doctype internal subset is not well-formed, missing ]")}}function H(de,fe,Le,ye,xe){var Se=oe(de,fe);switch(xe?Se.char(2).toUpperCase():Se.char(2)){case"-":var Re=Se.getMatch(t.Comment);return Re?(Le.comment(Re,t.COMMENT_START.length,Re.length-t.COMMENT_START.length-t.COMMENT_END.length),Se.getIndex()):ye.fatalError("comment is not well-formed at position "+Se.getIndex());case"[":var he=Se.getMatch(t.CDSect);return he?!xe&&!Le.currentElement?ye.fatalError("CDATA outside of element"):(Le.startCDATA(),Le.characters(he,t.CDATA_START.length,he.length-t.CDATA_START.length-t.CDATA_END.length),Le.endCDATA(),Se.getIndex()):ye.fatalError("Invalid CDATA starting at position "+fe);case"D":{if(Le.doc&&Le.doc.documentElement)return ye.fatalError("Doctype not allowed inside or after documentElement at position "+Se.getIndex());if(xe?!Se.substringStartsWithCaseInsensitive(t.DOCTYPE_DECL_START):!Se.substringStartsWith(t.DOCTYPE_DECL_START))return ye.fatalError("Expected "+t.DOCTYPE_DECL_START+" at position "+Se.getIndex());if(Se.skip(t.DOCTYPE_DECL_START.length),Se.skipBlanks()<1)return ye.fatalError("Expected whitespace after "+t.DOCTYPE_DECL_START+" at position "+Se.getIndex());var Ee={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(Ee.name=Se.getMatch(t.Name),!Ee.name)return ye.fatalError("doctype name missing or contains unexpected characters at position "+Se.getIndex());if(xe&&Ee.name.toLowerCase()!=="html"&&ye.warning("Unexpected DOCTYPE in HTML document at position "+Se.getIndex()),Se.skipBlanks(),Se.substringStartsWith(t.PUBLIC)||Se.substringStartsWith(t.SYSTEM)){var we=t.ExternalID_match.exec(Se.substringFromIndex());if(!we)return ye.fatalError("doctype external id is not well-formed at position "+Se.getIndex());we.groups.SystemLiteralOnly!==void 0?Ee.systemId=we.groups.SystemLiteralOnly:(Ee.systemId=we.groups.SystemLiteral,Ee.publicId=we.groups.PubidLiteral),Se.skip(we[0].length)}else if(xe&&Se.substringStartsWithCaseInsensitive(t.SYSTEM)){if(Se.skip(t.SYSTEM.length),Se.skipBlanks()<1)return ye.fatalError("Expected whitespace after "+t.SYSTEM+" at position "+Se.getIndex());if(Ee.systemId=Se.getMatch(t.ABOUT_LEGACY_COMPAT_SystemLiteral),!Ee.systemId)return ye.fatalError("Expected "+t.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+t.SYSTEM+" at position "+Se.getIndex())}return xe&&Ee.systemId&&!t.ABOUT_LEGACY_COMPAT_SystemLiteral.test(Ee.systemId)&&ye.warning("Unexpected doctype.systemId in HTML document at position "+Se.getIndex()),xe||(Se.skipBlanks(),Ee.internalSubset=re(Se,ye)),Se.skipBlanks(),Se.char()!==">"?ye.fatalError("doctype not terminated with > at position "+Se.getIndex()):(Se.skip(1),Le.startDTD(Ee.name,Ee.publicId,Ee.systemId,Ee.internalSubset),Le.endDTD(),Se.getIndex())}default:return ye.fatalError('Not well-formed XML starting with "<!" at position '+fe)}}function ae(de,fe,Le,ye){var xe=de.substring(fe).match(t.PI);if(!xe)return ye.fatalError("Invalid processing instruction starting at position "+fe);if(xe[1].toLowerCase()==="xml"){if(fe>0)return ye.fatalError("processing instruction at position "+fe+" is an xml declaration which is only at the start of the document");if(!t.XMLDecl.test(de.substring(fe)))return ye.fatalError("xml declaration is not well-formed")}return Le.processingInstruction(xe[1],xe[2]),fe+xe[0].length}function se(){this.attributeNames=Object.create(null)}return se.prototype={setTagName:function(de){if(!t.QName_exact.test(de))throw new Error("invalid tagName:"+de);this.tagName=de},addValue:function(de,fe,Le){if(!t.QName_exact.test(de))throw new Error("invalid attribute:"+de);this.attributeNames[de]=this.length,this[this.length++]={qName:de,value:fe,offset:Le}},length:0,getLocalName:function(de){return this[de].localName},getLocator:function(de){return this[de].locator},getQName:function(de){return this[de].qName},getURI:function(de){return this[de].uri},getValue:function(de){return this[de].value}},t0.XMLReader=F,t0.parseUtils=oe,t0.parseDoctypeCommentOrCData=H,t0}var g9;function TSe(){if(g9)return Xp;g9=1;var e=yv(),t=qU(),r=Qw(),n=CSe(),i=ESe(),o=t.DOMImplementation,u=e.hasDefaultHTMLNamespace,a=e.isHTMLMimeType,f=e.isValidMimeType,p=e.MIME_TYPE,g=e.NAMESPACE,b=r.ParseError,S=i.XMLReader;function _(V){return V.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function P(V){if(V=V||{},V.locator===void 0&&(V.locator=!0),this.assign=V.assign||e.assign,this.domHandler=V.domHandler||k,this.onError=V.onError||V.errorHandler,V.errorHandler&&typeof V.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");V.errorHandler&&V.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=V.normalizeLineEndings||_,this.locator=!!V.locator,this.xmlns=this.assign(Object.create(null),V.xmlns)}P.prototype.parseFromString=function(V,U){if(!f(U))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+U+'" is not valid.');var X=this.assign(Object.create(null),this.xmlns),Z=n.XML_ENTITIES,oe=X[""]||null;u(U)?(Z=n.HTML_ENTITIES,oe=g.HTML):U===p.XML_SVG_IMAGE&&(oe=g.SVG),X[""]=oe,X.xml=X.xml||g.XML;var re=new this.domHandler({mimeType:U,defaultNamespace:oe,onError:this.onError}),H=this.locator?{}:void 0;this.locator&&re.setDocumentLocator(H);var ae=new S;ae.errorHandler=re,ae.domBuilder=re;var se=!e.isHTMLMimeType(U);return se&&typeof V!="string"&&ae.errorHandler.fatalError("source is not a string"),ae.parse(this.normalizeLineEndings(String(V)),X,Z),re.doc.documentElement||ae.errorHandler.fatalError("missing root element"),re.doc};function k(V){var U=V||{};this.mimeType=U.mimeType||p.XML_APPLICATION,this.defaultNamespace=U.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=U.onError}function M(V,U){U.lineNumber=V.lineNumber,U.columnNumber=V.columnNumber}k.prototype={startDocument:function(){var V=new o;this.doc=a(this.mimeType)?V.createHTMLDocument(!1):V.createDocument(this.defaultNamespace,"")},startElement:function(V,U,X,Z){var oe=this.doc,re=oe.createElementNS(V,X||U),H=Z.length;B(this,re),this.currentElement=re,this.locator&&M(this.locator,re);for(var ae=0;ae<H;ae++){var V=Z.getURI(ae),se=Z.getValue(ae),X=Z.getQName(ae),de=oe.createAttributeNS(V,X);this.locator&&M(Z.getLocator(ae),de),de.value=de.nodeValue=se,re.setAttributeNode(de)}},endElement:function(V,U,X){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(V,U){},endPrefixMapping:function(V){},processingInstruction:function(V,U){var X=this.doc.createProcessingInstruction(V,U);this.locator&&M(this.locator,X),B(this,X)},ignorableWhitespace:function(V,U,X){},characters:function(V,U,X){if(V=F.apply(this,arguments),V){if(this.cdata)var Z=this.doc.createCDATASection(V);else var Z=this.doc.createTextNode(V);this.currentElement?this.currentElement.appendChild(Z):/^\s*$/.test(V)&&this.doc.appendChild(Z),this.locator&&M(this.locator,Z)}},skippedEntity:function(V){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(V){V&&(V.lineNumber=0),this.locator=V},comment:function(V,U,X){V=F.apply(this,arguments);var Z=this.doc.createComment(V);this.locator&&M(this.locator,Z),B(this,Z)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(V,U,X,Z){var oe=this.doc.implementation;if(oe&&oe.createDocumentType){var re=oe.createDocumentType(V,U,X,Z);this.locator&&M(this.locator,re),B(this,re),this.doc.doctype=re}},reportError:function(V,U){if(typeof this.onError=="function")try{this.onError(V,U,this)}catch(X){throw new b("Reporting "+V+' "'+U+'" caused '+X,this.locator)}else console.error("[xmldom "+V+"]	"+U,D(this.locator))},warning:function(V){this.reportError("warning",V)},error:function(V){this.reportError("error",V)},fatalError:function(V){throw this.reportError("fatalError",V),new b(V,this.locator)}};function D(V){if(V)return`
@#[line:`+V.lineNumber+",col:"+V.columnNumber+"]"}function F(V,U,X){return typeof V=="string"?V.substr(U,X):V.length>=U+X||U?new java.lang.String(V,U,X)+"":V}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(V){k.prototype[V]=function(){return null}});function B(V,U){V.currentElement?V.currentElement.appendChild(U):V.doc.appendChild(U)}function N(V){if(V==="error")throw"onErrorStopParsing"}function $(){throw"onWarningStopParsing"}return Xp.__DOMHandler=k,Xp.DOMParser=P,Xp.normalizeLineEndings=_,Xp.onErrorStopParsing=N,Xp.onWarningStopParsing=$,Xp}var y9;function ISe(){if(y9)return ia;y9=1;var e=yv();ia.assign=e.assign,ia.hasDefaultHTMLNamespace=e.hasDefaultHTMLNamespace,ia.isHTMLMimeType=e.isHTMLMimeType,ia.isValidMimeType=e.isValidMimeType,ia.MIME_TYPE=e.MIME_TYPE,ia.NAMESPACE=e.NAMESPACE;var t=Qw();ia.DOMException=t.DOMException,ia.DOMExceptionName=t.DOMExceptionName,ia.ExceptionCode=t.ExceptionCode,ia.ParseError=t.ParseError;var r=qU();ia.Attr=r.Attr,ia.CDATASection=r.CDATASection,ia.CharacterData=r.CharacterData,ia.Comment=r.Comment,ia.Document=r.Document,ia.DocumentFragment=r.DocumentFragment,ia.DocumentType=r.DocumentType,ia.DOMImplementation=r.DOMImplementation,ia.Element=r.Element,ia.Entity=r.Entity,ia.EntityReference=r.EntityReference,ia.LiveNodeList=r.LiveNodeList,ia.NamedNodeMap=r.NamedNodeMap,ia.Node=r.Node,ia.NodeList=r.NodeList,ia.Notation=r.Notation,ia.ProcessingInstruction=r.ProcessingInstruction,ia.Text=r.Text,ia.XMLSerializer=r.XMLSerializer;var n=TSe();return ia.DOMParser=n.DOMParser,ia.normalizeLineEndings=n.normalizeLineEndings,ia.onErrorStopParsing=n.onErrorStopParsing,ia.onWarningStopParsing=n.onWarningStopParsing,ia}var PSe=ISe();const VU=(function(){const e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(N){if(!N||!N.length)return 0;for(var $=0,V=0;$<N.length;$++)V=(V<<5)-V+N.charCodeAt($)|0;return V}function i(N,$){return N.getElementsByTagName($)}function o(N,$){return N.getAttribute($)}function u(N,$){return parseFloat(o(N,$))}function a(N,$){const V=i(N,$);return V.length?V[0]:null}function f(N){return N.normalize&&N.normalize(),N}function p(N){for(var $=0,V=[];$<N.length;$++)V[$]=parseFloat(N[$]);return V}function g(N){return N&&f(N),N&&N.textContent||""}function b(N,$){let V={},U,X;for(X=0;X<$.length;X++)U=a(N,$[X]),U&&(V[$[X]]=g(U));return V}function S(N,$){for(const V in $)N[V]=$[V]}function _(N){return p(N.replace(e,"").split(","))}function P(N){const $=N.replace(t,"").split(r),V=[];for(let U=0;U<$.length;U++)V.push(_($[U]));return V}function k(N){let $=[u(N,"lon"),u(N,"lat")],V=a(N,"ele"),U=a(N,"gpxtpx:hr")||a(N,"hr"),X=a(N,"time"),Z;return V&&(Z=parseFloat(g(V)),isNaN(Z)||$.push(Z)),{coordinates:$,time:X?g(X):null,heartRate:U?parseFloat(g(U)):null}}function M(){return{type:"FeatureCollection",features:[]}}let D;if(typeof XMLSerializer<"u")D=new XMLSerializer;else{const N=typeof process=="object"&&!process.browser,$=typeof Titanium=="object";if(typeof exports=="object"&&(N||$))D=PSe.XMLSerializer;else throw new Error("Unable to initialize serializer")}function F(N){return N.xml!==void 0?N.xml:D.serializeToString(N)}return{kml:function(N){const $=M(),V={},U={},X={},Z=["Polygon","LineString","Point","Track","gx:Track"],oe=i(N,"Placemark"),re=i(N,"Style"),H=i(N,"StyleMap");for(let ye=0;ye<re.length;ye++){const xe=n(F(re[ye])).toString(16);V["#"+o(re[ye],"id")]=xe,U[xe]=re[ye]}for(let ye=0;ye<H.length;ye++){V["#"+o(H[ye],"id")]=n(F(H[ye])).toString(16);const xe=i(H[ye],"Pair"),Se={};for(let Re=0;Re<xe.length;Re++)Se[g(a(xe[Re],"key"))]=g(a(xe[Re],"styleUrl"));X["#"+o(H[ye],"id")]=Se}for(let ye=0;ye<oe.length;ye++)$.features=$.features.concat(Le(oe[ye]));function ae(ye){let xe,Se;return ye=ye||"",ye.substr(0,1)==="#"&&(ye=ye.substr(1)),(ye.length===6||ye.length===3)&&(xe=ye),ye.length===8&&(Se=parseInt(ye.substr(0,2),16)/255,xe="#"+ye.substr(6,2)+ye.substr(4,2)+ye.substr(2,2)),[xe,isNaN(Se)?void 0:Se]}function se(ye){return p(ye.split(" "))}function de(ye){let xe=i(ye,"coord"),Se=[],Re=[];xe.length===0&&(xe=i(ye,"gx:coord"));for(let Ee=0;Ee<xe.length;Ee++)Se.push(se(g(xe[Ee])));const he=i(ye,"when");for(let Ee=0;Ee<he.length;Ee++)Re.push(g(he[Ee]));return{coords:Se,times:Re}}function fe(ye){let xe,Se,Re,he,Ee,we=[],Ne=[];if(a(ye,"MultiGeometry"))return fe(a(ye,"MultiGeometry"));if(a(ye,"MultiTrack"))return fe(a(ye,"MultiTrack"));if(a(ye,"gx:MultiTrack"))return fe(a(ye,"gx:MultiTrack"));for(Re=0;Re<Z.length;Re++)if(Se=i(ye,Z[Re]),Se){for(he=0;he<Se.length;he++)if(xe=Se[he],Z[Re]==="Point")we.push({type:"Point",coordinates:_(g(a(xe,"coordinates")))});else if(Z[Re]==="LineString")we.push({type:"LineString",coordinates:P(g(a(xe,"coordinates")))});else if(Z[Re]==="Polygon"){const Fe=i(xe,"LinearRing"),Xe=[];for(Ee=0;Ee<Fe.length;Ee++)Xe.push(P(g(a(Fe[Ee],"coordinates"))));we.push({type:"Polygon",coordinates:Xe})}else if(Z[Re]==="Track"||Z[Re]==="gx:Track"){const Fe=de(xe);we.push({type:"LineString",coordinates:Fe.coords}),Fe.times.length&&Ne.push(Fe.times)}}return{geoms:we,coordTimes:Ne}}function Le(ye){let xe=fe(ye),Se,Re={},he=g(a(ye,"name")),Ee=g(a(ye,"address")),we=g(a(ye,"styleUrl")),Ne=g(a(ye,"description")),Fe=a(ye,"TimeSpan"),Xe=a(ye,"TimeStamp"),Be=a(ye,"ExtendedData"),ot=a(ye,"LineStyle"),Ke=a(ye,"PolyStyle"),it=a(ye,"visibility");if(!xe.geoms.length)return[];if(he&&(Re.name=he),Ee&&(Re.address=Ee),we){we[0]!=="#"&&(we="#"+we),Re.styleUrl=we,V[we]&&(Re.styleHash=V[we]),X[we]&&(Re.styleMapHash=X[we],Re.styleHash=V[X[we].normal]);const Nt=U[Re.styleHash];if(Nt){ot||(ot=a(Nt,"LineStyle")),Ke||(Ke=a(Nt,"PolyStyle"));const st=a(Nt,"IconStyle");if(st){const $e=a(st,"Icon");if($e){const Zt=g(a($e,"href"));Zt&&(Re.icon=Zt)}}}}if(Ne&&(Re.description=Ne),Fe){const Nt=g(a(Fe,"begin")),st=g(a(Fe,"end"));Re.timespan={begin:Nt,end:st}}if(Xe&&(Re.timestamp=g(a(Xe,"when"))),ot){const Nt=ae(g(a(ot,"color"))),st=Nt[0],$e=Nt[1],Zt=parseFloat(g(a(ot,"width")));st&&(Re.stroke=st),isNaN($e)||(Re["stroke-opacity"]=$e),isNaN(Zt)||(Re["stroke-width"]=Zt)}if(Ke){const Nt=ae(g(a(Ke,"color"))),st=Nt[0],$e=Nt[1],Zt=g(a(Ke,"fill")),$t=g(a(Ke,"outline"));st&&(Re.fill=st),isNaN($e)||(Re["fill-opacity"]=$e),Zt&&(Re["fill-opacity"]=Zt==="1"?Re["fill-opacity"]||1:0),$t&&(Re["stroke-opacity"]=$t==="1"?Re["stroke-opacity"]||1:0)}if(Be){const Nt=i(Be,"Data"),st=i(Be,"SimpleData");for(Se=0;Se<Nt.length;Se++)Re[Nt[Se].getAttribute("name")]=g(a(Nt[Se],"value"));for(Se=0;Se<st.length;Se++)Re[st[Se].getAttribute("name")]=g(st[Se])}it&&(Re.visibility=g(it)),xe.coordTimes.length&&(Re.coordTimes=xe.coordTimes.length===1?xe.coordTimes[0]:xe.coordTimes);const ke={type:"Feature",geometry:xe.geoms.length===1?xe.geoms[0]:{type:"GeometryCollection",geometries:xe.geoms},properties:Re};return o(ye,"id")&&(ke.id=o(ye,"id")),[ke]}return $},gpx:function(N){let $,V=i(N,"trk"),U=i(N,"rte"),X=i(N,"wpt"),Z=M(),oe;for($=0;$<V.length;$++)oe=ae(V[$]),oe&&Z.features.push(oe);for($=0;$<U.length;$++)oe=se(U[$]),oe&&Z.features.push(oe);for($=0;$<X.length;$++)Z.features.push(de(X[$]));function re(ye,xe){for(let Se=0;Se<xe;Se++)ye.push(null);return ye}function H(ye,xe){const Se=i(ye,xe),Re=[],he=[],Ee=[],we=Se.length;if(we<2)return{};for(let Ne=0;Ne<we;Ne++){const Fe=k(Se[Ne]);Re.push(Fe.coordinates),Fe.time&&he.push(Fe.time),(Fe.heartRate||Ee.length)&&(Ee.length||re(Ee,Ne),Ee.push(Fe.heartRate||null))}return{line:Re,times:he,heartRates:Ee}}function ae(ye){let xe=i(ye,"trkseg"),Se=[],Re=[],he=[],Ee;for(let Ne=0;Ne<xe.length;Ne++)if(Ee=H(xe[Ne],"trkpt"),Ee&&(Ee.line&&Se.push(Ee.line),Ee.times&&Ee.times.length&&Re.push(Ee.times),he.length||Ee.heartRates&&Ee.heartRates.length)){if(!he.length)for(let Fe=0;Fe<Ne;Fe++)he.push(re([],Se[Fe].length));Ee.heartRates&&Ee.heartRates.length?he.push(Ee.heartRates):he.push(re([],Ee.line.length||0))}if(Se.length===0)return;const we=Le(ye);return S(we,fe(a(ye,"extensions"))),Re.length&&(we.coordTimes=Se.length===1?Re[0]:Re),he.length&&(we.heartRates=Se.length===1?he[0]:he),{type:"Feature",properties:we,geometry:{type:Se.length===1?"LineString":"MultiLineString",coordinates:Se.length===1?Se[0]:Se}}}function se(ye){const xe=H(ye,"rtept");if(!xe.line)return;const Se=Le(ye);return S(Se,fe(a(ye,"extensions"))),{type:"Feature",properties:Se,geometry:{type:"LineString",coordinates:xe.line}}}function de(ye){const xe=Le(ye);return S(xe,b(ye,["sym"])),{type:"Feature",properties:xe,geometry:{type:"Point",coordinates:k(ye).coordinates}}}function fe(ye){const xe={};if(ye){const Se=a(ye,"line");if(Se){const Re=g(a(Se,"color")),he=parseFloat(g(a(Se,"opacity"))),Ee=parseFloat(g(a(Se,"width")));Re&&(xe.stroke=Re),isNaN(he)||(xe["stroke-opacity"]=he),isNaN(Ee)||(xe["stroke-width"]=Ee*96/25.4)}}return xe}function Le(ye){const xe=b(ye,["name","cmt","desc","type","time","keywords"]),Se=i(ye,"link");Se.length&&(xe.links=[]);for(let Re=0,he;Re<Se.length;Re++)he={href:o(Se[Re],"href")},S(he,b(Se[Re],["text","type"])),xe.links.push(he);return xe}return Z}}})(),w2=e=>{const[t,r]=ee.useState(),[n,i]=ee.useState([]),o=u=>{try{i([]);const f=new DOMParser().parseFromString(u,"application/xml");f.querySelector("metadata")?.childNodes.forEach(b=>{let S=b.textContent;const _=b.nodeName;if(b.nodeName==="link"&&(S=b.getAttribute("href")??""),S?.trim().length){const P={title:_,value:S,id:new Date().getTime()};i(k=>[...k,P])}});const g=VU.gpx(f);r(g)}catch(a){console.log(a)}};return ee.useEffect(()=>{e.data&&o(e.data)},[e.data]),{geojson:t,metadata:n}};w2.defaultProps={data:void 0};try{w2.displayName="useGpx",w2.__docgenInfo={description:"useGpx hook converts GPX data to GeoJSON",displayName:"useGpx",props:{data:{defaultValue:{value:"undefined"},description:"a string containing GPX data that is supposed to be parsed and converted to GeoJSON by this hook",name:"data",required:!1,type:{name:"string | undefined"}}}}}catch{}const S2=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.layerId}),r=ee.useRef(new lw.Popup({closeButton:!1,closeOnClick:!0}));return ee.useEffect(()=>{!t.map||!e.layerId||t.map.on("mouseenter",e.layerId,n=>{if(!t.map)return;const i=n?.features?.[0].geometry.coordinates.slice();let o="";if(n?.features?.[0]&&typeof e.getPopupContent=="function"&&(o=e.getPopupContent(n.features[0])),i?.[0]){for(;Math.abs(n.lngLat.lng-i[0])>180;)i[0]+=n.lngLat.lng>i[0]?360:-360;r.current.setLngLat(i).setHTML(o).addTo(t.map.map)}},t.componentId)},[t.map]),K.jsx(K.Fragment,{})};S2.defaultProps={mapId:void 0};try{S2.displayName="LayerHoverPopup",S2.__docgenInfo={description:"useLayerHoverPopup hook registers a mouseenter event to display feature properties in a MapLibre popup if a feature on the configured layer is hovered",displayName:"LayerHoverPopup",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of an existing layer in the mapLibre instance this event will be registered to",name:"layerId",required:!1,type:{name:"string | undefined"}},getPopupContent:{defaultValue:null,description:"",name:"getPopupContent",required:!0,type:{name:"(feature: Feature<Geometry, GeoJsonProperties>) => string"}}}}}catch{}const v9=e=>{const t=w2({data:e.gpxData}),r=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=ee.useRef("gpx-viewer-source-"+Bu()),i=ee.useRef("importer-layer-lines-"+Bu()),o=ee.useRef("importer-layer-points-"+Bu());return S2({layerId:o.current,getPopupContent:u=>u?.properties?.name}),DP({mapId:e.mapId,sourceId:n.current,source:{type:"geojson",data:t.geojson||yh([])}}),ph({layerId:i.current,options:{type:"line",paint:{"line-width":4,"line-color":"rgba(212, 55, 23,0.5)"},source:n.current},insertBeforeLayer:e.insertBeforeLayer}),ph({layerId:o.current,options:{type:"circle",paint:{"circle-color":"rgba(72, 77, 99,0.5)","circle-radius":7},filter:["==","$type","Point"],source:n.current},insertBeforeLayer:e.insertBeforeLayer}),ee.useEffect(()=>{if(!r.map||!t.geojson)return;typeof e.onParseGpxData=="function"&&e.onParseGpxData(t);const u=Ec(t.geojson);r.map.map.fitBounds(u)},[t]),K.jsx(K.Fragment,{})};try{v9.displayName="MlGpxViewer",v9.__docgenInfo={description:"MlGpxViewer visualizes a given GPX Track on the map",displayName:"MlGpxViewer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapHook",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance",name:"idPrefix",required:!1,type:{name:"string | undefined"}},gpxData:{defaultValue:null,description:"",name:"gpxData",required:!0,type:{name:"string | undefined"}},onParseGpxData:{defaultValue:null,description:"",name:"onParseGpxData",required:!0,type:{name:"(arg0: { geojson: FeatureCollection<Geometry, GeoJsonProperties> | undefined; metadata: MetadataType[]; }) => void"}}}}}catch{}const ASe=gt.createContext({}),kSe=ASe.Provider,b9=({children:e})=>{const[t,r]=ee.useState({type:"FeatureCollection",features:[]}),i={data:t,setData:r,getEmptyFeatureCollection:()=>({type:"FeatureCollection",features:[]})};return K.jsx(kSe,{value:i,children:e})};try{b9.displayName="GeoJsonProvider",b9.__docgenInfo={description:"",displayName:"GeoJsonProvider",props:{}}}catch{}const LI=()=>{const e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e?.layers?e.layers:"[]"),e},ST=LI(),_9=e=>{const t=ee.useContext(vp),r=ee.useRef(!1),n=ee.useRef(null),[i,o]=ee.useState(void 0),u=ee.useRef({}),a=ee.useRef((e.idPrefix?e.idPrefix:"MlShareMapState-")+Bu()),f=uw({watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),p=ee.useRef(!1),g=ee.useRef(null),b=ee.useRef({viewport:{center:!1,bearing:!1,pitch:!1,zoom:!1},layers:{...u}}),S=ee.useRef({}),_=ee.useCallback(()=>{if(!e.active)return;const M=[];for(const B in f.layers)M.push({id:f.layers[B]?.id,type:f.layers[B]?.type,visible:f.layers[B]?.visible});P();const D=new URLSearchParams({...LI(),...S.current,layers:JSON.stringify(M)});JSON.parse(Object.fromEntries(D).layers).forEach(B=>{u.current[B.id]=!1});const F=new URLSearchParams(window.location.search);D.toString()!==F.toString()&&window.history.pushState({...S.current},document.title,"?"+D.toString())},[f.layers,e.active]);ee.useEffect(()=>{const M=a.current;return S.current=LI(),()=>{n.current&&(n.current.cleanup(M),n.current=null),r.current=!1}},[]),ee.useEffect(()=>{n.current&&_()},[_]),ee.useEffect(()=>{if(!n.current)return;const M=_;return n.current.on("moveend",M,a.current),()=>{n.current?.map.off("moveend",M)}},[_,i]),ee.useEffect(()=>{!t?.mapExists?.(e.mapId)||r.current||(r.current=!0,n.current=t.getMap(e.mapId),o(n.current),S.current.lat&&S.current.lng&&k())},[t.mapIds,t,e.mapId,e.active]),ee.useEffect(()=>{if(f?.layers?.length){typeof g.current>"u"&&(g.current=null,ST?.layers?.forEach(M=>{g.current?.[M.id]&&(g.current[M.id]=!1)}));for(const M in g.current){let D=!0;if(g.current[M]===!1&&(D=!1),D)return}ST.layers&&ST.layers.forEach(M=>{n.current?.map.getLayer(M.id)&&g.current?.[M.id]===!1&&(g.current[M.id]=!0,n.current.map?.getLayer(M.id)?.setLayoutProperty("visibility",M.visible?"visible":"none"))})}},[f.layers,e.mapId,e.active]),ee.useEffect(()=>{i&&f.layers&&(e.active||i.cleanup(a.current))},[e.active,i,f.layers]);const P=()=>{S.current.lat=n.current?.map.getCenter().lat,S.current.lng=n.current?.map.getCenter().lng,S.current.zoom=n.current?.map.getZoom(),S.current.bearing=n.current?.map.getBearing(),S.current.pitch=n.current?.map.getPitch()},k=()=>{b.current.viewport.center||(b.current.viewport.center=!0,S.current.lng&&S.current.lat&&n.current?.map.setCenter([S.current.lng,S.current.lat]),S.current.zoom&&n.current?.map.setZoom(S.current.zoom),S.current.bearing&&n.current?.map.setBearing(S.current.bearing),S.current.pitch&&n.current?.map.setPitch(S.current.pitch)),p.current=!0};return window.onpopstate=M=>{M.state&&M.state.lng&&M.state.lat&&M.state.zoom&&n.current?.map.easeTo({zoom:M.state.zoom,center:[M.state.lng,M.state.lat]})},K.jsx(K.Fragment,{})};try{_9.displayName="MlShareMapState",_9.__docgenInfo={description:"",displayName:"MlShareMapState",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"",name:"idPrefix",required:!1,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function MSe(e,t){const r=(u,a,f,p,g)=>{const b=Wl([[u,a],[p,g]]),S=Jme(b,5,{units:"meters"}),_=S.geometry.coordinates[0][0],P=S.geometry.coordinates[0][1],k=S.geometry.coordinates[1][0],M=S.geometry.coordinates[1][1];return Mw([[[u,a],[p,g],[k,M],[_,P],[u,a]]],{height:f*t})},n=(u,a,f)=>u*(1-f)+a*f,i=[];return e.line.geometry.coordinates.forEach((u,a)=>{if(e.line.geometry.coordinates[a+1]&&Array.isArray(u)){let p=~~(Lw([u[0],u[1]],[e.line.geometry.coordinates[a+1][0],e.line.geometry.coordinates[a+1][1]],{units:"kilometers"})*1e3/10);p=p<1?1:p;for(let g=0;g<p;g++){const b=n(e.line.geometry.coordinates[a][0],e.line.geometry.coordinates[a+1][0],g/p),S=n(e.line.geometry.coordinates[a][1],e.line.geometry.coordinates[a+1][1],g/p),_=n(e.line.geometry.coordinates[a][2]-e.min,e.line.geometry.coordinates[a+1][2]-e.min,g/p),P=n(e.line.geometry.coordinates[a][0],e.line.geometry.coordinates[a+1][0],(g+1)/p),k=n(e.line.geometry.coordinates[a][1],e.line.geometry.coordinates[a+1][1],(g+1)/p),M=r(b,S,_,P,k);i.push(M)}}}),yh(i)}const x9=["interpolate",["linear"],["get","height"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"yellow"],w9=e=>{const t=ee.useRef("elevationprofile-"+Bu()),r=ee.useRef("elevationprofile-layer-"+Bu()),n=e.elevationFactor||1,i=ee.useMemo(()=>{if(!e?.geojson?.features)return;const a=e.geojson.features?.find(b=>b.geometry.type==="LineString");if(!a||!a.geometry)return;const f=a.geometry.coordinates.map(b=>b[2]),p=Math.min(...f);let g=Math.max(...f)-p;return g=g===0?1:g,{max:g,min:p,line:a}},[e.geojson]),o=ee.useMemo(()=>i?["interpolate",["linear"],["get","height"],0,"rgb(0,255,55)",i.max*n,"rgb(255,0,0)"]:x9,[i,e.elevationFactor]),u=ee.useMemo(()=>!e.geojson?.features||!i?void 0:MSe(i,n),[i,n]);return DP({mapId:e.mapId,sourceId:t.current,source:{type:"geojson",data:u||yh([])}}),ph({layerId:r.current,options:{source:t.current,type:"fill-extrusion",paint:{"fill-extrusion-height":["get","height"],"fill-extrusion-opacity":.9,"fill-extrusion-color":o||x9}},insertBeforeLayer:e.insertBeforeLayer}),K.jsx(K.Fragment,{})};try{w9.displayName="MlSpatialElevationProfile",w9.__docgenInfo={description:"",displayName:"MlSpatialElevationProfile",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties> | geojson | undefined"}},idPrefix:{defaultValue:null,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance",name:"idPrefix",required:!1,type:{name:"string | undefined"}},elevationFactor:{defaultValue:null,description:"Number describes the factor of the height of the elevation",name:"elevationFactor",required:!1,type:{name:"number | undefined"}},insertBeforeLayer:{defaultValue:null,description:`The layerId of an existing layer this layer should be rendered visually beneath
https://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}}}catch{}const Ay=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=ee.useRef(e.layerId||"MlVectorTileLayer-"+t.componentId),n=ee.useRef({}),i=ee.useRef({}),o=ee.useRef(!1),u=ee.useCallback(()=>{t.map&&(o.current=!0,t.map.map.getSource(r.current)&&t.cleanup(),t.map.map.getSource(r.current)||t.map.addSource(r.current,{type:"vector",tiles:[e.url||""],attribution:"",minzoom:0,maxzoom:14,...e.sourceOptions},t.componentId),e.layers.forEach(f=>{t.map&&(t.map.addLayer({source:r.current,minzoom:0,maxzoom:22,layout:{},paint:{"line-opacity":.5,"line-color":"rgb(80, 80, 80)","line-width":2},...f},e.insertBeforeLayer,t.componentId),n.current[f.id]=JSON.stringify(f.paint),i.current[f.id]=JSON.stringify(f.layout),t.map.on("styledata",()=>{o.current&&!t.map?.map.getSource(r.current)&&(console.log("Recreate Layer "+r.current),u())},t.componentId))}))},[t.map,e]),a=ee.useCallback(()=>{o.current&&e.layers.forEach(f=>{if(t.map&&t.map.map.getLayer(f.id)){const p=JSON.stringify(f.paint);if(p!==n.current[f.id])for(const b in f.paint)t.map.setPaintProperty(f.id,b,f.paint[b]);n.current[f.id]=p;const g=JSON.stringify(f.layout);if(g!==i.current[f.id])for(const b in f.layout)t.map.setLayoutProperty(f.id,b,f.layout[b]);i.current[f.id]=g}})},[t.map,e.layers]);return ee.useEffect(()=>{o.current||u()},[u]),ee.useEffect(()=>{!t.map||!o.current||u()},[e.layers.length,t.map]),ee.useEffect(()=>{!t.map||!o.current||a()},[e.layers,t.map]),K.jsx(K.Fragment,{})};try{Ay.displayName="MlVectorTileLayer",Ay.__docgenInfo={description:`Adds a vector-tile source and 0...n vector-tile-layers to the MapLibre instance referenced by
props.mapId`,displayName:"MlVectorTileLayer",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"VectorSourceSpecification | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | undefined"}},layers:{defaultValue:null,description:"",name:"layers",required:!0,type:{name:"ExtendedLayerSpecification[]"}}}}}catch{}const S9=e=>{const[t,r]=ee.useState(),n=ha({mapId:e.mapId}),i=ee.useRef(e.mlGeoJsonLayerProps?.layerId||"MlOgcApiFeature-"+n.componentId),o=()=>{const u=new URL(e.ogcApiUrl);if(e.ogcApiFeatureParams&&Object.entries(e.ogcApiFeatureParams).forEach(([a,f])=>{f!=null&&u.searchParams.append(a,f.toString())}),e.reloadFeaturesOnMapMove){const a=n?.map?.getBounds().getSouthWest(),f=n?.map?.getBounds().getNorthEast(),p=`${a?.lng},${a?.lat},${f?.lng},${f?.lat}`;u.searchParams.append("bbox",p)}return u.toString()};return ee.useEffect(()=>{if(!n.map)return;const u=()=>{const a=o();fetch(a).then(f=>{if(!f.ok)throw new Error("Error fetching OGC features");return f.json()}).then(f=>{r(f)}).catch(f=>{console.log(f),r(void 0)})};return u(),e.reloadFeaturesOnMapMove&&n.map.on("moveend",u),()=>{n?.map?.off&&n.map.off("moveend",u)}},[n.map,e.ogcApiFeatureParams,e.ogcApiUrl]),ee.useEffect(()=>{!n.map||!n.map.map.style.getLayer(i.current)||(e.visible?n.map.map.setLayoutProperty(i.current,"visibility","visible"):n.map.map.setLayoutProperty(i.current,"visibility","none"))},[e.visible,n.map]),K.jsx(K.Fragment,{children:t&&K.jsx(Zu,{geojson:t,layerId:i.current,...e.mlGeoJsonLayerProps})})};try{S9.displayName="MlOgcApiFeatures",S9.__docgenInfo={description:"",displayName:"MlOgcApiFeatures",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},ogcApiUrl:{defaultValue:null,description:"The url of OGC API",name:"ogcApiUrl",required:!0,type:{name:"URL"}},ogcApiFeatureParams:{defaultValue:null,description:"The additional query parameters of OGC API",name:"ogcApiFeatureParams",required:!1,type:{name:"OgcApiFeaturesParamsTypes | undefined"}},reloadFeaturesOnMapMove:{defaultValue:null,description:"Fetches the features everytime (based on the current bbox) when the map gets moved",name:"reloadFeaturesOnMapMove",required:!1,type:{name:"boolean | undefined"}},mlGeoJsonLayerProps:{defaultValue:null,description:"Geojson Layer props. But omit 'geojson' because it gets set from the OGC API Feature call",name:"mlGeoJsonLayerProps",required:!1,type:{name:'Omit<MlGeoJsonLayerProps, "geojson"> | undefined'}}}}}catch{}const C9=e=>{const t=ee.useContext(vp),r=ee.useRef(!1),n=ee.useRef(void 0),i=ee.useRef("MlWmsFeatureInfoPopup-"+Bu());return ee.useEffect(()=>{const o=i.current;return()=>{n.current&&(n.current.cleanup(o),n.current=void 0),r.current=!1}},[]),ee.useEffect(()=>{!t.mapExists(e.mapId)||r.current||(r.current=!0,n.current=t.getMap(e.mapId),n.current.setCenter([7.132122000552613,50.716405378037706]))},[t.mapIds,t,e.mapId]),K.jsx(K.Fragment,{})};try{C9.displayName="MlWmsFeatureInfoPopup",C9.__docgenInfo={description:"TODO: Add short & useful description",displayName:"MlWmsFeatureInfoPopup",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const LSe={urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:"256",height:"256",Transparent:"true",styles:""}},C2=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=ee.useRef(!1),n=ee.useRef(e.layerId||"MlWmsLayer-"+t.componentId),i=ee.useMemo(()=>{let u,a=e.url;e.url.indexOf("?")!==-1&&(u=e.url.split("?"),a=u[0]);const f=new URLSearchParams(u?.[1]),p={...LSe.urlParameters,...Object.fromEntries(f),...e.urlParameters},g=new URLSearchParams(p),b=decodeURIComponent(g.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");return a+"?"+b},[e.urlParameters,e.url]),o=ee.useCallback(()=>{t.map&&(r.current=!0,t.map.map.getLayer(n.current)&&t.cleanup(),t.map.addSource(n.current,{type:"raster",tiles:[i],tileSize:256,attribution:e.attribution??"",...e.sourceOptions},t.componentId),t.map.addLayer({id:n.current,type:"raster",source:n.current,...e.layerOptions},e.insertBeforeLayer,t.componentId),t.map.on("styledata",()=>{r.current&&!t.map?.map.getLayer(n.current)&&(console.log("Recreate Layer "+n.current),o())},t.componentId),e.visible===!1&&t.map.map.setLayoutProperty(n.current,"visibility","none"))},[t.map,e,i]);return ee.useEffect(()=>{r.current&&t?.map?.map?.getSource?.(n.current)?.tiles?.[0]===i||o()},[o]),ee.useEffect(()=>{!t.map||!r.current||(e.visible===void 0||e.visible?t.map.map.setLayoutProperty(n.current,"visibility","visible"):t.map.map.setLayoutProperty(n.current,"visibility","none"))},[e.visible,t.map]),K.jsx(K.Fragment,{})};try{C2.displayName="MlWmsLayer",C2.__docgenInfo={description:"Adds a WMS raster source & layer to the maplibre-gl instance",displayName:"MlWmsLayer",props:{urlParameters:{defaultValue:null,description:"",name:"urlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:null,description:"",name:"attribution",required:!1,type:{name:"string | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"RasterSourceSpecification | undefined"}},layerOptions:{defaultValue:null,description:"",name:"layerOptions",required:!1,type:{name:"RasterLayerSpecification | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}}}}}catch{}/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Qi=e=>e!==void 0,$U=(e,t,r)=>t in e?e[t]:e[t]=r;const T1={ELEMENT:1,TEXT:3,CDATA_SECTION:4};class RSe{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return eS(t,r).join("")}}function eS(e,t){return GU(e,t,[]).join("")}function GU(e,t,r){if(e.nodeType===T1.CDATA_SECTION||e.nodeType===T1.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)GU(n,t,r)}return r}function DSe(e,t,r,n){for(var i=OSe(t);i;i=NSe(i)){var o=i.namespaceURI||null,u=e[o];if(Qi(u)){var a=u[i.localName];Qi(a)&&a.call(n,i,r)}}}function OSe(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==T1.ELEMENT;)t=t.nextSibling;return t}function NSe(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==T1.ELEMENT;)t=t.nextSibling;return t}function Kl(e,t,r){return FSe(e,t,r)}function FSe(e,t,r){var n=Qi(r)?r:{},i,o;for(i=0,o=e.length;i<o;++i)n[e[i]]=t;return n}function UU(e,t){return(function(r,n){var i=e.call(Qi(t)?t:this,r,n);if(Qi(i)){var o=n[n.length-1];o.push(i)}})}function Ll(e,t,r,n,i){return n.push(e),DSe(t,r,n,i),n.pop()}function Qn(e,t,r){return(function(n,i){let o=e.call(Qi(r)?r:this,n,i);if(Qi(o)){var u=i[i.length-1],a=Qi(t)?t:n.localName;u[a]=o}})}function Hu(e,t,r){return(function(n,i){var o=e.call(Qi(r)?r:this,n,i);if(Qi(o)){var u=i[i.length-1],a=Qi(t)?t:n.localName,f=$U(u,a,[]);f.push(o)}})}const BSe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function zSe(e){return e.replace(BSe,"")}function ym(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Qi(t[1])||!1}function vy(e){return sh(eS(e,!1))}function sh(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function CT(e){return E2(eS(e,!1))}function E2(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Sa(e){return zSe(eS(e,!1))}const jSe="http://www.w3.org/1999/xlink";function Yk(e){return e.getAttributeNS(jSe,"href")}function qSe(e,t){return Ll({},p5e,e,t)}function HU(e){return[sh(e.getAttribute("minx")),sh(e.getAttribute("miny")),sh(e.getAttribute("maxx")),sh(e.getAttribute("maxy"))]}function VSe(e,t){const r=HU(e),n=[sh(e.getAttribute("resx")),sh(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function $Se(e,t){const r=HU(e);if(!(!Qi(r[0])||!Qi(r[1])||!Qi(r[2])||!Qi(r[3])))return r}function GSe(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function USe(e,t){const r=Ll({},m5e,e,t);if(!Qi(r))return;const n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,u=r.northBoundLatitude;if(!(!Qi(n)||!Qi(i)||!Qi(o)||!Qi(u)))return[n,i,o,u]}function HSe(e,t){return Ll({},l5e,e,t)}function WSe(e,t){return Ll({},u5e,e,t)}function XSe(e,t){return Ll({},c5e,e,t)}function YSe(e,t){return Ll({},d5e,e,t)}function ZSe(e,t){return Ll({},f5e,e,t)}function KSe(e,t){return Ll([],h5e,e,t)}function JSe(e,t){const r=ym(e.getAttribute("queryable"));return Ll({queryable:Qi(r)?r:!1},YU,e,t)}function QSe(e,t){var r=t[t.length-1];const n=Ll({},YU,e,t);if(!Qi(n))return;let i=ym(e.getAttribute("queryable"));Qi(i)||(i=r.queryable),n.queryable=Qi(i)?i:!1;let o=E2(e.getAttribute("cascaded"));Qi(o)||(o=r.cascaded),n.cascaded=o;let u=ym(e.getAttribute("opaque"));Qi(u)||(u=r.opaque),n.opaque=Qi(u)?u:!1;let a=ym(e.getAttribute("noSubsets"));Qi(a)||(a=r.noSubsets),n.noSubsets=Qi(a)?a:!1;let f=sh(e.getAttribute("fixedWidth"));Qi(f)||(f=r.fixedWidth),n.fixedWidth=f;let p=sh(e.getAttribute("fixedHeight"));Qi(p)||(p=r.fixedHeight),n.fixedHeight=p;const g=["Style","CRS","AuthorityURL"];for(let S=0,_=g.length;S<_;S++){const P=g[S],k=r[P];if(Qi(k)){let M=$U(n,P,[]);M=M.concat(k),n[P]=M}}const b=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let S=0,_=b.length;S<_;S++){const P=b[S],k=n[P];if(!Qi(k)){const M=r[P];n[P]=M}}return n}function e5e(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:ym(e.getAttribute("multipleValues")),nearestValue:ym(e.getAttribute("nearestValue")),current:ym(e.getAttribute("current")),values:Sa(e)}}function vh(e,t){return Ll({},x5e,e,t)}function t5e(e,t){return Ll({},g5e,e,t)}function r5e(e,t){return Ll({},v5e,e,t)}function n5e(e,t){return Ll({},b5e,e,t)}function ET(e,t){return Ll({},y5e,e,t)}function WU(e,t){var r=vh(e,t);if(Qi(r)){const n=[E2(e.getAttribute("width")),E2(e.getAttribute("height"))];return r.size=n,r}}function i5e(e,t){var r=vh(e,t);if(Qi(r))return r.name=e.getAttribute("name"),r}function a5e(e,t){var r=vh(e,t);if(Qi(r))return r.type=e.getAttribute("type"),r}function o5e(e,t){return Ll({},_5e,e,t)}function XU(e,t){return Ll([],w5e,e,t)}const Jl=[null,"http://www.opengis.net/wms"],s5e=Kl(Jl,{Service:Qn(WSe),Capability:Qn(HSe)}),l5e=Kl(Jl,{Request:Qn(t5e),Exception:Qn(KSe),Layer:Qn(JSe)}),u5e=Kl(Jl,{Name:Qn(Sa),Title:Qn(Sa),Abstract:Qn(Sa),KeywordList:Qn(XU),OnlineResource:Qn(Yk),ContactInformation:Qn(XSe),Fees:Qn(Sa),AccessConstraints:Qn(Sa),LayerLimit:Qn(CT),MaxWidth:Qn(CT),MaxHeight:Qn(CT)}),c5e=Kl(Jl,{ContactPersonPrimary:Qn(YSe),ContactPosition:Qn(Sa),ContactAddress:Qn(ZSe),ContactVoiceTelephone:Qn(Sa),ContactFacsimileTelephone:Qn(Sa),ContactElectronicMailAddress:Qn(Sa)}),d5e=Kl(Jl,{ContactPerson:Qn(Sa),ContactOrganization:Qn(Sa)}),f5e=Kl(Jl,{AddressType:Qn(Sa),Address:Qn(Sa),City:Qn(Sa),StateOrProvince:Qn(Sa),PostCode:Qn(Sa),Country:Qn(Sa)}),h5e=Kl(Jl,{Format:UU(Sa)}),YU=Kl(Jl,{Name:Qn(Sa),Title:Qn(Sa),Abstract:Qn(Sa),KeywordList:Qn(XU),CRS:Hu(Sa),SRS:Hu(Sa),EX_GeographicBoundingBox:Qn(USe),LatLonBoundingBox:Qn($Se),BoundingBox:Hu(VSe),Dimension:Hu(e5e),Attribution:Qn(qSe),AuthorityURL:Hu(i5e),Identifier:Hu(Sa),MetadataURL:Hu(a5e),DataURL:Hu(vh),FeatureListURL:Hu(vh),Style:Hu(o5e),MinScaleDenominator:Qn(vy),MaxScaleDenominator:Qn(vy),ScaleHint:Qn(GSe),Layer:Hu(QSe)}),p5e=Kl(Jl,{Title:Qn(Sa),OnlineResource:Qn(Yk),LogoURL:Qn(WU)}),m5e=Kl(Jl,{westBoundLongitude:Qn(vy),eastBoundLongitude:Qn(vy),southBoundLatitude:Qn(vy),northBoundLatitude:Qn(vy)}),g5e=Kl(Jl,{GetCapabilities:Qn(ET),GetMap:Qn(ET),GetFeatureInfo:Qn(ET)}),y5e=Kl(Jl,{Format:Hu(Sa),DCPType:Hu(r5e)}),v5e=Kl(Jl,{HTTP:Qn(n5e)}),b5e=Kl(Jl,{Get:Qn(vh),Post:Qn(vh)}),_5e=Kl(Jl,{Name:Qn(Sa),Title:Qn(Sa),Abstract:Qn(Sa),LegendURL:Hu(WU),StyleSheetURL:Qn(vh),StyleURL:Qn(vh)}),x5e=Kl(Jl,{Format:Qn(Sa),OnlineResource:Qn(Yk)}),w5e=Kl(Jl,{Keyword:UU(Sa)});class S5e{constructor(t,r){!r&&typeof window<"u"&&(r=window.DOMParser),this.version=void 0,this._parser=new RSe(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==T1.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),Ll({version:this.version},s5e,t,[])||null}}function ZU(e){const[t,r]=ee.useState(),[n,i]=ee.useState(e.url),[o,u]=ee.useState(""),[a,f]=ee.useState(),[p,g]=ee.useState(),b=()=>{r(void 0),f(void 0),u("")};return ee.useEffect(()=>{if(b(),g(void 0),!n)return;let S,_=n;n.indexOf("?")!==-1&&(S=n.split("?"),_=S[0]);const P=new URLSearchParams(S?.[1]),k={...Object.fromEntries(P),...e.urlParameters},M=new URLSearchParams(k),D=decodeURIComponent(M.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(_+"?"+D).then(F=>{if(F.ok)return F.text();throw Error(F.statusText+" ("+F.status+" - "+F.type+")")}).then(F=>{f(new S5e(F,window.DOMParser).toJSON())}).catch(F=>{b(),console.log(F),g(F.message)})},[n,e.urlParameters]),ee.useEffect(()=>{a?.Service&&(u(a.Capability?.Request?.GetMap?.DCPType?.[0]?.HTTP?.Get?.OnlineResource),r(a.Capability?.Request?.GetFeatureInfo?.DCPType?.[0]?.HTTP?.Get?.OnlineResource))},[a]),{capabilities:a,getFeatureInfoUrl:t,wmsUrl:o,error:p,setUrl:i}}ZU.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"}};const E9=Ei(K.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),T9=2*Math.PI*6378137/2,I9=function(e,t={enable:!0,decimal:1}){const r=e.lng,n=e.lat;let i=r*T9/180,o=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return o=o*T9/180,t.enable&&(i=Number(i.toFixed(t.decimal)),o=Number(o.toFixed(t.decimal))),[i,o]},C5e={mapId:void 0,url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"},wmsUrlParameters:{TRANSPARENT:"TRUE"},featureInfoEnabled:!0,featureInfoMarkerEnabled:!0,zoomToExtent:!1,showDeleteButton:!1,showLayerList:!0},RI=e=>{e={...C5e,...e};const{capabilities:t,error:r,setUrl:n,getFeatureInfoUrl:i,wmsUrl:o}=ZU({urlParameters:e.urlParameters}),[u,a]=ee.useState(e?.config?.open||!1),[f,p]=ee.useState(e?.config?.visible||!0),[g,b]=ee.useState(!1),S=ha({mapId:e?.mapId}),[_,P]=ee.useState(e?.config?.layers||[]),[k,M]=ee.useState(!1),[D,F]=ee.useState(),[B,N]=ee.useState(void 0);ee.useEffect(()=>{e.config||n(e.url)},[e.url]);const $=ee.useMemo(()=>e?.config?.wmsUrl||o,[e?.config?.wmsUrl,o]),V=ee.useMemo(()=>e?.config?.getFeatureInfoUrl||i,[e?.config?.getFeatureInfoUrl,i]),U=ee.useMemo(()=>t,[t]),X=ee.useMemo(()=>e?.name||e?.config?.name||U?.Service?.Title,[e?.name,e?.config?.name,U?.Service?.Title]),Z=ee.useMemo(()=>e?.setLayers&&e?.config?.layers||_,[e?.config?.layers,_]),oe=ee.useMemo(()=>e?.setLayers||P,[e?.setLayers,P]);ee.useEffect(()=>{e?.onConfigChange?.({layers:Z,getFeatureInfoUrl:V,wmsUrl:$,visible:f,open:u,name:X})},[Z,U,V,$,f,u,X]);const re=ee.useMemo(()=>Z.filter(fe=>fe.visible&&fe?.Attribution?.Title).map(fe=>fe?.Attribution?.Title).filter((fe,Le,ye)=>ye.indexOf(fe)===Le).join(" "),[Z]),H=function(){F(void 0),N(void 0)},ae=ee.useCallback(fe=>{if(!S.map)return;H();const Le=S.map.unproject([fe.point.x,fe.point.y]),ye=id([Le.lng,Le.lat]),xe=_me(ye,50,{units:"meters"}),Se=xe&&Ec(xe),Re=Se&&I9({lng:Se[0],lat:Se[1]}),he=Se&&I9({lng:Se[2],lat:Se[3]}),we={REQUEST:"GetFeatureInfo",BBOX:(Re&&he&&[Re[0],Re[1],he[0],he[1]])?.join(","),SERVICE:"WMS",INFO_FORMAT:U?.Capability?.Request?.GetFeatureInfo.Format.indexOf("text/html")!==-1?"text/html":"text/plain",FEATURE_COUNT:"10",LAYERS:Z.map(Ke=>Ke.visible&&Ke.queryable?Ke.Name:void 0).filter(Ke=>Ke),QUERY_LAYERS:Z.map(Ke=>Ke.visible&&Ke.queryable?Ke.Name:void 0).filter(Ke=>Ke),STYLES:"",WIDTH:100,HEIGHT:100,srs:"EPSG:3857",CRS:"EPSG:3857",version:"1.3.0",X:50,Y:50,I:50,J:50,buffer:"50"};let Ne=V,Fe;Ne?.indexOf?.("?")!==-1&&(Fe=e?.url?.split("?")||e?.config?.wmsUrl?.split("?"),Ne=Fe?.[0]);const Xe=new URLSearchParams(Fe?.[1]),Be={...Object.fromEntries(Xe),...we},ot=new URLSearchParams(Be);fetch(e.url+"?"+ot.toString()).then(Ke=>{if(!Ke.ok)throw new Error("FeatureInfo could not be fetched");return Ke.text()}).then(Ke=>{F(fe.lngLat),N(Ke),e.featureInfoSuccess?.(Ke,fe.lngLat)}).catch(Ke=>console.log(Ke))},[U,V,e,S,Z]),se=ee.useMemo(()=>(typeof e?.featureInfoActive<"u"&&e.featureInfoActive||k)&&Z?.some(fe=>fe.visible&&fe.queryable)&&!!S.map,[e?.featureInfoActive,k,Z,S.map]);ee.useEffect(()=>{if(!se){H();return}const fe=ae;return S.map.map.on("click",fe),()=>{S.map?.map.off?.("click",fe)}},[se,ae,S.map]),ee.useEffect(()=>{if(!U?.Service)return;let fe=[];if(U?.Capability?.Layer?.CRS?.indexOf?.("EPSG:3857")===-1&&U?.Capability?.Layer?.CRS?.indexOf?.("CRS:84")===-1)console.log("MlWmsLoader ("+U.Service.Title+"): No WGS 84/Pseudo-Mercator support");else{console.log("MlWmsLoader ("+U.Service.Title+"): WGS 84/Pseudo-Mercator supported");let Le=U?.Capability?.Layer?.Layer.filter(ye=>!ye.Layer?.length).map((ye,xe)=>(xe===0&&(fe=ye.EX_GeographicBoundingBox||ye?.LatLonBoundingBox||[]),{visible:e.visibleLayersAtStart?e.visibleLayersAtStart.includes(ye.Name||""):!0,Attribution:{Title:""},...(({CRS:Re,...he})=>he)(ye)}));U?.Capability?.Layer?.Layer.forEach(ye=>{const xe=ye?.Layer?.filter(Se=>Se.CRS?.length).map((Se,Re)=>(Re===0&&(fe=Se.EX_GeographicBoundingBox||Se?.LatLonBoundingBox||[]),{visible:e.visibleLayersAtStart&&Se.Name?e.visibleLayersAtStart.includes(Se.Name):!1,Attribution:{Title:""},...(({CRS:Ee,...we})=>we)(Se)}));xe&&(Le=[...Le,...xe])}),oe(Le),e.zoomToExtent&&S?.map&&fe.length>3&&S?.map.fitBounds([[fe[0],fe[1]],[fe[2],fe[3]]])}},[U,S.map]);const de=K.jsxs(ed,{secondaryAction:K.jsxs(K.Fragment,{children:[e.buttons,e.featureInfoEnabled&&K.jsx(xc,{sx:{padding:"4px",marginTop:"-3px",marginRight:"4px",background:fe=>Z?.some(Le=>Le.visible&&Le.queryable)?se?fe.palette.info.light:fe.palette.grey[300]:"initial"},"aria-label":"featureinfo",onClick:()=>{typeof e?.setFeatureInfoActive=="function"?e.setFeatureInfoActive(fe=>!fe):M(fe=>!fe)},disabled:!Z?.some(fe=>fe.visible&&fe.queryable),children:K.jsx(E9,{})}),K.jsx(xc,{edge:e.showDeleteButton?!1:"end",sx:{padding:"4px",marginTop:"-3px",...e.showDeleteButton?{marginRight:"4px"}:{}},"aria-label":"open",onClick:()=>a(fe=>!fe),children:u?K.jsx(hG,{}):K.jsx(o2,{})}),e.showDeleteButton&&K.jsxs(K.Fragment,{children:[K.jsx(xc,{"aria-label":"delete",edge:"end",onClick:()=>{typeof e.onConfigChange=="function"&&b(!0)},sx:{padding:"4px",marginTop:"-3px"},children:K.jsx(rb,{})}),g&&K.jsx(Zy,{open:g,onConfirm:()=>{typeof e.onConfigChange=="function"&&e.onConfigChange(!1)},onCancel:()=>{b(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]})]}),sx:{paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"},children:[K.jsx(s1,{sx:{minWidth:"30px"},children:K.jsx(zy,{sx:{padding:0},checked:f,onClick:()=>{p(fe=>!fe)}})}),K.jsx(Hc,{primary:X,variant:"layerlist"})]});return K.jsxs(K.Fragment,{children:[r&&K.jsx(qoe,{children:K.jsx(xo,{children:r})}),$&&K.jsxs(K.Fragment,{children:[e.showLayerList&&K.jsxs(K.Fragment,{children:[e.sortable&&K.jsx(_2,{children:de}),!e.sortable&&de,K.jsx(xo,{sx:{display:u?"block":"none"},children:K.jsx(Od,{dense:!0,component:"div",disablePadding:!0,sx:{paddingLeft:"18px"},children:$&&Z?.map?.((fe,Le)=>fe?.Name?K.jsxs(ed,{secondaryAction:K.jsx(K.Fragment,{children:fe?.queryable&&K.jsx(E9,{})}),children:[K.jsx(s1,{sx:{minWidth:"30px"},children:K.jsx(zy,{checked:fe.visible,sx:{padding:0},onClick:()=>{const ye=[...Z];ye[Le].visible=!ye[Le].visible,oe([...ye])}})}),K.jsx(Hc,{primary:fe?.Title,variant:"layerlist"})]},fe.Name+Le):K.jsx(K.Fragment,{}))})})]}),$&&Z?.length&&K.jsx(C2,{layerId:e.layerId||S.componentId,url:$,attribution:re,visible:f,urlParameters:{...e.wmsUrlParameters,layers:Z?.filter?.(fe=>fe.visible).map(fe=>fe.Name).reverse().join(",")},insertBeforeLayer:e?.insertBeforeLayer},S.componentId),e.featureInfoEnabled&&e.featureInfoMarkerEnabled&&D&&K.jsx(MI,{...D,content:B})]})]})};try{RI.displayName="MlWmsLoader",RI.__docgenInfo={description:`Loads a WMS getCapabilities xml document and adds a MlWmsLayer component for each layer that is
offered by the WMS.`,displayName:"MlWmsLoader",props:{url:{defaultValue:null,description:"WMS URL",name:"url",required:!1,type:{name:"string | undefined"}},mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},urlParameters:{defaultValue:null,description:"URL parameters that will be used in the getCapabilities request",name:"urlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},wmsUrlParameters:{defaultValue:null,description:"URL parameters that will be added when requesting WMS capabilities",name:"wmsUrlParameters",required:!1,type:{name:"{ [key: string]: string; } | undefined"}},zoomToExtent:{defaultValue:null,description:"If true, zooms to the extent of the WMS layer after loading the getCapabilities response",name:"zoomToExtent",required:!1,type:{name:"boolean | undefined"}},name:{defaultValue:null,description:"The name of the ListItem element representing the WmsLoader",name:"name",required:!1,type:{name:"string | undefined"}},featureInfoEnabled:{defaultValue:null,description:"If true, enables the feature info functionality",name:"featureInfoEnabled",required:!1,type:{name:"boolean | undefined"}},featureInfoActive:{defaultValue:null,description:"If true, the feature info functionality is active",name:"featureInfoActive",required:!1,type:{name:"boolean | undefined"}},setFeatureInfoActive:{defaultValue:null,description:"A function to set the feature info active state",name:"setFeatureInfoActive",required:!1,type:{name:"((val: boolean | ((current: boolean) => boolean)) => void) | undefined"}},featureInfoSuccess:{defaultValue:null,description:"Callback function that is called after the featureInfoRequest has succeeded",name:"featureInfoSuccess",required:!1,type:{name:"((content: string, lngLat: { lng: number; lat: number; }) => void) | undefined"}},featureInfoMarkerEnabled:{defaultValue:null,description:"If true, displays a marker at the feature info location",name:"featureInfoMarkerEnabled",required:!1,type:{name:"boolean | undefined"}},config:{defaultValue:null,description:"The WMS configuration object",name:"config",required:!1,type:{name:"WmsConfig | undefined"}},onConfigChange:{defaultValue:null,description:"A function to handle changes to the WMS configuration",name:"onConfigChange",required:!1,type:{name:"((config: false | WmsConfig) => void) | undefined"}},setLayers:{defaultValue:null,description:"A function to update a LayerType config array that is passed to this component at props.config.layers",name:"setLayers",required:!1,type:{name:"((layers: LayerType[]) => void) | undefined"}},showDeleteButton:{defaultValue:null,description:"If true, shows the delete button for the WMSLoader",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},buttons:{defaultValue:null,description:"Custom buttons to display for the WMSLoader",name:"buttons",required:!1,type:{name:"Element | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}},visibleLayersAtStart:{defaultValue:null,description:"Array of layer Names (IDs) that should be visible at start. If not provided, default visibility logic applies.",name:"visibleLayersAtStart",required:!1,type:{name:"string[] | undefined"}},showLayerList:{defaultValue:null,description:"If true, renders the layer list UI. If false, only the WMS layer is rendered without UI controls.",name:"showLayerList",required:!1,type:{name:"boolean | undefined"}}}}}catch{}function DI(e){const t={"circle-color":"rgba(0,0,0,0)"},r={"fill-color":"rgba(0,0,0,0)","fill-outline-color":"rgba(0,0,0,0)"},n={"line-color":"rgba(0,0,0,0)"},i=["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,0,e.currentVal,1,e.currentVal+e.fadeOut*e.step,0],o=["interpolate",["linear"],["get",e.timeField],e.currentVal,1,e.currentVal+e.fadeOut*e.step,0],u={"fill-color":e.featuresColor,"fill-opacity":i,"fill-outline-color":["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,"rgba(255, 0, 0, 0)",e.currentVal,"rgb(0,0,0)",e.currentVal+e.fadeIn*e.step,"rgba(255, 0, 0, 0)"]},a={"circle-color":e.featuresColor,"circle-radius":["interpolate",["linear"],["get",e.timeField],e.currentVal-e.fadeIn*e.step,1,e.currentVal,20,e.currentVal+e.fadeOut*e.step,1],"circle-opacity":i},f={"line-color":e.featuresColor,"line-width":3,"line-opacity":i},p={"circle-color":e.featuresColor,"circle-radius":["interpolate",["linear"],["get",e.timeField],e.currentVal,20,e.currentVal+e.fadeOut*e.step,1],"circle-opacity":o},g={"fill-color":e.featuresColor,"fill-opacity":o,"fill-outline-color":["interpolate",["linear"],["get",e.timeField],e.currentVal,"rgb(0,0,0)",e.currentVal+e.fadeIn*e.step,"rgba(255, 0, 0, 0)"]},b={"line-color":e.featuresColor,"line-width":3,"line-opacity":o};if(e.userPaint!==void 0)return e.userPaint;switch(e.type){case"circle":return e.currentVal===e.minVal&&!e.isPlaying?t:e.accumulate?p:a;case"fill":return e.currentVal===e.minVal&&!e.isPlaying?r:e.accumulate?g:u;case"line":return e.currentVal===e.minVal&&!e.isPlaying?n:e.accumulate?b:f;case void 0:return e.currentVal===e.minVal&&!e.isPlaying?t:e.accumulate?p:a}}try{DI.displayName="paintPicker",DI.__docgenInfo={description:"",displayName:"paintPicker",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"fill"'},{value:'"line"'},{value:'"circle"'}]}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},featuresColor:{defaultValue:null,description:"",name:"featuresColor",required:!0,type:{name:"string"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},userPaint:{defaultValue:null,description:"",name:"userPaint",required:!0,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 9 more ...; "fill-pattern-transition"?: TransitionSpecification | undefined; } | { ...; } | { ...; } | undefined'}}}}}catch{}function OI(e){const t=e.currentVal-e.fadeIn*e.step,r=e.currentVal+e.fadeIn*e.step,n={"text-color":"rgba(0,0,0,0)"},i={"text-color":e.labelColor,"text-opacity":["interpolate",["linear"],["get",e.timeField],t,0,e.currentVal,1,r,0]},o={"text-color":e.labelColor,"text-opacity":["interpolate",["linear"],["get",e.timeField],e.currentVal,1,r,0]},u=()=>e.currentVal===e.minVal&&!e.isPlaying?n:e.accumulate?o:i,a={"text-field":["get",e.labelField],"text-font":["Metropolis Regular"]};return K.jsx(x2,{options:{type:"symbol",layout:e.labelLayout||a,paint:e.labelPaint||u()},geojson:e.data,layerId:"timeControllerLabels"})}try{OI.displayName="MlTemporalControllerLabels",OI.__docgenInfo={description:"",displayName:"MlTemporalControllerLabels",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},labelField:{defaultValue:null,description:"",name:"labelField",required:!0,type:{name:"string"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!0,type:{name:"string"}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},labelLayout:{defaultValue:null,description:"",name:"labelLayout",required:!1,type:{name:"any"}},labelPaint:{defaultValue:null,description:"",name:"labelPaint",required:!1,type:{name:"SymbolLayerSpecification | undefined"}}}}}catch{}const E5e=Ei(K.jsx("path",{d:"M8 5v14l11-7z"})),T5e=Ei(K.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"})),I5e=Ei(K.jsx("path",{d:"M6 6h12v12H6z"})),P5e=Ei(K.jsx("path",{d:"m4 18 8.5-6L4 6zm9-12v12l8.5-6z"})),A5e=Ei(K.jsx("path",{d:"M11 18V6l-8.5 6zm.5-6 8.5 6V6z"})),k5e={marginLeft:"15%",marginBottom:"3%",width:"70%",height:"90px",alignItems:"center"},M5e={top:"10%",height:"100px",alignItems:"center"};function NI(e){const[t,r]=ee.useState(e.currentVal),[n,i]=ee.useState(e.isPlaying),o=e.maxVal-e.minVal,u=ee.useRef(null),a=H1(P=>P.breakpoints.down("md"));ee.useEffect(()=>()=>{u.current&&clearInterval(u.current)},[]),ee.useEffect(()=>{e.returnCurrent(t),e.returnPlaying(n)},[t,n]);const f=gt.useCallback(()=>{let P=t-e.minVal;u.current&&clearInterval(u.current),u.current=setInterval(function(){P>=o?(u.current&&clearInterval(u.current),i(!1)):r(k=>k+e.step),P=P+e.step},e.interval)},[e.step,e.maxVal,t]),p=()=>{n?(i(!1),n&&u.current&&clearInterval(u.current)):(i(!0),f())},g=()=>{u.current&&clearInterval(u.current),r(e.minVal),i(!1)},b=()=>{n?(u.current&&clearInterval(u.current),r(t-o/10),f()):r(t-o/10)},S=()=>{n?(u.current&&clearInterval(u.current),r(t+o/10),f()):r(t+o/10)},_=(P,k)=>{n?P&&(u.current&&clearInterval(u.current),r(k),f()):r(k)};return K.jsx(K.Fragment,{children:K.jsxs(ZP,{anchor:"bottom",open:e.open||!0,variant:"persistent",sx:{flexShrink:0,"& .MuiDrawer-paper":a?M5e:k5e},children:[K.jsxs(ih,{container:!0,alignItems:"center",justifyContent:"space-between",children:[K.jsxs(ih,{item:!0,xs:12,sm:10,textAlign:"center",children:[K.jsx($i,{onClick:b,children:K.jsx(A5e,{})}),K.jsx($i,{onClick:g,children:K.jsx(I5e,{})}),K.jsx($i,{onClick:p,children:n?K.jsx(T5e,{}):K.jsx(E5e,{})}),K.jsx($i,{onClick:S,children:K.jsx(P5e,{})})]}),e.display&&!a&&K.jsx(ih,{item:!0,xs:12,sm:5,textAlign:"right",children:K.jsx(ns,{variant:"h5",sx:{paddingRight:"25px"},children:Math.floor(t)})})]}),K.jsx(tA,{sx:{position:"flex",width:"95%",paddingTop:"10px",alignSelf:"center"},"aria-label":"Custom marks",defaultValue:e.minVal,value:t,step:e.step,onChange:_,min:e.minVal,max:e.maxVal}),a&&e.display&&K.jsx(ns,{variant:"body1",textAlign:"right",children:Math.floor(t)})]})})}try{NI.displayName="TemporalControllerPlayer",NI.__docgenInfo={description:"",displayName:"TemporalControllerPlayer",props:{currentVal:{defaultValue:null,description:"",name:"currentVal",required:!0,type:{name:"number"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},interval:{defaultValue:null,description:"",name:"interval",required:!0,type:{name:"number"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!0,type:{name:"number"}},maxVal:{defaultValue:null,description:"",name:"maxVal",required:!0,type:{name:"number"}},returnCurrent:{defaultValue:null,description:"",name:"returnCurrent",required:!0,type:{name:"Dispatch<SetStateAction<number>>"}},returnPlaying:{defaultValue:null,description:"",name:"returnPlaying",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},fadeIn:{defaultValue:null,description:"",name:"fadeIn",required:!0,type:{name:"number"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},fadeOut:{defaultValue:null,description:"",name:"fadeOut",required:!0,type:{name:"number"}},featuresColor:{defaultValue:null,description:"",name:"featuresColor",required:!0,type:{name:"string"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"boolean"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!0,type:{name:"string"}},labelFadeIn:{defaultValue:null,description:"",name:"labelFadeIn",required:!0,type:{name:"number"}},labelFadeOut:{defaultValue:null,description:"",name:"labelFadeOut",required:!0,type:{name:"number"}},accumulate:{defaultValue:null,description:"",name:"accumulate",required:!0,type:{name:"boolean"}},display:{defaultValue:null,description:"",name:"display",required:!0,type:{name:"boolean"}}}}}catch{}function L5e(e,t){if(e?.features){const r=[...e.features?e.features:[]];return r.sort((n,i)=>n.properties?.[t]<i.properties?.[t]?1:-1),r[r.length-1]?.properties?.[t]||0}return 0}function R5e(e,t){if(e?.features){const r=[...e?.features?e.features:[]];return r.sort((n,i)=>n.properties?.[t]<i.properties?.[t]?-1:1),r[r.length-1]?.properties?.[t]||0}return 0}function FI(e){const t=ha({mapId:e.mapId}),r=ee.useMemo(()=>e.minVal?e.minVal:L5e(e.geojson,e.timeField),[e.minVal,e.geojson,e.timeField]),n=ee.useMemo(()=>e.maxVal?e.maxVal:R5e(e.geojson,e.timeField),[e.maxVal,e.geojson,e.timeField]);return{filteredData:ee.useMemo(()=>{if(e.geojson!==void 0&&t.map&&r&&n)return yh(e.geojson.features.filter(o=>o.properties?.[e.timeField]>=r&&o.properties?.[e.timeField]<=n))},[e.geojson,t.map,e.timeField]),minVal:r,maxVal:n}}try{FI.displayName="useFilterData",FI.__docgenInfo={description:"",displayName:"useFilterData",props:{geojson:{defaultValue:null,description:"",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},timeField:{defaultValue:null,description:"",name:"timeField",required:!0,type:{name:"string"}},initialVal:{defaultValue:null,description:"",name:"initialVal",required:!1,type:{name:"number | undefined"}},minVal:{defaultValue:null,description:"",name:"minVal",required:!1,type:{name:"number | undefined"}},maxVal:{defaultValue:null,description:"",name:"maxVal",required:!1,type:{name:"number | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!0,type:{name:"string | undefined"}}}}}catch{}const P9=({mapId:e=void 0,insertBeforeLayer:t,geojson:r,ownLayer:n=!0,attribution:i="",type:o="circle",timeField:u,minVal:a,maxVal:f,initialVal:p,accumulate:g=!1,fitBounds:b=!0,paint:S,featuresColor:_,step:P=1,interval:k=200,fadeIn:M=5,fadeOut:D=5,label:F=!0,labelColor:B,labelField:N=[],labelFadeIn:$=5,labelFadeOut:V=5,displayCurrentValue:U=!1,onClick:X,onHover:Z,onLeave:oe,onStateChange:re})=>{const H=ha({mapId:e,waitForLayer:t}),{filteredData:ae,minVal:se,maxVal:de}=FI({geojson:r,timeField:u,minVal:a,maxVal:f,mapId:e}),fe=Su(),[Le,ye]=ee.useState(p||se),xe=_||fe.palette.primary.main,Se=B||fe.palette.text.primary,[Re,he]=ee.useState(!1),Ee=DI({type:o,timeField:u,currentVal:Le,minVal:se,isPlaying:Re,fadeIn:M,fadeOut:D,step:P,featuresColor:xe,accumulate:g,userPaint:S});return ee.useEffect(()=>{!p&&se?ye(se):p&&ye(p)},[]),ee.useEffect(()=>{typeof re=="function"&&re({current:Le,paint:Ee})},[re]),ee.useEffect(()=>{if(b&&typeof ae<"u"){const we=Ec(ae);H.map?.map.fitBounds(we)}},[ae]),ee.useEffect(()=>{if(!H.map)return;let we,Ne,Fe;return X&&(we=X,H.map?.on("click","timeController",we)),Z&&(Ne=Z,H.map?.on("mouseenter","timeController",Ne)),oe&&(Fe=oe,H.map?.on("mouseleave","timeController",Fe)),()=>{we&&H.map?.off("click","timeController",we),Ne&&H.map?.off("mouseenter","timeController",Ne),Fe&&H.map?.off("mouseleave","timeController",Fe)}},[H.map,X,Z,oe]),K.jsxs(K.Fragment,{children:[ae&&n&&K.jsx(Zu,{type:o,mapId:e,options:{source:{type:"geojson",attribution:i,data:ae},paint:{...S||Ee},layout:{visibility:"visible"}}}),ae&&F&&K.jsx(OI,{data:ae,currentVal:Le,fadeIn:$,fadeOut:V,step:P,labelField:N,labelColor:Se,timeField:u,minVal:se,accumulate:g,isPlaying:Re}),K.jsx(NI,{currentVal:Le,isPlaying:Re,step:P,interval:k,minVal:se,maxVal:de,returnCurrent:ye,returnPlaying:he,open:!1,fadeIn:M,fadeOut:D,featuresColor:xe,labels:F,labelColor:Se,labelFadeIn:$,labelFadeOut:V,accumulate:g,display:U})]})};try{P9.displayName="MlTemporalController",P9.__docgenInfo={description:"",displayName:"MlTemporalController",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order.
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry, GeoJsonProperties>"}},ownLayer:{defaultValue:{value:"true"},description:"If true,the component creates and loads a MlGeoJsonLayer to show the data.",name:"ownLayer",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:{value:""},description:"MapLibre attribution shown in the bottom right of the map, if this layer is visible",name:"attribution",required:!1,type:{name:"string | undefined"}},type:{defaultValue:{value:"circle"},description:`Type of the layer that will be added to the MapLibre instance.
Possible values: "line", "circle", "fill"`,name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"fill"'},{value:'"line"'},{value:'"circle"'}]}},timeField:{defaultValue:null,description:"Property field where the time informations is available.",name:"timeField",required:!0,type:{name:"string"}},minVal:{defaultValue:null,description:`Lowest time value to be shown in the time line.
By default, it is set to the lowest value in the time field.`,name:"minVal",required:!1,type:{name:"number | undefined"}},label:{defaultValue:{value:"true"},description:'When true, a label layer will be added by the component. In that case, the "labelField" propertie is mandatory.',name:"label",required:!1,type:{name:"boolean | undefined"}},labelField:{defaultValue:{value:"[]"},description:"Property field where the label information is available.",name:"labelField",required:!1,type:{name:"string | undefined"}},maxVal:{defaultValue:null,description:`Highest time value to be shown in the time line.
By default, it is set to the highest value in the time field.`,name:"maxVal",required:!1,type:{name:"number | undefined"}},initialVal:{defaultValue:null,description:`the value at which the component is to be loaded.
If not specified, the component starts at the minimum value.`,name:"initialVal",required:!1,type:{name:"number | undefined"}},accumulate:{defaultValue:{value:"false"},description:`When true, the features will be accumulated in the map.
This option ist by default false.`,name:"accumulate",required:!1,type:{name:"boolean | undefined"}},fitBounds:{defaultValue:{value:"true"},description:`When true, the component will fit the map bounds to the shown features.
This option ist by default true.`,name:"fitBounds",required:!1,type:{name:"boolean | undefined"}},showControls:{defaultValue:null,description:"Boolean value that disables and enables the controls drawer.",name:"showControls",required:!1,type:{name:"boolean | undefined"}},paint:{defaultValue:null,description:`Paint property object for the features layer.
Possible props depend on the layer type.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill`,name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 9 more ...; "fill-pattern-transition"?: TransitionSpecification | undefined; } | { ...; } | { ...; } | undefined'}},featuresColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"featuresColor",required:!1,type:{name:"string | undefined"}},step:{defaultValue:{value:"1"},description:`How many units the timeline runs through at each step.
By default it is set to 1.`,name:"step",required:!1,type:{name:"number | undefined"}},interval:{defaultValue:{value:"200"},description:`The time between each addition to the counter, expressed in milliseconds.
By default, 200 ms.`,name:"interval",required:!1,type:{name:"number | undefined"}},fadeIn:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps before the feature starts to appear.
By default it is set to 5 steps.`,name:"fadeIn",required:!1,type:{name:"number | undefined"}},fadeOut:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps the feature fades out after it proper time value.
By default it is set to 5 steps.`,name:"fadeOut",required:!1,type:{name:"number | undefined"}},labelColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"labelColor",required:!1,type:{name:"string | undefined"}},labelLayout:{defaultValue:null,description:`Layout property object, that is passed to the labels layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol`,name:"labelLayout",required:!1,type:{name:"any"}},labelPaint:{defaultValue:null,description:`Paint property object for the features layer.
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol`,name:"labelPaint",required:!1,type:{name:"any"}},labelFadeIn:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps before the labels start to appear.
By default it is set to 5 steps.`,name:"labelFadeIn",required:!1,type:{name:"number | undefined"}},labelFadeOut:{defaultValue:{value:"5"},description:`A numeric value that sets how many steps the labels fade out after their proper time value.
By default it is set to 5 steps.`,name:"labelFadeOut",required:!1,type:{name:"number | undefined"}},displayCurrentValue:{defaultValue:{value:"false"},description:"If true, the current time value will be displayed in the controlls panel.",name:"displayCurrentValue",required:!1,type:{name:"boolean | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onHover:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onLeave:{defaultValue:null,description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`,name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map$1) | undefined"}},onStateChange:{defaultValue:null,description:"Callback function defined by the user to recive the current time value and paint property in the parent component.",name:"onStateChange",required:!1,type:{name:"Dispatch<SetStateAction<TemporalControllerValues | undefined>> | undefined"}}}}}catch{}const T2=e=>{const t=e?.layerIds.toReversed();return K.jsx(K.Fragment,{children:t&&t.map((r,n)=>{const i=n>0?t[n-1]:e.insertBeforeLayer;return K.jsx(x2,{layerId:r,insertBeforeLayer:i},r)})})};try{T2.displayName="MlOrderLayers",T2.__docgenInfo={description:"Creates an invisible layer for each entry in props.layerIds with the id `order-{entry}` and a reliable order",displayName:"MlOrderLayers",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerIds:{defaultValue:null,description:"",name:"layerIds",required:!0,type:{name:"string[]"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}}}catch{}const A9=e=>{const t=ha({mapId:"map_1"});return ee.useEffect(()=>{if(t.map)return t.map.map.getSource("terrain")||t.map.map.addSource("terrain",{type:"raster-dem",encoding:"mapbox",maxzoom:12,minzoom:4,...e.sourceOptions}),t.map.map.setTerrain({source:"terrain",exaggeration:1,...e.terrainOptions}),t.map.addLayer({id:"hills",type:"hillshade",source:"terrain",layout:{visibility:"visible"},paint:{"hillshade-shadow-color":"rgba(71,59,36,0.4)"}}),()=>{t.map?.map.setTerrain(null),t.map?.map.getSource("terrain")&&(t.map.map.removeLayer("hills"),t.map.map.removeSource("terrain"))}},[t.map,e.sourceOptions,e.terrainOptions]),K.jsx(K.Fragment,{})};try{A9.displayName="MlTerrainLayer",A9.__docgenInfo={description:"Create Terrain Layer Component",displayName:"MlTerrainLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"Source of tiles with possibles options",name:"sourceOptions",required:!1,type:{name:"object | undefined"}},terrainOptions:{defaultValue:null,description:"Options for new exaggeration value",name:"terrainOptions",required:!1,type:{name:"TerrainSpecification | undefined"}}}}}catch{}const D5e=Ei(K.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),O5e=Ei([K.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),K.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),K.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")]),N5e=[{name:"Point",mode:"draw_point",icon:K.jsx(O5e,{})},{name:"LineString",mode:"draw_line_string",icon:K.jsx(dG,{})},{name:"Polygon",mode:"draw_polygon",icon:K.jsx(fG,{})}],k9=e=>{const t=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=ee.useState(),[i,o]=ee.useState({activeGeometryIndex:void 0,selectedGeoJson:void 0,geometries:[],drawMode:void 0});console.log(i),ee.useEffect(()=>{typeof e.onChange=="function"&&e.onChange(i)},[i,e.onChange]);const u={...e.buttonStyleOverride},a=b=>{let S;o(_=>(S=_.drawMode,{..._,drawMode:void 0,activeGeometryIndex:void 0,selectedGeoJson:void 0})),requestAnimationFrame(()=>{o(_=>(S==="draw_polygon"||S==="draw_line_string")&&b==="draw_point"?{..._,drawMode:void 0}:{..._,drawMode:b})})},f=b=>{o(S=>{const _=[...S.geometries];return _.splice(_.indexOf(b),1),{...S,drawMode:void 0,geometries:_,activeGeometryIndex:S.activeGeometryIndex?S.activeGeometryIndex-1:void 0}})},p=b=>{e.onShowInstructionChange?.(b.target.checked)},g=()=>K.jsx(K.Fragment,{children:N5e.map(b=>{const S=P=>i.drawMode===b.mode?P.palette.primary.main:P.palette.navigation.navColor,_=P=>i.drawMode!==b.mode?P.palette.primary.main:P.palette.navigation.navColor;return K.jsx(K.Fragment,{children:K.jsx(ah,{title:b.name,children:K.jsx($i,{sx:{color:_,backgroundColor:S,"&:hover":{backgroundColor:S},...u},onClick:()=>a(b.mode),children:b.icon},b.name)})})})});return K.jsxs(K.Fragment,{children:[K.jsx(jg,{sx:{zIndex:104},children:K.jsx(c3,{children:K.jsx(g,{})})}),K.jsx(jg,{sx:{marginTop:"10px"},children:K.jsx(Jj,{children:K.jsx(f3,{control:K.jsx(zy,{size:"small",checked:e.showInstruction,onChange:p}),label:"Show instructions"})})}),i.drawMode&&K.jsx(a2,{mode:i.drawMode,geojson:i.selectedGeoJson,onChange:b=>{console.log("Features: ",b),b?.[0]&&o(S=>{const _=[...i.geometries];if(typeof S.activeGeometryIndex>"u"){const k=b[0];k&&k.properties?k.properties.id=k.id:console.error("tempFeature or tempFeature.properties is null or undefined"),S.activeGeometryIndex=_.length,_.push(k)}else _[S.activeGeometryIndex]=b[0];return(()=>{if(S.selectedGeoJson&&typeof S.activeGeometryIndex<"u"&&S.geometries[S.activeGeometryIndex]&&S.geometries[S.activeGeometryIndex].geometry.type==="Point"){const k=S.selectedGeoJson?.geometry?.coordinates,M=S.geometries[S.activeGeometryIndex]?.geometry?.coordinates;return JSON.stringify(k)!==JSON.stringify(M)}return!1})()&&(S.drawMode=void 0),{...S,geometries:_}})},onFinish:()=>{o(b=>({...b,drawMode:void 0,activeGeometryIndex:void 0,selectedGeoJson:void 0}))}}),K.jsxs(Od,{sx:{zIndex:105,marginBottom:"-10px"},children:[i.geometries.map((b,S)=>K.jsxs(jg,{sx:{display:"flex",flexDirection:"column"},children:[K.jsx("br",{}),K.jsxs(jg,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"},marginTop:"25px"},onMouseOver:()=>{n(b)},onMouseLeave:()=>{n(void 0)},children:[!b.properties?.customName&&K.jsx("input",{type:"text",value:b.properties?.name||"",placeholder:"Assign name",onChange:_=>{const P=_.target.value;o(k=>{const M=[...k.geometries];return M[S].properties||(M[S].properties={}),M[S].properties.name=P,{...k,geometries:M}})},style:{padding:"5px",border:"1px solid #ccc",borderRadius:"4px",outline:"none"},onFocus:_=>_.target.style.borderColor="#009ee0",onBlur:_=>{_.target.style.borderColor="#ccc",o(P=>{const k=[...P.geometries];return k[S].properties||(k[S].properties={}),k[S].properties.customName=!0,{...P,geometries:k}})}}),K.jsx(oh,{listItemSx:u,configurable:!0,visible:!0,layerComponent:K.jsx(Zu,{mapId:e.mapId,geojson:b,layerId:String(b.id),defaultPaintOverrides:{fill:{"fill-opacity":.5}}}),type:"layer",name:K.jsx(ns,{onClick:()=>{o(_=>{const P=[..._.geometries];return P[S].properties||(P[S].properties={}),P[S].properties.customName=!1,{..._,geometries:P}})},sx:{cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap"},children:b.properties?.name||String(b.id)}),description:b.geometry.type}),K.jsx(jg,{sx:{padding:"3px 30px"},children:K.jsxs(c3,{size:"small",children:[K.jsx(ah,{title:"Center",children:K.jsx($i,{sx:{color:_=>_.palette.primary.main,backgroundColor:_=>_.palette.navigation.navColor,...u},onClick:()=>{t?.map?.map.setCenter(b.geometry.type==="Point"?b.geometry.coordinates:YA(b).geometry.coordinates)},children:K.jsx(ZA,{})})}),K.jsx(ah,{title:"Edit",children:K.jsx($i,{sx:{color:_=>i.drawMode==="simple_select"&&i.selectedGeoJson?.id===b.id?_.palette.navigation.navColor:_.palette.primary.main,backgroundColor:_=>i.drawMode==="simple_select"&&i.selectedGeoJson?.id===b.id?_.palette.primary.main:_.palette.navigation.navColor,...u},onClick:()=>{o(_=>{const P=_.drawMode==="simple_select"&&_.selectedGeoJson?.id===b.id?void 0:"simple_select";return{..._,selectedGeoJson:b,activeGeometryIndex:_.geometries.indexOf(b),drawMode:P}})},children:K.jsx(D5e,{})})}),K.jsx(ah,{title:"Delete",children:K.jsx($i,{sx:{color:_=>_.palette.primary.main,backgroundColor:_=>_.palette.navigation.navColor,...u},onClick:()=>{f(b),n(void 0)},children:K.jsx(rb,{})})})]})})]})]},b.id)),r&&K.jsx(Zu,{mapId:e.mapId,geojson:{type:"FeatureCollection",features:[r]},layerId:"highlightBorder",defaultPaintOverrides:{circle:{"circle-color":"#000000","circle-opacity":.2,"circle-radius":10},line:{"line-color":"#000000","line-opacity":.2,"line-width":10},fill:{"fill-color":"#000000","fill-opacity":.2}}})]})]})};try{k9.displayName="MlSketchTool",k9.__docgenInfo={description:"Component template",displayName:"MlSketchTool",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:null,description:`Style attribute for the button-style
https://mui.com/system/getting-started/the-sx-prop/`,name:"buttonStyleOverride",required:!1,type:{name:"SxProps | undefined"}},onChange:{defaultValue:null,description:"Callback function that is called each time GeoJson data has changed within MlSketchTool.\nFirst parameter contains all geometries in the `geometries` prop.",name:"onChange",required:!1,type:{name:"((para: SketchStateType) => void) | undefined"}},showInstruction:{defaultValue:null,description:"Determines whether the instruction text should be shown.",name:"showInstruction",required:!1,type:{name:"boolean | undefined"}},onShowInstructionChange:{defaultValue:null,description:'Callback function triggered when the "Show instructions" checkbox is toggled.',name:"onShowInstructionChange",required:!1,type:{name:"((value: boolean) => void) | undefined"}}}}}catch{}const BI=e=>{const t=ee.useRef(!1),r=ee.useRef(e.pause),n=ee.useRef(e.zoom),i=ee.useRef(e.pitch),o=ee.useRef(1),u=ee.useRef(e.speed),a=ee.useRef(null),f=e.kmPerStep||.01,p=b1(e.route),g=e.stepDuration||70,b=ha({mapId:e.mapId,waitForLayer:e.insertBeforeLayer});ee.useEffect(()=>{r.current=e.pause,r.current||k()},[e.pause]),ee.useEffect(()=>{b.map&&(n.current=e.zoom,typeof n.current<"u"&&b.map.map.getZoom()!==n.current&&b.map.map.setZoom(n.current))},[b.map,e.zoom]),ee.useEffect(()=>{b.map&&(i.current=e.pitch,typeof i.current<"u"&&i.current!==b.map.map.getPitch()&&b.map.map.setPitch(i.current))},[b.map,e.pitch]),ee.useEffect(()=>{u.current=e.speed},[e.speed]);const S=ee.useCallback(()=>{b.map&&(b.map.map.scrollZoom.disable(),b.map.map.boxZoom.disable(),b.map.map.dragRotate.disable(),b.map.map.dragPan.disable(),b.map.map.keyboard.disable(),b.map.map.doubleClickZoom.disable(),b.map.map.touchZoomRotate.disable())},[b.map]),_=ee.useCallback(()=>{b.map&&(b.map.map.scrollZoom.enable(),b.map.map.boxZoom.enable(),b.map.map.dragRotate.enable(),b.map.map.dragPan.enable(),b.map.map.keyboard.enable(),b.map.map.doubleClickZoom.enable(),b.map.map.touchZoomRotate.enable())},[b.map]);function P(){if(!b.map||!e.route)return;const D=Ec(e.route);let F;D&&D.length>3&&(F=[[D[0],D[1]],[D[2],D[3]]],b.map.map.fitBounds(F,{padding:100}))}function k(){if(b.map)if(r.current)_();else{S(),typeof n.current<"u"&&b.map.map.getZoom()!==n.current&&b.map.map.setZoom(n.current);const D=mpe(e.route,o.current*f).geometry.coordinates;o.current*f<p?(b.map.map.easeTo({center:D,bearing:g1(id([b.map.map.getCenter().lng,b.map.map.getCenter().lat]),id(D)),duration:g,essential:!0}),typeof u.current<"u"?o.current=o.current+u.current:o.current++,console.log("PAN MOVE"),setTimeout(()=>{k()},100)):(b.map.map.setPitch(0),P(),_(),console.log("ENABLE CONTROLS"),o.current=1)}}function M(){b.map&&(P(),_(),o.current=1)}return ee.useEffect(()=>{!b.map||t.current||(t.current=!0,P())},[b.map]),ee.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),{play:k,reset:M}};BI.defaultProps={mapId:void 0,zoom:18};try{BI.displayName="useCameraFollowPath",BI.__docgenInfo={description:"Component template",displayName:"useCameraFollowPath",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`,name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},pause:{defaultValue:null,description:"",name:"pause",required:!1,type:{name:"boolean | undefined"}},zoom:{defaultValue:{value:"18"},description:"",name:"zoom",required:!1,type:{name:"number | undefined"}},pitch:{defaultValue:null,description:"",name:"pitch",required:!1,type:{name:"number | undefined"}},speed:{defaultValue:null,description:"",name:"speed",required:!1,type:{name:"number | undefined"}},kmPerStep:{defaultValue:null,description:"",name:"kmPerStep",required:!1,type:{name:"number | undefined"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"any"}},stepDuration:{defaultValue:null,description:"",name:"stepDuration",required:!1,type:{name:"number | undefined"}},timeoutId:{defaultValue:null,description:"",name:"timeoutId",required:!1,type:{name:"number | undefined"}}}}}catch{}const F5e=()=>ee.useContext(RP),I2=e=>(ee.useEffect(()=>{if(!(!e.protocol||typeof e.handler!="function"))return KT.addProtocol(e.protocol,e.handler),()=>{KT.removeProtocol(e.protocol)}},[e]),{});I2.defaultProps={mapId:void 0};try{I2.displayName="useAddProtocol",I2.__docgenInfo={description:"Enables the use of custom protocols (basically custom tile load functions) in the maplibre-gl-js library.",displayName:"useAddProtocol",props:{protocol:{defaultValue:null,description:"the protocol string, for example `mbtiles`\nIn this example the handler function is called for all tile requests that start with the string `mbtiles://`",name:"protocol",required:!0,type:{name:"string"}},handler:{defaultValue:null,description:"Custom load tile function that will be called when using a source that starts with a custom url schema.",name:"handler",required:!0,type:{name:"AddProtocolAction"}}}}}catch{}function KU(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function B5e(e,t){var r=KU(e);return function(n,i){return t(r(n),i,e)}}function z5e(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function Zk(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(p,g){var b,S,_=i(p,function(P,k){if(b)return b(P,k-1);S=P,b=g?B5e(P,g):KU(P)});return _.columns=S,_}function i(p,g){var b={},S={},_=[],P=p.length,k=0,M=0,D,F;function B(){if(k>=P)return S;if(F)return F=!1,b;var $=k,V;if(p.charCodeAt($)===34){for(var U=$;U++<P;)if(p.charCodeAt(U)===34){if(p.charCodeAt(U+1)!==34)break;++U}return k=U+2,V=p.charCodeAt(U+1),V===13?(F=!0,p.charCodeAt(U+2)===10&&++k):V===10&&(F=!0),p.slice($+1,U).replace(/""/g,'"')}for(;k<P;){var X=1;if(V=p.charCodeAt(k++),V===10)F=!0;else if(V===13)F=!0,p.charCodeAt(k)===10&&(++k,++X);else if(V!==r)continue;return p.slice($,k-X)}return p.slice($)}for(;(D=B())!==S;){for(var N=[];D!==b&&D!==S;)N.push(D),D=B();g&&(N=g(N,M++))==null||_.push(N)}return _}function o(p,g){return g==null&&(g=z5e(p)),[g.map(f).join(e)].concat(p.map(function(b){return g.map(function(S){return f(b[S])}).join(e)})).join(`
`)}function u(p){return p.map(a).join(`
`)}function a(p){return p.map(f).join(e)}function f(p){return p==null?"":t.test(p+="")?'"'+p.replace(/\"/g,'""')+'"':p}return{parse:n,parseRows:i,format:o,formatRows:u}}var tS=Zk(","),j5e=tS.parse,q5e=tS.parseRows,V5e=tS.format,$5e=tS.formatRows,rS=Zk("	"),G5e=rS.parse,U5e=rS.parseRows,H5e=rS.format,W5e=rS.formatRows;const X5e=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:V5e,csvFormatRows:$5e,csvParse:j5e,csvParseRows:q5e,dsvFormat:Zk,tsvFormat:H5e,tsvFormatRows:W5e,tsvParse:G5e,tsvParseRows:U5e},Symbol.toStringTag,{value:"Module"})),Y5e=A7(X5e);var Yp={exports:{}},M9;function Z5e(){if(M9)return Yp.exports;M9=1,Yp.exports=e,Yp.exports.pair=o,Yp.exports.format=r,Yp.exports.formatPair=t,Yp.exports.coordToDMS=n;function e(a,f){var p=i(a,f);return p===null?null:p.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,f){var p=n(a,f);return p.whole+" "+(p.minutes?p.minutes+"' ":"")+(p.seconds?p.seconds+'" ':"")+p.dir}function n(a,f){var p={lat:["N","S"],lon:["E","W"]}[f]||"",g=p[a>=0?0:1],b=Math.abs(a),S=Math.floor(b),_=b-S,P=_*60,k=Math.floor(P),M=Math.floor((P-k)*60);return{whole:S,minutes:k,seconds:M,dir:g}}function i(a,f){if(f||(f="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var p=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,g=a.match(p);if(!g)return null;var b=g[0],S;if(g[1]&&g[5]?(S=g[1],b=b.slice(0,-1)):S=g[1]||g[5],S&&f.indexOf(S)===-1)return null;var _=g[2]?parseFloat(g[2]):0,P=g[3]?parseFloat(g[3])/60:0,k=g[4]?parseFloat(g[4])/3600:0,M=_<0?-1:1;return(S==="S"||S==="W")&&(M*=-1),{val:(Math.abs(_)+P+k)*M,dim:S,matched:b,remain:a.slice(b.length)}}function o(a,f){a=a.trim();var p=i(a,f);if(!p)return null;a=p.remain.trim();var g=i(a,f);return!g||g.remain?null:p.dim?u(p.val,g.val,p.dim):[p.val,g.val]}function u(a,f,p){if(p==="N"||p==="S")return[a,f];if(p==="W"||p==="E")return[f,a]}return Yp.exports}var TT,L9;function K5e(){if(L9)return TT;L9=1;var e=Y5e,t=Z5e(),r=/(Lat)(itude)?/gi,n=/(L)(on|ng)(gitude)?/i;function i(M,D){var F,B,N;for(var $ in M)B=$.match(D),B&&(!F||B[0].length/$.length>N)&&(N=B[0].length/$.length,F=$);return F}function o(M){return i(M,r)}function u(M){return i(M,n)}function a(M){return!!M.match(r)}function f(M){return!!M.match(n)}function p(M){return typeof M=="object"?Object.keys(M).length:0}function g(M){var D=[",",";","	","|"],F=[];return D.forEach(function(B){var N=e.dsvFormat(B).parse(M);if(N.length>=1){for(var $=p(N[0]),V=0;V<N.length;V++)if(p(N[V])!==$)return;F.push({delimiter:B,arity:Object.keys(N[0]).length})}}),F.length?F.sort(function(B,N){return N.arity-B.arity})[0].delimiter:null}function b(M){return delete M.columns,M}function S(M){var D=g(M);return D?b(e.dsvFormat(D).parse(M)):null}function _(M,D,F){F||(F=D,D={}),D.delimiter=D.delimiter||",";var B=D.latfield||"",N=D.lonfield||"",$=D.crs||"",V=[],U={type:"FeatureCollection",features:V};if($!==""&&(U.crs={type:"name",properties:{name:$}}),D.delimiter==="auto"&&typeof M=="string"&&(D.delimiter=g(M),!D.delimiter)){F({type:"Error",message:"Could not autodetect delimiter"});return}var X=D.numericFields?D.numericFields.split(","):null,Z=typeof M=="string"?e.dsvFormat(D.delimiter).parse(M,function(ye){if(X)for(var xe in ye)X.includes(xe)&&(ye[xe]=+ye[xe]);return ye}):M;if(!Z.length){F(null,U);return}var oe=[],re;B||(B=o(Z[0])),N||(N=u(Z[0]));var H=!B||!N;if(H){for(re=0;re<Z.length;re++)V.push({type:"Feature",properties:Z[re],geometry:null});F(oe.length?oe:null,U);return}for(re=0;re<Z.length;re++)if(Z[re][N]!==void 0&&Z[re][B]!==void 0){var ae=Z[re][N],se=Z[re][B],de,fe,Le;Le=t(ae,"EW"),Le&&(ae=Le),Le=t(se,"NS"),Le&&(se=Le),de=parseFloat(ae),fe=parseFloat(se),isNaN(de)||isNaN(fe)?oe.push({message:"A row contained an invalid value for latitude or longitude",row:Z[re],index:re}):(D.includeLatLon||(delete Z[re][N],delete Z[re][B]),V.push({type:"Feature",properties:Z[re],geometry:{type:"Point",coordinates:[parseFloat(de),parseFloat(fe)]}}))}F(oe.length?oe:null,U)}function P(M){for(var D=M.features,F={type:"Feature",geometry:{type:"LineString",coordinates:[]}},B=0;B<D.length;B++)F.geometry.coordinates.push(D[B].geometry.coordinates);return F.properties=D.reduce(function(N,$){for(var V in $.properties)N[V]||(N[V]=[]),N[V].push($.properties[V]);return N},{}),{type:"FeatureCollection",features:[F]}}function k(M){for(var D=M.features,F={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},B=0;B<D.length;B++)F.geometry.coordinates[0].push(D[B].geometry.coordinates);return F.properties=D.reduce(function(N,$){for(var V in $.properties)N[V]||(N[V]=[]),N[V].push($.properties[V]);return N},{}),{type:"FeatureCollection",features:[F]}}return TT={isLon:f,isLat:a,guessLatHeader:o,guessLonHeader:u,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:S,csv2geojson:_,toLine:P,toPolygon:k},TT}var J5e=K5e();function nS(e){const t=e.split("?"),r=t[0].split("://"),n=r[0],u=(r.length>2?r[1]+"://"+r[2]:r[1]).split("/").join("/"),a=decodeURI(t[1]),f=Object.fromEntries(new URLSearchParams(a));return{protocolId:n,filename:u,options:f}}async function iS(e){try{return await(await fetch(e)).text()}catch(t){return console.error("File could not be loaded: ",t),t}}async function Q5e(e,t){return await new Promise((n,i)=>{const o=t||{};e.substring(e.length-3)==="tsv"&&(t.delimiter="	"),iS(e).then(a=>{J5e.csv2geojson(a,o,(f,p)=>{f?i(f):n(p)})})})}const eCe=async e=>{const t=nS(e.url),r=await Q5e(t.filename,t.options);if(r!==void 0)return{data:r};throw new Error("CSV not found "+t.filename)};var Du={},R9;function cb(){if(R9)return Du;R9=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.purgeProps=e,Du.first=t,Du.last=r,Du.coordsToKey=n,Du.addToMap=i,Du.removeFromMap=o,Du.getFirstFromMap=u,Du.isRing=a,Du.ringDirection=f,Du.pointInsidePolygon=p,Du.strArrayArrayToFloat=g,Du.strArrayToFloat=b;function e(S,_){if(S){const P=Object.assign({},S);if(_)for(const k of _)delete P[k];return P}return{}}function t(S){return S[0]}function r(S){return S[S.length-1]}function n(S){return S.join(",")}function i(S,_,P){const k=S[_];k?k.push(P):S[_]=[P]}function o(S,_,P){const k=S[_];let M=-1;k&&(M=k.indexOf(P)),M>=0&&k.splice(M,1)}function u(S,_){const P=S[_];return P&&P.length>0?P[0]:null}function a(S){return S.length>3&&n(t(S))===n(r(S))}function f(S,_,P){_=_||0,P=P||1;const k=S.reduce((Z,oe,re)=>S[Z][_||0]>oe[_||0]?Z:re,0),M=k<=0?S.length-2:k-1,D=k>=S.length-1?1:k+1,F=S[M][_],B=S[k][_],N=S[D][_],$=S[M][P],V=S[k][P],U=S[D][P];return(B-F)*(U-$)-(N-F)*(V-$)<0?"clockwise":"counterclockwise"}function p(S,_,P,k){P=P||0,k=k||1;let M=!1;for(let D=0,F=_.length-1;D<_.length;F=D++)(_[D][P]<=S[P]&&S[P]<_[F][P]||_[F][P]<=S[P]&&S[P]<_[D][P])&&S[k]<(_[F][k]-_[D][k])*(S[P]-_[D][P])/(_[F][P]-_[D][P])+_[D][k]&&(M=!M);return M}function g(S){return S.map(b)}function b(S){return S.map(parseFloat)}return Du}var r0={},D9;function tCe(){if(D9)return r0;D9=1,Object.defineProperty(r0,"__esModule",{value:!0}),r0.XmlParser=void 0;function e(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function t(i){const o=/^(.+?)\[(.+?)\]>$/g.exec(i);return o?{evt:o[1]+">",exp:o[2]}:{evt:i}}function r(i){const o="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",o)}class n{constructor(o){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,o&&(this.queryParent=!!o.queryParent,this.progressive=o.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(o,u,a){a=a?a+".":"";const f=/<([^ >\/]+)(.*?)>/mg,p=[];let g=f.exec(o);for(;g;){const b=g[1],S={$tag:b},_=a+b,P=g[2].trim();let k=!1;(P.endsWith("/")||b.startsWith("?")||b.startsWith("!"))&&(k=!0);const M=/([^ ]+?)="(.+?)"/g,D=/([^ ]+?)='(.+?)'/g;let F=M.exec(P),B=!1;for(;F;)B=!0,S[F[1]]=F[2],F=M.exec(P);if(!B)for(F=D.exec(P);F;)B=!0,S[F[1]]=F[2],F=D.exec(P);if(!B&&P!==""&&(S.text=P),this.progressive&&this.emit(`<${_}>`,S,u),!k){const N=new RegExp(`([^]+?)</${b}>`,"g");N.lastIndex=f.lastIndex;const $=N.exec(o);if($&&$[1]){f.lastIndex=N.lastIndex;const V=this.parse($[1],S,_);V.length>0?S.$innerNodes=V:S.$innerText=$[1]}}this.queryParent&&u&&this.parentMap.set(S,u),this.progressive&&this.emit(`</${_}>`,S,u),p.push(S),g=f.exec(o)}return p}getParent(o){return this.queryParent?this.parentMap.get(o):null}addListener(o,u){if(e(o)){const a=t(o);a.exp&&(u.condition=r(a.exp)),o=a.evt}this.$addListener(o,u)}removeListener(o,u){e(o)&&(o=t(o).evt),this.$removeListener(o,u)}on(o,u){this.addListener(o,u)}off(o,u){this.removeListener(o,u)}$addListener(o,u){const a=this.evtListeners[o];a?a.push(u):this.evtListeners[o]=[u]}$removeListener(o,u){const a=this.evtListeners[o];let f=-1;a&&(f=a.indexOf(u)),f>=0&&a.splice(f,1)}emit(o,...u){const a=this.evtListeners[o];if(a)for(const f of a)f.condition?f.condition.apply(null,u)===!0&&f.apply(null,u):f.apply(null,u)}}return r0.XmlParser=n,r0}var n0={},i0={},O9;function Kk(){if(O9)return i0;O9=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.OsmObject=void 0;class e{constructor(r,n,i){this.type=r,this.id=n,this.refElems=i,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,i&&i.add(this.getCompositeId(),this)}addTags(r){this.tags=Object.assign(this.tags,r),this.hasTag=!0}addTag(r,n){this.tags[r]=n,this.hasTag=!0}addProp(r,n){this.props[r]=n}addProps(r){this.props=Object.assign(this.props,r)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}}return i0.OsmObject=e,i0}var N9;function JU(){if(N9)return n0;N9=1,Object.defineProperty(n0,"__esModule",{value:!0}),n0.Node=void 0;const e=Kk(),t=cb();class r extends e.OsmObject{constructor(i,o){super("node",i,o)}setLatLng(i){this.latLng=i}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,t.strArrayToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}return n0.Node=r,n0}var Zp={},a0={},F9;function QU(){if(F9)return a0;F9=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.LateBinder=void 0;class e{constructor(r,n,i,o){this.container=r,this.valueFunc=n,this.ctx=i,this.args=o}bind(){const r=this.valueFunc.apply(this.ctx,this.args),n=this.container.indexOf(this);if(n<0)return;const i=[n,1];r&&i.push(r),Array.prototype.splice.apply(this.container,i)}}return a0.LateBinder=e,a0}const rCe={},nCe={whitelist:["services","rest_area","escape","elevator"]},iCe={blacklist:["coastline","cliff","ridge","arete","tree_row"]},aCe={},oCe={whitelist:["riverbank","dock","boatyard","dam"]},sCe={},lCe={},uCe={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},cCe={whitelist:["station","turntable","roundhouse","platform"]},dCe={},fCe={},hCe={blacklist:["cutline","embankment","pipeline"]},pCe={whitelist:["plant","substation","generator","transformer"]},mCe={},gCe={},yCe={blacklist:["taxiway"]},vCe={},bCe={},_Ce={},xCe={},wCe={},SCe={},CCe={},ECe={},TCe={},ICe={building:rCe,highway:nCe,natural:iCe,landuse:aCe,waterway:oCe,amenity:sCe,leisure:lCe,barrier:uCe,railway:cCe,area:dCe,boundary:fCe,man_made:hCe,power:pCe,place:mCe,shop:gCe,aeroway:yCe,tourism:vCe,historic:bCe,public_transport:_Ce,office:xCe,"building:part":{},military:wCe,ruins:SCe,"area:highway":{},craft:CCe,golf:ECe,indoor:TCe};var B9;function eH(){if(B9)return Zp;B9=1;var e=Zp&&Zp.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.Way=void 0;const t=Kk(),r=QU(),n=cb(),i=e(ICe);class o extends t.OsmObject{constructor(a,f){super("way",a,f),this.latLngArray=[],this.isPolygon=!1}addLatLng(a){this.latLngArray.push(a)}setLatLngArray(a){this.latLngArray=a}addNodeRef(a){const f=new r.LateBinder(this.latLngArray,p=>{const g=this.refElems.get(`node/${p}`);if(g)return g.refCount++,g.getLatLng()},this,[a]);this.latLngArray.push(f),this.refElems.addBinder(f)}addTags(a){super.addTags(a);for(const[f,p]of Object.entries(a))this.analyzeTag(f,p)}addTag(a,f){super.addTag(a,f),this.analyzeTag(a,f)}toCoordsArray(){return this.latLngArray.map(a=>[a.lon,a.lat])}toFeatureArray(){let a=this.toCoordsArray();if(a.length>1){const f=(0,n.strArrayArrayToFloat)(a),p={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:f}};return this.isPolygon&&(0,n.isRing)(f)?((0,n.ringDirection)(f)!=="counterclockwise"&&f.reverse(),p.geometry={type:"Polygon",coordinates:[f]},[p]):[p]}return[]}analyzeTag(a,f){const p=i.default[a];p&&(this.isPolygon=!0,p.whitelist?this.isPolygon=p.whitelist.indexOf(f)>=0:p.blacklist&&(this.isPolygon=!(p.blacklist.indexOf(f)>=0)))}}return Zp.Way=o,Zp}var o0={},s0={},z9;function PCe(){if(z9)return s0;z9=1,Object.defineProperty(s0,"__esModule",{value:!0}),s0.WayCollection=void 0;const e=cb();class t extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(n){const i=n.toCoordsArray();i.length>0&&(this.push(i),(0,e.addToMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.addToMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i))}mergeWays(){const n=[];let i=this.shift();for(;i;){(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i);let o=i,u;do{let a=this.getNextWay(o);u=a.next;let f=a.mergeType;if(u)switch(this.splice(this.indexOf(u),1),(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(u)),u),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(u)),u),f){case 0:o=o.concat(u.slice(1));break;case 1:u.reverse(),o=o.concat(u.slice(1));break;case 2:o.reverse(),o=o.concat(u.slice(1));break;case 3:o=u.concat(o.slice(1));break}}while(u);n.push((0,e.strArrayArrayToFloat)(o)),i=this.shift()}return n}getNextWay(n){const i=(0,e.coordsToKey)((0,e.last)(n)),o=(0,e.coordsToKey)((0,e.first)(n));let u=this.length>0?this[0]:null;if(u){const a=(0,e.coordsToKey)((0,e.first)(u)),f=(0,e.coordsToKey)((0,e.last)(u));if(i===a)return{next:u,mergeType:0};if(i===f)return{next:u,mergeType:1};if(o===a)return{next:u,mergeType:2};if(o===f)return{next:u,mergeType:3}}return u=(0,e.getFirstFromMap)(this.firstMap,i),u?{next:u,mergeType:0}:(u=(0,e.getFirstFromMap)(this.lastMap,i),{next:u,mergeType:1})}toRings(n){const i=this.mergeWays(),o=[];let u=i.shift();for(;u;)(0,e.isRing)(u)&&((0,e.ringDirection)(u)!==n&&u.reverse(),o.push(u)),u=i.shift();return o}}return s0.WayCollection=t,s0}var j9;function ACe(){if(j9)return o0;j9=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.Relation=void 0;const e=Kk(),t=eH(),r=JU(),n=PCe(),i=QU(),o=cb();class u extends e.OsmObject{constructor(f,p){super("relation",f,p),this.relations=[],this.nodes=[],this.bounds=void 0,this.ways=[],this.roles=[]}setBounds(f){this.bounds=f}addMember(f){switch(f.type){case"relation":let p=new i.LateBinder(this.relations,b=>{const S=this.refElems.get(`relation/${b}`);if(S)return S.refCount++,S},this,[f.ref]);this.relations.push(p),this.refElems.addBinder(p);break;case"way":if(f.role||(f.role=""),f.geometry){const b=new t.Way(f.ref,this.refElems);b.setLatLngArray(f.geometry),b.refCount++,this.ways.push(b),this.roles.push(f.role)}else if(f.nodes){const b=new t.Way(f.ref,this.refElems);for(const S of f.nodes)b.addNodeRef(S);b.refCount++,this.ways.push(b),this.roles.push(f.role)}else{let b=new i.LateBinder(this.ways,S=>{const _=this.refElems.get(`way/${S}`);if(_)return _.refCount++,_},this,[f.ref]);this.ways.push(b),this.roles.push(f.role),this.refElems.addBinder(b)}break;case"node":let g=null;if(f.lat&&f.lon){g=new r.Node(f.ref,this.refElems),g.setLatLng({lon:f.lon,lat:f.lat}),f.tags&&g.addTags(f.tags);for(const[b,S]of Object.entries(f))["id","type","lat","lon"].indexOf(b)<0&&g.addProp(b,S);g.refCount++,this.nodes.push(g)}else{let b=new i.LateBinder(this.nodes,S=>{const _=this.refElems.get(`node/${S}`);if(_)return _.refCount++,_},this,[f.ref]);this.nodes.push(b),this.refElems.addBinder(b)}break}}constructStringGeometry(f){const p=f?f.mergeWays():[];return p.length===0?null:{type:"MultiLineString",coordinates:p}}constructPolygonGeometry(f,p){const g=f?f.toRings("counterclockwise"):[],b=p?p.toRings("clockwise"):[];if(g.length>0){const S=[];let _;for(_ of g)S.push([_]);for(_=b.shift();_;){for(const P in g)if((0,o.pointInsidePolygon)((0,o.first)(_),g[P])){S[P].push(_);break}_=b.shift()}return S.length===1?{type:"Polygon",coordinates:S[0]}:{type:"MultiPolygon",coordinates:S}}return null}toFeatureArray(){const f=[],p=[];let g=[];for(const S of this.relations)if(S)for(let _=0;_<S.ways.length;_++){const P=S.ways[_];this.ways.push(P),this.roles.push(S.roles[_])}let b={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete b.bbox,this.roles.some(S=>S==="outer")){const S=new n.WayCollection,_=new n.WayCollection;for(let M=0;M<this.ways.length;M++){const D=this.ways[M],F=this.roles[M];F==="outer"?S.addWay(D):F==="inner"&&_.addWay(D)}let P=Object.assign({},b),k=this.constructPolygonGeometry(S,_);k&&(P.geometry=k,f.push(P))}else{const S=new n.WayCollection;for(let P of this.ways)S.addWay(P);let _=this.constructStringGeometry(S);if(_){let P=Object.assign({},b);P.geometry=_,p.push(P)}}for(let S of this.nodes)g=g.concat(S.toFeatureArray());return[...f,...p,...g]}}return o0.Relation=u,o0}var l0={},q9;function kCe(){if(q9)return l0;q9=1,Object.defineProperty(l0,"__esModule",{value:!0}),l0.RefElements=void 0;class e extends Map{constructor(){super(),this.binders=[]}add(r,n){this.set(r,n)}addBinder(r){this.binders.push(r)}bindAll(){this.binders.forEach(r=>r.bind())}}return l0.RefElements=e,l0}var IT,V9;function MCe(){if(V9)return IT;V9=1;const e=cb(),t=tCe(),r=JU(),n=eH(),i=ACe(),o=kCe();function u(b){if(!b)return{completeFeature:!1,renderTagged:!1,excludeWay:!0};let S=b.excludeWay===void 0||b.excludeWay,_=!!b.completeFeature,P=!!b.renderTagged;return{completeFeature:_,renderTagged:P,excludeWay:S}}function a(b){return b.elements?"json":b.indexOf("<osm")>=0?"xml":b.trim().startsWith("{")?"json-raw":"invalid"}function f(b,S){for(const _ of b.elements)switch(_.type){case"node":const P=new r.Node(_.id,S);_.tags&&P.addTags(_.tags),P.addProps((0,e.purgeProps)(_,["id","type","tags","lat","lon"])),P.setLatLng(_);break;case"way":const k=new n.Way(_.id,S);if(_.tags&&k.addTags(_.tags),k.addProps((0,e.purgeProps)(_,["id","type","tags","nodes","geometry"])),_.geometry)k.setLatLngArray(_.geometry);else if(_.nodes)for(const D of _.nodes)k.addNodeRef(D);break;case"relation":const M=new i.Relation(_.id,S);if(_.bounds&&M.setBounds([parseFloat(_.bounds.minlon),parseFloat(_.bounds.minlat),parseFloat(_.bounds.maxlon),parseFloat(_.bounds.maxlat)]),_.tags&&M.addTags(_.tags),M.addProps((0,e.purgeProps)(_,["id","type","tags","bounds","members"])),_.members)for(const D of _.members)M.addMember(D)}}function p(b,S){const _=new t.XmlParser({progressive:!0});_.on("</osm.node>",P=>{const k=new r.Node(P.id,S);for(const[M,D]of Object.entries(P))!M.startsWith("$")&&["id","lon","lat"].indexOf(M)<0&&k.addProp(M,D);if(k.setLatLng(P),P.$innerNodes)for(const M of P.$innerNodes)M.$tag==="tag"&&k.addTag(M.k,M.v)}),_.on("</osm.way>",P=>{const k=new n.Way(P.id,S);for(const[M,D]of Object.entries(P))!M.startsWith("$")&&["id"].indexOf(M)<0&&k.addProp(M,D);if(P.$innerNodes)for(const M of P.$innerNodes)M.$tag==="nd"?M.lon&&M.lat?k.addLatLng(M):M.ref&&k.addNodeRef(M.ref):M.$tag==="tag"&&k.addTag(M.k,M.v)}),_.on("<osm.relation>",P=>new i.Relation(P.id,S)),_.on("</osm.relation.member>",(P,k)=>{const M=S.get(`relation/${k?.id}`),D={type:P.type,role:P.role?P.role:"",ref:P.ref};if(P.lat&&P.lon){D.lat=P.lat,D.lon=P.lon,D.tags={};for(const[F,B]of Object.entries(P))!F.startsWith("$")&&["type","lat","lon"].indexOf(F)<0&&(D[F]=B)}if(P.$innerNodes){const F=[],B=[];for(const N of P.$innerNodes)N.lat&&N.lon?F.push(N):N.ref&&B.push(N.ref);F.length>0?D.geometry=F:B.length>0&&(D.nodes=B)}M.addMember(D)}),_.on("</osm.relation.bounds>",(P,k)=>{S.get(`relation/${k?.id}`).setBounds([parseFloat(P.minlon),parseFloat(P.minlat),parseFloat(P.maxlon),parseFloat(P.maxlat)])}),_.on("</osm.relation.tag>",(P,k)=>{S.get(`relation/${k?.id}`).addTag(P.k,P.v)}),_.parse(b)}function g(b,S){let{completeFeature:_,renderTagged:P,excludeWay:k}=u(S),M=a(b);const D=new o.RefElements;let F=[];M==="json-raw"&&(b=JSON.parse(b),b.elements?M="json":M="invalid"),M==="json"?f(b,D):M==="xml"&&p(b,D),D.bindAll();for(const B of D.values()){if(B.refCount>0&&(!B.hasTag||!P||B instanceof n.Way&&k))continue;const N=B.toFeatureArray();if(B instanceof i.Relation&&!_&&N.length>0)return N[0].geometry;F=F.concat(N)}return{type:"FeatureCollection",features:F}}return IT=g,IT}var LCe=MCe();const RCe=Sf(LCe);async function DCe(e){const t=e.options||{};return await new Promise((n,i)=>{iS(e.filename).then(o=>{const u=RCe(o,t);u?n(u):i("Conversion failed")})})}const OCe=async e=>{const t=nS(e.url),r=await DCe(t);if(r!==void 0)return{data:r};throw new Error("OSM File not found "+t.filename)};function NCe(e){const t=[];return e.features.forEach(r=>{r.features?r.features.forEach(n=>{t.push({type:n.type,geometry:n.geometry,properties:n.properties})}):t.push({type:r.type,geometry:r.geometry,properties:r.properties})}),t}async function FCe(e){return await new Promise(r=>{let n={type:"Topology",objects:{key:""},arcs:[]};iS(e.filename).then(i=>{try{n=JSON.parse(i)}catch(u){throw console.error("Error converting topojson",u),"Invalid TopoJson"}let o={type:"FeatureCollection",features:[]};if(n.type==="Topology"&&n.objects!==void 0){const u=n.objects;Object.keys(n.objects).map(a=>{u?.[a].type==="GeometryCollection"?u?.[a].geometries?.forEach(f=>f.properties={fromObject:a,...f.properties}):u?.[a]&&u?.[a]?.type!=="GeometryCollection"&&(u[a].properties={fromObject:a,...u?.[a].properties})}),o={type:"FeatureCollection",features:Object.keys(n.objects).map(a=>jme(n,a))},o.features=NCe(o)}r(o)})})}const BCe=async e=>{const t=nS(e.url),r=await FCe(t);if(r!==void 0)return{data:r};throw new Error("Topojson not found "+t.filename)};function Os(e,t){return Array.from(e.getElementsByTagName(t))}function P2(e){return e[0]==="#"?e:`#${e}`}function zCe(e,t,r){return Array.from(e.getElementsByTagNameNS(r,t))}function is(e){return e?.normalize(),e?.textContent||""}function Oo(e,t,r){const n=e.getElementsByTagName(t),i=n.length?n[0]:null;return i&&r&&r(i),i}function Ic(e,t,r){const n={};if(!e)return n;const i=e.getElementsByTagName(t),o=i.length?i[0]:null;return o&&r?r(o,n):n}function km(e,t,r){const n=is(Oo(e,t));return n&&r?r(n)||{}:{}}function $9(e,t,r){const n=Number.parseFloat(is(Oo(e,t)));if(!Number.isNaN(n))return n&&r?r(n)||{}:{}}function Xl(e,t,r){const n=Number.parseFloat(is(Oo(e,t)));if(!Number.isNaN(n))return r&&r(n),n}function Mm(e,t){const r={};for(const n of t)km(e,n,i=>{r[n]=i});return r}function db(e){return e?.nodeType===1}function tH(e){let t=[];if(e===null)return t;for(const r of Array.from(e.childNodes)){if(!db(r))continue;const n=jCe(r.nodeName);if(n==="gpxtpx:TrackPointExtension")t=t.concat(tH(r));else{const i=is(r);t.push([n,qCe(i)])}}return t}function jCe(e){return["heart","gpxtpx:hr","hr"].includes(e)?"heart":e}function qCe(e){const t=Number.parseFloat(e);return Number.isNaN(t)?e:t}function rH(e){const t=[Number.parseFloat(e.getAttribute("lon")||""),Number.parseFloat(e.getAttribute("lat")||"")];if(Number.isNaN(t[0])||Number.isNaN(t[1]))return null;Xl(e,"ele",n=>{t.push(n)});const r=Oo(e,"time");return{coordinates:t,time:r?is(r):null,extendedValues:tH(Oo(e,"extensions"))}}function nH(e){return Ic(e,"line",t=>Object.assign({},km(t,"color",n=>({stroke:`#${n}`})),$9(t,"opacity",n=>({"stroke-opacity":n})),$9(t,"width",n=>({"stroke-width":n*96/25.4}))))}function Jk(e,t){const r=Mm(t,["name","cmt","desc","type","time","keywords"]);for(const[i,o]of e)for(const u of Array.from(t.getElementsByTagNameNS(o,"*")))r[u.tagName.replace(":","_")]=is(u)?.trim();const n=Os(t,"link");return n.length&&(r.links=n.map(i=>Object.assign({href:i.getAttribute("href")},Mm(i,["text","type"])))),r}function iH(e,t){const r=Os(e,t),n=[],i=[],o={};for(let u=0;u<r.length;u++){const a=rH(r[u]);if(a){n.push(a.coordinates),a.time&&i.push(a.time);for(const[f,p]of a.extendedValues){const g=f==="heart"?f:`${f.replace("gpxtpx:","")}s`;o[g]||(o[g]=Array(r.length).fill(null)),o[g][u]=p}}}if(!(n.length<2))return{line:n,times:i,extendedValues:o}}function VCe(e,t){const r=iH(t,"rtept");if(r)return{type:"Feature",properties:Object.assign({_gpxType:"rte"},Jk(e,t),nH(Oo(t,"extensions"))),geometry:{type:"LineString",coordinates:r.line}}}function $Ce(e,t){const r=Os(t,"trkseg"),n=[],i=[],o=[];for(const f of r){const p=iH(f,"trkpt");p&&(o.push(p),p.times?.length&&i.push(p.times))}if(o.length===0)return null;const u=o.length>1,a=Object.assign({_gpxType:"trk"},Jk(e,t),nH(Oo(t,"extensions")),i.length?{coordinateProperties:{times:u?i:i[0]}}:{});for(let f=0;f<o.length;f++){const p=o[f];n.push(p.line),a.coordinateProperties||(a.coordinateProperties={});const g=a.coordinateProperties;for(const[b,S]of Object.entries(p.extendedValues))u?(g[b]||(g[b]=o.map(_=>new Array(_.line.length).fill(null))),g[b][f]=S):g[b]=S}return{type:"Feature",properties:a,geometry:u?{type:"MultiLineString",coordinates:n}:{type:"LineString",coordinates:n[0]}}}function GCe(e,t){const r=Object.assign(Jk(e,t),Mm(t,["sym"])),n=rH(t);return n?{type:"Feature",properties:r,geometry:{type:"Point",coordinates:n.coordinates}}:null}function*aH(e){const t=e,r="gpxx",n="http://www.garmin.com/xmlschemas/GpxExtensions/v3",i=[[r,n]],o=t.getElementsByTagName("gpx")[0]?.attributes;if(o)for(const u of Array.from(o))u.name?.startsWith("xmlns:")&&u.value!==n&&i.push([u.name,u.value]);for(const u of Os(t,"trk")){const a=$Ce(i,u);a&&(yield a)}for(const u of Os(t,"rte")){const a=VCe(i,u);a&&(yield a)}for(const u of Os(t,"wpt")){const a=GCe(i,u);a&&(yield a)}}function UCe(e){return{type:"FeatureCollection",features:Array.from(aH(e))}}const HCe="http://www.garmin.com/xmlschemas/ActivityExtension/v2",WCe=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],XCe=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]];function oH(e,t){const r=[];for(const[n,i]of t){let o=Oo(e,n);if(!o){const a=e.getElementsByTagNameNS(HCe,n);a.length&&(o=a[0])}const u=Number.parseFloat(is(o));Number.isNaN(u)||r.push([i,u])}return r}function YCe(e){const t=[Xl(e,"LongitudeDegrees"),Xl(e,"LatitudeDegrees")];if(t[0]===void 0||Number.isNaN(t[0])||t[1]===void 0||Number.isNaN(t[1]))return null;const r=Oo(e,"HeartRateBpm"),n=is(Oo(e,"Time"));return Oo(e,"AltitudeMeters",i=>{const o=Number.parseFloat(is(i));Number.isNaN(o)||t.push(o)}),{coordinates:t,time:n||null,heartRate:r?Number.parseFloat(is(r)):null,extensions:oH(e,WCe)}}function ZCe(e){const t=Os(e,"Trackpoint"),r=[],n=[],i=[];if(t.length<2)return null;const o={},u={extendedProperties:o};for(let a=0;a<t.length;a++){const f=YCe(t[a]);if(f===null)continue;r.push(f.coordinates);const{time:p,heartRate:g,extensions:b}=f;p&&n.push(p),g&&i.push(g);for(const[S,_]of b)o[S]||(o[S]=Array(t.length).fill(null)),o[S][a]=_}return r.length<2?null:Object.assign(u,{line:r,times:n,heartRates:i})}function G9(e){const t=Os(e,"Track"),r=[],n=[],i=[],o=[];let u;const a=Object.assign(Object.fromEntries(oH(e,XCe)),Ic(e,"Name",f=>({name:is(f)})));for(const f of t)u=ZCe(f),u&&(r.push(u.line),u.times.length&&n.push(u.times),u.heartRates.length&&i.push(u.heartRates),o.push(u.extendedProperties));for(let f=0;f<o.length;f++){const p=o[f];for(const g in p)t.length===1?u&&(a[g]=u.extendedProperties[g]):(a[g]||(a[g]=r.map(b=>Array(b.length).fill(null))),a[g][f]=p[g])}return r.length===0?null:((n.length||i.length)&&(a.coordinateProperties=Object.assign(n.length?{times:r.length===1?n[0]:n}:{},i.length?{heart:r.length===1?i[0]:i}:{})),{type:"Feature",properties:a,geometry:r.length===1?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}})}function*sH(e){for(const t of Os(e,"Lap")){const r=G9(t);r&&(yield r)}for(const t of Os(e,"Courses")){const r=G9(t);r&&(yield r)}}function KCe(e){return{type:"FeatureCollection",features:Array.from(sH(e))}}function lH(e,t){const r={},n=t==="stroke"||t==="fill"?t:`${t}-color`;return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?r[n]=`#${e}`:e.length===8&&(r[`${t}-opacity`]=Number.parseInt(e.substring(0,2),16)/255,r[n]=`#${e.substring(6,8)}${e.substring(4,6)}${e.substring(2,4)}`),r}function A2(e,t,r){const n={};return Xl(e,t,i=>{n[r]=i}),n}function Qk(e,t){return Ic(e,"color",r=>lH(is(r),t))}function eM(e){return Ic(e,"Icon",(t,r)=>(km(t,"href",n=>{r.icon=n}),r))}function JCe(e){return Ic(e,"IconStyle",t=>Object.assign(Qk(t,"icon"),A2(t,"scale","icon-scale"),A2(t,"heading","icon-heading"),Ic(t,"hotSpot",r=>{const n=Number.parseFloat(r.getAttribute("x")||""),i=Number.parseFloat(r.getAttribute("y")||""),o=r.getAttribute("xunits")||"",u=r.getAttribute("yunits")||"";return!Number.isNaN(n)&&!Number.isNaN(i)?{"icon-offset":[n,i],"icon-offset-units":[o,u]}:{}}),eM(t)))}function QCe(e){return Ic(e,"LabelStyle",t=>Object.assign(Qk(t,"label"),A2(t,"scale","label-scale")))}function eEe(e){return Ic(e,"LineStyle",t=>Object.assign(Qk(t,"stroke"),A2(t,"width","stroke-width")))}function tEe(e){return Ic(e,"PolyStyle",(t,r)=>Object.assign(r,Ic(t,"color",n=>lH(is(n),"fill")),km(t,"fill",n=>{if(n==="0")return{"fill-opacity":0}}),km(t,"outline",n=>{if(n==="0")return{"stroke-opacity":0}})))}function aS(e){return Object.assign({},tEe(e),eEe(e),QCe(e),JCe(e))}const rEe=/\s*/g,nEe=/^\s*|\s*$/g,iEe=/\s+/;function uH(e){return e.replace(rEe,"").split(",").map(Number.parseFloat).filter(t=>!Number.isNaN(t)).slice(0,3)}function zI(e){return e.replace(nEe,"").split(iEe).map(uH).filter(t=>t.length>=2)}function aEe(e){let t=Os(e,"coord");t.length===0&&(t=zCe(e,"coord","*"));const r=t.map(n=>is(n).split(" ").map(Number.parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:Os(e,"when").map(n=>is(n))}}function cH(e){if(e.length===0)return e;const t=e[0],r=e[e.length-1];let n=!0;for(let i=0;i<Math.max(t.length,r.length);i++)if(t[i]!==r[i]){n=!1;break}return n?e:e.concat([e[0]])}function vx(e){return is(Oo(e,"coordinates"))}function dH(e){let t=[],r=[];for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes.item(n);if(db(i))switch(i.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const o=dH(i);t=t.concat(o.geometries),r=r.concat(o.coordTimes);break}case"Point":{const o=uH(vx(i));o.length>=2&&t.push({type:"Point",coordinates:o});break}case"LinearRing":case"LineString":{const o=zI(vx(i));o.length>=2&&t.push({type:"LineString",coordinates:o});break}case"Polygon":{const o=[];for(const u of Os(i,"LinearRing")){const a=cH(zI(vx(u)));a.length>=4&&o.push(a)}o.length&&t.push({type:"Polygon",coordinates:o});break}case"Track":case"gx:Track":{const o=aEe(i);if(!o)break;const{times:u,geometry:a}=o;t.push(a),u.length&&r.push(u);break}}}return{geometries:t,coordTimes:r}}const zg=e=>Number(e),jI={string:e=>e,int:zg,uint:zg,short:zg,ushort:zg,float:zg,double:zg,bool:e=>!!e};function tM(e,t){return Ic(e,"ExtendedData",(r,n)=>{for(const i of Os(r,"Data"))n[i.getAttribute("name")||""]=is(Oo(i,"value"));for(const i of Os(r,"SimpleData")){const o=i.getAttribute("name")||"",u=t[o]||jI.string;n[o]=u(is(i))}return n})}function rM(e){const t=Oo(e,"description");for(const r of Array.from(t?.childNodes||[]))if(r.nodeType===4)return{description:{"@type":"html",value:is(r)}};return{}}function nM(e){return Ic(e,"TimeSpan",t=>({timespan:{begin:is(Oo(t,"begin")),end:is(Oo(t,"end"))}}))}function iM(e){return Ic(e,"TimeStamp",t=>({timestamp:is(Oo(t,"when"))}))}function aM(e,t){return km(e,"styleUrl",r=>(r=P2(r),t[r]?Object.assign({styleUrl:r},t[r]):{styleUrl:r}))}var qc;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(qc||(qc={}));function oEe(e){switch(e?.textContent){case qc.ABSOLUTE:return qc.ABSOLUTE;case qc.CLAMP_TO_GROUND:return qc.CLAMP_TO_GROUND;case qc.CLAMP_TO_SEAFLOOR:return qc.CLAMP_TO_SEAFLOOR;case qc.RELATIVE_TO_GROUND:return qc.RELATIVE_TO_GROUND;case qc.RELATIVE_TO_SEAFLOOR:return qc.RELATIVE_TO_SEAFLOOR}return null}function sEe(e){return Oo(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[cH(zI(vx(e)))]}}:cEe(e)}const lEe=Math.PI/180;function uEe(e,t,r){const n=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[t[0].map(i=>{const o=i[1]-n[1],u=i[0]-n[0],a=Math.sqrt(o**2+u**2),f=Math.atan2(o,u)+r*lEe;return[n[0]+Math.cos(f)*a,n[1]+Math.sin(f)*a]})]}function cEe(e){const t=Oo(e,"LatLonBox");if(t){const r=Xl(t,"north"),n=Xl(t,"west"),i=Xl(t,"east"),o=Xl(t,"south"),u=Xl(t,"rotation");if(typeof r=="number"&&typeof o=="number"&&typeof n=="number"&&typeof i=="number"){const a=[n,o,i,r];let f=[[[n,r],[i,r],[i,o],[n,o],[n,r]]];return typeof u=="number"&&(f=uEe(a,f,u)),{bbox:a,geometry:{type:"Polygon",coordinates:f}}}}return null}function fH(e,t,r,n){const i=sEe(e),o=i?.geometry||null;if(!o&&n.skipNullGeometry)return null;const u={type:"Feature",geometry:o,properties:Object.assign({"@geometry-type":"groundoverlay"},Mm(e,["name","address","visibility","open","phoneNumber","description"]),rM(e),aM(e,t),aS(e),eM(e),tM(e,r),nM(e),iM(e))};i?.bbox&&(u.bbox=i.bbox),u.properties?.visibility!==void 0&&(u.properties.visibility=u.properties.visibility!=="0");const a=e.getAttribute("id");return a!==null&&a!==""&&(u.id=a),u}function dEe(e){const t=Oo(e,"Region");return t?{coordinateBox:hEe(t),lod:fEe(e)}:null}function fEe(e){const t=Oo(e,"Lod");return t?[Xl(t,"minLodPixels")??-1,Xl(t,"maxLodPixels")??-1,Xl(t,"minFadeExtent")??null,Xl(t,"maxFadeExtent")??null]:null}function hEe(e){const t=Oo(e,"LatLonAltBox");if(t){const r=Xl(t,"north"),n=Xl(t,"west"),i=Xl(t,"east"),o=Xl(t,"south");if(oEe(Oo(t,"altitudeMode")||Oo(t,"gx:altitudeMode"))&&console.debug("Encountered an unsupported feature of KML for togeojson: please contact developers for support of altitude mode."),typeof r=="number"&&typeof o=="number"&&typeof n=="number"&&typeof i=="number")return{bbox:[n,o,i,r],geometry:{type:"Polygon",coordinates:[[[n,r],[i,r],[i,o],[n,o],[n,r]]]}}}return null}function pEe(e){const t=Oo(e,"Link");return t?Mm(t,["href","refreshMode","refreshInterval","viewRefreshMode","viewRefreshTime","viewBoundScale","viewFormat","httpQuery"]):{}}function hH(e,t,r,n){const i=dEe(e),o=i?.coordinateBox?.geometry||null;if(!o&&n.skipNullGeometry)return null;const u={type:"Feature",geometry:o,properties:Object.assign({"@geometry-type":"networklink"},Mm(e,["name","address","visibility","open","phoneNumber","styleUrl","refreshVisibility","flyToView","description"]),rM(e),aM(e,t),aS(e),eM(e),tM(e,r),nM(e),iM(e),pEe(e),i?.lod?{lod:i.lod}:{})};i?.coordinateBox?.bbox&&(u.bbox=i.coordinateBox.bbox),u.properties?.visibility!==void 0&&(u.properties.visibility=u.properties.visibility!=="0");const a=e.getAttribute("id");return a!==null&&a!==""&&(u.id=a),u}function mEe(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function pH(e,t,r,n){const{coordTimes:i,geometries:o}=dH(e),u=mEe(o);if(!u&&n.skipNullGeometry)return null;const a={type:"Feature",geometry:u,properties:Object.assign(Mm(e,["name","address","visibility","open","phoneNumber","description"]),rM(e),aM(e,t),aS(e),tM(e,r),nM(e),iM(e),i.length?{coordinateProperties:{times:i.length===1?i[0]:i}}:{})};a.properties?.visibility!==void 0&&(a.properties.visibility=a.properties.visibility!=="0");const f=e.getAttribute("id");return f!==null&&f!==""&&(a.id=f),a}function gEe(e){let t=e.getAttribute("id");const r=e.parentNode;return!t&&db(r)&&r.localName==="CascadingStyle"&&(t=r.getAttribute("kml:id")||r.getAttribute("id")),P2(t||"")}function mH(e){const t={};for(const r of Os(e,"Style"))t[gEe(r)]=aS(r);for(const r of Os(e,"StyleMap")){const n=P2(r.getAttribute("id")||"");km(r,"styleUrl",i=>{i=P2(i),t[i]&&(t[n]=t[i])})}return t}function gH(e){const t={};for(const r of Os(e,"SimpleField"))t[r.getAttribute("name")||""]=jI[r.getAttribute("type")||""]||jI.string;return t}const yEe=["name","visibility","open","address","description","phoneNumber","visibility"];function vEe(e){const t={};for(const r of Array.from(e.childNodes))db(r)&&yEe.includes(r.tagName)&&(t[r.tagName]=is(r));return{type:"folder",meta:t,children:[]}}function bEe(e,t={skipNullGeometry:!1}){const r=e,n=mH(r),i=gH(r),o={type:"root",children:[]};function u(a,f,p){if(db(a))switch(a.tagName){case"GroundOverlay":{const g=fH(a,n,i,p);g&&f.children.push(g);break}case"Placemark":{const g=pH(a,n,i,p);g&&f.children.push(g);break}case"Folder":{const g=vEe(a);f.children.push(g),f=g;break}case"NetworkLink":{const g=hH(a,n,i,p);g&&f.children.push(g);break}}if(a.childNodes)for(let g=0;g<a.childNodes.length;g++)u(a.childNodes[g],f,p)}return u(r,o,t),o}function*yH(e,t={skipNullGeometry:!1}){const r=e,n=mH(r),i=gH(r);for(const o of Os(r,"Placemark")){const u=pH(o,n,i,t);u&&(yield u)}for(const o of Os(r,"GroundOverlay")){const u=fH(o,n,i,t);u&&(yield u)}for(const o of Os(r,"NetworkLink")){const u=hH(o,n,i,t);u&&(yield u)}}function _Ee(e,t={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(yH(e,t))}}const xEe=Object.freeze(Object.defineProperty({__proto__:null,gpx:UCe,gpxGen:aH,kml:_Ee,kmlGen:yH,kmlWithFolders:bEe,tcx:KCe,tcxGen:sH},Symbol.toStringTag,{value:"Module"}));async function wEe(e){return await new Promise((r,n)=>{iS(e.filename).then(i=>{const o=()=>e.protocolId==="tcx"?xEe[e.protocolId](new DOMParser().parseFromString(i,"text/xml")):VU[e.protocolId](new DOMParser().parseFromString(i,"text/xml"));o()?r(o()):n("Conversion failed")})})}const PT=async e=>{const t=nS(e.url),r=await wEe(t);if(r!==void 0)return{data:r};throw new Error("XML not found "+t.filename)},qI=e=>{const t=ha({mapId:void 0}),r=ee.useRef(!1);ee.useEffect(()=>{if(!(!t.map||r.current))return t.map?.loadImage(e.imagePath).then(function(n){if(!n?.data){console.log("image "+e.imagePath+"could not be loaded");return}t.map?.addImage(e.imageId,n.data)}),()=>{t.map?.removeImage(e.imageId)}},[t.map,e])};qI.defaultProps={mapId:void 0};try{qI.displayName="useAddImage",qI.__docgenInfo={description:"",displayName:"useAddImage",props:{imageId:{defaultValue:null,description:"",name:"imageId",required:!0,type:{name:"string"}},imagePath:{defaultValue:null,description:"",name:"imagePath",required:!0,type:{name:"string"}}}}}catch{}const SEe=gt.createContext({}),VI=SEe.Provider;try{VI.displayName="SimpleDataContextProvider",VI.__docgenInfo={description:"",displayName:"SimpleDataContextProvider",props:{}}}catch{}var CEe={value:()=>{}};function vH(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new bx(r)}function bx(e){this._=e}function EEe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}bx.prototype=vH.prototype={constructor:bx,on:function(e,t){var r=this._,n=EEe(e+"",r),i,o=-1,u=n.length;if(arguments.length<2){for(;++o<u;)if((i=(e=n[o]).type)&&(i=TEe(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<u;)if(i=(e=n[o]).type)r[i]=U9(r[i],e.name,t);else if(t==null)for(i in r)r[i]=U9(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new bx(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function TEe(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function U9(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=CEe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var $I="http://www.w3.org/1999/xhtml";const H9={svg:"http://www.w3.org/2000/svg",xhtml:$I,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oS(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),H9.hasOwnProperty(t)?{space:H9[t],local:e}:e}function IEe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===$I&&t.documentElement.namespaceURI===$I?t.createElement(e):t.createElementNS(r,e)}}function PEe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function bH(e){var t=oS(e);return(t.local?PEe:IEe)(t)}function AEe(){}function oM(e){return e==null?AEe:function(){return this.querySelector(e)}}function kEe(e){typeof e!="function"&&(e=oM(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=new Array(u),f,p,g=0;g<u;++g)(f=o[g])&&(p=e.call(f,f.__data__,g,o))&&("__data__"in f&&(p.__data__=f.__data__),a[g]=p);return new Dd(n,this._parents)}function MEe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function LEe(){return[]}function _H(e){return e==null?LEe:function(){return this.querySelectorAll(e)}}function REe(e){return function(){return MEe(e.apply(this,arguments))}}function DEe(e){typeof e=="function"?e=REe(e):e=_H(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var u=t[o],a=u.length,f,p=0;p<a;++p)(f=u[p])&&(n.push(e.call(f,f.__data__,p,u)),i.push(f));return new Dd(n,i)}function xH(e){return function(){return this.matches(e)}}function wH(e){return function(t){return t.matches(e)}}var OEe=Array.prototype.find;function NEe(e){return function(){return OEe.call(this.children,e)}}function FEe(){return this.firstElementChild}function BEe(e){return this.select(e==null?FEe:NEe(typeof e=="function"?e:wH(e)))}var zEe=Array.prototype.filter;function jEe(){return Array.from(this.children)}function qEe(e){return function(){return zEe.call(this.children,e)}}function VEe(e){return this.selectAll(e==null?jEe:qEe(typeof e=="function"?e:wH(e)))}function $Ee(e){typeof e!="function"&&(e=xH(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=[],f,p=0;p<u;++p)(f=o[p])&&e.call(f,f.__data__,p,o)&&a.push(f);return new Dd(n,this._parents)}function SH(e){return new Array(e.length)}function GEe(){return new Dd(this._enter||this._groups.map(SH),this._parents)}function k2(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}k2.prototype={constructor:k2,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function UEe(e){return function(){return e}}function HEe(e,t,r,n,i,o){for(var u=0,a,f=t.length,p=o.length;u<p;++u)(a=t[u])?(a.__data__=o[u],n[u]=a):r[u]=new k2(e,o[u]);for(;u<f;++u)(a=t[u])&&(i[u]=a)}function WEe(e,t,r,n,i,o,u){var a,f,p=new Map,g=t.length,b=o.length,S=new Array(g),_;for(a=0;a<g;++a)(f=t[a])&&(S[a]=_=u.call(f,f.__data__,a,t)+"",p.has(_)?i[a]=f:p.set(_,f));for(a=0;a<b;++a)_=u.call(e,o[a],a,o)+"",(f=p.get(_))?(n[a]=f,f.__data__=o[a],p.delete(_)):r[a]=new k2(e,o[a]);for(a=0;a<g;++a)(f=t[a])&&p.get(S[a])===f&&(i[a]=f)}function XEe(e){return e.__data__}function YEe(e,t){if(!arguments.length)return Array.from(this,XEe);var r=t?WEe:HEe,n=this._parents,i=this._groups;typeof e!="function"&&(e=UEe(e));for(var o=i.length,u=new Array(o),a=new Array(o),f=new Array(o),p=0;p<o;++p){var g=n[p],b=i[p],S=b.length,_=ZEe(e.call(g,g&&g.__data__,p,n)),P=_.length,k=a[p]=new Array(P),M=u[p]=new Array(P),D=f[p]=new Array(S);r(g,b,k,M,D,_,t);for(var F=0,B=0,N,$;F<P;++F)if(N=k[F]){for(F>=B&&(B=F+1);!($=M[B])&&++B<P;);N._next=$||null}}return u=new Dd(u,n),u._enter=a,u._exit=f,u}function ZEe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KEe(){return new Dd(this._exit||this._groups.map(SH),this._parents)}function JEe(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function QEe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,u=Math.min(i,o),a=new Array(i),f=0;f<u;++f)for(var p=r[f],g=n[f],b=p.length,S=a[f]=new Array(b),_,P=0;P<b;++P)(_=p[P]||g[P])&&(S[P]=_);for(;f<i;++f)a[f]=r[f];return new Dd(a,this._parents)}function e4e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],u;--i>=0;)(u=n[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function t4e(e){e||(e=r4e);function t(b,S){return b&&S?e(b.__data__,S.__data__):!b-!S}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var u=r[o],a=u.length,f=i[o]=new Array(a),p,g=0;g<a;++g)(p=u[g])&&(f[g]=p);f.sort(t)}return new Dd(i,this._parents).order()}function r4e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n4e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function i4e(){return Array.from(this)}function a4e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var u=n[i];if(u)return u}return null}function o4e(){let e=0;for(const t of this)++e;return e}function s4e(){return!this.node()}function l4e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,u=i.length,a;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function u4e(e){return function(){this.removeAttribute(e)}}function c4e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function d4e(e,t){return function(){this.setAttribute(e,t)}}function f4e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function h4e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function p4e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function m4e(e,t){var r=oS(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?c4e:u4e:typeof t=="function"?r.local?p4e:h4e:r.local?f4e:d4e)(r,t))}function CH(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function g4e(e){return function(){this.style.removeProperty(e)}}function y4e(e,t,r){return function(){this.style.setProperty(e,t,r)}}function v4e(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function b4e(e,t,r){return arguments.length>1?this.each((t==null?g4e:typeof t=="function"?v4e:y4e)(e,t,r??"")):Ky(this.node(),e)}function Ky(e,t){return e.style.getPropertyValue(t)||CH(e).getComputedStyle(e,null).getPropertyValue(t)}function _4e(e){return function(){delete this[e]}}function x4e(e,t){return function(){this[e]=t}}function w4e(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function S4e(e,t){return arguments.length>1?this.each((t==null?_4e:typeof t=="function"?w4e:x4e)(e,t)):this.node()[e]}function EH(e){return e.trim().split(/^|\s+/)}function sM(e){return e.classList||new TH(e)}function TH(e){this._node=e,this._names=EH(e.getAttribute("class")||"")}TH.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function IH(e,t){for(var r=sM(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function PH(e,t){for(var r=sM(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function C4e(e){return function(){IH(this,e)}}function E4e(e){return function(){PH(this,e)}}function T4e(e,t){return function(){(t.apply(this,arguments)?IH:PH)(this,e)}}function I4e(e,t){var r=EH(e+"");if(arguments.length<2){for(var n=sM(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?T4e:t?C4e:E4e)(r,t))}function P4e(){this.textContent=""}function A4e(e){return function(){this.textContent=e}}function k4e(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function M4e(e){return arguments.length?this.each(e==null?P4e:(typeof e=="function"?k4e:A4e)(e)):this.node().textContent}function L4e(){this.innerHTML=""}function R4e(e){return function(){this.innerHTML=e}}function D4e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function O4e(e){return arguments.length?this.each(e==null?L4e:(typeof e=="function"?D4e:R4e)(e)):this.node().innerHTML}function N4e(){this.nextSibling&&this.parentNode.appendChild(this)}function F4e(){return this.each(N4e)}function B4e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z4e(){return this.each(B4e)}function j4e(e){var t=typeof e=="function"?e:bH(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function q4e(){return null}function V4e(e,t){var r=typeof e=="function"?e:bH(e),n=t==null?q4e:typeof t=="function"?t:oM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function $4e(){var e=this.parentNode;e&&e.removeChild(this)}function G4e(){return this.each($4e)}function U4e(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function H4e(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function W4e(e){return this.select(e?H4e:U4e)}function X4e(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Y4e(e){return function(t){e.call(this,t,this.__data__)}}function Z4e(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function K4e(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function J4e(e,t,r){return function(){var n=this.__on,i,o=Y4e(t);if(n){for(var u=0,a=n.length;u<a;++u)if((i=n[u]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function Q4e(e,t,r){var n=Z4e(e+""),i,o=n.length,u;if(arguments.length<2){var a=this.node().__on;if(a){for(var f=0,p=a.length,g;f<p;++f)for(i=0,g=a[f];i<o;++i)if((u=n[i]).type===g.type&&u.name===g.name)return g.value}return}for(a=t?J4e:K4e,i=0;i<o;++i)this.each(a(n[i],t,r));return this}function AH(e,t,r){var n=CH(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function eTe(e,t){return function(){return AH(this,e,t)}}function tTe(e,t){return function(){return AH(this,e,t.apply(this,arguments))}}function rTe(e,t){return this.each((typeof t=="function"?tTe:eTe)(e,t))}function*nTe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,u;i<o;++i)(u=n[i])&&(yield u)}var iTe=[null];function Dd(e,t){this._groups=e,this._parents=t}function fb(){return new Dd([[document.documentElement]],iTe)}function aTe(){return this}Dd.prototype=fb.prototype={constructor:Dd,select:kEe,selectAll:DEe,selectChild:BEe,selectChildren:VEe,filter:$Ee,data:YEe,enter:GEe,exit:KEe,join:JEe,merge:QEe,selection:aTe,order:e4e,sort:t4e,call:n4e,nodes:i4e,node:a4e,size:o4e,empty:s4e,each:l4e,attr:m4e,style:b4e,property:S4e,classed:I4e,text:M4e,html:O4e,raise:F4e,lower:z4e,append:j4e,insert:V4e,remove:G4e,clone:W4e,datum:X4e,on:Q4e,dispatch:rTe,[Symbol.iterator]:nTe};function lM(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kH(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function hb(){}var I1=.7,M2=1/I1,ky="\\s*([+-]?\\d+)\\s*",P1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oTe=/^#([0-9a-f]{3,8})$/,sTe=new RegExp(`^rgb\\(${ky},${ky},${ky}\\)$`),lTe=new RegExp(`^rgb\\(${vf},${vf},${vf}\\)$`),uTe=new RegExp(`^rgba\\(${ky},${ky},${ky},${P1}\\)$`),cTe=new RegExp(`^rgba\\(${vf},${vf},${vf},${P1}\\)$`),dTe=new RegExp(`^hsl\\(${P1},${vf},${vf}\\)$`),fTe=new RegExp(`^hsla\\(${P1},${vf},${vf},${P1}\\)$`),W9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lM(hb,A1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:X9,formatHex:X9,formatHex8:hTe,formatHsl:pTe,formatRgb:Y9,toString:Y9});function X9(){return this.rgb().formatHex()}function hTe(){return this.rgb().formatHex8()}function pTe(){return MH(this).formatHsl()}function Y9(){return this.rgb().formatRgb()}function A1(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=oTe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Z9(t):r===3?new Yu(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?H_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?H_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sTe.exec(e))?new Yu(t[1],t[2],t[3],1):(t=lTe.exec(e))?new Yu(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uTe.exec(e))?H_(t[1],t[2],t[3],t[4]):(t=cTe.exec(e))?H_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dTe.exec(e))?Q9(t[1],t[2]/100,t[3]/100,1):(t=fTe.exec(e))?Q9(t[1],t[2]/100,t[3]/100,t[4]):W9.hasOwnProperty(e)?Z9(W9[e]):e==="transparent"?new Yu(NaN,NaN,NaN,0):null}function Z9(e){return new Yu(e>>16&255,e>>8&255,e&255,1)}function H_(e,t,r,n){return n<=0&&(e=t=r=NaN),new Yu(e,t,r,n)}function mTe(e){return e instanceof hb||(e=A1(e)),e?(e=e.rgb(),new Yu(e.r,e.g,e.b,e.opacity)):new Yu}function GI(e,t,r,n){return arguments.length===1?mTe(e):new Yu(e,t,r,n??1)}function Yu(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}lM(Yu,GI,kH(hb,{brighter(e){return e=e==null?M2:Math.pow(M2,e),new Yu(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?I1:Math.pow(I1,e),new Yu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yu(vm(this.r),vm(this.g),vm(this.b),L2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K9,formatHex:K9,formatHex8:gTe,formatRgb:J9,toString:J9}));function K9(){return`#${dm(this.r)}${dm(this.g)}${dm(this.b)}`}function gTe(){return`#${dm(this.r)}${dm(this.g)}${dm(this.b)}${dm((isNaN(this.opacity)?1:this.opacity)*255)}`}function J9(){const e=L2(this.opacity);return`${e===1?"rgb(":"rgba("}${vm(this.r)}, ${vm(this.g)}, ${vm(this.b)}${e===1?")":`, ${e})`}`}function L2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dm(e){return e=vm(e),(e<16?"0":"")+e.toString(16)}function Q9(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Sd(e,t,r,n)}function MH(e){if(e instanceof Sd)return new Sd(e.h,e.s,e.l,e.opacity);if(e instanceof hb||(e=A1(e)),!e)return new Sd;if(e instanceof Sd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),u=NaN,a=o-i,f=(o+i)/2;return a?(t===o?u=(r-n)/a+(r<n)*6:r===o?u=(n-t)/a+2:u=(t-r)/a+4,a/=f<.5?o+i:2-o-i,u*=60):a=f>0&&f<1?0:u,new Sd(u,a,f,e.opacity)}function yTe(e,t,r,n){return arguments.length===1?MH(e):new Sd(e,t,r,n??1)}function Sd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}lM(Sd,yTe,kH(hb,{brighter(e){return e=e==null?M2:Math.pow(M2,e),new Sd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?I1:Math.pow(I1,e),new Sd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Yu(AT(e>=240?e-240:e+120,i,n),AT(e,i,n),AT(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Sd(e7(this.h),W_(this.s),W_(this.l),L2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=L2(this.opacity);return`${e===1?"hsl(":"hsla("}${e7(this.h)}, ${W_(this.s)*100}%, ${W_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function e7(e){return e=(e||0)%360,e<0?e+360:e}function W_(e){return Math.max(0,Math.min(1,e||0))}function AT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const LH=e=>()=>e;function vTe(e,t){return function(r){return e+r*t}}function bTe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _Te(e){return(e=+e)==1?RH:function(t,r){return r-t?bTe(t,r,e):LH(isNaN(t)?r:t)}}function RH(e,t){var r=t-e;return r?vTe(e,r):LH(isNaN(e)?t:e)}const t7=(function e(t){var r=_Te(t);function n(i,o){var u=r((i=GI(i)).r,(o=GI(o)).r),a=r(i.g,o.g),f=r(i.b,o.b),p=RH(i.opacity,o.opacity);return function(g){return i.r=u(g),i.g=a(g),i.b=f(g),i.opacity=p(g),i+""}}return n.gamma=e,n})(1);function Kh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var UI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kT=new RegExp(UI.source,"g");function xTe(e){return function(){return e}}function wTe(e){return function(t){return e(t)+""}}function STe(e,t){var r=UI.lastIndex=kT.lastIndex=0,n,i,o,u=-1,a=[],f=[];for(e=e+"",t=t+"";(n=UI.exec(e))&&(i=kT.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[u]?a[u]+=o:a[++u]=o),(n=n[0])===(i=i[0])?a[u]?a[u]+=i:a[++u]=i:(a[++u]=null,f.push({i:u,x:Kh(n,i)})),r=kT.lastIndex;return r<t.length&&(o=t.slice(r),a[u]?a[u]+=o:a[++u]=o),a.length<2?f[0]?wTe(f[0].x):xTe(t):(t=f.length,function(p){for(var g=0,b;g<t;++g)a[(b=f[g]).i]=b.x(p);return a.join("")})}var r7=180/Math.PI,HI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function DH(e,t,r,n,i,o){var u,a,f;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(f=e*r+t*n)&&(r-=e*f,n-=t*f),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,f/=a),e*n<t*r&&(e=-e,t=-t,f=-f,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*r7,skewX:Math.atan(f)*r7,scaleX:u,scaleY:a}}var X_;function CTe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?HI:DH(t.a,t.b,t.c,t.d,t.e,t.f)}function ETe(e){return e==null||(X_||(X_=document.createElementNS("http://www.w3.org/2000/svg","g")),X_.setAttribute("transform",e),!(e=X_.transform.baseVal.consolidate()))?HI:(e=e.matrix,DH(e.a,e.b,e.c,e.d,e.e,e.f))}function OH(e,t,r,n){function i(p){return p.length?p.pop()+" ":""}function o(p,g,b,S,_,P){if(p!==b||g!==S){var k=_.push("translate(",null,t,null,r);P.push({i:k-4,x:Kh(p,b)},{i:k-2,x:Kh(g,S)})}else(b||S)&&_.push("translate("+b+t+S+r)}function u(p,g,b,S){p!==g?(p-g>180?g+=360:g-p>180&&(p+=360),S.push({i:b.push(i(b)+"rotate(",null,n)-2,x:Kh(p,g)})):g&&b.push(i(b)+"rotate("+g+n)}function a(p,g,b,S){p!==g?S.push({i:b.push(i(b)+"skewX(",null,n)-2,x:Kh(p,g)}):g&&b.push(i(b)+"skewX("+g+n)}function f(p,g,b,S,_,P){if(p!==b||g!==S){var k=_.push(i(_)+"scale(",null,",",null,")");P.push({i:k-4,x:Kh(p,b)},{i:k-2,x:Kh(g,S)})}else(b!==1||S!==1)&&_.push(i(_)+"scale("+b+","+S+")")}return function(p,g){var b=[],S=[];return p=e(p),g=e(g),o(p.translateX,p.translateY,g.translateX,g.translateY,b,S),u(p.rotate,g.rotate,b,S),a(p.skewX,g.skewX,b,S),f(p.scaleX,p.scaleY,g.scaleX,g.scaleY,b,S),p=g=null,function(_){for(var P=-1,k=S.length,M;++P<k;)b[(M=S[P]).i]=M.x(_);return b.join("")}}}var TTe=OH(CTe,"px, ","px)","deg)"),ITe=OH(ETe,", ",")",")"),Jy=0,L0=0,u0=0,NH=1e3,R2,R0,D2=0,Lm=0,sS=0,k1=typeof performance=="object"&&performance.now?performance:Date,FH=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function uM(){return Lm||(FH(PTe),Lm=k1.now()+sS)}function PTe(){Lm=0}function O2(){this._call=this._time=this._next=null}O2.prototype=BH.prototype={constructor:O2,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?uM():+r)+(t==null?0:+t),!this._next&&R0!==this&&(R0?R0._next=this:R2=this,R0=this),this._call=e,this._time=r,WI()},stop:function(){this._call&&(this._call=null,this._time=1/0,WI())}};function BH(e,t,r){var n=new O2;return n.restart(e,t,r),n}function ATe(){uM(),++Jy;for(var e=R2,t;e;)(t=Lm-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jy}function n7(){Lm=(D2=k1.now())+sS,Jy=L0=0;try{ATe()}finally{Jy=0,MTe(),Lm=0}}function kTe(){var e=k1.now(),t=e-D2;t>NH&&(sS-=t,D2=e)}function MTe(){for(var e,t=R2,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:R2=r);R0=e,WI(n)}function WI(e){if(!Jy){L0&&(L0=clearTimeout(L0));var t=e-Lm;t>24?(e<1/0&&(L0=setTimeout(n7,e-k1.now()-sS)),u0&&(u0=clearInterval(u0))):(u0||(D2=k1.now(),u0=setInterval(kTe,NH)),Jy=1,FH(n7))}}function i7(e,t,r){var n=new O2;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var LTe=vH("start","end","cancel","interrupt"),RTe=[],zH=0,a7=1,XI=2,_x=3,o7=4,YI=5,xx=6;function lS(e,t,r,n,i,o){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;DTe(e,r,{name:t,index:n,group:i,on:LTe,tween:RTe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zH})}function cM(e,t){var r=jd(e,t);if(r.state>zH)throw new Error("too late; already scheduled");return r}function Pf(e,t){var r=jd(e,t);if(r.state>_x)throw new Error("too late; already running");return r}function jd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function DTe(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=BH(o,0,r.time);function o(p){r.state=a7,r.timer.restart(u,r.delay,r.time),r.delay<=p&&u(p-r.delay)}function u(p){var g,b,S,_;if(r.state!==a7)return f();for(g in n)if(_=n[g],_.name===r.name){if(_.state===_x)return i7(u);_.state===o7?(_.state=xx,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete n[g]):+g<t&&(_.state=xx,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete n[g])}if(i7(function(){r.state===_x&&(r.state=o7,r.timer.restart(a,r.delay,r.time),a(p))}),r.state=XI,r.on.call("start",e,e.__data__,r.index,r.group),r.state===XI){for(r.state=_x,i=new Array(S=r.tween.length),g=0,b=-1;g<S;++g)(_=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(i[++b]=_);i.length=b+1}}function a(p){for(var g=p<r.duration?r.ease.call(null,p/r.duration):(r.timer.restart(f),r.state=YI,1),b=-1,S=i.length;++b<S;)i[b].call(e,g);r.state===YI&&(r.on.call("end",e,e.__data__,r.index,r.group),f())}function f(){r.state=xx,r.timer.stop(),delete n[t];for(var p in n)return;delete e.__transition}}function OTe(e,t){var r=e.__transition,n,i,o=!0,u;if(r){t=t==null?null:t+"";for(u in r){if((n=r[u]).name!==t){o=!1;continue}i=n.state>XI&&n.state<YI,n.state=xx,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[u]}o&&delete e.__transition}}function NTe(e){return this.each(function(){OTe(this,e)})}function FTe(e,t){var r,n;return function(){var i=Pf(this,e),o=i.tween;if(o!==r){n=r=o;for(var u=0,a=n.length;u<a;++u)if(n[u].name===t){n=n.slice(),n.splice(u,1);break}}i.tween=n}}function BTe(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=Pf(this,e),u=o.tween;if(u!==n){i=(n=u).slice();for(var a={name:t,value:r},f=0,p=i.length;f<p;++f)if(i[f].name===t){i[f]=a;break}f===p&&i.push(a)}o.tween=i}}function zTe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=jd(this.node(),r).tween,i=0,o=n.length,u;i<o;++i)if((u=n[i]).name===e)return u.value;return null}return this.each((t==null?FTe:BTe)(r,e,t))}function dM(e,t,r){var n=e._id;return e.each(function(){var i=Pf(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return jd(i,n).value[t]}}function jH(e,t){var r;return(typeof t=="number"?Kh:t instanceof A1?t7:(r=A1(t))?(t=r,t7):STe)(e,t)}function jTe(e){return function(){this.removeAttribute(e)}}function qTe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VTe(e,t,r){var n,i=r+"",o;return function(){var u=this.getAttribute(e);return u===i?null:u===n?o:o=t(n=u,r)}}function $Te(e,t,r){var n,i=r+"",o;return function(){var u=this.getAttributeNS(e.space,e.local);return u===i?null:u===n?o:o=t(n=u,r)}}function GTe(e,t,r){var n,i,o;return function(){var u,a=r(this),f;return a==null?void this.removeAttribute(e):(u=this.getAttribute(e),f=a+"",u===f?null:u===n&&f===i?o:(i=f,o=t(n=u,a)))}}function UTe(e,t,r){var n,i,o;return function(){var u,a=r(this),f;return a==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),f=a+"",u===f?null:u===n&&f===i?o:(i=f,o=t(n=u,a)))}}function HTe(e,t){var r=oS(e),n=r==="transform"?ITe:jH;return this.attrTween(e,typeof t=="function"?(r.local?UTe:GTe)(r,n,dM(this,"attr."+e,t)):t==null?(r.local?qTe:jTe)(r):(r.local?$Te:VTe)(r,n,t))}function WTe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function XTe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function YTe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&XTe(e,o)),r}return i._value=t,i}function ZTe(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&WTe(e,o)),r}return i._value=t,i}function KTe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=oS(e);return this.tween(r,(n.local?YTe:ZTe)(n,t))}function JTe(e,t){return function(){cM(this,e).delay=+t.apply(this,arguments)}}function QTe(e,t){return t=+t,function(){cM(this,e).delay=t}}function e3e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?JTe:QTe)(t,e)):jd(this.node(),t).delay}function t3e(e,t){return function(){Pf(this,e).duration=+t.apply(this,arguments)}}function r3e(e,t){return t=+t,function(){Pf(this,e).duration=t}}function n3e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?t3e:r3e)(t,e)):jd(this.node(),t).duration}function i3e(e,t){if(typeof t!="function")throw new Error;return function(){Pf(this,e).ease=t}}function a3e(e){var t=this._id;return arguments.length?this.each(i3e(t,e)):jd(this.node(),t).ease}function o3e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Pf(this,e).ease=r}}function s3e(e){if(typeof e!="function")throw new Error;return this.each(o3e(this._id,e))}function l3e(e){typeof e!="function"&&(e=xH(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=[],f,p=0;p<u;++p)(f=o[p])&&e.call(f,f.__data__,p,o)&&a.push(f);return new bh(n,this._parents,this._name,this._id)}function u3e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),u=new Array(n),a=0;a<o;++a)for(var f=t[a],p=r[a],g=f.length,b=u[a]=new Array(g),S,_=0;_<g;++_)(S=f[_]||p[_])&&(b[_]=S);for(;a<n;++a)u[a]=t[a];return new bh(u,this._parents,this._name,this._id)}function c3e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function d3e(e,t,r){var n,i,o=c3e(t)?cM:Pf;return function(){var u=o(this,e),a=u.on;a!==n&&(i=(n=a).copy()).on(t,r),u.on=i}}function f3e(e,t){var r=this._id;return arguments.length<2?jd(this.node(),r).on.on(e):this.each(d3e(r,e,t))}function h3e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function p3e(){return this.on("end.remove",h3e(this._id))}function m3e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=oM(e));for(var n=this._groups,i=n.length,o=new Array(i),u=0;u<i;++u)for(var a=n[u],f=a.length,p=o[u]=new Array(f),g,b,S=0;S<f;++S)(g=a[S])&&(b=e.call(g,g.__data__,S,a))&&("__data__"in g&&(b.__data__=g.__data__),p[S]=b,lS(p[S],t,r,S,p,jd(g,r)));return new bh(o,this._parents,t,r)}function g3e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=_H(e));for(var n=this._groups,i=n.length,o=[],u=[],a=0;a<i;++a)for(var f=n[a],p=f.length,g,b=0;b<p;++b)if(g=f[b]){for(var S=e.call(g,g.__data__,b,f),_,P=jd(g,r),k=0,M=S.length;k<M;++k)(_=S[k])&&lS(_,t,r,k,S,P);o.push(S),u.push(g)}return new bh(o,u,t,r)}var y3e=fb.prototype.constructor;function v3e(){return new y3e(this._groups,this._parents)}function b3e(e,t){var r,n,i;return function(){var o=Ky(this,e),u=(this.style.removeProperty(e),Ky(this,e));return o===u?null:o===r&&u===n?i:i=t(r=o,n=u)}}function qH(e){return function(){this.style.removeProperty(e)}}function _3e(e,t,r){var n,i=r+"",o;return function(){var u=Ky(this,e);return u===i?null:u===n?o:o=t(n=u,r)}}function x3e(e,t,r){var n,i,o;return function(){var u=Ky(this,e),a=r(this),f=a+"";return a==null&&(f=a=(this.style.removeProperty(e),Ky(this,e))),u===f?null:u===n&&f===i?o:(i=f,o=t(n=u,a))}}function w3e(e,t){var r,n,i,o="style."+t,u="end."+o,a;return function(){var f=Pf(this,e),p=f.on,g=f.value[o]==null?a||(a=qH(t)):void 0;(p!==r||i!==g)&&(n=(r=p).copy()).on(u,i=g),f.on=n}}function S3e(e,t,r){var n=(e+="")=="transform"?TTe:jH;return t==null?this.styleTween(e,b3e(e,n)).on("end.style."+e,qH(e)):typeof t=="function"?this.styleTween(e,x3e(e,n,dM(this,"style."+e,t))).each(w3e(this._id,e)):this.styleTween(e,_3e(e,n,t),r).on("end.style."+e,null)}function C3e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function E3e(e,t,r){var n,i;function o(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&C3e(e,u,r)),n}return o._value=t,o}function T3e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,E3e(e,t,r??""))}function I3e(e){return function(){this.textContent=e}}function P3e(e){return function(){var t=e(this);this.textContent=t??""}}function A3e(e){return this.tween("text",typeof e=="function"?P3e(dM(this,"text",e)):I3e(e==null?"":e+""))}function k3e(e){return function(t){this.textContent=e.call(this,t)}}function M3e(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&k3e(i)),t}return n._value=e,n}function L3e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,M3e(e))}function R3e(){for(var e=this._name,t=this._id,r=VH(),n=this._groups,i=n.length,o=0;o<i;++o)for(var u=n[o],a=u.length,f,p=0;p<a;++p)if(f=u[p]){var g=jd(f,t);lS(f,e,r,p,u,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new bh(n,this._parents,e,r)}function D3e(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,u){var a={value:u},f={value:function(){--i===0&&o()}};r.each(function(){var p=Pf(this,n),g=p.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(f)),p.on=t}),i===0&&o()})}var O3e=0;function bh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function VH(){return++O3e}var Kf=fb.prototype;bh.prototype={constructor:bh,select:m3e,selectAll:g3e,selectChild:Kf.selectChild,selectChildren:Kf.selectChildren,filter:l3e,merge:u3e,selection:v3e,transition:R3e,call:Kf.call,nodes:Kf.nodes,node:Kf.node,size:Kf.size,empty:Kf.empty,each:Kf.each,on:f3e,attr:HTe,attrTween:KTe,style:S3e,styleTween:T3e,text:A3e,textTween:L3e,remove:p3e,tween:zTe,delay:e3e,duration:n3e,ease:a3e,easeVarying:s3e,end:D3e,[Symbol.iterator]:Kf[Symbol.iterator]};function N3e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var F3e={time:null,delay:0,duration:250,ease:N3e};function B3e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function z3e(e){var t,r;e instanceof bh?(t=e._id,e=e._name):(t=VH(),(r=F3e).time=uM(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var u=n[o],a=u.length,f,p=0;p<a;++p)(f=u[p])&&lS(f,e,t,p,u,r||B3e(f,t));return new bh(n,this._parents,e,t)}fb.prototype.interrupt=NTe;fb.prototype.transition=z3e;var s7={},MT={},LT=34,c0=10,RT=13;function $H(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function j3e(e,t){var r=$H(e);return function(n,i){return t(r(n),i,e)}}function l7(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function Wu(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function q3e(e){return e<0?"-"+Wu(-e,6):e>9999?"+"+Wu(e,6):Wu(e,4)}function V3e(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":q3e(e.getUTCFullYear())+"-"+Wu(e.getUTCMonth()+1,2)+"-"+Wu(e.getUTCDate(),2)+(i?"T"+Wu(t,2)+":"+Wu(r,2)+":"+Wu(n,2)+"."+Wu(i,3)+"Z":n?"T"+Wu(t,2)+":"+Wu(r,2)+":"+Wu(n,2)+"Z":r||t?"T"+Wu(t,2)+":"+Wu(r,2)+"Z":"")}function $3e(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function n(b,S){var _,P,k=i(b,function(M,D){if(_)return _(M,D-1);P=M,_=S?j3e(M,S):$H(M)});return k.columns=P||[],k}function i(b,S){var _=[],P=b.length,k=0,M=0,D,F=P<=0,B=!1;b.charCodeAt(P-1)===c0&&--P,b.charCodeAt(P-1)===RT&&--P;function N(){if(F)return MT;if(B)return B=!1,s7;var V,U=k,X;if(b.charCodeAt(U)===LT){for(;k++<P&&b.charCodeAt(k)!==LT||b.charCodeAt(++k)===LT;);return(V=k)>=P?F=!0:(X=b.charCodeAt(k++))===c0?B=!0:X===RT&&(B=!0,b.charCodeAt(k)===c0&&++k),b.slice(U+1,V-1).replace(/""/g,'"')}for(;k<P;){if((X=b.charCodeAt(V=k++))===c0)B=!0;else if(X===RT)B=!0,b.charCodeAt(k)===c0&&++k;else if(X!==r)continue;return b.slice(U,V)}return F=!0,b.slice(U,P)}for(;(D=N())!==MT;){for(var $=[];D!==s7&&D!==MT;)$.push(D),D=N();S&&($=S($,M++))==null||_.push($)}return _}function o(b,S){return b.map(function(_){return S.map(function(P){return g(_[P])}).join(e)})}function u(b,S){return S==null&&(S=l7(b)),[S.map(g).join(e)].concat(o(b,S)).join(`
`)}function a(b,S){return S==null&&(S=l7(b)),o(b,S).join(`
`)}function f(b){return b.map(p).join(`
`)}function p(b){return b.map(g).join(e)}function g(b){return b==null?"":b instanceof Date?V3e(b):t.test(b+="")?'"'+b.replace(/"/g,'""')+'"':b}return{parse:n,parseRows:i,format:u,formatBody:a,formatRows:f,formatRow:p,formatValue:g}}var G3e=$3e(","),U3e=G3e.parse;function H3e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function GH(e,t){return fetch(e,t).then(H3e)}function W3e(e){return function(t,r,n){return arguments.length===2&&typeof r=="function"&&(n=r,r=void 0),GH(t,r).then(function(i){return e(i,n)})}}var X3e=W3e(U3e);function Y3e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function Z3e(e,t){return fetch(e,t).then(Y3e)}function K3e(e){return(t,r)=>GH(t,r).then(n=>new DOMParser().parseFromString(n,e))}const J3e=K3e("application/xml");function D0(e,t,r){this.k=e,this.x=t,this.y=r}D0.prototype={constructor:D0,scale:function(e){return e===1?this:new D0(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new D0(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};D0.prototype;const u7=e=>{const[t,r]=ee.useState();ee.useEffect(()=>{if(!e.url)return;let i=null;e.format==="json"?i=Z3e(e.url):e.format==="csv"?i=X3e(e.url):e.format==="xml"&&(i=J3e(e.url)),i&&i.then(o=>{if(e.format==="xml"){if(e.nodeType){const u=[];o.querySelectorAll(e.nodeType).forEach(a=>{typeof e.formatData=="function"&&u.push(e.formatData(a))}),r(u)}}else{let u=o;e.data_property&&(u=o[e.data_property]),typeof e.formatData=="function"?r(u.map(e.formatData)):r(u)}typeof e.onData=="function"&&e.onData()})},[e.url,e]);const n={data:t,setData:r};return K.jsx(VI,{value:n,children:e.children})};try{u7.displayName="SimpleDataProvider",u7.__docgenInfo={description:"",displayName:"SimpleDataProvider",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!0,type:{name:"enum",value:[{value:'"json"'},{value:'"csv"'},{value:'"xml"'}]}},nodeType:{defaultValue:null,description:"",name:"nodeType",required:!0,type:{name:"string"}},data_property:{defaultValue:null,description:"",name:"data_property",required:!0,type:{name:"string"}},formatData:{defaultValue:null,description:"",name:"formatData",required:!1,type:{name:"((data: any) => any) | undefined"}},onData:{defaultValue:null,description:"",name:"onData",required:!0,type:{name:"() => void"}}}}}catch{}const wx=Ei(K.jsx("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 10V8h-2v4H8l4 4 4-4z"})),Sx=Ei(K.jsx("path",{d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0 2c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10m-1-10v4h2v-4h3l-4-4-4 4z"})),DT=Ei(K.jsx("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),Q3e=e=>{let{transform:t}=e;return{...t,x:0}},Jf=Sr(xc)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});function ZI(e){const t=F5e(),r=ha({mapId:void 0});function n(b){const S=b.id&&r.map?.getLayer(b.id)?.source?r.map?.getLayer(b.id)?.source:void 0;let _=null;switch(b.type){case"geojson":if(b.config?.geojson)r.map?.fitBounds(Ec(b.config?.geojson),e.fitBoundsOptions);else{if(!S)return;const P={type:"FeatureCollection",features:r.map?.querySourceFeatures(S)};P.features.length===0&&(r.map?.zoomTo(1),P.features=r.map?.querySourceFeatures(S)),_=Ec(P)}break;case"vt":console.log("vt");break;case"wms":_=b?.config?.config?.layers?.[0]?.EX_GeographicBoundingBox;break;default:return}_&&r.map?.fitBounds(_,e.fitBoundsOptions)}const i=ee.useMemo(()=>["order-background",...[...t.layers].map((S,_)=>"content_order_"+_),"order-labels"],[t.layers]),o=ee.useMemo(()=>e.layers?e.layers:t?.layers?t.layers:[],[e.layers,t.layers]),u=ee.useMemo(()=>e.setLayers?e.setLayers:t.setLayers,[e.setLayers,t.setLayers]),a=Gz(Xk,{activationConstraint:{distance:5}}),f=Gz(IU,{activationConstraint:{distance:5}}),p=D2e(f,a);function g(b){const S=b.active.id,_=b.over?.data?.current?.sortable.index;t.moveLayer(String(S),()=>_)}return K.jsxs(K.Fragment,{children:[K.jsx(T2,{layerIds:i,insertBeforeLayer:"_background"}),t?.symbolLayers?.length>0&&K.jsx(oh,{layerComponent:K.jsx(Ay,{...t.vtLayerConfig,layers:t.symbolLayers,mapId:e?.mapId,insertBeforeLayer:"order-labels"}),setLayerState:b=>t.setSymbolLayers(b?.layers),visible:!0,configurable:!0,type:"layer",name:"Labels"},"background_labels"),K.jsx(Fwe,{collisionDetection:z2e,sensors:p,onDragEnd:b=>g(b),modifiers:[Q3e],children:K.jsxs(Zwe,{items:o,strategy:Xwe,children:[[...o].map((b,S)=>{if(!b?.id)return null;switch(b.type){case"geojson":return K.jsx(oh,{layerId:b.id,sortable:e.sortable,name:b?.name||b?.config?.type+" layer"||"unnamed layer",layerComponent:K.jsx(Zu,{...b.config,mapId:e?.mapId,layerId:b.id,insertBeforeLayer:"content_order_"+(o.length-1-S)}),buttons:K.jsxs(K.Fragment,{children:[K.jsx(Jf,{disabled:S===o.length-1,onClick:()=>{t.moveDown(b.id||"")},children:K.jsx(wx,{})}),K.jsx(Jf,{disabled:S===0,onClick:()=>{t.moveUp(b.id||"")},children:K.jsx(Sx,{})}),K.jsx(Jf,{onClick:()=>n(b),children:K.jsx(DT,{})})]}),setLayerState:_=>u?.(P=>{const k=[...P];return _===!1?k.splice(S,1):k[S].config=_,k}),configurable:!0,showDeleteButton:!0},b.id);case"wms":return K.jsx(K.Fragment,{children:ee.createElement(RI,{...b.config,key:b.id,layerId:b.id,sortable:e.sortable,mapId:e?.mapId,insertBeforeLayer:"content_order_"+(o.length-1-S),onConfigChange:_=>{u?.(P=>{const k=[...P];return _===!1?k.splice(S,1):k[S].config.config=_,k})},featureInfoActive:b?.config?.featureInfoActive||!1,setFeatureInfoActive:_=>{u?.(P=>{const k=[...P];return typeof _=="function"&&(k[S].config.featureInfoActive=_(k[S].config?.featureInfoActive||!1)),k})},showDeleteButton:!0,buttons:K.jsxs(K.Fragment,{children:[K.jsx(Jf,{disabled:S===o.length-1,onClick:()=>{t.moveDown(b.id||"")},children:K.jsx(wx,{})}),K.jsx(Jf,{disabled:S===0,onClick:()=>{t.moveUp(b.id||"")},children:K.jsx(Sx,{})}),K.jsx(Jf,{onClick:()=>n(b),children:K.jsx(DT,{})})]})})});case"vt":return K.jsx(gt.Fragment,{children:K.jsx(oh,{name:b?.name||b?.type+" layer"||"unnamed layer",layerComponent:K.jsx(Ay,{layers:b?.config?.layers||[],mapId:b?.config.mapId,sourceOptions:b?.config?.sourceOptions,layerId:b.id,url:b?.config?.url},b.id),buttons:K.jsxs(K.Fragment,{children:[K.jsx(Jf,{disabled:S===o.length-1,onClick:()=>{t.moveDown(b.id||"")},children:K.jsx(wx,{})},b.id+"_button1"),K.jsx(Jf,{disabled:S===0,onClick:()=>{t.moveUp(b.id||"")},children:K.jsx(Sx,{})},b.id+"_button2"),K.jsx(Jf,{onClick:()=>n(b),children:K.jsx(DT,{})})]}),setLayerState:_=>u?.(P=>{const k=[...P];return _===!1?k.splice(S,1):k[S].config=_,k}),configurable:!0,showDeleteButton:!0},b.id)},b?.id+"_listItem");default:return null}}),t?.backgroundLayers?.length>0&&K.jsx(oh,{layerComponent:K.jsx(Ay,{...t.vtLayerConfig,layers:t.backgroundLayers,mapId:e?.mapId,insertBeforeLayer:"order-background"}),setLayerState:b=>{t.setBackgroundLayers(b?.layers)},visible:!0,configurable:!0,type:"layer",name:"Background"},"background_geometry")]})})]})}ZI.defaultProps={mapId:void 0};try{ZI.displayName="LayerListItemFactory",ZI.__docgenInfo={description:"",displayName:"LayerListItemFactory",props:{mapId:{defaultValue:{value:"undefined"},description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},layers:{defaultValue:null,description:"",name:"layers",required:!0,type:{name:"LayerConfig[]"}},setLayers:{defaultValue:null,description:"",name:"setLayers",required:!1,type:{name:"((layers: LayerConfig[] | ((state: LayerConfig[]) => LayerConfig[])) => void) | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}},fitBoundsOptions:{defaultValue:null,description:"",name:"fitBoundsOptions",required:!1,type:{name:"FitBoundsOptions | undefined"}}}}}catch{}const eIe=Ei(K.jsx("path",{d:"M14 10H3v2h11zm0-4H3v2h11zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2zM3 16h7v-2H3z"})),tIe=["fill","line","circle"];function KI(e){const[t,r]=gt.useState({type:"circle"}),n=ee.useMemo(()=>!(!t?.type||!t?.geojson),[t]);return K.jsxs(K.Fragment,{children:[K.jsx(Fm,{children:"GeoJSON layer"}),K.jsxs(vc,{fullWidth:!0,children:[K.jsx(np,{id:"type-label",children:"Type"}),K.jsx(ip,{labelId:"type-label",value:t.type,label:"Type",onChange:i=>r(o=>({...o,type:i.target.value})),children:tIe.map(i=>K.jsx(pm,{value:i,children:i},i))})]}),K.jsx(vc,{fullWidth:!0,children:K.jsxs($i,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Upload File",K.jsx("input",{type:"file",hidden:!0,onChange:i=>{i.target.files?.[0].text().then(o=>r(u=>({...u,geojson:JSON.parse(o)})))}})]})}),K.jsxs(U1,{children:[K.jsx($i,{onClick:e.onCancel,children:"Cancel"}),K.jsx($i,{disabled:!n,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{KI.displayName="GeoJsonLayerForm",KI.__docgenInfo={description:"",displayName:"GeoJsonLayerForm",props:{config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"MlGeoJsonLayerProps | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlGeoJsonLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const rIe=Ei([K.jsx("path",{d:"M8 8H6v7c0 1.1.9 2 2 2h9v-2H8z"},"0"),K.jsx("path",{d:"M20 3h-8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 8h-8V7h8zM4 12H2v7c0 1.1.9 2 2 2h9v-2H4z"},"1")]),N2=e=>K.jsxs(K.Fragment,{children:[K.jsx(Fm,{children:e.layerTypes.length>1?"Select a layer type":"Load new layer"}),K.jsx(Od,{children:e.layerTypes.map((t,r)=>K.jsx(ed,{disableGutters:!0,children:K.jsxs(eq,{autoFocus:!0,onClick:()=>{e.onSelect(t)},children:[K.jsx(rq,{children:K.jsx(qj,{children:K.jsx(rIe,{})})}),K.jsx(Hc,{primary:t})]})},r))})]});N2.defaultProps={};try{N2.displayName="LayerTypeForm",N2.__docgenInfo={description:"",displayName:"LayerTypeForm",props:{onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(type: string) => void"}},layerTypes:{defaultValue:null,description:"",name:"layerTypes",required:!0,type:{name:"string[]"}}}}}catch{}function JI(e){const[t,r]=gt.useState({url:""}),n=ee.useMemo(()=>!!t?.url,[t]);return K.jsxs(K.Fragment,{children:[K.jsx(Fm,{children:"WMS layer"}),K.jsx(YP,{children:K.jsxs(vc,{fullWidth:!0,sx:{marginTop:"10px"},children:[K.jsx(np,{htmlFor:"wms-url-input",children:"WMS URL"}),K.jsx(vw,{id:"wms-url-input",label:"WMS URL",value:t.url,onChange:i=>r({...t,url:i.target.value})})]})}),K.jsxs(U1,{children:[K.jsx($i,{onClick:e.onCancel,children:"Cancel"}),K.jsx($i,{disabled:!n,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{JI.displayName="WmsLayerForm",JI.__docgenInfo={description:"",displayName:"WmsLayerForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: wmsConfig) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const UH=Ei(K.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),HH=Ei(K.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),nIe=["latfield","lonfield","delimiter"];function QI(e){const[t,r]=ee.useState(!1);return K.jsxs(K.Fragment,{children:[K.jsx(ns,{children:" Options "}),K.jsx($i,{onClick:()=>r(!t),children:t?K.jsx(HH,{}):K.jsx(UH,{})}),K.jsx(Od,{children:t&&nIe?.map(n=>K.jsxs(K.Fragment,{children:[K.jsx(ed,{children:K.jsxs(ns,{children:[" ",n," "]})}),K.jsx(ed,{children:K.jsx(bw,{size:"small",onChange:i=>{const o={};o[n]=i.target.value,e.setter(o)}})})]}))})]})}try{QI.displayName="CSVOptionsFormular",QI.__docgenInfo={description:"",displayName:"CSVOptionsFormular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"any"}}}}}catch{}const iIe=["completeFeature","allFeatures","renderTagged","excludeWay","suppressWay"];function eP(e){const[t,r]=ee.useState(!1);return K.jsxs(K.Fragment,{children:[K.jsx(ns,{children:" Options "}),K.jsx($i,{onClick:()=>r(!t),children:t?K.jsx(HH,{}):K.jsx(UH,{})}),K.jsx(Od,{children:t&&iIe?.map(n=>K.jsx(K.Fragment,{children:K.jsxs(ed,{children:[K.jsxs(ns,{children:[" ",n," "]}),K.jsx(zy,{onChange:i=>{const o={};o[n]=i.target.value==="on",e.setter(o)}})]})}))})]})}try{eP.displayName="OsmOptionsFomular",eP.__docgenInfo={description:"",displayName:"OsmOptionsFomular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"any"}}}}}catch{}const aIe={csv:eCe,topojson:BCe,osm:OCe,gpx:PT,kml:PT,tcx:PT},oIe=["fill","line","circle"];function tP(e){const[t,r]=ee.useState({type:"circle"}),[n,i]=ee.useState(),[o,u]=ee.useState(),[a,f]=ee.useState({}),p=ha({mapId:e.mapId}),g="?"+new URLSearchParams(a).toString();I2({protocol:e.originType,handler:aIe[e.originType]});const b=ee.useMemo(()=>t?.type?!!(o&&n):!1,[t,o,n]);ee.useEffect(()=>(typeof n<"u"&&typeof o<"u"&&(p.map?.getSource(n)||p.map?.addSource(n,{type:"geojson",data:a?e.originType+"://"+o+g:e.originType+"://"+o}),t.options={source:n}),()=>{}),[n,p.map,o]),ee.useEffect(()=>{o&&n&&p.map?.getLayer(n)&&URL.revokeObjectURL(o)},[n,o,p.map]);function S(_){const P={...a,..._};return f(P)}return K.jsxs(K.Fragment,{children:[K.jsxs(Fm,{children:["Layer from ",e.originType]}),K.jsxs(vc,{fullWidth:!0,children:[K.jsx(np,{id:"type-label",children:"Type"}),K.jsx(ip,{labelId:"type-label",value:t.type,label:"Type",onChange:_=>r(P=>({...P,type:_.target.value})),children:oIe.map(_=>K.jsx(pm,{value:_,children:_},_))})]}),K.jsxs(vc,{fullWidth:!0,children:[K.jsxs($i,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Select origin file",K.jsx("input",{type:"file",hidden:!0,accept:e.originType,onChange:_=>{if(i(_.target.files?.[0].name),_.target.files?.[0]){const P=URL.createObjectURL(_.target.files?.[0]);u(P)}}})]}),e.originType==="csv"&&K.jsx(QI,{setter:S}),e.originType==="osm"&&K.jsx(eP,{setter:S})]}),K.jsxs(U1,{children:[K.jsx($i,{onClick:e.onCancel,children:"Cancel"}),K.jsx($i,{disabled:!b,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{tP.displayName="ProtocolHandlerLayerForm",tP.__docgenInfo={description:"",displayName:"ProtocolHandlerLayerForm",props:{originType:{defaultValue:null,description:"",name:"originType",required:!0,type:{name:"string"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"MlGeoJsonLayerProps | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlGeoJsonLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const sIe=["id","type","metadata","source","source-layer","layout","paint","options"];function rP(e){const[t,r]=ee.useState([]),n={},i=["paint","layout","options","metadata"];ee.useEffect(()=>{e.setter(t)},[t]);const o=()=>K.jsx(K.Fragment,{children:sIe.map(a=>K.jsx(gt.Fragment,{children:K.jsx(bw,{label:a,onChange:f=>n[a]=f.target.value})},a+"_fragment"))});function u(){i.map(a=>{if(typeof n[a]<"u")try{n[a]=JSON.parse(n[a])}catch{alert("Invalid JSON format, try again")}}),r(a=>a.length>0?[n,...a]:[n])}return K.jsxs(K.Fragment,{children:[K.jsx(vc,{fullWidth:!0,children:K.jsx(o,{})}),K.jsx($i,{onClick:u,children:" Add"})]})}try{rP.displayName="MbtilesLayerPropFormular",rP.__docgenInfo={description:"",displayName:"MbtilesLayerPropFormular",props:{setter:{defaultValue:null,description:"",name:"setter",required:!0,type:{name:"Dispatch<SetStateAction<LayerSpecification[]>>"}}}}}catch{}const lIe=Ei(K.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),uIe=Ei(K.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}));function nP(e){const[t,r]=gt.useState(e.config),[n,i]=ee.useState(),[o,u]=ee.useState(),[a,f]=ee.useState([]),p=ha({mapId:e.mapId}),[g,b]=ee.useState(!1);console.log(a);const S=()=>K.jsx(K.Fragment,{children:a.map((P,k)=>K.jsxs(ns,{variant:"body2",children:[k+1,": ",JSON.stringify(P)]},k))}),_=ee.useMemo(()=>!!n,[n]);return ee.useEffect(()=>{typeof n<"u"&&typeof o<"u"&&r({url:"mbtiles://"+o+"/{z}/{x}/{y}",layers:a,layerId:n,sourceOptions:{type:"vector",minzoom:0,maxzoom:1}})},[n,p.map,o,a]),K.jsxs(K.Fragment,{children:[K.jsx(Fm,{children:" Layer from mbtiles file"}),K.jsxs(YP,{children:[K.jsxs($i,{variant:"contained",component:"label",sx:{marginTop:"10px"},children:["Select origin file",K.jsx("input",{type:"file",hidden:!0,accept:e.originType,onChange:P=>{if(i(P.target.files?.[0].name),P.target.files?.[0]){const k=URL.createObjectURL(P.target.files?.[0]);u(k)}}})]}),K.jsxs(fee,{expanded:g,children:[K.jsxs(Lee,{"aria-controls":"panel1d-content",id:"panel1d-header",children:[K.jsx(ns,{children:"MB-Tile Layer properties"}),K.jsx($i,{onClick:()=>b(!g),children:g?K.jsx(uIe,{}):K.jsx(lIe,{})})]}),K.jsx(ns,{variant:"body1",children:" Layers"}),a.length>0?K.jsx(S,{}):K.jsx(ns,{variant:"body2",children:" 0 "}),K.jsx(rP,{setter:f})]})]}),K.jsxs(U1,{children:[K.jsx($i,{onClick:e.onCancel,children:"Cancel"}),K.jsx($i,{disabled:!_,onClick:()=>e.onSubmit(t),children:"Add"})]})]})}try{nP.displayName="MbtilesLayerForm",nP.__docgenInfo={description:"",displayName:"MbtilesLayerForm",props:{originType:{defaultValue:null,description:"",name:"originType",required:!0,type:{name:"string"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"MlVectorTileLayerProps"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(config: MlVectorTileLayerProps) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}const F2=e=>{const[t,r]=ee.useState(e?.config),[n,i]=ee.useState(),o=e.layerTypes,u=o.filter(b=>b!=="wms"&&b!=="geojson"&&b!=="mbtiles"),a=["wms","geojson","vt","csv","mbtiles","topojson","osm","gpx","kml","tcx"],f=b=>{i(b),u.includes(b)?r({type:"geojson",config:{}}):r(b==="mbtiles"?{type:"vt",config:{layers:[]}}:{type:b,config:{}})},p=()=>{e.setOpen(!1),r(void 0)},g=()=>K.jsx(K.Fragment,{children:u.map((b,S)=>K.jsx(K.Fragment,{children:t?.type==="geojson"&&n===b&&K.jsx(tP,{originType:b,onSubmit:_=>{e?.onComplete?.({...t,config:_,type:"geojson"}),p()},onCancel:p},S)}))});return K.jsxs(XP,{open:e.open,onClose:p,children:[!t?.type&&K.jsx(N2,{onSelect:b=>{a.includes(b)&&f(b)},layerTypes:o}),t?.type==="geojson"&&n==="geojson"&&K.jsx(KI,{onSubmit:b=>{e?.onComplete?.({...t,config:b}),p()},onCancel:p}),t?.type==="wms"&&K.jsx(JI,{onSubmit:b=>{e?.onComplete?.({...t,config:b}),p()},onCancel:p}),t?.type==="vt"&&n!==void 0&&K.jsx(nP,{config:t,originType:n,onSubmit:b=>{t&&(e?.onComplete?.({...t,config:b}),p())},onCancel:p}),K.jsx(g,{},"protocol")]})};F2.defaultProps={};try{F2.displayName="AddLayerPopup",F2.__docgenInfo={description:"",displayName:"AddLayerPopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"LayerConfig | undefined"}},layerTypes:{defaultValue:null,description:"",name:"layerTypes",required:!0,type:{name:"string[]"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(open: boolean) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}}}}}catch{}const iP=e=>{const[t,r]=gt.useState(!1),n=e.layerTypes||["geojson","wms","csv","topojson","osm","gpx","kml","tcx"];return K.jsxs(K.Fragment,{children:[K.jsx($i,{variant:"contained",sx:{marginTop:"10px",...e.sx},onClick:()=>r(!0),children:K.jsx(eIe,{})}),K.jsx(F2,{open:t,setOpen:r,onComplete:e?.onComplete,layerTypes:n})]})};iP.defaultProps={};try{iP.displayName="AddLayerButton",iP.__docgenInfo={description:"",displayName:"AddLayerButton",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},layerTypes:{defaultValue:null,description:`An string array, to filter the supported file types that would be shown to the user
Default is: ['geojson', 'wms', 'csv', 'topojson', 'osm', 'gpx', 'kml', 'tcx']`,name:"layerTypes",required:!1,type:{name:"string[] | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: LayerConfig) => void) | undefined"}}}}}catch{}const cIe=Ei(K.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}));function c7(e){const t=ee.useRef(null),r=()=>{if(!t.current)return!1;const i=t.current?.files?.[0];if(!i)return!1;const o=new FileReader;o.onload=u=>{u&&typeof e.setData=="function"&&e.setData(u.currentTarget?.result)},o.readAsText(i)},n=()=>{t.current&&t.current.click()};return K.jsxs(K.Fragment,{children:[e.buttonComponent?gt.cloneElement(e.buttonComponent,{onClick:n}):K.jsx($i,{onClick:n,children:K.jsx(cIe,{})}),K.jsx("input",{ref:t,onChange:r,type:"file",accept:e.accept,id:"input",multiple:!0,style:{display:"none"}})]})}try{c7.displayName="UploadButton",c7.__docgenInfo={description:"",displayName:"UploadButton",props:{setData:{defaultValue:null,description:"",name:"setData",required:!0,type:{name:"(data: string) => void"}},buttonComponent:{defaultValue:null,description:"",name:"buttonComponent",required:!0,type:{name:"any"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string | undefined"}}}}}catch{}const B2=e=>{const t=()=>{e.setOpen(!1)};return K.jsxs(XP,{open:e.open,onClose:t,PaperProps:{sx:{padding:"20px"}},children:[K.jsx(Fm,{children:"Select a style"}),K.jsx(Od,{children:e?.styles?.map(r=>K.jsx(ed,{disableGutters:!0,children:K.jsxs(eq,{autoFocus:!0,onClick:()=>{e?.onSelect?.(r)},children:[K.jsx(rq,{children:K.jsx(qj,{sx:{width:"50px",height:"50px"},alt:r.name,src:r?.name&&e?.styleThumbnailPaths?.[r.name]})}),K.jsx(Hc,{primary:r.name})]})},r.name))})]})};B2.defaultProps={styleThumbnailPaths:{}};try{B2.displayName="SelectStylePopup",B2.__docgenInfo={description:"",displayName:"SelectStylePopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(open: boolean) => void"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"StyleSpecification[] | undefined"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((style: StyleSpecification) => void) | undefined"}},styleThumbnailPaths:{defaultValue:{value:"{}"},description:"",name:"styleThumbnailPaths",required:!1,type:{name:"{ [key: string]: string; } | undefined"}}}}}catch{}const WH=Ei(K.jsx("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"})),dIe={version:8,name:"Monokai",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:xu.source_openmaptiles_url}},sprite:xu.sprite,glyphs:xu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#AE81FF","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#75715E"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#837f6e"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#918d7e"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#A6C22E","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(166,194,46,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#e0ebad"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#FD971F"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(253,151,31,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(18,5,68,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#A6E22E","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#A6C22E","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#A6C22E","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#66D9EF","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#21c8e8"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#AE81FF","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#E6DB74","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#eee69f","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#fa5892","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#fa5892","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#fa5892","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#fb70a2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(249,38,114,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#b40544","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#b40544","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(249,38,114,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fb70a2","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fb70a2","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#e60657","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(249,38,114,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#F8F8F2","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fc89b2","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(18,5,68,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(18,5,68,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#b40544","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#fa5892","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#F8F8F2","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#F92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#f92672","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#b40544","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#b40544","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#E69F66","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E69F66","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#66D9EF","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},fIe={version:8,name:"Solarized",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:xu.source_openmaptiles_url}},sprite:xu.sprite,glyphs:xu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#073642"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#2aa198","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#657b83"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#74888f"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#84959c"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#859900","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(133,153,0,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#f2ff99"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#d30102"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(211,1,2,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(58,63,144,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#2aa198","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#859900","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#859900","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#268bd2","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#268bd2","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#1a6091"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#2aa198","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#eee8d5","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#fdfcf9","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#9094d3","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#9094d3","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#9094d3","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#a3a6da","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(108,113,196,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#3a3f90","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#3a3f90","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(108,113,196,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#a3a6da","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#a3a6da","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#484fb5","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(108,113,196,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#cb4b16","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e58ab6","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(58,63,144,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(58,63,144,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#3a3f90","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d33682","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#9094d3","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#cb4b16","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#6c71c4","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#3a3f90","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#268bd2","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#268bd2","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#268bd2","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},hIe={version:8,name:"Oceanic Next",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:xu.source_openmaptiles_url}},sprite:xu.sprite,glyphs:xu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#81a1c1","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#a3be8c"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#acc598"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#b5cba3"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#a3be8c","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(163,19,14,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#cbdabe"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#b48ead"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(18,142,173,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(118,51,8,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#81a1c1","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#a3be8c","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#a3be8c","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#8fbcbb","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#5f9f9e"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#81a1c1","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#65737e","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#7e8d98","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#f17626","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#f2853e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(235,219,178,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(214,93,14,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#a6480b","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(214,93,14,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#b48ead","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f49456","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(118,51,8,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(118,51,8,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#b48ead","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#8fbcbb","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8fbcbb","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},pIe={version:8,name:"Medieval Kingdom",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:xu.source_openmaptiles_url}},sprite:xu.sprite,glyphs:xu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#ffd1a8"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#228B22","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#bfa677"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#c5af85"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#ccb892"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#556B2F","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(85,107,47,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#d1e0b8"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#FFC0CB"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(255,192,203,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(149,46,46,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#228B22","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#556B2F","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#556B2F","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#1E90FF","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#006ad1"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#228B22","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#f9e9cb","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#fefcf9","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#d98383","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d98383","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#d98383","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#df9797","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(139,94,6,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#952e2e","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#952e2e","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(205,92,92,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#df9797","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#df9797","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#bc3a3a","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(205,92,92,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#FFC0CB","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e5aaaa","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(149,46,46,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(149,46,46,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#952e2e","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#CD5C5C","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#d98383","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#FFC0CB","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#8B5E3C","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#8b5e3c","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#952e2e","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#A0522D","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#A0522D","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#1E90FF","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},mIe={version:8,name:"Gruvbox",center:[8.542,47.372],zoom:11.6,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:xu.source_openmaptiles_url}},sprite:xu.sprite,glyphs:xu.glyphs,layers:[{id:"background",type:"background",paint:{"background-color":"#282822"}},{id:"landcover-glacier",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"#83a598","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"landuse-residential",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","residential"],paint:{"fill-color":"#b8bb26"}},{id:"landuse-commercial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","commercial"]],paint:{"fill-color":"#bfc23c"}},{id:"landuse-industrial",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","industrial"]],paint:{"fill-color":"#c6c951"}},{id:"park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],paint:{"fill-color":"#b8bb26","fill-opacity":{base:1.8,stops:[[9,.5],[12,.2]]}}},{id:"park-outline",type:"line",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{},paint:{"line-color":"rgba(184,187,38,0.6)","line-dasharray":[3,3]}},{id:"landuse-cemetery",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],paint:{"fill-color":"#eceeaa"}},{id:"landuse-hospital",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#fe8019"}},{id:"landuse-school",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgba(254,128,25,0.8)"}},{id:"landuse-railway",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landuse",filter:["==","class","railway"],paint:{"fill-color":"rgba(118,51,8,0.4)"}},{id:"landcover-wood",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"#83a598","fill-opacity":.1,"fill-outline-color":"hsla(0, 0%, 0%, 0.03)","fill-antialias":{base:1,stops:[[0,!1],[9,!0]]}}},{id:"landcover-grass",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"#b8bb26","fill-opacity":1}},{id:"landcover-grass-park",type:"fill",metadata:{"mapbox:group":"1444849388993.3071"},source:"openmaptiles","source-layer":"park",filter:["==","class","public_park"],paint:{"fill-color":"#b8bb26","fill-opacity":.8}},{id:"waterway-other",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["!in","class","canal","river","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.3,stops:[[13,.5],[20,2]]}}},{id:"waterway-stream-canal",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["in","class","canal","stream"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"waterway-river",type:"line",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#83a598","line-width":{base:1.2,stops:[[10,.8],[20,6]]}}},{id:"water-offset",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",maxzoom:8,filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-opacity":1,"fill-color":"#83a598","fill-translate":{base:1,stops:[[6,[2,0]],[8,[0,0]]]}}},{id:"water",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"#5c7f72"}},{id:"water-pattern",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-translate":[0,2.5],"fill-pattern":"wave"}},{id:"landcover-ice-shelf",type:"fill",metadata:{"mapbox:group":"1444849382550.77"},source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"#83a598","fill-opacity":{base:1,stops:[[0,.9],[10,.3]]}}},{id:"building",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",paint:{"fill-color":"#928374","fill-antialias":!0}},{id:"building-top",type:"fill",metadata:{"mapbox:group":"1444849364238.8171"},source:"openmaptiles","source-layer":"building",layout:{visibility:"visible"},paint:{"fill-translate":{base:1,stops:[[14,[0,0]],[16,[-2,-2]]]},"fill-outline-color":"#dfdbd7","fill-color":"#a89c91","fill-opacity":{base:1,stops:[[13,0],[16,1]]}}},{id:"tunnel-service-track-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel-minor-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","path"]]],paint:{"line-color":"#f17626","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"tunnel-service-track",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel-minor",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-join":"round"},paint:{"line-color":"#f17626","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#f2853e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","motorway"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(235,219,178,0.8)","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"tunnel-railway",type:"line",metadata:{"mapbox:group":"1444849354174.1904"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]},"line-dasharray":[2,2]}},{id:"aeroway-taxiway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,2],[17,12]]},"line-opacity":1}},{id:"aeroway-runway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#763308","line-width":{base:1.5,stops:[[11,5],[17,55]]},"line-opacity":1}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"rgba(214,93,14,0.5)"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,1],[17,10]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#f2853e","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"highway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"#a6480b","fill-outline-color":"#cfcdca","fill-opacity":.9,"fill-antialias":!1}},{id:"highway-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-link-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"highway-minor-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(214,93,14,0.8)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"highway-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"highway-primary-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[7,0],[8,1]]},"line-width":{base:1.2,stops:[[7,0],[8,.6],[9,1.5],[20,22]]}}},{id:"highway-trunk-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-opacity":{stops:[[5,0],[6,1]]},"line-width":{base:1.2,stops:[[5,0],[6,.6],[7,1.5],[20,22]]}}},{id:"highway-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[4,0],[5,.4],[6,.6],[7,1.5],[20,22]]},"line-opacity":{stops:[[4,0],[5,1]]}}},{id:"highway-path",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","path"]]],paint:{"line-color":"#fe8019","line-dasharray":[1.5,.75],"line-width":{base:1.2,stops:[[15,1.2],[20,4]]}}},{id:"highway-motorway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway_link"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-link",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"highway-minor",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!=","brunnel","tunnel"],["in","class","minor","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f49456","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"highway-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"highway-primary",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","primary"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[8.5,0],[9,.5],[20,18]]}}},{id:"highway-trunk",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","trunk"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"highway-motorway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"railway-service",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],paint:{"line-color":"rgba(118,51,8,0.7)","line-width":{base:1.4,stops:[[14,.4],[20,1]]}}},{id:"railway-service-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible"},paint:{"line-color":"rgba(118,51,8,0.7)","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,2],[20,6]]}}},{id:"railway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"railway-hatching",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!has","service"],["!in","brunnel","bridge","tunnel"],["==","class","rail"]]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"bridge-motorway-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-link-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge-secondary-tertiary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,28]]}}},{id:"bridge-trunk-primary-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,26]]}}},{id:"bridge-motorway-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#d65d0e","line-width":{base:1.2,stops:[[5,.4],[6,.6],[7,1.5],[20,22]]}}},{id:"bridge-path-casing",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#f17626","line-width":{base:1.2,stops:[[15,1.2],[20,18]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","path"]]],paint:{"line-color":"#fe8019","line-width":{base:1.2,stops:[[15,1.2],[20,4]]},"line-dasharray":[1.5,.75]}},{id:"bridge-motorway-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-link",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary_link","secondary_link","tertiary_link","trunk_link"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,20]]}}},{id:"bridge-trunk-primary",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","motorway"]],layout:{"line-join":"round"},paint:{"line-color":"#ebdbb2","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,18]]}}},{id:"bridge-railway",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge-railway-hatching",type:"line",metadata:{"mapbox:group":"1444849334699.1902"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["==","class","rail"]],paint:{"line-color":"#763308","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary-land-level-4",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["!=","maritime",1]],layout:{"line-join":"round"},paint:{"line-color":"#fb4934","line-dasharray":[3,1,1,1],"line-width":{base:1.4,stops:[[4,.4],[5,1],[12,3]]}}},{id:"boundary-land-level-2",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["!=","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fb4934","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]}}},{id:"boundary-water",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",2,4],["==","maritime",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#83a598","line-width":{base:1,stops:[[0,.6],[4,1.4],[5,2],[12,8]]},"line-opacity":{stops:[[6,.6],[10,1]]}}},{id:"waterway-name",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"waterway-name-en",type:"symbol",source:"openmaptiles","source-layer":"waterway",minzoom:13,filter:["all",["==","$type","LineString"],["has","name"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","text-letter-spacing":.2,"symbol-spacing":350},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:latin} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-lakeline-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","LineString"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":"{name:de} {name:nonlatin}","text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-ocean-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["==","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":14,"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["!has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"water-name-other-en",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["all",["==","$type","Point"],["!in","class","ocean"],["has","name:de"]],layout:{"text-font":["Open Sans Italic"],"text-size":{stops:[[0,10],[6,14]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":5,"text-rotation-alignment":"map","symbol-placement":"point","symbol-spacing":350,"text-letter-spacing":.2,visibility:"visible"},paint:{"text-color":"#fefefe","text-halo-width":1.5,"text-halo-color":"#74aee9"}},{id:"poi-level-3",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-3-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",25],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-2-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],["all",["<=","rank",24],[">=","rank",15]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["!has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:latin}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"poi-level-1-en",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["all",["<=","rank",14],["has","name"]],["has","name:de"]],layout:{"text-padding":2,"text-font":["Open Sans Semibold"],"text-anchor":"top","icon-image":"{class}_11","text-field":`{name:de}
{name:nonlatin}`,"text-offset":[0,.6],"text-size":12,"text-max-width":9},paint:{"text-halo-blur":.5,"text-color":"#fdfdfd","text-halo-width":1,"text-halo-color":"#633"}},{id:"highway-name-path",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-path-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15.5,filter:["all",["==","class","path"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-color":"#f8f4f0","text-color":"hsl(30, 23%, 62%)","text-halo-width":.5}},{id:"highway-name-minor",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-minor-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:15,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["!has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:latin} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-name-major-en",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:12.2,filter:["all",["in","class","primary","secondary","tertiary","trunk"],["has","name:de"]],layout:{"text-size":{base:1,stops:[[13,12],[14,13]]},"text-font":["Open Sans Regular"],"text-field":"{name:de} {name:nonlatin}","symbol-placement":"line","text-rotation-alignment":"map"},paint:{"text-halo-blur":.5,"text-color":"#765","text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Open Sans Semibold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}"},paint:{"text-color":"rgba(0, 0, 0, 1)"}},{id:"place-other",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["!has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-other-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!in","class","city","town","village"],["has","name:de"]],layout:{"text-letter-spacing":.1,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-transform":"uppercase","text-max-width":9},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-village-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,12],[15,22]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["!has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-town-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"],["has","name:de"]],layout:{"text-font":["Open Sans Regular"],"text-size":{base:1.2,stops:[[10,14],[15,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["!=","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["!has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:latin}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-city-capital-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","capital",2],["==","class","city"],["has","name:de"]],layout:{"text-font":["Open Sans Semibold"],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"text-field":`{name:de}
{name:nonlatin}`,"text-max-width":8,"icon-image":"star_11","text-offset":[.4,0],"icon-size":.8,"text-anchor":"left"},paint:{"text-color":"#fdfdfd","text-halo-width":1.2,"text-halo-color":"#433"}},{id:"place-country-3",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-3-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],[">=","rank",3],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-2-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",2],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-country-1-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["==","rank",1],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"uppercase","text-max-width":6.25},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["!has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:latin}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}},{id:"place-continent-en",type:"symbol",metadata:{"mapbox:group":"1444849242106.713"},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"],["has","name:de"]],layout:{"text-font":["Open Sans Bold"],"text-field":`{name:de}
{name:nonlatin}`,"text-size":14,"text-max-width":6.25,"text-transform":"uppercase"},paint:{"text-halo-blur":1,"text-color":"#fdfdfd","text-halo-width":2,"text-halo-color":"#433"}}]},d0="https://mapcomponents.github.io/react-map-components-maplibre/assets/style_thumbnails/",d7=({sx:e,styles:t=[],defaultStyles:r=!0,styleThumbnailPaths:n})=>{const i=gt.useContext(RP),[o,u]=gt.useState(!1);return K.jsxs(K.Fragment,{children:[K.jsx($i,{variant:"contained",sx:{marginTop:"10px",...e},onClick:()=>u(!0),children:K.jsx(WH,{})}),K.jsx(B2,{styles:[...r?[dIe,fIe,hIe,pIe,mIe]:[],...t||[]],styleThumbnailPaths:{...n,...r?{Monokai:d0+"monokai.png",Gruvbox:d0+"gruvbox.png","Oceanic Next":d0+"oceanic_next.png",Solarized:d0+"solarized.png","Medieval Kingdom":d0+"medieval_kingdom.png"}:{}},open:o,setOpen:u,onSelect:a=>{i.setBackgroundLayers([]),setTimeout(()=>{i.updateStyle(a)},100),u(!1)}})]})};try{d7.displayName="SelectStyleButton",d7.__docgenInfo={description:"",displayName:"SelectStyleButton",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((config: StyleSpecification[]) => void) | undefined"}},styles:{defaultValue:{value:"[]"},description:"",name:"styles",required:!1,type:{name:"StyleSpecification[] | undefined"}},defaultStyles:{defaultValue:{value:"true"},description:"",name:"defaultStyles",required:!1,type:{name:"boolean | undefined"}},styleThumbnailPaths:{defaultValue:null,description:"",name:"styleThumbnailPaths",required:!1,type:{name:"{ [key: string]: string; } | undefined"}}}}}catch{}const gIe=Ei(K.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),yIe=Ei(K.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"})),vIe=Ei(K.jsx("path",{d:"m16.24 11.51 1.57-1.57-3.75-3.75-1.57 1.57-4.14-4.13c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l4.13 4.13L3 17.25V21h3.75l4.76-4.76 4.13 4.13c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83zm-7.06-.44L5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.45 1.45zm7.88 7.89-4.13-4.13 1.9-1.9 1.45 1.45-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27zm3.65-11.92c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.47-.47-1.12-.29-1.41 0l-1.83 1.83 3.75 3.75z"})),bIe=Ei(K.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"})),_Ie=[{icon:K.jsx(bIe,{}),name:"Create PDF"},{icon:K.jsx(vIe,{}),name:"Sketch"},{icon:K.jsx(yIe,{}),name:"Layers"},{icon:K.jsx(WH,{}),name:"Background"}],xIe=()=>{const[e,t]=ee.useState(!1),r=(i,o)=>{o==="toggle"&&t(!0)},n=()=>t(!1);return K.jsx(xo,{sx:{height:330,transform:"translateZ(0px)",flexGrow:1,position:"absolute",bottom:0,right:0,width:"100px",zIndex:"1000"},children:K.jsx(Yoe,{ariaLabel:"SpeedDial tooltip example",sx:{position:"absolute",bottom:16,right:16},icon:e?K.jsx(FU,{fontSize:"large"}):K.jsx(gIe,{fontSize:"large"}),onClick:e?n:r,onOpen:r,open:e,children:_Ie.map(i=>K.jsx(sse,{icon:i.icon,tooltipTitle:i.name,tooltipOpen:!0,onClick:n,FabProps:{sx:{color:"text.primary"}}},i.name))})})};xIe.defaultProps={mapId:void 0};var OT={exports:{}},NT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f7;function wIe(){if(f7)return NT;f7=1;var e=R1();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,u=e.useMemo,a=e.useDebugValue;return NT.useSyncExternalStoreWithSelector=function(f,p,g,b,S){var _=i(null);if(_.current===null){var P={hasValue:!1,value:null};_.current=P}else P=_.current;_=u(function(){function M($){if(!D){if(D=!0,F=$,$=b($),S!==void 0&&P.hasValue){var V=P.value;if(S(V,$))return B=V}return B=$}if(V=B,r(F,$))return V;var U=b($);return S!==void 0&&S(V,U)?(F=$,V):(F=$,B=U)}var D=!1,F,B,N=g===void 0?null:g;return[function(){return M(p())},N===null?void 0:function(){return M(N())}]},[p,g,b,S]);var k=n(f,_[0],_[1]);return o(function(){P.hasValue=!0,P.value=k},[k]),a(k),k},NT}var h7;function SIe(){return h7||(h7=1,OT.exports=wIe()),OT.exports}var CIe=SIe();function EIe(e){e()}function TIe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){EIe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var p7={notify(){},get:()=>[]};function IIe(e,t){let r,n=p7,i=0,o=!1;function u(k){g();const M=n.subscribe(k);let D=!1;return()=>{D||(D=!0,M(),b())}}function a(){n.notify()}function f(){P.onStateChange&&P.onStateChange()}function p(){return o}function g(){i++,r||(r=e.subscribe(f),n=TIe())}function b(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=p7)}function S(){o||(o=!0,g())}function _(){o&&(o=!1,b())}const P={addNestedSub:u,notifyNestedSubs:a,handleChangeWrapper:f,isSubscribed:p,trySubscribe:S,tryUnsubscribe:_,getListeners:()=>n};return P}var PIe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AIe=PIe(),kIe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",MIe=kIe(),LIe=()=>AIe||MIe?ee.useLayoutEffect:ee.useEffect,RIe=LIe(),DIe=Symbol.for("react-redux-context"),OIe=typeof globalThis<"u"?globalThis:{};function NIe(){if(!ee.createContext)return{};const e=OIe[DIe]??=new Map;let t=e.get(ee.createContext);return t||(t=ee.createContext(null),e.set(ee.createContext,t)),t}var gp=NIe();function FIe(e){const{children:t,context:r,serverState:n,store:i}=e,o=ee.useMemo(()=>{const f=IIe(i);return{store:i,subscription:f,getServerState:n?()=>n:void 0}},[i,n]),u=ee.useMemo(()=>i.getState(),[i]);RIe(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,u]);const a=r||gp;return ee.createElement(a.Provider,{value:o},t)}var qPe=FIe;function fM(e=gp){return function(){return ee.useContext(e)}}var XH=fM();function YH(e=gp){const t=e===gp?XH:fM(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var BIe=YH();function zIe(e=gp){const t=e===gp?BIe:YH(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var ZH=zIe(),jIe=(e,t)=>e===t;function qIe(e=gp){const t=e===gp?XH:fM(e),r=(n,i={})=>{const{equalityFn:o=jIe}=typeof i=="function"?{equalityFn:i}:i,u=t(),{store:a,subscription:f,getServerState:p}=u;ee.useRef(!0);const g=ee.useCallback({[n.name](S){return n(S)}}[n.name],[n]),b=CIe.useSyncExternalStoreWithSelector(f.addNestedSub,a.getState,p||a.getState,g,o);return ee.useDebugValue(b),b};return Object.assign(r,{withTypes:()=>r}),r}var bm=qIe();function Ul(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var VIe=typeof Symbol=="function"&&Symbol.observable||"@@observable",m7=VIe,FT=()=>Math.random().toString(36).substring(7).split("").join("."),$Ie={INIT:`@@redux/INIT${FT()}`,REPLACE:`@@redux/REPLACE${FT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${FT()}`},z2=$Ie;function hM(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function KH(e,t,r){if(typeof e!="function")throw new Error(Ul(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ul(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ul(1));return r(KH)(e,t)}let n=e,i=t,o=new Map,u=o,a=0,f=!1;function p(){u===o&&(u=new Map,o.forEach((M,D)=>{u.set(D,M)}))}function g(){if(f)throw new Error(Ul(3));return i}function b(M){if(typeof M!="function")throw new Error(Ul(4));if(f)throw new Error(Ul(5));let D=!0;p();const F=a++;return u.set(F,M),function(){if(D){if(f)throw new Error(Ul(6));D=!1,p(),u.delete(F),o=null}}}function S(M){if(!hM(M))throw new Error(Ul(7));if(typeof M.type>"u")throw new Error(Ul(8));if(typeof M.type!="string")throw new Error(Ul(17));if(f)throw new Error(Ul(9));try{f=!0,i=n(i,M)}finally{f=!1}return(o=u).forEach(F=>{F()}),M}function _(M){if(typeof M!="function")throw new Error(Ul(10));n=M,S({type:z2.REPLACE})}function P(){const M=b;return{subscribe(D){if(typeof D!="object"||D===null)throw new Error(Ul(11));function F(){const N=D;N.next&&N.next(g())}return F(),{unsubscribe:M(F)}},[m7](){return this}}}return S({type:z2.INIT}),{dispatch:S,subscribe:b,getState:g,replaceReducer:_,[m7]:P}}function GIe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:z2.INIT})>"u")throw new Error(Ul(12));if(typeof r(void 0,{type:z2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ul(13))})}function UIe(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let i;try{GIe(r)}catch(o){i=o}return function(u={},a){if(i)throw i;let f=!1;const p={};for(let g=0;g<n.length;g++){const b=n[g],S=r[b],_=u[b],P=S(_,a);if(typeof P>"u")throw a&&a.type,new Error(Ul(14));p[b]=P,f=f||P!==_}return f=f||n.length!==Object.keys(u).length,f?p:u}}function j2(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function HIe(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Ul(15))};const u={getState:i.getState,dispatch:(f,...p)=>o(f,...p)},a=e.map(f=>f(u));return o=j2(...a)(i.dispatch),{...i,dispatch:o}}}function WIe(e){return hM(e)&&"type"in e&&typeof e.type=="string"}var JH=Symbol.for("immer-nothing"),g7=Symbol.for("immer-draftable"),Pc=Symbol.for("immer-state");function Cd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qy=Object.getPrototypeOf;function Rm(e){return!!e&&!!e[Pc]}function _h(e){return e?QH(e)||Array.isArray(e)||!!e[g7]||!!e.constructor?.[g7]||pb(e)||cS(e):!1}var XIe=Object.prototype.constructor.toString();function QH(e){if(!e||typeof e!="object")return!1;const t=Qy(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===XIe}function q2(e,t){uS(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function uS(e){const t=e[Pc];return t?t.type_:Array.isArray(e)?1:pb(e)?2:cS(e)?3:0}function aP(e,t){return uS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function eW(e,t,r){const n=uS(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function YIe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function pb(e){return e instanceof Map}function cS(e){return e instanceof Set}function em(e){return e.copy_||e.base_}function oP(e,t){if(pb(e))return new Map(e);if(cS(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=QH(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Pc];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const u=i[o],a=n[u];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[u]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[u]})}return Object.create(Qy(e),n)}else{const n=Qy(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function pM(e,t=!1){return dS(e)||Rm(e)||!_h(e)||(uS(e)>1&&Object.defineProperties(e,{set:{value:Y_},add:{value:Y_},clear:{value:Y_},delete:{value:Y_}}),Object.freeze(e),t&&Object.values(e).forEach(r=>pM(r,!0))),e}function Y_(){Cd(2)}function dS(e){return Object.isFrozen(e)}var ZIe={};function Dm(e){const t=ZIe[e];return t||Cd(0,e),t}var M1;function tW(){return M1}function KIe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function y7(e,t){t&&(Dm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function sP(e){lP(e),e.drafts_.forEach(JIe),e.drafts_=null}function lP(e){e===M1&&(M1=e.parent_)}function v7(e){return M1=KIe(M1,e)}function JIe(e){const t=e[Pc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function b7(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Pc].modified_&&(sP(t),Cd(4)),_h(e)&&(e=V2(t,e),t.parent_||$2(t,e)),t.patches_&&Dm("Patches").generateReplacementPatches_(r[Pc].base_,e,t.patches_,t.inversePatches_)):e=V2(t,r,[]),sP(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==JH?e:void 0}function V2(e,t,r){if(dS(t))return t;const n=t[Pc];if(!n)return q2(t,(i,o)=>_7(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return $2(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,u=!1;n.type_===3&&(o=new Set(i),i.clear(),u=!0),q2(o,(a,f)=>_7(e,n,i,a,f,r,u)),$2(e,i,!1),r&&e.patches_&&Dm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function _7(e,t,r,n,i,o,u){if(Rm(i)){const a=o&&t&&t.type_!==3&&!aP(t.assigned_,n)?o.concat(n):void 0,f=V2(e,i,a);if(eW(r,n,f),Rm(f))e.canAutoFreeze_=!1;else return}else u&&r.add(i);if(_h(i)&&!dS(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;V2(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(pb(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&$2(e,i)}}function $2(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pM(t,r)}function QIe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:tW(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=mM;r&&(i=[n],o=L1);const{revoke:u,proxy:a}=Proxy.revocable(i,o);return n.draft_=a,n.revoke_=u,a}var mM={get(e,t){if(t===Pc)return e;const r=em(e);if(!aP(r,t))return ePe(e,r,t);const n=r[t];return e.finalized_||!_h(n)?n:n===BT(e.base_,t)?(zT(e),e.copy_[t]=cP(n,e)):n},has(e,t){return t in em(e)},ownKeys(e){return Reflect.ownKeys(em(e))},set(e,t,r){const n=rW(em(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=BT(em(e),t),o=i?.[Pc];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(YIe(r,i)&&(r!==void 0||aP(e.base_,t)))return!0;zT(e),uP(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return BT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,zT(e),uP(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=em(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Cd(11)},getPrototypeOf(e){return Qy(e.base_)},setPrototypeOf(){Cd(12)}},L1={};q2(mM,(e,t)=>{L1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});L1.deleteProperty=function(e,t){return L1.set.call(this,e,t,void 0)};L1.set=function(e,t,r){return mM.set.call(this,e[0],t,r,e[0])};function BT(e,t){const r=e[Pc];return(r?em(r):e)[t]}function ePe(e,t,r){const n=rW(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function rW(e,t){if(!(t in e))return;let r=Qy(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Qy(r)}}function uP(e){e.modified_||(e.modified_=!0,e.parent_&&uP(e.parent_))}function zT(e){e.copy_||(e.copy_=oP(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tPe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const u=this;return function(f=o,...p){return u.produce(f,g=>r.call(this,g,...p))}}typeof r!="function"&&Cd(6),n!==void 0&&typeof n!="function"&&Cd(7);let i;if(_h(t)){const o=v7(this),u=cP(t,void 0);let a=!0;try{i=r(u),a=!1}finally{a?sP(o):lP(o)}return y7(o,n),b7(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===JH&&(i=void 0),this.autoFreeze_&&pM(i,!0),n){const o=[],u=[];Dm("Patches").generateReplacementPatches_(t,i,o,u),n(o,u)}return i}else Cd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...a)=>this.produceWithPatches(u,f=>t(f,...a));let n,i;return[this.produce(t,r,(u,a)=>{n=u,i=a}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_h(e)||Cd(8),Rm(e)&&(e=rPe(e));const t=v7(this),r=cP(e,void 0);return r[Pc].isManual_=!0,lP(t),r}finishDraft(e,t){const r=e&&e[Pc];(!r||!r.isManual_)&&Cd(9);const{scope_:n}=r;return y7(n,t),b7(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Dm("Patches").applyPatches_;return Rm(e)?n(e,t):this.produce(e,i=>n(i,t))}};function cP(e,t){const r=pb(e)?Dm("MapSet").proxyMap_(e,t):cS(e)?Dm("MapSet").proxySet_(e,t):QIe(e,t);return(t?t.scope_:tW()).drafts_.push(r),r}function rPe(e){return Rm(e)||Cd(10,e),nW(e)}function nW(e){if(!_h(e)||dS(e))return e;const t=e[Pc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=oP(e,t.scope_.immer_.useStrictShallowCopy_)}else r=oP(e,!0);return q2(r,(n,i)=>{eW(r,n,nW(i))}),t&&(t.finalized_=!1),r}var nPe=new tPe,iW=nPe.produce;function aW(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var iPe=aW(),aPe=aW,oPe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?j2:j2.apply(null,arguments)};function x7(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(dh(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>WIe(n)&&n.type===e,r}var oW=class O0 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,O0.prototype)}static get[Symbol.species](){return O0}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new O0(...t[0].concat(this)):new O0(...t.concat(this))}};function w7(e){return _h(e)?iW(e,()=>{}):e}function Z_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function sPe(e){return typeof e=="boolean"}var lPe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let u=new oW;return r&&(sPe(r)?u.push(iPe):u.push(aPe(r.extraArgument))),u},uPe="RTK_autoBatch",S7=e=>t=>{setTimeout(t,e)},cPe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,u=!1;const a=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:S7(10):e.type==="callback"?e.queueNotification:S7(e.timeout),p=()=>{u=!1,o&&(o=!1,a.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const b=()=>i&&g(),S=n.subscribe(b);return a.add(g),()=>{S(),a.delete(g)}},dispatch(g){try{return i=!g?.meta?.[uPe],o=!i,o&&(u||(u=!0,f(p))),n.dispatch(g)}finally{i=!0}}})},dPe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new oW(e);return n&&i.push(cPe(typeof n=="object"?n:void 0)),i};function fPe(e){const t=lPe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(hM(r))a=UIe(r);else throw new Error(dh(1));let f;typeof n=="function"?f=n(t):f=t();let p=j2;i&&(p=oPe({trace:!1,...typeof i=="object"&&i}));const g=HIe(...f),b=dPe(g);let S=typeof u=="function"?u(b):b();const _=p(...S);return KH(a,o,_)}function sW(e){const t={},r=[];let n;const i={addCase(o,u){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(dh(28));if(a in t)throw new Error(dh(29));return t[a]=u,i},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:o.settled,reducer:u.settled}),i},addMatcher(o,u){return r.push({matcher:o,reducer:u}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function hPe(e){return typeof e=="function"}function pPe(e,t){let[r,n,i]=sW(t),o;if(hPe(e))o=()=>w7(e());else{const a=w7(e);o=()=>a}function u(a=o(),f){let p=[r[f.type],...n.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[i]),p.reduce((g,b)=>{if(b)if(Rm(g)){const _=b(g,f);return _===void 0?g:_}else{if(_h(g))return iW(g,S=>b(S,f));{const S=b(g,f);if(S===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return g},a)}return u.getInitialState=o,u}var mPe=Symbol.for("rtk-slice-createasyncthunk");function gPe(e,t){return`${e}/${t}`}function yPe({creators:e}={}){const t=e?.asyncThunk?.[mPe];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(dh(11));const u=(typeof n.reducers=="function"?n.reducers(_Pe()):n.reducers)||{},a=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(B,N){const $=typeof B=="string"?B:B.type;if(!$)throw new Error(dh(12));if($ in f.sliceCaseReducersByType)throw new Error(dh(13));return f.sliceCaseReducersByType[$]=N,p},addMatcher(B,N){return f.sliceMatchers.push({matcher:B,reducer:N}),p},exposeAction(B,N){return f.actionCreators[B]=N,p},exposeCaseReducer(B,N){return f.sliceCaseReducersByName[B]=N,p}};a.forEach(B=>{const N=u[B],$={reducerName:B,type:gPe(i,B),createNotation:typeof n.reducers=="function"};wPe(N)?CPe($,N,p,t):xPe($,N,p)});function g(){const[B={},N=[],$=void 0]=typeof n.extraReducers=="function"?sW(n.extraReducers):[n.extraReducers],V={...B,...f.sliceCaseReducersByType};return pPe(n.initialState,U=>{for(let X in V)U.addCase(X,V[X]);for(let X of f.sliceMatchers)U.addMatcher(X.matcher,X.reducer);for(let X of N)U.addMatcher(X.matcher,X.reducer);$&&U.addDefaultCase($)})}const b=B=>B,S=new Map,_=new WeakMap;let P;function k(B,N){return P||(P=g()),P(B,N)}function M(){return P||(P=g()),P.getInitialState()}function D(B,N=!1){function $(U){let X=U[B];return typeof X>"u"&&N&&(X=Z_(_,$,M)),X}function V(U=b){const X=Z_(S,N,()=>new WeakMap);return Z_(X,U,()=>{const Z={};for(const[oe,re]of Object.entries(n.selectors??{}))Z[oe]=vPe(re,U,()=>Z_(_,U,M),N);return Z})}return{reducerPath:B,getSelectors:V,get selectors(){return V($)},selectSlice:$}}const F={name:i,reducer:k,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:M,...D(o),injectInto(B,{reducerPath:N,...$}={}){const V=N??o;return B.inject({reducerPath:V,reducer:k},$),{...F,...D(V,!0)}}};return F}}function vPe(e,t,r,n){function i(o,...u){let a=t(o);return typeof a>"u"&&n&&(a=r()),e(a,...u)}return i.unwrapped=e,i}var bPe=yPe();function _Pe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function xPe({type:e,reducerName:t,createNotation:r},n,i){let o,u;if("reducer"in n){if(r&&!SPe(n))throw new Error(dh(17));o=n.reducer,u=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?x7(e,u):x7(e))}function wPe(e){return e._reducerDefinitionType==="asyncThunk"}function SPe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function CPe({type:e,reducerName:t},r,n,i){if(!i)throw new Error(dh(18));const{payloadCreator:o,fulfilled:u,pending:a,rejected:f,settled:p,options:g}=r,b=i(e,o,g);n.exposeAction(t,b),u&&n.addCase(b.fulfilled,u),a&&n.addCase(b.pending,a),f&&n.addCase(b.rejected,f),p&&n.addMatcher(b.settled,p),n.exposeCaseReducer(t,{fulfilled:u||K_,pending:a||K_,rejected:f||K_,settled:p||K_})}function K_(){}function dh(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function lW(e,t,r){t.forEach(n=>{e(n,r),n.layers&&n.layers.length>0&&lW(e,n.layers,n)})}const EPe={mapConfigs:{}},uW=bPe({name:"mapConfig",initialState:EPe,reducers:{setMapConfig:(e,t)=>{const r=t.payload.mapConfig,n=t.payload.key;e.mapConfigs[n]=r},removeMapConfig:(e,t)=>{delete e.mapConfigs[t.payload.key]},setLayerInMapConfig:(e,t)=>{const{mapConfigKey:r,layer:n}=t.payload,i=e.mapConfigs[r];if(i){for(let o=0;o<i.layers.length;o++)if(i.layers[o].uuid===n.uuid){i.layers[o]=n;break}}},removeLayerFromMapConfig:(e,t)=>{const{mapConfigKey:r,layerUuid:n}=t.payload,i=e.mapConfigs[r];if(i){const o=i.layers.findIndex(u=>u.uuid===n);o!==-1&&(delete i.layers[o],lW(function(u,a){a&&a.layers&&(a.layers=a.layers.filter(f=>f.uuid!==n))},i.layerOrder))}},updateLayerOrder:(e,t)=>{const{mapConfigKey:r,newOrder:n}=t.payload,i=e.mapConfigs[r];i&&(i.layerOrder=n)},setMasterVisible(e,t){const{mapConfigKey:r,layerId:n,masterVisible:i}=t.payload,o=e.mapConfigs[r];if(o){const u=o.layers.findIndex(a=>a.uuid===n);if(u!==-1){const a=o.layers[u];if(a){const f=[...o.layers];a.type==="folder"&&o.layerOrder.forEach(p=>{p.uuid===n&&p.layers?.forEach(g=>{const b=o.layers.findIndex(_=>_.uuid===g.uuid),S=f[b];f[b]={...S,masterVisible:i},S?.type==="vt"&&S?.config?.layers&&(S.config.layers=S.config.layers.map(_=>({..._,masterVisible:i})))})}),a.type==="vt"&&a?.config?.layers&&(a.config.layers=a.config.layers.map(p=>({...p,masterVisible:i}))),e.mapConfigs[r].layers=f}}}}}}),cW=(e,t)=>{const r=e.mapConfigs;for(const n in r){const i=r[n],o=i.layers.findIndex(a=>a.uuid===t),u=i.layers[o];if(u)return u}return null},TPe=(e,t)=>{const r=e.mapConfig.mapConfigs[t];if(!r)return[];const n=r.layerOrder,i=[];function o(u){u.forEach(a=>{i.push(a.uuid),a.layers&&a.layers.length>0&&o(a.layers)})}return o(n),i},VPe=fPe({reducer:{mapConfig:uW.reducer}}),{setMapConfig:$Pe,removeMapConfig:GPe,setLayerInMapConfig:dW,removeLayerFromMapConfig:UPe,updateLayerOrder:IPe,setMasterVisible:PPe}=uW.actions,C7=Ei(K.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}));function dP(e){return K.jsx(w1,{value:e.value,label:"Color",onChange:t=>{typeof e.onChange=="function"&&e.onChange(t)}})}try{dP.displayName="PaintPropsColorPicker",dP.__docgenInfo={description:"",displayName:"PaintPropsColorPicker",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}}}catch{}const APe=Sr(Kc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"}),kPe=Sr(xo)({marginLeft:"61px"}),fW={"circle-color":"colorpicker","circle-radius":"slider","circle-stroke-color":"colorpicker","circle-stroke-width":"slider","fill-color":"colorpicker","fill-outline-color":"colorpicker","line-color":"colorpicker","line-width":"slider","line-blur":"slider"},MPe=Object.keys(fW),LPe={"circle-stroke-width":{step:1,min:1,max:20},"circle-radius":{step:1,min:1,max:100},"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function fP(e){const t=ee.useRef(Math.round(Math.random()*1e10)),r=cW(bm(a=>a.mapConfig),e.layerUuid),n=ZH(),i=ee.useMemo(()=>r?.config?.options?.paint?r?.config?.options?.paint:{},[r?.config?.options?.paint]),o=(a,f)=>{const p={...r,config:{...r?.config,options:{...r?.config?.options,paint:{...r?.config?.options?.paint,[a]:f}}}};n(dW({mapConfigKey:e.mapConfigKey,layer:p}))},u=ee.useCallback(a=>{if(i?.[a]&&MPe.indexOf(a)!==-1&&(typeof i[a]=="number"||typeof i[a]=="string")){const f=K.jsx(ns,{id:a+"_label",gutterBottom:!0,children:a});switch(fW[a]){case"slider":return K.jsxs(gt.Fragment,{children:[f,K.jsx(tA,{...LPe[a],value:i[a],valueLabelDisplay:"auto",onChange:(p,g)=>{g&&typeof g=="number"&&o(a,g)}})]},a);case"numberfield":return K.jsxs(gt.Fragment,{children:[f,K.jsx(bw,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:i[a],onChange:p=>{p?.target?.value&&o(a,parseInt(p.target.value))}})]},a);case"colorpicker":return K.jsxs(gt.Fragment,{children:[f,K.jsx(xo,{sx:{"& > div":{width:"initial !important"}},children:K.jsx(dP,{value:i[a],onChange:p=>{o(a,p)}},a)})]},a)}}return null},[i]);return K.jsx(K.Fragment,{children:K.jsx(APe,{children:K.jsx(ed,{children:K.jsx(kPe,{children:i&&Object.keys(i).map(a=>u(a))})},t.current+"_paintPropForm")})})}try{fP.displayName="LayerPropertyForm",fP.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{layerUuid:{defaultValue:null,description:"",name:"layerUuid",required:!0,type:{name:"string"}},mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}}}}}catch{}const RPe=Sr(xc)({padding:"4px",marginTop:"-3px"}),DPe=Sr(xc)({marginLeft:"20px"}),f0=Sr(ed)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}),jT=Sr(s1)({minWidth:"30px"}),J_=Sr(xc)({marginRight:"0px",padding:"0px"}),E7=Sr(xo)(({open:e})=>({display:e?"block":"none"})),T7=Sr(Od)({marginLeft:"50px"});function G2(e){const[t,r]=ee.useState(!1),[n,i]=ee.useState(!1),o=cW(bm(M=>M.mapConfig),e.layerOrderConfig.uuid),[u,a]=ee.useState(!1),f=ZH(),p=bm(M=>M.mapConfig.mapConfigs[e.mapConfigKey]);function g(M,D){const F=JSON.parse(JSON.stringify(p.layerOrder)),B=N=>{let $=!1;return N.forEach((V,U)=>{if(!$)if(V.uuid===M){const X=D(U);if(X<0||X>=N.length)throw new Error("New position is out of bounds");const[Z]=N.splice(U,1);N.splice(X,0,Z),$=!0}else V.layers&&B(V.layers)&&($=!0)}),$};B(F),f(IPe({mapConfigKey:e.mapConfigKey,newOrder:F}))}const b=M=>{g(M,D=>D+1)},S=M=>{g(M,D=>D-1)};function _(M,D=""){const F=!M;o&&(P(o,F,D),(o.type==="folder"||o.type==="vt"&&D==="")&&f(PPe({mapConfigKey:e.mapConfigKey,layerId:o.uuid,masterVisible:F})))}function P(M,D,F){let B={...M};if(M?.type==="folder")B={...M,visible:!M.visible};else switch(M?.type){case"geojson":{B={...M,config:{...M.config,options:{...M?.config?.options,layout:{...M?.config?.options?.layout,visibility:D?"visible":"none"}}}};break}case"vt":{let N=!1;const $=M.config.layers.map(V=>V.id===F?(N=!0,{...V,layout:{...V.layout,visibility:D?"visible":"none"}}):V);N?B={...M,config:{...M.config,layers:$}}:B={...M,visible:D,config:{...M.config,layers:$}};break}case"wms":{B={...M,visible:D,config:{...M.config,visible:D}};break}}return f(dW({mapConfigKey:e.mapConfigKey,layer:B})),B}function k(M){let D=!0;if(M?.type==="geojson")return D=M?.config?.options?.layout?.visibility!=="none",K.jsxs(K.Fragment,{children:[K.jsxs(f0,{sx:{...e.listItemSx},secondaryAction:K.jsxs(K.Fragment,{children:[e?.buttons,K.jsx(J_,{disabled:!1,onClick:()=>{b(M.uuid)},children:K.jsx(wx,{})}),K.jsx(J_,{disabled:!1,onClick:()=>{S(M.uuid)},children:K.jsx(Sx,{})}),M.configurable&&K.jsx(K.Fragment,{children:K.jsx(RPe,{edge:"end","aria-label":"settings",onClick:()=>{r(F=>!F)},children:K.jsx(KA,{})})})]}),children:[K.jsx(eh,{children:K.jsx(th,{checked:D,disabled:M.masterVisible===!1,onClick:()=>_(D)})}),K.jsx(Hc,{variant:"layerlist",primary:M.name||"",secondary:e.description,primaryTypographyProps:{overflow:"hidden"}}),e.buttons]},M.uuid),M.configurable&&t&&K.jsxs(K.Fragment,{children:[e.showDeleteButton&&K.jsxs(K.Fragment,{children:[K.jsx(DPe,{edge:"end","aria-label":"delete",onClick:()=>{},children:K.jsx(rb,{})}),n&&K.jsx(Zy,{open:n,onConfirm:()=>{i(!1)},onCancel:()=>{i(!1)},title:"Delete layer",text:"Are you sure you want to delete this layer?"})]}),K.jsx(fP,{layerUuid:M.uuid,mapConfigKey:e.mapConfigKey})]})]});if(M?.type==="vt")return K.jsxs(K.Fragment,{children:[K.jsxs(f0,{sx:{...e.listItemSx},secondaryAction:void 0,children:[K.jsxs(jT,{children:[K.jsx(J_,{edge:"end","aria-label":"open",onClick:()=>a(!u),children:u?K.jsx(o2,{}):K.jsx(C7,{})}),K.jsx(eh,{children:K.jsx(th,{checked:M.visible,disabled:M.masterVisible===!1,onClick:()=>_(M.visible??!1)})})]}),K.jsx(Hc,{primary:M.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},M.uuid),K.jsx(E7,{open:u,children:K.jsx(T7,{disablePadding:!0,children:M.config?.layers?.map(F=>K.jsxs(f0,{sx:{...e.listItemSx},secondaryAction:void 0,children:[" ",K.jsx(jT,{children:K.jsx(eh,{children:K.jsx(th,{checked:(F?.layout?.visibility??"visible")==="visible",disabled:F?.masterVisible===!1,onClick:()=>_(F?.layout?.visibility==="visible",F.id)})})}),K.jsx(Hc,{variant:"layerlist",primary:F["source-layer"],primaryTypographyProps:{overflow:"hidden"}},F.id)]},F.id))})},M.uuid+"_list")]});if(M?.type==="wms"){const F=M.config?.visible??!0;return K.jsx(K.Fragment,{children:K.jsxs(f0,{sx:{...e.listItemSx},secondaryAction:void 0,children:[K.jsx(eh,{children:K.jsx(th,{checked:F,disabled:M.masterVisible===!1,onClick:()=>_(F)})}),K.jsx(Hc,{primary:M.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},M.uuid)})}return M.type==="folder"?K.jsxs(K.Fragment,{children:[K.jsxs(f0,{sx:{...e.listItemSx},children:[K.jsxs(jT,{children:[K.jsx(J_,{edge:"end","aria-label":"open",onClick:()=>a(!u),children:u?K.jsx(o2,{}):K.jsx(C7,{})}),K.jsx(eh,{children:K.jsx(th,{checked:M.visible,disabled:M.masterVisible,onClick:()=>_(M.visible?M.visible:!1)})})]}),K.jsx(Hc,{primary:M.name,secondary:e.description,primaryTypographyProps:{overflow:"hidden"}})]},M.uuid),K.jsx(E7,{open:u,children:K.jsx(T7,{disablePadding:!0,children:e?.layerOrderConfig?.layers?.map(F=>K.jsx(G2,{layerOrderConfig:F,mapConfigKey:e.mapConfigKey},F.uuid))})},M.uuid+"_list")]}):K.jsx(K.Fragment,{})}return K.jsx(K.Fragment,{children:o&&k(o)})}try{G2.displayName="LayerTreeListItem",G2.__docgenInfo={description:"",displayName:"LayerTreeListItem",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string | undefined"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},setLayerState:{defaultValue:null,description:"",name:"setLayerState",required:!1,type:{name:"((state: unknown) => void) | undefined"}},showDeleteButton:{defaultValue:null,description:"",name:"showDeleteButton",required:!1,type:{name:"boolean | undefined"}},listItemSx:{defaultValue:null,description:"",name:"listItemSx",required:!1,type:{name:"SxProps | undefined"}},buttons:{defaultValue:null,description:"",name:"buttons",required:!1,type:{name:"Element | undefined"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean | undefined"}},mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}},layerOrderConfig:{defaultValue:null,description:"",name:"layerOrderConfig",required:!0,type:{name:"LayerOrderItem"}}}}}catch{}const OPe=Sr(Od)({marginTop:"15px"});function I7(e){const t=bm(r=>r.mapConfig.mapConfigs?.[e.mapConfigKey]?.layerOrder);return K.jsx(OPe,{children:t?.map?.(r=>K.jsx(G2,{layerOrderConfig:r,mapConfigKey:e.mapConfigKey},r.uuid))})}try{I7.displayName="LayerTree",I7.__docgenInfo={description:"",displayName:"LayerTree",props:{mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}}}}}catch{}function P7(e){const t=bm(f=>f.mapConfig.mapConfigs?.[e.mapConfigKey]?.layers),r=bm(f=>f.mapConfig.mapConfigs?.[e.mapConfigKey]?.layerOrder),n=ha({mapId:e?.mapId}),i=bm(f=>TPe(f,e.mapConfigKey)),o=ee.useRef([]);ee.useEffect(()=>{if(!n.map||!r)return;const f=(g,b,S)=>{for(let _=0;_<g.length;_++){const P=g[_],k=b?b[_]:null;if(P.uuid!==k?.uuid&&S.getLayer(P.uuid)){const M=_>0?g[_-1].uuid:void 0;S.moveLayer(P.uuid,M)}if(P.layers&&P.layers.length>0){const M=k?.layers||[];f(P.layers,M,S)}}},p=o.current;f(r,p,n.map),o.current=r},[r,n.map]);const u=ee.useMemo(()=>["order-background",...i.map(p=>"layer_id_"+p),"order-labels"],[i]);function a(f){const p=t.findIndex(b=>b.uuid===f.uuid),g=t[p];switch(g?.type){case"geojson":return K.jsx(Zu,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,...g.config,options:{...g.config.options,layout:{...g?.config?.options?.layout,visibility:g.masterVisible===!1?"none":g?.config?.options?.layout?.visibility?g?.config?.options?.layout?.visibility:"visible"}}},g.uuid);case"vt":{const b=g.config.layers.map(S=>{const _={...S};return _.layout&&(_.layout={..._.layout,visibility:_.masterVisible===!1?"none":_.layout.visibility??"visible"}),_});return K.jsx(Ay,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,url:g.config.url,layers:b},g.uuid)}case"wms":{const b=g.masterVisible===!1?!1:g.config?.visible;return K.jsx(C2,{layerId:g.uuid,insertBeforeLayer:"layer_id_"+g.uuid,url:g.config?.url||"",urlParameters:g.config?.urlParameters,visible:b},g.uuid)}case"folder":return f?.layers?f.layers.map(b=>a(b)):K.jsx(K.Fragment,{});default:return null}}return K.jsxs(K.Fragment,{children:[K.jsx(T2,{layerIds:u}),r?.map?.(f=>a(f))]})}try{P7.displayName="LayerOnMap",P7.__docgenInfo={description:"",displayName:"LayerOnMap",props:{mapConfigKey:{defaultValue:null,description:"",name:"mapConfigKey",required:!0,type:{name:"string"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}export{AI as $,hh as A,$i as B,fw as C,XP as D,jPe as E,SP as F,Yl as G,zPe as H,ri as I,ti as J,tw as K,z1 as L,fD as M,Sr as N,li as O,Kc as P,vc as Q,ip as R,EI as S,wQ as T,zy as U,Hc as V,w1 as W,tA as X,n9 as Y,I2 as Z,OCe as _,DQ as a,PT as a$,v9 as a0,c7 as a1,Z6 as a2,o9 as a3,C2 as a4,s9 as a5,dZ as a6,B7 as a7,O1 as a8,yP as a9,_9 as aA,Od as aB,ed as aC,xc as aD,k9 as aE,w9 as aF,w2 as aG,u3 as aH,ih as aI,FU as aJ,eq as aK,P9 as aL,A9 as aM,u9 as aN,DP as aO,ph as aP,Ay as aQ,C9 as aR,fee as aS,Lee as aT,o2 as aU,RI as aV,qI as aW,lue as aX,xu as aY,eCe as aZ,x2 as a_,jg as aa,uw as ab,vp as ac,d3 as ad,MI as ae,uI as af,Su as ag,Jae as ah,f3 as ai,QD as aj,np as ak,vw as al,r9 as am,PI as an,Kn as ao,si as ap,Zr as aq,jn as ar,Hj as as,rl as at,Jj as au,S9 as av,T2 as aw,i9 as ax,r1 as ay,Nm as az,lO as b,BCe as b0,RP as b1,ah as b2,iP as b3,cI as b4,ZI as b5,BI as b6,S2 as b7,d7 as b8,mIe as b9,dI as ba,oh as bb,dIe as bc,qPe as bd,VPe as be,I7 as bf,ZH as bg,$Pe as bh,P7 as bi,xIe as bj,Ka as bk,Zu as c,p3 as d,CN as e,W6 as f,TQ as g,Fm as h,YP as i,bw as j,Ei as k,ha as l,nV as m,a2 as n,xo as o,ns as p,aq as q,OZ as r,pm as s,sI as t,H1 as u,lI as v,Om as w,EP as x,cn as y,XK as z};
